var bxe=Object.defineProperty;var v$=t=>{throw TypeError(t)};var wxe=(t,e,n)=>e in t?bxe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ce=(t,e,n)=>wxe(t,typeof e!="symbol"?e+"":e,n),AI=(t,e,n)=>e.has(t)||v$("Cannot "+n);var re=(t,e,n)=>(AI(t,e,"read from private field"),n?n.call(t):e.get(t)),Fe=(t,e,n)=>e.has(t)?v$("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),ge=(t,e,n,r)=>(AI(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),nt=(t,e,n)=>(AI(t,e,"access private method"),n);var pb=(t,e,n,r)=>({set _(i){ge(t,e,i,n)},get _(){return re(t,e,r)}});function Exe(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var RD={},lN={};lN.byteLength=Txe;lN.toByteArray=Nxe;lN.fromByteArray=_xe;var Ec=[],La=[],Sxe=typeof Uint8Array<"u"?Uint8Array:Array,TI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var $0=0,Axe=TI.length;$0<Axe;++$0)Ec[$0]=TI[$0],La[TI.charCodeAt($0)]=$0;La[45]=62;La[95]=63;function Bee(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function Txe(t){var e=Bee(t),n=e[0],r=e[1];return(n+r)*3/4-r}function kxe(t,e,n){return(e+n)*3/4-n}function Nxe(t){var e,n=Bee(t),r=n[0],i=n[1],s=new Sxe(kxe(t,r,i)),o=0,a=i>0?r-4:r,l;for(l=0;l<a;l+=4)e=La[t.charCodeAt(l)]<<18|La[t.charCodeAt(l+1)]<<12|La[t.charCodeAt(l+2)]<<6|La[t.charCodeAt(l+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=La[t.charCodeAt(l)]<<2|La[t.charCodeAt(l+1)]>>4,s[o++]=e&255),i===1&&(e=La[t.charCodeAt(l)]<<10|La[t.charCodeAt(l+1)]<<4|La[t.charCodeAt(l+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function Cxe(t){return Ec[t>>18&63]+Ec[t>>12&63]+Ec[t>>6&63]+Ec[t&63]}function Pxe(t,e,n){for(var r,i=[],s=e;s<n;s+=3)r=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),i.push(Cxe(r));return i.join("")}function _xe(t){for(var e,n=t.length,r=n%3,i=[],s=16383,o=0,a=n-r;o<a;o+=s)i.push(Pxe(t,o,o+s>a?a:o+s));return r===1?(e=t[n-1],i.push(Ec[e>>2]+Ec[e<<4&63]+"==")):r===2&&(e=(t[n-2]<<8)+t[n-1],i.push(Ec[e>>10]+Ec[e>>4&63]+Ec[e<<2&63]+"=")),i.join("")}var OD={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */OD.read=function(t,e,n,r,i){var s,o,a=i*8-r-1,l=(1<<a)-1,c=l>>1,u=-7,h=n?i-1:0,m=n?-1:1,g=t[e+h];for(h+=m,s=g&(1<<-u)-1,g>>=-u,u+=a;u>0;s=s*256+t[e+h],h+=m,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=r;u>0;o=o*256+t[e+h],h+=m,u-=8);if(s===0)s=1-c;else{if(s===l)return o?NaN:(g?-1:1)*(1/0);o=o+Math.pow(2,r),s=s-c}return(g?-1:1)*o*Math.pow(2,s-r)};OD.write=function(t,e,n,r,i,s){var o,a,l,c=s*8-i-1,u=(1<<c)-1,h=u>>1,m=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=r?0:s-1,y=r?1:-1,v=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+h>=1?e+=m/l:e+=m*Math.pow(2,1-h),e*l>=2&&(o++,l/=2),o+h>=u?(a=0,o=u):o+h>=1?(a=(e*l-1)*Math.pow(2,i),o=o+h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;t[n+g]=a&255,g+=y,a/=256,i-=8);for(o=o<<i|a,c+=i;c>0;t[n+g]=o&255,g+=y,o/=256,c-=8);t[n+g-y]|=v*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=lN,n=OD,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=u,t.SlowBuffer=D,t.INSPECT_MAX_BYTES=50;const i=2147483647;t.kMaxLength=i;const{Uint8Array:s,ArrayBuffer:o,SharedArrayBuffer:a}=globalThis;u.TYPED_ARRAY_SUPPORT=l(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{const ie=new s(1),J={foo:function(){return 42}};return Object.setPrototypeOf(J,s.prototype),Object.setPrototypeOf(ie,J),ie.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function c(ie){if(ie>i)throw new RangeError('The value "'+ie+'" is invalid for option "size"');const J=new s(ie);return Object.setPrototypeOf(J,u.prototype),J}function u(ie,J,Z){if(typeof ie=="number"){if(typeof J=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return y(ie)}return h(ie,J,Z)}u.poolSize=8192;function h(ie,J,Z){if(typeof ie=="string")return v(ie,J);if(o.isView(ie))return w(ie);if(ie==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ie);if(Kt(ie,o)||ie&&Kt(ie.buffer,o)||typeof a<"u"&&(Kt(ie,a)||ie&&Kt(ie.buffer,a)))return k(ie,J,Z);if(typeof ie=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const ue=ie.valueOf&&ie.valueOf();if(ue!=null&&ue!==ie)return u.from(ue,J,Z);const Se=N(ie);if(Se)return Se;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ie[Symbol.toPrimitive]=="function")return u.from(ie[Symbol.toPrimitive]("string"),J,Z);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ie)}u.from=function(ie,J,Z){return h(ie,J,Z)},Object.setPrototypeOf(u.prototype,s.prototype),Object.setPrototypeOf(u,s);function m(ie){if(typeof ie!="number")throw new TypeError('"size" argument must be of type number');if(ie<0)throw new RangeError('The value "'+ie+'" is invalid for option "size"')}function g(ie,J,Z){return m(ie),ie<=0?c(ie):J!==void 0?typeof Z=="string"?c(ie).fill(J,Z):c(ie).fill(J):c(ie)}u.alloc=function(ie,J,Z){return g(ie,J,Z)};function y(ie){return m(ie),c(ie<0?0:R(ie)|0)}u.allocUnsafe=function(ie){return y(ie)},u.allocUnsafeSlow=function(ie){return y(ie)};function v(ie,J){if((typeof J!="string"||J==="")&&(J="utf8"),!u.isEncoding(J))throw new TypeError("Unknown encoding: "+J);const Z=O(ie,J)|0;let ue=c(Z);const Se=ue.write(ie,J);return Se!==Z&&(ue=ue.slice(0,Se)),ue}function b(ie){const J=ie.length<0?0:R(ie.length)|0,Z=c(J);for(let ue=0;ue<J;ue+=1)Z[ue]=ie[ue]&255;return Z}function w(ie){if(Kt(ie,s)){const J=new s(ie);return k(J.buffer,J.byteOffset,J.byteLength)}return b(ie)}function k(ie,J,Z){if(J<0||ie.byteLength<J)throw new RangeError('"offset" is outside of buffer bounds');if(ie.byteLength<J+(Z||0))throw new RangeError('"length" is outside of buffer bounds');let ue;return J===void 0&&Z===void 0?ue=new s(ie):Z===void 0?ue=new s(ie,J):ue=new s(ie,J,Z),Object.setPrototypeOf(ue,u.prototype),ue}function N(ie){if(u.isBuffer(ie)){const J=R(ie.length)|0,Z=c(J);return Z.length===0||ie.copy(Z,0,0,J),Z}if(ie.length!==void 0)return typeof ie.length!="number"||Re(ie.length)?c(0):b(ie);if(ie.type==="Buffer"&&Array.isArray(ie.data))return b(ie.data)}function R(ie){if(ie>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return ie|0}function D(ie){return+ie!=ie&&(ie=0),u.alloc(+ie)}u.isBuffer=function(J){return J!=null&&J._isBuffer===!0&&J!==u.prototype},u.compare=function(J,Z){if(Kt(J,s)&&(J=u.from(J,J.offset,J.byteLength)),Kt(Z,s)&&(Z=u.from(Z,Z.offset,Z.byteLength)),!u.isBuffer(J)||!u.isBuffer(Z))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(J===Z)return 0;let ue=J.length,Se=Z.length;for(let de=0,ye=Math.min(ue,Se);de<ye;++de)if(J[de]!==Z[de]){ue=J[de],Se=Z[de];break}return ue<Se?-1:Se<ue?1:0},u.isEncoding=function(J){switch(String(J).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(J,Z){if(!Array.isArray(J))throw new TypeError('"list" argument must be an Array of Buffers');if(J.length===0)return u.alloc(0);let ue;if(Z===void 0)for(Z=0,ue=0;ue<J.length;++ue)Z+=J[ue].length;const Se=u.allocUnsafe(Z);let de=0;for(ue=0;ue<J.length;++ue){let ye=J[ue];if(Kt(ye,s))de+ye.length>Se.length?(u.isBuffer(ye)||(ye=u.from(ye)),ye.copy(Se,de)):s.prototype.set.call(Se,ye,de);else if(u.isBuffer(ye))ye.copy(Se,de);else throw new TypeError('"list" argument must be an Array of Buffers');de+=ye.length}return Se};function O(ie,J){if(u.isBuffer(ie))return ie.length;if(o.isView(ie)||Kt(ie,o))return ie.byteLength;if(typeof ie!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ie);const Z=ie.length,ue=arguments.length>2&&arguments[2]===!0;if(!ue&&Z===0)return 0;let Se=!1;for(;;)switch(J){case"ascii":case"latin1":case"binary":return Z;case"utf8":case"utf-8":return rt(ie).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Z*2;case"hex":return Z>>>1;case"base64":return Me(ie).length;default:if(Se)return ue?-1:rt(ie).length;J=(""+J).toLowerCase(),Se=!0}}u.byteLength=O;function B(ie,J,Z){let ue=!1;if((J===void 0||J<0)&&(J=0),J>this.length||((Z===void 0||Z>this.length)&&(Z=this.length),Z<=0)||(Z>>>=0,J>>>=0,Z<=J))return"";for(ie||(ie="utf8");;)switch(ie){case"hex":return M(this,J,Z);case"utf8":case"utf-8":return V(this,J,Z);case"ascii":return G(this,J,Z);case"latin1":case"binary":return q(this,J,Z);case"base64":return L(this,J,Z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,J,Z);default:if(ue)throw new TypeError("Unknown encoding: "+ie);ie=(ie+"").toLowerCase(),ue=!0}}u.prototype._isBuffer=!0;function z(ie,J,Z){const ue=ie[J];ie[J]=ie[Z],ie[Z]=ue}u.prototype.swap16=function(){const J=this.length;if(J%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let Z=0;Z<J;Z+=2)z(this,Z,Z+1);return this},u.prototype.swap32=function(){const J=this.length;if(J%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let Z=0;Z<J;Z+=4)z(this,Z,Z+3),z(this,Z+1,Z+2);return this},u.prototype.swap64=function(){const J=this.length;if(J%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let Z=0;Z<J;Z+=8)z(this,Z,Z+7),z(this,Z+1,Z+6),z(this,Z+2,Z+5),z(this,Z+3,Z+4);return this},u.prototype.toString=function(){const J=this.length;return J===0?"":arguments.length===0?V(this,0,J):B.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(J){if(!u.isBuffer(J))throw new TypeError("Argument must be a Buffer");return this===J?!0:u.compare(this,J)===0},u.prototype.inspect=function(){let J="";const Z=t.INSPECT_MAX_BYTES;return J=this.toString("hex",0,Z).replace(/(.{2})/g,"$1 ").trim(),this.length>Z&&(J+=" ... "),"<Buffer "+J+">"},r&&(u.prototype[r]=u.prototype.inspect),u.prototype.compare=function(J,Z,ue,Se,de){if(Kt(J,s)&&(J=u.from(J,J.offset,J.byteLength)),!u.isBuffer(J))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof J);if(Z===void 0&&(Z=0),ue===void 0&&(ue=J?J.length:0),Se===void 0&&(Se=0),de===void 0&&(de=this.length),Z<0||ue>J.length||Se<0||de>this.length)throw new RangeError("out of range index");if(Se>=de&&Z>=ue)return 0;if(Se>=de)return-1;if(Z>=ue)return 1;if(Z>>>=0,ue>>>=0,Se>>>=0,de>>>=0,this===J)return 0;let ye=de-Se,et=ue-Z;const Ze=Math.min(ye,et),lt=this.slice(Se,de),$t=J.slice(Z,ue);for(let vt=0;vt<Ze;++vt)if(lt[vt]!==$t[vt]){ye=lt[vt],et=$t[vt];break}return ye<et?-1:et<ye?1:0};function U(ie,J,Z,ue,Se){if(ie.length===0)return-1;if(typeof Z=="string"?(ue=Z,Z=0):Z>2147483647?Z=2147483647:Z<-2147483648&&(Z=-2147483648),Z=+Z,Re(Z)&&(Z=Se?0:ie.length-1),Z<0&&(Z=ie.length+Z),Z>=ie.length){if(Se)return-1;Z=ie.length-1}else if(Z<0)if(Se)Z=0;else return-1;if(typeof J=="string"&&(J=u.from(J,ue)),u.isBuffer(J))return J.length===0?-1:$(ie,J,Z,ue,Se);if(typeof J=="number")return J=J&255,typeof s.prototype.indexOf=="function"?Se?s.prototype.indexOf.call(ie,J,Z):s.prototype.lastIndexOf.call(ie,J,Z):$(ie,[J],Z,ue,Se);throw new TypeError("val must be string, number or Buffer")}function $(ie,J,Z,ue,Se){let de=1,ye=ie.length,et=J.length;if(ue!==void 0&&(ue=String(ue).toLowerCase(),ue==="ucs2"||ue==="ucs-2"||ue==="utf16le"||ue==="utf-16le")){if(ie.length<2||J.length<2)return-1;de=2,ye/=2,et/=2,Z/=2}function Ze($t,vt){return de===1?$t[vt]:$t.readUInt16BE(vt*de)}let lt;if(Se){let $t=-1;for(lt=Z;lt<ye;lt++)if(Ze(ie,lt)===Ze(J,$t===-1?0:lt-$t)){if($t===-1&&($t=lt),lt-$t+1===et)return $t*de}else $t!==-1&&(lt-=lt-$t),$t=-1}else for(Z+et>ye&&(Z=ye-et),lt=Z;lt>=0;lt--){let $t=!0;for(let vt=0;vt<et;vt++)if(Ze(ie,lt+vt)!==Ze(J,vt)){$t=!1;break}if($t)return lt}return-1}u.prototype.includes=function(J,Z,ue){return this.indexOf(J,Z,ue)!==-1},u.prototype.indexOf=function(J,Z,ue){return U(this,J,Z,ue,!0)},u.prototype.lastIndexOf=function(J,Z,ue){return U(this,J,Z,ue,!1)};function W(ie,J,Z,ue){Z=Number(Z)||0;const Se=ie.length-Z;ue?(ue=Number(ue),ue>Se&&(ue=Se)):ue=Se;const de=J.length;ue>de/2&&(ue=de/2);let ye;for(ye=0;ye<ue;++ye){const et=parseInt(J.substr(ye*2,2),16);if(Re(et))return ye;ie[Z+ye]=et}return ye}function H(ie,J,Z,ue){return pt(rt(J,ie.length-Z),ie,Z,ue)}function F(ie,J,Z,ue){return pt(Xe(J),ie,Z,ue)}function T(ie,J,Z,ue){return pt(Me(J),ie,Z,ue)}function _(ie,J,Z,ue){return pt(ft(J,ie.length-Z),ie,Z,ue)}u.prototype.write=function(J,Z,ue,Se){if(Z===void 0)Se="utf8",ue=this.length,Z=0;else if(ue===void 0&&typeof Z=="string")Se=Z,ue=this.length,Z=0;else if(isFinite(Z))Z=Z>>>0,isFinite(ue)?(ue=ue>>>0,Se===void 0&&(Se="utf8")):(Se=ue,ue=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const de=this.length-Z;if((ue===void 0||ue>de)&&(ue=de),J.length>0&&(ue<0||Z<0)||Z>this.length)throw new RangeError("Attempt to write outside buffer bounds");Se||(Se="utf8");let ye=!1;for(;;)switch(Se){case"hex":return W(this,J,Z,ue);case"utf8":case"utf-8":return H(this,J,Z,ue);case"ascii":case"latin1":case"binary":return F(this,J,Z,ue);case"base64":return T(this,J,Z,ue);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,J,Z,ue);default:if(ye)throw new TypeError("Unknown encoding: "+Se);Se=(""+Se).toLowerCase(),ye=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function L(ie,J,Z){return J===0&&Z===ie.length?e.fromByteArray(ie):e.fromByteArray(ie.slice(J,Z))}function V(ie,J,Z){Z=Math.min(ie.length,Z);const ue=[];let Se=J;for(;Se<Z;){const de=ie[Se];let ye=null,et=de>239?4:de>223?3:de>191?2:1;if(Se+et<=Z){let Ze,lt,$t,vt;switch(et){case 1:de<128&&(ye=de);break;case 2:Ze=ie[Se+1],(Ze&192)===128&&(vt=(de&31)<<6|Ze&63,vt>127&&(ye=vt));break;case 3:Ze=ie[Se+1],lt=ie[Se+2],(Ze&192)===128&&(lt&192)===128&&(vt=(de&15)<<12|(Ze&63)<<6|lt&63,vt>2047&&(vt<55296||vt>57343)&&(ye=vt));break;case 4:Ze=ie[Se+1],lt=ie[Se+2],$t=ie[Se+3],(Ze&192)===128&&(lt&192)===128&&($t&192)===128&&(vt=(de&15)<<18|(Ze&63)<<12|(lt&63)<<6|$t&63,vt>65535&&vt<1114112&&(ye=vt))}}ye===null?(ye=65533,et=1):ye>65535&&(ye-=65536,ue.push(ye>>>10&1023|55296),ye=56320|ye&1023),ue.push(ye),Se+=et}return te(ue)}const K=4096;function te(ie){const J=ie.length;if(J<=K)return String.fromCharCode.apply(String,ie);let Z="",ue=0;for(;ue<J;)Z+=String.fromCharCode.apply(String,ie.slice(ue,ue+=K));return Z}function G(ie,J,Z){let ue="";Z=Math.min(ie.length,Z);for(let Se=J;Se<Z;++Se)ue+=String.fromCharCode(ie[Se]&127);return ue}function q(ie,J,Z){let ue="";Z=Math.min(ie.length,Z);for(let Se=J;Se<Z;++Se)ue+=String.fromCharCode(ie[Se]);return ue}function M(ie,J,Z){const ue=ie.length;(!J||J<0)&&(J=0),(!Z||Z<0||Z>ue)&&(Z=ue);let Se="";for(let de=J;de<Z;++de)Se+=He[ie[de]];return Se}function P(ie,J,Z){const ue=ie.slice(J,Z);let Se="";for(let de=0;de<ue.length-1;de+=2)Se+=String.fromCharCode(ue[de]+ue[de+1]*256);return Se}u.prototype.slice=function(J,Z){const ue=this.length;J=~~J,Z=Z===void 0?ue:~~Z,J<0?(J+=ue,J<0&&(J=0)):J>ue&&(J=ue),Z<0?(Z+=ue,Z<0&&(Z=0)):Z>ue&&(Z=ue),Z<J&&(Z=J);const Se=this.subarray(J,Z);return Object.setPrototypeOf(Se,u.prototype),Se};function Y(ie,J,Z){if(ie%1!==0||ie<0)throw new RangeError("offset is not uint");if(ie+J>Z)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(J,Z,ue){J=J>>>0,Z=Z>>>0,ue||Y(J,Z,this.length);let Se=this[J],de=1,ye=0;for(;++ye<Z&&(de*=256);)Se+=this[J+ye]*de;return Se},u.prototype.readUintBE=u.prototype.readUIntBE=function(J,Z,ue){J=J>>>0,Z=Z>>>0,ue||Y(J,Z,this.length);let Se=this[J+--Z],de=1;for(;Z>0&&(de*=256);)Se+=this[J+--Z]*de;return Se},u.prototype.readUint8=u.prototype.readUInt8=function(J,Z){return J=J>>>0,Z||Y(J,1,this.length),this[J]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(J,Z){return J=J>>>0,Z||Y(J,2,this.length),this[J]|this[J+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(J,Z){return J=J>>>0,Z||Y(J,2,this.length),this[J]<<8|this[J+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(J,Z){return J=J>>>0,Z||Y(J,4,this.length),(this[J]|this[J+1]<<8|this[J+2]<<16)+this[J+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(J,Z){return J=J>>>0,Z||Y(J,4,this.length),this[J]*16777216+(this[J+1]<<16|this[J+2]<<8|this[J+3])},u.prototype.readBigUInt64LE=gt(function(J){J=J>>>0,Ge(J,"offset");const Z=this[J],ue=this[J+7];(Z===void 0||ue===void 0)&&We(J,this.length-8);const Se=Z+this[++J]*2**8+this[++J]*2**16+this[++J]*2**24,de=this[++J]+this[++J]*2**8+this[++J]*2**16+ue*2**24;return BigInt(Se)+(BigInt(de)<<BigInt(32))}),u.prototype.readBigUInt64BE=gt(function(J){J=J>>>0,Ge(J,"offset");const Z=this[J],ue=this[J+7];(Z===void 0||ue===void 0)&&We(J,this.length-8);const Se=Z*2**24+this[++J]*2**16+this[++J]*2**8+this[++J],de=this[++J]*2**24+this[++J]*2**16+this[++J]*2**8+ue;return(BigInt(Se)<<BigInt(32))+BigInt(de)}),u.prototype.readIntLE=function(J,Z,ue){J=J>>>0,Z=Z>>>0,ue||Y(J,Z,this.length);let Se=this[J],de=1,ye=0;for(;++ye<Z&&(de*=256);)Se+=this[J+ye]*de;return de*=128,Se>=de&&(Se-=Math.pow(2,8*Z)),Se},u.prototype.readIntBE=function(J,Z,ue){J=J>>>0,Z=Z>>>0,ue||Y(J,Z,this.length);let Se=Z,de=1,ye=this[J+--Se];for(;Se>0&&(de*=256);)ye+=this[J+--Se]*de;return de*=128,ye>=de&&(ye-=Math.pow(2,8*Z)),ye},u.prototype.readInt8=function(J,Z){return J=J>>>0,Z||Y(J,1,this.length),this[J]&128?(255-this[J]+1)*-1:this[J]},u.prototype.readInt16LE=function(J,Z){J=J>>>0,Z||Y(J,2,this.length);const ue=this[J]|this[J+1]<<8;return ue&32768?ue|4294901760:ue},u.prototype.readInt16BE=function(J,Z){J=J>>>0,Z||Y(J,2,this.length);const ue=this[J+1]|this[J]<<8;return ue&32768?ue|4294901760:ue},u.prototype.readInt32LE=function(J,Z){return J=J>>>0,Z||Y(J,4,this.length),this[J]|this[J+1]<<8|this[J+2]<<16|this[J+3]<<24},u.prototype.readInt32BE=function(J,Z){return J=J>>>0,Z||Y(J,4,this.length),this[J]<<24|this[J+1]<<16|this[J+2]<<8|this[J+3]},u.prototype.readBigInt64LE=gt(function(J){J=J>>>0,Ge(J,"offset");const Z=this[J],ue=this[J+7];(Z===void 0||ue===void 0)&&We(J,this.length-8);const Se=this[J+4]+this[J+5]*2**8+this[J+6]*2**16+(ue<<24);return(BigInt(Se)<<BigInt(32))+BigInt(Z+this[++J]*2**8+this[++J]*2**16+this[++J]*2**24)}),u.prototype.readBigInt64BE=gt(function(J){J=J>>>0,Ge(J,"offset");const Z=this[J],ue=this[J+7];(Z===void 0||ue===void 0)&&We(J,this.length-8);const Se=(Z<<24)+this[++J]*2**16+this[++J]*2**8+this[++J];return(BigInt(Se)<<BigInt(32))+BigInt(this[++J]*2**24+this[++J]*2**16+this[++J]*2**8+ue)}),u.prototype.readFloatLE=function(J,Z){return J=J>>>0,Z||Y(J,4,this.length),n.read(this,J,!0,23,4)},u.prototype.readFloatBE=function(J,Z){return J=J>>>0,Z||Y(J,4,this.length),n.read(this,J,!1,23,4)},u.prototype.readDoubleLE=function(J,Z){return J=J>>>0,Z||Y(J,8,this.length),n.read(this,J,!0,52,8)},u.prototype.readDoubleBE=function(J,Z){return J=J>>>0,Z||Y(J,8,this.length),n.read(this,J,!1,52,8)};function X(ie,J,Z,ue,Se,de){if(!u.isBuffer(ie))throw new TypeError('"buffer" argument must be a Buffer instance');if(J>Se||J<de)throw new RangeError('"value" argument is out of bounds');if(Z+ue>ie.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(J,Z,ue,Se){if(J=+J,Z=Z>>>0,ue=ue>>>0,!Se){const et=Math.pow(2,8*ue)-1;X(this,J,Z,ue,et,0)}let de=1,ye=0;for(this[Z]=J&255;++ye<ue&&(de*=256);)this[Z+ye]=J/de&255;return Z+ue},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(J,Z,ue,Se){if(J=+J,Z=Z>>>0,ue=ue>>>0,!Se){const et=Math.pow(2,8*ue)-1;X(this,J,Z,ue,et,0)}let de=ue-1,ye=1;for(this[Z+de]=J&255;--de>=0&&(ye*=256);)this[Z+de]=J/ye&255;return Z+ue},u.prototype.writeUint8=u.prototype.writeUInt8=function(J,Z,ue){return J=+J,Z=Z>>>0,ue||X(this,J,Z,1,255,0),this[Z]=J&255,Z+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(J,Z,ue){return J=+J,Z=Z>>>0,ue||X(this,J,Z,2,65535,0),this[Z]=J&255,this[Z+1]=J>>>8,Z+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(J,Z,ue){return J=+J,Z=Z>>>0,ue||X(this,J,Z,2,65535,0),this[Z]=J>>>8,this[Z+1]=J&255,Z+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(J,Z,ue){return J=+J,Z=Z>>>0,ue||X(this,J,Z,4,4294967295,0),this[Z+3]=J>>>24,this[Z+2]=J>>>16,this[Z+1]=J>>>8,this[Z]=J&255,Z+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(J,Z,ue){return J=+J,Z=Z>>>0,ue||X(this,J,Z,4,4294967295,0),this[Z]=J>>>24,this[Z+1]=J>>>16,this[Z+2]=J>>>8,this[Z+3]=J&255,Z+4};function se(ie,J,Z,ue,Se){Te(J,ue,Se,ie,Z,7);let de=Number(J&BigInt(4294967295));ie[Z++]=de,de=de>>8,ie[Z++]=de,de=de>>8,ie[Z++]=de,de=de>>8,ie[Z++]=de;let ye=Number(J>>BigInt(32)&BigInt(4294967295));return ie[Z++]=ye,ye=ye>>8,ie[Z++]=ye,ye=ye>>8,ie[Z++]=ye,ye=ye>>8,ie[Z++]=ye,Z}function oe(ie,J,Z,ue,Se){Te(J,ue,Se,ie,Z,7);let de=Number(J&BigInt(4294967295));ie[Z+7]=de,de=de>>8,ie[Z+6]=de,de=de>>8,ie[Z+5]=de,de=de>>8,ie[Z+4]=de;let ye=Number(J>>BigInt(32)&BigInt(4294967295));return ie[Z+3]=ye,ye=ye>>8,ie[Z+2]=ye,ye=ye>>8,ie[Z+1]=ye,ye=ye>>8,ie[Z]=ye,Z+8}u.prototype.writeBigUInt64LE=gt(function(J,Z=0){return se(this,J,Z,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=gt(function(J,Z=0){return oe(this,J,Z,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(J,Z,ue,Se){if(J=+J,Z=Z>>>0,!Se){const Ze=Math.pow(2,8*ue-1);X(this,J,Z,ue,Ze-1,-Ze)}let de=0,ye=1,et=0;for(this[Z]=J&255;++de<ue&&(ye*=256);)J<0&&et===0&&this[Z+de-1]!==0&&(et=1),this[Z+de]=(J/ye>>0)-et&255;return Z+ue},u.prototype.writeIntBE=function(J,Z,ue,Se){if(J=+J,Z=Z>>>0,!Se){const Ze=Math.pow(2,8*ue-1);X(this,J,Z,ue,Ze-1,-Ze)}let de=ue-1,ye=1,et=0;for(this[Z+de]=J&255;--de>=0&&(ye*=256);)J<0&&et===0&&this[Z+de+1]!==0&&(et=1),this[Z+de]=(J/ye>>0)-et&255;return Z+ue},u.prototype.writeInt8=function(J,Z,ue){return J=+J,Z=Z>>>0,ue||X(this,J,Z,1,127,-128),J<0&&(J=255+J+1),this[Z]=J&255,Z+1},u.prototype.writeInt16LE=function(J,Z,ue){return J=+J,Z=Z>>>0,ue||X(this,J,Z,2,32767,-32768),this[Z]=J&255,this[Z+1]=J>>>8,Z+2},u.prototype.writeInt16BE=function(J,Z,ue){return J=+J,Z=Z>>>0,ue||X(this,J,Z,2,32767,-32768),this[Z]=J>>>8,this[Z+1]=J&255,Z+2},u.prototype.writeInt32LE=function(J,Z,ue){return J=+J,Z=Z>>>0,ue||X(this,J,Z,4,2147483647,-2147483648),this[Z]=J&255,this[Z+1]=J>>>8,this[Z+2]=J>>>16,this[Z+3]=J>>>24,Z+4},u.prototype.writeInt32BE=function(J,Z,ue){return J=+J,Z=Z>>>0,ue||X(this,J,Z,4,2147483647,-2147483648),J<0&&(J=4294967295+J+1),this[Z]=J>>>24,this[Z+1]=J>>>16,this[Z+2]=J>>>8,this[Z+3]=J&255,Z+4},u.prototype.writeBigInt64LE=gt(function(J,Z=0){return se(this,J,Z,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=gt(function(J,Z=0){return oe(this,J,Z,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function me(ie,J,Z,ue,Se,de){if(Z+ue>ie.length)throw new RangeError("Index out of range");if(Z<0)throw new RangeError("Index out of range")}function ce(ie,J,Z,ue,Se){return J=+J,Z=Z>>>0,Se||me(ie,J,Z,4),n.write(ie,J,Z,ue,23,4),Z+4}u.prototype.writeFloatLE=function(J,Z,ue){return ce(this,J,Z,!0,ue)},u.prototype.writeFloatBE=function(J,Z,ue){return ce(this,J,Z,!1,ue)};function ve(ie,J,Z,ue,Se){return J=+J,Z=Z>>>0,Se||me(ie,J,Z,8),n.write(ie,J,Z,ue,52,8),Z+8}u.prototype.writeDoubleLE=function(J,Z,ue){return ve(this,J,Z,!0,ue)},u.prototype.writeDoubleBE=function(J,Z,ue){return ve(this,J,Z,!1,ue)},u.prototype.copy=function(J,Z,ue,Se){if(!u.isBuffer(J))throw new TypeError("argument should be a Buffer");if(ue||(ue=0),!Se&&Se!==0&&(Se=this.length),Z>=J.length&&(Z=J.length),Z||(Z=0),Se>0&&Se<ue&&(Se=ue),Se===ue||J.length===0||this.length===0)return 0;if(Z<0)throw new RangeError("targetStart out of bounds");if(ue<0||ue>=this.length)throw new RangeError("Index out of range");if(Se<0)throw new RangeError("sourceEnd out of bounds");Se>this.length&&(Se=this.length),J.length-Z<Se-ue&&(Se=J.length-Z+ue);const de=Se-ue;return this===J&&typeof s.prototype.copyWithin=="function"?this.copyWithin(Z,ue,Se):s.prototype.set.call(J,this.subarray(ue,Se),Z),de},u.prototype.fill=function(J,Z,ue,Se){if(typeof J=="string"){if(typeof Z=="string"?(Se=Z,Z=0,ue=this.length):typeof ue=="string"&&(Se=ue,ue=this.length),Se!==void 0&&typeof Se!="string")throw new TypeError("encoding must be a string");if(typeof Se=="string"&&!u.isEncoding(Se))throw new TypeError("Unknown encoding: "+Se);if(J.length===1){const ye=J.charCodeAt(0);(Se==="utf8"&&ye<128||Se==="latin1")&&(J=ye)}}else typeof J=="number"?J=J&255:typeof J=="boolean"&&(J=Number(J));if(Z<0||this.length<Z||this.length<ue)throw new RangeError("Out of range index");if(ue<=Z)return this;Z=Z>>>0,ue=ue===void 0?this.length:ue>>>0,J||(J=0);let de;if(typeof J=="number")for(de=Z;de<ue;++de)this[de]=J;else{const ye=u.isBuffer(J)?J:u.from(J,Se),et=ye.length;if(et===0)throw new TypeError('The value "'+J+'" is invalid for argument "value"');for(de=0;de<ue-Z;++de)this[de+Z]=ye[de%et]}return this};const Ne={};function pe(ie,J,Z){Ne[ie]=class extends Z{constructor(){super(),Object.defineProperty(this,"message",{value:J.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${ie}]`,this.stack,delete this.name}get code(){return ie}set code(Se){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Se,writable:!0})}toString(){return`${this.name} [${ie}]: ${this.message}`}}}pe("ERR_BUFFER_OUT_OF_BOUNDS",function(ie){return ie?`${ie} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),pe("ERR_INVALID_ARG_TYPE",function(ie,J){return`The "${ie}" argument must be of type number. Received type ${typeof J}`},TypeError),pe("ERR_OUT_OF_RANGE",function(ie,J,Z){let ue=`The value of "${ie}" is out of range.`,Se=Z;return Number.isInteger(Z)&&Math.abs(Z)>2**32?Se=Le(String(Z)):typeof Z=="bigint"&&(Se=String(Z),(Z>BigInt(2)**BigInt(32)||Z<-(BigInt(2)**BigInt(32)))&&(Se=Le(Se)),Se+="n"),ue+=` It must be ${J}. Received ${Se}`,ue},RangeError);function Le(ie){let J="",Z=ie.length;const ue=ie[0]==="-"?1:0;for(;Z>=ue+4;Z-=3)J=`_${ie.slice(Z-3,Z)}${J}`;return`${ie.slice(0,Z)}${J}`}function he(ie,J,Z){Ge(J,"offset"),(ie[J]===void 0||ie[J+Z]===void 0)&&We(J,ie.length-(Z+1))}function Te(ie,J,Z,ue,Se,de){if(ie>Z||ie<J){const ye=typeof J=="bigint"?"n":"";let et;throw J===0||J===BigInt(0)?et=`>= 0${ye} and < 2${ye} ** ${(de+1)*8}${ye}`:et=`>= -(2${ye} ** ${(de+1)*8-1}${ye}) and < 2 ** ${(de+1)*8-1}${ye}`,new Ne.ERR_OUT_OF_RANGE("value",et,ie)}he(ue,Se,de)}function Ge(ie,J){if(typeof ie!="number")throw new Ne.ERR_INVALID_ARG_TYPE(J,"number",ie)}function We(ie,J,Z){throw Math.floor(ie)!==ie?(Ge(ie,Z),new Ne.ERR_OUT_OF_RANGE("offset","an integer",ie)):J<0?new Ne.ERR_BUFFER_OUT_OF_BOUNDS:new Ne.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${J}`,ie)}const Qe=/[^+/0-9A-Za-z-_]/g;function at(ie){if(ie=ie.split("=")[0],ie=ie.trim().replace(Qe,""),ie.length<2)return"";for(;ie.length%4!==0;)ie=ie+"=";return ie}function rt(ie,J){J=J||1/0;let Z;const ue=ie.length;let Se=null;const de=[];for(let ye=0;ye<ue;++ye){if(Z=ie.charCodeAt(ye),Z>55295&&Z<57344){if(!Se){if(Z>56319){(J-=3)>-1&&de.push(239,191,189);continue}else if(ye+1===ue){(J-=3)>-1&&de.push(239,191,189);continue}Se=Z;continue}if(Z<56320){(J-=3)>-1&&de.push(239,191,189),Se=Z;continue}Z=(Se-55296<<10|Z-56320)+65536}else Se&&(J-=3)>-1&&de.push(239,191,189);if(Se=null,Z<128){if((J-=1)<0)break;de.push(Z)}else if(Z<2048){if((J-=2)<0)break;de.push(Z>>6|192,Z&63|128)}else if(Z<65536){if((J-=3)<0)break;de.push(Z>>12|224,Z>>6&63|128,Z&63|128)}else if(Z<1114112){if((J-=4)<0)break;de.push(Z>>18|240,Z>>12&63|128,Z>>6&63|128,Z&63|128)}else throw new Error("Invalid code point")}return de}function Xe(ie){const J=[];for(let Z=0;Z<ie.length;++Z)J.push(ie.charCodeAt(Z)&255);return J}function ft(ie,J){let Z,ue,Se;const de=[];for(let ye=0;ye<ie.length&&!((J-=2)<0);++ye)Z=ie.charCodeAt(ye),ue=Z>>8,Se=Z%256,de.push(Se),de.push(ue);return de}function Me(ie){return e.toByteArray(at(ie))}function pt(ie,J,Z,ue){let Se;for(Se=0;Se<ue&&!(Se+Z>=J.length||Se>=ie.length);++Se)J[Se+Z]=ie[Se];return Se}function Kt(ie,J){return ie instanceof J||ie!=null&&ie.constructor!=null&&ie.constructor.name!=null&&ie.constructor.name===J.name}function Re(ie){return ie!==ie}const He=(function(){const ie="0123456789abcdef",J=new Array(256);for(let Z=0;Z<16;++Z){const ue=Z*16;for(let Se=0;Se<16;++Se)J[ue+Se]=ie[Z]+ie[Se]}return J})();function gt(ie){return typeof BigInt>"u"?dt:ie}function dt(){throw new Error("BigInt not supported")}})(RD);const ln=RD.Buffer,cn=RD.Buffer;window.Buffer=cn;function gs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Uee(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var kI={exports:{}},mb={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b$;function Ixe(){if(b$)return mb;b$=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,s){var o=null;if(s!==void 0&&(o=""+s),i.key!==void 0&&(o=""+i.key),"key"in i){s={};for(var a in i)a!=="key"&&(s[a]=i[a])}else s=i;return i=s.ref,{$$typeof:t,type:r,key:o,ref:i!==void 0?i:null,props:s}}return mb.Fragment=e,mb.jsx=n,mb.jsxs=n,mb}var w$;function Rxe(){return w$||(w$=1,kI.exports=Ixe()),kI.exports}var d=Rxe();function Oxe(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Fee={exports:{}},si=Fee.exports={},cc,uc;function e3(){throw new Error("setTimeout has not been defined")}function t3(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?cc=setTimeout:cc=e3}catch{cc=e3}try{typeof clearTimeout=="function"?uc=clearTimeout:uc=t3}catch{uc=t3}})();function $ee(t){if(cc===setTimeout)return setTimeout(t,0);if((cc===e3||!cc)&&setTimeout)return cc=setTimeout,setTimeout(t,0);try{return cc(t,0)}catch{try{return cc.call(null,t,0)}catch{return cc.call(this,t,0)}}}function Mxe(t){if(uc===clearTimeout)return clearTimeout(t);if((uc===t3||!uc)&&clearTimeout)return uc=clearTimeout,clearTimeout(t);try{return uc(t)}catch{try{return uc.call(null,t)}catch{return uc.call(this,t)}}}var Wu=[],Yg=!1,Sp,cT=-1;function Lxe(){!Yg||!Sp||(Yg=!1,Sp.length?Wu=Sp.concat(Wu):cT=-1,Wu.length&&zee())}function zee(){if(!Yg){var t=$ee(Lxe);Yg=!0;for(var e=Wu.length;e;){for(Sp=Wu,Wu=[];++cT<e;)Sp&&Sp[cT].run();cT=-1,e=Wu.length}Sp=null,Yg=!1,Mxe(t)}}si.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];Wu.push(new Vee(t,e)),Wu.length===1&&!Yg&&$ee(zee)};function Vee(t,e){this.fun=t,this.array=e}Vee.prototype.run=function(){this.fun.apply(null,this.array)};si.title="browser";si.browser=!0;si.env={};si.argv=[];si.version="";si.versions={};function kd(){}si.on=kd;si.addListener=kd;si.once=kd;si.off=kd;si.removeListener=kd;si.removeAllListeners=kd;si.emit=kd;si.prependListener=kd;si.prependOnceListener=kd;si.listeners=function(t){return[]};si.binding=function(t){throw new Error("process.binding is not supported")};si.cwd=function(){return"/"};si.chdir=function(t){throw new Error("process.chdir is not supported")};si.umask=function(){return 0};var Dxe=Fee.exports;const Dl=Oxe(Dxe);window.global=window;window.process=Dl;window.Buffer=cn;console.log("Polyfills loaded");var NI={exports:{}},rn={},E$;function jxe(){if(E$)return rn;E$=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),h=Symbol.for("react.activity"),m=Symbol.iterator;function g(q){return q===null||typeof q!="object"?null:(q=m&&q[m]||q["@@iterator"],typeof q=="function"?q:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,b={};function w(q,M,P){this.props=q,this.context=M,this.refs=b,this.updater=P||y}w.prototype.isReactComponent={},w.prototype.setState=function(q,M){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,M,"setState")},w.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function k(){}k.prototype=w.prototype;function N(q,M,P){this.props=q,this.context=M,this.refs=b,this.updater=P||y}var R=N.prototype=new k;R.constructor=N,v(R,w.prototype),R.isPureReactComponent=!0;var D=Array.isArray;function O(){}var B={H:null,A:null,T:null,S:null},z=Object.prototype.hasOwnProperty;function U(q,M,P){var Y=P.ref;return{$$typeof:t,type:q,key:M,ref:Y!==void 0?Y:null,props:P}}function $(q,M){return U(q.type,M,q.props)}function W(q){return typeof q=="object"&&q!==null&&q.$$typeof===t}function H(q){var M={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(P){return M[P]})}var F=/\/+/g;function T(q,M){return typeof q=="object"&&q!==null&&q.key!=null?H(""+q.key):M.toString(36)}function _(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(O,O):(q.status="pending",q.then(function(M){q.status==="pending"&&(q.status="fulfilled",q.value=M)},function(M){q.status==="pending"&&(q.status="rejected",q.reason=M)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function L(q,M,P,Y,X){var se=typeof q;(se==="undefined"||se==="boolean")&&(q=null);var oe=!1;if(q===null)oe=!0;else switch(se){case"bigint":case"string":case"number":oe=!0;break;case"object":switch(q.$$typeof){case t:case e:oe=!0;break;case u:return oe=q._init,L(oe(q._payload),M,P,Y,X)}}if(oe)return X=X(q),oe=Y===""?"."+T(q,0):Y,D(X)?(P="",oe!=null&&(P=oe.replace(F,"$&/")+"/"),L(X,M,P,"",function(ve){return ve})):X!=null&&(W(X)&&(X=$(X,P+(X.key==null||q&&q.key===X.key?"":(""+X.key).replace(F,"$&/")+"/")+oe)),M.push(X)),1;oe=0;var me=Y===""?".":Y+":";if(D(q))for(var ce=0;ce<q.length;ce++)Y=q[ce],se=me+T(Y,ce),oe+=L(Y,M,P,se,X);else if(ce=g(q),typeof ce=="function")for(q=ce.call(q),ce=0;!(Y=q.next()).done;)Y=Y.value,se=me+T(Y,ce++),oe+=L(Y,M,P,se,X);else if(se==="object"){if(typeof q.then=="function")return L(_(q),M,P,Y,X);throw M=String(q),Error("Objects are not valid as a React child (found: "+(M==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":M)+"). If you meant to render a collection of children, use an array instead.")}return oe}function V(q,M,P){if(q==null)return q;var Y=[],X=0;return L(q,Y,"","",function(se){return M.call(P,se,X++)}),Y}function K(q){if(q._status===-1){var M=q._result;M=M(),M.then(function(P){(q._status===0||q._status===-1)&&(q._status=1,q._result=P)},function(P){(q._status===0||q._status===-1)&&(q._status=2,q._result=P)}),q._status===-1&&(q._status=0,q._result=M)}if(q._status===1)return q._result.default;throw q._result}var te=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var M=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(M))return}else if(typeof Dl=="object"&&typeof Dl.emit=="function"){Dl.emit("uncaughtException",q);return}console.error(q)},G={map:V,forEach:function(q,M,P){V(q,function(){M.apply(this,arguments)},P)},count:function(q){var M=0;return V(q,function(){M++}),M},toArray:function(q){return V(q,function(M){return M})||[]},only:function(q){if(!W(q))throw Error("React.Children.only expected to receive a single React element child.");return q}};return rn.Activity=h,rn.Children=G,rn.Component=w,rn.Fragment=n,rn.Profiler=i,rn.PureComponent=N,rn.StrictMode=r,rn.Suspense=l,rn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=B,rn.__COMPILER_RUNTIME={__proto__:null,c:function(q){return B.H.useMemoCache(q)}},rn.cache=function(q){return function(){return q.apply(null,arguments)}},rn.cacheSignal=function(){return null},rn.cloneElement=function(q,M,P){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var Y=v({},q.props),X=q.key;if(M!=null)for(se in M.key!==void 0&&(X=""+M.key),M)!z.call(M,se)||se==="key"||se==="__self"||se==="__source"||se==="ref"&&M.ref===void 0||(Y[se]=M[se]);var se=arguments.length-2;if(se===1)Y.children=P;else if(1<se){for(var oe=Array(se),me=0;me<se;me++)oe[me]=arguments[me+2];Y.children=oe}return U(q.type,X,Y)},rn.createContext=function(q){return q={$$typeof:o,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:s,_context:q},q},rn.createElement=function(q,M,P){var Y,X={},se=null;if(M!=null)for(Y in M.key!==void 0&&(se=""+M.key),M)z.call(M,Y)&&Y!=="key"&&Y!=="__self"&&Y!=="__source"&&(X[Y]=M[Y]);var oe=arguments.length-2;if(oe===1)X.children=P;else if(1<oe){for(var me=Array(oe),ce=0;ce<oe;ce++)me[ce]=arguments[ce+2];X.children=me}if(q&&q.defaultProps)for(Y in oe=q.defaultProps,oe)X[Y]===void 0&&(X[Y]=oe[Y]);return U(q,se,X)},rn.createRef=function(){return{current:null}},rn.forwardRef=function(q){return{$$typeof:a,render:q}},rn.isValidElement=W,rn.lazy=function(q){return{$$typeof:u,_payload:{_status:-1,_result:q},_init:K}},rn.memo=function(q,M){return{$$typeof:c,type:q,compare:M===void 0?null:M}},rn.startTransition=function(q){var M=B.T,P={};B.T=P;try{var Y=q(),X=B.S;X!==null&&X(P,Y),typeof Y=="object"&&Y!==null&&typeof Y.then=="function"&&Y.then(O,te)}catch(se){te(se)}finally{M!==null&&P.types!==null&&(M.types=P.types),B.T=M}},rn.unstable_useCacheRefresh=function(){return B.H.useCacheRefresh()},rn.use=function(q){return B.H.use(q)},rn.useActionState=function(q,M,P){return B.H.useActionState(q,M,P)},rn.useCallback=function(q,M){return B.H.useCallback(q,M)},rn.useContext=function(q){return B.H.useContext(q)},rn.useDebugValue=function(){},rn.useDeferredValue=function(q,M){return B.H.useDeferredValue(q,M)},rn.useEffect=function(q,M){return B.H.useEffect(q,M)},rn.useEffectEvent=function(q){return B.H.useEffectEvent(q)},rn.useId=function(){return B.H.useId()},rn.useImperativeHandle=function(q,M,P){return B.H.useImperativeHandle(q,M,P)},rn.useInsertionEffect=function(q,M){return B.H.useInsertionEffect(q,M)},rn.useLayoutEffect=function(q,M){return B.H.useLayoutEffect(q,M)},rn.useMemo=function(q,M){return B.H.useMemo(q,M)},rn.useOptimistic=function(q,M){return B.H.useOptimistic(q,M)},rn.useReducer=function(q,M,P){return B.H.useReducer(q,M,P)},rn.useRef=function(q){return B.H.useRef(q)},rn.useState=function(q){return B.H.useState(q)},rn.useSyncExternalStore=function(q,M,P){return B.H.useSyncExternalStore(q,M,P)},rn.useTransition=function(){return B.H.useTransition()},rn.version="19.2.3",rn}var S$;function Fx(){return S$||(S$=1,NI.exports=jxe()),NI.exports}var A=Fx();const _s=gs(A),cN=Exe({__proto__:null,default:_s},[A]);var CI={exports:{}},gb={},PI={exports:{}},_I={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A$;function Bxe(){return A$||(A$=1,(function(t){function e(L,V){var K=L.length;L.push(V);e:for(;0<K;){var te=K-1>>>1,G=L[te];if(0<i(G,V))L[te]=V,L[K]=G,K=te;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var V=L[0],K=L.pop();if(K!==V){L[0]=K;e:for(var te=0,G=L.length,q=G>>>1;te<q;){var M=2*(te+1)-1,P=L[M],Y=M+1,X=L[Y];if(0>i(P,K))Y<G&&0>i(X,P)?(L[te]=X,L[Y]=K,te=Y):(L[te]=P,L[M]=K,te=M);else if(Y<G&&0>i(X,K))L[te]=X,L[Y]=K,te=Y;else break e}}return V}function i(L,V){var K=L.sortIndex-V.sortIndex;return K!==0?K:L.id-V.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,m=3,g=!1,y=!1,v=!1,b=!1,w=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function R(L){for(var V=n(c);V!==null;){if(V.callback===null)r(c);else if(V.startTime<=L)r(c),V.sortIndex=V.expirationTime,e(l,V);else break;V=n(c)}}function D(L){if(v=!1,R(L),!y)if(n(l)!==null)y=!0,O||(O=!0,H());else{var V=n(c);V!==null&&_(D,V.startTime-L)}}var O=!1,B=-1,z=5,U=-1;function $(){return b?!0:!(t.unstable_now()-U<z)}function W(){if(b=!1,O){var L=t.unstable_now();U=L;var V=!0;try{e:{y=!1,v&&(v=!1,k(B),B=-1),g=!0;var K=m;try{t:{for(R(L),h=n(l);h!==null&&!(h.expirationTime>L&&$());){var te=h.callback;if(typeof te=="function"){h.callback=null,m=h.priorityLevel;var G=te(h.expirationTime<=L);if(L=t.unstable_now(),typeof G=="function"){h.callback=G,R(L),V=!0;break t}h===n(l)&&r(l),R(L)}else r(l);h=n(l)}if(h!==null)V=!0;else{var q=n(c);q!==null&&_(D,q.startTime-L),V=!1}}break e}finally{h=null,m=K,g=!1}V=void 0}}finally{V?H():O=!1}}}var H;if(typeof N=="function")H=function(){N(W)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,T=F.port2;F.port1.onmessage=W,H=function(){T.postMessage(null)}}else H=function(){w(W,0)};function _(L,V){B=w(function(){L(t.unstable_now())},V)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(L){switch(m){case 1:case 2:case 3:var V=3;break;default:V=m}var K=m;m=V;try{return L()}finally{m=K}},t.unstable_requestPaint=function(){b=!0},t.unstable_runWithPriority=function(L,V){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var K=m;m=L;try{return V()}finally{m=K}},t.unstable_scheduleCallback=function(L,V,K){var te=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?te+K:te):K=te,L){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=K+G,L={id:u++,callback:V,priorityLevel:L,startTime:K,expirationTime:G,sortIndex:-1},K>te?(L.sortIndex=K,e(c,L),n(l)===null&&L===n(c)&&(v?(k(B),B=-1):v=!0,_(D,K-te))):(L.sortIndex=G,e(l,L),y||g||(y=!0,O||(O=!0,H()))),L},t.unstable_shouldYield=$,t.unstable_wrapCallback=function(L){var V=m;return function(){var K=m;m=V;try{return L.apply(this,arguments)}finally{m=K}}}})(_I)),_I}var T$;function Uxe(){return T$||(T$=1,PI.exports=Bxe()),PI.exports}var II={exports:{}},ys={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k$;function Fxe(){if(k$)return ys;k$=1;var t=Fx();function e(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)c+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(l,c,u){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:h==null?null:""+h,children:l,containerInfo:c,implementation:u}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(l,c){if(l==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return ys.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,ys.createPortal=function(l,c){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(e(299));return s(l,c,null,u)},ys.flushSync=function(l){var c=o.T,u=r.p;try{if(o.T=null,r.p=2,l)return l()}finally{o.T=c,r.p=u,r.d.f()}},ys.preconnect=function(l,c){typeof l=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,r.d.C(l,c))},ys.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},ys.preinit=function(l,c){if(typeof l=="string"&&c&&typeof c.as=="string"){var u=c.as,h=a(u,c.crossOrigin),m=typeof c.integrity=="string"?c.integrity:void 0,g=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;u==="style"?r.d.S(l,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:h,integrity:m,fetchPriority:g}):u==="script"&&r.d.X(l,{crossOrigin:h,integrity:m,fetchPriority:g,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},ys.preinitModule=function(l,c){if(typeof l=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var u=a(c.as,c.crossOrigin);r.d.M(l,{crossOrigin:u,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&r.d.M(l)},ys.preload=function(l,c){if(typeof l=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var u=c.as,h=a(u,c.crossOrigin);r.d.L(l,u,{crossOrigin:h,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},ys.preloadModule=function(l,c){if(typeof l=="string")if(c){var u=a(c.as,c.crossOrigin);r.d.m(l,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:u,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else r.d.m(l)},ys.requestFormReset=function(l){r.d.r(l)},ys.unstable_batchedUpdates=function(l,c){return l(c)},ys.useFormState=function(l,c,u){return o.H.useFormState(l,c,u)},ys.useFormStatus=function(){return o.H.useHostTransitionStatus()},ys.version="19.2.3",ys}var N$;function Hee(){if(N$)return II.exports;N$=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),II.exports=Fxe(),II.exports}var C$;function $xe(){if(C$)return gb;C$=1;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t=Uxe(),e=Fx(),n=Hee();function r(f){var p="https://react.dev/errors/"+f;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)p+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+f+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)}function s(f){var p=f,x=f;if(f.alternate)for(;p.return;)p=p.return;else{f=p;do p=f,(p.flags&4098)!==0&&(x=p.return),f=p.return;while(f)}return p.tag===3?x:null}function o(f){if(f.tag===13){var p=f.memoizedState;if(p===null&&(f=f.alternate,f!==null&&(p=f.memoizedState)),p!==null)return p.dehydrated}return null}function a(f){if(f.tag===31){var p=f.memoizedState;if(p===null&&(f=f.alternate,f!==null&&(p=f.memoizedState)),p!==null)return p.dehydrated}return null}function l(f){if(s(f)!==f)throw Error(r(188))}function c(f){var p=f.alternate;if(!p){if(p=s(f),p===null)throw Error(r(188));return p!==f?null:f}for(var x=f,E=p;;){var I=x.return;if(I===null)break;var j=I.alternate;if(j===null){if(E=I.return,E!==null){x=E;continue}break}if(I.child===j.child){for(j=I.child;j;){if(j===x)return l(I),f;if(j===E)return l(I),p;j=j.sibling}throw Error(r(188))}if(x.return!==E.return)x=I,E=j;else{for(var ne=!1,le=I.child;le;){if(le===x){ne=!0,x=I,E=j;break}if(le===E){ne=!0,E=I,x=j;break}le=le.sibling}if(!ne){for(le=j.child;le;){if(le===x){ne=!0,x=j,E=I;break}if(le===E){ne=!0,E=j,x=I;break}le=le.sibling}if(!ne)throw Error(r(189))}}if(x.alternate!==E)throw Error(r(190))}if(x.tag!==3)throw Error(r(188));return x.stateNode.current===x?f:p}function u(f){var p=f.tag;if(p===5||p===26||p===27||p===6)return f;for(f=f.child;f!==null;){if(p=u(f),p!==null)return p;f=f.sibling}return null}var h=Object.assign,m=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),k=Symbol.for("react.consumer"),N=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),$=Symbol.for("react.memo_cache_sentinel"),W=Symbol.iterator;function H(f){return f===null||typeof f!="object"?null:(f=W&&f[W]||f["@@iterator"],typeof f=="function"?f:null)}var F=Symbol.for("react.client.reference");function T(f){if(f==null)return null;if(typeof f=="function")return f.$$typeof===F?null:f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case v:return"Fragment";case w:return"Profiler";case b:return"StrictMode";case D:return"Suspense";case O:return"SuspenseList";case U:return"Activity"}if(typeof f=="object")switch(f.$$typeof){case y:return"Portal";case N:return f.displayName||"Context";case k:return(f._context.displayName||"Context")+".Consumer";case R:var p=f.render;return f=f.displayName,f||(f=p.displayName||p.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case B:return p=f.displayName||null,p!==null?p:T(f.type)||"Memo";case z:p=f._payload,f=f._init;try{return T(f(p))}catch{}}return null}var _=Array.isArray,L=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K={pending:!1,data:null,method:null,action:null},te=[],G=-1;function q(f){return{current:f}}function M(f){0>G||(f.current=te[G],te[G]=null,G--)}function P(f,p){G++,te[G]=f.current,f.current=p}var Y=q(null),X=q(null),se=q(null),oe=q(null);function me(f,p){switch(P(se,p),P(X,f),P(Y,null),p.nodeType){case 9:case 11:f=(f=p.documentElement)&&(f=f.namespaceURI)?z9(f):0;break;default:if(f=p.tagName,p=p.namespaceURI)p=z9(p),f=V9(p,f);else switch(f){case"svg":f=1;break;case"math":f=2;break;default:f=0}}M(Y),P(Y,f)}function ce(){M(Y),M(X),M(se)}function ve(f){f.memoizedState!==null&&P(oe,f);var p=Y.current,x=V9(p,f.type);p!==x&&(P(X,f),P(Y,x))}function Ne(f){X.current===f&&(M(Y),M(X)),oe.current===f&&(M(oe),ub._currentValue=K)}var pe,Le;function he(f){if(pe===void 0)try{throw Error()}catch(x){var p=x.stack.trim().match(/\n( *(at )?)/);pe=p&&p[1]||"",Le=-1<x.stack.indexOf(`
    at`)?" (<anonymous>)":-1<x.stack.indexOf("@")?"@unknown:0:0":""}return`
`+pe+f+Le}var Te=!1;function Ge(f,p){if(!f||Te)return"";Te=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var E={DetermineComponentFrameRoot:function(){try{if(p){var tt=function(){throw Error()};if(Object.defineProperty(tt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(tt,[])}catch(qe){var $e=qe}Reflect.construct(f,[],tt)}else{try{tt.call()}catch(qe){$e=qe}f.call(tt.prototype)}}else{try{throw Error()}catch(qe){$e=qe}(tt=f())&&typeof tt.catch=="function"&&tt.catch(function(){})}}catch(qe){if(qe&&$e&&typeof qe.stack=="string")return[qe.stack,$e.stack]}return[null,null]}};E.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var I=Object.getOwnPropertyDescriptor(E.DetermineComponentFrameRoot,"name");I&&I.configurable&&Object.defineProperty(E.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var j=E.DetermineComponentFrameRoot(),ne=j[0],le=j[1];if(ne&&le){var Ae=ne.split(`
`),Ue=le.split(`
`);for(I=E=0;E<Ae.length&&!Ae[E].includes("DetermineComponentFrameRoot");)E++;for(;I<Ue.length&&!Ue[I].includes("DetermineComponentFrameRoot");)I++;if(E===Ae.length||I===Ue.length)for(E=Ae.length-1,I=Ue.length-1;1<=E&&0<=I&&Ae[E]!==Ue[I];)I--;for(;1<=E&&0<=I;E--,I--)if(Ae[E]!==Ue[I]){if(E!==1||I!==1)do if(E--,I--,0>I||Ae[E]!==Ue[I]){var Ke=`
`+Ae[E].replace(" at new "," at ");return f.displayName&&Ke.includes("<anonymous>")&&(Ke=Ke.replace("<anonymous>",f.displayName)),Ke}while(1<=E&&0<=I);break}}}finally{Te=!1,Error.prepareStackTrace=x}return(x=f?f.displayName||f.name:"")?he(x):""}function We(f,p){switch(f.tag){case 26:case 27:case 5:return he(f.type);case 16:return he("Lazy");case 13:return f.child!==p&&p!==null?he("Suspense Fallback"):he("Suspense");case 19:return he("SuspenseList");case 0:case 15:return Ge(f.type,!1);case 11:return Ge(f.type.render,!1);case 1:return Ge(f.type,!0);case 31:return he("Activity");default:return""}}function Qe(f){try{var p="",x=null;do p+=We(f,x),x=f,f=f.return;while(f);return p}catch(E){return`
Error generating stack: `+E.message+`
`+E.stack}}var at=Object.prototype.hasOwnProperty,rt=t.unstable_scheduleCallback,Xe=t.unstable_cancelCallback,ft=t.unstable_shouldYield,Me=t.unstable_requestPaint,pt=t.unstable_now,Kt=t.unstable_getCurrentPriorityLevel,Re=t.unstable_ImmediatePriority,He=t.unstable_UserBlockingPriority,gt=t.unstable_NormalPriority,dt=t.unstable_LowPriority,ie=t.unstable_IdlePriority,J=t.log,Z=t.unstable_setDisableYieldValue,ue=null,Se=null;function de(f){if(typeof J=="function"&&Z(f),Se&&typeof Se.setStrictMode=="function")try{Se.setStrictMode(ue,f)}catch{}}var ye=Math.clz32?Math.clz32:lt,et=Math.log,Ze=Math.LN2;function lt(f){return f>>>=0,f===0?32:31-(et(f)/Ze|0)|0}var $t=256,vt=262144,jt=4194304;function sn(f){var p=f&42;if(p!==0)return p;switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return f&261888;case 262144:case 524288:case 1048576:case 2097152:return f&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return f&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return f}}function tn(f,p,x){var E=f.pendingLanes;if(E===0)return 0;var I=0,j=f.suspendedLanes,ne=f.pingedLanes;f=f.warmLanes;var le=E&134217727;return le!==0?(E=le&~j,E!==0?I=sn(E):(ne&=le,ne!==0?I=sn(ne):x||(x=le&~f,x!==0&&(I=sn(x))))):(le=E&~j,le!==0?I=sn(le):ne!==0?I=sn(ne):x||(x=E&~f,x!==0&&(I=sn(x)))),I===0?0:p!==0&&p!==I&&(p&j)===0&&(j=I&-I,x=p&-p,j>=x||j===32&&(x&4194048)!==0)?p:I}function on(f,p){return(f.pendingLanes&~(f.suspendedLanes&~f.pingedLanes)&p)===0}function _i(f,p){switch(f){case 1:case 2:case 4:case 8:case 64:return p+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vn(){var f=jt;return jt<<=1,(jt&62914560)===0&&(jt=4194304),f}function ae(f){for(var p=[],x=0;31>x;x++)p.push(f);return p}function Q(f,p){f.pendingLanes|=p,p!==268435456&&(f.suspendedLanes=0,f.pingedLanes=0,f.warmLanes=0)}function ee(f,p,x,E,I,j){var ne=f.pendingLanes;f.pendingLanes=x,f.suspendedLanes=0,f.pingedLanes=0,f.warmLanes=0,f.expiredLanes&=x,f.entangledLanes&=x,f.errorRecoveryDisabledLanes&=x,f.shellSuspendCounter=0;var le=f.entanglements,Ae=f.expirationTimes,Ue=f.hiddenUpdates;for(x=ne&~x;0<x;){var Ke=31-ye(x),tt=1<<Ke;le[Ke]=0,Ae[Ke]=-1;var $e=Ue[Ke];if($e!==null)for(Ue[Ke]=null,Ke=0;Ke<$e.length;Ke++){var qe=$e[Ke];qe!==null&&(qe.lane&=-536870913)}x&=~tt}E!==0&&fe(f,E,0),j!==0&&I===0&&f.tag!==0&&(f.suspendedLanes|=j&~(ne&~p))}function fe(f,p,x){f.pendingLanes|=p,f.suspendedLanes&=~p;var E=31-ye(p);f.entangledLanes|=p,f.entanglements[E]=f.entanglements[E]|1073741824|x&261930}function _e(f,p){var x=f.entangledLanes|=p;for(f=f.entanglements;x;){var E=31-ye(x),I=1<<E;I&p|f[E]&p&&(f[E]|=p),x&=~I}}function Oe(f,p){var x=p&-p;return x=(x&42)!==0?1:Ve(x),(x&(f.suspendedLanes|p))!==0?0:x}function Ve(f){switch(f){case 2:f=1;break;case 8:f=4;break;case 32:f=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:f=128;break;case 268435456:f=134217728;break;default:f=0}return f}function Qt(f){return f&=-f,2<f?8<f?(f&134217727)!==0?32:268435456:8:2}function Ht(){var f=V.p;return f!==0?f:(f=window.event,f===void 0?32:f$(f.type))}function ot(f,p){var x=V.p;try{return V.p=f,p()}finally{V.p=x}}var mn=Math.random().toString(36).slice(2),At="__reactFiber$"+mn,bn="__reactProps$"+mn,ol="__reactContainer$"+mn,ur="__reactEvents$"+mn,yr="__reactListeners$"+mn,Qc="__reactHandles$"+mn,Ql="__reactResources$"+mn,ca="__reactMarker$"+mn;function Zl(f){delete f[At],delete f[bn],delete f[ur],delete f[yr],delete f[Qc]}function _o(f){var p=f[At];if(p)return p;for(var x=f.parentNode;x;){if(p=x[ol]||x[At]){if(x=p.alternate,p.child!==null||x!==null&&x.child!==null)for(f=J9(f);f!==null;){if(x=f[At])return x;f=J9(f)}return p}f=x,x=f.parentNode}return null}function Io(f){if(f=f[At]||f[ol]){var p=f.tag;if(p===5||p===6||p===13||p===31||p===26||p===27||p===3)return f}return null}function ua(f){var p=f.tag;if(p===5||p===26||p===27||p===6)return f.stateNode;throw Error(r(33))}function Ro(f){var p=f[Ql];return p||(p=f[Ql]={hoistableStyles:new Map,hoistableScripts:new Map}),p}function xr(f){f[ca]=!0}var Zc=new Set,Ar={};function Fr(f,p){vi(f,p),vi(f+"Capture",p)}function vi(f,p){for(Ar[f]=p,f=0;f<p.length;f++)Zc.add(p[f])}var Oh=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),o0={},a0={};function kv(f){return at.call(a0,f)?!0:at.call(o0,f)?!1:Oh.test(f)?a0[f]=!0:(o0[f]=!0,!1)}function Ud(f,p,x){if(kv(p))if(x===null)f.removeAttribute(p);else{switch(typeof x){case"undefined":case"function":case"symbol":f.removeAttribute(p);return;case"boolean":var E=p.toLowerCase().slice(0,5);if(E!=="data-"&&E!=="aria-"){f.removeAttribute(p);return}}f.setAttribute(p,""+x)}}function Fd(f,p,x){if(x===null)f.removeAttribute(p);else{switch(typeof x){case"undefined":case"function":case"symbol":case"boolean":f.removeAttribute(p);return}f.setAttribute(p,""+x)}}function eu(f,p,x,E){if(E===null)f.removeAttribute(x);else{switch(typeof E){case"undefined":case"function":case"symbol":case"boolean":f.removeAttribute(x);return}f.setAttributeNS(p,x,""+E)}}function da(f){switch(typeof f){case"bigint":case"boolean":case"number":case"string":case"undefined":return f;case"object":return f;default:return""}}function M7(f){var p=f.type;return(f=f.nodeName)&&f.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function hge(f,p,x){var E=Object.getOwnPropertyDescriptor(f.constructor.prototype,p);if(!f.hasOwnProperty(p)&&typeof E<"u"&&typeof E.get=="function"&&typeof E.set=="function"){var I=E.get,j=E.set;return Object.defineProperty(f,p,{configurable:!0,get:function(){return I.call(this)},set:function(ne){x=""+ne,j.call(this,ne)}}),Object.defineProperty(f,p,{enumerable:E.enumerable}),{getValue:function(){return x},setValue:function(ne){x=""+ne},stopTracking:function(){f._valueTracker=null,delete f[p]}}}}function yP(f){if(!f._valueTracker){var p=M7(f)?"checked":"value";f._valueTracker=hge(f,p,""+f[p])}}function L7(f){if(!f)return!1;var p=f._valueTracker;if(!p)return!0;var x=p.getValue(),E="";return f&&(E=M7(f)?f.checked?"true":"false":f.value),f=E,f!==x?(p.setValue(f),!0):!1}function LE(f){if(f=f||(typeof document<"u"?document:void 0),typeof f>"u")return null;try{return f.activeElement||f.body}catch{return f.body}}var pge=/[\n"\\]/g;function fa(f){return f.replace(pge,function(p){return"\\"+p.charCodeAt(0).toString(16)+" "})}function xP(f,p,x,E,I,j,ne,le){f.name="",ne!=null&&typeof ne!="function"&&typeof ne!="symbol"&&typeof ne!="boolean"?f.type=ne:f.removeAttribute("type"),p!=null?ne==="number"?(p===0&&f.value===""||f.value!=p)&&(f.value=""+da(p)):f.value!==""+da(p)&&(f.value=""+da(p)):ne!=="submit"&&ne!=="reset"||f.removeAttribute("value"),p!=null?vP(f,ne,da(p)):x!=null?vP(f,ne,da(x)):E!=null&&f.removeAttribute("value"),I==null&&j!=null&&(f.defaultChecked=!!j),I!=null&&(f.checked=I&&typeof I!="function"&&typeof I!="symbol"),le!=null&&typeof le!="function"&&typeof le!="symbol"&&typeof le!="boolean"?f.name=""+da(le):f.removeAttribute("name")}function D7(f,p,x,E,I,j,ne,le){if(j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"&&(f.type=j),p!=null||x!=null){if(!(j!=="submit"&&j!=="reset"||p!=null)){yP(f);return}x=x!=null?""+da(x):"",p=p!=null?""+da(p):x,le||p===f.value||(f.value=p),f.defaultValue=p}E=E??I,E=typeof E!="function"&&typeof E!="symbol"&&!!E,f.checked=le?f.checked:!!E,f.defaultChecked=!!E,ne!=null&&typeof ne!="function"&&typeof ne!="symbol"&&typeof ne!="boolean"&&(f.name=ne),yP(f)}function vP(f,p,x){p==="number"&&LE(f.ownerDocument)===f||f.defaultValue===""+x||(f.defaultValue=""+x)}function l0(f,p,x,E){if(f=f.options,p){p={};for(var I=0;I<x.length;I++)p["$"+x[I]]=!0;for(x=0;x<f.length;x++)I=p.hasOwnProperty("$"+f[x].value),f[x].selected!==I&&(f[x].selected=I),I&&E&&(f[x].defaultSelected=!0)}else{for(x=""+da(x),p=null,I=0;I<f.length;I++){if(f[I].value===x){f[I].selected=!0,E&&(f[I].defaultSelected=!0);return}p!==null||f[I].disabled||(p=f[I])}p!==null&&(p.selected=!0)}}function j7(f,p,x){if(p!=null&&(p=""+da(p),p!==f.value&&(f.value=p),x==null)){f.defaultValue!==p&&(f.defaultValue=p);return}f.defaultValue=x!=null?""+da(x):""}function B7(f,p,x,E){if(p==null){if(E!=null){if(x!=null)throw Error(r(92));if(_(E)){if(1<E.length)throw Error(r(93));E=E[0]}x=E}x==null&&(x=""),p=x}x=da(p),f.defaultValue=x,E=f.textContent,E===x&&E!==""&&E!==null&&(f.value=E),yP(f)}function c0(f,p){if(p){var x=f.firstChild;if(x&&x===f.lastChild&&x.nodeType===3){x.nodeValue=p;return}}f.textContent=p}var mge=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function U7(f,p,x){var E=p.indexOf("--")===0;x==null||typeof x=="boolean"||x===""?E?f.setProperty(p,""):p==="float"?f.cssFloat="":f[p]="":E?f.setProperty(p,x):typeof x!="number"||x===0||mge.has(p)?p==="float"?f.cssFloat=x:f[p]=(""+x).trim():f[p]=x+"px"}function F7(f,p,x){if(p!=null&&typeof p!="object")throw Error(r(62));if(f=f.style,x!=null){for(var E in x)!x.hasOwnProperty(E)||p!=null&&p.hasOwnProperty(E)||(E.indexOf("--")===0?f.setProperty(E,""):E==="float"?f.cssFloat="":f[E]="");for(var I in p)E=p[I],p.hasOwnProperty(I)&&x[I]!==E&&U7(f,I,E)}else for(var j in p)p.hasOwnProperty(j)&&U7(f,j,p[j])}function bP(f){if(f.indexOf("-")===-1)return!1;switch(f){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gge=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),yge=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function DE(f){return yge.test(""+f)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":f}function tu(){}var wP=null;function EP(f){return f=f.target||f.srcElement||window,f.correspondingUseElement&&(f=f.correspondingUseElement),f.nodeType===3?f.parentNode:f}var u0=null,d0=null;function $7(f){var p=Io(f);if(p&&(f=p.stateNode)){var x=f[bn]||null;e:switch(f=p.stateNode,p.type){case"input":if(xP(f,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name),p=x.name,x.type==="radio"&&p!=null){for(x=f;x.parentNode;)x=x.parentNode;for(x=x.querySelectorAll('input[name="'+fa(""+p)+'"][type="radio"]'),p=0;p<x.length;p++){var E=x[p];if(E!==f&&E.form===f.form){var I=E[bn]||null;if(!I)throw Error(r(90));xP(E,I.value,I.defaultValue,I.defaultValue,I.checked,I.defaultChecked,I.type,I.name)}}for(p=0;p<x.length;p++)E=x[p],E.form===f.form&&L7(E)}break e;case"textarea":j7(f,x.value,x.defaultValue);break e;case"select":p=x.value,p!=null&&l0(f,!!x.multiple,p,!1)}}}var SP=!1;function z7(f,p,x){if(SP)return f(p,x);SP=!0;try{var E=f(p);return E}finally{if(SP=!1,(u0!==null||d0!==null)&&(SS(),u0&&(p=u0,f=d0,d0=u0=null,$7(p),f)))for(p=0;p<f.length;p++)$7(f[p])}}function Nv(f,p){var x=f.stateNode;if(x===null)return null;var E=x[bn]||null;if(E===null)return null;x=E[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(E=!E.disabled)||(f=f.type,E=!(f==="button"||f==="input"||f==="select"||f==="textarea")),f=!E;break e;default:f=!1}if(f)return null;if(x&&typeof x!="function")throw Error(r(231,p,typeof x));return x}var nu=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),AP=!1;if(nu)try{var Cv={};Object.defineProperty(Cv,"passive",{get:function(){AP=!0}}),window.addEventListener("test",Cv,Cv),window.removeEventListener("test",Cv,Cv)}catch{AP=!1}var $d=null,TP=null,jE=null;function V7(){if(jE)return jE;var f,p=TP,x=p.length,E,I="value"in $d?$d.value:$d.textContent,j=I.length;for(f=0;f<x&&p[f]===I[f];f++);var ne=x-f;for(E=1;E<=ne&&p[x-E]===I[j-E];E++);return jE=I.slice(f,1<E?1-E:void 0)}function BE(f){var p=f.keyCode;return"charCode"in f?(f=f.charCode,f===0&&p===13&&(f=13)):f=p,f===10&&(f=13),32<=f||f===13?f:0}function UE(){return!0}function H7(){return!1}function lo(f){function p(x,E,I,j,ne){this._reactName=x,this._targetInst=I,this.type=E,this.nativeEvent=j,this.target=ne,this.currentTarget=null;for(var le in f)f.hasOwnProperty(le)&&(x=f[le],this[le]=x?x(j):j[le]);return this.isDefaultPrevented=(j.defaultPrevented!=null?j.defaultPrevented:j.returnValue===!1)?UE:H7,this.isPropagationStopped=H7,this}return h(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var x=this.nativeEvent;x&&(x.preventDefault?x.preventDefault():typeof x.returnValue!="unknown"&&(x.returnValue=!1),this.isDefaultPrevented=UE)},stopPropagation:function(){var x=this.nativeEvent;x&&(x.stopPropagation?x.stopPropagation():typeof x.cancelBubble!="unknown"&&(x.cancelBubble=!0),this.isPropagationStopped=UE)},persist:function(){},isPersistent:UE}),p}var Mh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(f){return f.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},FE=lo(Mh),Pv=h({},Mh,{view:0,detail:0}),xge=lo(Pv),kP,NP,_v,$E=h({},Pv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:PP,button:0,buttons:0,relatedTarget:function(f){return f.relatedTarget===void 0?f.fromElement===f.srcElement?f.toElement:f.fromElement:f.relatedTarget},movementX:function(f){return"movementX"in f?f.movementX:(f!==_v&&(_v&&f.type==="mousemove"?(kP=f.screenX-_v.screenX,NP=f.screenY-_v.screenY):NP=kP=0,_v=f),kP)},movementY:function(f){return"movementY"in f?f.movementY:NP}}),q7=lo($E),vge=h({},$E,{dataTransfer:0}),bge=lo(vge),wge=h({},Pv,{relatedTarget:0}),CP=lo(wge),Ege=h({},Mh,{animationName:0,elapsedTime:0,pseudoElement:0}),Sge=lo(Ege),Age=h({},Mh,{clipboardData:function(f){return"clipboardData"in f?f.clipboardData:window.clipboardData}}),Tge=lo(Age),kge=h({},Mh,{data:0}),G7=lo(kge),Nge={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cge={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Pge={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _ge(f){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(f):(f=Pge[f])?!!p[f]:!1}function PP(){return _ge}var Ige=h({},Pv,{key:function(f){if(f.key){var p=Nge[f.key]||f.key;if(p!=="Unidentified")return p}return f.type==="keypress"?(f=BE(f),f===13?"Enter":String.fromCharCode(f)):f.type==="keydown"||f.type==="keyup"?Cge[f.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:PP,charCode:function(f){return f.type==="keypress"?BE(f):0},keyCode:function(f){return f.type==="keydown"||f.type==="keyup"?f.keyCode:0},which:function(f){return f.type==="keypress"?BE(f):f.type==="keydown"||f.type==="keyup"?f.keyCode:0}}),Rge=lo(Ige),Oge=h({},$E,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),K7=lo(Oge),Mge=h({},Pv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:PP}),Lge=lo(Mge),Dge=h({},Mh,{propertyName:0,elapsedTime:0,pseudoElement:0}),jge=lo(Dge),Bge=h({},$E,{deltaX:function(f){return"deltaX"in f?f.deltaX:"wheelDeltaX"in f?-f.wheelDeltaX:0},deltaY:function(f){return"deltaY"in f?f.deltaY:"wheelDeltaY"in f?-f.wheelDeltaY:"wheelDelta"in f?-f.wheelDelta:0},deltaZ:0,deltaMode:0}),Uge=lo(Bge),Fge=h({},Mh,{newState:0,oldState:0}),$ge=lo(Fge),zge=[9,13,27,32],_P=nu&&"CompositionEvent"in window,Iv=null;nu&&"documentMode"in document&&(Iv=document.documentMode);var Vge=nu&&"TextEvent"in window&&!Iv,W7=nu&&(!_P||Iv&&8<Iv&&11>=Iv),Y7=" ",J7=!1;function X7(f,p){switch(f){case"keyup":return zge.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Q7(f){return f=f.detail,typeof f=="object"&&"data"in f?f.data:null}var f0=!1;function Hge(f,p){switch(f){case"compositionend":return Q7(p);case"keypress":return p.which!==32?null:(J7=!0,Y7);case"textInput":return f=p.data,f===Y7&&J7?null:f;default:return null}}function qge(f,p){if(f0)return f==="compositionend"||!_P&&X7(f,p)?(f=V7(),jE=TP=$d=null,f0=!1,f):null;switch(f){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return W7&&p.locale!=="ko"?null:p.data;default:return null}}var Gge={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Z7(f){var p=f&&f.nodeName&&f.nodeName.toLowerCase();return p==="input"?!!Gge[f.type]:p==="textarea"}function eU(f,p,x,E){u0?d0?d0.push(E):d0=[E]:u0=E,p=_S(p,"onChange"),0<p.length&&(x=new FE("onChange","change",null,x,E),f.push({event:x,listeners:p}))}var Rv=null,Ov=null;function Kge(f){D9(f,0)}function zE(f){var p=ua(f);if(L7(p))return f}function tU(f,p){if(f==="change")return p}var nU=!1;if(nu){var IP;if(nu){var RP="oninput"in document;if(!RP){var rU=document.createElement("div");rU.setAttribute("oninput","return;"),RP=typeof rU.oninput=="function"}IP=RP}else IP=!1;nU=IP&&(!document.documentMode||9<document.documentMode)}function iU(){Rv&&(Rv.detachEvent("onpropertychange",sU),Ov=Rv=null)}function sU(f){if(f.propertyName==="value"&&zE(Ov)){var p=[];eU(p,Ov,f,EP(f)),z7(Kge,p)}}function Wge(f,p,x){f==="focusin"?(iU(),Rv=p,Ov=x,Rv.attachEvent("onpropertychange",sU)):f==="focusout"&&iU()}function Yge(f){if(f==="selectionchange"||f==="keyup"||f==="keydown")return zE(Ov)}function Jge(f,p){if(f==="click")return zE(p)}function Xge(f,p){if(f==="input"||f==="change")return zE(p)}function Qge(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var Oo=typeof Object.is=="function"?Object.is:Qge;function Mv(f,p){if(Oo(f,p))return!0;if(typeof f!="object"||f===null||typeof p!="object"||p===null)return!1;var x=Object.keys(f),E=Object.keys(p);if(x.length!==E.length)return!1;for(E=0;E<x.length;E++){var I=x[E];if(!at.call(p,I)||!Oo(f[I],p[I]))return!1}return!0}function oU(f){for(;f&&f.firstChild;)f=f.firstChild;return f}function aU(f,p){var x=oU(f);f=0;for(var E;x;){if(x.nodeType===3){if(E=f+x.textContent.length,f<=p&&E>=p)return{node:x,offset:p-f};f=E}e:{for(;x;){if(x.nextSibling){x=x.nextSibling;break e}x=x.parentNode}x=void 0}x=oU(x)}}function lU(f,p){return f&&p?f===p?!0:f&&f.nodeType===3?!1:p&&p.nodeType===3?lU(f,p.parentNode):"contains"in f?f.contains(p):f.compareDocumentPosition?!!(f.compareDocumentPosition(p)&16):!1:!1}function cU(f){f=f!=null&&f.ownerDocument!=null&&f.ownerDocument.defaultView!=null?f.ownerDocument.defaultView:window;for(var p=LE(f.document);p instanceof f.HTMLIFrameElement;){try{var x=typeof p.contentWindow.location.href=="string"}catch{x=!1}if(x)f=p.contentWindow;else break;p=LE(f.document)}return p}function OP(f){var p=f&&f.nodeName&&f.nodeName.toLowerCase();return p&&(p==="input"&&(f.type==="text"||f.type==="search"||f.type==="tel"||f.type==="url"||f.type==="password")||p==="textarea"||f.contentEditable==="true")}var Zge=nu&&"documentMode"in document&&11>=document.documentMode,h0=null,MP=null,Lv=null,LP=!1;function uU(f,p,x){var E=x.window===x?x.document:x.nodeType===9?x:x.ownerDocument;LP||h0==null||h0!==LE(E)||(E=h0,"selectionStart"in E&&OP(E)?E={start:E.selectionStart,end:E.selectionEnd}:(E=(E.ownerDocument&&E.ownerDocument.defaultView||window).getSelection(),E={anchorNode:E.anchorNode,anchorOffset:E.anchorOffset,focusNode:E.focusNode,focusOffset:E.focusOffset}),Lv&&Mv(Lv,E)||(Lv=E,E=_S(MP,"onSelect"),0<E.length&&(p=new FE("onSelect","select",null,p,x),f.push({event:p,listeners:E}),p.target=h0)))}function Lh(f,p){var x={};return x[f.toLowerCase()]=p.toLowerCase(),x["Webkit"+f]="webkit"+p,x["Moz"+f]="moz"+p,x}var p0={animationend:Lh("Animation","AnimationEnd"),animationiteration:Lh("Animation","AnimationIteration"),animationstart:Lh("Animation","AnimationStart"),transitionrun:Lh("Transition","TransitionRun"),transitionstart:Lh("Transition","TransitionStart"),transitioncancel:Lh("Transition","TransitionCancel"),transitionend:Lh("Transition","TransitionEnd")},DP={},dU={};nu&&(dU=document.createElement("div").style,"AnimationEvent"in window||(delete p0.animationend.animation,delete p0.animationiteration.animation,delete p0.animationstart.animation),"TransitionEvent"in window||delete p0.transitionend.transition);function Dh(f){if(DP[f])return DP[f];if(!p0[f])return f;var p=p0[f],x;for(x in p)if(p.hasOwnProperty(x)&&x in dU)return DP[f]=p[x];return f}var fU=Dh("animationend"),hU=Dh("animationiteration"),pU=Dh("animationstart"),eye=Dh("transitionrun"),tye=Dh("transitionstart"),nye=Dh("transitioncancel"),mU=Dh("transitionend"),gU=new Map,jP="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");jP.push("scrollEnd");function al(f,p){gU.set(f,p),Fr(p,[f])}var VE=typeof reportError=="function"?reportError:function(f){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var p=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof f=="object"&&f!==null&&typeof f.message=="string"?String(f.message):String(f),error:f});if(!window.dispatchEvent(p))return}else if(typeof Dl=="object"&&typeof Dl.emit=="function"){Dl.emit("uncaughtException",f);return}console.error(f)},ha=[],m0=0,BP=0;function HE(){for(var f=m0,p=BP=m0=0;p<f;){var x=ha[p];ha[p++]=null;var E=ha[p];ha[p++]=null;var I=ha[p];ha[p++]=null;var j=ha[p];if(ha[p++]=null,E!==null&&I!==null){var ne=E.pending;ne===null?I.next=I:(I.next=ne.next,ne.next=I),E.pending=I}j!==0&&yU(x,I,j)}}function qE(f,p,x,E){ha[m0++]=f,ha[m0++]=p,ha[m0++]=x,ha[m0++]=E,BP|=E,f.lanes|=E,f=f.alternate,f!==null&&(f.lanes|=E)}function UP(f,p,x,E){return qE(f,p,x,E),GE(f)}function jh(f,p){return qE(f,null,null,p),GE(f)}function yU(f,p,x){f.lanes|=x;var E=f.alternate;E!==null&&(E.lanes|=x);for(var I=!1,j=f.return;j!==null;)j.childLanes|=x,E=j.alternate,E!==null&&(E.childLanes|=x),j.tag===22&&(f=j.stateNode,f===null||f._visibility&1||(I=!0)),f=j,j=j.return;return f.tag===3?(j=f.stateNode,I&&p!==null&&(I=31-ye(x),f=j.hiddenUpdates,E=f[I],E===null?f[I]=[p]:E.push(p),p.lane=x|536870912),j):null}function GE(f){if(50<rb)throw rb=0,W_=null,Error(r(185));for(var p=f.return;p!==null;)f=p,p=f.return;return f.tag===3?f.stateNode:null}var g0={};function rye(f,p,x,E){this.tag=f,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mo(f,p,x,E){return new rye(f,p,x,E)}function FP(f){return f=f.prototype,!(!f||!f.isReactComponent)}function ru(f,p){var x=f.alternate;return x===null?(x=Mo(f.tag,p,f.key,f.mode),x.elementType=f.elementType,x.type=f.type,x.stateNode=f.stateNode,x.alternate=f,f.alternate=x):(x.pendingProps=p,x.type=f.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=f.flags&65011712,x.childLanes=f.childLanes,x.lanes=f.lanes,x.child=f.child,x.memoizedProps=f.memoizedProps,x.memoizedState=f.memoizedState,x.updateQueue=f.updateQueue,p=f.dependencies,x.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},x.sibling=f.sibling,x.index=f.index,x.ref=f.ref,x.refCleanup=f.refCleanup,x}function xU(f,p){f.flags&=65011714;var x=f.alternate;return x===null?(f.childLanes=0,f.lanes=p,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=x.childLanes,f.lanes=x.lanes,f.child=x.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=x.memoizedProps,f.memoizedState=x.memoizedState,f.updateQueue=x.updateQueue,f.type=x.type,p=x.dependencies,f.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext}),f}function KE(f,p,x,E,I,j){var ne=0;if(E=f,typeof f=="function")FP(f)&&(ne=1);else if(typeof f=="string")ne=lxe(f,x,Y.current)?26:f==="html"||f==="head"||f==="body"?27:5;else e:switch(f){case U:return f=Mo(31,x,p,I),f.elementType=U,f.lanes=j,f;case v:return Bh(x.children,I,j,p);case b:ne=8,I|=24;break;case w:return f=Mo(12,x,p,I|2),f.elementType=w,f.lanes=j,f;case D:return f=Mo(13,x,p,I),f.elementType=D,f.lanes=j,f;case O:return f=Mo(19,x,p,I),f.elementType=O,f.lanes=j,f;default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case N:ne=10;break e;case k:ne=9;break e;case R:ne=11;break e;case B:ne=14;break e;case z:ne=16,E=null;break e}ne=29,x=Error(r(130,f===null?"null":typeof f,"")),E=null}return p=Mo(ne,x,p,I),p.elementType=f,p.type=E,p.lanes=j,p}function Bh(f,p,x,E){return f=Mo(7,f,E,p),f.lanes=x,f}function $P(f,p,x){return f=Mo(6,f,null,p),f.lanes=x,f}function vU(f){var p=Mo(18,null,null,0);return p.stateNode=f,p}function zP(f,p,x){return p=Mo(4,f.children!==null?f.children:[],f.key,p),p.lanes=x,p.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},p}var bU=new WeakMap;function pa(f,p){if(typeof f=="object"&&f!==null){var x=bU.get(f);return x!==void 0?x:(p={value:f,source:p,stack:Qe(p)},bU.set(f,p),p)}return{value:f,source:p,stack:Qe(p)}}var y0=[],x0=0,WE=null,Dv=0,ma=[],ga=0,zd=null,ec=1,tc="";function iu(f,p){y0[x0++]=Dv,y0[x0++]=WE,WE=f,Dv=p}function wU(f,p,x){ma[ga++]=ec,ma[ga++]=tc,ma[ga++]=zd,zd=f;var E=ec;f=tc;var I=32-ye(E)-1;E&=~(1<<I),x+=1;var j=32-ye(p)+I;if(30<j){var ne=I-I%5;j=(E&(1<<ne)-1).toString(32),E>>=ne,I-=ne,ec=1<<32-ye(p)+I|x<<I|E,tc=j+f}else ec=1<<j|x<<I|E,tc=f}function VP(f){f.return!==null&&(iu(f,1),wU(f,1,0))}function HP(f){for(;f===WE;)WE=y0[--x0],y0[x0]=null,Dv=y0[--x0],y0[x0]=null;for(;f===zd;)zd=ma[--ga],ma[ga]=null,tc=ma[--ga],ma[ga]=null,ec=ma[--ga],ma[ga]=null}function EU(f,p){ma[ga++]=ec,ma[ga++]=tc,ma[ga++]=zd,ec=p.id,tc=p.overflow,zd=f}var Wi=null,vr=null,Cn=!1,Vd=null,ya=!1,qP=Error(r(519));function Hd(f){var p=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw jv(pa(p,f)),qP}function SU(f){var p=f.stateNode,x=f.type,E=f.memoizedProps;switch(p[At]=f,p[bn]=E,x){case"dialog":En("cancel",p),En("close",p);break;case"iframe":case"object":case"embed":En("load",p);break;case"video":case"audio":for(x=0;x<sb.length;x++)En(sb[x],p);break;case"source":En("error",p);break;case"img":case"image":case"link":En("error",p),En("load",p);break;case"details":En("toggle",p);break;case"input":En("invalid",p),D7(p,E.value,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name,!0);break;case"select":En("invalid",p);break;case"textarea":En("invalid",p),B7(p,E.value,E.defaultValue,E.children)}x=E.children,typeof x!="string"&&typeof x!="number"&&typeof x!="bigint"||p.textContent===""+x||E.suppressHydrationWarning===!0||F9(p.textContent,x)?(E.popover!=null&&(En("beforetoggle",p),En("toggle",p)),E.onScroll!=null&&En("scroll",p),E.onScrollEnd!=null&&En("scrollend",p),E.onClick!=null&&(p.onclick=tu),p=!0):p=!1,p||Hd(f,!0)}function AU(f){for(Wi=f.return;Wi;)switch(Wi.tag){case 5:case 31:case 13:ya=!1;return;case 27:case 3:ya=!0;return;default:Wi=Wi.return}}function v0(f){if(f!==Wi)return!1;if(!Cn)return AU(f),Cn=!0,!1;var p=f.tag,x;if((x=p!==3&&p!==27)&&((x=p===5)&&(x=f.type,x=!(x!=="form"&&x!=="button")||cI(f.type,f.memoizedProps)),x=!x),x&&vr&&Hd(f),AU(f),p===13){if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));vr=Y9(f)}else if(p===31){if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));vr=Y9(f)}else p===27?(p=vr,sf(f.type)?(f=pI,pI=null,vr=f):vr=p):vr=Wi?va(f.stateNode.nextSibling):null;return!0}function Uh(){vr=Wi=null,Cn=!1}function GP(){var f=Vd;return f!==null&&(ho===null?ho=f:ho.push.apply(ho,f),Vd=null),f}function jv(f){Vd===null?Vd=[f]:Vd.push(f)}var KP=q(null),Fh=null,su=null;function qd(f,p,x){P(KP,p._currentValue),p._currentValue=x}function ou(f){f._currentValue=KP.current,M(KP)}function WP(f,p,x){for(;f!==null;){var E=f.alternate;if((f.childLanes&p)!==p?(f.childLanes|=p,E!==null&&(E.childLanes|=p)):E!==null&&(E.childLanes&p)!==p&&(E.childLanes|=p),f===x)break;f=f.return}}function YP(f,p,x,E){var I=f.child;for(I!==null&&(I.return=f);I!==null;){var j=I.dependencies;if(j!==null){var ne=I.child;j=j.firstContext;e:for(;j!==null;){var le=j;j=I;for(var Ae=0;Ae<p.length;Ae++)if(le.context===p[Ae]){j.lanes|=x,le=j.alternate,le!==null&&(le.lanes|=x),WP(j.return,x,f),E||(ne=null);break e}j=le.next}}else if(I.tag===18){if(ne=I.return,ne===null)throw Error(r(341));ne.lanes|=x,j=ne.alternate,j!==null&&(j.lanes|=x),WP(ne,x,f),ne=null}else ne=I.child;if(ne!==null)ne.return=I;else for(ne=I;ne!==null;){if(ne===f){ne=null;break}if(I=ne.sibling,I!==null){I.return=ne.return,ne=I;break}ne=ne.return}I=ne}}function b0(f,p,x,E){f=null;for(var I=p,j=!1;I!==null;){if(!j){if((I.flags&524288)!==0)j=!0;else if((I.flags&262144)!==0)break}if(I.tag===10){var ne=I.alternate;if(ne===null)throw Error(r(387));if(ne=ne.memoizedProps,ne!==null){var le=I.type;Oo(I.pendingProps.value,ne.value)||(f!==null?f.push(le):f=[le])}}else if(I===oe.current){if(ne=I.alternate,ne===null)throw Error(r(387));ne.memoizedState.memoizedState!==I.memoizedState.memoizedState&&(f!==null?f.push(ub):f=[ub])}I=I.return}f!==null&&YP(p,f,x,E),p.flags|=262144}function YE(f){for(f=f.firstContext;f!==null;){if(!Oo(f.context._currentValue,f.memoizedValue))return!0;f=f.next}return!1}function $h(f){Fh=f,su=null,f=f.dependencies,f!==null&&(f.firstContext=null)}function Yi(f){return TU(Fh,f)}function JE(f,p){return Fh===null&&$h(f),TU(f,p)}function TU(f,p){var x=p._currentValue;if(p={context:p,memoizedValue:x,next:null},su===null){if(f===null)throw Error(r(308));su=p,f.dependencies={lanes:0,firstContext:p},f.flags|=524288}else su=su.next=p;return x}var iye=typeof AbortController<"u"?AbortController:function(){var f=[],p=this.signal={aborted:!1,addEventListener:function(x,E){f.push(E)}};this.abort=function(){p.aborted=!0,f.forEach(function(x){return x()})}},sye=t.unstable_scheduleCallback,oye=t.unstable_NormalPriority,oi={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function JP(){return{controller:new iye,data:new Map,refCount:0}}function Bv(f){f.refCount--,f.refCount===0&&sye(oye,function(){f.controller.abort()})}var Uv=null,XP=0,w0=0,E0=null;function aye(f,p){if(Uv===null){var x=Uv=[];XP=0,w0=eI(),E0={status:"pending",value:void 0,then:function(E){x.push(E)}}}return XP++,p.then(kU,kU),p}function kU(){if(--XP===0&&Uv!==null){E0!==null&&(E0.status="fulfilled");var f=Uv;Uv=null,w0=0,E0=null;for(var p=0;p<f.length;p++)(0,f[p])()}}function lye(f,p){var x=[],E={status:"pending",value:null,reason:null,then:function(I){x.push(I)}};return f.then(function(){E.status="fulfilled",E.value=p;for(var I=0;I<x.length;I++)(0,x[I])(p)},function(I){for(E.status="rejected",E.reason=I,I=0;I<x.length;I++)(0,x[I])(void 0)}),E}var NU=L.S;L.S=function(f,p){u9=pt(),typeof p=="object"&&p!==null&&typeof p.then=="function"&&aye(f,p),NU!==null&&NU(f,p)};var zh=q(null);function QP(){var f=zh.current;return f!==null?f:sr.pooledCache}function XE(f,p){p===null?P(zh,zh.current):P(zh,p.pool)}function CU(){var f=QP();return f===null?null:{parent:oi._currentValue,pool:f}}var S0=Error(r(460)),ZP=Error(r(474)),QE=Error(r(542)),ZE={then:function(){}};function PU(f){return f=f.status,f==="fulfilled"||f==="rejected"}function _U(f,p,x){switch(x=f[x],x===void 0?f.push(p):x!==p&&(p.then(tu,tu),p=x),p.status){case"fulfilled":return p.value;case"rejected":throw f=p.reason,RU(f),f;default:if(typeof p.status=="string")p.then(tu,tu);else{if(f=sr,f!==null&&100<f.shellSuspendCounter)throw Error(r(482));f=p,f.status="pending",f.then(function(E){if(p.status==="pending"){var I=p;I.status="fulfilled",I.value=E}},function(E){if(p.status==="pending"){var I=p;I.status="rejected",I.reason=E}})}switch(p.status){case"fulfilled":return p.value;case"rejected":throw f=p.reason,RU(f),f}throw Hh=p,S0}}function Vh(f){try{var p=f._init;return p(f._payload)}catch(x){throw x!==null&&typeof x=="object"&&typeof x.then=="function"?(Hh=x,S0):x}}var Hh=null;function IU(){if(Hh===null)throw Error(r(459));var f=Hh;return Hh=null,f}function RU(f){if(f===S0||f===QE)throw Error(r(483))}var A0=null,Fv=0;function eS(f){var p=Fv;return Fv+=1,A0===null&&(A0=[]),_U(A0,f,p)}function $v(f,p){p=p.props.ref,f.ref=p!==void 0?p:null}function tS(f,p){throw p.$$typeof===m?Error(r(525)):(f=Object.prototype.toString.call(p),Error(r(31,f==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":f)))}function OU(f){function p(Ie,Pe){if(f){var Be=Ie.deletions;Be===null?(Ie.deletions=[Pe],Ie.flags|=16):Be.push(Pe)}}function x(Ie,Pe){if(!f)return null;for(;Pe!==null;)p(Ie,Pe),Pe=Pe.sibling;return null}function E(Ie){for(var Pe=new Map;Ie!==null;)Ie.key!==null?Pe.set(Ie.key,Ie):Pe.set(Ie.index,Ie),Ie=Ie.sibling;return Pe}function I(Ie,Pe){return Ie=ru(Ie,Pe),Ie.index=0,Ie.sibling=null,Ie}function j(Ie,Pe,Be){return Ie.index=Be,f?(Be=Ie.alternate,Be!==null?(Be=Be.index,Be<Pe?(Ie.flags|=67108866,Pe):Be):(Ie.flags|=67108866,Pe)):(Ie.flags|=1048576,Pe)}function ne(Ie){return f&&Ie.alternate===null&&(Ie.flags|=67108866),Ie}function le(Ie,Pe,Be,Je){return Pe===null||Pe.tag!==6?(Pe=$P(Be,Ie.mode,Je),Pe.return=Ie,Pe):(Pe=I(Pe,Be),Pe.return=Ie,Pe)}function Ae(Ie,Pe,Be,Je){var zt=Be.type;return zt===v?Ke(Ie,Pe,Be.props.children,Je,Be.key):Pe!==null&&(Pe.elementType===zt||typeof zt=="object"&&zt!==null&&zt.$$typeof===z&&Vh(zt)===Pe.type)?(Pe=I(Pe,Be.props),$v(Pe,Be),Pe.return=Ie,Pe):(Pe=KE(Be.type,Be.key,Be.props,null,Ie.mode,Je),$v(Pe,Be),Pe.return=Ie,Pe)}function Ue(Ie,Pe,Be,Je){return Pe===null||Pe.tag!==4||Pe.stateNode.containerInfo!==Be.containerInfo||Pe.stateNode.implementation!==Be.implementation?(Pe=zP(Be,Ie.mode,Je),Pe.return=Ie,Pe):(Pe=I(Pe,Be.children||[]),Pe.return=Ie,Pe)}function Ke(Ie,Pe,Be,Je,zt){return Pe===null||Pe.tag!==7?(Pe=Bh(Be,Ie.mode,Je,zt),Pe.return=Ie,Pe):(Pe=I(Pe,Be),Pe.return=Ie,Pe)}function tt(Ie,Pe,Be){if(typeof Pe=="string"&&Pe!==""||typeof Pe=="number"||typeof Pe=="bigint")return Pe=$P(""+Pe,Ie.mode,Be),Pe.return=Ie,Pe;if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case g:return Be=KE(Pe.type,Pe.key,Pe.props,null,Ie.mode,Be),$v(Be,Pe),Be.return=Ie,Be;case y:return Pe=zP(Pe,Ie.mode,Be),Pe.return=Ie,Pe;case z:return Pe=Vh(Pe),tt(Ie,Pe,Be)}if(_(Pe)||H(Pe))return Pe=Bh(Pe,Ie.mode,Be,null),Pe.return=Ie,Pe;if(typeof Pe.then=="function")return tt(Ie,eS(Pe),Be);if(Pe.$$typeof===N)return tt(Ie,JE(Ie,Pe),Be);tS(Ie,Pe)}return null}function $e(Ie,Pe,Be,Je){var zt=Pe!==null?Pe.key:null;if(typeof Be=="string"&&Be!==""||typeof Be=="number"||typeof Be=="bigint")return zt!==null?null:le(Ie,Pe,""+Be,Je);if(typeof Be=="object"&&Be!==null){switch(Be.$$typeof){case g:return Be.key===zt?Ae(Ie,Pe,Be,Je):null;case y:return Be.key===zt?Ue(Ie,Pe,Be,Je):null;case z:return Be=Vh(Be),$e(Ie,Pe,Be,Je)}if(_(Be)||H(Be))return zt!==null?null:Ke(Ie,Pe,Be,Je,null);if(typeof Be.then=="function")return $e(Ie,Pe,eS(Be),Je);if(Be.$$typeof===N)return $e(Ie,Pe,JE(Ie,Be),Je);tS(Ie,Be)}return null}function qe(Ie,Pe,Be,Je,zt){if(typeof Je=="string"&&Je!==""||typeof Je=="number"||typeof Je=="bigint")return Ie=Ie.get(Be)||null,le(Pe,Ie,""+Je,zt);if(typeof Je=="object"&&Je!==null){switch(Je.$$typeof){case g:return Ie=Ie.get(Je.key===null?Be:Je.key)||null,Ae(Pe,Ie,Je,zt);case y:return Ie=Ie.get(Je.key===null?Be:Je.key)||null,Ue(Pe,Ie,Je,zt);case z:return Je=Vh(Je),qe(Ie,Pe,Be,Je,zt)}if(_(Je)||H(Je))return Ie=Ie.get(Be)||null,Ke(Pe,Ie,Je,zt,null);if(typeof Je.then=="function")return qe(Ie,Pe,Be,eS(Je),zt);if(Je.$$typeof===N)return qe(Ie,Pe,Be,JE(Pe,Je),zt);tS(Pe,Je)}return null}function It(Ie,Pe,Be,Je){for(var zt=null,Ln=null,Dt=Pe,un=Pe=0,Nn=null;Dt!==null&&un<Be.length;un++){Dt.index>un?(Nn=Dt,Dt=null):Nn=Dt.sibling;var Dn=$e(Ie,Dt,Be[un],Je);if(Dn===null){Dt===null&&(Dt=Nn);break}f&&Dt&&Dn.alternate===null&&p(Ie,Dt),Pe=j(Dn,Pe,un),Ln===null?zt=Dn:Ln.sibling=Dn,Ln=Dn,Dt=Nn}if(un===Be.length)return x(Ie,Dt),Cn&&iu(Ie,un),zt;if(Dt===null){for(;un<Be.length;un++)Dt=tt(Ie,Be[un],Je),Dt!==null&&(Pe=j(Dt,Pe,un),Ln===null?zt=Dt:Ln.sibling=Dt,Ln=Dt);return Cn&&iu(Ie,un),zt}for(Dt=E(Dt);un<Be.length;un++)Nn=qe(Dt,Ie,un,Be[un],Je),Nn!==null&&(f&&Nn.alternate!==null&&Dt.delete(Nn.key===null?un:Nn.key),Pe=j(Nn,Pe,un),Ln===null?zt=Nn:Ln.sibling=Nn,Ln=Nn);return f&&Dt.forEach(function(uf){return p(Ie,uf)}),Cn&&iu(Ie,un),zt}function Yt(Ie,Pe,Be,Je){if(Be==null)throw Error(r(151));for(var zt=null,Ln=null,Dt=Pe,un=Pe=0,Nn=null,Dn=Be.next();Dt!==null&&!Dn.done;un++,Dn=Be.next()){Dt.index>un?(Nn=Dt,Dt=null):Nn=Dt.sibling;var uf=$e(Ie,Dt,Dn.value,Je);if(uf===null){Dt===null&&(Dt=Nn);break}f&&Dt&&uf.alternate===null&&p(Ie,Dt),Pe=j(uf,Pe,un),Ln===null?zt=uf:Ln.sibling=uf,Ln=uf,Dt=Nn}if(Dn.done)return x(Ie,Dt),Cn&&iu(Ie,un),zt;if(Dt===null){for(;!Dn.done;un++,Dn=Be.next())Dn=tt(Ie,Dn.value,Je),Dn!==null&&(Pe=j(Dn,Pe,un),Ln===null?zt=Dn:Ln.sibling=Dn,Ln=Dn);return Cn&&iu(Ie,un),zt}for(Dt=E(Dt);!Dn.done;un++,Dn=Be.next())Dn=qe(Dt,Ie,un,Dn.value,Je),Dn!==null&&(f&&Dn.alternate!==null&&Dt.delete(Dn.key===null?un:Dn.key),Pe=j(Dn,Pe,un),Ln===null?zt=Dn:Ln.sibling=Dn,Ln=Dn);return f&&Dt.forEach(function(vxe){return p(Ie,vxe)}),Cn&&iu(Ie,un),zt}function tr(Ie,Pe,Be,Je){if(typeof Be=="object"&&Be!==null&&Be.type===v&&Be.key===null&&(Be=Be.props.children),typeof Be=="object"&&Be!==null){switch(Be.$$typeof){case g:e:{for(var zt=Be.key;Pe!==null;){if(Pe.key===zt){if(zt=Be.type,zt===v){if(Pe.tag===7){x(Ie,Pe.sibling),Je=I(Pe,Be.props.children),Je.return=Ie,Ie=Je;break e}}else if(Pe.elementType===zt||typeof zt=="object"&&zt!==null&&zt.$$typeof===z&&Vh(zt)===Pe.type){x(Ie,Pe.sibling),Je=I(Pe,Be.props),$v(Je,Be),Je.return=Ie,Ie=Je;break e}x(Ie,Pe);break}else p(Ie,Pe);Pe=Pe.sibling}Be.type===v?(Je=Bh(Be.props.children,Ie.mode,Je,Be.key),Je.return=Ie,Ie=Je):(Je=KE(Be.type,Be.key,Be.props,null,Ie.mode,Je),$v(Je,Be),Je.return=Ie,Ie=Je)}return ne(Ie);case y:e:{for(zt=Be.key;Pe!==null;){if(Pe.key===zt)if(Pe.tag===4&&Pe.stateNode.containerInfo===Be.containerInfo&&Pe.stateNode.implementation===Be.implementation){x(Ie,Pe.sibling),Je=I(Pe,Be.children||[]),Je.return=Ie,Ie=Je;break e}else{x(Ie,Pe);break}else p(Ie,Pe);Pe=Pe.sibling}Je=zP(Be,Ie.mode,Je),Je.return=Ie,Ie=Je}return ne(Ie);case z:return Be=Vh(Be),tr(Ie,Pe,Be,Je)}if(_(Be))return It(Ie,Pe,Be,Je);if(H(Be)){if(zt=H(Be),typeof zt!="function")throw Error(r(150));return Be=zt.call(Be),Yt(Ie,Pe,Be,Je)}if(typeof Be.then=="function")return tr(Ie,Pe,eS(Be),Je);if(Be.$$typeof===N)return tr(Ie,Pe,JE(Ie,Be),Je);tS(Ie,Be)}return typeof Be=="string"&&Be!==""||typeof Be=="number"||typeof Be=="bigint"?(Be=""+Be,Pe!==null&&Pe.tag===6?(x(Ie,Pe.sibling),Je=I(Pe,Be),Je.return=Ie,Ie=Je):(x(Ie,Pe),Je=$P(Be,Ie.mode,Je),Je.return=Ie,Ie=Je),ne(Ie)):x(Ie,Pe)}return function(Ie,Pe,Be,Je){try{Fv=0;var zt=tr(Ie,Pe,Be,Je);return A0=null,zt}catch(Dt){if(Dt===S0||Dt===QE)throw Dt;var Ln=Mo(29,Dt,null,Ie.mode);return Ln.lanes=Je,Ln.return=Ie,Ln}finally{}}}var qh=OU(!0),MU=OU(!1),Gd=!1;function e_(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function t_(f,p){f=f.updateQueue,p.updateQueue===f&&(p.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,callbacks:null})}function Kd(f){return{lane:f,tag:0,payload:null,callback:null,next:null}}function Wd(f,p,x){var E=f.updateQueue;if(E===null)return null;if(E=E.shared,(Hn&2)!==0){var I=E.pending;return I===null?p.next=p:(p.next=I.next,I.next=p),E.pending=p,p=GE(f),yU(f,null,x),p}return qE(f,E,p,x),GE(f)}function zv(f,p,x){if(p=p.updateQueue,p!==null&&(p=p.shared,(x&4194048)!==0)){var E=p.lanes;E&=f.pendingLanes,x|=E,p.lanes=x,_e(f,x)}}function n_(f,p){var x=f.updateQueue,E=f.alternate;if(E!==null&&(E=E.updateQueue,x===E)){var I=null,j=null;if(x=x.firstBaseUpdate,x!==null){do{var ne={lane:x.lane,tag:x.tag,payload:x.payload,callback:null,next:null};j===null?I=j=ne:j=j.next=ne,x=x.next}while(x!==null);j===null?I=j=p:j=j.next=p}else I=j=p;x={baseState:E.baseState,firstBaseUpdate:I,lastBaseUpdate:j,shared:E.shared,callbacks:E.callbacks},f.updateQueue=x;return}f=x.lastBaseUpdate,f===null?x.firstBaseUpdate=p:f.next=p,x.lastBaseUpdate=p}var r_=!1;function Vv(){if(r_){var f=E0;if(f!==null)throw f}}function Hv(f,p,x,E){r_=!1;var I=f.updateQueue;Gd=!1;var j=I.firstBaseUpdate,ne=I.lastBaseUpdate,le=I.shared.pending;if(le!==null){I.shared.pending=null;var Ae=le,Ue=Ae.next;Ae.next=null,ne===null?j=Ue:ne.next=Ue,ne=Ae;var Ke=f.alternate;Ke!==null&&(Ke=Ke.updateQueue,le=Ke.lastBaseUpdate,le!==ne&&(le===null?Ke.firstBaseUpdate=Ue:le.next=Ue,Ke.lastBaseUpdate=Ae))}if(j!==null){var tt=I.baseState;ne=0,Ke=Ue=Ae=null,le=j;do{var $e=le.lane&-536870913,qe=$e!==le.lane;if(qe?(kn&$e)===$e:(E&$e)===$e){$e!==0&&$e===w0&&(r_=!0),Ke!==null&&(Ke=Ke.next={lane:0,tag:le.tag,payload:le.payload,callback:null,next:null});e:{var It=f,Yt=le;$e=p;var tr=x;switch(Yt.tag){case 1:if(It=Yt.payload,typeof It=="function"){tt=It.call(tr,tt,$e);break e}tt=It;break e;case 3:It.flags=It.flags&-65537|128;case 0:if(It=Yt.payload,$e=typeof It=="function"?It.call(tr,tt,$e):It,$e==null)break e;tt=h({},tt,$e);break e;case 2:Gd=!0}}$e=le.callback,$e!==null&&(f.flags|=64,qe&&(f.flags|=8192),qe=I.callbacks,qe===null?I.callbacks=[$e]:qe.push($e))}else qe={lane:$e,tag:le.tag,payload:le.payload,callback:le.callback,next:null},Ke===null?(Ue=Ke=qe,Ae=tt):Ke=Ke.next=qe,ne|=$e;if(le=le.next,le===null){if(le=I.shared.pending,le===null)break;qe=le,le=qe.next,qe.next=null,I.lastBaseUpdate=qe,I.shared.pending=null}}while(!0);Ke===null&&(Ae=tt),I.baseState=Ae,I.firstBaseUpdate=Ue,I.lastBaseUpdate=Ke,j===null&&(I.shared.lanes=0),Zd|=ne,f.lanes=ne,f.memoizedState=tt}}function LU(f,p){if(typeof f!="function")throw Error(r(191,f));f.call(p)}function DU(f,p){var x=f.callbacks;if(x!==null)for(f.callbacks=null,f=0;f<x.length;f++)LU(x[f],p)}var T0=q(null),nS=q(0);function jU(f,p){f=mu,P(nS,f),P(T0,p),mu=f|p.baseLanes}function i_(){P(nS,mu),P(T0,T0.current)}function s_(){mu=nS.current,M(T0),M(nS)}var Lo=q(null),xa=null;function Yd(f){var p=f.alternate;P(Xr,Xr.current&1),P(Lo,f),xa===null&&(p===null||T0.current!==null||p.memoizedState!==null)&&(xa=f)}function o_(f){P(Xr,Xr.current),P(Lo,f),xa===null&&(xa=f)}function BU(f){f.tag===22?(P(Xr,Xr.current),P(Lo,f),xa===null&&(xa=f)):Jd()}function Jd(){P(Xr,Xr.current),P(Lo,Lo.current)}function Do(f){M(Lo),xa===f&&(xa=null),M(Xr)}var Xr=q(0);function rS(f){for(var p=f;p!==null;){if(p.tag===13){var x=p.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||fI(x)||hI(x)))return p}else if(p.tag===19&&(p.memoizedProps.revealOrder==="forwards"||p.memoizedProps.revealOrder==="backwards"||p.memoizedProps.revealOrder==="unstable_legacy-backwards"||p.memoizedProps.revealOrder==="together")){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===f)break;for(;p.sibling===null;){if(p.return===null||p.return===f)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var au=0,an=null,Zn=null,ai=null,iS=!1,k0=!1,Gh=!1,sS=0,qv=0,N0=null,cye=0;function $r(){throw Error(r(321))}function a_(f,p){if(p===null)return!1;for(var x=0;x<p.length&&x<f.length;x++)if(!Oo(f[x],p[x]))return!1;return!0}function l_(f,p,x,E,I,j){return au=j,an=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,L.H=f===null||f.memoizedState===null?wF:S_,Gh=!1,j=x(E,I),Gh=!1,k0&&(j=FU(p,x,E,I)),UU(f),j}function UU(f){L.H=Wv;var p=Zn!==null&&Zn.next!==null;if(au=0,ai=Zn=an=null,iS=!1,qv=0,N0=null,p)throw Error(r(300));f===null||li||(f=f.dependencies,f!==null&&YE(f)&&(li=!0))}function FU(f,p,x,E){an=f;var I=0;do{if(k0&&(N0=null),qv=0,k0=!1,25<=I)throw Error(r(301));if(I+=1,ai=Zn=null,f.updateQueue!=null){var j=f.updateQueue;j.lastEffect=null,j.events=null,j.stores=null,j.memoCache!=null&&(j.memoCache.index=0)}L.H=EF,j=p(x,E)}while(k0);return j}function uye(){var f=L.H,p=f.useState()[0];return p=typeof p.then=="function"?Gv(p):p,f=f.useState()[0],(Zn!==null?Zn.memoizedState:null)!==f&&(an.flags|=1024),p}function c_(){var f=sS!==0;return sS=0,f}function u_(f,p,x){p.updateQueue=f.updateQueue,p.flags&=-2053,f.lanes&=~x}function d_(f){if(iS){for(f=f.memoizedState;f!==null;){var p=f.queue;p!==null&&(p.pending=null),f=f.next}iS=!1}au=0,ai=Zn=an=null,k0=!1,qv=sS=0,N0=null}function Vs(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ai===null?an.memoizedState=ai=f:ai=ai.next=f,ai}function Qr(){if(Zn===null){var f=an.alternate;f=f!==null?f.memoizedState:null}else f=Zn.next;var p=ai===null?an.memoizedState:ai.next;if(p!==null)ai=p,Zn=f;else{if(f===null)throw an.alternate===null?Error(r(467)):Error(r(310));Zn=f,f={memoizedState:Zn.memoizedState,baseState:Zn.baseState,baseQueue:Zn.baseQueue,queue:Zn.queue,next:null},ai===null?an.memoizedState=ai=f:ai=ai.next=f}return ai}function oS(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Gv(f){var p=qv;return qv+=1,N0===null&&(N0=[]),f=_U(N0,f,p),p=an,(ai===null?p.memoizedState:ai.next)===null&&(p=p.alternate,L.H=p===null||p.memoizedState===null?wF:S_),f}function aS(f){if(f!==null&&typeof f=="object"){if(typeof f.then=="function")return Gv(f);if(f.$$typeof===N)return Yi(f)}throw Error(r(438,String(f)))}function f_(f){var p=null,x=an.updateQueue;if(x!==null&&(p=x.memoCache),p==null){var E=an.alternate;E!==null&&(E=E.updateQueue,E!==null&&(E=E.memoCache,E!=null&&(p={data:E.data.map(function(I){return I.slice()}),index:0})))}if(p==null&&(p={data:[],index:0}),x===null&&(x=oS(),an.updateQueue=x),x.memoCache=p,x=p.data[p.index],x===void 0)for(x=p.data[p.index]=Array(f),E=0;E<f;E++)x[E]=$;return p.index++,x}function lu(f,p){return typeof p=="function"?p(f):p}function lS(f){var p=Qr();return h_(p,Zn,f)}function h_(f,p,x){var E=f.queue;if(E===null)throw Error(r(311));E.lastRenderedReducer=x;var I=f.baseQueue,j=E.pending;if(j!==null){if(I!==null){var ne=I.next;I.next=j.next,j.next=ne}p.baseQueue=I=j,E.pending=null}if(j=f.baseState,I===null)f.memoizedState=j;else{p=I.next;var le=ne=null,Ae=null,Ue=p,Ke=!1;do{var tt=Ue.lane&-536870913;if(tt!==Ue.lane?(kn&tt)===tt:(au&tt)===tt){var $e=Ue.revertLane;if($e===0)Ae!==null&&(Ae=Ae.next={lane:0,revertLane:0,gesture:null,action:Ue.action,hasEagerState:Ue.hasEagerState,eagerState:Ue.eagerState,next:null}),tt===w0&&(Ke=!0);else if((au&$e)===$e){Ue=Ue.next,$e===w0&&(Ke=!0);continue}else tt={lane:0,revertLane:Ue.revertLane,gesture:null,action:Ue.action,hasEagerState:Ue.hasEagerState,eagerState:Ue.eagerState,next:null},Ae===null?(le=Ae=tt,ne=j):Ae=Ae.next=tt,an.lanes|=$e,Zd|=$e;tt=Ue.action,Gh&&x(j,tt),j=Ue.hasEagerState?Ue.eagerState:x(j,tt)}else $e={lane:tt,revertLane:Ue.revertLane,gesture:Ue.gesture,action:Ue.action,hasEagerState:Ue.hasEagerState,eagerState:Ue.eagerState,next:null},Ae===null?(le=Ae=$e,ne=j):Ae=Ae.next=$e,an.lanes|=tt,Zd|=tt;Ue=Ue.next}while(Ue!==null&&Ue!==p);if(Ae===null?ne=j:Ae.next=le,!Oo(j,f.memoizedState)&&(li=!0,Ke&&(x=E0,x!==null)))throw x;f.memoizedState=j,f.baseState=ne,f.baseQueue=Ae,E.lastRenderedState=j}return I===null&&(E.lanes=0),[f.memoizedState,E.dispatch]}function p_(f){var p=Qr(),x=p.queue;if(x===null)throw Error(r(311));x.lastRenderedReducer=f;var E=x.dispatch,I=x.pending,j=p.memoizedState;if(I!==null){x.pending=null;var ne=I=I.next;do j=f(j,ne.action),ne=ne.next;while(ne!==I);Oo(j,p.memoizedState)||(li=!0),p.memoizedState=j,p.baseQueue===null&&(p.baseState=j),x.lastRenderedState=j}return[j,E]}function $U(f,p,x){var E=an,I=Qr(),j=Cn;if(j){if(x===void 0)throw Error(r(407));x=x()}else x=p();var ne=!Oo((Zn||I).memoizedState,x);if(ne&&(I.memoizedState=x,li=!0),I=I.queue,y_(HU.bind(null,E,I,f),[f]),I.getSnapshot!==p||ne||ai!==null&&ai.memoizedState.tag&1){if(E.flags|=2048,C0(9,{destroy:void 0},VU.bind(null,E,I,x,p),null),sr===null)throw Error(r(349));j||(au&127)!==0||zU(E,p,x)}return x}function zU(f,p,x){f.flags|=16384,f={getSnapshot:p,value:x},p=an.updateQueue,p===null?(p=oS(),an.updateQueue=p,p.stores=[f]):(x=p.stores,x===null?p.stores=[f]:x.push(f))}function VU(f,p,x,E){p.value=x,p.getSnapshot=E,qU(p)&&GU(f)}function HU(f,p,x){return x(function(){qU(p)&&GU(f)})}function qU(f){var p=f.getSnapshot;f=f.value;try{var x=p();return!Oo(f,x)}catch{return!0}}function GU(f){var p=jh(f,2);p!==null&&po(p,f,2)}function m_(f){var p=Vs();if(typeof f=="function"){var x=f;if(f=x(),Gh){de(!0);try{x()}finally{de(!1)}}}return p.memoizedState=p.baseState=f,p.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:lu,lastRenderedState:f},p}function KU(f,p,x,E){return f.baseState=x,h_(f,Zn,typeof E=="function"?E:lu)}function dye(f,p,x,E,I){if(dS(f))throw Error(r(485));if(f=p.action,f!==null){var j={payload:I,action:f,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ne){j.listeners.push(ne)}};L.T!==null?x(!0):j.isTransition=!1,E(j),x=p.pending,x===null?(j.next=p.pending=j,WU(p,j)):(j.next=x.next,p.pending=x.next=j)}}function WU(f,p){var x=p.action,E=p.payload,I=f.state;if(p.isTransition){var j=L.T,ne={};L.T=ne;try{var le=x(I,E),Ae=L.S;Ae!==null&&Ae(ne,le),YU(f,p,le)}catch(Ue){g_(f,p,Ue)}finally{j!==null&&ne.types!==null&&(j.types=ne.types),L.T=j}}else try{j=x(I,E),YU(f,p,j)}catch(Ue){g_(f,p,Ue)}}function YU(f,p,x){x!==null&&typeof x=="object"&&typeof x.then=="function"?x.then(function(E){JU(f,p,E)},function(E){return g_(f,p,E)}):JU(f,p,x)}function JU(f,p,x){p.status="fulfilled",p.value=x,XU(p),f.state=x,p=f.pending,p!==null&&(x=p.next,x===p?f.pending=null:(x=x.next,p.next=x,WU(f,x)))}function g_(f,p,x){var E=f.pending;if(f.pending=null,E!==null){E=E.next;do p.status="rejected",p.reason=x,XU(p),p=p.next;while(p!==E)}f.action=null}function XU(f){f=f.listeners;for(var p=0;p<f.length;p++)(0,f[p])()}function QU(f,p){return p}function ZU(f,p){if(Cn){var x=sr.formState;if(x!==null){e:{var E=an;if(Cn){if(vr){t:{for(var I=vr,j=ya;I.nodeType!==8;){if(!j){I=null;break t}if(I=va(I.nextSibling),I===null){I=null;break t}}j=I.data,I=j==="F!"||j==="F"?I:null}if(I){vr=va(I.nextSibling),E=I.data==="F!";break e}}Hd(E)}E=!1}E&&(p=x[0])}}return x=Vs(),x.memoizedState=x.baseState=p,E={pending:null,lanes:0,dispatch:null,lastRenderedReducer:QU,lastRenderedState:p},x.queue=E,x=xF.bind(null,an,E),E.dispatch=x,E=m_(!1),j=E_.bind(null,an,!1,E.queue),E=Vs(),I={state:p,dispatch:null,action:f,pending:null},E.queue=I,x=dye.bind(null,an,I,j,x),I.dispatch=x,E.memoizedState=f,[p,x,!1]}function eF(f){var p=Qr();return tF(p,Zn,f)}function tF(f,p,x){if(p=h_(f,p,QU)[0],f=lS(lu)[0],typeof p=="object"&&p!==null&&typeof p.then=="function")try{var E=Gv(p)}catch(ne){throw ne===S0?QE:ne}else E=p;p=Qr();var I=p.queue,j=I.dispatch;return x!==p.memoizedState&&(an.flags|=2048,C0(9,{destroy:void 0},fye.bind(null,I,x),null)),[E,j,f]}function fye(f,p){f.action=p}function nF(f){var p=Qr(),x=Zn;if(x!==null)return tF(p,x,f);Qr(),p=p.memoizedState,x=Qr();var E=x.queue.dispatch;return x.memoizedState=f,[p,E,!1]}function C0(f,p,x,E){return f={tag:f,create:x,deps:E,inst:p,next:null},p=an.updateQueue,p===null&&(p=oS(),an.updateQueue=p),x=p.lastEffect,x===null?p.lastEffect=f.next=f:(E=x.next,x.next=f,f.next=E,p.lastEffect=f),f}function rF(){return Qr().memoizedState}function cS(f,p,x,E){var I=Vs();an.flags|=f,I.memoizedState=C0(1|p,{destroy:void 0},x,E===void 0?null:E)}function uS(f,p,x,E){var I=Qr();E=E===void 0?null:E;var j=I.memoizedState.inst;Zn!==null&&E!==null&&a_(E,Zn.memoizedState.deps)?I.memoizedState=C0(p,j,x,E):(an.flags|=f,I.memoizedState=C0(1|p,j,x,E))}function iF(f,p){cS(8390656,8,f,p)}function y_(f,p){uS(2048,8,f,p)}function hye(f){an.flags|=4;var p=an.updateQueue;if(p===null)p=oS(),an.updateQueue=p,p.events=[f];else{var x=p.events;x===null?p.events=[f]:x.push(f)}}function sF(f){var p=Qr().memoizedState;return hye({ref:p,nextImpl:f}),function(){if((Hn&2)!==0)throw Error(r(440));return p.impl.apply(void 0,arguments)}}function oF(f,p){return uS(4,2,f,p)}function aF(f,p){return uS(4,4,f,p)}function lF(f,p){if(typeof p=="function"){f=f();var x=p(f);return function(){typeof x=="function"?x():p(null)}}if(p!=null)return f=f(),p.current=f,function(){p.current=null}}function cF(f,p,x){x=x!=null?x.concat([f]):null,uS(4,4,lF.bind(null,p,f),x)}function x_(){}function uF(f,p){var x=Qr();p=p===void 0?null:p;var E=x.memoizedState;return p!==null&&a_(p,E[1])?E[0]:(x.memoizedState=[f,p],f)}function dF(f,p){var x=Qr();p=p===void 0?null:p;var E=x.memoizedState;if(p!==null&&a_(p,E[1]))return E[0];if(E=f(),Gh){de(!0);try{f()}finally{de(!1)}}return x.memoizedState=[E,p],E}function v_(f,p,x){return x===void 0||(au&1073741824)!==0&&(kn&261930)===0?f.memoizedState=p:(f.memoizedState=x,f=f9(),an.lanes|=f,Zd|=f,x)}function fF(f,p,x,E){return Oo(x,p)?x:T0.current!==null?(f=v_(f,x,E),Oo(f,p)||(li=!0),f):(au&42)===0||(au&1073741824)!==0&&(kn&261930)===0?(li=!0,f.memoizedState=x):(f=f9(),an.lanes|=f,Zd|=f,p)}function hF(f,p,x,E,I){var j=V.p;V.p=j!==0&&8>j?j:8;var ne=L.T,le={};L.T=le,E_(f,!1,p,x);try{var Ae=I(),Ue=L.S;if(Ue!==null&&Ue(le,Ae),Ae!==null&&typeof Ae=="object"&&typeof Ae.then=="function"){var Ke=lye(Ae,E);Kv(f,p,Ke,Uo(f))}else Kv(f,p,E,Uo(f))}catch(tt){Kv(f,p,{then:function(){},status:"rejected",reason:tt},Uo())}finally{V.p=j,ne!==null&&le.types!==null&&(ne.types=le.types),L.T=ne}}function pye(){}function b_(f,p,x,E){if(f.tag!==5)throw Error(r(476));var I=pF(f).queue;hF(f,I,p,K,x===null?pye:function(){return mF(f),x(E)})}function pF(f){var p=f.memoizedState;if(p!==null)return p;p={memoizedState:K,baseState:K,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:lu,lastRenderedState:K},next:null};var x={};return p.next={memoizedState:x,baseState:x,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:lu,lastRenderedState:x},next:null},f.memoizedState=p,f=f.alternate,f!==null&&(f.memoizedState=p),p}function mF(f){var p=pF(f);p.next===null&&(p=f.alternate.memoizedState),Kv(f,p.next.queue,{},Uo())}function w_(){return Yi(ub)}function gF(){return Qr().memoizedState}function yF(){return Qr().memoizedState}function mye(f){for(var p=f.return;p!==null;){switch(p.tag){case 24:case 3:var x=Uo();f=Kd(x);var E=Wd(p,f,x);E!==null&&(po(E,p,x),zv(E,p,x)),p={cache:JP()},f.payload=p;return}p=p.return}}function gye(f,p,x){var E=Uo();x={lane:E,revertLane:0,gesture:null,action:x,hasEagerState:!1,eagerState:null,next:null},dS(f)?vF(p,x):(x=UP(f,p,x,E),x!==null&&(po(x,f,E),bF(x,p,E)))}function xF(f,p,x){var E=Uo();Kv(f,p,x,E)}function Kv(f,p,x,E){var I={lane:E,revertLane:0,gesture:null,action:x,hasEagerState:!1,eagerState:null,next:null};if(dS(f))vF(p,I);else{var j=f.alternate;if(f.lanes===0&&(j===null||j.lanes===0)&&(j=p.lastRenderedReducer,j!==null))try{var ne=p.lastRenderedState,le=j(ne,x);if(I.hasEagerState=!0,I.eagerState=le,Oo(le,ne))return qE(f,p,I,0),sr===null&&HE(),!1}catch{}finally{}if(x=UP(f,p,I,E),x!==null)return po(x,f,E),bF(x,p,E),!0}return!1}function E_(f,p,x,E){if(E={lane:2,revertLane:eI(),gesture:null,action:E,hasEagerState:!1,eagerState:null,next:null},dS(f)){if(p)throw Error(r(479))}else p=UP(f,x,E,2),p!==null&&po(p,f,2)}function dS(f){var p=f.alternate;return f===an||p!==null&&p===an}function vF(f,p){k0=iS=!0;var x=f.pending;x===null?p.next=p:(p.next=x.next,x.next=p),f.pending=p}function bF(f,p,x){if((x&4194048)!==0){var E=p.lanes;E&=f.pendingLanes,x|=E,p.lanes=x,_e(f,x)}}var Wv={readContext:Yi,use:aS,useCallback:$r,useContext:$r,useEffect:$r,useImperativeHandle:$r,useLayoutEffect:$r,useInsertionEffect:$r,useMemo:$r,useReducer:$r,useRef:$r,useState:$r,useDebugValue:$r,useDeferredValue:$r,useTransition:$r,useSyncExternalStore:$r,useId:$r,useHostTransitionStatus:$r,useFormState:$r,useActionState:$r,useOptimistic:$r,useMemoCache:$r,useCacheRefresh:$r};Wv.useEffectEvent=$r;var wF={readContext:Yi,use:aS,useCallback:function(f,p){return Vs().memoizedState=[f,p===void 0?null:p],f},useContext:Yi,useEffect:iF,useImperativeHandle:function(f,p,x){x=x!=null?x.concat([f]):null,cS(4194308,4,lF.bind(null,p,f),x)},useLayoutEffect:function(f,p){return cS(4194308,4,f,p)},useInsertionEffect:function(f,p){cS(4,2,f,p)},useMemo:function(f,p){var x=Vs();p=p===void 0?null:p;var E=f();if(Gh){de(!0);try{f()}finally{de(!1)}}return x.memoizedState=[E,p],E},useReducer:function(f,p,x){var E=Vs();if(x!==void 0){var I=x(p);if(Gh){de(!0);try{x(p)}finally{de(!1)}}}else I=p;return E.memoizedState=E.baseState=I,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:I},E.queue=f,f=f.dispatch=gye.bind(null,an,f),[E.memoizedState,f]},useRef:function(f){var p=Vs();return f={current:f},p.memoizedState=f},useState:function(f){f=m_(f);var p=f.queue,x=xF.bind(null,an,p);return p.dispatch=x,[f.memoizedState,x]},useDebugValue:x_,useDeferredValue:function(f,p){var x=Vs();return v_(x,f,p)},useTransition:function(){var f=m_(!1);return f=hF.bind(null,an,f.queue,!0,!1),Vs().memoizedState=f,[!1,f]},useSyncExternalStore:function(f,p,x){var E=an,I=Vs();if(Cn){if(x===void 0)throw Error(r(407));x=x()}else{if(x=p(),sr===null)throw Error(r(349));(kn&127)!==0||zU(E,p,x)}I.memoizedState=x;var j={value:x,getSnapshot:p};return I.queue=j,iF(HU.bind(null,E,j,f),[f]),E.flags|=2048,C0(9,{destroy:void 0},VU.bind(null,E,j,x,p),null),x},useId:function(){var f=Vs(),p=sr.identifierPrefix;if(Cn){var x=tc,E=ec;x=(E&~(1<<32-ye(E)-1)).toString(32)+x,p="_"+p+"R_"+x,x=sS++,0<x&&(p+="H"+x.toString(32)),p+="_"}else x=cye++,p="_"+p+"r_"+x.toString(32)+"_";return f.memoizedState=p},useHostTransitionStatus:w_,useFormState:ZU,useActionState:ZU,useOptimistic:function(f){var p=Vs();p.memoizedState=p.baseState=f;var x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return p.queue=x,p=E_.bind(null,an,!0,x),x.dispatch=p,[f,p]},useMemoCache:f_,useCacheRefresh:function(){return Vs().memoizedState=mye.bind(null,an)},useEffectEvent:function(f){var p=Vs(),x={impl:f};return p.memoizedState=x,function(){if((Hn&2)!==0)throw Error(r(440));return x.impl.apply(void 0,arguments)}}},S_={readContext:Yi,use:aS,useCallback:uF,useContext:Yi,useEffect:y_,useImperativeHandle:cF,useInsertionEffect:oF,useLayoutEffect:aF,useMemo:dF,useReducer:lS,useRef:rF,useState:function(){return lS(lu)},useDebugValue:x_,useDeferredValue:function(f,p){var x=Qr();return fF(x,Zn.memoizedState,f,p)},useTransition:function(){var f=lS(lu)[0],p=Qr().memoizedState;return[typeof f=="boolean"?f:Gv(f),p]},useSyncExternalStore:$U,useId:gF,useHostTransitionStatus:w_,useFormState:eF,useActionState:eF,useOptimistic:function(f,p){var x=Qr();return KU(x,Zn,f,p)},useMemoCache:f_,useCacheRefresh:yF};S_.useEffectEvent=sF;var EF={readContext:Yi,use:aS,useCallback:uF,useContext:Yi,useEffect:y_,useImperativeHandle:cF,useInsertionEffect:oF,useLayoutEffect:aF,useMemo:dF,useReducer:p_,useRef:rF,useState:function(){return p_(lu)},useDebugValue:x_,useDeferredValue:function(f,p){var x=Qr();return Zn===null?v_(x,f,p):fF(x,Zn.memoizedState,f,p)},useTransition:function(){var f=p_(lu)[0],p=Qr().memoizedState;return[typeof f=="boolean"?f:Gv(f),p]},useSyncExternalStore:$U,useId:gF,useHostTransitionStatus:w_,useFormState:nF,useActionState:nF,useOptimistic:function(f,p){var x=Qr();return Zn!==null?KU(x,Zn,f,p):(x.baseState=f,[f,x.queue.dispatch])},useMemoCache:f_,useCacheRefresh:yF};EF.useEffectEvent=sF;function A_(f,p,x,E){p=f.memoizedState,x=x(E,p),x=x==null?p:h({},p,x),f.memoizedState=x,f.lanes===0&&(f.updateQueue.baseState=x)}var T_={enqueueSetState:function(f,p,x){f=f._reactInternals;var E=Uo(),I=Kd(E);I.payload=p,x!=null&&(I.callback=x),p=Wd(f,I,E),p!==null&&(po(p,f,E),zv(p,f,E))},enqueueReplaceState:function(f,p,x){f=f._reactInternals;var E=Uo(),I=Kd(E);I.tag=1,I.payload=p,x!=null&&(I.callback=x),p=Wd(f,I,E),p!==null&&(po(p,f,E),zv(p,f,E))},enqueueForceUpdate:function(f,p){f=f._reactInternals;var x=Uo(),E=Kd(x);E.tag=2,p!=null&&(E.callback=p),p=Wd(f,E,x),p!==null&&(po(p,f,x),zv(p,f,x))}};function SF(f,p,x,E,I,j,ne){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(E,j,ne):p.prototype&&p.prototype.isPureReactComponent?!Mv(x,E)||!Mv(I,j):!0}function AF(f,p,x,E){f=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(x,E),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(x,E),p.state!==f&&T_.enqueueReplaceState(p,p.state,null)}function Kh(f,p){var x=p;if("ref"in p){x={};for(var E in p)E!=="ref"&&(x[E]=p[E])}if(f=f.defaultProps){x===p&&(x=h({},x));for(var I in f)x[I]===void 0&&(x[I]=f[I])}return x}function TF(f){VE(f)}function kF(f){console.error(f)}function NF(f){VE(f)}function fS(f,p){try{var x=f.onUncaughtError;x(p.value,{componentStack:p.stack})}catch(E){setTimeout(function(){throw E})}}function CF(f,p,x){try{var E=f.onCaughtError;E(x.value,{componentStack:x.stack,errorBoundary:p.tag===1?p.stateNode:null})}catch(I){setTimeout(function(){throw I})}}function k_(f,p,x){return x=Kd(x),x.tag=3,x.payload={element:null},x.callback=function(){fS(f,p)},x}function PF(f){return f=Kd(f),f.tag=3,f}function _F(f,p,x,E){var I=x.type.getDerivedStateFromError;if(typeof I=="function"){var j=E.value;f.payload=function(){return I(j)},f.callback=function(){CF(p,x,E)}}var ne=x.stateNode;ne!==null&&typeof ne.componentDidCatch=="function"&&(f.callback=function(){CF(p,x,E),typeof I!="function"&&(ef===null?ef=new Set([this]):ef.add(this));var le=E.stack;this.componentDidCatch(E.value,{componentStack:le!==null?le:""})})}function yye(f,p,x,E,I){if(x.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){if(p=x.alternate,p!==null&&b0(p,x,I,!0),x=Lo.current,x!==null){switch(x.tag){case 31:case 13:return xa===null?AS():x.alternate===null&&zr===0&&(zr=3),x.flags&=-257,x.flags|=65536,x.lanes=I,E===ZE?x.flags|=16384:(p=x.updateQueue,p===null?x.updateQueue=new Set([E]):p.add(E),X_(f,E,I)),!1;case 22:return x.flags|=65536,E===ZE?x.flags|=16384:(p=x.updateQueue,p===null?(p={transitions:null,markerInstances:null,retryQueue:new Set([E])},x.updateQueue=p):(x=p.retryQueue,x===null?p.retryQueue=new Set([E]):x.add(E)),X_(f,E,I)),!1}throw Error(r(435,x.tag))}return X_(f,E,I),AS(),!1}if(Cn)return p=Lo.current,p!==null?((p.flags&65536)===0&&(p.flags|=256),p.flags|=65536,p.lanes=I,E!==qP&&(f=Error(r(422),{cause:E}),jv(pa(f,x)))):(E!==qP&&(p=Error(r(423),{cause:E}),jv(pa(p,x))),f=f.current.alternate,f.flags|=65536,I&=-I,f.lanes|=I,E=pa(E,x),I=k_(f.stateNode,E,I),n_(f,I),zr!==4&&(zr=2)),!1;var j=Error(r(520),{cause:E});if(j=pa(j,x),nb===null?nb=[j]:nb.push(j),zr!==4&&(zr=2),p===null)return!0;E=pa(E,x),x=p;do{switch(x.tag){case 3:return x.flags|=65536,f=I&-I,x.lanes|=f,f=k_(x.stateNode,E,f),n_(x,f),!1;case 1:if(p=x.type,j=x.stateNode,(x.flags&128)===0&&(typeof p.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(ef===null||!ef.has(j))))return x.flags|=65536,I&=-I,x.lanes|=I,I=PF(I),_F(I,f,x,E),n_(x,I),!1}x=x.return}while(x!==null);return!1}var N_=Error(r(461)),li=!1;function Ji(f,p,x,E){p.child=f===null?MU(p,null,x,E):qh(p,f.child,x,E)}function IF(f,p,x,E,I){x=x.render;var j=p.ref;if("ref"in E){var ne={};for(var le in E)le!=="ref"&&(ne[le]=E[le])}else ne=E;return $h(p),E=l_(f,p,x,ne,j,I),le=c_(),f!==null&&!li?(u_(f,p,I),cu(f,p,I)):(Cn&&le&&VP(p),p.flags|=1,Ji(f,p,E,I),p.child)}function RF(f,p,x,E,I){if(f===null){var j=x.type;return typeof j=="function"&&!FP(j)&&j.defaultProps===void 0&&x.compare===null?(p.tag=15,p.type=j,OF(f,p,j,E,I)):(f=KE(x.type,null,E,p,p.mode,I),f.ref=p.ref,f.return=p,p.child=f)}if(j=f.child,!L_(f,I)){var ne=j.memoizedProps;if(x=x.compare,x=x!==null?x:Mv,x(ne,E)&&f.ref===p.ref)return cu(f,p,I)}return p.flags|=1,f=ru(j,E),f.ref=p.ref,f.return=p,p.child=f}function OF(f,p,x,E,I){if(f!==null){var j=f.memoizedProps;if(Mv(j,E)&&f.ref===p.ref)if(li=!1,p.pendingProps=E=j,L_(f,I))(f.flags&131072)!==0&&(li=!0);else return p.lanes=f.lanes,cu(f,p,I)}return C_(f,p,x,E,I)}function MF(f,p,x,E){var I=E.children,j=f!==null?f.memoizedState:null;if(f===null&&p.stateNode===null&&(p.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),E.mode==="hidden"){if((p.flags&128)!==0){if(j=j!==null?j.baseLanes|x:x,f!==null){for(E=p.child=f.child,I=0;E!==null;)I=I|E.lanes|E.childLanes,E=E.sibling;E=I&~j}else E=0,p.child=null;return LF(f,p,j,x,E)}if((x&536870912)!==0)p.memoizedState={baseLanes:0,cachePool:null},f!==null&&XE(p,j!==null?j.cachePool:null),j!==null?jU(p,j):i_(),BU(p);else return E=p.lanes=536870912,LF(f,p,j!==null?j.baseLanes|x:x,x,E)}else j!==null?(XE(p,j.cachePool),jU(p,j),Jd(),p.memoizedState=null):(f!==null&&XE(p,null),i_(),Jd());return Ji(f,p,I,x),p.child}function Yv(f,p){return f!==null&&f.tag===22||p.stateNode!==null||(p.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),p.sibling}function LF(f,p,x,E,I){var j=QP();return j=j===null?null:{parent:oi._currentValue,pool:j},p.memoizedState={baseLanes:x,cachePool:j},f!==null&&XE(p,null),i_(),BU(p),f!==null&&b0(f,p,E,!0),p.childLanes=I,null}function hS(f,p){return p=mS({mode:p.mode,children:p.children},f.mode),p.ref=f.ref,f.child=p,p.return=f,p}function DF(f,p,x){return qh(p,f.child,null,x),f=hS(p,p.pendingProps),f.flags|=2,Do(p),p.memoizedState=null,f}function xye(f,p,x){var E=p.pendingProps,I=(p.flags&128)!==0;if(p.flags&=-129,f===null){if(Cn){if(E.mode==="hidden")return f=hS(p,E),p.lanes=536870912,Yv(null,f);if(o_(p),(f=vr)?(f=W9(f,ya),f=f!==null&&f.data==="&"?f:null,f!==null&&(p.memoizedState={dehydrated:f,treeContext:zd!==null?{id:ec,overflow:tc}:null,retryLane:536870912,hydrationErrors:null},x=vU(f),x.return=p,p.child=x,Wi=p,vr=null)):f=null,f===null)throw Hd(p);return p.lanes=536870912,null}return hS(p,E)}var j=f.memoizedState;if(j!==null){var ne=j.dehydrated;if(o_(p),I)if(p.flags&256)p.flags&=-257,p=DF(f,p,x);else if(p.memoizedState!==null)p.child=f.child,p.flags|=128,p=null;else throw Error(r(558));else if(li||b0(f,p,x,!1),I=(x&f.childLanes)!==0,li||I){if(E=sr,E!==null&&(ne=Oe(E,x),ne!==0&&ne!==j.retryLane))throw j.retryLane=ne,jh(f,ne),po(E,f,ne),N_;AS(),p=DF(f,p,x)}else f=j.treeContext,vr=va(ne.nextSibling),Wi=p,Cn=!0,Vd=null,ya=!1,f!==null&&EU(p,f),p=hS(p,E),p.flags|=4096;return p}return f=ru(f.child,{mode:E.mode,children:E.children}),f.ref=p.ref,p.child=f,f.return=p,f}function pS(f,p){var x=p.ref;if(x===null)f!==null&&f.ref!==null&&(p.flags|=4194816);else{if(typeof x!="function"&&typeof x!="object")throw Error(r(284));(f===null||f.ref!==x)&&(p.flags|=4194816)}}function C_(f,p,x,E,I){return $h(p),x=l_(f,p,x,E,void 0,I),E=c_(),f!==null&&!li?(u_(f,p,I),cu(f,p,I)):(Cn&&E&&VP(p),p.flags|=1,Ji(f,p,x,I),p.child)}function jF(f,p,x,E,I,j){return $h(p),p.updateQueue=null,x=FU(p,E,x,I),UU(f),E=c_(),f!==null&&!li?(u_(f,p,j),cu(f,p,j)):(Cn&&E&&VP(p),p.flags|=1,Ji(f,p,x,j),p.child)}function BF(f,p,x,E,I){if($h(p),p.stateNode===null){var j=g0,ne=x.contextType;typeof ne=="object"&&ne!==null&&(j=Yi(ne)),j=new x(E,j),p.memoizedState=j.state!==null&&j.state!==void 0?j.state:null,j.updater=T_,p.stateNode=j,j._reactInternals=p,j=p.stateNode,j.props=E,j.state=p.memoizedState,j.refs={},e_(p),ne=x.contextType,j.context=typeof ne=="object"&&ne!==null?Yi(ne):g0,j.state=p.memoizedState,ne=x.getDerivedStateFromProps,typeof ne=="function"&&(A_(p,x,ne,E),j.state=p.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof j.getSnapshotBeforeUpdate=="function"||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(ne=j.state,typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount(),ne!==j.state&&T_.enqueueReplaceState(j,j.state,null),Hv(p,E,j,I),Vv(),j.state=p.memoizedState),typeof j.componentDidMount=="function"&&(p.flags|=4194308),E=!0}else if(f===null){j=p.stateNode;var le=p.memoizedProps,Ae=Kh(x,le);j.props=Ae;var Ue=j.context,Ke=x.contextType;ne=g0,typeof Ke=="object"&&Ke!==null&&(ne=Yi(Ke));var tt=x.getDerivedStateFromProps;Ke=typeof tt=="function"||typeof j.getSnapshotBeforeUpdate=="function",le=p.pendingProps!==le,Ke||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(le||Ue!==ne)&&AF(p,j,E,ne),Gd=!1;var $e=p.memoizedState;j.state=$e,Hv(p,E,j,I),Vv(),Ue=p.memoizedState,le||$e!==Ue||Gd?(typeof tt=="function"&&(A_(p,x,tt,E),Ue=p.memoizedState),(Ae=Gd||SF(p,x,Ae,E,$e,Ue,ne))?(Ke||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount()),typeof j.componentDidMount=="function"&&(p.flags|=4194308)):(typeof j.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=E,p.memoizedState=Ue),j.props=E,j.state=Ue,j.context=ne,E=Ae):(typeof j.componentDidMount=="function"&&(p.flags|=4194308),E=!1)}else{j=p.stateNode,t_(f,p),ne=p.memoizedProps,Ke=Kh(x,ne),j.props=Ke,tt=p.pendingProps,$e=j.context,Ue=x.contextType,Ae=g0,typeof Ue=="object"&&Ue!==null&&(Ae=Yi(Ue)),le=x.getDerivedStateFromProps,(Ue=typeof le=="function"||typeof j.getSnapshotBeforeUpdate=="function")||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(ne!==tt||$e!==Ae)&&AF(p,j,E,Ae),Gd=!1,$e=p.memoizedState,j.state=$e,Hv(p,E,j,I),Vv();var qe=p.memoizedState;ne!==tt||$e!==qe||Gd||f!==null&&f.dependencies!==null&&YE(f.dependencies)?(typeof le=="function"&&(A_(p,x,le,E),qe=p.memoizedState),(Ke=Gd||SF(p,x,Ke,E,$e,qe,Ae)||f!==null&&f.dependencies!==null&&YE(f.dependencies))?(Ue||typeof j.UNSAFE_componentWillUpdate!="function"&&typeof j.componentWillUpdate!="function"||(typeof j.componentWillUpdate=="function"&&j.componentWillUpdate(E,qe,Ae),typeof j.UNSAFE_componentWillUpdate=="function"&&j.UNSAFE_componentWillUpdate(E,qe,Ae)),typeof j.componentDidUpdate=="function"&&(p.flags|=4),typeof j.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof j.componentDidUpdate!="function"||ne===f.memoizedProps&&$e===f.memoizedState||(p.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||ne===f.memoizedProps&&$e===f.memoizedState||(p.flags|=1024),p.memoizedProps=E,p.memoizedState=qe),j.props=E,j.state=qe,j.context=Ae,E=Ke):(typeof j.componentDidUpdate!="function"||ne===f.memoizedProps&&$e===f.memoizedState||(p.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||ne===f.memoizedProps&&$e===f.memoizedState||(p.flags|=1024),E=!1)}return j=E,pS(f,p),E=(p.flags&128)!==0,j||E?(j=p.stateNode,x=E&&typeof x.getDerivedStateFromError!="function"?null:j.render(),p.flags|=1,f!==null&&E?(p.child=qh(p,f.child,null,I),p.child=qh(p,null,x,I)):Ji(f,p,x,I),p.memoizedState=j.state,f=p.child):f=cu(f,p,I),f}function UF(f,p,x,E){return Uh(),p.flags|=256,Ji(f,p,x,E),p.child}var P_={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function __(f){return{baseLanes:f,cachePool:CU()}}function I_(f,p,x){return f=f!==null?f.childLanes&~x:0,p&&(f|=Bo),f}function FF(f,p,x){var E=p.pendingProps,I=!1,j=(p.flags&128)!==0,ne;if((ne=j)||(ne=f!==null&&f.memoizedState===null?!1:(Xr.current&2)!==0),ne&&(I=!0,p.flags&=-129),ne=(p.flags&32)!==0,p.flags&=-33,f===null){if(Cn){if(I?Yd(p):Jd(),(f=vr)?(f=W9(f,ya),f=f!==null&&f.data!=="&"?f:null,f!==null&&(p.memoizedState={dehydrated:f,treeContext:zd!==null?{id:ec,overflow:tc}:null,retryLane:536870912,hydrationErrors:null},x=vU(f),x.return=p,p.child=x,Wi=p,vr=null)):f=null,f===null)throw Hd(p);return hI(f)?p.lanes=32:p.lanes=536870912,null}var le=E.children;return E=E.fallback,I?(Jd(),I=p.mode,le=mS({mode:"hidden",children:le},I),E=Bh(E,I,x,null),le.return=p,E.return=p,le.sibling=E,p.child=le,E=p.child,E.memoizedState=__(x),E.childLanes=I_(f,ne,x),p.memoizedState=P_,Yv(null,E)):(Yd(p),R_(p,le))}var Ae=f.memoizedState;if(Ae!==null&&(le=Ae.dehydrated,le!==null)){if(j)p.flags&256?(Yd(p),p.flags&=-257,p=O_(f,p,x)):p.memoizedState!==null?(Jd(),p.child=f.child,p.flags|=128,p=null):(Jd(),le=E.fallback,I=p.mode,E=mS({mode:"visible",children:E.children},I),le=Bh(le,I,x,null),le.flags|=2,E.return=p,le.return=p,E.sibling=le,p.child=E,qh(p,f.child,null,x),E=p.child,E.memoizedState=__(x),E.childLanes=I_(f,ne,x),p.memoizedState=P_,p=Yv(null,E));else if(Yd(p),hI(le)){if(ne=le.nextSibling&&le.nextSibling.dataset,ne)var Ue=ne.dgst;ne=Ue,E=Error(r(419)),E.stack="",E.digest=ne,jv({value:E,source:null,stack:null}),p=O_(f,p,x)}else if(li||b0(f,p,x,!1),ne=(x&f.childLanes)!==0,li||ne){if(ne=sr,ne!==null&&(E=Oe(ne,x),E!==0&&E!==Ae.retryLane))throw Ae.retryLane=E,jh(f,E),po(ne,f,E),N_;fI(le)||AS(),p=O_(f,p,x)}else fI(le)?(p.flags|=192,p.child=f.child,p=null):(f=Ae.treeContext,vr=va(le.nextSibling),Wi=p,Cn=!0,Vd=null,ya=!1,f!==null&&EU(p,f),p=R_(p,E.children),p.flags|=4096);return p}return I?(Jd(),le=E.fallback,I=p.mode,Ae=f.child,Ue=Ae.sibling,E=ru(Ae,{mode:"hidden",children:E.children}),E.subtreeFlags=Ae.subtreeFlags&65011712,Ue!==null?le=ru(Ue,le):(le=Bh(le,I,x,null),le.flags|=2),le.return=p,E.return=p,E.sibling=le,p.child=E,Yv(null,E),E=p.child,le=f.child.memoizedState,le===null?le=__(x):(I=le.cachePool,I!==null?(Ae=oi._currentValue,I=I.parent!==Ae?{parent:Ae,pool:Ae}:I):I=CU(),le={baseLanes:le.baseLanes|x,cachePool:I}),E.memoizedState=le,E.childLanes=I_(f,ne,x),p.memoizedState=P_,Yv(f.child,E)):(Yd(p),x=f.child,f=x.sibling,x=ru(x,{mode:"visible",children:E.children}),x.return=p,x.sibling=null,f!==null&&(ne=p.deletions,ne===null?(p.deletions=[f],p.flags|=16):ne.push(f)),p.child=x,p.memoizedState=null,x)}function R_(f,p){return p=mS({mode:"visible",children:p},f.mode),p.return=f,f.child=p}function mS(f,p){return f=Mo(22,f,null,p),f.lanes=0,f}function O_(f,p,x){return qh(p,f.child,null,x),f=R_(p,p.pendingProps.children),f.flags|=2,p.memoizedState=null,f}function $F(f,p,x){f.lanes|=p;var E=f.alternate;E!==null&&(E.lanes|=p),WP(f.return,p,x)}function M_(f,p,x,E,I,j){var ne=f.memoizedState;ne===null?f.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:E,tail:x,tailMode:I,treeForkCount:j}:(ne.isBackwards=p,ne.rendering=null,ne.renderingStartTime=0,ne.last=E,ne.tail=x,ne.tailMode=I,ne.treeForkCount=j)}function zF(f,p,x){var E=p.pendingProps,I=E.revealOrder,j=E.tail;E=E.children;var ne=Xr.current,le=(ne&2)!==0;if(le?(ne=ne&1|2,p.flags|=128):ne&=1,P(Xr,ne),Ji(f,p,E,x),E=Cn?Dv:0,!le&&f!==null&&(f.flags&128)!==0)e:for(f=p.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&$F(f,x,p);else if(f.tag===19)$F(f,x,p);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===p)break e;for(;f.sibling===null;){if(f.return===null||f.return===p)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}switch(I){case"forwards":for(x=p.child,I=null;x!==null;)f=x.alternate,f!==null&&rS(f)===null&&(I=x),x=x.sibling;x=I,x===null?(I=p.child,p.child=null):(I=x.sibling,x.sibling=null),M_(p,!1,I,x,j,E);break;case"backwards":case"unstable_legacy-backwards":for(x=null,I=p.child,p.child=null;I!==null;){if(f=I.alternate,f!==null&&rS(f)===null){p.child=I;break}f=I.sibling,I.sibling=x,x=I,I=f}M_(p,!0,x,null,j,E);break;case"together":M_(p,!1,null,null,void 0,E);break;default:p.memoizedState=null}return p.child}function cu(f,p,x){if(f!==null&&(p.dependencies=f.dependencies),Zd|=p.lanes,(x&p.childLanes)===0)if(f!==null){if(b0(f,p,x,!1),(x&p.childLanes)===0)return null}else return null;if(f!==null&&p.child!==f.child)throw Error(r(153));if(p.child!==null){for(f=p.child,x=ru(f,f.pendingProps),p.child=x,x.return=p;f.sibling!==null;)f=f.sibling,x=x.sibling=ru(f,f.pendingProps),x.return=p;x.sibling=null}return p.child}function L_(f,p){return(f.lanes&p)!==0?!0:(f=f.dependencies,!!(f!==null&&YE(f)))}function vye(f,p,x){switch(p.tag){case 3:me(p,p.stateNode.containerInfo),qd(p,oi,f.memoizedState.cache),Uh();break;case 27:case 5:ve(p);break;case 4:me(p,p.stateNode.containerInfo);break;case 10:qd(p,p.type,p.memoizedProps.value);break;case 31:if(p.memoizedState!==null)return p.flags|=128,o_(p),null;break;case 13:var E=p.memoizedState;if(E!==null)return E.dehydrated!==null?(Yd(p),p.flags|=128,null):(x&p.child.childLanes)!==0?FF(f,p,x):(Yd(p),f=cu(f,p,x),f!==null?f.sibling:null);Yd(p);break;case 19:var I=(f.flags&128)!==0;if(E=(x&p.childLanes)!==0,E||(b0(f,p,x,!1),E=(x&p.childLanes)!==0),I){if(E)return zF(f,p,x);p.flags|=128}if(I=p.memoizedState,I!==null&&(I.rendering=null,I.tail=null,I.lastEffect=null),P(Xr,Xr.current),E)break;return null;case 22:return p.lanes=0,MF(f,p,x,p.pendingProps);case 24:qd(p,oi,f.memoizedState.cache)}return cu(f,p,x)}function VF(f,p,x){if(f!==null)if(f.memoizedProps!==p.pendingProps)li=!0;else{if(!L_(f,x)&&(p.flags&128)===0)return li=!1,vye(f,p,x);li=(f.flags&131072)!==0}else li=!1,Cn&&(p.flags&1048576)!==0&&wU(p,Dv,p.index);switch(p.lanes=0,p.tag){case 16:e:{var E=p.pendingProps;if(f=Vh(p.elementType),p.type=f,typeof f=="function")FP(f)?(E=Kh(f,E),p.tag=1,p=BF(null,p,f,E,x)):(p.tag=0,p=C_(null,p,f,E,x));else{if(f!=null){var I=f.$$typeof;if(I===R){p.tag=11,p=IF(null,p,f,E,x);break e}else if(I===B){p.tag=14,p=RF(null,p,f,E,x);break e}}throw p=T(f)||f,Error(r(306,p,""))}}return p;case 0:return C_(f,p,p.type,p.pendingProps,x);case 1:return E=p.type,I=Kh(E,p.pendingProps),BF(f,p,E,I,x);case 3:e:{if(me(p,p.stateNode.containerInfo),f===null)throw Error(r(387));E=p.pendingProps;var j=p.memoizedState;I=j.element,t_(f,p),Hv(p,E,null,x);var ne=p.memoizedState;if(E=ne.cache,qd(p,oi,E),E!==j.cache&&YP(p,[oi],x,!0),Vv(),E=ne.element,j.isDehydrated)if(j={element:E,isDehydrated:!1,cache:ne.cache},p.updateQueue.baseState=j,p.memoizedState=j,p.flags&256){p=UF(f,p,E,x);break e}else if(E!==I){I=pa(Error(r(424)),p),jv(I),p=UF(f,p,E,x);break e}else{switch(f=p.stateNode.containerInfo,f.nodeType){case 9:f=f.body;break;default:f=f.nodeName==="HTML"?f.ownerDocument.body:f}for(vr=va(f.firstChild),Wi=p,Cn=!0,Vd=null,ya=!0,x=MU(p,null,E,x),p.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling}else{if(Uh(),E===I){p=cu(f,p,x);break e}Ji(f,p,E,x)}p=p.child}return p;case 26:return pS(f,p),f===null?(x=e$(p.type,null,p.pendingProps,null))?p.memoizedState=x:Cn||(x=p.type,f=p.pendingProps,E=IS(se.current).createElement(x),E[At]=p,E[bn]=f,Xi(E,x,f),xr(E),p.stateNode=E):p.memoizedState=e$(p.type,f.memoizedProps,p.pendingProps,f.memoizedState),null;case 27:return ve(p),f===null&&Cn&&(E=p.stateNode=X9(p.type,p.pendingProps,se.current),Wi=p,ya=!0,I=vr,sf(p.type)?(pI=I,vr=va(E.firstChild)):vr=I),Ji(f,p,p.pendingProps.children,x),pS(f,p),f===null&&(p.flags|=4194304),p.child;case 5:return f===null&&Cn&&((I=E=vr)&&(E=Yye(E,p.type,p.pendingProps,ya),E!==null?(p.stateNode=E,Wi=p,vr=va(E.firstChild),ya=!1,I=!0):I=!1),I||Hd(p)),ve(p),I=p.type,j=p.pendingProps,ne=f!==null?f.memoizedProps:null,E=j.children,cI(I,j)?E=null:ne!==null&&cI(I,ne)&&(p.flags|=32),p.memoizedState!==null&&(I=l_(f,p,uye,null,null,x),ub._currentValue=I),pS(f,p),Ji(f,p,E,x),p.child;case 6:return f===null&&Cn&&((f=x=vr)&&(x=Jye(x,p.pendingProps,ya),x!==null?(p.stateNode=x,Wi=p,vr=null,f=!0):f=!1),f||Hd(p)),null;case 13:return FF(f,p,x);case 4:return me(p,p.stateNode.containerInfo),E=p.pendingProps,f===null?p.child=qh(p,null,E,x):Ji(f,p,E,x),p.child;case 11:return IF(f,p,p.type,p.pendingProps,x);case 7:return Ji(f,p,p.pendingProps,x),p.child;case 8:return Ji(f,p,p.pendingProps.children,x),p.child;case 12:return Ji(f,p,p.pendingProps.children,x),p.child;case 10:return E=p.pendingProps,qd(p,p.type,E.value),Ji(f,p,E.children,x),p.child;case 9:return I=p.type._context,E=p.pendingProps.children,$h(p),I=Yi(I),E=E(I),p.flags|=1,Ji(f,p,E,x),p.child;case 14:return RF(f,p,p.type,p.pendingProps,x);case 15:return OF(f,p,p.type,p.pendingProps,x);case 19:return zF(f,p,x);case 31:return xye(f,p,x);case 22:return MF(f,p,x,p.pendingProps);case 24:return $h(p),E=Yi(oi),f===null?(I=QP(),I===null&&(I=sr,j=JP(),I.pooledCache=j,j.refCount++,j!==null&&(I.pooledCacheLanes|=x),I=j),p.memoizedState={parent:E,cache:I},e_(p),qd(p,oi,I)):((f.lanes&x)!==0&&(t_(f,p),Hv(p,null,null,x),Vv()),I=f.memoizedState,j=p.memoizedState,I.parent!==E?(I={parent:E,cache:E},p.memoizedState=I,p.lanes===0&&(p.memoizedState=p.updateQueue.baseState=I),qd(p,oi,E)):(E=j.cache,qd(p,oi,E),E!==I.cache&&YP(p,[oi],x,!0))),Ji(f,p,p.pendingProps.children,x),p.child;case 29:throw p.pendingProps}throw Error(r(156,p.tag))}function uu(f){f.flags|=4}function D_(f,p,x,E,I){if((p=(f.mode&32)!==0)&&(p=!1),p){if(f.flags|=16777216,(I&335544128)===I)if(f.stateNode.complete)f.flags|=8192;else if(g9())f.flags|=8192;else throw Hh=ZE,ZP}else f.flags&=-16777217}function HF(f,p){if(p.type!=="stylesheet"||(p.state.loading&4)!==0)f.flags&=-16777217;else if(f.flags|=16777216,!s$(p))if(g9())f.flags|=8192;else throw Hh=ZE,ZP}function gS(f,p){p!==null&&(f.flags|=4),f.flags&16384&&(p=f.tag!==22?Vn():536870912,f.lanes|=p,R0|=p)}function Jv(f,p){if(!Cn)switch(f.tailMode){case"hidden":p=f.tail;for(var x=null;p!==null;)p.alternate!==null&&(x=p),p=p.sibling;x===null?f.tail=null:x.sibling=null;break;case"collapsed":x=f.tail;for(var E=null;x!==null;)x.alternate!==null&&(E=x),x=x.sibling;E===null?p||f.tail===null?f.tail=null:f.tail.sibling=null:E.sibling=null}}function br(f){var p=f.alternate!==null&&f.alternate.child===f.child,x=0,E=0;if(p)for(var I=f.child;I!==null;)x|=I.lanes|I.childLanes,E|=I.subtreeFlags&65011712,E|=I.flags&65011712,I.return=f,I=I.sibling;else for(I=f.child;I!==null;)x|=I.lanes|I.childLanes,E|=I.subtreeFlags,E|=I.flags,I.return=f,I=I.sibling;return f.subtreeFlags|=E,f.childLanes=x,p}function bye(f,p,x){var E=p.pendingProps;switch(HP(p),p.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return br(p),null;case 1:return br(p),null;case 3:return x=p.stateNode,E=null,f!==null&&(E=f.memoizedState.cache),p.memoizedState.cache!==E&&(p.flags|=2048),ou(oi),ce(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(f===null||f.child===null)&&(v0(p)?uu(p):f===null||f.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,GP())),br(p),null;case 26:var I=p.type,j=p.memoizedState;return f===null?(uu(p),j!==null?(br(p),HF(p,j)):(br(p),D_(p,I,null,E,x))):j?j!==f.memoizedState?(uu(p),br(p),HF(p,j)):(br(p),p.flags&=-16777217):(f=f.memoizedProps,f!==E&&uu(p),br(p),D_(p,I,f,E,x)),null;case 27:if(Ne(p),x=se.current,I=p.type,f!==null&&p.stateNode!=null)f.memoizedProps!==E&&uu(p);else{if(!E){if(p.stateNode===null)throw Error(r(166));return br(p),null}f=Y.current,v0(p)?SU(p):(f=X9(I,E,x),p.stateNode=f,uu(p))}return br(p),null;case 5:if(Ne(p),I=p.type,f!==null&&p.stateNode!=null)f.memoizedProps!==E&&uu(p);else{if(!E){if(p.stateNode===null)throw Error(r(166));return br(p),null}if(j=Y.current,v0(p))SU(p);else{var ne=IS(se.current);switch(j){case 1:j=ne.createElementNS("http://www.w3.org/2000/svg",I);break;case 2:j=ne.createElementNS("http://www.w3.org/1998/Math/MathML",I);break;default:switch(I){case"svg":j=ne.createElementNS("http://www.w3.org/2000/svg",I);break;case"math":j=ne.createElementNS("http://www.w3.org/1998/Math/MathML",I);break;case"script":j=ne.createElement("div"),j.innerHTML="<script><\/script>",j=j.removeChild(j.firstChild);break;case"select":j=typeof E.is=="string"?ne.createElement("select",{is:E.is}):ne.createElement("select"),E.multiple?j.multiple=!0:E.size&&(j.size=E.size);break;default:j=typeof E.is=="string"?ne.createElement(I,{is:E.is}):ne.createElement(I)}}j[At]=p,j[bn]=E;e:for(ne=p.child;ne!==null;){if(ne.tag===5||ne.tag===6)j.appendChild(ne.stateNode);else if(ne.tag!==4&&ne.tag!==27&&ne.child!==null){ne.child.return=ne,ne=ne.child;continue}if(ne===p)break e;for(;ne.sibling===null;){if(ne.return===null||ne.return===p)break e;ne=ne.return}ne.sibling.return=ne.return,ne=ne.sibling}p.stateNode=j;e:switch(Xi(j,I,E),I){case"button":case"input":case"select":case"textarea":E=!!E.autoFocus;break e;case"img":E=!0;break e;default:E=!1}E&&uu(p)}}return br(p),D_(p,p.type,f===null?null:f.memoizedProps,p.pendingProps,x),null;case 6:if(f&&p.stateNode!=null)f.memoizedProps!==E&&uu(p);else{if(typeof E!="string"&&p.stateNode===null)throw Error(r(166));if(f=se.current,v0(p)){if(f=p.stateNode,x=p.memoizedProps,E=null,I=Wi,I!==null)switch(I.tag){case 27:case 5:E=I.memoizedProps}f[At]=p,f=!!(f.nodeValue===x||E!==null&&E.suppressHydrationWarning===!0||F9(f.nodeValue,x)),f||Hd(p,!0)}else f=IS(f).createTextNode(E),f[At]=p,p.stateNode=f}return br(p),null;case 31:if(x=p.memoizedState,f===null||f.memoizedState!==null){if(E=v0(p),x!==null){if(f===null){if(!E)throw Error(r(318));if(f=p.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(557));f[At]=p}else Uh(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;br(p),f=!1}else x=GP(),f!==null&&f.memoizedState!==null&&(f.memoizedState.hydrationErrors=x),f=!0;if(!f)return p.flags&256?(Do(p),p):(Do(p),null);if((p.flags&128)!==0)throw Error(r(558))}return br(p),null;case 13:if(E=p.memoizedState,f===null||f.memoizedState!==null&&f.memoizedState.dehydrated!==null){if(I=v0(p),E!==null&&E.dehydrated!==null){if(f===null){if(!I)throw Error(r(318));if(I=p.memoizedState,I=I!==null?I.dehydrated:null,!I)throw Error(r(317));I[At]=p}else Uh(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;br(p),I=!1}else I=GP(),f!==null&&f.memoizedState!==null&&(f.memoizedState.hydrationErrors=I),I=!0;if(!I)return p.flags&256?(Do(p),p):(Do(p),null)}return Do(p),(p.flags&128)!==0?(p.lanes=x,p):(x=E!==null,f=f!==null&&f.memoizedState!==null,x&&(E=p.child,I=null,E.alternate!==null&&E.alternate.memoizedState!==null&&E.alternate.memoizedState.cachePool!==null&&(I=E.alternate.memoizedState.cachePool.pool),j=null,E.memoizedState!==null&&E.memoizedState.cachePool!==null&&(j=E.memoizedState.cachePool.pool),j!==I&&(E.flags|=2048)),x!==f&&x&&(p.child.flags|=8192),gS(p,p.updateQueue),br(p),null);case 4:return ce(),f===null&&iI(p.stateNode.containerInfo),br(p),null;case 10:return ou(p.type),br(p),null;case 19:if(M(Xr),E=p.memoizedState,E===null)return br(p),null;if(I=(p.flags&128)!==0,j=E.rendering,j===null)if(I)Jv(E,!1);else{if(zr!==0||f!==null&&(f.flags&128)!==0)for(f=p.child;f!==null;){if(j=rS(f),j!==null){for(p.flags|=128,Jv(E,!1),f=j.updateQueue,p.updateQueue=f,gS(p,f),p.subtreeFlags=0,f=x,x=p.child;x!==null;)xU(x,f),x=x.sibling;return P(Xr,Xr.current&1|2),Cn&&iu(p,E.treeForkCount),p.child}f=f.sibling}E.tail!==null&&pt()>wS&&(p.flags|=128,I=!0,Jv(E,!1),p.lanes=4194304)}else{if(!I)if(f=rS(j),f!==null){if(p.flags|=128,I=!0,f=f.updateQueue,p.updateQueue=f,gS(p,f),Jv(E,!0),E.tail===null&&E.tailMode==="hidden"&&!j.alternate&&!Cn)return br(p),null}else 2*pt()-E.renderingStartTime>wS&&x!==536870912&&(p.flags|=128,I=!0,Jv(E,!1),p.lanes=4194304);E.isBackwards?(j.sibling=p.child,p.child=j):(f=E.last,f!==null?f.sibling=j:p.child=j,E.last=j)}return E.tail!==null?(f=E.tail,E.rendering=f,E.tail=f.sibling,E.renderingStartTime=pt(),f.sibling=null,x=Xr.current,P(Xr,I?x&1|2:x&1),Cn&&iu(p,E.treeForkCount),f):(br(p),null);case 22:case 23:return Do(p),s_(),E=p.memoizedState!==null,f!==null?f.memoizedState!==null!==E&&(p.flags|=8192):E&&(p.flags|=8192),E?(x&536870912)!==0&&(p.flags&128)===0&&(br(p),p.subtreeFlags&6&&(p.flags|=8192)):br(p),x=p.updateQueue,x!==null&&gS(p,x.retryQueue),x=null,f!==null&&f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(x=f.memoizedState.cachePool.pool),E=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(E=p.memoizedState.cachePool.pool),E!==x&&(p.flags|=2048),f!==null&&M(zh),null;case 24:return x=null,f!==null&&(x=f.memoizedState.cache),p.memoizedState.cache!==x&&(p.flags|=2048),ou(oi),br(p),null;case 25:return null;case 30:return null}throw Error(r(156,p.tag))}function wye(f,p){switch(HP(p),p.tag){case 1:return f=p.flags,f&65536?(p.flags=f&-65537|128,p):null;case 3:return ou(oi),ce(),f=p.flags,(f&65536)!==0&&(f&128)===0?(p.flags=f&-65537|128,p):null;case 26:case 27:case 5:return Ne(p),null;case 31:if(p.memoizedState!==null){if(Do(p),p.alternate===null)throw Error(r(340));Uh()}return f=p.flags,f&65536?(p.flags=f&-65537|128,p):null;case 13:if(Do(p),f=p.memoizedState,f!==null&&f.dehydrated!==null){if(p.alternate===null)throw Error(r(340));Uh()}return f=p.flags,f&65536?(p.flags=f&-65537|128,p):null;case 19:return M(Xr),null;case 4:return ce(),null;case 10:return ou(p.type),null;case 22:case 23:return Do(p),s_(),f!==null&&M(zh),f=p.flags,f&65536?(p.flags=f&-65537|128,p):null;case 24:return ou(oi),null;case 25:return null;default:return null}}function qF(f,p){switch(HP(p),p.tag){case 3:ou(oi),ce();break;case 26:case 27:case 5:Ne(p);break;case 4:ce();break;case 31:p.memoizedState!==null&&Do(p);break;case 13:Do(p);break;case 19:M(Xr);break;case 10:ou(p.type);break;case 22:case 23:Do(p),s_(),f!==null&&M(zh);break;case 24:ou(oi)}}function Xv(f,p){try{var x=p.updateQueue,E=x!==null?x.lastEffect:null;if(E!==null){var I=E.next;x=I;do{if((x.tag&f)===f){E=void 0;var j=x.create,ne=x.inst;E=j(),ne.destroy=E}x=x.next}while(x!==I)}}catch(le){Jn(p,p.return,le)}}function Xd(f,p,x){try{var E=p.updateQueue,I=E!==null?E.lastEffect:null;if(I!==null){var j=I.next;E=j;do{if((E.tag&f)===f){var ne=E.inst,le=ne.destroy;if(le!==void 0){ne.destroy=void 0,I=p;var Ae=x,Ue=le;try{Ue()}catch(Ke){Jn(I,Ae,Ke)}}}E=E.next}while(E!==j)}}catch(Ke){Jn(p,p.return,Ke)}}function GF(f){var p=f.updateQueue;if(p!==null){var x=f.stateNode;try{DU(p,x)}catch(E){Jn(f,f.return,E)}}}function KF(f,p,x){x.props=Kh(f.type,f.memoizedProps),x.state=f.memoizedState;try{x.componentWillUnmount()}catch(E){Jn(f,p,E)}}function Qv(f,p){try{var x=f.ref;if(x!==null){switch(f.tag){case 26:case 27:case 5:var E=f.stateNode;break;case 30:E=f.stateNode;break;default:E=f.stateNode}typeof x=="function"?f.refCleanup=x(E):x.current=E}}catch(I){Jn(f,p,I)}}function nc(f,p){var x=f.ref,E=f.refCleanup;if(x!==null)if(typeof E=="function")try{E()}catch(I){Jn(f,p,I)}finally{f.refCleanup=null,f=f.alternate,f!=null&&(f.refCleanup=null)}else if(typeof x=="function")try{x(null)}catch(I){Jn(f,p,I)}else x.current=null}function WF(f){var p=f.type,x=f.memoizedProps,E=f.stateNode;try{e:switch(p){case"button":case"input":case"select":case"textarea":x.autoFocus&&E.focus();break e;case"img":x.src?E.src=x.src:x.srcSet&&(E.srcset=x.srcSet)}}catch(I){Jn(f,f.return,I)}}function j_(f,p,x){try{var E=f.stateNode;Vye(E,f.type,x,p),E[bn]=p}catch(I){Jn(f,f.return,I)}}function YF(f){return f.tag===5||f.tag===3||f.tag===26||f.tag===27&&sf(f.type)||f.tag===4}function B_(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||YF(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(f.tag===27&&sf(f.type)||f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function U_(f,p,x){var E=f.tag;if(E===5||E===6)f=f.stateNode,p?(x.nodeType===9?x.body:x.nodeName==="HTML"?x.ownerDocument.body:x).insertBefore(f,p):(p=x.nodeType===9?x.body:x.nodeName==="HTML"?x.ownerDocument.body:x,p.appendChild(f),x=x._reactRootContainer,x!=null||p.onclick!==null||(p.onclick=tu));else if(E!==4&&(E===27&&sf(f.type)&&(x=f.stateNode,p=null),f=f.child,f!==null))for(U_(f,p,x),f=f.sibling;f!==null;)U_(f,p,x),f=f.sibling}function yS(f,p,x){var E=f.tag;if(E===5||E===6)f=f.stateNode,p?x.insertBefore(f,p):x.appendChild(f);else if(E!==4&&(E===27&&sf(f.type)&&(x=f.stateNode),f=f.child,f!==null))for(yS(f,p,x),f=f.sibling;f!==null;)yS(f,p,x),f=f.sibling}function JF(f){var p=f.stateNode,x=f.memoizedProps;try{for(var E=f.type,I=p.attributes;I.length;)p.removeAttributeNode(I[0]);Xi(p,E,x),p[At]=f,p[bn]=x}catch(j){Jn(f,f.return,j)}}var du=!1,ci=!1,F_=!1,XF=typeof WeakSet=="function"?WeakSet:Set,Ii=null;function Eye(f,p){if(f=f.containerInfo,aI=BS,f=cU(f),OP(f)){if("selectionStart"in f)var x={start:f.selectionStart,end:f.selectionEnd};else e:{x=(x=f.ownerDocument)&&x.defaultView||window;var E=x.getSelection&&x.getSelection();if(E&&E.rangeCount!==0){x=E.anchorNode;var I=E.anchorOffset,j=E.focusNode;E=E.focusOffset;try{x.nodeType,j.nodeType}catch{x=null;break e}var ne=0,le=-1,Ae=-1,Ue=0,Ke=0,tt=f,$e=null;t:for(;;){for(var qe;tt!==x||I!==0&&tt.nodeType!==3||(le=ne+I),tt!==j||E!==0&&tt.nodeType!==3||(Ae=ne+E),tt.nodeType===3&&(ne+=tt.nodeValue.length),(qe=tt.firstChild)!==null;)$e=tt,tt=qe;for(;;){if(tt===f)break t;if($e===x&&++Ue===I&&(le=ne),$e===j&&++Ke===E&&(Ae=ne),(qe=tt.nextSibling)!==null)break;tt=$e,$e=tt.parentNode}tt=qe}x=le===-1||Ae===-1?null:{start:le,end:Ae}}else x=null}x=x||{start:0,end:0}}else x=null;for(lI={focusedElem:f,selectionRange:x},BS=!1,Ii=p;Ii!==null;)if(p=Ii,f=p.child,(p.subtreeFlags&1028)!==0&&f!==null)f.return=p,Ii=f;else for(;Ii!==null;){switch(p=Ii,j=p.alternate,f=p.flags,p.tag){case 0:if((f&4)!==0&&(f=p.updateQueue,f=f!==null?f.events:null,f!==null))for(x=0;x<f.length;x++)I=f[x],I.ref.impl=I.nextImpl;break;case 11:case 15:break;case 1:if((f&1024)!==0&&j!==null){f=void 0,x=p,I=j.memoizedProps,j=j.memoizedState,E=x.stateNode;try{var It=Kh(x.type,I);f=E.getSnapshotBeforeUpdate(It,j),E.__reactInternalSnapshotBeforeUpdate=f}catch(Yt){Jn(x,x.return,Yt)}}break;case 3:if((f&1024)!==0){if(f=p.stateNode.containerInfo,x=f.nodeType,x===9)dI(f);else if(x===1)switch(f.nodeName){case"HEAD":case"HTML":case"BODY":dI(f);break;default:f.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((f&1024)!==0)throw Error(r(163))}if(f=p.sibling,f!==null){f.return=p.return,Ii=f;break}Ii=p.return}}function QF(f,p,x){var E=x.flags;switch(x.tag){case 0:case 11:case 15:hu(f,x),E&4&&Xv(5,x);break;case 1:if(hu(f,x),E&4)if(f=x.stateNode,p===null)try{f.componentDidMount()}catch(ne){Jn(x,x.return,ne)}else{var I=Kh(x.type,p.memoizedProps);p=p.memoizedState;try{f.componentDidUpdate(I,p,f.__reactInternalSnapshotBeforeUpdate)}catch(ne){Jn(x,x.return,ne)}}E&64&&GF(x),E&512&&Qv(x,x.return);break;case 3:if(hu(f,x),E&64&&(f=x.updateQueue,f!==null)){if(p=null,x.child!==null)switch(x.child.tag){case 27:case 5:p=x.child.stateNode;break;case 1:p=x.child.stateNode}try{DU(f,p)}catch(ne){Jn(x,x.return,ne)}}break;case 27:p===null&&E&4&&JF(x);case 26:case 5:hu(f,x),p===null&&E&4&&WF(x),E&512&&Qv(x,x.return);break;case 12:hu(f,x);break;case 31:hu(f,x),E&4&&t9(f,x);break;case 13:hu(f,x),E&4&&n9(f,x),E&64&&(f=x.memoizedState,f!==null&&(f=f.dehydrated,f!==null&&(x=Iye.bind(null,x),Xye(f,x))));break;case 22:if(E=x.memoizedState!==null||du,!E){p=p!==null&&p.memoizedState!==null||ci,I=du;var j=ci;du=E,(ci=p)&&!j?pu(f,x,(x.subtreeFlags&8772)!==0):hu(f,x),du=I,ci=j}break;case 30:break;default:hu(f,x)}}function ZF(f){var p=f.alternate;p!==null&&(f.alternate=null,ZF(p)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(p=f.stateNode,p!==null&&Zl(p)),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}var Tr=null,co=!1;function fu(f,p,x){for(x=x.child;x!==null;)e9(f,p,x),x=x.sibling}function e9(f,p,x){if(Se&&typeof Se.onCommitFiberUnmount=="function")try{Se.onCommitFiberUnmount(ue,x)}catch{}switch(x.tag){case 26:ci||nc(x,p),fu(f,p,x),x.memoizedState?x.memoizedState.count--:x.stateNode&&(x=x.stateNode,x.parentNode.removeChild(x));break;case 27:ci||nc(x,p);var E=Tr,I=co;sf(x.type)&&(Tr=x.stateNode,co=!1),fu(f,p,x),ab(x.stateNode),Tr=E,co=I;break;case 5:ci||nc(x,p);case 6:if(E=Tr,I=co,Tr=null,fu(f,p,x),Tr=E,co=I,Tr!==null)if(co)try{(Tr.nodeType===9?Tr.body:Tr.nodeName==="HTML"?Tr.ownerDocument.body:Tr).removeChild(x.stateNode)}catch(j){Jn(x,p,j)}else try{Tr.removeChild(x.stateNode)}catch(j){Jn(x,p,j)}break;case 18:Tr!==null&&(co?(f=Tr,G9(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,x.stateNode),F0(f)):G9(Tr,x.stateNode));break;case 4:E=Tr,I=co,Tr=x.stateNode.containerInfo,co=!0,fu(f,p,x),Tr=E,co=I;break;case 0:case 11:case 14:case 15:Xd(2,x,p),ci||Xd(4,x,p),fu(f,p,x);break;case 1:ci||(nc(x,p),E=x.stateNode,typeof E.componentWillUnmount=="function"&&KF(x,p,E)),fu(f,p,x);break;case 21:fu(f,p,x);break;case 22:ci=(E=ci)||x.memoizedState!==null,fu(f,p,x),ci=E;break;default:fu(f,p,x)}}function t9(f,p){if(p.memoizedState===null&&(f=p.alternate,f!==null&&(f=f.memoizedState,f!==null))){f=f.dehydrated;try{F0(f)}catch(x){Jn(p,p.return,x)}}}function n9(f,p){if(p.memoizedState===null&&(f=p.alternate,f!==null&&(f=f.memoizedState,f!==null&&(f=f.dehydrated,f!==null))))try{F0(f)}catch(x){Jn(p,p.return,x)}}function Sye(f){switch(f.tag){case 31:case 13:case 19:var p=f.stateNode;return p===null&&(p=f.stateNode=new XF),p;case 22:return f=f.stateNode,p=f._retryCache,p===null&&(p=f._retryCache=new XF),p;default:throw Error(r(435,f.tag))}}function xS(f,p){var x=Sye(f);p.forEach(function(E){if(!x.has(E)){x.add(E);var I=Rye.bind(null,f,E);E.then(I,I)}})}function uo(f,p){var x=p.deletions;if(x!==null)for(var E=0;E<x.length;E++){var I=x[E],j=f,ne=p,le=ne;e:for(;le!==null;){switch(le.tag){case 27:if(sf(le.type)){Tr=le.stateNode,co=!1;break e}break;case 5:Tr=le.stateNode,co=!1;break e;case 3:case 4:Tr=le.stateNode.containerInfo,co=!0;break e}le=le.return}if(Tr===null)throw Error(r(160));e9(j,ne,I),Tr=null,co=!1,j=I.alternate,j!==null&&(j.return=null),I.return=null}if(p.subtreeFlags&13886)for(p=p.child;p!==null;)r9(p,f),p=p.sibling}var ll=null;function r9(f,p){var x=f.alternate,E=f.flags;switch(f.tag){case 0:case 11:case 14:case 15:uo(p,f),fo(f),E&4&&(Xd(3,f,f.return),Xv(3,f),Xd(5,f,f.return));break;case 1:uo(p,f),fo(f),E&512&&(ci||x===null||nc(x,x.return)),E&64&&du&&(f=f.updateQueue,f!==null&&(E=f.callbacks,E!==null&&(x=f.shared.hiddenCallbacks,f.shared.hiddenCallbacks=x===null?E:x.concat(E))));break;case 26:var I=ll;if(uo(p,f),fo(f),E&512&&(ci||x===null||nc(x,x.return)),E&4){var j=x!==null?x.memoizedState:null;if(E=f.memoizedState,x===null)if(E===null)if(f.stateNode===null){e:{E=f.type,x=f.memoizedProps,I=I.ownerDocument||I;t:switch(E){case"title":j=I.getElementsByTagName("title")[0],(!j||j[ca]||j[At]||j.namespaceURI==="http://www.w3.org/2000/svg"||j.hasAttribute("itemprop"))&&(j=I.createElement(E),I.head.insertBefore(j,I.querySelector("head > title"))),Xi(j,E,x),j[At]=f,xr(j),E=j;break e;case"link":var ne=r$("link","href",I).get(E+(x.href||""));if(ne){for(var le=0;le<ne.length;le++)if(j=ne[le],j.getAttribute("href")===(x.href==null||x.href===""?null:x.href)&&j.getAttribute("rel")===(x.rel==null?null:x.rel)&&j.getAttribute("title")===(x.title==null?null:x.title)&&j.getAttribute("crossorigin")===(x.crossOrigin==null?null:x.crossOrigin)){ne.splice(le,1);break t}}j=I.createElement(E),Xi(j,E,x),I.head.appendChild(j);break;case"meta":if(ne=r$("meta","content",I).get(E+(x.content||""))){for(le=0;le<ne.length;le++)if(j=ne[le],j.getAttribute("content")===(x.content==null?null:""+x.content)&&j.getAttribute("name")===(x.name==null?null:x.name)&&j.getAttribute("property")===(x.property==null?null:x.property)&&j.getAttribute("http-equiv")===(x.httpEquiv==null?null:x.httpEquiv)&&j.getAttribute("charset")===(x.charSet==null?null:x.charSet)){ne.splice(le,1);break t}}j=I.createElement(E),Xi(j,E,x),I.head.appendChild(j);break;default:throw Error(r(468,E))}j[At]=f,xr(j),E=j}f.stateNode=E}else i$(I,f.type,f.stateNode);else f.stateNode=n$(I,E,f.memoizedProps);else j!==E?(j===null?x.stateNode!==null&&(x=x.stateNode,x.parentNode.removeChild(x)):j.count--,E===null?i$(I,f.type,f.stateNode):n$(I,E,f.memoizedProps)):E===null&&f.stateNode!==null&&j_(f,f.memoizedProps,x.memoizedProps)}break;case 27:uo(p,f),fo(f),E&512&&(ci||x===null||nc(x,x.return)),x!==null&&E&4&&j_(f,f.memoizedProps,x.memoizedProps);break;case 5:if(uo(p,f),fo(f),E&512&&(ci||x===null||nc(x,x.return)),f.flags&32){I=f.stateNode;try{c0(I,"")}catch(It){Jn(f,f.return,It)}}E&4&&f.stateNode!=null&&(I=f.memoizedProps,j_(f,I,x!==null?x.memoizedProps:I)),E&1024&&(F_=!0);break;case 6:if(uo(p,f),fo(f),E&4){if(f.stateNode===null)throw Error(r(162));E=f.memoizedProps,x=f.stateNode;try{x.nodeValue=E}catch(It){Jn(f,f.return,It)}}break;case 3:if(MS=null,I=ll,ll=RS(p.containerInfo),uo(p,f),ll=I,fo(f),E&4&&x!==null&&x.memoizedState.isDehydrated)try{F0(p.containerInfo)}catch(It){Jn(f,f.return,It)}F_&&(F_=!1,i9(f));break;case 4:E=ll,ll=RS(f.stateNode.containerInfo),uo(p,f),fo(f),ll=E;break;case 12:uo(p,f),fo(f);break;case 31:uo(p,f),fo(f),E&4&&(E=f.updateQueue,E!==null&&(f.updateQueue=null,xS(f,E)));break;case 13:uo(p,f),fo(f),f.child.flags&8192&&f.memoizedState!==null!=(x!==null&&x.memoizedState!==null)&&(bS=pt()),E&4&&(E=f.updateQueue,E!==null&&(f.updateQueue=null,xS(f,E)));break;case 22:I=f.memoizedState!==null;var Ae=x!==null&&x.memoizedState!==null,Ue=du,Ke=ci;if(du=Ue||I,ci=Ke||Ae,uo(p,f),ci=Ke,du=Ue,fo(f),E&8192)e:for(p=f.stateNode,p._visibility=I?p._visibility&-2:p._visibility|1,I&&(x===null||Ae||du||ci||Wh(f)),x=null,p=f;;){if(p.tag===5||p.tag===26){if(x===null){Ae=x=p;try{if(j=Ae.stateNode,I)ne=j.style,typeof ne.setProperty=="function"?ne.setProperty("display","none","important"):ne.display="none";else{le=Ae.stateNode;var tt=Ae.memoizedProps.style,$e=tt!=null&&tt.hasOwnProperty("display")?tt.display:null;le.style.display=$e==null||typeof $e=="boolean"?"":(""+$e).trim()}}catch(It){Jn(Ae,Ae.return,It)}}}else if(p.tag===6){if(x===null){Ae=p;try{Ae.stateNode.nodeValue=I?"":Ae.memoizedProps}catch(It){Jn(Ae,Ae.return,It)}}}else if(p.tag===18){if(x===null){Ae=p;try{var qe=Ae.stateNode;I?K9(qe,!0):K9(Ae.stateNode,!1)}catch(It){Jn(Ae,Ae.return,It)}}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===f)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===f)break e;for(;p.sibling===null;){if(p.return===null||p.return===f)break e;x===p&&(x=null),p=p.return}x===p&&(x=null),p.sibling.return=p.return,p=p.sibling}E&4&&(E=f.updateQueue,E!==null&&(x=E.retryQueue,x!==null&&(E.retryQueue=null,xS(f,x))));break;case 19:uo(p,f),fo(f),E&4&&(E=f.updateQueue,E!==null&&(f.updateQueue=null,xS(f,E)));break;case 30:break;case 21:break;default:uo(p,f),fo(f)}}function fo(f){var p=f.flags;if(p&2){try{for(var x,E=f.return;E!==null;){if(YF(E)){x=E;break}E=E.return}if(x==null)throw Error(r(160));switch(x.tag){case 27:var I=x.stateNode,j=B_(f);yS(f,j,I);break;case 5:var ne=x.stateNode;x.flags&32&&(c0(ne,""),x.flags&=-33);var le=B_(f);yS(f,le,ne);break;case 3:case 4:var Ae=x.stateNode.containerInfo,Ue=B_(f);U_(f,Ue,Ae);break;default:throw Error(r(161))}}catch(Ke){Jn(f,f.return,Ke)}f.flags&=-3}p&4096&&(f.flags&=-4097)}function i9(f){if(f.subtreeFlags&1024)for(f=f.child;f!==null;){var p=f;i9(p),p.tag===5&&p.flags&1024&&p.stateNode.reset(),f=f.sibling}}function hu(f,p){if(p.subtreeFlags&8772)for(p=p.child;p!==null;)QF(f,p.alternate,p),p=p.sibling}function Wh(f){for(f=f.child;f!==null;){var p=f;switch(p.tag){case 0:case 11:case 14:case 15:Xd(4,p,p.return),Wh(p);break;case 1:nc(p,p.return);var x=p.stateNode;typeof x.componentWillUnmount=="function"&&KF(p,p.return,x),Wh(p);break;case 27:ab(p.stateNode);case 26:case 5:nc(p,p.return),Wh(p);break;case 22:p.memoizedState===null&&Wh(p);break;case 30:Wh(p);break;default:Wh(p)}f=f.sibling}}function pu(f,p,x){for(x=x&&(p.subtreeFlags&8772)!==0,p=p.child;p!==null;){var E=p.alternate,I=f,j=p,ne=j.flags;switch(j.tag){case 0:case 11:case 15:pu(I,j,x),Xv(4,j);break;case 1:if(pu(I,j,x),E=j,I=E.stateNode,typeof I.componentDidMount=="function")try{I.componentDidMount()}catch(Ue){Jn(E,E.return,Ue)}if(E=j,I=E.updateQueue,I!==null){var le=E.stateNode;try{var Ae=I.shared.hiddenCallbacks;if(Ae!==null)for(I.shared.hiddenCallbacks=null,I=0;I<Ae.length;I++)LU(Ae[I],le)}catch(Ue){Jn(E,E.return,Ue)}}x&&ne&64&&GF(j),Qv(j,j.return);break;case 27:JF(j);case 26:case 5:pu(I,j,x),x&&E===null&&ne&4&&WF(j),Qv(j,j.return);break;case 12:pu(I,j,x);break;case 31:pu(I,j,x),x&&ne&4&&t9(I,j);break;case 13:pu(I,j,x),x&&ne&4&&n9(I,j);break;case 22:j.memoizedState===null&&pu(I,j,x),Qv(j,j.return);break;case 30:break;default:pu(I,j,x)}p=p.sibling}}function $_(f,p){var x=null;f!==null&&f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(x=f.memoizedState.cachePool.pool),f=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(f=p.memoizedState.cachePool.pool),f!==x&&(f!=null&&f.refCount++,x!=null&&Bv(x))}function z_(f,p){f=null,p.alternate!==null&&(f=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==f&&(p.refCount++,f!=null&&Bv(f))}function cl(f,p,x,E){if(p.subtreeFlags&10256)for(p=p.child;p!==null;)s9(f,p,x,E),p=p.sibling}function s9(f,p,x,E){var I=p.flags;switch(p.tag){case 0:case 11:case 15:cl(f,p,x,E),I&2048&&Xv(9,p);break;case 1:cl(f,p,x,E);break;case 3:cl(f,p,x,E),I&2048&&(f=null,p.alternate!==null&&(f=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==f&&(p.refCount++,f!=null&&Bv(f)));break;case 12:if(I&2048){cl(f,p,x,E),f=p.stateNode;try{var j=p.memoizedProps,ne=j.id,le=j.onPostCommit;typeof le=="function"&&le(ne,p.alternate===null?"mount":"update",f.passiveEffectDuration,-0)}catch(Ae){Jn(p,p.return,Ae)}}else cl(f,p,x,E);break;case 31:cl(f,p,x,E);break;case 13:cl(f,p,x,E);break;case 23:break;case 22:j=p.stateNode,ne=p.alternate,p.memoizedState!==null?j._visibility&2?cl(f,p,x,E):Zv(f,p):j._visibility&2?cl(f,p,x,E):(j._visibility|=2,P0(f,p,x,E,(p.subtreeFlags&10256)!==0||!1)),I&2048&&$_(ne,p);break;case 24:cl(f,p,x,E),I&2048&&z_(p.alternate,p);break;default:cl(f,p,x,E)}}function P0(f,p,x,E,I){for(I=I&&((p.subtreeFlags&10256)!==0||!1),p=p.child;p!==null;){var j=f,ne=p,le=x,Ae=E,Ue=ne.flags;switch(ne.tag){case 0:case 11:case 15:P0(j,ne,le,Ae,I),Xv(8,ne);break;case 23:break;case 22:var Ke=ne.stateNode;ne.memoizedState!==null?Ke._visibility&2?P0(j,ne,le,Ae,I):Zv(j,ne):(Ke._visibility|=2,P0(j,ne,le,Ae,I)),I&&Ue&2048&&$_(ne.alternate,ne);break;case 24:P0(j,ne,le,Ae,I),I&&Ue&2048&&z_(ne.alternate,ne);break;default:P0(j,ne,le,Ae,I)}p=p.sibling}}function Zv(f,p){if(p.subtreeFlags&10256)for(p=p.child;p!==null;){var x=f,E=p,I=E.flags;switch(E.tag){case 22:Zv(x,E),I&2048&&$_(E.alternate,E);break;case 24:Zv(x,E),I&2048&&z_(E.alternate,E);break;default:Zv(x,E)}p=p.sibling}}var eb=8192;function _0(f,p,x){if(f.subtreeFlags&eb)for(f=f.child;f!==null;)o9(f,p,x),f=f.sibling}function o9(f,p,x){switch(f.tag){case 26:_0(f,p,x),f.flags&eb&&f.memoizedState!==null&&cxe(x,ll,f.memoizedState,f.memoizedProps);break;case 5:_0(f,p,x);break;case 3:case 4:var E=ll;ll=RS(f.stateNode.containerInfo),_0(f,p,x),ll=E;break;case 22:f.memoizedState===null&&(E=f.alternate,E!==null&&E.memoizedState!==null?(E=eb,eb=16777216,_0(f,p,x),eb=E):_0(f,p,x));break;default:_0(f,p,x)}}function a9(f){var p=f.alternate;if(p!==null&&(f=p.child,f!==null)){p.child=null;do p=f.sibling,f.sibling=null,f=p;while(f!==null)}}function tb(f){var p=f.deletions;if((f.flags&16)!==0){if(p!==null)for(var x=0;x<p.length;x++){var E=p[x];Ii=E,c9(E,f)}a9(f)}if(f.subtreeFlags&10256)for(f=f.child;f!==null;)l9(f),f=f.sibling}function l9(f){switch(f.tag){case 0:case 11:case 15:tb(f),f.flags&2048&&Xd(9,f,f.return);break;case 3:tb(f);break;case 12:tb(f);break;case 22:var p=f.stateNode;f.memoizedState!==null&&p._visibility&2&&(f.return===null||f.return.tag!==13)?(p._visibility&=-3,vS(f)):tb(f);break;default:tb(f)}}function vS(f){var p=f.deletions;if((f.flags&16)!==0){if(p!==null)for(var x=0;x<p.length;x++){var E=p[x];Ii=E,c9(E,f)}a9(f)}for(f=f.child;f!==null;){switch(p=f,p.tag){case 0:case 11:case 15:Xd(8,p,p.return),vS(p);break;case 22:x=p.stateNode,x._visibility&2&&(x._visibility&=-3,vS(p));break;default:vS(p)}f=f.sibling}}function c9(f,p){for(;Ii!==null;){var x=Ii;switch(x.tag){case 0:case 11:case 15:Xd(8,x,p);break;case 23:case 22:if(x.memoizedState!==null&&x.memoizedState.cachePool!==null){var E=x.memoizedState.cachePool.pool;E!=null&&E.refCount++}break;case 24:Bv(x.memoizedState.cache)}if(E=x.child,E!==null)E.return=x,Ii=E;else e:for(x=f;Ii!==null;){E=Ii;var I=E.sibling,j=E.return;if(ZF(E),E===x){Ii=null;break e}if(I!==null){I.return=j,Ii=I;break e}Ii=j}}}var Aye={getCacheForType:function(f){var p=Yi(oi),x=p.data.get(f);return x===void 0&&(x=f(),p.data.set(f,x)),x},cacheSignal:function(){return Yi(oi).controller.signal}},Tye=typeof WeakMap=="function"?WeakMap:Map,Hn=0,sr=null,wn=null,kn=0,Yn=0,jo=null,Qd=!1,I0=!1,V_=!1,mu=0,zr=0,Zd=0,Yh=0,H_=0,Bo=0,R0=0,nb=null,ho=null,q_=!1,bS=0,u9=0,wS=1/0,ES=null,ef=null,bi=0,tf=null,O0=null,gu=0,G_=0,K_=null,d9=null,rb=0,W_=null;function Uo(){return(Hn&2)!==0&&kn!==0?kn&-kn:L.T!==null?eI():Ht()}function f9(){if(Bo===0)if((kn&536870912)===0||Cn){var f=vt;vt<<=1,(vt&3932160)===0&&(vt=262144),Bo=f}else Bo=536870912;return f=Lo.current,f!==null&&(f.flags|=32),Bo}function po(f,p,x){(f===sr&&(Yn===2||Yn===9)||f.cancelPendingCommit!==null)&&(M0(f,0),nf(f,kn,Bo,!1)),Q(f,x),((Hn&2)===0||f!==sr)&&(f===sr&&((Hn&2)===0&&(Yh|=x),zr===4&&nf(f,kn,Bo,!1)),rc(f))}function h9(f,p,x){if((Hn&6)!==0)throw Error(r(327));var E=!x&&(p&127)===0&&(p&f.expiredLanes)===0||on(f,p),I=E?Cye(f,p):J_(f,p,!0),j=E;do{if(I===0){I0&&!E&&nf(f,p,0,!1);break}else{if(x=f.current.alternate,j&&!kye(x)){I=J_(f,p,!1),j=!1;continue}if(I===2){if(j=p,f.errorRecoveryDisabledLanes&j)var ne=0;else ne=f.pendingLanes&-536870913,ne=ne!==0?ne:ne&536870912?536870912:0;if(ne!==0){p=ne;e:{var le=f;I=nb;var Ae=le.current.memoizedState.isDehydrated;if(Ae&&(M0(le,ne).flags|=256),ne=J_(le,ne,!1),ne!==2){if(V_&&!Ae){le.errorRecoveryDisabledLanes|=j,Yh|=j,I=4;break e}j=ho,ho=I,j!==null&&(ho===null?ho=j:ho.push.apply(ho,j))}I=ne}if(j=!1,I!==2)continue}}if(I===1){M0(f,0),nf(f,p,0,!0);break}e:{switch(E=f,j=I,j){case 0:case 1:throw Error(r(345));case 4:if((p&4194048)!==p)break;case 6:nf(E,p,Bo,!Qd);break e;case 2:ho=null;break;case 3:case 5:break;default:throw Error(r(329))}if((p&62914560)===p&&(I=bS+300-pt(),10<I)){if(nf(E,p,Bo,!Qd),tn(E,0,!0)!==0)break e;gu=p,E.timeoutHandle=H9(p9.bind(null,E,x,ho,ES,q_,p,Bo,Yh,R0,Qd,j,"Throttled",-0,0),I);break e}p9(E,x,ho,ES,q_,p,Bo,Yh,R0,Qd,j,null,-0,0)}}break}while(!0);rc(f)}function p9(f,p,x,E,I,j,ne,le,Ae,Ue,Ke,tt,$e,qe){if(f.timeoutHandle=-1,tt=p.subtreeFlags,tt&8192||(tt&16785408)===16785408){tt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:tu},o9(p,j,tt);var It=(j&62914560)===j?bS-pt():(j&4194048)===j?u9-pt():0;if(It=uxe(tt,It),It!==null){gu=j,f.cancelPendingCommit=It(E9.bind(null,f,p,j,x,E,I,ne,le,Ae,Ke,tt,null,$e,qe)),nf(f,j,ne,!Ue);return}}E9(f,p,j,x,E,I,ne,le,Ae)}function kye(f){for(var p=f;;){var x=p.tag;if((x===0||x===11||x===15)&&p.flags&16384&&(x=p.updateQueue,x!==null&&(x=x.stores,x!==null)))for(var E=0;E<x.length;E++){var I=x[E],j=I.getSnapshot;I=I.value;try{if(!Oo(j(),I))return!1}catch{return!1}}if(x=p.child,p.subtreeFlags&16384&&x!==null)x.return=p,p=x;else{if(p===f)break;for(;p.sibling===null;){if(p.return===null||p.return===f)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function nf(f,p,x,E){p&=~H_,p&=~Yh,f.suspendedLanes|=p,f.pingedLanes&=~p,E&&(f.warmLanes|=p),E=f.expirationTimes;for(var I=p;0<I;){var j=31-ye(I),ne=1<<j;E[j]=-1,I&=~ne}x!==0&&fe(f,x,p)}function SS(){return(Hn&6)===0?(ib(0),!1):!0}function Y_(){if(wn!==null){if(Yn===0)var f=wn.return;else f=wn,su=Fh=null,d_(f),A0=null,Fv=0,f=wn;for(;f!==null;)qF(f.alternate,f),f=f.return;wn=null}}function M0(f,p){var x=f.timeoutHandle;x!==-1&&(f.timeoutHandle=-1,Gye(x)),x=f.cancelPendingCommit,x!==null&&(f.cancelPendingCommit=null,x()),gu=0,Y_(),sr=f,wn=x=ru(f.current,null),kn=p,Yn=0,jo=null,Qd=!1,I0=on(f,p),V_=!1,R0=Bo=H_=Yh=Zd=zr=0,ho=nb=null,q_=!1,(p&8)!==0&&(p|=p&32);var E=f.entangledLanes;if(E!==0)for(f=f.entanglements,E&=p;0<E;){var I=31-ye(E),j=1<<I;p|=f[I],E&=~j}return mu=p,HE(),x}function m9(f,p){an=null,L.H=Wv,p===S0||p===QE?(p=IU(),Yn=3):p===ZP?(p=IU(),Yn=4):Yn=p===N_?8:p!==null&&typeof p=="object"&&typeof p.then=="function"?6:1,jo=p,wn===null&&(zr=1,fS(f,pa(p,f.current)))}function g9(){var f=Lo.current;return f===null?!0:(kn&4194048)===kn?xa===null:(kn&62914560)===kn||(kn&536870912)!==0?f===xa:!1}function y9(){var f=L.H;return L.H=Wv,f===null?Wv:f}function x9(){var f=L.A;return L.A=Aye,f}function AS(){zr=4,Qd||(kn&4194048)!==kn&&Lo.current!==null||(I0=!0),(Zd&134217727)===0&&(Yh&134217727)===0||sr===null||nf(sr,kn,Bo,!1)}function J_(f,p,x){var E=Hn;Hn|=2;var I=y9(),j=x9();(sr!==f||kn!==p)&&(ES=null,M0(f,p)),p=!1;var ne=zr;e:do try{if(Yn!==0&&wn!==null){var le=wn,Ae=jo;switch(Yn){case 8:Y_(),ne=6;break e;case 3:case 2:case 9:case 6:Lo.current===null&&(p=!0);var Ue=Yn;if(Yn=0,jo=null,L0(f,le,Ae,Ue),x&&I0){ne=0;break e}break;default:Ue=Yn,Yn=0,jo=null,L0(f,le,Ae,Ue)}}Nye(),ne=zr;break}catch(Ke){m9(f,Ke)}while(!0);return p&&f.shellSuspendCounter++,su=Fh=null,Hn=E,L.H=I,L.A=j,wn===null&&(sr=null,kn=0,HE()),ne}function Nye(){for(;wn!==null;)v9(wn)}function Cye(f,p){var x=Hn;Hn|=2;var E=y9(),I=x9();sr!==f||kn!==p?(ES=null,wS=pt()+500,M0(f,p)):I0=on(f,p);e:do try{if(Yn!==0&&wn!==null){p=wn;var j=jo;t:switch(Yn){case 1:Yn=0,jo=null,L0(f,p,j,1);break;case 2:case 9:if(PU(j)){Yn=0,jo=null,b9(p);break}p=function(){Yn!==2&&Yn!==9||sr!==f||(Yn=7),rc(f)},j.then(p,p);break e;case 3:Yn=7;break e;case 4:Yn=5;break e;case 7:PU(j)?(Yn=0,jo=null,b9(p)):(Yn=0,jo=null,L0(f,p,j,7));break;case 5:var ne=null;switch(wn.tag){case 26:ne=wn.memoizedState;case 5:case 27:var le=wn;if(ne?s$(ne):le.stateNode.complete){Yn=0,jo=null;var Ae=le.sibling;if(Ae!==null)wn=Ae;else{var Ue=le.return;Ue!==null?(wn=Ue,TS(Ue)):wn=null}break t}}Yn=0,jo=null,L0(f,p,j,5);break;case 6:Yn=0,jo=null,L0(f,p,j,6);break;case 8:Y_(),zr=6;break e;default:throw Error(r(462))}}Pye();break}catch(Ke){m9(f,Ke)}while(!0);return su=Fh=null,L.H=E,L.A=I,Hn=x,wn!==null?0:(sr=null,kn=0,HE(),zr)}function Pye(){for(;wn!==null&&!ft();)v9(wn)}function v9(f){var p=VF(f.alternate,f,mu);f.memoizedProps=f.pendingProps,p===null?TS(f):wn=p}function b9(f){var p=f,x=p.alternate;switch(p.tag){case 15:case 0:p=jF(x,p,p.pendingProps,p.type,void 0,kn);break;case 11:p=jF(x,p,p.pendingProps,p.type.render,p.ref,kn);break;case 5:d_(p);default:qF(x,p),p=wn=xU(p,mu),p=VF(x,p,mu)}f.memoizedProps=f.pendingProps,p===null?TS(f):wn=p}function L0(f,p,x,E){su=Fh=null,d_(p),A0=null,Fv=0;var I=p.return;try{if(yye(f,I,p,x,kn)){zr=1,fS(f,pa(x,f.current)),wn=null;return}}catch(j){if(I!==null)throw wn=I,j;zr=1,fS(f,pa(x,f.current)),wn=null;return}p.flags&32768?(Cn||E===1?f=!0:I0||(kn&536870912)!==0?f=!1:(Qd=f=!0,(E===2||E===9||E===3||E===6)&&(E=Lo.current,E!==null&&E.tag===13&&(E.flags|=16384))),w9(p,f)):TS(p)}function TS(f){var p=f;do{if((p.flags&32768)!==0){w9(p,Qd);return}f=p.return;var x=bye(p.alternate,p,mu);if(x!==null){wn=x;return}if(p=p.sibling,p!==null){wn=p;return}wn=p=f}while(p!==null);zr===0&&(zr=5)}function w9(f,p){do{var x=wye(f.alternate,f);if(x!==null){x.flags&=32767,wn=x;return}if(x=f.return,x!==null&&(x.flags|=32768,x.subtreeFlags=0,x.deletions=null),!p&&(f=f.sibling,f!==null)){wn=f;return}wn=f=x}while(f!==null);zr=6,wn=null}function E9(f,p,x,E,I,j,ne,le,Ae){f.cancelPendingCommit=null;do kS();while(bi!==0);if((Hn&6)!==0)throw Error(r(327));if(p!==null){if(p===f.current)throw Error(r(177));if(j=p.lanes|p.childLanes,j|=BP,ee(f,x,j,ne,le,Ae),f===sr&&(wn=sr=null,kn=0),O0=p,tf=f,gu=x,G_=j,K_=I,d9=E,(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?(f.callbackNode=null,f.callbackPriority=0,Oye(gt,function(){return N9(),null})):(f.callbackNode=null,f.callbackPriority=0),E=(p.flags&13878)!==0,(p.subtreeFlags&13878)!==0||E){E=L.T,L.T=null,I=V.p,V.p=2,ne=Hn,Hn|=4;try{Eye(f,p,x)}finally{Hn=ne,V.p=I,L.T=E}}bi=1,S9(),A9(),T9()}}function S9(){if(bi===1){bi=0;var f=tf,p=O0,x=(p.flags&13878)!==0;if((p.subtreeFlags&13878)!==0||x){x=L.T,L.T=null;var E=V.p;V.p=2;var I=Hn;Hn|=4;try{r9(p,f);var j=lI,ne=cU(f.containerInfo),le=j.focusedElem,Ae=j.selectionRange;if(ne!==le&&le&&le.ownerDocument&&lU(le.ownerDocument.documentElement,le)){if(Ae!==null&&OP(le)){var Ue=Ae.start,Ke=Ae.end;if(Ke===void 0&&(Ke=Ue),"selectionStart"in le)le.selectionStart=Ue,le.selectionEnd=Math.min(Ke,le.value.length);else{var tt=le.ownerDocument||document,$e=tt&&tt.defaultView||window;if($e.getSelection){var qe=$e.getSelection(),It=le.textContent.length,Yt=Math.min(Ae.start,It),tr=Ae.end===void 0?Yt:Math.min(Ae.end,It);!qe.extend&&Yt>tr&&(ne=tr,tr=Yt,Yt=ne);var Ie=aU(le,Yt),Pe=aU(le,tr);if(Ie&&Pe&&(qe.rangeCount!==1||qe.anchorNode!==Ie.node||qe.anchorOffset!==Ie.offset||qe.focusNode!==Pe.node||qe.focusOffset!==Pe.offset)){var Be=tt.createRange();Be.setStart(Ie.node,Ie.offset),qe.removeAllRanges(),Yt>tr?(qe.addRange(Be),qe.extend(Pe.node,Pe.offset)):(Be.setEnd(Pe.node,Pe.offset),qe.addRange(Be))}}}}for(tt=[],qe=le;qe=qe.parentNode;)qe.nodeType===1&&tt.push({element:qe,left:qe.scrollLeft,top:qe.scrollTop});for(typeof le.focus=="function"&&le.focus(),le=0;le<tt.length;le++){var Je=tt[le];Je.element.scrollLeft=Je.left,Je.element.scrollTop=Je.top}}BS=!!aI,lI=aI=null}finally{Hn=I,V.p=E,L.T=x}}f.current=p,bi=2}}function A9(){if(bi===2){bi=0;var f=tf,p=O0,x=(p.flags&8772)!==0;if((p.subtreeFlags&8772)!==0||x){x=L.T,L.T=null;var E=V.p;V.p=2;var I=Hn;Hn|=4;try{QF(f,p.alternate,p)}finally{Hn=I,V.p=E,L.T=x}}bi=3}}function T9(){if(bi===4||bi===3){bi=0,Me();var f=tf,p=O0,x=gu,E=d9;(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?bi=5:(bi=0,O0=tf=null,k9(f,f.pendingLanes));var I=f.pendingLanes;if(I===0&&(ef=null),Qt(x),p=p.stateNode,Se&&typeof Se.onCommitFiberRoot=="function")try{Se.onCommitFiberRoot(ue,p,void 0,(p.current.flags&128)===128)}catch{}if(E!==null){p=L.T,I=V.p,V.p=2,L.T=null;try{for(var j=f.onRecoverableError,ne=0;ne<E.length;ne++){var le=E[ne];j(le.value,{componentStack:le.stack})}}finally{L.T=p,V.p=I}}(gu&3)!==0&&kS(),rc(f),I=f.pendingLanes,(x&261930)!==0&&(I&42)!==0?f===W_?rb++:(rb=0,W_=f):rb=0,ib(0)}}function k9(f,p){(f.pooledCacheLanes&=p)===0&&(p=f.pooledCache,p!=null&&(f.pooledCache=null,Bv(p)))}function kS(){return S9(),A9(),T9(),N9()}function N9(){if(bi!==5)return!1;var f=tf,p=G_;G_=0;var x=Qt(gu),E=L.T,I=V.p;try{V.p=32>x?32:x,L.T=null,x=K_,K_=null;var j=tf,ne=gu;if(bi=0,O0=tf=null,gu=0,(Hn&6)!==0)throw Error(r(331));var le=Hn;if(Hn|=4,l9(j.current),s9(j,j.current,ne,x),Hn=le,ib(0,!1),Se&&typeof Se.onPostCommitFiberRoot=="function")try{Se.onPostCommitFiberRoot(ue,j)}catch{}return!0}finally{V.p=I,L.T=E,k9(f,p)}}function C9(f,p,x){p=pa(x,p),p=k_(f.stateNode,p,2),f=Wd(f,p,2),f!==null&&(Q(f,2),rc(f))}function Jn(f,p,x){if(f.tag===3)C9(f,f,x);else for(;p!==null;){if(p.tag===3){C9(p,f,x);break}else if(p.tag===1){var E=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(ef===null||!ef.has(E))){f=pa(x,f),x=PF(2),E=Wd(p,x,2),E!==null&&(_F(x,E,p,f),Q(E,2),rc(E));break}}p=p.return}}function X_(f,p,x){var E=f.pingCache;if(E===null){E=f.pingCache=new Tye;var I=new Set;E.set(p,I)}else I=E.get(p),I===void 0&&(I=new Set,E.set(p,I));I.has(x)||(V_=!0,I.add(x),f=_ye.bind(null,f,p,x),p.then(f,f))}function _ye(f,p,x){var E=f.pingCache;E!==null&&E.delete(p),f.pingedLanes|=f.suspendedLanes&x,f.warmLanes&=~x,sr===f&&(kn&x)===x&&(zr===4||zr===3&&(kn&62914560)===kn&&300>pt()-bS?(Hn&2)===0&&M0(f,0):H_|=x,R0===kn&&(R0=0)),rc(f)}function P9(f,p){p===0&&(p=Vn()),f=jh(f,p),f!==null&&(Q(f,p),rc(f))}function Iye(f){var p=f.memoizedState,x=0;p!==null&&(x=p.retryLane),P9(f,x)}function Rye(f,p){var x=0;switch(f.tag){case 31:case 13:var E=f.stateNode,I=f.memoizedState;I!==null&&(x=I.retryLane);break;case 19:E=f.stateNode;break;case 22:E=f.stateNode._retryCache;break;default:throw Error(r(314))}E!==null&&E.delete(p),P9(f,x)}function Oye(f,p){return rt(f,p)}var NS=null,D0=null,Q_=!1,CS=!1,Z_=!1,rf=0;function rc(f){f!==D0&&f.next===null&&(D0===null?NS=D0=f:D0=D0.next=f),CS=!0,Q_||(Q_=!0,Lye())}function ib(f,p){if(!Z_&&CS){Z_=!0;do for(var x=!1,E=NS;E!==null;){if(f!==0){var I=E.pendingLanes;if(I===0)var j=0;else{var ne=E.suspendedLanes,le=E.pingedLanes;j=(1<<31-ye(42|f)+1)-1,j&=I&~(ne&~le),j=j&201326741?j&201326741|1:j?j|2:0}j!==0&&(x=!0,O9(E,j))}else j=kn,j=tn(E,E===sr?j:0,E.cancelPendingCommit!==null||E.timeoutHandle!==-1),(j&3)===0||on(E,j)||(x=!0,O9(E,j));E=E.next}while(x);Z_=!1}}function Mye(){_9()}function _9(){CS=Q_=!1;var f=0;rf!==0&&qye()&&(f=rf);for(var p=pt(),x=null,E=NS;E!==null;){var I=E.next,j=I9(E,p);j===0?(E.next=null,x===null?NS=I:x.next=I,I===null&&(D0=x)):(x=E,(f!==0||(j&3)!==0)&&(CS=!0)),E=I}bi!==0&&bi!==5||ib(f),rf!==0&&(rf=0)}function I9(f,p){for(var x=f.suspendedLanes,E=f.pingedLanes,I=f.expirationTimes,j=f.pendingLanes&-62914561;0<j;){var ne=31-ye(j),le=1<<ne,Ae=I[ne];Ae===-1?((le&x)===0||(le&E)!==0)&&(I[ne]=_i(le,p)):Ae<=p&&(f.expiredLanes|=le),j&=~le}if(p=sr,x=kn,x=tn(f,f===p?x:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),E=f.callbackNode,x===0||f===p&&(Yn===2||Yn===9)||f.cancelPendingCommit!==null)return E!==null&&E!==null&&Xe(E),f.callbackNode=null,f.callbackPriority=0;if((x&3)===0||on(f,x)){if(p=x&-x,p===f.callbackPriority)return p;switch(E!==null&&Xe(E),Qt(x)){case 2:case 8:x=He;break;case 32:x=gt;break;case 268435456:x=ie;break;default:x=gt}return E=R9.bind(null,f),x=rt(x,E),f.callbackPriority=p,f.callbackNode=x,p}return E!==null&&E!==null&&Xe(E),f.callbackPriority=2,f.callbackNode=null,2}function R9(f,p){if(bi!==0&&bi!==5)return f.callbackNode=null,f.callbackPriority=0,null;var x=f.callbackNode;if(kS()&&f.callbackNode!==x)return null;var E=kn;return E=tn(f,f===sr?E:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),E===0?null:(h9(f,E,p),I9(f,pt()),f.callbackNode!=null&&f.callbackNode===x?R9.bind(null,f):null)}function O9(f,p){if(kS())return null;h9(f,p,!0)}function Lye(){Kye(function(){(Hn&6)!==0?rt(Re,Mye):_9()})}function eI(){if(rf===0){var f=w0;f===0&&(f=$t,$t<<=1,($t&261888)===0&&($t=256)),rf=f}return rf}function M9(f){return f==null||typeof f=="symbol"||typeof f=="boolean"?null:typeof f=="function"?f:DE(""+f)}function L9(f,p){var x=p.ownerDocument.createElement("input");return x.name=p.name,x.value=p.value,f.id&&x.setAttribute("form",f.id),p.parentNode.insertBefore(x,p),f=new FormData(f),x.parentNode.removeChild(x),f}function Dye(f,p,x,E,I){if(p==="submit"&&x&&x.stateNode===I){var j=M9((I[bn]||null).action),ne=E.submitter;ne&&(p=(p=ne[bn]||null)?M9(p.formAction):ne.getAttribute("formAction"),p!==null&&(j=p,ne=null));var le=new FE("action","action",null,E,I);f.push({event:le,listeners:[{instance:null,listener:function(){if(E.defaultPrevented){if(rf!==0){var Ae=ne?L9(I,ne):new FormData(I);b_(x,{pending:!0,data:Ae,method:I.method,action:j},null,Ae)}}else typeof j=="function"&&(le.preventDefault(),Ae=ne?L9(I,ne):new FormData(I),b_(x,{pending:!0,data:Ae,method:I.method,action:j},j,Ae))},currentTarget:I}]})}}for(var tI=0;tI<jP.length;tI++){var nI=jP[tI],jye=nI.toLowerCase(),Bye=nI[0].toUpperCase()+nI.slice(1);al(jye,"on"+Bye)}al(fU,"onAnimationEnd"),al(hU,"onAnimationIteration"),al(pU,"onAnimationStart"),al("dblclick","onDoubleClick"),al("focusin","onFocus"),al("focusout","onBlur"),al(eye,"onTransitionRun"),al(tye,"onTransitionStart"),al(nye,"onTransitionCancel"),al(mU,"onTransitionEnd"),vi("onMouseEnter",["mouseout","mouseover"]),vi("onMouseLeave",["mouseout","mouseover"]),vi("onPointerEnter",["pointerout","pointerover"]),vi("onPointerLeave",["pointerout","pointerover"]),Fr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Fr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Fr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Fr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Fr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Fr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sb="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Uye=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(sb));function D9(f,p){p=(p&4)!==0;for(var x=0;x<f.length;x++){var E=f[x],I=E.event;E=E.listeners;e:{var j=void 0;if(p)for(var ne=E.length-1;0<=ne;ne--){var le=E[ne],Ae=le.instance,Ue=le.currentTarget;if(le=le.listener,Ae!==j&&I.isPropagationStopped())break e;j=le,I.currentTarget=Ue;try{j(I)}catch(Ke){VE(Ke)}I.currentTarget=null,j=Ae}else for(ne=0;ne<E.length;ne++){if(le=E[ne],Ae=le.instance,Ue=le.currentTarget,le=le.listener,Ae!==j&&I.isPropagationStopped())break e;j=le,I.currentTarget=Ue;try{j(I)}catch(Ke){VE(Ke)}I.currentTarget=null,j=Ae}}}}function En(f,p){var x=p[ur];x===void 0&&(x=p[ur]=new Set);var E=f+"__bubble";x.has(E)||(j9(p,f,2,!1),x.add(E))}function rI(f,p,x){var E=0;p&&(E|=4),j9(x,f,E,p)}var PS="_reactListening"+Math.random().toString(36).slice(2);function iI(f){if(!f[PS]){f[PS]=!0,Zc.forEach(function(x){x!=="selectionchange"&&(Uye.has(x)||rI(x,!1,f),rI(x,!0,f))});var p=f.nodeType===9?f:f.ownerDocument;p===null||p[PS]||(p[PS]=!0,rI("selectionchange",!1,p))}}function j9(f,p,x,E){switch(f$(p)){case 2:var I=hxe;break;case 8:I=pxe;break;default:I=vI}x=I.bind(null,p,x,f),I=void 0,!AP||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||(I=!0),E?I!==void 0?f.addEventListener(p,x,{capture:!0,passive:I}):f.addEventListener(p,x,!0):I!==void 0?f.addEventListener(p,x,{passive:I}):f.addEventListener(p,x,!1)}function sI(f,p,x,E,I){var j=E;if((p&1)===0&&(p&2)===0&&E!==null)e:for(;;){if(E===null)return;var ne=E.tag;if(ne===3||ne===4){var le=E.stateNode.containerInfo;if(le===I)break;if(ne===4)for(ne=E.return;ne!==null;){var Ae=ne.tag;if((Ae===3||Ae===4)&&ne.stateNode.containerInfo===I)return;ne=ne.return}for(;le!==null;){if(ne=_o(le),ne===null)return;if(Ae=ne.tag,Ae===5||Ae===6||Ae===26||Ae===27){E=j=ne;continue e}le=le.parentNode}}E=E.return}z7(function(){var Ue=j,Ke=EP(x),tt=[];e:{var $e=gU.get(f);if($e!==void 0){var qe=FE,It=f;switch(f){case"keypress":if(BE(x)===0)break e;case"keydown":case"keyup":qe=Rge;break;case"focusin":It="focus",qe=CP;break;case"focusout":It="blur",qe=CP;break;case"beforeblur":case"afterblur":qe=CP;break;case"click":if(x.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":qe=q7;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":qe=bge;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":qe=Lge;break;case fU:case hU:case pU:qe=Sge;break;case mU:qe=jge;break;case"scroll":case"scrollend":qe=xge;break;case"wheel":qe=Uge;break;case"copy":case"cut":case"paste":qe=Tge;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":qe=K7;break;case"toggle":case"beforetoggle":qe=$ge}var Yt=(p&4)!==0,tr=!Yt&&(f==="scroll"||f==="scrollend"),Ie=Yt?$e!==null?$e+"Capture":null:$e;Yt=[];for(var Pe=Ue,Be;Pe!==null;){var Je=Pe;if(Be=Je.stateNode,Je=Je.tag,Je!==5&&Je!==26&&Je!==27||Be===null||Ie===null||(Je=Nv(Pe,Ie),Je!=null&&Yt.push(ob(Pe,Je,Be))),tr)break;Pe=Pe.return}0<Yt.length&&($e=new qe($e,It,null,x,Ke),tt.push({event:$e,listeners:Yt}))}}if((p&7)===0){e:{if($e=f==="mouseover"||f==="pointerover",qe=f==="mouseout"||f==="pointerout",$e&&x!==wP&&(It=x.relatedTarget||x.fromElement)&&(_o(It)||It[ol]))break e;if((qe||$e)&&($e=Ke.window===Ke?Ke:($e=Ke.ownerDocument)?$e.defaultView||$e.parentWindow:window,qe?(It=x.relatedTarget||x.toElement,qe=Ue,It=It?_o(It):null,It!==null&&(tr=s(It),Yt=It.tag,It!==tr||Yt!==5&&Yt!==27&&Yt!==6)&&(It=null)):(qe=null,It=Ue),qe!==It)){if(Yt=q7,Je="onMouseLeave",Ie="onMouseEnter",Pe="mouse",(f==="pointerout"||f==="pointerover")&&(Yt=K7,Je="onPointerLeave",Ie="onPointerEnter",Pe="pointer"),tr=qe==null?$e:ua(qe),Be=It==null?$e:ua(It),$e=new Yt(Je,Pe+"leave",qe,x,Ke),$e.target=tr,$e.relatedTarget=Be,Je=null,_o(Ke)===Ue&&(Yt=new Yt(Ie,Pe+"enter",It,x,Ke),Yt.target=Be,Yt.relatedTarget=tr,Je=Yt),tr=Je,qe&&It)t:{for(Yt=Fye,Ie=qe,Pe=It,Be=0,Je=Ie;Je;Je=Yt(Je))Be++;Je=0;for(var zt=Pe;zt;zt=Yt(zt))Je++;for(;0<Be-Je;)Ie=Yt(Ie),Be--;for(;0<Je-Be;)Pe=Yt(Pe),Je--;for(;Be--;){if(Ie===Pe||Pe!==null&&Ie===Pe.alternate){Yt=Ie;break t}Ie=Yt(Ie),Pe=Yt(Pe)}Yt=null}else Yt=null;qe!==null&&B9(tt,$e,qe,Yt,!1),It!==null&&tr!==null&&B9(tt,tr,It,Yt,!0)}}e:{if($e=Ue?ua(Ue):window,qe=$e.nodeName&&$e.nodeName.toLowerCase(),qe==="select"||qe==="input"&&$e.type==="file")var Ln=tU;else if(Z7($e))if(nU)Ln=Xge;else{Ln=Yge;var Dt=Wge}else qe=$e.nodeName,!qe||qe.toLowerCase()!=="input"||$e.type!=="checkbox"&&$e.type!=="radio"?Ue&&bP(Ue.elementType)&&(Ln=tU):Ln=Jge;if(Ln&&(Ln=Ln(f,Ue))){eU(tt,Ln,x,Ke);break e}Dt&&Dt(f,$e,Ue),f==="focusout"&&Ue&&$e.type==="number"&&Ue.memoizedProps.value!=null&&vP($e,"number",$e.value)}switch(Dt=Ue?ua(Ue):window,f){case"focusin":(Z7(Dt)||Dt.contentEditable==="true")&&(h0=Dt,MP=Ue,Lv=null);break;case"focusout":Lv=MP=h0=null;break;case"mousedown":LP=!0;break;case"contextmenu":case"mouseup":case"dragend":LP=!1,uU(tt,x,Ke);break;case"selectionchange":if(Zge)break;case"keydown":case"keyup":uU(tt,x,Ke)}var un;if(_P)e:{switch(f){case"compositionstart":var Nn="onCompositionStart";break e;case"compositionend":Nn="onCompositionEnd";break e;case"compositionupdate":Nn="onCompositionUpdate";break e}Nn=void 0}else f0?X7(f,x)&&(Nn="onCompositionEnd"):f==="keydown"&&x.keyCode===229&&(Nn="onCompositionStart");Nn&&(W7&&x.locale!=="ko"&&(f0||Nn!=="onCompositionStart"?Nn==="onCompositionEnd"&&f0&&(un=V7()):($d=Ke,TP="value"in $d?$d.value:$d.textContent,f0=!0)),Dt=_S(Ue,Nn),0<Dt.length&&(Nn=new G7(Nn,f,null,x,Ke),tt.push({event:Nn,listeners:Dt}),un?Nn.data=un:(un=Q7(x),un!==null&&(Nn.data=un)))),(un=Vge?Hge(f,x):qge(f,x))&&(Nn=_S(Ue,"onBeforeInput"),0<Nn.length&&(Dt=new G7("onBeforeInput","beforeinput",null,x,Ke),tt.push({event:Dt,listeners:Nn}),Dt.data=un)),Dye(tt,f,Ue,x,Ke)}D9(tt,p)})}function ob(f,p,x){return{instance:f,listener:p,currentTarget:x}}function _S(f,p){for(var x=p+"Capture",E=[];f!==null;){var I=f,j=I.stateNode;if(I=I.tag,I!==5&&I!==26&&I!==27||j===null||(I=Nv(f,x),I!=null&&E.unshift(ob(f,I,j)),I=Nv(f,p),I!=null&&E.push(ob(f,I,j))),f.tag===3)return E;f=f.return}return[]}function Fye(f){if(f===null)return null;do f=f.return;while(f&&f.tag!==5&&f.tag!==27);return f||null}function B9(f,p,x,E,I){for(var j=p._reactName,ne=[];x!==null&&x!==E;){var le=x,Ae=le.alternate,Ue=le.stateNode;if(le=le.tag,Ae!==null&&Ae===E)break;le!==5&&le!==26&&le!==27||Ue===null||(Ae=Ue,I?(Ue=Nv(x,j),Ue!=null&&ne.unshift(ob(x,Ue,Ae))):I||(Ue=Nv(x,j),Ue!=null&&ne.push(ob(x,Ue,Ae)))),x=x.return}ne.length!==0&&f.push({event:p,listeners:ne})}var $ye=/\r\n?/g,zye=/\u0000|\uFFFD/g;function U9(f){return(typeof f=="string"?f:""+f).replace($ye,`
`).replace(zye,"")}function F9(f,p){return p=U9(p),U9(f)===p}function er(f,p,x,E,I,j){switch(x){case"children":typeof E=="string"?p==="body"||p==="textarea"&&E===""||c0(f,E):(typeof E=="number"||typeof E=="bigint")&&p!=="body"&&c0(f,""+E);break;case"className":Fd(f,"class",E);break;case"tabIndex":Fd(f,"tabindex",E);break;case"dir":case"role":case"viewBox":case"width":case"height":Fd(f,x,E);break;case"style":F7(f,E,j);break;case"data":if(p!=="object"){Fd(f,"data",E);break}case"src":case"href":if(E===""&&(p!=="a"||x!=="href")){f.removeAttribute(x);break}if(E==null||typeof E=="function"||typeof E=="symbol"||typeof E=="boolean"){f.removeAttribute(x);break}E=DE(""+E),f.setAttribute(x,E);break;case"action":case"formAction":if(typeof E=="function"){f.setAttribute(x,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof j=="function"&&(x==="formAction"?(p!=="input"&&er(f,p,"name",I.name,I,null),er(f,p,"formEncType",I.formEncType,I,null),er(f,p,"formMethod",I.formMethod,I,null),er(f,p,"formTarget",I.formTarget,I,null)):(er(f,p,"encType",I.encType,I,null),er(f,p,"method",I.method,I,null),er(f,p,"target",I.target,I,null)));if(E==null||typeof E=="symbol"||typeof E=="boolean"){f.removeAttribute(x);break}E=DE(""+E),f.setAttribute(x,E);break;case"onClick":E!=null&&(f.onclick=tu);break;case"onScroll":E!=null&&En("scroll",f);break;case"onScrollEnd":E!=null&&En("scrollend",f);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(r(61));if(x=E.__html,x!=null){if(I.children!=null)throw Error(r(60));f.innerHTML=x}}break;case"multiple":f.multiple=E&&typeof E!="function"&&typeof E!="symbol";break;case"muted":f.muted=E&&typeof E!="function"&&typeof E!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(E==null||typeof E=="function"||typeof E=="boolean"||typeof E=="symbol"){f.removeAttribute("xlink:href");break}x=DE(""+E),f.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",x);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":E!=null&&typeof E!="function"&&typeof E!="symbol"?f.setAttribute(x,""+E):f.removeAttribute(x);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":E&&typeof E!="function"&&typeof E!="symbol"?f.setAttribute(x,""):f.removeAttribute(x);break;case"capture":case"download":E===!0?f.setAttribute(x,""):E!==!1&&E!=null&&typeof E!="function"&&typeof E!="symbol"?f.setAttribute(x,E):f.removeAttribute(x);break;case"cols":case"rows":case"size":case"span":E!=null&&typeof E!="function"&&typeof E!="symbol"&&!isNaN(E)&&1<=E?f.setAttribute(x,E):f.removeAttribute(x);break;case"rowSpan":case"start":E==null||typeof E=="function"||typeof E=="symbol"||isNaN(E)?f.removeAttribute(x):f.setAttribute(x,E);break;case"popover":En("beforetoggle",f),En("toggle",f),Ud(f,"popover",E);break;case"xlinkActuate":eu(f,"http://www.w3.org/1999/xlink","xlink:actuate",E);break;case"xlinkArcrole":eu(f,"http://www.w3.org/1999/xlink","xlink:arcrole",E);break;case"xlinkRole":eu(f,"http://www.w3.org/1999/xlink","xlink:role",E);break;case"xlinkShow":eu(f,"http://www.w3.org/1999/xlink","xlink:show",E);break;case"xlinkTitle":eu(f,"http://www.w3.org/1999/xlink","xlink:title",E);break;case"xlinkType":eu(f,"http://www.w3.org/1999/xlink","xlink:type",E);break;case"xmlBase":eu(f,"http://www.w3.org/XML/1998/namespace","xml:base",E);break;case"xmlLang":eu(f,"http://www.w3.org/XML/1998/namespace","xml:lang",E);break;case"xmlSpace":eu(f,"http://www.w3.org/XML/1998/namespace","xml:space",E);break;case"is":Ud(f,"is",E);break;case"innerText":case"textContent":break;default:(!(2<x.length)||x[0]!=="o"&&x[0]!=="O"||x[1]!=="n"&&x[1]!=="N")&&(x=gge.get(x)||x,Ud(f,x,E))}}function oI(f,p,x,E,I,j){switch(x){case"style":F7(f,E,j);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(r(61));if(x=E.__html,x!=null){if(I.children!=null)throw Error(r(60));f.innerHTML=x}}break;case"children":typeof E=="string"?c0(f,E):(typeof E=="number"||typeof E=="bigint")&&c0(f,""+E);break;case"onScroll":E!=null&&En("scroll",f);break;case"onScrollEnd":E!=null&&En("scrollend",f);break;case"onClick":E!=null&&(f.onclick=tu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ar.hasOwnProperty(x))e:{if(x[0]==="o"&&x[1]==="n"&&(I=x.endsWith("Capture"),p=x.slice(2,I?x.length-7:void 0),j=f[bn]||null,j=j!=null?j[x]:null,typeof j=="function"&&f.removeEventListener(p,j,I),typeof E=="function")){typeof j!="function"&&j!==null&&(x in f?f[x]=null:f.hasAttribute(x)&&f.removeAttribute(x)),f.addEventListener(p,E,I);break e}x in f?f[x]=E:E===!0?f.setAttribute(x,""):Ud(f,x,E)}}}function Xi(f,p,x){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":En("error",f),En("load",f);var E=!1,I=!1,j;for(j in x)if(x.hasOwnProperty(j)){var ne=x[j];if(ne!=null)switch(j){case"src":E=!0;break;case"srcSet":I=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,p));default:er(f,p,j,ne,x,null)}}I&&er(f,p,"srcSet",x.srcSet,x,null),E&&er(f,p,"src",x.src,x,null);return;case"input":En("invalid",f);var le=j=ne=I=null,Ae=null,Ue=null;for(E in x)if(x.hasOwnProperty(E)){var Ke=x[E];if(Ke!=null)switch(E){case"name":I=Ke;break;case"type":ne=Ke;break;case"checked":Ae=Ke;break;case"defaultChecked":Ue=Ke;break;case"value":j=Ke;break;case"defaultValue":le=Ke;break;case"children":case"dangerouslySetInnerHTML":if(Ke!=null)throw Error(r(137,p));break;default:er(f,p,E,Ke,x,null)}}D7(f,j,le,Ae,Ue,ne,I,!1);return;case"select":En("invalid",f),E=ne=j=null;for(I in x)if(x.hasOwnProperty(I)&&(le=x[I],le!=null))switch(I){case"value":j=le;break;case"defaultValue":ne=le;break;case"multiple":E=le;default:er(f,p,I,le,x,null)}p=j,x=ne,f.multiple=!!E,p!=null?l0(f,!!E,p,!1):x!=null&&l0(f,!!E,x,!0);return;case"textarea":En("invalid",f),j=I=E=null;for(ne in x)if(x.hasOwnProperty(ne)&&(le=x[ne],le!=null))switch(ne){case"value":E=le;break;case"defaultValue":I=le;break;case"children":j=le;break;case"dangerouslySetInnerHTML":if(le!=null)throw Error(r(91));break;default:er(f,p,ne,le,x,null)}B7(f,E,I,j);return;case"option":for(Ae in x)if(x.hasOwnProperty(Ae)&&(E=x[Ae],E!=null))switch(Ae){case"selected":f.selected=E&&typeof E!="function"&&typeof E!="symbol";break;default:er(f,p,Ae,E,x,null)}return;case"dialog":En("beforetoggle",f),En("toggle",f),En("cancel",f),En("close",f);break;case"iframe":case"object":En("load",f);break;case"video":case"audio":for(E=0;E<sb.length;E++)En(sb[E],f);break;case"image":En("error",f),En("load",f);break;case"details":En("toggle",f);break;case"embed":case"source":case"link":En("error",f),En("load",f);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ue in x)if(x.hasOwnProperty(Ue)&&(E=x[Ue],E!=null))switch(Ue){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,p));default:er(f,p,Ue,E,x,null)}return;default:if(bP(p)){for(Ke in x)x.hasOwnProperty(Ke)&&(E=x[Ke],E!==void 0&&oI(f,p,Ke,E,x,void 0));return}}for(le in x)x.hasOwnProperty(le)&&(E=x[le],E!=null&&er(f,p,le,E,x,null))}function Vye(f,p,x,E){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var I=null,j=null,ne=null,le=null,Ae=null,Ue=null,Ke=null;for(qe in x){var tt=x[qe];if(x.hasOwnProperty(qe)&&tt!=null)switch(qe){case"checked":break;case"value":break;case"defaultValue":Ae=tt;default:E.hasOwnProperty(qe)||er(f,p,qe,null,E,tt)}}for(var $e in E){var qe=E[$e];if(tt=x[$e],E.hasOwnProperty($e)&&(qe!=null||tt!=null))switch($e){case"type":j=qe;break;case"name":I=qe;break;case"checked":Ue=qe;break;case"defaultChecked":Ke=qe;break;case"value":ne=qe;break;case"defaultValue":le=qe;break;case"children":case"dangerouslySetInnerHTML":if(qe!=null)throw Error(r(137,p));break;default:qe!==tt&&er(f,p,$e,qe,E,tt)}}xP(f,ne,le,Ae,Ue,Ke,j,I);return;case"select":qe=ne=le=$e=null;for(j in x)if(Ae=x[j],x.hasOwnProperty(j)&&Ae!=null)switch(j){case"value":break;case"multiple":qe=Ae;default:E.hasOwnProperty(j)||er(f,p,j,null,E,Ae)}for(I in E)if(j=E[I],Ae=x[I],E.hasOwnProperty(I)&&(j!=null||Ae!=null))switch(I){case"value":$e=j;break;case"defaultValue":le=j;break;case"multiple":ne=j;default:j!==Ae&&er(f,p,I,j,E,Ae)}p=le,x=ne,E=qe,$e!=null?l0(f,!!x,$e,!1):!!E!=!!x&&(p!=null?l0(f,!!x,p,!0):l0(f,!!x,x?[]:"",!1));return;case"textarea":qe=$e=null;for(le in x)if(I=x[le],x.hasOwnProperty(le)&&I!=null&&!E.hasOwnProperty(le))switch(le){case"value":break;case"children":break;default:er(f,p,le,null,E,I)}for(ne in E)if(I=E[ne],j=x[ne],E.hasOwnProperty(ne)&&(I!=null||j!=null))switch(ne){case"value":$e=I;break;case"defaultValue":qe=I;break;case"children":break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(r(91));break;default:I!==j&&er(f,p,ne,I,E,j)}j7(f,$e,qe);return;case"option":for(var It in x)if($e=x[It],x.hasOwnProperty(It)&&$e!=null&&!E.hasOwnProperty(It))switch(It){case"selected":f.selected=!1;break;default:er(f,p,It,null,E,$e)}for(Ae in E)if($e=E[Ae],qe=x[Ae],E.hasOwnProperty(Ae)&&$e!==qe&&($e!=null||qe!=null))switch(Ae){case"selected":f.selected=$e&&typeof $e!="function"&&typeof $e!="symbol";break;default:er(f,p,Ae,$e,E,qe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Yt in x)$e=x[Yt],x.hasOwnProperty(Yt)&&$e!=null&&!E.hasOwnProperty(Yt)&&er(f,p,Yt,null,E,$e);for(Ue in E)if($e=E[Ue],qe=x[Ue],E.hasOwnProperty(Ue)&&$e!==qe&&($e!=null||qe!=null))switch(Ue){case"children":case"dangerouslySetInnerHTML":if($e!=null)throw Error(r(137,p));break;default:er(f,p,Ue,$e,E,qe)}return;default:if(bP(p)){for(var tr in x)$e=x[tr],x.hasOwnProperty(tr)&&$e!==void 0&&!E.hasOwnProperty(tr)&&oI(f,p,tr,void 0,E,$e);for(Ke in E)$e=E[Ke],qe=x[Ke],!E.hasOwnProperty(Ke)||$e===qe||$e===void 0&&qe===void 0||oI(f,p,Ke,$e,E,qe);return}}for(var Ie in x)$e=x[Ie],x.hasOwnProperty(Ie)&&$e!=null&&!E.hasOwnProperty(Ie)&&er(f,p,Ie,null,E,$e);for(tt in E)$e=E[tt],qe=x[tt],!E.hasOwnProperty(tt)||$e===qe||$e==null&&qe==null||er(f,p,tt,$e,E,qe)}function $9(f){switch(f){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Hye(){if(typeof performance.getEntriesByType=="function"){for(var f=0,p=0,x=performance.getEntriesByType("resource"),E=0;E<x.length;E++){var I=x[E],j=I.transferSize,ne=I.initiatorType,le=I.duration;if(j&&le&&$9(ne)){for(ne=0,le=I.responseEnd,E+=1;E<x.length;E++){var Ae=x[E],Ue=Ae.startTime;if(Ue>le)break;var Ke=Ae.transferSize,tt=Ae.initiatorType;Ke&&$9(tt)&&(Ae=Ae.responseEnd,ne+=Ke*(Ae<le?1:(le-Ue)/(Ae-Ue)))}if(--E,p+=8*(j+ne)/(I.duration/1e3),f++,10<f)break}}if(0<f)return p/f/1e6}return navigator.connection&&(f=navigator.connection.downlink,typeof f=="number")?f:5}var aI=null,lI=null;function IS(f){return f.nodeType===9?f:f.ownerDocument}function z9(f){switch(f){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function V9(f,p){if(f===0)switch(p){case"svg":return 1;case"math":return 2;default:return 0}return f===1&&p==="foreignObject"?0:f}function cI(f,p){return f==="textarea"||f==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.children=="bigint"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var uI=null;function qye(){var f=window.event;return f&&f.type==="popstate"?f===uI?!1:(uI=f,!0):(uI=null,!1)}var H9=typeof setTimeout=="function"?setTimeout:void 0,Gye=typeof clearTimeout=="function"?clearTimeout:void 0,q9=typeof Promise=="function"?Promise:void 0,Kye=typeof queueMicrotask=="function"?queueMicrotask:typeof q9<"u"?function(f){return q9.resolve(null).then(f).catch(Wye)}:H9;function Wye(f){setTimeout(function(){throw f})}function sf(f){return f==="head"}function G9(f,p){var x=p,E=0;do{var I=x.nextSibling;if(f.removeChild(x),I&&I.nodeType===8)if(x=I.data,x==="/$"||x==="/&"){if(E===0){f.removeChild(I),F0(p);return}E--}else if(x==="$"||x==="$?"||x==="$~"||x==="$!"||x==="&")E++;else if(x==="html")ab(f.ownerDocument.documentElement);else if(x==="head"){x=f.ownerDocument.head,ab(x);for(var j=x.firstChild;j;){var ne=j.nextSibling,le=j.nodeName;j[ca]||le==="SCRIPT"||le==="STYLE"||le==="LINK"&&j.rel.toLowerCase()==="stylesheet"||x.removeChild(j),j=ne}}else x==="body"&&ab(f.ownerDocument.body);x=I}while(x);F0(p)}function K9(f,p){var x=f;f=0;do{var E=x.nextSibling;if(x.nodeType===1?p?(x._stashedDisplay=x.style.display,x.style.display="none"):(x.style.display=x._stashedDisplay||"",x.getAttribute("style")===""&&x.removeAttribute("style")):x.nodeType===3&&(p?(x._stashedText=x.nodeValue,x.nodeValue=""):x.nodeValue=x._stashedText||""),E&&E.nodeType===8)if(x=E.data,x==="/$"){if(f===0)break;f--}else x!=="$"&&x!=="$?"&&x!=="$~"&&x!=="$!"||f++;x=E}while(x)}function dI(f){var p=f.firstChild;for(p&&p.nodeType===10&&(p=p.nextSibling);p;){var x=p;switch(p=p.nextSibling,x.nodeName){case"HTML":case"HEAD":case"BODY":dI(x),Zl(x);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(x.rel.toLowerCase()==="stylesheet")continue}f.removeChild(x)}}function Yye(f,p,x,E){for(;f.nodeType===1;){var I=x;if(f.nodeName.toLowerCase()!==p.toLowerCase()){if(!E&&(f.nodeName!=="INPUT"||f.type!=="hidden"))break}else if(E){if(!f[ca])switch(p){case"meta":if(!f.hasAttribute("itemprop"))break;return f;case"link":if(j=f.getAttribute("rel"),j==="stylesheet"&&f.hasAttribute("data-precedence"))break;if(j!==I.rel||f.getAttribute("href")!==(I.href==null||I.href===""?null:I.href)||f.getAttribute("crossorigin")!==(I.crossOrigin==null?null:I.crossOrigin)||f.getAttribute("title")!==(I.title==null?null:I.title))break;return f;case"style":if(f.hasAttribute("data-precedence"))break;return f;case"script":if(j=f.getAttribute("src"),(j!==(I.src==null?null:I.src)||f.getAttribute("type")!==(I.type==null?null:I.type)||f.getAttribute("crossorigin")!==(I.crossOrigin==null?null:I.crossOrigin))&&j&&f.hasAttribute("async")&&!f.hasAttribute("itemprop"))break;return f;default:return f}}else if(p==="input"&&f.type==="hidden"){var j=I.name==null?null:""+I.name;if(I.type==="hidden"&&f.getAttribute("name")===j)return f}else return f;if(f=va(f.nextSibling),f===null)break}return null}function Jye(f,p,x){if(p==="")return null;for(;f.nodeType!==3;)if((f.nodeType!==1||f.nodeName!=="INPUT"||f.type!=="hidden")&&!x||(f=va(f.nextSibling),f===null))return null;return f}function W9(f,p){for(;f.nodeType!==8;)if((f.nodeType!==1||f.nodeName!=="INPUT"||f.type!=="hidden")&&!p||(f=va(f.nextSibling),f===null))return null;return f}function fI(f){return f.data==="$?"||f.data==="$~"}function hI(f){return f.data==="$!"||f.data==="$?"&&f.ownerDocument.readyState!=="loading"}function Xye(f,p){var x=f.ownerDocument;if(f.data==="$~")f._reactRetry=p;else if(f.data!=="$?"||x.readyState!=="loading")p();else{var E=function(){p(),x.removeEventListener("DOMContentLoaded",E)};x.addEventListener("DOMContentLoaded",E),f._reactRetry=E}}function va(f){for(;f!=null;f=f.nextSibling){var p=f.nodeType;if(p===1||p===3)break;if(p===8){if(p=f.data,p==="$"||p==="$!"||p==="$?"||p==="$~"||p==="&"||p==="F!"||p==="F")break;if(p==="/$"||p==="/&")return null}}return f}var pI=null;function Y9(f){f=f.nextSibling;for(var p=0;f;){if(f.nodeType===8){var x=f.data;if(x==="/$"||x==="/&"){if(p===0)return va(f.nextSibling);p--}else x!=="$"&&x!=="$!"&&x!=="$?"&&x!=="$~"&&x!=="&"||p++}f=f.nextSibling}return null}function J9(f){f=f.previousSibling;for(var p=0;f;){if(f.nodeType===8){var x=f.data;if(x==="$"||x==="$!"||x==="$?"||x==="$~"||x==="&"){if(p===0)return f;p--}else x!=="/$"&&x!=="/&"||p++}f=f.previousSibling}return null}function X9(f,p,x){switch(p=IS(x),f){case"html":if(f=p.documentElement,!f)throw Error(r(452));return f;case"head":if(f=p.head,!f)throw Error(r(453));return f;case"body":if(f=p.body,!f)throw Error(r(454));return f;default:throw Error(r(451))}}function ab(f){for(var p=f.attributes;p.length;)f.removeAttributeNode(p[0]);Zl(f)}var ba=new Map,Q9=new Set;function RS(f){return typeof f.getRootNode=="function"?f.getRootNode():f.nodeType===9?f:f.ownerDocument}var yu=V.d;V.d={f:Qye,r:Zye,D:exe,C:txe,L:nxe,m:rxe,X:sxe,S:ixe,M:oxe};function Qye(){var f=yu.f(),p=SS();return f||p}function Zye(f){var p=Io(f);p!==null&&p.tag===5&&p.type==="form"?mF(p):yu.r(f)}var j0=typeof document>"u"?null:document;function Z9(f,p,x){var E=j0;if(E&&typeof p=="string"&&p){var I=fa(p);I='link[rel="'+f+'"][href="'+I+'"]',typeof x=="string"&&(I+='[crossorigin="'+x+'"]'),Q9.has(I)||(Q9.add(I),f={rel:f,crossOrigin:x,href:p},E.querySelector(I)===null&&(p=E.createElement("link"),Xi(p,"link",f),xr(p),E.head.appendChild(p)))}}function exe(f){yu.D(f),Z9("dns-prefetch",f,null)}function txe(f,p){yu.C(f,p),Z9("preconnect",f,p)}function nxe(f,p,x){yu.L(f,p,x);var E=j0;if(E&&f&&p){var I='link[rel="preload"][as="'+fa(p)+'"]';p==="image"&&x&&x.imageSrcSet?(I+='[imagesrcset="'+fa(x.imageSrcSet)+'"]',typeof x.imageSizes=="string"&&(I+='[imagesizes="'+fa(x.imageSizes)+'"]')):I+='[href="'+fa(f)+'"]';var j=I;switch(p){case"style":j=B0(f);break;case"script":j=U0(f)}ba.has(j)||(f=h({rel:"preload",href:p==="image"&&x&&x.imageSrcSet?void 0:f,as:p},x),ba.set(j,f),E.querySelector(I)!==null||p==="style"&&E.querySelector(lb(j))||p==="script"&&E.querySelector(cb(j))||(p=E.createElement("link"),Xi(p,"link",f),xr(p),E.head.appendChild(p)))}}function rxe(f,p){yu.m(f,p);var x=j0;if(x&&f){var E=p&&typeof p.as=="string"?p.as:"script",I='link[rel="modulepreload"][as="'+fa(E)+'"][href="'+fa(f)+'"]',j=I;switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":j=U0(f)}if(!ba.has(j)&&(f=h({rel:"modulepreload",href:f},p),ba.set(j,f),x.querySelector(I)===null)){switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(x.querySelector(cb(j)))return}E=x.createElement("link"),Xi(E,"link",f),xr(E),x.head.appendChild(E)}}}function ixe(f,p,x){yu.S(f,p,x);var E=j0;if(E&&f){var I=Ro(E).hoistableStyles,j=B0(f);p=p||"default";var ne=I.get(j);if(!ne){var le={loading:0,preload:null};if(ne=E.querySelector(lb(j)))le.loading=5;else{f=h({rel:"stylesheet",href:f,"data-precedence":p},x),(x=ba.get(j))&&mI(f,x);var Ae=ne=E.createElement("link");xr(Ae),Xi(Ae,"link",f),Ae._p=new Promise(function(Ue,Ke){Ae.onload=Ue,Ae.onerror=Ke}),Ae.addEventListener("load",function(){le.loading|=1}),Ae.addEventListener("error",function(){le.loading|=2}),le.loading|=4,OS(ne,p,E)}ne={type:"stylesheet",instance:ne,count:1,state:le},I.set(j,ne)}}}function sxe(f,p){yu.X(f,p);var x=j0;if(x&&f){var E=Ro(x).hoistableScripts,I=U0(f),j=E.get(I);j||(j=x.querySelector(cb(I)),j||(f=h({src:f,async:!0},p),(p=ba.get(I))&&gI(f,p),j=x.createElement("script"),xr(j),Xi(j,"link",f),x.head.appendChild(j)),j={type:"script",instance:j,count:1,state:null},E.set(I,j))}}function oxe(f,p){yu.M(f,p);var x=j0;if(x&&f){var E=Ro(x).hoistableScripts,I=U0(f),j=E.get(I);j||(j=x.querySelector(cb(I)),j||(f=h({src:f,async:!0,type:"module"},p),(p=ba.get(I))&&gI(f,p),j=x.createElement("script"),xr(j),Xi(j,"link",f),x.head.appendChild(j)),j={type:"script",instance:j,count:1,state:null},E.set(I,j))}}function e$(f,p,x,E){var I=(I=se.current)?RS(I):null;if(!I)throw Error(r(446));switch(f){case"meta":case"title":return null;case"style":return typeof x.precedence=="string"&&typeof x.href=="string"?(p=B0(x.href),x=Ro(I).hoistableStyles,E=x.get(p),E||(E={type:"style",instance:null,count:0,state:null},x.set(p,E)),E):{type:"void",instance:null,count:0,state:null};case"link":if(x.rel==="stylesheet"&&typeof x.href=="string"&&typeof x.precedence=="string"){f=B0(x.href);var j=Ro(I).hoistableStyles,ne=j.get(f);if(ne||(I=I.ownerDocument||I,ne={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},j.set(f,ne),(j=I.querySelector(lb(f)))&&!j._p&&(ne.instance=j,ne.state.loading=5),ba.has(f)||(x={rel:"preload",as:"style",href:x.href,crossOrigin:x.crossOrigin,integrity:x.integrity,media:x.media,hrefLang:x.hrefLang,referrerPolicy:x.referrerPolicy},ba.set(f,x),j||axe(I,f,x,ne.state))),p&&E===null)throw Error(r(528,""));return ne}if(p&&E!==null)throw Error(r(529,""));return null;case"script":return p=x.async,x=x.src,typeof x=="string"&&p&&typeof p!="function"&&typeof p!="symbol"?(p=U0(x),x=Ro(I).hoistableScripts,E=x.get(p),E||(E={type:"script",instance:null,count:0,state:null},x.set(p,E)),E):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,f))}}function B0(f){return'href="'+fa(f)+'"'}function lb(f){return'link[rel="stylesheet"]['+f+"]"}function t$(f){return h({},f,{"data-precedence":f.precedence,precedence:null})}function axe(f,p,x,E){f.querySelector('link[rel="preload"][as="style"]['+p+"]")?E.loading=1:(p=f.createElement("link"),E.preload=p,p.addEventListener("load",function(){return E.loading|=1}),p.addEventListener("error",function(){return E.loading|=2}),Xi(p,"link",x),xr(p),f.head.appendChild(p))}function U0(f){return'[src="'+fa(f)+'"]'}function cb(f){return"script[async]"+f}function n$(f,p,x){if(p.count++,p.instance===null)switch(p.type){case"style":var E=f.querySelector('style[data-href~="'+fa(x.href)+'"]');if(E)return p.instance=E,xr(E),E;var I=h({},x,{"data-href":x.href,"data-precedence":x.precedence,href:null,precedence:null});return E=(f.ownerDocument||f).createElement("style"),xr(E),Xi(E,"style",I),OS(E,x.precedence,f),p.instance=E;case"stylesheet":I=B0(x.href);var j=f.querySelector(lb(I));if(j)return p.state.loading|=4,p.instance=j,xr(j),j;E=t$(x),(I=ba.get(I))&&mI(E,I),j=(f.ownerDocument||f).createElement("link"),xr(j);var ne=j;return ne._p=new Promise(function(le,Ae){ne.onload=le,ne.onerror=Ae}),Xi(j,"link",E),p.state.loading|=4,OS(j,x.precedence,f),p.instance=j;case"script":return j=U0(x.src),(I=f.querySelector(cb(j)))?(p.instance=I,xr(I),I):(E=x,(I=ba.get(j))&&(E=h({},x),gI(E,I)),f=f.ownerDocument||f,I=f.createElement("script"),xr(I),Xi(I,"link",E),f.head.appendChild(I),p.instance=I);case"void":return null;default:throw Error(r(443,p.type))}else p.type==="stylesheet"&&(p.state.loading&4)===0&&(E=p.instance,p.state.loading|=4,OS(E,x.precedence,f));return p.instance}function OS(f,p,x){for(var E=x.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),I=E.length?E[E.length-1]:null,j=I,ne=0;ne<E.length;ne++){var le=E[ne];if(le.dataset.precedence===p)j=le;else if(j!==I)break}j?j.parentNode.insertBefore(f,j.nextSibling):(p=x.nodeType===9?x.head:x,p.insertBefore(f,p.firstChild))}function mI(f,p){f.crossOrigin==null&&(f.crossOrigin=p.crossOrigin),f.referrerPolicy==null&&(f.referrerPolicy=p.referrerPolicy),f.title==null&&(f.title=p.title)}function gI(f,p){f.crossOrigin==null&&(f.crossOrigin=p.crossOrigin),f.referrerPolicy==null&&(f.referrerPolicy=p.referrerPolicy),f.integrity==null&&(f.integrity=p.integrity)}var MS=null;function r$(f,p,x){if(MS===null){var E=new Map,I=MS=new Map;I.set(x,E)}else I=MS,E=I.get(x),E||(E=new Map,I.set(x,E));if(E.has(f))return E;for(E.set(f,null),x=x.getElementsByTagName(f),I=0;I<x.length;I++){var j=x[I];if(!(j[ca]||j[At]||f==="link"&&j.getAttribute("rel")==="stylesheet")&&j.namespaceURI!=="http://www.w3.org/2000/svg"){var ne=j.getAttribute(p)||"";ne=f+ne;var le=E.get(ne);le?le.push(j):E.set(ne,[j])}}return E}function i$(f,p,x){f=f.ownerDocument||f,f.head.insertBefore(x,p==="title"?f.querySelector("head > title"):null)}function lxe(f,p,x){if(x===1||p.itemProp!=null)return!1;switch(f){case"meta":case"title":return!0;case"style":if(typeof p.precedence!="string"||typeof p.href!="string"||p.href==="")break;return!0;case"link":if(typeof p.rel!="string"||typeof p.href!="string"||p.href===""||p.onLoad||p.onError)break;switch(p.rel){case"stylesheet":return f=p.disabled,typeof p.precedence=="string"&&f==null;default:return!0}case"script":if(p.async&&typeof p.async!="function"&&typeof p.async!="symbol"&&!p.onLoad&&!p.onError&&p.src&&typeof p.src=="string")return!0}return!1}function s$(f){return!(f.type==="stylesheet"&&(f.state.loading&3)===0)}function cxe(f,p,x,E){if(x.type==="stylesheet"&&(typeof E.media!="string"||matchMedia(E.media).matches!==!1)&&(x.state.loading&4)===0){if(x.instance===null){var I=B0(E.href),j=p.querySelector(lb(I));if(j){p=j._p,p!==null&&typeof p=="object"&&typeof p.then=="function"&&(f.count++,f=LS.bind(f),p.then(f,f)),x.state.loading|=4,x.instance=j,xr(j);return}j=p.ownerDocument||p,E=t$(E),(I=ba.get(I))&&mI(E,I),j=j.createElement("link"),xr(j);var ne=j;ne._p=new Promise(function(le,Ae){ne.onload=le,ne.onerror=Ae}),Xi(j,"link",E),x.instance=j}f.stylesheets===null&&(f.stylesheets=new Map),f.stylesheets.set(x,p),(p=x.state.preload)&&(x.state.loading&3)===0&&(f.count++,x=LS.bind(f),p.addEventListener("load",x),p.addEventListener("error",x))}}var yI=0;function uxe(f,p){return f.stylesheets&&f.count===0&&jS(f,f.stylesheets),0<f.count||0<f.imgCount?function(x){var E=setTimeout(function(){if(f.stylesheets&&jS(f,f.stylesheets),f.unsuspend){var j=f.unsuspend;f.unsuspend=null,j()}},6e4+p);0<f.imgBytes&&yI===0&&(yI=62500*Hye());var I=setTimeout(function(){if(f.waitingForImages=!1,f.count===0&&(f.stylesheets&&jS(f,f.stylesheets),f.unsuspend)){var j=f.unsuspend;f.unsuspend=null,j()}},(f.imgBytes>yI?50:800)+p);return f.unsuspend=x,function(){f.unsuspend=null,clearTimeout(E),clearTimeout(I)}}:null}function LS(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)jS(this,this.stylesheets);else if(this.unsuspend){var f=this.unsuspend;this.unsuspend=null,f()}}}var DS=null;function jS(f,p){f.stylesheets=null,f.unsuspend!==null&&(f.count++,DS=new Map,p.forEach(dxe,f),DS=null,LS.call(f))}function dxe(f,p){if(!(p.state.loading&4)){var x=DS.get(f);if(x)var E=x.get(null);else{x=new Map,DS.set(f,x);for(var I=f.querySelectorAll("link[data-precedence],style[data-precedence]"),j=0;j<I.length;j++){var ne=I[j];(ne.nodeName==="LINK"||ne.getAttribute("media")!=="not all")&&(x.set(ne.dataset.precedence,ne),E=ne)}E&&x.set(null,E)}I=p.instance,ne=I.getAttribute("data-precedence"),j=x.get(ne)||E,j===E&&x.set(null,I),x.set(ne,I),this.count++,E=LS.bind(this),I.addEventListener("load",E),I.addEventListener("error",E),j?j.parentNode.insertBefore(I,j.nextSibling):(f=f.nodeType===9?f.head:f,f.insertBefore(I,f.firstChild)),p.state.loading|=4}}var ub={$$typeof:N,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function fxe(f,p,x,E,I,j,ne,le,Ae){this.tag=1,this.containerInfo=f,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ae(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ae(0),this.hiddenUpdates=ae(null),this.identifierPrefix=E,this.onUncaughtError=I,this.onCaughtError=j,this.onRecoverableError=ne,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Ae,this.incompleteTransitions=new Map}function o$(f,p,x,E,I,j,ne,le,Ae,Ue,Ke,tt){return f=new fxe(f,p,x,ne,Ae,Ue,Ke,tt,le),p=1,j===!0&&(p|=24),j=Mo(3,null,null,p),f.current=j,j.stateNode=f,p=JP(),p.refCount++,f.pooledCache=p,p.refCount++,j.memoizedState={element:E,isDehydrated:x,cache:p},e_(j),f}function a$(f){return f?(f=g0,f):g0}function l$(f,p,x,E,I,j){I=a$(I),E.context===null?E.context=I:E.pendingContext=I,E=Kd(p),E.payload={element:x},j=j===void 0?null:j,j!==null&&(E.callback=j),x=Wd(f,E,p),x!==null&&(po(x,f,p),zv(x,f,p))}function c$(f,p){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var x=f.retryLane;f.retryLane=x!==0&&x<p?x:p}}function xI(f,p){c$(f,p),(f=f.alternate)&&c$(f,p)}function u$(f){if(f.tag===13||f.tag===31){var p=jh(f,67108864);p!==null&&po(p,f,67108864),xI(f,67108864)}}function d$(f){if(f.tag===13||f.tag===31){var p=Uo();p=Ve(p);var x=jh(f,p);x!==null&&po(x,f,p),xI(f,p)}}var BS=!0;function hxe(f,p,x,E){var I=L.T;L.T=null;var j=V.p;try{V.p=2,vI(f,p,x,E)}finally{V.p=j,L.T=I}}function pxe(f,p,x,E){var I=L.T;L.T=null;var j=V.p;try{V.p=8,vI(f,p,x,E)}finally{V.p=j,L.T=I}}function vI(f,p,x,E){if(BS){var I=bI(E);if(I===null)sI(f,p,E,US,x),h$(f,E);else if(gxe(I,f,p,x,E))E.stopPropagation();else if(h$(f,E),p&4&&-1<mxe.indexOf(f)){for(;I!==null;){var j=Io(I);if(j!==null)switch(j.tag){case 3:if(j=j.stateNode,j.current.memoizedState.isDehydrated){var ne=sn(j.pendingLanes);if(ne!==0){var le=j;for(le.pendingLanes|=2,le.entangledLanes|=2;ne;){var Ae=1<<31-ye(ne);le.entanglements[1]|=Ae,ne&=~Ae}rc(j),(Hn&6)===0&&(wS=pt()+500,ib(0))}}break;case 31:case 13:le=jh(j,2),le!==null&&po(le,j,2),SS(),xI(j,2)}if(j=bI(E),j===null&&sI(f,p,E,US,x),j===I)break;I=j}I!==null&&E.stopPropagation()}else sI(f,p,E,null,x)}}function bI(f){return f=EP(f),wI(f)}var US=null;function wI(f){if(US=null,f=_o(f),f!==null){var p=s(f);if(p===null)f=null;else{var x=p.tag;if(x===13){if(f=o(p),f!==null)return f;f=null}else if(x===31){if(f=a(p),f!==null)return f;f=null}else if(x===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;f=null}else p!==f&&(f=null)}}return US=f,null}function f$(f){switch(f){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Kt()){case Re:return 2;case He:return 8;case gt:case dt:return 32;case ie:return 268435456;default:return 32}default:return 32}}var EI=!1,of=null,af=null,lf=null,db=new Map,fb=new Map,cf=[],mxe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function h$(f,p){switch(f){case"focusin":case"focusout":of=null;break;case"dragenter":case"dragleave":af=null;break;case"mouseover":case"mouseout":lf=null;break;case"pointerover":case"pointerout":db.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":fb.delete(p.pointerId)}}function hb(f,p,x,E,I,j){return f===null||f.nativeEvent!==j?(f={blockedOn:p,domEventName:x,eventSystemFlags:E,nativeEvent:j,targetContainers:[I]},p!==null&&(p=Io(p),p!==null&&u$(p)),f):(f.eventSystemFlags|=E,p=f.targetContainers,I!==null&&p.indexOf(I)===-1&&p.push(I),f)}function gxe(f,p,x,E,I){switch(p){case"focusin":return of=hb(of,f,p,x,E,I),!0;case"dragenter":return af=hb(af,f,p,x,E,I),!0;case"mouseover":return lf=hb(lf,f,p,x,E,I),!0;case"pointerover":var j=I.pointerId;return db.set(j,hb(db.get(j)||null,f,p,x,E,I)),!0;case"gotpointercapture":return j=I.pointerId,fb.set(j,hb(fb.get(j)||null,f,p,x,E,I)),!0}return!1}function p$(f){var p=_o(f.target);if(p!==null){var x=s(p);if(x!==null){if(p=x.tag,p===13){if(p=o(x),p!==null){f.blockedOn=p,ot(f.priority,function(){d$(x)});return}}else if(p===31){if(p=a(x),p!==null){f.blockedOn=p,ot(f.priority,function(){d$(x)});return}}else if(p===3&&x.stateNode.current.memoizedState.isDehydrated){f.blockedOn=x.tag===3?x.stateNode.containerInfo:null;return}}}f.blockedOn=null}function FS(f){if(f.blockedOn!==null)return!1;for(var p=f.targetContainers;0<p.length;){var x=bI(f.nativeEvent);if(x===null){x=f.nativeEvent;var E=new x.constructor(x.type,x);wP=E,x.target.dispatchEvent(E),wP=null}else return p=Io(x),p!==null&&u$(p),f.blockedOn=x,!1;p.shift()}return!0}function m$(f,p,x){FS(f)&&x.delete(p)}function yxe(){EI=!1,of!==null&&FS(of)&&(of=null),af!==null&&FS(af)&&(af=null),lf!==null&&FS(lf)&&(lf=null),db.forEach(m$),fb.forEach(m$)}function $S(f,p){f.blockedOn===p&&(f.blockedOn=null,EI||(EI=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,yxe)))}var zS=null;function g$(f){zS!==f&&(zS=f,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){zS===f&&(zS=null);for(var p=0;p<f.length;p+=3){var x=f[p],E=f[p+1],I=f[p+2];if(typeof E!="function"){if(wI(E||x)===null)continue;break}var j=Io(x);j!==null&&(f.splice(p,3),p-=3,b_(j,{pending:!0,data:I,method:x.method,action:E},E,I))}}))}function F0(f){function p(Ae){return $S(Ae,f)}of!==null&&$S(of,f),af!==null&&$S(af,f),lf!==null&&$S(lf,f),db.forEach(p),fb.forEach(p);for(var x=0;x<cf.length;x++){var E=cf[x];E.blockedOn===f&&(E.blockedOn=null)}for(;0<cf.length&&(x=cf[0],x.blockedOn===null);)p$(x),x.blockedOn===null&&cf.shift();if(x=(f.ownerDocument||f).$$reactFormReplay,x!=null)for(E=0;E<x.length;E+=3){var I=x[E],j=x[E+1],ne=I[bn]||null;if(typeof j=="function")ne||g$(x);else if(ne){var le=null;if(j&&j.hasAttribute("formAction")){if(I=j,ne=j[bn]||null)le=ne.formAction;else if(wI(I)!==null)continue}else le=ne.action;typeof le=="function"?x[E+1]=le:(x.splice(E,3),E-=3),g$(x)}}}function y$(){function f(j){j.canIntercept&&j.info==="react-transition"&&j.intercept({handler:function(){return new Promise(function(ne){return I=ne})},focusReset:"manual",scroll:"manual"})}function p(){I!==null&&(I(),I=null),E||setTimeout(x,20)}function x(){if(!E&&!navigation.transition){var j=navigation.currentEntry;j&&j.url!=null&&navigation.navigate(j.url,{state:j.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var E=!1,I=null;return navigation.addEventListener("navigate",f),navigation.addEventListener("navigatesuccess",p),navigation.addEventListener("navigateerror",p),setTimeout(x,100),function(){E=!0,navigation.removeEventListener("navigate",f),navigation.removeEventListener("navigatesuccess",p),navigation.removeEventListener("navigateerror",p),I!==null&&(I(),I=null)}}}function SI(f){this._internalRoot=f}VS.prototype.render=SI.prototype.render=function(f){var p=this._internalRoot;if(p===null)throw Error(r(409));var x=p.current,E=Uo();l$(x,E,f,p,null,null)},VS.prototype.unmount=SI.prototype.unmount=function(){var f=this._internalRoot;if(f!==null){this._internalRoot=null;var p=f.containerInfo;l$(f.current,2,null,f,null,null),SS(),p[ol]=null}};function VS(f){this._internalRoot=f}VS.prototype.unstable_scheduleHydration=function(f){if(f){var p=Ht();f={blockedOn:null,target:f,priority:p};for(var x=0;x<cf.length&&p!==0&&p<cf[x].priority;x++);cf.splice(x,0,f),x===0&&p$(f)}};var x$=e.version;if(x$!=="19.2.3")throw Error(r(527,x$,"19.2.3"));V.findDOMNode=function(f){var p=f._reactInternals;if(p===void 0)throw typeof f.render=="function"?Error(r(188)):(f=Object.keys(f).join(","),Error(r(268,f)));return f=c(p),f=f!==null?u(f):null,f=f===null?null:f.stateNode,f};var xxe={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var HS=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!HS.isDisabled&&HS.supportsFiber)try{ue=HS.inject(xxe),Se=HS}catch{}}return gb.createRoot=function(f,p){if(!i(f))throw Error(r(299));var x=!1,E="",I=TF,j=kF,ne=NF;return p!=null&&(p.unstable_strictMode===!0&&(x=!0),p.identifierPrefix!==void 0&&(E=p.identifierPrefix),p.onUncaughtError!==void 0&&(I=p.onUncaughtError),p.onCaughtError!==void 0&&(j=p.onCaughtError),p.onRecoverableError!==void 0&&(ne=p.onRecoverableError)),p=o$(f,1,!1,null,null,x,E,null,I,j,ne,y$),f[ol]=p.current,iI(f),new SI(p)},gb.hydrateRoot=function(f,p,x){if(!i(f))throw Error(r(299));var E=!1,I="",j=TF,ne=kF,le=NF,Ae=null;return x!=null&&(x.unstable_strictMode===!0&&(E=!0),x.identifierPrefix!==void 0&&(I=x.identifierPrefix),x.onUncaughtError!==void 0&&(j=x.onUncaughtError),x.onCaughtError!==void 0&&(ne=x.onCaughtError),x.onRecoverableError!==void 0&&(le=x.onRecoverableError),x.formState!==void 0&&(Ae=x.formState)),p=o$(f,1,!0,p,x??null,E,I,Ae,j,ne,le,y$),p.context=a$(null),x=p.current,E=Uo(),E=Ve(E),I=Kd(E),I.callback=null,Wd(x,I,E),x=E,p.current.lanes=x,Q(p,x),rc(p),f[ol]=p.current,iI(f),new VS(p)},gb.version="19.2.3",gb}var P$;function zxe(){if(P$)return CI.exports;P$=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),CI.exports=$xe(),CI.exports}var Vxe=zxe();const Hxe=gs(Vxe),qxe="modulepreload",Gxe=function(t){return"/"+t},_$={},Nl=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let o=function(c){return Promise.all(c.map(u=>Promise.resolve(u).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=o(n.map(c=>{if(c=Gxe(c),c in _$)return;_$[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const m=document.createElement("link");if(m.rel=u?"stylesheet":qxe,u||(m.as="script"),m.crossOrigin="",m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),u)return new Promise((g,y)=>{m.addEventListener("load",g),m.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};var Sc=function(){return Sc=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Sc.apply(this,arguments)};function $x(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Kxe(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function Wxe(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}const Yxe=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class MD extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class Jxe extends MD{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class I$ extends MD{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class R$ extends MD{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var n3;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(n3||(n3={}));class Xxe{constructor(e,{headers:n={},customFetch:r,region:i=n3.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=Yxe(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Kxe(this,arguments,void 0,function*(n,r={}){var i;let s,o;try{const{headers:a,method:l,body:c,signal:u,timeout:h}=r;let m={},{region:g}=r;g||(g=this.region);const y=new URL(`${this.url}/${n}`);g&&g!=="any"&&(m["x-region"]=g,y.searchParams.set("forceFunctionRegion",g));let v;c&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",v=c):typeof c=="string"?(m["Content-Type"]="text/plain",v=c):typeof FormData<"u"&&c instanceof FormData?v=c:(m["Content-Type"]="application/json",v=JSON.stringify(c)):v=c;let b=u;h&&(o=new AbortController,s=setTimeout(()=>o.abort(),h),u?(b=o.signal,u.addEventListener("abort",()=>o.abort())):b=o.signal);const w=yield this.fetch(y.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),a),body:v,signal:b}).catch(D=>{throw new Jxe(D)}),k=w.headers.get("x-relay-error");if(k&&k==="true")throw new I$(w);if(!w.ok)throw new R$(w);let N=((i=w.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),R;return N==="application/json"?R=yield w.json():N==="application/octet-stream"||N==="application/pdf"?R=yield w.blob():N==="text/event-stream"?R=w:N==="multipart/form-data"?R=yield w.formData():R=yield w.text(),{data:R,error:null,response:w}}catch(a){return{data:null,error:a,response:a instanceof R$||a instanceof I$?a.context:void 0}}finally{s&&clearTimeout(s)}})}}var Qxe=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},Zxe=class{constructor(t){var e,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{let o=null,a=null,l=null,c=s.status,u=s.statusText;if(s.ok){var h,m;if(n.method!=="HEAD"){var g;const w=await s.text();w===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((g=n.headers.get("Accept"))===null||g===void 0)&&g.includes("application/vnd.pgrst.plan+text"))?a=w:a=JSON.parse(w))}const v=(h=n.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),b=(m=s.headers.get("content-range"))===null||m===void 0?void 0:m.split("/");v&&b&&b.length>1&&(l=parseInt(b[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(a)&&(a.length>1?(o={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,l=null,c=406,u="Not Acceptable"):a.length===1?a=a[0]:a=null)}else{var y;const v=await s.text();try{o=JSON.parse(v),Array.isArray(o)&&s.status===404&&(a=[],o=null,c=200,u="OK")}catch{s.status===404&&v===""?(c=204,u="No Content"):o={message:v}}if(o&&n.isMaybeSingle&&(!(o==null||(y=o.details)===null||y===void 0)&&y.includes("0 rows"))&&(o=null,c=200,u="OK"),o&&n.shouldThrowOnError)throw new Qxe(o)}return{error:o,data:a,count:l,status:c,statusText:u}});return this.shouldThrowOnError||(i=i.catch(s=>{var o;let a="";const l=s==null?void 0:s.cause;if(l){var c,u,h,m;const y=(c=l==null?void 0:l.message)!==null&&c!==void 0?c:"",v=(u=l==null?void 0:l.code)!==null&&u!==void 0?u:"";a=`${(h=s==null?void 0:s.name)!==null&&h!==void 0?h:"FetchError"}: ${s==null?void 0:s.message}`,a+=`

Caused by: ${(m=l==null?void 0:l.name)!==null&&m!==void 0?m:"Error"}: ${y}`,v&&(a+=` (${v})`),l!=null&&l.stack&&(a+=`
${l.stack}`)}else{var g;a=(g=s==null?void 0:s.stack)!==null&&g!==void 0?g:""}return{error:{message:`${(o=s==null?void 0:s.name)!==null&&o!==void 0?o:"FetchError"}: ${s==null?void 0:s.message}`,details:a,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),i.then(t,e)}returns(){return this}overrideTypes(){return this}},eve=class extends Zxe{select(t){let e=!1;const n=(t??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){const s=i?`${i}.order`:"order",o=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${o?`${o},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"offset":`${r}.offset`,s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(s,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:s="text"}={}){var o;const a=[t?"analyze":null,e?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${s}; for="${l}"; options=${a};`),s==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const O$=new RegExp("[,()]");var yg=class extends eve{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&O$.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}notIn(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&O$.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`not.in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const s=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${s}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}},tve=class{constructor(t,{headers:e={},schema:n,fetch:r}){this.url=t,this.headers=new Headers(e),this.schema=n,this.fetch=r}select(t,e){const{head:n=!1,count:r}=e??{},i=n?"HEAD":"GET";let s=!1;const o=(t??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),r&&this.headers.append("Prefer",`count=${r}`),new yg({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:n=!0}={}){var r;const i="POST";if(e&&this.headers.append("Prefer",`count=${e}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const s=t.reduce((o,a)=>o.concat(Object.keys(a)),[]);if(s.length>0){const o=[...new Set(s)].map(a=>`"${a}"`);this.url.searchParams.set("columns",o.join(","))}}return new yg({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}={}){var s;const o="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&this.url.searchParams.set("on_conflict",e),r&&this.headers.append("Prefer",`count=${r}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const a=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new yg({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}update(t,{count:e}={}){var n;const r="PATCH";return e&&this.headers.append("Prefer",`count=${e}`),new yg({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var e;const n="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new yg({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},nve=class qee{constructor(e,{headers:n={},schema:r,fetch:i}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=i}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new tve(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new qee(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:i=!1,count:s}={}){var o;let a;const l=new URL(`${this.url}/rpc/${e}`);let c;r||i?(a=r?"HEAD":"GET",Object.entries(n).filter(([h,m])=>m!==void 0).map(([h,m])=>[h,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([h,m])=>{l.searchParams.append(h,m)})):(a="POST",c=n);const u=new Headers(this.headers);return s&&u.set("Prefer",`count=${s}`),new yg({method:a,url:l,headers:u,schema:this.schemaName,body:c,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class rve{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof Dl<"u"){const n=Dl.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const ive="2.89.0",sve=`realtime-js/${ive}`,Gee="1.0.0",ove="2.0.0",M$=Gee,r3=1e4,ave=1e3,lve=100;var Cf;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Cf||(Cf={}));var Ei;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Ei||(Ei={}));var kl;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(kl||(kl={}));var i3;(function(t){t.websocket="websocket"})(i3||(i3={}));var gp;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(gp||(gp={}));class cve{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},o=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(e,n,r){var i,s;const o=e.topic,a=(i=e.ref)!==null&&i!==void 0?i:"",l=(s=e.join_ref)!==null&&s!==void 0?s:"",c=e.payload.event,u=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},h=Object.keys(u).length===0?"":JSON.stringify(u);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`userEvent length ${c.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`metadata length ${h.length} exceeds maximum of 255`);const m=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+a.length+o.length+c.length+h.length,g=new ArrayBuffer(this.HEADER_LENGTH+m);let y=new DataView(g),v=0;y.setUint8(v++,this.KINDS.userBroadcastPush),y.setUint8(v++,l.length),y.setUint8(v++,a.length),y.setUint8(v++,o.length),y.setUint8(v++,c.length),y.setUint8(v++,h.length),y.setUint8(v++,n),Array.from(l,w=>y.setUint8(v++,w.charCodeAt(0))),Array.from(a,w=>y.setUint8(v++,w.charCodeAt(0))),Array.from(o,w=>y.setUint8(v++,w.charCodeAt(0))),Array.from(c,w=>y.setUint8(v++,w.charCodeAt(0))),Array.from(h,w=>y.setUint8(v++,w.charCodeAt(0)));var b=new Uint8Array(g.byteLength+r.byteLength);return b.set(new Uint8Array(g),0),b.set(new Uint8Array(r),g.byteLength),b.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[i,s,o,a,l]=r;return n({join_ref:i,ref:s,topic:o,event:a,payload:l})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),i=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,i)}}_decodeUserBroadcast(e,n,r){const i=n.getUint8(1),s=n.getUint8(2),o=n.getUint8(3),a=n.getUint8(4);let l=this.HEADER_LENGTH+4;const c=r.decode(e.slice(l,l+i));l=l+i;const u=r.decode(e.slice(l,l+s));l=l+s;const h=r.decode(e.slice(l,l+o));l=l+o;const m=e.slice(l,e.byteLength),g=a===this.JSON_ENCODING?JSON.parse(r.decode(m)):m,y={type:this.BROADCAST_EVENT,event:u,payload:g};return o>0&&(y.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST_EVENT,payload:y}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>n.includes(r)))}}class Kee{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var fr;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(fr||(fr={}));const L$=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((s,o)=>(s[o]=uve(o,t,e,i),s),{}):{}},uve=(t,e,n,r)=>{const i=e.find(a=>a.name===t),s=i==null?void 0:i.type,o=n[t];return s&&!r.includes(s)?Wee(s,o):s3(o)},Wee=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return pve(e,n)}switch(t){case fr.bool:return dve(e);case fr.float4:case fr.float8:case fr.int2:case fr.int4:case fr.int8:case fr.numeric:case fr.oid:return fve(e);case fr.json:case fr.jsonb:return hve(e);case fr.timestamp:return mve(e);case fr.abstime:case fr.date:case fr.daterange:case fr.int4range:case fr.int8range:case fr.money:case fr.reltime:case fr.text:case fr.time:case fr.timestamptz:case fr.timetz:case fr.tsrange:case fr.tstzrange:return s3(e);default:return s3(e)}},s3=t=>t,dve=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},fve=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},hve=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},pve=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let s;const o=t.slice(1,n);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>Wee(e,a))}return t},mve=t=>typeof t=="string"?t.replace(" ","T"):t,Yee=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class RI{constructor(e,n,r={},i=r3){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var D$;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(D$||(D$={}));class iw{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=iw.syncState(this.state,i,s,o),this.pendingDiffs.forEach(l=>{this.state=iw.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=iw.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const s=this.cloneDeep(e),o=this.transformState(n),a={},l={};return this.map(s,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const h=s[c];if(h){const m=u.map(b=>b.presence_ref),g=h.map(b=>b.presence_ref),y=u.filter(b=>g.indexOf(b.presence_ref)<0),v=h.filter(b=>m.indexOf(b.presence_ref)<0);y.length>0&&(a[c]=y),v.length>0&&(l[c]=v)}else a[c]=u}),this.syncDiff(s,{joins:a,leaves:l},r,i)}static syncDiff(e,n,r,i){const{joins:s,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(a,l)=>{var c;const u=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),u.length>0){const h=e[a].map(g=>g.presence_ref),m=u.filter(g=>h.indexOf(g.presence_ref)<0);e[a].unshift(...m)}r(a,u,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const u=l.map(h=>h.presence_ref);c=c.filter(h=>u.indexOf(h.presence_ref)<0),e[a]=c,i(a,c,l),c.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var j$;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(j$||(j$={}));var sw;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(sw||(sw={}));var ku;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(ku||(ku={}));class Cg{constructor(e,n={config:{}},r){var i,s;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Ei.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new RI(this,kl.join,this.params,this.timeout),this.rejoinTimer=new Kee(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ei.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ei.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Ei.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ei.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Ei.errored,this.rejoinTimer.scheduleTimeout())}),this._on(kl.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new iw(this),this.broadcastEndpointURL=Yee(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Ei.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,c=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(g=>g.filter))!==null&&i!==void 0?i:[],u=!!this.bindings[sw.PRESENCE]&&this.bindings[sw.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,h={},m={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(g=>e==null?void 0:e(ku.CHANNEL_ERROR,g)),this._onClose(()=>e==null?void 0:e(ku.CLOSED)),this.updateJoinPayload(Object.assign({config:m},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:g})=>{var y;if(this.socket._isManualToken()||this.socket.setAuth(),g===void 0){e==null||e(ku.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,b=(y=v==null?void 0:v.length)!==null&&y!==void 0?y:0,w=[];for(let k=0;k<b;k++){const N=v[k],{filter:{event:R,schema:D,table:O,filter:B}}=N,z=g&&g[k];if(z&&z.event===R&&Cg.isFilterValueEqual(z.schema,D)&&Cg.isFilterValueEqual(z.table,O)&&Cg.isFilterValueEqual(z.filter,B))w.push(Object.assign(Object.assign({},N),{id:z.id}));else{this.unsubscribe(),this.state=Ei.errored,e==null||e(ku.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,e&&e(ku.SUBSCRIBED);return}}).receive("error",g=>{this.state=Ei.errored,e==null||e(ku.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(ku.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===Ei.joined&&e===sw.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var i;if(n==null)return Promise.reject("Payload is required for httpSend()");const s={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(s.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:s,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const c=await a.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:o}=e,a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,l;const c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),c.receive("ok",()=>s("ok")),c.receive("error",()=>s("error")),c.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ei.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(kl.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new RI(this,kl.leave,{},e),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ei.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new RI(this,e,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>lve){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,s;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=kl;if(r&&[a,l,c,u].indexOf(o)>=0&&r!==this._joinRef())return;let m=this._onMessage(o,n,r);if(n&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(g=>{var y,v,b;return((y=g.filter)===null||y===void 0?void 0:y.event)==="*"||((b=(v=g.filter)===null||v===void 0?void 0:v.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(g=>g.callback(m,r)):(s=this.bindings[o])===null||s===void 0||s.filter(g=>{var y,v,b,w,k,N;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in g){const R=g.id,D=(y=g.filter)===null||y===void 0?void 0:y.event;return R&&((v=n.ids)===null||v===void 0?void 0:v.includes(R))&&(D==="*"||(D==null?void 0:D.toLocaleLowerCase())===((b=n.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const R=(k=(w=g==null?void 0:g.filter)===null||w===void 0?void 0:w.event)===null||k===void 0?void 0:k.toLocaleLowerCase();return R==="*"||R===((N=n==null?void 0:n.event)===null||N===void 0?void 0:N.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===o}).map(g=>{if(typeof m=="object"&&"ids"in m){const y=m.data,{schema:v,table:b,commit_timestamp:w,type:k,errors:N}=y;m=Object.assign(Object.assign({},{schema:v,table:b,commit_timestamp:w,eventType:k,new:{},old:{},errors:N}),this._getPayloadRecords(y))}g.callback(m,r)})}_isClosed(){return this.state===Ei.closed}_isJoined(){return this.state===Ei.joined}_isJoining(){return this.state===Ei.joining}_isLeaving(){return this.state===Ei.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&Cg.isEqual(i.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(kl.close,{},e)}_onError(e){this._on(kl.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ei.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=L$(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=L$(e.columns,e.old_record)),n}}const OI=()=>{},qS={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},gve=[1e3,2e3,5e3,1e4],yve=1e4,xve=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class vve{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=r3,this.transport=null,this.heartbeatIntervalMs=qS.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=OI,this.ref=0,this.reconnectTimer=null,this.vsn=M$,this.logger=OI,this.conn=null,this.sendBuffer=[],this.serializer=new cve,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...s)=>i(...s):(...s)=>fetch(...s),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${i3.websocket}`,this.httpEndpoint=Yee(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=rve.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Cf.connecting:return gp.Connecting;case Cf.open:return gp.Open;case Cf.closing:return gp.Closing;default:return gp.Closed}}isConnected(){return this.connectionState()===gp.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new Cg(`realtime:${e}`,n,this);return this.channels.push(s),s}}push(e){const{topic:n,event:r,payload:i,ref:s}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(ave,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},qS.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:s,ref:o}=n,a=o?`(${o})`:"",l=s.status||"";this.log("receive",`${l} ${r} ${i} ${a}`.trim(),s),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(i,s,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===Cf.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Cf.open||this.conn.readyState===Cf.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(kl.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([xve],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,r=!1;if(e)n=e,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const s={access_token:n,version:sve};n&&i.updateJoinPayload(s),i.joinedOnce&&i._isJoined()&&i._push(kl.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Kee(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},qS.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,i,s,o,a,l,c,u,h,m,g;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:r3,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:qS.HEARTBEAT_INTERVAL,this.worker=(s=e==null?void 0:e.worker)!==null&&s!==void 0?s:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:OI,this.vsn=(l=e==null?void 0:e.vsn)!==null&&l!==void 0?l:M$,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:(y=>gve[y-1]||yve),this.vsn){case Gee:this.encode=(u=e==null?void 0:e.encode)!==null&&u!==void 0?u:((y,v)=>v(JSON.stringify(y))),this.decode=(h=e==null?void 0:e.decode)!==null&&h!==void 0?h:((y,v)=>v(JSON.parse(y)));break;case ove:this.encode=(m=e==null?void 0:e.encode)!==null&&m!==void 0?m:this.serializer.encode.bind(this.serializer),this.decode=(g=e==null?void 0:e.decode)!==null&&g!==void 0?g:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var vw=class extends Error{constructor(t,e){var n;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((n=e.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function bve(t,e,n){const r=new URL(e,t);if(n)for(const[i,s]of Object.entries(n))s!==void 0&&r.searchParams.set(i,s);return r.toString()}async function wve(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function Eve(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:i,body:s,headers:o}){const a=bve(t.baseUrl,r,i),l=await wve(t.auth),c=await e(a,{method:n,headers:{...s?{"Content-Type":"application/json"}:{},...l,...o},body:s?JSON.stringify(s):void 0}),u=await c.text(),h=(c.headers.get("content-type")||"").includes("application/json"),m=h&&u?JSON.parse(u):u;if(!c.ok){const g=h?m:void 0,y=g==null?void 0:g.error;throw new vw((y==null?void 0:y.message)??`Request failed with status ${c.status}`,{status:c.status,icebergType:y==null?void 0:y.type,icebergCode:y==null?void 0:y.code,details:g})}return{status:c.status,headers:c.headers,data:m}}}}function GS(t){return t.join("")}var Sve=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:GS(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${GS(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${GS(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${GS(t.namespace)}`}),!0}catch(e){if(e instanceof vw&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof vw&&n.status===409)return;throw n}}};function z0(t){return t.join("")}var Ave=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${z0(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${z0(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${z0(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${z0(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${z0(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${z0(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof vw&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof vw&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},Tve=class{constructor(t){var r;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=Eve({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(r=t.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new Sve(this.client,e),this.tableOps=new Ave(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},uN=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function Or(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var kve=class extends uN{constructor(t,e,n){super(t),this.name="StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},o3=class extends uN{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};const LD=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Nve=()=>Response,a3=t=>{if(Array.isArray(t))return t.map(n=>a3(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=a3(r)}),e},Cve=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Pve=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function bw(t){"@babel/helpers - typeof";return bw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bw(t)}function _ve(t,e){if(bw(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(bw(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ive(t){var e=_ve(t,"string");return bw(e)=="symbol"?e:e+""}function Rve(t,e,n){return(e=Ive(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function B$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Xt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?B$(Object(n),!0).forEach(function(r){Rve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const MI=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},Ove=async(t,e,n)=>{t instanceof await Nve()&&!(n!=null&&n.noResolveJson)?t.json().then(r=>{const i=t.status||500,s=(r==null?void 0:r.statusCode)||i+"";e(new kve(MI(r),i,s))}).catch(r=>{e(new o3(MI(r),r))}):e(new o3(MI(t),t))},Mve=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?i:(Cve(r)?(i.headers=Xt({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,e!=null&&e.duplex&&(i.duplex=e.duplex),Xt(Xt({},i),n))};async function D1(t,e,n,r,i,s){return new Promise((o,a)=>{t(n,Mve(e,r,i,s)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>Ove(l,a,r))})}async function ww(t,e,n,r){return D1(t,"GET",e,n,r)}async function xl(t,e,n,r,i){return D1(t,"POST",e,r,i,n)}async function l3(t,e,n,r,i){return D1(t,"PUT",e,r,i,n)}async function Lve(t,e,n,r){return D1(t,"HEAD",e,Xt(Xt({},n),{},{noResolveJson:!0}),r)}async function DD(t,e,n,r,i){return D1(t,"DELETE",e,r,i,n)}var Dve=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Or(e))return{data:null,error:e};throw e}}};let Jee;Jee=Symbol.toStringTag;var jve=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[Jee]="BlobDownloadBuilder",this.promise=null}asStream(){return new Dve(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Or(e))return{data:null,error:e};throw e}}};const Bve={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},U$={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Uve=class{constructor(t,e={},n,r){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=n,this.fetch=LD(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(t,e,n,r){var i=this;try{let s;const o=Xt(Xt({},U$),r);let a=Xt(Xt({},i.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",i.encodeMetadata(l)),s.append("",n)):typeof FormData<"u"&&n instanceof FormData?(s=n,s.has("cacheControl")||s.append("cacheControl",o.cacheControl),l&&!s.has("metadata")&&s.append("metadata",i.encodeMetadata(l))):(s=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=i.toBase64(i.encodeMetadata(l))),(typeof ReadableStream<"u"&&s instanceof ReadableStream||s&&typeof s=="object"&&"pipe"in s&&typeof s.pipe=="function")&&!o.duplex&&(o.duplex="half")),r!=null&&r.headers&&(a=Xt(Xt({},a),r.headers));const c=i._removeEmptyFolders(e),u=i._getFinalPath(c),h=await(t=="PUT"?l3:xl)(i.fetch,`${i.url}/object/${u}`,s,Xt({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:h.Id,fullPath:h.Key},error:null}}catch(s){if(i.shouldThrowOnError)throw s;if(Or(s))return{data:null,error:s};throw s}}async upload(t,e,n){return this.uploadOrUpdate("POST",t,e,n)}async uploadToSignedUrl(t,e,n,r){var i=this;const s=i._removeEmptyFolders(t),o=i._getFinalPath(s),a=new URL(i.url+`/object/upload/sign/${o}`);a.searchParams.set("token",e);try{let l;const c=Xt({upsert:U$.upsert},r),u=Xt(Xt({},i.headers),{"x-upsert":String(c.upsert)});return typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType),{data:{path:s,fullPath:(await l3(i.fetch,a.toString(),l,{headers:u})).Key},error:null}}catch(l){if(i.shouldThrowOnError)throw l;if(Or(l))return{data:null,error:l};throw l}}async createSignedUploadUrl(t,e){var n=this;try{let r=n._getFinalPath(t);const i=Xt({},n.headers);e!=null&&e.upsert&&(i["x-upsert"]="true");const s=await xl(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(n.url+s.url),a=o.searchParams.get("token");if(!a)throw new uN("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:a},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Or(r))return{data:null,error:r};throw r}}async update(t,e,n){return this.uploadOrUpdate("PUT",t,e,n)}async move(t,e,n){var r=this;try{return{data:await xl(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers}),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Or(i))return{data:null,error:i};throw i}}async copy(t,e,n){var r=this;try{return{data:{path:(await xl(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers})).Key},error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Or(i))return{data:null,error:i};throw i}}async createSignedUrl(t,e,n){var r=this;try{let i=r._getFinalPath(t),s=await xl(r.fetch,`${r.url}/object/sign/${i}`,Xt({expiresIn:e},n!=null&&n.transform?{transform:n.transform}:{}),{headers:r.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return s={signedUrl:encodeURI(`${r.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Or(i))return{data:null,error:i};throw i}}async createSignedUrls(t,e,n){var r=this;try{const i=await xl(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:e,paths:t},{headers:r.headers}),s=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(o=>Xt(Xt({},o),{},{signedUrl:o.signedURL?encodeURI(`${r.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Or(i))return{data:null,error:i};throw i}}download(t,e){const n=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),i=r?`?${r}`:"",s=this._getFinalPath(t),o=()=>ww(this.fetch,`${this.url}/${n}/${s}${i}`,{headers:this.headers,noResolveJson:!0});return new jve(o,this.shouldThrowOnError)}async info(t){var e=this;const n=e._getFinalPath(t);try{return{data:a3(await ww(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Or(r))return{data:null,error:r};throw r}}async exists(t){var e=this;const n=e._getFinalPath(t);try{return await Lve(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Or(r)&&r instanceof o3){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}}getPublicUrl(t,e){const n=this._getFinalPath(t),r=[],i=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";i!==""&&r.push(i);const s=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});o!==""&&r.push(o);let a=r.join("&");return a!==""&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${n}${a}`)}}}async remove(t){var e=this;try{return{data:await DD(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Or(n))return{data:null,error:n};throw n}}async list(t,e,n){var r=this;try{const i=Xt(Xt(Xt({},Bve),e),{},{prefix:t||""});return{data:await xl(r.fetch,`${r.url}/object/list/${r.bucketId}`,i,{headers:r.headers},n),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Or(i))return{data:null,error:i};throw i}}async listV2(t,e){var n=this;try{const r=Xt({},t);return{data:await xl(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},e),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Or(r))return{data:null,error:r};throw r}}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof ln<"u"?ln.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const Xee="2.89.0",Qee={"X-Client-Info":`storage-js/${Xee}`};var Fve=class{constructor(t,e={},n,r){this.shouldThrowOnError=!1;const i=new URL(t);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Xt(Xt({},Qee),e),this.fetch=LD(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(t){var e=this;try{const n=e.listBucketOptionsToQueryString(t);return{data:await ww(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Or(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await ww(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Or(n))return{data:null,error:n};throw n}}async createBucket(t,e={public:!1}){var n=this;try{return{data:await xl(n.fetch,`${n.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Or(r))return{data:null,error:r};throw r}}async updateBucket(t,e){var n=this;try{return{data:await l3(n.fetch,`${n.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Or(r))return{data:null,error:r};throw r}}async emptyBucket(t){var e=this;try{return{data:await xl(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Or(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await DD(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Or(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},$ve=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Xt(Xt({},Qee),e),this.fetch=LD(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await xl(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Or(n))return{data:null,error:n};throw n}}async listBuckets(t){var e=this;try{const n=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&n.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&n.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&n.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&n.set("sortOrder",t.sortOrder),t!=null&&t.search&&n.set("search",t.search);const r=n.toString(),i=r?`${e.url}/bucket?${r}`:`${e.url}/bucket`;return{data:await ww(e.fetch,i,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Or(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await DD(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Or(n))return{data:null,error:n};throw n}}from(t){var e=this;if(!Pve(t))throw new uN("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new Tve({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(i,s){const o=i[s];return typeof o!="function"?o:async(...a)=>{try{return{data:await o.apply(i,a),error:null}}catch(l){if(r)throw l;return{data:null,error:l}}}}})}};const jD={"X-Client-Info":`storage-js/${Xee}`,"Content-Type":"application/json"};var Zee=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Zo(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}var LI=class extends Zee{constructor(t,e,n){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},zve=class extends Zee{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};const BD=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Vve=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},F$=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Hve=async(t,e,n)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const r=t.status||500,i=t;if(typeof i.json=="function")i.json().then(s=>{const o=(s==null?void 0:s.statusCode)||(s==null?void 0:s.code)||r+"";e(new LI(F$(s),r,o))}).catch(()=>{const s=r+"";e(new LI(i.statusText||`HTTP ${r} error`,r,s))});else{const s=r+"";e(new LI(i.statusText||`HTTP ${r} error`,r,s))}}else e(new zve(F$(t),t))},qve=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return r?(Vve(r)?(i.headers=Xt({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,Xt(Xt({},i),n)):i};async function Gve(t,e,n,r,i,s){return new Promise((o,a)=>{t(n,qve(e,r,i,s)).then(l=>{if(!l.ok)throw l;if(r!=null&&r.noResolveJson)return l;const c=l.headers.get("content-type");return!c||!c.includes("application/json")?{}:l.json()}).then(l=>o(l)).catch(l=>Hve(l,a,r))})}async function ea(t,e,n,r,i){return Gve(t,"POST",e,r,i,n)}var Kve=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Xt(Xt({},jD),e),this.fetch=BD(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(t){var e=this;try{return{data:await ea(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Zo(n))return{data:null,error:n};throw n}}async getIndex(t,e){var n=this;try{return{data:await ea(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Zo(r))return{data:null,error:r};throw r}}async listIndexes(t){var e=this;try{return{data:await ea(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Zo(n))return{data:null,error:n};throw n}}async deleteIndex(t,e){var n=this;try{return{data:await ea(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Zo(r))return{data:null,error:r};throw r}}},Wve=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Xt(Xt({},jD),e),this.fetch=BD(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(t){var e=this;try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await ea(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Zo(n))return{data:null,error:n};throw n}}async getVectors(t){var e=this;try{return{data:await ea(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Zo(n))return{data:null,error:n};throw n}}async listVectors(t){var e=this;try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:await ea(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Zo(n))return{data:null,error:n};throw n}}async queryVectors(t){var e=this;try{return{data:await ea(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Zo(n))return{data:null,error:n};throw n}}async deleteVectors(t){var e=this;try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await ea(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Zo(n))return{data:null,error:n};throw n}}},Yve=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Xt(Xt({},jD),e),this.fetch=BD(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await ea(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Zo(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await ea(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Zo(n))return{data:null,error:n};throw n}}async listBuckets(t={}){var e=this;try{return{data:await ea(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Zo(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await ea(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Zo(n))return{data:null,error:n};throw n}}},Jve=class extends Yve{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new Xve(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,n=this;return e().call(n,t)}async getBucket(t){var e=()=>super.getBucket,n=this;return e().call(n,t)}async listBuckets(t={}){var e=()=>super.listBuckets,n=this;return e().call(n,t)}async deleteBucket(t){var e=()=>super.deleteBucket,n=this;return e().call(n,t)}},Xve=class extends Kve{constructor(t,e,n,r){super(t,e,r),this.vectorBucketName=n}async createIndex(t){var e=()=>super.createIndex,n=this;return e().call(n,Xt(Xt({},t),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,n=this;return e().call(n,Xt(Xt({},t),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,t)}index(t){return new Qve(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},Qve=class extends Wve{constructor(t,e,n,r,i){super(t,e,i),this.vectorBucketName=n,this.indexName=r}async putVectors(t){var e=()=>super.putVectors,n=this;return e().call(n,Xt(Xt({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(t){var e=()=>super.getVectors,n=this;return e().call(n,Xt(Xt({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,n=this;return e().call(n,Xt(Xt({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,n=this;return e().call(n,Xt(Xt({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,n=this;return e().call(n,Xt(Xt({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},Zve=class extends Fve{constructor(t,e={},n,r){super(t,e,n,r)}from(t){return new Uve(this.url,this.headers,t,this.fetch)}get vectors(){return new Jve(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new $ve(this.url+"/iceberg",this.headers,this.fetch)}};const ete="2.89.0",xg=30*1e3,c3=3,DI=c3*xg,ebe="http://localhost:9999",tbe="supabase.auth.token",nbe={"X-Client-Info":`gotrue-js/${ete}`},u3="X-Supabase-Api-Version",tte={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},rbe=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,ibe=600*1e3;class Ew extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Ft(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class sbe extends Ew{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function obe(t){return Ft(t)&&t.name==="AuthApiError"}class yp extends Ew{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Nd extends Ew{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class Fo extends Nd{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function abe(t){return Ft(t)&&t.name==="AuthSessionMissingError"}class V0 extends Nd{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class KS extends Nd{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class WS extends Nd{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function lbe(t){return Ft(t)&&t.name==="AuthImplicitGrantRedirectError"}class $$ extends Nd{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class cbe extends Nd{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class d3 extends Nd{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function jI(t){return Ft(t)&&t.name==="AuthRetryableFetchError"}class z$ extends Nd{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class f3 extends Nd{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const HT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),V$=` 	
\r=`.split(""),ube=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<V$.length;e+=1)t[V$[e].charCodeAt(0)]=-2;for(let e=0;e<HT.length;e+=1)t[HT[e].charCodeAt(0)]=e;return t})();function H$(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(HT[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(HT[r]),e.queuedBits-=6}}function nte(t,e,n){const r=ube[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function q$(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=o=>{hbe(o,r,n)};for(let o=0;o<t.length;o+=1)nte(t.charCodeAt(o),i,s);return e.join("")}function dbe(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function fbe(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}dbe(r,e)}}function hbe(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if((t>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Jg(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)nte(t.charCodeAt(i),n,r);return new Uint8Array(e)}function pbe(t){const e=[];return fbe(t,n=>e.push(n)),new Uint8Array(e)}function Ap(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>H$(i,n,r)),H$(null,n,r),e.join("")}function mbe(t){return Math.round(Date.now()/1e3)+t}function gbe(){return Symbol("auth-callback")}const ts=()=>typeof window<"u"&&typeof document<"u",Jh={tested:!1,writable:!1},rte=()=>{if(!ts())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Jh.tested)return Jh.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Jh.tested=!0,Jh.writable=!0}catch{Jh.tested=!0,Jh.writable=!1}return Jh.writable};function ybe(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const ite=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),xbe=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",vg=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Xh=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Qi=async(t,e)=>{await t.removeItem(e)};class dN{constructor(){this.promise=new dN.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}dN.promiseConstructor=Promise;function BI(t){const e=t.split(".");if(e.length!==3)throw new f3("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!rbe.test(e[r]))throw new f3("JWT not in base64url format");return{header:JSON.parse(q$(e[0])),payload:JSON.parse(q$(e[1])),signature:Jg(e[2]),raw:{header:e[0],payload:e[1]}}}async function vbe(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function bbe(t,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await t(s);if(!e(s,null,o)){r(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function wbe(t){return("0"+t.toString(16)).substr(-2)}function Ebe(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,wbe).join("")}async function Sbe(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function Abe(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await Sbe(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function H0(t,e,n=!1){const r=Ebe();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await vg(t,`${e}-code-verifier`,i);const s=await Abe(r);return[s,r===s?"plain":"s256"]}const Tbe=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function kbe(t){const e=t.headers.get(u3);if(!e||!e.match(Tbe))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Nbe(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Cbe(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Pbe=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function q0(t){if(!Pbe.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function UI(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function _be(t,e){return new Proxy(t,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)"||s==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,i)}})}function G$(t){return JSON.parse(JSON.stringify(t))}const ap=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Ibe=[502,503,504];async function K$(t){var e;if(!xbe(t))throw new d3(ap(t),0);if(Ibe.includes(t.status))throw new d3(ap(t),t.status);let n;try{n=await t.json()}catch(s){throw new yp(ap(s),s)}let r;const i=kbe(t);if(i&&i.getTime()>=tte["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new z$(ap(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Fo}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new z$(ap(n),t.status,n.weak_password.reasons);throw new sbe(ap(n),t.status||500,r)}const Rbe=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function Jt(t,e,n,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[u3]||(s[u3]=tte["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const o=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await Obe(t,e,n+a,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function Obe(t,e,n,r,i,s){const o=Rbe(e,r,i,s);let a;try{a=await t(n,Object.assign({},o))}catch(l){throw console.error(l),new d3(ap(l),0)}if(a.ok||await K$(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await K$(l)}}function fl(t){var e;let n=null;Dbe(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=mbe(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function W$(t){const e=fl(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Of(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Mbe(t){return{data:t,error:null}}function Lbe(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=t,o=$x(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function Y$(t){return t}function Dbe(t){return t.access_token&&t.refresh_token&&t.expires_in}const FI=["global","local","others"];class jbe{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=ite(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=FI[0]){if(FI.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${FI.join(", ")}`);try{return await Jt(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ft(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Jt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Of})}catch(r){if(Ft(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=$x(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await Jt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:Lbe,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Ft(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Jt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Of})}catch(n){if(Ft(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,s,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await Jt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:Y$});if(u.error)throw u.error;const h=await u.json(),m=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return g.length>0&&(g.forEach(y=>{const v=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(y.split(";")[1].split("=")[1]);c[`${b}Page`]=v}),c.total=parseInt(m)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(Ft(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){q0(e);try{return await Jt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Of})}catch(n){if(Ft(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){q0(e);try{return await Jt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Of})}catch(r){if(Ft(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){q0(e);try{return await Jt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Of})}catch(r){if(Ft(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){q0(e.userId);try{const{data:n,error:r}=await Jt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(Ft(n))return{data:null,error:n};throw n}}async _deleteFactor(e){q0(e.userId),q0(e.id);try{return{data:await Jt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Ft(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,i,s,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await Jt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:Y$});if(u.error)throw u.error;const h=await u.json(),m=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return g.length>0&&(g.forEach(y=>{const v=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(y.split(";")[1].split("=")[1]);c[`${b}Page`]=v}),c.total=parseInt(m)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(Ft(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(e){try{return await Jt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ft(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await Jt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ft(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await Jt(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ft(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await Jt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Ft(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await Jt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ft(n))return{data:null,error:n};throw n}}}function J$(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const G0={debug:!!(globalThis&&rte()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class ste extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Bbe extends ste{}async function Ube(t,e,n){G0.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),G0.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){G0.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{G0.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw G0.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Bbe(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(G0.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function Fbe(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function ote(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function $be(t){return parseInt(t,16)}function zbe(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function Vbe(t){var e;const{chainId:n,domain:r,expirationTime:i,issuedAt:s=new Date,nonce:o,notBefore:a,requestId:l,resources:c,scheme:u,uri:h,version:m}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(m!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${m}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const g=ote(t.address),y=u?`${u}://${r}`:r,v=t.statement?`${t.statement}
`:"",b=`${y} wants you to sign in with your Ethereum account:
${g}

${v}`;let w=`URI: ${h}
Version: ${m}
Chain ID: ${n}${o?`
Nonce: ${o}`:""}
Issued At: ${s.toISOString()}`;if(i&&(w+=`
Expiration Time: ${i.toISOString()}`),a&&(w+=`
Not Before: ${a.toISOString()}`),l&&(w+=`
Request ID: ${l}`),c){let k=`
Resources:`;for(const N of c){if(!N||typeof N!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${N}`);k+=`
- ${N}`}w+=k}return`${b}
${w}`}class di extends Error{constructor({message:e,code:n,cause:r,name:i}){var s;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(s=i??(r instanceof Error?r.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=n}}class qT extends di{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function Hbe({error:t,options:e}){var n,r,i;const{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new di({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=s.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new di({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=s.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new di({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new di({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new di({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new di({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return s.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new di({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new di({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(ate(o)){if(s.rp.id!==o)return new di({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new di({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new di({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new di({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new di({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function qbe({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new di({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new di({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(ate(r)){if(n.rpId!==r)return new di({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new di({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new di({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new di({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class Gbe{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const Kbe=new Gbe;function Wbe(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,i=$x(t,["challenge","user","excludeCredentials"]),s=Jg(e).buffer,o=Object.assign(Object.assign({},n),{id:Jg(n.id).buffer}),a=Object.assign(Object.assign({},i),{challenge:s,user:o});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const c=r[l];a.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:Jg(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function Ybe(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=$x(t,["challenge","allowCredentials"]),i=Jg(e).buffer,s=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){s.allowCredentials=new Array(n.length);for(let o=0;o<n.length;o++){const a=n[o];s.allowCredentials[o]=Object.assign(Object.assign({},a),{id:Jg(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return s}function Jbe(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:Ap(new Uint8Array(t.response.attestationObject)),clientDataJSON:Ap(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Xbe(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Ap(new Uint8Array(i.authenticatorData)),clientDataJSON:Ap(new Uint8Array(i.clientDataJSON)),signature:Ap(new Uint8Array(i.signature)),userHandle:i.userHandle?Ap(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function ate(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function X$(){var t,e;return!!(ts()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function Qbe(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new qT("Browser returned unexpected credential type",e)}:{data:null,error:new qT("Empty credential response",e)}}catch(e){return{data:null,error:Hbe({error:e,options:t})}}}async function Zbe(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new qT("Browser returned unexpected credential type",e)}:{data:null,error:new qT("Empty credential response",e)}}catch(e){return{data:null,error:qbe({error:e,options:t})}}}const ewe={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},twe={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function GT(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of t)if(i)for(const s in i){const o=i[s];if(o!==void 0)if(Array.isArray(o))r[s]=o;else if(n(o))r[s]=o;else if(e(o)){const a=r[s];e(a)?r[s]=GT(a,o):r[s]=GT(o)}else r[s]=o}return r}function nwe(t,e){return GT(ewe,t,e||{})}function rwe(t,e){return GT(twe,t,e||{})}class iwe{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:i},s){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!o)return{data:null,error:a};const l=i??Kbe.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:c}=o.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${r}`),c.displayName||(c.displayName=c.name)}switch(o.webauthn.type){case"create":{const c=nwe(o.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:u,error:h}=await Qbe({publicKey:c,signal:l});return u?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:h}}case"request":{const c=rwe(o.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:u,error:h}=await Zbe(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:c,signal:l}));return u?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:h}}}}catch(o){return Ft(o)?{data:null,error:o}:{data:null,error:new yp("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!n)return{data:null,error:new Ew("rpId is required for WebAuthn authentication")};try{if(!X$())return{data:null,error:new yp("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:s});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:l.type,rpId:n,rpOrigins:r,credential_response:l.credential_response}})}catch(o){return Ft(o)?{data:null,error:o}:{data:null,error:new yp("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!n)return{data:null,error:new Ew("rpId is required for WebAuthn registration")};try{if(!X$())return{data:null,error:new yp("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(u=>{var h;return(h=u.data)===null||h===void 0?void 0:h.all.find(m=>m.factor_type==="webauthn"&&m.friendly_name===e&&m.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u==null?void 0:u.id}):void 0),{data:null,error:a};const{data:l,error:c}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:s});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:n,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(o){return Ft(o)?{data:null,error:o}:{data:null,error:new yp("Unexpected error in register",o)}}}}Fbe();const swe={url:ebe,storageKey:tbe,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:nbe,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Q$(t,e,n){return await n()}const K0={};class Sw{get jwks(){var e,n;return(n=(e=K0[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){K0[this.storageKey]=Object.assign(Object.assign({},K0[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=K0[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){K0[this.storageKey]=Object.assign(Object.assign({},K0[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const s=Object.assign(Object.assign({},swe),e);if(this.storageKey=s.storageKey,this.instanceID=(n=Sw.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Sw.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.instanceID>0&&ts()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new jbe({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=ite(s.fetch),this.lock=s.lock||Q$,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,s.lock?this.lock=s.lock:this.persistSession&&ts()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Ube:this.lock=Q$,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new iwe(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:rte()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=J$(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=J$(this.memoryStorage)),ts()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${ete}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(ts()&&(n=ybe(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),ts()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),lbe(s)){const l=(e=s.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Ft(n)?this._returnResult({error:n}):this._returnResult({error:new yp("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const s=await Jt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:fl}),{data:o,error:a}=s;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(s){if(Ft(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(e){var n,r,i;try{let s;if("email"in e){const{email:u,password:h,options:m}=e;let g=null,y=null;this.flowType==="pkce"&&([g,y]=await H0(this.storage,this.storageKey)),s=await Jt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:u,password:h,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:g,code_challenge_method:y},xform:fl})}else if("phone"in e){const{phone:u,password:h,options:m}=e;s=await Jt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},channel:(i=m==null?void 0:m.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:fl})}else throw new KS("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return await Qi(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(s){if(await Qi(this.storage,`${this.storageKey}-code-verifier`),Ft(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(e){try{let n;if("email"in e){const{email:s,password:o,options:a}=e;n=await Jt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:W$})}else if("phone"in e){const{phone:s,password:o,options:a}=e;n=await Jt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:W$})}else throw new KS("You must provide either an email or phone number and a password");const{data:r,error:i}=n;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const s=new V0;return this._returnResult({data:{user:null,session:null},error:s})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(Ft(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,i,s,o,a,l,c,u,h,m;let g,y;if("message"in e)g=e.message,y=e.signature;else{const{chain:v,wallet:b,statement:w,options:k}=e;let N;if(ts())if(typeof b=="object")N=b;else{const U=window;if("ethereum"in U&&typeof U.ethereum=="object"&&"request"in U.ethereum&&typeof U.ethereum.request=="function")N=U.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(k!=null&&k.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=b}const R=new URL((n=k==null?void 0:k.url)!==null&&n!==void 0?n:window.location.href),D=await N.request({method:"eth_requestAccounts"}).then(U=>U).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!D||D.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const O=ote(D[0]);let B=(r=k==null?void 0:k.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!B){const U=await N.request({method:"eth_chainId"});B=$be(U)}const z={domain:R.host,address:O,statement:w,uri:R.href,version:"1",chainId:B,nonce:(i=k==null?void 0:k.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(o=(s=k==null?void 0:k.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=k==null?void 0:k.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=k==null?void 0:k.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=k==null?void 0:k.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(u=k==null?void 0:k.signInWithEthereum)===null||u===void 0?void 0:u.resources};g=Vbe(z),y=await N.request({method:"personal_sign",params:[zbe(g),O]})}try{const{data:v,error:b}=await Jt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:g,signature:y},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:fl});if(b)throw b;if(!v||!v.session||!v.user){const w=new V0;return this._returnResult({data:{user:null,session:null},error:w})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:b})}catch(v){if(Ft(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async signInWithSolana(e){var n,r,i,s,o,a,l,c,u,h,m,g;let y,v;if("message"in e)y=e.message,v=e.signature;else{const{chain:b,wallet:w,statement:k,options:N}=e;let R;if(ts())if(typeof w=="object")R=w;else{const O=window;if("solana"in O&&typeof O.solana=="object"&&("signIn"in O.solana&&typeof O.solana.signIn=="function"||"signMessage"in O.solana&&typeof O.solana.signMessage=="function"))R=O.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(N!=null&&N.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");R=w}const D=new URL((n=N==null?void 0:N.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in R&&R.signIn){const O=await R.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},N==null?void 0:N.signInWithSolana),{version:"1",domain:D.host,uri:D.href}),k?{statement:k}:null));let B;if(Array.isArray(O)&&O[0]&&typeof O[0]=="object")B=O[0];else if(O&&typeof O=="object"&&"signedMessage"in O&&"signature"in O)B=O;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in B&&"signature"in B&&(typeof B.signedMessage=="string"||B.signedMessage instanceof Uint8Array)&&B.signature instanceof Uint8Array)y=typeof B.signedMessage=="string"?B.signedMessage:new TextDecoder().decode(B.signedMessage),v=B.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in R)||typeof R.signMessage!="function"||!("publicKey"in R)||typeof R!="object"||!R.publicKey||!("toBase58"in R.publicKey)||typeof R.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${D.host} wants you to sign in with your Solana account:`,R.publicKey.toBase58(),...k?["",k,""]:[""],"Version: 1",`URI: ${D.href}`,`Issued At: ${(i=(r=N==null?void 0:N.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=N==null?void 0:N.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${N.signInWithSolana.notBefore}`]:[],...!((o=N==null?void 0:N.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${N.signInWithSolana.expirationTime}`]:[],...!((a=N==null?void 0:N.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${N.signInWithSolana.chainId}`]:[],...!((l=N==null?void 0:N.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${N.signInWithSolana.nonce}`]:[],...!((c=N==null?void 0:N.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${N.signInWithSolana.requestId}`]:[],...!((h=(u=N==null?void 0:N.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...N.signInWithSolana.resources.map(B=>`- ${B}`)]:[]].join(`
`);const O=await R.signMessage(new TextEncoder().encode(y),"utf8");if(!O||!(O instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=O}}try{const{data:b,error:w}=await Jt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:Ap(v)},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:fl});if(w)throw w;if(!b||!b.session||!b.user){const k=new V0;return this._returnResult({data:{user:null,session:null},error:k})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:w})}catch(b){if(Ft(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}}async _exchangeCodeForSession(e){const n=await Xh(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new cbe;const{data:s,error:o}=await Jt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:fl});if(await Qi(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!s||!s.session||!s.user){const a=new V0;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}catch(s){if(await Qi(this.storage,`${this.storageKey}-code-verifier`),Ft(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:s,nonce:o}=e,a=await Jt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:fl}),{data:l,error:c}=a;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const u=new V0;return this._returnResult({data:{user:null,session:null},error:u})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:c})}catch(n){if(Ft(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,i,s,o;try{if("email"in e){const{email:a,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await H0(this.storage,this.storageKey));const{error:h}=await Jt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:u}=await Jt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u})}throw new KS("You must provide either an email or phone number.")}catch(a){if(await Qi(this.storage,`${this.storageKey}-code-verifier`),Ft(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(e){var n,r;try{let i,s;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await Jt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:fl});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(Ft(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var n,r,i,s,o;try{let a=null,l=null;this.flowType==="pkce"&&([a,l]=await H0(this.storage,this.storageKey));const c=await Jt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:Mbe});return!((s=c.data)===null||s===void 0)&&s.url&&ts()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(c.data.url),this._returnResult(c)}catch(a){if(await Qi(this.storage,`${this.storageKey}-code-verifier`),Ft(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Fo;const{error:i}=await Jt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(Ft(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:o}=await Jt(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:o,error:a}=await Jt(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a})}throw new KS("You must provide either an email or phone number and a type")}catch(n){if(Ft(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Xh(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<DI:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const o=await Xh(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=UI()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=_be(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await Jt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Of}):await this._useSession(async n=>{var r,i,s;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Fo}:await Jt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:Of})})}catch(n){if(Ft(n))return abe(n)&&(await this._removeSession(),await Qi(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new Fo;const o=i.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await H0(this.storage,this.storageKey));const{data:c,error:u}=await Jt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Of});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(r){if(await Qi(this.storage,`${this.storageKey}-code-verifier`),Ft(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Fo;const n=Date.now()/1e3;let r=n,i=!0,s=null;const{payload:o}=BI(e.access_token);if(o.exp&&(r=o.exp,i=r<=n),i){const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(n){if(Ft(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Fo;const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(Ft(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!ts())throw new WS("No browser detected.");if(e.error||e.error_description||e.error_code)throw new WS(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new $$("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new WS("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new $$("No code detected.");const{data:k,error:N}=await this._exchangeCodeForSession(e.code);if(N)throw N;const R=new URL(window.location.href);return R.searchParams.delete("code"),window.history.replaceState(window.history.state,"",R.toString()),{data:{session:k.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!s||!a||!o||!c)throw new WS("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(a);let m=u+h;l&&(m=parseInt(l));const g=m-u;g*1e3<=xg&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${h}s`);const y=m-h;u-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,m,u):u-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,m,u);const{data:v,error:b}=await this._getUser(s);if(b)throw b;const w={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:h,expires_at:m,refresh_token:o,token_type:c,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:w,redirectType:e.type},error:null})}catch(r){if(Ft(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Xh(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({error:s});const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(obe(a)&&(a.status===404||a.status===401||a.status===403)))return this._returnResult({error:a})}return e!=="others"&&(await this._removeSession(),await Qi(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=gbe(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await H0(this.storage,this.storageKey,!0));try{return await Jt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(await Qi(this.storage,`${this.storageKey}-code-verifier`),Ft(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(Ft(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var o,a,l,c,u;const{data:h,error:m}=s;if(m)throw m;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await Jt(this.fetch,"GET",g,{headers:this.headers,jwt:(u=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(i)throw i;return ts()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(Ft(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:s}}=n;if(i)throw i;const{options:o,provider:a,token:l,access_token:c,nonce:u}=e,h=await Jt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=s==null?void 0:s.access_token)!==null&&r!==void 0?r:void 0,body:{provider:a,id_token:l,access_token:c,nonce:u,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:fl}),{data:m,error:g}=h;return g?this._returnResult({data:{user:null,session:null},error:g}):!m||!m.session||!m.user?this._returnResult({data:{user:null,session:null},error:new V0}):(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("USER_UPDATED",m.session)),this._returnResult({data:m,error:g}))}catch(i){if(await Qi(this.storage,`${this.storageKey}-code-verifier`),Ft(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)throw o;return await Jt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(Ft(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await bbe(async i=>(i>0&&await vbe(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await Jt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:fl})),(i,s)=>{const o=200*Math.pow(2,i);return s&&jI(s)&&Date.now()+o-r<xg})}catch(r){if(this._debug(n,"error",r),Ft(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),ts()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await Xh(this.storage,this.storageKey);if(i&&this.userStorage){let o=await Xh(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await vg(this.userStorage,this.storageKey+"-user",o)),i.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:UI()}else if(i&&!i.user&&!i.user){const o=await Xh(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(i.user=o.user,await Qi(this.storage,this.storageKey+"-user"),await vg(this.storage,this.storageKey,i)):i.user=UI()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const s=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<DI;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${DI}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),jI(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(i.access_token);!a&&(o!=null&&o.user)?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Fo;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new dN;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new Fo;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={data:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(i,"error",s),Ft(s)){const o={data:null,error:s};return jI(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(l){s.push(l)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Qi(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await vg(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const s=G$(i);await vg(this.storage,this.storageKey,s)}else{const i=G$(n);await vg(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Qi(this.storage,this.storageKey),await Qi(this.storage,this.storageKey+"-code-verifier"),await Qi(this.storage,this.storageKey+"-user"),this.userStorage&&await Qi(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ts()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),xg);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/xg);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${xg}ms, refresh threshold is ${c3} ticks`),i<=c3&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof ste)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ts()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,o]=await H0(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?this._returnResult({data:null,error:s}):await Jt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Ft(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:c}=await Jt(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?this._returnResult({data:null,error:c}):(e.factorType==="totp"&&l.type==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(n){if(Ft(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({data:null,error:s});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?Jbe(e.webauthn.credential_response):Xbe(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:l}=await Jt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:l}))})}catch(n){if(Ft(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({data:null,error:s});const o=await Jt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:Wbe(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:Ybe(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Ft(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const s of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])i.all.push(s),s.status==="verified"&&i[s.factor_type].push(s);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:r},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=BI(r.access_token);let o=null;s.aal&&(o=s.aal);let a=o;((n=(e=r.user.factors)===null||e===void 0?void 0:e.filter(u=>u.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(a="aal2");const c=s.amr||[];return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:c},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await Jt(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Fo})})}catch(n){if(Ft(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:s}=r;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new Fo});const o=await Jt(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&ts()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(Ft(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:s}=r;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new Fo});const o=await Jt(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&ts()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(Ft(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;return r?this._returnResult({data:null,error:r}):n?await Jt(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Fo})})}catch(e){if(Ft(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?(await Jt(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Fo})})}catch(n){if(Ft(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(a=>a.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(a=>a.kid===e),r&&this.jwks_cached_at+ibe>i)return r;const{data:s,error:o}=await Jt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,r=s.keys.find(a=>a.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:g,error:y}=await this.getSession();if(y||!g.session)return this._returnResult({data:null,error:y});r=g.session.access_token}const{header:i,payload:s,signature:o,raw:{header:a,payload:l}}=BI(r);n!=null&&n.allowExpired||Nbe(s.exp);const c=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!c){const{error:g}=await this.getUser(r);if(g)throw g;return{data:{claims:s,header:i,signature:o},error:null}}const u=Cbe(i.alg),h=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,o,pbe(`${a}.${l}`)))throw new f3("Invalid JWT signature");return{data:{claims:s,header:i,signature:o},error:null}}catch(r){if(Ft(r))return this._returnResult({data:null,error:r});throw r}}}Sw.nextInstanceID={};const owe=Sw,awe="2.89.0";let zb="";typeof Deno<"u"?zb="deno":typeof document<"u"?zb="web":typeof navigator<"u"&&navigator.product==="ReactNative"?zb="react-native":zb="node";const lwe={"X-Client-Info":`supabase-js-${zb}/${awe}`},cwe={headers:lwe},uwe={schema:"public"},dwe={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},fwe={};function Aw(t){"@babel/helpers - typeof";return Aw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Aw(t)}function hwe(t,e){if(Aw(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Aw(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pwe(t){var e=hwe(t,"string");return Aw(e)=="symbol"?e:e+""}function mwe(t,e,n){return(e=pwe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Z$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Hr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Z$(Object(n),!0).forEach(function(r){mwe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Z$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const gwe=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),ywe=()=>Headers,xwe=(t,e,n)=>{const r=gwe(n),i=ywe();return async(s,o)=>{var a;const l=(a=await e())!==null&&a!==void 0?a:t;let c=new i(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(s,Hr(Hr({},o),{},{headers:c}))}};function vwe(t){return t.endsWith("/")?t:t+"/"}function bwe(t,e){var n,r;const{db:i,auth:s,realtime:o,global:a}=t,{db:l,auth:c,realtime:u,global:h}=e,m={db:Hr(Hr({},l),i),auth:Hr(Hr({},c),s),realtime:Hr(Hr({},u),o),storage:{},global:Hr(Hr(Hr({},h),a),{},{headers:Hr(Hr({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?m.accessToken=t.accessToken:delete m.accessToken,m}function wwe(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(vwe(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Ewe=class extends owe{constructor(t){super(t)}},Swe=class{constructor(t,e,n){var r,i;this.supabaseUrl=t,this.supabaseKey=e;const s=wwe(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",s),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",s),this.storageUrl=new URL("storage/v1",s),this.functionsUrl=new URL("functions/v1",s);const o=`sb-${s.hostname.split(".")[0]}-auth-token`,a={db:uwe,realtime:fwe,auth:Hr(Hr({},dwe),{},{storageKey:o}),global:cwe},l=bwe(n??{},a);if(this.storageKey=(r=l.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=l.global.headers)!==null&&i!==void 0?i:{},l.accessToken)this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(u,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}});else{var c;this.auth=this._initSupabaseAuthClient((c=l.auth)!==null&&c!==void 0?c:{},this.headers,l.global.fetch)}this.fetch=xwe(e,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Hr({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&this.accessToken().then(u=>this.realtime.setAuth(u)).catch(u=>console.warn("Failed to set initial Realtime auth token:",u)),this.rest=new nve(new URL("rest/v1",s).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new Zve(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new Xxe(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,n;if(t.accessToken)return await t.accessToken();const{data:r}=await t.auth.getSession();return(e=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:i,storageKey:s,flowType:o,lock:a,debug:l,throwOnError:c},u,h){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Ewe({url:this.authUrl.href,headers:Hr(Hr({},m),u),storageKey:s,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:i,flowType:o,lock:a,debug:l,throwOnError:c,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(g=>g.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new vve(this.realtimeUrl.href,Hr(Hr({},t),{},{params:Hr(Hr({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const lte=(t,e,n)=>new Swe(t,e,n);function Awe(){if(typeof window<"u"||typeof Dl>"u")return!1;const t=Dl.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Awe()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");function cte(){return{url:"https://rhkkqojnaiyrxmiiykay.supabase.co",anonKey:"sb_publishable_Kd3ZVGh8x-DOQs8gEuVxYQ_tX2sBfpA"}}let KT=null;async function Twe(){if(KT)return!0;const t=cte();if(!t.url||!t.anonKey)return console.error("[Supabase] Cannot initialize: missing configuration"),!1;try{return KT=lte(t.url,t.anonKey,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),!0}catch(e){return console.error("[Supabase] Initialization failed:",e),!1}}function xo(){return KT||console.warn("[Supabase] Client not initialized. Call initializeSupabase() first."),KT}function kwe(){const t=cte();return!!(t.url&&t.anonKey)}function W0(t){var e,n,r;return t?{id:t.id,email:t.email||null,displayName:((e=t.user_metadata)==null?void 0:e.full_name)||((n=t.email)==null?void 0:n.split("@")[0])||null,photoURL:((r=t.user_metadata)==null?void 0:r.avatar_url)||null,emailVerified:t.email_confirmed_at!==null,createdAt:t.created_at}:null}class Nwe{constructor(){this.currentUser=null,this.listeners=[]}getUser(){return this.currentUser}onAuthStateChange(e){return this.listeners.push(e),()=>{this.listeners=this.listeners.filter(n=>n!==e)}}async signInWithGoogle(){return this.signInWithProvider("google",{queryParams:{access_type:"offline",prompt:"consent"}})}async signInWithGitHub(){return this.signInWithProvider("github",{scopes:"read:user user:email"})}async signInWithDiscord(){return this.signInWithProvider("discord",{scopes:"identify email"})}async signInWithProvider(e,n){const r=xo();if(!r)throw console.error("[Auth] Supabase client not initialized"),new Error("Supabase not initialized");console.log(`[Auth] Starting sign in with ${e}...`,n);try{const{data:i,error:s}=await r.auth.signInWithOAuth({provider:e,options:{redirectTo:window.location.origin,scopes:n==null?void 0:n.scopes,queryParams:n==null?void 0:n.queryParams,skipBrowserRedirect:!1}});if(s)throw console.error(`[Auth] Error signing in with ${e}:`,s),s;return console.log(`[Auth] params for ${e} sign in initiated`,i),this.currentUser}catch(i){throw console.error(`[Auth] Unexpected error during ${e} sign in:`,i),i}}async signInWithEthereum(){const e=xo();if(!e)throw new Error("Supabase not initialized");if(typeof window<"u"&&!window.ethereum)throw new Error("No Ethereum wallet detected. Please install MetaMask or another Web3 wallet.");const{data:n,error:r}=await e.auth.signInWithWeb3({chain:"ethereum",statement:"I accept the AutonomousVault Terms of Service"});if(r)throw r;return this.currentUser=W0(n.user),this.notifyListeners(),this.currentUser}async signInWithSolana(){const e=xo();if(!e)throw new Error("Supabase not initialized");if(typeof window<"u"&&!window.solana)throw new Error("No Solana wallet detected. Please install Phantom or another Solana wallet.");try{await window.solana.connect()}catch{throw new Error("Failed to connect to Solana wallet")}const{data:n,error:r}=await e.auth.signInWithWeb3({chain:"solana",statement:"I accept the AutonomousVault Terms of Service"});if(r)throw r;return this.currentUser=W0(n.user),this.notifyListeners(),this.currentUser}async signInWithEmail(e,n){const r=xo();if(!r)throw new Error("Supabase not initialized");const{data:i,error:s}=await r.auth.signInWithPassword({email:e,password:n});if(s)throw s;return this.currentUser=W0(i.user),this.notifyListeners(),this.currentUser}async signUp(e,n){const r=xo();if(!r)throw new Error("Supabase not initialized");const{data:i,error:s}=await r.auth.signUp({email:e,password:n});if(s)throw s;return this.currentUser=W0(i.user),this.notifyListeners(),this.currentUser}async logout(){const e=xo();if(!e)throw new Error("Supabase not initialized");const{error:n}=await e.auth.signOut();if(n)throw n;this.currentUser=null,this.notifyListeners()}async deleteAccount(){var r;const e=xo();if(!e)throw new Error("Supabase not initialized");const{data:{user:n}}=await e.auth.getUser();if(!n)throw new Error("Not authenticated");try{const{StorageService:i}=await Nl(async()=>{const{StorageService:s}=await Promise.resolve().then(()=>Iwe);return{StorageService:s}},void 0);await i.clearUserData(n.id),console.log("[Auth] Local storage cleared")}catch(i){console.warn("[Auth] Failed to clear local storage:",i)}try{const{error:i}=await e.rpc("delete_user");if(i)throw console.warn("[Auth] RPC delete_user not available, signing out only:",i.message),await this.logout(),new Error("Account deletion requires admin action. Please contact support or delete via Supabase dashboard.")}catch(i){throw(r=i.message)!=null&&r.includes("contact support")?i:(await this.logout(),new Error("Account deletion failed. You have been signed out. Please contact support to complete account deletion."))}this.currentUser=null,this.notifyListeners(),console.log("[Auth] Account deleted successfully")}async initialize(){const e=xo();if(!e){console.warn("[SupabaseAuth] Cannot initialize: client not available");return}e.auth.onAuthStateChange((r,i)=>{this.currentUser=i?W0(i.user):null,this.notifyListeners()});const{data:{session:n}}=await e.auth.getSession();this.currentUser=n?W0(n.user):null,this.notifyListeners()}notifyListeners(){this.listeners.forEach(e=>{try{e(this.currentUser)}catch(n){console.error("[SupabaseAuth] Listener error:",n)}})}getUserId(){var e;return((e=this.currentUser)==null?void 0:e.id)||null}isAuthenticated(){return this.currentUser!==null}async getAccessToken(){const e=xo();if(!e)return null;const{data:{session:n}}=await e.auth.getSession();return(n==null?void 0:n.access_token)||null}}const wa=new Nwe;function $m(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function Cwe(t,e){let n;const r=()=>{if(n)return n;const i=indexedDB.open(t);return i.onupgradeneeded=()=>i.result.createObjectStore(e),n=$m(i),n.then(s=>{s.onclose=()=>n=void 0},()=>{}),n};return(i,s)=>r().then(o=>s(o.transaction(e,i).objectStore(e)))}let $I;function j1(){return $I||($I=Cwe("keyval-store","keyval")),$I}function zI(t,e=j1()){return e("readonly",n=>$m(n.get(t)))}function VI(t,e,n=j1()){return n("readwrite",r=>(r.put(e,t),$m(r.transaction)))}function HI(t,e=j1()){return e("readwrite",n=>(n.delete(t),$m(n.transaction)))}function Pwe(t=j1()){return t("readwrite",e=>(e.clear(),$m(e.transaction)))}function _we(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},$m(t.transaction)}function ez(t=j1()){return t("readonly",e=>{if(e.getAllKeys)return $m(e.getAllKeys());const n=[];return _we(e,r=>n.push(r.key)).then(()=>n)})}const N7=class N7{static setUserId(e){console.log(`[StorageService] User context set to: ${e?e.substring(0,8)+"...":"null"}`),this.currentUserId=e}static getUserId(){return this.currentUserId}static getUserKey(e){return this.currentUserId?`${e}_${this.currentUserId}`:(console.warn(`[StorageService] No user context set! Using global key for: ${e}`),e)}static async getItem(e){try{return await zI(e)}catch(n){return console.error(`[StorageService] Failed to get item ${e}:`,n),null}}static async setItem(e,n){try{await VI(e,n)}catch(r){console.error(`[StorageService] Failed to set item ${e}:`,r)}}static async removeItem(e){try{await HI(e)}catch(n){console.error(`[StorageService] Failed to remove item ${e}:`,n)}}static async clear(){try{await Pwe()}catch(e){console.error("[StorageService] Failed to clear storage:",e)}}static async clearUserData(e){try{const n=await ez(),r=`_${e}`,i=n.filter(s=>typeof s=="string"&&s.endsWith(r));console.log(`[StorageService] Clearing ${i.length} keys for user ${e.substring(0,8)}...`);for(const s of i)await HI(s);console.log("[StorageService] User data cleared.")}catch(n){console.error("[StorageService] Failed to clear user data:",n)}}static async migrateFromLocalStorage(){console.log("[StorageService] Checking for legacy localStorage data...");const e=["agent_vault_pubkey","agent_vault_enc","agent_owner_pubkey","agent_hl_vault_pubkey","agent_hl_vault_enc","agent_hl_owner_pubkey","agent_pm_vault_pubkey","agent_pm_vault_enc","agent_pm_owner_pubkey","agent_chat_history","agent_chat_sessions","vault_dealer_strategy","agent_activity_log","agent_scheduler_tasks","agent_dealer_settings"];let n=0;for(const r of e){const i=localStorage.getItem(r);if(i)try{await VI(r,i),console.log(`[StorageService] Migrated key: ${r}`),n++}catch(s){console.error(`[StorageService] Failed to migrate key ${r}:`,s)}}if(n>0){console.log(`[StorageService] Migration complete. Moved ${n} items.`);for(const r of e)localStorage.removeItem(r);console.log("[StorageService] Legacy localStorage keys cleared.")}else console.log("[StorageService] No legacy data found to migrate.")}static async migrateToUserScoped(){if(!this.currentUserId){console.warn("[StorageService] Cannot migrate to user-scoped: no userId set");return}console.log("[StorageService] Checking for unscoped IndexedDB data to migrate...");const e=["agent_vault_pubkey","agent_vault_enc","agent_owner_pubkey","agent_hl_vault_pubkey","agent_hl_vault_enc","agent_hl_owner_pubkey","agent_pm_vault_pubkey","agent_pm_vault_enc","agent_pm_owner_pubkey","vault_dealer_strategy","agent_activity_log","agent_scheduler_tasks","agent_conversations_metadata","vault_dealer_storage","vault_polymarket_storage","ai_config_store","vault_balance_history","token_usage_store"],r=(await ez()).filter(o=>typeof o=="string"&&o.startsWith("agent_conversation_")&&!o.includes("_"+this.currentUserId)),i=[...e,...r];let s=0;for(const o of i)try{const a=await zI(o);if(a){const l=`${o}_${this.currentUserId}`;await zI(l)||(await VI(l,a),console.log(`[StorageService] Migrated to user-scoped: ${o} -> ${l}`),s++),await HI(o)}}catch(a){console.error(`[StorageService] Failed to migrate key ${o}:`,a)}s>0?console.log(`[StorageService] User-scoped migration complete. Moved ${s} items.`):console.log("[StorageService] No unscoped data found to migrate.")}};N7.currentUserId=null;let ke=N7;const Iwe=Object.freeze(Object.defineProperty({__proto__:null,StorageService:ke},Symbol.toStringTag,{value:"Module"})),Rwe={gemini:[{id:"gemini-3-flash-preview",name:"Gemini 3 Flash Preview",description:"Next generation (Preview)",inputPricePerMillion:.1,outputPricePerMillion:.4},{id:"gemini-2.5-flash",name:"Gemini 2.5 Flash",description:"Fast & balanced",inputPricePerMillion:.15,outputPricePerMillion:.6},{id:"gemini-2.5-pro",name:"Gemini 2.5 Pro",description:"Most capable",inputPricePerMillion:1.25,outputPricePerMillion:10},{id:"gemini-2.5-flash-lite",name:"Gemini 2.5 Flash-Lite",description:"Lightweight",inputPricePerMillion:.075,outputPricePerMillion:.3},{id:"gemini-2.0-flash",name:"Gemini 2.0 Flash",description:"Stable",inputPricePerMillion:.1,outputPricePerMillion:.4}],openai:[{id:"gpt-4o",name:"GPT-4o",description:"Most capable",inputPricePerMillion:2.5,outputPricePerMillion:10},{id:"gpt-4o-mini",name:"GPT-4o Mini",description:"Fast & affordable",inputPricePerMillion:.15,outputPricePerMillion:.6},{id:"gpt-4-turbo",name:"GPT-4 Turbo",description:"Stable",inputPricePerMillion:10,outputPricePerMillion:30},{id:"o1-mini",name:"o1-mini",description:"Reasoning model",inputPricePerMillion:3,outputPricePerMillion:12}],claude:[{id:"claude-sonnet-4-20250514",name:"Claude Sonnet 4",description:"Latest & fastest",inputPricePerMillion:3,outputPricePerMillion:15},{id:"claude-3-5-sonnet-20241022",name:"Claude 3.5 Sonnet",description:"Previous gen",inputPricePerMillion:3,outputPricePerMillion:15},{id:"claude-3-opus-20240229",name:"Claude 3 Opus",description:"Most capable",inputPricePerMillion:15,outputPricePerMillion:75},{id:"claude-3-haiku-20240307",name:"Claude 3 Haiku",description:"Economy",inputPricePerMillion:.25,outputPricePerMillion:1.25}]},ute={gemini:{providerType:"gemini",apiKey:"",isConfigured:!1},openai:{providerType:"openai",apiKey:"",isConfigured:!1},claude:{providerType:"claude",apiKey:"",isConfigured:!1}},dte={operator:{providerType:"gemini",modelId:"gemini-2.5-flash"},hyperliquidDealer:{providerType:"gemini",modelId:"gemini-2.5-flash"},polymarketDealer:{providerType:"gemini",modelId:"gemini-2.5-flash"}},qI={credentials:ute,componentConfigs:dte},tz="ai_config_store";class Owe{constructor(){this.isInitialized=!1,this.initPromise=null,this.state=qI,this.listeners=new Set,this.initPromise=this.initialize()}async initialize(){if(!this.isInitialized){if(!ke.getUserId()){console.log("[AIConfigStore] No user context yet, skipping initial load"),this.isInitialized=!0;return}await this.loadFromStorage(),this.isInitialized=!0,this.notifyListeners()}}async reload(){console.log("[AIConfigStore] Reloading from storage..."),await this.loadFromStorage(),this.notifyListeners()}reset(){console.log("[AIConfigStore] Resetting to initial state..."),this.state={...qI},this.notifyListeners()}async loadFromStorage(){try{const e=await ke.getItem(ke.getUserKey(tz));if(e){const n=JSON.parse(e);this.state={...qI,...n,credentials:{...ute,...n.credentials},componentConfigs:{...dte,...n.componentConfigs}},console.log("[AIConfigStore] Loaded credentials from storage")}}catch(e){console.error("Failed to load AI config state:",e)}}async waitForInit(){this.initPromise&&await this.initPromise}async saveState(){try{await ke.setItem(ke.getUserKey(tz),JSON.stringify(this.state))}catch(e){console.error("Failed to save AI config state:",e)}}notifyListeners(){this.listeners.forEach(e=>e())}notify(){this.notifyListeners(),this.saveState()}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}getSnapshot(){return this.state}setApiKey(e,n){this.state={...this.state,credentials:{...this.state.credentials,[e]:{providerType:e,apiKey:n,isConfigured:n.trim().length>0}}},this.notify()}getApiKey(e){return this.state.credentials[e].apiKey}clearApiKey(e){this.setApiKey(e,"")}isProviderConfigured(e){return this.state.credentials[e].isConfigured}getConfiguredProviders(){return Object.entries(this.state.credentials).filter(([e,n])=>n.isConfigured).map(([e,n])=>e)}setComponentConfig(e,n){return this.state.credentials[n.providerType].isConfigured?Rwe[n.providerType].find(i=>i.id===n.modelId)?(this.state={...this.state,componentConfigs:{...this.state.componentConfigs,[e]:n}},this.notify(),!0):(console.warn(`Invalid model ${n.modelId} for provider ${n.providerType}`),!1):(console.warn(`Cannot set ${e} to use ${n.providerType}: API key not configured`),!1)}getComponentConfig(e){return this.state.componentConfigs[e]}getComponentProvider(e){return this.state.componentConfigs[e].providerType}getComponentModel(e){return this.state.componentConfigs[e].modelId}getComponentApiKey(e){const n=this.getComponentProvider(e);return this.getApiKey(n)}isComponentConfigValid(e){const n=this.state.componentConfigs[e];return this.state.credentials[n.providerType].isConfigured}getInvalidComponents(){return Object.keys(this.state.componentConfigs).filter(e=>!this.isComponentConfigValid(e))}}const Fn=new Owe,fN={trend:{name:"Trend / Structure",color:"purple",icon:"TrendingUp",maxIndicators:2,indicators:["ema","sma","adx","ichimoku"],description:"Market direction and trend strength"},momentum:{name:"Momentum",color:"blue",icon:"Activity",maxIndicators:2,indicators:["rsi","macd","stoch"],description:"Entry/exit timing and divergences"},volume:{name:"Volume",color:"green",icon:"BarChart2",maxIndicators:1,indicators:["obv","vwap"],description:"Move confirmation with participation"},volatility:{name:"Volatility / Risk",color:"orange",icon:"Zap",maxIndicators:1,indicators:["atr","bollinger"],description:"Risk context and market regime"}},fte=5,ed={balanced:{name:"Balanced",description:"Trend + Momentum + Timing + Risk",emoji:"",indicators:["ema","rsi","macd","atr"],marketCondition:"uncertain or mixed signals"},scalp:{name:"Scalp Momentum",description:"Fast entries, frequent trades (5m-15m)",emoji:"",indicators:["ema","rsi","stoch","vwap"],marketCondition:"high volatility with quick reversals"},trendFollowing:{name:"Trend Following",description:"Sustained movements (15m-1h)",emoji:"",indicators:["ema","sma","adx","macd"],marketCondition:"strong directional trend"},meanReversion:{name:"Mean Reversion",description:"Range / Lateral markets",emoji:"",indicators:["bollinger","rsi","stoch","vwap"],marketCondition:"ranging or sideways market"},volumeConfirm:{name:"Volume Confirmation",description:"Avoid fake breakouts",emoji:"",indicators:["ema","rsi","obv","vwap"],marketCondition:"breakout scenarios or unusual volume"},custom:{name:"Custom",description:"Your custom configuration",emoji:"",indicators:[],marketCondition:"user-defined"}},h3={balanced:`You are Hyperliquid Dealer, an autonomous trading engine.
Your goal is to identify balanced trading opportunities using a combination of indicators.

RULES:
1. Use EMA for trend confirmation, RSI for timing, MACD for momentum, and ATR for risk management.
2. Enter LONG when: EMA points UP + RSI < 40 + MACD histogram positive.
3. Enter SHORT when: EMA points DOWN + RSI > 60 + MACD histogram negative.
4. Stop Loss: Position at 1.5x ATR from entry price.
5. Take Profit: Target 2x risk (1:2 ratio).
6. HOLD if indicators give conflicting signals.`,scalp:`You are Hyperliquid Dealer, a high-frequency scalping engine.
Your goal is to capture quick price movements (5m-15m) in volatile markets.

RULES:
1. Use EMA(9) for immediate direction, RSI for entry, Stoch for confirmation, VWAP as support/resistance.
2. LONG: Price above VWAP + RSI < 35 + Stoch crossing up.
3. SHORT: Price below VWAP + RSI > 65 + Stoch crossing down.
4. Quick trades: Target 0.3-0.5% profit per trade.
5. Tight stop: 0.5% maximum.
6. AVOID trades during low volatility.`,trendFollowing:`You are Hyperliquid Dealer, specialized in following strong trends.
Your goal is to ride sustained directional movements (15m-1h).

RULES:
1. Use EMA/SMA to confirm trend, ADX for strength, MACD for timing.
2. ONLY enter when ADX > 25 (strong trend).
3. LONG: EMA(20) > SMA(50) + ADX > 25 + MACD positive.
4. SHORT: EMA(20) < SMA(50) + ADX > 25 + MACD negative.
5. Let profits run: Trailing stop at 2x ATR.
6. HOLD in sideways markets (ADX < 20).`,meanReversion:`You are Hyperliquid Dealer, specialized in mean reversion.
Your goal is to trade ranging/sideways markets, buying dips and selling tops.

RULES:
1. Use Bollinger Bands for extremes, RSI for oversold/overbought, Stoch for confirmation, VWAP as anchor.
2. LONG: Price touches lower Bollinger + RSI < 30 + Stoch < 20.
3. SHORT: Price touches upper Bollinger + RSI > 70 + Stoch > 80.
4. Target: Return to mean (Bollinger middle or VWAP).
5. Stop: Outside the opposite band.
6. AVOID trading when Bollinger expands (breakout).`,volumeConfirm:`You are Hyperliquid Dealer with focus on volume confirmation.
Your goal is to avoid false breakouts by only trading with volume confirmation.

RULES:
1. Use EMA for trend, RSI for timing, OBV for volume flow, VWAP for institutional levels.
2. LONG: EMA up + RSI < 45 + OBV making higher highs + price above VWAP.
3. SHORT: EMA down + RSI > 55 + OBV making lower lows + price below VWAP.
4. Volume is KING: No OBV confirmation = no trade.
5. Breakouts: Only enter if volume > 1.5x average.
6. HOLD if OBV diverges from price (possible reversal signal).`,custom:`// Write your custom strategy instructions here...
// Example:
// You are a conservative trader focused on mean reversion.
// 1. Only trade when RSI is above 70 or below 30.
// 2. Prioritize high volume tokens.
// 3. Never risk more than 1% of equity per trade.`},Xg={rsi:{enabled:!0,params:{period:14},weight:1},macd:{enabled:!0,params:{fast:12,slow:26,signal:9},weight:1},bollinger:{enabled:!1,params:{period:20,stdDev:2},weight:1},atr:{enabled:!0,params:{period:14},weight:1},adx:{enabled:!1,params:{period:14},weight:1},obv:{enabled:!1,params:{},weight:1},vwap:{enabled:!1,params:{},weight:1},ichimoku:{enabled:!1,params:{conversion:9,base:26,spanB:52,displacement:26},weight:1},ema:{enabled:!0,params:{period:20},weight:1},sma:{enabled:!1,params:{period:20},weight:1},stoch:{enabled:!1,params:{period:14,signalPeriod:3},weight:1}},Mwe=h3.balanced,hte={strategyPrompt:Mwe,aggressiveMode:!1,maxLeverage:5,maxPositionSizeUSDC:50,maxOpenPositions:3,bankrollType:"MANUAL",manualBankroll:100,tradingPairs:["BTC","ETH","SOL"],checkIntervalSeconds:300,analysisTimeframe:"60",historyCandles:30,macroTimeframeEnabled:!1,macroTimeframe:"240",macroEnabledIndicators:["rsi","macd","ema"],indicatorSettings:Xg,autonomousIndicators:!1,selectedPreset:"balanced",promptMode:"preset",stopLossEnabled:!1,stopLossPercent:null,takeProfitEnabled:!1,takeProfitPercent:null},GI={isOn:!1,isAnalyzing:!1,statusMessage:"Ready",statusDetail:"Awaiting activation",executionMode:"local",currentTask:null,currentSignal:null,trendAssessment:"Waiting for data...",pendingExecution:!1,currentExposure:0,activePositions:[],portfolioValue:0,lastSyncTimestamp:0,settings:hte,logs:[],operationHistory:[]};class Lwe{constructor(){this.isInitialized=!1,this.initPromise=null,this.state=GI,this.listeners=new Set,this.initPromise=this.initialize()}async initialize(){this.isInitialized||(await this.loadState(),this.isInitialized=!0,this.notifyListeners())}async waitForInit(){this.initPromise&&await this.initPromise}async reloadFromStorage(){console.log("[DealerStore] Reloading from storage..."),await this.loadState(),this.notifyListeners()}reset(){console.log("[DealerStore] Resetting to initial state..."),this.state={...GI},this.notifyListeners()}async loadState(){var e,n;try{const r=await ke.getItem(ke.getUserKey("vault_dealer_storage"));if(r){const i=JSON.parse(r);let s=((e=i.settings)==null?void 0:e.indicatorSettings)||Xg;const o={};for(const a of Object.keys(Xg)){const l=s[a],c=Xg[a];o[a]={enabled:(l==null?void 0:l.enabled)??c.enabled,params:(l==null?void 0:l.params)??c.params,weight:(l==null?void 0:l.weight)??1}}this.state={...GI,...i,settings:{...hte,...i.settings||{},indicatorSettings:o,selectedPreset:((n=i.settings)==null?void 0:n.selectedPreset)||"balanced"},isAnalyzing:!1,pendingExecution:!1,logs:i.logs||[]}}}catch(r){console.error("Failed to load dealer state:",r)}}async saveState(){try{await ke.setItem(ke.getUserKey("vault_dealer_storage"),JSON.stringify(this.state))}catch(e){console.error("Failed to save dealer state:",e)}}notifyListeners(){this.listeners.forEach(e=>e())}notify(){this.notifyListeners(),this.saveState()}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}getSnapshot(){return this.state}toggleDealer(e){this.state={...this.state,isOn:e,statusMessage:e?"Dealer Activated":"Dealer Stopped"},this.addLog("INFO",`Dealer turned ${e?"ON":"OFF"}`),this.notify()}updateSettings(e){this.state={...this.state,settings:{...this.state.settings,...e}},this.addLog("INFO","Settings updated"),this.notify()}setStrategyPrompt(e){this.updateSettings({strategyPrompt:e})}setAnalyzing(e){this.state={...this.state,isAnalyzing:e},this.notify()}updateStatus(e,n,r,i,s){this.state={...this.state,currentTask:e!==void 0?e:this.state.currentTask,currentSignal:n!==void 0?n:this.state.currentSignal,trendAssessment:r!==void 0?r:this.state.trendAssessment,currentExposure:i!==void 0?i:this.state.currentExposure,statusDetail:s!==void 0?s:this.state.statusDetail},this.notify()}updatePortfolioState(e,n,r){this.state={...this.state,activePositions:e,portfolioValue:n,currentExposure:r,lastSyncTimestamp:Date.now()},this.notify()}addLog(e,n,r){const s=[{id:Date.now().toString()+Math.random().toString().slice(2,5),timestamp:Date.now(),type:e,message:n,details:r},...this.state.logs].slice(0,100);this.state={...this.state,logs:s},this.notify()}clearLogs(){this.state={...this.state,logs:[]},this.notify()}reload(){this.state={...this.state,isAnalyzing:!1,currentTask:null,currentSignal:null,pendingExecution:!1,trendAssessment:"Reset by user",statusMessage:"Settings Applied"},this.addLog("INFO","System reloaded manually"),this.notify()}addOperationRecord(e){const r=[{...e,id:Date.now().toString()+Math.random().toString().slice(2,5)},...this.state.operationHistory].slice(0,50);this.state={...this.state,operationHistory:r},this.notify()}updateOperationStatus(e,n){const r=this.state.operationHistory.map(i=>i.cloid===e?{...i,...n}:i);this.state={...this.state,operationHistory:r},this.notify()}getTradeHistory(e,n=10,r=!0){let i=this.state.operationHistory;e&&(i=i.filter(a=>a.coin.toUpperCase()===e.toUpperCase()));const s=r?this.state.logs.filter(a=>a.type==="REASONING"||a.type==="TRADE"||a.type==="SIGNAL"):[];return{operations:i.slice(0,n).map(a=>{var c,u;const l=s.find(h=>h.message.includes(a.coin)&&Math.abs(h.timestamp-a.timestamp)<6e4);return{...a,fullReasoning:((c=l==null?void 0:l.details)==null?void 0:c.fullReason)||a.reasoning,analysisContext:(u=l==null?void 0:l.details)==null?void 0:u.context}}),totalOperations:i.length,recentLogs:s.slice(0,5)}}}const xt=new Lwe,Dwe=[{value:"politics",label:"Politics",icon:""},{value:"crypto",label:"Crypto",icon:""},{value:"sports",label:"Sports",icon:""},{value:"pop-culture",label:"Pop Culture",icon:""},{value:"science",label:"Science",icon:""},{value:"business",label:"Business",icon:""},{value:"other",label:"Other",icon:""}],ow={balanced:{name:"Balanced",description:"Trade across all categories with balanced risk",emoji:"",categories:["politics","crypto","business","science"],marketCondition:"diverse markets with good liquidity"},highVolume:{name:"High Volume",description:"Focus on most liquid markets",emoji:"",categories:["politics","crypto","sports"],marketCondition:"high volume markets with tight spreads"},crypto:{name:"Crypto Focus",description:"Only cryptocurrency-related markets",emoji:"",categories:["crypto"],marketCondition:"crypto market events and predictions"},conservative:{name:"Conservative",description:"Low risk, high confidence trades only",emoji:"",categories:["politics","business"],marketCondition:"stable markets with clear probable outcomes"},custom:{name:"Custom",description:"Your custom configuration",emoji:"",categories:[],marketCondition:"user-defined"}},WT={balanced:`You are Polymarket Dealer, an autonomous prediction market trading engine.
Your goal is to identify high-probability trading opportunities across diverse markets.

RULES:
1. Analyze market question, current probability, volume, and time to resolution.
2. BUY YES when probability is undervalued (market < 40% but your analysis suggests > 60%).
3. BUY NO when probability is overvalued (market > 60% but your analysis suggests < 40%).
4. SELL positions when probability has moved 15%+ in your favor OR if new information changes thesis.
5. AVOID markets with < $10k liquidity or < 7 days to resolution (unless very high confidence).
6. Max position: 5% of bankroll per market.
7. HOLD if confidence < 65%.`,highVolume:`You are Polymarket Dealer, focused on liquid markets with high volume.
Your goal is to trade actively in markets with the best liquidity and tightest spreads.

RULES:
1. Only trade markets with > $50k volume in 24h.
2. Target spreads < 5% for entries and exits.
3. Look for momentum: price moving in a direction with increasing volume.
4. Use smaller positions (2% max) but trade more frequently.
5. Take profits quickly: exit at 10%+ gain.
6. Cut losses at 8%.
7. AVOID low-liquidity markets even if edge seems large.`,crypto:`You are Polymarket Dealer, specialized in cryptocurrency prediction markets.
Your goal is to leverage crypto market knowledge for prediction market alpha.

RULES:
1. Trade only crypto-related markets (price predictions, ETF approvals, protocol events).
2. Use your understanding of crypto market dynamics and sentiment.
3. BUY YES on bullish crypto catalysts you believe are underpriced.
4. BUY NO when crypto hype seems overextended.
5. Watch for correlation with actual crypto prices.
6. Higher conviction trades allowed (up to 8% of bankroll).
7. AVOID markets about specific coins you lack knowledge of.`,conservative:`You are Polymarket Dealer, taking a conservative low-risk approach.
Your goal is to identify very high probability trades with minimal downside.

RULES:
1. Only trade when confidence > 80%.
2. Focus on markets where outcome seems nearly certain (price > 85% or < 15%).
3. Look for arbitrage opportunities and mispriced markets.
4. Small position sizes (max 3% of bankroll).
5. AVOID volatile markets or those with incoming news catalysts.
6. Prefer longer time horizons (> 30 days to resolution).
7. HOLD cash if no clear opportunities.`,custom:`// Write your custom strategy instructions here...
// Example:
// You are a specialized Polymarket trader.
// 1. Focus on political markets only.
// 2. Trade based on polling data and historical patterns.
// 3. Never risk more than 2% per trade.`},jwe=WT.balanced,pte={strategyPrompt:jwe,marketSelectionMode:"AI_DISCOVERY",selectedMarkets:[],allowedCategories:["politics","crypto","business","science"],maxPositionSizeUSDC:50,maxOpenPositions:5,minLiquidity:1e4,minVolume24h:5e3,minVolumeThreshold:5e3,minLiquidityThreshold:1e4,minSpreadThreshold:.02,confidenceThreshold:.6,bankrollType:"MANUAL",manualBankroll:100,checkIntervalSeconds:300,promptMode:"preset",selectedPreset:"balanced"},KI={isOn:!1,isAnalyzing:!1,statusMessage:"Ready",statusDetail:"Awaiting activation",currentTask:null,currentSignal:null,analysisNote:"Waiting for data...",pendingExecution:!1,currentExposure:0,activePositions:[],portfolioValue:0,lastSyncTimestamp:0,settings:pte,logs:[],operationHistory:[]};class Bwe{constructor(){this.isInitialized=!1,this.initPromise=null,this.state=KI,this.listeners=new Set,this.initPromise=this.initialize()}async initialize(){this.isInitialized||(await this.loadState(),this.isInitialized=!0,this.notifyListeners())}async waitForInit(){this.initPromise&&await this.initPromise}async reloadFromStorage(){console.log("[PolymarketStore] Reloading from storage..."),await this.loadState(),this.notifyListeners()}reset(){console.log("[PolymarketStore] Resetting to initial state..."),this.state={...KI},this.notifyListeners()}async loadState(){try{const e=ke.getUserKey("vault_polymarket_storage");console.log("[PolymarketStore] Loading from key:",e);const n=await ke.getItem(e);if(n){const r=JSON.parse(n);console.log("[PolymarketStore] Loaded settings:",r.settings),this.state={...KI,...r,settings:{...pte,...r.settings||{}},isAnalyzing:!1,pendingExecution:!1,logs:r.logs||[]}}else console.log("[PolymarketStore] No saved data found")}catch(e){console.error("Failed to load Polymarket state:",e)}}async saveState(){try{await ke.setItem(ke.getUserKey("vault_polymarket_storage"),JSON.stringify(this.state))}catch(e){console.error("Failed to save Polymarket state:",e)}}notifyListeners(){this.listeners.forEach(e=>e())}notify(){this.notifyListeners(),this.saveState()}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}getSnapshot(){return this.state}toggleDealer(e){this.state={...this.state,isOn:e,statusMessage:e?"Polymarket Dealer Activated":"Polymarket Dealer Stopped"},this.addLog("INFO",`Polymarket Dealer turned ${e?"ON":"OFF"}`),this.notify()}updateSettings(e){this.state={...this.state,settings:{...this.state.settings,...e}},this.addLog("INFO","Polymarket settings updated"),this.notify()}setStrategyPrompt(e){this.updateSettings({strategyPrompt:e})}setAnalyzing(e){this.state={...this.state,isAnalyzing:e},this.notify()}setCurrentTask(e){this.state={...this.state,currentTask:e},this.notify()}setStatusMessage(e){this.state={...this.state,statusMessage:e},this.notify()}setStatusDetail(e){this.state={...this.state,statusDetail:e},this.notify()}setAnalysisNote(e){this.state={...this.state,analysisNote:e},this.notify()}setCurrentSignal(e){this.state={...this.state,currentSignal:e},this.notify()}updateStatus(e,n,r,i,s){this.state={...this.state,currentTask:e!==void 0?e:this.state.currentTask,currentSignal:n!==void 0?n:this.state.currentSignal,analysisNote:r!==void 0?r:this.state.analysisNote,currentExposure:i!==void 0?i:this.state.currentExposure,statusDetail:s!==void 0?s:this.state.statusDetail},this.notify()}updatePortfolioState(e,n,r){this.state={...this.state,activePositions:e,portfolioValue:n,currentExposure:r,lastSyncTimestamp:Date.now()},this.notify()}addLog(e,n,r){const s=[{id:Date.now().toString()+Math.random().toString().slice(2,5),timestamp:Date.now(),type:e,message:n,details:r},...this.state.logs].slice(0,100);this.state={...this.state,logs:s},this.notify()}clearLogs(){this.state={...this.state,logs:[]},this.notify()}reload(){this.state={...this.state,isAnalyzing:!1,currentTask:null,currentSignal:null,pendingExecution:!1,analysisNote:"Reset by user",statusMessage:"Settings Applied"},this.addLog("INFO","Polymarket system reloaded manually"),this.notify()}addOperationRecord(e){const r=[{...e,id:Date.now().toString()+Math.random().toString().slice(2,5)},...this.state.operationHistory].slice(0,50);this.state={...this.state,operationHistory:r},this.notify()}updateOperationStatus(e,n){const r=this.state.operationHistory.map(i=>i.id===e?{...i,...n}:i);this.state={...this.state,operationHistory:r},this.notify()}getTradeHistory(e=10,n=!0){let r=this.state.operationHistory;const i=n?this.state.logs.filter(o=>o.type==="REASONING"||o.type==="TRADE"||o.type==="SIGNAL"):[];return{operations:r.slice(0,e).map(o=>{var l,c;const a=i.find(u=>u.message.includes(o.question.slice(0,30))&&Math.abs(u.timestamp-o.timestamp)<6e4);return{...o,fullReasoning:((l=a==null?void 0:a.details)==null?void 0:l.fullReason)||o.reasoning,analysisContext:(c=a==null?void 0:a.details)==null?void 0:c.context}}),totalOperations:r.length,recentLogs:i.slice(0,5)}}}const ut=new Bwe,mte=A.createContext(void 0);function B1(){const t=A.useContext(mte);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}function nz(t){return t?{uid:t.id,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified}:null}function Uwe({children:t}){const[e,n]=A.useState(null),[r,i]=A.useState(!0);A.useEffect(()=>{(async()=>{if(!kwe()){console.warn("[AuthContext] Supabase not configured. Auth will not work until configured."),i(!1);return}await Twe(),await wa.initialize();const w=nz(wa.getUser());n(w),ke.setUserId((w==null?void 0:w.uid)||null),w!=null&&w.uid&&(await ke.migrateToUserScoped(),await Fn.reload(),await xt.reloadFromStorage(),await ut.reloadFromStorage()),i(!1)})();const b=wa.onAuthStateChange(async w=>{const k=nz(w);n(k),ke.setUserId((k==null?void 0:k.uid)||null),k!=null&&k.uid?(await ke.migrateToUserScoped(),await Fn.reload(),await xt.reloadFromStorage(),await ut.reloadFromStorage()):(xt.reset(),ut.reset())});return()=>b()},[]);const y={user:e,loading:r,signInWithGoogle:async()=>{try{await wa.signInWithGoogle()}catch(v){throw console.error("Google sign-in error:",v),v}},signInWithGitHub:async()=>{try{await wa.signInWithGitHub()}catch(v){throw console.error("GitHub sign-in error:",v),v}},signInWithDiscord:async()=>{try{await wa.signInWithDiscord()}catch(v){throw console.error("Discord sign-in error:",v),v}},signInWithEthereum:async()=>{try{await wa.signInWithEthereum()}catch(v){throw console.error("Ethereum sign-in error:",v),v}},signInWithSolana:async()=>{try{await wa.signInWithSolana()}catch(v){throw console.error("Solana sign-in error:",v),v}},signInWithEmail:async(v,b)=>{try{await wa.signInWithEmail(v,b)}catch(w){throw console.error("Email sign-in error:",w),w}},signUp:async(v,b)=>{try{await wa.signUp(v,b)}catch(w){throw console.error("Sign-up error:",w),w}},logout:async()=>{try{await wa.logout()}catch(v){throw console.error("Logout error:",v),v}},deleteAccount:async()=>{try{await wa.deleteAccount()}catch(v){throw console.error("Delete account error:",v),v}}};return d.jsx(mte.Provider,{value:y,children:t})}var we=(t=>(t.DASHBOARD="dashboard",t.VAULT="vault",t.AGENT="agent",t.SCHEDULER="scheduler",t.HYPERLIQUID="hyperliquid",t.VAULT_DEALER="vault_dealer",t.DEALER_DASHBOARD="dealer_dashboard",t.DEALER_THINKING="dealer_thinking",t.DEALER_CONFIG="dealer_config",t.DEALER_PROMPT="dealer_prompt",t.CONFIGURATION="configuration",t.SETTINGS="settings",t.HISTORY="history",t.TOKEN_COSTS="token_costs",t.POLYMARKET_DEALER="polymarket_dealer",t.POLYMARKET_DASHBOARD="polymarket_dashboard",t.POLYMARKET_THINKING="polymarket_thinking",t.POLYMARKET_CONFIG="polymarket_config",t.POLYMARKET_PROMPT="polymarket_prompt",t.SOLANA_DEALER="solana_dealer",t.SOLANA_DEALER_DASHBOARD="solana_dealer_dashboard",t.SOLANA_DEALER_THINKING="solana_dealer_thinking",t.SOLANA_DEALER_POLICY="solana_dealer_policy",t.SOLANA_DEALER_LOG="solana_dealer_log",t.PRIVACY="privacy",t.TERMS="terms",t))(we||{});const UD=A.createContext({});function FD(t){const e=A.useRef(null);return e.current===null&&(e.current=t()),e.current}const $D=typeof window<"u",gte=$D?A.useLayoutEffect:A.useEffect,hN=A.createContext(null);function zD(t,e){t.indexOf(e)===-1&&t.push(e)}function VD(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const od=(t,e,n)=>n>e?e:n<t?t:n;let HD=()=>{};const ad={},yte=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function xte(t){return typeof t=="object"&&t!==null}const vte=t=>/^0[^.\s]+$/u.test(t);function qD(t){let e;return()=>(e===void 0&&(e=t()),e)}const Ya=t=>t,Fwe=(t,e)=>n=>e(t(n)),U1=(...t)=>t.reduce(Fwe),Tw=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class GD{constructor(){this.subscriptions=[]}add(e){return zD(this.subscriptions,e),()=>VD(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ic=t=>t*1e3,Ka=t=>t/1e3;function bte(t,e){return e?t*(1e3/e):0}const wte=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,$we=1e-7,zwe=12;function Vwe(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=wte(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>$we&&++a<zwe);return o}function F1(t,e,n,r){if(t===e&&n===r)return Ya;const i=s=>Vwe(s,0,1,t,n);return s=>s===0||s===1?s:wte(i(s),e,r)}const Ete=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Ste=t=>e=>1-t(1-e),Ate=F1(.33,1.53,.69,.99),KD=Ste(Ate),Tte=Ete(KD),kte=t=>(t*=2)<1?.5*KD(t):.5*(2-Math.pow(2,-10*(t-1))),WD=t=>1-Math.sin(Math.acos(t)),Nte=Ste(WD),Cte=Ete(WD),Hwe=F1(.42,0,1,1),qwe=F1(0,0,.58,1),Pte=F1(.42,0,.58,1),Gwe=t=>Array.isArray(t)&&typeof t[0]!="number",_te=t=>Array.isArray(t)&&typeof t[0]=="number",Kwe={linear:Ya,easeIn:Hwe,easeInOut:Pte,easeOut:qwe,circIn:WD,circInOut:Cte,circOut:Nte,backIn:KD,backInOut:Tte,backOut:Ate,anticipate:kte},Wwe=t=>typeof t=="string",rz=t=>{if(_te(t)){HD(t.length===4);const[e,n,r,i]=t;return F1(e,n,r,i)}else if(Wwe(t))return Kwe[t];return t},YS=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Ywe(t,e){let n=new Set,r=new Set,i=!1,s=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function l(u){o.has(u)&&(c.schedule(u),t()),u(a)}const c={schedule:(u,h=!1,m=!1)=>{const y=m&&i?n:r;return h&&o.add(u),y.has(u)||y.add(u),u},cancel:u=>{r.delete(u),o.delete(u)},process:u=>{if(a=u,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(l),n.clear(),i=!1,s&&(s=!1,c.process(u))}};return c}const Jwe=40;function Ite(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=YS.reduce((N,R)=>(N[R]=Ywe(s),N),{}),{setup:a,read:l,resolveKeyframes:c,preUpdate:u,update:h,preRender:m,render:g,postRender:y}=o,v=()=>{const N=ad.useManualTiming?i.timestamp:performance.now();n=!1,ad.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(N-i.timestamp,Jwe),1)),i.timestamp=N,i.isProcessing=!0,a.process(i),l.process(i),c.process(i),u.process(i),h.process(i),m.process(i),g.process(i),y.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(v))},b=()=>{n=!0,r=!0,i.isProcessing||t(v)};return{schedule:YS.reduce((N,R)=>{const D=o[R];return N[R]=(O,B=!1,z=!1)=>(n||b(),D.schedule(O,B,z)),N},{}),cancel:N=>{for(let R=0;R<YS.length;R++)o[YS[R]].cancel(N)},state:i,steps:o}}const{schedule:Nr,cancel:ah,state:is,steps:WI}=Ite(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ya,!0);let uT;function Xwe(){uT=void 0}const Eo={now:()=>(uT===void 0&&Eo.set(is.isProcessing||ad.useManualTiming?is.timestamp:performance.now()),uT),set:t=>{uT=t,queueMicrotask(Xwe)}},Rte=t=>e=>typeof e=="string"&&e.startsWith(t),Ote=Rte("--"),Qwe=Rte("var(--"),YD=t=>Qwe(t)?Zwe.test(t.split("/*")[0].trim()):!1,Zwe=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,zx={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},kw={...zx,transform:t=>od(0,1,t)},JS={...zx,default:1},aw=t=>Math.round(t*1e5)/1e5,JD=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function e1e(t){return t==null}const t1e=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,XD=(t,e)=>n=>!!(typeof n=="string"&&t1e.test(n)&&n.startsWith(t)||e&&!e1e(n)&&Object.prototype.hasOwnProperty.call(n,e)),Mte=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(JD);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},n1e=t=>od(0,255,t),YI={...zx,transform:t=>Math.round(n1e(t))},Tp={test:XD("rgb","red"),parse:Mte("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+YI.transform(t)+", "+YI.transform(e)+", "+YI.transform(n)+", "+aw(kw.transform(r))+")"};function r1e(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const p3={test:XD("#"),parse:r1e,transform:Tp.transform},$1=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Af=$1("deg"),Rc=$1("%"),Zt=$1("px"),i1e=$1("vh"),s1e=$1("vw"),iz={...Rc,parse:t=>Rc.parse(t)/100,transform:t=>Rc.transform(t*100)},Pg={test:XD("hsl","hue"),parse:Mte("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Rc.transform(aw(e))+", "+Rc.transform(aw(n))+", "+aw(kw.transform(r))+")"},fi={test:t=>Tp.test(t)||p3.test(t)||Pg.test(t),parse:t=>Tp.test(t)?Tp.parse(t):Pg.test(t)?Pg.parse(t):p3.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Tp.transform(t):Pg.transform(t),getAnimatableNone:t=>{const e=fi.parse(t);return e.alpha=0,fi.transform(e)}},o1e=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function a1e(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(JD))==null?void 0:e.length)||0)+(((n=t.match(o1e))==null?void 0:n.length)||0)>0}const Lte="number",Dte="color",l1e="var",c1e="var(",sz="${}",u1e=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Nw(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(u1e,l=>(fi.test(l)?(r.color.push(s),i.push(Dte),n.push(fi.parse(l))):l.startsWith(c1e)?(r.var.push(s),i.push(l1e),n.push(l)):(r.number.push(s),i.push(Lte),n.push(parseFloat(l))),++s,sz)).split(sz);return{values:n,split:a,indexes:r,types:i}}function jte(t){return Nw(t).values}function Bte(t){const{split:e,types:n}=Nw(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===Lte?s+=aw(i[o]):a===Dte?s+=fi.transform(i[o]):s+=i[o]}return s}}const d1e=t=>typeof t=="number"?0:fi.test(t)?fi.getAnimatableNone(t):t;function f1e(t){const e=jte(t);return Bte(t)(e.map(d1e))}const lh={test:a1e,parse:jte,createTransformer:Bte,getAnimatableNone:f1e};function JI(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function h1e({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=JI(l,a,t+1/3),s=JI(l,a,t),o=JI(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function YT(t,e){return n=>n>0?e:t}const Dr=(t,e,n)=>t+(e-t)*n,XI=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},p1e=[p3,Tp,Pg],m1e=t=>p1e.find(e=>e.test(t));function oz(t){const e=m1e(t);if(!e)return!1;let n=e.parse(t);return e===Pg&&(n=h1e(n)),n}const az=(t,e)=>{const n=oz(t),r=oz(e);if(!n||!r)return YT(t,e);const i={...n};return s=>(i.red=XI(n.red,r.red,s),i.green=XI(n.green,r.green,s),i.blue=XI(n.blue,r.blue,s),i.alpha=Dr(n.alpha,r.alpha,s),Tp.transform(i))},m3=new Set(["none","hidden"]);function g1e(t,e){return m3.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function y1e(t,e){return n=>Dr(t,e,n)}function QD(t){return typeof t=="number"?y1e:typeof t=="string"?YD(t)?YT:fi.test(t)?az:b1e:Array.isArray(t)?Ute:typeof t=="object"?fi.test(t)?az:x1e:YT}function Ute(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>QD(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function x1e(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=QD(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function v1e(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],o=t.indexes[s][r[s]],a=t.values[o]??0;n[i]=a,r[s]++}return n}const b1e=(t,e)=>{const n=lh.createTransformer(e),r=Nw(t),i=Nw(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?m3.has(t)&&!i.values.length||m3.has(e)&&!r.values.length?g1e(t,e):U1(Ute(v1e(r,i),i.values),n):YT(t,e)};function Fte(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Dr(t,e,n):QD(t)(t,e)}const w1e=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Nr.update(e,n),stop:()=>ah(e),now:()=>is.isProcessing?is.timestamp:Eo.now()}},$te=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=Math.round(t(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},JT=2e4;function ZD(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<JT;)e+=n,r=t.next(e);return e>=JT?1/0:e}function E1e(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(ZD(r),JT);return{type:"keyframes",ease:s=>r.next(i*s).value/e,duration:Ka(i)}}const S1e=5;function zte(t,e,n){const r=Math.max(e-S1e,0);return bte(n-t(r),e-r)}const qr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},QI=.001;function A1e({duration:t=qr.duration,bounce:e=qr.bounce,velocity:n=qr.velocity,mass:r=qr.mass}){let i,s,o=1-e;o=od(qr.minDamping,qr.maxDamping,o),t=od(qr.minDuration,qr.maxDuration,Ka(t)),o<1?(i=c=>{const u=c*o,h=u*t,m=u-n,g=g3(c,o),y=Math.exp(-h);return QI-m/g*y},s=c=>{const h=c*o*t,m=h*n+n,g=Math.pow(o,2)*Math.pow(c,2)*t,y=Math.exp(-h),v=g3(Math.pow(c,2),o);return(-i(c)+QI>0?-1:1)*((m-g)*y)/v}):(i=c=>{const u=Math.exp(-c*t),h=(c-n)*t+1;return-QI+u*h},s=c=>{const u=Math.exp(-c*t),h=(n-c)*(t*t);return u*h});const a=5/t,l=k1e(i,s,a);if(t=Ic(t),isNaN(l))return{stiffness:qr.stiffness,damping:qr.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const T1e=12;function k1e(t,e,n){let r=n;for(let i=1;i<T1e;i++)r=r-t(r)/e(r);return r}function g3(t,e){return t*Math.sqrt(1-e*e)}const N1e=["duration","bounce"],C1e=["stiffness","damping","mass"];function lz(t,e){return e.some(n=>t[n]!==void 0)}function P1e(t){let e={velocity:qr.velocity,stiffness:qr.stiffness,damping:qr.damping,mass:qr.mass,isResolvedFromDuration:!1,...t};if(!lz(t,C1e)&&lz(t,N1e))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*od(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:qr.mass,stiffness:i,damping:s}}else{const n=A1e(t);e={...e,...n,mass:qr.mass},e.isResolvedFromDuration=!0}return e}function XT(t=qr.visualDuration,e=qr.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:h,velocity:m,isResolvedFromDuration:g}=P1e({...n,velocity:-Ka(n.velocity||0)}),y=m||0,v=c/(2*Math.sqrt(l*u)),b=o-s,w=Ka(Math.sqrt(l/u)),k=Math.abs(b)<5;r||(r=k?qr.restSpeed.granular:qr.restSpeed.default),i||(i=k?qr.restDelta.granular:qr.restDelta.default);let N;if(v<1){const D=g3(w,v);N=O=>{const B=Math.exp(-v*w*O);return o-B*((y+v*w*b)/D*Math.sin(D*O)+b*Math.cos(D*O))}}else if(v===1)N=D=>o-Math.exp(-w*D)*(b+(y+w*b)*D);else{const D=w*Math.sqrt(v*v-1);N=O=>{const B=Math.exp(-v*w*O),z=Math.min(D*O,300);return o-B*((y+v*w*b)*Math.sinh(z)+D*b*Math.cosh(z))/D}}const R={calculatedDuration:g&&h||null,next:D=>{const O=N(D);if(g)a.done=D>=h;else{let B=D===0?y:0;v<1&&(B=D===0?Ic(y):zte(N,D,O));const z=Math.abs(B)<=r,U=Math.abs(o-O)<=i;a.done=z&&U}return a.value=a.done?o:O,a},toString:()=>{const D=Math.min(ZD(R),JT),O=$te(B=>R.next(D*B).value,D,30);return D+"ms "+O},toTransition:()=>{}};return R}XT.applyToOptions=t=>{const e=E1e(t,100,XT);return t.ease=e.ease,t.duration=Ic(e.duration),t.type="keyframes",t};function y3({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const h=t[0],m={done:!1,value:h},g=z=>a!==void 0&&z<a||l!==void 0&&z>l,y=z=>a===void 0?l:l===void 0||Math.abs(a-z)<Math.abs(l-z)?a:l;let v=n*e;const b=h+v,w=o===void 0?b:o(b);w!==b&&(v=w-h);const k=z=>-v*Math.exp(-z/r),N=z=>w+k(z),R=z=>{const U=k(z),$=N(z);m.done=Math.abs(U)<=c,m.value=m.done?w:$};let D,O;const B=z=>{g(m.value)&&(D=z,O=XT({keyframes:[m.value,y(m.value)],velocity:zte(N,z,m.value),damping:i,stiffness:s,restDelta:c,restSpeed:u}))};return B(0),{calculatedDuration:null,next:z=>{let U=!1;return!O&&D===void 0&&(U=!0,R(z),B(z)),D!==void 0&&z>=D?O.next(z-D):(!U&&R(z),m)}}}function _1e(t,e,n){const r=[],i=n||ad.mix||Fte,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||Ya:e;a=U1(l,a)}r.push(a)}return r}function I1e(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(HD(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=_1e(e,r,i),l=a.length,c=u=>{if(o&&u<t[0])return e[0];let h=0;if(l>1)for(;h<t.length-2&&!(u<t[h+1]);h++);const m=Tw(t[h],t[h+1],u);return a[h](m)};return n?u=>c(od(t[0],t[s-1],u)):c}function R1e(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Tw(0,e,r);t.push(Dr(n,1,i))}}function O1e(t){const e=[0];return R1e(e,t.length-1),e}function M1e(t,e){return t.map(n=>n*e)}function L1e(t,e){return t.map(()=>e||Pte).splice(0,t.length-1)}function lw({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=Gwe(r)?r.map(rz):rz(r),s={done:!1,value:e[0]},o=M1e(n&&n.length===e.length?n:O1e(e),t),a=I1e(o,e,{ease:Array.isArray(i)?i:L1e(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const D1e=t=>t!==null;function e8(t,{repeat:e,repeatType:n="loop"},r,i=1){const s=t.filter(D1e),a=i<0||e&&n!=="loop"&&e%2===1?0:s.length-1;return!a||r===void 0?s[a]:r}const j1e={decay:y3,inertia:y3,tween:lw,keyframes:lw,spring:XT};function Vte(t){typeof t.type=="string"&&(t.type=j1e[t.type])}class t8{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const B1e=t=>t/100;class n8 extends t8{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==Eo.now()&&this.tick(Eo.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;Vte(e);const{type:n=lw,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=e;let{keyframes:a}=e;const l=n||lw;l!==lw&&typeof a[0]!="number"&&(this.mixKeyframes=U1(B1e,Fte(a[0],a[1])),a=[0,100]);const c=l({...e,keyframes:a});s==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...a].reverse(),velocity:-o})),c.calculatedDuration===null&&(c.calculatedDuration=ZD(c));const{calculatedDuration:u}=c;this.calculatedDuration=u,this.resolvedDuration=u+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=c}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:c=0,keyframes:u,repeat:h,repeatType:m,repeatDelay:g,type:y,onUpdate:v,finalKeyframe:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const w=this.currentTime-c*(this.playbackSpeed>=0?1:-1),k=this.playbackSpeed>=0?w<0:w>i;this.currentTime=Math.max(w,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let N=this.currentTime,R=r;if(h){const z=Math.min(this.currentTime,i)/a;let U=Math.floor(z),$=z%1;!$&&z>=1&&($=1),$===1&&U--,U=Math.min(U,h+1),!!(U%2)&&(m==="reverse"?($=1-$,g&&($-=g/a)):m==="mirror"&&(R=o)),N=od(0,1,$)*a}const D=k?{done:!1,value:u[0]}:R.next(N);s&&(D.value=s(D.value));let{done:O}=D;!k&&l!==null&&(O=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const B=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&O);return B&&y!==y3&&(D.value=e8(u,this.options,b,this.speed)),v&&v(D.value),B&&this.finish(),D}then(e,n){return this.finished.then(e,n)}get duration(){return Ka(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Ka(e)}get time(){return Ka(this.currentTime)}set time(e){var n;e=Ic(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Eo.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Ka(this.currentTime))}play(){var i,s;if(this.isStopped)return;const{driver:e=w1e,startTime:n}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(s=(i=this.options).onPlay)==null||s.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Eo.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function U1e(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const kp=t=>t*180/Math.PI,x3=t=>{const e=kp(Math.atan2(t[1],t[0]));return v3(e)},F1e={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:x3,rotateZ:x3,skewX:t=>kp(Math.atan(t[1])),skewY:t=>kp(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},v3=t=>(t=t%360,t<0&&(t+=360),t),cz=x3,uz=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),dz=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),$1e={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:uz,scaleY:dz,scale:t=>(uz(t)+dz(t))/2,rotateX:t=>v3(kp(Math.atan2(t[6],t[5]))),rotateY:t=>v3(kp(Math.atan2(-t[2],t[0]))),rotateZ:cz,rotate:cz,skewX:t=>kp(Math.atan(t[4])),skewY:t=>kp(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function b3(t){return t.includes("scale")?1:0}function w3(t,e){if(!t||t==="none")return b3(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=$1e,i=n;else{const a=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=F1e,i=a}if(!i)return b3(e);const s=r[e],o=i[1].split(",").map(V1e);return typeof s=="function"?s(o):o[s]}const z1e=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return w3(n,e)};function V1e(t){return parseFloat(t.trim())}const Vx=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Hx=new Set(Vx),fz=t=>t===zx||t===Zt,H1e=new Set(["x","y","z"]),q1e=Vx.filter(t=>!H1e.has(t));function G1e(t){const e=[];return q1e.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const om={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>w3(e,"x"),y:(t,{transform:e})=>w3(e,"y")};om.translateX=om.x;om.translateY=om.y;const am=new Set;let E3=!1,S3=!1,A3=!1;function Hte(){if(S3){const t=Array.from(am).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=G1e(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))==null||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}S3=!1,E3=!1,am.forEach(t=>t.complete(A3)),am.clear()}function qte(){am.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(S3=!0)})}function K1e(){A3=!0,qte(),Hte(),A3=!1}class r8{constructor(e,n,r,i,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(am.add(this),E3||(E3=!0,Nr.read(qte),Nr.resolveKeyframes(Hte))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const s=i==null?void 0:i.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&n){const a=r.readValue(n,o);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=o),i&&s===void 0&&i.set(e[0])}U1e(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),am.delete(this)}cancel(){this.state==="scheduled"&&(am.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const W1e=t=>t.startsWith("--");function Y1e(t,e,n){W1e(e)?t.style.setProperty(e,n):t.style[e]=n}const J1e=qD(()=>window.ScrollTimeline!==void 0),X1e={};function Q1e(t,e){const n=qD(t);return()=>X1e[e]??n()}const Gte=Q1e(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Vb=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,hz={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Vb([0,.65,.55,1]),circOut:Vb([.55,0,1,.45]),backIn:Vb([.31,.01,.66,-.59]),backOut:Vb([.33,1.53,.69,.99])};function Kte(t,e){if(t)return typeof t=="function"?Gte()?$te(t,e):"ease-out":_te(t)?Vb(t):Array.isArray(t)?t.map(n=>Kte(n,e)||hz.easeOut):hz[t]}function Z1e(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeOut",times:l}={},c=void 0){const u={[e]:n};l&&(u.offset=l);const h=Kte(a,i);Array.isArray(h)&&(u.easing=h);const m={delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return c&&(m.pseudoElement=c),t.animate(u,m)}function Wte(t){return typeof t=="function"&&"applyToOptions"in t}function eEe({type:t,...e}){return Wte(t)&&Gte()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class tEe extends t8{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=e;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=e,HD(typeof e.type!="string");const c=eEe(e);this.animation=Z1e(n,r,i,c,s),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const u=e8(i,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(u):Y1e(n,r,u),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return Ka(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Ka(e)}get time(){return Ka(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Ic(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&J1e()?(this.animation.timeline=e,Ya):n(this)}}const Yte={anticipate:kte,backInOut:Tte,circInOut:Cte};function nEe(t){return t in Yte}function rEe(t){typeof t.ease=="string"&&nEe(t.ease)&&(t.ease=Yte[t.ease])}const pz=10;class iEe extends tEe{constructor(e){rEe(e),Vte(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const a=new n8({...o,autoplay:!1}),l=Ic(this.finishedTime??this.time);n.setWithVelocity(a.sample(l-pz).value,a.sample(l).value,pz),a.stop()}}const mz=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(lh.test(t)||t==="0")&&!t.startsWith("url("));function sEe(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function oEe(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=mz(i,e),a=mz(s,e);return!o||!a?!1:sEe(t)||(n==="spring"||Wte(n))&&r}function T3(t){t.duration=0,t.type="keyframes"}const aEe=new Set(["opacity","clipPath","filter","transform"]),lEe=qD(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function cEe(t){var u;const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:s,type:o}=t;if(!(((u=e==null?void 0:e.owner)==null?void 0:u.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=e.owner.getProps();return lEe()&&n&&aEe.has(n)&&(n!=="transform"||!c)&&!l&&!r&&i!=="mirror"&&s!==0&&o!=="inertia"}const uEe=40;class dEe extends t8{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",keyframes:a,name:l,motionValue:c,element:u,...h}){var y;super(),this.stop=()=>{var v,b;this._animation&&(this._animation.stop(),(v=this.stopTimeline)==null||v.call(this)),(b=this.keyframeResolver)==null||b.cancel()},this.createdAt=Eo.now();const m={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,name:l,motionValue:c,element:u,...h},g=(u==null?void 0:u.KeyframeResolver)||r8;this.keyframeResolver=new g(a,(v,b,w)=>this.onKeyframesResolved(v,b,m,!w),l,c,u),(y=this.keyframeResolver)==null||y.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:s,type:o,velocity:a,delay:l,isHandoff:c,onUpdate:u}=r;this.resolvedAt=Eo.now(),oEe(e,s,o,a)||((ad.instantAnimations||!l)&&(u==null||u(e8(e,r,n))),e[0]=e[e.length-1],T3(r),r.repeat=0);const m={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>uEe?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},g=!c&&cEe(m)?new iEe({...m,element:m.motionValue.owner.current}):new n8(m);g.finished.then(()=>this.notifyFinished()).catch(Ya),this.pendingTimeline&&(this.stopTimeline=g.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=g}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),K1e()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const fEe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function hEe(t){const e=fEe.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function Jte(t,e,n=1){const[r,i]=hEe(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return yte(o)?parseFloat(o):o}return YD(i)?Jte(i,e,n+1):i}function i8(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const Xte=new Set(["width","height","top","left","right","bottom",...Vx]),pEe={test:t=>t==="auto",parse:t=>t},Qte=t=>e=>e.test(t),Zte=[zx,Zt,Rc,Af,s1e,i1e,pEe],gz=t=>Zte.find(Qte(t));function mEe(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||vte(t):!0}const gEe=new Set(["brightness","contrast","saturate","opacity"]);function yEe(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(JD)||[];if(!r)return t;const i=n.replace(r,"");let s=gEe.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const xEe=/\b([a-z-]*)\(.*?\)/gu,k3={...lh,getAnimatableNone:t=>{const e=t.match(xEe);return e?e.map(yEe).join(" "):t}},yz={...zx,transform:Math.round},vEe={rotate:Af,rotateX:Af,rotateY:Af,rotateZ:Af,scale:JS,scaleX:JS,scaleY:JS,scaleZ:JS,skew:Af,skewX:Af,skewY:Af,distance:Zt,translateX:Zt,translateY:Zt,translateZ:Zt,x:Zt,y:Zt,z:Zt,perspective:Zt,transformPerspective:Zt,opacity:kw,originX:iz,originY:iz,originZ:Zt},s8={borderWidth:Zt,borderTopWidth:Zt,borderRightWidth:Zt,borderBottomWidth:Zt,borderLeftWidth:Zt,borderRadius:Zt,radius:Zt,borderTopLeftRadius:Zt,borderTopRightRadius:Zt,borderBottomRightRadius:Zt,borderBottomLeftRadius:Zt,width:Zt,maxWidth:Zt,height:Zt,maxHeight:Zt,top:Zt,right:Zt,bottom:Zt,left:Zt,padding:Zt,paddingTop:Zt,paddingRight:Zt,paddingBottom:Zt,paddingLeft:Zt,margin:Zt,marginTop:Zt,marginRight:Zt,marginBottom:Zt,marginLeft:Zt,backgroundPositionX:Zt,backgroundPositionY:Zt,...vEe,zIndex:yz,fillOpacity:kw,strokeOpacity:kw,numOctaves:yz},bEe={...s8,color:fi,backgroundColor:fi,outlineColor:fi,fill:fi,stroke:fi,borderColor:fi,borderTopColor:fi,borderRightColor:fi,borderBottomColor:fi,borderLeftColor:fi,filter:k3,WebkitFilter:k3},ene=t=>bEe[t];function tne(t,e){let n=ene(t);return n!==k3&&(n=lh),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const wEe=new Set(["auto","none","0"]);function EEe(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!wEe.has(s)&&Nw(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=tne(n,i)}class SEe extends r8{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),YD(c))){const u=Jte(c,n.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!Xte.has(r)||e.length!==2)return;const[i,s]=e,o=gz(i),a=gz(s);if(o!==a)if(fz(o)&&fz(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else om[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||mEe(e[i]))&&r.push(i);r.length&&EEe(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=om[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var a;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,o=r[s];r[s]=om[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([l,c])=>{e.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function AEe(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=(n==null?void 0:n[t])??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const nne=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function rne(t){return xte(t)&&"offsetHeight"in t}const xz=30,TEe=t=>!isNaN(parseFloat(t));class kEe{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var s;const i=Eo.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Eo.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=TEe(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new GD);const r=this.events[e].add(n);return e==="change"?()=>{r(),Nr.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Eo.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>xz)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,xz);return bte(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ux(t,e){return new kEe(t,e)}const{schedule:o8}=Ite(queueMicrotask,!1),hl={x:!1,y:!1};function ine(){return hl.x||hl.y}function NEe(t){return t==="x"||t==="y"?hl[t]?null:(hl[t]=!0,()=>{hl[t]=!1}):hl.x||hl.y?null:(hl.x=hl.y=!0,()=>{hl.x=hl.y=!1})}function sne(t,e){const n=AEe(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function vz(t){return!(t.pointerType==="touch"||ine())}function CEe(t,e,n={}){const[r,i,s]=sne(t,n),o=a=>{if(!vz(a))return;const{target:l}=a,c=e(l,a);if(typeof c!="function"||!l)return;const u=h=>{vz(h)&&(c(h),l.removeEventListener("pointerleave",u))};l.addEventListener("pointerleave",u,i)};return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const one=(t,e)=>e?t===e?!0:one(t,e.parentElement):!1,a8=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,PEe=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function _Ee(t){return PEe.has(t.tagName)||t.tabIndex!==-1}const dT=new WeakSet;function bz(t){return e=>{e.key==="Enter"&&t(e)}}function ZI(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const IEe=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=bz(()=>{if(dT.has(n))return;ZI(n,"down");const i=bz(()=>{ZI(n,"up")}),s=()=>ZI(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function wz(t){return a8(t)&&!ine()}function REe(t,e,n={}){const[r,i,s]=sne(t,n),o=a=>{const l=a.currentTarget;if(!wz(a))return;dT.add(l);const c=e(l,a),u=(g,y)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",m),dT.has(l)&&dT.delete(l),wz(g)&&typeof c=="function"&&c(g,{success:y})},h=g=>{u(g,l===window||l===document||n.useGlobalTarget||one(l,g.target))},m=g=>{u(g,!1)};window.addEventListener("pointerup",h,i),window.addEventListener("pointercancel",m,i)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),rne(a)&&(a.addEventListener("focus",c=>IEe(c,i)),!_Ee(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),s}function ane(t){return xte(t)&&"ownerSVGElement"in t}function OEe(t){return ane(t)&&t.tagName==="svg"}const Ms=t=>!!(t&&t.getVelocity),MEe=[...Zte,fi,lh],LEe=t=>MEe.find(Qte(t)),l8=A.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function Ez(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function DEe(...t){return e=>{let n=!1;const r=t.map(i=>{const s=Ez(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():Ez(t[i],null)}}}}function jEe(...t){return A.useCallback(DEe(...t),t)}class BEe extends A.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=rne(r)&&r.offsetWidth||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=i-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function UEe({children:t,isPresent:e,anchorX:n,root:r}){const i=A.useId(),s=A.useRef(null),o=A.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=A.useContext(l8),l=jEe(s,t==null?void 0:t.ref);return A.useInsertionEffect(()=>{const{width:c,height:u,top:h,left:m,right:g}=o.current;if(e||!s.current||!c||!u)return;const y=n==="left"?`left: ${m}`:`right: ${g}`;s.current.dataset.motionPopId=i;const v=document.createElement("style");a&&(v.nonce=a);const b=r??document.head;return b.appendChild(v),v.sheet&&v.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${u}px !important;
            ${y}px !important;
            top: ${h}px !important;
          }
        `),()=>{b.contains(v)&&b.removeChild(v)}},[e]),d.jsx(BEe,{isPresent:e,childRef:s,sizeRef:o,children:A.cloneElement(t,{ref:l})})}const FEe=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o,anchorX:a,root:l})=>{const c=FD($Ee),u=A.useId();let h=!0,m=A.useMemo(()=>(h=!1,{id:u,initial:e,isPresent:n,custom:i,onExitComplete:g=>{c.set(g,!0);for(const y of c.values())if(!y)return;r&&r()},register:g=>(c.set(g,!1),()=>c.delete(g))}),[n,c,r]);return s&&h&&(m={...m}),A.useMemo(()=>{c.forEach((g,y)=>c.set(y,!1))},[n]),A.useEffect(()=>{!n&&!c.size&&r&&r()},[n]),o==="popLayout"&&(t=d.jsx(UEe,{isPresent:n,anchorX:a,root:l,children:t})),d.jsx(hN.Provider,{value:m,children:t})};function $Ee(){return new Map}function lne(t=!0){const e=A.useContext(hN);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=A.useId();A.useEffect(()=>{if(t)return i(s)},[t]);const o=A.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const XS=t=>t.key||"";function Sz(t){const e=[];return A.Children.forEach(t,n=>{A.isValidElement(n)&&e.push(n)}),e}const js=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1,anchorX:a="left",root:l})=>{const[c,u]=lne(o),h=A.useMemo(()=>Sz(t),[t]),m=o&&!c?[]:h.map(XS),g=A.useRef(!0),y=A.useRef(h),v=FD(()=>new Map),[b,w]=A.useState(h),[k,N]=A.useState(h);gte(()=>{g.current=!1,y.current=h;for(let O=0;O<k.length;O++){const B=XS(k[O]);m.includes(B)?v.delete(B):v.get(B)!==!0&&v.set(B,!1)}},[k,m.length,m.join("-")]);const R=[];if(h!==b){let O=[...h];for(let B=0;B<k.length;B++){const z=k[B],U=XS(z);m.includes(U)||(O.splice(B,0,z),R.push(z))}return s==="wait"&&R.length&&(O=R),N(Sz(O)),w(h),null}const{forceRender:D}=A.useContext(UD);return d.jsx(d.Fragment,{children:k.map(O=>{const B=XS(O),z=o&&!c?!1:h===k||m.includes(B),U=()=>{if(v.has(B))v.set(B,!0);else return;let $=!0;v.forEach(W=>{W||($=!1)}),$&&(D==null||D(),N(y.current),o&&(u==null||u()),r&&r())};return d.jsx(FEe,{isPresent:z,initial:!g.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:s,root:l,onExitComplete:z?void 0:U,anchorX:a,children:O},B)})})},cne=A.createContext({strict:!1}),Az={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},dx={};for(const t in Az)dx[t]={isEnabled:e=>Az[t].some(n=>!!e[n])};function zEe(t){for(const e in t)dx[e]={...dx[e],...t[e]}}const VEe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function QT(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||VEe.has(t)}let une=t=>!QT(t);function HEe(t){typeof t=="function"&&(une=e=>e.startsWith("on")?!QT(e):t(e))}try{HEe(require("@emotion/is-prop-valid").default)}catch{}function qEe(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(une(i)||n===!0&&QT(i)||!e&&!QT(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const pN=A.createContext({});function mN(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Cw(t){return typeof t=="string"||Array.isArray(t)}const c8=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],u8=["initial",...c8];function gN(t){return mN(t.animate)||u8.some(e=>Cw(t[e]))}function dne(t){return!!(gN(t)||t.variants)}function GEe(t,e){if(gN(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Cw(n)?n:void 0,animate:Cw(r)?r:void 0}}return t.inherit!==!1?e:{}}function KEe(t){const{initial:e,animate:n}=GEe(t,A.useContext(pN));return A.useMemo(()=>({initial:e,animate:n}),[Tz(e),Tz(n)])}function Tz(t){return Array.isArray(t)?t.join(" "):t}function kz(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const yb={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Zt.test(t))t=parseFloat(t);else return t;const n=kz(t,e.target.x),r=kz(t,e.target.y);return`${n}% ${r}%`}},WEe={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=lh.parse(t);if(i.length>5)return r;const s=lh.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const c=Dr(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}},N3={borderRadius:{...yb,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:yb,borderTopRightRadius:yb,borderBottomLeftRadius:yb,borderBottomRightRadius:yb,boxShadow:WEe};function fne(t,{layout:e,layoutId:n}){return Hx.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!N3[t]||t==="opacity")}const YEe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},JEe=Vx.length;function XEe(t,e,n){let r="",i=!0;for(let s=0;s<JEe;s++){const o=Vx[s],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=nne(a,s8[o]);if(!l){i=!1;const u=YEe[o]||o;r+=`${u}(${c}) `}n&&(e[o]=c)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function d8(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if(Hx.has(l)){o=!0;continue}else if(Ote(l)){i[l]=c;continue}else{const u=nne(c,s8[l]);l.startsWith("origin")?(a=!0,s[l]=u):r[l]=u}}if(e.transform||(o||n?r.transform=XEe(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:u=0}=s;r.transformOrigin=`${l} ${c} ${u}`}}const f8=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function hne(t,e,n){for(const r in e)!Ms(e[r])&&!fne(r,n)&&(t[r]=e[r])}function QEe({transformTemplate:t},e){return A.useMemo(()=>{const n=f8();return d8(n,e,t),Object.assign({},n.vars,n.style)},[e])}function ZEe(t,e){const n=t.style||{},r={};return hne(r,n,t),Object.assign(r,QEe(t,e)),r}function eSe(t,e){const n={},r=ZEe(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const tSe={offset:"stroke-dashoffset",array:"stroke-dasharray"},nSe={offset:"strokeDashoffset",array:"strokeDasharray"};function rSe(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?tSe:nSe;t[s.offset]=Zt.transform(-r);const o=Zt.transform(e),a=Zt.transform(n);t[s.array]=`${o} ${a}`}function pne(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:o=0,...a},l,c,u){if(d8(t,a,c),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:m}=t;h.transform&&(m.transform=h.transform,delete h.transform),(m.transform||h.transformOrigin)&&(m.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),m.transform&&(m.transformBox=(u==null?void 0:u.transformBox)??"fill-box",delete h.transformBox),e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),i!==void 0&&rSe(h,i,s,o,!1)}const mne=()=>({...f8(),attrs:{}}),gne=t=>typeof t=="string"&&t.toLowerCase()==="svg";function iSe(t,e,n,r){const i=A.useMemo(()=>{const s=mne();return pne(s,e,gne(r),t.transformTemplate,t.style),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};hne(s,t.style,t),i.style={...s,...i.style}}return i}const sSe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function h8(t){return typeof t!="string"||t.includes("-")?!1:!!(sSe.indexOf(t)>-1||/[A-Z]/u.test(t))}function oSe(t,e,n,{latestValues:r},i,s=!1){const a=(h8(t)?iSe:eSe)(e,r,i,t),l=qEe(e,typeof t=="string",s),c=t!==A.Fragment?{...l,...a,ref:n}:{},{children:u}=e,h=A.useMemo(()=>Ms(u)?u.get():u,[u]);return A.createElement(t,{...c,children:h})}function Nz(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function p8(t,e,n,r){if(typeof e=="function"){const[i,s]=Nz(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=Nz(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function fT(t){return Ms(t)?t.get():t}function aSe({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:lSe(n,r,i,t),renderState:e()}}function lSe(t,e,n,r){const i={},s=r(t,{});for(const m in s)i[m]=fT(s[m]);let{initial:o,animate:a}=t;const l=gN(t),c=dne(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=n?n.initial===!1:!1;u=u||o===!1;const h=u?a:o;if(h&&typeof h!="boolean"&&!mN(h)){const m=Array.isArray(h)?h:[h];for(let g=0;g<m.length;g++){const y=p8(t,m[g]);if(y){const{transitionEnd:v,transition:b,...w}=y;for(const k in w){let N=w[k];if(Array.isArray(N)){const R=u?N.length-1:0;N=N[R]}N!==null&&(i[k]=N)}for(const k in v)i[k]=v[k]}}}return i}const yne=t=>(e,n)=>{const r=A.useContext(pN),i=A.useContext(hN),s=()=>aSe(t,e,r,i);return n?s():FD(s)};function m8(t,e,n){var s;const{style:r}=t,i={};for(const o in r)(Ms(r[o])||e.style&&Ms(e.style[o])||fne(o,t)||((s=n==null?void 0:n.getValue(o))==null?void 0:s.liveStyle)!==void 0)&&(i[o]=r[o]);return i}const cSe=yne({scrapeMotionValuesFromProps:m8,createRenderState:f8});function xne(t,e,n){const r=m8(t,e,n);for(const i in t)if(Ms(t[i])||Ms(e[i])){const s=Vx.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}const uSe=yne({scrapeMotionValuesFromProps:xne,createRenderState:mne}),dSe=Symbol.for("motionComponentSymbol");function _g(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function fSe(t,e,n){return A.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):_g(n)&&(n.current=r))},[e])}const g8=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),hSe="framerAppearId",vne="data-"+g8(hSe),bne=A.createContext({});function pSe(t,e,n,r,i){var v,b;const{visualElement:s}=A.useContext(pN),o=A.useContext(cne),a=A.useContext(hN),l=A.useContext(l8).reducedMotion,c=A.useRef(null);r=r||o.renderer,!c.current&&r&&(c.current=r(t,{visualState:e,parent:s,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const u=c.current,h=A.useContext(bne);u&&!u.projection&&i&&(u.type==="html"||u.type==="svg")&&mSe(c.current,n,i,h);const m=A.useRef(!1);A.useInsertionEffect(()=>{u&&m.current&&u.update(n,a)});const g=n[vne],y=A.useRef(!!g&&!((v=window.MotionHandoffIsComplete)!=null&&v.call(window,g))&&((b=window.MotionHasOptimisedAnimation)==null?void 0:b.call(window,g)));return gte(()=>{u&&(m.current=!0,window.MotionIsMounted=!0,u.updateFeatures(),u.scheduleRenderMicrotask(),y.current&&u.animationState&&u.animationState.animateChanges())}),A.useEffect(()=>{u&&(!y.current&&u.animationState&&u.animationState.animateChanges(),y.current&&(queueMicrotask(()=>{var w;(w=window.MotionHandoffMarkAsComplete)==null||w.call(window,g)}),y.current=!1),u.enteringChildren=void 0)}),u}function mSe(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c,layoutCrossfade:u}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:wne(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&_g(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:u,layoutScroll:l,layoutRoot:c})}function wne(t){if(t)return t.options.allowProjection!==!1?t.projection:wne(t.parent)}function eR(t,{forwardMotionProps:e=!1}={},n,r){n&&zEe(n);const i=h8(t)?uSe:cSe;function s(a,l){let c;const u={...A.useContext(l8),...a,layoutId:gSe(a)},{isStatic:h}=u,m=KEe(a),g=i(a,h);if(!h&&$D){ySe();const y=xSe(u);c=y.MeasureLayout,m.visualElement=pSe(t,g,u,r,y.ProjectionNode)}return d.jsxs(pN.Provider,{value:m,children:[c&&m.visualElement?d.jsx(c,{visualElement:m.visualElement,...u}):null,oSe(t,a,fSe(g,m.visualElement,l),g,h,e)]})}s.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=A.forwardRef(s);return o[dSe]=t,o}function gSe({layoutId:t}){const e=A.useContext(UD).id;return e&&t!==void 0?e+"-"+t:t}function ySe(t,e){A.useContext(cne).strict}function xSe(t){const{drag:e,layout:n}=dx;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function vSe(t,e){if(typeof Proxy>"u")return eR;const n=new Map,r=(s,o)=>eR(s,o,t,e),i=(s,o)=>r(s,o);return new Proxy(i,{get:(s,o)=>o==="create"?r:(n.has(o)||n.set(o,eR(o,void 0,t,e)),n.get(o))})}function Ene({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function bSe({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function wSe(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function tR(t){return t===void 0||t===1}function C3({scale:t,scaleX:e,scaleY:n}){return!tR(t)||!tR(e)||!tR(n)}function lp(t){return C3(t)||Sne(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Sne(t){return Cz(t.x)||Cz(t.y)}function Cz(t){return t&&t!=="0%"}function ZT(t,e,n){const r=t-n,i=e*r;return n+i}function Pz(t,e,n,r,i){return i!==void 0&&(t=ZT(t,i,r)),ZT(t,n,r)+e}function P3(t,e=0,n=1,r,i){t.min=Pz(t.min,e,n,r,i),t.max=Pz(t.max,e,n,r,i)}function Ane(t,{x:e,y:n}){P3(t.x,e.translate,e.scale,e.originPoint),P3(t.y,n.translate,n.scale,n.originPoint)}const _z=.999999999999,Iz=1.0000000000001;function ESe(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Rg(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,Ane(t,o)),r&&lp(s.latestValues)&&Rg(t,s.latestValues))}e.x<Iz&&e.x>_z&&(e.x=1),e.y<Iz&&e.y>_z&&(e.y=1)}function Ig(t,e){t.min=t.min+e,t.max=t.max+e}function Rz(t,e,n,r,i=.5){const s=Dr(t.min,t.max,i);P3(t,e,n,s,r)}function Rg(t,e){Rz(t.x,e.x,e.scaleX,e.scale,e.originX),Rz(t.y,e.y,e.scaleY,e.scale,e.originY)}function Tne(t,e){return Ene(wSe(t.getBoundingClientRect(),e))}function SSe(t,e,n){const r=Tne(t,n),{scroll:i}=e;return i&&(Ig(r.x,i.offset.x),Ig(r.y,i.offset.y)),r}const Oz=()=>({translate:0,scale:1,origin:0,originPoint:0}),Og=()=>({x:Oz(),y:Oz()}),Mz=()=>({min:0,max:0}),Si=()=>({x:Mz(),y:Mz()}),_3={current:null},kne={current:!1};function ASe(){if(kne.current=!0,!!$D)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>_3.current=t.matches;t.addEventListener("change",e),e()}else _3.current=!1}const TSe=new WeakMap;function kSe(t,e,n){for(const r in e){const i=e[r],s=n[r];if(Ms(i))t.addValue(r,i);else if(Ms(s))t.addValue(r,ux(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,ux(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const Lz=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class NSe{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=r8,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Eo.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,Nr.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=gN(n),this.isVariantNode=dne(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in h){const g=h[m];l[m]!==void 0&&Ms(g)&&g.set(l[m])}}mount(e){var n;this.current=e,TSe.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),kne.current||ASe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:_3.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),ah(this.notifyUpdate),ah(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Hx.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Nr.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in dx){const n=dx[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Si()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Lz.length;r++){const i=Lz[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=kSe(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=ux(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(yte(r)||vte(r))?r=parseFloat(r):!LEe(r)&&lh.test(n)&&(r=tne(e,n)),this.setBaseTarget(e,Ms(r)?r.get():r)),Ms(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var s;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=p8(this.props,n,(s=this.presenceContext)==null?void 0:s.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Ms(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new GD),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){o8.render(this.render)}}class Nne extends NSe{constructor(){super(...arguments),this.KeyframeResolver=SEe}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ms(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Cne(t,{style:e,vars:n},r,i){const s=t.style;let o;for(o in e)s[o]=e[o];i==null||i.applyProjectionStyles(s,r);for(o in n)s.setProperty(o,n[o])}function CSe(t){return window.getComputedStyle(t)}class PSe extends Nne{constructor(){super(...arguments),this.type="html",this.renderInstance=Cne}readValueFromInstance(e,n){var r;if(Hx.has(n))return(r=this.projection)!=null&&r.isProjecting?b3(n):z1e(e,n);{const i=CSe(e),s=(Ote(n)?i.getPropertyValue(n):i[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return Tne(e,n)}build(e,n,r){d8(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return m8(e,n,r)}}const Pne=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function _Se(t,e,n,r){Cne(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(Pne.has(i)?i:g8(i),e.attrs[i])}class ISe extends Nne{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Si}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Hx.has(n)){const r=ene(n);return r&&r.default||0}return n=Pne.has(n)?n:g8(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return xne(e,n,r)}build(e,n,r){pne(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){_Se(e,n,r,i)}mount(e){this.isSVGTag=gne(e.tagName),super.mount(e)}}const RSe=(t,e)=>h8(t)?new ISe(e):new PSe(e,{allowProjection:t!==A.Fragment});function Qg(t,e,n){const r=t.getProps();return p8(r,e,n!==void 0?n:r.custom,t)}const I3=t=>Array.isArray(t);function OSe(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,ux(n))}function MSe(t){return I3(t)?t[t.length-1]||0:t}function LSe(t,e){const n=Qg(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=MSe(s[o]);OSe(t,o,a)}}function DSe(t){return!!(Ms(t)&&t.add)}function R3(t,e){const n=t.getValue("willChange");if(DSe(n))return n.add(e);if(!n&&ad.WillChange){const r=new ad.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function _ne(t){return t.props[vne]}const jSe=t=>t!==null;function BSe(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(jSe),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[s]}const USe={type:"spring",stiffness:500,damping:25,restSpeed:10},FSe=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),$Se={type:"keyframes",duration:.8},zSe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},VSe=(t,{keyframes:e})=>e.length>2?$Se:Hx.has(t)?t.startsWith("scale")?FSe(e[1]):USe:zSe;function HSe({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const y8=(t,e,n,r={},i,s)=>o=>{const a=i8(r,t)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-Ic(l);const u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:m=>{e.set(m),a.onUpdate&&a.onUpdate(m)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};HSe(a)||Object.assign(u,VSe(t,u)),u.duration&&(u.duration=Ic(u.duration)),u.repeatDelay&&(u.repeatDelay=Ic(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let h=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(T3(u),u.delay===0&&(h=!0)),(ad.instantAnimations||ad.skipAnimations)&&(h=!0,T3(u),u.delay=0),u.allowFlatten=!a.type&&!a.ease,h&&!s&&e.get()!==void 0){const m=BSe(u.keyframes,a);if(m!==void 0){Nr.update(()=>{u.onUpdate(m),u.onComplete()});return}}return a.isSync?new n8(u):new dEe(u)};function qSe({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function Ine(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...a}=e;r&&(s=r);const l=[],c=i&&t.animationState&&t.animationState.getState()[i];for(const u in a){const h=t.getValue(u,t.latestValues[u]??null),m=a[u];if(m===void 0||c&&qSe(c,u))continue;const g={delay:n,...i8(s||{},u)},y=h.get();if(y!==void 0&&!h.isAnimating&&!Array.isArray(m)&&m===y&&!g.velocity)continue;let v=!1;if(window.MotionHandoffAnimation){const w=_ne(t);if(w){const k=window.MotionHandoffAnimation(w,u,Nr);k!==null&&(g.startTime=k,v=!0)}}R3(t,u),h.start(y8(u,h,m,t.shouldReduceMotion&&Xte.has(u)?{type:!1}:g,t,v));const b=h.animation;b&&l.push(b)}return o&&Promise.all(l).then(()=>{Nr.update(()=>{o&&LSe(t,o)})}),l}function Rne(t,e,n,r=0,i=1){const s=Array.from(t).sort((c,u)=>c.sortNodePosition(u)).indexOf(e),o=t.size,a=(o-1)*r;return typeof n=="function"?n(s,o):i===1?s*r:a-s*r}function O3(t,e,n={}){var l;const r=Qg(t,e,n.type==="exit"?(l=t.presenceContext)==null?void 0:l.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(Ine(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:m}=i;return GSe(t,e,c,u,h,m,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[c,u]=a==="beforeChildren"?[s,o]:[o,s];return c().then(()=>u())}else return Promise.all([s(),o(n.delay)])}function GSe(t,e,n=0,r=0,i=0,s=1,o){const a=[];for(const l of t.variantChildren)l.notify("AnimationStart",e),a.push(O3(l,e,{...o,delay:n+(typeof r=="function"?0:r)+Rne(t.variantChildren,l,r,i,s)}).then(()=>l.notify("AnimationComplete",e)));return Promise.all(a)}function KSe(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>O3(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=O3(t,e,n);else{const i=typeof e=="function"?Qg(t,e,n.custom):e;r=Promise.all(Ine(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function One(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const WSe=u8.length;function Mne(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?Mne(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<WSe;n++){const r=u8[n],i=t.props[r];(Cw(i)||i===!1)&&(e[r]=i)}return e}const YSe=[...c8].reverse(),JSe=c8.length;function XSe(t){return e=>Promise.all(e.map(({animation:n,options:r})=>KSe(t,n,r)))}function QSe(t){let e=XSe(t),n=Dz(),r=!0;const i=l=>(c,u)=>{var m;const h=Qg(t,u,l==="exit"?(m=t.presenceContext)==null?void 0:m.custom:void 0);if(h){const{transition:g,transitionEnd:y,...v}=h;c={...c,...v,...y}}return c};function s(l){e=l(t)}function o(l){const{props:c}=t,u=Mne(t.parent)||{},h=[],m=new Set;let g={},y=1/0;for(let b=0;b<JSe;b++){const w=YSe[b],k=n[w],N=c[w]!==void 0?c[w]:u[w],R=Cw(N),D=w===l?k.isActive:null;D===!1&&(y=b);let O=N===u[w]&&N!==c[w]&&R;if(O&&r&&t.manuallyAnimateOnMount&&(O=!1),k.protectedKeys={...g},!k.isActive&&D===null||!N&&!k.prevProp||mN(N)||typeof N=="boolean")continue;const B=ZSe(k.prevProp,N);let z=B||w===l&&k.isActive&&!O&&R||b>y&&R,U=!1;const $=Array.isArray(N)?N:[N];let W=$.reduce(i(w),{});D===!1&&(W={});const{prevResolvedValues:H={}}=k,F={...H,...W},T=V=>{z=!0,m.has(V)&&(U=!0,m.delete(V)),k.needsAnimating[V]=!0;const K=t.getValue(V);K&&(K.liveStyle=!1)};for(const V in F){const K=W[V],te=H[V];if(g.hasOwnProperty(V))continue;let G=!1;I3(K)&&I3(te)?G=!One(K,te):G=K!==te,G?K!=null?T(V):m.add(V):K!==void 0&&m.has(V)?T(V):k.protectedKeys[V]=!0}k.prevProp=N,k.prevResolvedValues=W,k.isActive&&(g={...g,...W}),r&&t.blockInitialAnimation&&(z=!1);const _=O&&B;z&&(!_||U)&&h.push(...$.map(V=>{const K={type:w};if(typeof V=="string"&&r&&!_&&t.manuallyAnimateOnMount&&t.parent){const{parent:te}=t,G=Qg(te,V);if(te.enteringChildren&&G){const{delayChildren:q}=G.transition||{};K.delay=Rne(te.enteringChildren,t,q)}}return{animation:V,options:K}}))}if(m.size){const b={};if(typeof c.initial!="boolean"){const w=Qg(t,Array.isArray(c.initial)?c.initial[0]:c.initial);w&&w.transition&&(b.transition=w.transition)}m.forEach(w=>{const k=t.getBaseTarget(w),N=t.getValue(w);N&&(N.liveStyle=!0),b[w]=k??null}),h.push({animation:b})}let v=!!h.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(v=!1),r=!1,v?e(h):Promise.resolve()}function a(l,c){var h;if(n[l].isActive===c)return Promise.resolve();(h=t.variantChildren)==null||h.forEach(m=>{var g;return(g=m.animationState)==null?void 0:g.setActive(l,c)}),n[l].isActive=c;const u=o(l);for(const m in n)n[m].protectedKeys={};return u}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=Dz()}}}function ZSe(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!One(e,t):!1}function Qh(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Dz(){return{animate:Qh(!0),whileInView:Qh(),whileHover:Qh(),whileTap:Qh(),whileDrag:Qh(),whileFocus:Qh(),exit:Qh()}}class wh{constructor(e){this.isMounted=!1,this.node=e}update(){}}class eAe extends wh{constructor(e){super(e),e.animationState||(e.animationState=QSe(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();mN(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let tAe=0;class nAe extends wh{constructor(){super(...arguments),this.id=tAe++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const rAe={animation:{Feature:eAe},exit:{Feature:nAe}};function Pw(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function z1(t){return{point:{x:t.pageX,y:t.pageY}}}const iAe=t=>e=>a8(e)&&t(e,z1(e));function cw(t,e,n,r){return Pw(t,e,iAe(n),r)}const Lne=1e-4,sAe=1-Lne,oAe=1+Lne,Dne=.01,aAe=0-Dne,lAe=0+Dne;function Xs(t){return t.max-t.min}function cAe(t,e,n){return Math.abs(t-e)<=n}function jz(t,e,n,r=.5){t.origin=r,t.originPoint=Dr(e.min,e.max,t.origin),t.scale=Xs(n)/Xs(e),t.translate=Dr(n.min,n.max,t.origin)-t.originPoint,(t.scale>=sAe&&t.scale<=oAe||isNaN(t.scale))&&(t.scale=1),(t.translate>=aAe&&t.translate<=lAe||isNaN(t.translate))&&(t.translate=0)}function uw(t,e,n,r){jz(t.x,e.x,n.x,r?r.originX:void 0),jz(t.y,e.y,n.y,r?r.originY:void 0)}function Bz(t,e,n){t.min=n.min+e.min,t.max=t.min+Xs(e)}function uAe(t,e,n){Bz(t.x,e.x,n.x),Bz(t.y,e.y,n.y)}function Uz(t,e,n){t.min=e.min-n.min,t.max=t.min+Xs(e)}function ek(t,e,n){Uz(t.x,e.x,n.x),Uz(t.y,e.y,n.y)}function Ia(t){return[t("x"),t("y")]}const jne=({current:t})=>t?t.ownerDocument.defaultView:null,Fz=(t,e)=>Math.abs(t-e);function dAe(t,e){const n=Fz(t.x,e.x),r=Fz(t.y,e.y);return Math.sqrt(n**2+r**2)}class Bne{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=rR(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,y=dAe(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!g&&!y)return;const{point:v}=m,{timestamp:b}=is;this.history.push({...v,timestamp:b});const{onStart:w,onMove:k}=this.handlers;g||(w&&w(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),k&&k(this.lastMoveEvent,m)},this.handlePointerMove=(m,g)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=nR(g,this.transformPagePoint),Nr.update(this.updatePoint,!0)},this.handlePointerUp=(m,g)=>{this.end();const{onEnd:y,onSessionEnd:v,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=rR(m.type==="pointercancel"?this.lastMoveEventInfo:nR(g,this.transformPagePoint),this.history);this.startEvent&&y&&y(m,w),v&&v(m,w)},!a8(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const a=z1(e),l=nR(a,this.transformPagePoint),{point:c}=l,{timestamp:u}=is;this.history=[{...c,timestamp:u}];const{onSessionStart:h}=n;h&&h(e,rR(l,this.history)),this.removeListeners=U1(cw(this.contextWindow,"pointermove",this.handlePointerMove),cw(this.contextWindow,"pointerup",this.handlePointerUp),cw(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ah(this.updatePoint)}}function nR(t,e){return e?{point:e(t.point)}:t}function $z(t,e){return{x:t.x-e.x,y:t.y-e.y}}function rR({point:t},e){return{point:t,delta:$z(t,Une(e)),offset:$z(t,fAe(e)),velocity:hAe(e,.1)}}function fAe(t){return t[0]}function Une(t){return t[t.length-1]}function hAe(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=Une(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Ic(e)));)n--;if(!r)return{x:0,y:0};const s=Ka(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function pAe(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Dr(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Dr(n,t,r.max):Math.min(t,n)),t}function zz(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function mAe(t,{top:e,left:n,bottom:r,right:i}){return{x:zz(t.x,n,i),y:zz(t.y,e,r)}}function Vz(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function gAe(t,e){return{x:Vz(t.x,e.x),y:Vz(t.y,e.y)}}function yAe(t,e){let n=.5;const r=Xs(t),i=Xs(e);return i>r?n=Tw(e.min,e.max-r,t.min):r>i&&(n=Tw(t.min,t.max-i,e.min)),od(0,1,n)}function xAe(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const M3=.35;function vAe(t=M3){return t===!1?t=0:t===!0&&(t=M3),{x:Hz(t,"left","right"),y:Hz(t,"top","bottom")}}function Hz(t,e,n){return{min:qz(t,e),max:qz(t,n)}}function qz(t,e){return typeof t=="number"?t:t[e]||0}const bAe=new WeakMap;class wAe{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Si(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=h=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(z1(h).point)},o=(h,m)=>{const{drag:g,dragPropagation:y,onDragStart:v}=this.getProps();if(g&&!y&&(this.openDragLock&&this.openDragLock(),this.openDragLock=NEe(g),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ia(w=>{let k=this.getAxisMotionValue(w).get()||0;if(Rc.test(k)){const{projection:N}=this.visualElement;if(N&&N.layout){const R=N.layout.layoutBox[w];R&&(k=Xs(R)*(parseFloat(k)/100))}}this.originPoint[w]=k}),v&&Nr.postRender(()=>v(h,m)),R3(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},a=(h,m)=>{this.latestPointerEvent=h,this.latestPanInfo=m;const{dragPropagation:g,dragDirectionLock:y,onDirectionLock:v,onDrag:b}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:w}=m;if(y&&this.currentDirection===null){this.currentDirection=EAe(w),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",m.point,w),this.updateAxis("y",m.point,w),this.visualElement.render(),b&&b(h,m)},l=(h,m)=>{this.latestPointerEvent=h,this.latestPanInfo=m,this.stop(h,m),this.latestPointerEvent=null,this.latestPanInfo=null},c=()=>Ia(h=>{var m;return this.getAnimationState(h)==="paused"&&((m=this.getAxisMotionValue(h).animation)==null?void 0:m.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new Bne(e,{onSessionStart:s,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,distanceThreshold:r,contextWindow:jne(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&Nr.postRender(()=>a(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!QS(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=pAe(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var s;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,i=this.constraints;e&&_g(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=mAe(r.layoutBox,e):this.constraints=!1,this.elastic=vAe(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Ia(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=xAe(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!_g(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=SSe(r,i.root,this.visualElement.getTransformPagePoint());let o=gAe(i.layout.layoutBox,s);if(n){const a=n(bSe(o));this.hasMutatedConstraints=!!a,a&&(o=Ene(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=Ia(u=>{if(!QS(u,n,this.currentDirection))return;let h=l&&l[u]||{};o&&(h={min:0,max:0});const m=i?200:1e6,g=i?40:1e7,y={type:"inertia",velocity:r?e[u]:0,bounceStiffness:m,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...s,...h};return this.startAxisValueAnimation(u,y)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return R3(this.visualElement,e),r.start(y8(e,r,0,n,this.visualElement,!1))}stopAnimation(){Ia(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ia(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Ia(n=>{const{drag:r}=this.getProps();if(!QS(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-Dr(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!_g(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Ia(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=yAe({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Ia(o=>{if(!QS(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(Dr(l,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;bAe.set(this.visualElement,this);const e=this.visualElement.current,n=cw(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();_g(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Nr.read(r);const o=Pw(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",(({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Ia(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=l[u].translate,h.set(h.get()+l[u].translate))}),this.visualElement.render())}));return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=M3,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function QS(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function EAe(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class SAe extends wh{constructor(e){super(e),this.removeGroupControls=Ya,this.removeListeners=Ya,this.controls=new wAe(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ya}unmount(){this.removeGroupControls(),this.removeListeners()}}const Gz=t=>(e,n)=>{t&&Nr.postRender(()=>t(e,n))};class AAe extends wh{constructor(){super(...arguments),this.removePointerDownListener=Ya}onPointerDown(e){this.session=new Bne(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:jne(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:Gz(e),onStart:Gz(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Nr.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=cw(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const hT={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let iR=!1;class TAe extends A.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),iR&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),hT.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:o}=r;return o&&(o.isPresent=s,iR=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==s?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Nr.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),o8.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;iR=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Fne(t){const[e,n]=lne(),r=A.useContext(UD);return d.jsx(TAe,{...t,layoutGroup:r,switchLayoutGroup:A.useContext(bne),isPresent:e,safeToRemove:n})}function kAe(t,e,n){const r=Ms(t)?t:ux(t);return r.start(y8("",r,e,n)),r.animation}const NAe=(t,e)=>t.depth-e.depth;class CAe{constructor(){this.children=[],this.isDirty=!1}add(e){zD(this.children,e),this.isDirty=!0}remove(e){VD(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(NAe),this.isDirty=!1,this.children.forEach(e)}}function PAe(t,e){const n=Eo.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(ah(r),t(s-e))};return Nr.setup(r,!0),()=>ah(r)}const $ne=["TopLeft","TopRight","BottomLeft","BottomRight"],_Ae=$ne.length,Kz=t=>typeof t=="string"?parseFloat(t):t,Wz=t=>typeof t=="number"||Zt.test(t);function IAe(t,e,n,r,i,s){i?(t.opacity=Dr(0,n.opacity??1,RAe(r)),t.opacityExit=Dr(e.opacity??1,0,OAe(r))):s&&(t.opacity=Dr(e.opacity??1,n.opacity??1,r));for(let o=0;o<_Ae;o++){const a=`border${$ne[o]}Radius`;let l=Yz(e,a),c=Yz(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||Wz(l)===Wz(c)?(t[a]=Math.max(Dr(Kz(l),Kz(c),r),0),(Rc.test(c)||Rc.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=Dr(e.rotate||0,n.rotate||0,r))}function Yz(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const RAe=zne(0,.5,Nte),OAe=zne(.5,.95,Ya);function zne(t,e,n){return r=>r<t?0:r>e?1:n(Tw(t,e,r))}function Jz(t,e){t.min=e.min,t.max=e.max}function ul(t,e){Jz(t.x,e.x),Jz(t.y,e.y)}function Xz(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Qz(t,e,n,r,i){return t-=e,t=ZT(t,1/n,r),i!==void 0&&(t=ZT(t,1/i,r)),t}function MAe(t,e=0,n=1,r=.5,i,s=t,o=t){if(Rc.test(e)&&(e=parseFloat(e),e=Dr(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Dr(s.min,s.max,r);t===s&&(a-=e),t.min=Qz(t.min,e,n,a,i),t.max=Qz(t.max,e,n,a,i)}function Zz(t,e,[n,r,i],s,o){MAe(t,e[n],e[r],e[i],e.scale,s,o)}const LAe=["x","scaleX","originX"],DAe=["y","scaleY","originY"];function eV(t,e,n,r){Zz(t.x,e,LAe,n?n.x:void 0,r?r.x:void 0),Zz(t.y,e,DAe,n?n.y:void 0,r?r.y:void 0)}function tV(t){return t.translate===0&&t.scale===1}function Vne(t){return tV(t.x)&&tV(t.y)}function nV(t,e){return t.min===e.min&&t.max===e.max}function jAe(t,e){return nV(t.x,e.x)&&nV(t.y,e.y)}function rV(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Hne(t,e){return rV(t.x,e.x)&&rV(t.y,e.y)}function iV(t){return Xs(t.x)/Xs(t.y)}function sV(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class BAe{constructor(){this.members=[]}add(e){zD(this.members,e),e.scheduleRender()}remove(e){if(VD(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function UAe(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:u,rotateX:h,rotateY:m,skewX:g,skewY:y}=n;c&&(r=`perspective(${c}px) ${r}`),u&&(r+=`rotate(${u}deg) `),h&&(r+=`rotateX(${h}deg) `),m&&(r+=`rotateY(${m}deg) `),g&&(r+=`skewX(${g}deg) `),y&&(r+=`skewY(${y}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const sR=["","X","Y","Z"],FAe=1e3;let $Ae=0;function oR(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function qne(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=_ne(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Nr,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&qne(r)}function Gne({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=$Ae++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(HAe),this.nodes.forEach(WAe),this.nodes.forEach(YAe),this.nodes.forEach(qAe)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new CAe)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new GD),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=ane(o)&&!OEe(o),this.instance=o;const{layoutId:a,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),t){let u,h=0;const m=()=>this.root.updateBlockedByResize=!1;Nr.read(()=>{h=window.innerWidth}),t(o,()=>{const g=window.innerWidth;g!==h&&(h=g,this.root.updateBlockedByResize=!0,u&&u(),u=PAe(m,250),hT.hasAnimatedSinceResize&&(hT.hasAnimatedSinceResize=!1,this.nodes.forEach(lV)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&c&&(a||l)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:h,hasRelativeLayoutChanged:m,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||c.getDefaultTransition()||eTe,{onLayoutAnimationStart:v,onLayoutAnimationComplete:b}=c.getProps(),w=!this.targetLayout||!Hne(this.targetLayout,g),k=!h&&m;if(this.options.layoutRoot||this.resumeFrom||k||h&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const N={...i8(y,"layout"),onPlay:v,onComplete:b};(c.shouldReduceMotion||this.options.layoutRoot)&&(N.delay=0,N.type=!1),this.startAnimation(N),this.setAnimationOrigin(u,k)}else h||lV(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ah(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(JAe),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&qne(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(oV);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(aV);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(KAe),this.nodes.forEach(zAe),this.nodes.forEach(VAe)):this.nodes.forEach(aV),this.clearAllSnapshots();const a=Eo.now();is.delta=od(0,1e3/60,a-is.timestamp),is.timestamp=a,is.isProcessing=!0,WI.update.process(is),WI.preRender.process(is),WI.render.process(is),is.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,o8.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(GAe),this.sharedNodes.forEach(XAe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Nr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Nr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Xs(this.snapshot.measuredBox.x)&&!Xs(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Si(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!Vne(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&this.instance&&(a||lp(this.latestValues)||u)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),tTe(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:o}=this.options;if(!o)return Si();const a=o.measureViewportBox();if(!(((c=this.scroll)==null?void 0:c.wasRoot)||this.path.some(nTe))){const{scroll:u}=this.root;u&&(Ig(a.x,u.offset.x),Ig(a.y,u.offset.y))}return a}removeElementScroll(o){var l;const a=Si();if(ul(a,o),(l=this.scroll)!=null&&l.wasRoot)return a;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:h,options:m}=u;u!==this.root&&h&&m.layoutScroll&&(h.wasRoot&&ul(a,o),Ig(a.x,h.offset.x),Ig(a.y,h.offset.y))}return a}applyTransform(o,a=!1){const l=Si();ul(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Rg(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),lp(u.latestValues)&&Rg(l,u.latestValues)}return lp(this.latestValues)&&Rg(l,this.latestValues),l}removeTransform(o){const a=Si();ul(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!lp(c.latestValues))continue;C3(c.latestValues)&&c.updateSnapshot();const u=Si(),h=c.measurePageBox();ul(u,h),eV(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return lp(this.latestValues)&&eV(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==is.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var g;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(g=this.parent)!=null&&g.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:u,layoutId:h}=this.options;if(!this.layout||!(u||h))return;this.resolvedRelativeTargetAt=is.timestamp;const m=this.getClosestProjectingParent();m&&this.linkedParentVersion!==m.layoutVersion&&!m.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(m&&m.layout?this.createRelativeTarget(m,this.layout.layoutBox,m.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Si(),this.targetWithTransforms=Si()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),uAe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ul(this.target,this.layout.layoutBox),Ane(this.target,this.targetDelta)):ul(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?this.createRelativeTarget(m,this.target,m.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||C3(this.parent.latestValues)||Sne(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(o,a,l){this.relativeParent=o,this.linkedParentVersion=o.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Si(),this.relativeTargetOrigin=Si(),ek(this.relativeTargetOrigin,a,l),ul(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var y;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||(y=this.parent)!=null&&y.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===is.timestamp&&(l=!1),l)return;const{layout:c,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||u))return;ul(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,m=this.treeScale.y;ESe(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Si());const{target:g}=o;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Xz(this.prevProjectionDelta.x,this.projectionDelta.x),Xz(this.prevProjectionDelta.y,this.projectionDelta.y)),uw(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==m||!sV(this.projectionDelta.x,this.prevProjectionDelta.x)||!sV(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Og(),this.projectionDelta=Og(),this.projectionDeltaWithTransform=Og()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},h=Og();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const m=Si(),g=l?l.source:void 0,y=this.layout?this.layout.source:void 0,v=g!==y,b=this.getStack(),w=!b||b.members.length<=1,k=!!(v&&!w&&this.options.crossfade===!0&&!this.path.some(ZAe));this.animationProgress=0;let N;this.mixTargetDelta=R=>{const D=R/1e3;cV(h.x,o.x,D),cV(h.y,o.y,D),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ek(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),QAe(this.relativeTarget,this.relativeTargetOrigin,m,D),N&&jAe(this.relativeTarget,N)&&(this.isProjectionDirty=!1),N||(N=Si()),ul(N,this.relativeTarget)),v&&(this.animationValues=u,IAe(u,c,this.latestValues,D,k,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=D},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var a,l,c;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(c=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||c.stop(),this.pendingAnimation&&(ah(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Nr.update(()=>{hT.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=ux(0)),this.currentAnimation=kAe(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),o.onUpdate&&o.onUpdate(u)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(FAe),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&Kne(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Si();const h=Xs(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const m=Xs(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+m}ul(a,l),Rg(a,u),uw(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new BAe),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&oR("z",o,c,this.animationValues);for(let u=0;u<sR.length;u++)oR(`rotate${sR[u]}`,o,c,this.animationValues),oR(`skew${sR[u]}`,o,c,this.animationValues);o.render();for(const u in c)o.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=fT(a==null?void 0:a.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none";return}const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=fT(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!lp(this.latestValues)&&(o.transform=l?l({},""):"none",this.hasProjected=!1);return}o.visibility="";const u=c.animationValues||c.latestValues;this.applyTransformsToTarget();let h=UAe(this.projectionDeltaWithTransform,this.treeScale,u);l&&(h=l(u,h)),o.transform=h;const{x:m,y:g}=this.projectionDelta;o.transformOrigin=`${m.origin*100}% ${g.origin*100}% 0`,c.animationValues?o.opacity=c===this?u.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:u.opacityExit:o.opacity=c===this?u.opacity!==void 0?u.opacity:"":u.opacityExit!==void 0?u.opacityExit:0;for(const y in N3){if(u[y]===void 0)continue;const{correct:v,applyTo:b,isCSSVariable:w}=N3[y],k=h==="none"?u[y]:v(u[y],c);if(b){const N=b.length;for(let R=0;R<N;R++)o[b[R]]=k}else w?this.options.visualElement.renderState.vars[y]=k:o[y]=k}this.options.layoutId&&(o.pointerEvents=c===this?fT(a==null?void 0:a.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(oV),this.root.sharedNodes.clear()}}}function zAe(t){t.updateLayout()}function VAe(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=e.source!==t.layout.source;s==="size"?Ia(h=>{const m=o?e.measuredBox[h]:e.layoutBox[h],g=Xs(m);m.min=r[h].min,m.max=m.min+g}):Kne(s,e.layoutBox,r)&&Ia(h=>{const m=o?e.measuredBox[h]:e.layoutBox[h],g=Xs(r[h]);m.max=m.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+g)});const a=Og();uw(a,r,e.layoutBox);const l=Og();o?uw(l,t.applyTransform(i,!0),e.measuredBox):uw(l,r,e.layoutBox);const c=!Vne(a);let u=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:m,layout:g}=h;if(m&&g){const y=Si();ek(y,e.layoutBox,m.layoutBox);const v=Si();ek(v,r,g.layoutBox),Hne(y,v)||(u=!0),h.options.layoutRoot&&(t.relativeTarget=v,t.relativeTargetOrigin=y,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeLayoutChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function HAe(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function qAe(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function GAe(t){t.clearSnapshot()}function oV(t){t.clearMeasurements()}function aV(t){t.isLayoutDirty=!1}function KAe(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function lV(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function WAe(t){t.resolveTargetDelta()}function YAe(t){t.calcProjection()}function JAe(t){t.resetSkewAndRotation()}function XAe(t){t.removeLeadSnapshot()}function cV(t,e,n){t.translate=Dr(e.translate,0,n),t.scale=Dr(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function uV(t,e,n,r){t.min=Dr(e.min,n.min,r),t.max=Dr(e.max,n.max,r)}function QAe(t,e,n,r){uV(t.x,e.x,n.x,r),uV(t.y,e.y,n.y,r)}function ZAe(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const eTe={duration:.45,ease:[.4,0,.1,1]},dV=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),fV=dV("applewebkit/")&&!dV("chrome/")?Math.round:Ya;function hV(t){t.min=fV(t.min),t.max=fV(t.max)}function tTe(t){hV(t.x),hV(t.y)}function Kne(t,e,n){return t==="position"||t==="preserve-aspect"&&!cAe(iV(e),iV(n),.2)}function nTe(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const rTe=Gne({attachResizeListener:(t,e)=>Pw(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),aR={current:void 0},Wne=Gne({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!aR.current){const t=new rTe({});t.mount(window),t.setOptions({layoutScroll:!0}),aR.current=t}return aR.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),iTe={pan:{Feature:AAe},drag:{Feature:SAe,ProjectionNode:Wne,MeasureLayout:Fne}};function pV(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&Nr.postRender(()=>s(e,z1(e)))}class sTe extends wh{mount(){const{current:e}=this.node;e&&(this.unmount=CEe(e,(n,r)=>(pV(this.node,r,"Start"),i=>pV(this.node,i,"End"))))}unmount(){}}class oTe extends wh{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=U1(Pw(this.node.current,"focus",()=>this.onFocus()),Pw(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function mV(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&Nr.postRender(()=>s(e,z1(e)))}class aTe extends wh{mount(){const{current:e}=this.node;e&&(this.unmount=REe(e,(n,r)=>(mV(this.node,r,"Start"),(i,{success:s})=>mV(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const L3=new WeakMap,lR=new WeakMap,lTe=t=>{const e=L3.get(t.target);e&&e(t)},cTe=t=>{t.forEach(lTe)};function uTe({root:t,...e}){const n=t||document;lR.has(n)||lR.set(n,{});const r=lR.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(cTe,{root:t,...e})),r[i]}function dTe(t,e,n){const r=uTe(e);return L3.set(t,n),r.observe(t),()=>{L3.delete(t),r.unobserve(t)}}const fTe={some:0,all:1};class hTe extends wh{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:fTe[i]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),m=c?u:h;m&&m(l)};return dTe(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(pTe(e,n))&&this.startObserver()}unmount(){}}function pTe({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const mTe={inView:{Feature:hTe},tap:{Feature:aTe},focus:{Feature:oTe},hover:{Feature:sTe}},gTe={layout:{ProjectionNode:Wne,MeasureLayout:Fne}},yTe={...rAe,...mTe,...iTe,...gTe},Mt=vSe(yTe,RSe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xTe=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),vTe=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),gV=t=>{const e=vTe(t);return e.charAt(0).toUpperCase()+e.slice(1)},Yne=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),bTe=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var wTe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ETe=A.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>A.createElement("svg",{ref:l,...wTe,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:Yne("lucide",i),...!s&&!bTe(a)&&{"aria-hidden":"true"},...a},[...o.map(([c,u])=>A.createElement(c,u)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=(t,e)=>{const n=A.forwardRef(({className:r,...i},s)=>A.createElement(ETe,{ref:s,iconNode:e,className:Yne(`lucide-${xTe(gV(t))}`,`lucide-${t}`,r),...i}));return n.displayName=gV(t),n};/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const STe=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],to=St("activity",STe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ATe=[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]],TTe=St("arrow-down-left",ATe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kTe=[["path",{d:"M12 17V3",key:"1cwfxf"}],["path",{d:"m6 11 6 6 6-6",key:"12ii2o"}],["path",{d:"M19 21H5",key:"150jfl"}]],NTe=St("arrow-down-to-line",kTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CTe=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],tk=St("arrow-left",CTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PTe=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],x8=St("arrow-right",PTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _Te=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],Jne=St("arrow-up-right",_Te);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ITe=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Mg=St("bot",ITe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RTe=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],To=St("brain",RTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OTe=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],MTe=St("briefcase",OTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LTe=[["path",{d:"M16 14v2.2l1.6 1",key:"fo4ql5"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]],v8=St("calendar-clock",LTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DTe=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M7 16h8",key:"srdodz"}],["path",{d:"M7 11h12",key:"127s9w"}],["path",{d:"M7 6h3",key:"w9rmul"}]],jTe=St("chart-bar",DTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BTe=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],UTe=St("chart-column",BTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FTe=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],Ml=St("chart-no-axes-column",FTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Te=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],_w=St("chart-pie",$Te);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zTe=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],lm=St("check",zTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VTe=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],aa=St("chevron-down",VTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HTe=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Iw=St("chevron-left",HTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qTe=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Xa=St("chevron-right",qTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GTe=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],ch=St("chevron-up",GTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KTe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],b8=St("circle-alert",KTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WTe=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],nk=St("circle-check-big",WTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YTe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],w8=St("circle-check",YTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JTe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],fx=St("circle-x",JTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XTe=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Hi=St("clock",XTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QTe=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],E8=St("coins",QTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZTe=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],cm=St("copy",ZTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eke=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],Xne=St("cpu",eke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tke=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],yN=St("database",tke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nke=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],V1=St("dollar-sign",nke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rke=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Ks=St("download",rke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ike=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],Rw=St("droplets",ike);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ske=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],ld=St("external-link",ske);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oke=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],xN=St("eye-off",oke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ake=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],S8=St("eye",ake);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lke=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],yV=St("file-text",lke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cke=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Qne=St("funnel",cke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uke=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],pT=St("globe",uke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dke=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Zne=St("info",dke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fke=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],D3=St("key",fke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hke=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],rk=St("layers",hke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pke=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],A8=St("loader-circle",pke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mke=[["circle",{cx:"12",cy:"16",r:"1",key:"1au0dj"}],["rect",{x:"3",y:"10",width:"18",height:"12",rx:"2",key:"6s8ecr"}],["path",{d:"M7 10V7a5 5 0 0 1 10 0v3",key:"1pqi11"}]],gke=St("lock-keyhole",mke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yke=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],ere=St("lock-open",yke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xke=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],uh=St("lock",xke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vke=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],xV=St("log-out",vke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bke=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],wke=St("mail",bke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eke=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],vV=St("menu",Eke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ske=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Ake=St("message-square",Ske);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tke=[["path",{d:"M5 12h14",key:"1ays0h"}]],j3=St("minus",Tke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kke=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],Nke=St("percent",kke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cke=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Cl=St("plus",Cke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pke=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],$l=St("refresh-cw",Pke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _ke=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],tre=St("rotate-ccw",_ke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ike=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],T8=St("save",Ike);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rke=[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],k8=St("scroll-text",Rke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oke=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],N8=St("search",Oke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mke=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Lke=St("send",Mke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dke=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ik=St("settings",Dke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jke=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],Bke=St("shield-alert",jke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uke=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],cd=St("shield-check",Uke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fke=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],dh=St("shield",Fke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $ke=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Ow=St("sparkles",$ke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zke=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Zg=St("target",zke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vke=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],vN=St("terminal",Vke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hke=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],xm=St("trash-2",Hke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qke=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],vm=St("trending-down",qke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gke=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],yn=St("trending-up",Gke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kke=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],hs=St("triangle-alert",Kke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wke=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],sk=St("upload",Wke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yke=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Jke=St("user",Yke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xke=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],fh=St("wallet",Xke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qke=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],nre=St("wand-sparkles",Qke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zke=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],hx=St("x",Zke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e2e=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],ko=St("zap",e2e),rre="6.16.0";function t2e(t,e,n){const r=e.split("|").map(s=>s.trim());for(let s=0;s<r.length;s++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof t===e)return}const i=new Error(`invalid value for type ${e}`);throw i.code="INVALID_ARGUMENT",i.argument=`value.${n}`,i.value=t,i}async function Cs(t){const e=Object.keys(t);return(await Promise.all(e.map(r=>Promise.resolve(t[r])))).reduce((r,i,s)=>(r[e[s]]=i,r),{})}function Bt(t,e,n){for(let r in e){let i=e[r];const s=n?n[r]:null;s&&t2e(i,s,r),Object.defineProperty(t,r,{enumerable:!0,value:i,writable:!1})}}function Lg(t,e){if(t==null)return"null";if(e==null&&(e=new Set),typeof t=="object"){if(e.has(t))return"[Circular]";e.add(t)}if(Array.isArray(t))return"[ "+t.map(n=>Lg(n,e)).join(", ")+" ]";if(t instanceof Uint8Array){const n="0123456789abcdef";let r="0x";for(let i=0;i<t.length;i++)r+=n[t[i]>>4],r+=n[t[i]&15];return r}if(typeof t=="object"&&typeof t.toJSON=="function")return Lg(t.toJSON(),e);switch(typeof t){case"boolean":case"number":case"symbol":return t.toString();case"bigint":return BigInt(t).toString();case"string":return JSON.stringify(t);case"object":{const n=Object.keys(t);return n.sort(),"{ "+n.map(r=>`${Lg(r,e)}: ${Lg(t[r],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function ds(t,e){return t&&t.code===e}function C8(t){return ds(t,"CALL_EXCEPTION")}function Rr(t,e,n){let r=t;{const s=[];if(n){if("message"in n||"code"in n||"name"in n)throw new Error(`value will overwrite populated values: ${Lg(n)}`);for(const o in n){if(o==="shortMessage")continue;const a=n[o];s.push(o+"="+Lg(a))}}s.push(`code=${e}`),s.push(`version=${rre}`),s.length&&(t+=" ("+s.join(", ")+")")}let i;switch(e){case"INVALID_ARGUMENT":i=new TypeError(t);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":i=new RangeError(t);break;default:i=new Error(t)}return Bt(i,{code:e}),n&&Object.assign(i,n),i.shortMessage==null&&Bt(i,{shortMessage:r}),i}function Ye(t,e,n,r){if(!t)throw Rr(e,n,r)}function xe(t,e,n,r){Ye(t,e,"INVALID_ARGUMENT",{argument:n,value:r})}function ire(t,e,n){n==null&&(n=""),n&&(n=": "+n),Ye(t>=e,"missing argument"+n,"MISSING_ARGUMENT",{count:t,expectedCount:e}),Ye(t<=e,"too many arguments"+n,"UNEXPECTED_ARGUMENT",{count:t,expectedCount:e})}const n2e=["NFD","NFC","NFKD","NFKC"].reduce((t,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"".normalize("NFD")!=="e")throw new Error("broken");t.push(e)}catch{}return t},[]);function sre(t){Ye(n2e.indexOf(t)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:t}})}function Eh(t,e,n){if(n==null&&(n=""),t!==e){let r=n,i="new";n&&(r+=".",i+=" "+n),Ye(!1,`private constructor; use ${r}from* methods`,"UNSUPPORTED_OPERATION",{operation:i})}}function ore(t,e,n){if(t instanceof Uint8Array)return n?new Uint8Array(t):t;if(typeof t=="string"&&t.length%2===0&&t.match(/^0x[0-9a-f]*$/i)){const r=new Uint8Array((t.length-2)/2);let i=2;for(let s=0;s<r.length;s++)r[s]=parseInt(t.substring(i,i+2),16),i+=2;return r}xe(!1,"invalid BytesLike value",e||"value",t)}function bt(t,e){return ore(t,e,!1)}function fs(t,e){return ore(t,e,!0)}function gr(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&t.length!==2+2*e||e===!0&&t.length%2!==0)}function bN(t){return gr(t,!0)||t instanceof Uint8Array}const bV="0123456789abcdef";function st(t){const e=bt(t);let n="0x";for(let r=0;r<e.length;r++){const i=e[r];n+=bV[(i&240)>>4]+bV[i&15]}return n}function On(t){return"0x"+t.map(e=>st(e).substring(2)).join("")}function ey(t){return gr(t,!0)?(t.length-2)/2:bt(t).length}function mr(t,e,n){const r=bt(t);return n!=null&&n>r.length&&Ye(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:n}),st(r.slice(e??0,n??r.length))}function M0t(t){let e=st(t).substring(2);for(;e.startsWith("00");)e=e.substring(2);return"0x"+e}function are(t,e,n){const r=bt(t);Ye(e>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:e,offset:e+1});const i=new Uint8Array(e);return i.fill(0),n?i.set(r,e-r.length):i.set(r,0),st(i)}function ud(t,e){return are(t,e,!0)}function r2e(t,e){return are(t,e,!1)}const H1=BigInt(0),_l=BigInt(1),Dg=9007199254740991;function ok(t,e){const n=wN(t,"value"),r=BigInt(en(e,"width"));if(Ye(n>>r===H1,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:t}),n>>r-_l){const i=(_l<<r)-_l;return-((~n&i)+_l)}return n}function lre(t,e){let n=Nt(t,"value");const r=BigInt(en(e,"width")),i=_l<<r-_l;if(n<H1){n=-n,Ye(n<=i,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});const s=(_l<<r)-_l;return(~n&s)+_l}else Ye(n<i,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});return n}function Np(t,e){const n=wN(t,"value"),r=BigInt(en(e,"bits"));return n&(_l<<r)-_l}function Nt(t,e){switch(typeof t){case"bigint":return t;case"number":return xe(Number.isInteger(t),"underflow",e||"value",t),xe(t>=-Dg&&t<=Dg,"overflow",e||"value",t),BigInt(t);case"string":try{if(t==="")throw new Error("empty string");return t[0]==="-"&&t[1]!=="-"?-BigInt(t.substring(1)):BigInt(t)}catch(n){xe(!1,`invalid BigNumberish string: ${n.message}`,e||"value",t)}}xe(!1,"invalid BigNumberish value",e||"value",t)}function wN(t,e){const n=Nt(t,e);return Ye(n>=H1,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t}),n}const wV="0123456789abcdef";function q1(t){if(t instanceof Uint8Array){let e="0x0";for(const n of t)e+=wV[n>>4],e+=wV[n&15];return BigInt(e)}return Nt(t)}function en(t,e){switch(typeof t){case"bigint":return xe(t>=-Dg&&t<=Dg,"overflow",e||"value",t),Number(t);case"number":return xe(Number.isInteger(t),"underflow",e||"value",t),xe(t>=-Dg&&t<=Dg,"overflow",e||"value",t),t;case"string":try{if(t==="")throw new Error("empty string");return en(BigInt(t),e)}catch(n){xe(!1,`invalid numeric string: ${n.message}`,e||"value",t)}}xe(!1,"invalid numeric value",e||"value",t)}function i2e(t){return en(q1(t))}function dd(t,e){const n=wN(t,"value");let r=n.toString(16);if(e==null)r.length%2&&(r="0"+r);else{const i=en(e,"width");if(i===0&&n===H1)return"0x";for(Ye(i*2>=r.length,`value exceeds width (${i} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:t});r.length<i*2;)r="0"+r}return"0x"+r}function jr(t,e){const n=wN(t,"value");if(n===H1){const s=e!=null?en(e,"width"):0;return new Uint8Array(s)}let r=n.toString(16);if(r.length%2&&(r="0"+r),e!=null){const s=en(e,"width");for(;r.length<s*2;)r="00"+r;Ye(s*2===r.length,`value exceeds width (${s} bytes)`,"NUMERIC_FAULT",{operation:"toBeArray",fault:"overflow",value:t})}const i=new Uint8Array(r.length/2);for(let s=0;s<i.length;s++){const o=s*2;i[s]=parseInt(r.substring(o,o+2),16)}return i}function Pl(t){let e=st(bN(t)?t:jr(t)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const ak="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";let ZS=null;function s2e(t){if(ZS==null){ZS={};for(let n=0;n<ak.length;n++)ZS[ak[n]]=BigInt(n)}const e=ZS[t];return xe(e!=null,"invalid base58 value","letter",t),e}const o2e=BigInt(0),B3=BigInt(58);function cre(t){const e=bt(t);let n=q1(e),r="";for(;n;)r=ak[Number(n%B3)]+r,n/=B3;for(let i=0;i<e.length&&!e[i];i++)r=ak[0]+r;return r}function a2e(t){let e=o2e;for(let n=0;n<t.length;n++)e*=B3,e+=s2e(t[n]);return e}function l2e(t){t=atob(t);const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return bt(e)}function c2e(t){const e=bt(t);let n="";for(let r=0;r<e.length;r++)n+=String.fromCharCode(e[r]);return btoa(n)}var wy;class ure{constructor(e,n,r){Ce(this,"filter");Ce(this,"emitter");Fe(this,wy);ge(this,wy,n),Bt(this,{emitter:e,filter:r})}async removeListener(){re(this,wy)!=null&&await this.emitter.off(this.filter,re(this,wy))}}wy=new WeakMap;function u2e(t,e,n,r,i){xe(!1,`invalid codepoint at offset ${e}; ${t}`,"bytes",n)}function dre(t,e,n,r,i){if(t==="BAD_PREFIX"||t==="UNEXPECTED_CONTINUE"){let s=0;for(let o=e+1;o<n.length&&n[o]>>6===2;o++)s++;return s}return t==="OVERRUN"?n.length-e-1:0}function d2e(t,e,n,r,i){return t==="OVERLONG"?(xe(typeof i=="number","invalid bad code point for replacement","badCodepoint",i),r.push(i),0):(r.push(65533),dre(t,e,n))}const f2e=Object.freeze({error:u2e,ignore:dre,replace:d2e});function fre(t,e){e==null&&(e=f2e.error);const n=bt(t,"bytes"),r=[];let i=0;for(;i<n.length;){const s=n[i++];if(s>>7===0){r.push(s);continue}let o=null,a=null;if((s&224)===192)o=1,a=127;else if((s&240)===224)o=2,a=2047;else if((s&248)===240)o=3,a=65535;else{(s&192)===128?i+=e("UNEXPECTED_CONTINUE",i-1,n,r):i+=e("BAD_PREFIX",i-1,n,r);continue}if(i-1+o>=n.length){i+=e("OVERRUN",i-1,n,r);continue}let l=s&(1<<8-o-1)-1;for(let c=0;c<o;c++){let u=n[i];if((u&192)!=128){i+=e("MISSING_CONTINUE",i,n,r),l=null;break}l=l<<6|u&63,i++}if(l!==null){if(l>1114111){i+=e("OUT_OF_RANGE",i-1-o,n,r,l);continue}if(l>=55296&&l<=57343){i+=e("UTF16_SURROGATE",i-1-o,n,r,l);continue}if(l<=a){i+=e("OVERLONG",i-1-o,n,r,l);continue}r.push(l)}}return r}function mi(t,e){xe(typeof t=="string","invalid string value","str",t),e!=null&&(sre(e),t=t.normalize(e));let n=[];for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);if(i<128)n.push(i);else if(i<2048)n.push(i>>6|192),n.push(i&63|128);else if((i&64512)==55296){r++;const s=t.charCodeAt(r);xe(r<t.length&&(s&64512)===56320,"invalid surrogate pair","str",t);const o=65536+((i&1023)<<10)+(s&1023);n.push(o>>18|240),n.push(o>>12&63|128),n.push(o>>6&63|128),n.push(o&63|128)}else n.push(i>>12|224),n.push(i>>6&63|128),n.push(i&63|128)}return new Uint8Array(n)}function h2e(t){return t.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function lk(t,e){return h2e(fre(t,e))}function L0t(t,e){return fre(mi(t,e))}function hre(t){async function e(n,r){Ye(r==null||!r.cancelled,"request cancelled before sending","CANCELLED");const i=n.url.split(":")[0].toLowerCase();Ye(i==="http"||i==="https",`unsupported protocol ${i}`,"UNSUPPORTED_OPERATION",{info:{protocol:i},operation:"request"}),Ye(i==="https"||!n.credentials||n.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let s=null;const o=new AbortController,a=setTimeout(()=>{s=Rr("request timeout","TIMEOUT"),o.abort()},n.timeout);r&&r.addListener(()=>{s=Rr("request cancelled","CANCELLED"),o.abort()});const l=Object.assign({},t,{method:n.method,headers:new Headers(Array.from(n)),body:n.body||void 0,signal:o.signal});let c;try{c=await fetch(n.url,l)}catch(g){throw clearTimeout(a),s||g}clearTimeout(a);const u={};c.headers.forEach((g,y)=>{u[y.toLowerCase()]=g});const h=await c.arrayBuffer(),m=h==null?null:new Uint8Array(h);return{statusCode:c.status,statusMessage:c.statusText,headers:u,body:m}}return e}const p2e=12,m2e=250;let EV=hre();const g2e=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),y2e=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let cR=!1;async function pre(t,e){try{const n=t.match(g2e);if(!n)throw new Error("invalid data");return new th(200,"OK",{"content-type":n[1]||"text/plain"},n[2]?l2e(n[3]):v2e(n[3]))}catch{return new th(599,"BAD REQUEST (invalid data: URI)",{},null,new fd(t))}}function mre(t){async function e(n,r){try{const i=n.match(y2e);if(!i)throw new Error("invalid link");return new fd(`${t}${i[2]}`)}catch{return new th(599,"BAD REQUEST (invalid IPFS URI)",{},null,new fd(n))}}return e}const eA={data:pre,ipfs:mre("https://gateway.ipfs.io/ipfs/")},gre=new WeakMap;var Bp,Lf;class x2e{constructor(e){Fe(this,Bp);Fe(this,Lf);ge(this,Bp,[]),ge(this,Lf,!1),gre.set(e,()=>{if(!re(this,Lf)){ge(this,Lf,!0);for(const n of re(this,Bp))setTimeout(()=>{n()},0);ge(this,Bp,[])}})}addListener(e){Ye(!re(this,Lf),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),re(this,Bp).push(e)}get cancelled(){return re(this,Lf)}checkSignal(){Ye(!this.cancelled,"cancelled","CANCELLED",{})}}Bp=new WeakMap,Lf=new WeakMap;function tA(t){if(t==null)throw new Error("missing signal; should not happen");return t.checkSignal(),t}var Ey,Sy,bl,Ru,Ay,Ty,Mi,Ho,Ou,Up,Fp,$p,fc,wl,Df,zp,Hb;const tN=class tN{constructor(e){Fe(this,zp);Fe(this,Ey);Fe(this,Sy);Fe(this,bl);Fe(this,Ru);Fe(this,Ay);Fe(this,Ty);Fe(this,Mi);Fe(this,Ho);Fe(this,Ou);Fe(this,Up);Fe(this,Fp);Fe(this,$p);Fe(this,fc);Fe(this,wl);Fe(this,Df);ge(this,Ty,String(e)),ge(this,Ey,!1),ge(this,Sy,!0),ge(this,bl,{}),ge(this,Ru,""),ge(this,Ay,3e5),ge(this,wl,{slotInterval:m2e,maxAttempts:p2e}),ge(this,Df,null)}get url(){return re(this,Ty)}set url(e){ge(this,Ty,String(e))}get body(){return re(this,Mi)==null?null:new Uint8Array(re(this,Mi))}set body(e){if(e==null)ge(this,Mi,void 0),ge(this,Ho,void 0);else if(typeof e=="string")ge(this,Mi,mi(e)),ge(this,Ho,"text/plain");else if(e instanceof Uint8Array)ge(this,Mi,e),ge(this,Ho,"application/octet-stream");else if(typeof e=="object")ge(this,Mi,mi(JSON.stringify(e))),ge(this,Ho,"application/json");else throw new Error("invalid body")}hasBody(){return re(this,Mi)!=null}get method(){return re(this,Ru)?re(this,Ru):this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),ge(this,Ru,String(e).toUpperCase())}get headers(){const e=Object.assign({},re(this,bl));return re(this,Ou)&&(e.authorization=`Basic ${c2e(mi(re(this,Ou)))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&re(this,Ho)&&(e["content-type"]=re(this,Ho)),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,n){re(this,bl)[String(e).toLowerCase()]=String(n)}clearHeaders(){ge(this,bl,{})}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const i=n[r++];return{value:[i,e[i]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return re(this,Ou)||null}setCredentials(e,n){xe(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),ge(this,Ou,`${e}:${n}`)}get allowGzip(){return re(this,Sy)}set allowGzip(e){ge(this,Sy,!!e)}get allowInsecureAuthentication(){return!!re(this,Ey)}set allowInsecureAuthentication(e){ge(this,Ey,!!e)}get timeout(){return re(this,Ay)}set timeout(e){xe(e>=0,"timeout must be non-zero","timeout",e),ge(this,Ay,e)}get preflightFunc(){return re(this,Up)||null}set preflightFunc(e){ge(this,Up,e)}get processFunc(){return re(this,Fp)||null}set processFunc(e){ge(this,Fp,e)}get retryFunc(){return re(this,$p)||null}set retryFunc(e){ge(this,$p,e)}get getUrlFunc(){return re(this,Df)||EV}set getUrlFunc(e){ge(this,Df,e)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${re(this,Mi)?st(re(this,Mi)):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(re(this,wl).slotInterval=e.slotInterval),e.maxAttempts!=null&&(re(this,wl).maxAttempts=e.maxAttempts)}send(){return Ye(re(this,fc)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),ge(this,fc,new x2e(this)),nt(this,zp,Hb).call(this,0,SV()+this.timeout,0,this,new th(0,"",{},null,this))}cancel(){Ye(re(this,fc)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=gre.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const n=this.url.split(":")[0].toLowerCase(),r=e.split(":")[0].toLowerCase();Ye(this.method==="GET"&&(n!=="https"||r!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const i=new tN(e);return i.method="GET",i.allowGzip=this.allowGzip,i.timeout=this.timeout,ge(i,bl,Object.assign({},re(this,bl))),re(this,Mi)&&ge(i,Mi,new Uint8Array(re(this,Mi))),ge(i,Ho,re(this,Ho)),i}clone(){const e=new tN(this.url);return ge(e,Ru,re(this,Ru)),re(this,Mi)&&ge(e,Mi,re(this,Mi)),ge(e,Ho,re(this,Ho)),ge(e,bl,Object.assign({},re(this,bl))),ge(e,Ou,re(this,Ou)),this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),ge(e,Up,re(this,Up)),ge(e,Fp,re(this,Fp)),ge(e,$p,re(this,$p)),ge(e,wl,Object.assign({},re(this,wl))),ge(e,Df,re(this,Df)),e}static lockConfig(){cR=!0}static getGateway(e){return eA[e.toLowerCase()]||null}static registerGateway(e,n){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(cR)throw new Error("gateways locked");eA[e]=n}static registerGetUrl(e){if(cR)throw new Error("gateways locked");EV=e}static createGetUrlFunc(e){return hre(e)}static createDataGateway(){return pre}static createIpfsGatewayFunc(e){return mre(e)}};Ey=new WeakMap,Sy=new WeakMap,bl=new WeakMap,Ru=new WeakMap,Ay=new WeakMap,Ty=new WeakMap,Mi=new WeakMap,Ho=new WeakMap,Ou=new WeakMap,Up=new WeakMap,Fp=new WeakMap,$p=new WeakMap,fc=new WeakMap,wl=new WeakMap,Df=new WeakMap,zp=new WeakSet,Hb=async function(e,n,r,i,s){var u,h,m;if(e>=re(this,wl).maxAttempts)return s.makeServerError("exceeded maximum retry limit");Ye(SV()<=n,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:i}),r>0&&await b2e(r);let o=this.clone();const a=(o.url.split(":")[0]||"").toLowerCase();if(a in eA){const g=await eA[a](o.url,tA(re(i,fc)));if(g instanceof th){let y=g;if(this.processFunc){tA(re(i,fc));try{y=await this.processFunc(o,y)}catch(v){(v.throttle==null||typeof v.stall!="number")&&y.makeServerError("error in post-processing function",v).assertOk()}}return y}o=g}this.preflightFunc&&(o=await this.preflightFunc(o));const l=await this.getUrlFunc(o,tA(re(i,fc)));let c=new th(l.statusCode,l.statusMessage,l.headers,l.body,i);if(c.statusCode===301||c.statusCode===302){try{const g=c.headers.location||"";return nt(u=o.redirect(g),zp,Hb).call(u,e+1,n,0,i,c)}catch{}return c}else if(c.statusCode===429&&(this.retryFunc==null||await this.retryFunc(o,c,e))){const g=c.headers["retry-after"];let y=re(this,wl).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof g=="string"&&g.match(/^[1-9][0-9]*$/)&&(y=parseInt(g)),nt(h=o.clone(),zp,Hb).call(h,e+1,n,y,i,c)}if(this.processFunc){tA(re(i,fc));try{c=await this.processFunc(o,c)}catch(g){(g.throttle==null||typeof g.stall!="number")&&c.makeServerError("error in post-processing function",g).assertOk();let y=re(this,wl).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return g.stall>=0&&(y=g.stall),nt(m=o.clone(),zp,Hb).call(m,e+1,n,y,i,c)}}return c};let fd=tN;var b1,w1,E1,qo,ky,Vp;const C7=class C7{constructor(e,n,r,i,s){Fe(this,b1);Fe(this,w1);Fe(this,E1);Fe(this,qo);Fe(this,ky);Fe(this,Vp);ge(this,b1,e),ge(this,w1,n),ge(this,E1,Object.keys(r).reduce((o,a)=>(o[a.toLowerCase()]=String(r[a]),o),{})),ge(this,qo,i==null?null:new Uint8Array(i)),ge(this,ky,s||null),ge(this,Vp,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${re(this,qo)?st(re(this,qo)):"null"}>`}get statusCode(){return re(this,b1)}get statusMessage(){return re(this,w1)}get headers(){return Object.assign({},re(this,E1))}get body(){return re(this,qo)==null?null:new Uint8Array(re(this,qo))}get bodyText(){try{return re(this,qo)==null?"":lk(re(this,qo))}catch{Ye(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{Ye(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const i=n[r++];return{value:[i,e[i]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(e,n){let r;e?r=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,r=`CLIENT ESCALATED SERVER ERROR (${e})`);const i=new C7(599,r,this.headers,this.body,re(this,ky)||void 0);return ge(i,Vp,{message:e,error:n}),i}throwThrottleError(e,n){n==null?n=-1:xe(Number.isInteger(n)&&n>=0,"invalid stall timeout","stall",n);const r=new Error(e||"throttling requests");throw Bt(r,{stall:n,throttle:!0}),r}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return re(this,qo)!=null}get request(){return re(this,ky)}ok(){return re(this,Vp).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:n}=re(this,Vp);e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let r=null;this.request&&(r=this.request.url);let i=null;try{re(this,qo)&&(i=lk(re(this,qo)))}catch{}Ye(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:n,info:{requestUrl:r,responseBody:i,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};b1=new WeakMap,w1=new WeakMap,E1=new WeakMap,qo=new WeakMap,ky=new WeakMap,Vp=new WeakMap;let th=C7;function SV(){return new Date().getTime()}function v2e(t){return mi(t.replace(/%([0-9a-f][0-9a-f])/gi,(e,n)=>String.fromCharCode(parseInt(n,16))))}function b2e(t){return new Promise(e=>setTimeout(e,t))}const w2e=BigInt(-1),pl=BigInt(0),jg=BigInt(1),E2e=BigInt(5),Y0={};let ty="0000";for(;ty.length<80;)ty+=ty;function Zh(t){let e=ty;for(;e.length<t;)e+=e;return BigInt("1"+e.substring(0,t))}function xb(t,e,n){const r=BigInt(e.width);if(e.signed){const i=jg<<r-jg;Ye(n==null||t>=-i&&t<i,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:t}),t>pl?t=ok(Np(t,r),r):t=-ok(Np(-t,r),r)}else{const i=jg<<r;Ye(n==null||t>=0&&t<i,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:t}),t=(t%i+i)%i&i-jg}return t}function uR(t){typeof t=="number"&&(t=`fixed128x${t}`);let e=!0,n=128,r=18;if(typeof t=="string"){if(t!=="fixed")if(t==="ufixed")e=!1;else{const s=t.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);xe(s,"invalid fixed format","format",t),e=s[1]!=="u",n=parseInt(s[2]),r=parseInt(s[3])}}else if(t){const s=t,o=(a,l,c)=>s[a]==null?c:(xe(typeof s[a]===l,"invalid fixed format ("+a+" not "+l+")","format."+a,s[a]),s[a]);e=o("signed","boolean",e),n=o("width","number",n),r=o("decimals","number",r)}xe(n%8===0,"invalid FixedNumber width (not byte aligned)","format.width",n),xe(r<=80,"invalid FixedNumber decimals (too large)","format.decimals",r);const i=(e?"":"u")+"fixed"+String(n)+"x"+String(r);return{signed:e,width:n,decimals:r,name:i}}function S2e(t,e){let n="";t<pl&&(n="-",t*=w2e);let r=t.toString();if(e===0)return n+r;for(;r.length<=e;)r=ty+r;const i=r.length-e;for(r=r.substring(0,i)+"."+r.substring(i);r[0]==="0"&&r[1]!==".";)r=r.substring(1);for(;r[r.length-1]==="0"&&r[r.length-2]!==".";)r=r.substring(0,r.length-1);return n+r}var El,rr,Hs,Gn,cp,Su,U3,F3,$3,z3;const If=class If{constructor(e,n,r){Fe(this,Gn);Ce(this,"format");Fe(this,El);Fe(this,rr);Fe(this,Hs);Ce(this,"_value");Eh(e,Y0,"FixedNumber"),ge(this,rr,n),ge(this,El,r);const i=S2e(n,r.decimals);Bt(this,{format:r.name,_value:i}),ge(this,Hs,Zh(r.decimals))}get signed(){return re(this,El).signed}get width(){return re(this,El).width}get decimals(){return re(this,El).decimals}get value(){return re(this,rr)}addUnsafe(e){return nt(this,Gn,U3).call(this,e)}add(e){return nt(this,Gn,U3).call(this,e,"add")}subUnsafe(e){return nt(this,Gn,F3).call(this,e)}sub(e){return nt(this,Gn,F3).call(this,e,"sub")}mulUnsafe(e){return nt(this,Gn,$3).call(this,e)}mul(e){return nt(this,Gn,$3).call(this,e,"mul")}mulSignal(e){nt(this,Gn,cp).call(this,e);const n=re(this,rr)*re(e,rr);return Ye(n%re(this,Hs)===pl,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),nt(this,Gn,Su).call(this,n/re(this,Hs),"mulSignal")}divUnsafe(e){return nt(this,Gn,z3).call(this,e)}div(e){return nt(this,Gn,z3).call(this,e,"div")}divSignal(e){Ye(re(e,rr)!==pl,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),nt(this,Gn,cp).call(this,e);const n=re(this,rr)*re(this,Hs);return Ye(n%re(e,rr)===pl,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),nt(this,Gn,Su).call(this,n/re(e,rr),"divSignal")}cmp(e){let n=this.value,r=e.value;const i=this.decimals-e.decimals;return i>0?r*=Zh(i):i<0&&(n*=Zh(-i)),n<r?-1:n>r?1:0}eq(e){return this.cmp(e)===0}lt(e){return this.cmp(e)<0}lte(e){return this.cmp(e)<=0}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=re(this,rr);return re(this,rr)<pl&&(e-=re(this,Hs)-jg),e=re(this,rr)/re(this,Hs)*re(this,Hs),nt(this,Gn,Su).call(this,e,"floor")}ceiling(){let e=re(this,rr);return re(this,rr)>pl&&(e+=re(this,Hs)-jg),e=re(this,rr)/re(this,Hs)*re(this,Hs),nt(this,Gn,Su).call(this,e,"ceiling")}round(e){if(e==null&&(e=0),e>=this.decimals)return this;const n=this.decimals-e,r=E2e*Zh(n-1);let i=this.value+r;const s=Zh(n);return i=i/s*s,xb(i,re(this,El),"round"),new If(Y0,i,re(this,El))}isZero(){return re(this,rr)===pl}isNegative(){return re(this,rr)<pl}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return If.fromString(this.toString(),e)}static fromValue(e,n,r){const i=n==null?0:en(n),s=uR(r);let o=Nt(e,"value");const a=i-s.decimals;if(a>0){const l=Zh(a);Ye(o%l===pl,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e}),o/=l}else a<0&&(o*=Zh(-a));return xb(o,s,"fromValue"),new If(Y0,o,s)}static fromString(e,n){const r=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);xe(r&&r[2].length+r[3].length>0,"invalid FixedNumber string value","value",e);const i=uR(n);let s=r[2]||"0",o=r[3]||"";for(;o.length<i.decimals;)o+=ty;Ye(o.substring(i.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e}),o=o.substring(0,i.decimals);const a=BigInt(r[1]+s+o);return xb(a,i,"fromString"),new If(Y0,a,i)}static fromBytes(e,n){let r=q1(bt(e,"value"));const i=uR(n);return i.signed&&(r=ok(r,i.width)),xb(r,i,"fromBytes"),new If(Y0,r,i)}};El=new WeakMap,rr=new WeakMap,Hs=new WeakMap,Gn=new WeakSet,cp=function(e){xe(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)},Su=function(e,n){return e=xb(e,re(this,El),n),new If(Y0,e,re(this,El))},U3=function(e,n){return nt(this,Gn,cp).call(this,e),nt(this,Gn,Su).call(this,re(this,rr)+re(e,rr),n)},F3=function(e,n){return nt(this,Gn,cp).call(this,e),nt(this,Gn,Su).call(this,re(this,rr)-re(e,rr),n)},$3=function(e,n){return nt(this,Gn,cp).call(this,e),nt(this,Gn,Su).call(this,re(this,rr)*re(e,rr)/re(this,Hs),n)},z3=function(e,n){return Ye(re(e,rr)!==pl,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),nt(this,Gn,cp).call(this,e),nt(this,Gn,Su).call(this,re(this,rr)*re(this,Hs)/re(e,rr),n)};let ck=If;function A2e(t){let e=t.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function AV(t,e,n){let r=0;for(let i=0;i<n;i++)r=r*256+t[e+i];return r}function TV(t,e,n,r){const i=[];for(;n<e+1+r;){const s=yre(t,n);i.push(s.result),n+=s.consumed,Ye(n<=e+1+r,"child data too short","BUFFER_OVERRUN",{buffer:t,length:r,offset:e})}return{consumed:1+r,result:i}}function yre(t,e){Ye(t.length!==0,"data too short","BUFFER_OVERRUN",{buffer:t,length:0,offset:1});const n=r=>{Ye(r<=t.length,"data short segment too short","BUFFER_OVERRUN",{buffer:t,length:t.length,offset:r})};if(t[e]>=248){const r=t[e]-247;n(e+1+r);const i=AV(t,e+1,r);return n(e+1+r+i),TV(t,e,e+1+r,r+i)}else if(t[e]>=192){const r=t[e]-192;return n(e+1+r),TV(t,e,e+1,r)}else if(t[e]>=184){const r=t[e]-183;n(e+1+r);const i=AV(t,e+1,r);n(e+1+r+i);const s=st(t.slice(e+1+r,e+1+r+i));return{consumed:1+r+i,result:s}}else if(t[e]>=128){const r=t[e]-128;n(e+1+r);const i=st(t.slice(e+1,e+1+r));return{consumed:1+r,result:i}}return{consumed:1,result:A2e(t[e])}}function G1(t){const e=bt(t,"data"),n=yre(e,0);return xe(n.consumed===e.length,"unexpected junk after rlp payload","data",t),n.result}function kV(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function xre(t){if(Array.isArray(t)){let r=[];if(t.forEach(function(s){r=r.concat(xre(s))}),r.length<=55)return r.unshift(192+r.length),r;const i=kV(r.length);return i.unshift(247+i.length),i.concat(r)}const e=Array.prototype.slice.call(bt(t,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const n=kV(e.length);return n.unshift(183+n.length),n.concat(e)}const NV="0123456789abcdef";function Oc(t){let e="0x";for(const n of xre(t))e+=NV[n>>4],e+=NV[n&15];return e}const vre=["wei","kwei","mwei","gwei","szabo","finney","ether"];function bre(t,e){let n=18;if(typeof e=="string"){const r=vre.indexOf(e);xe(r>=0,"invalid unit","unit",e),n=3*r}else e!=null&&(n=en(e,"unit"));return ck.fromValue(t,n,{decimals:n,width:512}).toString()}function T2e(t,e){xe(typeof t=="string","value must be a string","value",t);let n=18;if(typeof e=="string"){const r=vre.indexOf(e);xe(r>=0,"invalid unit","unit",e),n=3*r}else e!=null&&(n=en(e,"unit"));return ck.fromString(t,{decimals:n,width:512}).value}function D0t(t){return bre(t,18)}function j0t(t){return T2e(t,18)}function k2e(t){const e=bt(t,"randomBytes");e[6]=e[6]&15|64,e[8]=e[8]&63|128;const n=st(e);return[n.substring(2,10),n.substring(10,14),n.substring(14,18),n.substring(18,22),n.substring(22,34)].join("-")}const Qs=32,V3=new Uint8Array(Qs),N2e=["then"],nA={},wre=new WeakMap;function xp(t){return wre.get(t)}function CV(t,e){wre.set(t,e)}function vb(t,e){const n=new Error(`deferred error during ABI decoding triggered accessing ${t}`);throw n.error=e,n}function H3(t,e,n){return t.indexOf(null)>=0?e.map((r,i)=>r instanceof px?H3(xp(r),r,n):r):t.reduce((r,i,s)=>{let o=e.getValue(i);return i in r||(n&&o instanceof px&&(o=H3(xp(o),o,n)),r[i]=o),r},{})}var Ny;const Gg=class Gg extends Array{constructor(...n){const r=n[0];let i=n[1],s=(n[2]||[]).slice(),o=!0;r!==nA&&(i=n,s=[],o=!1);super(i.length);Fe(this,Ny);i.forEach((c,u)=>{this[u]=c});const a=s.reduce((c,u)=>(typeof u=="string"&&c.set(u,(c.get(u)||0)+1),c),new Map);if(CV(this,Object.freeze(i.map((c,u)=>{const h=s[u];return h!=null&&a.get(h)===1?h:null}))),ge(this,Ny,[]),re(this,Ny)==null&&re(this,Ny),!o)return;Object.freeze(this);const l=new Proxy(this,{get:(c,u,h)=>{if(typeof u=="string"){if(u.match(/^[0-9]+$/)){const g=en(u,"%index");if(g<0||g>=this.length)throw new RangeError("out of result range");const y=c[g];return y instanceof Error&&vb(`index ${g}`,y),y}if(N2e.indexOf(u)>=0)return Reflect.get(c,u,h);const m=c[u];if(m instanceof Function)return function(...g){return m.apply(this===h?c:this,g)};if(!(u in c))return c.getValue.apply(this===h?c:this,[u])}return Reflect.get(c,u,h)}});return CV(l,xp(this)),l}toArray(n){const r=[];return this.forEach((i,s)=>{i instanceof Error&&vb(`index ${s}`,i),n&&i instanceof Gg&&(i=i.toArray(n)),r.push(i)}),r}toObject(n){const r=xp(this);return r.reduce((i,s,o)=>(Ye(s!=null,`value at index ${o} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),H3(r,this,n)),{})}slice(n,r){n==null&&(n=0),n<0&&(n+=this.length,n<0&&(n=0)),r==null&&(r=this.length),r<0&&(r+=this.length,r<0&&(r=0)),r>this.length&&(r=this.length);const i=xp(this),s=[],o=[];for(let a=n;a<r;a++)s.push(this[a]),o.push(i[a]);return new Gg(nA,s,o)}filter(n,r){const i=xp(this),s=[],o=[];for(let a=0;a<this.length;a++){const l=this[a];l instanceof Error&&vb(`index ${a}`,l),n.call(r,l,a,this)&&(s.push(l),o.push(i[a]))}return new Gg(nA,s,o)}map(n,r){const i=[];for(let s=0;s<this.length;s++){const o=this[s];o instanceof Error&&vb(`index ${s}`,o),i.push(n.call(r,o,s,this))}return i}getValue(n){const r=xp(this).indexOf(n);if(r===-1)return;const i=this[r];return i instanceof Error&&vb(`property ${JSON.stringify(n)}`,i.error),i}static fromItems(n,r){return new Gg(nA,n,r)}};Ny=new WeakMap;let px=Gg;function B0t(t){const e=[],n=function(r,i){if(Array.isArray(i))for(let s in i){const o=r.slice();o.push(s);try{n(o,i[s])}catch(a){e.push({path:o,error:a})}}};return n([],t),e}function PV(t){let e=jr(t);return Ye(e.length<=Qs,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:Qs,offset:e.length}),e.length!==Qs&&(e=fs(On([V3.slice(e.length%Qs),e]))),e}class Cd{constructor(e,n,r,i){Ce(this,"name");Ce(this,"type");Ce(this,"localName");Ce(this,"dynamic");Bt(this,{name:e,type:n,localName:r,dynamic:i},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,n){xe(!1,e,this.localName,n)}}var Mu,Hp,Cy,mT;class q3{constructor(){Fe(this,Cy);Fe(this,Mu);Fe(this,Hp);ge(this,Mu,[]),ge(this,Hp,0)}get data(){return On(re(this,Mu))}get length(){return re(this,Hp)}appendWriter(e){return nt(this,Cy,mT).call(this,fs(e.data))}writeBytes(e){let n=fs(e);const r=n.length%Qs;return r&&(n=fs(On([n,V3.slice(r)]))),nt(this,Cy,mT).call(this,n)}writeValue(e){return nt(this,Cy,mT).call(this,PV(e))}writeUpdatableValue(){const e=re(this,Mu).length;return re(this,Mu).push(V3),ge(this,Hp,re(this,Hp)+Qs),n=>{re(this,Mu)[e]=PV(n)}}}Mu=new WeakMap,Hp=new WeakMap,Cy=new WeakSet,mT=function(e){return re(this,Mu).push(e),ge(this,Hp,re(this,Hp)+e.length),e.length};var go,Go,qp,Gp,jf,Fm,K3,Ere;const P7=class P7{constructor(e,n,r){Fe(this,Fm);Ce(this,"allowLoose");Fe(this,go);Fe(this,Go);Fe(this,qp);Fe(this,Gp);Fe(this,jf);Bt(this,{allowLoose:!!n}),ge(this,go,fs(e)),ge(this,qp,0),ge(this,Gp,null),ge(this,jf,r??1024),ge(this,Go,0)}get data(){return st(re(this,go))}get dataLength(){return re(this,go).length}get consumed(){return re(this,Go)}get bytes(){return new Uint8Array(re(this,go))}subReader(e){const n=new P7(re(this,go).slice(re(this,Go)+e),this.allowLoose,re(this,jf));return ge(n,Gp,this),n}readBytes(e,n){let r=nt(this,Fm,Ere).call(this,0,e,!!n);return nt(this,Fm,K3).call(this,e),ge(this,Go,re(this,Go)+r.length),r.slice(0,e)}readValue(){return q1(this.readBytes(Qs))}readIndex(){return i2e(this.readBytes(Qs))}};go=new WeakMap,Go=new WeakMap,qp=new WeakMap,Gp=new WeakMap,jf=new WeakMap,Fm=new WeakSet,K3=function(e){var n;if(re(this,Gp))return nt(n=re(this,Gp),Fm,K3).call(n,e);ge(this,qp,re(this,qp)+e),Ye(re(this,jf)<1||re(this,qp)<=re(this,jf)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${re(this,jf)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:fs(re(this,go)),offset:re(this,Go),length:e,info:{bytesRead:re(this,qp),dataLength:this.dataLength}})},Ere=function(e,n,r){let i=Math.ceil(n/Qs)*Qs;return re(this,Go)+i>re(this,go).length&&(this.allowLoose&&r&&re(this,Go)+n<=re(this,go).length?i=n:Ye(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:fs(re(this,go)),length:re(this,go).length,offset:re(this,Go)+i})),re(this,go).slice(re(this,Go),re(this,Go)+i)};let G3=P7;function Xo(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function P8(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function Sre(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Xo(t.outputLen),Xo(t.blockLen)}function mx(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Are(t,e){P8(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const dR=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Tre=t=>t instanceof Uint8Array,gT=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),yT=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),ic=(t,e)=>t<<32-e|t>>>e,C2e=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!C2e)throw new Error("Non little-endian hardware is not supported");const P2e=async()=>{};async function _V(t,e,n){let r=Date.now();for(let i=0;i<t;i++){n(i);const s=Date.now()-r;s>=0&&s<e||(await P2e(),r+=s)}}function _2e(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function gx(t){if(typeof t=="string"&&(t=_2e(t)),!Tre(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function I2e(...t){const e=new Uint8Array(t.reduce((r,i)=>r+i.length,0));let n=0;return t.forEach(r=>{if(!Tre(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}let _8=class{clone(){return this._cloneInto()}};const R2e={}.toString;function kre(t,e){if(e!==void 0&&R2e.call(e)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(t,e)}function EN(t){const e=r=>t().update(gx(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function O2e(t=32){if(dR&&typeof dR.getRandomValues=="function")return dR.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}let Nre=class extends _8{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,Sre(e);const r=gx(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return mx(this),this.iHash.update(e),this}digestInto(e){mx(this),P8(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const SN=(t,e,n)=>new Nre(t,e).update(n).digest();SN.create=(t,e)=>new Nre(t,e);function M2e(t,e,n,r){Sre(t);const i=kre({dkLen:32,asyncTick:10},r),{c:s,dkLen:o,asyncTick:a}=i;if(Xo(s),Xo(o),Xo(a),s<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const l=gx(e),c=gx(n),u=new Uint8Array(o),h=SN.create(t,l),m=h._cloneInto().update(c);return{c:s,dkLen:o,asyncTick:a,DK:u,PRF:h,PRFSalt:m}}function L2e(t,e,n,r,i){return t.destroy(),e.destroy(),r&&r.destroy(),i.fill(0),n}function I8(t,e,n,r){const{c:i,dkLen:s,DK:o,PRF:a,PRFSalt:l}=M2e(t,e,n,r);let c;const u=new Uint8Array(4),h=yT(u),m=new Uint8Array(a.outputLen);for(let g=1,y=0;y<s;g++,y+=a.outputLen){const v=o.subarray(y,y+a.outputLen);h.setInt32(0,g,!1),(c=l._cloneInto(c)).update(u).digestInto(m),v.set(m.subarray(0,v.length));for(let b=1;b<i;b++){a._cloneInto(c).update(m).digestInto(m);for(let w=0;w<v.length;w++)v[w]^=m[w]}}return L2e(a,l,o,c,m)}function D2e(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),l=r?4:0,c=r?0:4;t.setUint32(e+l,o,r),t.setUint32(e+c,a,r)}class R8 extends _8{constructor(e,n,r,i){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=yT(this.buffer)}update(e){mx(this);const{view:n,buffer:r,blockLen:i}=this;e=gx(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=yT(e);for(;i<=s-o;o+=i)this.process(l,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){mx(this),Are(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let h=o;h<i;h++)n[h]=0;D2e(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=yT(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=l/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<c;h++)a.setUint32(4*h,u[h],s)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%n&&e.buffer.set(r),e}}const j2e=(t,e,n)=>t&e^~t&n,B2e=(t,e,n)=>t&e^t&n^e&n,U2e=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),df=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ff=new Uint32Array(64);let F2e=class extends R8{constructor(){super(64,32,8,!1),this.A=df[0]|0,this.B=df[1]|0,this.C=df[2]|0,this.D=df[3]|0,this.E=df[4]|0,this.F=df[5]|0,this.G=df[6]|0,this.H=df[7]|0}get(){const{A:e,B:n,C:r,D:i,E:s,F:o,G:a,H:l}=this;return[e,n,r,i,s,o,a,l]}set(e,n,r,i,s,o,a,l){this.A=e|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(e,n){for(let h=0;h<16;h++,n+=4)ff[h]=e.getUint32(n,!1);for(let h=16;h<64;h++){const m=ff[h-15],g=ff[h-2],y=ic(m,7)^ic(m,18)^m>>>3,v=ic(g,17)^ic(g,19)^g>>>10;ff[h]=v+ff[h-7]+y+ff[h-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:l,G:c,H:u}=this;for(let h=0;h<64;h++){const m=ic(a,6)^ic(a,11)^ic(a,25),g=u+m+j2e(a,l,c)+U2e[h]+ff[h]|0,v=(ic(r,2)^ic(r,13)^ic(r,22))+B2e(r,i,s)|0;u=c,c=l,l=a,a=o+g|0,o=s,s=i,i=r,r=g+v|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(r,i,s,o,a,l,c,u)}roundClean(){ff.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const qx=EN(()=>new F2e),rA=BigInt(2**32-1),W3=BigInt(32);function Cre(t,e=!1){return e?{h:Number(t&rA),l:Number(t>>W3&rA)}:{h:Number(t>>W3&rA)|0,l:Number(t&rA)|0}}function Pre(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=Cre(t[i],e);[n[i],r[i]]=[s,o]}return[n,r]}const $2e=(t,e)=>BigInt(t>>>0)<<W3|BigInt(e>>>0),z2e=(t,e,n)=>t>>>n,V2e=(t,e,n)=>t<<32-n|e>>>n,H2e=(t,e,n)=>t>>>n|e<<32-n,q2e=(t,e,n)=>t<<32-n|e>>>n,G2e=(t,e,n)=>t<<64-n|e>>>n-32,K2e=(t,e,n)=>t>>>n-32|e<<64-n,W2e=(t,e)=>e,Y2e=(t,e)=>t,_re=(t,e,n)=>t<<n|e>>>32-n,Ire=(t,e,n)=>e<<n|t>>>32-n,Rre=(t,e,n)=>e<<n-32|t>>>64-n,Ore=(t,e,n)=>t<<n-32|e>>>64-n;function J2e(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:i|0}}const X2e=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),Q2e=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,Z2e=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),eNe=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0,tNe=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0),nNe=(t,e,n,r,i,s)=>e+n+r+i+s+(t/2**32|0)|0,fn={fromBig:Cre,split:Pre,toBig:$2e,shrSH:z2e,shrSL:V2e,rotrSH:H2e,rotrSL:q2e,rotrBH:G2e,rotrBL:K2e,rotr32H:W2e,rotr32L:Y2e,rotlSH:_re,rotlSL:Ire,rotlBH:Rre,rotlBL:Ore,add:J2e,add3L:X2e,add3H:Q2e,add4L:Z2e,add4H:eNe,add5H:nNe,add5L:tNe},[rNe,iNe]=fn.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),hf=new Uint32Array(80),pf=new Uint32Array(80);let sNe=class extends R8{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:l,Eh:c,El:u,Fh:h,Fl:m,Gh:g,Gl:y,Hh:v,Hl:b}=this;return[e,n,r,i,s,o,a,l,c,u,h,m,g,y,v,b]}set(e,n,r,i,s,o,a,l,c,u,h,m,g,y,v,b){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=c|0,this.El=u|0,this.Fh=h|0,this.Fl=m|0,this.Gh=g|0,this.Gl=y|0,this.Hh=v|0,this.Hl=b|0}process(e,n){for(let N=0;N<16;N++,n+=4)hf[N]=e.getUint32(n),pf[N]=e.getUint32(n+=4);for(let N=16;N<80;N++){const R=hf[N-15]|0,D=pf[N-15]|0,O=fn.rotrSH(R,D,1)^fn.rotrSH(R,D,8)^fn.shrSH(R,D,7),B=fn.rotrSL(R,D,1)^fn.rotrSL(R,D,8)^fn.shrSL(R,D,7),z=hf[N-2]|0,U=pf[N-2]|0,$=fn.rotrSH(z,U,19)^fn.rotrBH(z,U,61)^fn.shrSH(z,U,6),W=fn.rotrSL(z,U,19)^fn.rotrBL(z,U,61)^fn.shrSL(z,U,6),H=fn.add4L(B,W,pf[N-7],pf[N-16]),F=fn.add4H(H,O,$,hf[N-7],hf[N-16]);hf[N]=F|0,pf[N]=H|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:l,Dh:c,Dl:u,Eh:h,El:m,Fh:g,Fl:y,Gh:v,Gl:b,Hh:w,Hl:k}=this;for(let N=0;N<80;N++){const R=fn.rotrSH(h,m,14)^fn.rotrSH(h,m,18)^fn.rotrBH(h,m,41),D=fn.rotrSL(h,m,14)^fn.rotrSL(h,m,18)^fn.rotrBL(h,m,41),O=h&g^~h&v,B=m&y^~m&b,z=fn.add5L(k,D,B,iNe[N],pf[N]),U=fn.add5H(z,w,R,O,rNe[N],hf[N]),$=z|0,W=fn.rotrSH(r,i,28)^fn.rotrBH(r,i,34)^fn.rotrBH(r,i,39),H=fn.rotrSL(r,i,28)^fn.rotrBL(r,i,34)^fn.rotrBL(r,i,39),F=r&s^r&a^s&a,T=i&o^i&l^o&l;w=v|0,k=b|0,v=g|0,b=y|0,g=h|0,y=m|0,{h,l:m}=fn.add(c|0,u|0,U|0,$|0),c=a|0,u=l|0,a=s|0,l=o|0,s=r|0,o=i|0;const _=fn.add3L($,H,T);r=fn.add3H(_,U,W,F),i=_|0}({h:r,l:i}=fn.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=fn.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l}=fn.add(this.Ch|0,this.Cl|0,a|0,l|0),{h:c,l:u}=fn.add(this.Dh|0,this.Dl|0,c|0,u|0),{h,l:m}=fn.add(this.Eh|0,this.El|0,h|0,m|0),{h:g,l:y}=fn.add(this.Fh|0,this.Fl|0,g|0,y|0),{h:v,l:b}=fn.add(this.Gh|0,this.Gl|0,v|0,b|0),{h:w,l:k}=fn.add(this.Hh|0,this.Hl|0,w|0,k|0),this.set(r,i,s,o,a,l,c,u,h,m,g,y,v,b,w,k)}roundClean(){hf.fill(0),pf.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const O8=EN(()=>new sNe);function oNe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("unable to locate global object")}const IV=oNe(),RV=IV.crypto||IV.msCrypto;function Mre(t){switch(t){case"sha256":return qx.create();case"sha512":return O8.create()}xe(!1,"invalid hashing algorithm name","algorithm",t)}function aNe(t,e){const n={sha256:qx,sha512:O8}[t];return xe(n!=null,"invalid hmac algorithm","algorithm",t),SN.create(n,e)}function lNe(t,e,n,r,i){const s={sha256:qx,sha512:O8}[i];return xe(s!=null,"invalid pbkdf2 algorithm","algorithm",i),I8(s,t,e,{c:n,dkLen:r})}function cNe(t){Ye(RV!=null,"platform does not support secure random numbers","UNSUPPORTED_OPERATION",{operation:"randomBytes"}),xe(Number.isInteger(t)&&t>0&&t<=1024,"invalid length","length",t);const e=new Uint8Array(t);return RV.getRandomValues(e),e}let Lre=!1;const Dre=function(t,e,n){return aNe(t,e).update(n).digest()};let jre=Dre;function Gx(t,e,n){const r=bt(e,"key"),i=bt(n,"data");return st(jre(t,r,i))}Gx._=Dre;Gx.lock=function(){Lre=!0};Gx.register=function(t){if(Lre)throw new Error("computeHmac is locked");jre=t};Object.freeze(Gx);const[Bre,Ure,Fre]=[[],[],[]],uNe=BigInt(0),bb=BigInt(1),dNe=BigInt(2),fNe=BigInt(7),hNe=BigInt(256),pNe=BigInt(113);for(let t=0,e=bb,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],Bre.push(2*(5*r+n)),Ure.push((t+1)*(t+2)/2%64);let i=uNe;for(let s=0;s<7;s++)e=(e<<bb^(e>>fNe)*pNe)%hNe,e&dNe&&(i^=bb<<(bb<<BigInt(s))-bb);Fre.push(i)}const[mNe,gNe]=Pre(Fre,!0),OV=(t,e,n)=>n>32?Rre(t,e,n):_re(t,e,n),MV=(t,e,n)=>n>32?Ore(t,e,n):Ire(t,e,n);function yNe(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,l=(o+2)%10,c=n[l],u=n[l+1],h=OV(c,u,1)^n[a],m=MV(c,u,1)^n[a+1];for(let g=0;g<50;g+=10)t[o+g]^=h,t[o+g+1]^=m}let i=t[2],s=t[3];for(let o=0;o<24;o++){const a=Ure[o],l=OV(i,s,a),c=MV(i,s,a),u=Bre[o];i=t[u],s=t[u+1],t[u]=l,t[u+1]=c}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=mNe[r],t[1]^=gNe[r]}n.fill(0)}class M8 extends _8{constructor(e,n,r,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Xo(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=gT(this.state)}keccak(){yNe(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){mx(this);const{blockLen:n,state:r}=this;e=gx(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);for(let a=0;a<o;a++)r[this.pos++]^=e[s++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:i}=this;e[r]^=n,(n&128)!==0&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){mx(this,!1),P8(e),this.finish();const n=this.state,{blockLen:r}=this;for(let i=0,s=e.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);e.set(n.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Xo(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Are(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new M8(n,r,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}}const xNe=(t,e,n)=>EN(()=>new M8(e,t,n)),vNe=xNe(1,136,256/8);let $re=!1;const zre=function(t){return vNe(t)};let Vre=zre;function Kn(t){const e=bt(t,"data");return st(Vre(e))}Kn._=zre;Kn.lock=function(){$re=!0};Kn.register=function(t){if($re)throw new TypeError("keccak256 is locked");Vre=t};Object.freeze(Kn);const bNe=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),Hre=Uint8Array.from({length:16},(t,e)=>e),wNe=Hre.map(t=>(9*t+5)%16);let L8=[Hre],D8=[wNe];for(let t=0;t<4;t++)for(let e of[L8,D8])e.push(e[t].map(n=>bNe[n]));const qre=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(t=>new Uint8Array(t)),ENe=L8.map((t,e)=>t.map(n=>qre[e][n])),SNe=D8.map((t,e)=>t.map(n=>qre[e][n])),ANe=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),TNe=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),iA=(t,e)=>t<<e|t>>>32-e;function LV(t,e,n,r){return t===0?e^n^r:t===1?e&n|~e&r:t===2?(e|~n)^r:t===3?e&r|n&~r:e^(n|~r)}const sA=new Uint32Array(16);class kNe extends R8{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:n,h2:r,h3:i,h4:s}=this;return[e,n,r,i,s]}set(e,n,r,i,s){this.h0=e|0,this.h1=n|0,this.h2=r|0,this.h3=i|0,this.h4=s|0}process(e,n){for(let g=0;g<16;g++,n+=4)sA[g]=e.getUint32(n,!0);let r=this.h0|0,i=r,s=this.h1|0,o=s,a=this.h2|0,l=a,c=this.h3|0,u=c,h=this.h4|0,m=h;for(let g=0;g<5;g++){const y=4-g,v=ANe[g],b=TNe[g],w=L8[g],k=D8[g],N=ENe[g],R=SNe[g];for(let D=0;D<16;D++){const O=iA(r+LV(g,s,a,c)+sA[w[D]]+v,N[D])+h|0;r=h,h=c,c=iA(a,10)|0,a=s,s=O}for(let D=0;D<16;D++){const O=iA(i+LV(y,o,l,u)+sA[k[D]]+b,R[D])+m|0;i=m,m=u,u=iA(l,10)|0,l=o,o=O}}this.set(this.h1+a+u|0,this.h2+c+m|0,this.h3+h+i|0,this.h4+r+o|0,this.h0+s+l|0)}roundClean(){sA.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const NNe=EN(()=>new kNe);let Gre=!1;const Kre=function(t){return NNe(t)};let Wre=Kre;function Kx(t){const e=bt(t,"data");return st(Wre(e))}Kx._=Kre;Kx.lock=function(){Gre=!0};Kx.register=function(t){if(Gre)throw new TypeError("ripemd160 is locked");Wre=t};Object.freeze(Kx);let Yre=!1;const Jre=function(t,e,n,r,i){return lNe(t,e,n,r,i)};let Xre=Jre;function Sh(t,e,n,r,i){const s=bt(t,"password"),o=bt(e,"salt");return st(Xre(s,o,n,r,i))}Sh._=Jre;Sh.lock=function(){Yre=!0};Sh.register=function(t){if(Yre)throw new Error("pbkdf2 is locked");Xre=t};Object.freeze(Sh);let Qre=!1;const Zre=function(t){return new Uint8Array(cNe(t))};let eie=Zre;function td(t){return eie(t)}td._=Zre;td.lock=function(){Qre=!0};td.register=function(t){if(Qre)throw new Error("randomBytes is locked");eie=t};Object.freeze(td);const jn=(t,e)=>t<<e|t>>>32-e;function DV(t,e,n,r,i,s){let o=t[e++]^n[r++],a=t[e++]^n[r++],l=t[e++]^n[r++],c=t[e++]^n[r++],u=t[e++]^n[r++],h=t[e++]^n[r++],m=t[e++]^n[r++],g=t[e++]^n[r++],y=t[e++]^n[r++],v=t[e++]^n[r++],b=t[e++]^n[r++],w=t[e++]^n[r++],k=t[e++]^n[r++],N=t[e++]^n[r++],R=t[e++]^n[r++],D=t[e++]^n[r++],O=o,B=a,z=l,U=c,$=u,W=h,H=m,F=g,T=y,_=v,L=b,V=w,K=k,te=N,G=R,q=D;for(let M=0;M<8;M+=2)$^=jn(O+K|0,7),T^=jn($+O|0,9),K^=jn(T+$|0,13),O^=jn(K+T|0,18),_^=jn(W+B|0,7),te^=jn(_+W|0,9),B^=jn(te+_|0,13),W^=jn(B+te|0,18),G^=jn(L+H|0,7),z^=jn(G+L|0,9),H^=jn(z+G|0,13),L^=jn(H+z|0,18),U^=jn(q+V|0,7),F^=jn(U+q|0,9),V^=jn(F+U|0,13),q^=jn(V+F|0,18),B^=jn(O+U|0,7),z^=jn(B+O|0,9),U^=jn(z+B|0,13),O^=jn(U+z|0,18),H^=jn(W+$|0,7),F^=jn(H+W|0,9),$^=jn(F+H|0,13),W^=jn($+F|0,18),V^=jn(L+_|0,7),T^=jn(V+L|0,9),_^=jn(T+V|0,13),L^=jn(_+T|0,18),K^=jn(q+G|0,7),te^=jn(K+q|0,9),G^=jn(te+K|0,13),q^=jn(G+te|0,18);i[s++]=o+O|0,i[s++]=a+B|0,i[s++]=l+z|0,i[s++]=c+U|0,i[s++]=u+$|0,i[s++]=h+W|0,i[s++]=m+H|0,i[s++]=g+F|0,i[s++]=y+T|0,i[s++]=v+_|0,i[s++]=b+L|0,i[s++]=w+V|0,i[s++]=k+K|0,i[s++]=N+te|0,i[s++]=R+G|0,i[s++]=D+q|0}function ny(t,e,n,r,i){let s=r+0,o=r+16*i;for(let a=0;a<16;a++)n[o+a]=t[e+(2*i-1)*16+a];for(let a=0;a<i;a++,s+=16,e+=16)DV(n,o,t,e,n,s),a>0&&(o+=16),DV(n,s,t,e+=16,n,o)}function tie(t,e,n){const r=kre({dkLen:32,asyncTick:10,maxmem:1073742848},n),{N:i,r:s,p:o,dkLen:a,asyncTick:l,maxmem:c,onProgress:u}=r;if(Xo(i),Xo(s),Xo(o),Xo(a),Xo(l),Xo(c),u!==void 0&&typeof u!="function")throw new Error("progressCb should be function");const h=128*s,m=h/4;if(i<=1||(i&i-1)!==0||i>=2**(h/8)||i>2**32)throw new Error("Scrypt: N must be larger than 1, a power of 2, less than 2^(128 * r / 8) and less than 2^32");if(o<0||o>(2**32-1)*32/h)throw new Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(a<0||a>(2**32-1)*32)throw new Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");const g=h*(i+o);if(g>c)throw new Error(`Scrypt: parameters too large, ${g} (128 * r * (N + p)) > ${c} (maxmem)`);const y=I8(qx,t,e,{c:1,dkLen:h*o}),v=gT(y),b=gT(new Uint8Array(h*i)),w=gT(new Uint8Array(h));let k=()=>{};if(u){const N=2*i*o,R=Math.max(Math.floor(N/1e4),1);let D=0;k=()=>{D++,u&&(!(D%R)||D===N)&&u(D/N)}}return{N:i,r:s,p:o,dkLen:a,blockSize32:m,V:b,B32:v,B:y,tmp:w,blockMixCb:k,asyncTick:l}}function nie(t,e,n,r,i){const s=I8(qx,t,n,{c:1,dkLen:e});return n.fill(0),r.fill(0),i.fill(0),s}function CNe(t,e,n){const{N:r,r:i,p:s,dkLen:o,blockSize32:a,V:l,B32:c,B:u,tmp:h,blockMixCb:m}=tie(t,e,n);for(let g=0;g<s;g++){const y=a*g;for(let v=0;v<a;v++)l[v]=c[y+v];for(let v=0,b=0;v<r-1;v++)ny(l,b,l,b+=a,i),m();ny(l,(r-1)*a,c,y,i),m();for(let v=0;v<r;v++){const b=c[y+a-16]%r;for(let w=0;w<a;w++)h[w]=c[y+w]^l[b*a+w];ny(h,0,c,y,i),m()}}return nie(t,o,u,l,h)}async function PNe(t,e,n){const{N:r,r:i,p:s,dkLen:o,blockSize32:a,V:l,B32:c,B:u,tmp:h,blockMixCb:m,asyncTick:g}=tie(t,e,n);for(let y=0;y<s;y++){const v=a*y;for(let w=0;w<a;w++)l[w]=c[v+w];let b=0;await _V(r-1,g,()=>{ny(l,b,l,b+=a,i),m()}),ny(l,(r-1)*a,c,v,i),m(),await _V(r,g,()=>{const w=c[v+a-16]%r;for(let k=0;k<a;k++)h[k]=c[v+k]^l[w*a+k];ny(h,0,c,v,i),m()})}return nie(t,o,u,l,h)}let rie=!1,iie=!1;const sie=async function(t,e,n,r,i,s,o){return await PNe(t,e,{N:n,r,p:i,dkLen:s,onProgress:o})},oie=function(t,e,n,r,i,s){return CNe(t,e,{N:n,r,p:i,dkLen:s})};let aie=sie,lie=oie;async function Wx(t,e,n,r,i,s,o){const a=bt(t,"passwd"),l=bt(e,"salt");return st(await aie(a,l,n,r,i,s,o))}Wx._=sie;Wx.lock=function(){iie=!0};Wx.register=function(t){if(iie)throw new Error("scrypt is locked");aie=t};Object.freeze(Wx);function Yx(t,e,n,r,i,s){const o=bt(t,"passwd"),a=bt(e,"salt");return st(lie(o,a,n,r,i,s))}Yx._=oie;Yx.lock=function(){rie=!0};Yx.register=function(t){if(rie)throw new Error("scryptSync is locked");lie=t};Object.freeze(Yx);const cie=function(t){return Mre("sha256").update(t).digest()},uie=function(t){return Mre("sha512").update(t).digest()};let die=cie,fie=uie,hie=!1,pie=!1;function Qa(t){const e=bt(t,"data");return st(die(e))}Qa._=cie;Qa.lock=function(){hie=!0};Qa.register=function(t){if(hie)throw new Error("sha256 is locked");die=t};Object.freeze(Qa);function j8(t){const e=bt(t,"data");return st(fie(e))}j8._=uie;j8.lock=function(){pie=!0};j8.register=function(t){if(pie)throw new Error("sha512 is locked");fie=t};Object.freeze(Qa);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const mie=BigInt(0),AN=BigInt(1),_Ne=BigInt(2),TN=t=>t instanceof Uint8Array,INe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function yx(t){if(!TN(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=INe[t[n]];return e}function gie(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function B8(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}function xx(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let r=0;r<n.length;r++){const i=r*2,s=t.slice(i,i+2),o=Number.parseInt(s,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[r]=o}return n}function um(t){return B8(yx(t))}function U8(t){if(!TN(t))throw new Error("Uint8Array expected");return B8(yx(Uint8Array.from(t).reverse()))}function vx(t,e){return xx(t.toString(16).padStart(e*2,"0"))}function F8(t,e){return vx(t,e).reverse()}function RNe(t){return xx(gie(t))}function vl(t,e,n){let r;if(typeof e=="string")try{r=xx(e)}catch(s){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${s}`)}else if(TN(e))r=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(`${t} expected ${n} bytes, got ${i}`);return r}function Mw(...t){const e=new Uint8Array(t.reduce((r,i)=>r+i.length,0));let n=0;return t.forEach(r=>{if(!TN(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}function ONe(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function MNe(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function LNe(t){let e;for(e=0;t>mie;t>>=AN,e+=1);return e}function DNe(t,e){return t>>BigInt(e)&AN}const jNe=(t,e,n)=>t|(n?AN:mie)<<BigInt(e),$8=t=>(_Ne<<BigInt(t-1))-AN,fR=t=>new Uint8Array(t),jV=t=>Uint8Array.from(t);function yie(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=fR(t),i=fR(t),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...h)=>n(i,r,...h),l=(h=fR())=>{i=a(jV([0]),h),r=a(),h.length!==0&&(i=a(jV([1]),h),r=a())},c=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const m=[];for(;h<e;){r=a();const g=r.slice();m.push(g),h+=r.length}return Mw(...m)};return(h,m)=>{o(),l(h);let g;for(;!(g=m(c()));)l();return o(),g}}const BNe={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function K1(t,e,n={}){const r=(i,s,o)=>{const a=BNe[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);const l=t[i];if(!(o&&l===void 0)&&!a(l,t))throw new Error(`Invalid param ${String(i)}=${l} (${typeof l}), expected ${s}`)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return t}const UNe=Object.freeze(Object.defineProperty({__proto__:null,bitGet:DNe,bitLen:LNe,bitMask:$8,bitSet:jNe,bytesToHex:yx,bytesToNumberBE:um,bytesToNumberLE:U8,concatBytes:Mw,createHmacDrbg:yie,ensureBytes:vl,equalBytes:ONe,hexToBytes:xx,hexToNumber:B8,numberToBytesBE:vx,numberToBytesLE:F8,numberToHexUnpadded:gie,numberToVarBytesBE:RNe,utf8ToBytes:MNe,validateObject:K1},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Fi=BigInt(0),ri=BigInt(1),vp=BigInt(2),FNe=BigInt(3),Y3=BigInt(4),BV=BigInt(5),UV=BigInt(8);BigInt(9);BigInt(16);function vo(t,e){const n=t%e;return n>=Fi?n:e+n}function $Ne(t,e,n){if(n<=Fi||e<Fi)throw new Error("Expected power/modulo > 0");if(n===ri)return Fi;let r=ri;for(;e>Fi;)e&ri&&(r=r*t%n),t=t*t%n,e>>=ri;return r}function Ea(t,e,n){let r=t;for(;e-- >Fi;)r*=r,r%=n;return r}function J3(t,e){if(t===Fi||e<=Fi)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=vo(t,e),r=e,i=Fi,s=ri;for(;n!==Fi;){const a=r/n,l=r%n,c=i-s*a;r=n,n=l,i=s,s=c}if(r!==ri)throw new Error("invert: does not exist");return vo(i,e)}function zNe(t){const e=(t-ri)/vp;let n,r,i;for(n=t-ri,r=0;n%vp===Fi;n/=vp,r++);for(i=vp;i<t&&$Ne(i,e,t)!==t-ri;i++);if(r===1){const o=(t+ri)/Y3;return function(l,c){const u=l.pow(c,o);if(!l.eql(l.sqr(u),c))throw new Error("Cannot find square root");return u}}const s=(n+ri)/vp;return function(a,l){if(a.pow(l,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let c=r,u=a.pow(a.mul(a.ONE,i),n),h=a.pow(l,s),m=a.pow(l,n);for(;!a.eql(m,a.ONE);){if(a.eql(m,a.ZERO))return a.ZERO;let g=1;for(let v=a.sqr(m);g<c&&!a.eql(v,a.ONE);g++)v=a.sqr(v);const y=a.pow(u,ri<<BigInt(c-g-1));u=a.sqr(y),h=a.mul(h,y),m=a.mul(m,u),c=g}return h}}function VNe(t){if(t%Y3===FNe){const e=(t+ri)/Y3;return function(r,i){const s=r.pow(i,e);if(!r.eql(r.sqr(s),i))throw new Error("Cannot find square root");return s}}if(t%UV===BV){const e=(t-BV)/UV;return function(r,i){const s=r.mul(i,vp),o=r.pow(s,e),a=r.mul(i,o),l=r.mul(r.mul(a,vp),o),c=r.mul(a,r.sub(l,r.ONE));if(!r.eql(r.sqr(c),i))throw new Error("Cannot find square root");return c}}return zNe(t)}const HNe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function qNe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=HNe.reduce((r,i)=>(r[i]="function",r),e);return K1(t,n)}function GNe(t,e,n){if(n<Fi)throw new Error("Expected power > 0");if(n===Fi)return t.ONE;if(n===ri)return e;let r=t.ONE,i=e;for(;n>Fi;)n&ri&&(r=t.mul(r,i)),i=t.sqr(i),n>>=ri;return r}function KNe(t,e){const n=new Array(e.length),r=e.reduce((s,o,a)=>t.is0(o)?s:(n[a]=s,t.mul(s,o)),t.ONE),i=t.inv(r);return e.reduceRight((s,o,a)=>t.is0(o)?s:(n[a]=t.mul(s,n[a]),t.mul(s,o)),i),n}function xie(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function WNe(t,e,n=!1,r={}){if(t<=Fi)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:i,nByteLength:s}=xie(t,e);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=VNe(t),a=Object.freeze({ORDER:t,BITS:i,BYTES:s,MASK:$8(i),ZERO:Fi,ONE:ri,create:l=>vo(l,t),isValid:l=>{if(typeof l!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof l}`);return Fi<=l&&l<t},is0:l=>l===Fi,isOdd:l=>(l&ri)===ri,neg:l=>vo(-l,t),eql:(l,c)=>l===c,sqr:l=>vo(l*l,t),add:(l,c)=>vo(l+c,t),sub:(l,c)=>vo(l-c,t),mul:(l,c)=>vo(l*c,t),pow:(l,c)=>GNe(a,l,c),div:(l,c)=>vo(l*J3(c,t),t),sqrN:l=>l*l,addN:(l,c)=>l+c,subN:(l,c)=>l-c,mulN:(l,c)=>l*c,inv:l=>J3(l,t),sqrt:r.sqrt||(l=>o(a,l)),invertBatch:l=>KNe(a,l),cmov:(l,c,u)=>u?c:l,toBytes:l=>n?F8(l,s):vx(l,s),fromBytes:l=>{if(l.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${l.length}`);return n?U8(l):um(l)}});return Object.freeze(a)}function vie(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function bie(t){const e=vie(t);return e+Math.ceil(e/2)}function YNe(t,e,n=!1){const r=t.length,i=vie(e),s=bie(e);if(r<16||r<s||r>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${r}`);const o=n?um(t):U8(t),a=vo(o,e-ri)+ri;return n?F8(a,i):vx(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const JNe=BigInt(0),hR=BigInt(1);function XNe(t,e){const n=(i,s)=>{const o=s.negate();return i?o:s},r=i=>{const s=Math.ceil(e/i)+1,o=2**(i-1);return{windows:s,windowSize:o}};return{constTimeNegate:n,unsafeLadder(i,s){let o=t.ZERO,a=i;for(;s>JNe;)s&hR&&(o=o.add(a)),a=a.double(),s>>=hR;return o},precomputeWindow(i,s){const{windows:o,windowSize:a}=r(s),l=[];let c=i,u=c;for(let h=0;h<o;h++){u=c,l.push(u);for(let m=1;m<a;m++)u=u.add(c),l.push(u);c=u.double()}return l},wNAF(i,s,o){const{windows:a,windowSize:l}=r(i);let c=t.ZERO,u=t.BASE;const h=BigInt(2**i-1),m=2**i,g=BigInt(i);for(let y=0;y<a;y++){const v=y*l;let b=Number(o&h);o>>=g,b>l&&(b-=m,o+=hR);const w=v,k=v+Math.abs(b)-1,N=y%2!==0,R=b<0;b===0?u=u.add(n(N,s[w])):c=c.add(n(R,s[k]))}return{p:c,f:u}},wNAFCached(i,s,o,a){const l=i._WINDOW_SIZE||1;let c=s.get(i);return c||(c=this.precomputeWindow(i,l),l!==1&&s.set(i,a(c))),this.wNAF(l,c,o)}}}function wie(t){return qNe(t.Fp),K1(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...xie(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function QNe(t){const e=wie(t);K1(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=e;if(n){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:ZNe,hexToBytes:eCe}=UNe,Cp={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=Cp;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const n=t[1],r=t.subarray(2,n+2);if(!n||r.length!==n)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:ZNe(r),l:t.subarray(n+2)}},toSig(t){const{Err:e}=Cp,n=typeof t=="string"?eCe(t):t;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new e("Invalid signature tag");if(n[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:i,l:s}=Cp._parseInt(n.subarray(2)),{d:o,l:a}=Cp._parseInt(s);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(t){const e=c=>Number.parseInt(c[0],16)&8?"00"+c:c,n=c=>{const u=c.toString(16);return u.length&1?`0${u}`:u},r=e(n(t.s)),i=e(n(t.r)),s=r.length/2,o=i.length/2,a=n(s),l=n(o);return`30${n(o+s+4)}02${l}${i}02${a}${r}`}},Vu=BigInt(0),Fa=BigInt(1);BigInt(2);const FV=BigInt(3);BigInt(4);function tCe(t){const e=QNe(t),{Fp:n}=e,r=e.toBytes||((y,v,b)=>{const w=v.toAffine();return Mw(Uint8Array.from([4]),n.toBytes(w.x),n.toBytes(w.y))}),i=e.fromBytes||(y=>{const v=y.subarray(1),b=n.fromBytes(v.subarray(0,n.BYTES)),w=n.fromBytes(v.subarray(n.BYTES,2*n.BYTES));return{x:b,y:w}});function s(y){const{a:v,b}=e,w=n.sqr(y),k=n.mul(w,y);return n.add(n.add(k,n.mul(y,v)),b)}if(!n.eql(n.sqr(e.Gy),s(e.Gx)))throw new Error("bad generator point: equation left != right");function o(y){return typeof y=="bigint"&&Vu<y&&y<e.n}function a(y){if(!o(y))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(y){const{allowedPrivateKeyLengths:v,nByteLength:b,wrapPrivateKey:w,n:k}=e;if(v&&typeof y!="bigint"){if(y instanceof Uint8Array&&(y=yx(y)),typeof y!="string"||!v.includes(y.length))throw new Error("Invalid key");y=y.padStart(b*2,"0")}let N;try{N=typeof y=="bigint"?y:um(vl("private key",y,b))}catch{throw new Error(`private key must be ${b} bytes, hex or bigint, not ${typeof y}`)}return w&&(N=vo(N,k)),a(N),N}const c=new Map;function u(y){if(!(y instanceof h))throw new Error("ProjectivePoint expected")}class h{constructor(v,b,w){if(this.px=v,this.py=b,this.pz=w,v==null||!n.isValid(v))throw new Error("x required");if(b==null||!n.isValid(b))throw new Error("y required");if(w==null||!n.isValid(w))throw new Error("z required")}static fromAffine(v){const{x:b,y:w}=v||{};if(!v||!n.isValid(b)||!n.isValid(w))throw new Error("invalid affine point");if(v instanceof h)throw new Error("projective point not allowed");const k=N=>n.eql(N,n.ZERO);return k(b)&&k(w)?h.ZERO:new h(b,w,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(v){const b=n.invertBatch(v.map(w=>w.pz));return v.map((w,k)=>w.toAffine(b[k])).map(h.fromAffine)}static fromHex(v){const b=h.fromAffine(i(vl("pointHex",v)));return b.assertValidity(),b}static fromPrivateKey(v){return h.BASE.multiply(l(v))}_setWindowSize(v){this._WINDOW_SIZE=v,c.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:v,y:b}=this.toAffine();if(!n.isValid(v)||!n.isValid(b))throw new Error("bad point: x or y not FE");const w=n.sqr(b),k=s(v);if(!n.eql(w,k))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:v}=this.toAffine();if(n.isOdd)return!n.isOdd(v);throw new Error("Field doesn't support isOdd")}equals(v){u(v);const{px:b,py:w,pz:k}=this,{px:N,py:R,pz:D}=v,O=n.eql(n.mul(b,D),n.mul(N,k)),B=n.eql(n.mul(w,D),n.mul(R,k));return O&&B}negate(){return new h(this.px,n.neg(this.py),this.pz)}double(){const{a:v,b}=e,w=n.mul(b,FV),{px:k,py:N,pz:R}=this;let D=n.ZERO,O=n.ZERO,B=n.ZERO,z=n.mul(k,k),U=n.mul(N,N),$=n.mul(R,R),W=n.mul(k,N);return W=n.add(W,W),B=n.mul(k,R),B=n.add(B,B),D=n.mul(v,B),O=n.mul(w,$),O=n.add(D,O),D=n.sub(U,O),O=n.add(U,O),O=n.mul(D,O),D=n.mul(W,D),B=n.mul(w,B),$=n.mul(v,$),W=n.sub(z,$),W=n.mul(v,W),W=n.add(W,B),B=n.add(z,z),z=n.add(B,z),z=n.add(z,$),z=n.mul(z,W),O=n.add(O,z),$=n.mul(N,R),$=n.add($,$),z=n.mul($,W),D=n.sub(D,z),B=n.mul($,U),B=n.add(B,B),B=n.add(B,B),new h(D,O,B)}add(v){u(v);const{px:b,py:w,pz:k}=this,{px:N,py:R,pz:D}=v;let O=n.ZERO,B=n.ZERO,z=n.ZERO;const U=e.a,$=n.mul(e.b,FV);let W=n.mul(b,N),H=n.mul(w,R),F=n.mul(k,D),T=n.add(b,w),_=n.add(N,R);T=n.mul(T,_),_=n.add(W,H),T=n.sub(T,_),_=n.add(b,k);let L=n.add(N,D);return _=n.mul(_,L),L=n.add(W,F),_=n.sub(_,L),L=n.add(w,k),O=n.add(R,D),L=n.mul(L,O),O=n.add(H,F),L=n.sub(L,O),z=n.mul(U,_),O=n.mul($,F),z=n.add(O,z),O=n.sub(H,z),z=n.add(H,z),B=n.mul(O,z),H=n.add(W,W),H=n.add(H,W),F=n.mul(U,F),_=n.mul($,_),H=n.add(H,F),F=n.sub(W,F),F=n.mul(U,F),_=n.add(_,F),W=n.mul(H,_),B=n.add(B,W),W=n.mul(L,_),O=n.mul(T,O),O=n.sub(O,W),W=n.mul(T,H),z=n.mul(L,z),z=n.add(z,W),new h(O,B,z)}subtract(v){return this.add(v.negate())}is0(){return this.equals(h.ZERO)}wNAF(v){return g.wNAFCached(this,c,v,b=>{const w=n.invertBatch(b.map(k=>k.pz));return b.map((k,N)=>k.toAffine(w[N])).map(h.fromAffine)})}multiplyUnsafe(v){const b=h.ZERO;if(v===Vu)return b;if(a(v),v===Fa)return this;const{endo:w}=e;if(!w)return g.unsafeLadder(this,v);let{k1neg:k,k1:N,k2neg:R,k2:D}=w.splitScalar(v),O=b,B=b,z=this;for(;N>Vu||D>Vu;)N&Fa&&(O=O.add(z)),D&Fa&&(B=B.add(z)),z=z.double(),N>>=Fa,D>>=Fa;return k&&(O=O.negate()),R&&(B=B.negate()),B=new h(n.mul(B.px,w.beta),B.py,B.pz),O.add(B)}multiply(v){a(v);let b=v,w,k;const{endo:N}=e;if(N){const{k1neg:R,k1:D,k2neg:O,k2:B}=N.splitScalar(b);let{p:z,f:U}=this.wNAF(D),{p:$,f:W}=this.wNAF(B);z=g.constTimeNegate(R,z),$=g.constTimeNegate(O,$),$=new h(n.mul($.px,N.beta),$.py,$.pz),w=z.add($),k=U.add(W)}else{const{p:R,f:D}=this.wNAF(b);w=R,k=D}return h.normalizeZ([w,k])[0]}multiplyAndAddUnsafe(v,b,w){const k=h.BASE,N=(D,O)=>O===Vu||O===Fa||!D.equals(k)?D.multiplyUnsafe(O):D.multiply(O),R=N(this,b).add(N(v,w));return R.is0()?void 0:R}toAffine(v){const{px:b,py:w,pz:k}=this,N=this.is0();v==null&&(v=N?n.ONE:n.inv(k));const R=n.mul(b,v),D=n.mul(w,v),O=n.mul(k,v);if(N)return{x:n.ZERO,y:n.ZERO};if(!n.eql(O,n.ONE))throw new Error("invZ was invalid");return{x:R,y:D}}isTorsionFree(){const{h:v,isTorsionFree:b}=e;if(v===Fa)return!0;if(b)return b(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:v,clearCofactor:b}=e;return v===Fa?this:b?b(h,this):this.multiplyUnsafe(e.h)}toRawBytes(v=!0){return this.assertValidity(),r(h,this,v)}toHex(v=!0){return yx(this.toRawBytes(v))}}h.BASE=new h(e.Gx,e.Gy,n.ONE),h.ZERO=new h(n.ZERO,n.ONE,n.ZERO);const m=e.nBitLength,g=XNe(h,e.endo?Math.ceil(m/2):m);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:l,weierstrassEquation:s,isWithinCurveOrder:o}}function nCe(t){const e=wie(t);return K1(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function rCe(t){const e=nCe(t),{Fp:n,n:r}=e,i=n.BYTES+1,s=2*n.BYTES+1;function o(_){return Vu<_&&_<n.ORDER}function a(_){return vo(_,r)}function l(_){return J3(_,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:u,weierstrassEquation:h,isWithinCurveOrder:m}=tCe({...e,toBytes(_,L,V){const K=L.toAffine(),te=n.toBytes(K.x),G=Mw;return V?G(Uint8Array.from([L.hasEvenY()?2:3]),te):G(Uint8Array.from([4]),te,n.toBytes(K.y))},fromBytes(_){const L=_.length,V=_[0],K=_.subarray(1);if(L===i&&(V===2||V===3)){const te=um(K);if(!o(te))throw new Error("Point is not on curve");const G=h(te);let q=n.sqrt(G);const M=(q&Fa)===Fa;return(V&1)===1!==M&&(q=n.neg(q)),{x:te,y:q}}else if(L===s&&V===4){const te=n.fromBytes(K.subarray(0,n.BYTES)),G=n.fromBytes(K.subarray(n.BYTES,2*n.BYTES));return{x:te,y:G}}else throw new Error(`Point of length ${L} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),g=_=>yx(vx(_,e.nByteLength));function y(_){const L=r>>Fa;return _>L}function v(_){return y(_)?a(-_):_}const b=(_,L,V)=>um(_.slice(L,V));class w{constructor(L,V,K){this.r=L,this.s=V,this.recovery=K,this.assertValidity()}static fromCompact(L){const V=e.nByteLength;return L=vl("compactSignature",L,V*2),new w(b(L,0,V),b(L,V,2*V))}static fromDER(L){const{r:V,s:K}=Cp.toSig(vl("DER",L));return new w(V,K)}assertValidity(){if(!m(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!m(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(L){return new w(this.r,this.s,L)}recoverPublicKey(L){const{r:V,s:K,recovery:te}=this,G=B(vl("msgHash",L));if(te==null||![0,1,2,3].includes(te))throw new Error("recovery id invalid");const q=te===2||te===3?V+e.n:V;if(q>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const M=(te&1)===0?"02":"03",P=c.fromHex(M+g(q)),Y=l(q),X=a(-G*Y),se=a(K*Y),oe=c.BASE.multiplyAndAddUnsafe(P,X,se);if(!oe)throw new Error("point at infinify");return oe.assertValidity(),oe}hasHighS(){return y(this.s)}normalizeS(){return this.hasHighS()?new w(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return xx(this.toDERHex())}toDERHex(){return Cp.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return xx(this.toCompactHex())}toCompactHex(){return g(this.r)+g(this.s)}}const k={isValidPrivateKey(_){try{return u(_),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const _=bie(e.n);return YNe(e.randomBytes(_),e.n)},precompute(_=8,L=c.BASE){return L._setWindowSize(_),L.multiply(BigInt(3)),L}};function N(_,L=!0){return c.fromPrivateKey(_).toRawBytes(L)}function R(_){const L=_ instanceof Uint8Array,V=typeof _=="string",K=(L||V)&&_.length;return L?K===i||K===s:V?K===2*i||K===2*s:_ instanceof c}function D(_,L,V=!0){if(R(_))throw new Error("first arg must be private key");if(!R(L))throw new Error("second arg must be public key");return c.fromHex(L).multiply(u(_)).toRawBytes(V)}const O=e.bits2int||function(_){const L=um(_),V=_.length*8-e.nBitLength;return V>0?L>>BigInt(V):L},B=e.bits2int_modN||function(_){return a(O(_))},z=$8(e.nBitLength);function U(_){if(typeof _!="bigint")throw new Error("bigint expected");if(!(Vu<=_&&_<z))throw new Error(`bigint expected < 2^${e.nBitLength}`);return vx(_,e.nByteLength)}function $(_,L,V=W){if(["recovered","canonical"].some(ce=>ce in V))throw new Error("sign() legacy options not supported");const{hash:K,randomBytes:te}=e;let{lowS:G,prehash:q,extraEntropy:M}=V;G==null&&(G=!0),_=vl("msgHash",_),q&&(_=vl("prehashed msgHash",K(_)));const P=B(_),Y=u(L),X=[U(Y),U(P)];if(M!=null){const ce=M===!0?te(n.BYTES):M;X.push(vl("extraEntropy",ce))}const se=Mw(...X),oe=P;function me(ce){const ve=O(ce);if(!m(ve))return;const Ne=l(ve),pe=c.BASE.multiply(ve).toAffine(),Le=a(pe.x);if(Le===Vu)return;const he=a(Ne*a(oe+Le*Y));if(he===Vu)return;let Te=(pe.x===Le?0:2)|Number(pe.y&Fa),Ge=he;return G&&y(he)&&(Ge=v(he),Te^=1),new w(Le,Ge,Te)}return{seed:se,k2sig:me}}const W={lowS:e.lowS,prehash:!1},H={lowS:e.lowS,prehash:!1};function F(_,L,V=W){const{seed:K,k2sig:te}=$(_,L,V),G=e;return yie(G.hash.outputLen,G.nByteLength,G.hmac)(K,te)}c.BASE._setWindowSize(8);function T(_,L,V,K=H){var pe;const te=_;if(L=vl("msgHash",L),V=vl("publicKey",V),"strict"in K)throw new Error("options.strict was renamed to lowS");const{lowS:G,prehash:q}=K;let M,P;try{if(typeof te=="string"||te instanceof Uint8Array)try{M=w.fromDER(te)}catch(Le){if(!(Le instanceof Cp.Err))throw Le;M=w.fromCompact(te)}else if(typeof te=="object"&&typeof te.r=="bigint"&&typeof te.s=="bigint"){const{r:Le,s:he}=te;M=new w(Le,he)}else throw new Error("PARSE");P=c.fromHex(V)}catch(Le){if(Le.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(G&&M.hasHighS())return!1;q&&(L=e.hash(L));const{r:Y,s:X}=M,se=B(L),oe=l(X),me=a(se*oe),ce=a(Y*oe),ve=(pe=c.BASE.multiplyAndAddUnsafe(P,me,ce))==null?void 0:pe.toAffine();return ve?a(ve.x)===Y:!1}return{CURVE:e,getPublicKey:N,getSharedSecret:D,sign:F,verify:T,ProjectivePoint:c,Signature:w,utils:k}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function iCe(t){return{hash:t,hmac:(e,...n)=>SN(t,e,I2e(...n)),randomBytes:O2e}}function sCe(t,e){const n=r=>rCe({...t,...iCe(r)});return Object.freeze({...n(e),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Eie=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),$V=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),oCe=BigInt(1),X3=BigInt(2),zV=(t,e)=>(t+e/X3)/e;function aCe(t){const e=Eie,n=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),c=t*t*t%e,u=c*c*t%e,h=Ea(u,n,e)*u%e,m=Ea(h,n,e)*u%e,g=Ea(m,X3,e)*c%e,y=Ea(g,i,e)*g%e,v=Ea(y,s,e)*y%e,b=Ea(v,a,e)*v%e,w=Ea(b,l,e)*b%e,k=Ea(w,a,e)*v%e,N=Ea(k,n,e)*u%e,R=Ea(N,o,e)*y%e,D=Ea(R,r,e)*c%e,O=Ea(D,X3,e);if(!Q3.eql(Q3.sqr(O),t))throw new Error("Cannot find square root");return O}const Q3=WNe(Eie,void 0,void 0,{sqrt:aCe}),Tf=sCe({a:BigInt(0),b:BigInt(7),Fp:Q3,n:$V,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=$V,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-oCe*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,o=BigInt("0x100000000000000000000000000000000"),a=zV(s*t,e),l=zV(-r*t,e);let c=vo(t-a*n-l*i,e),u=vo(-a*r-l*s,e);const h=c>o,m=u>o;if(h&&(c=e-c),m&&(u=e-u),c>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:h,k1:c,k2neg:m,k2:u}}}},qx);BigInt(0);Tf.ProjectivePoint;const Lw="0x0000000000000000000000000000000000000000",VV="0x0000000000000000000000000000000000000000000000000000000000000000",H0t="",lCe=`Ethereum Signed Message:
`,HV=BigInt(0),qV=BigInt(1),Z3=BigInt(2),GV=BigInt(27),KV=BigInt(28),oA=BigInt(35),Sie=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),cCe=Sie/Z3,uCe=Symbol.for("nodejs.util.inspect.custom"),ep={};function pR(t){return ud(jr(t),32)}var Py,hc,_y,Bf;const Ra=class Ra{constructor(e,n,r,i){Fe(this,Py);Fe(this,hc);Fe(this,_y);Fe(this,Bf);Eh(e,ep,"Signature"),ge(this,Py,n),ge(this,hc,r),ge(this,_y,i),ge(this,Bf,null)}get r(){return re(this,Py)}set r(e){xe(ey(e)===32,"invalid r","value",e),ge(this,Py,st(e))}get s(){return xe(parseInt(re(this,hc).substring(0,3))<8,"non-canonical s; use ._s","s",re(this,hc)),re(this,hc)}set s(e){xe(ey(e)===32,"invalid s","value",e),ge(this,hc,st(e))}get _s(){return re(this,hc)}isValid(){return BigInt(re(this,hc))<=cCe}get v(){return re(this,_y)}set v(e){const n=en(e,"value");xe(n===27||n===28,"invalid v","v",e),ge(this,_y,n)}get networkV(){return re(this,Bf)}get legacyChainId(){const e=this.networkV;return e==null?null:Ra.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=bt(this.s);return this.yParity&&(e[0]|=128),st(e)}get compactSerialized(){return On([this.r,this.yParityAndS])}get serialized(){return On([this.r,this.s,this.yParity?"0x1c":"0x1b"])}getCanonical(){if(this.isValid())return this;const e=Sie-BigInt(this._s),n=55-this.v,r=new Ra(ep,this.r,pR(e),n);return this.networkV&&ge(r,Bf,this.networkV),r}clone(){const e=new Ra(ep,this.r,this._s,this.v);return this.networkV&&ge(e,Bf,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}[uCe](){return this.toString()}toString(){return this.isValid()?`Signature { r: ${this.r}, s: ${this._s}, v: ${this.v} }`:`Signature { r: ${this.r}, s: ${this._s}, v: ${this.v}, valid: false }`}static getChainId(e){const n=Nt(e,"v");return n==GV||n==KV?HV:(xe(n>=oA,"invalid EIP-155 v","v",e),(n-oA)/Z3)}static getChainIdV(e,n){return Nt(e)*Z3+BigInt(35+n-27)}static getNormalizedV(e){const n=Nt(e);return n===HV||n===GV?27:n===qV||n===KV?28:(xe(n>=oA,"invalid v","v",e),n&qV?27:28)}static from(e){function n(c,u){xe(c,u,"signature",e)}if(e==null)return new Ra(ep,VV,VV,27);if(typeof e=="string"){const c=bt(e,"signature");if(c.length===64){const u=st(c.slice(0,32)),h=c.slice(32,64),m=h[0]&128?28:27;return h[0]&=127,new Ra(ep,u,st(h),m)}if(c.length===65){const u=st(c.slice(0,32)),h=st(c.slice(32,64)),m=Ra.getNormalizedV(c[64]);return new Ra(ep,u,h,m)}n(!1,"invalid raw signature length")}if(e instanceof Ra)return e.clone();const r=e.r;n(r!=null,"missing r");const i=pR(r),s=(function(c,u){if(c!=null)return pR(c);if(u!=null){n(gr(u,32),"invalid yParityAndS");const h=bt(u);return h[0]&=127,st(h)}n(!1,"missing s")})(e.s,e.yParityAndS),{networkV:o,v:a}=(function(c,u,h){if(c!=null){const m=Nt(c);return{networkV:m>=oA?m:void 0,v:Ra.getNormalizedV(m)}}if(u!=null)return n(gr(u,32),"invalid yParityAndS"),{v:bt(u)[0]&128?28:27};if(h!=null){switch(en(h,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}n(!1,"invalid yParity")}n(!1,"missing v")})(e.v,e.yParityAndS,e.yParity),l=new Ra(ep,i,s,a);return o&&ge(l,Bf,o),n(e.yParity==null||en(e.yParity,"sig.yParity")===l.yParity,"yParity mismatch"),n(e.yParityAndS==null||e.yParityAndS===l.yParityAndS,"yParityAndS mismatch"),l}};Py=new WeakMap,hc=new WeakMap,_y=new WeakMap,Bf=new WeakMap;let no=Ra;var Lu;const bp=class bp{constructor(e){Fe(this,Lu);xe(ey(e)===32,"invalid private key","privateKey","[REDACTED]"),ge(this,Lu,st(e))}get privateKey(){return re(this,Lu)}get publicKey(){return bp.computePublicKey(re(this,Lu))}get compressedPublicKey(){return bp.computePublicKey(re(this,Lu),!0)}sign(e){xe(ey(e)===32,"invalid digest length","digest",e);const n=Tf.sign(fs(e),fs(re(this,Lu)),{lowS:!0});return no.from({r:dd(n.r,32),s:dd(n.s,32),v:n.recovery?28:27})}computeSharedSecret(e){const n=bp.computePublicKey(e);return st(Tf.getSharedSecret(fs(re(this,Lu)),bt(n),!1))}static computePublicKey(e,n){let r=bt(e,"key");if(r.length===32){const s=Tf.getPublicKey(r,!!n);return st(s)}if(r.length===64){const s=new Uint8Array(65);s[0]=4,s.set(r,1),r=s}const i=Tf.ProjectivePoint.fromHex(r);return st(i.toRawBytes(n))}static recoverPublicKey(e,n){xe(ey(e)===32,"invalid digest length","digest",e);const r=no.from(n);let i=Tf.Signature.fromCompact(fs(On([r.r,r.s])));i=i.addRecoveryBit(r.yParity);const s=i.recoverPublicKey(fs(e));return xe(s!=null,"invalid signature for digest","signature",n),"0x"+s.toHex(!1)}static addPoints(e,n,r){const i=Tf.ProjectivePoint.fromHex(bp.computePublicKey(e).substring(2)),s=Tf.ProjectivePoint.fromHex(bp.computePublicKey(n).substring(2));return"0x"+i.add(s).toHex(!!r)}};Lu=new WeakMap;let Mc=bp;const dCe=BigInt(0),fCe=BigInt(36);function WV(t){t=t.toLowerCase();const e=t.substring(2).split(""),n=new Uint8Array(40);for(let i=0;i<40;i++)n[i]=e[i].charCodeAt(0);const r=bt(Kn(n));for(let i=0;i<40;i+=2)r[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(r[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const z8={};for(let t=0;t<10;t++)z8[String(t)]=String(t);for(let t=0;t<26;t++)z8[String.fromCharCode(65+t)]=String(10+t);const YV=15;function Aie(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(r=>z8[r]).join("");for(;e.length>=YV;){let r=e.substring(0,YV);e=parseInt(r,10)%97+e.substring(r.length)}let n=String(98-parseInt(e,10)%97);for(;n.length<2;)n="0"+n;return n}const hCe=(function(){const t={};for(let e=0;e<36;e++){const n="0123456789abcdefghijklmnopqrstuvwxyz"[e];t[n]=BigInt(e)}return t})();function pCe(t){t=t.toLowerCase();let e=dCe;for(let n=0;n<t.length;n++)e=e*fCe+hCe[t[n]];return e}function xn(t){if(xe(typeof t=="string","invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/)){t.startsWith("0x")||(t="0x"+t);const e=WV(t);return xe(!t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===t,"bad address checksum","address",t),e}if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){xe(t.substring(2,4)===Aie(t),"bad icap checksum","address",t);let e=pCe(t.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return WV("0x"+e)}xe(!1,"invalid address","address",t)}function q0t(t){let e=BigInt(xn(t)).toString(36).toUpperCase();for(;e.length<30;)e="0"+e;return"XE"+Aie("XE00"+e)+e}function mCe(t){const e=xn(t.from);let r=Nt(t.nonce,"tx.nonce").toString(16);return r==="0"?r="0x":r.length%2?r="0x0"+r:r="0x"+r,xn(mr(Kn(Oc([e,r])),12))}function G0t(t,e,n){const r=xn(t),i=bt(e,"salt"),s=bt(n,"initCodeHash");return xe(i.length===32,"salt must be 32 bytes","salt",e),xe(s.length===32,"initCodeHash must be 32 bytes","initCodeHash",n),xn(mr(Kn(On(["0xff",r,i,s])),12))}function Tie(t){return t&&typeof t.getAddress=="function"}function K0t(t){try{return xn(t),!0}catch{}return!1}async function mR(t,e){const n=await e;return(n==null||n==="0x0000000000000000000000000000000000000000")&&(Ye(typeof t!="string","unconfigured name","UNCONFIGURED_NAME",{value:t}),xe(!1,"invalid AddressLike value; did not resolve to a value address","target",t)),xn(n)}function $i(t,e){if(typeof t=="string")return t.match(/^0x[0-9a-f]{40}$/i)?xn(t):(Ye(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),mR(t,e.resolveName(t)));if(Tie(t))return mR(t,t.getAddress());if(t&&typeof t.then=="function")return mR(t,t);xe(!1,"unsupported addressable value","target",t)}const Nu={};function Ct(t,e){let n=!1;return e<0&&(n=!0,e*=-1),new Bs(Nu,`${n?"":"u"}int${e}`,t,{signed:n,width:e})}function Bn(t,e){return new Bs(Nu,`bytes${e||""}`,t,{size:e})}const JV=Symbol.for("_ethers_typed");var Kp;const Cu=class Cu{constructor(e,n,r,i){Ce(this,"type");Ce(this,"value");Fe(this,Kp);Ce(this,"_typedSymbol");i==null&&(i=null),Eh(Nu,e,"Typed"),Bt(this,{_typedSymbol:JV,type:n,value:r}),ge(this,Kp,i),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return re(this,Kp)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return re(this,Kp)===!0?-1:re(this,Kp)===!1?this.value.length:null}static from(e,n){return new Cu(Nu,e,n)}static uint8(e){return Ct(e,8)}static uint16(e){return Ct(e,16)}static uint24(e){return Ct(e,24)}static uint32(e){return Ct(e,32)}static uint40(e){return Ct(e,40)}static uint48(e){return Ct(e,48)}static uint56(e){return Ct(e,56)}static uint64(e){return Ct(e,64)}static uint72(e){return Ct(e,72)}static uint80(e){return Ct(e,80)}static uint88(e){return Ct(e,88)}static uint96(e){return Ct(e,96)}static uint104(e){return Ct(e,104)}static uint112(e){return Ct(e,112)}static uint120(e){return Ct(e,120)}static uint128(e){return Ct(e,128)}static uint136(e){return Ct(e,136)}static uint144(e){return Ct(e,144)}static uint152(e){return Ct(e,152)}static uint160(e){return Ct(e,160)}static uint168(e){return Ct(e,168)}static uint176(e){return Ct(e,176)}static uint184(e){return Ct(e,184)}static uint192(e){return Ct(e,192)}static uint200(e){return Ct(e,200)}static uint208(e){return Ct(e,208)}static uint216(e){return Ct(e,216)}static uint224(e){return Ct(e,224)}static uint232(e){return Ct(e,232)}static uint240(e){return Ct(e,240)}static uint248(e){return Ct(e,248)}static uint256(e){return Ct(e,256)}static uint(e){return Ct(e,256)}static int8(e){return Ct(e,-8)}static int16(e){return Ct(e,-16)}static int24(e){return Ct(e,-24)}static int32(e){return Ct(e,-32)}static int40(e){return Ct(e,-40)}static int48(e){return Ct(e,-48)}static int56(e){return Ct(e,-56)}static int64(e){return Ct(e,-64)}static int72(e){return Ct(e,-72)}static int80(e){return Ct(e,-80)}static int88(e){return Ct(e,-88)}static int96(e){return Ct(e,-96)}static int104(e){return Ct(e,-104)}static int112(e){return Ct(e,-112)}static int120(e){return Ct(e,-120)}static int128(e){return Ct(e,-128)}static int136(e){return Ct(e,-136)}static int144(e){return Ct(e,-144)}static int152(e){return Ct(e,-152)}static int160(e){return Ct(e,-160)}static int168(e){return Ct(e,-168)}static int176(e){return Ct(e,-176)}static int184(e){return Ct(e,-184)}static int192(e){return Ct(e,-192)}static int200(e){return Ct(e,-200)}static int208(e){return Ct(e,-208)}static int216(e){return Ct(e,-216)}static int224(e){return Ct(e,-224)}static int232(e){return Ct(e,-232)}static int240(e){return Ct(e,-240)}static int248(e){return Ct(e,-248)}static int256(e){return Ct(e,-256)}static int(e){return Ct(e,-256)}static bytes1(e){return Bn(e,1)}static bytes2(e){return Bn(e,2)}static bytes3(e){return Bn(e,3)}static bytes4(e){return Bn(e,4)}static bytes5(e){return Bn(e,5)}static bytes6(e){return Bn(e,6)}static bytes7(e){return Bn(e,7)}static bytes8(e){return Bn(e,8)}static bytes9(e){return Bn(e,9)}static bytes10(e){return Bn(e,10)}static bytes11(e){return Bn(e,11)}static bytes12(e){return Bn(e,12)}static bytes13(e){return Bn(e,13)}static bytes14(e){return Bn(e,14)}static bytes15(e){return Bn(e,15)}static bytes16(e){return Bn(e,16)}static bytes17(e){return Bn(e,17)}static bytes18(e){return Bn(e,18)}static bytes19(e){return Bn(e,19)}static bytes20(e){return Bn(e,20)}static bytes21(e){return Bn(e,21)}static bytes22(e){return Bn(e,22)}static bytes23(e){return Bn(e,23)}static bytes24(e){return Bn(e,24)}static bytes25(e){return Bn(e,25)}static bytes26(e){return Bn(e,26)}static bytes27(e){return Bn(e,27)}static bytes28(e){return Bn(e,28)}static bytes29(e){return Bn(e,29)}static bytes30(e){return Bn(e,30)}static bytes31(e){return Bn(e,31)}static bytes32(e){return Bn(e,32)}static address(e){return new Cu(Nu,"address",e)}static bool(e){return new Cu(Nu,"bool",!!e)}static bytes(e){return new Cu(Nu,"bytes",e)}static string(e){return new Cu(Nu,"string",e)}static array(e,n){throw new Error("not implemented yet")}static tuple(e,n){throw new Error("not implemented yet")}static overrides(e){return new Cu(Nu,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===JV}static dereference(e,n){if(Cu.isTyped(e)){if(e.type!==n)throw new Error(`invalid type: expecetd ${n}, got ${e.type}`);return e.value}return e}};Kp=new WeakMap;let Bs=Cu;class gCe extends Cd{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,n){let r=Bs.dereference(n,"string");try{r=xn(r)}catch(i){return this._throwError(i.message,n)}return e.writeValue(r)}decode(e){return xn(dd(e.readValue(),20))}}class yCe extends Cd{constructor(n){super(n.name,n.type,"_",n.dynamic);Ce(this,"coder");this.coder=n}defaultValue(){return this.coder.defaultValue()}encode(n,r){return this.coder.encode(n,r)}decode(n){return this.coder.decode(n)}}function kie(t,e,n){let r=[];if(Array.isArray(n))r=n;else if(n&&typeof n=="object"){let l={};r=e.map(c=>{const u=c.localName;return Ye(u,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:c},value:n}),Ye(!l[u],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:c},value:n}),l[u]=!0,n[u]})}else xe(!1,"invalid tuple value","tuple",n);xe(e.length===r.length,"types/value length mismatch","tuple",n);let i=new q3,s=new q3,o=[];e.forEach((l,c)=>{let u=r[c];if(l.dynamic){let h=s.length;l.encode(s,u);let m=i.writeUpdatableValue();o.push(g=>{m(g+h)})}else l.encode(i,u)}),o.forEach(l=>{l(i.length)});let a=t.appendWriter(i);return a+=t.appendWriter(s),a}function Nie(t,e){let n=[],r=[],i=t.subReader(0);return e.forEach(s=>{let o=null;if(s.dynamic){let a=t.readIndex(),l=i.subReader(a);try{o=s.decode(l)}catch(c){if(ds(c,"BUFFER_OVERRUN"))throw c;o=c,o.baseType=s.name,o.name=s.localName,o.type=s.type}}else try{o=s.decode(t)}catch(a){if(ds(a,"BUFFER_OVERRUN"))throw a;o=a,o.baseType=s.name,o.name=s.localName,o.type=s.type}if(o==null)throw new Error("investigate");n.push(o),r.push(s.localName||null)}),px.fromItems(n,r)}class xCe extends Cd{constructor(n,r,i){const s=n.type+"["+(r>=0?r:"")+"]",o=r===-1||n.dynamic;super("array",s,i,o);Ce(this,"coder");Ce(this,"length");Bt(this,{coder:n,length:r})}defaultValue(){const n=this.coder.defaultValue(),r=[];for(let i=0;i<this.length;i++)r.push(n);return r}encode(n,r){const i=Bs.dereference(r,"array");Array.isArray(i)||this._throwError("expected array value",i);let s=this.length;s===-1&&(s=i.length,n.writeValue(i.length)),ire(i.length,s,"coder array"+(this.localName?" "+this.localName:""));let o=[];for(let a=0;a<i.length;a++)o.push(this.coder);return kie(n,o,i)}decode(n){let r=this.length;r===-1&&(r=n.readIndex(),Ye(r*Qs<=n.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:n.bytes,offset:r*Qs,length:n.dataLength}));let i=[];for(let s=0;s<r;s++)i.push(new yCe(this.coder));return Nie(n,i)}}class vCe extends Cd{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,n){const r=Bs.dereference(n,"bool");return e.writeValue(r?1:0)}decode(e){return!!e.readValue()}}class Cie extends Cd{constructor(e,n){super(e,e,n,!0)}defaultValue(){return"0x"}encode(e,n){n=fs(n);let r=e.writeValue(n.length);return r+=e.writeBytes(n),r}decode(e){return e.readBytes(e.readIndex(),!0)}}class bCe extends Cie{constructor(e){super("bytes",e)}decode(e){return st(super.decode(e))}}class wCe extends Cd{constructor(n,r){let i="bytes"+String(n);super(i,i,r,!1);Ce(this,"size");Bt(this,{size:n},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(n,r){let i=fs(Bs.dereference(r,this.type));return i.length!==this.size&&this._throwError("incorrect data length",r),n.writeBytes(i)}decode(n){return st(n.readBytes(this.size))}}const ECe=new Uint8Array([]);class SCe extends Cd{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,n){return n!=null&&this._throwError("not null",n),e.writeBytes(ECe)}decode(e){return e.readBytes(0),null}}const ACe=BigInt(0),TCe=BigInt(1),kCe=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class NCe extends Cd{constructor(n,r,i){const s=(r?"int":"uint")+n*8;super(s,s,i,!1);Ce(this,"size");Ce(this,"signed");Bt(this,{size:n,signed:r},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(n,r){let i=Nt(Bs.dereference(r,this.type)),s=Np(kCe,Qs*8);if(this.signed){let o=Np(s,this.size*8-1);(i>o||i<-(o+TCe))&&this._throwError("value out-of-bounds",r),i=lre(i,8*Qs)}else(i<ACe||i>Np(s,this.size*8))&&this._throwError("value out-of-bounds",r);return n.writeValue(i)}decode(n){let r=Np(n.readValue(),this.size*8);return this.signed&&(r=ok(r,this.size*8)),r}}class CCe extends Cie{constructor(e){super("string",e)}defaultValue(){return""}encode(e,n){return super.encode(e,mi(Bs.dereference(n,"string")))}decode(e){return lk(super.decode(e))}}class aA extends Cd{constructor(n,r){let i=!1;const s=[];n.forEach(a=>{a.dynamic&&(i=!0),s.push(a.type)});const o="tuple("+s.join(",")+")";super("tuple",o,r,i);Ce(this,"coders");Bt(this,{coders:Object.freeze(n.slice())})}defaultValue(){const n=[];this.coders.forEach(i=>{n.push(i.defaultValue())});const r=this.coders.reduce((i,s)=>{const o=s.localName;return o&&(i[o]||(i[o]=0),i[o]++),i},{});return this.coders.forEach((i,s)=>{let o=i.localName;!o||r[o]!==1||(o==="length"&&(o="_length"),n[o]==null&&(n[o]=n[s]))}),Object.freeze(n)}encode(n,r){const i=Bs.dereference(r,"tuple");return kie(n,this.coders,i)}decode(n){return Nie(n,this.coders)}}function gR(t,e){return{address:xn(t),storageKeys:e.map((n,r)=>(xe(gr(n,32),"invalid slot",`storageKeys[${r}]`,n),n.toLowerCase()))}}function zm(t){if(Array.isArray(t))return t.map((n,r)=>Array.isArray(n)?(xe(n.length===2,"invalid slot set",`value[${r}]`,n),gR(n[0],n[1])):(xe(n!=null&&typeof n=="object","invalid address-slot set","value",t),gR(n.address,n.storageKeys)));xe(t!=null&&typeof t=="object","invalid access list","value",t);const e=Object.keys(t).map(n=>{const r=t[n].reduce((i,s)=>(i[s]=!0,i),{});return gR(n,Object.keys(r).sort())});return e.sort((n,r)=>n.address.localeCompare(r.address)),e}function Pie(t){return{address:xn(t.address),nonce:Nt(t.nonce!=null?t.nonce:0),chainId:Nt(t.chainId!=null?t.chainId:0),signature:no.from(t.signature)}}function W1(t){let e;return typeof t=="string"?e=Mc.computePublicKey(t,!1):e=t.publicKey,xn(Kn("0x"+e.substring(4)).substring(26))}function kN(t,e){return W1(Mc.recoverPublicKey(t,e))}const Ui=BigInt(0),PCe=BigInt(2),_Ce=BigInt(27),ICe=BigInt(28),RCe=BigInt(35),OCe=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),MCe=Symbol.for("nodejs.util.inspect.custom"),yR=4096*32,xT=128;function LCe(t){return{blobToKzgCommitment:r=>{if("computeBlobProof"in t){if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return bt(t.blobToKzgCommitment(st(r)))}else if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return bt(t.blobToKzgCommitment(r));if("blobToKZGCommitment"in t&&typeof t.blobToKZGCommitment=="function")return bt(t.blobToKZGCommitment(st(r)));xe(!1,"unsupported KZG library","kzg",t)},computeBlobKzgProof:(r,i)=>{if("computeBlobProof"in t&&typeof t.computeBlobProof=="function")return bt(t.computeBlobProof(st(r),st(i)));if("computeBlobKzgProof"in t&&typeof t.computeBlobKzgProof=="function")return t.computeBlobKzgProof(r,i);if("computeBlobKZGProof"in t&&typeof t.computeBlobKZGProof=="function")return bt(t.computeBlobKZGProof(st(r),st(i)));xe(!1,"unsupported KZG library","kzg",t)}}}function XV(t,e){let n=t.toString(16);for(;n.length<2;)n="0"+n;return n+=Qa(e).substring(4),"0x"+n}function Jx(t){return t==="0x"?null:xn(t)}function NN(t,e){try{return zm(t)}catch(n){xe(!1,n.message,e,t)}}function DCe(t,e){try{if(!Array.isArray(t))throw new Error("authorizationList: invalid array");const n=[];for(let r=0;r<t.length;r++){const i=t[r];if(!Array.isArray(i))throw new Error(`authorization[${r}]: invalid array`);if(i.length!==6)throw new Error(`authorization[${r}]: wrong length`);if(!i[1])throw new Error(`authorization[${r}]: null address`);n.push({address:Jx(i[1]),nonce:ir(i[2],"nonce"),chainId:ir(i[0],"chainId"),signature:no.from({yParity:Vm(i[3],"yParity"),r:ud(i[4],32),s:ud(i[5],32)})})}return n}catch(n){xe(!1,n.message,e,t)}}function Vm(t,e){return t==="0x"?0:en(t,e)}function ir(t,e){if(t==="0x")return Ui;const n=Nt(t,e);return xe(n<=OCe,"value exceeds uint size",e,n),n}function _n(t,e){const n=Nt(t,"value"),r=jr(n);return xe(r.length<=32,"value too large",`tx.${e}`,n),r}function CN(t){return zm(t).map(e=>[e.address,e.storageKeys])}function jCe(t){return t.map(e=>[_n(e.chainId,"chainId"),e.address,_n(e.nonce,"nonce"),_n(e.signature.yParity,"yParity"),jr(e.signature.r),jr(e.signature._s)])}function BCe(t,e){xe(Array.isArray(t),`invalid ${e}`,"value",t);for(let n=0;n<t.length;n++)xe(gr(t[n],32),"invalid ${ param } hash",`value[${n}]`,t[n]);return t}function UCe(t){const e=G1(t);xe(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",t);const n={type:0,nonce:Vm(e[0],"nonce"),gasPrice:ir(e[1],"gasPrice"),gasLimit:ir(e[2],"gasLimit"),to:Jx(e[3]),value:ir(e[4],"value"),data:st(e[5]),chainId:Ui};if(e.length===6)return n;const r=ir(e[6],"v"),i=ir(e[7],"r"),s=ir(e[8],"s");if(i===Ui&&s===Ui)n.chainId=r;else{let o=(r-RCe)/PCe;o<Ui&&(o=Ui),n.chainId=o,xe(o!==Ui||r===_Ce||r===ICe,"non-canonical legacy v","v",e[6]),n.signature=no.from({r:ud(e[7],32),s:ud(e[8],32),v:r})}return n}function FCe(t,e){const n=[_n(t.nonce,"nonce"),_n(t.gasPrice||0,"gasPrice"),_n(t.gasLimit,"gasLimit"),t.to||"0x",_n(t.value,"value"),t.data];let r=Ui;if(t.chainId!=Ui)r=Nt(t.chainId,"tx.chainId"),xe(!e||e.networkV==null||e.legacyChainId===r,"tx.chainId/sig.v mismatch","sig",e);else if(t.signature){const s=t.signature.legacyChainId;s!=null&&(r=s)}if(!e)return r!==Ui&&(n.push(jr(r)),n.push("0x"),n.push("0x")),Oc(n);let i=BigInt(27+e.yParity);return r!==Ui?i=no.getChainIdV(r,e.v):BigInt(e.v)!==i&&xe(!1,"tx.chainId/sig.v mismatch","sig",e),n.push(jr(i)),n.push(jr(e.r)),n.push(jr(e._s)),Oc(n)}function PN(t,e){let n;try{if(n=Vm(e[0],"yParity"),n!==0&&n!==1)throw new Error("bad yParity")}catch{xe(!1,"invalid yParity","yParity",e[0])}const r=ud(e[1],32),i=ud(e[2],32),s=no.from({r,s:i,yParity:n});t.signature=s}function $Ce(t){const e=G1(bt(t).slice(1));xe(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",st(t));const n={type:2,chainId:ir(e[0],"chainId"),nonce:Vm(e[1],"nonce"),maxPriorityFeePerGas:ir(e[2],"maxPriorityFeePerGas"),maxFeePerGas:ir(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:ir(e[4],"gasLimit"),to:Jx(e[5]),value:ir(e[6],"value"),data:st(e[7]),accessList:NN(e[8],"accessList")};return e.length===9||PN(n,e.slice(9)),n}function zCe(t,e){const n=[_n(t.chainId,"chainId"),_n(t.nonce,"nonce"),_n(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),_n(t.maxFeePerGas||0,"maxFeePerGas"),_n(t.gasLimit,"gasLimit"),t.to||"0x",_n(t.value,"value"),t.data,CN(t.accessList||[])];return e&&(n.push(_n(e.yParity,"yParity")),n.push(jr(e.r)),n.push(jr(e.s))),On(["0x02",Oc(n)])}function VCe(t){const e=G1(bt(t).slice(1));xe(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",st(t));const n={type:1,chainId:ir(e[0],"chainId"),nonce:Vm(e[1],"nonce"),gasPrice:ir(e[2],"gasPrice"),gasLimit:ir(e[3],"gasLimit"),to:Jx(e[4]),value:ir(e[5],"value"),data:st(e[6]),accessList:NN(e[7],"accessList")};return e.length===8||PN(n,e.slice(8)),n}function HCe(t,e){const n=[_n(t.chainId,"chainId"),_n(t.nonce,"nonce"),_n(t.gasPrice||0,"gasPrice"),_n(t.gasLimit,"gasLimit"),t.to||"0x",_n(t.value,"value"),t.data,CN(t.accessList||[])];return e&&(n.push(_n(e.yParity,"recoveryParam")),n.push(jr(e.r)),n.push(jr(e.s))),On(["0x01",Oc(n)])}function qCe(t){let e=G1(bt(t).slice(1)),n="3",r=null,i=null;if(e.length===4&&Array.isArray(e[0])){n="3 (network format)";const o=e[1],a=e[2],l=e[3];xe(Array.isArray(o),"invalid network format: blobs not an array","fields[1]",o),xe(Array.isArray(a),"invalid network format: commitments not an array","fields[2]",a),xe(Array.isArray(l),"invalid network format: proofs not an array","fields[3]",l),xe(o.length===a.length,"invalid network format: blobs/commitments length mismatch","fields",e),xe(o.length===l.length,"invalid network format: blobs/proofs length mismatch","fields",e),i=[];for(let c=0;c<e[1].length;c++)i.push({data:o[c],commitment:a[c],proof:l[c]});e=e[0]}else if(e.length===5&&Array.isArray(e[0])){n="3 (EIP-7594 network format)",r=en(e[1]);const o=e[2],a=e[3],l=e[4];xe(r===1,`unsupported EIP-7594 network format version: ${r}`,"fields[1]",r),xe(Array.isArray(o),"invalid EIP-7594 network format: blobs not an array","fields[2]",o),xe(Array.isArray(a),"invalid EIP-7594 network format: commitments not an array","fields[3]",a),xe(Array.isArray(l),"invalid EIP-7594 network format: proofs not an array","fields[4]",l),xe(o.length===a.length,"invalid network format: blobs/commitments length mismatch","fields",e),xe(o.length*xT===l.length,"invalid network format: blobs/proofs length mismatch","fields",e),i=[];for(let c=0;c<o.length;c++){const u=[];for(let h=0;h<xT;h++)u.push(l[c*xT+h]);i.push({data:o[c],commitment:a[c],proof:On(u)})}e=e[0]}xe(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${n}`,"data",st(t));const s={type:3,chainId:ir(e[0],"chainId"),nonce:Vm(e[1],"nonce"),maxPriorityFeePerGas:ir(e[2],"maxPriorityFeePerGas"),maxFeePerGas:ir(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:ir(e[4],"gasLimit"),to:Jx(e[5]),value:ir(e[6],"value"),data:st(e[7]),accessList:NN(e[8],"accessList"),maxFeePerBlobGas:ir(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10],blobWrapperVersion:r};i&&(s.blobs=i),xe(s.to!=null,`invalid address for transaction type: ${n}`,"data",t),xe(Array.isArray(s.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",t);for(let o=0;o<s.blobVersionedHashes.length;o++)xe(gr(s.blobVersionedHashes[o],32),`invalid blobVersionedHash at index ${o}: must be length 32`,"data",t);return e.length===11||PN(s,e.slice(11)),s}function GCe(t,e,n){const r=[_n(t.chainId,"chainId"),_n(t.nonce,"nonce"),_n(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),_n(t.maxFeePerGas||0,"maxFeePerGas"),_n(t.gasLimit,"gasLimit"),t.to||Lw,_n(t.value,"value"),t.data,CN(t.accessList||[]),_n(t.maxFeePerBlobGas||0,"maxFeePerBlobGas"),BCe(t.blobVersionedHashes||[],"blobVersionedHashes")];if(e&&(r.push(_n(e.yParity,"yParity")),r.push(jr(e.r)),r.push(jr(e.s)),n)){if(t.blobWrapperVersion!=null){const i=jr(t.blobWrapperVersion),s=[];for(const{proof:o}of n){const a=bt(o),l=a.length/xT;for(let c=0;c<a.length;c+=l)s.push(a.subarray(c,c+l))}return On(["0x03",Oc([r,i,n.map(o=>o.data),n.map(o=>o.commitment),s])])}return On(["0x03",Oc([r,n.map(i=>i.data),n.map(i=>i.commitment),n.map(i=>i.proof)])])}return On(["0x03",Oc(r)])}function KCe(t){const e=G1(bt(t).slice(1));xe(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",st(t));const n={type:4,chainId:ir(e[0],"chainId"),nonce:Vm(e[1],"nonce"),maxPriorityFeePerGas:ir(e[2],"maxPriorityFeePerGas"),maxFeePerGas:ir(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:ir(e[4],"gasLimit"),to:Jx(e[5]),value:ir(e[6],"value"),data:st(e[7]),accessList:NN(e[8],"accessList"),authorizationList:DCe(e[9],"authorizationList")};return e.length===10||PN(n,e.slice(10)),n}function WCe(t,e){const n=[_n(t.chainId,"chainId"),_n(t.nonce,"nonce"),_n(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),_n(t.maxFeePerGas||0,"maxFeePerGas"),_n(t.gasLimit,"gasLimit"),t.to||"0x",_n(t.value,"value"),t.data,CN(t.accessList||[]),jCe(t.authorizationList||[])];return e&&(n.push(_n(e.yParity,"yParity")),n.push(jr(e.r)),n.push(jr(e.s))),On(["0x04",Oc(n)])}var Sl,Iy,Ry,Oy,My,Ly,Dy,jy,By,Uy,Fy,$y,Wp,Uf,pc,Ff,zy,Vy,Hy,vT,Wo;let V8=(Wo=class{constructor(){Fe(this,Hy);Fe(this,Sl);Fe(this,Iy);Fe(this,Ry);Fe(this,Oy);Fe(this,My);Fe(this,Ly);Fe(this,Dy);Fe(this,jy);Fe(this,By);Fe(this,Uy);Fe(this,Fy);Fe(this,$y);Fe(this,Wp);Fe(this,Uf);Fe(this,pc);Fe(this,Ff);Fe(this,zy);Fe(this,Vy);ge(this,Sl,null),ge(this,Iy,null),ge(this,Oy,0),ge(this,My,Ui),ge(this,Ly,null),ge(this,Dy,null),ge(this,jy,null),ge(this,Ry,"0x"),ge(this,By,Ui),ge(this,Uy,Ui),ge(this,Fy,null),ge(this,$y,null),ge(this,Wp,null),ge(this,Uf,null),ge(this,pc,null),ge(this,Ff,null),ge(this,zy,null),ge(this,Vy,null)}get type(){return re(this,Sl)}set type(e){switch(e){case null:ge(this,Sl,null);break;case 0:case"legacy":ge(this,Sl,0);break;case 1:case"berlin":case"eip-2930":ge(this,Sl,1);break;case 2:case"london":case"eip-1559":ge(this,Sl,2);break;case 3:case"cancun":case"eip-4844":ge(this,Sl,3);break;case 4:case"pectra":case"eip-7702":ge(this,Sl,4);break;default:xe(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=re(this,Iy);return e==null&&this.type===3?Lw:e}set to(e){ge(this,Iy,e==null?null:xn(e))}get nonce(){return re(this,Oy)}set nonce(e){ge(this,Oy,en(e,"value"))}get gasLimit(){return re(this,My)}set gasLimit(e){ge(this,My,Nt(e))}get gasPrice(){const e=re(this,Ly);return e==null&&(this.type===0||this.type===1)?Ui:e}set gasPrice(e){ge(this,Ly,e==null?null:Nt(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=re(this,Dy);return e??(this.type===2||this.type===3?Ui:null)}set maxPriorityFeePerGas(e){ge(this,Dy,e==null?null:Nt(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=re(this,jy);return e??(this.type===2||this.type===3?Ui:null)}set maxFeePerGas(e){ge(this,jy,e==null?null:Nt(e,"maxFeePerGas"))}get data(){return re(this,Ry)}set data(e){ge(this,Ry,st(e))}get value(){return re(this,By)}set value(e){ge(this,By,Nt(e,"value"))}get chainId(){return re(this,Uy)}set chainId(e){ge(this,Uy,Nt(e))}get signature(){return re(this,Fy)||null}set signature(e){ge(this,Fy,e==null?null:no.from(e))}isValid(){const e=this.signature;if(e&&!e.isValid())return!1;const n=this.authorizationList;if(n){for(const r of n)if(!r.signature.isValid())return!1}return!0}get accessList(){const e=re(this,$y)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){ge(this,$y,e==null?null:zm(e))}get authorizationList(){const e=re(this,zy)||null;return e==null&&this.type===4?[]:e}set authorizationList(e){ge(this,zy,e==null?null:e.map(n=>Pie(n)))}get maxFeePerBlobGas(){const e=re(this,Wp);return e==null&&this.type===3?Ui:e}set maxFeePerBlobGas(e){ge(this,Wp,e==null?null:Nt(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=re(this,Uf);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){xe(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let n=0;n<e.length;n++)xe(gr(e[n],32),"invalid blobVersionedHash",`value[${n}]`,e[n])}ge(this,Uf,e)}get blobs(){return re(this,Ff)==null?null:re(this,Ff).map(e=>Object.assign({},e))}set blobs(e){if(e==null){ge(this,Ff,null);return}const n=[],r=[];for(let i=0;i<e.length;i++){const s=e[i];if(bN(s)){Ye(re(this,pc),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=bt(s);if(xe(o.length<=yR,"blob is too large",`blobs[${i}]`,s),o.length!==yR){const c=new Uint8Array(yR);c.set(o),o=c}const a=re(this,pc).blobToKzgCommitment(o),l=st(re(this,pc).computeBlobKzgProof(o,a));n.push({data:st(o),commitment:st(a),proof:l}),r.push(XV(1,a))}else{const o=st(s.data),a=st(s.commitment),l=st(s.proof);n.push({data:o,commitment:a,proof:l}),r.push(XV(1,a))}}ge(this,Ff,n),ge(this,Uf,r)}get kzg(){return re(this,pc)}set kzg(e){e==null?ge(this,pc,null):ge(this,pc,LCe(e))}get blobWrapperVersion(){return re(this,Vy)}set blobWrapperVersion(e){ge(this,Vy,e)}get hash(){return this.signature==null?null:Kn(nt(this,Hy,vT).call(this,!0,!1))}get unsignedHash(){return Kn(this.unsignedSerialized)}get from(){return this.signature==null?null:kN(this.unsignedHash,this.signature.getCanonical())}get fromPublicKey(){return this.signature==null?null:Mc.recoverPublicKey(this.unsignedHash,this.signature.getCanonical())}isSigned(){return this.signature!=null}get serialized(){return nt(this,Hy,vT).call(this,!0,!0)}get unsignedSerialized(){return nt(this,Hy,vT).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,n=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,r=this.accessList!=null,i=re(this,Wp)!=null||re(this,Uf);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&Ye(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),Ye(!n||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),Ye(this.type!==0||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const s=[];return this.type!=null?s.push(this.type):this.authorizationList&&this.authorizationList.length?s.push(4):n?s.push(2):e?(s.push(1),r||s.push(0)):r?(s.push(1),s.push(2)):(i&&this.to||(s.push(0),s.push(1),s.push(2)),s.push(3)),s.sort(),s}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return Wo.from(this)}toJSON(){const e=n=>n==null?null:n.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}[MCe](){return this.toString()}toString(){const e=[],n=i=>{let s=this[i];typeof s=="string"&&(s=JSON.stringify(s)),e.push(`${i}: ${s}`)};this.type&&n("type"),n("to"),n("data"),n("nonce"),n("gasLimit"),n("value"),this.chainId!=null&&n("chainId"),this.signature&&(n("from"),e.push(`signature: ${this.signature.toString()}`));const r=this.authorizationList;if(r){const i=[];for(const s of r){const o=[];o.push(`address: ${JSON.stringify(s.address)}`),s.nonce!=null&&o.push(`nonce: ${s.nonce}`),s.chainId!=null&&o.push(`chainId: ${s.chainId}`),s.signature&&o.push(`signature: ${s.signature.toString()}`),i.push(`Authorization { ${o.join(", ")} }`)}e.push(`authorizations: [ ${i.join(", ")} ]`)}return`Transaction { ${e.join(", ")} }`}static from(e){if(e==null)return new Wo;if(typeof e=="string"){const r=bt(e);if(r[0]>=127)return Wo.from(UCe(r));switch(r[0]){case 1:return Wo.from(VCe(r));case 2:return Wo.from($Ce(r));case 3:return Wo.from(qCe(r));case 4:return Wo.from(KCe(r))}Ye(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const n=new Wo;return e.type!=null&&(n.type=e.type),e.to!=null&&(n.to=e.to),e.nonce!=null&&(n.nonce=e.nonce),e.gasLimit!=null&&(n.gasLimit=e.gasLimit),e.gasPrice!=null&&(n.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(n.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(n.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(n.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(n.data=e.data),e.value!=null&&(n.value=e.value),e.chainId!=null&&(n.chainId=e.chainId),e.signature!=null&&(n.signature=no.from(e.signature)),e.accessList!=null&&(n.accessList=e.accessList),e.authorizationList!=null&&(n.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(n.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(n.kzg=e.kzg),e.blobWrapperVersion!=null&&(n.blobWrapperVersion=e.blobWrapperVersion),e.blobs!=null&&(n.blobs=e.blobs),e.hash!=null&&(xe(n.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),xe(n.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(xe(n.isSigned(),"unsigned transaction cannot define '.from'","tx",e),xe(n.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),n}},Sl=new WeakMap,Iy=new WeakMap,Ry=new WeakMap,Oy=new WeakMap,My=new WeakMap,Ly=new WeakMap,Dy=new WeakMap,jy=new WeakMap,By=new WeakMap,Uy=new WeakMap,Fy=new WeakMap,$y=new WeakMap,Wp=new WeakMap,Uf=new WeakMap,pc=new WeakMap,Ff=new WeakMap,zy=new WeakMap,Vy=new WeakMap,Hy=new WeakSet,vT=function(e,n){Ye(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const r=e?this.signature:null;switch(this.inferType()){case 0:return FCe(this,r);case 1:return HCe(this,r);case 2:return zCe(this,r);case 3:return GCe(this,r,n?this.blobs:null);case 4:return WCe(this,r)}Ye(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})},Wo);function _ie(t){return xe(typeof t.address=="string","invalid address for hashAuthorization","auth.address",t),Kn(On(["0x05",Oc([t.chainId!=null?jr(t.chainId):"0x",xn(t.address),t.nonce!=null?jr(t.nonce):"0x"])]))}function W0t(t,e){return kN(_ie(t),e)}function hd(t){return Kn(mi(t))}var YCe="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const QV=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),ZV=4;function JCe(t){let e=0;function n(){return t[e++]<<8|t[e++]}let r=n(),i=1,s=[0,1];for(let D=1;D<r;D++)s.push(i+=n());let o=n(),a=e;e+=o;let l=0,c=0;function u(){return l==0&&(c=c<<8|t[e++],l=8),c>>--l&1}const h=31,m=2**h,g=m>>>1,y=g>>1,v=m-1;let b=0;for(let D=0;D<h;D++)b=b<<1|u();let w=[],k=0,N=m;for(;;){let D=Math.floor(((b-k+1)*i-1)/N),O=0,B=r;for(;B-O>1;){let $=O+B>>>1;D<s[$]?B=$:O=$}if(O==0)break;w.push(O);let z=k+Math.floor(N*s[O]/i),U=k+Math.floor(N*s[O+1]/i)-1;for(;((z^U)&g)==0;)b=b<<1&v|u(),z=z<<1&v,U=U<<1&v|1;for(;z&~U&y;)b=b&g|b<<1&v>>>1|u(),z=z<<1^g,U=(U^g)<<1|g|1;k=z,N=1+U-z}let R=r-4;return w.map(D=>{switch(D-R){case 3:return R+65792+(t[a++]<<16|t[a++]<<8|t[a++]);case 2:return R+256+(t[a++]<<8|t[a++]);case 1:return R+t[a++];default:return D-1}})}function XCe(t){let e=0;return()=>t[e++]}function Iie(t){return XCe(JCe(QCe(t)))}function QCe(t){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((i,s)=>e[i.charCodeAt(0)]=s);let n=t.length,r=new Uint8Array(6*n>>3);for(let i=0,s=0,o=0,a=0;i<n;i++)a=a<<6|e[t.charCodeAt(i)],o+=6,o>=8&&(r[s++]=a>>(o-=8));return r}function ZCe(t){return t&1?~t>>1:t>>1}function ePe(t,e){let n=Array(t);for(let r=0,i=0;r<t;r++)n[r]=i+=ZCe(e());return n}function Dw(t,e=0){let n=[];for(;;){let r=t(),i=t();if(!i)break;e+=r;for(let s=0;s<i;s++)n.push(e+s);e+=i+1}return n}function Rie(t){return jw(()=>{let e=Dw(t);if(e.length)return e})}function Oie(t){let e=[];for(;;){let n=t();if(n==0)break;e.push(tPe(n,t))}for(;;){let n=t()-1;if(n<0)break;e.push(nPe(n,t))}return e.flat()}function jw(t){let e=[];for(;;){let n=t(e.length);if(!n)break;e.push(n)}return e}function Mie(t,e,n){let r=Array(t).fill().map(()=>[]);for(let i=0;i<e;i++)ePe(t,n).forEach((s,o)=>r[o].push(s));return r}function tPe(t,e){let n=1+e(),r=e(),i=jw(e);return Mie(i.length,1+t,e).flatMap((o,a)=>{let[l,...c]=o;return Array(i[a]).fill().map((u,h)=>{let m=h*r;return[l+h*n,c.map(g=>g+m)]})})}function nPe(t,e){let n=1+e();return Mie(n,1+t,e).map(i=>[i[0],i.slice(1)])}function rPe(t){let e=[],n=Dw(t);return i(r([]),[]),e;function r(s){let o=t(),a=jw(()=>{let l=Dw(t).map(c=>n[c]);if(l.length)return r(l)});return{S:o,B:a,Q:s}}function i({S:s,B:o},a,l){if(!(s&4&&l===a[a.length-1])){s&2&&(l=a[a.length-1]),s&1&&e.push(a);for(let c of o)for(let u of c.Q)i(c,[...a,u],l)}}}function iPe(t){return t.toString(16).toUpperCase().padStart(2,"0")}function Lie(t){return`{${iPe(t)}}`}function sPe(t){let e=[];for(let n=0,r=t.length;n<r;){let i=t.codePointAt(n);n+=i<65536?1:2,e.push(i)}return e}function bx(t){let n=t.length;if(n<4096)return String.fromCodePoint(...t);let r=[];for(let i=0;i<n;)r.push(String.fromCodePoint(...t.slice(i,i+=4096)));return r.join("")}function oPe(t,e){let n=t.length,r=n-e.length;for(let i=0;r==0&&i<n;i++)r=t[i]-e[i];return r}var aPe="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const Bw=44032,uk=4352,dk=4449,fk=4519,Die=19,jie=21,wx=28,hk=jie*wx,lPe=Die*hk,cPe=Bw+lPe,uPe=uk+Die,dPe=dk+jie,fPe=fk+wx;function qb(t){return t>>24&255}function Bie(t){return t&16777215}let eM,eH,tM,bT;function hPe(){let t=Iie(aPe);eM=new Map(Rie(t).flatMap((e,n)=>e.map(r=>[r,n+1<<24]))),eH=new Set(Dw(t)),tM=new Map,bT=new Map;for(let[e,n]of Oie(t)){if(!eH.has(e)&&n.length==2){let[r,i]=n,s=bT.get(r);s||(s=new Map,bT.set(r,s)),s.set(i,e)}tM.set(e,n.reverse())}}function Uie(t){return t>=Bw&&t<cPe}function pPe(t,e){if(t>=uk&&t<uPe&&e>=dk&&e<dPe)return Bw+(t-uk)*hk+(e-dk)*wx;if(Uie(t)&&e>fk&&e<fPe&&(t-Bw)%wx==0)return t+(e-fk);{let n=bT.get(t);return n&&(n=n.get(e),n)?n:-1}}function Fie(t){eM||hPe();let e=[],n=[],r=!1;function i(s){let o=eM.get(s);o&&(r=!0,s|=o),e.push(s)}for(let s of t)for(;;){if(s<128)e.push(s);else if(Uie(s)){let o=s-Bw,a=o/hk|0,l=o%hk/wx|0,c=o%wx;i(uk+a),i(dk+l),c>0&&i(fk+c)}else{let o=tM.get(s);o?n.push(...o):i(s)}if(!n.length)break;s=n.pop()}if(r&&e.length>1){let s=qb(e[0]);for(let o=1;o<e.length;o++){let a=qb(e[o]);if(a==0||s<=a){s=a;continue}let l=o-1;for(;;){let c=e[l+1];if(e[l+1]=e[l],e[l]=c,!l||(s=qb(e[--l]),s<=a))break}s=qb(e[o])}}return e}function mPe(t){let e=[],n=[],r=-1,i=0;for(let s of t){let o=qb(s),a=Bie(s);if(r==-1)o==0?r=a:e.push(a);else if(i>0&&i>=o)o==0?(e.push(r,...n),n.length=0,r=a):n.push(a),i=o;else{let l=pPe(r,a);l>=0?r=l:i==0&&o==0?(e.push(r),r=a):(n.push(a),i=o)}}return r>=0&&e.push(r,...n),e}function $ie(t){return Fie(t).map(Bie)}function gPe(t){return mPe(Fie(t))}const tH=45,zie=".",Vie=65039,Hie=1,pk=t=>Array.from(t);function Uw(t,e){return t.P.has(e)||t.Q.has(e)}class yPe extends Array{get is_emoji(){return!0}}let nM,qie,Pp,rM,Gie,ry,xR,bg,up,nH,iM;function H8(){if(nM)return;let t=Iie(YCe);const e=()=>Dw(t),n=()=>new Set(e()),r=(u,h)=>h.forEach(m=>u.add(m));nM=new Map(Oie(t)),qie=n(),Pp=e(),rM=new Set(e().map(u=>Pp[u])),Pp=new Set(Pp),Gie=n(),n();let i=Rie(t),s=t();const o=()=>{let u=new Set;return e().forEach(h=>r(u,i[h])),r(u,e()),u};ry=jw(u=>{let h=jw(t).map(m=>m+96);if(h.length){let m=u>=s;h[0]-=32,h=bx(h),m&&(h=`Restricted[${h}]`);let g=o(),y=o(),v=!t();return{N:h,P:g,Q:y,M:v,R:m}}}),xR=n(),bg=new Map;let a=e().concat(pk(xR)).sort((u,h)=>u-h);a.forEach((u,h)=>{let m=t(),g=a[h]=m?a[h-m]:{V:[],M:new Map};g.V.push(u),xR.has(u)||bg.set(u,g)});for(let{V:u,M:h}of new Set(bg.values())){let m=[];for(let y of u){let v=ry.filter(w=>Uw(w,y)),b=m.find(({G:w})=>v.some(k=>w.has(k)));b||(b={G:new Set,V:[]},m.push(b)),b.V.push(y),r(b.G,v)}let g=m.flatMap(y=>pk(y.G));for(let{G:y,V:v}of m){let b=new Set(g.filter(w=>!y.has(w)));for(let w of v)h.set(w,b)}}up=new Set;let l=new Set;const c=u=>up.has(u)?l.add(u):up.add(u);for(let u of ry){for(let h of u.P)c(h);for(let h of u.Q)c(h)}for(let u of up)!bg.has(u)&&!l.has(u)&&bg.set(u,Hie);r(up,$ie(up)),nH=rPe(t).map(u=>yPe.from(u)).sort(oPe),iM=new Map;for(let u of nH){let h=[iM];for(let m of u){let g=h.map(y=>{let v=y.get(m);return v||(v=new Map,y.set(m,v)),v});m===Vie?h.push(...g):h=g}for(let m of h)m.V=u}}function q8(t){return(Kie(t)?"":`${G8(_N([t]))} `)+Lie(t)}function G8(t){return`"${t}"`}function xPe(t){if(t.length>=4&&t[2]==tH&&t[3]==tH)throw new Error(`invalid label extension: "${bx(t.slice(0,4))}"`)}function vPe(t){for(let n=t.lastIndexOf(95);n>0;)if(t[--n]!==95)throw new Error("underscore allowed only at start")}function bPe(t){let e=t[0],n=QV.get(e);if(n)throw dw(`leading ${n}`);let r=t.length,i=-1;for(let s=1;s<r;s++){e=t[s];let o=QV.get(e);if(o){if(i==s)throw dw(`${n} + ${o}`);i=s+1,n=o}}if(i==r)throw dw(`trailing ${n}`)}function _N(t,e=1/0,n=Lie){let r=[];wPe(t[0])&&r.push(""),t.length>e&&(e>>=1,t=[...t.slice(0,e),8230,...t.slice(-e)]);let i=0,s=t.length;for(let o=0;o<s;o++){let a=t[o];Kie(a)&&(r.push(bx(t.slice(i,o))),r.push(n(a)),i=o+1)}return r.push(bx(t.slice(i,s))),r.join("")}function wPe(t){return H8(),Pp.has(t)}function Kie(t){return H8(),Gie.has(t)}function EPe(t){return kPe(SPe(t,gPe,PPe))}function SPe(t,e,n){if(!t)return[];H8();let r=0;return t.split(zie).map(i=>{let s=sPe(i),o={input:s,offset:r};r+=s.length+1;try{let a=o.tokens=CPe(s,e,n),l=a.length,c;if(!l)throw new Error("empty label");let u=o.output=a.flat();if(vPe(u),!(o.emoji=l>1||a[0].is_emoji)&&u.every(m=>m<128))xPe(u),c="ASCII";else{let m=a.flatMap(g=>g.is_emoji?[]:g);if(!m.length)c="Emoji";else{if(Pp.has(u[0]))throw dw("leading combining mark");for(let v=1;v<l;v++){let b=a[v];if(!b.is_emoji&&Pp.has(b[0]))throw dw(`emoji + combining mark: "${bx(a[v-1])} + ${_N([b[0]])}"`)}bPe(u);let g=pk(new Set(m)),[y]=TPe(g);NPe(y,m),APe(y,g),c=y.N}}o.type=c}catch(a){o.error=a}return o})}function APe(t,e){let n,r=[];for(let i of e){let s=bg.get(i);if(s===Hie)return;if(s){let o=s.M.get(i);if(n=n?n.filter(a=>o.has(a)):pk(o),!n.length)return}else r.push(i)}if(n){for(let i of n)if(r.every(s=>Uw(i,s)))throw new Error(`whole-script confusable: ${t.N}/${i.N}`)}}function TPe(t){let e=ry;for(let n of t){let r=e.filter(i=>Uw(i,n));if(!r.length)throw ry.some(i=>Uw(i,n))?Yie(e[0],n):Wie(n);if(e=r,r.length==1)break}return e}function kPe(t){return t.map(({input:e,error:n,output:r})=>{if(n){let i=n.message;throw new Error(t.length==1?i:`Invalid label ${G8(_N(e,63))}: ${i}`)}return bx(r)}).join(zie)}function Wie(t){return new Error(`disallowed character: ${q8(t)}`)}function Yie(t,e){let n=q8(e),r=ry.find(i=>i.P.has(e));return r&&(n=`${r.N} ${n}`),new Error(`illegal mixture: ${t.N} + ${n}`)}function dw(t){return new Error(`illegal placement: ${t}`)}function NPe(t,e){for(let n of e)if(!Uw(t,n))throw Yie(t,n);if(t.M){let n=$ie(e);for(let r=1,i=n.length;r<i;r++)if(rM.has(n[r])){let s=r+1;for(let o;s<i&&rM.has(o=n[s]);s++)for(let a=r;a<s;a++)if(n[a]==o)throw new Error(`duplicate non-spacing marks: ${q8(o)}`);if(s-r>ZV)throw new Error(`excessive non-spacing marks: ${G8(_N(n.slice(r-1,s)))} (${s-r}/${ZV})`);r=s}}}function CPe(t,e,n){let r=[],i=[];for(t=t.slice().reverse();t.length;){let s=_Pe(t);if(s)i.length&&(r.push(e(i)),i=[]),r.push(n(s));else{let o=t.pop();if(up.has(o))i.push(o);else{let a=nM.get(o);if(a)i.push(...a);else if(!qie.has(o))throw Wie(o)}}}return i.length&&r.push(e(i)),r}function PPe(t){return t.filter(e=>e!=Vie)}function _Pe(t,e){let n=iM,r,i=t.length;for(;i&&(n=n.get(t[--i]),!!n);){let{V:s}=n;s&&(r=s,t.length=i)}return r}const Jie=new Uint8Array(32);Jie.fill(0);function rH(t){return xe(t.length!==0,"invalid ENS name; empty component","comp",t),t}function K8(t){const e=mi(IPe(t)),n=[];if(t.length===0)return n;let r=0;for(let i=0;i<e.length;i++)e[i]===46&&(n.push(rH(e.slice(r,i))),r=i+1);return xe(r<e.length,"invalid ENS name; empty component","name",t),n.push(rH(e.slice(r))),n}function IPe(t){try{if(t.length===0)throw new Error("empty label");return EPe(t)}catch(e){xe(!1,`invalid ENS name (${e.message})`,"name",t)}}function Y0t(t){try{return K8(t).length!==0}catch{}return!1}function sM(t){xe(typeof t=="string","invalid ENS name; not a string","name",t),xe(t.length,"invalid ENS name (empty label)","name",t);let e=Jie;const n=K8(t);for(;n.length;)e=Kn(On([e,Kn(n.pop())]));return st(e)}function RPe(t,e){const n=e??63;return xe(n<=255,"DNS encoded label cannot exceed 255","length",n),st(On(K8(t).map(r=>{xe(r.length<=n,`label ${JSON.stringify(t)} exceeds ${n} bytes`,"name",t);const i=new Uint8Array(r.length+1);return i.set(r,1),i[0]=i.length-1,i})))+"00"}function Xie(t){return typeof t=="string"&&(t=mi(t)),Kn(On([mi(lCe),mi(String(t.length)),t]))}function J0t(t,e){const n=Xie(t);return kN(n,e)}const Qie=new Uint8Array(32);Qie.fill(0);const OPe=BigInt(-1),Zie=BigInt(0),ese=BigInt(1),MPe=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function LPe(t){const e=bt(t),n=e.length%32;return n?On([e,Qie.slice(n)]):st(e)}const DPe=dd(ese,32),jPe=dd(Zie,32),iH={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},vR=["name","version","chainId","verifyingContract","salt"];function sH(t){return function(e){return xe(typeof e=="string",`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const BPe={name:sH("name"),version:sH("version"),chainId:function(t){const e=Nt(t,"domain.chainId");return xe(e>=0,"invalid chain ID","domain.chainId",t),Number.isSafeInteger(e)?Number(e):Pl(e)},verifyingContract:function(t){try{return xn(t).toLowerCase()}catch{}xe(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){const e=bt(t,"domain.salt");return xe(e.length===32,'invalid domain value "salt"',"domain.salt",t),st(e)}};function bR(t){{const e=t.match(/^(u?)int(\d+)$/);if(e){const n=e[1]==="",r=parseInt(e[2]);xe(r%8===0&&r!==0&&r<=256&&e[2]===String(r),"invalid numeric width","type",t);const i=Np(MPe,n?r-1:r),s=n?(i+ese)*OPe:Zie;return function(o){const a=Nt(o,"value");return xe(a>=s&&a<=i,`value out-of-bounds for ${t}`,"value",a),dd(n?lre(a,256):a,32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const n=parseInt(e[1]);return xe(n!==0&&n<=32&&e[1]===String(n),"invalid bytes width","type",t),function(r){const i=bt(r);return xe(i.length===n,`invalid length for ${t}`,"value",r),LPe(r)}}}switch(t){case"address":return function(e){return ud(xn(e),32)};case"bool":return function(e){return e?DPe:jPe};case"bytes":return function(e){return Kn(e)};case"string":return function(e){return hd(e)}}return null}function oH(t,e){return`${t}(${e.map(({name:n,type:r})=>r+" "+n).join(",")})`}function lA(t){const e=t.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:t}}var S1,Du,qy,nN,tse;const Oa=class Oa{constructor(e){Fe(this,nN);Ce(this,"primaryType");Fe(this,S1);Fe(this,Du);Fe(this,qy);ge(this,Du,new Map),ge(this,qy,new Map);const n=new Map,r=new Map,i=new Map,s={};Object.keys(e).forEach(l=>{s[l]=e[l].map(({name:c,type:u})=>{let{base:h,index:m}=lA(u);return h==="int"&&!e.int&&(h="int256"),h==="uint"&&!e.uint&&(h="uint256"),{name:c,type:h+(m||"")}}),n.set(l,new Set),r.set(l,[]),i.set(l,new Set)}),ge(this,S1,JSON.stringify(s));for(const l in s){const c=new Set;for(const u of s[l]){xe(!c.has(u.name),`duplicate variable name ${JSON.stringify(u.name)} in ${JSON.stringify(l)}`,"types",e),c.add(u.name);const h=lA(u.type).base;xe(h!==l,`circular type reference to ${JSON.stringify(h)}`,"types",e),!bR(h)&&(xe(r.has(h),`unknown type ${JSON.stringify(h)}`,"types",e),r.get(h).push(l),n.get(l).add(h))}}const o=Array.from(r.keys()).filter(l=>r.get(l).length===0);xe(o.length!==0,"missing primary type","types",e),xe(o.length===1,`ambiguous primary types or unused types: ${o.map(l=>JSON.stringify(l)).join(", ")}`,"types",e),Bt(this,{primaryType:o[0]});function a(l,c){xe(!c.has(l),`circular type reference to ${JSON.stringify(l)}`,"types",e),c.add(l);for(const u of n.get(l))if(r.has(u)){a(u,c);for(const h of c)i.get(h).add(u)}c.delete(l)}a(this.primaryType,new Set);for(const[l,c]of i){const u=Array.from(c);u.sort(),re(this,Du).set(l,oH(l,s[l])+u.map(h=>oH(h,s[h])).join(""))}}get types(){return JSON.parse(re(this,S1))}getEncoder(e){let n=re(this,qy).get(e);return n||(n=nt(this,nN,tse).call(this,e),re(this,qy).set(e,n)),n}encodeType(e){const n=re(this,Du).get(e);return xe(n,`unknown type: ${JSON.stringify(e)}`,"name",e),n}encodeData(e,n){return this.getEncoder(e)(n)}hashStruct(e,n){return Kn(this.encodeData(e,n))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,n,r){if(bR(e))return r(e,n);const i=lA(e).array;if(i)return xe(i.count===-1||i.count===n.length,`array length mismatch; expected length ${i.count}`,"value",n),n.map(o=>this._visit(i.prefix,o,r));const s=this.types[e];if(s)return s.reduce((o,{name:a,type:l})=>(o[a]=this._visit(l,n[a],r),o),{});xe(!1,`unknown type: ${e}`,"type",e)}visit(e,n){return this._visit(this.primaryType,e,n)}static from(e){return new Oa(e)}static getPrimaryType(e){return Oa.from(e).primaryType}static hashStruct(e,n,r){return Oa.from(n).hashStruct(e,r)}static hashDomain(e){const n=[];for(const r in e){if(e[r]==null)continue;const i=iH[r];xe(i,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),n.push({name:r,type:i})}return n.sort((r,i)=>vR.indexOf(r.name)-vR.indexOf(i.name)),Oa.hashStruct("EIP712Domain",{EIP712Domain:n},e)}static encode(e,n,r){return On(["0x1901",Oa.hashDomain(e),Oa.from(n).hash(r)])}static hash(e,n,r){return Kn(Oa.encode(e,n,r))}static async resolveNames(e,n,r,i){e=Object.assign({},e);for(const a in e)e[a]==null&&delete e[a];const s={};e.verifyingContract&&!gr(e.verifyingContract,20)&&(s[e.verifyingContract]="0x");const o=Oa.from(n);o.visit(r,(a,l)=>(a==="address"&&!gr(l,20)&&(s[l]="0x"),l));for(const a in s)s[a]=await i(a);return e.verifyingContract&&s[e.verifyingContract]&&(e.verifyingContract=s[e.verifyingContract]),r=o.visit(r,(a,l)=>a==="address"&&s[l]?s[l]:l),{domain:e,value:r}}static getPayload(e,n,r){Oa.hashDomain(e);const i={},s=[];vR.forEach(l=>{const c=e[l];c!=null&&(i[l]=BPe[l](c),s.push({name:l,type:iH[l]}))});const o=Oa.from(n);n=o.types;const a=Object.assign({},n);return xe(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",n),a.EIP712Domain=s,o.encode(r),{types:a,domain:i,primaryType:o.primaryType,message:o.visit(r,(l,c)=>{if(l.match(/^bytes(\d*)/))return st(bt(c));if(l.match(/^u?int/))return Nt(c).toString();switch(l){case"address":return c.toLowerCase();case"bool":return!!c;case"string":return xe(typeof c=="string","invalid string","value",c),c}xe(!1,"unsupported type","type",l)})}}};S1=new WeakMap,Du=new WeakMap,qy=new WeakMap,nN=new WeakSet,tse=function(e){{const i=bR(e);if(i)return i}const n=lA(e).array;if(n){const i=n.prefix,s=this.getEncoder(i);return o=>{xe(n.count===-1||n.count===o.length,`array length mismatch; expected length ${n.count}`,"value",o);let a=o.map(s);return re(this,Du).has(i)&&(a=a.map(Kn)),Kn(On(a))}}const r=this.types[e];if(r){const i=hd(re(this,Du).get(e));return s=>{const o=r.map(({name:a,type:l})=>{const c=this.getEncoder(l)(s[a]);return re(this,Du).has(l)?Kn(c):c});return o.unshift(i),On(o)}}xe(!1,`unknown type: ${e}`,"type",e)};let bm=Oa;function X0t(t,e,n,r){return kN(bm.hash(t,e,n),r)}function Zs(t){const e=new Set;return t.forEach(n=>e.add(n)),Object.freeze(e)}const UPe="external public payable override",FPe=Zs(UPe.split(" ")),nse="constant external internal payable private public pure view override",$Pe=Zs(nse.split(" ")),rse="constructor error event fallback function receive struct",ise=Zs(rse.split(" ")),sse="calldata memory storage payable indexed",zPe=Zs(sse.split(" ")),VPe="tuple returns",HPe=[rse,sse,VPe,nse].join(" "),qPe=Zs(HPe.split(" ")),GPe={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},KPe=new RegExp("^(\\s*)"),WPe=new RegExp("^([0-9]+)"),YPe=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),ose=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),ase=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var ns,Al,A1,oM;const rN=class rN{constructor(e){Fe(this,A1);Fe(this,ns);Fe(this,Al);ge(this,ns,0),ge(this,Al,e.slice())}get offset(){return re(this,ns)}get length(){return re(this,Al).length-re(this,ns)}clone(){return new rN(re(this,Al))}reset(){ge(this,ns,0)}popKeyword(e){const n=this.peek();if(n.type!=="KEYWORD"||!e.has(n.text))throw new Error(`expected keyword ${n.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const n=this.peek();throw new Error(`expected ${e}; got ${n.type} ${JSON.stringify(n.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=nt(this,A1,oM).call(this,re(this,ns)+1,e.match+1);return ge(this,ns,e.match+1),n}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=[];for(;re(this,ns)<e.match-1;){const r=this.peek().linkNext;n.push(nt(this,A1,oM).call(this,re(this,ns)+1,r)),ge(this,ns,r)}return ge(this,ns,e.match+1),n}peek(){if(re(this,ns)>=re(this,Al).length)throw new Error("out-of-bounds");return re(this,Al)[re(this,ns)]}peekKeyword(e){const n=this.peekType("KEYWORD");return n!=null&&e.has(n)?n:null}peekType(e){if(this.length===0)return null;const n=this.peek();return n.type===e?n.text:null}pop(){const e=this.peek();return pb(this,ns)._++,e}toString(){const e=[];for(let n=re(this,ns);n<re(this,Al).length;n++){const r=re(this,Al)[n];e.push(`${r.type}:${r.text}`)}return`<TokenString ${e.join(" ")}>`}};ns=new WeakMap,Al=new WeakMap,A1=new WeakSet,oM=function(e=0,n=0){return new rN(re(this,Al).slice(e,n).map(r=>Object.freeze(Object.assign({},r,{match:r.match-e,linkBack:r.linkBack-e,linkNext:r.linkNext-e}))))};let zl=rN;function Ah(t){const e=[],n=o=>{const a=s<t.length?JSON.stringify(t[s]):"$EOI";throw new Error(`invalid token ${a} at ${s}: ${o}`)};let r=[],i=[],s=0;for(;s<t.length;){let o=t.substring(s),a=o.match(KPe);a&&(s+=a[1].length,o=t.substring(s));const l={depth:r.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:s,value:-1};e.push(l);let c=GPe[o[0]]||"";if(c){if(l.type=c,l.text=o[0],s++,c==="OPEN_PAREN")r.push(e.length-1),i.push(e.length-1);else if(c=="CLOSE_PAREN")r.length===0&&n("no matching open bracket"),l.match=r.pop(),e[l.match].match=e.length-1,l.depth--,l.linkBack=i.pop(),e[l.linkBack].linkNext=e.length-1;else if(c==="COMMA")l.linkBack=i.pop(),e[l.linkBack].linkNext=e.length-1,i.push(e.length-1);else if(c==="OPEN_BRACKET")l.type="BRACKET";else if(c==="CLOSE_BRACKET"){let u=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const h=e.pop().text;u=h+u,e[e.length-1].value=en(h)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=u}continue}if(a=o.match(YPe),a){if(l.text=a[1],s+=l.text.length,qPe.has(l.text)){l.type="KEYWORD";continue}if(l.text.match(ase)){l.type="TYPE";continue}l.type="ID";continue}if(a=o.match(WPe),a){l.text=a[1],l.type="NUMBER",s+=l.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${s}`)}return new zl(e.map(o=>Object.freeze(o)))}function aH(t,e){let n=[];for(const r in e.keys())t.has(r)&&n.push(r);if(n.length>1)throw new Error(`conflicting types: ${n.join(", ")}`)}function IN(t,e){if(e.peekKeyword(ise)){const n=e.pop().text;if(n!==t)throw new Error(`expected ${t}, got ${n}`)}return e.popType("ID")}function pd(t,e){const n=new Set;for(;;){const r=t.peekType("KEYWORD");if(r==null||e&&!e.has(r))break;if(t.pop(),n.has(r))throw new Error(`duplicate keywords: ${JSON.stringify(r)}`);n.add(r)}return Object.freeze(n)}function lse(t){let e=pd(t,$Pe);return aH(e,Zs("constant payable nonpayable".split(" "))),aH(e,Zs("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function nd(t,e){return t.popParams().map(n=>ps.from(n,e))}function cse(t){if(t.peekType("AT")){if(t.pop(),t.peekType("NUMBER"))return Nt(t.pop().text);throw new Error("invalid gas")}return null}function wm(t){if(t.length)throw new Error(`unexpected tokens at offset ${t.offset}: ${t.toString()}`)}const JPe=new RegExp(/^(.*)\[([0-9]*)\]$/);function lH(t){const e=t.match(ase);if(xe(e,"invalid type","type",t),t==="uint")return"uint256";if(t==="int")return"int256";if(e[2]){const n=parseInt(e[2]);xe(n!==0&&n<=32,"invalid bytes length","type",t)}else if(e[3]){const n=parseInt(e[3]);xe(n!==0&&n<=256&&n%8===0,"invalid numeric width","type",t)}return t}const Lr={},No=Symbol.for("_ethers_internal"),cH="_ParamTypeInternal",uH="_ErrorInternal",dH="_EventInternal",fH="_ConstructorInternal",hH="_FallbackInternal",pH="_FunctionInternal",mH="_StructInternal";var Gy,wT;const Ma=class Ma{constructor(e,n,r,i,s,o,a,l){Fe(this,Gy);Ce(this,"name");Ce(this,"type");Ce(this,"baseType");Ce(this,"indexed");Ce(this,"components");Ce(this,"arrayLength");Ce(this,"arrayChildren");if(Eh(e,Lr,"ParamType"),Object.defineProperty(this,No,{value:cH}),o&&(o=Object.freeze(o.slice())),i==="array"){if(a==null||l==null)throw new Error("")}else if(a!=null||l!=null)throw new Error("");if(i==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");Bt(this,{name:n,type:r,baseType:i,indexed:s,components:o,arrayLength:a,arrayChildren:l})}format(e){if(e==null&&(e="sighash"),e==="json"){const r=this.name||"";if(this.isArray()){const s=JSON.parse(this.arrayChildren.format("json"));return s.name=r,s.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(s)}const i={type:this.baseType==="tuple"?"tuple":this.type,name:r};return typeof this.indexed=="boolean"&&(i.indexed=this.indexed),this.isTuple()&&(i.components=this.components.map(s=>JSON.parse(s.format(e)))),JSON.stringify(i)}let n="";return this.isArray()?(n+=this.arrayChildren.format(e),n+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?n+="("+this.components.map(r=>r.format(e)).join(e==="full"?", ":",")+")":n+=this.type,e!=="sighash"&&(this.indexed===!0&&(n+=" indexed"),e==="full"&&this.name&&(n+=" "+this.name)),n}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,n){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const r=this;return e.map(i=>r.arrayChildren.walk(i,n))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const r=this;return e.map((i,s)=>r.components[s].walk(i,n))}return n(this.type,e)}async walkAsync(e,n){const r=[],i=[e];return nt(this,Gy,wT).call(this,r,e,n,s=>{i[0]=s}),r.length&&await Promise.all(r),i[0]}static from(e,n){if(Ma.isParamType(e))return e;if(typeof e=="string")try{return Ma.from(Ah(e),n)}catch{xe(!1,"invalid param type","obj",e)}else if(e instanceof zl){let a="",l="",c=null;pd(e,Zs(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(l="tuple",c=e.popParams().map(v=>Ma.from(v)),a=`tuple(${c.map(v=>v.format()).join(",")})`):(a=lH(e.popType("TYPE")),l=a);let u=null,h=null;for(;e.length&&e.peekType("BRACKET");){const v=e.pop();u=new Ma(Lr,"",a,l,null,c,h,u),h=v.value,a+=v.text,l="array",c=null}let m=null;if(pd(e,zPe).has("indexed")){if(!n)throw new Error("");m=!0}const y=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new Ma(Lr,y,a,l,m,c,h,u)}const r=e.name;xe(!r||typeof r=="string"&&r.match(ose),"invalid name","obj.name",r);let i=e.indexed;i!=null&&(xe(n,"parameter cannot be indexed","obj.indexed",e.indexed),i=!!i);let s=e.type,o=s.match(JPe);if(o){const a=parseInt(o[2]||"-1"),l=Ma.from({type:o[1],components:e.components});return new Ma(Lr,r||"",s,"array",i,null,a,l)}if(s==="tuple"||s.startsWith("tuple(")||s.startsWith("(")){const a=e.components!=null?e.components.map(c=>Ma.from(c)):null;return new Ma(Lr,r||"",s,"tuple",i,a,null,null)}return s=lH(e.type),new Ma(Lr,r||"",s,s,i,null,null,null)}static isParamType(e){return e&&e[No]===cH}};Gy=new WeakSet,wT=function(e,n,r,i){if(this.isArray()){if(!Array.isArray(n))throw new Error("invalid array value");if(this.arrayLength!==-1&&n.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,a=n.slice();a.forEach((l,c)=>{var u;nt(u=o,Gy,wT).call(u,e,l,r,h=>{a[c]=h})}),i(a);return}if(this.isTuple()){const o=this.components;let a;if(Array.isArray(n))a=n.slice();else{if(n==null||typeof n!="object")throw new Error("invalid tuple value");a=o.map(l=>{if(!l.name)throw new Error("cannot use object value with unnamed components");if(!(l.name in n))throw new Error(`missing value for component ${l.name}`);return n[l.name]})}if(a.length!==this.components.length)throw new Error("array is wrong length");a.forEach((l,c)=>{var u;nt(u=o[c],Gy,wT).call(u,e,l,r,h=>{a[c]=h})}),i(a);return}const s=r(this.type,n);s.then?e.push((async function(){i(await s)})()):i(s)};let ps=Ma;class Em{constructor(e,n,r){Ce(this,"type");Ce(this,"inputs");Eh(e,Lr,"Fragment"),r=Object.freeze(r.slice()),Bt(this,{type:n,inputs:r})}static from(e){if(typeof e=="string"){try{Em.from(JSON.parse(e))}catch{}return Em.from(Ah(e))}if(e instanceof zl)switch(e.peekKeyword(ise)){case"constructor":return Yu.from(e);case"error":return bo.from(e);case"event":return Ac.from(e);case"fallback":case"receive":return Pu.from(e);case"function":return Tc.from(e);case"struct":return dm.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return Yu.from(e);case"error":return bo.from(e);case"event":return Ac.from(e);case"fallback":case"receive":return Pu.from(e);case"function":return Tc.from(e);case"struct":return dm.from(e)}Ye(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}xe(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return Yu.isFragment(e)}static isError(e){return bo.isFragment(e)}static isEvent(e){return Ac.isFragment(e)}static isFunction(e){return Tc.isFragment(e)}static isStruct(e){return dm.isFragment(e)}}class RN extends Em{constructor(n,r,i,s){super(n,r,s);Ce(this,"name");xe(typeof i=="string"&&i.match(ose),"invalid identifier","name",i),s=Object.freeze(s.slice()),Bt(this,{name:i})}}function Fw(t,e){return"("+e.map(n=>n.format(t)).join(t==="full"?", ":",")+")"}class bo extends RN{constructor(e,n,r){super(e,"error",n,r),Object.defineProperty(this,No,{value:uH})}get selector(){return hd(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const n=[];return e!=="sighash"&&n.push("error"),n.push(this.name+Fw(e,this.inputs)),n.join(" ")}static from(e){if(bo.isFragment(e))return e;if(typeof e=="string")return bo.from(Ah(e));if(e instanceof zl){const n=IN("error",e),r=nd(e);return wm(e),new bo(Lr,n,r)}return new bo(Lr,e.name,e.inputs?e.inputs.map(ps.from):[])}static isFragment(e){return e&&e[No]===uH}}class Ac extends RN{constructor(n,r,i,s){super(n,"event",r,i);Ce(this,"anonymous");Object.defineProperty(this,No,{value:dH}),Bt(this,{anonymous:s})}get topicHash(){return hd(this.format("sighash"))}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(i=>JSON.parse(i.format(n)))});const r=[];return n!=="sighash"&&r.push("event"),r.push(this.name+Fw(n,this.inputs)),n!=="sighash"&&this.anonymous&&r.push("anonymous"),r.join(" ")}static getTopicHash(n,r){return r=(r||[]).map(s=>ps.from(s)),new Ac(Lr,n,r,!1).topicHash}static from(n){if(Ac.isFragment(n))return n;if(typeof n=="string")try{return Ac.from(Ah(n))}catch{xe(!1,"invalid event fragment","obj",n)}else if(n instanceof zl){const r=IN("event",n),i=nd(n,!0),s=!!pd(n,Zs(["anonymous"])).has("anonymous");return wm(n),new Ac(Lr,r,i,s)}return new Ac(Lr,n.name,n.inputs?n.inputs.map(r=>ps.from(r,!0)):[],!!n.anonymous)}static isFragment(n){return n&&n[No]===dH}}class Yu extends Em{constructor(n,r,i,s,o){super(n,r,i);Ce(this,"payable");Ce(this,"gas");Object.defineProperty(this,No,{value:fH}),Bt(this,{payable:s,gas:o})}format(n){if(Ye(n!=null&&n!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),n==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(i=>JSON.parse(i.format(n)))});const r=[`constructor${Fw(n,this.inputs)}`];return this.payable&&r.push("payable"),this.gas!=null&&r.push(`@${this.gas.toString()}`),r.join(" ")}static from(n){if(Yu.isFragment(n))return n;if(typeof n=="string")try{return Yu.from(Ah(n))}catch{xe(!1,"invalid constuctor fragment","obj",n)}else if(n instanceof zl){pd(n,Zs(["constructor"]));const r=nd(n),i=!!pd(n,FPe).has("payable"),s=cse(n);return wm(n),new Yu(Lr,"constructor",r,i,s)}return new Yu(Lr,"constructor",n.inputs?n.inputs.map(ps.from):[],!!n.payable,n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[No]===fH}}class Pu extends Em{constructor(n,r,i){super(n,"fallback",r);Ce(this,"payable");Object.defineProperty(this,No,{value:hH}),Bt(this,{payable:i})}format(n){const r=this.inputs.length===0?"receive":"fallback";if(n==="json"){const i=this.payable?"payable":"nonpayable";return JSON.stringify({type:r,stateMutability:i})}return`${r}()${this.payable?" payable":""}`}static from(n){if(Pu.isFragment(n))return n;if(typeof n=="string")try{return Pu.from(Ah(n))}catch{xe(!1,"invalid fallback fragment","obj",n)}else if(n instanceof zl){const r=n.toString(),i=n.peekKeyword(Zs(["fallback","receive"]));if(xe(i,"type must be fallback or receive","obj",r),n.popKeyword(Zs(["fallback","receive"]))==="receive"){const l=nd(n);return xe(l.length===0,"receive cannot have arguments","obj.inputs",l),pd(n,Zs(["payable"])),wm(n),new Pu(Lr,[],!0)}let o=nd(n);o.length?xe(o.length===1&&o[0].type==="bytes","invalid fallback inputs","obj.inputs",o.map(l=>l.format("minimal")).join(", ")):o=[ps.from("bytes")];const a=lse(n);if(xe(a==="nonpayable"||a==="payable","fallback cannot be constants","obj.stateMutability",a),pd(n,Zs(["returns"])).has("returns")){const l=nd(n);xe(l.length===1&&l[0].type==="bytes","invalid fallback outputs","obj.outputs",l.map(c=>c.format("minimal")).join(", "))}return wm(n),new Pu(Lr,o,a==="payable")}if(n.type==="receive")return new Pu(Lr,[],!0);if(n.type==="fallback"){const r=[ps.from("bytes")],i=n.stateMutability==="payable";return new Pu(Lr,r,i)}xe(!1,"invalid fallback description","obj",n)}static isFragment(n){return n&&n[No]===hH}}class Tc extends RN{constructor(n,r,i,s,o,a){super(n,"function",r,s);Ce(this,"constant");Ce(this,"outputs");Ce(this,"stateMutability");Ce(this,"payable");Ce(this,"gas");Object.defineProperty(this,No,{value:pH}),o=Object.freeze(o.slice()),Bt(this,{constant:i==="view"||i==="pure",gas:a,outputs:o,payable:i==="payable",stateMutability:i})}get selector(){return hd(this.format("sighash")).substring(0,10)}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(i=>JSON.parse(i.format(n))),outputs:this.outputs.map(i=>JSON.parse(i.format(n)))});const r=[];return n!=="sighash"&&r.push("function"),r.push(this.name+Fw(n,this.inputs)),n!=="sighash"&&(this.stateMutability!=="nonpayable"&&r.push(this.stateMutability),this.outputs&&this.outputs.length&&(r.push("returns"),r.push(Fw(n,this.outputs))),this.gas!=null&&r.push(`@${this.gas.toString()}`)),r.join(" ")}static getSelector(n,r){return r=(r||[]).map(s=>ps.from(s)),new Tc(Lr,n,"view",r,[],null).selector}static from(n){if(Tc.isFragment(n))return n;if(typeof n=="string")try{return Tc.from(Ah(n))}catch{xe(!1,"invalid function fragment","obj",n)}else if(n instanceof zl){const i=IN("function",n),s=nd(n),o=lse(n);let a=[];pd(n,Zs(["returns"])).has("returns")&&(a=nd(n));const l=cse(n);return wm(n),new Tc(Lr,i,o,s,a,l)}let r=n.stateMutability;return r==null&&(r="payable",typeof n.constant=="boolean"?(r="view",n.constant||(r="payable",typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable"))):typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable")),new Tc(Lr,n.name,r,n.inputs?n.inputs.map(ps.from):[],n.outputs?n.outputs.map(ps.from):[],n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[No]===pH}}class dm extends RN{constructor(e,n,r){super(e,"struct",n,r),Object.defineProperty(this,No,{value:mH})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return dm.from(Ah(e))}catch{xe(!1,"invalid struct fragment","obj",e)}else if(e instanceof zl){const n=IN("struct",e),r=nd(e);return wm(e),new dm(Lr,n,r)}return new dm(Lr,e.name,e.inputs?e.inputs.map(ps.from):[])}static isFragment(e){return e&&e[No]===mH}}const Wl=new Map;Wl.set(0,"GENERIC_PANIC");Wl.set(1,"ASSERT_FALSE");Wl.set(17,"OVERFLOW");Wl.set(18,"DIVIDE_BY_ZERO");Wl.set(33,"ENUM_RANGE_ERROR");Wl.set(34,"BAD_STORAGE_DATA");Wl.set(49,"STACK_UNDERFLOW");Wl.set(50,"ARRAY_RANGE_ERROR");Wl.set(65,"OUT_OF_MEMORY");Wl.set(81,"UNINITIALIZED_FUNCTION_CALL");const XPe=new RegExp(/^bytes([0-9]*)$/),QPe=new RegExp(/^(u?int)([0-9]*)$/);let wR=null,gH=1024;function ZPe(t,e,n,r){let i="missing revert data",s=null;const o=null;let a=null;if(n){i="execution reverted";const c=bt(n);if(n=st(n),c.length===0)i+=" (no data present; likely require(false) occurred",s="require(false)";else if(c.length%32!==4)i+=" (could not decode reason; invalid data length)";else if(st(c.slice(0,4))==="0x08c379a0")try{s=r.decode(["string"],c.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[s]},i+=`: ${JSON.stringify(s)}`}catch{i+=" (could not decode reason; invalid string data)"}else if(st(c.slice(0,4))==="0x4e487b71")try{const u=Number(r.decode(["uint256"],c.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[u]},s=`Panic due to ${Wl.get(u)||"UNKNOWN"}(${u})`,i+=`: ${s}`}catch{i+=" (could not decode panic code)"}else i+=" (unknown custom error)"}const l={to:e.to?xn(e.to):null,data:e.data||"0x"};return e.from&&(l.from=xn(e.from)),Rr(i,"CALL_EXCEPTION",{action:t,data:n,reason:s,transaction:l,invocation:o,revert:a})}var $f,wg;const iN=class iN{constructor(){Fe(this,$f)}getDefaultValue(e){const n=e.map(i=>nt(this,$f,wg).call(this,ps.from(i)));return new aA(n,"_").defaultValue()}encode(e,n){ire(n.length,e.length,"types/values length mismatch");const r=e.map(o=>nt(this,$f,wg).call(this,ps.from(o))),i=new aA(r,"_"),s=new q3;return i.encode(s,n),s.data}decode(e,n,r){const i=e.map(o=>nt(this,$f,wg).call(this,ps.from(o)));return new aA(i,"_").decode(new G3(n,r,gH))}static _setDefaultMaxInflation(e){xe(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),gH=e}static defaultAbiCoder(){return wR==null&&(wR=new iN),wR}static getBuiltinCallException(e,n,r){return ZPe(e,n,r,iN.defaultAbiCoder())}};$f=new WeakSet,wg=function(e){if(e.isArray())return new xCe(nt(this,$f,wg).call(this,e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new aA(e.components.map(r=>nt(this,$f,wg).call(this,r)),e.name);switch(e.baseType){case"address":return new gCe(e.name);case"bool":return new vCe(e.name);case"string":return new CCe(e.name);case"bytes":return new bCe(e.name);case"":return new SCe(e.name)}let n=e.type.match(QPe);if(n){let r=parseInt(n[2]||"256");return xe(r!==0&&r<=256&&r%8===0,"invalid "+n[1]+" bit length","param",e),new NCe(r/8,n[1]==="int",e.name)}if(n=e.type.match(XPe),n){let r=parseInt(n[1]);return xe(r!==0&&r<=32,"invalid bytes length","param",e),new wCe(r,e.name)}xe(!1,"invalid type","type",e.type)};let $w=iN;class e_e{constructor(e,n,r){Ce(this,"fragment");Ce(this,"name");Ce(this,"signature");Ce(this,"topic");Ce(this,"args");const i=e.name,s=e.format();Bt(this,{fragment:e,name:i,signature:s,topic:n,args:r})}}class t_e{constructor(e,n,r,i){Ce(this,"fragment");Ce(this,"name");Ce(this,"args");Ce(this,"signature");Ce(this,"selector");Ce(this,"value");const s=e.name,o=e.format();Bt(this,{fragment:e,name:s,args:r,signature:o,selector:n,value:i})}}class n_e{constructor(e,n,r){Ce(this,"fragment");Ce(this,"name");Ce(this,"args");Ce(this,"signature");Ce(this,"selector");const i=e.name,s=e.format();Bt(this,{fragment:e,name:i,args:r,signature:s,selector:n})}}class yH{constructor(e){Ce(this,"hash");Ce(this,"_isIndexed");Bt(this,{hash:e,_isIndexed:!0})}static isIndexed(e){return!!(e&&e._isIndexed)}}const xH={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},vH={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:t=>`reverted with reason string ${JSON.stringify(t)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:t=>{let e="unknown panic code";return t>=0&&t<=255&&xH[t.toString()]&&(e=xH[t.toString()]),`reverted with panic code 0x${t.toString(16)} (${e})`}}};var mc,gc,yc,Ss,Bc,ET,ST;const wp=class wp{constructor(e){Fe(this,Bc);Ce(this,"fragments");Ce(this,"deploy");Ce(this,"fallback");Ce(this,"receive");Fe(this,mc);Fe(this,gc);Fe(this,yc);Fe(this,Ss);let n=[];typeof e=="string"?n=JSON.parse(e):n=e,ge(this,yc,new Map),ge(this,mc,new Map),ge(this,gc,new Map);const r=[];for(const o of n)try{r.push(Em.from(o))}catch(a){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,a.message)}Bt(this,{fragments:Object.freeze(r)});let i=null,s=!1;ge(this,Ss,this.getAbiCoder()),this.fragments.forEach((o,a)=>{let l;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}Bt(this,{deploy:o});return;case"fallback":o.inputs.length===0?s=!0:(xe(!i||o.payable!==i.payable,"conflicting fallback fragments",`fragments[${a}]`,o),i=o,s=i.payable);return;case"function":l=re(this,yc);break;case"event":l=re(this,gc);break;case"error":l=re(this,mc);break;default:return}const c=o.format();l.has(c)||l.set(c,o)}),this.deploy||Bt(this,{deploy:Yu.from("constructor()")}),Bt(this,{fallback:i,receive:s})}format(e){const n=e?"minimal":"full";return this.fragments.map(i=>i.format(n))}formatJson(){const e=this.fragments.map(n=>n.format("json"));return JSON.stringify(e.map(n=>JSON.parse(n)))}getAbiCoder(){return $w.defaultAbiCoder()}getFunctionName(e){const n=nt(this,Bc,ET).call(this,e,null,!1);return xe(n,"no matching function","key",e),n.name}hasFunction(e){return!!nt(this,Bc,ET).call(this,e,null,!1)}getFunction(e,n){return nt(this,Bc,ET).call(this,e,n||null,!0)}forEachFunction(e){const n=Array.from(re(this,yc).keys());n.sort((r,i)=>r.localeCompare(i));for(let r=0;r<n.length;r++){const i=n[r];e(re(this,yc).get(i),r)}}getEventName(e){const n=nt(this,Bc,ST).call(this,e,null,!1);return xe(n,"no matching event","key",e),n.name}hasEvent(e){return!!nt(this,Bc,ST).call(this,e,null,!1)}getEvent(e,n){return nt(this,Bc,ST).call(this,e,n||null,!0)}forEachEvent(e){const n=Array.from(re(this,gc).keys());n.sort((r,i)=>r.localeCompare(i));for(let r=0;r<n.length;r++){const i=n[r];e(re(this,gc).get(i),r)}}getError(e,n){if(gr(e)){const i=e.toLowerCase();if(vH[i])return bo.from(vH[i].signature);for(const s of re(this,mc).values())if(i===s.selector)return s;return null}if(e.indexOf("(")===-1){const i=[];for(const[s,o]of re(this,mc))s.split("(")[0]===e&&i.push(o);if(i.length===0)return e==="Error"?bo.from("error Error(string)"):e==="Panic"?bo.from("error Panic(uint256)"):null;if(i.length>1){const s=i.map(o=>JSON.stringify(o.format())).join(", ");xe(!1,`ambiguous error description (i.e. ${s})`,"name",e)}return i[0]}if(e=bo.from(e).format(),e==="Error(string)")return bo.from("error Error(string)");if(e==="Panic(uint256)")return bo.from("error Panic(uint256)");const r=re(this,mc).get(e);return r||null}forEachError(e){const n=Array.from(re(this,mc).keys());n.sort((r,i)=>r.localeCompare(i));for(let r=0;r<n.length;r++){const i=n[r];e(re(this,mc).get(i),r)}}_decodeParams(e,n){return re(this,Ss).decode(e,n)}_encodeParams(e,n){return re(this,Ss).encode(e,n)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);xe(r,"unknown error","fragment",e),e=r}return xe(mr(n,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",n),this._decodeParams(e.inputs,mr(n,4))}encodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);xe(r,"unknown error","fragment",e),e=r}return On([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);xe(r,"unknown function","fragment",e),e=r}return xe(mr(n,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",n),this._decodeParams(e.inputs,mr(n,4))}encodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);xe(r,"unknown function","fragment",e),e=r}return On([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionResult(e,n){if(typeof e=="string"){const s=this.getFunction(e);xe(s,"unknown function","fragment",e),e=s}let r="invalid length for result data";const i=fs(n);if(i.length%32===0)try{return re(this,Ss).decode(e.outputs,i)}catch{r="could not decode result data"}Ye(!1,r,"BAD_DATA",{value:st(i),info:{method:e.name,signature:e.format()}})}makeError(e,n){const r=bt(e,"data"),i=$w.getBuiltinCallException("call",n,r);if(i.message.startsWith("execution reverted (unknown custom error)")){const a=st(r.slice(0,4)),l=this.getError(a);if(l)try{const c=re(this,Ss).decode(l.inputs,r.slice(4));i.revert={name:l.name,signature:l.format(),args:c},i.reason=i.revert.signature,i.message=`execution reverted: ${i.reason}`}catch{i.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(n);return o&&(i.invocation={method:o.name,signature:o.signature,args:o.args}),i}encodeFunctionResult(e,n){if(typeof e=="string"){const r=this.getFunction(e);xe(r,"unknown function","fragment",e),e=r}return st(re(this,Ss).encode(e.outputs,n||[]))}encodeFilterTopics(e,n){if(typeof e=="string"){const s=this.getEvent(e);xe(s,"unknown event","eventFragment",e),e=s}Ye(n.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:n.length,expectedCount:e.inputs.length});const r=[];e.anonymous||r.push(e.topicHash);const i=(s,o)=>s.type==="string"?hd(o):s.type==="bytes"?Kn(st(o)):(s.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":s.type.match(/^u?int/)?o=dd(o):s.type.match(/^bytes/)?o=r2e(o,32):s.type==="address"&&re(this,Ss).encode(["address"],[o]),ud(st(o),32));for(n.forEach((s,o)=>{const a=e.inputs[o];if(!a.indexed){xe(s==null,"cannot filter non-indexed parameters; must be null","contract."+a.name,s);return}s==null?r.push(null):a.baseType==="array"||a.baseType==="tuple"?xe(!1,"filtering with tuples or arrays not supported","contract."+a.name,s):Array.isArray(s)?r.push(s.map(l=>i(a,l))):r.push(i(a,s))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(e,n){if(typeof e=="string"){const o=this.getEvent(e);xe(o,"unknown event","eventFragment",e),e=o}const r=[],i=[],s=[];return e.anonymous||r.push(e.topicHash),xe(n.length===e.inputs.length,"event arguments/values mismatch","values",n),e.inputs.forEach((o,a)=>{const l=n[a];if(o.indexed)if(o.type==="string")r.push(hd(l));else if(o.type==="bytes")r.push(Kn(l));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");r.push(re(this,Ss).encode([o.type],[l]))}else i.push(o),s.push(l)}),{data:re(this,Ss).encode(i,s),topics:r}}decodeEventLog(e,n,r){if(typeof e=="string"){const g=this.getEvent(e);xe(g,"unknown event","eventFragment",e),e=g}if(r!=null&&!e.anonymous){const g=e.topicHash;xe(gr(r[0],32)&&r[0].toLowerCase()===g,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}const i=[],s=[],o=[];e.inputs.forEach((g,y)=>{g.indexed?g.type==="string"||g.type==="bytes"||g.baseType==="tuple"||g.baseType==="array"?(i.push(ps.from({type:"bytes32",name:g.name})),o.push(!0)):(i.push(g),o.push(!1)):(s.push(g),o.push(!1))});const a=r!=null?re(this,Ss).decode(i,On(r)):null,l=re(this,Ss).decode(s,n,!0),c=[],u=[];let h=0,m=0;return e.inputs.forEach((g,y)=>{let v=null;if(g.indexed)if(a==null)v=new yH(null);else if(o[y])v=new yH(a[m++]);else try{v=a[m++]}catch(b){v=b}else try{v=l[h++]}catch(b){v=b}c.push(v),u.push(g.name||null)}),px.fromItems(c,u)}parseTransaction(e){const n=bt(e.data,"tx.data"),r=Nt(e.value!=null?e.value:0,"tx.value"),i=this.getFunction(st(n.slice(0,4)));if(!i)return null;const s=re(this,Ss).decode(i.inputs,n.slice(4));return new t_e(i,i.selector,s,r)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const n=this.getEvent(e.topics[0]);return!n||n.anonymous?null:new e_e(n,n.topicHash,this.decodeEventLog(n,e.data,e.topics))}parseError(e){const n=st(e),r=this.getError(mr(n,0,4));if(!r)return null;const i=re(this,Ss).decode(r.inputs,mr(n,4));return new n_e(r,r.selector,i)}static from(e){return e instanceof wp?e:typeof e=="string"?new wp(JSON.parse(e)):typeof e.formatJson=="function"?new wp(e.formatJson()):typeof e.format=="function"?new wp(e.format("json")):new wp(e)}};mc=new WeakMap,gc=new WeakMap,yc=new WeakMap,Ss=new WeakMap,Bc=new WeakSet,ET=function(e,n,r){if(gr(e)){const s=e.toLowerCase();for(const o of re(this,yc).values())if(s===o.selector)return o;return null}if(e.indexOf("(")===-1){const s=[];for(const[o,a]of re(this,yc))o.split("(")[0]===e&&s.push(a);if(n){const o=n.length>0?n[n.length-1]:null;let a=n.length,l=!0;Bs.isTyped(o)&&o.type==="overrides"&&(l=!1,a--);for(let c=s.length-1;c>=0;c--){const u=s[c].inputs.length;u!==a&&(!l||u!==a-1)&&s.splice(c,1)}for(let c=s.length-1;c>=0;c--){const u=s[c].inputs;for(let h=0;h<n.length;h++)if(Bs.isTyped(n[h])){if(h>=u.length){if(n[h].type==="overrides")continue;s.splice(c,1);break}if(n[h].type!==u[h].baseType){s.splice(c,1);break}}}}if(s.length===1&&n&&n.length!==s[0].inputs.length){const o=n[n.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&s.splice(0,1)}if(s.length===0)return null;if(s.length>1&&r){const o=s.map(a=>JSON.stringify(a.format())).join(", ");xe(!1,`ambiguous function description (i.e. matches ${o})`,"key",e)}return s[0]}const i=re(this,yc).get(Tc.from(e).format());return i||null},ST=function(e,n,r){if(gr(e)){const s=e.toLowerCase();for(const o of re(this,gc).values())if(s===o.topicHash)return o;return null}if(e.indexOf("(")===-1){const s=[];for(const[o,a]of re(this,gc))o.split("(")[0]===e&&s.push(a);if(n){for(let o=s.length-1;o>=0;o--)s[o].inputs.length<n.length&&s.splice(o,1);for(let o=s.length-1;o>=0;o--){const a=s[o].inputs;for(let l=0;l<n.length;l++)if(Bs.isTyped(n[l])&&n[l].type!==a[l].baseType){s.splice(o,1);break}}}if(s.length===0)return null;if(s.length>1&&r){const o=s.map(a=>JSON.stringify(a.format())).join(", ");xe(!1,`ambiguous event description (i.e. matches ${o})`,"key",e)}return s[0]}const i=re(this,gc).get(Ac.from(e).format());return i||null};let aM=wp;const use=BigInt(0);function iy(t){return t??null}function ni(t){return t==null?null:t.toString()}class bH{constructor(e,n,r){Ce(this,"gasPrice");Ce(this,"maxFeePerGas");Ce(this,"maxPriorityFeePerGas");Bt(this,{gasPrice:iy(e),maxFeePerGas:iy(n),maxPriorityFeePerGas:iy(r)})}toJSON(){const{gasPrice:e,maxFeePerGas:n,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:ni(e),maxFeePerGas:ni(n),maxPriorityFeePerGas:ni(r)}}}function zw(t){const e={};t.to&&(e.to=t.to),t.from&&(e.from=t.from),t.data&&(e.data=st(t.data));const n="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const i of n)!(i in t)||t[i]==null||(e[i]=Nt(t[i],`request.${i}`));const r="type,nonce".split(/,/);for(const i of r)!(i in t)||t[i]==null||(e[i]=en(t[i],`request.${i}`));return t.accessList&&(e.accessList=zm(t.accessList)),t.authorizationList&&(e.authorizationList=t.authorizationList.slice()),"blockTag"in t&&(e.blockTag=t.blockTag),"enableCcipRead"in t&&(e.enableCcipRead=!!t.enableCcipRead),"customData"in t&&(e.customData=t.customData),"blobVersionedHashes"in t&&t.blobVersionedHashes&&(e.blobVersionedHashes=t.blobVersionedHashes.slice()),"kzg"in t&&(e.kzg=t.kzg),"blobWrapperVersion"in t&&(e.blobWrapperVersion=t.blobWrapperVersion),"blobs"in t&&t.blobs&&(e.blobs=t.blobs.map(i=>bN(i)?st(i):Object.assign({},i))),e}var ju;class r_e{constructor(e,n){Ce(this,"provider");Ce(this,"number");Ce(this,"hash");Ce(this,"timestamp");Ce(this,"parentHash");Ce(this,"parentBeaconBlockRoot");Ce(this,"nonce");Ce(this,"difficulty");Ce(this,"gasLimit");Ce(this,"gasUsed");Ce(this,"stateRoot");Ce(this,"receiptsRoot");Ce(this,"blobGasUsed");Ce(this,"excessBlobGas");Ce(this,"miner");Ce(this,"prevRandao");Ce(this,"extraData");Ce(this,"baseFeePerGas");Fe(this,ju);ge(this,ju,e.transactions.map(r=>typeof r!="string"?new Vw(r,n):r)),Bt(this,{provider:n,hash:iy(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:iy(e.prevRandao),extraData:e.extraData,baseFeePerGas:iy(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return re(this,ju).map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){const e=re(this,ju).slice();return e.length===0?[]:(Ye(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:n,extraData:r,gasLimit:i,gasUsed:s,hash:o,miner:a,prevRandao:l,nonce:c,number:u,parentHash:h,parentBeaconBlockRoot:m,stateRoot:g,receiptsRoot:y,timestamp:v,transactions:b}=this;return{_type:"Block",baseFeePerGas:ni(e),difficulty:ni(n),extraData:r,gasLimit:ni(i),gasUsed:ni(s),blobGasUsed:ni(this.blobGasUsed),excessBlobGas:ni(this.excessBlobGas),hash:o,miner:a,prevRandao:l,nonce:c,number:u,parentHash:h,timestamp:v,parentBeaconBlockRoot:m,stateRoot:g,receiptsRoot:y,transactions:b}}[Symbol.iterator](){let e=0;const n=this.transactions;return{next:()=>e<this.length?{value:n[e++],done:!1}:{value:void 0,done:!0}}}get length(){return re(this,ju).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let n;if(typeof e=="number")n=re(this,ju)[e];else{const r=e.toLowerCase();for(const i of re(this,ju))if(typeof i=="string"){if(i!==r)continue;n=i;break}else{if(i.hash!==r)continue;n=i;break}}if(n==null)throw new Error("no such tx");return typeof n=="string"?await this.provider.getTransaction(n):n}getPrefetchedTransaction(e){const n=this.prefetchedTransactions;if(typeof e=="number")return n[e];e=e.toLowerCase();for(const r of n)if(r.hash===e)return r;xe(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return i_e(this)}}ju=new WeakMap;class Y1{constructor(e,n){Ce(this,"provider");Ce(this,"transactionHash");Ce(this,"blockHash");Ce(this,"blockNumber");Ce(this,"removed");Ce(this,"address");Ce(this,"data");Ce(this,"topics");Ce(this,"index");Ce(this,"transactionIndex");this.provider=n;const r=Object.freeze(e.topics.slice());Bt(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:r,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:n,blockNumber:r,data:i,index:s,removed:o,topics:a,transactionHash:l,transactionIndex:c}=this;return{_type:"log",address:e,blockHash:n,blockNumber:r,data:i,index:s,removed:o,topics:a,transactionHash:l,transactionIndex:c}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return Ye(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return Ye(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return Ye(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return s_e(this)}}var T1;class dse{constructor(e,n){Ce(this,"provider");Ce(this,"to");Ce(this,"from");Ce(this,"contractAddress");Ce(this,"hash");Ce(this,"index");Ce(this,"blockHash");Ce(this,"blockNumber");Ce(this,"logsBloom");Ce(this,"gasUsed");Ce(this,"blobGasUsed");Ce(this,"cumulativeGasUsed");Ce(this,"gasPrice");Ce(this,"blobGasPrice");Ce(this,"type");Ce(this,"status");Ce(this,"root");Fe(this,T1);ge(this,T1,Object.freeze(e.logs.map(i=>new Y1(i,n))));let r=use;e.effectiveGasPrice!=null?r=e.effectiveGasPrice:e.gasPrice!=null&&(r=e.gasPrice),Bt(this,{provider:n,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:r,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return re(this,T1)}toJSON(){const{to:e,from:n,contractAddress:r,hash:i,index:s,blockHash:o,blockNumber:a,logsBloom:l,logs:c,status:u,root:h}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:a,contractAddress:r,cumulativeGasUsed:ni(this.cumulativeGasUsed),from:n,gasPrice:ni(this.gasPrice),blobGasUsed:ni(this.blobGasUsed),blobGasPrice:ni(this.blobGasPrice),gasUsed:ni(this.gasUsed),hash:i,index:s,logs:c,logsBloom:l,root:h,status:u,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return hse(this)}reorderedEvent(e){return Ye(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),fse(this,e)}}T1=new WeakMap;var zf;const _7=class _7{constructor(e,n){Ce(this,"provider");Ce(this,"blockNumber");Ce(this,"blockHash");Ce(this,"index");Ce(this,"hash");Ce(this,"type");Ce(this,"to");Ce(this,"from");Ce(this,"nonce");Ce(this,"gasLimit");Ce(this,"gasPrice");Ce(this,"maxPriorityFeePerGas");Ce(this,"maxFeePerGas");Ce(this,"maxFeePerBlobGas");Ce(this,"data");Ce(this,"value");Ce(this,"chainId");Ce(this,"signature");Ce(this,"accessList");Ce(this,"blobVersionedHashes");Ce(this,"authorizationList");Fe(this,zf);this.provider=n,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,this.authorizationList=e.authorizationList!=null?e.authorizationList:null,ge(this,zf,-1)}toJSON(){const{blockNumber:e,blockHash:n,index:r,hash:i,type:s,to:o,from:a,nonce:l,data:c,signature:u,accessList:h,blobVersionedHashes:m}=this;return{_type:"TransactionResponse",accessList:h,blockNumber:e,blockHash:n,blobVersionedHashes:m,chainId:ni(this.chainId),data:c,from:a,gasLimit:ni(this.gasLimit),gasPrice:ni(this.gasPrice),hash:i,maxFeePerGas:ni(this.maxFeePerGas),maxPriorityFeePerGas:ni(this.maxPriorityFeePerGas),maxFeePerBlobGas:ni(this.maxFeePerBlobGas),nonce:l,signature:u,to:o,index:r,type:s,value:ni(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const r=await this.getTransaction();r&&(e=r.blockNumber)}if(e==null)return null;const n=this.provider.getBlock(e);if(n==null)throw new Error("TODO");return n}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:n,blockNumber:r}=await Cs({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return n==null||n.blockNumber==null?0:r-n.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,n){const r=e??1,i=n??0;let s=re(this,zf),o=-1,a=s===-1;const l=async()=>{if(a)return null;const{blockNumber:m,nonce:g}=await Cs({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(g<this.nonce){s=m;return}if(a)return null;const y=await this.getTransaction();if(!(y&&y.blockNumber!=null))for(o===-1&&(o=s-3,o<re(this,zf)&&(o=re(this,zf)));o<=m;){if(a)return null;const v=await this.provider.getBlock(o,!0);if(v==null)return;for(const b of v)if(b===this.hash)return;for(let b=0;b<v.length;b++){const w=await v.getTransaction(b);if(w.from===this.from&&w.nonce===this.nonce){if(a)return null;const k=await this.provider.getTransactionReceipt(w.hash);if(k==null||m-k.blockNumber+1<r)return;let N="replaced";w.data===this.data&&w.to===this.to&&w.value===this.value?N="repriced":w.data==="0x"&&w.from===w.to&&w.value===use&&(N="cancelled"),Ye(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:N==="replaced"||N==="cancelled",reason:N,replacement:w.replaceableTransaction(s),hash:w.hash,receipt:k})}}o++}},c=m=>{if(m==null||m.status!==0)return m;Ye(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:m.to,from:m.from,data:""},receipt:m})},u=await this.provider.getTransactionReceipt(this.hash);if(r===0)return c(u);if(u){if(r===1||await u.confirmations()>=r)return c(u)}else if(await l(),r===0)return null;return await new Promise((m,g)=>{const y=[],v=()=>{y.forEach(w=>w())};if(y.push(()=>{a=!0}),i>0){const w=setTimeout(()=>{v(),g(Rr("wait for transaction timeout","TIMEOUT"))},i);y.push(()=>{clearTimeout(w)})}const b=async w=>{if(await w.confirmations()>=r){v();try{m(c(w))}catch(k){g(k)}}};if(y.push(()=>{this.provider.off(this.hash,b)}),this.provider.on(this.hash,b),s>=0){const w=async()=>{try{await l()}catch(k){if(ds(k,"TRANSACTION_REPLACED")){v(),g(k);return}}a||this.provider.once("block",w)};y.push(()=>{this.provider.off("block",w)}),this.provider.once("block",w)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return Ye(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),hse(this)}reorderedEvent(e){return Ye(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Ye(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),fse(this,e)}replaceableTransaction(e){xe(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const n=new _7(this,this.provider);return ge(n,zf,e),n}};zf=new WeakMap;let Vw=_7;function i_e(t){return{orphan:"drop-block",hash:t.hash,number:t.number}}function fse(t,e){return{orphan:"reorder-transaction",tx:t,other:e}}function hse(t){return{orphan:"drop-transaction",tx:t}}function s_e(t){return{orphan:"drop-log",log:{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,address:t.address,data:t.data,topics:Object.freeze(t.topics.slice()),index:t.index}}}class W8 extends Y1{constructor(n,r,i){super(n,n.provider);Ce(this,"interface");Ce(this,"fragment");Ce(this,"args");const s=r.decodeEventLog(i,n.data,n.topics);Bt(this,{args:s,fragment:i,interface:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class pse extends Y1{constructor(n,r){super(n,n.provider);Ce(this,"error");Bt(this,{error:r})}}var Ky;class o_e extends dse{constructor(n,r,i){super(i,r);Fe(this,Ky);ge(this,Ky,n)}get logs(){return super.logs.map(n=>{const r=n.topics.length?re(this,Ky).getEvent(n.topics[0]):null;if(r)try{return new W8(n,re(this,Ky),r)}catch(i){return new pse(n,i)}return n})}}Ky=new WeakMap;var k1;class Y8 extends Vw{constructor(n,r,i){super(i,r);Fe(this,k1);ge(this,k1,n)}async wait(n,r){const i=await super.wait(n,r);return i==null?null:new o_e(re(this,k1),this.provider,i)}}k1=new WeakMap;class mse extends ure{constructor(n,r,i,s){super(n,r,i);Ce(this,"log");Bt(this,{log:s})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class a_e extends mse{constructor(e,n,r,i,s){super(e,n,r,new W8(s,e.interface,i));const o=e.interface.decodeEventLog(i,this.log.data,this.log.topics);Bt(this,{args:o,fragment:i})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const wH=BigInt(0);function gse(t){return t&&typeof t.call=="function"}function yse(t){return t&&typeof t.estimateGas=="function"}function ON(t){return t&&typeof t.resolveName=="function"}function xse(t){return t&&typeof t.sendTransaction=="function"}function vse(t){if(t!=null){if(ON(t))return t;if(t.provider)return t.provider}}var N1;class l_e{constructor(e,n,r){Fe(this,N1);Ce(this,"fragment");if(Bt(this,{fragment:n}),n.inputs.length<r.length)throw new Error("too many arguments");const i=Sm(e.runner,"resolveName"),s=ON(i)?i:null;ge(this,N1,(async function(){const o=await Promise.all(n.inputs.map((a,l)=>r[l]==null?null:a.walkAsync(r[l],(u,h)=>u==="address"?Array.isArray(h)?Promise.all(h.map(m=>$i(m,s))):$i(h,s):h)));return e.interface.encodeFilterTopics(n,o)})())}getTopicFilter(){return re(this,N1)}}N1=new WeakMap;function Sm(t,e){return t==null?null:typeof t[e]=="function"?t:t.provider&&typeof t.provider[e]=="function"?t.provider:null}function _p(t){return t==null?null:t.provider||null}async function bse(t,e){const n=Bs.dereference(t,"overrides");xe(typeof n=="object","invalid overrides parameter","overrides",t);const r=zw(n);return xe(r.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",r.to),xe(r.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",r.data),r.from&&(r.from=r.from),r}async function c_e(t,e,n){const r=Sm(t,"resolveName"),i=ON(r)?r:null;return await Promise.all(e.map((s,o)=>s.walkAsync(n[o],(a,l)=>(l=Bs.dereference(l,a),a==="address"?$i(l,i):l))))}function u_e(t){const e=async function(o){const a=await bse(o,["data"]);a.to=await t.getAddress(),a.from&&(a.from=await $i(a.from,vse(t.runner)));const l=t.interface,c=Nt(a.value||wH,"overrides.value")===wH,u=(a.data||"0x")==="0x";l.fallback&&!l.fallback.payable&&l.receive&&!u&&!c&&xe(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),xe(l.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data);const h=l.receive||l.fallback&&l.fallback.payable;return xe(h||c,"cannot send value to non-payable fallback","overrides.value",a.value),xe(l.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data),a},n=async function(o){const a=Sm(t.runner,"call");Ye(gse(a),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const l=await e(o);try{return await a.call(l)}catch(c){throw C8(c)&&c.data?t.interface.makeError(c.data,l):c}},r=async function(o){const a=t.runner;Ye(xse(a),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const l=await a.sendTransaction(await e(o)),c=_p(t.runner);return new Y8(t.interface,c,l)},i=async function(o){const a=Sm(t.runner,"estimateGas");return Ye(yse(a),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await a.estimateGas(await e(o))},s=async o=>await r(o);return Bt(s,{_contract:t,estimateGas:i,populateTransaction:e,send:r,staticCall:n}),s}function d_e(t,e){const n=function(...c){const u=t.interface.getFunction(e,c);return Ye(u,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:c}}),u},r=async function(...c){const u=n(...c);let h={};if(u.inputs.length+1===c.length&&(h=await bse(c.pop()),h.from&&(h.from=await $i(h.from,vse(t.runner)))),u.inputs.length!==c.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const m=await c_e(t.runner,u.inputs,c);return Object.assign({},h,await Cs({to:t.getAddress(),data:t.interface.encodeFunctionData(u,m)}))},i=async function(...c){const u=await a(...c);return u.length===1?u[0]:u},s=async function(...c){const u=t.runner;Ye(xse(u),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const h=await u.sendTransaction(await r(...c)),m=_p(t.runner);return new Y8(t.interface,m,h)},o=async function(...c){const u=Sm(t.runner,"estimateGas");return Ye(yse(u),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await u.estimateGas(await r(...c))},a=async function(...c){const u=Sm(t.runner,"call");Ye(gse(u),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const h=await r(...c);let m="0x";try{m=await u.call(h)}catch(y){throw C8(y)&&y.data?t.interface.makeError(y.data,h):y}const g=n(...c);return t.interface.decodeFunctionResult(g,m)},l=async(...c)=>n(...c).constant?await i(...c):await s(...c);return Bt(l,{name:t.interface.getFunctionName(e),_contract:t,_key:e,getFragment:n,estimateGas:o,populateTransaction:r,send:s,staticCall:i,staticCallResult:a}),Object.defineProperty(l,"fragment",{configurable:!1,enumerable:!0,get:()=>{const c=t.interface.getFunction(e);return Ye(c,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),c}}),l}function f_e(t,e){const n=function(...i){const s=t.interface.getEvent(e,i);return Ye(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:i}}),s},r=function(...i){return new l_e(t,n(...i),i)};return Bt(r,{name:t.interface.getEventName(e),_contract:t,_key:e,getFragment:n}),Object.defineProperty(r,"fragment",{configurable:!1,enumerable:!0,get:()=>{const i=t.interface.getEvent(e);return Ye(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),i}}),r}const mk=Symbol.for("_ethersInternal_contract"),wse=new WeakMap;function h_e(t,e){wse.set(t[mk],e)}function Vo(t){return wse.get(t[mk])}function p_e(t){return t&&typeof t=="object"&&"getTopicFilter"in t&&typeof t.getTopicFilter=="function"&&t.fragment}async function J8(t,e){let n,r=null;if(Array.isArray(e)){const s=function(o){if(gr(o,32))return o;const a=t.interface.getEvent(o);return xe(a,"unknown fragment","name",o),a.topicHash};n=e.map(o=>o==null?null:Array.isArray(o)?o.map(s):s(o))}else e==="*"?n=[null]:typeof e=="string"?gr(e,32)?n=[e]:(r=t.interface.getEvent(e),xe(r,"unknown fragment","event",e),n=[r.topicHash]):p_e(e)?n=await e.getTopicFilter():"fragment"in e?(r=e.fragment,n=[r.topicHash]):xe(!1,"unknown event name","event",e);n=n.map(s=>{if(s==null)return null;if(Array.isArray(s)){const o=Array.from(new Set(s.map(a=>a.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return s.toLowerCase()});const i=n.map(s=>s==null?"null":Array.isArray(s)?s.join("|"):s).join("&");return{fragment:r,tag:i,topics:n}}async function Gb(t,e){const{subs:n}=Vo(t);return n.get((await J8(t,e)).tag)||null}async function EH(t,e,n){const r=_p(t.runner);Ye(r,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:i,tag:s,topics:o}=await J8(t,n),{addr:a,subs:l}=Vo(t);let c=l.get(s);if(!c){const h={address:a||t,topics:o},m=b=>{let w=i;if(w==null)try{w=t.interface.getEvent(b.topics[0])}catch{}if(w){const k=w,N=i?t.interface.decodeEventLog(i,b.data,b.topics):[];cM(t,n,N,R=>new a_e(t,R,n,k,b))}else cM(t,n,[],k=>new mse(t,k,n,b))};let g=[];c={tag:s,listeners:[],start:()=>{g.length||g.push(r.on(h,m))},stop:async()=>{if(g.length==0)return;let b=g;g=[],await Promise.all(b),r.off(h,m)}},l.set(s,c)}return c}let lM=Promise.resolve();async function m_e(t,e,n,r){await lM;const i=await Gb(t,e);if(!i)return!1;const s=i.listeners.length;return i.listeners=i.listeners.filter(({listener:o,once:a})=>{const l=Array.from(n);r&&l.push(r(a?null:o));try{o.call(t,...l)}catch{}return!a}),i.listeners.length===0&&(i.stop(),Vo(t).subs.delete(i.tag)),s>0}async function cM(t,e,n,r){try{await lM}catch{}const i=m_e(t,e,n,r);return lM=i,await i}const cA=["then"];var jee;jee=mk;const xw=class xw{constructor(e,n,r,i){Ce(this,"target");Ce(this,"interface");Ce(this,"runner");Ce(this,"filters");Ce(this,jee);Ce(this,"fallback");xe(typeof e=="string"||Tie(e),"invalid value for Contract target","target",e),r==null&&(r=null);const s=aM.from(n);Bt(this,{target:e,runner:r,interface:s}),Object.defineProperty(this,mk,{value:{}});let o,a=null,l=null;if(i){const h=_p(r);l=new Y8(this.interface,h,i)}let c=new Map;if(typeof e=="string")if(gr(e))a=e,o=Promise.resolve(e);else{const h=Sm(r,"resolveName");if(!ON(h))throw Rr("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=h.resolveName(e).then(m=>{if(m==null)throw Rr("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return Vo(this).addr=m,m})}else o=e.getAddress().then(h=>{if(h==null)throw new Error("TODO");return Vo(this).addr=h,h});h_e(this,{addrPromise:o,addr:a,deployTx:l,subs:c});const u=new Proxy({},{get:(h,m,g)=>{if(typeof m=="symbol"||cA.indexOf(m)>=0)return Reflect.get(h,m,g);try{return this.getEvent(m)}catch(y){if(!ds(y,"INVALID_ARGUMENT")||y.argument!=="key")throw y}},has:(h,m)=>cA.indexOf(m)>=0?Reflect.has(h,m):Reflect.has(h,m)||this.interface.hasEvent(String(m))});return Bt(this,{filters:u}),Bt(this,{fallback:s.receive||s.fallback?u_e(this):null}),new Proxy(this,{get:(h,m,g)=>{if(typeof m=="symbol"||m in h||cA.indexOf(m)>=0)return Reflect.get(h,m,g);try{return h.getFunction(m)}catch(y){if(!ds(y,"INVALID_ARGUMENT")||y.argument!=="key")throw y}},has:(h,m)=>typeof m=="symbol"||m in h||cA.indexOf(m)>=0?Reflect.has(h,m):h.interface.hasFunction(m)})}connect(e){return new xw(this.target,this.interface,e)}attach(e){return new xw(e,this.interface,this.runner)}async getAddress(){return await Vo(this).addrPromise}async getDeployedCode(){const e=_p(this.runner);Ye(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const n=await e.getCode(await this.getAddress());return n==="0x"?null:n}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const r=_p(this.runner);return Ye(r!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((i,s)=>{const o=async()=>{try{if(await this.getDeployedCode()!=null)return i(this);r.once("block",o)}catch(a){s(a)}};o()})}deploymentTransaction(){return Vo(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),d_e(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),f_e(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,n,r){n==null&&(n=0),r==null&&(r="latest");const{addr:i,addrPromise:s}=Vo(this),o=i||await s,{fragment:a,topics:l}=await J8(this,e),c={address:o,topics:l,fromBlock:n,toBlock:r},u=_p(this.runner);return Ye(u,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await u.getLogs(c)).map(h=>{let m=a;if(m==null)try{m=this.interface.getEvent(h.topics[0])}catch{}if(m)try{return new W8(h,this.interface,m)}catch(g){return new pse(h,g)}return new Y1(h,u)})}async on(e,n){const r=await EH(this,"on",e);return r.listeners.push({listener:n,once:!1}),r.start(),this}async once(e,n){const r=await EH(this,"once",e);return r.listeners.push({listener:n,once:!0}),r.start(),this}async emit(e,...n){return await cM(this,e,n,null)}async listenerCount(e){if(e){const i=await Gb(this,e);return i?i.listeners.length:0}const{subs:n}=Vo(this);let r=0;for(const{listeners:i}of n.values())r+=i.length;return r}async listeners(e){if(e){const i=await Gb(this,e);return i?i.listeners.map(({listener:s})=>s):[]}const{subs:n}=Vo(this);let r=[];for(const{listeners:i}of n.values())r=r.concat(i.map(({listener:s})=>s));return r}async off(e,n){const r=await Gb(this,e);if(!r)return this;if(n){const i=r.listeners.map(({listener:s})=>s).indexOf(n);i>=0&&r.listeners.splice(i,1)}return(n==null||r.listeners.length===0)&&(r.stop(),Vo(this).subs.delete(r.tag)),this}async removeAllListeners(e){if(e){const n=await Gb(this,e);if(!n)return this;n.stop(),Vo(this).subs.delete(n.tag)}else{const{subs:n}=Vo(this);for(const{tag:r,stop:i}of n.values())i(),n.delete(r)}return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return await this.off(e,n)}static buildClass(e){class n extends xw{constructor(i,s=null){super(i,e,s)}}return n}static from(e,n,r){return r==null&&(r=null),new this(e,n,r)}};let uM=xw;function g_e(){return uM}class sy extends g_e(){}function ER(t){return t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):xe(!1,"unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}class y_e{constructor(e){Ce(this,"name");Bt(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,n){throw new Error("unsupported coin")}async decodeAddress(e,n){throw new Error("unsupported coin")}}const Ese=new RegExp("^(ipfs)://(.*)$","i"),SH=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),Ese,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var Vf,Yp,Hf,Eg,sN,Sse;const Kg=class Kg{constructor(e,n,r){Fe(this,Hf);Ce(this,"provider");Ce(this,"address");Ce(this,"name");Fe(this,Vf);Fe(this,Yp);Bt(this,{provider:e,address:n,name:r}),ge(this,Vf,null),ge(this,Yp,new sy(n,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e))}async supportsWildcard(){return re(this,Vf)==null&&ge(this,Vf,(async()=>{try{return await re(this,Yp).supportsInterface("0x9061b923")}catch(e){if(ds(e,"CALL_EXCEPTION"))return!1;throw ge(this,Vf,null),e}})()),await re(this,Vf)}async getAddress(e){if(e==null&&(e=60),e===60)try{const s=await nt(this,Hf,Eg).call(this,"addr(bytes32)");return s==null||s===Lw?null:s}catch(s){if(ds(s,"CALL_EXCEPTION"))return null;throw s}if(e>=0&&e<2147483648){let s=e+2147483648;const o=await nt(this,Hf,Eg).call(this,"addr(bytes32,uint)",[s]);if(gr(o,20))return xn(o)}let n=null;for(const s of this.provider.plugins)if(s instanceof y_e&&s.supportsCoinType(e)){n=s;break}if(n==null)return null;const r=await nt(this,Hf,Eg).call(this,"addr(bytes32,uint)",[e]);if(r==null||r==="0x")return null;const i=await n.decodeAddress(e,r);if(i!=null)return i;Ye(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:r}})}async getText(e){const n=await nt(this,Hf,Eg).call(this,"text(bytes32,string)",[e]);return n==null||n==="0x"?null:n}async getContentHash(){const e=await nt(this,Hf,Eg).call(this,"contenthash(bytes32)");if(e==null||e==="0x")return null;const n=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const i=n[1]==="e3010170"?"ipfs":"ipns",s=parseInt(n[4],16);if(n[5].length===s*2)return`${i}://${cre("0x"+n[2])}`}const r=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&r[1].length===64)return`bzz://${r[1]}`;Ye(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const n=await this.getText("avatar");if(n==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:n});for(let r=0;r<SH.length;r++){const i=n.match(SH[r]);if(i==null)continue;const s=i[1].toLowerCase();switch(s){case"https":case"data":return e.push({type:"url",value:n}),{linkage:e,url:n};case"ipfs":{const o=ER(n);return e.push({type:"ipfs",value:n}),e.push({type:"url",value:o}),{linkage:e,url:o}}case"erc721":case"erc1155":{const o=s==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:s,value:n});const a=await this.getAddress();if(a==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const l=(i[2]||"").split("/");if(l.length!==2)return e.push({type:`!${s}caip`,value:i[2]||""}),{url:null,linkage:e};const c=l[1],u=new sy(l[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(s==="erc721"){const v=await u.ownerOf(c);if(a!==v)return e.push({type:"!owner",value:v}),{url:null,linkage:e};e.push({type:"owner",value:v})}else if(s==="erc1155"){const v=await u.balanceOf(a,c);if(!v)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:v.toString()})}let h=await u[o](c);if(h==null||h==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:h}),s==="erc1155"&&(h=h.replace("{id}",dd(c,32).substring(2)),e.push({type:"metadata-url-expanded",value:h})),h.match(/^ipfs:/i)&&(h=ER(h)),e.push({type:"metadata-url",value:h});let m={};const g=await new fd(h).send();g.assertOk();try{m=g.bodyJson}catch{try{e.push({type:"!metadata",value:g.bodyText})}catch{const w=g.body;return w&&e.push({type:"!metadata",value:st(w)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!m)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(m)});let y=m.image;if(typeof y!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!y.match(/^(https:\/\/|data:)/i)){if(y.match(Ese)==null)return e.push({type:"!imageUrl-ipfs",value:y}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:y}),y=ER(y)}return e.push({type:"url",value:y}),{linkage:e,url:y}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){const n=await e.getNetwork(),r=n.getPlugin("org.ethers.plugins.network.Ens");return Ye(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:n}}),r.address}static async fromName(e,n){var i;let r=n;for(;;){if(r===""||r==="."||n!=="eth"&&r==="eth")return null;const s=await nt(i=Kg,sN,Sse).call(i,e,r);if(s!=null){const o=new Kg(e,s,n);return r!==n&&!await o.supportsWildcard()?null:o}r=r.split(".").slice(1).join(".")}}};Vf=new WeakMap,Yp=new WeakMap,Hf=new WeakSet,Eg=async function(e,n){n=(n||[]).slice();const r=re(this,Yp).interface;n.unshift(sM(this.name));let i=null;await this.supportsWildcard()&&(i=r.getFunction(e),Ye(i,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),n=[RPe(this.name,255),r.encodeFunctionData(i,n)],e="resolve(bytes,bytes)"),n.push({enableCcipRead:!0});try{const s=await re(this,Yp)[e](...n);return i?r.decodeFunctionResult(i,s)[0]:s}catch(s){if(!ds(s,"CALL_EXCEPTION"))throw s}return null},sN=new WeakSet,Sse=async function(e,n){const r=await Kg.getEnsAddress(e);try{const s=await new sy(r,["function resolver(bytes32) view returns (address)"],e).resolver(sM(n),{enableCcipRead:!0});return s===Lw?null:s}catch(i){throw i}return null},Fe(Kg,sN);let gk=Kg;const AH=BigInt(0);function Pn(t,e){return(function(n){return n==null?e:t(n)})}function Hw(t,e){return(n=>{if(e&&n==null)return null;if(!Array.isArray(n))throw new Error("not an array");return n.map(r=>t(r))})}function J1(t,e){return(n=>{const r={};for(const i in t){let s=i;if(e&&i in e&&!(s in n)){for(const o of e[i])if(o in n){s=o;break}}try{const o=t[i](n[s]);o!==void 0&&(r[i]=o)}catch(o){const a=o instanceof Error?o.message:"not-an-error";Ye(!1,`invalid value for value.${i} (${a})`,"BAD_DATA",{value:n})}}return r})}function x_e(t){switch(t){case!0:case"true":return!0;case!1:case"false":return!1}xe(!1,`invalid boolean; ${JSON.stringify(t)}`,"value",t)}function Ex(t){return xe(gr(t,!0),"invalid data","value",t),t}function cs(t){return xe(gr(t,32),"invalid hash","value",t),t}const v_e=J1({address:xn,blockHash:cs,blockNumber:en,data:Ex,index:en,removed:Pn(x_e,!1),topics:Hw(cs),transactionHash:cs,transactionIndex:en},{index:["logIndex"]});function b_e(t){return v_e(t)}const w_e=J1({hash:Pn(cs),parentHash:cs,parentBeaconBlockRoot:Pn(cs,null),number:en,timestamp:en,nonce:Pn(Ex),difficulty:Nt,gasLimit:Nt,gasUsed:Nt,stateRoot:Pn(cs,null),receiptsRoot:Pn(cs,null),blobGasUsed:Pn(Nt,null),excessBlobGas:Pn(Nt,null),miner:Pn(xn),prevRandao:Pn(cs,null),extraData:Ex,baseFeePerGas:Pn(Nt)},{prevRandao:["mixHash"]});function E_e(t){const e=w_e(t);return e.transactions=t.transactions.map(n=>typeof n=="string"?n:Ase(n)),e}const S_e=J1({transactionIndex:en,blockNumber:en,transactionHash:cs,address:xn,topics:Hw(cs),data:Ex,index:en,blockHash:cs},{index:["logIndex"]});function A_e(t){return S_e(t)}const T_e=J1({to:Pn(xn,null),from:Pn(xn,null),contractAddress:Pn(xn,null),index:en,root:Pn(st),gasUsed:Nt,blobGasUsed:Pn(Nt,null),logsBloom:Pn(Ex),blockHash:cs,hash:cs,logs:Hw(A_e),blockNumber:en,cumulativeGasUsed:Nt,effectiveGasPrice:Pn(Nt),blobGasPrice:Pn(Nt,null),status:Pn(en),type:Pn(en,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function k_e(t){return T_e(t)}function Ase(t){t.to&&Nt(t.to)===AH&&(t.to="0x0000000000000000000000000000000000000000");const e=J1({hash:cs,index:Pn(en,void 0),type:n=>n==="0x"||n==null?0:en(n),accessList:Pn(zm,null),blobVersionedHashes:Pn(Hw(cs,!0),null),authorizationList:Pn(Hw(n=>{let r;if(n.signature)r=n.signature;else{let i=n.yParity;i==="0x1b"?i=0:i==="0x1c"&&(i=1),r=Object.assign({},n,{yParity:i})}return{address:xn(n.address),chainId:Nt(n.chainId),nonce:Nt(n.nonce),signature:no.from(r)}},!1),null),blockHash:Pn(cs,null),blockNumber:Pn(en,null),transactionIndex:Pn(en,null),from:xn,gasPrice:Pn(Nt),maxPriorityFeePerGas:Pn(Nt),maxFeePerGas:Pn(Nt),maxFeePerBlobGas:Pn(Nt,null),gasLimit:Nt,to:Pn(xn,null),value:Nt,nonce:en,data:Ex,creates:Pn(xn,null),chainId:Pn(Nt,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(t);if(e.to==null&&e.creates==null&&(e.creates=mCe(e)),(t.type===1||t.type===2)&&t.accessList==null&&(e.accessList=[]),t.signature?e.signature=no.from(t.signature):e.signature=no.from(t),e.chainId==null){const n=e.signature.legacyChainId;n!=null&&(e.chainId=n)}return e.blockHash&&Nt(e.blockHash)===AH&&(e.blockHash=null),e}const N_e="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class Xx{constructor(e){Ce(this,"name");Bt(this,{name:e})}clone(){return new Xx(this.name)}}class MN extends Xx{constructor(n,r){n==null&&(n=0);super(`org.ethers.network.plugins.GasCost#${n||0}`);Ce(this,"effectiveBlock");Ce(this,"txBase");Ce(this,"txCreate");Ce(this,"txDataZero");Ce(this,"txDataNonzero");Ce(this,"txAccessListStorageKey");Ce(this,"txAccessListAddress");const i={effectiveBlock:n};function s(o,a){let l=(r||{})[o];l==null&&(l=a),xe(typeof l=="number",`invalud value for ${o}`,"costs",r),i[o]=l}s("txBase",21e3),s("txCreate",32e3),s("txDataZero",4),s("txDataNonzero",16),s("txAccessListStorageKey",1900),s("txAccessListAddress",2400),Bt(this,i)}clone(){return new MN(this.effectiveBlock,this)}}class LN extends Xx{constructor(n,r){super("org.ethers.plugins.network.Ens");Ce(this,"address");Ce(this,"targetNetwork");Bt(this,{address:n||N_e,targetNetwork:r??1})}clone(){return new LN(this.address,this.targetNetwork)}}var Jp;const I7=class I7 extends Xx{constructor(n){super("org.ethers.plugins.network.FeeData");Fe(this,Jp);ge(this,Jp,n)}get feeDataFunc(){return re(this,Jp)}async getFeeData(n){return await re(this,Jp).call(this,n)}clone(){return new I7(re(this,Jp))}};Jp=new WeakMap;let TH=I7;var C1,P1;class C_e extends Xx{constructor(n,r){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");Fe(this,C1);Fe(this,P1);ge(this,C1,n),ge(this,P1,r)}get url(){return re(this,C1)}get processFunc(){return re(this,P1)}clone(){return this}}C1=new WeakMap,P1=new WeakMap;const SR=new Map;var Wy,Yy,qf;const Wg=class Wg{constructor(e,n){Fe(this,Wy);Fe(this,Yy);Fe(this,qf);ge(this,Wy,e),ge(this,Yy,Nt(n)),ge(this,qf,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return re(this,Wy)}set name(e){ge(this,Wy,e)}get chainId(){return re(this,Yy)}set chainId(e){ge(this,Yy,Nt(e,"chainId"))}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===Nt(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===Nt(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===Nt(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(re(this,qf).values())}attachPlugin(e){if(re(this,qf).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return re(this,qf).set(e.name,e.clone()),this}getPlugin(e){return re(this,qf).get(e)||null}getPlugins(e){return this.plugins.filter(n=>n.name.split("#")[0]===e)}clone(){const e=new Wg(this.name,this.chainId);return this.plugins.forEach(n=>{e.attachPlugin(n.clone())}),e}computeIntrinsicGas(e){const n=this.getPlugin("org.ethers.plugins.network.GasCost")||new MN;let r=n.txBase;if(e.to==null&&(r+=n.txCreate),e.data)for(let i=2;i<e.data.length;i+=2)e.data.substring(i,i+2)==="00"?r+=n.txDataZero:r+=n.txDataNonzero;if(e.accessList){const i=zm(e.accessList);for(const s in i)r+=n.txAccessListAddress+n.txAccessListStorageKey*i[s].storageKeys.length}return r}static from(e){if(P_e(),e==null)return Wg.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){const n=SR.get(e);if(n)return n();if(typeof e=="bigint")return new Wg("unknown",e);xe(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){xe(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);const n=new Wg(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&n.attachPlugin(new LN(e.ensAddress,e.ensNetwork)),n}xe(!1,"invalid network","network",e)}static register(e,n){typeof e=="number"&&(e=BigInt(e));const r=SR.get(e);r&&xe(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",e),SR.set(e,n)}};Wy=new WeakMap,Yy=new WeakMap,qf=new WeakMap;let Cc=Wg;function kH(t,e){const n=String(t);if(!n.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${t}`);const r=n.split(".");if(r.length===1&&r.push(""),r.length!==2)throw new Error(`invalid gwei value: ${t}`);for(;r[1].length<e;)r[1]+="0";if(r[1].length>9){let i=BigInt(r[1].substring(0,9));r[1].substring(9).match(/^0+$/)||i++,r[1]=i.toString()}return BigInt(r[0]+r[1])}function NH(t){return new C_e(t,async(e,n,r)=>{r.setHeader("User-Agent","ethers");let i;try{const[s,o]=await Promise.all([r.send(),e()]);i=s;const a=i.bodyJson.standard;return{gasPrice:o.gasPrice,maxFeePerGas:kH(a.maxFee,9),maxPriorityFeePerGas:kH(a.maxPriorityFee,9)}}catch(s){Ye(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:i,error:s})}})}let CH=!1;function P_e(){if(CH)return;CH=!0;function t(e,n,r){const i=function(){const s=new Cc(e,n);return r.ensNetwork!=null&&s.attachPlugin(new LN(null,r.ensNetwork)),s.attachPlugin(new MN),(r.plugins||[]).forEach(o=>{s.attachPlugin(o)}),s};Cc.register(e,i),Cc.register(n,i),r.altNames&&r.altNames.forEach(s=>{Cc.register(s,i)})}t("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),t("ropsten",3,{ensNetwork:3}),t("rinkeby",4,{ensNetwork:4}),t("goerli",5,{ensNetwork:5}),t("kovan",42,{ensNetwork:42}),t("sepolia",11155111,{ensNetwork:11155111}),t("holesky",17e3,{ensNetwork:17e3}),t("classic",61,{}),t("classicKotti",6,{}),t("arbitrum",42161,{ensNetwork:1}),t("arbitrum-goerli",421613,{}),t("arbitrum-sepolia",421614,{}),t("base",8453,{ensNetwork:1}),t("base-goerli",84531,{}),t("base-sepolia",84532,{}),t("bnb",56,{ensNetwork:1}),t("bnbt",97,{}),t("filecoin",314,{}),t("filecoin-calibration",314159,{}),t("linea",59144,{ensNetwork:1}),t("linea-goerli",59140,{}),t("linea-sepolia",59141,{}),t("matic",137,{ensNetwork:1,plugins:[NH("https://gasstation.polygon.technology/v2")]}),t("matic-amoy",80002,{}),t("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[NH("https://gasstation-testnet.polygon.technology/v2")]}),t("optimism",10,{ensNetwork:1,plugins:[]}),t("optimism-goerli",420,{}),t("optimism-sepolia",11155420,{}),t("xdai",100,{ensNetwork:1})}function dM(t){return JSON.parse(JSON.stringify(t))}var Bu,Da,Gf,xc,Jy,AT;class __e{constructor(e){Fe(this,Jy);Fe(this,Bu);Fe(this,Da);Fe(this,Gf);Fe(this,xc);ge(this,Bu,e),ge(this,Da,null),ge(this,Gf,4e3),ge(this,xc,-2)}get pollingInterval(){return re(this,Gf)}set pollingInterval(e){ge(this,Gf,e)}start(){re(this,Da)||(ge(this,Da,re(this,Bu)._setTimeout(nt(this,Jy,AT).bind(this),re(this,Gf))),nt(this,Jy,AT).call(this))}stop(){re(this,Da)&&(re(this,Bu)._clearTimeout(re(this,Da)),ge(this,Da,null))}pause(e){this.stop(),e&&ge(this,xc,-2)}resume(){this.start()}}Bu=new WeakMap,Da=new WeakMap,Gf=new WeakMap,xc=new WeakMap,Jy=new WeakSet,AT=async function(){try{const e=await re(this,Bu).getBlockNumber();if(re(this,xc)===-2){ge(this,xc,e);return}if(e!==re(this,xc)){for(let n=re(this,xc)+1;n<=e;n++){if(re(this,Da)==null)return;await re(this,Bu).emit("block",n)}ge(this,xc,e)}}catch{}re(this,Da)!=null&&ge(this,Da,re(this,Bu)._setTimeout(nt(this,Jy,AT).bind(this),re(this,Gf)))};var Xp,Qp,Kf;class X8{constructor(e){Fe(this,Xp);Fe(this,Qp);Fe(this,Kf);ge(this,Xp,e),ge(this,Kf,!1),ge(this,Qp,n=>{this._poll(n,re(this,Xp))})}async _poll(e,n){throw new Error("sub-classes must override this")}start(){re(this,Kf)||(ge(this,Kf,!0),re(this,Qp).call(this,-2),re(this,Xp).on("block",re(this,Qp)))}stop(){re(this,Kf)&&(ge(this,Kf,!1),re(this,Xp).off("block",re(this,Qp)))}pause(e){this.stop()}resume(){this.start()}}Xp=new WeakMap,Qp=new WeakMap,Kf=new WeakMap;var Xy,Uu;class I_e extends X8{constructor(n,r){super(n);Fe(this,Xy);Fe(this,Uu);ge(this,Xy,r),ge(this,Uu,-2)}pause(n){n&&ge(this,Uu,-2),super.pause(n)}async _poll(n,r){const i=await r.getBlock(re(this,Xy));i!=null&&(re(this,Uu)===-2?ge(this,Uu,i.number):i.number>re(this,Uu)&&(r.emit(re(this,Xy),i.number),ge(this,Uu,i.number)))}}Xy=new WeakMap,Uu=new WeakMap;var oN;class R_e extends X8{constructor(n,r){super(n);Fe(this,oN);ge(this,oN,dM(r))}async _poll(n,r){throw new Error("@TODO")}}oN=new WeakMap;var Qy;class O_e extends X8{constructor(n,r){super(n);Fe(this,Qy);ge(this,Qy,r)}async _poll(n,r){const i=await r.getTransactionReceipt(re(this,Qy));i&&r.emit(re(this,Qy),i)}}Qy=new WeakMap;var Fu,Zy,ex,Wf,ja,aN,Tse;class Q8{constructor(e,n){Fe(this,aN);Fe(this,Fu);Fe(this,Zy);Fe(this,ex);Fe(this,Wf);Fe(this,ja);ge(this,Fu,e),ge(this,Zy,dM(n)),ge(this,ex,nt(this,aN,Tse).bind(this)),ge(this,Wf,!1),ge(this,ja,-2)}start(){re(this,Wf)||(ge(this,Wf,!0),re(this,ja)===-2&&re(this,Fu).getBlockNumber().then(e=>{ge(this,ja,e)}),re(this,Fu).on("block",re(this,ex)))}stop(){re(this,Wf)&&(ge(this,Wf,!1),re(this,Fu).off("block",re(this,ex)))}pause(e){this.stop(),e&&ge(this,ja,-2)}resume(){this.start()}}Fu=new WeakMap,Zy=new WeakMap,ex=new WeakMap,Wf=new WeakMap,ja=new WeakMap,aN=new WeakSet,Tse=async function(e){if(re(this,ja)===-2)return;const n=dM(re(this,Zy));n.fromBlock=re(this,ja)+1,n.toBlock=e;const r=await re(this,Fu).getLogs(n);if(r.length===0){re(this,ja)<e-60&&ge(this,ja,e-60);return}for(const i of r)re(this,Fu).emit(re(this,Zy),i),ge(this,ja,i.blockNumber)};const M_e=BigInt(2),L_e=10;function uA(t){return t&&typeof t.then=="function"}function TT(t,e){return t+":"+JSON.stringify(e,(n,r)=>{if(r==null)return"null";if(typeof r=="bigint")return`bigint:${r.toString()}`;if(typeof r=="string")return r.toLowerCase();if(typeof r=="object"&&!Array.isArray(r)){const i=Object.keys(r);return i.sort(),i.reduce((s,o)=>(s[o]=r[o],s),{})}return r})}class kse{constructor(e){Ce(this,"name");Bt(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function D_e(t){return JSON.parse(JSON.stringify(t))}function fM(t){return t=Array.from(new Set(t).values()),t.sort(),t}async function AR(t,e){if(t==null)throw new Error("invalid event");if(Array.isArray(t)&&(t={topics:t}),typeof t=="string")switch(t){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:t,tag:t}}if(gr(t,32)){const n=t.toLowerCase();return{type:"transaction",tag:TT("tx",{hash:n}),hash:n}}if(t.orphan){const n=t;return{type:"orphan",tag:TT("orphan",n),filter:D_e(n)}}if(t.address||t.topics){const n=t,r={topics:(n.topics||[]).map(i=>i==null?null:Array.isArray(i)?fM(i.map(s=>s.toLowerCase())):i.toLowerCase())};if(n.address){const i=[],s=[],o=a=>{gr(a)?i.push(a):s.push((async()=>{i.push(await $i(a,e))})())};Array.isArray(n.address)?n.address.forEach(o):o(n.address),s.length&&await Promise.all(s),r.address=fM(i.map(a=>a.toLowerCase()))}return{filter:r,tag:TT("event",r),type:"event"}}xe(!1,"unknown ProviderEvent","event",t)}function TR(){return new Date().getTime()}const j_e={cacheTimeout:250,pollingInterval:4e3};var As,Yf,Ts,tx,Ko,Zp,Jf,$u,_1,Ba,nx,rx,vn,$o,hM,pM,Kb,mM,Wb,kT;class B_e{constructor(e,n){Fe(this,vn);Fe(this,As);Fe(this,Yf);Fe(this,Ts);Fe(this,tx);Fe(this,Ko);Fe(this,Zp);Fe(this,Jf);Fe(this,$u);Fe(this,_1);Fe(this,Ba);Fe(this,nx);Fe(this,rx);if(ge(this,rx,Object.assign({},j_e,n||{})),e==="any")ge(this,Zp,!0),ge(this,Ko,null);else if(e){const r=Cc.from(e);ge(this,Zp,!1),ge(this,Ko,Promise.resolve(r)),setTimeout(()=>{this.emit("network",r,null)},0)}else ge(this,Zp,!1),ge(this,Ko,null);ge(this,$u,-1),ge(this,Jf,new Map),ge(this,As,new Map),ge(this,Yf,new Map),ge(this,Ts,null),ge(this,tx,!1),ge(this,_1,1),ge(this,Ba,new Map),ge(this,nx,!1)}get pollingInterval(){return re(this,rx).pollingInterval}get provider(){return this}get plugins(){return Array.from(re(this,Yf).values())}attachPlugin(e){if(re(this,Yf).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return re(this,Yf).set(e.name,e.connect(this)),this}getPlugin(e){return re(this,Yf).get(e)||null}get disableCcipRead(){return re(this,nx)}set disableCcipRead(e){ge(this,nx,!!e)}async ccipReadFetch(e,n,r){if(this.disableCcipRead||r.length===0||e.to==null)return null;const i=e.to.toLowerCase(),s=n.toLowerCase(),o=[];for(let a=0;a<r.length;a++){const l=r[a],c=l.replace("{sender}",i).replace("{data}",s),u=new fd(c);l.indexOf("{data}")===-1&&(u.body={data:s,sender:i}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:u,index:a,urls:r});let h="unknown error",m;try{m=await u.send()}catch(g){o.push(g.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:{error:g}});continue}try{const g=m.bodyJson;if(g.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:u,result:g}),g.data;g.message&&(h=g.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:g})}catch{}Ye(m.statusCode<400||m.statusCode>=500,`response not found during CCIP fetch: ${h}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:l,errorMessage:h}}),o.push(h)}Ye(!1,`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:r,errorMessages:o}})}_wrapBlock(e,n){return new r_e(E_e(e),this)}_wrapLog(e,n){return new Y1(b_e(e),this)}_wrapTransactionReceipt(e,n){return new dse(k_e(e),this)}_wrapTransactionResponse(e,n){return new Vw(Ase(e),this)}_detectNetwork(){Ye(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){Ye(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=en(await nt(this,vn,$o).call(this,{method:"getBlockNumber"}),"%response");return re(this,$u)>=0&&ge(this,$u,e),e}_getAddress(e){return $i(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(gr(e))return gr(e,32)?e:Pl(e);if(typeof e=="bigint"&&(e=en(e,"blockTag")),typeof e=="number")return e>=0?Pl(e):re(this,$u)>=0?Pl(re(this,$u)+e):this.getBlockNumber().then(n=>Pl(n+e));xe(!1,"invalid blockTag","blockTag",e)}_getFilter(e){const n=(e.topics||[]).map(l=>l==null?null:Array.isArray(l)?fM(l.map(c=>c.toLowerCase())):l.toLowerCase()),r="blockHash"in e?e.blockHash:void 0,i=(l,c,u)=>{let h;switch(l.length){case 0:break;case 1:h=l[0];break;default:l.sort(),h=l}if(r&&(c!=null||u!=null))throw new Error("invalid filter");const m={};return h&&(m.address=h),n.length&&(m.topics=n),c&&(m.fromBlock=c),u&&(m.toBlock=u),r&&(m.blockHash=r),m};let s=[];if(e.address)if(Array.isArray(e.address))for(const l of e.address)s.push(this._getAddress(l));else s.push(this._getAddress(e.address));let o;"fromBlock"in e&&(o=this._getBlockTag(e.fromBlock));let a;return"toBlock"in e&&(a=this._getBlockTag(e.toBlock)),s.filter(l=>typeof l!="string").length||o!=null&&typeof o!="string"||a!=null&&typeof a!="string"?Promise.all([Promise.all(s),o,a]).then(l=>i(l[0],l[1],l[2])):i(s,o,a)}_getTransactionRequest(e){const n=zw(e),r=[];if(["to","from"].forEach(i=>{if(n[i]==null)return;const s=$i(n[i],this);uA(s)?r.push((async function(){n[i]=await s})()):n[i]=s}),n.blockTag!=null){const i=this._getBlockTag(n.blockTag);uA(i)?r.push((async function(){n.blockTag=await i})()):n.blockTag=i}return r.length?(async function(){return await Promise.all(r),n})():n}async getNetwork(){if(re(this,Ko)==null){const i=(async()=>{try{const s=await this._detectNetwork();return this.emit("network",s,null),s}catch(s){throw re(this,Ko)===i&&ge(this,Ko,null),s}})();return ge(this,Ko,i),(await i).clone()}const e=re(this,Ko),[n,r]=await Promise.all([e,this._detectNetwork()]);return n.chainId!==r.chainId&&(re(this,Zp)?(this.emit("network",r,n),re(this,Ko)===e&&ge(this,Ko,Promise.resolve(r))):Ye(!1,`network changed: ${n.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),n.clone()}async getFeeData(){const e=await this.getNetwork(),n=async()=>{const{_block:i,gasPrice:s,priorityFee:o}=await Cs({_block:nt(this,vn,mM).call(this,"latest",!1),gasPrice:(async()=>{try{const u=await nt(this,vn,$o).call(this,{method:"getGasPrice"});return Nt(u,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const u=await nt(this,vn,$o).call(this,{method:"getPriorityFee"});return Nt(u,"%response")}catch{}return null})()});let a=null,l=null;const c=this._wrapBlock(i,e);return c&&c.baseFeePerGas&&(l=o??BigInt("1000000000"),a=c.baseFeePerGas*M_e+l),new bH(s,a,l)},r=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){const i=new fd(r.url),s=await r.processFunc(n,this,i);return new bH(s.gasPrice,s.maxFeePerGas,s.maxPriorityFeePerGas)}return await n()}async estimateGas(e){let n=this._getTransactionRequest(e);return uA(n)&&(n=await n),Nt(await nt(this,vn,$o).call(this,{method:"estimateGas",transaction:n}),"%response")}async call(e){const{tx:n,blockTag:r}=await Cs({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await nt(this,vn,pM).call(this,nt(this,vn,hM).call(this,n,r,e.enableCcipRead?0:-1))}async getBalance(e,n){return Nt(await nt(this,vn,Kb).call(this,{method:"getBalance"},e,n),"%response")}async getTransactionCount(e,n){return en(await nt(this,vn,Kb).call(this,{method:"getTransactionCount"},e,n),"%response")}async getCode(e,n){return st(await nt(this,vn,Kb).call(this,{method:"getCode"},e,n))}async getStorage(e,n,r){const i=Nt(n,"position");return st(await nt(this,vn,Kb).call(this,{method:"getStorage",position:i},e,r))}async broadcastTransaction(e){const{blockNumber:n,hash:r,network:i}=await Cs({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),s=V8.from(e);if(s.hash!==r)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(s,i).replaceableTransaction(n)}async getBlock(e,n){const{network:r,params:i}=await Cs({network:this.getNetwork(),params:nt(this,vn,mM).call(this,e,!!n)});return i==null?null:this._wrapBlock(i,r)}async getTransaction(e){const{network:n,params:r}=await Cs({network:this.getNetwork(),params:nt(this,vn,$o).call(this,{method:"getTransaction",hash:e})});return r==null?null:this._wrapTransactionResponse(r,n)}async getTransactionReceipt(e){const{network:n,params:r}=await Cs({network:this.getNetwork(),params:nt(this,vn,$o).call(this,{method:"getTransactionReceipt",hash:e})});if(r==null)return null;if(r.gasPrice==null&&r.effectiveGasPrice==null){const i=await nt(this,vn,$o).call(this,{method:"getTransaction",hash:e});if(i==null)throw new Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=i.gasPrice}return this._wrapTransactionReceipt(r,n)}async getTransactionResult(e){const{result:n}=await Cs({network:this.getNetwork(),result:nt(this,vn,$o).call(this,{method:"getTransactionResult",hash:e})});return n==null?null:st(n)}async getLogs(e){let n=this._getFilter(e);uA(n)&&(n=await n);const{network:r,params:i}=await Cs({network:this.getNetwork(),params:nt(this,vn,$o).call(this,{method:"getLogs",filter:n})});return i.map(s=>this._wrapLog(s,r))}_getProvider(e){Ye(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await gk.fromName(this,e)}async getAvatar(e){const n=await this.getResolver(e);return n?await n.getAvatar():null}async resolveName(e){const n=await this.getResolver(e);return n?await n.getAddress():null}async lookupAddress(e){e=xn(e);const n=sM(e.substring(2).toLowerCase()+".addr.reverse");try{const r=await gk.getEnsAddress(this),s=await new sy(r,["function resolver(bytes32) view returns (address)"],this).resolver(n);if(s==null||s===Lw)return null;const a=await new sy(s,["function name(bytes32) view returns (string)"],this).name(n);return await this.resolveName(a)!==e?null:a}catch(r){if(ds(r,"BAD_DATA")&&r.value==="0x"||ds(r,"CALL_EXCEPTION"))return null;throw r}return null}async waitForTransaction(e,n,r){const i=n??1;return i===0?this.getTransactionReceipt(e):new Promise(async(s,o)=>{let a=null;const l=(async c=>{try{const u=await this.getTransactionReceipt(e);if(u!=null&&c-u.blockNumber+1>=i){s(u),a&&(clearTimeout(a),a=null);return}}catch(u){console.log("EEE",u)}this.once("block",l)});r!=null&&(a=setTimeout(()=>{a!=null&&(a=null,this.off("block",l),o(Rr("timeout","TIMEOUT",{reason:"timeout"})))},r)),l(await this.getBlockNumber())})}async waitForBlock(e){Ye(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const n=re(this,Ba).get(e);n&&(n.timer&&clearTimeout(n.timer),re(this,Ba).delete(e))}_setTimeout(e,n){n==null&&(n=0);const r=pb(this,_1)._++,i=()=>{re(this,Ba).delete(r),e()};if(this.paused)re(this,Ba).set(r,{timer:null,func:i,time:n});else{const s=setTimeout(i,n);re(this,Ba).set(r,{timer:s,func:i,time:TR()})}return r}_forEachSubscriber(e){for(const n of re(this,As).values())e(n.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new kse(e.type);case"block":{const n=new __e(this);return n.pollingInterval=this.pollingInterval,n}case"safe":case"finalized":return new I_e(this,e.type);case"event":return new Q8(this,e.filter);case"transaction":return new O_e(this,e.hash);case"orphan":return new R_e(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,n){for(const r of re(this,As).values())if(r.subscriber===e){r.started&&r.subscriber.stop(),r.subscriber=n,r.started&&n.start(),re(this,Ts)!=null&&n.pause(re(this,Ts));break}}async on(e,n){const r=await nt(this,vn,kT).call(this,e);return r.listeners.push({listener:n,once:!1}),r.started||(r.subscriber.start(),r.started=!0,re(this,Ts)!=null&&r.subscriber.pause(re(this,Ts))),this}async once(e,n){const r=await nt(this,vn,kT).call(this,e);return r.listeners.push({listener:n,once:!0}),r.started||(r.subscriber.start(),r.started=!0,re(this,Ts)!=null&&r.subscriber.pause(re(this,Ts))),this}async emit(e,...n){const r=await nt(this,vn,Wb).call(this,e,n);if(!r||r.listeners.length===0)return!1;const i=r.listeners.length;return r.listeners=r.listeners.filter(({listener:s,once:o})=>{const a=new ure(this,o?null:s,e);try{s.call(this,...n,a)}catch{}return!o}),r.listeners.length===0&&(r.started&&r.subscriber.stop(),re(this,As).delete(r.tag)),i>0}async listenerCount(e){if(e){const r=await nt(this,vn,Wb).call(this,e);return r?r.listeners.length:0}let n=0;for(const{listeners:r}of re(this,As).values())n+=r.length;return n}async listeners(e){if(e){const r=await nt(this,vn,Wb).call(this,e);return r?r.listeners.map(({listener:i})=>i):[]}let n=[];for(const{listeners:r}of re(this,As).values())n=n.concat(r.map(({listener:i})=>i));return n}async off(e,n){const r=await nt(this,vn,Wb).call(this,e);if(!r)return this;if(n){const i=r.listeners.map(({listener:s})=>s).indexOf(n);i>=0&&r.listeners.splice(i,1)}return(!n||r.listeners.length===0)&&(r.started&&r.subscriber.stop(),re(this,As).delete(r.tag)),this}async removeAllListeners(e){if(e){const{tag:n,started:r,subscriber:i}=await nt(this,vn,kT).call(this,e);r&&i.stop(),re(this,As).delete(n)}else for(const[n,{started:r,subscriber:i}]of re(this,As))r&&i.stop(),re(this,As).delete(n);return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return this.off(e,n)}get destroyed(){return re(this,tx)}destroy(){this.removeAllListeners();for(const e of re(this,Ba).keys())this._clearTimeout(e);ge(this,tx,!0)}get paused(){return re(this,Ts)!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(ge(this,$u,-1),re(this,Ts)!=null){if(re(this,Ts)==!!e)return;Ye(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(n=>n.pause(e)),ge(this,Ts,!!e);for(const n of re(this,Ba).values())n.timer&&clearTimeout(n.timer),n.time=TR()-n.time}resume(){if(re(this,Ts)!=null){this._forEachSubscriber(e=>e.resume()),ge(this,Ts,null);for(const e of re(this,Ba).values()){let n=e.time;n<0&&(n=0),e.time=TR(),setTimeout(e.func,n)}}}}As=new WeakMap,Yf=new WeakMap,Ts=new WeakMap,tx=new WeakMap,Ko=new WeakMap,Zp=new WeakMap,Jf=new WeakMap,$u=new WeakMap,_1=new WeakMap,Ba=new WeakMap,nx=new WeakMap,rx=new WeakMap,vn=new WeakSet,$o=async function(e){const n=re(this,rx).cacheTimeout;if(n<0)return await this._perform(e);const r=TT(e.method,e);let i=re(this,Jf).get(r);return i||(i=this._perform(e),re(this,Jf).set(r,i),setTimeout(()=>{re(this,Jf).get(r)===i&&re(this,Jf).delete(r)},n)),await i},hM=async function(e,n,r){Ye(r<L_e,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:n,enableCcipRead:!0})});const i=zw(e);try{return st(await this._perform({method:"call",transaction:i,blockTag:n}))}catch(s){if(!this.disableCcipRead&&C8(s)&&s.data&&r>=0&&n==="latest"&&i.to!=null&&mr(s.data,0,4)==="0x556f1830"){const o=s.data,a=await $i(i.to,this);let l;try{l=V_e(mr(s.data,4))}catch(h){Ye(!1,h.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:i,info:{data:o}})}Ye(l.sender.toLowerCase()===a.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:i,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:l.errorArgs}});const c=await this.ccipReadFetch(i,l.calldata,l.urls);Ye(c!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:i,info:{data:s.data,errorArgs:l.errorArgs}});const u={to:a,data:On([l.selector,z_e([c,l.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:u});try{const h=await nt(this,vn,hM).call(this,u,n,r+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},u),result:h}),h}catch(h){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},u),error:h}),h}}throw s}},pM=async function(e){const{value:n}=await Cs({network:this.getNetwork(),value:e});return n},Kb=async function(e,n,r){let i=this._getAddress(n),s=this._getBlockTag(r);return(typeof i!="string"||typeof s!="string")&&([i,s]=await Promise.all([i,s])),await nt(this,vn,pM).call(this,nt(this,vn,$o).call(this,Object.assign(e,{address:i,blockTag:s})))},mM=async function(e,n){if(gr(e,32))return await nt(this,vn,$o).call(this,{method:"getBlock",blockHash:e,includeTransactions:n});let r=this._getBlockTag(e);return typeof r!="string"&&(r=await r),await nt(this,vn,$o).call(this,{method:"getBlock",blockTag:r,includeTransactions:n})},Wb=async function(e,n){let r=await AR(e,this);return r.type==="event"&&n&&n.length>0&&n[0].removed===!0&&(r=await AR({orphan:"drop-log",log:n[0]},this)),re(this,As).get(r.tag)||null},kT=async function(e){const n=await AR(e,this),r=n.tag;let i=re(this,As).get(r);return i||(i={subscriber:this._getSubscriber(n),tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},re(this,As).set(r,i)),i};function U_e(t,e){try{const n=gM(t,e);if(n)return lk(n)}catch{}return null}function gM(t,e){if(t==="0x")return null;try{const n=en(mr(t,e,e+32)),r=en(mr(t,n,n+32));return mr(t,n+32,n+32+r)}catch{}return null}function PH(t){const e=jr(t);if(e.length>32)throw new Error("internal; should not happen");const n=new Uint8Array(32);return n.set(e,32-e.length),n}function F_e(t){if(t.length%32===0)return t;const e=new Uint8Array(Math.ceil(t.length/32)*32);return e.set(t),e}const $_e=new Uint8Array([]);function z_e(t){const e=[];let n=0;for(let r=0;r<t.length;r++)e.push($_e),n+=32;for(let r=0;r<t.length;r++){const i=bt(t[r]);e[r]=PH(n),e.push(PH(i.length)),e.push(F_e(i)),n+=32+Math.ceil(i.length/32)*32}return On(e)}const _H="0x0000000000000000000000000000000000000000000000000000000000000000";function V_e(t){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};Ye(ey(t)>=160,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const n=mr(t,0,32);Ye(mr(n,0,12)===mr(_H,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=mr(n,12);try{const r=[],i=en(mr(t,32,64)),s=en(mr(t,i,i+32)),o=mr(t,i+32);for(let a=0;a<s;a++){const l=U_e(o,a*32);if(l==null)throw new Error("abort");r.push(l)}e.urls=r}catch{Ye(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const r=gM(t,64);if(r==null)throw new Error("abort");e.calldata=r}catch{Ye(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}Ye(mr(t,100,128)===mr(_H,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=mr(t,96,100);try{const r=gM(t,128);if(r==null)throw new Error("abort");e.extraData=r}catch{Ye(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(r=>e[r]),e}function tp(t,e){if(t.provider)return t.provider;Ye(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function IH(t,e){let n=zw(e);if(n.to!=null&&(n.to=$i(n.to,t)),n.from!=null){const r=n.from;n.from=Promise.all([t.getAddress(),$i(r,t)]).then(([i,s])=>(xe(i.toLowerCase()===s.toLowerCase(),"transaction from mismatch","tx.from",s),i))}else n.from=t.getAddress();return await Cs(n)}class Z8{constructor(e){Ce(this,"provider");Bt(this,{provider:e||null})}async getNonce(e){return tp(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await IH(this,e)}async populateTransaction(e){const n=tp(this,"populateTransaction"),r=await IH(this,e);r.nonce==null&&(r.nonce=await this.getNonce("pending")),r.gasLimit==null&&(r.gasLimit=await this.estimateGas(r));const i=await this.provider.getNetwork();if(r.chainId!=null){const o=Nt(r.chainId);xe(o===i.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else r.chainId=i.chainId;const s=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||s)?xe(!1,"eip-1559 transaction do not support gasPrice","tx",e):(r.type===0||r.type===1)&&s&&xe(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1){const o=await n.getFeeData();Ye(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice)}else{const o=await n.getFeeData();if(r.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(r.authorizationList&&r.authorizationList.length?r.type=4:r.type=2,r.gasPrice!=null){const a=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=a,r.maxPriorityFeePerGas=a}else r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(Ye(!s,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice),r.type=0):Ye(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(r.type===2||r.type===3||r.type===4)&&(r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await Cs(r)}async populateAuthorization(e){const n=Object.assign({},e);return n.chainId==null&&(n.chainId=(await tp(this,"getNetwork").getNetwork()).chainId),n.nonce==null&&(n.nonce=await this.getNonce()),n}async estimateGas(e){return tp(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return tp(this,"call").call(await this.populateCall(e))}async resolveName(e){return await tp(this,"resolveName").resolveName(e)}async sendTransaction(e){const n=tp(this,"sendTransaction"),r=await this.populateTransaction(e);delete r.from;const i=V8.from(r);return await n.broadcastTransaction(await this.signTransaction(i))}authorize(e){Ye(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}var ix,NT;const R7=class R7 extends Z8{constructor(n,r){super(r);Fe(this,ix);Ce(this,"address");Bt(this,{address:n})}async getAddress(){return this.address}connect(n){return new R7(this.address,n)}async signTransaction(n){nt(this,ix,NT).call(this,"transactions","signTransaction")}async signMessage(n){nt(this,ix,NT).call(this,"messages","signMessage")}async signTypedData(n,r,i){nt(this,ix,NT).call(this,"typed-data","signTypedData")}};ix=new WeakSet,NT=function(n,r){Ye(!1,`VoidSigner cannot sign ${n}`,"UNSUPPORTED_OPERATION",{operation:r})};let yM=R7;function H_e(t){return JSON.parse(JSON.stringify(t))}var qs,vc,em,Xf,tm,sx,bh,xM,vM;class Nse{constructor(e){Fe(this,bh);Fe(this,qs);Fe(this,vc);Fe(this,em);Fe(this,Xf);Fe(this,tm);Fe(this,sx);ge(this,qs,e),ge(this,vc,null),ge(this,em,nt(this,bh,xM).bind(this)),ge(this,Xf,!1),ge(this,tm,null),ge(this,sx,!1)}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,n){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}start(){re(this,Xf)||(ge(this,Xf,!0),nt(this,bh,xM).call(this,-2))}stop(){re(this,Xf)&&(ge(this,Xf,!1),ge(this,sx,!0),nt(this,bh,vM).call(this),re(this,qs).off("block",re(this,em)))}pause(e){e&&nt(this,bh,vM).call(this),re(this,qs).off("block",re(this,em))}resume(){this.start()}}qs=new WeakMap,vc=new WeakMap,em=new WeakMap,Xf=new WeakMap,tm=new WeakMap,sx=new WeakMap,bh=new WeakSet,xM=async function(e){try{re(this,vc)==null&&ge(this,vc,this._subscribe(re(this,qs)));let n=null;try{n=await re(this,vc)}catch(s){if(!ds(s,"UNSUPPORTED_OPERATION")||s.operation!=="eth_newFilter")throw s}if(n==null){ge(this,vc,null),re(this,qs)._recoverSubscriber(this,this._recover(re(this,qs)));return}const r=await re(this,qs).getNetwork();if(re(this,tm)||ge(this,tm,r),re(this,tm).chainId!==r.chainId)throw new Error("chaid changed");if(re(this,sx))return;const i=await re(this,qs).send("eth_getFilterChanges",[n]);await this._emitResults(re(this,qs),i)}catch(n){console.log("@TODO",n)}re(this,qs).once("block",re(this,em))},vM=function(){const e=re(this,vc);e&&(ge(this,vc,null),e.then(n=>{re(this,qs).destroyed||re(this,qs).send("eth_uninstallFilter",[n])}))};var nm;class q_e extends Nse{constructor(n,r){super(n);Fe(this,nm);ge(this,nm,H_e(r))}_recover(n){return new Q8(n,re(this,nm))}async _subscribe(n){return await n.send("eth_newFilter",[re(this,nm)])}async _emitResults(n,r){for(const i of r)n.emit(re(this,nm),n._wrapLog(i,n._network))}}nm=new WeakMap;class G_e extends Nse{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,n){for(const r of n)e.emit("pending",r)}}const K_e="bigint,boolean,function,number,string,symbol".split(/,/g);function CT(t){if(t==null||K_e.indexOf(typeof t)>=0||typeof t.getAddress=="function")return t;if(Array.isArray(t))return t.map(CT);if(typeof t=="object")return Object.keys(t).reduce((e,n)=>(e[n]=t[n],e),{});throw new Error(`should not happen: ${t} (${typeof t})`)}function W_e(t){return new Promise(e=>{setTimeout(e,t)})}function J0(t){return t&&t.toLowerCase()}function RH(t){return t&&typeof t.pollingInterval=="number"}const Cse={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class kR extends Z8{constructor(n,r){super(n);Ce(this,"address");r=xn(r),Bt(this,{address:r})}connect(n){Ye(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(n){return await this.populateCall(n)}async sendUncheckedTransaction(n){const r=CT(n),i=[];if(r.from){const o=r.from;i.push((async()=>{const a=await $i(o,this.provider);xe(a!=null&&a.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=a})())}else r.from=this.address;if(r.gasLimit==null&&i.push((async()=>{r.gasLimit=await this.provider.estimateGas({...r,from:this.address})})()),r.to!=null){const o=r.to;i.push((async()=>{r.to=await $i(o,this.provider)})())}i.length&&await Promise.all(i);const s=this.provider.getRpcTransaction(r);return this.provider.send("eth_sendTransaction",[s])}async sendTransaction(n){const r=await this.provider.getBlockNumber(),i=await this.sendUncheckedTransaction(n);return await new Promise((s,o)=>{const a=[1e3,100];let l=0;const c=async()=>{try{const u=await this.provider.getTransaction(i);if(u!=null){s(u.replaceableTransaction(r));return}}catch(u){if(ds(u,"CANCELLED")||ds(u,"BAD_DATA")||ds(u,"NETWORK_ERROR")||ds(u,"UNSUPPORTED_OPERATION")){u.info==null&&(u.info={}),u.info.sendTransactionHash=i,o(u);return}if(ds(u,"INVALID_ARGUMENT")&&(l++,u.info==null&&(u.info={}),u.info.sendTransactionHash=i,l>10)){o(u);return}this.provider.emit("error",Rr("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:u}))}this.provider._setTimeout(()=>{c()},a.pop()||4e3)};c()})}async signTransaction(n){const r=CT(n);if(r.from){const s=await $i(r.from,this.provider);xe(s!=null&&s.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=s}else r.from=this.address;const i=this.provider.getRpcTransaction(r);return await this.provider.send("eth_signTransaction",[i])}async signMessage(n){const r=typeof n=="string"?mi(n):n;return await this.provider.send("personal_sign",[st(r),this.address.toLowerCase()])}async signTypedData(n,r,i){const s=CT(i),o=await bm.resolveNames(n,r,s,async a=>{const l=await $i(a);return xe(l!=null,"TypedData does not support null address","value",a),l});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(bm.getPayload(o.domain,r,o.value))])}async unlock(n){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),n,null])}async _legacySignMessage(n){const r=typeof n=="string"?mi(n):n;return await this.provider.send("eth_sign",[this.address.toLowerCase(),st(r)])}}var rm,ox,zu,bc,Tl,Ua,yo,I1,bM;class Y_e extends B_e{constructor(n,r){super(n,r);Fe(this,I1);Fe(this,rm);Fe(this,ox);Fe(this,zu);Fe(this,bc);Fe(this,Tl);Fe(this,Ua);Fe(this,yo);ge(this,ox,1),ge(this,rm,Object.assign({},Cse,r||{})),ge(this,zu,[]),ge(this,bc,null),ge(this,Ua,null),ge(this,yo,null);{let s=null;const o=new Promise(a=>{s=a});ge(this,Tl,{promise:o,resolve:s})}const i=this._getOption("staticNetwork");typeof i=="boolean"?(xe(!i||n!=="any","staticNetwork cannot be used on special network 'any'","options",r),i&&n!=null&&ge(this,Ua,Cc.from(n))):i&&(xe(n==null||i.matches(n),"staticNetwork MUST match network object","options",r),ge(this,Ua,i))}_getOption(n){return re(this,rm)[n]}get _network(){return Ye(re(this,Ua),"network is not available yet","NETWORK_ERROR"),re(this,Ua)}async _perform(n){if(n.method==="call"||n.method==="estimateGas"){let i=n.transaction;if(i&&i.type!=null&&Nt(i.type)&&i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null){const s=await this.getFeeData();s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null&&(n=Object.assign({},n,{transaction:Object.assign({},i,{type:void 0})}))}}const r=this.getRpcRequest(n);return r!=null?await this.send(r.method,r.args):super._perform(n)}async _detectNetwork(){const n=this._getOption("staticNetwork");if(n)if(n===!0){if(re(this,Ua))return re(this,Ua)}else return n;return re(this,yo)?await re(this,yo):this.ready?(ge(this,yo,(async()=>{try{const r=Cc.from(Nt(await this.send("eth_chainId",[])));return ge(this,yo,null),r}catch(r){throw ge(this,yo,null),r}})()),await re(this,yo)):(ge(this,yo,(async()=>{const r={id:pb(this,ox)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:r});let i;try{i=(await this._send(r))[0],ge(this,yo,null)}catch(s){throw ge(this,yo,null),this.emit("debug",{action:"receiveRpcError",error:s}),s}if(this.emit("debug",{action:"receiveRpcResult",result:i}),"result"in i)return Cc.from(Nt(i.result));throw this.getRpcError(r,i)})()),await re(this,yo))}_start(){re(this,Tl)==null||re(this,Tl).resolve==null||(re(this,Tl).resolve(),ge(this,Tl,null),(async()=>{for(;re(this,Ua)==null&&!this.destroyed;)try{ge(this,Ua,await this._detectNetwork())}catch(n){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",Rr("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:n}})),await W_e(1e3)}nt(this,I1,bM).call(this)})())}async _waitUntilReady(){if(re(this,Tl)!=null)return await re(this,Tl).promise}_getSubscriber(n){return n.type==="pending"?new G_e(this):n.type==="event"?this._getOption("polling")?new Q8(this,n.filter):new q_e(this,n.filter):n.type==="orphan"&&n.filter.orphan==="drop-log"?new kse("orphan"):super._getSubscriber(n)}get ready(){return re(this,Tl)==null}getRpcTransaction(n){const r={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(i=>{if(n[i]==null)return;let s=i;i==="gasLimit"&&(s="gas"),r[s]=Pl(Nt(n[i],`tx.${i}`))}),["from","to","data"].forEach(i=>{n[i]!=null&&(r[i]=st(n[i]))}),n.accessList&&(r.accessList=zm(n.accessList)),n.blobVersionedHashes&&(r.blobVersionedHashes=n.blobVersionedHashes.map(i=>i.toLowerCase())),n.authorizationList&&(r.authorizationList=n.authorizationList.map(i=>{const s=Pie(i);return{address:s.address,nonce:Pl(s.nonce),chainId:Pl(s.chainId),yParity:Pl(s.signature.yParity),r:Pl(s.signature.r),s:Pl(s.signature.s)}})),r}getRpcRequest(n){switch(n.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[J0(n.address),n.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[J0(n.address),n.blockTag]};case"getCode":return{method:"eth_getCode",args:[J0(n.address),n.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[J0(n.address),"0x"+n.position.toString(16),n.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[n.signedTransaction]};case"getBlock":if("blockTag"in n)return{method:"eth_getBlockByNumber",args:[n.blockTag,!!n.includeTransactions]};if("blockHash"in n)return{method:"eth_getBlockByHash",args:[n.blockHash,!!n.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[n.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[n.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(n.transaction),n.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(n.transaction)]};case"getLogs":return n.filter&&n.filter.address!=null&&(Array.isArray(n.filter.address)?n.filter.address=n.filter.address.map(J0):n.filter.address=J0(n.filter.address)),{method:"eth_getLogs",args:[n.filter]}}return null}getRpcError(n,r){const{method:i}=n,{error:s}=r;if(i==="eth_estimateGas"&&s.message){const l=s.message;if(!l.match(/revert/i)&&l.match(/insufficient funds/i))return Rr("insufficient funds","INSUFFICIENT_FUNDS",{transaction:n.params[0],info:{payload:n,error:s}});if(l.match(/nonce/i)&&l.match(/too low/i))return Rr("nonce has already been used","NONCE_EXPIRED",{transaction:n.params[0],info:{payload:n,error:s}})}if(i==="eth_call"||i==="eth_estimateGas"){const l=wM(s),c=$w.getBuiltinCallException(i==="eth_call"?"call":"estimateGas",n.params[0],l?l.data:null);return c.info={error:s,payload:n},c}const o=JSON.stringify(Q_e(s));if(typeof s.message=="string"&&s.message.match(/user denied|ethers-user-denied/i))return Rr("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[i]||"unknown",reason:"rejected",info:{payload:n,error:s}});if(i==="eth_sendRawTransaction"||i==="eth_sendTransaction"){const l=n.params[0];if(o.match(/insufficient funds|base fee exceeds gas limit/i))return Rr("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:l,info:{error:s}});if(o.match(/nonce/i)&&o.match(/too low/i))return Rr("nonce has already been used","NONCE_EXPIRED",{transaction:l,info:{error:s}});if(o.match(/replacement transaction/i)&&o.match(/underpriced/i))return Rr("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:l,info:{error:s}});if(o.match(/only replay-protected/i))return Rr("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:i,info:{transaction:l,info:{error:s}}})}let a=!!o.match(/the method .* does not exist/i);return a||s&&s.details&&s.details.startsWith("Unauthorized method:")&&(a=!0),a?Rr("unsupported operation","UNSUPPORTED_OPERATION",{operation:n.method,info:{error:s,payload:n}}):Rr("could not coalesce error","UNKNOWN_ERROR",{error:s,payload:n})}send(n,r){if(this.destroyed)return Promise.reject(Rr("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n}));const i=pb(this,ox)._++,s=new Promise((o,a)=>{re(this,zu).push({resolve:o,reject:a,payload:{method:n,params:r,id:i,jsonrpc:"2.0"}})});return nt(this,I1,bM).call(this),s}async getSigner(n){n==null&&(n=0);const r=this.send("eth_accounts",[]);if(typeof n=="number"){const s=await r;if(n>=s.length)throw new Error("no such account");return new kR(this,s[n])}const{accounts:i}=await Cs({network:this.getNetwork(),accounts:r});n=xn(n);for(const s of i)if(xn(s)===n)return new kR(this,n);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(r=>new kR(this,r))}destroy(){re(this,bc)&&(clearTimeout(re(this,bc)),ge(this,bc,null));for(const{payload:n,reject:r}of re(this,zu))r(Rr("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n.method}));ge(this,zu,[]),super.destroy()}}rm=new WeakMap,ox=new WeakMap,zu=new WeakMap,bc=new WeakMap,Tl=new WeakMap,Ua=new WeakMap,yo=new WeakMap,I1=new WeakSet,bM=function(){if(re(this,bc))return;const n=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");ge(this,bc,setTimeout(()=>{ge(this,bc,null);const r=re(this,zu);for(ge(this,zu,[]);r.length;){const i=[r.shift()];for(;r.length&&i.length!==re(this,rm).batchMaxCount;)if(i.push(r.shift()),JSON.stringify(i.map(o=>o.payload)).length>re(this,rm).batchMaxSize){r.unshift(i.pop());break}(async()=>{const s=i.length===1?i[0].payload:i.map(o=>o.payload);this.emit("debug",{action:"sendRpcPayload",payload:s});try{const o=await this._send(s);this.emit("debug",{action:"receiveRpcResult",result:o});for(const{resolve:a,reject:l,payload:c}of i){if(this.destroyed){l(Rr("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:c.method}));continue}const u=o.filter(h=>h.id===c.id)[0];if(u==null){const h=Rr("missing response for request","BAD_DATA",{value:o,info:{payload:c}});this.emit("error",h),l(h);continue}if("error"in u){l(this.getRpcError(c,u));continue}a(u.result)}}catch(o){this.emit("debug",{action:"receiveRpcError",error:o});for(const{reject:a}of i)a(o)}})()}},n))};var Qf;class J_e extends Y_e{constructor(n,r){super(n,r);Fe(this,Qf);let i=this._getOption("pollingInterval");i==null&&(i=Cse.pollingInterval),ge(this,Qf,i)}_getSubscriber(n){const r=super._getSubscriber(n);return RH(r)&&(r.pollingInterval=re(this,Qf)),r}get pollingInterval(){return re(this,Qf)}set pollingInterval(n){if(!Number.isInteger(n)||n<0)throw new Error("invalid interval");ge(this,Qf,n),this._forEachSubscriber(r=>{RH(r)&&(r.pollingInterval=re(this,Qf))})}}Qf=new WeakMap;var ax;class X_e extends J_e{constructor(n,r,i){n==null&&(n="http://localhost:8545");super(r,i);Fe(this,ax);typeof n=="string"?ge(this,ax,new fd(n)):ge(this,ax,n.clone())}_getConnection(){return re(this,ax).clone()}async send(n,r){return await this._start(),await super.send(n,r)}async _send(n){const r=this._getConnection();r.body=JSON.stringify(n),r.setHeader("content-type","application/json");const i=await r.send();i.assertOk();let s=i.bodyJson;return Array.isArray(s)||(s=[s]),s}}ax=new WeakMap;function wM(t){if(t==null)return null;if(typeof t.message=="string"&&t.message.match(/revert/i)&&gr(t.data))return{message:t.message,data:t.data};if(typeof t=="object"){for(const e in t){const n=wM(t[e]);if(n)return n}return null}if(typeof t=="string")try{return wM(JSON.parse(t))}catch{}return null}function EM(t,e){if(t!=null){if(typeof t.message=="string"&&e.push(t.message),typeof t=="object")for(const n in t)EM(t[n],e);if(typeof t=="string")try{return EM(JSON.parse(t),e)}catch{}}}function Q_e(t){const e=[];return EM(t,e),e}var lx;const O7=class O7 extends Z8{constructor(n,r){super(r);Ce(this,"address");Fe(this,lx);xe(n&&typeof n.sign=="function","invalid private key","privateKey","[ REDACTED ]"),ge(this,lx,n);const i=W1(this.signingKey.publicKey);Bt(this,{address:i})}get signingKey(){return re(this,lx)}get privateKey(){return this.signingKey.privateKey}async getAddress(){return this.address}connect(n){return new O7(re(this,lx),n)}async signTransaction(n){n=zw(n);const{to:r,from:i}=await Cs({to:n.to?$i(n.to,this):void 0,from:n.from?$i(n.from,this):void 0});r!=null&&(n.to=r),i!=null&&(n.from=i),n.from!=null&&(xe(xn(n.from)===this.address,"transaction from address mismatch","tx.from",n.from),delete n.from);const s=V8.from(n);return s.signature=this.signingKey.sign(s.unsignedHash),s.serialized}async signMessage(n){return this.signMessageSync(n)}signMessageSync(n){return this.signingKey.sign(Xie(n)).serialized}authorizeSync(n){xe(typeof n.address=="string","invalid address for authorizeSync","auth.address",n);const r=this.signingKey.sign(_ie(n));return Object.assign({},{address:xn(n.address),nonce:Nt(n.nonce||0),chainId:Nt(n.chainId||0)},{signature:r})}async authorize(n){return n=Object.assign({},n,{address:await $i(n.address,this)}),this.authorizeSync(await this.populateAuthorization(n))}async signTypedData(n,r,i){const s=await bm.resolveNames(n,r,i,async o=>{Ye(this.provider!=null,"cannot resolve ENS names without a provider","UNSUPPORTED_OPERATION",{operation:"resolveName",info:{name:o}});const a=await this.provider.resolveName(o);return Ye(a!=null,"unconfigured ENS name","UNCONFIGURED_NAME",{value:o}),a});return this.signingKey.sign(bm.hash(s.domain,r,s.value)).serialized}};lx=new WeakMap;let yk=O7;const xk=" !#$%&'()*+,-./<=>?@[]^_`{|}~",Z_e=/^[a-z]*$/i;function OH(t,e){let n=97;return t.reduce((r,i)=>(i===e?n++:i.match(Z_e)?r.push(String.fromCharCode(n)+i):(n=97,r.push(i)),r),[])}function eIe(t,e){for(let i=xk.length-1;i>=0;i--)t=t.split(xk[i]).join(e.substring(2*i,2*i+2));const n=[],r=t.replace(/(:|([0-9])|([A-Z][a-z]*))/g,(i,s,o,a)=>{if(o)for(let l=parseInt(o);l>=0;l--)n.push(";");else n.push(s.toLowerCase());return""});if(r)throw new Error(`leftovers: ${JSON.stringify(r)}`);return OH(OH(n,";"),":")}function tIe(t){return xe(t[0]==="0","unsupported auwl data","data",t),eIe(t.substring(1+2*xk.length),t.substring(1,1+2*xk.length))}class nIe{constructor(e){Ce(this,"locale");Bt(this,{locale:e})}split(e){return e.toLowerCase().split(/\s+/g)}join(e){return e.join(" ")}}var cx,R1,im,O1,SM;class rIe extends nIe{constructor(n,r,i){super(n);Fe(this,O1);Fe(this,cx);Fe(this,R1);Fe(this,im);ge(this,cx,r),ge(this,R1,i),ge(this,im,null)}get _data(){return re(this,cx)}_decodeWords(){return tIe(re(this,cx))}getWord(n){const r=nt(this,O1,SM).call(this);return xe(n>=0&&n<r.length,`invalid word index: ${n}`,"index",n),r[n]}getWordIndex(n){return nt(this,O1,SM).call(this).indexOf(n)}}cx=new WeakMap,R1=new WeakMap,im=new WeakMap,O1=new WeakSet,SM=function(){if(re(this,im)==null){const n=this._decodeWords();if(hd(n.join(`
`)+`
`)!==re(this,R1))throw new Error(`BIP39 Wordlist for ${this.locale} FAILED`);ge(this,im,n)}return re(this,im)};const iIe="0erleonalorenseinceregesticitStanvetearctssi#ch2Athck&tneLl0And#Il.yLeOutO=S|S%b/ra@SurdU'0Ce[Cid|CountCu'Hie=IdOu,-Qui*Ro[TT]T%T*[Tu$0AptDD-tD*[Ju,M.UltV<)Vi)0Rob-0FairF%dRaid0A(EEntRee0Ead0MRRp%tS!_rmBumCoholErtI&LLeyLowMo,O}PhaReadySoT Ways0A>urAz(gOngOuntU'd0Aly,Ch%Ci|G G!GryIm$K!Noun)Nu$O` Sw T&naTiqueXietyY1ArtOlogyPe?P!Pro=Ril1ChCt-EaEnaGueMMedM%MyOundR<+Re,Ri=RowTTefa@Ti,Tw%k0KPe@SaultSetSi,SumeThma0H!>OmTa{T&dT.udeTra@0Ct]D.Gu,NtTh%ToTumn0Era+OcadoOid0AkeA*AyEsomeFulKw?d0Is:ByChel%C#D+GL<)Lc#y~MbooN<aNn RRelyRga(R*lSeS-SketTt!3A^AnAutyCau'ComeEfF%eG(Ha=H(dLie=LowLtN^Nef./TrayTt Twe&Y#d3Cyc!DKeNdOlogyRdR`Tt _{AdeAmeAnketA,EakE[IndOodO[omOu'UeUrUsh_rdAtDyIlMbNeNusOkO,Rd R(gRrowSsTtomUn)XY_{etA(AndA[A=EadEezeI{Id+IefIghtIngIskOccoliOk&OnzeOomO` OwnUsh2Bb!DdyD+tFf$oIldLbLkL!tNd!Nk Rd&Rg R,SS(e[SyTt Y Zz:Bba+B(B!CtusGeKe~LmM aMpNN$N)lNdyNn#NoeNvasNy#Pab!P.$Pta(RRb#RdRgoRpetRryRtSeShS(o/!Su$TT$ogT^Teg%yTt!UghtU'Ut]Ve3Il(gL yM|NsusNturyRe$Rta(_irAlkAmp]An+AosApt Ar+A'AtEapE{Ee'EfErryE,I{&IefIldIm}yOi)Oo'R#-U{!UnkUrn0G?Nnam#Rc!Tiz&TyVil_imApArifyAwAyE<ErkEv I{I|IffImbIn-IpO{OgO'O`OudOwnUbUmpU, Ut^_^A,C#utDeFfeeIlInL!@L%LumnMb(eMeMf%tM-Mm#Mp<yNc tNdu@NfirmNg*[N}@Nsid NtrolNv()OkOlPp PyR$ReRnR*@/Tt#U^UntryUp!Ur'Us(V Yo>_{Ad!AftAmA}AshAt AwlAzyEamEd.EekEwI{etImeIspIt-OpO[Ou^OwdUci$UelUi'Umb!Un^UshYY,$2BeLtu*PPbo?dRiousRr|Rta(R=Sh]/omTe3C!:DMa+MpN)Ng R(gShUght WnY3AlBa>BrisCadeCemb CideCl(eC%a>C*a'ErF&'F(eFyG*eLayLiv M<dMi'Ni$Nti,NyP?tP&dPos.P`PutyRi=ScribeS tSignSkSpair/royTailTe@VelopVi)Vo>3AgramAlAm#dAryCeE'lEtFf G.$Gn.yLemmaNn NosaurRe@RtSag*eScov Sea'ShSmi[S%d Splay/<)V tVideV%)Zzy5Ct%Cum|G~Lph(Ma(Na>NkeyN%OrSeUb!Ve_ftAg#AmaA,-AwEamE[IftIllInkIpI=OpUmY2CkMbNeR(g/T^Ty1Arf1Nam-:G G!RlyRnR`Sily/Sy1HoOlogyOnomy0GeItUca>1F%t0G1GhtTh 2BowD E@r-Eg<tEm|Eph<tEvat%I>Se0B?kBodyBra)Er+Ot]PloyPow Pty0Ab!A@DD![D%'EmyErgyF%)Ga+G(eH<)JoyLi,OughR-hRollSu*T Ti*TryVelope1Isode0U$Uip0AA'OdeOs]R%Upt0CapeSayS&)Ta>0Ern$H-s1Id&)IlOkeOl=1A@Amp!Ce[Ch<+C.eCludeCu'Ecu>Erci'Hau,Hib.I!I,ItOt-P<dPe@Pi*Pla(Po'P*[T&dTra0EEbrow:Br-CeCultyDeIntI`~L'MeMilyMousNNcyNtasyRmSh]TT$Th TigueUltV%.e3Atu*Bru?yD $EEdElMa!N)/iv$T^V W3B Ct]EldGu*LeLmLt N$NdNeNg NishReRmR,Sc$ShTT}[X_gAmeAshAtAv%EeIghtIpOatO{O%Ow UidUshY_mCusGIlLd~owOdOtR)Re,R+tRkRtu}RumRw?dSsil/ UndX_gi!AmeEqu|EshI&dIn+OgOntO,OwnOz&U.2ElNNnyRna)RyTu*:D+tInLaxy~ yMePRa+Rba+Rd&Rl-Rm|SSpTeTh U+Ze3N $NiusN*Nt!Nu(e/u*2O,0AntFtGg!Ng RaffeRlVe_dAn)A*A[IdeImp'ObeOomOryO=OwUe_tDde[LdOdO'RillaSpelSsipV nWn_bA)A(AntApeA[Av.yEatE&IdIefItOc yOupOwUnt_rdE[IdeIltIt?N3M:B.IrLfMm M, NdPpyRb%RdRshR=,TVeWkZ?d3AdAl`ArtAvyD+hogIght~oLmetLpNRo3Dd&Gh~NtPRe/%y5BbyCkeyLdLeLiday~owMeNeyOdPeRnRr%R'Sp.$/TelUrV 5BGeM<Mb!M%Nd*dNgryNtRd!RryRtSb<d3Brid:1EOn0EaEntifyLe2N%e4LLeg$L}[0A+Ita>M&'Mu}Pa@Po'Pro=Pul'0ChCludeComeC*a'DexD-a>Do%Du,ryF<tFl-tF%mHa!H .Iti$Je@JuryMa>N Noc|PutQuiryS<eSe@SideSpi*/$lTa@T e,ToVe,V.eVol=3On0L<dOla>Sue0Em1Ory:CketGu?RZz3AlousAns~yWel9BInKeUr}yY5D+I)MpNg!Ni%Nk/:Ng?oo3EnEpT^upY3CkDD}yNdNgdomSsTT^&TeTt&Wi4EeIfeO{Ow:BBelB%Dd DyKeMpNgua+PtopR+T T(UghUndryVaWWnWsu.Y Zy3Ad AfArnA=Ctu*FtGG$G&dIsu*M#NdNg`NsOp?dSs#Tt Vel3ArB tyBr?yC&'FeFtGhtKeMbM.NkOnQuid/Tt!VeZ?d5AdAnB, C$CkG-NelyNgOpTt yUdUn+VeY$5CkyGga+Mb N?N^Xury3R-s:Ch(eDG-G}tIdIlInJ%KeMm$NNa+Nda>NgoNs]Nu$P!Rb!R^Rg(R(eRketRria+SkSs/ T^T i$ThTrixTt XimumZe3AdowAnAsu*AtCh<-D$DiaLodyLtMb M%yNt]NuRcyR+R.RryShSsa+T$Thod3Dd!DnightLk~]M-NdNimumN%Nu>Rac!Rr%S ySs/akeXXedXtu*5Bi!DelDifyMM|N.%NkeyN, N`OnR$ReRn(gSqu.oTh T]T%Unta(U'VeVie5ChFf(LeLtiplySc!SeumShroomS-/Tu$3Self/ yTh:I=MePk(Rrow/yT]Tu*3ArCkEdGati=G!@I` PhewR=/TTw%kUtr$V WsXt3CeGht5B!I'M(eeOd!Rm$R`SeTab!TeTh(gTi)VelW5C!?Mb R'T:K0EyJe@Li+Scu*S =Ta(Vious0CurE<Tob 0Or1FF Fi)T&2L1Ay0DI=Ymp-0It0CeEI#L(eLy1EnEraIn]Po'T]1An+B.Ch?dD D(?yG<I|Ig($Ph<0Tr-h0H 0Tdo%T TputTside0AlEnEr0NN 0Yg&0/ 0O}:CtDd!GeIrLa)LmNdaNelN-N` P RadeR|RkRrotRtySsT^ThTi|TrolTt nU'VeYm|3A)AnutArAs<tL-<NN$tyNcilOp!Pp Rfe@Rm.Rs#T2O}OtoRa'Ys-$0AnoCn-Ctu*E)GGe#~LotNkO} Pe/olT^Zza_)A}tA,-A>AyEa'Ed+U{UgUn+2EmEtIntL?LeLi)NdNyOlPul?Rt]S.]Ssib!/TatoTt yV tyWd W _@i)Ai'Ed-tEf Epa*Es|EttyEv|I)IdeIm?yIntI%.yIs#Iva>IzeOb!mO)[Odu)Of.OgramOje@Omo>OofOp tyOsp O>@OudOvide2Bl-Dd(g~LpL'Mpk(N^PilPpyR^a'R.yRpo'R'ShTZz!3Ramid:99Al.yAntumArt E,]I{ItIzO>:Bb.Cco#CeCkD?DioIlInI'~yMpN^NdomN+PidReTeTh V&WZ%3AdyAlAs#BelBuildC$lCei=CipeC%dCyc!Du)F!@F%mFu'G]G*tGul?Je@LaxLea'LiefLyMa(Memb M(dMo=Nd NewNtOp&PairPeatPla)P%tQui*ScueSemb!Si,Sour)Sp#'SultTi*T*atTurnUn]Ve$ViewW?d2Y`m0BBb#CeChDeD+F!GhtGidNgOtPp!SkTu$V$V 5AdA,BotBu,CketM<)OfOkieOmSeTa>UghUndU>Y$5Bb DeGLeNNwayR$:DDd!D}[FeIlLadLm#L#LtLu>MeMp!NdTisfyToshiU)Usa+VeY1A!AnA*Att E}HemeHoolI&)I[%sOrp]OutRapRe&RiptRub1AAr^As#AtC#dC*tCt]Cur.yEdEkGm|Le@~M(?Ni%N'Nt&)RiesRvi)Ss]Tt!TupV&_dowAftAllowA*EdEllEriffIeldIftI}IpIv O{OeOotOpOrtOuld O=RimpRugUff!Y0Bl(gCkDeE+GhtGnL|Lk~yLv Mil?Mp!N)NgR&/ Tua>XZe1A>Et^IIllInIrtUll0AbAmEepEnd I)IdeIghtImOg<OtOwUsh0AllArtI!OkeOo`0A{AkeApIffOw0ApCc Ci$CkDaFtL?Ldi LidLut]L=Me#eNgOnRryRtUlUndUpUr)U`0A)A*Ati$AwnEakEci$EedEllEndH eI)Id IkeInIr.L.OilOns%O#OrtOtRayReadR(gY0Ua*UeezeUir*l_b!AdiumAffA+AirsAmpAndArtA>AyEakEelEmEpE*oI{IllIngO{Oma^O}OolOryO=Ra>gyReetRikeR#gRugg!Ud|UffUmb!Y!0Bje@Bm.BwayC)[ChDd&Ff G?G+,ItMm NNnyN'tP PplyP*meReRfa)R+Rpri'RroundR=ySpe@/a(1AllowAmpApArmE?EetIftImIngIt^Ord1MbolMptomRup/em:B!Ck!GIlL|LkNkPeR+tSk/eTtooXi3A^Am~NN<tNnisNtRm/Xt_nkAtEmeEnE%yE*EyIngIsOughtReeRi=RowUmbUnd 0CketDeG LtMb MeNyPRedSsueT!5A,BaccoDayDdl EGe` I!tK&MatoM%rowNeNgueNightOlO`PP-Pp!R^RnadoRtoi'SsT$Uri,W?dW WnY_{AdeAff-Ag-A(Ansf ApAshA=lAyEatEeEndI$IbeI{Igg ImIpOphyOub!U{UeUlyUmpetU,U`Y2BeIt]Mb!NaN}lRkeyRnRt!1El=EntyI)InI,O1PeP-$:5Ly5B*lla0Ab!Awa*C!Cov D DoFairFoldHappyIf%mIqueItIv 'KnownLo{TilUsu$Veil1Da>GradeHoldOnP Set1B<Ge0A+EEdEfulE![U$0Il.y:C<tCuumGueLidL!yL=NNishP%Rious/Ult3H-!L=tNd%Ntu*NueRbRifyRs]RyS'lT <3Ab!Br<tCiousCt%yDeoEw~a+Nta+Ol(Rtu$RusSaS.Su$T$Vid5C$I)IdLc<oLumeTeYa+:GeG#ItLk~LnutNtRfa*RmRri%ShSp/eT VeY3Al`Ap#ArA'lA` BDd(gEk&dIrdLcome/T_!AtEatEelEnE*IpIsp 0DeD`FeLd~NNdowNeNgNkNn Nt ReSdomSeShT}[5LfM<Nd OdOlRdRkRldRryR`_pE{E,!I,I>Ong::Rd3Ar~ow9UUngU`:3BraRo9NeO",sIe="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60";let NR=null;class Am extends rIe{constructor(){super("en",iIe,sIe)}static wordlist(){return NR==null&&(NR=new Am),NR}}function Pse(t){return(1<<t)-1<<8-t&255}function oIe(t){return(1<<t)-1&255}function CR(t,e){sre("NFKD"),e==null&&(e=Am.wordlist());const n=e.split(t);xe(n.length%3===0&&n.length>=12&&n.length<=24,"invalid mnemonic length","mnemonic","[ REDACTED ]");const r=new Uint8Array(Math.ceil(11*n.length/8));let i=0;for(let c=0;c<n.length;c++){let u=e.getWordIndex(n[c].normalize("NFKD"));xe(u>=0,`invalid mnemonic word at index ${c}`,"mnemonic","[ REDACTED ]");for(let h=0;h<11;h++)u&1<<10-h&&(r[i>>3]|=1<<7-i%8),i++}const s=32*n.length/3,o=n.length/3,a=Pse(o),l=bt(Qa(r.slice(0,s/8)))[0]&a;return xe(l===(r[r.length-1]&a),"invalid mnemonic checksum","mnemonic","[ REDACTED ]"),st(r.slice(0,s/8))}function PR(t,e){xe(t.length%4===0&&t.length>=16&&t.length<=32,"invalid entropy size","entropy","[ REDACTED ]"),e==null&&(e=Am.wordlist());const n=[0];let r=11;for(let o=0;o<t.length;o++)r>8?(n[n.length-1]<<=8,n[n.length-1]|=t[o],r-=8):(n[n.length-1]<<=r,n[n.length-1]|=t[o]>>8-r,n.push(t[o]&oIe(8-r)),r+=3);const i=t.length/4,s=parseInt(Qa(t).substring(2,4),16)&Pse(i);return n[n.length-1]<<=i,n[n.length-1]|=s>>8-i,e.join(n.map(o=>e.getWord(o)))}const _R={};class Sx{constructor(e,n,r,i,s){Ce(this,"phrase");Ce(this,"password");Ce(this,"wordlist");Ce(this,"entropy");i==null&&(i=""),s==null&&(s=Am.wordlist()),Eh(e,_R,"Mnemonic"),Bt(this,{phrase:r,password:i,wordlist:s,entropy:n})}computeSeed(){const e=mi("mnemonic"+this.password,"NFKD");return Sh(mi(this.phrase,"NFKD"),e,2048,64,"sha512")}static fromPhrase(e,n,r){const i=CR(e,r);return e=PR(bt(i),r),new Sx(_R,i,e,n,r)}static fromEntropy(e,n,r){const i=bt(e,"entropy"),s=PR(i,r);return new Sx(_R,st(i),s,n,r)}static entropyToPhrase(e,n){const r=bt(e,"entropy");return PR(r,n)}static phraseToEntropy(e,n){return CR(e,n)}static isValidMnemonic(e,n){try{return CR(e,n),!0}catch{}return!1}}/*! MIT License. Copyright 2015-2022 Richard Moore <me@ricmoo.com>. See LICENSE.txt. */var Zi=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},IR=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},PT,Ca,ac;const aIe={16:10,24:12,32:14},lIe=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],Sa=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],dA=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],cIe=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],uIe=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],dIe=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],fIe=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],hIe=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],pIe=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],mIe=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],gIe=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],yIe=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],xIe=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],vIe=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],bIe=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function RR(t){const e=[];for(let n=0;n<t.length;n+=4)e.push(t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3]);return e}class ej{get key(){return Zi(this,PT,"f").slice()}constructor(e){if(PT.set(this,void 0),Ca.set(this,void 0),ac.set(this,void 0),!(this instanceof ej))throw Error("AES must be instanitated with `new`");IR(this,PT,new Uint8Array(e),"f");const n=aIe[this.key.length];if(n==null)throw new TypeError("invalid key size (must be 16, 24 or 32 bytes)");IR(this,ac,[],"f"),IR(this,Ca,[],"f");for(let u=0;u<=n;u++)Zi(this,ac,"f").push([0,0,0,0]),Zi(this,Ca,"f").push([0,0,0,0]);const r=(n+1)*4,i=this.key.length/4,s=RR(this.key);let o;for(let u=0;u<i;u++)o=u>>2,Zi(this,ac,"f")[o][u%4]=s[u],Zi(this,Ca,"f")[n-o][u%4]=s[u];let a=0,l=i,c;for(;l<r;){if(c=s[i-1],s[0]^=Sa[c>>16&255]<<24^Sa[c>>8&255]<<16^Sa[c&255]<<8^Sa[c>>24&255]^lIe[a]<<24,a+=1,i!=8)for(let g=1;g<i;g++)s[g]^=s[g-1];else{for(let g=1;g<i/2;g++)s[g]^=s[g-1];c=s[i/2-1],s[i/2]^=Sa[c&255]^Sa[c>>8&255]<<8^Sa[c>>16&255]<<16^Sa[c>>24&255]<<24;for(let g=i/2+1;g<i;g++)s[g]^=s[g-1]}let u=0,h,m;for(;u<i&&l<r;)h=l>>2,m=l%4,Zi(this,ac,"f")[h][m]=s[u],Zi(this,Ca,"f")[n-h][m]=s[u++],l++}for(let u=1;u<n;u++)for(let h=0;h<4;h++)c=Zi(this,Ca,"f")[u][h],Zi(this,Ca,"f")[u][h]=yIe[c>>24&255]^xIe[c>>16&255]^vIe[c>>8&255]^bIe[c&255]}encrypt(e){if(e.length!=16)throw new TypeError("invalid plaintext size (must be 16 bytes)");const n=Zi(this,ac,"f").length-1,r=[0,0,0,0];let i=RR(e);for(let a=0;a<4;a++)i[a]^=Zi(this,ac,"f")[0][a];for(let a=1;a<n;a++){for(let l=0;l<4;l++)r[l]=cIe[i[l]>>24&255]^uIe[i[(l+1)%4]>>16&255]^dIe[i[(l+2)%4]>>8&255]^fIe[i[(l+3)%4]&255]^Zi(this,ac,"f")[a][l];i=r.slice()}const s=new Uint8Array(16);let o=0;for(let a=0;a<4;a++)o=Zi(this,ac,"f")[n][a],s[4*a]=(Sa[i[a]>>24&255]^o>>24)&255,s[4*a+1]=(Sa[i[(a+1)%4]>>16&255]^o>>16)&255,s[4*a+2]=(Sa[i[(a+2)%4]>>8&255]^o>>8)&255,s[4*a+3]=(Sa[i[(a+3)%4]&255]^o)&255;return s}decrypt(e){if(e.length!=16)throw new TypeError("invalid ciphertext size (must be 16 bytes)");const n=Zi(this,Ca,"f").length-1,r=[0,0,0,0];let i=RR(e);for(let a=0;a<4;a++)i[a]^=Zi(this,Ca,"f")[0][a];for(let a=1;a<n;a++){for(let l=0;l<4;l++)r[l]=hIe[i[l]>>24&255]^pIe[i[(l+3)%4]>>16&255]^mIe[i[(l+2)%4]>>8&255]^gIe[i[(l+1)%4]&255]^Zi(this,Ca,"f")[a][l];i=r.slice()}const s=new Uint8Array(16);let o=0;for(let a=0;a<4;a++)o=Zi(this,Ca,"f")[n][a],s[4*a]=(dA[i[a]>>24&255]^o>>24)&255,s[4*a+1]=(dA[i[(a+3)%4]>>16&255]^o>>16)&255,s[4*a+2]=(dA[i[(a+2)%4]>>8&255]^o>>8)&255,s[4*a+3]=(dA[i[(a+1)%4]&255]^o)&255;return s}}PT=new WeakMap,Ca=new WeakMap,ac=new WeakMap;class _se{constructor(e,n,r){if(r&&!(this instanceof r))throw new Error(`${e} must be instantiated with "new"`);Object.defineProperties(this,{aes:{enumerable:!0,value:new ej(n)},name:{enumerable:!0,value:e}})}}var fA=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},X0=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Yb,Au;class tj extends _se{constructor(e,n){if(super("ECC",e,tj),Yb.set(this,void 0),Au.set(this,void 0),n){if(n.length%16)throw new TypeError("invalid iv size (must be 16 bytes)");fA(this,Yb,new Uint8Array(n),"f")}else fA(this,Yb,new Uint8Array(16),"f");fA(this,Au,this.iv,"f")}get iv(){return new Uint8Array(X0(this,Yb,"f"))}encrypt(e){if(e.length%16)throw new TypeError("invalid plaintext size (must be multiple of 16 bytes)");const n=new Uint8Array(e.length);for(let r=0;r<e.length;r+=16){for(let i=0;i<16;i++)X0(this,Au,"f")[i]^=e[r+i];fA(this,Au,this.aes.encrypt(X0(this,Au,"f")),"f"),n.set(X0(this,Au,"f"),r)}return n}decrypt(e){if(e.length%16)throw new TypeError("invalid ciphertext size (must be multiple of 16 bytes)");const n=new Uint8Array(e.length);for(let r=0;r<e.length;r+=16){const i=this.aes.decrypt(e.subarray(r,r+16));for(let s=0;s<16;s++)n[r+s]=i[s]^X0(this,Au,"f")[s],X0(this,Au,"f")[s]=e[r+s]}return n}}Yb=new WeakMap,Au=new WeakMap;var Q0=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},Aa=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Jb,dp,Pa;class Ax extends _se{constructor(e,n){super("CTR",e,Ax),Jb.set(this,void 0),dp.set(this,void 0),Pa.set(this,void 0),Q0(this,Pa,new Uint8Array(16),"f"),Aa(this,Pa,"f").fill(0),Q0(this,Jb,Aa(this,Pa,"f"),"f"),Q0(this,dp,16,"f"),n==null&&(n=1),typeof n=="number"?this.setCounterValue(n):this.setCounterBytes(n)}get counter(){return new Uint8Array(Aa(this,Pa,"f"))}setCounterValue(e){if(!Number.isInteger(e)||e<0||e>Number.MAX_SAFE_INTEGER)throw new TypeError("invalid counter initial integer value");for(let n=15;n>=0;--n)Aa(this,Pa,"f")[n]=e%256,e=Math.floor(e/256)}setCounterBytes(e){if(e.length!==16)throw new TypeError("invalid counter initial Uint8Array value length");Aa(this,Pa,"f").set(e)}increment(){for(let e=15;e>=0;e--)if(Aa(this,Pa,"f")[e]===255)Aa(this,Pa,"f")[e]=0;else{Aa(this,Pa,"f")[e]++;break}}encrypt(e){var n,r;const i=new Uint8Array(e);for(let s=0;s<i.length;s++)Aa(this,dp,"f")===16&&(Q0(this,Jb,this.aes.encrypt(Aa(this,Pa,"f")),"f"),Q0(this,dp,0,"f"),this.increment()),i[s]^=Aa(this,Jb,"f")[Q0(this,dp,(r=Aa(this,dp,"f"),n=r++,r),"f"),n];return i}decrypt(e){return this.encrypt(e)}}Jb=new WeakMap,dp=new WeakMap,Pa=new WeakMap;function wIe(t){if(t.length<16)throw new TypeError("PKCS#7 invalid length");const e=t[t.length-1];if(e>16)throw new TypeError("PKCS#7 padding byte out of range");const n=t.length-e;for(let r=0;r<e;r++)if(t[n+r]!==e)throw new TypeError("PKCS#7 invalid padding byte");return new Uint8Array(t.subarray(0,n))}function Ise(t){return typeof t=="string"&&!t.startsWith("0x")&&(t="0x"+t),fs(t)}function wb(t,e){for(t=String(t);t.length<e;)t="0"+t;return t}function X1(t){return typeof t=="string"?mi(t,"NFKC"):fs(t)}function ei(t,e){const n=e.match(/^([a-z0-9$_.-]*)(:([a-z]+))?(!)?$/i);xe(n!=null,"invalid path","path",e);const r=n[1],i=n[3],s=n[4]==="!";let o=t;for(const a of r.toLowerCase().split(".")){if(Array.isArray(o)){if(!a.match(/^[0-9]+$/))break;o=o[parseInt(a)]}else if(typeof o=="object"){let l=null;for(const c in o)if(c.toLowerCase()===a){l=o[c];break}o=l}else o=null;if(o==null)break}if(xe(!s||o!=null,"missing required value","path",r),i&&o!=null){if(i==="int"){if(typeof o=="string"&&o.match(/^-?[0-9]+$/))return parseInt(o);if(Number.isSafeInteger(o))return o}if(i==="number"&&typeof o=="string"&&o.match(/^-?[0-9.]*$/))return parseFloat(o);if(i==="data"&&typeof o=="string")return Ise(o);if(i==="array"&&Array.isArray(o)||i===typeof o)return o;xe(!1,`wrong type found for ${i} `,"path",r)}return o}const Rse="m/44'/60'/0'/0/0";function MH(t){try{const e=JSON.parse(t);if((e.version!=null?parseInt(e.version):0)===3)return!0}catch{}return!1}function EIe(t,e,n){if(ei(t,"crypto.cipher:string")==="aes-128-ctr"){const i=ei(t,"crypto.cipherparams.iv:data!"),s=new Ax(e,i);return st(s.decrypt(n))}Ye(!1,"unsupported cipher","UNSUPPORTED_OPERATION",{operation:"decrypt"})}function vk(t,e){const n=bt(e),r=ei(t,"crypto.ciphertext:data!"),i=st(Kn(On([n.slice(16,32),r]))).substring(2);xe(i===ei(t,"crypto.mac:string!").toLowerCase(),"incorrect password","password","[ REDACTED ]");const s=EIe(t,n.slice(0,16),r),o=W1(s);if(t.address){let c=t.address.toLowerCase();c.startsWith("0x")||(c="0x"+c),xe(xn(c)===o,"keystore address/privateKey mismatch","address",t.address)}const a={address:o,privateKey:s};if(ei(t,"x-ethers.version:string")==="0.1"){const c=n.slice(32,64),u=ei(t,"x-ethers.mnemonicCiphertext:data!"),h=ei(t,"x-ethers.mnemonicCounter:data!"),m=new Ax(c,h);a.mnemonic={path:ei(t,"x-ethers.path:string")||Rse,locale:ei(t,"x-ethers.locale:string")||"en",entropy:st(bt(m.decrypt(u)))}}return a}function Ose(t){const e=ei(t,"crypto.kdf:string");if(e&&typeof e=="string"){if(e.toLowerCase()==="scrypt"){const n=ei(t,"crypto.kdfparams.salt:data!"),r=ei(t,"crypto.kdfparams.n:int!"),i=ei(t,"crypto.kdfparams.r:int!"),s=ei(t,"crypto.kdfparams.p:int!");xe(r>0&&(r&r-1)===0,"invalid kdf.N","kdf.N",r),xe(i>0&&s>0,"invalid kdf","kdf",e);const o=ei(t,"crypto.kdfparams.dklen:int!");return xe(o===32,"invalid kdf.dklen","kdf.dflen",o),{name:"scrypt",salt:n,N:r,r:i,p:s,dkLen:64}}else if(e.toLowerCase()==="pbkdf2"){const n=ei(t,"crypto.kdfparams.salt:data!"),r=ei(t,"crypto.kdfparams.prf:string!"),i=r.split("-").pop();xe(i==="sha256"||i==="sha512","invalid kdf.pdf","kdf.pdf",r);const s=ei(t,"crypto.kdfparams.c:int!"),o=ei(t,"crypto.kdfparams.dklen:int!");return xe(o===32,"invalid kdf.dklen","kdf.dklen",o),{name:"pbkdf2",salt:n,count:s,dkLen:o,algorithm:i}}}xe(!1,"unsupported key-derivation function","kdf",e)}function SIe(t,e){const n=JSON.parse(t),r=X1(e),i=Ose(n);if(i.name==="pbkdf2"){const{salt:h,count:m,dkLen:g,algorithm:y}=i,v=Sh(r,h,m,g,y);return vk(n,v)}Ye(i.name==="scrypt","cannot be reached","UNKNOWN_ERROR",{params:i});const{salt:s,N:o,r:a,p:l,dkLen:c}=i,u=Yx(r,s,o,a,l,c);return vk(n,u)}function LH(t){return new Promise(e=>{setTimeout(()=>{e()},t)})}async function AIe(t,e,n){const r=JSON.parse(t),i=X1(e),s=Ose(r);if(s.name==="pbkdf2"){n&&(n(0),await LH(0));const{salt:m,count:g,dkLen:y,algorithm:v}=s,b=Sh(i,m,g,y,v);return n&&(n(1),await LH(0)),vk(r,b)}Ye(s.name==="scrypt","cannot be reached","UNKNOWN_ERROR",{params:s});const{salt:o,N:a,r:l,p:c,dkLen:u}=s,h=await Wx(i,o,a,l,c,u,n);return vk(r,h)}function Mse(t){const e=t.salt!=null?bt(t.salt,"options.salt"):td(32);let n=1<<17,r=8,i=1;return t.scrypt&&(t.scrypt.N&&(n=t.scrypt.N),t.scrypt.r&&(r=t.scrypt.r),t.scrypt.p&&(i=t.scrypt.p)),xe(typeof n=="number"&&n>0&&Number.isSafeInteger(n)&&(BigInt(n)&BigInt(n-1))===BigInt(0),"invalid scrypt N parameter","options.N",n),xe(typeof r=="number"&&r>0&&Number.isSafeInteger(r),"invalid scrypt r parameter","options.r",r),xe(typeof i=="number"&&i>0&&Number.isSafeInteger(i),"invalid scrypt p parameter","options.p",i),{name:"scrypt",dkLen:32,salt:e,N:n,r,p:i}}function Lse(t,e,n,r){const i=bt(n.privateKey,"privateKey"),s=r.iv!=null?bt(r.iv,"options.iv"):td(16);xe(s.length===16,"invalid options.iv length","options.iv",r.iv);const o=r.uuid!=null?bt(r.uuid,"options.uuid"):td(16);xe(o.length===16,"invalid options.uuid length","options.uuid",r.iv);const a=t.slice(0,16),l=t.slice(16,32),c=new Ax(a,s),u=bt(c.encrypt(i)),h=Kn(On([l,u])),m={address:n.address.substring(2).toLowerCase(),id:k2e(o),version:3,Crypto:{cipher:"aes-128-ctr",cipherparams:{iv:st(s).substring(2)},ciphertext:st(u).substring(2),kdf:"scrypt",kdfparams:{salt:st(e.salt).substring(2),n:e.N,dklen:32,p:e.p,r:e.r},mac:h.substring(2)}};if(n.mnemonic){const g=r.client!=null?r.client:`ethers/${rre}`,y=n.mnemonic.path||Rse,v=n.mnemonic.locale||"en",b=t.slice(32,64),w=bt(n.mnemonic.entropy,"account.mnemonic.entropy"),k=td(16),N=new Ax(b,k),R=bt(N.encrypt(w)),D=new Date,B="UTC--"+(D.getUTCFullYear()+"-"+wb(D.getUTCMonth()+1,2)+"-"+wb(D.getUTCDate(),2)+"T"+wb(D.getUTCHours(),2)+"-"+wb(D.getUTCMinutes(),2)+"-"+wb(D.getUTCSeconds(),2)+".0Z")+"--"+m.address;m["x-ethers"]={client:g,gethFilename:B,path:y,locale:v,mnemonicCounter:st(k).substring(2),mnemonicCiphertext:st(R).substring(2),version:"0.1"}}return JSON.stringify(m)}function Dse(t,e,n){n==null&&(n={});const r=X1(e),i=Mse(n),s=Yx(r,i.salt,i.N,i.r,i.p,64);return Lse(bt(s),i,t,n)}async function jse(t,e,n){n==null&&(n={});const r=X1(e),i=Mse(n),s=await Wx(r,i.salt,i.N,i.r,i.p,64,n.progressCallback);return Lse(bt(s),i,t,n)}const OR="m/44'/60'/0'/0/0",TIe=new Uint8Array([66,105,116,99,111,105,110,32,115,101,101,100]),Lc=2147483648,kIe=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),NIe="0123456789abcdef";function bk(t,e){let n="";for(;t;)n=NIe[t%16]+n,t=Math.trunc(t/16);for(;n.length<e*2;)n="0"+n;return"0x"+n}function AM(t){const e=bt(t),n=mr(Qa(Qa(e)),0,4),r=On([e,n]);return cre(r)}const dc={};function Bse(t,e,n,r){const i=new Uint8Array(37);t&Lc?(Ye(r!=null,"cannot derive child of neutered node","UNSUPPORTED_OPERATION",{operation:"deriveChild"}),i.set(bt(r),1)):i.set(bt(n));for(let o=24;o>=0;o-=8)i[33+(o>>3)]=t>>24-o&255;const s=bt(Gx("sha512",e,i));return{IL:s.slice(0,32),IR:s.slice(32)}}function Use(t,e){const n=e.split("/");xe(n.length>0,"invalid path","path",e),n[0]==="m"&&(xe(t.depth===0,`cannot derive root path (i.e. path starting with "m/") for a node at non-zero depth ${t.depth}`,"path",e),n.shift());let r=t;for(let i=0;i<n.length;i++){const s=n[i];if(s.match(/^[0-9]+'$/)){const o=parseInt(s.substring(0,s.length-1));xe(o<Lc,"invalid path index",`path[${i}]`,s),r=r.deriveChild(Lc+o)}else if(s.match(/^[0-9]+$/)){const o=parseInt(s);xe(o<Lc,"invalid path index",`path[${i}]`,s),r=r.deriveChild(o)}else xe(!1,"invalid path component",`path[${i}]`,s)}return r}var M1,TM,sm,Xb;const yl=class yl extends yk{constructor(n,r,i,s,o,a,l,c,u){super(r,u);Fe(this,M1);Ce(this,"publicKey");Ce(this,"fingerprint");Ce(this,"parentFingerprint");Ce(this,"mnemonic");Ce(this,"chainCode");Ce(this,"path");Ce(this,"index");Ce(this,"depth");Eh(n,dc,"HDNodeWallet"),Bt(this,{publicKey:r.compressedPublicKey});const h=mr(Kx(Qa(this.publicKey)),0,4);Bt(this,{parentFingerprint:i,fingerprint:h,chainCode:s,path:o,index:a,depth:l}),Bt(this,{mnemonic:c})}connect(n){return new yl(dc,this.signingKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.mnemonic,n)}async encrypt(n,r){return await jse(nt(this,M1,TM).call(this),n,{progressCallback:r})}encryptSync(n){return Dse(nt(this,M1,TM).call(this),n)}get extendedKey(){return Ye(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),AM(On(["0x0488ADE4",bk(this.depth,1),this.parentFingerprint,bk(this.index,4),this.chainCode,On(["0x00",this.privateKey])]))}hasPath(){return this.path!=null}neuter(){return new qw(dc,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.provider)}deriveChild(n){const r=en(n,"index");xe(r<=4294967295,"invalid index","index",r);let i=this.path;i&&(i+="/"+(r&~Lc),r&Lc&&(i+="'"));const{IR:s,IL:o}=Bse(r,this.chainCode,this.publicKey,this.privateKey),a=new Mc(dd((q1(o)+BigInt(this.privateKey))%kIe,32));return new yl(dc,a,this.fingerprint,st(s),i,r,this.depth+1,this.mnemonic,this.provider)}derivePath(n){return Use(this,n)}static fromExtendedKey(n){const r=jr(a2e(n));xe(r.length===82||AM(r.slice(0,78))===n,"invalid extended key","extendedKey","[ REDACTED ]");const i=r[4],s=st(r.slice(5,9)),o=parseInt(st(r.slice(9,13)).substring(2),16),a=st(r.slice(13,45)),l=r.slice(45,78);switch(st(r.slice(0,4))){case"0x0488b21e":case"0x043587cf":{const c=st(l);return new qw(dc,W1(c),c,s,a,null,o,i,null)}case"0x0488ade4":case"0x04358394 ":if(l[0]!==0)break;return new yl(dc,new Mc(l.slice(1)),s,a,null,o,i,null,null)}xe(!1,"invalid extended key prefix","extendedKey","[ REDACTED ]")}static createRandom(n,r,i){var o;n==null&&(n=""),r==null&&(r=OR),i==null&&(i=Am.wordlist());const s=Sx.fromEntropy(td(16),n,i);return nt(o=yl,sm,Xb).call(o,s.computeSeed(),s).derivePath(r)}static fromMnemonic(n,r){var i;return r||(r=OR),nt(i=yl,sm,Xb).call(i,n.computeSeed(),n).derivePath(r)}static fromPhrase(n,r,i,s){var a;r==null&&(r=""),i==null&&(i=OR),s==null&&(s=Am.wordlist());const o=Sx.fromPhrase(n,r,s);return nt(a=yl,sm,Xb).call(a,o.computeSeed(),o).derivePath(i)}static fromSeed(n){var r;return nt(r=yl,sm,Xb).call(r,n,null)}};M1=new WeakSet,TM=function(){const n={address:this.address,privateKey:this.privateKey},r=this.mnemonic;return this.path&&r&&r.wordlist.locale==="en"&&r.password===""&&(n.mnemonic={path:this.path,locale:"en",entropy:r.entropy}),n},sm=new WeakSet,Xb=function(n,r){xe(bN(n),"invalid seed","seed","[REDACTED]");const i=bt(n,"seed");xe(i.length>=16&&i.length<=64,"invalid seed","seed","[REDACTED]");const s=bt(Gx("sha512",TIe,i)),o=new Mc(st(s.slice(0,32)));return new yl(dc,o,"0x00000000",st(s.slice(32)),"m",0,0,r,null)},Fe(yl,sm);let fw=yl;class qw extends yM{constructor(n,r,i,s,o,a,l,c,u){super(r,u);Ce(this,"publicKey");Ce(this,"fingerprint");Ce(this,"parentFingerprint");Ce(this,"chainCode");Ce(this,"path");Ce(this,"index");Ce(this,"depth");Eh(n,dc,"HDNodeVoidWallet"),Bt(this,{publicKey:i});const h=mr(Kx(Qa(i)),0,4);Bt(this,{publicKey:i,fingerprint:h,parentFingerprint:s,chainCode:o,path:a,index:l,depth:c})}connect(n){return new qw(dc,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,n)}get extendedKey(){return Ye(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),AM(On(["0x0488B21E",bk(this.depth,1),this.parentFingerprint,bk(this.index,4),this.chainCode,this.publicKey]))}hasPath(){return this.path!=null}deriveChild(n){const r=en(n,"index");xe(r<=4294967295,"invalid index","index",r);let i=this.path;i&&(i+="/"+(r&~Lc),r&Lc&&(i+="'"));const{IR:s,IL:o}=Bse(r,this.chainCode,this.publicKey,null),a=Mc.addPoints(o,this.publicKey,!0),l=W1(a);return new qw(dc,l,a,this.fingerprint,st(s),i,r,this.depth+1,this.provider)}derivePath(n){return Use(this,n)}}function Q0t(t){const e=en(t,"index");return xe(e>=0&&e<Lc,"invalid account index","index",e),`m/44'/60'/${e}'/0/0`}function Z0t(t){const e=en(t,"index");return xe(e>=0&&e<Lc,"invalid account index","index",e),`m/44'/60'/0'/0/${e}`}function DH(t){try{if(JSON.parse(t).encseed)return!0}catch{}return!1}function jH(t,e){const n=JSON.parse(t),r=X1(e),i=xn(ei(n,"ethaddr:string!")),s=Ise(ei(n,"encseed:string!"));xe(s&&s.length%16===0,"invalid encseed","json",t);const o=bt(Sh(r,r,2e3,32,"sha256")).slice(0,16),a=s.slice(0,16),l=s.slice(16),c=new tj(o,a),u=wIe(bt(c.decrypt(l)));let h="";for(let m=0;m<u.length;m++)h+=String.fromCharCode(u[m]);return{address:i,privateKey:hd(h)}}function BH(t){return new Promise(e=>{setTimeout(()=>{e()},t)})}var L1,kM;const Ep=class Ep extends yk{constructor(e,n){typeof e=="string"&&!e.startsWith("0x")&&(e="0x"+e);let r=typeof e=="string"?new Mc(e):e;super(r,n)}connect(e){return new Ep(this.signingKey,e)}async encrypt(e,n){const r={address:this.address,privateKey:this.privateKey};return await jse(r,e,{progressCallback:n})}encryptSync(e){const n={address:this.address,privateKey:this.privateKey};return Dse(n,e)}static async fromEncryptedJson(e,n,r){var s;let i=null;return MH(e)?i=await AIe(e,n,r):DH(e)&&(r&&(r(0),await BH(0)),i=jH(e,n),r&&(r(1),await BH(0))),nt(s=Ep,L1,kM).call(s,i)}static fromEncryptedJsonSync(e,n){var i;let r=null;return MH(e)?r=SIe(e,n):DH(e)?r=jH(e,n):xe(!1,"invalid JSON wallet","json","[ REDACTED ]"),nt(i=Ep,L1,kM).call(i,r)}static createRandom(e){const n=fw.createRandom();return e?n.connect(e):n}static fromPhrase(e,n){const r=fw.fromPhrase(e);return n?r.connect(n):r}};L1=new WeakSet,kM=function(e){if(xe(e,"invalid JSON wallet","json","[ REDACTED ]"),"mnemonic"in e&&e.mnemonic&&e.mnemonic.locale==="en"){const r=Sx.fromEntropy(e.mnemonic.entropy),i=fw.fromMnemonic(r,e.mnemonic.path);if(i.address===e.address&&i.privateKey===e.privateKey)return i;console.log("WARNING: JSON mismatch address/privateKey != mnemonic; fallback onto private key")}const n=new Ep(e.privateKey);return xe(n.address===e.address,"address/privateKey mismatch","json","[ REDACTED ]"),n},Fe(Ep,L1);let nh=Ep;var mf={},MR={},LR={},DR={},jR={},BR={},Eb,UH;function CIe(){if(UH)return Eb;UH=1,Eb=t(typeof ln<"u"&&ln)||t(Eb.Buffer)||t(typeof window<"u"&&window.Buffer)||Eb.Buffer;function t(e){return e&&e.isBuffer&&e}return Eb}var UR,FH;function nj(){if(FH)return UR;FH=1;var t={}.toString;return UR=Array.isArray||function(e){return t.call(e)=="[object Array]"},UR}var FR={exports:{}},$H;function PIe(){if($H)return FR.exports;$H=1;var t=il(),e=FR.exports=n(0);e.alloc=n,e.concat=t.concat,e.from=r;function n(i){return new Array(i)}function r(i){if(!t.isBuffer(i)&&t.isView(i))i=t.Uint8Array.from(i);else if(t.isArrayBuffer(i))i=new Uint8Array(i);else{if(typeof i=="string")return t.from.call(e,i);if(typeof i=="number")throw new TypeError('"value" argument must not be a number')}return Array.prototype.slice.call(i)}return FR.exports}var $R={exports:{}},zH;function _Ie(){if(zH)return $R.exports;zH=1;var t=il(),e=t.global,n=$R.exports=t.hasBuffer?r(0):[];n.alloc=t.hasBuffer&&e.alloc||r,n.concat=t.concat,n.from=i;function r(s){return new e(s)}function i(s){if(!t.isBuffer(s)&&t.isView(s))s=t.Uint8Array.from(s);else if(t.isArrayBuffer(s))s=new Uint8Array(s);else{if(typeof s=="string")return t.from.call(n,s);if(typeof s=="number")throw new TypeError('"value" argument must not be a number')}return e.from&&e.from.length!==1?e.from(s):new e(s)}return $R.exports}var zR={exports:{}},VH;function IIe(){if(VH)return zR.exports;VH=1;var t=il(),e=zR.exports=t.hasArrayBuffer?n(0):[];e.alloc=n,e.concat=t.concat,e.from=r;function n(i){return new Uint8Array(i)}function r(i){if(t.isView(i)){var s=i.byteOffset,o=i.byteLength;i=i.buffer,i.byteLength!==o&&(i.slice?i=i.slice(s,s+o):(i=new Uint8Array(i),i.byteLength!==o&&(i=Array.prototype.slice.call(i,s,s+o))))}else{if(typeof i=="string")return t.from.call(e,i);if(typeof i=="number")throw new TypeError('"value" argument must not be a number')}return new Uint8Array(i)}return zR.exports}var Z0={},Sb={},HH;function RIe(){if(HH)return Sb;HH=1,Sb.copy=n,Sb.toString=e,Sb.write=t;function t(r,i){for(var s=this,o=i||(i|=0),a=r.length,l=0,c=0;c<a;)l=r.charCodeAt(c++),l<128?s[o++]=l:l<2048?(s[o++]=192|l>>>6,s[o++]=128|l&63):l<55296||l>57343?(s[o++]=224|l>>>12,s[o++]=128|l>>>6&63,s[o++]=128|l&63):(l=(l-55296<<10|r.charCodeAt(c++)-56320)+65536,s[o++]=240|l>>>18,s[o++]=128|l>>>12&63,s[o++]=128|l>>>6&63,s[o++]=128|l&63);return o-i}function e(r,i,s){var o=this,a=i|0;s||(s=o.length);for(var l="",c=0;a<s;){if(c=o[a++],c<128){l+=String.fromCharCode(c);continue}(c&224)===192?c=(c&31)<<6|o[a++]&63:(c&240)===224?c=(c&15)<<12|(o[a++]&63)<<6|o[a++]&63:(c&248)===240&&(c=(c&7)<<18|(o[a++]&63)<<12|(o[a++]&63)<<6|o[a++]&63),c>=65536?(c-=65536,l+=String.fromCharCode((c>>>10)+55296,(c&1023)+56320)):l+=String.fromCharCode(c)}return l}function n(r,i,s,o){var a;s||(s=0),!o&&o!==0&&(o=this.length),i||(i=0);var l=o-s;if(r===this&&s<i&&i<o)for(a=l-1;a>=0;a--)r[a+i]=this[a+s];else for(a=0;a<l;a++)r[a+i]=this[a+s];return l}return Sb}var qH;function rj(){if(qH)return Z0;qH=1;var t=RIe();Z0.copy=s,Z0.slice=o,Z0.toString=a,Z0.write=l("write");var e=il(),n=e.global,r=e.hasBuffer&&"TYPED_ARRAY_SUPPORT"in n,i=r&&!n.TYPED_ARRAY_SUPPORT;function s(c,u,h,m){var g=e.isBuffer(this),y=e.isBuffer(c);if(g&&y)return this.copy(c,u,h,m);if(!i&&!g&&!y&&e.isView(this)&&e.isView(c)){var v=h||m!=null?o.call(this,h,m):this;return c.set(v,u),v.length}else return t.copy.call(this,c,u,h,m)}function o(c,u){var h=this.slice||!i&&this.subarray;if(h)return h.call(this,c,u);var m=e.alloc.call(this,u-c);return s.call(this,m,0,c,u),m}function a(c,u,h){var m=!r&&e.isBuffer(this)?this.toString:t.toString;return m.apply(this,arguments)}function l(c){return u;function u(){var h=this[c]||t[c];return h.apply(this,arguments)}}return Z0}var GH;function il(){return GH||(GH=1,(function(t){var e=t.global=CIe(),n=t.hasBuffer=e&&!!e.isBuffer,r=t.hasArrayBuffer=typeof ArrayBuffer<"u",i=t.isArray=nj();t.isArrayBuffer=r?v:k;var s=t.isBuffer=n?e.isBuffer:k,o=t.isView=r?ArrayBuffer.isView||N("ArrayBuffer","buffer"):k;t.alloc=m,t.concat=g,t.from=h;var a=t.Array=PIe(),l=t.Buffer=_Ie(),c=t.Uint8Array=IIe(),u=t.prototype=rj();function h(R){return typeof R=="string"?b.call(this,R):w(this).from(R)}function m(R){return w(this).alloc(R)}function g(R,D){D||(D=0,Array.prototype.forEach.call(R,U));var O=this!==t&&this||R[0],B=m.call(O,D),z=0;return Array.prototype.forEach.call(R,$),B;function U(W){D+=W.length}function $(W){z+=u.copy.call(W,B,z)}}var y=N("ArrayBuffer");function v(R){return R instanceof ArrayBuffer||y(R)}function b(R){var D=R.length*3,O=m.call(this,D),B=u.write.call(O,R);return D!==B&&(O=u.slice.call(O,0,B)),O}function w(R){return s(R)?l:o(R)?c:i(R)?a:n?l:r?c:a}function k(){return!1}function N(R,D){return R="[object "+R+"]",function(O){return O!=null&&{}.toString.call(D?O[D]:O)===R}}})(BR)),BR}var KH;function ij(){if(KH)return jR;KH=1,jR.ExtBuffer=e;var t=il();function e(n,r){if(!(this instanceof e))return new e(n,r);this.buffer=t.from(n),this.type=r}return jR}var VR={},WH;function OIe(){if(WH)return VR;WH=1,VR.setExtPackers=s;var t=il(),e=t.global,n=t.Uint8Array.from,r,i={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function s(u){u.addExtPacker(14,Error,[c,o]),u.addExtPacker(1,EvalError,[c,o]),u.addExtPacker(2,RangeError,[c,o]),u.addExtPacker(3,ReferenceError,[c,o]),u.addExtPacker(4,SyntaxError,[c,o]),u.addExtPacker(5,TypeError,[c,o]),u.addExtPacker(6,URIError,[c,o]),u.addExtPacker(10,RegExp,[l,o]),u.addExtPacker(11,Boolean,[a,o]),u.addExtPacker(12,String,[a,o]),u.addExtPacker(13,Date,[Number,o]),u.addExtPacker(15,Number,[a,o]),typeof Uint8Array<"u"&&(u.addExtPacker(17,Int8Array,n),u.addExtPacker(18,Uint8Array,n),u.addExtPacker(19,Int16Array,n),u.addExtPacker(20,Uint16Array,n),u.addExtPacker(21,Int32Array,n),u.addExtPacker(22,Uint32Array,n),u.addExtPacker(23,Float32Array,n),typeof Float64Array<"u"&&u.addExtPacker(24,Float64Array,n),typeof Uint8ClampedArray<"u"&&u.addExtPacker(25,Uint8ClampedArray,n),u.addExtPacker(26,ArrayBuffer,n),u.addExtPacker(29,DataView,n)),t.hasBuffer&&u.addExtPacker(27,e,t.from)}function o(u){return r||(r=Hse().encode),r(u)}function a(u){return u.valueOf()}function l(u){u=RegExp.prototype.toString.call(u).split("/"),u.shift();var h=[u.pop()];return h.unshift(u.join("/")),h}function c(u){var h={};for(var m in i)h[m]=u[m];return h}return VR}var HR={},hA={},YH;function sj(){return YH||(YH=1,(function(t){(function(e){var n="undefined",r=n!==typeof ln&&ln,i=n!==typeof Uint8Array&&Uint8Array,s=n!==typeof ArrayBuffer&&ArrayBuffer,o=[0,0,0,0,0,0,0,0],a=Array.isArray||O,l=4294967296,c=16777216,u;h("Uint64BE",!0,!0),h("Int64BE",!0,!1),h("Uint64LE",!1,!0),h("Int64LE",!1,!1);function h(B,z,U){var $=z?0:4,W=z?4:0,H=z?0:3,F=z?1:2,T=z?2:1,_=z?3:0,L=z?k:R,V=z?N:D,K=q.prototype,te="is"+B,G="_"+te;return K.buffer=void 0,K.offset=0,K[G]=!0,K.toNumber=X,K.toString=se,K.toJSON=X,K.toArray=m,r&&(K.toBuffer=g),i&&(K.toArrayBuffer=y),q[te]=M,e[B]=q,q;function q(ce,ve,Ne,pe){return this instanceof q?P(this,ce,ve,Ne,pe):new q(ce,ve,Ne,pe)}function M(ce){return!!(ce&&ce[G])}function P(ce,ve,Ne,pe,Le){if(i&&s&&(ve instanceof s&&(ve=new i(ve)),pe instanceof s&&(pe=new i(pe))),!ve&&!Ne&&!pe&&!u){ce.buffer=w(o,0);return}if(!v(ve,Ne)){var he=u||Array;Le=Ne,pe=ve,Ne=0,ve=new he(8)}ce.buffer=ve,ce.offset=Ne|=0,n!==typeof pe&&(typeof pe=="string"?Y(ve,Ne,pe,Le||10):v(pe,Le)?b(ve,Ne,pe,Le):typeof Le=="number"?(oe(ve,Ne+$,pe),oe(ve,Ne+W,Le)):pe>0?L(ve,Ne,pe):pe<0?V(ve,Ne,pe):b(ve,Ne,o,0))}function Y(ce,ve,Ne,pe){var Le=0,he=Ne.length,Te=0,Ge=0;Ne[0]==="-"&&Le++;for(var We=Le;Le<he;){var Qe=parseInt(Ne[Le++],pe);if(!(Qe>=0))break;Ge=Ge*pe+Qe,Te=Te*pe+Math.floor(Ge/l),Ge%=l}We&&(Te=~Te,Ge?Ge=l-Ge:Te++),oe(ce,ve+$,Te),oe(ce,ve+W,Ge)}function X(){var ce=this.buffer,ve=this.offset,Ne=me(ce,ve+$),pe=me(ce,ve+W);return U||(Ne|=0),Ne?Ne*l+pe:pe}function se(ce){var ve=this.buffer,Ne=this.offset,pe=me(ve,Ne+$),Le=me(ve,Ne+W),he="",Te=!U&&pe&2147483648;for(Te&&(pe=~pe,Le=l-Le),ce=ce||10;;){var Ge=pe%ce*l+Le;if(pe=Math.floor(pe/ce),Le=Math.floor(Ge/ce),he=(Ge%ce).toString(ce)+he,!pe&&!Le)break}return Te&&(he="-"+he),he}function oe(ce,ve,Ne){ce[ve+_]=Ne&255,Ne=Ne>>8,ce[ve+T]=Ne&255,Ne=Ne>>8,ce[ve+F]=Ne&255,Ne=Ne>>8,ce[ve+H]=Ne&255}function me(ce,ve){return ce[ve+H]*c+(ce[ve+F]<<16)+(ce[ve+T]<<8)+ce[ve+_]}}function m(B){var z=this.buffer,U=this.offset;return u=null,B!==!1&&U===0&&z.length===8&&a(z)?z:w(z,U)}function g(B){var z=this.buffer,U=this.offset;if(u=r,B!==!1&&U===0&&z.length===8&&ln.isBuffer(z))return z;var $=new r(8);return b($,0,z,U),$}function y(B){var z=this.buffer,U=this.offset,$=z.buffer;if(u=i,B!==!1&&U===0&&$ instanceof s&&$.byteLength===8)return $;var W=new i(8);return b(W,0,z,U),W.buffer}function v(B,z){var U=B&&B.length;return z|=0,U&&z+8<=U&&typeof B[z]!="string"}function b(B,z,U,$){z|=0,$|=0;for(var W=0;W<8;W++)B[z++]=U[$++]&255}function w(B,z){return Array.prototype.slice.call(B,z,z+8)}function k(B,z,U){for(var $=z+8;$>z;)B[--$]=U&255,U/=256}function N(B,z,U){var $=z+8;for(U++;$>z;)B[--$]=-U&255^255,U/=256}function R(B,z,U){for(var $=z+8;z<$;)B[z++]=U&255,U/=256}function D(B,z,U){var $=z+8;for(U++;z<$;)B[z++]=-U&255^255,U/=256}function O(B){return!!B&&Object.prototype.toString.call(B)=="[object Array]"}})(typeof t.nodeName!="string"?t:hA||{})})(hA)),hA}var qR={},pA={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var JH;function Fse(){return JH||(JH=1,pA.read=function(t,e,n,r,i){var s,o,a=i*8-r-1,l=(1<<a)-1,c=l>>1,u=-7,h=n?i-1:0,m=n?-1:1,g=t[e+h];for(h+=m,s=g&(1<<-u)-1,g>>=-u,u+=a;u>0;s=s*256+t[e+h],h+=m,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=r;u>0;o=o*256+t[e+h],h+=m,u-=8);if(s===0)s=1-c;else{if(s===l)return o?NaN:(g?-1:1)*(1/0);o=o+Math.pow(2,r),s=s-c}return(g?-1:1)*o*Math.pow(2,s-r)},pA.write=function(t,e,n,r,i,s){var o,a,l,c=s*8-i-1,u=(1<<c)-1,h=u>>1,m=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=r?0:s-1,y=r?1:-1,v=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+h>=1?e+=m/l:e+=m*Math.pow(2,1-h),e*l>=2&&(o++,l/=2),o+h>=u?(a=0,o=u):o+h>=1?(a=(e*l-1)*Math.pow(2,i),o=o+h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;t[n+g]=a&255,g+=y,a/=256,i-=8);for(o=o<<i|a,c+=i;c>0;t[n+g]=o&255,g+=y,o/=256,c-=8);t[n+g-y]|=v*128}),pA}var GR={},XH;function $se(){if(XH)return GR;XH=1;for(var t=GR.uint8=new Array(256),e=0;e<=255;e++)t[e]=n(e);function n(r){return function(i){var s=i.reserve(1);i.buffer[s]=r}}return GR}var QH;function MIe(){if(QH)return qR;QH=1;var t=Fse(),e=sj(),n=e.Uint64BE,r=e.Int64BE,i=$se().uint8,s=il(),o=s.global,a=s.hasBuffer&&"TYPED_ARRAY_SUPPORT"in o,l=a&&!o.TYPED_ARRAY_SUPPORT,c=s.hasBuffer&&o.prototype||{};qR.getWriteToken=u;function u(O){return O&&O.uint8array?h():l||s.hasBuffer&&O&&O.safe?g():m()}function h(){var O=m();return O[202]=w(202,4,R),O[203]=w(203,8,D),O}function m(){var O=i.slice();return O[196]=y(196),O[197]=v(197),O[198]=b(198),O[199]=y(199),O[200]=v(200),O[201]=b(201),O[202]=w(202,4,c.writeFloatBE||R,!0),O[203]=w(203,8,c.writeDoubleBE||D,!0),O[204]=y(204),O[205]=v(205),O[206]=b(206),O[207]=w(207,8,k),O[208]=y(208),O[209]=v(209),O[210]=b(210),O[211]=w(211,8,N),O[217]=y(217),O[218]=v(218),O[219]=b(219),O[220]=v(220),O[221]=b(221),O[222]=v(222),O[223]=b(223),O}function g(){var O=i.slice();return O[196]=w(196,1,o.prototype.writeUInt8),O[197]=w(197,2,o.prototype.writeUInt16BE),O[198]=w(198,4,o.prototype.writeUInt32BE),O[199]=w(199,1,o.prototype.writeUInt8),O[200]=w(200,2,o.prototype.writeUInt16BE),O[201]=w(201,4,o.prototype.writeUInt32BE),O[202]=w(202,4,o.prototype.writeFloatBE),O[203]=w(203,8,o.prototype.writeDoubleBE),O[204]=w(204,1,o.prototype.writeUInt8),O[205]=w(205,2,o.prototype.writeUInt16BE),O[206]=w(206,4,o.prototype.writeUInt32BE),O[207]=w(207,8,k),O[208]=w(208,1,o.prototype.writeInt8),O[209]=w(209,2,o.prototype.writeInt16BE),O[210]=w(210,4,o.prototype.writeInt32BE),O[211]=w(211,8,N),O[217]=w(217,1,o.prototype.writeUInt8),O[218]=w(218,2,o.prototype.writeUInt16BE),O[219]=w(219,4,o.prototype.writeUInt32BE),O[220]=w(220,2,o.prototype.writeUInt16BE),O[221]=w(221,4,o.prototype.writeUInt32BE),O[222]=w(222,2,o.prototype.writeUInt16BE),O[223]=w(223,4,o.prototype.writeUInt32BE),O}function y(O){return function(B,z){var U=B.reserve(2),$=B.buffer;$[U++]=O,$[U]=z}}function v(O){return function(B,z){var U=B.reserve(3),$=B.buffer;$[U++]=O,$[U++]=z>>>8,$[U]=z}}function b(O){return function(B,z){var U=B.reserve(5),$=B.buffer;$[U++]=O,$[U++]=z>>>24,$[U++]=z>>>16,$[U++]=z>>>8,$[U]=z}}function w(O,B,z,U){return function($,W){var H=$.reserve(B+1);$.buffer[H++]=O,z.call($.buffer,W,H,U)}}function k(O,B){new n(this,B,O)}function N(O,B){new r(this,B,O)}function R(O,B){t.write(this,O,B,!1,23,4)}function D(O,B){t.write(this,O,B,!1,52,8)}return qR}var ZH;function LIe(){if(ZH)return HR;ZH=1;var t=nj(),e=sj(),n=e.Uint64BE,r=e.Int64BE,i=il(),s=rj(),o=MIe(),a=$se().uint8,l=ij().ExtBuffer,c=typeof Uint8Array<"u",u=typeof Map<"u",h=[];h[1]=212,h[2]=213,h[4]=214,h[8]=215,h[16]=216,HR.getWriteType=m;function m(g){var y=o.getWriteToken(g),v=g&&g.useraw,b=c&&g&&g.binarraybuffer,w=b?i.isArrayBuffer:i.isBuffer,k=b?K:V,N=u&&g&&g.usemap,R=N?q:G,D={boolean:O,function:_,number:B,object:v?T:F,string:H(v?W:$),symbol:_,undefined:_};return D;function O(P,Y){var X=Y?195:194;y[X](P,Y)}function B(P,Y){var X=Y|0,se;if(Y!==X){se=203,y[se](P,Y);return}else-32<=X&&X<=127?se=X&255:0<=X?se=X<=255?204:X<=65535?205:206:se=-128<=X?208:-32768<=X?209:210;y[se](P,X)}function z(P,Y){var X=207;y[X](P,Y.toArray())}function U(P,Y){var X=211;y[X](P,Y.toArray())}function $(P){return P<32?1:P<=255?2:P<=65535?3:5}function W(P){return P<32?1:P<=65535?3:5}function H(P){return Y;function Y(X,se){var oe=se.length,me=5+oe*3;X.offset=X.reserve(me);var ce=X.buffer,ve=P(oe),Ne=X.offset+ve;oe=s.write.call(ce,se,Ne);var pe=P(oe);if(ve!==pe){var Le=Ne+pe-ve,he=Ne+oe;s.copy.call(ce,ce,Le,Ne,he)}var Te=pe===1?160+oe:pe<=3?215+pe:219;y[Te](X,oe),X.offset+=oe}}function F(P,Y){if(Y===null)return _(P,Y);if(w(Y))return k(P,Y);if(t(Y))return L(P,Y);if(n.isUint64BE(Y))return z(P,Y);if(r.isInt64BE(Y))return U(P,Y);var X=P.codec.getExtPacker(Y);if(X&&(Y=X(Y)),Y instanceof l)return te(P,Y);R(P,Y)}function T(P,Y){if(w(Y))return M(P,Y);F(P,Y)}function _(P,Y){var X=192;y[X](P,Y)}function L(P,Y){var X=Y.length,se=X<16?144+X:X<=65535?220:221;y[se](P,X);for(var oe=P.codec.encode,me=0;me<X;me++)oe(P,Y[me])}function V(P,Y){var X=Y.length,se=X<255?196:X<=65535?197:198;y[se](P,X),P.send(Y)}function K(P,Y){V(P,new Uint8Array(Y))}function te(P,Y){var X=Y.buffer,se=X.length,oe=h[se]||(se<255?199:se<=65535?200:201);y[oe](P,se),a[Y.type](P),P.send(X)}function G(P,Y){var X=Object.keys(Y),se=X.length,oe=se<16?128+se:se<=65535?222:223;y[oe](P,se);var me=P.codec.encode;X.forEach(function(ce){me(P,ce),me(P,Y[ce])})}function q(P,Y){if(!(Y instanceof Map))return G(P,Y);var X=Y.size,se=X<16?128+X:X<=65535?222:223;y[se](P,X);var oe=P.codec.encode;Y.forEach(function(me,ce,ve){oe(P,ce),oe(P,me)})}function M(P,Y){var X=Y.length,se=X<32?160+X:X<=65535?218:219;y[se](P,X),P.send(Y)}}return HR}var eg={},eq;function DN(){if(eq)return eg;eq=1;var t=nj();eg.createCodec=a,eg.install=r,eg.filter=o;var e=il();function n(l){if(!(this instanceof n))return new n(l);this.options=l,this.init()}n.prototype.init=function(){var l=this.options;return l&&l.uint8array&&(this.bufferish=e.Uint8Array),this};function r(l){for(var c in l)n.prototype[c]=i(n.prototype[c],l[c])}function i(l,c){return l&&c?u:l||c;function u(){return l.apply(this,arguments),c.apply(this,arguments)}}function s(l){return l=l.slice(),function(u){return l.reduce(c,u)};function c(u,h){return h(u)}}function o(l){return t(l)?s(l):l}function a(l){return new n(l)}return eg.preset=a({preset:!0}),eg}var tq;function oj(){if(tq)return DR;tq=1;var t=ij().ExtBuffer,e=OIe(),n=LIe(),r=DN();r.install({addExtPacker:o,getExtPacker:a,init:s}),DR.preset=s.call(r.preset);function i(l){var c=n.getWriteType(l);return u;function u(h,m){var g=c[typeof m];if(!g)throw new Error('Unsupported type "'+typeof m+'": '+m);g(h,m)}}function s(){var l=this.options;return this.encode=i(l),l&&l.preset&&e.setExtPackers(this),this}function o(l,c,u){u=r.filter(u);var h=c.name;if(h&&h!=="Object"){var m=this.extPackers||(this.extPackers={});m[h]=y}else{var g=this.extEncoderList||(this.extEncoderList=[]);g.unshift([c,y])}function y(v){return u&&(v=u(v)),new t(v,l)}}function a(l){var c=this.extPackers||(this.extPackers={}),u=l.constructor,h=u&&u.name&&c[u.name];if(h)return h;for(var m=this.extEncoderList||(this.extEncoderList=[]),g=m.length,y=0;y<g;y++){var v=m[y];if(u===v[0])return v[1]}}return DR}var mA={},nq;function zse(){if(nq)return mA;nq=1,mA.FlexDecoder=i,mA.FlexEncoder=s;var t=il(),e=2048,n=65536,r="BUFFER_SHORTAGE";function i(){if(!(this instanceof i))return new i}function s(){if(!(this instanceof s))return new s}i.mixin=g(o()),i.mixin(i.prototype),s.mixin=g(a()),s.mixin(s.prototype);function o(){return{bufferish:t,write:y,fetch:c,flush:v,push:h,pull:m,read:u,reserve:b,offset:0};function y(w){var k=this.offset?t.prototype.slice.call(this.buffer,this.offset):this.buffer;this.buffer=k?w?this.bufferish.concat([k,w]):k:w,this.offset=0}function v(){for(;this.offset<this.buffer.length;){var w=this.offset,k;try{k=this.fetch()}catch(N){if(N&&N.message!=r)throw N;this.offset=w;break}this.push(k)}}function b(w){var k=this.offset,N=k+w;if(N>this.buffer.length)throw new Error(r);return this.offset=N,k}}function a(){return{bufferish:t,write:l,fetch:y,flush:v,push:h,pull:b,read:u,reserve:w,send:k,maxBufferSize:n,minBufferSize:e,offset:0,start:0};function y(){var N=this.start;if(N<this.offset){var R=this.start=this.offset;return t.prototype.slice.call(this.buffer,N,R)}}function v(){for(;this.start<this.offset;){var N=this.fetch();N&&this.push(N)}}function b(){var N=this.buffers||(this.buffers=[]),R=N.length>1?this.bufferish.concat(N):N[0];return N.length=0,R}function w(N){var R=N|0;if(this.buffer){var D=this.buffer.length,O=this.offset|0,B=O+R;if(B<D)return this.offset=B,O;this.flush(),N=Math.max(N,Math.min(D*2,this.maxBufferSize))}return N=Math.max(N,this.minBufferSize),this.buffer=this.bufferish.alloc(N),this.start=0,this.offset=R,0}function k(N){var R=N.length;if(R>this.minBufferSize)this.flush(),this.push(N);else{var D=this.reserve(R);t.prototype.copy.call(N,this.buffer,D)}}}function l(){throw new Error("method not implemented: write()")}function c(){throw new Error("method not implemented: fetch()")}function u(){var y=this.buffers&&this.buffers.length;return y?(this.flush(),this.pull()):this.fetch()}function h(y){var v=this.buffers||(this.buffers=[]);v.push(y)}function m(){var y=this.buffers||(this.buffers=[]);return y.shift()}function g(y){return v;function v(b){for(var w in y)b[w]=y[w];return b}}return mA}var rq;function Vse(){if(rq)return LR;rq=1,LR.EncodeBuffer=n;var t=oj().preset,e=zse().FlexEncoder;e.mixin(n.prototype);function n(r){if(!(this instanceof n))return new n(r);if(r&&(this.options=r,r.codec)){var i=this.codec=r.codec;i.bufferish&&(this.bufferish=i.bufferish)}}return n.prototype.codec=t,n.prototype.write=function(r){this.codec.encode(this,r)},LR}var iq;function Hse(){if(iq)return MR;iq=1,MR.encode=e;var t=Vse().EncodeBuffer;function e(n,r){var i=new t(r);return i.write(n),i.read()}return MR}var KR={},WR={},YR={},JR={},sq;function DIe(){if(sq)return JR;sq=1,JR.setExtUnpackers=i;var t=il(),e=t.global,n,r={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function i(u){u.addExtUnpacker(14,[s,a(Error)]),u.addExtUnpacker(1,[s,a(EvalError)]),u.addExtUnpacker(2,[s,a(RangeError)]),u.addExtUnpacker(3,[s,a(ReferenceError)]),u.addExtUnpacker(4,[s,a(SyntaxError)]),u.addExtUnpacker(5,[s,a(TypeError)]),u.addExtUnpacker(6,[s,a(URIError)]),u.addExtUnpacker(10,[s,o]),u.addExtUnpacker(11,[s,l(Boolean)]),u.addExtUnpacker(12,[s,l(String)]),u.addExtUnpacker(13,[s,l(Date)]),u.addExtUnpacker(15,[s,l(Number)]),typeof Uint8Array<"u"&&(u.addExtUnpacker(17,l(Int8Array)),u.addExtUnpacker(18,l(Uint8Array)),u.addExtUnpacker(19,[c,l(Int16Array)]),u.addExtUnpacker(20,[c,l(Uint16Array)]),u.addExtUnpacker(21,[c,l(Int32Array)]),u.addExtUnpacker(22,[c,l(Uint32Array)]),u.addExtUnpacker(23,[c,l(Float32Array)]),typeof Float64Array<"u"&&u.addExtUnpacker(24,[c,l(Float64Array)]),typeof Uint8ClampedArray<"u"&&u.addExtUnpacker(25,l(Uint8ClampedArray)),u.addExtUnpacker(26,c),u.addExtUnpacker(29,[c,l(DataView)])),t.hasBuffer&&u.addExtUnpacker(27,l(e))}function s(u){return n||(n=Kse().decode),n(u)}function o(u){return RegExp.apply(null,u)}function a(u){return function(h){var m=new u;for(var g in r)m[g]=h[g];return m}}function l(u){return function(h){return new u(h)}}function c(u){return new Uint8Array(u).buffer}return JR}var gA={},oq;function qse(){if(oq)return gA;oq=1;var t=Fse(),e=sj(),n=e.Uint64BE,r=e.Int64BE;gA.getReadFormat=l,gA.readUint8=b;var i=il(),s=rj(),o=typeof Map<"u",a=!0;function l(F){var T=i.hasArrayBuffer&&F&&F.binarraybuffer,_=F&&F.int64,L=o&&F&&F.usemap,V={map:L?u:c,array:h,str:m,bin:T?y:g,ext:v,uint8:b,uint16:k,uint32:R,uint64:O(8,_?U:B),int8:w,int16:N,int32:D,int64:O(8,_?$:z),float32:O(4,W),float64:O(8,H)};return V}function c(F,T){var _={},L,V=new Array(T),K=new Array(T),te=F.codec.decode;for(L=0;L<T;L++)V[L]=te(F),K[L]=te(F);for(L=0;L<T;L++)_[V[L]]=K[L];return _}function u(F,T){var _=new Map,L,V=new Array(T),K=new Array(T),te=F.codec.decode;for(L=0;L<T;L++)V[L]=te(F),K[L]=te(F);for(L=0;L<T;L++)_.set(V[L],K[L]);return _}function h(F,T){for(var _=new Array(T),L=F.codec.decode,V=0;V<T;V++)_[V]=L(F);return _}function m(F,T){var _=F.reserve(T),L=_+T;return s.toString.call(F.buffer,"utf-8",_,L)}function g(F,T){var _=F.reserve(T),L=_+T,V=s.slice.call(F.buffer,_,L);return i.from(V)}function y(F,T){var _=F.reserve(T),L=_+T,V=s.slice.call(F.buffer,_,L);return i.Uint8Array.from(V).buffer}function v(F,T){var _=F.reserve(T+1),L=F.buffer[_++],V=_+T,K=F.codec.getExtUnpacker(L);if(!K)throw new Error("Invalid ext type: "+(L&&"0x"+L.toString(16)));var te=s.slice.call(F.buffer,_,V);return K(te)}function b(F){var T=F.reserve(1);return F.buffer[T]}function w(F){var T=F.reserve(1),_=F.buffer[T];return _&128?_-256:_}function k(F){var T=F.reserve(2),_=F.buffer;return _[T++]<<8|_[T]}function N(F){var T=F.reserve(2),_=F.buffer,L=_[T++]<<8|_[T];return L&32768?L-65536:L}function R(F){var T=F.reserve(4),_=F.buffer;return _[T++]*16777216+(_[T++]<<16)+(_[T++]<<8)+_[T]}function D(F){var T=F.reserve(4),_=F.buffer;return _[T++]<<24|_[T++]<<16|_[T++]<<8|_[T]}function O(F,T){return function(_){var L=_.reserve(F);return T.call(_.buffer,L,a)}}function B(F){return new n(this,F).toNumber()}function z(F){return new r(this,F).toNumber()}function U(F){return new n(this,F)}function $(F){return new r(this,F)}function W(F){return t.read(this,F,!1,23,4)}function H(F){return t.read(this,F,!1,52,8)}return gA}var XR={},aq;function jIe(){if(aq)return XR;aq=1;var t=qse();XR.getReadToken=e;function e(a){var l=t.getReadFormat(a);return a&&a.useraw?r(l):n(l)}function n(a){var l,c=new Array(256);for(l=0;l<=127;l++)c[l]=i(l);for(l=128;l<=143;l++)c[l]=o(l-128,a.map);for(l=144;l<=159;l++)c[l]=o(l-144,a.array);for(l=160;l<=191;l++)c[l]=o(l-160,a.str);for(c[192]=i(null),c[193]=null,c[194]=i(!1),c[195]=i(!0),c[196]=s(a.uint8,a.bin),c[197]=s(a.uint16,a.bin),c[198]=s(a.uint32,a.bin),c[199]=s(a.uint8,a.ext),c[200]=s(a.uint16,a.ext),c[201]=s(a.uint32,a.ext),c[202]=a.float32,c[203]=a.float64,c[204]=a.uint8,c[205]=a.uint16,c[206]=a.uint32,c[207]=a.uint64,c[208]=a.int8,c[209]=a.int16,c[210]=a.int32,c[211]=a.int64,c[212]=o(1,a.ext),c[213]=o(2,a.ext),c[214]=o(4,a.ext),c[215]=o(8,a.ext),c[216]=o(16,a.ext),c[217]=s(a.uint8,a.str),c[218]=s(a.uint16,a.str),c[219]=s(a.uint32,a.str),c[220]=s(a.uint16,a.array),c[221]=s(a.uint32,a.array),c[222]=s(a.uint16,a.map),c[223]=s(a.uint32,a.map),l=224;l<=255;l++)c[l]=i(l-256);return c}function r(a){var l,c=n(a).slice();for(c[217]=c[196],c[218]=c[197],c[219]=c[198],l=160;l<=191;l++)c[l]=o(l-160,a.bin);return c}function i(a){return function(){return a}}function s(a,l){return function(c){var u=a(c);return l(c,u)}}function o(a,l){return function(c){return l(c,a)}}return XR}var lq;function aj(){if(lq)return YR;lq=1;var t=ij().ExtBuffer,e=DIe(),n=qse().readUint8,r=jIe(),i=DN();i.install({addExtUnpacker:a,getExtUnpacker:l,init:o}),YR.preset=o.call(i.preset);function s(c){var u=r.getReadToken(c);return h;function h(m){var g=n(m),y=u[g];if(!y)throw new Error("Invalid type: "+(g&&"0x"+g.toString(16)));return y(m)}}function o(){var c=this.options;return this.decode=s(c),c&&c.preset&&e.setExtUnpackers(this),this}function a(c,u){var h=this.extUnpackers||(this.extUnpackers=[]);h[c]=i.filter(u)}function l(c){var u=this.extUnpackers||(this.extUnpackers=[]);return u[c]||h;function h(m){return new t(m,c)}}return YR}var cq;function Gse(){if(cq)return WR;cq=1,WR.DecodeBuffer=n;var t=aj().preset,e=zse().FlexDecoder;e.mixin(n.prototype);function n(r){if(!(this instanceof n))return new n(r);if(r&&(this.options=r,r.codec)){var i=this.codec=r.codec;i.bufferish&&(this.bufferish=i.bufferish)}}return n.prototype.codec=t,n.prototype.fetch=function(){return this.codec.decode(this)},WR}var uq;function Kse(){if(uq)return KR;uq=1,KR.decode=e;var t=Gse().DecodeBuffer;function e(n,r){var i=new t(r);return i.write(n),i.read()}return KR}var QR={},ZR={exports:{}};/**
 * event-lite.js - Light-weight EventEmitter (less than 1KB when gzipped)
 *
 * @copyright Yusuke Kawasaki
 * @license MIT
 * @constructor
 * @see https://github.com/kawanet/event-lite
 * @see http://kawanet.github.io/event-lite/EventLite.html
 * @example
 * var EventLite = require("event-lite");
 *
 * function MyClass() {...}             // your class
 *
 * EventLite.mixin(MyClass.prototype);  // import event methods
 *
 * var obj = new MyClass();
 * obj.on("foo", function() {...});     // add event listener
 * obj.once("bar", function() {...});   // add one-time event listener
 * obj.emit("foo");                     // dispatch event
 * obj.emit("bar");                     // dispatch another event
 * obj.off("foo");                      // remove event listener
 */var dq;function Wse(){return dq||(dq=1,(function(t){function e(){if(!(this instanceof e))return new e}(function(n){t.exports=n;var r="listeners",i={on:o,once:a,off:l,emit:c};s(n.prototype),n.mixin=s;function s(h){for(var m in i)h[m]=i[m];return h}function o(h,m){return u(this,h).push(m),this}function a(h,m){var g=this;return y.originalListener=m,u(g,h).push(y),g;function y(){l.call(g,h,y),m.apply(this,arguments)}}function l(h,m){var g=this,y;if(!arguments.length)delete g[r];else if(m){if(y=u(g,h,!0),y){if(y=y.filter(v),!y.length)return l.call(g,h);g[r][h]=y}}else if(y=g[r],y&&(delete y[h],!Object.keys(y).length))return l.call(g);return g;function v(b){return b!==m&&b.originalListener!==m}}function c(h,m){var g=this,y=u(g,h,!0);if(!y)return!1;var v=arguments.length;if(v===1)y.forEach(w);else if(v===2)y.forEach(k);else{var b=Array.prototype.slice.call(arguments,1);y.forEach(N)}return!!y.length;function w(R){R.call(g)}function k(R){R.call(g,m)}function N(R){R.apply(g,b)}}function u(h,m,g){if(!(g&&!h[r])){var y=h[r]||(h[r]={});return y[m]||(y[m]=[])}}})(e)})(ZR)),ZR.exports}var fq;function BIe(){if(fq)return QR;fq=1,QR.Encoder=n;var t=Wse(),e=Vse().EncodeBuffer;function n(r){if(!(this instanceof n))return new n(r);e.call(this,r)}return n.prototype=new e,t.mixin(n.prototype),n.prototype.encode=function(r){this.write(r),this.emit("data",this.read())},n.prototype.end=function(r){arguments.length&&this.encode(r),this.flush(),this.emit("end")},QR}var e5={},hq;function UIe(){if(hq)return e5;hq=1,e5.Decoder=n;var t=Wse(),e=Gse().DecodeBuffer;function n(r){if(!(this instanceof n))return new n(r);e.call(this,r)}return n.prototype=new e,t.mixin(n.prototype),n.prototype.decode=function(r){arguments.length&&this.write(r),this.flush()},n.prototype.push=function(r){this.emit("data",r)},n.prototype.end=function(r){this.decode(r),this.emit("end")},e5}var t5={},pq;function FIe(){return pq||(pq=1,aj(),oj(),t5.createCodec=DN().createCodec),t5}var n5={},mq;function $Ie(){return mq||(mq=1,aj(),oj(),n5.codec={preset:DN().preset}),n5}var gq;function zIe(){return gq||(gq=1,mf.encode=Hse().encode,mf.decode=Kse().decode,mf.Encoder=BIe().Encoder,mf.Decoder=UIe().Decoder,mf.createCodec=FIe().createCodec,mf.codec=$Ie().codec),mf}var VIe=zIe();const HIe=gs(VIe),Yse="https://api.hyperliquid-testnet.xyz",qIe=`${Yse}/exchange`,dl=`${Yse}/info`,GIe=!1,yq=1200,r5=60*1e3,xq=100,i5=3,vq=2e3,bq={l2Book:2,allMids:2,clearinghouseState:2,orderStatus:2,spotClearinghouseState:2,exchangeStatus:2,meta:20,metaAndAssetCtxs:20,candleSnapshot:20,userFills:20,openOrders:20,userRole:60,default:20};class KIe{constructor(){this.weightHistory=[],this.requestQueue=Promise.resolve(),this.lastRequestTime=0,this.cache=new Map,this.CACHE_TTL_MS=5e3,this.PRICE_CACHE_TTL_MS=2e3,this.CANDLE_CACHE_TTL_MS=1e4,this.ASSET_CONTEXT_CACHE_TTL_MS=3e4,this.dealerLockActive=!1,this.dealerLockResolver=null,this.waitingForDealerUnlock=Promise.resolve(),this.sharedDataCache=new Map,this.SHARED_CACHE_TTL_MS=15e3,this.universeCache=[],this.lastCacheUpdate=0}acquireDealerLock(){this.dealerLockActive||(this.dealerLockActive=!0,this.waitingForDealerUnlock=new Promise(e=>{this.dealerLockResolver=e}),console.log("[Hyperliquid]  Dealer lock ACQUIRED - other requests will be skipped"))}releaseDealerLock(){this.dealerLockActive&&(this.dealerLockActive=!1,this.dealerLockResolver&&(this.dealerLockResolver(),this.dealerLockResolver=null),this.waitingForDealerUnlock=Promise.resolve(),console.log("[Hyperliquid]  Dealer lock RELEASED - other requests can proceed"))}isDealerActive(){return this.dealerLockActive}getCurrentWeight(){const n=Date.now()-r5;return this.weightHistory=this.weightHistory.filter(r=>r.timestamp>n),this.weightHistory.reduce((r,i)=>r+i.weight,0)}recordWeight(e){this.weightHistory.push({timestamp:Date.now(),weight:e})}calculateWeight(e,n){const r=bq[e]||bq.default;return e==="candleSnapshot"&&n?r+Math.ceil(n/60):r}async waitForBudget(e){const n=this.getCurrentWeight(),r=yq-n;if(e<=r)return;const i=Date.now(),s=i-r5,o=[...this.weightHistory].sort((u,h)=>u.timestamp-h.timestamp);let a=e-r,l=i;for(const u of o)if(!(u.timestamp<=s)&&(a-=u.weight,l=u.timestamp+r5,a<=0))break;const c=Math.max(0,l-i);c>0&&(console.log(`[Hyperliquid] Rate budget: ${n}/${yq} used, waiting ${(c/1e3).toFixed(1)}s for budget...`),await new Promise(u=>setTimeout(u,c+100)))}async throttledFetch(e,n,r,i,s="default",o){if(r){const c=this.cache.get(r);if(c&&Date.now()-c.timestamp<(i||this.CACHE_TTL_MS))return new Response(JSON.stringify(c.data),{status:200,headers:{"Content-Type":"application/json"}})}const a=this.calculateWeight(s,o);this.requestQueue=this.requestQueue.then(async()=>{await this.waitForBudget(a);const u=Date.now()-this.lastRequestTime;u<xq&&await new Promise(h=>setTimeout(h,xq-u)),this.lastRequestTime=Date.now()}),await this.requestQueue,this.recordWeight(a);let l=null;for(let c=0;c<i5;c++)try{const u=await fetch(e,n);if(u.status===429){const h=parseInt(u.headers.get("Retry-After")||"2",10),m=Math.max(h*1e3,vq*Math.pow(2,c));console.warn(`[Hyperliquid] Rate limited (429), waiting ${m}ms before retry ${c+1}/${i5}`),await new Promise(g=>setTimeout(g,m));continue}if(u.ok&&r){const h=u.clone();try{const m=await h.json();this.cache.set(r,{data:m,timestamp:Date.now()})}catch{}}return u}catch(u){if(l=u,c<i5-1){const h=vq*Math.pow(2,c);await new Promise(m=>setTimeout(m,h))}}throw l||new Error("Request failed after retries")}async checkHealth(){try{return await this.getMetadata(),!0}catch(e){return console.error("Hyperliquid Health Check Failed:",e),!1}}createVaultWallet(){const e=nh.createRandom();return new nh(e.privateKey)}getWalletFromPrivateKey(e){return new nh(e)}async getMarketData(e){try{const n=await this.throttledFetch(dl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"l2Book",coin:e})},`marketData:${e}`,this.PRICE_CACHE_TTL_MS,"l2Book");if(!n.ok)throw new Error(`Failed to fetch market data: ${n.statusText}`);return await n.json()}catch(n){throw console.error("Hyperliquid Market Data Error:",n),n}}async getOrderBookMetrics(e){var n,r,i,s,o,a,l,c;try{const u=await this.getMarketData(e),h=((n=u.levels)==null?void 0:n[0])||[],m=((r=u.levels)==null?void 0:r[1])||[];if(h.length===0||m.length===0)throw new Error(`No order book data for ${e}`);const g=parseFloat(((i=h[0])==null?void 0:i.px)||"0"),y=parseFloat(((s=m[0])==null?void 0:s.px)||"0"),v=(g+y)/2,b=y-g,w=v>0?b/v*100:0,k=5;let N=0,R=0,D=0,O=0;const B=[],z=[];for(let _=0;_<h.length;_++){const L=parseFloat(((o=h[_])==null?void 0:o.px)||"0"),V=parseFloat(((a=h[_])==null?void 0:a.sz)||"0"),K=L*V;_<k&&(N+=K),D+=K,B.push({price:L,volume:K})}for(let _=0;_<m.length;_++){const L=parseFloat(((l=m[_])==null?void 0:l.px)||"0"),V=parseFloat(((c=m[_])==null?void 0:c.sz)||"0"),K=L*V;_<k&&(R+=K),O+=K,z.push({price:L,volume:K})}const U=O>0?D/O:1,$=.2,W=.2;let H,F;for(const{price:_,volume:L}of B)if(D>0&&L/D>$){H=_;break}for(const{price:_,volume:L}of z)if(O>0&&L/O>W){F=_;break}const T={bidAskSpread:parseFloat(w.toFixed(4)),bidAskSpreadUSDC:parseFloat(b.toFixed(4)),imbalanceRatio:parseFloat(U.toFixed(3)),nearBidDepth:parseFloat(N.toFixed(2)),nearAskDepth:parseFloat(R.toFixed(2)),totalBidDepth:parseFloat(D.toFixed(2)),totalAskDepth:parseFloat(O.toFixed(2)),bidWallPrice:H,askWallPrice:F,midPrice:parseFloat(v.toFixed(6)),bestBid:parseFloat(g.toFixed(6)),bestAsk:parseFloat(y.toFixed(6))};return console.log(`[Hyperliquid] OrderBook ${e}: Spread=${T.bidAskSpread}%, Imbalance=${T.imbalanceRatio}, NearDepth(B/A)=${T.nearBidDepth}/${T.nearAskDepth}`),T}catch(u){return console.error(`Hyperliquid OrderBook Metrics Error for ${e}:`,u),{bidAskSpread:0,bidAskSpreadUSDC:0,imbalanceRatio:1,nearBidDepth:0,nearAskDepth:0,totalBidDepth:0,totalAskDepth:0,midPrice:0,bestBid:0,bestAsk:0}}}async getUserState(e){try{const n=await this.throttledFetch(dl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"clearinghouseState",user:e})},`userState:${e}`,this.CACHE_TTL_MS,"clearinghouseState");if(!n.ok)throw new Error(`Failed to fetch user state: ${n.statusText}`);return await n.json()}catch(n){throw console.error("Hyperliquid User State Error:",n),n}}async getOpenOrders(e){try{const n=await this.throttledFetch(dl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"openOrders",user:e})},`openOrders:${e}`,this.CACHE_TTL_MS,"openOrders");if(!n.ok)throw new Error(`Failed to fetch open orders: ${n.statusText}`);return await n.json()}catch(n){throw console.error("Hyperliquid Open Orders Error:",n),n}}async getUserFills(e,n=20){try{const r=await this.throttledFetch(dl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"userFills",user:e})},`userFills:${e}`,this.CACHE_TTL_MS,"userFills");if(!r.ok)throw new Error(`Failed to fetch user fills: ${r.statusText}`);const i=await r.json();return Array.isArray(i)?i.slice(0,n):[]}catch(r){return console.error("Hyperliquid User Fills Error:",r),[]}}async getUserLedgerUpdates(e){try{const n=await this.throttledFetch(dl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"userNonFundingLedgerUpdates",user:e})},`ledgerUpdates:${e}`,this.CACHE_TTL_MS,"default");if(!n.ok)throw new Error(`Failed to fetch ledger updates: ${n.statusText}`);return await n.json()}catch(n){return console.error("Hyperliquid Ledger Updates Error:",n),[]}}async getCandles(e,n="1h",r=100){try{const i=Date.now(),s=this.intervalToMs(n),o=i-s*r,a=await this.throttledFetch(dl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"candleSnapshot",req:{coin:e,interval:n,startTime:o}})},`candles:${e}:${n}:${r}`,this.CANDLE_CACHE_TTL_MS,"candleSnapshot",r);if(!a.ok)throw new Error(`Failed to fetch candles: ${a.statusText}`);const l=await a.json();return Array.isArray(l)?l.map(c=>({time:c.t||c.time,open:parseFloat(c.o||c.open),high:parseFloat(c.h||c.high),low:parseFloat(c.l||c.low),close:parseFloat(c.c||c.close),volume:parseFloat(c.v||c.volume||"0")})):l.t&&Array.isArray(l.t)?l.t.map((c,u)=>{var h;return{time:c,open:parseFloat(l.o[u]),high:parseFloat(l.h[u]),low:parseFloat(l.l[u]),close:parseFloat(l.c[u]),volume:parseFloat(((h=l.v)==null?void 0:h[u])||"0")}}):[]}catch(i){return console.error("Hyperliquid Candles Error:",i),[]}}async getCurrentPrice(e){var n,r;try{const i=await this.getMarketData(e),s=parseFloat(((n=i.levels[0][0])==null?void 0:n.px)||"0"),o=parseFloat(((r=i.levels[1][0])==null?void 0:r.px)||"0");return(s+o)/2}catch(i){throw console.error(`Hyperliquid Price Error for ${e}:`,i),i}}intervalToMs(e){return{"1m":6e4,"5m":3e5,"15m":9e5,"1h":36e5,"4h":144e5,"1d":864e5,"1D":864e5}[e]||3600*1e3}async getMetadata(){try{const e=await this.throttledFetch(dl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"meta"})},"metadata",6e4,"meta");if(!e.ok)throw new Error(`Failed to fetch metadata: ${e.statusText}`);return await e.json()}catch(e){throw console.error("Hyperliquid Metadata Error:",e),e}}async getAllAvailableAssets(){try{return(await this.getMetadata()).universe.filter(n=>!n.isDelisted).map(n=>n.name)}catch(e){throw console.error("Hyperliquid Get Available Assets Error:",e),e}}async isValidAsset(e){try{return(await this.getAllAvailableAssets()).some(r=>r.toLowerCase()===e.toLowerCase())}catch(n){return console.error("Hyperliquid Asset Validation Error:",n),!0}}async signL1Action(e,n,r,i,s){const o=this.actionHash(n,r,i,s),a=this.constructPhantomAgent(o,GIe),l={name:"Exchange",version:"1",chainId:1337,verifyingContract:"0x0000000000000000000000000000000000000000"},c={Agent:[{name:"source",type:"string"},{name:"connectionId",type:"bytes32"}]},u=await e.signTypedData(l,c,a),h=no.from(u);return console.log("[Hyperliquid]  Signing Action:"),console.log("  - Domain:",JSON.stringify(l)),console.log("  - Types:",JSON.stringify(c)),console.log("  - Phantom Agent:",JSON.stringify(a)),console.log("  - Signature:",u),{r:h.r,s:h.s,v:h.v}}actionHash(e,n,r,i){let s=HIe.encode(e);const o=ln.alloc(8);if(o.writeBigUInt64BE(BigInt(r),0),s=ln.concat([s,o]),n===null)s=ln.concat([s,ln.from([0])]);else{s=ln.concat([s,ln.from([1])]);const a=ln.from(n.replace("0x",""),"hex");s=ln.concat([s,a])}if(i!==void 0){s=ln.concat([s,ln.from([0])]);const a=ln.alloc(8);a.writeBigUInt64BE(BigInt(i),0),s=ln.concat([s,a])}return Kn(s)}constructPhantomAgent(e,n){return{source:n?"a":"b",connectionId:e}}floatToWire(e){return e===0?"0":e.toFixed(8).replace(/\.?0+$/,"")}async postAction(e,n,r){var l,c;const i=await this.signL1Action(n,e,null,r),s={action:e,nonce:r,signature:i,vaultAddress:null};console.log("[Hyperliquid]  Sending action:",JSON.stringify({action:e,nonce:r},null,2)),console.log("[Hyperliquid]  Payload:",JSON.stringify(s,null,2));const o=await fetch(qIe,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!o.ok){let u=`HTTP ${o.status}: ${o.statusText}`;try{const h=await o.text();console.error("[Hyperliquid] Error response:",h);try{const m=JSON.parse(h);u=`Exchange API Error (${o.status}): ${JSON.stringify(m)}`}catch{u=`Exchange API Error (${o.status}): ${h}`}}catch(h){console.error("[Hyperliquid] Failed to read error response:",h)}throw new Error(u)}const a=await o.json();if(console.log("[Hyperliquid]  Raw Response:",JSON.stringify(a,null,2)),a.status!=="ok")throw new Error(`Exchange API Error: ${JSON.stringify(a.response||a)}`);if((c=(l=a.response)==null?void 0:l.data)!=null&&c.statuses){const h=a.response.data.statuses.find(m=>m.error);if(h)throw new Error(`Order Failed: ${h.error}`)}return a}async placeOrder(e,n,r,i,s,o){const a=Date.now(),l=await this.getAssetIndex(n),c=(o==null?void 0:o.orderType)||"limit",u=(o==null?void 0:o.reduceOnly)||!1;let h;c==="market"?h={market:{}}:h={limit:{tif:(o==null?void 0:o.tif)||(c==="ioc"?"Ioc":c==="alo"?"Alo":"Gtc")}};let m="0";if(s){const b=await this.getAssetDecimals(n),w=Math.max(0,6-b);let k=parseFloat(s.toFixed(w));k=parseFloat(k.toPrecision(5)),k=parseFloat(k.toFixed(w)),m=this.floatToWire(k),console.log(`[Hyperliquid] Price rounding: ${s} -> ${m} (maxDecimals=${w}, szDecimals=${b})`)}const g={a:l,b:r,p:m,s:this.floatToWire(i),r:u,t:h};o!=null&&o.cloid&&(g.c=o.cloid);const y={type:"order",orders:[g],grouping:"na"},v=await this.postAction(y,e,a);return(o!=null&&o.stopLoss||o!=null&&o.takeProfit)&&await this.placeTpSlOrders(e,n,r,i,o.stopLoss,o.takeProfit,o.cloid),v}async placeTpSlOrders(e,n,r,i,s,o,a){const l=await this.getAssetIndex(n),u=6-await this.getAssetDecimals(n),h=y=>{let v=parseFloat(y.toFixed(u));return v=parseFloat(v.toPrecision(5)),v=parseFloat(v.toFixed(u)),this.floatToWire(v)},m=()=>{const y=new Uint8Array(16);return crypto.getRandomValues(y),"0x"+Array.from(y,v=>v.toString(16).padStart(2,"0")).join("")},g=[];if(s){const y=h(s),v=m();console.log(`[HL TP/SL] SL Price: ${s} -> Rounded: ${y}, cloid: ${v}`),g.push({a:l,b:!r,p:y,s:this.floatToWire(i),r:!0,t:{trigger:{isMarket:!0,triggerPx:y,tpsl:"sl"}},c:v})}if(o){const y=h(o),v=m();console.log(`[HL TP/SL] TP Price: ${o} -> Rounded: ${y}, cloid: ${v}`),g.push({a:l,b:!r,p:y,s:this.floatToWire(i),r:!0,t:{trigger:{isMarket:!0,triggerPx:y,tpsl:"tp"}},c:v})}if(g.length>0){const y=Date.now(),v={type:"order",orders:g,grouping:"positionTpsl"};await this.postAction(v,e,y)}}async cancelOrder(e,n,r){const i=Date.now(),s={type:"cancel",cancels:[{a:await this.getAssetIndex(n),o:r}]};return await this.postAction(s,e,i)}async updateLeverage(e,n,r,i){const s=Date.now(),o={type:"updateLeverage",asset:await this.getAssetIndex(n),isCross:i,leverage:r};return await this.postAction(o,e,s)}async updateIsolatedMargin(e,n,r,i){const s=Date.now(),o=Math.floor(i*1e6),a={type:"updateIsolatedMargin",asset:await this.getAssetIndex(n),isBuy:r,ntli:o};return console.log(`[Hyperliquid] Updating Isolated Margin: ${i} USDC -> ntli: ${o} for ${n} (isBuy: ${r})`),await this.postAction(a,e,s)}async closePosition(e,n,r,i="market",s){const a=(await this.getUserState(e.address)).assetPositions.find(g=>g.position.coin===n);if(!a||parseFloat(a.position.szi)===0)throw new Error(`No open position for ${n}`);const l=parseFloat(a.position.szi),c=l<0,u=r||Math.abs(l);let h=i,m=s;if(i==="market"){const g=await this.getMarketData(n),y=parseFloat(g.levels[0][0].px),v=parseFloat(g.levels[1][0].px),b=c?v:y,w=.01;let k=c?b*(1+w):b*(1-w);const R=6-await this.getAssetDecimals(n);let D=parseFloat(k.toFixed(R));D=parseFloat(D.toPrecision(5)),m=parseFloat(D.toFixed(R)),h="ioc",console.log(`[HL Close] Market Close -> Base: ${b}, Price: ${m} `)}return await this.placeOrder(e,n,c,u,m,{orderType:h==="market"?"ioc":h,reduceOnly:!0})}async withdrawUSDC(e,n,r){if(r<=1)throw new Error("Withdrawal amount must be greater than $1 to cover the withdrawal fee");const i=Date.now(),s={type:"usdSend",hyperliquidChain:"Testnet",signatureChainId:"0xa4b1",destination:n,amount:this.floatToWire(r),time:i};return await this.postAction(s,e,i)}async getAssetIndex(e){await this.updateUniverseCache();const n=this.universeCache.find(r=>r.name===e);if(!n)throw new Error(`Asset ${e} not found`);return this.universeCache.indexOf(n)}async getAssetDecimals(e){await this.updateUniverseCache();const n=this.universeCache.find(r=>r.name===e);if(!n)throw new Error(`Asset ${e} not found`);return n.szDecimals}async updateUniverseCache(){const e=Date.now();if(this.universeCache.length>0&&e-this.lastCacheUpdate<300*1e3)return;const r=await(await this.throttledFetch(dl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"meta"})},"universeCache",300*1e3)).json();this.universeCache=r.universe,this.lastCacheUpdate=e}async getAssetContexts(){try{const e=await this.throttledFetch(dl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"metaAndAssetCtxs"})},"assetContexts",this.ASSET_CONTEXT_CACHE_TTL_MS,"metaAndAssetCtxs");if(!e.ok)throw new Error(`Failed to fetch asset contexts: ${e.statusText}`);const n=await e.json();return Array.isArray(n)&&n.length>1?n[1]:[]}catch(e){return console.error("Hyperliquid Asset Contexts Error:",e),[]}}async getFundingRate(e){try{const n=await this.getAssetContexts();await this.updateUniverseCache();const r=this.universeCache.findIndex(s=>s.name===e);if(r===-1)return null;const i=n[r];return i?{funding:parseFloat(i.funding||"0"),premium:parseFloat(i.premium||"0"),nextFunding:parseFloat(i.funding||"0")}:null}catch(n){return console.error(`Hyperliquid Funding Rate Error for ${e}:`,n),null}}async getUserFees(e){try{const n=await fetch(dl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"userFees",user:e})});if(!n.ok)throw new Error(`Failed to fetch user fees: ${n.statusText}`);const r=await n.json();return{makerFee:parseFloat((r==null?void 0:r.userCrossRate)||(r==null?void 0:r.userAddRate)||"0.0002"),takerFee:parseFloat((r==null?void 0:r.userCrossRate)||(r==null?void 0:r.userRemoveRate)||"0.0005"),dailyVolume:parseFloat((r==null?void 0:r.dailyUserVlm)||"0"),feeSchedule:(r==null?void 0:r.feeSchedule)||null}}catch(n){return console.error("Hyperliquid User Fees Error:",n),{makerFee:2e-4,takerFee:5e-4,dailyVolume:0,feeSchedule:null}}}async getUserFundingHistory(e,n,r){try{const i=Date.now(),s={type:"userFunding",user:e,startTime:n||i-1440*60*1e3};r&&(s.endTime=r);const o=await fetch(dl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!o.ok)throw new Error(`Failed to fetch funding history: ${o.statusText}`);return await o.json()}catch(i){return console.error("Hyperliquid Funding History Error:",i),[]}}calculateBreakevenPrice(e,n,r,i=2e-4,s=5e-4,o=0,a=8){const l=s,c=s,u=a/8,h=Math.abs(o)*u,m=l+c+h,g=e*m,y=r?e+g:e-g,v=.01,b=r?y*(1+v):y*(1-v);return{breakevenPrice:y,minProfitPrice:b,totalCostPercent:m,costBreakdown:{entryFeePercent:l,exitFeePercent:c,fundingCostPercent:h}}}async getUserStateShared(e){const n=`shared:userState:${e}`,r=this.sharedDataCache.get(n);if(r&&Date.now()-r.timestamp<this.SHARED_CACHE_TTL_MS)return console.log("[Hyperliquid]  Using shared cache for userState"),r.data;const i=await this.getUserState(e);return this.sharedDataCache.set(n,{data:i,timestamp:Date.now()}),i}async getUserFillsShared(e,n=20){const r=`shared:userFills:${e}`,i=this.sharedDataCache.get(r);if(i&&Date.now()-i.timestamp<this.SHARED_CACHE_TTL_MS)return console.log("[Hyperliquid]  Using shared cache for userFills"),i.data;const s=await this.getUserFills(e,n);return this.sharedDataCache.set(r,{data:s,timestamp:Date.now()}),s}clearSharedCache(){this.sharedDataCache.clear(),console.log("[Hyperliquid]  Shared cache cleared")}}const Vt=new KIe;function pn(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function wq(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Qx(...t){return e=>{let n=!1;const r=t.map(i=>{const s=wq(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():wq(t[i],null)}}}}function Pr(...t){return A.useCallback(Qx(...t),t)}function WIe(t,e){const n=A.createContext(e),r=s=>{const{children:o,...a}=s,l=A.useMemo(()=>a,Object.values(a));return d.jsx(n.Provider,{value:l,children:o})};r.displayName=t+"Provider";function i(s){const o=A.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${t}\``)}return[r,i]}function Hm(t,e=[]){let n=[];function r(s,o){const a=A.createContext(o),l=n.length;n=[...n,o];const c=h=>{var w;const{scope:m,children:g,...y}=h,v=((w=m==null?void 0:m[t])==null?void 0:w[l])||a,b=A.useMemo(()=>y,Object.values(y));return d.jsx(v.Provider,{value:b,children:g})};c.displayName=s+"Provider";function u(h,m){var v;const g=((v=m==null?void 0:m[t])==null?void 0:v[l])||a,y=A.useContext(g);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${s}\``)}return[c,u]}const i=()=>{const s=n.map(o=>A.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return A.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[r,YIe(i,...e)]}function YIe(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const h=l(s)[`__scope${c}`];return{...a,...h}},{});return A.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var qm=Hee();const JIe=gs(qm);function XIe(t){const e=QIe(t),n=A.forwardRef((r,i)=>{const{children:s,...o}=r,a=A.Children.toArray(s),l=a.find(eRe);if(l){const c=l.props.children,u=a.map(h=>h===l?A.Children.count(c)>1?A.Children.only(null):A.isValidElement(c)?c.props.children:null:h);return d.jsx(e,{...o,ref:i,children:A.isValidElement(c)?A.cloneElement(c,void 0,u):null})}return d.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}function QIe(t){const e=A.forwardRef((n,r)=>{const{children:i,...s}=n;if(A.isValidElement(i)){const o=nRe(i),a=tRe(s,i.props);return i.type!==A.Fragment&&(a.ref=r?Qx(r,o):o),A.cloneElement(i,a)}return A.Children.count(i)>1?A.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var ZIe=Symbol("radix.slottable");function eRe(t){return A.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===ZIe}function tRe(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const l=s(...a);return i(...a),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function nRe(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var rRe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Mn=rRe.reduce((t,e)=>{const n=XIe(`Primitive.${e}`),r=A.forwardRef((i,s)=>{const{asChild:o,...a}=i,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),d.jsx(l,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function iRe(t,e){t&&qm.flushSync(()=>t.dispatchEvent(e))}function hh(t){const e=A.useRef(t);return A.useEffect(()=>{e.current=t}),A.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function sRe(t,e=globalThis==null?void 0:globalThis.document){const n=hh(t);A.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var oRe="DismissableLayer",NM="dismissableLayer.update",aRe="dismissableLayer.pointerDownOutside",lRe="dismissableLayer.focusOutside",Eq,Jse=A.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),jN=A.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=t,c=A.useContext(Jse),[u,h]=A.useState(null),m=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=A.useState({}),y=Pr(e,B=>h(B)),v=Array.from(c.layers),[b]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),w=v.indexOf(b),k=u?v.indexOf(u):-1,N=c.layersWithOutsidePointerEventsDisabled.size>0,R=k>=w,D=dRe(B=>{const z=B.target,U=[...c.branches].some($=>$.contains(z));!R||U||(i==null||i(B),o==null||o(B),B.defaultPrevented||a==null||a())},m),O=fRe(B=>{const z=B.target;[...c.branches].some($=>$.contains(z))||(s==null||s(B),o==null||o(B),B.defaultPrevented||a==null||a())},m);return sRe(B=>{k===c.layers.size-1&&(r==null||r(B),!B.defaultPrevented&&a&&(B.preventDefault(),a()))},m),A.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(Eq=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),Sq(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=Eq)}},[u,m,n,c]),A.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),Sq())},[u,c]),A.useEffect(()=>{const B=()=>g({});return document.addEventListener(NM,B),()=>document.removeEventListener(NM,B)},[]),d.jsx(Mn.div,{...l,ref:y,style:{pointerEvents:N?R?"auto":"none":void 0,...t.style},onFocusCapture:pn(t.onFocusCapture,O.onFocusCapture),onBlurCapture:pn(t.onBlurCapture,O.onBlurCapture),onPointerDownCapture:pn(t.onPointerDownCapture,D.onPointerDownCapture)})});jN.displayName=oRe;var cRe="DismissableLayerBranch",uRe=A.forwardRef((t,e)=>{const n=A.useContext(Jse),r=A.useRef(null),i=Pr(e,r);return A.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),d.jsx(Mn.div,{...t,ref:i})});uRe.displayName=cRe;function dRe(t,e=globalThis==null?void 0:globalThis.document){const n=hh(t),r=A.useRef(!1),i=A.useRef(()=>{});return A.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){Xse(aRe,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function fRe(t,e=globalThis==null?void 0:globalThis.document){const n=hh(t),r=A.useRef(!1);return A.useEffect(()=>{const i=s=>{s.target&&!r.current&&Xse(lRe,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Sq(){const t=new CustomEvent(NM);document.dispatchEvent(t)}function Xse(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?iRe(i,s):i.dispatchEvent(s)}var Fs=globalThis!=null&&globalThis.document?A.useLayoutEffect:()=>{},hRe=cN[" useId ".trim().toString()]||(()=>{}),pRe=0;function rh(t){const[e,n]=A.useState(hRe());return Fs(()=>{n(r=>r??String(pRe++))},[t]),e?`radix-${e}`:""}const mRe=["top","right","bottom","left"],ph=Math.min,Qo=Math.max,wk=Math.round,yA=Math.floor,Dc=t=>({x:t,y:t}),gRe={left:"right",right:"left",bottom:"top",top:"bottom"},yRe={start:"end",end:"start"};function CM(t,e,n){return Qo(t,ph(e,n))}function md(t,e){return typeof t=="function"?t(e):t}function gd(t){return t.split("-")[0]}function Zx(t){return t.split("-")[1]}function lj(t){return t==="x"?"y":"x"}function cj(t){return t==="y"?"height":"width"}const xRe=new Set(["top","bottom"]);function Pc(t){return xRe.has(gd(t))?"y":"x"}function uj(t){return lj(Pc(t))}function vRe(t,e,n){n===void 0&&(n=!1);const r=Zx(t),i=uj(t),s=cj(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=Ek(o)),[o,Ek(o)]}function bRe(t){const e=Ek(t);return[PM(t),e,PM(e)]}function PM(t){return t.replace(/start|end/g,e=>yRe[e])}const Aq=["left","right"],Tq=["right","left"],wRe=["top","bottom"],ERe=["bottom","top"];function SRe(t,e,n){switch(t){case"top":case"bottom":return n?e?Tq:Aq:e?Aq:Tq;case"left":case"right":return e?wRe:ERe;default:return[]}}function ARe(t,e,n,r){const i=Zx(t);let s=SRe(gd(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(PM)))),s}function Ek(t){return t.replace(/left|right|bottom|top/g,e=>gRe[e])}function TRe(t){return{top:0,right:0,bottom:0,left:0,...t}}function Qse(t){return typeof t!="number"?TRe(t):{top:t,right:t,bottom:t,left:t}}function Sk(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function kq(t,e,n){let{reference:r,floating:i}=t;const s=Pc(e),o=uj(e),a=cj(o),l=gd(e),c=s==="y",u=r.x+r.width/2-i.width/2,h=r.y+r.height/2-i.height/2,m=r[a]/2-i[a]/2;let g;switch(l){case"top":g={x:u,y:r.y-i.height};break;case"bottom":g={x:u,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:h};break;case"left":g={x:r.x-i.width,y:h};break;default:g={x:r.x,y:r.y}}switch(Zx(e)){case"start":g[o]-=m*(n&&c?-1:1);break;case"end":g[o]+=m*(n&&c?-1:1);break}return g}const kRe=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:h}=kq(c,r,l),m=r,g={},y=0;for(let v=0;v<a.length;v++){const{name:b,fn:w}=a[v],{x:k,y:N,data:R,reset:D}=await w({x:u,y:h,initialPlacement:r,placement:m,strategy:i,middlewareData:g,rects:c,platform:o,elements:{reference:t,floating:e}});u=k??u,h=N??h,g={...g,[b]:{...g[b],...R}},D&&y<=50&&(y++,typeof D=="object"&&(D.placement&&(m=D.placement),D.rects&&(c=D.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):D.rects),{x:u,y:h}=kq(c,m,l)),v=-1)}return{x:u,y:h,placement:m,strategy:i,middlewareData:g}};async function Gw(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:m=!1,padding:g=0}=md(e,t),y=Qse(g),b=a[m?h==="floating"?"reference":"floating":h],w=Sk(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(b)))==null||n?b:b.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),k=h==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,N=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),R=await(s.isElement==null?void 0:s.isElement(N))?await(s.getScale==null?void 0:s.getScale(N))||{x:1,y:1}:{x:1,y:1},D=Sk(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:k,offsetParent:N,strategy:l}):k);return{top:(w.top-D.top+y.top)/R.y,bottom:(D.bottom-w.bottom+y.bottom)/R.y,left:(w.left-D.left+y.left)/R.x,right:(D.right-w.right+y.right)/R.x}}const NRe=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=md(t,e)||{};if(c==null)return{};const h=Qse(u),m={x:n,y:r},g=uj(i),y=cj(g),v=await o.getDimensions(c),b=g==="y",w=b?"top":"left",k=b?"bottom":"right",N=b?"clientHeight":"clientWidth",R=s.reference[y]+s.reference[g]-m[g]-s.floating[y],D=m[g]-s.reference[g],O=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let B=O?O[N]:0;(!B||!await(o.isElement==null?void 0:o.isElement(O)))&&(B=a.floating[N]||s.floating[y]);const z=R/2-D/2,U=B/2-v[y]/2-1,$=ph(h[w],U),W=ph(h[k],U),H=$,F=B-v[y]-W,T=B/2-v[y]/2+z,_=CM(H,T,F),L=!l.arrow&&Zx(i)!=null&&T!==_&&s.reference[y]/2-(T<H?$:W)-v[y]/2<0,V=L?T<H?T-H:T-F:0;return{[g]:m[g]+V,data:{[g]:_,centerOffset:T-_-V,...L&&{alignmentOffset:V}},reset:L}}}),CRe=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:v=!0,...b}=md(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const w=gd(i),k=Pc(a),N=gd(a)===a,R=await(l.isRTL==null?void 0:l.isRTL(c.floating)),D=m||(N||!v?[Ek(a)]:bRe(a)),O=y!=="none";!m&&O&&D.push(...ARe(a,v,y,R));const B=[a,...D],z=await Gw(e,b),U=[];let $=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&U.push(z[w]),h){const T=vRe(i,o,R);U.push(z[T[0]],z[T[1]])}if($=[...$,{placement:i,overflows:U}],!U.every(T=>T<=0)){var W,H;const T=(((W=s.flip)==null?void 0:W.index)||0)+1,_=B[T];if(_&&(!(h==="alignment"?k!==Pc(_):!1)||$.every(K=>Pc(K.placement)===k?K.overflows[0]>0:!0)))return{data:{index:T,overflows:$},reset:{placement:_}};let L=(H=$.filter(V=>V.overflows[0]<=0).sort((V,K)=>V.overflows[1]-K.overflows[1])[0])==null?void 0:H.placement;if(!L)switch(g){case"bestFit":{var F;const V=(F=$.filter(K=>{if(O){const te=Pc(K.placement);return te===k||te==="y"}return!0}).map(K=>[K.placement,K.overflows.filter(te=>te>0).reduce((te,G)=>te+G,0)]).sort((K,te)=>K[1]-te[1])[0])==null?void 0:F[0];V&&(L=V);break}case"initialPlacement":L=a;break}if(i!==L)return{reset:{placement:L}}}return{}}}};function Nq(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Cq(t){return mRe.some(e=>t[e]>=0)}const PRe=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=md(t,e);switch(r){case"referenceHidden":{const s=await Gw(e,{...i,elementContext:"reference"}),o=Nq(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:Cq(o)}}}case"escaped":{const s=await Gw(e,{...i,altBoundary:!0}),o=Nq(s,n.floating);return{data:{escapedOffsets:o,escaped:Cq(o)}}}default:return{}}}}},Zse=new Set(["left","top"]);async function _Re(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=gd(n),a=Zx(n),l=Pc(n)==="y",c=Zse.has(o)?-1:1,u=s&&l?-1:1,h=md(e,t);let{mainAxis:m,crossAxis:g,alignmentAxis:y}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof y=="number"&&(g=a==="end"?y*-1:y),l?{x:g*u,y:m*c}:{x:m*c,y:g*u}}const IRe=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await _Re(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},RRe=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:b=>{let{x:w,y:k}=b;return{x:w,y:k}}},...l}=md(t,e),c={x:n,y:r},u=await Gw(e,l),h=Pc(gd(i)),m=lj(h);let g=c[m],y=c[h];if(s){const b=m==="y"?"top":"left",w=m==="y"?"bottom":"right",k=g+u[b],N=g-u[w];g=CM(k,g,N)}if(o){const b=h==="y"?"top":"left",w=h==="y"?"bottom":"right",k=y+u[b],N=y-u[w];y=CM(k,y,N)}const v=a.fn({...e,[m]:g,[h]:y});return{...v,data:{x:v.x-n,y:v.y-r,enabled:{[m]:s,[h]:o}}}}}},ORe=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=md(t,e),u={x:n,y:r},h=Pc(i),m=lj(h);let g=u[m],y=u[h];const v=md(a,e),b=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(l){const N=m==="y"?"height":"width",R=s.reference[m]-s.floating[N]+b.mainAxis,D=s.reference[m]+s.reference[N]-b.mainAxis;g<R?g=R:g>D&&(g=D)}if(c){var w,k;const N=m==="y"?"width":"height",R=Zse.has(gd(i)),D=s.reference[h]-s.floating[N]+(R&&((w=o.offset)==null?void 0:w[h])||0)+(R?0:b.crossAxis),O=s.reference[h]+s.reference[N]+(R?0:((k=o.offset)==null?void 0:k[h])||0)-(R?b.crossAxis:0);y<D?y=D:y>O&&(y=O)}return{[m]:g,[h]:y}}}},MRe=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...c}=md(t,e),u=await Gw(e,c),h=gd(i),m=Zx(i),g=Pc(i)==="y",{width:y,height:v}=s.floating;let b,w;h==="top"||h==="bottom"?(b=h,w=m===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(w=h,b=m==="end"?"top":"bottom");const k=v-u.top-u.bottom,N=y-u.left-u.right,R=ph(v-u[b],k),D=ph(y-u[w],N),O=!e.middlewareData.shift;let B=R,z=D;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(z=N),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(B=k),O&&!m){const $=Qo(u.left,0),W=Qo(u.right,0),H=Qo(u.top,0),F=Qo(u.bottom,0);g?z=y-2*($!==0||W!==0?$+W:Qo(u.left,u.right)):B=v-2*(H!==0||F!==0?H+F:Qo(u.top,u.bottom))}await l({...e,availableWidth:z,availableHeight:B});const U=await o.getDimensions(a.floating);return y!==U.width||v!==U.height?{reset:{rects:!0}}:{}}}};function BN(){return typeof window<"u"}function ev(t){return eoe(t)?(t.nodeName||"").toLowerCase():"#document"}function ra(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Gc(t){var e;return(e=(eoe(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function eoe(t){return BN()?t instanceof Node||t instanceof ra(t).Node:!1}function Vl(t){return BN()?t instanceof Element||t instanceof ra(t).Element:!1}function Uc(t){return BN()?t instanceof HTMLElement||t instanceof ra(t).HTMLElement:!1}function Pq(t){return!BN()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ra(t).ShadowRoot}const LRe=new Set(["inline","contents"]);function Q1(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=Hl(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!LRe.has(i)}const DRe=new Set(["table","td","th"]);function jRe(t){return DRe.has(ev(t))}const BRe=[":popover-open",":modal"];function UN(t){return BRe.some(e=>{try{return t.matches(e)}catch{return!1}})}const URe=["transform","translate","scale","rotate","perspective"],FRe=["transform","translate","scale","rotate","perspective","filter"],$Re=["paint","layout","strict","content"];function dj(t){const e=fj(),n=Vl(t)?Hl(t):t;return URe.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||FRe.some(r=>(n.willChange||"").includes(r))||$Re.some(r=>(n.contain||"").includes(r))}function zRe(t){let e=mh(t);for(;Uc(e)&&!Tx(e);){if(dj(e))return e;if(UN(e))return null;e=mh(e)}return null}function fj(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const VRe=new Set(["html","body","#document"]);function Tx(t){return VRe.has(ev(t))}function Hl(t){return ra(t).getComputedStyle(t)}function FN(t){return Vl(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function mh(t){if(ev(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Pq(t)&&t.host||Gc(t);return Pq(e)?e.host:e}function toe(t){const e=mh(t);return Tx(e)?t.ownerDocument?t.ownerDocument.body:t.body:Uc(e)&&Q1(e)?e:toe(e)}function Kw(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=toe(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=ra(i);if(s){const a=_M(o);return e.concat(o,o.visualViewport||[],Q1(i)?i:[],a&&n?Kw(a):[])}return e.concat(i,Kw(i,[],n))}function _M(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function noe(t){const e=Hl(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Uc(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=wk(n)!==s||wk(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function hj(t){return Vl(t)?t:t.contextElement}function oy(t){const e=hj(t);if(!Uc(e))return Dc(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=noe(e);let o=(s?wk(n.width):n.width)/r,a=(s?wk(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const HRe=Dc(0);function roe(t){const e=ra(t);return!fj()||!e.visualViewport?HRe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function qRe(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==ra(t)?!1:e}function Tm(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=hj(t);let o=Dc(1);e&&(r?Vl(r)&&(o=oy(r)):o=oy(t));const a=qRe(s,n,r)?roe(s):Dc(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,u=i.width/o.x,h=i.height/o.y;if(s){const m=ra(s),g=r&&Vl(r)?ra(r):r;let y=m,v=_M(y);for(;v&&r&&g!==y;){const b=oy(v),w=v.getBoundingClientRect(),k=Hl(v),N=w.left+(v.clientLeft+parseFloat(k.paddingLeft))*b.x,R=w.top+(v.clientTop+parseFloat(k.paddingTop))*b.y;l*=b.x,c*=b.y,u*=b.x,h*=b.y,l+=N,c+=R,y=ra(v),v=_M(y)}}return Sk({width:u,height:h,x:l,y:c})}function $N(t,e){const n=FN(t).scrollLeft;return e?e.left+n:Tm(Gc(t)).left+n}function ioe(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-$N(t,n),i=n.top+e.scrollTop;return{x:r,y:i}}function GRe(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",o=Gc(r),a=e?UN(e.floating):!1;if(r===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=Dc(1);const u=Dc(0),h=Uc(r);if((h||!h&&!s)&&((ev(r)!=="body"||Q1(o))&&(l=FN(r)),Uc(r))){const g=Tm(r);c=oy(r),u.x=g.x+r.clientLeft,u.y=g.y+r.clientTop}const m=o&&!h&&!s?ioe(o,l):Dc(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+m.x,y:n.y*c.y-l.scrollTop*c.y+u.y+m.y}}function KRe(t){return Array.from(t.getClientRects())}function WRe(t){const e=Gc(t),n=FN(t),r=t.ownerDocument.body,i=Qo(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=Qo(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+$N(t);const a=-n.scrollTop;return Hl(r).direction==="rtl"&&(o+=Qo(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}const _q=25;function YRe(t,e){const n=ra(t),r=Gc(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const u=fj();(!u||u&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}const c=$N(r);if(c<=0){const u=r.ownerDocument,h=u.body,m=getComputedStyle(h),g=u.compatMode==="CSS1Compat"&&parseFloat(m.marginLeft)+parseFloat(m.marginRight)||0,y=Math.abs(r.clientWidth-h.clientWidth-g);y<=_q&&(s-=y)}else c<=_q&&(s+=c);return{width:s,height:o,x:a,y:l}}const JRe=new Set(["absolute","fixed"]);function XRe(t,e){const n=Tm(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=Uc(t)?oy(t):Dc(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=i*s.x,c=r*s.y;return{width:o,height:a,x:l,y:c}}function Iq(t,e,n){let r;if(e==="viewport")r=YRe(t,n);else if(e==="document")r=WRe(Gc(t));else if(Vl(e))r=XRe(e,n);else{const i=roe(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Sk(r)}function soe(t,e){const n=mh(t);return n===e||!Vl(n)||Tx(n)?!1:Hl(n).position==="fixed"||soe(n,e)}function QRe(t,e){const n=e.get(t);if(n)return n;let r=Kw(t,[],!1).filter(a=>Vl(a)&&ev(a)!=="body"),i=null;const s=Hl(t).position==="fixed";let o=s?mh(t):t;for(;Vl(o)&&!Tx(o);){const a=Hl(o),l=dj(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&JRe.has(i.position)||Q1(o)&&!l&&soe(t,o))?r=r.filter(u=>u!==o):i=a,o=mh(o)}return e.set(t,r),r}function ZRe(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?UN(e)?[]:QRe(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,u)=>{const h=Iq(e,u,i);return c.top=Qo(h.top,c.top),c.right=ph(h.right,c.right),c.bottom=ph(h.bottom,c.bottom),c.left=Qo(h.left,c.left),c},Iq(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function e5e(t){const{width:e,height:n}=noe(t);return{width:e,height:n}}function t5e(t,e,n){const r=Uc(e),i=Gc(e),s=n==="fixed",o=Tm(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=Dc(0);function c(){l.x=$N(i)}if(r||!r&&!s)if((ev(e)!=="body"||Q1(i))&&(a=FN(e)),r){const g=Tm(e,!0,s,e);l.x=g.x+e.clientLeft,l.y=g.y+e.clientTop}else i&&c();s&&!r&&i&&c();const u=i&&!r&&!s?ioe(i,a):Dc(0),h=o.left+a.scrollLeft-l.x-u.x,m=o.top+a.scrollTop-l.y-u.y;return{x:h,y:m,width:o.width,height:o.height}}function s5(t){return Hl(t).position==="static"}function Rq(t,e){if(!Uc(t)||Hl(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Gc(t)===n&&(n=n.ownerDocument.body),n}function ooe(t,e){const n=ra(t);if(UN(t))return n;if(!Uc(t)){let i=mh(t);for(;i&&!Tx(i);){if(Vl(i)&&!s5(i))return i;i=mh(i)}return n}let r=Rq(t,e);for(;r&&jRe(r)&&s5(r);)r=Rq(r,e);return r&&Tx(r)&&s5(r)&&!dj(r)?n:r||zRe(t)||n}const n5e=async function(t){const e=this.getOffsetParent||ooe,n=this.getDimensions,r=await n(t.floating);return{reference:t5e(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function r5e(t){return Hl(t).direction==="rtl"}const i5e={convertOffsetParentRelativeRectToViewportRelativeRect:GRe,getDocumentElement:Gc,getClippingRect:ZRe,getOffsetParent:ooe,getElementRects:n5e,getClientRects:KRe,getDimensions:e5e,getScale:oy,isElement:Vl,isRTL:r5e};function aoe(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function s5e(t,e){let n=null,r;const i=Gc(t);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=t.getBoundingClientRect(),{left:u,top:h,width:m,height:g}=c;if(a||e(),!m||!g)return;const y=yA(h),v=yA(i.clientWidth-(u+m)),b=yA(i.clientHeight-(h+g)),w=yA(u),N={rootMargin:-y+"px "+-v+"px "+-b+"px "+-w+"px",threshold:Qo(0,ph(1,l))||1};let R=!0;function D(O){const B=O[0].intersectionRatio;if(B!==l){if(!R)return o();B?o(!1,B):r=setTimeout(()=>{o(!1,1e-7)},1e3)}B===1&&!aoe(c,t.getBoundingClientRect())&&o(),R=!1}try{n=new IntersectionObserver(D,{...N,root:i.ownerDocument})}catch{n=new IntersectionObserver(D,N)}n.observe(t)}return o(!0),s}function o5e(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=hj(t),u=i||s?[...c?Kw(c):[],...Kw(e)]:[];u.forEach(w=>{i&&w.addEventListener("scroll",n,{passive:!0}),s&&w.addEventListener("resize",n)});const h=c&&a?s5e(c,n):null;let m=-1,g=null;o&&(g=new ResizeObserver(w=>{let[k]=w;k&&k.target===c&&g&&(g.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var N;(N=g)==null||N.observe(e)})),n()}),c&&!l&&g.observe(c),g.observe(e));let y,v=l?Tm(t):null;l&&b();function b(){const w=Tm(t);v&&!aoe(v,w)&&n(),v=w,y=requestAnimationFrame(b)}return n(),()=>{var w;u.forEach(k=>{i&&k.removeEventListener("scroll",n),s&&k.removeEventListener("resize",n)}),h==null||h(),(w=g)==null||w.disconnect(),g=null,l&&cancelAnimationFrame(y)}}const a5e=IRe,l5e=RRe,c5e=CRe,u5e=MRe,d5e=PRe,Oq=NRe,f5e=ORe,h5e=(t,e,n)=>{const r=new Map,i={platform:i5e,...n},s={...i.platform,_c:r};return kRe(t,e,{...i,platform:s})};var p5e=typeof document<"u",m5e=function(){},_T=p5e?A.useLayoutEffect:m5e;function Ak(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Ak(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!Ak(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function loe(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Mq(t,e){const n=loe(t);return Math.round(e*n)/n}function o5(t){const e=A.useRef(t);return _T(()=>{e.current=t}),e}function g5e(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,h]=A.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[m,g]=A.useState(r);Ak(m,r)||g(r);const[y,v]=A.useState(null),[b,w]=A.useState(null),k=A.useCallback(K=>{K!==O.current&&(O.current=K,v(K))},[]),N=A.useCallback(K=>{K!==B.current&&(B.current=K,w(K))},[]),R=s||y,D=o||b,O=A.useRef(null),B=A.useRef(null),z=A.useRef(u),U=l!=null,$=o5(l),W=o5(i),H=o5(c),F=A.useCallback(()=>{if(!O.current||!B.current)return;const K={placement:e,strategy:n,middleware:m};W.current&&(K.platform=W.current),h5e(O.current,B.current,K).then(te=>{const G={...te,isPositioned:H.current!==!1};T.current&&!Ak(z.current,G)&&(z.current=G,qm.flushSync(()=>{h(G)}))})},[m,e,n,W,H]);_T(()=>{c===!1&&z.current.isPositioned&&(z.current.isPositioned=!1,h(K=>({...K,isPositioned:!1})))},[c]);const T=A.useRef(!1);_T(()=>(T.current=!0,()=>{T.current=!1}),[]),_T(()=>{if(R&&(O.current=R),D&&(B.current=D),R&&D){if($.current)return $.current(R,D,F);F()}},[R,D,F,$,U]);const _=A.useMemo(()=>({reference:O,floating:B,setReference:k,setFloating:N}),[k,N]),L=A.useMemo(()=>({reference:R,floating:D}),[R,D]),V=A.useMemo(()=>{const K={position:n,left:0,top:0};if(!L.floating)return K;const te=Mq(L.floating,u.x),G=Mq(L.floating,u.y);return a?{...K,transform:"translate("+te+"px, "+G+"px)",...loe(L.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:te,top:G}},[n,a,L.floating,u.x,u.y]);return A.useMemo(()=>({...u,update:F,refs:_,elements:L,floatingStyles:V}),[u,F,_,L,V])}const y5e=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?Oq({element:r.current,padding:i}).fn(n):{}:r?Oq({element:r,padding:i}).fn(n):{}}}},x5e=(t,e)=>({...a5e(t),options:[t,e]}),v5e=(t,e)=>({...l5e(t),options:[t,e]}),b5e=(t,e)=>({...f5e(t),options:[t,e]}),w5e=(t,e)=>({...c5e(t),options:[t,e]}),E5e=(t,e)=>({...u5e(t),options:[t,e]}),S5e=(t,e)=>({...d5e(t),options:[t,e]}),A5e=(t,e)=>({...y5e(t),options:[t,e]});var T5e="Arrow",coe=A.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...s}=t;return d.jsx(Mn.svg,{...s,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:d.jsx("polygon",{points:"0,0 30,0 15,10"})})});coe.displayName=T5e;var k5e=coe;function N5e(t){const[e,n]=A.useState(void 0);return Fs(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var pj="Popper",[uoe,zN]=Hm(pj),[C5e,doe]=uoe(pj),foe=t=>{const{__scopePopper:e,children:n}=t,[r,i]=A.useState(null);return d.jsx(C5e,{scope:e,anchor:r,onAnchorChange:i,children:n})};foe.displayName=pj;var hoe="PopperAnchor",poe=A.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,s=doe(hoe,n),o=A.useRef(null),a=Pr(e,o),l=A.useRef(null);return A.useEffect(()=>{const c=l.current;l.current=(r==null?void 0:r.current)||o.current,c!==l.current&&s.onAnchorChange(l.current)}),r?null:d.jsx(Mn.div,{...i,ref:a})});poe.displayName=hoe;var mj="PopperContent",[P5e,_5e]=uoe(mj),moe=A.forwardRef((t,e)=>{var oe,me,ce,ve,Ne,pe;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:h="partial",hideWhenDetached:m=!1,updatePositionStrategy:g="optimized",onPlaced:y,...v}=t,b=doe(mj,n),[w,k]=A.useState(null),N=Pr(e,Le=>k(Le)),[R,D]=A.useState(null),O=N5e(R),B=(O==null?void 0:O.width)??0,z=(O==null?void 0:O.height)??0,U=r+(s!=="center"?"-"+s:""),$=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},W=Array.isArray(c)?c:[c],H=W.length>0,F={padding:$,boundary:W.filter(R5e),altBoundary:H},{refs:T,floatingStyles:_,placement:L,isPositioned:V,middlewareData:K}=g5e({strategy:"fixed",placement:U,whileElementsMounted:(...Le)=>o5e(...Le,{animationFrame:g==="always"}),elements:{reference:b.anchor},middleware:[x5e({mainAxis:i+z,alignmentAxis:o}),l&&v5e({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?b5e():void 0,...F}),l&&w5e({...F}),E5e({...F,apply:({elements:Le,rects:he,availableWidth:Te,availableHeight:Ge})=>{const{width:We,height:Qe}=he.reference,at=Le.floating.style;at.setProperty("--radix-popper-available-width",`${Te}px`),at.setProperty("--radix-popper-available-height",`${Ge}px`),at.setProperty("--radix-popper-anchor-width",`${We}px`),at.setProperty("--radix-popper-anchor-height",`${Qe}px`)}}),R&&A5e({element:R,padding:a}),O5e({arrowWidth:B,arrowHeight:z}),m&&S5e({strategy:"referenceHidden",...F})]}),[te,G]=xoe(L),q=hh(y);Fs(()=>{V&&(q==null||q())},[V,q]);const M=(oe=K.arrow)==null?void 0:oe.x,P=(me=K.arrow)==null?void 0:me.y,Y=((ce=K.arrow)==null?void 0:ce.centerOffset)!==0,[X,se]=A.useState();return Fs(()=>{w&&se(window.getComputedStyle(w).zIndex)},[w]),d.jsx("div",{ref:T.setFloating,"data-radix-popper-content-wrapper":"",style:{..._,transform:V?_.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:X,"--radix-popper-transform-origin":[(ve=K.transformOrigin)==null?void 0:ve.x,(Ne=K.transformOrigin)==null?void 0:Ne.y].join(" "),...((pe=K.hide)==null?void 0:pe.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:d.jsx(P5e,{scope:n,placedSide:te,onArrowChange:D,arrowX:M,arrowY:P,shouldHideArrow:Y,children:d.jsx(Mn.div,{"data-side":te,"data-align":G,...v,ref:N,style:{...v.style,animation:V?void 0:"none"}})})})});moe.displayName=mj;var goe="PopperArrow",I5e={top:"bottom",right:"left",bottom:"top",left:"right"},yoe=A.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,s=_5e(goe,r),o=I5e[s.placedSide];return d.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:d.jsx(k5e,{...i,ref:n,style:{...i.style,display:"block"}})})});yoe.displayName=goe;function R5e(t){return t!==null}var O5e=t=>({name:"transformOrigin",options:t,fn(e){var b,w,k;const{placement:n,rects:r,middlewareData:i}=e,o=((b=i.arrow)==null?void 0:b.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,u]=xoe(n),h={start:"0%",center:"50%",end:"100%"}[u],m=(((w=i.arrow)==null?void 0:w.x)??0)+a/2,g=(((k=i.arrow)==null?void 0:k.y)??0)+l/2;let y="",v="";return c==="bottom"?(y=o?h:`${m}px`,v=`${-l}px`):c==="top"?(y=o?h:`${m}px`,v=`${r.floating.height+l}px`):c==="right"?(y=`${-l}px`,v=o?h:`${g}px`):c==="left"&&(y=`${r.floating.width+l}px`,v=o?h:`${g}px`),{data:{x:y,y:v}}}});function xoe(t){const[e,n="center"]=t.split("-");return[e,n]}var M5e=foe,voe=poe,boe=moe,woe=yoe,L5e="Portal",VN=A.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[i,s]=A.useState(!1);Fs(()=>s(!0),[]);const o=n||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?JIe.createPortal(d.jsx(Mn.div,{...r,ref:e}),o):null});VN.displayName=L5e;function D5e(t,e){return A.useReducer((n,r)=>e[n][r]??n,t)}var Gm=t=>{const{present:e,children:n}=t,r=j5e(e),i=typeof n=="function"?n({present:r.isPresent}):A.Children.only(n),s=Pr(r.ref,B5e(i));return typeof n=="function"||r.isPresent?A.cloneElement(i,{ref:s}):null};Gm.displayName="Presence";function j5e(t){const[e,n]=A.useState(),r=A.useRef(null),i=A.useRef(t),s=A.useRef("none"),o=t?"mounted":"unmounted",[a,l]=D5e(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return A.useEffect(()=>{const c=xA(r.current);s.current=a==="mounted"?c:"none"},[a]),Fs(()=>{const c=r.current,u=i.current;if(u!==t){const m=s.current,g=xA(c);t?l("MOUNT"):g==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&m!==g?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,l]),Fs(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,h=g=>{const v=xA(r.current).includes(CSS.escape(g.animationName));if(g.target===e&&v&&(l("ANIMATION_END"),!i.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},m=g=>{g.target===e&&(s.current=xA(r.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:A.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function xA(t){return(t==null?void 0:t.animationName)||"none"}function B5e(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var U5e=Symbol("radix.slottable");function F5e(t){const e=({children:n})=>d.jsx(d.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=U5e,e}var $5e=cN[" useInsertionEffect ".trim().toString()]||Fs;function Ww({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[i,s,o]=z5e({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:i;{const u=A.useRef(t!==void 0);A.useEffect(()=>{const h=u.current;h!==a&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,r])}const c=A.useCallback(u=>{var h;if(a){const m=V5e(u)?u(t):u;m!==t&&((h=o.current)==null||h.call(o,m))}else s(u)},[a,t,s,o]);return[l,c]}function z5e({defaultProp:t,onChange:e}){const[n,r]=A.useState(t),i=A.useRef(n),s=A.useRef(e);return $5e(()=>{s.current=e},[e]),A.useEffect(()=>{var o;i.current!==n&&((o=s.current)==null||o.call(s,n),i.current=n)},[n,i]),[n,r,s]}function V5e(t){return typeof t=="function"}var Eoe=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),H5e="VisuallyHidden",Soe=A.forwardRef((t,e)=>d.jsx(Mn.span,{...t,ref:e,style:{...Eoe,...t.style}}));Soe.displayName=H5e;var q5e=Soe,[HN]=Hm("Tooltip",[zN]),gj=zN(),Aoe="TooltipProvider",G5e=700,Lq="tooltip.open",[K5e,Toe]=HN(Aoe),koe=t=>{const{__scopeTooltip:e,delayDuration:n=G5e,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:s}=t,o=A.useRef(!0),a=A.useRef(!1),l=A.useRef(0);return A.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),d.jsx(K5e,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:A.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:A.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:A.useCallback(c=>{a.current=c},[]),disableHoverableContent:i,children:s})};koe.displayName=Aoe;var Noe="Tooltip",[egt,Z1]=HN(Noe),IM="TooltipTrigger",W5e=A.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=Z1(IM,n),s=Toe(IM,n),o=gj(n),a=A.useRef(null),l=Pr(e,a,i.onTriggerChange),c=A.useRef(!1),u=A.useRef(!1),h=A.useCallback(()=>c.current=!1,[]);return A.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),d.jsx(voe,{asChild:!0,...o,children:d.jsx(Mn.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:l,onPointerMove:pn(t.onPointerMove,m=>{m.pointerType!=="touch"&&!u.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),u.current=!0)}),onPointerLeave:pn(t.onPointerLeave,()=>{i.onTriggerLeave(),u.current=!1}),onPointerDown:pn(t.onPointerDown,()=>{i.open&&i.onClose(),c.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:pn(t.onFocus,()=>{c.current||i.onOpen()}),onBlur:pn(t.onBlur,i.onClose),onClick:pn(t.onClick,i.onClose)})})});W5e.displayName=IM;var yj="TooltipPortal",[Y5e,J5e]=HN(yj,{forceMount:void 0}),Coe=t=>{const{__scopeTooltip:e,forceMount:n,children:r,container:i}=t,s=Z1(yj,e);return d.jsx(Y5e,{scope:e,forceMount:n,children:d.jsx(Gm,{present:n||s.open,children:d.jsx(VN,{asChild:!0,container:i,children:r})})})};Coe.displayName=yj;var kx="TooltipContent",Poe=A.forwardRef((t,e)=>{const n=J5e(kx,t.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...s}=t,o=Z1(kx,t.__scopeTooltip);return d.jsx(Gm,{present:r||o.open,children:o.disableHoverableContent?d.jsx(_oe,{side:i,...s,ref:e}):d.jsx(X5e,{side:i,...s,ref:e})})}),X5e=A.forwardRef((t,e)=>{const n=Z1(kx,t.__scopeTooltip),r=Toe(kx,t.__scopeTooltip),i=A.useRef(null),s=Pr(e,i),[o,a]=A.useState(null),{trigger:l,onClose:c}=n,u=i.current,{onPointerInTransitChange:h}=r,m=A.useCallback(()=>{a(null),h(!1)},[h]),g=A.useCallback((y,v)=>{const b=y.currentTarget,w={x:y.clientX,y:y.clientY},k=nOe(w,b.getBoundingClientRect()),N=rOe(w,k),R=iOe(v.getBoundingClientRect()),D=oOe([...N,...R]);a(D),h(!0)},[h]);return A.useEffect(()=>()=>m(),[m]),A.useEffect(()=>{if(l&&u){const y=b=>g(b,u),v=b=>g(b,l);return l.addEventListener("pointerleave",y),u.addEventListener("pointerleave",v),()=>{l.removeEventListener("pointerleave",y),u.removeEventListener("pointerleave",v)}}},[l,u,g,m]),A.useEffect(()=>{if(o){const y=v=>{const b=v.target,w={x:v.clientX,y:v.clientY},k=(l==null?void 0:l.contains(b))||(u==null?void 0:u.contains(b)),N=!sOe(w,o);k?m():N&&(m(),c())};return document.addEventListener("pointermove",y),()=>document.removeEventListener("pointermove",y)}},[l,u,o,c,m]),d.jsx(_oe,{...t,ref:s})}),[Q5e,Z5e]=HN(Noe,{isInside:!1}),eOe=F5e("TooltipContent"),_oe=A.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=t,l=Z1(kx,n),c=gj(n),{onClose:u}=l;return A.useEffect(()=>(document.addEventListener(Lq,u),()=>document.removeEventListener(Lq,u)),[u]),A.useEffect(()=>{if(l.trigger){const h=m=>{const g=m.target;g!=null&&g.contains(l.trigger)&&u()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,u]),d.jsx(jN,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:u,children:d.jsxs(boe,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[d.jsx(eOe,{children:r}),d.jsx(Q5e,{scope:n,isInside:!0,children:d.jsx(q5e,{id:l.contentId,role:"tooltip",children:i||r})})]})})});Poe.displayName=kx;var Ioe="TooltipArrow",tOe=A.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=gj(n);return Z5e(Ioe,n).isInside?null:d.jsx(woe,{...i,...r,ref:e})});tOe.displayName=Ioe;function nOe(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),i=Math.abs(e.right-t.x),s=Math.abs(e.left-t.x);switch(Math.min(n,r,i,s)){case s:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function rOe(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function iOe(t){const{top:e,right:n,bottom:r,left:i}=t;return[{x:i,y:e},{x:n,y:e},{x:n,y:r},{x:i,y:r}]}function sOe(t,e){const{x:n,y:r}=t;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s],l=e[o],c=a.x,u=a.y,h=l.x,m=l.y;u>r!=m>r&&n<(h-c)*(r-u)/(m-u)+c&&(i=!i)}return i}function oOe(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),aOe(e)}function aOe(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const i=t[r];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const i=t[r];for(;n.length>=2;){const s=n[n.length-1],o=n[n.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))n.pop();else break}n.push(i)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var lOe=koe,cOe=Coe,Roe=Poe;function Ooe(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=Ooe(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Rn(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=Ooe(t))&&(r&&(r+=" "),r+=e);return r}const uOe=(t,e)=>{const n=new Array(t.length+e.length);for(let r=0;r<t.length;r++)n[r]=t[r];for(let r=0;r<e.length;r++)n[t.length+r]=e[r];return n},dOe=(t,e)=>({classGroupId:t,validator:e}),Moe=(t=new Map,e=null,n)=>({nextPart:t,validators:e,classGroupId:n}),Tk="-",Dq=[],fOe="arbitrary..",hOe=t=>{const e=mOe(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{if(o.startsWith("[")&&o.endsWith("]"))return pOe(o);const a=o.split(Tk),l=a[0]===""&&a.length>1?1:0;return Loe(a,l,e)},getConflictingClassGroupIds:(o,a)=>{if(a){const l=r[o],c=n[o];return l?c?uOe(c,l):l:c||Dq}return n[o]||Dq}}},Loe=(t,e,n)=>{if(t.length-e===0)return n.classGroupId;const i=t[e],s=n.nextPart.get(i);if(s){const c=Loe(t,e+1,s);if(c)return c}const o=n.validators;if(o===null)return;const a=e===0?t.join(Tk):t.slice(e).join(Tk),l=o.length;for(let c=0;c<l;c++){const u=o[c];if(u.validator(a))return u.classGroupId}},pOe=t=>t.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=t.slice(1,-1),n=e.indexOf(":"),r=e.slice(0,n);return r?fOe+r:void 0})(),mOe=t=>{const{theme:e,classGroups:n}=t;return gOe(n,e)},gOe=(t,e)=>{const n=Moe();for(const r in t){const i=t[r];xj(i,n,r,e)}return n},xj=(t,e,n,r)=>{const i=t.length;for(let s=0;s<i;s++){const o=t[s];yOe(o,e,n,r)}},yOe=(t,e,n,r)=>{if(typeof t=="string"){xOe(t,e,n);return}if(typeof t=="function"){vOe(t,e,n,r);return}bOe(t,e,n,r)},xOe=(t,e,n)=>{const r=t===""?e:Doe(e,t);r.classGroupId=n},vOe=(t,e,n,r)=>{if(wOe(t)){xj(t(r),e,n,r);return}e.validators===null&&(e.validators=[]),e.validators.push(dOe(n,t))},bOe=(t,e,n,r)=>{const i=Object.entries(t),s=i.length;for(let o=0;o<s;o++){const[a,l]=i[o];xj(l,Doe(e,a),n,r)}},Doe=(t,e)=>{let n=t;const r=e.split(Tk),i=r.length;for(let s=0;s<i;s++){const o=r[s];let a=n.nextPart.get(o);a||(a=Moe(),n.nextPart.set(o,a)),n=a}return n},wOe=t=>"isThemeGetter"in t&&t.isThemeGetter===!0,EOe=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=Object.create(null),r=Object.create(null);const i=(s,o)=>{n[s]=o,e++,e>t&&(e=0,r=n,n=Object.create(null))};return{get(s){let o=n[s];if(o!==void 0)return o;if((o=r[s])!==void 0)return i(s,o),o},set(s,o){s in n?n[s]=o:i(s,o)}}},RM="!",jq=":",SOe=[],Bq=(t,e,n,r,i)=>({modifiers:t,hasImportantModifier:e,baseClassName:n,maybePostfixModifierPosition:r,isExternal:i}),AOe=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=i=>{const s=[];let o=0,a=0,l=0,c;const u=i.length;for(let v=0;v<u;v++){const b=i[v];if(o===0&&a===0){if(b===jq){s.push(i.slice(l,v)),l=v+1;continue}if(b==="/"){c=v;continue}}b==="["?o++:b==="]"?o--:b==="("?a++:b===")"&&a--}const h=s.length===0?i:i.slice(l);let m=h,g=!1;h.endsWith(RM)?(m=h.slice(0,-1),g=!0):h.startsWith(RM)&&(m=h.slice(1),g=!0);const y=c&&c>l?c-l:void 0;return Bq(s,g,m,y)};if(e){const i=e+jq,s=r;r=o=>o.startsWith(i)?s(o.slice(i.length)):Bq(SOe,!1,o,void 0,!0)}if(n){const i=r;r=s=>n({className:s,parseClassName:i})}return r},TOe=t=>{const e=new Map;return t.orderSensitiveModifiers.forEach((n,r)=>{e.set(n,1e6+r)}),n=>{const r=[];let i=[];for(let s=0;s<n.length;s++){const o=n[s],a=o[0]==="[",l=e.has(o);a||l?(i.length>0&&(i.sort(),r.push(...i),i=[]),r.push(o)):i.push(o)}return i.length>0&&(i.sort(),r.push(...i)),r}},kOe=t=>({cache:EOe(t.cacheSize),parseClassName:AOe(t),sortModifiers:TOe(t),...hOe(t)}),NOe=/\s+/,COe=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:s}=e,o=[],a=t.trim().split(NOe);let l="";for(let c=a.length-1;c>=0;c-=1){const u=a[c],{isExternal:h,modifiers:m,hasImportantModifier:g,baseClassName:y,maybePostfixModifierPosition:v}=n(u);if(h){l=u+(l.length>0?" "+l:l);continue}let b=!!v,w=r(b?y.substring(0,v):y);if(!w){if(!b){l=u+(l.length>0?" "+l:l);continue}if(w=r(y),!w){l=u+(l.length>0?" "+l:l);continue}b=!1}const k=m.length===0?"":m.length===1?m[0]:s(m).join(":"),N=g?k+RM:k,R=N+w;if(o.indexOf(R)>-1)continue;o.push(R);const D=i(w,b);for(let O=0;O<D.length;++O){const B=D[O];o.push(N+B)}l=u+(l.length>0?" "+l:l)}return l},POe=(...t)=>{let e=0,n,r,i="";for(;e<t.length;)(n=t[e++])&&(r=joe(n))&&(i&&(i+=" "),i+=r);return i},joe=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=joe(t[r]))&&(n&&(n+=" "),n+=e);return n},_Oe=(t,...e)=>{let n,r,i,s;const o=l=>{const c=e.reduce((u,h)=>h(u),t());return n=kOe(c),r=n.cache.get,i=n.cache.set,s=a,a(l)},a=l=>{const c=r(l);if(c)return c;const u=COe(l,n);return i(l,u),u};return s=o,(...l)=>s(POe(...l))},IOe=[],wi=t=>{const e=n=>n[t]||IOe;return e.isThemeGetter=!0,e},Boe=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Uoe=/^\((?:(\w[\w-]*):)?(.+)\)$/i,ROe=/^\d+\/\d+$/,OOe=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,MOe=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,LOe=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,DOe=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,jOe=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,tg=t=>ROe.test(t),gn=t=>!!t&&!Number.isNaN(Number(t)),gf=t=>!!t&&Number.isInteger(Number(t)),a5=t=>t.endsWith("%")&&gn(t.slice(0,-1)),xu=t=>OOe.test(t),BOe=()=>!0,UOe=t=>MOe.test(t)&&!LOe.test(t),Foe=()=>!1,FOe=t=>DOe.test(t),$Oe=t=>jOe.test(t),zOe=t=>!Rt(t)&&!Ot(t),VOe=t=>tv(t,Voe,Foe),Rt=t=>Boe.test(t),np=t=>tv(t,Hoe,UOe),l5=t=>tv(t,WOe,gn),Uq=t=>tv(t,$oe,Foe),HOe=t=>tv(t,zoe,$Oe),vA=t=>tv(t,qoe,FOe),Ot=t=>Uoe.test(t),Ab=t=>nv(t,Hoe),qOe=t=>nv(t,YOe),Fq=t=>nv(t,$oe),GOe=t=>nv(t,Voe),KOe=t=>nv(t,zoe),bA=t=>nv(t,qoe,!0),tv=(t,e,n)=>{const r=Boe.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},nv=(t,e,n=!1)=>{const r=Uoe.exec(t);return r?r[1]?e(r[1]):n:!1},$oe=t=>t==="position"||t==="percentage",zoe=t=>t==="image"||t==="url",Voe=t=>t==="length"||t==="size"||t==="bg-size",Hoe=t=>t==="length",WOe=t=>t==="number",YOe=t=>t==="family-name",qoe=t=>t==="shadow",JOe=()=>{const t=wi("color"),e=wi("font"),n=wi("text"),r=wi("font-weight"),i=wi("tracking"),s=wi("leading"),o=wi("breakpoint"),a=wi("container"),l=wi("spacing"),c=wi("radius"),u=wi("shadow"),h=wi("inset-shadow"),m=wi("text-shadow"),g=wi("drop-shadow"),y=wi("blur"),v=wi("perspective"),b=wi("aspect"),w=wi("ease"),k=wi("animate"),N=()=>["auto","avoid","all","avoid-page","page","left","right","column"],R=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],D=()=>[...R(),Ot,Rt],O=()=>["auto","hidden","clip","visible","scroll"],B=()=>["auto","contain","none"],z=()=>[Ot,Rt,l],U=()=>[tg,"full","auto",...z()],$=()=>[gf,"none","subgrid",Ot,Rt],W=()=>["auto",{span:["full",gf,Ot,Rt]},gf,Ot,Rt],H=()=>[gf,"auto",Ot,Rt],F=()=>["auto","min","max","fr",Ot,Rt],T=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],_=()=>["start","end","center","stretch","center-safe","end-safe"],L=()=>["auto",...z()],V=()=>[tg,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...z()],K=()=>[t,Ot,Rt],te=()=>[...R(),Fq,Uq,{position:[Ot,Rt]}],G=()=>["no-repeat",{repeat:["","x","y","space","round"]}],q=()=>["auto","cover","contain",GOe,VOe,{size:[Ot,Rt]}],M=()=>[a5,Ab,np],P=()=>["","none","full",c,Ot,Rt],Y=()=>["",gn,Ab,np],X=()=>["solid","dashed","dotted","double"],se=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],oe=()=>[gn,a5,Fq,Uq],me=()=>["","none",y,Ot,Rt],ce=()=>["none",gn,Ot,Rt],ve=()=>["none",gn,Ot,Rt],Ne=()=>[gn,Ot,Rt],pe=()=>[tg,"full",...z()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[xu],breakpoint:[xu],color:[BOe],container:[xu],"drop-shadow":[xu],ease:["in","out","in-out"],font:[zOe],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[xu],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[xu],shadow:[xu],spacing:["px",gn],text:[xu],"text-shadow":[xu],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",tg,Rt,Ot,b]}],container:["container"],columns:[{columns:[gn,Rt,Ot,a]}],"break-after":[{"break-after":N()}],"break-before":[{"break-before":N()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:D()}],overflow:[{overflow:O()}],"overflow-x":[{"overflow-x":O()}],"overflow-y":[{"overflow-y":O()}],overscroll:[{overscroll:B()}],"overscroll-x":[{"overscroll-x":B()}],"overscroll-y":[{"overscroll-y":B()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:U()}],"inset-x":[{"inset-x":U()}],"inset-y":[{"inset-y":U()}],start:[{start:U()}],end:[{end:U()}],top:[{top:U()}],right:[{right:U()}],bottom:[{bottom:U()}],left:[{left:U()}],visibility:["visible","invisible","collapse"],z:[{z:[gf,"auto",Ot,Rt]}],basis:[{basis:[tg,"full","auto",a,...z()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[gn,tg,"auto","initial","none",Rt]}],grow:[{grow:["",gn,Ot,Rt]}],shrink:[{shrink:["",gn,Ot,Rt]}],order:[{order:[gf,"first","last","none",Ot,Rt]}],"grid-cols":[{"grid-cols":$()}],"col-start-end":[{col:W()}],"col-start":[{"col-start":H()}],"col-end":[{"col-end":H()}],"grid-rows":[{"grid-rows":$()}],"row-start-end":[{row:W()}],"row-start":[{"row-start":H()}],"row-end":[{"row-end":H()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":F()}],"auto-rows":[{"auto-rows":F()}],gap:[{gap:z()}],"gap-x":[{"gap-x":z()}],"gap-y":[{"gap-y":z()}],"justify-content":[{justify:[...T(),"normal"]}],"justify-items":[{"justify-items":[..._(),"normal"]}],"justify-self":[{"justify-self":["auto",..._()]}],"align-content":[{content:["normal",...T()]}],"align-items":[{items:[..._(),{baseline:["","last"]}]}],"align-self":[{self:["auto",..._(),{baseline:["","last"]}]}],"place-content":[{"place-content":T()}],"place-items":[{"place-items":[..._(),"baseline"]}],"place-self":[{"place-self":["auto",..._()]}],p:[{p:z()}],px:[{px:z()}],py:[{py:z()}],ps:[{ps:z()}],pe:[{pe:z()}],pt:[{pt:z()}],pr:[{pr:z()}],pb:[{pb:z()}],pl:[{pl:z()}],m:[{m:L()}],mx:[{mx:L()}],my:[{my:L()}],ms:[{ms:L()}],me:[{me:L()}],mt:[{mt:L()}],mr:[{mr:L()}],mb:[{mb:L()}],ml:[{ml:L()}],"space-x":[{"space-x":z()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":z()}],"space-y-reverse":["space-y-reverse"],size:[{size:V()}],w:[{w:[a,"screen",...V()]}],"min-w":[{"min-w":[a,"screen","none",...V()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[o]},...V()]}],h:[{h:["screen","lh",...V()]}],"min-h":[{"min-h":["screen","lh","none",...V()]}],"max-h":[{"max-h":["screen","lh",...V()]}],"font-size":[{text:["base",n,Ab,np]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Ot,l5]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",a5,Rt]}],"font-family":[{font:[qOe,Rt,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,Ot,Rt]}],"line-clamp":[{"line-clamp":[gn,"none",Ot,l5]}],leading:[{leading:[s,...z()]}],"list-image":[{"list-image":["none",Ot,Rt]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ot,Rt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:K()}],"text-color":[{text:K()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...X(),"wavy"]}],"text-decoration-thickness":[{decoration:[gn,"from-font","auto",Ot,np]}],"text-decoration-color":[{decoration:K()}],"underline-offset":[{"underline-offset":[gn,"auto",Ot,Rt]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:z()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ot,Rt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ot,Rt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:te()}],"bg-repeat":[{bg:G()}],"bg-size":[{bg:q()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},gf,Ot,Rt],radial:["",Ot,Rt],conic:[gf,Ot,Rt]},KOe,HOe]}],"bg-color":[{bg:K()}],"gradient-from-pos":[{from:M()}],"gradient-via-pos":[{via:M()}],"gradient-to-pos":[{to:M()}],"gradient-from":[{from:K()}],"gradient-via":[{via:K()}],"gradient-to":[{to:K()}],rounded:[{rounded:P()}],"rounded-s":[{"rounded-s":P()}],"rounded-e":[{"rounded-e":P()}],"rounded-t":[{"rounded-t":P()}],"rounded-r":[{"rounded-r":P()}],"rounded-b":[{"rounded-b":P()}],"rounded-l":[{"rounded-l":P()}],"rounded-ss":[{"rounded-ss":P()}],"rounded-se":[{"rounded-se":P()}],"rounded-ee":[{"rounded-ee":P()}],"rounded-es":[{"rounded-es":P()}],"rounded-tl":[{"rounded-tl":P()}],"rounded-tr":[{"rounded-tr":P()}],"rounded-br":[{"rounded-br":P()}],"rounded-bl":[{"rounded-bl":P()}],"border-w":[{border:Y()}],"border-w-x":[{"border-x":Y()}],"border-w-y":[{"border-y":Y()}],"border-w-s":[{"border-s":Y()}],"border-w-e":[{"border-e":Y()}],"border-w-t":[{"border-t":Y()}],"border-w-r":[{"border-r":Y()}],"border-w-b":[{"border-b":Y()}],"border-w-l":[{"border-l":Y()}],"divide-x":[{"divide-x":Y()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Y()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...X(),"hidden","none"]}],"divide-style":[{divide:[...X(),"hidden","none"]}],"border-color":[{border:K()}],"border-color-x":[{"border-x":K()}],"border-color-y":[{"border-y":K()}],"border-color-s":[{"border-s":K()}],"border-color-e":[{"border-e":K()}],"border-color-t":[{"border-t":K()}],"border-color-r":[{"border-r":K()}],"border-color-b":[{"border-b":K()}],"border-color-l":[{"border-l":K()}],"divide-color":[{divide:K()}],"outline-style":[{outline:[...X(),"none","hidden"]}],"outline-offset":[{"outline-offset":[gn,Ot,Rt]}],"outline-w":[{outline:["",gn,Ab,np]}],"outline-color":[{outline:K()}],shadow:[{shadow:["","none",u,bA,vA]}],"shadow-color":[{shadow:K()}],"inset-shadow":[{"inset-shadow":["none",h,bA,vA]}],"inset-shadow-color":[{"inset-shadow":K()}],"ring-w":[{ring:Y()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:K()}],"ring-offset-w":[{"ring-offset":[gn,np]}],"ring-offset-color":[{"ring-offset":K()}],"inset-ring-w":[{"inset-ring":Y()}],"inset-ring-color":[{"inset-ring":K()}],"text-shadow":[{"text-shadow":["none",m,bA,vA]}],"text-shadow-color":[{"text-shadow":K()}],opacity:[{opacity:[gn,Ot,Rt]}],"mix-blend":[{"mix-blend":[...se(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":se()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[gn]}],"mask-image-linear-from-pos":[{"mask-linear-from":oe()}],"mask-image-linear-to-pos":[{"mask-linear-to":oe()}],"mask-image-linear-from-color":[{"mask-linear-from":K()}],"mask-image-linear-to-color":[{"mask-linear-to":K()}],"mask-image-t-from-pos":[{"mask-t-from":oe()}],"mask-image-t-to-pos":[{"mask-t-to":oe()}],"mask-image-t-from-color":[{"mask-t-from":K()}],"mask-image-t-to-color":[{"mask-t-to":K()}],"mask-image-r-from-pos":[{"mask-r-from":oe()}],"mask-image-r-to-pos":[{"mask-r-to":oe()}],"mask-image-r-from-color":[{"mask-r-from":K()}],"mask-image-r-to-color":[{"mask-r-to":K()}],"mask-image-b-from-pos":[{"mask-b-from":oe()}],"mask-image-b-to-pos":[{"mask-b-to":oe()}],"mask-image-b-from-color":[{"mask-b-from":K()}],"mask-image-b-to-color":[{"mask-b-to":K()}],"mask-image-l-from-pos":[{"mask-l-from":oe()}],"mask-image-l-to-pos":[{"mask-l-to":oe()}],"mask-image-l-from-color":[{"mask-l-from":K()}],"mask-image-l-to-color":[{"mask-l-to":K()}],"mask-image-x-from-pos":[{"mask-x-from":oe()}],"mask-image-x-to-pos":[{"mask-x-to":oe()}],"mask-image-x-from-color":[{"mask-x-from":K()}],"mask-image-x-to-color":[{"mask-x-to":K()}],"mask-image-y-from-pos":[{"mask-y-from":oe()}],"mask-image-y-to-pos":[{"mask-y-to":oe()}],"mask-image-y-from-color":[{"mask-y-from":K()}],"mask-image-y-to-color":[{"mask-y-to":K()}],"mask-image-radial":[{"mask-radial":[Ot,Rt]}],"mask-image-radial-from-pos":[{"mask-radial-from":oe()}],"mask-image-radial-to-pos":[{"mask-radial-to":oe()}],"mask-image-radial-from-color":[{"mask-radial-from":K()}],"mask-image-radial-to-color":[{"mask-radial-to":K()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":R()}],"mask-image-conic-pos":[{"mask-conic":[gn]}],"mask-image-conic-from-pos":[{"mask-conic-from":oe()}],"mask-image-conic-to-pos":[{"mask-conic-to":oe()}],"mask-image-conic-from-color":[{"mask-conic-from":K()}],"mask-image-conic-to-color":[{"mask-conic-to":K()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:te()}],"mask-repeat":[{mask:G()}],"mask-size":[{mask:q()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Ot,Rt]}],filter:[{filter:["","none",Ot,Rt]}],blur:[{blur:me()}],brightness:[{brightness:[gn,Ot,Rt]}],contrast:[{contrast:[gn,Ot,Rt]}],"drop-shadow":[{"drop-shadow":["","none",g,bA,vA]}],"drop-shadow-color":[{"drop-shadow":K()}],grayscale:[{grayscale:["",gn,Ot,Rt]}],"hue-rotate":[{"hue-rotate":[gn,Ot,Rt]}],invert:[{invert:["",gn,Ot,Rt]}],saturate:[{saturate:[gn,Ot,Rt]}],sepia:[{sepia:["",gn,Ot,Rt]}],"backdrop-filter":[{"backdrop-filter":["","none",Ot,Rt]}],"backdrop-blur":[{"backdrop-blur":me()}],"backdrop-brightness":[{"backdrop-brightness":[gn,Ot,Rt]}],"backdrop-contrast":[{"backdrop-contrast":[gn,Ot,Rt]}],"backdrop-grayscale":[{"backdrop-grayscale":["",gn,Ot,Rt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[gn,Ot,Rt]}],"backdrop-invert":[{"backdrop-invert":["",gn,Ot,Rt]}],"backdrop-opacity":[{"backdrop-opacity":[gn,Ot,Rt]}],"backdrop-saturate":[{"backdrop-saturate":[gn,Ot,Rt]}],"backdrop-sepia":[{"backdrop-sepia":["",gn,Ot,Rt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":z()}],"border-spacing-x":[{"border-spacing-x":z()}],"border-spacing-y":[{"border-spacing-y":z()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ot,Rt]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[gn,"initial",Ot,Rt]}],ease:[{ease:["linear","initial",w,Ot,Rt]}],delay:[{delay:[gn,Ot,Rt]}],animate:[{animate:["none",k,Ot,Rt]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[v,Ot,Rt]}],"perspective-origin":[{"perspective-origin":D()}],rotate:[{rotate:ce()}],"rotate-x":[{"rotate-x":ce()}],"rotate-y":[{"rotate-y":ce()}],"rotate-z":[{"rotate-z":ce()}],scale:[{scale:ve()}],"scale-x":[{"scale-x":ve()}],"scale-y":[{"scale-y":ve()}],"scale-z":[{"scale-z":ve()}],"scale-3d":["scale-3d"],skew:[{skew:Ne()}],"skew-x":[{"skew-x":Ne()}],"skew-y":[{"skew-y":Ne()}],transform:[{transform:[Ot,Rt,"","none","gpu","cpu"]}],"transform-origin":[{origin:D()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:pe()}],"translate-x":[{"translate-x":pe()}],"translate-y":[{"translate-y":pe()}],"translate-z":[{"translate-z":pe()}],"translate-none":["translate-none"],accent:[{accent:K()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:K()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ot,Rt]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":z()}],"scroll-mx":[{"scroll-mx":z()}],"scroll-my":[{"scroll-my":z()}],"scroll-ms":[{"scroll-ms":z()}],"scroll-me":[{"scroll-me":z()}],"scroll-mt":[{"scroll-mt":z()}],"scroll-mr":[{"scroll-mr":z()}],"scroll-mb":[{"scroll-mb":z()}],"scroll-ml":[{"scroll-ml":z()}],"scroll-p":[{"scroll-p":z()}],"scroll-px":[{"scroll-px":z()}],"scroll-py":[{"scroll-py":z()}],"scroll-ps":[{"scroll-ps":z()}],"scroll-pe":[{"scroll-pe":z()}],"scroll-pt":[{"scroll-pt":z()}],"scroll-pr":[{"scroll-pr":z()}],"scroll-pb":[{"scroll-pb":z()}],"scroll-pl":[{"scroll-pl":z()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ot,Rt]}],fill:[{fill:["none",...K()]}],"stroke-w":[{stroke:[gn,Ab,np,l5]}],stroke:[{stroke:["none",...K()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},XOe=_Oe(JOe);function Pt(...t){return XOe(Rn(t))}const QOe=lOe,ZOe=A.forwardRef(({className:t,sideOffset:e=4,...n},r)=>d.jsx(cOe,{children:d.jsx(Roe,{ref:r,sideOffset:e,className:Pt("z-50 overflow-hidden rounded-md bg-slate-800 border border-slate-700 px-3 py-1.5 text-xs text-slate-200 animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));ZOe.displayName=Roe.displayName;const rp=({icon:t,label:e,isActive:n,onClick:r,isSubItem:i=!1})=>d.jsxs("button",{onClick:r,className:Pt("w-full flex items-center gap-3 text-[13px] font-medium transition-all duration-200 rounded-xl relative overflow-hidden",i?"px-3 py-2 pl-6":"px-3 py-2.5",n?"text-white bg-[#1a1b21]/80 backdrop-blur-sm":"text-[#747580] hover:text-[#a0a1a8] hover:bg-[#1a1b21]/40"),title:e,children:[n&&d.jsx("div",{className:Pt("absolute top-1/2 -translate-y-1/2 w-1 rounded-full bg-[#E7FE55]",i?"left-0 h-4":"left-0 h-6")}),d.jsx("span",{className:Pt("flex items-center justify-center transition-colors",!i&&"ml-1",n&&"text-[#E7FE55]"),children:t}),d.jsx("span",{className:"tracking-wide",children:e})]}),e4e=({icon:t,label:e,isExpanded:n,onToggle:r,hasActiveChild:i,children:s})=>d.jsxs("div",{className:"space-y-0.5",children:[d.jsxs("button",{onClick:r,className:Pt("w-full flex items-center justify-between px-3 py-2.5 text-[13px] font-medium transition-all duration-200 rounded-xl relative overflow-hidden",i?"text-white bg-[#1a1b21]/80 backdrop-blur-sm":"text-[#747580] hover:text-[#a0a1a8] hover:bg-[#1a1b21]/40"),title:e,children:[d.jsxs("div",{className:"flex items-center gap-3",children:[i&&d.jsx("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 w-1 h-6 bg-[#E7FE55] rounded-full"}),d.jsx("span",{className:Pt("flex items-center justify-center transition-colors ml-1",i&&"text-[#E7FE55]"),children:t}),d.jsx("span",{className:"tracking-wide",children:e})]}),d.jsx(Mt.span,{initial:!1,animate:{rotate:n?180:0},transition:{duration:.2},className:"text-[#5a5b63]",children:d.jsx(aa,{size:14})})]}),d.jsx(js,{initial:!1,children:n&&d.jsx(Mt.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2,ease:"easeInOut"},className:"overflow-hidden",children:d.jsx("div",{className:"relative ml-1 pl-2 border-l border-[#2a2b30]",children:s})})})]}),$q=({status:t,label:e,latency:n,network:r})=>{const i=t==="Down",s=t==="Checking",o=i?"#ef4444":s?"#747580":"#E7FE55";return d.jsxs("div",{className:"flex items-center justify-between py-0.5",children:[d.jsx("span",{className:"text-[9px] uppercase tracking-[0.05em] text-[#5a5b63]",children:e}),d.jsxs("div",{className:"flex items-center gap-1.5",children:[d.jsx("span",{className:"text-[9px] font-mono text-[#5a5b63]",children:i?"DOWN":s?"...":n}),d.jsx("div",{className:"w-1 h-1 rounded-full",style:{backgroundColor:o}})]})]})},t4e=({activeTab:t,setActiveTab:e,isVaultUnlocked:n,onSelectConversation:r,onNewChat:i,currentConversationId:s,password:o,isOpen:a=!1,onClose:l})=>{const[c,u]=A.useState("Checking"),h=[we.VAULT_DEALER,we.DEALER_DASHBOARD,we.DEALER_THINKING,we.DEALER_CONFIG,we.DEALER_PROMPT].includes(t),m=[we.POLYMARKET_DEALER,we.POLYMARKET_DASHBOARD,we.POLYMARKET_THINKING,we.POLYMARKET_CONFIG,we.POLYMARKET_PROMPT].includes(t),g=[we.SOLANA_DEALER,we.SOLANA_DEALER_DASHBOARD,we.SOLANA_DEALER_THINKING,we.SOLANA_DEALER_POLICY,we.SOLANA_DEALER_LOG].includes(t),y=h||m||g,[v,b]=A.useState(y),w=t===we.AGENT;A.useEffect(()=>{y&&b(!0)},[y]),A.useEffect(()=>{const N=async()=>{const D=await Vt.checkHealth();u(D?"Online":"Down")};N();const R=setInterval(N,3e4);return()=>clearInterval(R)},[]);const k=N=>{e(N),l&&l()};return d.jsxs(QOe,{delayDuration:300,children:[d.jsx(js,{children:a&&d.jsx(Mt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 z-40 xl:hidden",onClick:l})}),d.jsxs("aside",{className:Pt("m-3 p-5 flex flex-col fixed h-[calc(100%-24px)] bg-[#0f1015]/95 backdrop-blur-xl z-50 w-60 transform transition-transform duration-300 ease-in-out","rounded-2xl border border-[#232328]/60 shadow-2xl shadow-black/20",a?"translate-x-0":"-translate-x-full","xl:translate-x-0"),children:[d.jsxs("div",{className:"mb-8 flex items-center gap-3 px-2",children:[d.jsx("div",{className:"w-8 h-8 flex-shrink-0 bg-[#E7FE55] rounded flex items-center justify-center",children:d.jsx(cd,{className:"text-black w-5 h-5"})}),d.jsx("h1",{className:"text-[15px] font-semibold text-white tracking-tight hidden xl:block",children:"AutonomousVault"})]}),d.jsxs("nav",{className:"space-y-1 flex-1",children:[d.jsx(rp,{icon:d.jsx(to,{size:18}),label:"Dashboard",isActive:t===we.DASHBOARD,onClick:()=>k(we.DASHBOARD)}),d.jsx(rp,{icon:d.jsx(Mg,{size:18}),label:"Vault Operator",isActive:w,onClick:()=>k(we.AGENT)}),d.jsxs(e4e,{icon:d.jsx(MTe,{size:18}),label:"Vault Dealer",isExpanded:v,onToggle:()=>b(!v),hasActiveChild:y,children:[d.jsx(rp,{icon:d.jsx(ko,{size:16}),label:"Hyperliquid",isActive:h,onClick:()=>k(we.VAULT_DEALER),isSubItem:!0}),d.jsx(rp,{icon:d.jsx(Rw,{size:16}),label:"Solana",isActive:g,onClick:()=>k(we.SOLANA_DEALER),isSubItem:!0}),d.jsx(rp,{icon:d.jsx(yn,{size:16}),label:"Polymarket",isActive:m,onClick:()=>k(we.POLYMARKET_DEALER),isSubItem:!0})]}),d.jsx(rp,{icon:d.jsx(gke,{size:18}),label:"Vault",isActive:t===we.VAULT,onClick:()=>k(we.VAULT)}),d.jsx(rp,{icon:d.jsx(E8,{size:18}),label:"Token Costs",isActive:t===we.TOKEN_COSTS,onClick:()=>k(we.TOKEN_COSTS)})]}),d.jsxs("div",{className:"pt-6 border-t border-[#232328]",children:[d.jsx("div",{className:"text-[10px] uppercase tracking-[0.1em] text-[#747580] font-semibold mb-3 px-2",children:"Network Status"}),d.jsxs("div",{className:"space-y-2 px-2",children:[d.jsx($q,{status:"Online",label:"Solana Devnet",latency:"18m",network:"solana"}),d.jsx($q,{status:c,label:"Hyperliquid Testnet",latency:"450ms",network:"hyperliquid"})]})]})]})]})};var n4e=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function vj(t){if(typeof t!="string")return!1;var e=n4e;return e.includes(t)}var r4e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],i4e=new Set(r4e);function Goe(t){return typeof t!="string"?!1:i4e.has(t)}function Koe(t){return typeof t=="string"&&t.startsWith("data-")}function ro(t){if(typeof t!="object"||t===null)return{};var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(Goe(n)||Koe(n))&&(e[n]=t[n]);return e}function km(t){if(t==null)return null;if(A.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return ro(e)}return typeof t=="object"&&!Array.isArray(t)?ro(t):null}function $s(t){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(Goe(n)||Koe(n)||vj(n))&&(e[n]=t[n]);return e}function s4e(t){return t==null?null:A.isValidElement(t)?$s(t.props):typeof t=="object"&&!Array.isArray(t)?$s(t):null}var o4e=["children","width","height","viewBox","className","style","title","desc"];function OM(){return OM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},OM.apply(null,arguments)}function a4e(t,e){if(t==null)return{};var n,r,i=l4e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function l4e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Woe=A.forwardRef((t,e)=>{var{children:n,width:r,height:i,viewBox:s,className:o,style:a,title:l,desc:c}=t,u=a4e(t,o4e),h=s||{width:r,height:i,x:0,y:0},m=Rn("recharts-surface",o);return A.createElement("svg",OM({},$s(u),{className:m,width:r,height:i,style:a,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height),ref:e}),A.createElement("title",null,l),A.createElement("desc",null,c),n)}),c4e=["children","className"];function MM(){return MM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},MM.apply(null,arguments)}function u4e(t,e){if(t==null)return{};var n,r,i=d4e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function d4e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Jr=A.forwardRef((t,e)=>{var{children:n,className:r}=t,i=u4e(t,c4e),s=Rn("recharts-layer",r);return A.createElement("g",MM({className:s},$s(i),{ref:e}),n)}),f4e=A.createContext(null);function pr(t){return function(){return t}}const Yoe=Math.cos,kk=Math.sin,Yl=Math.sqrt,Nk=Math.PI,qN=2*Nk,LM=Math.PI,DM=2*LM,fp=1e-6,h4e=DM-fp;function Joe(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function p4e(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Joe;const n=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class m4e{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Joe:p4e(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,s,o){this._append`C${+e},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(e,n,r,i,s){if(e=+e,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,l=r-e,c=i-n,u=o-e,h=a-n,m=u*u+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(m>fp)if(!(Math.abs(h*l-c*u)>fp)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let g=r-o,y=i-a,v=l*l+c*c,b=g*g+y*y,w=Math.sqrt(v),k=Math.sqrt(m),N=s*Math.tan((LM-Math.acos((v+m-b)/(2*w*k)))/2),R=N/k,D=N/w;Math.abs(R-1)>fp&&this._append`L${e+R*u},${n+R*h}`,this._append`A${s},${s},0,0,${+(h*g>u*y)},${this._x1=e+D*l},${this._y1=n+D*c}`}}arc(e,n,r,i,s,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),l=r*Math.sin(i),c=e+a,u=n+l,h=1^o,m=o?i-s:s-i;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>fp||Math.abs(this._y1-u)>fp)&&this._append`L${c},${u}`,r&&(m<0&&(m=m%DM+DM),m>h4e?this._append`A${r},${r},0,1,${h},${e-a},${n-l}A${r},${r},0,1,${h},${this._x1=c},${this._y1=u}`:m>fp&&this._append`A${r},${r},0,${+(m>=LM)},${h},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function bj(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new m4e(e)}function wj(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Xoe(t){this._context=t}Xoe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function GN(t){return new Xoe(t)}function Qoe(t){return t[0]}function Zoe(t){return t[1]}function eae(t,e){var n=pr(!0),r=null,i=GN,s=null,o=bj(a);t=typeof t=="function"?t:t===void 0?Qoe:pr(t),e=typeof e=="function"?e:e===void 0?Zoe:pr(e);function a(l){var c,u=(l=wj(l)).length,h,m=!1,g;for(r==null&&(s=i(g=o())),c=0;c<=u;++c)!(c<u&&n(h=l[c],c,l))===m&&((m=!m)?s.lineStart():s.lineEnd()),m&&s.point(+t(h,c,l),+e(h,c,l));if(g)return s=null,g+""||null}return a.x=function(l){return arguments.length?(t=typeof l=="function"?l:pr(+l),a):t},a.y=function(l){return arguments.length?(e=typeof l=="function"?l:pr(+l),a):e},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:pr(!!l),a):n},a.curve=function(l){return arguments.length?(i=l,r!=null&&(s=i(r)),a):i},a.context=function(l){return arguments.length?(l==null?r=s=null:s=i(r=l),a):r},a}function wA(t,e,n){var r=null,i=pr(!0),s=null,o=GN,a=null,l=bj(c);t=typeof t=="function"?t:t===void 0?Qoe:pr(+t),e=typeof e=="function"?e:pr(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?Zoe:pr(+n);function c(h){var m,g,y,v=(h=wj(h)).length,b,w=!1,k,N=new Array(v),R=new Array(v);for(s==null&&(a=o(k=l())),m=0;m<=v;++m){if(!(m<v&&i(b=h[m],m,h))===w)if(w=!w)g=m,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),y=m-1;y>=g;--y)a.point(N[y],R[y]);a.lineEnd(),a.areaEnd()}w&&(N[m]=+t(b,m,h),R[m]=+e(b,m,h),a.point(r?+r(b,m,h):N[m],n?+n(b,m,h):R[m]))}if(k)return a=null,k+""||null}function u(){return eae().defined(i).curve(o).context(s)}return c.x=function(h){return arguments.length?(t=typeof h=="function"?h:pr(+h),r=null,c):t},c.x0=function(h){return arguments.length?(t=typeof h=="function"?h:pr(+h),c):t},c.x1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:pr(+h),c):r},c.y=function(h){return arguments.length?(e=typeof h=="function"?h:pr(+h),n=null,c):e},c.y0=function(h){return arguments.length?(e=typeof h=="function"?h:pr(+h),c):e},c.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:pr(+h),c):n},c.lineX0=c.lineY0=function(){return u().x(t).y(e)},c.lineY1=function(){return u().x(t).y(n)},c.lineX1=function(){return u().x(r).y(e)},c.defined=function(h){return arguments.length?(i=typeof h=="function"?h:pr(!!h),c):i},c.curve=function(h){return arguments.length?(o=h,s!=null&&(a=o(s)),c):o},c.context=function(h){return arguments.length?(h==null?s=a=null:a=o(s=h),c):s},c}class tae{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function g4e(t){return new tae(t,!0)}function y4e(t){return new tae(t,!1)}const Ej={draw(t,e){const n=Yl(e/Nk);t.moveTo(n,0),t.arc(0,0,n,0,qN)}},x4e={draw(t,e){const n=Yl(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},nae=Yl(1/3),v4e=nae*2,b4e={draw(t,e){const n=Yl(e/v4e),r=n*nae;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},w4e={draw(t,e){const n=Yl(e),r=-n/2;t.rect(r,r,n,n)}},E4e=.8908130915292852,rae=kk(Nk/10)/kk(7*Nk/10),S4e=kk(qN/10)*rae,A4e=-Yoe(qN/10)*rae,T4e={draw(t,e){const n=Yl(e*E4e),r=S4e*n,i=A4e*n;t.moveTo(0,-n),t.lineTo(r,i);for(let s=1;s<5;++s){const o=qN*s/5,a=Yoe(o),l=kk(o);t.lineTo(l*n,-a*n),t.lineTo(a*r-l*i,l*r+a*i)}t.closePath()}},c5=Yl(3),k4e={draw(t,e){const n=-Yl(e/(c5*3));t.moveTo(0,n*2),t.lineTo(-c5*n,-n),t.lineTo(c5*n,-n),t.closePath()}},Ta=-.5,ka=Yl(3)/2,jM=1/Yl(12),N4e=(jM/2+1)*3,C4e={draw(t,e){const n=Yl(e/N4e),r=n/2,i=n*jM,s=r,o=n*jM+n,a=-s,l=o;t.moveTo(r,i),t.lineTo(s,o),t.lineTo(a,l),t.lineTo(Ta*r-ka*i,ka*r+Ta*i),t.lineTo(Ta*s-ka*o,ka*s+Ta*o),t.lineTo(Ta*a-ka*l,ka*a+Ta*l),t.lineTo(Ta*r+ka*i,Ta*i-ka*r),t.lineTo(Ta*s+ka*o,Ta*o-ka*s),t.lineTo(Ta*a+ka*l,Ta*l-ka*a),t.closePath()}};function P4e(t,e){let n=null,r=bj(i);t=typeof t=="function"?t:pr(t||Ej),e=typeof e=="function"?e:pr(e===void 0?64:+e);function i(){let s;if(n||(n=s=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(t=typeof s=="function"?s:pr(s),i):t},i.size=function(s){return arguments.length?(e=typeof s=="function"?s:pr(+s),i):e},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function Ck(){}function Pk(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function iae(t){this._context=t}iae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Pk(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Pk(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function _4e(t){return new iae(t)}function sae(t){this._context=t}sae.prototype={areaStart:Ck,areaEnd:Ck,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Pk(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function I4e(t){return new sae(t)}function oae(t){this._context=t}oae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Pk(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function R4e(t){return new oae(t)}function aae(t){this._context=t}aae.prototype={areaStart:Ck,areaEnd:Ck,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function O4e(t){return new aae(t)}function zq(t){return t<0?-1:1}function Vq(t,e,n){var r=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(zq(s)+zq(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function Hq(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function u5(t,e,n){var r=t._x0,i=t._y0,s=t._x1,o=t._y1,a=(s-r)/3;t._context.bezierCurveTo(r+a,i+a*e,s-a,o-a*n,s,o)}function _k(t){this._context=t}_k.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:u5(this,this._t0,Hq(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,u5(this,Hq(this,n=Vq(this,t,e)),n);break;default:u5(this,this._t0,n=Vq(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function lae(t){this._context=new cae(t)}(lae.prototype=Object.create(_k.prototype)).point=function(t,e){_k.prototype.point.call(this,e,t)};function cae(t){this._context=t}cae.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,s){this._context.bezierCurveTo(e,t,r,n,s,i)}};function M4e(t){return new _k(t)}function L4e(t){return new lae(t)}function uae(t){this._context=t}uae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=qq(t),i=qq(e),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function qq(t){var e,n=t.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,s[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/s[e-1],s[e]-=r,o[e]-=r*o[e-1];for(i[n-1]=o[n-1]/s[n-1],e=n-2;e>=0;--e)i[e]=(o[e]-i[e+1])/s[e];for(s[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function D4e(t){return new uae(t)}function KN(t,e){this._context=t,this._t=e}KN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function j4e(t){return new KN(t,.5)}function B4e(t){return new KN(t,0)}function U4e(t){return new KN(t,1)}function Nm(t,e){if((o=t.length)>1)for(var n=1,r,i,s=t[e[0]],o,a=s.length;n<o;++n)for(i=s,s=t[e[n]],r=0;r<a;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function BM(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function F4e(t,e){return t[e]}function $4e(t){const e=[];return e.key=t,e}function z4e(){var t=pr([]),e=BM,n=Nm,r=F4e;function i(s){var o=Array.from(t.apply(this,arguments),$4e),a,l=o.length,c=-1,u;for(const h of s)for(a=0,++c;a<l;++a)(o[a][c]=[0,+r(h,o[a].key,c,s)]).data=h;for(a=0,u=wj(e(o));a<l;++a)o[u[a]].index=a;return n(o,u),o}return i.keys=function(s){return arguments.length?(t=typeof s=="function"?s:pr(Array.from(s)),i):t},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:pr(+s),i):r},i.order=function(s){return arguments.length?(e=s==null?BM:typeof s=="function"?s:pr(Array.from(s)),i):e},i.offset=function(s){return arguments.length?(n=s??Nm,i):n},i}function V4e(t,e){if((r=t.length)>0){for(var n,r,i=0,s=t[0].length,o;i<s;++i){for(o=n=0;n<r;++n)o+=t[n][i][1]||0;if(o)for(n=0;n<r;++n)t[n][i][1]/=o}Nm(t,e)}}function H4e(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,s=r.length;n<s;++n){for(var o=0,a=0;o<i;++o)a+=t[o][n][1]||0;r[n][1]+=r[n][0]=-a/2}Nm(t,e)}}function q4e(t,e){if(!(!((o=t.length)>0)||!((s=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,s,o;r<s;++r){for(var a=0,l=0,c=0;a<o;++a){for(var u=t[e[a]],h=u[r][1]||0,m=u[r-1][1]||0,g=(h-m)/2,y=0;y<a;++y){var v=t[e[y]],b=v[r][1]||0,w=v[r-1][1]||0;g+=b-w}l+=h,c+=g*h}i[r-1][1]+=i[r-1][0]=n,l&&(n-=c/l)}i[r-1][1]+=i[r-1][0]=n,Nm(t,e)}}var d5={},f5={},Gq;function G4e(){return Gq||(Gq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(f5)),f5}var h5={},Kq;function dae(){return Kq||(Kq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(h5)),h5}var p5={},Wq;function Sj(){return Wq||(Wq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){var r;return typeof n=="string"||typeof n=="symbol"?n:Object.is((r=n==null?void 0:n.valueOf)==null?void 0:r.call(n),-0)?"-0":String(n)}t.toKey=e})(p5)),p5}var m5={},g5={},Yq;function K4e(){return Yq||(Yq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(e).join(",");const r=String(n);return r==="0"&&Object.is(Number(n),-0)?"-0":r}t.toString=e})(g5)),g5}var Jq;function Aj(){return Jq||(Jq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=K4e(),n=Sj();function r(i){if(Array.isArray(i))return i.map(n.toKey);if(typeof i=="symbol")return[i];i=e.toString(i);const s=[],o=i.length;if(o===0)return s;let a=0,l="",c="",u=!1;for(i.charCodeAt(0)===46&&(s.push(""),a++);a<o;){const h=i[a];c?h==="\\"&&a+1<o?(a++,l+=i[a]):h===c?c="":l+=h:u?h==='"'||h==="'"?c=h:h==="]"?(u=!1,s.push(l),l=""):l+=h:h==="["?(u=!0,l&&(s.push(l),l="")):h==="."?l&&(s.push(l),l=""):l+=h,a++}return l&&s.push(l),s}t.toPath=r})(m5)),m5}var Xq;function Tj(){return Xq||(Xq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=G4e(),n=dae(),r=Sj(),i=Aj();function s(a,l,c){if(a==null)return c;switch(typeof l){case"string":{if(e.isUnsafeProperty(l))return c;const u=a[l];return u===void 0?n.isDeepKey(l)?s(a,i.toPath(l),c):c:u}case"number":case"symbol":{typeof l=="number"&&(l=r.toKey(l));const u=a[l];return u===void 0?c:u}default:{if(Array.isArray(l))return o(a,l,c);if(Object.is(l==null?void 0:l.valueOf(),-0)?l="-0":l=String(l),e.isUnsafeProperty(l))return c;const u=a[l];return u===void 0?c:u}}}function o(a,l,c){if(l.length===0)return c;let u=a;for(let h=0;h<l.length;h++){if(u==null||e.isUnsafeProperty(l[h]))return c;u=u[l[h]]}return u===void 0?c:u}t.get=s})(d5)),d5}var y5,Qq;function W4e(){return Qq||(Qq=1,y5=Tj().get),y5}var Y4e=W4e();const Cm=gs(Y4e);var J4e=4;function Zf(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:J4e,n=10**e,r=Math.round(t*n)/n;return Object.is(r,-0)?0:r}function Gr(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.reduce((i,s,o)=>{var a=n[o-1];return typeof a=="string"?i+a+s:a!==void 0?i+Zf(a)+s:i+s},"")}var zi=t=>t===0?0:t>0?1:-1,Za=t=>typeof t=="number"&&t!=+t,yd=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,kt=t=>(typeof t=="number"||t instanceof Number)&&!Za(t),Fc=t=>kt(t)||typeof t=="string",X4e=0,Yw=t=>{var e=++X4e;return"".concat(t||"").concat(e)},Us=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!kt(e)&&typeof e!="string")return r;var s;if(yd(e)){if(n==null)return r;var o=e.indexOf("%");s=n*parseFloat(e.slice(0,o))/100}else s=+e;return Za(s)&&(s=r),i&&n!=null&&s>n&&(s=n),s},fae=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},r=0;r<e;r++)if(!n[String(t[r])])n[String(t[r])]=!0;else return!0;return!1};function qn(t,e,n){return kt(t)&&kt(e)?Zf(t+n*(e-t)):e}function hae(t,e,n){if(!(!t||!t.length))return t.find(r=>r&&(typeof e=="function"?e(r):Cm(r,e))===n)}var Sr=t=>t===null||typeof t>"u",eE=t=>Sr(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function Q4e(t){return t!=null}function tE(){}var Z4e=["type","size","sizeType"];function UM(){return UM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},UM.apply(null,arguments)}function Zq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function eG(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Zq(Object(n),!0).forEach(function(r){e3e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Zq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function e3e(t,e,n){return(e=t3e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function t3e(t){var e=n3e(t,"string");return typeof e=="symbol"?e:e+""}function n3e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function r3e(t,e){if(t==null)return{};var n,r,i=i3e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function i3e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var pae={symbolCircle:Ej,symbolCross:x4e,symbolDiamond:b4e,symbolSquare:w4e,symbolStar:T4e,symbolTriangle:k4e,symbolWye:C4e},s3e=Math.PI/180,o3e=t=>{var e="symbol".concat(eE(t));return pae[e]||Ej},a3e=(t,e,n)=>{if(e==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var r=18*s3e;return 1.25*t*t*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},l3e=(t,e)=>{pae["symbol".concat(eE(t))]=e},mae=t=>{var{type:e="circle",size:n=64,sizeType:r="area"}=t,i=r3e(t,Z4e),s=eG(eG({},i),{},{type:e,size:n,sizeType:r}),o="circle";typeof e=="string"&&(o=e);var a=()=>{var m=o3e(o),g=P4e().type(m).size(a3e(n,r,o)),y=g();if(y!==null)return y},{className:l,cx:c,cy:u}=s,h=$s(s);return kt(c)&&kt(u)&&kt(n)?A.createElement("path",UM({},h,{className:Rn("recharts-symbols",l),transform:"translate(".concat(c,", ").concat(u,")"),d:a()})):null};mae.registerSymbol=l3e;var gae=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,kj=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(A.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{vj(i)&&(r[i]=(s=>n[i](n,s)))}),r},c3e=(t,e,n)=>r=>(t(e,n,r),null),WN=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var r=null;return Object.keys(t).forEach(i=>{var s=t[i];vj(i)&&typeof s=="function"&&(r||(r={}),r[i]=c3e(s,e,n))}),r};function tG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function u3e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tG(Object(n),!0).forEach(function(r){d3e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function d3e(t,e,n){return(e=f3e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f3e(t){var e=h3e(t,"string");return typeof e=="symbol"?e:e+""}function h3e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xi(t,e){var n=u3e({},t),r=e,i=Object.keys(e),s=i.reduce((o,a)=>(o[a]===void 0&&r[a]!==void 0&&(o[a]=r[a]),o),n);return s}var x5={},v5={},nG;function p3e(){return nG||(nG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){const i=new Map;for(let s=0;s<n.length;s++){const o=n[s],a=r(o);i.has(a)||i.set(a,o)}return Array.from(i.values())}t.uniqBy=e})(v5)),v5}var b5={},rG;function yae(){return rG||(rG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(b5)),b5}var w5={},E5={},S5={},iG;function m3e(){return iG||(iG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})(S5)),S5}var sG;function Nj(){return sG||(sG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=m3e();function n(r){return r!=null&&typeof r!="function"&&e.isLength(r.length)}t.isArrayLike=n})(E5)),E5}var A5={},oG;function g3e(){return oG||(oG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})(A5)),A5}var aG;function y3e(){return aG||(aG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Nj(),n=g3e();function r(i){return n.isObjectLike(i)&&e.isArrayLike(i)}t.isArrayLikeObject=r})(w5)),w5}var T5={},k5={},lG;function x3e(){return lG||(lG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Tj();function n(r){return function(i){return e.get(i,r)}}t.property=n})(k5)),k5}var N5={},C5={},P5={},_5={},cG;function xae(){return cG||(cG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(_5)),_5}var I5={},uG;function vae(){return uG||(uG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})(I5)),I5}var R5={},dG;function bae(){return dG||(dG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}t.eq=e})(R5)),R5}var fG;function v3e(){return fG||(fG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=xae(),n=vae(),r=bae();function i(u,h,m){return typeof m!="function"?i(u,h,()=>{}):s(u,h,function g(y,v,b,w,k,N){const R=m(y,v,b,w,k,N);return R!==void 0?!!R:s(y,v,g,N)},new Map)}function s(u,h,m,g){if(h===u)return!0;switch(typeof h){case"object":return o(u,h,m,g);case"function":return Object.keys(h).length>0?s(u,{...h},m,g):r.eq(u,h);default:return e.isObject(u)?typeof h=="string"?h==="":!0:r.eq(u,h)}}function o(u,h,m,g){if(h==null)return!0;if(Array.isArray(h))return l(u,h,m,g);if(h instanceof Map)return a(u,h,m,g);if(h instanceof Set)return c(u,h,m,g);const y=Object.keys(h);if(u==null||n.isPrimitive(u))return y.length===0;if(y.length===0)return!0;if(g!=null&&g.has(h))return g.get(h)===u;g==null||g.set(h,u);try{for(let v=0;v<y.length;v++){const b=y[v];if(!n.isPrimitive(u)&&!(b in u)||h[b]===void 0&&u[b]!==void 0||h[b]===null&&u[b]!==null||!m(u[b],h[b],b,u,h,g))return!1}return!0}finally{g==null||g.delete(h)}}function a(u,h,m,g){if(h.size===0)return!0;if(!(u instanceof Map))return!1;for(const[y,v]of h.entries()){const b=u.get(y);if(m(b,v,y,u,h,g)===!1)return!1}return!0}function l(u,h,m,g){if(h.length===0)return!0;if(!Array.isArray(u))return!1;const y=new Set;for(let v=0;v<h.length;v++){const b=h[v];let w=!1;for(let k=0;k<u.length;k++){if(y.has(k))continue;const N=u[k];let R=!1;if(m(N,b,v,u,h,g)&&(R=!0),R){y.add(k),w=!0;break}}if(!w)return!1}return!0}function c(u,h,m,g){return h.size===0?!0:u instanceof Set?l([...u],[...h],m,g):!1}t.isMatchWith=i,t.isSetMatch=c})(P5)),P5}var hG;function wae(){return hG||(hG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=v3e();function n(r,i){return e.isMatchWith(r,i,()=>{})}t.isMatch=n})(C5)),C5}var O5={},M5={},L5={},pG;function b3e(){return pG||(pG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}t.getSymbols=e})(L5)),L5}var D5={},mG;function Eae(){return mG||(mG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})(D5)),D5}var j5={},gG;function Sae(){return gG||(gG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",s="[object Arguments]",o="[object Symbol]",a="[object Date]",l="[object Map]",c="[object Set]",u="[object Array]",h="[object Function]",m="[object ArrayBuffer]",g="[object Object]",y="[object Error]",v="[object DataView]",b="[object Uint8Array]",w="[object Uint8ClampedArray]",k="[object Uint16Array]",N="[object Uint32Array]",R="[object BigUint64Array]",D="[object Int8Array]",O="[object Int16Array]",B="[object Int32Array]",z="[object BigInt64Array]",U="[object Float32Array]",$="[object Float64Array]";t.argumentsTag=s,t.arrayBufferTag=m,t.arrayTag=u,t.bigInt64ArrayTag=z,t.bigUint64ArrayTag=R,t.booleanTag=i,t.dataViewTag=v,t.dateTag=a,t.errorTag=y,t.float32ArrayTag=U,t.float64ArrayTag=$,t.functionTag=h,t.int16ArrayTag=O,t.int32ArrayTag=B,t.int8ArrayTag=D,t.mapTag=l,t.numberTag=r,t.objectTag=g,t.regexpTag=e,t.setTag=c,t.stringTag=n,t.symbolTag=o,t.uint16ArrayTag=k,t.uint32ArrayTag=N,t.uint8ArrayTag=b,t.uint8ClampedArrayTag=w})(j5)),j5}var B5={},yG;function w3e(){return yG||(yG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(B5)),B5}var xG;function Aae(){return xG||(xG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=b3e(),n=Eae(),r=Sae(),i=vae(),s=w3e();function o(u,h){return a(u,void 0,u,new Map,h)}function a(u,h,m,g=new Map,y=void 0){const v=y==null?void 0:y(u,h,m,g);if(v!==void 0)return v;if(i.isPrimitive(u))return u;if(g.has(u))return g.get(u);if(Array.isArray(u)){const b=new Array(u.length);g.set(u,b);for(let w=0;w<u.length;w++)b[w]=a(u[w],w,m,g,y);return Object.hasOwn(u,"index")&&(b.index=u.index),Object.hasOwn(u,"input")&&(b.input=u.input),b}if(u instanceof Date)return new Date(u.getTime());if(u instanceof RegExp){const b=new RegExp(u.source,u.flags);return b.lastIndex=u.lastIndex,b}if(u instanceof Map){const b=new Map;g.set(u,b);for(const[w,k]of u)b.set(w,a(k,w,m,g,y));return b}if(u instanceof Set){const b=new Set;g.set(u,b);for(const w of u)b.add(a(w,void 0,m,g,y));return b}if(typeof ln<"u"&&ln.isBuffer(u))return u.subarray();if(s.isTypedArray(u)){const b=new(Object.getPrototypeOf(u)).constructor(u.length);g.set(u,b);for(let w=0;w<u.length;w++)b[w]=a(u[w],w,m,g,y);return b}if(u instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&u instanceof SharedArrayBuffer)return u.slice(0);if(u instanceof DataView){const b=new DataView(u.buffer.slice(0),u.byteOffset,u.byteLength);return g.set(u,b),l(b,u,m,g,y),b}if(typeof File<"u"&&u instanceof File){const b=new File([u],u.name,{type:u.type});return g.set(u,b),l(b,u,m,g,y),b}if(typeof Blob<"u"&&u instanceof Blob){const b=new Blob([u],{type:u.type});return g.set(u,b),l(b,u,m,g,y),b}if(u instanceof Error){const b=new u.constructor;return g.set(u,b),b.message=u.message,b.name=u.name,b.stack=u.stack,b.cause=u.cause,l(b,u,m,g,y),b}if(u instanceof Boolean){const b=new Boolean(u.valueOf());return g.set(u,b),l(b,u,m,g,y),b}if(u instanceof Number){const b=new Number(u.valueOf());return g.set(u,b),l(b,u,m,g,y),b}if(u instanceof String){const b=new String(u.valueOf());return g.set(u,b),l(b,u,m,g,y),b}if(typeof u=="object"&&c(u)){const b=Object.create(Object.getPrototypeOf(u));return g.set(u,b),l(b,u,m,g,y),b}return u}function l(u,h,m=u,g,y){const v=[...Object.keys(h),...e.getSymbols(h)];for(let b=0;b<v.length;b++){const w=v[b],k=Object.getOwnPropertyDescriptor(u,w);(k==null||k.writable)&&(u[w]=a(h[w],w,m,g,y))}}function c(u){switch(n.getTag(u)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=o,t.cloneDeepWithImpl=a,t.copyProperties=l})(M5)),M5}var vG;function E3e(){return vG||(vG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Aae();function n(r){return e.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}t.cloneDeep=n})(O5)),O5}var bG;function S3e(){return bG||(bG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=wae(),n=E3e();function r(i){return i=n.cloneDeep(i),s=>e.isMatch(s,i)}t.matches=r})(N5)),N5}var U5={},F5={},$5={},wG;function A3e(){return wG||(wG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Aae(),n=Sae();function r(i,s){return e.cloneDeepWith(i,(o,a,l,c)=>{const u=s==null?void 0:s(o,a,l,c);if(u!==void 0)return u;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const h=new i.constructor(i==null?void 0:i.valueOf());return e.copyProperties(h,i),h}case n.argumentsTag:{const h={};return e.copyProperties(h,i),h.length=i.length,h[Symbol.iterator]=i[Symbol.iterator],h}default:return}})}t.cloneDeepWith=r})($5)),$5}var EG;function T3e(){return EG||(EG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=A3e();function n(r){return e.cloneDeepWith(r)}t.cloneDeep=n})(F5)),F5}var z5={},V5={},SG;function Tae(){return SG||(SG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return e.test(r)}}t.isIndex=n})(V5)),V5}var H5={},AG;function k3e(){return AG||(AG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Eae();function n(r){return r!==null&&typeof r=="object"&&e.getTag(r)==="[object Arguments]"}t.isArguments=n})(H5)),H5}var TG;function N3e(){return TG||(TG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=dae(),n=Tae(),r=k3e(),i=Aj();function s(o,a){let l;if(Array.isArray(a)?l=a:typeof a=="string"&&e.isDeepKey(a)&&(o==null?void 0:o[a])==null?l=i.toPath(a):l=[a],l.length===0)return!1;let c=o;for(let u=0;u<l.length;u++){const h=l[u];if((c==null||!Object.hasOwn(c,h))&&!((Array.isArray(c)||r.isArguments(c))&&n.isIndex(h)&&h<c.length))return!1;c=c[h]}return!0}t.has=s})(z5)),z5}var kG;function C3e(){return kG||(kG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=wae(),n=Sj(),r=T3e(),i=Tj(),s=N3e();function o(a,l){switch(typeof a){case"object":{Object.is(a==null?void 0:a.valueOf(),-0)&&(a="-0");break}case"number":{a=n.toKey(a);break}}return l=r.cloneDeep(l),function(c){const u=i.get(c,a);return u===void 0?s.has(c,a):l===void 0?u===void 0:e.isMatch(u,l)}}t.matchesProperty=o})(U5)),U5}var NG;function P3e(){return NG||(NG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=yae(),n=x3e(),r=S3e(),i=C3e();function s(o){if(o==null)return e.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?i.matchesProperty(o[0],o[1]):r.matches(o);case"string":case"symbol":case"number":return n.property(o)}}t.iteratee=s})(T5)),T5}var CG;function _3e(){return CG||(CG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=p3e(),n=yae(),r=y3e(),i=P3e();function s(o,a=n.identity){return r.isArrayLikeObject(o)?e.uniqBy(Array.from(o),i.iteratee(a)):[]}t.uniqBy=s})(x5)),x5}var q5,PG;function I3e(){return PG||(PG=1,q5=_3e().uniqBy),q5}var R3e=I3e();const _G=gs(R3e);function O3e(t,e,n){return e===!0?_G(t,n):typeof e=="function"?_G(t,e):t}var G5={exports:{}},K5={},W5={exports:{}},Y5={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IG;function M3e(){if(IG)return Y5;IG=1;var t=Fx();function e(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function a(h,m){var g=m(),y=r({inst:{value:g,getSnapshot:m}}),v=y[0].inst,b=y[1];return s(function(){v.value=g,v.getSnapshot=m,l(v)&&b({inst:v})},[h,g,m]),i(function(){return l(v)&&b({inst:v}),h(function(){l(v)&&b({inst:v})})},[h]),o(g),g}function l(h){var m=h.getSnapshot;h=h.value;try{var g=m();return!n(h,g)}catch{return!0}}function c(h,m){return m()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return Y5.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:u,Y5}var RG;function L3e(){return RG||(RG=1,W5.exports=M3e()),W5.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OG;function D3e(){if(OG)return K5;OG=1;var t=Fx(),e=L3e();function n(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,a=t.useMemo,l=t.useDebugValue;return K5.useSyncExternalStoreWithSelector=function(c,u,h,m,g){var y=s(null);if(y.current===null){var v={hasValue:!1,value:null};y.current=v}else v=y.current;y=a(function(){function w(O){if(!k){if(k=!0,N=O,O=m(O),g!==void 0&&v.hasValue){var B=v.value;if(g(B,O))return R=B}return R=O}if(B=R,r(N,O))return B;var z=m(O);return g!==void 0&&g(B,z)?(N=O,B):(N=O,R=z)}var k=!1,N,R,D=h===void 0?null:h;return[function(){return w(u())},D===null?void 0:function(){return w(D())}]},[u,h,m,g]);var b=i(c,y[0],y[1]);return o(function(){v.hasValue=!0,v.value=b},[b]),l(b),b},K5}var MG;function j3e(){return MG||(MG=1,G5.exports=D3e()),G5.exports}var B3e=j3e(),Cj=A.createContext(null),U3e=t=>t,_r=()=>{var t=A.useContext(Cj);return t?t.store.dispatch:U3e},IT=()=>{},F3e=()=>IT,$3e=(t,e)=>t===e;function Lt(t){var e=A.useContext(Cj);return B3e.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:F3e,e?e.store.getState:IT,e?e.store.getState:IT,e?t:IT,$3e)}function z3e(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function V3e(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function H3e(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var LG=t=>Array.isArray(t)?t:[t];function q3e(t){const e=Array.isArray(t[0])?t[0]:t;return H3e(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function G3e(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}var K3e=class{constructor(t){this.value=t}deref(){return this.value}},W3e=typeof WeakRef<"u"?WeakRef:K3e,Y3e=0,DG=1;function EA(){return{s:Y3e,v:void 0,o:null,p:null}}function kae(t,e={}){let n=EA();const{resultEqualityCheck:r}=e;let i,s=0;function o(){var h;let a=n;const{length:l}=arguments;for(let m=0,g=l;m<g;m++){const y=arguments[m];if(typeof y=="function"||typeof y=="object"&&y!==null){let v=a.o;v===null&&(a.o=v=new WeakMap);const b=v.get(y);b===void 0?(a=EA(),v.set(y,a)):a=b}else{let v=a.p;v===null&&(a.p=v=new Map);const b=v.get(y);b===void 0?(a=EA(),v.set(y,a)):a=b}}const c=a;let u;if(a.s===DG)u=a.v;else if(u=t.apply(null,arguments),s++,r){const m=((h=i==null?void 0:i.deref)==null?void 0:h.call(i))??i;m!=null&&r(m,u)&&(u=m,s!==0&&s--),i=typeof u=="object"&&u!==null||typeof u=="function"?new W3e(u):u}return c.s=DG,c.v=u,u}return o.clearCache=()=>{n=EA(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function J3e(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let s=0,o=0,a,l={},c=i.pop();typeof c=="object"&&(l=c,c=i.pop()),z3e(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);const u={...n,...l},{memoize:h,memoizeOptions:m=[],argsMemoize:g=kae,argsMemoizeOptions:y=[]}=u,v=LG(m),b=LG(y),w=q3e(i),k=h(function(){return s++,c.apply(null,arguments)},...v),N=g(function(){o++;const D=G3e(w,arguments);return a=k.apply(null,D),a},...b);return Object.assign(N,{resultFunc:c,memoizedResultFunc:k,dependencies:w,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:h,argsMemoize:g})};return Object.assign(r,{withTypes:()=>r}),r}var je=J3e(kae),X3e=Object.assign((t,e=je)=>{V3e(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(s=>t[s]);return e(r,(...s)=>s.reduce((o,a,l)=>(o[n[l]]=a,o),{}))},{withTypes:()=>X3e}),J5={},X5={},Q5={},jG;function Q3e(){return jG||(jG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,s)=>{if(r!==i){const o=e(r),a=e(i);if(o===a&&o===0){if(r<i)return s==="desc"?1:-1;if(r>i)return s==="desc"?-1:1}return s==="desc"?a-o:o-a}return 0};t.compareValues=n})(Q5)),Q5}var Z5={},eO={},BG;function Nae(){return BG||(BG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(eO)),eO}var UG;function Z3e(){return UG||(UG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Nae(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,o){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||e.isSymbol(s)?!0:typeof s=="string"&&(r.test(s)||!n.test(s))||o!=null&&Object.hasOwn(o,s)}t.isKey=i})(Z5)),Z5}var FG;function eMe(){return FG||(FG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Q3e(),n=Z3e(),r=Aj();function i(s,o,a,l){if(s==null)return[];a=l?void 0:a,Array.isArray(s)||(s=Object.values(s)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(a)||(a=a==null?[]:[a]),a=a.map(g=>String(g));const c=(g,y)=>{let v=g;for(let b=0;b<y.length&&v!=null;++b)v=v[y[b]];return v},u=(g,y)=>y==null||g==null?y:typeof g=="object"&&"key"in g?Object.hasOwn(y,g.key)?y[g.key]:c(y,g.path):typeof g=="function"?g(y):Array.isArray(g)?c(y,g):typeof y=="object"?y[g]:y,h=o.map(g=>(Array.isArray(g)&&g.length===1&&(g=g[0]),g==null||typeof g=="function"||Array.isArray(g)||n.isKey(g)?g:{key:g,path:r.toPath(g)}));return s.map(g=>({original:g,criteria:h.map(y=>u(y,g))})).slice().sort((g,y)=>{for(let v=0;v<h.length;v++){const b=e.compareValues(g.criteria[v],y.criteria[v],a[v]);if(b!==0)return b}return 0}).map(g=>g.original)}t.orderBy=i})(X5)),X5}var tO={},$G;function tMe(){return $G||($G=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r=1){const i=[],s=Math.floor(r),o=(a,l)=>{for(let c=0;c<a.length;c++){const u=a[c];Array.isArray(u)&&l<s?o(u,l+1):i.push(u)}};return o(n,0),i}t.flatten=e})(tO)),tO}var nO={},zG;function Cae(){return zG||(zG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Tae(),n=Nj(),r=xae(),i=bae();function s(o,a,l){return r.isObject(l)&&(typeof a=="number"&&n.isArrayLike(l)&&e.isIndex(a)&&a<l.length||typeof a=="string"&&a in l)?i.eq(l[a],o):!1}t.isIterateeCall=s})(nO)),nO}var VG;function nMe(){return VG||(VG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=eMe(),n=tMe(),r=Cae();function i(s,...o){const a=o.length;return a>1&&r.isIterateeCall(s,o[0],o[1])?o=[]:a>2&&r.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),e.orderBy(s,n.flatten(o),["asc"])}t.sortBy=i})(J5)),J5}var rO,HG;function rMe(){return HG||(HG=1,rO=nMe().sortBy),rO}var iMe=rMe();const YN=gs(iMe);var Pae=t=>t.legend.settings,sMe=t=>t.legend.size,oMe=t=>t.legend.payload;je([oMe,Pae],(t,e)=>{var{itemSorter:n}=e,r=t.flat(1);return n?YN(r,n):r});var SA=1;function aMe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=A.useState({height:0,left:0,top:0,width:0}),r=A.useCallback(i=>{if(i!=null){var s=i.getBoundingClientRect(),o={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(o.height-e.height)>SA||Math.abs(o.left-e.left)>SA||Math.abs(o.top-e.top)>SA||Math.abs(o.width-e.width)>SA)&&n({height:o.height,left:o.left,top:o.top,width:o.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,r]}function rs(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var lMe=typeof Symbol=="function"&&Symbol.observable||"@@observable",qG=lMe,iO=()=>Math.random().toString(36).substring(7).split("").join("."),cMe={INIT:`@@redux/INIT${iO()}`,REPLACE:`@@redux/REPLACE${iO()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${iO()}`},Ik=cMe;function Pj(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function _ae(t,e,n){if(typeof t!="function")throw new Error(rs(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(rs(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(rs(1));return n(_ae)(t,e)}let r=t,i=e,s=new Map,o=s,a=0,l=!1;function c(){o===s&&(o=new Map,s.forEach((b,w)=>{o.set(w,b)}))}function u(){if(l)throw new Error(rs(3));return i}function h(b){if(typeof b!="function")throw new Error(rs(4));if(l)throw new Error(rs(5));let w=!0;c();const k=a++;return o.set(k,b),function(){if(w){if(l)throw new Error(rs(6));w=!1,c(),o.delete(k),s=null}}}function m(b){if(!Pj(b))throw new Error(rs(7));if(typeof b.type>"u")throw new Error(rs(8));if(typeof b.type!="string")throw new Error(rs(17));if(l)throw new Error(rs(9));try{l=!0,i=r(i,b)}finally{l=!1}return(s=o).forEach(k=>{k()}),b}function g(b){if(typeof b!="function")throw new Error(rs(10));r=b,m({type:Ik.REPLACE})}function y(){const b=h;return{subscribe(w){if(typeof w!="object"||w===null)throw new Error(rs(11));function k(){const R=w;R.next&&R.next(u())}return k(),{unsubscribe:b(k)}},[qG](){return this}}}return m({type:Ik.INIT}),{dispatch:m,subscribe:h,getState:u,replaceReducer:g,[qG]:y}}function uMe(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:Ik.INIT})>"u")throw new Error(rs(12));if(typeof n(void 0,{type:Ik.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(rs(13))})}function Iae(t){const e=Object.keys(t),n={};for(let s=0;s<e.length;s++){const o=e[s];typeof t[o]=="function"&&(n[o]=t[o])}const r=Object.keys(n);let i;try{uMe(n)}catch(s){i=s}return function(o={},a){if(i)throw i;let l=!1;const c={};for(let u=0;u<r.length;u++){const h=r[u],m=n[h],g=o[h],y=m(g,a);if(typeof y>"u")throw a&&a.type,new Error(rs(14));c[h]=y,l=l||y!==g}return l=l||r.length!==Object.keys(o).length,l?c:o}}function Rk(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function dMe(...t){return e=>(n,r)=>{const i=e(n,r);let s=()=>{throw new Error(rs(15))};const o={getState:i.getState,dispatch:(l,...c)=>s(l,...c)},a=t.map(l=>l(o));return s=Rk(...a)(i.dispatch),{...i,dispatch:s}}}function Rae(t){return Pj(t)&&"type"in t&&typeof t.type=="string"}var Oae=Symbol.for("immer-nothing"),GG=Symbol.for("immer-draftable"),io=Symbol.for("immer-state");function Il(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var na=Object,Nx=na.getPrototypeOf,Ok="constructor",JN="prototype",FM="configurable",Mk="enumerable",RT="writable",Jw="value",xd=t=>!!t&&!!t[io];function ql(t){var e;return t?Mae(t)||XN(t)||!!t[GG]||!!((e=t[Ok])!=null&&e[GG])||QN(t)||ZN(t):!1}var fMe=na[JN][Ok].toString(),KG=new WeakMap;function Mae(t){if(!t||!_j(t))return!1;const e=Nx(t);if(e===null||e===na[JN])return!0;const n=na.hasOwnProperty.call(e,Ok)&&e[Ok];if(n===Object)return!0;if(!Sg(n))return!1;let r=KG.get(n);return r===void 0&&(r=Function.toString.call(n),KG.set(n,r)),r===fMe}function nE(t,e,n=!0){rE(t)===0?(n?Reflect.ownKeys(t):na.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function rE(t){const e=t[io];return e?e.type_:XN(t)?1:QN(t)?2:ZN(t)?3:0}var WG=(t,e,n=rE(t))=>n===2?t.has(e):na[JN].hasOwnProperty.call(t,e),$M=(t,e,n=rE(t))=>n===2?t.get(e):t[e],Lk=(t,e,n,r=rE(t))=>{r===2?t.set(e,n):r===3?t.add(n):t[e]=n};function hMe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var XN=Array.isArray,QN=t=>t instanceof Map,ZN=t=>t instanceof Set,_j=t=>typeof t=="object",Sg=t=>typeof t=="function",sO=t=>typeof t=="boolean";function pMe(t){const e=+t;return Number.isInteger(e)&&String(e)===t}var _u=t=>t.copy_||t.base_,Ij=t=>t.modified_?t.copy_:t.base_;function zM(t,e){if(QN(t))return new Map(t);if(ZN(t))return new Set(t);if(XN(t))return Array[JN].slice.call(t);const n=Mae(t);if(e===!0||e==="class_only"&&!n){const r=na.getOwnPropertyDescriptors(t);delete r[io];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a[RT]===!1&&(a[RT]=!0,a[FM]=!0),(a.get||a.set)&&(r[o]={[FM]:!0,[RT]:!0,[Mk]:a[Mk],[Jw]:t[o]})}return na.create(Nx(t),r)}else{const r=Nx(t);if(r!==null&&n)return{...t};const i=na.create(r);return na.assign(i,t)}}function Rj(t,e=!1){return eC(t)||xd(t)||!ql(t)||(rE(t)>1&&na.defineProperties(t,{set:AA,add:AA,clear:AA,delete:AA}),na.freeze(t),e&&nE(t,(n,r)=>{Rj(r,!0)},!1)),t}function mMe(){Il(2)}var AA={[Jw]:mMe};function eC(t){return t===null||!_j(t)?!0:na.isFrozen(t)}var Dk="MapSet",VM="Patches",YG="ArrayMethods",Lae={};function Pm(t){const e=Lae[t];return e||Il(0,t),e}var JG=t=>!!Lae[t],Xw,Dae=()=>Xw,gMe=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:JG(Dk)?Pm(Dk):void 0,arrayMethodsPlugin_:JG(YG)?Pm(YG):void 0});function XG(t,e){e&&(t.patchPlugin_=Pm(VM),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function HM(t){qM(t),t.drafts_.forEach(yMe),t.drafts_=null}function qM(t){t===Xw&&(Xw=t.parent_)}var QG=t=>Xw=gMe(Xw,t);function yMe(t){const e=t[io];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function ZG(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];if(t!==void 0&&t!==n){n[io].modified_&&(HM(e),Il(4)),ql(t)&&(t=eK(e,t));const{patchPlugin_:i}=e;i&&i.generateReplacementPatches_(n[io].base_,t,e)}else t=eK(e,n);return xMe(e,t,!0),HM(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==Oae?t:void 0}function eK(t,e){if(eC(e))return e;const n=e[io];if(!n)return Oj(e,t.handledSet_,t);if(!tC(n,t))return e;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(t);Uae(n,t)}return n.copy_}function xMe(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&Rj(e,n)}function jae(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var tC=(t,e)=>t.scope_===e,vMe=[];function Bae(t,e,n,r){const i=_u(t),s=t.type_;if(r!==void 0&&$M(i,r,s)===e){Lk(i,r,n,s);return}if(!t.draftLocations_){const a=t.draftLocations_=new Map;nE(i,(l,c)=>{if(xd(c)){const u=a.get(c)||[];u.push(l),a.set(c,u)}})}const o=t.draftLocations_.get(e)??vMe;for(const a of o)Lk(i,a,n,s)}function bMe(t,e,n){t.callbacks_.push(function(i){var a;const s=e;if(!s||!tC(s,i))return;(a=i.mapSetPlugin_)==null||a.fixSetContents(s);const o=Ij(s);Bae(t,s.draft_??s,o,n),Uae(s,i)})}function Uae(t,e){var r;if(t.modified_&&!t.finalized_&&(t.type_===3||t.type_===1&&t.allIndicesReassigned_||(((r=t.assigned_)==null?void 0:r.size)??0)>0)){const{patchPlugin_:i}=e;if(i){const s=i.getPath(t);s&&i.generatePatches_(t,s,e)}jae(t)}}function wMe(t,e,n){const{scope_:r}=t;if(xd(n)){const i=n[io];tC(i,r)&&i.callbacks_.push(function(){OT(t);const o=Ij(i);Bae(t,n,o,e)})}else ql(n)&&t.callbacks_.push(function(){const s=_u(t);$M(s,e,t.type_)===n&&r.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&Oj($M(t.copy_,e,t.type_),r.handledSet_,r)})}function Oj(t,e,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||xd(t)||e.has(t)||!ql(t)||eC(t)||(e.add(t),nE(t,(r,i)=>{if(xd(i)){const s=i[io];if(tC(s,n)){const o=Ij(s);Lk(t,r,o,t.type_),jae(s)}}else ql(i)&&Oj(i,e,n)})),t}function EMe(t,e){const n=XN(t),r={type_:n?1:0,scope_:e?e.scope_:Dae(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=r,s=Mj;n&&(i=[r],s=Qw);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,[a,r]}var Mj={get(t,e){if(e===io)return t;let n=t.scope_.arrayMethodsPlugin_;const r=t.type_===1&&typeof e=="string";if(r&&n!=null&&n.isArrayOperationMethod(e))return n.createMethodInterceptor(t,e);const i=_u(t);if(!WG(i,e,t.type_))return SMe(t,i,e);const s=i[e];if(t.finalized_||!ql(s)||r&&t.operationMethod&&(n!=null&&n.isMutatingArrayMethod(t.operationMethod))&&pMe(e))return s;if(s===oO(t.base_,e)){OT(t);const o=t.type_===1?+e:e,a=KM(t.scope_,s,t,o);return t.copy_[o]=a}return s},has(t,e){return e in _u(t)},ownKeys(t){return Reflect.ownKeys(_u(t))},set(t,e,n){const r=Fae(_u(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=oO(_u(t),e),s=i==null?void 0:i[io];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_.set(e,!1),!0;if(hMe(n,i)&&(n!==void 0||WG(t.base_,e,t.type_)))return!0;OT(t),GM(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_.set(e,!0),wMe(t,e,n)),!0},deleteProperty(t,e){return OT(t),oO(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),GM(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=_u(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{[RT]:!0,[FM]:t.type_!==1||e!=="length",[Mk]:r[Mk],[Jw]:n[e]}},defineProperty(){Il(11)},getPrototypeOf(t){return Nx(t.base_)},setPrototypeOf(){Il(12)}},Qw={};nE(Mj,(t,e)=>{Qw[t]=function(){const n=arguments;return n[0]=n[0][0],e.apply(this,n)}});Qw.deleteProperty=function(t,e){return Qw.set.call(this,t,e,void 0)};Qw.set=function(t,e,n){return Mj.set.call(this,t[0],e,n,t[0])};function oO(t,e){const n=t[io];return(n?_u(n):t)[e]}function SMe(t,e,n){var i;const r=Fae(e,n);return r?Jw in r?r[Jw]:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function Fae(t,e){if(!(e in t))return;let n=Nx(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Nx(n)}}function GM(t){t.modified_||(t.modified_=!0,t.parent_&&GM(t.parent_))}function OT(t){t.copy_||(t.assigned_=new Map,t.copy_=zM(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var AMe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,r,i)=>{if(Sg(n)&&!Sg(r)){const o=r;r=n;const a=this;return function(c=o,...u){return a.produce(c,h=>r.call(this,h,...u))}}Sg(r)||Il(6),i!==void 0&&!Sg(i)&&Il(7);let s;if(ql(n)){const o=QG(this),a=KM(o,n,void 0);let l=!0;try{s=r(a),l=!1}finally{l?HM(o):qM(o)}return XG(o,i),ZG(s,o)}else if(!n||!_j(n)){if(s=r(n),s===void 0&&(s=n),s===Oae&&(s=void 0),this.autoFreeze_&&Rj(s,!0),i){const o=[],a=[];Pm(VM).generateReplacementPatches_(n,s,{patches_:o,inversePatches_:a}),i(o,a)}return s}else Il(1,n)},this.produceWithPatches=(n,r)=>{if(Sg(n))return(a,...l)=>this.produceWithPatches(a,c=>n(c,...l));let i,s;return[this.produce(n,r,(a,l)=>{i=a,s=l}),i,s]},sO(e==null?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),sO(e==null?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),sO(e==null?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){ql(e)||Il(8),xd(e)&&(e=jl(e));const n=QG(this),r=KM(n,e,void 0);return r[io].isManual_=!0,qM(n),r}finishDraft(e,n){const r=e&&e[io];(!r||!r.isManual_)&&Il(9);const{scope_:i}=r;return XG(i,n),ZG(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,n){let r;for(r=n.length-1;r>=0;r--){const s=n[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(n=n.slice(r+1));const i=Pm(VM).applyPatches_;return xd(e)?i(e,n):this.produce(e,s=>i(s,n))}};function KM(t,e,n,r){const[i,s]=QN(e)?Pm(Dk).proxyMap_(e,n):ZN(e)?Pm(Dk).proxySet_(e,n):EMe(e,n);return((n==null?void 0:n.scope_)??Dae()).drafts_.push(i),s.callbacks_=(n==null?void 0:n.callbacks_)??[],s.key_=r,n&&r!==void 0?bMe(n,s,r):s.callbacks_.push(function(l){var u;(u=l.mapSetPlugin_)==null||u.fixSetContents(s);const{patchPlugin_:c}=l;s.modified_&&c&&c.generatePatches_(s,[],l)}),i}function jl(t){return xd(t)||Il(10,t),$ae(t)}function $ae(t){if(!ql(t)||eC(t))return t;const e=t[io];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=zM(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=zM(t,!0);return nE(n,(i,s)=>{Lk(n,i,$ae(s))},r),e&&(e.finalized_=!1),n}var TMe=new AMe,zae=TMe.produce;function Vae(t){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,t):i(s)}var kMe=Vae(),NMe=Vae,CMe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Rk:Rk.apply(null,arguments)};function el(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(ia(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>Rae(r)&&r.type===t,n}var Hae=class Qb extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Qb.prototype)}static get[Symbol.species](){return Qb}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Qb(...e[0].concat(this)):new Qb(...e.concat(this))}};function tK(t){return ql(t)?zae(t,()=>{}):t}function TA(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function PMe(t){return typeof t=="boolean"}var _Me=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=e??{};let o=new Hae;return n&&(PMe(n)?o.push(kMe):o.push(NMe(n.extraArgument))),o},qae="RTK_autoBatch",kr=()=>t=>({payload:t,meta:{[qae]:!0}}),nK=t=>e=>{setTimeout(e,t)},Gae=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,s=!1,o=!1;const a=new Set,l=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:nK(10):t.type==="callback"?t.queueNotification:nK(t.timeout),c=()=>{o=!1,s&&(s=!1,a.forEach(u=>u()))};return Object.assign({},r,{subscribe(u){const h=()=>i&&u(),m=r.subscribe(h);return a.add(u),()=>{m(),a.delete(u)}},dispatch(u){var h;try{return i=!((h=u==null?void 0:u.meta)!=null&&h[qae]),s=!i,s&&(o||(o=!0,l(c))),r.dispatch(u)}finally{i=!0}}})},IMe=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new Hae(t);return r&&i.push(Gae(typeof r=="object"?r:void 0)),i};function RMe(t){const e=_Me(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=t||{};let a;if(typeof n=="function")a=n;else if(Pj(n))a=Iae(n);else throw new Error(ia(1));let l;typeof r=="function"?l=r(e):l=e();let c=Rk;i&&(c=CMe({trace:!1,...typeof i=="object"&&i}));const u=dMe(...l),h=IMe(u);let m=typeof o=="function"?o(h):h();const g=c(...m);return _ae(a,s,g)}function Kae(t){const e={},n=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(ia(28));if(a in e)throw new Error(ia(29));return e[a]=o,i},addAsyncThunk(s,o){return o.pending&&(e[s.pending.type]=o.pending),o.rejected&&(e[s.rejected.type]=o.rejected),o.fulfilled&&(e[s.fulfilled.type]=o.fulfilled),o.settled&&n.push({matcher:s.settled,reducer:o.settled}),i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return t(i),[e,n,r]}function OMe(t){return typeof t=="function"}function MMe(t,e){let[n,r,i]=Kae(e),s;if(OMe(t))s=()=>tK(t());else{const a=tK(t);s=()=>a}function o(a=s(),l){let c=[n[l.type],...r.filter(({matcher:u})=>u(l)).map(({reducer:u})=>u)];return c.filter(u=>!!u).length===0&&(c=[i]),c.reduce((u,h)=>{if(h)if(xd(u)){const g=h(u,l);return g===void 0?u:g}else{if(ql(u))return zae(u,m=>h(m,l));{const m=h(u,l);if(m===void 0){if(u===null)return u;throw Error("A case reducer on a non-draftable value must not return undefined")}return m}}return u},a)}return o.getInitialState=s,o}var LMe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",DMe=(t=21)=>{let e="",n=t;for(;n--;)e+=LMe[Math.random()*64|0];return e},jMe=Symbol.for("rtk-slice-createasyncthunk");function BMe(t,e){return`${t}/${e}`}function UMe({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[jMe];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(ia(11));const a=(typeof i.reducers=="function"?i.reducers($Me()):i.reducers)||{},l=Object.keys(a),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(R,D){const O=typeof R=="string"?R:R.type;if(!O)throw new Error(ia(12));if(O in c.sliceCaseReducersByType)throw new Error(ia(13));return c.sliceCaseReducersByType[O]=D,u},addMatcher(R,D){return c.sliceMatchers.push({matcher:R,reducer:D}),u},exposeAction(R,D){return c.actionCreators[R]=D,u},exposeCaseReducer(R,D){return c.sliceCaseReducersByName[R]=D,u}};l.forEach(R=>{const D=a[R],O={reducerName:R,type:BMe(s,R),createNotation:typeof i.reducers=="function"};VMe(D)?qMe(O,D,u,e):zMe(O,D,u)});function h(){const[R={},D=[],O=void 0]=typeof i.extraReducers=="function"?Kae(i.extraReducers):[i.extraReducers],B={...R,...c.sliceCaseReducersByType};return MMe(i.initialState,z=>{for(let U in B)z.addCase(U,B[U]);for(let U of c.sliceMatchers)z.addMatcher(U.matcher,U.reducer);for(let U of D)z.addMatcher(U.matcher,U.reducer);O&&z.addDefaultCase(O)})}const m=R=>R,g=new Map,y=new WeakMap;let v;function b(R,D){return v||(v=h()),v(R,D)}function w(){return v||(v=h()),v.getInitialState()}function k(R,D=!1){function O(z){let U=z[R];return typeof U>"u"&&D&&(U=TA(y,O,w)),U}function B(z=m){const U=TA(g,D,()=>new WeakMap);return TA(U,z,()=>{const $={};for(const[W,H]of Object.entries(i.selectors??{}))$[W]=FMe(H,z,()=>TA(y,z,w),D);return $})}return{reducerPath:R,getSelectors:B,get selectors(){return B(O)},selectSlice:O}}const N={name:s,reducer:b,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:w,...k(o),injectInto(R,{reducerPath:D,...O}={}){const B=D??o;return R.inject({reducerPath:B,reducer:b},O),{...N,...k(B,!0)}}};return N}}function FMe(t,e,n,r){function i(s,...o){let a=e(s);return typeof a>"u"&&r&&(a=n()),t(a,...o)}return i.unwrapped=t,i}var Co=UMe();function $Me(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function zMe({type:t,reducerName:e,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!HMe(r))throw new Error(ia(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(t,s).exposeCaseReducer(e,s).exposeAction(e,o?el(t,o):el(t))}function VMe(t){return t._reducerDefinitionType==="asyncThunk"}function HMe(t){return t._reducerDefinitionType==="reducerWithPrepare"}function qMe({type:t,reducerName:e},n,r,i){if(!i)throw new Error(ia(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:l,settled:c,options:u}=n,h=i(t,s,u);r.exposeAction(e,h),o&&r.addCase(h.fulfilled,o),a&&r.addCase(h.pending,a),l&&r.addCase(h.rejected,l),c&&r.addMatcher(h.settled,c),r.exposeCaseReducer(e,{fulfilled:o||kA,pending:a||kA,rejected:l||kA,settled:c||kA})}function kA(){}var GMe="task",Wae="listener",Yae="completed",Lj="cancelled",KMe=`task-${Lj}`,WMe=`task-${Yae}`,WM=`${Wae}-${Lj}`,YMe=`${Wae}-${Yae}`,nC=class{constructor(t){Ce(this,"name","TaskAbortError");Ce(this,"message");this.code=t,this.message=`${GMe} ${Lj} (reason: ${t})`}},Dj=(t,e)=>{if(typeof t!="function")throw new TypeError(ia(32))},jk=()=>{},Jae=(t,e=jk)=>(t.catch(e),t),Xae=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),fm=t=>{if(t.aborted)throw new nC(t.reason)};function Qae(t,e){let n=jk;return new Promise((r,i)=>{const s=()=>i(new nC(t.reason));if(t.aborted){s();return}n=Xae(t,s),e.finally(()=>n()).then(r,i)}).finally(()=>{n=jk})}var JMe=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof nC?"cancelled":"rejected",error:n}}finally{e==null||e()}},Bk=t=>e=>Jae(Qae(t,e).then(n=>(fm(t),n))),Zae=t=>{const e=Bk(t);return n=>e(new Promise(r=>setTimeout(r,n)))},{assign:ay}=Object,rK={},rC="listenerMiddleware",XMe=(t,e)=>{const n=r=>Xae(t,()=>r.abort(t.reason));return(r,i)=>{Dj(r);const s=new AbortController;n(s);const o=JMe(async()=>{fm(t),fm(s.signal);const a=await r({pause:Bk(s.signal),delay:Zae(s.signal),signal:s.signal});return fm(s.signal),a},()=>s.abort(WMe));return i!=null&&i.autoJoin&&e.push(o.catch(jk)),{result:Bk(t)(o),cancel(){s.abort(KMe)}}}},QMe=(t,e)=>{const n=async(r,i)=>{fm(e);let s=()=>{};const a=[new Promise((l,c)=>{let u=t({predicate:r,effect:(h,m)=>{m.unsubscribe(),l([h,m.getState(),m.getOriginalState()])}});s=()=>{u(),c()}})];i!=null&&a.push(new Promise(l=>setTimeout(l,i,null)));try{const l=await Qae(e,Promise.race(a));return fm(e),l}finally{s()}};return(r,i)=>Jae(n(r,i))},ele=t=>{let{type:e,actionCreator:n,matcher:r,predicate:i,effect:s}=t;if(e)i=el(e).match;else if(n)e=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(ia(21));return Dj(s),{predicate:i,type:e,effect:s}},tle=ay(t=>{const{type:e,predicate:n,effect:r}=ele(t);return{id:DMe(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(ia(22))}}},{withTypes:()=>tle}),iK=(t,e)=>{const{type:n,effect:r,predicate:i}=ele(e);return Array.from(t.values()).find(s=>(typeof n=="string"?s.type===n:s.predicate===i)&&s.effect===r)},YM=t=>{t.pending.forEach(e=>{e.abort(WM)})},ZMe=(t,e)=>()=>{for(const n of e.keys())YM(n);t.clear()},sK=(t,e,n)=>{try{t(e,n)}catch(r){setTimeout(()=>{throw r},0)}},nle=ay(el(`${rC}/add`),{withTypes:()=>nle}),eLe=el(`${rC}/removeAll`),rle=ay(el(`${rC}/remove`),{withTypes:()=>rle}),tLe=(...t)=>{console.error(`${rC}/error`,...t)},iE=(t={})=>{const e=new Map,n=new Map,r=g=>{const y=n.get(g)??0;n.set(g,y+1)},i=g=>{const y=n.get(g)??1;y===1?n.delete(g):n.set(g,y-1)},{extra:s,onError:o=tLe}=t;Dj(o);const a=g=>(g.unsubscribe=()=>e.delete(g.id),e.set(g.id,g),y=>{g.unsubscribe(),y!=null&&y.cancelActive&&YM(g)}),l=g=>{const y=iK(e,g)??tle(g);return a(y)};ay(l,{withTypes:()=>l});const c=g=>{const y=iK(e,g);return y&&(y.unsubscribe(),g.cancelActive&&YM(y)),!!y};ay(c,{withTypes:()=>c});const u=async(g,y,v,b)=>{const w=new AbortController,k=QMe(l,w.signal),N=[];try{g.pending.add(w),r(g),await Promise.resolve(g.effect(y,ay({},v,{getOriginalState:b,condition:(R,D)=>k(R,D).then(Boolean),take:k,delay:Zae(w.signal),pause:Bk(w.signal),extra:s,signal:w.signal,fork:XMe(w.signal,N),unsubscribe:g.unsubscribe,subscribe:()=>{e.set(g.id,g)},cancelActiveListeners:()=>{g.pending.forEach((R,D,O)=>{R!==w&&(R.abort(WM),O.delete(R))})},cancel:()=>{w.abort(WM),g.pending.delete(w)},throwIfCancelled:()=>{fm(w.signal)}})))}catch(R){R instanceof nC||sK(o,R,{raisedBy:"effect"})}finally{await Promise.all(N),w.abort(YMe),i(g),g.pending.delete(w)}},h=ZMe(e,n);return{middleware:g=>y=>v=>{if(!Rae(v))return y(v);if(nle.match(v))return l(v.payload);if(eLe.match(v)){h();return}if(rle.match(v))return c(v.payload);let b=g.getState();const w=()=>{if(b===rK)throw new Error(ia(23));return b};let k;try{if(k=y(v),e.size>0){const N=g.getState(),R=Array.from(e.values());for(const D of R){let O=!1;try{O=D.predicate(v,N,b)}catch(B){O=!1,sK(o,B,{raisedBy:"predicate"})}O&&u(D,v,g,w)}}}finally{b=rK}return k},startListening:l,stopListening:c,clearListeners:h}};function ia(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var nLe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},ile=Co({name:"chartLayout",initialState:nLe,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var n,r,i,s;t.margin.top=(n=e.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(r=e.payload.right)!==null&&r!==void 0?r:0,t.margin.bottom=(i=e.payload.bottom)!==null&&i!==void 0?i:0,t.margin.left=(s=e.payload.left)!==null&&s!==void 0?s:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:rLe,setLayout:iLe,setChartSize:sLe,setScale:oLe}=ile.actions,aLe=ile.reducer;function sle(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function cr(t){return Number.isFinite(t)}function $c(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function oK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Bg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oK(Object(n),!0).forEach(function(r){lLe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lLe(t,e,n){return(e=cLe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cLe(t){var e=uLe(t,"string");return typeof e=="symbol"?e:e+""}function uLe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Wn(t,e,n){return Sr(t)||Sr(e)?n:Fc(e)?Cm(t,e,n):typeof e=="function"?e(t):n}var dLe=(t,e,n)=>{if(e&&n){var{width:r,height:i}=n,{align:s,verticalAlign:o,layout:a}=e;if((a==="vertical"||a==="horizontal"&&o==="middle")&&s!=="center"&&kt(t[s]))return Bg(Bg({},t),{},{[s]:t[s]+(r||0)});if((a==="horizontal"||a==="vertical"&&s==="center")&&o!=="middle"&&kt(t[o]))return Bg(Bg({},t),{},{[o]:t[o]+(i||0)})}return t},Kc=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",ole=(t,e,n,r)=>{if(r)return t.map(a=>a.coordinate);var i,s,o=t.map(a=>(a.coordinate===e&&(i=!0),a.coordinate===n&&(s=!0),a.coordinate));return i||o.push(e),s||o.push(n),o},ale=(t,e,n)=>{if(!t)return null;var{duplicateDomain:r,type:i,range:s,scale:o,realScaleType:a,isCategorical:l,categoricalDomain:c,tickCount:u,ticks:h,niceTicks:m,axisType:g}=t;if(!o)return null;var y=a==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,v=i==="category"&&o.bandwidth?o.bandwidth()/y:0;if(v=g==="angleAxis"&&s&&s.length>=2?zi(s[0]-s[1])*2*v:v,h||m){var b=(h||m||[]).map((w,k)=>{var N=r?r.indexOf(w):w;return{coordinate:o(N)+v,value:w,offset:v,index:k}});return b.filter(w=>!Za(w.coordinate))}return l&&c?c.map((w,k)=>({coordinate:o(w)+v,value:w,index:k,offset:v})):o.ticks&&u!=null?o.ticks(u).map((w,k)=>({coordinate:o(w)+v,value:w,offset:v,index:k})):o.domain().map((w,k)=>({coordinate:o(w)+v,value:r?r[w]:w,index:k,offset:v}))},aK=1e-4,fLe=t=>{var e=t.domain();if(!(!e||e.length<=2)){var n=e.length,r=t.range(),i=Math.min(r[0],r[1])-aK,s=Math.max(r[0],r[1])+aK,o=t(e[0]),a=t(e[n-1]);(o<i||o>s||a<i||a>s)&&t.domain([e[0],e[n-1]])}},hLe=(t,e)=>{if(!e||e.length!==2||!kt(e[0])||!kt(e[1]))return t;var n=Math.min(e[0],e[1]),r=Math.max(e[0],e[1]),i=[t[0],t[1]];return(!kt(t[0])||t[0]<n)&&(i[0]=n),(!kt(t[1])||t[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},pLe=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var s=0,o=0,a=0;a<n;++a){var l=t[a],c=l==null?void 0:l[i];if(c!=null){var u=c[1],h=c[0],m=Za(u)?h:u;m>=0?(c[0]=s,c[1]=s+m,s=u):(c[0]=o,c[1]=o+m,o=u)}}}},mLe=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var s=0,o=0;o<n;++o){var a=t[o],l=a==null?void 0:a[i];if(l!=null){var c=Za(l[1])?l[0]:l[1];c>=0?(l[0]=s,l[1]=s+c,s=l[1]):(l[0]=0,l[1]=0)}}}},gLe={sign:pLe,expand:V4e,none:Nm,silhouette:H4e,wiggle:q4e,positive:mLe},yLe=(t,e,n)=>{var r,i=(r=gLe[n])!==null&&r!==void 0?r:Nm,s=z4e().keys(e).value((a,l)=>Number(Wn(a,l,0))).order(BM).offset(i),o=s(t);return o.forEach((a,l)=>{a.forEach((c,u)=>{var h=Wn(t[u],e[l],0);Array.isArray(h)&&h.length===2&&kt(h[0])&&kt(h[1])&&(c[0]=h[0],c[1]=h[1])})}),o};function lle(t){return t==null?void 0:String(t)}function Uk(t){var{axis:e,ticks:n,bandSize:r,entry:i,index:s,dataKey:o}=t;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Sr(i[e.dataKey])){var a=hae(n,"value",i[e.dataKey]);if(a)return a.coordinate+r/2}return n[s]?n[s].coordinate+r/2:null}var l=Wn(i,Sr(o)?e.dataKey:o);return Sr(l)?null:e.scale(l)}var lK=t=>{var{axis:e,ticks:n,offset:r,bandSize:i,entry:s,index:o}=t;if(e.type==="category")return n[o]?n[o].coordinate+r:null;var a=Wn(s,e.dataKey,e.scale.domain()[o]);return Sr(a)?null:e.scale(a)-i/2+r},xLe=t=>{var{numericAxis:e}=t,n=e.scale.domain();if(e.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},vLe=t=>{var e=t.flat(2).filter(kt);return[Math.min(...e),Math.max(...e)]},bLe=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],wLe=(t,e,n)=>{if(t!=null)return bLe(Object.keys(t).reduce((r,i)=>{var s=t[i];if(!s)return r;var{stackedData:o}=s,a=o.reduce((l,c)=>{var u=sle(c,e,n),h=vLe(u);return!cr(h[0])||!cr(h[1])?l:[Math.min(l[0],h[0]),Math.max(l[1],h[1])]},[1/0,-1/0]);return[Math.min(a[0],r[0]),Math.max(a[1],r[1])]},[1/0,-1/0]))},cK=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,uK=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,gh=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();if(!n||r>0)return r}if(t&&e&&e.length>=2){for(var i=YN(e,u=>u.coordinate),s=1/0,o=1,a=i.length;o<a;o++){var l=i[o],c=i[o-1];s=Math.min(((l==null?void 0:l.coordinate)||0)-((c==null?void 0:c.coordinate)||0),s)}return s===1/0?0:s}return n?void 0:0};function dK(t){var{tooltipEntrySettings:e,dataKey:n,payload:r,value:i,name:s}=t;return Bg(Bg({},e),{},{dataKey:n,payload:r,value:i,name:s})}function Th(t,e){if(t)return String(t);if(typeof e=="string")return e}var ELe=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},SLe=(t,e)=>e==="centric"?t.angle:t.radius,Pd=t=>t.layout.width,_d=t=>t.layout.height,ALe=t=>t.layout.scale,cle=t=>t.layout.margin,iC=je(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),sC=je(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),ule="data-recharts-item-index",dle="data-recharts-item-id",sE=60;function fK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function NA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fK(Object(n),!0).forEach(function(r){TLe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function TLe(t,e,n){return(e=kLe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kLe(t){var e=NLe(t,"string");return typeof e=="symbol"?e:e+""}function NLe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var CLe=t=>t.brush.height;function PLe(t){var e=sC(t);return e.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:sE;return n+i}return n},0)}function _Le(t){var e=sC(t);return e.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:sE;return n+i}return n},0)}function ILe(t){var e=iC(t);return e.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function RLe(t){var e=iC(t);return e.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var ki=je([Pd,_d,cle,CLe,PLe,_Le,ILe,RLe,Pae,sMe],(t,e,n,r,i,s,o,a,l,c)=>{var u={left:(n.left||0)+i,right:(n.right||0)+s},h={top:(n.top||0)+o,bottom:(n.bottom||0)+a},m=NA(NA({},h),u),g=m.bottom;m.bottom+=r,m=dLe(m,l,c);var y=t-m.left-m.right,v=e-m.top-m.bottom;return NA(NA({brushBottom:g},m),{},{width:Math.max(y,0),height:Math.max(v,0)})}),OLe=je(ki,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),jj=je(Pd,_d,(t,e)=>({x:0,y:0,width:t,height:e})),MLe=A.createContext(null),qi=()=>A.useContext(MLe)!=null,oC=t=>t.brush,aC=je([oC,ki,cle],(t,e,n)=>({height:t.height,x:kt(t.x)?t.x:e.left,y:kt(t.y)?t.y:e.top+e.height+e.brushBottom-((n==null?void 0:n.bottom)||0),width:kt(t.width)?t.width:e.width})),aO={},lO={},cO={},hK;function LLe(){return hK||(hK=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r,{signal:i,edges:s}={}){let o,a=null;const l=s!=null&&s.includes("leading"),c=s==null||s.includes("trailing"),u=()=>{a!==null&&(n.apply(o,a),o=void 0,a=null)},h=()=>{c&&u(),v()};let m=null;const g=()=>{m!=null&&clearTimeout(m),m=setTimeout(()=>{m=null,h()},r)},y=()=>{m!==null&&(clearTimeout(m),m=null)},v=()=>{y(),o=void 0,a=null},b=()=>{u()},w=function(...k){if(i!=null&&i.aborted)return;o=this,a=k;const N=m==null;g(),l&&N&&u()};return w.schedule=g,w.cancel=v,w.flush=b,i==null||i.addEventListener("abort",v,{once:!0}),w}t.debounce=e})(cO)),cO}var pK;function DLe(){return pK||(pK=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=LLe();function n(r,i=0,s={}){typeof s!="object"&&(s={});const{leading:o=!1,trailing:a=!0,maxWait:l}=s,c=Array(2);o&&(c[0]="leading"),a&&(c[1]="trailing");let u,h=null;const m=e.debounce(function(...v){u=r.apply(this,v),h=null},i,{edges:c}),g=function(...v){return l!=null&&(h===null&&(h=Date.now()),Date.now()-h>=l)?(u=r.apply(this,v),h=Date.now(),m.cancel(),m.schedule(),u):(m.apply(this,v),u)},y=()=>(m.flush(),u);return g.cancel=m.cancel,g.flush=y,g}t.debounce=n})(lO)),lO}var mK;function jLe(){return mK||(mK=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=DLe();function n(r,i=0,s={}){const{leading:o=!0,trailing:a=!0}=s;return e.debounce(r,i,{leading:o,maxWait:i,trailing:a})}t.throttle=n})(aO)),aO}var uO,gK;function BLe(){return gK||(gK=1,uO=jLe().throttle),uO}var ULe=BLe();const FLe=gs(ULe);var Fk=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var o=0;console.warn(n.replace(/%s/g,()=>i[o++]))}},fle=(t,e,n)=>{var{width:r="100%",height:i="100%",aspect:s,maxHeight:o}=n,a=yd(r)?t:Number(r),l=yd(i)?e:Number(i);return s&&s>0&&(a?l=a/s:l&&(a=l*s),o&&l!=null&&l>o&&(l=o)),{calculatedWidth:a,calculatedHeight:l}},$Le={width:0,height:0,overflow:"visible"},zLe={width:0,overflowX:"visible"},VLe={height:0,overflowY:"visible"},HLe={},qLe=t=>{var{width:e,height:n}=t,r=yd(e),i=yd(n);return r&&i?$Le:r?zLe:i?VLe:HLe};function GLe(t){var{width:e,height:n,aspect:r}=t,i=e,s=n;return i===void 0&&s===void 0?(i="100%",s="100%"):i===void 0?i=r&&r>0?void 0:"100%":s===void 0&&(s=r&&r>0?void 0:"100%"),{width:i,height:s}}function JM(){return JM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},JM.apply(null,arguments)}function yK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xK(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yK(Object(n),!0).forEach(function(r){KLe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function KLe(t,e,n){return(e=WLe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WLe(t){var e=YLe(t,"string");return typeof e=="symbol"?e:e+""}function YLe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var hle=A.createContext({width:-1,height:-1});function JLe(t){return $c(t.width)&&$c(t.height)}function ple(t){var{children:e,width:n,height:r}=t,i=A.useMemo(()=>({width:n,height:r}),[n,r]);return JLe(i)?A.createElement(hle.Provider,{value:i},e):null}var Bj=()=>A.useContext(hle),XLe=A.forwardRef((t,e)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i,height:s,minWidth:o=0,minHeight:a,maxHeight:l,children:c,debounce:u=0,id:h,className:m,onResize:g,style:y={}}=t,v=A.useRef(null),b=A.useRef();b.current=g,A.useImperativeHandle(e,()=>v.current);var[w,k]=A.useState({containerWidth:r.width,containerHeight:r.height}),N=A.useCallback((z,U)=>{k($=>{var W=Math.round(z),H=Math.round(U);return $.containerWidth===W&&$.containerHeight===H?$:{containerWidth:W,containerHeight:H}})},[]);A.useEffect(()=>{if(v.current==null||typeof ResizeObserver>"u")return tE;var z=H=>{var F,{width:T,height:_}=H[0].contentRect;N(T,_),(F=b.current)===null||F===void 0||F.call(b,T,_)};u>0&&(z=FLe(z,u,{trailing:!0,leading:!1}));var U=new ResizeObserver(z),{width:$,height:W}=v.current.getBoundingClientRect();return N($,W),U.observe(v.current),()=>{U.disconnect()}},[N,u]);var{containerWidth:R,containerHeight:D}=w;Fk(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:O,calculatedHeight:B}=fle(R,D,{width:i,height:s,aspect:n,maxHeight:l});return Fk(O!=null&&O>0||B!=null&&B>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,O,B,i,s,o,a,n),A.createElement("div",{id:h?"".concat(h):void 0,className:Rn("recharts-responsive-container",m),style:xK(xK({},y),{},{width:i,height:s,minWidth:o,minHeight:a,maxHeight:l}),ref:v},A.createElement("div",{style:qLe({width:i,height:s})},A.createElement(ple,{width:O,height:B},c)))}),Zw=A.forwardRef((t,e)=>{var n=Bj();if($c(n.width)&&$c(n.height))return t.children;var{width:r,height:i}=GLe({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:s,calculatedHeight:o}=fle(void 0,void 0,{width:r,height:i,aspect:t.aspect,maxHeight:t.maxHeight});return kt(s)&&kt(o)?A.createElement(ple,{width:s,height:o},t.children):A.createElement(XLe,JM({},t,{width:r,height:i,ref:e}))});function mle(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var lC=()=>{var t,e=qi(),n=Lt(OLe),r=Lt(aC),i=(t=Lt(oC))===null||t===void 0?void 0:t.padding;return!e||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},QLe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},gle=()=>{var t;return(t=Lt(ki))!==null&&t!==void 0?t:QLe},yle=()=>Lt(Pd),xle=()=>Lt(_d),Tn=t=>t.layout.layoutType,kh=()=>Lt(Tn),ZLe=()=>{var t=kh();if(t==="horizontal"||t==="vertical")return t},eDe=()=>{var t=kh();return t!==void 0},cC=t=>{var e=_r(),n=qi(),{width:r,height:i}=t,s=Bj(),o=r,a=i;return s&&(o=s.width>0?s.width:r,a=s.height>0?s.height:i),A.useEffect(()=>{!n&&$c(o)&&$c(a)&&e(sLe({width:o,height:a}))},[e,n,o,a]),null},vle=Symbol.for("immer-nothing"),vK=Symbol.for("immer-draftable"),la=Symbol.for("immer-state");function Rl(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var e1=Object.getPrototypeOf;function Cx(t){return!!t&&!!t[la]}function _m(t){var e;return t?ble(t)||Array.isArray(t)||!!t[vK]||!!((e=t.constructor)!=null&&e[vK])||oE(t)||dC(t):!1}var tDe=Object.prototype.constructor.toString(),bK=new WeakMap;function ble(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let r=bK.get(n);return r===void 0&&(r=Function.toString.call(n),bK.set(n,r)),r===tDe}function $k(t,e,n=!0){uC(t)===0?(n?Reflect.ownKeys(t):Object.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function uC(t){const e=t[la];return e?e.type_:Array.isArray(t)?1:oE(t)?2:dC(t)?3:0}function XM(t,e){return uC(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function wle(t,e,n){const r=uC(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function nDe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function oE(t){return t instanceof Map}function dC(t){return t instanceof Set}function hp(t){return t.copy_||t.base_}function QM(t,e){if(oE(t))return new Map(t);if(dC(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=ble(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[la];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:t[o]})}return Object.create(e1(t),r)}else{const r=e1(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function Uj(t,e=!1){return fC(t)||Cx(t)||!_m(t)||(uC(t)>1&&Object.defineProperties(t,{set:CA,add:CA,clear:CA,delete:CA}),Object.freeze(t),e&&Object.values(t).forEach(n=>Uj(n,!0))),t}function rDe(){Rl(2)}var CA={value:rDe};function fC(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var iDe={};function Im(t){const e=iDe[t];return e||Rl(0,t),e}var t1;function Ele(){return t1}function sDe(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function wK(t,e){e&&(Im("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function ZM(t){eL(t),t.drafts_.forEach(oDe),t.drafts_=null}function eL(t){t===t1&&(t1=t.parent_)}function EK(t){return t1=sDe(t1,t)}function oDe(t){const e=t[la];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function SK(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[la].modified_&&(ZM(e),Rl(4)),_m(t)&&(t=zk(e,t),e.parent_||Vk(e,t)),e.patches_&&Im("Patches").generateReplacementPatches_(n[la].base_,t,e.patches_,e.inversePatches_)):t=zk(e,n,[]),ZM(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==vle?t:void 0}function zk(t,e,n){if(fC(e))return e;const r=t.immer_.shouldUseStrictIteration(),i=e[la];if(!i)return $k(e,(s,o)=>AK(t,i,e,s,o,n),r),e;if(i.scope_!==t)return e;if(!i.modified_)return Vk(t,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const s=i.copy_;let o=s,a=!1;i.type_===3&&(o=new Set(s),s.clear(),a=!0),$k(o,(l,c)=>AK(t,i,s,l,c,n,a),r),Vk(t,s,!1),n&&t.patches_&&Im("Patches").generatePatches_(i,n,t.patches_,t.inversePatches_)}return i.copy_}function AK(t,e,n,r,i,s,o){if(i==null||typeof i!="object"&&!o)return;const a=fC(i);if(!(a&&!o)){if(Cx(i)){const l=s&&e&&e.type_!==3&&!XM(e.assigned_,r)?s.concat(r):void 0,c=zk(t,i,l);if(wle(n,r,c),Cx(c))t.canAutoFreeze_=!1;else return}else o&&n.add(i);if(_m(i)&&!a){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[r]===i&&a)return;zk(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(oE(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&Vk(t,i)}}}function Vk(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&Uj(e,n)}function aDe(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:Ele(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=Fj;n&&(i=[r],s=n1);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var Fj={get(t,e){if(e===la)return t;const n=hp(t);if(!XM(n,e))return lDe(t,n,e);const r=n[e];return t.finalized_||!_m(r)?r:r===dO(t.base_,e)?(fO(t),t.copy_[e]=nL(r,t)):r},has(t,e){return e in hp(t)},ownKeys(t){return Reflect.ownKeys(hp(t))},set(t,e,n){const r=Sle(hp(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=dO(hp(t),e),s=i==null?void 0:i[la];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(nDe(n,i)&&(n!==void 0||XM(t.base_,e)))return!0;fO(t),tL(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return dO(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,fO(t),tL(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=hp(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){Rl(11)},getPrototypeOf(t){return e1(t.base_)},setPrototypeOf(){Rl(12)}},n1={};$k(Fj,(t,e)=>{n1[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});n1.deleteProperty=function(t,e){return n1.set.call(this,t,e,void 0)};n1.set=function(t,e,n){return Fj.set.call(this,t[0],e,n,t[0])};function dO(t,e){const n=t[la];return(n?hp(n):t)[e]}function lDe(t,e,n){var i;const r=Sle(e,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function Sle(t,e){if(!(e in t))return;let n=e1(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=e1(n)}}function tL(t){t.modified_||(t.modified_=!0,t.parent_&&tL(t.parent_))}function fO(t){t.copy_||(t.copy_=QM(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var cDe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const s=n;n=e;const o=this;return function(l=s,...c){return o.produce(l,u=>n.call(this,u,...c))}}typeof n!="function"&&Rl(6),r!==void 0&&typeof r!="function"&&Rl(7);let i;if(_m(e)){const s=EK(this),o=nL(e,void 0);let a=!0;try{i=n(o),a=!1}finally{a?ZM(s):eL(s)}return wK(s,r),SK(i,s)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===vle&&(i=void 0),this.autoFreeze_&&Uj(i,!0),r){const s=[],o=[];Im("Patches").generateReplacementPatches_(e,i,s,o),r(s,o)}return i}else Rl(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(o,...a)=>this.produceWithPatches(o,l=>e(l,...a));let r,i;return[this.produce(e,n,(o,a)=>{r=o,i=a}),r,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof(t==null?void 0:t.useStrictIteration)=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){_m(t)||Rl(8),Cx(t)&&(t=uDe(t));const e=EK(this),n=nL(t,void 0);return n[la].isManual_=!0,eL(e),n}finishDraft(t,e){const n=t&&t[la];(!n||!n.isManual_)&&Rl(9);const{scope_:r}=n;return wK(r,e),SK(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=Im("Patches").applyPatches_;return Cx(t)?r(t,e):this.produce(t,i=>r(i,e))}};function nL(t,e){const n=oE(t)?Im("MapSet").proxyMap_(t,e):dC(t)?Im("MapSet").proxySet_(t,e):aDe(t,e);return(e?e.scope_:Ele()).drafts_.push(n),n}function uDe(t){return Cx(t)||Rl(10,t),Ale(t)}function Ale(t){if(!_m(t)||fC(t))return t;const e=t[la];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=QM(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=QM(t,!0);return $k(n,(i,s)=>{wle(n,i,Ale(s))},r),e&&(e.finalized_=!1),n}var dDe=new cDe;dDe.produce;var fDe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},Tle=Co({name:"legend",initialState:fDe,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:kr()},replaceLegendPayload:{reducer(t,e){var{prev:n,next:r}=e.payload,i=jl(t).payload.indexOf(n);i>-1&&(t.payload[i]=r)},prepare:kr()},removeLegendPayload:{reducer(t,e){var n=jl(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)},prepare:kr()}}}),{setLegendSize:ngt,setLegendSettings:rgt,addLegendPayload:kle,replaceLegendPayload:Nle,removeLegendPayload:Cle}=Tle.actions,hDe=Tle.reducer;function rL(){return rL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rL.apply(null,arguments)}function TK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TK(Object(n),!0).forEach(function(r){pDe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pDe(t,e,n){return(e=mDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mDe(t){var e=gDe(t,"string");return typeof e=="symbol"?e:e+""}function gDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yDe(t){return Array.isArray(t)&&Fc(t[0])&&Fc(t[1])?t.join(" ~ "):t}var xDe=t=>{var{separator:e=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:s,formatter:o,itemSorter:a,wrapperClassName:l,labelClassName:c,label:u,labelFormatter:h,accessibilityLayer:m=!1}=t,g=()=>{if(s&&s.length){var D={padding:0,margin:0},O=(a?YN(s,a):s).map((B,z)=>{if(B.type==="none")return null;var U=B.formatter||o||yDe,{value:$,name:W}=B,H=$,F=W;if(U){var T=U($,W,B,z,s);if(Array.isArray(T))[H,F]=T;else if(T!=null)H=T;else return null}var _=hO({display:"block",paddingTop:4,paddingBottom:4,color:B.color||"#000"},r);return A.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(z),style:_},Fc(F)?A.createElement("span",{className:"recharts-tooltip-item-name"},F):null,Fc(F)?A.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,A.createElement("span",{className:"recharts-tooltip-item-value"},H),A.createElement("span",{className:"recharts-tooltip-item-unit"},B.unit||""))});return A.createElement("ul",{className:"recharts-tooltip-item-list",style:D},O)}return null},y=hO({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),v=hO({margin:0},i),b=!Sr(u),w=b?u:"",k=Rn("recharts-default-tooltip",l),N=Rn("recharts-tooltip-label",c);b&&h&&s!==void 0&&s!==null&&(w=h(u,s));var R=m?{role:"status","aria-live":"assertive"}:{};return A.createElement("div",rL({className:k,style:y},R),A.createElement("p",{className:N,style:v},A.isValidElement(w)?w:"".concat(w)),g())},Tb="recharts-tooltip-wrapper",vDe={visibility:"hidden"};function bDe(t){var{coordinate:e,translateX:n,translateY:r}=t;return Rn(Tb,{["".concat(Tb,"-right")]:kt(n)&&e&&kt(e.x)&&n>=e.x,["".concat(Tb,"-left")]:kt(n)&&e&&kt(e.x)&&n<e.x,["".concat(Tb,"-bottom")]:kt(r)&&e&&kt(e.y)&&r>=e.y,["".concat(Tb,"-top")]:kt(r)&&e&&kt(e.y)&&r<e.y})}function kK(t){var{allowEscapeViewBox:e,coordinate:n,key:r,offsetTopLeft:i,position:s,reverseDirection:o,tooltipDimension:a,viewBox:l,viewBoxDimension:c}=t;if(s&&kt(s[r]))return s[r];var u=n[r]-a-(i>0?i:0),h=n[r]+i;if(e[r])return o[r]?u:h;var m=l[r];if(m==null)return 0;if(o[r]){var g=u,y=m;return g<y?Math.max(h,m):Math.max(u,m)}if(c==null)return 0;var v=h+a,b=m+c;return v>b?Math.max(u,m):Math.max(h,m)}function wDe(t){var{translateX:e,translateY:n,useTranslate3d:r}=t;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function EDe(t){var{allowEscapeViewBox:e,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:s,tooltipBox:o,useTranslate3d:a,viewBox:l}=t,c,u,h;return o.height>0&&o.width>0&&n?(u=kK({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:o.width,viewBox:l,viewBoxDimension:l.width}),h=kK({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:o.height,viewBox:l,viewBoxDimension:l.height}),c=wDe({translateX:u,translateY:h,useTranslate3d:a})):c=vDe,{cssProperties:c,cssClasses:bDe({translateX:u,translateY:h,coordinate:n})}}function NK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function PA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NK(Object(n),!0).forEach(function(r){iL(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function iL(t,e,n){return(e=SDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function SDe(t){var e=ADe(t,"string");return typeof e=="symbol"?e:e+""}function ADe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class TDe extends A.PureComponent{constructor(){super(...arguments),iL(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),iL(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,r,i,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:s,coordinate:o,hasPayload:a,isAnimationActive:l,offset:c,position:u,reverseDirection:h,useTranslate3d:m,viewBox:g,wrapperStyle:y,lastBoundingBox:v,innerRef:b,hasPortalFromProps:w}=this.props,{cssClasses:k,cssProperties:N}=EDe({allowEscapeViewBox:n,coordinate:o,offsetTopLeft:c,position:u,reverseDirection:h,tooltipBox:{height:v.height,width:v.width},useTranslate3d:m,viewBox:g}),R=w?{}:PA(PA({transition:l&&e?"transform ".concat(r,"ms ").concat(i):void 0},N),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&a?"visible":"hidden",position:"absolute",top:0,left:0}),D=PA(PA({},R),{},{visibility:!this.state.dismissed&&e&&a?"visible":"hidden"},y);return A.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:k,style:D,ref:b},s)}}var Ple=()=>{var t;return(t=Lt(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function sL(){return sL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sL.apply(null,arguments)}function CK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function PK(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CK(Object(n),!0).forEach(function(r){kDe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kDe(t,e,n){return(e=NDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function NDe(t){var e=CDe(t,"string");return typeof e=="symbol"?e:e+""}function CDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _K={curveBasisClosed:I4e,curveBasisOpen:R4e,curveBasis:_4e,curveBumpX:g4e,curveBumpY:y4e,curveLinearClosed:O4e,curveLinear:GN,curveMonotoneX:M4e,curveMonotoneY:L4e,curveNatural:D4e,curveStep:j4e,curveStepAfter:U4e,curveStepBefore:B4e},Hk=t=>cr(t.x)&&cr(t.y),IK=t=>t.base!=null&&Hk(t.base)&&Hk(t),kb=t=>t.x,Nb=t=>t.y,PDe=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(eE(t));return(n==="curveMonotone"||n==="curveBump")&&e?_K["".concat(n).concat(e==="vertical"?"Y":"X")]:_K[n]||GN},_De=t=>{var{type:e="linear",points:n=[],baseLine:r,layout:i,connectNulls:s=!1}=t,o=PDe(e,i),a=s?n.filter(Hk):n,l;if(Array.isArray(r)){var c=n.map((g,y)=>PK(PK({},g),{},{base:r[y]}));i==="vertical"?l=wA().y(Nb).x1(kb).x0(g=>g.base.x):l=wA().x(kb).y1(Nb).y0(g=>g.base.y);var u=l.defined(IK).curve(o),h=s?c.filter(IK):c;return u(h)}i==="vertical"&&kt(r)?l=wA().y(Nb).x1(kb).x0(r):kt(r)?l=wA().x(kb).y1(Nb).y0(r):l=eae().x(kb).y(Nb);var m=l.defined(Hk).curve(o);return m(a)},ly=t=>{var{className:e,points:n,path:r,pathRef:i}=t,s=kh();if((!n||!n.length)&&!r)return null;var o={type:t.type,points:t.points,baseLine:t.baseLine,layout:t.layout||s,connectNulls:t.connectNulls},a=n&&n.length?_De(o):r;return A.createElement("path",sL({},ro(t),kj(t),{className:Rn("recharts-curve",e),d:a===null?void 0:a,ref:i}))},IDe=["x","y","top","left","width","height","className"];function oL(){return oL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},oL.apply(null,arguments)}function RK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function RDe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RK(Object(n),!0).forEach(function(r){ODe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ODe(t,e,n){return(e=MDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MDe(t){var e=LDe(t,"string");return typeof e=="symbol"?e:e+""}function LDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function DDe(t,e){if(t==null)return{};var n,r,i=jDe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function jDe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var BDe=(t,e,n,r,i,s)=>"M".concat(t,",").concat(i,"v").concat(r,"M").concat(s,",").concat(e,"h").concat(n),UDe=t=>{var{x:e=0,y:n=0,top:r=0,left:i=0,width:s=0,height:o=0,className:a}=t,l=DDe(t,IDe),c=RDe({x:e,y:n,top:r,left:i,width:s,height:o},l);return!kt(e)||!kt(n)||!kt(s)||!kt(o)||!kt(r)||!kt(i)?null:A.createElement("path",oL({},$s(c),{className:Rn("recharts-cross",a),d:BDe(e,n,s,o,r,i)}))};function FDe(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function OK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function MK(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OK(Object(n),!0).forEach(function(r){$De(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $De(t,e,n){return(e=zDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zDe(t){var e=VDe(t,"string");return typeof e=="symbol"?e:e+""}function VDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var HDe=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),_le=(t,e,n)=>t.map(r=>"".concat(HDe(r)," ").concat(e,"ms ").concat(n)).join(","),qDe=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,r)=>n.filter(i=>r.includes(i))),r1=(t,e)=>Object.keys(e).reduce((n,r)=>MK(MK({},n),{},{[r]:t(r,e[r])}),{});function LK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ti(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LK(Object(n),!0).forEach(function(r){GDe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function GDe(t,e,n){return(e=KDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function KDe(t){var e=WDe(t,"string");return typeof e=="symbol"?e:e+""}function WDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qk=(t,e,n)=>t+(e-t)*n,aL=t=>{var{from:e,to:n}=t;return e!==n},Ile=(t,e,n)=>{var r=r1((i,s)=>{if(aL(s)){var[o,a]=t(s.from,s.to,s.velocity);return Ti(Ti({},s),{},{from:o,velocity:a})}return s},e);return n<1?r1((i,s)=>aL(s)&&r[i]!=null?Ti(Ti({},s),{},{velocity:qk(s.velocity,r[i].velocity,n),from:qk(s.from,r[i].from,n)}):s,e):Ile(t,r,n-1)};function YDe(t,e,n,r,i,s){var o,a=r.reduce((m,g)=>Ti(Ti({},m),{},{[g]:{from:t[g],velocity:0,to:e[g]}}),{}),l=()=>r1((m,g)=>g.from,a),c=()=>!Object.values(a).filter(aL).length,u=null,h=m=>{o||(o=m);var g=m-o,y=g/n.dt;a=Ile(n,a,y),i(Ti(Ti(Ti({},t),e),l())),o=m,c()||(u=s.setTimeout(h))};return()=>(u=s.setTimeout(h),()=>{var m;(m=u)===null||m===void 0||m()})}function JDe(t,e,n,r,i,s,o){var a=null,l=i.reduce((h,m)=>{var g=t[m],y=e[m];return g==null||y==null?h:Ti(Ti({},h),{},{[m]:[g,y]})},{}),c,u=h=>{c||(c=h);var m=(h-c)/r,g=r1((v,b)=>qk(...b,n(m)),l);if(s(Ti(Ti(Ti({},t),e),g)),m<1)a=o.setTimeout(u);else{var y=r1((v,b)=>qk(...b,n(1)),l);s(Ti(Ti(Ti({},t),e),y))}};return()=>(a=o.setTimeout(u),()=>{var h;(h=a)===null||h===void 0||h()})}const XDe=(t,e,n,r,i,s)=>{var o=qDe(t,e);return n==null?()=>(i(Ti(Ti({},t),e)),()=>{}):n.isStepper===!0?YDe(t,e,n,o,i,s):JDe(t,e,n,r,o,i,s)};var Gk=1e-4,Rle=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],Ole=(t,e)=>t.map((n,r)=>n*e**r).reduce((n,r)=>n+r),DK=(t,e)=>n=>{var r=Rle(t,e);return Ole(r,n)},QDe=(t,e)=>n=>{var r=Rle(t,e),i=[...r.map((s,o)=>s*o).slice(1),0];return Ole(i,n)},ZDe=t=>{var e,n=t.split("(");if(n.length!==2||n[0]!=="cubic-bezier")return null;var r=(e=n[1])===null||e===void 0||(e=e.split(")")[0])===null||e===void 0?void 0:e.split(",");if(r==null||r.length!==4)return null;var i=r.map(s=>parseFloat(s));return[i[0],i[1],i[2],i[3]]},e8e=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i=ZDe(n[0]);if(i)return i}}return n.length===4?n:[0,0,1,1]},t8e=(t,e,n,r)=>{var i=DK(t,n),s=DK(e,r),o=QDe(t,n),a=c=>c>1?1:c<0?0:c,l=c=>{for(var u=c>1?1:c,h=u,m=0;m<8;++m){var g=i(h)-u,y=o(h);if(Math.abs(g-u)<Gk||y<Gk)return s(h);h=a(h-g/y)}return s(h)};return l.isStepper=!1,l},jK=function(){return t8e(...e8e(...arguments))},n8e=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=e,s=(o,a,l)=>{var c=-(o-a)*n,u=l*r,h=l+(c-u)*i/1e3,m=l*i/1e3+o;return Math.abs(m-a)<Gk&&Math.abs(h)<Gk?[a,0]:[m,h]};return s.isStepper=!0,s.dt=i,s},r8e=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return jK(t);case"spring":return n8e();default:if(t.split("(")[0]==="cubic-bezier")return jK(t)}return typeof t=="function"?t:null};function i8e(t){var e,n=()=>null,r=!1,i=null,s=o=>{if(!r){if(Array.isArray(o)){if(!o.length)return;var a=o,[l,...c]=a;if(typeof l=="number"){i=t.setTimeout(s.bind(null,c),l);return}s(l),i=t.setTimeout(s.bind(null,c));return}typeof o=="string"&&(e=o,n(e)),typeof o=="object"&&(e=o,n(e)),typeof o=="function"&&o()}};return{stop:()=>{r=!0},start:o=>{r=!1,i&&(i(),i=null),s(o)},subscribe:o=>(n=o,()=>{n=()=>null}),getTimeoutController:()=>t}}class s8e{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,s=o=>{o-r>=n?e(o):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(s))};return i=requestAnimationFrame(s),()=>{i!=null&&cancelAnimationFrame(i)}}}function o8e(){return i8e(new s8e)}var a8e=A.createContext(o8e);function l8e(t,e){var n=A.useContext(a8e);return A.useMemo(()=>e??n(t),[t,e,n])}var c8e=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),aE={isSsr:c8e()},u8e={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},BK={t:0},pO={t:1};function rv(t){var e=xi(t,u8e),{isActive:n,canBegin:r,duration:i,easing:s,begin:o,onAnimationEnd:a,onAnimationStart:l,children:c}=e,u=n==="auto"?!aE.isSsr:n,h=l8e(e.animationId,e.animationManager),[m,g]=A.useState(u?BK:pO),y=A.useRef(null);return A.useEffect(()=>{u||g(pO)},[u]),A.useEffect(()=>{if(!u||!r)return tE;var v=XDe(BK,pO,r8e(s),i,g,h.getTimeoutController()),b=()=>{y.current=v()};return h.start([l,o,b,i,a]),()=>{h.stop(),y.current&&y.current(),a()}},[u,r,i,s,o,l,a,h]),c(m.t)}function iv(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=A.useRef(Yw(e)),r=A.useRef(t);return r.current!==t&&(n.current=Yw(e),r.current=t),n.current}var d8e=["radius"],f8e=["radius"],UK,FK,$K,zK,VK,HK,qK,GK,KK,WK;function YK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function JK(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YK(Object(n),!0).forEach(function(r){h8e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function h8e(t,e,n){return(e=p8e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p8e(t){var e=m8e(t,"string");return typeof e=="symbol"?e:e+""}function m8e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Kk(){return Kk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Kk.apply(null,arguments)}function XK(t,e){if(t==null)return{};var n,r,i=g8e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function g8e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function sc(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var QK=(t,e,n,r,i)=>{var s=Zf(n),o=Zf(r),a=Math.min(Math.abs(s)/2,Math.abs(o)/2),l=o>=0?1:-1,c=s>=0?1:-1,u=o>=0&&s>=0||o<0&&s<0?1:0,h;if(a>0&&i instanceof Array){for(var m=[0,0,0,0],g=0,y=4;g<y;g++)m[g]=i[g]>a?a:i[g];h=Gr(UK||(UK=sc(["M",",",""])),t,e+l*m[0]),m[0]>0&&(h+=Gr(FK||(FK=sc(["A ",",",",0,0,",",",",",""])),m[0],m[0],u,t+c*m[0],e)),h+=Gr($K||($K=sc(["L ",",",""])),t+n-c*m[1],e),m[1]>0&&(h+=Gr(zK||(zK=sc(["A ",",",",0,0,",`,
        `,",",""])),m[1],m[1],u,t+n,e+l*m[1])),h+=Gr(VK||(VK=sc(["L ",",",""])),t+n,e+r-l*m[2]),m[2]>0&&(h+=Gr(HK||(HK=sc(["A ",",",",0,0,",`,
        `,",",""])),m[2],m[2],u,t+n-c*m[2],e+r)),h+=Gr(qK||(qK=sc(["L ",",",""])),t+c*m[3],e+r),m[3]>0&&(h+=Gr(GK||(GK=sc(["A ",",",",0,0,",`,
        `,",",""])),m[3],m[3],u,t,e+r-l*m[3])),h+="Z"}else if(a>0&&i===+i&&i>0){var v=Math.min(a,i);h=Gr(KK||(KK=sc(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),t,e+l*v,v,v,u,t+c*v,e,t+n-c*v,e,v,v,u,t+n,e+l*v,t+n,e+r-l*v,v,v,u,t+n-c*v,e+r,t+c*v,e+r,v,v,u,t,e+r-l*v)}else h=Gr(WK||(WK=sc(["M ",","," h "," v "," h "," Z"])),t,e,n,r,-n);return h},ZK={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Mle=t=>{var e=xi(t,ZK),n=A.useRef(null),[r,i]=A.useState(-1);A.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var V=n.current.getTotalLength();V&&i(V)}catch{}},[]);var{x:s,y:o,width:a,height:l,radius:c,className:u}=e,{animationEasing:h,animationDuration:m,animationBegin:g,isAnimationActive:y,isUpdateAnimationActive:v}=e,b=A.useRef(a),w=A.useRef(l),k=A.useRef(s),N=A.useRef(o),R=A.useMemo(()=>({x:s,y:o,width:a,height:l,radius:c}),[s,o,a,l,c]),D=iv(R,"rectangle-");if(s!==+s||o!==+o||a!==+a||l!==+l||a===0||l===0)return null;var O=Rn("recharts-rectangle",u);if(!v){var B=$s(e),{radius:z}=B,U=XK(B,d8e);return A.createElement("path",Kk({},U,{x:Zf(s),y:Zf(o),width:Zf(a),height:Zf(l),radius:typeof c=="number"?c:void 0,className:O,d:QK(s,o,a,l,c)}))}var $=b.current,W=w.current,H=k.current,F=N.current,T="0px ".concat(r===-1?1:r,"px"),_="".concat(r,"px 0px"),L=_le(["strokeDasharray"],m,typeof h=="string"?h:ZK.animationEasing);return A.createElement(rv,{animationId:D,key:D,canBegin:r>0,duration:m,easing:h,isActive:v,begin:g},V=>{var K=qn($,a,V),te=qn(W,l,V),G=qn(H,s,V),q=qn(F,o,V);n.current&&(b.current=K,w.current=te,k.current=G,N.current=q);var M;y?V>0?M={transition:L,strokeDasharray:_}:M={strokeDasharray:T}:M={strokeDasharray:_};var P=$s(e),{radius:Y}=P,X=XK(P,f8e);return A.createElement("path",Kk({},X,{radius:typeof c=="number"?c:void 0,className:O,d:QK(G,q,K,te,c),ref:n,style:JK(JK({},M),e.style)}))})};function eW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function tW(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eW(Object(n),!0).forEach(function(r){y8e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function y8e(t,e,n){return(e=x8e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function x8e(t){var e=v8e(t,"string");return typeof e=="symbol"?e:e+""}function v8e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Wk=Math.PI/180,b8e=t=>t*180/Math.PI,gi=(t,e,n,r)=>({x:t+Math.cos(-Wk*r)*n,y:e+Math.sin(-Wk*r)*n}),Lle=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},w8e=(t,e)=>{var{x:n,y:r}=t,{x:i,y:s}=e;return Math.sqrt((n-i)**2+(r-s)**2)},E8e=(t,e)=>{var{x:n,y:r}=t,{cx:i,cy:s}=e,o=w8e({x:n,y:r},{x:i,y:s});if(o<=0)return{radius:o,angle:0};var a=(n-i)/o,l=Math.acos(a);return r>s&&(l=2*Math.PI-l),{radius:o,angle:b8e(l),angleInRadian:l}},S8e=t=>{var{startAngle:e,endAngle:n}=t,r=Math.floor(e/360),i=Math.floor(n/360),s=Math.min(r,i);return{startAngle:e-s*360,endAngle:n-s*360}},A8e=(t,e)=>{var{startAngle:n,endAngle:r}=e,i=Math.floor(n/360),s=Math.floor(r/360),o=Math.min(i,s);return t+o*360},T8e=(t,e)=>{var{chartX:n,chartY:r}=t,{radius:i,angle:s}=E8e({x:n,y:r},e),{innerRadius:o,outerRadius:a}=e;if(i<o||i>a||i===0)return null;var{startAngle:l,endAngle:c}=S8e(e),u=s,h;if(l<=c){for(;u>c;)u-=360;for(;u<l;)u+=360;h=u>=l&&u<=c}else{for(;u>l;)u-=360;for(;u<c;)u+=360;h=u>=c&&u<=l}return h?tW(tW({},e),{},{radius:i,angle:A8e(u,e)}):null};function Dle(t){var{cx:e,cy:n,radius:r,startAngle:i,endAngle:s}=t,o=gi(e,n,r,i),a=gi(e,n,r,s);return{points:[o,a],cx:e,cy:n,radius:r,startAngle:i,endAngle:s}}var nW,rW,iW,sW,oW,aW,lW;function lL(){return lL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lL.apply(null,arguments)}function Ip(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var k8e=(t,e)=>{var n=zi(e-t),r=Math.min(Math.abs(e-t),359.999);return n*r},_A=t=>{var{cx:e,cy:n,radius:r,angle:i,sign:s,isExternal:o,cornerRadius:a,cornerIsExternal:l}=t,c=a*(o?1:-1)+r,u=Math.asin(a/c)/Wk,h=l?i:i+s*u,m=gi(e,n,c,h),g=gi(e,n,r,h),y=l?i-s*u:i,v=gi(e,n,c*Math.cos(u*Wk),y);return{center:m,circleTangency:g,lineTangency:v,theta:u}},jle=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:s,endAngle:o}=t,a=k8e(s,o),l=s+a,c=gi(e,n,i,s),u=gi(e,n,i,l),h=Gr(nW||(nW=Ip(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),c.x,c.y,i,i,+(Math.abs(a)>180),+(s>l),u.x,u.y);if(r>0){var m=gi(e,n,r,s),g=gi(e,n,r,l);h+=Gr(rW||(rW=Ip(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),g.x,g.y,r,r,+(Math.abs(a)>180),+(s<=l),m.x,m.y)}else h+=Gr(iW||(iW=Ip(["L ",","," Z"])),e,n);return h},N8e=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,cornerRadius:s,forceCornerRadius:o,cornerIsExternal:a,startAngle:l,endAngle:c}=t,u=zi(c-l),{circleTangency:h,lineTangency:m,theta:g}=_A({cx:e,cy:n,radius:i,angle:l,sign:u,cornerRadius:s,cornerIsExternal:a}),{circleTangency:y,lineTangency:v,theta:b}=_A({cx:e,cy:n,radius:i,angle:c,sign:-u,cornerRadius:s,cornerIsExternal:a}),w=a?Math.abs(l-c):Math.abs(l-c)-g-b;if(w<0)return o?Gr(sW||(sW=Ip(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),m.x,m.y,s,s,s*2,s,s,-s*2):jle({cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:l,endAngle:c});var k=Gr(oW||(oW=Ip(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),m.x,m.y,s,s,+(u<0),h.x,h.y,i,i,+(w>180),+(u<0),y.x,y.y,s,s,+(u<0),v.x,v.y);if(r>0){var{circleTangency:N,lineTangency:R,theta:D}=_A({cx:e,cy:n,radius:r,angle:l,sign:u,isExternal:!0,cornerRadius:s,cornerIsExternal:a}),{circleTangency:O,lineTangency:B,theta:z}=_A({cx:e,cy:n,radius:r,angle:c,sign:-u,isExternal:!0,cornerRadius:s,cornerIsExternal:a}),U=a?Math.abs(l-c):Math.abs(l-c)-D-z;if(U<0&&s===0)return"".concat(k,"L").concat(e,",").concat(n,"Z");k+=Gr(aW||(aW=Ip(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),B.x,B.y,s,s,+(u<0),O.x,O.y,r,r,+(U>180),+(u>0),N.x,N.y,s,s,+(u<0),R.x,R.y)}else k+=Gr(lW||(lW=Ip(["L",",","Z"])),e,n);return k},C8e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Ble=t=>{var e=xi(t,C8e),{cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:o,forceCornerRadius:a,cornerIsExternal:l,startAngle:c,endAngle:u,className:h}=e;if(s<i||c===u)return null;var m=Rn("recharts-sector",h),g=s-i,y=Us(o,g,0,!0),v;return y>0&&Math.abs(c-u)<360?v=N8e({cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:Math.min(y,g/2),forceCornerRadius:a,cornerIsExternal:l,startAngle:c,endAngle:u}):v=jle({cx:n,cy:r,innerRadius:i,outerRadius:s,startAngle:c,endAngle:u}),A.createElement("path",lL({},$s(e),{className:m,d:v}))};function P8e(t,e,n){if(t==="horizontal")return[{x:e.x,y:n.top},{x:e.x,y:n.top+n.height}];if(t==="vertical")return[{x:n.left,y:e.y},{x:n.left+n.width,y:e.y}];if(gae(e)){if(t==="centric"){var{cx:r,cy:i,innerRadius:s,outerRadius:o,angle:a}=e,l=gi(r,i,s,a),c=gi(r,i,o,a);return[{x:l.x,y:l.y},{x:c.x,y:c.y}]}return Dle(e)}}var mO={},gO={},yO={},cW;function _8e(){return cW||(cW=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Nae();function n(r){return e.isSymbol(r)?NaN:Number(r)}t.toNumber=n})(yO)),yO}var uW;function I8e(){return uW||(uW=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=_8e();function n(r){return r?(r=e.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}t.toFinite=n})(gO)),gO}var dW;function R8e(){return dW||(dW=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Cae(),n=I8e();function r(i,s,o){o&&typeof o!="number"&&e.isIterateeCall(i,s,o)&&(s=o=void 0),i=n.toFinite(i),s===void 0?(s=i,i=0):s=n.toFinite(s),o=o===void 0?i<s?1:-1:n.toFinite(o);const a=Math.max(Math.ceil((s-i)/(o||1)),0),l=new Array(a);for(let c=0;c<a;c++)l[c]=i,i+=o;return l}t.range=r})(mO)),mO}var xO,fW;function O8e(){return fW||(fW=1,xO=R8e().range),xO}var M8e=O8e();const Ule=gs(M8e);function ih(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function L8e(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function $j(t){let e,n,r;t.length!==2?(e=ih,n=(a,l)=>ih(t(a),l),r=(a,l)=>t(a)-l):(e=t===ih||t===L8e?t:D8e,n=t,r=t);function i(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const h=c+u>>>1;n(a[h],l)<0?c=h+1:u=h}while(c<u)}return c}function s(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const h=c+u>>>1;n(a[h],l)<=0?c=h+1:u=h}while(c<u)}return c}function o(a,l,c=0,u=a.length){const h=i(a,l,c,u-1);return h>c&&r(a[h-1],l)>-r(a[h],l)?h-1:h}return{left:i,center:o,right:s}}function D8e(){return 0}function Fle(t){return t===null?NaN:+t}function*j8e(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const B8e=$j(ih),lE=B8e.right;$j(Fle).center;class hW extends Map{constructor(e,n=$8e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(pW(this,e))}has(e){return super.has(pW(this,e))}set(e,n){return super.set(U8e(this,e),n)}delete(e){return super.delete(F8e(this,e))}}function pW({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function U8e({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function F8e({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function $8e(t){return t!==null&&typeof t=="object"?t.valueOf():t}function z8e(t=ih){if(t===ih)return $le;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function $le(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const V8e=Math.sqrt(50),H8e=Math.sqrt(10),q8e=Math.sqrt(2);function Yk(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=V8e?10:s>=H8e?5:s>=q8e?2:1;let a,l,c;return i<0?(c=Math.pow(10,-i)/o,a=Math.round(t*c),l=Math.round(e*c),a/c<t&&++a,l/c>e&&--l,c=-c):(c=Math.pow(10,i)*o,a=Math.round(t/c),l=Math.round(e/c),a*c<t&&++a,l*c>e&&--l),l<a&&.5<=n&&n<2?Yk(t,e,n*2):[a,l,c]}function cL(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,s,o]=r?Yk(e,t,n):Yk(t,e,n);if(!(s>=i))return[];const a=s-i+1,l=new Array(a);if(r)if(o<0)for(let c=0;c<a;++c)l[c]=(s-c)/-o;else for(let c=0;c<a;++c)l[c]=(s-c)*o;else if(o<0)for(let c=0;c<a;++c)l[c]=(i+c)/-o;else for(let c=0;c<a;++c)l[c]=(i+c)*o;return l}function uL(t,e,n){return e=+e,t=+t,n=+n,Yk(t,e,n)[2]}function dL(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?uL(e,t,n):uL(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function mW(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function gW(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function zle(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?$le:z8e(i);r>n;){if(r-n>600){const l=r-n+1,c=e-n+1,u=Math.log(l),h=.5*Math.exp(2*u/3),m=.5*Math.sqrt(u*h*(l-h)/l)*(c-l/2<0?-1:1),g=Math.max(n,Math.floor(e-c*h/l+m)),y=Math.min(r,Math.floor(e+(l-c)*h/l+m));zle(t,e,g,y,i)}const s=t[e];let o=n,a=r;for(Cb(t,n,e),i(t[r],s)>0&&Cb(t,n,r);o<a;){for(Cb(t,o,a),++o,--a;i(t[o],s)<0;)++o;for(;i(t[a],s)>0;)--a}i(t[n],s)===0?Cb(t,n,a):(++a,Cb(t,a,r)),a<=e&&(n=a+1),e<=a&&(r=a-1)}return t}function Cb(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function G8e(t,e,n){if(t=Float64Array.from(j8e(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return gW(t);if(e>=1)return mW(t);var r,i=(r-1)*e,s=Math.floor(i),o=mW(zle(t,s).subarray(0,s+1)),a=gW(t.subarray(s+1));return o+(a-o)*(i-s)}}function K8e(t,e,n=Fle){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,s=Math.floor(i),o=+n(t[s],s,t),a=+n(t[s+1],s+1,t);return o+(a-o)*(i-s)}}function W8e(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++r<i;)s[r]=t+r*n;return s}function sl(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Id(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const fL=Symbol("implicit");function zj(){var t=new hW,e=[],n=[],r=fL;function i(s){let o=t.get(s);if(o===void 0){if(r!==fL)return r;t.set(s,o=e.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new hW;for(const o of s)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return zj(e,n).unknown(r)},sl.apply(i,arguments),i}function Vj(){var t=zj().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,s,o,a=!1,l=0,c=0,u=.5;delete t.unknown;function h(){var m=e().length,g=i<r,y=g?i:r,v=g?r:i;s=(v-y)/Math.max(1,m-l+c*2),a&&(s=Math.floor(s)),y+=(v-y-s*(m-l))*u,o=s*(1-l),a&&(y=Math.round(y),o=Math.round(o));var b=W8e(m).map(function(w){return y+s*w});return n(g?b.reverse():b)}return t.domain=function(m){return arguments.length?(e(m),h()):e()},t.range=function(m){return arguments.length?([r,i]=m,r=+r,i=+i,h()):[r,i]},t.rangeRound=function(m){return[r,i]=m,r=+r,i=+i,a=!0,h()},t.bandwidth=function(){return o},t.step=function(){return s},t.round=function(m){return arguments.length?(a=!!m,h()):a},t.padding=function(m){return arguments.length?(l=Math.min(1,c=+m),h()):l},t.paddingInner=function(m){return arguments.length?(l=Math.min(1,m),h()):l},t.paddingOuter=function(m){return arguments.length?(c=+m,h()):c},t.align=function(m){return arguments.length?(u=Math.max(0,Math.min(1,m)),h()):u},t.copy=function(){return Vj(e(),[r,i]).round(a).paddingInner(l).paddingOuter(c).align(u)},sl.apply(h(),arguments)}function Vle(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Vle(e())},t}function Y8e(){return Vle(Vj.apply(null,arguments).paddingInner(1))}function Hj(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Hle(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function cE(){}var i1=.7,Jk=1/i1,cy="\\s*([+-]?\\d+)\\s*",s1="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",jc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",J8e=/^#([0-9a-f]{3,8})$/,X8e=new RegExp(`^rgb\\(${cy},${cy},${cy}\\)$`),Q8e=new RegExp(`^rgb\\(${jc},${jc},${jc}\\)$`),Z8e=new RegExp(`^rgba\\(${cy},${cy},${cy},${s1}\\)$`),eje=new RegExp(`^rgba\\(${jc},${jc},${jc},${s1}\\)$`),tje=new RegExp(`^hsl\\(${s1},${jc},${jc}\\)$`),nje=new RegExp(`^hsla\\(${s1},${jc},${jc},${s1}\\)$`),yW={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Hj(cE,o1,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:xW,formatHex:xW,formatHex8:rje,formatHsl:ije,formatRgb:vW,toString:vW});function xW(){return this.rgb().formatHex()}function rje(){return this.rgb().formatHex8()}function ije(){return qle(this).formatHsl()}function vW(){return this.rgb().formatRgb()}function o1(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=J8e.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?bW(e):n===3?new So(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?IA(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?IA(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=X8e.exec(t))?new So(e[1],e[2],e[3],1):(e=Q8e.exec(t))?new So(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Z8e.exec(t))?IA(e[1],e[2],e[3],e[4]):(e=eje.exec(t))?IA(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=tje.exec(t))?SW(e[1],e[2]/100,e[3]/100,1):(e=nje.exec(t))?SW(e[1],e[2]/100,e[3]/100,e[4]):yW.hasOwnProperty(t)?bW(yW[t]):t==="transparent"?new So(NaN,NaN,NaN,0):null}function bW(t){return new So(t>>16&255,t>>8&255,t&255,1)}function IA(t,e,n,r){return r<=0&&(t=e=n=NaN),new So(t,e,n,r)}function sje(t){return t instanceof cE||(t=o1(t)),t?(t=t.rgb(),new So(t.r,t.g,t.b,t.opacity)):new So}function hL(t,e,n,r){return arguments.length===1?sje(t):new So(t,e,n,r??1)}function So(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Hj(So,hL,Hle(cE,{brighter(t){return t=t==null?Jk:Math.pow(Jk,t),new So(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?i1:Math.pow(i1,t),new So(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new So(hm(this.r),hm(this.g),hm(this.b),Xk(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:wW,formatHex:wW,formatHex8:oje,formatRgb:EW,toString:EW}));function wW(){return`#${Rp(this.r)}${Rp(this.g)}${Rp(this.b)}`}function oje(){return`#${Rp(this.r)}${Rp(this.g)}${Rp(this.b)}${Rp((isNaN(this.opacity)?1:this.opacity)*255)}`}function EW(){const t=Xk(this.opacity);return`${t===1?"rgb(":"rgba("}${hm(this.r)}, ${hm(this.g)}, ${hm(this.b)}${t===1?")":`, ${t})`}`}function Xk(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function hm(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Rp(t){return t=hm(t),(t<16?"0":"")+t.toString(16)}function SW(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ol(t,e,n,r)}function qle(t){if(t instanceof Ol)return new Ol(t.h,t.s,t.l,t.opacity);if(t instanceof cE||(t=o1(t)),!t)return new Ol;if(t instanceof Ol)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(e===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-e)/a+2:o=(e-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new Ol(o,a,l,t.opacity)}function aje(t,e,n,r){return arguments.length===1?qle(t):new Ol(t,e,n,r??1)}function Ol(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Hj(Ol,aje,Hle(cE,{brighter(t){return t=t==null?Jk:Math.pow(Jk,t),new Ol(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?i1:Math.pow(i1,t),new Ol(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new So(vO(t>=240?t-240:t+120,i,r),vO(t,i,r),vO(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Ol(AW(this.h),RA(this.s),RA(this.l),Xk(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Xk(this.opacity);return`${t===1?"hsl(":"hsla("}${AW(this.h)}, ${RA(this.s)*100}%, ${RA(this.l)*100}%${t===1?")":`, ${t})`}`}}));function AW(t){return t=(t||0)%360,t<0?t+360:t}function RA(t){return Math.max(0,Math.min(1,t||0))}function vO(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const qj=t=>()=>t;function lje(t,e){return function(n){return t+n*e}}function cje(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function uje(t){return(t=+t)==1?Gle:function(e,n){return n-e?cje(e,n,t):qj(isNaN(e)?n:e)}}function Gle(t,e){var n=e-t;return n?lje(t,n):qj(isNaN(t)?e:t)}const TW=(function t(e){var n=uje(e);function r(i,s){var o=n((i=hL(i)).r,(s=hL(s)).r),a=n(i.g,s.g),l=n(i.b,s.b),c=Gle(i.opacity,s.opacity);return function(u){return i.r=o(u),i.g=a(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=t,r})(1);function dje(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function fje(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function hje(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=sv(t[o],e[o]);for(;o<n;++o)s[o]=e[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function pje(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Qk(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function mje(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=sv(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var pL=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,bO=new RegExp(pL.source,"g");function gje(t){return function(){return t}}function yje(t){return function(e){return t(e)+""}}function xje(t,e){var n=pL.lastIndex=bO.lastIndex=0,r,i,s,o=-1,a=[],l=[];for(t=t+"",e=e+"";(r=pL.exec(t))&&(i=bO.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:Qk(r,i)})),n=bO.lastIndex;return n<e.length&&(s=e.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?yje(l[0].x):gje(e):(e=l.length,function(c){for(var u=0,h;u<e;++u)a[(h=l[u]).i]=h.x(c);return a.join("")})}function sv(t,e){var n=typeof e,r;return e==null||n==="boolean"?qj(e):(n==="number"?Qk:n==="string"?(r=o1(e))?(e=r,TW):xje:e instanceof o1?TW:e instanceof Date?pje:fje(e)?dje:Array.isArray(e)?hje:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?mje:Qk)(t,e)}function Gj(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function vje(t,e){e===void 0&&(e=t,t=sv);for(var n=0,r=e.length-1,i=e[0],s=new Array(r<0?0:r);n<r;)s[n]=t(i,i=e[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function bje(t){return function(){return t}}function Zk(t){return+t}var kW=[0,1];function eo(t){return t}function mL(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:bje(isNaN(e)?NaN:.5)}function wje(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Eje(t,e,n){var r=t[0],i=t[1],s=e[0],o=e[1];return i<r?(r=mL(i,r),s=n(o,s)):(r=mL(r,i),s=n(s,o)),function(a){return s(r(a))}}function Sje(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=mL(t[o],t[o+1]),s[o]=n(e[o],e[o+1]);return function(a){var l=lE(t,a,1,r)-1;return s[l](i[l](a))}}function uE(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function hC(){var t=kW,e=kW,n=sv,r,i,s,o=eo,a,l,c;function u(){var m=Math.min(t.length,e.length);return o!==eo&&(o=wje(t[0],t[m-1])),a=m>2?Sje:Eje,l=c=null,h}function h(m){return m==null||isNaN(m=+m)?s:(l||(l=a(t.map(r),e,n)))(r(o(m)))}return h.invert=function(m){return o(i((c||(c=a(e,t.map(r),Qk)))(m)))},h.domain=function(m){return arguments.length?(t=Array.from(m,Zk),u()):t.slice()},h.range=function(m){return arguments.length?(e=Array.from(m),u()):e.slice()},h.rangeRound=function(m){return e=Array.from(m),n=Gj,u()},h.clamp=function(m){return arguments.length?(o=m?!0:eo,u()):o!==eo},h.interpolate=function(m){return arguments.length?(n=m,u()):n},h.unknown=function(m){return arguments.length?(s=m,h):s},function(m,g){return r=m,i=g,u()}}function Kj(){return hC()(eo,eo)}function Aje(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function e2(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Px(t){return t=e2(Math.abs(t)),t?t[1]:NaN}function Tje(t,e){return function(n,r){for(var i=n.length,s=[],o=0,a=t[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),s.push(n.substring(i-=a,i+a)),!((l+=a+1)>r));)a=t[o=(o+1)%t.length];return s.reverse().join(e)}}function kje(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Nje=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function a1(t){if(!(e=Nje.exec(t)))throw new Error("invalid format: "+t);var e;return new Wj({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}a1.prototype=Wj.prototype;function Wj(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Wj.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Cje(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Kle;function Pje(t,e){var n=e2(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(Kle=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+e2(t,Math.max(0,e+s-1))[0]}function NW(t,e){var n=e2(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const CW={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Aje,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>NW(t*100,e),r:NW,s:Pje,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function PW(t){return t}var _W=Array.prototype.map,IW=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function _je(t){var e=t.grouping===void 0||t.thousands===void 0?PW:Tje(_W.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?PW:kje(_W.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(h){h=a1(h);var m=h.fill,g=h.align,y=h.sign,v=h.symbol,b=h.zero,w=h.width,k=h.comma,N=h.precision,R=h.trim,D=h.type;D==="n"?(k=!0,D="g"):CW[D]||(N===void 0&&(N=12),R=!0,D="g"),(b||m==="0"&&g==="=")&&(b=!0,m="0",g="=");var O=v==="$"?n:v==="#"&&/[boxX]/.test(D)?"0"+D.toLowerCase():"",B=v==="$"?r:/[%p]/.test(D)?o:"",z=CW[D],U=/[defgprs%]/.test(D);N=N===void 0?6:/[gprs]/.test(D)?Math.max(1,Math.min(21,N)):Math.max(0,Math.min(20,N));function $(W){var H=O,F=B,T,_,L;if(D==="c")F=z(W)+F,W="";else{W=+W;var V=W<0||1/W<0;if(W=isNaN(W)?l:z(Math.abs(W),N),R&&(W=Cje(W)),V&&+W==0&&y!=="+"&&(V=!1),H=(V?y==="("?y:a:y==="-"||y==="("?"":y)+H,F=(D==="s"?IW[8+Kle/3]:"")+F+(V&&y==="("?")":""),U){for(T=-1,_=W.length;++T<_;)if(L=W.charCodeAt(T),48>L||L>57){F=(L===46?i+W.slice(T+1):W.slice(T))+F,W=W.slice(0,T);break}}}k&&!b&&(W=e(W,1/0));var K=H.length+W.length+F.length,te=K<w?new Array(w-K+1).join(m):"";switch(k&&b&&(W=e(te+W,te.length?w-F.length:1/0),te=""),g){case"<":W=H+W+F+te;break;case"=":W=H+te+W+F;break;case"^":W=te.slice(0,K=te.length>>1)+H+W+F+te.slice(K);break;default:W=te+H+W+F;break}return s(W)}return $.toString=function(){return h+""},$}function u(h,m){var g=c((h=a1(h),h.type="f",h)),y=Math.max(-8,Math.min(8,Math.floor(Px(m)/3)))*3,v=Math.pow(10,-y),b=IW[8+y/3];return function(w){return g(v*w)+b}}return{format:c,formatPrefix:u}}var OA,Yj,Wle;Ije({thousands:",",grouping:[3],currency:["$",""]});function Ije(t){return OA=_je(t),Yj=OA.format,Wle=OA.formatPrefix,OA}function Rje(t){return Math.max(0,-Px(Math.abs(t)))}function Oje(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Px(e)/3)))*3-Px(Math.abs(t)))}function Mje(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Px(e)-Px(t))+1}function Yle(t,e,n,r){var i=dL(t,e,n),s;switch(r=a1(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=Oje(i,o))&&(r.precision=s),Wle(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=Mje(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=Rje(i))&&(r.precision=s-(r.type==="%")*2);break}}return Yj(r)}function Nh(t){var e=t.domain;return t.ticks=function(n){var r=e();return cL(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return Yle(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,o=r[i],a=r[s],l,c,u=10;for(a<o&&(c=o,o=a,a=c,c=i,i=s,s=c);u-- >0;){if(c=uL(o,a,n),c===l)return r[i]=o,r[s]=a,e(r);if(c>0)o=Math.floor(o/c)*c,a=Math.ceil(a/c)*c;else if(c<0)o=Math.ceil(o*c)/c,a=Math.floor(a*c)/c;else break;l=c}return t},t}function Jle(){var t=Kj();return t.copy=function(){return uE(t,Jle())},sl.apply(t,arguments),Nh(t)}function Xle(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,Zk),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return Xle(t).unknown(e)},t=arguments.length?Array.from(t,Zk):[0,1],Nh(n)}function Qle(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],s=t[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),t[n]=e.floor(i),t[r]=e.ceil(s),t}function RW(t){return Math.log(t)}function OW(t){return Math.exp(t)}function Lje(t){return-Math.log(-t)}function Dje(t){return-Math.exp(-t)}function jje(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Bje(t){return t===10?jje:t===Math.E?Math.exp:e=>Math.pow(t,e)}function Uje(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function MW(t){return(e,n)=>-t(-e,n)}function Jj(t){const e=t(RW,OW),n=e.domain;let r=10,i,s;function o(){return i=Uje(r),s=Bje(r),n()[0]<0?(i=MW(i),s=MW(s),t(Lje,Dje)):t(RW,OW),e}return e.base=function(a){return arguments.length?(r=+a,o()):r},e.domain=function(a){return arguments.length?(n(a),o()):n()},e.ticks=a=>{const l=n();let c=l[0],u=l[l.length-1];const h=u<c;h&&([c,u]=[u,c]);let m=i(c),g=i(u),y,v;const b=a==null?10:+a;let w=[];if(!(r%1)&&g-m<b){if(m=Math.floor(m),g=Math.ceil(g),c>0){for(;m<=g;++m)for(y=1;y<r;++y)if(v=m<0?y/s(-m):y*s(m),!(v<c)){if(v>u)break;w.push(v)}}else for(;m<=g;++m)for(y=r-1;y>=1;--y)if(v=m>0?y/s(-m):y*s(m),!(v<c)){if(v>u)break;w.push(v)}w.length*2<b&&(w=cL(c,u,b))}else w=cL(m,g,Math.min(g-m,b)).map(s);return h?w.reverse():w},e.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=a1(l)).precision==null&&(l.trim=!0),l=Yj(l)),a===1/0)return l;const c=Math.max(1,r*a/e.ticks().length);return u=>{let h=u/s(Math.round(i(u)));return h*r<r-.5&&(h*=r),h<=c?l(u):""}},e.nice=()=>n(Qle(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),e}function Zle(){const t=Jj(hC()).domain([1,10]);return t.copy=()=>uE(t,Zle()).base(t.base()),sl.apply(t,arguments),t}function LW(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function DW(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function Xj(t){var e=1,n=t(LW(e),DW(e));return n.constant=function(r){return arguments.length?t(LW(e=+r),DW(e)):e},Nh(n)}function ece(){var t=Xj(hC());return t.copy=function(){return uE(t,ece()).constant(t.constant())},sl.apply(t,arguments)}function jW(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Fje(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function $je(t){return t<0?-t*t:t*t}function Qj(t){var e=t(eo,eo),n=1;function r(){return n===1?t(eo,eo):n===.5?t(Fje,$je):t(jW(n),jW(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},Nh(e)}function Zj(){var t=Qj(hC());return t.copy=function(){return uE(t,Zj()).exponent(t.exponent())},sl.apply(t,arguments),t}function zje(){return Zj.apply(null,arguments).exponent(.5)}function BW(t){return Math.sign(t)*t*t}function Vje(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function tce(){var t=Kj(),e=[0,1],n=!1,r;function i(s){var o=Vje(t(s));return isNaN(o)?r:n?Math.round(o):o}return i.invert=function(s){return t.invert(BW(s))},i.domain=function(s){return arguments.length?(t.domain(s),i):t.domain()},i.range=function(s){return arguments.length?(t.range((e=Array.from(s,Zk)).map(BW)),i):e.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(n=!!s,i):n},i.clamp=function(s){return arguments.length?(t.clamp(s),i):t.clamp()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return tce(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},sl.apply(i,arguments),Nh(i)}function nce(){var t=[],e=[],n=[],r;function i(){var o=0,a=Math.max(1,e.length);for(n=new Array(a-1);++o<a;)n[o-1]=K8e(t,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:e[lE(n,o)]}return s.invertExtent=function(o){var a=e.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:t[0],a<n.length?n[a]:t[t.length-1]]},s.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let a of o)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(ih),i()},s.range=function(o){return arguments.length?(e=Array.from(o),i()):e.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return nce().domain(t).range(e).unknown(r)},sl.apply(s,arguments)}function rce(){var t=0,e=1,n=1,r=[.5],i=[0,1],s;function o(l){return l!=null&&l<=l?i[lE(r,l,0,n)]:s}function a(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return o}return o.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,a()):[t,e]},o.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,a()):i.slice()},o.invertExtent=function(l){var c=i.indexOf(l);return c<0?[NaN,NaN]:c<1?[t,r[0]]:c>=n?[r[n-1],e]:[r[c-1],r[c]]},o.unknown=function(l){return arguments.length&&(s=l),o},o.thresholds=function(){return r.slice()},o.copy=function(){return rce().domain([t,e]).range(i).unknown(s)},sl.apply(Nh(o),arguments)}function ice(){var t=[.5],e=[0,1],n,r=1;function i(s){return s!=null&&s<=s?e[lE(t,s,0,r)]:n}return i.domain=function(s){return arguments.length?(t=Array.from(s),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(s){return arguments.length?(e=Array.from(s),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(s){var o=e.indexOf(s);return[t[o-1],t[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return ice().domain(t).range(e).unknown(n)},sl.apply(i,arguments)}const wO=new Date,EO=new Date;function Ni(t,e,n,r){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(e(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const l=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return l;let c;do l.push(c=new Date(+s)),e(s,a),t(s);while(c<s&&s<o);return l},i.filter=s=>Ni(o=>{if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;e(o,-1),!s(o););else for(;--a>=0;)for(;e(o,1),!s(o););}),n&&(i.count=(s,o)=>(wO.setTime(+s),EO.setTime(+o),t(wO),t(EO),Math.floor(n(wO,EO))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const t2=Ni(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);t2.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Ni(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):t2);t2.range;const Ju=1e3,Wa=Ju*60,Xu=Wa*60,vd=Xu*24,e6=vd*7,UW=vd*30,SO=vd*365,Op=Ni(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Ju)},(t,e)=>(e-t)/Ju,t=>t.getUTCSeconds());Op.range;const t6=Ni(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ju)},(t,e)=>{t.setTime(+t+e*Wa)},(t,e)=>(e-t)/Wa,t=>t.getMinutes());t6.range;const n6=Ni(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Wa)},(t,e)=>(e-t)/Wa,t=>t.getUTCMinutes());n6.range;const r6=Ni(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ju-t.getMinutes()*Wa)},(t,e)=>{t.setTime(+t+e*Xu)},(t,e)=>(e-t)/Xu,t=>t.getHours());r6.range;const i6=Ni(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Xu)},(t,e)=>(e-t)/Xu,t=>t.getUTCHours());i6.range;const dE=Ni(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Wa)/vd,t=>t.getDate()-1);dE.range;const pC=Ni(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/vd,t=>t.getUTCDate()-1);pC.range;const sce=Ni(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/vd,t=>Math.floor(t/vd));sce.range;function Km(t){return Ni(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Wa)/e6)}const mC=Km(0),n2=Km(1),Hje=Km(2),qje=Km(3),_x=Km(4),Gje=Km(5),Kje=Km(6);mC.range;n2.range;Hje.range;qje.range;_x.range;Gje.range;Kje.range;function Wm(t){return Ni(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/e6)}const gC=Wm(0),r2=Wm(1),Wje=Wm(2),Yje=Wm(3),Ix=Wm(4),Jje=Wm(5),Xje=Wm(6);gC.range;r2.range;Wje.range;Yje.range;Ix.range;Jje.range;Xje.range;const s6=Ni(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());s6.range;const o6=Ni(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());o6.range;const bd=Ni(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());bd.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ni(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});bd.range;const wd=Ni(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());wd.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ni(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});wd.range;function oce(t,e,n,r,i,s){const o=[[Op,1,Ju],[Op,5,5*Ju],[Op,15,15*Ju],[Op,30,30*Ju],[s,1,Wa],[s,5,5*Wa],[s,15,15*Wa],[s,30,30*Wa],[i,1,Xu],[i,3,3*Xu],[i,6,6*Xu],[i,12,12*Xu],[r,1,vd],[r,2,2*vd],[n,1,e6],[e,1,UW],[e,3,3*UW],[t,1,SO]];function a(c,u,h){const m=u<c;m&&([c,u]=[u,c]);const g=h&&typeof h.range=="function"?h:l(c,u,h),y=g?g.range(c,+u+1):[];return m?y.reverse():y}function l(c,u,h){const m=Math.abs(u-c)/h,g=$j(([,,b])=>b).right(o,m);if(g===o.length)return t.every(dL(c/SO,u/SO,h));if(g===0)return t2.every(Math.max(dL(c,u,h),1));const[y,v]=o[m/o[g-1][2]<o[g][2]/m?g-1:g];return y.every(v)}return[a,l]}const[Qje,Zje]=oce(wd,o6,gC,sce,i6,n6),[e6e,t6e]=oce(bd,s6,mC,dE,r6,t6);function AO(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function TO(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Pb(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function n6e(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,s=t.days,o=t.shortDays,a=t.months,l=t.shortMonths,c=_b(i),u=Ib(i),h=_b(s),m=Ib(s),g=_b(o),y=Ib(o),v=_b(a),b=Ib(a),w=_b(l),k=Ib(l),N={a:V,A:K,b:te,B:G,c:null,d:qW,e:qW,f:T6e,g:L6e,G:j6e,H:E6e,I:S6e,j:A6e,L:ace,m:k6e,M:N6e,p:q,q:M,Q:WW,s:YW,S:C6e,u:P6e,U:_6e,V:I6e,w:R6e,W:O6e,x:null,X:null,y:M6e,Y:D6e,Z:B6e,"%":KW},R={a:P,A:Y,b:X,B:se,c:null,d:GW,e:GW,f:z6e,g:Q6e,G:eBe,H:U6e,I:F6e,j:$6e,L:cce,m:V6e,M:H6e,p:oe,q:me,Q:WW,s:YW,S:q6e,u:G6e,U:K6e,V:W6e,w:Y6e,W:J6e,x:null,X:null,y:X6e,Y:Z6e,Z:tBe,"%":KW},D={a:$,A:W,b:H,B:F,c:T,d:VW,e:VW,f:x6e,g:zW,G:$W,H:HW,I:HW,j:p6e,L:y6e,m:h6e,M:m6e,p:U,q:f6e,Q:b6e,s:w6e,S:g6e,u:a6e,U:l6e,V:c6e,w:o6e,W:u6e,x:_,X:L,y:zW,Y:$W,Z:d6e,"%":v6e};N.x=O(n,N),N.X=O(r,N),N.c=O(e,N),R.x=O(n,R),R.X=O(r,R),R.c=O(e,R);function O(ce,ve){return function(Ne){var pe=[],Le=-1,he=0,Te=ce.length,Ge,We,Qe;for(Ne instanceof Date||(Ne=new Date(+Ne));++Le<Te;)ce.charCodeAt(Le)===37&&(pe.push(ce.slice(he,Le)),(We=FW[Ge=ce.charAt(++Le)])!=null?Ge=ce.charAt(++Le):We=Ge==="e"?" ":"0",(Qe=ve[Ge])&&(Ge=Qe(Ne,We)),pe.push(Ge),he=Le+1);return pe.push(ce.slice(he,Le)),pe.join("")}}function B(ce,ve){return function(Ne){var pe=Pb(1900,void 0,1),Le=z(pe,ce,Ne+="",0),he,Te;if(Le!=Ne.length)return null;if("Q"in pe)return new Date(pe.Q);if("s"in pe)return new Date(pe.s*1e3+("L"in pe?pe.L:0));if(ve&&!("Z"in pe)&&(pe.Z=0),"p"in pe&&(pe.H=pe.H%12+pe.p*12),pe.m===void 0&&(pe.m="q"in pe?pe.q:0),"V"in pe){if(pe.V<1||pe.V>53)return null;"w"in pe||(pe.w=1),"Z"in pe?(he=TO(Pb(pe.y,0,1)),Te=he.getUTCDay(),he=Te>4||Te===0?r2.ceil(he):r2(he),he=pC.offset(he,(pe.V-1)*7),pe.y=he.getUTCFullYear(),pe.m=he.getUTCMonth(),pe.d=he.getUTCDate()+(pe.w+6)%7):(he=AO(Pb(pe.y,0,1)),Te=he.getDay(),he=Te>4||Te===0?n2.ceil(he):n2(he),he=dE.offset(he,(pe.V-1)*7),pe.y=he.getFullYear(),pe.m=he.getMonth(),pe.d=he.getDate()+(pe.w+6)%7)}else("W"in pe||"U"in pe)&&("w"in pe||(pe.w="u"in pe?pe.u%7:"W"in pe?1:0),Te="Z"in pe?TO(Pb(pe.y,0,1)).getUTCDay():AO(Pb(pe.y,0,1)).getDay(),pe.m=0,pe.d="W"in pe?(pe.w+6)%7+pe.W*7-(Te+5)%7:pe.w+pe.U*7-(Te+6)%7);return"Z"in pe?(pe.H+=pe.Z/100|0,pe.M+=pe.Z%100,TO(pe)):AO(pe)}}function z(ce,ve,Ne,pe){for(var Le=0,he=ve.length,Te=Ne.length,Ge,We;Le<he;){if(pe>=Te)return-1;if(Ge=ve.charCodeAt(Le++),Ge===37){if(Ge=ve.charAt(Le++),We=D[Ge in FW?ve.charAt(Le++):Ge],!We||(pe=We(ce,Ne,pe))<0)return-1}else if(Ge!=Ne.charCodeAt(pe++))return-1}return pe}function U(ce,ve,Ne){var pe=c.exec(ve.slice(Ne));return pe?(ce.p=u.get(pe[0].toLowerCase()),Ne+pe[0].length):-1}function $(ce,ve,Ne){var pe=g.exec(ve.slice(Ne));return pe?(ce.w=y.get(pe[0].toLowerCase()),Ne+pe[0].length):-1}function W(ce,ve,Ne){var pe=h.exec(ve.slice(Ne));return pe?(ce.w=m.get(pe[0].toLowerCase()),Ne+pe[0].length):-1}function H(ce,ve,Ne){var pe=w.exec(ve.slice(Ne));return pe?(ce.m=k.get(pe[0].toLowerCase()),Ne+pe[0].length):-1}function F(ce,ve,Ne){var pe=v.exec(ve.slice(Ne));return pe?(ce.m=b.get(pe[0].toLowerCase()),Ne+pe[0].length):-1}function T(ce,ve,Ne){return z(ce,e,ve,Ne)}function _(ce,ve,Ne){return z(ce,n,ve,Ne)}function L(ce,ve,Ne){return z(ce,r,ve,Ne)}function V(ce){return o[ce.getDay()]}function K(ce){return s[ce.getDay()]}function te(ce){return l[ce.getMonth()]}function G(ce){return a[ce.getMonth()]}function q(ce){return i[+(ce.getHours()>=12)]}function M(ce){return 1+~~(ce.getMonth()/3)}function P(ce){return o[ce.getUTCDay()]}function Y(ce){return s[ce.getUTCDay()]}function X(ce){return l[ce.getUTCMonth()]}function se(ce){return a[ce.getUTCMonth()]}function oe(ce){return i[+(ce.getUTCHours()>=12)]}function me(ce){return 1+~~(ce.getUTCMonth()/3)}return{format:function(ce){var ve=O(ce+="",N);return ve.toString=function(){return ce},ve},parse:function(ce){var ve=B(ce+="",!1);return ve.toString=function(){return ce},ve},utcFormat:function(ce){var ve=O(ce+="",R);return ve.toString=function(){return ce},ve},utcParse:function(ce){var ve=B(ce+="",!0);return ve.toString=function(){return ce},ve}}}var FW={"-":"",_:" ",0:"0"},Gi=/^\s*\d+/,r6e=/^%/,i6e=/[\\^$*+?|[\]().{}]/g;function $n(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(e)+i:i)}function s6e(t){return t.replace(i6e,"\\$&")}function _b(t){return new RegExp("^(?:"+t.map(s6e).join("|")+")","i")}function Ib(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function o6e(t,e,n){var r=Gi.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function a6e(t,e,n){var r=Gi.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function l6e(t,e,n){var r=Gi.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function c6e(t,e,n){var r=Gi.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function u6e(t,e,n){var r=Gi.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function $W(t,e,n){var r=Gi.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function zW(t,e,n){var r=Gi.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function d6e(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function f6e(t,e,n){var r=Gi.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function h6e(t,e,n){var r=Gi.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function VW(t,e,n){var r=Gi.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function p6e(t,e,n){var r=Gi.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function HW(t,e,n){var r=Gi.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function m6e(t,e,n){var r=Gi.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function g6e(t,e,n){var r=Gi.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function y6e(t,e,n){var r=Gi.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function x6e(t,e,n){var r=Gi.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function v6e(t,e,n){var r=r6e.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function b6e(t,e,n){var r=Gi.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function w6e(t,e,n){var r=Gi.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function qW(t,e){return $n(t.getDate(),e,2)}function E6e(t,e){return $n(t.getHours(),e,2)}function S6e(t,e){return $n(t.getHours()%12||12,e,2)}function A6e(t,e){return $n(1+dE.count(bd(t),t),e,3)}function ace(t,e){return $n(t.getMilliseconds(),e,3)}function T6e(t,e){return ace(t,e)+"000"}function k6e(t,e){return $n(t.getMonth()+1,e,2)}function N6e(t,e){return $n(t.getMinutes(),e,2)}function C6e(t,e){return $n(t.getSeconds(),e,2)}function P6e(t){var e=t.getDay();return e===0?7:e}function _6e(t,e){return $n(mC.count(bd(t)-1,t),e,2)}function lce(t){var e=t.getDay();return e>=4||e===0?_x(t):_x.ceil(t)}function I6e(t,e){return t=lce(t),$n(_x.count(bd(t),t)+(bd(t).getDay()===4),e,2)}function R6e(t){return t.getDay()}function O6e(t,e){return $n(n2.count(bd(t)-1,t),e,2)}function M6e(t,e){return $n(t.getFullYear()%100,e,2)}function L6e(t,e){return t=lce(t),$n(t.getFullYear()%100,e,2)}function D6e(t,e){return $n(t.getFullYear()%1e4,e,4)}function j6e(t,e){var n=t.getDay();return t=n>=4||n===0?_x(t):_x.ceil(t),$n(t.getFullYear()%1e4,e,4)}function B6e(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+$n(e/60|0,"0",2)+$n(e%60,"0",2)}function GW(t,e){return $n(t.getUTCDate(),e,2)}function U6e(t,e){return $n(t.getUTCHours(),e,2)}function F6e(t,e){return $n(t.getUTCHours()%12||12,e,2)}function $6e(t,e){return $n(1+pC.count(wd(t),t),e,3)}function cce(t,e){return $n(t.getUTCMilliseconds(),e,3)}function z6e(t,e){return cce(t,e)+"000"}function V6e(t,e){return $n(t.getUTCMonth()+1,e,2)}function H6e(t,e){return $n(t.getUTCMinutes(),e,2)}function q6e(t,e){return $n(t.getUTCSeconds(),e,2)}function G6e(t){var e=t.getUTCDay();return e===0?7:e}function K6e(t,e){return $n(gC.count(wd(t)-1,t),e,2)}function uce(t){var e=t.getUTCDay();return e>=4||e===0?Ix(t):Ix.ceil(t)}function W6e(t,e){return t=uce(t),$n(Ix.count(wd(t),t)+(wd(t).getUTCDay()===4),e,2)}function Y6e(t){return t.getUTCDay()}function J6e(t,e){return $n(r2.count(wd(t)-1,t),e,2)}function X6e(t,e){return $n(t.getUTCFullYear()%100,e,2)}function Q6e(t,e){return t=uce(t),$n(t.getUTCFullYear()%100,e,2)}function Z6e(t,e){return $n(t.getUTCFullYear()%1e4,e,4)}function eBe(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Ix(t):Ix.ceil(t),$n(t.getUTCFullYear()%1e4,e,4)}function tBe(){return"+0000"}function KW(){return"%"}function WW(t){return+t}function YW(t){return Math.floor(+t/1e3)}var ng,dce,fce;nBe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function nBe(t){return ng=n6e(t),dce=ng.format,ng.parse,fce=ng.utcFormat,ng.utcParse,ng}function rBe(t){return new Date(t)}function iBe(t){return t instanceof Date?+t:+new Date(+t)}function a6(t,e,n,r,i,s,o,a,l,c){var u=Kj(),h=u.invert,m=u.domain,g=c(".%L"),y=c(":%S"),v=c("%I:%M"),b=c("%I %p"),w=c("%a %d"),k=c("%b %d"),N=c("%B"),R=c("%Y");function D(O){return(l(O)<O?g:a(O)<O?y:o(O)<O?v:s(O)<O?b:r(O)<O?i(O)<O?w:k:n(O)<O?N:R)(O)}return u.invert=function(O){return new Date(h(O))},u.domain=function(O){return arguments.length?m(Array.from(O,iBe)):m().map(rBe)},u.ticks=function(O){var B=m();return t(B[0],B[B.length-1],O??10)},u.tickFormat=function(O,B){return B==null?D:c(B)},u.nice=function(O){var B=m();return(!O||typeof O.range!="function")&&(O=e(B[0],B[B.length-1],O??10)),O?m(Qle(B,O)):u},u.copy=function(){return uE(u,a6(t,e,n,r,i,s,o,a,l,c))},u}function sBe(){return sl.apply(a6(e6e,t6e,bd,s6,mC,dE,r6,t6,Op,dce).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function oBe(){return sl.apply(a6(Qje,Zje,wd,o6,gC,pC,i6,n6,Op,fce).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function yC(){var t=0,e=1,n,r,i,s,o=eo,a=!1,l;function c(h){return h==null||isNaN(h=+h)?l:o(i===0?.5:(h=(s(h)-n)*i,a?Math.max(0,Math.min(1,h)):h))}c.domain=function(h){return arguments.length?([t,e]=h,n=s(t=+t),r=s(e=+e),i=n===r?0:1/(r-n),c):[t,e]},c.clamp=function(h){return arguments.length?(a=!!h,c):a},c.interpolator=function(h){return arguments.length?(o=h,c):o};function u(h){return function(m){var g,y;return arguments.length?([g,y]=m,o=h(g,y),c):[o(0),o(1)]}}return c.range=u(sv),c.rangeRound=u(Gj),c.unknown=function(h){return arguments.length?(l=h,c):l},function(h){return s=h,n=h(t),r=h(e),i=n===r?0:1/(r-n),c}}function Ch(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function hce(){var t=Nh(yC()(eo));return t.copy=function(){return Ch(t,hce())},Id.apply(t,arguments)}function pce(){var t=Jj(yC()).domain([1,10]);return t.copy=function(){return Ch(t,pce()).base(t.base())},Id.apply(t,arguments)}function mce(){var t=Xj(yC());return t.copy=function(){return Ch(t,mce()).constant(t.constant())},Id.apply(t,arguments)}function l6(){var t=Qj(yC());return t.copy=function(){return Ch(t,l6()).exponent(t.exponent())},Id.apply(t,arguments)}function aBe(){return l6.apply(null,arguments).exponent(.5)}function gce(){var t=[],e=eo;function n(r){if(r!=null&&!isNaN(r=+r))return e((lE(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(ih),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,s)=>G8e(t,s/r))},n.copy=function(){return gce(e).domain(t)},Id.apply(n,arguments)}function xC(){var t=0,e=.5,n=1,r=1,i,s,o,a,l,c=eo,u,h=!1,m;function g(v){return isNaN(v=+v)?m:(v=.5+((v=+u(v))-s)*(r*v<r*s?a:l),c(h?Math.max(0,Math.min(1,v)):v))}g.domain=function(v){return arguments.length?([t,e,n]=v,i=u(t=+t),s=u(e=+e),o=u(n=+n),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),r=s<i?-1:1,g):[t,e,n]},g.clamp=function(v){return arguments.length?(h=!!v,g):h},g.interpolator=function(v){return arguments.length?(c=v,g):c};function y(v){return function(b){var w,k,N;return arguments.length?([w,k,N]=b,c=vje(v,[w,k,N]),g):[c(0),c(.5),c(1)]}}return g.range=y(sv),g.rangeRound=y(Gj),g.unknown=function(v){return arguments.length?(m=v,g):m},function(v){return u=v,i=v(t),s=v(e),o=v(n),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),r=s<i?-1:1,g}}function yce(){var t=Nh(xC()(eo));return t.copy=function(){return Ch(t,yce())},Id.apply(t,arguments)}function xce(){var t=Jj(xC()).domain([.1,1,10]);return t.copy=function(){return Ch(t,xce()).base(t.base())},Id.apply(t,arguments)}function vce(){var t=Xj(xC());return t.copy=function(){return Ch(t,vce()).constant(t.constant())},Id.apply(t,arguments)}function c6(){var t=Qj(xC());return t.copy=function(){return Ch(t,c6()).exponent(t.exponent())},Id.apply(t,arguments)}function lBe(){return c6.apply(null,arguments).exponent(.5)}const Zb=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Vj,scaleDiverging:yce,scaleDivergingLog:xce,scaleDivergingPow:c6,scaleDivergingSqrt:lBe,scaleDivergingSymlog:vce,scaleIdentity:Xle,scaleImplicit:fL,scaleLinear:Jle,scaleLog:Zle,scaleOrdinal:zj,scalePoint:Y8e,scalePow:Zj,scaleQuantile:nce,scaleQuantize:rce,scaleRadial:tce,scaleSequential:hce,scaleSequentialLog:pce,scaleSequentialPow:l6,scaleSequentialQuantile:gce,scaleSequentialSqrt:aBe,scaleSequentialSymlog:mce,scaleSqrt:zje,scaleSymlog:ece,scaleThreshold:ice,scaleTime:sBe,scaleUtc:oBe,tickFormat:Yle},Symbol.toStringTag,{value:"Module"}));var Rd=t=>t.chartData,vC=je([Rd],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),u6=(t,e,n,r)=>r?vC(t):Rd(t),bce=(t,e,n)=>n?vC(t):Rd(t);function yh(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(cr(e)&&cr(n))return!0}return!1}function JW(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function wce(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,r]=t,i,s;if(cr(n))i=n;else if(typeof n=="function")return;if(cr(r))s=r;else if(typeof r=="function")return;var o=[i,s];if(yh(o))return o}}function cBe(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var r=t(e,n);if(yh(r))return JW(r,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[i,s]=t,o,a;if(i==="auto")e!=null&&(o=Math.min(...e));else if(kt(i))o=i;else if(typeof i=="function")try{e!=null&&(o=i(e==null?void 0:e[0]))}catch{}else if(typeof i=="string"&&cK.test(i)){var l=cK.exec(i);if(l==null||l[1]==null||e==null)o=void 0;else{var c=+l[1];o=e[0]-c}}else o=e==null?void 0:e[0];if(s==="auto")e!=null&&(a=Math.max(...e));else if(kt(s))a=s;else if(typeof s=="function")try{e!=null&&(a=s(e==null?void 0:e[1]))}catch{}else if(typeof s=="string"&&uK.test(s)){var u=uK.exec(s);if(u==null||u[1]==null||e==null)a=void 0;else{var h=+u[1];a=e[1]+h}}else a=e==null?void 0:e[1];var m=[o,a];if(yh(m))return e==null?m:JW(m,e,n)}}}var ov=1e9,uBe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},f6,Cr=!0,tl="[DecimalError] ",pm=tl+"Invalid argument: ",d6=tl+"Exponent out of range: ",av=Math.floor,pp=Math.pow,dBe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ta,ji=1e7,Er=7,Ece=9007199254740991,i2=av(Ece/Er),_t={};_t.absoluteValue=_t.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};_t.comparedTo=_t.cmp=function(t){var e,n,r,i,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(r=s.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return r===i?0:r>i^s.s<0?1:-1};_t.decimalPlaces=_t.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*Er;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};_t.dividedBy=_t.div=function(t){return rd(this,new this.constructor(t))};_t.dividedToIntegerBy=_t.idiv=function(t){var e=this,n=e.constructor;return ar(rd(e,new n(t),0,1),n.precision)};_t.equals=_t.eq=function(t){return!this.cmp(t)};_t.exponent=function(){return yi(this)};_t.greaterThan=_t.gt=function(t){return this.cmp(t)>0};_t.greaterThanOrEqualTo=_t.gte=function(t){return this.cmp(t)>=0};_t.isInteger=_t.isint=function(){return this.e>this.d.length-2};_t.isNegative=_t.isneg=function(){return this.s<0};_t.isPositive=_t.ispos=function(){return this.s>0};_t.isZero=function(){return this.s===0};_t.lessThan=_t.lt=function(t){return this.cmp(t)<0};_t.lessThanOrEqualTo=_t.lte=function(t){return this.cmp(t)<1};_t.logarithm=_t.log=function(t){var e,n=this,r=n.constructor,i=r.precision,s=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(ta))throw Error(tl+"NaN");if(n.s<1)throw Error(tl+(n.s?"NaN":"-Infinity"));return n.eq(ta)?new r(0):(Cr=!1,e=rd(l1(n,s),l1(t,s),s),Cr=!0,ar(e,i))};_t.minus=_t.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?Tce(e,t):Sce(e,(t.s=-t.s,t))};_t.modulo=_t.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(tl+"NaN");return n.s?(Cr=!1,e=rd(n,t,0,1).times(t),Cr=!0,n.minus(e)):ar(new r(n),i)};_t.naturalExponential=_t.exp=function(){return Ace(this)};_t.naturalLogarithm=_t.ln=function(){return l1(this)};_t.negated=_t.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};_t.plus=_t.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?Sce(e,t):Tce(e,(t.s=-t.s,t))};_t.precision=_t.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(pm+t);if(e=yi(i)+1,r=i.d.length-1,n=r*Er+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};_t.squareRoot=_t.sqrt=function(){var t,e,n,r,i,s,o,a=this,l=a.constructor;if(a.s<1){if(!a.s)return new l(0);throw Error(tl+"NaN")}for(t=yi(a),Cr=!1,i=Math.sqrt(+a),i==0||i==1/0?(e=_c(a.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=av((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new l(e)):r=new l(i.toString()),n=l.precision,i=o=n+3;;)if(s=r,r=s.plus(rd(a,s,o+2)).times(.5),_c(s.d).slice(0,o)===(e=_c(r.d)).slice(0,o)){if(e=e.slice(o-3,o+1),i==o&&e=="4999"){if(ar(s,n+1,0),s.times(s).eq(a)){r=s;break}}else if(e!="9999")break;o+=4}return Cr=!0,ar(r,n)};_t.times=_t.mul=function(t){var e,n,r,i,s,o,a,l,c,u=this,h=u.constructor,m=u.d,g=(t=new h(t)).d;if(!u.s||!t.s)return new h(0);for(t.s*=u.s,n=u.e+t.e,l=m.length,c=g.length,l<c&&(s=m,m=g,g=s,o=l,l=c,c=o),s=[],o=l+c,r=o;r--;)s.push(0);for(r=c;--r>=0;){for(e=0,i=l+r;i>r;)a=s[i]+g[r]*m[i-r-1]+e,s[i--]=a%ji|0,e=a/ji|0;s[i]=(s[i]+e)%ji|0}for(;!s[--o];)s.pop();return e?++n:s.shift(),t.d=s,t.e=n,Cr?ar(t,h.precision):t};_t.toDecimalPlaces=_t.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(zc(t,0,ov),e===void 0?e=r.rounding:zc(e,0,8),ar(n,t+yi(n)+1,e))};_t.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Rm(r,!0):(zc(t,0,ov),e===void 0?e=i.rounding:zc(e,0,8),r=ar(new i(r),t+1,e),n=Rm(r,!0,t+1)),n};_t.toFixed=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?Rm(i):(zc(t,0,ov),e===void 0?e=s.rounding:zc(e,0,8),r=ar(new s(i),t+yi(i)+1,e),n=Rm(r.abs(),!1,t+yi(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};_t.toInteger=_t.toint=function(){var t=this,e=t.constructor;return ar(new e(t),yi(t)+1,e.rounding)};_t.toNumber=function(){return+this};_t.toPower=_t.pow=function(t){var e,n,r,i,s,o,a=this,l=a.constructor,c=12,u=+(t=new l(t));if(!t.s)return new l(ta);if(a=new l(a),!a.s){if(t.s<1)throw Error(tl+"Infinity");return a}if(a.eq(ta))return a;if(r=l.precision,t.eq(ta))return ar(a,r);if(e=t.e,n=t.d.length-1,o=e>=n,s=a.s,o){if((n=u<0?-u:u)<=Ece){for(i=new l(ta),e=Math.ceil(r/Er+4),Cr=!1;n%2&&(i=i.times(a),QW(i.d,e)),n=av(n/2),n!==0;)a=a.times(a),QW(a.d,e);return Cr=!0,t.s<0?new l(ta).div(i):ar(i,r)}}else if(s<0)throw Error(tl+"NaN");return s=s<0&&t.d[Math.max(e,n)]&1?-1:1,a.s=1,Cr=!1,i=t.times(l1(a,r+c)),Cr=!0,i=Ace(i),i.s=s,i};_t.toPrecision=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?(n=yi(i),r=Rm(i,n<=s.toExpNeg||n>=s.toExpPos)):(zc(t,1,ov),e===void 0?e=s.rounding:zc(e,0,8),i=ar(new s(i),t,e),n=yi(i),r=Rm(i,t<=n||n<=s.toExpNeg,t)),r};_t.toSignificantDigits=_t.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(zc(t,1,ov),e===void 0?e=r.rounding:zc(e,0,8)),ar(new r(n),t,e)};_t.toString=_t.valueOf=_t.val=_t.toJSON=_t[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=yi(t),n=t.constructor;return Rm(t,e<=n.toExpNeg||e>=n.toExpPos)};function Sce(t,e){var n,r,i,s,o,a,l,c,u=t.constructor,h=u.precision;if(!t.s||!e.s)return e.s||(e=new u(t)),Cr?ar(e,h):e;if(l=t.d,c=e.d,o=t.e,i=e.e,l=l.slice(),s=o-i,s){for(s<0?(r=l,s=-s,a=c.length):(r=c,i=o,a=l.length),o=Math.ceil(h/Er),a=o>a?o+1:a+1,s>a&&(s=a,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(a=l.length,s=c.length,a-s<0&&(s=a,r=c,c=l,l=r),n=0;s;)n=(l[--s]=l[s]+c[s]+n)/ji|0,l[s]%=ji;for(n&&(l.unshift(n),++i),a=l.length;l[--a]==0;)l.pop();return e.d=l,e.e=i,Cr?ar(e,h):e}function zc(t,e,n){if(t!==~~t||t<e||t>n)throw Error(pm+t)}function _c(t){var e,n,r,i=t.length-1,s="",o=t[0];if(i>0){for(s+=o,e=1;e<i;e++)r=t[e]+"",n=Er-r.length,n&&(s+=Pf(n)),s+=r;o=t[e],r=o+"",n=Er-r.length,n&&(s+=Pf(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var rd=(function(){function t(r,i){var s,o=0,a=r.length;for(r=r.slice();a--;)s=r[a]*i+o,r[a]=s%ji|0,o=s/ji|0;return o&&r.unshift(o),r}function e(r,i,s,o){var a,l;if(s!=o)l=s>o?1:-1;else for(a=l=0;a<s;a++)if(r[a]!=i[a]){l=r[a]>i[a]?1:-1;break}return l}function n(r,i,s){for(var o=0;s--;)r[s]-=o,o=r[s]<i[s]?1:0,r[s]=o*ji+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,o){var a,l,c,u,h,m,g,y,v,b,w,k,N,R,D,O,B,z,U=r.constructor,$=r.s==i.s?1:-1,W=r.d,H=i.d;if(!r.s)return new U(r);if(!i.s)throw Error(tl+"Division by zero");for(l=r.e-i.e,B=H.length,D=W.length,g=new U($),y=g.d=[],c=0;H[c]==(W[c]||0);)++c;if(H[c]>(W[c]||0)&&--l,s==null?k=s=U.precision:o?k=s+(yi(r)-yi(i))+1:k=s,k<0)return new U(0);if(k=k/Er+2|0,c=0,B==1)for(u=0,H=H[0],k++;(c<D||u)&&k--;c++)N=u*ji+(W[c]||0),y[c]=N/H|0,u=N%H|0;else{for(u=ji/(H[0]+1)|0,u>1&&(H=t(H,u),W=t(W,u),B=H.length,D=W.length),R=B,v=W.slice(0,B),b=v.length;b<B;)v[b++]=0;z=H.slice(),z.unshift(0),O=H[0],H[1]>=ji/2&&++O;do u=0,a=e(H,v,B,b),a<0?(w=v[0],B!=b&&(w=w*ji+(v[1]||0)),u=w/O|0,u>1?(u>=ji&&(u=ji-1),h=t(H,u),m=h.length,b=v.length,a=e(h,v,m,b),a==1&&(u--,n(h,B<m?z:H,m))):(u==0&&(a=u=1),h=H.slice()),m=h.length,m<b&&h.unshift(0),n(v,h,b),a==-1&&(b=v.length,a=e(H,v,B,b),a<1&&(u++,n(v,B<b?z:H,b))),b=v.length):a===0&&(u++,v=[0]),y[c++]=u,a&&v[0]?v[b++]=W[R]||0:(v=[W[R]],b=1);while((R++<D||v[0]!==void 0)&&k--)}return y[0]||y.shift(),g.e=l,ar(g,o?s+yi(g)+1:s)}})();function Ace(t,e){var n,r,i,s,o,a,l=0,c=0,u=t.constructor,h=u.precision;if(yi(t)>16)throw Error(d6+yi(t));if(!t.s)return new u(ta);for(Cr=!1,a=h,o=new u(.03125);t.abs().gte(.1);)t=t.times(o),c+=5;for(r=Math.log(pp(2,c))/Math.LN10*2+5|0,a+=r,n=i=s=new u(ta),u.precision=a;;){if(i=ar(i.times(t),a),n=n.times(++l),o=s.plus(rd(i,n,a)),_c(o.d).slice(0,a)===_c(s.d).slice(0,a)){for(;c--;)s=ar(s.times(s),a);return u.precision=h,e==null?(Cr=!0,ar(s,h)):s}s=o}}function yi(t){for(var e=t.e*Er,n=t.d[0];n>=10;n/=10)e++;return e}function kO(t,e,n){if(e>t.LN10.sd())throw Cr=!0,n&&(t.precision=n),Error(tl+"LN10 precision limit exceeded");return ar(new t(t.LN10),e)}function Pf(t){for(var e="";t--;)e+="0";return e}function l1(t,e){var n,r,i,s,o,a,l,c,u,h=1,m=10,g=t,y=g.d,v=g.constructor,b=v.precision;if(g.s<1)throw Error(tl+(g.s?"NaN":"-Infinity"));if(g.eq(ta))return new v(0);if(e==null?(Cr=!1,c=b):c=e,g.eq(10))return e==null&&(Cr=!0),kO(v,c);if(c+=m,v.precision=c,n=_c(y),r=n.charAt(0),s=yi(g),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)g=g.times(t),n=_c(g.d),r=n.charAt(0),h++;s=yi(g),r>1?(g=new v("0."+n),s++):g=new v(r+"."+n.slice(1))}else return l=kO(v,c+2,b).times(s+""),g=l1(new v(r+"."+n.slice(1)),c-m).plus(l),v.precision=b,e==null?(Cr=!0,ar(g,b)):g;for(a=o=g=rd(g.minus(ta),g.plus(ta),c),u=ar(g.times(g),c),i=3;;){if(o=ar(o.times(u),c),l=a.plus(rd(o,new v(i),c)),_c(l.d).slice(0,c)===_c(a.d).slice(0,c))return a=a.times(2),s!==0&&(a=a.plus(kO(v,c+2,b).times(s+""))),a=rd(a,new v(h),c),v.precision=b,e==null?(Cr=!0,ar(a,b)):a;a=l,i+=2}}function XW(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=av(n/Er),t.d=[],r=(n+1)%Er,n<0&&(r+=Er),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=Er;r<i;)t.d.push(+e.slice(r,r+=Er));e=e.slice(r),r=Er-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),Cr&&(t.e>i2||t.e<-i2))throw Error(d6+n)}else t.s=0,t.e=0,t.d=[0];return t}function ar(t,e,n){var r,i,s,o,a,l,c,u,h=t.d;for(o=1,s=h[0];s>=10;s/=10)o++;if(r=e-o,r<0)r+=Er,i=e,c=h[u=0];else{if(u=Math.ceil((r+1)/Er),s=h.length,u>=s)return t;for(c=s=h[u],o=1;s>=10;s/=10)o++;r%=Er,i=r-Er+o}if(n!==void 0&&(s=pp(10,o-i-1),a=c/s%10|0,l=e<0||h[u+1]!==void 0||c%s,l=n<4?(a||l)&&(n==0||n==(t.s<0?3:2)):a>5||a==5&&(n==4||l||n==6&&(r>0?i>0?c/pp(10,o-i):0:h[u-1])%10&1||n==(t.s<0?8:7))),e<1||!h[0])return l?(s=yi(t),h.length=1,e=e-s-1,h[0]=pp(10,(Er-e%Er)%Er),t.e=av(-e/Er)||0):(h.length=1,h[0]=t.e=t.s=0),t;if(r==0?(h.length=u,s=1,u--):(h.length=u+1,s=pp(10,Er-r),h[u]=i>0?(c/pp(10,o-i)%pp(10,i)|0)*s:0),l)for(;;)if(u==0){(h[0]+=s)==ji&&(h[0]=1,++t.e);break}else{if(h[u]+=s,h[u]!=ji)break;h[u--]=0,s=1}for(r=h.length;h[--r]===0;)h.pop();if(Cr&&(t.e>i2||t.e<-i2))throw Error(d6+yi(t));return t}function Tce(t,e){var n,r,i,s,o,a,l,c,u,h,m=t.constructor,g=m.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new m(t),Cr?ar(e,g):e;if(l=t.d,h=e.d,r=e.e,c=t.e,l=l.slice(),o=c-r,o){for(u=o<0,u?(n=l,o=-o,a=h.length):(n=h,r=c,a=l.length),i=Math.max(Math.ceil(g/Er),a)+2,o>i&&(o=i,n.length=1),n.reverse(),i=o;i--;)n.push(0);n.reverse()}else{for(i=l.length,a=h.length,u=i<a,u&&(a=i),i=0;i<a;i++)if(l[i]!=h[i]){u=l[i]<h[i];break}o=0}for(u&&(n=l,l=h,h=n,e.s=-e.s),a=l.length,i=h.length-a;i>0;--i)l[a++]=0;for(i=h.length;i>o;){if(l[--i]<h[i]){for(s=i;s&&l[--s]===0;)l[s]=ji-1;--l[s],l[i]+=ji}l[i]-=h[i]}for(;l[--a]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,Cr?ar(e,g):e):new m(0)}function Rm(t,e,n){var r,i=yi(t),s=_c(t.d),o=s.length;return e?(n&&(r=n-o)>0?s=s.charAt(0)+"."+s.slice(1)+Pf(r):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+Pf(-i-1)+s,n&&(r=n-o)>0&&(s+=Pf(r))):i>=o?(s+=Pf(i+1-o),n&&(r=n-i-1)>0&&(s=s+"."+Pf(r))):((r=i+1)<o&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(s+="."),s+=Pf(r))),t.s<0?"-"+s:s}function QW(t,e){if(t.length>e)return t.length=e,!0}function kce(t){var e,n,r;function i(s){var o=this;if(!(o instanceof i))return new i(s);if(o.constructor=i,s instanceof i){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(pm+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return XW(o,s.toString())}else if(typeof s!="string")throw Error(pm+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,dBe.test(s))XW(o,s);else throw Error(pm+s)}if(i.prototype=_t,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=kce,i.config=i.set=fBe,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function fBe(t){if(!t||typeof t!="object")throw Error(tl+"Object expected");var e,n,r,i=["precision",1,ov,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(av(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(pm+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(pm+n+": "+r);return this}var f6=kce(uBe);ta=new f6(1);const Qn=f6;var hBe=t=>t,Nce={},Cce=t=>t===Nce,ZW=t=>function e(){return arguments.length===0||arguments.length===1&&Cce(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},Pce=(t,e)=>t===1?e:ZW(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=r.filter(o=>o!==Nce).length;return s>=t?e(...r):Pce(t-s,ZW(function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];var c=r.map(u=>Cce(u)?a.shift():u);return e(...c,...a)}))}),pBe=t=>Pce(t.length,t),gL=(t,e)=>{for(var n=[],r=t;r<e;++r)n[r-t]=r;return n},mBe=pBe((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(n=>e[n]).map(t)),gBe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return hBe;var i=n.reverse(),s=i[0],o=i.slice(1);return function(){return o.reduce((a,l)=>l(a),s(...arguments))}};function _ce(t){var e;return t===0?e=1:e=Math.floor(new Qn(t).abs().log(10).toNumber())+1,e}function Ice(t,e,n){for(var r=new Qn(t),i=0,s=[];r.lt(e)&&i<1e5;)s.push(r.toNumber()),r=r.add(n),i++;return s}var Rce=t=>{var[e,n]=t,[r,i]=[e,n];return e>n&&([r,i]=[n,e]),[r,i]},Oce=(t,e,n)=>{if(t.lte(0))return new Qn(0);var r=_ce(t.toNumber()),i=new Qn(10).pow(r),s=t.div(i),o=r!==1?.05:.1,a=new Qn(Math.ceil(s.div(o).toNumber())).add(n).mul(o),l=a.mul(i);return e?new Qn(l.toNumber()):new Qn(Math.ceil(l.toNumber()))},yBe=(t,e,n)=>{var r=new Qn(1),i=new Qn(t);if(!i.isint()&&n){var s=Math.abs(t);s<1?(r=new Qn(10).pow(_ce(t)-1),i=new Qn(Math.floor(i.div(r).toNumber())).mul(r)):s>1&&(i=new Qn(Math.floor(t)))}else t===0?i=new Qn(Math.floor((e-1)/2)):n||(i=new Qn(Math.floor(t)));var o=Math.floor((e-1)/2),a=gBe(mBe(l=>i.add(new Qn(l-o).mul(r)).toNumber()),gL);return a(0,e)},Mce=function(e,n,r,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(r-1)))return{step:new Qn(0),tickMin:new Qn(0),tickMax:new Qn(0)};var o=Oce(new Qn(n).sub(e).div(r-1),i,s),a;e<=0&&n>=0?a=new Qn(0):(a=new Qn(e).add(n).div(2),a=a.sub(new Qn(a).mod(o)));var l=Math.ceil(a.sub(e).div(o).toNumber()),c=Math.ceil(new Qn(n).sub(a).div(o).toNumber()),u=l+c+1;return u>r?Mce(e,n,r,i,s+1):(u<r&&(c=n>0?c+(r-u):c,l=n>0?l:l+(r-u)),{step:o,tickMin:a.sub(new Qn(l).mul(o)),tickMax:a.add(new Qn(c).mul(o))})},xBe=function(e){var[n,r]=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(i,2),[a,l]=Rce([n,r]);if(a===-1/0||l===1/0){var c=l===1/0?[a,...gL(0,i-1).map(()=>1/0)]:[...gL(0,i-1).map(()=>-1/0),l];return n>r?c.reverse():c}if(a===l)return yBe(a,i,s);var{step:u,tickMin:h,tickMax:m}=Mce(a,l,o,s,0),g=Ice(h,m.add(new Qn(.1).mul(u)),u);return n>r?g.reverse():g},vBe=function(e,n){var[r,i]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[o,a]=Rce([r,i]);if(o===-1/0||a===1/0)return[r,i];if(o===a)return[o];var l=Math.max(n,2),c=Oce(new Qn(a).sub(o).div(l-1),s,0),u=[...Ice(new Qn(o),new Qn(a),c),a];return s===!1&&(u=u.map(h=>Math.round(h))),r>i?u.reverse():u},Lce=t=>t.rootProps.maxBarSize,bBe=t=>t.rootProps.barGap,Dce=t=>t.rootProps.barCategoryGap,wBe=t=>t.rootProps.barSize,fE=t=>t.rootProps.stackOffset,jce=t=>t.rootProps.reverseStackOrder,h6=t=>t.options.chartName,p6=t=>t.rootProps.syncId,Bce=t=>t.rootProps.syncMethod,m6=t=>t.options.eventEmitter,EBe=t=>t.rootProps.baseValue,ii={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Hu={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Yo={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},bC=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},SBe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Hu.angleAxisId,includeHidden:!1,name:void 0,reversed:Hu.reversed,scale:Hu.scale,tick:Hu.tick,tickCount:void 0,ticks:void 0,type:Hu.type,unit:void 0},ABe={allowDataOverflow:Yo.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Yo.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Yo.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Yo.scale,tick:Yo.tick,tickCount:Yo.tickCount,ticks:void 0,type:Yo.type,unit:void 0},TBe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Hu.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Hu.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Hu.scale,tick:Hu.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},kBe={allowDataOverflow:Yo.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Yo.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Yo.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Yo.scale,tick:Yo.tick,tickCount:Yo.tickCount,ticks:void 0,type:"category",unit:void 0},g6=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?TBe:SBe,y6=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?kBe:ABe,wC=t=>t.polarOptions,x6=je([Pd,_d,ki],Lle),Uce=je([wC,x6],(t,e)=>{if(t!=null)return Us(t.innerRadius,e,0)}),Fce=je([wC,x6],(t,e)=>{if(t!=null)return Us(t.outerRadius,e,e*.8)}),NBe=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},$ce=je([wC],NBe);je([g6,$ce],bC);var zce=je([x6,Uce,Fce],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});je([y6,zce],bC);var Vce=je([Tn,wC,Uce,Fce,Pd,_d],(t,e,n,r,i,s)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||r==null)){var{cx:o,cy:a,startAngle:l,endAngle:c}=e;return{cx:Us(o,i,i/2),cy:Us(a,s,s/2),innerRadius:n,outerRadius:r,startAngle:l,endAngle:c,clockWise:!1}}}),Ir=(t,e)=>e,hE=(t,e,n)=>n;function EC(t){return t==null?void 0:t.id}function Hce(t,e,n){var{chartData:r=[]}=e,{allowDuplicatedCategory:i,dataKey:s}=n,o=new Map;return t.forEach(a=>{var l,c=(l=a.data)!==null&&l!==void 0?l:r;if(!(c==null||c.length===0)){var u=EC(a);c.forEach((h,m)=>{var g=s==null||i?m:String(Wn(h,s,null)),y=Wn(h,a.dataKey,0),v;o.has(g)?v=o.get(g):v={},Object.assign(v,{[u]:y}),o.set(g,v)})}}),Array.from(o.values())}function SC(t){return"stackId"in t&&t.stackId!=null&&t.dataKey!=null}var AC=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function TC(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function CBe(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return!1}var Ci=t=>{var e=Tn(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},lv=t=>t.tooltip.settings.axisId;function eY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function s2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eY(Object(n),!0).forEach(function(r){PBe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function PBe(t,e,n){return(e=_Be(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _Be(t){var e=IBe(t,"string");return typeof e=="symbol"?e:e+""}function IBe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yL=[0,"auto"],Ri={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},qce=(t,e)=>t.cartesianAxis.xAxis[e],Od=(t,e)=>{var n=qce(t,e);return n??Ri},Oi={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:yL,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:sE},Gce=(t,e)=>t.cartesianAxis.yAxis[e],Md=(t,e)=>{var n=Gce(t,e);return n??Oi},RBe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},v6=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??RBe},Ur=(t,e,n)=>{switch(e){case"xAxis":return Od(t,n);case"yAxis":return Md(t,n);case"zAxis":return v6(t,n);case"angleAxis":return g6(t,n);case"radiusAxis":return y6(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},OBe=(t,e,n)=>{switch(e){case"xAxis":return Od(t,n);case"yAxis":return Md(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},pE=(t,e,n)=>{switch(e){case"xAxis":return Od(t,n);case"yAxis":return Md(t,n);case"angleAxis":return g6(t,n);case"radiusAxis":return y6(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},Kce=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function b6(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var mE=t=>t.graphicalItems.cartesianItems,MBe=je([Ir,hE],b6),w6=(t,e,n)=>t.filter(n).filter(r=>(e==null?void 0:e.includeHidden)===!0?!0:!r.hide),gE=je([mE,Ur,MBe],w6,{memoizeOptions:{resultEqualityCheck:TC}}),Wce=je([gE],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(SC)),Yce=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),LBe=je([gE],Yce),E6=t=>t.map(e=>e.data).filter(Boolean).flat(1),DBe=je([gE],E6,{memoizeOptions:{resultEqualityCheck:TC}}),S6=(t,e)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=e;return t.length>0?t:n.slice(r,i+1)},A6=je([DBe,u6],S6),T6=(t,e,n)=>(e==null?void 0:e.dataKey)!=null?t.map(r=>({value:Wn(r,e.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>t.map(i=>({value:Wn(i,r)}))):t.map(r=>({value:r})),kC=je([A6,Ur,gE],T6);function Jce(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function MT(t){if(Fc(t)||t instanceof Date){var e=Number(t);if(cr(e))return e}}function tY(t){if(Array.isArray(t)){var e=[MT(t[0]),MT(t[1])];return yh(e)?e:void 0}var n=MT(t);if(n!=null)return[n,n]}function Ed(t){return t.map(MT).filter(Q4e)}function jBe(t,e,n){return!n||typeof e!="number"||Za(e)?[]:n.length?Ed(n.flatMap(r=>{var i=Wn(t,r.dataKey),s,o;if(Array.isArray(i)?[s,o]=i:s=o=i,!(!cr(s)||!cr(o)))return[e-s,e+o]})):[]}var Pi=t=>{var e=Ci(t),n=lv(t);return pE(t,e,n)},yE=je([Pi],t=>t==null?void 0:t.dataKey),BBe=je([Wce,u6,Pi],Hce),Xce=(t,e,n,r)=>{var i={},s=e.reduce((o,a)=>{if(a.stackId==null)return o;var l=o[a.stackId];return l==null&&(l=[]),l.push(a),o[a.stackId]=l,o},i);return Object.fromEntries(Object.entries(s).map(o=>{var[a,l]=o,c=r?[...l].reverse():l,u=c.map(EC);return[a,{stackedData:yLe(t,u,n),graphicalItems:c}]}))},o2=je([BBe,Wce,fE,jce],Xce),Qce=(t,e,n,r)=>{var{dataStartIndex:i,dataEndIndex:s}=e;if(r==null&&n!=="zAxis"){var o=wLe(t,i,s);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},UBe=je([Ur],t=>t.allowDataOverflow),k6=t=>{var e;if(t==null||!("domain"in t))return yL;if(t.domain!=null)return t.domain;if("ticks"in t&&t.ticks!=null){if(t.type==="number"){var n=Ed(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t==null?void 0:t.domain)!==null&&e!==void 0?e:yL},N6=je([Ur],k6),C6=je([N6,UBe],wce),FBe=je([o2,Rd,Ir,C6],Qce,{memoizeOptions:{resultEqualityCheck:AC}}),NC=t=>t.errorBars,$Be=(t,e,n)=>t.flatMap(r=>e[r.id]).filter(Boolean).filter(r=>Jce(n,r)),a2=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var s=i.flat(),o=Math.min(...s),a=Math.max(...s);return[o,a]}},P6=(t,e,n,r,i)=>{var s,o;if(n.length>0&&t.forEach(a=>{n.forEach(l=>{var c,u,h=(c=r[l.id])===null||c===void 0?void 0:c.filter(w=>Jce(i,w)),m=Wn(a,(u=e.dataKey)!==null&&u!==void 0?u:l.dataKey),g=jBe(a,m,h);if(g.length>=2){var y=Math.min(...g),v=Math.max(...g);(s==null||y<s)&&(s=y),(o==null||v>o)&&(o=v)}var b=tY(m);b!=null&&(s=s==null?b[0]:Math.min(s,b[0]),o=o==null?b[1]:Math.max(o,b[1]))})}),(e==null?void 0:e.dataKey)!=null&&t.forEach(a=>{var l=tY(Wn(a,e.dataKey));l!=null&&(s=s==null?l[0]:Math.min(s,l[0]),o=o==null?l[1]:Math.max(o,l[1]))}),cr(s)&&cr(o))return[s,o]},zBe=je([A6,Ur,LBe,NC,Ir],P6,{memoizeOptions:{resultEqualityCheck:AC}});function VBe(t){var{value:e}=t;if(Fc(e)||e instanceof Date)return e}var HBe=(t,e,n)=>{var r=t.map(VBe).filter(i=>i!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&fae(r))?Ule(0,t.length):e.allowDuplicatedCategory?r:Array.from(new Set(r))},Zce=t=>t.referenceElements.dots,cv=(t,e,n)=>t.filter(r=>r.ifOverflow==="extendDomain").filter(r=>e==="xAxis"?r.xAxisId===n:r.yAxisId===n),qBe=je([Zce,Ir,hE],cv),eue=t=>t.referenceElements.areas,GBe=je([eue,Ir,hE],cv),tue=t=>t.referenceElements.lines,KBe=je([tue,Ir,hE],cv),nue=(t,e)=>{if(t!=null){var n=Ed(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},WBe=je(qBe,Ir,nue),rue=(t,e)=>{if(t!=null){var n=Ed(t.flatMap(r=>[e==="xAxis"?r.x1:r.y1,e==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},YBe=je([GBe,Ir],rue);function JBe(t){var e;if(t.x!=null)return Ed([t.x]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.x);return n==null||n.length===0?[]:Ed(n)}function XBe(t){var e;if(t.y!=null)return Ed([t.y]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.y);return n==null||n.length===0?[]:Ed(n)}var iue=(t,e)=>{if(t!=null){var n=t.flatMap(r=>e==="xAxis"?JBe(r):XBe(r));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},QBe=je([KBe,Ir],iue),ZBe=je(WBe,QBe,YBe,(t,e,n)=>a2(t,n,e)),_6=(t,e,n,r,i,s,o,a)=>{if(n!=null)return n;var l=o==="vertical"&&a==="xAxis"||o==="horizontal"&&a==="yAxis",c=l?a2(r,s,i):a2(s,i);return cBe(e,c,t.allowDataOverflow)},e7e=je([Ur,N6,C6,FBe,zBe,ZBe,Tn,Ir],_6,{memoizeOptions:{resultEqualityCheck:AC}}),t7e=[0,1],I6=(t,e,n,r,i,s,o)=>{if(!((t==null||n==null||n.length===0)&&o===void 0)){var{dataKey:a,type:l}=t,c=Kc(e,s);if(c&&a==null){var u;return Ule(0,(u=n==null?void 0:n.length)!==null&&u!==void 0?u:0)}return l==="category"?HBe(r,t,c):i==="expand"?t7e:o}},R6=je([Ur,Tn,A6,kC,fE,Ir,e7e],I6),sue=(t,e,n,r,i)=>{if(t!=null){var{scale:s,type:o}=t;if(s==="auto")return e==="radial"&&i==="radiusAxis"?"band":e==="radial"&&i==="angleAxis"?"linear":o==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":o==="category"?"band":"linear";if(typeof s=="string"){var a="scale".concat(eE(s));return a in Zb?a:"point"}}},uv=je([Ur,Tn,Kce,h6,Ir],sue);function n7e(t){if(t!=null){if(t in Zb)return Zb[t]();var e="scale".concat(eE(t));if(e in Zb)return Zb[e]()}}function O6(t,e,n,r){if(!(n==null||r==null)){if(typeof t.scale=="function")return t.scale.copy().domain(n).range(r);var i=n7e(e);if(i!=null){var s=i.domain(n).range(r);return fLe(s),s}}}var M6=(t,e,n)=>{var r=k6(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&yh(t))return xBe(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&yh(t))return vBe(t,e.tickCount,e.allowDecimals)}},L6=je([R6,pE,uv],M6),D6=(t,e,n,r)=>{if(r!=="angleAxis"&&(t==null?void 0:t.type)==="number"&&yh(e)&&Array.isArray(n)&&n.length>0){var i=e[0],s=n[0],o=e[1],a=n[n.length-1];return[Math.min(i,s),Math.max(o,a)]}return e},r7e=je([Ur,R6,L6,Ir],D6),i7e=je(kC,Ur,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,r=Array.from(Ed(t.map(h=>h.value))).sort((h,m)=>h-m),i=r[0],s=r[r.length-1];if(i==null||s==null)return 1/0;var o=s-i;if(o===0)return 1/0;for(var a=0;a<r.length-1;a++){var l=r[a],c=r[a+1];if(!(l==null||c==null)){var u=c-l;n=Math.min(n,u)}}return n/o}}),oue=je(i7e,Tn,Dce,ki,(t,e,n,r,i)=>i,(t,e,n,r,i)=>{if(!cr(t))return 0;var s=e==="vertical"?r.height:r.width;if(i==="gap")return t*s/2;if(i==="no-gap"){var o=Us(n,t*s),a=t*s/2;return a-o-(a-o)/s*o}return 0}),s7e=(t,e,n)=>{var r=Od(t,e);return r==null||typeof r.padding!="string"?0:oue(t,"xAxis",e,n,r.padding)},o7e=(t,e,n)=>{var r=Md(t,e);return r==null||typeof r.padding!="string"?0:oue(t,"yAxis",e,n,r.padding)},a7e=je(Od,s7e,(t,e)=>{var n,r;if(t==null)return{left:0,right:0};var{padding:i}=t;return typeof i=="string"?{left:e,right:e}:{left:((n=i.left)!==null&&n!==void 0?n:0)+e,right:((r=i.right)!==null&&r!==void 0?r:0)+e}}),l7e=je(Md,o7e,(t,e)=>{var n,r;if(t==null)return{top:0,bottom:0};var{padding:i}=t;return typeof i=="string"?{top:e,bottom:e}:{top:((n=i.top)!==null&&n!==void 0?n:0)+e,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+e}}),c7e=je([ki,a7e,aC,oC,(t,e,n)=>n],(t,e,n,r,i)=>{var{padding:s}=r;return i?[s.left,n.width-s.right]:[t.left+e.left,t.left+t.width-e.right]}),u7e=je([ki,Tn,l7e,aC,oC,(t,e,n)=>n],(t,e,n,r,i,s)=>{var{padding:o}=i;return s?[r.height-o.bottom,o.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),xE=(t,e,n,r)=>{var i;switch(e){case"xAxis":return c7e(t,n,r);case"yAxis":return u7e(t,n,r);case"zAxis":return(i=v6(t,n))===null||i===void 0?void 0:i.range;case"angleAxis":return $ce(t);case"radiusAxis":return zce(t,n);default:return}},aue=je([Ur,xE],bC),CC=je([Ur,uv,r7e,aue],O6);je([gE,NC,Ir],$Be);function lue(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var PC=(t,e)=>e,_C=(t,e,n)=>n,d7e=je(iC,PC,_C,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(lue)),f7e=je(sC,PC,_C,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(lue)),cue=(t,e)=>({width:t.width,height:e.height}),h7e=(t,e)=>{var n=typeof e.width=="number"?e.width:sE;return{width:n,height:t.height}},uue=je(ki,Od,cue),p7e=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},m7e=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},g7e=je(_d,ki,d7e,PC,_C,(t,e,n,r,i)=>{var s={},o;return n.forEach(a=>{var l=cue(e,a);o==null&&(o=p7e(e,r,t));var c=r==="top"&&!i||r==="bottom"&&i;s[a.id]=o-Number(c)*l.height,o+=(c?-1:1)*l.height}),s}),y7e=je(Pd,ki,f7e,PC,_C,(t,e,n,r,i)=>{var s={},o;return n.forEach(a=>{var l=h7e(e,a);o==null&&(o=m7e(e,r,t));var c=r==="left"&&!i||r==="right"&&i;s[a.id]=o-Number(c)*l.width,o+=(c?-1:1)*l.width}),s}),x7e=(t,e)=>{var n=Od(t,e);if(n!=null)return g7e(t,n.orientation,n.mirror)},v7e=je([ki,Od,x7e,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n==null?void 0:n[r];return i==null?{x:t.left,y:0}:{x:t.left,y:i}}}),b7e=(t,e)=>{var n=Md(t,e);if(n!=null)return y7e(t,n.orientation,n.mirror)},w7e=je([ki,Md,b7e,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n==null?void 0:n[r];return i==null?{x:0,y:t.top}:{x:i,y:t.top}}}),due=je(ki,Md,(t,e)=>{var n=typeof e.width=="number"?e.width:sE;return{width:n,height:t.height}}),nY=(t,e,n)=>{switch(e){case"xAxis":return uue(t,n).width;case"yAxis":return due(t,n).height;default:return}},fue=(t,e,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:s,dataKey:o}=n,a=Kc(t,r),l=e.map(c=>c.value);if(o&&a&&s==="category"&&i&&fae(l))return l}},j6=je([Tn,kC,Ur,Ir],fue),hue=(t,e,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:s}=n,o=Kc(t,r);if(o&&(i==="number"||s!=="auto"))return e.map(a=>a.value)}},B6=je([Tn,kC,pE,Ir],hue),rY=je([Tn,OBe,uv,CC,j6,B6,xE,L6,Ir],(t,e,n,r,i,s,o,a,l)=>{if(e!=null){var c=Kc(t,l);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:l,categoricalDomain:s,duplicateDomain:i,isCategorical:c,niceTicks:a,range:o,realScaleType:n,scale:r}}}),E7e=(t,e,n,r,i,s,o,a,l)=>{if(!(e==null||r==null)){var c=Kc(t,l),{type:u,ticks:h,tickCount:m}=e,g=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,y=u==="category"&&r.bandwidth?r.bandwidth()/g:0;y=l==="angleAxis"&&s!=null&&s.length>=2?zi(s[0]-s[1])*2*y:y;var v=h||i;if(v){var b=v.map((w,k)=>{var N=o?o.indexOf(w):w;return{index:k,coordinate:r(N)+y,value:w,offset:y}});return b.filter(w=>cr(w.coordinate))}return c&&a?a.map((w,k)=>({coordinate:r(w)+y,value:w,index:k,offset:y})).filter(w=>cr(w.coordinate)):r.ticks?r.ticks(m).map(w=>({coordinate:r(w)+y,value:w,offset:y})):r.domain().map((w,k)=>({coordinate:r(w)+y,value:o?o[w]:w,index:k,offset:y}))}},pue=je([Tn,pE,uv,CC,L6,xE,j6,B6,Ir],E7e),S7e=(t,e,n,r,i,s,o)=>{if(!(e==null||n==null||r==null||r[0]===r[1])){var a=Kc(t,o),{tickCount:l}=e,c=0;return c=o==="angleAxis"&&(r==null?void 0:r.length)>=2?zi(r[0]-r[1])*2*c:c,a&&s?s.map((u,h)=>({coordinate:n(u)+c,value:u,index:h,offset:c})):n.ticks?n.ticks(l).map(u=>({coordinate:n(u)+c,value:u,offset:c})):n.domain().map((u,h)=>({coordinate:n(u)+c,value:i?i[u]:u,index:h,offset:c}))}},Vc=je([Tn,pE,CC,xE,j6,B6,Ir],S7e),Hc=je(Ur,CC,(t,e)=>{if(!(t==null||e==null))return s2(s2({},t),{},{scale:e})}),A7e=je([Ur,uv,R6,aue],O6);je((t,e,n)=>v6(t,n),A7e,(t,e)=>{if(!(t==null||e==null))return s2(s2({},t),{},{scale:e})});var T7e=je([Tn,iC,sC],(t,e,n)=>{switch(t){case"horizontal":return e.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),mue=t=>t.options.defaultTooltipEventType,gue=t=>t.options.validateTooltipEventTypes;function yue(t,e,n){if(t==null)return e;var r=t?"axis":"item";return n==null?e:n.includes(r)?r:e}function U6(t,e){var n=mue(t),r=gue(t);return yue(e,n,r)}function k7e(t){return Lt(e=>U6(e,t))}var xue=(t,e)=>{var n,r=Number(e);if(!(Za(r)||e==null))return r>=0?t==null||(n=t[r])===null||n===void 0?void 0:n.value:void 0},N7e=t=>t.tooltip.settings,Mf={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},C7e={itemInteraction:{click:Mf,hover:Mf},axisInteraction:{click:Mf,hover:Mf},keyboardInteraction:Mf,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},vue=Co({name:"tooltip",initialState:C7e,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:kr()},replaceTooltipEntrySettings:{reducer(t,e){var{prev:n,next:r}=e.payload,i=jl(t).tooltipItemPayloads.indexOf(n);i>-1&&(t.tooltipItemPayloads[i]=r)},prepare:kr()},removeTooltipEntrySettings:{reducer(t,e){var n=jl(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},prepare:kr()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate}}}),{addTooltipEntrySettings:P7e,replaceTooltipEntrySettings:_7e,removeTooltipEntrySettings:I7e,setTooltipSettingsState:R7e,setActiveMouseOverItemIndex:bue,mouseLeaveItem:O7e,mouseLeaveChart:wue,setActiveClickItemIndex:M7e,setMouseOverAxisIndex:Eue,setMouseClickAxisIndex:L7e,setSyncInteraction:xL,setKeyboardInteraction:vL}=vue.actions,D7e=vue.reducer;function iY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function MA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iY(Object(n),!0).forEach(function(r){j7e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function j7e(t,e,n){return(e=B7e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function B7e(t){var e=U7e(t,"string");return typeof e=="symbol"?e:e+""}function U7e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function F7e(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function $7e(t){return t.index!=null}var Sue=(t,e,n,r)=>{if(e==null)return Mf;var i=F7e(t,e,n);if(i==null)return Mf;if(i.active)return i;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var s=t.settings.active===!0;if($7e(i)){if(s)return MA(MA({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r,graphicalItemId:void 0};return MA(MA({},Mf),{},{coordinate:i.coordinate})};function z7e(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var e=t.valueOf();return Number.isFinite(e)?e:void 0}var n=Number(t);return Number.isFinite(n)?n:void 0}function V7e(t,e){var n=z7e(t),r=e[0],i=e[1];if(n===void 0)return!1;var s=Math.min(r,i),o=Math.max(r,i);return n>=s&&n<=o}function H7e(t,e,n){if(n==null||e==null)return!0;var r=Wn(t,e);return r==null||!yh(n)?!0:V7e(r,n)}var F6=(t,e,n,r)=>{var i=t==null?void 0:t.index;if(i==null)return null;var s=Number(i);if(!cr(s))return i;var o=0,a=1/0;e.length>0&&(a=e.length-1);var l=Math.max(o,Math.min(s,a)),c=e[l];return c==null||H7e(c,n,r)?String(l):null},Aue=(t,e,n,r,i,s,o,a)=>{if(!(s==null||a==null)){var l=o[0],c=l==null?void 0:a(l.positions,s);if(c!=null)return c;var u=i==null?void 0:i[Number(s)];if(u)switch(n){case"horizontal":return{x:u.coordinate,y:(r.top+e)/2};default:return{x:(r.left+t)/2,y:u.coordinate}}}},Tue=(t,e,n,r)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var i;if(n==="hover"?i=t.itemInteraction.hover.graphicalItemId:i=t.itemInteraction.click.graphicalItemId,i==null&&r!=null){var s=t.tooltipItemPayloads[0];return s!=null?[s]:[]}return t.tooltipItemPayloads.filter(o=>{var a;return((a=o.settings)===null||a===void 0?void 0:a.graphicalItemId)===i})},vE=t=>t.options.tooltipPayloadSearcher,dv=t=>t.tooltip;function sY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function oY(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sY(Object(n),!0).forEach(function(r){q7e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function q7e(t,e,n){return(e=G7e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function G7e(t){var e=K7e(t,"string");return typeof e=="symbol"?e:e+""}function K7e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function W7e(t,e){return t??e}var kue=(t,e,n,r,i,s,o)=>{if(!(e==null||s==null)){var{chartData:a,computedData:l,dataStartIndex:c,dataEndIndex:u}=n,h=[];return t.reduce((m,g)=>{var y,{dataDefinedOnItem:v,settings:b}=g,w=W7e(v,a),k=Array.isArray(w)?sle(w,c,u):w,N=(y=b==null?void 0:b.dataKey)!==null&&y!==void 0?y:r,R=b==null?void 0:b.nameKey,D;if(r&&Array.isArray(k)&&!Array.isArray(k[0])&&o==="axis"?D=hae(k,r,i):D=s(k,e,l,R),Array.isArray(D))D.forEach(B=>{var z=oY(oY({},b),{},{name:B.name,unit:B.unit,color:void 0,fill:void 0});m.push(dK({tooltipEntrySettings:z,dataKey:B.dataKey,payload:B.payload,value:Wn(B.payload,B.dataKey),name:B.name}))});else{var O;m.push(dK({tooltipEntrySettings:b,dataKey:N,payload:D,value:Wn(D,N),name:(O=Wn(D,R))!==null&&O!==void 0?O:b==null?void 0:b.name}))}return m},h)}},$6=je([Pi,Tn,Kce,h6,Ci],sue),Y7e=je([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),J7e=je([Ci,lv],b6),fv=je([Y7e,Pi,J7e],w6,{memoizeOptions:{resultEqualityCheck:TC}}),X7e=je([fv],t=>t.filter(SC)),Q7e=je([fv],E6,{memoizeOptions:{resultEqualityCheck:TC}}),hv=je([Q7e,Rd],S6),Z7e=je([X7e,Rd,Pi],Hce),z6=je([hv,Pi,fv],T6),Nue=je([Pi],k6),eUe=je([Pi],t=>t.allowDataOverflow),Cue=je([Nue,eUe],wce),tUe=je([fv],t=>t.filter(SC)),nUe=je([Z7e,tUe,fE,jce],Xce),rUe=je([nUe,Rd,Ci,Cue],Qce),iUe=je([fv],Yce),sUe=je([hv,Pi,iUe,NC,Ci],P6,{memoizeOptions:{resultEqualityCheck:AC}}),oUe=je([Zce,Ci,lv],cv),aUe=je([oUe,Ci],nue),lUe=je([eue,Ci,lv],cv),cUe=je([lUe,Ci],rue),uUe=je([tue,Ci,lv],cv),dUe=je([uUe,Ci],iue),fUe=je([aUe,dUe,cUe],a2),hUe=je([Pi,Nue,Cue,rUe,sUe,fUe,Tn,Ci],_6),bE=je([Pi,Tn,hv,z6,fE,Ci,hUe],I6),pUe=je([bE,Pi,$6],M6),mUe=je([Pi,bE,pUe,Ci],D6),Pue=t=>{var e=Ci(t),n=lv(t),r=!1;return xE(t,e,n,r)},_ue=je([Pi,Pue],bC),Iue=je([Pi,$6,mUe,_ue],O6),gUe=je([Tn,z6,Pi,Ci],fue),yUe=je([Tn,z6,Pi,Ci],hue),xUe=(t,e,n,r,i,s,o,a)=>{if(e){var{type:l}=e,c=Kc(t,a);if(r){var u=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,h=l==="category"&&r.bandwidth?r.bandwidth()/u:0;return h=a==="angleAxis"&&i!=null&&(i==null?void 0:i.length)>=2?zi(i[0]-i[1])*2*h:h,c&&o?o.map((m,g)=>({coordinate:r(m)+h,value:m,index:g,offset:h})):r.domain().map((m,g)=>({coordinate:r(m)+h,value:s?s[m]:m,index:g,offset:h}))}}},Ld=je([Tn,Pi,$6,Iue,Pue,gUe,yUe,Ci],xUe),V6=je([mue,gue,N7e],(t,e,n)=>yue(n.shared,t,e)),Rue=t=>t.tooltip.settings.trigger,H6=t=>t.tooltip.settings.defaultIndex,wE=je([dv,V6,Rue,H6],Sue),xh=je([wE,hv,yE,bE],F6),Oue=je([Ld,xh],xue),q6=je([wE],t=>{if(t)return t.dataKey}),vUe=je([wE],t=>{if(t)return t.graphicalItemId}),Mue=je([dv,V6,Rue,H6],Tue),bUe=je([Pd,_d,Tn,ki,Ld,H6,Mue,vE],Aue),wUe=je([wE,bUe],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),EUe=je([wE],t=>{var e;return(e=t==null?void 0:t.active)!==null&&e!==void 0?e:!1}),SUe=je([Mue,xh,Rd,yE,Oue,vE,V6],kue),AUe=je([SUe],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function aY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function lY(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aY(Object(n),!0).forEach(function(r){TUe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function TUe(t,e,n){return(e=kUe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kUe(t){var e=NUe(t,"string");return typeof e=="symbol"?e:e+""}function NUe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var CUe=()=>Lt(Pi),PUe=()=>{var t=CUe(),e=Lt(Ld),n=Lt(Iue);return gh(!t||!n?void 0:lY(lY({},t),{},{scale:n}),e)};function cY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function rg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cY(Object(n),!0).forEach(function(r){_Ue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _Ue(t,e,n){return(e=IUe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function IUe(t){var e=RUe(t,"string");return typeof e=="symbol"?e:e+""}function RUe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var OUe=(t,e,n,r)=>{var i=e.find(s=>s&&s.index===n);if(i){if(t==="horizontal")return{x:i.coordinate,y:r.chartY};if(t==="vertical")return{x:r.chartX,y:i.coordinate}}return{x:0,y:0}},MUe=(t,e,n,r)=>{var i=e.find(c=>c&&c.index===n);if(i){if(t==="centric"){var s=i.coordinate,{radius:o}=r;return rg(rg(rg({},r),gi(r.cx,r.cy,o,s)),{},{angle:s,radius:o})}var a=i.coordinate,{angle:l}=r;return rg(rg(rg({},r),gi(r.cx,r.cy,a,l)),{},{angle:l,radius:a})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function LUe(t,e){var{chartX:n,chartY:r}=t;return n>=e.left&&n<=e.left+e.width&&r>=e.top&&r<=e.top+e.height}var Lue=(t,e,n,r,i)=>{var s,o=(s=e==null?void 0:e.length)!==null&&s!==void 0?s:0;if(o<=1||t==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var a=0;a<o;a++){var l,c,u,h,m,g=a>0?(l=n[a-1])===null||l===void 0?void 0:l.coordinate:(c=n[o-1])===null||c===void 0?void 0:c.coordinate,y=(u=n[a])===null||u===void 0?void 0:u.coordinate,v=a>=o-1?(h=n[0])===null||h===void 0?void 0:h.coordinate:(m=n[a+1])===null||m===void 0?void 0:m.coordinate,b=void 0;if(!(g==null||y==null||v==null))if(zi(y-g)!==zi(v-y)){var w=[];if(zi(v-y)===zi(i[1]-i[0])){b=v;var k=y+i[1]-i[0];w[0]=Math.min(k,(k+g)/2),w[1]=Math.max(k,(k+g)/2)}else{b=g;var N=v+i[1]-i[0];w[0]=Math.min(y,(N+y)/2),w[1]=Math.max(y,(N+y)/2)}var R=[Math.min(y,(b+y)/2),Math.max(y,(b+y)/2)];if(t>R[0]&&t<=R[1]||t>=w[0]&&t<=w[1]){var D;return(D=n[a])===null||D===void 0?void 0:D.index}}else{var O=Math.min(g,v),B=Math.max(g,v);if(t>(O+y)/2&&t<=(B+y)/2){var z;return(z=n[a])===null||z===void 0?void 0:z.index}}}else if(e)for(var U=0;U<o;U++){var $=e[U];if($!=null){var W=e[U+1],H=e[U-1];if(U===0&&W!=null&&t<=($.coordinate+W.coordinate)/2||U===o-1&&H!=null&&t>($.coordinate+H.coordinate)/2||U>0&&U<o-1&&H!=null&&W!=null&&t>($.coordinate+H.coordinate)/2&&t<=($.coordinate+W.coordinate)/2)return $.index}}return-1},Due=()=>Lt(h6),G6=(t,e)=>e,jue=(t,e,n)=>n,K6=(t,e,n,r)=>r,DUe=je(Ld,t=>YN(t,e=>e.coordinate)),W6=je([dv,G6,jue,K6],Sue),Y6=je([W6,hv,yE,bE],F6),jUe=(t,e,n)=>{if(e!=null){var r=dv(t);return e==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},Bue=je([dv,G6,jue,K6],Tue),l2=je([Pd,_d,Tn,ki,Ld,K6,Bue,vE],Aue),BUe=je([W6,l2],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),Uue=je([Ld,Y6],xue),UUe=je([Bue,Y6,Rd,yE,Uue,vE,G6],kue),FUe=je([W6,Y6],(t,e)=>({isActive:t.active&&e!=null,activeIndex:e})),$Ue=(t,e,n,r,i,s,o)=>{if(!(!t||!n||!r||!i)&&LUe(t,o)){var a=ELe(t,e),l=Lue(a,s,i,n,r),c=OUe(e,i,l,t);return{activeIndex:String(l),activeCoordinate:c}}},zUe=(t,e,n,r,i,s,o)=>{if(!(!t||!r||!i||!s||!n)){var a=T8e(t,n);if(a){var l=SLe(a,e),c=Lue(l,o,s,r,i),u=MUe(e,s,c,a);return{activeIndex:String(c),activeCoordinate:u}}}},VUe=(t,e,n,r,i,s,o,a)=>{if(!(!t||!e||!r||!i||!s))return e==="horizontal"||e==="vertical"?$Ue(t,e,r,i,s,o,a):zUe(t,e,n,r,i,s,o)},HUe=je(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,n)=>n,(t,e,n)=>{if(e!=null){var r=t[e];if(r!=null)return n?r.panoramaElement:r.element}}),qUe=je(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(r=>parseInt(r,10)).concat(Object.values(ii)),n=Array.from(new Set(e));return n.sort((r,i)=>r-i)},{memoizeOptions:{resultEqualityCheck:CBe}});function uY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function dY(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uY(Object(n),!0).forEach(function(r){GUe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function GUe(t,e,n){return(e=KUe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function KUe(t){var e=WUe(t,"string");return typeof e=="symbol"?e:e+""}function WUe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var YUe={},JUe={zIndexMap:Object.values(ii).reduce((t,e)=>dY(dY({},t),{},{[e]:{element:void 0,panoramaElement:void 0,consumers:0}}),YUe)},XUe=new Set(Object.values(ii));function QUe(t){return XUe.has(t)}var Fue=Co({name:"zIndex",initialState:JUe,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]?t.zIndexMap[n].consumers+=1:t.zIndexMap[n]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:kr()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(t.zIndexMap[n].consumers-=1,t.zIndexMap[n].consumers<=0&&!QUe(n)&&delete t.zIndexMap[n])},prepare:kr()},registerZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n,element:r,isPanorama:i}=e.payload;t.zIndexMap[n]?i?t.zIndexMap[n].panoramaElement=r:t.zIndexMap[n].element=r:t.zIndexMap[n]={consumers:0,element:i?void 0:r,panoramaElement:i?r:void 0}},prepare:kr()},unregisterZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(e.payload.isPanorama?t.zIndexMap[n].panoramaElement=void 0:t.zIndexMap[n].element=void 0)},prepare:kr()}}}),{registerZIndexPortal:ZUe,unregisterZIndexPortal:eFe,registerZIndexPortalElement:tFe,unregisterZIndexPortalElement:nFe}=Fue.actions,rFe=Fue.reducer;function ao(t){var{zIndex:e,children:n}=t,r=eDe(),i=r&&e!==void 0&&e!==0,s=qi(),o=_r();A.useLayoutEffect(()=>i?(o(ZUe({zIndex:e})),()=>{o(eFe({zIndex:e}))}):tE,[o,e,i]);var a=Lt(l=>HUe(l,e,s));return i?a?qm.createPortal(n,a):null:n}function bL(){return bL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bL.apply(null,arguments)}function fY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function LA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fY(Object(n),!0).forEach(function(r){iFe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function iFe(t,e,n){return(e=sFe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sFe(t){var e=oFe(t,"string");return typeof e=="symbol"?e:e+""}function oFe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function aFe(t){var{cursor:e,cursorComp:n,cursorProps:r}=t;return A.isValidElement(e)?A.cloneElement(e,r):A.createElement(n,r)}function lFe(t){var e,{coordinate:n,payload:r,index:i,offset:s,tooltipAxisBandSize:o,layout:a,cursor:l,tooltipEventType:c,chartName:u}=t,h=n,m=r,g=i;if(!l||!h||u!=="ScatterChart"&&c!=="axis")return null;var y,v,b;if(u==="ScatterChart")y=h,v=UDe,b=ii.cursorLine;else if(u==="BarChart")y=FDe(a,h,s,o),v=Mle,b=ii.cursorRectangle;else if(a==="radial"&&gae(h)){var{cx:w,cy:k,radius:N,startAngle:R,endAngle:D}=Dle(h);y={cx:w,cy:k,startAngle:R,endAngle:D,innerRadius:N,outerRadius:N},v=Ble,b=ii.cursorLine}else y={points:P8e(a,h,s)},v=ly,b=ii.cursorLine;var O=typeof l=="object"&&"className"in l?l.className:void 0,B=LA(LA(LA(LA({stroke:"#ccc",pointerEvents:"none"},s),y),km(l)),{},{payload:m,payloadIndex:g,className:Rn("recharts-tooltip-cursor",O)});return A.createElement(ao,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:b},A.createElement(aFe,{cursor:l,cursorComp:v,cursorProps:B}))}function cFe(t){var e=PUe(),n=gle(),r=kh(),i=Due();return e==null||n==null||r==null||i==null?null:A.createElement(lFe,bL({},t,{offset:n,layout:r,tooltipAxisBandSize:e,chartName:i}))}var $ue=A.createContext(null),uFe=()=>A.useContext($ue),NO={exports:{}},hY;function dFe(){return hY||(hY=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function s(l,c,u,h,m){if(typeof u!="function")throw new TypeError("The listener must be a function");var g=new i(u,h||l,m),y=n?n+c:c;return l._events[y]?l._events[y].fn?l._events[y]=[l._events[y],g]:l._events[y].push(g):(l._events[y]=g,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],u,h;if(this._eventsCount===0)return c;for(h in u=this._events)e.call(u,h)&&c.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},a.prototype.listeners=function(c){var u=n?n+c:c,h=this._events[u];if(!h)return[];if(h.fn)return[h.fn];for(var m=0,g=h.length,y=new Array(g);m<g;m++)y[m]=h[m].fn;return y},a.prototype.listenerCount=function(c){var u=n?n+c:c,h=this._events[u];return h?h.fn?1:h.length:0},a.prototype.emit=function(c,u,h,m,g,y){var v=n?n+c:c;if(!this._events[v])return!1;var b=this._events[v],w=arguments.length,k,N;if(b.fn){switch(b.once&&this.removeListener(c,b.fn,void 0,!0),w){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,u),!0;case 3:return b.fn.call(b.context,u,h),!0;case 4:return b.fn.call(b.context,u,h,m),!0;case 5:return b.fn.call(b.context,u,h,m,g),!0;case 6:return b.fn.call(b.context,u,h,m,g,y),!0}for(N=1,k=new Array(w-1);N<w;N++)k[N-1]=arguments[N];b.fn.apply(b.context,k)}else{var R=b.length,D;for(N=0;N<R;N++)switch(b[N].once&&this.removeListener(c,b[N].fn,void 0,!0),w){case 1:b[N].fn.call(b[N].context);break;case 2:b[N].fn.call(b[N].context,u);break;case 3:b[N].fn.call(b[N].context,u,h);break;case 4:b[N].fn.call(b[N].context,u,h,m);break;default:if(!k)for(D=1,k=new Array(w-1);D<w;D++)k[D-1]=arguments[D];b[N].fn.apply(b[N].context,k)}}return!0},a.prototype.on=function(c,u,h){return s(this,c,u,h,!1)},a.prototype.once=function(c,u,h){return s(this,c,u,h,!0)},a.prototype.removeListener=function(c,u,h,m){var g=n?n+c:c;if(!this._events[g])return this;if(!u)return o(this,g),this;var y=this._events[g];if(y.fn)y.fn===u&&(!m||y.once)&&(!h||y.context===h)&&o(this,g);else{for(var v=0,b=[],w=y.length;v<w;v++)(y[v].fn!==u||m&&!y[v].once||h&&y[v].context!==h)&&b.push(y[v]);b.length?this._events[g]=b.length===1?b[0]:b:o(this,g)}return this},a.prototype.removeAllListeners=function(c){var u;return c?(u=n?n+c:c,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(NO)),NO.exports}var fFe=dFe();const J6=gs(fFe);var c1=new J6,wL="recharts.syncEvent.tooltip",pY="recharts.syncEvent.brush";function IC(t,e){if(e){var n=Number.parseInt(e,10);if(!Za(n))return t==null?void 0:t[n]}}var hFe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},zue=Co({name:"options",initialState:hFe,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),pFe=zue.reducer,{createEventEmitter:mFe}=zue.actions;function gFe(t){return t.tooltip.syncInteraction}var yFe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},Vue=Co({name:"chartData",initialState:yFe,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:r}=e.payload;n!=null&&(t.dataStartIndex=n),r!=null&&(t.dataEndIndex=r)}}}),{setChartData:mY,setDataStartEndIndexes:xFe,setComputedData:igt}=Vue.actions,vFe=Vue.reducer,bFe=["x","y"];function gY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ig(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gY(Object(n),!0).forEach(function(r){wFe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wFe(t,e,n){return(e=EFe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function EFe(t){var e=SFe(t,"string");return typeof e=="symbol"?e:e+""}function SFe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function AFe(t,e){if(t==null)return{};var n,r,i=TFe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function TFe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function kFe(){var t=Lt(p6),e=Lt(m6),n=_r(),r=Lt(Bce),i=Lt(Ld),s=kh(),o=lC(),a=Lt(l=>l.rootProps.className);A.useEffect(()=>{if(t==null)return tE;var l=(c,u,h)=>{if(e!==h&&t===c){if(r==="index"){var m;if(o&&u!==null&&u!==void 0&&(m=u.payload)!==null&&m!==void 0&&m.coordinate&&u.payload.sourceViewBox){var g=u.payload.coordinate,{x:y,y:v}=g,b=AFe(g,bFe),{x:w,y:k,width:N,height:R}=u.payload.sourceViewBox,D=ig(ig({},b),{},{x:o.x+(N?(y-w)/N:0)*o.width,y:o.y+(R?(v-k)/R:0)*o.height});n(ig(ig({},u),{},{payload:ig(ig({},u.payload),{},{coordinate:D})}))}else n(u);return}if(i!=null){var O;if(typeof r=="function"){var B={activeTooltipIndex:u.payload.index==null?void 0:Number(u.payload.index),isTooltipActive:u.payload.active,activeIndex:u.payload.index==null?void 0:Number(u.payload.index),activeLabel:u.payload.label,activeDataKey:u.payload.dataKey,activeCoordinate:u.payload.coordinate},z=r(i,B);O=i[z]}else r==="value"&&(O=i.find(L=>String(L.value)===u.payload.label));var{coordinate:U}=u.payload;if(O==null||u.payload.active===!1||U==null||o==null){n(xL({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:$,y:W}=U,H=Math.min($,o.x+o.width),F=Math.min(W,o.y+o.height),T={x:s==="horizontal"?O.coordinate:H,y:s==="horizontal"?F:O.coordinate},_=xL({active:u.payload.active,coordinate:T,dataKey:u.payload.dataKey,index:String(O.index),label:u.payload.label,sourceViewBox:u.payload.sourceViewBox,graphicalItemId:u.payload.graphicalItemId});n(_)}}};return c1.on(wL,l),()=>{c1.off(wL,l)}},[a,n,e,t,r,i,s,o])}function NFe(){var t=Lt(p6),e=Lt(m6),n=_r();A.useEffect(()=>{if(t==null)return tE;var r=(i,s,o)=>{e!==o&&t===i&&n(xFe(s))};return c1.on(pY,r),()=>{c1.off(pY,r)}},[n,e,t])}function CFe(){var t=_r();A.useEffect(()=>{t(mFe())},[t]),kFe(),NFe()}function PFe(t,e,n,r,i,s){var o=Lt(g=>jUe(g,t,e)),a=Lt(m6),l=Lt(p6),c=Lt(Bce),u=Lt(gFe),h=u==null?void 0:u.active,m=lC();A.useEffect(()=>{if(!h&&l!=null&&a!=null){var g=xL({active:s,coordinate:n,dataKey:o,index:i,label:typeof r=="number"?String(r):r,sourceViewBox:m,graphicalItemId:void 0});c1.emit(wL,l,g,a)}},[h,n,o,i,r,a,l,c,s,m])}function yY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xY(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yY(Object(n),!0).forEach(function(r){_Fe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _Fe(t,e,n){return(e=IFe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function IFe(t){var e=RFe(t,"string");return typeof e=="symbol"?e:e+""}function RFe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function OFe(t){return t.dataKey}function MFe(t,e){return A.isValidElement(t)?A.cloneElement(t,e):typeof t=="function"?A.createElement(t,e):A.createElement(xDe,e)}var vY=[],LFe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function c2(t){var e,n,r=xi(t,LFe),{active:i,allowEscapeViewBox:s,animationDuration:o,animationEasing:a,content:l,filterNull:c,isAnimationActive:u,offset:h,payloadUniqBy:m,position:g,reverseDirection:y,useTranslate3d:v,wrapperStyle:b,cursor:w,shared:k,trigger:N,defaultIndex:R,portal:D,axisId:O}=r,B=_r(),z=typeof R=="number"?String(R):R;A.useEffect(()=>{B(R7e({shared:k,trigger:N,axisId:O,active:i,defaultIndex:z}))},[B,k,N,O,i,z]);var U=lC(),$=Ple(),W=k7e(k),{activeIndex:H,isActive:F}=(e=Lt(oe=>FUe(oe,W,N,z)))!==null&&e!==void 0?e:{},T=Lt(oe=>UUe(oe,W,N,z)),_=Lt(oe=>Uue(oe,W,N,z)),L=Lt(oe=>BUe(oe,W,N,z)),V=T,K=uFe(),te=(n=i??F)!==null&&n!==void 0?n:!1,[G,q]=aMe([V,te]),M=W==="axis"?_:void 0;PFe(W,N,L,M,H,te);var P=D??K;if(P==null||U==null||W==null)return null;var Y=V??vY;te||(Y=vY),c&&Y.length&&(Y=O3e(Y.filter(oe=>oe.value!=null&&(oe.hide!==!0||r.includeHidden)),m,OFe));var X=Y.length>0,se=A.createElement(TDe,{allowEscapeViewBox:s,animationDuration:o,animationEasing:a,isAnimationActive:u,active:te,coordinate:L,hasPayload:X,offset:h,position:g,reverseDirection:y,useTranslate3d:v,viewBox:U,wrapperStyle:b,lastBoundingBox:G,innerRef:q,hasPortalFromProps:!!D},MFe(l,xY(xY({},r),{},{payload:Y,label:M,active:te,activeIndex:H,coordinate:L,accessibilityLayer:$})));return A.createElement(A.Fragment,null,qm.createPortal(se,P),te&&A.createElement(cFe,{cursor:w,tooltipEventType:W,coordinate:L,payload:Y,index:H}))}var pv=t=>null;pv.displayName="Cell";function DFe(t,e,n){return(e=jFe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jFe(t){var e=BFe(t,"string");return typeof e=="symbol"?e:e+""}function BFe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class UFe{constructor(e){DFe(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;r!=null&&this.cache.delete(r)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function bY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function FFe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bY(Object(n),!0).forEach(function(r){$Fe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $Fe(t,e,n){return(e=zFe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zFe(t){var e=VFe(t,"string");return typeof e=="symbol"?e:e+""}function VFe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var HFe={cacheSize:2e3,enableCache:!0},Hue=FFe({},HFe),wY=new UFe(Hue.cacheSize),qFe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},EY="recharts_measurement_span";function GFe(t,e){var n=e.fontSize||"",r=e.fontFamily||"",i=e.fontWeight||"",s=e.fontStyle||"",o=e.letterSpacing||"",a=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(s,"|").concat(o,"|").concat(a)}var SY=(t,e)=>{try{var n=document.getElementById(EY);n||(n=document.createElement("span"),n.setAttribute("id",EY),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,qFe,e),n.textContent="".concat(t);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},hw=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||aE.isSsr)return{width:0,height:0};if(!Hue.enableCache)return SY(e,n);var r=GFe(e,n),i=wY.get(r);if(i)return i;var s=SY(e,n);return wY.set(r,s),s},que;function KFe(t,e,n){return(e=WFe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WFe(t){var e=YFe(t,"string");return typeof e=="symbol"?e:e+""}function YFe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var AY=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,TY=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,JFe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,XFe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,QFe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},ZFe=["cm","mm","pt","pc","in","Q","px"];function e9e(t){return ZFe.includes(t)}var Ug="NaN";function t9e(t,e){return t*QFe[e]}class ss{static parse(e){var n,[,r,i]=(n=XFe.exec(e))!==null&&n!==void 0?n:[];return r==null?ss.NaN:new ss(parseFloat(r),i??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,Za(e)&&(this.unit=""),n!==""&&!JFe.test(n)&&(this.num=NaN,this.unit=""),e9e(n)&&(this.num=t9e(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new ss(NaN,""):new ss(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new ss(NaN,""):new ss(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new ss(NaN,""):new ss(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new ss(NaN,""):new ss(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Za(this.num)}}que=ss;KFe(ss,"NaN",new que(NaN,""));function Gue(t){if(t==null||t.includes(Ug))return Ug;for(var e=t;e.includes("*")||e.includes("/");){var n,[,r,i,s]=(n=AY.exec(e))!==null&&n!==void 0?n:[],o=ss.parse(r??""),a=ss.parse(s??""),l=i==="*"?o.multiply(a):o.divide(a);if(l.isNaN())return Ug;e=e.replace(AY,l.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var c,[,u,h,m]=(c=TY.exec(e))!==null&&c!==void 0?c:[],g=ss.parse(u??""),y=ss.parse(m??""),v=h==="+"?g.add(y):g.subtract(y);if(v.isNaN())return Ug;e=e.replace(TY,v.toString())}return e}var kY=/\(([^()]*)\)/;function n9e(t){for(var e=t,n;(n=kY.exec(e))!=null;){var[,r]=n;e=e.replace(kY,Gue(r))}return e}function r9e(t){var e=t.replace(/\s+/g,"");return e=n9e(e),e=Gue(e),e}function i9e(t){try{return r9e(t)}catch{return Ug}}function CO(t){var e=i9e(t.slice(5,-1));return e===Ug?"":e}var s9e=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],o9e=["dx","dy","angle","className","breakAll"];function EL(){return EL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},EL.apply(null,arguments)}function NY(t,e){if(t==null)return{};var n,r,i=a9e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function a9e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Kue=/[ \f\n\r\t\v\u2028\u2029]+/,Wue=t=>{var{children:e,breakAll:n,style:r}=t;try{var i=[];Sr(e)||(n?i=e.toString().split(""):i=e.toString().split(Kue));var s=i.map(a=>({word:a,width:hw(a,r).width})),o=n?0:hw("",r).width;return{wordsWithComputedWidth:s,spaceWidth:o}}catch{return null}};function l9e(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var Yue=(t,e,n,r)=>t.reduce((i,s)=>{var{word:o,width:a}=s,l=i[i.length-1];if(l&&a!=null&&(e==null||r||l.width+a+n<Number(e)))l.words.push(o),l.width+=a+n;else{var c={words:[o],width:a};i.push(c)}return i},[]),Jue=t=>t.reduce((e,n)=>e.width>n.width?e:n),c9e="",CY=(t,e,n,r,i,s,o,a)=>{var l=t.slice(0,e),c=Wue({breakAll:n,style:r,children:l+c9e});if(!c)return[!1,[]];var u=Yue(c.wordsWithComputedWidth,s,o,a),h=u.length>i||Jue(u).width>Number(s);return[h,u]},u9e=(t,e,n,r,i)=>{var{maxLines:s,children:o,style:a,breakAll:l}=t,c=kt(s),u=String(o),h=Yue(e,r,n,i);if(!c||i)return h;var m=h.length>s||Jue(h).width>Number(r);if(!m)return h;for(var g=0,y=u.length-1,v=0,b;g<=y&&v<=u.length-1;){var w=Math.floor((g+y)/2),k=w-1,[N,R]=CY(u,k,l,a,s,r,n,i),[D]=CY(u,w,l,a,s,r,n,i);if(!N&&!D&&(g=w+1),N&&D&&(y=w-1),!N&&D){b=R;break}v++}return b||h},PY=t=>{var e=Sr(t)?[]:t.toString().split(Kue);return[{words:e,width:void 0}]},d9e=t=>{var{width:e,scaleToFit:n,children:r,style:i,breakAll:s,maxLines:o}=t;if((e||n)&&!aE.isSsr){var a,l,c=Wue({breakAll:s,children:r,style:i});if(c){var{wordsWithComputedWidth:u,spaceWidth:h}=c;a=u,l=h}else return PY(r);return u9e({breakAll:s,children:r,maxLines:o,style:i},a,l,e,!!n)}return PY(r)},Xue="#808080",f9e={angle:0,breakAll:!1,capHeight:"0.71em",fill:Xue,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},RC=A.forwardRef((t,e)=>{var n=xi(t,f9e),{x:r,y:i,lineHeight:s,capHeight:o,fill:a,scaleToFit:l,textAnchor:c,verticalAnchor:u}=n,h=NY(n,s9e),m=A.useMemo(()=>d9e({breakAll:h.breakAll,children:h.children,maxLines:h.maxLines,scaleToFit:l,style:h.style,width:h.width}),[h.breakAll,h.children,h.maxLines,l,h.style,h.width]),{dx:g,dy:y,angle:v,className:b,breakAll:w}=h,k=NY(h,o9e);if(!Fc(r)||!Fc(i)||m.length===0)return null;var N=Number(r)+(kt(g)?g:0),R=Number(i)+(kt(y)?y:0);if(!cr(N)||!cr(R))return null;var D;switch(u){case"start":D=CO("calc(".concat(o,")"));break;case"middle":D=CO("calc(".concat((m.length-1)/2," * -").concat(s," + (").concat(o," / 2))"));break;default:D=CO("calc(".concat(m.length-1," * -").concat(s,")"));break}var O=[];if(l){var B=m[0].width,{width:z}=h;O.push("scale(".concat(kt(z)&&kt(B)?z/B:1,")"))}return v&&O.push("rotate(".concat(v,", ").concat(N,", ").concat(R,")")),O.length&&(k.transform=O.join(" ")),A.createElement("text",EL({},$s(k),{ref:e,x:N,y:R,className:Rn("recharts-text",b),textAnchor:c,fill:a.includes("url")?Xue:a}),m.map((U,$)=>{var W=U.words.join(w?"":" ");return A.createElement("tspan",{x:N,dy:$===0?D:s,key:"".concat(W,"-").concat($)},W)}))});RC.displayName="Text";var h9e=["labelRef"],p9e=["content"];function _Y(t,e){if(t==null)return{};var n,r,i=m9e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function m9e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function IY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Zr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IY(Object(n),!0).forEach(function(r){g9e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function g9e(t,e,n){return(e=y9e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y9e(t){var e=x9e(t,"string");return typeof e=="symbol"?e:e+""}function x9e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qu(){return qu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qu.apply(null,arguments)}var Que=A.createContext(null),v9e=t=>{var{x:e,y:n,upperWidth:r,lowerWidth:i,width:s,height:o,children:a}=t,l=A.useMemo(()=>({x:e,y:n,upperWidth:r,lowerWidth:i,width:s,height:o}),[e,n,r,i,s,o]);return A.createElement(Que.Provider,{value:l},a)},Zue=()=>{var t=A.useContext(Que),e=lC();return t||mle(e)},b9e=A.createContext(null),w9e=()=>{var t=A.useContext(b9e),e=Lt(Vce);return t||e},E9e=t=>{var{value:e,formatter:n}=t,r=Sr(t.children)?e:t.children;return typeof n=="function"?n(r):r},X6=t=>t!=null&&typeof t=="function",S9e=(t,e)=>{var n=zi(e-t),r=Math.min(Math.abs(e-t),360);return n*r},A9e=(t,e,n,r,i)=>{var{offset:s,className:o}=t,{cx:a,cy:l,innerRadius:c,outerRadius:u,startAngle:h,endAngle:m,clockWise:g}=i,y=(c+u)/2,v=S9e(h,m),b=v>=0?1:-1,w,k;switch(e){case"insideStart":w=h+b*s,k=g;break;case"insideEnd":w=m-b*s,k=!g;break;case"end":w=m+b*s,k=g;break;default:throw new Error("Unsupported position ".concat(e))}k=v<=0?k:!k;var N=gi(a,l,y,w),R=gi(a,l,y,w+(k?1:-1)*359),D="M".concat(N.x,",").concat(N.y,`
    A`).concat(y,",").concat(y,",0,1,").concat(k?0:1,`,
    `).concat(R.x,",").concat(R.y),O=Sr(t.id)?Yw("recharts-radial-line-"):t.id;return A.createElement("text",qu({},r,{dominantBaseline:"central",className:Rn("recharts-radial-bar-label",o)}),A.createElement("defs",null,A.createElement("path",{id:O,d:D})),A.createElement("textPath",{xlinkHref:"#".concat(O)},n))},T9e=(t,e,n)=>{var{cx:r,cy:i,innerRadius:s,outerRadius:o,startAngle:a,endAngle:l}=t,c=(a+l)/2;if(n==="outside"){var{x:u,y:h}=gi(r,i,o+e,c);return{x:u,y:h,textAnchor:u>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var m=(s+o)/2,{x:g,y}=gi(r,i,m,c);return{x:g,y,textAnchor:"middle",verticalAnchor:"middle"}},SL=t=>"cx"in t&&kt(t.cx),k9e=(t,e)=>{var{parentViewBox:n,offset:r,position:i}=t,s;n!=null&&!SL(n)&&(s=n);var{x:o,y:a,upperWidth:l,lowerWidth:c,height:u}=e,h=o,m=o+(l-c)/2,g=(h+m)/2,y=(l+c)/2,v=h+l/2,b=u>=0?1:-1,w=b*r,k=b>0?"end":"start",N=b>0?"start":"end",R=l>=0?1:-1,D=R*r,O=R>0?"end":"start",B=R>0?"start":"end";if(i==="top"){var z={x:h+l/2,y:a-w,textAnchor:"middle",verticalAnchor:k};return Zr(Zr({},z),s?{height:Math.max(a-s.y,0),width:l}:{})}if(i==="bottom"){var U={x:m+c/2,y:a+u+w,textAnchor:"middle",verticalAnchor:N};return Zr(Zr({},U),s?{height:Math.max(s.y+s.height-(a+u),0),width:c}:{})}if(i==="left"){var $={x:g-D,y:a+u/2,textAnchor:O,verticalAnchor:"middle"};return Zr(Zr({},$),s?{width:Math.max($.x-s.x,0),height:u}:{})}if(i==="right"){var W={x:g+y+D,y:a+u/2,textAnchor:B,verticalAnchor:"middle"};return Zr(Zr({},W),s?{width:Math.max(s.x+s.width-W.x,0),height:u}:{})}var H=s?{width:y,height:u}:{};return i==="insideLeft"?Zr({x:g+D,y:a+u/2,textAnchor:B,verticalAnchor:"middle"},H):i==="insideRight"?Zr({x:g+y-D,y:a+u/2,textAnchor:O,verticalAnchor:"middle"},H):i==="insideTop"?Zr({x:h+l/2,y:a+w,textAnchor:"middle",verticalAnchor:N},H):i==="insideBottom"?Zr({x:m+c/2,y:a+u-w,textAnchor:"middle",verticalAnchor:k},H):i==="insideTopLeft"?Zr({x:h+D,y:a+w,textAnchor:B,verticalAnchor:N},H):i==="insideTopRight"?Zr({x:h+l-D,y:a+w,textAnchor:O,verticalAnchor:N},H):i==="insideBottomLeft"?Zr({x:m+D,y:a+u-w,textAnchor:B,verticalAnchor:k},H):i==="insideBottomRight"?Zr({x:m+c-D,y:a+u-w,textAnchor:O,verticalAnchor:k},H):i&&typeof i=="object"&&(kt(i.x)||yd(i.x))&&(kt(i.y)||yd(i.y))?Zr({x:o+Us(i.x,y),y:a+Us(i.y,u),textAnchor:"end",verticalAnchor:"end"},H):Zr({x:v,y:a+u/2,textAnchor:"middle",verticalAnchor:"middle"},H)},N9e={angle:0,offset:5,zIndex:ii.label,position:"middle",textBreakAll:!1};function _f(t){var e=xi(t,N9e),{viewBox:n,position:r,value:i,children:s,content:o,className:a="",textBreakAll:l,labelRef:c}=e,u=w9e(),h=Zue(),m=r==="center"?h:u??h,g,y,v;if(n==null?g=m:SL(n)?g=n:g=mle(n),!g||Sr(i)&&Sr(s)&&!A.isValidElement(o)&&typeof o!="function")return null;var b=Zr(Zr({},e),{},{viewBox:g});if(A.isValidElement(o)){var{labelRef:w}=b,k=_Y(b,h9e);return A.cloneElement(o,k)}if(typeof o=="function"){var{content:N}=b,R=_Y(b,p9e);if(y=A.createElement(o,R),A.isValidElement(y))return y}else y=E9e(e);var D=$s(e);if(SL(g)){if(r==="insideStart"||r==="insideEnd"||r==="end")return A9e(e,r,y,D,g);v=T9e(g,e.offset,e.position)}else v=k9e(e,g);return A.createElement(ao,{zIndex:e.zIndex},A.createElement(RC,qu({ref:c,className:Rn("recharts-label",a)},D,v,{textAnchor:l9e(D.textAnchor)?D.textAnchor:v.textAnchor,breakAll:l}),y))}_f.displayName="Label";var C9e=(t,e,n)=>{if(!t)return null;var r={viewBox:e,labelRef:n};return t===!0?A.createElement(_f,qu({key:"label-implicit"},r)):Fc(t)?A.createElement(_f,qu({key:"label-implicit",value:t},r)):A.isValidElement(t)?t.type===_f?A.cloneElement(t,Zr({key:"label-implicit"},r)):A.createElement(_f,qu({key:"label-implicit",content:t},r)):X6(t)?A.createElement(_f,qu({key:"label-implicit",content:t},r)):t&&typeof t=="object"?A.createElement(_f,qu({},t,{key:"label-implicit"},r)):null};function P9e(t){var{label:e,labelRef:n}=t,r=Zue();return C9e(e,r,n)||null}var PO={},_O={},RY;function _9e(){return RY||(RY=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(_O)),_O}var IO={},OY;function I9e(){return OY||(OY=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})(IO)),IO}var MY;function R9e(){return MY||(MY=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=_9e(),n=I9e(),r=Nj();function i(s){if(r.isArrayLike(s))return e.last(n.toArray(s))}t.last=i})(PO)),PO}var RO,LY;function O9e(){return LY||(LY=1,RO=R9e().last),RO}var M9e=O9e();const L9e=gs(M9e);var D9e=["valueAccessor"],j9e=["dataKey","clockWise","id","textBreakAll","zIndex"];function u2(){return u2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u2.apply(null,arguments)}function DY(t,e){if(t==null)return{};var n,r,i=B9e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function B9e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var U9e=t=>Array.isArray(t.value)?L9e(t.value):t.value,ede=A.createContext(void 0),Q6=ede.Provider,tde=A.createContext(void 0),F9e=tde.Provider;function $9e(){return A.useContext(ede)}function z9e(){return A.useContext(tde)}function LT(t){var{valueAccessor:e=U9e}=t,n=DY(t,D9e),{dataKey:r,clockWise:i,id:s,textBreakAll:o,zIndex:a}=n,l=DY(n,j9e),c=$9e(),u=z9e(),h=c||u;return!h||!h.length?null:A.createElement(ao,{zIndex:a??ii.label},A.createElement(Jr,{className:"recharts-label-list"},h.map((m,g)=>{var y,v=Sr(r)?e(m,g):Wn(m&&m.payload,r),b=Sr(s)?{}:{id:"".concat(s,"-").concat(g)};return A.createElement(_f,u2({key:"label-".concat(g)},$s(m),l,b,{fill:(y=n.fill)!==null&&y!==void 0?y:m.fill,parentViewBox:m.parentViewBox,value:v,textBreakAll:o,viewBox:m.viewBox,index:g,zIndex:0}))})))}LT.displayName="LabelList";function OC(t){var{label:e}=t;return e?e===!0?A.createElement(LT,{key:"labelList-implicit"}):A.isValidElement(e)||X6(e)?A.createElement(LT,{key:"labelList-implicit",content:e}):typeof e=="object"?A.createElement(LT,u2({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}function AL(){return AL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},AL.apply(null,arguments)}var nde=t=>{var{cx:e,cy:n,r,className:i}=t,s=Rn("recharts-dot",i);return kt(e)&&kt(n)&&kt(r)?A.createElement("circle",AL({},ro(t),kj(t),{className:s,cx:e,cy:n,r})):null},rde=t=>t.graphicalItems.polarItems,V9e=je([Ir,hE],b6),MC=je([rde,Ur,V9e],w6),H9e=je([MC],E6),LC=je([H9e,vC],S6),q9e=je([LC,Ur,MC],T6);je([LC,Ur,MC],(t,e,n)=>n.length>0?t.flatMap(r=>n.flatMap(i=>{var s,o=Wn(r,(s=e.dataKey)!==null&&s!==void 0?s:i.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):(e==null?void 0:e.dataKey)!=null?t.map(r=>({value:Wn(r,e.dataKey),errorDomain:[]})):t.map(r=>({value:r,errorDomain:[]})));var jY=()=>{},G9e=je([LC,Ur,MC,NC,Ir],P6),K9e=je([Ur,N6,C6,jY,G9e,jY,Tn,Ir],_6),ide=je([Ur,Tn,LC,q9e,fE,Ir,K9e],I6),W9e=je([ide,Ur,uv],M6);je([Ur,ide,W9e,Ir],D6);var Y9e={radiusAxis:{},angleAxis:{}},sde=Co({name:"polarAxis",initialState:Y9e,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:sgt,removeRadiusAxis:ogt,addAngleAxis:agt,removeAngleAxis:lgt}=sde.actions,J9e=sde.reducer;function BY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function UY(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BY(Object(n),!0).forEach(function(r){X9e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function X9e(t,e,n){return(e=Q9e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Q9e(t){var e=Z9e(t,"string");return typeof e=="symbol"?e:e+""}function Z9e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var e$e=(t,e)=>e,Z6=je([rde,e$e],(t,e)=>t.filter(n=>n.type==="pie").find(n=>n.id===e)),t$e=[],eB=(t,e,n)=>(n==null?void 0:n.length)===0?t$e:n,ode=je([vC,Z6,eB],(t,e,n)=>{var{chartData:r}=t;if(e!=null){var i;if((e==null?void 0:e.data)!=null&&e.data.length>0?i=e.data:i=r,(!i||!i.length)&&n!=null&&(i=n.map(s=>UY(UY({},e.presentationProps),s.props))),i!=null)return i}}),n$e=je([ode,Z6,eB],(t,e,n)=>{if(!(t==null||e==null))return t.map((r,i)=>{var s,o=Wn(r,e.nameKey,e.name),a;return n!=null&&(s=n[i])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?a=n[i].props.fill:typeof r=="object"&&r!=null&&"fill"in r?a=r.fill:a=e.fill,{value:Th(o,e.dataKey),color:a,payload:r,type:e.legendType}})}),r$e=je([ode,Z6,eB,ki],(t,e,n,r)=>{if(!(e==null||t==null))return sze({offset:r,pieSettings:e,displayedData:t,cells:n})}),OO={exports:{}},nr={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FY;function i$e(){if(FY)return nr;FY=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.suspense_list"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.for("react.view_transition"),g=Symbol.for("react.client.reference");function y(v){if(typeof v=="object"&&v!==null){var b=v.$$typeof;switch(b){case t:switch(v=v.type,v){case n:case i:case r:case l:case c:case m:return v;default:switch(v=v&&v.$$typeof,v){case o:case a:case h:case u:return v;case s:return v;default:return b}}case e:return b}}}return nr.ContextConsumer=s,nr.ContextProvider=o,nr.Element=t,nr.ForwardRef=a,nr.Fragment=n,nr.Lazy=h,nr.Memo=u,nr.Portal=e,nr.Profiler=i,nr.StrictMode=r,nr.Suspense=l,nr.SuspenseList=c,nr.isContextConsumer=function(v){return y(v)===s},nr.isContextProvider=function(v){return y(v)===o},nr.isElement=function(v){return typeof v=="object"&&v!==null&&v.$$typeof===t},nr.isForwardRef=function(v){return y(v)===a},nr.isFragment=function(v){return y(v)===n},nr.isLazy=function(v){return y(v)===h},nr.isMemo=function(v){return y(v)===u},nr.isPortal=function(v){return y(v)===e},nr.isProfiler=function(v){return y(v)===i},nr.isStrictMode=function(v){return y(v)===r},nr.isSuspense=function(v){return y(v)===l},nr.isSuspenseList=function(v){return y(v)===c},nr.isValidElementType=function(v){return typeof v=="string"||typeof v=="function"||v===n||v===i||v===r||v===l||v===c||typeof v=="object"&&v!==null&&(v.$$typeof===h||v.$$typeof===u||v.$$typeof===o||v.$$typeof===s||v.$$typeof===a||v.$$typeof===g||v.getModuleId!==void 0)},nr.typeOf=y,nr}var $Y;function s$e(){return $Y||($Y=1,OO.exports=i$e()),OO.exports}var o$e=s$e(),zY=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",VY=null,MO=null,ade=t=>{if(t===VY&&Array.isArray(MO))return MO;var e=[];return A.Children.forEach(t,n=>{Sr(n)||(o$e.isFragment(n)?e=e.concat(ade(n.props.children)):e.push(n))}),MO=e,VY=t,e};function tB(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(i=>zY(i)):r=[zY(e)],ade(t).forEach(i=>{var s=Cm(i,"type.displayName")||Cm(i,"type.name");s&&r.indexOf(s)!==-1&&n.push(i)}),n}var nB=t=>t&&typeof t=="object"&&"clipDot"in t?!!t.clipDot:!0,LO={},HY;function a$e(){return HY||(HY=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){var i;if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const s=n[Symbol.toStringTag];return s==null||!((i=Object.getOwnPropertyDescriptor(n,Symbol.toStringTag))!=null&&i.writable)?!1:n.toString()===`[object ${s}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}t.isPlainObject=e})(LO)),LO}var DO,qY;function l$e(){return qY||(qY=1,DO=a$e().isPlainObject),DO}var c$e=l$e();const u$e=gs(c$e);var GY,KY,WY,YY,JY;function XY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function QY(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XY(Object(n),!0).forEach(function(r){d$e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function d$e(t,e,n){return(e=f$e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f$e(t){var e=h$e(t,"string");return typeof e=="symbol"?e:e+""}function h$e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function d2(){return d2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},d2.apply(null,arguments)}function Rb(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var ZY=(t,e,n,r,i)=>{var s=n-r,o;return o=Gr(GY||(GY=Rb(["M ",",",""])),t,e),o+=Gr(KY||(KY=Rb(["L ",",",""])),t+n,e),o+=Gr(WY||(WY=Rb(["L ",",",""])),t+n-s/2,e+i),o+=Gr(YY||(YY=Rb(["L ",",",""])),t+n-s/2-r,e+i),o+=Gr(JY||(JY=Rb(["L ",","," Z"])),t,e),o},p$e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},m$e=t=>{var e=xi(t,p$e),{x:n,y:r,upperWidth:i,lowerWidth:s,height:o,className:a}=e,{animationEasing:l,animationDuration:c,animationBegin:u,isUpdateAnimationActive:h}=e,m=A.useRef(null),[g,y]=A.useState(-1),v=A.useRef(i),b=A.useRef(s),w=A.useRef(o),k=A.useRef(n),N=A.useRef(r),R=iv(t,"trapezoid-");if(A.useEffect(()=>{if(m.current&&m.current.getTotalLength)try{var T=m.current.getTotalLength();T&&y(T)}catch{}},[]),n!==+n||r!==+r||i!==+i||s!==+s||o!==+o||i===0&&s===0||o===0)return null;var D=Rn("recharts-trapezoid",a);if(!h)return A.createElement("g",null,A.createElement("path",d2({},$s(e),{className:D,d:ZY(n,r,i,s,o)})));var O=v.current,B=b.current,z=w.current,U=k.current,$=N.current,W="0px ".concat(g===-1?1:g,"px"),H="".concat(g,"px 0px"),F=_le(["strokeDasharray"],c,l);return A.createElement(rv,{animationId:R,key:R,canBegin:g>0,duration:c,easing:l,isActive:h,begin:u},T=>{var _=qn(O,i,T),L=qn(B,s,T),V=qn(z,o,T),K=qn(U,n,T),te=qn($,r,T);m.current&&(v.current=_,b.current=L,w.current=V,k.current=K,N.current=te);var G=T>0?{transition:F,strokeDasharray:H}:{strokeDasharray:W};return A.createElement("path",d2({},$s(e),{className:D,d:ZY(K,te,_,L,V),ref:m,style:QY(QY({},G),e.style)}))})},g$e=["option","shapeType","activeClassName"];function y$e(t,e){if(t==null)return{};var n,r,i=x$e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function x$e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function eJ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function f2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eJ(Object(n),!0).forEach(function(r){v$e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eJ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function v$e(t,e,n){return(e=b$e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b$e(t){var e=w$e(t,"string");return typeof e=="symbol"?e:e+""}function w$e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function E$e(t,e){return f2(f2({},e),t)}function S$e(t,e){return t==="symbols"}function tJ(t){var{shapeType:e,elementProps:n}=t;switch(e){case"rectangle":return A.createElement(Mle,n);case"trapezoid":return A.createElement(m$e,n);case"sector":return A.createElement(Ble,n);case"symbols":if(S$e(e))return A.createElement(mae,n);break;case"curve":return A.createElement(ly,n);default:return null}}function A$e(t){return A.isValidElement(t)?t.props:t}function rB(t){var{option:e,shapeType:n,activeClassName:r="recharts-active-shape"}=t,i=y$e(t,g$e),s;if(A.isValidElement(e))s=A.cloneElement(e,f2(f2({},i),A$e(e)));else if(typeof e=="function")s=e(i,i.index);else if(u$e(e)&&typeof e!="boolean"){var o=E$e(e,i);s=A.createElement(tJ,{shapeType:n,elementProps:o})}else{var a=i;s=A.createElement(tJ,{shapeType:n,elementProps:a})}return i.isActive?A.createElement(Jr,{className:r},s):s}var iB=(t,e,n)=>{var r=_r();return(i,s)=>o=>{t==null||t(i,s,o),r(bue({activeIndex:String(s),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}},sB=t=>{var e=_r();return(n,r)=>i=>{t==null||t(n,r,i),e(O7e())}},oB=(t,e,n)=>{var r=_r();return(i,s)=>o=>{t==null||t(i,s,o),r(M7e({activeIndex:String(s),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}};function DC(t){var{tooltipEntrySettings:e}=t,n=_r(),r=qi(),i=A.useRef(null);return A.useLayoutEffect(()=>{r||(i.current===null?n(P7e(e)):i.current!==e&&n(_7e({prev:i.current,next:e})),i.current=e)},[e,n,r]),A.useLayoutEffect(()=>()=>{i.current&&(n(I7e(i.current)),i.current=null)},[n]),null}function aB(t){var{legendPayload:e}=t,n=_r(),r=qi(),i=A.useRef(null);return A.useLayoutEffect(()=>{r||(i.current===null?n(kle(e)):i.current!==e&&n(Nle({prev:i.current,next:e})),i.current=e)},[n,r,e]),A.useLayoutEffect(()=>()=>{i.current&&(n(Cle(i.current)),i.current=null)},[n]),null}function T$e(t){var{legendPayload:e}=t,n=_r(),r=Lt(Tn),i=A.useRef(null);return A.useLayoutEffect(()=>{r!=="centric"&&r!=="radial"||(i.current===null?n(kle(e)):i.current!==e&&n(Nle({prev:i.current,next:e})),i.current=e)},[n,r,e]),A.useLayoutEffect(()=>()=>{i.current&&(n(Cle(i.current)),i.current=null)},[n]),null}var jO,k$e=()=>{var[t]=A.useState(()=>Yw("uid-"));return t},N$e=(jO=cN.useId)!==null&&jO!==void 0?jO:k$e;function C$e(t,e){var n=N$e();return e||(t?"".concat(t,"-").concat(n):n)}var P$e=A.createContext(void 0),jC=t=>{var{id:e,type:n,children:r}=t,i=C$e("recharts-".concat(n),e);return A.createElement(P$e.Provider,{value:i},r(i))},_$e={cartesianItems:[],polarItems:[]},lde=Co({name:"graphicalItems",initialState:_$e,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:kr()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:n,next:r}=e.payload,i=jl(t).cartesianItems.indexOf(n);i>-1&&(t.cartesianItems[i]=r)},prepare:kr()},removeCartesianGraphicalItem:{reducer(t,e){var n=jl(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},prepare:kr()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:kr()},removePolarGraphicalItem:{reducer(t,e){var n=jl(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)},prepare:kr()}}}),{addCartesianGraphicalItem:I$e,replaceCartesianGraphicalItem:R$e,removeCartesianGraphicalItem:O$e,addPolarGraphicalItem:M$e,removePolarGraphicalItem:L$e}=lde.actions,D$e=lde.reducer,j$e=t=>{var e=_r(),n=A.useRef(null);return A.useLayoutEffect(()=>{n.current===null?e(I$e(t)):n.current!==t&&e(R$e({prev:n.current,next:t})),n.current=t},[e,t]),A.useLayoutEffect(()=>()=>{n.current&&(e(O$e(n.current)),n.current=null)},[e]),null},lB=A.memo(j$e);function B$e(t){var e=_r();return A.useLayoutEffect(()=>(e(M$e(t)),()=>{e(L$e(t))}),[e,t]),null}var U$e=["key"],F$e=["onMouseEnter","onClick","onMouseLeave"],$$e=["id"],z$e=["id"];function nJ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Yr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nJ(Object(n),!0).forEach(function(r){V$e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nJ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function V$e(t,e,n){return(e=H$e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function H$e(t){var e=q$e(t,"string");return typeof e=="symbol"?e:e+""}function q$e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vh(){return vh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vh.apply(null,arguments)}function BC(t,e){if(t==null)return{};var n,r,i=G$e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function G$e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function K$e(t){var e=A.useMemo(()=>tB(t.children,pv),[t.children]),n=Lt(r=>n$e(r,t.id,e));return n==null?null:A.createElement(T$e,{legendPayload:n})}var W$e=A.memo(t=>{var{dataKey:e,nameKey:n,sectors:r,stroke:i,strokeWidth:s,fill:o,name:a,hide:l,tooltipType:c,id:u}=t,h={dataDefinedOnItem:r.map(m=>m.tooltipPayload),positions:r.map(m=>m.tooltipPosition),settings:{stroke:i,strokeWidth:s,fill:o,dataKey:e,nameKey:n,name:Th(a,e),hide:l,type:c,color:o,unit:"",graphicalItemId:u}};return A.createElement(DC,{tooltipEntrySettings:h})}),Y$e=(t,e)=>t>e?"start":t<e?"end":"middle",J$e=(t,e,n)=>Us(typeof e=="function"?e(t):e,n,n*.8),X$e=(t,e,n)=>{var{top:r,left:i,width:s,height:o}=e,a=Lle(s,o),l=i+Us(t.cx,s,s/2),c=r+Us(t.cy,o,o/2),u=Us(t.innerRadius,a,0),h=J$e(n,t.outerRadius,a),m=t.maxRadius||Math.sqrt(s*s+o*o)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:h,maxRadius:m}},Q$e=(t,e)=>{var n=zi(e-t),r=Math.min(Math.abs(e-t),360);return n*r};function Z$e(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}var eze=(t,e)=>{if(A.isValidElement(t))return A.cloneElement(t,e);if(typeof t=="function")return t(e);var n=Rn("recharts-pie-label-line",typeof t!="boolean"?t.className:""),{key:r}=e,i=BC(e,U$e);return A.createElement(ly,vh({},i,{type:"linear",className:n}))},tze=(t,e,n)=>{if(A.isValidElement(t))return A.cloneElement(t,e);var r=n;if(typeof t=="function"&&(r=t(e),A.isValidElement(r)))return r;var i=Rn("recharts-pie-label-text",Z$e(t));return A.createElement(RC,vh({},e,{alignmentBaseline:"middle",className:i}),r)};function nze(t){var{sectors:e,props:n,showLabels:r}=t,{label:i,labelLine:s,dataKey:o}=n;if(!r||!i||!e)return null;var a=ro(n),l=km(i),c=km(s),u=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,h=e.map((m,g)=>{var y=(m.startAngle+m.endAngle)/2,v=gi(m.cx,m.cy,m.outerRadius+u,y),b=Yr(Yr(Yr(Yr({},a),m),{},{stroke:"none"},l),{},{index:g,textAnchor:Y$e(v.x,m.cx)},v),w=Yr(Yr(Yr(Yr({},a),m),{},{fill:"none",stroke:m.fill},c),{},{index:g,points:[gi(m.cx,m.cy,m.outerRadius,y),v],key:"line"});return A.createElement(ao,{zIndex:ii.label,key:"label-".concat(m.startAngle,"-").concat(m.endAngle,"-").concat(m.midAngle,"-").concat(g)},A.createElement(Jr,null,s&&eze(s,w),tze(i,b,Wn(m,o))))});return A.createElement(Jr,{className:"recharts-pie-labels"},h)}function rze(t){var{sectors:e,props:n,showLabels:r}=t,{label:i}=n;return typeof i=="object"&&i!=null&&"position"in i?A.createElement(OC,{label:i}):A.createElement(nze,{sectors:e,props:n,showLabels:r})}function ize(t){var{sectors:e,activeShape:n,inactiveShape:r,allOtherPieProps:i,shape:s,id:o}=t,a=Lt(xh),l=Lt(q6),c=Lt(vUe),{onMouseEnter:u,onClick:h,onMouseLeave:m}=i,g=BC(i,F$e),y=iB(u,i.dataKey,o),v=sB(m),b=oB(h,i.dataKey,o);return e==null||e.length===0?null:A.createElement(A.Fragment,null,e.map((w,k)=>{if((w==null?void 0:w.startAngle)===0&&(w==null?void 0:w.endAngle)===0&&e.length!==1)return null;var N=c==null||c===o,R=String(k)===a&&(l==null||i.dataKey===l)&&N,D=a?r:null,O=n&&R?n:D,B=Yr(Yr({},w),{},{stroke:w.stroke,tabIndex:-1,[ule]:k,[dle]:o});return A.createElement(Jr,vh({key:"sector-".concat(w==null?void 0:w.startAngle,"-").concat(w==null?void 0:w.endAngle,"-").concat(w.midAngle,"-").concat(k),tabIndex:-1,className:"recharts-pie-sector"},WN(g,w,k),{onMouseEnter:y(w,k),onMouseLeave:v(w,k),onClick:b(w,k)}),A.createElement(rB,vh({option:s??O,index:k,shapeType:"sector",isActive:R},B)))}))}function sze(t){var e,{pieSettings:n,displayedData:r,cells:i,offset:s}=t,{cornerRadius:o,startAngle:a,endAngle:l,dataKey:c,nameKey:u,tooltipType:h}=n,m=Math.abs(n.minAngle),g=Q$e(a,l),y=Math.abs(g),v=r.length<=1?0:(e=n.paddingAngle)!==null&&e!==void 0?e:0,b=r.filter(O=>Wn(O,c,0)!==0).length,w=(y>=360?b:b-1)*v,k=y-b*m-w,N=r.reduce((O,B)=>{var z=Wn(B,c,0);return O+(kt(z)?z:0)},0),R;if(N>0){var D;R=r.map((O,B)=>{var z=Wn(O,c,0),U=Wn(O,u,B),$=X$e(n,s,O),W=(kt(z)?z:0)/N,H,F=Yr(Yr({},O),i&&i[B]&&i[B].props);B?H=D.endAngle+zi(g)*v*(z!==0?1:0):H=a;var T=H+zi(g)*((z!==0?m:0)+W*k),_=(H+T)/2,L=($.innerRadius+$.outerRadius)/2,V=[{name:U,value:z,payload:F,dataKey:c,type:h,graphicalItemId:n.id}],K=gi($.cx,$.cy,L,_);return D=Yr(Yr(Yr(Yr({},n.presentationProps),{},{percent:W,cornerRadius:typeof o=="string"?parseFloat(o):o,name:U,tooltipPayload:V,midAngle:_,middleRadius:L,tooltipPosition:K},F),$),{},{value:z,dataKey:c,startAngle:H,endAngle:T,payload:F,paddingAngle:zi(g)*v}),D})}return R}function oze(t){var{showLabels:e,sectors:n,children:r}=t,i=A.useMemo(()=>!e||!n?[]:n.map(s=>({value:s.value,payload:s.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:s.cx,cy:s.cy,innerRadius:s.innerRadius,outerRadius:s.outerRadius,startAngle:s.startAngle,endAngle:s.endAngle,clockWise:!1},fill:s.fill})),[n,e]);return A.createElement(F9e,{value:e?i:void 0},r)}function aze(t){var{props:e,previousSectorsRef:n,id:r}=t,{sectors:i,isAnimationActive:s,animationBegin:o,animationDuration:a,animationEasing:l,activeShape:c,inactiveShape:u,onAnimationStart:h,onAnimationEnd:m}=e,g=iv(e,"recharts-pie-"),y=n.current,[v,b]=A.useState(!1),w=A.useCallback(()=>{typeof m=="function"&&m(),b(!1)},[m]),k=A.useCallback(()=>{typeof h=="function"&&h(),b(!0)},[h]);return A.createElement(oze,{showLabels:!v,sectors:i},A.createElement(rv,{animationId:g,begin:o,duration:a,isActive:s,easing:l,onAnimationStart:k,onAnimationEnd:w,key:g},N=>{var R=[],D=i&&i[0],O=D==null?void 0:D.startAngle;return i==null||i.forEach((B,z)=>{var U=y&&y[z],$=z>0?Cm(B,"paddingAngle",0):0;if(U){var W=qn(U.endAngle-U.startAngle,B.endAngle-B.startAngle,N),H=Yr(Yr({},B),{},{startAngle:O+$,endAngle:O+W+$});R.push(H),O=H.endAngle}else{var{endAngle:F,startAngle:T}=B,_=qn(0,F-T,N),L=Yr(Yr({},B),{},{startAngle:O+$,endAngle:O+_+$});R.push(L),O=L.endAngle}}),n.current=R,A.createElement(Jr,null,A.createElement(ize,{sectors:R,activeShape:c,inactiveShape:u,allOtherPieProps:e,shape:e.shape,id:r}))}),A.createElement(rze,{showLabels:!v,sectors:i,props:e}),e.children)}var lze={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:ii.area};function cze(t){var{id:e}=t,n=BC(t,$$e),{hide:r,className:i,rootTabIndex:s}=t,o=A.useMemo(()=>tB(t.children,pv),[t.children]),a=Lt(u=>r$e(u,e,o)),l=A.useRef(null),c=Rn("recharts-pie",i);return r||a==null?(l.current=null,A.createElement(Jr,{tabIndex:s,className:c})):A.createElement(ao,{zIndex:t.zIndex},A.createElement(W$e,{dataKey:t.dataKey,nameKey:t.nameKey,sectors:a,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,tooltipType:t.tooltipType,id:e}),A.createElement(Jr,{tabIndex:s,className:c},A.createElement(aze,{props:Yr(Yr({},n),{},{sectors:a}),previousSectorsRef:l,id:e})))}function cB(t){var e=xi(t,lze),{id:n}=e,r=BC(e,z$e),i=ro(r);return A.createElement(jC,{id:n,type:"pie"},s=>A.createElement(A.Fragment,null,A.createElement(B$e,{type:"pie",id:s,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:i,maxRadius:e.maxRadius}),A.createElement(K$e,vh({},r,{id:s})),A.createElement(cze,vh({},r,{id:s}))))}cB.displayName="Pie";var uze=["points"];function rJ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function BO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rJ(Object(n),!0).forEach(function(r){dze(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rJ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function dze(t,e,n){return(e=fze(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fze(t){var e=hze(t,"string");return typeof e=="symbol"?e:e+""}function hze(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function h2(){return h2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},h2.apply(null,arguments)}function pze(t,e){if(t==null)return{};var n,r,i=mze(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function mze(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function gze(t){var{option:e,dotProps:n,className:r}=t;if(A.isValidElement(e))return A.cloneElement(e,n);if(typeof e=="function")return e(n);var i=Rn(r,typeof e!="boolean"?e.className:""),s=n??{},{points:o}=s,a=pze(s,uze);return A.createElement(nde,h2({},a,{className:i}))}function yze(t,e){return t==null?!1:e?!0:t.length===1}function cde(t){var{points:e,dot:n,className:r,dotClassName:i,dataKey:s,baseProps:o,needClip:a,clipPathId:l,zIndex:c=ii.scatter}=t;if(!yze(e,n))return null;var u=nB(n),h=s4e(n),m=e.map((y,v)=>{var b,w,k=BO(BO(BO({r:3},o),h),{},{index:v,cx:(b=y.x)!==null&&b!==void 0?b:void 0,cy:(w=y.y)!==null&&w!==void 0?w:void 0,dataKey:s,value:y.value,payload:y.payload,points:e});return A.createElement(gze,{key:"dot-".concat(v),option:n,dotProps:k,className:i})}),g={};return a&&l!=null&&(g.clipPath="url(#clipPath-".concat(u?"":"dots-").concat(l,")")),A.createElement(ao,{zIndex:c},A.createElement(Jr,h2({className:r},g),m))}function iJ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function sJ(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iJ(Object(n),!0).forEach(function(r){xze(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iJ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xze(t,e,n){return(e=vze(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vze(t){var e=bze(t,"string");return typeof e=="symbol"?e:e+""}function bze(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ude=0,wze={xAxis:{},yAxis:{},zAxis:{}},dde=Co({name:"cartesianAxis",initialState:wze,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:kr()},replaceXAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.xAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.xAxis[n.id],t.xAxis[r.id]=r)},prepare:kr()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:kr()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:kr()},replaceYAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.yAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.yAxis[n.id],t.yAxis[r.id]=r)},prepare:kr()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:kr()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:kr()},replaceZAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.zAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.zAxis[n.id],t.zAxis[r.id]=r)},prepare:kr()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:kr()},updateYAxisWidth(t,e){var{id:n,width:r}=e.payload,i=t.yAxis[n];if(i){var s=i.widthHistory||[];if(s.length===3&&s[0]===s[2]&&r===s[1]&&r!==i.width&&Math.abs(r-s[0])<=1)return;var o=[...s,r].slice(-3);t.yAxis[n]=sJ(sJ({},t.yAxis[n]),{},{width:r,widthHistory:o})}}}}),{addXAxis:Eze,replaceXAxis:Sze,removeXAxis:Aze,addYAxis:Tze,replaceYAxis:kze,removeYAxis:Nze,addZAxis:cgt,replaceZAxis:ugt,removeZAxis:dgt,updateYAxisWidth:Cze}=dde.actions,Pze=dde.reducer,_ze=je([ki],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),Ize=je([_ze,Pd,_d],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),UC=()=>Lt(Ize),Rze=()=>Lt(AUe);function oJ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function UO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oJ(Object(n),!0).forEach(function(r){Oze(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oJ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Oze(t,e,n){return(e=Mze(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mze(t){var e=Lze(t,"string");return typeof e=="symbol"?e:e+""}function Lze(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Dze=t=>{var{point:e,childIndex:n,mainColor:r,activeDot:i,dataKey:s,clipPath:o}=t;if(i===!1||e.x==null||e.y==null)return null;var a={index:n,dataKey:s,cx:e.x,cy:e.y,r:4,fill:r??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},l=UO(UO(UO({},a),km(i)),kj(i)),c;return A.isValidElement(i)?c=A.cloneElement(i,l):typeof i=="function"?c=i(l):c=A.createElement(nde,l),A.createElement(Jr,{className:"recharts-active-dot",clipPath:o},c)};function TL(t){var{points:e,mainColor:n,activeDot:r,itemDataKey:i,clipPath:s,zIndex:o=ii.activeDot}=t,a=Lt(xh),l=Rze();if(e==null||l==null)return null;var c=e.find(u=>l.includes(u.payload));return Sr(c)?null:A.createElement(ao,{zIndex:o},A.createElement(Dze,{point:c,childIndex:Number(a),mainColor:n,dataKey:i,activeDot:r,clipPath:s}))}var aJ=(t,e,n)=>{var r=n??t;if(!Sr(r))return Us(r,e,0)},jze=(t,e,n)=>{var r={},i=t.filter(SC),s=t.filter(c=>c.stackId==null),o=i.reduce((c,u)=>(c[u.stackId]||(c[u.stackId]=[]),c[u.stackId].push(u),c),r),a=Object.entries(o).map(c=>{var[u,h]=c,m=h.map(y=>y.dataKey),g=aJ(e,n,h[0].barSize);return{stackId:u,dataKeys:m,barSize:g}}),l=s.map(c=>{var u=[c.dataKey].filter(m=>m!=null),h=aJ(e,n,c.barSize);return{stackId:void 0,dataKeys:u,barSize:h}});return[...a,...l]};function lJ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function DA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lJ(Object(n),!0).forEach(function(r){Bze(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lJ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Bze(t,e,n){return(e=Uze(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Uze(t){var e=Fze(t,"string");return typeof e=="symbol"?e:e+""}function Fze(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $ze(t,e,n,r,i){var s=r.length;if(!(s<1)){var o=Us(t,n,0,!0),a,l=[];if(cr(r[0].barSize)){var c=!1,u=n/s,h=r.reduce((w,k)=>w+(k.barSize||0),0);h+=(s-1)*o,h>=n&&(h-=(s-1)*o,o=0),h>=n&&u>0&&(c=!0,u*=.9,h=s*u);var m=(n-h)/2>>0,g={offset:m-o,size:0};a=r.reduce((w,k)=>{var N,R={stackId:k.stackId,dataKeys:k.dataKeys,position:{offset:g.offset+g.size+o,size:c?u:(N=k.barSize)!==null&&N!==void 0?N:0}},D=[...w,R];return g=D[D.length-1].position,D},l)}else{var y=Us(e,n,0,!0);n-2*y-(s-1)*o<=0&&(o=0);var v=(n-2*y-(s-1)*o)/s;v>1&&(v>>=0);var b=cr(i)?Math.min(v,i):v;a=r.reduce((w,k,N)=>[...w,{stackId:k.stackId,dataKeys:k.dataKeys,position:{offset:y+(v+o)*N+(v-b)/2,size:b}}],l)}return a}}var zze=(t,e,n,r,i,s,o)=>{var a=Sr(o)?e:o,l=$ze(n,r,i!==s?i:s,t,a);return i!==s&&l!=null&&(l=l.map(c=>DA(DA({},c),{},{position:DA(DA({},c.position),{},{offset:c.position.offset-i/2})}))),l},Vze=(t,e)=>{var n=EC(e);if(!(!t||n==null||e==null)){var{stackId:r}=e;if(r!=null){var i=t[r];if(i){var{stackedData:s}=i;if(s)return s.find(o=>o.key===n)}}}};function Hze(t,e){return t&&typeof t=="object"&&"zIndex"in t&&typeof t.zIndex=="number"&&cr(t.zIndex)?t.zIndex:e}var fde=t=>{var{chartData:e}=t,n=_r(),r=qi();return A.useEffect(()=>r?()=>{}:(n(mY(e)),()=>{n(mY(void 0))}),[e,n,r]),null},cJ={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},hde=Co({name:"brush",initialState:cJ,reducers:{setBrushSettings(t,e){return e.payload==null?cJ:e.payload}}}),{setBrushSettings:fgt}=hde.actions,qze=hde.reducer;function Gze(t,e,n){return(e=Kze(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kze(t){var e=Wze(t,"string");return typeof e=="symbol"?e:e+""}function Wze(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class uB{static create(e){return new uB(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(r)switch(r){case"start":return this.scale(e);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(e)+s}default:return this.scale(e)}if(n){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+o}return this.scale(e)}}isInRange(e){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?e>=r&&e<=i:e>=i&&e<=r}}Gze(uB,"EPS",1e-4);function Yze(t){return(t%180+180)%180}var Jze=function(e){var{width:n,height:r}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=Yze(i),o=s*Math.PI/180,a=Math.atan(r/n),l=o>a&&o<Math.PI-a?r/Math.sin(o):n/Math.cos(o);return Math.abs(l)},Xze={dots:[],areas:[],lines:[]},pde=Co({name:"referenceElements",initialState:Xze,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=jl(t).dots.findIndex(r=>r===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=jl(t).areas.findIndex(r=>r===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=jl(t).lines.findIndex(r=>r===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:hgt,removeDot:pgt,addArea:mgt,removeArea:ggt,addLine:ygt,removeLine:xgt}=pde.actions,Qze=pde.reducer,Zze=A.createContext(void 0),eVe=t=>{var{children:e}=t,[n]=A.useState("".concat(Yw("recharts"),"-clip")),r=UC();if(r==null)return null;var{x:i,y:s,width:o,height:a}=r;return A.createElement(Zze.Provider,{value:n},A.createElement("defs",null,A.createElement("clipPath",{id:n},A.createElement("rect",{x:i,y:s,height:a,width:o}))),e)};function mde(t,e){if(e<1)return[];if(e===1)return t;for(var n=[],r=0;r<t.length;r+=e){var i=t[r];i!==void 0&&n.push(i)}return n}function tVe(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return Jze(r,n)}function nVe(t,e,n){var r=n==="width",{x:i,y:s,width:o,height:a}=t;return e===1?{start:r?i:s,end:r?i+o:s+a}:{start:r?i+o:s+a,end:r?i:s}}function u1(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var s=n();return t*(e-t*s/2-r)>=0&&t*(e+t*s/2-i)<=0}function rVe(t,e){return mde(t,e+1)}function iVe(t,e,n,r,i){for(var s=(r||[]).slice(),{start:o,end:a}=e,l=0,c=1,u=o,h=function(){var y=r==null?void 0:r[l];if(y===void 0)return{v:mde(r,c)};var v=l,b,w=()=>(b===void 0&&(b=n(y,v)),b),k=y.coordinate,N=l===0||u1(t,k,w,u,a);N||(l=0,u=o,c+=1),N&&(u=k+t*(w()/2+i),l+=c)},m;c<=s.length;)if(m=h(),m)return m.v;return[]}function sVe(t,e,n,r,i){var s=(r||[]).slice(),o=s.length;if(o===0)return[];for(var{start:a,end:l}=e,c=1;c<=o;c++){for(var u=(o-1)%c,h=a,m=!0,g=function(){var k=r[y],N=y,R,D=()=>(R===void 0&&(R=n(k,N)),R),O=k.coordinate,B=y===u||u1(t,O,D,h,l);if(!B)return m=!1,1;B&&(h=O+t*(D()/2+i))},y=u;y<o&&!g();y+=c);if(m){for(var v=[],b=u;b<o;b+=c)v.push(r[b]);return v}}return[]}function uJ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ns(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uJ(Object(n),!0).forEach(function(r){oVe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uJ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function oVe(t,e,n){return(e=aVe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aVe(t){var e=lVe(t,"string");return typeof e=="symbol"?e:e+""}function lVe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cVe(t,e,n,r,i){for(var s=(r||[]).slice(),o=s.length,{start:a}=e,{end:l}=e,c=function(m){var g=s[m],y,v=()=>(y===void 0&&(y=n(g,m)),y);if(m===o-1){var b=t*(g.coordinate+t*v()/2-l);s[m]=g=Ns(Ns({},g),{},{tickCoord:b>0?g.coordinate-b*t:g.coordinate})}else s[m]=g=Ns(Ns({},g),{},{tickCoord:g.coordinate});if(g.tickCoord!=null){var w=u1(t,g.tickCoord,v,a,l);w&&(l=g.tickCoord-t*(v()/2+i),s[m]=Ns(Ns({},g),{},{isShow:!0}))}},u=o-1;u>=0;u--)c(u);return s}function uVe(t,e,n,r,i,s){var o=(r||[]).slice(),a=o.length,{start:l,end:c}=e;if(s){var u=r[a-1],h=n(u,a-1),m=t*(u.coordinate+t*h/2-c);if(o[a-1]=u=Ns(Ns({},u),{},{tickCoord:m>0?u.coordinate-m*t:u.coordinate}),u.tickCoord!=null){var g=u1(t,u.tickCoord,()=>h,l,c);g&&(c=u.tickCoord-t*(h/2+i),o[a-1]=Ns(Ns({},u),{},{isShow:!0}))}}for(var y=s?a-1:a,v=function(k){var N=o[k],R,D=()=>(R===void 0&&(R=n(N,k)),R);if(k===0){var O=t*(N.coordinate-t*D()/2-l);o[k]=N=Ns(Ns({},N),{},{tickCoord:O<0?N.coordinate-O*t:N.coordinate})}else o[k]=N=Ns(Ns({},N),{},{tickCoord:N.coordinate});if(N.tickCoord!=null){var B=u1(t,N.tickCoord,D,l,c);B&&(l=N.tickCoord+t*(D()/2+i),o[k]=Ns(Ns({},N),{},{isShow:!0}))}},b=0;b<y;b++)v(b);return o}function dB(t,e,n){var{tick:r,ticks:i,viewBox:s,minTickGap:o,orientation:a,interval:l,tickFormatter:c,unit:u,angle:h}=t;if(!i||!i.length||!r)return[];if(kt(l)||aE.isSsr){var m;return(m=rVe(i,kt(l)?l:0))!==null&&m!==void 0?m:[]}var g=[],y=a==="top"||a==="bottom"?"width":"height",v=u&&y==="width"?hw(u,{fontSize:e,letterSpacing:n}):{width:0,height:0},b=(N,R)=>{var D=typeof c=="function"?c(N.value,R):N.value;return y==="width"?tVe(hw(D,{fontSize:e,letterSpacing:n}),v,h):hw(D,{fontSize:e,letterSpacing:n})[y]},w=i.length>=2?zi(i[1].coordinate-i[0].coordinate):1,k=nVe(s,w,y);return l==="equidistantPreserveStart"?iVe(w,k,b,i,o):l==="equidistantPreserveEnd"?sVe(w,k,b,i,o):(l==="preserveStart"||l==="preserveStartEnd"?g=uVe(w,k,b,i,o,l==="preserveStartEnd"):g=cVe(w,k,b,i,o),g.filter(N=>N.isShow))}var dVe=t=>{var{ticks:e,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:s=0}=t,o=0;if(e){Array.from(e).forEach(u=>{if(u){var h=u.getBoundingClientRect();h.width>o&&(o=h.width)}});var a=n?n.getBoundingClientRect().width:0,l=i+s,c=o+l+a+(n?r:0);return Math.round(c)}return 0},fVe=["axisLine","width","height","className","hide","ticks","axisType"];function hVe(t,e){if(t==null)return{};var n,r,i=pVe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function pVe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Om(){return Om=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Om.apply(null,arguments)}function dJ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dJ(Object(n),!0).forEach(function(r){mVe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dJ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mVe(t,e,n){return(e=gVe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gVe(t){var e=yVe(t,"string");return typeof e=="symbol"?e:e+""}function yVe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var id={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:ii.axis};function xVe(t){var{x:e,y:n,width:r,height:i,orientation:s,mirror:o,axisLine:a,otherSvgProps:l}=t;if(!a)return null;var c=hi(hi(hi({},l),ro(a)),{},{fill:"none"});if(s==="top"||s==="bottom"){var u=+(s==="top"&&!o||s==="bottom"&&o);c=hi(hi({},c),{},{x1:e,y1:n+u*i,x2:e+r,y2:n+u*i})}else{var h=+(s==="left"&&!o||s==="right"&&o);c=hi(hi({},c),{},{x1:e+h*r,y1:n,x2:e+h*r,y2:n+i})}return A.createElement("line",Om({},c,{className:Rn("recharts-cartesian-axis-line",Cm(a,"className"))}))}function vVe(t,e,n,r,i,s,o,a,l){var c,u,h,m,g,y,v=a?-1:1,b=t.tickSize||o,w=kt(t.tickCoord)?t.tickCoord:t.coordinate;switch(s){case"top":c=u=t.coordinate,m=n+ +!a*i,h=m-v*b,y=h-v*l,g=w;break;case"left":h=m=t.coordinate,u=e+ +!a*r,c=u-v*b,g=c-v*l,y=w;break;case"right":h=m=t.coordinate,u=e+ +a*r,c=u+v*b,g=c+v*l,y=w;break;default:c=u=t.coordinate,m=n+ +a*i,h=m+v*b,y=h+v*l,g=w;break}return{line:{x1:c,y1:h,x2:u,y2:m},tick:{x:g,y}}}function bVe(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function wVe(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function EVe(t){var{option:e,tickProps:n,value:r}=t,i,s=Rn(n.className,"recharts-cartesian-axis-tick-value");if(A.isValidElement(e))i=A.cloneElement(e,hi(hi({},n),{},{className:s}));else if(typeof e=="function")i=e(hi(hi({},n),{},{className:s}));else{var o="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(o=Rn(o,e==null?void 0:e.className)),i=A.createElement(RC,Om({},n,{className:o}),r)}return i}var SVe=A.forwardRef((t,e)=>{var{ticks:n=[],tick:r,tickLine:i,stroke:s,tickFormatter:o,unit:a,padding:l,tickTextProps:c,orientation:u,mirror:h,x:m,y:g,width:y,height:v,tickSize:b,tickMargin:w,fontSize:k,letterSpacing:N,getTicksConfig:R,events:D,axisType:O}=t,B=dB(hi(hi({},R),{},{ticks:n}),k,N),z=bVe(u,h),U=wVe(u,h),$=ro(R),W=km(r),H={};typeof i=="object"&&(H=i);var F=hi(hi({},$),{},{fill:"none"},H),T=B.map(V=>hi({entry:V},vVe(V,m,g,y,v,u,b,h,w))),_=T.map(V=>{var{entry:K,line:te}=V;return A.createElement(Jr,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(K.value,"-").concat(K.coordinate,"-").concat(K.tickCoord)},i&&A.createElement("line",Om({},F,te,{className:Rn("recharts-cartesian-axis-tick-line",Cm(i,"className"))})))}),L=T.map((V,K)=>{var{entry:te,tick:G}=V,q=hi(hi(hi(hi({textAnchor:z,verticalAnchor:U},$),{},{stroke:"none",fill:s},W),G),{},{index:K,payload:te,visibleTicksCount:B.length,tickFormatter:o,padding:l},c);return A.createElement(Jr,Om({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(te.value,"-").concat(te.coordinate,"-").concat(te.tickCoord)},WN(D,te,K)),r&&A.createElement(EVe,{option:r,tickProps:q,value:"".concat(typeof o=="function"?o(te.value,K):te.value).concat(a||"")}))});return A.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(O,"-ticks")},L.length>0&&A.createElement(ao,{zIndex:ii.label},A.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(O,"-tick-labels"),ref:e},L)),_.length>0&&A.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(O,"-tick-lines")},_))}),AVe=A.forwardRef((t,e)=>{var{axisLine:n,width:r,height:i,className:s,hide:o,ticks:a,axisType:l}=t,c=hVe(t,fVe),[u,h]=A.useState(""),[m,g]=A.useState(""),y=A.useRef(null);A.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var b;return dVe({ticks:y.current,label:(b=t.labelRef)===null||b===void 0?void 0:b.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var v=A.useCallback(b=>{if(b){var w=b.getElementsByClassName("recharts-cartesian-axis-tick-value");y.current=w;var k=w[0];if(k){var N=window.getComputedStyle(k),R=N.fontSize,D=N.letterSpacing;(R!==u||D!==m)&&(h(R),g(D))}}},[u,m]);return o||r!=null&&r<=0||i!=null&&i<=0?null:A.createElement(ao,{zIndex:t.zIndex},A.createElement(Jr,{className:Rn("recharts-cartesian-axis",s)},A.createElement(xVe,{x:t.x,y:t.y,width:r,height:i,orientation:t.orientation,mirror:t.mirror,axisLine:n,otherSvgProps:ro(t)}),A.createElement(SVe,{ref:v,axisType:l,events:c,fontSize:u,getTicksConfig:t,height:t.height,letterSpacing:m,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:a,unit:t.unit,width:t.width,x:t.x,y:t.y}),A.createElement(v9e,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},A.createElement(P9e,{label:t.label,labelRef:t.labelRef}),t.children)))}),fB=A.forwardRef((t,e)=>{var n=xi(t,id);return A.createElement(AVe,Om({},n,{ref:e}))});fB.displayName="CartesianAxis";var TVe=["x1","y1","x2","y2","key"],kVe=["offset"],NVe=["xAxisId","yAxisId"],CVe=["xAxisId","yAxisId"];function fJ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Rs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fJ(Object(n),!0).forEach(function(r){PVe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fJ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function PVe(t,e,n){return(e=_Ve(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _Ve(t){var e=IVe(t,"string");return typeof e=="symbol"?e:e+""}function IVe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Mp(){return Mp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mp.apply(null,arguments)}function p2(t,e){if(t==null)return{};var n,r,i=RVe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function RVe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var OVe=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:n,x:r,y:i,width:s,height:o,ry:a}=t;return A.createElement("rect",{x:r,y:i,ry:a,width:s,height:o,stroke:"none",fill:e,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function gde(t){var{option:e,lineItemProps:n}=t,r;if(A.isValidElement(e))r=A.cloneElement(e,n);else if(typeof e=="function")r=e(n);else{var i,{x1:s,y1:o,x2:a,y2:l,key:c}=n,u=p2(n,TVe),h=(i=ro(u))!==null&&i!==void 0?i:{},{offset:m}=h,g=p2(h,kVe);r=A.createElement("line",Mp({},g,{x1:s,y1:o,x2:a,y2:l,fill:"none",key:c}))}return r}function MVe(t){var{x:e,width:n,horizontal:r=!0,horizontalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:o}=t,a=p2(t,NVe),l=i.map((c,u)=>{var h=Rs(Rs({},a),{},{x1:e,y1:c,x2:e+n,y2:c,key:"line-".concat(u),index:u});return A.createElement(gde,{key:"line-".concat(u),option:r,lineItemProps:h})});return A.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function LVe(t){var{y:e,height:n,vertical:r=!0,verticalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:o}=t,a=p2(t,CVe),l=i.map((c,u)=>{var h=Rs(Rs({},a),{},{x1:c,y1:e,x2:c,y2:e+n,key:"line-".concat(u),index:u});return A.createElement(gde,{option:r,lineItemProps:h,key:"line-".concat(u)})});return A.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function DVe(t){var{horizontalFill:e,fillOpacity:n,x:r,y:i,width:s,height:o,horizontalPoints:a,horizontal:l=!0}=t;if(!l||!e||!e.length||a==null)return null;var c=a.map(h=>Math.round(h+i-i)).sort((h,m)=>h-m);i!==c[0]&&c.unshift(0);var u=c.map((h,m)=>{var g=!c[m+1],y=g?i+o-h:c[m+1]-h;if(y<=0)return null;var v=m%e.length;return A.createElement("rect",{key:"react-".concat(m),y:h,x:r,height:y,width:s,stroke:"none",fill:e[v],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return A.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},u)}function jVe(t){var{vertical:e=!0,verticalFill:n,fillOpacity:r,x:i,y:s,width:o,height:a,verticalPoints:l}=t;if(!e||!n||!n.length)return null;var c=l.map(h=>Math.round(h+i-i)).sort((h,m)=>h-m);i!==c[0]&&c.unshift(0);var u=c.map((h,m)=>{var g=!c[m+1],y=g?i+o-h:c[m+1]-h;if(y<=0)return null;var v=m%n.length;return A.createElement("rect",{key:"react-".concat(m),x:h,y:s,width:y,height:a,stroke:"none",fill:n[v],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return A.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var BVe=(t,e)=>{var{xAxis:n,width:r,height:i,offset:s}=t;return ole(dB(Rs(Rs(Rs({},id),n),{},{ticks:ale(n),viewBox:{x:0,y:0,width:r,height:i}})),s.left,s.left+s.width,e)},UVe=(t,e)=>{var{yAxis:n,width:r,height:i,offset:s}=t;return ole(dB(Rs(Rs(Rs({},id),n),{},{ticks:ale(n),viewBox:{x:0,y:0,width:r,height:i}})),s.top,s.top+s.height,e)},FVe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:ii.grid};function d1(t){var e=yle(),n=xle(),r=gle(),i=Rs(Rs({},xi(t,FVe)),{},{x:kt(t.x)?t.x:r.left,y:kt(t.y)?t.y:r.top,width:kt(t.width)?t.width:r.width,height:kt(t.height)?t.height:r.height}),{xAxisId:s,yAxisId:o,x:a,y:l,width:c,height:u,syncWithTicks:h,horizontalValues:m,verticalValues:g}=i,y=qi(),v=Lt(U=>rY(U,"xAxis",s,y)),b=Lt(U=>rY(U,"yAxis",o,y));if(!$c(c)||!$c(u)||!kt(a)||!kt(l))return null;var w=i.verticalCoordinatesGenerator||BVe,k=i.horizontalCoordinatesGenerator||UVe,{horizontalPoints:N,verticalPoints:R}=i;if((!N||!N.length)&&typeof k=="function"){var D=m&&m.length,O=k({yAxis:b?Rs(Rs({},b),{},{ticks:D?m:b.ticks}):void 0,width:e??c,height:n??u,offset:r},D?!0:h);Fk(Array.isArray(O),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof O,"]")),Array.isArray(O)&&(N=O)}if((!R||!R.length)&&typeof w=="function"){var B=g&&g.length,z=w({xAxis:v?Rs(Rs({},v),{},{ticks:B?g:v.ticks}):void 0,width:e??c,height:n??u,offset:r},B?!0:h);Fk(Array.isArray(z),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof z,"]")),Array.isArray(z)&&(R=z)}return A.createElement(ao,{zIndex:i.zIndex},A.createElement("g",{className:"recharts-cartesian-grid"},A.createElement(OVe,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),A.createElement(DVe,Mp({},i,{horizontalPoints:N})),A.createElement(jVe,Mp({},i,{verticalPoints:R})),A.createElement(MVe,Mp({},i,{offset:r,horizontalPoints:N,xAxis:v,yAxis:b})),A.createElement(LVe,Mp({},i,{offset:r,verticalPoints:R,xAxis:v,yAxis:b}))))}d1.displayName="CartesianGrid";var $Ve={},yde=Co({name:"errorBars",initialState:$Ve,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]||(t[n]=[]),t[n].push(r)},replaceErrorBar:(t,e)=>{var{itemId:n,prev:r,next:i}=e.payload;t[n]&&(t[n]=t[n].map(s=>s.dataKey===r.dataKey&&s.direction===r.direction?i:s))},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]&&(t[n]=t[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:vgt,replaceErrorBar:bgt,removeErrorBar:wgt}=yde.actions,zVe=yde.reducer,VVe=["children"];function HVe(t,e){if(t==null)return{};var n,r,i=qVe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function qVe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var GVe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},KVe=A.createContext(GVe);function xde(t){var{children:e}=t,n=HVe(t,VVe);return A.createElement(KVe.Provider,{value:n},e)}function FC(t,e){var n,r,i=Lt(c=>Od(c,t)),s=Lt(c=>Md(c,e)),o=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:Ri.allowDataOverflow,a=(r=s==null?void 0:s.allowDataOverflow)!==null&&r!==void 0?r:Oi.allowDataOverflow,l=o||a;return{needClip:l,needClipX:o,needClipY:a}}function hB(t){var{xAxisId:e,yAxisId:n,clipPathId:r}=t,i=UC(),{needClipX:s,needClipY:o,needClip:a}=FC(e,n);if(!a||!i)return null;var{x:l,y:c,width:u,height:h}=i;return A.createElement("clipPath",{id:"clipPath-".concat(r)},A.createElement("rect",{x:s?l:l-u/2,y:o?c:c-h/2,width:s?u:u*2,height:o?h:h*2}))}var vde=(t,e,n,r)=>Hc(t,"xAxis",e,r),bde=(t,e,n,r)=>Vc(t,"xAxis",e,r),wde=(t,e,n,r)=>Hc(t,"yAxis",n,r),Ede=(t,e,n,r)=>Vc(t,"yAxis",n,r),WVe=je([Tn,vde,wde,bde,Ede],(t,e,n,r,i)=>Kc(t,"xAxis")?gh(e,r,!1):gh(n,i,!1)),YVe=(t,e,n,r,i)=>i;function JVe(t){return t.type==="line"}var XVe=je([mE,YVe],(t,e)=>t.filter(JVe).find(n=>n.id===e)),QVe=je([Tn,vde,wde,bde,Ede,XVe,WVe,u6],(t,e,n,r,i,s,o,a)=>{var{chartData:l,dataStartIndex:c,dataEndIndex:u}=a;if(!(s==null||e==null||n==null||r==null||i==null||r.length===0||i.length===0||o==null||t!=="horizontal"&&t!=="vertical")){var{dataKey:h,data:m}=s,g;if(m!=null&&m.length>0?g=m:g=l==null?void 0:l.slice(c,u+1),g!=null)return DHe({layout:t,xAxis:e,yAxis:n,xAxisTicks:r,yAxisTicks:i,dataKey:h,bandSize:o,displayedData:g})}});function Sde(t){var e=km(t),n=3,r=2;if(e!=null){var{r:i,strokeWidth:s}=e,o=Number(i),a=Number(s);return(Number.isNaN(o)||o<0)&&(o=n),(Number.isNaN(a)||a<0)&&(a=r),{r:o,strokeWidth:a}}return{r:n,strokeWidth:r}}var FO={exports:{}},$O={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hJ;function ZVe(){if(hJ)return $O;hJ=1;var t=Fx();function e(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,i=t.useRef,s=t.useEffect,o=t.useMemo,a=t.useDebugValue;return $O.useSyncExternalStoreWithSelector=function(l,c,u,h,m){var g=i(null);if(g.current===null){var y={hasValue:!1,value:null};g.current=y}else y=g.current;g=o(function(){function b(D){if(!w){if(w=!0,k=D,D=h(D),m!==void 0&&y.hasValue){var O=y.value;if(m(O,D))return N=O}return N=D}if(O=N,n(k,D))return O;var B=h(D);return m!==void 0&&m(O,B)?(k=D,O):(k=D,N=B)}var w=!1,k,N,R=u===void 0?null:u;return[function(){return b(c())},R===null?void 0:function(){return b(R())}]},[c,u,h,m]);var v=r(l,g[0],g[1]);return s(function(){y.hasValue=!0,y.value=v},[v]),a(v),v},$O}var pJ;function eHe(){return pJ||(pJ=1,FO.exports=ZVe()),FO.exports}eHe();function tHe(t){t()}function nHe(){let t=null,e=null;return{clear(){t=null,e=null},notify(){tHe(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var mJ={notify(){},get:()=>[]};function rHe(t,e){let n,r=mJ,i=0,s=!1;function o(v){u();const b=r.subscribe(v);let w=!1;return()=>{w||(w=!0,b(),h())}}function a(){r.notify()}function l(){y.onStateChange&&y.onStateChange()}function c(){return s}function u(){i++,n||(n=t.subscribe(l),r=nHe())}function h(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=mJ)}function m(){s||(s=!0,u())}function g(){s&&(s=!1,h())}const y={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:l,isSubscribed:c,trySubscribe:m,tryUnsubscribe:g,getListeners:()=>r};return y}var iHe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",sHe=iHe(),oHe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",aHe=oHe(),lHe=()=>sHe||aHe?A.useLayoutEffect:A.useEffect,cHe=lHe();function gJ(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function uHe(t,e){if(gJ(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(e,n[i])||!gJ(t[n[i]],e[n[i]]))return!1;return!0}var zO=Symbol.for("react-redux-context"),VO=typeof globalThis<"u"?globalThis:{};function dHe(){if(!A.createContext)return{};const t=VO[zO]??(VO[zO]=new Map);let e=t.get(A.createContext);return e||(e=A.createContext(null),t.set(A.createContext,e)),e}var fHe=dHe();function hHe(t){const{children:e,context:n,serverState:r,store:i}=t,s=A.useMemo(()=>{const l=rHe(i);return{store:i,subscription:l,getServerState:r?()=>r:void 0}},[i,r]),o=A.useMemo(()=>i.getState(),[i]);cHe(()=>{const{subscription:l}=s;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),o!==i.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[s,o]);const a=n||fHe;return A.createElement(a.Provider,{value:s},e)}var pHe=hHe,mHe=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function gHe(t,e){return t==null&&e==null?!0:typeof t=="number"&&typeof e=="number"?t===e||t!==t&&e!==e:t===e}function EE(t,e){var n=new Set([...Object.keys(t),...Object.keys(e)]);for(var r of n)if(mHe.has(r)){if(t[r]==null&&e[r]==null)continue;if(!uHe(t[r],e[r]))return!1}else if(!gHe(t[r],e[r]))return!1;return!0}var yHe=["id"],xHe=["type","layout","connectNulls","needClip","shape"],vHe=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function f1(){return f1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},f1.apply(null,arguments)}function yJ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yJ(Object(n),!0).forEach(function(r){bHe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yJ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bHe(t,e,n){return(e=wHe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wHe(t){var e=EHe(t,"string");return typeof e=="symbol"?e:e+""}function EHe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pB(t,e){if(t==null)return{};var n,r,i=SHe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function SHe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var AHe=t=>{var{dataKey:e,name:n,stroke:r,legendType:i,hide:s}=t;return[{inactive:s,dataKey:e,type:i,color:r,value:Th(n,e),payload:t}]},THe=A.memo(t=>{var{dataKey:e,data:n,stroke:r,strokeWidth:i,fill:s,name:o,hide:a,unit:l,tooltipType:c,id:u}=t,h={dataDefinedOnItem:n,positions:void 0,settings:{stroke:r,strokeWidth:i,fill:s,dataKey:e,nameKey:void 0,name:Th(o,e),hide:a,type:c,color:r,unit:l,graphicalItemId:u}};return A.createElement(DC,{tooltipEntrySettings:h})}),Ade=(t,e)=>"".concat(e,"px ").concat(t-e,"px");function kHe(t,e){for(var n=t.length%2!==0?[...t,0]:t,r=[],i=0;i<e;++i)r=[...r,...n];return r}var NHe=(t,e,n)=>{var r=n.reduce((h,m)=>h+m);if(!r)return Ade(e,t);for(var i=Math.floor(t/r),s=t%r,o=e-t,a=[],l=0,c=0;l<n.length;c+=n[l],++l)if(c+n[l]>s){a=[...n.slice(0,l),s-c];break}var u=a.length%2===0?[0,o]:[o];return[...kHe(n,i),...a,...u].map(h=>"".concat(h,"px")).join(", ")};function CHe(t){var{clipPathId:e,points:n,props:r}=t,{dot:i,dataKey:s,needClip:o}=r,{id:a}=r,l=pB(r,yHe),c=ro(l);return A.createElement(cde,{points:n,dot:i,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:s,baseProps:c,needClip:o,clipPathId:e})}function PHe(t){var{showLabels:e,children:n,points:r}=t,i=A.useMemo(()=>r==null?void 0:r.map(s=>{var o,a,l={x:(o=s.x)!==null&&o!==void 0?o:0,y:(a=s.y)!==null&&a!==void 0?a:0,width:0,lowerWidth:0,upperWidth:0,height:0};return wc(wc({},l),{},{value:s.value,payload:s.payload,viewBox:l,parentViewBox:void 0,fill:void 0})}),[r]);return A.createElement(Q6,{value:e?i:void 0},n)}function xJ(t){var{clipPathId:e,pathRef:n,points:r,strokeDasharray:i,props:s}=t,{type:o,layout:a,connectNulls:l,needClip:c,shape:u}=s,h=pB(s,xHe),m=wc(wc({},$s(h)),{},{fill:"none",className:"recharts-line-curve",clipPath:c?"url(#clipPath-".concat(e,")"):void 0,points:r,type:o,layout:a,connectNulls:l,strokeDasharray:i??s.strokeDasharray});return A.createElement(A.Fragment,null,(r==null?void 0:r.length)>1&&A.createElement(rB,f1({shapeType:"curve",option:u},m,{pathRef:n})),A.createElement(CHe,{points:r,clipPathId:e,props:s}))}function _He(t){try{return t&&t.getTotalLength&&t.getTotalLength()||0}catch{return 0}}function IHe(t){var{clipPathId:e,props:n,pathRef:r,previousPointsRef:i,longestAnimatedLengthRef:s}=t,{points:o,strokeDasharray:a,isAnimationActive:l,animationBegin:c,animationDuration:u,animationEasing:h,animateNewValues:m,width:g,height:y,onAnimationEnd:v,onAnimationStart:b}=n,w=i.current,k=iv(o,"recharts-line-"),N=A.useRef(k),[R,D]=A.useState(!1),O=!R,B=A.useCallback(()=>{typeof v=="function"&&v(),D(!1)},[v]),z=A.useCallback(()=>{typeof b=="function"&&b(),D(!0)},[b]),U=_He(r.current),$=A.useRef(0);N.current!==k&&($.current=s.current,N.current=k);var W=$.current;return A.createElement(PHe,{points:o,showLabels:O},n.children,A.createElement(rv,{animationId:k,begin:c,duration:u,isActive:l,easing:h,onAnimationEnd:B,onAnimationStart:z,key:k},H=>{var F=qn(W,U+W,H),T=Math.min(F,U),_;if(l)if(a){var L="".concat(a).split(/[,\s]+/gim).map(te=>parseFloat(te));_=NHe(T,U,L)}else _=Ade(U,T);else _=a==null?void 0:String(a);if(H>0&&U>0&&(i.current=o,s.current=Math.max(s.current,T)),w){var V=w.length/o.length,K=H===1?o:o.map((te,G)=>{var q=Math.floor(G*V);if(w[q]){var M=w[q];return wc(wc({},te),{},{x:qn(M.x,te.x,H),y:qn(M.y,te.y,H)})}return m?wc(wc({},te),{},{x:qn(g*2,te.x,H),y:qn(y/2,te.y,H)}):wc(wc({},te),{},{x:te.x,y:te.y})});return i.current=K,A.createElement(xJ,{props:n,points:K,clipPathId:e,pathRef:r,strokeDasharray:_})}return A.createElement(xJ,{props:n,points:o,clipPathId:e,pathRef:r,strokeDasharray:_})}),A.createElement(OC,{label:n.label}))}function RHe(t){var{clipPathId:e,props:n}=t,r=A.useRef(null),i=A.useRef(0),s=A.useRef(null);return A.createElement(IHe,{props:n,clipPathId:e,previousPointsRef:r,longestAnimatedLengthRef:i,pathRef:s})}var OHe=(t,e)=>{var n,r;return{x:(n=t.x)!==null&&n!==void 0?n:void 0,y:(r=t.y)!==null&&r!==void 0?r:void 0,value:t.value,errorVal:Wn(t.payload,e)}};class MHe extends A.Component{render(){var{hide:e,dot:n,points:r,className:i,xAxisId:s,yAxisId:o,top:a,left:l,width:c,height:u,id:h,needClip:m,zIndex:g}=this.props;if(e)return null;var y=Rn("recharts-line",i),v=h,{r:b,strokeWidth:w}=Sde(n),k=nB(n),N=b*2+w,R=m?"url(#clipPath-".concat(k?"":"dots-").concat(v,")"):void 0;return A.createElement(ao,{zIndex:g},A.createElement(Jr,{className:y},m&&A.createElement("defs",null,A.createElement(hB,{clipPathId:v,xAxisId:s,yAxisId:o}),!k&&A.createElement("clipPath",{id:"clipPath-dots-".concat(v)},A.createElement("rect",{x:l-N/2,y:a-N/2,width:c+N,height:u+N}))),A.createElement(xde,{xAxisId:s,yAxisId:o,data:r,dataPointFormatter:OHe,errorBarOffset:0},A.createElement(RHe,{props:this.props,clipPathId:v}))),A.createElement(TL,{activeDot:this.props.activeDot,points:r,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:R}))}}var Tde={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:ii.line,type:"linear"};function LHe(t){var e=xi(t,Tde),{activeDot:n,animateNewValues:r,animationBegin:i,animationDuration:s,animationEasing:o,connectNulls:a,dot:l,hide:c,isAnimationActive:u,label:h,legendType:m,xAxisId:g,yAxisId:y,id:v}=e,b=pB(e,vHe),{needClip:w}=FC(g,y),k=UC(),N=kh(),R=qi(),D=Lt($=>QVe($,g,y,R,v));if(N!=="horizontal"&&N!=="vertical"||D==null||k==null)return null;var{height:O,width:B,x:z,y:U}=k;return A.createElement(MHe,f1({},b,{id:v,connectNulls:a,dot:l,activeDot:n,animateNewValues:r,animationBegin:i,animationDuration:s,animationEasing:o,isAnimationActive:u,hide:c,label:h,legendType:m,xAxisId:g,yAxisId:y,points:D,layout:N,height:O,width:B,left:z,top:U,needClip:w}))}function DHe(t){var{layout:e,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:s,dataKey:o,bandSize:a,displayedData:l}=t;return l.map((c,u)=>{var h=Wn(c,o);if(e==="horizontal"){var m=Uk({axis:n,ticks:i,bandSize:a,entry:c,index:u}),g=Sr(h)?null:r.scale(h);return{x:m,y:g,value:h,payload:c}}var y=Sr(h)?null:n.scale(h),v=Uk({axis:r,ticks:s,bandSize:a,entry:c,index:u});return y==null||v==null?null:{x:y,y:v,value:h,payload:c}}).filter(Boolean)}function jHe(t){var e=xi(t,Tde),n=qi();return A.createElement(jC,{id:e.id,type:"line"},r=>A.createElement(A.Fragment,null,A.createElement(aB,{legendPayload:AHe(e)}),A.createElement(THe,{dataKey:e.dataKey,data:e.data,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:r}),A.createElement(lB,{type:"line",id:r,data:e.data,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,hide:e.hide,isPanorama:n}),A.createElement(LHe,f1({},e,{id:r}))))}var DT=A.memo(jHe,EE);DT.displayName="Line";function Wc(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(i=>i.id===e))===null||r===void 0?void 0:r.xAxisId)!==null&&n!==void 0?n:ude}function Yc(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(i=>i.id===e))===null||r===void 0?void 0:r.yAxisId)!==null&&n!==void 0?n:ude}var kde=(t,e,n)=>Hc(t,"xAxis",Wc(t,e),n),Nde=(t,e,n)=>Vc(t,"xAxis",Wc(t,e),n),Cde=(t,e,n)=>Hc(t,"yAxis",Yc(t,e),n),Pde=(t,e,n)=>Vc(t,"yAxis",Yc(t,e),n),BHe=je([Tn,kde,Cde,Nde,Pde],(t,e,n,r,i)=>Kc(t,"xAxis")?gh(e,r,!1):gh(n,i,!1)),UHe=(t,e)=>e,_de=je([mE,UHe],(t,e)=>t.filter(n=>n.type==="area").find(n=>n.id===e)),Ide=t=>{var e=Tn(t),n=Kc(e,"xAxis");return n?"yAxis":"xAxis"},FHe=(t,e)=>{var n=Ide(t);return n==="yAxis"?Yc(t,e):Wc(t,e)},$He=(t,e,n)=>o2(t,Ide(t),FHe(t,e),n),zHe=je([_de,$He],(t,e)=>{var n;if(!(t==null||e==null)){var{stackId:r}=t,i=EC(t);if(!(r==null||i==null)){var s=(n=e[r])===null||n===void 0?void 0:n.stackedData,o=s==null?void 0:s.find(a=>a.key===i);if(o!=null)return o.map(a=>[a[0],a[1]])}}}),VHe=je([Tn,kde,Cde,Nde,Pde,zHe,bce,BHe,_de,EBe],(t,e,n,r,i,s,o,a,l,c)=>{var{chartData:u,dataStartIndex:h,dataEndIndex:m}=o;if(!(l==null||t!=="horizontal"&&t!=="vertical"||e==null||n==null||r==null||i==null||r.length===0||i.length===0||a==null)){var{data:g}=l,y;if(g&&g.length>0?y=g:y=u==null?void 0:u.slice(h,m+1),y!=null)return lqe({layout:t,xAxis:e,yAxis:n,xAxisTicks:r,yAxisTicks:i,dataStartIndex:h,areaSettings:l,stackedData:s,displayedData:y,chartBaseValue:c,bandSize:a})}}),HHe=["id"],qHe=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function mm(){return mm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mm.apply(null,arguments)}function Rde(t,e){if(t==null)return{};var n,r,i=GHe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function GHe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function vJ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Fg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vJ(Object(n),!0).forEach(function(r){KHe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vJ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function KHe(t,e,n){return(e=WHe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WHe(t){var e=YHe(t,"string");return typeof e=="symbol"?e:e+""}function YHe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function m2(t,e){return t&&t!=="none"?t:e}var JHe=t=>{var{dataKey:e,name:n,stroke:r,fill:i,legendType:s,hide:o}=t;return[{inactive:o,dataKey:e,type:s,color:m2(r,i),value:Th(n,e),payload:t}]},XHe=A.memo(t=>{var{dataKey:e,data:n,stroke:r,strokeWidth:i,fill:s,name:o,hide:a,unit:l,tooltipType:c,id:u}=t,h={dataDefinedOnItem:n,positions:void 0,settings:{stroke:r,strokeWidth:i,fill:s,dataKey:e,nameKey:void 0,name:Th(o,e),hide:a,type:c,color:m2(r,s),unit:l,graphicalItemId:u}};return A.createElement(DC,{tooltipEntrySettings:h})});function QHe(t){var{clipPathId:e,points:n,props:r}=t,{needClip:i,dot:s,dataKey:o}=r,a=ro(r);return A.createElement(cde,{points:n,dot:s,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:o,baseProps:a,needClip:i,clipPathId:e})}function ZHe(t){var{showLabels:e,children:n,points:r}=t,i=r.map(s=>{var o,a,l={x:(o=s.x)!==null&&o!==void 0?o:0,y:(a=s.y)!==null&&a!==void 0?a:0,width:0,lowerWidth:0,upperWidth:0,height:0};return Fg(Fg({},l),{},{value:s.value,payload:s.payload,parentViewBox:void 0,viewBox:l,fill:void 0})});return A.createElement(Q6,{value:e?i:void 0},n)}function bJ(t){var{points:e,baseLine:n,needClip:r,clipPathId:i,props:s}=t,{layout:o,type:a,stroke:l,connectNulls:c,isRange:u}=s,{id:h}=s,m=Rde(s,HHe),g=ro(m),y=$s(m);return A.createElement(A.Fragment,null,(e==null?void 0:e.length)>1&&A.createElement(Jr,{clipPath:r?"url(#clipPath-".concat(i,")"):void 0},A.createElement(ly,mm({},y,{id:h,points:e,connectNulls:c,type:a,baseLine:n,layout:o,stroke:"none",className:"recharts-area-area"})),l!=="none"&&A.createElement(ly,mm({},g,{className:"recharts-area-curve",layout:o,type:a,connectNulls:c,fill:"none",points:e})),l!=="none"&&u&&A.createElement(ly,mm({},g,{className:"recharts-area-curve",layout:o,type:a,connectNulls:c,fill:"none",points:n}))),A.createElement(QHe,{points:e,props:m,clipPathId:i}))}function eqe(t){var e,n,{alpha:r,baseLine:i,points:s,strokeWidth:o}=t,a=(e=s[0])===null||e===void 0?void 0:e.y,l=(n=s[s.length-1])===null||n===void 0?void 0:n.y;if(!cr(a)||!cr(l))return null;var c=r*Math.abs(a-l),u=Math.max(...s.map(h=>h.x||0));return kt(i)?u=Math.max(i,u):i&&Array.isArray(i)&&i.length&&(u=Math.max(...i.map(h=>h.x||0),u)),kt(u)?A.createElement("rect",{x:0,y:a<l?a:a-c,width:u+(o?parseInt("".concat(o),10):1),height:Math.floor(c)}):null}function tqe(t){var e,n,{alpha:r,baseLine:i,points:s,strokeWidth:o}=t,a=(e=s[0])===null||e===void 0?void 0:e.x,l=(n=s[s.length-1])===null||n===void 0?void 0:n.x;if(!cr(a)||!cr(l))return null;var c=r*Math.abs(a-l),u=Math.max(...s.map(h=>h.y||0));return kt(i)?u=Math.max(i,u):i&&Array.isArray(i)&&i.length&&(u=Math.max(...i.map(h=>h.y||0),u)),kt(u)?A.createElement("rect",{x:a<l?a:a-c,y:0,width:c,height:Math.floor(u+(o?parseInt("".concat(o),10):1))}):null}function nqe(t){var{alpha:e,layout:n,points:r,baseLine:i,strokeWidth:s}=t;return n==="vertical"?A.createElement(eqe,{alpha:e,points:r,baseLine:i,strokeWidth:s}):A.createElement(tqe,{alpha:e,points:r,baseLine:i,strokeWidth:s})}function rqe(t){var{needClip:e,clipPathId:n,props:r,previousPointsRef:i,previousBaselineRef:s}=t,{points:o,baseLine:a,isAnimationActive:l,animationBegin:c,animationDuration:u,animationEasing:h,onAnimationStart:m,onAnimationEnd:g}=r,y=A.useMemo(()=>({points:o,baseLine:a}),[o,a]),v=iv(y,"recharts-area-"),b=ZLe(),[w,k]=A.useState(!1),N=!w,R=A.useCallback(()=>{typeof g=="function"&&g(),k(!1)},[g]),D=A.useCallback(()=>{typeof m=="function"&&m(),k(!0)},[m]);if(b==null)return null;var O=i.current,B=s.current;return A.createElement(ZHe,{showLabels:N,points:o},r.children,A.createElement(rv,{animationId:v,begin:c,duration:u,isActive:l,easing:h,onAnimationEnd:R,onAnimationStart:D,key:v},z=>{if(O){var U=O.length/o.length,$=z===1?o:o.map((H,F)=>{var T=Math.floor(F*U);if(O[T]){var _=O[T];return Fg(Fg({},H),{},{x:qn(_.x,H.x,z),y:qn(_.y,H.y,z)})}return H}),W;return kt(a)?W=qn(B,a,z):Sr(a)||Za(a)?W=qn(B,0,z):W=a.map((H,F)=>{var T=Math.floor(F*U);if(Array.isArray(B)&&B[T]){var _=B[T];return Fg(Fg({},H),{},{x:qn(_.x,H.x,z),y:qn(_.y,H.y,z)})}return H}),z>0&&(i.current=$,s.current=W),A.createElement(bJ,{points:$,baseLine:W,needClip:e,clipPathId:n,props:r})}return z>0&&(i.current=o,s.current=a),A.createElement(Jr,null,l&&A.createElement("defs",null,A.createElement("clipPath",{id:"animationClipPath-".concat(n)},A.createElement(nqe,{alpha:z,points:o,baseLine:a,layout:b,strokeWidth:r.strokeWidth}))),A.createElement(Jr,{clipPath:"url(#animationClipPath-".concat(n,")")},A.createElement(bJ,{points:o,baseLine:a,needClip:e,clipPathId:n,props:r})))}),A.createElement(OC,{label:r.label}))}function iqe(t){var{needClip:e,clipPathId:n,props:r}=t,i=A.useRef(null),s=A.useRef();return A.createElement(rqe,{needClip:e,clipPathId:n,props:r,previousPointsRef:i,previousBaselineRef:s})}class sqe extends A.PureComponent{render(){var{hide:e,dot:n,points:r,className:i,top:s,left:o,needClip:a,xAxisId:l,yAxisId:c,width:u,height:h,id:m,baseLine:g,zIndex:y}=this.props;if(e)return null;var v=Rn("recharts-area",i),b=m,{r:w,strokeWidth:k}=Sde(n),N=nB(n),R=w*2+k,D=a?"url(#clipPath-".concat(N?"":"dots-").concat(b,")"):void 0;return A.createElement(ao,{zIndex:y},A.createElement(Jr,{className:v},a&&A.createElement("defs",null,A.createElement(hB,{clipPathId:b,xAxisId:l,yAxisId:c}),!N&&A.createElement("clipPath",{id:"clipPath-dots-".concat(b)},A.createElement("rect",{x:o-R/2,y:s-R/2,width:u+R,height:h+R}))),A.createElement(iqe,{needClip:a,clipPathId:b,props:this.props})),A.createElement(TL,{points:r,mainColor:m2(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:D}),this.props.isRange&&Array.isArray(g)&&A.createElement(TL,{points:g,mainColor:m2(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:D}))}}var Ode={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:"auto",legendType:"line",stroke:"#3182bd",strokeWidth:1,type:"linear",label:!1,xAxisId:0,yAxisId:0,zIndex:ii.area};function oqe(t){var e,n=xi(t,Ode),{activeDot:r,animationBegin:i,animationDuration:s,animationEasing:o,connectNulls:a,dot:l,fill:c,fillOpacity:u,hide:h,isAnimationActive:m,legendType:g,stroke:y,xAxisId:v,yAxisId:b}=n,w=Rde(n,qHe),k=kh(),N=Due(),{needClip:R}=FC(v,b),D=qi(),{points:O,isRange:B,baseLine:z}=(e=Lt(T=>VHe(T,t.id,D)))!==null&&e!==void 0?e:{},U=UC();if(k!=="horizontal"&&k!=="vertical"||U==null||N!=="AreaChart"&&N!=="ComposedChart")return null;var{height:$,width:W,x:H,y:F}=U;return!O||!O.length?null:A.createElement(sqe,mm({},w,{activeDot:r,animationBegin:i,animationDuration:s,animationEasing:o,baseLine:z,connectNulls:a,dot:l,fill:c,fillOpacity:u,height:$,hide:h,layout:k,isAnimationActive:m==="auto"?!aE.isSsr:m,isRange:B,legendType:g,needClip:R,points:O,stroke:y,width:W,left:H,top:F,xAxisId:v,yAxisId:b}))}var aqe=(t,e,n,r,i)=>{var s=n??e;if(kt(s))return s;var o=t==="horizontal"?i:r,a=o.scale.domain();if(o.type==="number"){var l=Math.max(a[0],a[1]),c=Math.min(a[0],a[1]);return s==="dataMin"?c:s==="dataMax"||l<0?l:Math.max(Math.min(a[0],a[1]),0)}return s==="dataMin"?a[0]:s==="dataMax"?a[1]:a[0]};function lqe(t){var{areaSettings:{connectNulls:e,baseValue:n,dataKey:r},stackedData:i,layout:s,chartBaseValue:o,xAxis:a,yAxis:l,displayedData:c,dataStartIndex:u,xAxisTicks:h,yAxisTicks:m,bandSize:g}=t,y=i&&i.length,v=aqe(s,o,n,a,l),b=s==="horizontal",w=!1,k=c.map((R,D)=>{var O,B,z;if(y)z=i[u+D];else{var U=Wn(R,r);Array.isArray(U)?(z=U,w=!0):z=[v,U]}var $=(O=(B=z)===null||B===void 0?void 0:B[1])!==null&&O!==void 0?O:null,W=$==null||y&&!e&&Wn(R,r)==null;return b?{x:Uk({axis:a,ticks:h,bandSize:g,entry:R,index:D}),y:W?null:l.scale($),value:z,payload:R}:{x:W?null:a.scale($),y:Uk({axis:l,ticks:m,bandSize:g,entry:R,index:D}),value:z,payload:R}}),N;return y||w?N=k.map(R=>{var D=Array.isArray(R.value)?R.value[0]:null;return b?{x:R.x,y:D!=null&&R.y!=null?l.scale(D):null,payload:R.payload}:{x:D!=null?a.scale(D):null,y:R.y,payload:R.payload}}):N=b?l.scale(v):a.scale(v),{points:k,baseLine:N,isRange:w}}function cqe(t){var e=xi(t,Ode),n=qi();return A.createElement(jC,{id:e.id,type:"area"},r=>A.createElement(A.Fragment,null,A.createElement(aB,{legendPayload:JHe(e)}),A.createElement(XHe,{dataKey:e.dataKey,data:e.data,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:r}),A.createElement(lB,{type:"area",id:r,data:e.data,dataKey:e.dataKey,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,stackId:lle(e.stackId),hide:e.hide,barSize:void 0,baseValue:e.baseValue,isPanorama:n,connectNulls:e.connectNulls}),A.createElement(oqe,mm({},e,{id:r}))))}var $C=A.memo(cqe,EE);$C.displayName="Area";var uqe="Invariant failed";function dqe(t,e){throw new Error(uqe)}function kL(){return kL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kL.apply(null,arguments)}function g2(t){return A.createElement(rB,kL({shapeType:"rectangle",activeClassName:"recharts-active-bar"},t))}var fqe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(kt(e))return e;var s=kt(r)||Sr(r);return s?e(r,i):(s||dqe(),n)}},hqe=(t,e,n)=>n,pqe=(t,e)=>e,SE=je([mE,pqe],(t,e)=>t.filter(n=>n.type==="bar").find(n=>n.id===e)),mqe=je([SE],t=>t==null?void 0:t.maxBarSize),gqe=(t,e,n,r)=>r,yqe=je([Tn,mE,Wc,Yc,hqe],(t,e,n,r,i)=>e.filter(s=>t==="horizontal"?s.xAxisId===n:s.yAxisId===r).filter(s=>s.isPanorama===i).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),xqe=(t,e,n)=>{var r=Tn(t),i=Wc(t,e),s=Yc(t,e);if(!(i==null||s==null))return r==="horizontal"?o2(t,"yAxis",s,n):o2(t,"xAxis",i,n)},vqe=(t,e)=>{var n=Tn(t),r=Wc(t,e),i=Yc(t,e);if(!(r==null||i==null))return n==="horizontal"?nY(t,"xAxis",r):nY(t,"yAxis",i)},bqe=je([yqe,wBe,vqe],jze),wqe=(t,e,n)=>{var r,i,s=SE(t,e);if(s!=null){var o=Wc(t,e),a=Yc(t,e);if(!(o==null||a==null)){var l=Tn(t),c=Lce(t),{maxBarSize:u}=s,h=Sr(u)?c:u,m,g;return l==="horizontal"?(m=Hc(t,"xAxis",o,n),g=Vc(t,"xAxis",o,n)):(m=Hc(t,"yAxis",a,n),g=Vc(t,"yAxis",a,n)),(r=(i=gh(m,g,!0))!==null&&i!==void 0?i:h)!==null&&r!==void 0?r:0}}},Mde=(t,e,n)=>{var r=Tn(t),i=Wc(t,e),s=Yc(t,e);if(!(i==null||s==null)){var o,a;return r==="horizontal"?(o=Hc(t,"xAxis",i,n),a=Vc(t,"xAxis",i,n)):(o=Hc(t,"yAxis",s,n),a=Vc(t,"yAxis",s,n)),gh(o,a)}},Eqe=je([bqe,Lce,bBe,Dce,wqe,Mde,mqe],zze),Sqe=(t,e,n)=>{var r=Wc(t,e);if(r!=null)return Hc(t,"xAxis",r,n)},Aqe=(t,e,n)=>{var r=Yc(t,e);if(r!=null)return Hc(t,"yAxis",r,n)},Tqe=(t,e,n)=>{var r=Wc(t,e);if(r!=null)return Vc(t,"xAxis",r,n)},kqe=(t,e,n)=>{var r=Yc(t,e);if(r!=null)return Vc(t,"yAxis",r,n)},Nqe=je([Eqe,SE],(t,e)=>{if(!(t==null||e==null)){var n=t.find(r=>r.stackId===e.stackId&&e.dataKey!=null&&r.dataKeys.includes(e.dataKey));if(n!=null)return n.position}}),Cqe=je([xqe,SE],Vze),Pqe=je([ki,jj,Sqe,Aqe,Tqe,kqe,Nqe,Tn,bce,Mde,Cqe,SE,gqe],(t,e,n,r,i,s,o,a,l,c,u,h,m)=>{var{chartData:g,dataStartIndex:y,dataEndIndex:v}=l;if(!(h==null||o==null||e==null||a!=="horizontal"&&a!=="vertical"||n==null||r==null||i==null||s==null||c==null)){var{data:b}=h,w;if(b!=null&&b.length>0?w=b:w=g==null?void 0:g.slice(y,v+1),w!=null)return iGe({layout:a,barSettings:h,pos:o,parentViewBox:e,bandSize:c,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:s,stackedData:u,displayedData:w,offset:t,cells:m,dataStartIndex:y})}}),_qe=["index"];function NL(){return NL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},NL.apply(null,arguments)}function Iqe(t,e){if(t==null)return{};var n,r,i=Rqe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Rqe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Lde=A.createContext(void 0),Oqe=t=>{var e=A.useContext(Lde);if(e!=null)return e.stackId;if(t!=null)return lle(t)},Mqe=(t,e)=>"recharts-bar-stack-clip-path-".concat(t,"-").concat(e),Lqe=t=>{var e=A.useContext(Lde);if(e!=null){var{stackId:n}=e;return"url(#".concat(Mqe(n,t),")")}},Dqe=t=>{var{index:e}=t,n=Iqe(t,_qe),r=Lqe(e);return A.createElement(Jr,NL({className:"recharts-bar-stack-layer",clipPath:r},n))},jqe=["onMouseEnter","onMouseLeave","onClick"],Bqe=["value","background","tooltipPosition"],Uqe=["id"],Fqe=["onMouseEnter","onClick","onMouseLeave"];function Sd(){return Sd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Sd.apply(null,arguments)}function wJ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ys(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wJ(Object(n),!0).forEach(function(r){$qe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wJ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $qe(t,e,n){return(e=zqe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zqe(t){var e=Vqe(t,"string");return typeof e=="symbol"?e:e+""}function Vqe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function y2(t,e){if(t==null)return{};var n,r,i=Hqe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Hqe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var qqe=t=>{var{dataKey:e,name:n,fill:r,legendType:i,hide:s}=t;return[{inactive:s,dataKey:e,type:i,color:r,value:Th(n,e),payload:t}]},Gqe=A.memo(t=>{var{dataKey:e,stroke:n,strokeWidth:r,fill:i,name:s,hide:o,unit:a,tooltipType:l,id:c}=t,u={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:e,nameKey:void 0,name:Th(s,e),hide:o,type:l,color:i,unit:a,graphicalItemId:c}};return A.createElement(DC,{tooltipEntrySettings:u})});function Kqe(t){var e=Lt(xh),{data:n,dataKey:r,background:i,allOtherBarProps:s}=t,{onMouseEnter:o,onMouseLeave:a,onClick:l}=s,c=y2(s,jqe),u=iB(o,r,s.id),h=sB(a),m=oB(l,r,s.id);if(!i||n==null)return null;var g=km(i);return A.createElement(ao,{zIndex:Hze(i,ii.barBackground)},n.map((y,v)=>{var{value:b,background:w,tooltipPosition:k}=y,N=y2(y,Bqe);if(!w)return null;var R=u(y,v),D=h(y,v),O=m(y,v),B=Ys(Ys(Ys(Ys(Ys({option:i,isActive:String(v)===e},N),{},{fill:"#eee"},w),g),WN(c,y,v)),{},{onMouseEnter:R,onMouseLeave:D,onClick:O,dataKey:r,index:v,className:"recharts-bar-background-rectangle"});return A.createElement(g2,Sd({key:"background-bar-".concat(v)},B))}))}function Wqe(t){var{showLabels:e,children:n,rects:r}=t,i=r==null?void 0:r.map(s=>{var o={x:s.x,y:s.y,width:s.width,lowerWidth:s.width,upperWidth:s.width,height:s.height};return Ys(Ys({},o),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:o,fill:s.fill})});return A.createElement(Q6,{value:e?i:void 0},n)}function Yqe(t){var{shape:e,activeBar:n,baseProps:r,entry:i,index:s,dataKey:o}=t,a=Lt(xh),l=Lt(q6),c=n&&String(s)===a&&(l==null||o===l),u=c?n:e;return c?A.createElement(ao,{zIndex:ii.activeBar},A.createElement(g2,Sd({},r,{name:String(r.name)},i,{isActive:c,option:u,index:s,dataKey:o}))):A.createElement(g2,Sd({},r,{name:String(r.name)},i,{isActive:c,option:u,index:s,dataKey:o}))}function Jqe(t){var{shape:e,baseProps:n,entry:r,index:i,dataKey:s}=t;return A.createElement(g2,Sd({},n,{name:String(n.name)},r,{isActive:!1,option:e,index:i,dataKey:s}))}function Xqe(t){var e,{data:n,props:r}=t,i=(e=ro(r))!==null&&e!==void 0?e:{},{id:s}=i,o=y2(i,Uqe),{shape:a,dataKey:l,activeBar:c}=r,{onMouseEnter:u,onClick:h,onMouseLeave:m}=r,g=y2(r,Fqe),y=iB(u,l,s),v=sB(m),b=oB(h,l,s);return n?A.createElement(A.Fragment,null,n.map((w,k)=>A.createElement(Dqe,Sd({index:k,key:"rectangle-".concat(w==null?void 0:w.x,"-").concat(w==null?void 0:w.y,"-").concat(w==null?void 0:w.value,"-").concat(k),className:"recharts-bar-rectangle"},WN(g,w,k),{onMouseEnter:y(w,k),onMouseLeave:v(w,k),onClick:b(w,k)}),c?A.createElement(Yqe,{shape:a,activeBar:c,baseProps:o,entry:w,index:k,dataKey:l}):A.createElement(Jqe,{shape:a,baseProps:o,entry:w,index:k,dataKey:l})))):null}function Qqe(t){var{props:e,previousRectanglesRef:n}=t,{data:r,layout:i,isAnimationActive:s,animationBegin:o,animationDuration:a,animationEasing:l,onAnimationEnd:c,onAnimationStart:u}=e,h=n.current,m=iv(e,"recharts-bar-"),[g,y]=A.useState(!1),v=!g,b=A.useCallback(()=>{typeof c=="function"&&c(),y(!1)},[c]),w=A.useCallback(()=>{typeof u=="function"&&u(),y(!0)},[u]);return A.createElement(Wqe,{showLabels:v,rects:r},A.createElement(rv,{animationId:m,begin:o,duration:a,isActive:s,easing:l,onAnimationEnd:b,onAnimationStart:w,key:m},k=>{var N=k===1?r:r==null?void 0:r.map((R,D)=>{var O=h&&h[D];if(O)return Ys(Ys({},R),{},{x:qn(O.x,R.x,k),y:qn(O.y,R.y,k),width:qn(O.width,R.width,k),height:qn(O.height,R.height,k)});if(i==="horizontal"){var B=qn(0,R.height,k),z=qn(R.stackedBarStart,R.y,k);return Ys(Ys({},R),{},{y:z,height:B})}var U=qn(0,R.width,k),$=qn(R.stackedBarStart,R.x,k);return Ys(Ys({},R),{},{width:U,x:$})});return k>0&&(n.current=N??null),N==null?null:A.createElement(Jr,null,A.createElement(Xqe,{props:e,data:N}))}),A.createElement(OC,{label:e.label}),e.children)}function Zqe(t){var e=A.useRef(null);return A.createElement(Qqe,{previousRectanglesRef:e,props:t})}var Dde=0,eGe=(t,e)=>{var n=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:n,errorVal:Wn(t,e)}};class tGe extends A.PureComponent{render(){var{hide:e,data:n,dataKey:r,className:i,xAxisId:s,yAxisId:o,needClip:a,background:l,id:c}=this.props;if(e||n==null)return null;var u=Rn("recharts-bar",i),h=c;return A.createElement(Jr,{className:u,id:c},a&&A.createElement("defs",null,A.createElement(hB,{clipPathId:h,xAxisId:s,yAxisId:o})),A.createElement(Jr,{className:"recharts-bar-rectangles",clipPath:a?"url(#clipPath-".concat(h,")"):void 0},A.createElement(Kqe,{data:n,dataKey:r,background:l,allOtherBarProps:this.props}),A.createElement(Zqe,this.props)))}}var nGe={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:Dde,xAxisId:0,yAxisId:0,zIndex:ii.bar};function rGe(t){var{xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:s,activeBar:o,animationBegin:a,animationDuration:l,animationEasing:c,isAnimationActive:u}=t,{needClip:h}=FC(e,n),m=kh(),g=qi(),y=tB(t.children,pv),v=Lt(k=>Pqe(k,t.id,g,y));if(m!=="vertical"&&m!=="horizontal")return null;var b,w=v==null?void 0:v[0];return w==null||w.height==null||w.width==null?b=0:b=m==="vertical"?w.height/2:w.width/2,A.createElement(xde,{xAxisId:e,yAxisId:n,data:v,dataPointFormatter:eGe,errorBarOffset:b},A.createElement(tGe,Sd({},t,{layout:m,needClip:h,data:v,xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:s,activeBar:o,animationBegin:a,animationDuration:l,animationEasing:c,isAnimationActive:u})))}function iGe(t){var{layout:e,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:s,xAxis:o,yAxis:a,xAxisTicks:l,yAxisTicks:c,stackedData:u,displayedData:h,offset:m,cells:g,parentViewBox:y,dataStartIndex:v}=t,b=e==="horizontal"?a:o,w=u?b.scale.domain():null,k=xLe({numericAxis:b}),N=b.scale(k);return h.map((R,D)=>{var O,B,z,U,$,W;if(u){var H=u[D+v];if(H==null)return null;O=hLe(H,w)}else O=Wn(R,n),Array.isArray(O)||(O=[k,O]);var F=fqe(r,Dde)(O[1],D);if(e==="horizontal"){var T,[_,L]=[a.scale(O[0]),a.scale(O[1])];B=lK({axis:o,ticks:l,bandSize:s,offset:i.offset,entry:R,index:D}),z=(T=L??_)!==null&&T!==void 0?T:void 0,U=i.size;var V=_-L;if($=Za(V)?0:V,W={x:B,y:m.top,width:U,height:m.height},Math.abs(F)>0&&Math.abs($)<Math.abs(F)){var K=zi($||F)*(Math.abs(F)-Math.abs($));z-=K,$+=K}}else{var[te,G]=[o.scale(O[0]),o.scale(O[1])];if(B=te,z=lK({axis:a,ticks:c,bandSize:s,offset:i.offset,entry:R,index:D}),U=G-te,$=i.size,W={x:m.left,y:z,width:m.width,height:$},Math.abs(F)>0&&Math.abs(U)<Math.abs(F)){var q=zi(U||F)*(Math.abs(F)-Math.abs(U));U+=q}}if(B==null||z==null||U==null||$==null)return null;var M=Ys(Ys({},R),{},{stackedBarStart:N,x:B,y:z,width:U,height:$,value:u?O:O[1],payload:R,background:W,tooltipPosition:{x:B+U/2,y:z+$/2},parentViewBox:y},g&&g[D]&&g[D].props);return M}).filter(Boolean)}function sGe(t){var e=xi(t,nGe),n=Oqe(e.stackId),r=qi();return A.createElement(jC,{id:e.id,type:"bar"},i=>A.createElement(A.Fragment,null,A.createElement(aB,{legendPayload:qqe(e)}),A.createElement(Gqe,{dataKey:e.dataKey,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:i}),A.createElement(lB,{type:"bar",id:i,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:n,hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:r}),A.createElement(ao,{zIndex:e.zIndex},A.createElement(rGe,Sd({},e,{id:i})))))}var jde=A.memo(sGe,EE);jde.displayName="Bar";var oGe=["domain","range"],aGe=["domain","range"];function EJ(t,e){if(t==null)return{};var n,r,i=lGe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function lGe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function SJ(t,e){return t===e?!0:Array.isArray(t)&&t.length===2&&Array.isArray(e)&&e.length===2?t[0]===e[0]&&t[1]===e[1]:!1}function Bde(t,e){if(t===e)return!0;var{domain:n,range:r}=t,i=EJ(t,oGe),{domain:s,range:o}=e,a=EJ(e,aGe);return!SJ(n,s)||!SJ(r,o)?!1:EE(i,a)}var cGe=["dangerouslySetInnerHTML","ticks","scale"],uGe=["id","scale"];function CL(){return CL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},CL.apply(null,arguments)}function AJ(t,e){if(t==null)return{};var n,r,i=dGe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function dGe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function fGe(t){var e=_r(),n=A.useRef(null);return A.useLayoutEffect(()=>{n.current===null?e(Eze(t)):n.current!==t&&e(Sze({prev:n.current,next:t})),n.current=t},[t,e]),A.useLayoutEffect(()=>()=>{n.current&&(e(Aze(n.current)),n.current=null)},[e]),null}var hGe=t=>{var{xAxisId:e,className:n}=t,r=Lt(jj),i=qi(),s="xAxis",o=Lt(w=>pue(w,s,e,i)),a=Lt(w=>uue(w,e)),l=Lt(w=>v7e(w,e)),c=Lt(w=>qce(w,e));if(a==null||l==null||c==null)return null;var{dangerouslySetInnerHTML:u,ticks:h,scale:m}=t,g=AJ(t,cGe),{id:y,scale:v}=c,b=AJ(c,uGe);return A.createElement(fB,CL({},g,b,{x:l.x,y:l.y,width:a.width,height:a.height,className:Rn("recharts-".concat(s," ").concat(s),n),viewBox:r,ticks:o,axisType:s}))},pGe={allowDataOverflow:Ri.allowDataOverflow,allowDecimals:Ri.allowDecimals,allowDuplicatedCategory:Ri.allowDuplicatedCategory,angle:Ri.angle,axisLine:id.axisLine,height:Ri.height,hide:!1,includeHidden:Ri.includeHidden,interval:Ri.interval,minTickGap:Ri.minTickGap,mirror:Ri.mirror,orientation:Ri.orientation,padding:Ri.padding,reversed:Ri.reversed,scale:Ri.scale,tick:Ri.tick,tickCount:Ri.tickCount,tickLine:id.tickLine,tickSize:id.tickSize,type:Ri.type,xAxisId:0},mGe=t=>{var e=xi(t,pGe);return A.createElement(A.Fragment,null,A.createElement(fGe,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),A.createElement(hGe,e))},h1=A.memo(mGe,Bde);h1.displayName="XAxis";var gGe=["dangerouslySetInnerHTML","ticks","scale"],yGe=["id","scale"];function PL(){return PL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},PL.apply(null,arguments)}function TJ(t,e){if(t==null)return{};var n,r,i=xGe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function xGe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function vGe(t){var e=_r(),n=A.useRef(null);return A.useLayoutEffect(()=>{n.current===null?e(Tze(t)):n.current!==t&&e(kze({prev:n.current,next:t})),n.current=t},[t,e]),A.useLayoutEffect(()=>()=>{n.current&&(e(Nze(n.current)),n.current=null)},[e]),null}var bGe=t=>{var{yAxisId:e,className:n,width:r,label:i}=t,s=A.useRef(null),o=A.useRef(null),a=Lt(jj),l=qi(),c=_r(),u="yAxis",h=Lt(O=>due(O,e)),m=Lt(O=>w7e(O,e)),g=Lt(O=>pue(O,u,e,l)),y=Lt(O=>Gce(O,e));if(A.useLayoutEffect(()=>{if(!(r!=="auto"||!h||X6(i)||A.isValidElement(i)||y==null)){var O=s.current;if(O){var B=O.getCalculatedWidth();Math.round(h.width)!==Math.round(B)&&c(Cze({id:e,width:B}))}}},[g,h,c,i,e,r,y]),h==null||m==null||y==null)return null;var{dangerouslySetInnerHTML:v,ticks:b,scale:w}=t,k=TJ(t,gGe),{id:N,scale:R}=y,D=TJ(y,yGe);return A.createElement(fB,PL({},k,D,{ref:s,labelRef:o,x:m.x,y:m.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:h.width,height:h.height,className:Rn("recharts-".concat(u," ").concat(u),n),viewBox:a,ticks:g,axisType:u}))},wGe={allowDataOverflow:Oi.allowDataOverflow,allowDecimals:Oi.allowDecimals,allowDuplicatedCategory:Oi.allowDuplicatedCategory,angle:Oi.angle,axisLine:id.axisLine,hide:!1,includeHidden:Oi.includeHidden,interval:Oi.interval,minTickGap:Oi.minTickGap,mirror:Oi.mirror,orientation:Oi.orientation,padding:Oi.padding,reversed:Oi.reversed,scale:Oi.scale,tick:Oi.tick,tickCount:Oi.tickCount,tickLine:id.tickLine,tickSize:id.tickSize,type:Oi.type,width:Oi.width,yAxisId:0},EGe=t=>{var e=xi(t,wGe);return A.createElement(A.Fragment,null,A.createElement(vGe,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),A.createElement(bGe,e))},p1=A.memo(EGe,Bde);p1.displayName="YAxis";var SGe=(t,e)=>e,mB=je([SGe,Tn,Vce,Ci,_ue,Ld,DUe,ki],VUe),gB=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,r=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/r)}},Ude=el("mouseClick"),Fde=iE();Fde.startListening({actionCreator:Ude,effect:(t,e)=>{var n=t.payload,r=mB(e.getState(),gB(n));(r==null?void 0:r.activeIndex)!=null&&e.dispatch(L7e({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var _L=el("mouseMove"),$de=iE(),jA=null;$de.startListening({actionCreator:_L,effect:(t,e)=>{var n=t.payload;jA!==null&&cancelAnimationFrame(jA);var r=gB(n);jA=requestAnimationFrame(()=>{var i=e.getState(),s=U6(i,i.tooltip.settings.shared);if(s==="axis"){var o=mB(i,r);(o==null?void 0:o.activeIndex)!=null?e.dispatch(Eue({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate})):e.dispatch(wue())}jA=null})}});function AGe(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":t==="children"&&typeof e=="object"&&e!==null?"<<CHILDREN>>":e}var kJ={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},zde=Co({name:"rootProps",initialState:kJ,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:kJ.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue,t.reverseStackOrder=e.payload.reverseStackOrder}}}),TGe=zde.reducer,{updateOptions:kGe}=zde.actions,Vde=Co({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:NGe}=Vde.actions,CGe=Vde.reducer,Hde=el("keyDown"),qde=el("focus"),yB=iE();yB.startListening({actionCreator:Hde,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,s=t.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var o=F6(i,hv(n),yE(n),bE(n)),a=o==null?-1:Number(o);if(!(!Number.isFinite(a)||a<0)){var l=Ld(n);if(s==="Enter"){var c=l2(n,"axis","hover",String(i.index));e.dispatch(vL({active:!i.active,activeIndex:i.index,activeCoordinate:c}));return}var u=T7e(n),h=u==="left-to-right"?1:-1,m=s==="ArrowRight"?1:-1,g=a+m*h;if(!(l==null||g>=l.length||g<0)){var y=l2(n,"axis","hover",String(g));e.dispatch(vL({active:!0,activeIndex:g.toString(),activeCoordinate:y}))}}}}}});yB.startListening({actionCreator:qde,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var s="0",o=l2(n,"axis","hover",String(s));e.dispatch(vL({active:!0,activeIndex:s,activeCoordinate:o}))}}}});var _a=el("externalEvent"),Gde=iE(),HO=new Map;Gde.startListening({actionCreator:_a,effect:(t,e)=>{var{handler:n,reactEvent:r}=t.payload;if(n!=null){r.persist();var i=r.type,s=HO.get(i);s!==void 0&&cancelAnimationFrame(s);var o=requestAnimationFrame(()=>{try{var a=e.getState(),l={activeCoordinate:wUe(a),activeDataKey:q6(a),activeIndex:xh(a),activeLabel:Oue(a),activeTooltipIndex:xh(a),isTooltipActive:EUe(a)};n(l,r)}finally{HO.delete(i)}});HO.set(i,o)}}});var PGe=je([dv],t=>t.tooltipItemPayloads),_Ge=je([PGe,vE,(t,e)=>e,(t,e,n)=>n],(t,e,n,r)=>{var i=t.find(a=>a.settings.graphicalItemId===r);if(i!=null){var{positions:s}=i;if(s!=null){var o=e(s,n);return o}}}),Kde=el("touchMove"),Wde=iE();Wde.startListening({actionCreator:Kde,effect:(t,e)=>{var n=t.payload;if(!(n.touches==null||n.touches.length===0)){var r=e.getState(),i=U6(r,r.tooltip.settings.shared);if(i==="axis"){var s=n.touches[0];if(s==null)return;var o=mB(r,gB({clientX:s.clientX,clientY:s.clientY,currentTarget:n.currentTarget}));(o==null?void 0:o.activeIndex)!=null&&e.dispatch(Eue({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate}))}else if(i==="item"){var a,l=n.touches[0];if(document.elementFromPoint==null||l==null)return;var c=document.elementFromPoint(l.clientX,l.clientY);if(!c||!c.getAttribute)return;var u=c.getAttribute(ule),h=(a=c.getAttribute(dle))!==null&&a!==void 0?a:void 0,m=fv(r).find(v=>v.id===h);if(u==null||m==null||h==null)return;var{dataKey:g}=m,y=_Ge(r,u,h);e.dispatch(bue({activeDataKey:g,activeIndex:u,activeCoordinate:y,activeGraphicalItemId:h}))}}}});var IGe=Iae({brush:qze,cartesianAxis:Pze,chartData:vFe,errorBars:zVe,graphicalItems:D$e,layout:aLe,legend:hDe,options:pFe,polarAxis:J9e,polarOptions:CGe,referenceElements:Qze,rootProps:TGe,tooltip:D7e,zIndex:rFe}),RGe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return RMe({reducer:IGe,preloadedState:e,middleware:r=>{var i;return r({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((i="es6")!==null&&i!==void 0?i:"")}).concat([Fde.middleware,$de.middleware,yB.middleware,Gde.middleware,Wde.middleware])},enhancers:r=>{var i=r;return typeof r=="function"&&(i=r()),i.concat(Gae({type:"raf"}))},devTools:{serialize:{replacer:AGe},name:"recharts-".concat(n)}})};function Yde(t){var{preloadedState:e,children:n,reduxStoreName:r}=t,i=qi(),s=A.useRef(null);if(i)return n;s.current==null&&(s.current=RGe(e,r));var o=Cj;return A.createElement(pHe,{context:o,store:s.current},n)}function OGe(t){var{layout:e,margin:n}=t,r=_r(),i=qi();return A.useEffect(()=>{i||(r(iLe(e)),r(rLe(n)))},[r,i,e,n]),null}var Jde=A.memo(OGe,EE);function Xde(t){var e=_r();return A.useEffect(()=>{e(kGe(t))},[e,t]),null}function NJ(t){var{zIndex:e,isPanorama:n}=t,r=A.useRef(null),i=_r();return A.useLayoutEffect(()=>(r.current&&i(tFe({zIndex:e,element:r.current,isPanorama:n})),()=>{i(nFe({zIndex:e,isPanorama:n}))}),[i,e,n]),A.createElement("g",{tabIndex:-1,ref:r})}function CJ(t){var{children:e,isPanorama:n}=t,r=Lt(qUe);if(!r||r.length===0)return e;var i=r.filter(o=>o<0),s=r.filter(o=>o>0);return A.createElement(A.Fragment,null,i.map(o=>A.createElement(NJ,{key:o,zIndex:o,isPanorama:n})),e,s.map(o=>A.createElement(NJ,{key:o,zIndex:o,isPanorama:n})))}var MGe=["children"];function LGe(t,e){if(t==null)return{};var n,r,i=DGe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function DGe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function x2(){return x2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},x2.apply(null,arguments)}var jGe={width:"100%",height:"100%",display:"block"},BGe=A.forwardRef((t,e)=>{var n=yle(),r=xle(),i=Ple();if(!$c(n)||!$c(r))return null;var{children:s,otherAttributes:o,title:a,desc:l}=t,c,u;return o!=null&&(typeof o.tabIndex=="number"?c=o.tabIndex:c=i?0:void 0,typeof o.role=="string"?u=o.role:u=i?"application":void 0),A.createElement(Woe,x2({},o,{title:a,desc:l,role:u,tabIndex:c,width:n,height:r,style:jGe,ref:e}),s)}),UGe=t=>{var{children:e}=t,n=Lt(aC);if(!n)return null;var{width:r,height:i,y:s,x:o}=n;return A.createElement(Woe,{width:r,height:i,x:o,y:s},e)},PJ=A.forwardRef((t,e)=>{var{children:n}=t,r=LGe(t,MGe),i=qi();return i?A.createElement(UGe,null,A.createElement(CJ,{isPanorama:!0},n)):A.createElement(BGe,x2({ref:e},r),A.createElement(CJ,{isPanorama:!1},n))});function FGe(){var t=_r(),[e,n]=A.useState(null),r=Lt(ALe);return A.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),s=i.width/e.offsetWidth;cr(s)&&s!==r&&t(oLe(s))}},[e,t,r]),n}function _J(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $Ge(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_J(Object(n),!0).forEach(function(r){zGe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_J(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zGe(t,e,n){return(e=VGe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function VGe(t){var e=HGe(t,"string");return typeof e=="symbol"?e:e+""}function HGe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Mm(){return Mm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mm.apply(null,arguments)}var qGe=()=>(CFe(),null);function v2(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var GGe=A.forwardRef((t,e)=>{var n,r,i=A.useRef(null),[s,o]=A.useState({containerWidth:v2((n=t.style)===null||n===void 0?void 0:n.width),containerHeight:v2((r=t.style)===null||r===void 0?void 0:r.height)}),a=A.useCallback((c,u)=>{o(h=>{var m=Math.round(c),g=Math.round(u);return h.containerWidth===m&&h.containerHeight===g?h:{containerWidth:m,containerHeight:g}})},[]),l=A.useCallback(c=>{if(typeof e=="function"&&e(c),c!=null&&typeof ResizeObserver<"u"){var{width:u,height:h}=c.getBoundingClientRect();a(u,h);var m=y=>{var{width:v,height:b}=y[0].contentRect;a(v,b)},g=new ResizeObserver(m);g.observe(c),i.current=g}},[e,a]);return A.useEffect(()=>()=>{var c=i.current;c!=null&&c.disconnect()},[a]),A.createElement(A.Fragment,null,A.createElement(cC,{width:s.containerWidth,height:s.containerHeight}),A.createElement("div",Mm({ref:l},t)))}),KGe=A.forwardRef((t,e)=>{var{width:n,height:r}=t,[i,s]=A.useState({containerWidth:v2(n),containerHeight:v2(r)}),o=A.useCallback((l,c)=>{s(u=>{var h=Math.round(l),m=Math.round(c);return u.containerWidth===h&&u.containerHeight===m?u:{containerWidth:h,containerHeight:m}})},[]),a=A.useCallback(l=>{if(typeof e=="function"&&e(l),l!=null){var{width:c,height:u}=l.getBoundingClientRect();o(c,u)}},[e,o]);return A.createElement(A.Fragment,null,A.createElement(cC,{width:i.containerWidth,height:i.containerHeight}),A.createElement("div",Mm({ref:a},t)))}),WGe=A.forwardRef((t,e)=>{var{width:n,height:r}=t;return A.createElement(A.Fragment,null,A.createElement(cC,{width:n,height:r}),A.createElement("div",Mm({ref:e},t)))}),YGe=A.forwardRef((t,e)=>{var{width:n,height:r}=t;return yd(n)||yd(r)?A.createElement(KGe,Mm({},t,{ref:e})):A.createElement(WGe,Mm({},t,{ref:e}))});function JGe(t){return t===!0?GGe:YGe}var XGe=A.forwardRef((t,e)=>{var{children:n,className:r,height:i,onClick:s,onContextMenu:o,onDoubleClick:a,onMouseDown:l,onMouseEnter:c,onMouseLeave:u,onMouseMove:h,onMouseUp:m,onTouchEnd:g,onTouchMove:y,onTouchStart:v,style:b,width:w,responsive:k,dispatchTouchEvents:N=!0}=t,R=A.useRef(null),D=_r(),[O,B]=A.useState(null),[z,U]=A.useState(null),$=FGe(),W=Bj(),H=(W==null?void 0:W.width)>0?W.width:w,F=(W==null?void 0:W.height)>0?W.height:i,T=A.useCallback(ce=>{$(ce),typeof e=="function"&&e(ce),B(ce),U(ce),ce!=null&&(R.current=ce)},[$,e,B,U]),_=A.useCallback(ce=>{D(Ude(ce)),D(_a({handler:s,reactEvent:ce}))},[D,s]),L=A.useCallback(ce=>{D(_L(ce)),D(_a({handler:c,reactEvent:ce}))},[D,c]),V=A.useCallback(ce=>{D(wue()),D(_a({handler:u,reactEvent:ce}))},[D,u]),K=A.useCallback(ce=>{D(_L(ce)),D(_a({handler:h,reactEvent:ce}))},[D,h]),te=A.useCallback(()=>{D(qde())},[D]),G=A.useCallback(ce=>{D(Hde(ce.key))},[D]),q=A.useCallback(ce=>{D(_a({handler:o,reactEvent:ce}))},[D,o]),M=A.useCallback(ce=>{D(_a({handler:a,reactEvent:ce}))},[D,a]),P=A.useCallback(ce=>{D(_a({handler:l,reactEvent:ce}))},[D,l]),Y=A.useCallback(ce=>{D(_a({handler:m,reactEvent:ce}))},[D,m]),X=A.useCallback(ce=>{D(_a({handler:v,reactEvent:ce}))},[D,v]),se=A.useCallback(ce=>{N&&D(Kde(ce)),D(_a({handler:y,reactEvent:ce}))},[D,N,y]),oe=A.useCallback(ce=>{D(_a({handler:g,reactEvent:ce}))},[D,g]),me=JGe(k);return A.createElement($ue.Provider,{value:O},A.createElement(f4e.Provider,{value:z},A.createElement(me,{width:H??(b==null?void 0:b.width),height:F??(b==null?void 0:b.height),className:Rn("recharts-wrapper",r),style:$Ge({position:"relative",cursor:"default",width:H,height:F},b),onClick:_,onContextMenu:q,onDoubleClick:M,onFocus:te,onKeyDown:G,onMouseDown:P,onMouseEnter:L,onMouseLeave:V,onMouseMove:K,onMouseUp:Y,onTouchEnd:oe,onTouchMove:se,onTouchStart:X,ref:T},A.createElement(qGe,null),n)))}),QGe=["width","height","responsive","children","className","style","compact","title","desc"];function ZGe(t,e){if(t==null)return{};var n,r,i=eKe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function eKe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Qde=A.forwardRef((t,e)=>{var{width:n,height:r,responsive:i,children:s,className:o,style:a,compact:l,title:c,desc:u}=t,h=ZGe(t,QGe),m=ro(h);return l?A.createElement(A.Fragment,null,A.createElement(cC,{width:n,height:r}),A.createElement(PJ,{otherAttributes:m,title:c,desc:u},s)):A.createElement(XGe,{className:o,style:a,width:n,height:r,responsive:i??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},A.createElement(PJ,{otherAttributes:m,title:c,desc:u,ref:e},A.createElement(eVe,null,s)))});function IL(){return IL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},IL.apply(null,arguments)}var tKe={top:5,right:5,bottom:5,left:5},nKe={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:tKe,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},xB=A.forwardRef(function(e,n){var r,i=xi(e.categoricalChartProps,nKe),{chartName:s,defaultTooltipEventType:o,validateTooltipEventTypes:a,tooltipPayloadSearcher:l,categoricalChartProps:c}=e,u={chartName:s,defaultTooltipEventType:o,validateTooltipEventTypes:a,tooltipPayloadSearcher:l,eventEmitter:void 0};return A.createElement(Yde,{preloadedState:{options:u},reduxStoreName:(r=c.id)!==null&&r!==void 0?r:s},A.createElement(fde,{chartData:c.data}),A.createElement(Jde,{layout:i.layout,margin:i.margin}),A.createElement(Xde,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),A.createElement(Qde,IL({},i,{ref:n})))}),rKe=["axis","item"],iKe=A.forwardRef((t,e)=>A.createElement(xB,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:rKe,tooltipPayloadSearcher:IC,categoricalChartProps:t,ref:e}));function sKe(t){var e=_r();return A.useEffect(()=>{e(NGe(t))},[e,t]),null}var oKe=["layout"];function RL(){return RL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},RL.apply(null,arguments)}function aKe(t,e){if(t==null)return{};var n,r,i=lKe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function lKe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var cKe={top:5,right:5,bottom:5,left:5},Zde={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:cKe,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},uKe=A.forwardRef(function(e,n){var r,i=xi(e.categoricalChartProps,Zde),{layout:s}=i,o=aKe(i,oKe),{chartName:a,defaultTooltipEventType:l,validateTooltipEventTypes:c,tooltipPayloadSearcher:u}=e,h={chartName:a,defaultTooltipEventType:l,validateTooltipEventTypes:c,tooltipPayloadSearcher:u,eventEmitter:void 0};return A.createElement(Yde,{preloadedState:{options:h},reduxStoreName:(r=i.id)!==null&&r!==void 0?r:a},A.createElement(fde,{chartData:i.data}),A.createElement(Jde,{layout:s,margin:i.margin}),A.createElement(Xde,{baseValue:void 0,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),A.createElement(sKe,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),A.createElement(Qde,RL({},o,{ref:n})))});function IJ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function RJ(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IJ(Object(n),!0).forEach(function(r){dKe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IJ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function dKe(t,e,n){return(e=fKe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fKe(t){var e=hKe(t,"string");return typeof e=="symbol"?e:e+""}function hKe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var pKe=["item"],mKe=RJ(RJ({},Zde),{},{layout:"centric",startAngle:0,endAngle:360}),efe=A.forwardRef((t,e)=>{var n=xi(t,mKe);return A.createElement(uKe,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:pKe,tooltipPayloadSearcher:IC,categoricalChartProps:n,ref:e})}),gKe=["axis"],tfe=A.forwardRef((t,e)=>A.createElement(xB,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:gKe,tooltipPayloadSearcher:IC,categoricalChartProps:t,ref:e})),yKe=["axis"],xKe=A.forwardRef((t,e)=>A.createElement(xB,{chartName:"ComposedChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:yKe,tooltipPayloadSearcher:IC,categoricalChartProps:t,ref:e}));const vB="https://api.devnet.solana.com",vKe="HWy1jotHpo6UqeQxx49dpYYdQB8wj9Qk9MdxwjLvDHB8",sh=[{symbol:"SOL",name:"Solana",mint:"So11111111111111111111111111111111111111112",decimals:9,logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png"},{symbol:"USDC",name:"USD Coin (Devnet)",mint:"4zMMC9srt5Ri5X14GAgXhaHii3GnPAEERYPJgZJDncDU",decimals:6,logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v/logo.png"},{symbol:"RAY",name:"Raydium",mint:"4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R",decimals:6,logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R/logo.png"}],kc={SOL:145.5,USDC:1,RAY:1.85},bKe="https://dlmm-api.meteora.ag",OJ=({network:t})=>{const e={solana:"bg-[#9b87f5]/15 text-[#9b87f5] border-[#9b87f5]/30",hyperliquid:"bg-[#34d399]/15 text-[#34d399] border-[#34d399]/30",polymarket:"bg-[#60a5fa]/15 text-[#60a5fa] border-[#60a5fa]/30"},n={solana:"SOL",hyperliquid:"HL",polymarket:"PM"};return d.jsx("span",{className:`px-1.5 py-0.5 text-[10px] font-semibold rounded uppercase tracking-[0.05em] border ${e[t]}`,children:n[t]})},wKe=({vault:t,connectOwnerWallet:e,disconnectOwnerWallet:n,connectHLOwnerWallet:r,disconnectHLOwnerWallet:i,connectPMOwnerWallet:s,disconnectPMOwnerWallet:o,assetPrices:a,portfolioHistoryDaily:l,portfolioHistoryLongTerm:c,scheduledTasks:u,assetAllocationData:h,activityFeed:m,activityDisplayCount:g,setActivityDisplayCount:y,setActiveTab:v,refreshData:b,onNewChat:w})=>{const[k,N]=A.useState("all"),[R,D]=A.useState(0),O=2,[B,z]=A.useState("1D"),U=c.length,$=A.useMemo(()=>({"1D":l.length>0||U>=1,"1W":U>=7,"1M":U>=30,"1Y":U>=365}),[U,l.length]),W=A.useMemo(()=>{if(B==="1D")return l;if(c.length===0)return[];const se={"1D":1,"1W":7,"1M":30,"1Y":365}[B]||30;return c.slice(-se)},[l,c,B]),[H,F]=A.useState(0),T=2,[_,L]=A.useState(null),[V,K]=A.useState("pie"),[te,G]=A.useState(null),[q,M]=A.useState(void 0),P=async X=>{try{await navigator.clipboard.writeText(X),L(X),setTimeout(()=>L(null),2e3)}catch(se){console.error("Failed to copy:",se)}},Y=X=>X.network==="solana"&&X.signature?`https://solscan.io/tx/${X.signature}?cluster=devnet`:X.network==="hyperliquid"&&X.signature?`https://app.hyperliquid-testnet.xyz/explorer/tx/${X.signature.replace("hl-","")}`:null;return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 2xl:grid-cols-4 gap-4 lg:gap-6",children:[d.jsxs("div",{className:"flex flex-col gap-4 lg:gap-6",children:[d.jsxs("div",{className:"glass-panel p-5 rounded relative overflow-hidden flex-1 flex flex-col justify-center group",children:[d.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 group-hover:opacity-10 transition-opacity",children:d.jsx(fh,{size:48,className:"text-white"})}),d.jsx("h3",{className:"text-[10px] uppercase tracking-[0.1em] text-[#747580] font-semibold mb-2",children:"Total Net Worth"}),d.jsxs("div",{className:"text-2xl lg:text-3xl font-semibold text-white tracking-tight",children:["$",h.totalValue.toFixed(2)]}),d.jsx("div",{className:"text-[11px] text-[#747580] mt-1",children:"Cross-Chain Unified Portfolio"})]}),d.jsxs("button",{onClick:w,className:"glass-panel p-5 rounded relative overflow-hidden flex-1 flex flex-col justify-center items-start text-left hover:bg-[#1a1b21] transition-colors group border border-dashed border-[#232328] hover:border-[#E7FE55]/50",children:[d.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 group-hover:opacity-10 transition-opacity text-[#E7FE55]",children:d.jsx(Cl,{size:48})}),d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsx("div",{className:"p-1.5 rounded bg-[#E7FE55]/15 text-[#E7FE55] group-hover:bg-[#E7FE55] group-hover:text-black transition-colors",children:d.jsx(Cl,{size:16})}),d.jsx("h3",{className:"text-[#E7FE55] font-medium text-sm",children:"New Conversation"})]}),d.jsx("div",{className:"text-[11px] text-[#747580]",children:"Start a new task or query"})]})]}),d.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col",children:[d.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5",children:d.jsx(to,{size:48,className:"text-white"})}),d.jsx("div",{className:"flex items-center gap-2 mb-2",children:d.jsx("h3",{className:"text-[10px] uppercase tracking-[0.1em] text-[#747580] font-semibold",children:"Solana Vault"})}),d.jsxs("div",{className:"text-xl lg:text-2xl font-semibold text-white tracking-tight",children:[t.solBalance.toFixed(4)," SOL"]}),d.jsxs("div",{className:"text-[11px] text-[#E7FE55] mt-1",children:[" $",(t.solBalance*(a.SOL||kc.SOL)).toFixed(2)]}),d.jsxs("div",{className:"mt-4 pt-3 border-t border-[#232328]",children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsx("span",{className:"text-[10px] font-semibold uppercase tracking-[0.05em] text-[#747580]",children:"Vault Address"}),t.publicKey&&d.jsxs("a",{href:`https://solscan.io/address/${t.publicKey}?cluster=devnet`,target:"_blank",rel:"noopener noreferrer",className:"text-[10px] text-[#E7FE55] hover:text-[#f0ff85] flex items-center gap-1",title:"View on Solscan Explorer",children:[d.jsx(pT,{size:10})," Solscan"]})]}),t.publicKey?d.jsxs("div",{onClick:()=>P(t.publicKey),className:"flex items-center gap-2 cursor-pointer group",children:[d.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#E7FE55]"}),d.jsxs("span",{className:"text-xs text-white font-mono truncate group-hover:text-[#E7FE55] transition-colors",children:[t.publicKey.slice(0,4),"...",t.publicKey.slice(-4)]}),_===t.publicKey?d.jsx("span",{className:"text-[10px] text-[#E7FE55] ml-auto",children:"Copied!"}):d.jsx("span",{className:"text-[10px] text-[#747580] ml-auto opacity-0 group-hover:opacity-100 transition-opacity",children:"Click to copy"})]}):d.jsx("div",{className:"text-[10px] text-[#747580] italic",children:"Not created"})]}),d.jsxs("div",{className:"mt-3 pt-3 border-t border-[#232328]",children:[d.jsx("div",{className:"flex items-center justify-between mb-2",children:d.jsx("span",{className:"text-[10px] uppercase tracking-[0.05em] font-semibold text-[#747580]",children:"Solana Owner"})}),t.ownerPublicKey?d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{onClick:()=>P(t.ownerPublicKey),className:"flex items-center gap-2 cursor-pointer group flex-1",children:[d.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#E7FE55]"}),d.jsxs("span",{className:"text-xs text-white font-mono truncate group-hover:text-[#E7FE55] transition-colors",children:[t.ownerPublicKey.slice(0,4),"...",t.ownerPublicKey.slice(-4)]}),_===t.ownerPublicKey?d.jsx("span",{className:"text-[10px] text-[#E7FE55] ml-2",children:"Copied!"}):d.jsx("span",{className:"text-[10px] text-[#747580] ml-2 opacity-0 group-hover:opacity-100 transition-opacity",children:"Click to copy"})]}),d.jsx("button",{onClick:n,className:"ml-2 px-2 py-1 text-[10px] font-medium text-[#747580] hover:text-[#E7FE55] bg-transparent hover:bg-[#E7FE55]/10 rounded border border-[#232328] hover:border-[#E7FE55]/30 transition-colors flex-shrink-0",children:"Disconnect"})]}):d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("div",{className:"text-[10px] text-[#747580] italic",children:"Not connected"}),d.jsx("button",{onClick:e,className:"px-2 py-1 text-[10px] font-medium text-[#E7FE55] hover:text-[#f0ff85] bg-[#E7FE55]/10 hover:bg-[#E7FE55]/20 rounded border border-[#E7FE55]/20 transition-colors flex-shrink-0",children:"Connect"})]})]})]}),d.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col",children:[d.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5",children:d.jsx(yn,{size:48,className:"text-white"})}),d.jsx("div",{className:"flex items-center gap-2 mb-2",children:d.jsx("h3",{className:"text-[10px] uppercase tracking-[0.1em] text-[#747580] font-semibold",children:"Hyperliquid Vault"})}),d.jsxs("div",{className:"text-xl lg:text-2xl font-semibold text-white tracking-tight",children:[(t.hlBalance||0).toFixed(2)," USDC"]}),d.jsx("div",{className:"text-[11px] text-[#747580] mt-1",children:t.hlPositions&&t.hlPositions.length>0?`${t.hlPositions.length} open position${t.hlPositions.length>1?"s":""}`:"No open positions"}),d.jsxs("div",{className:"mt-4 pt-3 border-t border-[#232328]",children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsx("span",{className:"text-[10px] font-semibold uppercase tracking-[0.05em] text-[#747580]",children:"Vault Address"}),d.jsxs("a",{href:"https://app.hyperliquid-testnet.xyz",target:"_blank",rel:"noopener noreferrer",className:"text-[10px] text-[#E7FE55] hover:text-[#f0ff85] flex items-center gap-1",title:"Hyperliquid Platform Official Website",children:[d.jsx(yn,{size:10})," Hyperliquid"]})]}),t.hlPublicKey?d.jsxs("div",{onClick:()=>P(t.hlPublicKey),className:"flex items-center gap-2 cursor-pointer group",children:[d.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#E7FE55]"}),d.jsxs("span",{className:"text-xs text-white font-mono truncate group-hover:text-[#E7FE55] transition-colors",children:[t.hlPublicKey.slice(0,6),"...",t.hlPublicKey.slice(-4)]}),_===t.hlPublicKey?d.jsx("span",{className:"text-[10px] text-[#E7FE55] ml-auto",children:"Copied!"}):d.jsx("span",{className:"text-[10px] text-[#747580] ml-auto opacity-0 group-hover:opacity-100 transition-opacity",children:"Click to copy"})]}):d.jsx("div",{className:"text-[10px] text-[#747580] italic",children:"Not created"})]}),d.jsxs("div",{className:"mt-3 pt-3 border-t border-[#232328]",children:[d.jsx("div",{className:"flex items-center justify-between mb-2",children:d.jsx("span",{className:"text-[10px] uppercase tracking-[0.05em] font-semibold text-[#747580]",children:"Hyperliquid Owner"})}),t.hlOwnerPublicKey?d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{onClick:()=>P(t.hlOwnerPublicKey),className:"flex items-center gap-2 cursor-pointer group flex-1",children:[d.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#E7FE55]"}),d.jsxs("span",{className:"text-xs text-white font-mono truncate group-hover:text-[#E7FE55] transition-colors",children:[t.hlOwnerPublicKey.slice(0,4),"...",t.hlOwnerPublicKey.slice(-4)]}),_===t.hlOwnerPublicKey?d.jsx("span",{className:"text-[10px] text-[#E7FE55] ml-2",children:"Copied!"}):d.jsx("span",{className:"text-[10px] text-[#747580] ml-2 opacity-0 group-hover:opacity-100 transition-opacity",children:"Click to copy"})]}),d.jsx("button",{onClick:i,className:"ml-2 px-2 py-1 text-[10px] font-medium text-[#747580] hover:text-[#E7FE55] bg-transparent hover:bg-[#E7FE55]/10 rounded border border-[#232328] hover:border-[#E7FE55]/30 transition-colors flex-shrink-0",children:"Disconnect"})]}):d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("div",{className:"text-[10px] text-[#747580] italic",children:"Not connected"}),d.jsx("button",{onClick:r,className:"px-2 py-1 text-[10px] font-medium text-[#E7FE55] hover:text-[#f0ff85] bg-[#E7FE55]/10 hover:bg-[#E7FE55]/20 rounded border border-[#E7FE55]/20 transition-colors flex-shrink-0",children:"Connect"})]})]})]}),d.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col",children:[d.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5",children:d.jsx(pT,{size:48,className:"text-white"})}),d.jsx("div",{className:"flex items-center gap-2 mb-2",children:d.jsx("h3",{className:"text-[10px] uppercase tracking-[0.1em] text-[#747580] font-semibold",children:"Polymarket Vault"})}),d.jsxs("div",{className:"text-xl lg:text-2xl font-semibold text-white tracking-tight",children:[(t.pmBalance||0).toFixed(2)," USDC"]}),d.jsxs("div",{className:"text-[11px] text-[#E7FE55] mt-1",children:[" $",(t.pmBalance||0).toFixed(2)]}),d.jsxs("div",{className:"mt-4 pt-3 border-t border-[#232328]",children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsx("span",{className:"text-[10px] font-semibold uppercase tracking-[0.05em] text-[#747580]",children:"Vault Address"}),d.jsxs("a",{href:"https://polymarket.com",target:"_blank",rel:"noopener noreferrer",className:"text-[10px] text-[#E7FE55] hover:text-[#f0ff85] flex items-center gap-1",title:"Polymarket Platform",children:[d.jsx(pT,{size:10})," Polymarket"]})]}),t.pmPublicKey?d.jsxs("div",{onClick:()=>P(t.pmPublicKey),className:"flex items-center gap-2 cursor-pointer group",children:[d.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#E7FE55]"}),d.jsxs("span",{className:"text-xs text-white font-mono truncate group-hover:text-[#E7FE55] transition-colors",children:[t.pmPublicKey.slice(0,6),"...",t.pmPublicKey.slice(-4)]}),_===t.pmPublicKey?d.jsx("span",{className:"text-[10px] text-[#E7FE55] ml-auto",children:"Copied!"}):d.jsx("span",{className:"text-[10px] text-[#747580] ml-auto opacity-0 group-hover:opacity-100 transition-opacity",children:"Click to copy"})]}):d.jsx("div",{className:"text-[10px] text-[#747580] italic",children:"Not created"})]}),d.jsxs("div",{className:"mt-3 pt-3 border-t border-[#232328]",children:[d.jsx("div",{className:"flex items-center justify-between mb-2",children:d.jsx("span",{className:"text-[10px] uppercase tracking-[0.05em] font-semibold text-[#747580]",children:"Polymarket Owner"})}),t.pmOwnerPublicKey?d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{onClick:()=>P(t.pmOwnerPublicKey),className:"flex items-center gap-2 cursor-pointer group flex-1",children:[d.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#E7FE55]"}),d.jsxs("span",{className:"text-xs text-white font-mono truncate group-hover:text-[#E7FE55] transition-colors",children:[t.pmOwnerPublicKey.slice(0,4),"...",t.pmOwnerPublicKey.slice(-4)]}),_===t.pmOwnerPublicKey?d.jsx("span",{className:"text-[10px] text-[#E7FE55] ml-2",children:"Copied!"}):d.jsx("span",{className:"text-[10px] text-[#747580] ml-2 opacity-0 group-hover:opacity-100 transition-opacity",children:"Click to copy"})]}),d.jsx("button",{onClick:o,className:"ml-2 px-2 py-1 text-[10px] font-medium text-[#747580] hover:text-[#E7FE55] bg-transparent hover:bg-[#E7FE55]/10 rounded border border-[#232328] hover:border-[#E7FE55]/30 transition-colors flex-shrink-0",children:"Disconnect"})]}):d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("div",{className:"text-[10px] text-[#747580] italic",children:"Not connected"}),d.jsx("button",{onClick:s,className:"px-2 py-1 text-[10px] font-medium text-[#E7FE55] hover:text-[#f0ff85] bg-[#E7FE55]/10 hover:bg-[#E7FE55]/20 rounded border border-[#E7FE55]/20 transition-colors flex-shrink-0",children:"Connect"})]})]})]})]}),d.jsxs("div",{className:"grid grid-cols-1 2xl:grid-cols-3 gap-6",children:[d.jsxs("div",{className:"2xl:col-span-2 space-y-6",children:[d.jsxs("div",{className:"glass-panel p-6 rounded",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 mb-6",children:[d.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[d.jsx(to,{className:"text-[#E7FE55]",size:18}),"Portfolio Evolution"]}),d.jsx("div",{className:"flex gap-2",children:["1D","1W","1M","1Y"].map(X=>{const se=$[X],oe=X===B;return d.jsx("button",{disabled:!se,onClick:()=>se&&z(X),className:`px-3 py-1 rounded text-xs font-medium transition-colors ${se?oe?"bg-[#E7FE55]/15 text-[#E7FE55] border border-[#E7FE55]/30":"text-[#747580] hover:text-[#a0a1a8] hover:bg-[#1a1b21]":"text-[#3a3a40] cursor-not-allowed"}`,children:X},X)})})]}),d.jsx("div",{className:"h-[250px] lg:h-[300px] w-full",children:d.jsx(Zw,{width:"100%",height:"100%",children:d.jsxs(xKe,{data:W.length>0?W:[],children:[d.jsx("defs",{children:d.jsxs("linearGradient",{id:"colorValue",x1:"0",y1:"0",x2:"0",y2:"1",children:[d.jsx("stop",{offset:"5%",stopColor:"#E7FE55",stopOpacity:.25}),d.jsx("stop",{offset:"50%",stopColor:"#E7FE55",stopOpacity:.08}),d.jsx("stop",{offset:"95%",stopColor:"#E7FE55",stopOpacity:0})]})}),d.jsx(d1,{strokeDasharray:"3 3",stroke:"#232328",vertical:!1}),d.jsx(h1,{dataKey:"date",stroke:"#747580",tick:{fill:"#747580",fontSize:10},tickLine:!1,axisLine:!1}),d.jsx(p1,{stroke:"#747580",tick:{fill:"#747580",fontSize:10},tickLine:!1,axisLine:!1,tickFormatter:X=>`$${X}`,width:50}),d.jsx(c2,{contentStyle:{backgroundColor:"#14151a",borderColor:"#232328",borderRadius:"4px"},itemStyle:{color:"#e4e5e9"},labelStyle:{color:"#747580"},itemSorter:X=>({value:0,solValue:1,hlValue:2,pmValue:3})[X.dataKey]??10,formatter:(X,se)=>[`$${X.toFixed(2)}`,se==="value"?"Total Value":se==="solValue"?"SOL Value":se==="hlValue"?"HL Value":se==="pmValue"?"PM Value":se]}),d.jsx($C,{type:"monotone",dataKey:"value",stroke:"#E7FE55",strokeWidth:1.5,fillOpacity:1,fill:"url(#colorValue)"}),d.jsx(DT,{type:"monotone",dataKey:"solValue",stroke:"#9b87f5",strokeWidth:1.5,dot:!1}),d.jsx(DT,{type:"monotone",dataKey:"hlValue",stroke:"#34d399",strokeWidth:1.5,dot:!1}),d.jsx(DT,{type:"monotone",dataKey:"pmValue",stroke:"#60a5fa",strokeWidth:1.5,dot:!1})]})})}),d.jsxs("div",{className:"flex items-center justify-center gap-6 mt-4 text-[11px] text-[#747580]",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2 h-2 rounded-full bg-[#E7FE55]"}),d.jsx("span",{children:"Total Value"})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2 h-2 rounded-full bg-[#9b87f5]"}),d.jsx("span",{children:"SOL Value"})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2 h-2 rounded-full bg-[#34d399]"}),d.jsx("span",{children:"HL Value"})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2 h-2 rounded-full bg-[#60a5fa]"}),d.jsx("span",{children:"PM Value"})]})]})]}),d.jsxs("div",{className:"glass-panel p-6 rounded",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[d.jsx(yn,{className:"text-[#E7FE55]",size:18}),"Open Trading"]}),d.jsxs("button",{onClick:()=>v(we.HYPERLIQUID),className:"text-[10px] px-3 py-1.5 rounded uppercase tracking-wider font-medium transition-colors flex items-center gap-2 text-[#747580] hover:text-[#E7FE55] bg-transparent hover:bg-[#E7FE55]/10 border border-[#232328] hover:border-[#E7FE55]/30",children:[d.jsx(yn,{size:12}),"Details"]})]}),!t.hlPositions||t.hlPositions.length===0?d.jsx("div",{className:"text-center py-8 text-[#747580] text-sm bg-[#14151a] rounded border border-[#232328]",children:"No open positions. Start trading to see your portfolio grow!"}):d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full text-left border-collapse",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"text-[10px] uppercase tracking-[0.05em] text-[#747580] border-b border-[#232328]",children:[d.jsx("th",{className:"py-3 pl-4 font-medium",children:"Symbol"}),d.jsx("th",{className:"py-3 font-medium",children:"Size"}),d.jsx("th",{className:"py-3 font-medium",children:"Entry Price"}),d.jsx("th",{className:"py-3 font-medium",children:"Mark Price"}),d.jsx("th",{className:"py-3 font-medium",children:"Liq. Price"}),d.jsx("th",{className:"py-3 font-medium",children:"Leverage"}),d.jsx("th",{className:"py-3 pr-4 font-medium text-right",children:"Unrealized PnL"})]})}),d.jsx("tbody",{className:"text-sm",children:t.hlPositions.map((X,se)=>{const oe=parseFloat(X.position.szi),me=parseFloat(X.position.entryPx),ce=a[X.position.coin]||me,ve=parseFloat(X.position.unrealizedPnl),Ne=X.position.leverage.value,pe=oe>0,Le=pe?me*(1-.9/Ne):me*(1+.9/Ne);return d.jsxs("tr",{className:"border-b border-[#232328]/50 last:border-0 hover:bg-[#1a1b21] transition-colors",children:[d.jsx("td",{className:"py-3 pl-4",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:`w-1 h-6 rounded-full ${pe?"bg-[#34d399]":"bg-red-500"}`}),d.jsx("span",{className:"font-semibold text-white",children:X.position.coin}),d.jsx("span",{className:`text-[9px] px-1.5 py-0.5 rounded uppercase tracking-wider ${pe?"bg-[#34d399]/15 text-[#34d399]":"bg-red-500/15 text-red-400"}`,children:pe?"LONG":"SHORT"})]})}),d.jsx("td",{className:"py-3 text-[#a0a1a8]",children:Math.abs(oe).toFixed(4)}),d.jsxs("td",{className:"py-3 text-[#a0a1a8]",children:["$",me.toFixed(4)]}),d.jsxs("td",{className:"py-3 text-[#a0a1a8]",children:["$",ce.toFixed(4)]}),d.jsxs("td",{className:"py-3 text-orange-400/80",children:["$",Le.toFixed(4)]}),d.jsxs("td",{className:"py-3 text-[#747580]",children:[Ne,"x"]}),d.jsxs("td",{className:`py-3 pr-4 text-right font-medium ${ve>=0?"text-[#34d399]":"text-red-400"}`,children:[ve>=0?"+":"",ve.toFixed(2)," USDC"]})]},se)})})]})})]}),d.jsxs("div",{className:"glass-panel p-6 rounded flex flex-col",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[d.jsx(Hi,{className:"text-[#E7FE55]",size:18}),"Open Tasks"]}),d.jsxs("span",{className:"text-[10px] bg-[#1a1b21] text-[#747580] px-2 py-1 rounded uppercase tracking-wider",children:[u.filter(X=>X.status==="active").length," Active"]}),d.jsxs("button",{onClick:()=>v(we.SCHEDULER),className:"text-[10px] px-3 py-1.5 rounded uppercase tracking-wider font-medium transition-colors flex items-center gap-2 text-[#747580] hover:text-[#E7FE55] bg-transparent hover:bg-[#E7FE55]/10 border border-[#232328] hover:border-[#E7FE55]/30",children:[d.jsx(Hi,{size:12}),"Details"]})]}),d.jsx("div",{className:"flex-1 flex flex-col",children:u.filter(X=>X.status==="active").length===0?d.jsx("div",{className:"text-center py-8 text-[#747580] text-sm my-auto bg-[#14151a] rounded border border-[#232328]",children:"No active tasks scheduled. Ask the AI to schedule a swap or transfer."}):d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"space-y-3",children:u.filter(X=>X.status==="active").slice(H*T,(H+1)*T).map(X=>d.jsxs("div",{className:"bg-[#14151a] p-4 rounded border border-[#232328] flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#E7FE55]"}),d.jsxs("div",{children:[d.jsxs("div",{className:"text-sm font-medium text-white flex items-center gap-2",children:[X.type,X.type==="HL_ORDER"&&d.jsx(OJ,{network:"hyperliquid"}),X.condition&&d.jsx("span",{className:"text-[10px] text-yellow-500",children:"(Condition)"})]}),d.jsx("div",{className:"text-[11px] text-[#747580]",children:X.condition?`${X.condition.indicator.toUpperCase()} ${X.condition.operator} ${X.condition.value} (${X.condition.symbol})`:`Executes in ${Math.max(0,Math.round(((X.executeAt||0)-Date.now())/6e4))} mins`})]})]}),d.jsxs("div",{className:"text-[10px] font-mono text-[#747580]",children:["ID: ",X.id.slice(-4)]})]},X.id))}),d.jsx("div",{className:"mt-auto",children:u.filter(X=>X.status==="active").length>T&&d.jsxs("div",{className:"flex items-center justify-between mt-4 pt-2 border-t border-[#232328]",children:[d.jsx("button",{onClick:()=>F(Math.max(0,H-1)),disabled:H===0,className:`p-1 rounded hover:bg-[#1a1b21] transition-colors ${H===0?"text-[#3a3b42] cursor-not-allowed":"text-[#747580]"}`,children:d.jsx(Iw,{size:16})}),d.jsxs("span",{className:"text-[10px] text-[#747580]",children:["Page ",H+1," of ",Math.ceil(u.filter(X=>X.status==="active").length/T)]}),d.jsx("button",{onClick:()=>F(Math.min(Math.ceil(u.filter(X=>X.status==="active").length/T)-1,H+1)),disabled:H>=Math.ceil(u.filter(X=>X.status==="active").length/T)-1,className:`p-1 rounded hover:bg-[#1a1b21] transition-colors ${H>=Math.ceil(u.filter(X=>X.status==="active").length/T)-1?"text-[#3a3b42] cursor-not-allowed":"text-[#747580]"}`,children:d.jsx(Xa,{size:16})})]})})]})})]})]}),d.jsxs("div",{className:"space-y-6 flex flex-col",children:[d.jsxs("div",{className:"glass-panel p-6 rounded flex flex-col",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("h3",{className:"text-sm font-semibold text-white",children:"Asset Allocation"}),d.jsxs("div",{className:"flex gap-1 bg-[#1a1b21] p-1 rounded border border-[#232328]",children:[d.jsx("button",{onClick:()=>K("bar"),className:`p-1.5 rounded transition-colors ${V==="bar"?"bg-[#232328] text-[#E7FE55]":"text-[#747580] hover:text-[#a0a1a8]"}`,title:"Bar View",children:d.jsx(jTe,{size:14})}),d.jsx("button",{onClick:()=>K("pie"),className:`p-1.5 rounded transition-colors ${V==="pie"?"bg-[#232328] text-[#E7FE55]":"text-[#747580] hover:text-[#a0a1a8]"}`,title:"Pie View",children:d.jsx(_w,{size:14})})]})]}),d.jsx("div",{className:"h-[180px] w-full relative flex-shrink-0",children:d.jsx(Zw,{width:"100%",height:"100%",children:V==="pie"?d.jsxs(efe,{children:[d.jsx(cB,{data:h.data,cx:"50%",cy:"50%",innerRadius:45,outerRadius:q!==void 0?65:70,paddingAngle:3,dataKey:"value",onMouseEnter:(X,se)=>M(se),onMouseLeave:()=>M(void 0),animationBegin:0,animationDuration:800,animationEasing:"ease-out",children:h.data.map((X,se)=>d.jsx(pv,{fill:X.color,stroke:q===se?X.color:"transparent",strokeWidth:q===se?3:0,style:{cursor:"pointer",transition:"all 0.2s ease-out",filter:q===se?`brightness(1.2) drop-shadow(0 0 8px ${X.color})`:"brightness(1)",transform:q===se?"scale(1.05)":"scale(1)",transformOrigin:"center"}},`cell-${se}`))}),q!==void 0&&h.data[q]&&d.jsxs("g",{children:[d.jsx("text",{x:"50%",y:"42%",textAnchor:"middle",fill:"#fff",fontSize:12,fontWeight:"bold",children:h.data[q].symbol}),d.jsxs("text",{x:"50%",y:"54%",textAnchor:"middle",fill:h.data[q].color,fontSize:15,fontWeight:"bold",fontFamily:"monospace",children:["$",h.data[q].value.toFixed(2)]}),d.jsxs("text",{x:"50%",y:"65%",textAnchor:"middle",fill:"#747580",fontSize:10,children:[(h.data[q].value/(h.totalValue||1)*100).toFixed(1),"%"]})]}),q===void 0&&d.jsxs("g",{children:[d.jsx("text",{x:"50%",y:"46%",textAnchor:"middle",fill:"#747580",fontSize:10,style:{textTransform:"uppercase",letterSpacing:"0.1em"},children:"Total"}),d.jsxs("text",{x:"50%",y:"58%",textAnchor:"middle",fill:"#fff",fontSize:18,fontWeight:"600",children:["$",h.totalValue.toFixed(0)]})]})]}):d.jsxs(iKe,{data:[h.data.reduce((X,se)=>({...X,[se.symbol]:se.value}),{name:"Total"})],layout:"vertical",margin:{top:20,right:30,left:20,bottom:5},children:[d.jsx(d1,{strokeDasharray:"3 3",horizontal:!0,vertical:!0,stroke:"#232328"}),d.jsx(h1,{type:"number",tickFormatter:X=>`$${X}`,tick:{fill:"#747580",fontSize:10},tickLine:!1,axisLine:!1}),d.jsx(p1,{type:"category",dataKey:"name",hide:!0}),d.jsx(c2,{cursor:{fill:"transparent"},content:({active:X,payload:se})=>{if(!X||!se||!se.length||!te)return null;const oe=se.find(me=>me.dataKey===te);return oe?d.jsxs("div",{className:"bg-[#14151a] border border-[#232328] p-2 rounded shadow-lg",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsx("div",{className:"w-1.5 h-1.5 rounded-full",style:{backgroundColor:oe.color}}),d.jsx("span",{className:"text-[#a0a1a8] font-semibold text-[11px]",children:oe.name})]}),d.jsxs("p",{className:"text-white font-mono text-sm",children:["$",Number(oe.value).toFixed(2)]})]}):null}}),h.data.map((X,se)=>d.jsx(jde,{dataKey:X.symbol,stackId:"a",fill:X.color,onMouseEnter:()=>G(X.symbol),onMouseLeave:()=>G(null),radius:se===0&&h.data.length===1?[4,4,4,4]:se===0?[4,0,0,4]:se===h.data.length-1?[0,4,4,0]:[0,0,0,0],barSize:40},X.symbol))]})})}),d.jsx("div",{className:"mt-4 space-y-1 flex-1 overflow-y-auto pr-2 custom-scrollbar",children:h.data.map((X,se)=>d.jsxs("div",{className:`flex items-center justify-between text-sm p-2 rounded-lg transition-all cursor-pointer ${q===se?"bg-[#232328]":"hover:bg-[#1a1b21]"}`,onMouseEnter:()=>M(se),onMouseLeave:()=>M(void 0),children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0 transition-transform",style:{backgroundColor:X.color,transform:q===se?"scale(1.3)":"scale(1)",boxShadow:q===se?`0 0 8px ${X.color}`:"none"}}),d.jsx("span",{className:`truncate max-w-[80px] sm:max-w-[100px] text-xs transition-colors ${q===se?"text-white":"text-[#a0a1a8]"}`,children:X.symbol}),X.network&&d.jsx("span",{className:`text-[9px] px-1 rounded uppercase tracking-wider ${X.network==="solana"?"bg-[#9b87f5]/15 text-[#9b87f5]":X.network==="hyperliquid"?"bg-[#34d399]/15 text-[#34d399]":"bg-[#60a5fa]/15 text-[#60a5fa]"}`,children:X.network==="solana"?"SOL":X.network==="hyperliquid"?"HL":"PM"})]}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsxs("span",{className:`text-xs font-mono transition-colors ${q===se?"text-white":"text-[#747580]"}`,children:["$",X.value.toFixed(2)]}),d.jsxs("span",{className:"text-xs font-mono font-semibold",style:{color:X.color},children:[(X.value/(h.totalValue||1)*100).toFixed(1),"%"]})]})]},se))})]}),d.jsxs("div",{className:"glass-panel p-6 rounded flex flex-col",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("h3",{className:"text-sm font-semibold text-white",children:"Recent Activity"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:()=>{N(k==="solana"?"all":"solana"),D(0)},className:`text-[9px] px-2 py-1 rounded uppercase tracking-wider font-medium transition-colors ${k==="solana"?"bg-[#9b87f5] text-white":"bg-[#9b87f5]/15 text-[#9b87f5] hover:bg-[#9b87f5]/25"}`,children:"SOL"}),d.jsx("button",{onClick:()=>{N(k==="hyperliquid"?"all":"hyperliquid"),D(0)},className:`text-[9px] px-2 py-1 rounded uppercase tracking-wider font-medium transition-colors ${k==="hyperliquid"?"bg-[#34d399] text-[#0f1015]":"bg-[#34d399]/15 text-[#34d399] hover:bg-[#34d399]/25"}`,children:"HL"})]})]}),d.jsx("div",{className:"flex-1 flex flex-col",children:m.filter(X=>k==="all"||X.network===k).length===0?d.jsx("div",{className:"text-center text-[#747580] text-sm py-4 my-auto bg-[#14151a] rounded border border-[#232328]",children:"No recent activity"}):d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"space-y-3",children:m.filter(X=>k==="all"||X.network===k).slice(R*O,(R+1)*O).map((X,se)=>d.jsxs("div",{className:"flex items-start gap-3 pb-3 border-b border-[#232328] last:border-0",children:[d.jsx("div",{className:`mt-1 p-1.5 rounded-full ${X.status==="failed"?"bg-red-500/15 text-red-400":X.network==="solana"?"bg-[#9b87f5]/15 text-[#9b87f5]":"bg-[#34d399]/15 text-[#34d399]"}`,children:X.status==="failed"?d.jsx(TTe,{size:14}):d.jsx(Jne,{size:14})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex justify-between items-start gap-2",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:`text-sm font-medium ${X.status==="failed"?"text-red-400":X.network==="solana"?"text-[#9b87f5]":"text-[#34d399]"}`,children:X.type}),d.jsx(OJ,{network:X.network})]}),d.jsx("span",{className:"text-[10px] text-[#747580] flex-shrink-0",children:X.time})]}),d.jsx("div",{className:"text-[11px] text-[#747580] truncate mt-0.5",children:X.desc}),X.signature&&Y(X)&&d.jsxs("a",{href:Y(X),target:"_blank",rel:"noopener noreferrer",className:`text-[10px] ${X.network==="solana"?"text-[#9b87f5] hover:text-[#a78bfa]":"text-[#34d399] hover:text-[#4ade80]"} flex items-center gap-1 mt-1`,children:[X.network==="solana"?"View on Solscan Explorer":"View on HL Explorer"," ",d.jsx(ld,{size:10})]})]})]},se))}),d.jsx("div",{className:"mt-auto",children:m.filter(X=>k==="all"||X.network===k).length>O&&d.jsxs("div",{className:"flex items-center justify-between mt-4 pt-2 border-t border-[#232328]",children:[d.jsx("button",{onClick:()=>D(Math.max(0,R-1)),disabled:R===0,className:`p-1 rounded hover:bg-[#1a1b21] transition-colors ${R===0?"text-[#3a3b42] cursor-not-allowed":"text-[#747580]"}`,children:d.jsx(Iw,{size:16})}),d.jsxs("span",{className:"text-[10px] text-[#747580]",children:["Page ",R+1," of ",Math.ceil(m.filter(X=>k==="all"||X.network===k).length/O)]}),d.jsx("button",{onClick:()=>D(Math.min(Math.ceil(m.filter(X=>k==="all"||X.network===k).length/O)-1,R+1)),disabled:R>=Math.ceil(m.filter(X=>k==="all"||X.network===k).length/O)-1,className:`p-1 rounded hover:bg-[#1a1b21] transition-colors ${R>=Math.ceil(m.filter(X=>k==="all"||X.network===k).length/O)-1?"text-[#3a3b42] cursor-not-allowed":"text-[#747580]"}`,children:d.jsx(Xa,{size:16})})]})})]})})]})]})]})]})},EKe=({vault:t,password:e,setPassword:n,withdrawAmount:r,setWithdrawAmount:i,withdrawNetwork:s,setWithdrawNetwork:o,isImporting:a,setIsImporting:l,importKey:c,setImportKey:u,createVault:h,unlockVault:m,requestAirdrop:g,handleWithdraw:y,handleWithdrawHL:v,handleWithdrawPM:b,importVault:w,addNotification:k,isImportingSolana:N,setIsImportingSolana:R,isImportingHyperliquid:D,setIsImportingHyperliquid:O,isImportingPolymarket:B,setIsImportingPolymarket:z,solanaPassword:U,setSolanaPassword:$,hyperliquidPassword:W,setHyperliquidPassword:H,polymarketPassword:F,setPolymarketPassword:T,solanaImportKey:_,setSolanaImportKey:L,hlImportKey:V,setHLImportKey:K,pmImportKey:te,setPMImportKey:G,createSolanaVault:q,createHyperliquidVault:M,createPolymarketVault:P,importSolanaVault:Y,importHyperliquidVault:X,importPolymarketVault:se,setActiveTab:oe,activeVaultTab:me,setActiveVaultTab:ce})=>{var at,rt,Xe,ft;const ve=A.useMemo(()=>{const Me=(t.solBalance||0)*kc.SOL,pt=t.hlBalance||0,Kt=t.pmBalance||0;return Me+pt+Kt},[t.solBalance,t.hlBalance,t.pmBalance]),Ne=A.useMemo(()=>{const Me=(t.solBalance||0)*kc.SOL,pt=t.hlBalance||0,Kt=t.pmBalance||0,Re=Me+pt+Kt;return{solana:{value:Me,percent:Re>0?Me/Re*100:0},hyperliquid:{value:pt,percent:Re>0?pt/Re*100:0},polymarket:{value:Kt,percent:Re>0?Kt/Re*100:0},total:Re}},[t.solBalance,t.hlBalance,t.pmBalance]);!t.publicKey&&!t.hlPublicKey||t.isUnlocked;const pe={solana:"#E7FE55",hyperliquid:"#E7FE55",polymarket:"#60a5fa"},Le=()=>{const{solana:Me,hyperliquid:pt,polymarket:Kt,total:Re}=Ne,[He,gt]=A.useState(void 0),dt=A.useMemo(()=>Re===0?[]:[{name:"Solana",value:Me.value,percent:Me.percent,color:pe.solana},{name:"Hyperliquid",value:pt.value,percent:pt.percent,color:pe.hyperliquid},{name:"Polymarket",value:Kt.value,percent:Kt.percent,color:pe.polymarket}].filter(Z=>Z.value>0),[Me,pt,Kt,Re]);if(Re===0)return d.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[d.jsx("div",{className:"w-32 h-32 rounded-full bg-[#1a1b21] border-2 border-dashed border-[#232328] flex items-center justify-center",children:d.jsx(_w,{size:32,className:"text-[#747580]"})}),d.jsx("p",{className:"text-[#747580] text-xs mt-4",children:"No assets"})]});const ie=(Z,ue)=>{gt(ue)},J=()=>{gt(void 0)};return d.jsxs("div",{className:"flex flex-col items-center justify-center h-full w-full gap-4",children:[d.jsx("div",{className:"w-full h-[180px] relative",children:d.jsx(Zw,{width:"100%",height:"100%",children:d.jsxs(efe,{children:[d.jsxs("defs",{children:[d.jsxs("linearGradient",{id:"solanaGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[d.jsx("stop",{offset:"0%",stopColor:"#E7FE55",stopOpacity:.8}),d.jsx("stop",{offset:"100%",stopColor:"#E7FE55",stopOpacity:.4})]}),d.jsxs("linearGradient",{id:"hyperliquidGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[d.jsx("stop",{offset:"0%",stopColor:"#f3ffad"}),d.jsx("stop",{offset:"100%",stopColor:"#E7FE55"})]}),d.jsxs("linearGradient",{id:"polymarketGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[d.jsx("stop",{offset:"0%",stopColor:"#7db4fb"}),d.jsx("stop",{offset:"100%",stopColor:"#60a5fa"})]})]}),d.jsx(cB,{data:dt,cx:"50%",cy:"50%",innerRadius:45,outerRadius:He!==void 0?65:70,paddingAngle:3,dataKey:"value",onMouseEnter:ie,onMouseLeave:J,animationBegin:0,animationDuration:800,animationEasing:"ease-out",children:dt.map((Z,ue)=>d.jsx(pv,{fill:Z.color,stroke:He===ue?Z.color:"transparent",strokeWidth:He===ue?3:0,style:{cursor:"pointer",transition:"all 0.2s ease-out",filter:He===ue?`brightness(1.2) drop-shadow(0 0 8px ${Z.color})`:"brightness(1)",transform:He===ue?"scale(1.05)":"scale(1)",transformOrigin:"center"}},`cell-${ue}`))}),He!==void 0&&dt[He]&&d.jsxs("g",{children:[d.jsx("text",{x:"50%",y:"45%",textAnchor:"middle",fill:"#fff",fontSize:13,fontWeight:"bold",children:dt[He].name}),d.jsxs("text",{x:"50%",y:"55%",textAnchor:"middle",fill:dt[He].color,fontSize:16,fontWeight:"bold",fontFamily:"monospace",children:["$",dt[He].value.toFixed(2)]}),d.jsxs("text",{x:"50%",y:"65%",textAnchor:"middle",fill:"#747580",fontSize:10,children:[dt[He].percent.toFixed(1),"%"]})]})]})})}),d.jsx("div",{className:"flex flex-col gap-2 w-full",children:dt.map((Z,ue)=>d.jsxs("div",{className:`flex items-center justify-between p-2 rounded-lg transition-all cursor-pointer ${He===ue?"bg-[#232328]":"hover:bg-[#1a1b21]"}`,onMouseEnter:()=>gt(ue),onMouseLeave:()=>gt(void 0),children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-3 h-3 rounded-full transition-transform",style:{backgroundColor:Z.color,transform:He===ue?"scale(1.3)":"scale(1)",boxShadow:He===ue?`0 0 8px ${Z.color}`:"none"}}),d.jsx("span",{className:`text-xs transition-colors ${He===ue?"text-white":"text-[#747580]"}`,children:Z.name})]}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsxs("span",{className:`text-xs font-mono transition-colors ${He===ue?"text-white":"text-[#747580]"}`,children:["$",Z.value.toFixed(2)]}),d.jsxs("span",{className:"text-xs font-mono font-semibold",style:{color:Z.color},children:[Z.percent.toFixed(1),"%"]})]})]},Z.name))})]})},he=d.jsxs("div",{className:"glass-panel p-4 flex flex-col h-full",children:[d.jsxs("div",{className:"flex items-center gap-2 swiss-label text-[#E7FE55] mb-3",children:[d.jsx(sk,{size:14}),"Fast Withdraw"]}),d.jsxs("div",{className:"flex gap-1 mb-3 bg-[#0f1015] p-1 rounded",children:[d.jsx("button",{onClick:()=>o("SOL"),className:`flex-1 py-1.5 text-[10px] font-semibold uppercase tracking-wider rounded transition-all ${s==="SOL"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-white"}`,children:"SOL"}),d.jsx("button",{onClick:()=>o("HYPE"),className:`flex-1 py-1.5 text-[10px] font-semibold uppercase tracking-wider rounded transition-all ${s==="HYPE"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-white"}`,children:"HYPE"}),d.jsx("button",{onClick:()=>o("POLY"),className:`flex-1 py-1.5 text-[10px] font-semibold uppercase tracking-wider rounded transition-all ${s==="POLY"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-white"}`,children:"POLY"})]}),d.jsxs("div",{className:"flex-1 flex flex-col justify-end space-y-3",children:[d.jsxs("div",{children:[d.jsx("label",{className:"swiss-label block mb-1.5",children:"Amount"}),d.jsxs("div",{className:"flex items-center relative",children:[d.jsx("input",{type:"number",value:r,onChange:Me=>i(Me.target.value),className:"w-full bg-[#0f1015] border border-[#232328] rounded pl-3 pr-12 py-2.5 text-sm text-white focus:ring-1 outline-none transition-all focus:ring-[#E7FE55]",placeholder:"0.00"}),d.jsx("button",{onClick:()=>{i(s==="SOL"?Math.max(0,t.solBalance-.005).toFixed(4):s==="HYPE"?Math.max(0,(t.hlBalance||0)-1).toFixed(2):Math.max(0,t.pmBalance||0).toFixed(2))},className:"absolute right-2 text-[9px] font-semibold px-1.5 py-0.5 rounded bg-[#E7FE55]/20 text-[#E7FE55]",children:"MAX"})]})]}),d.jsxs("button",{onClick:s==="SOL"?y:s==="HYPE"?v:b,disabled:s==="SOL"&&!t.publicKey||s==="HYPE"&&!t.hlPublicKey||s==="POLY"&&!t.pmPublicKey,className:`w-full font-semibold py-2.5 rounded transition-all flex items-center justify-center gap-2 text-xs ${s==="SOL"&&t.publicKey||s==="HYPE"&&t.hlPublicKey||s==="POLY"&&t.pmPublicKey?"bg-[#E7FE55] hover:brightness-110 text-black":"bg-[#1a1b21] text-[#747580] cursor-not-allowed"}`,children:[d.jsx(sk,{size:14}),s==="SOL"?"Withdraw SOL":"Withdraw USDC"]})]})]}),Te=d.jsxs("div",{className:"flex flex-col gap-6 flex-1",children:[d.jsxs("div",{className:"glass-panel glass-panel-solana p-4",children:[d.jsxs("div",{className:"flex items-center gap-2 swiss-label text-[#9b87f5] mb-3",children:[d.jsx("img",{src:sh[0].logoURI,alt:"SOL",className:"w-4 h-4 rounded-full"}),"Solana Vault"]}),t.publicKey?d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"bg-[#0f1015] p-2 rounded border border-[#232328] flex items-center justify-between",children:[d.jsx("code",{className:"text-[10px] text-[#747580] font-mono truncate max-w-[200px]",children:t.publicKey}),d.jsx("button",{onClick:()=>{navigator.clipboard.writeText(t.publicKey),k("Copied!")},className:"text-[#747580] hover:text-white",children:d.jsx(cm,{size:12})})]}),d.jsxs("div",{className:"flex justify-between items-end",children:[d.jsxs("div",{children:[d.jsx("div",{className:"swiss-label",children:"Balance"}),d.jsxs("div",{className:"text-xl font-bold text-white leading-none mt-1",children:[t.solBalance.toFixed(4)," ",d.jsx("span",{className:"text-xs text-[#747580]",children:"SOL"})]})]}),d.jsxs("div",{className:"text-xs text-[#9b87f5] font-mono",children:[" $",(t.solBalance*kc.SOL).toFixed(2)]})]})]}):d.jsxs("div",{className:"space-y-3 p-3 bg-[#0f1015] rounded border border-[#232328]",children:[d.jsx("p",{className:"text-xs text-[#747580]",children:"No Solana wallet found."}),d.jsx("input",{type:"password",value:U,onChange:Me=>$(Me.target.value),className:"w-full bg-[#14151a] border border-[#232328] rounded px-2 py-1.5 text-xs text-white focus:ring-1 focus:ring-[#9b87f5] outline-none",placeholder:"Password..."}),N&&d.jsx("input",{type:"password",value:_,onChange:Me=>L(Me.target.value),className:"w-full bg-[#14151a] border border-[#232328] rounded px-2 py-1.5 text-xs text-white focus:ring-1 focus:ring-[#9b87f5] outline-none font-mono",placeholder:"Private Key..."}),d.jsx("div",{className:"flex gap-2",children:N?d.jsxs(d.Fragment,{children:[d.jsx("button",{onClick:Y,className:"flex-1 bg-[#9b87f5] hover:bg-[#a896f7] text-white text-xs font-semibold py-1.5 rounded",children:"Confirm"}),d.jsx("button",{onClick:()=>R(!1),className:"px-2 py-1.5 text-[#747580] text-xs hover:text-white",children:"Cancel"})]}):d.jsxs(d.Fragment,{children:[d.jsxs("button",{onClick:q,className:"flex-1 bg-[#9b87f5] hover:bg-[#a896f7] text-white text-xs font-semibold py-1.5 rounded flex items-center justify-center gap-1",children:[d.jsx(Cl,{size:12})," New"]}),d.jsxs("button",{onClick:()=>R(!0),className:"flex-1 bg-[#1a1b21] hover:bg-[#232328] text-white text-xs font-semibold py-1.5 rounded flex items-center justify-center gap-1 border border-[#232328]",children:[d.jsx(Ks,{size:12})," Import"]})]})})]})]}),t.publicKey&&d.jsxs("div",{className:"glass-panel glass-panel-solana flex flex-col overflow-hidden flex-1",children:[d.jsxs("div",{className:"px-4 py-3 border-b border-[#232328] flex items-center justify-between bg-[#0f1015]/50",children:[d.jsxs("div",{className:"flex items-center gap-2 swiss-label text-[#9b87f5]",children:[d.jsx($l,{size:12})," Solana Assets"]}),d.jsxs("span",{className:"text-[10px] text-[#747580] font-mono",children:[((at=t.assets)==null?void 0:at.filter(Me=>!Me.isNft&&Me.symbol!=="SOL").length)||0," Assets"]})]}),d.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:d.jsxs("table",{className:"swiss-table w-full",children:[d.jsx("thead",{className:"sticky top-0 bg-[#0f1015]/90 backdrop-blur-sm",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-4",children:"Asset"}),d.jsx("th",{className:"px-4 text-right",children:"Balance"}),d.jsx("th",{className:"px-4 text-right",children:"Value"})]})}),d.jsxs("tbody",{children:[d.jsxs("tr",{children:[d.jsx("td",{className:"px-4",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-6 h-6 rounded bg-[#1a1b21] flex items-center justify-center",children:d.jsx("img",{src:sh[0].logoURI,alt:"SOL",className:"w-4 h-4 rounded-full"})}),d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"text-xs font-semibold text-white leading-none",children:"SOL"}),d.jsx("span",{className:"text-[9px] text-[#747580]",children:"Native"})]})]})}),d.jsx("td",{className:"px-4 text-right font-mono text-xs text-slate-300",children:t.solBalance.toFixed(4)}),d.jsxs("td",{className:"px-4 text-right font-mono text-xs text-[#9b87f5]",children:["$",(t.solBalance*kc.SOL).toFixed(2)]})]}),t.assets&&t.assets.filter(Me=>!Me.isNft&&Me.symbol!=="SOL").length>0?t.assets.filter(Me=>!Me.isNft&&Me.symbol!=="SOL").map((Me,pt)=>d.jsxs("tr",{children:[d.jsx("td",{className:"px-4",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-6 h-6 rounded bg-[#1a1b21] flex items-center justify-center text-[10px] font-bold text-[#747580] border border-[#232328]",children:Me.symbol[0]}),d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"text-xs font-semibold text-white leading-none",children:Me.symbol}),d.jsx("span",{className:"text-[9px] text-[#747580] truncate max-w-[60px]",children:Me.name})]})]})}),d.jsx("td",{className:"px-4 text-right font-mono text-xs text-slate-300",children:(parseFloat(Me.amount)/Math.pow(10,Me.decimals)).toFixed(4)}),d.jsx("td",{className:"px-4 text-right font-mono text-xs text-[#34d399]",children:Me.symbol!=="UNKNOWN"?`$${(parseFloat(Me.amount)/Math.pow(10,Me.decimals)*(kc[Me.symbol]||0)).toFixed(2)}`:"-"})]},pt)):null]})]})})]})]}),Ge=d.jsxs("div",{className:"flex flex-col gap-6 flex-1",children:[d.jsxs("div",{className:"glass-panel glass-panel-hyperliquid p-4",children:[d.jsxs("div",{className:"flex items-center gap-2 swiss-label text-[#34d399] mb-3",children:[d.jsx(yn,{size:14}),"Hyperliquid Vault"]}),t.hlPublicKey?d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"bg-[#0f1015] p-2 rounded border border-[#232328] flex items-center justify-between",children:[d.jsx("code",{className:"text-[10px] text-[#747580] font-mono truncate max-w-[200px]",children:t.hlPublicKey}),d.jsx("button",{onClick:()=>{t.hlPublicKey&&(navigator.clipboard.writeText(t.hlPublicKey),k("Copied!"))},className:"text-[#747580] hover:text-white",children:d.jsx(cm,{size:12})})]}),d.jsxs("div",{className:"flex justify-between items-end",children:[d.jsxs("div",{children:[d.jsx("div",{className:"swiss-label",children:"Balance"}),d.jsxs("div",{className:"text-xl font-bold text-white leading-none mt-1",children:[((rt=t.hlBalance)==null?void 0:rt.toFixed(2))||"0.00"," ",d.jsx("span",{className:"text-xs text-[#747580]",children:"USDC"})]})]}),d.jsx("div",{className:"text-xs text-[#E7FE55] font-mono",children:"Testnet"})]})]}):d.jsxs("div",{className:"space-y-3 p-3 bg-[#0f1015] rounded border border-[#232328]",children:[d.jsx("p",{className:"text-xs text-[#747580]",children:"No Hyperliquid wallet found."}),d.jsx("input",{type:"password",value:W,onChange:Me=>H(Me.target.value),className:"w-full bg-[#14151a] border border-[#232328] rounded px-2 py-1.5 text-xs text-white focus:ring-1 focus:ring-[#E7FE55] outline-none",placeholder:"Password..."}),D&&d.jsx("input",{type:"password",value:V,onChange:Me=>K(Me.target.value),className:"w-full bg-[#14151a] border border-[#232328] rounded px-2 py-1.5 text-xs text-white focus:ring-1 focus:ring-[#E7FE55] outline-none font-mono",placeholder:"PrivKey (0x...)..."}),d.jsx("div",{className:"flex gap-2",children:D?d.jsxs(d.Fragment,{children:[d.jsx("button",{onClick:X,className:"flex-1 bg-[#E7FE55] hover:brightness-110 text-black text-xs font-semibold py-1.5 rounded",children:"Confirm"}),d.jsx("button",{onClick:()=>O(!1),className:"px-2 py-1.5 text-[#747580] text-xs hover:text-white",children:"Cancel"})]}):d.jsxs(d.Fragment,{children:[d.jsxs("button",{onClick:M,className:"flex-1 bg-[#E7FE55] hover:brightness-110 text-black text-xs font-semibold py-1.5 rounded flex items-center justify-center gap-1",children:[d.jsx(Cl,{size:12})," New"]}),d.jsxs("button",{onClick:()=>O(!0),className:"flex-1 bg-[#1a1b21] hover:bg-[#232328] text-white text-xs font-semibold py-1.5 rounded flex items-center justify-center gap-1 border border-[#232328]",children:[d.jsx(Ks,{size:12})," Import"]})]})})]})]}),t.hlPublicKey&&d.jsxs("div",{className:"glass-panel glass-panel-hyperliquid flex flex-col overflow-hidden flex-1",children:[d.jsxs("div",{className:"px-4 py-3 border-b border-[#232328] flex items-center justify-between bg-[#0f1015]/50",children:[d.jsxs("div",{className:"flex items-center gap-2 swiss-label text-[#34d399]",children:[d.jsx(yn,{size:12})," Active Positions"]}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsxs("span",{className:"text-[10px] text-[#747580] font-mono",children:[((Xe=t.hlPositions)==null?void 0:Xe.filter(Me=>parseFloat(Me.position.szi)!==0).length)||0," Open"]}),d.jsxs("button",{onClick:()=>oe(we.HYPERLIQUID),className:"text-[10px] bg-[#E7FE55]/15 hover:bg-[#E7FE55]/25 text-[#E7FE55] border border-[#E7FE55]/30 px-2 py-1 rounded transition-colors flex items-center gap-1",children:[d.jsx(yn,{size:10}),"Details"]})]})]}),d.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:d.jsxs("table",{className:"swiss-table w-full",children:[d.jsx("thead",{className:"sticky top-0 bg-[#0f1015]/90 backdrop-blur-sm",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-3",children:"Ticker"}),d.jsx("th",{className:"px-3",children:"Side"}),d.jsx("th",{className:"px-3 text-right",children:"Size"}),d.jsx("th",{className:"px-3 text-right",children:"PnL"})]})}),d.jsx("tbody",{children:t.hlPositions&&t.hlPositions.filter(Me=>parseFloat(Me.position.szi)!==0).length>0?t.hlPositions.filter(Me=>parseFloat(Me.position.szi)!==0).map((Me,pt)=>{const Kt=parseFloat(Me.position.szi),Re=Kt>0,He=parseFloat(Me.position.unrealizedPnl||"0");return d.jsxs("tr",{children:[d.jsx("td",{className:"px-3",children:d.jsx("span",{className:"text-xs font-semibold text-white",children:Me.position.coin})}),d.jsx("td",{className:"px-3",children:d.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded font-semibold ${Re?"bg-[#34d399]/15 text-[#34d399]":"bg-red-500/15 text-red-400"}`,children:Re?"LONG":"SHORT"})}),d.jsx("td",{className:"px-3 text-right font-mono text-xs text-slate-300",children:Math.abs(Kt).toFixed(4)}),d.jsxs("td",{className:`px-3 text-right font-mono text-xs font-semibold ${He>=0?"text-[#34d399]":"text-red-400"}`,children:[He>=0?"+":"",He.toFixed(2)]})]},`hl-${pt}`)}):d.jsx("tr",{children:d.jsx("td",{colSpan:4,className:"px-4 py-8 text-center text-[#747580] text-xs italic",children:"No active positions."})})})]})})]})]}),We=d.jsxs("div",{className:"flex flex-col gap-6 flex-1",children:[d.jsxs("div",{className:"glass-panel glass-panel-polymarket p-4",children:[d.jsxs("div",{className:"flex items-center gap-2 swiss-label text-[#60a5fa] mb-3",children:[d.jsx(Ml,{size:14}),"Polymarket Vault"]}),t.pmPublicKey?d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"bg-[#0f1015] p-2 rounded border border-[#232328] flex items-center justify-between",children:[d.jsx("code",{className:"text-[10px] text-[#747580] font-mono truncate max-w-[200px]",children:t.pmPublicKey}),d.jsx("button",{onClick:()=>{t.pmPublicKey&&(navigator.clipboard.writeText(t.pmPublicKey),k("Copied!"))},className:"text-[#747580] hover:text-white",children:d.jsx(cm,{size:12})})]}),d.jsxs("div",{className:"flex justify-between items-end",children:[d.jsxs("div",{children:[d.jsx("div",{className:"swiss-label",children:"Balance"}),d.jsxs("div",{className:"text-xl font-bold text-white leading-none mt-1",children:[((ft=t.pmBalance)==null?void 0:ft.toFixed(2))||"0.00"," ",d.jsx("span",{className:"text-xs text-[#747580]",children:"USDC"})]})]}),d.jsx("div",{className:"text-xs text-[#60a5fa] font-mono",children:"Polygon"})]})]}):d.jsxs("div",{className:"space-y-3 p-3 bg-[#0f1015] rounded border border-[#232328]",children:[d.jsx("p",{className:"text-xs text-[#747580]",children:"No Polymarket wallet found."}),d.jsx("input",{type:"password",value:F,onChange:Me=>T(Me.target.value),className:"w-full bg-[#14151a] border border-[#232328] rounded px-2 py-1.5 text-xs text-white focus:ring-1 focus:ring-[#60a5fa] outline-none",placeholder:"Password..."}),B&&d.jsx("input",{type:"password",value:te,onChange:Me=>G(Me.target.value),className:"w-full bg-[#14151a] border border-[#232328] rounded px-2 py-1.5 text-xs text-white focus:ring-1 focus:ring-[#60a5fa] outline-none font-mono",placeholder:"PrivKey (0x...)..."}),d.jsx("div",{className:"flex gap-2",children:B?d.jsxs(d.Fragment,{children:[d.jsx("button",{onClick:se,className:"flex-1 bg-[#60a5fa] hover:bg-[#7db4fb] text-white text-xs font-semibold py-1.5 rounded",children:"Confirm"}),d.jsx("button",{onClick:()=>z(!1),className:"px-2 py-1.5 text-[#747580] text-xs hover:text-white",children:"Cancel"})]}):d.jsxs(d.Fragment,{children:[d.jsxs("button",{onClick:P,className:"flex-1 bg-[#60a5fa] hover:bg-[#7db4fb] text-white text-xs font-semibold py-1.5 rounded flex items-center justify-center gap-1",children:[d.jsx(Cl,{size:12})," New"]}),d.jsxs("button",{onClick:()=>z(!0),className:"flex-1 bg-[#1a1b21] hover:bg-[#232328] text-white text-xs font-semibold py-1.5 rounded flex items-center justify-center gap-1 border border-[#232328]",children:[d.jsx(Ks,{size:12})," Import"]})]})})]})]}),t.pmPublicKey&&d.jsxs("div",{className:"glass-panel glass-panel-polymarket flex flex-col overflow-hidden flex-1",children:[d.jsxs("div",{className:"px-4 py-3 border-b border-[#232328] flex items-center justify-between bg-[#0f1015]/50",children:[d.jsxs("div",{className:"flex items-center gap-2 swiss-label text-[#60a5fa]",children:[d.jsx(Ml,{size:12})," Market Positions"]}),d.jsxs("button",{onClick:()=>oe(we.POLYMARKET_DASHBOARD),className:"text-[10px] bg-[#60a5fa]/15 hover:bg-[#60a5fa]/25 text-[#60a5fa] border border-[#60a5fa]/30 px-2 py-1 rounded transition-colors flex items-center gap-1",children:[d.jsx(Ml,{size:10}),"Details"]})]}),d.jsx("div",{className:"flex-1 flex items-center justify-center p-8",children:d.jsx("p",{className:"text-xs text-[#747580] text-center",children:"View your Polymarket positions in the Polymarket Dealer dashboard."})})]})]}),Qe=d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 flex-1",children:[d.jsxs("div",{className:"glass-panel p-4 flex flex-col",children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsxs("div",{className:"flex items-center gap-2 swiss-label text-white",children:[d.jsx(_w,{size:14}),"Asset Allocation"]}),d.jsxs("div",{className:"text-right",children:[d.jsx("div",{className:"text-[10px] text-[#747580] uppercase tracking-wider",children:"Net Worth"}),d.jsxs("div",{className:"text-lg font-bold font-mono text-white",children:["$",ve.toFixed(2)]})]})]}),d.jsx("div",{className:"flex-1 flex items-center justify-center min-h-[200px]",children:d.jsx(Le,{})})]}),he]});return d.jsx("div",{className:"h-full flex flex-col gap-6 overflow-y-auto custom-scrollbar p-1",children:!t.publicKey&&!t.hlPublicKey?d.jsxs(Mt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-2xl mx-auto relative z-10 flex flex-col items-center justify-center flex-1",children:[d.jsxs(Mt.div,{initial:{scale:.8},animate:{scale:1},transition:{type:"spring",stiffness:200,damping:20},className:"w-20 h-20 glass-panel rounded-full flex items-center justify-center mb-6 border-[#E7FE55]/30 relative group",children:[d.jsx("div",{className:"absolute inset-0 bg-[#E7FE55]/5 rounded-full blur-xl group-hover:bg-[#E7FE55]/10 transition-colors"}),d.jsx(uh,{size:32,className:"text-[#E7FE55] relative z-10"})]}),d.jsx("h2",{className:"text-3xl font-bold text-white mb-2 text-center tracking-tight",children:"Configure Your Vault"}),d.jsx("p",{className:"text-[#747580] text-center mb-8 text-sm",children:"Securely manage your assets across multiple networks."}),d.jsxs("div",{className:"w-full grid grid-cols-1 md:grid-cols-3 gap-6",children:[d.jsxs("div",{className:"glass-panel glass-panel-solana p-6 space-y-4 border-[#9b87f5]/20 transition-transform duration-200 hover:-translate-y-1",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[d.jsx("div",{className:"w-10 h-10 bg-[#9b87f5]/10 rounded-lg flex items-center justify-center border border-[#9b87f5]/20",children:d.jsx("img",{src:sh[0].logoURI,alt:"SOL",className:"w-5 h-5 rounded-full"})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-white font-semibold",children:"Solana"}),d.jsx("span",{className:"text-[10px] text-[#9b87f5] uppercase tracking-widest font-bold",children:"Devnet"})]})]}),d.jsx("input",{type:"password",value:U,onChange:Me=>$(Me.target.value),className:"w-full bg-[#0f1015]/50 border border-[#232328] rounded-md px-3 py-3 text-white text-sm focus:ring-1 focus:ring-[#9b87f5]/50 outline-none transition-all placeholder:text-[#747580]",placeholder:"Wallet Password"}),N&&d.jsx("input",{type:"password",value:_,onChange:Me=>L(Me.target.value),className:"w-full bg-[#0f1015]/50 border border-[#232328] rounded-md px-3 py-3 text-white text-sm focus:ring-1 focus:ring-[#9b87f5]/50 outline-none transition-all font-mono placeholder:text-[#747580]",placeholder:"Private Key (Base58)"}),d.jsx("div",{className:"flex gap-2",children:N?d.jsxs(d.Fragment,{children:[d.jsxs("button",{onClick:Y,className:"flex-1 bg-[#9b87f5] hover:bg-[#a896f7] text-white font-bold py-3 rounded-md transition-all flex items-center justify-center gap-2 text-xs uppercase tracking-wider",children:[d.jsx(Ks,{size:14})," Import"]}),d.jsx("button",{onClick:()=>R(!1),className:"px-3 py-3 text-[#747580] hover:text-white text-xs font-semibold",children:"Cancel"})]}):d.jsxs(d.Fragment,{children:[d.jsxs("button",{onClick:q,className:"flex-1 bg-[#9b87f5] hover:bg-[#a896f7] text-white font-bold py-3 rounded-md transition-all flex items-center justify-center gap-2 text-xs uppercase tracking-wider",children:[d.jsx(Cl,{size:14})," Create"]}),d.jsxs("button",{onClick:()=>R(!0),className:"flex-1 bg-[#1a1b21] hover:bg-[#232328] text-white font-bold py-3 rounded-md transition-all flex items-center justify-center gap-2 text-xs uppercase tracking-wider border border-[#232328]",children:[d.jsx(Ks,{size:14})," Import"]})]})})]}),d.jsxs("div",{className:"glass-panel p-6 space-y-4 border-[#34d399]/20 transition-transform duration-200 hover:-translate-y-1",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[d.jsx("div",{className:"w-10 h-10 bg-[#34d399]/10 rounded-lg flex items-center justify-center border border-[#34d399]/20",children:d.jsx(yn,{size:20,className:"text-[#34d399]"})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-white font-semibold",children:"Hyperliquid"}),d.jsx("span",{className:"text-[10px] text-[#34d399] uppercase tracking-widest font-bold",children:"Testnet"})]})]}),d.jsx("input",{type:"password",value:W,onChange:Me=>H(Me.target.value),className:"w-full bg-[#0f1015]/50 border border-[#232328] rounded-md px-3 py-3 text-white text-sm focus:ring-1 focus:ring-[#34d399]/50 outline-none transition-all placeholder:text-[#747580]",placeholder:"Wallet Password"}),D&&d.jsx("input",{type:"password",value:V,onChange:Me=>K(Me.target.value),className:"w-full bg-[#0f1015]/50 border border-[#232328] rounded-md px-3 py-3 text-white text-sm focus:ring-1 focus:ring-[#34d399]/50 outline-none transition-all font-mono placeholder:text-[#747580]",placeholder:"Private Key (0x...)"}),d.jsx("div",{className:"flex gap-2",children:D?d.jsxs(d.Fragment,{children:[d.jsxs("button",{onClick:X,className:"flex-1 bg-[#34d399] hover:bg-[#4ade80] text-white font-bold py-3 rounded-md transition-all flex items-center justify-center gap-2 text-xs uppercase tracking-wider",children:[d.jsx(Ks,{size:14})," Import"]}),d.jsx("button",{onClick:()=>O(!1),className:"px-3 py-3 text-[#747580] hover:text-white text-xs font-semibold",children:"Cancel"})]}):d.jsxs(d.Fragment,{children:[d.jsxs("button",{onClick:M,className:"flex-1 bg-[#34d399] hover:bg-[#4ade80] text-white font-bold py-3 rounded-md transition-all flex items-center justify-center gap-2 text-xs uppercase tracking-wider",children:[d.jsx(Cl,{size:14})," Create"]}),d.jsxs("button",{onClick:()=>O(!0),className:"flex-1 bg-[#1a1b21] hover:bg-[#232328] text-white font-bold py-3 rounded-md transition-all flex items-center justify-center gap-2 text-xs uppercase tracking-wider border border-[#232328]",children:[d.jsx(Ks,{size:14})," Import"]})]})})]}),d.jsxs("div",{className:"glass-panel glass-panel-polymarket p-6 space-y-4 border-[#60a5fa]/20 transition-transform duration-200 hover:-translate-y-1",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[d.jsx("div",{className:"w-10 h-10 bg-[#60a5fa]/10 rounded-lg flex items-center justify-center border border-[#60a5fa]/20",children:d.jsx(Ml,{size:20,className:"text-[#60a5fa]"})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-white font-semibold",children:"Polymarket"}),d.jsx("span",{className:"text-[10px] text-[#60a5fa] uppercase tracking-widest font-bold",children:"Polygon"})]})]}),d.jsx("input",{type:"password",value:F,onChange:Me=>T(Me.target.value),className:"w-full bg-[#0f1015]/50 border border-[#232328] rounded-md px-3 py-3 text-white text-sm focus:ring-1 focus:ring-[#60a5fa]/50 outline-none transition-all placeholder:text-[#747580]",placeholder:"Wallet Password"}),B&&d.jsx("input",{type:"password",value:te,onChange:Me=>G(Me.target.value),className:"w-full bg-[#0f1015]/50 border border-[#232328] rounded-md px-3 py-3 text-white text-sm focus:ring-1 focus:ring-[#60a5fa]/50 outline-none transition-all font-mono placeholder:text-[#747580]",placeholder:"Private Key (0x...)"}),d.jsx("div",{className:"flex gap-2",children:B?d.jsxs(d.Fragment,{children:[d.jsxs("button",{onClick:se,className:"flex-1 bg-[#60a5fa] hover:bg-[#7db4fb] text-white font-bold py-3 rounded-md transition-all flex items-center justify-center gap-2 text-xs uppercase tracking-wider",children:[d.jsx(Ks,{size:14})," Import"]}),d.jsx("button",{onClick:()=>z(!1),className:"px-3 py-3 text-[#747580] hover:text-white text-xs font-semibold",children:"Cancel"})]}):d.jsxs(d.Fragment,{children:[d.jsxs("button",{onClick:P,className:"flex-1 bg-[#60a5fa] hover:bg-[#7db4fb] text-white font-bold py-3 rounded-md transition-all flex items-center justify-center gap-2 text-xs uppercase tracking-wider",children:[d.jsx(Cl,{size:14})," Create"]}),d.jsxs("button",{onClick:()=>z(!0),className:"flex-1 bg-[#1a1b21] hover:bg-[#232328] text-white font-bold py-3 rounded-md transition-all flex items-center justify-center gap-2 text-xs uppercase tracking-wider border border-[#232328]",children:[d.jsx(Ks,{size:14})," Import"]})]})})]})]}),d.jsx("p",{className:"text-xs text-[#747580] mt-8 text-center max-w-sm",children:"Wallets are stored locally and encrypted. Never share your private keys or password."})]}):t.isUnlocked?d.jsxs("div",{className:"flex flex-col gap-6 flex-1",children:[me==="main"&&Qe,me==="solana"&&Te,me==="hyperliquid"&&Ge,me==="polymarket"&&We]}):d.jsxs(Mt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.4},className:"max-w-md mx-auto relative z-10 flex flex-col items-center justify-center min-h-[calc(100vh-120px)] w-full",children:[d.jsxs(Mt.div,{animate:{rotate:[0,-10,10,-10,10,0]},transition:{delay:.5,duration:.5,ease:"easeInOut"},className:"w-24 h-24 glass-panel rounded-full flex items-center justify-center mb-8 border-[#E7FE55]/30 relative",children:[d.jsx("div",{className:"absolute inset-0 bg-[#E7FE55]/10 rounded-full blur-2xl animate-pulse"}),d.jsx(uh,{size:40,className:"text-[#E7FE55] relative z-10"})]}),d.jsx("h2",{className:"text-3xl font-bold text-white mb-2 text-center tracking-tight",children:"Vault Locked"}),d.jsx("p",{className:"text-[#747580] text-center mb-10 text-sm",children:"Authentication required to access your assets."}),d.jsxs("div",{className:"w-full glass-panel p-8 space-y-6 border-[#E7FE55]/10 shadow-2xl",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"swiss-label px-1",children:"Security Password"}),d.jsx("input",{type:"password",value:e,onChange:Me=>n(Me.target.value),className:"w-full bg-[#0f1015]/80 border border-[#232328] rounded-md px-4 py-4 text-white focus:ring-1 focus:ring-[#E7FE55]/50 outline-none transition-all placeholder:text-[#333540] text-lg font-mono",placeholder:"",onKeyDown:Me=>Me.key==="Enter"&&m()})]}),d.jsxs("button",{onClick:m,className:"w-full bg-[#E7FE55] hover:brightness-110 active:scale-[0.98] text-black font-bold py-4 rounded-md transition-all flex items-center justify-center gap-2 text-sm uppercase tracking-widest",children:[d.jsx(ere,{size:18})," Unlock Vault"]})]})]})})};function SKe(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const AKe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,TKe=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,kKe={};function MJ(t,e){return(kKe.jsx?TKe:AKe).test(t)}const NKe=/[ \t\n\f\r]/g;function CKe(t){return typeof t=="object"?t.type==="text"?LJ(t.value):!1:LJ(t)}function LJ(t){return t.replace(NKe,"")===""}class AE{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}}AE.prototype.normal={};AE.prototype.property={};AE.prototype.space=void 0;function nfe(t,e){const n={},r={};for(const i of t)Object.assign(n,i.property),Object.assign(r,i.normal);return new AE(n,r,e)}function OL(t){return t.toLowerCase()}class Po{constructor(e,n){this.attribute=n,this.property=e}}Po.prototype.attribute="";Po.prototype.booleanish=!1;Po.prototype.boolean=!1;Po.prototype.commaOrSpaceSeparated=!1;Po.prototype.commaSeparated=!1;Po.prototype.defined=!1;Po.prototype.mustUseProperty=!1;Po.prototype.number=!1;Po.prototype.overloadedBoolean=!1;Po.prototype.property="";Po.prototype.spaceSeparated=!1;Po.prototype.space=void 0;let PKe=0;const dn=Ym(),ui=Ym(),ML=Ym(),ct=Ym(),hr=Ym(),uy=Ym(),zo=Ym();function Ym(){return 2**++PKe}const LL=Object.freeze(Object.defineProperty({__proto__:null,boolean:dn,booleanish:ui,commaOrSpaceSeparated:zo,commaSeparated:uy,number:ct,overloadedBoolean:ML,spaceSeparated:hr},Symbol.toStringTag,{value:"Module"})),qO=Object.keys(LL);class bB extends Po{constructor(e,n,r,i){let s=-1;if(super(e,n),DJ(this,"space",i),typeof r=="number")for(;++s<qO.length;){const o=qO[s];DJ(this,qO[s],(r&LL[o])===LL[o])}}}bB.prototype.defined=!0;function DJ(t,e,n){n&&(t[e]=n)}function mv(t){const e={},n={};for(const[r,i]of Object.entries(t.properties)){const s=new bB(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),e[r]=s,n[OL(r)]=r,n[OL(s.attribute)]=r}return new AE(e,n,t.space)}const rfe=mv({properties:{ariaActiveDescendant:null,ariaAtomic:ui,ariaAutoComplete:null,ariaBusy:ui,ariaChecked:ui,ariaColCount:ct,ariaColIndex:ct,ariaColSpan:ct,ariaControls:hr,ariaCurrent:null,ariaDescribedBy:hr,ariaDetails:null,ariaDisabled:ui,ariaDropEffect:hr,ariaErrorMessage:null,ariaExpanded:ui,ariaFlowTo:hr,ariaGrabbed:ui,ariaHasPopup:null,ariaHidden:ui,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:hr,ariaLevel:ct,ariaLive:null,ariaModal:ui,ariaMultiLine:ui,ariaMultiSelectable:ui,ariaOrientation:null,ariaOwns:hr,ariaPlaceholder:null,ariaPosInSet:ct,ariaPressed:ui,ariaReadOnly:ui,ariaRelevant:null,ariaRequired:ui,ariaRoleDescription:hr,ariaRowCount:ct,ariaRowIndex:ct,ariaRowSpan:ct,ariaSelected:ui,ariaSetSize:ct,ariaSort:null,ariaValueMax:ct,ariaValueMin:ct,ariaValueNow:ct,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function ife(t,e){return e in t?t[e]:e}function sfe(t,e){return ife(t,e.toLowerCase())}const _Ke=mv({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:uy,acceptCharset:hr,accessKey:hr,action:null,allow:null,allowFullScreen:dn,allowPaymentRequest:dn,allowUserMedia:dn,alt:null,as:null,async:dn,autoCapitalize:null,autoComplete:hr,autoFocus:dn,autoPlay:dn,blocking:hr,capture:null,charSet:null,checked:dn,cite:null,className:hr,cols:ct,colSpan:null,content:null,contentEditable:ui,controls:dn,controlsList:hr,coords:ct|uy,crossOrigin:null,data:null,dateTime:null,decoding:null,default:dn,defer:dn,dir:null,dirName:null,disabled:dn,download:ML,draggable:ui,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:dn,formTarget:null,headers:hr,height:ct,hidden:ML,high:ct,href:null,hrefLang:null,htmlFor:hr,httpEquiv:hr,id:null,imageSizes:null,imageSrcSet:null,inert:dn,inputMode:null,integrity:null,is:null,isMap:dn,itemId:null,itemProp:hr,itemRef:hr,itemScope:dn,itemType:hr,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:dn,low:ct,manifest:null,max:null,maxLength:ct,media:null,method:null,min:null,minLength:ct,multiple:dn,muted:dn,name:null,nonce:null,noModule:dn,noValidate:dn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:dn,optimum:ct,pattern:null,ping:hr,placeholder:null,playsInline:dn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:dn,referrerPolicy:null,rel:hr,required:dn,reversed:dn,rows:ct,rowSpan:ct,sandbox:hr,scope:null,scoped:dn,seamless:dn,selected:dn,shadowRootClonable:dn,shadowRootDelegatesFocus:dn,shadowRootMode:null,shape:null,size:ct,sizes:null,slot:null,span:ct,spellCheck:ui,src:null,srcDoc:null,srcLang:null,srcSet:null,start:ct,step:null,style:null,tabIndex:ct,target:null,title:null,translate:null,type:null,typeMustMatch:dn,useMap:null,value:ui,width:ct,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:hr,axis:null,background:null,bgColor:null,border:ct,borderColor:null,bottomMargin:ct,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:dn,declare:dn,event:null,face:null,frame:null,frameBorder:null,hSpace:ct,leftMargin:ct,link:null,longDesc:null,lowSrc:null,marginHeight:ct,marginWidth:ct,noResize:dn,noHref:dn,noShade:dn,noWrap:dn,object:null,profile:null,prompt:null,rev:null,rightMargin:ct,rules:null,scheme:null,scrolling:ui,standby:null,summary:null,text:null,topMargin:ct,valueType:null,version:null,vAlign:null,vLink:null,vSpace:ct,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:dn,disableRemotePlayback:dn,prefix:null,property:null,results:ct,security:null,unselectable:null},space:"html",transform:sfe}),IKe=mv({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:zo,accentHeight:ct,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:ct,amplitude:ct,arabicForm:null,ascent:ct,attributeName:null,attributeType:null,azimuth:ct,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:ct,by:null,calcMode:null,capHeight:ct,className:hr,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:ct,diffuseConstant:ct,direction:null,display:null,dur:null,divisor:ct,dominantBaseline:null,download:dn,dx:null,dy:null,edgeMode:null,editable:null,elevation:ct,enableBackground:null,end:null,event:null,exponent:ct,externalResourcesRequired:null,fill:null,fillOpacity:ct,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:uy,g2:uy,glyphName:uy,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:ct,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:ct,horizOriginX:ct,horizOriginY:ct,id:null,ideographic:ct,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:ct,k:ct,k1:ct,k2:ct,k3:ct,k4:ct,kernelMatrix:zo,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:ct,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:ct,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:ct,overlineThickness:ct,paintOrder:null,panose1:null,path:null,pathLength:ct,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:hr,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:ct,pointsAtY:ct,pointsAtZ:ct,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:zo,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:zo,rev:zo,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:zo,requiredFeatures:zo,requiredFonts:zo,requiredFormats:zo,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:ct,specularExponent:ct,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:ct,strikethroughThickness:ct,string:null,stroke:null,strokeDashArray:zo,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:ct,strokeOpacity:ct,strokeWidth:null,style:null,surfaceScale:ct,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:zo,tabIndex:ct,tableValues:null,target:null,targetX:ct,targetY:ct,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:zo,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:ct,underlineThickness:ct,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:ct,values:null,vAlphabetic:ct,vMathematical:ct,vectorEffect:null,vHanging:ct,vIdeographic:ct,version:null,vertAdvY:ct,vertOriginX:ct,vertOriginY:ct,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:ct,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:ife}),ofe=mv({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),afe=mv({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:sfe}),lfe=mv({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),RKe={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},OKe=/[A-Z]/g,jJ=/-[a-z]/g,MKe=/^data[-\w.:]+$/i;function LKe(t,e){const n=OL(e);let r=e,i=Po;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&MKe.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(jJ,jKe);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!jJ.test(s)){let o=s.replace(OKe,DKe);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=bB}return new i(r,e)}function DKe(t){return"-"+t.toLowerCase()}function jKe(t){return t.charAt(1).toUpperCase()}const BKe=nfe([rfe,_Ke,ofe,afe,lfe],"html"),wB=nfe([rfe,IKe,ofe,afe,lfe],"svg");function UKe(t){return t.join(" ").trim()}var sg={},GO,BJ;function FKe(){if(BJ)return GO;BJ=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,a=/^\s+|\s+$/g,l=`
`,c="/",u="*",h="",m="comment",g="declaration";function y(b,w){if(typeof b!="string")throw new TypeError("First argument must be a string");if(!b)return[];w=w||{};var k=1,N=1;function R(T){var _=T.match(e);_&&(k+=_.length);var L=T.lastIndexOf(l);N=~L?T.length-L:N+T.length}function D(){var T={line:k,column:N};return function(_){return _.position=new O(T),U(),_}}function O(T){this.start=T,this.end={line:k,column:N},this.source=w.source}O.prototype.content=b;function B(T){var _=new Error(w.source+":"+k+":"+N+": "+T);if(_.reason=T,_.filename=w.source,_.line=k,_.column=N,_.source=b,!w.silent)throw _}function z(T){var _=T.exec(b);if(_){var L=_[0];return R(L),b=b.slice(L.length),_}}function U(){z(n)}function $(T){var _;for(T=T||[];_=W();)_!==!1&&T.push(_);return T}function W(){var T=D();if(!(c!=b.charAt(0)||u!=b.charAt(1))){for(var _=2;h!=b.charAt(_)&&(u!=b.charAt(_)||c!=b.charAt(_+1));)++_;if(_+=2,h===b.charAt(_-1))return B("End of comment missing");var L=b.slice(2,_-2);return N+=2,R(L),b=b.slice(_),N+=2,T({type:m,comment:L})}}function H(){var T=D(),_=z(r);if(_){if(W(),!z(i))return B("property missing ':'");var L=z(s),V=T({type:g,property:v(_[0].replace(t,h)),value:L?v(L[0].replace(t,h)):h});return z(o),V}}function F(){var T=[];$(T);for(var _;_=H();)_!==!1&&(T.push(_),$(T));return T}return U(),F()}function v(b){return b?b.replace(a,h):h}return GO=y,GO}var UJ;function $Ke(){if(UJ)return sg;UJ=1;var t=sg&&sg.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(sg,"__esModule",{value:!0}),sg.default=n;const e=t(FKe());function n(r,i){let s=null;if(!r||typeof r!="string")return s;const o=(0,e.default)(r),a=typeof i=="function";return o.forEach(l=>{if(l.type!=="declaration")return;const{property:c,value:u}=l;a?i(c,u,l):u&&(s=s||{},s[c]=u)}),s}return sg}var Ob={},FJ;function zKe(){if(FJ)return Ob;FJ=1,Object.defineProperty(Ob,"__esModule",{value:!0}),Ob.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,s=function(c){return!c||n.test(c)||t.test(c)},o=function(c,u){return u.toUpperCase()},a=function(c,u){return"".concat(u,"-")},l=function(c,u){return u===void 0&&(u={}),s(c)?c:(c=c.toLowerCase(),u.reactCompat?c=c.replace(i,a):c=c.replace(r,a),c.replace(e,o))};return Ob.camelCase=l,Ob}var Mb,$J;function VKe(){if($J)return Mb;$J=1;var t=Mb&&Mb.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},e=t($Ke()),n=zKe();function r(i,s){var o={};return!i||typeof i!="string"||(0,e.default)(i,function(a,l){a&&l&&(o[(0,n.camelCase)(a,s)]=l)}),o}return r.default=r,Mb=r,Mb}var HKe=VKe();const qKe=gs(HKe),cfe=ufe("end"),EB=ufe("start");function ufe(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function GKe(t){const e=EB(t),n=cfe(t);if(e&&n)return{start:e,end:n}}function pw(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?zJ(t.position):"start"in t||"end"in t?zJ(t):"line"in t||"column"in t?DL(t):""}function DL(t){return VJ(t&&t.line)+":"+VJ(t&&t.column)}function zJ(t){return DL(t&&t.start)+"-"+DL(t&&t.end)}function VJ(t){return t&&typeof t=="number"?t:1}class zs extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof e=="string"?i=e:!s.cause&&e&&(o=!0,i=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof r=="string"){const l=r.indexOf(":");l===-1?s.ruleId=r:(s.source=r.slice(0,l),s.ruleId=r.slice(l+1))}if(!s.place&&s.ancestors&&s.ancestors){const l=s.ancestors[s.ancestors.length-1];l&&(s.place=l.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=a?a.line:void 0,this.name=pw(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}zs.prototype.file="";zs.prototype.name="";zs.prototype.reason="";zs.prototype.message="";zs.prototype.stack="";zs.prototype.column=void 0;zs.prototype.line=void 0;zs.prototype.ancestors=void 0;zs.prototype.cause=void 0;zs.prototype.fatal=void 0;zs.prototype.place=void 0;zs.prototype.ruleId=void 0;zs.prototype.source=void 0;const SB={}.hasOwnProperty,KKe=new Map,WKe=/[A-Z]/g,YKe=new Set(["table","tbody","thead","tfoot","tr"]),JKe=new Set(["td","th"]),dfe="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function XKe(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=sWe(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=iWe(n,e.jsx,e.jsxs)}const i={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?wB:BKe,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=ffe(i,t,void 0);return s&&typeof s!="string"?s:i.create(t,i.Fragment,{children:s||void 0},void 0)}function ffe(t,e,n){if(e.type==="element")return QKe(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return ZKe(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return tWe(t,e,n);if(e.type==="mdxjsEsm")return eWe(t,e);if(e.type==="root")return nWe(t,e,n);if(e.type==="text")return rWe(t,e)}function QKe(t,e,n){const r=t.schema;let i=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=wB,t.schema=i),t.ancestors.push(e);const s=pfe(t,e.tagName,!1),o=oWe(t,e);let a=TB(t,e);return YKe.has(e.tagName)&&(a=a.filter(function(l){return typeof l=="string"?!CKe(l):!0})),hfe(t,o,s,e),AB(o,a),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function ZKe(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}m1(t,e.position)}function eWe(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);m1(t,e.position)}function tWe(t,e,n){const r=t.schema;let i=r;e.name==="svg"&&r.space==="html"&&(i=wB,t.schema=i),t.ancestors.push(e);const s=e.name===null?t.Fragment:pfe(t,e.name,!0),o=aWe(t,e),a=TB(t,e);return hfe(t,o,s,e),AB(o,a),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function nWe(t,e,n){const r={};return AB(r,TB(t,e)),t.create(e,t.Fragment,r,n)}function rWe(t,e){return e.value}function hfe(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function AB(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function iWe(t,e,n){return r;function r(i,s,o,a){const c=Array.isArray(o.children)?n:e;return a?c(s,o,a):c(s,o)}}function sWe(t,e){return n;function n(r,i,s,o){const a=Array.isArray(s.children),l=EB(r);return e(i,s,o,a,{columnNumber:l?l.column-1:void 0,fileName:t,lineNumber:l?l.line:void 0},void 0)}}function oWe(t,e){const n={};let r,i;for(i in e.properties)if(i!=="children"&&SB.call(e.properties,i)){const s=lWe(t,i,e.properties[i]);if(s){const[o,a]=s;t.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&JKe.has(e.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function aWe(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,t.evaluater.evaluateExpression(a.argument))}else m1(t,e.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const a=r.value.data.estree.body[0];a.type,s=t.evaluater.evaluateExpression(a.expression)}else m1(t,e.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function TB(t,e){const n=[];let r=-1;const i=t.passKeys?new Map:KKe;for(;++r<e.children.length;){const s=e.children[r];let o;if(t.passKeys){const l=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(l){const c=i.get(l)||0;o=l+"-"+c,i.set(l,c+1)}}const a=ffe(t,s,o);a!==void 0&&n.push(a)}return n}function lWe(t,e,n){const r=LKe(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?SKe(n):UKe(n)),r.property==="style"){let i=typeof n=="object"?n:cWe(t,String(n));return t.stylePropertyNameCase==="css"&&(i=uWe(i)),["style",i]}return[t.elementAttributeNameCase==="react"&&r.space?RKe[r.property]||r.property:r.attribute,n]}}function cWe(t,e){try{return qKe(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,i=new zs("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=t.filePath||void 0,i.url=dfe+"#cannot-parse-style-attribute",i}}function pfe(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const i=e.split(".");let s=-1,o;for(;++s<i.length;){const a=MJ(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=MJ(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const i=r.value;return SB.call(t.components,i)?t.components[i]:i}if(t.evaluater)return t.evaluater.evaluateExpression(r);m1(t)}function m1(t,e){const n=new zs("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=dfe+"#cannot-handle-mdx-estrees-without-createevaluater",n}function uWe(t){const e={};let n;for(n in t)SB.call(t,n)&&(e[dWe(n)]=t[n]);return e}function dWe(t){let e=t.replace(WKe,fWe);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function fWe(t){return"-"+t.toLowerCase()}const KO={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},hWe={};function kB(t,e){const n=hWe,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return mfe(t,r,i)}function mfe(t,e,n){if(pWe(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return HJ(t.children,e,n)}return Array.isArray(t)?HJ(t,e,n):""}function HJ(t,e,n){const r=[];let i=-1;for(;++i<t.length;)r[i]=mfe(t[i],e,n);return r.join("")}function pWe(t){return!!(t&&typeof t=="object")}const qJ=document.createElement("i");function NB(t){const e="&"+t+";";qJ.innerHTML=e;const n=qJ.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function sa(t,e,n,r){const i=t.length;let s=0,o;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(e,0),t.splice(...o),s+=1e4,e+=1e4}function Ha(t,e){return t.length>0?(sa(t,t.length,0,e),t):e}const GJ={}.hasOwnProperty;function gfe(t){const e={};let n=-1;for(;++n<t.length;)mWe(e,t[n]);return e}function mWe(t,e){let n;for(n in e){const i=(GJ.call(t,n)?t[n]:void 0)||(t[n]={}),s=e[n];let o;if(s)for(o in s){GJ.call(i,o)||(i[o]=[]);const a=s[o];gWe(i[o],Array.isArray(a)?a:a?[a]:[])}}}function gWe(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);sa(t,0,0,r)}function yfe(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Bl(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Js=Ph(/[A-Za-z]/),Ls=Ph(/[\dA-Za-z]/),yWe=Ph(/[#-'*+\--9=?A-Z^-~]/);function b2(t){return t!==null&&(t<32||t===127)}const jL=Ph(/\d/),xWe=Ph(/[\dA-Fa-f]/),vWe=Ph(/[!-/:-@[-`{-~]/);function Wt(t){return t!==null&&t<-2}function lr(t){return t!==null&&(t<0||t===32)}function An(t){return t===-2||t===-1||t===32}const zC=Ph(new RegExp("\\p{P}|\\p{S}","u")),Lm=Ph(/\s/);function Ph(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function gv(t){const e=[];let n=-1,r=0,i=0;for(;++n<t.length;){const s=t.charCodeAt(n);let o="";if(s===37&&Ls(t.charCodeAt(n+1))&&Ls(t.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=t.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(e.push(t.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return e.join("")+t.slice(r)}function In(t,e,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(l){return An(l)?(t.enter(n),a(l)):e(l)}function a(l){return An(l)&&s++<i?(t.consume(l),a):(t.exit(n),e(l))}}const bWe={tokenize:wWe};function wWe(t){const e=t.attempt(this.parser.constructs.contentInitial,r,i);let n;return e;function r(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),In(t,e,"linePrefix")}function i(a){return t.enter("paragraph"),s(a)}function s(a){const l=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,o(a)}function o(a){if(a===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(a);return}return Wt(a)?(t.consume(a),t.exit("chunkText"),s):(t.consume(a),o)}}const EWe={tokenize:SWe},KJ={tokenize:AWe};function SWe(t){const e=this,n=[];let r=0,i,s,o;return a;function a(N){if(r<n.length){const R=n[r];return e.containerState=R[1],t.attempt(R[0].continuation,l,c)(N)}return c(N)}function l(N){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&k();const R=e.events.length;let D=R,O;for(;D--;)if(e.events[D][0]==="exit"&&e.events[D][1].type==="chunkFlow"){O=e.events[D][1].end;break}w(r);let B=R;for(;B<e.events.length;)e.events[B][1].end={...O},B++;return sa(e.events,D+1,0,e.events.slice(R)),e.events.length=B,c(N)}return a(N)}function c(N){if(r===n.length){if(!i)return m(N);if(i.currentConstruct&&i.currentConstruct.concrete)return y(N);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(KJ,u,h)(N)}function u(N){return i&&k(),w(r),m(N)}function h(N){return e.parser.lazy[e.now().line]=r!==n.length,o=e.now().offset,y(N)}function m(N){return e.containerState={},t.attempt(KJ,g,y)(N)}function g(N){return r++,n.push([e.currentConstruct,e.containerState]),m(N)}function y(N){if(N===null){i&&k(),w(0),t.consume(N);return}return i=i||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),v(N)}function v(N){if(N===null){b(t.exit("chunkFlow"),!0),w(0),t.consume(N);return}return Wt(N)?(t.consume(N),b(t.exit("chunkFlow")),r=0,e.interrupt=void 0,a):(t.consume(N),v)}function b(N,R){const D=e.sliceStream(N);if(R&&D.push(null),N.previous=s,s&&(s.next=N),s=N,i.defineSkip(N.start),i.write(D),e.parser.lazy[N.start.line]){let O=i.events.length;for(;O--;)if(i.events[O][1].start.offset<o&&(!i.events[O][1].end||i.events[O][1].end.offset>o))return;const B=e.events.length;let z=B,U,$;for(;z--;)if(e.events[z][0]==="exit"&&e.events[z][1].type==="chunkFlow"){if(U){$=e.events[z][1].end;break}U=!0}for(w(r),O=B;O<e.events.length;)e.events[O][1].end={...$},O++;sa(e.events,z+1,0,e.events.slice(B)),e.events.length=O}}function w(N){let R=n.length;for(;R-- >N;){const D=n[R];e.containerState=D[1],D[0].exit.call(e,t)}n.length=N}function k(){i.write([null]),s=void 0,i=void 0,e.containerState._closeFlow=void 0}}function AWe(t,e,n){return In(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Rx(t){if(t===null||lr(t)||Lm(t))return 1;if(zC(t))return 2}function VC(t,e,n){const r=[];let i=-1;for(;++i<t.length;){const s=t[i].resolveAll;s&&!r.includes(s)&&(e=s(e,n),r.push(s))}return e}const BL={name:"attention",resolveAll:TWe,tokenize:kWe};function TWe(t,e){let n=-1,r,i,s,o,a,l,c,u;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;l=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const h={...t[r][1].end},m={...t[n][1].start};WJ(h,-l),WJ(m,l),o={type:l>1?"strongSequence":"emphasisSequence",start:h,end:{...t[r][1].end}},a={type:l>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:m},s={type:l>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},i={type:l>1?"strong":"emphasis",start:{...o.start},end:{...a.end}},t[r][1].end={...o.start},t[n][1].start={...a.end},c=[],t[r][1].end.offset-t[r][1].start.offset&&(c=Ha(c,[["enter",t[r][1],e],["exit",t[r][1],e]])),c=Ha(c,[["enter",i,e],["enter",o,e],["exit",o,e],["enter",s,e]]),c=Ha(c,VC(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),c=Ha(c,[["exit",s,e],["enter",a,e],["exit",a,e],["exit",i,e]]),t[n][1].end.offset-t[n][1].start.offset?(u=2,c=Ha(c,[["enter",t[n][1],e],["exit",t[n][1],e]])):u=0,sa(t,r-1,n-r+3,c),n=r+c.length-u-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function kWe(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Rx(r);let s;return o;function o(l){return s=l,t.enter("attentionSequence"),a(l)}function a(l){if(l===s)return t.consume(l),a;const c=t.exit("attentionSequence"),u=Rx(l),h=!u||u===2&&i||n.includes(l),m=!i||i===2&&u||n.includes(r);return c._open=!!(s===42?h:h&&(i||!m)),c._close=!!(s===42?m:m&&(u||!h)),e(l)}}function WJ(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const NWe={name:"autolink",tokenize:CWe};function CWe(t,e,n){let r=0;return i;function i(g){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(g){return Js(g)?(t.consume(g),o):g===64?n(g):c(g)}function o(g){return g===43||g===45||g===46||Ls(g)?(r=1,a(g)):c(g)}function a(g){return g===58?(t.consume(g),r=0,l):(g===43||g===45||g===46||Ls(g))&&r++<32?(t.consume(g),a):(r=0,c(g))}function l(g){return g===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.exit("autolink"),e):g===null||g===32||g===60||b2(g)?n(g):(t.consume(g),l)}function c(g){return g===64?(t.consume(g),u):yWe(g)?(t.consume(g),c):n(g)}function u(g){return Ls(g)?h(g):n(g)}function h(g){return g===46?(t.consume(g),r=0,u):g===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.exit("autolink"),e):m(g)}function m(g){if((g===45||Ls(g))&&r++<63){const y=g===45?m:h;return t.consume(g),y}return n(g)}}const TE={partial:!0,tokenize:PWe};function PWe(t,e,n){return r;function r(s){return An(s)?In(t,i,"linePrefix")(s):i(s)}function i(s){return s===null||Wt(s)?e(s):n(s)}}const xfe={continuation:{tokenize:IWe},exit:RWe,name:"blockQuote",tokenize:_We};function _We(t,e,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(t.enter("blockQuote",{_container:!0}),a.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),s}return n(o)}function s(o){return An(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function IWe(t,e,n){const r=this;return i;function i(o){return An(o)?In(t,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return t.attempt(xfe,e,n)(o)}}function RWe(t){t.exit("blockQuote")}const vfe={name:"characterEscape",tokenize:OWe};function OWe(t,e,n){return r;function r(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),i}function i(s){return vWe(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(s)}}const bfe={name:"characterReference",tokenize:MWe};function MWe(t,e,n){const r=this;let i=0,s,o;return a;function a(h){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(h),t.exit("characterReferenceMarker"),l}function l(h){return h===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(h),t.exit("characterReferenceMarkerNumeric"),c):(t.enter("characterReferenceValue"),s=31,o=Ls,u(h))}function c(h){return h===88||h===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(h),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,o=xWe,u):(t.enter("characterReferenceValue"),s=7,o=jL,u(h))}function u(h){if(h===59&&i){const m=t.exit("characterReferenceValue");return o===Ls&&!NB(r.sliceSerialize(m))?n(h):(t.enter("characterReferenceMarker"),t.consume(h),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return o(h)&&i++<s?(t.consume(h),u):n(h)}}const YJ={partial:!0,tokenize:DWe},JJ={concrete:!0,name:"codeFenced",tokenize:LWe};function LWe(t,e,n){const r=this,i={partial:!0,tokenize:D};let s=0,o=0,a;return l;function l(O){return c(O)}function c(O){const B=r.events[r.events.length-1];return s=B&&B[1].type==="linePrefix"?B[2].sliceSerialize(B[1],!0).length:0,a=O,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),u(O)}function u(O){return O===a?(o++,t.consume(O),u):o<3?n(O):(t.exit("codeFencedFenceSequence"),An(O)?In(t,h,"whitespace")(O):h(O))}function h(O){return O===null||Wt(O)?(t.exit("codeFencedFence"),r.interrupt?e(O):t.check(YJ,v,R)(O)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),m(O))}function m(O){return O===null||Wt(O)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),h(O)):An(O)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),In(t,g,"whitespace")(O)):O===96&&O===a?n(O):(t.consume(O),m)}function g(O){return O===null||Wt(O)?h(O):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),y(O))}function y(O){return O===null||Wt(O)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),h(O)):O===96&&O===a?n(O):(t.consume(O),y)}function v(O){return t.attempt(i,R,b)(O)}function b(O){return t.enter("lineEnding"),t.consume(O),t.exit("lineEnding"),w}function w(O){return s>0&&An(O)?In(t,k,"linePrefix",s+1)(O):k(O)}function k(O){return O===null||Wt(O)?t.check(YJ,v,R)(O):(t.enter("codeFlowValue"),N(O))}function N(O){return O===null||Wt(O)?(t.exit("codeFlowValue"),k(O)):(t.consume(O),N)}function R(O){return t.exit("codeFenced"),e(O)}function D(O,B,z){let U=0;return $;function $(_){return O.enter("lineEnding"),O.consume(_),O.exit("lineEnding"),W}function W(_){return O.enter("codeFencedFence"),An(_)?In(O,H,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(_):H(_)}function H(_){return _===a?(O.enter("codeFencedFenceSequence"),F(_)):z(_)}function F(_){return _===a?(U++,O.consume(_),F):U>=o?(O.exit("codeFencedFenceSequence"),An(_)?In(O,T,"whitespace")(_):T(_)):z(_)}function T(_){return _===null||Wt(_)?(O.exit("codeFencedFence"),B(_)):z(_)}}}function DWe(t,e,n){const r=this;return i;function i(o){return o===null?n(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}const WO={name:"codeIndented",tokenize:BWe},jWe={partial:!0,tokenize:UWe};function BWe(t,e,n){const r=this;return i;function i(c){return t.enter("codeIndented"),In(t,s,"linePrefix",5)(c)}function s(c){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?o(c):n(c)}function o(c){return c===null?l(c):Wt(c)?t.attempt(jWe,o,l)(c):(t.enter("codeFlowValue"),a(c))}function a(c){return c===null||Wt(c)?(t.exit("codeFlowValue"),o(c)):(t.consume(c),a)}function l(c){return t.exit("codeIndented"),e(c)}}function UWe(t,e,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):Wt(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),i):In(t,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):Wt(o)?i(o):n(o)}}const FWe={name:"codeText",previous:zWe,resolve:$We,tokenize:VWe};function $We(t){let e=t.length-4,n=3,r,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)i===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(i=r):(r===e||t[r][1].type==="lineEnding")&&(t[i][1].type="codeTextData",r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return t}function zWe(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function VWe(t,e,n){let r=0,i,s;return o;function o(h){return t.enter("codeText"),t.enter("codeTextSequence"),a(h)}function a(h){return h===96?(t.consume(h),r++,a):(t.exit("codeTextSequence"),l(h))}function l(h){return h===null?n(h):h===32?(t.enter("space"),t.consume(h),t.exit("space"),l):h===96?(s=t.enter("codeTextSequence"),i=0,u(h)):Wt(h)?(t.enter("lineEnding"),t.consume(h),t.exit("lineEnding"),l):(t.enter("codeTextData"),c(h))}function c(h){return h===null||h===32||h===96||Wt(h)?(t.exit("codeTextData"),l(h)):(t.consume(h),c)}function u(h){return h===96?(t.consume(h),i++,u):i===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(h)):(s.type="codeTextData",c(h))}}class HWe{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const i=n||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&Lb(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Lb(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Lb(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);Lb(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Lb(this.left,n.reverse())}}}function Lb(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function wfe(t){const e={};let n=-1,r,i,s,o,a,l,c;const u=new HWe(t);for(;++n<u.length;){for(;n in e;)n=e[n];if(r=u.get(n),n&&r[1].type==="chunkFlow"&&u.get(n-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,s=0,s<l.length&&l[s][1].type==="lineEndingBlank"&&(s+=2),s<l.length&&l[s][1].type==="content"))for(;++s<l.length&&l[s][1].type!=="content";)l[s][1].type==="chunkText"&&(l[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,qWe(u,n)),n=e[n],c=!0);else if(r[1]._container){for(s=n,i=void 0;s--;)if(o=u.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(u.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(r[1].end={...u.get(i)[1].start},a=u.slice(i,n),a.unshift(r),u.splice(i,n-i+1,a))}}return sa(t,0,Number.POSITIVE_INFINITY,u.slice(0)),!c}function qWe(t,e){const n=t.get(e)[1],r=t.get(e)[2];let i=e-1;const s=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const a=o.events,l=[],c={};let u,h,m=-1,g=n,y=0,v=0;const b=[v];for(;g;){for(;t.get(++i)[1]!==g;);s.push(i),g._tokenizer||(u=r.sliceStream(g),g.next||u.push(null),h&&o.defineSkip(g.start),g._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(u),g._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),h=g,g=g.next}for(g=n;++m<a.length;)a[m][0]==="exit"&&a[m-1][0]==="enter"&&a[m][1].type===a[m-1][1].type&&a[m][1].start.line!==a[m][1].end.line&&(v=m+1,b.push(v),g._tokenizer=void 0,g.previous=void 0,g=g.next);for(o.events=[],g?(g._tokenizer=void 0,g.previous=void 0):b.pop(),m=b.length;m--;){const w=a.slice(b[m],b[m+1]),k=s.pop();l.push([k,k+w.length-1]),t.splice(k,2,w)}for(l.reverse(),m=-1;++m<l.length;)c[y+l[m][0]]=y+l[m][1],y+=l[m][1]-l[m][0]-1;return c}const GWe={resolve:WWe,tokenize:YWe},KWe={partial:!0,tokenize:JWe};function WWe(t){return wfe(t),t}function YWe(t,e){let n;return r;function r(a){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):Wt(a)?t.check(KWe,o,s)(a):(t.consume(a),i)}function s(a){return t.exit("chunkContent"),t.exit("content"),e(a)}function o(a){return t.consume(a),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function JWe(t,e,n){const r=this;return i;function i(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),In(t,s,"linePrefix")}function s(o){if(o===null||Wt(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):t.interrupt(r.parser.constructs.flow,n,e)(o)}}function Efe(t,e,n,r,i,s,o,a,l){const c=l||Number.POSITIVE_INFINITY;let u=0;return h;function h(w){return w===60?(t.enter(r),t.enter(i),t.enter(s),t.consume(w),t.exit(s),m):w===null||w===32||w===41||b2(w)?n(w):(t.enter(r),t.enter(o),t.enter(a),t.enter("chunkString",{contentType:"string"}),v(w))}function m(w){return w===62?(t.enter(s),t.consume(w),t.exit(s),t.exit(i),t.exit(r),e):(t.enter(a),t.enter("chunkString",{contentType:"string"}),g(w))}function g(w){return w===62?(t.exit("chunkString"),t.exit(a),m(w)):w===null||w===60||Wt(w)?n(w):(t.consume(w),w===92?y:g)}function y(w){return w===60||w===62||w===92?(t.consume(w),g):g(w)}function v(w){return!u&&(w===null||w===41||lr(w))?(t.exit("chunkString"),t.exit(a),t.exit(o),t.exit(r),e(w)):u<c&&w===40?(t.consume(w),u++,v):w===41?(t.consume(w),u--,v):w===null||w===32||w===40||b2(w)?n(w):(t.consume(w),w===92?b:v)}function b(w){return w===40||w===41||w===92?(t.consume(w),v):v(w)}}function Sfe(t,e,n,r,i,s){const o=this;let a=0,l;return c;function c(g){return t.enter(r),t.enter(i),t.consume(g),t.exit(i),t.enter(s),u}function u(g){return a>999||g===null||g===91||g===93&&!l||g===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(g):g===93?(t.exit(s),t.enter(i),t.consume(g),t.exit(i),t.exit(r),e):Wt(g)?(t.enter("lineEnding"),t.consume(g),t.exit("lineEnding"),u):(t.enter("chunkString",{contentType:"string"}),h(g))}function h(g){return g===null||g===91||g===93||Wt(g)||a++>999?(t.exit("chunkString"),u(g)):(t.consume(g),l||(l=!An(g)),g===92?m:h)}function m(g){return g===91||g===92||g===93?(t.consume(g),a++,h):h(g)}}function Afe(t,e,n,r,i,s){let o;return a;function a(m){return m===34||m===39||m===40?(t.enter(r),t.enter(i),t.consume(m),t.exit(i),o=m===40?41:m,l):n(m)}function l(m){return m===o?(t.enter(i),t.consume(m),t.exit(i),t.exit(r),e):(t.enter(s),c(m))}function c(m){return m===o?(t.exit(s),l(o)):m===null?n(m):Wt(m)?(t.enter("lineEnding"),t.consume(m),t.exit("lineEnding"),In(t,c,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),u(m))}function u(m){return m===o||m===null||Wt(m)?(t.exit("chunkString"),c(m)):(t.consume(m),m===92?h:u)}function h(m){return m===o||m===92?(t.consume(m),u):u(m)}}function mw(t,e){let n;return r;function r(i){return Wt(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),n=!0,r):An(i)?In(t,r,n?"linePrefix":"lineSuffix")(i):e(i)}}const XWe={name:"definition",tokenize:ZWe},QWe={partial:!0,tokenize:eYe};function ZWe(t,e,n){const r=this;let i;return s;function s(g){return t.enter("definition"),o(g)}function o(g){return Sfe.call(r,t,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(g)}function a(g){return i=Bl(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),g===58?(t.enter("definitionMarker"),t.consume(g),t.exit("definitionMarker"),l):n(g)}function l(g){return lr(g)?mw(t,c)(g):c(g)}function c(g){return Efe(t,u,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(g)}function u(g){return t.attempt(QWe,h,h)(g)}function h(g){return An(g)?In(t,m,"whitespace")(g):m(g)}function m(g){return g===null||Wt(g)?(t.exit("definition"),r.parser.defined.push(i),e(g)):n(g)}}function eYe(t,e,n){return r;function r(a){return lr(a)?mw(t,i)(a):n(a)}function i(a){return Afe(t,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return An(a)?In(t,o,"whitespace")(a):o(a)}function o(a){return a===null||Wt(a)?e(a):n(a)}}const tYe={name:"hardBreakEscape",tokenize:nYe};function nYe(t,e,n){return r;function r(s){return t.enter("hardBreakEscape"),t.consume(s),i}function i(s){return Wt(s)?(t.exit("hardBreakEscape"),e(s)):n(s)}}const rYe={name:"headingAtx",resolve:iYe,tokenize:sYe};function iYe(t,e){let n=t.length-2,r=3,i,s;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},s={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},sa(t,r,n-r+1,[["enter",i,e],["enter",s,e],["exit",s,e],["exit",i,e]])),t}function sYe(t,e,n){let r=0;return i;function i(u){return t.enter("atxHeading"),s(u)}function s(u){return t.enter("atxHeadingSequence"),o(u)}function o(u){return u===35&&r++<6?(t.consume(u),o):u===null||lr(u)?(t.exit("atxHeadingSequence"),a(u)):n(u)}function a(u){return u===35?(t.enter("atxHeadingSequence"),l(u)):u===null||Wt(u)?(t.exit("atxHeading"),e(u)):An(u)?In(t,a,"whitespace")(u):(t.enter("atxHeadingText"),c(u))}function l(u){return u===35?(t.consume(u),l):(t.exit("atxHeadingSequence"),a(u))}function c(u){return u===null||u===35||lr(u)?(t.exit("atxHeadingText"),a(u)):(t.consume(u),c)}}const oYe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],XJ=["pre","script","style","textarea"],aYe={concrete:!0,name:"htmlFlow",resolveTo:uYe,tokenize:dYe},lYe={partial:!0,tokenize:hYe},cYe={partial:!0,tokenize:fYe};function uYe(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function dYe(t,e,n){const r=this;let i,s,o,a,l;return c;function c(P){return u(P)}function u(P){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(P),h}function h(P){return P===33?(t.consume(P),m):P===47?(t.consume(P),s=!0,v):P===63?(t.consume(P),i=3,r.interrupt?e:G):Js(P)?(t.consume(P),o=String.fromCharCode(P),b):n(P)}function m(P){return P===45?(t.consume(P),i=2,g):P===91?(t.consume(P),i=5,a=0,y):Js(P)?(t.consume(P),i=4,r.interrupt?e:G):n(P)}function g(P){return P===45?(t.consume(P),r.interrupt?e:G):n(P)}function y(P){const Y="CDATA[";return P===Y.charCodeAt(a++)?(t.consume(P),a===Y.length?r.interrupt?e:H:y):n(P)}function v(P){return Js(P)?(t.consume(P),o=String.fromCharCode(P),b):n(P)}function b(P){if(P===null||P===47||P===62||lr(P)){const Y=P===47,X=o.toLowerCase();return!Y&&!s&&XJ.includes(X)?(i=1,r.interrupt?e(P):H(P)):oYe.includes(o.toLowerCase())?(i=6,Y?(t.consume(P),w):r.interrupt?e(P):H(P)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(P):s?k(P):N(P))}return P===45||Ls(P)?(t.consume(P),o+=String.fromCharCode(P),b):n(P)}function w(P){return P===62?(t.consume(P),r.interrupt?e:H):n(P)}function k(P){return An(P)?(t.consume(P),k):$(P)}function N(P){return P===47?(t.consume(P),$):P===58||P===95||Js(P)?(t.consume(P),R):An(P)?(t.consume(P),N):$(P)}function R(P){return P===45||P===46||P===58||P===95||Ls(P)?(t.consume(P),R):D(P)}function D(P){return P===61?(t.consume(P),O):An(P)?(t.consume(P),D):N(P)}function O(P){return P===null||P===60||P===61||P===62||P===96?n(P):P===34||P===39?(t.consume(P),l=P,B):An(P)?(t.consume(P),O):z(P)}function B(P){return P===l?(t.consume(P),l=null,U):P===null||Wt(P)?n(P):(t.consume(P),B)}function z(P){return P===null||P===34||P===39||P===47||P===60||P===61||P===62||P===96||lr(P)?D(P):(t.consume(P),z)}function U(P){return P===47||P===62||An(P)?N(P):n(P)}function $(P){return P===62?(t.consume(P),W):n(P)}function W(P){return P===null||Wt(P)?H(P):An(P)?(t.consume(P),W):n(P)}function H(P){return P===45&&i===2?(t.consume(P),L):P===60&&i===1?(t.consume(P),V):P===62&&i===4?(t.consume(P),q):P===63&&i===3?(t.consume(P),G):P===93&&i===5?(t.consume(P),te):Wt(P)&&(i===6||i===7)?(t.exit("htmlFlowData"),t.check(lYe,M,F)(P)):P===null||Wt(P)?(t.exit("htmlFlowData"),F(P)):(t.consume(P),H)}function F(P){return t.check(cYe,T,M)(P)}function T(P){return t.enter("lineEnding"),t.consume(P),t.exit("lineEnding"),_}function _(P){return P===null||Wt(P)?F(P):(t.enter("htmlFlowData"),H(P))}function L(P){return P===45?(t.consume(P),G):H(P)}function V(P){return P===47?(t.consume(P),o="",K):H(P)}function K(P){if(P===62){const Y=o.toLowerCase();return XJ.includes(Y)?(t.consume(P),q):H(P)}return Js(P)&&o.length<8?(t.consume(P),o+=String.fromCharCode(P),K):H(P)}function te(P){return P===93?(t.consume(P),G):H(P)}function G(P){return P===62?(t.consume(P),q):P===45&&i===2?(t.consume(P),G):H(P)}function q(P){return P===null||Wt(P)?(t.exit("htmlFlowData"),M(P)):(t.consume(P),q)}function M(P){return t.exit("htmlFlow"),e(P)}}function fYe(t,e,n){const r=this;return i;function i(o){return Wt(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}function hYe(t,e,n){return r;function r(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),t.attempt(TE,e,n)}}const pYe={name:"htmlText",tokenize:mYe};function mYe(t,e,n){const r=this;let i,s,o;return a;function a(G){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(G),l}function l(G){return G===33?(t.consume(G),c):G===47?(t.consume(G),D):G===63?(t.consume(G),N):Js(G)?(t.consume(G),z):n(G)}function c(G){return G===45?(t.consume(G),u):G===91?(t.consume(G),s=0,y):Js(G)?(t.consume(G),k):n(G)}function u(G){return G===45?(t.consume(G),g):n(G)}function h(G){return G===null?n(G):G===45?(t.consume(G),m):Wt(G)?(o=h,V(G)):(t.consume(G),h)}function m(G){return G===45?(t.consume(G),g):h(G)}function g(G){return G===62?L(G):G===45?m(G):h(G)}function y(G){const q="CDATA[";return G===q.charCodeAt(s++)?(t.consume(G),s===q.length?v:y):n(G)}function v(G){return G===null?n(G):G===93?(t.consume(G),b):Wt(G)?(o=v,V(G)):(t.consume(G),v)}function b(G){return G===93?(t.consume(G),w):v(G)}function w(G){return G===62?L(G):G===93?(t.consume(G),w):v(G)}function k(G){return G===null||G===62?L(G):Wt(G)?(o=k,V(G)):(t.consume(G),k)}function N(G){return G===null?n(G):G===63?(t.consume(G),R):Wt(G)?(o=N,V(G)):(t.consume(G),N)}function R(G){return G===62?L(G):N(G)}function D(G){return Js(G)?(t.consume(G),O):n(G)}function O(G){return G===45||Ls(G)?(t.consume(G),O):B(G)}function B(G){return Wt(G)?(o=B,V(G)):An(G)?(t.consume(G),B):L(G)}function z(G){return G===45||Ls(G)?(t.consume(G),z):G===47||G===62||lr(G)?U(G):n(G)}function U(G){return G===47?(t.consume(G),L):G===58||G===95||Js(G)?(t.consume(G),$):Wt(G)?(o=U,V(G)):An(G)?(t.consume(G),U):L(G)}function $(G){return G===45||G===46||G===58||G===95||Ls(G)?(t.consume(G),$):W(G)}function W(G){return G===61?(t.consume(G),H):Wt(G)?(o=W,V(G)):An(G)?(t.consume(G),W):U(G)}function H(G){return G===null||G===60||G===61||G===62||G===96?n(G):G===34||G===39?(t.consume(G),i=G,F):Wt(G)?(o=H,V(G)):An(G)?(t.consume(G),H):(t.consume(G),T)}function F(G){return G===i?(t.consume(G),i=void 0,_):G===null?n(G):Wt(G)?(o=F,V(G)):(t.consume(G),F)}function T(G){return G===null||G===34||G===39||G===60||G===61||G===96?n(G):G===47||G===62||lr(G)?U(G):(t.consume(G),T)}function _(G){return G===47||G===62||lr(G)?U(G):n(G)}function L(G){return G===62?(t.consume(G),t.exit("htmlTextData"),t.exit("htmlText"),e):n(G)}function V(G){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(G),t.exit("lineEnding"),K}function K(G){return An(G)?In(t,te,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(G):te(G)}function te(G){return t.enter("htmlTextData"),o(G)}}const CB={name:"labelEnd",resolveAll:vYe,resolveTo:bYe,tokenize:wYe},gYe={tokenize:EYe},yYe={tokenize:SYe},xYe={tokenize:AYe};function vYe(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",e+=i}}return t.length!==n.length&&sa(t,0,t.length,n),t}function bYe(t,e){let n=t.length,r=0,i,s,o,a;for(;n--;)if(i=t[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;t[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(t[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const l={type:t[s][1].type==="labelLink"?"link":"image",start:{...t[s][1].start},end:{...t[t.length-1][1].end}},c={type:"label",start:{...t[s][1].start},end:{...t[o][1].end}},u={type:"labelText",start:{...t[s+r+2][1].end},end:{...t[o-2][1].start}};return a=[["enter",l,e],["enter",c,e]],a=Ha(a,t.slice(s+1,s+r+3)),a=Ha(a,[["enter",u,e]]),a=Ha(a,VC(e.parser.constructs.insideSpan.null,t.slice(s+r+4,o-3),e)),a=Ha(a,[["exit",u,e],t[o-2],t[o-1],["exit",c,e]]),a=Ha(a,t.slice(o+1)),a=Ha(a,[["exit",l,e]]),sa(t,s,t.length,a),t}function wYe(t,e,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(m){return s?s._inactive?h(m):(o=r.parser.defined.includes(Bl(r.sliceSerialize({start:s.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(m),t.exit("labelMarker"),t.exit("labelEnd"),l):n(m)}function l(m){return m===40?t.attempt(gYe,u,o?u:h)(m):m===91?t.attempt(yYe,u,o?c:h)(m):o?u(m):h(m)}function c(m){return t.attempt(xYe,u,h)(m)}function u(m){return e(m)}function h(m){return s._balanced=!0,n(m)}}function EYe(t,e,n){return r;function r(h){return t.enter("resource"),t.enter("resourceMarker"),t.consume(h),t.exit("resourceMarker"),i}function i(h){return lr(h)?mw(t,s)(h):s(h)}function s(h){return h===41?u(h):Efe(t,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(h)}function o(h){return lr(h)?mw(t,l)(h):u(h)}function a(h){return n(h)}function l(h){return h===34||h===39||h===40?Afe(t,c,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(h):u(h)}function c(h){return lr(h)?mw(t,u)(h):u(h)}function u(h){return h===41?(t.enter("resourceMarker"),t.consume(h),t.exit("resourceMarker"),t.exit("resource"),e):n(h)}}function SYe(t,e,n){const r=this;return i;function i(a){return Sfe.call(r,t,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(Bl(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(a):n(a)}function o(a){return n(a)}}function AYe(t,e,n){return r;function r(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),i}function i(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):n(s)}}const TYe={name:"labelStartImage",resolveAll:CB.resolveAll,tokenize:kYe};function kYe(t,e,n){const r=this;return i;function i(a){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(a),t.exit("labelImageMarker"),s}function s(a){return a===91?(t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):e(a)}}const NYe={name:"labelStartLink",resolveAll:CB.resolveAll,tokenize:CYe};function CYe(t,e,n){const r=this;return i;function i(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):e(o)}}const YO={name:"lineEnding",tokenize:PYe};function PYe(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),In(t,e,"linePrefix")}}const jT={name:"thematicBreak",tokenize:_Ye};function _Ye(t,e,n){let r=0,i;return s;function s(c){return t.enter("thematicBreak"),o(c)}function o(c){return i=c,a(c)}function a(c){return c===i?(t.enter("thematicBreakSequence"),l(c)):r>=3&&(c===null||Wt(c))?(t.exit("thematicBreak"),e(c)):n(c)}function l(c){return c===i?(t.consume(c),r++,l):(t.exit("thematicBreakSequence"),An(c)?In(t,a,"whitespace")(c):a(c))}}const mo={continuation:{tokenize:MYe},exit:DYe,name:"list",tokenize:OYe},IYe={partial:!0,tokenize:jYe},RYe={partial:!0,tokenize:LYe};function OYe(t,e,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(g){const y=r.containerState.type||(g===42||g===43||g===45?"listUnordered":"listOrdered");if(y==="listUnordered"?!r.containerState.marker||g===r.containerState.marker:jL(g)){if(r.containerState.type||(r.containerState.type=y,t.enter(y,{_container:!0})),y==="listUnordered")return t.enter("listItemPrefix"),g===42||g===45?t.check(jT,n,c)(g):c(g);if(!r.interrupt||g===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),l(g)}return n(g)}function l(g){return jL(g)&&++o<10?(t.consume(g),l):(!r.interrupt||o<2)&&(r.containerState.marker?g===r.containerState.marker:g===41||g===46)?(t.exit("listItemValue"),c(g)):n(g)}function c(g){return t.enter("listItemMarker"),t.consume(g),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||g,t.check(TE,r.interrupt?n:u,t.attempt(IYe,m,h))}function u(g){return r.containerState.initialBlankLine=!0,s++,m(g)}function h(g){return An(g)?(t.enter("listItemPrefixWhitespace"),t.consume(g),t.exit("listItemPrefixWhitespace"),m):n(g)}function m(g){return r.containerState.size=s+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(g)}}function MYe(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(TE,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,In(t,e,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!An(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(RYe,e,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,In(t,t.attempt(mo,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function LYe(t,e,n){const r=this;return In(t,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?e(s):n(s)}}function DYe(t){t.exit(this.containerState.type)}function jYe(t,e,n){const r=this;return In(t,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!An(s)&&o&&o[1].type==="listItemPrefixWhitespace"?e(s):n(s)}}const QJ={name:"setextUnderline",resolveTo:BYe,tokenize:UYe};function BYe(t,e){let n=t.length,r,i,s;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(i=n)}else t[n][1].type==="content"&&t.splice(n,1),!s&&t[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[i][1].type="setextHeadingText",s?(t.splice(i,0,["enter",o,e]),t.splice(s+1,0,["exit",t[r][1],e]),t[r][1].end={...t[s][1].end}):t[r][1]=o,t.push(["exit",o,e]),t}function UYe(t,e,n){const r=this;let i;return s;function s(c){let u=r.events.length,h;for(;u--;)if(r.events[u][1].type!=="lineEnding"&&r.events[u][1].type!=="linePrefix"&&r.events[u][1].type!=="content"){h=r.events[u][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||h)?(t.enter("setextHeadingLine"),i=c,o(c)):n(c)}function o(c){return t.enter("setextHeadingLineSequence"),a(c)}function a(c){return c===i?(t.consume(c),a):(t.exit("setextHeadingLineSequence"),An(c)?In(t,l,"lineSuffix")(c):l(c))}function l(c){return c===null||Wt(c)?(t.exit("setextHeadingLine"),e(c)):n(c)}}const FYe={tokenize:$Ye};function $Ye(t){const e=this,n=t.attempt(TE,r,t.attempt(this.parser.constructs.flowInitial,i,In(t,t.attempt(this.parser.constructs.flow,i,t.attempt(GWe,i)),"linePrefix")));return n;function r(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function i(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const zYe={resolveAll:kfe()},VYe=Tfe("string"),HYe=Tfe("text");function Tfe(t){return{resolveAll:kfe(t==="text"?qYe:void 0),tokenize:e};function e(n){const r=this,i=this.parser.constructs[t],s=n.attempt(i,o,a);return o;function o(u){return c(u)?s(u):a(u)}function a(u){if(u===null){n.consume(u);return}return n.enter("data"),n.consume(u),l}function l(u){return c(u)?(n.exit("data"),s(u)):(n.consume(u),l)}function c(u){if(u===null)return!0;const h=i[u];let m=-1;if(h)for(;++m<h.length;){const g=h[m];if(!g.previous||g.previous.call(r,r.previous))return!0}return!1}}}function kfe(t){return e;function e(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return t?t(n,r):n}}function qYe(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],i=e.sliceStream(r);let s=i.length,o=-1,a=0,l;for(;s--;){const c=i[s];if(typeof c=="string"){for(o=c.length;c.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(c===-2)l=!0,a++;else if(c!==-1){s++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(a=0),a){const c={type:n===t.length||l||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:r.start._bufferIndex+o,_index:r.start._index+s,line:r.end.line,column:r.end.column-a,offset:r.end.offset-a},end:{...r.end}};r.end={...c.start},r.start.offset===r.end.offset?Object.assign(r,c):(t.splice(n,0,["enter",c,e],["exit",c,e]),n+=2)}n++}return t}const GYe={42:mo,43:mo,45:mo,48:mo,49:mo,50:mo,51:mo,52:mo,53:mo,54:mo,55:mo,56:mo,57:mo,62:xfe},KYe={91:XWe},WYe={[-2]:WO,[-1]:WO,32:WO},YYe={35:rYe,42:jT,45:[QJ,jT],60:aYe,61:QJ,95:jT,96:JJ,126:JJ},JYe={38:bfe,92:vfe},XYe={[-5]:YO,[-4]:YO,[-3]:YO,33:TYe,38:bfe,42:BL,60:[NWe,pYe],91:NYe,92:[tYe,vfe],93:CB,95:BL,96:FWe},QYe={null:[BL,zYe]},ZYe={null:[42,95]},eJe={null:[]},tJe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:ZYe,contentInitial:KYe,disable:eJe,document:GYe,flow:YYe,flowInitial:WYe,insideSpan:QYe,string:JYe,text:XYe},Symbol.toStringTag,{value:"Module"}));function nJe(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},s=[];let o=[],a=[];const l={attempt:B(D),check:B(O),consume:k,enter:N,exit:R,interrupt:B(O,{interrupt:!0})},c={code:null,containerState:{},defineSkip:v,events:[],now:y,parser:t,previous:null,sliceSerialize:m,sliceStream:g,write:h};let u=e.tokenize.call(c,l);return e.resolveAll&&s.push(e),c;function h(W){return o=Ha(o,W),b(),o[o.length-1]!==null?[]:(z(e,0),c.events=VC(s,c.events,c),c.events)}function m(W,H){return iJe(g(W),H)}function g(W){return rJe(o,W)}function y(){const{_bufferIndex:W,_index:H,line:F,column:T,offset:_}=r;return{_bufferIndex:W,_index:H,line:F,column:T,offset:_}}function v(W){i[W.line]=W.column,$()}function b(){let W;for(;r._index<o.length;){const H=o[r._index];if(typeof H=="string")for(W=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===W&&r._bufferIndex<H.length;)w(H.charCodeAt(r._bufferIndex));else w(H)}}function w(W){u=u(W)}function k(W){Wt(W)?(r.line++,r.column=1,r.offset+=W===-3?2:1,$()):W!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),c.previous=W}function N(W,H){const F=H||{};return F.type=W,F.start=y(),c.events.push(["enter",F,c]),a.push(F),F}function R(W){const H=a.pop();return H.end=y(),c.events.push(["exit",H,c]),H}function D(W,H){z(W,H.from)}function O(W,H){H.restore()}function B(W,H){return F;function F(T,_,L){let V,K,te,G;return Array.isArray(T)?M(T):"tokenize"in T?M([T]):q(T);function q(se){return oe;function oe(me){const ce=me!==null&&se[me],ve=me!==null&&se.null,Ne=[...Array.isArray(ce)?ce:ce?[ce]:[],...Array.isArray(ve)?ve:ve?[ve]:[]];return M(Ne)(me)}}function M(se){return V=se,K=0,se.length===0?L:P(se[K])}function P(se){return oe;function oe(me){return G=U(),te=se,se.partial||(c.currentConstruct=se),se.name&&c.parser.constructs.disable.null.includes(se.name)?X():se.tokenize.call(H?Object.assign(Object.create(c),H):c,l,Y,X)(me)}}function Y(se){return W(te,G),_}function X(se){return G.restore(),++K<V.length?P(V[K]):L}}}function z(W,H){W.resolveAll&&!s.includes(W)&&s.push(W),W.resolve&&sa(c.events,H,c.events.length-H,W.resolve(c.events.slice(H),c)),W.resolveTo&&(c.events=W.resolveTo(c.events,c))}function U(){const W=y(),H=c.previous,F=c.currentConstruct,T=c.events.length,_=Array.from(a);return{from:T,restore:L};function L(){r=W,c.previous=H,c.currentConstruct=F,c.events.length=T,a=_,$()}}function $(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function rJe(t,e){const n=e.start._index,r=e.start._bufferIndex,i=e.end._index,s=e.end._bufferIndex;let o;if(n===i)o=[t[n].slice(r,s)];else{if(o=t.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(t[i].slice(0,s))}return o}function iJe(t,e){let n=-1;const r=[];let i;for(;++n<t.length;){const s=t[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}function sJe(t){const r={constructs:gfe([tJe,...(t||{}).extensions||[]]),content:i(bWe),defined:[],document:i(EWe),flow:i(FYe),lazy:{},string:i(VYe),text:i(HYe)};return r;function i(s){return o;function o(a){return nJe(r,s,a)}}}function oJe(t){for(;!wfe(t););return t}const ZJ=/[\0\t\n\r]/g;function aJe(){let t=1,e="",n=!0,r;return i;function i(s,o,a){const l=[];let c,u,h,m,g;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),h=0,e="",n&&(s.charCodeAt(0)===65279&&h++,n=void 0);h<s.length;){if(ZJ.lastIndex=h,c=ZJ.exec(s),m=c&&c.index!==void 0?c.index:s.length,g=s.charCodeAt(m),!c){e=s.slice(h);break}if(g===10&&h===m&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),h<m&&(l.push(s.slice(h,m)),t+=m-h),g){case 0:{l.push(65533),t++;break}case 9:{for(u=Math.ceil(t/4)*4,l.push(-2);t++<u;)l.push(-1);break}case 10:{l.push(-4),t=1;break}default:r=!0,t=1}h=m+1}return a&&(r&&l.push(-5),e&&l.push(e),l.push(null)),l}}const lJe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function cJe(t){return t.replace(lJe,uJe)}function uJe(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return yfe(n.slice(s?2:1),s?16:10)}return NB(n)||t}const Nfe={}.hasOwnProperty;function dJe(t,e,n){return typeof e!="string"&&(n=e,e=void 0),fJe(n)(oJe(sJe(n).document().write(aJe()(t,e,!0))))}function fJe(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(at),autolinkProtocol:U,autolinkEmail:U,atxHeading:s(Te),blockQuote:s(ve),characterEscape:U,characterReference:U,codeFenced:s(Ne),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(Ne,o),codeText:s(pe,o),codeTextData:U,data:U,codeFlowValue:U,definition:s(Le),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(he),hardBreakEscape:s(Ge),hardBreakTrailing:s(Ge),htmlFlow:s(We,o),htmlFlowData:U,htmlText:s(We,o),htmlTextData:U,image:s(Qe),label:o,link:s(at),listItem:s(Xe),listItemValue:m,listOrdered:s(rt,h),listUnordered:s(rt),paragraph:s(ft),reference:P,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(Te),strong:s(Me),thematicBreak:s(Kt)},exit:{atxHeading:l(),atxHeadingSequence:D,autolink:l(),autolinkEmail:ce,autolinkProtocol:me,blockQuote:l(),characterEscapeValue:$,characterReferenceMarkerHexadecimal:X,characterReferenceMarkerNumeric:X,characterReferenceValue:se,characterReference:oe,codeFenced:l(b),codeFencedFence:v,codeFencedFenceInfo:g,codeFencedFenceMeta:y,codeFlowValue:$,codeIndented:l(w),codeText:l(_),codeTextData:$,data:$,definition:l(),definitionDestinationString:R,definitionLabelString:k,definitionTitleString:N,emphasis:l(),hardBreakEscape:l(H),hardBreakTrailing:l(H),htmlFlow:l(F),htmlFlowData:$,htmlText:l(T),htmlTextData:$,image:l(V),label:te,labelText:K,lineEnding:W,link:l(L),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:Y,resourceDestinationString:G,resourceTitleString:q,resource:M,setextHeading:l(z),setextHeadingLineSequence:B,setextHeadingText:O,strong:l(),thematicBreak:l()}};Cfe(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(Re){let He={type:"root",children:[]};const gt={stack:[He],tokenStack:[],config:e,enter:a,exit:c,buffer:o,resume:u,data:n},dt=[];let ie=-1;for(;++ie<Re.length;)if(Re[ie][1].type==="listOrdered"||Re[ie][1].type==="listUnordered")if(Re[ie][0]==="enter")dt.push(ie);else{const J=dt.pop();ie=i(Re,J,ie)}for(ie=-1;++ie<Re.length;){const J=e[Re[ie][0]];Nfe.call(J,Re[ie][1].type)&&J[Re[ie][1].type].call(Object.assign({sliceSerialize:Re[ie][2].sliceSerialize},gt),Re[ie][1])}if(gt.tokenStack.length>0){const J=gt.tokenStack[gt.tokenStack.length-1];(J[1]||eX).call(gt,void 0,J[0])}for(He.position={start:yf(Re.length>0?Re[0][1].start:{line:1,column:1,offset:0}),end:yf(Re.length>0?Re[Re.length-2][1].end:{line:1,column:1,offset:0})},ie=-1;++ie<e.transforms.length;)He=e.transforms[ie](He)||He;return He}function i(Re,He,gt){let dt=He-1,ie=-1,J=!1,Z,ue,Se,de;for(;++dt<=gt;){const ye=Re[dt];switch(ye[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{ye[0]==="enter"?ie++:ie--,de=void 0;break}case"lineEndingBlank":{ye[0]==="enter"&&(Z&&!de&&!ie&&!Se&&(Se=dt),de=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:de=void 0}if(!ie&&ye[0]==="enter"&&ye[1].type==="listItemPrefix"||ie===-1&&ye[0]==="exit"&&(ye[1].type==="listUnordered"||ye[1].type==="listOrdered")){if(Z){let et=dt;for(ue=void 0;et--;){const Ze=Re[et];if(Ze[1].type==="lineEnding"||Ze[1].type==="lineEndingBlank"){if(Ze[0]==="exit")continue;ue&&(Re[ue][1].type="lineEndingBlank",J=!0),Ze[1].type="lineEnding",ue=et}else if(!(Ze[1].type==="linePrefix"||Ze[1].type==="blockQuotePrefix"||Ze[1].type==="blockQuotePrefixWhitespace"||Ze[1].type==="blockQuoteMarker"||Ze[1].type==="listItemIndent"))break}Se&&(!ue||Se<ue)&&(Z._spread=!0),Z.end=Object.assign({},ue?Re[ue][1].start:ye[1].end),Re.splice(ue||dt,0,["exit",Z,ye[2]]),dt++,gt++}if(ye[1].type==="listItemPrefix"){const et={type:"listItem",_spread:!1,start:Object.assign({},ye[1].start),end:void 0};Z=et,Re.splice(dt,0,["enter",et,ye[2]]),dt++,gt++,Se=void 0,de=!0}}}return Re[He][1]._spread=J,gt}function s(Re,He){return gt;function gt(dt){a.call(this,Re(dt),dt),He&&He.call(this,dt)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(Re,He,gt){this.stack[this.stack.length-1].children.push(Re),this.stack.push(Re),this.tokenStack.push([He,gt||void 0]),Re.position={start:yf(He.start),end:void 0}}function l(Re){return He;function He(gt){Re&&Re.call(this,gt),c.call(this,gt)}}function c(Re,He){const gt=this.stack.pop(),dt=this.tokenStack.pop();if(dt)dt[0].type!==Re.type&&(He?He.call(this,Re,dt[0]):(dt[1]||eX).call(this,Re,dt[0]));else throw new Error("Cannot close `"+Re.type+"` ("+pw({start:Re.start,end:Re.end})+"): its not open");gt.position.end=yf(Re.end)}function u(){return kB(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function m(Re){if(this.data.expectingFirstListItemValue){const He=this.stack[this.stack.length-2];He.start=Number.parseInt(this.sliceSerialize(Re),10),this.data.expectingFirstListItemValue=void 0}}function g(){const Re=this.resume(),He=this.stack[this.stack.length-1];He.lang=Re}function y(){const Re=this.resume(),He=this.stack[this.stack.length-1];He.meta=Re}function v(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function b(){const Re=this.resume(),He=this.stack[this.stack.length-1];He.value=Re.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function w(){const Re=this.resume(),He=this.stack[this.stack.length-1];He.value=Re.replace(/(\r?\n|\r)$/g,"")}function k(Re){const He=this.resume(),gt=this.stack[this.stack.length-1];gt.label=He,gt.identifier=Bl(this.sliceSerialize(Re)).toLowerCase()}function N(){const Re=this.resume(),He=this.stack[this.stack.length-1];He.title=Re}function R(){const Re=this.resume(),He=this.stack[this.stack.length-1];He.url=Re}function D(Re){const He=this.stack[this.stack.length-1];if(!He.depth){const gt=this.sliceSerialize(Re).length;He.depth=gt}}function O(){this.data.setextHeadingSlurpLineEnding=!0}function B(Re){const He=this.stack[this.stack.length-1];He.depth=this.sliceSerialize(Re).codePointAt(0)===61?1:2}function z(){this.data.setextHeadingSlurpLineEnding=void 0}function U(Re){const gt=this.stack[this.stack.length-1].children;let dt=gt[gt.length-1];(!dt||dt.type!=="text")&&(dt=pt(),dt.position={start:yf(Re.start),end:void 0},gt.push(dt)),this.stack.push(dt)}function $(Re){const He=this.stack.pop();He.value+=this.sliceSerialize(Re),He.position.end=yf(Re.end)}function W(Re){const He=this.stack[this.stack.length-1];if(this.data.atHardBreak){const gt=He.children[He.children.length-1];gt.position.end=yf(Re.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(He.type)&&(U.call(this,Re),$.call(this,Re))}function H(){this.data.atHardBreak=!0}function F(){const Re=this.resume(),He=this.stack[this.stack.length-1];He.value=Re}function T(){const Re=this.resume(),He=this.stack[this.stack.length-1];He.value=Re}function _(){const Re=this.resume(),He=this.stack[this.stack.length-1];He.value=Re}function L(){const Re=this.stack[this.stack.length-1];if(this.data.inReference){const He=this.data.referenceType||"shortcut";Re.type+="Reference",Re.referenceType=He,delete Re.url,delete Re.title}else delete Re.identifier,delete Re.label;this.data.referenceType=void 0}function V(){const Re=this.stack[this.stack.length-1];if(this.data.inReference){const He=this.data.referenceType||"shortcut";Re.type+="Reference",Re.referenceType=He,delete Re.url,delete Re.title}else delete Re.identifier,delete Re.label;this.data.referenceType=void 0}function K(Re){const He=this.sliceSerialize(Re),gt=this.stack[this.stack.length-2];gt.label=cJe(He),gt.identifier=Bl(He).toLowerCase()}function te(){const Re=this.stack[this.stack.length-1],He=this.resume(),gt=this.stack[this.stack.length-1];if(this.data.inReference=!0,gt.type==="link"){const dt=Re.children;gt.children=dt}else gt.alt=He}function G(){const Re=this.resume(),He=this.stack[this.stack.length-1];He.url=Re}function q(){const Re=this.resume(),He=this.stack[this.stack.length-1];He.title=Re}function M(){this.data.inReference=void 0}function P(){this.data.referenceType="collapsed"}function Y(Re){const He=this.resume(),gt=this.stack[this.stack.length-1];gt.label=He,gt.identifier=Bl(this.sliceSerialize(Re)).toLowerCase(),this.data.referenceType="full"}function X(Re){this.data.characterReferenceType=Re.type}function se(Re){const He=this.sliceSerialize(Re),gt=this.data.characterReferenceType;let dt;gt?(dt=yfe(He,gt==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):dt=NB(He);const ie=this.stack[this.stack.length-1];ie.value+=dt}function oe(Re){const He=this.stack.pop();He.position.end=yf(Re.end)}function me(Re){$.call(this,Re);const He=this.stack[this.stack.length-1];He.url=this.sliceSerialize(Re)}function ce(Re){$.call(this,Re);const He=this.stack[this.stack.length-1];He.url="mailto:"+this.sliceSerialize(Re)}function ve(){return{type:"blockquote",children:[]}}function Ne(){return{type:"code",lang:null,meta:null,value:""}}function pe(){return{type:"inlineCode",value:""}}function Le(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function he(){return{type:"emphasis",children:[]}}function Te(){return{type:"heading",depth:0,children:[]}}function Ge(){return{type:"break"}}function We(){return{type:"html",value:""}}function Qe(){return{type:"image",title:null,url:"",alt:null}}function at(){return{type:"link",title:null,url:"",children:[]}}function rt(Re){return{type:"list",ordered:Re.type==="listOrdered",start:null,spread:Re._spread,children:[]}}function Xe(Re){return{type:"listItem",spread:Re._spread,checked:null,children:[]}}function ft(){return{type:"paragraph",children:[]}}function Me(){return{type:"strong",children:[]}}function pt(){return{type:"text",value:""}}function Kt(){return{type:"thematicBreak"}}}function yf(t){return{line:t.line,column:t.column,offset:t.offset}}function Cfe(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?Cfe(t,r):hJe(t,r)}}function hJe(t,e){let n;for(n in e)if(Nfe.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function eX(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+pw({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+pw({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+pw({start:e.start,end:e.end})+") is still open")}function pJe(t){const e=this;e.parser=n;function n(r){return dJe(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function mJe(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function gJe(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function yJe(t,e){const n=e.value?e.value+`
`:"",r={},i=e.lang?e.lang.split(/\s+/):[];i.length>0&&(r.className=["language-"+i[0]]);let s={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(s.data={meta:e.meta}),t.patch(e,s),s=t.applyData(e,s),s={type:"element",tagName:"pre",properties:{},children:[s]},t.patch(e,s),s}function xJe(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function vJe(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function bJe(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),i=gv(r.toLowerCase()),s=t.footnoteOrder.indexOf(r);let o,a=t.footnoteCounts.get(r);a===void 0?(a=0,t.footnoteOrder.push(r),o=t.footnoteOrder.length):o=s+1,a+=1,t.footnoteCounts.set(r,a);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};t.patch(e,l);const c={type:"element",tagName:"sup",properties:{},children:[l]};return t.patch(e,c),t.applyData(e,c)}function wJe(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function EJe(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function Pfe(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const i=t.all(e),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function SJe(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return Pfe(t,e);const i={src:gv(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return t.patch(e,s),t.applyData(e,s)}function AJe(t,e){const n={src:gv(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function TJe(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function kJe(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return Pfe(t,e);const i={href:gv(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function NJe(t,e){const n={href:gv(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function CJe(t,e,n){const r=t.all(e),i=n?PJe(n):_fe(e),s={},o=[];if(typeof e.checked=="boolean"){const u=r[0];let h;u&&u.type==="element"&&u.tagName==="p"?h=u:(h={type:"element",tagName:"p",properties:{},children:[]},r.unshift(h)),h.children.length>0&&h.children.unshift({type:"text",value:" "}),h.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const u=r[a];(i||a!==0||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`}),u.type==="element"&&u.tagName==="p"&&!i?o.push(...u.children):o.push(u)}const l=r[r.length-1];l&&(i||l.type!=="element"||l.tagName!=="p")&&o.push({type:"text",value:`
`});const c={type:"element",tagName:"li",properties:s,children:o};return t.patch(e,c),t.applyData(e,c)}function PJe(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=_fe(n[r])}return e}function _fe(t){const e=t.spread;return e??t.children.length>1}function _Je(t,e){const n={},r=t.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,s),t.applyData(e,s)}function IJe(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function RJe(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function OJe(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function MJe(t,e){const n=t.all(e),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},a=EB(e.children[1]),l=cfe(e.children[e.children.length-1]);a&&l&&(o.position={start:a,end:l}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:t.wrap(i,!0)};return t.patch(e,s),t.applyData(e,s)}function LJe(t,e,n){const r=n?n.children:void 0,s=(r?r.indexOf(e):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:e.children.length;let l=-1;const c=[];for(;++l<a;){const h=e.children[l],m={},g=o?o[l]:void 0;g&&(m.align=g);let y={type:"element",tagName:s,properties:m,children:[]};h&&(y.children=t.all(h),t.patch(h,y),y=t.applyData(h,y)),c.push(y)}const u={type:"element",tagName:"tr",properties:{},children:t.wrap(c,!0)};return t.patch(e,u),t.applyData(e,u)}function DJe(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const tX=9,nX=32;function jJe(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),i=0;const s=[];for(;r;)s.push(rX(e.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(e);return s.push(rX(e.slice(i),i>0,!1)),s.join("")}function rX(t,e,n){let r=0,i=t.length;if(e){let s=t.codePointAt(r);for(;s===tX||s===nX;)r++,s=t.codePointAt(r)}if(n){let s=t.codePointAt(i-1);for(;s===tX||s===nX;)i--,s=t.codePointAt(i-1)}return i>r?t.slice(r,i):""}function BJe(t,e){const n={type:"text",value:jJe(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function UJe(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const FJe={blockquote:mJe,break:gJe,code:yJe,delete:xJe,emphasis:vJe,footnoteReference:bJe,heading:wJe,html:EJe,imageReference:SJe,image:AJe,inlineCode:TJe,linkReference:kJe,link:NJe,listItem:CJe,list:_Je,paragraph:IJe,root:RJe,strong:OJe,table:MJe,tableCell:DJe,tableRow:LJe,text:BJe,thematicBreak:UJe,toml:BA,yaml:BA,definition:BA,footnoteDefinition:BA};function BA(){}const Ife=-1,HC=0,gw=1,w2=2,PB=3,_B=4,IB=5,RB=6,Rfe=7,Ofe=8,iX=typeof self=="object"?self:globalThis,$Je=(t,e)=>{const n=(i,s)=>(t.set(s,i),i),r=i=>{if(t.has(i))return t.get(i);const[s,o]=e[i];switch(s){case HC:case Ife:return n(o,i);case gw:{const a=n([],i);for(const l of o)a.push(r(l));return a}case w2:{const a=n({},i);for(const[l,c]of o)a[r(l)]=r(c);return a}case PB:return n(new Date(o),i);case _B:{const{source:a,flags:l}=o;return n(new RegExp(a,l),i)}case IB:{const a=n(new Map,i);for(const[l,c]of o)a.set(r(l),r(c));return a}case RB:{const a=n(new Set,i);for(const l of o)a.add(r(l));return a}case Rfe:{const{name:a,message:l}=o;return n(new iX[a](l),i)}case Ofe:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:a}=new Uint8Array(o);return n(new DataView(a),o)}}return n(new iX[s](o),i)};return r},sX=t=>$Je(new Map,t)(0),og="",{toString:zJe}={},{keys:VJe}=Object,Db=t=>{const e=typeof t;if(e!=="object"||!t)return[HC,e];const n=zJe.call(t).slice(8,-1);switch(n){case"Array":return[gw,og];case"Object":return[w2,og];case"Date":return[PB,og];case"RegExp":return[_B,og];case"Map":return[IB,og];case"Set":return[RB,og];case"DataView":return[gw,n]}return n.includes("Array")?[gw,n]:n.includes("Error")?[Rfe,n]:[w2,n]},UA=([t,e])=>t===HC&&(e==="function"||e==="symbol"),HJe=(t,e,n,r)=>{const i=(o,a)=>{const l=r.push(o)-1;return n.set(a,l),l},s=o=>{if(n.has(o))return n.get(o);let[a,l]=Db(o);switch(a){case HC:{let u=o;switch(l){case"bigint":a=Ofe,u=o.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+l);u=null;break;case"undefined":return i([Ife],o)}return i([a,u],o)}case gw:{if(l){let m=o;return l==="DataView"?m=new Uint8Array(o.buffer):l==="ArrayBuffer"&&(m=new Uint8Array(o)),i([l,[...m]],o)}const u=[],h=i([a,u],o);for(const m of o)u.push(s(m));return h}case w2:{if(l)switch(l){case"BigInt":return i([l,o.toString()],o);case"Boolean":case"Number":case"String":return i([l,o.valueOf()],o)}if(e&&"toJSON"in o)return s(o.toJSON());const u=[],h=i([a,u],o);for(const m of VJe(o))(t||!UA(Db(o[m])))&&u.push([s(m),s(o[m])]);return h}case PB:return i([a,o.toISOString()],o);case _B:{const{source:u,flags:h}=o;return i([a,{source:u,flags:h}],o)}case IB:{const u=[],h=i([a,u],o);for(const[m,g]of o)(t||!(UA(Db(m))||UA(Db(g))))&&u.push([s(m),s(g)]);return h}case RB:{const u=[],h=i([a,u],o);for(const m of o)(t||!UA(Db(m)))&&u.push(s(m));return h}}const{message:c}=o;return i([a,{name:l,message:c}],o)};return s},oX=(t,{json:e,lossy:n}={})=>{const r=[];return HJe(!(e||n),!!e,new Map,r)(t),r},E2=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?sX(oX(t,e)):structuredClone(t):(t,e)=>sX(oX(t,e));function qJe(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function GJe(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function KJe(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||qJe,r=t.options.footnoteBackLabel||GJe,i=t.options.footnoteLabel||"Footnotes",s=t.options.footnoteLabelTagName||"h2",o=t.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let l=-1;for(;++l<t.footnoteOrder.length;){const c=t.footnoteById.get(t.footnoteOrder[l]);if(!c)continue;const u=t.all(c),h=String(c.identifier).toUpperCase(),m=gv(h.toLowerCase());let g=0;const y=[],v=t.footnoteCounts.get(h);for(;v!==void 0&&++g<=v;){y.length>0&&y.push({type:"text",value:" "});let k=typeof n=="string"?n:n(l,g);typeof k=="string"&&(k={type:"text",value:k}),y.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+m+(g>1?"-"+g:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(l,g),className:["data-footnote-backref"]},children:Array.isArray(k)?k:[k]})}const b=u[u.length-1];if(b&&b.type==="element"&&b.tagName==="p"){const k=b.children[b.children.length-1];k&&k.type==="text"?k.value+=" ":b.children.push({type:"text",value:" "}),b.children.push(...y)}else u.push(...y);const w={type:"element",tagName:"li",properties:{id:e+"fn-"+m},children:t.wrap(u,!0)};t.patch(c,w),a.push(w)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...E2(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(a,!0)},{type:"text",value:`
`}]}}const qC=(function(t){if(t==null)return XJe;if(typeof t=="function")return GC(t);if(typeof t=="object")return Array.isArray(t)?WJe(t):YJe(t);if(typeof t=="string")return JJe(t);throw new Error("Expected function, string, or object as test")});function WJe(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=qC(t[n]);return GC(r);function r(...i){let s=-1;for(;++s<e.length;)if(e[s].apply(this,i))return!0;return!1}}function YJe(t){const e=t;return GC(n);function n(r){const i=r;let s;for(s in t)if(i[s]!==e[s])return!1;return!0}}function JJe(t){return GC(e);function e(n){return n&&n.type===t}}function GC(t){return e;function e(n,r,i){return!!(QJe(n)&&t.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function XJe(){return!0}function QJe(t){return t!==null&&typeof t=="object"&&"type"in t}const Mfe=[],ZJe=!0,UL=!1,eXe="skip";function Lfe(t,e,n,r){let i;typeof e=="function"&&typeof n!="function"?(r=n,n=e):i=e;const s=qC(i),o=r?-1:1;a(t,void 0,[])();function a(l,c,u){const h=l&&typeof l=="object"?l:{};if(typeof h.type=="string"){const g=typeof h.tagName=="string"?h.tagName:typeof h.name=="string"?h.name:void 0;Object.defineProperty(m,"name",{value:"node ("+(l.type+(g?"<"+g+">":""))+")"})}return m;function m(){let g=Mfe,y,v,b;if((!e||s(l,c,u[u.length-1]||void 0))&&(g=tXe(n(l,u)),g[0]===UL))return g;if("children"in l&&l.children){const w=l;if(w.children&&g[0]!==eXe)for(v=(r?w.children.length:-1)+o,b=u.concat(w);v>-1&&v<w.children.length;){const k=w.children[v];if(y=a(k,v,b)(),y[0]===UL)return y;v=typeof y[1]=="number"?y[1]:v+o}}return g}}}function tXe(t){return Array.isArray(t)?t:typeof t=="number"?[ZJe,t]:t==null?Mfe:[t]}function OB(t,e,n,r){let i,s,o;typeof e=="function"&&typeof n!="function"?(s=void 0,o=e,i=n):(s=e,o=n,i=r),Lfe(t,s,a,i);function a(l,c){const u=c[c.length-1],h=u?u.children.indexOf(l):void 0;return o(l,h,u)}}const FL={}.hasOwnProperty,nXe={};function rXe(t,e){const n=e||nXe,r=new Map,i=new Map,s=new Map,o={...FJe,...n.handlers},a={all:c,applyData:sXe,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:l,options:n,patch:iXe,wrap:aXe};return OB(t,function(u){if(u.type==="definition"||u.type==="footnoteDefinition"){const h=u.type==="definition"?r:i,m=String(u.identifier).toUpperCase();h.has(m)||h.set(m,u)}}),a;function l(u,h){const m=u.type,g=a.handlers[m];if(FL.call(a.handlers,m)&&g)return g(a,u,h);if(a.options.passThrough&&a.options.passThrough.includes(m)){if("children"in u){const{children:v,...b}=u,w=E2(b);return w.children=a.all(u),w}return E2(u)}return(a.options.unknownHandler||oXe)(a,u,h)}function c(u){const h=[];if("children"in u){const m=u.children;let g=-1;for(;++g<m.length;){const y=a.one(m[g],u);if(y){if(g&&m[g-1].type==="break"&&(!Array.isArray(y)&&y.type==="text"&&(y.value=aX(y.value)),!Array.isArray(y)&&y.type==="element")){const v=y.children[0];v&&v.type==="text"&&(v.value=aX(v.value))}Array.isArray(y)?h.push(...y):h.push(y)}}}return h}}function iXe(t,e){t.position&&(e.position=GKe(t))}function sXe(t,e){let n=e;if(t&&t.data){const r=t.data.hName,i=t.data.hChildren,s=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,E2(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function oXe(t,e){const n=e.data||{},r="value"in e&&!(FL.call(n,"hProperties")||FL.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function aXe(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function aX(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function lX(t,e){const n=rXe(t,e),r=n.one(t,void 0),i=KJe(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function lXe(t,e){return t&&"run"in t?async function(n,r){const i=lX(n,{file:r,...e});await t.run(i,r)}:function(n,r){return lX(n,{file:r,...t||e})}}function cX(t){if(t)throw t}var JO,uX;function cXe(){if(uX)return JO;uX=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(c){return typeof Array.isArray=="function"?Array.isArray(c):e.call(c)==="[object Array]"},s=function(c){if(!c||e.call(c)!=="[object Object]")return!1;var u=t.call(c,"constructor"),h=c.constructor&&c.constructor.prototype&&t.call(c.constructor.prototype,"isPrototypeOf");if(c.constructor&&!u&&!h)return!1;var m;for(m in c);return typeof m>"u"||t.call(c,m)},o=function(c,u){n&&u.name==="__proto__"?n(c,u.name,{enumerable:!0,configurable:!0,value:u.newValue,writable:!0}):c[u.name]=u.newValue},a=function(c,u){if(u==="__proto__")if(t.call(c,u)){if(r)return r(c,u).value}else return;return c[u]};return JO=function l(){var c,u,h,m,g,y,v=arguments[0],b=1,w=arguments.length,k=!1;for(typeof v=="boolean"&&(k=v,v=arguments[1]||{},b=2),(v==null||typeof v!="object"&&typeof v!="function")&&(v={});b<w;++b)if(c=arguments[b],c!=null)for(u in c)h=a(v,u),m=a(c,u),v!==m&&(k&&m&&(s(m)||(g=i(m)))?(g?(g=!1,y=h&&i(h)?h:[]):y=h&&s(h)?h:{},o(v,{name:u,newValue:l(k,y,m)})):typeof m<"u"&&o(v,{name:u,newValue:m}));return v},JO}var uXe=cXe();const XO=gs(uXe);function $L(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function dXe(){const t=[],e={run:n,use:r};return e;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(l,...c){const u=t[++s];let h=-1;if(l){o(l);return}for(;++h<i.length;)(c[h]===null||c[h]===void 0)&&(c[h]=i[h]);i=c,u?fXe(u,a)(...c):o(null,...c)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return t.push(i),e}}function fXe(t,e){let n;return r;function r(...o){const a=t.length>o.length;let l;a&&o.push(i);try{l=t.apply(this,o)}catch(c){const u=c;if(a&&n)throw u;return i(u)}a||(l&&l.then&&typeof l.then=="function"?l.then(s,i):l instanceof Error?i(l):s(l))}function i(o,...a){n||(n=!0,e(o,...a))}function s(o){i(null,o)}}const lc={basename:hXe,dirname:pXe,extname:mXe,join:gXe,sep:"/"};function hXe(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');kE(t);let n=0,r=-1,i=t.length,s;if(e===void 0||e.length===0||e.length>t.length){for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let o=-1,a=e.length-1;for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(t.codePointAt(i)===e.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=t.length),t.slice(n,r)}function pXe(t){if(kE(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function mXe(t){kE(t);let e=t.length,n=-1,r=0,i=-1,s=0,o;for(;e--;){const a=t.codePointAt(e);if(a===47){if(o){r=e+1;break}continue}n<0&&(o=!0,n=e+1),a===46?i<0?i=e:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":t.slice(i,n)}function gXe(...t){let e=-1,n;for(;++e<t.length;)kE(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":yXe(n)}function yXe(t){kE(t);const e=t.codePointAt(0)===47;let n=xXe(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function xXe(t,e){let n="",r=0,i=-1,s=0,o=-1,a,l;for(;++o<=t.length;){if(o<t.length)a=t.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(i+1,o):n=t.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function kE(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const vXe={cwd:bXe};function bXe(){return"/"}function zL(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function wXe(t){if(typeof t=="string")t=new URL(t);else if(!zL(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return EXe(t)}function EXe(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const QO=["history","path","basename","stem","extname","dirname"];class Dfe{constructor(e){let n;e?zL(e)?n={path:e}:typeof e=="string"||SXe(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":vXe.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<QO.length;){const s=QO[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)QO.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?lc.basename(this.path):void 0}set basename(e){e4(e,"basename"),ZO(e,"basename"),this.path=lc.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?lc.dirname(this.path):void 0}set dirname(e){dX(this.basename,"dirname"),this.path=lc.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?lc.extname(this.path):void 0}set extname(e){if(ZO(e,"extname"),dX(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=lc.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){zL(e)&&(e=wXe(e)),e4(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?lc.basename(this.path,this.extname):void 0}set stem(e){e4(e,"stem"),ZO(e,"stem"),this.path=lc.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const i=this.message(e,n,r);throw i.fatal=!0,i}info(e,n,r){const i=this.message(e,n,r);return i.fatal=void 0,i}message(e,n,r){const i=new zs(e,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function ZO(t,e){if(t&&t.includes(lc.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+lc.sep+"`")}function e4(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function dX(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function SXe(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const AXe=(function(t){const r=this.constructor.prototype,i=r[t],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s}),TXe={}.hasOwnProperty;class MB extends AXe{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=dXe()}copy(){const e=new MB;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(XO(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(r4("data",this.frozen),this.namespace[e]=n,this):TXe.call(this.namespace,e)&&this.namespace[e]||void 0:e?(r4("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(e,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=FA(e),r=this.parser||this.Parser;return t4("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),t4("process",this.parser||this.Parser),n4("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=FA(e),l=r.parse(a);r.run(l,a,function(u,h,m){if(u||!h||!m)return c(u);const g=h,y=r.stringify(g,m);CXe(y)?m.value=y:m.result=y,c(u,m)});function c(u,h){u||!h?o(u):s?s(h):n(void 0,h)}}}processSync(e){let n=!1,r;return this.freeze(),t4("processSync",this.parser||this.Parser),n4("processSync",this.compiler||this.Compiler),this.process(e,i),hX("processSync","process",n),r;function i(s,o){n=!0,cX(s),r=o}}run(e,n,r){fX(e),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const l=FA(n);i.run(e,l,c);function c(u,h,m){const g=h||e;u?a(u):o?o(g):r(void 0,g,m)}}}runSync(e,n){let r=!1,i;return this.run(e,n,s),hX("runSync","run",r),i;function s(o,a){cX(o),i=a,r=!0}}stringify(e,n){this.freeze();const r=FA(n),i=this.compiler||this.Compiler;return n4("stringify",i),fX(e),i(e,r)}use(e,...n){const r=this.attachers,i=this.namespace;if(r4("use",this.frozen),e!=null)if(typeof e=="function")l(e,n);else if(typeof e=="object")Array.isArray(e)?a(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(c){if(typeof c=="function")l(c,[]);else if(typeof c=="object")if(Array.isArray(c)){const[u,...h]=c;l(u,h)}else o(c);else throw new TypeError("Expected usable value, not `"+c+"`")}function o(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(c.plugins),c.settings&&(i.settings=XO(!0,i.settings,c.settings))}function a(c){let u=-1;if(c!=null)if(Array.isArray(c))for(;++u<c.length;){const h=c[u];s(h)}else throw new TypeError("Expected a list of plugins, not `"+c+"`")}function l(c,u){let h=-1,m=-1;for(;++h<r.length;)if(r[h][0]===c){m=h;break}if(m===-1)r.push([c,...u]);else if(u.length>0){let[g,...y]=u;const v=r[m][1];$L(v)&&$L(g)&&(g=XO(!0,v,g)),r[m]=[c,g,...y]}}}}const kXe=new MB().freeze();function t4(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function n4(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function r4(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function fX(t){if(!$L(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function hX(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function FA(t){return NXe(t)?t:new Dfe(t)}function NXe(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function CXe(t){return typeof t=="string"||PXe(t)}function PXe(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const _Xe="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",pX=[],mX={allowDangerousHtml:!0},IXe=/^(https?|ircs?|mailto|xmpp)$/i,RXe=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function OXe(t){const e=MXe(t),n=LXe(t);return DXe(e.runSync(e.parse(n),n),t)}function MXe(t){const e=t.rehypePlugins||pX,n=t.remarkPlugins||pX,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...mX}:mX;return kXe().use(pJe).use(n).use(lXe,r).use(e)}function LXe(t){const e=t.children||"",n=new Dfe;return typeof e=="string"&&(n.value=e),n}function DXe(t,e){const n=e.allowedElements,r=e.allowElement,i=e.components,s=e.disallowedElements,o=e.skipHtml,a=e.unwrapDisallowed,l=e.urlTransform||jXe;for(const u of RXe)Object.hasOwn(e,u.from)&&(""+u.from+(u.to?"use `"+u.to+"` instead":"remove it")+_Xe+u.id,void 0);return OB(t,c),XKe(t,{Fragment:d.Fragment,components:i,ignoreInvalidStyle:!0,jsx:d.jsx,jsxs:d.jsxs,passKeys:!0,passNode:!0});function c(u,h,m){if(u.type==="raw"&&m&&typeof h=="number")return o?m.children.splice(h,1):m.children[h]={type:"text",value:u.value},h;if(u.type==="element"){let g;for(g in KO)if(Object.hasOwn(KO,g)&&Object.hasOwn(u.properties,g)){const y=u.properties[g],v=KO[g];(v===null||v.includes(u.tagName))&&(u.properties[g]=l(String(y||""),g,u))}}if(u.type==="element"){let g=n?!n.includes(u.tagName):s?s.includes(u.tagName):!1;if(!g&&r&&typeof h=="number"&&(g=!r(u,h,m)),g&&m&&typeof h=="number")return a&&u.children?m.children.splice(h,1,...u.children):m.children.splice(h,1),h}}}function jXe(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),i=t.indexOf("/");return e===-1||i!==-1&&e>i||n!==-1&&e>n||r!==-1&&e>r||IXe.test(t.slice(0,e))?t:""}function gX(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(e);for(;i!==-1;)r++,i=n.indexOf(e,i+e.length);return r}function BXe(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function UXe(t,e,n){const i=qC((n||{}).ignore||[]),s=FXe(e);let o=-1;for(;++o<s.length;)Lfe(t,"text",a);function a(c,u){let h=-1,m;for(;++h<u.length;){const g=u[h],y=m?m.children:void 0;if(i(g,y?y.indexOf(g):void 0,m))return;m=g}if(m)return l(c,u)}function l(c,u){const h=u[u.length-1],m=s[o][0],g=s[o][1];let y=0;const b=h.children.indexOf(c);let w=!1,k=[];m.lastIndex=0;let N=m.exec(c.value);for(;N;){const R=N.index,D={index:N.index,input:N.input,stack:[...u,c]};let O=g(...N,D);if(typeof O=="string"&&(O=O.length>0?{type:"text",value:O}:void 0),O===!1?m.lastIndex=R+1:(y!==R&&k.push({type:"text",value:c.value.slice(y,R)}),Array.isArray(O)?k.push(...O):O&&k.push(O),y=R+N[0].length,w=!0),!m.global)break;N=m.exec(c.value)}return w?(y<c.value.length&&k.push({type:"text",value:c.value.slice(y)}),h.children.splice(b,1,...k)):k=[c],b+k.length}}function FXe(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let r=-1;for(;++r<n.length;){const i=n[r];e.push([$Xe(i[0]),zXe(i[1])])}return e}function $Xe(t){return typeof t=="string"?new RegExp(BXe(t),"g"):t}function zXe(t){return typeof t=="function"?t:function(){return t}}const i4="phrasing",s4=["autolink","link","image","label"];function VXe(){return{transforms:[JXe],enter:{literalAutolink:qXe,literalAutolinkEmail:o4,literalAutolinkHttp:o4,literalAutolinkWww:o4},exit:{literalAutolink:YXe,literalAutolinkEmail:WXe,literalAutolinkHttp:GXe,literalAutolinkWww:KXe}}}function HXe(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:i4,notInConstruct:s4},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:i4,notInConstruct:s4},{character:":",before:"[ps]",after:"\\/",inConstruct:i4,notInConstruct:s4}]}}function qXe(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function o4(t){this.config.enter.autolinkProtocol.call(this,t)}function GXe(t){this.config.exit.autolinkProtocol.call(this,t)}function KXe(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function WXe(t){this.config.exit.autolinkEmail.call(this,t)}function YXe(t){this.exit(t)}function JXe(t){UXe(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,XXe],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),QXe]],{ignore:["link","linkReference"]})}function XXe(t,e,n,r,i){let s="";if(!jfe(i)||(/^w/i.test(e)&&(n=e+n,e="",s="http://"),!ZXe(n)))return!1;const o=eQe(n+r);if(!o[0])return!1;const a={type:"link",title:null,url:s+e+o[0],children:[{type:"text",value:e+o[0]}]};return o[1]?[a,{type:"text",value:o[1]}]:a}function QXe(t,e,n,r){return!jfe(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function ZXe(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function eQe(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],r=n.indexOf(")");const i=gX(t,"(");let s=gX(t,")");for(;r!==-1&&i>s;)t+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),s++;return[t,n]}function jfe(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||Lm(n)||zC(n))&&(!e||n!==47)}Bfe.peek=cQe;function tQe(){this.buffer()}function nQe(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function rQe(){this.buffer()}function iQe(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function sQe(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Bl(this.sliceSerialize(t)).toLowerCase(),n.label=e}function oQe(t){this.exit(t)}function aQe(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Bl(this.sliceSerialize(t)).toLowerCase(),n.label=e}function lQe(t){this.exit(t)}function cQe(){return"["}function Bfe(t,e,n,r){const i=n.createTracker(r);let s=i.move("[^");const o=n.enter("footnoteReference"),a=n.enter("reference");return s+=i.move(n.safe(n.associationId(t),{after:"]",before:s})),a(),o(),s+=i.move("]"),s}function uQe(){return{enter:{gfmFootnoteCallString:tQe,gfmFootnoteCall:nQe,gfmFootnoteDefinitionLabelString:rQe,gfmFootnoteDefinition:iQe},exit:{gfmFootnoteCallString:sQe,gfmFootnoteCall:oQe,gfmFootnoteDefinitionLabelString:aQe,gfmFootnoteDefinition:lQe}}}function dQe(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:Bfe},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,i,s,o){const a=s.createTracker(o);let l=a.move("[^");const c=s.enter("footnoteDefinition"),u=s.enter("label");return l+=a.move(s.safe(s.associationId(r),{before:l,after:"]"})),u(),l+=a.move("]:"),r.children&&r.children.length>0&&(a.shift(4),l+=a.move((e?`
`:" ")+s.indentLines(s.containerFlow(r,a.current()),e?Ufe:fQe))),c(),l}}function fQe(t,e,n){return e===0?t:Ufe(t,e,n)}function Ufe(t,e,n){return(n?"":"    ")+t}const hQe=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];Ffe.peek=xQe;function pQe(){return{canContainEols:["delete"],enter:{strikethrough:gQe},exit:{strikethrough:yQe}}}function mQe(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:hQe}],handlers:{delete:Ffe}}}function gQe(t){this.enter({type:"delete",children:[]},t)}function yQe(t){this.exit(t)}function Ffe(t,e,n,r){const i=n.createTracker(r),s=n.enter("strikethrough");let o=i.move("~~");return o+=n.containerPhrasing(t,{...i.current(),before:o,after:"~"}),o+=i.move("~~"),s(),o}function xQe(){return"~"}function vQe(t){return t.length}function bQe(t,e){const n=e||{},r=(n.align||[]).concat(),i=n.stringLength||vQe,s=[],o=[],a=[],l=[];let c=0,u=-1;for(;++u<t.length;){const v=[],b=[];let w=-1;for(t[u].length>c&&(c=t[u].length);++w<t[u].length;){const k=wQe(t[u][w]);if(n.alignDelimiters!==!1){const N=i(k);b[w]=N,(l[w]===void 0||N>l[w])&&(l[w]=N)}v.push(k)}o[u]=v,a[u]=b}let h=-1;if(typeof r=="object"&&"length"in r)for(;++h<c;)s[h]=yX(r[h]);else{const v=yX(r);for(;++h<c;)s[h]=v}h=-1;const m=[],g=[];for(;++h<c;){const v=s[h];let b="",w="";v===99?(b=":",w=":"):v===108?b=":":v===114&&(w=":");let k=n.alignDelimiters===!1?1:Math.max(1,l[h]-b.length-w.length);const N=b+"-".repeat(k)+w;n.alignDelimiters!==!1&&(k=b.length+k+w.length,k>l[h]&&(l[h]=k),g[h]=k),m[h]=N}o.splice(1,0,m),a.splice(1,0,g),u=-1;const y=[];for(;++u<o.length;){const v=o[u],b=a[u];h=-1;const w=[];for(;++h<c;){const k=v[h]||"";let N="",R="";if(n.alignDelimiters!==!1){const D=l[h]-(b[h]||0),O=s[h];O===114?N=" ".repeat(D):O===99?D%2?(N=" ".repeat(D/2+.5),R=" ".repeat(D/2-.5)):(N=" ".repeat(D/2),R=N):R=" ".repeat(D)}n.delimiterStart!==!1&&!h&&w.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&k==="")&&(n.delimiterStart!==!1||h)&&w.push(" "),n.alignDelimiters!==!1&&w.push(N),w.push(k),n.alignDelimiters!==!1&&w.push(R),n.padding!==!1&&w.push(" "),(n.delimiterEnd!==!1||h!==c-1)&&w.push("|")}y.push(n.delimiterEnd===!1?w.join("").replace(/ +$/,""):w.join(""))}return y.join(`
`)}function wQe(t){return t==null?"":String(t)}function yX(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function EQe(t,e,n,r){const i=n.enter("blockquote"),s=n.createTracker(r);s.move("> "),s.shift(2);const o=n.indentLines(n.containerFlow(t,s.current()),SQe);return i(),o}function SQe(t,e,n){return">"+(n?"":" ")+t}function AQe(t,e){return xX(t,e.inConstruct,!0)&&!xX(t,e.notInConstruct,!1)}function xX(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let r=-1;for(;++r<e.length;)if(t.includes(e[r]))return!0;return!1}function vX(t,e,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&AQe(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function TQe(t,e){const n=String(t);let r=n.indexOf(e),i=r,s=0,o=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++s>o&&(o=s):s=1,i=r+e.length,r=n.indexOf(e,i);return o}function kQe(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function NQe(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function CQe(t,e,n,r){const i=NQe(n),s=t.value||"",o=i==="`"?"GraveAccent":"Tilde";if(kQe(t,n)){const h=n.enter("codeIndented"),m=n.indentLines(s,PQe);return h(),m}const a=n.createTracker(r),l=i.repeat(Math.max(TQe(s,i)+1,3)),c=n.enter("codeFenced");let u=a.move(l);if(t.lang){const h=n.enter(`codeFencedLang${o}`);u+=a.move(n.safe(t.lang,{before:u,after:" ",encode:["`"],...a.current()})),h()}if(t.lang&&t.meta){const h=n.enter(`codeFencedMeta${o}`);u+=a.move(" "),u+=a.move(n.safe(t.meta,{before:u,after:`
`,encode:["`"],...a.current()})),h()}return u+=a.move(`
`),s&&(u+=a.move(s+`
`)),u+=a.move(l),c(),u}function PQe(t,e,n){return(n?"":"    ")+t}function LB(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function _Qe(t,e,n,r){const i=LB(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("definition");let a=n.enter("label");const l=n.createTracker(r);let c=l.move("[");return c+=l.move(n.safe(n.associationId(t),{before:c,after:"]",...l.current()})),c+=l.move("]: "),a(),!t.url||/[\0- \u007F]/.test(t.url)?(a=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(t.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=n.enter("destinationRaw"),c+=l.move(n.safe(t.url,{before:c,after:t.title?" ":`
`,...l.current()}))),a(),t.title&&(a=n.enter(`title${s}`),c+=l.move(" "+i),c+=l.move(n.safe(t.title,{before:c,after:i,...l.current()})),c+=l.move(i),a()),o(),c}function IQe(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function g1(t){return"&#x"+t.toString(16).toUpperCase()+";"}function S2(t,e,n){const r=Rx(t),i=Rx(e);return r===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}$fe.peek=RQe;function $fe(t,e,n,r){const i=IQe(n),s=n.enter("emphasis"),o=n.createTracker(r),a=o.move(i);let l=o.move(n.containerPhrasing(t,{after:i,before:a,...o.current()}));const c=l.charCodeAt(0),u=S2(r.before.charCodeAt(r.before.length-1),c,i);u.inside&&(l=g1(c)+l.slice(1));const h=l.charCodeAt(l.length-1),m=S2(r.after.charCodeAt(0),h,i);m.inside&&(l=l.slice(0,-1)+g1(h));const g=o.move(i);return s(),n.attentionEncodeSurroundingInfo={after:m.outside,before:u.outside},a+l+g}function RQe(t,e,n){return n.options.emphasis||"*"}function OQe(t,e){let n=!1;return OB(t,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,UL}),!!((!t.depth||t.depth<3)&&kB(t)&&(e.options.setext||n))}function MQe(t,e,n,r){const i=Math.max(Math.min(6,t.depth||1),1),s=n.createTracker(r);if(OQe(t,n)){const u=n.enter("headingSetext"),h=n.enter("phrasing"),m=n.containerPhrasing(t,{...s.current(),before:`
`,after:`
`});return h(),u(),m+`
`+(i===1?"=":"-").repeat(m.length-(Math.max(m.lastIndexOf("\r"),m.lastIndexOf(`
`))+1))}const o="#".repeat(i),a=n.enter("headingAtx"),l=n.enter("phrasing");s.move(o+" ");let c=n.containerPhrasing(t,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(c)&&(c=g1(c.charCodeAt(0))+c.slice(1)),c=c?o+" "+c:o,n.options.closeAtx&&(c+=" "+o),l(),a(),c}zfe.peek=LQe;function zfe(t){return t.value||""}function LQe(){return"<"}Vfe.peek=DQe;function Vfe(t,e,n,r){const i=LB(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("image");let a=n.enter("label");const l=n.createTracker(r);let c=l.move("![");return c+=l.move(n.safe(t.alt,{before:c,after:"]",...l.current()})),c+=l.move("]("),a(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(a=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(t.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=n.enter("destinationRaw"),c+=l.move(n.safe(t.url,{before:c,after:t.title?" ":")",...l.current()}))),a(),t.title&&(a=n.enter(`title${s}`),c+=l.move(" "+i),c+=l.move(n.safe(t.title,{before:c,after:i,...l.current()})),c+=l.move(i),a()),c+=l.move(")"),o(),c}function DQe(){return"!"}Hfe.peek=jQe;function Hfe(t,e,n,r){const i=t.referenceType,s=n.enter("imageReference");let o=n.enter("label");const a=n.createTracker(r);let l=a.move("![");const c=n.safe(t.alt,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),o();const u=n.stack;n.stack=[],o=n.enter("reference");const h=n.safe(n.associationId(t),{before:l,after:"]",...a.current()});return o(),n.stack=u,s(),i==="full"||!c||c!==h?l+=a.move(h+"]"):i==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function jQe(){return"!"}qfe.peek=BQe;function qfe(t,e,n){let r=t.value||"",i="`",s=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++s<n.unsafe.length;){const o=n.unsafe[s],a=n.compilePattern(o);let l;if(o.atBreak)for(;l=a.exec(r);){let c=l.index;r.charCodeAt(c)===10&&r.charCodeAt(c-1)===13&&c--,r=r.slice(0,c)+" "+r.slice(l.index+1)}}return i+r+i}function BQe(){return"`"}function Gfe(t,e){const n=kB(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}Kfe.peek=UQe;function Kfe(t,e,n,r){const i=LB(n),s=i==='"'?"Quote":"Apostrophe",o=n.createTracker(r);let a,l;if(Gfe(t,n)){const u=n.stack;n.stack=[],a=n.enter("autolink");let h=o.move("<");return h+=o.move(n.containerPhrasing(t,{before:h,after:">",...o.current()})),h+=o.move(">"),a(),n.stack=u,h}a=n.enter("link"),l=n.enter("label");let c=o.move("[");return c+=o.move(n.containerPhrasing(t,{before:c,after:"](",...o.current()})),c+=o.move("]("),l(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),c+=o.move("<"),c+=o.move(n.safe(t.url,{before:c,after:">",...o.current()})),c+=o.move(">")):(l=n.enter("destinationRaw"),c+=o.move(n.safe(t.url,{before:c,after:t.title?" ":")",...o.current()}))),l(),t.title&&(l=n.enter(`title${s}`),c+=o.move(" "+i),c+=o.move(n.safe(t.title,{before:c,after:i,...o.current()})),c+=o.move(i),l()),c+=o.move(")"),a(),c}function UQe(t,e,n){return Gfe(t,n)?"<":"["}Wfe.peek=FQe;function Wfe(t,e,n,r){const i=t.referenceType,s=n.enter("linkReference");let o=n.enter("label");const a=n.createTracker(r);let l=a.move("[");const c=n.containerPhrasing(t,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),o();const u=n.stack;n.stack=[],o=n.enter("reference");const h=n.safe(n.associationId(t),{before:l,after:"]",...a.current()});return o(),n.stack=u,s(),i==="full"||!c||c!==h?l+=a.move(h+"]"):i==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function FQe(){return"["}function DB(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function $Qe(t){const e=DB(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function zQe(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function Yfe(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function VQe(t,e,n,r){const i=n.enter("list"),s=n.bulletCurrent;let o=t.ordered?zQe(n):DB(n);const a=t.ordered?o==="."?")":".":$Qe(n);let l=e&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!t.ordered){const u=t.children?t.children[0]:void 0;if((o==="*"||o==="-")&&u&&(!u.children||!u.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(l=!0),Yfe(n)===o&&u){let h=-1;for(;++h<t.children.length;){const m=t.children[h];if(m&&m.type==="listItem"&&m.children&&m.children[0]&&m.children[0].type==="thematicBreak"){l=!0;break}}}}l&&(o=a),n.bulletCurrent=o;const c=n.containerFlow(t,r);return n.bulletLastUsed=o,n.bulletCurrent=s,i(),c}function HQe(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function qQe(t,e,n,r){const i=HQe(n);let s=n.bulletCurrent||DB(n);e&&e.type==="list"&&e.ordered&&(s=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+s);let o=s.length+1;(i==="tab"||i==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(o=Math.ceil(o/4)*4);const a=n.createTracker(r);a.move(s+" ".repeat(o-s.length)),a.shift(o);const l=n.enter("listItem"),c=n.indentLines(n.containerFlow(t,a.current()),u);return l(),c;function u(h,m,g){return m?(g?"":" ".repeat(o))+h:(g?s:s+" ".repeat(o-s.length))+h}}function GQe(t,e,n,r){const i=n.enter("paragraph"),s=n.enter("phrasing"),o=n.containerPhrasing(t,r);return s(),i(),o}const KQe=qC(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function WQe(t,e,n,r){return(t.children.some(function(o){return KQe(o)})?n.containerPhrasing:n.containerFlow).call(n,t,r)}function YQe(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}Jfe.peek=JQe;function Jfe(t,e,n,r){const i=YQe(n),s=n.enter("strong"),o=n.createTracker(r),a=o.move(i+i);let l=o.move(n.containerPhrasing(t,{after:i,before:a,...o.current()}));const c=l.charCodeAt(0),u=S2(r.before.charCodeAt(r.before.length-1),c,i);u.inside&&(l=g1(c)+l.slice(1));const h=l.charCodeAt(l.length-1),m=S2(r.after.charCodeAt(0),h,i);m.inside&&(l=l.slice(0,-1)+g1(h));const g=o.move(i+i);return s(),n.attentionEncodeSurroundingInfo={after:m.outside,before:u.outside},a+l+g}function JQe(t,e,n){return n.options.strong||"*"}function XQe(t,e,n,r){return n.safe(t.value,r)}function QQe(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function ZQe(t,e,n){const r=(Yfe(n)+(n.options.ruleSpaces?" ":"")).repeat(QQe(n));return n.options.ruleSpaces?r.slice(0,-1):r}const Xfe={blockquote:EQe,break:vX,code:CQe,definition:_Qe,emphasis:$fe,hardBreak:vX,heading:MQe,html:zfe,image:Vfe,imageReference:Hfe,inlineCode:qfe,link:Kfe,linkReference:Wfe,list:VQe,listItem:qQe,paragraph:GQe,root:WQe,strong:Jfe,text:XQe,thematicBreak:ZQe};function eZe(){return{enter:{table:tZe,tableData:bX,tableHeader:bX,tableRow:rZe},exit:{codeText:iZe,table:nZe,tableData:a4,tableHeader:a4,tableRow:a4}}}function tZe(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function nZe(t){this.exit(t),this.data.inTable=void 0}function rZe(t){this.enter({type:"tableRow",children:[]},t)}function a4(t){this.exit(t)}function bX(t){this.enter({type:"tableCell",children:[]},t)}function iZe(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,sZe));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function sZe(t,e){return e==="|"?e:t}function oZe(t){const e=t||{},n=e.tableCellPadding,r=e.tablePipeAlign,i=e.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:m,table:o,tableCell:l,tableRow:a}};function o(g,y,v,b){return c(u(g,v,b),g.align)}function a(g,y,v,b){const w=h(g,v,b),k=c([w]);return k.slice(0,k.indexOf(`
`))}function l(g,y,v,b){const w=v.enter("tableCell"),k=v.enter("phrasing"),N=v.containerPhrasing(g,{...b,before:s,after:s});return k(),w(),N}function c(g,y){return bQe(g,{align:y,alignDelimiters:r,padding:n,stringLength:i})}function u(g,y,v){const b=g.children;let w=-1;const k=[],N=y.enter("table");for(;++w<b.length;)k[w]=h(b[w],y,v);return N(),k}function h(g,y,v){const b=g.children;let w=-1;const k=[],N=y.enter("tableRow");for(;++w<b.length;)k[w]=l(b[w],g,y,v);return N(),k}function m(g,y,v){let b=Xfe.inlineCode(g,y,v);return v.stack.includes("tableCell")&&(b=b.replace(/\|/g,"\\$&")),b}}function aZe(){return{exit:{taskListCheckValueChecked:wX,taskListCheckValueUnchecked:wX,paragraph:cZe}}}function lZe(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:uZe}}}function wX(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function cZe(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const i=e.children;let s=-1,o;for(;++s<i.length;){const a=i[s];if(a.type==="paragraph"){o=a;break}}o===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(t)}function uZe(t,e,n,r){const i=t.children[0],s=typeof t.checked=="boolean"&&i&&i.type==="paragraph",o="["+(t.checked?"x":" ")+"] ",a=n.createTracker(r);s&&a.move(o);let l=Xfe.listItem(t,e,n,{...r,...a.current()});return s&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,c)),l;function c(u){return u+o}}function dZe(){return[VXe(),uQe(),pQe(),eZe(),aZe()]}function fZe(t){return{extensions:[HXe(),dQe(t),mQe(),oZe(t),lZe()]}}const hZe={tokenize:vZe,partial:!0},Qfe={tokenize:bZe,partial:!0},Zfe={tokenize:wZe,partial:!0},ehe={tokenize:EZe,partial:!0},pZe={tokenize:SZe,partial:!0},the={name:"wwwAutolink",tokenize:yZe,previous:rhe},nhe={name:"protocolAutolink",tokenize:xZe,previous:ihe},Dd={name:"emailAutolink",tokenize:gZe,previous:she},Jc={};function mZe(){return{text:Jc}}let ip=48;for(;ip<123;)Jc[ip]=Dd,ip++,ip===58?ip=65:ip===91&&(ip=97);Jc[43]=Dd;Jc[45]=Dd;Jc[46]=Dd;Jc[95]=Dd;Jc[72]=[Dd,nhe];Jc[104]=[Dd,nhe];Jc[87]=[Dd,the];Jc[119]=[Dd,the];function gZe(t,e,n){const r=this;let i,s;return o;function o(h){return!VL(h)||!she.call(r,r.previous)||jB(r.events)?n(h):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),a(h))}function a(h){return VL(h)?(t.consume(h),a):h===64?(t.consume(h),l):n(h)}function l(h){return h===46?t.check(pZe,u,c)(h):h===45||h===95||Ls(h)?(s=!0,t.consume(h),l):u(h)}function c(h){return t.consume(h),i=!0,l}function u(h){return s&&i&&Js(r.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(h)):n(h)}}function yZe(t,e,n){const r=this;return i;function i(o){return o!==87&&o!==119||!rhe.call(r,r.previous)||jB(r.events)?n(o):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(hZe,t.attempt(Qfe,t.attempt(Zfe,s),n),n)(o))}function s(o){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(o)}}function xZe(t,e,n){const r=this;let i="",s=!1;return o;function o(h){return(h===72||h===104)&&ihe.call(r,r.previous)&&!jB(r.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),i+=String.fromCodePoint(h),t.consume(h),a):n(h)}function a(h){if(Js(h)&&i.length<5)return i+=String.fromCodePoint(h),t.consume(h),a;if(h===58){const m=i.toLowerCase();if(m==="http"||m==="https")return t.consume(h),l}return n(h)}function l(h){return h===47?(t.consume(h),s?c:(s=!0,l)):n(h)}function c(h){return h===null||b2(h)||lr(h)||Lm(h)||zC(h)?n(h):t.attempt(Qfe,t.attempt(Zfe,u),n)(h)}function u(h){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(h)}}function vZe(t,e,n){let r=0;return i;function i(o){return(o===87||o===119)&&r<3?(r++,t.consume(o),i):o===46&&r===3?(t.consume(o),s):n(o)}function s(o){return o===null?n(o):e(o)}}function bZe(t,e,n){let r,i,s;return o;function o(c){return c===46||c===95?t.check(ehe,l,a)(c):c===null||lr(c)||Lm(c)||c!==45&&zC(c)?l(c):(s=!0,t.consume(c),o)}function a(c){return c===95?r=!0:(i=r,r=void 0),t.consume(c),o}function l(c){return i||r||!s?n(c):e(c)}}function wZe(t,e){let n=0,r=0;return i;function i(o){return o===40?(n++,t.consume(o),i):o===41&&r<n?s(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?t.check(ehe,e,s)(o):o===null||lr(o)||Lm(o)?e(o):(t.consume(o),i)}function s(o){return o===41&&r++,t.consume(o),i}}function EZe(t,e,n){return r;function r(a){return a===33||a===34||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===63||a===95||a===126?(t.consume(a),r):a===38?(t.consume(a),s):a===93?(t.consume(a),i):a===60||a===null||lr(a)||Lm(a)?e(a):n(a)}function i(a){return a===null||a===40||a===91||lr(a)||Lm(a)?e(a):r(a)}function s(a){return Js(a)?o(a):n(a)}function o(a){return a===59?(t.consume(a),r):Js(a)?(t.consume(a),o):n(a)}}function SZe(t,e,n){return r;function r(s){return t.consume(s),i}function i(s){return Ls(s)?n(s):e(s)}}function rhe(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||lr(t)}function ihe(t){return!Js(t)}function she(t){return!(t===47||VL(t))}function VL(t){return t===43||t===45||t===46||t===95||Ls(t)}function jB(t){let e=t.length,n=!1;for(;e--;){const r=t[e][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const AZe={tokenize:RZe,partial:!0};function TZe(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:PZe,continuation:{tokenize:_Ze},exit:IZe}},text:{91:{name:"gfmFootnoteCall",tokenize:CZe},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:kZe,resolveTo:NZe}}}}function kZe(t,e,n){const r=this;let i=r.events.length;const s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o;for(;i--;){const l=r.events[i][1];if(l.type==="labelImage"){o=l;break}if(l.type==="gfmFootnoteCall"||l.type==="labelLink"||l.type==="label"||l.type==="image"||l.type==="link")break}return a;function a(l){if(!o||!o._balanced)return n(l);const c=Bl(r.sliceSerialize({start:o.end,end:r.now()}));return c.codePointAt(0)!==94||!s.includes(c.slice(1))?n(l):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(l),t.exit("gfmFootnoteCallLabelMarker"),e(l))}}function NZe(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},t[t.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},a=[t[n+1],t[n+2],["enter",r,e],t[n+3],t[n+4],["enter",i,e],["exit",i,e],["enter",s,e],["enter",o,e],["exit",o,e],["exit",s,e],t[t.length-2],t[t.length-1],["exit",r,e]];return t.splice(n,t.length-n+1,...a),t}function CZe(t,e,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s=0,o;return a;function a(h){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(h),t.exit("gfmFootnoteCallLabelMarker"),l}function l(h){return h!==94?n(h):(t.enter("gfmFootnoteCallMarker"),t.consume(h),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",c)}function c(h){if(s>999||h===93&&!o||h===null||h===91||lr(h))return n(h);if(h===93){t.exit("chunkString");const m=t.exit("gfmFootnoteCallString");return i.includes(Bl(r.sliceSerialize(m)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(h),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(h)}return lr(h)||(o=!0),s++,t.consume(h),h===92?u:c}function u(h){return h===91||h===92||h===93?(t.consume(h),s++,c):c(h)}}function PZe(t,e,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s,o=0,a;return l;function l(y){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(y),t.exit("gfmFootnoteDefinitionLabelMarker"),c}function c(y){return y===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(y),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",u):n(y)}function u(y){if(o>999||y===93&&!a||y===null||y===91||lr(y))return n(y);if(y===93){t.exit("chunkString");const v=t.exit("gfmFootnoteDefinitionLabelString");return s=Bl(r.sliceSerialize(v)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(y),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),m}return lr(y)||(a=!0),o++,t.consume(y),y===92?h:u}function h(y){return y===91||y===92||y===93?(t.consume(y),o++,u):u(y)}function m(y){return y===58?(t.enter("definitionMarker"),t.consume(y),t.exit("definitionMarker"),i.includes(s)||i.push(s),In(t,g,"gfmFootnoteDefinitionWhitespace")):n(y)}function g(y){return e(y)}}function _Ze(t,e,n){return t.check(TE,e,t.attempt(AZe,e,n))}function IZe(t){t.exit("gfmFootnoteDefinition")}function RZe(t,e,n){const r=this;return In(t,i,"gfmFootnoteDefinitionIndent",5);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?e(s):n(s)}}function OZe(t){let n=(t||{}).singleTilde;const r={name:"strikethrough",tokenize:s,resolveAll:i};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(o,a){let l=-1;for(;++l<o.length;)if(o[l][0]==="enter"&&o[l][1].type==="strikethroughSequenceTemporary"&&o[l][1]._close){let c=l;for(;c--;)if(o[c][0]==="exit"&&o[c][1].type==="strikethroughSequenceTemporary"&&o[c][1]._open&&o[l][1].end.offset-o[l][1].start.offset===o[c][1].end.offset-o[c][1].start.offset){o[l][1].type="strikethroughSequence",o[c][1].type="strikethroughSequence";const u={type:"strikethrough",start:Object.assign({},o[c][1].start),end:Object.assign({},o[l][1].end)},h={type:"strikethroughText",start:Object.assign({},o[c][1].end),end:Object.assign({},o[l][1].start)},m=[["enter",u,a],["enter",o[c][1],a],["exit",o[c][1],a],["enter",h,a]],g=a.parser.constructs.insideSpan.null;g&&sa(m,m.length,0,VC(g,o.slice(c+1,l),a)),sa(m,m.length,0,[["exit",h,a],["enter",o[l][1],a],["exit",o[l][1],a],["exit",u,a]]),sa(o,c-1,l-c+3,m),l=c+m.length-2;break}}for(l=-1;++l<o.length;)o[l][1].type==="strikethroughSequenceTemporary"&&(o[l][1].type="data");return o}function s(o,a,l){const c=this.previous,u=this.events;let h=0;return m;function m(y){return c===126&&u[u.length-1][1].type!=="characterEscape"?l(y):(o.enter("strikethroughSequenceTemporary"),g(y))}function g(y){const v=Rx(c);if(y===126)return h>1?l(y):(o.consume(y),h++,g);if(h<2&&!n)return l(y);const b=o.exit("strikethroughSequenceTemporary"),w=Rx(y);return b._open=!w||w===2&&!!v,b._close=!v||v===2&&!!w,a(y)}}}class MZe{constructor(){this.map=[]}add(e,n,r){LZe(this,e,n,r)}consume(e){if(this.map.sort(function(s,o){return s[0]-o[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];r.push(e.slice()),e.length=0;let i=r.pop();for(;i;){for(const s of i)e.push(s);i=r.pop()}this.map.length=0}}function LZe(t,e,n,r){let i=0;if(!(n===0&&r.length===0)){for(;i<t.map.length;){if(t.map[i][0]===e){t.map[i][1]+=n,t.map[i][2].push(...r);return}i+=1}t.map.push([e,n,r])}}function DZe(t,e){let n=!1;const r=[];for(;e<t.length;){const i=t[e];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const s=r.length-1;r[s]=r[s]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return r}function jZe(){return{flow:{null:{name:"table",tokenize:BZe,resolveAll:UZe}}}}function BZe(t,e,n){const r=this;let i=0,s=0,o;return a;function a($){let W=r.events.length-1;for(;W>-1;){const T=r.events[W][1].type;if(T==="lineEnding"||T==="linePrefix")W--;else break}const H=W>-1?r.events[W][1].type:null,F=H==="tableHead"||H==="tableRow"?O:l;return F===O&&r.parser.lazy[r.now().line]?n($):F($)}function l($){return t.enter("tableHead"),t.enter("tableRow"),c($)}function c($){return $===124||(o=!0,s+=1),u($)}function u($){return $===null?n($):Wt($)?s>1?(s=0,r.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume($),t.exit("lineEnding"),g):n($):An($)?In(t,u,"whitespace")($):(s+=1,o&&(o=!1,i+=1),$===124?(t.enter("tableCellDivider"),t.consume($),t.exit("tableCellDivider"),o=!0,u):(t.enter("data"),h($)))}function h($){return $===null||$===124||lr($)?(t.exit("data"),u($)):(t.consume($),$===92?m:h)}function m($){return $===92||$===124?(t.consume($),h):h($)}function g($){return r.interrupt=!1,r.parser.lazy[r.now().line]?n($):(t.enter("tableDelimiterRow"),o=!1,An($)?In(t,y,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)($):y($))}function y($){return $===45||$===58?b($):$===124?(o=!0,t.enter("tableCellDivider"),t.consume($),t.exit("tableCellDivider"),v):D($)}function v($){return An($)?In(t,b,"whitespace")($):b($)}function b($){return $===58?(s+=1,o=!0,t.enter("tableDelimiterMarker"),t.consume($),t.exit("tableDelimiterMarker"),w):$===45?(s+=1,w($)):$===null||Wt($)?R($):D($)}function w($){return $===45?(t.enter("tableDelimiterFiller"),k($)):D($)}function k($){return $===45?(t.consume($),k):$===58?(o=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume($),t.exit("tableDelimiterMarker"),N):(t.exit("tableDelimiterFiller"),N($))}function N($){return An($)?In(t,R,"whitespace")($):R($)}function R($){return $===124?y($):$===null||Wt($)?!o||i!==s?D($):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e($)):D($)}function D($){return n($)}function O($){return t.enter("tableRow"),B($)}function B($){return $===124?(t.enter("tableCellDivider"),t.consume($),t.exit("tableCellDivider"),B):$===null||Wt($)?(t.exit("tableRow"),e($)):An($)?In(t,B,"whitespace")($):(t.enter("data"),z($))}function z($){return $===null||$===124||lr($)?(t.exit("data"),B($)):(t.consume($),$===92?U:z)}function U($){return $===92||$===124?(t.consume($),z):z($)}}function UZe(t,e){let n=-1,r=!0,i=0,s=[0,0,0,0],o=[0,0,0,0],a=!1,l=0,c,u,h;const m=new MZe;for(;++n<t.length;){const g=t[n],y=g[1];g[0]==="enter"?y.type==="tableHead"?(a=!1,l!==0&&(EX(m,e,l,c,u),u=void 0,l=0),c={type:"table",start:Object.assign({},y.start),end:Object.assign({},y.end)},m.add(n,0,[["enter",c,e]])):y.type==="tableRow"||y.type==="tableDelimiterRow"?(r=!0,h=void 0,s=[0,0,0,0],o=[0,n+1,0,0],a&&(a=!1,u={type:"tableBody",start:Object.assign({},y.start),end:Object.assign({},y.end)},m.add(n,0,[["enter",u,e]])),i=y.type==="tableDelimiterRow"?2:u?3:1):i&&(y.type==="data"||y.type==="tableDelimiterMarker"||y.type==="tableDelimiterFiller")?(r=!1,o[2]===0&&(s[1]!==0&&(o[0]=o[1],h=$A(m,e,s,i,void 0,h),s=[0,0,0,0]),o[2]=n)):y.type==="tableCellDivider"&&(r?r=!1:(s[1]!==0&&(o[0]=o[1],h=$A(m,e,s,i,void 0,h)),s=o,o=[s[1],n,0,0])):y.type==="tableHead"?(a=!0,l=n):y.type==="tableRow"||y.type==="tableDelimiterRow"?(l=n,s[1]!==0?(o[0]=o[1],h=$A(m,e,s,i,n,h)):o[1]!==0&&(h=$A(m,e,o,i,n,h)),i=0):i&&(y.type==="data"||y.type==="tableDelimiterMarker"||y.type==="tableDelimiterFiller")&&(o[3]=n)}for(l!==0&&EX(m,e,l,c,u),m.consume(e.events),n=-1;++n<e.events.length;){const g=e.events[n];g[0]==="enter"&&g[1].type==="table"&&(g[1]._align=DZe(e.events,n))}return t}function $A(t,e,n,r,i,s){const o=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",a="tableContent";n[0]!==0&&(s.end=Object.assign({},Ag(e.events,n[0])),t.add(n[0],0,[["exit",s,e]]));const l=Ag(e.events,n[1]);if(s={type:o,start:Object.assign({},l),end:Object.assign({},l)},t.add(n[1],0,[["enter",s,e]]),n[2]!==0){const c=Ag(e.events,n[2]),u=Ag(e.events,n[3]),h={type:a,start:Object.assign({},c),end:Object.assign({},u)};if(t.add(n[2],0,[["enter",h,e]]),r!==2){const m=e.events[n[2]],g=e.events[n[3]];if(m[1].end=Object.assign({},g[1].end),m[1].type="chunkText",m[1].contentType="text",n[3]>n[2]+1){const y=n[2]+1,v=n[3]-n[2]-1;t.add(y,v,[])}}t.add(n[3]+1,0,[["exit",h,e]])}return i!==void 0&&(s.end=Object.assign({},Ag(e.events,i)),t.add(i,0,[["exit",s,e]]),s=void 0),s}function EX(t,e,n,r,i){const s=[],o=Ag(e.events,n);i&&(i.end=Object.assign({},o),s.push(["exit",i,e])),r.end=Object.assign({},o),s.push(["exit",r,e]),t.add(n+1,0,s)}function Ag(t,e){const n=t[e],r=n[0]==="enter"?"start":"end";return n[1][r]}const FZe={name:"tasklistCheck",tokenize:zZe};function $Ze(){return{text:{91:FZe}}}function zZe(t,e,n){const r=this;return i;function i(l){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(l):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),s)}function s(l){return lr(l)?(t.enter("taskListCheckValueUnchecked"),t.consume(l),t.exit("taskListCheckValueUnchecked"),o):l===88||l===120?(t.enter("taskListCheckValueChecked"),t.consume(l),t.exit("taskListCheckValueChecked"),o):n(l)}function o(l){return l===93?(t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),a):n(l)}function a(l){return Wt(l)?e(l):An(l)?t.check({tokenize:VZe},e,n)(l):n(l)}}function VZe(t,e,n){return In(t,r,"whitespace");function r(i){return i===null?n(i):e(i)}}function HZe(t){return gfe([mZe(),TZe(),OZe(t),jZe(),$Ze()])}const qZe={};function GZe(t){const e=this,n=t||qZe,r=e.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),s=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),o=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(HZe(n)),s.push(dZe()),o.push(fZe(n))}const Ws=A.forwardRef(({className:t,...e},n)=>d.jsx("div",{ref:n,className:Pt("rounded border border-[#232328] bg-[#14151a] text-card-foreground shadow-sm",t),...e}));Ws.displayName="Card";const HL=A.forwardRef(({className:t,...e},n)=>d.jsx("div",{ref:n,className:Pt("flex flex-col space-y-1.5 p-6",t),...e}));HL.displayName="CardHeader";const qL=A.forwardRef(({className:t,...e},n)=>d.jsx("div",{ref:n,className:Pt("font-semibold leading-none tracking-tight text-white",t),...e}));qL.displayName="CardTitle";const GL=A.forwardRef(({className:t,...e},n)=>d.jsx("div",{ref:n,className:Pt("text-sm text-muted-foreground",t),...e}));GL.displayName="CardDescription";const Tu=A.forwardRef(({className:t,...e},n)=>d.jsx("div",{ref:n,className:Pt("p-6 pt-0",t),...e}));Tu.displayName="CardContent";const KZe=A.forwardRef(({className:t,...e},n)=>d.jsx("div",{ref:n,className:Pt("flex items-center p-6 pt-0",t),...e}));KZe.displayName="CardFooter";const WZe=({messages:t})=>{const e=A.useRef(null),n=A.useMemo(()=>{const r=[];return t.forEach(i=>{i.role==="model"&&i.toolResults&&i.toolResults.length>0&&i.toolResults.forEach(s=>{if(s.type==="error")return;const o=s.title||"",a=s.details||"";if(o.includes("Swap")||o.includes("Order")||o.includes("Transfer")||o.includes("Withdraw")||o.includes("Position")||o.includes("Leverage")){let l="info";o.includes("Swap")?l="swap":o.includes("Order")||o.includes("Position")||o.includes("Leverage")?l="order":(o.includes("Transfer")||o.includes("Withdraw"))&&(l="transfer"),r.push({type:l,title:o,details:a.split(`
`)[0]||a,subDetails:s.tx?"Transaction Executed":void 0,timestamp:i.timestamp,tx:s.tx})}else o.includes("Task")||o.includes("Scheduled")?r.push({type:"info",title:o,details:a,timestamp:i.timestamp}):o.includes("Price")||o.includes("OHLCV")||o.includes("Indicator")||o.includes("TradingView")||o.includes("Summary")||o.includes("Market Data")?r.push({type:"price",title:o,details:a,timestamp:i.timestamp}):o.includes("Balance")?r.push({type:"balance",title:"Balance Checked",details:a.split(`
`)[0],subDetails:"View specific assets in chat",timestamp:i.timestamp}):r.push({type:"info",title:o,details:a.substring(0,100)+(a.length>100?"...":""),timestamp:i.timestamp})})}),r},[t]);return A.useEffect(()=>{e.current&&e.current.scrollTo({top:e.current.scrollHeight,behavior:"smooth"})},[n.length]),n.length===0?null:d.jsxs("div",{ref:e,className:"w-full h-full overflow-y-auto pr-1 custom-scrollbar space-y-3 pb-4",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-2 px-1 sticky top-0 bg-slate-900/90 backdrop-blur-sm py-2 z-10",children:[d.jsx(to,{size:12,className:"text-indigo-400"}),d.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider text-slate-500",children:"Activity Feed"})]}),d.jsx(js,{children:n.map((r,i)=>{var l;const s=r.tx,o=r.title.includes("Hyperliquid")||r.title.includes("Order"),a=s?o?`https://app.hyperliquid.xyz/explorer/tx/${s}`:`https://solscan.io/tx/${s}`:null;return d.jsx(Mt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:i*.05},children:d.jsxs(Ws,{className:"p-3 relative overflow-hidden group hover:border-indigo-500/30 transition-all duration-300",children:[d.jsx("div",{className:"absolute top-0 right-0 w-12 h-12 bg-indigo-500/5 rounded-full blur-xl -z-10 transition-all duration-700 group-hover:bg-indigo-500/10"}),d.jsx("div",{className:"flex items-center justify-between mb-1.5",children:d.jsxs("div",{className:"flex items-center gap-1.5",children:[d.jsx("div",{className:Pt("w-1 h-1 rounded-full",r.type==="error"?"bg-red-500":"bg-indigo-500")}),d.jsx("span",{className:"text-[9px] text-slate-600 font-mono",children:new Date(r.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("h3",{className:"text-xs font-bold text-white leading-tight",children:r.title}),d.jsx("div",{className:"py-1",children:r.type==="swap"?d.jsx("div",{className:"bg-slate-800/50 rounded-lg p-2 border border-slate-700/50",children:d.jsx("p",{className:"text-[10px] text-slate-300 font-medium",children:r.details})}):r.type==="price"&&r.details.includes(":")&&!r.details.includes(`
`)?d.jsxs("div",{className:"flex flex-col gap-0.5",children:[d.jsx("div",{className:"text-lg font-bold text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-teal-300",children:(l=r.details.split(":")[1])==null?void 0:l.trim()}),d.jsx("div",{className:"text-[10px] text-slate-400 font-medium",children:r.details.split(":")[0]})]}):d.jsx("p",{className:"text-[10px] text-slate-300 font-medium",children:r.details})}),d.jsxs("div",{className:"flex items-center justify-between mt-1 pt-1 border-t border-slate-800/50",children:[r.subDetails&&!s&&d.jsx("div",{className:"flex items-center gap-1.5 text-[10px] text-emerald-400 font-medium",children:r.subDetails}),s&&d.jsxs("a",{href:a||"#",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1.5 text-[10px] text-indigo-400 hover:text-indigo-300 transition-colors group/link ml-auto",children:["View Transaction",d.jsx(Jne,{size:10,className:"group-hover/link:translate-x-0.5 group-hover/link:-translate-y-0.5 transition-transform"})]})]})]})]})},`${r.timestamp}-${i}`)})})]})},YZe={meteora:{label:"Meteora",shortLabel:"MET",color:"#8B5CF6",bgColor:"rgba(139, 92, 246, 0.15)",borderColor:"rgba(139, 92, 246, 0.3)"},raydium:{label:"Raydium",shortLabel:"RAY",color:"#14B8A6",bgColor:"rgba(20, 184, 166, 0.15)",borderColor:"rgba(20, 184, 166, 0.3)"},hyperliquid:{label:"Hyperliquid",shortLabel:"HL",color:"#E7FE55",bgColor:"rgba(231, 254, 85, 0.15)",borderColor:"rgba(231, 254, 85, 0.3)"},solana:{label:"Solana",shortLabel:"SOL",color:"#9945FF",bgColor:"rgba(153, 69, 255, 0.15)",borderColor:"rgba(153, 69, 255, 0.3)"},polymarket:{label:"Polymarket",shortLabel:"PM",color:"#2563EB",bgColor:"rgba(37, 99, 235, 0.15)",borderColor:"rgba(37, 99, 235, 0.3)"}};function KL(t,e){switch(t){case"meteora":return`https://app.meteora.ag/pools/${e}`;case"raydium":return`https://raydium.io/liquidity-v2/?mode=add&pool_id=${e}`;default:return""}}function JZe(t,e){switch(t){case"solana":return`https://solscan.io/tx/${e}`;case"hyperliquid":return`https://app.hyperliquid.xyz/explorer/tx/${e}`;case"polygon":return`https://polygonscan.com/tx/${e}`;default:return""}}function A2(t,e={}){if(t==null||isNaN(t))return"N/A";const{prefix:n="$",suffix:r="",decimals:i=2,showSign:s=!1}=e,o=Math.abs(t),a=s&&t>0?"+":t<0?"-":"";let l,c="";return o>=1e9?(l=(o/1e9).toFixed(i),c="B"):o>=1e6?(l=(o/1e6).toFixed(i),c="M"):o>=1e3?(l=(o/1e3).toFixed(i),c="K"):o>=1?l=o.toFixed(i):o>0?l=o.toFixed(Math.max(i,4)):l="0",l=l.replace(/\.?0+$/,""),c&&!l.includes(".")&&(l+=".0"),`${a}${n}${l}${c}${r}`}function $g(t,e={}){if(t==null||isNaN(t))return"N/A";const{decimals:n=2,showSign:r=!1,isRaw:i=!0}=e,s=i?t:t*100;return`${r&&s>0?"+":""}${s.toFixed(n)}%`}function ohe(t,e={}){if(t==null||isNaN(t))return"N/A";const{symbol:n="",maxDecimals:r=6,minDecimals:i=2}=e;let s;return t>=1e3?s=t.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}):t>=1?s=t.toLocaleString("en-US",{minimumFractionDigits:i,maximumFractionDigits:Math.min(4,r)}):t>0?s=t.toLocaleString("en-US",{minimumFractionDigits:i,maximumFractionDigits:r}):s="0",n?`${s} ${n}`:s}function WL(t,e={}){if(t==null||isNaN(t))return"N/A";const{compact:n=!1,showSign:r=!1,decimals:i=2}=e;return n?A2(t,{prefix:"$",showSign:r,decimals:i}):`${r&&t>0?"+":""}$${Math.abs(t).toLocaleString("en-US",{minimumFractionDigits:i,maximumFractionDigits:i})}`}function SX(t,e={}){if(!t)return"N/A";const{startChars:n=6,endChars:r=4}=e;return t.length<=n+r+3?t:`${t.slice(0,n)}...${t.slice(-r)}`}const BB=({protocol:t,size:e="sm",showLabel:n=!1,className:r})=>{const i=YZe[t];if(!i)return null;const s={sm:"text-[9px] px-1.5 py-0.5",md:"text-[10px] px-2 py-1",lg:"text-xs px-2.5 py-1"};return d.jsx("span",{className:Pt("inline-flex items-center font-bold uppercase tracking-wider rounded",s[e],r),style:{color:i.color,backgroundColor:i.bgColor,border:`1px solid ${i.borderColor}`},children:n?i.label:i.shortLabel})},AX=({data:t,index:e=0,compact:n=!1,className:r})=>{const i=t.poolUrl||KL(t.protocol,t.poolAddress),s=o=>{o.preventDefault(),i&&window.open(i,"_blank","noopener,noreferrer")};return d.jsxs(Mt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:e*.05},className:Pt("bg-[#1a1b21] border border-[#232328] rounded-lg p-3 group","hover:border-[#E7FE55]/30 transition-all duration-300","relative overflow-hidden",r),children:[d.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-[#E7FE55]/5 rounded-full blur-2xl -z-0 opacity-0 group-hover:opacity-100 transition-opacity"}),d.jsxs("div",{className:"flex items-center justify-between mb-2 relative z-10",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(BB,{protocol:t.protocol,size:"sm"}),d.jsxs("span",{className:"text-sm font-bold text-white",children:[t.tokenA.symbol," / ",t.tokenB.symbol]})]}),i&&d.jsx("button",{onClick:s,className:"p-1.5 rounded hover:bg-[#E7FE55]/10 text-[#747580] hover:text-[#E7FE55] transition-colors",title:"Open Pool",children:d.jsx(ld,{size:14})})]}),d.jsxs("div",{className:Pt("grid gap-2 text-[11px] relative z-10",n?"grid-cols-2":"grid-cols-3"),children:[t.volume24h!==void 0&&d.jsxs("div",{className:"flex items-center gap-1.5",children:[d.jsx(yn,{size:12,className:"text-[#60a5fa]"}),d.jsxs("div",{children:[d.jsx("div",{className:"text-[#747580] text-[9px] uppercase tracking-wider",children:"Vol"}),d.jsx("div",{className:"font-semibold text-white",children:A2(t.volume24h)})]})]}),t.tvl!==void 0&&d.jsxs("div",{className:"flex items-center gap-1.5",children:[d.jsx(Rw,{size:12,className:"text-[#8b5cf6]"}),d.jsxs("div",{children:[d.jsx("div",{className:"text-[#747580] text-[9px] uppercase tracking-wider",children:"TVL"}),d.jsx("div",{className:"font-semibold text-white",children:A2(t.tvl)})]})]}),t.apy!==void 0&&d.jsxs("div",{className:"flex items-center gap-1.5",children:[d.jsx(Nke,{size:12,className:"text-[#34d399]"}),d.jsxs("div",{children:[d.jsx("div",{className:"text-[#747580] text-[9px] uppercase tracking-wider",children:"APY"}),d.jsx("div",{className:Pt("font-semibold",t.apy>0?"text-[#34d399]":"text-white"),children:$g(t.apy)})]})]})]}),t.currentPrice!==void 0&&!n&&d.jsxs("div",{className:"mt-2 pt-2 border-t border-[#232328] text-[10px] text-[#747580] relative z-10",children:["Price: ",d.jsxs("span",{className:"text-white font-mono",children:["$",t.currentPrice.toFixed(4)]})]})]})},XZe={solana:{color:"#9945FF",label:"Solana"},hyperliquid:{color:"#E7FE55",label:"Hyperliquid"},polygon:{color:"#8247E5",label:"Polygon"}},YL=({data:t,index:e=0,className:n})=>{const r=XZe[t.network],i=t.valueUsd!==void 0&&t.valueUsd>0;return d.jsxs(Mt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:e*.05},className:Pt("bg-[#1a1b21] border border-[#232328] rounded-lg p-4 group","hover:border-[#E7FE55]/30 transition-all duration-300",n),children:[d.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[d.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center",style:{backgroundColor:`${r.color}15`,border:`1px solid ${r.color}30`},children:d.jsx(fh,{size:16,style:{color:r.color}})}),d.jsxs("div",{children:[d.jsxs("div",{className:"text-xs font-semibold text-white",children:[t.token.symbol," Balance"]}),d.jsx("div",{className:"text-[10px] text-[#747580]",children:r.label})]})]}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"text-xl font-bold text-white",children:ohe(t.amount,{symbol:t.token.symbol})}),t.valueUsd!==void 0&&d.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[d.jsx("span",{className:"text-[#747580]",children:""}),d.jsx("span",{className:Pt("font-medium",i?"text-[#34d399]":"text-[#747580]"),children:WL(t.valueUsd)})]})]})]})},QZe=({balances:t,className:e})=>d.jsx("div",{className:Pt("grid grid-cols-1 sm:grid-cols-2 gap-3",e),children:t.map((n,r)=>d.jsx(YL,{data:n,index:r},`${n.network}-${n.token.symbol}-${r}`))}),ZZe={success:{icon:nk,color:"#34d399",bgColor:"rgba(52, 211, 153, 0.1)",borderColor:"rgba(52, 211, 153, 0.3)",label:"Success"},pending:{icon:Hi,color:"#fbbf24",bgColor:"rgba(251, 191, 36, 0.1)",borderColor:"rgba(251, 191, 36, 0.3)",label:"Pending"},failed:{icon:fx,color:"#ef4444",bgColor:"rgba(239, 68, 68, 0.1)",borderColor:"rgba(239, 68, 68, 0.3)",label:"Failed"}},eet=({data:t,index:e=0,className:n})=>{const r=ZZe[t.status],i=r.icon,s=t.explorerUrl||(t.txHash?JZe(t.network,t.txHash):null),o=a=>{a.preventDefault(),s&&window.open(s,"_blank","noopener,noreferrer")};return d.jsxs(Mt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:e*.05},className:Pt("bg-[#1a1b21] border rounded-lg p-4 group","transition-all duration-300",n),style:{borderColor:r.borderColor},children:[d.jsx("div",{className:"flex items-center justify-between mb-3",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center",style:{backgroundColor:r.bgColor},children:d.jsx(i,{size:16,style:{color:r.color}})}),d.jsxs("div",{children:[d.jsx("div",{className:"text-sm font-semibold text-white",children:t.title}),d.jsx("div",{className:"text-[10px]",style:{color:r.color},children:r.label})]})]})}),t.details&&d.jsxs("div",{className:"p-3 rounded-lg mb-3 text-sm",style:{backgroundColor:r.bgColor},children:[t.details.amount!==void 0&&t.details.token&&d.jsxs("div",{className:"flex items-center gap-2 text-white font-medium",children:[d.jsx("span",{children:ohe(t.details.amount,{symbol:t.details.token})}),t.details.from&&t.details.to&&d.jsxs(d.Fragment,{children:[d.jsx(x8,{size:14,className:"text-[#747580]"}),d.jsx("span",{className:"text-[#747580] text-xs font-mono",children:SX(t.details.to)})]})]}),t.details.fee!==void 0&&d.jsxs("div",{className:"text-[10px] text-[#747580] mt-1",children:["Fee: $",t.details.fee.toFixed(2)]})]}),t.description&&d.jsx("p",{className:"text-xs text-[#a0a0a8] mb-3",children:t.description}),s&&d.jsxs("button",{onClick:o,className:"flex items-center gap-1.5 text-[11px] text-[#60a5fa] hover:text-[#93c5fd] transition-colors group/link",children:["View Transaction",d.jsx(ld,{size:12,className:"group-hover/link:translate-x-0.5 group-hover/link:-translate-y-0.5 transition-transform"})]}),t.txHash&&d.jsxs("div",{className:"mt-2 pt-2 border-t border-[#232328] text-[9px] font-mono text-[#747580]",children:["TX: ",SX(t.txHash,{startChars:10,endChars:8})]})]})},tet={high:{color:"#34d399",label:"High",emoji:""},medium:{color:"#fbbf24",label:"Medium",emoji:""},low:{color:"#ef4444",label:"Low",emoji:""}},net={conservative:{color:"#34d399",bgColor:"rgba(52, 211, 153, 0.1)",emoji:""},moderate:{color:"#fbbf24",bgColor:"rgba(251, 191, 36, 0.1)",emoji:""},aggressive:{color:"#ef4444",bgColor:"rgba(239, 68, 68, 0.1)",emoji:""}},ret=({data:t,rangeSuggestions:e,index:n=0,className:r})=>{const i=tet[t.confidence],s=t.priceChange24h!==void 0&&t.priceChange24h>=0,o=t.priceChange7d!==void 0&&t.priceChange7d>=0;return d.jsxs(Mt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:n*.05},className:Pt("bg-[#1a1b21] border border-[#232328] rounded-lg p-4 group","hover:border-[#E7FE55]/30 transition-all duration-300",r),children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-8 h-8 rounded-full bg-[#60a5fa]/10 border border-[#60a5fa]/30 flex items-center justify-center",children:d.jsx(UTe,{size:16,className:"text-[#60a5fa]"})}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-sm font-semibold text-white",children:t.poolName||`Pool ${t.poolAddress.slice(0,8)}...`}),d.jsx(BB,{protocol:t.protocol,size:"sm"})]}),d.jsx("div",{className:"text-[10px] text-[#747580]",children:"Volatility Analysis"})]})]}),d.jsxs("div",{className:"text-right",children:[d.jsxs("div",{className:"text-xs font-mono text-white",children:["$",t.currentPrice.toFixed(4)]}),d.jsx("div",{className:"text-[9px] text-[#747580]",children:"Current Price"})]})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[d.jsxs("div",{className:"bg-[#0f1015] rounded-lg p-3",children:[d.jsx("div",{className:"text-[9px] text-[#747580] uppercase tracking-wider mb-1",children:"Daily Vol"}),d.jsx("div",{className:"text-lg font-bold text-[#60a5fa]",children:$g(t.volatilityDaily)})]}),d.jsxs("div",{className:"bg-[#0f1015] rounded-lg p-3",children:[d.jsx("div",{className:"text-[9px] text-[#747580] uppercase tracking-wider mb-1",children:"Annual Vol"}),d.jsx("div",{className:"text-lg font-bold text-[#8b5cf6]",children:$g(t.volatilityAnnualized)})]})]}),(t.priceChange24h!==void 0||t.priceChange7d!==void 0)&&d.jsxs("div",{className:"flex gap-4 mb-4 text-xs",children:[t.priceChange24h!==void 0&&d.jsxs("div",{className:"flex items-center gap-1",children:[s?d.jsx(yn,{size:12,className:"text-[#34d399]"}):d.jsx(vm,{size:12,className:"text-[#ef4444]"}),d.jsx("span",{className:s?"text-[#34d399]":"text-[#ef4444]",children:$g(t.priceChange24h,{showSign:!0})}),d.jsx("span",{className:"text-[#747580]",children:"24h"})]}),t.priceChange7d!==void 0&&d.jsxs("div",{className:"flex items-center gap-1",children:[o?d.jsx(yn,{size:12,className:"text-[#34d399]"}):d.jsx(vm,{size:12,className:"text-[#ef4444]"}),d.jsx("span",{className:o?"text-[#34d399]":"text-[#ef4444]",children:$g(t.priceChange7d,{showSign:!0})}),d.jsx("span",{className:"text-[#747580]",children:"7d"})]})]}),t.tvl!==void 0&&d.jsxs("div",{className:"text-xs text-[#747580] mb-3",children:["TVL: ",d.jsx("span",{className:"text-white font-medium",children:A2(t.tvl)})]}),e&&e.length>0&&d.jsxs("div",{className:"mt-4 pt-4 border-t border-[#232328]",children:[d.jsx("div",{className:"text-[10px] text-[#747580] uppercase tracking-wider mb-3",children:"Suggested Ranges"}),d.jsx("div",{className:"space-y-2",children:e.map((a,l)=>{const c=net[a.strategy];return d.jsxs("div",{className:"p-2 rounded-lg text-xs",style:{backgroundColor:c.bgColor},children:[d.jsxs("div",{className:"flex items-center justify-between mb-1",children:[d.jsxs("span",{className:"font-semibold capitalize",style:{color:c.color},children:[c.emoji," ",a.strategy," (",a.sigmaMultiple,")"]}),d.jsxs("span",{className:"text-[#747580]",children:[a.widthPercent.toFixed(1),"% width"]})]}),d.jsxs("div",{className:"font-mono text-[11px] text-white",children:["$",a.priceMin.toFixed(4)," - $",a.priceMax.toFixed(4)]}),d.jsx("div",{className:"text-[9px] text-[#747580] mt-1",children:a.estimatedTimeInRange})]},l)})})]}),d.jsxs("div",{className:"mt-3 pt-3 border-t border-[#232328] flex items-center justify-between text-[10px]",children:[d.jsxs("span",{className:"text-[#747580]",children:[t.dataPoints," data points"]}),d.jsxs("span",{style:{color:i.color},children:[i.emoji," ",i.label," Confidence"]})]}),t.confidence==="low"&&d.jsxs("div",{className:"mt-2 flex items-center gap-1.5 text-[10px] text-[#fbbf24] bg-[#fbbf24]/10 p-2 rounded",children:[d.jsx(hs,{size:12}),d.jsx("span",{children:"Ranges based on estimated volatility due to limited data"})]})]})},iet=({data:t,index:e=0,className:n})=>{var o,a;const r=t.direction==="long",i=t.pnl!==void 0,s=i&&t.pnl.value>=0;return d.jsxs(Mt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:e*.05},className:Pt("bg-[#1a1b21] border rounded-lg p-4 group","hover:border-[#E7FE55]/30 transition-all duration-300",r?"border-[#34d399]/30":"border-[#ef4444]/30",n),children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(BB,{protocol:t.protocol,size:"sm"}),d.jsx("span",{className:"text-base font-bold text-white",children:t.coin}),d.jsx("span",{className:Pt("text-xs font-bold px-2 py-0.5 rounded",r?"bg-[#34d399]/20 text-[#34d399]":"bg-[#ef4444]/20 text-[#ef4444]"),children:r?" LONG":" SHORT"})]}),t.leverage&&d.jsxs("span",{className:"text-xs text-[#747580]",children:[t.leverage,"x"]})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3 text-xs",children:[d.jsxs("div",{children:[d.jsx("div",{className:"text-[#747580] text-[9px] uppercase tracking-wider mb-1",children:"Size"}),d.jsxs("div",{className:"font-semibold text-white",children:[(o=t.size)==null?void 0:o.toFixed(4)," ",t.coin]})]}),d.jsxs("div",{children:[d.jsx("div",{className:"text-[#747580] text-[9px] uppercase tracking-wider mb-1",children:"Entry"}),d.jsxs("div",{className:"font-mono text-white",children:["$",(a=t.entryPrice)==null?void 0:a.toFixed(2)]})]})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[d.jsxs("div",{children:[d.jsx("div",{className:"text-[#747580] text-[9px] uppercase tracking-wider mb-1",children:"Value"}),d.jsx("div",{className:"font-bold text-white",children:WL(t.valueUsd)})]}),i&&d.jsxs("div",{children:[d.jsx("div",{className:"text-[#747580] text-[9px] uppercase tracking-wider mb-1",children:"Unrealized PnL"}),d.jsxs("div",{className:Pt("flex items-center gap-1 font-bold",s?"text-[#34d399]":"text-[#ef4444]"),children:[s?d.jsx(yn,{size:12}):d.jsx(vm,{size:12}),WL(t.pnl.value,{showSign:!0}),d.jsxs("span",{className:"text-[10px] opacity-70",children:["(",$g(t.pnl.percent,{showSign:!0}),")"]})]})]})]}),t.liquidationPrice&&t.liquidationPrice>0&&d.jsxs("div",{className:"mt-3 pt-3 border-t border-[#232328] flex items-center gap-2 text-[10px] text-[#fbbf24]",children:[d.jsx(hs,{size:12}),d.jsxs("span",{children:["Liq. Price: $",t.liquidationPrice.toFixed(2)]})]})]})},set=({children:t,columns:e=2,gap:n="md",className:r})=>{const i={1:"grid-cols-1",2:"grid-cols-1 sm:grid-cols-2",3:"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3"},s={sm:"gap-2",md:"gap-3",lg:"gap-4"};return d.jsx("div",{className:Pt("grid",i[e],s[n],r),children:t})},oet=({data:t})=>{const e=()=>!t.summary&&!t.title?null:d.jsxs("div",{className:"mb-3",children:[t.title&&d.jsx("h4",{className:"text-sm font-semibold text-white mb-1",children:t.title}),t.summary&&d.jsx("p",{className:"text-xs text-[#a0a0a8]",children:t.summary})]});switch(t.resultType){case"pool":case"pools":{const n=t.items.filter(r=>r.type==="pool");return n.length===0?null:n.length===1?d.jsxs("div",{children:[e(),d.jsx(AX,{data:n[0]})]}):d.jsxs("div",{children:[e(),d.jsx(set,{columns:2,children:n.map((r,i)=>d.jsx(AX,{data:r,index:i,compact:n.length>4},r.poolAddress||i))})]})}case"balance":case"balances":{const n=t.items.filter(r=>r.type==="balance");return n.length===0?null:n.length===1?d.jsxs("div",{children:[e(),d.jsx(YL,{data:n[0]})]}):d.jsxs("div",{children:[e(),d.jsx(QZe,{balances:n})]})}case"transaction":{const n=t.items.filter(r=>r.type==="transaction");return n.length===0?null:d.jsxs("div",{children:[e(),d.jsx("div",{className:"space-y-3",children:n.map((r,i)=>d.jsx(eet,{data:r,index:i},r.txHash||i))})]})}case"volatility":{const n=t.items.filter(r=>r.type==="volatility");return n.length===0?null:n.length>1?d.jsxs("div",{children:[e(),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full text-xs",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"text-left text-[#747580] border-b border-[#232328]",children:[d.jsx("th",{className:"pb-2 pr-2",children:"Pool"}),d.jsx("th",{className:"pb-2 px-2",children:"Protocol"}),d.jsx("th",{className:"pb-2 px-2",children:"TVL"}),d.jsx("th",{className:"pb-2 px-2",children:"Daily Vol"}),d.jsx("th",{className:"pb-2 px-2",children:"Ann. Vol"}),d.jsx("th",{className:"pb-2 pl-2",children:"Price"})]})}),d.jsx("tbody",{children:n.map((r,i)=>{var s;return d.jsxs("tr",{className:"border-b border-[#232328]/50",children:[d.jsx("td",{className:"py-2 pr-2 text-white font-medium",children:((s=r.poolName)==null?void 0:s.slice(0,15))||r.poolAddress.slice(0,8)+"..."}),d.jsx("td",{className:"py-2 px-2",children:d.jsx("span",{className:"text-[9px] px-1.5 py-0.5 rounded font-bold uppercase",style:{color:r.protocol==="meteora"?"#8B5CF6":"#14B8A6",backgroundColor:r.protocol==="meteora"?"rgba(139, 92, 246, 0.15)":"rgba(20, 184, 166, 0.15)"},children:r.protocol==="meteora"?"MET":"RAY"})}),d.jsx("td",{className:"py-2 px-2 text-white",children:r.tvl?`$${(r.tvl/1e3).toFixed(1)}K`:"N/A"}),d.jsxs("td",{className:"py-2 px-2 text-[#60a5fa]",children:[r.volatilityDaily.toFixed(2),"%"]}),d.jsxs("td",{className:"py-2 px-2 text-[#8b5cf6]",children:[r.volatilityAnnualized.toFixed(1),"%"]}),d.jsxs("td",{className:"py-2 pl-2 text-white font-mono",children:["$",r.currentPrice.toFixed(4)]})]},r.poolAddress)})})]})})]}):d.jsxs("div",{children:[e(),d.jsx(ret,{data:n[0],rangeSuggestions:t.rangeSuggestions})]})}case"position":case"positions":{const n=t.items.filter(s=>s.type==="balance"),r=t.items.filter(s=>s.type==="position"),i=r.filter(s=>s.protocol==="hyperliquid"&&s.coin);return i.length>0?d.jsxs("div",{children:[e(),n.length>0&&d.jsx("div",{className:"mb-3",children:d.jsx(YL,{data:n[0]})}),d.jsx("div",{className:"space-y-3",children:i.map((s,o)=>d.jsx(iet,{data:s,index:o},`${s.coin}-${o}`))})]}):d.jsxs("div",{children:[e(),d.jsx("div",{className:"space-y-2",children:r.map((s,o)=>d.jsxs("div",{className:"bg-[#1a1b21] border border-[#232328] rounded-lg p-3 text-xs",children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsx("span",{className:"font-semibold text-white",children:s.poolName||"Position"}),d.jsxs("span",{className:"text-[#34d399] font-bold",children:["$",s.valueUsd.toLocaleString()]})]}),s.tokenA&&s.tokenB&&d.jsxs("div",{className:"text-[#747580]",children:[s.tokenA.amount.toFixed(4)," ",s.tokenA.symbol," / ",s.tokenB.amount.toFixed(4)," ",s.tokenB.symbol]}),s.unclaimedFeesUsd!==void 0&&s.unclaimedFeesUsd>0&&d.jsxs("div",{className:"text-[#E7FE55] mt-1",children:["Unclaimed: $",s.unclaimedFeesUsd.toFixed(2)]})]},s.poolAddress||o))})]})}default:return null}},aet=[{id:"pools",label:"Liquidity Pools",icon:d.jsx(Rw,{size:14}),color:"#9b87f5",suggestions:["Show top pools by volatility","Find SOL/USDC pools","What is the best APY pool?","Suggest optimal range for SOL/USDC"]},{id:"hyperliquid",label:"Hyperliquid",icon:d.jsx(yn,{size:14}),color:"#34d399",suggestions:["Check my HL balance","Open long BTC 5x","Show my open positions","Close my ETH position"]},{id:"solana",label:"Solana",icon:d.jsx(fh,{size:14}),color:"#9b87f5",suggestions:["Check my wallet balance","Show SOL price","List my token holdings","Transfer 1 SOL to..."]},{id:"withdrawals",label:"Withdrawals",icon:d.jsx(NTe,{size:14}),color:"#60a5fa",suggestions:["Withdraw 100 USDC from HL","Show pending withdrawals","Check withdrawal status"]}],cet=({onSuggestionClick:t})=>{const[e,n]=A.useState(null);return d.jsxs("div",{className:"w-full max-w-2xl mx-auto mt-6",children:[d.jsx("p",{className:"text-[10px] uppercase tracking-[0.15em] text-[#747580] text-center mb-4 font-medium",children:"Try asking about"}),d.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:aet.map(r=>d.jsxs("div",{className:"relative",onMouseEnter:()=>n(r.id),onMouseLeave:()=>n(null),children:[d.jsxs(Mt.button,{className:"flex items-center gap-2 px-3 py-1.5 rounded text-[11px] font-medium transition-all border",style:{backgroundColor:e===r.id?`${r.color}15`:"transparent",borderColor:e===r.id?`${r.color}40`:"#232328",color:e===r.id?r.color:"#747580"},whileHover:{scale:1.02},whileTap:{scale:.98},children:[r.icon,r.label,d.jsx(Xa,{size:12,className:"transition-transform",style:{transform:e===r.id?"rotate(90deg)":"rotate(0deg)",opacity:e===r.id?1:.5}})]}),d.jsx(js,{children:e===r.id&&d.jsx(Mt.div,{className:"absolute top-full left-0 mt-1 z-50 min-w-[200px]",initial:{opacity:0,y:-5},animate:{opacity:1,y:0},exit:{opacity:0,y:-5},transition:{duration:.15},children:d.jsx("div",{className:"bg-[#14151a] border border-[#232328] rounded p-1 shadow-lg",style:{borderColor:`${r.color}30`},children:r.suggestions.map((i,s)=>d.jsx(Mt.button,{className:"w-full text-left px-3 py-2 text-[11px] text-[#e4e5e9] hover:bg-[#1a1b21] rounded transition-colors",onClick:()=>t(i),whileHover:{x:2},children:i},s))})})})]},r.id))})]})};var uet=Symbol.for("react.lazy"),T2=cN[" use ".trim().toString()];function det(t){return typeof t=="object"&&t!==null&&"then"in t}function ahe(t){return t!=null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===uet&&"_payload"in t&&det(t._payload)}function fet(t){const e=pet(t),n=A.forwardRef((r,i)=>{let{children:s,...o}=r;ahe(s)&&typeof T2=="function"&&(s=T2(s._payload));const a=A.Children.toArray(s),l=a.find(get);if(l){const c=l.props.children,u=a.map(h=>h===l?A.Children.count(c)>1?A.Children.only(null):A.isValidElement(c)?c.props.children:null:h);return d.jsx(e,{...o,ref:i,children:A.isValidElement(c)?A.cloneElement(c,void 0,u):null})}return d.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}var het=fet("Slot");function pet(t){const e=A.forwardRef((n,r)=>{let{children:i,...s}=n;if(ahe(i)&&typeof T2=="function"&&(i=T2(i._payload)),A.isValidElement(i)){const o=xet(i),a=yet(s,i.props);return i.type!==A.Fragment&&(a.ref=r?Qx(r,o):o),A.cloneElement(i,a)}return A.Children.count(i)>1?A.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var met=Symbol("radix.slottable");function get(t){return A.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===met}function yet(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const l=s(...a);return i(...a),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function xet(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}const TX=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,kX=Rn,lhe=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return kX(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(c=>{const u=n==null?void 0:n[c],h=s==null?void 0:s[c];if(u===null)return null;const m=TX(u)||TX(h);return i[c][m]}),a=n&&Object.entries(n).reduce((c,u)=>{let[h,m]=u;return m===void 0||(c[h]=m),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:h,className:m,...g}=u;return Object.entries(g).every(y=>{let[v,b]=y;return Array.isArray(b)?b.includes({...s,...a}[v]):{...s,...a}[v]===b})?[...c,h,m]:c},[]);return kX(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)},vet=lhe("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-medium transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-slate-700 bg-transparent hover:bg-slate-800 hover:text-slate-100",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-slate-800 hover:text-slate-100",link:"text-primary underline-offset-4 hover:underline",success:"bg-emerald-600 text-white shadow hover:bg-emerald-700"},size:{default:"h-10 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-12 rounded-lg px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Vi=A.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},s)=>{const o=r?het:"button";return d.jsx(o,{className:Pt(vet({variant:e,size:n,className:t})),ref:s,...i})});Vi.displayName="Button";const Ox=A.forwardRef(({className:t,type:e,...n},r)=>d.jsx("input",{type:e,className:Pt("flex h-10 w-full rounded-lg border border-slate-700 bg-slate-800/50 px-3 py-2 text-sm text-white placeholder:text-slate-500 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-slate-500/50 focus-visible:border-slate-500/50 disabled:cursor-not-allowed disabled:opacity-50 transition-colors",t),ref:r,...n}));Ox.displayName="Input";const bet=({messages:t,inputMessage:e,setInputMessage:n,handleSendMessage:r,isAiProcessing:i,aiStatus:s,scrollRef:o,isVaultUnlocked:a,password:l,setPassword:c,unlockVault:u,hasVault:h,onNavigate:m})=>{const g=A.useRef(null),y=A.useMemo(()=>t.some(v=>v.role==="model"&&v.toolResults&&v.toolResults.length>0&&v.toolResults.some(b=>b.type!=="error")),[t]);return A.useEffect(()=>{!i&&a&&g.current&&g.current.focus()},[i,a]),A.useEffect(()=>{o.current&&(o.current.scrollTop=o.current.scrollHeight)},[t,o]),!a&&h?d.jsx(Mt.div,{className:"flex flex-col h-[calc(100vh-8rem)] items-center justify-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:d.jsxs("div",{className:"max-w-md w-full mx-auto space-y-6 p-8",children:[d.jsxs("div",{className:"text-center",children:[d.jsx(Mt.div,{className:"w-16 h-16 bg-[#1a1b21] rounded-full flex items-center justify-center mx-auto mb-4 border border-[#232328]",animate:{scale:[1,1.05,1]},transition:{duration:2,repeat:1/0},children:d.jsx(uh,{size:32,className:"text-[#E7FE55]"})}),d.jsx("h2",{className:"text-xl font-semibold text-white tracking-tight",children:"Unlock Vault Operator"}),d.jsx("p",{className:"text-[#747580] mt-2 text-sm",children:"Enter your password to start using Vault Operator."})]}),d.jsxs(Ws,{className:"p-6 space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-[10px] font-semibold text-[#747580] uppercase tracking-[0.1em] mb-2",children:"Password"}),d.jsx(Ox,{type:"password",value:l,onChange:v=>c(v.target.value),placeholder:"Enter password...",onKeyDown:v=>v.key==="Enter"&&u(),className:"focus-visible:ring-[#E7FE55]/20 focus-visible:border-[#E7FE55]/30",autoFocus:!0})]}),d.jsxs(Vi,{onClick:u,className:"w-full",size:"lg",children:[d.jsx(ere,{size:18})," Unlock Vault Operator"]})]}),d.jsx("p",{className:"text-center text-[11px] text-[#747580]",children:"This is the same password used to unlock your Vault."})]})}):h?d.jsxs("div",{className:"flex h-[calc(100vh-9rem)] gap-6",children:[d.jsxs("div",{className:Pt("flex-1 flex flex-col bg-transparent rounded overflow-hidden relative min-w-0",y&&"lg:pr-2"),children:[d.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 space-y-6",ref:o,children:[d.jsxs(js,{children:[t.length===0&&d.jsxs(Mt.div,{className:"flex flex-col items-center justify-center h-full",initial:{opacity:0},animate:{opacity:1},children:[d.jsx(Mg,{size:48,className:"mb-4 text-[#E7FE55] opacity-60"}),d.jsx("p",{className:"text-sm font-semibold text-white",children:"Vault Operator Ready"}),d.jsx("p",{className:"text-[11px] text-[#747580] mb-2",children:"Ask me to check balances, swap tokens, or schedule automations."}),d.jsx(cet,{onSuggestionClick:v=>{r(v)}})]}),t.map((v,b)=>d.jsx(Mt.div,{className:Pt("flex",v.role==="user"?"justify-end":"justify-start"),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:b*.05},children:d.jsxs("div",{className:Pt("flex gap-4",y?"max-w-[85%]":"max-w-[90%]",v.role==="user"?"flex-row-reverse":"flex-row"),children:[d.jsx("div",{className:Pt("w-9 h-9 rounded-full flex items-center justify-center flex-shrink-0 border",v.role==="user"?"bg-[#9b87f5]/10 border-[#9b87f5]/20":"bg-[#E7FE55]/10 border-[#E7FE55]/20"),children:v.role==="user"?d.jsx(Jke,{size:18,className:"text-[#9b87f5]"}):d.jsx(Mg,{size:18,className:"text-[#E7FE55]"})}),d.jsxs("div",{className:Pt("flex flex-col",v.role==="user"?"items-end":"items-start"),children:[d.jsxs("div",{className:Pt("px-4 py-3 rounded-lg bg-[#1a1b21] text-[#e4e5e9] border border-[#232328]",v.role==="user"?"rounded-tr-sm":"rounded-tl-sm"),children:[v.toolResults&&v.toolResults.length>0&&d.jsx("div",{className:"mb-4 space-y-3 w-full",children:v.toolResults.map((w,k)=>d.jsx("div",{children:w.structuredData?d.jsx(oet,{data:w.structuredData}):d.jsxs("div",{className:Pt("text-[11px] p-3 rounded border",w.type==="success"?"bg-[#34d399]/10 border-[#34d399]/30 text-[#34d399]":w.type==="error"?"bg-red-500/10 border-red-500/30 text-red-400":"bg-[#60a5fa]/10 border-[#60a5fa]/30 text-[#60a5fa]"),children:[d.jsxs("div",{className:"flex items-center gap-2 font-bold mb-1",children:[w.type==="success"?d.jsx(nk,{size:14}):w.type==="error"?d.jsx(hs,{size:14}):d.jsx(Zne,{size:14}),w.title]}),d.jsx("div",{className:"whitespace-pre-wrap font-mono opacity-90",children:w.details}),w.tx&&d.jsxs("div",{className:"mt-2 pt-2 border-t border-white/10 text-[10px] font-mono opacity-70 truncate",children:["TX: ",w.tx]})]})},k))}),d.jsx("div",{className:"prose prose-invert prose-sm max-w-none",children:d.jsx(OXe,{remarkPlugins:[GZe],components:{a:({href:w,children:k})=>{if(w!=null&&w.startsWith("nav://")){const N=w.replace("nav://",""),D={DEALER_CONFIG:we.DEALER_CONFIG,DEALER_DASHBOARD:we.DEALER_DASHBOARD,DEALER_THINKING:we.DEALER_THINKING,VAULT_DEALER:we.VAULT_DEALER,DASHBOARD:we.DASHBOARD,VAULT:we.VAULT,SCHEDULER:we.SCHEDULER}[N];return D&&m?d.jsxs(Vi,{onClick:O=>{O.preventDefault(),O.stopPropagation(),m(D)},className:"mt-3 inline-flex",children:[d.jsx(ik,{size:16}),d.jsx("span",{children:k}),d.jsx(x8,{size:14})]}):d.jsx("span",{className:"text-indigo-400",children:k})}return d.jsx("a",{href:w,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-400 hover:text-indigo-300 underline",children:k})},pre:({children:w})=>d.jsx("pre",{className:"overflow-x-auto overflow-y-auto max-h-[400px] custom-scrollbar bg-[#0f1015] rounded border border-[#232328] p-4 my-4",children:w}),code:({node:w,inline:k,className:N,children:R,...D})=>k?d.jsx("code",{className:"bg-[#1a1b21] px-1.5 py-0.5 rounded text-sm text-[#E7FE55] font-mono border border-[#232328]",...D,children:R}):d.jsx("code",{className:`${N} text-sm`,...D,children:R})},children:v.content})})]}),d.jsx("span",{className:"text-[10px] text-[#747580] mt-1.5 px-1",children:new Date(v.timestamp).toLocaleTimeString()})]})]})},v.id))]}),d.jsx(js,{children:i&&d.jsx(Mt.div,{className:"flex justify-start",initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0},children:d.jsxs("div",{className:"flex gap-4 max-w-[80%]",children:[d.jsx(Mt.div,{className:"w-9 h-9 rounded-full bg-[#E7FE55]/10 border border-[#E7FE55]/20 flex items-center justify-center flex-shrink-0",animate:{scale:[1,1.1,1]},transition:{duration:1,repeat:1/0},children:d.jsx(Mg,{size:18,className:"text-[#E7FE55]"})}),d.jsxs("div",{className:"bg-[#1a1b21] px-4 py-3 rounded-lg rounded-tl-sm border border-[#232328] flex items-center gap-3",children:[d.jsxs("div",{className:"flex space-x-1",children:[d.jsx(Mt.div,{className:"w-1.5 h-1.5 bg-[#E7FE55] rounded-full",animate:{y:[0,-6,0]},transition:{duration:.5,repeat:1/0,delay:0}}),d.jsx(Mt.div,{className:"w-1.5 h-1.5 bg-[#E7FE55] rounded-full",animate:{y:[0,-6,0]},transition:{duration:.5,repeat:1/0,delay:.15}}),d.jsx(Mt.div,{className:"w-1.5 h-1.5 bg-[#E7FE55] rounded-full",animate:{y:[0,-6,0]},transition:{duration:.5,repeat:1/0,delay:.3}})]}),d.jsx("span",{className:"text-[11px] text-[#E7FE55] font-medium",children:s})]})]})})})]}),d.jsxs("div",{className:"p-4 bg-transparent z-10 box-border",children:[d.jsxs("div",{className:"relative",children:[d.jsx(Ox,{ref:g,type:"text",value:e,onChange:v=>n(v.target.value),onKeyDown:v=>v.key==="Enter"&&!i&&a&&r(),placeholder:"Ask Vault Operator to swap tokens, check prices, or schedule a task...",className:"pl-5 pr-14 py-5 text-sm bg-[#1a1b21] border-[#232328] focus-visible:ring-1 focus-visible:ring-[#E7FE55]/20 focus-visible:border-[#E7FE55]/30 placeholder:text-[#747580]",disabled:i}),d.jsx(Vi,{onClick:r,disabled:!e.trim()||i,size:"icon",className:"absolute right-2 top-2 bottom-2 h-auto bg-[#E7FE55] hover:bg-[#f0ff7a] text-black",children:i?d.jsx(Hi,{size:18,className:"animate-spin"}):d.jsx(Lke,{size:18})})]}),d.jsx("p",{className:"text-center mt-3 text-[10px] text-[#747580] tracking-wide",children:"Vault Operator can make mistakes. Always verify transactions."})]})]}),d.jsx(js,{children:y&&d.jsx(Mt.div,{className:"hidden lg:block w-64 xl:w-72 h-full flex-shrink-0",initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:50},children:d.jsx(WZe,{messages:t})})})]}):d.jsx(Mt.div,{className:"flex flex-col h-[calc(100vh-8rem)] items-center justify-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:d.jsxs("div",{className:"max-w-md w-full mx-auto space-y-6 p-8 text-center",children:[d.jsx("div",{className:"w-16 h-16 bg-[#1a1b21] rounded-full flex items-center justify-center mx-auto mb-4 border border-[#232328]",children:d.jsx(Mg,{size:32,className:"text-[#747580]"})}),d.jsx("h2",{className:"text-xl font-semibold text-white tracking-tight",children:"Create a Vault First"}),d.jsxs("p",{className:"text-[#747580] text-sm",children:["You need to create a vault before using Vault Operator. Go to the ",d.jsx("span",{className:"text-[#E7FE55]",children:"Vault"})," page to set up your wallets."]})]})})},wet=lhe("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-red-500/20 text-red-400 border-red-500/30",outline:"text-foreground border-slate-600",success:"border-transparent bg-emerald-500/20 text-emerald-400 border-emerald-500/30",warning:"border-transparent bg-yellow-500/20 text-yellow-400 border-yellow-500/30",info:"border-transparent bg-blue-500/20 text-blue-400 border-blue-500/30",purple:"border-transparent bg-purple-500/20 text-purple-400 border-purple-500/30"}},defaultVariants:{variant:"default"}}),nl=A.forwardRef(({className:t,variant:e,...n},r)=>d.jsx("div",{ref:r,className:Pt(wet({variant:e}),t),...n}));nl.displayName="Badge";const Eet=({scheduledTasks:t,setScheduledTasks:e,addNotification:n})=>{const r=t.filter(a=>a.status==="active"||a.status==="executing"),i=t.filter(a=>a.status==="completed"||a.status==="failed").sort((a,l)=>(l.lastExecuted||0)-(a.lastExecuted||0)),s=()=>{window.confirm("Clear all task history?")&&(e(a=>{const l=a.filter(c=>c.status==="active"||c.status==="executing");return ke.setItem(ke.getUserKey("agent_scheduled_tasks"),JSON.stringify(l)),l}),n("Task history cleared"))},o=a=>{window.confirm("Cancel this task?")&&(e(l=>{const c=l.map(u=>u.id===a?{...u,status:"failed",result:"Cancelled by user"}:u);return ke.setItem(ke.getUserKey("agent_scheduled_tasks"),JSON.stringify(c)),c}),n(`Task #${a.slice(-4)} cancelled`))};return d.jsx(Mt.div,{className:"space-y-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[d.jsxs("div",{className:"space-y-4",children:[d.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[d.jsx(Hi,{size:20,className:"text-emerald-400"})," Active Tasks"]}),d.jsx(js,{children:r.length===0?d.jsx(Mt.div,{initial:{opacity:0},animate:{opacity:1},children:d.jsxs(Ws,{className:"p-8 text-center border-dashed border-2 border-slate-800",children:[d.jsx(v8,{size:48,className:"mx-auto text-slate-700 mb-4"}),d.jsx("p",{className:"text-slate-500",children:"No active tasks."}),d.jsx("p",{className:"text-xs text-slate-600 mt-2",children:'Ask the AI to "schedule a swap in 10 mins" or "alert me when BTC > 100k"'})]})}):r.map((a,l)=>{const c=JSON.parse(a.params||"{}");let u=0,h=0,m=0;if(a.type==="HL_ORDER"&&c.price&&c.size){const{price:g,size:y,leverage:v=1,side:b,takeProfit:w,stopLoss:k}=c,N=b==="B";w&&(u=(N?w-g:g-w)*y),k&&(h=(N?g-k:k-g)*y);const R=1/v-.005;m=N?g*(1-R):g*(1+R)}return d.jsx(Mt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{delay:l*.1},children:d.jsxs(Ws,{className:"p-5 border-l-4 border-l-emerald-500 relative overflow-hidden",children:[a.status==="executing"&&d.jsx("div",{className:"absolute top-2 right-2",children:d.jsxs("span",{className:"relative flex h-3 w-3",children:[d.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"}),d.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-emerald-500"})]})}),d.jsxs("div",{className:"flex justify-between items-start mb-3",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(nl,{variant:a.type==="SWAP"||a.type==="TRANSFER"?"info":a.type==="HL_ORDER"?"purple":a.type==="ALERT"?"warning":"secondary",children:a.type}),d.jsxs("span",{className:"text-xs font-mono text-slate-500",children:["#",a.id.slice(-4)]})]}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsxs("span",{className:"text-xs text-slate-400",children:["Created: ",new Date(a.createdAt).toLocaleTimeString()]}),a.status!=="executing"&&d.jsxs(Vi,{variant:"ghost",size:"sm",onClick:()=>o(a.id),className:"text-red-400 hover:text-red-300 hover:bg-red-900/20",children:[d.jsx(xm,{size:12})," Cancel"]})]})]}),d.jsxs("div",{className:"mb-3 space-y-2",children:[a.type==="SWAP"&&d.jsxs("div",{className:"bg-slate-950/50 p-3 rounded-lg border border-slate-800",children:[d.jsx("div",{className:"text-xs text-slate-500 mb-1 font-bold uppercase",children:"Swap Details"}),d.jsxs("div",{className:"text-sm text-white font-medium",children:[c.amount," ",c.inputToken,"  ",c.outputToken]})]}),a.type==="HL_ORDER"&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"bg-slate-950/50 p-3 rounded-lg border border-purple-900/30 space-y-2",children:[d.jsx("div",{className:"text-xs text-slate-500 mb-2 font-bold uppercase",children:"Hyperliquid Order"}),d.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[d.jsxs("div",{children:[d.jsx("span",{className:"text-slate-500",children:"Asset:"}),d.jsx("span",{className:"ml-2 text-white font-bold",children:c.coin})]}),d.jsxs("div",{children:[d.jsx("span",{className:"text-slate-500",children:"Direction:"}),d.jsx("span",{className:Pt("ml-2 font-bold",c.side==="B"?"text-emerald-400":"text-red-400"),children:c.side==="B"?"LONG":"SHORT"})]}),d.jsxs("div",{children:[d.jsx("span",{className:"text-slate-500",children:"Size:"}),d.jsx("span",{className:"ml-2 text-white font-medium",children:c.size})]}),d.jsxs("div",{children:[d.jsx("span",{className:"text-slate-500",children:"Type:"}),d.jsx("span",{className:"ml-2 text-white font-medium uppercase",children:c.orderType})]}),c.price&&d.jsxs("div",{children:[d.jsx("span",{className:"text-slate-500",children:"Price:"}),d.jsxs("span",{className:"ml-2 text-white font-medium",children:["$",c.price.toLocaleString()]})]}),d.jsxs("div",{children:[d.jsx("span",{className:"text-slate-500",children:"Leverage:"}),d.jsxs("span",{className:"ml-2 text-yellow-400 font-bold",children:[c.leverage,"x"]})]})]}),(c.stopLoss||c.takeProfit)&&d.jsxs("div",{className:"pt-2 border-t border-slate-800 grid grid-cols-2 gap-2 text-xs",children:[c.stopLoss&&d.jsxs("div",{children:[d.jsx("span",{className:"text-slate-500",children:"Stop Loss:"}),d.jsxs("span",{className:"ml-2 text-red-400 font-medium",children:["$",c.stopLoss.toLocaleString()]})]}),c.takeProfit&&d.jsxs("div",{children:[d.jsx("span",{className:"text-slate-500",children:"Take Profit:"}),d.jsxs("span",{className:"ml-2 text-emerald-400 font-medium",children:["$",c.takeProfit.toLocaleString()]})]})]})]}),c.price&&d.jsxs("div",{className:"bg-gradient-to-br from-slate-950/80 to-purple-950/20 p-3 rounded-lg border border-purple-900/40 space-y-2",children:[d.jsxs("div",{className:"text-xs text-purple-300 mb-2 font-bold uppercase flex items-center gap-2",children:[d.jsx(yn,{size:12})," Risk Analysis"]}),d.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[c.takeProfit&&d.jsxs("div",{className:"bg-emerald-900/20 p-2 rounded border border-emerald-800/30",children:[d.jsx("div",{className:"text-emerald-500 text-[10px] mb-1",children:"MAX PROFIT"}),d.jsxs("div",{className:"text-emerald-400 font-bold",children:["$",u.toFixed(2)]})]}),c.stopLoss&&d.jsxs("div",{className:"bg-red-900/20 p-2 rounded border border-red-800/30",children:[d.jsx("div",{className:"text-red-500 text-[10px] mb-1",children:"MAX LOSS"}),d.jsxs("div",{className:"text-red-400 font-bold",children:["-$",h.toFixed(2)]})]}),d.jsxs("div",{className:"bg-orange-900/20 p-2 rounded border border-orange-800/30",children:[d.jsx("div",{className:"text-orange-500 text-[10px] mb-1",children:"LIQUIDATION"}),d.jsxs("div",{className:"text-orange-400 font-bold",children:["$",m.toFixed(2)]})]})]})]})]})]}),d.jsxs("div",{className:"bg-slate-950/50 p-3 rounded-lg border border-slate-800 text-xs",children:[d.jsx("div",{className:"flex items-center gap-2 mb-2 text-slate-500 font-bold uppercase tracking-wider",children:"Trigger Condition"}),a.condition?d.jsx("div",{className:"space-y-1",children:d.jsxs("div",{className:"flex items-center gap-2 text-yellow-400 font-medium",children:[d.jsx(yn,{size:14}),a.condition.indicator.toUpperCase()," (",a.condition.symbol,") ",a.condition.operator," ",a.condition.value]})}):d.jsxs("div",{className:"flex items-center gap-2 text-emerald-400",children:[d.jsx(Hi,{size:14}),"Time: ",new Date(a.executeAt).toLocaleString()]})]})]})},a.id)})})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[d.jsx(nk,{size:20,className:"text-slate-400"})," History"]}),d.jsxs(Vi,{variant:"ghost",size:"sm",onClick:s,className:"text-slate-500 hover:text-white",children:[d.jsx(xm,{size:14})," Clear History"]})]}),d.jsx("div",{className:"space-y-3 max-h-[500px] overflow-y-auto custom-scrollbar pr-2",children:i.length===0?d.jsx("div",{className:"text-center py-8 text-slate-600 text-sm",children:"No history available."}):i.map((a,l)=>d.jsx(Mt.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:l*.05},children:d.jsxs(Ws,{className:Pt("p-4",a.status==="completed"?"opacity-70 hover:opacity-100 transition-opacity":"border-red-900/30 bg-red-900/10"),children:[d.jsxs("div",{className:"flex justify-between items-center mb-2",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[a.status==="completed"?d.jsx(nk,{size:16,className:"text-emerald-500"}):d.jsx(hs,{size:16,className:"text-red-500"}),d.jsx(nl,{variant:a.status==="completed"?"success":"destructive",children:a.status.toUpperCase()})]}),d.jsx("span",{className:"text-xs text-slate-500",children:a.lastExecuted?new Date(a.lastExecuted).toLocaleString():"Unknown"})]}),d.jsxs("div",{className:"text-xs text-slate-300 mb-2",children:[a.type," - ",a.condition?"Condition":"Time"," Trigger"]}),d.jsx("div",{className:"bg-black/30 p-2 rounded text-[10px] font-mono text-slate-400 break-all",children:a.result})]})},a.id))})]})]})})},Aet=5,Tet="dealer_cycle_summary",jb={recentCycles:[],aiSummary:null,lastSummaryTime:0,isGenerating:!1};class ket{constructor(){this.state=new Map,this.listeners=new Map,this.initialized=new Map,this.state.set("hyperliquid",{...jb}),this.state.set("polymarket",{...jb}),this.listeners.set("hyperliquid",new Set),this.listeners.set("polymarket",new Set),this.initialized.set("hyperliquid",!1),this.initialized.set("polymarket",!1)}getStorageKey(e){return ke.getUserKey(`${Tet}_${e}`)}async loadState(e){var n;if(!this.initialized.get(e)){try{const r=this.getStorageKey(e),i=await ke.getItem(r);if(i){const s=JSON.parse(i);this.state.set(e,{...jb,...s,isGenerating:!1}),console.log(`[CycleSummaryStore] Loaded ${e} state: ${((n=s.recentCycles)==null?void 0:n.length)||0} cycles`)}}catch(r){console.warn(`[CycleSummaryStore] Failed to load ${e} state:`,r)}this.initialized.set(e,!0)}}async saveState(e){try{const n=this.getStorageKey(e),r=this.state.get(e);if(r){const{isGenerating:i,...s}=r;await ke.setItem(n,JSON.stringify(s))}}catch(n){console.warn(`[CycleSummaryStore] Failed to save ${e} state:`,n)}}getSnapshot(e){return this.state.get(e)||{...jb}}subscribe(e,n){const r=this.listeners.get(e);return r&&r.add(n),()=>{r==null||r.delete(n)}}notify(e){const n=this.listeners.get(e);n==null||n.forEach(r=>r())}recordCycle(e,n){const r=this.state.get(e);if(!r)return;const i=r.recentCycles.length+1,o=[{...n,cycleNumber:i},...r.recentCycles].slice(0,Aet);this.state.set(e,{...r,recentCycles:o}),this.notify(e),this.saveState(e),console.log(`[CycleSummaryStore] Recorded ${e} cycle #${i}: ${n.decisions.length} decisions`)}setGenerating(e,n){const r=this.state.get(e);r&&(this.state.set(e,{...r,isGenerating:n}),this.notify(e))}setSummary(e,n){const r=this.state.get(e);r&&(this.state.set(e,{...r,aiSummary:n,lastSummaryTime:Date.now(),isGenerating:!1}),this.notify(e),this.saveState(e),console.log(`[CycleSummaryStore] Updated ${e} AI summary (${n.length} chars)`))}clear(e){this.state.set(e,{...jb}),this.notify(e),this.saveState(e)}getContextForAI(e){const n=this.state.get(e);return!n||!n.aiSummary?null:n.aiSummary}getCyclesForSummary(e){const n=this.state.get(e);return(n==null?void 0:n.recentCycles)||[]}}const sd=new ket;let NX=class{constructor(e,n,r){this.next=r,r&&(r.prev=this),this.prev=n,n&&(n.next=this),this.data=e}};class che{constructor(){this._length=0}get head(){return this._head&&this._head.data}get tail(){return this._tail&&this._tail.data}get current(){return this._current&&this._current.data}get length(){return this._length}push(e){this._tail=new NX(e,this._tail),this._length===0&&(this._head=this._tail,this._current=this._head,this._next=this._head),this._length++}pop(){var e=this._tail;if(this._length!==0)return this._length--,this._length===0?(this._head=this._tail=this._current=this._next=void 0,e.data):(this._tail=e.prev,this._tail.next=void 0,this._current===e&&(this._current=this._tail,this._next=void 0),e.data)}shift(){var e=this._head;if(this._length!==0)return this._length--,this._length===0?(this._head=this._tail=this._current=this._next=void 0,e.data):(this._head=this._head.next,this._current===e&&(this._current=this._head,this._next=this._current.next),e.data)}unshift(e){this._head=new NX(e,void 0,this._head),this._length===0&&(this._tail=this._head,this._next=this._head),this._length++}unshiftCurrent(){var e=this._current;return e===this._head||this._length<2?e&&e.data:(e===this._tail?(this._tail=e.prev,this._tail.next=void 0,this._current=this._tail):(e.next.prev=e.prev,e.prev.next=e.next,this._current=e.prev),this._next=this._current.next,e.next=this._head,e.prev=void 0,this._head.prev=e,this._head=e,e.data)}removeCurrent(){var e=this._current;if(this._length!==0)return this._length--,this._length===0?(this._head=this._tail=this._current=this._next=void 0,e.data):(e===this._tail?(this._tail=e.prev,this._tail.next=void 0,this._current=this._tail):e===this._head?(this._head=e.next,this._head.prev=void 0,this._current=this._head):(e.next.prev=e.prev,e.prev.next=e.next,this._current=e.prev),this._next=this._current.next,e.data)}resetCursor(){return this._current=this._next=this._head,this}next(){var e=this._next;if(e!==void 0)return this._next=e.next,this._current=e,e.data}}class dy extends che{constructor(e,n,r,i){if(super(),this.size=e,this.maintainHigh=n,this.maintainLow=r,this.maintainSum=i,this.totalPushed=0,this.periodHigh=0,this.periodLow=1/0,this.periodSum=0,!e||typeof e!="number")throw"Size required and should be a number.";this._push=this.push,this.push=function(s){this.add(s),this.totalPushed++}}add(e){this.length===this.size?(this.lastShift=this.shift(),this._push(e),this.maintainHigh&&this.lastShift==this.periodHigh&&this.calculatePeriodHigh(),this.maintainLow&&this.lastShift==this.periodLow&&this.calculatePeriodLow(),this.maintainSum&&(this.periodSum=this.periodSum-this.lastShift)):this._push(e),this.maintainHigh&&this.periodHigh<=e&&(this.periodHigh=e),this.maintainLow&&this.periodLow>=e&&(this.periodLow=e),this.maintainSum&&(this.periodSum=this.periodSum+e)}*iterator(){for(this.resetCursor();this.next();)yield this.current}calculatePeriodHigh(){for(this.resetCursor(),this.next()&&(this.periodHigh=this.current);this.next();)this.periodHigh<=this.current&&(this.periodHigh=this.current)}calculatePeriodLow(){for(this.resetCursor(),this.next()&&(this.periodLow=this.current);this.next();)this.periodLow>=this.current&&(this.periodLow=this.current)}}let Net={};function Cet(t){return Net[t]}function Pet(t){let e=Cet("precision");return e?parseFloat(t.toPrecision(e)):t}class Gt{constructor(e){this.format=e.format||Pet}static reverseInputs(e){e.reversedInput&&(e.values&&e.values.reverse(),e.open&&e.open.reverse(),e.high&&e.high.reverse(),e.low&&e.low.reverse(),e.close&&e.close.reverse(),e.volume&&e.volume.reverse(),e.timestamp&&e.timestamp.reverse())}getResult(){return this.result}}class Gl extends Gt{constructor(e){super(e),this.period=e.period,this.price=e.values;var n=(function*(r){var i=new che,s=0,o=1,a=yield,l;for(i.push(0);;)o<r?(o++,i.push(a),s=s+a):(s=s-i.shift()+a,l=s/r,i.push(a)),a=yield l});this.generator=n(this.period),this.generator.next(),this.result=[],this.price.forEach(r=>{var i=this.generator.next(r);i.value!==void 0&&this.result.push(this.format(i.value))})}nextValue(e){var n=this.generator.next(e).value;if(n!=null)return this.format(n)}}Gl.calculate=_et;function _et(t){Gt.reverseInputs(t);var e=new Gl(t).result;return t.reversedInput&&e.reverse(),Gt.reverseInputs(t),e}class Mx extends Gt{constructor(e){super(e);var n=e.period,r=e.values,i=2/(n+1),s;this.result=[],s=new Gl({period:n,values:[]});var o=(function*(){for(var a=yield,l;;)l!==void 0&&a!==void 0?(l=(a-l)*i+l,a=yield l):(a=yield,l=s.nextValue(a),l&&(a=yield l))});this.generator=o(),this.generator.next(),this.generator.next(),r.forEach(a=>{var l=this.generator.next(a);l.value!=null&&this.result.push(this.format(l.value))})}nextValue(e){var n=this.generator.next(e).value;if(n!=null)return this.format(n)}}Mx.calculate=Iet;function Iet(t){Gt.reverseInputs(t);var e=new Mx(t).result;return t.reversedInput&&e.reverse(),Gt.reverseInputs(t),e}class KC extends Gt{constructor(e){super(e);var n=e.period,r=e.values,i=1/n,s;this.result=[],s=new Gl({period:n,values:[]});var o=(function*(){for(var a=yield,l;;)l!==void 0&&a!==void 0?(l=(a-l)*i+l,a=yield l):(a=yield,l=s.nextValue(a),l!==void 0&&(a=yield l))});this.generator=o(),this.generator.next(),this.generator.next(),r.forEach(a=>{var l=this.generator.next(a);l.value!=null&&this.result.push(this.format(l.value))})}nextValue(e){var n=this.generator.next(e).value;if(n!=null)return this.format(n)}}KC.calculate=Ret;function Ret(t){Gt.reverseInputs(t);var e=new KC(t).result;return t.reversedInput&&e.reverse(),Gt.reverseInputs(t),e}class k2 extends Gt{constructor(e){super(e);var n=e.SimpleMAOscillator?Gl:Mx,r=e.SimpleMASignal?Gl:Mx,i=new n({period:e.fastPeriod,values:[],format:l=>l}),s=new n({period:e.slowPeriod,values:[],format:l=>l}),o=new r({period:e.signalPeriod,values:[],format:l=>l}),a=this.format;this.result=[],this.generator=(function*(){for(var l=0,c,u,h,m,g,y;;){if(l<e.slowPeriod){c=yield,g=i.nextValue(c),y=s.nextValue(c),l++;continue}g&&y&&(u=g-y,h=o.nextValue(u)),m=u-h,c=yield{MACD:a(u),signal:h?a(h):void 0,histogram:isNaN(m)?void 0:a(m)},g=i.nextValue(c),y=s.nextValue(c)}})(),this.generator.next(),e.values.forEach(l=>{var c=this.generator.next(l);c.value!=null&&this.result.push(c.value)})}nextValue(e){var n=this.generator.next(e).value;return n}}k2.calculate=Oet;function Oet(t){Gt.reverseInputs(t);var e=new k2(t).result;return t.reversedInput&&e.reverse(),Gt.reverseInputs(t),e}class UB extends Gt{constructor(e){super(e);let n=e.values,r=e.period,i=this.format;this.generator=(function*(s){var o=yield,a=1,l=0,c,u,h=o;for(o=yield;;)u=o-h,u=u>0?u:0,u>0&&(l=l+u),a<s?a++:c===void 0?c=l/s:c=(c*(s-1)+u)/s,h=o,c=c!==void 0?i(c):void 0,o=yield c})(r),this.generator.next(),this.result=[],n.forEach(s=>{var o=this.generator.next(s);o.value!==void 0&&this.result.push(o.value)})}nextValue(e){return this.generator.next(e).value}}UB.calculate=Met;function Met(t){Gt.reverseInputs(t);var e=new UB(t).result;return t.reversedInput&&e.reverse(),Gt.reverseInputs(t),e}class FB extends Gt{constructor(e){super(e);let n=e.values,r=e.period,i=this.format;this.generator=(function*(s){var o=yield,a=1,l=0,c,u,h=o;for(o=yield;;)u=h-o,u=u>0?u:0,u>0&&(l=l+u),a<s?a++:c===void 0?c=l/s:c=(c*(s-1)+u)/s,h=o,c=c!==void 0?i(c):void 0,o=yield c})(r),this.generator.next(),this.result=[],n.forEach(s=>{var o=this.generator.next(s);o.value!==void 0&&this.result.push(o.value)})}nextValue(e){return this.generator.next(e).value}}FB.calculate=Let;function Let(t){Gt.reverseInputs(t);var e=new FB(t).result;return t.reversedInput&&e.reverse(),Gt.reverseInputs(t),e}class N2 extends Gt{constructor(e){super(e);var n=e.period,r=e.values,i=new UB({period:n,values:[]}),s=new FB({period:n,values:[]});this.generator=(function*(o){for(var a=yield,l,c,u,h;;)l=i.nextValue(a),c=s.nextValue(a),l!==void 0&&c!==void 0&&(c===0?h=100:l===0?h=0:(u=l/c,u=isNaN(u)?0:u,h=parseFloat((100-100/(1+u)).toFixed(2)))),a=yield h})(),this.generator.next(),this.result=[],r.forEach(o=>{var a=this.generator.next(o);a.value!==void 0&&this.result.push(a.value)})}nextValue(e){return this.generator.next(e).value}}N2.calculate=Det;function Det(t){Gt.reverseInputs(t);var e=new N2(t).result;return t.reversedInput&&e.reverse(),Gt.reverseInputs(t),e}class $B extends Gt{constructor(e){super(e);var n=e.period,r=e.values,i=new Gl({period:n,values:[],format:s=>s});this.result=[],this.generator=(function*(){var s,o,a=new dy(n);s=yield;for(var l;;){if(a.push(s),o=i.nextValue(s),o){let c=0;for(let u of a.iterator())c=c+Math.pow(u-o,2);l=Math.sqrt(c/n)}s=yield l}})(),this.generator.next(),r.forEach(s=>{var o=this.generator.next(s);o.value!=null&&this.result.push(this.format(o.value))})}nextValue(e){var n=this.generator.next(e);if(n.value!=null)return this.format(n.value)}}$B.calculate=jet;function jet(t){Gt.reverseInputs(t);var e=new $B(t).result;return t.reversedInput&&e.reverse(),Gt.reverseInputs(t),e}class C2 extends Gt{constructor(e){super(e);var n=e.period,r=e.values,i=e.stdDev,s=this.format,o,a;this.result=[],o=new Gl({period:n,values:[],format:l=>l}),a=new $B({period:n,values:[],format:l=>l}),this.generator=(function*(){var l,c,u,h;for(c=yield;;){if(u=o.nextValue(c),h=a.nextValue(c),u){let m=s(u),g=s(u+h*i),y=s(u-h*i),v=s((c-y)/(g-y));l={middle:m,upper:g,lower:y,pb:v}}c=yield l}})(),this.generator.next(),r.forEach(l=>{var c=this.generator.next(l);c.value!=null&&this.result.push(c.value)})}nextValue(e){return this.generator.next(e).value}}C2.calculate=Bet;function Bet(t){Gt.reverseInputs(t);var e=new C2(t).result;return t.reversedInput&&e.reverse(),Gt.reverseInputs(t),e}class yw extends Gt{constructor(e){super(e),this.period=e.period,this.price=e.values;var n=(function*(r){for(var i=0,s=1,o=yield,a=0;;)s<r?(s++,i=i+o,a=void 0):s==r?(s++,i=i+o,a=i):a=a-a/r+o,o=yield a});this.generator=n(this.period),this.generator.next(),this.result=[],this.price.forEach(r=>{var i=this.generator.next(r);i.value!=null&&this.result.push(this.format(i.value))})}nextValue(e){var n=this.generator.next(e).value;if(n!=null)return this.format(n)}}yw.calculate=Uet;function Uet(t){Gt.reverseInputs(t);var e=new yw(t).result;return t.reversedInput&&e.reverse(),Gt.reverseInputs(t),e}class zB extends Gt{constructor(e){super(e);var n=e.low,r=e.high,i=this.format;if(n.length!=r.length)throw"Inputs(low,high) not of equal size";this.result=[],this.generator=(function*(){for(var s,o=yield,a;;){if(a){let l=o.high-a.high,c=a.low-o.low;s=i(c>l&&c>0?c:0)}a=o,o=yield s}})(),this.generator.next(),n.forEach((s,o)=>{var a=this.generator.next({high:r[o],low:n[o]});a.value!==void 0&&this.result.push(a.value)})}static calculate(e){Gt.reverseInputs(e);var n=new zB(e).result;return e.reversedInput&&n.reverse(),Gt.reverseInputs(e),n}nextValue(e){return this.generator.next(e).value}}class VB extends Gt{constructor(e){super(e);var n=e.low,r=e.high,i=this.format;if(n.length!=r.length)throw"Inputs(low,high) not of equal size";this.result=[],this.generator=(function*(){for(var s,o=yield,a;;){if(a){let l=o.high-a.high,c=a.low-o.low;s=i(l>c&&l>0?l:0)}a=o,o=yield s}})(),this.generator.next(),n.forEach((s,o)=>{var a=this.generator.next({high:r[o],low:n[o]});a.value!==void 0&&this.result.push(a.value)})}static calculate(e){Gt.reverseInputs(e);var n=new VB(e).result;return e.reversedInput&&n.reverse(),Gt.reverseInputs(e),n}nextValue(e){return this.generator.next(e).value}}class WC extends Gt{constructor(e){super(e);var n=e.low,r=e.high,i=e.close,s=this.format;if(n.length!=r.length)throw"Inputs(low,high) not of equal size";this.result=[],this.generator=(function*(){for(var o=yield,a,l;;)a===void 0&&(a=o.close,o=yield l),l=Math.max(o.high-o.low,isNaN(Math.abs(o.high-a))?0:Math.abs(o.high-a),isNaN(Math.abs(o.low-a))?0:Math.abs(o.low-a)),a=o.close,l!=null&&(l=s(l)),o=yield l})(),this.generator.next(),n.forEach((o,a)=>{var l=this.generator.next({high:r[a],low:n[a],close:i[a]});l.value!=null&&this.result.push(l.value)})}nextValue(e){return this.generator.next(e).value}}WC.calculate=Fet;function Fet(t){Gt.reverseInputs(t);var e=new WC(t).result;return t.reversedInput&&e.reverse(),Gt.reverseInputs(t),e}class P2 extends Gt{constructor(e){super(e);var n=e.low,r=e.high,i=e.close,s=e.period,o=this.format,a=new VB({high:[],low:[]}),l=new zB({high:[],low:[]}),c=new yw({period:s,values:[],format:y=>y}),u=new yw({period:s,values:[],format:y=>y}),h=new yw({period:s,values:[],format:y=>y}),m=new KC({period:s,values:[],format:y=>y}),g=new WC({low:[],high:[],close:[]});if(!(n.length===r.length&&r.length===i.length))throw"Inputs(low,high, close) not of equal size";this.result=[],this.generator=(function*(){for(var y=yield,v,b,w,k;;){let N=g.nextValue(y),R=a.nextValue(y),D=l.nextValue(y);if(N===void 0){y=yield;continue}let O=h.nextValue(N),B=c.nextValue(R),z=u.nextValue(D);if(O!=null&&B!=null&&z!=null){v=B*100/O,b=z*100/O;let U=Math.abs(v-b),$=v+b;w=U/$*100,k=m.nextValue(w)}y=yield{adx:k,pdi:v,mdi:b}}})(),this.generator.next(),n.forEach((y,v)=>{var b=this.generator.next({high:r[v],low:n[v],close:i[v]});b.value!=null&&b.value.adx!=null&&this.result.push({adx:o(b.value.adx),pdi:o(b.value.pdi),mdi:o(b.value.mdi)})})}nextValue(e){let n=this.generator.next(e).value;if(n!=null&&n.adx!=null)return{adx:this.format(n.adx),pdi:this.format(n.pdi),mdi:this.format(n.mdi)}}}P2.calculate=$et;function $et(t){Gt.reverseInputs(t);var e=new P2(t).result;return t.reversedInput&&e.reverse(),Gt.reverseInputs(t),e}class _2 extends Gt{constructor(e){super(e);var n=e.low,r=e.high,i=e.close,s=e.period,o=this.format;if(!(n.length===r.length&&r.length===i.length))throw"Inputs(low,high, close) not of equal size";var a=new WC({low:[],high:[],close:[]}),l=new KC({period:s,values:[],format:c=>c});this.result=[],this.generator=(function*(){for(var c=yield,u,h;;)h=a.nextValue({low:c.low,high:c.high,close:c.close}),h===void 0?u=void 0:u=l.nextValue(h),c=yield u})(),this.generator.next(),n.forEach((c,u)=>{var h=this.generator.next({high:r[u],low:n[u],close:i[u]});h.value!==void 0&&this.result.push(o(h.value))})}nextValue(e){return this.generator.next(e).value}}_2.calculate=zet;function zet(t){Gt.reverseInputs(t);var e=new _2(t).result;return t.reversedInput&&e.reverse(),Gt.reverseInputs(t),e}class I2 extends Gt{constructor(e){super(e);let n=e.low,r=e.high,i=e.close,s=e.period,o=e.signalPeriod,a=this.format;if(!(n.length===r.length&&r.length===i.length))throw"Inputs(low,high, close) not of equal size";this.result=[],this.generator=(function*(){let l=1,c=new dy(s,!0,!1),u=new dy(s,!1,!0),h=new Gl({period:o,values:[],format:v=>v}),m,g;for(var y=yield;;){if(c.push(y.high),u.push(y.low),l<s){l++,y=yield;continue}let v=u.periodLow;m=(y.close-v)/(c.periodHigh-v)*100,m=isNaN(m)?0:m,g=h.nextValue(m),y=yield{k:a(m),d:g!==void 0?a(g):void 0}}})(),this.generator.next(),n.forEach((l,c)=>{var u=this.generator.next({high:r[c],low:n[c],close:i[c]});u.value!==void 0&&this.result.push(u.value)})}nextValue(e){let n=this.generator.next(e);if(n.value!==void 0)return n.value}}I2.calculate=Vet;function Vet(t){Gt.reverseInputs(t);var e=new I2(t).result;return t.reversedInput&&e.reverse(),Gt.reverseInputs(t),e}class R2 extends Gt{constructor(e){super(e);var n=e.close,r=e.volume;this.result=[],this.generator=(function*(){var i=0,s,o;for(s=yield,s.close&&typeof s.close=="number"&&(o=s.close,s=yield);;)o<s.close?i=i+s.volume:s.close<o&&(i=i-s.volume),o=s.close,s=yield i})(),this.generator.next(),n.forEach((i,s)=>{let o={close:n[s],volume:r[s]},a=this.generator.next(o);a.value!=null&&this.result.push(a.value)})}nextValue(e){return this.generator.next(e).value}}R2.calculate=Het;function Het(t){Gt.reverseInputs(t);var e=new R2(t).result;return t.reversedInput&&e.reverse(),Gt.reverseInputs(t),e}class O2 extends Gt{constructor(e){super(e),this.result=[];var n={conversionPeriod:9,basePeriod:26,spanPeriod:52,displacement:26},r=Object.assign({},n,e),i=new dy(r.conversionPeriod*2,!0,!0,!1),s=new dy(r.basePeriod*2,!0,!0,!1),o=new dy(r.spanPeriod*2,!0,!0,!1);this.generator=(function*(){let a,l,c=Math.max(r.conversionPeriod,r.basePeriod,r.spanPeriod,r.displacement),u=1;for(l=yield;;){if(i.push(l.high),i.push(l.low),s.push(l.high),s.push(l.low),o.push(l.high),o.push(l.low),u<c)u++;else{let h=(i.periodHigh+i.periodLow)/2,m=(s.periodHigh+s.periodLow)/2,g=(h+m)/2,y=(o.periodHigh+o.periodLow)/2;a={conversion:h,base:m,spanA:g,spanB:y}}l=yield a}})(),this.generator.next(),e.low.forEach((a,l)=>{var c=this.generator.next({high:e.high[l],low:e.low[l]});c.value&&this.result.push(c.value)})}nextValue(e){return this.generator.next(e).value}}O2.calculate=qet;function qet(t){Gt.reverseInputs(t);var e=new O2(t).result;return t.reversedInput&&e.reverse(),Gt.reverseInputs(t),e}class Get{normalizeInterval(e){const n=e.toLowerCase();return{1:"1m",5:"5m",15:"15m",60:"1h",240:"4h",d:"1d","1d":"1d",w:"1d","1w":"1d","7d":"1d"}[n]||"1h"}async getMarketPrice(e){try{const n=e.replace(/USDT$/i,"").replace(/USD$/i,"");return{price:await Vt.getCurrentPrice(n),exchange:"Hyperliquid",lastUpdate:new Date().toISOString()}}catch(n){throw console.error(`Error fetching market price for ${e}:`,n),new Error(`Failed to get market price: ${n.message}`)}}async getOHLCV(e,n="60"){try{const r=e.replace(/USDT$/i,"").replace(/USD$/i,""),i=this.normalizeInterval(n),s=await Vt.getCandles(r,i,1);if(!s||s.length===0)throw new Error("No candle data available");const o=s[s.length-1];return{open:o.open,high:o.high,low:o.low,close:o.close,volume:o.volume||0,timestamp:new Date(o.time).toISOString()}}catch(r){throw console.error(`Error fetching OHLCV for ${e}:`,r),new Error(`Failed to get OHLCV data: ${r.message}`)}}async getHistory(e,n="1D",r=100){try{const i=e.replace(/USDT$/i,"").replace(/USD$/i,""),s=this.normalizeInterval(n);return(await Vt.getCandles(i,s,r)).map(a=>({time:Math.floor(a.time/1e3),open:a.open,high:a.high,low:a.low,close:a.close,volume:a.volume}))}catch(i){return console.error(`Error fetching history for ${e}:`,i),[]}}async getIndicator(e,n,r="60",i){try{const s=e.replace(/USDT$/i,"").replace(/USD$/i,""),o=this.normalizeInterval(r),a=await Vt.getCandles(s,o,200);if(!a||a.length===0)throw new Error("No data available for indicator calculation");const l=a.map(v=>v.close),c=a.map(v=>v.high),u=a.map(v=>v.low),h=a.map(v=>v.volume||0);let m=0,g=[];switch(n.toLowerCase()){case"rsi":const v=(i==null?void 0:i.period)||14,b={values:l,period:v},w=N2.calculate(b);m=w[w.length-1],g=w.slice(-100);break;case"macd":const k={values:l,fastPeriod:(i==null?void 0:i.fast)||12,slowPeriod:(i==null?void 0:i.slow)||26,signalPeriod:(i==null?void 0:i.signal)||9,SimpleMAOscillator:!1,SimpleMASignal:!1},N=k2.calculate(k),R=N[N.length-1];m={macd:(R==null?void 0:R.MACD)||0,signal:(R==null?void 0:R.signal)||0,histogram:(R==null?void 0:R.histogram)||0},g=N.slice(-100);break;case"ema":const O={period:(i==null?void 0:i.period)||20,values:l},B=Mx.calculate(O);m=B[B.length-1],g=B.slice(-100);break;case"sma":const U={period:(i==null?void 0:i.period)||20,values:l},$=Gl.calculate(U);m=$[$.length-1],g=$.slice(-100);break;case"stoch":const W={high:c,low:u,close:l,period:(i==null?void 0:i.period)||14,signalPeriod:(i==null?void 0:i.signalPeriod)||3},H=I2.calculate(W),F=H[H.length-1];m={k:(F==null?void 0:F.k)||0,d:(F==null?void 0:F.d)||0},g=H.slice(-100);break;case"bollinger":const T=(i==null?void 0:i.period)||20,_=(i==null?void 0:i.stdDev)||2,L={period:T,values:l,stdDev:_},V=C2.calculate(L),K=V[V.length-1],te=l[l.length-1],G=K?(te-K.lower)/(K.upper-K.lower):.5;m={upper:(K==null?void 0:K.upper)||0,middle:(K==null?void 0:K.middle)||0,lower:(K==null?void 0:K.lower)||0,pb:G},g=V.slice(-100);break;case"atr":const q=(i==null?void 0:i.period)||14,M={high:c,low:u,close:l,period:q},P=_2.calculate(M);m=P[P.length-1]||0,g=P.slice(-100);break;case"adx":const Y=(i==null?void 0:i.period)||14,X={high:c,low:u,close:l,period:Y},se=P2.calculate(X),oe=se[se.length-1];m={adx:(oe==null?void 0:oe.adx)||0,pdi:(oe==null?void 0:oe.pdi)||0,mdi:(oe==null?void 0:oe.mdi)||0},g=se.slice(-100);break;case"obv":const me={close:l,volume:h},ce=R2.calculate(me);m=ce[ce.length-1]||0,g=ce.slice(-100);break;case"vwap":let ve=0,Ne=0;const pe=[];for(let rt=0;rt<a.length;rt++){const Xe=(c[rt]+u[rt]+l[rt])/3;ve+=Xe*h[rt],Ne+=h[rt],pe.push(Ne>0?ve/Ne:Xe)}m=pe[pe.length-1]||l[l.length-1],g=pe.slice(-100);break;case"ichimoku":const Le=(i==null?void 0:i.conversion)||9,he=(i==null?void 0:i.base)||26,Te=(i==null?void 0:i.spanB)||52,Ge=(i==null?void 0:i.displacement)||26,We={high:c,low:u,conversionPeriod:Le,basePeriod:he,spanPeriod:Te,displacement:Ge},Qe=O2.calculate(We),at=Qe[Qe.length-1];m={tenkanSen:(at==null?void 0:at.conversion)||0,kijunSen:(at==null?void 0:at.base)||0,senkouSpanA:(at==null?void 0:at.spanA)||0,senkouSpanB:(at==null?void 0:at.spanB)||0,chikouSpan:l[l.length-Ge]||l[l.length-1]},g=Qe.slice(-100);break;case"price":m=l[l.length-1],g=l.slice(-100);break;default:throw new Error(`Unsupported indicator: ${n}`)}return{symbol:e,indicator:n.toUpperCase(),value:m,history:g,timestamp:Date.now()}}catch(s){throw console.error(`Error calculating indicator ${n} for ${e}:`,s),new Error(`Failed to calculate indicator: ${s.message}`)}}async getTradingViewSummary(e){try{const n=e.replace(/USDT$/i,"").replace(/USD$/i,""),r=await Vt.getCandles(n,"1h",12);if(!r||r.length<2)return{buy:0,sell:0,neutral:1,recommendation:"NEUTRAL"};let i=0,s=0;for(let l=1;l<r.length;l++)r[l].close>r[l-1].close?i++:s++;const o=Math.max(0,r.length-1-i-s);let a;return i>8?a="STRONG_BUY":i>6?a="BUY":s>8?a="STRONG_SELL":s>6?a="SELL":a="NEUTRAL",{buy:i,sell:s,neutral:o,recommendation:a}}catch(n){return console.error(`Error fetching summary for ${e}:`,n),{buy:0,sell:0,neutral:1,recommendation:"NEUTRAL"}}}detectDivergences(e,n,r){const i=[];if(e.length<20||n.length<20)return i;const o=(m,g=5)=>{const y=[],v=[];for(let b=g;b<m.length-g;b++){let w=!0,k=!0;for(let N=b-g;N<=b+g;N++)N!==b&&(m[N]<=m[b]&&(w=!1),m[N]>=m[b]&&(k=!1));w&&y.push(b),k&&v.push(b)}return{minima:y,maxima:v}},a=e.slice(-20),l=n.slice(-20),c=r.slice(-20),u=o(a),h=o(l);if(u.minima.length>=2&&h.minima.length>=2){const m=u.minima[u.minima.length-1],g=u.minima[u.minima.length-2],y=h.minima[h.minima.length-1],v=h.minima[h.minima.length-2],b=a[m]<a[g],w=l[y]>l[v];if(b&&w){const R=l[y]<30?"STRONG":l[y]<40?"MODERATE":"WEAK";i.push({type:"BULLISH",indicator:"RSI",description:`Price made lower low (${a[g].toFixed(2)}  ${a[m].toFixed(2)}) but RSI made higher low (${l[v].toFixed(1)}  ${l[y].toFixed(1)}). Potential reversal UP.`,strength:R,priceRange:{start:a[g],end:a[m]},indicatorRange:{start:l[v],end:l[y]}})}const k=a[m]>a[g],N=l[y]<l[v];k&&N&&i.push({type:"HIDDEN_BULLISH",indicator:"RSI",description:"Price made higher low but RSI made lower low. Bullish trend continuation signal.",strength:"MODERATE",priceRange:{start:a[g],end:a[m]},indicatorRange:{start:l[v],end:l[y]}})}if(u.maxima.length>=2&&h.maxima.length>=2){const m=u.maxima[u.maxima.length-1],g=u.maxima[u.maxima.length-2],y=h.maxima[h.maxima.length-1],v=h.maxima[h.maxima.length-2],b=a[m]>a[g],w=l[y]<l[v];if(b&&w){const R=l[y]>70?"STRONG":l[y]>60?"MODERATE":"WEAK";i.push({type:"BEARISH",indicator:"RSI",description:`Price made higher high (${a[g].toFixed(2)}  ${a[m].toFixed(2)}) but RSI made lower high (${l[v].toFixed(1)}  ${l[y].toFixed(1)}). Potential reversal DOWN.`,strength:R,priceRange:{start:a[g],end:a[m]},indicatorRange:{start:l[v],end:l[y]}})}const k=a[m]<a[g],N=l[y]>l[v];k&&N&&i.push({type:"HIDDEN_BEARISH",indicator:"RSI",description:"Price made lower high but RSI made higher high. Bearish trend continuation signal.",strength:"MODERATE",priceRange:{start:a[g],end:a[m]},indicatorRange:{start:l[v],end:l[y]}})}if(c.length>=10){const m=c[c.length-1]-c[c.length-5],g=a[a.length-1]-a[a.length-5];m<-.5&&g>0&&i.push({type:"BEARISH",indicator:"MACD",description:"MACD histogram declining while price rising. Momentum weakening.",strength:"WEAK",priceRange:{start:a[a.length-5],end:a[a.length-1]},indicatorRange:{start:c[c.length-5],end:c[c.length-1]}}),m>.5&&g<0&&i.push({type:"BULLISH",indicator:"MACD",description:"MACD histogram rising while price falling. Momentum building.",strength:"WEAK",priceRange:{start:a[a.length-5],end:a[a.length-1]},indicatorRange:{start:c[c.length-5],end:c[c.length-1]}})}return i}calculateIndicatorFromCandles(e,n,r){if(!e||e.length===0)return{value:0,history:[]};const i=e.map(h=>h.close),s=e.map(h=>h.high),o=e.map(h=>h.low),a=e.map(h=>h.volume||0);let l=0,c=[];switch(n.toLowerCase()){case"rsi":const h=(r==null?void 0:r.period)||14,m=N2.calculate({values:i,period:h});l=m[m.length-1]||0,c=m.slice(-100);break;case"macd":const g=k2.calculate({values:i,fastPeriod:(r==null?void 0:r.fast)||12,slowPeriod:(r==null?void 0:r.slow)||26,signalPeriod:(r==null?void 0:r.signal)||9,SimpleMAOscillator:!1,SimpleMASignal:!1}),y=g[g.length-1];l={macd:(y==null?void 0:y.MACD)||0,signal:(y==null?void 0:y.signal)||0,histogram:(y==null?void 0:y.histogram)||0},c=g.slice(-100).map(V=>({macd:(V==null?void 0:V.MACD)||0,signal:(V==null?void 0:V.signal)||0,histogram:(V==null?void 0:V.histogram)||0}));break;case"ema":const v=Mx.calculate({period:(r==null?void 0:r.period)||20,values:i});l=v[v.length-1]||0,c=v.slice(-100);break;case"sma":const b=Gl.calculate({period:(r==null?void 0:r.period)||20,values:i});l=b[b.length-1]||0,c=b.slice(-100);break;case"stoch":const w=I2.calculate({high:s,low:o,close:i,period:(r==null?void 0:r.period)||14,signalPeriod:(r==null?void 0:r.signalPeriod)||3}),k=w[w.length-1];l={k:(k==null?void 0:k.k)||0,d:(k==null?void 0:k.d)||0},c=w.slice(-100);break;case"bollinger":const N=C2.calculate({period:(r==null?void 0:r.period)||20,values:i,stdDev:(r==null?void 0:r.stdDev)||2}),R=N[N.length-1],D=i[i.length-1],O=R?(D-R.lower)/(R.upper-R.lower):.5;l={upper:(R==null?void 0:R.upper)||0,middle:(R==null?void 0:R.middle)||0,lower:(R==null?void 0:R.lower)||0,pb:O},c=N.slice(-100);break;case"atr":const B=_2.calculate({high:s,low:o,close:i,period:(r==null?void 0:r.period)||14});l=B[B.length-1]||0,c=B.slice(-100);break;case"adx":const z=P2.calculate({high:s,low:o,close:i,period:(r==null?void 0:r.period)||14}),U=z[z.length-1];l={adx:(U==null?void 0:U.adx)||0,pdi:(U==null?void 0:U.pdi)||0,mdi:(U==null?void 0:U.mdi)||0},c=z.slice(-100);break;case"obv":const $=R2.calculate({close:i,volume:a});l=$[$.length-1]||0,c=$.slice(-100);break;case"vwap":let W=0,H=0;const F=[];for(let V=0;V<e.length;V++){const K=(s[V]+o[V]+i[V])/3;W+=K*a[V],H+=a[V],F.push(H>0?W/H:K)}l=F[F.length-1]||i[i.length-1],c=F.slice(-100);break;case"ichimoku":const T=O2.calculate({high:s,low:o,conversionPeriod:(r==null?void 0:r.conversion)||9,basePeriod:(r==null?void 0:r.base)||26,spanPeriod:(r==null?void 0:r.spanB)||52,displacement:(r==null?void 0:r.displacement)||26}),_=T[T.length-1],L=(r==null?void 0:r.displacement)||26;l={tenkanSen:(_==null?void 0:_.conversion)||0,kijunSen:(_==null?void 0:_.base)||0,senkouSpanA:(_==null?void 0:_.spanA)||0,senkouSpanB:(_==null?void 0:_.spanB)||0,chikouSpan:i[i.length-L]||i[i.length-1]},c=T.slice(-100);break;default:console.warn(`[MarketDataMCP] Unknown indicator: ${n}`)}return{value:l,history:c}}}const wo=new Get,Un={async getMarketData(t){return await Vt.getMarketData(t)},async getPositions(t){return(await Vt.getUserState(t)).assetPositions},async getOpenOrders(t){return await Vt.getOpenOrders(t)},async getUserFills(t){return await Vt.getUserFills(t)},async getUserLedgerUpdates(t){return await Vt.getUserLedgerUpdates(t)},async createOrder(t,e,n,r,i,s){return await Vt.placeOrder(t,e,n,r,i,s)},async cancelOrder(t,e,n){return await Vt.cancelOrder(t,e,n)},async getUserState(t){return await Vt.getUserState(t)},async updateLeverage(t,e,n,r){return await Vt.updateLeverage(t,e,n,r)},async updateIsolatedMargin(t,e,n,r){return await Vt.updateIsolatedMargin(t,e,n,r)},async closePosition(t,e,n,r="market",i){return await Vt.closePosition(t,e,n,r,i)},async withdrawUSDC(t,e,n){return await Vt.withdrawUSDC(t,e,n)},async getAvailableAssets(){return await Vt.getAllAvailableAssets()},async getAssetDecimals(t){return await Vt.getAssetDecimals(t)},async validateAsset(t){return await Vt.isValidAsset(t)},async getAssetContexts(){return await Vt.getAssetContexts()},async getFundingRate(t){return await Vt.getFundingRate(t)},async getUserFees(t){return await Vt.getUserFees(t)},async getUserFundingHistory(t,e,n){return await Vt.getUserFundingHistory(t,e,n)},calculateBreakevenPrice(t,e,n,r,i,s,o){return Vt.calculateBreakevenPrice(t,e,n,r,i,s,o)}};function uhe(t){for(const[e,n]of Object.entries(fN))if(n.indicators.includes(t))return e;return null}function dhe(t,e){return fN[e].indicators.filter(r=>{var i;return(i=t[r])==null?void 0:i.enabled}).length}function fhe(t,e){return dhe(t,e)>=fN[e].maxIndicators}function hhe(t){return Object.values(t).filter(e=>e.enabled).length}function phe(t){return hhe(t)>=fte}function CX(t,e){var r;if((r=t[e])!=null&&r.enabled)return!0;if(phe(t))return!1;const n=uhe(e);return!(n&&fhe(t,n))}function Ket(t,e){const r={...e||Xg};for(const i of Object.keys(r))r[i]={...r[i],enabled:!1};if(t!=="custom"){const i=ed[t];for(const s of i.indicators)r[s]&&(r[s]={...r[s],enabled:!0})}return r}function Wet(t){const e=Object.keys(t).filter(n=>t[n].enabled).sort();for(const[n,r]of Object.entries(ed)){if(n==="custom")continue;const i=[...r.indicators].sort();if(JSON.stringify(e)===JSON.stringify(i))return n}return"custom"}class Yet{constructor(){this.userFeesCache=null,this.userFeesCacheTime=0,this.FEES_CACHE_TTL=300*1e3}async getUserFeesFromCache(e){const n=Date.now();if(this.userFeesCache&&n-this.userFeesCacheTime<this.FEES_CACHE_TTL)return this.userFeesCache;if(e)try{const r=await Un.getUserFees(e);return this.userFeesCache={makerFee:r.makerFee,takerFee:r.takerFee},this.userFeesCacheTime=n,this.userFeesCache}catch{console.warn("[DealerMCP] Failed to fetch user fees, using defaults")}return{makerFee:2e-4,takerFee:5e-4}}async getMarketContext(e,n,r="60",i,s=100){var a,l;const o=`${e}USDT`;try{const c=await wo.getMarketPrice(o),h=await wo.getHistory(o,r,200),m=h.slice(-s);console.log(`[DealerMCP] Fetched ${h.length} candles, using last ${m.length} for history (config: ${s})`);const g={},y=[],v=h.map(H=>({open:H.open,high:H.high,low:H.low,close:H.close,volume:H.volume||0})),b=i?Object.entries(i).filter(([H,F])=>F.enabled).map(([H,F])=>({name:H,params:F.params})):[{name:"rsi",params:{period:14}},{name:"macd",params:{fast:12,slow:26,signal:9}}];for(const{name:H,params:F}of b)try{const T=wo.calculateIndicatorFromCandles(v,H,F),_=i==null?void 0:i[H],L=(_==null?void 0:_.weight)??1,V=uhe(H);g[H]={value:T.value,history:T.history,weight:L,category:V},y.push(H)}catch(T){console.warn(`[DealerMCP] Failed to calculate ${H} for ${e}:`,T)}const[w,k,N]=await Promise.all([Un.getFundingRate(e).catch(()=>null),this.getUserFeesFromCache(n),Vt.getOrderBookMetrics(e).catch(()=>null)]),R=(w==null?void 0:w.funding)||0,D=Math.abs(R)*3,O={fundingRate:R,dailyHoldingCost:D},B=((a=g.rsi)==null?void 0:a.history)||[],U=(((l=g.macd)==null?void 0:l.history)||[]).map(H=>(H==null?void 0:H.histogram)||0),$=m.map(H=>H.close),W=wo.detectDivergences($,B,U);return W.length>0&&console.log(`[DealerMCP] Divergences detected for ${e}:`,W.map(H=>`${H.type}(${H.indicator})`).join(", ")),console.log(`[DealerMCP] Context for ${e} (${r}m): Price=${c.price}, Indicators=[${y.join(",")}], Divergences=${W.length}, OrderBook=${N?"OK":"N/A"}`),{symbol:e,currentPrice:c.price,history:m,indicators:g,divergences:W,tradingCosts:O,orderBook:N||void 0,ts:Math.floor(Date.now()/1e3)}}catch(c){return console.error(`[DealerMCP] Failed to gather context for ${e}:`,c),{symbol:e,currentPrice:0,history:[],indicators:{},divergences:[],tradingCosts:{fundingRate:0,dailyHoldingCost:0},error:c.message||"Data unavailable",ts:Math.floor(Date.now()/1e3)}}}calculatePositionBreakevens(e,n,r){return e.map(i=>{var v,b,w,k,N,R,D;const s=((v=i.position)==null?void 0:v.coin)||i.coin,o=parseFloat(((b=i.position)==null?void 0:b.entryPx)||i.entryPx||"0"),a=((k=(w=i.position)==null?void 0:w.leverage)==null?void 0:k.value)||1,c=parseFloat(((N=i.position)==null?void 0:N.szi)||i.szi||"0")>0,u=r.get(s)||0,h=Un.calculateBreakevenPrice(o,a,c,n.makerFee,n.takerFee,u,8),m=parseFloat(((R=i.position)==null?void 0:R.unrealizedPnl)||"0"),g=parseFloat(((D=i.position)==null?void 0:D.positionValue)||"0"),y=g>0?m/g*100:0;return{coin:s,entryPrice:o,breakevenPrice:h.breakevenPrice,minProfitPrice:h.minProfitPrice,currentPnlPercent:y,isAboveBreakeven:m>0}})}async getMacroSnapshot(e,n,r){const i=`${e}USDT`;try{const o=await wo.getHistory(i,n,50);if(o.length<20)return console.warn(`[DealerMCP] Insufficient candles for macro ${e}@${n}`),{timeframe:n,indicators:{},ts:Math.floor(Date.now()/1e3)};const a=o.map(u=>({open:u.open,high:u.high,low:u.low,close:u.close,volume:u.volume||0})),l={},c=r?Object.entries(r).filter(([u,h])=>h.enabled).map(([u,h])=>({name:u,params:h.params})):[{name:"rsi",params:{period:14}},{name:"macd",params:{fast:12,slow:26,signal:9}}];for(const{name:u,params:h}of c)try{const m=wo.calculateIndicatorFromCandles(a,u,h);l[u]={value:m.value}}catch(m){console.warn(`[DealerMCP] Failed to calc macro ${u} for ${e}:`,m)}return console.log(`[DealerMCP] Macro snapshot for ${e}@${n}: ${Object.keys(l).join(",")}`),{timeframe:n,indicators:l,ts:Math.floor(Date.now()/1e3)}}catch(s){return console.error(`[DealerMCP] Macro snapshot failed for ${e}:`,s),{timeframe:n,indicators:{},ts:Math.floor(Date.now()/1e3)}}}}const l4=new Yet;var Jet={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Xet,Qet;function Zet(){return{geminiUrl:Xet,vertexUrl:Qet}}function ett(t,e,n,r){var i,s;if(!(t!=null&&t.baseUrl)){const o=Zet();return e?(i=o.vertexUrl)!==null&&i!==void 0?i:n:(s=o.geminiUrl)!==null&&s!==void 0?s:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jd{}function Tt(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const s=e[i];return s!=null?String(s):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function C(t,e,n){for(let s=0;s<e.length-1;s++){const o=e[s];if(o.endsWith("[]")){const a=o.slice(0,-2);if(!(a in t))if(Array.isArray(n))t[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(t[a])){const l=t[a];if(Array.isArray(n))for(let c=0;c<l.length;c++){const u=l[c];C(u,e.slice(s+1),n[c])}else for(const c of l)C(c,e.slice(s+1),n)}return}else if(o.endsWith("[0]")){const a=o.slice(0,-3);a in t||(t[a]=[{}]);const l=t[a];C(l[0],e.slice(s+1),n);return}(!t[o]||typeof t[o]!="object")&&(t[o]={}),t=t[o]}const r=e[e.length-1],i=t[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function S(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const i=e[r];if(i.endsWith("[]")){const s=i.slice(0,-2);if(s in t){const o=t[s];return Array.isArray(o)?o.map(a=>S(a,e.slice(r+1),n)):n}else return n}else t=t[i]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function ttt(t,e){for(const[n,r]of Object.entries(e)){const i=n.split("."),s=r.split("."),o=new Set;let a=-1;for(let l=0;l<i.length;l++)if(i[l]==="*"){a=l;break}if(a!==-1&&s.length>a)for(let l=a;l<s.length;l++){const c=s[l];c!=="*"&&!c.endsWith("[]")&&!c.endsWith("[0]")&&o.add(c)}JL(t,i,s,0,o)}}function JL(t,e,n,r,i){if(r>=e.length||typeof t!="object"||t===null)return;const s=e[r];if(s.endsWith("[]")){const o=s.slice(0,-2),a=t;if(o in a&&Array.isArray(a[o]))for(const l of a[o])JL(l,e,n,r+1,i)}else if(s==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const o=t,a=Object.keys(o).filter(c=>!c.startsWith("_")&&!i.has(c)),l={};for(const c of a)l[c]=o[c];for(const[c,u]of Object.entries(l)){const h=[];for(const m of n.slice(r))m==="*"?h.push(c):h.push(m);C(o,h,u)}for(const c of a)delete o[c]}}else{const o=t;s in o&&JL(o[s],e,n,r+1,i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function HB(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ntt(t){const e={},n=S(t,["operationName"]);n!=null&&C(e,["operationName"],n);const r=S(t,["resourceName"]);return r!=null&&C(e,["_url","resourceName"],r),e}function rtt(t){const e={},n=S(t,["name"]);n!=null&&C(e,["name"],n);const r=S(t,["metadata"]);r!=null&&C(e,["metadata"],r);const i=S(t,["done"]);i!=null&&C(e,["done"],i);const s=S(t,["error"]);s!=null&&C(e,["error"],s);const o=S(t,["response","generateVideoResponse"]);return o!=null&&C(e,["response"],stt(o)),e}function itt(t){const e={},n=S(t,["name"]);n!=null&&C(e,["name"],n);const r=S(t,["metadata"]);r!=null&&C(e,["metadata"],r);const i=S(t,["done"]);i!=null&&C(e,["done"],i);const s=S(t,["error"]);s!=null&&C(e,["error"],s);const o=S(t,["response"]);return o!=null&&C(e,["response"],ott(o)),e}function stt(t){const e={},n=S(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>att(o))),C(e,["generatedVideos"],s)}const r=S(t,["raiMediaFilteredCount"]);r!=null&&C(e,["raiMediaFilteredCount"],r);const i=S(t,["raiMediaFilteredReasons"]);return i!=null&&C(e,["raiMediaFilteredReasons"],i),e}function ott(t){const e={},n=S(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>ltt(o))),C(e,["generatedVideos"],s)}const r=S(t,["raiMediaFilteredCount"]);r!=null&&C(e,["raiMediaFilteredCount"],r);const i=S(t,["raiMediaFilteredReasons"]);return i!=null&&C(e,["raiMediaFilteredReasons"],i),e}function att(t){const e={},n=S(t,["video"]);return n!=null&&C(e,["video"],ptt(n)),e}function ltt(t){const e={},n=S(t,["_self"]);return n!=null&&C(e,["video"],mtt(n)),e}function ctt(t){const e={},n=S(t,["operationName"]);return n!=null&&C(e,["_url","operationName"],n),e}function utt(t){const e={},n=S(t,["operationName"]);return n!=null&&C(e,["_url","operationName"],n),e}function dtt(t){const e={},n=S(t,["name"]);n!=null&&C(e,["name"],n);const r=S(t,["metadata"]);r!=null&&C(e,["metadata"],r);const i=S(t,["done"]);i!=null&&C(e,["done"],i);const s=S(t,["error"]);s!=null&&C(e,["error"],s);const o=S(t,["response"]);return o!=null&&C(e,["response"],ftt(o)),e}function ftt(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=S(t,["parent"]);r!=null&&C(e,["parent"],r);const i=S(t,["documentName"]);return i!=null&&C(e,["documentName"],i),e}function mhe(t){const e={},n=S(t,["name"]);n!=null&&C(e,["name"],n);const r=S(t,["metadata"]);r!=null&&C(e,["metadata"],r);const i=S(t,["done"]);i!=null&&C(e,["done"],i);const s=S(t,["error"]);s!=null&&C(e,["error"],s);const o=S(t,["response"]);return o!=null&&C(e,["response"],htt(o)),e}function htt(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=S(t,["parent"]);r!=null&&C(e,["parent"],r);const i=S(t,["documentName"]);return i!=null&&C(e,["documentName"],i),e}function ptt(t){const e={},n=S(t,["uri"]);n!=null&&C(e,["uri"],n);const r=S(t,["encodedVideo"]);r!=null&&C(e,["videoBytes"],HB(r));const i=S(t,["encoding"]);return i!=null&&C(e,["mimeType"],i),e}function mtt(t){const e={},n=S(t,["gcsUri"]);n!=null&&C(e,["uri"],n);const r=S(t,["bytesBase64Encoded"]);r!=null&&C(e,["videoBytes"],HB(r));const i=S(t,["mimeType"]);return i!=null&&C(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var PX;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(PX||(PX={}));var _X;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(_X||(_X={}));var IX;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(IX||(IX={}));var be;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(be||(be={}));var RX;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(RX||(RX={}));var OX;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(OX||(OX={}));var MX;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(MX||(MX={}));var LX;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(LX||(LX={}));var DX;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(DX||(DX={}));var jX;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(jX||(jX={}));var BX;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(BX||(BX={}));var UX;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(UX||(UX={}));var FX;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(FX||(FX={}));var $X;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})($X||($X={}));var zX;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(zX||(zX={}));var VX;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(VX||(VX={}));var HX;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(HX||(HX={}));var qX;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(qX||(qX={}));var GX;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(GX||(GX={}));var M2;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(M2||(M2={}));var KX;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(KX||(KX={}));var WX;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(WX||(WX={}));var YX;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(YX||(YX={}));var XL;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(XL||(XL={}));var JX;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(JX||(JX={}));var XX;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(XX||(XX={}));var QX;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(QX||(QX={}));var ZX;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(ZX||(ZX={}));var eQ;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(eQ||(eQ={}));var tQ;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(tQ||(tQ={}));var nQ;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(nQ||(nQ={}));var rQ;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(rQ||(rQ={}));var iQ;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(iQ||(iQ={}));var sQ;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(sQ||(sQ={}));var oQ;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(oQ||(oQ={}));var aQ;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(aQ||(aQ={}));var lQ;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(lQ||(lQ={}));var cQ;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(cQ||(cQ={}));var uQ;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(uQ||(uQ={}));var dQ;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(dQ||(dQ={}));var fQ;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(fQ||(fQ={}));var hQ;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(hQ||(hQ={}));var pQ;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(pQ||(pQ={}));var mQ;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(mQ||(mQ={}));var gQ;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(gQ||(gQ={}));var yQ;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(yQ||(yQ={}));var xQ;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(xQ||(xQ={}));var vQ;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(vQ||(vQ={}));var bQ;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(bQ||(bQ={}));var wQ;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(wQ||(wQ={}));var EQ;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(EQ||(EQ={}));var SQ;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(SQ||(SQ={}));var AQ;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(AQ||(AQ={}));var TQ;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(TQ||(TQ={}));var kQ;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(kQ||(kQ={}));var zg;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(zg||(zg={}));class QL{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Bb{get text(){var e,n,r,i,s,o,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",u=!1;const h=[];for(const m of(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[g,y]of Object.entries(m))g!=="text"&&g!=="thought"&&g!=="thoughtSignature"&&(y!==null||y!==void 0)&&h.push(g);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;u=!0,c+=m.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),u?c:void 0}get data(){var e,n,r,i,s,o,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const u=[];for(const h of(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[m,g]of Object.entries(h))m!=="inlineData"&&(g!==null||g!==void 0)&&u.push(m);h.inlineData&&typeof h.inlineData.data=="string"&&(c+=atob(h.inlineData.data))}return u.length>0&&console.warn(`there are non-data parts ${u} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,n,r,i,s,o,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(u=>u.functionCall).map(u=>u.functionCall).filter(u=>u!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var e,n,r,i,s,o,a,l,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const u=(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(h=>h.executableCode).map(h=>h.executableCode).filter(h=>h!==void 0);if((u==null?void 0:u.length)!==0)return(c=u==null?void 0:u[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,n,r,i,s,o,a,l,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const u=(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(h=>h.codeExecutionResult).map(h=>h.codeExecutionResult).filter(h=>h!==void 0);if((u==null?void 0:u.length)!==0)return(c=u==null?void 0:u[0])===null||c===void 0?void 0:c.output}}class NQ{}class CQ{}class gtt{}class ytt{}class xtt{}class vtt{}class PQ{}class _Q{}class IQ{}class btt{}class L2{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new L2;let i;const s=e;return n?i=itt(s):i=rtt(s),Object.assign(r,i),r}}class RQ{}class OQ{}class MQ{}class LQ{}class wtt{}class Ett{}class Stt{}class qB{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new qB,s=dtt(e);return Object.assign(r,s),r}}class Att{}class Ttt{}class ktt{}class DQ{}class Ntt{get text(){var e,n,r;let i="",s=!1;const o=[];for(const a of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[l,c]of Object.entries(a))l!=="text"&&l!=="thought"&&c!==null&&o.push(l);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;s=!0,i+=a.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?i:void 0}get data(){var e,n,r;let i="";const s=[];for(const o of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[a,l]of Object.entries(o))a!=="inlineData"&&l!==null&&s.push(a);o.inlineData&&typeof o.inlineData.data=="string"&&(i+=atob(o.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class Ctt{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class GB{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new GB,s=mhe(e);return Object.assign(r,s),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zn(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function ghe(t,e){const n=zn(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function yhe(t){return Array.isArray(t)?t.map(e=>D2(e)):[D2(t)]}function D2(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function xhe(t){const e=D2(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function vhe(t){const e=D2(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function jQ(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function bhe(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>jQ(e)):[jQ(t)]}function ZL(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function BQ(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function UQ(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Ds(t){if(t==null)throw new Error("ContentUnion is required");return ZL(t)?t:{role:"user",parts:bhe(t)}}function KB(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=Ds(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=Ds(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Ds(n)):[Ds(e)]}function Ja(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(BQ(t)||UQ(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Ds(t)]}const e=[],n=[],r=ZL(t[0]);for(const i of t){const s=ZL(i);if(s!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)e.push(i);else{if(BQ(i)||UQ(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||e.push({role:"user",parts:bhe(n)}),e}function Ptt(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(be).includes(n[0].toUpperCase())?n[0].toUpperCase():be.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(be).includes(r.toUpperCase())?r.toUpperCase():be.TYPE_UNSPECIFIED})}}function fy(t){const e={},n=["items"],r=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const s=t.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(e.nullable=!0,t=s[1]):s[1].type==="null"&&(e.nullable=!0,t=s[0])),t.type instanceof Array&&Ptt(t.type,e);for(const[o,a]of Object.entries(t))if(a!=null)if(o=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(be).includes(a.toUpperCase())?a.toUpperCase():be.TYPE_UNSPECIFIED}else if(n.includes(o))e[o]=fy(a);else if(r.includes(o)){const l=[];for(const c of a){if(c.type=="null"){e.nullable=!0;continue}l.push(fy(c))}e[o]=l}else if(i.includes(o)){const l={};for(const[c,u]of Object.entries(a))l[c]=fy(u);e[o]=l}else{if(o==="additionalProperties")continue;e[o]=a}return e}function WB(t){return fy(t)}function YB(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function JB(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function yv(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=fy(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=fy(e.response));return t}function xv(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function _tt(t,e,n,r=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function Bd(t,e){if(typeof e!="string")throw new Error("name must be a string");return _tt(t,e,"cachedContents")}function whe(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function _h(t){return HB(t)}function Itt(t){return t!=null&&typeof t=="object"&&"name"in t}function Rtt(t){return t!=null&&typeof t=="object"&&"video"in t}function Ott(t){return t!=null&&typeof t=="object"&&"uri"in t}function Ehe(t){var e;let n;if(Itt(t)&&(n=t.name),!(Ott(t)&&(n=t.uri,n===void 0))&&!(Rtt(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function She(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function Ahe(t){for(const e of["models","tunedModels","publisherModels"])if(Mtt(t,e))return t[e];return[]}function Mtt(t,e){return t!==null&&typeof t=="object"&&e in t}function Ltt(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function Dtt(t,e={}){const n=[],r=new Set;for(const i of t){const s=i.name;if(r.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);r.add(s);const o=Ltt(i,e);o.functionDeclarations&&n.push(...o.functionDeclarations)}return{functionDeclarations:n}}function The(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,i=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(i>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function jtt(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function khe(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const i=n.inlinedResponses;if(!Array.isArray(i)||i.length===0)return t;let s=!1;for(const o of i){if(typeof o!="object"||o===null)continue;const l=o.response;if(typeof l!="object"||l===null)continue;if(l.embedding!==void 0){s=!0;break}}return s&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function vv(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function Nhe(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Btt(t){const e={},n=S(t,["responsesFile"]);n!=null&&C(e,["fileName"],n);const r=S(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>xnt(o))),C(e,["inlinedResponses"],s)}const i=S(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),C(e,["inlinedEmbedContentResponses"],s)}return e}function Utt(t){const e={},n=S(t,["predictionsFormat"]);n!=null&&C(e,["format"],n);const r=S(t,["gcsDestination","outputUriPrefix"]);r!=null&&C(e,["gcsUri"],r);const i=S(t,["bigqueryDestination","outputUri"]);return i!=null&&C(e,["bigqueryUri"],i),e}function Ftt(t){const e={},n=S(t,["format"]);n!=null&&C(e,["predictionsFormat"],n);const r=S(t,["gcsUri"]);r!=null&&C(e,["gcsDestination","outputUriPrefix"],r);const i=S(t,["bigqueryUri"]);if(i!=null&&C(e,["bigqueryDestination","outputUri"],i),S(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(S(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(S(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function BT(t){const e={},n=S(t,["name"]);n!=null&&C(e,["name"],n);const r=S(t,["metadata","displayName"]);r!=null&&C(e,["displayName"],r);const i=S(t,["metadata","state"]);i!=null&&C(e,["state"],Nhe(i));const s=S(t,["metadata","createTime"]);s!=null&&C(e,["createTime"],s);const o=S(t,["metadata","endTime"]);o!=null&&C(e,["endTime"],o);const a=S(t,["metadata","updateTime"]);a!=null&&C(e,["updateTime"],a);const l=S(t,["metadata","model"]);l!=null&&C(e,["model"],l);const c=S(t,["metadata","output"]);return c!=null&&C(e,["dest"],Btt(khe(c))),e}function eD(t){const e={},n=S(t,["name"]);n!=null&&C(e,["name"],n);const r=S(t,["displayName"]);r!=null&&C(e,["displayName"],r);const i=S(t,["state"]);i!=null&&C(e,["state"],Nhe(i));const s=S(t,["error"]);s!=null&&C(e,["error"],s);const o=S(t,["createTime"]);o!=null&&C(e,["createTime"],o);const a=S(t,["startTime"]);a!=null&&C(e,["startTime"],a);const l=S(t,["endTime"]);l!=null&&C(e,["endTime"],l);const c=S(t,["updateTime"]);c!=null&&C(e,["updateTime"],c);const u=S(t,["model"]);u!=null&&C(e,["model"],u);const h=S(t,["inputConfig"]);h!=null&&C(e,["src"],$tt(h));const m=S(t,["outputConfig"]);m!=null&&C(e,["dest"],Utt(khe(m)));const g=S(t,["completionStats"]);return g!=null&&C(e,["completionStats"],g),e}function $tt(t){const e={},n=S(t,["instancesFormat"]);n!=null&&C(e,["format"],n);const r=S(t,["gcsSource","uris"]);r!=null&&C(e,["gcsUri"],r);const i=S(t,["bigquerySource","inputUri"]);return i!=null&&C(e,["bigqueryUri"],i),e}function ztt(t,e){const n={};if(S(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(S(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(S(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=S(e,["fileName"]);r!=null&&C(n,["fileName"],r);const i=S(e,["inlinedRequests"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>ynt(t,o))),C(n,["requests","requests"],s)}return n}function Vtt(t){const e={},n=S(t,["format"]);n!=null&&C(e,["instancesFormat"],n);const r=S(t,["gcsUri"]);r!=null&&C(e,["gcsSource","uris"],r);const i=S(t,["bigqueryUri"]);if(i!=null&&C(e,["bigquerySource","inputUri"],i),S(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(S(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function Htt(t){const e={},n=S(t,["data"]);if(n!=null&&C(e,["data"],n),S(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=S(t,["mimeType"]);return r!=null&&C(e,["mimeType"],r),e}function qtt(t,e){const n={},r=S(e,["name"]);return r!=null&&C(n,["_url","name"],vv(t,r)),n}function Gtt(t,e){const n={},r=S(e,["name"]);return r!=null&&C(n,["_url","name"],vv(t,r)),n}function Ktt(t){const e={},n=S(t,["content"]);n!=null&&C(e,["content"],n);const r=S(t,["citationMetadata"]);r!=null&&C(e,["citationMetadata"],Wtt(r));const i=S(t,["tokenCount"]);i!=null&&C(e,["tokenCount"],i);const s=S(t,["finishReason"]);s!=null&&C(e,["finishReason"],s);const o=S(t,["avgLogprobs"]);o!=null&&C(e,["avgLogprobs"],o);const a=S(t,["groundingMetadata"]);a!=null&&C(e,["groundingMetadata"],a);const l=S(t,["index"]);l!=null&&C(e,["index"],l);const c=S(t,["logprobsResult"]);c!=null&&C(e,["logprobsResult"],c);const u=S(t,["safetyRatings"]);if(u!=null){let m=u;Array.isArray(m)&&(m=m.map(g=>g)),C(e,["safetyRatings"],m)}const h=S(t,["urlContextMetadata"]);return h!=null&&C(e,["urlContextMetadata"],h),e}function Wtt(t){const e={},n=S(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),C(e,["citations"],r)}return e}function Che(t){const e={},n=S(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>Tnt(s))),C(e,["parts"],i)}const r=S(t,["role"]);return r!=null&&C(e,["role"],r),e}function Ytt(t,e){const n={},r=S(t,["displayName"]);if(e!==void 0&&r!=null&&C(e,["batch","displayName"],r),S(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function Jtt(t,e){const n={},r=S(t,["displayName"]);e!==void 0&&r!=null&&C(e,["displayName"],r);const i=S(t,["dest"]);return e!==void 0&&i!=null&&C(e,["outputConfig"],Ftt(jtt(i))),n}function FQ(t,e){const n={},r=S(e,["model"]);r!=null&&C(n,["_url","model"],zn(t,r));const i=S(e,["src"]);i!=null&&C(n,["batch","inputConfig"],ztt(t,The(t,i)));const s=S(e,["config"]);return s!=null&&Ytt(s,n),n}function Xtt(t,e){const n={},r=S(e,["model"]);r!=null&&C(n,["model"],zn(t,r));const i=S(e,["src"]);i!=null&&C(n,["inputConfig"],Vtt(The(t,i)));const s=S(e,["config"]);return s!=null&&Jtt(s,n),n}function Qtt(t,e){const n={},r=S(t,["displayName"]);return e!==void 0&&r!=null&&C(e,["batch","displayName"],r),n}function Ztt(t,e){const n={},r=S(e,["model"]);r!=null&&C(n,["_url","model"],zn(t,r));const i=S(e,["src"]);i!=null&&C(n,["batch","inputConfig"],ont(t,i));const s=S(e,["config"]);return s!=null&&Qtt(s,n),n}function ent(t,e){const n={},r=S(e,["name"]);return r!=null&&C(n,["_url","name"],vv(t,r)),n}function tnt(t,e){const n={},r=S(e,["name"]);return r!=null&&C(n,["_url","name"],vv(t,r)),n}function nnt(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=S(t,["name"]);r!=null&&C(e,["name"],r);const i=S(t,["done"]);i!=null&&C(e,["done"],i);const s=S(t,["error"]);return s!=null&&C(e,["error"],s),e}function rnt(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=S(t,["name"]);r!=null&&C(e,["name"],r);const i=S(t,["done"]);i!=null&&C(e,["done"],i);const s=S(t,["error"]);return s!=null&&C(e,["error"],s),e}function int(t,e){const n={},r=S(e,["contents"]);if(r!=null){let s=KB(t,r);Array.isArray(s)&&(s=s.map(o=>o)),C(n,["requests[]","request","content"],s)}const i=S(e,["config"]);return i!=null&&(C(n,["_self"],snt(i,n)),ttt(n,{"requests[].*":"requests[].request.*"})),n}function snt(t,e){const n={},r=S(t,["taskType"]);e!==void 0&&r!=null&&C(e,["requests[]","taskType"],r);const i=S(t,["title"]);e!==void 0&&i!=null&&C(e,["requests[]","title"],i);const s=S(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&C(e,["requests[]","outputDimensionality"],s),S(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(S(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function ont(t,e){const n={},r=S(e,["fileName"]);r!=null&&C(n,["file_name"],r);const i=S(e,["inlinedRequests"]);return i!=null&&C(n,["requests"],int(t,i)),n}function ant(t){const e={};if(S(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=S(t,["fileUri"]);n!=null&&C(e,["fileUri"],n);const r=S(t,["mimeType"]);return r!=null&&C(e,["mimeType"],r),e}function lnt(t){const e={},n=S(t,["id"]);n!=null&&C(e,["id"],n);const r=S(t,["args"]);r!=null&&C(e,["args"],r);const i=S(t,["name"]);if(i!=null&&C(e,["name"],i),S(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(S(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function cnt(t){const e={},n=S(t,["mode"]);n!=null&&C(e,["mode"],n);const r=S(t,["allowedFunctionNames"]);if(r!=null&&C(e,["allowedFunctionNames"],r),S(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function unt(t,e,n){const r={},i=S(e,["systemInstruction"]);n!==void 0&&i!=null&&C(n,["systemInstruction"],Che(Ds(i)));const s=S(e,["temperature"]);s!=null&&C(r,["temperature"],s);const o=S(e,["topP"]);o!=null&&C(r,["topP"],o);const a=S(e,["topK"]);a!=null&&C(r,["topK"],a);const l=S(e,["candidateCount"]);l!=null&&C(r,["candidateCount"],l);const c=S(e,["maxOutputTokens"]);c!=null&&C(r,["maxOutputTokens"],c);const u=S(e,["stopSequences"]);u!=null&&C(r,["stopSequences"],u);const h=S(e,["responseLogprobs"]);h!=null&&C(r,["responseLogprobs"],h);const m=S(e,["logprobs"]);m!=null&&C(r,["logprobs"],m);const g=S(e,["presencePenalty"]);g!=null&&C(r,["presencePenalty"],g);const y=S(e,["frequencyPenalty"]);y!=null&&C(r,["frequencyPenalty"],y);const v=S(e,["seed"]);v!=null&&C(r,["seed"],v);const b=S(e,["responseMimeType"]);b!=null&&C(r,["responseMimeType"],b);const w=S(e,["responseSchema"]);w!=null&&C(r,["responseSchema"],WB(w));const k=S(e,["responseJsonSchema"]);if(k!=null&&C(r,["responseJsonSchema"],k),S(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(S(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const N=S(e,["safetySettings"]);if(n!==void 0&&N!=null){let F=N;Array.isArray(F)&&(F=F.map(T=>knt(T))),C(n,["safetySettings"],F)}const R=S(e,["tools"]);if(n!==void 0&&R!=null){let F=xv(R);Array.isArray(F)&&(F=F.map(T=>Cnt(yv(T)))),C(n,["tools"],F)}const D=S(e,["toolConfig"]);if(n!==void 0&&D!=null&&C(n,["toolConfig"],Nnt(D)),S(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const O=S(e,["cachedContent"]);n!==void 0&&O!=null&&C(n,["cachedContent"],Bd(t,O));const B=S(e,["responseModalities"]);B!=null&&C(r,["responseModalities"],B);const z=S(e,["mediaResolution"]);z!=null&&C(r,["mediaResolution"],z);const U=S(e,["speechConfig"]);if(U!=null&&C(r,["speechConfig"],YB(U)),S(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const $=S(e,["thinkingConfig"]);$!=null&&C(r,["thinkingConfig"],$);const W=S(e,["imageConfig"]);W!=null&&C(r,["imageConfig"],gnt(W));const H=S(e,["enableEnhancedCivicAnswers"]);return H!=null&&C(r,["enableEnhancedCivicAnswers"],H),r}function dnt(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=S(t,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>Ktt(c))),C(e,["candidates"],l)}const i=S(t,["modelVersion"]);i!=null&&C(e,["modelVersion"],i);const s=S(t,["promptFeedback"]);s!=null&&C(e,["promptFeedback"],s);const o=S(t,["responseId"]);o!=null&&C(e,["responseId"],o);const a=S(t,["usageMetadata"]);return a!=null&&C(e,["usageMetadata"],a),e}function fnt(t,e){const n={},r=S(e,["name"]);return r!=null&&C(n,["_url","name"],vv(t,r)),n}function hnt(t,e){const n={},r=S(e,["name"]);return r!=null&&C(n,["_url","name"],vv(t,r)),n}function pnt(t){const e={};if(S(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=S(t,["enableWidget"]);return n!=null&&C(e,["enableWidget"],n),e}function mnt(t){const e={};if(S(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(S(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=S(t,["timeRangeFilter"]);return n!=null&&C(e,["timeRangeFilter"],n),e}function gnt(t){const e={},n=S(t,["aspectRatio"]);n!=null&&C(e,["aspectRatio"],n);const r=S(t,["imageSize"]);if(r!=null&&C(e,["imageSize"],r),S(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(S(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function ynt(t,e){const n={},r=S(e,["model"]);r!=null&&C(n,["request","model"],zn(t,r));const i=S(e,["contents"]);if(i!=null){let a=Ja(i);Array.isArray(a)&&(a=a.map(l=>Che(l))),C(n,["request","contents"],a)}const s=S(e,["metadata"]);s!=null&&C(n,["metadata"],s);const o=S(e,["config"]);return o!=null&&C(n,["request","generationConfig"],unt(t,o,S(n,["request"],{}))),n}function xnt(t){const e={},n=S(t,["response"]);n!=null&&C(e,["response"],dnt(n));const r=S(t,["error"]);return r!=null&&C(e,["error"],r),e}function vnt(t,e){const n={},r=S(t,["pageSize"]);e!==void 0&&r!=null&&C(e,["_query","pageSize"],r);const i=S(t,["pageToken"]);if(e!==void 0&&i!=null&&C(e,["_query","pageToken"],i),S(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function bnt(t,e){const n={},r=S(t,["pageSize"]);e!==void 0&&r!=null&&C(e,["_query","pageSize"],r);const i=S(t,["pageToken"]);e!==void 0&&i!=null&&C(e,["_query","pageToken"],i);const s=S(t,["filter"]);return e!==void 0&&s!=null&&C(e,["_query","filter"],s),n}function wnt(t){const e={},n=S(t,["config"]);return n!=null&&vnt(n,e),e}function Ent(t){const e={},n=S(t,["config"]);return n!=null&&bnt(n,e),e}function Snt(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=S(t,["nextPageToken"]);r!=null&&C(e,["nextPageToken"],r);const i=S(t,["operations"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>BT(o))),C(e,["batchJobs"],s)}return e}function Ant(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=S(t,["nextPageToken"]);r!=null&&C(e,["nextPageToken"],r);const i=S(t,["batchPredictionJobs"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>eD(o))),C(e,["batchJobs"],s)}return e}function Tnt(t){const e={},n=S(t,["mediaResolution"]);n!=null&&C(e,["mediaResolution"],n);const r=S(t,["codeExecutionResult"]);r!=null&&C(e,["codeExecutionResult"],r);const i=S(t,["executableCode"]);i!=null&&C(e,["executableCode"],i);const s=S(t,["fileData"]);s!=null&&C(e,["fileData"],ant(s));const o=S(t,["functionCall"]);o!=null&&C(e,["functionCall"],lnt(o));const a=S(t,["functionResponse"]);a!=null&&C(e,["functionResponse"],a);const l=S(t,["inlineData"]);l!=null&&C(e,["inlineData"],Htt(l));const c=S(t,["text"]);c!=null&&C(e,["text"],c);const u=S(t,["thought"]);u!=null&&C(e,["thought"],u);const h=S(t,["thoughtSignature"]);h!=null&&C(e,["thoughtSignature"],h);const m=S(t,["videoMetadata"]);return m!=null&&C(e,["videoMetadata"],m),e}function knt(t){const e={},n=S(t,["category"]);if(n!=null&&C(e,["category"],n),S(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=S(t,["threshold"]);return r!=null&&C(e,["threshold"],r),e}function Nnt(t){const e={},n=S(t,["functionCallingConfig"]);n!=null&&C(e,["functionCallingConfig"],cnt(n));const r=S(t,["retrievalConfig"]);return r!=null&&C(e,["retrievalConfig"],r),e}function Cnt(t){const e={},n=S(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(h=>h)),C(e,["functionDeclarations"],u)}if(S(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=S(t,["googleSearchRetrieval"]);r!=null&&C(e,["googleSearchRetrieval"],r);const i=S(t,["computerUse"]);i!=null&&C(e,["computerUse"],i);const s=S(t,["fileSearch"]);s!=null&&C(e,["fileSearch"],s);const o=S(t,["codeExecution"]);if(o!=null&&C(e,["codeExecution"],o),S(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=S(t,["googleMaps"]);a!=null&&C(e,["googleMaps"],pnt(a));const l=S(t,["googleSearch"]);l!=null&&C(e,["googleSearch"],mnt(l));const c=S(t,["urlContext"]);return c!=null&&C(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ad;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Ad||(Ad={}));class Jm{constructor(e,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,i)}init(e,n,r){var i,s;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let o={config:{}};!r||Object.keys(r).length===0?o={config:{}}:typeof r=="object"?o=Object.assign({},r):o=r,o.config&&(o.config.pageToken=n.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(s=(i=o.config)===null||i===void 0?void 0:i.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Pnt extends jd{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Jm(Ad.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=FQ(this.apiClient,e),r=n._url,i=Tt("{model}:batchGenerateContent",r),a=n.batch.inputConfig.requests,l=a.requests,c=[];for(const u of l){const h=Object.assign({},u);if(h.systemInstruction){const m=h.systemInstruction;delete h.systemInstruction;const g=h.request;g.systemInstruction=m,h.request=g}c.push(h)}return a.requests=c,delete n.config,delete n._url,delete n._query,{path:i,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},i=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${i}`),r.dest===void 0){const s=this.getGcsUri(e),o=this.getBigqueryUri(e);if(s)s.endsWith(".jsonl")?r.dest=`${s.slice(0,-6)}/dest`:r.dest=`${s}_dest_${i}`;else if(o)r.dest=`${o}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Xtt(this.apiClient,e);return a=Tt("batchPredictionJobs",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>eD(u))}else{const c=FQ(this.apiClient,e);return a=Tt("{model}:batchGenerateContent",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>BT(u))}}async createEmbeddingsInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Ztt(this.apiClient,e);return s=Tt("{model}:asyncBatchEmbedContent",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>BT(l))}}async get(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=hnt(this.apiClient,e);return a=Tt("batchPredictionJobs/{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>eD(u))}else{const c=fnt(this.apiClient,e);return a=Tt("batches/{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>BT(u))}}async cancel(e){var n,r,i,s;let o="",a={};if(this.apiClient.isVertexAI()){const l=Gtt(this.apiClient,e);o=Tt("batchPredictionJobs/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const l=qtt(this.apiClient,e);o=Tt("batches/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Ent(e);return a=Tt("batchPredictionJobs",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const h=Ant(u),m=new DQ;return Object.assign(m,h),m})}else{const c=wnt(e);return a=Tt("batches",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const h=Snt(u),m=new DQ;return Object.assign(m,h),m})}}async delete(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=tnt(this.apiClient,e);return a=Tt("batchPredictionJobs/{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>rnt(u))}else{const c=ent(this.apiClient,e);return a=Tt("batches/{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>nnt(u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _nt(t){const e={},n=S(t,["data"]);if(n!=null&&C(e,["data"],n),S(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=S(t,["mimeType"]);return r!=null&&C(e,["mimeType"],r),e}function $Q(t){const e={},n=S(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>Znt(s))),C(e,["parts"],i)}const r=S(t,["role"]);return r!=null&&C(e,["role"],r),e}function Int(t,e){const n={},r=S(t,["ttl"]);e!==void 0&&r!=null&&C(e,["ttl"],r);const i=S(t,["expireTime"]);e!==void 0&&i!=null&&C(e,["expireTime"],i);const s=S(t,["displayName"]);e!==void 0&&s!=null&&C(e,["displayName"],s);const o=S(t,["contents"]);if(e!==void 0&&o!=null){let u=Ja(o);Array.isArray(u)&&(u=u.map(h=>$Q(h))),C(e,["contents"],u)}const a=S(t,["systemInstruction"]);e!==void 0&&a!=null&&C(e,["systemInstruction"],$Q(Ds(a)));const l=S(t,["tools"]);if(e!==void 0&&l!=null){let u=l;Array.isArray(u)&&(u=u.map(h=>trt(h))),C(e,["tools"],u)}const c=S(t,["toolConfig"]);if(e!==void 0&&c!=null&&C(e,["toolConfig"],ert(c)),S(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function Rnt(t,e){const n={},r=S(t,["ttl"]);e!==void 0&&r!=null&&C(e,["ttl"],r);const i=S(t,["expireTime"]);e!==void 0&&i!=null&&C(e,["expireTime"],i);const s=S(t,["displayName"]);e!==void 0&&s!=null&&C(e,["displayName"],s);const o=S(t,["contents"]);if(e!==void 0&&o!=null){let h=Ja(o);Array.isArray(h)&&(h=h.map(m=>m)),C(e,["contents"],h)}const a=S(t,["systemInstruction"]);e!==void 0&&a!=null&&C(e,["systemInstruction"],Ds(a));const l=S(t,["tools"]);if(e!==void 0&&l!=null){let h=l;Array.isArray(h)&&(h=h.map(m=>nrt(m))),C(e,["tools"],h)}const c=S(t,["toolConfig"]);e!==void 0&&c!=null&&C(e,["toolConfig"],c);const u=S(t,["kmsKeyName"]);return e!==void 0&&u!=null&&C(e,["encryption_spec","kmsKeyName"],u),n}function Ont(t,e){const n={},r=S(e,["model"]);r!=null&&C(n,["model"],ghe(t,r));const i=S(e,["config"]);return i!=null&&Int(i,n),n}function Mnt(t,e){const n={},r=S(e,["model"]);r!=null&&C(n,["model"],ghe(t,r));const i=S(e,["config"]);return i!=null&&Rnt(i,n),n}function Lnt(t,e){const n={},r=S(e,["name"]);return r!=null&&C(n,["_url","name"],Bd(t,r)),n}function Dnt(t,e){const n={},r=S(e,["name"]);return r!=null&&C(n,["_url","name"],Bd(t,r)),n}function jnt(t){const e={},n=S(t,["sdkHttpResponse"]);return n!=null&&C(e,["sdkHttpResponse"],n),e}function Bnt(t){const e={},n=S(t,["sdkHttpResponse"]);return n!=null&&C(e,["sdkHttpResponse"],n),e}function Unt(t){const e={};if(S(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=S(t,["fileUri"]);n!=null&&C(e,["fileUri"],n);const r=S(t,["mimeType"]);return r!=null&&C(e,["mimeType"],r),e}function Fnt(t){const e={},n=S(t,["id"]);n!=null&&C(e,["id"],n);const r=S(t,["args"]);r!=null&&C(e,["args"],r);const i=S(t,["name"]);if(i!=null&&C(e,["name"],i),S(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(S(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function $nt(t){const e={},n=S(t,["mode"]);n!=null&&C(e,["mode"],n);const r=S(t,["allowedFunctionNames"]);if(r!=null&&C(e,["allowedFunctionNames"],r),S(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function znt(t){const e={};if(S(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=S(t,["description"]);n!=null&&C(e,["description"],n);const r=S(t,["name"]);r!=null&&C(e,["name"],r);const i=S(t,["parameters"]);i!=null&&C(e,["parameters"],i);const s=S(t,["parametersJsonSchema"]);s!=null&&C(e,["parametersJsonSchema"],s);const o=S(t,["response"]);o!=null&&C(e,["response"],o);const a=S(t,["responseJsonSchema"]);return a!=null&&C(e,["responseJsonSchema"],a),e}function Vnt(t,e){const n={},r=S(e,["name"]);return r!=null&&C(n,["_url","name"],Bd(t,r)),n}function Hnt(t,e){const n={},r=S(e,["name"]);return r!=null&&C(n,["_url","name"],Bd(t,r)),n}function qnt(t){const e={};if(S(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=S(t,["enableWidget"]);return n!=null&&C(e,["enableWidget"],n),e}function Gnt(t){const e={};if(S(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(S(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=S(t,["timeRangeFilter"]);return n!=null&&C(e,["timeRangeFilter"],n),e}function Knt(t,e){const n={},r=S(t,["pageSize"]);e!==void 0&&r!=null&&C(e,["_query","pageSize"],r);const i=S(t,["pageToken"]);return e!==void 0&&i!=null&&C(e,["_query","pageToken"],i),n}function Wnt(t,e){const n={},r=S(t,["pageSize"]);e!==void 0&&r!=null&&C(e,["_query","pageSize"],r);const i=S(t,["pageToken"]);return e!==void 0&&i!=null&&C(e,["_query","pageToken"],i),n}function Ynt(t){const e={},n=S(t,["config"]);return n!=null&&Knt(n,e),e}function Jnt(t){const e={},n=S(t,["config"]);return n!=null&&Wnt(n,e),e}function Xnt(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=S(t,["nextPageToken"]);r!=null&&C(e,["nextPageToken"],r);const i=S(t,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),C(e,["cachedContents"],s)}return e}function Qnt(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=S(t,["nextPageToken"]);r!=null&&C(e,["nextPageToken"],r);const i=S(t,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),C(e,["cachedContents"],s)}return e}function Znt(t){const e={},n=S(t,["mediaResolution"]);n!=null&&C(e,["mediaResolution"],n);const r=S(t,["codeExecutionResult"]);r!=null&&C(e,["codeExecutionResult"],r);const i=S(t,["executableCode"]);i!=null&&C(e,["executableCode"],i);const s=S(t,["fileData"]);s!=null&&C(e,["fileData"],Unt(s));const o=S(t,["functionCall"]);o!=null&&C(e,["functionCall"],Fnt(o));const a=S(t,["functionResponse"]);a!=null&&C(e,["functionResponse"],a);const l=S(t,["inlineData"]);l!=null&&C(e,["inlineData"],_nt(l));const c=S(t,["text"]);c!=null&&C(e,["text"],c);const u=S(t,["thought"]);u!=null&&C(e,["thought"],u);const h=S(t,["thoughtSignature"]);h!=null&&C(e,["thoughtSignature"],h);const m=S(t,["videoMetadata"]);return m!=null&&C(e,["videoMetadata"],m),e}function ert(t){const e={},n=S(t,["functionCallingConfig"]);n!=null&&C(e,["functionCallingConfig"],$nt(n));const r=S(t,["retrievalConfig"]);return r!=null&&C(e,["retrievalConfig"],r),e}function trt(t){const e={},n=S(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(h=>h)),C(e,["functionDeclarations"],u)}if(S(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=S(t,["googleSearchRetrieval"]);r!=null&&C(e,["googleSearchRetrieval"],r);const i=S(t,["computerUse"]);i!=null&&C(e,["computerUse"],i);const s=S(t,["fileSearch"]);s!=null&&C(e,["fileSearch"],s);const o=S(t,["codeExecution"]);if(o!=null&&C(e,["codeExecution"],o),S(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=S(t,["googleMaps"]);a!=null&&C(e,["googleMaps"],qnt(a));const l=S(t,["googleSearch"]);l!=null&&C(e,["googleSearch"],Gnt(l));const c=S(t,["urlContext"]);return c!=null&&C(e,["urlContext"],c),e}function nrt(t){const e={},n=S(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(m=>znt(m))),C(e,["functionDeclarations"],h)}const r=S(t,["retrieval"]);r!=null&&C(e,["retrieval"],r);const i=S(t,["googleSearchRetrieval"]);i!=null&&C(e,["googleSearchRetrieval"],i);const s=S(t,["computerUse"]);if(s!=null&&C(e,["computerUse"],s),S(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=S(t,["codeExecution"]);o!=null&&C(e,["codeExecution"],o);const a=S(t,["enterpriseWebSearch"]);a!=null&&C(e,["enterpriseWebSearch"],a);const l=S(t,["googleMaps"]);l!=null&&C(e,["googleMaps"],l);const c=S(t,["googleSearch"]);c!=null&&C(e,["googleSearch"],c);const u=S(t,["urlContext"]);return u!=null&&C(e,["urlContext"],u),e}function rrt(t,e){const n={},r=S(t,["ttl"]);e!==void 0&&r!=null&&C(e,["ttl"],r);const i=S(t,["expireTime"]);return e!==void 0&&i!=null&&C(e,["expireTime"],i),n}function irt(t,e){const n={},r=S(t,["ttl"]);e!==void 0&&r!=null&&C(e,["ttl"],r);const i=S(t,["expireTime"]);return e!==void 0&&i!=null&&C(e,["expireTime"],i),n}function srt(t,e){const n={},r=S(e,["name"]);r!=null&&C(n,["_url","name"],Bd(t,r));const i=S(e,["config"]);return i!=null&&rrt(i,n),n}function ort(t,e){const n={},r=S(e,["name"]);r!=null&&C(n,["_url","name"],Bd(t,r));const i=S(e,["config"]);return i!=null&&irt(i,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class art extends jd{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Jm(Ad.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Mnt(this.apiClient,e);return a=Tt("cachedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>u)}else{const c=Ont(this.apiClient,e);return a=Tt("cachedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>u)}}async get(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Hnt(this.apiClient,e);return a=Tt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>u)}else{const c=Vnt(this.apiClient,e);return a=Tt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>u)}}async delete(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Dnt(this.apiClient,e);return a=Tt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const h=Bnt(u),m=new MQ;return Object.assign(m,h),m})}else{const c=Lnt(this.apiClient,e);return a=Tt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const h=jnt(u),m=new MQ;return Object.assign(m,h),m})}}async update(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=ort(this.apiClient,e);return a=Tt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>u)}else{const c=srt(this.apiClient,e);return a=Tt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>u)}}async listInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Jnt(e);return a=Tt("cachedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const h=Qnt(u),m=new LQ;return Object.assign(m,h),m})}else{const c=Ynt(e);return a=Tt("cachedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const h=Xnt(u),m=new LQ;return Object.assign(m,h),m})}}}function j2(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function zQ(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function nn(t){return this instanceof nn?(this.v=t,this):new nn(t)}function Ul(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(g){return function(y){return Promise.resolve(y).then(g,h)}}function a(g,y){r[g]&&(i[g]=function(v){return new Promise(function(b,w){s.push([g,v,b,w])>1||l(g,v)})},y&&(i[g]=y(i[g])))}function l(g,y){try{c(r[g](y))}catch(v){m(s[0][3],v)}}function c(g){g.value instanceof nn?Promise.resolve(g.value.v).then(u,h):m(s[0][2],g)}function u(g){l("next",g)}function h(g){l("throw",g)}function m(g,y){g(y),s.shift(),s.length&&l(s[0][0],s[0][1])}}function Fl(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof zQ=="function"?zQ(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,l){o=t[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lrt(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:Phe(n)}function Phe(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function crt(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function VQ(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const i=[];let s=!0;for(;r<n&&t[r].role==="model";)i.push(t[r]),s&&!Phe(t[r])&&(s=!1),r++;s?e.push(...i):e.pop()}return e}class urt{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new drt(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class drt{constructor(e,n,r,i={},s=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=i,this.history=s,this.sendPromise=Promise.resolve(),crt(s)}async sendMessage(e){var n;await this.sendPromise;const r=Ds(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var s,o,a;const l=await i,c=(o=(s=l.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content,u=l.automaticFunctionCallingHistory,h=this.getHistory(!0).length;let m=[];u!=null&&(m=(a=u.slice(h))!==null&&a!==void 0?a:[]);const g=c?[c]:[];this.recordHistory(r,g,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;const r=Ds(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const s=await i;return this.processStreamResponse(s,r)}getHistory(e=!1){const n=e?VQ(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return Ul(this,arguments,function*(){var i,s,o,a,l,c;const u=[];try{for(var h=!0,m=Fl(e),g;g=yield nn(m.next()),i=g.done,!i;h=!0){a=g.value,h=!1;const y=a;if(lrt(y)){const v=(c=(l=y.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content;v!==void 0&&u.push(v)}yield yield nn(y)}}catch(y){s={error:y}}finally{try{!h&&!i&&(o=m.return)&&(yield nn(o.call(m)))}finally{if(s)throw s.error}}this.recordHistory(n,u)})}recordHistory(e,n,r){let i=[];n.length>0&&n.every(s=>s.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...VQ(r)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class YC extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,YC.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function frt(t){const e={},n=S(t,["file"]);return n!=null&&C(e,["file"],n),e}function hrt(t){const e={},n=S(t,["sdkHttpResponse"]);return n!=null&&C(e,["sdkHttpResponse"],n),e}function prt(t){const e={},n=S(t,["name"]);return n!=null&&C(e,["_url","file"],Ehe(n)),e}function mrt(t){const e={},n=S(t,["sdkHttpResponse"]);return n!=null&&C(e,["sdkHttpResponse"],n),e}function grt(t){const e={},n=S(t,["name"]);return n!=null&&C(e,["_url","file"],Ehe(n)),e}function yrt(t,e){const n={},r=S(t,["pageSize"]);e!==void 0&&r!=null&&C(e,["_query","pageSize"],r);const i=S(t,["pageToken"]);return e!==void 0&&i!=null&&C(e,["_query","pageToken"],i),n}function xrt(t){const e={},n=S(t,["config"]);return n!=null&&yrt(n,e),e}function vrt(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=S(t,["nextPageToken"]);r!=null&&C(e,["nextPageToken"],r);const i=S(t,["files"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),C(e,["files"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class brt extends jd{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Jm(Ad.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=xrt(e);return s=Tt("files",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),i.then(l=>{const c=vrt(l),u=new Att;return Object.assign(u,c),u})}}async createInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=frt(e);return s=Tt("upload/v1beta/files",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=hrt(l),u=new Ttt;return Object.assign(u,c),u})}}async get(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=grt(e);return s=Tt("files/{file}",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=prt(e);return s=Tt("files/{file}",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),i.then(l=>{const c=mrt(l),u=new ktt;return Object.assign(u,c),u})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function UT(t){const e={},n=S(t,["data"]);if(n!=null&&C(e,["data"],n),S(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=S(t,["mimeType"]);return r!=null&&C(e,["mimeType"],r),e}function wrt(t){const e={},n=S(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>jrt(s))),C(e,["parts"],i)}const r=S(t,["role"]);return r!=null&&C(e,["role"],r),e}function Ert(t){const e={};if(S(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=S(t,["fileUri"]);n!=null&&C(e,["fileUri"],n);const r=S(t,["mimeType"]);return r!=null&&C(e,["mimeType"],r),e}function Srt(t){const e={},n=S(t,["id"]);n!=null&&C(e,["id"],n);const r=S(t,["args"]);r!=null&&C(e,["args"],r);const i=S(t,["name"]);if(i!=null&&C(e,["name"],i),S(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(S(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Art(t){const e={};if(S(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=S(t,["description"]);n!=null&&C(e,["description"],n);const r=S(t,["name"]);r!=null&&C(e,["name"],r);const i=S(t,["parameters"]);i!=null&&C(e,["parameters"],i);const s=S(t,["parametersJsonSchema"]);s!=null&&C(e,["parametersJsonSchema"],s);const o=S(t,["response"]);o!=null&&C(e,["response"],o);const a=S(t,["responseJsonSchema"]);return a!=null&&C(e,["responseJsonSchema"],a),e}function Trt(t){const e={},n=S(t,["modelSelectionConfig"]);n!=null&&C(e,["modelConfig"],n);const r=S(t,["responseJsonSchema"]);r!=null&&C(e,["responseJsonSchema"],r);const i=S(t,["audioTimestamp"]);i!=null&&C(e,["audioTimestamp"],i);const s=S(t,["candidateCount"]);s!=null&&C(e,["candidateCount"],s);const o=S(t,["enableAffectiveDialog"]);o!=null&&C(e,["enableAffectiveDialog"],o);const a=S(t,["frequencyPenalty"]);a!=null&&C(e,["frequencyPenalty"],a);const l=S(t,["logprobs"]);l!=null&&C(e,["logprobs"],l);const c=S(t,["maxOutputTokens"]);c!=null&&C(e,["maxOutputTokens"],c);const u=S(t,["mediaResolution"]);u!=null&&C(e,["mediaResolution"],u);const h=S(t,["presencePenalty"]);h!=null&&C(e,["presencePenalty"],h);const m=S(t,["responseLogprobs"]);m!=null&&C(e,["responseLogprobs"],m);const g=S(t,["responseMimeType"]);g!=null&&C(e,["responseMimeType"],g);const y=S(t,["responseModalities"]);y!=null&&C(e,["responseModalities"],y);const v=S(t,["responseSchema"]);v!=null&&C(e,["responseSchema"],v);const b=S(t,["routingConfig"]);b!=null&&C(e,["routingConfig"],b);const w=S(t,["seed"]);w!=null&&C(e,["seed"],w);const k=S(t,["speechConfig"]);k!=null&&C(e,["speechConfig"],k);const N=S(t,["stopSequences"]);N!=null&&C(e,["stopSequences"],N);const R=S(t,["temperature"]);R!=null&&C(e,["temperature"],R);const D=S(t,["thinkingConfig"]);D!=null&&C(e,["thinkingConfig"],D);const O=S(t,["topK"]);O!=null&&C(e,["topK"],O);const B=S(t,["topP"]);if(B!=null&&C(e,["topP"],B),S(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function krt(t){const e={};if(S(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=S(t,["enableWidget"]);return n!=null&&C(e,["enableWidget"],n),e}function Nrt(t){const e={};if(S(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(S(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=S(t,["timeRangeFilter"]);return n!=null&&C(e,["timeRangeFilter"],n),e}function Crt(t,e){const n={},r=S(t,["generationConfig"]);e!==void 0&&r!=null&&C(e,["setup","generationConfig"],r);const i=S(t,["responseModalities"]);e!==void 0&&i!=null&&C(e,["setup","generationConfig","responseModalities"],i);const s=S(t,["temperature"]);e!==void 0&&s!=null&&C(e,["setup","generationConfig","temperature"],s);const o=S(t,["topP"]);e!==void 0&&o!=null&&C(e,["setup","generationConfig","topP"],o);const a=S(t,["topK"]);e!==void 0&&a!=null&&C(e,["setup","generationConfig","topK"],a);const l=S(t,["maxOutputTokens"]);e!==void 0&&l!=null&&C(e,["setup","generationConfig","maxOutputTokens"],l);const c=S(t,["mediaResolution"]);e!==void 0&&c!=null&&C(e,["setup","generationConfig","mediaResolution"],c);const u=S(t,["seed"]);e!==void 0&&u!=null&&C(e,["setup","generationConfig","seed"],u);const h=S(t,["speechConfig"]);e!==void 0&&h!=null&&C(e,["setup","generationConfig","speechConfig"],JB(h));const m=S(t,["thinkingConfig"]);e!==void 0&&m!=null&&C(e,["setup","generationConfig","thinkingConfig"],m);const g=S(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&C(e,["setup","generationConfig","enableAffectiveDialog"],g);const y=S(t,["systemInstruction"]);e!==void 0&&y!=null&&C(e,["setup","systemInstruction"],wrt(Ds(y)));const v=S(t,["tools"]);if(e!==void 0&&v!=null){let O=xv(v);Array.isArray(O)&&(O=O.map(B=>Urt(yv(B)))),C(e,["setup","tools"],O)}const b=S(t,["sessionResumption"]);e!==void 0&&b!=null&&C(e,["setup","sessionResumption"],Brt(b));const w=S(t,["inputAudioTranscription"]);e!==void 0&&w!=null&&C(e,["setup","inputAudioTranscription"],w);const k=S(t,["outputAudioTranscription"]);e!==void 0&&k!=null&&C(e,["setup","outputAudioTranscription"],k);const N=S(t,["realtimeInputConfig"]);e!==void 0&&N!=null&&C(e,["setup","realtimeInputConfig"],N);const R=S(t,["contextWindowCompression"]);e!==void 0&&R!=null&&C(e,["setup","contextWindowCompression"],R);const D=S(t,["proactivity"]);if(e!==void 0&&D!=null&&C(e,["setup","proactivity"],D),S(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function Prt(t,e){const n={},r=S(t,["generationConfig"]);e!==void 0&&r!=null&&C(e,["setup","generationConfig"],Trt(r));const i=S(t,["responseModalities"]);e!==void 0&&i!=null&&C(e,["setup","generationConfig","responseModalities"],i);const s=S(t,["temperature"]);e!==void 0&&s!=null&&C(e,["setup","generationConfig","temperature"],s);const o=S(t,["topP"]);e!==void 0&&o!=null&&C(e,["setup","generationConfig","topP"],o);const a=S(t,["topK"]);e!==void 0&&a!=null&&C(e,["setup","generationConfig","topK"],a);const l=S(t,["maxOutputTokens"]);e!==void 0&&l!=null&&C(e,["setup","generationConfig","maxOutputTokens"],l);const c=S(t,["mediaResolution"]);e!==void 0&&c!=null&&C(e,["setup","generationConfig","mediaResolution"],c);const u=S(t,["seed"]);e!==void 0&&u!=null&&C(e,["setup","generationConfig","seed"],u);const h=S(t,["speechConfig"]);e!==void 0&&h!=null&&C(e,["setup","generationConfig","speechConfig"],JB(h));const m=S(t,["thinkingConfig"]);e!==void 0&&m!=null&&C(e,["setup","generationConfig","thinkingConfig"],m);const g=S(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&C(e,["setup","generationConfig","enableAffectiveDialog"],g);const y=S(t,["systemInstruction"]);e!==void 0&&y!=null&&C(e,["setup","systemInstruction"],Ds(y));const v=S(t,["tools"]);if(e!==void 0&&v!=null){let B=xv(v);Array.isArray(B)&&(B=B.map(z=>Frt(yv(z)))),C(e,["setup","tools"],B)}const b=S(t,["sessionResumption"]);e!==void 0&&b!=null&&C(e,["setup","sessionResumption"],b);const w=S(t,["inputAudioTranscription"]);e!==void 0&&w!=null&&C(e,["setup","inputAudioTranscription"],w);const k=S(t,["outputAudioTranscription"]);e!==void 0&&k!=null&&C(e,["setup","outputAudioTranscription"],k);const N=S(t,["realtimeInputConfig"]);e!==void 0&&N!=null&&C(e,["setup","realtimeInputConfig"],N);const R=S(t,["contextWindowCompression"]);e!==void 0&&R!=null&&C(e,["setup","contextWindowCompression"],R);const D=S(t,["proactivity"]);e!==void 0&&D!=null&&C(e,["setup","proactivity"],D);const O=S(t,["explicitVadSignal"]);return e!==void 0&&O!=null&&C(e,["setup","explicitVadSignal"],O),n}function _rt(t,e){const n={},r=S(e,["model"]);r!=null&&C(n,["setup","model"],zn(t,r));const i=S(e,["config"]);return i!=null&&C(n,["config"],Crt(i,n)),n}function Irt(t,e){const n={},r=S(e,["model"]);r!=null&&C(n,["setup","model"],zn(t,r));const i=S(e,["config"]);return i!=null&&C(n,["config"],Prt(i,n)),n}function Rrt(t){const e={},n=S(t,["musicGenerationConfig"]);return n!=null&&C(e,["musicGenerationConfig"],n),e}function Ort(t){const e={},n=S(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),C(e,["weightedPrompts"],r)}return e}function Mrt(t){const e={},n=S(t,["media"]);if(n!=null){let c=yhe(n);Array.isArray(c)&&(c=c.map(u=>UT(u))),C(e,["mediaChunks"],c)}const r=S(t,["audio"]);r!=null&&C(e,["audio"],UT(vhe(r)));const i=S(t,["audioStreamEnd"]);i!=null&&C(e,["audioStreamEnd"],i);const s=S(t,["video"]);s!=null&&C(e,["video"],UT(xhe(s)));const o=S(t,["text"]);o!=null&&C(e,["text"],o);const a=S(t,["activityStart"]);a!=null&&C(e,["activityStart"],a);const l=S(t,["activityEnd"]);return l!=null&&C(e,["activityEnd"],l),e}function Lrt(t){const e={},n=S(t,["media"]);if(n!=null){let c=yhe(n);Array.isArray(c)&&(c=c.map(u=>u)),C(e,["mediaChunks"],c)}const r=S(t,["audio"]);r!=null&&C(e,["audio"],vhe(r));const i=S(t,["audioStreamEnd"]);i!=null&&C(e,["audioStreamEnd"],i);const s=S(t,["video"]);s!=null&&C(e,["video"],xhe(s));const o=S(t,["text"]);o!=null&&C(e,["text"],o);const a=S(t,["activityStart"]);a!=null&&C(e,["activityStart"],a);const l=S(t,["activityEnd"]);return l!=null&&C(e,["activityEnd"],l),e}function Drt(t){const e={},n=S(t,["setupComplete"]);n!=null&&C(e,["setupComplete"],n);const r=S(t,["serverContent"]);r!=null&&C(e,["serverContent"],r);const i=S(t,["toolCall"]);i!=null&&C(e,["toolCall"],i);const s=S(t,["toolCallCancellation"]);s!=null&&C(e,["toolCallCancellation"],s);const o=S(t,["usageMetadata"]);o!=null&&C(e,["usageMetadata"],$rt(o));const a=S(t,["goAway"]);a!=null&&C(e,["goAway"],a);const l=S(t,["sessionResumptionUpdate"]);l!=null&&C(e,["sessionResumptionUpdate"],l);const c=S(t,["voiceActivityDetectionSignal"]);return c!=null&&C(e,["voiceActivityDetectionSignal"],c),e}function jrt(t){const e={},n=S(t,["mediaResolution"]);n!=null&&C(e,["mediaResolution"],n);const r=S(t,["codeExecutionResult"]);r!=null&&C(e,["codeExecutionResult"],r);const i=S(t,["executableCode"]);i!=null&&C(e,["executableCode"],i);const s=S(t,["fileData"]);s!=null&&C(e,["fileData"],Ert(s));const o=S(t,["functionCall"]);o!=null&&C(e,["functionCall"],Srt(o));const a=S(t,["functionResponse"]);a!=null&&C(e,["functionResponse"],a);const l=S(t,["inlineData"]);l!=null&&C(e,["inlineData"],UT(l));const c=S(t,["text"]);c!=null&&C(e,["text"],c);const u=S(t,["thought"]);u!=null&&C(e,["thought"],u);const h=S(t,["thoughtSignature"]);h!=null&&C(e,["thoughtSignature"],h);const m=S(t,["videoMetadata"]);return m!=null&&C(e,["videoMetadata"],m),e}function Brt(t){const e={},n=S(t,["handle"]);if(n!=null&&C(e,["handle"],n),S(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Urt(t){const e={},n=S(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(h=>h)),C(e,["functionDeclarations"],u)}if(S(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=S(t,["googleSearchRetrieval"]);r!=null&&C(e,["googleSearchRetrieval"],r);const i=S(t,["computerUse"]);i!=null&&C(e,["computerUse"],i);const s=S(t,["fileSearch"]);s!=null&&C(e,["fileSearch"],s);const o=S(t,["codeExecution"]);if(o!=null&&C(e,["codeExecution"],o),S(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=S(t,["googleMaps"]);a!=null&&C(e,["googleMaps"],krt(a));const l=S(t,["googleSearch"]);l!=null&&C(e,["googleSearch"],Nrt(l));const c=S(t,["urlContext"]);return c!=null&&C(e,["urlContext"],c),e}function Frt(t){const e={},n=S(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(m=>Art(m))),C(e,["functionDeclarations"],h)}const r=S(t,["retrieval"]);r!=null&&C(e,["retrieval"],r);const i=S(t,["googleSearchRetrieval"]);i!=null&&C(e,["googleSearchRetrieval"],i);const s=S(t,["computerUse"]);if(s!=null&&C(e,["computerUse"],s),S(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=S(t,["codeExecution"]);o!=null&&C(e,["codeExecution"],o);const a=S(t,["enterpriseWebSearch"]);a!=null&&C(e,["enterpriseWebSearch"],a);const l=S(t,["googleMaps"]);l!=null&&C(e,["googleMaps"],l);const c=S(t,["googleSearch"]);c!=null&&C(e,["googleSearch"],c);const u=S(t,["urlContext"]);return u!=null&&C(e,["urlContext"],u),e}function $rt(t){const e={},n=S(t,["promptTokenCount"]);n!=null&&C(e,["promptTokenCount"],n);const r=S(t,["cachedContentTokenCount"]);r!=null&&C(e,["cachedContentTokenCount"],r);const i=S(t,["candidatesTokenCount"]);i!=null&&C(e,["responseTokenCount"],i);const s=S(t,["toolUsePromptTokenCount"]);s!=null&&C(e,["toolUsePromptTokenCount"],s);const o=S(t,["thoughtsTokenCount"]);o!=null&&C(e,["thoughtsTokenCount"],o);const a=S(t,["totalTokenCount"]);a!=null&&C(e,["totalTokenCount"],a);const l=S(t,["promptTokensDetails"]);if(l!=null){let g=l;Array.isArray(g)&&(g=g.map(y=>y)),C(e,["promptTokensDetails"],g)}const c=S(t,["cacheTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(y=>y)),C(e,["cacheTokensDetails"],g)}const u=S(t,["candidatesTokensDetails"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(y=>y)),C(e,["responseTokensDetails"],g)}const h=S(t,["toolUsePromptTokensDetails"]);if(h!=null){let g=h;Array.isArray(g)&&(g=g.map(y=>y)),C(e,["toolUsePromptTokensDetails"],g)}const m=S(t,["trafficType"]);return m!=null&&C(e,["trafficType"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zrt(t){const e={},n=S(t,["data"]);if(n!=null&&C(e,["data"],n),S(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=S(t,["mimeType"]);return r!=null&&C(e,["mimeType"],r),e}function Vrt(t){const e={},n=S(t,["content"]);n!=null&&C(e,["content"],n);const r=S(t,["citationMetadata"]);r!=null&&C(e,["citationMetadata"],Hrt(r));const i=S(t,["tokenCount"]);i!=null&&C(e,["tokenCount"],i);const s=S(t,["finishReason"]);s!=null&&C(e,["finishReason"],s);const o=S(t,["avgLogprobs"]);o!=null&&C(e,["avgLogprobs"],o);const a=S(t,["groundingMetadata"]);a!=null&&C(e,["groundingMetadata"],a);const l=S(t,["index"]);l!=null&&C(e,["index"],l);const c=S(t,["logprobsResult"]);c!=null&&C(e,["logprobsResult"],c);const u=S(t,["safetyRatings"]);if(u!=null){let m=u;Array.isArray(m)&&(m=m.map(g=>g)),C(e,["safetyRatings"],m)}const h=S(t,["urlContextMetadata"]);return h!=null&&C(e,["urlContextMetadata"],h),e}function Hrt(t){const e={},n=S(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),C(e,["citations"],r)}return e}function qrt(t,e){const n={},r=S(e,["model"]);r!=null&&C(n,["_url","model"],zn(t,r));const i=S(e,["contents"]);if(i!=null){let s=Ja(i);Array.isArray(s)&&(s=s.map(o=>o)),C(n,["contents"],s)}return n}function Grt(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=S(t,["tokensInfo"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),C(e,["tokensInfo"],i)}return e}function Krt(t){const e={},n=S(t,["values"]);n!=null&&C(e,["values"],n);const r=S(t,["statistics"]);return r!=null&&C(e,["statistics"],Wrt(r)),e}function Wrt(t){const e={},n=S(t,["truncated"]);n!=null&&C(e,["truncated"],n);const r=S(t,["token_count"]);return r!=null&&C(e,["tokenCount"],r),e}function JC(t){const e={},n=S(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>rst(s))),C(e,["parts"],i)}const r=S(t,["role"]);return r!=null&&C(e,["role"],r),e}function Yrt(t){const e={},n=S(t,["controlType"]);n!=null&&C(e,["controlType"],n);const r=S(t,["enableControlImageComputation"]);return r!=null&&C(e,["computeControl"],r),e}function Jrt(t){const e={};if(S(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(S(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(S(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Xrt(t,e){const n={},r=S(t,["systemInstruction"]);e!==void 0&&r!=null&&C(e,["systemInstruction"],Ds(r));const i=S(t,["tools"]);if(e!==void 0&&i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>Ohe(a))),C(e,["tools"],o)}const s=S(t,["generationConfig"]);return e!==void 0&&s!=null&&C(e,["generationConfig"],zit(s)),n}function Qrt(t,e){const n={},r=S(e,["model"]);r!=null&&C(n,["_url","model"],zn(t,r));const i=S(e,["contents"]);if(i!=null){let o=Ja(i);Array.isArray(o)&&(o=o.map(a=>JC(a))),C(n,["contents"],o)}const s=S(e,["config"]);return s!=null&&Jrt(s),n}function Zrt(t,e){const n={},r=S(e,["model"]);r!=null&&C(n,["_url","model"],zn(t,r));const i=S(e,["contents"]);if(i!=null){let o=Ja(i);Array.isArray(o)&&(o=o.map(a=>a)),C(n,["contents"],o)}const s=S(e,["config"]);return s!=null&&Xrt(s,n),n}function eit(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=S(t,["totalTokens"]);r!=null&&C(e,["totalTokens"],r);const i=S(t,["cachedContentTokenCount"]);return i!=null&&C(e,["cachedContentTokenCount"],i),e}function tit(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=S(t,["totalTokens"]);return r!=null&&C(e,["totalTokens"],r),e}function nit(t,e){const n={},r=S(e,["model"]);return r!=null&&C(n,["_url","name"],zn(t,r)),n}function rit(t,e){const n={},r=S(e,["model"]);return r!=null&&C(n,["_url","name"],zn(t,r)),n}function iit(t){const e={},n=S(t,["sdkHttpResponse"]);return n!=null&&C(e,["sdkHttpResponse"],n),e}function sit(t){const e={},n=S(t,["sdkHttpResponse"]);return n!=null&&C(e,["sdkHttpResponse"],n),e}function oit(t,e){const n={},r=S(t,["outputGcsUri"]);e!==void 0&&r!=null&&C(e,["parameters","storageUri"],r);const i=S(t,["negativePrompt"]);e!==void 0&&i!=null&&C(e,["parameters","negativePrompt"],i);const s=S(t,["numberOfImages"]);e!==void 0&&s!=null&&C(e,["parameters","sampleCount"],s);const o=S(t,["aspectRatio"]);e!==void 0&&o!=null&&C(e,["parameters","aspectRatio"],o);const a=S(t,["guidanceScale"]);e!==void 0&&a!=null&&C(e,["parameters","guidanceScale"],a);const l=S(t,["seed"]);e!==void 0&&l!=null&&C(e,["parameters","seed"],l);const c=S(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&C(e,["parameters","safetySetting"],c);const u=S(t,["personGeneration"]);e!==void 0&&u!=null&&C(e,["parameters","personGeneration"],u);const h=S(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&C(e,["parameters","includeSafetyAttributes"],h);const m=S(t,["includeRaiReason"]);e!==void 0&&m!=null&&C(e,["parameters","includeRaiReason"],m);const g=S(t,["language"]);e!==void 0&&g!=null&&C(e,["parameters","language"],g);const y=S(t,["outputMimeType"]);e!==void 0&&y!=null&&C(e,["parameters","outputOptions","mimeType"],y);const v=S(t,["outputCompressionQuality"]);e!==void 0&&v!=null&&C(e,["parameters","outputOptions","compressionQuality"],v);const b=S(t,["addWatermark"]);e!==void 0&&b!=null&&C(e,["parameters","addWatermark"],b);const w=S(t,["labels"]);e!==void 0&&w!=null&&C(e,["labels"],w);const k=S(t,["editMode"]);e!==void 0&&k!=null&&C(e,["parameters","editMode"],k);const N=S(t,["baseSteps"]);return e!==void 0&&N!=null&&C(e,["parameters","editConfig","baseSteps"],N),n}function ait(t,e){const n={},r=S(e,["model"]);r!=null&&C(n,["_url","model"],zn(t,r));const i=S(e,["prompt"]);i!=null&&C(n,["instances[0]","prompt"],i);const s=S(e,["referenceImages"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>cst(l))),C(n,["instances[0]","referenceImages"],a)}const o=S(e,["config"]);return o!=null&&oit(o,n),n}function lit(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=S(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>XC(s))),C(e,["generatedImages"],i)}return e}function cit(t,e){const n={},r=S(t,["taskType"]);e!==void 0&&r!=null&&C(e,["requests[]","taskType"],r);const i=S(t,["title"]);e!==void 0&&i!=null&&C(e,["requests[]","title"],i);const s=S(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&C(e,["requests[]","outputDimensionality"],s),S(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(S(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function uit(t,e){const n={},r=S(t,["taskType"]);e!==void 0&&r!=null&&C(e,["instances[]","task_type"],r);const i=S(t,["title"]);e!==void 0&&i!=null&&C(e,["instances[]","title"],i);const s=S(t,["outputDimensionality"]);e!==void 0&&s!=null&&C(e,["parameters","outputDimensionality"],s);const o=S(t,["mimeType"]);e!==void 0&&o!=null&&C(e,["instances[]","mimeType"],o);const a=S(t,["autoTruncate"]);return e!==void 0&&a!=null&&C(e,["parameters","autoTruncate"],a),n}function dit(t,e){const n={},r=S(e,["model"]);r!=null&&C(n,["_url","model"],zn(t,r));const i=S(e,["contents"]);if(i!=null){let a=KB(t,i);Array.isArray(a)&&(a=a.map(l=>l)),C(n,["requests[]","content"],a)}const s=S(e,["config"]);s!=null&&cit(s,n);const o=S(e,["model"]);return o!==void 0&&C(n,["requests[]","model"],zn(t,o)),n}function fit(t,e){const n={},r=S(e,["model"]);r!=null&&C(n,["_url","model"],zn(t,r));const i=S(e,["contents"]);if(i!=null){let o=KB(t,i);Array.isArray(o)&&(o=o.map(a=>a)),C(n,["instances[]","content"],o)}const s=S(e,["config"]);return s!=null&&uit(s,n),n}function hit(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=S(t,["embeddings"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>o)),C(e,["embeddings"],s)}const i=S(t,["metadata"]);return i!=null&&C(e,["metadata"],i),e}function pit(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=S(t,["predictions[]","embeddings"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>Krt(o))),C(e,["embeddings"],s)}const i=S(t,["metadata"]);return i!=null&&C(e,["metadata"],i),e}function mit(t){const e={},n=S(t,["endpoint"]);n!=null&&C(e,["name"],n);const r=S(t,["deployedModelId"]);return r!=null&&C(e,["deployedModelId"],r),e}function git(t){const e={};if(S(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=S(t,["fileUri"]);n!=null&&C(e,["fileUri"],n);const r=S(t,["mimeType"]);return r!=null&&C(e,["mimeType"],r),e}function yit(t){const e={},n=S(t,["id"]);n!=null&&C(e,["id"],n);const r=S(t,["args"]);r!=null&&C(e,["args"],r);const i=S(t,["name"]);if(i!=null&&C(e,["name"],i),S(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(S(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function xit(t){const e={},n=S(t,["mode"]);n!=null&&C(e,["mode"],n);const r=S(t,["allowedFunctionNames"]);if(r!=null&&C(e,["allowedFunctionNames"],r),S(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function vit(t){const e={};if(S(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=S(t,["description"]);n!=null&&C(e,["description"],n);const r=S(t,["name"]);r!=null&&C(e,["name"],r);const i=S(t,["parameters"]);i!=null&&C(e,["parameters"],i);const s=S(t,["parametersJsonSchema"]);s!=null&&C(e,["parametersJsonSchema"],s);const o=S(t,["response"]);o!=null&&C(e,["response"],o);const a=S(t,["responseJsonSchema"]);return a!=null&&C(e,["responseJsonSchema"],a),e}function bit(t,e,n){const r={},i=S(e,["systemInstruction"]);n!==void 0&&i!=null&&C(n,["systemInstruction"],JC(Ds(i)));const s=S(e,["temperature"]);s!=null&&C(r,["temperature"],s);const o=S(e,["topP"]);o!=null&&C(r,["topP"],o);const a=S(e,["topK"]);a!=null&&C(r,["topK"],a);const l=S(e,["candidateCount"]);l!=null&&C(r,["candidateCount"],l);const c=S(e,["maxOutputTokens"]);c!=null&&C(r,["maxOutputTokens"],c);const u=S(e,["stopSequences"]);u!=null&&C(r,["stopSequences"],u);const h=S(e,["responseLogprobs"]);h!=null&&C(r,["responseLogprobs"],h);const m=S(e,["logprobs"]);m!=null&&C(r,["logprobs"],m);const g=S(e,["presencePenalty"]);g!=null&&C(r,["presencePenalty"],g);const y=S(e,["frequencyPenalty"]);y!=null&&C(r,["frequencyPenalty"],y);const v=S(e,["seed"]);v!=null&&C(r,["seed"],v);const b=S(e,["responseMimeType"]);b!=null&&C(r,["responseMimeType"],b);const w=S(e,["responseSchema"]);w!=null&&C(r,["responseSchema"],WB(w));const k=S(e,["responseJsonSchema"]);if(k!=null&&C(r,["responseJsonSchema"],k),S(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(S(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const N=S(e,["safetySettings"]);if(n!==void 0&&N!=null){let F=N;Array.isArray(F)&&(F=F.map(T=>ust(T))),C(n,["safetySettings"],F)}const R=S(e,["tools"]);if(n!==void 0&&R!=null){let F=xv(R);Array.isArray(F)&&(F=F.map(T=>yst(yv(T)))),C(n,["tools"],F)}const D=S(e,["toolConfig"]);if(n!==void 0&&D!=null&&C(n,["toolConfig"],gst(D)),S(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const O=S(e,["cachedContent"]);n!==void 0&&O!=null&&C(n,["cachedContent"],Bd(t,O));const B=S(e,["responseModalities"]);B!=null&&C(r,["responseModalities"],B);const z=S(e,["mediaResolution"]);z!=null&&C(r,["mediaResolution"],z);const U=S(e,["speechConfig"]);if(U!=null&&C(r,["speechConfig"],YB(U)),S(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const $=S(e,["thinkingConfig"]);$!=null&&C(r,["thinkingConfig"],$);const W=S(e,["imageConfig"]);W!=null&&C(r,["imageConfig"],Kit(W));const H=S(e,["enableEnhancedCivicAnswers"]);return H!=null&&C(r,["enableEnhancedCivicAnswers"],H),r}function wit(t,e,n){const r={},i=S(e,["systemInstruction"]);n!==void 0&&i!=null&&C(n,["systemInstruction"],Ds(i));const s=S(e,["temperature"]);s!=null&&C(r,["temperature"],s);const o=S(e,["topP"]);o!=null&&C(r,["topP"],o);const a=S(e,["topK"]);a!=null&&C(r,["topK"],a);const l=S(e,["candidateCount"]);l!=null&&C(r,["candidateCount"],l);const c=S(e,["maxOutputTokens"]);c!=null&&C(r,["maxOutputTokens"],c);const u=S(e,["stopSequences"]);u!=null&&C(r,["stopSequences"],u);const h=S(e,["responseLogprobs"]);h!=null&&C(r,["responseLogprobs"],h);const m=S(e,["logprobs"]);m!=null&&C(r,["logprobs"],m);const g=S(e,["presencePenalty"]);g!=null&&C(r,["presencePenalty"],g);const y=S(e,["frequencyPenalty"]);y!=null&&C(r,["frequencyPenalty"],y);const v=S(e,["seed"]);v!=null&&C(r,["seed"],v);const b=S(e,["responseMimeType"]);b!=null&&C(r,["responseMimeType"],b);const w=S(e,["responseSchema"]);w!=null&&C(r,["responseSchema"],WB(w));const k=S(e,["responseJsonSchema"]);k!=null&&C(r,["responseJsonSchema"],k);const N=S(e,["routingConfig"]);N!=null&&C(r,["routingConfig"],N);const R=S(e,["modelSelectionConfig"]);R!=null&&C(r,["modelConfig"],R);const D=S(e,["safetySettings"]);if(n!==void 0&&D!=null){let L=D;Array.isArray(L)&&(L=L.map(V=>V)),C(n,["safetySettings"],L)}const O=S(e,["tools"]);if(n!==void 0&&O!=null){let L=xv(O);Array.isArray(L)&&(L=L.map(V=>Ohe(yv(V)))),C(n,["tools"],L)}const B=S(e,["toolConfig"]);n!==void 0&&B!=null&&C(n,["toolConfig"],B);const z=S(e,["labels"]);n!==void 0&&z!=null&&C(n,["labels"],z);const U=S(e,["cachedContent"]);n!==void 0&&U!=null&&C(n,["cachedContent"],Bd(t,U));const $=S(e,["responseModalities"]);$!=null&&C(r,["responseModalities"],$);const W=S(e,["mediaResolution"]);W!=null&&C(r,["mediaResolution"],W);const H=S(e,["speechConfig"]);H!=null&&C(r,["speechConfig"],YB(H));const F=S(e,["audioTimestamp"]);F!=null&&C(r,["audioTimestamp"],F);const T=S(e,["thinkingConfig"]);T!=null&&C(r,["thinkingConfig"],T);const _=S(e,["imageConfig"]);if(_!=null&&C(r,["imageConfig"],Wit(_)),S(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return r}function HQ(t,e){const n={},r=S(e,["model"]);r!=null&&C(n,["_url","model"],zn(t,r));const i=S(e,["contents"]);if(i!=null){let o=Ja(i);Array.isArray(o)&&(o=o.map(a=>JC(a))),C(n,["contents"],o)}const s=S(e,["config"]);return s!=null&&C(n,["generationConfig"],bit(t,s,n)),n}function qQ(t,e){const n={},r=S(e,["model"]);r!=null&&C(n,["_url","model"],zn(t,r));const i=S(e,["contents"]);if(i!=null){let o=Ja(i);Array.isArray(o)&&(o=o.map(a=>a)),C(n,["contents"],o)}const s=S(e,["config"]);return s!=null&&C(n,["generationConfig"],wit(t,s,n)),n}function GQ(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=S(t,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>Vrt(c))),C(e,["candidates"],l)}const i=S(t,["modelVersion"]);i!=null&&C(e,["modelVersion"],i);const s=S(t,["promptFeedback"]);s!=null&&C(e,["promptFeedback"],s);const o=S(t,["responseId"]);o!=null&&C(e,["responseId"],o);const a=S(t,["usageMetadata"]);return a!=null&&C(e,["usageMetadata"],a),e}function KQ(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=S(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(u=>u)),C(e,["candidates"],c)}const i=S(t,["createTime"]);i!=null&&C(e,["createTime"],i);const s=S(t,["modelVersion"]);s!=null&&C(e,["modelVersion"],s);const o=S(t,["promptFeedback"]);o!=null&&C(e,["promptFeedback"],o);const a=S(t,["responseId"]);a!=null&&C(e,["responseId"],a);const l=S(t,["usageMetadata"]);return l!=null&&C(e,["usageMetadata"],l),e}function Eit(t,e){const n={};if(S(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(S(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=S(t,["numberOfImages"]);e!==void 0&&r!=null&&C(e,["parameters","sampleCount"],r);const i=S(t,["aspectRatio"]);e!==void 0&&i!=null&&C(e,["parameters","aspectRatio"],i);const s=S(t,["guidanceScale"]);if(e!==void 0&&s!=null&&C(e,["parameters","guidanceScale"],s),S(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=S(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&C(e,["parameters","safetySetting"],o);const a=S(t,["personGeneration"]);e!==void 0&&a!=null&&C(e,["parameters","personGeneration"],a);const l=S(t,["includeSafetyAttributes"]);e!==void 0&&l!=null&&C(e,["parameters","includeSafetyAttributes"],l);const c=S(t,["includeRaiReason"]);e!==void 0&&c!=null&&C(e,["parameters","includeRaiReason"],c);const u=S(t,["language"]);e!==void 0&&u!=null&&C(e,["parameters","language"],u);const h=S(t,["outputMimeType"]);e!==void 0&&h!=null&&C(e,["parameters","outputOptions","mimeType"],h);const m=S(t,["outputCompressionQuality"]);if(e!==void 0&&m!=null&&C(e,["parameters","outputOptions","compressionQuality"],m),S(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(S(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const g=S(t,["imageSize"]);if(e!==void 0&&g!=null&&C(e,["parameters","sampleImageSize"],g),S(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function Sit(t,e){const n={},r=S(t,["outputGcsUri"]);e!==void 0&&r!=null&&C(e,["parameters","storageUri"],r);const i=S(t,["negativePrompt"]);e!==void 0&&i!=null&&C(e,["parameters","negativePrompt"],i);const s=S(t,["numberOfImages"]);e!==void 0&&s!=null&&C(e,["parameters","sampleCount"],s);const o=S(t,["aspectRatio"]);e!==void 0&&o!=null&&C(e,["parameters","aspectRatio"],o);const a=S(t,["guidanceScale"]);e!==void 0&&a!=null&&C(e,["parameters","guidanceScale"],a);const l=S(t,["seed"]);e!==void 0&&l!=null&&C(e,["parameters","seed"],l);const c=S(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&C(e,["parameters","safetySetting"],c);const u=S(t,["personGeneration"]);e!==void 0&&u!=null&&C(e,["parameters","personGeneration"],u);const h=S(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&C(e,["parameters","includeSafetyAttributes"],h);const m=S(t,["includeRaiReason"]);e!==void 0&&m!=null&&C(e,["parameters","includeRaiReason"],m);const g=S(t,["language"]);e!==void 0&&g!=null&&C(e,["parameters","language"],g);const y=S(t,["outputMimeType"]);e!==void 0&&y!=null&&C(e,["parameters","outputOptions","mimeType"],y);const v=S(t,["outputCompressionQuality"]);e!==void 0&&v!=null&&C(e,["parameters","outputOptions","compressionQuality"],v);const b=S(t,["addWatermark"]);e!==void 0&&b!=null&&C(e,["parameters","addWatermark"],b);const w=S(t,["labels"]);e!==void 0&&w!=null&&C(e,["labels"],w);const k=S(t,["imageSize"]);e!==void 0&&k!=null&&C(e,["parameters","sampleImageSize"],k);const N=S(t,["enhancePrompt"]);return e!==void 0&&N!=null&&C(e,["parameters","enhancePrompt"],N),n}function Ait(t,e){const n={},r=S(e,["model"]);r!=null&&C(n,["_url","model"],zn(t,r));const i=S(e,["prompt"]);i!=null&&C(n,["instances[0]","prompt"],i);const s=S(e,["config"]);return s!=null&&Eit(s,n),n}function Tit(t,e){const n={},r=S(e,["model"]);r!=null&&C(n,["_url","model"],zn(t,r));const i=S(e,["prompt"]);i!=null&&C(n,["instances[0]","prompt"],i);const s=S(e,["config"]);return s!=null&&Sit(s,n),n}function kit(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=S(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>Bit(o))),C(e,["generatedImages"],s)}const i=S(t,["positivePromptSafetyAttributes"]);return i!=null&&C(e,["positivePromptSafetyAttributes"],Ihe(i)),e}function Nit(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=S(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>XC(o))),C(e,["generatedImages"],s)}const i=S(t,["positivePromptSafetyAttributes"]);return i!=null&&C(e,["positivePromptSafetyAttributes"],Rhe(i)),e}function Cit(t,e){const n={},r=S(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&C(e,["parameters","sampleCount"],r),S(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(S(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=S(t,["durationSeconds"]);if(e!==void 0&&i!=null&&C(e,["parameters","durationSeconds"],i),S(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=S(t,["aspectRatio"]);e!==void 0&&s!=null&&C(e,["parameters","aspectRatio"],s);const o=S(t,["resolution"]);e!==void 0&&o!=null&&C(e,["parameters","resolution"],o);const a=S(t,["personGeneration"]);if(e!==void 0&&a!=null&&C(e,["parameters","personGeneration"],a),S(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const l=S(t,["negativePrompt"]);e!==void 0&&l!=null&&C(e,["parameters","negativePrompt"],l);const c=S(t,["enhancePrompt"]);if(e!==void 0&&c!=null&&C(e,["parameters","enhancePrompt"],c),S(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const u=S(t,["lastFrame"]);e!==void 0&&u!=null&&C(e,["instances[0]","lastFrame"],QC(u));const h=S(t,["referenceImages"]);if(e!==void 0&&h!=null){let m=h;Array.isArray(m)&&(m=m.map(g=>_st(g))),C(e,["instances[0]","referenceImages"],m)}if(S(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(S(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function Pit(t,e){const n={},r=S(t,["numberOfVideos"]);e!==void 0&&r!=null&&C(e,["parameters","sampleCount"],r);const i=S(t,["outputGcsUri"]);e!==void 0&&i!=null&&C(e,["parameters","storageUri"],i);const s=S(t,["fps"]);e!==void 0&&s!=null&&C(e,["parameters","fps"],s);const o=S(t,["durationSeconds"]);e!==void 0&&o!=null&&C(e,["parameters","durationSeconds"],o);const a=S(t,["seed"]);e!==void 0&&a!=null&&C(e,["parameters","seed"],a);const l=S(t,["aspectRatio"]);e!==void 0&&l!=null&&C(e,["parameters","aspectRatio"],l);const c=S(t,["resolution"]);e!==void 0&&c!=null&&C(e,["parameters","resolution"],c);const u=S(t,["personGeneration"]);e!==void 0&&u!=null&&C(e,["parameters","personGeneration"],u);const h=S(t,["pubsubTopic"]);e!==void 0&&h!=null&&C(e,["parameters","pubsubTopic"],h);const m=S(t,["negativePrompt"]);e!==void 0&&m!=null&&C(e,["parameters","negativePrompt"],m);const g=S(t,["enhancePrompt"]);e!==void 0&&g!=null&&C(e,["parameters","enhancePrompt"],g);const y=S(t,["generateAudio"]);e!==void 0&&y!=null&&C(e,["parameters","generateAudio"],y);const v=S(t,["lastFrame"]);e!==void 0&&v!=null&&C(e,["instances[0]","lastFrame"],Jl(v));const b=S(t,["referenceImages"]);if(e!==void 0&&b!=null){let N=b;Array.isArray(N)&&(N=N.map(R=>Ist(R))),C(e,["instances[0]","referenceImages"],N)}const w=S(t,["mask"]);e!==void 0&&w!=null&&C(e,["instances[0]","mask"],Pst(w));const k=S(t,["compressionQuality"]);return e!==void 0&&k!=null&&C(e,["parameters","compressionQuality"],k),n}function _it(t){const e={},n=S(t,["name"]);n!=null&&C(e,["name"],n);const r=S(t,["metadata"]);r!=null&&C(e,["metadata"],r);const i=S(t,["done"]);i!=null&&C(e,["done"],i);const s=S(t,["error"]);s!=null&&C(e,["error"],s);const o=S(t,["response","generateVideoResponse"]);return o!=null&&C(e,["response"],Mit(o)),e}function Iit(t){const e={},n=S(t,["name"]);n!=null&&C(e,["name"],n);const r=S(t,["metadata"]);r!=null&&C(e,["metadata"],r);const i=S(t,["done"]);i!=null&&C(e,["done"],i);const s=S(t,["error"]);s!=null&&C(e,["error"],s);const o=S(t,["response"]);return o!=null&&C(e,["response"],Lit(o)),e}function Rit(t,e){const n={},r=S(e,["model"]);r!=null&&C(n,["_url","model"],zn(t,r));const i=S(e,["prompt"]);i!=null&&C(n,["instances[0]","prompt"],i);const s=S(e,["image"]);s!=null&&C(n,["instances[0]","image"],QC(s));const o=S(e,["video"]);o!=null&&C(n,["instances[0]","video"],Mhe(o));const a=S(e,["source"]);a!=null&&Dit(a,n);const l=S(e,["config"]);return l!=null&&Cit(l,n),n}function Oit(t,e){const n={},r=S(e,["model"]);r!=null&&C(n,["_url","model"],zn(t,r));const i=S(e,["prompt"]);i!=null&&C(n,["instances[0]","prompt"],i);const s=S(e,["image"]);s!=null&&C(n,["instances[0]","image"],Jl(s));const o=S(e,["video"]);o!=null&&C(n,["instances[0]","video"],Lhe(o));const a=S(e,["source"]);a!=null&&jit(a,n);const l=S(e,["config"]);return l!=null&&Pit(l,n),n}function Mit(t){const e={},n=S(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>Fit(o))),C(e,["generatedVideos"],s)}const r=S(t,["raiMediaFilteredCount"]);r!=null&&C(e,["raiMediaFilteredCount"],r);const i=S(t,["raiMediaFilteredReasons"]);return i!=null&&C(e,["raiMediaFilteredReasons"],i),e}function Lit(t){const e={},n=S(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>$it(o))),C(e,["generatedVideos"],s)}const r=S(t,["raiMediaFilteredCount"]);r!=null&&C(e,["raiMediaFilteredCount"],r);const i=S(t,["raiMediaFilteredReasons"]);return i!=null&&C(e,["raiMediaFilteredReasons"],i),e}function Dit(t,e){const n={},r=S(t,["prompt"]);e!==void 0&&r!=null&&C(e,["instances[0]","prompt"],r);const i=S(t,["image"]);e!==void 0&&i!=null&&C(e,["instances[0]","image"],QC(i));const s=S(t,["video"]);return e!==void 0&&s!=null&&C(e,["instances[0]","video"],Mhe(s)),n}function jit(t,e){const n={},r=S(t,["prompt"]);e!==void 0&&r!=null&&C(e,["instances[0]","prompt"],r);const i=S(t,["image"]);e!==void 0&&i!=null&&C(e,["instances[0]","image"],Jl(i));const s=S(t,["video"]);return e!==void 0&&s!=null&&C(e,["instances[0]","video"],Lhe(s)),n}function Bit(t){const e={},n=S(t,["_self"]);n!=null&&C(e,["image"],Yit(n));const r=S(t,["raiFilteredReason"]);r!=null&&C(e,["raiFilteredReason"],r);const i=S(t,["_self"]);return i!=null&&C(e,["safetyAttributes"],Ihe(i)),e}function XC(t){const e={},n=S(t,["_self"]);n!=null&&C(e,["image"],_he(n));const r=S(t,["raiFilteredReason"]);r!=null&&C(e,["raiFilteredReason"],r);const i=S(t,["_self"]);i!=null&&C(e,["safetyAttributes"],Rhe(i));const s=S(t,["prompt"]);return s!=null&&C(e,["enhancedPrompt"],s),e}function Uit(t){const e={},n=S(t,["_self"]);n!=null&&C(e,["mask"],_he(n));const r=S(t,["labels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),C(e,["labels"],i)}return e}function Fit(t){const e={},n=S(t,["video"]);return n!=null&&C(e,["video"],Nst(n)),e}function $it(t){const e={},n=S(t,["_self"]);return n!=null&&C(e,["video"],Cst(n)),e}function zit(t){const e={},n=S(t,["modelSelectionConfig"]);n!=null&&C(e,["modelConfig"],n);const r=S(t,["responseJsonSchema"]);r!=null&&C(e,["responseJsonSchema"],r);const i=S(t,["audioTimestamp"]);i!=null&&C(e,["audioTimestamp"],i);const s=S(t,["candidateCount"]);s!=null&&C(e,["candidateCount"],s);const o=S(t,["enableAffectiveDialog"]);o!=null&&C(e,["enableAffectiveDialog"],o);const a=S(t,["frequencyPenalty"]);a!=null&&C(e,["frequencyPenalty"],a);const l=S(t,["logprobs"]);l!=null&&C(e,["logprobs"],l);const c=S(t,["maxOutputTokens"]);c!=null&&C(e,["maxOutputTokens"],c);const u=S(t,["mediaResolution"]);u!=null&&C(e,["mediaResolution"],u);const h=S(t,["presencePenalty"]);h!=null&&C(e,["presencePenalty"],h);const m=S(t,["responseLogprobs"]);m!=null&&C(e,["responseLogprobs"],m);const g=S(t,["responseMimeType"]);g!=null&&C(e,["responseMimeType"],g);const y=S(t,["responseModalities"]);y!=null&&C(e,["responseModalities"],y);const v=S(t,["responseSchema"]);v!=null&&C(e,["responseSchema"],v);const b=S(t,["routingConfig"]);b!=null&&C(e,["routingConfig"],b);const w=S(t,["seed"]);w!=null&&C(e,["seed"],w);const k=S(t,["speechConfig"]);k!=null&&C(e,["speechConfig"],k);const N=S(t,["stopSequences"]);N!=null&&C(e,["stopSequences"],N);const R=S(t,["temperature"]);R!=null&&C(e,["temperature"],R);const D=S(t,["thinkingConfig"]);D!=null&&C(e,["thinkingConfig"],D);const O=S(t,["topK"]);O!=null&&C(e,["topK"],O);const B=S(t,["topP"]);if(B!=null&&C(e,["topP"],B),S(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Vit(t,e){const n={},r=S(e,["model"]);return r!=null&&C(n,["_url","name"],zn(t,r)),n}function Hit(t,e){const n={},r=S(e,["model"]);return r!=null&&C(n,["_url","name"],zn(t,r)),n}function qit(t){const e={};if(S(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=S(t,["enableWidget"]);return n!=null&&C(e,["enableWidget"],n),e}function Git(t){const e={};if(S(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(S(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=S(t,["timeRangeFilter"]);return n!=null&&C(e,["timeRangeFilter"],n),e}function Kit(t){const e={},n=S(t,["aspectRatio"]);n!=null&&C(e,["aspectRatio"],n);const r=S(t,["imageSize"]);if(r!=null&&C(e,["imageSize"],r),S(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(S(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function Wit(t){const e={},n=S(t,["aspectRatio"]);n!=null&&C(e,["aspectRatio"],n);const r=S(t,["imageSize"]);r!=null&&C(e,["imageSize"],r);const i=S(t,["outputMimeType"]);i!=null&&C(e,["imageOutputOptions","mimeType"],i);const s=S(t,["outputCompressionQuality"]);return s!=null&&C(e,["imageOutputOptions","compressionQuality"],s),e}function Yit(t){const e={},n=S(t,["bytesBase64Encoded"]);n!=null&&C(e,["imageBytes"],_h(n));const r=S(t,["mimeType"]);return r!=null&&C(e,["mimeType"],r),e}function _he(t){const e={},n=S(t,["gcsUri"]);n!=null&&C(e,["gcsUri"],n);const r=S(t,["bytesBase64Encoded"]);r!=null&&C(e,["imageBytes"],_h(r));const i=S(t,["mimeType"]);return i!=null&&C(e,["mimeType"],i),e}function QC(t){const e={};if(S(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=S(t,["imageBytes"]);n!=null&&C(e,["bytesBase64Encoded"],_h(n));const r=S(t,["mimeType"]);return r!=null&&C(e,["mimeType"],r),e}function Jl(t){const e={},n=S(t,["gcsUri"]);n!=null&&C(e,["gcsUri"],n);const r=S(t,["imageBytes"]);r!=null&&C(e,["bytesBase64Encoded"],_h(r));const i=S(t,["mimeType"]);return i!=null&&C(e,["mimeType"],i),e}function Jit(t,e,n){const r={},i=S(e,["pageSize"]);n!==void 0&&i!=null&&C(n,["_query","pageSize"],i);const s=S(e,["pageToken"]);n!==void 0&&s!=null&&C(n,["_query","pageToken"],s);const o=S(e,["filter"]);n!==void 0&&o!=null&&C(n,["_query","filter"],o);const a=S(e,["queryBase"]);return n!==void 0&&a!=null&&C(n,["_url","models_url"],She(t,a)),r}function Xit(t,e,n){const r={},i=S(e,["pageSize"]);n!==void 0&&i!=null&&C(n,["_query","pageSize"],i);const s=S(e,["pageToken"]);n!==void 0&&s!=null&&C(n,["_query","pageToken"],s);const o=S(e,["filter"]);n!==void 0&&o!=null&&C(n,["_query","filter"],o);const a=S(e,["queryBase"]);return n!==void 0&&a!=null&&C(n,["_url","models_url"],She(t,a)),r}function Qit(t,e){const n={},r=S(e,["config"]);return r!=null&&Jit(t,r,n),n}function Zit(t,e){const n={},r=S(e,["config"]);return r!=null&&Xit(t,r,n),n}function est(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=S(t,["nextPageToken"]);r!=null&&C(e,["nextPageToken"],r);const i=S(t,["_self"]);if(i!=null){let s=Ahe(i);Array.isArray(s)&&(s=s.map(o=>tD(o))),C(e,["models"],s)}return e}function tst(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=S(t,["nextPageToken"]);r!=null&&C(e,["nextPageToken"],r);const i=S(t,["_self"]);if(i!=null){let s=Ahe(i);Array.isArray(s)&&(s=s.map(o=>nD(o))),C(e,["models"],s)}return e}function nst(t){const e={},n=S(t,["maskMode"]);n!=null&&C(e,["maskMode"],n);const r=S(t,["segmentationClasses"]);r!=null&&C(e,["maskClasses"],r);const i=S(t,["maskDilation"]);return i!=null&&C(e,["dilation"],i),e}function tD(t){const e={},n=S(t,["name"]);n!=null&&C(e,["name"],n);const r=S(t,["displayName"]);r!=null&&C(e,["displayName"],r);const i=S(t,["description"]);i!=null&&C(e,["description"],i);const s=S(t,["version"]);s!=null&&C(e,["version"],s);const o=S(t,["_self"]);o!=null&&C(e,["tunedModelInfo"],xst(o));const a=S(t,["inputTokenLimit"]);a!=null&&C(e,["inputTokenLimit"],a);const l=S(t,["outputTokenLimit"]);l!=null&&C(e,["outputTokenLimit"],l);const c=S(t,["supportedGenerationMethods"]);c!=null&&C(e,["supportedActions"],c);const u=S(t,["temperature"]);u!=null&&C(e,["temperature"],u);const h=S(t,["maxTemperature"]);h!=null&&C(e,["maxTemperature"],h);const m=S(t,["topP"]);m!=null&&C(e,["topP"],m);const g=S(t,["topK"]);g!=null&&C(e,["topK"],g);const y=S(t,["thinking"]);return y!=null&&C(e,["thinking"],y),e}function nD(t){const e={},n=S(t,["name"]);n!=null&&C(e,["name"],n);const r=S(t,["displayName"]);r!=null&&C(e,["displayName"],r);const i=S(t,["description"]);i!=null&&C(e,["description"],i);const s=S(t,["versionId"]);s!=null&&C(e,["version"],s);const o=S(t,["deployedModels"]);if(o!=null){let h=o;Array.isArray(h)&&(h=h.map(m=>mit(m))),C(e,["endpoints"],h)}const a=S(t,["labels"]);a!=null&&C(e,["labels"],a);const l=S(t,["_self"]);l!=null&&C(e,["tunedModelInfo"],vst(l));const c=S(t,["defaultCheckpointId"]);c!=null&&C(e,["defaultCheckpointId"],c);const u=S(t,["checkpoints"]);if(u!=null){let h=u;Array.isArray(h)&&(h=h.map(m=>m)),C(e,["checkpoints"],h)}return e}function rst(t){const e={},n=S(t,["mediaResolution"]);n!=null&&C(e,["mediaResolution"],n);const r=S(t,["codeExecutionResult"]);r!=null&&C(e,["codeExecutionResult"],r);const i=S(t,["executableCode"]);i!=null&&C(e,["executableCode"],i);const s=S(t,["fileData"]);s!=null&&C(e,["fileData"],git(s));const o=S(t,["functionCall"]);o!=null&&C(e,["functionCall"],yit(o));const a=S(t,["functionResponse"]);a!=null&&C(e,["functionResponse"],a);const l=S(t,["inlineData"]);l!=null&&C(e,["inlineData"],zrt(l));const c=S(t,["text"]);c!=null&&C(e,["text"],c);const u=S(t,["thought"]);u!=null&&C(e,["thought"],u);const h=S(t,["thoughtSignature"]);h!=null&&C(e,["thoughtSignature"],h);const m=S(t,["videoMetadata"]);return m!=null&&C(e,["videoMetadata"],m),e}function ist(t){const e={},n=S(t,["productImage"]);return n!=null&&C(e,["image"],Jl(n)),e}function sst(t,e){const n={},r=S(t,["numberOfImages"]);e!==void 0&&r!=null&&C(e,["parameters","sampleCount"],r);const i=S(t,["baseSteps"]);e!==void 0&&i!=null&&C(e,["parameters","baseSteps"],i);const s=S(t,["outputGcsUri"]);e!==void 0&&s!=null&&C(e,["parameters","storageUri"],s);const o=S(t,["seed"]);e!==void 0&&o!=null&&C(e,["parameters","seed"],o);const a=S(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&C(e,["parameters","safetySetting"],a);const l=S(t,["personGeneration"]);e!==void 0&&l!=null&&C(e,["parameters","personGeneration"],l);const c=S(t,["addWatermark"]);e!==void 0&&c!=null&&C(e,["parameters","addWatermark"],c);const u=S(t,["outputMimeType"]);e!==void 0&&u!=null&&C(e,["parameters","outputOptions","mimeType"],u);const h=S(t,["outputCompressionQuality"]);e!==void 0&&h!=null&&C(e,["parameters","outputOptions","compressionQuality"],h);const m=S(t,["enhancePrompt"]);e!==void 0&&m!=null&&C(e,["parameters","enhancePrompt"],m);const g=S(t,["labels"]);return e!==void 0&&g!=null&&C(e,["labels"],g),n}function ost(t,e){const n={},r=S(e,["model"]);r!=null&&C(n,["_url","model"],zn(t,r));const i=S(e,["source"]);i!=null&&lst(i,n);const s=S(e,["config"]);return s!=null&&sst(s,n),n}function ast(t){const e={},n=S(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>XC(i))),C(e,["generatedImages"],r)}return e}function lst(t,e){const n={},r=S(t,["prompt"]);e!==void 0&&r!=null&&C(e,["instances[0]","prompt"],r);const i=S(t,["personImage"]);e!==void 0&&i!=null&&C(e,["instances[0]","personImage","image"],Jl(i));const s=S(t,["productImages"]);if(e!==void 0&&s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>ist(a))),C(e,["instances[0]","productImages"],o)}return n}function cst(t){const e={},n=S(t,["referenceImage"]);n!=null&&C(e,["referenceImage"],Jl(n));const r=S(t,["referenceId"]);r!=null&&C(e,["referenceId"],r);const i=S(t,["referenceType"]);i!=null&&C(e,["referenceType"],i);const s=S(t,["maskImageConfig"]);s!=null&&C(e,["maskImageConfig"],nst(s));const o=S(t,["controlImageConfig"]);o!=null&&C(e,["controlImageConfig"],Yrt(o));const a=S(t,["styleImageConfig"]);a!=null&&C(e,["styleImageConfig"],a);const l=S(t,["subjectImageConfig"]);return l!=null&&C(e,["subjectImageConfig"],l),e}function Ihe(t){const e={},n=S(t,["safetyAttributes","categories"]);n!=null&&C(e,["categories"],n);const r=S(t,["safetyAttributes","scores"]);r!=null&&C(e,["scores"],r);const i=S(t,["contentType"]);return i!=null&&C(e,["contentType"],i),e}function Rhe(t){const e={},n=S(t,["safetyAttributes","categories"]);n!=null&&C(e,["categories"],n);const r=S(t,["safetyAttributes","scores"]);r!=null&&C(e,["scores"],r);const i=S(t,["contentType"]);return i!=null&&C(e,["contentType"],i),e}function ust(t){const e={},n=S(t,["category"]);if(n!=null&&C(e,["category"],n),S(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=S(t,["threshold"]);return r!=null&&C(e,["threshold"],r),e}function dst(t){const e={},n=S(t,["image"]);return n!=null&&C(e,["image"],Jl(n)),e}function fst(t,e){const n={},r=S(t,["mode"]);e!==void 0&&r!=null&&C(e,["parameters","mode"],r);const i=S(t,["maxPredictions"]);e!==void 0&&i!=null&&C(e,["parameters","maxPredictions"],i);const s=S(t,["confidenceThreshold"]);e!==void 0&&s!=null&&C(e,["parameters","confidenceThreshold"],s);const o=S(t,["maskDilation"]);e!==void 0&&o!=null&&C(e,["parameters","maskDilation"],o);const a=S(t,["binaryColorThreshold"]);e!==void 0&&a!=null&&C(e,["parameters","binaryColorThreshold"],a);const l=S(t,["labels"]);return e!==void 0&&l!=null&&C(e,["labels"],l),n}function hst(t,e){const n={},r=S(e,["model"]);r!=null&&C(n,["_url","model"],zn(t,r));const i=S(e,["source"]);i!=null&&mst(i,n);const s=S(e,["config"]);return s!=null&&fst(s,n),n}function pst(t){const e={},n=S(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Uit(i))),C(e,["generatedMasks"],r)}return e}function mst(t,e){const n={},r=S(t,["prompt"]);e!==void 0&&r!=null&&C(e,["instances[0]","prompt"],r);const i=S(t,["image"]);e!==void 0&&i!=null&&C(e,["instances[0]","image"],Jl(i));const s=S(t,["scribbleImage"]);return e!==void 0&&s!=null&&C(e,["instances[0]","scribble"],dst(s)),n}function gst(t){const e={},n=S(t,["functionCallingConfig"]);n!=null&&C(e,["functionCallingConfig"],xit(n));const r=S(t,["retrievalConfig"]);return r!=null&&C(e,["retrievalConfig"],r),e}function yst(t){const e={},n=S(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(h=>h)),C(e,["functionDeclarations"],u)}if(S(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=S(t,["googleSearchRetrieval"]);r!=null&&C(e,["googleSearchRetrieval"],r);const i=S(t,["computerUse"]);i!=null&&C(e,["computerUse"],i);const s=S(t,["fileSearch"]);s!=null&&C(e,["fileSearch"],s);const o=S(t,["codeExecution"]);if(o!=null&&C(e,["codeExecution"],o),S(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=S(t,["googleMaps"]);a!=null&&C(e,["googleMaps"],qit(a));const l=S(t,["googleSearch"]);l!=null&&C(e,["googleSearch"],Git(l));const c=S(t,["urlContext"]);return c!=null&&C(e,["urlContext"],c),e}function Ohe(t){const e={},n=S(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(m=>vit(m))),C(e,["functionDeclarations"],h)}const r=S(t,["retrieval"]);r!=null&&C(e,["retrieval"],r);const i=S(t,["googleSearchRetrieval"]);i!=null&&C(e,["googleSearchRetrieval"],i);const s=S(t,["computerUse"]);if(s!=null&&C(e,["computerUse"],s),S(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=S(t,["codeExecution"]);o!=null&&C(e,["codeExecution"],o);const a=S(t,["enterpriseWebSearch"]);a!=null&&C(e,["enterpriseWebSearch"],a);const l=S(t,["googleMaps"]);l!=null&&C(e,["googleMaps"],l);const c=S(t,["googleSearch"]);c!=null&&C(e,["googleSearch"],c);const u=S(t,["urlContext"]);return u!=null&&C(e,["urlContext"],u),e}function xst(t){const e={},n=S(t,["baseModel"]);n!=null&&C(e,["baseModel"],n);const r=S(t,["createTime"]);r!=null&&C(e,["createTime"],r);const i=S(t,["updateTime"]);return i!=null&&C(e,["updateTime"],i),e}function vst(t){const e={},n=S(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&C(e,["baseModel"],n);const r=S(t,["createTime"]);r!=null&&C(e,["createTime"],r);const i=S(t,["updateTime"]);return i!=null&&C(e,["updateTime"],i),e}function bst(t,e){const n={},r=S(t,["displayName"]);e!==void 0&&r!=null&&C(e,["displayName"],r);const i=S(t,["description"]);e!==void 0&&i!=null&&C(e,["description"],i);const s=S(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&C(e,["defaultCheckpointId"],s),n}function wst(t,e){const n={},r=S(t,["displayName"]);e!==void 0&&r!=null&&C(e,["displayName"],r);const i=S(t,["description"]);e!==void 0&&i!=null&&C(e,["description"],i);const s=S(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&C(e,["defaultCheckpointId"],s),n}function Est(t,e){const n={},r=S(e,["model"]);r!=null&&C(n,["_url","name"],zn(t,r));const i=S(e,["config"]);return i!=null&&bst(i,n),n}function Sst(t,e){const n={},r=S(e,["model"]);r!=null&&C(n,["_url","model"],zn(t,r));const i=S(e,["config"]);return i!=null&&wst(i,n),n}function Ast(t,e){const n={},r=S(t,["outputGcsUri"]);e!==void 0&&r!=null&&C(e,["parameters","storageUri"],r);const i=S(t,["safetyFilterLevel"]);e!==void 0&&i!=null&&C(e,["parameters","safetySetting"],i);const s=S(t,["personGeneration"]);e!==void 0&&s!=null&&C(e,["parameters","personGeneration"],s);const o=S(t,["includeRaiReason"]);e!==void 0&&o!=null&&C(e,["parameters","includeRaiReason"],o);const a=S(t,["outputMimeType"]);e!==void 0&&a!=null&&C(e,["parameters","outputOptions","mimeType"],a);const l=S(t,["outputCompressionQuality"]);e!==void 0&&l!=null&&C(e,["parameters","outputOptions","compressionQuality"],l);const c=S(t,["enhanceInputImage"]);e!==void 0&&c!=null&&C(e,["parameters","upscaleConfig","enhanceInputImage"],c);const u=S(t,["imagePreservationFactor"]);e!==void 0&&u!=null&&C(e,["parameters","upscaleConfig","imagePreservationFactor"],u);const h=S(t,["labels"]);e!==void 0&&h!=null&&C(e,["labels"],h);const m=S(t,["numberOfImages"]);e!==void 0&&m!=null&&C(e,["parameters","sampleCount"],m);const g=S(t,["mode"]);return e!==void 0&&g!=null&&C(e,["parameters","mode"],g),n}function Tst(t,e){const n={},r=S(e,["model"]);r!=null&&C(n,["_url","model"],zn(t,r));const i=S(e,["image"]);i!=null&&C(n,["instances[0]","image"],Jl(i));const s=S(e,["upscaleFactor"]);s!=null&&C(n,["parameters","upscaleConfig","upscaleFactor"],s);const o=S(e,["config"]);return o!=null&&Ast(o,n),n}function kst(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=S(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>XC(s))),C(e,["generatedImages"],i)}return e}function Nst(t){const e={},n=S(t,["uri"]);n!=null&&C(e,["uri"],n);const r=S(t,["encodedVideo"]);r!=null&&C(e,["videoBytes"],_h(r));const i=S(t,["encoding"]);return i!=null&&C(e,["mimeType"],i),e}function Cst(t){const e={},n=S(t,["gcsUri"]);n!=null&&C(e,["uri"],n);const r=S(t,["bytesBase64Encoded"]);r!=null&&C(e,["videoBytes"],_h(r));const i=S(t,["mimeType"]);return i!=null&&C(e,["mimeType"],i),e}function Pst(t){const e={},n=S(t,["image"]);n!=null&&C(e,["_self"],Jl(n));const r=S(t,["maskMode"]);return r!=null&&C(e,["maskMode"],r),e}function _st(t){const e={},n=S(t,["image"]);n!=null&&C(e,["image"],QC(n));const r=S(t,["referenceType"]);return r!=null&&C(e,["referenceType"],r),e}function Ist(t){const e={},n=S(t,["image"]);n!=null&&C(e,["image"],Jl(n));const r=S(t,["referenceType"]);return r!=null&&C(e,["referenceType"],r),e}function Mhe(t){const e={},n=S(t,["uri"]);n!=null&&C(e,["uri"],n);const r=S(t,["videoBytes"]);r!=null&&C(e,["encodedVideo"],_h(r));const i=S(t,["mimeType"]);return i!=null&&C(e,["encoding"],i),e}function Lhe(t){const e={},n=S(t,["uri"]);n!=null&&C(e,["gcsUri"],n);const r=S(t,["videoBytes"]);r!=null&&C(e,["bytesBase64Encoded"],_h(r));const i=S(t,["mimeType"]);return i!=null&&C(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Rst(t,e){const n={},r=S(t,["displayName"]);return e!==void 0&&r!=null&&C(e,["displayName"],r),n}function Ost(t){const e={},n=S(t,["config"]);return n!=null&&Rst(n,e),e}function Mst(t,e){const n={},r=S(t,["force"]);return e!==void 0&&r!=null&&C(e,["_query","force"],r),n}function Lst(t){const e={},n=S(t,["name"]);n!=null&&C(e,["_url","name"],n);const r=S(t,["config"]);return r!=null&&Mst(r,e),e}function Dst(t){const e={},n=S(t,["name"]);return n!=null&&C(e,["_url","name"],n),e}function jst(t,e){const n={},r=S(t,["customMetadata"]);if(e!==void 0&&r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>o)),C(e,["customMetadata"],s)}const i=S(t,["chunkingConfig"]);return e!==void 0&&i!=null&&C(e,["chunkingConfig"],i),n}function Bst(t){const e={},n=S(t,["name"]);n!=null&&C(e,["name"],n);const r=S(t,["metadata"]);r!=null&&C(e,["metadata"],r);const i=S(t,["done"]);i!=null&&C(e,["done"],i);const s=S(t,["error"]);s!=null&&C(e,["error"],s);const o=S(t,["response"]);return o!=null&&C(e,["response"],Fst(o)),e}function Ust(t){const e={},n=S(t,["fileSearchStoreName"]);n!=null&&C(e,["_url","file_search_store_name"],n);const r=S(t,["fileName"]);r!=null&&C(e,["fileName"],r);const i=S(t,["config"]);return i!=null&&jst(i,e),e}function Fst(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=S(t,["parent"]);r!=null&&C(e,["parent"],r);const i=S(t,["documentName"]);return i!=null&&C(e,["documentName"],i),e}function $st(t,e){const n={},r=S(t,["pageSize"]);e!==void 0&&r!=null&&C(e,["_query","pageSize"],r);const i=S(t,["pageToken"]);return e!==void 0&&i!=null&&C(e,["_query","pageToken"],i),n}function zst(t){const e={},n=S(t,["config"]);return n!=null&&$st(n,e),e}function Vst(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=S(t,["nextPageToken"]);r!=null&&C(e,["nextPageToken"],r);const i=S(t,["fileSearchStores"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),C(e,["fileSearchStores"],s)}return e}function Dhe(t,e){const n={},r=S(t,["mimeType"]);e!==void 0&&r!=null&&C(e,["mimeType"],r);const i=S(t,["displayName"]);e!==void 0&&i!=null&&C(e,["displayName"],i);const s=S(t,["customMetadata"]);if(e!==void 0&&s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),C(e,["customMetadata"],a)}const o=S(t,["chunkingConfig"]);return e!==void 0&&o!=null&&C(e,["chunkingConfig"],o),n}function Hst(t){const e={},n=S(t,["fileSearchStoreName"]);n!=null&&C(e,["_url","file_search_store_name"],n);const r=S(t,["config"]);return r!=null&&Dhe(r,e),e}function qst(t){const e={},n=S(t,["sdkHttpResponse"]);return n!=null&&C(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Gst="Content-Type",Kst="X-Server-Timeout",Wst="User-Agent",rD="x-goog-api-client",Yst="1.34.0",Jst=`google-genai-sdk/${Yst}`,Xst="v1beta1",Qst="v1beta";class Zst{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:Xst,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:Qst,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[o,a]of Object.entries(e.queryParams))i.searchParams.append(o,String(a));let s={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=e.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,n,i.toString(),e.abortSignal),this.unaryApiCall(i,s,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[i,s]of Object.entries(n))typeof s=="object"?r[i]=Object.assign(Object.assign({},r[i]),s):s!==void 0&&(r[i]=s);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let s={};return s.body=e.body,s=await this.includeExtraHttpOptionsToRequestInit(s,n,i.toString(),e.abortSignal),this.streamApiCall(i,s,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,i){if(n&&n.timeout||i){const s=new AbortController,o=s.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const a=setTimeout(()=>s.abort(),n.timeout);a&&typeof a.unref=="function"&&a.unref()}i&&i.addEventListener("abort",()=>{s.abort()}),e.signal=o}return n&&n.extraBody!==null&&eot(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await WQ(i),new QL(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await WQ(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){return Ul(this,arguments,function*(){var r;const i=(r=e==null?void 0:e.body)===null||r===void 0?void 0:r.getReader(),s=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let o="";const a="data:",l=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:c,value:u}=yield nn(i.read());if(c){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const h=s.decode(u,{stream:!0});try{const y=JSON.parse(h);if("error"in y){const v=JSON.parse(JSON.stringify(y.error)),b=v.status,w=v.code,k=`got status: ${b}. ${JSON.stringify(y)}`;if(w>=400&&w<600)throw new YC({message:k,status:w})}}catch(y){if(y.name==="ApiError")throw y}o+=h;let m=-1,g=0;for(;;){m=-1,g=0;for(const b of l){const w=o.indexOf(b);w!==-1&&(m===-1||w<m)&&(m=w,g=b.length)}if(m===-1)break;const y=o.substring(0,m);o=o.substring(m+g);const v=y.trim();if(v.startsWith(a)){const b=v.substring(a.length).trim();try{const w=new Response(b,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield nn(new QL(w))}catch(w){throw new Error(`exception parsing stream chunk ${b}. ${w}`)}}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=Jst+" "+this.clientOptions.userAgentExtra;return e[Wst]=n,e[rD]=n,e[Gst]="application/json",e}async getHeadersInternal(e,n){const r=new Headers;if(e&&e.headers){for(const[i,s]of Object.entries(e.headers))r.append(i,s);e.timeout&&e.timeout>0&&r.append(Kst,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(e){var n;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(e,n){var r;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const s=this.clientOptions.uploader,o=await s.stat(e);i.sizeBytes=String(o.size);const a=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:o.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=a;const l={file:i},c=this.getFileName(e),u=Tt("upload/v1beta/files",l._url),h=await this.fetchUploadUrl(u,i.sizeBytes,i.mimeType,c,l,n==null?void 0:n.httpOptions);return s.upload(e,h,this)}async uploadFileToFileSearchStore(e,n,r){var i;const s=this.clientOptions.uploader,o=await s.stat(n),a=String(o.size),l=(i=r==null?void 0:r.mimeType)!==null&&i!==void 0?i:o.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const c=`upload/v1beta/${e}:uploadToFileSearchStore`,u=this.getFileName(n),h={};r!=null&&Dhe(r,h);const m=await this.fetchUploadUrl(c,a,l,u,h,r==null?void 0:r.httpOptions);return s.uploadToFileSearchStore(n,m,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r,i,s,o){var a;let l={};o?l=o:l={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},i?{"X-Goog-Upload-File-Name":i}:{})};const c=await this.request({path:e,body:JSON.stringify(s),httpMethod:"POST",httpOptions:l});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const u=(a=c==null?void 0:c.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(u===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return u}}async function WQ(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const i=JSON.stringify(r);throw n>=400&&n<600?new YC({message:i,status:n}):new Error(i)}}function eot(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const s=JSON.parse(t.body);if(typeof s=="object"&&s!==null&&!Array.isArray(s))n=s;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(s,o){const a=Object.assign({},s);for(const l in o)if(Object.prototype.hasOwnProperty.call(o,l)){const c=o[l],u=a[l];c&&typeof c=="object"&&!Array.isArray(c)&&u&&typeof u=="object"&&!Array.isArray(u)?a[l]=r(u,c):(u&&c&&typeof u!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof u}, New type: ${typeof c}. Overwriting.`),a[l]=c)}return a}const i=r(n,e);t.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const tot="mcp_used/unknown";let not=!1;function jhe(t){for(const e of t)if(rot(e)||typeof e=="object"&&"inputSchema"in e)return!0;return not}function Bhe(t){var e;const n=(e=t[rD])!==null&&e!==void 0?e:"";t[rD]=(n+` ${tot}`).trimStart()}function rot(t){return t!==null&&typeof t=="object"&&t instanceof XB}function iot(t){return Ul(this,arguments,function*(n,r=100){let i,s=0;for(;s<r;){const o=yield nn(n.listTools({cursor:i}));for(const a of o.tools)yield yield nn(a),s++;if(!o.nextCursor)break;i=o.nextCursor}})}class XB{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new XB(e,n)}async initialize(){var e,n,r,i;if(this.mcpTools.length>0)return;const s={},o=[];for(const u of this.mcpClients)try{for(var a=!0,l=(n=void 0,Fl(iot(u))),c;c=await l.next(),e=c.done,!e;a=!0){i=c.value,a=!1;const h=i;o.push(h);const m=h.name;if(s[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);s[m]=u}}catch(h){n={error:h}}finally{try{!a&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}this.mcpTools=o,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),Dtt(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let s;this.config.timeout&&(s={timeout:this.config.timeout});const o=await i.callTool({name:r.name,arguments:r.args},void 0,s);n.push({functionResponse:{name:r.name,response:o.isError?{error:o}:o}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function sot(t,e,n){const r=new Ctt;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data),Object.assign(r,i),e(r)}class oot{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),o=cot(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),l=`${i}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${a}`;let c=()=>{};const u=new Promise(N=>{c=N}),h=e.callbacks,m=function(){c({})},g=this.apiClient,y={onopen:m,onmessage:N=>{sot(g,h.onmessage,N)},onerror:(n=h==null?void 0:h.onerror)!==null&&n!==void 0?n:function(N){},onclose:(r=h==null?void 0:h.onclose)!==null&&r!==void 0?r:function(N){}},v=this.webSocketFactory.create(l,lot(o),y);v.connect(),await u;const k={setup:{model:zn(this.apiClient,e.model)}};return v.send(JSON.stringify(k)),new aot(v,this.apiClient)}}class aot{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=Ort(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=Rrt(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(zg.PLAY)}pause(){this.sendPlaybackControl(zg.PAUSE)}stop(){this.sendPlaybackControl(zg.STOP)}resetContext(){this.sendPlaybackControl(zg.RESET_CONTEXT)}close(){this.conn.close()}}function lot(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function cot(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uot="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function dot(t,e,n){const r=new Ntt;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const s=JSON.parse(i);if(t.isVertexAI()){const o=Drt(s);Object.assign(r,o)}else Object.assign(r,s);e(r)}class fot{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new oot(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,i,s,o,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const l=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let u;const h=this.apiClient.getHeaders();e.config&&e.config.tools&&jhe(e.config.tools)&&Bhe(h);const m=got(h);if(this.apiClient.isVertexAI())u=`${l}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m,u);else{const U=this.apiClient.getApiKey();let $="BidiGenerateContent",W="key";U!=null&&U.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),$="BidiGenerateContentConstrained",W="access_token"),u=`${l}/ws/google.ai.generativelanguage.${c}.GenerativeService.${$}?${W}=${U}`}let g=()=>{};const y=new Promise(U=>{g=U}),v=e.callbacks,b=function(){var U;(U=v==null?void 0:v.onopen)===null||U===void 0||U.call(v),g({})},w=this.apiClient,k={onopen:b,onmessage:U=>{dot(w,v.onmessage,U)},onerror:(n=v==null?void 0:v.onerror)!==null&&n!==void 0?n:function(U){},onclose:(r=v==null?void 0:v.onclose)!==null&&r!==void 0?r:function(U){}},N=this.webSocketFactory.create(u,mot(m),k);N.connect(),await y;let R=zn(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&R.startsWith("publishers/")){const U=this.apiClient.getProject(),$=this.apiClient.getLocation();R=`projects/${U}/locations/${$}/`+R}let D={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[M2.AUDIO]}:e.config.responseModalities=[M2.AUDIO]),!((s=e.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const O=(a=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[],B=[];for(const U of O)if(this.isCallableTool(U)){const $=U;B.push(await $.tool())}else B.push(U);B.length>0&&(e.config.tools=B);const z={model:R,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?D=Irt(this.apiClient,z):D=_rt(this.apiClient,z),delete D.config,N.send(JSON.stringify(D)),new pot(N,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const hot={turnComplete:!0};class pot{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=Ja(n.turns),e.isVertexAI()||(r=r.map(i=>JC(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const s of r){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error(uot)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},hot),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:Lrt(e)}:n={realtimeInput:Mrt(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function mot(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function got(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const YQ=10;function JQ(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const o of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(hy(o)){i=!0;break}if(!i)return!0;const s=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function hy(t){return"callTool"in t&&typeof t.callTool=="function"}function yot(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>hy(i)))!==null&&r!==void 0?r:!1}function XQ(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,i)=>{if(hy(r))return;const s=r;s.functionDeclarations&&s.functionDeclarations.length>0&&n.push(i)}),n}function QQ(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xot extends jd{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,i,s,o,a;const l=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!yot(n)||JQ(n.config))return await this.generateContentInternal(l);const c=XQ(n);if(c.length>0){const v=c.map(b=>`tools[${b}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${v}.`)}let u,h;const m=Ja(l.contents),g=(s=(i=(r=l.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&s!==void 0?s:YQ;let y=0;for(;y<g&&(u=await this.generateContentInternal(l),!(!u.functionCalls||u.functionCalls.length===0));){const v=u.candidates[0].content,b=[];for(const w of(a=(o=n.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[])if(hy(w)){const N=await w.callTool(u.functionCalls);b.push(...N)}y++,h={role:"user",parts:b},l.contents=Ja(l.contents),l.contents.push(v),l.contents.push(h),QQ(l.config)&&(m.push(v),m.push(h))}return QQ(l.config)&&(u.automaticFunctionCallingHistory=m),u},this.generateContentStream=async n=>{var r,i,s,o,a;if(this.maybeMoveToResponseJsonSchem(n),JQ(n.config)){const h=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(h)}const l=XQ(n);if(l.length>0){const h=l.map(m=>`tools[${m}]`).join(", ");throw new Error(`Incompatible tools found at ${h}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const c=(s=(i=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||i===void 0?void 0:i.functionCallingConfig)===null||s===void 0?void 0:s.streamFunctionCallArguments,u=(a=(o=n==null?void 0:n.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||a===void 0?void 0:a.disable;if(c&&!u)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let s;const o=[];if(r!=null&&r.generatedImages)for(const l of r.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((i=l==null?void 0:l.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?s=l==null?void 0:l.safetyAttributes:o.push(l);let a;return s?a={generatedImages:o,positivePromptSafetyAttributes:s,sdkHttpResponse:r.sdkHttpResponse}:a={generatedImages:o,sdkHttpResponse:r.sdkHttpResponse},a}),this.list=async n=>{var r;const o={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((r=o.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new Jm(Ad.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(o),o)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>{var r,i,s,o,a,l;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((i=n.video)===null||i===void 0)&&i.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((o=(s=n.source)===null||s===void 0?void 0:s.video)===null||o===void 0)&&o.uri&&(!((l=(a=n.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,i;const s=(n=e.config)===null||n===void 0?void 0:n.tools;if(!s)return e;const o=await Promise.all(s.map(async l=>hy(l)?await l.tool():l)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:o})};if(a.config.tools=o,e.config&&e.config.tools&&jhe(e.config.tools)){const l=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let c=Object.assign({},l);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),Bhe(c),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return a}async initAfcToolsMap(e){var n,r,i;const s=new Map;for(const o of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(hy(o)){const a=o,l=await a.tool();for(const c of(i=l.functionDeclarations)!==null&&i!==void 0?i:[]){if(!c.name)throw new Error("Function declaration name is required.");if(s.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);s.set(c.name,a)}}return s}async processAfcStream(e){var n,r,i;const s=(i=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:YQ;let o=!1,a=0;const l=await this.initAfcToolsMap(e);return(function(c,u,h){return Ul(this,arguments,function*(){for(var m,g,y,v,b,w;a<s;){o&&(a++,o=!1);const D=yield nn(c.processParamsMaybeAddMcpUsage(h)),O=yield nn(c.generateContentStreamInternal(D)),B=[],z=[];try{for(var k=!0,N=(g=void 0,Fl(O)),R;R=yield nn(N.next()),m=R.done,!m;k=!0){v=R.value,k=!1;const U=v;if(yield yield nn(U),U.candidates&&(!((b=U.candidates[0])===null||b===void 0)&&b.content)){z.push(U.candidates[0].content);for(const $ of(w=U.candidates[0].content.parts)!==null&&w!==void 0?w:[])if(a<s&&$.functionCall){if(!$.functionCall.name)throw new Error("Function call name was not returned by the model.");if(u.has($.functionCall.name)){const W=yield nn(u.get($.functionCall.name).callTool([$.functionCall]));B.push(...W)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${u.keys()}, mising tool: ${$.functionCall.name}`)}}}}catch(U){g={error:U}}finally{try{!k&&!m&&(y=N.return)&&(yield nn(y.call(N)))}finally{if(g)throw g.error}}if(B.length>0){o=!0;const U=new Bb;U.candidates=[{content:{role:"user",parts:B}}],yield yield nn(U);const $=[];$.push(...z),$.push({role:"user",parts:B});const W=Ja(h.contents).concat($);h.contents=W}else break}})})(this,l,e)}async generateContentInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=qQ(this.apiClient,e);return a=Tt("{model}:generateContent",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const h=KQ(u),m=new Bb;return Object.assign(m,h),m})}else{const c=HQ(this.apiClient,e);return a=Tt("{model}:generateContent",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const h=GQ(u),m=new Bb;return Object.assign(m,h),m})}}async generateContentStreamInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=qQ(this.apiClient,e);return a=Tt("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),o.then(function(h){return Ul(this,arguments,function*(){var m,g,y,v;try{for(var b=!0,w=Fl(h),k;k=yield nn(w.next()),m=k.done,!m;b=!0){v=k.value,b=!1;const N=v,R=KQ(yield nn(N.json()));R.sdkHttpResponse={headers:N.headers};const D=new Bb;Object.assign(D,R),yield yield nn(D)}}catch(N){g={error:N}}finally{try{!b&&!m&&(y=w.return)&&(yield nn(y.call(w)))}finally{if(g)throw g.error}}})})}else{const c=HQ(this.apiClient,e);return a=Tt("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),o.then(function(h){return Ul(this,arguments,function*(){var m,g,y,v;try{for(var b=!0,w=Fl(h),k;k=yield nn(w.next()),m=k.done,!m;b=!0){v=k.value,b=!1;const N=v,R=GQ(yield nn(N.json()));R.sdkHttpResponse={headers:N.headers};const D=new Bb;Object.assign(D,R),yield yield nn(D)}}catch(N){g={error:N}}finally{try{!b&&!m&&(y=w.return)&&(yield nn(y.call(w)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=fit(this.apiClient,e);return a=Tt("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const h=pit(u),m=new NQ;return Object.assign(m,h),m})}else{const c=dit(this.apiClient,e);return a=Tt("{model}:batchEmbedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const h=hit(u),m=new NQ;return Object.assign(m,h),m})}}async generateImagesInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Tit(this.apiClient,e);return a=Tt("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const h=Nit(u),m=new CQ;return Object.assign(m,h),m})}else{const c=Ait(this.apiClient,e);return a=Tt("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const h=kit(u),m=new CQ;return Object.assign(m,h),m})}}async editImageInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=ait(this.apiClient,e);return s=Tt("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),i.then(l=>{const c=lit(l),u=new gtt;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=Tst(this.apiClient,e);return s=Tt("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),i.then(l=>{const c=kst(l),u=new ytt;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=ost(this.apiClient,e);return s=Tt("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=ast(l),u=new xtt;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=hst(this.apiClient,e);return s=Tt("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=pst(l),u=new vtt;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Hit(this.apiClient,e);return a=Tt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>nD(u))}else{const c=Vit(this.apiClient,e);return a=Tt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>tD(u))}}async listInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Zit(this.apiClient,e);return a=Tt("{models_url}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const h=tst(u),m=new PQ;return Object.assign(m,h),m})}else{const c=Qit(this.apiClient,e);return a=Tt("{models_url}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const h=est(u),m=new PQ;return Object.assign(m,h),m})}}async update(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Sst(this.apiClient,e);return a=Tt("{model}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>nD(u))}else{const c=Est(this.apiClient,e);return a=Tt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>tD(u))}}async delete(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=rit(this.apiClient,e);return a=Tt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const h=sit(u),m=new _Q;return Object.assign(m,h),m})}else{const c=nit(this.apiClient,e);return a=Tt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const h=iit(u),m=new _Q;return Object.assign(m,h),m})}}async countTokens(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Zrt(this.apiClient,e);return a=Tt("{model}:countTokens",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const h=tit(u),m=new IQ;return Object.assign(m,h),m})}else{const c=Qrt(this.apiClient,e);return a=Tt("{model}:countTokens",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const h=eit(u),m=new IQ;return Object.assign(m,h),m})}}async computeTokens(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=qrt(this.apiClient,e);return s=Tt("{model}:computeTokens",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),i.then(l=>{const c=Grt(l),u=new btt;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Oit(this.apiClient,e);return a=Tt("{model}:predictLongRunning",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>{const h=Iit(u),m=new L2;return Object.assign(m,h),m})}else{const c=Rit(this.apiClient,e);return a=Tt("{model}:predictLongRunning",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>{const h=_it(u),m=new L2;return Object.assign(m,h),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vot extends jd{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let s;r&&"httpOptions"in r&&(s=r.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let s;r&&"httpOptions"in r&&(s=r.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=utt(e);return a=Tt("{operationName}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o}else{const c=ctt(e);return a=Tt("{operationName}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o}}async fetchPredictVideosOperationInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=ntt(e);return s=Tt("{resourceName}:fetchPredictOperation",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bot(t){const e={},n=S(t,["data"]);if(n!=null&&C(e,["data"],n),S(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=S(t,["mimeType"]);return r!=null&&C(e,["mimeType"],r),e}function wot(t){const e={},n=S(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>_ot(s))),C(e,["parts"],i)}const r=S(t,["role"]);return r!=null&&C(e,["role"],r),e}function Eot(t,e,n){const r={},i=S(e,["expireTime"]);n!==void 0&&i!=null&&C(n,["expireTime"],i);const s=S(e,["newSessionExpireTime"]);n!==void 0&&s!=null&&C(n,["newSessionExpireTime"],s);const o=S(e,["uses"]);n!==void 0&&o!=null&&C(n,["uses"],o);const a=S(e,["liveConnectConstraints"]);n!==void 0&&a!=null&&C(n,["bidiGenerateContentSetup"],Pot(t,a));const l=S(e,["lockAdditionalFields"]);return n!==void 0&&l!=null&&C(n,["fieldMask"],l),r}function Sot(t,e){const n={},r=S(e,["config"]);return r!=null&&C(n,["config"],Eot(t,r,n)),n}function Aot(t){const e={};if(S(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=S(t,["fileUri"]);n!=null&&C(e,["fileUri"],n);const r=S(t,["mimeType"]);return r!=null&&C(e,["mimeType"],r),e}function Tot(t){const e={},n=S(t,["id"]);n!=null&&C(e,["id"],n);const r=S(t,["args"]);r!=null&&C(e,["args"],r);const i=S(t,["name"]);if(i!=null&&C(e,["name"],i),S(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(S(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function kot(t){const e={};if(S(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=S(t,["enableWidget"]);return n!=null&&C(e,["enableWidget"],n),e}function Not(t){const e={};if(S(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(S(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=S(t,["timeRangeFilter"]);return n!=null&&C(e,["timeRangeFilter"],n),e}function Cot(t,e){const n={},r=S(t,["generationConfig"]);e!==void 0&&r!=null&&C(e,["setup","generationConfig"],r);const i=S(t,["responseModalities"]);e!==void 0&&i!=null&&C(e,["setup","generationConfig","responseModalities"],i);const s=S(t,["temperature"]);e!==void 0&&s!=null&&C(e,["setup","generationConfig","temperature"],s);const o=S(t,["topP"]);e!==void 0&&o!=null&&C(e,["setup","generationConfig","topP"],o);const a=S(t,["topK"]);e!==void 0&&a!=null&&C(e,["setup","generationConfig","topK"],a);const l=S(t,["maxOutputTokens"]);e!==void 0&&l!=null&&C(e,["setup","generationConfig","maxOutputTokens"],l);const c=S(t,["mediaResolution"]);e!==void 0&&c!=null&&C(e,["setup","generationConfig","mediaResolution"],c);const u=S(t,["seed"]);e!==void 0&&u!=null&&C(e,["setup","generationConfig","seed"],u);const h=S(t,["speechConfig"]);e!==void 0&&h!=null&&C(e,["setup","generationConfig","speechConfig"],JB(h));const m=S(t,["thinkingConfig"]);e!==void 0&&m!=null&&C(e,["setup","generationConfig","thinkingConfig"],m);const g=S(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&C(e,["setup","generationConfig","enableAffectiveDialog"],g);const y=S(t,["systemInstruction"]);e!==void 0&&y!=null&&C(e,["setup","systemInstruction"],wot(Ds(y)));const v=S(t,["tools"]);if(e!==void 0&&v!=null){let O=xv(v);Array.isArray(O)&&(O=O.map(B=>Rot(yv(B)))),C(e,["setup","tools"],O)}const b=S(t,["sessionResumption"]);e!==void 0&&b!=null&&C(e,["setup","sessionResumption"],Iot(b));const w=S(t,["inputAudioTranscription"]);e!==void 0&&w!=null&&C(e,["setup","inputAudioTranscription"],w);const k=S(t,["outputAudioTranscription"]);e!==void 0&&k!=null&&C(e,["setup","outputAudioTranscription"],k);const N=S(t,["realtimeInputConfig"]);e!==void 0&&N!=null&&C(e,["setup","realtimeInputConfig"],N);const R=S(t,["contextWindowCompression"]);e!==void 0&&R!=null&&C(e,["setup","contextWindowCompression"],R);const D=S(t,["proactivity"]);if(e!==void 0&&D!=null&&C(e,["setup","proactivity"],D),S(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function Pot(t,e){const n={},r=S(e,["model"]);r!=null&&C(n,["setup","model"],zn(t,r));const i=S(e,["config"]);return i!=null&&C(n,["config"],Cot(i,n)),n}function _ot(t){const e={},n=S(t,["mediaResolution"]);n!=null&&C(e,["mediaResolution"],n);const r=S(t,["codeExecutionResult"]);r!=null&&C(e,["codeExecutionResult"],r);const i=S(t,["executableCode"]);i!=null&&C(e,["executableCode"],i);const s=S(t,["fileData"]);s!=null&&C(e,["fileData"],Aot(s));const o=S(t,["functionCall"]);o!=null&&C(e,["functionCall"],Tot(o));const a=S(t,["functionResponse"]);a!=null&&C(e,["functionResponse"],a);const l=S(t,["inlineData"]);l!=null&&C(e,["inlineData"],bot(l));const c=S(t,["text"]);c!=null&&C(e,["text"],c);const u=S(t,["thought"]);u!=null&&C(e,["thought"],u);const h=S(t,["thoughtSignature"]);h!=null&&C(e,["thoughtSignature"],h);const m=S(t,["videoMetadata"]);return m!=null&&C(e,["videoMetadata"],m),e}function Iot(t){const e={},n=S(t,["handle"]);if(n!=null&&C(e,["handle"],n),S(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Rot(t){const e={},n=S(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(h=>h)),C(e,["functionDeclarations"],u)}if(S(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=S(t,["googleSearchRetrieval"]);r!=null&&C(e,["googleSearchRetrieval"],r);const i=S(t,["computerUse"]);i!=null&&C(e,["computerUse"],i);const s=S(t,["fileSearch"]);s!=null&&C(e,["fileSearch"],s);const o=S(t,["codeExecution"]);if(o!=null&&C(e,["codeExecution"],o),S(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=S(t,["googleMaps"]);a!=null&&C(e,["googleMaps"],kot(a));const l=S(t,["googleSearch"]);l!=null&&C(e,["googleSearch"],Not(l));const c=S(t,["urlContext"]);return c!=null&&C(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Oot(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(s=>`${n}.${s}`);e.push(...i)}else e.push(n)}return e.join(",")}function Mot(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const s=r.setup;typeof s=="object"&&s!==null?(t.bidiGenerateContentSetup=s,n=s):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const i=t.fieldMask;if(n){const s=Oot(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)s?t.fieldMask=s:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const o=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];i.length>0&&(a=i.map(c=>o.includes(c)?`generationConfig.${c}`:c));const l=[];s&&l.push(s),a.length>0&&l.push(...a),l.length>0?t.fieldMask=l.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}class Lot extends jd{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=Sot(this.apiClient,e);s=Tt("auth_tokens",a._url),o=a._query,delete a.config,delete a._url,delete a._query;const l=Mot(a,e.config);return i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>c)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Dot(t,e){const n={},r=S(t,["force"]);return e!==void 0&&r!=null&&C(e,["_query","force"],r),n}function jot(t){const e={},n=S(t,["name"]);n!=null&&C(e,["_url","name"],n);const r=S(t,["config"]);return r!=null&&Dot(r,e),e}function Bot(t){const e={},n=S(t,["name"]);return n!=null&&C(e,["_url","name"],n),e}function Uot(t,e){const n={},r=S(t,["pageSize"]);e!==void 0&&r!=null&&C(e,["_query","pageSize"],r);const i=S(t,["pageToken"]);return e!==void 0&&i!=null&&C(e,["_query","pageToken"],i),n}function Fot(t){const e={},n=S(t,["parent"]);n!=null&&C(e,["_url","parent"],n);const r=S(t,["config"]);return r!=null&&Uot(r,e),e}function $ot(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=S(t,["nextPageToken"]);r!=null&&C(e,["nextPageToken"],r);const i=S(t,["documents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),C(e,["documents"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zot extends jd{constructor(e){super(),this.apiClient=e,this.list=async n=>new Jm(Ad.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Bot(e);return s=Tt("{name}",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=jot(e);i=Tt("{name}",o._url),s=o._query,delete o._url,delete o._query,await this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Fot(e);return s=Tt("{parent}/documents",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=$ot(l),u=new wtt;return Object.assign(u,c),u})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Vot extends jd{constructor(e,n=new zot(e)){super(),this.apiClient=e,this.documents=n,this.list=async(r={})=>new Jm(Ad.PAGED_ITEM_FILE_SEARCH_STORES,i=>this.listInternal(i),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Ost(e);return s=Tt("fileSearchStores",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async get(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Dst(e);return s=Tt("{name}",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=Lst(e);i=Tt("{name}",o._url),s=o._query,delete o._url,delete o._query,await this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=zst(e);return s=Tt("fileSearchStores",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=Vst(l),u=new Ett;return Object.assign(u,c),u})}}async uploadToFileSearchStoreInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Hst(e);return s=Tt("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=qst(l),u=new Stt;return Object.assign(u,c),u})}}async importFile(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Ust(e);return s=Tt("{file_search_store_name}:importFile",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=Bst(l),u=new qB;return Object.assign(u,c),u})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Uhe=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return Uhe=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};const Hot=()=>Uhe();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function iD(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const sD=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rl extends Error{}class so extends rl{constructor(e,n,r,i){super(`${so.makeMessage(e,n,r)}`),this.status=e,this.headers=i,this.error=n}static makeMessage(e,n,r){const i=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,r,i){if(!e||!i)return new ZC({message:r,cause:sD(n)});const s=n;return e===400?new $he(e,s,r,i):e===401?new zhe(e,s,r,i):e===403?new Vhe(e,s,r,i):e===404?new Hhe(e,s,r,i):e===409?new qhe(e,s,r,i):e===422?new Ghe(e,s,r,i):e===429?new Khe(e,s,r,i):e>=500?new Whe(e,s,r,i):new so(e,s,r,i)}}class oD extends so{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class ZC extends so{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class Fhe extends ZC{constructor({message:e}={}){super({message:e??"Request timed out."})}}class $he extends so{}class zhe extends so{}class Vhe extends so{}class Hhe extends so{}class qhe extends so{}class Ghe extends so{}class Khe extends so{}class Whe extends so{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qot=/^[a-z][a-z0-9+.-]*:/i,Got=t=>qot.test(t);let aD=t=>(aD=Array.isArray,aD(t));const Kot=aD;let Wot=Kot;const ZQ=Wot;function Yot(t){if(!t)return!0;for(const e in t)return!1;return!0}function Jot(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const Xot=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new rl(`${t} must be an integer`);if(e<0)throw new rl(`${t} must be a positive integer`);return e},Qot=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Zot=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Tg="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function eat(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const tat=()=>{var t,e,n,r,i;const s=eat();if(s==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Tg,"X-Stainless-OS":tZ(Deno.build.os),"X-Stainless-Arch":eZ(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Tg,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(s==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Tg,"X-Stainless-OS":tZ((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":eZ((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(i=globalThis.process.version)!==null&&i!==void 0?i:"unknown"};const o=nat();return o?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Tg,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${o.browser}`,"X-Stainless-Runtime-Version":o.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Tg,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function nat(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,s=r[2]||0,o=r[3]||0;return{browser:e,version:`${i}.${s}.${o}`}}}return null}const eZ=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",tZ=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let zA;const rat=()=>zA??(zA=tat());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function iat(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Yhe(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function sat(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return Yhe({start(){},async pull(n){const{done:r,value:i}=await e.next();r?n.close():n.enqueue(i)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function Jhe(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function oat(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const r=t.getReader(),i=r.cancel();r.releaseLock(),await i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const aat=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Xhe=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function c4(t,e,n){return Xhe(),new File(t,e??"unknown_file",n)}function lat(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const cat=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Qhe=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",uat=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&Qhe(t),dat=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function fat(t,e,n){if(Xhe(),t=await t,uat(t))return t instanceof File?t:c4([await t.arrayBuffer()],t.name);if(dat(t)){const i=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),c4(await lD(i),e,n)}const r=await lD(t);if(e||(e=lat(t)),!(n!=null&&n.type)){const i=r.find(s=>typeof s=="object"&&"type"in s&&s.type);typeof i=="string"&&(n=Object.assign(Object.assign({},n),{type:i}))}return c4(r,e,n)}async function lD(t){var e,n,r,i,s;let o=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)o.push(t);else if(Qhe(t))o.push(t instanceof Blob?t:await t.arrayBuffer());else if(cat(t))try{for(var a=!0,l=Fl(t),c;c=await l.next(),e=c.done,!e;a=!0){i=c.value,a=!1;const u=i;o.push(...await lD(u))}}catch(u){n={error:u}}finally{try{!a&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}else{const u=(s=t==null?void 0:t.constructor)===null||s===void 0?void 0:s.name;throw new Error(`Unexpected data type: ${typeof t}${u?`; constructor: ${u}`:""}${hat(t)}`)}return o}function hat(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Zhe{constructor(e){this._client=e}}Zhe._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function epe(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const nZ=Object.freeze(Object.create(null)),pat=(t=epe)=>(function(n,...r){if(n.length===1)return n[0];let i=!1;const s=[],o=n.reduce((u,h,m)=>{var g,y,v;/[?#]/.test(h)&&(i=!0);const b=r[m];let w=(i?encodeURIComponent:t)(""+b);return m!==r.length&&(b==null||typeof b=="object"&&b.toString===((v=Object.getPrototypeOf((y=Object.getPrototypeOf((g=b.hasOwnProperty)!==null&&g!==void 0?g:nZ))!==null&&y!==void 0?y:nZ))===null||v===void 0?void 0:v.toString))&&(w=b+"",s.push({start:u.length+h.length,length:w.length,error:`Value of type ${Object.prototype.toString.call(b).slice(8,-1)} is not a valid path parameter`})),u+h+(m===r.length?"":w)},""),a=o.split(/[?#]/,1)[0],l=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let c;for(;(c=l.exec(a))!==null;)s.push({start:c.index,length:c[0].length,error:`Value "${c[0]}" can't be safely passed as a path parameter`});if(s.sort((u,h)=>u.start-h.start),s.length>0){let u=0;const h=s.reduce((m,g)=>{const y=" ".repeat(g.start-u),v="^".repeat(g.length);return u=g.start+g.length,m+y+v},"");throw new rl(`Path parameters result in path with invalid segments:
${s.map(m=>m.error).join(`
`)}
${o}
${h}`)}return o}),VA=pat(epe);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tpe extends Zhe{create(e,n){var r;const{api_version:i=this._client.apiVersion}=e,s=j2(e,["api_version"]);if("model"in s&&"agent_config"in s)throw new rl("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in s&&"generation_config"in s)throw new rl("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(VA`/${i}/interactions`,Object.assign(Object.assign({body:s},n),{stream:(r=e.stream)!==null&&r!==void 0?r:!1}))}delete(e,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.delete(VA`/${i}/interactions/${e}`,r)}cancel(e,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.post(VA`/${i}/interactions/${e}/cancel`,r)}get(e,n={},r){var i;const s=n??{},{api_version:o=this._client.apiVersion}=s,a=j2(s,["api_version"]);return this._client.get(VA`/${o}/interactions/${e}`,Object.assign(Object.assign({query:a},r),{stream:(i=n==null?void 0:n.stream)!==null&&i!==void 0?i:!1}))}}tpe._key=Object.freeze(["interactions"]);class npe extends tpe{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mat(t){let e=0;for(const i of t)e+=i.length;const n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}let HA;function QB(t){let e;return(HA??(e=new globalThis.TextEncoder,HA=e.encode.bind(e)))(t)}let qA;function rZ(t){let e;return(qA??(e=new globalThis.TextDecoder,qA=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eP{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?QB(e):e;this.buffer=mat([this.buffer,n]);const r=[];let i;for(;(i=gat(this.buffer,this.carriageReturnIndex))!=null;){if(i.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=i.index;continue}if(this.carriageReturnIndex!=null&&(i.index!==this.carriageReturnIndex+1||i.carriage)){r.push(rZ(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const s=this.carriageReturnIndex!==null?i.preceding-1:i.preceding,o=rZ(this.buffer.subarray(0,s));r.push(o),this.buffer=this.buffer.subarray(i.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}}eP.NEWLINE_CHARS=new Set([`
`,"\r"]);eP.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function gat(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function yat(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const B2={off:0,error:200,warn:300,info:400,debug:500},iZ=(t,e,n)=>{if(t){if(Jot(B2,t))return t;Gs(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(B2))}`)}};function ew(){}function GA(t,e,n){return!e||B2[t]>B2[n]?ew:e[t].bind(e)}const xat={error:ew,warn:ew,info:ew,debug:ew};let sZ=new WeakMap;function Gs(t){var e;const n=t.logger,r=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return xat;const i=sZ.get(n);if(i&&i[0]===r)return i[1];const s={error:GA("error",n,r),warn:GA("warn",n,r),info:GA("info",n,r),debug:GA("debug",n,r)};return sZ.set(n,[r,s]),s}const mp=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let vat=class tw{constructor(e,n,r){this.iterator=e,this.controller=n,this.client=r}static fromSSEResponse(e,n,r){let i=!1;const s=r?Gs(r):console;function o(){return Ul(this,arguments,function*(){var l,c,u,h;if(i)throw new rl("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let m=!1;try{try{for(var g=!0,y=Fl(bat(e,n)),v;v=yield nn(y.next()),l=v.done,!l;g=!0){h=v.value,g=!1;const b=h;if(!m)if(b.data.startsWith("[DONE]")){m=!0;continue}else try{yield yield nn(JSON.parse(b.data))}catch(w){throw s.error("Could not parse message into JSON:",b.data),s.error("From chunk:",b.raw),w}}}catch(b){c={error:b}}finally{try{!g&&!l&&(u=y.return)&&(yield nn(u.call(y)))}finally{if(c)throw c.error}}m=!0}catch(b){if(iD(b))return yield nn(void 0);throw b}finally{m||n.abort()}})}return new tw(o,n,r)}static fromReadableStream(e,n,r){let i=!1;function s(){return Ul(this,arguments,function*(){var l,c,u,h;const m=new eP,g=Jhe(e);try{for(var y=!0,v=Fl(g),b;b=yield nn(v.next()),l=b.done,!l;y=!0){h=b.value,y=!1;const w=h;for(const k of m.decode(w))yield yield nn(k)}}catch(w){c={error:w}}finally{try{!y&&!l&&(u=v.return)&&(yield nn(u.call(v)))}finally{if(c)throw c.error}}for(const w of m.flush())yield yield nn(w)})}function o(){return Ul(this,arguments,function*(){var l,c,u,h;if(i)throw new rl("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let m=!1;try{try{for(var g=!0,y=Fl(s()),v;v=yield nn(y.next()),l=v.done,!l;g=!0){h=v.value,g=!1;const b=h;m||b&&(yield yield nn(JSON.parse(b)))}}catch(b){c={error:b}}finally{try{!g&&!l&&(u=y.return)&&(yield nn(u.call(y)))}finally{if(c)throw c.error}}m=!0}catch(b){if(iD(b))return yield nn(void 0);throw b}finally{m||n.abort()}})}return new tw(o,n,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),i=s=>({next:()=>{if(s.length===0){const o=r.next();e.push(o),n.push(o)}return s.shift()}});return[new tw(()=>i(e),this.controller,this.client),new tw(()=>i(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return Yhe({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:i,done:s}=await n.next();if(s)return r.close();const o=QB(JSON.stringify(i)+`
`);r.enqueue(o)}catch(i){r.error(i)}},async cancel(){var r;await((r=n.return)===null||r===void 0?void 0:r.call(n))}})}};function bat(t,e){return Ul(this,arguments,function*(){var r,i,s,o;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new rl("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new rl("Attempted to iterate over a response with no body");const a=new Eat,l=new eP,c=Jhe(t.body);try{for(var u=!0,h=Fl(wat(c)),m;m=yield nn(h.next()),r=m.done,!r;u=!0){o=m.value,u=!1;const g=o;for(const y of l.decode(g)){const v=a.decode(y);v&&(yield yield nn(v))}}}catch(g){i={error:g}}finally{try{!u&&!r&&(s=h.return)&&(yield nn(s.call(h)))}finally{if(i)throw i.error}}for(const g of l.flush()){const y=a.decode(g);y&&(yield yield nn(y))}})}function wat(t){return Ul(this,arguments,function*(){var n,r,i,s;let o=new Uint8Array;try{for(var a=!0,l=Fl(t),c;c=yield nn(l.next()),n=c.done,!n;a=!0){s=c.value,a=!1;const u=s;if(u==null)continue;const h=u instanceof ArrayBuffer?new Uint8Array(u):typeof u=="string"?QB(u):u;let m=new Uint8Array(o.length+h.length);m.set(o),m.set(h,o.length),o=m;let g;for(;(g=yat(o))!==-1;)yield yield nn(o.slice(0,g)),o=o.slice(g)}}catch(u){r={error:u}}finally{try{!a&&!n&&(i=l.return)&&(yield nn(i.call(l)))}finally{if(r)throw r.error}}o.length>0&&(yield yield nn(o))})}class Eat{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,i]=Sat(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}function Sat(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Aat(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:i,startTime:s}=e,o=await(async()=>{var a;if(e.options.stream)return Gs(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):vat.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const l=n.headers.get("content-type"),c=(a=l==null?void 0:l.split(";")[0])===null||a===void 0?void 0:a.trim();return(c==null?void 0:c.includes("application/json"))||(c==null?void 0:c.endsWith("+json"))?await n.json():await n.text()})();return Gs(t).debug(`[${r}] response parsed`,mp({retryOfRequestLogID:i,url:n.url,status:n.status,body:o,durationMs:Date.now()-s})),o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ZB extends Promise{constructor(e,n,r=Aat){super(i=>{i(null)}),this.responsePromise=n,this.parseResponse=r,this.client=e}_thenUnwrap(e){return new ZB(this.client,this.responsePromise,async(n,r)=>e(await this.parseResponse(n,r),r))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rpe=Symbol("brand.privateNullableHeaders");function*Tat(t){if(!t)return;if(rpe in t){const{values:r,nulls:i}=t;yield*r.entries();for(const s of i)yield[s,null];return}let e=!1,n;t instanceof Headers?n=t.entries():ZQ(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const s=ZQ(r[1])?r[1]:[r[1]];let o=!1;for(const a of s)a!==void 0&&(e&&!o&&(o=!0,yield[i,null]),yield[i,a])}}const Ub=t=>{const e=new Headers,n=new Set;for(const r of t){const i=new Set;for(const[s,o]of Tat(r)){const a=s.toLowerCase();i.has(a)||(e.delete(s),i.add(a)),o===null?(e.delete(s),n.add(a)):(e.append(s,o),n.delete(a))}}return{[rpe]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const u4=t=>{var e,n,r,i,s,o;if(typeof globalThis.process<"u")return(r=(n=(e=Jet)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(o=(s=(i=globalThis.Deno.env)===null||i===void 0?void 0:i.get)===null||s===void 0?void 0:s.call(i,t))===null||o===void 0?void 0:o.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ipe;class tP{constructor(e){var n,r,i,s,o,a,l,{baseURL:c=u4("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:u=(n=u4("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:h="v1beta"}=e,m=j2(e,["baseURL","apiKey","apiVersion"]);const g=Object.assign(Object.assign({apiKey:u,apiVersion:h},m),{baseURL:c||"https://generativelanguage.googleapis.com"});this.baseURL=g.baseURL,this.timeout=(r=g.timeout)!==null&&r!==void 0?r:tP.DEFAULT_TIMEOUT,this.logger=(i=g.logger)!==null&&i!==void 0?i:console;const y="warn";this.logLevel=y,this.logLevel=(o=(s=iZ(g.logLevel,"ClientOptions.logLevel",this))!==null&&s!==void 0?s:iZ(u4("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&o!==void 0?o:y,this.fetchOptions=g.fetchOptions,this.maxRetries=(a=g.maxRetries)!==null&&a!==void 0?a:2,this.fetch=(l=g.fetch)!==null&&l!==void 0?l:iat(),this.encoder=aat,this._options=g,this.apiKey=u,this.apiVersion=h,this.clientAdapter=g.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=Ub([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Ub([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Ub([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new rl(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Tg}`}defaultIdempotencyKey(){return`stainless-node-retry-${Hot()}`}makeStatusError(e,n,r,i){return so.generate(e,n,r,i)}buildURL(e,n,r){const i=!this.baseURLOverridden()&&r||this.baseURL,s=Got(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return Yot(o)||(n=Object.assign(Object.assign({},o),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(s.search=this.stringifyQuery(n)),s.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(i=>Object.assign({method:e,path:n},i)))}request(e,n=null){return new ZB(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){var i,s,o;const a=await e,l=(i=a.maxRetries)!==null&&i!==void 0?i:this.maxRetries;n==null&&(n=l),await this.prepareOptions(a);const{req:c,url:u,timeout:h}=await this.buildRequest(a,{retryCount:l-n});await this.prepareRequest(c,{url:u,options:a});const m="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),g=r===void 0?"":`, retryOf: ${r}`,y=Date.now();if(Gs(this).debug(`[${m}] sending request`,mp({retryOfRequestLogID:r,method:a.method,url:u,options:a,headers:c.headers})),!((s=a.signal)===null||s===void 0)&&s.aborted)throw new oD;const v=new AbortController,b=await this.fetchWithTimeout(u,c,h,v).catch(sD),w=Date.now();if(b instanceof globalThis.Error){const N=`retrying, ${n} attempts remaining`;if(!((o=a.signal)===null||o===void 0)&&o.aborted)throw new oD;const R=iD(b)||/timed? ?out/i.test(String(b)+("cause"in b?String(b.cause):""));if(n)return Gs(this).info(`[${m}] connection ${R?"timed out":"failed"} - ${N}`),Gs(this).debug(`[${m}] connection ${R?"timed out":"failed"} (${N})`,mp({retryOfRequestLogID:r,url:u,durationMs:w-y,message:b.message})),this.retryRequest(a,n,r??m);throw Gs(this).info(`[${m}] connection ${R?"timed out":"failed"} - error; no more retries left`),Gs(this).debug(`[${m}] connection ${R?"timed out":"failed"} (error; no more retries left)`,mp({retryOfRequestLogID:r,url:u,durationMs:w-y,message:b.message})),R?new Fhe:new ZC({cause:b})}const k=`[${m}${g}] ${c.method} ${u} ${b.ok?"succeeded":"failed"} with status ${b.status} in ${w-y}ms`;if(!b.ok){const N=await this.shouldRetry(b);if(n&&N){const U=`retrying, ${n} attempts remaining`;return await oat(b.body),Gs(this).info(`${k} - ${U}`),Gs(this).debug(`[${m}] response error (${U})`,mp({retryOfRequestLogID:r,url:b.url,status:b.status,headers:b.headers,durationMs:w-y})),this.retryRequest(a,n,r??m,b.headers)}const R=N?"error; no more retries left":"error; not retryable";Gs(this).info(`${k} - ${R}`);const D=await b.text().catch(U=>sD(U).message),O=Qot(D),B=O?void 0:D;throw Gs(this).debug(`[${m}] response error (${R})`,mp({retryOfRequestLogID:r,url:b.url,status:b.status,headers:b.headers,message:B,durationMs:Date.now()-y})),this.makeStatusError(b.status,O,B,b.headers)}return Gs(this).info(k),Gs(this).debug(`[${m}] response start`,mp({retryOfRequestLogID:r,url:b.url,status:b.status,headers:b.headers,durationMs:w-y})),{response:b,options:a,controller:v,requestLogID:m,retryOfRequestLogID:r,startTime:y}}async fetchWithTimeout(e,n,r,i){const s=n||{},{signal:o,method:a}=s,l=j2(s,["signal","method"]);o&&o.addEventListener("abort",()=>i.abort());const c=setTimeout(()=>i.abort(),r),u=globalThis.ReadableStream&&l.body instanceof globalThis.ReadableStream||typeof l.body=="object"&&l.body!==null&&Symbol.asyncIterator in l.body,h=Object.assign(Object.assign(Object.assign({signal:i.signal},u?{duplex:"half"}:{}),{method:"GET"}),l);a&&(h.method=a.toUpperCase());try{return await this.fetch.call(void 0,e,h)}finally{clearTimeout(c)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,i){var s;let o;const a=i==null?void 0:i.get("retry-after-ms");if(a){const c=parseFloat(a);Number.isNaN(c)||(o=c)}const l=i==null?void 0:i.get("retry-after");if(l&&!o){const c=parseFloat(l);Number.isNaN(c)?o=Date.parse(l)-Date.now():o=c*1e3}if(!(o&&0<=o&&o<60*1e3)){const c=(s=e.maxRetries)!==null&&s!==void 0?s:this.maxRetries;o=this.calculateDefaultRetryTimeoutMillis(n,c)}return await Zot(o),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const s=n-e,o=Math.min(.5*Math.pow(2,s),8),a=1-Math.random()*.25;return o*a*1e3}async buildRequest(e,{retryCount:n=0}={}){var r,i,s;const o=Object.assign({},e),{method:a,path:l,query:c,defaultBaseURL:u}=o,h=this.buildURL(l,c,u);"timeout"in o&&Xot("timeout",o.timeout),o.timeout=(r=o.timeout)!==null&&r!==void 0?r:this.timeout;const{bodyHeaders:m,body:g}=this.buildBody({options:o}),y=await this.buildHeaders({options:e,method:a,bodyHeaders:m,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:a,headers:y},o.signal&&{signal:o.signal}),globalThis.ReadableStream&&g instanceof globalThis.ReadableStream&&{duplex:"half"}),g&&{body:g}),(i=this.fetchOptions)!==null&&i!==void 0?i:{}),(s=o.fetchOptions)!==null&&s!==void 0?s:{}),url:h,timeout:o.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:i}){let s={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=e.idempotencyKey);const o=await this.authHeaders(e);let a=Ub([s,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),rat()),this._options.defaultHeaders,r,e.headers,o]);return this.validateHeaders(a),a.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=Ub([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:sat(e)}:this.encoder({body:e,headers:r})}}tP.DEFAULT_TIMEOUT=6e4;class Ki extends tP{constructor(){super(...arguments),this.interactions=new npe(this)}}ipe=Ki;Ki.GeminiNextGenAPIClient=ipe;Ki.GeminiNextGenAPIClientError=rl;Ki.APIError=so;Ki.APIConnectionError=ZC;Ki.APIConnectionTimeoutError=Fhe;Ki.APIUserAbortError=oD;Ki.NotFoundError=Hhe;Ki.ConflictError=qhe;Ki.RateLimitError=Khe;Ki.BadRequestError=$he;Ki.AuthenticationError=zhe;Ki.InternalServerError=Whe;Ki.PermissionDeniedError=Vhe;Ki.UnprocessableEntityError=Ghe;Ki.toFile=fat;Ki.Interactions=npe;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kat(t,e){const n={},r=S(t,["name"]);return r!=null&&C(n,["_url","name"],r),n}function Nat(t,e){const n={},r=S(t,["name"]);return r!=null&&C(n,["_url","name"],r),n}function Cat(t,e){const n={},r=S(t,["sdkHttpResponse"]);return r!=null&&C(n,["sdkHttpResponse"],r),n}function Pat(t,e){const n={},r=S(t,["sdkHttpResponse"]);return r!=null&&C(n,["sdkHttpResponse"],r),n}function _at(t,e,n){const r={};if(S(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=S(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&C(e,["displayName"],i),S(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=S(t,["epochCount"]);e!==void 0&&s!=null&&C(e,["tuningTask","hyperparameters","epochCount"],s);const o=S(t,["learningRateMultiplier"]);if(o!=null&&C(r,["tuningTask","hyperparameters","learningRateMultiplier"],o),S(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(S(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(S(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=S(t,["batchSize"]);e!==void 0&&a!=null&&C(e,["tuningTask","hyperparameters","batchSize"],a);const l=S(t,["learningRate"]);if(e!==void 0&&l!=null&&C(e,["tuningTask","hyperparameters","learningRate"],l),S(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(S(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function Iat(t,e,n){const r={};let i=S(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const g=S(t,["validationDataset"]);e!==void 0&&g!=null&&C(e,["supervisedTuningSpec"],oZ(g))}else if(i==="PREFERENCE_TUNING"){const g=S(t,["validationDataset"]);e!==void 0&&g!=null&&C(e,["preferenceOptimizationSpec"],oZ(g))}const s=S(t,["tunedModelDisplayName"]);e!==void 0&&s!=null&&C(e,["tunedModelDisplayName"],s);const o=S(t,["description"]);e!==void 0&&o!=null&&C(e,["description"],o);let a=S(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const g=S(t,["epochCount"]);e!==void 0&&g!=null&&C(e,["supervisedTuningSpec","hyperParameters","epochCount"],g)}else if(a==="PREFERENCE_TUNING"){const g=S(t,["epochCount"]);e!==void 0&&g!=null&&C(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],g)}let l=S(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const g=S(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&C(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],g)}else if(l==="PREFERENCE_TUNING"){const g=S(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&C(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],g)}let c=S(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const g=S(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&C(e,["supervisedTuningSpec","exportLastCheckpointOnly"],g)}else if(c==="PREFERENCE_TUNING"){const g=S(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&C(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],g)}let u=S(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const g=S(t,["adapterSize"]);e!==void 0&&g!=null&&C(e,["supervisedTuningSpec","hyperParameters","adapterSize"],g)}else if(u==="PREFERENCE_TUNING"){const g=S(t,["adapterSize"]);e!==void 0&&g!=null&&C(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],g)}if(S(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(S(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const h=S(t,["labels"]);e!==void 0&&h!=null&&C(e,["labels"],h);const m=S(t,["beta"]);return e!==void 0&&m!=null&&C(e,["preferenceOptimizationSpec","hyperParameters","beta"],m),r}function Rat(t,e){const n={},r=S(t,["baseModel"]);r!=null&&C(n,["baseModel"],r);const i=S(t,["preTunedModel"]);i!=null&&C(n,["preTunedModel"],i);const s=S(t,["trainingDataset"]);s!=null&&Vat(s);const o=S(t,["config"]);return o!=null&&_at(o,n),n}function Oat(t,e){const n={},r=S(t,["baseModel"]);r!=null&&C(n,["baseModel"],r);const i=S(t,["preTunedModel"]);i!=null&&C(n,["preTunedModel"],i);const s=S(t,["trainingDataset"]);s!=null&&Hat(s,n,e);const o=S(t,["config"]);return o!=null&&Iat(o,n,e),n}function Mat(t,e){const n={},r=S(t,["name"]);return r!=null&&C(n,["_url","name"],r),n}function Lat(t,e){const n={},r=S(t,["name"]);return r!=null&&C(n,["_url","name"],r),n}function Dat(t,e,n){const r={},i=S(t,["pageSize"]);e!==void 0&&i!=null&&C(e,["_query","pageSize"],i);const s=S(t,["pageToken"]);e!==void 0&&s!=null&&C(e,["_query","pageToken"],s);const o=S(t,["filter"]);return e!==void 0&&o!=null&&C(e,["_query","filter"],o),r}function jat(t,e,n){const r={},i=S(t,["pageSize"]);e!==void 0&&i!=null&&C(e,["_query","pageSize"],i);const s=S(t,["pageToken"]);e!==void 0&&s!=null&&C(e,["_query","pageToken"],s);const o=S(t,["filter"]);return e!==void 0&&o!=null&&C(e,["_query","filter"],o),r}function Bat(t,e){const n={},r=S(t,["config"]);return r!=null&&Dat(r,n),n}function Uat(t,e){const n={},r=S(t,["config"]);return r!=null&&jat(r,n),n}function Fat(t,e){const n={},r=S(t,["sdkHttpResponse"]);r!=null&&C(n,["sdkHttpResponse"],r);const i=S(t,["nextPageToken"]);i!=null&&C(n,["nextPageToken"],i);const s=S(t,["tunedModels"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>spe(a))),C(n,["tuningJobs"],o)}return n}function $at(t,e){const n={},r=S(t,["sdkHttpResponse"]);r!=null&&C(n,["sdkHttpResponse"],r);const i=S(t,["nextPageToken"]);i!=null&&C(n,["nextPageToken"],i);const s=S(t,["tuningJobs"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>cD(a))),C(n,["tuningJobs"],o)}return n}function zat(t,e){const n={},r=S(t,["name"]);r!=null&&C(n,["model"],r);const i=S(t,["name"]);return i!=null&&C(n,["endpoint"],i),n}function Vat(t,e){const n={};if(S(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(S(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=S(t,["examples"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),C(n,["examples","examples"],i)}return n}function Hat(t,e,n){const r={};let i=S(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const o=S(t,["gcsUri"]);e!==void 0&&o!=null&&C(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(i==="PREFERENCE_TUNING"){const o=S(t,["gcsUri"]);e!==void 0&&o!=null&&C(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}let s=S(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const o=S(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&C(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(s==="PREFERENCE_TUNING"){const o=S(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&C(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}if(S(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function spe(t,e){const n={},r=S(t,["sdkHttpResponse"]);r!=null&&C(n,["sdkHttpResponse"],r);const i=S(t,["name"]);i!=null&&C(n,["name"],i);const s=S(t,["state"]);s!=null&&C(n,["state"],whe(s));const o=S(t,["createTime"]);o!=null&&C(n,["createTime"],o);const a=S(t,["tuningTask","startTime"]);a!=null&&C(n,["startTime"],a);const l=S(t,["tuningTask","completeTime"]);l!=null&&C(n,["endTime"],l);const c=S(t,["updateTime"]);c!=null&&C(n,["updateTime"],c);const u=S(t,["description"]);u!=null&&C(n,["description"],u);const h=S(t,["baseModel"]);h!=null&&C(n,["baseModel"],h);const m=S(t,["_self"]);return m!=null&&C(n,["tunedModel"],zat(m)),n}function cD(t,e){const n={},r=S(t,["sdkHttpResponse"]);r!=null&&C(n,["sdkHttpResponse"],r);const i=S(t,["name"]);i!=null&&C(n,["name"],i);const s=S(t,["state"]);s!=null&&C(n,["state"],whe(s));const o=S(t,["createTime"]);o!=null&&C(n,["createTime"],o);const a=S(t,["startTime"]);a!=null&&C(n,["startTime"],a);const l=S(t,["endTime"]);l!=null&&C(n,["endTime"],l);const c=S(t,["updateTime"]);c!=null&&C(n,["updateTime"],c);const u=S(t,["error"]);u!=null&&C(n,["error"],u);const h=S(t,["description"]);h!=null&&C(n,["description"],h);const m=S(t,["baseModel"]);m!=null&&C(n,["baseModel"],m);const g=S(t,["tunedModel"]);g!=null&&C(n,["tunedModel"],g);const y=S(t,["preTunedModel"]);y!=null&&C(n,["preTunedModel"],y);const v=S(t,["supervisedTuningSpec"]);v!=null&&C(n,["supervisedTuningSpec"],v);const b=S(t,["preferenceOptimizationSpec"]);b!=null&&C(n,["preferenceOptimizationSpec"],b);const w=S(t,["tuningDataStats"]);w!=null&&C(n,["tuningDataStats"],w);const k=S(t,["encryptionSpec"]);k!=null&&C(n,["encryptionSpec"],k);const N=S(t,["partnerModelTuningSpec"]);N!=null&&C(n,["partnerModelTuningSpec"],N);const R=S(t,["customBaseModel"]);R!=null&&C(n,["customBaseModel"],R);const D=S(t,["experiment"]);D!=null&&C(n,["experiment"],D);const O=S(t,["labels"]);O!=null&&C(n,["labels"],O);const B=S(t,["outputUri"]);B!=null&&C(n,["outputUri"],B);const z=S(t,["pipelineJob"]);z!=null&&C(n,["pipelineJob"],z);const U=S(t,["serviceAccount"]);U!=null&&C(n,["serviceAccount"],U);const $=S(t,["tunedModelDisplayName"]);$!=null&&C(n,["tunedModelDisplayName"],$);const W=S(t,["veoTuningSpec"]);return W!=null&&C(n,["veoTuningSpec"],W),n}function qat(t,e){const n={},r=S(t,["sdkHttpResponse"]);r!=null&&C(n,["sdkHttpResponse"],r);const i=S(t,["name"]);i!=null&&C(n,["name"],i);const s=S(t,["metadata"]);s!=null&&C(n,["metadata"],s);const o=S(t,["done"]);o!=null&&C(n,["done"],o);const a=S(t,["error"]);return a!=null&&C(n,["error"],a),n}function oZ(t,e){const n={},r=S(t,["gcsUri"]);r!=null&&C(n,["validationDatasetUri"],r);const i=S(t,["vertexDatasetResource"]);return i!=null&&C(n,["validationDatasetUri"],i),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Gat extends jd{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Jm(Ad.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const i={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(i.checkpointId=n.config.preTunedModelCheckpointId);const s=Object.assign(Object.assign({},n),{preTunedModel:i});return s.baseModel=void 0,await this.tuneInternal(s)}else{const i=Object.assign({},n);return await this.tuneInternal(i)}else{const i=Object.assign({},n),s=await this.tuneMldevInternal(i);let o="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?o=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(o=s.name.split("/operations/")[0]),{name:o,state:XL.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Lat(e);return a=Tt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>cD(u))}else{const c=Mat(e);return a=Tt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>spe(u))}}async listInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Uat(e);return a=Tt("tuningJobs",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const h=$at(u),m=new RQ;return Object.assign(m,h),m})}else{const c=Bat(e);return a=Tt("tunedModels",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const h=Fat(u),m=new RQ;return Object.assign(m,h),m})}}async cancel(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Nat(e);return a=Tt("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const h=Pat(u),m=new OQ;return Object.assign(m,h),m})}else{const c=kat(e);return a=Tt("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const h=Cat(u),m=new OQ;return Object.assign(m,h),m})}}async tuneInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=Oat(e,e);return s=Tt("tuningJobs",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),i.then(l=>cD(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Rat(e);return s=Tt("tunedModels",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),i.then(l=>qat(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Kat{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Wat=1024*1024*8,Yat=3,Jat=1e3,Xat=2,U2="x-goog-upload-status";async function Qat(t,e,n){var r;const i=await ope(t,e,n),s=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[U2])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return s.file}async function Zat(t,e,n){var r;const i=await ope(t,e,n),s=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[U2])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const o=mhe(s),a=new GB;return Object.assign(a,o),a}async function ope(t,e,n){var r,i;let s=0,o=0,a=new QL(new Response),l="upload";for(s=t.size;o<s;){const c=Math.min(Wat,s-o),u=t.slice(o,o+c);o+c>=s&&(l+=", finalize");let h=0,m=Jat;for(;h<Yat&&(a=await n.request({path:"",body:u,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(o),"Content-Length":String(c)}}}),!(!((r=a==null?void 0:a.headers)===null||r===void 0)&&r[U2]));)h++,await tlt(m),m=m*Xat;if(o+=c,((i=a==null?void 0:a.headers)===null||i===void 0?void 0:i[U2])!=="active")break;if(s<=o)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}async function elt(t){return{size:t.size,type:t.type}}function tlt(t){return new Promise(e=>setTimeout(e,t))}class nlt{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Qat(e,n,r)}async uploadToFileSearchStore(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Zat(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await elt(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rlt{create(e,n,r){return new ilt(e,n,r)}}class ilt{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const aZ="x-goog-api-key";class slt{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(aZ)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(aZ,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const olt="gl-node/";class ape{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new Ki({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=ett(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const i=new slt(this.apiKey);this.apiClient=new Zst({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:olt+"web",uploader:new nlt,downloader:new Kat}),this.models=new xot(this.apiClient),this.live=new fot(this.apiClient,i,new rlt),this.batches=new Pnt(this.apiClient),this.chats=new urt(this.models,this.apiClient),this.caches=new art(this.apiClient),this.files=new brt(this.apiClient),this.operations=new vot(this.apiClient),this.authTokens=new Lot(this.apiClient),this.tunings=new Gat(this.apiClient),this.fileSearchStores=new Vot(this.apiClient)}}const lpe={inputPricePerMillion:.5,outputPricePerMillion:2.5,customModelPricing:{"gemini-3-flash-preview":{input:.5,output:2.5},"gemini-2.5-pro":{input:1.25,output:10},"gemini-2.5-flash":{input:.15,output:.6},"gemini-2.5-flash-lite":{input:.075,output:.3},"gemini-2.0-flash":{input:.1,output:.4},"gemini-2.0-flash-lite":{input:.075,output:.3}}},lZ={records:[],pricing:lpe},cZ="token_usage_store";class alt{constructor(){this.isInitialized=!1,this.initPromise=null,this.state=lZ,this.listeners=new Set,this.initPromise=this.initialize()}async initialize(){this.isInitialized||(await this.loadState(),this.isInitialized=!0,this.notifyListeners())}async waitForInit(){this.initPromise&&await this.initPromise}async loadState(){try{const e=await ke.getItem(ke.getUserKey(cZ));if(e){const n=JSON.parse(e);this.state={...lZ,...n,pricing:{...lpe,...n.pricing||{}}}}}catch(e){console.error("[TokenUsageStore] Failed to load state:",e)}}async saveState(){try{await ke.setItem(ke.getUserKey(cZ),JSON.stringify(this.state))}catch(e){console.error("[TokenUsageStore] Failed to save state:",e)}}notifyListeners(){this.listeners.forEach(e=>e())}notify(){this.notifyListeners(),this.saveState()}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}getSnapshot(){return this.state}addRecord(e){const r=[{...e,id:Date.now().toString()+Math.random().toString().slice(2,6),timestamp:Date.now()},...this.state.records].slice(0,1e3);this.state={...this.state,records:r},this.notify(),console.log(`[TokenUsageStore] Recorded: ${e.source} ${e.operation} - In: ${e.inputTokens}, Out: ${e.outputTokens}`)}updatePricing(e){this.state={...this.state,pricing:{...this.state.pricing,...e}},this.notify()}clearHistory(){this.state={...this.state,records:[]},this.notify()}calculateCost(e,n,r){var s;const i=this.state.pricing;if(r&&((s=i.customModelPricing)!=null&&s[r])){const o=i.customModelPricing[r];return e*o.input/1e6+n*o.output/1e6}return e*i.inputPricePerMillion/1e6+n*i.outputPricePerMillion/1e6}getStats(){var l;const e=this.state.records,n=new Date,r=new Date(n.getFullYear(),n.getMonth(),n.getDate()).getTime(),i=new Date(n.getFullYear(),n.getMonth(),1).getTime(),s={totalInputTokens:0,totalOutputTokens:0,totalCost:0,bySource:{MANAGER:{input:0,output:0,cost:0,count:0},DEALER:{input:0,output:0,cost:0,count:0},POLYMARKET_DEALER:{input:0,output:0,cost:0,count:0}},byOperation:{},today:{input:0,output:0,cost:0},thisMonth:{input:0,output:0,cost:0},dealerMetrics:{avgTokensPerCoin:0,avgTokensPerCycle:0,totalCoinsAnalyzed:0},managerMetrics:{avgTokensPerQuery:0,totalQueries:0}};let o=0,a=0;for(const c of e){const u=this.calculateCost(c.inputTokens,c.outputTokens,c.model);s.totalInputTokens+=c.inputTokens,s.totalOutputTokens+=c.outputTokens,s.totalCost+=u,s.bySource[c.source].input+=c.inputTokens,s.bySource[c.source].output+=c.outputTokens,s.bySource[c.source].cost+=u,s.bySource[c.source].count++,s.byOperation[c.operation]||(s.byOperation[c.operation]={input:0,output:0,cost:0,count:0}),s.byOperation[c.operation].input+=c.inputTokens,s.byOperation[c.operation].output+=c.outputTokens,s.byOperation[c.operation].cost+=u,s.byOperation[c.operation].count++,c.timestamp>=r&&(s.today.input+=c.inputTokens,s.today.output+=c.outputTokens,s.today.cost+=u),c.timestamp>=i&&(s.thisMonth.input+=c.inputTokens,s.thisMonth.output+=c.outputTokens,s.thisMonth.cost+=u),c.source==="DEALER"&&(o+=c.inputTokens+c.outputTokens,a++,(l=c.metadata)!=null&&l.coinsAnalyzed&&(s.dealerMetrics.totalCoinsAnalyzed+=c.metadata.coinsAnalyzed)),c.source==="MANAGER"&&s.managerMetrics.totalQueries++}if(s.dealerMetrics.totalCoinsAnalyzed>0&&(s.dealerMetrics.avgTokensPerCoin=o/s.dealerMetrics.totalCoinsAnalyzed),a>0&&(s.dealerMetrics.avgTokensPerCycle=o/a),s.managerMetrics.totalQueries>0){const c=s.bySource.MANAGER.input+s.bySource.MANAGER.output;s.managerMetrics.avgTokensPerQuery=c/s.managerMetrics.totalQueries}return s}getRecords(e=50,n){let r=this.state.records;return n&&(r=r.filter(i=>i.source===n)),r.slice(0,e)}}const Ps=new alt,py={gemini:[{id:"gemini-3-flash-preview",name:"Gemini 3 Flash Preview",description:"Next generation (Preview)",inputPricePerMillion:.1,outputPricePerMillion:.4},{id:"gemini-2.5-flash",name:"Gemini 2.5 Flash",description:"Fast & balanced",inputPricePerMillion:.15,outputPricePerMillion:.6},{id:"gemini-2.5-pro",name:"Gemini 2.5 Pro",description:"Most capable",inputPricePerMillion:1.25,outputPricePerMillion:10},{id:"gemini-2.5-flash-lite",name:"Gemini 2.5 Flash-Lite",description:"Lightweight",inputPricePerMillion:.075,outputPricePerMillion:.3},{id:"gemini-2.0-flash",name:"Gemini 2.0 Flash",description:"Stable",inputPricePerMillion:.1,outputPricePerMillion:.4},{id:"gemini-2.0-flash-lite",name:"Gemini 2.0 Flash-Lite",description:"Economy",inputPricePerMillion:.075,outputPricePerMillion:.3}],openai:[{id:"gpt-4o",name:"GPT-4o",description:"Most capable",inputPricePerMillion:2.5,outputPricePerMillion:10},{id:"gpt-4o-mini",name:"GPT-4o Mini",description:"Fast & affordable",inputPricePerMillion:.15,outputPricePerMillion:.6},{id:"gpt-4-turbo",name:"GPT-4 Turbo",description:"Stable",inputPricePerMillion:10,outputPricePerMillion:30},{id:"o1-mini",name:"o1-mini",description:"Reasoning model",inputPricePerMillion:3,outputPricePerMillion:12}],claude:[{id:"claude-sonnet-4-20250514",name:"Claude Sonnet 4",description:"Latest & fastest",inputPricePerMillion:3,outputPricePerMillion:15},{id:"claude-3-5-sonnet-20241022",name:"Claude 3.5 Sonnet",description:"Previous gen",inputPricePerMillion:3,outputPricePerMillion:15},{id:"claude-3-opus-20240229",name:"Claude 3 Opus",description:"Most capable",inputPricePerMillion:15,outputPricePerMillion:75},{id:"claude-3-haiku-20240307",name:"Claude 3 Haiku",description:"Economy",inputPricePerMillion:.25,outputPricePerMillion:1.25}]},vu={gemini:{name:"Google Gemini",icon:"",color:"#4285F4",keyUrl:"https://aistudio.google.com/apikey"},openai:{name:"OpenAI",icon:"",color:"#10A37F",keyUrl:"https://platform.openai.com/api-keys"},claude:{name:"Anthropic Claude",icon:"",color:"#D97757",keyUrl:"https://console.anthropic.com/settings/keys"}},llt={gemini:{minIntervalMs:5e3,maxRetries:5,baseBackoffMs:5e3,maxBackoffMs:12e4,jitterMs:1e3},openai:{minIntervalMs:500,maxRetries:3,baseBackoffMs:1e3,maxBackoffMs:3e4,jitterMs:500},claude:{minIntervalMs:500,maxRetries:3,baseBackoffMs:1e3,maxBackoffMs:3e4,jitterMs:500}},uZ={CRITICAL:100,HIGH:75,NORMAL:50,LOW:25};class Vg{constructor(){this.queue=[],this.isProcessing=!1,this.lastRequestTime=0,this.consecutiveRateLimits=0,this.blockedUntil=0,this.successCount=0,this.failureCount=0,this.totalWaitTimeMs=0,this.requestCount=0,this.config={minIntervalMs:5e3,maxRetries:5,baseBackoffMs:5e3,maxBackoffMs:12e4,jitterMs:1e3},this.rateLimitListeners=[],console.log("[AIRequestQueue]  Initialized global request queue")}static getInstance(){return Vg.instance||(Vg.instance=new Vg),Vg.instance}setConfig(e){const n=llt[e];n&&(this.config={...n},console.log(`[AIRequestQueue]  Config updated for provider: ${e}`))}addRateLimitListener(e){return this.rateLimitListeners.push(e),()=>{this.rateLimitListeners=this.rateLimitListeners.filter(n=>n!==e)}}setOnRateLimit(e){e&&this.addRateLimitListener(e)}enqueue(e){return new Promise((n,r)=>{const i=this.generateId(),s={id:i,priority:e.priority,source:e.source,execute:e.execute,resolve:n,reject:r,timestamp:Date.now(),retries:0,provider:e.provider||"gemini"};this.insertByPriority(s);const o=this.queue.findIndex(a=>a.id===i)+1;console.log(`[AIRequestQueue]  Queued request #${i.slice(-6)} (position: ${o}, priority: ${e.priority}, source: ${e.source})`),this.isProcessing||this.processQueue()})}insertByPriority(e){const n=uZ[e.priority];let r=this.queue.length;for(let i=0;i<this.queue.length;i++){const s=uZ[this.queue[i].priority];if(n>s){r=i;break}}this.queue.splice(r,0,e)}async processQueue(){if(!this.isProcessing){for(this.isProcessing=!0,console.log("[AIRequestQueue]  Starting queue processing");this.queue.length>0;){const e=this.queue.shift();try{await this.waitForSlot();const n=Date.now(),r=await this.executeWithRetry(e),i=Date.now()-e.timestamp;this.successCount++,this.totalWaitTimeMs+=i,this.requestCount++,this.consecutiveRateLimits=0,console.log(`[AIRequestQueue]  Request #${e.id.slice(-6)} completed (wait: ${(i/1e3).toFixed(1)}s)`),e.resolve(r)}catch(n){this.failureCount++,console.error(`[AIRequestQueue]  Request #${e.id.slice(-6)} failed:`,n.message),e.reject(n)}}this.isProcessing=!1,console.log("[AIRequestQueue]  Queue empty, processing stopped")}}async executeWithRetry(e){let n;for(let r=0;r<=this.config.maxRetries;r++)try{return r>0&&console.log(`[AIRequestQueue]  Retry attempt ${r}/${this.config.maxRetries} for #${e.id.slice(-6)}`),await e.execute()}catch(i){if(n=i,this.isRateLimitError(i)){const o=this.parseRetryDelay(i);if(this.handleRateLimit(o),r<this.config.maxRetries){await this.waitForSlot();continue}}if(r===this.config.maxRetries)break;const s=this.calculateBackoff(r);console.log(`[AIRequestQueue]  Waiting ${(s/1e3).toFixed(1)}s before retry...`),await this.sleep(s)}throw n}async waitForSlot(){const e=Date.now();if(this.blockedUntil>e){const l=this.blockedUntil-e;console.log(`[AIRequestQueue]  Rate limited, waiting ${(l/1e3).toFixed(1)}s...`),await this.sleep(l)}const n=Math.pow(2,Math.min(this.consecutiveRateLimits,6)),r=this.config.minIntervalMs*n,i=Math.min(r,this.config.maxBackoffMs),s=Math.random()*this.config.jitterMs,o=i+s,a=e-this.lastRequestTime;if(a<o){const l=o-a;this.consecutiveRateLimits>0&&console.log(`[AIRequestQueue]  Throttling: waiting ${(l/1e3).toFixed(1)}s (backoff level: ${this.consecutiveRateLimits})...`),await this.sleep(l)}this.lastRequestTime=Date.now()}handleRateLimit(e){this.consecutiveRateLimits++;const n=Math.min(this.config.baseBackoffMs+Math.pow(2,this.consecutiveRateLimits)*5e3,this.config.maxBackoffMs);this.blockedUntil=Date.now()+e*1e3+n;const r=e+Math.ceil(n/1e3);console.log(`[AIRequestQueue]  Rate limited (hit #${this.consecutiveRateLimits}). Blocked for ${r}s`);const i=this.consecutiveRateLimits>=this.config.maxRetries;this.rateLimitListeners.forEach(s=>{try{s({consecutiveHits:this.consecutiveRateLimits,blockedForSeconds:r,exhausted:i})}catch(o){console.error("[AIRequestQueue] Error in rate limit listener:",o)}})}calculateBackoff(e){const n=this.config.baseBackoffMs*Math.pow(2,e),r=Math.random()*this.config.jitterMs;return Math.min(n+r,this.config.maxBackoffMs)}isRateLimitError(e){const n=typeof e=="string"?e:JSON.stringify(e);return n.includes("429")||n.includes("RESOURCE_EXHAUSTED")||n.includes("Too Many Requests")||n.includes("quota")||n.includes("rate_limit")||n.includes("rate limit")}parseRetryDelay(e){try{const n=typeof e=="string"?e:JSON.stringify(e),r=n.match(/retry in (\d+\.?\d*)s/i);if(r)return Math.ceil(parseFloat(r[1]));const i=n.match(/"retryDelay"\s*:\s*"(\d+)s?"/i);if(i)return parseInt(i[1]);const s=n.match(/retry-after[:\s]+(\d+)/i);if(s)return parseInt(s[1])}catch{}return 30}generateId(){return`req_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}sleep(e){return new Promise(n=>setTimeout(n,e))}getMetrics(){return{queueLength:this.queue.length,avgWaitTimeMs:this.requestCount>0?this.totalWaitTimeMs/this.requestCount:0,successCount:this.successCount,failureCount:this.failureCount,lastRequestTime:this.lastRequestTime,consecutiveRateLimits:this.consecutiveRateLimits,isProcessing:this.isProcessing}}clear(){const e=this.queue.length;this.queue.forEach(n=>{n.reject(new Error("Queue cleared"))}),this.queue=[],console.log(`[AIRequestQueue]  Cleared ${e} pending requests`)}resetMetrics(){this.successCount=0,this.failureCount=0,this.totalWaitTimeMs=0,this.requestCount=0,console.log("[AIRequestQueue]  Metrics reset")}}const Os=Vg.getInstance();class clt{constructor(){this.providerType="gemini",this.client=null,this.modelName="gemini-2.5-flash"}isInitialized(){return this.client!==null}initialize(e){this.client=new ape({apiKey:e})}setModel(e){this.modelName=e}getModel(){return this.modelName}getTools(){const e={name:"getVaultBalance",description:"Get the balance of the internal Vault Wallet. Can show all balances or a specific token balance.",parameters:{type:be.OBJECT,properties:{token:{type:be.STRING,description:"Optional: Symbol or Mint Address of specific token to check."}}}},n={name:"executeSwap",description:"Execute a token swap on Raydium Devnet.",parameters:{type:be.OBJECT,properties:{inputToken:{type:be.STRING,description:"Symbol or Mint Address of token to sell"},outputToken:{type:be.STRING,description:"Symbol or Mint Address of token to buy"},amount:{type:be.NUMBER,description:"Amount of input token to swap"}},required:["inputToken","outputToken","amount"]}},r={name:"withdrawSol",description:"Transfer SOL from the internal Vault to the connected Owner Wallet.",parameters:{type:be.OBJECT,properties:{amount:{type:be.NUMBER,description:"Amount of SOL to transfer"}},required:["amount"]}},i={name:"transferToken",description:"Transfer SPL tokens or NFTs from the Vault to the Owner Wallet.",parameters:{type:be.OBJECT,properties:{tokenMint:{type:be.STRING,description:"Mint address of the token to transfer"},amount:{type:be.NUMBER,description:"Amount of tokens to transfer"}},required:["tokenMint","amount"]}},s={name:"getMarketPrice",description:"Get the current market price for a given symbol.",parameters:{type:be.OBJECT,properties:{symbol:{type:be.STRING,description:'Trading symbol (e.g., "BTCUSDT")'}},required:["symbol"]}},o={name:"getOHLCV",description:"Get OHLCV candlestick data for a symbol.",parameters:{type:be.OBJECT,properties:{symbol:{type:be.STRING,description:"Trading symbol"},timeframe:{type:be.STRING,description:'Timeframe (e.g., "1", "5", "15", "60", "240", "D")'}},required:["symbol"]}},a={name:"getIndicator",description:"Get a specific technical indicator value for a symbol.",parameters:{type:be.OBJECT,properties:{symbol:{type:be.STRING,description:"Trading symbol"},indicator:{type:be.STRING,description:'Indicator name: "rsi", "macd", "ema", "sma", "stoch"'},timeframe:{type:be.STRING,description:"Timeframe"}},required:["symbol","indicator"]}},l={name:"getTradingViewSummary",description:"Get TradingView buy/sell/neutral recommendation summary.",parameters:{type:be.OBJECT,properties:{symbol:{type:be.STRING,description:"Trading symbol"}},required:["symbol"]}},c={name:"getHLBalance",description:"Get the balance of the Hyperliquid Vault and positions.",parameters:{type:be.OBJECT,properties:{}}},u={name:"getHLPositions",description:"Get open positions in the Hyperliquid Vault.",parameters:{type:be.OBJECT,properties:{}}},h={name:"getHLMarketData",description:"Get market data for a Hyperliquid asset.",parameters:{type:be.OBJECT,properties:{coin:{type:be.STRING,description:'Asset symbol (e.g., "BTC", "ETH")'}},required:["coin"]}},m={name:"createHLOrder",description:"Place an order on Hyperliquid Testnet.",parameters:{type:be.OBJECT,properties:{coin:{type:be.STRING,description:"Asset symbol"},isBuy:{type:be.BOOLEAN,description:"True for LONG, False for SHORT"},size:{type:be.NUMBER,description:"Size of the order"},usdcAmount:{type:be.NUMBER,description:"Amount in USDC to spend"},orderType:{type:be.STRING,description:'Order type: "limit", "market"'},price:{type:be.NUMBER,description:"Limit price"},leverage:{type:be.NUMBER,description:"Leverage multiplier (1-50)"},stopLoss:{type:be.NUMBER,description:"Stop loss price"},takeProfit:{type:be.NUMBER,description:"Take profit price"},reduceOnly:{type:be.BOOLEAN,description:"True to only reduce existing position"}},required:["coin","isBuy","orderType"]}},g={name:"cancelHLOrder",description:"Cancel a specific order on Hyperliquid.",parameters:{type:be.OBJECT,properties:{coin:{type:be.STRING,description:"Asset symbol"},orderId:{type:be.NUMBER,description:"Order ID to cancel"}},required:["coin","orderId"]}},y={name:"updateHLLeverage",description:"Update leverage for a specific asset on Hyperliquid.",parameters:{type:be.OBJECT,properties:{coin:{type:be.STRING,description:"Asset symbol"},leverage:{type:be.NUMBER,description:"New leverage (1-50)"},isCross:{type:be.BOOLEAN,description:"True for cross margin"}},required:["coin","leverage","isCross"]}},v={name:"closeHLPosition",description:"Close an open position on Hyperliquid.",parameters:{type:be.OBJECT,properties:{coin:{type:be.STRING,description:"Asset symbol"},size:{type:be.NUMBER,description:"Optional: partial close size"},orderType:{type:be.STRING,description:'Order type: "market" or "limit"'},price:{type:be.NUMBER,description:"Price for limit orders"}},required:["coin","orderType"]}},b={name:"withdrawFromHL",description:"Execute a USDC withdrawal from Hyperliquid Testnet.",parameters:{type:be.OBJECT,properties:{amount:{type:be.NUMBER,description:"Amount of USDC to withdraw"}},required:["amount"]}},w={name:"getDealerTradeHistory",description:"Query the Hyperliquid Dealer's trade history and AI reasoning.",parameters:{type:be.OBJECT,properties:{coin:{type:be.STRING,description:"Optional: Filter by coin"},limit:{type:be.NUMBER,description:"Max records to return (default 10)"},includeReasoning:{type:be.BOOLEAN,description:"Include full AI reasoning"}}}},k={name:"scheduleTask",description:"Schedule a task to execute at a specific time or when a market condition is met.",parameters:{type:be.OBJECT,properties:{taskType:{type:be.STRING,description:"Type: SWAP, TRANSFER, ALERT, or HL_ORDER"},inputToken:{type:be.STRING,description:"For SWAP/TRANSFER: Input token"},outputToken:{type:be.STRING,description:"For SWAP: Output token"},amount:{type:be.NUMBER,description:"Amount to swap or transfer"},coin:{type:be.STRING,description:"For HL_ORDER: Asset symbol"},isBuy:{type:be.BOOLEAN,description:"For HL_ORDER: True for LONG"},size:{type:be.NUMBER,description:"For HL_ORDER: Order size"},orderType:{type:be.STRING,description:"For HL_ORDER: Order type"},price:{type:be.NUMBER,description:"For HL_ORDER: Limit price"},leverage:{type:be.NUMBER,description:"For HL_ORDER: Leverage"},stopLoss:{type:be.NUMBER,description:"For HL_ORDER: Stop loss"},takeProfit:{type:be.NUMBER,description:"For HL_ORDER: Take profit"},reduceOnly:{type:be.BOOLEAN,description:"For HL_ORDER: Reduce only"},delayMinutes:{type:be.NUMBER,description:"For time-based: Delay in minutes"},conditionIndicator:{type:be.STRING,description:"For condition-based: Indicator name"},conditionSymbol:{type:be.STRING,description:"For condition-based: Trading symbol"},conditionOperator:{type:be.STRING,description:"For condition-based: Comparison operator"},conditionValue:{type:be.NUMBER,description:"For condition-based: Threshold value"},conditionTimeframe:{type:be.STRING,description:"For condition-based: Timeframe"}},required:["taskType"]}};return[{functionDeclarations:[e,n,r,i,k,s,o,a,l,c,u,h,m,g,y,v,b,w]}]}async sendMessage(e,n,r,i){if(!this.client)throw new Error("Gemini not initialized. Please set API Key.");const s=this.client,o=this.modelName,a=()=>this.getTools();return Os.enqueue({priority:"HIGH",source:"operator",provider:"gemini",execute:async()=>{var m,g,y;const l=e.map(v=>({role:v.role==="model"?"model":"user",parts:[{text:v.content}]})),u=await s.chats.create({model:o,config:{systemInstruction:r,tools:i||a()},history:l}).sendMessage({message:n});let h="";if(u.candidates&&((g=(m=u.candidates[0])==null?void 0:m.content)!=null&&g.parts))for(const v of u.candidates[0].content.parts)v.text&&(h+=v.text);return{text:h,usageMetadata:u.usageMetadata?{promptTokenCount:u.usageMetadata.promptTokenCount||0,candidatesTokenCount:u.usageMetadata.candidatesTokenCount||0}:void 0,functionCalls:((y=u.functionCalls)==null?void 0:y.map(v=>({name:v.name,args:v.args})))||void 0}}})}async sendJsonAnalysis(e,n){if(!this.client)return console.warn("[GeminiProvider] Client not initialized"),null;const r=this.client,i=this.modelName;return Os.enqueue({priority:"NORMAL",source:"polymarketDealer",provider:"gemini",execute:async()=>{var l,c;const o=await r.chats.create({model:i,config:{systemInstruction:n,responseMimeType:"application/json"}}).sendMessage({message:e});let a="";if(o.candidates&&((c=(l=o.candidates[0])==null?void 0:l.content)!=null&&c.parts))for(const u of o.candidates[0].content.parts)u.text&&(a+=u.text);return a||null}})}async sendBatchAnalysis(e,n,r){if(!this.client)throw new Error("Gemini not initialized. Please set API Key.");if(r!=null&&r.aborted)throw new DOMException("Dealer cycle aborted","AbortError");const i=this.client,s=this.modelName,o=this.getBatchDealerSystemInstruction(),a=(u,h,m)=>this.normalizeDecisions(u,h,m),l=e.cycleSummary?`
[RECENT ACTIVITY CONTEXT]
${e.cycleSummary}
`:"",c=`
            [USER STRATEGY]
            ${n}
            ${l}
            [BATCH MARKET DATA]
            ${JSON.stringify(e)}

            Analyze all assets in the batch. Return a JSON Array of decisions.
        `;return Os.enqueue({priority:"NORMAL",source:"hyperliquidDealer",provider:"gemini",execute:async()=>{var v,b;if(r!=null&&r.aborted)throw new DOMException("Dealer cycle aborted","AbortError");const h=await i.chats.create({model:s,config:{systemInstruction:o,responseMimeType:"application/json"}}).sendMessage({message:c});if(r!=null&&r.aborted)throw new DOMException("Dealer cycle aborted","AbortError");let m="";if(h.candidates&&((b=(v=h.candidates[0])==null?void 0:v.content)!=null&&b.parts))for(const w of h.candidates[0].content.parts)w.text&&(m+=w.text);if(!m)return console.warn("[GeminiProvider] Empty response from batch analysis"),{decisions:[]};const g=m.replace(/```json/g,"").replace(/```/g,"").trim();let y;try{y=JSON.parse(g)}catch(w){return console.error("[GeminiProvider] Failed to parse batch response:",w),{decisions:[]}}return a(y,h.usageMetadata,e)}})}normalizeDecisions(e,n,r){let i=[],s;Array.isArray(e)?i=e:typeof e=="object"&&(e.decisions?i=e.decisions:i=[e],e.cycleSummary&&typeof e.cycleSummary=="string"&&(s=e.cycleSummary.slice(0,350)));const a=i.map(u=>u.action==="LONG"?{...u,action:"BUY"}:u.action==="SHORT"?{...u,action:"SELL"}:u.action==="WAIT"?{...u,action:"HOLD"}:u).filter(u=>{const h=typeof u.coin=="string"&&u.coin.length>0,m=["BUY","SELL","HOLD","CLOSE"].includes(u.action);return h&&m}),l=new Map,c={CLOSE:3,BUY:2,SELL:2,HOLD:1};for(const u of a){const h=u.coin.toUpperCase(),m=l.get(h);if(!m)l.set(h,u);else{const g=c[m.action]||0,y=c[u.action]||0;(y>g||y===g&&(u.confidence||0)>(m.confidence||0))&&l.set(h,u)}}return{decisions:Array.from(l.values()),cycleSummary:s}}getBatchDealerSystemInstruction(){return`
            You are Hyperliquid Dealer, an autonomous crypto trading engine.
            Your goal is to analyze specific assets and output a TRADING DECISION for EACH one.

            You will receive:
            1. A JSON Object containing an array of 'coins' with their Market Data (Price, Indicators) AND HISTORICAL SERIES.
            2. Portfolio Context (Balance, Open Positions, Risk Limits, userFees with makerFee/takerFee).
            3. PRE-CALCULATED DIVERGENCE SIGNALS: Each coin includes a 'divergences' array with detected divergence patterns.
            4. [RECENT ACTIVITY CONTEXT]: Summary of your previous analysis cycles (if available).

            You must return valid JSON with this EXACT structure:
            {
                "decisions": [
                    {
                        "coin": "Symbol analyzed",
                        "action": "BUY" | "SELL" | "HOLD" | "CLOSE",
                        "confidence": number (0.0 to 1.0),
                        "reason": "Format: [ACTION] Position Status + Explanation. Max 600 chars.",
                        "suggestedLeverage": number (1-50, optional),
                        "sizeUSDC": number (optional),
                        "orderType": "limit" | "market",
                        "price": number (for limit orders, optional),
                        "stopLoss": number (optional, ONLY for BUY/SELL actions),
                        "takeProfit": number (optional, ONLY for BUY/SELL actions)
                    }
                ],
                "cycleSummary": "Brief 1-2 sentence summary of this analysis cycle for context in the next cycle. Include: key market observations, actions taken, and any notable patterns. Max 300 chars."
            }

            CRITICAL RULES:
            1. ONLY output valid JSON with the structure above.
            2. Must return one decision object per coin provided in the decisions array.
            3. CHECK PORTFOLIO LIMITS: Do not suggest BUY if maxPositions is reached.
            4. CLOSE POSITIONS: Prioritize checking existing positions for exit signals.
            5. LEVERAGE CONSTRAINT: suggestedLeverage MUST NOT exceed portfolio.settings.maxLeverage.
            6. CYCLE SUMMARY: ALWAYS include a cycleSummary field with a brief context for the next cycle.
            
            REASONING FORMAT (CRITICAL - MUST FOLLOW):
            - Start with action: "LONG:", "SHORT:", "CLOSE:", or "WAIT:".
            - POSITION STATUS (MANDATORY - ALWAYS INCLUDE):
              - Check each coin's 'openPosition.hasPosition' field.
              - If hasPosition === false: MUST say "No position." at the START of your reason.
              - If hasPosition === true: MUST say "In [side] at $[entryPx], PnL: $[unrealizedPnl]" at the START.
            - ENTRY/SL/TP VALUES:
              - ONLY include Entry, SL, TP values for BUY or SELL actions (new trades).
              - For HOLD or CLOSE actions, do NOT include Entry/SL/TP values.
            - CRITICAL: If hasPosition is false, DO NOT report SL/TP values - there is no position to have SL/TP.
            - Examples:
              - HOLD with no position: "WAIT: No position. RSI neutral, waiting for signal."
              - BUY with no position: "LONG: No position. RSI divergence detected. Entry: $95000, SL: $93100, TP: $98800"
              - CLOSE with position: "CLOSE: In LONG at $95000, PnL: +$150. Take profit target reached."
        `}}class ult{constructor(){this.providerType="openai",this.apiKey="",this.modelName="gpt-4o-mini",this.baseUrl="https://api.openai.com/v1"}isInitialized(){return this.apiKey.length>0}initialize(e){this.apiKey=e}setModel(e){this.modelName=e}getModel(){return this.modelName}convertToolsToOpenAI(e){if(!e||e.length===0)return[];const n=[];for(const r of e)if(r.functionDeclarations)for(const i of r.functionDeclarations)n.push({type:"function",function:{name:i.name,description:i.description,parameters:this.convertGeminiParamsToOpenAI(i.parameters)}});return n}convertGeminiParamsToOpenAI(e){if(!e)return{type:"object",properties:{}};const n={},r=e.required||[];if(e.properties)for(const[i,s]of Object.entries(e.properties))n[i]={type:this.convertGeminiTypeToOpenAI(s.type),description:s.description||""};return{type:"object",properties:n,required:r}}convertGeminiTypeToOpenAI(e){return{STRING:"string",NUMBER:"number",BOOLEAN:"boolean",OBJECT:"object",ARRAY:"array"}[e]||"string"}async sendMessage(e,n,r,i){if(!this.isInitialized())throw new Error("OpenAI not initialized. Please set API Key.");return Os.enqueue({priority:"HIGH",source:"operator",provider:"openai",execute:async()=>{var g;const s=[{role:"system",content:r}];for(const y of e)s.push({role:y.role==="model"?"assistant":"user",content:y.content});s.push({role:"user",content:n});const o=this.convertToolsToOpenAI(i),a={model:this.modelName,messages:s};o.length>0&&(a.tools=o,a.tool_choice="auto");const l=await fetch(`${this.baseUrl}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify(a)});if(!l.ok){const y=await l.text();throw new Error(`OpenAI API error: ${l.status} ${y}`)}const c=await l.json(),u=(g=c.choices)==null?void 0:g[0],h=u==null?void 0:u.message,m=[];if(h!=null&&h.tool_calls)for(const y of h.tool_calls)y.type==="function"&&m.push({name:y.function.name,args:JSON.parse(y.function.arguments||"{}")});return{text:(h==null?void 0:h.content)||"",usageMetadata:c.usage?{promptTokenCount:c.usage.prompt_tokens||0,candidatesTokenCount:c.usage.completion_tokens||0}:void 0,functionCalls:m.length>0?m:void 0}}})}async sendJsonAnalysis(e,n){return this.isInitialized()?Os.enqueue({priority:"NORMAL",source:"polymarketDealer",provider:"openai",execute:async()=>{var s,o,a;const r=await fetch(`${this.baseUrl}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify({model:this.modelName,messages:[{role:"system",content:n},{role:"user",content:e}],response_format:{type:"json_object"}})});if(!r.ok){const l=await r.text();throw new Error(`OpenAI API error: ${r.status} ${l}`)}return((a=(o=(s=(await r.json()).choices)==null?void 0:s[0])==null?void 0:o.message)==null?void 0:a.content)||null}}):(console.warn("[OpenAIProvider] Client not initialized"),null)}async sendBatchAnalysis(e,n,r){if(!this.isInitialized())throw new Error("OpenAI not initialized. Please set API Key.");if(r!=null&&r.aborted)throw new DOMException("Dealer cycle aborted","AbortError");const i=this.getBatchDealerSystemInstruction(),s=`
            [USER STRATEGY]
            ${n}

            [BATCH MARKET DATA]
            ${JSON.stringify(e)}

            Analyze all assets in the batch. Return a JSON object with decisions array and cycleSummary.
        `;return Os.enqueue({priority:"NORMAL",source:"hyperliquidDealer",provider:"openai",execute:async()=>{var u,h,m,g,y;const o=await fetch(`${this.baseUrl}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify({model:this.modelName,messages:[{role:"system",content:i},{role:"user",content:s}],response_format:{type:"json_object"}}),signal:r});if(!o.ok){const v=await o.text();throw new Error(`OpenAI API error: ${o.status} ${v}`)}const a=await o.json(),l=(m=(h=(u=a.choices)==null?void 0:u[0])==null?void 0:h.message)==null?void 0:m.content;if(!l)throw new Error("Empty response from OpenAI");if(((y=(g=a.choices)==null?void 0:g[0])==null?void 0:y.finish_reason)==="length")throw new Error("Response truncated by length limit");let c;try{c=JSON.parse(l)}catch(v){throw new Error(`Failed to parse JSON response: ${v.message}`)}return this.normalizeDecisions(c)}})}normalizeDecisions(e){let n=[],r;typeof e=="object"&&e.decisions?(n=e.decisions,e.cycleSummary&&typeof e.cycleSummary=="string"&&(r=e.cycleSummary.slice(0,350))):Array.isArray(e)?n=e:typeof e=="object"&&(n=[e]);const s=n.map(l=>l.action==="LONG"?{...l,action:"BUY"}:l.action==="SHORT"?{...l,action:"SELL"}:l.action==="WAIT"?{...l,action:"HOLD"}:l).filter(l=>{const c=typeof l.coin=="string"&&l.coin.length>0,u=["BUY","SELL","HOLD","CLOSE"].includes(l.action);return c&&u}),o=new Map,a={CLOSE:3,BUY:2,SELL:2,HOLD:1};for(const l of s){const c=l.coin.toUpperCase(),u=o.get(c);if(!u)o.set(c,l);else{const h=a[u.action]||0,m=a[l.action]||0;(m>h||m===h&&(l.confidence||0)>(u.confidence||0))&&o.set(c,l)}}return{decisions:Array.from(o.values()),cycleSummary:r}}getBatchDealerSystemInstruction(){return`
            You are Hyperliquid Dealer, an autonomous crypto trading engine.
            Your goal is to analyze specific assets and output a TRADING DECISION for EACH one.

            RESPONSE FORMAT:
            You MUST return a JSON object with a "decisions" array:
            {
                "decisions": [
                    {
                        "coin": "BTC",
                        "action": "BUY" | "SELL" | "HOLD" | "CLOSE",
                        "confidence": 0.0 to 1.0,
                        "reason": "Format: [ACTION] Position Status + Explanation. See REASONING FORMAT below.",
                        "suggestedLeverage": 1-50,
                        "sizeUSDC": number,
                        "orderType": "limit" | "market",
                        "price": number (optional),
                        "stopLoss": number (optional, ONLY for BUY/SELL actions),
                        "takeProfit": number (optional, ONLY for BUY/SELL actions)
                    }
                ]
            }

            CRITICAL RULES:
            1. Return valid JSON with "decisions" array.
            2. One decision per coin provided.
            3. CHECK PORTFOLIO LIMITS: Do not suggest BUY if maxPositions is reached.
            4. LEVERAGE CONSTRAINT: suggestedLeverage MUST NOT exceed portfolio.settings.maxLeverage.
            5. Consider trading costs before recommending trades.
            
            REASONING FORMAT (CRITICAL - MUST FOLLOW):
            - Start with action: "LONG:", "SHORT:", "CLOSE:", or "WAIT:".
            - POSITION STATUS (MANDATORY - ALWAYS INCLUDE):
              - Check each coin's 'openPosition.hasPosition' field.
              - If hasPosition === false: MUST say "No position." at the START of your reason.
              - If hasPosition === true: MUST say "In [side] at $[entryPx], PnL: $[unrealizedPnl]" at the START.
            - ENTRY/SL/TP VALUES:
              - ONLY include Entry, SL, TP values for BUY or SELL actions (new trades).
              - For HOLD or CLOSE actions, do NOT include Entry/SL/TP values.
            - CRITICAL: If hasPosition is false, DO NOT report SL/TP values - there is no position to have SL/TP.
            - Examples:
              - HOLD: "WAIT: No position. RSI neutral, waiting for signal."
              - BUY: "LONG: No position. RSI divergence. Entry: $95000, SL: $93100, TP: $98800"
              - CLOSE: "CLOSE: In LONG at $95000, PnL: +$150. Take profit reached."
        `}}class dlt{constructor(){this.providerType="claude",this.apiKey="",this.modelName="claude-sonnet-4-20250514",this.baseUrl="https://api.anthropic.com/v1"}isInitialized(){return this.apiKey.length>0}initialize(e){this.apiKey=e}setModel(e){this.modelName=e}getModel(){return this.modelName}convertToolsToClaudeFormat(e){if(!e||e.length===0)return[];const n=[];for(const r of e)if(r.functionDeclarations)for(const i of r.functionDeclarations)n.push({name:i.name,description:i.description,input_schema:this.convertParamsToJsonSchema(i.parameters)});return n}convertParamsToJsonSchema(e){if(!e)return{type:"object",properties:{}};const n={},r=e.required||[];if(e.properties)for(const[i,s]of Object.entries(e.properties))n[i]={type:this.convertTypeToJsonSchema(s.type),description:s.description||""};return{type:"object",properties:n,required:r}}convertTypeToJsonSchema(e){return{STRING:"string",NUMBER:"number",BOOLEAN:"boolean",OBJECT:"object",ARRAY:"array"}[e]||"string"}async sendMessage(e,n,r,i){if(!this.isInitialized())throw new Error("Claude not initialized. Please set API Key.");return Os.enqueue({priority:"HIGH",source:"operator",provider:"claude",execute:async()=>{const s=[];for(const m of e)s.push({role:m.role==="model"?"assistant":"user",content:m.content});s.push({role:"user",content:n});const o=this.convertToolsToClaudeFormat(i),a={model:this.modelName,max_tokens:4096,system:r,messages:s};o.length>0&&(a.tools=o);const l=await fetch(`${this.baseUrl}/messages`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":this.apiKey,"anthropic-version":"2023-06-01","anthropic-dangerous-direct-browser-access":"true"},body:JSON.stringify(a)});if(!l.ok){const m=await l.text();throw new Error(`Claude API error: ${l.status} ${m}`)}const c=await l.json();let u="";const h=[];for(const m of c.content||[])m.type==="text"?u+=m.text:m.type==="tool_use"&&h.push({name:m.name,args:m.input||{}});return{text:u,usageMetadata:c.usage?{promptTokenCount:c.usage.input_tokens||0,candidatesTokenCount:c.usage.output_tokens||0}:void 0,functionCalls:h.length>0?h:void 0}}})}async sendJsonAnalysis(e,n){return this.isInitialized()?Os.enqueue({priority:"NORMAL",source:"polymarketDealer",provider:"claude",execute:async()=>{const r=`${n}

IMPORTANT: You MUST respond with ONLY valid JSON. No explanations, no markdown code blocks, just the raw JSON object.`,i=await fetch(`${this.baseUrl}/messages`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":this.apiKey,"anthropic-version":"2023-06-01","anthropic-dangerous-direct-browser-access":"true"},body:JSON.stringify({model:this.modelName,max_tokens:4096,system:r,messages:[{role:"user",content:e},{role:"assistant",content:"{"}]})});if(!i.ok){const a=await i.text();throw new Error(`Claude API error: ${i.status} ${a}`)}const s=await i.json();let o="";for(const a of s.content||[])a.type==="text"&&(o+=a.text);return"{"+o}}):(console.warn("[ClaudeProvider] Client not initialized"),null)}async sendBatchAnalysis(e,n,r){if(!this.isInitialized())throw new Error("Claude not initialized. Please set API Key.");if(r!=null&&r.aborted)throw new DOMException("Dealer cycle aborted","AbortError");const i=this.getBatchDealerSystemInstruction(),s=`
            [USER STRATEGY]
            ${n}

            [BATCH MARKET DATA]
            ${JSON.stringify(e)}

            Analyze all assets in the batch. Return a JSON object with a "decisions" array.
        `;return Os.enqueue({priority:"NORMAL",source:"hyperliquidDealer",provider:"claude",execute:async()=>{const o=await fetch(`${this.baseUrl}/messages`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":this.apiKey,"anthropic-version":"2023-06-01","anthropic-dangerous-direct-browser-access":"true"},body:JSON.stringify({model:this.modelName,max_tokens:4096,system:i,messages:[{role:"user",content:s},{role:"assistant",content:'{"decisions":'}]}),signal:r});if(!o.ok){const h=await o.text();throw new Error(`Claude API error: ${o.status} ${h}`)}const a=await o.json();let l="";for(const h of a.content||[])h.type==="text"&&(l+=h.text);if(!l)throw new Error("Empty response from Claude");const c='{"decisions":'+l;let u;try{u=JSON.parse(c)}catch{try{const h=l.replace(/```json/g,"").replace(/```/g,"").trim();u={decisions:JSON.parse("["+h)}}catch(h){throw new Error(`Failed to parse JSON response: ${h.message}`)}}return this.normalizeDecisions(u)}})}normalizeDecisions(e){let n=[],r;typeof e=="object"&&e.decisions?(n=e.decisions,e.cycleSummary&&typeof e.cycleSummary=="string"&&(r=e.cycleSummary.slice(0,350))):Array.isArray(e)?n=e:typeof e=="object"&&(n=[e]);const s=n.map(l=>l.action==="LONG"?{...l,action:"BUY"}:l.action==="SHORT"?{...l,action:"SELL"}:l.action==="WAIT"?{...l,action:"HOLD"}:l).filter(l=>{const c=typeof l.coin=="string"&&l.coin.length>0,u=["BUY","SELL","HOLD","CLOSE"].includes(l.action);return c&&u}),o=new Map,a={CLOSE:3,BUY:2,SELL:2,HOLD:1};for(const l of s){const c=l.coin.toUpperCase(),u=o.get(c);if(!u)o.set(c,l);else{const h=a[u.action]||0,m=a[l.action]||0;(m>h||m===h&&(l.confidence||0)>(u.confidence||0))&&o.set(c,l)}}return{decisions:Array.from(o.values()),cycleSummary:r}}getBatchDealerSystemInstruction(){return`You are Hyperliquid Dealer, an autonomous crypto trading engine.
Your goal is to analyze specific assets and output a TRADING DECISION for EACH one.

RESPONSE FORMAT:
You MUST respond with ONLY valid JSON. The response will be prefilled with '{"decisions":' so you should continue with the array.

Each decision in the array should have:
{
    "coin": "BTC",
    "action": "BUY" | "SELL" | "HOLD" | "CLOSE",
    "confidence": 0.0 to 1.0,
    "reason": "Format: [ACTION] Position Status + Explanation. See REASONING FORMAT below.",
    "suggestedLeverage": 1-50,
    "sizeUSDC": number,
    "orderType": "limit" | "market",
    "price": number (optional),
    "stopLoss": number (optional, ONLY for BUY/SELL actions),
    "takeProfit": number (optional, ONLY for BUY/SELL actions)
}

CRITICAL RULES:
1. Continue the JSON array after the prefill.
2. One decision per coin provided.
3. CHECK PORTFOLIO LIMITS: Do not suggest BUY if maxPositions is reached.
4. LEVERAGE CONSTRAINT: suggestedLeverage MUST NOT exceed portfolio.settings.maxLeverage.
5. Consider trading costs before recommending trades.

REASONING FORMAT (CRITICAL - MUST FOLLOW):
- Start with action: "LONG:", "SHORT:", "CLOSE:", or "WAIT:".
- POSITION STATUS (MANDATORY - ALWAYS INCLUDE):
  - Check each coin's 'openPosition.hasPosition' field.
  - If hasPosition === false: MUST say "No position." at the START of your reason.
  - If hasPosition === true: MUST say "In [side] at $[entryPx], PnL: $[unrealizedPnl]" at the START.
- ENTRY/SL/TP VALUES:
  - ONLY include Entry, SL, TP values for BUY or SELL actions (new trades).
  - For HOLD or CLOSE actions, do NOT include Entry/SL/TP values.
- CRITICAL: If hasPosition is false, DO NOT report SL/TP values - there is no position to have SL/TP.
- Examples:
  - HOLD: "WAIT: No position. RSI neutral, waiting for signal."
  - BUY: "LONG: No position. RSI divergence. Entry: $95000, SL: $93100, TP: $98800"
  - CLOSE: "CLOSE: In LONG at $95000, PnL: +$150. Take profit reached."`}}class flt{constructor(){this.providers=new Map,this.providers.set("gemini",new clt),this.providers.set("openai",new ult),this.providers.set("claude",new dlt),this.initializeFromConfig(),Fn.subscribe(()=>{this.initializeFromConfig()})}initializeFromConfig(){const e=Fn.getSnapshot();for(const[n,r]of Object.entries(e.credentials))r.isConfigured&&r.apiKey&&this.initializeProvider(n,r.apiKey);for(const[n,r]of Object.entries(e.componentConfigs)){const i=this.getProvider(r.providerType);i&&"setModel"in i&&i.setModel(r.modelId)}}getProvider(e){return this.providers.get(e)||null}initializeProvider(e,n){const r=this.providers.get(e);r&&(r.initialize(n),console.log(`[ProviderFactory] Initialized ${e} provider`))}getProviderForComponent(e){const r=Fn.getSnapshot().componentConfigs[e];if(!r)return console.warn(`[ProviderFactory] No config found for component: ${e}`),null;const i=this.providers.get(r.providerType);if(!i)return console.warn(`[ProviderFactory] Provider ${r.providerType} not found`),null;if(!i.isInitialized()){const s=Fn.getApiKey(r.providerType);if(s)i.initialize(s);else return console.warn(`[ProviderFactory] Provider ${r.providerType} not initialized (no API key)`),null}return"setModel"in i&&i.setModel(r.modelId),i}getModelForComponent(e){var r;return((r=Fn.getSnapshot().componentConfigs[e])==null?void 0:r.modelId)||""}isComponentReady(e){const n=this.getProviderForComponent(e);return n!==null&&n.isInitialized()}getAvailableProviders(){return Array.from(this.providers.keys())}getModelsForProvider(e){return py[e]||[]}validateConfiguration(){const e=[],n=["operator","hyperliquidDealer","polymarketDealer"];for(const r of n)this.isComponentReady(r)||e.push(r);return{valid:e.length===0,missing:e}}}const ag=new flt;function hlt(){const t={name:"searchLiquidityPools",description:`Search and filter liquidity pools on Meteora and Raydium (Solana DEVNET).
        
        Supports filtering by:
        - Token pair (e.g., SOL/USDC)
        - Protocol (meteora, raydium, or both)
        - Minimum TVL
        - Minimum volume (with timeframe)
        - Minimum APY
        - Sorting by tvl, volume, apy, or fee
        
        IMPORTANT: If user doesn't specify protocol, ASK which they prefer.`,parameters:{type:be.OBJECT,properties:{tokenA:{type:be.STRING,description:'First token symbol (e.g., "SOL")'},tokenB:{type:be.STRING,description:'Second token symbol (e.g., "USDC")'},protocol:{type:be.STRING,description:'Filter by protocol: "meteora", "raydium", or empty for both'},minTVL:{type:be.NUMBER,description:"Minimum TVL in USD"},minVolume:{type:be.NUMBER,description:"Minimum volume in USD"},volumeTimeframe:{type:be.STRING,description:'Timeframe for volume: "5m", "1h", "24h", "7d"'},minAPY:{type:be.NUMBER,description:"Minimum APY percentage"},sortBy:{type:be.STRING,description:'Sort by: "tvl", "volume", "apy"'},limit:{type:be.NUMBER,description:"Maximum results (default 10)"}}}},e={name:"getPoolDetails",description:"Get detailed information about a specific liquidity pool.",parameters:{type:be.OBJECT,properties:{poolAddress:{type:be.STRING,description:"Pool address or ID"}},required:["poolAddress"]}},n={name:"getTopLiquidityPools",description:`Get ranked list of top liquidity pools by volume, APY, or TVL.
        
        Examples:
        - "pools com maior volume em 5 minutos"  criteria: "volume", volumeTimeframe: "5m"
        - "melhor rentabilidade com TVL > $5000"  criteria: "apy", minTVL: 5000`,parameters:{type:be.OBJECT,properties:{criteria:{type:be.STRING,description:'Ranking criteria: "volume", "apy", or "tvl"'},volumeTimeframe:{type:be.STRING,description:'Timeframe for volume criteria: "5m", "1h", "24h", "7d"'},minTVL:{type:be.NUMBER,description:"Minimum TVL filter in USD"},protocol:{type:be.STRING,description:'Filter by protocol: "meteora", "raydium", or empty for all'},limit:{type:be.NUMBER,description:"Number of results (default 10)"}},required:["criteria"]}},r={name:"getTopVolatilityPools",description:`Get ranked list of liquidity pools by volatility (highest first).
        
        Use this when user asks for:
        - "pools com maior volatilidade"
        - "most volatile pools"
        - "quais pools esto mais volteis?"
        - "ranking de volatilidade"
        - "pools mais arriscadas"
        
        Returns pools sorted by daily volatility percentage, including price changes and confidence levels.`,parameters:{type:be.OBJECT,properties:{limit:{type:be.NUMBER,description:"Number of results (default 10)"},days:{type:be.NUMBER,description:"Days for volatility calculation (default 7)"},minTVL:{type:be.NUMBER,description:"Minimum TVL in USD (optional filter)"},protocol:{type:be.STRING,description:'Filter by protocol: "meteora" or "raydium" (optional)'}}}},i={name:"compareLiquidityPools",description:"Compare multiple pools side by side or compare protocols for a token pair.",parameters:{type:be.OBJECT,properties:{poolAddresses:{type:be.ARRAY,items:{type:be.STRING},description:"Array of pool addresses to compare"},tokenPair:{type:be.STRING,description:'Token pair to compare across protocols (e.g., "SOL/USDC")'}}}},s={name:"getPoolHistory",description:"Get historical data for a pool (TVL, volume, APY over time).",parameters:{type:be.OBJECT,properties:{poolAddress:{type:be.STRING,description:"Pool address"},metric:{type:be.STRING,description:'Metric: "tvl", "volume", or "apy"'},days:{type:be.NUMBER,description:"Number of days of history (default 7)"}},required:["poolAddress","metric"]}},o={name:"getLPPositions",description:"Get all liquidity positions for the connected wallet across Meteora and Raydium.",parameters:{type:be.OBJECT,properties:{protocol:{type:be.STRING,description:'Optional: filter by "meteora" or "raydium"'}}}},a={name:"getLPPositionDetails",description:"Get detailed information about a specific LP position.",parameters:{type:be.OBJECT,properties:{positionAddress:{type:be.STRING,description:"Position address or NFT mint"}},required:["positionAddress"]}},l={name:"getUnclaimedLPRewards",description:"Get unclaimed fees and rewards from LP positions.",parameters:{type:be.OBJECT,properties:{positionAddress:{type:be.STRING,description:"Optional: specific position. If empty, shows all."}}}},c={name:"estimateLPPositionPnL",description:"Calculate profit/loss for an LP position including impermanent loss and fees earned.",parameters:{type:be.OBJECT,properties:{positionAddress:{type:be.STRING,description:"Position address"}},required:["positionAddress"]}},u={name:"addLiquidity",description:`Add liquidity to a pool on Meteora or Raydium.
        
        BEFORE EXECUTING:
        1. Confirm pool address and protocol
        2. Confirm token amounts
        3. For concentrated liquidity (DLMM/CLMM), confirm price range
        4. Show simulation result first
        5. Get user confirmation
        
        IMPORTANT: If protocol not specified, ASK the user first.`,parameters:{type:be.OBJECT,properties:{poolAddress:{type:be.STRING,description:"Pool address"},amountA:{type:be.NUMBER,description:"Amount of first token"},amountB:{type:be.NUMBER,description:"Amount of second token"},priceMin:{type:be.NUMBER,description:"Minimum price for range (DLMM/CLMM)"},priceMax:{type:be.NUMBER,description:"Maximum price for range (DLMM/CLMM)"},slippageBps:{type:be.NUMBER,description:"Slippage tolerance in basis points (default 50)"}},required:["poolAddress","amountA","amountB"]}},h={name:"removeLiquidity",description:`Remove liquidity from an LP position.
        
        BEFORE EXECUTING:
        1. Show current position value
        2. Confirm removal percentage
        3. Get user confirmation`,parameters:{type:be.OBJECT,properties:{positionAddress:{type:be.STRING,description:"Position address"},percentage:{type:be.NUMBER,description:"Percentage to remove (1-100)"},slippageBps:{type:be.NUMBER,description:"Slippage tolerance in basis points"}},required:["positionAddress","percentage"]}},m={name:"claimLPFees",description:"Claim accumulated trading fees from an LP position.",parameters:{type:be.OBJECT,properties:{positionAddress:{type:be.STRING,description:"Position address"}},required:["positionAddress"]}},g={name:"claimLPRewards",description:"Claim farming/staking rewards from an LP position.",parameters:{type:be.OBJECT,properties:{positionAddress:{type:be.STRING,description:"Position address"}},required:["positionAddress"]}},y={name:"rebalanceLPPosition",description:"Rebalance an LP position to a new price range (closes and reopens with new range).",parameters:{type:be.OBJECT,properties:{positionAddress:{type:be.STRING,description:"Current position address"},newPriceMin:{type:be.NUMBER,description:"New minimum price"},newPriceMax:{type:be.NUMBER,description:"New maximum price"}},required:["positionAddress","newPriceMin","newPriceMax"]}},v={name:"simulateAddLiquidity",description:"Simulate adding liquidity without executing. Shows expected outcome, share of pool, and price impact.",parameters:{type:be.OBJECT,properties:{poolAddress:{type:be.STRING,description:"Pool address"},amountA:{type:be.NUMBER,description:"Amount of first token"},amountB:{type:be.NUMBER,description:"Amount of second token"},priceMin:{type:be.NUMBER,description:"Min price for range (optional)"},priceMax:{type:be.NUMBER,description:"Max price for range (optional)"}},required:["poolAddress","amountA","amountB"]}},b={name:"estimateImpermanentLoss",description:"Calculate potential impermanent loss for a pool based on price change scenarios.",parameters:{type:be.OBJECT,properties:{poolAddress:{type:be.STRING,description:"Pool address"},priceChangePercent:{type:be.NUMBER,description:"Expected price change in percentage (e.g., 10 for +10%, -20 for -20%)"}},required:["poolAddress","priceChangePercent"]}},w={name:"calculateOptimalPriceRange",description:"Suggest an optimal price range for concentrated liquidity based on volatility and risk level.",parameters:{type:be.OBJECT,properties:{poolAddress:{type:be.STRING,description:"Pool address"},riskLevel:{type:be.STRING,description:'Risk tolerance: "conservative", "moderate", or "aggressive"'}},required:["poolAddress","riskLevel"]}},k={name:"getLPSwapQuote",description:"Get a swap quote through liquidity pools.",parameters:{type:be.OBJECT,properties:{inputToken:{type:be.STRING,description:"Input token symbol or mint"},outputToken:{type:be.STRING,description:"Output token symbol or mint"},amount:{type:be.NUMBER,description:"Amount to swap"},slippageBps:{type:be.NUMBER,description:"Slippage tolerance in basis points"}},required:["inputToken","outputToken","amount"]}},N={name:"createLiquidityPool",description:`Create a new liquidity pool on Meteora or Raydium.
        
        REQUIRES CONFIRMATION:
        1. Protocol (Meteora DLMM or Raydium CLMM/CPMM)
        2. Token pair
        3. Fee tier
        4. Initial price
        5. Initial liquidity amounts`,parameters:{type:be.OBJECT,properties:{protocol:{type:be.STRING,description:'Protocol: "meteora_dlmm", "raydium_clmm", or "raydium_cpmm"'},tokenA:{type:be.STRING,description:"First token mint address"},tokenB:{type:be.STRING,description:"Second token mint address"},feeBps:{type:be.NUMBER,description:"Fee in basis points (e.g., 25 = 0.25%)"},initialPrice:{type:be.NUMBER,description:"Initial price of tokenA in terms of tokenB"},initialLiquidityA:{type:be.NUMBER,description:"Optional: initial amount of tokenA"},initialLiquidityB:{type:be.NUMBER,description:"Optional: initial amount of tokenB"}},required:["protocol","tokenA","tokenB","feeBps","initialPrice"]}},R={name:"estimatePoolCreationCost",description:"Estimate the cost (in SOL) to create a new liquidity pool.",parameters:{type:be.OBJECT,properties:{protocol:{type:be.STRING,description:'Protocol: "meteora_dlmm", "raydium_clmm", or "raydium_cpmm"'}},required:["protocol"]}};return[t,e,n,r,i,s,o,a,l,c,u,h,m,g,y,v,b,w,k,N,R]}class plt{constructor(){this.client=null,this.modelName="gemini-2.5-flash",this.initFromConfig()}initFromConfig(){var i,s;const e=Fn.getApiKey("gemini"),n=(s=(i=window.process)==null?void 0:i.env)==null?void 0:s.GEMINI_API_KEY,r=e||n;r&&this.initialize(r)}initialize(e){this.client=new ape({apiKey:e})}setModel(e){this.modelName=e}getModel(){return this.modelName}setApiKey(e){Fn.setApiKey("gemini",e),this.initialize(e)}getApiKey(){return Fn.getApiKey("gemini")}clearApiKey(){Fn.clearApiKey("gemini"),this.client=null}isInitialized(){return this.client!==null}getTools(){const e={name:"getVaultBalance",description:"Get the balance of the internal Vault Wallet. Can show all balances or a specific token balance. If no token is specified, ask the user if they want to see all balances or a specific token.",parameters:{type:be.OBJECT,properties:{token:{type:be.STRING,description:"Optional: Symbol (e.g., SOL, USDC) or Mint Address of specific token to check. If not provided, show all balances."}}}},n={name:"executeSwap",description:"Execute a token swap on Raydium Devnet. If the token symbol is not known (not SOL/USDC/RAY), you MUST ask the user for the Mint Address.",parameters:{type:be.OBJECT,properties:{inputToken:{type:be.STRING,description:"Symbol (e.g., SOL) or Mint Address of token to sell"},outputToken:{type:be.STRING,description:"Symbol (e.g., RAY) or Mint Address of token to buy"},amount:{type:be.NUMBER,description:"Amount of input token to swap"}},required:["inputToken","outputToken","amount"]}},r={name:"withdrawSol",description:"Transfer SOL from the internal Vault to the connected Owner Wallet.",parameters:{type:be.OBJECT,properties:{amount:{type:be.NUMBER,description:"Amount of SOL to transfer"}},required:["amount"]}},i={name:"scheduleTask",description:`Schedule a task (swap, transfer, alert, or Hyperliquid order) to execute either at a specific time OR when a market condition is met.
      
      CRITICAL: You MUST provide ALL required parameters. If ANY information is missing, ask the user for it instead of calling this tool.
      
      For TIME-BASED tasks: provide 'delayMinutes'
      For CONDITION-BASED tasks: provide 'conditionIndicator', 'conditionSymbol', 'conditionOperator', 'conditionValue', and 'conditionTimeframe'.
      
      IMPORTANT: 'conditionTimeframe' is REQUIRED for condition-based tasks. If the user does not specify it (e.g., "1h", "4h", "1d"), you MUST ASK them for it. DO NOT DEFAULT TO 'D'.

      Examples:
      - Time-based: delayMinutes=5
      - Condition (SWAP): taskType="SWAP", inputToken="SOL", outputToken="USDC", amount=0.1, conditionIndicator="rsi", conditionSymbol="BTCUSDT", conditionOperator="<", conditionValue=30, conditionTimeframe="D"
      - Condition (HL_ORDER): taskType="HL_ORDER", coin="BTC", isBuy=true, size=0.001, orderType="limit", price=90000, leverage=10, stopLoss=88000, takeProfit=99000, conditionIndicator="rsi", conditionSymbol="BTCUSDT", conditionOperator="<", conditionValue=30, conditionTimeframe="D"`,parameters:{type:be.OBJECT,properties:{taskType:{type:be.STRING,description:"Type of task: SWAP, TRANSFER, ALERT, or HL_ORDER (Hyperliquid order)"},inputToken:{type:be.STRING,description:"For SWAP: Input token symbol or mint address. For TRANSFER: Token to transfer. Not used for ALERT or HL_ORDER."},outputToken:{type:be.STRING,description:"For SWAP: Output token symbol or mint address. Not used for other task types."},amount:{type:be.NUMBER,description:"Amount to swap or transfer. Not used for ALERT or HL_ORDER."},coin:{type:be.STRING,description:'For HL_ORDER: Asset symbol (e.g., "BTC", "ETH", "SOL"). Required for HL_ORDER.'},isBuy:{type:be.BOOLEAN,description:"For HL_ORDER: True for LONG/BUY, False for SHORT/SELL. Required for HL_ORDER."},size:{type:be.NUMBER,description:"For HL_ORDER: Size of the order. Required for HL_ORDER."},orderType:{type:be.STRING,description:'For HL_ORDER: Order type ("limit", "market", "ioc", "alo"). Ask user if not specified.'},price:{type:be.NUMBER,description:"For HL_ORDER: Limit price. Required for LIMIT orders, ignored for MARKET."},leverage:{type:be.NUMBER,description:"For HL_ORDER: Leverage multiplier (1-50). Ask user, default 1x if not specified."},stopLoss:{type:be.NUMBER,description:"For HL_ORDER: Optional stop loss price. Ask user if they want to set one."},takeProfit:{type:be.NUMBER,description:"For HL_ORDER: Optional take profit price. Ask user if they want to set one."},reduceOnly:{type:be.BOOLEAN,description:"For HL_ORDER: True to only reduce existing position. Default false."},delayMinutes:{type:be.NUMBER,description:"For time-based: Number of minutes to wait before executing. Leave empty for condition-based."},conditionIndicator:{type:be.STRING,description:"For condition-based: Indicator name (rsi, macd, ema, sma, stoch, price). Required for condition-based tasks."},conditionSymbol:{type:be.STRING,description:"For condition-based: Trading symbol (e.g., BTCUSDT, SOLUSDT). Required for condition-based tasks."},conditionOperator:{type:be.STRING,description:"For condition-based: Comparison operator (<, >, <=, >=, ==). Required for condition-based tasks."},conditionValue:{type:be.NUMBER,description:"For condition-based: Threshold value to compare against. Required for condition-based tasks."},conditionTimeframe:{type:be.STRING,description:"For condition-based: Timeframe (1, 5, 15, 60, 240, D, W). REQUIRED. If missing, ask user."}},required:["taskType"]}},s={name:"transferToken",description:"Transfer SPL tokens or NFTs from the Vault to the Owner Wallet. You can ONLY send to the Owner, not to any other address.",parameters:{type:be.OBJECT,properties:{tokenMint:{type:be.STRING,description:"Mint address of the token to transfer"},amount:{type:be.NUMBER,description:"Amount of tokens to transfer (in human-readable units, not raw)"}},required:["tokenMint","amount"]}},o={name:"getMarketPrice",description:"Get the current market price, exchange, and last update time for a given symbol.",parameters:{type:be.OBJECT,properties:{symbol:{type:be.STRING,description:'Trading symbol (e.g., "BTCUSDT", "SOLUSDT")'}},required:["symbol"]}},a={name:"getOHLCV",description:"Get OHLCV (Open, High, Low, Close, Volume) candlestick data for a symbol.",parameters:{type:be.OBJECT,properties:{symbol:{type:be.STRING,description:'Trading symbol (e.g., "BTCUSDT", "SOLUSDT")'},timeframe:{type:be.STRING,description:'Timeframe (e.g., "1", "5", "15", "60", "240", "D"). Default is "60".'}},required:["symbol"]}},l={name:"getIndicator",description:"Get a specific technical indicator value for a symbol.",parameters:{type:be.OBJECT,properties:{symbol:{type:be.STRING,description:'Trading symbol (e.g., "BTCUSDT", "SOLUSDT")'},indicator:{type:be.STRING,description:'Indicator name: "rsi", "macd", "ema", "sma", "stoch"'},timeframe:{type:be.STRING,description:'Timeframe (e.g., "1", "5", "15", "60", "240", "D"). Default is "60".'}},required:["symbol","indicator"]}},c={name:"getTradingViewSummary",description:"Get the TradingView buy/sell/neutral recommendation summary for a symbol.",parameters:{type:be.OBJECT,properties:{symbol:{type:be.STRING,description:'Trading symbol (e.g., "BTCUSDT", "SOLUSDT")'}},required:["symbol"]}},u={name:"getHLBalance",description:"Get the balance of the Hyperliquid Vault (USDC) and positions.",parameters:{type:be.OBJECT,properties:{}}},h={name:"getHLPositions",description:"Get open positions in the Hyperliquid Vault.",parameters:{type:be.OBJECT,properties:{}}},m={name:"getHLMarketData",description:"Get market data (price, orderbook) for a Hyperliquid asset.",parameters:{type:be.OBJECT,properties:{coin:{type:be.STRING,description:'Asset symbol (e.g., "BTC", "ETH", "SOL")'}},required:["coin"]}},g={name:"createHLOrder",description:`Place an order on Hyperliquid Testnet. 
      
      **USDC-BASED ORDERS:**
      If user says "comprar X USDC de COIN", provide usdcAmount=X and the system will automatically calculate the size.
      
      CRITICAL: You MUST ask the user for ALL required information before calling this tool:
      1. Coin (asset symbol)
      2. Direction (LONG/BUY or SHORT/SELL)
      3. Size (amount) OR usdcAmount (USDC to spend)
      4. Order Type (LIMIT or MARKET)
      5. Price (required for LIMIT orders)
      6. Leverage (1-50x, default 1x if not specified)
      7. Stop Loss (optional)
      8. Take Profit (optional)
      
      Minimum order value: $10 USD`,parameters:{type:be.OBJECT,properties:{coin:{type:be.STRING,description:'Asset symbol (e.g., "BTC", "ETH", "SOL", "HYPE")'},isBuy:{type:be.BOOLEAN,description:"True for LONG/BUY, False for SHORT/SELL"},size:{type:be.NUMBER,description:"Size of the order in token units. Leave empty if usdcAmount is provided."},usdcAmount:{type:be.NUMBER,description:"Amount in USDC to spend (for buys) or receive (for sells). If provided, size will be auto-calculated."},orderType:{type:be.STRING,description:'Order type: "limit", "market", "ioc", "alo". Ask user if not specified.'},price:{type:be.NUMBER,description:"Limit price. Required for LIMIT orders, ignored for MARKET."},leverage:{type:be.NUMBER,description:"Leverage multiplier (1-50). Ask user, default 1x if not specified."},stopLoss:{type:be.NUMBER,description:"Optional stop loss price. Ask user if they want to set one."},takeProfit:{type:be.NUMBER,description:"Optional take profit price. Ask user if they want to set one."},reduceOnly:{type:be.BOOLEAN,description:"True to only reduce existing position. Default false."}},required:["coin","isBuy","orderType"]}},y={name:"cancelHLOrder",description:"Cancel a specific order on Hyperliquid.",parameters:{type:be.OBJECT,properties:{coin:{type:be.STRING,description:"Asset symbol"},orderId:{type:be.NUMBER,description:"Order ID to cancel"}},required:["coin","orderId"]}},v={name:"updateHLLeverage",description:"Update leverage for a specific asset on Hyperliquid.",parameters:{type:be.OBJECT,properties:{coin:{type:be.STRING,description:"Asset symbol"},leverage:{type:be.NUMBER,description:"New leverage (1-50)"},isCross:{type:be.BOOLEAN,description:"True for cross margin, false for isolated"}},required:["coin","leverage","isCross"]}},b={name:"closeHLPosition",description:"Close an open position on Hyperliquid.",parameters:{type:be.OBJECT,properties:{coin:{type:be.STRING,description:"Asset symbol"},size:{type:be.NUMBER,description:"Optional: partial close size. If not provided, closes entire position."},orderType:{type:be.STRING,description:'Order type: "market" (immediate) or "limit"'},price:{type:be.NUMBER,description:"Price for limit orders"}},required:["coin","orderType"]}},w={name:"withdrawFromHL",description:`Execute a USDC withdrawal from Hyperliquid Testnet Vault to the Owner's wallet.
      
      This tool EXECUTES the withdrawal immediately. Only call this when the user explicitly wants to withdraw/send/transfer USDC from Hyperliquid.
      
      Requirements:
      - Amount must be > $1 (to cover the $1 USDC withdrawal fee)
      - Vault must be unlocked
      - Owner wallet must be connected
      
      Network: Hyperliquid Testnet
      Fee: $1 USDC (deducted from withdrawal amount)
      Processing time: ~5 minutes`,parameters:{type:be.OBJECT,properties:{amount:{type:be.NUMBER,description:"Amount of USDC to withdraw (must be > $1 to cover fee)"}},required:["amount"]}},k={name:"getDealerTradeHistory",description:`Query the Hyperliquid Dealer's trade operation history and AI reasoning.
      
      Use this tool when users ask about:
      - Why a specific position was opened/closed
      - The reasoning behind Dealer trades
      - Details about past or current operations
      - What the Dealer did or is doing
      
      Returns:
      - Operation records with coin, action, price, size, PnL
      - Full AI reasoning and confidence for each trade
      - Recent activity logs`,parameters:{type:be.OBJECT,properties:{coin:{type:be.STRING,description:'Optional: Filter by specific coin (e.g., "BTC", "ETH"). If not provided, returns all operations.'},limit:{type:be.NUMBER,description:"Optional: Maximum number of records to return (default 10, max 50)"},includeReasoning:{type:be.BOOLEAN,description:"Optional: Whether to include full AI reasoning (default true). Set to false for basic info only."}}}},N=hlt();return[{functionDeclarations:[e,n,r,s,i,o,a,l,c,u,h,m,g,y,v,b,w,k,...N]}]}async sendMessage(e,n,r){if(!this.client)throw new Error("AI Agent not initialized. Please set API Key.");const i=this.client,s=this.modelName,o=()=>this.getTools(),a=l=>{l.usageMetadata&&Ps.addRecord({source:"MANAGER",operation:"QUERY",inputTokens:l.usageMetadata.promptTokenCount||0,outputTokens:l.usageMetadata.candidatesTokenCount||0,model:s})};return Os.enqueue({priority:"HIGH",source:"operator",provider:"gemini",execute:async()=>{const l=e.map(h=>({role:h.role==="model"?"model":"user",parts:[{text:h.content}]})),u=await i.chats.create({model:s,config:{systemInstruction:r,tools:o()},history:l}).sendMessage({message:n});return a(u),u}})}async getDealerAnalysis(e,n){if(!this.client)throw new Error("AI Agent not initialized.");const r=this.client,i=this.modelName,s=`
      You are Hyperliquid Dealer, an autonomous crypto trading engine.
      Your goal is to analyze provided market data and output a TRADING DECISION based strictly on the user's Strategy and Portfolio Constraints.

      You will receive:
      1. Market Data (Prices, Indicators, Orderbook)
      2. Portfolio Context (Current Balance, Open Positions, PnL, Risk Limits)
      3. TRADING COSTS (Maker/Taker Fees, Funding Rate, Breakeven Prices)

      You must return valid JSON with this schema:
      {
        "action": "BUY" | "SELL" | "HOLD" | "CLOSE",
        "confidence": number (0.0 to 1.0),
        "reason": "Detailed explanation citing technicals, fees, and costs. Include Entry Price, Stop Loss, and Take Profit values if applicable. (Max 600 characters)",
        "coin": "Symbol analyzed",
        "suggestedLeverage": number (1-50, optional, MUST NOT exceed portfolio.settings.maxLeverage),
        "sizeUSDC": number (optional, calculate based on bankroll settings),
        "orderType": "limit" | "market",
        "price": number (for limit orders, optional),
        "stopLoss": number (optional),
        "takeProfit": number (optional)
      }

      CRITICAL RULES:
      1. ONLY output the JSON decision. No markdown blocks, no fluff.
      2. If data is insufficient or unclear, action="HOLD".
      3. CHECK PORTFOLIO LIMITS: Do not buy if 'maxPositions' is reached.
      4. CLOSE POSITIONS: If an open position hits target or stop loss criteria in your analysis, output "CLOSE".
      5. BANKROLL: Using 'manualBankroll' or 'availableBalance' from context, suggest a safe 'sizeUSDC' for new trades.
      6. REASONING FORMAT: Start 'reason' with action: "LONG:", "SHORT:", "CLOSE:", or "WAIT:".
      7. LEVERAGE CONSTRAINT: If suggesting leverage, 'suggestedLeverage' MUST NOT exceed 'portfolio.settings.maxLeverage'. This is a hard limit set by the user.
      
      TRADING COSTS AWARENESS (CRITICAL FOR PROFIT CALCULATION):
      8. FEE CONSIDERATION: Context includes 'tradingCosts.makerFee' and 'tradingCosts.takerFee' (as decimals, e.g., 0.0005 = 0.05%).
         - Total round-trip cost = (takerFee * 2) for market orders or (makerFee * 2) for limit orders.
         - Only enter trades where expected price movement > total round-trip cost.
      9. FUNDING RATE: Context includes 'tradingCosts.fundingRate' (8h rate) and 'estimatedDailyHoldingCost'.
         - Positive funding: Longs pay shorts.
         - Negative funding: Shorts pay longs.
         - Factor funding into holding decisions for swing trades.
      10. BREAKEVEN PRICES: If 'portfolio.positionBreakevens' exists, it contains:
         - breakevenPrice: Price needed to cover entry/exit fees
         - minProfitPrice: Price needed for 1% profit after costs
         - Use these to decide when to CLOSE positions profitably.
      11. PROFIT THRESHOLD: Only suggest trades where expected move > 2x trading costs (to be safe).
    `;return Os.enqueue({priority:"HIGH",source:"hyperliquidDealer",provider:"gemini",execute:async()=>{var u,h;const o=r.chats.create({model:i,config:{systemInstruction:s,responseMimeType:"application/json"}}),a=`
            [USER STRATEGY]
            ${n}

            [MARKET CONTEXT]
            ${JSON.stringify(e)}
        `,l=await o.sendMessage({message:a});let c="";if(l.candidates&&((h=(u=l.candidates[0])==null?void 0:u.content)!=null&&h.parts))for(const m of l.candidates[0].content.parts)m.text&&(c+=m.text);try{const m=c.replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(m)}catch{return console.error("Failed to parse Dealer JSON response:",c),{action:"HOLD",reason:"Failed to parse AI response"}}}})}async getBatchDealerAnalysis(e,n){var o,a;if(!this.client){console.warn("[AIService] Client not initialized. Attempting lazy init...");const l=Fn.getApiKey("gemini"),c=(a=(o=window.process)==null?void 0:o.env)==null?void 0:a.GEMINI_API_KEY,u=l||c;if(u)this.initialize(u),console.log("[AIService] Lazy init successful.");else throw new Error("AI Agent not initialized and no API Key found. Please configure your API key in Settings.")}const r=this.client,i=this.modelName,s=`
      You are Hyperliquid Dealer, an autonomous crypto trading engine.
      Your goal is to analyze specific assets and output a TRADING DECISION for EACH one.

      You will receive:
      1. A JSON Object containing an array of 'coins' with their Market Data (Price, Indicators) AND HISTORICAL SERIES.
      2. Portfolio Context (Balance, Open Positions, Risk Limits, userFees with makerFee/takerFee).
      3. PRE-CALCULATED DIVERGENCE SIGNALS: Each coin includes a 'divergences' array with detected divergence patterns.

      DATA STRUCTURE NOTES:
      - 'portfolio.userFees' contains global makerFee and takerFee (applies to all coins).
      - Each coin's 'tradingCosts' contains only fundingRate and dailyHoldingCost (unique per coin).
      - The keys in each coin's 'indicators' object tell you which indicators are active (e.g., {rsi: ..., macd: ...}).
      - 'ts' is a Unix timestamp (seconds since epoch).

      INDICATOR WEIGHTING SYSTEM:
      - Each indicator includes a 'weight' field (0.5 to 2.0, default 1.0).
      - Each indicator includes a 'category' field (trend, momentum, volume, volatility).
      - weight > 1.0: User considers this indicator MORE important (prioritize its signals)
      - weight < 1.0: User considers this indicator LESS important (lower priority)
      - weight = 1.0: Standard importance
      - When indicators conflict, prefer higher-weighted signals.
      - Give each category's signals equal base weight, then apply individual indicator weights.

      INDICATOR CATEGORIES (do NOT stack similar signals from same category):
      - TREND (EMA, SMA, ADX, Ichimoku): Direction of market
      - MOMENTUM (RSI, MACD, Stochastic): Timing of entry/exit
      - VOLUME (OBV, VWAP): Confirmation of moves
      - VOLATILITY (ATR, Bollinger): Risk context

      AUTONOMOUS MODE (when 'autonomousMode' is true in context):
      - The context includes 'availablePresets' with preset configurations.
      - You MUST analyze market conditions first and choose the best preset.
      - Add a 'chosenPreset' field to your JSON response (outside the decisions array) with one of:
        - 'balanced': For uncertain/mixed signals (default fallback)
        - 'scalp': For high volatility with quick reversals
        - 'trendFollowing': For strong directional trends (ADX > 25)
        - 'meanReversion': For ranging/sideways markets
        - 'volumeConfirm': For breakout scenarios or unusual volume
      - Add a 'presetReason' field explaining why you chose that preset.
      - Focus your analysis on the indicators most relevant to your chosen preset.

      RESPONSE FORMAT:
      - For NORMAL mode: Return JSON array of decisions directly.
      - For AUTONOMOUS mode: Return { "chosenPreset": "...", "presetReason": "...", "decisions": [...] }

      You must return valid JSON with this EXACT schema for each decision:
      {
        "coin": "Symbol analyzed",
        "action": "BUY" | "SELL" | "HOLD" | "CLOSE",
        "confidence": number (0.0 to 1.0),
        "reason": "Format: [ACTION] Position Status + Explanation. POSITION STATUS RULES: If NO open position, say 'No position.' If HAVE open position, say 'In LONG/SHORT at $X, PnL: $Y'. ENTRY/SL/TP RULES: Only include Entry/SL/TP values for BUY or SELL actions. For HOLD/CLOSE, do NOT include Entry/SL/TP. Examples: HOLD='WAIT: No position. RSI neutral.' BUY='LONG: No position. RSI divergence. Entry: $95000, SL: $93100, TP: $98800' CLOSE='CLOSE: In LONG at $95000, PnL: +$150. TP reached.'. Max 600 chars.",
        "suggestedLeverage": number (1-50, optional, MUST NOT exceed portfolio.settings.maxLeverage),
        "sizeUSDC": number (optional, calculate based on bankroll settings),
        "orderType": "limit" | "market",
        "price": number (for limit orders, optional),
        "stopLoss": number (optional),
        "takeProfit": number (optional)
      }

      CRITICAL RULES:
      1. ONLY output valid JSON.
      2. Must return one decision object per coin provided in the input.
      3. CHECK PORTFOLIO LIMITS: Do not suggest BUY if 'portfolio.maxPositions' is reached.
      4. CLOSE POSITIONS: Prioritize checking existing positions for exit signals.
      5. PROFITABILITY: Consider 'portfolio.userFees' and coin's 'tradingCosts'. Only trade if potential > costs.
      6. LEVERAGE CONSTRAINT: If suggesting leverage, 'suggestedLeverage' MUST NOT exceed 'portfolio.settings.maxLeverage'. This is a hard limit set by the user.
      
      7. RISK PROTECTION (CRITICAL - MANDATORY JSON FIELDS):
         - Check 'portfolio.settings.stopLossEnabled' and 'portfolio.settings.takeProfitEnabled'.
         - If 'stopLossEnabled' is true AND 'stopLossPercent' is null: You MUST include the numeric field "stopLoss" in your JSON response (not just in reason text). Example: "stopLoss": 93100.50
         - If 'takeProfitEnabled' is true AND 'takeProfitPercent' is null: You MUST include the numeric field "takeProfit" in your JSON response (not just in reason text). Example: "takeProfit": 98800.00
         - These are SEPARATE JSON FIELDS, not just mentions in the "reason" string.
         - For BUY/LONG: stopLoss should be BELOW entry price, takeProfit should be ABOVE entry price.
         - For SELL/SHORT: stopLoss should be ABOVE entry price, takeProfit should be BELOW entry price.
      
      8. DIVERGENCE SIGNALS (HIGH PRIORITY): Each coin includes a 'divergences' array with pre-calculated signals:
         - BULLISH: Price lower low + RSI/MACD higher low  potential reversal UP
         - BEARISH: Price higher high + RSI/MACD lower high  potential reversal DOWN
         - HIDDEN_BULLISH: Trend continuation signal UP
         - HIDDEN_BEARISH: Trend continuation signal DOWN
         - Strength: WEAK, MODERATE, STRONG (prioritize MODERATE and STRONG signals)
         - Use these divergences with HIGH PRIORITY - they are algorithmically detected and reliable.
       8. REASONING FORMAT (CRITICAL - MUST FOLLOW):
          - Start with action: "LONG:", "SHORT:", "CLOSE:", or "WAIT:".
          - POSITION STATUS (MANDATORY - ALWAYS INCLUDE):
            - Check each coin's 'openPosition.hasPosition' field.
            - If hasPosition === false: MUST say "No position." at the START of your reason.
            - If hasPosition === true: MUST say "In [side] at $[entryPx], PnL: $[unrealizedPnl]" at the START.
          - ENTRY/SL/TP VALUES:
            - ONLY include Entry, SL, TP values for BUY or SELL actions (new trades).
            - For HOLD or CLOSE actions, do NOT include Entry/SL/TP values.
          - CRITICAL: Use ONLY the openPosition data from each coin's context. NEVER invent or guess PnL values.
          - CRITICAL: If hasPosition is false, DO NOT report SL/TP values - there is no position to have SL/TP.
          - MANDATORY: If divergences are present, mention them in your reasoning.
          - RECOMMENDED: Mention indicator weights if they influenced your decision.
         - RECOMMENDED: If 'macro' data is present, mention macro alignment in your reasoning.

      MACRO TIMEFRAME CONFIRMATION (CRITICAL FOR ACCURACY):
      - Each coin MAY include a 'macro' object with indicator values from a HIGHER timeframe.
      - 'macro.timeframe' tells you the macro timeframe (e.g., '240' = 4H, 'D' = Daily, 'W' = Weekly).
      - 'macro.indicators' contains current values only (no history).
      
      MACRO ALIGNMENT RULES:
      - If main timeframe shows OVERBOUGHT but macro shows OVERSOLD: Consider HOLD or reduce confidence by 20-30%.
      - If main timeframe shows OVERSOLD but macro shows OVERBOUGHT: Consider HOLD or reduce confidence by 20-30%.
      - If main and macro ALIGN (both overbought or both oversold): Full confidence trade.
      - If conflicting signals: MENTION THE CONFLICT in your reasoning (e.g., "Main RSI=75 but Macro RSI=30 - conflicting").
      
      EXAMPLES:
      - Main RSI=25 (oversold) + Macro RSI=35 (neutral-oversold) = ALIGNED = Full confidence BUY.
      - Main RSI=75 (overbought) + Macro RSI=30 (oversold) = CONFLICTING = HOLD or reduce size.
      - Use macro as a FILTER to avoid trading against the higher timeframe trend.
    `;return Os.enqueue({priority:"NORMAL",source:"hyperliquidDealer",provider:"gemini",execute:async()=>{var N,R,D;const l=r.chats.create({model:i,config:{systemInstruction:s,responseMimeType:"application/json"}}),c=`
          [USER STRATEGY]
          ${n}

          [BATCH MARKET DATA]
          ${JSON.stringify(e)}

          Analyze all assets in the batch. Return a JSON Array of decisions.
        `,u=await l.sendMessage({message:c});u.usageMetadata&&Ps.addRecord({source:"DEALER",operation:"BATCH_ANALYSIS",inputTokens:u.usageMetadata.promptTokenCount||0,outputTokens:u.usageMetadata.candidatesTokenCount||0,model:i,metadata:{coinsAnalyzed:((N=e==null?void 0:e.coins)==null?void 0:N.length)||0}});let h="";if(u.candidates&&((D=(R=u.candidates[0])==null?void 0:R.content)!=null&&D.parts))for(const O of u.candidates[0].content.parts)O.text&&(h+=O.text);if(!h)return console.warn("[AIService] Empty response from Batch Dealer Analysis"),[];const m=h.replace(/```json/g,"").replace(/```/g,"").trim();let g;try{g=JSON.parse(m)}catch(O){return console.warn("[AIService] JSON Parse Error:",O),[]}let y=[];if(Array.isArray(g))y=g;else if(typeof g=="object")y=[g];else return[];const b=y.map(O=>O.action==="LONG"?{...O,action:"BUY"}:O.action==="SHORT"?{...O,action:"SELL"}:O.action==="WAIT"?{...O,action:"HOLD"}:O).filter(O=>{const B=typeof O.coin=="string"&&O.coin.length>0,z=["BUY","SELL","HOLD","CLOSE"].includes(O.action);return!(!B||!z)}),w={CLOSE:3,BUY:2,SELL:2,HOLD:1},k=new Map;for(const O of b){const B=O.coin.toUpperCase(),z=k.get(B);if(!z)k.set(B,O);else{const U=w[z.action]||0,$=w[O.action]||0;if($>U)k.set(B,O);else if($===U){const W=z.confidence||0;(O.confidence||0)>W&&k.set(B,O)}}}return Array.from(k.values())}})}async analyzePolymarket(e){if(!this.client)return console.warn("[AIService] Client not initialized for Polymarket analysis"),null;const n=this.client,r=this.modelName,i=`
      You are a Polymarket prediction market analyst.
      Your goal is to analyze prediction markets and identify trading opportunities.

      You will receive market data including:
      - Market questions and current YES/NO prices
      - Time to resolution
      - Volume and liquidity data
      - Current portfolio positions

      Respond with a JSON object containing your analysis:
      {
        "decisions": [
          {
            "action": "BUY_YES" | "BUY_NO" | "SELL_YES" | "SELL_NO" | "HOLD",
            "marketId": "string",
            "question": "string",
            "confidence": 0-100,
            "reason": "explanation",
            "suggestedSize": number (USDC),
            "suggestedPrice": number (0-1)
          }
        ],
        "marketOverview": "Brief overall assessment",
        "riskAssessment": "Brief risk commentary"
      }

      RULES:
      1. Only suggest trades with confidence >= 60
      2. Consider time to resolution (avoid markets expiring soon without clear edge)
      3. Factor in liquidity - avoid illiquid markets
      4. Look for mispriced probabilities based on news/fundamentals
      5. Diversify across different categories when possible
    `;return Os.enqueue({priority:"NORMAL",source:"polymarketDealer",provider:"gemini",execute:async()=>{var l,c;const o=await n.chats.create({model:r,config:{systemInstruction:i,responseMimeType:"application/json"}}).sendMessage({message:e});o.usageMetadata&&Ps.addRecord({source:"POLYMARKET_DEALER",operation:"ANALYSIS",inputTokens:o.usageMetadata.promptTokenCount||0,outputTokens:o.usageMetadata.candidatesTokenCount||0,model:r});let a="";if(o.candidates&&((c=(l=o.candidates[0])==null?void 0:l.content)!=null&&c.parts))for(const u of o.candidates[0].content.parts)u.text&&(a+=u.text);return a||null}})}getProviderFactory(){return ag}getConfigStore(){return Fn}getAvailableProviders(){return["gemini","openai","claude"]}getModelsForProvider(e){return py[e]||[]}async sendOperatorMessage(e,n,r){var s;const i=ag.getProviderForComponent("operator");if(!i)return console.log("[AIService] Falling back to legacy Gemini for operator"),this.sendMessage(e,n,r);try{const o=await i.sendMessage(e,n,r,((s=i.getTools)==null?void 0:s.call(i))||this.getTools());if(o.usageMetadata){const a=Fn.getComponentConfig("operator");Ps.addRecord({source:"MANAGER",operation:"QUERY",inputTokens:o.usageMetadata.promptTokenCount||0,outputTokens:o.usageMetadata.candidatesTokenCount||0,model:a.modelId})}return{text:o.text,functionCalls:o.functionCalls,usageMetadata:o.usageMetadata,candidates:[{content:{parts:[{text:o.text}]}}]}}catch(o){return console.error("[AIService] Operator provider error:",o),this.sendMessage(e,n,r)}}async getDealerBatchAnalysis(e,n,r){var s;const i=ag.getProviderForComponent("hyperliquidDealer");if(!i)return console.log("[AIService] Falling back to legacy batch analysis"),{decisions:await this.getBatchDealerAnalysis(e,n)};try{const o=await i.sendBatchAnalysis(e,n,r),a=Fn.getComponentConfig("hyperliquidDealer");return Ps.addRecord({source:"DEALER",operation:"BATCH_ANALYSIS",inputTokens:Math.round(JSON.stringify(e).length/4),outputTokens:Math.round(JSON.stringify(o).length/4),model:a.modelId,metadata:{coinsAnalyzed:((s=e==null?void 0:e.coins)==null?void 0:s.length)||0}}),o}catch(o){if((o==null?void 0:o.name)==="AbortError")throw console.log("[AIService] Dealer analysis aborted"),o;return console.error("[AIService] Dealer provider error:",o),{decisions:await this.getBatchDealerAnalysis(e,n)}}}async getDealerAnalysisViaOracle(e,n,r){const i=Fn.getComponentConfig("hyperliquidDealer"),s=Fn.getComponentApiKey("hyperliquidDealer");if(!s)throw new Error("No AI API key configured for Hyperliquid Dealer");const o={marketContext:e,aiConfig:{provider:i.providerType,apiKey:s,modelId:i.modelId},portfolioContext:n};try{const a=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!a.ok){const c=await a.text();throw new Error(`Strategy Oracle error: ${c}`)}const l=await a.json();return Ps.addRecord({source:"DEALER",operation:"ORACLE_ANALYSIS",inputTokens:Math.round(JSON.stringify(e).length/4),outputTokens:Math.round(JSON.stringify(l).length/4),model:i.modelId,metadata:{via:"strategy-oracle"}}),{decisions:l.decisions||[],timestamp:l.timestamp||new Date().toISOString()}}catch(a){throw console.error("[AIService] Strategy Oracle call failed:",a),a}}async getPolymarketAnalysis(e){const n=ag.getProviderForComponent("polymarketDealer");if(!n)return console.log("[AIService] Falling back to legacy Polymarket analysis"),this.analyzePolymarket(e);const r=`
      You are a Polymarket prediction market analyst.
      Your goal is to analyze prediction markets and identify trading opportunities.

      Respond with a JSON object containing your analysis:
      {
        "decisions": [
          {
            "action": "BUY_YES" | "BUY_NO" | "SELL_YES" | "SELL_NO" | "HOLD",
            "marketId": "string",
            "question": "string",
            "confidence": 0-100,
            "reason": "explanation",
            "suggestedSize": number (USDC),
            "suggestedPrice": number (0-1)
          }
        ],
        "marketOverview": "Brief overall assessment",
        "riskAssessment": "Brief risk commentary"
      }

      RULES:
      1. Only suggest trades with confidence >= 60
      2. Consider time to resolution
      3. Factor in liquidity
      4. Look for mispriced probabilities
      5. Diversify when possible
    `;try{const i=await n.sendJsonAnalysis(e,r);if(i){const s=Fn.getComponentConfig("polymarketDealer");Ps.addRecord({source:"POLYMARKET_DEALER",operation:"ANALYSIS",inputTokens:Math.round(e.length/4),outputTokens:Math.round(i.length/4),model:s.modelId})}return i}catch(i){return console.error("[AIService] Polymarket provider error:",i),this.analyzePolymarket(e)}}isComponentReady(e){return ag.isComponentReady(e)}getComponentProviderInfo(e){const n=Fn.getComponentConfig(e),i=py[n.providerType].find(s=>s.id===n.modelId);return{provider:n.providerType,model:n.modelId,modelName:(i==null?void 0:i.name)||n.modelId,isReady:ag.isComponentReady(e)}}async generateCycleSummary(e,n){if(!this.client)return console.warn("[AIService] Client not initialized for cycle summary"),"";if(e.length===0)return"";const r=this.client,i=this.modelName,o=`You are a trading analyst summarizing recent trading activity.
Generate a CONCISE contextual summary for an AI trader about to analyze ${n==="hyperliquid"?"crypto perpetual futures trading on Hyperliquid":"prediction market trading on Polymarket"}.

The summary should help the AI understand:
1. Recent market sentiment and patterns observed
2. Actions taken in previous cycles (buys, sells, holds)
3. Key assets/markets being monitored
4. Any notable patterns or trends

CRITICAL RULES:
- Output ONLY plain text, max 300 characters
- Be extremely concise - every word must add value
- Focus on actionable context for the next analysis
- No JSON, no markdown, no formatting`,a=e.map(c=>({time:new Date(c.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),actions:c.decisions.map(u=>`${u.asset}:${u.action}(${Math.round(u.confidence*100)}%)`).join(", "),assets:c.assetsAnalyzed.length})),l=`Recent ${n} trading cycles (newest first):
${a.map((c,u)=>`Cycle ${e.length-u}: ${c.time} - Analyzed ${c.assets} assets. Actions: ${c.actions||"None"}`).join(`
`)}

Generate a brief contextual summary for the next analysis cycle.`;return Os.enqueue({priority:"LOW",source:n==="hyperliquid"?"hyperliquidDealer":"polymarketDealer",provider:"gemini",execute:async()=>{var c,u;try{const m=await r.chats.create({model:i,config:{systemInstruction:o}}).sendMessage({message:l});m.usageMetadata&&Ps.addRecord({source:n==="hyperliquid"?"DEALER":"POLYMARKET_DEALER",operation:"CYCLE_SUMMARY",inputTokens:m.usageMetadata.promptTokenCount||0,outputTokens:m.usageMetadata.candidatesTokenCount||0,model:i});let g="";if(m.candidates&&((u=(c=m.candidates[0])==null?void 0:c.content)!=null&&u.parts))for(const y of m.candidates[0].content.parts)y.text&&(g+=y.text);return g.trim().slice(0,350)}catch(h){return console.error("[AIService] Cycle summary generation failed:",h),""}}})}}const gm=new plt;class mlt{constructor(){this.worker=null,this.callbacks=new Map,this.fallbackTimers=new Map,this.isSupported=typeof Worker<"u",this.isSupported?this.initWorker():console.warn("[BackgroundTimer]  Web Workers not supported, falling back to setInterval (will be throttled in background)")}initWorker(){try{const e=`
                const timers = new Map();
                
                self.onmessage = (event) => {
                    const { type, timerId, intervalMs } = event.data;
                    
                    if (type === 'START' && timerId && intervalMs) {
                        // Clear existing timer if any
                        if (timers.has(timerId)) {
                            clearInterval(timers.get(timerId));
                        }
                        
                        // Start new timer
                        const id = setInterval(() => {
                            self.postMessage({ type: 'TICK', timerId, timestamp: Date.now() });
                        }, intervalMs);
                        timers.set(timerId, id);
                        
                        // Log start (visible in browser console under Worker context)
                        console.log('[TimerWorker] Started timer "' + timerId + '" with ' + intervalMs + 'ms interval');
                    }
                    
                    if (type === 'STOP' && timerId) {
                        if (timers.has(timerId)) {
                            clearInterval(timers.get(timerId));
                            timers.delete(timerId);
                            console.log('[TimerWorker] Stopped timer "' + timerId + '"');
                        }
                    }
                    
                    if (type === 'UPDATE_INTERVAL' && timerId && intervalMs) {
                        if (timers.has(timerId)) {
                            clearInterval(timers.get(timerId));
                        }
                        const id = setInterval(() => {
                            self.postMessage({ type: 'TICK', timerId, timestamp: Date.now() });
                        }, intervalMs);
                        timers.set(timerId, id);
                        console.log('[TimerWorker] Updated timer "' + timerId + '" to ' + intervalMs + 'ms');
                    }
                };
            `,n=new Blob([e],{type:"application/javascript"});this.worker=new Worker(URL.createObjectURL(n)),this.worker.onmessage=r=>{const{type:i,timerId:s,timestamp:o}=r.data;if(i==="TICK"&&this.callbacks.has(s))try{this.callbacks.get(s)(o)}catch(a){console.error(`[BackgroundTimer] Error in callback for "${s}":`,a)}},this.worker.onerror=r=>{console.error("[BackgroundTimer] Worker error:",r)},console.log("[BackgroundTimer]  Web Worker initialized - timers will run in background")}catch(e){console.error("[BackgroundTimer] Failed to initialize Worker:",e),this.isSupported=!1}}start(e,n,r){if(this.callbacks.set(e,r),this.worker)this.worker.postMessage({type:"START",timerId:e,intervalMs:n});else{console.warn(`[BackgroundTimer] Using fallback for "${e}" - may be throttled in background`);const i=setInterval(()=>r(Date.now()),n);this.fallbackTimers.set(e,i)}}stop(e){this.callbacks.delete(e),this.worker&&this.worker.postMessage({type:"STOP",timerId:e}),this.fallbackTimers.has(e)&&(clearInterval(this.fallbackTimers.get(e)),this.fallbackTimers.delete(e))}updateInterval(e,n){if(this.worker&&this.callbacks.has(e))this.worker.postMessage({type:"UPDATE_INTERVAL",timerId:e,intervalMs:n});else if(this.fallbackTimers.has(e)){const r=this.callbacks.get(e);if(r){clearInterval(this.fallbackTimers.get(e));const i=setInterval(()=>r(Date.now()),n);this.fallbackTimers.set(e,i)}}}isRunning(e){return this.callbacks.has(e)}getActiveTimers(){return Array.from(this.callbacks.keys())}destroy(){for(const e of this.callbacks.keys())this.stop(e);this.worker&&(this.worker.terminate(),this.worker=null),this.callbacks.clear(),this.fallbackTimers.clear()}}const qa=new mlt;class glt{constructor(){this.audioContext=null,this.oscillator=null,this.gainNode=null,this.isActive=!1,this.checkInterval=null,this.visibilityHandler=null,this.userInteractionHandler=null}start(){var e;if(this.isActive&&((e=this.audioContext)==null?void 0:e.state)==="running")return console.log("[KeepAlive] Already active and running"),!0;try{return this.audioContext&&this.audioContext.state!=="closed"&&this.cleanupAudio(),this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.oscillator=this.audioContext.createOscillator(),this.oscillator.type="sine",this.oscillator.frequency.setValueAtTime(1,this.audioContext.currentTime),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.setValueAtTime(.001,this.audioContext.currentTime),this.oscillator.connect(this.gainNode),this.gainNode.connect(this.audioContext.destination),this.oscillator.start(),this.isActive=!0,console.log("[KeepAlive]  Silent audio started - tab will stay active in background"),this.setupMaintenance(),!0}catch(n){return console.error("[KeepAlive]  Failed to start silent audio:",n),!1}}setupMaintenance(){this.cleanupMaintenance(),this.visibilityHandler=()=>{document.visibilityState==="visible"&&this.isActive&&(console.log("[KeepAlive]  Tab became visible, checking audio..."),this.ensureRunning())},document.addEventListener("visibilitychange",this.visibilityHandler),this.userInteractionHandler=()=>{var e;this.isActive&&((e=this.audioContext)==null?void 0:e.state)==="suspended"&&(console.log("[KeepAlive]  User interaction detected, resuming audio..."),this.resume())},["click","keydown","touchstart","mousedown"].forEach(e=>{document.addEventListener(e,this.userInteractionHandler,{passive:!0})}),this.checkInterval=setInterval(()=>{this.isActive&&this.ensureRunning()},5e3)}async ensureRunning(){var n;if(!this.isActive)return;const e=(n=this.audioContext)==null?void 0:n.state;e==="suspended"?(console.log("[KeepAlive]  AudioContext suspended, attempting resume..."),await this.resume()):(e==="closed"||!this.audioContext)&&(console.log("[KeepAlive]  AudioContext closed, restarting..."),this.isActive=!1,this.start())}cleanupMaintenance(){this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null),this.visibilityHandler&&(document.removeEventListener("visibilitychange",this.visibilityHandler),this.visibilityHandler=null),this.userInteractionHandler&&(["click","keydown","touchstart","mousedown"].forEach(e=>{document.removeEventListener(e,this.userInteractionHandler)}),this.userInteractionHandler=null)}cleanupAudio(){try{this.oscillator&&(this.oscillator.stop(),this.oscillator.disconnect(),this.oscillator=null),this.gainNode&&(this.gainNode.disconnect(),this.gainNode=null),this.audioContext&&this.audioContext.state!=="closed"&&this.audioContext.close(),this.audioContext=null}catch{}}stop(){if(this.isActive)try{this.cleanupMaintenance(),this.cleanupAudio(),this.isActive=!1,console.log("[KeepAlive]  Silent audio stopped")}catch(e){console.error("[KeepAlive] Error stopping:",e)}}async resume(){if(!this.audioContext)return this.start();if(this.audioContext.state==="suspended")try{return await this.audioContext.resume(),console.log("[KeepAlive]  AudioContext resumed"),!0}catch(e){return console.error("[KeepAlive] Failed to resume:",e),this.isActive=!1,this.start()}return!0}getIsActive(){var e;return this.isActive&&((e=this.audioContext)==null?void 0:e.state)==="running"}getState(){var e;return((e=this.audioContext)==null?void 0:e.state)||"not-initialized"}}const F2=new glt,d4="user_supabase_config",dZ=["encrypted_keys","execution_sessions"];class ylt{constructor(){this.client=null,this.config=null,this.listeners=new Set,this.loadStoredConfig()}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}notify(){const e=this.isConnected();this.listeners.forEach(n=>n(e))}isConnected(){return this.client!==null&&this.config!==null}getConfig(){return this.config}getClient(){return this.client}async loadStoredConfig(){try{const e=await ke.getItem(ke.getUserKey(d4));if(!e)return console.log("[UserDataSupabase] No stored configuration found"),!1;const n=JSON.parse(e),r=await this.connect(n.url,n.anonKey);return r.success?(console.log("[UserDataSupabase] Reconnected using stored config"),!0):(console.warn("[UserDataSupabase] Failed to reconnect:",r.error),!1)}catch(e){return console.error("[UserDataSupabase] Failed to load stored config:",e),!1}}validateUrl(e){return e?e.startsWith("https://")?e.includes(".supabase.co")?{valid:!0}:{valid:!1,error:"URL must be a Supabase project URL (*.supabase.co)"}:{valid:!1,error:"URL must start with https://"}:{valid:!1,error:"URL is required"}}validateAnonKey(e){return e?e.length<100?{valid:!1,error:"Anon key appears invalid (too short)"}:e.startsWith("eyJ")?{valid:!0}:{valid:!1,error:"Anon key should be a JWT token"}:{valid:!1,error:"Anon key is required"}}async connect(e,n){var s;const r=this.validateUrl(e);if(!r.valid)return{success:!1,projectId:null,error:r.error};const i=this.validateAnonKey(n);if(!i.valid)return{success:!1,projectId:null,error:i.error};try{const o=lte(e,n,{auth:{autoRefreshToken:!1,persistSession:!1,detectSessionInUrl:!1}}),{error:a}=await o.auth.getSession();if(a&&a.message!=="Auth session missing!")return{success:!1,projectId:null,error:`Connection failed: ${a.message}`};const l=((s=e.split("//")[1])==null?void 0:s.split(".")[0])||null;return this.config={url:e,anonKey:n,projectId:l||"",connectedAt:new Date().toISOString()},this.client=o,await this.saveConfig(),console.log("[UserDataSupabase] Connected to project:",l),this.notify(),{success:!0,projectId:l}}catch(o){return{success:!1,projectId:null,error:o instanceof Error?o.message:"Unknown error"}}}async validateSchema(){if(!this.client)return{valid:!1,missingTables:dZ,error:"Not connected"};const e=[];for(const n of dZ)try{const{error:r}=await this.client.from(n).select("id").limit(1);r&&(r.code==="42P01"||r.message.includes("does not exist"))&&e.push(n)}catch{e.push(n)}return{valid:e.length===0,missingTables:e}}async disconnect(){this.client=null,this.config=null,await ke.removeItem(ke.getUserKey(d4)),console.log("[UserDataSupabase] Disconnected and cleared config"),this.notify()}getSetupSQL(){return`-- AutonomousVault Security Tier Schema
-- Run this in your Supabase SQL Editor

-- Table for storing encrypted keys (Tier B & C)
CREATE TABLE IF NOT EXISTS encrypted_keys (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID NOT NULL,
    key_name TEXT NOT NULL,
    encrypted_blob TEXT NOT NULL,
    encryption_salt TEXT NOT NULL,
    encrypted_password TEXT, -- Only for Tier C (persistent)
    created_at TIMESTAMPTZ DEFAULT now(),
    updated_at TIMESTAMPTZ DEFAULT now(),
    UNIQUE(user_id, key_name)
);

-- Table for execution sessions (Tier B)
CREATE TABLE IF NOT EXISTS execution_sessions (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID NOT NULL,
    encrypted_session_token TEXT NOT NULL,
    expires_at TIMESTAMPTZ NOT NULL,
    revoked BOOLEAN DEFAULT false,
    created_at TIMESTAMPTZ DEFAULT now()
);

-- Row Level Security (RLS) policies
ALTER TABLE encrypted_keys ENABLE ROW LEVEL SECURITY;
ALTER TABLE execution_sessions ENABLE ROW LEVEL SECURITY;

-- Users can only access their own data
CREATE POLICY "Users can manage own keys" ON encrypted_keys
    FOR ALL USING (auth.uid() = user_id);

CREATE POLICY "Users can manage own sessions" ON execution_sessions
    FOR ALL USING (auth.uid() = user_id);

-- Indexes for performance
CREATE INDEX IF NOT EXISTS idx_encrypted_keys_user ON encrypted_keys(user_id);
CREATE INDEX IF NOT EXISTS idx_execution_sessions_user ON execution_sessions(user_id);
CREATE INDEX IF NOT EXISTS idx_execution_sessions_expires ON execution_sessions(expires_at);
`}async saveConfig(){if(this.config)try{await ke.setItem(ke.getUserKey(d4),JSON.stringify(this.config))}catch(e){console.error("[UserDataSupabase] Failed to save config:",e)}}}const as=new ylt;class xlt{get supabase(){return as.getClient()}isAvailable(){return this.supabase!==null}async runCycle(e){if(!this.supabase)throw new Error("Supabase not connected");const{data:n,error:r}=await this.supabase.functions.invoke("dealer-cycle",{body:e});return r?(console.error("[SupabaseDealerClient] Cycle error:",r),{success:!1,decisions:[],usage:{cyclesUsed:0,cyclesRemaining:0},timestamp:new Date().toISOString(),error:r.message}):n}async syncPortfolio(){if(!this.supabase)throw new Error("Supabase not connected");const{data:e,error:n}=await this.supabase.functions.invoke("sync-portfolio",{body:{}});return n?(console.error("[SupabaseDealerClient] Sync error:",n),{positions:[],portfolioValue:0,error:n.message}):e}async enableSchedule(e){if(!this.supabase)throw new Error("Supabase not connected");const n=ke.getUserId();if(!n)return{success:!1,error:"Not authenticated"};const{error:r}=await this.supabase.from("cron_schedules").upsert({user_id:n,schedule_name:"default",enabled:e.enabled,interval_seconds:e.intervalSeconds,coins:e.coins,next_run_at:e.enabled?new Date().toISOString():null},{onConflict:"user_id,schedule_name"});return r?(console.error("[SupabaseDealerClient] Schedule error:",r),{success:!1,error:r.message}):{success:!0}}async disableSchedule(){return this.enableSchedule({enabled:!1,intervalSeconds:300,coins:[]})}async getScheduleStatus(){if(!this.supabase)return null;const e=ke.getUserId();if(!e)return null;const{data:n,error:r}=await this.supabase.from("cron_schedules").select("*").eq("user_id",e).eq("schedule_name","default").single();return r||!n?null:{enabled:n.enabled,intervalSeconds:n.interval_seconds,coins:n.coins||[],lastRunAt:n.last_run_at?new Date(n.last_run_at):void 0,nextRunAt:n.next_run_at?new Date(n.next_run_at):void 0,runCount:n.run_count||0,lastError:n.last_error}}async getSessionStatus(){if(!this.supabase)return{hasActiveSession:!1,tier:"local"};const e=ke.getUserId();if(!e)return{hasActiveSession:!1,tier:"local"};const{data:n}=await this.supabase.from("encrypted_keys").select("encrypted_password").eq("user_id",e).eq("key_name","hyperliquid").single();if(n!=null&&n.encrypted_password)return{hasActiveSession:!0,tier:"persistent"};const{data:r}=await this.supabase.from("execution_sessions").select("expires_at").eq("user_id",e).eq("revoked",!1).gt("expires_at",new Date().toISOString()).order("expires_at",{ascending:!1}).limit(1).single();return r?{hasActiveSession:!0,expiresAt:new Date(r.expires_at),tier:"session"}:{hasActiveSession:!1,tier:"local"}}async getUsageStats(){if(!this.supabase)return null;const e=ke.getUserId();if(!e)return null;const n=new Date,r=new Date(n.getFullYear(),n.getMonth(),1),{data:i,error:s}=await this.supabase.from("usage_tracking").select("*").eq("user_id",e).eq("period_start",r.toISOString().split("T")[0]).single();if(s&&s.code!=="PGRST116")return console.error("[SupabaseDealerClient] Usage error:",s),null;const{data:o}=await this.supabase.from("user_plans").select("cycles_limit").eq("user_id",e).single(),a=(o==null?void 0:o.cycles_limit)||1e3;return{cyclesExecuted:(i==null?void 0:i.cycles_executed)||0,tradesExecuted:(i==null?void 0:i.trades_executed)||0,cyclesRemaining:Math.max(0,a-((i==null?void 0:i.cycles_executed)||0)),periodStart:r}}}const vlt=new xlt,uD={local:{tier:"local",label:"Local Keys",description:"Maximum security. Keys never leave your browser. Browser must remain open for execution.",icon:"",securityLevel:3,execution24x7:!1,requiresBrowserOpen:!0},session:{tier:"session",label:"Session Keys",description:"Balanced security. 24-hour execution sessions on your server.Re-authenticate daily.",icon:"",securityLevel:2,execution24x7:!1,requiresBrowserOpen:!1},persistent:{tier:"persistent",label:"Persistent Keys",description:"Full automation. 24/7 execution. Lower security - password stored encrypted on your server.",icon:"",securityLevel:1,execution24x7:!0,requiresBrowserOpen:!1}},fZ="security_tier",hZ=24;class blt{constructor(){this.state={currentTier:"local",session:null,keysInSupabase:!1,passwordStoredInSupabase:!1},this.listeners=new Set,this.loadState()}async loadState(){try{const e=await ke.getItem(ke.getUserKey(fZ));if(e){const n=JSON.parse(e);this.state={...this.state,currentTier:n.currentTier||"local",session:n.session?{...n.session,createdAt:new Date(n.session.createdAt),expiresAt:new Date(n.session.expiresAt)}:null},this.state.session&&new Date>this.state.session.expiresAt&&(console.log("[SecurityTierService] Session expired, reverting to local"),this.state.session=null,this.state.currentTier==="session"&&(this.state.currentTier="local"))}await this.syncSupabaseState()}catch(e){console.error("[SecurityTierService] Failed to load state:",e)}}async saveState(){try{await ke.setItem(ke.getUserKey(fZ),JSON.stringify({currentTier:this.state.currentTier,session:this.state.session}))}catch(e){console.error("[SecurityTierService] Failed to save state:",e)}}notify(){this.listeners.forEach(e=>e()),this.saveState()}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}getState(){return this.state}getCurrentTier(){return this.state.currentTier}getTierInfo(e){return uD[e||this.state.currentTier]}getSessionStatus(){if(!this.state.session)return{active:!1};const e=new Date,n=e<this.state.session.expiresAt,r=this.state.session.expiresAt.getTime()-e.getTime(),i=Math.max(0,r/(1e3*60*60));return{active:n,expiresAt:this.state.session.expiresAt,remainingHours:Math.round(i*10)/10}}async migrateToSession(e,n,r,i=hZ){try{const s=as.getClient();if(!s)return{success:!1,error:"Your Supabase not connected. Please connect in Security Tier settings."};const o=ke.getUserId();if(!o)return{success:!1,error:"Not authenticated"};const{error:a}=await s.from("encrypted_keys").upsert({user_id:o,key_name:"hyperliquid",encrypted_blob:e,encryption_salt:n,encrypted_password:null},{onConflict:"user_id,key_name"});if(a)return{success:!1,error:`Failed to upload key: ${a.message}`};const l=new Date,c=new Date(l.getTime()+i*60*60*1e3),u=crypto.randomUUID(),h=await this.createSessionToken(o,r,c),{error:m}=await s.from("execution_sessions").insert({id:u,user_id:o,encrypted_session_token:h,expires_at:c.toISOString(),revoked:!1});return m?{success:!1,error:`Failed to create session: ${m.message}`}:(this.state={...this.state,currentTier:"session",keysInSupabase:!0,passwordStoredInSupabase:!1,session:{id:u,userId:o,createdAt:l,expiresAt:c,active:!0}},this.notify(),console.log("[SecurityTierService] Migrated to Tier B (Session)"),{success:!0})}catch(s){return{success:!1,error:s instanceof Error?s.message:"Unknown error"}}}async migrateToPersistent(e,n,r){try{const i=as.getClient();if(!i)return{success:!1,error:"Your Supabase not connected. Please connect in Security Tier settings."};const s=ke.getUserId();if(!s)return{success:!1,error:"Not authenticated"};const o=await this.encryptPasswordForStorage(r),{error:a}=await i.from("encrypted_keys").upsert({user_id:s,key_name:"hyperliquid",encrypted_blob:e,encryption_salt:n,encrypted_password:o},{onConflict:"user_id,key_name"});return a?{success:!1,error:`Failed to upload key: ${a.message}`}:(this.state={...this.state,currentTier:"persistent",keysInSupabase:!0,passwordStoredInSupabase:!0,session:null},this.notify(),console.log("[SecurityTierService] Migrated to Tier C (Persistent)"),{success:!0})}catch(i){return{success:!1,error:i instanceof Error?i.message:"Unknown error"}}}async migrateToLocal(){try{const e=as.getClient();if(!e)return this.state={...this.state,currentTier:"local",keysInSupabase:!1,passwordStoredInSupabase:!1,session:null},this.notify(),{success:!0};const n=ke.getUserId();return n?(await e.from("encrypted_keys").delete().eq("user_id",n).eq("key_name","hyperliquid"),await e.from("execution_sessions").update({revoked:!0}).eq("user_id",n),this.state={...this.state,currentTier:"local",keysInSupabase:!1,passwordStoredInSupabase:!1,session:null},this.notify(),console.log("[SecurityTierService] Migrated to Tier A (Local)"),{success:!0}):{success:!1,error:"Not authenticated"}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async endSession(){if(this.state.session){try{const e=as.getClient();e&&await e.from("execution_sessions").update({revoked:!0}).eq("id",this.state.session.id)}catch(e){console.error("[SecurityTierService] Failed to revoke session:",e)}this.state={...this.state,session:null},this.notify()}}async refreshSession(e,n=hZ){if(this.state.currentTier!=="session")return{success:!1,error:"Not in session mode"};await this.endSession();const r=as.getClient();if(!r)return{success:!1,error:"Your Supabase not connected"};const i=ke.getUserId();if(!i)return{success:!1,error:"Not authenticated"};const{data:s}=await r.from("encrypted_keys").select("encrypted_blob, encryption_salt").eq("user_id",i).eq("key_name","hyperliquid").single();return s?this.migrateToSession(s.encrypted_blob,s.encryption_salt,e,n):{success:!1,error:"No key found in Supabase"}}async syncSupabaseState(){var e;try{const n=as.getClient();if(!n)return;const r=ke.getUserId();if(!r)return;const{data:i}=await n.from("encrypted_keys").select("encrypted_password").eq("user_id",r).eq("key_name","hyperliquid").single();this.state.keysInSupabase=!!i,this.state.passwordStoredInSupabase=!!(i!=null&&i.encrypted_password),this.state.keysInSupabase?this.state.passwordStoredInSupabase?this.state.currentTier="persistent":(e=this.state.session)!=null&&e.active?this.state.currentTier="session":this.state.currentTier="local":this.state.currentTier="local"}catch(n){console.error("[SecurityTierService] Failed to sync Supabase state:",n)}}async createSessionToken(e,n,r){const i=JSON.stringify({userId:e,password:n,expiresAt:r.toISOString()}),o=new TextEncoder().encode(i),a=await crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt"]),l=crypto.getRandomValues(new Uint8Array(12)),c=await crypto.subtle.encrypt({name:"AES-GCM",iv:l},a,o),u=await crypto.subtle.exportKey("raw",a),h=new Uint8Array(l.length+c.byteLength+u.byteLength);return h.set(l,0),h.set(new Uint8Array(c),l.length),h.set(new Uint8Array(u),l.length+c.byteLength),btoa(String.fromCharCode(...h))}async encryptPasswordForStorage(e){const n=new TextEncoder,r=n.encode(e),i=n.encode("autonomousvault-persistent-key-v1"),s=await crypto.subtle.importKey("raw",n.encode("server-managed-key-placeholder"),"PBKDF2",!1,["deriveKey"]),o=await crypto.subtle.deriveKey({name:"PBKDF2",salt:i,iterations:1e5,hash:"SHA-256"},s,{name:"AES-GCM",length:256},!1,["encrypt"]),a=crypto.getRandomValues(new Uint8Array(12)),l=await crypto.subtle.encrypt({name:"AES-GCM",iv:a},o,r),c=new Uint8Array(a.length+l.byteLength);return c.set(a,0),c.set(new Uint8Array(l),a.length),btoa(String.fromCharCode(...c))}}const kf=new blt,pZ="hyperliquid-dealer-cycle",f4="hyperliquid-dealer-sync";class wlt{constructor(){this.isLoopRunning=!1,this.currentCycleAbortController=null,this.vaultContext={balance:0,positions:[]},this.lastError=null,this.consecutiveFailures=0,this.executor=null,xt.subscribe(()=>{const e=xt.getSnapshot();e.isOn&&!this.isLoopRunning?this.startLoop():!e.isOn&&this.isLoopRunning&&this.stopLoop()}),Os.setOnRateLimit(e=>{e.exhausted?(xt.addLog("ERROR"," AI API Quota Exhausted! Credits may be depleted. System paused.",{consecutiveHits:e.consecutiveHits}),xt.updateStatus(" Quota Exhausted",null,"Check your AI API credits or billing",void 0,`Retried ${e.consecutiveHits}x without success`)):(xt.addLog("WARNING",` AI Rate Limited! Waiting ${e.blockedForSeconds}s before retry... (attempt ${e.consecutiveHits})`,{consecutiveHits:e.consecutiveHits}),xt.updateStatus(" Rate Limited",null,"AI credits/quota may be running low",void 0,`Retry in ${e.blockedForSeconds}s (attempt ${e.consecutiveHits})`))})}startLoop(){if(this.isLoopRunning)return;this.isLoopRunning=!0,console.log("[DealerService]  Starting loop with Web Worker timer (background-safe)..."),F2.start();const n=xt.getSnapshot().settings.checkIntervalSeconds*1e3||6e4;qa.start(pZ,n,()=>this.runCycle()),this.startSyncLoop(),this.runCycle()}startSyncLoop(){qa.stop(f4),console.log("[DealerService] Starting sync loop with Web Worker timer..."),qa.start(f4,15e3,()=>this.syncPortfolio()),this.syncPortfolio()}async syncPortfolio(){if(this.vaultContext.walletAddress){if(Vt.isDealerActive()){console.log("[DealerService]   Skipping sync - dealer is active");return}try{const e=await Vt.getUserStateShared(this.vaultContext.walletAddress);let n=[],r=0;e&&(e.assetPositions&&(n=e.assetPositions.filter(o=>parseFloat(o.position.szi)!==0),this.vaultContext.positions=n),e.marginSummary&&(r=parseFloat(e.marginSummary.accountValue||"0")));let i=0;const s=n.map(o=>{var u;const a=parseFloat(o.position.szi),l=parseFloat(o.position.entryPx),c=Math.abs(a*l);return i+=c,{coin:o.position.coin,size:a,entryPrice:l,unrealizedPnl:parseFloat(o.position.unrealizedPnl||"0"),side:a>0?"LONG":"SHORT",leverage:parseFloat(((u=o.position.leverage)==null?void 0:u.value)||"1"),liquidationPrice:o.position.liquidationPx?parseFloat(o.position.liquidationPx):void 0}});this.vaultContext.balance=r,xt.updatePortfolioState(s,r,i)}catch(e){console.warn("[DealerService] syncPortfolio failed:",e)}}}stopLoop(){this.isLoopRunning&&(console.log("[DealerService]  Stopping loop..."),this.currentCycleAbortController&&(console.log("[DealerService]  Aborting current cycle requests..."),this.currentCycleAbortController.abort(),this.currentCycleAbortController=null),qa.stop(pZ),qa.stop(f4),F2.stop(),this.isLoopRunning=!1,xt.updateStatus(null,null,"System paused",void 0,"Dealer offline"))}setVaultContext(e){this.vaultContext={...this.vaultContext,...e}}async runCycle(){if(!xt.getSnapshot().isOn){this.stopLoop();return}const n=kf.getCurrentTier();return n==="session"||n==="persistent"?this.runSupabaseCycle():this.runLocalCycle()}async runSupabaseCycle(){var s,o;const e=xt.getSnapshot();xt.setAnalyzing(!0),xt.updateStatus(" Supabase Cycle",null,"Executing via Edge Function...",void 0,`Mode: ${e.executionMode}`);const n=Fn.getComponentConfig("hyperliquidDealer"),r=Fn.getComponentApiKey("hyperliquidDealer"),i={provider:n.providerType,apiKey:r,modelId:n.modelId,systemPrompt:e.settings.strategyPrompt};try{const a=await vlt.runCycle({coins:e.settings.tradingPairs,settings:{intervalMs:e.settings.checkIntervalSeconds*1e3,maxPositions:e.settings.maxOpenPositions,maxLeverage:e.settings.maxLeverage,maxPositionSizeUSDC:e.settings.maxPositionSizeUSDC,analysisTimeframe:e.settings.analysisTimeframe||"60",historyCandles:e.settings.historyCandles||100,macroTimeframeEnabled:e.settings.macroTimeframeEnabled,macroTimeframe:e.settings.macroTimeframe,macroEnabledIndicators:e.settings.macroEnabledIndicators,indicatorSettings:e.settings.indicatorSettings,autonomousIndicators:e.settings.autonomousIndicators,stopLossEnabled:e.settings.stopLossEnabled,stopLossPercent:e.settings.stopLossPercent,takeProfitEnabled:e.settings.takeProfitEnabled,takeProfitPercent:e.settings.takeProfitPercent,strategyPrompt:e.settings.strategyPrompt},portfolioContext:{balance:((s=this.vaultContext)==null?void 0:s.balance)||0,positions:(((o=this.vaultContext)==null?void 0:o.positions)||[]).map(l=>{var c,u,h,m,g,y,v,b;return{coin:((c=l.position)==null?void 0:c.coin)||l.coin,side:parseFloat(((u=l.position)==null?void 0:u.szi)||l.szi||"0")>0?"LONG":"SHORT",size:Math.abs(parseFloat(((h=l.position)==null?void 0:h.szi)||l.szi||"0")),entryPrice:parseFloat(((m=l.position)==null?void 0:m.entryPx)||l.entryPx||"0"),unrealizedPnl:parseFloat(((g=l.position)==null?void 0:g.unrealizedPnl)||l.unrealizedPnl||"0"),leverage:parseFloat(((v=(y=l.position)==null?void 0:y.leverage)==null?void 0:v.value)||((b=l.leverage)==null?void 0:b.value)||"1")}})},aiConfig:i,executeTradesIfSignal:!0});if(a.success){for(const l of a.decisions){const c=l.action==="BUY"?"":l.action==="SELL"?"":l.action==="CLOSE"?"":"";xt.addLog(l.executed?"TRADE":"SIGNAL",`${c} ${l.coin}: ${l.action} (${(l.confidence*100).toFixed(0)}%)${l.executed?" ":""}`,{fullReason:l.reason,orderId:l.orderId,error:l.error})}xt.updateStatus(" Waiting",null,`Supabase cycle complete. ${a.decisions.length} decisions.`,void 0,`Cycles remaining: ${a.usage.cyclesRemaining}`)}else throw new Error(a.error||"Supabase cycle failed")}catch(a){console.error("[DealerService] Supabase cycle error:",a),xt.addLog("ERROR",`Supabase cycle failed: ${a.message}`),xt.updateStatus(" Error",null,a.message,void 0,"Will retry next interval")}finally{xt.setAnalyzing(!1)}}async runLocalCycle(){var v,b,w,k;const e=xt.getSnapshot();this.currentCycleAbortController=new AbortController;const n=this.currentCycleAbortController.signal;Vt.acquireDealerLock();const r=e.settings.indicatorSettings,s=Object.entries(r).filter(([N,R])=>R.enabled).map(([N,R])=>N.toUpperCase()).join(", ")||"Default",o=e.settings.tradingPairs.length,a=e.settings.analysisTimeframe,l=a==="1"?"1m":a==="5"?"5m":a==="15"?"15m":a==="60"?"1h":a==="240"?"4h":a==="D"?"1D":`${a}m`,c=e.settings.macroTimeframe,u=e.settings.macroTimeframeEnabled?`  ${c==="15"?"15m":c==="60"?"1H":c==="240"?"4H":c==="D"?"1D":c==="W"?"1W":c}`:"";xt.setAnalyzing(!0),xt.updateStatus(" Scanning Markets",null,"Initializing market analysis cycle...",void 0,` ${o} pairs  ${l}${u}  ${s}`);const h=Date.now();let m=0,g=0,y=0;try{let N=this.vaultContext.positions||[];this.vaultContext.walletAddress&&(!N||N.length===0)&&(await this.syncPortfolio(),N=this.vaultContext.positions||[]);const R=e.settings.tradingPairs;if(R.length===0){xt.addLog("WARNING","No trading pairs configured.");return}const D=5,O=[];for(let T=0;T<R.length;T+=D)O.push(R.slice(T,T+D));const B=e.settings.maxOpenPositions||3,z=[],U=new Map;for(let T=0;T<O.length;T++){if(n.aborted)throw new DOMException("Dealer cycle aborted","AbortError");const _=O[T],L=T+1,V=_.join(", ");xt.updateStatus(" Fetching Data",null,`Collecting market data for ${V}...`,void 0,`Batch ${L}/${O.length}  ${_.length} coins`);const K=Date.now(),te=[];for(const ve of _){if(n.aborted)throw new DOMException("Dealer cycle aborted","AbortError");const Ne=e.settings.autonomousIndicators?void 0:e.settings.indicatorSettings,pe=await l4.getMarketContext(ve,this.vaultContext.walletAddress,e.settings.analysisTimeframe||"60",Ne,e.settings.historyCandles||100);if(e.settings.macroTimeframeEnabled&&e.settings.macroTimeframe&&!pe.error){let Le=Ne;if(Le&&e.settings.macroEnabledIndicators){Le={...Le};const Te={},Ge=e.settings.macroEnabledIndicators;for(const[We,Qe]of Object.entries(Le))Te[We]={...Qe,enabled:Qe.enabled&&Ge.includes(We)};Le=Te}const he=await l4.getMacroSnapshot(ve,e.settings.macroTimeframe,Le);Object.keys(he.indicators).length>0&&(pe.macro=he)}pe.error||(te.push(pe),U.set(ve,pe)),await new Promise(Le=>setTimeout(Le,200))}if(m+=Date.now()-K,te.length===0)continue;for(const ve of te){const Ne=ve.symbol,pe=N.find(Le=>{var he;return((he=Le.position)==null?void 0:he.coin)===Ne||Le.coin===Ne});if(pe&&parseFloat(((v=pe.position)==null?void 0:v.szi)||pe.szi||"0")!==0){const Le=pe.position||pe;ve.openPosition={hasPosition:!0,side:parseFloat(Le.szi)>0?"LONG":"SHORT",size:Math.abs(parseFloat(Le.szi)),entryPrice:parseFloat(Le.entryPx||"0"),unrealizedPnl:parseFloat(Le.unrealizedPnl||"0"),leverage:parseFloat(((b=Le.leverage)==null?void 0:b.value)||"1")}}else ve.openPosition={hasPosition:!1}}const G=N.length>0?l4.calculatePositionBreakevens(N,{makerFee:2e-4,takerFee:5e-4},new Map(te.map(ve=>{var Ne;return[ve.symbol,((Ne=ve.tradingCosts)==null?void 0:Ne.fundingRate)||0]}))):[],q={coins:te,portfolio:{balance:this.vaultContext.balance,positions:N,positionBreakevens:G,settings:{maxPositions:e.settings.maxOpenPositions,maxLeverage:e.settings.maxLeverage,bankrollType:e.settings.bankrollType,manualBankroll:e.settings.manualBankroll,stopLossEnabled:e.settings.stopLossEnabled,stopLossPercent:e.settings.stopLossPercent,takeProfitEnabled:e.settings.takeProfitEnabled,takeProfitPercent:e.settings.takeProfitPercent},userFees:{makerFee:2e-4,takerFee:5e-4},lastExecutionError:this.lastError&&Date.now()-this.lastError.timestamp<6e4?{message:this.lastError.message,timestamp:this.lastError.timestamp}:null},autonomousMode:e.settings.autonomousIndicators,availablePresets:e.settings.autonomousIndicators?ed:void 0,cycleSummary:sd.getContextForAI("hyperliquid")},M=te.map(ve=>ve.symbol).join(", ");xt.updateStatus(" Analyzing",null,`AI processing ${M}...`,void 0,`Using ${s} indicators`);const P=e.settings.strategyPrompt||"Scalp trading. Buy low RSI, Sell high RSI.",Y=q.cycleSummary;Y&&xt.addLog("INFO",` Cycle Summary: Including ${Y.length} char context from previous cycles`);const X=Date.now();if(n.aborted)throw new DOMException("Dealer cycle aborted","AbortError");const se=await gm.getDealerBatchAnalysis(q,P,n);g+=Date.now()-X;let oe=[],me;const ce=se;ce&&typeof ce=="object"&&!Array.isArray(ce)?(oe=ce.decisions||[],me=ce.cycleSummary,e.settings.autonomousIndicators&&ce.chosenPreset&&(xt.addLog("INFO",` AI chose preset: ${((w=ed[ce.chosenPreset])==null?void 0:w.emoji)||""} ${ce.chosenPreset}`),ce.presetReason&&xt.addLog("INFO",` Preset reason: ${ce.presetReason}`))):Array.isArray(ce)&&(oe=ce),me&&(sd.setSummary("hyperliquid",me),xt.addLog("INFO",` AI Summary: ${me.slice(0,80)}...`));for(const ve of oe){const Ne=ve.coin,pe=ve.action,Le=ve.reason,he=ve.confidence||0,Te=U.get(Ne);if(xt.addLog("REASONING",`${Ne}: ${pe} (Conf: ${(he*100).toFixed(0)}%)`,{fullReason:Le,context:{...ve,currentPrice:Te==null?void 0:Te.currentPrice,indicators:Te==null?void 0:Te.indicators,enabledIndicators:Te==null?void 0:Te.enabledIndicators,tradingCosts:Te==null?void 0:Te.tradingCosts,orderBook:Te==null?void 0:Te.orderBook,macro:Te==null?void 0:Te.macro}}),pe==="HOLD")continue;const Ge=e.settings.aggressiveMode?.5:.6;if(he<Ge){xt.addLog("INFO",`Skipped ${pe} on ${Ne}: Confidence ${(he*100).toFixed(0)}% < ${(Ge*100).toFixed(0)}%`);continue}z.push({decision:ve,marketContext:U.get(Ne)})}T<O.length-1&&await new Promise(ve=>setTimeout(ve,500))}const $=z.length;xt.updateStatus(" Prioritizing",null,$>0?`Found ${$} trading signal${$>1?"s":""}`:"No actionable signals found",void 0,$>0?"Ranking by confidence...":"Monitoring for opportunities"),z.sort((T,_)=>{const L=(T.decision.confidence||0)+(T.decision.action==="CLOSE"?.5:0);return(_.decision.confidence||0)+(_.decision.action==="CLOSE"?.5:0)-L}),z.length>B&&xt.addLog("INFO",` Prioritizing top ${B} trades from ${z.length} signals (sorted by confidence)`);let W=0;const H=Date.now();for(const{decision:T,marketContext:_}of z){if(n.aborted)throw new DOMException("Dealer cycle aborted","AbortError");const L=T.coin,V=T.action,K=T.reason,te=T.confidence||0;if(W>=B&&V!=="CLOSE"){xt.addLog("INFO",` Skipping ${V} on ${L} (${(te*100).toFixed(0)}%): Cycle limit reached, lower priority`);continue}const G=N.length;if(V==="BUY"&&G>=e.settings.maxOpenPositions&&!N.some(M=>{var P;return M.coin===L||((P=M.position)==null?void 0:P.coin)===L})){xt.addLog("WARNING",`Ignored BUY on ${L}: Max positions reached.`);continue}if(xt.addLog("SIGNAL",` Executing ${V} on ${L} (${(te*100).toFixed(0)}% confidence)`),this.executor){let q=T.sizeUSDC||e.settings.maxPositionSizeUSDC||20;e.settings.maxPositionSizeUSDC&&(q=Math.min(q,e.settings.maxPositionSizeUSDC));const M=T.suggestedLeverage||e.settings.maxLeverage||1,P=Math.min(M,e.settings.maxLeverage||1);M>P&&xt.addLog("INFO",` Leverage capped for ${L}: ${M}x  ${P}x (max: ${e.settings.maxLeverage}x)`);const X=(this.vaultContext.balance||0)*P*.95;if(q>X&&(q=X),q<10&&V!=="CLOSE"){xt.addLog("WARNING",`Trade skipped on ${L}: Size < $10`);continue}try{const se=V==="BUY"?"":V==="SELL"?"":"";xt.updateStatus(`${se} Executing`,null,`${V} ${L} @ $${((k=_==null?void 0:_.currentPrice)==null?void 0:k.toFixed(2))||"market"}`,void 0,`Confidence: ${(te*100).toFixed(0)}%  Size: $${q.toFixed(0)}`),await this.executor({coin:L,action:V,type:T.orderType||"limit",price:T.price||(_==null?void 0:_.currentPrice),sizeUSDC:q,leverage:P,reason:K,cloid:this.generateCloid(),stopLoss:T.stopLoss,takeProfit:T.takeProfit}),W+=V!=="CLOSE"?1:0,await new Promise(oe=>setTimeout(oe,2e3))}catch(se){console.error(`[DealerService] Execution failed for ${L}:`,se),xt.addLog("ERROR",`Execution failed for ${L}: ${se.message}`)}}}y+=Date.now()-H;const F=(Date.now()-h)/1e3;console.log(`[DealerService] Cycle Telemetry: Total=${F.toFixed(1)}s, Fetch=${(m/1e3).toFixed(1)}s, AI=${(g/1e3).toFixed(1)}s, Exec=${(y/1e3).toFixed(1)}s`),sd.recordCycle("hyperliquid",{timestamp:Date.now(),decisions:z.map(T=>({asset:T.decision.coin,action:T.decision.action,confidence:T.decision.confidence||0})),assetsAnalyzed:R}),this.consecutiveFailures=0}catch(N){if((N==null?void 0:N.name)==="AbortError"){console.log("[DealerService]  Cycle aborted by user"),xt.addLog("INFO"," Analysis cycle cancelled");return}console.error("[DealerService] Cycle Error:",N),xt.addLog("ERROR",`Cycle failed: ${N.message}`),this.lastError={message:N.message,timestamp:Date.now()}}finally{Vt.releaseDealerLock(),Vt.clearSharedCache(),xt.setAnalyzing(!1);const N=e.settings.checkIntervalSeconds,R=Math.floor(N/60),D=R>=1?`${R}min`:`${N}s`;xt.updateStatus(" Waiting",null,"Analysis complete, waiting for next cycle",void 0,`Next scan in ${D}`)}}setExecutor(e){this.executor=e}generateCloid(){const e=new Uint8Array(16);return crypto.getRandomValues(e),"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}}const lg=new wlt;class or{static async encrypt(e,n){const i=new TextEncoder().encode(e),s=crypto.getRandomValues(new Uint8Array(16)),o=await this.deriveKey(n,s),a=crypto.getRandomValues(new Uint8Array(12)),l=await crypto.subtle.encrypt({name:"AES-GCM",iv:a},o,i),c=new Uint8Array(s.byteLength+a.byteLength+l.byteLength);return c.set(s,0),c.set(a,s.byteLength),c.set(new Uint8Array(l),s.byteLength+a.byteLength),btoa(String.fromCharCode(...c))}static async decrypt(e,n){try{const r=atob(e),i=new Uint8Array(r.length);for(let h=0;h<r.length;h++)i[h]=r.charCodeAt(h);const s=i.slice(0,16),o=i.slice(16,28),a=i.slice(28),l=await this.deriveKey(n,s),c=await crypto.subtle.decrypt({name:"AES-GCM",iv:o},l,a);return new TextDecoder().decode(c)}catch{throw new Error("Failed to decrypt. Wrong password or corrupted data.")}}static async deriveKey(e,n){const r=new TextEncoder,i=await crypto.subtle.importKey("raw",r.encode(e),"PBKDF2",!1,["deriveKey"]);return crypto.subtle.deriveKey({name:"PBKDF2",salt:n,iterations:1e5,hash:"SHA-256"},i,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}}const Elt=(t,e)=>{const n=A.useSyncExternalStore(c=>xt.subscribe(c),()=>xt.getSnapshot()),r=A.useRef(!1);return A.useEffect(()=>{var h,m;const u=gm.getApiKey()||void 0||((m=(h=window.process)==null?void 0:h.env)==null?void 0:m.GEMINI_API_KEY);u&&gm.initialize(u)},[]),A.useEffect(()=>{lg.setVaultContext({walletAddress:t.hlPublicKey,balance:t.hlBalance||0})},[t.hlBalance,t.hlPublicKey]),A.useEffect(()=>{lg.setExecutor(async c=>{var u;if(console.log("[useDealer] GENUINE EXECUTION TRIGGERED:",c),!t.isUnlocked||!t.hlPublicKey||!t.hlEncryptedPrivateKey){xt.addLog("ERROR","Cannot execute: Vault locked or HL not initialized");return}try{if(!e)throw new Error("Password required for execution");const h=await or.decrypt(t.hlEncryptedPrivateKey,e),m=Vt.getWalletFromPrivateKey(h);xt.addLog("TRADE",` EXECUTING ${c.action} ${c.coin}...`,{reason:c.reason,confidence:c.confidence});let g=c.action==="BUY",y=!1;if(c.action==="CLOSE"){console.log("[useDealer] Seeking position for CLOSE:",c.coin),console.log("[useDealer] Cached Positions (may be stale):",(u=t.hlPositions)==null?void 0:u.map(te=>{var G;return((G=te==null?void 0:te.position)==null?void 0:G.coin)||(te==null?void 0:te.coin)})),xt.addLog("INFO",`Fetching current positions for ${c.coin}...`);let V=[];try{const te=await Vt.getUserState(t.hlPublicKey);V=(te==null?void 0:te.assetPositions)||[],console.log("[useDealer] Fresh Positions from API:",V.map(G=>{var q;return((q=G==null?void 0:G.position)==null?void 0:q.coin)||(G==null?void 0:G.coin)}))}catch(te){console.error("[useDealer] Failed to fetch fresh positions:",te),xt.addLog("ERROR",`Failed to fetch positions: ${te.message}`);return}const K=V.find(te=>{var G;return((G=te.position)==null?void 0:G.coin)===c.coin});if(K&&parseFloat(K.position.szi)!==0){const te=K.position.szi,G=parseFloat(te);g=G<0,y=!0,xt.addLog("INFO",`Closing ${G} ${c.coin} (Side: ${g?"BUY":"SELL"}, ReduceOnly: Yes)`)}else{xt.addLog("WARNING",`CLOSE signal ignored: No open position found for ${c.coin}`),console.log("[useDealer] Position not found or size is 0. Available positions:",V.map(te=>{var G,q;return`${(G=te==null?void 0:te.position)==null?void 0:G.coin}: ${(q=te==null?void 0:te.position)==null?void 0:q.szi}`}));return}}const v=c.type==="market";xt.addLog("INFO","Fetching market data...");const b=await Un.getMarketData(c.coin),w=parseFloat(b.levels[0][0].px),k=parseFloat(b.levels[1][0].px),N=g?k:w,R=await Un.getAssetDecimals(c.coin),D=c.sizeUSDC||n.settings.maxPositionSizeUSDC||20,O=D/N,B=parseFloat(O.toFixed(R));let z,U=v?"ioc":"limit";const $=Math.max(0,6-R);if(v){let K=g?N*1.05:N*.95,te=parseFloat(K.toFixed($));te=parseFloat(te.toPrecision(5)),z=parseFloat(te.toFixed($))}else{const V=c.price||N;let K=parseFloat(V.toFixed($));K=parseFloat(K.toPrecision(5)),z=parseFloat(K.toFixed($)),console.log(`[useDealer] Limit price rounded: ${V} -> ${z} (maxDecimals=${$})`)}const W=c.leverage||n.settings.maxLeverage||1,H=Math.min(W,n.settings.maxLeverage||1);if(W>H&&xt.addLog("INFO",` Leverage capped for ${c.coin}: ${W}x  ${H}x (max: ${n.settings.maxLeverage}x)`),H>1)try{await Un.updateLeverage(m,c.coin,H,!1)}catch(V){console.warn(`[useDealer] Leverage update failed, using current: ${V.message}`),xt.addLog("WARNING",`Leverage update failed (using current): ${V.message.slice(0,50)}...`)}console.log("[useDealer SL/TP DEBUG] Settings:",{stopLossEnabled:n.settings.stopLossEnabled,stopLossPercent:n.settings.stopLossPercent,takeProfitEnabled:n.settings.takeProfitEnabled,takeProfitPercent:n.settings.takeProfitPercent}),console.log("[useDealer SL/TP DEBUG] AI Intent:",{stopLoss:c.stopLoss,takeProfit:c.takeProfit});let F;if(n.settings.stopLossEnabled&&!y)if(n.settings.stopLossPercent!==null){const V=n.settings.stopLossPercent/100;F=g?z*(1-V):z*(1+V),xt.addLog("INFO",` Stop Loss: ${n.settings.stopLossPercent}%  $${F.toFixed(2)}`)}else c.stopLoss&&(F=c.stopLoss,xt.addLog("INFO",` Stop Loss (AI): $${F.toFixed(2)}`));let T;if(n.settings.takeProfitEnabled&&!y)if(n.settings.takeProfitPercent!==null){const V=n.settings.takeProfitPercent/100;T=g?z*(1+V):z*(1-V),xt.addLog("INFO",` Take Profit: ${n.settings.takeProfitPercent}%  $${T.toFixed(2)}`)}else c.takeProfit&&(T=c.takeProfit,xt.addLog("INFO",` Take Profit (AI): $${T.toFixed(2)}`));const _=F||T;xt.addLog("INFO",`Placing ${U.toUpperCase()} order: ${B} ${c.coin} @ ${z.toFixed(2)}${_?" (with SL/TP)":""}`);const L=await Un.createOrder(m,c.coin,g,B,z,{orderType:U,reduceOnly:y,cloid:c.cloid,stopLoss:F,takeProfit:T});xt.addLog("INFO",`Order Placed: ${L.status||"Submitted"}`),xt.addOperationRecord({coin:c.coin,action:c.action,timestamp:Date.now(),entryPrice:z,size:B,sizeUSDC:D,reasoning:c.reason||"AI analysis decision",confidence:c.confidence||.7,status:c.action==="CLOSE"?"CLOSED":"OPEN",cloid:c.cloid})}catch(h){console.error("Execution Error:",h),xt.addLog("ERROR",`Execution Failed: ${h.message}`)}}),r.current=!0},[t.isUnlocked,t.hlPublicKey,e,n.settings.maxPositionSizeUSDC,n.settings.maxLeverage,n.settings.stopLossEnabled,n.settings.stopLossPercent,n.settings.takeProfitEnabled,n.settings.takeProfitPercent]),{...n,toggleDealer:c=>{xt.toggleDealer(c),c?lg.startLoop():lg.stopLoop()},updateSettings:c=>{xt.updateSettings(c)},applyChanges:()=>{xt.reload(),n.isOn&&(lg.stopLoop(),setTimeout(()=>lg.startLoop(),500))},saveStrategy:c=>{xt.setStrategyPrompt(c)},clearLogs:()=>{xt.clearLogs()}}},Slt=({vaultAddress:t,setActiveTab:e})=>{const[n,r]=A.useState([]),[i,s]=A.useState([]),[o,a]=A.useState(!1),[l,c]=A.useState(null),u=A.useSyncExternalStore(m=>xt.subscribe(m),()=>xt.getSnapshot()),h=async()=>{if(t){a(!0);try{const m=await Un.getUserState(t);if(m&&m.assetPositions){const y=m.assetPositions.filter(v=>parseFloat(v.position.szi)!==0).map(v=>({coin:v.position.coin,szi:v.position.szi,entryPx:v.position.entryPx,positionValue:v.position.positionValue,unrealizedPnl:v.position.unrealizedPnl,returnOnEquity:v.position.returnOnEquity,liquidationPx:v.position.liquidationPx,leverage:v.position.leverage}));r(y)}const g=await Un.getOpenOrders(t);g&&Array.isArray(g)&&s(g.map(y=>({oid:y.oid,coin:y.coin,side:y.side,limitPx:y.limitPx,sz:y.sz,orderType:y.orderType,timestamp:y.timestamp}))),c(new Date)}catch(m){console.error("[DealerOpenOrders] Failed to fetch data:",m)}finally{a(!1)}}};return A.useEffect(()=>{u.isAnalyzing||h();const m=setInterval(()=>{!u.isAnalyzing&&!u.pendingExecution&&h()},3e4);return()=>clearInterval(m)},[t,u.isAnalyzing,u.pendingExecution]),d.jsxs("div",{className:"flex flex-col min-h-[150px]",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[d.jsx(rk,{className:"h-4 w-4 text-[#E7FE55]"}),"Open Trading"]}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsxs("button",{onClick:()=>e(we.HYPERLIQUID),className:"text-[10px] bg-[#E7FE55]/10 hover:bg-[#E7FE55]/20 text-[#E7FE55] border border-[#E7FE55]/30 px-3 py-1.5 rounded transition-colors flex items-center gap-2 uppercase tracking-wider font-medium",title:"View Trading Page",children:[d.jsx(yn,{size:12})," Details"]}),d.jsx("button",{onClick:h,className:`p-1.5 rounded hover:bg-[#1a1b21] transition-colors ${o?"animate-spin text-[#60a5fa]":"text-[#747580]"}`,title:"Refresh",children:d.jsx($l,{className:"h-3.5 w-3.5"})}),d.jsxs("span",{className:"text-[10px] text-[#747580] bg-[#1a1b21] px-2 py-1 rounded uppercase tracking-wider",children:[n.length," Pos  ",i.length," Ord"]})]})]}),d.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:n.length===0&&i.length===0?d.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-[#747580] gap-2 py-8 bg-[#0f1015] rounded border border-[#232328]",children:[d.jsx(rk,{className:"h-8 w-8 opacity-30"}),d.jsx("span",{className:"text-[11px]",children:"No open positions or active orders"})]}):d.jsxs("div",{className:"flex flex-col gap-4",children:[n.length>0&&d.jsxs("div",{className:"bg-[#0f1015] rounded border border-[#232328] overflow-hidden",children:[d.jsxs("div",{className:"px-4 py-2 border-b border-[#232328] flex items-center gap-2",children:[d.jsx(Zg,{className:"h-3.5 w-3.5 text-[#E7FE55]"}),d.jsx("span",{className:"text-[10px] font-semibold text-[#E7FE55] uppercase tracking-[0.1em]",children:"Active Positions"})]}),d.jsxs("table",{className:"w-full text-left text-[10px]",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"text-[#747580] border-b border-[#232328]",children:[d.jsx("th",{className:"px-4 py-2 font-medium text-[9px] uppercase tracking-[0.05em]",children:"Pair"}),d.jsx("th",{className:"px-4 py-2 font-medium text-[9px] uppercase tracking-[0.05em]",children:"Side"}),d.jsx("th",{className:"px-4 py-2 font-medium text-right text-[9px] uppercase tracking-[0.05em]",children:"Size"}),d.jsx("th",{className:"px-4 py-2 font-medium text-right text-[9px] uppercase tracking-[0.05em]",children:"Entry"}),d.jsx("th",{className:"px-4 py-2 font-medium text-right text-[9px] uppercase tracking-[0.05em]",children:"Liq. Price"}),d.jsx("th",{className:"px-4 py-2 font-medium text-right text-[9px] uppercase tracking-[0.05em]",children:"PnL (ROE%)"})]})}),d.jsx("tbody",{children:n.map(m=>{var k;const g=parseFloat(m.unrealizedPnl),y=(parseFloat(m.returnOnEquity)*100).toFixed(2),v=g>=0,b=parseFloat(m.szi)>0,w=((k=m.leverage)==null?void 0:k.value)||0;return d.jsxs("tr",{className:"border-b border-[#232328]/50 last:border-0 hover:bg-[#1a1b21] transition-colors",children:[d.jsx("td",{className:"px-4 py-3 font-semibold text-white",children:m.coin}),d.jsx("td",{className:"px-4 py-3",children:d.jsxs("span",{className:`px-1.5 py-0.5 rounded text-[9px] font-semibold uppercase tracking-wider ${b?"bg-[#34d399]/15 text-[#34d399]":"bg-red-500/15 text-red-400"}`,children:[b?"LONG":"SHORT"," ",w,"x"]})}),d.jsxs("td",{className:`px-4 py-3 text-right font-mono ${parseFloat(m.szi)>0?"text-[#34d399]":"text-red-400"}`,children:[parseFloat(m.szi)>0?"+":"",m.szi]}),d.jsxs("td",{className:"px-4 py-3 text-right text-[#a0a1a8] font-mono",children:["$",parseFloat(m.entryPx).toFixed(4)]}),d.jsx("td",{className:"px-4 py-3 text-right text-[#747580] font-mono",children:m.liquidationPx?`$${parseFloat(m.liquidationPx).toFixed(4)}`:"-"}),d.jsxs("td",{className:`px-4 py-3 text-right font-mono font-semibold ${v?"text-[#34d399]":"text-red-400"}`,children:[v?"+":"",g.toFixed(2)," (",v?"+":"",y,"%)"]})]},m.coin)})})]})]}),i.length>0&&d.jsxs("div",{className:"bg-[#0f1015] rounded border border-[#232328] overflow-hidden",children:[d.jsxs("div",{className:"px-4 py-2 border-b border-[#232328] flex items-center gap-2",children:[d.jsx(b8,{className:"h-3.5 w-3.5 text-[#E7FE55]"}),d.jsx("span",{className:"text-[10px] font-semibold text-[#E7FE55] uppercase tracking-[0.1em]",children:"Active Orders"})]}),d.jsxs("table",{className:"w-full text-left text-[10px]",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"text-[#747580] border-b border-[#232328]",children:[d.jsx("th",{className:"px-4 py-2 font-medium text-[9px] uppercase tracking-[0.05em]",children:"Pair"}),d.jsx("th",{className:"px-4 py-2 font-medium text-[9px] uppercase tracking-[0.05em]",children:"Side"}),d.jsx("th",{className:"px-4 py-2 font-medium text-[9px] uppercase tracking-[0.05em]",children:"Type"}),d.jsx("th",{className:"px-4 py-2 font-medium text-right text-[9px] uppercase tracking-[0.05em]",children:"Size"}),d.jsx("th",{className:"px-4 py-2 font-medium text-right text-[9px] uppercase tracking-[0.05em]",children:"Price"}),d.jsx("th",{className:"px-4 py-2 font-medium text-right text-[9px] uppercase tracking-[0.05em]",children:"Action"})]})}),d.jsx("tbody",{children:i.map(m=>{var g;return d.jsxs("tr",{className:"border-b border-[#232328]/50 last:border-0 hover:bg-[#1a1b21] transition-colors",children:[d.jsx("td",{className:"px-4 py-3 font-semibold text-white",children:m.coin}),d.jsx("td",{className:"px-4 py-3",children:d.jsx("span",{className:`px-1.5 py-0.5 rounded text-[9px] font-semibold uppercase tracking-wider ${m.side==="B"?"bg-[#34d399]/15 text-[#34d399]":"bg-red-500/15 text-red-400"}`,children:m.side==="B"?"BUY":"SELL"})}),d.jsx("td",{className:"px-4 py-3 text-[#a0a1a8] uppercase",children:((g=m.orderType)==null?void 0:g.split(" ")[0])||"Limit"}),d.jsx("td",{className:"px-4 py-3 text-right text-[#a0a1a8] font-mono",children:m.sz}),d.jsxs("td",{className:"px-4 py-3 text-right text-[#a0a1a8] font-mono",children:["$",parseFloat(m.limitPx).toFixed(4)]}),d.jsx("td",{className:"px-4 py-3 text-right",children:d.jsx("span",{className:"text-[#747580] text-[9px] italic",children:"Pending"})})]},m.oid)})})]})]})]})}),d.jsx("div",{className:"pt-4 flex justify-end",children:d.jsxs("a",{href:"https://app.hyperliquid-testnet.xyz/trade",target:"_blank",rel:"noopener noreferrer",className:"text-[10px] text-[#E7FE55] hover:text-[#E7FE55]/80 flex items-center gap-1 transition-colors",title:"Hyperliquid Platform Official Website",children:[d.jsx(yn,{size:10})," Hyperliquid Platform Testnet"]})})]})},cpe=t=>{const e=A.useSyncExternalStore(n=>sd.subscribe(t,n),()=>sd.getSnapshot(t));return A.useEffect(()=>{sd.loadState(t)},[t]),{summary:e.aiSummary,isGenerating:e.isGenerating,cycleCount:e.recentCycles.length,lastUpdate:e.lastSummaryTime,hasSummary:!!e.aiSummary&&e.aiSummary.length>0}},Alt=t=>{const e=t.match(/(\w+):/);return e?e[1]:null},h4=8,Tlt=({status:t,onToggle:e,vaultAddress:n,setActiveTab:r})=>{var q,M;const[i,s]=A.useState([]),[o,a]=A.useState([]),[l,c]=A.useState(0),[u,h]=A.useState({totalPnl:0,winRate:0,totalVolume:0,tradesWithPnl:0}),[m,g]=A.useState(0),y="hl_dealer_metrics_baseline",[v,b]=A.useState(null),[w,k]=A.useState(!1);A.useEffect(()=>{(async()=>{try{const Y=await ke.getItem(ke.getUserKey(y));Y&&b(parseInt(Y,10))}catch(Y){console.warn("[DealerDashboard] Failed to load baseline:",Y)}k(!0)})()},[]);const N=A.useCallback(async()=>{const P=Date.now();b(P);try{await ke.setItem(ke.getUserKey(y),P.toString()),console.log("[DealerDashboard] Metrics baseline reset to:",new Date(P).toISOString())}catch(Y){console.error("[DealerDashboard] Failed to save baseline:",Y)}},[]),[R,D]=A.useState(!1),{summary:O,isGenerating:B,cycleCount:z,lastUpdate:U,hasSummary:$}=cpe("hyperliquid"),[W,H]=A.useState(0),F=A.useMemo(()=>t.logs.filter(P=>P.type==="REASONING"||P.type==="SIGNAL").slice(0,20),[t.logs]),T=A.useMemo(()=>{var Y,X;const P=new Map;for(const se of F){const oe=Alt(se.message)||((X=(Y=se.details)==null?void 0:Y.context)==null?void 0:X.coin);oe&&!P.has(oe)&&P.set(oe,se)}return Array.from(P.entries()).sort((se,oe)=>oe[1].timestamp-se[1].timestamp).map(([se,oe])=>({coin:se,log:oe}))},[F]);A.useEffect(()=>{T.length>0&&!t.isAnalyzing&&H(0)},[T.length,t.isAnalyzing]);const _=T[W],L=A.useMemo(()=>[...i].reverse(),[i]);Math.ceil(L.length/h4),A.useMemo(()=>{const P=l*h4;return L.slice(P,P+h4)},[L,l]);const V=A.useCallback((P,Y)=>{const X=Y?P.filter(Le=>Le.time>=Y):P;let se=0,oe=0,me=0,ce=0,ve=0;const Ne=X.map(Le=>{const he=parseFloat(Le.closedPnl||"0"),Te=parseFloat(Le.fee||"0"),Ge=he-Te;return he!==0&&(ve++,Ge>0?oe++:Ge<0&&me++),se+=Ge,ce+=parseFloat(Le.px)*parseFloat(Le.sz),{time:Le.time,date:new Date(Le.time).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),pnl:se,rawPnl:he}}),pe=oe+me;h({totalPnl:se,winRate:pe>0?oe/pe*100:0,totalVolume:ce,tradesWithPnl:ve}),a(Ne)},[]);A.useEffect(()=>{if(!n)return;const P=async()=>{try{if(Vt.isDealerActive()){console.log("[Dashboard]   Skipping fetch - dealer is active");return}const X=await Vt.getUserFillsShared(n);if(X&&Array.isArray(X)){const me=[...X.filter(ce=>ce.cloid||ce.c)].sort((ce,ve)=>ce.time-ve.time);s(me),V(me,v)}const se=await Vt.getUserStateShared(n);if(se&&se.assetPositions){const oe=se.assetPositions.reduce((me,ce)=>me+parseFloat(ce.position.unrealizedPnl||"0"),0);g(oe)}}catch(X){console.error("Failed to load dealer history",X)}};P();const Y=setInterval(P,3e4);return()=>clearInterval(Y)},[n,v,V]),A.useEffect(()=>{i.length>0&&V(i,v)},[v,i,V]);const K=()=>{e(!t.isOn)},te=()=>{H(P=>Math.min(T.length-1,P+1))},G=()=>{H(P=>Math.max(0,P-1))};return d.jsxs("div",{className:"flex flex-col h-full gap-4 overflow-y-auto custom-scrollbar pb-4",children:[d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 shrink-0",children:[d.jsxs("div",{className:"lg:col-span-2 flex flex-col gap-4",children:[d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[d.jsxs("div",{className:"glass-panel p-4 rounded flex flex-wrap items-center justify-between gap-2",children:[d.jsxs("div",{className:`px-3 py-1.5 rounded border flex items-center gap-2 transition-all ${t.isOn?"bg-[#E7FE55]/10 border-[#E7FE55]/30":"bg-[#1a1b21] border-[#232328]"}`,children:[d.jsxs("span",{className:"relative flex h-2 w-2",children:[t.isOn&&d.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-[#E7FE55] opacity-75"}),d.jsx("span",{className:`relative inline-flex rounded-full h-2 w-2 ${t.isOn?"bg-[#E7FE55]":"bg-red-500"}`})]}),d.jsx("span",{className:`font-semibold tracking-wider text-[10px] uppercase ${t.isOn?"text-[#E7FE55]":"text-[#747580]"}`,children:t.isOn?"ACTIVE":"OFFLINE"})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-[9px] font-medium text-[#747580] uppercase tracking-[0.1em]",children:"Master"}),d.jsx("button",{onClick:K,className:`relative inline-flex h-5 w-9 items-center rounded-full transition-all focus:outline-none ${t.isOn?"bg-[#E7FE55]":"bg-[#232328] hover:bg-[#2a2b30]"}`,children:d.jsx("span",{className:`${t.isOn?"translate-x-5":"translate-x-1"} inline-block h-3 w-3 transform rounded-full bg-black transition-transform`})})]})]}),d.jsxs("div",{className:"glass-panel p-4 rounded relative group",children:[d.jsxs("div",{className:"flex items-center justify-between mb-1",children:[d.jsx("div",{className:"text-[10px] text-[#747580] uppercase tracking-[0.1em]",children:"Total Profit"}),d.jsx("button",{onClick:N,className:"p-1 rounded opacity-0 group-hover:opacity-100 transition-opacity text-[#747580] hover:text-[#E7FE55] hover:bg-[#1a1b21]",title:"Reset metrics from now",children:d.jsx(tre,{size:12})})]}),d.jsxs("div",{className:`text-xl font-semibold font-mono tracking-tight ${u.totalPnl>=0?"text-[#34d399]":"text-red-400"}`,children:[u.totalPnl>=0?"+":"",u.totalPnl.toFixed(2)," USD"]}),v&&d.jsxs("div",{className:"text-[8px] text-[#3a3b42] mt-1",title:`Measuring since ${new Date(v).toLocaleString()}`,children:["Since ",new Date(v).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),d.jsxs("div",{className:"glass-panel p-4 rounded",children:[d.jsx("div",{className:"text-[10px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Unrealized PnL"}),d.jsxs("div",{className:`text-xl font-semibold font-mono tracking-tight ${m>=0?"text-[#34d399]":"text-red-400"}`,children:[m>=0?"+":"",m.toFixed(2)," USD"]})]}),d.jsxs("div",{className:"glass-panel p-4 rounded",children:[d.jsx("div",{className:"text-[10px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Win Rate"}),d.jsxs("div",{className:"text-xl font-semibold text-white font-mono tracking-tight",children:[u.winRate.toFixed(1),"%"]})]})]}),d.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[d.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Exposure"}),d.jsxs("span",{className:"text-white font-mono text-sm font-semibold",children:["$",t.currentExposure.toLocaleString()]})]}),d.jsx(cd,{className:"h-4 w-4 text-[#747580]"})]}),d.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Active Pairs"}),d.jsx("span",{className:"text-white font-mono text-sm font-semibold",children:t.settings.tradingPairs.length})]}),d.jsx(_w,{className:"h-4 w-4 text-[#747580]"})]}),d.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Interval"}),d.jsxs("span",{className:"text-white font-mono text-sm font-semibold",children:[t.settings.checkIntervalSeconds,"s"]})]}),d.jsx(Hi,{className:"h-4 w-4 text-[#747580]"})]}),d.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Max Leverage"}),d.jsxs("span",{className:"text-white font-mono text-sm font-semibold",children:[t.settings.maxLeverage,"x"]})]}),d.jsx(Ml,{className:"h-4 w-4 text-[#747580]"})]})]}),d.jsxs("div",{className:"glass-panel p-5 rounded min-h-[220px] flex flex-col flex-1",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[d.jsx(yn,{className:"h-4 w-4 text-[#E7FE55]"}),d.jsx("span",{className:"text-sm font-semibold text-white",children:"Performance Curve"})]}),d.jsx("div",{className:"flex-1 w-full",children:o.length>0?d.jsx(Zw,{width:"100%",height:"100%",minWidth:100,minHeight:100,children:d.jsxs(tfe,{data:o,children:[d.jsx("defs",{children:d.jsxs("linearGradient",{id:"colorPnl",x1:"0",y1:"0",x2:"0",y2:"1",children:[d.jsx("stop",{offset:"5%",stopColor:"#E7FE55",stopOpacity:.2}),d.jsx("stop",{offset:"95%",stopColor:"#E7FE55",stopOpacity:0})]})}),d.jsx(d1,{strokeDasharray:"3 3",stroke:"#232328",vertical:!1}),d.jsx(h1,{dataKey:"date",stroke:"#747580",fontSize:10,tickLine:!1,axisLine:!1}),d.jsx(p1,{stroke:"#747580",fontSize:10,tickLine:!1,axisLine:!1,tickFormatter:P=>`$${P}`}),d.jsx(c2,{contentStyle:{backgroundColor:"#14151a",borderColor:"#232328",borderRadius:"4px"},itemStyle:{color:"#E7FE55"},formatter:P=>[`$${P.toFixed(2)}`,"Net PnL"]}),d.jsx($C,{type:"monotone",dataKey:"pnl",stroke:"#E7FE55",strokeWidth:1.5,fillOpacity:1,fill:"url(#colorPnl)"})]})}):d.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-[#747580]",children:[d.jsx(Ml,{className:"h-8 w-8 mb-2 opacity-40"}),d.jsx("span",{className:"text-[11px]",children:"No performance data yet"})]})})]})]}),d.jsxs("div",{className:"glass-panel p-5 rounded flex flex-col",children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(To,{className:`h-4 w-4 shrink-0 ${t.isAnalyzing?"text-[#E7FE55] animate-pulse":"text-[#E7FE55]/60"}`}),d.jsxs("div",{className:"flex items-center bg-[#0f1015] rounded-full p-0.5 border border-[#232328]",children:[d.jsx("button",{onClick:()=>D(!1),className:`px-2 py-0.5 rounded-full text-[9px] font-semibold uppercase tracking-wider transition-all ${R?"text-[#747580] hover:text-white":"bg-[#E7FE55] text-black"}`,children:"Live"}),d.jsx("button",{onClick:()=>$&&D(!0),disabled:!$,className:`px-2 py-0.5 rounded-full text-[9px] font-semibold uppercase tracking-wider transition-all ${R?"bg-[#E7FE55] text-black":$?"text-[#747580] hover:text-white":"text-[#3a3b42] cursor-not-allowed"}`,title:$?"View AI Summary":`Available after ${2-z} more cycles`,children:"Summary"})]}),t.isAnalyzing&&!R&&d.jsx("span",{className:"px-2 py-0.5 rounded bg-[#E7FE55]/15 text-[#E7FE55] text-[9px] font-semibold uppercase tracking-wider animate-pulse",children:"LIVE"})]}),!t.isAnalyzing&&T.length>0&&!R&&d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{onClick:te,disabled:W>=T.length-1,className:`p-1 rounded transition-colors ${W>=T.length-1?"text-[#3a3b42] cursor-not-allowed":"text-[#747580] hover:text-white hover:bg-[#1a1b21]"}`,title:"Previous coin",children:d.jsx(Iw,{size:16})}),d.jsxs("span",{className:"text-[10px] text-[#747580] font-mono min-w-[32px] text-center",children:[W+1,"/",T.length]}),d.jsx("button",{onClick:G,disabled:W<=0,className:`p-1 rounded transition-colors ${W<=0?"text-[#3a3b42] cursor-not-allowed":"text-[#747580] hover:text-white hover:bg-[#1a1b21]"}`,title:"Next coin",children:d.jsx(Xa,{size:16})})]})]}),R?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs("span",{className:"px-2 py-0.5 rounded bg-[#E7FE55]/15 text-[#E7FE55] text-[9px] font-semibold uppercase tracking-wider",children:[z," cycles"]}),B&&d.jsx("span",{className:"text-[10px] text-[#747580] animate-pulse",children:"generating..."})]}),U>0&&d.jsx("span",{className:"text-[10px] text-[#747580] font-mono",children:new Date(U).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),d.jsx("div",{className:"flex-1 bg-[#0f1015] rounded p-3 border border-[#232328] overflow-y-auto custom-scrollbar min-h-0 mb-3",children:O?d.jsx("p",{className:"text-[13px] text-[#a0a1a8] leading-relaxed whitespace-pre-wrap",children:O}):d.jsx("p",{className:"text-[13px] text-[#747580] italic",children:"Summary will be generated after 2+ analysis cycles..."})})]}):t.isAnalyzing?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"flex items-center justify-between mb-3",children:d.jsx("span",{className:`px-2 py-0.5 rounded text-[9px] font-semibold uppercase tracking-wider ${t.currentSignal==="BULLISH"?"bg-[#34d399]/15 text-[#34d399]":t.currentSignal==="BEARISH"?"bg-red-500/15 text-red-400":"bg-[#1a1b21] text-[#747580]"}`,children:t.currentSignal||"ANALYZING"})}),d.jsx("div",{className:"flex-1 bg-[#0f1015] rounded p-3 border border-[#232328] overflow-y-auto custom-scrollbar min-h-0 mb-3",children:d.jsxs("p",{className:"text-[13px] text-[#a0a1a8] italic leading-relaxed",children:['"',t.trendAssessment,'"']})})]}):_?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"px-2 py-1 rounded bg-[#E7FE55]/15 text-[#E7FE55] text-xs font-semibold uppercase tracking-wider",children:_.coin}),d.jsx("span",{className:"text-[10px] text-[#747580] font-mono",children:new Date(_.log.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),((q=_.log.details)==null?void 0:q.signal)&&d.jsx("span",{className:`px-2 py-0.5 rounded text-[9px] font-semibold uppercase tracking-wider ${_.log.details.signal==="BUY"||_.log.details.signal==="LONG"?"bg-[#34d399]/15 text-[#34d399]":_.log.details.signal==="SELL"||_.log.details.signal==="SHORT"?"bg-red-500/15 text-red-400":"bg-[#1a1b21] text-[#747580]"}`,children:_.log.details.signal})]}),d.jsx("div",{className:"flex-1 bg-[#0f1015] rounded p-3 border border-[#232328] overflow-y-auto custom-scrollbar min-h-0 mb-3",children:d.jsxs("p",{className:"text-[13px] text-[#a0a1a8] italic leading-relaxed whitespace-pre-wrap",children:['"',((M=_.log.details)==null?void 0:M.fullReason)||_.log.message,'"']})})]}):d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"flex items-center justify-between mb-3",children:d.jsx("span",{className:`px-2 py-0.5 rounded text-[9px] font-semibold uppercase tracking-wider ${t.currentSignal==="BULLISH"?"bg-[#34d399]/15 text-[#34d399]":t.currentSignal==="BEARISH"?"bg-red-500/15 text-red-400":"bg-[#1a1b21] text-[#747580]"}`,children:t.currentSignal||"NEUTRAL"})}),d.jsx("div",{className:"flex-1 bg-[#0f1015] rounded p-3 border border-[#232328] overflow-y-auto custom-scrollbar min-h-0 mb-3",children:d.jsxs("p",{className:"text-[13px] text-[#a0a1a8] italic leading-relaxed",children:['"',t.trendAssessment,'"']})})]}),d.jsxs("div",{className:"pt-3 border-t border-[#232328] flex flex-col gap-2 shrink-0",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.05em] w-12 shrink-0",children:"Task"}),d.jsx("div",{className:"text-[10px] text-white truncate font-mono flex-1",children:t.currentTask||" Idle"})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.05em] w-12 shrink-0",children:"Status"}),d.jsx("div",{className:"text-[10px] text-[#a0a1a8] font-mono truncate flex-1",children:t.statusMessage})]}),t.statusDetail&&d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.05em] w-12 shrink-0",children:"Info"}),d.jsx("div",{className:"text-[10px] text-[#E7FE55] truncate flex-1",children:t.statusDetail})]})]})]})]}),d.jsx("div",{className:"glass-panel p-5 rounded shrink-0",children:d.jsx(Slt,{vaultAddress:n,setActiveTab:r})})]})},klt=({logs:t,onClearLogs:e})=>{const[n,r]=A.useState(null),i=t.filter(l=>{if(["REASONING","SIGNAL","TRADE","ERROR"].includes(l.type))return!0;if(["INFO","WARNING"].includes(l.type)){const c=l.message.toLowerCase();return c.includes("executing")||c.includes("skipping")||c.includes("ignored")}return!1}),s=(l,c)=>l==="ERROR"?d.jsx("div",{className:"text-red-400",children:d.jsx(j3,{size:16})}):l==="TRADE"?d.jsx("div",{className:"text-[#34d399]",children:d.jsx(ld,{size:16})}):c.includes("BUY")||c.includes("BULLISH")?d.jsx("div",{className:"text-[#34d399]",children:d.jsx(yn,{size:16})}):c.includes("SELL")||c.includes("BEARISH")||c.includes("SHORT")?d.jsx("div",{className:"text-red-400",children:d.jsx(vm,{size:16})}):c.includes("CLOSE")?d.jsx("div",{className:"text-orange-400",children:d.jsx(j3,{size:16})}):d.jsx("div",{className:"text-[#E7FE55]",children:d.jsx(To,{size:16})}),o=l=>new Date(l).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}),a=l=>typeof l=="number"?l.toFixed(2):typeof l=="object"&&l!==null?Object.entries(l).map(([c,u])=>`${c}: ${typeof u=="number"?u.toFixed(2):u}`).join(", "):String(l);return d.jsxs("div",{className:"flex flex-col h-full overflow-hidden",children:[d.jsxs("div",{className:"p-4 border-b border-[#232328] flex justify-between items-center shrink-0",children:[d.jsxs("h3",{className:"text-sm font-semibold flex items-center gap-2 text-white",children:[d.jsx(To,{className:"h-4 w-4 text-[#E7FE55]"}),"AI Reasoning Log"]}),d.jsx("button",{onClick:e,className:"text-[10px] text-[#747580] hover:text-white transition-colors uppercase tracking-wider",children:"Clear History"})]}),d.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar",children:i.length===0?d.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-[#747580] opacity-50 py-12",children:[d.jsx(To,{size:48,className:"mb-4 opacity-30"}),d.jsx("p",{className:"text-sm",children:"No analysis recorded yet."}),d.jsx("p",{className:"text-[10px] text-[#747580]",children:"Start the dealer to see its thought process."})]}):i.map(l=>{var m,g;const c=n===l.id,u=(m=l.details)==null?void 0:m.context,h=(g=l.details)==null?void 0:g.context;return d.jsxs("div",{className:"relative pl-6 pb-2 border-l border-[#232328] last:border-0 transition-colors group",children:[d.jsx("div",{className:"absolute -left-[5px] top-1 w-2.5 h-2.5 rounded-full bg-[#14151a] border border-[#232328] group-hover:border-[#747580] transition-colors"}),d.jsxs("div",{className:"bg-[#14151a] p-3 rounded border border-[#232328] hover:border-[#3a3b42] transition-all",children:[d.jsxs("div",{className:"flex items-center justify-between mb-1",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[s(l.type,l.message),d.jsx("span",{className:`text-[10px] font-semibold uppercase tracking-wider ${l.type==="ERROR"?"text-red-400":l.type==="TRADE"?"text-[#34d399]":l.type==="SIGNAL"?"text-[#E7FE55]":"text-[#a0a1a8]"}`,children:l.type})]}),d.jsxs("span",{className:"text-[10px] text-[#747580] flex items-center gap-1 font-mono",children:[d.jsx(Hi,{size:10}),o(l.timestamp)]})]}),d.jsx("p",{className:"text-sm text-[#a0a1a8] leading-relaxed",children:l.message}),l.details&&l.details.fullReason&&d.jsxs("div",{className:"mt-2 p-2 bg-[#0f1015] rounded text-[11px] text-[#747580] font-mono italic border-l-2 border-[#60a5fa]/30",children:['"',l.details.fullReason,'"']}),u&&d.jsxs("button",{onClick:()=>r(c?null:l.id),className:"mt-2 flex items-center gap-1 text-[10px] text-[#60a5fa] hover:text-[#93c5fd] transition-colors uppercase tracking-wider",children:[c?d.jsx(ch,{size:12}):d.jsx(aa,{size:12}),c?"Hide":"Show"," Analysis Context"]}),c&&u&&d.jsxs("div",{className:"mt-3 p-3 bg-[#0f1015] rounded border border-[#232328] space-y-3",children:[h.indicators&&Object.keys(h.indicators).length>0&&d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-[#34d399] mb-2 uppercase tracking-wider font-semibold",children:[d.jsx(to,{size:10}),d.jsx("span",{children:"Indicators Used"})]}),d.jsx("div",{className:"grid grid-cols-2 gap-1",children:Object.entries(h.indicators).map(([y,v])=>d.jsxs("div",{className:"flex justify-between bg-[#34d399]/10 border border-[#34d399]/20 px-2 py-1 rounded text-[10px]",children:[d.jsx("span",{className:"text-[#34d399] uppercase font-medium",children:y}),d.jsx("span",{className:"text-[#4ade80] font-mono",children:a((v==null?void 0:v.value)||v)})]},y))})]}),h.macro&&Object.keys(h.macro.indicators||{}).length>0&&d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-amber-400 mb-2 uppercase tracking-wider font-semibold",children:[d.jsx(yn,{size:10}),d.jsxs("span",{children:["Macro Confirmation (",h.macro.timeframe==="15"?"15m":h.macro.timeframe==="60"?"1H":h.macro.timeframe==="240"?"4H":h.macro.timeframe==="D"?"Daily":h.macro.timeframe==="W"?"Weekly":h.macro.timeframe,")"]})]}),d.jsx("div",{className:"grid grid-cols-2 gap-1",children:Object.entries(h.macro.indicators).map(([y,v])=>{var D,O;const b=(O=(D=h.indicators)==null?void 0:D[y])==null?void 0:O.value,w=(v==null?void 0:v.value)||v;let k="";const N=typeof b=="number"?b:typeof b=="object"&&b!==null?Object.values(b)[0]:null,R=typeof w=="number"?w:typeof w=="object"&&w!==null?Object.values(w)[0]:null;if(y==="rsi"&&typeof N=="number"&&typeof R=="number"){const B=N>70,z=N<30,U=R>70,$=R<30;B&&$||z&&U?k=" ":(B&&U||z&&$)&&(k=" ")}return d.jsxs("div",{className:"flex justify-between bg-amber-500/10 border border-amber-500/20 px-2 py-1 rounded text-[10px]",children:[d.jsx("span",{className:"text-amber-400 uppercase font-medium",children:y}),d.jsxs("span",{className:"text-amber-300 font-mono",children:[k,a(w)]})]},y)})})]}),h.tradingCosts&&d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-[#747580] mb-2 uppercase tracking-wider font-semibold",children:[d.jsx(V1,{size:10}),d.jsx("span",{children:"Trading Costs"})]}),d.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[d.jsxs("div",{className:"bg-[#1a1b21] px-2 py-1 rounded text-[10px] border border-[#232328]",children:[d.jsx("span",{className:"text-[#747580]",children:"Maker: "}),d.jsxs("span",{className:"text-white font-mono",children:[((h.tradingCosts.makerFee??2e-4)*100).toFixed(3),"%"]})]}),d.jsxs("div",{className:"bg-[#1a1b21] px-2 py-1 rounded text-[10px] border border-[#232328]",children:[d.jsx("span",{className:"text-[#747580]",children:"Taker: "}),d.jsxs("span",{className:"text-white font-mono",children:[((h.tradingCosts.takerFee??5e-4)*100).toFixed(3),"%"]})]}),d.jsxs("div",{className:"bg-[#1a1b21] px-2 py-1 rounded text-[10px] border border-[#232328]",children:[d.jsx("span",{className:"text-[#747580]",children:"Funding: "}),d.jsxs("span",{className:(h.tradingCosts.fundingRate??0)>0?"text-red-400 font-mono":"text-[#34d399] font-mono",children:[((h.tradingCosts.fundingRate??0)*100).toFixed(4),"%"]})]})]})]}),h.currentPrice&&d.jsxs("div",{className:"text-[10px] text-[#747580]",children:["Price at analysis: ",d.jsxs("span",{className:"text-white font-mono",children:["$",h.currentPrice.toLocaleString()]})]}),h.enabledIndicators&&h.enabledIndicators.length>0&&d.jsxs("div",{className:"text-[10px] text-[#747580]",children:["Enabled: ",d.jsx("span",{className:"font-mono",children:h.enabledIndicators.join(", ").toUpperCase()})]})]})]})]},l.id)})})]})},Nlt=({log:t,index:e,getLogBadgeVariant:n})=>{const[r,i]=A.useState(!1),s=t.details&&Object.keys(t.details).length>0;return d.jsxs(Mt.div,{className:"flex gap-3 p-3 hover:bg-[#1a1b21] rounded border-b border-[#232328] last:border-0 transition-colors",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:e*.02},children:[d.jsx("span",{className:"text-[#747580] shrink-0 text-[10px] mt-0.5 font-mono",children:new Date(t.timestamp).toLocaleTimeString()}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(nl,{variant:n(t.type),className:"text-[9px] uppercase tracking-wider",children:t.type}),d.jsx("span",{className:"text-[#a0a1a8] flex-1 text-sm",children:t.message}),s&&d.jsx("button",{onClick:()=>i(!r),className:"text-[#747580] hover:text-white transition-colors p-1 rounded hover:bg-[#232328]",title:r?"Collapse details":"Expand details",children:r?d.jsx(aa,{className:"h-4 w-4"}):d.jsx(Xa,{className:"h-4 w-4"})})]}),d.jsx(js,{children:s&&r&&d.jsx(Mt.pre,{className:"mt-2 text-[10px] text-[#747580] bg-[#0f1015] p-3 rounded overflow-x-auto max-h-[300px] overflow-y-auto custom-scrollbar border border-[#232328] font-mono",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:JSON.stringify(t.details,null,2)})})]})]},t.id)},Clt=({status:t,onClearLogs:e})=>{const[n,r]=A.useState("thinking"),i=A.useRef(null),s=()=>{const a=JSON.stringify(t.logs,null,2),l="data:application/json;charset=utf-8,"+encodeURIComponent(a),c=`dealer_logs_${new Date().toISOString()}.json`,u=document.createElement("a");u.setAttribute("href",l),u.setAttribute("download",c),u.click()},o=a=>{switch(a){case"INFO":return"info";case"WARNING":return"warning";case"ERROR":return"destructive";case"TRADE":return"success";case"SIGNAL":return"purple";default:return"secondary"}};return d.jsxs("div",{className:"flex flex-col h-full gap-4 overflow-hidden",children:[d.jsx("div",{className:"glass-panel p-4 shrink-0",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-2 bg-[#1a1b21] p-1 rounded border border-[#232328]",children:[d.jsxs("button",{onClick:()=>r("thinking"),className:`flex items-center gap-2 px-4 py-2 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${n==="thinking"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:[d.jsx(To,{className:"h-4 w-4"}),"Thinking"]}),d.jsxs("button",{onClick:()=>r("logs"),className:`flex items-center gap-2 px-4 py-2 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${n==="logs"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:[d.jsx(k8,{className:"h-4 w-4"}),"Activity Log",t.logs.length>0&&d.jsx("span",{className:"bg-white/20 px-1.5 py-0.5 rounded text-[9px]",children:t.logs.length})]})]}),d.jsx(js,{children:n==="logs"&&d.jsxs(Mt.div,{className:"flex items-center gap-2",initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},children:[d.jsx("button",{onClick:e,className:"p-2 rounded hover:bg-red-500/10 text-[#747580] hover:text-red-400 transition-colors border border-[#232328]",title:"Clear Logs",children:d.jsx(xm,{className:"h-4 w-4"})}),d.jsx("button",{onClick:s,className:"p-2 rounded hover:bg-[#1a1b21] text-[#747580] hover:text-white transition-colors border border-[#232328]",title:"Export JSON",children:d.jsx(Ks,{className:"h-4 w-4"})})]})})]})}),d.jsxs("div",{className:"glass-panel flex-1 min-h-0 overflow-hidden flex flex-col",children:[n==="thinking"&&d.jsx(klt,{logs:t.logs,onClearLogs:e}),n==="logs"&&d.jsx("div",{className:"flex-1 min-h-0 relative",children:d.jsx("div",{ref:i,className:"absolute inset-0 overflow-y-auto custom-scrollbar",children:t.logs.length===0?d.jsxs(Mt.div,{className:"h-full flex flex-col items-center justify-center text-[#747580] gap-3 py-12",initial:{opacity:0},animate:{opacity:1},children:[d.jsx(vN,{className:"h-10 w-10 opacity-30"}),d.jsx("p",{className:"text-sm",children:"No operations recorded yet."})]}):d.jsx(js,{children:t.logs.map((a,l)=>d.jsx(Nlt,{log:a,index:l,getLogBadgeVariant:o},a.id))})})})]})]})},mZ={rsi:{name:"RSI",key:"rsi",description:"Relative Strength Index",icon:d.jsx(to,{size:14}),params:[{key:"period",label:"Period",default:14}]},macd:{name:"MACD",key:"macd",description:"Moving Average Convergence Divergence",icon:d.jsx(yn,{size:14}),params:[{key:"fast",label:"Fast",default:12},{key:"slow",label:"Slow",default:26},{key:"signal",label:"Signal",default:9}]},bollinger:{name:"Bollinger",key:"bollinger",description:"Bollinger Bands",icon:d.jsx(Ml,{size:14}),params:[{key:"period",label:"Period",default:20},{key:"stdDev",label:"StdDev",default:2}]},atr:{name:"ATR",key:"atr",description:"Average True Range",icon:d.jsx(ko,{size:14}),params:[{key:"period",label:"Period",default:14}]},adx:{name:"ADX",key:"adx",description:"Average Directional Index",icon:d.jsx(yn,{size:14}),params:[{key:"period",label:"Period",default:14}]},obv:{name:"OBV",key:"obv",description:"On-Balance Volume",icon:d.jsx(Ml,{size:14}),params:[]},vwap:{name:"VWAP",key:"vwap",description:"Volume Weighted Avg Price",icon:d.jsx(to,{size:14}),params:[]},ichimoku:{name:"Ichimoku",key:"ichimoku",description:"Ichimoku Cloud",icon:d.jsx(yn,{size:14}),params:[{key:"conversion",label:"Conv",default:9},{key:"base",label:"Base",default:26},{key:"spanB",label:"SpanB",default:52},{key:"displacement",label:"Disp",default:26}]},ema:{name:"EMA",key:"ema",description:"Exponential Moving Average",icon:d.jsx(yn,{size:14}),params:[{key:"period",label:"Period",default:20}]},sma:{name:"SMA",key:"sma",description:"Simple Moving Average",icon:d.jsx(yn,{size:14}),params:[{key:"period",label:"Period",default:20}]},stoch:{name:"Stochastic",key:"stoch",description:"Stochastic Oscillator",icon:d.jsx(to,{size:14}),params:[{key:"period",label:"Period",default:14},{key:"signalPeriod",label:"Signal",default:3}]}},Plt={trend:{bg:"bg-purple-500/10",text:"text-purple-400",border:"border-purple-500/30"},momentum:{bg:"bg-blue-500/10",text:"text-blue-400",border:"border-blue-500/30"},volume:{bg:"bg-green-500/10",text:"text-green-400",border:"border-green-500/30"},volatility:{bg:"bg-orange-500/10",text:"text-orange-400",border:"border-orange-500/30"}},_lt={trend:d.jsx(yn,{size:14}),momentum:d.jsx(to,{size:14}),volume:d.jsx(Ml,{size:14}),volatility:d.jsx(ko,{size:14})},Ilt=({indicatorSettings:t,autonomousMode:e,selectedPreset:n,onUpdateIndicatorSettings:r,onToggleAutonomousMode:i,onSelectPreset:s})=>{const[o,a]=A.useState("trend"),[l,c]=A.useState(null),[u,h]=A.useState([]),[m,g]=A.useState(!1),[y,v]=A.useState(!1),b=A.useMemo(()=>hhe(t),[t]),w=A.useMemo(()=>Wet(t),[t]),k=A.useMemo(()=>phe(t),[t]),N=U=>{const $=t[U];!CX(t,U)&&!$.enabled||(r({[U]:{...$,enabled:!$.enabled}}),w!=="custom"&&s("custom"))},R=(U,$)=>{const W=t[U];r({[U]:{...W,weight:Math.max(.5,Math.min(2,$))}})},D=(U,$,W)=>{const H=t[U];r({[U]:{...H,params:{...H.params,[$]:W}}})},O=U=>{if(U==="custom")return;const $=Ket(U,t);r($),s(U)},B=()=>{r(Xg),s("balanced")},z=async()=>{g(!0),v(!0);const U=[],$=Object.keys(t).filter(W=>t[W].enabled);for(const W of $){const H=mZ[W];U.push({indicator:H.name,value:null,loading:!0}),h([...U]);try{const F=t[W],T=await wo.getIndicator("BTCUSDT",W,"60",F.params);U[U.length-1]={indicator:H.name,value:T.value,loading:!1}}catch(F){U[U.length-1]={indicator:H.name,value:null,loading:!1,error:F.message}}h([...U])}g(!1)};return e?d.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-4",children:[d.jsx("div",{className:"h-14 w-14 rounded-full bg-gradient-to-br from-emerald-500/30 to-cyan-500/30 flex items-center justify-center mb-4 border border-emerald-500/20",children:d.jsx(Xne,{className:"h-7 w-7 text-emerald-400"})}),d.jsx("h3",{className:"text-white font-semibold mb-2",children:"Autonomous Mode Active"}),d.jsx("p",{className:"text-xs text-gray-400 max-w-[280px] mb-4",children:"AI will analyze market conditions and choose the optimal preset each cycle:"}),d.jsx("div",{className:"grid grid-cols-2 gap-2 w-full max-w-[320px] text-[10px]",children:Object.entries(ed).filter(([U])=>U!=="custom").map(([U,$])=>d.jsxs("div",{className:"bg-gray-800/50 border border-gray-700/30 rounded-lg p-2 text-left",children:[d.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5",children:[d.jsx("span",{children:$.emoji}),d.jsx("span",{className:"text-gray-300 font-medium",children:$.name})]}),d.jsx("div",{className:"text-gray-500",children:$.marketCondition})]},U))})]}):d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-[10px] text-gray-400 uppercase tracking-wider font-semibold",children:"Presets"}),d.jsxs("span",{className:`text-[10px] font-mono ${k?"text-orange-400":"text-gray-400"}`,children:[b," / ",fte," selected"]})]}),d.jsx("div",{className:"grid grid-cols-3 gap-1.5",children:Object.entries(ed).filter(([U])=>U!=="custom").map(([U,$])=>d.jsxs("button",{onClick:()=>O(U),className:`px-2 py-1.5 rounded-lg text-[10px] font-medium transition-all border ${w===U?"bg-purple-500/20 border-purple-500/50 text-purple-300":"bg-gray-800/30 border-gray-700/30 text-gray-400 hover:border-gray-600"}`,title:$.description,children:[d.jsx("span",{className:"mr-1",children:$.emoji}),$.name]},U))}),w==="custom"&&d.jsx("div",{className:"text-[10px] text-gray-500 text-center",children:" Custom configuration"})]}),d.jsx("div",{className:"space-y-2",children:Object.entries(fN).map(([U,$])=>{const W=o===U,H=dhe(t,U),F=fhe(t,U),T=Plt[U];return d.jsxs("div",{className:`rounded-lg border ${T.border} overflow-hidden`,children:[d.jsxs("button",{onClick:()=>a(W?null:U),className:`w-full px-3 py-2 flex items-center justify-between ${T.bg}`,children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:T.text,children:_lt[U]}),d.jsx("span",{className:`text-xs font-medium ${T.text}`,children:$.name})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs("span",{className:`text-[10px] px-1.5 py-0.5 rounded font-mono ${F?"bg-orange-500/20 text-orange-400":"bg-gray-700/50 text-gray-400"}`,children:[H,"/",$.maxIndicators]}),W?d.jsx(ch,{size:14,className:"text-gray-500"}):d.jsx(aa,{size:14,className:"text-gray-500"})]})]}),W&&d.jsx("div",{className:"p-2 space-y-1.5 bg-gray-900/30",children:$.indicators.map(_=>{const L=t[_],V=mZ[_],K=CX(t,_),te=l===_;return d.jsxs("div",{className:`rounded-lg border transition-all ${L.enabled?`${T.border} ${T.bg}`:"border-gray-700/30 bg-gray-800/20"}`,children:[d.jsxs("div",{className:"px-2.5 py-1.5 flex items-center gap-2",children:[d.jsx("button",{onClick:()=>N(_),disabled:!K&&!L.enabled,className:`shrink-0 w-7 h-3.5 rounded-full relative transition-all ${L.enabled?"bg-purple-500":K?"bg-gray-600":"bg-gray-700 opacity-40 cursor-not-allowed"}`,title:!K&&!L.enabled?"Limit reached":void 0,children:d.jsx("div",{className:"absolute top-0.5 w-2.5 h-2.5 rounded-full bg-white transition-all",style:{left:L.enabled?"14px":"2px"}})}),d.jsxs("button",{onClick:()=>c(te?null:_),className:"flex items-center gap-1.5 flex-1 text-left",children:[d.jsx("span",{className:`text-xs font-medium ${L.enabled?"text-white":"text-gray-400"}`,children:V.name}),d.jsx("span",{className:"text-[9px] text-gray-500 truncate",children:V.description})]}),L.enabled&&d.jsxs("span",{className:`text-[9px] font-mono px-1 py-0.5 rounded ${L.weight>1?"bg-green-500/20 text-green-400":L.weight<1?"bg-yellow-500/20 text-yellow-400":"bg-gray-700/50 text-gray-400"}`,children:[L.weight.toFixed(1),""]}),(V.params.length>0||L.enabled)&&d.jsx("button",{onClick:()=>c(te?null:_),children:te?d.jsx(ch,{size:12,className:"text-gray-500"}):d.jsx(aa,{size:12,className:"text-gray-500"})})]}),te&&d.jsxs("div",{className:"px-2.5 pb-2 pt-1 border-t border-gray-700/30 space-y-2",children:[L.enabled&&d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-[9px] text-gray-500 w-10",children:"Weight"}),d.jsx("input",{type:"range",min:"0.5",max:"2.0",step:"0.1",value:L.weight,onChange:G=>R(_,parseFloat(G.target.value)),className:"flex-1 h-1 bg-gray-700 rounded-full appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-purple-500"}),d.jsxs("span",{className:`text-[10px] font-mono w-8 text-right ${L.weight>1?"text-green-400":L.weight<1?"text-yellow-400":"text-gray-400"}`,children:[L.weight.toFixed(1),""]})]}),V.params.length>0&&d.jsx("div",{className:"flex flex-wrap gap-1.5",children:V.params.map(G=>d.jsxs("div",{className:"flex items-center gap-1 bg-gray-900/50 px-1.5 py-0.5 rounded",children:[d.jsx("label",{className:"text-[9px] text-gray-400",children:G.label}),d.jsx("input",{type:"number",value:L.params[G.key]||G.default,onChange:q=>D(_,G.key,parseInt(q.target.value)),className:"w-10 bg-transparent border border-gray-700/50 rounded px-1 py-0.5 text-[9px] text-white focus:outline-none focus:border-purple-500"})]},G.key))})]})]},_)})})]},U)})}),d.jsxs("div",{className:"flex items-center justify-center gap-2 pt-2 border-t border-gray-700/30",children:[d.jsxs("button",{onClick:z,disabled:m||b===0,className:"flex items-center justify-center gap-1.5 bg-[#E7FE55] hover:bg-[#d4e94d] disabled:bg-gray-700 disabled:text-gray-500 text-black px-3 py-1.5 rounded text-[10px] font-bold uppercase tracking-wide transition-all",children:[m?d.jsx($l,{size:10,className:"animate-spin"}):d.jsx(ko,{size:10}),"Test (",b,")"]}),d.jsx("button",{onClick:B,className:"px-2 py-1.5 bg-gray-700 hover:bg-gray-600 text-white rounded text-[10px] transition-all",title:"Reset to Balanced Preset",children:d.jsx($l,{size:10})})]}),y&&u.length>0&&d.jsxs("div",{className:"bg-gray-900/50 rounded-lg border border-gray-700/30 p-2",children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsx("span",{className:"text-[10px] font-bold text-gray-400",children:"Results (BTC 1H)"}),d.jsx("button",{onClick:()=>{h([]),v(!1)},className:"text-[9px] text-gray-500 hover:text-gray-300",children:"Clear"})]}),d.jsx("div",{className:"space-y-1",children:u.map((U,$)=>d.jsxs("div",{className:"flex items-center justify-between text-[10px] bg-gray-800/30 px-2 py-1 rounded",children:[d.jsx("span",{className:"text-gray-300",children:U.indicator}),U.loading?d.jsx("span",{className:"text-gray-500",children:"..."}):U.error?d.jsx("span",{className:"text-red-400",title:U.error,children:"ERR"}):d.jsx("span",{className:"text-emerald-400 font-mono",children:typeof U.value=="object"?"":typeof U.value=="number"?U.value.toFixed(2):String(U.value)})]},$))})]})]})},Rlt=({status:t,onToggle:e,onUpdateSettings:n,onApplyChanges:r})=>{const i=t.settings,[s,o]=A.useState(i),[a,l]=A.useState(!1);A.useEffect(()=>{o(i)},[JSON.stringify(i)]),A.useEffect(()=>{l(JSON.stringify(s)!==JSON.stringify(i))},[s,i]);const c=w=>{o(k=>({...k,...w}))},u=()=>{n(s),r()},[h,m]=A.useState([]),[g,y]=A.useState(!1);A.useEffect(()=>{(async()=>{y(!0);try{const k=await Vt.getAllAvailableAssets();m(k.sort())}catch(k){console.error("Failed to fetch assets",k)}finally{y(!1)}})()},[]);const v=w=>{s.tradingPairs.includes(w)||c({tradingPairs:[...s.tradingPairs,w]})},b=w=>{c({tradingPairs:s.tradingPairs.filter(k=>k!==w)})};return d.jsx("div",{className:"h-full flex flex-col gap-4 overflow-y-auto custom-scrollbar",children:d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[d.jsxs("div",{className:"flex flex-col gap-4",children:[d.jsx("div",{className:"glass-panel p-4 rounded",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:`h-10 w-10 rounded flex items-center justify-center ${t.isOn?"bg-[#E7FE55]/15 text-[#E7FE55]":"bg-[#1a1b21] text-[#747580]"}`,children:d.jsx(ko,{className:"h-5 w-5"})}),d.jsxs("div",{children:[d.jsx("span",{className:"block text-sm font-semibold text-white",children:"Engine Status"}),d.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5",children:[d.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${t.isOn?"bg-[#E7FE55] animate-pulse":"bg-[#747580]"}`}),d.jsx("span",{className:"text-[10px] text-[#747580] font-medium uppercase tracking-wider",children:t.isOn?"Active & Running":"Stopped"})]})]})]}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("button",{onClick:()=>e(!t.isOn),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none ${t.isOn?"bg-[#E7FE55]":"bg-[#3a3b42]"}`,children:d.jsx("span",{className:`${t.isOn?"translate-x-6":"translate-x-1"} inline-block h-4 w-4 transform rounded-full bg-black transition-transform shadow`})}),d.jsxs("button",{onClick:u,disabled:!a,className:`flex items-center gap-2 px-3 py-1.5 rounded text-[10px] font-semibold uppercase tracking-wider transition-all active:scale-95
                                        ${a?"bg-[#E7FE55] hover:bg-[#d4e94d] text-black":"bg-[#1a1b21] text-[#747580] cursor-not-allowed opacity-50"}`,children:[d.jsx($l,{className:"h-3 w-3"})," Apply"]})]})]})}),d.jsxs("div",{className:"glass-panel p-3 rounded",children:[d.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[#E7FE55] font-bold uppercase tracking-wide mb-2",children:[d.jsx(V1,{className:"h-3 w-3"})," Capital & Risk"]}),d.jsxs("div",{className:"grid grid-cols-5 gap-2 mb-2",children:[d.jsxs("div",{className:"bg-[#0f1015] p-2 rounded border border-[#232328]",children:[d.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1",children:"Type"}),d.jsxs("div",{className:"flex gap-0.5",children:[d.jsx("button",{onClick:()=>c({bankrollType:"MANUAL"}),className:`flex-1 py-1 text-[9px] font-semibold rounded transition-all ${s.bankrollType==="MANUAL"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-white"}`,children:"Fix"}),d.jsx("button",{onClick:()=>c({bankrollType:"ALL_AVAILABLE"}),className:`flex-1 py-1 text-[9px] font-semibold rounded transition-all ${s.bankrollType==="ALL_AVAILABLE"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-white"}`,children:"Max"})]})]}),d.jsxs("div",{className:"bg-[#0f1015] p-2 rounded border border-[#232328]",children:[d.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1",children:"Amount ($)"}),s.bankrollType==="MANUAL"?d.jsx("div",{className:"flex items-center",children:d.jsx("input",{type:"number",value:s.manualBankroll,onChange:w=>c({manualBankroll:parseFloat(w.target.value)}),className:"w-full bg-transparent text-sm font-mono text-white focus:outline-none"})}):d.jsx("span",{className:"text-sm font-mono text-[#E7FE55]",children:"Auto"})]}),d.jsxs("div",{className:"bg-[#0f1015] p-2 rounded border border-[#232328]",children:[d.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1",children:"Leverage"}),d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{type:"number",value:s.maxLeverage,onChange:w=>c({maxLeverage:parseInt(w.target.value)}),className:"w-full bg-transparent text-sm font-bold font-mono text-white focus:outline-none"}),d.jsx("span",{className:"text-[14px] text-[#747580]",children:"x"})]})]}),d.jsxs("div",{className:"bg-[#0f1015] p-2 rounded border border-[#232328]",children:[d.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1",children:"Pos/Cycle"}),d.jsx("input",{type:"number",value:s.maxOpenPositions,onChange:w=>c({maxOpenPositions:parseInt(w.target.value)}),className:"w-full bg-transparent text-sm font-bold font-mono text-white focus:outline-none"})]}),d.jsxs("div",{className:"bg-[#0f1015] p-2 rounded border border-[#232328]",children:[d.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1",children:"Max Size ($)"}),d.jsx("div",{className:"flex items-center",children:d.jsx("input",{type:"number",value:s.maxPositionSizeUSDC,onChange:w=>c({maxPositionSizeUSDC:parseInt(w.target.value)}),className:"w-full bg-transparent text-sm font-bold font-mono text-white focus:outline-none"})})]})]}),d.jsxs("div",{className:"flex items-center gap-4 pt-2 border-t border-[#232328]",children:[d.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer group",children:[d.jsx(ko,{className:"h-3 w-3 text-red-400"}),d.jsx("span",{className:"text-[10px] text-[#747580] group-hover:text-white",children:"Aggressive"}),d.jsx("button",{onClick:()=>c({aggressiveMode:!s.aggressiveMode}),className:`relative inline-flex h-4 w-7 items-center rounded-full transition-colors ${s.aggressiveMode?"bg-red-500":"bg-[#3a3b42]"}`,children:d.jsx("span",{className:`${s.aggressiveMode?"translate-x-4":"translate-x-0.5"} inline-block h-2.5 w-2.5 transform rounded-full bg-white transition-transform`})})]}),d.jsx("div",{className:"w-px h-4 bg-[#232328]"}),d.jsxs("div",{className:"flex items-center gap-1.5",children:[d.jsx(cd,{className:"h-3 w-3 text-red-400"}),d.jsx("span",{className:"text-[10px] text-[#747580]",children:"STOP LOSS"}),s.stopLossEnabled&&d.jsxs(d.Fragment,{children:[d.jsx("input",{type:"number",step:"0.5",value:s.stopLossPercent??"",placeholder:"AI",onChange:w=>c({stopLossPercent:w.target.value?parseFloat(w.target.value):null}),className:"w-10 bg-[#0f1015] border border-[#232328] rounded px-1 py-0.5 text-[10px] text-white font-mono focus:outline-none placeholder:text-[#747580]"}),d.jsx("span",{className:"text-[9px] text-[#747580]",children:"%"})]}),d.jsx("button",{onClick:()=>c({stopLossEnabled:!s.stopLossEnabled}),className:`relative inline-flex h-4 w-7 items-center rounded-full transition-colors ${s.stopLossEnabled?"bg-red-500":"bg-[#3a3b42]"}`,children:d.jsx("span",{className:`${s.stopLossEnabled?"translate-x-4":"translate-x-0.5"} inline-block h-2.5 w-2.5 transform rounded-full bg-white transition-transform`})})]}),d.jsx("div",{className:"w-px h-4 bg-[#232328]"}),d.jsxs("div",{className:"flex items-center gap-1.5",children:[d.jsx(Zg,{className:"h-3 w-3 text-[#34d399]"}),d.jsx("span",{className:"text-[10px] text-[#747580]",children:"TAKE PROFIT"}),s.takeProfitEnabled&&d.jsxs(d.Fragment,{children:[d.jsx("input",{type:"number",step:"0.5",value:s.takeProfitPercent??"",placeholder:"AI",onChange:w=>c({takeProfitPercent:w.target.value?parseFloat(w.target.value):null}),className:"w-10 bg-[#0f1015] border border-[#232328] rounded px-1 py-0.5 text-[10px] text-white font-mono focus:outline-none placeholder:text-[#747580]"}),d.jsx("span",{className:"text-[9px] text-[#747580]",children:"%"})]}),d.jsx("button",{onClick:()=>c({takeProfitEnabled:!s.takeProfitEnabled}),className:`relative inline-flex h-4 w-7 items-center rounded-full transition-colors ${s.takeProfitEnabled?"bg-[#34d399]":"bg-[#3a3b42]"}`,children:d.jsx("span",{className:`${s.takeProfitEnabled?"translate-x-4":"translate-x-0.5"} inline-block h-2.5 w-2.5 transform rounded-full bg-white transition-transform`})})]})]})]}),d.jsxs("div",{className:"glass-panel p-4 rounded",children:[d.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[#E7FE55] font-bold uppercase tracking-wide mb-3",children:[d.jsx(Ml,{className:"h-3.5 w-3.5"})," Analysis Settings"]}),d.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[d.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[d.jsx("label",{className:"block text-[10px] text-[#747580] font-medium mb-1.5 uppercase tracking-wider",children:"Timeframe"}),d.jsxs("select",{className:"w-full bg-transparent text-sm font-mono text-white focus:outline-none cursor-pointer [&>option]:bg-[#0f1015]",value:s.analysisTimeframe||"60",onChange:w=>c({analysisTimeframe:w.target.value}),children:[d.jsx("option",{value:"1",children:"1m"}),d.jsx("option",{value:"5",children:"5m"}),d.jsx("option",{value:"15",children:"15m"}),d.jsx("option",{value:"60",children:"1H"}),d.jsx("option",{value:"240",children:"4H"}),d.jsx("option",{value:"D",children:"1D"})]})]}),d.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[d.jsx("label",{className:"block text-[10px] text-[#747580] font-medium mb-1.5 uppercase tracking-wider",children:"Indicators History"}),d.jsx("input",{type:"number",min:10,max:100,value:s.historyCandles||100,onChange:w=>c({historyCandles:Math.min(100,Math.max(10,parseInt(w.target.value)||100))}),className:"w-full bg-transparent text-sm font-mono text-white focus:outline-none",title:"10-100"})]}),d.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[d.jsxs("label",{className:"block text-[10px] text-[#747580] font-medium mb-1.5 uppercase tracking-wider",children:[d.jsx(Hi,{className:"inline h-3 w-3 mr-1 opacity-50"}),"Interval"]}),d.jsxs("div",{className:"flex items-baseline gap-1",children:[d.jsx("input",{type:"number",value:s.checkIntervalSeconds,onChange:w=>c({checkIntervalSeconds:Math.max(60,parseInt(w.target.value)||60)}),className:"w-full bg-transparent text-sm font-mono text-white focus:outline-none"}),d.jsx("span",{className:"text-[10px] text-[#747580]",children:"s"})]})]})]})]}),d.jsxs("div",{className:"glass-panel p-4 rounded",children:[d.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[#E7FE55] font-bold uppercase tracking-wide mb-3",children:[d.jsx(yn,{className:"h-3.5 w-3.5"})," Macro Timeframe"]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("div",{className:"flex items-center gap-2",children:d.jsx("span",{className:"text-[11px] text-[#747580]",children:"Multi-timeframe confirmation"})}),d.jsxs("div",{className:"flex items-center gap-3",children:[s.macroTimeframeEnabled&&d.jsxs("select",{className:"bg-[#0f1015] border border-[#232328] rounded py-1.5 px-2 text-[11px] text-white focus:outline-none focus:border-amber-500 [&>option]:bg-[#0f1015]",value:s.macroTimeframe||"240",onChange:w=>c({macroTimeframe:w.target.value}),children:[d.jsx("option",{value:"15",children:"15m"}),d.jsx("option",{value:"60",children:"1H"}),d.jsx("option",{value:"240",children:"4H"}),d.jsx("option",{value:"D",children:"1D"}),d.jsx("option",{value:"W",children:"1W"})]}),d.jsx("button",{onClick:()=>c({macroTimeframeEnabled:!s.macroTimeframeEnabled}),className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors ${s.macroTimeframeEnabled?"bg-amber-500":"bg-[#3a3b42]"}`,children:d.jsx("span",{className:`${s.macroTimeframeEnabled?"translate-x-5":"translate-x-1"} inline-block h-3 w-3 transform rounded-full bg-white transition-transform`})})]})]}),s.macroTimeframeEnabled&&d.jsxs("div",{className:"mt-3",children:[d.jsx("div",{className:"text-[10px] text-[#747580] mb-2 uppercase tracking-wider",children:"Active Indicators:"}),d.jsx("div",{className:"grid grid-cols-4 gap-1.5",children:Object.entries(s.indicatorSettings).filter(([w,k])=>k.enabled).map(([w,k])=>{var R;const N=(R=s.macroEnabledIndicators)==null?void 0:R.includes(w);return d.jsx("button",{onClick:()=>{const D=s.macroEnabledIndicators||[],O=D.includes(w)?D.filter(B=>B!==w):[...D,w];c({macroEnabledIndicators:O})},className:`
                                                        px-1.5 py-0.5 rounded text-[10px] font-mono border transition-all truncate
                                                        ${N?"bg-amber-500/20 border-amber-500/50 text-amber-300 hover:bg-amber-500/30":"bg-[#0f1015] border-[#232328] text-[#747580] hover:border-[#747580]"}
                                                    `,title:w.toUpperCase(),children:w.toUpperCase()},w)})}),(!s.macroEnabledIndicators||s.macroEnabledIndicators.length===0)&&d.jsxs("div",{className:"text-[10px] text-red-400 mt-2 flex items-center gap-1",children:[d.jsx(cd,{size:10})," No macro indicators selected"]})]})]}),d.jsxs("div",{className:"glass-panel p-4 rounded",children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[#E7FE55] font-bold uppercase tracking-wide",children:[d.jsx(Zg,{className:"h-3.5 w-3.5"})," Trading Pairs"]}),d.jsx("span",{className:"text-[10px] bg-[#E7FE55]/15 text-[#E7FE55] px-2 py-0.5 rounded border border-[#E7FE55]/30 font-mono",children:s.tradingPairs.length})]}),d.jsxs("select",{disabled:g,onChange:w=>{w.target.value&&v(w.target.value),w.target.value=""},className:"w-full bg-[#0f1015] border border-[#232328] rounded py-2 px-3 text-[11px] text-[#747580] focus:outline-none focus:text-white focus:border-[#E7FE55] transition-colors [&>option]:bg-[#0f1015] cursor-pointer hover:border-[#E7FE55]/30 mb-3",children:[d.jsx("option",{value:"",children:g?"Loading...":"+ Add Pair..."}),!g&&h.filter(w=>!s.tradingPairs.includes(w)).map(w=>d.jsx("option",{value:w,children:w},w))]}),d.jsxs("div",{className:"flex flex-wrap gap-1.5 max-h-[120px] overflow-y-auto custom-scrollbar",children:[s.tradingPairs.map(w=>d.jsxs("span",{className:"inline-flex items-center gap-1 bg-[#1a1b21] hover:bg-[#232328] border border-[#232328] hover:border-[#E7FE55]/50 text-[#a0a1a8] hover:text-white px-2 py-1 rounded text-[10px] font-mono transition-all",children:[w,d.jsx("button",{onClick:()=>b(w),className:"text-[#747580] hover:text-red-400 transition-colors",children:d.jsx(hx,{size:10})})]},w)),s.tradingPairs.length===0&&d.jsxs("div",{className:"w-full py-4 flex flex-col items-center justify-center text-[#747580] opacity-60 border border-dashed border-[#232328] rounded",children:[d.jsx(Zg,{className:"h-5 w-5 mb-1"}),d.jsx("span",{className:"text-[10px]",children:"No pairs"})]})]})]})]}),d.jsxs("div",{className:"glass-panel rounded flex flex-col overflow-hidden",children:[d.jsxs("div",{className:"p-3 border-b border-[#232328] flex items-center justify-between shrink-0",children:[d.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[#E7FE55] font-bold uppercase tracking-wide",children:[d.jsx(to,{className:"h-3.5 w-3.5"})," Indicators"]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-[10px] text-[#747580]",children:s.autonomousIndicators?"Auto":"Manual"}),d.jsx("button",{onClick:()=>c({autonomousIndicators:!s.autonomousIndicators}),className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors ${s.autonomousIndicators?"bg-[#34d399]":"bg-[#E7FE55]"}`,title:s.autonomousIndicators?"AI selects indicators":"Manual selection",children:d.jsx("span",{className:`${s.autonomousIndicators?"translate-x-5":"translate-x-1"} inline-block h-3 w-3 transform rounded-full bg-white transition-transform`})})]})]}),d.jsx("div",{className:"p-4",children:d.jsx(Ilt,{indicatorSettings:s.indicatorSettings,autonomousMode:s.autonomousIndicators,selectedPreset:s.selectedPreset||"balanced",onUpdateIndicatorSettings:w=>{c({indicatorSettings:{...s.indicatorSettings,...w}})},onToggleAutonomousMode:w=>{c({autonomousIndicators:w})},onSelectPreset:w=>{c({selectedPreset:w})}})})]})]})})},Olt=({status:t,onSaveStrategy:e,onUpdateSettings:n})=>{var b,w;A.useEffect(()=>{console.log("DealerPromptPage Mounted. Status:",t)},[t]);const r=t==null?void 0:t.settings;if(!r)return d.jsx("div",{className:"p-8 text-red-500",children:"Error: Dealer settings not loaded."});const[i,s]=A.useState(r.strategyPrompt||""),[o,a]=A.useState(r.promptMode||"preset"),[l,c]=A.useState(r.selectedPreset||"balanced"),[u,h]=A.useState(!1);A.useEffect(()=>{s(r.strategyPrompt),a(r.promptMode||"preset"),c(r.selectedPreset||"balanced")},[r.strategyPrompt,r.promptMode,r.selectedPreset]);const m=k=>{if(k==="custom")a("custom"),c("custom"),h(!0);else{const N=h3[k];s(N),a("preset"),c(k),h(N!==r.strategyPrompt)}},g=k=>{const N=k.target.value;s(N);const R=Object.entries(h3).find(([D,O])=>O===N);R?(a("preset"),c(R[0])):(a("custom"),c("custom")),h(N!==r.strategyPrompt)},y=()=>{e(i),n&&n({promptMode:o,selectedPreset:l,strategyPrompt:i}),h(!1)},v=k=>`
            flex items-center gap-1.5 px-3 py-1.5 rounded text-[10px] font-semibold uppercase tracking-[0.08em] transition-all
            ${l===k&&o==="preset"||o==="custom"&&k==="custom"?"bg-[#E7FE55] text-black":"bg-transparent text-[#747580] hover:text-[#a0a1a8] hover:bg-[#1a1b21]"}
        `;return d.jsxs("div",{className:"h-full flex flex-col gap-4 overflow-hidden",children:[d.jsx("div",{className:"glass-panel p-4 shrink-0",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Ow,{className:"h-4 w-4 text-[#E7FE55]"}),d.jsx("span",{className:"text-sm font-semibold text-white",children:"Strategy Prompt"})]}),d.jsxs("div",{className:`
                            inline-flex items-center gap-1.5 px-2 py-0.5 rounded text-[9px] font-semibold uppercase tracking-wider
                            ${o==="preset"?"bg-[#E7FE55]/10 text-[#E7FE55]":"bg-[#1a1b21] text-[#747580]"}
                        `,children:[d.jsx("span",{className:`h-1 w-1 rounded-full ${o==="preset"?"bg-[#E7FE55]":"bg-[#747580]"}`}),o==="preset"?`${(b=ed[l])==null?void 0:b.emoji} ${(w=ed[l])==null?void 0:w.name}`:"Custom"]}),u&&d.jsx("span",{className:"text-[9px] text-amber-500 uppercase tracking-wider font-medium",children:" Unsaved"})]}),d.jsxs("button",{onClick:y,disabled:!u,className:`
                            flex items-center gap-2 px-4 py-1.5 rounded text-[10px] font-semibold uppercase tracking-wider transition-all
                            ${u?"bg-[#E7FE55] hover:bg-[#f0ff7a] text-black":"bg-[#1a1b21] text-[#3a3b42] cursor-not-allowed"}
                        `,children:[d.jsx(T8,{className:"h-3.5 w-3.5"}),"Save"]})]})}),d.jsxs("div",{className:"flex-1 flex gap-4 min-h-0 overflow-hidden",children:[d.jsxs("div",{className:"w-40 shrink-0 flex flex-col gap-2",children:[d.jsxs("div",{className:"flex items-center gap-1.5 px-1 py-2",children:[d.jsx(nre,{size:12,className:"text-[#E7FE55]"}),d.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] font-semibold",children:"Presets"})]}),d.jsxs("div",{className:"flex flex-col gap-1",children:[Object.entries(ed).filter(([k])=>k!=="custom").map(([k,N])=>d.jsxs("button",{onClick:()=>m(k),className:v(k),children:[d.jsx("span",{children:N.emoji}),d.jsx("span",{children:N.name})]},k)),d.jsx("div",{className:"h-px bg-[#232328] my-2"}),d.jsxs("button",{onClick:()=>m("custom"),className:v("custom"),children:[d.jsx("span",{children:""}),d.jsx("span",{children:"Custom"})]})]}),d.jsx("div",{className:"mt-auto pt-4 px-1",children:d.jsx("p",{className:"text-[10px] text-[#3a3b42] leading-relaxed",children:"Edit the prompt to switch to custom mode automatically."})})]}),d.jsxs("div",{className:"flex-1 glass-panel relative overflow-hidden flex flex-col",children:[d.jsx("div",{className:"absolute inset-x-0 top-0 h-6 bg-gradient-to-b from-[#1e2028] to-transparent pointer-events-none z-10"}),d.jsx("textarea",{value:i,onChange:g,className:"w-full h-full bg-transparent text-[#a0a1a8] font-mono text-[13px] p-5 resize-none focus:outline-none leading-relaxed custom-scrollbar selection:bg-[#E7FE55]/30",spellCheck:!1,placeholder:`// Define your trading strategy here...
// 
// Example:
// You are a conservative trader focusing on mean reversion.
// 1. Only trade when RSI is above 70 or below 30.
// 2. Prioritize high volume tokens.
// 3. Never risk more than 1% of equity per trade.`}),d.jsx("div",{className:"absolute inset-x-0 bottom-0 h-6 bg-gradient-to-t from-[#1e2028] to-transparent pointer-events-none z-10"}),d.jsxs("div",{className:"absolute bottom-3 right-3 flex items-center gap-2 opacity-50 hover:opacity-100 transition-opacity",children:[d.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-[#E7FE55]"}),d.jsx("span",{className:"text-[9px] text-[#747580] font-mono uppercase tracking-wider",children:"Live Context"})]})]})]})]})};function gZ(t){const e=Mlt(t),n=A.forwardRef((r,i)=>{const{children:s,...o}=r,a=A.Children.toArray(s),l=a.find(Dlt);if(l){const c=l.props.children,u=a.map(h=>h===l?A.Children.count(c)>1?A.Children.only(null):A.isValidElement(c)?c.props.children:null:h);return d.jsx(e,{...o,ref:i,children:A.isValidElement(c)?A.cloneElement(c,void 0,u):null})}return d.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}function Mlt(t){const e=A.forwardRef((n,r)=>{const{children:i,...s}=n;if(A.isValidElement(i)){const o=Blt(i),a=jlt(s,i.props);return i.type!==A.Fragment&&(a.ref=r?Qx(r,o):o),A.cloneElement(i,a)}return A.Children.count(i)>1?A.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var Llt=Symbol("radix.slottable");function Dlt(t){return A.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Llt}function jlt(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const l=s(...a);return i(...a),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function Blt(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function upe(t){const e=t+"CollectionProvider",[n,r]=Hm(e),[i,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=v=>{const{scope:b,children:w}=v,k=_s.useRef(null),N=_s.useRef(new Map).current;return d.jsx(i,{scope:b,itemMap:N,collectionRef:k,children:w})};o.displayName=e;const a=t+"CollectionSlot",l=gZ(a),c=_s.forwardRef((v,b)=>{const{scope:w,children:k}=v,N=s(a,w),R=Pr(b,N.collectionRef);return d.jsx(l,{ref:R,children:k})});c.displayName=a;const u=t+"CollectionItemSlot",h="data-radix-collection-item",m=gZ(u),g=_s.forwardRef((v,b)=>{const{scope:w,children:k,...N}=v,R=_s.useRef(null),D=Pr(b,R),O=s(u,w);return _s.useEffect(()=>(O.itemMap.set(R,{ref:R,...N}),()=>void O.itemMap.delete(R))),d.jsx(m,{[h]:"",ref:D,children:k})});g.displayName=u;function y(v){const b=s(t+"CollectionConsumer",v);return _s.useCallback(()=>{const k=b.collectionRef.current;if(!k)return[];const N=Array.from(k.querySelectorAll(`[${h}]`));return Array.from(b.itemMap.values()).sort((O,B)=>N.indexOf(O.ref.current)-N.indexOf(B.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:o,Slot:c,ItemSlot:g},y,r]}var Ult=A.createContext(void 0);function e7(t){const e=A.useContext(Ult);return t||e||"ltr"}var p4="rovingFocusGroup.onEntryFocus",Flt={bubbles:!1,cancelable:!0},NE="RovingFocusGroup",[dD,dpe,$lt]=upe(NE),[zlt,fpe]=Hm(NE,[$lt]),[Vlt,Hlt]=zlt(NE),hpe=A.forwardRef((t,e)=>d.jsx(dD.Provider,{scope:t.__scopeRovingFocusGroup,children:d.jsx(dD.Slot,{scope:t.__scopeRovingFocusGroup,children:d.jsx(qlt,{...t,ref:e})})}));hpe.displayName=NE;var qlt=A.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...h}=t,m=A.useRef(null),g=Pr(e,m),y=e7(s),[v,b]=Ww({prop:o,defaultProp:a??null,onChange:l,caller:NE}),[w,k]=A.useState(!1),N=hh(c),R=dpe(n),D=A.useRef(!1),[O,B]=A.useState(0);return A.useEffect(()=>{const z=m.current;if(z)return z.addEventListener(p4,N),()=>z.removeEventListener(p4,N)},[N]),d.jsx(Vlt,{scope:n,orientation:r,dir:y,loop:i,currentTabStopId:v,onItemFocus:A.useCallback(z=>b(z),[b]),onItemShiftTab:A.useCallback(()=>k(!0),[]),onFocusableItemAdd:A.useCallback(()=>B(z=>z+1),[]),onFocusableItemRemove:A.useCallback(()=>B(z=>z-1),[]),children:d.jsx(Mn.div,{tabIndex:w||O===0?-1:0,"data-orientation":r,...h,ref:g,style:{outline:"none",...t.style},onMouseDown:pn(t.onMouseDown,()=>{D.current=!0}),onFocus:pn(t.onFocus,z=>{const U=!D.current;if(z.target===z.currentTarget&&U&&!w){const $=new CustomEvent(p4,Flt);if(z.currentTarget.dispatchEvent($),!$.defaultPrevented){const W=R().filter(L=>L.focusable),H=W.find(L=>L.active),F=W.find(L=>L.id===v),_=[H,F,...W].filter(Boolean).map(L=>L.ref.current);gpe(_,u)}}D.current=!1}),onBlur:pn(t.onBlur,()=>k(!1))})})}),ppe="RovingFocusGroupItem",mpe=A.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:s,children:o,...a}=t,l=rh(),c=s||l,u=Hlt(ppe,n),h=u.currentTabStopId===c,m=dpe(n),{onFocusableItemAdd:g,onFocusableItemRemove:y,currentTabStopId:v}=u;return A.useEffect(()=>{if(r)return g(),()=>y()},[r,g,y]),d.jsx(dD.ItemSlot,{scope:n,id:c,focusable:r,active:i,children:d.jsx(Mn.span,{tabIndex:h?0:-1,"data-orientation":u.orientation,...a,ref:e,onMouseDown:pn(t.onMouseDown,b=>{r?u.onItemFocus(c):b.preventDefault()}),onFocus:pn(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:pn(t.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){u.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const w=Wlt(b,u.orientation,u.dir);if(w!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let N=m().filter(R=>R.focusable).map(R=>R.ref.current);if(w==="last")N.reverse();else if(w==="prev"||w==="next"){w==="prev"&&N.reverse();const R=N.indexOf(b.currentTarget);N=u.loop?Ylt(N,R+1):N.slice(R+1)}setTimeout(()=>gpe(N))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:v!=null}):o})})});mpe.displayName=ppe;var Glt={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Klt(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Wlt(t,e,n){const r=Klt(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Glt[r]}function gpe(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function Ylt(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var Jlt=hpe,Xlt=mpe,nP="Tabs",[Qlt]=Hm(nP,[fpe]),ype=fpe(),[Zlt,t7]=Qlt(nP),xpe=A.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=t,u=e7(a),[h,m]=Ww({prop:r,onChange:i,defaultProp:s??"",caller:nP});return d.jsx(Zlt,{scope:n,baseId:rh(),value:h,onValueChange:m,orientation:o,dir:u,activationMode:l,children:d.jsx(Mn.div,{dir:u,"data-orientation":o,...c,ref:e})})});xpe.displayName=nP;var vpe="TabsList",bpe=A.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...i}=t,s=t7(vpe,n),o=ype(n);return d.jsx(Jlt,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:r,children:d.jsx(Mn.div,{role:"tablist","aria-orientation":s.orientation,...i,ref:e})})});bpe.displayName=vpe;var wpe="TabsTrigger",Epe=A.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...s}=t,o=t7(wpe,n),a=ype(n),l=Tpe(o.baseId,r),c=kpe(o.baseId,r),u=r===o.value;return d.jsx(Xlt,{asChild:!0,...a,focusable:!i,active:u,children:d.jsx(Mn.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l,...s,ref:e,onMouseDown:pn(t.onMouseDown,h=>{!i&&h.button===0&&h.ctrlKey===!1?o.onValueChange(r):h.preventDefault()}),onKeyDown:pn(t.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(r)}),onFocus:pn(t.onFocus,()=>{const h=o.activationMode!=="manual";!u&&!i&&h&&o.onValueChange(r)})})})});Epe.displayName=wpe;var Spe="TabsContent",Ape=A.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:i,children:s,...o}=t,a=t7(Spe,n),l=Tpe(a.baseId,r),c=kpe(a.baseId,r),u=r===a.value,h=A.useRef(u);return A.useEffect(()=>{const m=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(m)},[]),d.jsx(Gm,{present:i||u,children:({present:m})=>d.jsx(Mn.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!m,id:c,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:h.current?"0s":void 0},children:m&&s})})});Ape.displayName=Spe;function Tpe(t,e){return`${t}-trigger-${e}`}function kpe(t,e){return`${t}-content-${e}`}var ect=xpe,Npe=bpe,Cpe=Epe,Ppe=Ape;const _pe=ect,tct=A.forwardRef(({className:t,...e},n)=>d.jsx(Npe,{ref:n,className:Pt("inline-flex h-9 items-center justify-center rounded bg-[#1a1b21] p-1 text-[#747580] border border-[#232328]",t),...e}));tct.displayName=Npe.displayName;const nct=A.forwardRef(({className:t,...e},n)=>d.jsx(Cpe,{ref:n,className:Pt("inline-flex items-center justify-center whitespace-nowrap rounded px-4 py-1.5 text-[11px] font-medium uppercase tracking-[0.05em] ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-[#E7FE55] data-[state=active]:text-black data-[state=active]:shadow-sm hover:text-[#a0a1a8]",t),...e}));nct.displayName=Cpe.displayName;const Qu=A.forwardRef(({className:t,...e},n)=>d.jsx(Ppe,{ref:n,className:Pt("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Qu.displayName=Ppe.displayName;const rct=({vault:t,password:e,activeTab:n,setActiveTab:r})=>{const i=!!t.hlPublicKey,s=n===we.VAULT_DEALER?we.DEALER_DASHBOARD:n,{isOn:o,isAnalyzing:a,statusMessage:l,statusDetail:c,currentTask:u,currentSignal:h,trendAssessment:m,pendingExecution:g,currentExposure:y,activePositions:v,portfolioValue:b,lastSyncTimestamp:w,settings:k,logs:N,operationHistory:R,toggleDealer:D,updateSettings:O,applyChanges:B,saveStrategy:z,clearLogs:U}=Elt(t,e),$={isOn:o,isAnalyzing:a,statusMessage:l,statusDetail:c,currentTask:u,currentSignal:h,trendAssessment:m,pendingExecution:g,currentExposure:y,activePositions:v,portfolioValue:b,lastSyncTimestamp:w,settings:k,logs:N,operationHistory:R},W=()=>{switch(s){case we.DEALER_DASHBOARD:return"dashboard";case we.DEALER_THINKING:return"thinking";case we.DEALER_CONFIG:return"config";case we.DEALER_PROMPT:return"prompt";default:return"dashboard"}},H=F=>{switch(F){case"dashboard":r(we.DEALER_DASHBOARD);break;case"thinking":r(we.DEALER_THINKING);break;case"config":r(we.DEALER_CONFIG);break;case"prompt":r(we.DEALER_PROMPT);break}};return i?d.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[!t.isUnlocked&&d.jsx(Mt.div,{className:"mb-3 flex justify-end shrink-0 px-4",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},children:d.jsx(nl,{variant:"destructive",className:"animate-pulse",children:"VAULT LOCKED"})}),d.jsx(_pe,{value:W(),onValueChange:H,className:"flex-1 flex flex-col min-h-0",children:d.jsxs("div",{className:"flex-1 min-h-0 relative",children:[d.jsx(Qu,{value:"dashboard",className:"h-full mt-0 absolute inset-0",children:d.jsx(Tlt,{status:$,onToggle:D,vaultAddress:t.hlPublicKey,setActiveTab:r})}),d.jsx(Qu,{value:"thinking",className:"h-full mt-0 absolute inset-0",children:d.jsx(Clt,{status:$,onClearLogs:U})}),d.jsx(Qu,{value:"config",className:"h-full mt-0 absolute inset-0 overflow-y-auto",children:d.jsx(Rlt,{status:$,onToggle:D,onUpdateSettings:O,onApplyChanges:B,onSaveStrategy:z})}),d.jsx(Qu,{value:"prompt",className:"h-full mt-0 absolute inset-0",children:d.jsx(Olt,{status:$,onSaveStrategy:z,onUpdateSettings:O})})]})})]}):d.jsx(Mt.div,{className:"flex flex-col h-[calc(100vh-8rem)] items-center justify-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:d.jsxs("div",{className:"max-w-md w-full mx-auto space-y-6 p-8 text-center",children:[d.jsx("div",{className:"w-16 h-16 bg-[#1a1b21] rounded-full flex items-center justify-center mx-auto mb-4 border border-[#232328]",children:d.jsx(yn,{size:32,className:"text-[#34d399]"})}),d.jsx("h2",{className:"text-xl font-semibold text-white tracking-tight",children:"Create a Vault First"}),d.jsxs("p",{className:"text-[#747580] text-sm",children:["You need to create a Hyperliquid wallet before using Hyperliquid Dealer. Go to the ",d.jsx("span",{className:"text-[#34d399]",children:"Vault"})," page to set up your wallet."]}),d.jsx(Vi,{onClick:()=>r(we.VAULT),variant:"success",size:"lg",className:"mt-4",children:"Go to Vault"})]})})},ict=({vault:t,connectHLOwnerWallet:e,refreshHLBalance:n,activityLog:r=[]})=>{var F;const[i,s]=A.useState([]),[o,a]=A.useState([]),[l,c]=A.useState(new Map),[u,h]=A.useState([]),[m,g]=A.useState(""),[y,v]=A.useState(!1),[b,w]=A.useState(Date.now()),[k,N]=A.useState(!0),[R,D]=A.useState(null),O=async T=>{try{await navigator.clipboard.writeText(T),D(T),setTimeout(()=>D(null),2e3)}catch(_){console.error("Failed to copy:",_)}},B=A.useCallback(async()=>{if(t.hlPublicKey){v(!0);try{await n(t.hlPublicKey);const _=(await Un.getUserState(t.hlPublicKey)).assetPositions.filter(P=>parseFloat(P.position.szi)!==0);s(_);const L=await Un.getOpenOrders(t.hlPublicKey);a(L);const V=await Un.getAvailableAssets();h(V);const K=new Set([..._.map(P=>P.position.coin)]);["BTC","ETH","SOL","BNB","DOGE","AVAX","MATIC","ARB","OP","APT"].forEach(P=>K.add(P));const G=[...K].slice(0,15).map(async P=>{var Y,X,se,oe;try{const me=await Un.getMarketData(P),ce=parseFloat(((X=(Y=me.levels[0])==null?void 0:Y[0])==null?void 0:X.px)||0),ve=parseFloat(((oe=(se=me.levels[1])==null?void 0:se[0])==null?void 0:oe.px)||0),Ne=ve-ce,pe=ce>0?Ne/ce*100:0;return{coin:P,bid:ce,ask:ve,spread:Ne,spreadPercent:pe,lastUpdate:Date.now()}}catch(me){return console.error(`Failed to fetch market data for ${P}`,me),null}}),q=await Promise.all(G),M=new Map;q.forEach(P=>{P&&M.set(P.coin,P)}),c(M),w(Date.now())}catch(T){console.error("Failed to fetch HL data",T)}finally{v(!1)}}},[t.hlPublicKey,n]);A.useEffect(()=>{t.hlPublicKey&&B()},[t.hlPublicKey]),A.useEffect(()=>{if(!k||!t.hlPublicKey)return;const T=setInterval(()=>{B()},6e4);return()=>clearInterval(T)},[k,t.hlPublicKey,B]);const z=i.reduce((T,_)=>T+parseFloat(_.position.unrealizedPnl||0),0),U=i.reduce((T,_)=>{const L=Math.abs(parseFloat(_.position.szi)),V=parseFloat(_.position.entryPx);return T+L*V},0),$=u.filter(T=>T.toLowerCase().includes(m.toLowerCase())),W=new Set(i.map(T=>T.position.coin)),H=r.filter(T=>T.network==="hyperliquid"||T.type==="HL Order"||T.type.startsWith("HL"));return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 2xl:grid-cols-4 gap-4 lg:gap-6",children:[d.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col justify-center group",children:[d.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 group-hover:opacity-10 transition-opacity",children:d.jsx(fh,{size:48,className:"text-white"})}),d.jsx("div",{className:"flex items-center justify-between mb-2",children:d.jsx("h3",{className:"text-[10px] uppercase tracking-[0.1em] text-[#747580] font-semibold",children:"Vault Balance"})}),d.jsxs("div",{className:"text-2xl lg:text-3xl font-semibold text-white tracking-tight mb-1",children:["$",((F=t.hlBalance)==null?void 0:F.toFixed(2))||"0.00"]}),d.jsx("div",{className:"text-[11px] text-[#747580] mb-3",children:"USDC"}),d.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-[#232328]",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("input",{type:"checkbox",id:"autoRefresh",checked:k,onChange:T=>N(T.target.checked),className:"w-3.5 h-3.5 rounded border-[#232328] bg-[#1a1b21] key-emerald-600 focus:ring-emerald-500"}),d.jsx("label",{htmlFor:"autoRefresh",className:"text-[10px] text-[#747580] cursor-pointer",children:"Auto-refresh"})]}),d.jsx("button",{onClick:B,disabled:y,className:"p-1.5 hover:bg-[#1a1b21] rounded transition-colors text-[#E7FE55] hover:text-[#f0ff85] disabled:opacity-50",title:"Refresh now",children:d.jsx($l,{size:14,className:y?"animate-spin":""})})]})]}),d.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col justify-center",children:[d.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5",children:d.jsx(yn,{size:48,className:"text-white"})}),d.jsx("div",{className:"flex items-center justify-between mb-2",children:d.jsx("h3",{className:"text-[10px] uppercase tracking-[0.1em] text-[#747580] font-semibold",children:"Position Value"})}),d.jsxs("div",{className:"text-2xl lg:text-3xl font-semibold text-white tracking-tight mb-1",children:["$",U.toFixed(2)]}),d.jsxs("div",{className:"flex items-center justify-between mt-1",children:[d.jsxs("div",{className:"text-[11px] text-[#747580]",children:[i.length," open position",i.length!==1?"s":""]}),d.jsxs("a",{href:"https://app.hyperliquid-testnet.xyz",target:"_blank",rel:"noopener noreferrer",className:"text-[10px] text-[#E7FE55] hover:text-[#f0ff85] flex items-center gap-1",title:"Hyperliquid Platform Official Website",children:[d.jsx(yn,{size:10})," Hyperliquid"]})]})]}),d.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col justify-center",children:[d.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5",children:z>=0?d.jsx(yn,{size:48,className:"text-white"}):d.jsx(vm,{size:48,className:"text-white"})}),d.jsx("div",{className:"flex items-center justify-between mb-2",children:d.jsx("h3",{className:"text-[10px] uppercase tracking-[0.1em] text-[#747580] font-semibold",children:"Unrealized PnL"})}),d.jsxs("div",{className:`text-2xl lg:text-3xl font-semibold tracking-tight mb-1 ${z>=0?"text-[#34d399]":"text-red-400"}`,children:[z>=0?"+":"",z.toFixed(2)]}),d.jsx("div",{className:"text-[11px] text-[#747580] mt-1",children:"USDC"})]}),d.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col justify-center",children:[d.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5",children:d.jsx(fh,{size:48,className:"text-white"})}),d.jsx("div",{className:"flex items-center justify-between mb-2",children:d.jsx("h3",{className:"text-[10px] uppercase tracking-[0.1em] text-[#747580] font-semibold",children:"Vault Address"})}),t.hlPublicKey?d.jsxs("div",{onClick:()=>O(t.hlPublicKey),className:"flex items-center gap-2 cursor-pointer group",children:[d.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#E7FE55]"}),d.jsxs("span",{className:"text-sm font-mono text-white truncate group-hover:text-[#E7FE55] transition-colors",children:[t.hlPublicKey.slice(0,6),"...",t.hlPublicKey.slice(-4)]}),R===t.hlPublicKey?d.jsx("span",{className:"text-[10px] text-[#E7FE55] ml-auto",children:"Copied!"}):d.jsx("span",{className:"text-[10px] text-[#747580] ml-auto opacity-0 group-hover:opacity-100 transition-opacity",children:"Click to copy"})]}):d.jsx("div",{className:"text-sm font-mono text-white mb-1 truncate",children:"Not Available"}),d.jsx("div",{className:"text-[11px] text-[#747580] mt-1",children:b&&`Updated ${new Date(b).toLocaleTimeString()}`})]})]}),d.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[d.jsx(to,{size:18,className:"text-[#E7FE55]"}),"Open Positions"]}),d.jsxs("span",{className:"text-[10px] bg-[#1a1b21] text-[#747580] px-2 py-1 rounded uppercase tracking-wider",children:[i.length," active"]})]}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full text-left text-sm border-collapse",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"text-[10px] uppercase tracking-[0.05em] text-[#747580] border-b border-[#232328]",children:[d.jsx("th",{className:"py-3 pl-4 font-medium",children:"Symbol"}),d.jsx("th",{className:"py-3 font-medium",children:"Side"}),d.jsx("th",{className:"py-3 font-medium",children:"Size"}),d.jsx("th",{className:"py-3 font-medium",children:"Entry Price"}),d.jsx("th",{className:"py-3 font-medium",children:"Current Price"}),d.jsx("th",{className:"py-3 font-medium",children:"Leverage"}),d.jsx("th",{className:"py-3 font-medium",children:"Margin Type"}),d.jsx("th",{className:"py-3 font-medium",children:"Liq. Price"}),d.jsx("th",{className:"py-3 font-medium",children:"Unrealized PnL"}),d.jsx("th",{className:"py-3 pr-4 font-medium",children:"ROE"})]})}),d.jsx("tbody",{className:"text-sm",children:i.length===0?d.jsx("tr",{children:d.jsx("td",{colSpan:10,className:"p-8 text-center text-slate-500",children:"No open positions"})}):i.map((T,_)=>{var se,oe;const L=parseFloat(T.position.szi)>0,V=Math.abs(parseFloat(T.position.szi)),K=parseFloat(T.position.entryPx),te=parseFloat(T.position.unrealizedPnl),G=parseFloat(T.position.returnOnEquity),q=((se=T.position.leverage)==null?void 0:se.value)||1,M=((oe=T.position.leverage)==null?void 0:oe.type)||"cross",P=T.position.liquidationPx,Y=l.get(T.position.coin),X=L?Y==null?void 0:Y.bid:Y==null?void 0:Y.ask;return d.jsxs("tr",{className:"border-b border-[#232328]/50 last:border-0 hover:bg-[#1a1b21] transition-colors",children:[d.jsx("td",{className:"py-3 pl-4 font-medium text-white",children:T.position.coin}),d.jsx("td",{className:`py-3 font-semibold ${L?"text-[#34d399]":"text-red-400"}`,children:L?"LONG":"SHORT"}),d.jsx("td",{className:"py-3 text-[#a0a1a8]",children:V.toFixed(4)}),d.jsxs("td",{className:"py-3 text-[#a0a1a8]",children:["$",K]}),d.jsx("td",{className:"py-3 text-[#a0a1a8]",children:X?`$${X.toFixed(2)}`:"-"}),d.jsxs("td",{className:"py-3 text-[#E7FE55] font-medium",children:[q,"x"]}),d.jsx("td",{className:"py-3",children:d.jsx("span",{className:`px-2 py-1 rounded text-[10px] font-medium uppercase tracking-wider ${M==="isolated"?"bg-purple-500/15 text-purple-400":"bg-blue-500/15 text-blue-400"}`,children:M})}),d.jsx("td",{className:"py-3 text-red-400/80",children:P?`$${parseFloat(P).toFixed(2)}`:"-"}),d.jsxs("td",{className:`py-3 font-semibold ${te>=0?"text-[#34d399]":"text-red-400"}`,children:[te>=0?"+":"",te.toFixed(2)]}),d.jsxs("td",{className:`py-3 pr-4 font-medium ${G>=0?"text-[#34d399]":"text-red-400"}`,children:[G>=0?"+":"",(G*100).toFixed(2),"%"]})]},_)})})]})})]}),d.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[d.jsx(hs,{size:18,className:"text-yellow-500"}),"Open Orders"]}),d.jsxs("span",{className:"text-[10px] bg-[#1a1b21] text-[#747580] px-2 py-1 rounded uppercase tracking-wider",children:[o.length," pending"]})]}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full text-left text-sm border-collapse",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"text-[10px] uppercase tracking-[0.05em] text-[#747580] border-b border-[#232328]",children:[d.jsx("th",{className:"py-3 pl-4 font-medium",children:"Symbol"}),d.jsx("th",{className:"py-3 font-medium",children:"Side"}),d.jsx("th",{className:"py-3 font-medium",children:"Size"}),d.jsx("th",{className:"py-3 font-medium",children:"Price"}),d.jsx("th",{className:"py-3 font-medium",children:"Type"})]})}),d.jsx("tbody",{className:"text-sm",children:o.length===0?d.jsx("tr",{children:d.jsx("td",{colSpan:5,className:"p-8 text-center text-slate-500",children:"No open orders"})}):o.map((T,_)=>d.jsxs("tr",{className:"border-b border-[#232328]/50 last:border-0 hover:bg-[#1a1b21]",children:[d.jsx("td",{className:"py-3 pl-4 font-medium text-white",children:T.coin}),d.jsx("td",{className:`py-3 font-medium ${T.side==="B"?"text-[#34d399]":"text-red-400"}`,children:T.side==="B"?"BUY":"SELL"}),d.jsx("td",{className:"py-3 text-[#a0a1a8]",children:T.sz}),d.jsxs("td",{className:"py-3 text-[#a0a1a8]",children:["$",T.limitPx]}),d.jsx("td",{className:"py-3 text-[#a0a1a8]",children:T.orderType})]},_))})]})})]}),d.jsxs("div",{className:"grid grid-cols-1 2xl:grid-cols-2 gap-6",children:[d.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col",children:[d.jsx("div",{className:"flex items-center justify-between mb-4 border-b border-[#232328] pb-2",children:d.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[d.jsx(to,{size:18,className:"text-[#E7FE55]"}),"Recent Activity"]})}),d.jsx("div",{className:"flex-1",children:H.length===0?d.jsx("div",{className:"text-center py-8 text-[#747580] text-sm",children:"No recent transactions"}):d.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto pr-2 custom-scrollbar",children:H.slice(0,15).map((T,_)=>d.jsxs("div",{className:"flex items-start gap-3 pb-3 border-b border-[#232328]/50 last:border-0 border-dashed",children:[d.jsx("div",{className:"mt-1 p-1.5 rounded-full bg-[#E7FE55]/15 text-[#E7FE55]",children:d.jsx(to,{size:12})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex justify-between items-start gap-2",children:[d.jsx("span",{className:"text-xs font-medium text-[#E7FE55]",children:T.type}),d.jsx("span",{className:"text-[10px] text-[#747580] flex-shrink-0",children:new Date(T.timestamp).toLocaleTimeString()})]}),d.jsx("div",{className:"text-[11px] text-[#a0a1a8] truncate mt-0.5",children:T.desc}),T.signature&&T.signature!=="pending"&&d.jsxs("div",{className:"text-[9px] text-[#747580] font-mono mt-1 hover:text-[#E7FE55] cursor-pointer transition-colors",children:[T.signature.slice(0,6),"..."]})]})]},_))})})]}),d.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col",children:[d.jsxs("div",{className:"flex justify-between items-start mb-4 border-b border-[#232328] pb-2",children:[d.jsxs("div",{className:"flex flex-col",children:[d.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[d.jsx(yn,{size:18,className:"text-[#E7FE55]"}),"Market Data"]}),d.jsxs("span",{className:"text-[10px] text-[#747580] mt-1",children:[$.length," assets"]})]}),d.jsxs("div",{className:"relative",children:[d.jsx(N8,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-[#747580]",size:14}),d.jsx("input",{type:"text",placeholder:"Search assets...",value:m,onChange:T=>g(T.target.value),className:"w-48 pl-9 pr-3 py-1.5 bg-[#14151a] border border-[#232328] text-white rounded text-xs focus:outline-none focus:border-[#E7FE55]"})]})]}),d.jsx("div",{className:"overflow-x-auto max-h-96 custom-scrollbar",children:d.jsxs("table",{className:"w-full text-left text-sm border-collapse",children:[d.jsx("thead",{className:"sticky top-0 bg-[#0c0d10] z-10",children:d.jsxs("tr",{className:"text-[10px] uppercase tracking-[0.05em] text-[#747580] border-b border-[#232328]",children:[d.jsx("th",{className:"py-2 pl-2 font-medium",children:"Asset"}),d.jsx("th",{className:"py-2 font-medium",children:"Bid"}),d.jsx("th",{className:"py-2 font-medium",children:"Ask"}),d.jsx("th",{className:"py-2 font-medium",children:"Spread %"})]})}),d.jsx("tbody",{className:"text-sm",children:$.length===0?d.jsx("tr",{children:d.jsx("td",{colSpan:4,className:"py-8 text-center text-[#747580]",children:"No assets found"})}):$.slice(0,20).map(T=>{const _=l.get(T),L=W.has(T);return d.jsxs("tr",{className:`border-b border-[#232328]/50 last:border-0 hover:bg-[#1a1b21] transition-colors ${L?"bg-[#E7FE55]/5":""}`,children:[d.jsxs("td",{className:"py-2 pl-2 font-medium text-white flex items-center gap-2",children:[T,L&&d.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-[#E7FE55]",title:"Open Position"})]}),d.jsx("td",{className:"py-2 text-[#34d399] font-medium",children:_?`$${_.bid.toFixed(2)}`:"-"}),d.jsx("td",{className:"py-2 text-red-400 font-medium",children:_?`$${_.ask.toFixed(2)}`:"-"}),d.jsx("td",{className:"py-2 text-[#a0a1a8]",children:_?`${_.spreadPercent.toFixed(3)}%`:"-"})]},T)})})]})})]})]})]})};var m4="focusScope.autoFocusOnMount",g4="focusScope.autoFocusOnUnmount",yZ={bubbles:!1,cancelable:!0},sct="FocusScope",n7=A.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=t,[a,l]=A.useState(null),c=hh(i),u=hh(s),h=A.useRef(null),m=Pr(e,v=>l(v)),g=A.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;A.useEffect(()=>{if(r){let v=function(N){if(g.paused||!a)return;const R=N.target;a.contains(R)?h.current=R:Nf(h.current,{select:!0})},b=function(N){if(g.paused||!a)return;const R=N.relatedTarget;R!==null&&(a.contains(R)||Nf(h.current,{select:!0}))},w=function(N){if(document.activeElement===document.body)for(const D of N)D.removedNodes.length>0&&Nf(a)};document.addEventListener("focusin",v),document.addEventListener("focusout",b);const k=new MutationObserver(w);return a&&k.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",b),k.disconnect()}}},[r,a,g.paused]),A.useEffect(()=>{if(a){vZ.add(g);const v=document.activeElement;if(!a.contains(v)){const w=new CustomEvent(m4,yZ);a.addEventListener(m4,c),a.dispatchEvent(w),w.defaultPrevented||(oct(dct(Ipe(a)),{select:!0}),document.activeElement===v&&Nf(a))}return()=>{a.removeEventListener(m4,c),setTimeout(()=>{const w=new CustomEvent(g4,yZ);a.addEventListener(g4,u),a.dispatchEvent(w),w.defaultPrevented||Nf(v??document.body,{select:!0}),a.removeEventListener(g4,u),vZ.remove(g)},0)}}},[a,c,u,g]);const y=A.useCallback(v=>{if(!n&&!r||g.paused)return;const b=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,w=document.activeElement;if(b&&w){const k=v.currentTarget,[N,R]=act(k);N&&R?!v.shiftKey&&w===R?(v.preventDefault(),n&&Nf(N,{select:!0})):v.shiftKey&&w===N&&(v.preventDefault(),n&&Nf(R,{select:!0})):w===k&&v.preventDefault()}},[n,r,g.paused]);return d.jsx(Mn.div,{tabIndex:-1,...o,ref:m,onKeyDown:y})});n7.displayName=sct;function oct(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Nf(r,{select:e}),document.activeElement!==n)return}function act(t){const e=Ipe(t),n=xZ(e,t),r=xZ(e.reverse(),t);return[n,r]}function Ipe(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function xZ(t,e){for(const n of t)if(!lct(n,{upTo:e}))return n}function lct(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function cct(t){return t instanceof HTMLInputElement&&"select"in t}function Nf(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&cct(t)&&e&&t.select()}}var vZ=uct();function uct(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=bZ(t,e),t.unshift(e)},remove(e){var n;t=bZ(t,e),(n=t[0])==null||n.resume()}}}function bZ(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function dct(t){return t.filter(e=>e.tagName!=="A")}var y4=0;function Rpe(){A.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??wZ()),document.body.insertAdjacentElement("beforeend",t[1]??wZ()),y4++,()=>{y4===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),y4--}},[])}function wZ(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var FT="right-scroll-bar-position",$T="width-before-scroll-bar",fct="with-scroll-bars-hidden",hct="--removed-body-scroll-bar-size";function x4(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function pct(t,e){var n=A.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var mct=typeof window<"u"?A.useLayoutEffect:A.useEffect,EZ=new WeakMap;function gct(t,e){var n=pct(null,function(r){return t.forEach(function(i){return x4(i,r)})});return mct(function(){var r=EZ.get(n);if(r){var i=new Set(r),s=new Set(t),o=n.current;i.forEach(function(a){s.has(a)||x4(a,null)}),s.forEach(function(a){i.has(a)||x4(a,o)})}EZ.set(n,t)},[t]),n}function yct(t){return t}function xct(t,e){e===void 0&&(e=yct);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var u=o;o=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),n}}}};return i}function vct(t){t===void 0&&(t={});var e=xct(null);return e.options=Sc({async:!0,ssr:!1},t),e}var Ope=function(t){var e=t.sideCar,n=$x(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return A.createElement(r,Sc({},n))};Ope.isSideCarExport=!0;function bct(t,e){return t.useMedium(e),Ope}var Mpe=vct(),v4=function(){},rP=A.forwardRef(function(t,e){var n=A.useRef(null),r=A.useState({onScrollCapture:v4,onWheelCapture:v4,onTouchMoveCapture:v4}),i=r[0],s=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,h=t.shards,m=t.sideCar,g=t.noRelative,y=t.noIsolation,v=t.inert,b=t.allowPinchZoom,w=t.as,k=w===void 0?"div":w,N=t.gapMode,R=$x(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),D=m,O=gct([n,e]),B=Sc(Sc({},R),i);return A.createElement(A.Fragment,null,u&&A.createElement(D,{sideCar:Mpe,removeScrollBar:c,shards:h,noRelative:g,noIsolation:y,inert:v,setCallbacks:s,allowPinchZoom:!!b,lockRef:n,gapMode:N}),o?A.cloneElement(A.Children.only(a),Sc(Sc({},B),{ref:O})):A.createElement(k,Sc({},B,{className:l,ref:O}),a))});rP.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};rP.classNames={fullWidth:$T,zeroRight:FT};var wct=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Ect(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=wct();return e&&t.setAttribute("nonce",e),t}function Sct(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function Act(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var Tct=function(){var t=0,e=null;return{add:function(n){t==0&&(e=Ect())&&(Sct(e,n),Act(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},kct=function(){var t=Tct();return function(e,n){A.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},Lpe=function(){var t=kct(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},Nct={left:0,top:0,right:0,gap:0},b4=function(t){return parseInt(t||"",10)||0},Cct=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[b4(n),b4(r),b4(i)]},Pct=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return Nct;var e=Cct(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},_ct=Lpe(),my="data-scroll-locked",Ict=function(t,e,n,r){var i=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(fct,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(my,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(FT,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat($T,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(FT," .").concat(FT,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat($T," .").concat($T,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(my,`] {
    `).concat(hct,": ").concat(a,`px;
  }
`)},SZ=function(){var t=parseInt(document.body.getAttribute(my)||"0",10);return isFinite(t)?t:0},Rct=function(){A.useEffect(function(){return document.body.setAttribute(my,(SZ()+1).toString()),function(){var t=SZ()-1;t<=0?document.body.removeAttribute(my):document.body.setAttribute(my,t.toString())}},[])},Oct=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;Rct();var s=A.useMemo(function(){return Pct(i)},[i]);return A.createElement(_ct,{styles:Ict(s,!e,i,n?"":"!important")})},fD=!1;if(typeof window<"u")try{var KA=Object.defineProperty({},"passive",{get:function(){return fD=!0,!0}});window.addEventListener("test",KA,KA),window.removeEventListener("test",KA,KA)}catch{fD=!1}var cg=fD?{passive:!1}:!1,Mct=function(t){return t.tagName==="TEXTAREA"},Dpe=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!Mct(t)&&n[e]==="visible")},Lct=function(t){return Dpe(t,"overflowY")},Dct=function(t){return Dpe(t,"overflowX")},AZ=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=jpe(t,r);if(i){var s=Bpe(t,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},jct=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},Bct=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},jpe=function(t,e){return t==="v"?Lct(e):Dct(e)},Bpe=function(t,e){return t==="v"?jct(e):Bct(e)},Uct=function(t,e){return t==="h"&&e==="rtl"?-1:1},Fct=function(t,e,n,r,i){var s=Uct(t,window.getComputedStyle(e).direction),o=s*r,a=n.target,l=e.contains(a),c=!1,u=o>0,h=0,m=0;do{if(!a)break;var g=Bpe(t,a),y=g[0],v=g[1],b=g[2],w=v-b-s*y;(y||w)&&jpe(t,a)&&(h+=w,m+=y);var k=a.parentNode;a=k&&k.nodeType===Node.DOCUMENT_FRAGMENT_NODE?k.host:k}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&Math.abs(h)<1||!u&&Math.abs(m)<1)&&(c=!0),c},WA=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},TZ=function(t){return[t.deltaX,t.deltaY]},kZ=function(t){return t&&"current"in t?t.current:t},$ct=function(t,e){return t[0]===e[0]&&t[1]===e[1]},zct=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Vct=0,ug=[];function Hct(t){var e=A.useRef([]),n=A.useRef([0,0]),r=A.useRef(),i=A.useState(Vct++)[0],s=A.useState(Lpe)[0],o=A.useRef(t);A.useEffect(function(){o.current=t},[t]),A.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var v=Wxe([t.lockRef.current],(t.shards||[]).map(kZ),!0).filter(Boolean);return v.forEach(function(b){return b.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),v.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var a=A.useCallback(function(v,b){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!o.current.allowPinchZoom;var w=WA(v),k=n.current,N="deltaX"in v?v.deltaX:k[0]-w[0],R="deltaY"in v?v.deltaY:k[1]-w[1],D,O=v.target,B=Math.abs(N)>Math.abs(R)?"h":"v";if("touches"in v&&B==="h"&&O.type==="range")return!1;var z=window.getSelection(),U=z&&z.anchorNode,$=U?U===O||U.contains(O):!1;if($)return!1;var W=AZ(B,O);if(!W)return!0;if(W?D=B:(D=B==="v"?"h":"v",W=AZ(B,O)),!W)return!1;if(!r.current&&"changedTouches"in v&&(N||R)&&(r.current=D),!D)return!0;var H=r.current||D;return Fct(H,b,v,H==="h"?N:R)},[]),l=A.useCallback(function(v){var b=v;if(!(!ug.length||ug[ug.length-1]!==s)){var w="deltaY"in b?TZ(b):WA(b),k=e.current.filter(function(D){return D.name===b.type&&(D.target===b.target||b.target===D.shadowParent)&&$ct(D.delta,w)})[0];if(k&&k.should){b.cancelable&&b.preventDefault();return}if(!k){var N=(o.current.shards||[]).map(kZ).filter(Boolean).filter(function(D){return D.contains(b.target)}),R=N.length>0?a(b,N[0]):!o.current.noIsolation;R&&b.cancelable&&b.preventDefault()}}},[]),c=A.useCallback(function(v,b,w,k){var N={name:v,delta:b,target:w,should:k,shadowParent:qct(w)};e.current.push(N),setTimeout(function(){e.current=e.current.filter(function(R){return R!==N})},1)},[]),u=A.useCallback(function(v){n.current=WA(v),r.current=void 0},[]),h=A.useCallback(function(v){c(v.type,TZ(v),v.target,a(v,t.lockRef.current))},[]),m=A.useCallback(function(v){c(v.type,WA(v),v.target,a(v,t.lockRef.current))},[]);A.useEffect(function(){return ug.push(s),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",l,cg),document.addEventListener("touchmove",l,cg),document.addEventListener("touchstart",u,cg),function(){ug=ug.filter(function(v){return v!==s}),document.removeEventListener("wheel",l,cg),document.removeEventListener("touchmove",l,cg),document.removeEventListener("touchstart",u,cg)}},[]);var g=t.removeScrollBar,y=t.inert;return A.createElement(A.Fragment,null,y?A.createElement(s,{styles:zct(i)}):null,g?A.createElement(Oct,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function qct(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const Gct=bct(Mpe,Hct);var r7=A.forwardRef(function(t,e){return A.createElement(rP,Sc({},t,{ref:e,sideCar:Gct}))});r7.classNames=rP.classNames;var Kct=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},dg=new WeakMap,YA=new WeakMap,JA={},w4=0,Upe=function(t){return t&&(t.host||Upe(t.parentNode))},Wct=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=Upe(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},Yct=function(t,e,n,r){var i=Wct(e,Array.isArray(t)?t:[t]);JA[n]||(JA[n]=new WeakMap);var s=JA[n],o=[],a=new Set,l=new Set(i),c=function(h){!h||a.has(h)||(a.add(h),c(h.parentNode))};i.forEach(c);var u=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(m){if(a.has(m))u(m);else try{var g=m.getAttribute(r),y=g!==null&&g!=="false",v=(dg.get(m)||0)+1,b=(s.get(m)||0)+1;dg.set(m,v),s.set(m,b),o.push(m),v===1&&y&&YA.set(m,!0),b===1&&m.setAttribute(n,"true"),y||m.setAttribute(r,"true")}catch(w){console.error("aria-hidden: cannot operate on ",m,w)}})};return u(e),a.clear(),w4++,function(){o.forEach(function(h){var m=dg.get(h)-1,g=s.get(h)-1;dg.set(h,m),s.set(h,g),m||(YA.has(h)||h.removeAttribute(r),YA.delete(h)),g||h.removeAttribute(n)}),w4--,w4||(dg=new WeakMap,dg=new WeakMap,YA=new WeakMap,JA={})}},Fpe=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=Kct(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),Yct(r,i,n,"aria-hidden")):function(){return null}};function Jct(t){const e=Xct(t),n=A.forwardRef((r,i)=>{const{children:s,...o}=r,a=A.Children.toArray(s),l=a.find(Zct);if(l){const c=l.props.children,u=a.map(h=>h===l?A.Children.count(c)>1?A.Children.only(null):A.isValidElement(c)?c.props.children:null:h);return d.jsx(e,{...o,ref:i,children:A.isValidElement(c)?A.cloneElement(c,void 0,u):null})}return d.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}function Xct(t){const e=A.forwardRef((n,r)=>{const{children:i,...s}=n;if(A.isValidElement(i)){const o=tut(i),a=eut(s,i.props);return i.type!==A.Fragment&&(a.ref=r?Qx(r,o):o),A.cloneElement(i,a)}return A.Children.count(i)>1?A.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var Qct=Symbol("radix.slottable");function Zct(t){return A.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Qct}function eut(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const l=s(...a);return i(...a),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function tut(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var iP="Dialog",[$pe]=Hm(iP),[nut,Xl]=$pe(iP),zpe=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!0}=t,a=A.useRef(null),l=A.useRef(null),[c,u]=Ww({prop:r,defaultProp:i??!1,onChange:s,caller:iP});return d.jsx(nut,{scope:e,triggerRef:a,contentRef:l,contentId:rh(),titleId:rh(),descriptionId:rh(),open:c,onOpenChange:u,onOpenToggle:A.useCallback(()=>u(h=>!h),[u]),modal:o,children:n})};zpe.displayName=iP;var Vpe="DialogTrigger",rut=A.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Xl(Vpe,n),s=Pr(e,i.triggerRef);return d.jsx(Mn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":o7(i.open),...r,ref:s,onClick:pn(t.onClick,i.onOpenToggle)})});rut.displayName=Vpe;var i7="DialogPortal",[iut,Hpe]=$pe(i7,{forceMount:void 0}),qpe=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,s=Xl(i7,e);return d.jsx(iut,{scope:e,forceMount:n,children:A.Children.map(r,o=>d.jsx(Gm,{present:n||s.open,children:d.jsx(VN,{asChild:!0,container:i,children:o})}))})};qpe.displayName=i7;var $2="DialogOverlay",Gpe=A.forwardRef((t,e)=>{const n=Hpe($2,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=Xl($2,t.__scopeDialog);return s.modal?d.jsx(Gm,{present:r||s.open,children:d.jsx(out,{...i,ref:e})}):null});Gpe.displayName=$2;var sut=Jct("DialogOverlay.RemoveScroll"),out=A.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Xl($2,n);return d.jsx(r7,{as:sut,allowPinchZoom:!0,shards:[i.contentRef],children:d.jsx(Mn.div,{"data-state":o7(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Dm="DialogContent",Kpe=A.forwardRef((t,e)=>{const n=Hpe(Dm,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=Xl(Dm,t.__scopeDialog);return d.jsx(Gm,{present:r||s.open,children:s.modal?d.jsx(aut,{...i,ref:e}):d.jsx(lut,{...i,ref:e})})});Kpe.displayName=Dm;var aut=A.forwardRef((t,e)=>{const n=Xl(Dm,t.__scopeDialog),r=A.useRef(null),i=Pr(e,n.contentRef,r);return A.useEffect(()=>{const s=r.current;if(s)return Fpe(s)},[]),d.jsx(Wpe,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:pn(t.onCloseAutoFocus,s=>{var o;s.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:pn(t.onPointerDownOutside,s=>{const o=s.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&s.preventDefault()}),onFocusOutside:pn(t.onFocusOutside,s=>s.preventDefault())})}),lut=A.forwardRef((t,e)=>{const n=Xl(Dm,t.__scopeDialog),r=A.useRef(!1),i=A.useRef(!1);return d.jsx(Wpe,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,s),s.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),Wpe=A.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...o}=t,a=Xl(Dm,n),l=A.useRef(null),c=Pr(e,l);return Rpe(),d.jsxs(d.Fragment,{children:[d.jsx(n7,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:d.jsx(jN,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":o7(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),d.jsxs(d.Fragment,{children:[d.jsx(cut,{titleId:a.titleId}),d.jsx(dut,{contentRef:l,descriptionId:a.descriptionId})]})]})}),s7="DialogTitle",Ype=A.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Xl(s7,n);return d.jsx(Mn.h2,{id:i.titleId,...r,ref:e})});Ype.displayName=s7;var Jpe="DialogDescription",Xpe=A.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Xl(Jpe,n);return d.jsx(Mn.p,{id:i.descriptionId,...r,ref:e})});Xpe.displayName=Jpe;var Qpe="DialogClose",Zpe=A.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Xl(Qpe,n);return d.jsx(Mn.button,{type:"button",...r,ref:e,onClick:pn(t.onClick,()=>i.onOpenChange(!1))})});Zpe.displayName=Qpe;function o7(t){return t?"open":"closed"}var eme="DialogTitleWarning",[Sgt,tme]=WIe(eme,{contentName:Dm,titleName:s7,docsSlug:"dialog"}),cut=({titleId:t})=>{const e=tme(eme),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return A.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},uut="DialogDescriptionWarning",dut=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${tme(uut).contentName}}.`;return A.useEffect(()=>{var s;const i=(s=t.current)==null?void 0:s.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},fut=zpe,hut=qpe,nme=Gpe,rme=Kpe,ime=Ype,sme=Xpe,put=Zpe;const bv=fut,mut=hut,ome=A.forwardRef(({className:t,...e},n)=>d.jsx(nme,{ref:n,className:Pt("fixed inset-0 z-50 bg-black/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));ome.displayName=nme.displayName;const Xm=A.forwardRef(({className:t,children:e,...n},r)=>d.jsxs(mut,{children:[d.jsx(ome,{}),d.jsxs(rme,{ref:r,className:Pt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-slate-700 bg-slate-900 p-6 shadow-2xl duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-xl",t),...n,children:[e,d.jsxs(put,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[d.jsx(hx,{className:"h-4 w-4"}),d.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Xm.displayName=rme.displayName;const Qm=({className:t,...e})=>d.jsx("div",{className:Pt("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});Qm.displayName="DialogHeader";const wv=({className:t,...e})=>d.jsx("div",{className:Pt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});wv.displayName="DialogFooter";const Zm=A.forwardRef(({className:t,...e},n)=>d.jsx(ime,{ref:n,className:Pt("text-lg font-semibold leading-none tracking-tight text-white",t),...e}));Zm.displayName=ime.displayName;const e0=A.forwardRef(({className:t,...e},n)=>d.jsx(sme,{ref:n,className:Pt("text-sm text-muted-foreground",t),...e}));e0.displayName=sme.displayName;const gut=({backupKey:t,setBackupKey:e,setShowBackupModal:n,addNotification:r,onClose:i})=>{const s=async()=>{try{await navigator.clipboard.writeText(t),r("Private key copied to clipboard")}catch{r("Failed to copy to clipboard")}},o=()=>{e(""),n(!1),r("Solana backup confirmed!"),i&&i()};return d.jsx(bv,{open:!0,onOpenChange:()=>{},children:d.jsxs(Xm,{className:"max-w-md",onPointerDownOutside:a=>a.preventDefault(),children:[d.jsxs(Qm,{children:[d.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[d.jsx("div",{className:"w-10 h-10 bg-purple-500/20 rounded-full flex items-center justify-center",children:d.jsx(cd,{className:"text-purple-400 w-5 h-5"})}),d.jsx("div",{children:d.jsxs(Zm,{className:"flex items-center gap-2",children:["Backup Your Solana Key",d.jsx(nl,{variant:"purple",children:"CRITICAL"})]})})]}),d.jsx(e0,{children:"This is your Solana wallet private key. Save it securely - you will NOT see it again."})]}),d.jsxs(Mt.div,{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-3 flex items-start gap-2",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:[d.jsx(hs,{className:"text-red-400 w-5 h-5 shrink-0 mt-0.5"}),d.jsxs("p",{className:"text-red-400 text-sm",children:[d.jsx("strong",{children:"Warning:"})," Anyone with this key can access your funds. Never share it with anyone."]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-slate-700",children:[d.jsx("p",{className:"text-[10px] uppercase text-slate-500 font-bold mb-2",children:"Private Key"}),d.jsx("div",{className:"font-mono text-xs text-slate-300 break-all bg-black/30 p-3 rounded border border-slate-700/50",children:t})]}),d.jsxs(Vi,{onClick:s,variant:"outline",className:"w-full",children:[d.jsx(cm,{className:"w-4 h-4 mr-2"}),"Copy to Clipboard"]})]}),d.jsx(wv,{children:d.jsx(Vi,{onClick:o,variant:"success",className:"w-full",children:"I've Saved My Key Securely"})})]})})},yut=({backupKey:t,setBackupKey:e,setShowBackupModal:n,addNotification:r})=>{const i=async()=>{try{await navigator.clipboard.writeText(t),r("Hyperliquid private key copied to clipboard")}catch{r("Failed to copy to clipboard")}},s=()=>{e(""),n(!1),r("Hyperliquid backup confirmed!")};return d.jsx(bv,{open:!0,onOpenChange:()=>{},children:d.jsxs(Xm,{className:"max-w-md",onPointerDownOutside:o=>o.preventDefault(),children:[d.jsxs(Qm,{children:[d.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[d.jsx("div",{className:"w-10 h-10 bg-emerald-500/20 rounded-full flex items-center justify-center",children:d.jsx(cd,{className:"text-emerald-400 w-5 h-5"})}),d.jsx("div",{children:d.jsxs(Zm,{className:"flex items-center gap-2",children:["Backup Your Hyperliquid Key",d.jsx(nl,{variant:"success",children:"CRITICAL"})]})})]}),d.jsx(e0,{children:"This is your Hyperliquid (EVM) wallet private key. Save it securely - you will NOT see it again."})]}),d.jsxs(Mt.div,{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-3 flex items-start gap-2",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:[d.jsx(hs,{className:"text-red-400 w-5 h-5 shrink-0 mt-0.5"}),d.jsxs("p",{className:"text-red-400 text-sm",children:[d.jsx("strong",{children:"Warning:"})," Anyone with this key can access your funds. Never share it with anyone."]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-slate-700",children:[d.jsx("p",{className:"text-[10px] uppercase text-slate-500 font-bold mb-2",children:"Private Key (EVM)"}),d.jsx("div",{className:"font-mono text-xs text-slate-300 break-all bg-black/30 p-3 rounded border border-slate-700/50",children:t})]}),d.jsxs(Vi,{onClick:i,variant:"outline",className:"w-full",children:[d.jsx(cm,{className:"w-4 h-4 mr-2"}),"Copy to Clipboard"]})]}),d.jsx(wv,{children:d.jsx(Vi,{onClick:s,variant:"success",className:"w-full",children:"I've Saved My Key Securely"})})]})})},xut=({backupKey:t,setBackupKey:e,setShowBackupModal:n,addNotification:r})=>{const i=async()=>{try{await navigator.clipboard.writeText(t),r("Polymarket private key copied to clipboard")}catch{r("Failed to copy to clipboard")}},s=()=>{e(""),n(!1),r("Polymarket backup confirmed!")};return d.jsx(bv,{open:!0,onOpenChange:()=>{},children:d.jsxs(Xm,{className:"max-w-md",onPointerDownOutside:o=>o.preventDefault(),children:[d.jsxs(Qm,{children:[d.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[d.jsx("div",{className:"w-10 h-10 bg-purple-500/20 rounded-full flex items-center justify-center",children:d.jsx(cd,{className:"text-purple-400 w-5 h-5"})}),d.jsx("div",{children:d.jsxs(Zm,{className:"flex items-center gap-2",children:["Backup Your Polymarket Key",d.jsx(nl,{variant:"destructive",children:"CRITICAL"})]})})]}),d.jsx(e0,{children:"This is your Polymarket (Polygon) wallet private key. Save it securely - you will NOT see it again."})]}),d.jsxs(Mt.div,{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-3 flex items-start gap-2",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:[d.jsx(hs,{className:"text-red-400 w-5 h-5 shrink-0 mt-0.5"}),d.jsxs("p",{className:"text-red-400 text-sm",children:[d.jsx("strong",{children:"Warning:"})," Anyone with this key can access your Polygon funds. Never share it with anyone."]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-slate-700",children:[d.jsx("p",{className:"text-[10px] uppercase text-slate-500 font-bold mb-2",children:"Private Key (Polygon EVM)"}),d.jsx("div",{className:"font-mono text-xs text-slate-300 break-all bg-black/30 p-3 rounded border border-slate-700/50",children:t})]}),d.jsxs(Vi,{onClick:i,variant:"outline",className:"w-full",children:[d.jsx(cm,{className:"w-4 h-4 mr-2"}),"Copy to Clipboard"]})]}),d.jsx(wv,{children:d.jsx(Vi,{onClick:s,variant:"success",className:"w-full",children:"I've Saved My Key Securely"})})]})})},fg=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function CE(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function hD(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function t0(t,...e){if(!CE(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function ame(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");hD(t.outputLen),hD(t.blockLen)}function z2(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function vut(t,e){t0(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Lx(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function E4(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function oc(t,e){return t<<32-e|t>>>e}const lme=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",but=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function ym(t){if(t0(t),lme)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=but[t[n]];return e}const bu={_0:48,_9:57,A:65,F:70,a:97,f:102};function NZ(t){if(t>=bu._0&&t<=bu._9)return t-bu._0;if(t>=bu.A&&t<=bu.F)return t-(bu.A-10);if(t>=bu.a&&t<=bu.f)return t-(bu.a-10)}function V2(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(lme)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let i=0,s=0;i<n;i++,s+=2){const o=NZ(t.charCodeAt(s)),a=NZ(t.charCodeAt(s+1));if(o===void 0||a===void 0){const l=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+l+'" at index '+s)}r[i]=o*16+a}return r}function wut(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function a7(t){return typeof t=="string"&&(t=wut(t)),t0(t),t}function Nc(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];t0(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}class cme{}function ume(t){const e=r=>t().update(a7(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function l7(t=32){if(fg&&typeof fg.getRandomValues=="function")return fg.getRandomValues(new Uint8Array(t));if(fg&&typeof fg.randomBytes=="function")return Uint8Array.from(fg.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}function Eut(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),l=r?4:0,c=r?0:4;t.setUint32(e+l,o,r),t.setUint32(e+c,a,r)}function Sut(t,e,n){return t&e^~t&n}function Aut(t,e,n){return t&e^t&n^e&n}class dme extends cme{constructor(e,n,r,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.buffer=new Uint8Array(e),this.view=E4(this.buffer)}update(e){z2(this),e=a7(e),t0(e);const{view:n,buffer:r,blockLen:i}=this,s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=E4(e);for(;i<=s-o;o+=i)this.process(l,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){z2(this),vut(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,Lx(this.buffer.subarray(o)),this.padOffset>i-o&&(this.process(r,0),o=0);for(let h=o;h<i;h++)n[h]=0;Eut(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=E4(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=l/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<c;h++)a.setUint32(4*h,u[h],s)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=s,e.length=i,e.pos=a,i%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const xf=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),xs=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),XA=BigInt(2**32-1),CZ=BigInt(32);function Tut(t,e=!1){return e?{h:Number(t&XA),l:Number(t>>CZ&XA)}:{h:Number(t>>CZ&XA)|0,l:Number(t&XA)|0}}function kut(t,e=!1){const n=t.length;let r=new Uint32Array(n),i=new Uint32Array(n);for(let s=0;s<n;s++){const{h:o,l:a}=Tut(t[s],e);[r[s],i[s]]=[o,a]}return[r,i]}const PZ=(t,e,n)=>t>>>n,_Z=(t,e,n)=>t<<32-n|e>>>n,hg=(t,e,n)=>t>>>n|e<<32-n,pg=(t,e,n)=>t<<32-n|e>>>n,QA=(t,e,n)=>t<<64-n|e>>>n-32,ZA=(t,e,n)=>t>>>n-32|e<<64-n;function wu(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:i|0}}const Nut=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),Cut=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,Put=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),_ut=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0,Iut=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0),Rut=(t,e,n,r,i,s)=>e+n+r+i+s+(t/2**32|0)|0,Out=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),vf=new Uint32Array(64);class Mut extends dme{constructor(e=32){super(64,e,8,!1),this.A=xf[0]|0,this.B=xf[1]|0,this.C=xf[2]|0,this.D=xf[3]|0,this.E=xf[4]|0,this.F=xf[5]|0,this.G=xf[6]|0,this.H=xf[7]|0}get(){const{A:e,B:n,C:r,D:i,E:s,F:o,G:a,H:l}=this;return[e,n,r,i,s,o,a,l]}set(e,n,r,i,s,o,a,l){this.A=e|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(e,n){for(let h=0;h<16;h++,n+=4)vf[h]=e.getUint32(n,!1);for(let h=16;h<64;h++){const m=vf[h-15],g=vf[h-2],y=oc(m,7)^oc(m,18)^m>>>3,v=oc(g,17)^oc(g,19)^g>>>10;vf[h]=v+vf[h-7]+y+vf[h-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:l,G:c,H:u}=this;for(let h=0;h<64;h++){const m=oc(a,6)^oc(a,11)^oc(a,25),g=u+m+Sut(a,l,c)+Out[h]+vf[h]|0,v=(oc(r,2)^oc(r,13)^oc(r,22))+Aut(r,i,s)|0;u=c,c=l,l=a,a=o+g|0,o=s,s=i,i=r,r=g+v|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(r,i,s,o,a,l,c,u)}roundClean(){Lx(vf)}destroy(){this.set(0,0,0,0,0,0,0,0),Lx(this.buffer)}}const fme=kut(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Lut=fme[0],Dut=fme[1],bf=new Uint32Array(80),wf=new Uint32Array(80);class jut extends dme{constructor(e=64){super(128,e,16,!1),this.Ah=xs[0]|0,this.Al=xs[1]|0,this.Bh=xs[2]|0,this.Bl=xs[3]|0,this.Ch=xs[4]|0,this.Cl=xs[5]|0,this.Dh=xs[6]|0,this.Dl=xs[7]|0,this.Eh=xs[8]|0,this.El=xs[9]|0,this.Fh=xs[10]|0,this.Fl=xs[11]|0,this.Gh=xs[12]|0,this.Gl=xs[13]|0,this.Hh=xs[14]|0,this.Hl=xs[15]|0}get(){const{Ah:e,Al:n,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:l,Eh:c,El:u,Fh:h,Fl:m,Gh:g,Gl:y,Hh:v,Hl:b}=this;return[e,n,r,i,s,o,a,l,c,u,h,m,g,y,v,b]}set(e,n,r,i,s,o,a,l,c,u,h,m,g,y,v,b){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=c|0,this.El=u|0,this.Fh=h|0,this.Fl=m|0,this.Gh=g|0,this.Gl=y|0,this.Hh=v|0,this.Hl=b|0}process(e,n){for(let N=0;N<16;N++,n+=4)bf[N]=e.getUint32(n),wf[N]=e.getUint32(n+=4);for(let N=16;N<80;N++){const R=bf[N-15]|0,D=wf[N-15]|0,O=hg(R,D,1)^hg(R,D,8)^PZ(R,D,7),B=pg(R,D,1)^pg(R,D,8)^_Z(R,D,7),z=bf[N-2]|0,U=wf[N-2]|0,$=hg(z,U,19)^QA(z,U,61)^PZ(z,U,6),W=pg(z,U,19)^ZA(z,U,61)^_Z(z,U,6),H=Put(B,W,wf[N-7],wf[N-16]),F=_ut(H,O,$,bf[N-7],bf[N-16]);bf[N]=F|0,wf[N]=H|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:l,Dh:c,Dl:u,Eh:h,El:m,Fh:g,Fl:y,Gh:v,Gl:b,Hh:w,Hl:k}=this;for(let N=0;N<80;N++){const R=hg(h,m,14)^hg(h,m,18)^QA(h,m,41),D=pg(h,m,14)^pg(h,m,18)^ZA(h,m,41),O=h&g^~h&v,B=m&y^~m&b,z=Iut(k,D,B,Dut[N],wf[N]),U=Rut(z,w,R,O,Lut[N],bf[N]),$=z|0,W=hg(r,i,28)^QA(r,i,34)^QA(r,i,39),H=pg(r,i,28)^ZA(r,i,34)^ZA(r,i,39),F=r&s^r&a^s&a,T=i&o^i&l^o&l;w=v|0,k=b|0,v=g|0,b=y|0,g=h|0,y=m|0,{h,l:m}=wu(c|0,u|0,U|0,$|0),c=a|0,u=l|0,a=s|0,l=o|0,s=r|0,o=i|0;const _=Nut($,H,T);r=Cut(_,U,W,F),i=_|0}({h:r,l:i}=wu(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=wu(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l}=wu(this.Ch|0,this.Cl|0,a|0,l|0),{h:c,l:u}=wu(this.Dh|0,this.Dl|0,c|0,u|0),{h,l:m}=wu(this.Eh|0,this.El|0,h|0,m|0),{h:g,l:y}=wu(this.Fh|0,this.Fl|0,g|0,y|0),{h:v,l:b}=wu(this.Gh|0,this.Gl|0,v|0,b|0),{h:w,l:k}=wu(this.Hh|0,this.Hl|0,w|0,k|0),this.set(r,i,s,o,a,l,c,u,h,m,g,y,v,b,w,k)}roundClean(){Lx(bf,wf)}destroy(){Lx(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const hme=ume(()=>new Mut),But=ume(()=>new jut);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const c7=BigInt(0),pD=BigInt(1);function jm(t,e=""){if(typeof t!="boolean"){const n=e&&`"${e}"`;throw new Error(n+"expected boolean, got type="+typeof t)}return t}function Ll(t,e,n=""){const r=CE(t),i=t==null?void 0:t.length,s=e!==void 0;if(!r||s&&i!==e){const o=n&&`"${n}" `,a=s?` of length ${e}`:"",l=r?`length=${i}`:`type=${typeof t}`;throw new Error(o+"expected Uint8Array"+a+", got "+l)}return t}function eT(t){const e=t.toString(16);return e.length&1?"0"+e:e}function pme(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?c7:BigInt("0x"+t)}function sP(t){return pme(ym(t))}function y1(t){return t0(t),pme(ym(Uint8Array.from(t).reverse()))}function u7(t,e){return V2(t.toString(16).padStart(e*2,"0"))}function mme(t,e){return u7(t,e).reverse()}function Kr(t,e,n){let r;if(typeof e=="string")try{r=V2(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(CE(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(t+" of length "+n+" expected, got "+i);return r}function IZ(t){return Uint8Array.from(t)}const S4=t=>typeof t=="bigint"&&c7<=t;function Uut(t,e,n){return S4(t)&&S4(e)&&S4(n)&&e<=t&&t<n}function mD(t,e,n,r){if(!Uut(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function gme(t){let e;for(e=0;t>c7;t>>=pD,e+=1);return e}const PE=t=>(pD<<BigInt(t))-pD;function Fut(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=g=>new Uint8Array(g),i=g=>Uint8Array.of(g);let s=r(t),o=r(t),a=0;const l=()=>{s.fill(1),o.fill(0),a=0},c=(...g)=>n(o,s,...g),u=(g=r(0))=>{o=c(i(0),g),s=c(),g.length!==0&&(o=c(i(1),g),s=c())},h=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let g=0;const y=[];for(;g<e;){s=c();const v=s.slice();y.push(v),g+=s.length}return Nc(...y)};return(g,y)=>{l(),u(g);let v;for(;!(v=y(h()));)u();return l(),v}}function _E(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(i,s,o){const a=t[i];if(o&&a===void 0)return;const l=typeof a;if(l!==s||a===null)throw new Error(`param "${i}" is invalid: expected ${s}, got ${l}`)}Object.entries(e).forEach(([i,s])=>r(i,s,!1)),Object.entries(n).forEach(([i,s])=>r(i,s,!0))}function H2(t){const e=new WeakMap;return(n,...r)=>{const i=e.get(n);if(i!==void 0)return i;const s=t(n,...r);return e.set(n,s),s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ao=BigInt(0),ms=BigInt(1),Lp=BigInt(2),yme=BigInt(3),xme=BigInt(4),vme=BigInt(5),$ut=BigInt(7),bme=BigInt(8),zut=BigInt(9),wme=BigInt(16);function pi(t,e){const n=t%e;return n>=Ao?n:e+n}function Vr(t,e,n){let r=t;for(;e-- >Ao;)r*=r,r%=n;return r}function RZ(t,e){if(t===Ao)throw new Error("invert: expected non-zero number");if(e<=Ao)throw new Error("invert: expected positive modulus, got "+e);let n=pi(t,e),r=e,i=Ao,s=ms;for(;n!==Ao;){const a=r/n,l=r%n,c=i-s*a;r=n,n=l,i=s,s=c}if(r!==ms)throw new Error("invert: does not exist");return pi(i,e)}function d7(t,e,n){if(!t.eql(t.sqr(e),n))throw new Error("Cannot find square root")}function Eme(t,e){const n=(t.ORDER+ms)/xme,r=t.pow(e,n);return d7(t,r,e),r}function Vut(t,e){const n=(t.ORDER-vme)/bme,r=t.mul(e,Lp),i=t.pow(r,n),s=t.mul(e,i),o=t.mul(t.mul(s,Lp),i),a=t.mul(s,t.sub(o,t.ONE));return d7(t,a,e),a}function Hut(t){const e=n0(t),n=Sme(t),r=n(e,e.neg(e.ONE)),i=n(e,r),s=n(e,e.neg(r)),o=(t+$ut)/wme;return(a,l)=>{let c=a.pow(l,o),u=a.mul(c,r);const h=a.mul(c,i),m=a.mul(c,s),g=a.eql(a.sqr(u),l),y=a.eql(a.sqr(h),l);c=a.cmov(c,u,g),u=a.cmov(m,h,y);const v=a.eql(a.sqr(u),l),b=a.cmov(c,u,v);return d7(a,b,l),b}}function Sme(t){if(t<yme)throw new Error("sqrt is not defined for small field");let e=t-ms,n=0;for(;e%Lp===Ao;)e/=Lp,n++;let r=Lp;const i=n0(t);for(;OZ(i,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return Eme;let s=i.pow(r,e);const o=(e+ms)/Lp;return function(l,c){if(l.is0(c))return c;if(OZ(l,c)!==1)throw new Error("Cannot find square root");let u=n,h=l.mul(l.ONE,s),m=l.pow(c,e),g=l.pow(c,o);for(;!l.eql(m,l.ONE);){if(l.is0(m))return l.ZERO;let y=1,v=l.sqr(m);for(;!l.eql(v,l.ONE);)if(y++,v=l.sqr(v),y===u)throw new Error("Cannot find square root");const b=ms<<BigInt(u-y-1),w=l.pow(h,b);u=y,h=l.sqr(w),m=l.mul(m,h),g=l.mul(g,w)}return g}}function qut(t){return t%xme===yme?Eme:t%bme===vme?Vut:t%wme===zut?Hut(t):Sme(t)}const Gut=(t,e)=>(pi(t,e)&ms)===ms,Kut=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Wut(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=Kut.reduce((r,i)=>(r[i]="function",r),e);return _E(t,n),t}function Yut(t,e,n){if(n<Ao)throw new Error("invalid exponent, negatives unsupported");if(n===Ao)return t.ONE;if(n===ms)return e;let r=t.ONE,i=e;for(;n>Ao;)n&ms&&(r=t.mul(r,i)),i=t.sqr(i),n>>=ms;return r}function Ame(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),i=e.reduce((o,a,l)=>t.is0(a)?o:(r[l]=o,t.mul(o,a)),t.ONE),s=t.inv(i);return e.reduceRight((o,a,l)=>t.is0(a)?o:(r[l]=t.mul(o,r[l]),t.mul(o,a)),s),r}function OZ(t,e){const n=(t.ORDER-ms)/Lp,r=t.pow(e,n),i=t.eql(r,t.ONE),s=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!i&&!s&&!o)throw new Error("invalid Legendre symbol result");return i?1:s?0:-1}function Tme(t,e){e!==void 0&&hD(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function n0(t,e,n=!1,r={}){if(t<=Ao)throw new Error("invalid field: expected ORDER > 0, got "+t);let i,s,o=!1,a;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const m=e;m.BITS&&(i=m.BITS),m.sqrt&&(s=m.sqrt),typeof m.isLE=="boolean"&&(n=m.isLE),typeof m.modFromBytes=="boolean"&&(o=m.modFromBytes),a=m.allowedLengths}else typeof e=="number"&&(i=e),r.sqrt&&(s=r.sqrt);const{nBitLength:l,nByteLength:c}=Tme(t,i);if(c>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let u;const h=Object.freeze({ORDER:t,isLE:n,BITS:l,BYTES:c,MASK:PE(l),ZERO:Ao,ONE:ms,allowedLengths:a,create:m=>pi(m,t),isValid:m=>{if(typeof m!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof m);return Ao<=m&&m<t},is0:m=>m===Ao,isValidNot0:m=>!h.is0(m)&&h.isValid(m),isOdd:m=>(m&ms)===ms,neg:m=>pi(-m,t),eql:(m,g)=>m===g,sqr:m=>pi(m*m,t),add:(m,g)=>pi(m+g,t),sub:(m,g)=>pi(m-g,t),mul:(m,g)=>pi(m*g,t),pow:(m,g)=>Yut(h,m,g),div:(m,g)=>pi(m*RZ(g,t),t),sqrN:m=>m*m,addN:(m,g)=>m+g,subN:(m,g)=>m-g,mulN:(m,g)=>m*g,inv:m=>RZ(m,t),sqrt:s||(m=>(u||(u=qut(t)),u(h,m))),toBytes:m=>n?mme(m,c):u7(m,c),fromBytes:(m,g=!0)=>{if(a){if(!a.includes(m.length)||m.length>c)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+m.length);const v=new Uint8Array(c);v.set(m,n?0:v.length-m.length),m=v}if(m.length!==c)throw new Error("Field.fromBytes: expected "+c+" bytes, got "+m.length);let y=n?y1(m):sP(m);if(o&&(y=pi(y,t)),!g&&!h.isValid(y))throw new Error("invalid field element: outside of range 0..ORDER");return y},invertBatch:m=>Ame(h,m),cmov:(m,g,y)=>y?g:m});return Object.freeze(h)}function kme(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function Nme(t){const e=kme(t);return e+Math.ceil(e/2)}function Jut(t,e,n=!1){const r=t.length,i=kme(e),s=Nme(e);if(r<16||r<s||r>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+r);const o=n?y1(t):sP(t),a=pi(o,e-ms)+ms;return n?mme(a,i):u7(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Dx=BigInt(0),Dp=BigInt(1);function q2(t,e){const n=e.negate();return t?n:e}function jp(t,e){const n=Ame(t.Fp,e.map(r=>r.Z));return e.map((r,i)=>t.fromAffine(r.toAffine(n[i])))}function Cme(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function A4(t,e){Cme(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),i=2**t,s=PE(t),o=BigInt(t);return{windows:n,windowSize:r,mask:s,maxNumber:i,shiftBy:o}}function MZ(t,e,n){const{windowSize:r,mask:i,maxNumber:s,shiftBy:o}=n;let a=Number(t&i),l=t>>o;a>r&&(a-=s,l+=Dp);const c=e*r,u=c+Math.abs(a)-1,h=a===0,m=a<0,g=e%2!==0;return{nextN:l,offset:u,isZero:h,isNeg:m,isNegF:g,offsetF:c}}function Xut(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function Qut(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const T4=new WeakMap,Pme=new WeakMap;function k4(t){return Pme.get(t)||1}function LZ(t){if(t!==Dx)throw new Error("invalid wNAF")}class _me{constructor(e,n){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=n}_unsafeLadder(e,n,r=this.ZERO){let i=e;for(;n>Dx;)n&Dp&&(r=r.add(i)),i=i.double(),n>>=Dp;return r}precomputeWindow(e,n){const{windows:r,windowSize:i}=A4(n,this.bits),s=[];let o=e,a=o;for(let l=0;l<r;l++){a=o,s.push(a);for(let c=1;c<i;c++)a=a.add(o),s.push(a);o=a.double()}return s}wNAF(e,n,r){if(!this.Fn.isValid(r))throw new Error("invalid scalar");let i=this.ZERO,s=this.BASE;const o=A4(e,this.bits);for(let a=0;a<o.windows;a++){const{nextN:l,offset:c,isZero:u,isNeg:h,isNegF:m,offsetF:g}=MZ(r,a,o);r=l,u?s=s.add(q2(m,n[g])):i=i.add(q2(h,n[c]))}return LZ(r),{p:i,f:s}}wNAFUnsafe(e,n,r,i=this.ZERO){const s=A4(e,this.bits);for(let o=0;o<s.windows&&r!==Dx;o++){const{nextN:a,offset:l,isZero:c,isNeg:u}=MZ(r,o,s);if(r=a,!c){const h=n[l];i=i.add(u?h.negate():h)}}return LZ(r),i}getPrecomputes(e,n,r){let i=T4.get(n);return i||(i=this.precomputeWindow(n,e),e!==1&&(typeof r=="function"&&(i=r(i)),T4.set(n,i))),i}cached(e,n,r){const i=k4(e);return this.wNAF(i,this.getPrecomputes(i,e,r),n)}unsafe(e,n,r,i){const s=k4(e);return s===1?this._unsafeLadder(e,n,i):this.wNAFUnsafe(s,this.getPrecomputes(s,e,r),n,i)}createCache(e,n){Cme(n,this.bits),Pme.set(e,n),T4.delete(e)}hasCache(e){return k4(e)!==1}}function Zut(t,e,n,r){let i=e,s=t.ZERO,o=t.ZERO;for(;n>Dx||r>Dx;)n&Dp&&(s=s.add(i)),r&Dp&&(o=o.add(i)),i=i.double(),n>>=Dp,r>>=Dp;return{p1:s,p2:o}}function Ime(t,e,n,r){Xut(n,t),Qut(r,e);const i=n.length,s=r.length;if(i!==s)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=gme(BigInt(i));let l=1;a>12?l=a-3:a>4?l=a-2:a>0&&(l=2);const c=PE(l),u=new Array(Number(c)+1).fill(o),h=Math.floor((e.BITS-1)/l)*l;let m=o;for(let g=h;g>=0;g-=l){u.fill(o);for(let v=0;v<s;v++){const b=r[v],w=Number(b>>BigInt(g)&c);u[w]=u[w].add(n[v])}let y=o;for(let v=u.length-1,b=o;v>0;v--)b=b.add(u[v]),y=y.add(b);if(m=m.add(y),g!==0)for(let v=0;v<l;v++)m=m.double()}return m}function DZ(t,e,n){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Wut(e),e}else return n0(t,{isLE:n})}function Rme(t,e,n={},r){if(r===void 0&&(r=t==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const l of["p","n","h"]){const c=e[l];if(!(typeof c=="bigint"&&c>Dx))throw new Error(`CURVE.${l} must be positive bigint`)}const i=DZ(e.p,n.Fp,r),s=DZ(e.n,n.Fn,r),a=["Gx","Gy","a",t==="weierstrass"?"b":"d"];for(const l of a)if(!i.isValid(e[l]))throw new Error(`CURVE.${l} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:i,Fn:s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ef=BigInt(0),Li=BigInt(1),N4=BigInt(2),edt=BigInt(8);function tdt(t,e,n,r){const i=t.sqr(n),s=t.sqr(r),o=t.add(t.mul(e.a,i),s),a=t.add(t.ONE,t.mul(e.d,t.mul(i,s)));return t.eql(o,a)}function ndt(t,e={}){const n=Rme("edwards",t,e,e.FpFnLE),{Fp:r,Fn:i}=n;let s=n.CURVE;const{h:o}=s;_E(e,{},{uvRatio:"function"});const a=N4<<BigInt(i.BYTES*8)-Li,l=b=>r.create(b),c=e.uvRatio||((b,w)=>{try{return{isValid:!0,value:r.sqrt(r.div(b,w))}}catch{return{isValid:!1,value:Ef}}});if(!tdt(r,s,s.Gx,s.Gy))throw new Error("bad curve params: generator point");function u(b,w,k=!1){const N=k?Li:Ef;return mD("coordinate "+b,w,N,a),w}function h(b){if(!(b instanceof y))throw new Error("ExtendedPoint expected")}const m=H2((b,w)=>{const{X:k,Y:N,Z:R}=b,D=b.is0();w==null&&(w=D?edt:r.inv(R));const O=l(k*w),B=l(N*w),z=r.mul(R,w);if(D)return{x:Ef,y:Li};if(z!==Li)throw new Error("invZ was invalid");return{x:O,y:B}}),g=H2(b=>{const{a:w,d:k}=s;if(b.is0())throw new Error("bad point: ZERO");const{X:N,Y:R,Z:D,T:O}=b,B=l(N*N),z=l(R*R),U=l(D*D),$=l(U*U),W=l(B*w),H=l(U*l(W+z)),F=l($+l(k*l(B*z)));if(H!==F)throw new Error("bad point: equation left != right (1)");const T=l(N*R),_=l(D*O);if(T!==_)throw new Error("bad point: equation left != right (2)");return!0});class y{constructor(w,k,N,R){this.X=u("x",w),this.Y=u("y",k),this.Z=u("z",N,!0),this.T=u("t",R),Object.freeze(this)}static CURVE(){return s}static fromAffine(w){if(w instanceof y)throw new Error("extended point not allowed");const{x:k,y:N}=w||{};return u("x",k),u("y",N),new y(k,N,Li,l(k*N))}static fromBytes(w,k=!1){const N=r.BYTES,{a:R,d:D}=s;w=IZ(Ll(w,N,"point")),jm(k,"zip215");const O=IZ(w),B=w[N-1];O[N-1]=B&-129;const z=y1(O),U=k?a:r.ORDER;mD("point.y",z,Ef,U);const $=l(z*z),W=l($-Li),H=l(D*$-R);let{isValid:F,value:T}=c(W,H);if(!F)throw new Error("bad point: invalid y coordinate");const _=(T&Li)===Li,L=(B&128)!==0;if(!k&&T===Ef&&L)throw new Error("bad point: x=0 and x_0=1");return L!==_&&(T=l(-T)),y.fromAffine({x:T,y:z})}static fromHex(w,k=!1){return y.fromBytes(Kr("point",w),k)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(w=8,k=!0){return v.createCache(this,w),k||this.multiply(N4),this}assertValidity(){g(this)}equals(w){h(w);const{X:k,Y:N,Z:R}=this,{X:D,Y:O,Z:B}=w,z=l(k*B),U=l(D*R),$=l(N*B),W=l(O*R);return z===U&&$===W}is0(){return this.equals(y.ZERO)}negate(){return new y(l(-this.X),this.Y,this.Z,l(-this.T))}double(){const{a:w}=s,{X:k,Y:N,Z:R}=this,D=l(k*k),O=l(N*N),B=l(N4*l(R*R)),z=l(w*D),U=k+N,$=l(l(U*U)-D-O),W=z+O,H=W-B,F=z-O,T=l($*H),_=l(W*F),L=l($*F),V=l(H*W);return new y(T,_,V,L)}add(w){h(w);const{a:k,d:N}=s,{X:R,Y:D,Z:O,T:B}=this,{X:z,Y:U,Z:$,T:W}=w,H=l(R*z),F=l(D*U),T=l(B*N*W),_=l(O*$),L=l((R+D)*(z+U)-H-F),V=_-T,K=_+T,te=l(F-k*H),G=l(L*V),q=l(K*te),M=l(L*te),P=l(V*K);return new y(G,q,P,M)}subtract(w){return this.add(w.negate())}multiply(w){if(!i.isValidNot0(w))throw new Error("invalid scalar: expected 1 <= sc < curve.n");const{p:k,f:N}=v.cached(this,w,R=>jp(y,R));return jp(y,[k,N])[0]}multiplyUnsafe(w,k=y.ZERO){if(!i.isValid(w))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return w===Ef?y.ZERO:this.is0()||w===Li?this:v.unsafe(this,w,N=>jp(y,N),k)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}isTorsionFree(){return v.unsafe(this,s.n).is0()}toAffine(w){return m(this,w)}clearCofactor(){return o===Li?this:this.multiplyUnsafe(o)}toBytes(){const{x:w,y:k}=this.toAffine(),N=r.toBytes(k);return N[N.length-1]|=w&Li?128:0,N}toHex(){return ym(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(w){return jp(y,w)}static msm(w,k){return Ime(y,i,w,k)}_setWindowSize(w){this.precompute(w)}toRawBytes(){return this.toBytes()}}y.BASE=new y(s.Gx,s.Gy,Li,l(s.Gx*s.Gy)),y.ZERO=new y(Ef,Li,Li,Ef),y.Fp=r,y.Fn=i;const v=new _me(y,i.BITS);return y.BASE.precompute(8),y}function rdt(t,e,n={}){if(typeof e!="function")throw new Error('"hash" function param is required');_E(n,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:r}=n,{BASE:i,Fp:s,Fn:o}=t,a=n.randomBytes||l7,l=n.adjustScalarBytes||(U=>U),c=n.domain||((U,$,W)=>{if(jm(W,"phflag"),$.length||W)throw new Error("Contexts/pre-hash are not supported");return U});function u(U){return o.create(y1(U))}function h(U){const $=N.secretKey;U=Kr("private key",U,$);const W=Kr("hashed private key",e(U),2*$),H=l(W.slice(0,$)),F=W.slice($,2*$),T=u(H);return{head:H,prefix:F,scalar:T}}function m(U){const{head:$,prefix:W,scalar:H}=h(U),F=i.multiply(H),T=F.toBytes();return{head:$,prefix:W,scalar:H,point:F,pointBytes:T}}function g(U){return m(U).pointBytes}function y(U=Uint8Array.of(),...$){const W=Nc(...$);return u(e(c(W,Kr("context",U),!!r)))}function v(U,$,W={}){U=Kr("message",U),r&&(U=r(U));const{prefix:H,scalar:F,pointBytes:T}=m($),_=y(W.context,H,U),L=i.multiply(_).toBytes(),V=y(W.context,L,T,U),K=o.create(_+V*F);if(!o.isValid(K))throw new Error("sign failed: invalid s");const te=Nc(L,o.toBytes(K));return Ll(te,N.signature,"result")}const b={zip215:!0};function w(U,$,W,H=b){const{context:F,zip215:T}=H,_=N.signature;U=Kr("signature",U,_),$=Kr("message",$),W=Kr("publicKey",W,N.publicKey),T!==void 0&&jm(T,"zip215"),r&&($=r($));const L=_/2,V=U.subarray(0,L),K=y1(U.subarray(L,_));let te,G,q;try{te=t.fromBytes(W,T),G=t.fromBytes(V,T),q=i.multiplyUnsafe(K)}catch{return!1}if(!T&&te.isSmallOrder())return!1;const M=y(F,G.toBytes(),te.toBytes(),$);return G.add(te.multiplyUnsafe(M)).subtract(q).clearCofactor().is0()}const k=s.BYTES,N={secretKey:k,publicKey:k,signature:2*k,seed:k};function R(U=a(N.seed)){return Ll(U,N.seed,"seed")}function D(U){const $=z.randomSecretKey(U);return{secretKey:$,publicKey:g($)}}function O(U){return CE(U)&&U.length===o.BYTES}function B(U,$){try{return!!t.fromBytes(U,$)}catch{return!1}}const z={getExtendedPublicKey:m,randomSecretKey:R,isValidSecretKey:O,isValidPublicKey:B,toMontgomery(U){const{y:$}=t.fromBytes(U),W=N.publicKey,H=W===32;if(!H&&W!==57)throw new Error("only defined for 25519 and 448");const F=H?s.div(Li+$,Li-$):s.div($-Li,$+Li);return s.toBytes(F)},toMontgomerySecret(U){const $=N.secretKey;Ll(U,$);const W=e(U.subarray(0,$));return l(W).subarray(0,$)},randomPrivateKey:R,precompute(U=8,$=t.BASE){return $.precompute(U,!1)}};return Object.freeze({keygen:D,getPublicKey:g,sign:v,verify:w,utils:z,Point:t,lengths:N})}function idt(t){const e={a:t.a,d:t.d,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,r=n0(e.n,t.nBitLength,!0),i={Fp:n,Fn:r,uvRatio:t.uvRatio},s={randomBytes:t.randomBytes,adjustScalarBytes:t.adjustScalarBytes,domain:t.domain,prehash:t.prehash,mapToCurve:t.mapToCurve};return{CURVE:e,curveOpts:i,hash:t.hash,eddsaOpts:s}}function sdt(t,e){const n=e.Point;return Object.assign({},e,{ExtendedPoint:n,CURVE:t,nBitLength:n.Fn.BITS,nByteLength:n.Fn.BYTES})}function odt(t){const{CURVE:e,curveOpts:n,hash:r,eddsaOpts:i}=idt(t),s=ndt(e,n),o=rdt(s,r,i);return sdt(t,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const adt=BigInt(1),jZ=BigInt(2);BigInt(3);const ldt=BigInt(5),cdt=BigInt(8),f7=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),Ome={p:f7,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:cdt,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function udt(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),i=BigInt(80),s=f7,a=t*t%s*t%s,l=Vr(a,jZ,s)*a%s,c=Vr(l,adt,s)*t%s,u=Vr(c,ldt,s)*c%s,h=Vr(u,e,s)*u%s,m=Vr(h,n,s)*h%s,g=Vr(m,r,s)*m%s,y=Vr(g,i,s)*g%s,v=Vr(y,i,s)*g%s,b=Vr(v,e,s)*u%s;return{pow_p_5_8:Vr(b,jZ,s)*t%s,b2:a}}function ddt(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const BZ=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function fdt(t,e){const n=f7,r=pi(e*e*e,n),i=pi(r*r*e,n),s=udt(t*i).pow_p_5_8;let o=pi(t*r*s,n);const a=pi(e*o*o,n),l=o,c=pi(o*BZ,n),u=a===t,h=a===pi(-t,n),m=a===pi(-t*BZ,n);return u&&(o=l),(h||m)&&(o=c),Gut(o,n)&&(o=pi(-o,n)),{isValid:u||h,value:o}}const hdt=n0(Ome.p,{isLE:!0}),pdt={...Ome,Fp:hdt,hash:But,adjustScalarBytes:ddt,uvRatio:fdt},Ev=odt(pdt);var zT={exports:{}},C4={},UZ;function h7(){return UZ||(UZ=1,(function(t){Object.defineProperties(t,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var e={},n={};n.byteLength=u,n.toByteArray=m,n.fromByteArray=v;for(var r=[],i=[],s=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,l=o.length;a<l;++a)r[a]=o[a],i[o.charCodeAt(a)]=a;i[45]=62,i[95]=63;function c(k){var N=k.length;if(N%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var R=k.indexOf("=");R===-1&&(R=N);var D=R===N?0:4-R%4;return[R,D]}function u(k){var N=c(k),R=N[0],D=N[1];return(R+D)*3/4-D}function h(k,N,R){return(N+R)*3/4-R}function m(k){var N,R=c(k),D=R[0],O=R[1],B=new s(h(k,D,O)),z=0,U=O>0?D-4:D,$;for($=0;$<U;$+=4)N=i[k.charCodeAt($)]<<18|i[k.charCodeAt($+1)]<<12|i[k.charCodeAt($+2)]<<6|i[k.charCodeAt($+3)],B[z++]=N>>16&255,B[z++]=N>>8&255,B[z++]=N&255;return O===2&&(N=i[k.charCodeAt($)]<<2|i[k.charCodeAt($+1)]>>4,B[z++]=N&255),O===1&&(N=i[k.charCodeAt($)]<<10|i[k.charCodeAt($+1)]<<4|i[k.charCodeAt($+2)]>>2,B[z++]=N>>8&255,B[z++]=N&255),B}function g(k){return r[k>>18&63]+r[k>>12&63]+r[k>>6&63]+r[k&63]}function y(k,N,R){for(var D,O=[],B=N;B<R;B+=3)D=(k[B]<<16&16711680)+(k[B+1]<<8&65280)+(k[B+2]&255),O.push(g(D));return O.join("")}function v(k){for(var N,R=k.length,D=R%3,O=[],B=16383,z=0,U=R-D;z<U;z+=B)O.push(y(k,z,z+B>U?U:z+B));return D===1?(N=k[R-1],O.push(r[N>>2]+r[N<<4&63]+"==")):D===2&&(N=(k[R-2]<<8)+k[R-1],O.push(r[N>>10]+r[N>>4&63]+r[N<<2&63]+"=")),O.join("")}var b={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */b.read=function(k,N,R,D,O){var B,z,U=O*8-D-1,$=(1<<U)-1,W=$>>1,H=-7,F=R?O-1:0,T=R?-1:1,_=k[N+F];for(F+=T,B=_&(1<<-H)-1,_>>=-H,H+=U;H>0;B=B*256+k[N+F],F+=T,H-=8);for(z=B&(1<<-H)-1,B>>=-H,H+=D;H>0;z=z*256+k[N+F],F+=T,H-=8);if(B===0)B=1-W;else{if(B===$)return z?NaN:(_?-1:1)*(1/0);z=z+Math.pow(2,D),B=B-W}return(_?-1:1)*z*Math.pow(2,B-D)},b.write=function(k,N,R,D,O,B){var z,U,$,W=B*8-O-1,H=(1<<W)-1,F=H>>1,T=O===23?Math.pow(2,-24)-Math.pow(2,-77):0,_=D?0:B-1,L=D?1:-1,V=N<0||N===0&&1/N<0?1:0;for(N=Math.abs(N),isNaN(N)||N===1/0?(U=isNaN(N)?1:0,z=H):(z=Math.floor(Math.log(N)/Math.LN2),N*($=Math.pow(2,-z))<1&&(z--,$*=2),z+F>=1?N+=T/$:N+=T*Math.pow(2,1-F),N*$>=2&&(z++,$/=2),z+F>=H?(U=0,z=H):z+F>=1?(U=(N*$-1)*Math.pow(2,O),z=z+F):(U=N*Math.pow(2,F-1)*Math.pow(2,O),z=0));O>=8;k[R+_]=U&255,_+=L,U/=256,O-=8);for(z=z<<O|U,W+=O;W>0;k[R+_]=z&255,_+=L,z/=256,W-=8);k[R+_-L]|=V*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(k){const N=n,R=b,D=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;k.Buffer=H,k.SlowBuffer=P,k.INSPECT_MAX_BYTES=50;const O=2147483647;k.kMaxLength=O;const{Uint8Array:B,ArrayBuffer:z,SharedArrayBuffer:U}=globalThis;H.TYPED_ARRAY_SUPPORT=$(),!H.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function $(){try{const ae=new B(1),Q={foo:function(){return 42}};return Object.setPrototypeOf(Q,B.prototype),Object.setPrototypeOf(ae,Q),ae.foo()===42}catch{return!1}}Object.defineProperty(H.prototype,"parent",{enumerable:!0,get:function(){if(H.isBuffer(this))return this.buffer}}),Object.defineProperty(H.prototype,"offset",{enumerable:!0,get:function(){if(H.isBuffer(this))return this.byteOffset}});function W(ae){if(ae>O)throw new RangeError('The value "'+ae+'" is invalid for option "size"');const Q=new B(ae);return Object.setPrototypeOf(Q,H.prototype),Q}function H(ae,Q,ee){if(typeof ae=="number"){if(typeof Q=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return L(ae)}return F(ae,Q,ee)}H.poolSize=8192;function F(ae,Q,ee){if(typeof ae=="string")return V(ae,Q);if(z.isView(ae))return te(ae);if(ae==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ae);if(sn(ae,z)||ae&&sn(ae.buffer,z)||typeof U<"u"&&(sn(ae,U)||ae&&sn(ae.buffer,U)))return G(ae,Q,ee);if(typeof ae=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const fe=ae.valueOf&&ae.valueOf();if(fe!=null&&fe!==ae)return H.from(fe,Q,ee);const _e=q(ae);if(_e)return _e;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ae[Symbol.toPrimitive]=="function")return H.from(ae[Symbol.toPrimitive]("string"),Q,ee);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ae)}H.from=function(ae,Q,ee){return F(ae,Q,ee)},Object.setPrototypeOf(H.prototype,B.prototype),Object.setPrototypeOf(H,B);function T(ae){if(typeof ae!="number")throw new TypeError('"size" argument must be of type number');if(ae<0)throw new RangeError('The value "'+ae+'" is invalid for option "size"')}function _(ae,Q,ee){return T(ae),ae<=0?W(ae):Q!==void 0?typeof ee=="string"?W(ae).fill(Q,ee):W(ae).fill(Q):W(ae)}H.alloc=function(ae,Q,ee){return _(ae,Q,ee)};function L(ae){return T(ae),W(ae<0?0:M(ae)|0)}H.allocUnsafe=function(ae){return L(ae)},H.allocUnsafeSlow=function(ae){return L(ae)};function V(ae,Q){if((typeof Q!="string"||Q==="")&&(Q="utf8"),!H.isEncoding(Q))throw new TypeError("Unknown encoding: "+Q);const ee=Y(ae,Q)|0;let fe=W(ee);const _e=fe.write(ae,Q);return _e!==ee&&(fe=fe.slice(0,_e)),fe}function K(ae){const Q=ae.length<0?0:M(ae.length)|0,ee=W(Q);for(let fe=0;fe<Q;fe+=1)ee[fe]=ae[fe]&255;return ee}function te(ae){if(sn(ae,B)){const Q=new B(ae);return G(Q.buffer,Q.byteOffset,Q.byteLength)}return K(ae)}function G(ae,Q,ee){if(Q<0||ae.byteLength<Q)throw new RangeError('"offset" is outside of buffer bounds');if(ae.byteLength<Q+(ee||0))throw new RangeError('"length" is outside of buffer bounds');let fe;return Q===void 0&&ee===void 0?fe=new B(ae):ee===void 0?fe=new B(ae,Q):fe=new B(ae,Q,ee),Object.setPrototypeOf(fe,H.prototype),fe}function q(ae){if(H.isBuffer(ae)){const Q=M(ae.length)|0,ee=W(Q);return ee.length===0||ae.copy(ee,0,0,Q),ee}if(ae.length!==void 0)return typeof ae.length!="number"||tn(ae.length)?W(0):K(ae);if(ae.type==="Buffer"&&Array.isArray(ae.data))return K(ae.data)}function M(ae){if(ae>=O)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+O.toString(16)+" bytes");return ae|0}function P(ae){return+ae!=ae&&(ae=0),H.alloc(+ae)}H.isBuffer=function(Q){return Q!=null&&Q._isBuffer===!0&&Q!==H.prototype},H.compare=function(Q,ee){if(sn(Q,B)&&(Q=H.from(Q,Q.offset,Q.byteLength)),sn(ee,B)&&(ee=H.from(ee,ee.offset,ee.byteLength)),!H.isBuffer(Q)||!H.isBuffer(ee))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(Q===ee)return 0;let fe=Q.length,_e=ee.length;for(let Oe=0,Ve=Math.min(fe,_e);Oe<Ve;++Oe)if(Q[Oe]!==ee[Oe]){fe=Q[Oe],_e=ee[Oe];break}return fe<_e?-1:_e<fe?1:0},H.isEncoding=function(Q){switch(String(Q).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},H.concat=function(Q,ee){if(!Array.isArray(Q))throw new TypeError('"list" argument must be an Array of Buffers');if(Q.length===0)return H.alloc(0);let fe;if(ee===void 0)for(ee=0,fe=0;fe<Q.length;++fe)ee+=Q[fe].length;const _e=H.allocUnsafe(ee);let Oe=0;for(fe=0;fe<Q.length;++fe){let Ve=Q[fe];if(sn(Ve,B))Oe+Ve.length>_e.length?(H.isBuffer(Ve)||(Ve=H.from(Ve)),Ve.copy(_e,Oe)):B.prototype.set.call(_e,Ve,Oe);else if(H.isBuffer(Ve))Ve.copy(_e,Oe);else throw new TypeError('"list" argument must be an Array of Buffers');Oe+=Ve.length}return _e};function Y(ae,Q){if(H.isBuffer(ae))return ae.length;if(z.isView(ae)||sn(ae,z))return ae.byteLength;if(typeof ae!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ae);const ee=ae.length,fe=arguments.length>2&&arguments[2]===!0;if(!fe&&ee===0)return 0;let _e=!1;for(;;)switch(Q){case"ascii":case"latin1":case"binary":return ee;case"utf8":case"utf-8":return Ze(ae).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ee*2;case"hex":return ee>>>1;case"base64":return vt(ae).length;default:if(_e)return fe?-1:Ze(ae).length;Q=(""+Q).toLowerCase(),_e=!0}}H.byteLength=Y;function X(ae,Q,ee){let fe=!1;if((Q===void 0||Q<0)&&(Q=0),Q>this.length||((ee===void 0||ee>this.length)&&(ee=this.length),ee<=0)||(ee>>>=0,Q>>>=0,ee<=Q))return"";for(ae||(ae="utf8");;)switch(ae){case"hex":return rt(this,Q,ee);case"utf8":case"utf-8":return Te(this,Q,ee);case"ascii":return Qe(this,Q,ee);case"latin1":case"binary":return at(this,Q,ee);case"base64":return he(this,Q,ee);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Xe(this,Q,ee);default:if(fe)throw new TypeError("Unknown encoding: "+ae);ae=(ae+"").toLowerCase(),fe=!0}}H.prototype._isBuffer=!0;function se(ae,Q,ee){const fe=ae[Q];ae[Q]=ae[ee],ae[ee]=fe}H.prototype.swap16=function(){const Q=this.length;if(Q%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let ee=0;ee<Q;ee+=2)se(this,ee,ee+1);return this},H.prototype.swap32=function(){const Q=this.length;if(Q%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let ee=0;ee<Q;ee+=4)se(this,ee,ee+3),se(this,ee+1,ee+2);return this},H.prototype.swap64=function(){const Q=this.length;if(Q%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let ee=0;ee<Q;ee+=8)se(this,ee,ee+7),se(this,ee+1,ee+6),se(this,ee+2,ee+5),se(this,ee+3,ee+4);return this},H.prototype.toString=function(){const Q=this.length;return Q===0?"":arguments.length===0?Te(this,0,Q):X.apply(this,arguments)},H.prototype.toLocaleString=H.prototype.toString,H.prototype.equals=function(Q){if(!H.isBuffer(Q))throw new TypeError("Argument must be a Buffer");return this===Q?!0:H.compare(this,Q)===0},H.prototype.inspect=function(){let Q="";const ee=k.INSPECT_MAX_BYTES;return Q=this.toString("hex",0,ee).replace(/(.{2})/g,"$1 ").trim(),this.length>ee&&(Q+=" ... "),"<Buffer "+Q+">"},D&&(H.prototype[D]=H.prototype.inspect),H.prototype.compare=function(Q,ee,fe,_e,Oe){if(sn(Q,B)&&(Q=H.from(Q,Q.offset,Q.byteLength)),!H.isBuffer(Q))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof Q);if(ee===void 0&&(ee=0),fe===void 0&&(fe=Q?Q.length:0),_e===void 0&&(_e=0),Oe===void 0&&(Oe=this.length),ee<0||fe>Q.length||_e<0||Oe>this.length)throw new RangeError("out of range index");if(_e>=Oe&&ee>=fe)return 0;if(_e>=Oe)return-1;if(ee>=fe)return 1;if(ee>>>=0,fe>>>=0,_e>>>=0,Oe>>>=0,this===Q)return 0;let Ve=Oe-_e,Qt=fe-ee;const Ht=Math.min(Ve,Qt),ot=this.slice(_e,Oe),mn=Q.slice(ee,fe);for(let At=0;At<Ht;++At)if(ot[At]!==mn[At]){Ve=ot[At],Qt=mn[At];break}return Ve<Qt?-1:Qt<Ve?1:0};function oe(ae,Q,ee,fe,_e){if(ae.length===0)return-1;if(typeof ee=="string"?(fe=ee,ee=0):ee>2147483647?ee=2147483647:ee<-2147483648&&(ee=-2147483648),ee=+ee,tn(ee)&&(ee=_e?0:ae.length-1),ee<0&&(ee=ae.length+ee),ee>=ae.length){if(_e)return-1;ee=ae.length-1}else if(ee<0)if(_e)ee=0;else return-1;if(typeof Q=="string"&&(Q=H.from(Q,fe)),H.isBuffer(Q))return Q.length===0?-1:me(ae,Q,ee,fe,_e);if(typeof Q=="number")return Q=Q&255,typeof B.prototype.indexOf=="function"?_e?B.prototype.indexOf.call(ae,Q,ee):B.prototype.lastIndexOf.call(ae,Q,ee):me(ae,[Q],ee,fe,_e);throw new TypeError("val must be string, number or Buffer")}function me(ae,Q,ee,fe,_e){let Oe=1,Ve=ae.length,Qt=Q.length;if(fe!==void 0&&(fe=String(fe).toLowerCase(),fe==="ucs2"||fe==="ucs-2"||fe==="utf16le"||fe==="utf-16le")){if(ae.length<2||Q.length<2)return-1;Oe=2,Ve/=2,Qt/=2,ee/=2}function Ht(mn,At){return Oe===1?mn[At]:mn.readUInt16BE(At*Oe)}let ot;if(_e){let mn=-1;for(ot=ee;ot<Ve;ot++)if(Ht(ae,ot)===Ht(Q,mn===-1?0:ot-mn)){if(mn===-1&&(mn=ot),ot-mn+1===Qt)return mn*Oe}else mn!==-1&&(ot-=ot-mn),mn=-1}else for(ee+Qt>Ve&&(ee=Ve-Qt),ot=ee;ot>=0;ot--){let mn=!0;for(let At=0;At<Qt;At++)if(Ht(ae,ot+At)!==Ht(Q,At)){mn=!1;break}if(mn)return ot}return-1}H.prototype.includes=function(Q,ee,fe){return this.indexOf(Q,ee,fe)!==-1},H.prototype.indexOf=function(Q,ee,fe){return oe(this,Q,ee,fe,!0)},H.prototype.lastIndexOf=function(Q,ee,fe){return oe(this,Q,ee,fe,!1)};function ce(ae,Q,ee,fe){ee=Number(ee)||0;const _e=ae.length-ee;fe?(fe=Number(fe),fe>_e&&(fe=_e)):fe=_e;const Oe=Q.length;fe>Oe/2&&(fe=Oe/2);let Ve;for(Ve=0;Ve<fe;++Ve){const Qt=parseInt(Q.substr(Ve*2,2),16);if(tn(Qt))return Ve;ae[ee+Ve]=Qt}return Ve}function ve(ae,Q,ee,fe){return jt(Ze(Q,ae.length-ee),ae,ee,fe)}function Ne(ae,Q,ee,fe){return jt(lt(Q),ae,ee,fe)}function pe(ae,Q,ee,fe){return jt(vt(Q),ae,ee,fe)}function Le(ae,Q,ee,fe){return jt($t(Q,ae.length-ee),ae,ee,fe)}H.prototype.write=function(Q,ee,fe,_e){if(ee===void 0)_e="utf8",fe=this.length,ee=0;else if(fe===void 0&&typeof ee=="string")_e=ee,fe=this.length,ee=0;else if(isFinite(ee))ee=ee>>>0,isFinite(fe)?(fe=fe>>>0,_e===void 0&&(_e="utf8")):(_e=fe,fe=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Oe=this.length-ee;if((fe===void 0||fe>Oe)&&(fe=Oe),Q.length>0&&(fe<0||ee<0)||ee>this.length)throw new RangeError("Attempt to write outside buffer bounds");_e||(_e="utf8");let Ve=!1;for(;;)switch(_e){case"hex":return ce(this,Q,ee,fe);case"utf8":case"utf-8":return ve(this,Q,ee,fe);case"ascii":case"latin1":case"binary":return Ne(this,Q,ee,fe);case"base64":return pe(this,Q,ee,fe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Le(this,Q,ee,fe);default:if(Ve)throw new TypeError("Unknown encoding: "+_e);_e=(""+_e).toLowerCase(),Ve=!0}},H.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function he(ae,Q,ee){return Q===0&&ee===ae.length?N.fromByteArray(ae):N.fromByteArray(ae.slice(Q,ee))}function Te(ae,Q,ee){ee=Math.min(ae.length,ee);const fe=[];let _e=Q;for(;_e<ee;){const Oe=ae[_e];let Ve=null,Qt=Oe>239?4:Oe>223?3:Oe>191?2:1;if(_e+Qt<=ee){let Ht,ot,mn,At;switch(Qt){case 1:Oe<128&&(Ve=Oe);break;case 2:Ht=ae[_e+1],(Ht&192)===128&&(At=(Oe&31)<<6|Ht&63,At>127&&(Ve=At));break;case 3:Ht=ae[_e+1],ot=ae[_e+2],(Ht&192)===128&&(ot&192)===128&&(At=(Oe&15)<<12|(Ht&63)<<6|ot&63,At>2047&&(At<55296||At>57343)&&(Ve=At));break;case 4:Ht=ae[_e+1],ot=ae[_e+2],mn=ae[_e+3],(Ht&192)===128&&(ot&192)===128&&(mn&192)===128&&(At=(Oe&15)<<18|(Ht&63)<<12|(ot&63)<<6|mn&63,At>65535&&At<1114112&&(Ve=At))}}Ve===null?(Ve=65533,Qt=1):Ve>65535&&(Ve-=65536,fe.push(Ve>>>10&1023|55296),Ve=56320|Ve&1023),fe.push(Ve),_e+=Qt}return We(fe)}const Ge=4096;function We(ae){const Q=ae.length;if(Q<=Ge)return String.fromCharCode.apply(String,ae);let ee="",fe=0;for(;fe<Q;)ee+=String.fromCharCode.apply(String,ae.slice(fe,fe+=Ge));return ee}function Qe(ae,Q,ee){let fe="";ee=Math.min(ae.length,ee);for(let _e=Q;_e<ee;++_e)fe+=String.fromCharCode(ae[_e]&127);return fe}function at(ae,Q,ee){let fe="";ee=Math.min(ae.length,ee);for(let _e=Q;_e<ee;++_e)fe+=String.fromCharCode(ae[_e]);return fe}function rt(ae,Q,ee){const fe=ae.length;(!Q||Q<0)&&(Q=0),(!ee||ee<0||ee>fe)&&(ee=fe);let _e="";for(let Oe=Q;Oe<ee;++Oe)_e+=on[ae[Oe]];return _e}function Xe(ae,Q,ee){const fe=ae.slice(Q,ee);let _e="";for(let Oe=0;Oe<fe.length-1;Oe+=2)_e+=String.fromCharCode(fe[Oe]+fe[Oe+1]*256);return _e}H.prototype.slice=function(Q,ee){const fe=this.length;Q=~~Q,ee=ee===void 0?fe:~~ee,Q<0?(Q+=fe,Q<0&&(Q=0)):Q>fe&&(Q=fe),ee<0?(ee+=fe,ee<0&&(ee=0)):ee>fe&&(ee=fe),ee<Q&&(ee=Q);const _e=this.subarray(Q,ee);return Object.setPrototypeOf(_e,H.prototype),_e};function ft(ae,Q,ee){if(ae%1!==0||ae<0)throw new RangeError("offset is not uint");if(ae+Q>ee)throw new RangeError("Trying to access beyond buffer length")}H.prototype.readUintLE=H.prototype.readUIntLE=function(Q,ee,fe){Q=Q>>>0,ee=ee>>>0,fe||ft(Q,ee,this.length);let _e=this[Q],Oe=1,Ve=0;for(;++Ve<ee&&(Oe*=256);)_e+=this[Q+Ve]*Oe;return _e},H.prototype.readUintBE=H.prototype.readUIntBE=function(Q,ee,fe){Q=Q>>>0,ee=ee>>>0,fe||ft(Q,ee,this.length);let _e=this[Q+--ee],Oe=1;for(;ee>0&&(Oe*=256);)_e+=this[Q+--ee]*Oe;return _e},H.prototype.readUint8=H.prototype.readUInt8=function(Q,ee){return Q=Q>>>0,ee||ft(Q,1,this.length),this[Q]},H.prototype.readUint16LE=H.prototype.readUInt16LE=function(Q,ee){return Q=Q>>>0,ee||ft(Q,2,this.length),this[Q]|this[Q+1]<<8},H.prototype.readUint16BE=H.prototype.readUInt16BE=function(Q,ee){return Q=Q>>>0,ee||ft(Q,2,this.length),this[Q]<<8|this[Q+1]},H.prototype.readUint32LE=H.prototype.readUInt32LE=function(Q,ee){return Q=Q>>>0,ee||ft(Q,4,this.length),(this[Q]|this[Q+1]<<8|this[Q+2]<<16)+this[Q+3]*16777216},H.prototype.readUint32BE=H.prototype.readUInt32BE=function(Q,ee){return Q=Q>>>0,ee||ft(Q,4,this.length),this[Q]*16777216+(this[Q+1]<<16|this[Q+2]<<8|this[Q+3])},H.prototype.readBigUInt64LE=_i(function(Q){Q=Q>>>0,Se(Q,"offset");const ee=this[Q],fe=this[Q+7];(ee===void 0||fe===void 0)&&de(Q,this.length-8);const _e=ee+this[++Q]*2**8+this[++Q]*2**16+this[++Q]*2**24,Oe=this[++Q]+this[++Q]*2**8+this[++Q]*2**16+fe*2**24;return BigInt(_e)+(BigInt(Oe)<<BigInt(32))}),H.prototype.readBigUInt64BE=_i(function(Q){Q=Q>>>0,Se(Q,"offset");const ee=this[Q],fe=this[Q+7];(ee===void 0||fe===void 0)&&de(Q,this.length-8);const _e=ee*2**24+this[++Q]*2**16+this[++Q]*2**8+this[++Q],Oe=this[++Q]*2**24+this[++Q]*2**16+this[++Q]*2**8+fe;return(BigInt(_e)<<BigInt(32))+BigInt(Oe)}),H.prototype.readIntLE=function(Q,ee,fe){Q=Q>>>0,ee=ee>>>0,fe||ft(Q,ee,this.length);let _e=this[Q],Oe=1,Ve=0;for(;++Ve<ee&&(Oe*=256);)_e+=this[Q+Ve]*Oe;return Oe*=128,_e>=Oe&&(_e-=Math.pow(2,8*ee)),_e},H.prototype.readIntBE=function(Q,ee,fe){Q=Q>>>0,ee=ee>>>0,fe||ft(Q,ee,this.length);let _e=ee,Oe=1,Ve=this[Q+--_e];for(;_e>0&&(Oe*=256);)Ve+=this[Q+--_e]*Oe;return Oe*=128,Ve>=Oe&&(Ve-=Math.pow(2,8*ee)),Ve},H.prototype.readInt8=function(Q,ee){return Q=Q>>>0,ee||ft(Q,1,this.length),this[Q]&128?(255-this[Q]+1)*-1:this[Q]},H.prototype.readInt16LE=function(Q,ee){Q=Q>>>0,ee||ft(Q,2,this.length);const fe=this[Q]|this[Q+1]<<8;return fe&32768?fe|4294901760:fe},H.prototype.readInt16BE=function(Q,ee){Q=Q>>>0,ee||ft(Q,2,this.length);const fe=this[Q+1]|this[Q]<<8;return fe&32768?fe|4294901760:fe},H.prototype.readInt32LE=function(Q,ee){return Q=Q>>>0,ee||ft(Q,4,this.length),this[Q]|this[Q+1]<<8|this[Q+2]<<16|this[Q+3]<<24},H.prototype.readInt32BE=function(Q,ee){return Q=Q>>>0,ee||ft(Q,4,this.length),this[Q]<<24|this[Q+1]<<16|this[Q+2]<<8|this[Q+3]},H.prototype.readBigInt64LE=_i(function(Q){Q=Q>>>0,Se(Q,"offset");const ee=this[Q],fe=this[Q+7];(ee===void 0||fe===void 0)&&de(Q,this.length-8);const _e=this[Q+4]+this[Q+5]*2**8+this[Q+6]*2**16+(fe<<24);return(BigInt(_e)<<BigInt(32))+BigInt(ee+this[++Q]*2**8+this[++Q]*2**16+this[++Q]*2**24)}),H.prototype.readBigInt64BE=_i(function(Q){Q=Q>>>0,Se(Q,"offset");const ee=this[Q],fe=this[Q+7];(ee===void 0||fe===void 0)&&de(Q,this.length-8);const _e=(ee<<24)+this[++Q]*2**16+this[++Q]*2**8+this[++Q];return(BigInt(_e)<<BigInt(32))+BigInt(this[++Q]*2**24+this[++Q]*2**16+this[++Q]*2**8+fe)}),H.prototype.readFloatLE=function(Q,ee){return Q=Q>>>0,ee||ft(Q,4,this.length),R.read(this,Q,!0,23,4)},H.prototype.readFloatBE=function(Q,ee){return Q=Q>>>0,ee||ft(Q,4,this.length),R.read(this,Q,!1,23,4)},H.prototype.readDoubleLE=function(Q,ee){return Q=Q>>>0,ee||ft(Q,8,this.length),R.read(this,Q,!0,52,8)},H.prototype.readDoubleBE=function(Q,ee){return Q=Q>>>0,ee||ft(Q,8,this.length),R.read(this,Q,!1,52,8)};function Me(ae,Q,ee,fe,_e,Oe){if(!H.isBuffer(ae))throw new TypeError('"buffer" argument must be a Buffer instance');if(Q>_e||Q<Oe)throw new RangeError('"value" argument is out of bounds');if(ee+fe>ae.length)throw new RangeError("Index out of range")}H.prototype.writeUintLE=H.prototype.writeUIntLE=function(Q,ee,fe,_e){if(Q=+Q,ee=ee>>>0,fe=fe>>>0,!_e){const Qt=Math.pow(2,8*fe)-1;Me(this,Q,ee,fe,Qt,0)}let Oe=1,Ve=0;for(this[ee]=Q&255;++Ve<fe&&(Oe*=256);)this[ee+Ve]=Q/Oe&255;return ee+fe},H.prototype.writeUintBE=H.prototype.writeUIntBE=function(Q,ee,fe,_e){if(Q=+Q,ee=ee>>>0,fe=fe>>>0,!_e){const Qt=Math.pow(2,8*fe)-1;Me(this,Q,ee,fe,Qt,0)}let Oe=fe-1,Ve=1;for(this[ee+Oe]=Q&255;--Oe>=0&&(Ve*=256);)this[ee+Oe]=Q/Ve&255;return ee+fe},H.prototype.writeUint8=H.prototype.writeUInt8=function(Q,ee,fe){return Q=+Q,ee=ee>>>0,fe||Me(this,Q,ee,1,255,0),this[ee]=Q&255,ee+1},H.prototype.writeUint16LE=H.prototype.writeUInt16LE=function(Q,ee,fe){return Q=+Q,ee=ee>>>0,fe||Me(this,Q,ee,2,65535,0),this[ee]=Q&255,this[ee+1]=Q>>>8,ee+2},H.prototype.writeUint16BE=H.prototype.writeUInt16BE=function(Q,ee,fe){return Q=+Q,ee=ee>>>0,fe||Me(this,Q,ee,2,65535,0),this[ee]=Q>>>8,this[ee+1]=Q&255,ee+2},H.prototype.writeUint32LE=H.prototype.writeUInt32LE=function(Q,ee,fe){return Q=+Q,ee=ee>>>0,fe||Me(this,Q,ee,4,4294967295,0),this[ee+3]=Q>>>24,this[ee+2]=Q>>>16,this[ee+1]=Q>>>8,this[ee]=Q&255,ee+4},H.prototype.writeUint32BE=H.prototype.writeUInt32BE=function(Q,ee,fe){return Q=+Q,ee=ee>>>0,fe||Me(this,Q,ee,4,4294967295,0),this[ee]=Q>>>24,this[ee+1]=Q>>>16,this[ee+2]=Q>>>8,this[ee+3]=Q&255,ee+4};function pt(ae,Q,ee,fe,_e){ue(Q,fe,_e,ae,ee,7);let Oe=Number(Q&BigInt(4294967295));ae[ee++]=Oe,Oe=Oe>>8,ae[ee++]=Oe,Oe=Oe>>8,ae[ee++]=Oe,Oe=Oe>>8,ae[ee++]=Oe;let Ve=Number(Q>>BigInt(32)&BigInt(4294967295));return ae[ee++]=Ve,Ve=Ve>>8,ae[ee++]=Ve,Ve=Ve>>8,ae[ee++]=Ve,Ve=Ve>>8,ae[ee++]=Ve,ee}function Kt(ae,Q,ee,fe,_e){ue(Q,fe,_e,ae,ee,7);let Oe=Number(Q&BigInt(4294967295));ae[ee+7]=Oe,Oe=Oe>>8,ae[ee+6]=Oe,Oe=Oe>>8,ae[ee+5]=Oe,Oe=Oe>>8,ae[ee+4]=Oe;let Ve=Number(Q>>BigInt(32)&BigInt(4294967295));return ae[ee+3]=Ve,Ve=Ve>>8,ae[ee+2]=Ve,Ve=Ve>>8,ae[ee+1]=Ve,Ve=Ve>>8,ae[ee]=Ve,ee+8}H.prototype.writeBigUInt64LE=_i(function(Q,ee=0){return pt(this,Q,ee,BigInt(0),BigInt("0xffffffffffffffff"))}),H.prototype.writeBigUInt64BE=_i(function(Q,ee=0){return Kt(this,Q,ee,BigInt(0),BigInt("0xffffffffffffffff"))}),H.prototype.writeIntLE=function(Q,ee,fe,_e){if(Q=+Q,ee=ee>>>0,!_e){const Ht=Math.pow(2,8*fe-1);Me(this,Q,ee,fe,Ht-1,-Ht)}let Oe=0,Ve=1,Qt=0;for(this[ee]=Q&255;++Oe<fe&&(Ve*=256);)Q<0&&Qt===0&&this[ee+Oe-1]!==0&&(Qt=1),this[ee+Oe]=(Q/Ve>>0)-Qt&255;return ee+fe},H.prototype.writeIntBE=function(Q,ee,fe,_e){if(Q=+Q,ee=ee>>>0,!_e){const Ht=Math.pow(2,8*fe-1);Me(this,Q,ee,fe,Ht-1,-Ht)}let Oe=fe-1,Ve=1,Qt=0;for(this[ee+Oe]=Q&255;--Oe>=0&&(Ve*=256);)Q<0&&Qt===0&&this[ee+Oe+1]!==0&&(Qt=1),this[ee+Oe]=(Q/Ve>>0)-Qt&255;return ee+fe},H.prototype.writeInt8=function(Q,ee,fe){return Q=+Q,ee=ee>>>0,fe||Me(this,Q,ee,1,127,-128),Q<0&&(Q=255+Q+1),this[ee]=Q&255,ee+1},H.prototype.writeInt16LE=function(Q,ee,fe){return Q=+Q,ee=ee>>>0,fe||Me(this,Q,ee,2,32767,-32768),this[ee]=Q&255,this[ee+1]=Q>>>8,ee+2},H.prototype.writeInt16BE=function(Q,ee,fe){return Q=+Q,ee=ee>>>0,fe||Me(this,Q,ee,2,32767,-32768),this[ee]=Q>>>8,this[ee+1]=Q&255,ee+2},H.prototype.writeInt32LE=function(Q,ee,fe){return Q=+Q,ee=ee>>>0,fe||Me(this,Q,ee,4,2147483647,-2147483648),this[ee]=Q&255,this[ee+1]=Q>>>8,this[ee+2]=Q>>>16,this[ee+3]=Q>>>24,ee+4},H.prototype.writeInt32BE=function(Q,ee,fe){return Q=+Q,ee=ee>>>0,fe||Me(this,Q,ee,4,2147483647,-2147483648),Q<0&&(Q=4294967295+Q+1),this[ee]=Q>>>24,this[ee+1]=Q>>>16,this[ee+2]=Q>>>8,this[ee+3]=Q&255,ee+4},H.prototype.writeBigInt64LE=_i(function(Q,ee=0){return pt(this,Q,ee,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),H.prototype.writeBigInt64BE=_i(function(Q,ee=0){return Kt(this,Q,ee,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Re(ae,Q,ee,fe,_e,Oe){if(ee+fe>ae.length)throw new RangeError("Index out of range");if(ee<0)throw new RangeError("Index out of range")}function He(ae,Q,ee,fe,_e){return Q=+Q,ee=ee>>>0,_e||Re(ae,Q,ee,4),R.write(ae,Q,ee,fe,23,4),ee+4}H.prototype.writeFloatLE=function(Q,ee,fe){return He(this,Q,ee,!0,fe)},H.prototype.writeFloatBE=function(Q,ee,fe){return He(this,Q,ee,!1,fe)};function gt(ae,Q,ee,fe,_e){return Q=+Q,ee=ee>>>0,_e||Re(ae,Q,ee,8),R.write(ae,Q,ee,fe,52,8),ee+8}H.prototype.writeDoubleLE=function(Q,ee,fe){return gt(this,Q,ee,!0,fe)},H.prototype.writeDoubleBE=function(Q,ee,fe){return gt(this,Q,ee,!1,fe)},H.prototype.copy=function(Q,ee,fe,_e){if(!H.isBuffer(Q))throw new TypeError("argument should be a Buffer");if(fe||(fe=0),!_e&&_e!==0&&(_e=this.length),ee>=Q.length&&(ee=Q.length),ee||(ee=0),_e>0&&_e<fe&&(_e=fe),_e===fe||Q.length===0||this.length===0)return 0;if(ee<0)throw new RangeError("targetStart out of bounds");if(fe<0||fe>=this.length)throw new RangeError("Index out of range");if(_e<0)throw new RangeError("sourceEnd out of bounds");_e>this.length&&(_e=this.length),Q.length-ee<_e-fe&&(_e=Q.length-ee+fe);const Oe=_e-fe;return this===Q&&typeof B.prototype.copyWithin=="function"?this.copyWithin(ee,fe,_e):B.prototype.set.call(Q,this.subarray(fe,_e),ee),Oe},H.prototype.fill=function(Q,ee,fe,_e){if(typeof Q=="string"){if(typeof ee=="string"?(_e=ee,ee=0,fe=this.length):typeof fe=="string"&&(_e=fe,fe=this.length),_e!==void 0&&typeof _e!="string")throw new TypeError("encoding must be a string");if(typeof _e=="string"&&!H.isEncoding(_e))throw new TypeError("Unknown encoding: "+_e);if(Q.length===1){const Ve=Q.charCodeAt(0);(_e==="utf8"&&Ve<128||_e==="latin1")&&(Q=Ve)}}else typeof Q=="number"?Q=Q&255:typeof Q=="boolean"&&(Q=Number(Q));if(ee<0||this.length<ee||this.length<fe)throw new RangeError("Out of range index");if(fe<=ee)return this;ee=ee>>>0,fe=fe===void 0?this.length:fe>>>0,Q||(Q=0);let Oe;if(typeof Q=="number")for(Oe=ee;Oe<fe;++Oe)this[Oe]=Q;else{const Ve=H.isBuffer(Q)?Q:H.from(Q,_e),Qt=Ve.length;if(Qt===0)throw new TypeError('The value "'+Q+'" is invalid for argument "value"');for(Oe=0;Oe<fe-ee;++Oe)this[Oe+ee]=Ve[Oe%Qt]}return this};const dt={};function ie(ae,Q,ee){dt[ae]=class extends ee{constructor(){super(),Object.defineProperty(this,"message",{value:Q.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${ae}]`,this.stack,delete this.name}get code(){return ae}set code(_e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:_e,writable:!0})}toString(){return`${this.name} [${ae}]: ${this.message}`}}}ie("ERR_BUFFER_OUT_OF_BOUNDS",function(ae){return ae?`${ae} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ie("ERR_INVALID_ARG_TYPE",function(ae,Q){return`The "${ae}" argument must be of type number. Received type ${typeof Q}`},TypeError),ie("ERR_OUT_OF_RANGE",function(ae,Q,ee){let fe=`The value of "${ae}" is out of range.`,_e=ee;return Number.isInteger(ee)&&Math.abs(ee)>2**32?_e=J(String(ee)):typeof ee=="bigint"&&(_e=String(ee),(ee>BigInt(2)**BigInt(32)||ee<-(BigInt(2)**BigInt(32)))&&(_e=J(_e)),_e+="n"),fe+=` It must be ${Q}. Received ${_e}`,fe},RangeError);function J(ae){let Q="",ee=ae.length;const fe=ae[0]==="-"?1:0;for(;ee>=fe+4;ee-=3)Q=`_${ae.slice(ee-3,ee)}${Q}`;return`${ae.slice(0,ee)}${Q}`}function Z(ae,Q,ee){Se(Q,"offset"),(ae[Q]===void 0||ae[Q+ee]===void 0)&&de(Q,ae.length-(ee+1))}function ue(ae,Q,ee,fe,_e,Oe){if(ae>ee||ae<Q){const Ve=typeof Q=="bigint"?"n":"";let Qt;throw Q===0||Q===BigInt(0)?Qt=`>= 0${Ve} and < 2${Ve} ** ${(Oe+1)*8}${Ve}`:Qt=`>= -(2${Ve} ** ${(Oe+1)*8-1}${Ve}) and < 2 ** ${(Oe+1)*8-1}${Ve}`,new dt.ERR_OUT_OF_RANGE("value",Qt,ae)}Z(fe,_e,Oe)}function Se(ae,Q){if(typeof ae!="number")throw new dt.ERR_INVALID_ARG_TYPE(Q,"number",ae)}function de(ae,Q,ee){throw Math.floor(ae)!==ae?(Se(ae,ee),new dt.ERR_OUT_OF_RANGE("offset","an integer",ae)):Q<0?new dt.ERR_BUFFER_OUT_OF_BOUNDS:new dt.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${Q}`,ae)}const ye=/[^+/0-9A-Za-z-_]/g;function et(ae){if(ae=ae.split("=")[0],ae=ae.trim().replace(ye,""),ae.length<2)return"";for(;ae.length%4!==0;)ae=ae+"=";return ae}function Ze(ae,Q){Q=Q||1/0;let ee;const fe=ae.length;let _e=null;const Oe=[];for(let Ve=0;Ve<fe;++Ve){if(ee=ae.charCodeAt(Ve),ee>55295&&ee<57344){if(!_e){if(ee>56319){(Q-=3)>-1&&Oe.push(239,191,189);continue}else if(Ve+1===fe){(Q-=3)>-1&&Oe.push(239,191,189);continue}_e=ee;continue}if(ee<56320){(Q-=3)>-1&&Oe.push(239,191,189),_e=ee;continue}ee=(_e-55296<<10|ee-56320)+65536}else _e&&(Q-=3)>-1&&Oe.push(239,191,189);if(_e=null,ee<128){if((Q-=1)<0)break;Oe.push(ee)}else if(ee<2048){if((Q-=2)<0)break;Oe.push(ee>>6|192,ee&63|128)}else if(ee<65536){if((Q-=3)<0)break;Oe.push(ee>>12|224,ee>>6&63|128,ee&63|128)}else if(ee<1114112){if((Q-=4)<0)break;Oe.push(ee>>18|240,ee>>12&63|128,ee>>6&63|128,ee&63|128)}else throw new Error("Invalid code point")}return Oe}function lt(ae){const Q=[];for(let ee=0;ee<ae.length;++ee)Q.push(ae.charCodeAt(ee)&255);return Q}function $t(ae,Q){let ee,fe,_e;const Oe=[];for(let Ve=0;Ve<ae.length&&!((Q-=2)<0);++Ve)ee=ae.charCodeAt(Ve),fe=ee>>8,_e=ee%256,Oe.push(_e),Oe.push(fe);return Oe}function vt(ae){return N.toByteArray(et(ae))}function jt(ae,Q,ee,fe){let _e;for(_e=0;_e<fe&&!(_e+ee>=Q.length||_e>=ae.length);++_e)Q[_e+ee]=ae[_e];return _e}function sn(ae,Q){return ae instanceof Q||ae!=null&&ae.constructor!=null&&ae.constructor.name!=null&&ae.constructor.name===Q.name}function tn(ae){return ae!==ae}const on=(function(){const ae="0123456789abcdef",Q=new Array(256);for(let ee=0;ee<16;++ee){const fe=ee*16;for(let _e=0;_e<16;++_e)Q[fe+_e]=ae[ee]+ae[_e]}return Q})();function _i(ae){return typeof BigInt>"u"?Vn:ae}function Vn(){throw new Error("BigInt not supported")}})(e);const w=e.Buffer;t.Blob=e.Blob,t.BlobOptions=e.BlobOptions,t.Buffer=e.Buffer,t.File=e.File,t.FileOptions=e.FileOptions,t.INSPECT_MAX_BYTES=e.INSPECT_MAX_BYTES,t.SlowBuffer=e.SlowBuffer,t.TranscodeEncoding=e.TranscodeEncoding,t.atob=e.atob,t.btoa=e.btoa,t.constants=e.constants,t.default=w,t.isAscii=e.isAscii,t.isUtf8=e.isUtf8,t.kMaxLength=e.kMaxLength,t.kStringMaxLength=e.kStringMaxLength,t.resolveObjectURL=e.resolveObjectURL,t.transcode=e.transcode})(C4)),C4}var mdt=zT.exports,FZ;function Mme(){return FZ||(FZ=1,(function(t){(function(e,n){function r(F,T){if(!F)throw new Error(T||"Assertion failed")}function i(F,T){F.super_=T;var _=function(){};_.prototype=T.prototype,F.prototype=new _,F.prototype.constructor=F}function s(F,T,_){if(s.isBN(F))return F;this.negative=0,this.words=null,this.length=0,this.red=null,F!==null&&((T==="le"||T==="be")&&(_=T,T=10),this._init(F||0,T||10,_||"be"))}typeof e=="object"?e.exports=s:n.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=h7().Buffer}catch{}s.isBN=function(T){return T instanceof s?!0:T!==null&&typeof T=="object"&&T.constructor.wordSize===s.wordSize&&Array.isArray(T.words)},s.max=function(T,_){return T.cmp(_)>0?T:_},s.min=function(T,_){return T.cmp(_)<0?T:_},s.prototype._init=function(T,_,L){if(typeof T=="number")return this._initNumber(T,_,L);if(typeof T=="object")return this._initArray(T,_,L);_==="hex"&&(_=16),r(_===(_|0)&&_>=2&&_<=36),T=T.toString().replace(/\s+/g,"");var V=0;T[0]==="-"&&(V++,this.negative=1),V<T.length&&(_===16?this._parseHex(T,V,L):(this._parseBase(T,_,V),L==="le"&&this._initArray(this.toArray(),_,L)))},s.prototype._initNumber=function(T,_,L){T<0&&(this.negative=1,T=-T),T<67108864?(this.words=[T&67108863],this.length=1):T<4503599627370496?(this.words=[T&67108863,T/67108864&67108863],this.length=2):(r(T<9007199254740992),this.words=[T&67108863,T/67108864&67108863,1],this.length=3),L==="le"&&this._initArray(this.toArray(),_,L)},s.prototype._initArray=function(T,_,L){if(r(typeof T.length=="number"),T.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(T.length/3),this.words=new Array(this.length);for(var V=0;V<this.length;V++)this.words[V]=0;var K,te,G=0;if(L==="be")for(V=T.length-1,K=0;V>=0;V-=3)te=T[V]|T[V-1]<<8|T[V-2]<<16,this.words[K]|=te<<G&67108863,this.words[K+1]=te>>>26-G&67108863,G+=24,G>=26&&(G-=26,K++);else if(L==="le")for(V=0,K=0;V<T.length;V+=3)te=T[V]|T[V+1]<<8|T[V+2]<<16,this.words[K]|=te<<G&67108863,this.words[K+1]=te>>>26-G&67108863,G+=24,G>=26&&(G-=26,K++);return this._strip()};function a(F,T){var _=F.charCodeAt(T);if(_>=48&&_<=57)return _-48;if(_>=65&&_<=70)return _-55;if(_>=97&&_<=102)return _-87;r(!1,"Invalid character in "+F)}function l(F,T,_){var L=a(F,_);return _-1>=T&&(L|=a(F,_-1)<<4),L}s.prototype._parseHex=function(T,_,L){this.length=Math.ceil((T.length-_)/6),this.words=new Array(this.length);for(var V=0;V<this.length;V++)this.words[V]=0;var K=0,te=0,G;if(L==="be")for(V=T.length-1;V>=_;V-=2)G=l(T,_,V)<<K,this.words[te]|=G&67108863,K>=18?(K-=18,te+=1,this.words[te]|=G>>>26):K+=8;else{var q=T.length-_;for(V=q%2===0?_+1:_;V<T.length;V+=2)G=l(T,_,V)<<K,this.words[te]|=G&67108863,K>=18?(K-=18,te+=1,this.words[te]|=G>>>26):K+=8}this._strip()};function c(F,T,_,L){for(var V=0,K=0,te=Math.min(F.length,_),G=T;G<te;G++){var q=F.charCodeAt(G)-48;V*=L,q>=49?K=q-49+10:q>=17?K=q-17+10:K=q,r(q>=0&&K<L,"Invalid character"),V+=K}return V}s.prototype._parseBase=function(T,_,L){this.words=[0],this.length=1;for(var V=0,K=1;K<=67108863;K*=_)V++;V--,K=K/_|0;for(var te=T.length-L,G=te%V,q=Math.min(te,te-G)+L,M=0,P=L;P<q;P+=V)M=c(T,P,P+V,_),this.imuln(K),this.words[0]+M<67108864?this.words[0]+=M:this._iaddn(M);if(G!==0){var Y=1;for(M=c(T,P,T.length,_),P=0;P<G;P++)Y*=_;this.imuln(Y),this.words[0]+M<67108864?this.words[0]+=M:this._iaddn(M)}this._strip()},s.prototype.copy=function(T){T.words=new Array(this.length);for(var _=0;_<this.length;_++)T.words[_]=this.words[_];T.length=this.length,T.negative=this.negative,T.red=this.red};function u(F,T){F.words=T.words,F.length=T.length,F.negative=T.negative,F.red=T.red}if(s.prototype._move=function(T){u(T,this)},s.prototype.clone=function(){var T=new s(null);return this.copy(T),T},s.prototype._expand=function(T){for(;this.length<T;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=h}catch{s.prototype.inspect=h}else s.prototype.inspect=h;function h(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var m=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],g=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],y=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(T,_){T=T||10,_=_|0||1;var L;if(T===16||T==="hex"){L="";for(var V=0,K=0,te=0;te<this.length;te++){var G=this.words[te],q=((G<<V|K)&16777215).toString(16);K=G>>>24-V&16777215,V+=2,V>=26&&(V-=26,te--),K!==0||te!==this.length-1?L=m[6-q.length]+q+L:L=q+L}for(K!==0&&(L=K.toString(16)+L);L.length%_!==0;)L="0"+L;return this.negative!==0&&(L="-"+L),L}if(T===(T|0)&&T>=2&&T<=36){var M=g[T],P=y[T];L="";var Y=this.clone();for(Y.negative=0;!Y.isZero();){var X=Y.modrn(P).toString(T);Y=Y.idivn(P),Y.isZero()?L=X+L:L=m[M-X.length]+X+L}for(this.isZero()&&(L="0"+L);L.length%_!==0;)L="0"+L;return this.negative!==0&&(L="-"+L),L}r(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var T=this.words[0];return this.length===2?T+=this.words[1]*67108864:this.length===3&&this.words[2]===1?T+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-T:T},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(T,_){return this.toArrayLike(o,T,_)}),s.prototype.toArray=function(T,_){return this.toArrayLike(Array,T,_)};var v=function(T,_){return T.allocUnsafe?T.allocUnsafe(_):new T(_)};s.prototype.toArrayLike=function(T,_,L){this._strip();var V=this.byteLength(),K=L||Math.max(1,V);r(V<=K,"byte array longer than desired length"),r(K>0,"Requested array length <= 0");var te=v(T,K),G=_==="le"?"LE":"BE";return this["_toArrayLike"+G](te,V),te},s.prototype._toArrayLikeLE=function(T,_){for(var L=0,V=0,K=0,te=0;K<this.length;K++){var G=this.words[K]<<te|V;T[L++]=G&255,L<T.length&&(T[L++]=G>>8&255),L<T.length&&(T[L++]=G>>16&255),te===6?(L<T.length&&(T[L++]=G>>24&255),V=0,te=0):(V=G>>>24,te+=2)}if(L<T.length)for(T[L++]=V;L<T.length;)T[L++]=0},s.prototype._toArrayLikeBE=function(T,_){for(var L=T.length-1,V=0,K=0,te=0;K<this.length;K++){var G=this.words[K]<<te|V;T[L--]=G&255,L>=0&&(T[L--]=G>>8&255),L>=0&&(T[L--]=G>>16&255),te===6?(L>=0&&(T[L--]=G>>24&255),V=0,te=0):(V=G>>>24,te+=2)}if(L>=0)for(T[L--]=V;L>=0;)T[L--]=0},Math.clz32?s.prototype._countBits=function(T){return 32-Math.clz32(T)}:s.prototype._countBits=function(T){var _=T,L=0;return _>=4096&&(L+=13,_>>>=13),_>=64&&(L+=7,_>>>=7),_>=8&&(L+=4,_>>>=4),_>=2&&(L+=2,_>>>=2),L+_},s.prototype._zeroBits=function(T){if(T===0)return 26;var _=T,L=0;return(_&8191)===0&&(L+=13,_>>>=13),(_&127)===0&&(L+=7,_>>>=7),(_&15)===0&&(L+=4,_>>>=4),(_&3)===0&&(L+=2,_>>>=2),(_&1)===0&&L++,L},s.prototype.bitLength=function(){var T=this.words[this.length-1],_=this._countBits(T);return(this.length-1)*26+_};function b(F){for(var T=new Array(F.bitLength()),_=0;_<T.length;_++){var L=_/26|0,V=_%26;T[_]=F.words[L]>>>V&1}return T}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var T=0,_=0;_<this.length;_++){var L=this._zeroBits(this.words[_]);if(T+=L,L!==26)break}return T},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(T){return this.negative!==0?this.abs().inotn(T).iaddn(1):this.clone()},s.prototype.fromTwos=function(T){return this.testn(T-1)?this.notn(T).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(T){for(;this.length<T.length;)this.words[this.length++]=0;for(var _=0;_<T.length;_++)this.words[_]=this.words[_]|T.words[_];return this._strip()},s.prototype.ior=function(T){return r((this.negative|T.negative)===0),this.iuor(T)},s.prototype.or=function(T){return this.length>T.length?this.clone().ior(T):T.clone().ior(this)},s.prototype.uor=function(T){return this.length>T.length?this.clone().iuor(T):T.clone().iuor(this)},s.prototype.iuand=function(T){var _;this.length>T.length?_=T:_=this;for(var L=0;L<_.length;L++)this.words[L]=this.words[L]&T.words[L];return this.length=_.length,this._strip()},s.prototype.iand=function(T){return r((this.negative|T.negative)===0),this.iuand(T)},s.prototype.and=function(T){return this.length>T.length?this.clone().iand(T):T.clone().iand(this)},s.prototype.uand=function(T){return this.length>T.length?this.clone().iuand(T):T.clone().iuand(this)},s.prototype.iuxor=function(T){var _,L;this.length>T.length?(_=this,L=T):(_=T,L=this);for(var V=0;V<L.length;V++)this.words[V]=_.words[V]^L.words[V];if(this!==_)for(;V<_.length;V++)this.words[V]=_.words[V];return this.length=_.length,this._strip()},s.prototype.ixor=function(T){return r((this.negative|T.negative)===0),this.iuxor(T)},s.prototype.xor=function(T){return this.length>T.length?this.clone().ixor(T):T.clone().ixor(this)},s.prototype.uxor=function(T){return this.length>T.length?this.clone().iuxor(T):T.clone().iuxor(this)},s.prototype.inotn=function(T){r(typeof T=="number"&&T>=0);var _=Math.ceil(T/26)|0,L=T%26;this._expand(_),L>0&&_--;for(var V=0;V<_;V++)this.words[V]=~this.words[V]&67108863;return L>0&&(this.words[V]=~this.words[V]&67108863>>26-L),this._strip()},s.prototype.notn=function(T){return this.clone().inotn(T)},s.prototype.setn=function(T,_){r(typeof T=="number"&&T>=0);var L=T/26|0,V=T%26;return this._expand(L+1),_?this.words[L]=this.words[L]|1<<V:this.words[L]=this.words[L]&~(1<<V),this._strip()},s.prototype.iadd=function(T){var _;if(this.negative!==0&&T.negative===0)return this.negative=0,_=this.isub(T),this.negative^=1,this._normSign();if(this.negative===0&&T.negative!==0)return T.negative=0,_=this.isub(T),T.negative=1,_._normSign();var L,V;this.length>T.length?(L=this,V=T):(L=T,V=this);for(var K=0,te=0;te<V.length;te++)_=(L.words[te]|0)+(V.words[te]|0)+K,this.words[te]=_&67108863,K=_>>>26;for(;K!==0&&te<L.length;te++)_=(L.words[te]|0)+K,this.words[te]=_&67108863,K=_>>>26;if(this.length=L.length,K!==0)this.words[this.length]=K,this.length++;else if(L!==this)for(;te<L.length;te++)this.words[te]=L.words[te];return this},s.prototype.add=function(T){var _;return T.negative!==0&&this.negative===0?(T.negative=0,_=this.sub(T),T.negative^=1,_):T.negative===0&&this.negative!==0?(this.negative=0,_=T.sub(this),this.negative=1,_):this.length>T.length?this.clone().iadd(T):T.clone().iadd(this)},s.prototype.isub=function(T){if(T.negative!==0){T.negative=0;var _=this.iadd(T);return T.negative=1,_._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(T),this.negative=1,this._normSign();var L=this.cmp(T);if(L===0)return this.negative=0,this.length=1,this.words[0]=0,this;var V,K;L>0?(V=this,K=T):(V=T,K=this);for(var te=0,G=0;G<K.length;G++)_=(V.words[G]|0)-(K.words[G]|0)+te,te=_>>26,this.words[G]=_&67108863;for(;te!==0&&G<V.length;G++)_=(V.words[G]|0)+te,te=_>>26,this.words[G]=_&67108863;if(te===0&&G<V.length&&V!==this)for(;G<V.length;G++)this.words[G]=V.words[G];return this.length=Math.max(this.length,G),V!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(T){return this.clone().isub(T)};function w(F,T,_){_.negative=T.negative^F.negative;var L=F.length+T.length|0;_.length=L,L=L-1|0;var V=F.words[0]|0,K=T.words[0]|0,te=V*K,G=te&67108863,q=te/67108864|0;_.words[0]=G;for(var M=1;M<L;M++){for(var P=q>>>26,Y=q&67108863,X=Math.min(M,T.length-1),se=Math.max(0,M-F.length+1);se<=X;se++){var oe=M-se|0;V=F.words[oe]|0,K=T.words[se]|0,te=V*K+Y,P+=te/67108864|0,Y=te&67108863}_.words[M]=Y|0,q=P|0}return q!==0?_.words[M]=q|0:_.length--,_._strip()}var k=function(T,_,L){var V=T.words,K=_.words,te=L.words,G=0,q,M,P,Y=V[0]|0,X=Y&8191,se=Y>>>13,oe=V[1]|0,me=oe&8191,ce=oe>>>13,ve=V[2]|0,Ne=ve&8191,pe=ve>>>13,Le=V[3]|0,he=Le&8191,Te=Le>>>13,Ge=V[4]|0,We=Ge&8191,Qe=Ge>>>13,at=V[5]|0,rt=at&8191,Xe=at>>>13,ft=V[6]|0,Me=ft&8191,pt=ft>>>13,Kt=V[7]|0,Re=Kt&8191,He=Kt>>>13,gt=V[8]|0,dt=gt&8191,ie=gt>>>13,J=V[9]|0,Z=J&8191,ue=J>>>13,Se=K[0]|0,de=Se&8191,ye=Se>>>13,et=K[1]|0,Ze=et&8191,lt=et>>>13,$t=K[2]|0,vt=$t&8191,jt=$t>>>13,sn=K[3]|0,tn=sn&8191,on=sn>>>13,_i=K[4]|0,Vn=_i&8191,ae=_i>>>13,Q=K[5]|0,ee=Q&8191,fe=Q>>>13,_e=K[6]|0,Oe=_e&8191,Ve=_e>>>13,Qt=K[7]|0,Ht=Qt&8191,ot=Qt>>>13,mn=K[8]|0,At=mn&8191,bn=mn>>>13,ol=K[9]|0,ur=ol&8191,yr=ol>>>13;L.negative=T.negative^_.negative,L.length=19,q=Math.imul(X,de),M=Math.imul(X,ye),M=M+Math.imul(se,de)|0,P=Math.imul(se,ye);var Qc=(G+q|0)+((M&8191)<<13)|0;G=(P+(M>>>13)|0)+(Qc>>>26)|0,Qc&=67108863,q=Math.imul(me,de),M=Math.imul(me,ye),M=M+Math.imul(ce,de)|0,P=Math.imul(ce,ye),q=q+Math.imul(X,Ze)|0,M=M+Math.imul(X,lt)|0,M=M+Math.imul(se,Ze)|0,P=P+Math.imul(se,lt)|0;var Ql=(G+q|0)+((M&8191)<<13)|0;G=(P+(M>>>13)|0)+(Ql>>>26)|0,Ql&=67108863,q=Math.imul(Ne,de),M=Math.imul(Ne,ye),M=M+Math.imul(pe,de)|0,P=Math.imul(pe,ye),q=q+Math.imul(me,Ze)|0,M=M+Math.imul(me,lt)|0,M=M+Math.imul(ce,Ze)|0,P=P+Math.imul(ce,lt)|0,q=q+Math.imul(X,vt)|0,M=M+Math.imul(X,jt)|0,M=M+Math.imul(se,vt)|0,P=P+Math.imul(se,jt)|0;var ca=(G+q|0)+((M&8191)<<13)|0;G=(P+(M>>>13)|0)+(ca>>>26)|0,ca&=67108863,q=Math.imul(he,de),M=Math.imul(he,ye),M=M+Math.imul(Te,de)|0,P=Math.imul(Te,ye),q=q+Math.imul(Ne,Ze)|0,M=M+Math.imul(Ne,lt)|0,M=M+Math.imul(pe,Ze)|0,P=P+Math.imul(pe,lt)|0,q=q+Math.imul(me,vt)|0,M=M+Math.imul(me,jt)|0,M=M+Math.imul(ce,vt)|0,P=P+Math.imul(ce,jt)|0,q=q+Math.imul(X,tn)|0,M=M+Math.imul(X,on)|0,M=M+Math.imul(se,tn)|0,P=P+Math.imul(se,on)|0;var Zl=(G+q|0)+((M&8191)<<13)|0;G=(P+(M>>>13)|0)+(Zl>>>26)|0,Zl&=67108863,q=Math.imul(We,de),M=Math.imul(We,ye),M=M+Math.imul(Qe,de)|0,P=Math.imul(Qe,ye),q=q+Math.imul(he,Ze)|0,M=M+Math.imul(he,lt)|0,M=M+Math.imul(Te,Ze)|0,P=P+Math.imul(Te,lt)|0,q=q+Math.imul(Ne,vt)|0,M=M+Math.imul(Ne,jt)|0,M=M+Math.imul(pe,vt)|0,P=P+Math.imul(pe,jt)|0,q=q+Math.imul(me,tn)|0,M=M+Math.imul(me,on)|0,M=M+Math.imul(ce,tn)|0,P=P+Math.imul(ce,on)|0,q=q+Math.imul(X,Vn)|0,M=M+Math.imul(X,ae)|0,M=M+Math.imul(se,Vn)|0,P=P+Math.imul(se,ae)|0;var _o=(G+q|0)+((M&8191)<<13)|0;G=(P+(M>>>13)|0)+(_o>>>26)|0,_o&=67108863,q=Math.imul(rt,de),M=Math.imul(rt,ye),M=M+Math.imul(Xe,de)|0,P=Math.imul(Xe,ye),q=q+Math.imul(We,Ze)|0,M=M+Math.imul(We,lt)|0,M=M+Math.imul(Qe,Ze)|0,P=P+Math.imul(Qe,lt)|0,q=q+Math.imul(he,vt)|0,M=M+Math.imul(he,jt)|0,M=M+Math.imul(Te,vt)|0,P=P+Math.imul(Te,jt)|0,q=q+Math.imul(Ne,tn)|0,M=M+Math.imul(Ne,on)|0,M=M+Math.imul(pe,tn)|0,P=P+Math.imul(pe,on)|0,q=q+Math.imul(me,Vn)|0,M=M+Math.imul(me,ae)|0,M=M+Math.imul(ce,Vn)|0,P=P+Math.imul(ce,ae)|0,q=q+Math.imul(X,ee)|0,M=M+Math.imul(X,fe)|0,M=M+Math.imul(se,ee)|0,P=P+Math.imul(se,fe)|0;var Io=(G+q|0)+((M&8191)<<13)|0;G=(P+(M>>>13)|0)+(Io>>>26)|0,Io&=67108863,q=Math.imul(Me,de),M=Math.imul(Me,ye),M=M+Math.imul(pt,de)|0,P=Math.imul(pt,ye),q=q+Math.imul(rt,Ze)|0,M=M+Math.imul(rt,lt)|0,M=M+Math.imul(Xe,Ze)|0,P=P+Math.imul(Xe,lt)|0,q=q+Math.imul(We,vt)|0,M=M+Math.imul(We,jt)|0,M=M+Math.imul(Qe,vt)|0,P=P+Math.imul(Qe,jt)|0,q=q+Math.imul(he,tn)|0,M=M+Math.imul(he,on)|0,M=M+Math.imul(Te,tn)|0,P=P+Math.imul(Te,on)|0,q=q+Math.imul(Ne,Vn)|0,M=M+Math.imul(Ne,ae)|0,M=M+Math.imul(pe,Vn)|0,P=P+Math.imul(pe,ae)|0,q=q+Math.imul(me,ee)|0,M=M+Math.imul(me,fe)|0,M=M+Math.imul(ce,ee)|0,P=P+Math.imul(ce,fe)|0,q=q+Math.imul(X,Oe)|0,M=M+Math.imul(X,Ve)|0,M=M+Math.imul(se,Oe)|0,P=P+Math.imul(se,Ve)|0;var ua=(G+q|0)+((M&8191)<<13)|0;G=(P+(M>>>13)|0)+(ua>>>26)|0,ua&=67108863,q=Math.imul(Re,de),M=Math.imul(Re,ye),M=M+Math.imul(He,de)|0,P=Math.imul(He,ye),q=q+Math.imul(Me,Ze)|0,M=M+Math.imul(Me,lt)|0,M=M+Math.imul(pt,Ze)|0,P=P+Math.imul(pt,lt)|0,q=q+Math.imul(rt,vt)|0,M=M+Math.imul(rt,jt)|0,M=M+Math.imul(Xe,vt)|0,P=P+Math.imul(Xe,jt)|0,q=q+Math.imul(We,tn)|0,M=M+Math.imul(We,on)|0,M=M+Math.imul(Qe,tn)|0,P=P+Math.imul(Qe,on)|0,q=q+Math.imul(he,Vn)|0,M=M+Math.imul(he,ae)|0,M=M+Math.imul(Te,Vn)|0,P=P+Math.imul(Te,ae)|0,q=q+Math.imul(Ne,ee)|0,M=M+Math.imul(Ne,fe)|0,M=M+Math.imul(pe,ee)|0,P=P+Math.imul(pe,fe)|0,q=q+Math.imul(me,Oe)|0,M=M+Math.imul(me,Ve)|0,M=M+Math.imul(ce,Oe)|0,P=P+Math.imul(ce,Ve)|0,q=q+Math.imul(X,Ht)|0,M=M+Math.imul(X,ot)|0,M=M+Math.imul(se,Ht)|0,P=P+Math.imul(se,ot)|0;var Ro=(G+q|0)+((M&8191)<<13)|0;G=(P+(M>>>13)|0)+(Ro>>>26)|0,Ro&=67108863,q=Math.imul(dt,de),M=Math.imul(dt,ye),M=M+Math.imul(ie,de)|0,P=Math.imul(ie,ye),q=q+Math.imul(Re,Ze)|0,M=M+Math.imul(Re,lt)|0,M=M+Math.imul(He,Ze)|0,P=P+Math.imul(He,lt)|0,q=q+Math.imul(Me,vt)|0,M=M+Math.imul(Me,jt)|0,M=M+Math.imul(pt,vt)|0,P=P+Math.imul(pt,jt)|0,q=q+Math.imul(rt,tn)|0,M=M+Math.imul(rt,on)|0,M=M+Math.imul(Xe,tn)|0,P=P+Math.imul(Xe,on)|0,q=q+Math.imul(We,Vn)|0,M=M+Math.imul(We,ae)|0,M=M+Math.imul(Qe,Vn)|0,P=P+Math.imul(Qe,ae)|0,q=q+Math.imul(he,ee)|0,M=M+Math.imul(he,fe)|0,M=M+Math.imul(Te,ee)|0,P=P+Math.imul(Te,fe)|0,q=q+Math.imul(Ne,Oe)|0,M=M+Math.imul(Ne,Ve)|0,M=M+Math.imul(pe,Oe)|0,P=P+Math.imul(pe,Ve)|0,q=q+Math.imul(me,Ht)|0,M=M+Math.imul(me,ot)|0,M=M+Math.imul(ce,Ht)|0,P=P+Math.imul(ce,ot)|0,q=q+Math.imul(X,At)|0,M=M+Math.imul(X,bn)|0,M=M+Math.imul(se,At)|0,P=P+Math.imul(se,bn)|0;var xr=(G+q|0)+((M&8191)<<13)|0;G=(P+(M>>>13)|0)+(xr>>>26)|0,xr&=67108863,q=Math.imul(Z,de),M=Math.imul(Z,ye),M=M+Math.imul(ue,de)|0,P=Math.imul(ue,ye),q=q+Math.imul(dt,Ze)|0,M=M+Math.imul(dt,lt)|0,M=M+Math.imul(ie,Ze)|0,P=P+Math.imul(ie,lt)|0,q=q+Math.imul(Re,vt)|0,M=M+Math.imul(Re,jt)|0,M=M+Math.imul(He,vt)|0,P=P+Math.imul(He,jt)|0,q=q+Math.imul(Me,tn)|0,M=M+Math.imul(Me,on)|0,M=M+Math.imul(pt,tn)|0,P=P+Math.imul(pt,on)|0,q=q+Math.imul(rt,Vn)|0,M=M+Math.imul(rt,ae)|0,M=M+Math.imul(Xe,Vn)|0,P=P+Math.imul(Xe,ae)|0,q=q+Math.imul(We,ee)|0,M=M+Math.imul(We,fe)|0,M=M+Math.imul(Qe,ee)|0,P=P+Math.imul(Qe,fe)|0,q=q+Math.imul(he,Oe)|0,M=M+Math.imul(he,Ve)|0,M=M+Math.imul(Te,Oe)|0,P=P+Math.imul(Te,Ve)|0,q=q+Math.imul(Ne,Ht)|0,M=M+Math.imul(Ne,ot)|0,M=M+Math.imul(pe,Ht)|0,P=P+Math.imul(pe,ot)|0,q=q+Math.imul(me,At)|0,M=M+Math.imul(me,bn)|0,M=M+Math.imul(ce,At)|0,P=P+Math.imul(ce,bn)|0,q=q+Math.imul(X,ur)|0,M=M+Math.imul(X,yr)|0,M=M+Math.imul(se,ur)|0,P=P+Math.imul(se,yr)|0;var Zc=(G+q|0)+((M&8191)<<13)|0;G=(P+(M>>>13)|0)+(Zc>>>26)|0,Zc&=67108863,q=Math.imul(Z,Ze),M=Math.imul(Z,lt),M=M+Math.imul(ue,Ze)|0,P=Math.imul(ue,lt),q=q+Math.imul(dt,vt)|0,M=M+Math.imul(dt,jt)|0,M=M+Math.imul(ie,vt)|0,P=P+Math.imul(ie,jt)|0,q=q+Math.imul(Re,tn)|0,M=M+Math.imul(Re,on)|0,M=M+Math.imul(He,tn)|0,P=P+Math.imul(He,on)|0,q=q+Math.imul(Me,Vn)|0,M=M+Math.imul(Me,ae)|0,M=M+Math.imul(pt,Vn)|0,P=P+Math.imul(pt,ae)|0,q=q+Math.imul(rt,ee)|0,M=M+Math.imul(rt,fe)|0,M=M+Math.imul(Xe,ee)|0,P=P+Math.imul(Xe,fe)|0,q=q+Math.imul(We,Oe)|0,M=M+Math.imul(We,Ve)|0,M=M+Math.imul(Qe,Oe)|0,P=P+Math.imul(Qe,Ve)|0,q=q+Math.imul(he,Ht)|0,M=M+Math.imul(he,ot)|0,M=M+Math.imul(Te,Ht)|0,P=P+Math.imul(Te,ot)|0,q=q+Math.imul(Ne,At)|0,M=M+Math.imul(Ne,bn)|0,M=M+Math.imul(pe,At)|0,P=P+Math.imul(pe,bn)|0,q=q+Math.imul(me,ur)|0,M=M+Math.imul(me,yr)|0,M=M+Math.imul(ce,ur)|0,P=P+Math.imul(ce,yr)|0;var Ar=(G+q|0)+((M&8191)<<13)|0;G=(P+(M>>>13)|0)+(Ar>>>26)|0,Ar&=67108863,q=Math.imul(Z,vt),M=Math.imul(Z,jt),M=M+Math.imul(ue,vt)|0,P=Math.imul(ue,jt),q=q+Math.imul(dt,tn)|0,M=M+Math.imul(dt,on)|0,M=M+Math.imul(ie,tn)|0,P=P+Math.imul(ie,on)|0,q=q+Math.imul(Re,Vn)|0,M=M+Math.imul(Re,ae)|0,M=M+Math.imul(He,Vn)|0,P=P+Math.imul(He,ae)|0,q=q+Math.imul(Me,ee)|0,M=M+Math.imul(Me,fe)|0,M=M+Math.imul(pt,ee)|0,P=P+Math.imul(pt,fe)|0,q=q+Math.imul(rt,Oe)|0,M=M+Math.imul(rt,Ve)|0,M=M+Math.imul(Xe,Oe)|0,P=P+Math.imul(Xe,Ve)|0,q=q+Math.imul(We,Ht)|0,M=M+Math.imul(We,ot)|0,M=M+Math.imul(Qe,Ht)|0,P=P+Math.imul(Qe,ot)|0,q=q+Math.imul(he,At)|0,M=M+Math.imul(he,bn)|0,M=M+Math.imul(Te,At)|0,P=P+Math.imul(Te,bn)|0,q=q+Math.imul(Ne,ur)|0,M=M+Math.imul(Ne,yr)|0,M=M+Math.imul(pe,ur)|0,P=P+Math.imul(pe,yr)|0;var Fr=(G+q|0)+((M&8191)<<13)|0;G=(P+(M>>>13)|0)+(Fr>>>26)|0,Fr&=67108863,q=Math.imul(Z,tn),M=Math.imul(Z,on),M=M+Math.imul(ue,tn)|0,P=Math.imul(ue,on),q=q+Math.imul(dt,Vn)|0,M=M+Math.imul(dt,ae)|0,M=M+Math.imul(ie,Vn)|0,P=P+Math.imul(ie,ae)|0,q=q+Math.imul(Re,ee)|0,M=M+Math.imul(Re,fe)|0,M=M+Math.imul(He,ee)|0,P=P+Math.imul(He,fe)|0,q=q+Math.imul(Me,Oe)|0,M=M+Math.imul(Me,Ve)|0,M=M+Math.imul(pt,Oe)|0,P=P+Math.imul(pt,Ve)|0,q=q+Math.imul(rt,Ht)|0,M=M+Math.imul(rt,ot)|0,M=M+Math.imul(Xe,Ht)|0,P=P+Math.imul(Xe,ot)|0,q=q+Math.imul(We,At)|0,M=M+Math.imul(We,bn)|0,M=M+Math.imul(Qe,At)|0,P=P+Math.imul(Qe,bn)|0,q=q+Math.imul(he,ur)|0,M=M+Math.imul(he,yr)|0,M=M+Math.imul(Te,ur)|0,P=P+Math.imul(Te,yr)|0;var vi=(G+q|0)+((M&8191)<<13)|0;G=(P+(M>>>13)|0)+(vi>>>26)|0,vi&=67108863,q=Math.imul(Z,Vn),M=Math.imul(Z,ae),M=M+Math.imul(ue,Vn)|0,P=Math.imul(ue,ae),q=q+Math.imul(dt,ee)|0,M=M+Math.imul(dt,fe)|0,M=M+Math.imul(ie,ee)|0,P=P+Math.imul(ie,fe)|0,q=q+Math.imul(Re,Oe)|0,M=M+Math.imul(Re,Ve)|0,M=M+Math.imul(He,Oe)|0,P=P+Math.imul(He,Ve)|0,q=q+Math.imul(Me,Ht)|0,M=M+Math.imul(Me,ot)|0,M=M+Math.imul(pt,Ht)|0,P=P+Math.imul(pt,ot)|0,q=q+Math.imul(rt,At)|0,M=M+Math.imul(rt,bn)|0,M=M+Math.imul(Xe,At)|0,P=P+Math.imul(Xe,bn)|0,q=q+Math.imul(We,ur)|0,M=M+Math.imul(We,yr)|0,M=M+Math.imul(Qe,ur)|0,P=P+Math.imul(Qe,yr)|0;var Oh=(G+q|0)+((M&8191)<<13)|0;G=(P+(M>>>13)|0)+(Oh>>>26)|0,Oh&=67108863,q=Math.imul(Z,ee),M=Math.imul(Z,fe),M=M+Math.imul(ue,ee)|0,P=Math.imul(ue,fe),q=q+Math.imul(dt,Oe)|0,M=M+Math.imul(dt,Ve)|0,M=M+Math.imul(ie,Oe)|0,P=P+Math.imul(ie,Ve)|0,q=q+Math.imul(Re,Ht)|0,M=M+Math.imul(Re,ot)|0,M=M+Math.imul(He,Ht)|0,P=P+Math.imul(He,ot)|0,q=q+Math.imul(Me,At)|0,M=M+Math.imul(Me,bn)|0,M=M+Math.imul(pt,At)|0,P=P+Math.imul(pt,bn)|0,q=q+Math.imul(rt,ur)|0,M=M+Math.imul(rt,yr)|0,M=M+Math.imul(Xe,ur)|0,P=P+Math.imul(Xe,yr)|0;var o0=(G+q|0)+((M&8191)<<13)|0;G=(P+(M>>>13)|0)+(o0>>>26)|0,o0&=67108863,q=Math.imul(Z,Oe),M=Math.imul(Z,Ve),M=M+Math.imul(ue,Oe)|0,P=Math.imul(ue,Ve),q=q+Math.imul(dt,Ht)|0,M=M+Math.imul(dt,ot)|0,M=M+Math.imul(ie,Ht)|0,P=P+Math.imul(ie,ot)|0,q=q+Math.imul(Re,At)|0,M=M+Math.imul(Re,bn)|0,M=M+Math.imul(He,At)|0,P=P+Math.imul(He,bn)|0,q=q+Math.imul(Me,ur)|0,M=M+Math.imul(Me,yr)|0,M=M+Math.imul(pt,ur)|0,P=P+Math.imul(pt,yr)|0;var a0=(G+q|0)+((M&8191)<<13)|0;G=(P+(M>>>13)|0)+(a0>>>26)|0,a0&=67108863,q=Math.imul(Z,Ht),M=Math.imul(Z,ot),M=M+Math.imul(ue,Ht)|0,P=Math.imul(ue,ot),q=q+Math.imul(dt,At)|0,M=M+Math.imul(dt,bn)|0,M=M+Math.imul(ie,At)|0,P=P+Math.imul(ie,bn)|0,q=q+Math.imul(Re,ur)|0,M=M+Math.imul(Re,yr)|0,M=M+Math.imul(He,ur)|0,P=P+Math.imul(He,yr)|0;var kv=(G+q|0)+((M&8191)<<13)|0;G=(P+(M>>>13)|0)+(kv>>>26)|0,kv&=67108863,q=Math.imul(Z,At),M=Math.imul(Z,bn),M=M+Math.imul(ue,At)|0,P=Math.imul(ue,bn),q=q+Math.imul(dt,ur)|0,M=M+Math.imul(dt,yr)|0,M=M+Math.imul(ie,ur)|0,P=P+Math.imul(ie,yr)|0;var Ud=(G+q|0)+((M&8191)<<13)|0;G=(P+(M>>>13)|0)+(Ud>>>26)|0,Ud&=67108863,q=Math.imul(Z,ur),M=Math.imul(Z,yr),M=M+Math.imul(ue,ur)|0,P=Math.imul(ue,yr);var Fd=(G+q|0)+((M&8191)<<13)|0;return G=(P+(M>>>13)|0)+(Fd>>>26)|0,Fd&=67108863,te[0]=Qc,te[1]=Ql,te[2]=ca,te[3]=Zl,te[4]=_o,te[5]=Io,te[6]=ua,te[7]=Ro,te[8]=xr,te[9]=Zc,te[10]=Ar,te[11]=Fr,te[12]=vi,te[13]=Oh,te[14]=o0,te[15]=a0,te[16]=kv,te[17]=Ud,te[18]=Fd,G!==0&&(te[19]=G,L.length++),L};Math.imul||(k=w);function N(F,T,_){_.negative=T.negative^F.negative,_.length=F.length+T.length;for(var L=0,V=0,K=0;K<_.length-1;K++){var te=V;V=0;for(var G=L&67108863,q=Math.min(K,T.length-1),M=Math.max(0,K-F.length+1);M<=q;M++){var P=K-M,Y=F.words[P]|0,X=T.words[M]|0,se=Y*X,oe=se&67108863;te=te+(se/67108864|0)|0,oe=oe+G|0,G=oe&67108863,te=te+(oe>>>26)|0,V+=te>>>26,te&=67108863}_.words[K]=G,L=te,te=V}return L!==0?_.words[K]=L:_.length--,_._strip()}function R(F,T,_){return N(F,T,_)}s.prototype.mulTo=function(T,_){var L,V=this.length+T.length;return this.length===10&&T.length===10?L=k(this,T,_):V<63?L=w(this,T,_):V<1024?L=N(this,T,_):L=R(this,T,_),L},s.prototype.mul=function(T){var _=new s(null);return _.words=new Array(this.length+T.length),this.mulTo(T,_)},s.prototype.mulf=function(T){var _=new s(null);return _.words=new Array(this.length+T.length),R(this,T,_)},s.prototype.imul=function(T){return this.clone().mulTo(T,this)},s.prototype.imuln=function(T){var _=T<0;_&&(T=-T),r(typeof T=="number"),r(T<67108864);for(var L=0,V=0;V<this.length;V++){var K=(this.words[V]|0)*T,te=(K&67108863)+(L&67108863);L>>=26,L+=K/67108864|0,L+=te>>>26,this.words[V]=te&67108863}return L!==0&&(this.words[V]=L,this.length++),this.length=T===0?1:this.length,_?this.ineg():this},s.prototype.muln=function(T){return this.clone().imuln(T)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(T){var _=b(T);if(_.length===0)return new s(1);for(var L=this,V=0;V<_.length&&_[V]===0;V++,L=L.sqr());if(++V<_.length)for(var K=L.sqr();V<_.length;V++,K=K.sqr())_[V]!==0&&(L=L.mul(K));return L},s.prototype.iushln=function(T){r(typeof T=="number"&&T>=0);var _=T%26,L=(T-_)/26,V=67108863>>>26-_<<26-_,K;if(_!==0){var te=0;for(K=0;K<this.length;K++){var G=this.words[K]&V,q=(this.words[K]|0)-G<<_;this.words[K]=q|te,te=G>>>26-_}te&&(this.words[K]=te,this.length++)}if(L!==0){for(K=this.length-1;K>=0;K--)this.words[K+L]=this.words[K];for(K=0;K<L;K++)this.words[K]=0;this.length+=L}return this._strip()},s.prototype.ishln=function(T){return r(this.negative===0),this.iushln(T)},s.prototype.iushrn=function(T,_,L){r(typeof T=="number"&&T>=0);var V;_?V=(_-_%26)/26:V=0;var K=T%26,te=Math.min((T-K)/26,this.length),G=67108863^67108863>>>K<<K,q=L;if(V-=te,V=Math.max(0,V),q){for(var M=0;M<te;M++)q.words[M]=this.words[M];q.length=te}if(te!==0)if(this.length>te)for(this.length-=te,M=0;M<this.length;M++)this.words[M]=this.words[M+te];else this.words[0]=0,this.length=1;var P=0;for(M=this.length-1;M>=0&&(P!==0||M>=V);M--){var Y=this.words[M]|0;this.words[M]=P<<26-K|Y>>>K,P=Y&G}return q&&P!==0&&(q.words[q.length++]=P),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(T,_,L){return r(this.negative===0),this.iushrn(T,_,L)},s.prototype.shln=function(T){return this.clone().ishln(T)},s.prototype.ushln=function(T){return this.clone().iushln(T)},s.prototype.shrn=function(T){return this.clone().ishrn(T)},s.prototype.ushrn=function(T){return this.clone().iushrn(T)},s.prototype.testn=function(T){r(typeof T=="number"&&T>=0);var _=T%26,L=(T-_)/26,V=1<<_;if(this.length<=L)return!1;var K=this.words[L];return!!(K&V)},s.prototype.imaskn=function(T){r(typeof T=="number"&&T>=0);var _=T%26,L=(T-_)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=L)return this;if(_!==0&&L++,this.length=Math.min(L,this.length),_!==0){var V=67108863^67108863>>>_<<_;this.words[this.length-1]&=V}return this._strip()},s.prototype.maskn=function(T){return this.clone().imaskn(T)},s.prototype.iaddn=function(T){return r(typeof T=="number"),r(T<67108864),T<0?this.isubn(-T):this.negative!==0?this.length===1&&(this.words[0]|0)<=T?(this.words[0]=T-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(T),this.negative=1,this):this._iaddn(T)},s.prototype._iaddn=function(T){this.words[0]+=T;for(var _=0;_<this.length&&this.words[_]>=67108864;_++)this.words[_]-=67108864,_===this.length-1?this.words[_+1]=1:this.words[_+1]++;return this.length=Math.max(this.length,_+1),this},s.prototype.isubn=function(T){if(r(typeof T=="number"),r(T<67108864),T<0)return this.iaddn(-T);if(this.negative!==0)return this.negative=0,this.iaddn(T),this.negative=1,this;if(this.words[0]-=T,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var _=0;_<this.length&&this.words[_]<0;_++)this.words[_]+=67108864,this.words[_+1]-=1;return this._strip()},s.prototype.addn=function(T){return this.clone().iaddn(T)},s.prototype.subn=function(T){return this.clone().isubn(T)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(T,_,L){var V=T.length+L,K;this._expand(V);var te,G=0;for(K=0;K<T.length;K++){te=(this.words[K+L]|0)+G;var q=(T.words[K]|0)*_;te-=q&67108863,G=(te>>26)-(q/67108864|0),this.words[K+L]=te&67108863}for(;K<this.length-L;K++)te=(this.words[K+L]|0)+G,G=te>>26,this.words[K+L]=te&67108863;if(G===0)return this._strip();for(r(G===-1),G=0,K=0;K<this.length;K++)te=-(this.words[K]|0)+G,G=te>>26,this.words[K]=te&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(T,_){var L=this.length-T.length,V=this.clone(),K=T,te=K.words[K.length-1]|0,G=this._countBits(te);L=26-G,L!==0&&(K=K.ushln(L),V.iushln(L),te=K.words[K.length-1]|0);var q=V.length-K.length,M;if(_!=="mod"){M=new s(null),M.length=q+1,M.words=new Array(M.length);for(var P=0;P<M.length;P++)M.words[P]=0}var Y=V.clone()._ishlnsubmul(K,1,q);Y.negative===0&&(V=Y,M&&(M.words[q]=1));for(var X=q-1;X>=0;X--){var se=(V.words[K.length+X]|0)*67108864+(V.words[K.length+X-1]|0);for(se=Math.min(se/te|0,67108863),V._ishlnsubmul(K,se,X);V.negative!==0;)se--,V.negative=0,V._ishlnsubmul(K,1,X),V.isZero()||(V.negative^=1);M&&(M.words[X]=se)}return M&&M._strip(),V._strip(),_!=="div"&&L!==0&&V.iushrn(L),{div:M||null,mod:V}},s.prototype.divmod=function(T,_,L){if(r(!T.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var V,K,te;return this.negative!==0&&T.negative===0?(te=this.neg().divmod(T,_),_!=="mod"&&(V=te.div.neg()),_!=="div"&&(K=te.mod.neg(),L&&K.negative!==0&&K.iadd(T)),{div:V,mod:K}):this.negative===0&&T.negative!==0?(te=this.divmod(T.neg(),_),_!=="mod"&&(V=te.div.neg()),{div:V,mod:te.mod}):(this.negative&T.negative)!==0?(te=this.neg().divmod(T.neg(),_),_!=="div"&&(K=te.mod.neg(),L&&K.negative!==0&&K.isub(T)),{div:te.div,mod:K}):T.length>this.length||this.cmp(T)<0?{div:new s(0),mod:this}:T.length===1?_==="div"?{div:this.divn(T.words[0]),mod:null}:_==="mod"?{div:null,mod:new s(this.modrn(T.words[0]))}:{div:this.divn(T.words[0]),mod:new s(this.modrn(T.words[0]))}:this._wordDiv(T,_)},s.prototype.div=function(T){return this.divmod(T,"div",!1).div},s.prototype.mod=function(T){return this.divmod(T,"mod",!1).mod},s.prototype.umod=function(T){return this.divmod(T,"mod",!0).mod},s.prototype.divRound=function(T){var _=this.divmod(T);if(_.mod.isZero())return _.div;var L=_.div.negative!==0?_.mod.isub(T):_.mod,V=T.ushrn(1),K=T.andln(1),te=L.cmp(V);return te<0||K===1&&te===0?_.div:_.div.negative!==0?_.div.isubn(1):_.div.iaddn(1)},s.prototype.modrn=function(T){var _=T<0;_&&(T=-T),r(T<=67108863);for(var L=(1<<26)%T,V=0,K=this.length-1;K>=0;K--)V=(L*V+(this.words[K]|0))%T;return _?-V:V},s.prototype.modn=function(T){return this.modrn(T)},s.prototype.idivn=function(T){var _=T<0;_&&(T=-T),r(T<=67108863);for(var L=0,V=this.length-1;V>=0;V--){var K=(this.words[V]|0)+L*67108864;this.words[V]=K/T|0,L=K%T}return this._strip(),_?this.ineg():this},s.prototype.divn=function(T){return this.clone().idivn(T)},s.prototype.egcd=function(T){r(T.negative===0),r(!T.isZero());var _=this,L=T.clone();_.negative!==0?_=_.umod(T):_=_.clone();for(var V=new s(1),K=new s(0),te=new s(0),G=new s(1),q=0;_.isEven()&&L.isEven();)_.iushrn(1),L.iushrn(1),++q;for(var M=L.clone(),P=_.clone();!_.isZero();){for(var Y=0,X=1;(_.words[0]&X)===0&&Y<26;++Y,X<<=1);if(Y>0)for(_.iushrn(Y);Y-- >0;)(V.isOdd()||K.isOdd())&&(V.iadd(M),K.isub(P)),V.iushrn(1),K.iushrn(1);for(var se=0,oe=1;(L.words[0]&oe)===0&&se<26;++se,oe<<=1);if(se>0)for(L.iushrn(se);se-- >0;)(te.isOdd()||G.isOdd())&&(te.iadd(M),G.isub(P)),te.iushrn(1),G.iushrn(1);_.cmp(L)>=0?(_.isub(L),V.isub(te),K.isub(G)):(L.isub(_),te.isub(V),G.isub(K))}return{a:te,b:G,gcd:L.iushln(q)}},s.prototype._invmp=function(T){r(T.negative===0),r(!T.isZero());var _=this,L=T.clone();_.negative!==0?_=_.umod(T):_=_.clone();for(var V=new s(1),K=new s(0),te=L.clone();_.cmpn(1)>0&&L.cmpn(1)>0;){for(var G=0,q=1;(_.words[0]&q)===0&&G<26;++G,q<<=1);if(G>0)for(_.iushrn(G);G-- >0;)V.isOdd()&&V.iadd(te),V.iushrn(1);for(var M=0,P=1;(L.words[0]&P)===0&&M<26;++M,P<<=1);if(M>0)for(L.iushrn(M);M-- >0;)K.isOdd()&&K.iadd(te),K.iushrn(1);_.cmp(L)>=0?(_.isub(L),V.isub(K)):(L.isub(_),K.isub(V))}var Y;return _.cmpn(1)===0?Y=V:Y=K,Y.cmpn(0)<0&&Y.iadd(T),Y},s.prototype.gcd=function(T){if(this.isZero())return T.abs();if(T.isZero())return this.abs();var _=this.clone(),L=T.clone();_.negative=0,L.negative=0;for(var V=0;_.isEven()&&L.isEven();V++)_.iushrn(1),L.iushrn(1);do{for(;_.isEven();)_.iushrn(1);for(;L.isEven();)L.iushrn(1);var K=_.cmp(L);if(K<0){var te=_;_=L,L=te}else if(K===0||L.cmpn(1)===0)break;_.isub(L)}while(!0);return L.iushln(V)},s.prototype.invm=function(T){return this.egcd(T).a.umod(T)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(T){return this.words[0]&T},s.prototype.bincn=function(T){r(typeof T=="number");var _=T%26,L=(T-_)/26,V=1<<_;if(this.length<=L)return this._expand(L+1),this.words[L]|=V,this;for(var K=V,te=L;K!==0&&te<this.length;te++){var G=this.words[te]|0;G+=K,K=G>>>26,G&=67108863,this.words[te]=G}return K!==0&&(this.words[te]=K,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(T){var _=T<0;if(this.negative!==0&&!_)return-1;if(this.negative===0&&_)return 1;this._strip();var L;if(this.length>1)L=1;else{_&&(T=-T),r(T<=67108863,"Number is too big");var V=this.words[0]|0;L=V===T?0:V<T?-1:1}return this.negative!==0?-L|0:L},s.prototype.cmp=function(T){if(this.negative!==0&&T.negative===0)return-1;if(this.negative===0&&T.negative!==0)return 1;var _=this.ucmp(T);return this.negative!==0?-_|0:_},s.prototype.ucmp=function(T){if(this.length>T.length)return 1;if(this.length<T.length)return-1;for(var _=0,L=this.length-1;L>=0;L--){var V=this.words[L]|0,K=T.words[L]|0;if(V!==K){V<K?_=-1:V>K&&(_=1);break}}return _},s.prototype.gtn=function(T){return this.cmpn(T)===1},s.prototype.gt=function(T){return this.cmp(T)===1},s.prototype.gten=function(T){return this.cmpn(T)>=0},s.prototype.gte=function(T){return this.cmp(T)>=0},s.prototype.ltn=function(T){return this.cmpn(T)===-1},s.prototype.lt=function(T){return this.cmp(T)===-1},s.prototype.lten=function(T){return this.cmpn(T)<=0},s.prototype.lte=function(T){return this.cmp(T)<=0},s.prototype.eqn=function(T){return this.cmpn(T)===0},s.prototype.eq=function(T){return this.cmp(T)===0},s.red=function(T){return new W(T)},s.prototype.toRed=function(T){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),T.convertTo(this)._forceRed(T)},s.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(T){return this.red=T,this},s.prototype.forceRed=function(T){return r(!this.red,"Already a number in reduction context"),this._forceRed(T)},s.prototype.redAdd=function(T){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,T)},s.prototype.redIAdd=function(T){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,T)},s.prototype.redSub=function(T){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,T)},s.prototype.redISub=function(T){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,T)},s.prototype.redShl=function(T){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,T)},s.prototype.redMul=function(T){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,T),this.red.mul(this,T)},s.prototype.redIMul=function(T){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,T),this.red.imul(this,T)},s.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(T){return r(this.red&&!T.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,T)};var D={k256:null,p224:null,p192:null,p25519:null};function O(F,T){this.name=F,this.p=new s(T,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}O.prototype._tmp=function(){var T=new s(null);return T.words=new Array(Math.ceil(this.n/13)),T},O.prototype.ireduce=function(T){var _=T,L;do this.split(_,this.tmp),_=this.imulK(_),_=_.iadd(this.tmp),L=_.bitLength();while(L>this.n);var V=L<this.n?-1:_.ucmp(this.p);return V===0?(_.words[0]=0,_.length=1):V>0?_.isub(this.p):_.strip!==void 0?_.strip():_._strip(),_},O.prototype.split=function(T,_){T.iushrn(this.n,0,_)},O.prototype.imulK=function(T){return T.imul(this.k)};function B(){O.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(B,O),B.prototype.split=function(T,_){for(var L=4194303,V=Math.min(T.length,9),K=0;K<V;K++)_.words[K]=T.words[K];if(_.length=V,T.length<=9){T.words[0]=0,T.length=1;return}var te=T.words[9];for(_.words[_.length++]=te&L,K=10;K<T.length;K++){var G=T.words[K]|0;T.words[K-10]=(G&L)<<4|te>>>22,te=G}te>>>=22,T.words[K-10]=te,te===0&&T.length>10?T.length-=10:T.length-=9},B.prototype.imulK=function(T){T.words[T.length]=0,T.words[T.length+1]=0,T.length+=2;for(var _=0,L=0;L<T.length;L++){var V=T.words[L]|0;_+=V*977,T.words[L]=_&67108863,_=V*64+(_/67108864|0)}return T.words[T.length-1]===0&&(T.length--,T.words[T.length-1]===0&&T.length--),T};function z(){O.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(z,O);function U(){O.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(U,O);function $(){O.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i($,O),$.prototype.imulK=function(T){for(var _=0,L=0;L<T.length;L++){var V=(T.words[L]|0)*19+_,K=V&67108863;V>>>=26,T.words[L]=K,_=V}return _!==0&&(T.words[T.length++]=_),T},s._prime=function(T){if(D[T])return D[T];var _;if(T==="k256")_=new B;else if(T==="p224")_=new z;else if(T==="p192")_=new U;else if(T==="p25519")_=new $;else throw new Error("Unknown prime "+T);return D[T]=_,_};function W(F){if(typeof F=="string"){var T=s._prime(F);this.m=T.p,this.prime=T}else r(F.gtn(1),"modulus must be greater than 1"),this.m=F,this.prime=null}W.prototype._verify1=function(T){r(T.negative===0,"red works only with positives"),r(T.red,"red works only with red numbers")},W.prototype._verify2=function(T,_){r((T.negative|_.negative)===0,"red works only with positives"),r(T.red&&T.red===_.red,"red works only with red numbers")},W.prototype.imod=function(T){return this.prime?this.prime.ireduce(T)._forceRed(this):(u(T,T.umod(this.m)._forceRed(this)),T)},W.prototype.neg=function(T){return T.isZero()?T.clone():this.m.sub(T)._forceRed(this)},W.prototype.add=function(T,_){this._verify2(T,_);var L=T.add(_);return L.cmp(this.m)>=0&&L.isub(this.m),L._forceRed(this)},W.prototype.iadd=function(T,_){this._verify2(T,_);var L=T.iadd(_);return L.cmp(this.m)>=0&&L.isub(this.m),L},W.prototype.sub=function(T,_){this._verify2(T,_);var L=T.sub(_);return L.cmpn(0)<0&&L.iadd(this.m),L._forceRed(this)},W.prototype.isub=function(T,_){this._verify2(T,_);var L=T.isub(_);return L.cmpn(0)<0&&L.iadd(this.m),L},W.prototype.shl=function(T,_){return this._verify1(T),this.imod(T.ushln(_))},W.prototype.imul=function(T,_){return this._verify2(T,_),this.imod(T.imul(_))},W.prototype.mul=function(T,_){return this._verify2(T,_),this.imod(T.mul(_))},W.prototype.isqr=function(T){return this.imul(T,T.clone())},W.prototype.sqr=function(T){return this.mul(T,T)},W.prototype.sqrt=function(T){if(T.isZero())return T.clone();var _=this.m.andln(3);if(r(_%2===1),_===3){var L=this.m.add(new s(1)).iushrn(2);return this.pow(T,L)}for(var V=this.m.subn(1),K=0;!V.isZero()&&V.andln(1)===0;)K++,V.iushrn(1);r(!V.isZero());var te=new s(1).toRed(this),G=te.redNeg(),q=this.m.subn(1).iushrn(1),M=this.m.bitLength();for(M=new s(2*M*M).toRed(this);this.pow(M,q).cmp(G)!==0;)M.redIAdd(G);for(var P=this.pow(M,V),Y=this.pow(T,V.addn(1).iushrn(1)),X=this.pow(T,V),se=K;X.cmp(te)!==0;){for(var oe=X,me=0;oe.cmp(te)!==0;me++)oe=oe.redSqr();r(me<se);var ce=this.pow(P,new s(1).iushln(se-me-1));Y=Y.redMul(ce),P=ce.redSqr(),X=X.redMul(P),se=me}return Y},W.prototype.invm=function(T){var _=T._invmp(this.m);return _.negative!==0?(_.negative=0,this.imod(_).redNeg()):this.imod(_)},W.prototype.pow=function(T,_){if(_.isZero())return new s(1).toRed(this);if(_.cmpn(1)===0)return T.clone();var L=4,V=new Array(1<<L);V[0]=new s(1).toRed(this),V[1]=T;for(var K=2;K<V.length;K++)V[K]=this.mul(V[K-1],T);var te=V[0],G=0,q=0,M=_.bitLength()%26;for(M===0&&(M=26),K=_.length-1;K>=0;K--){for(var P=_.words[K],Y=M-1;Y>=0;Y--){var X=P>>Y&1;if(te!==V[0]&&(te=this.sqr(te)),X===0&&G===0){q=0;continue}G<<=1,G|=X,q++,!(q!==L&&(K!==0||Y!==0))&&(te=this.mul(te,V[G]),q=0,G=0)}M=26}return te},W.prototype.convertTo=function(T){var _=T.umod(this.m);return _===T?_.clone():_},W.prototype.convertFrom=function(T){var _=T.clone();return _.red=null,_},s.mont=function(T){return new H(T)};function H(F){W.call(this,F),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(H,W),H.prototype.convertTo=function(T){return this.imod(T.ushln(this.shift))},H.prototype.convertFrom=function(T){var _=this.imod(T.mul(this.rinv));return _.red=null,_},H.prototype.imul=function(T,_){if(T.isZero()||_.isZero())return T.words[0]=0,T.length=1,T;var L=T.imul(_),V=L.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),K=L.isub(V).iushrn(this.shift),te=K;return K.cmp(this.m)>=0?te=K.isub(this.m):K.cmpn(0)<0&&(te=K.iadd(this.m)),te._forceRed(this)},H.prototype.mul=function(T,_){if(T.isZero()||_.isZero())return new s(0)._forceRed(this);var L=T.mul(_),V=L.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),K=L.isub(V).iushrn(this.shift),te=K;return K.cmp(this.m)>=0?te=K.isub(this.m):K.cmpn(0)<0&&(te=K.iadd(this.m)),te._forceRed(this)},H.prototype.invm=function(T){var _=this.imod(T._invmp(this.m).mul(this.r2));return _._forceRed(this)}})(t,mdt)})(zT)),zT.exports}var gdt=Mme();const $Z=gs(gdt);var tT={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var zZ;function Lme(){return zZ||(zZ=1,(function(t,e){var n=h7(),r=n.Buffer;function i(o,a){for(var l in o)a[l]=o[l]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=n:(i(n,e),e.Buffer=s);function s(o,a,l){return r(o,a,l)}s.prototype=Object.create(r.prototype),i(r,s),s.from=function(o,a,l){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,a,l)},s.alloc=function(o,a,l){if(typeof o!="number")throw new TypeError("Argument must be a number");var c=r(o);return a!==void 0?typeof l=="string"?c.fill(a,l):c.fill(a):c.fill(0),c},s.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},s.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(o)}})(tT,tT.exports)),tT.exports}var P4,VZ;function ydt(){if(VZ)return P4;VZ=1;var t=Lme().Buffer;function e(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var s=0;s<n.length;s++){var o=n.charAt(s),a=o.charCodeAt(0);if(r[a]!==255)throw new TypeError(o+" is ambiguous");r[a]=s}var l=n.length,c=n.charAt(0),u=Math.log(l)/Math.log(256),h=Math.log(256)/Math.log(l);function m(v){if((Array.isArray(v)||v instanceof Uint8Array)&&(v=t.from(v)),!t.isBuffer(v))throw new TypeError("Expected Buffer");if(v.length===0)return"";for(var b=0,w=0,k=0,N=v.length;k!==N&&v[k]===0;)k++,b++;for(var R=(N-k)*h+1>>>0,D=new Uint8Array(R);k!==N;){for(var O=v[k],B=0,z=R-1;(O!==0||B<w)&&z!==-1;z--,B++)O+=256*D[z]>>>0,D[z]=O%l>>>0,O=O/l>>>0;if(O!==0)throw new Error("Non-zero carry");w=B,k++}for(var U=R-w;U!==R&&D[U]===0;)U++;for(var $=c.repeat(b);U<R;++U)$+=n.charAt(D[U]);return $}function g(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return t.alloc(0);for(var b=0,w=0,k=0;v[b]===c;)w++,b++;for(var N=(v.length-b)*u+1>>>0,R=new Uint8Array(N);b<v.length;){var D=v.charCodeAt(b);if(D>255)return;var O=r[D];if(O===255)return;for(var B=0,z=N-1;(O!==0||B<k)&&z!==-1;z--,B++)O+=l*R[z]>>>0,R[z]=O%256>>>0,O=O/256>>>0;if(O!==0)throw new Error("Non-zero carry");k=B,b++}for(var U=N-k;U!==N&&R[U]===0;)U++;var $=t.allocUnsafe(w+(N-U));$.fill(0,0,w);for(var W=w;U!==N;)$[W++]=R[U++];return $}function y(v){var b=g(v);if(b)return b;throw new Error("Non-base"+l+" character")}return{encode:m,decodeUnsafe:g,decode:y}}return P4=e,P4}var _4,HZ;function xdt(){if(HZ)return _4;HZ=1;var t=ydt(),e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return _4=t(e),_4}var vdt=xdt();const us=gs(vdt),qZ=hme;var Xn={},I4,GZ;function bdt(){if(GZ)return I4;GZ=1;var t=Lme().Buffer;function e(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var s=0;s<n.length;s++){var o=n.charAt(s),a=o.charCodeAt(0);if(r[a]!==255)throw new TypeError(o+" is ambiguous");r[a]=s}var l=n.length,c=n.charAt(0),u=Math.log(l)/Math.log(256),h=Math.log(256)/Math.log(l);function m(v){if((Array.isArray(v)||v instanceof Uint8Array)&&(v=t.from(v)),!t.isBuffer(v))throw new TypeError("Expected Buffer");if(v.length===0)return"";for(var b=0,w=0,k=0,N=v.length;k!==N&&v[k]===0;)k++,b++;for(var R=(N-k)*h+1>>>0,D=new Uint8Array(R);k!==N;){for(var O=v[k],B=0,z=R-1;(O!==0||B<w)&&z!==-1;z--,B++)O+=256*D[z]>>>0,D[z]=O%l>>>0,O=O/l>>>0;if(O!==0)throw new Error("Non-zero carry");w=B,k++}for(var U=R-w;U!==R&&D[U]===0;)U++;for(var $=c.repeat(b);U<R;++U)$+=n.charAt(D[U]);return $}function g(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return t.alloc(0);for(var b=0,w=0,k=0;v[b]===c;)w++,b++;for(var N=(v.length-b)*u+1>>>0,R=new Uint8Array(N);b<v.length;){var D=v.charCodeAt(b);if(D>255)return;var O=r[D];if(O===255)return;for(var B=0,z=N-1;(O!==0||B<k)&&z!==-1;z--,B++)O+=l*R[z]>>>0,R[z]=O%256>>>0,O=O/256>>>0;if(O!==0)throw new Error("Non-zero carry");k=B,b++}for(var U=N-k;U!==N&&R[U]===0;)U++;var $=t.allocUnsafe(w+(N-U));$.fill(0,0,w);for(var W=w;U!==N;)$[W++]=R[U++];return $}function y(v){var b=g(v);if(b)return b;throw new Error("Non-base"+l+" character")}return{encode:m,decodeUnsafe:g,decode:y}}return I4=e,I4}var R4,KZ;function wdt(){if(KZ)return R4;KZ=1;var t=bdt(),e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return R4=t(e),R4}function Gu(t,e,n){return e<=t&&t<=n}function oP(t){if(t===void 0)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}function Edt(t){for(var e=String(t),n=e.length,r=0,i=[];r<n;){var s=e.charCodeAt(r);if(s<55296||s>57343)i.push(s);else if(56320<=s&&s<=57343)i.push(65533);else if(55296<=s&&s<=56319)if(r===n-1)i.push(65533);else{var o=t.charCodeAt(r+1);if(56320<=o&&o<=57343){var a=s&1023,l=o&1023;i.push(65536+(a<<10)+l),r+=1}else i.push(65533)}r+=1}return i}function Sdt(t){for(var e="",n=0;n<t.length;++n){var r=t[n];r<=65535?e+=String.fromCharCode(r):(r-=65536,e+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return e}var G2=-1;function p7(t){this.tokens=[].slice.call(t)}p7.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():G2},prepend:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(t)},push:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.push(e.shift());else this.tokens.push(t)}};var jx=-1;function O4(t,e){if(t)throw TypeError("Decoder error");return e||65533}var K2="utf-8";function W2(t,e){if(!(this instanceof W2))return new W2(t,e);if(t=t!==void 0?String(t).toLowerCase():K2,t!==K2)throw new Error("Encoding not supported. Only utf-8 is supported");e=oP(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}W2.prototype={decode:function(e,n){var r;typeof e=="object"&&e instanceof ArrayBuffer?r=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):r=new Uint8Array(0),n=oP(n),this._streaming||(this._decoder=new Adt({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!n.stream;for(var i=new p7(r),s=[],o;!i.endOfStream()&&(o=this._decoder.handler(i,i.read()),o!==jx);)o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o));if(!this._streaming){do{if(o=this._decoder.handler(i,i.read()),o===jx)break;o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o))}while(!i.endOfStream());this._decoder=null}return s.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(s[0]===65279?(this._BOMseen=!0,s.shift()):this._BOMseen=!0),Sdt(s)}};function Y2(t,e){if(!(this instanceof Y2))return new Y2(t,e);if(t=t!==void 0?String(t).toLowerCase():K2,t!==K2)throw new Error("Encoding not supported. Only utf-8 is supported");e=oP(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}Y2.prototype={encode:function(e,n){e=e?String(e):"",n=oP(n),this._streaming||(this._encoder=new Tdt(this._options)),this._streaming=!!n.stream;for(var r=[],i=new p7(Edt(e)),s;!i.endOfStream()&&(s=this._encoder.handler(i,i.read()),s!==jx);)Array.isArray(s)?r.push.apply(r,s):r.push(s);if(!this._streaming){for(;s=this._encoder.handler(i,i.read()),s!==jx;)Array.isArray(s)?r.push.apply(r,s):r.push(s);this._encoder=null}return new Uint8Array(r)}};function Adt(t){var e=t.fatal,n=0,r=0,i=0,s=128,o=191;this.handler=function(a,l){if(l===G2&&i!==0)return i=0,O4(e);if(l===G2)return jx;if(i===0){if(Gu(l,0,127))return l;if(Gu(l,194,223))i=1,n=l-192;else if(Gu(l,224,239))l===224&&(s=160),l===237&&(o=159),i=2,n=l-224;else if(Gu(l,240,244))l===240&&(s=144),l===244&&(o=143),i=3,n=l-240;else return O4(e);return n=n<<6*i,null}if(!Gu(l,s,o))return n=i=r=0,s=128,o=191,a.prepend(l),O4(e);if(s=128,o=191,r+=1,n+=l-128<<6*(i-r),r!==i)return null;var c=n;return n=i=r=0,c}}function Tdt(t){t.fatal,this.handler=function(e,n){if(n===G2)return jx;if(Gu(n,0,127))return n;var r,i;Gu(n,128,2047)?(r=1,i=192):Gu(n,2048,65535)?(r=2,i=224):Gu(n,65536,1114111)&&(r=3,i=240);for(var s=[(n>>6*r)+i];r>0;){var o=n>>6*(r-1);s.push(128|o&63),r-=1}return s}}const kdt=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:W2,TextEncoder:Y2},Symbol.toStringTag,{value:"Module"})),Ndt=Uee(kdt);var WZ;function Cdt(){if(WZ)return Xn;WZ=1;var t=Xn&&Xn.__createBinding||(Object.create?(function(U,$,W,H){H===void 0&&(H=W),Object.defineProperty(U,H,{enumerable:!0,get:function(){return $[W]}})}):(function(U,$,W,H){H===void 0&&(H=W),U[H]=$[W]})),e=Xn&&Xn.__setModuleDefault||(Object.create?(function(U,$){Object.defineProperty(U,"default",{enumerable:!0,value:$})}):function(U,$){U.default=$}),n=Xn&&Xn.__decorate||function(U,$,W,H){var F=arguments.length,T=F<3?$:H===null?H=Object.getOwnPropertyDescriptor($,W):H,_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(U,$,W,H);else for(var L=U.length-1;L>=0;L--)(_=U[L])&&(T=(F<3?_(T):F>3?_($,W,T):_($,W))||T);return F>3&&T&&Object.defineProperty($,W,T),T},r=Xn&&Xn.__importStar||function(U){if(U&&U.__esModule)return U;var $={};if(U!=null)for(var W in U)W!=="default"&&Object.hasOwnProperty.call(U,W)&&t($,U,W);return e($,U),$},i=Xn&&Xn.__importDefault||function(U){return U&&U.__esModule?U:{default:U}};Object.defineProperty(Xn,"__esModule",{value:!0}),Xn.deserializeUnchecked=Xn.deserialize=Xn.serialize=Xn.BinaryReader=Xn.BinaryWriter=Xn.BorshError=Xn.baseDecode=Xn.baseEncode=void 0;const s=i(Mme()),o=i(wdt()),a=r(Ndt),l=typeof TextDecoder!="function"?a.TextDecoder:TextDecoder,c=new l("utf-8",{fatal:!0});function u(U){return typeof U=="string"&&(U=ln.from(U,"utf8")),o.default.encode(ln.from(U))}Xn.baseEncode=u;function h(U){return ln.from(o.default.decode(U))}Xn.baseDecode=h;const m=1024;class g extends Error{constructor($){super($),this.fieldPath=[],this.originalMessage=$}addToFieldPath($){this.fieldPath.splice(0,0,$),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}Xn.BorshError=g;class y{constructor(){this.buf=ln.alloc(m),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=ln.concat([this.buf,ln.alloc(m)]))}writeU8($){this.maybeResize(),this.buf.writeUInt8($,this.length),this.length+=1}writeU16($){this.maybeResize(),this.buf.writeUInt16LE($,this.length),this.length+=2}writeU32($){this.maybeResize(),this.buf.writeUInt32LE($,this.length),this.length+=4}writeU64($){this.maybeResize(),this.writeBuffer(ln.from(new s.default($).toArray("le",8)))}writeU128($){this.maybeResize(),this.writeBuffer(ln.from(new s.default($).toArray("le",16)))}writeU256($){this.maybeResize(),this.writeBuffer(ln.from(new s.default($).toArray("le",32)))}writeU512($){this.maybeResize(),this.writeBuffer(ln.from(new s.default($).toArray("le",64)))}writeBuffer($){this.buf=ln.concat([ln.from(this.buf.subarray(0,this.length)),$,ln.alloc(m)]),this.length+=$.length}writeString($){this.maybeResize();const W=ln.from($,"utf8");this.writeU32(W.length),this.writeBuffer(W)}writeFixedArray($){this.writeBuffer(ln.from($))}writeArray($,W){this.maybeResize(),this.writeU32($.length);for(const H of $)this.maybeResize(),W(H)}toArray(){return this.buf.subarray(0,this.length)}}Xn.BinaryWriter=y;function v(U,$,W){const H=W.value;W.value=function(...F){try{return H.apply(this,F)}catch(T){if(T instanceof RangeError){const _=T.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(_)>=0)throw new g("Reached the end of buffer when deserializing")}throw T}}}class b{constructor($){this.buf=$,this.offset=0}readU8(){const $=this.buf.readUInt8(this.offset);return this.offset+=1,$}readU16(){const $=this.buf.readUInt16LE(this.offset);return this.offset+=2,$}readU32(){const $=this.buf.readUInt32LE(this.offset);return this.offset+=4,$}readU64(){const $=this.readBuffer(8);return new s.default($,"le")}readU128(){const $=this.readBuffer(16);return new s.default($,"le")}readU256(){const $=this.readBuffer(32);return new s.default($,"le")}readU512(){const $=this.readBuffer(64);return new s.default($,"le")}readBuffer($){if(this.offset+$>this.buf.length)throw new g(`Expected buffer length ${$} isn't within bounds`);const W=this.buf.slice(this.offset,this.offset+$);return this.offset+=$,W}readString(){const $=this.readU32(),W=this.readBuffer($);try{return c.decode(W)}catch(H){throw new g(`Error decoding UTF-8 string: ${H}`)}}readFixedArray($){return new Uint8Array(this.readBuffer($))}readArray($){const W=this.readU32(),H=Array();for(let F=0;F<W;++F)H.push($());return H}}n([v],b.prototype,"readU8",null),n([v],b.prototype,"readU16",null),n([v],b.prototype,"readU32",null),n([v],b.prototype,"readU64",null),n([v],b.prototype,"readU128",null),n([v],b.prototype,"readU256",null),n([v],b.prototype,"readU512",null),n([v],b.prototype,"readString",null),n([v],b.prototype,"readFixedArray",null),n([v],b.prototype,"readArray",null),Xn.BinaryReader=b;function w(U){return U.charAt(0).toUpperCase()+U.slice(1)}function k(U,$,W,H,F){try{if(typeof H=="string")F[`write${w(H)}`](W);else if(H instanceof Array)if(typeof H[0]=="number"){if(W.length!==H[0])throw new g(`Expecting byte array of length ${H[0]}, but got ${W.length} bytes`);F.writeFixedArray(W)}else if(H.length===2&&typeof H[1]=="number"){if(W.length!==H[1])throw new g(`Expecting byte array of length ${H[1]}, but got ${W.length} bytes`);for(let T=0;T<H[1];T++)k(U,null,W[T],H[0],F)}else F.writeArray(W,T=>{k(U,$,T,H[0],F)});else if(H.kind!==void 0)switch(H.kind){case"option":{W==null?F.writeU8(0):(F.writeU8(1),k(U,$,W,H.type,F));break}case"map":{F.writeU32(W.size),W.forEach((T,_)=>{k(U,$,_,H.key,F),k(U,$,T,H.value,F)});break}default:throw new g(`FieldType ${H} unrecognized`)}else N(U,W,F)}catch(T){throw T instanceof g&&T.addToFieldPath($),T}}function N(U,$,W){if(typeof $.borshSerialize=="function"){$.borshSerialize(W);return}const H=U.get($.constructor);if(!H)throw new g(`Class ${$.constructor.name} is missing in schema`);if(H.kind==="struct")H.fields.map(([F,T])=>{k(U,F,$[F],T,W)});else if(H.kind==="enum"){const F=$[H.field];for(let T=0;T<H.values.length;++T){const[_,L]=H.values[T];if(_===F){W.writeU8(T),k(U,_,$[_],L,W);break}}}else throw new g(`Unexpected schema kind: ${H.kind} for ${$.constructor.name}`)}function R(U,$,W=y){const H=new W;return N(U,$,H),H.toArray()}Xn.serialize=R;function D(U,$,W,H){try{if(typeof W=="string")return H[`read${w(W)}`]();if(W instanceof Array){if(typeof W[0]=="number")return H.readFixedArray(W[0]);if(typeof W[1]=="number"){const F=[];for(let T=0;T<W[1];T++)F.push(D(U,null,W[0],H));return F}else return H.readArray(()=>D(U,$,W[0],H))}if(W.kind==="option")return H.readU8()?D(U,$,W.type,H):void 0;if(W.kind==="map"){let F=new Map;const T=H.readU32();for(let _=0;_<T;_++){const L=D(U,$,W.key,H),V=D(U,$,W.value,H);F.set(L,V)}return F}return O(U,W,H)}catch(F){throw F instanceof g&&F.addToFieldPath($),F}}function O(U,$,W){if(typeof $.borshDeserialize=="function")return $.borshDeserialize(W);const H=U.get($);if(!H)throw new g(`Class ${$.name} is missing in schema`);if(H.kind==="struct"){const F={};for(const[T,_]of U.get($).fields)F[T]=D(U,T,_,W);return new $(F)}if(H.kind==="enum"){const F=W.readU8();if(F>=H.values.length)throw new g(`Enum index: ${F} is out of range`);const[T,_]=H.values[F],L=D(U,T,_,W);return new $({[T]:L})}throw new g(`Unexpected schema kind: ${H.kind} for ${$.constructor.name}`)}function B(U,$,W,H=b){const F=new H(W),T=O(U,$,F);if(F.offset<W.length)throw new g(`Unexpected ${W.length-F.offset} bytes after deserialized data`);return T}Xn.deserialize=B;function z(U,$,W,H=b){const F=new H(W);return O(U,$,F)}return Xn.deserializeUnchecked=z,Xn}var M4=Cdt(),ze={},YZ;function Pdt(){if(YZ)return ze;YZ=1,Object.defineProperty(ze,"__esModule",{value:!0}),ze.s16=ze.s8=ze.nu64be=ze.u48be=ze.u40be=ze.u32be=ze.u24be=ze.u16be=ze.nu64=ze.u48=ze.u40=ze.u32=ze.u24=ze.u16=ze.u8=ze.offset=ze.greedy=ze.Constant=ze.UTF8=ze.CString=ze.Blob=ze.Boolean=ze.BitField=ze.BitStructure=ze.VariantLayout=ze.Union=ze.UnionLayoutDiscriminator=ze.UnionDiscriminator=ze.Structure=ze.Sequence=ze.DoubleBE=ze.Double=ze.FloatBE=ze.Float=ze.NearInt64BE=ze.NearInt64=ze.NearUInt64BE=ze.NearUInt64=ze.IntBE=ze.Int=ze.UIntBE=ze.UInt=ze.OffsetLayout=ze.GreedyCount=ze.ExternalLayout=ze.bindConstructorLayout=ze.nameWithProperty=ze.Layout=ze.uint8ArrayToBuffer=ze.checkUint8Array=void 0,ze.constant=ze.utf8=ze.cstr=ze.blob=ze.unionLayoutDiscriminator=ze.union=ze.seq=ze.bits=ze.struct=ze.f64be=ze.f64=ze.f32be=ze.f32=ze.ns64be=ze.s48be=ze.s40be=ze.s32be=ze.s24be=ze.s16be=ze.ns64=ze.s48=ze.s40=ze.s32=ze.s24=void 0;const t=h7();function e(M){if(!(M instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}ze.checkUint8Array=e;function n(M){return e(M),t.Buffer.from(M.buffer,M.byteOffset,M.length)}ze.uint8ArrayToBuffer=n;let r=class{constructor(P,Y){if(!Number.isInteger(P))throw new TypeError("span must be an integer");this.span=P,this.property=Y}makeDestinationObject(){return{}}getSpan(P,Y){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(P){const Y=Object.create(this.constructor.prototype);return Object.assign(Y,this),Y.property=P,Y}fromArray(P){}};ze.Layout=r;function i(M,P){return P.property?M+"["+P.property+"]":M}ze.nameWithProperty=i;function s(M,P){if(typeof M!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(M,"layout_"))throw new Error("Class is already bound to a layout");if(!(P&&P instanceof r))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(P,"boundConstructor_"))throw new Error("layout is already bound to a constructor");M.layout_=P,P.boundConstructor_=M,P.makeDestinationObject=(()=>new M),Object.defineProperty(M.prototype,"encode",{value(Y,X){return P.encode(this,Y,X)},writable:!0}),Object.defineProperty(M,"decode",{value(Y,X){return P.decode(Y,X)},writable:!0})}ze.bindConstructorLayout=s;class o extends r{isCount(){throw new Error("ExternalLayout is abstract")}}ze.ExternalLayout=o;class a extends o{constructor(P=1,Y){if(!Number.isInteger(P)||0>=P)throw new TypeError("elementSpan must be a (positive) integer");super(-1,Y),this.elementSpan=P}isCount(){return!0}decode(P,Y=0){e(P);const X=P.length-Y;return Math.floor(X/this.elementSpan)}encode(P,Y,X){return 0}}ze.GreedyCount=a;class l extends o{constructor(P,Y=0,X){if(!(P instanceof r))throw new TypeError("layout must be a Layout");if(!Number.isInteger(Y))throw new TypeError("offset must be integer or undefined");super(P.span,X||P.property),this.layout=P,this.offset=Y}isCount(){return this.layout instanceof c||this.layout instanceof u}decode(P,Y=0){return this.layout.decode(P,Y+this.offset)}encode(P,Y,X=0){return this.layout.encode(P,Y,X+this.offset)}}ze.OffsetLayout=l;class c extends r{constructor(P,Y){if(super(P,Y),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(P,Y=0){return n(P).readUIntLE(Y,this.span)}encode(P,Y,X=0){return n(Y).writeUIntLE(P,X,this.span),this.span}}ze.UInt=c;class u extends r{constructor(P,Y){if(super(P,Y),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(P,Y=0){return n(P).readUIntBE(Y,this.span)}encode(P,Y,X=0){return n(Y).writeUIntBE(P,X,this.span),this.span}}ze.UIntBE=u;class h extends r{constructor(P,Y){if(super(P,Y),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(P,Y=0){return n(P).readIntLE(Y,this.span)}encode(P,Y,X=0){return n(Y).writeIntLE(P,X,this.span),this.span}}ze.Int=h;class m extends r{constructor(P,Y){if(super(P,Y),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(P,Y=0){return n(P).readIntBE(Y,this.span)}encode(P,Y,X=0){return n(Y).writeIntBE(P,X,this.span),this.span}}ze.IntBE=m;const g=Math.pow(2,32);function y(M){const P=Math.floor(M/g),Y=M-P*g;return{hi32:P,lo32:Y}}function v(M,P){return M*g+P}class b extends r{constructor(P){super(8,P)}decode(P,Y=0){const X=n(P),se=X.readUInt32LE(Y),oe=X.readUInt32LE(Y+4);return v(oe,se)}encode(P,Y,X=0){const se=y(P),oe=n(Y);return oe.writeUInt32LE(se.lo32,X),oe.writeUInt32LE(se.hi32,X+4),8}}ze.NearUInt64=b;class w extends r{constructor(P){super(8,P)}decode(P,Y=0){const X=n(P),se=X.readUInt32BE(Y),oe=X.readUInt32BE(Y+4);return v(se,oe)}encode(P,Y,X=0){const se=y(P),oe=n(Y);return oe.writeUInt32BE(se.hi32,X),oe.writeUInt32BE(se.lo32,X+4),8}}ze.NearUInt64BE=w;class k extends r{constructor(P){super(8,P)}decode(P,Y=0){const X=n(P),se=X.readUInt32LE(Y),oe=X.readInt32LE(Y+4);return v(oe,se)}encode(P,Y,X=0){const se=y(P),oe=n(Y);return oe.writeUInt32LE(se.lo32,X),oe.writeInt32LE(se.hi32,X+4),8}}ze.NearInt64=k;class N extends r{constructor(P){super(8,P)}decode(P,Y=0){const X=n(P),se=X.readInt32BE(Y),oe=X.readUInt32BE(Y+4);return v(se,oe)}encode(P,Y,X=0){const se=y(P),oe=n(Y);return oe.writeInt32BE(se.hi32,X),oe.writeUInt32BE(se.lo32,X+4),8}}ze.NearInt64BE=N;class R extends r{constructor(P){super(4,P)}decode(P,Y=0){return n(P).readFloatLE(Y)}encode(P,Y,X=0){return n(Y).writeFloatLE(P,X),4}}ze.Float=R;class D extends r{constructor(P){super(4,P)}decode(P,Y=0){return n(P).readFloatBE(Y)}encode(P,Y,X=0){return n(Y).writeFloatBE(P,X),4}}ze.FloatBE=D;class O extends r{constructor(P){super(8,P)}decode(P,Y=0){return n(P).readDoubleLE(Y)}encode(P,Y,X=0){return n(Y).writeDoubleLE(P,X),8}}ze.Double=O;class B extends r{constructor(P){super(8,P)}decode(P,Y=0){return n(P).readDoubleBE(Y)}encode(P,Y,X=0){return n(Y).writeDoubleBE(P,X),8}}ze.DoubleBE=B;class z extends r{constructor(P,Y,X){if(!(P instanceof r))throw new TypeError("elementLayout must be a Layout");if(!(Y instanceof o&&Y.isCount()||Number.isInteger(Y)&&0<=Y))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let se=-1;!(Y instanceof o)&&0<P.span&&(se=Y*P.span),super(se,X),this.elementLayout=P,this.count=Y}getSpan(P,Y=0){if(0<=this.span)return this.span;let X=0,se=this.count;if(se instanceof o&&(se=se.decode(P,Y)),0<this.elementLayout.span)X=se*this.elementLayout.span;else{let oe=0;for(;oe<se;)X+=this.elementLayout.getSpan(P,Y+X),++oe}return X}decode(P,Y=0){const X=[];let se=0,oe=this.count;for(oe instanceof o&&(oe=oe.decode(P,Y));se<oe;)X.push(this.elementLayout.decode(P,Y)),Y+=this.elementLayout.getSpan(P,Y),se+=1;return X}encode(P,Y,X=0){const se=this.elementLayout,oe=P.reduce((me,ce)=>me+se.encode(ce,Y,X+me),0);return this.count instanceof o&&this.count.encode(P.length,Y,X),oe}}ze.Sequence=z;class U extends r{constructor(P,Y,X){if(!(Array.isArray(P)&&P.reduce((oe,me)=>oe&&me instanceof r,!0)))throw new TypeError("fields must be array of Layout instances");typeof Y=="boolean"&&X===void 0&&(X=Y,Y=void 0);for(const oe of P)if(0>oe.span&&oe.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let se=-1;try{se=P.reduce((oe,me)=>oe+me.getSpan(),0)}catch{}super(se,Y),this.fields=P,this.decodePrefixes=!!X}getSpan(P,Y=0){if(0<=this.span)return this.span;let X=0;try{X=this.fields.reduce((se,oe)=>{const me=oe.getSpan(P,Y);return Y+=me,se+me},0)}catch{throw new RangeError("indeterminate span")}return X}decode(P,Y=0){e(P);const X=this.makeDestinationObject();for(const se of this.fields)if(se.property!==void 0&&(X[se.property]=se.decode(P,Y)),Y+=se.getSpan(P,Y),this.decodePrefixes&&P.length===Y)break;return X}encode(P,Y,X=0){const se=X;let oe=0,me=0;for(const ce of this.fields){let ve=ce.span;if(me=0<ve?ve:0,ce.property!==void 0){const Ne=P[ce.property];Ne!==void 0&&(me=ce.encode(Ne,Y,X),0>ve&&(ve=ce.getSpan(Y,X)))}oe=X,X+=ve}return oe+me-se}fromArray(P){const Y=this.makeDestinationObject();for(const X of this.fields)X.property!==void 0&&0<P.length&&(Y[X.property]=P.shift());return Y}layoutFor(P){if(typeof P!="string")throw new TypeError("property must be string");for(const Y of this.fields)if(Y.property===P)return Y}offsetOf(P){if(typeof P!="string")throw new TypeError("property must be string");let Y=0;for(const X of this.fields){if(X.property===P)return Y;0>X.span?Y=-1:0<=Y&&(Y+=X.span)}}}ze.Structure=U;class ${constructor(P){this.property=P}decode(P,Y){throw new Error("UnionDiscriminator is abstract")}encode(P,Y,X){throw new Error("UnionDiscriminator is abstract")}}ze.UnionDiscriminator=$;class W extends ${constructor(P,Y){if(!(P instanceof o&&P.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(Y||P.property||"variant"),this.layout=P}decode(P,Y){return this.layout.decode(P,Y)}encode(P,Y,X){return this.layout.encode(P,Y,X)}}ze.UnionLayoutDiscriminator=W;class H extends r{constructor(P,Y,X){let se;if(P instanceof c||P instanceof u)se=new W(new l(P));else if(P instanceof o&&P.isCount())se=new W(P);else if(P instanceof $)se=P;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(Y===void 0&&(Y=null),!(Y===null||Y instanceof r))throw new TypeError("defaultLayout must be null or a Layout");if(Y!==null){if(0>Y.span)throw new Error("defaultLayout must have constant span");Y.property===void 0&&(Y=Y.replicate("content"))}let oe=-1;Y&&(oe=Y.span,0<=oe&&(P instanceof c||P instanceof u)&&(oe+=se.layout.span)),super(oe,X),this.discriminator=se,this.usesPrefixDiscriminator=P instanceof c||P instanceof u,this.defaultLayout=Y,this.registry={};let me=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(ce){return me(ce)},this.configGetSourceVariant=function(ce){me=ce.bind(this)}}getSpan(P,Y=0){if(0<=this.span)return this.span;const X=this.getVariant(P,Y);if(!X)throw new Error("unable to determine span for unrecognized variant");return X.getSpan(P,Y)}defaultGetSourceVariant(P){if(Object.prototype.hasOwnProperty.call(P,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(P,this.defaultLayout.property))return;const Y=this.registry[P[this.discriminator.property]];if(Y&&(!Y.layout||Y.property&&Object.prototype.hasOwnProperty.call(P,Y.property)))return Y}else for(const Y in this.registry){const X=this.registry[Y];if(X.property&&Object.prototype.hasOwnProperty.call(P,X.property))return X}throw new Error("unable to infer src variant")}decode(P,Y=0){let X;const se=this.discriminator,oe=se.decode(P,Y),me=this.registry[oe];if(me===void 0){const ce=this.defaultLayout;let ve=0;this.usesPrefixDiscriminator&&(ve=se.layout.span),X=this.makeDestinationObject(),X[se.property]=oe,X[ce.property]=ce.decode(P,Y+ve)}else X=me.decode(P,Y);return X}encode(P,Y,X=0){const se=this.getSourceVariant(P);if(se===void 0){const oe=this.discriminator,me=this.defaultLayout;let ce=0;return this.usesPrefixDiscriminator&&(ce=oe.layout.span),oe.encode(P[oe.property],Y,X),ce+me.encode(P[me.property],Y,X+ce)}return se.encode(P,Y,X)}addVariant(P,Y,X){const se=new F(this,P,Y,X);return this.registry[P]=se,se}getVariant(P,Y=0){let X;return P instanceof Uint8Array?X=this.discriminator.decode(P,Y):X=P,this.registry[X]}}ze.Union=H;class F extends r{constructor(P,Y,X,se){if(!(P instanceof H))throw new TypeError("union must be a Union");if(!Number.isInteger(Y)||0>Y)throw new TypeError("variant must be a (non-negative) integer");if(typeof X=="string"&&se===void 0&&(se=X,X=null),X){if(!(X instanceof r))throw new TypeError("layout must be a Layout");if(P.defaultLayout!==null&&0<=X.span&&X.span>P.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof se!="string")throw new TypeError("variant must have a String property")}let oe=P.span;0>P.span&&(oe=X?X.span:0,0<=oe&&P.usesPrefixDiscriminator&&(oe+=P.discriminator.layout.span)),super(oe,se),this.union=P,this.variant=Y,this.layout=X||null}getSpan(P,Y=0){if(0<=this.span)return this.span;let X=0;this.union.usesPrefixDiscriminator&&(X=this.union.discriminator.layout.span);let se=0;return this.layout&&(se=this.layout.getSpan(P,Y+X)),X+se}decode(P,Y=0){const X=this.makeDestinationObject();if(this!==this.union.getVariant(P,Y))throw new Error("variant mismatch");let se=0;return this.union.usesPrefixDiscriminator&&(se=this.union.discriminator.layout.span),this.layout?X[this.property]=this.layout.decode(P,Y+se):this.property?X[this.property]=!0:this.union.usesPrefixDiscriminator&&(X[this.union.discriminator.property]=this.variant),X}encode(P,Y,X=0){let se=0;if(this.union.usesPrefixDiscriminator&&(se=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(P,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,Y,X);let oe=se;if(this.layout&&(this.layout.encode(P[this.property],Y,X+se),oe+=this.layout.getSpan(Y,X+se),0<=this.union.span&&oe>this.union.span))throw new Error("encoded variant overruns containing union");return oe}fromArray(P){if(this.layout)return this.layout.fromArray(P)}}ze.VariantLayout=F;function T(M){return 0>M&&(M+=4294967296),M}class _ extends r{constructor(P,Y,X){if(!(P instanceof c||P instanceof u))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof Y=="string"&&X===void 0&&(X=Y,Y=!1),4<P.span)throw new RangeError("word cannot exceed 32 bits");super(P.span,X),this.word=P,this.msb=!!Y,this.fields=[];let se=0;this._packedSetValue=function(oe){return se=T(oe),this},this._packedGetValue=function(){return se}}decode(P,Y=0){const X=this.makeDestinationObject(),se=this.word.decode(P,Y);this._packedSetValue(se);for(const oe of this.fields)oe.property!==void 0&&(X[oe.property]=oe.decode(P));return X}encode(P,Y,X=0){const se=this.word.decode(Y,X);this._packedSetValue(se);for(const oe of this.fields)if(oe.property!==void 0){const me=P[oe.property];me!==void 0&&oe.encode(me)}return this.word.encode(this._packedGetValue(),Y,X)}addField(P,Y){const X=new L(this,P,Y);return this.fields.push(X),X}addBoolean(P){const Y=new V(this,P);return this.fields.push(Y),Y}fieldFor(P){if(typeof P!="string")throw new TypeError("property must be string");for(const Y of this.fields)if(Y.property===P)return Y}}ze.BitStructure=_;class L{constructor(P,Y,X){if(!(P instanceof _))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(Y)||0>=Y)throw new TypeError("bits must be positive integer");const se=8*P.span,oe=P.fields.reduce((me,ce)=>me+ce.bits,0);if(Y+oe>se)throw new Error("bits too long for span remainder ("+(se-oe)+" of "+se+" remain)");this.container=P,this.bits=Y,this.valueMask=(1<<Y)-1,Y===32&&(this.valueMask=4294967295),this.start=oe,this.container.msb&&(this.start=se-oe-Y),this.wordMask=T(this.valueMask<<this.start),this.property=X}decode(P,Y){const X=this.container._packedGetValue();return T(X&this.wordMask)>>>this.start}encode(P){if(typeof P!="number"||!Number.isInteger(P)||P!==T(P&this.valueMask))throw new TypeError(i("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const Y=this.container._packedGetValue(),X=T(P<<this.start);this.container._packedSetValue(T(Y&~this.wordMask)|X)}}ze.BitField=L;class V extends L{constructor(P,Y){super(P,1,Y)}decode(P,Y){return!!super.decode(P,Y)}encode(P){typeof P=="boolean"&&(P=+P),super.encode(P)}}ze.Boolean=V;class K extends r{constructor(P,Y){if(!(P instanceof o&&P.isCount()||Number.isInteger(P)&&0<=P))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let X=-1;P instanceof o||(X=P),super(X,Y),this.length=P}getSpan(P,Y){let X=this.span;return 0>X&&(X=this.length.decode(P,Y)),X}decode(P,Y=0){let X=this.span;return 0>X&&(X=this.length.decode(P,Y)),n(P).slice(Y,Y+X)}encode(P,Y,X){let se=this.length;if(this.length instanceof o&&(se=P.length),!(P instanceof Uint8Array&&se===P.length))throw new TypeError(i("Blob.encode",this)+" requires (length "+se+") Uint8Array as src");if(X+se>Y.length)throw new RangeError("encoding overruns Uint8Array");const oe=n(P);return n(Y).write(oe.toString("hex"),X,se,"hex"),this.length instanceof o&&this.length.encode(se,Y,X),se}}ze.Blob=K;class te extends r{constructor(P){super(-1,P)}getSpan(P,Y=0){e(P);let X=Y;for(;X<P.length&&P[X]!==0;)X+=1;return 1+X-Y}decode(P,Y=0){const X=this.getSpan(P,Y);return n(P).slice(Y,Y+X-1).toString("utf-8")}encode(P,Y,X=0){typeof P!="string"&&(P=String(P));const se=t.Buffer.from(P,"utf8"),oe=se.length;if(X+oe>Y.length)throw new RangeError("encoding overruns Buffer");const me=n(Y);return se.copy(me,X),me[X+oe]=0,oe+1}}ze.CString=te;class G extends r{constructor(P,Y){if(typeof P=="string"&&Y===void 0&&(Y=P,P=void 0),P===void 0)P=-1;else if(!Number.isInteger(P))throw new TypeError("maxSpan must be an integer");super(-1,Y),this.maxSpan=P}getSpan(P,Y=0){return e(P),P.length-Y}decode(P,Y=0){const X=this.getSpan(P,Y);if(0<=this.maxSpan&&this.maxSpan<X)throw new RangeError("text length exceeds maxSpan");return n(P).slice(Y,Y+X).toString("utf-8")}encode(P,Y,X=0){typeof P!="string"&&(P=String(P));const se=t.Buffer.from(P,"utf8"),oe=se.length;if(0<=this.maxSpan&&this.maxSpan<oe)throw new RangeError("text length exceeds maxSpan");if(X+oe>Y.length)throw new RangeError("encoding overruns Buffer");return se.copy(n(Y),X),oe}}ze.UTF8=G;class q extends r{constructor(P,Y){super(0,Y),this.value=P}decode(P,Y){return this.value}encode(P,Y,X){return 0}}return ze.Constant=q,ze.greedy=((M,P)=>new a(M,P)),ze.offset=((M,P,Y)=>new l(M,P,Y)),ze.u8=(M=>new c(1,M)),ze.u16=(M=>new c(2,M)),ze.u24=(M=>new c(3,M)),ze.u32=(M=>new c(4,M)),ze.u40=(M=>new c(5,M)),ze.u48=(M=>new c(6,M)),ze.nu64=(M=>new b(M)),ze.u16be=(M=>new u(2,M)),ze.u24be=(M=>new u(3,M)),ze.u32be=(M=>new u(4,M)),ze.u40be=(M=>new u(5,M)),ze.u48be=(M=>new u(6,M)),ze.nu64be=(M=>new w(M)),ze.s8=(M=>new h(1,M)),ze.s16=(M=>new h(2,M)),ze.s24=(M=>new h(3,M)),ze.s32=(M=>new h(4,M)),ze.s40=(M=>new h(5,M)),ze.s48=(M=>new h(6,M)),ze.ns64=(M=>new k(M)),ze.s16be=(M=>new m(2,M)),ze.s24be=(M=>new m(3,M)),ze.s32be=(M=>new m(4,M)),ze.s40be=(M=>new m(5,M)),ze.s48be=(M=>new m(6,M)),ze.ns64be=(M=>new N(M)),ze.f32=(M=>new R(M)),ze.f32be=(M=>new D(M)),ze.f64=(M=>new O(M)),ze.f64be=(M=>new B(M)),ze.struct=((M,P,Y)=>new U(M,P,Y)),ze.bits=((M,P,Y)=>new _(M,P,Y)),ze.seq=((M,P,Y)=>new z(M,P,Y)),ze.union=((M,P,Y)=>new H(M,P,Y)),ze.unionLayoutDiscriminator=((M,P)=>new W(M,P)),ze.blob=((M,P)=>new K(M,P)),ze.cstr=(M=>new te(M)),ze.utf8=((M,P)=>new G(M,P)),ze.constant=((M,P)=>new q(M,P)),ze}var Ee=Pdt(),_dt=8078e3,Idt=8078001,Rdt=8078004,Odt=8078005,Mdt=8078006,Ldt=8078011;function Dme(t){return Array.isArray(t)?"%5B"+t.map(Dme).join("%2C%20")+"%5D":typeof t=="bigint"?`${t}n`:encodeURIComponent(String(t!=null&&Object.getPrototypeOf(t)===null?{...t}:t))}function Ddt([t,e]){return`${t}=${Dme(e)}`}function jdt(t){const e=Object.entries(t).map(Ddt).join("&");return btoa(e)}function Bdt(t,e={}){{let n=`Solana error #${t}; Decode this error by running \`npx @solana/errors decode -- ${t}`;return Object.keys(e).length&&(n+=` '${jdt(e)}'`),`${n}\``}}var gy=class extends Error{constructor(...[e,n]){let r,i;if(n){const{cause:o,...a}=n;o&&(i={cause:o}),Object.keys(a).length>0&&(r=a)}const s=Bdt(e,r);super(s,i);Ce(this,"cause",this.cause);Ce(this,"context");this.context={__code:e,...r},this.name="SolanaError"}};function Udt(t,e){return"fixedSize"in e?e.fixedSize:e.getSizeFromValue(t)}function Fdt(t){return Object.freeze({...t,encode:e=>{const n=new Uint8Array(Udt(e,t));return t.write(e,n,0),n}})}function $dt(t){return Object.freeze({...t,decode:(e,n=0)=>t.read(e,n)[0]})}function mg(t){return"fixedSize"in t&&typeof t.fixedSize=="number"}function zdt(t,e){if(mg(t)!==mg(e))throw new gy(Rdt);if(mg(t)&&mg(e)&&t.fixedSize!==e.fixedSize)throw new gy(Odt,{decoderFixedSize:e.fixedSize,encoderFixedSize:t.fixedSize});if(!mg(t)&&!mg(e)&&t.maxSize!==e.maxSize)throw new gy(Mdt,{decoderMaxSize:e.maxSize,encoderMaxSize:t.maxSize});return{...e,...t,decode:e.decode,encode:t.encode,read:e.read,write:t.write}}function Vdt(t,e,n=0){if(e.length-n<=0)throw new gy(_dt,{codecDescription:t})}function Hdt(t,e,n,r=0){const i=n.length-r;if(i<e)throw new gy(Idt,{bytesLength:i,codecDescription:t,expected:e})}function qdt(t,e,n,r){if(r<e||r>n)throw new gy(Ldt,{codecDescription:t,max:n,min:e,value:r})}function jme(t){return(t==null?void 0:t.endian)!==1}function Gdt(t){return Fdt({fixedSize:t.size,write(e,n,r){t.range&&qdt(t.name,t.range[0],t.range[1],e);const i=new ArrayBuffer(t.size);return t.set(new DataView(i),e,jme(t.config)),n.set(new Uint8Array(i),r),r+t.size}})}function Kdt(t){return $dt({fixedSize:t.size,read(e,n=0){Vdt(t.name,e,n),Hdt(t.name,t.size,e,n);const r=new DataView(Wdt(e,n,t.size));return[t.get(r,jme(t.config)),n+t.size]}})}function Wdt(t,e,n){const r=t.byteOffset+(e??0),i=n??t.byteLength;return t.buffer.slice(r,r+i)}var Ydt=(t={})=>Gdt({config:t,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(e,n,r)=>e.setBigUint64(0,BigInt(n),r),size:8}),Jdt=(t={})=>Kdt({config:t,get:(e,n)=>e.getBigUint64(0,n),name:"u64",size:8}),Xdt=(t={})=>zdt(Ydt(t),Jdt(t));class Qdt extends TypeError{constructor(e,n){let r;const{message:i,explanation:s,...o}=e,{path:a}=e,l=a.length===0?i:`At path: ${a.join(".")} -- ${i}`;super(s??l),s!=null&&(this.cause=l),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...n()])}}function Zdt(t){return IE(t)&&typeof t[Symbol.iterator]=="function"}function IE(t){return typeof t=="object"&&t!=null}function J2(t){return IE(t)&&!Array.isArray(t)}function Kl(t){return typeof t=="symbol"?t.toString():typeof t=="string"?JSON.stringify(t):`${t}`}function eft(t){const{done:e,value:n}=t.next();return e?void 0:n}function tft(t,e,n,r){if(t===!0)return;t===!1?t={}:typeof t=="string"&&(t={message:t});const{path:i,branch:s}=e,{type:o}=n,{refinement:a,message:l=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${Kl(r)}\``}=t;return{value:r,type:o,refinement:a,key:i[i.length-1],path:i,branch:s,...t,message:l}}function*JZ(t,e,n,r){Zdt(t)||(t=[t]);for(const i of t){const s=tft(i,e,n,r);s&&(yield s)}}function*m7(t,e,n={}){const{path:r=[],branch:i=[t],coerce:s=!1,mask:o=!1}=n,a={path:r,branch:i,mask:o};s&&(t=e.coercer(t,a));let l="valid";for(const c of e.validator(t,a))c.explanation=n.message,l="not_valid",yield[c,void 0];for(let[c,u,h]of e.entries(t,a)){const m=m7(u,h,{path:c===void 0?r:[...r,c],branch:c===void 0?i:[...i,u],coerce:s,mask:o,message:n.message});for(const g of m)g[0]?(l=g[0].refinement!=null?"not_refined":"not_valid",yield[g[0],void 0]):s&&(u=g[1],c===void 0?t=u:t instanceof Map?t.set(c,u):t instanceof Set?t.add(u):IE(t)&&(u!==void 0||c in t)&&(t[c]=u))}if(l!=="not_valid")for(const c of e.refiner(t,a))c.explanation=n.message,l="not_refined",yield[c,void 0];l==="valid"&&(yield[void 0,t])}let Xc=class{constructor(e){const{type:n,schema:r,validator:i,refiner:s,coercer:o=l=>l,entries:a=function*(){}}=e;this.type=n,this.schema=r,this.entries=a,this.coercer=o,i?this.validator=(l,c)=>{const u=i(l,c);return JZ(u,c,this,l)}:this.validator=()=>[],s?this.refiner=(l,c)=>{const u=s(l,c);return JZ(u,c,this,l)}:this.refiner=()=>[]}assert(e,n){return nft(e,this,n)}create(e,n){return yt(e,this,n)}is(e){return Bme(e,this)}mask(e,n){return rft(e,this,n)}validate(e,n={}){return RE(e,this,n)}};function nft(t,e,n){const r=RE(t,e,{message:n});if(r[0])throw r[0]}function yt(t,e,n){const r=RE(t,e,{coerce:!0,message:n});if(r[0])throw r[0];return r[1]}function rft(t,e,n){const r=RE(t,e,{coerce:!0,mask:!0,message:n});if(r[0])throw r[0];return r[1]}function Bme(t,e){return!RE(t,e)[0]}function RE(t,e,n={}){const r=m7(t,e,n),i=eft(r);return i[0]?[new Qdt(i[0],function*(){for(const o of r)o[0]&&(yield o[0])}),void 0]:[void 0,i[1]]}function r0(t,e){return new Xc({type:t,schema:null,validator:e})}function ift(){return r0("any",()=>!0)}function wt(t){return new Xc({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(const[n,r]of e.entries())yield[n,r,t]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${Kl(e)}`}})}function qc(){return r0("boolean",t=>typeof t=="boolean")}function g7(t){return r0("instance",e=>e instanceof t||`Expected a \`${t.name}\` instance, but received: ${Kl(e)}`)}function Mr(t){const e=Kl(t),n=typeof t;return new Xc({type:"literal",schema:n==="string"||n==="number"||n==="boolean"?t:null,validator(r){return r===t||`Expected the literal \`${e}\`, but received: ${Kl(r)}`}})}function sft(){return r0("never",()=>!1)}function Et(t){return new Xc({...t,validator:(e,n)=>e===null||t.validator(e,n),refiner:(e,n)=>e===null||t.refiner(e,n)})}function De(){return r0("number",t=>typeof t=="number"&&!isNaN(t)||`Expected a number, but received: ${Kl(t)}`)}function qt(t){return new Xc({...t,validator:(e,n)=>e===void 0||t.validator(e,n),refiner:(e,n)=>e===void 0||t.refiner(e,n)})}function Ume(t,e){return new Xc({type:"record",schema:null,*entries(n){if(IE(n))for(const r in n){const i=n[r];yield[r,r,t],yield[r,i,e]}},validator(n){return J2(n)||`Expected an object, but received: ${Kl(n)}`},coercer(n){return J2(n)?{...n}:n}})}function ht(){return r0("string",t=>typeof t=="string"||`Expected a string, but received: ${Kl(t)}`)}function y7(t){const e=sft();return new Xc({type:"tuple",schema:null,*entries(n){if(Array.isArray(n)){const r=Math.max(t.length,n.length);for(let i=0;i<r;i++)yield[i,n[i],t[i]||e]}},validator(n){return Array.isArray(n)||`Expected an array, but received: ${Kl(n)}`},coercer(n){return Array.isArray(n)?n.slice():n}})}function it(t){const e=Object.keys(t);return new Xc({type:"type",schema:t,*entries(n){if(IE(n))for(const r of e)yield[r,n[r],t[r]]},validator(n){return J2(n)||`Expected an object, but received: ${Kl(n)}`},coercer(n){return J2(n)?{...n}:n}})}function oo(t){const e=t.map(n=>n.type).join(" | ");return new Xc({type:"union",schema:null,coercer(n,r){for(const i of t){const[s,o]=i.validate(n,{coerce:!0,mask:r.mask});if(!s)return o}return n},validator(n,r){const i=[];for(const s of t){const[...o]=m7(n,s,r),[a]=o;if(a[0])for(const[l]of o)l&&i.push(l);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${Kl(n)}`,...i]}})}function Sv(){return r0("unknown",()=>!0)}function OE(t,e,n){return new Xc({...t,coercer:(r,i)=>Bme(r,e)?t.coercer(n(r,i),i):t.coercer(r,i)})}var nT,oft=new Uint8Array(16);function Fme(){if(!nT&&(nT=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!nT))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return nT(oft)}const aft=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function aP(t){return typeof t=="string"&&aft.test(t)}var es=[];for(var L4=0;L4<256;++L4)es.push((L4+256).toString(16).substr(1));function lP(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(es[t[e+0]]+es[t[e+1]]+es[t[e+2]]+es[t[e+3]]+"-"+es[t[e+4]]+es[t[e+5]]+"-"+es[t[e+6]]+es[t[e+7]]+"-"+es[t[e+8]]+es[t[e+9]]+"-"+es[t[e+10]]+es[t[e+11]]+es[t[e+12]]+es[t[e+13]]+es[t[e+14]]+es[t[e+15]]).toLowerCase();if(!aP(n))throw TypeError("Stringified UUID is invalid");return n}var XZ,D4,j4=0,B4=0;function lft(t,e,n){var r=e&&n||0,i=e||new Array(16);t=t||{};var s=t.node||XZ,o=t.clockseq!==void 0?t.clockseq:D4;if(s==null||o==null){var a=t.random||(t.rng||Fme)();s==null&&(s=XZ=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),o==null&&(o=D4=(a[6]<<8|a[7])&16383)}var l=t.msecs!==void 0?t.msecs:Date.now(),c=t.nsecs!==void 0?t.nsecs:B4+1,u=l-j4+(c-B4)/1e4;if(u<0&&t.clockseq===void 0&&(o=o+1&16383),(u<0||l>j4)&&t.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");j4=l,B4=c,D4=o,l+=122192928e5;var h=((l&268435455)*1e4+c)%4294967296;i[r++]=h>>>24&255,i[r++]=h>>>16&255,i[r++]=h>>>8&255,i[r++]=h&255;var m=l/4294967296*1e4&268435455;i[r++]=m>>>8&255,i[r++]=m&255,i[r++]=m>>>24&15|16,i[r++]=m>>>16&255,i[r++]=o>>>8|128,i[r++]=o&255;for(var g=0;g<6;++g)i[r+g]=s[g];return e||lP(i)}function $me(t){if(!aP(t))throw TypeError("Invalid UUID");var e,n=new Uint8Array(16);return n[0]=(e=parseInt(t.slice(0,8),16))>>>24,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=e&255,n[4]=(e=parseInt(t.slice(9,13),16))>>>8,n[5]=e&255,n[6]=(e=parseInt(t.slice(14,18),16))>>>8,n[7]=e&255,n[8]=(e=parseInt(t.slice(19,23),16))>>>8,n[9]=e&255,n[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,n[11]=e/4294967296&255,n[12]=e>>>24&255,n[13]=e>>>16&255,n[14]=e>>>8&255,n[15]=e&255,n}function cft(t){t=unescape(encodeURIComponent(t));for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e}var uft="6ba7b810-9dad-11d1-80b4-00c04fd430c8",dft="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function zme(t,e,n){function r(i,s,o,a){if(typeof i=="string"&&(i=cft(i)),typeof s=="string"&&(s=$me(s)),s.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var l=new Uint8Array(16+i.length);if(l.set(s),l.set(i,s.length),l=n(l),l[6]=l[6]&15|e,l[8]=l[8]&63|128,o){a=a||0;for(var c=0;c<16;++c)o[a+c]=l[c];return o}return lP(l)}try{r.name=t}catch{}return r.DNS=uft,r.URL=dft,r}function fft(t){if(typeof t=="string"){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var n=0;n<e.length;++n)t[n]=e.charCodeAt(n)}return hft(pft(mft(t),t.length*8))}function hft(t){for(var e=[],n=t.length*32,r="0123456789abcdef",i=0;i<n;i+=8){var s=t[i>>5]>>>i%32&255,o=parseInt(r.charAt(s>>>4&15)+r.charAt(s&15),16);e.push(o)}return e}function Vme(t){return(t+64>>>9<<4)+14+1}function pft(t,e){t[e>>5]|=128<<e%32,t[Vme(e)-1]=e;for(var n=1732584193,r=-271733879,i=-1732584194,s=271733878,o=0;o<t.length;o+=16){var a=n,l=r,c=i,u=s;n=vs(n,r,i,s,t[o],7,-680876936),s=vs(s,n,r,i,t[o+1],12,-389564586),i=vs(i,s,n,r,t[o+2],17,606105819),r=vs(r,i,s,n,t[o+3],22,-1044525330),n=vs(n,r,i,s,t[o+4],7,-176418897),s=vs(s,n,r,i,t[o+5],12,1200080426),i=vs(i,s,n,r,t[o+6],17,-1473231341),r=vs(r,i,s,n,t[o+7],22,-45705983),n=vs(n,r,i,s,t[o+8],7,1770035416),s=vs(s,n,r,i,t[o+9],12,-1958414417),i=vs(i,s,n,r,t[o+10],17,-42063),r=vs(r,i,s,n,t[o+11],22,-1990404162),n=vs(n,r,i,s,t[o+12],7,1804603682),s=vs(s,n,r,i,t[o+13],12,-40341101),i=vs(i,s,n,r,t[o+14],17,-1502002290),r=vs(r,i,s,n,t[o+15],22,1236535329),n=bs(n,r,i,s,t[o+1],5,-165796510),s=bs(s,n,r,i,t[o+6],9,-1069501632),i=bs(i,s,n,r,t[o+11],14,643717713),r=bs(r,i,s,n,t[o],20,-373897302),n=bs(n,r,i,s,t[o+5],5,-701558691),s=bs(s,n,r,i,t[o+10],9,38016083),i=bs(i,s,n,r,t[o+15],14,-660478335),r=bs(r,i,s,n,t[o+4],20,-405537848),n=bs(n,r,i,s,t[o+9],5,568446438),s=bs(s,n,r,i,t[o+14],9,-1019803690),i=bs(i,s,n,r,t[o+3],14,-187363961),r=bs(r,i,s,n,t[o+8],20,1163531501),n=bs(n,r,i,s,t[o+13],5,-1444681467),s=bs(s,n,r,i,t[o+2],9,-51403784),i=bs(i,s,n,r,t[o+7],14,1735328473),r=bs(r,i,s,n,t[o+12],20,-1926607734),n=ws(n,r,i,s,t[o+5],4,-378558),s=ws(s,n,r,i,t[o+8],11,-2022574463),i=ws(i,s,n,r,t[o+11],16,1839030562),r=ws(r,i,s,n,t[o+14],23,-35309556),n=ws(n,r,i,s,t[o+1],4,-1530992060),s=ws(s,n,r,i,t[o+4],11,1272893353),i=ws(i,s,n,r,t[o+7],16,-155497632),r=ws(r,i,s,n,t[o+10],23,-1094730640),n=ws(n,r,i,s,t[o+13],4,681279174),s=ws(s,n,r,i,t[o],11,-358537222),i=ws(i,s,n,r,t[o+3],16,-722521979),r=ws(r,i,s,n,t[o+6],23,76029189),n=ws(n,r,i,s,t[o+9],4,-640364487),s=ws(s,n,r,i,t[o+12],11,-421815835),i=ws(i,s,n,r,t[o+15],16,530742520),r=ws(r,i,s,n,t[o+2],23,-995338651),n=Es(n,r,i,s,t[o],6,-198630844),s=Es(s,n,r,i,t[o+7],10,1126891415),i=Es(i,s,n,r,t[o+14],15,-1416354905),r=Es(r,i,s,n,t[o+5],21,-57434055),n=Es(n,r,i,s,t[o+12],6,1700485571),s=Es(s,n,r,i,t[o+3],10,-1894986606),i=Es(i,s,n,r,t[o+10],15,-1051523),r=Es(r,i,s,n,t[o+1],21,-2054922799),n=Es(n,r,i,s,t[o+8],6,1873313359),s=Es(s,n,r,i,t[o+15],10,-30611744),i=Es(i,s,n,r,t[o+6],15,-1560198380),r=Es(r,i,s,n,t[o+13],21,1309151649),n=Es(n,r,i,s,t[o+4],6,-145523070),s=Es(s,n,r,i,t[o+11],10,-1120210379),i=Es(i,s,n,r,t[o+2],15,718787259),r=Es(r,i,s,n,t[o+9],21,-343485551),n=eh(n,a),r=eh(r,l),i=eh(i,c),s=eh(s,u)}return[n,r,i,s]}function mft(t){if(t.length===0)return[];for(var e=t.length*8,n=new Uint32Array(Vme(e)),r=0;r<e;r+=8)n[r>>5]|=(t[r/8]&255)<<r%32;return n}function eh(t,e){var n=(t&65535)+(e&65535),r=(t>>16)+(e>>16)+(n>>16);return r<<16|n&65535}function gft(t,e){return t<<e|t>>>32-e}function cP(t,e,n,r,i,s){return eh(gft(eh(eh(e,t),eh(r,s)),i),n)}function vs(t,e,n,r,i,s,o){return cP(e&n|~e&r,t,e,i,s,o)}function bs(t,e,n,r,i,s,o){return cP(e&r|n&~r,t,e,i,s,o)}function ws(t,e,n,r,i,s,o){return cP(e^n^r,t,e,i,s,o)}function Es(t,e,n,r,i,s,o){return cP(n^(e|~r),t,e,i,s,o)}var yft=zme("v3",48,fft);function xft(t,e,n){t=t||{};var r=t.random||(t.rng||Fme)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return lP(r)}function vft(t,e,n,r){switch(t){case 0:return e&n^~e&r;case 1:return e^n^r;case 2:return e&n^e&r^n&r;case 3:return e^n^r}}function U4(t,e){return t<<e|t>>>32-e}function bft(t){var e=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){var r=unescape(encodeURIComponent(t));t=[];for(var i=0;i<r.length;++i)t.push(r.charCodeAt(i))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var s=t.length/4+2,o=Math.ceil(s/16),a=new Array(o),l=0;l<o;++l){for(var c=new Uint32Array(16),u=0;u<16;++u)c[u]=t[l*64+u*4]<<24|t[l*64+u*4+1]<<16|t[l*64+u*4+2]<<8|t[l*64+u*4+3];a[l]=c}a[o-1][14]=(t.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(t.length-1)*8&4294967295;for(var h=0;h<o;++h){for(var m=new Uint32Array(80),g=0;g<16;++g)m[g]=a[h][g];for(var y=16;y<80;++y)m[y]=U4(m[y-3]^m[y-8]^m[y-14]^m[y-16],1);for(var v=n[0],b=n[1],w=n[2],k=n[3],N=n[4],R=0;R<80;++R){var D=Math.floor(R/20),O=U4(v,5)+vft(D,b,w,k)+N+e[D]+m[R]>>>0;N=k,k=w,w=U4(b,30)>>>0,b=v,v=O}n[0]=n[0]+v>>>0,n[1]=n[1]+b>>>0,n[2]=n[2]+w>>>0,n[3]=n[3]+k>>>0,n[4]=n[4]+N>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,n[0]&255,n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,n[1]&255,n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,n[2]&255,n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,n[3]&255,n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,n[4]&255]}var wft=zme("v5",80,bft);const Eft="00000000-0000-0000-0000-000000000000";function Sft(t){if(!aP(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}const Aft=Object.freeze(Object.defineProperty({__proto__:null,NIL:Eft,parse:$me,stringify:lP,v1:lft,v3:yft,v4:xft,v5:wft,validate:aP,version:Sft},Symbol.toStringTag,{value:"Module"})),Hme=Uee(Aft);var F4,QZ;function Tft(){if(QZ)return F4;QZ=1;const t=Hme.v4;return F4=function(n,r,i,s){if(typeof n!="string")throw new TypeError(n+" must be a string");s=s||{};const o=typeof s.version=="number"?s.version:2;if(o!==1&&o!==2)throw new TypeError(o+" must be 1 or 2");const a={method:n};if(o===2&&(a.jsonrpc="2.0"),r){if(typeof r!="object"&&!Array.isArray(r))throw new TypeError(r+" must be an object, array or omitted");a.params=r}if(typeof i>"u"){const l=typeof s.generator=="function"?s.generator:function(){return t()};a.id=l(a,s)}else o===2&&i===null?s.notificationIdNull&&(a.id=null):a.id=i;return a},F4}var $4,ZZ;function kft(){if(ZZ)return $4;ZZ=1;const t=Hme.v4,e=Tft(),n=function(r,i){if(!(this instanceof n))return new n(r,i);i||(i={}),this.options={reviver:typeof i.reviver<"u"?i.reviver:null,replacer:typeof i.replacer<"u"?i.replacer:null,generator:typeof i.generator<"u"?i.generator:function(){return t()},version:typeof i.version<"u"?i.version:2,notificationIdNull:typeof i.notificationIdNull=="boolean"?i.notificationIdNull:!1},this.callServer=r};return $4=n,n.prototype.request=function(r,i,s,o){const a=this;let l=null;const c=Array.isArray(r)&&typeof i=="function";if(this.options.version===1&&c)throw new TypeError("JSON-RPC 1.0 does not support batching");if(c||!c&&r&&typeof r=="object"&&typeof i=="function")o=i,l=r;else{typeof s=="function"&&(o=s,s=void 0);const m=typeof o=="function";try{l=e(r,i,s,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(g){if(m){o(g);return}throw g}if(!m)return l}let h;try{h=JSON.stringify(l,this.options.replacer)}catch(m){o(m);return}return this.callServer(h,function(m,g){a._parseResponse(m,g,o)}),l},n.prototype._parseResponse=function(r,i,s){if(r){s(r);return}if(!i){s();return}let o;try{o=JSON.parse(i,this.options.reviver)}catch(a){s(a);return}if(s.length===3)if(Array.isArray(o)){const a=function(c){return typeof c.error<"u"},l=function(c){return!a(c)};s(null,o.filter(a),o.filter(l));return}else{s(null,o.error,o.result);return}s(null,o)},$4}var Nft=kft();const Cft=gs(Nft);var Pft=class extends J6{constructor(e,n){super();Ce(this,"socket");this.socket=new window.WebSocket(e,n.protocols),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=r=>this.emit("message",r.data),this.socket.onerror=r=>this.emit("error",r),this.socket.onclose=r=>{this.emit("close",r.code,r.reason)}}send(e,n,r){const i=r||n;try{this.socket.send(e),i()}catch(s){i(s)}}close(e,n){this.socket.close(e,n)}addEventListener(e,n,r){this.socket.addEventListener(e,n,r)}};function _ft(t,e){return new Pft(t,e)}var Ift=class{encode(t){return JSON.stringify(t)}decode(t){return JSON.parse(t)}},Rft=class extends J6{constructor(e,n="ws://localhost:8080",{autoconnect:r=!0,reconnect:i=!0,reconnect_interval:s=1e3,max_reconnects:o=5,...a}={},l,c){super();Ce(this,"address");Ce(this,"rpc_id");Ce(this,"queue");Ce(this,"options");Ce(this,"autoconnect");Ce(this,"ready");Ce(this,"reconnect");Ce(this,"reconnect_timer_id");Ce(this,"reconnect_interval");Ce(this,"max_reconnects");Ce(this,"rest_options");Ce(this,"current_reconnects");Ce(this,"generate_request_id");Ce(this,"socket");Ce(this,"webSocketFactory");Ce(this,"dataPack");this.webSocketFactory=e,this.queue={},this.rpc_id=0,this.address=n,this.autoconnect=r,this.ready=!1,this.reconnect=i,this.reconnect_timer_id=void 0,this.reconnect_interval=s,this.max_reconnects=o,this.rest_options=a,this.current_reconnects=0,this.generate_request_id=l||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),c?this.dataPack=c:this.dataPack=new Ift,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(e,n,r,i){return!i&&typeof r=="object"&&(i=r,r=null),new Promise((s,o)=>{if(!this.ready)return o(new Error("socket not ready"));const a=this.generate_request_id(e,n),l={jsonrpc:"2.0",method:e,params:n||void 0,id:a};this.socket.send(this.dataPack.encode(l),i,c=>{if(c)return o(c);this.queue[a]={promise:[s,o]},r&&(this.queue[a].timeout=setTimeout(()=>{delete this.queue[a],o(new Error("reply timeout"))},r))})})}async login(e){const n=await this.call("rpc.login",e);if(!n)throw new Error("authentication failed");return n}async listMethods(){return await this.call("__listMethods")}notify(e,n){return new Promise((r,i)=>{if(!this.ready)return i(new Error("socket not ready"));const s={jsonrpc:"2.0",method:e,params:n};this.socket.send(this.dataPack.encode(s),o=>{if(o)return i(o);r()})})}async subscribe(e){typeof e=="string"&&(e=[e]);const n=await this.call("rpc.on",e);if(typeof e=="string"&&n[e]!=="ok")throw new Error("Failed subscribing to an event '"+e+"' with: "+n[e]);return n}async unsubscribe(e){typeof e=="string"&&(e=[e]);const n=await this.call("rpc.off",e);if(typeof e=="string"&&n[e]!=="ok")throw new Error("Failed unsubscribing from an event with: "+n);return n}close(e,n){this.socket&&this.socket.close(e||1e3,n)}setAutoReconnect(e){this.reconnect=e}setReconnectInterval(e){this.reconnect_interval=e}setMaxReconnects(e){this.max_reconnects=e}getCurrentReconnects(){return this.current_reconnects}getMaxReconnects(){return this.max_reconnects}isReconnecting(){return this.reconnect_timer_id!==void 0}willReconnect(){return this.reconnect&&(this.max_reconnects===0||this.current_reconnects<this.max_reconnects)}_connect(e,n){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(e,n),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:r})=>{r instanceof ArrayBuffer&&(r=cn.from(r).toString());try{r=this.dataPack.decode(r)}catch{return}if(r.notification&&this.listeners(r.notification).length){if(!Object.keys(r.params).length)return this.emit(r.notification);const i=[r.notification];if(r.params.constructor===Object)i.push(r.params);else for(let s=0;s<r.params.length;s++)i.push(r.params[s]);return Promise.resolve().then(()=>{this.emit.apply(this,i)})}if(!this.queue[r.id])return r.method?Promise.resolve().then(()=>{this.emit(r.method,r==null?void 0:r.params)}):void 0;"error"in r=="result"in r&&this.queue[r.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[r.id].timeout&&clearTimeout(this.queue[r.id].timeout),r.error?this.queue[r.id].promise[1](r.error):this.queue[r.id].promise[0](r.result),delete this.queue[r.id]}),this.socket.addEventListener("error",r=>this.emit("error",r)),this.socket.addEventListener("close",({code:r,reason:i})=>{this.ready&&setTimeout(()=>this.emit("close",r,i),0),this.ready=!1,this.socket=void 0,r!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)?this.reconnect_timer_id=setTimeout(()=>this._connect(e,n),this.reconnect_interval):this.reconnect&&this.max_reconnects>0&&this.current_reconnects>=this.max_reconnects&&setTimeout(()=>this.emit("max_reconnects_reached",r,i),1))})}};class qme extends cme{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,ame(e);const r=a7(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),Lx(s)}update(e){return z2(this),this.iHash.update(e),this}digestInto(e){z2(this),t0(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Gme=(t,e,n)=>new qme(t,e).update(n).digest();Gme.create=(t,e)=>new qme(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const eee=(t,e)=>(t+(t>=0?e:-e)/Kme)/e;function Oft(t,e,n){const[[r,i],[s,o]]=e,a=eee(o*t,n),l=eee(-i*t,n);let c=t-a*r-l*s,u=-a*i-l*o;const h=c<Zu,m=u<Zu;h&&(c=-c),m&&(u=-u);const g=PE(Math.ceil(gme(n)/2))+yy;if(c<Zu||c>=g||u<Zu||u>=g)throw new Error("splitScalar (endomorphism): failed, k="+t);return{k1neg:h,k1:c,k2neg:m,k2:u}}function gD(t){if(!["compact","recovered","der"].includes(t))throw new Error('Signature format must be "compact", "recovered", or "der"');return t}function z4(t,e){const n={};for(let r of Object.keys(e))n[r]=t[r]===void 0?e[r]:t[r];return jm(n.lowS,"lowS"),jm(n.prehash,"prehash"),n.format!==void 0&&gD(n.format),n}class Mft extends Error{constructor(e=""){super(e)}}const Iu={Err:Mft,_tlv:{encode:(t,e)=>{const{Err:n}=Iu;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,i=eT(r);if(i.length/2&128)throw new n("tlv.encode: long form length too big");const s=r>127?eT(i.length/2|128):"";return eT(t)+s+i+e},decode(t,e){const{Err:n}=Iu;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const i=e[r++],s=!!(i&128);let o=0;if(!s)o=i;else{const l=i&127;if(!l)throw new n("tlv.decode(long): indefinite length not supported");if(l>4)throw new n("tlv.decode(long): byte length is too big");const c=e.subarray(r,r+l);if(c.length!==l)throw new n("tlv.decode: length bytes not complete");if(c[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of c)o=o<<8|u;if(r+=l,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=Iu;if(t<Zu)throw new e("integer: negative integers are not allowed");let n=eT(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=Iu;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return sP(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=Iu,i=Kr("signature",t),{v:s,l:o}=r.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l}=r.decode(2,s),{v:c,l:u}=r.decode(2,l);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(c)}},hexFromSig(t){const{_tlv:e,_int:n}=Iu,r=e.encode(2,n.encode(t.r)),i=e.encode(2,n.encode(t.s)),s=r+i;return e.encode(48,s)}},Zu=BigInt(0),yy=BigInt(1),Kme=BigInt(2),rT=BigInt(3),Lft=BigInt(4);function Hg(t,e){const{BYTES:n}=t;let r;if(typeof e=="bigint")r=e;else{let i=Kr("private key",e);try{r=t.fromBytes(i)}catch{throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof e}`)}}if(!t.isValidNot0(r))throw new Error("invalid private key: out of range [1..N-1]");return r}function Dft(t,e={}){const n=Rme("weierstrass",t,e),{Fp:r,Fn:i}=n;let s=n.CURVE;const{h:o,n:a}=s;_E(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:l}=e;if(l&&(!r.is0(s.a)||typeof l.beta!="bigint"||!Array.isArray(l.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const c=Yme(r,i);function u(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function h(H,F,T){const{x:_,y:L}=F.toAffine(),V=r.toBytes(_);if(jm(T,"isCompressed"),T){u();const K=!r.isOdd(L);return Nc(Wme(K),V)}else return Nc(Uint8Array.of(4),V,r.toBytes(L))}function m(H){Ll(H,void 0,"Point");const{publicKey:F,publicKeyUncompressed:T}=c,_=H.length,L=H[0],V=H.subarray(1);if(_===F&&(L===2||L===3)){const K=r.fromBytes(V);if(!r.isValid(K))throw new Error("bad point: is not on curve, wrong x");const te=v(K);let G;try{G=r.sqrt(te)}catch(P){const Y=P instanceof Error?": "+P.message:"";throw new Error("bad point: is not on curve, sqrt error"+Y)}u();const q=r.isOdd(G);return(L&1)===1!==q&&(G=r.neg(G)),{x:K,y:G}}else if(_===T&&L===4){const K=r.BYTES,te=r.fromBytes(V.subarray(0,K)),G=r.fromBytes(V.subarray(K,K*2));if(!b(te,G))throw new Error("bad point: is not on curve");return{x:te,y:G}}else throw new Error(`bad point: got length ${_}, expected compressed=${F} or uncompressed=${T}`)}const g=e.toBytes||h,y=e.fromBytes||m;function v(H){const F=r.sqr(H),T=r.mul(F,H);return r.add(r.add(T,r.mul(H,s.a)),s.b)}function b(H,F){const T=r.sqr(F),_=v(H);return r.eql(T,_)}if(!b(s.Gx,s.Gy))throw new Error("bad curve params: generator point");const w=r.mul(r.pow(s.a,rT),Lft),k=r.mul(r.sqr(s.b),BigInt(27));if(r.is0(r.add(w,k)))throw new Error("bad curve params: a or b");function N(H,F,T=!1){if(!r.isValid(F)||T&&r.is0(F))throw new Error(`bad point coordinate ${H}`);return F}function R(H){if(!(H instanceof U))throw new Error("ProjectivePoint expected")}function D(H){if(!l||!l.basises)throw new Error("no endo");return Oft(H,l.basises,i.ORDER)}const O=H2((H,F)=>{const{X:T,Y:_,Z:L}=H;if(r.eql(L,r.ONE))return{x:T,y:_};const V=H.is0();F==null&&(F=V?r.ONE:r.inv(L));const K=r.mul(T,F),te=r.mul(_,F),G=r.mul(L,F);if(V)return{x:r.ZERO,y:r.ZERO};if(!r.eql(G,r.ONE))throw new Error("invZ was invalid");return{x:K,y:te}}),B=H2(H=>{if(H.is0()){if(e.allowInfinityPoint&&!r.is0(H.Y))return;throw new Error("bad point: ZERO")}const{x:F,y:T}=H.toAffine();if(!r.isValid(F)||!r.isValid(T))throw new Error("bad point: x or y not field elements");if(!b(F,T))throw new Error("bad point: equation left != right");if(!H.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function z(H,F,T,_,L){return T=new U(r.mul(T.X,H),T.Y,T.Z),F=q2(_,F),T=q2(L,T),F.add(T)}class U{constructor(F,T,_){this.X=N("x",F),this.Y=N("y",T,!0),this.Z=N("z",_),Object.freeze(this)}static CURVE(){return s}static fromAffine(F){const{x:T,y:_}=F||{};if(!F||!r.isValid(T)||!r.isValid(_))throw new Error("invalid affine point");if(F instanceof U)throw new Error("projective point not allowed");return r.is0(T)&&r.is0(_)?U.ZERO:new U(T,_,r.ONE)}static fromBytes(F){const T=U.fromAffine(y(Ll(F,void 0,"point")));return T.assertValidity(),T}static fromHex(F){return U.fromBytes(Kr("pointHex",F))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(F=8,T=!0){return W.createCache(this,F),T||this.multiply(rT),this}assertValidity(){B(this)}hasEvenY(){const{y:F}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(F)}equals(F){R(F);const{X:T,Y:_,Z:L}=this,{X:V,Y:K,Z:te}=F,G=r.eql(r.mul(T,te),r.mul(V,L)),q=r.eql(r.mul(_,te),r.mul(K,L));return G&&q}negate(){return new U(this.X,r.neg(this.Y),this.Z)}double(){const{a:F,b:T}=s,_=r.mul(T,rT),{X:L,Y:V,Z:K}=this;let te=r.ZERO,G=r.ZERO,q=r.ZERO,M=r.mul(L,L),P=r.mul(V,V),Y=r.mul(K,K),X=r.mul(L,V);return X=r.add(X,X),q=r.mul(L,K),q=r.add(q,q),te=r.mul(F,q),G=r.mul(_,Y),G=r.add(te,G),te=r.sub(P,G),G=r.add(P,G),G=r.mul(te,G),te=r.mul(X,te),q=r.mul(_,q),Y=r.mul(F,Y),X=r.sub(M,Y),X=r.mul(F,X),X=r.add(X,q),q=r.add(M,M),M=r.add(q,M),M=r.add(M,Y),M=r.mul(M,X),G=r.add(G,M),Y=r.mul(V,K),Y=r.add(Y,Y),M=r.mul(Y,X),te=r.sub(te,M),q=r.mul(Y,P),q=r.add(q,q),q=r.add(q,q),new U(te,G,q)}add(F){R(F);const{X:T,Y:_,Z:L}=this,{X:V,Y:K,Z:te}=F;let G=r.ZERO,q=r.ZERO,M=r.ZERO;const P=s.a,Y=r.mul(s.b,rT);let X=r.mul(T,V),se=r.mul(_,K),oe=r.mul(L,te),me=r.add(T,_),ce=r.add(V,K);me=r.mul(me,ce),ce=r.add(X,se),me=r.sub(me,ce),ce=r.add(T,L);let ve=r.add(V,te);return ce=r.mul(ce,ve),ve=r.add(X,oe),ce=r.sub(ce,ve),ve=r.add(_,L),G=r.add(K,te),ve=r.mul(ve,G),G=r.add(se,oe),ve=r.sub(ve,G),M=r.mul(P,ce),G=r.mul(Y,oe),M=r.add(G,M),G=r.sub(se,M),M=r.add(se,M),q=r.mul(G,M),se=r.add(X,X),se=r.add(se,X),oe=r.mul(P,oe),ce=r.mul(Y,ce),se=r.add(se,oe),oe=r.sub(X,oe),oe=r.mul(P,oe),ce=r.add(ce,oe),X=r.mul(se,ce),q=r.add(q,X),X=r.mul(ve,ce),G=r.mul(me,G),G=r.sub(G,X),X=r.mul(me,se),M=r.mul(ve,M),M=r.add(M,X),new U(G,q,M)}subtract(F){return this.add(F.negate())}is0(){return this.equals(U.ZERO)}multiply(F){const{endo:T}=e;if(!i.isValidNot0(F))throw new Error("invalid scalar: out of range");let _,L;const V=K=>W.cached(this,K,te=>jp(U,te));if(T){const{k1neg:K,k1:te,k2neg:G,k2:q}=D(F),{p:M,f:P}=V(te),{p:Y,f:X}=V(q);L=P.add(X),_=z(T.beta,M,Y,K,G)}else{const{p:K,f:te}=V(F);_=K,L=te}return jp(U,[_,L])[0]}multiplyUnsafe(F){const{endo:T}=e,_=this;if(!i.isValid(F))throw new Error("invalid scalar: out of range");if(F===Zu||_.is0())return U.ZERO;if(F===yy)return _;if(W.hasCache(this))return this.multiply(F);if(T){const{k1neg:L,k1:V,k2neg:K,k2:te}=D(F),{p1:G,p2:q}=Zut(U,_,V,te);return z(T.beta,G,q,L,K)}else return W.unsafe(_,F)}multiplyAndAddUnsafe(F,T,_){const L=this.multiplyUnsafe(T).add(F.multiplyUnsafe(_));return L.is0()?void 0:L}toAffine(F){return O(this,F)}isTorsionFree(){const{isTorsionFree:F}=e;return o===yy?!0:F?F(U,this):W.unsafe(this,a).is0()}clearCofactor(){const{clearCofactor:F}=e;return o===yy?this:F?F(U,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(F=!0){return jm(F,"isCompressed"),this.assertValidity(),g(U,this,F)}toHex(F=!0){return ym(this.toBytes(F))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(F=!0){return this.toBytes(F)}_setWindowSize(F){this.precompute(F)}static normalizeZ(F){return jp(U,F)}static msm(F,T){return Ime(U,i,F,T)}static fromPrivateKey(F){return U.BASE.multiply(Hg(i,F))}}U.BASE=new U(s.Gx,s.Gy,r.ONE),U.ZERO=new U(r.ZERO,r.ONE,r.ZERO),U.Fp=r,U.Fn=i;const $=i.BITS,W=new _me(U,e.endo?Math.ceil($/2):$);return U.BASE.precompute(8),U}function Wme(t){return Uint8Array.of(t?2:3)}function Yme(t,e){return{secretKey:e.BYTES,publicKey:1+t.BYTES,publicKeyUncompressed:1+2*t.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function jft(t,e={}){const{Fn:n}=t,r=e.randomBytes||l7,i=Object.assign(Yme(t.Fp,n),{seed:Nme(n.ORDER)});function s(g){try{return!!Hg(n,g)}catch{return!1}}function o(g,y){const{publicKey:v,publicKeyUncompressed:b}=i;try{const w=g.length;return y===!0&&w!==v||y===!1&&w!==b?!1:!!t.fromBytes(g)}catch{return!1}}function a(g=r(i.seed)){return Jut(Ll(g,i.seed,"seed"),n.ORDER)}function l(g,y=!0){return t.BASE.multiply(Hg(n,g)).toBytes(y)}function c(g){const y=a(g);return{secretKey:y,publicKey:l(y)}}function u(g){if(typeof g=="bigint")return!1;if(g instanceof t)return!0;const{secretKey:y,publicKey:v,publicKeyUncompressed:b}=i;if(n.allowedLengths||y===v)return;const w=Kr("key",g).length;return w===v||w===b}function h(g,y,v=!0){if(u(g)===!0)throw new Error("first arg must be private key");if(u(y)===!1)throw new Error("second arg must be public key");const b=Hg(n,g);return t.fromHex(y).multiply(b).toBytes(v)}return Object.freeze({getPublicKey:l,getSharedSecret:h,keygen:c,Point:t,utils:{isValidSecretKey:s,isValidPublicKey:o,randomSecretKey:a,isValidPrivateKey:s,randomPrivateKey:a,normPrivateKeyToScalar:g=>Hg(n,g),precompute(g=8,y=t.BASE){return y.precompute(g,!1)}},lengths:i})}function Bft(t,e,n={}){ame(e),_E(n,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=n.randomBytes||l7,i=n.hmac||((T,..._)=>Gme(e,T,Nc(..._))),{Fp:s,Fn:o}=t,{ORDER:a,BITS:l}=o,{keygen:c,getPublicKey:u,getSharedSecret:h,utils:m,lengths:g}=jft(t,n),y={prehash:!1,lowS:typeof n.lowS=="boolean"?n.lowS:!1,format:void 0,extraEntropy:!1},v="compact";function b(T){const _=a>>yy;return T>_}function w(T,_){if(!o.isValidNot0(_))throw new Error(`invalid signature ${T}: out of range 1..Point.Fn.ORDER`);return _}function k(T,_){gD(_);const L=g.signature,V=_==="compact"?L:_==="recovered"?L+1:void 0;return Ll(T,V,`${_} signature`)}class N{constructor(_,L,V){this.r=w("r",_),this.s=w("s",L),V!=null&&(this.recovery=V),Object.freeze(this)}static fromBytes(_,L=v){k(_,L);let V;if(L==="der"){const{r:q,s:M}=Iu.toSig(Ll(_));return new N(q,M)}L==="recovered"&&(V=_[0],L="compact",_=_.subarray(1));const K=o.BYTES,te=_.subarray(0,K),G=_.subarray(K,K*2);return new N(o.fromBytes(te),o.fromBytes(G),V)}static fromHex(_,L){return this.fromBytes(V2(_),L)}addRecoveryBit(_){return new N(this.r,this.s,_)}recoverPublicKey(_){const L=s.ORDER,{r:V,s:K,recovery:te}=this;if(te==null||![0,1,2,3].includes(te))throw new Error("recovery id invalid");if(a*Kme<L&&te>1)throw new Error("recovery id is ambiguous for h>1 curve");const q=te===2||te===3?V+a:V;if(!s.isValid(q))throw new Error("recovery id 2 or 3 invalid");const M=s.toBytes(q),P=t.fromBytes(Nc(Wme((te&1)===0),M)),Y=o.inv(q),X=D(Kr("msgHash",_)),se=o.create(-X*Y),oe=o.create(K*Y),me=t.BASE.multiplyUnsafe(se).add(P.multiplyUnsafe(oe));if(me.is0())throw new Error("point at infinify");return me.assertValidity(),me}hasHighS(){return b(this.s)}toBytes(_=v){if(gD(_),_==="der")return V2(Iu.hexFromSig(this));const L=o.toBytes(this.r),V=o.toBytes(this.s);if(_==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return Nc(Uint8Array.of(this.recovery),L,V)}return Nc(L,V)}toHex(_){return ym(this.toBytes(_))}assertValidity(){}static fromCompact(_){return N.fromBytes(Kr("sig",_),"compact")}static fromDER(_){return N.fromBytes(Kr("sig",_),"der")}normalizeS(){return this.hasHighS()?new N(this.r,o.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return ym(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return ym(this.toBytes("compact"))}}const R=n.bits2int||function(_){if(_.length>8192)throw new Error("input is too large");const L=sP(_),V=_.length*8-l;return V>0?L>>BigInt(V):L},D=n.bits2int_modN||function(_){return o.create(R(_))},O=PE(l);function B(T){return mD("num < 2^"+l,T,Zu,O),o.toBytes(T)}function z(T,_){return Ll(T,void 0,"message"),_?Ll(e(T),void 0,"prehashed message"):T}function U(T,_,L){if(["recovered","canonical"].some(se=>se in L))throw new Error("sign() legacy options not supported");const{lowS:V,prehash:K,extraEntropy:te}=z4(L,y);T=z(T,K);const G=D(T),q=Hg(o,_),M=[B(q),B(G)];if(te!=null&&te!==!1){const se=te===!0?r(g.secretKey):te;M.push(Kr("extraEntropy",se))}const P=Nc(...M),Y=G;function X(se){const oe=R(se);if(!o.isValidNot0(oe))return;const me=o.inv(oe),ce=t.BASE.multiply(oe).toAffine(),ve=o.create(ce.x);if(ve===Zu)return;const Ne=o.create(me*o.create(Y+ve*q));if(Ne===Zu)return;let pe=(ce.x===ve?0:2)|Number(ce.y&yy),Le=Ne;return V&&b(Ne)&&(Le=o.neg(Ne),pe^=1),new N(ve,Le,pe)}return{seed:P,k2sig:X}}function $(T,_,L={}){T=Kr("message",T);const{seed:V,k2sig:K}=U(T,_,L);return Fut(e.outputLen,o.BYTES,i)(V,K)}function W(T){let _;const L=typeof T=="string"||CE(T),V=!L&&T!==null&&typeof T=="object"&&typeof T.r=="bigint"&&typeof T.s=="bigint";if(!L&&!V)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(V)_=new N(T.r,T.s);else if(L){try{_=N.fromBytes(Kr("sig",T),"der")}catch(K){if(!(K instanceof Iu.Err))throw K}if(!_)try{_=N.fromBytes(Kr("sig",T),"compact")}catch{return!1}}return _||!1}function H(T,_,L,V={}){const{lowS:K,prehash:te,format:G}=z4(V,y);if(L=Kr("publicKey",L),_=z(Kr("message",_),te),"strict"in V)throw new Error("options.strict was renamed to lowS");const q=G===void 0?W(T):N.fromBytes(Kr("sig",T),G);if(q===!1)return!1;try{const M=t.fromBytes(L);if(K&&q.hasHighS())return!1;const{r:P,s:Y}=q,X=D(_),se=o.inv(Y),oe=o.create(X*se),me=o.create(P*se),ce=t.BASE.multiplyUnsafe(oe).add(M.multiplyUnsafe(me));return ce.is0()?!1:o.create(ce.x)===P}catch{return!1}}function F(T,_,L={}){const{prehash:V}=z4(L,y);return _=z(_,V),N.fromBytes(T,"recovered").recoverPublicKey(_).toBytes()}return Object.freeze({keygen:c,getPublicKey:u,getSharedSecret:h,utils:m,lengths:g,Point:t,sign:$,verify:H,recoverPublicKey:F,Signature:N,hash:e})}function Uft(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp;let r=t.allowedPrivateKeyLengths?Array.from(new Set(t.allowedPrivateKeyLengths.map(o=>Math.ceil(o/2)))):void 0;const i=n0(e.n,{BITS:t.nBitLength,allowedLengths:r,modFromBytes:t.wrapPrivateKey}),s={Fp:n,Fn:i,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:s}}function Fft(t){const{CURVE:e,curveOpts:n}=Uft(t),r={hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,hash:t.hash,ecdsaOpts:r}}function $ft(t,e){const n=e.Point;return Object.assign({},e,{ProjectivePoint:n,CURVE:Object.assign({},t,Tme(n.Fn.ORDER,n.Fn.BITS))})}function zft(t){const{CURVE:e,curveOpts:n,hash:r,ecdsaOpts:i}=Fft(t),s=Dft(e,n),o=Bft(s,r,i);return $ft(t,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Vft(t,e){const n=r=>zft({...t,hash:r});return{...n(e),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const x7={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},Hft={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},tee=BigInt(2);function qft(t){const e=x7.p,n=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),c=t*t*t%e,u=c*c*t%e,h=Vr(u,n,e)*u%e,m=Vr(h,n,e)*u%e,g=Vr(m,tee,e)*c%e,y=Vr(g,i,e)*g%e,v=Vr(y,s,e)*y%e,b=Vr(v,a,e)*v%e,w=Vr(b,l,e)*b%e,k=Vr(w,a,e)*v%e,N=Vr(k,n,e)*u%e,R=Vr(N,o,e)*y%e,D=Vr(R,r,e)*c%e,O=Vr(D,tee,e);if(!yD.eql(yD.sqr(O),t))throw new Error("Cannot find square root");return O}const yD=n0(x7.p,{sqrt:qft}),Gft=Vft({...x7,Fp:yD,lowS:!0,endo:Hft},hme);Ev.utils.randomPrivateKey;const nee=()=>{const t=Ev.utils.randomPrivateKey(),e=xD(t),n=new Uint8Array(64);return n.set(t),n.set(e,32),{publicKey:e,secretKey:n}},xD=Ev.getPublicKey;function ree(t){try{return Ev.ExtendedPoint.fromHex(t),!0}catch{return!1}}const Kft=(t,e)=>Ev.sign(t,e.slice(0,32)),Wft=Ev.verify,Di=t=>cn.isBuffer(t)?t:t instanceof Uint8Array?cn.from(t.buffer,t.byteOffset,t.byteLength):cn.from(t);class Yft{constructor(e){Object.assign(this,e)}encode(){return cn.from(M4.serialize(VT,this))}static decode(e){return M4.deserialize(VT,this,e)}static decodeUnchecked(e){return M4.deserializeUnchecked(VT,this,e)}}const VT=new Map;var Jme;const Jft=32,oh=32;function Xft(t){return t._bn!==void 0}let iee=1;class mt extends Yft{constructor(e){if(super({}),this._bn=void 0,Xft(e))this._bn=e._bn;else{if(typeof e=="string"){const n=us.decode(e);if(n.length!=oh)throw new Error("Invalid public key input");this._bn=new $Z(n)}else this._bn=new $Z(e);if(this._bn.byteLength()>oh)throw new Error("Invalid public key input")}}static unique(){const e=new mt(iee);return iee+=1,new mt(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return us.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(cn);if(e.length===oh)return e;const n=cn.alloc(32);return e.copy(n,32-e.length),n}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,n,r){const i=cn.concat([e.toBuffer(),cn.from(n),r.toBuffer()]),s=qZ(i);return new mt(s)}static createProgramAddressSync(e,n){let r=cn.alloc(0);e.forEach(function(s){if(s.length>Jft)throw new TypeError("Max seed length exceeded");r=cn.concat([r,Di(s)])}),r=cn.concat([r,n.toBuffer(),cn.from("ProgramDerivedAddress")]);const i=qZ(r);if(ree(i))throw new Error("Invalid seeds, address must fall off the curve");return new mt(i)}static async createProgramAddress(e,n){return this.createProgramAddressSync(e,n)}static findProgramAddressSync(e,n){let r=255,i;for(;r!=0;){try{const s=e.concat(cn.from([r]));i=this.createProgramAddressSync(s,n)}catch(s){if(s instanceof TypeError)throw s;r--;continue}return[i,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,n){return this.findProgramAddressSync(e,n)}static isOnCurve(e){const n=new mt(e);return ree(n.toBytes())}}Jme=mt;mt.default=new Jme("11111111111111111111111111111111");VT.set(mt,{kind:"struct",fields:[["_bn","u256"]]});new mt("BPFLoader1111111111111111111111111111111111");const xy=1232,Xme=127,Qme=64;class Zme extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Zme.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class e0e extends Error{constructor(e,n){super(`Transaction was not confirmed in ${n.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(e0e.prototype,"name",{value:"TransactionExpiredTimeoutError"});class nw extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(nw.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class X2{constructor(e,n){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=n}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const n of this.keySegments()){if(e<n.length)return n[e];e-=n.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((s,o)=>{r.set(s.toBase58(),o)});const i=s=>{const o=r.get(s.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return e.map(s=>({programIdIndex:i(s.programId),accountKeyIndexes:s.keys.map(o=>i(o.pubkey)),data:s.data}))}}const Sn=(t="publicKey")=>Ee.blob(32,t),qg=(t="string")=>{const e=Ee.struct([Ee.u32("length"),Ee.u32("lengthPadding"),Ee.blob(Ee.offset(Ee.u32(),-8),"chars")],t),n=e.decode.bind(e),r=e.encode.bind(e),i=e;return i.decode=(s,o)=>n(s,o).chars.toString(),i.encode=(s,o,a)=>{const l={chars:cn.from(s,"utf8")};return r(l,o,a)},i.alloc=s=>Ee.u32().span+Ee.u32().span+cn.from(s,"utf8").length,i},Qft=(t="authorized")=>Ee.struct([Sn("staker"),Sn("withdrawer")],t),Zft=(t="lockup")=>Ee.struct([Ee.ns64("unixTimestamp"),Ee.ns64("epoch"),Sn("custodian")],t),eht=(t="voteInit")=>Ee.struct([Sn("nodePubkey"),Sn("authorizedVoter"),Sn("authorizedWithdrawer"),Ee.u8("commission")],t),tht=(t="voteAuthorizeWithSeedArgs")=>Ee.struct([Ee.u32("voteAuthorizationType"),Sn("currentAuthorityDerivedKeyOwnerPubkey"),qg("currentAuthorityDerivedKeySeed"),Sn("newAuthorized")],t);function t0e(t,e){const n=i=>{if(i.span>=0)return i.span;if(typeof i.alloc=="function")return i.alloc(e[i.property]);if("count"in i&&"elementLayout"in i){const s=e[i.property];if(Array.isArray(s))return s.length*n(i.elementLayout)}else if("fields"in i)return t0e({layout:i},e[i.property]);return 0};let r=0;return t.layout.fields.forEach(i=>{r+=n(i)}),r}function $a(t){let e=0,n=0;for(;;){let r=t.shift();if(e|=(r&127)<<n*7,n+=1,(r&128)===0)break}return e}function za(t,e){let n=e;for(;;){let r=n&127;if(n>>=7,n==0){t.push(r);break}else r|=128,t.push(r)}}function Wr(t,e){if(!t)throw new Error(e||"Assertion failed")}class uP{constructor(e,n){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=n}static compile(e,n){const r=new Map,i=o=>{const a=o.toBase58();let l=r.get(a);return l===void 0&&(l={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(a,l)),l},s=i(n);s.isSigner=!0,s.isWritable=!0;for(const o of e){i(o.programId).isInvoked=!0;for(const a of o.keys){const l=i(a.pubkey);l.isSigner||(l.isSigner=a.isSigner),l.isWritable||(l.isWritable=a.isWritable)}}return new uP(n,r)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];Wr(e.length<=256,"Max static account keys length exceeded");const n=e.filter(([,l])=>l.isSigner&&l.isWritable),r=e.filter(([,l])=>l.isSigner&&!l.isWritable),i=e.filter(([,l])=>!l.isSigner&&l.isWritable),s=e.filter(([,l])=>!l.isSigner&&!l.isWritable),o={numRequiredSignatures:n.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:s.length};{Wr(n.length>0,"Expected at least one writable signer key");const[l]=n[0];Wr(l===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const a=[...n.map(([l])=>new mt(l)),...r.map(([l])=>new mt(l)),...i.map(([l])=>new mt(l)),...s.map(([l])=>new mt(l))];return[o,a]}extractTableLookup(e){const[n,r]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[i,s]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(n.length===0&&i.length===0))return[{accountKey:e.key,writableIndexes:n,readonlyIndexes:i},{writable:r,readonly:s}]}drainKeysFoundInLookupTable(e,n){const r=new Array,i=new Array;for(const[s,o]of this.keyMetaMap.entries())if(n(o)){const a=new mt(s),l=e.findIndex(c=>c.equals(a));l>=0&&(Wr(l<256,"Max lookup table index exceeded"),r.push(l),i.push(a),this.keyMetaMap.delete(s))}return[r,i]}}const n0e="Reached end of buffer unexpectedly";function Ku(t){if(t.length===0)throw new Error(n0e);return t.shift()}function Va(t,...e){const[n]=e;if(e.length===2?n+(e[1]??0)>t.length:n>=t.length)throw new Error(n0e);return t.splice(...e)}class Td{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(n=>new mt(n)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(n=>this.indexToProgramIds.set(n.programIdIndex,this.accountKeys[n.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:us.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new X2(this.staticAccountKeys)}static compile(e){const n=uP.compile(e.instructions,e.payerKey),[r,i]=n.getMessageComponents(),o=new X2(i).compileInstructions(e.instructions).map(a=>({programIdIndex:a.programIdIndex,accounts:a.accountKeyIndexes,data:us.encode(a.data)}));return new Td({header:r,accountKeys:i,recentBlockhash:e.recentBlockhash,instructions:o})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const n=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const r=e-n,s=this.accountKeys.length-n-this.header.numReadonlyUnsignedAccounts;return r<s}else{const r=n-this.header.numReadonlySignedAccounts;return e<r}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,n)=>!this.isProgramId(n))}serialize(){const e=this.accountKeys.length;let n=[];za(n,e);const r=this.instructions.map(h=>{const{accounts:m,programIdIndex:g}=h,y=Array.from(us.decode(h.data));let v=[];za(v,m.length);let b=[];return za(b,y.length),{programIdIndex:g,keyIndicesCount:cn.from(v),keyIndices:m,dataLength:cn.from(b),data:y}});let i=[];za(i,r.length);let s=cn.alloc(xy);cn.from(i).copy(s);let o=i.length;r.forEach(h=>{const g=Ee.struct([Ee.u8("programIdIndex"),Ee.blob(h.keyIndicesCount.length,"keyIndicesCount"),Ee.seq(Ee.u8("keyIndex"),h.keyIndices.length,"keyIndices"),Ee.blob(h.dataLength.length,"dataLength"),Ee.seq(Ee.u8("userdatum"),h.data.length,"data")]).encode(h,s,o);o+=g}),s=s.slice(0,o);const a=Ee.struct([Ee.blob(1,"numRequiredSignatures"),Ee.blob(1,"numReadonlySignedAccounts"),Ee.blob(1,"numReadonlyUnsignedAccounts"),Ee.blob(n.length,"keyCount"),Ee.seq(Sn("key"),e,"keys"),Sn("recentBlockhash")]),l={numRequiredSignatures:cn.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:cn.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:cn.from([this.header.numReadonlyUnsignedAccounts]),keyCount:cn.from(n),keys:this.accountKeys.map(h=>Di(h.toBytes())),recentBlockhash:us.decode(this.recentBlockhash)};let c=cn.alloc(2048);const u=a.encode(l,c);return s.copy(c,u),c.slice(0,u+s.length)}static from(e){let n=[...e];const r=Ku(n);if(r!==(r&Xme))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=Ku(n),s=Ku(n),o=$a(n);let a=[];for(let m=0;m<o;m++){const g=Va(n,0,oh);a.push(new mt(cn.from(g)))}const l=Va(n,0,oh),c=$a(n);let u=[];for(let m=0;m<c;m++){const g=Ku(n),y=$a(n),v=Va(n,0,y),b=$a(n),w=Va(n,0,b),k=us.encode(cn.from(w));u.push({programIdIndex:g,accounts:v,data:k})}const h={header:{numRequiredSignatures:r,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:us.encode(cn.from(l)),accountKeys:a,instructions:u};return new Td(h)}}class x1{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const n of this.addressTableLookups)e+=n.readonlyIndexes.length+n.writableIndexes.length;return e}getAccountKeys(e){let n;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");n=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)n=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new X2(this.staticAccountKeys,n)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const n=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(e>=r){const i=e-r,s=this.addressTableLookups.reduce((o,a)=>o+a.writableIndexes.length,0);return i<s}else if(e>=this.header.numRequiredSignatures){const i=e-n,o=r-n-this.header.numReadonlyUnsignedAccounts;return i<o}else{const i=n-this.header.numReadonlySignedAccounts;return e<i}}resolveAddressTableLookups(e){const n={writable:[],readonly:[]};for(const r of this.addressTableLookups){const i=e.find(s=>s.key.equals(r.accountKey));if(!i)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const s of r.writableIndexes)if(s<i.state.addresses.length)n.writable.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${r.accountKey.toBase58()}`);for(const s of r.readonlyIndexes)if(s<i.state.addresses.length)n.readonly.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${r.accountKey.toBase58()}`)}return n}static compile(e){const n=uP.compile(e.instructions,e.payerKey),r=new Array,i={writable:new Array,readonly:new Array},s=e.addressLookupTableAccounts||[];for(const u of s){const h=n.extractTableLookup(u);if(h!==void 0){const[m,{writable:g,readonly:y}]=h;r.push(m),i.writable.push(...g),i.readonly.push(...y)}}const[o,a]=n.getMessageComponents(),c=new X2(a,i).compileInstructions(e.instructions);return new x1({header:o,staticAccountKeys:a,recentBlockhash:e.recentBlockhash,compiledInstructions:c,addressTableLookups:r})}serialize(){const e=Array();za(e,this.staticAccountKeys.length);const n=this.serializeInstructions(),r=Array();za(r,this.compiledInstructions.length);const i=this.serializeAddressTableLookups(),s=Array();za(s,this.addressTableLookups.length);const o=Ee.struct([Ee.u8("prefix"),Ee.struct([Ee.u8("numRequiredSignatures"),Ee.u8("numReadonlySignedAccounts"),Ee.u8("numReadonlyUnsignedAccounts")],"header"),Ee.blob(e.length,"staticAccountKeysLength"),Ee.seq(Sn(),this.staticAccountKeys.length,"staticAccountKeys"),Sn("recentBlockhash"),Ee.blob(r.length,"instructionsLength"),Ee.blob(n.length,"serializedInstructions"),Ee.blob(s.length,"addressTableLookupsLength"),Ee.blob(i.length,"serializedAddressTableLookups")]),a=new Uint8Array(xy),c=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(u=>u.toBytes()),recentBlockhash:us.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:n,addressTableLookupsLength:new Uint8Array(s),serializedAddressTableLookups:i},a);return a.slice(0,c)}serializeInstructions(){let e=0;const n=new Uint8Array(xy);for(const r of this.compiledInstructions){const i=Array();za(i,r.accountKeyIndexes.length);const s=Array();za(s,r.data.length);const o=Ee.struct([Ee.u8("programIdIndex"),Ee.blob(i.length,"encodedAccountKeyIndexesLength"),Ee.seq(Ee.u8(),r.accountKeyIndexes.length,"accountKeyIndexes"),Ee.blob(s.length,"encodedDataLength"),Ee.blob(r.data.length,"data")]);e+=o.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(i),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(s),data:r.data},n,e)}return n.slice(0,e)}serializeAddressTableLookups(){let e=0;const n=new Uint8Array(xy);for(const r of this.addressTableLookups){const i=Array();za(i,r.writableIndexes.length);const s=Array();za(s,r.readonlyIndexes.length);const o=Ee.struct([Sn("accountKey"),Ee.blob(i.length,"encodedWritableIndexesLength"),Ee.seq(Ee.u8(),r.writableIndexes.length,"writableIndexes"),Ee.blob(s.length,"encodedReadonlyIndexesLength"),Ee.seq(Ee.u8(),r.readonlyIndexes.length,"readonlyIndexes")]);e+=o.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(i),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(s),readonlyIndexes:r.readonlyIndexes},n,e)}return n.slice(0,e)}static deserialize(e){let n=[...e];const r=Ku(n),i=r&Xme;Wr(r!==i,"Expected versioned message but received legacy message");const s=i;Wr(s===0,`Expected versioned message with version 0 but found version ${s}`);const o={numRequiredSignatures:Ku(n),numReadonlySignedAccounts:Ku(n),numReadonlyUnsignedAccounts:Ku(n)},a=[],l=$a(n);for(let y=0;y<l;y++)a.push(new mt(Va(n,0,oh)));const c=us.encode(Va(n,0,oh)),u=$a(n),h=[];for(let y=0;y<u;y++){const v=Ku(n),b=$a(n),w=Va(n,0,b),k=$a(n),N=new Uint8Array(Va(n,0,k));h.push({programIdIndex:v,accountKeyIndexes:w,data:N})}const m=$a(n),g=[];for(let y=0;y<m;y++){const v=new mt(Va(n,0,oh)),b=$a(n),w=Va(n,0,b),k=$a(n),N=Va(n,0,k);g.push({accountKey:v,writableIndexes:w,readonlyIndexes:N})}return new x1({header:o,staticAccountKeys:a,recentBlockhash:c,compiledInstructions:h,addressTableLookups:g})}}let Sf=(function(t){return t[t.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",t[t.PROCESSED=1]="PROCESSED",t[t.TIMED_OUT=2]="TIMED_OUT",t[t.NONCE_INVALID=3]="NONCE_INVALID",t})({});const nht=cn.alloc(Qme).fill(0);class Bi{constructor(e){this.keys=void 0,this.programId=void 0,this.data=cn.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:n,isWritable:r})=>({pubkey:e.toJSON(),isSigner:n,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class Ga{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:n,nonceInfo:r}=e;this.minNonceContextSlot=n,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:n,lastValidBlockHeight:r}=e;this.recentBlockhash=n,this.lastValidBlockHeight=r}else{const{recentBlockhash:n,nonceInfo:r}=e;r&&(this.nonceInfo=r),this.recentBlockhash=n}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(n=>{"instructions"in n?this.instructions=this.instructions.concat(n.instructions):"data"in n&&"programId"in n&&"keys"in n?this.instructions.push(n):this.instructions.push(new Bi(n))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,n;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?n=[this.nonceInfo.nonceInstruction,...this.instructions]:n=this.instructions):(e=this.recentBlockhash,n=this.instructions),!e)throw new Error("Transaction recentBlockhash required");n.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let v=0;v<n.length;v++)if(n[v].programId===void 0)throw new Error(`Transaction instruction index ${v} has undefined program id`);const i=[],s=[];n.forEach(v=>{v.keys.forEach(w=>{s.push({...w})});const b=v.programId.toString();i.includes(b)||i.push(b)}),i.forEach(v=>{s.push({pubkey:new mt(v),isSigner:!1,isWritable:!1})});const o=[];s.forEach(v=>{const b=v.pubkey.toString(),w=o.findIndex(k=>k.pubkey.toString()===b);w>-1?(o[w].isWritable=o[w].isWritable||v.isWritable,o[w].isSigner=o[w].isSigner||v.isSigner):o.push(v)}),o.sort(function(v,b){if(v.isSigner!==b.isSigner)return v.isSigner?-1:1;if(v.isWritable!==b.isWritable)return v.isWritable?-1:1;const w={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return v.pubkey.toBase58().localeCompare(b.pubkey.toBase58(),"en",w)});const a=o.findIndex(v=>v.pubkey.equals(r));if(a>-1){const[v]=o.splice(a,1);v.isSigner=!0,v.isWritable=!0,o.unshift(v)}else o.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const v of this.signatures){const b=o.findIndex(w=>w.pubkey.equals(v.publicKey));if(b>-1)o[b].isSigner||(o[b].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${v.publicKey.toString()}`)}let l=0,c=0,u=0;const h=[],m=[];o.forEach(({pubkey:v,isSigner:b,isWritable:w})=>{b?(h.push(v.toString()),l+=1,w||(c+=1)):(m.push(v.toString()),w||(u+=1))});const g=h.concat(m),y=n.map(v=>{const{data:b,programId:w}=v;return{programIdIndex:g.indexOf(w.toString()),accounts:v.keys.map(k=>g.indexOf(k.pubkey.toString())),data:us.encode(b)}});return y.forEach(v=>{Wr(v.programIdIndex>=0),v.accounts.forEach(b=>Wr(b>=0))}),new Td({header:{numRequiredSignatures:l,numReadonlySignedAccounts:c,numReadonlyUnsignedAccounts:u},accountKeys:g,recentBlockhash:e,instructions:y})}_compile(){const e=this.compileMessage(),n=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===n.length&&this.signatures.every((i,s)=>n[s].equals(i.publicKey))||(this.signatures=n.map(r=>({signature:null,publicKey:r}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const n=new Set;this.signatures=e.filter(r=>{const i=r.toString();return n.has(i)?!1:(n.add(i),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...e){if(e.length===0)throw new Error("No signers");const n=new Set,r=[];for(const s of e){const o=s.publicKey.toString();n.has(o)||(n.add(o),r.push(s))}this.signatures=r.map(s=>({signature:null,publicKey:s.publicKey}));const i=this._compile();this._partialSign(i,...r)}partialSign(...e){if(e.length===0)throw new Error("No signers");const n=new Set,r=[];for(const s of e){const o=s.publicKey.toString();n.has(o)||(n.add(o),r.push(s))}const i=this._compile();this._partialSign(i,...r)}_partialSign(e,...n){const r=e.serialize();n.forEach(i=>{const s=Kft(r,i.secretKey);this._addSignature(i.publicKey,Di(s))})}addSignature(e,n){this._compile(),this._addSignature(e,n)}_addSignature(e,n){Wr(n.length===64);const r=this.signatures.findIndex(i=>e.equals(i.publicKey));if(r<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[r].signature=cn.from(n)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,n){const r={};for(const{signature:i,publicKey:s}of this.signatures)i===null?n&&(r.missing||(r.missing=[])).push(s):Wft(i,e,s.toBytes())||(r.invalid||(r.invalid=[])).push(s);return r.invalid||r.missing?r:void 0}serialize(e){const{requireAllSignatures:n,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),i=this.serializeMessage();if(r){const s=this._getMessageSignednessErrors(i,n);if(s){let o="Signature verification failed.";throw s.invalid&&(o+=`
Invalid signature for public key${s.invalid.length===1?"":"(s)"} [\`${s.invalid.map(a=>a.toBase58()).join("`, `")}\`].`),s.missing&&(o+=`
Missing signature for public key${s.missing.length===1?"":"(s)"} [\`${s.missing.map(a=>a.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(i)}_serialize(e){const{signatures:n}=this,r=[];za(r,n.length);const i=r.length+n.length*64+e.length,s=cn.alloc(i);return Wr(n.length<256),cn.from(r).copy(s,0),n.forEach(({signature:o},a)=>{o!==null&&(Wr(o.length===64,"signature has invalid length"),cn.from(o).copy(s,r.length+a*64))}),e.copy(s,r.length+n.length*64),Wr(s.length<=xy,`Transaction too large: ${s.length} > ${xy}`),s}get keys(){return Wr(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return Wr(this.instructions.length===1),this.instructions[0].programId}get data(){return Wr(this.instructions.length===1),this.instructions[0].data}static from(e){let n=[...e];const r=$a(n);let i=[];for(let s=0;s<r;s++){const o=Va(n,0,Qme);i.push(us.encode(cn.from(o)))}return Ga.populate(Td.from(n),i)}static populate(e,n=[]){const r=new Ga;return r.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(r.feePayer=e.accountKeys[0]),n.forEach((i,s)=>{const o={signature:i==us.encode(nht)?null:us.decode(i),publicKey:e.accountKeys[s]};r.signatures.push(o)}),e.instructions.forEach(i=>{const s=i.accounts.map(o=>{const a=e.accountKeys[o];return{pubkey:a,isSigner:r.signatures.some(l=>l.publicKey.toString()===a.toString())||e.isAccountSigner(o),isWritable:e.isAccountWritable(o)}});r.instructions.push(new Bi({keys:s,programId:e.accountKeys[i.programIdIndex],data:us.decode(i.data)}))}),r._message=e,r._json=r.toJSON(),r}}class r0e{constructor(e){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=e.payerKey,this.instructions=e.instructions,this.recentBlockhash=e.recentBlockhash}static decompile(e,n){const{header:r,compiledInstructions:i,recentBlockhash:s}=e,{numRequiredSignatures:o,numReadonlySignedAccounts:a,numReadonlyUnsignedAccounts:l}=r,c=o-a;Wr(c>0,"Message header is invalid");const u=e.staticAccountKeys.length-o-l;Wr(u>=0,"Message header is invalid");const h=e.getAccountKeys(n),m=h.get(0);if(m===void 0)throw new Error("Failed to decompile message because no account keys were found");const g=[];for(const y of i){const v=[];for(const w of y.accountKeyIndexes){const k=h.get(w);if(k===void 0)throw new Error(`Failed to find key for account key index ${w}`);const N=w<o;let R;N?R=w<c:w<h.staticAccountKeys.length?R=w-o<u:R=w-h.staticAccountKeys.length<h.accountKeysFromLookups.writable.length,v.push({pubkey:k,isSigner:w<r.numRequiredSignatures,isWritable:R})}const b=h.get(y.programIdIndex);if(b===void 0)throw new Error(`Failed to find program id for program id index ${y.programIdIndex}`);g.push(new Bi({programId:b,data:Di(y.data),keys:v}))}return new r0e({payerKey:m,instructions:g,recentBlockhash:s})}compileToLegacyMessage(){return Td.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(e){return x1.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:e})}}const rht=160,iht=64,sht=rht/iht,oht=1e3/sht,Ngt=new mt("SysvarC1ock11111111111111111111111111111111");new mt("SysvarEpochSchedu1e111111111111111111111111");new mt("Sysvar1nstructions1111111111111111111111111");const V4=new mt("SysvarRecentB1ockHashes11111111111111111111"),see=new mt("SysvarRent111111111111111111111111111111111");new mt("SysvarRewards111111111111111111111111111111");new mt("SysvarS1otHashes111111111111111111111111111");new mt("SysvarS1otHistory11111111111111111111111111");new mt("SysvarStakeHistory1111111111111111111111111");class oee extends Error{constructor({action:e,signature:n,transactionMessage:r,logs:i}){const s=i?`Logs: 
${JSON.stringify(i.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let a;switch(e){case"send":a=`Transaction ${n} resulted in an error. 
${r}. `+s+o;break;case"simulate":a=`Simulation failed. 
Message: ${r}. 
`+s+o;break;default:a=`Unknown action '${(l=>l)(e)}'`}super(a),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=n,this.transactionMessage=r,this.transactionLogs=i||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const e=this.transactionLogs;if(!(e!=null&&typeof e=="object"&&"then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((n,r)=>{e.getTransaction(this.signature).then(i=>{if(i&&i.meta&&i.meta.logMessages){const s=i.meta.logMessages;this.transactionLogs=s,n(s)}else r(new Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}}class Ut extends Error{constructor({code:e,message:n,data:r},i){super(i!=null?`${i}: ${n}`:n),this.code=void 0,this.data=void 0,this.code=e,this.data=r,this.name="SolanaJSONRPCError"}}function kg(t){return new Promise(e=>setTimeout(e,t))}function ks(t,e){const n=t.layout.span>=0?t.layout.span:t0e(t,e),r=cn.alloc(n),i=Object.assign({instruction:t.index},e);return t.layout.encode(i,r),r}const aht=Ee.nu64("lamportsPerSignature"),i0e=Ee.struct([Ee.u32("version"),Ee.u32("state"),Sn("authorizedPubkey"),Sn("nonce"),Ee.struct([aht],"feeCalculator")]),aee=i0e.span;class v7{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const n=i0e.decode(Di(e),0);return new v7({authorizedPubkey:new mt(n.authorizedPubkey),nonce:new mt(n.nonce).toString(),feeCalculator:n.feeCalculator})}}function Bx(t){const e=Ee.blob(8,t),n=e.decode.bind(e),r=e.encode.bind(e),i=e,s=Xdt();return i.decode=(o,a)=>{const l=n(o,a);return s.decode(l)},i.encode=(o,a,l)=>{const c=s.encode(o);return r(c,a,l)},i}const Na=Object.freeze({Create:{index:0,layout:Ee.struct([Ee.u32("instruction"),Ee.ns64("lamports"),Ee.ns64("space"),Sn("programId")])},Assign:{index:1,layout:Ee.struct([Ee.u32("instruction"),Sn("programId")])},Transfer:{index:2,layout:Ee.struct([Ee.u32("instruction"),Bx("lamports")])},CreateWithSeed:{index:3,layout:Ee.struct([Ee.u32("instruction"),Sn("base"),qg("seed"),Ee.ns64("lamports"),Ee.ns64("space"),Sn("programId")])},AdvanceNonceAccount:{index:4,layout:Ee.struct([Ee.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:Ee.struct([Ee.u32("instruction"),Ee.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:Ee.struct([Ee.u32("instruction"),Sn("authorized")])},AuthorizeNonceAccount:{index:7,layout:Ee.struct([Ee.u32("instruction"),Sn("authorized")])},Allocate:{index:8,layout:Ee.struct([Ee.u32("instruction"),Ee.ns64("space")])},AllocateWithSeed:{index:9,layout:Ee.struct([Ee.u32("instruction"),Sn("base"),qg("seed"),Ee.ns64("space"),Sn("programId")])},AssignWithSeed:{index:10,layout:Ee.struct([Ee.u32("instruction"),Sn("base"),qg("seed"),Sn("programId")])},TransferWithSeed:{index:11,layout:Ee.struct([Ee.u32("instruction"),Bx("lamports"),qg("seed"),Sn("programId")])},UpgradeNonceAccount:{index:12,layout:Ee.struct([Ee.u32("instruction")])}});class Ux{constructor(){}static createAccount(e){const n=Na.Create,r=ks(n,{lamports:e.lamports,space:e.space,programId:Di(e.programId.toBuffer())});return new Bi({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}static transfer(e){let n,r;if("basePubkey"in e){const i=Na.TransferWithSeed;n=ks(i,{lamports:BigInt(e.lamports),seed:e.seed,programId:Di(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{const i=Na.Transfer;n=ks(i,{lamports:BigInt(e.lamports)}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new Bi({keys:r,programId:this.programId,data:n})}static assign(e){let n,r;if("basePubkey"in e){const i=Na.AssignWithSeed;n=ks(i,{base:Di(e.basePubkey.toBuffer()),seed:e.seed,programId:Di(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=Na.Assign;n=ks(i,{programId:Di(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new Bi({keys:r,programId:this.programId,data:n})}static createAccountWithSeed(e){const n=Na.CreateWithSeed,r=ks(n,{base:Di(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:Di(e.programId.toBuffer())});let i=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||i.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new Bi({keys:i,programId:this.programId,data:r})}static createNonceAccount(e){const n=new Ga;"basePubkey"in e&&"seed"in e?n.add(Ux.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:aee,programId:this.programId})):n.add(Ux.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:aee,programId:this.programId}));const r={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return n.add(this.nonceInitialize(r)),n}static nonceInitialize(e){const n=Na.InitializeNonceAccount,r=ks(n,{authorized:Di(e.authorizedPubkey.toBuffer())}),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:V4,isSigner:!1,isWritable:!1},{pubkey:see,isSigner:!1,isWritable:!1}],programId:this.programId,data:r};return new Bi(i)}static nonceAdvance(e){const n=Na.AdvanceNonceAccount,r=ks(n),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:V4,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new Bi(i)}static nonceWithdraw(e){const n=Na.WithdrawNonceAccount,r=ks(n,{lamports:e.lamports});return new Bi({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:V4,isSigner:!1,isWritable:!1},{pubkey:see,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static nonceAuthorize(e){const n=Na.AuthorizeNonceAccount,r=ks(n,{authorized:Di(e.newAuthorizedPubkey.toBuffer())});return new Bi({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static allocate(e){let n,r;if("basePubkey"in e){const i=Na.AllocateWithSeed;n=ks(i,{base:Di(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:Di(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=Na.Allocate;n=ks(i,{space:e.space}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new Bi({keys:r,programId:this.programId,data:n})}}Ux.programId=new mt("11111111111111111111111111111111");new mt("BPFLoader2111111111111111111111111111111111");function lht(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var H4,lee;function cht(){if(lee)return H4;lee=1;var t=Object.prototype.toString,e=Object.keys||function(r){var i=[];for(var s in r)i.push(s);return i};function n(r,i){var s,o,a,l,c,u,h;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return n(r.toJSON(),i);if(h=t.call(r),h==="[object Array]"){for(a="[",o=r.length-1,s=0;s<o;s++)a+=n(r[s],!0)+",";return o>-1&&(a+=n(r[s],!0)),a+"]"}else if(h==="[object Object]"){for(l=e(r).sort(),o=l.length,a="",s=0;s<o;)c=l[s],u=n(r[c],!1),u!==void 0&&(a&&(a+=","),a+=JSON.stringify(c)+":"+u),s++;return"{"+a+"}"}else return JSON.stringify(r);case"function":case"undefined":return i?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}return H4=function(r){var i=n(r,!1);if(i!==void 0)return""+i},H4}var uht=cht(),cee=lht(uht);const Fb=32;function q4(t){let e=0;for(;t>1;)t/=2,e++;return e}function dht(t){return t===0?1:(t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t|=t>>32,t+1)}class fht{constructor(e,n,r,i,s){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=n,this.warmup=r,this.firstNormalEpoch=i,this.firstNormalSlot=s}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const n=q4(dht(e+Fb+1))-q4(Fb)-1,r=this.getSlotsInEpoch(n),i=e-(r-Fb);return[n,i]}else{const n=e-this.firstNormalSlot,r=Math.floor(n/this.slotsPerEpoch),i=this.firstNormalEpoch+r,s=n%this.slotsPerEpoch;return[i,s]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*Fb:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+q4(Fb)):this.slotsPerEpoch}}var hht=globalThis.fetch;class pht extends Rft{constructor(e,n,r){const i=s=>{const o=_ft(s,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...n});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(i,e,n,r),this.underlyingSocket=void 0}call(...e){var r;const n=(r=this.underlyingSocket)==null?void 0:r.readyState;return n===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+n+")"))}notify(...e){var r;const n=(r=this.underlyingSocket)==null?void 0:r.readyState;return n===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+n+")"))}}function mht(t,e){let n;try{n=t.layout.decode(e)}catch(r){throw new Error("invalid instruction; "+r)}if(n.typeIndex!==t.index)throw new Error(`invalid account data; account type mismatch ${n.typeIndex} != ${t.index}`);return n}const uee=56;class dee{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const n=mht(ght,e),r=e.length-uee;Wr(r>=0,"lookup table is invalid"),Wr(r%32===0,"lookup table is invalid");const i=r/32,{addresses:s}=Ee.struct([Ee.seq(Sn(),i,"addresses")]).decode(e.slice(uee));return{deactivationSlot:n.deactivationSlot,lastExtendedSlot:n.lastExtendedSlot,lastExtendedSlotStartIndex:n.lastExtendedStartIndex,authority:n.authority.length!==0?new mt(n.authority[0]):void 0,addresses:s.map(o=>new mt(o))}}}const ght={index:1,layout:Ee.struct([Ee.u32("typeIndex"),Bx("deactivationSlot"),Ee.nu64("lastExtendedSlot"),Ee.u8("lastExtendedStartIndex"),Ee.u8(),Ee.seq(Sn(),Ee.offset(Ee.u8(),-1),"authority")])},yht=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function xht(t){const e=t.match(yht);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${t}\``);const[n,r,i,s]=e,o=t.startsWith("https:")?"wss:":"ws:",a=i==null?null:parseInt(i.slice(1),10),l=a==null?"":`:${a+1}`;return`${o}//${r}${l}${s}`}const Br=OE(g7(mt),ht(),t=>new mt(t)),s0e=y7([ht(),Mr("base64")]),b7=OE(g7(cn),s0e,t=>cn.from(t[0],"base64")),vht=30*1e3;function bht(t){if(/^https?:/.test(t)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return t}function dr(t){let e,n;if(typeof t=="string")e=t;else if(t){const{commitment:r,...i}=t;e=r,n=i}return{commitment:e,config:n}}function fee(t){return t.map(e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e)}function o0e(t){return oo([it({jsonrpc:Mr("2.0"),id:ht(),result:t}),it({jsonrpc:Mr("2.0"),id:ht(),error:it({code:Sv(),message:ht(),data:qt(ift())})})])}const wht=o0e(Sv());function hn(t){return OE(o0e(t),wht,e=>"error"in e?e:{...e,result:yt(e.result,t)})}function ti(t){return hn(it({context:it({slot:De()}),value:t}))}function dP(t){return it({context:it({slot:De()}),value:t})}function G4(t,e){return t===0?new x1({header:e.header,staticAccountKeys:e.accountKeys.map(n=>new mt(n)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(n=>({programIdIndex:n.programIdIndex,accountKeyIndexes:n.accounts,data:us.decode(n.data)})),addressTableLookups:e.addressTableLookups}):new Td(e)}const Eht=it({foundation:De(),foundationTerm:De(),initial:De(),taper:De(),terminal:De()}),Sht=hn(wt(Et(it({epoch:De(),effectiveSlot:De(),amount:De(),postBalance:De(),commission:qt(Et(De()))})))),Aht=wt(it({slot:De(),prioritizationFee:De()})),Tht=it({total:De(),validator:De(),foundation:De(),epoch:De()}),kht=it({epoch:De(),slotIndex:De(),slotsInEpoch:De(),absoluteSlot:De(),blockHeight:qt(De()),transactionCount:qt(De())}),Nht=it({slotsPerEpoch:De(),leaderScheduleSlotOffset:De(),warmup:qc(),firstNormalEpoch:De(),firstNormalSlot:De()}),Cht=Ume(ht(),wt(De())),i0=Et(oo([it({}),ht()])),Pht=it({err:i0}),_ht=Mr("receivedSignature"),Iht=it({"solana-core":ht(),"feature-set":qt(De())}),Rht=it({program:ht(),programId:Br,parsed:Sv()}),Oht=it({programId:Br,accounts:wt(Br),data:ht()}),hee=ti(it({err:Et(oo([it({}),ht()])),logs:Et(wt(ht())),accounts:qt(Et(wt(Et(it({executable:qc(),owner:ht(),lamports:De(),data:wt(ht()),rentEpoch:qt(De())}))))),unitsConsumed:qt(De()),returnData:qt(Et(it({programId:ht(),data:y7([ht(),Mr("base64")])}))),innerInstructions:qt(Et(wt(it({index:De(),instructions:wt(oo([Rht,Oht]))}))))})),Mht=ti(it({byIdentity:Ume(ht(),wt(De())),range:it({firstSlot:De(),lastSlot:De()})}));function Lht(t,e,n,r,i,s){const o=n||hht;let a;s!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let l;return r&&(l=async(u,h)=>{const m=await new Promise((g,y)=>{try{r(u,h,(v,b)=>g([v,b]))}catch(v){y(v)}});return await o(...m)}),new Cft(async(u,h)=>{const m={method:"POST",body:u,agent:a,headers:Object.assign({"Content-Type":"application/json"},e||{},Lpt)};try{let g=5,y,v=500;for(;l?y=await l(t,m):y=await o(t,m),!(y.status!==429||i===!0||(g-=1,g===0));)console.error(`Server responded with ${y.status} ${y.statusText}.  Retrying after ${v}ms delay...`),await kg(v),v*=2;const b=await y.text();y.ok?h(null,b):h(new Error(`${y.status} ${y.statusText}: ${b}`))}catch(g){g instanceof Error&&h(g)}},{})}function Dht(t){return(e,n)=>new Promise((r,i)=>{t.request(e,n,(s,o)=>{if(s){i(s);return}r(o)})})}function jht(t){return e=>new Promise((n,r)=>{e.length===0&&n([]);const i=e.map(s=>t.request(s.methodName,s.args));t.request(i,(s,o)=>{if(s){r(s);return}n(o)})})}const Bht=hn(Eht),Uht=hn(Tht),Fht=hn(Aht),$ht=hn(kht),zht=hn(Nht),Vht=hn(Cht),Hht=hn(De()),qht=ti(it({total:De(),circulating:De(),nonCirculating:De(),nonCirculatingAccounts:wt(Br)})),vD=it({amount:ht(),uiAmount:Et(De()),decimals:De(),uiAmountString:qt(ht())}),Ght=ti(wt(it({address:Br,amount:ht(),uiAmount:Et(De()),decimals:De(),uiAmountString:qt(ht())}))),Kht=ti(wt(it({pubkey:Br,account:it({executable:qc(),owner:Br,lamports:De(),data:b7,rentEpoch:De()})}))),bD=it({program:ht(),parsed:Sv(),space:De()}),Wht=ti(wt(it({pubkey:Br,account:it({executable:qc(),owner:Br,lamports:De(),data:bD,rentEpoch:De()})}))),Yht=ti(wt(it({lamports:De(),address:Br}))),v1=it({executable:qc(),owner:Br,lamports:De(),data:b7,rentEpoch:De()}),Jht=it({pubkey:Br,account:v1}),Xht=OE(oo([g7(cn),bD]),oo([s0e,bD]),t=>Array.isArray(t)?yt(t,b7):t),wD=it({executable:qc(),owner:Br,lamports:De(),data:Xht,rentEpoch:De()}),Qht=it({pubkey:Br,account:wD}),Zht=it({state:oo([Mr("active"),Mr("inactive"),Mr("activating"),Mr("deactivating")]),active:De(),inactive:De()}),ept=hn(wt(it({signature:ht(),slot:De(),err:i0,memo:Et(ht()),blockTime:qt(Et(De()))}))),tpt=hn(wt(it({signature:ht(),slot:De(),err:i0,memo:Et(ht()),blockTime:qt(Et(De()))}))),npt=it({subscription:De(),result:dP(v1)}),rpt=it({pubkey:Br,account:v1}),ipt=it({subscription:De(),result:dP(rpt)}),spt=it({parent:De(),slot:De(),root:De()}),opt=it({subscription:De(),result:spt}),apt=oo([it({type:oo([Mr("firstShredReceived"),Mr("completed"),Mr("optimisticConfirmation"),Mr("root")]),slot:De(),timestamp:De()}),it({type:Mr("createdBank"),parent:De(),slot:De(),timestamp:De()}),it({type:Mr("frozen"),slot:De(),timestamp:De(),stats:it({numTransactionEntries:De(),numSuccessfulTransactions:De(),numFailedTransactions:De(),maxTransactionsPerEntry:De()})}),it({type:Mr("dead"),slot:De(),timestamp:De(),err:ht()})]),lpt=it({subscription:De(),result:apt}),cpt=it({subscription:De(),result:dP(oo([Pht,_ht]))}),upt=it({subscription:De(),result:De()}),dpt=it({pubkey:ht(),gossip:Et(ht()),tpu:Et(ht()),rpc:Et(ht()),version:Et(ht())}),pee=it({votePubkey:ht(),nodePubkey:ht(),activatedStake:De(),epochVoteAccount:qc(),epochCredits:wt(y7([De(),De(),De()])),commission:De(),lastVote:De(),rootSlot:Et(De())}),fpt=hn(it({current:wt(pee),delinquent:wt(pee)})),hpt=oo([Mr("processed"),Mr("confirmed"),Mr("finalized")]),ppt=it({slot:De(),confirmations:Et(De()),err:i0,confirmationStatus:qt(hpt)}),mpt=ti(wt(Et(ppt))),gpt=hn(De()),a0e=it({accountKey:Br,writableIndexes:wt(De()),readonlyIndexes:wt(De())}),w7=it({signatures:wt(ht()),message:it({accountKeys:wt(ht()),header:it({numRequiredSignatures:De(),numReadonlySignedAccounts:De(),numReadonlyUnsignedAccounts:De()}),instructions:wt(it({accounts:wt(De()),data:ht(),programIdIndex:De()})),recentBlockhash:ht(),addressTableLookups:qt(wt(a0e))})}),l0e=it({pubkey:Br,signer:qc(),writable:qc(),source:qt(oo([Mr("transaction"),Mr("lookupTable")]))}),c0e=it({accountKeys:wt(l0e),signatures:wt(ht())}),u0e=it({parsed:Sv(),program:ht(),programId:Br}),d0e=it({accounts:wt(Br),data:ht(),programId:Br}),ypt=oo([d0e,u0e]),xpt=oo([it({parsed:Sv(),program:ht(),programId:ht()}),it({accounts:wt(ht()),data:ht(),programId:ht()})]),f0e=OE(ypt,xpt,t=>"accounts"in t?yt(t,d0e):yt(t,u0e)),h0e=it({signatures:wt(ht()),message:it({accountKeys:wt(l0e),instructions:wt(f0e),recentBlockhash:ht(),addressTableLookups:qt(Et(wt(a0e)))})}),Q2=it({accountIndex:De(),mint:ht(),owner:qt(ht()),programId:qt(ht()),uiTokenAmount:vD}),p0e=it({writable:wt(Br),readonly:wt(Br)}),fP=it({err:i0,fee:De(),innerInstructions:qt(Et(wt(it({index:De(),instructions:wt(it({accounts:wt(De()),data:ht(),programIdIndex:De()}))})))),preBalances:wt(De()),postBalances:wt(De()),logMessages:qt(Et(wt(ht()))),preTokenBalances:qt(Et(wt(Q2))),postTokenBalances:qt(Et(wt(Q2))),loadedAddresses:qt(p0e),computeUnitsConsumed:qt(De()),costUnits:qt(De())}),E7=it({err:i0,fee:De(),innerInstructions:qt(Et(wt(it({index:De(),instructions:wt(f0e)})))),preBalances:wt(De()),postBalances:wt(De()),logMessages:qt(Et(wt(ht()))),preTokenBalances:qt(Et(wt(Q2))),postTokenBalances:qt(Et(wt(Q2))),loadedAddresses:qt(p0e),computeUnitsConsumed:qt(De()),costUnits:qt(De())}),Av=oo([Mr(0),Mr("legacy")]),s0=it({pubkey:ht(),lamports:De(),postBalance:Et(De()),rewardType:Et(ht()),commission:qt(Et(De()))}),vpt=hn(Et(it({blockhash:ht(),previousBlockhash:ht(),parentSlot:De(),transactions:wt(it({transaction:w7,meta:Et(fP),version:qt(Av)})),rewards:qt(wt(s0)),blockTime:Et(De()),blockHeight:Et(De())}))),bpt=hn(Et(it({blockhash:ht(),previousBlockhash:ht(),parentSlot:De(),rewards:qt(wt(s0)),blockTime:Et(De()),blockHeight:Et(De())}))),wpt=hn(Et(it({blockhash:ht(),previousBlockhash:ht(),parentSlot:De(),transactions:wt(it({transaction:c0e,meta:Et(fP),version:qt(Av)})),rewards:qt(wt(s0)),blockTime:Et(De()),blockHeight:Et(De())}))),Ept=hn(Et(it({blockhash:ht(),previousBlockhash:ht(),parentSlot:De(),transactions:wt(it({transaction:h0e,meta:Et(E7),version:qt(Av)})),rewards:qt(wt(s0)),blockTime:Et(De()),blockHeight:Et(De())}))),Spt=hn(Et(it({blockhash:ht(),previousBlockhash:ht(),parentSlot:De(),transactions:wt(it({transaction:c0e,meta:Et(E7),version:qt(Av)})),rewards:qt(wt(s0)),blockTime:Et(De()),blockHeight:Et(De())}))),Apt=hn(Et(it({blockhash:ht(),previousBlockhash:ht(),parentSlot:De(),rewards:qt(wt(s0)),blockTime:Et(De()),blockHeight:Et(De())}))),Tpt=hn(Et(it({blockhash:ht(),previousBlockhash:ht(),parentSlot:De(),transactions:wt(it({transaction:w7,meta:Et(fP)})),rewards:qt(wt(s0)),blockTime:Et(De())}))),mee=hn(Et(it({blockhash:ht(),previousBlockhash:ht(),parentSlot:De(),signatures:wt(ht()),blockTime:Et(De())}))),K4=hn(Et(it({slot:De(),meta:Et(fP),blockTime:qt(Et(De())),transaction:w7,version:qt(Av)}))),iT=hn(Et(it({slot:De(),transaction:h0e,meta:Et(E7),blockTime:qt(Et(De())),version:qt(Av)}))),kpt=ti(it({blockhash:ht(),lastValidBlockHeight:De()})),Npt=ti(qc()),Cpt=it({slot:De(),numTransactions:De(),numSlots:De(),samplePeriodSecs:De()}),Ppt=hn(wt(Cpt)),_pt=ti(Et(it({feeCalculator:it({lamportsPerSignature:De()})}))),Ipt=hn(ht()),Rpt=hn(ht()),Opt=it({err:i0,logs:wt(ht()),signature:ht()}),Mpt=it({result:dP(Opt),subscription:De()}),Lpt={"solana-client":"js/1.0.0-maintenance"};class S7{constructor(e,n){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const c={};return async u=>{const{commitment:h,config:m}=dr(u),g=this._buildArgs([],h,void 0,m),y=cee(g);return c[y]=c[y]??(async()=>{try{const v=await this._rpcRequest("getBlockHeight",g),b=yt(v,hn(De()));if("error"in b)throw new Ut(b.error,"failed to get block height information");return b.result}finally{delete c[y]}})(),await c[y]}})();let r,i,s,o,a,l;n&&typeof n=="string"?this._commitment=n:n&&(this._commitment=n.commitment,this._confirmTransactionInitialTimeout=n.confirmTransactionInitialTimeout,r=n.wsEndpoint,i=n.httpHeaders,s=n.fetch,o=n.fetchMiddleware,a=n.disableRetryOnRateLimit,l=n.httpAgent),this._rpcEndpoint=bht(e),this._rpcWsEndpoint=r||xht(e),this._rpcClient=Lht(e,i,s,o,a,l),this._rpcRequest=Dht(this._rpcClient),this._rpcBatchRequest=jht(this._rpcClient),this._rpcWebSocket=new pht(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,n){const{commitment:r,config:i}=dr(n),s=this._buildArgs([e.toBase58()],r,void 0,i),o=await this._rpcRequest("getBalance",s),a=yt(o,ti(De()));if("error"in a)throw new Ut(a.error,`failed to get balance for ${e.toBase58()}`);return a.result}async getBalance(e,n){return await this.getBalanceAndContext(e,n).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+r)})}async getBlockTime(e){const n=await this._rpcRequest("getBlockTime",[e]),r=yt(n,hn(Et(De())));if("error"in r)throw new Ut(r.error,`failed to get block time for slot ${e}`);return r.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),n=yt(e,hn(De()));if("error"in n)throw new Ut(n.error,"failed to get minimum ledger slot");return n.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),n=yt(e,Hht);if("error"in n)throw new Ut(n.error,"failed to get first available block");return n.result}async getSupply(e){let n={};typeof e=="string"?n={commitment:e}:e?n={...e,commitment:e&&e.commitment||this.commitment}:n={commitment:this.commitment};const r=await this._rpcRequest("getSupply",[n]),i=yt(r,qht);if("error"in i)throw new Ut(i.error,"failed to get supply");return i.result}async getTokenSupply(e,n){const r=this._buildArgs([e.toBase58()],n),i=await this._rpcRequest("getTokenSupply",r),s=yt(i,ti(vD));if("error"in s)throw new Ut(s.error,"failed to get token supply");return s.result}async getTokenAccountBalance(e,n){const r=this._buildArgs([e.toBase58()],n),i=await this._rpcRequest("getTokenAccountBalance",r),s=yt(i,ti(vD));if("error"in s)throw new Ut(s.error,"failed to get token account balance");return s.result}async getTokenAccountsByOwner(e,n,r){const{commitment:i,config:s}=dr(r);let o=[e.toBase58()];"mint"in n?o.push({mint:n.mint.toBase58()}):o.push({programId:n.programId.toBase58()});const a=this._buildArgs(o,i,"base64",s),l=await this._rpcRequest("getTokenAccountsByOwner",a),c=yt(l,Kht);if("error"in c)throw new Ut(c.error,`failed to get token accounts owned by account ${e.toBase58()}`);return c.result}async getParsedTokenAccountsByOwner(e,n,r){let i=[e.toBase58()];"mint"in n?i.push({mint:n.mint.toBase58()}):i.push({programId:n.programId.toBase58()});const s=this._buildArgs(i,r,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",s),a=yt(o,Wht);if("error"in a)throw new Ut(a.error,`failed to get token accounts owned by account ${e.toBase58()}`);return a.result}async getLargestAccounts(e){const n={...e,commitment:e&&e.commitment||this.commitment},r=n.filter||n.commitment?[n]:[],i=await this._rpcRequest("getLargestAccounts",r),s=yt(i,Yht);if("error"in s)throw new Ut(s.error,"failed to get largest accounts");return s.result}async getTokenLargestAccounts(e,n){const r=this._buildArgs([e.toBase58()],n),i=await this._rpcRequest("getTokenLargestAccounts",r),s=yt(i,Ght);if("error"in s)throw new Ut(s.error,"failed to get token largest accounts");return s.result}async getAccountInfoAndContext(e,n){const{commitment:r,config:i}=dr(n),s=this._buildArgs([e.toBase58()],r,"base64",i),o=await this._rpcRequest("getAccountInfo",s),a=yt(o,ti(Et(v1)));if("error"in a)throw new Ut(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getParsedAccountInfo(e,n){const{commitment:r,config:i}=dr(n),s=this._buildArgs([e.toBase58()],r,"jsonParsed",i),o=await this._rpcRequest("getAccountInfo",s),a=yt(o,ti(Et(wD)));if("error"in a)throw new Ut(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getAccountInfo(e,n){try{return(await this.getAccountInfoAndContext(e,n)).value}catch(r){throw new Error("failed to get info about account "+e.toBase58()+": "+r)}}async getMultipleParsedAccounts(e,n){const{commitment:r,config:i}=dr(n),s=e.map(c=>c.toBase58()),o=this._buildArgs([s],r,"jsonParsed",i),a=await this._rpcRequest("getMultipleAccounts",o),l=yt(a,ti(wt(Et(wD))));if("error"in l)throw new Ut(l.error,`failed to get info for accounts ${s}`);return l.result}async getMultipleAccountsInfoAndContext(e,n){const{commitment:r,config:i}=dr(n),s=e.map(c=>c.toBase58()),o=this._buildArgs([s],r,"base64",i),a=await this._rpcRequest("getMultipleAccounts",o),l=yt(a,ti(wt(Et(v1))));if("error"in l)throw new Ut(l.error,`failed to get info for accounts ${s}`);return l.result}async getMultipleAccountsInfo(e,n){return(await this.getMultipleAccountsInfoAndContext(e,n)).value}async getStakeActivation(e,n,r){const{commitment:i,config:s}=dr(n),o=this._buildArgs([e.toBase58()],i,void 0,{...s,epoch:r??(s==null?void 0:s.epoch)}),a=await this._rpcRequest("getStakeActivation",o),l=yt(a,hn(Zht));if("error"in l)throw new Ut(l.error,`failed to get Stake Activation ${e.toBase58()}`);return l.result}async getProgramAccounts(e,n){const{commitment:r,config:i}=dr(n),{encoding:s,...o}=i||{},a=this._buildArgs([e.toBase58()],r,s||"base64",{...o,...o.filters?{filters:fee(o.filters)}:null}),l=await this._rpcRequest("getProgramAccounts",a),c=wt(Jht),u=o.withContext===!0?yt(l,ti(c)):yt(l,hn(c));if("error"in u)throw new Ut(u.error,`failed to get accounts owned by program ${e.toBase58()}`);return u.result}async getParsedProgramAccounts(e,n){const{commitment:r,config:i}=dr(n),s=this._buildArgs([e.toBase58()],r,"jsonParsed",i),o=await this._rpcRequest("getProgramAccounts",s),a=yt(o,hn(wt(Qht)));if("error"in a)throw new Ut(a.error,`failed to get accounts owned by program ${e.toBase58()}`);return a.result}async confirmTransaction(e,n){var s;let r;if(typeof e=="string")r=e;else{const o=e;if((s=o.abortSignal)!=null&&s.aborted)return Promise.reject(o.abortSignal.reason);r=o.signature}let i;try{i=us.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return Wr(i.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:n||this.commitment,signature:r}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:n||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:n||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((n,r)=>{e!=null&&(e.aborted?r(e.reason):e.addEventListener("abort",()=>{r(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:n}){let r,i,s=!1;const o=new Promise((l,c)=>{try{r=this.onSignature(n,(h,m)=>{r=void 0;const g={context:m,value:h};l({__type:Sf.PROCESSED,response:g})},e);const u=new Promise(h=>{r==null?h():i=this._onSubscriptionStateChange(r,m=>{m==="subscribed"&&h()})});(async()=>{if(await u,s)return;const h=await this.getSignatureStatus(n);if(s||h==null)return;const{context:m,value:g}=h;if(g!=null)if(g!=null&&g.err)c(g.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(g.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(g.confirmationStatus==="processed"||g.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}s=!0,l({__type:Sf.PROCESSED,response:{context:m,value:g}})}})()}catch(u){c(u)}});return{abortConfirmation:()=>{i&&(i(),i=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:n,lastValidBlockHeight:r,signature:i}}){let s=!1;const o=new Promise(h=>{const m=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let g=await m();if(!s){for(;g<=r;)if(await kg(1e3),s||(g=await m(),s))return;h({__type:Sf.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:a,confirmationPromise:l}=this.getTransactionConfirmationPromise({commitment:e,signature:i}),c=this.getCancellationPromise(n);let u;try{const h=await Promise.race([c,l,o]);if(h.__type===Sf.PROCESSED)u=h.response;else throw new Zme(i)}finally{s=!0,a()}return u}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:n,minContextSlot:r,nonceAccountPubkey:i,nonceValue:s,signature:o}}){let a=!1;const l=new Promise(g=>{let y=s,v=null;const b=async()=>{try{const{context:w,value:k}=await this.getNonceAndContext(i,{commitment:e,minContextSlot:r});return v=w.slot,k==null?void 0:k.nonce}catch{return y}};(async()=>{if(y=await b(),!a)for(;;){if(s!==y){g({__type:Sf.NONCE_INVALID,slotInWhichNonceDidAdvance:v});return}if(await kg(2e3),a||(y=await b(),a))return}})()}),{abortConfirmation:c,confirmationPromise:u}=this.getTransactionConfirmationPromise({commitment:e,signature:o}),h=this.getCancellationPromise(n);let m;try{const g=await Promise.race([h,u,l]);if(g.__type===Sf.PROCESSED)m=g.response;else{let y;for(;;){const v=await this.getSignatureStatus(o);if(v==null)break;if(v.context.slot<(g.slotInWhichNonceDidAdvance??r)){await kg(400);continue}y=v;break}if(y!=null&&y.value){const v=e||"finalized",{confirmationStatus:b}=y.value;switch(v){case"processed":case"recent":if(b!=="processed"&&b!=="confirmed"&&b!=="finalized")throw new nw(o);break;case"confirmed":case"single":case"singleGossip":if(b!=="confirmed"&&b!=="finalized")throw new nw(o);break;case"finalized":case"max":case"root":if(b!=="finalized")throw new nw(o);break;default:}m={context:y.context,value:{err:y.value.err}}}else throw new nw(o)}}finally{a=!0,c()}return m}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:n}){let r;const i=new Promise(l=>{let c=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{c=this._confirmTransactionInitialTimeout||3e4;break}}r=setTimeout(()=>l({__type:Sf.TIMED_OUT,timeoutMs:c}),c)}),{abortConfirmation:s,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:e,signature:n});let a;try{const l=await Promise.race([o,i]);if(l.__type===Sf.PROCESSED)a=l.response;else throw new e0e(n,l.timeoutMs/1e3)}finally{clearTimeout(r),s()}return a}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),n=yt(e,hn(wt(dpt)));if("error"in n)throw new Ut(n.error,"failed to get cluster nodes");return n.result}async getVoteAccounts(e){const n=this._buildArgs([],e),r=await this._rpcRequest("getVoteAccounts",n),i=yt(r,fpt);if("error"in i)throw new Ut(i.error,"failed to get vote accounts");return i.result}async getSlot(e){const{commitment:n,config:r}=dr(e),i=this._buildArgs([],n,void 0,r),s=await this._rpcRequest("getSlot",i),o=yt(s,hn(De()));if("error"in o)throw new Ut(o.error,"failed to get slot");return o.result}async getSlotLeader(e){const{commitment:n,config:r}=dr(e),i=this._buildArgs([],n,void 0,r),s=await this._rpcRequest("getSlotLeader",i),o=yt(s,hn(ht()));if("error"in o)throw new Ut(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(e,n){const r=[e,n],i=await this._rpcRequest("getSlotLeaders",r),s=yt(i,hn(wt(Br)));if("error"in s)throw new Ut(s.error,"failed to get slot leaders");return s.result}async getSignatureStatus(e,n){const{context:r,value:i}=await this.getSignatureStatuses([e],n);Wr(i.length===1);const s=i[0];return{context:r,value:s}}async getSignatureStatuses(e,n){const r=[e];n&&r.push(n);const i=await this._rpcRequest("getSignatureStatuses",r),s=yt(i,mpt);if("error"in s)throw new Ut(s.error,"failed to get signature status");return s.result}async getTransactionCount(e){const{commitment:n,config:r}=dr(e),i=this._buildArgs([],n,void 0,r),s=await this._rpcRequest("getTransactionCount",i),o=yt(s,hn(De()));if("error"in o)throw new Ut(o.error,"failed to get transaction count");return o.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const n=this._buildArgs([],e),r=await this._rpcRequest("getInflationGovernor",n),i=yt(r,Bht);if("error"in i)throw new Ut(i.error,"failed to get inflation");return i.result}async getInflationReward(e,n,r){const{commitment:i,config:s}=dr(r),o=this._buildArgs([e.map(c=>c.toBase58())],i,void 0,{...s,epoch:n??(s==null?void 0:s.epoch)}),a=await this._rpcRequest("getInflationReward",o),l=yt(a,Sht);if("error"in l)throw new Ut(l.error,"failed to get inflation reward");return l.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),n=yt(e,Uht);if("error"in n)throw new Ut(n.error,"failed to get inflation rate");return n.result}async getEpochInfo(e){const{commitment:n,config:r}=dr(e),i=this._buildArgs([],n,void 0,r),s=await this._rpcRequest("getEpochInfo",i),o=yt(s,$ht);if("error"in o)throw new Ut(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),n=yt(e,zht);if("error"in n)throw new Ut(n.error,"failed to get epoch schedule");const r=n.result;return new fht(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),n=yt(e,Vht);if("error"in n)throw new Ut(n.error,"failed to get leader schedule");return n.result}async getMinimumBalanceForRentExemption(e,n){const r=this._buildArgs([e],n),i=await this._rpcRequest("getMinimumBalanceForRentExemption",r),s=yt(i,gpt);return"error"in s?(console.warn("Unable to fetch minimum balance for rent exemption"),0):s.result}async getRecentBlockhashAndContext(e){const{context:n,value:{blockhash:r}}=await this.getLatestBlockhashAndContext(e);return{context:n,value:{blockhash:r,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(e){const n=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),r=yt(n,Ppt);if("error"in r)throw new Ut(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(e,n){const r=this._buildArgs([e],n),i=await this._rpcRequest("getFeeCalculatorForBlockhash",r),s=yt(i,_pt);if("error"in s)throw new Ut(s.error,"failed to get fee calculator");const{context:o,value:a}=s.result;return{context:o,value:a!==null?a.feeCalculator:null}}async getFeeForMessage(e,n){const r=Di(e.serialize()).toString("base64"),i=this._buildArgs([r],n),s=await this._rpcRequest("getFeeForMessage",i),o=yt(s,ti(Et(De())));if("error"in o)throw new Ut(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(e){var o;const n=(o=e==null?void 0:e.lockedWritableAccounts)==null?void 0:o.map(a=>a.toBase58()),r=n!=null&&n.length?[n]:[],i=await this._rpcRequest("getRecentPrioritizationFees",r),s=yt(i,Fht);if("error"in s)throw new Ut(s.error,"failed to get recent prioritization fees");return s.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(n){throw new Error("failed to get recent blockhash: "+n)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(n){throw new Error("failed to get recent blockhash: "+n)}}async getLatestBlockhashAndContext(e){const{commitment:n,config:r}=dr(e),i=this._buildArgs([],n,void 0,r),s=await this._rpcRequest("getLatestBlockhash",i),o=yt(s,kpt);if("error"in o)throw new Ut(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(e,n){const{commitment:r,config:i}=dr(n),s=this._buildArgs([e],r,void 0,i),o=await this._rpcRequest("isBlockhashValid",s),a=yt(o,Npt);if("error"in a)throw new Ut(a.error,"failed to determine if the blockhash `"+e+"`is valid");return a.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),n=yt(e,hn(Iht));if("error"in n)throw new Ut(n.error,"failed to get version");return n.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),n=yt(e,hn(ht()));if("error"in n)throw new Ut(n.error,"failed to get genesis hash");return n.result}async getBlock(e,n){const{commitment:r,config:i}=dr(n),s=this._buildArgsAtLeastConfirmed([e],r,void 0,i),o=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const a=yt(o,wpt);if("error"in a)throw a.error;return a.result}case"none":{const a=yt(o,bpt);if("error"in a)throw a.error;return a.result}default:{const a=yt(o,vpt);if("error"in a)throw a.error;const{result:l}=a;return l?{...l,transactions:l.transactions.map(({transaction:c,meta:u,version:h})=>({meta:u,transaction:{...c,message:G4(h,c.message)},version:h}))}:null}}}catch(a){throw new Ut(a,"failed to get confirmed block")}}async getParsedBlock(e,n){const{commitment:r,config:i}=dr(n),s=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",i),o=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const a=yt(o,Spt);if("error"in a)throw a.error;return a.result}case"none":{const a=yt(o,Apt);if("error"in a)throw a.error;return a.result}default:{const a=yt(o,Ept);if("error"in a)throw a.error;return a.result}}}catch(a){throw new Ut(a,"failed to get block")}}async getBlockProduction(e){let n,r;if(typeof e=="string")r=e;else if(e){const{commitment:a,...l}=e;r=a,n=l}const i=this._buildArgs([],r,"base64",n),s=await this._rpcRequest("getBlockProduction",i),o=yt(s,Mht);if("error"in o)throw new Ut(o.error,"failed to get block production information");return o.result}async getTransaction(e,n){const{commitment:r,config:i}=dr(n),s=this._buildArgsAtLeastConfirmed([e],r,void 0,i),o=await this._rpcRequest("getTransaction",s),a=yt(o,K4);if("error"in a)throw new Ut(a.error,"failed to get transaction");const l=a.result;return l&&{...l,transaction:{...l.transaction,message:G4(l.version,l.transaction.message)}}}async getParsedTransaction(e,n){const{commitment:r,config:i}=dr(n),s=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",i),o=await this._rpcRequest("getTransaction",s),a=yt(o,iT);if("error"in a)throw new Ut(a.error,"failed to get transaction");return a.result}async getParsedTransactions(e,n){const{commitment:r,config:i}=dr(n),s=e.map(l=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([l],r,"jsonParsed",i)}));return(await this._rpcBatchRequest(s)).map(l=>{const c=yt(l,iT);if("error"in c)throw new Ut(c.error,"failed to get transactions");return c.result})}async getTransactions(e,n){const{commitment:r,config:i}=dr(n),s=e.map(l=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([l],r,void 0,i)}));return(await this._rpcBatchRequest(s)).map(l=>{const c=yt(l,K4);if("error"in c)throw new Ut(c.error,"failed to get transactions");const u=c.result;return u&&{...u,transaction:{...u.transaction,message:G4(u.version,u.transaction.message)}}})}async getConfirmedBlock(e,n){const r=this._buildArgsAtLeastConfirmed([e],n),i=await this._rpcRequest("getBlock",r),s=yt(i,Tpt);if("error"in s)throw new Ut(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+e+" not found");const a={...o,transactions:o.transactions.map(({transaction:l,meta:c})=>{const u=new Td(l.message);return{meta:c,transaction:{...l,message:u}}})};return{...a,transactions:a.transactions.map(({transaction:l,meta:c})=>({meta:c,transaction:Ga.populate(l.message,l.signatures)}))}}async getBlocks(e,n,r){const i=this._buildArgsAtLeastConfirmed(n!==void 0?[e,n]:[e],r),s=await this._rpcRequest("getBlocks",i),o=yt(s,hn(wt(De())));if("error"in o)throw new Ut(o.error,"failed to get blocks");return o.result}async getBlockSignatures(e,n){const r=this._buildArgsAtLeastConfirmed([e],n,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",r),s=yt(i,mee);if("error"in s)throw new Ut(s.error,"failed to get block");const o=s.result;if(!o)throw new Error("Block "+e+" not found");return o}async getConfirmedBlockSignatures(e,n){const r=this._buildArgsAtLeastConfirmed([e],n,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",r),s=yt(i,mee);if("error"in s)throw new Ut(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+e+" not found");return o}async getConfirmedTransaction(e,n){const r=this._buildArgsAtLeastConfirmed([e],n),i=await this._rpcRequest("getTransaction",r),s=yt(i,K4);if("error"in s)throw new Ut(s.error,"failed to get transaction");const o=s.result;if(!o)return o;const a=new Td(o.transaction.message),l=o.transaction.signatures;return{...o,transaction:Ga.populate(a,l)}}async getParsedConfirmedTransaction(e,n){const r=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed"),i=await this._rpcRequest("getTransaction",r),s=yt(i,iT);if("error"in s)throw new Ut(s.error,"failed to get confirmed transaction");return s.result}async getParsedConfirmedTransactions(e,n){const r=e.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],n,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(o=>{const a=yt(o,iT);if("error"in a)throw new Ut(a.error,"failed to get confirmed transactions");return a.result})}async getConfirmedSignaturesForAddress(e,n,r){let i={},s=await this.getFirstAvailableBlock();for(;!("until"in i)&&(n--,!(n<=0||n<s));)try{const l=await this.getConfirmedBlockSignatures(n,"finalized");l.signatures.length>0&&(i.until=l.signatures[l.signatures.length-1].toString())}catch(l){if(l instanceof Error&&l.message.includes("skipped"))continue;throw l}let o=await this.getSlot("finalized");for(;!("before"in i)&&(r++,!(r>o));)try{const l=await this.getConfirmedBlockSignatures(r);l.signatures.length>0&&(i.before=l.signatures[l.signatures.length-1].toString())}catch(l){if(l instanceof Error&&l.message.includes("skipped"))continue;throw l}return(await this.getConfirmedSignaturesForAddress2(e,i)).map(l=>l.signature)}async getConfirmedSignaturesForAddress2(e,n,r){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,n),s=await this._rpcRequest("getConfirmedSignaturesForAddress2",i),o=yt(s,ept);if("error"in o)throw new Ut(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(e,n,r){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,n),s=await this._rpcRequest("getSignaturesForAddress",i),o=yt(s,tpt);if("error"in o)throw new Ut(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(e,n){const{context:r,value:i}=await this.getAccountInfoAndContext(e,n);let s=null;return i!==null&&(s=new dee({key:e,state:dee.deserialize(i.data)})),{context:r,value:s}}async getNonceAndContext(e,n){const{context:r,value:i}=await this.getAccountInfoAndContext(e,n);let s=null;return i!==null&&(s=v7.fromAccountData(i.data)),{context:r,value:s}}async getNonce(e,n){return await this.getNonceAndContext(e,n).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+r)})}async requestAirdrop(e,n){const r=await this._rpcRequest("requestAirdrop",[e.toBase58(),n]),i=yt(r,Ipt);if("error"in i)throw new Ut(i.error,`airdrop to ${e.toBase58()} failed`);return i.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await kg(100);const r=Date.now()-this._blockhashInfo.lastFetch>=vht;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),n=this._blockhashInfo.latestBlockhash,r=n?n.blockhash:null;for(let i=0;i<50;i++){const s=await this.getLatestBlockhash("finalized");if(r!==s.blockhash)return this._blockhashInfo={latestBlockhash:s,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},s;await kg(oht/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:n,config:r}=dr(e),i=this._buildArgs([],n,"base64",r),s=await this._rpcRequest("getStakeMinimumDelegation",i),o=yt(s,ti(De()));if("error"in o)throw new Ut(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(e,n,r){if("message"in e){const v=e.serialize(),b=cn.from(v).toString("base64");if(Array.isArray(n)||r!==void 0)throw new Error("Invalid arguments");const w=n||{};w.encoding="base64","commitment"in w||(w.commitment=this.commitment),n&&typeof n=="object"&&"innerInstructions"in n&&(w.innerInstructions=n.innerInstructions);const k=[b,w],N=await this._rpcRequest("simulateTransaction",k),R=yt(N,hee);if("error"in R)throw new Error("failed to simulate transaction: "+R.error.message);return R.result}let i;if(e instanceof Ga){let y=e;i=new Ga,i.feePayer=y.feePayer,i.instructions=e.instructions,i.nonceInfo=y.nonceInfo,i.signatures=y.signatures}else i=Ga.populate(e),i._message=i._json=void 0;if(n!==void 0&&!Array.isArray(n))throw new Error("Invalid arguments");const s=n;if(i.nonceInfo&&s)i.sign(...s);else{let y=this._disableBlockhashCaching;for(;;){const v=await this._blockhashWithExpiryBlockHeight(y);if(i.lastValidBlockHeight=v.lastValidBlockHeight,i.recentBlockhash=v.blockhash,!s)break;if(i.sign(...s),!i.signature)throw new Error("!signature");const b=i.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(b)&&!this._blockhashInfo.transactionSignatures.includes(b)){this._blockhashInfo.simulatedSignatures.push(b);break}else y=!0}}const o=i._compile(),a=o.serialize(),c=i._serialize(a).toString("base64"),u={encoding:"base64",commitment:this.commitment};if(r){const y=(Array.isArray(r)?r:o.nonProgramIds()).map(v=>v.toBase58());u.accounts={encoding:"base64",addresses:y}}s&&(u.sigVerify=!0),n&&typeof n=="object"&&"innerInstructions"in n&&(u.innerInstructions=n.innerInstructions);const h=[c,u],m=await this._rpcRequest("simulateTransaction",h),g=yt(m,hee);if("error"in g){let y;if("data"in g.error&&(y=g.error.data.logs,y&&Array.isArray(y))){const v=`
    `,b=v+y.join(v);console.error(g.error.message,b)}throw new oee({action:"simulate",signature:"",transactionMessage:g.error.message,logs:y})}return g.result}async sendTransaction(e,n,r){if("version"in e){if(n&&Array.isArray(n))throw new Error("Invalid arguments");const o=e.serialize();return await this.sendRawTransaction(o,n)}if(n===void 0||!Array.isArray(n))throw new Error("Invalid arguments");const i=n;if(e.nonceInfo)e.sign(...i);else{let o=this._disableBlockhashCaching;for(;;){const a=await this._blockhashWithExpiryBlockHeight(o);if(e.lastValidBlockHeight=a.lastValidBlockHeight,e.recentBlockhash=a.blockhash,e.sign(...i),!e.signature)throw new Error("!signature");const l=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(l))o=!0;else{this._blockhashInfo.transactionSignatures.push(l);break}}}const s=e.serialize();return await this.sendRawTransaction(s,r)}async sendRawTransaction(e,n){const r=Di(e).toString("base64");return await this.sendEncodedTransaction(r,n)}async sendEncodedTransaction(e,n){const r={encoding:"base64"},i=n&&n.skipPreflight,s=i===!0?"processed":n&&n.preflightCommitment||this.commitment;n&&n.maxRetries!=null&&(r.maxRetries=n.maxRetries),n&&n.minContextSlot!=null&&(r.minContextSlot=n.minContextSlot),i&&(r.skipPreflight=i),s&&(r.preflightCommitment=s);const o=[e,r],a=await this._rpcRequest("sendTransaction",o),l=yt(a,Rpt);if("error"in l){let c;throw"data"in l.error&&(c=l.error.data.logs),new oee({action:i?"send":"simulate",signature:"",transactionMessage:l.error.message,logs:c})}return l.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([n,r])=>{this._setSubscription(n,{...r,state:"pending"})})}_setSubscription(e,n){var i;const r=(i=this._subscriptionsByHash[e])==null?void 0:i.state;if(this._subscriptionsByHash[e]=n,r!==n.state){const s=this._subscriptionStateChangeCallbacksByHash[e];s&&s.forEach(o=>{try{o(n.state)}catch{}})}}_onSubscriptionStateChange(e,n){var s;const r=this._subscriptionHashByClientSubscriptionId[e];if(r==null)return()=>{};const i=(s=this._subscriptionStateChangeCallbacksByHash)[r]||(s[r]=new Set);return i.add(n),()=>{i.delete(n),i.size===0&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const e=this._rpcWebSocketGeneration,n=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{const i=this._subscriptionsByHash[r];if(i!==void 0)switch(i.state){case"pending":case"unsubscribed":if(i.callbacks.size===0){delete this._subscriptionsByHash[r],i.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[i.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:s,method:o}=i;try{this._setSubscription(r,{...i,state:"subscribing"});const a=await this._rpcWebSocket.call(o,s);this._setSubscription(r,{...i,serverSubscriptionId:a,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[a]=i.callbacks,await this._updateSubscriptions()}catch(a){if(console.error(`Received ${a instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:s,error:a}),!n())return;this._setSubscription(r,{...i,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":i.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:s,unsubscribeMethod:o}=i;if(this._subscriptionsAutoDisposedByRpc.has(s))this._subscriptionsAutoDisposedByRpc.delete(s);else{this._setSubscription(r,{...i,state:"unsubscribing"}),this._setSubscription(r,{...i,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[s])}catch(a){if(a instanceof Error&&console.error(`${o} error:`,a.message),!n())return;this._setSubscription(r,{...i,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(r,{...i,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,n){const r=this._subscriptionCallbacksByServerSubscriptionId[e];r!==void 0&&r.forEach(i=>{try{i(...n)}catch(s){console.error(s)}})}_wsOnAccountNotification(e){const{result:n,subscription:r}=yt(e,npt);this._handleServerNotification(r,[n.value,n.context])}_makeSubscription(e,n){const r=this._nextClientSubscriptionId++,i=cee([e.method,n]),s=this._subscriptionsByHash[i];return s===void 0?this._subscriptionsByHash[i]={...e,args:n,callbacks:new Set([e.callback]),state:"pending"}:s.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[r]=i,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const o=this._subscriptionsByHash[i];Wr(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),o.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(e,n,r){const{commitment:i,config:s}=dr(r),o=this._buildArgs([e.toBase58()],i||this._commitment||"finalized","base64",s);return this._makeSubscription({callback:n,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:n,subscription:r}=yt(e,ipt);this._handleServerNotification(r,[{accountId:n.value.pubkey,accountInfo:n.value.account},n.context])}onProgramAccountChange(e,n,r,i){const{commitment:s,config:o}=dr(r),a=this._buildArgs([e.toBase58()],s||this._commitment||"finalized","base64",o||(i?{filters:fee(i)}:void 0));return this._makeSubscription({callback:n,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},a)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,n,r){const i=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],r||this._commitment||"finalized");return this._makeSubscription({callback:n,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},i)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:n,subscription:r}=yt(e,Mpt);this._handleServerNotification(r,[n.value,n.context])}_wsOnSlotNotification(e){const{result:n,subscription:r}=yt(e,opt);this._handleServerNotification(r,[n])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:n,subscription:r}=yt(e,lpt);this._handleServerNotification(r,[n])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,n){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${n}' events could not be found.`)}_buildArgs(e,n,r,i){const s=n||this._commitment;if(s||r||i){let o={};r&&(o.encoding=r),s&&(o.commitment=s),i&&(o=Object.assign(o,i)),e.push(o)}return e}_buildArgsAtLeastConfirmed(e,n,r,i){const s=n||this._commitment;if(s&&!["confirmed","finalized"].includes(s))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,n,r,i)}_wsOnSignatureNotification(e){const{result:n,subscription:r}=yt(e,cpt);n.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,n.value==="receivedSignature"?[{type:"received"},n.context]:[{type:"status",result:n.value},n.context])}onSignature(e,n,r){const i=this._buildArgs([e],r||this._commitment||"finalized"),s=this._makeSubscription({callback:(o,a)=>{if(o.type==="status"){n(o.result,a);try{this.removeSignatureListener(s)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return s}onSignatureWithOptions(e,n,r){const{commitment:i,...s}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},o=this._buildArgs([e],i,void 0,s),a=this._makeSubscription({callback:(l,c)=>{n(l,c);try{this.removeSignatureListener(a)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return a}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:n,subscription:r}=yt(e,upt);this._handleServerNotification(r,[n])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}class oa{constructor(e){this._keypair=void 0,this._keypair=e??nee()}static generate(){return new oa(nee())}static fromSecretKey(e,n){if(e.byteLength!==64)throw new Error("bad secret key size");const r=e.slice(32,64);if(!n||!n.skipValidation){const i=e.slice(0,32),s=xD(i);for(let o=0;o<32;o++)if(r[o]!==s[o])throw new Error("provided secretKey is invalid")}return new oa({publicKey:r,secretKey:e})}static fromSeed(e){const n=xD(e),r=new Uint8Array(64);return r.set(e),r.set(n,32),new oa({publicKey:n,secretKey:r})}get publicKey(){return new mt(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}Object.freeze({CreateLookupTable:{index:0,layout:Ee.struct([Ee.u32("instruction"),Bx("recentSlot"),Ee.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:Ee.struct([Ee.u32("instruction")])},ExtendLookupTable:{index:2,layout:Ee.struct([Ee.u32("instruction"),Bx(),Ee.seq(Sn(),Ee.offset(Ee.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:Ee.struct([Ee.u32("instruction")])},CloseLookupTable:{index:4,layout:Ee.struct([Ee.u32("instruction")])}});new mt("AddressLookupTab1e1111111111111111111111111");const sT=Object.freeze({RequestUnits:{index:0,layout:Ee.struct([Ee.u8("instruction"),Ee.u32("units"),Ee.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:Ee.struct([Ee.u8("instruction"),Ee.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:Ee.struct([Ee.u8("instruction"),Ee.u32("units")])},SetComputeUnitPrice:{index:3,layout:Ee.struct([Ee.u8("instruction"),Bx("microLamports")])}});class Dpt{constructor(){}static requestUnits(e){const n=sT.RequestUnits,r=ks(n,e);return new Bi({keys:[],programId:this.programId,data:r})}static requestHeapFrame(e){const n=sT.RequestHeapFrame,r=ks(n,e);return new Bi({keys:[],programId:this.programId,data:r})}static setComputeUnitLimit(e){const n=sT.SetComputeUnitLimit,r=ks(n,e);return new Bi({keys:[],programId:this.programId,data:r})}static setComputeUnitPrice(e){const n=sT.SetComputeUnitPrice,r=ks(n,{microLamports:BigInt(e.microLamports)});return new Bi({keys:[],programId:this.programId,data:r})}}Dpt.programId=new mt("ComputeBudget111111111111111111111111111111");Ee.struct([Ee.u8("numSignatures"),Ee.u8("padding"),Ee.u16("signatureOffset"),Ee.u16("signatureInstructionIndex"),Ee.u16("publicKeyOffset"),Ee.u16("publicKeyInstructionIndex"),Ee.u16("messageDataOffset"),Ee.u16("messageDataSize"),Ee.u16("messageInstructionIndex")]);new mt("Ed25519SigVerify111111111111111111111111111");Gft.utils.isValidPrivateKey;Ee.struct([Ee.u8("numSignatures"),Ee.u16("signatureOffset"),Ee.u8("signatureInstructionIndex"),Ee.u16("ethAddressOffset"),Ee.u8("ethAddressInstructionIndex"),Ee.u16("messageDataOffset"),Ee.u16("messageDataSize"),Ee.u8("messageInstructionIndex"),Ee.blob(20,"ethAddress"),Ee.blob(64,"signature"),Ee.u8("recoveryId")]);new mt("KeccakSecp256k11111111111111111111111111111");var m0e;new mt("StakeConfig11111111111111111111111111111111");class g0e{constructor(e,n,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=n,this.custodian=r}}m0e=g0e;g0e.default=new m0e(0,0,mt.default);Object.freeze({Initialize:{index:0,layout:Ee.struct([Ee.u32("instruction"),Qft(),Zft()])},Authorize:{index:1,layout:Ee.struct([Ee.u32("instruction"),Sn("newAuthorized"),Ee.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:Ee.struct([Ee.u32("instruction")])},Split:{index:3,layout:Ee.struct([Ee.u32("instruction"),Ee.ns64("lamports")])},Withdraw:{index:4,layout:Ee.struct([Ee.u32("instruction"),Ee.ns64("lamports")])},Deactivate:{index:5,layout:Ee.struct([Ee.u32("instruction")])},Merge:{index:7,layout:Ee.struct([Ee.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:Ee.struct([Ee.u32("instruction"),Sn("newAuthorized"),Ee.u32("stakeAuthorizationType"),qg("authoritySeed"),Sn("authorityOwner")])}});new mt("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:Ee.struct([Ee.u32("instruction"),eht()])},Authorize:{index:1,layout:Ee.struct([Ee.u32("instruction"),Sn("newAuthorized"),Ee.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:Ee.struct([Ee.u32("instruction"),Ee.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:Ee.struct([Ee.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:Ee.struct([Ee.u32("instruction"),tht()])}});new mt("Vote111111111111111111111111111111111111111");new mt("Va1idator1nfo111111111111111111111111111111");it({name:ht(),website:qt(ht()),details:qt(ht()),iconUrl:qt(ht()),keybaseUsername:qt(ht())});new mt("Vote111111111111111111111111111111111111111");Ee.struct([Sn("nodePubkey"),Sn("authorizedWithdrawer"),Ee.u8("commission"),Ee.nu64(),Ee.seq(Ee.struct([Ee.nu64("slot"),Ee.u32("confirmationCount")]),Ee.offset(Ee.u32(),-8),"votes"),Ee.u8("rootSlotValid"),Ee.nu64("rootSlot"),Ee.nu64(),Ee.seq(Ee.struct([Ee.nu64("epoch"),Sn("authorizedVoter")]),Ee.offset(Ee.u32(),-8),"authorizedVoters"),Ee.struct([Ee.seq(Ee.struct([Sn("authorizedPubkey"),Ee.nu64("epochOfLastAuthorizedSwitch"),Ee.nu64("targetEpoch")]),32,"buf"),Ee.nu64("idx"),Ee.u8("isEmpty")],"priorVoters"),Ee.nu64(),Ee.seq(Ee.struct([Ee.nu64("epoch"),Ee.nu64("credits"),Ee.nu64("prevCredits")]),Ee.offset(Ee.u32(),-8),"epochCredits"),Ee.struct([Ee.nu64("slot"),Ee.nu64("timestamp")],"lastTimestamp")]);const oT=1e9;var W4,gee;function jpt(){if(gee)return W4;gee=1;function t(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(n[o]!==255)throw new TypeError(s+" is ambiguous");n[o]=i}var a=e.length,l=e.charAt(0),c=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(y){if(y instanceof Uint8Array||(ArrayBuffer.isView(y)?y=new Uint8Array(y.buffer,y.byteOffset,y.byteLength):Array.isArray(y)&&(y=Uint8Array.from(y))),!(y instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(y.length===0)return"";for(var v=0,b=0,w=0,k=y.length;w!==k&&y[w]===0;)w++,v++;for(var N=(k-w)*u+1>>>0,R=new Uint8Array(N);w!==k;){for(var D=y[w],O=0,B=N-1;(D!==0||O<b)&&B!==-1;B--,O++)D+=256*R[B]>>>0,R[B]=D%a>>>0,D=D/a>>>0;if(D!==0)throw new Error("Non-zero carry");b=O,w++}for(var z=N-b;z!==N&&R[z]===0;)z++;for(var U=l.repeat(v);z<N;++z)U+=e.charAt(R[z]);return U}function m(y){if(typeof y!="string")throw new TypeError("Expected String");if(y.length===0)return new Uint8Array;for(var v=0,b=0,w=0;y[v]===l;)b++,v++;for(var k=(y.length-v)*c+1>>>0,N=new Uint8Array(k);y[v];){var R=y.charCodeAt(v);if(R>255)return;var D=n[R];if(D===255)return;for(var O=0,B=k-1;(D!==0||O<w)&&B!==-1;B--,O++)D+=a*N[B]>>>0,N[B]=D%256>>>0,D=D/256>>>0;if(D!==0)throw new Error("Non-zero carry");w=O,v++}for(var z=k-w;z!==k&&N[z]===0;)z++;for(var U=new Uint8Array(b+(k-z)),$=b;z!==k;)U[$++]=N[z++];return U}function g(y){var v=m(y);if(v)return v;throw new Error("Non-base"+a+" character")}return{encode:h,decodeUnsafe:m,decode:g}}return W4=t,W4}var Y4,yee;function Bpt(){return yee||(yee=1,Y4=jpt()("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")),Y4}var aT=Bpt();const ME=new mt("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");new mt("TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb");const hP=new mt("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");new mt("So11111111111111111111111111111111111111112");new mt("9pan9bMn5HatX4EJdBwg9VgCa7Uz5HL8N1m5D3NdXejP");const A7=t=>{const e=t.decode.bind(t),n=t.encode.bind(t);return{decode:e,encode:n}};var sp={},xee;function Upt(){if(xee)return sp;xee=1,Object.defineProperty(sp,"__esModule",{value:!0});function t(i){{const s=ln.from(i);s.reverse();const o=s.toString("hex");return o.length===0?BigInt(0):BigInt(`0x${o}`)}}sp.toBigIntLE=t;function e(i){{const s=i.toString("hex");return s.length===0?BigInt(0):BigInt(`0x${s}`)}}sp.toBigIntBE=e;function n(i,s){{const o=i.toString(16),a=ln.from(o.padStart(s*2,"0").slice(0,s*2),"hex");return a.reverse(),a}}sp.toBufferLE=n;function r(i,s){{const o=i.toString(16);return ln.from(o.padStart(s*2,"0").slice(0,s*2),"hex")}}return sp.toBufferBE=r,sp}var vee=Upt();const Fpt=t=>e=>{const n=Ee.blob(t,e),{encode:r,decode:i}=A7(n),s=n;return s.decode=(o,a)=>{const l=i(o,a);return vee.toBigIntLE(ln.from(l))},s.encode=(o,a,l)=>{const c=vee.toBufferLE(o,t);return r(c,a,l)},s},y0e=Fpt(8),$pt=t=>{const e=Ee.u8(t),{encode:n,decode:r}=A7(e),i=e;return i.decode=(s,o)=>!!r(s,o),i.encode=(s,o,a)=>{const l=Number(s);return n(l,o,a)},i},bee=t=>{const e=Ee.blob(32,t),{encode:n,decode:r}=A7(e),i=e;return i.decode=(s,o)=>{const a=r(s,o);return new mt(a)},i.encode=(s,o,a)=>{const l=s.toBuffer();return n(l,o,a)},i};class x0e extends Error{constructor(e){super(e)}}class v0e extends x0e{constructor(){super(...arguments),this.name="TokenOwnerOffCurveError"}}var Z2;(function(t){t[t.InitializeMint=0]="InitializeMint",t[t.InitializeAccount=1]="InitializeAccount",t[t.InitializeMultisig=2]="InitializeMultisig",t[t.Transfer=3]="Transfer",t[t.Approve=4]="Approve",t[t.Revoke=5]="Revoke",t[t.SetAuthority=6]="SetAuthority",t[t.MintTo=7]="MintTo",t[t.Burn=8]="Burn",t[t.CloseAccount=9]="CloseAccount",t[t.FreezeAccount=10]="FreezeAccount",t[t.ThawAccount=11]="ThawAccount",t[t.TransferChecked=12]="TransferChecked",t[t.ApproveChecked=13]="ApproveChecked",t[t.MintToChecked=14]="MintToChecked",t[t.BurnChecked=15]="BurnChecked",t[t.InitializeAccount2=16]="InitializeAccount2",t[t.SyncNative=17]="SyncNative",t[t.InitializeAccount3=18]="InitializeAccount3",t[t.InitializeMultisig2=19]="InitializeMultisig2",t[t.InitializeMint2=20]="InitializeMint2",t[t.GetAccountDataSize=21]="GetAccountDataSize",t[t.InitializeImmutableOwner=22]="InitializeImmutableOwner",t[t.AmountToUiAmount=23]="AmountToUiAmount",t[t.UiAmountToAmount=24]="UiAmountToAmount",t[t.InitializeMintCloseAuthority=25]="InitializeMintCloseAuthority",t[t.TransferFeeExtension=26]="TransferFeeExtension",t[t.ConfidentialTransferExtension=27]="ConfidentialTransferExtension",t[t.DefaultAccountStateExtension=28]="DefaultAccountStateExtension",t[t.Reallocate=29]="Reallocate",t[t.MemoTransferExtension=30]="MemoTransferExtension",t[t.CreateNativeMint=31]="CreateNativeMint",t[t.InitializeNonTransferableMint=32]="InitializeNonTransferableMint",t[t.InterestBearingMintExtension=33]="InterestBearingMintExtension",t[t.CpiGuardExtension=34]="CpiGuardExtension",t[t.InitializePermanentDelegate=35]="InitializePermanentDelegate",t[t.TransferHookExtension=36]="TransferHookExtension",t[t.MetadataPointerExtension=39]="MetadataPointerExtension",t[t.GroupPointerExtension=40]="GroupPointerExtension",t[t.GroupMemberPointerExtension=41]="GroupMemberPointerExtension"})(Z2||(Z2={}));function zpt(t,e,n){if(n.length){t.push({pubkey:e,isSigner:!1,isWritable:!1});for(const r of n)t.push({pubkey:r instanceof mt?r:r.publicKey,isSigner:!0,isWritable:!1})}else t.push({pubkey:e,isSigner:!0,isWritable:!1});return t}const b0e=Ee.struct([Ee.u32("mintAuthorityOption"),bee("mintAuthority"),y0e("supply"),Ee.u8("decimals"),$pt("isInitialized"),Ee.u32("freezeAuthorityOption"),bee("freezeAuthority")]);b0e.span;async function ED(t,e,n=!1,r=ME,i=hP){if(!n&&!mt.isOnCurve(e.toBuffer()))throw new v0e;const[s]=await mt.findProgramAddress([e.toBuffer(),r.toBuffer(),t.toBuffer()],i);return s}function w0e(t,e,n,r,i=ME,s=hP){return Vpt(t,e,n,r,ln.alloc(0),i,s)}function Vpt(t,e,n,r,i,s=ME,o=hP){const a=[{pubkey:t,isSigner:!0,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:Ux.programId,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!1}];return new Bi({keys:a,programId:o,data:i})}const SD=Ee.struct([Ee.u8("instruction"),y0e("amount")]);function E0e(t,e,n,r,i=[],s=ME){const o=zpt([{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0}],n,i),a=ln.alloc(SD.span);return SD.encode({instruction:Z2.Transfer,amount:BigInt(r)},a),new Bi({keys:o,programId:s,data:a})}const wee=Object.freeze(Object.defineProperty({__proto__:null,ASSOCIATED_TOKEN_PROGRAM_ID:hP,MintLayout:b0e,TOKEN_PROGRAM_ID:ME,TokenError:x0e,get TokenInstruction(){return Z2},TokenOwnerOffCurveError:v0e,createAssociatedTokenAccountInstruction:w0e,createTransferInstruction:E0e,getAssociatedTokenAddress:ED,transferInstructionData:SD},Symbol.toStringTag,{value:"Module"}));class Hpt{constructor(){this.connection=new S7(vB,"confirmed")}createVaultKeypair(){return oa.generate()}getKeypairFromSecretKey(e){const n=Uint8Array.from(JSON.parse(e));return oa.fromSecretKey(n)}async getBalance(e){try{return await this.connection.getBalance(new mt(e))/oT}catch(n){return console.error("Error fetching balance:",n),0}}async wait(e){return new Promise(n=>setTimeout(n,e))}async getAccountInfoWithRetry(e,n=5){for(let r=0;r<n;r++)try{return await this.connection.getAccountInfo(e)}catch(i){if(console.warn(`Attempt ${r+1} failed to fetch account info: ${i.message}`),r===n-1)throw i;await this.wait(500*Math.pow(2,r))}return null}async getLatestBlockhashWithRetry(e=5){for(let n=0;n<e;n++)try{return await this.connection.getLatestBlockhash("confirmed")}catch(r){if(console.warn(`Attempt ${n+1} failed to get blockhash: ${r.message}`),n===e-1)throw new Error("Network error: Failed to fetch blockhash. Devnet may be down.");await this.wait(500*Math.pow(2,n))}throw new Error("Failed to get blockhash")}async getTokenBalances(e){const n=await this.getBalance(e);return sh.map(r=>({...r,balance:r.symbol==="SOL"?n:0}))}async airdrop(e){var n,r;try{const i=await this.connection.requestAirdrop(new mt(e),1*oT),s=await this.getLatestBlockhashWithRetry();return await this.connection.confirmTransaction({blockhash:s.blockhash,lastValidBlockHeight:s.lastValidBlockHeight,signature:i}),i}catch(i){throw(n=i.message)!=null&&n.includes("429")?new Error("Devnet Rate Limit Reached. Please try again later."):(r=i.message)!=null&&r.includes("limit reached")?new Error("Daily Airdrop Limit Reached for this IP."):i}}async connectWallet(){try{const{solana:e}=window;if(e&&e.isPhantom)return(await e.connect()).publicKey.toString();throw alert("Solana object not found! Get a Phantom Wallet "),new Error("No wallet found")}catch(e){throw console.error(e),e}}async pollForConfirmation(e,n=15,r=2e3){var i,s,o;for(let a=0;a<n;a++)try{const l=await this.connection.getSignatureStatus(e);if((i=l==null?void 0:l.value)!=null&&i.confirmationStatus){const c=l.value.confirmationStatus;if(c==="confirmed"||c==="finalized")return console.log(`[Solana]  Transaction confirmed (${c}) after ${a+1} attempts`),!0;c==="processed"&&console.log("[Solana]  Transaction processed, waiting for confirmation...")}if((s=l==null?void 0:l.value)!=null&&s.err)throw new Error(`Transaction failed on-chain: ${JSON.stringify(l.value.err)}`);await this.wait(r)}catch(l){if((o=l.message)!=null&&o.includes("failed on-chain"))throw l;console.warn(`[Solana] Poll attempt ${a+1} failed:`,l.message),await this.wait(r)}return!1}async sendTransactionWithRetry(e,n){var i,s;let r="";try{const o=await this.getLatestBlockhashWithRetry();if(e.recentBlockhash=o.blockhash,e.lastValidBlockHeight=o.lastValidBlockHeight,e.sign(...n),r=await this.connection.sendRawTransaction(e.serialize(),{skipPreflight:!1,preflightCommitment:"confirmed"}),console.log(`[Solana]  Transaction sent: ${r.slice(0,16)}...`),!await this.pollForConfirmation(r,15,2e3)){console.warn(`[Solana]  Confirmation polling timed out, but transaction may have succeeded: ${r}`);const l=new Error("Transaction timed out. The network is congested. Please check your wallet history before trying again to avoid double spending.");throw l.signature=r,l.isTimeout=!0,l}return r}catch(o){if(console.warn("Transaction Error:",o.name,o.message),o.name==="TransactionExpiredBlockheightExceededError"||(i=o.message)!=null&&i.includes("block height exceeded")||(s=o.message)!=null&&s.includes("timeout")||o.isTimeout){const a=new Error("Transaction timed out. The network is congested. Please check your wallet history before trying again to avoid double spending.");throw a.signature=r,a.isTimeout=!0,a}throw o}}async transferSol(e,n,r){try{const i=new Ga().add(Ux.transfer({fromPubkey:e.publicKey,toPubkey:new mt(n),lamports:Math.floor(r*oT)}));return i.feePayer=e.publicKey,await this.sendTransactionWithRetry(i,[e])}catch(i){throw console.error("Transfer Error",i),new Error(`Transfer failed: ${i.message}`)}}async findPoolKeys(e,n){const{Liquidity:r,MARKET_STATE_LAYOUT_V3:i,LIQUIDITY_STATE_LAYOUT_V4:s,SPL_MINT_LAYOUT:o}=await Nl(async()=>{const{Liquidity:N,MARKET_STATE_LAYOUT_V3:R,LIQUIDITY_STATE_LAYOUT_V4:D,SPL_MINT_LAYOUT:O}=await import("./index-Dj186s2e.js");return{Liquidity:N,MARKET_STATE_LAYOUT_V3:R,LIQUIDITY_STATE_LAYOUT_V4:D,SPL_MINT_LAYOUT:O}},[]),a=new mt(e),l=new mt(n),c=new mt(vKe),u=[{dataSize:s.span},{memcmp:{offset:s.offsetOf("baseMint"),bytes:a.toBase58()}},{memcmp:{offset:s.offsetOf("quoteMint"),bytes:l.toBase58()}}],h=[{dataSize:s.span},{memcmp:{offset:s.offsetOf("baseMint"),bytes:l.toBase58()}},{memcmp:{offset:s.offsetOf("quoteMint"),bytes:a.toBase58()}}];let m=await this.connection.getProgramAccounts(c,{filters:u});if(m.length===0&&(m=await this.connection.getProgramAccounts(c,{filters:h})),m.length===0)return null;const g=m[0],y=s.decode(g.account.data),v=y.marketId,b=await this.connection.getAccountInfo(v);if(!b)throw new Error("Failed to fetch market info");const w=i.decode(b.data),k=r.getAssociatedAuthority({programId:c}).publicKey;return{id:g.pubkey,baseMint:y.baseMint,quoteMint:y.quoteMint,lpMint:y.lpMint,baseDecimals:y.baseDecimal.toNumber(),quoteDecimals:y.quoteDecimal.toNumber(),lpDecimals:5,version:4,programId:c,authority:k,openOrders:y.openOrders,targetOrders:y.targetOrders,baseVault:y.baseVault,quoteVault:y.quoteVault,withdrawQueue:y.withdrawQueue,lpVault:y.lpVault,marketVersion:3,marketProgramId:y.marketProgramId,marketId:y.marketId,marketAuthority:r.getAssociatedAuthority({programId:y.marketProgramId}).publicKey,marketBaseVault:w.baseVault,marketQuoteVault:w.quoteVault,marketBids:w.bids,marketAsks:w.asks,marketEventQueue:w.eventQueue}}async executeSwap(e,n,r,i,s){const{Liquidity:o,Token:a,TokenAmount:l,Percent:c,TxVersion:u}=await Nl(async()=>{const{Liquidity:h,Token:m,TokenAmount:g,Percent:y,TxVersion:v}=await import("./index-Dj186s2e.js");return{Liquidity:h,Token:m,TokenAmount:g,Percent:y,TxVersion:v}},[]);try{const h=F=>{console.log(`[Swap Status] ${F}`),s&&s(F)};h("Initializing Swap Protocol...");const m="So11111111111111111111111111111111111111112",g=n.trim()==="SOL"?m:n.trim(),y=r.trim()==="SOL"?m:r.trim();h("Fetching Pool Keys...");const v=await this.findPoolKeys(g,y);if(!v)throw new Error(`No Liquidity Pool found for ${g} <-> ${y} on Devnet.`);h("Calculating Amount Out...");const b=g===v.baseMint.toBase58(),{TOKEN_PROGRAM_ID:w}=await Nl(async()=>{const{TOKEN_PROGRAM_ID:F}=await Promise.resolve().then(()=>wee);return{TOKEN_PROGRAM_ID:F}},void 0),k=new a(w,new mt(g),b?v.baseDecimals:v.quoteDecimals),N=new a(w,new mt(y),b?v.quoteDecimals:v.baseDecimals),R=new l(k,i,!1),D=new c(25,100);h("Fetching Pool Reserves...");const O=await o.fetchInfo({connection:this.connection,poolKeys:v}),{amountOut:B,minAmountOut:z}=o.computeAmountOut({poolKeys:v,poolInfo:O,amountIn:R,currencyOut:N,slippage:D});h(`Calculated Amount Out: ${B.toFixed()} (Min: ${z.toFixed()})`),h("Building Swap Transaction...");const U=await this.getTokenAccountsByOwner(e.publicKey),{innerTransactions:$}=await o.makeSwapInstructionSimple({connection:this.connection,poolKeys:v,userKeys:{tokenAccounts:U,owner:e.publicKey},amountIn:R,amountOut:z,fixedSide:"in",makeTxVersion:u.V0});h("Sending Transaction to Devnet...");const W=await Promise.all($.map(async F=>{const{instructions:T,signers:_}=F,L=new Ga;return L.add(...T),L.feePayer=e.publicKey,L.recentBlockhash=(await this.connection.getLatestBlockhash()).blockhash,L.sign(e,..._),L}));let H="";for(const F of W){const T=await this.connection.sendRawTransaction(F.serialize(),{skipPreflight:!1,preflightCommitment:"confirmed",maxRetries:5});if(console.log(`[Swap]  Transaction sent: ${T.slice(0,16)}...`),!await this.pollForConfirmation(T,15,2e3))throw new Error("Transaction confirmation timed out - please check explorer for status");H=T}return h("Transaction Confirmed!"),H}catch(h){throw console.error("Swap Error:",h),new Error(`Swap failed: ${h.message}`)}}async getWalletAssets(e){const n=new mt(e),r=await this.getBalance(e),s=(await this.getTokenAccountsByOwner(n)).map(o=>{var a,l;return{mint:o.accountInfo.mint.toBase58(),amount:o.accountInfo.amount,decimals:o.accountInfo.decimals,symbol:((a=sh.find(c=>c.mint===o.accountInfo.mint.toBase58()))==null?void 0:a.symbol)||"UNKNOWN",name:((l=sh.find(c=>c.mint===o.accountInfo.mint.toBase58()))==null?void 0:l.name)||"Unknown Token",isNft:o.accountInfo.decimals===0&&o.accountInfo.amount==="1"}});return s.unshift({mint:"So11111111111111111111111111111111111111112",amount:(r*oT).toString(),decimals:9,symbol:"SOL",name:"Solana",isNft:!1}),s}async getTokenAccountsByOwner(e){const{TOKEN_PROGRAM_ID:n}=await Nl(async()=>{const{TOKEN_PROGRAM_ID:i}=await Promise.resolve().then(()=>wee);return{TOKEN_PROGRAM_ID:i}},void 0);return(await this.connection.getParsedTokenAccountsByOwner(e,{programId:n})).value.map(i=>({pubkey:i.pubkey,programId:i.account.owner,accountInfo:{mint:new mt(i.account.data.parsed.info.mint),amount:i.account.data.parsed.info.tokenAmount.amount,decimals:i.account.data.parsed.info.tokenAmount.decimals}}))}async transferToken(e,n,r,i,s){if(n==="So11111111111111111111111111111111111111112"||n==="SOL")return this.transferSol(e,r,i);try{const o=new mt(n),a=new mt(r),l=await ED(o,e.publicKey),c=await ED(o,a),u=new Ga;await this.connection.getAccountInfo(c)||u.add(w0e(e.publicKey,c,a,o));let m;if(await this.connection.getAccountInfo(l)){const y=await this.connection.getTokenAccountBalance(l),v=BigInt(y.value.amount),b=BigInt(Math.round(i*Math.pow(10,s))),w=v>b?v-b:b-v,k=v/BigInt(100);w<=k?(m=v,console.log(`[Transfer] Using actual balance: ${v} (requested: ${b})`)):m=b}else m=BigInt(Math.round(i*Math.pow(10,s)));return u.add(E0e(l,c,e.publicKey,m)),u.feePayer=e.publicKey,await this.sendTransactionWithRetry(u,[e])}catch(o){throw console.error("Token Transfer Error",o),new Error(`Token Transfer failed: ${o.message}`)}}async getRecentTransactions(e,n=20){try{const r=new mt(e);return(await this.connection.getSignaturesForAddress(r,{limit:n})).map(s=>({signature:s.signature,slot:s.slot,err:s.err,memo:s.memo,blockTime:s.blockTime,status:s.err?"failed":"success",confirmationStatus:s.confirmationStatus}))}catch(r){return console.error("Error fetching transactions:",r),[]}}}const Is=new Hpt,Rf=class Rf{static async setSessionHash(e){try{const n=Date.now(),r=new TextEncoder,i=crypto.getRandomValues(new Uint8Array(16)),s=r.encode(e+n.toString()),o=new Uint8Array(i.length+s.length);o.set(i),o.set(s,i.length);const a=await crypto.subtle.digest("SHA-256",o),l=new Uint8Array(a);this.sessionHash=btoa(String.fromCharCode(...l)),this.sessionTimestamp=n}catch{console.error("[SecurityService] Failed to set session hash")}}static hasValidSession(){return this.sessionHash!==null&&this.sessionTimestamp>0}static getSessionTimestamp(){return this.sessionTimestamp}static clearSession(){this.sessionHash=null,this.sessionTimestamp=0}static initializeDevToolsDetection(){if(this.detectionInterval)return;const e=()=>{const i=window.outerWidth-window.innerWidth>160,s=window.outerHeight-window.innerHeight>160;(i||s)&&!this.devToolsDetected&&this.handleDevToolsDetected()},n=new Image;let r=!1;Object.defineProperty(n,"id",{get:function(){return r=!0,""}}),this.detectionInterval=setInterval(()=>{r=!1,console.log(n),console.clear(),r&&!this.devToolsDetected&&this.handleDevToolsDetected(),e()},2e3),window.addEventListener("resize",e)}static handleDevToolsDetected(){this.devToolsDetected||(this.devToolsDetected=!0,console.clear(),console.warn("%c SECURITY NOTICE ","color: #ff4444; font-size: 28px; font-weight: bold; text-shadow: 2px 2px 4px rgba(0,0,0,0.3);"),console.warn("%cDeveloper tools detected.","color: #ff8800; font-size: 16px;"),console.warn("%cFor your security, sensitive operations may be restricted.","color: #ffaa00; font-size: 14px;"),console.warn("%cIf you are not a developer, please close this panel immediately.","color: #ffffff; font-size: 12px;"),this.securityListeners.forEach(e=>{try{e()}catch{}}))}static isDevToolsDetected(){return this.devToolsDetected}static onSecurityBreach(e){return this.securityListeners.add(e),()=>this.securityListeners.delete(e)}static initializeConsoleSanitization(){const e=[/0x[a-fA-F0-9]{64}/g,/[1-9A-HJ-NP-Za-km-z]{87,88}/g,/0x[a-fA-F0-9]{40,}/g,/[A-Za-z0-9+/]{100,}={0,2}/g],n=r=>r.map(i=>{if(typeof i=="string"){let s=i;for(const o of e)s=s.replace(o,"[REDACTED]");return s}if(typeof i=="object"&&i!==null)try{const s=JSON.stringify(i);let o=!1;for(const a of e)if(a.test(s)){o=!0;break}if(o)return"[Object with sensitive data]"}catch{}return i});console.log=(...r)=>{this.originalConsole.log.apply(console,n(r))},console.warn=(...r)=>{this.originalConsole.warn.apply(console,n(r))},console.info=(...r)=>{this.originalConsole.info.apply(console,n(r))},console.debug=(...r)=>{this.originalConsole.debug.apply(console,n(r))}}static protectGlobalNamespace(){if(typeof window>"u")return;const e=window,n=["__dealerService","__polymarketDealerService","__backgroundTimer"];for(const r of n)try{e[r]&&delete e[r],Object.defineProperty(e,r,{value:void 0,writable:!1,configurable:!1})}catch{}}static initializeProductionSecurity(){console.log("[SecurityService] Initializing production security..."),this.initializeConsoleSanitization(),this.initializeDevToolsDetection(),this.protectGlobalNamespace(),console.log("[SecurityService] Production security initialized")}static cleanup(){this.detectionInterval&&(clearInterval(this.detectionInterval),this.detectionInterval=null),this.securityListeners.clear(),this.devToolsDetected=!1,this.clearSession()}};Rf.sessionHash=null,Rf.sessionTimestamp=0,Rf.devToolsDetected=!1,Rf.detectionInterval=null,Rf.securityListeners=new Set,Rf.originalConsole={log:console.log,warn:console.warn,error:console.error,info:console.info,debug:console.debug};let vy=Rf;const Eee="vault_balance_history",See="vault_intraday_history",Aee=90,Tee=96;class qpt{constructor(){this.history=[],this.intradayHistory=[],this.listeners=new Set,this.isInitialized=!1,this.initPromise=null,this.initPromise=this.initialize()}async initialize(){this.isInitialized||(await this.loadFromStorage(),this.isInitialized=!0,this.notify())}async waitForInit(){this.initPromise&&await this.initPromise}async loadFromStorage(){try{const e=await ke.getItem(ke.getUserKey(Eee));e&&(this.history=JSON.parse(e));const n=await ke.getItem(ke.getUserKey(See));if(n){this.intradayHistory=JSON.parse(n);const r=Date.now()-1440*60*1e3;this.intradayHistory=this.intradayHistory.filter(i=>i.timestamp>r)}}catch(e){console.error("[BalanceHistory] Failed to load:",e),this.history=[],this.intradayHistory=[]}}async saveToStorage(){try{await ke.setItem(ke.getUserKey(Eee),JSON.stringify(this.history)),await ke.setItem(ke.getUserKey(See),JSON.stringify(this.intradayHistory))}catch(e){console.error("[BalanceHistory] Failed to save:",e)}}notify(){this.listeners.forEach(e=>e())}getTodayDate(){return new Date().toISOString().split("T")[0]}get15MinTimeKey(){const e=new Date,n=Math.floor(e.getMinutes()/15)*15;return`${e.getHours().toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`}async reloadFromStorage(){console.log("[BalanceHistory] Reloading from storage..."),await this.loadFromStorage(),this.notify()}reset(){console.log("[BalanceHistory] Resetting history..."),this.history=[],this.intradayHistory=[],this.notify()}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}getSnapshot(){return this.history}recordSnapshot(e,n,r){const i=this.getTodayDate(),s=e+n+r,o=Date.now(),a=this.history.findIndex(g=>g.date===i),l={date:i,timestamp:o,solValue:e,hlValue:n,pmValue:r,totalValue:s};a>=0?this.history[a]=l:this.history.push(l),this.history.sort((g,y)=>g.date.localeCompare(y.date)),this.history.length>Aee&&(this.history=this.history.slice(-Aee));const c=this.get15MinTimeKey(),u=o-1440*60*1e3;this.intradayHistory=this.intradayHistory.filter(g=>g.timestamp>u);const h=this.intradayHistory.findIndex(g=>g.timeKey===c&&o-g.timestamp<900*1e3),m={timestamp:o,timeKey:c,solValue:e,hlValue:n,pmValue:r,totalValue:s};h>=0?this.intradayHistory[h]=m:this.intradayHistory.push(m),this.intradayHistory.length>Tee&&(this.intradayHistory=this.intradayHistory.slice(-Tee)),this.saveToStorage(),this.notify(),console.log(`[BalanceHistory]  Snapshot saved: SOL=$${e.toFixed(2)}, HL=$${n.toFixed(2)}, PM=$${r.toFixed(2)} [${c}]`)}getHistoryForChart(e=30){return e===1?this.intradayHistory.map(r=>({date:r.timeKey,value:r.totalValue,solValue:r.solValue,hlValue:r.hlValue,pmValue:r.pmValue})):this.history.slice(-e).map(r=>({date:new Date(r.date).toLocaleDateString("en-US",{month:"short",day:"numeric"}),value:r.totalValue,solValue:r.solValue,hlValue:r.hlValue,pmValue:r.pmValue}))}hasHistory(){return this.history.length>0||this.intradayHistory.length>0}getHistoryDays(){return this.history.length}hasIntradayHistory(){return this.intradayHistory.length>0}clearHistory(){this.history=[],this.intradayHistory=[],this.saveToStorage(),this.notify()}}const ml=new qpt,Gpt=(t,e)=>{const[n,r]=A.useState(!0),[i,s]=A.useState({publicKey:null,encryptedPrivateKey:null,solBalance:0,tokens:sh,assets:[],isUnlocked:!1,ownerPublicKey:null,hlPublicKey:null,hlEncryptedPrivateKey:null,hlBalance:0,hlOwnerPublicKey:null,hlPositions:[],pmPublicKey:null,pmEncryptedPrivateKey:null,pmBalance:0,pmOwnerPublicKey:null}),[o,a]=A.useState(""),[l,c]=A.useState(""),[u,h]=A.useState("SOL"),[m,g]=A.useState(null),[y,v]=A.useState(!1),[b,w]=A.useState(""),[k,N]=A.useState(!1),[R,D]=A.useState(""),[O,B]=A.useState(!1),[z,U]=A.useState(""),[$,W]=A.useState(!1),[H,F]=A.useState(""),[T,_]=A.useState(!1),[L,V]=A.useState(!1),[K,te]=A.useState(!1),[G,q]=A.useState(""),[M,P]=A.useState(""),[Y,X]=A.useState(""),[se,oe]=A.useState(""),[me,ce]=A.useState(""),[ve,Ne]=A.useState("");A.useEffect(()=>{const de=vy.onSecurityBreach(()=>{i.isUnlocked&&(console.warn("[useVault] Security breach detected - locking vault"),s(ye=>({...ye,isUnlocked:!1})),a(""),g(null),vy.clearSession(),t("Security alert: Vault locked for protection"))});return()=>de()},[i.isUnlocked,t]),A.useEffect(()=>{if(!e){console.log("[useVault] Waiting for userId before loading vault data..."),r(!0),ml.reset(),xt.reset();return}(async()=>{r(!0);try{await ml.reloadFromStorage(),await xt.reloadFromStorage(),await ke.migrateFromLocalStorage(),console.log("[useVault] Loading vault data for user:",e.substring(0,8)+"...");const ye=await ke.getItem(ke.getUserKey("agent_vault_pubkey")),et=await ke.getItem(ke.getUserKey("agent_vault_enc")),Ze=await ke.getItem(ke.getUserKey("agent_owner_pubkey")),lt=await ke.getItem(ke.getUserKey("agent_hl_vault_pubkey")),$t=await ke.getItem(ke.getUserKey("agent_hl_vault_enc")),vt=await ke.getItem(ke.getUserKey("agent_hl_owner_pubkey")),jt=await ke.getItem(ke.getUserKey("agent_pm_vault_pubkey")),sn=await ke.getItem(ke.getUserKey("agent_pm_vault_enc")),tn=await ke.getItem(ke.getUserKey("agent_pm_owner_pubkey"));console.log("[useVault] Loaded keys:",{solana:ye?ye.substring(0,8)+"...":null,hyperliquid:lt?lt.substring(0,8)+"...":null,polymarket:jt?jt.substring(0,8)+"...":null}),ye&&et?(s(on=>({...on,publicKey:ye,encryptedPrivateKey:et,ownerPublicKey:Ze,hlPublicKey:lt,hlEncryptedPrivateKey:$t,hlOwnerPublicKey:vt,pmPublicKey:jt,pmEncryptedPrivateKey:sn,pmOwnerPublicKey:tn})),he(ye),lt&&pe(lt),jt&&Le(jt)):lt&&$t?(s(on=>({...on,hlPublicKey:lt,hlEncryptedPrivateKey:$t,hlOwnerPublicKey:vt,pmPublicKey:jt,pmEncryptedPrivateKey:sn,pmOwnerPublicKey:tn})),pe(lt),jt&&Le(jt)):jt&&sn&&(s(on=>({...on,pmPublicKey:jt,pmEncryptedPrivateKey:sn,pmOwnerPublicKey:tn})),Le(jt))}catch(ye){console.error("[useVault] Failed to load vault from storage",ye)}finally{r(!1)}})()},[e]);const pe=async de=>{try{const ye=await Vt.getUserState(de),et=ye.marginSummary,Ze=et?parseFloat(et.accountValue):0,lt=ye.assetPositions||[];s($t=>({...$t,hlBalance:Ze,hlPositions:lt}))}catch(ye){console.error("Failed to refresh HL balance",ye)}},Le=async de=>{try{const{ethers:ye}=await Nl(async()=>{const{ethers:sn}=await import("./index-Cl3liWUh.js");return{ethers:sn}},[]),et=new ye.JsonRpcProvider("https://polygon-rpc.com"),Ze="0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174",lt=["function balanceOf(address) view returns (uint256)"],vt=await new ye.Contract(Ze,lt,et).balanceOf(de),jt=parseFloat(ye.formatUnits(vt,6));s(sn=>({...sn,pmBalance:jt}))}catch(ye){console.error("Failed to refresh Polymarket balance",ye)}},he=async de=>{try{const ye=await Is.getBalance(de),et=await Is.getWalletAssets(de);s(Ze=>({...Ze,solBalance:ye,assets:et}))}catch(ye){console.error("Failed to refresh balance",ye)}};return{vault:i,setVault:s,password:o,setPassword:a,withdrawAmount:l,setWithdrawAmount:c,withdrawNetwork:u,setWithdrawNetwork:h,showBackupModal:y,setShowBackupModal:v,backupKey:b,setBackupKey:w,showHLBackupModal:k,setShowHLBackupModal:N,hlBackupKey:R,setHLBackupKey:D,isImporting:$,setIsImporting:W,importKey:H,setImportKey:F,refreshBalance:he,connectOwnerWallet:async()=>{try{const de=await Is.connectWallet();s(ye=>({...ye,ownerPublicKey:de})),await ke.setItem(ke.getUserKey("agent_owner_pubkey"),de),t("Solana Owner Wallet Connected: "+de.slice(0,6)+"...")}catch{t("Failed to connect Solana wallet.")}},disconnectOwnerWallet:async()=>{s(de=>({...de,ownerPublicKey:null})),await ke.removeItem(ke.getUserKey("agent_owner_pubkey")),t("Solana Owner Wallet Disconnected")},connectHLOwnerWallet:async()=>{try{const{ethereum:de}=window;if(de){const et=(await de.request({method:"eth_requestAccounts"}))[0];s(Ze=>({...Ze,hlOwnerPublicKey:et})),await ke.setItem(ke.getUserKey("agent_hl_owner_pubkey"),et),t("Hyperliquid Owner Wallet Connected: "+et.slice(0,6)+"...")}else t("No Ethereum wallet found! Install MetaMask.")}catch{t("Failed to connect EVM wallet.")}},disconnectHLOwnerWallet:async()=>{s(de=>({...de,hlOwnerPublicKey:null})),await ke.removeItem(ke.getUserKey("agent_hl_owner_pubkey")),t("Hyperliquid Owner Wallet Disconnected")},createVault:async()=>{if(!o){t("Password is required");return}try{const de=Is.createVaultKeypair(),ye=Array.from(de.secretKey),et=await or.encrypt(JSON.stringify(ye),o),Ze=Vt.createVaultWallet(),lt=await or.encrypt(Ze.privateKey,o);await ke.setItem(ke.getUserKey("agent_vault_pubkey"),de.publicKey.toBase58()),await ke.setItem(ke.getUserKey("agent_vault_enc"),et),await ke.setItem(ke.getUserKey("agent_hl_vault_pubkey"),Ze.address),await ke.setItem(ke.getUserKey("agent_hl_vault_enc"),lt),s($t=>({...$t,isUnlocked:!0,publicKey:de.publicKey.toBase58(),encryptedPrivateKey:et,hlPublicKey:Ze.address,hlEncryptedPrivateKey:lt})),D(Ze.privateKey),w(aT.encode(de.secretKey)),v(!0),t("Vaults created successfully")}catch(de){console.error("Vault creation failed",de),t("Failed to create vault")}},unlockVault:async()=>{if(!o){t("Password is required");return}try{const de=await ke.getItem(ke.getUserKey("agent_vault_enc")),ye=await ke.getItem(ke.getUserKey("agent_vault_pubkey")),et=await ke.getItem(ke.getUserKey("agent_hl_vault_enc")),Ze=await ke.getItem(ke.getUserKey("agent_hl_vault_pubkey"));if((!de||!ye)&&(!et||!Ze)){t("No vault found. Please create one.");return}let lt=null,$t=null,vt=null;if(de&&ye)try{const jt=await or.decrypt(de,o),sn=Uint8Array.from(JSON.parse(jt));if(lt=oa.fromSecretKey(sn),lt.publicKey.toBase58()!==ye)throw new Error("Keypair mismatch");g(lt)}catch(jt){throw console.error("Solana unlock failed",jt),new Error("Incorrect password for Solana Vault")}if(et&&Ze)try{const jt=await or.decrypt(et,o),{ethers:sn}=await Nl(async()=>{const{ethers:on}=await import("./index-Cl3liWUh.js");return{ethers:on}},[]),tn=new sn.Wallet(jt);tn.address.toLowerCase()!==Ze.toLowerCase()?(console.error(`[Vault]  HL Address Mismatch! Stored: ${Ze}, Derived: ${tn.address}`),$t=tn.address,t("Warning: Stored HL address mismatch. Using derived address.")):$t=Ze,vt=et}catch(jt){throw console.error("Hyperliquid unlock failed",jt),new Error("Incorrect password for Hyperliquid Vault")}s(jt=>({...jt,isUnlocked:!0,publicKey:lt?lt.publicKey.toBase58():null,encryptedPrivateKey:de||null,hlPublicKey:$t||null,hlEncryptedPrivateKey:vt||null})),$t&&pe($t),lt&&he(lt.publicKey.toBase58()),await vy.setSessionHash(o),t("Vault unlocked")}catch(de){console.error("Unlock failed",de),t(de.message||"Incorrect password or corrupted vault")}},requestAirdrop:async()=>{if(i.publicKey)try{t("Requesting 1 SOL Airdrop..."),await Is.airdrop(i.publicKey),t("Airdrop Successful!"),setTimeout(()=>he(i.publicKey),2e3)}catch(de){console.error("Airdrop failed",de),t(`Airdrop Failed: ${de.message}`),alert(de.message)}},handleWithdraw:async()=>{if(!i.isUnlocked&&!m){alert("Vault is locked or keypair missing");return}if(!i.isUnlocked||!m){alert("Vault is locked");return}if(!i.ownerPublicKey){alert("Connect Owner Wallet first");return}const de=parseFloat(l);if(isNaN(de)||de<=0){alert("Invalid amount");return}if(de>i.solBalance){alert("Insufficient balance");return}try{t(`Sending ${de} SOL to Owner...`);const ye=await Is.transferSol(m,i.ownerPublicKey,de);t(`Withdrawal Success! Sig: ${ye.slice(0,8)}...`),c(""),he(i.publicKey)}catch(ye){console.error(ye),t(`Withdrawal Failed: ${ye.message}`)}},handleWithdrawHL:async()=>{if(!i.isUnlocked){alert("Vault is locked");return}if(!i.hlOwnerPublicKey){alert("Connect Hyperliquid Owner Wallet first");return}if(!i.hlEncryptedPrivateKey){alert("Hyperliquid vault not found");return}const de=parseFloat(l);if(isNaN(de)||de<=1){alert("Amount must be greater than $1 (withdrawal fee)");return}if(de>(i.hlBalance||0)){alert("Insufficient USDC balance");return}try{const ye=await or.decrypt(i.hlEncryptedPrivateKey,o),et=Vt.getWalletFromPrivateKey(ye);t(`Withdrawing ${de} USDC to Hyperliquid Owner...`);const Ze=await Vt.withdrawUSDC(et,i.hlOwnerPublicKey,de);t(`Withdrawal Success! Status: ${Ze.status}`),c(""),i.hlPublicKey&&setTimeout(()=>pe(i.hlPublicKey),2e3)}catch(ye){console.error(ye),t(`Withdrawal Failed: ${ye.message}`)}},handleWithdrawPM:async()=>{if(!i.isUnlocked){alert("Vault is locked");return}if(!i.pmOwnerPublicKey){alert("Connect Polymarket Owner Wallet first");return}if(!i.pmEncryptedPrivateKey){alert("Polymarket vault not found");return}const de=parseFloat(l);if(isNaN(de)||de<=0){alert("Amount must be greater than 0");return}if(de>(i.pmBalance||0)){alert("Insufficient USDC balance");return}try{const ye=await or.decrypt(i.pmEncryptedPrivateKey,o),{ethers:et}=await Nl(async()=>{const{ethers:on}=await import("./index-Cl3liWUh.js");return{ethers:on}},[]),Ze=new et.JsonRpcProvider("https://polygon-rpc.com"),lt=new et.Wallet(ye,Ze),$t="0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174",vt=["function transfer(address to, uint256 amount) returns (bool)","function balanceOf(address) view returns (uint256)"],jt=new et.Contract($t,vt,lt),sn=et.parseUnits(de.toString(),6);t(`Withdrawing ${de} USDC to Polymarket Owner...`);const tn=await jt.transfer(i.pmOwnerPublicKey,sn);await tn.wait(),t(`Withdrawal Success! Tx: ${tn.hash.slice(0,10)}...`),c(""),i.pmPublicKey&&setTimeout(()=>Le(i.pmPublicKey),2e3)}catch(ye){console.error(ye),t(`Withdrawal Failed: ${ye.message}`)}},importVault:async()=>{if(!o||!H){t("Password and Private Key are required");return}try{const de=aT.decode(H),ye=oa.fromSecretKey(de),et=Array.from(ye.secretKey),Ze=await or.encrypt(JSON.stringify(et),o);await ke.setItem(ke.getUserKey("agent_vault_pubkey"),ye.publicKey.toBase58()),await ke.setItem(ke.getUserKey("agent_vault_enc"),Ze),s(lt=>({...lt,isUnlocked:!0,publicKey:ye.publicKey.toBase58(),encryptedPrivateKey:Ze})),t("Vault imported successfully"),W(!1),F("")}catch(de){console.error("Vault import failed",de),t("Invalid Private Key or Import Failed")}},resolveTokenMint:de=>{const ye=de.trim(),et=sh.find(Ze=>Ze.symbol.toUpperCase()===ye.toUpperCase());return et?et.mint:ye},refreshHLBalance:pe,isImportingSolana:T,setIsImportingSolana:_,isImportingHyperliquid:L,setIsImportingHyperliquid:V,solanaPassword:G,setSolanaPassword:q,hyperliquidPassword:M,setHyperliquidPassword:P,solanaImportKey:se,setSolanaImportKey:oe,hlImportKey:me,setHLImportKey:ce,createSolanaVault:async()=>{if(!G){t("Password is required");return}try{const de=Is.createVaultKeypair(),ye=Array.from(de.secretKey),et=await or.encrypt(JSON.stringify(ye),G);await ke.setItem(ke.getUserKey("agent_vault_pubkey"),de.publicKey.toBase58()),await ke.setItem(ke.getUserKey("agent_vault_enc"),et),s(Ze=>({...Ze,isUnlocked:!0,publicKey:de.publicKey.toBase58(),encryptedPrivateKey:et})),g(de),w(aT.encode(de.secretKey)),v(!0),t("Solana Vault created successfully"),q("")}catch(de){console.error("Solana vault creation failed",de),t("Failed to create Solana vault")}},createHyperliquidVault:async()=>{if(!M){t("Password is required");return}try{const de=Vt.createVaultWallet(),ye=await or.encrypt(de.privateKey,M);await ke.setItem(ke.getUserKey("agent_hl_vault_pubkey"),de.address),await ke.setItem(ke.getUserKey("agent_hl_vault_enc"),ye),s(et=>({...et,hlPublicKey:de.address,hlEncryptedPrivateKey:ye})),D(de.privateKey),N(!0),t("Hyperliquid Vault created successfully"),P(""),pe(de.address)}catch(de){console.error("Hyperliquid vault creation failed",de),t("Failed to create Hyperliquid vault")}},importSolanaVault:async()=>{if(!G||!se){t("Password and Private Key are required");return}try{const de=aT.decode(se),ye=oa.fromSecretKey(de),et=Array.from(ye.secretKey),Ze=await or.encrypt(JSON.stringify(et),G);await ke.setItem(ke.getUserKey("agent_vault_pubkey"),ye.publicKey.toBase58()),await ke.setItem(ke.getUserKey("agent_vault_enc"),Ze),s(lt=>({...lt,isUnlocked:!0,publicKey:ye.publicKey.toBase58(),encryptedPrivateKey:Ze})),g(ye),t("Solana Vault imported successfully"),_(!1),oe(""),q(""),he(ye.publicKey.toBase58())}catch(de){console.error("Solana vault import failed",de),t("Invalid Private Key or Import Failed")}},importHyperliquidVault:async()=>{if(!M||!me){t("Password and Private Key are required");return}try{let de=me.trim();de.startsWith("0x")||(de="0x"+de);const{ethers:ye}=await Nl(async()=>{const{ethers:lt}=await import("./index-Cl3liWUh.js");return{ethers:lt}},[]),et=new ye.Wallet(de),Ze=await or.encrypt(de,M);await ke.setItem(ke.getUserKey("agent_hl_vault_pubkey"),et.address),await ke.setItem(ke.getUserKey("agent_hl_vault_enc"),Ze),s(lt=>({...lt,hlPublicKey:et.address,hlEncryptedPrivateKey:Ze})),t("Hyperliquid Vault imported successfully"),V(!1),ce(""),P(""),pe(et.address)}catch(de){console.error("Hyperliquid vault import failed",de),t("Invalid Private Key or Import Failed")}},isImportingPolymarket:K,setIsImportingPolymarket:te,polymarketPassword:Y,setPolymarketPassword:X,pmImportKey:ve,setPMImportKey:Ne,createPolymarketVault:async()=>{if(!Y){t("Password is required");return}try{const{ethers:de}=await Nl(async()=>{const{ethers:Ze}=await import("./index-Cl3liWUh.js");return{ethers:Ze}},[]),ye=de.Wallet.createRandom(),et=await or.encrypt(ye.privateKey,Y);await ke.setItem(ke.getUserKey("agent_pm_vault_pubkey"),ye.address),await ke.setItem(ke.getUserKey("agent_pm_vault_enc"),et),s(Ze=>({...Ze,pmPublicKey:ye.address,pmEncryptedPrivateKey:et})),U(ye.privateKey),B(!0),t("Polymarket Vault created successfully"),X(""),Le(ye.address)}catch(de){console.error("Polymarket vault creation failed",de),t("Failed to create Polymarket vault")}},importPolymarketVault:async()=>{if(!Y||!ve){t("Password and Private Key are required");return}try{let de=ve.trim();de.startsWith("0x")||(de="0x"+de);const{ethers:ye}=await Nl(async()=>{const{ethers:lt}=await import("./index-Cl3liWUh.js");return{ethers:lt}},[]),et=new ye.Wallet(de),Ze=await or.encrypt(de,Y);await ke.setItem(ke.getUserKey("agent_pm_vault_pubkey"),et.address),await ke.setItem(ke.getUserKey("agent_pm_vault_enc"),Ze),s(lt=>({...lt,pmPublicKey:et.address,pmEncryptedPrivateKey:Ze})),t("Polymarket Vault imported successfully"),te(!1),Ne(""),X(""),Le(et.address)}catch(de){console.error("Polymarket vault import failed",de),t("Invalid Private Key or Import Failed")}},connectPMOwnerWallet:async()=>{try{const{ethereum:de}=window;if(de){const et=(await de.request({method:"eth_requestAccounts"}))[0];s(Ze=>({...Ze,pmOwnerPublicKey:et})),await ke.setItem(ke.getUserKey("agent_pm_owner_pubkey"),et),t("Polymarket Owner Wallet Connected: "+et.slice(0,6)+"...")}else t("No Ethereum wallet found! Install MetaMask.")}catch{t("Failed to connect EVM wallet.")}},disconnectPMOwnerWallet:async()=>{s(de=>({...de,pmOwnerPublicKey:null})),await ke.removeItem(ke.getUserKey("agent_pm_owner_pubkey")),t("Polymarket Owner Wallet Disconnected")},refreshPMBalance:Le,showPMBackupModal:O,setShowPMBackupModal:B,pmBackupKey:z,setPMBackupKey:U,deleteAccount:async()=>{try{await ke.clear(),window.location.reload()}catch(de){console.error(de)}}}},Eu=["#E7FE55","#D4EB4C","#C1D843","#AEC53A","#9BB231","#889F28","#758C1F","#627916","#4F660D","#3C5304"];Array.from({length:30},(t,e)=>({date:new Date(Date.now()-(29-e)*24*60*60*1e3).toLocaleDateString("en-US",{month:"short",day:"numeric"}),value:100+Math.random()*50+e*2}));const Kpt=t=>{const[e,n]=A.useState([]),[r,i]=A.useState([]),[s,o]=A.useState({}),a=A.useSyncExternalStore(ut.subscribe.bind(ut),ut.getSnapshot.bind(ut));A.useEffect(()=>{const u=async()=>{const h={};try{const m=await wo.getMarketPrice("SOLUSDT");h.SOL=m.price}catch(m){console.error("Failed to fetch SOL price",m)}for(const m of t.assets||[])if(!(!m.symbol||m.symbol==="UNKNOWN"))try{const g=m.symbol.toUpperCase();if(h[g])continue;const y=await wo.getMarketPrice(`${g}USDT`);h[g]=y.price}catch(g){console.warn(`Failed to fetch price for ${m.symbol}`,g)}h.USDC=1,o(m=>({...m,...h}))};if(t.isUnlocked){u();const h=setInterval(u,6e4);return()=>clearInterval(h)}},[t.isUnlocked,t.assets]);const l=A.useSyncExternalStore(ml.subscribe.bind(ml),ml.getSnapshot.bind(ml));A.useEffect(()=>{if(!t.isUnlocked)return;const u=s.SOL||0,h=t.solBalance*u,m=t.hlBalance||0,g=(a.portfolioValue||0)+(a.currentExposure||0);(h>0||m>0||g>0)&&ml.recordSnapshot(h,m,g)},[t.isUnlocked,t.solBalance,s,t.hlBalance,a.portfolioValue,a.currentExposure]),A.useEffect(()=>{if(!t.isUnlocked)return;const u=()=>{const g=s.SOL||0,y=t.solBalance*g,v=t.hlBalance||0,b=(a.portfolioValue||0)+(a.currentExposure||0);(y>0||v>0||b>0)&&(ml.recordSnapshot(y,v,b),console.log("[useMarketData]  Periodic 15-min snapshot recorded"))};u();const h=900*1e3,m=setInterval(u,h);return()=>clearInterval(m)},[t.isUnlocked]),A.useEffect(()=>{if(ml.hasHistory()){const u=ml.getHistoryForChart(1);n(u);const h=ml.getHistoryForChart(365);i(h)}},[l]);const c=A.useMemo(()=>{const u=[];let h=0,m=0;const g=s.SOL||0,y=t.solBalance*g;t.solBalance>0&&(u.push({name:"Solana",symbol:"SOL",value:y,amount:t.solBalance,price:g,color:Eu[0],hasPrice:g>0,network:"solana"}),g>0?h+=y:m++);const v=t.hlBalance||0;v>0&&(u.push({name:"USDC (Hyperliquid)",symbol:"USDC",value:v,amount:v,price:1,color:Eu[1],hasPrice:!0,network:"hyperliquid"}),h+=v),t.hlPositions&&t.hlPositions.length>0&&t.hlPositions.forEach((w,k)=>{const N=w.position,R=parseFloat(N.szi),D=parseFloat(N.entryPx),O=parseFloat(N.unrealizedPnl),B=Math.abs(R*D)+O;B>0&&(u.push({name:`${N.coin} ${R>=0?"Long":"Short"}`,symbol:N.coin,value:B,amount:Math.abs(R),price:D,color:Eu[(k+2)%Eu.length],hasPrice:!0,network:"hyperliquid",pnl:O}),h+=B)});const b=a.portfolioValue||0;return b>0&&(u.push({name:"USDC (Polymarket)",symbol:"USDC",value:b,amount:b,price:1,color:Eu[2],hasPrice:!0,network:"polymarket"}),h+=b),a.activePositions&&a.activePositions.length>0&&a.activePositions.forEach((w,k)=>{w.currentValue>0&&(u.push({name:`${w.question}`,symbol:w.outcome,value:w.currentValue,amount:w.shares,price:w.currentPrice,color:Eu[(k+4)%Eu.length],hasPrice:!0,network:"polymarket",pnl:w.unrealizedPnl}),h+=w.currentValue)}),(t.assets||[]).forEach((w,k)=>{var R;if(w.isNft||((R=w.symbol)==null?void 0:R.toUpperCase())==="SOL")return;const N=parseFloat(w.amount)/Math.pow(10,w.decimals);if(N>0){const D=s[w.symbol]||0,O=N*D;u.push({name:w.name||w.symbol,symbol:w.symbol,value:O,amount:N,price:D,color:Eu[(k+3)%Eu.length],hasPrice:D>0,network:"solana"}),D>0?h+=O:m++}}),m>0&&u.forEach(w=>{w.hasPrice||(w.value=w.amount*1,w.price=1,h+=w.value)}),{data:u.sort((w,k)=>k.value-w.value),totalValue:h}},[t.solBalance,t.hlBalance,t.hlPositions,t.assets,s,a.portfolioValue,a.currentExposure,a.activePositions]);return{portfolioHistoryDaily:e,portfolioHistoryLongTerm:r,assetPrices:s,assetAllocationData:c}},Wpt=t=>{const[e,n]=A.useState([]),[r,i]=A.useState([]),[s,o]=A.useState(4);A.useEffect(()=>{(async()=>{const c=ke.getUserKey("agent_activity_log"),u=await ke.getItem(c);u&&i(JSON.parse(u))})()},[]);const a=(l,c,u)=>{const h={type:l,desc:c,signature:u,timestamp:Date.now(),status:"pending"};i(m=>{const g=[h,...m].slice(0,50);return ke.setItem(ke.getUserKey("agent_activity_log"),JSON.stringify(g)),g})};return A.useEffect(()=>{if(!t.isUnlocked)return;const l=async()=>{try{if(Vt.isDealerActive()){console.log("[ActivityFeed]   Skipping fetch - dealer is active");return}const u=[];if(t.publicKey){const m=(await Is.getRecentTransactions(t.publicKey)).map(g=>({type:g.err?"Failed":"Transaction",desc:`Signature: ${g.signature.slice(0,8)}...`,time:g.blockTime?new Date(g.blockTime*1e3).toLocaleTimeString():"Unknown",status:g.err?"failed":"success",signature:g.signature,network:"solana",timestamp:g.blockTime?g.blockTime*1e3:0}));u.push(...m)}if(t.hlPublicKey){const m=(await Vt.getUserFillsShared(t.hlPublicKey,20)).map(g=>{const y=g.side==="B"?"Buy":"Sell",v=g.dir||y,b=parseFloat(g.closedPnl||"0"),w=b!==0?` (PnL: ${b>=0?"+":""}$${b.toFixed(2)})`:"";return{type:v,desc:`${g.coin} ${parseFloat(g.sz).toFixed(4)} @ $${parseFloat(g.px).toFixed(2)}${w}`,time:new Date(g.time).toLocaleTimeString(),status:"success",signature:`hl-${g.tid}`,network:"hyperliquid",timestamp:g.time}});u.push(...m)}u.sort((h,m)=>m.timestamp-h.timestamp),n(u)}catch(u){console.error("Failed to fetch history",u)}};l();const c=setInterval(l,3e4);return()=>clearInterval(c)},[t.isUnlocked,t.publicKey,t.hlPublicKey]),{activityFeed:e,localActivityLog:r,activityDisplayCount:s,setActivityDisplayCount:o,addActivityLog:a}},J4="vault-scheduler",Ypt=(t,e,n,r,i)=>{const[s,o]=A.useState([]),[a,l]=A.useState(!1);A.useEffect(()=>{(async()=>{const h=ke.getUserKey("agent_scheduled_tasks"),m=await ke.getItem(h);m&&o(JSON.parse(m)),l(!0)})()},[]);const c=A.useRef(null);return A.useEffect(()=>{if(!t.isUnlocked){qa.stop(J4);return}console.log("[Scheduler]  Starting scheduler loop with Web Worker timer (background-safe, checks every 10s)");const u=async()=>{var g,y,v,b,w,k,N,R,D,O,B,z;const h=Date.now(),m=s.filter(U=>U.status==="active");if(m.length===0){console.log("[Scheduler]   No active tasks to check");return}console.log(`[Scheduler]  Checking ${m.length} active task(s)...`);for(const U of m){let $=!1;if(U.executeAt&&U.executeAt<=h)console.log(`[Scheduler]  Time-based task ${String(U.id).slice(0,6)} triggered`),$=!0;else if(U.condition)try{const{symbol:W,indicator:H,operator:F,value:T,timeframe:_}=U.condition;console.log(`[Scheduler]  Checking ${H.toUpperCase()} for ${W} (${_}): target ${F} ${T}`);const L=await wo.getIndicator(W,H,_);let V=0;if(typeof L.value=="number")V=L.value;else if(typeof L.value=="object"&&L.value!==null){const K=H.toLowerCase();K==="macd"?V=L.value.macd||0:K==="stoch"||K==="stochastic"?V=L.value.k||0:"value"in L.value?V=L.value.value:"rsi"in L.value?V=L.value.rsi:console.warn(`[Scheduler] Unknown indicator object structure for ${H}:`,L.value)}console.log(`[Scheduler]  Current ${H.toUpperCase()}: ${V.toFixed(2)} | Condition: ${F} ${T}`),F===">"&&V>T&&($=!0),F==="<"&&V<T&&($=!0),F===">="&&V>=T&&($=!0),F==="<="&&V<=T&&($=!0),F==="=="&&V==T&&($=!0),console.log($?`[Scheduler]  Condition MET! ${V.toFixed(2)} ${F} ${T}`:`[Scheduler]  Condition NOT met: ${V.toFixed(2)} ${F} ${T}`)}catch(W){console.error(`[Scheduler]   Error checking condition for task ${U.id}:`,W)}if($){if(((g=s.find(F=>F.id===U.id))==null?void 0:g.status)==="executing"){console.log(`[Scheduler]   Task ${String(U.id).slice(0,6)} is already executing, skipping...`);continue}const H=(y=s.find(F=>F.id===U.id))==null?void 0:y.lastExecuted;if(H&&Date.now()-H<3e5){console.log(`[Scheduler]  Task ${String(U.id).slice(0,6)} was recently completed (${Math.round((Date.now()-H)/1e3)}s ago), skipping...`);continue}console.log(`[Scheduler]  Executing task ${String(U.id).slice(0,6)} (${U.type})...`),o(F=>F.map(T=>T.id===U.id?{...T,status:"executing"}:T));try{const F=JSON.parse(U.params||"{}");let T="";if(!t.encryptedPrivateKey)throw new Error("Vault encrypted key not available");const _=await or.decrypt(t.encryptedPrivateKey,e),L=Uint8Array.from(JSON.parse(_)),V=oa.fromSecretKey(L);if(U.type==="SWAP"){console.log(`[Scheduler]  Swapping ${F.amount} ${F.inputToken} -> ${F.outputToken}`);try{T=await Is.executeSwap(V,F.inputToken,F.outputToken,F.amount,K=>console.log(`[Scheduler] ${K}`)),i("Swap",`Scheduled: Swapped ${F.amount} ${F.inputToken} -> ${F.outputToken}`,T)}catch(K){if((v=K.message)!=null&&v.includes("timeout")||K.isTimeout){console.warn("[Scheduler]   Swap confirmation timeout. Verifying transaction status...");const te=K.signature;if(te)try{const G=await Is.connection.getSignatureStatus(te),q=G==null?void 0:G.value;if((q==null?void 0:q.confirmationStatus)==="finalized"||(q==null?void 0:q.confirmationStatus)==="confirmed"){console.log(`[Scheduler]  Transaction verified as successful: ${te}`),T=te,i("Swap",`Scheduled: Swapped ${F.amount} ${F.inputToken} -> ${F.outputToken}`,te),o(M=>{const P=M.map(Y=>Y.id===U.id?{...Y,status:"completed",lastExecuted:Date.now(),result:`Success: ${te}`}:Y);return ke.setItem(ke.getUserKey("agent_scheduled_tasks"),JSON.stringify(P)),P}),n(`Task ${String(U.id).slice(0,4)} completed: ${te.slice(0,8)}...`),r(t.publicKey);continue}else{if(q!=null&&q.err)throw console.error("[Scheduler]  Transaction failed on-chain:",q.err),new Error(`Transaction failed: ${JSON.stringify(q.err)}`);console.warn(`[Scheduler]   Transaction status unknown. Signature: ${te}`),o(M=>{const P=M.map(Y=>Y.id===U.id?{...Y,status:"completed",lastExecuted:Date.now(),result:`Warning: Status unknown - verify manually: ${te}`}:Y);return ke.setItem(ke.getUserKey("agent_scheduled_tasks"),JSON.stringify(P)),P}),n(`Task ${String(U.id).slice(0,4)} - verify: ${te.slice(0,8)}...`),r(t.publicKey);continue}}catch(G){console.error("[Scheduler]   Failed to verify transaction:",G)}}throw K}}else if(U.type==="TRANSFER"){if(console.log(`[Scheduler]  Transferring ${F.amount} tokens to Owner`),!t.ownerPublicKey)throw new Error("Owner wallet not connected");try{F.tokenMint==="So11111111111111111111111111111111111111112"?T=await Is.transferSol(V,t.ownerPublicKey,F.amount):T=await Is.transferToken(V,F.tokenMint,t.ownerPublicKey,F.amount,F.decimals||9),i("Transfer",`Scheduled: Sent ${F.amount} to Owner`,T)}catch(K){if((b=K.message)!=null&&b.includes("timeout")||K.isTimeout){console.warn("[Scheduler]   Transfer confirmation timeout. Verifying transaction status...");const te=K.signature;if(te)try{const G=await Is.connection.getSignatureStatus(te),q=G==null?void 0:G.value;if((q==null?void 0:q.confirmationStatus)==="finalized"||(q==null?void 0:q.confirmationStatus)==="confirmed"){console.log(`[Scheduler]  Transaction verified as successful: ${te}`),T=te,i("Transfer",`Scheduled: Sent ${F.amount} to Owner`,te),o(M=>{const P=M.map(Y=>Y.id===U.id?{...Y,status:"completed",lastExecuted:Date.now(),result:`Success: ${te}`}:Y);return ke.setItem(ke.getUserKey("agent_scheduled_tasks"),JSON.stringify(P)),P}),n(`Task ${String(U.id).slice(0,4)} completed: ${te.slice(0,8)}...`),r(t.publicKey);continue}else{if(q!=null&&q.err)throw console.error("[Scheduler]  Transaction failed on-chain:",q.err),new Error(`Transaction failed: ${JSON.stringify(q.err)}`);console.warn(`[Scheduler]   Transaction status unknown. Signature: ${te}`),o(M=>{const P=M.map(Y=>Y.id===U.id?{...Y,status:"completed",lastExecuted:Date.now(),result:`Warning: Status unknown - verify manually: ${te}`}:Y);return ke.setItem(ke.getUserKey("agent_scheduled_tasks"),JSON.stringify(P)),P}),n(`Task ${String(U.id).slice(0,4)} - verify: ${te.slice(0,8)}...`),r(t.publicKey);continue}}catch(G){console.error("[Scheduler]   Failed to verify transaction:",G)}}throw K}}else if(U.type==="ALERT")console.log(`[Scheduler]  Alert triggered for task ${String(U.id).slice(0,6)}`),T="ALERT_TRIGGERED",n(` ALERT: ${(w=U.condition)==null?void 0:w.indicator.toUpperCase()} ${(k=U.condition)==null?void 0:k.operator} ${(N=U.condition)==null?void 0:N.value}`);else if(U.type==="HL_ORDER"){if(console.log(`[Scheduler]  Executing Hyperliquid Order: ${F.side} ${F.size} ${F.coin}`),!t.hlEncryptedPrivateKey)throw new Error("Hyperliquid Vault not available");const K=await or.decrypt(t.hlEncryptedPrivateKey,e),te=Vt.getWalletFromPrivateKey(K);F.leverage&&F.leverage!==1&&await Un.updateLeverage(te,F.coin,F.leverage,!1);const G=F.isBuy!==void 0?F.isBuy:F.side==="B";let q=F.size;if(q==null&&F.usdcAmount){console.log(`[Scheduler]  Calculating size for ${F.usdcAmount} USDC of ${F.coin}...`);try{let oe=F.price;if(!oe){const Ne=await Vt.getMarketData(F.coin),pe=parseFloat(Ne.levels[1][0].px),Le=parseFloat(Ne.levels[0][0].px);oe=G?pe:Le,console.log(`[Scheduler]   Current Price for ${F.coin}: ${oe}`)}if(!oe||oe===0)throw new Error("Could not determine price for size calculation");const me=await Vt.getAssetDecimals(F.coin),ce=F.usdcAmount/oe,ve=Math.pow(10,me);q=Math.floor(ce*ve)/ve,console.log(`[Scheduler]  Calculated Size: ${q} ${F.coin} (Decimals: ${me})`)}catch(oe){throw console.error("[Scheduler]  Error calculating size:",oe),new Error(`Failed to calculate order size: ${oe.message}`)}}if(!q||q<=0)throw new Error(`Invalid order size: ${q}`);let M=F.orderType||"limit",P=F.price;const Y=await Vt.getAssetDecimals(F.coin),X=Math.max(0,6-Y);if(M==="market"){console.log("[Scheduler]  Converting Market Order to Limit IOC with slippage...");const oe=await Vt.getMarketData(F.coin),me=parseFloat(oe.levels[0][0].px),ce=parseFloat(oe.levels[1][0].px),ve=G?ce:me,Ne=.05;let pe=G?ve*(1+Ne):ve*(1-Ne),Le=parseFloat(pe.toFixed(X));Le=parseFloat(Le.toPrecision(5)),P=parseFloat(Le.toFixed(X)),M="ioc",console.log(`[Scheduler]   Market -> IOC: Base ${ve} -> Slippage ${P}`)}else if(P){let oe=parseFloat(P.toFixed(X));oe=parseFloat(oe.toPrecision(5)),P=parseFloat(oe.toFixed(X)),console.log(`[Scheduler]   Limit price rounded: ${F.price} -> ${P} (maxDecimals=${X})`)}const se=await Un.createOrder(te,F.coin,G,q,P,{orderType:M,reduceOnly:F.reduceOnly||!1,stopLoss:F.stopLoss,takeProfit:F.takeProfit});if(se.status==="ok"){const oe=(O=(D=(R=se.response)==null?void 0:R.data)==null?void 0:D.statuses)==null?void 0:O[0];if(oe!=null&&oe.error)throw new Error(`HL Order Error: ${oe.error}`);T=`HL_ORDER:${((B=oe==null?void 0:oe.filled)==null?void 0:B.oid)||((z=oe==null?void 0:oe.resting)==null?void 0:z.oid)||"placed"}`,i("HL Order",`Placed ${F.side} ${F.size} ${F.coin} @ ${F.price}`,T)}else throw new Error(`HL Order Failed: ${JSON.stringify(se)}`)}o(K=>{const te=K.map(G=>G.id===U.id?{...G,status:"completed",lastExecuted:Date.now(),result:`Success: ${T}`}:G);return ke.setItem(ke.getUserKey("agent_scheduled_tasks"),JSON.stringify(te)),te}),console.log(`[Scheduler]  Task ${String(U.id).slice(0,6)} completed! TX: ${T.slice(0,12)}...`),n(`Task ${String(U.id).slice(0,4)} executed: ${T.slice(0,8)}...`),r(t.publicKey)}catch(F){console.error(`[Scheduler]  Task ${U.id} failed:`,F),o(T=>{const _=T.map(L=>L.id===U.id?{...L,status:"failed",lastExecuted:Date.now(),result:F.message}:L);return ke.setItem(ke.getUserKey("agent_scheduled_tasks"),JSON.stringify(_)),_}),n(`Task ${String(U.id).slice(0,4)} failed: ${F.message}`)}}}};return c.current=u,qa.start(J4,1e4,()=>{c.current&&c.current()}),u(),()=>{console.log("[Scheduler]  Stopping scheduler loop"),qa.stop(J4)}},[t.isUnlocked,s]),{scheduledTasks:s,setScheduledTasks:o}};var Jpt={};const Xpt="agent_conversation_",Qpt="agent_conversations_metadata";class Jo{static getConversationKey(e){return ke.getUserKey(`${Xpt}${e}`)}static getMetadataKey(){return ke.getUserKey(Qpt)}static async saveConversation(e,n){if(!Jpt.TEST&&!n)throw new Error("Password required for encryption");try{const r=await or.encrypt(JSON.stringify(e),n);await ke.setItem(this.getConversationKey(e.id),r);const i={id:e.id,title:e.title,lastMessage:e.lastMessage,timestamp:e.timestamp};await this.updateMetadata(i)}catch(r){throw console.error("Failed to save conversation:",r),r}}static async updateMetadata(e){const n=await ke.getItem(this.getMetadataKey());let r=n?JSON.parse(n):[];if(r=r.filter(i=>i.id!==e.id),r.unshift(e),r.length>50){const i=r.pop();i&&await ke.removeItem(this.getConversationKey(i.id))}await ke.setItem(this.getMetadataKey(),JSON.stringify(r))}static async getHistory(){const e=this.getMetadataKey();console.log("[ConversationService] Loading history from key:",e);const n=await ke.getItem(e);if(console.log("[ConversationService] Raw data:",n?`${n.length} characters`:"null"),!n)return[];try{const r=JSON.parse(n);return console.log("[ConversationService] Parsed conversations:",Array.isArray(r)?r.length:"not array"),Array.isArray(r)?r:[]}catch(r){return console.error("Failed to parse conversation history:",r),[]}}static async loadConversation(e,n){const r=await ke.getItem(this.getConversationKey(e));if(!r)return null;try{const i=await or.decrypt(r,n);return JSON.parse(i)}catch(i){throw console.error(`Failed to load conversation ${e}:`,i),new Error("Failed to decrypt conversation. Wrong password?")}}static async deleteConversation(e){await ke.removeItem(this.getConversationKey(e));const n=await ke.getItem(this.getMetadataKey());if(n){let r=JSON.parse(n);r=r.filter(i=>i.id!==e),await ke.setItem(this.getMetadataKey(),JSON.stringify(r))}}static generateTitle(e){return e?e.length>30?e.substring(0,30)+"...":e:"New Conversation"}}class Zpt{constructor(){this.connection=new S7(vB,"confirmed"),this.apiBaseUrl=bKe}async getAllPools(e=100){try{const n=await fetch(`${this.apiBaseUrl}/pair/all_by_groups`);if(!n.ok)throw new Error(`Meteora API error: ${n.status}`);const r=await n.json();let i=[];return r.groups&&Array.isArray(r.groups)?r.groups.forEach(s=>{s.pairs&&Array.isArray(s.pairs)&&i.push(...s.pairs)}):Array.isArray(r)?i=r:r.pairs&&(i=r.pairs),i.sort((s,o)=>{const a=parseFloat(s.liquidity)||0;return(parseFloat(o.liquidity)||0)-a}),i.slice(0,e).map(s=>this.mapApiPoolToLiquidityPool(s))}catch(n){throw console.error("[MeteoraService] Error fetching pools:",n),n}}async getPool(e){try{const n=await fetch(`${this.apiBaseUrl}/pair/${e}`);if(!n.ok){if(n.status===404)return null;throw new Error(`Meteora API error: ${n.status}`)}const r=await n.json();return this.mapApiPoolToLiquidityPool(r)}catch(n){return console.error("[MeteoraService] Error fetching pool:",n),null}}async queryPools(e){try{let n=await this.getAllPools(500);if(e.tokenMint){const r=e.tokenMint.toLowerCase();n=n.filter(i=>i.tokenA.mint.toLowerCase()===r||i.tokenB.mint.toLowerCase()===r)}if(e.tokenPair){const{tokenA:r,tokenB:i}=e.tokenPair;n=n.filter(s=>s.tokenA.symbol.toUpperCase()===r.toUpperCase()&&s.tokenB.symbol.toUpperCase()===i.toUpperCase()||s.tokenA.symbol.toUpperCase()===i.toUpperCase()&&s.tokenB.symbol.toUpperCase()===r.toUpperCase())}if(e.minTVL!==void 0&&(n=n.filter(r=>r.tvl>=e.minTVL)),e.maxTVL!==void 0&&(n=n.filter(r=>r.tvl<=e.maxTVL)),e.minVolume!==void 0){const r=e.volumeTimeframe||"24h";n=n.filter(i=>(i.volume[r]||i.volume["24h"]||0)>=e.minVolume)}if(e.minAPY!==void 0&&(n=n.filter(r=>(r.apy||0)>=e.minAPY)),e.sortBy){const r=e.sortOrder==="asc"?1:-1;n.sort((i,s)=>{let o,a;switch(e.sortBy){case"tvl":o=i.tvl,a=s.tvl;break;case"volume":const l=e.volumeTimeframe||"24h";o=i.volume[l]||i.volume["24h"]||0,a=s.volume[l]||s.volume["24h"]||0;break;case"apy":o=i.apy||0,a=s.apy||0;break;case"fee":o=i.feeBps,a=s.feeBps;break;default:o=0,a=0}return(a-o)*r})}return e.limit&&(n=n.slice(0,e.limit)),n}catch(n){return console.error("[MeteoraService] Error querying pools:",n),[]}}async getPoolVolume(e,n){try{const r=this.timeframeToDays(n),i=await fetch(`${this.apiBaseUrl}/pair/${e}/analytic/pair_trade_volume?days=${r}`);if(!i.ok)return 0;const s=await i.json();return Array.isArray(s)&&s.length>0?s.reduce((o,a)=>o+(a.volume||0),0):0}catch(r){return console.error("[MeteoraService] Error fetching pool volume:",r),0}}async getPoolAPY(e){const n=await this.getPool(e);return(n==null?void 0:n.apy)||0}async getPoolTVLHistory(e,n=7){try{const r=await fetch(`${this.apiBaseUrl}/pair/${e}/analytic/pair_tvl?days=${n}`);if(!r.ok)return[];const i=await r.json();return Array.isArray(i)?i.map(s=>({timestamp:new Date(s.date||s.timestamp).getTime(),value:s.tvl||s.value||0})):[]}catch(r){return console.error("[MeteoraService] Error fetching TVL history:",r),[]}}async getPositions(e){try{const n=await fetch(`${this.apiBaseUrl}/wallet/${e}/positions`);if(!n.ok){if(n.status===404)return[];throw new Error(`Meteora API error: ${n.status}`)}const r=await n.json();return(Array.isArray(r)?r:r.positions||[]).map(s=>this.mapApiPositionToLiquidityPosition(s))}catch(n){return console.error("[MeteoraService] Error fetching positions:",n),[]}}async getPosition(e){try{const n=await fetch(`${this.apiBaseUrl}/position/${e}`);if(!n.ok){if(n.status===404)return null;throw new Error(`Meteora API error: ${n.status}`)}const r=await n.json();return this.mapApiPositionToLiquidityPosition(r)}catch(n){return console.error("[MeteoraService] Error fetching position:",n),null}}async getUnclaimedFees(e){try{const n=await fetch(`${this.apiBaseUrl}/position/${e}/claim_fees`);if(!n.ok)return{tokenA:0,tokenB:0,totalUSD:0};const r=await n.json();return{tokenA:r.feeX||r.tokenA||0,tokenB:r.feeY||r.tokenB||0,totalUSD:r.totalUSD||0}}catch(n){return console.error("[MeteoraService] Error fetching unclaimed fees:",n),{tokenA:0,tokenB:0,totalUSD:0}}}async addLiquidity(e,n){try{console.log("[MeteoraService] Adding liquidity:",n);const r=await this.loadDLMMSDK();if(!r)return{success:!1,error:"Meteora DLMM SDK not available. Run: npm install @meteora-ag/dlmm"};const i=await r.create(this.connection,new mt(n.poolAddress)),s=await i.getActiveBin(),o=i.lbPair.binStep;let a,l;n.priceMin&&n.priceMax?(a=i.getBinIdFromPrice(n.priceMin,!0),l=i.getBinIdFromPrice(n.priceMax,!1)):(a=s.binId-5,l=s.binId+5);const c=await i.addLiquidityByStrategy({positionPubKey:e.publicKey,user:e.publicKey,totalXAmount:BigInt(n.amountA*Math.pow(10,9)),totalYAmount:BigInt(n.amountB*Math.pow(10,9)),strategy:{minBinId:a,maxBinId:l,strategyType:"Spot"},slippage:n.slippageBps?n.slippageBps/1e4:.005}),u=await this.connection.sendTransaction(c,[e],{skipPreflight:!1});return await this.connection.confirmTransaction(u,"confirmed"),{success:!0,txSignature:u,positionAddress:e.publicKey.toString(),tokensDeposited:{tokenA:n.amountA,tokenB:n.amountB}}}catch(r){return console.error("[MeteoraService] Error adding liquidity:",r),{success:!1,error:r.message||"Failed to add liquidity"}}}async removeLiquidity(e,n){try{console.log("[MeteoraService] Removing liquidity:",n);const r=await this.loadDLMMSDK();if(!r)return{success:!1,error:"Meteora DLMM SDK not available. Run: npm install @meteora-ag/dlmm"};const i=await this.getPosition(n.positionAddress);if(!i)return{success:!1,error:"Position not found"};const s=await r.create(this.connection,new mt(i.poolAddress)),o=Math.floor(n.percentage/100*1e4),a=await s.removeLiquidity({user:e.publicKey,position:new mt(n.positionAddress),binLiquidityRemoval:o,shouldClaimAndClose:n.percentage>=100}),l=await this.connection.sendTransaction(a,[e],{skipPreflight:!1});return await this.connection.confirmTransaction(l,"confirmed"),{success:!0,txSignature:l,tokensReceived:{tokenA:i.tokenAAmount*(n.percentage/100),tokenB:i.tokenBAmount*(n.percentage/100)}}}catch(r){return console.error("[MeteoraService] Error removing liquidity:",r),{success:!1,error:r.message||"Failed to remove liquidity"}}}async claimFees(e,n){try{console.log("[MeteoraService] Claiming fees:",n);const r=await this.loadDLMMSDK();if(!r)return{success:!1,error:"Meteora DLMM SDK not available. Run: npm install @meteora-ag/dlmm"};const i=await this.getPosition(n);if(!i)return{success:!1,error:"Position not found"};const o=await(await r.create(this.connection,new mt(i.poolAddress))).claimSwapFee({owner:e.publicKey,position:new mt(n)}),a=await this.connection.sendTransaction(o,[e],{skipPreflight:!1});return await this.connection.confirmTransaction(a,"confirmed"),{success:!0,txSignature:a,feesClaimed:{tokenA:i.unclaimedFees.tokenA,tokenB:i.unclaimedFees.tokenB,totalUSD:i.unclaimedFees.totalUSD}}}catch(r){return console.error("[MeteoraService] Error claiming fees:",r),{success:!1,error:r.message||"Failed to claim fees"}}}async claimRewards(e,n){try{console.log("[MeteoraService] Claiming rewards:",n);const r=await this.loadDLMMSDK();if(!r)return{success:!1,error:"Meteora DLMM SDK not available. Run: npm install @meteora-ag/dlmm"};const i=await this.getPosition(n);if(!i)return{success:!1,error:"Position not found"};const o=await(await r.create(this.connection,new mt(i.poolAddress))).claimLMReward({owner:e.publicKey,position:new mt(n)}),a=await this.connection.sendTransaction(o,[e],{skipPreflight:!1});return await this.connection.confirmTransaction(a,"confirmed"),{success:!0,txSignature:a}}catch(r){return console.error("[MeteoraService] Error claiming rewards:",r),{success:!1,error:r.message||"Failed to claim rewards"}}}async loadDLMMSDK(){try{const n=await import("@meteora-ag/dlmm");return n.DLMM||n.default}catch{return console.warn("[MeteoraService] DLMM SDK not available - operations will return gracefully"),null}}mapApiPoolToLiquidityPool(e){const n=parseFloat(e.liquidity)||e.tvl||0,r=e.trade_volume_24h||e.volume24h||e.volume||0,i=e.trade_volume_7d||e.volume7d||0;return n>1e4&&console.log("[MeteoraService] Pool with TVL:",e.name,"TVL:",n,"Vol24h:",r),{address:e.address||e.pair_address||e.pubkey,protocol:"meteora_dlmm",name:e.name||`${e.mint_x_symbol||"Token"}-${e.mint_y_symbol||"Token"}`,tokenA:{mint:e.mint_x||e.tokenAMint||"",symbol:e.mint_x_symbol||e.tokenASymbol||"Unknown",decimals:e.mint_x_decimals||e.tokenADecimals||9},tokenB:{mint:e.mint_y||e.tokenBMint||"",symbol:e.mint_y_symbol||e.tokenBSymbol||"Unknown",decimals:e.mint_y_decimals||e.tokenBDecimals||9},tvl:n,feeBps:e.base_fee_bps||e.fee_bps||e.feeBps||0,apy:e.apy||e.apr||0,volume:{"24h":r,"7d":i},binStep:e.bin_step||e.binStep,currentPrice:e.current_price||e.price}}mapApiPositionToLiquidityPosition(e){return{positionAddress:e.address||e.position_address||e.pubkey,poolAddress:e.pair_address||e.pool_address||e.pool,protocol:"meteora_dlmm",tokenAAmount:e.token_x_amount||e.tokenA||0,tokenBAmount:e.token_y_amount||e.tokenB||0,valueUSD:e.value_usd||e.totalValue||0,unclaimedFees:{tokenA:e.unclaimed_fee_x||0,tokenB:e.unclaimed_fee_y||0,totalUSD:e.unclaimed_fee_usd||0},priceRange:e.lower_bin_id&&e.upper_bin_id?{min:e.lower_bin_price||0,max:e.upper_bin_price||0,current:e.current_price||0,inRange:e.in_range??!0}:void 0,binIds:e.bin_ids||[]}}timeframeToDays(e){switch(e){case"5m":return 1;case"15m":return 1;case"1h":return 1;case"4h":return 1;case"24h":return 1;case"7d":return 7;default:return 1}}}const ls=new Zpt;class emt{async getPoolContext(e){const n=await ls.getPool(e);return n?{pool:n,volume24h:n.volume["24h"]||0,volume7d:n.volume["7d"]||0,tvl:n.tvl,apy:n.apy||0,feeBps:n.feeBps,binStep:n.binStep,currentPrice:n.currentPrice,timestamp:Date.now()}:null}async getBatchContext(e,n){const r=await ls.queryPools(n||{limit:50}),i=r.map(c=>({pool:c,volume24h:c.volume["24h"]||0,volume7d:c.volume["7d"]||0,tvl:c.tvl,apy:c.apy||0,feeBps:c.feeBps,binStep:c.binStep,currentPrice:c.currentPrice,timestamp:Date.now()})),s=this.rankPools(r,"volume",10),o=this.rankPools(r,"apy",10);let a=[],l=0;return e&&(a=await ls.getPositions(e),l=a.reduce((c,u)=>c+u.valueUSD,0)),{pools:i,topByVolume:s,topByAPY:o,positions:a,totalValueUSD:l,timestamp:Date.now()}}async getPortfolioContext(e){const n=await ls.getPositions(e),r=n.reduce((s,o)=>s+o.valueUSD,0),i=n.reduce((s,o)=>{var a;return s+(((a=o.unclaimedFees)==null?void 0:a.totalUSD)||0)},0);return{positions:n,totalValueUSD:r,totalUnclaimedFeesUSD:i,totalUnclaimedRewardsUSD:0,byProtocol:[{protocol:"meteora_dlmm",positionCount:n.length,totalValueUSD:r}]}}async getTopPools(e,n){const r={minTVL:n==null?void 0:n.minTVL,volumeTimeframe:n==null?void 0:n.timeframe,sortBy:e,sortOrder:"desc",limit:(n==null?void 0:n.limit)||10},i=await ls.queryPools(r);return this.rankPools(i,e,(n==null?void 0:n.limit)||10)}async findBestPool(e,n,r="tvl"){const i=await ls.queryPools({tokenPair:{tokenA:e,tokenB:n},sortBy:r,sortOrder:"desc",limit:1});return i.length===0?null:{pool:i[0],rank:1,score:this.getPoolScore(i[0],r),reason:`Best Meteora pool for ${e}/${n} by ${r}`}}buildAnalysisPrompt(e,n){const{pools:r,topByVolume:i,topByAPY:s,positions:o,totalValueUSD:a}=e;let l=`## Meteora DLMM Context

`;return l+=`**User Query:** ${n}

`,o.length>0&&(l+=`### Your Meteora Positions
`,l+=`- Total Positions: ${o.length}
`,l+=`- Total Value: $${a.toLocaleString()}

`,o.slice(0,5).forEach((c,u)=>{l+=`${u+1}. Pool: ${c.poolAddress.slice(0,8)}... | `,l+=`Value: $${c.valueUSD.toLocaleString()} | `,l+=`Unclaimed Fees: $${c.unclaimedFees.totalUSD.toFixed(2)}
`}),l+=`
`),l+=`### Top Pools by Volume (24h)
`,i.slice(0,5).forEach((c,u)=>{l+=`${u+1}. ${c.pool.name} | TVL: $${c.pool.tvl.toLocaleString()} | `,l+=`Vol: $${(c.pool.volume["24h"]||0).toLocaleString()} | `,l+=`APY: ${(c.pool.apy||0).toFixed(2)}%
`}),l+=`
`,l+=`### Top Pools by APY
`,s.slice(0,5).forEach((c,u)=>{l+=`${u+1}. ${c.pool.name} | APY: ${(c.pool.apy||0).toFixed(2)}% | `,l+=`TVL: $${c.pool.tvl.toLocaleString()}
`}),l}rankPools(e,n,r){return[...e].sort((s,o)=>{const a=this.getPoolScore(s,n);return this.getPoolScore(o,n)-a}).slice(0,r).map((s,o)=>({pool:s,rank:o+1,score:this.getPoolScore(s,n),reason:`Ranked #${o+1} by ${n}`}))}getPoolScore(e,n){switch(n){case"volume":return e.volume["24h"]||0;case"apy":return e.apy||0;case"tvl":return e.tvl;default:return 0}}}const tmt=new emt;class nmt{constructor(){this.connection=new S7(vB,"confirmed"),this.apiBaseUrl="https://api-v3.raydium.io"}async getPoolList(e){var n;try{const r=e==="clmm"?"Concentrated":e==="cpmm"?"Standard":"all",i=await fetch(`${this.apiBaseUrl}/pools/info/list?poolType=${r}&poolSortField=default&sortType=desc&pageSize=50&page=1`);if(!i.ok)throw new Error(`Raydium API error: ${i.status}`);const s=await i.json();return(((n=s.data)==null?void 0:n.data)||s.data||[]).map(a=>this.mapApiPoolToLiquidityPool(a,e))}catch(r){return console.error("[RaydiumService] Error fetching pools:",r),[]}}async getPoolById(e){try{const n=await fetch(`${this.apiBaseUrl}/pools/info/ids?ids=${e}`);if(!n.ok){if(n.status===404)return null;throw new Error(`Raydium API error: ${n.status}`)}const r=await n.json(),i=r.data||r||[];return i.length===0?null:this.mapApiPoolToLiquidityPool(i[0])}catch(n){return console.error("[RaydiumService] Error fetching pool:",n),null}}async fetchPoolByMints(e,n){try{const r=await fetch(`${this.apiBaseUrl}/pools/info/mint?mint1=${e}&mint2=${n}`);if(!r.ok)throw new Error(`Raydium API error: ${r.status}`);const i=await r.json();return(i.data||i||[]).map(o=>this.mapApiPoolToLiquidityPool(o))}catch(r){return console.error("[RaydiumService] Error fetching pools by mints:",r),[]}}async queryPools(e){try{let n=await this.getPoolList("all");if(e.protocol&&e.protocol.length>0&&(n=n.filter(r=>e.protocol.includes(r.protocol))),e.tokenMint){const r=e.tokenMint.toLowerCase();n=n.filter(i=>i.tokenA.mint.toLowerCase()===r||i.tokenB.mint.toLowerCase()===r)}if(e.tokenPair){const{tokenA:r,tokenB:i}=e.tokenPair;n=n.filter(s=>s.tokenA.symbol.toUpperCase()===r.toUpperCase()&&s.tokenB.symbol.toUpperCase()===i.toUpperCase()||s.tokenA.symbol.toUpperCase()===i.toUpperCase()&&s.tokenB.symbol.toUpperCase()===r.toUpperCase())}if(e.minTVL!==void 0&&(n=n.filter(r=>r.tvl>=e.minTVL)),e.maxTVL!==void 0&&(n=n.filter(r=>r.tvl<=e.maxTVL)),e.minVolume!==void 0){const r=e.volumeTimeframe||"24h";n=n.filter(i=>(i.volume[r]||i.volume["24h"]||0)>=e.minVolume)}if(e.minAPY!==void 0&&(n=n.filter(r=>(r.apy||0)>=e.minAPY)),e.sortBy){const r=e.sortOrder==="asc"?1:-1;n.sort((i,s)=>{let o,a;switch(e.sortBy){case"tvl":o=i.tvl,a=s.tvl;break;case"volume":const l=e.volumeTimeframe||"24h";o=i.volume[l]||i.volume["24h"]||0,a=s.volume[l]||s.volume["24h"]||0;break;case"apy":o=i.apy||0,a=s.apy||0;break;case"fee":o=i.feeBps,a=s.feeBps;break;default:o=0,a=0}return(a-o)*r})}return e.limit&&(n=n.slice(0,e.limit)),n}catch(n){return console.error("[RaydiumService] Error querying pools:",n),[]}}async getPoolVolume(e,n){const r=await this.getPoolById(e);return r&&(r.volume[n]||r.volume["24h"])||0}async getPoolAPY(e){const n=await this.getPoolById(e);return(n==null?void 0:n.apy)||0}async getPositions(e){try{const n=await fetch(`${this.apiBaseUrl}/clmm/position/byOwner?owner=${e}`);if(!n.ok){if(n.status===404)return[];throw new Error(`Raydium API error: ${n.status}`)}const r=await n.json();return(r.data||r||[]).map(s=>this.mapApiPositionToLiquidityPosition(s))}catch(n){return console.error("[RaydiumService] Error fetching positions:",n),[]}}async getPositionByNft(e){try{const n=await fetch(`${this.apiBaseUrl}/clmm/position/byNft?nft=${e}`);if(!n.ok){if(n.status===404)return null;throw new Error(`Raydium API error: ${n.status}`)}const r=await n.json();return this.mapApiPositionToLiquidityPosition(r.data||r)}catch(n){return console.error("[RaydiumService] Error fetching position:",n),null}}async getSwapQuote(e){var n,r,i,s;try{const o=await fetch(`${this.apiBaseUrl}/compute/swap-base-in?inputMint=${e.inputMint}&outputMint=${e.outputMint}&amount=${e.amount}&slippageBps=${e.slippageBps||50}`);if(!o.ok)throw new Error(`Raydium API error: ${o.status}`);const a=await o.json();return{inputMint:e.inputMint,outputMint:e.outputMint,inputAmount:e.amount,outputAmount:((n=a.data)==null?void 0:n.outputAmount)||a.outputAmount||0,priceImpact:((r=a.data)==null?void 0:r.priceImpact)||a.priceImpact||0,fee:((i=a.data)==null?void 0:i.fee)||a.fee||0,route:((s=a.data)==null?void 0:s.routePlan)||a.route||[]}}catch(o){return console.error("[RaydiumService] Error getting swap quote:",o),null}}async swap(e,n){try{console.log("[RaydiumService] Executing swap:",n);const r=await this.loadRaydiumSDK();if(!r)return{success:!1,error:"Raydium SDK not available. Run: npm install @raydium-io/raydium-sdk-v2"};const i=await r.load({connection:this.connection,owner:e,cluster:"devnet"}),s=await this.getSwapQuote(n);if(!s)return{success:!1,error:"Could not get swap quote"};const{txId:o}=await i.trade.swap({inputMint:new mt(n.inputMint),outputMint:new mt(n.outputMint),amount:n.amount,slippage:(n.slippageBps||50)/1e4});return await this.connection.confirmTransaction(o,"confirmed"),{success:!0,txSignature:o,details:{inputAmount:n.amount,outputAmount:s.outputAmount,priceImpact:s.priceImpact}}}catch(r){return console.error("[RaydiumService] Error executing swap:",r),{success:!1,error:r.message||"Failed to execute swap"}}}async addLiquidityCLMM(e,n){try{console.log("[RaydiumService] Adding CLMM liquidity:",n);const r=await this.loadRaydiumSDK();if(!r)return{success:!1,error:"Raydium SDK not available. Run: npm install @raydium-io/raydium-sdk-v2"};const i=await r.load({connection:this.connection,owner:e,cluster:"devnet"}),s=await this.getPoolById(n.poolAddress);if(!s)return{success:!1,error:"Pool not found"};let o,a;if(n.priceMin&&n.priceMax)o=this.priceToTick(n.priceMin,s.tokenA.decimals,s.tokenB.decimals),a=this.priceToTick(n.priceMax,s.tokenA.decimals,s.tokenB.decimals);else{const u=this.priceToTick(s.currentPrice||1,s.tokenA.decimals,s.tokenB.decimals);o=u-1e3,a=u+1e3}const{txId:l,nftMint:c}=await i.clmm.openPositionFromBase({poolId:n.poolAddress,ownerInfo:{useSOLBalance:!0},tickLower:o,tickUpper:a,base:"MintA",baseAmount:BigInt(Math.floor(n.amountA*Math.pow(10,s.tokenA.decimals))),otherAmountMax:BigInt(Math.floor(n.amountB*Math.pow(10,s.tokenB.decimals)))});return await this.connection.confirmTransaction(l,"confirmed"),{success:!0,txSignature:l,positionAddress:c==null?void 0:c.toString(),tokensDeposited:{tokenA:n.amountA,tokenB:n.amountB}}}catch(r){return console.error("[RaydiumService] Error adding liquidity:",r),{success:!1,error:r.message||"Failed to add liquidity"}}}async addLiquidityCPMM(e,n){try{console.log("[RaydiumService] Adding CPMM liquidity:",n);const r=await this.loadRaydiumSDK();if(!r)return{success:!1,error:"Raydium SDK not available. Run: npm install @raydium-io/raydium-sdk-v2"};const i=await r.load({connection:this.connection,owner:e,cluster:"devnet"}),s=await this.getPoolById(n.poolAddress);if(!s)return{success:!1,error:"Pool not found"};const{txId:o}=await i.cpmm.addLiquidity({poolId:n.poolAddress,inputAmount:BigInt(Math.floor(n.amountA*Math.pow(10,s.tokenA.decimals))),slippage:(n.slippageBps||50)/1e4});return await this.connection.confirmTransaction(o,"confirmed"),{success:!0,txSignature:o,tokensDeposited:{tokenA:n.amountA,tokenB:n.amountB}}}catch(r){return console.error("[RaydiumService] Error adding liquidity:",r),{success:!1,error:r.message||"Failed to add liquidity"}}}async removeLiquidity(e,n){try{console.log("[RaydiumService] Removing liquidity:",n);const r=await this.loadRaydiumSDK();if(!r)return{success:!1,error:"Raydium SDK not available. Run: npm install @raydium-io/raydium-sdk-v2"};const i=await r.load({connection:this.connection,owner:e,cluster:"devnet"}),s=await this.getPositionByNft(n.positionAddress);if(!s)return{success:!1,error:"Position not found"};const o=n.percentage>=100,{txId:a}=await i.clmm.decreaseLiquidity({poolId:s.poolAddress,ownerPosition:new mt(n.positionAddress),liquidity:o?"all":`${n.percentage}%`,amountMinA:"0",amountMinB:"0"});return await this.connection.confirmTransaction(a,"confirmed"),{success:!0,txSignature:a,tokensReceived:{tokenA:s.tokenAAmount*(n.percentage/100),tokenB:s.tokenBAmount*(n.percentage/100)}}}catch(r){return console.error("[RaydiumService] Error removing liquidity:",r),{success:!1,error:r.message||"Failed to remove liquidity"}}}async loadRaydiumSDK(){try{const n=await import("@raydium-io/raydium-sdk-v2");return n.Raydium||n.default}catch{return console.warn("[RaydiumService] Raydium SDK not available - operations will return gracefully"),null}}priceToTick(e,n,r){const i=e*Math.pow(10,r-n);return Math.floor(Math.log(i)/Math.log(1.0001))}tickToPrice(e,n,r){return Math.pow(1.0001,e)*Math.pow(10,n-r)}mapApiPoolToLiquidityPool(e,n){var a,l,c,u,h,m,g,y,v,b,w;const r=e.type||n,i=r==="Concentrated"||r==="clmm"?"raydium_clmm":"raydium_cpmm",s=((a=e.day)==null?void 0:a.volume)||e.volume24h||0,o=((l=e.week)==null?void 0:l.volume)||e.volume7d||0;return{address:e.id||e.poolId||e.address,protocol:i,name:e.poolName||`${((c=e.mintA)==null?void 0:c.symbol)||"Token"}-${((u=e.mintB)==null?void 0:u.symbol)||"Token"}`,tokenA:{mint:((h=e.mintA)==null?void 0:h.address)||e.baseMint||"",symbol:((m=e.mintA)==null?void 0:m.symbol)||e.baseSymbol||"Unknown",decimals:((g=e.mintA)==null?void 0:g.decimals)||e.baseDecimals||9},tokenB:{mint:((y=e.mintB)==null?void 0:y.address)||e.quoteMint||"",symbol:((v=e.mintB)==null?void 0:v.symbol)||e.quoteSymbol||"Unknown",decimals:((b=e.mintB)==null?void 0:b.decimals)||e.quoteDecimals||9},tvl:e.tvl||e.liquidity||0,feeBps:e.feeRate?e.feeRate*1e4:e.feeBps||0,apy:((w=e.day)==null?void 0:w.apr)||e.apy||0,volume:{"24h":s,"7d":o},tickSpacing:e.tickSpacing,currentPrice:e.price}}mapApiPositionToLiquidityPosition(e){return{positionAddress:e.nftMint||e.positionId||e.address,poolAddress:e.poolId||e.pool,protocol:"raydium_clmm",tokenAAmount:e.amountA||e.tokenA||0,tokenBAmount:e.amountB||e.tokenB||0,valueUSD:e.positionUsd||e.valueUsd||0,unclaimedFees:{tokenA:e.tokenFeeAmountA||0,tokenB:e.tokenFeeAmountB||0,totalUSD:e.unclaimedFeeUsd||0},priceRange:{min:e.priceLower||0,max:e.priceUpper||0,current:e.currentPrice||0,inRange:e.inRange??!0},tickLower:e.tickLower,tickUpper:e.tickUpper,nftMint:e.nftMint}}}const Ai=new nmt;class rmt{async getPoolContext(e){const n=await Ai.getPoolById(e);return n?{pool:n,volume24h:n.volume["24h"]||0,volume7d:n.volume["7d"]||0,tvl:n.tvl,apy:n.apy||0,feeBps:n.feeBps,tickSpacing:n.tickSpacing,currentPrice:n.currentPrice,timestamp:Date.now()}:null}async getBatchContext(e,n){const r=await Ai.queryPools(n||{limit:50}),i=r.map(c=>({pool:c,volume24h:c.volume["24h"]||0,volume7d:c.volume["7d"]||0,tvl:c.tvl,apy:c.apy||0,feeBps:c.feeBps,tickSpacing:c.tickSpacing,currentPrice:c.currentPrice,timestamp:Date.now()})),s=this.rankPools(r,"volume",10),o=this.rankPools(r,"apy",10);let a=[],l=0;return e&&(a=await Ai.getPositions(e),l=a.reduce((c,u)=>c+u.valueUSD,0)),{pools:i,topByVolume:s,topByAPY:o,positions:a,totalValueUSD:l,timestamp:Date.now()}}async getPortfolioContext(e){const n=await Ai.getPositions(e),r=n.reduce((a,l)=>a+l.valueUSD,0),i=n.reduce((a,l)=>{var c;return a+(((c=l.unclaimedFees)==null?void 0:c.totalUSD)||0)},0),s=n.filter(a=>a.protocol==="raydium_clmm"),o=n.filter(a=>a.protocol==="raydium_cpmm");return{positions:n,totalValueUSD:r,totalUnclaimedFeesUSD:i,totalUnclaimedRewardsUSD:0,byProtocol:[{protocol:"raydium_clmm",positionCount:s.length,totalValueUSD:s.reduce((a,l)=>a+l.valueUSD,0)},{protocol:"raydium_cpmm",positionCount:o.length,totalValueUSD:o.reduce((a,l)=>a+l.valueUSD,0)}]}}async getTopPools(e,n){const r={minTVL:n==null?void 0:n.minTVL,volumeTimeframe:n==null?void 0:n.timeframe,sortBy:e,sortOrder:"desc",limit:(n==null?void 0:n.limit)||10};n!=null&&n.poolType&&(r.protocol=[n.poolType==="clmm"?"raydium_clmm":"raydium_cpmm"]);const i=await Ai.queryPools(r);return this.rankPools(i,e,(n==null?void 0:n.limit)||10)}async findBestPool(e,n,r="tvl"){const i=await Ai.queryPools({tokenPair:{tokenA:e,tokenB:n},sortBy:r,sortOrder:"desc",limit:1});return i.length===0?null:{pool:i[0],rank:1,score:this.getPoolScore(i[0],r),reason:`Best Raydium pool for ${e}/${n} by ${r}`}}async getSwapQuote(e,n,r,i){return Ai.getSwapQuote({inputMint:e,outputMint:n,amount:r,slippageBps:i})}priceToTick(e,n,r){return Ai.priceToTick(e,n,r)}tickToPrice(e,n,r){return Ai.tickToPrice(e,n,r)}calculateOptimalRange(e,n){const i={conservative:.1,moderate:.25,aggressive:.5}[n],s=e*(1-i),o=e*(1+i);return{priceMin:s,priceMax:o,rangeWidth:i*2*100}}buildAnalysisPrompt(e,n){const{pools:r,topByVolume:i,topByAPY:s,positions:o,totalValueUSD:a}=e;let l=`## Raydium Context

`;return l+=`**User Query:** ${n}

`,o.length>0&&(l+=`### Your Raydium Positions
`,l+=`- Total Positions: ${o.length}
`,l+=`- Total Value: $${a.toLocaleString()}

`,o.slice(0,5).forEach((c,u)=>{l+=`${u+1}. Pool: ${c.poolAddress.slice(0,8)}... | `,l+=`Value: $${c.valueUSD.toLocaleString()} | `,l+=`Unclaimed: $${c.unclaimedFees.totalUSD.toFixed(2)}
`}),l+=`
`),l+=`### Top Pools by Volume (24h)
`,i.slice(0,5).forEach((c,u)=>{l+=`${u+1}. ${c.pool.name} | TVL: $${c.pool.tvl.toLocaleString()} | `,l+=`Vol: $${(c.pool.volume["24h"]||0).toLocaleString()} | `,l+=`APY: ${(c.pool.apy||0).toFixed(2)}%
`}),l+=`
`,l+=`### Top Pools by APY
`,s.slice(0,5).forEach((c,u)=>{l+=`${u+1}. ${c.pool.name} | APY: ${(c.pool.apy||0).toFixed(2)}% | `,l+=`TVL: $${c.pool.tvl.toLocaleString()}
`}),l}rankPools(e,n,r){return[...e].sort((s,o)=>{const a=this.getPoolScore(s,n);return this.getPoolScore(o,n)-a}).slice(0,r).map((s,o)=>({pool:s,rank:o+1,score:this.getPoolScore(s,n),reason:`Ranked #${o+1} by ${n}`}))}getPoolScore(e,n){switch(n){case"volume":return e.volume["24h"]||0;case"apy":return e.apy||0;case"tvl":return e.tvl;default:return 0}}}const S0e=new rmt;class imt{async searchPools(e){const n=xo();if(!n)return console.warn("[PoolService] Supabase client not initialized, skipping search."),[];try{let r=n.from("liquidity_pools").select(`
                    id,
                    address,
                    protocol,
                    name,
                    token_a_mint,
                    token_b_mint,
                    liquidity_pool_snapshots (
                        tvl,
                        volume_24h,
                        apy,
                        price,
                        timestamp
                    )
                `).order("timestamp",{foreignTable:"liquidity_pool_snapshots",ascending:!1}).limit(1,{foreignTable:"liquidity_pool_snapshots"});e.protocol&&e.protocol.length>0&&(r=r.in("protocol",e.protocol)),e.tokenPair;const{data:i,error:s}=await r;if(s)throw s;return i?i.map(o=>this.mapRowToPool(o)):[]}catch(r){return console.error("[PoolService] Error searching pools:",r),[]}}async getTopPools(e,n=1440,r){const i=xo();if(!i)return[];try{if(e==="volume"&&n<1440){const{data:l,error:c}=await i.rpc("get_top_pools_with_delta",{timeframe_minutes:n,rank_limit:50});if(c)console.warn("[PoolService] RPC failed, falling back to standard",c);else{let u=(l||[]).map(h=>({address:h.pool_address,protocol:h.protocol,name:h.pool_name,tokenA:{mint:"",symbol:h.pool_name.split("-")[0]||"?",decimals:9},tokenB:{mint:"",symbol:h.pool_name.split("-")[1]||"?",decimals:9},tvl:h.current_tvl,volume:{"24h":h.delta_volume},apy:h.current_apy}));return r&&(u=this.applyFilters(u,r)),u}}const{data:s,error:o}=await i.from("liquidity_pools").select(`
                    *,
                    liquidity_pool_snapshots (
                        tvl,
                        volume_24h,
                        apy,
                        timestamp
                    )
                `).order("timestamp",{foreignTable:"liquidity_pool_snapshots",ascending:!1}).limit(1,{foreignTable:"liquidity_pool_snapshots"});if(o)throw o;let a=(s||[]).map(l=>this.mapRowToPool(l));return r&&(a=this.applyFilters(a,r)),a.sort((l,c)=>e==="tvl"?c.tvl-l.tvl:e==="apy"?c.apy-l.apy:(c.volume["24h"]||0)-(l.volume["24h"]||0)),a.slice(0,50)}catch(s){return console.error("[PoolService] Error getting top pools:",s),[]}}applyFilters(e,n){return e.filter(r=>{if(n.minTVL&&r.tvl<n.minTVL||n.minVolume&&(r.volume["24h"]||0)<n.minVolume||n.minAPY&&(r.apy||0)<n.minAPY||n.protocol&&n.protocol.length>0&&!n.protocol.includes(r.protocol))return!1;if(n.tokenAllowlist&&n.tokenAllowlist.length>0){const i=r.tokenA.symbol.toUpperCase(),s=r.tokenB.symbol.toUpperCase(),o=n.tokenAllowlist.map(a=>a.toUpperCase());if(!o.includes(i)&&!o.includes(s))return!1}if(n.tokenBlocklist&&n.tokenBlocklist.length>0){const i=r.tokenA.symbol.toUpperCase(),s=r.tokenB.symbol.toUpperCase(),o=n.tokenBlocklist.map(a=>a.toUpperCase());if(o.includes(i)||o.includes(s))return!1}return!0})}mapRowToPool(e){var r;const n=((r=e.liquidity_pool_snapshots)==null?void 0:r[0])||{};return{address:e.address,protocol:e.protocol,name:e.name,tokenA:{mint:e.token_a_mint,symbol:e.name.split("-")[0]||"Unknown",decimals:9},tokenB:{mint:e.token_b_mint,symbol:e.name.split("-")[1]||"Unknown",decimals:9},tvl:n.tvl||0,feeBps:0,apy:n.apy||0,volume:{"24h":n.volume_24h||0,"7d":0},currentPrice:n.current_price||n.price||0}}}const kee=new imt;class smt{async discoverPools(e){return await kee.searchPools(e||{})}async searchPools(e,n,r){const i={tokenPair:{tokenA:e,tokenB:n},sortBy:"tvl",sortOrder:"desc"};if(r==="meteora")return ls.queryPools(i);if(r==="raydium")return Ai.queryPools(i);const[s,o]=await Promise.all([ls.queryPools(i),Ai.queryPools(i)]);return[...s,...o].sort((a,l)=>l.tvl-a.tvl)}async getAllPositions(e){const[n,r]=await Promise.all([ls.getPositions(e),Ai.getPositions(e)]),i=[...n,...r],s=i.reduce((a,l)=>a+l.valueUSD,0),o=i.reduce((a,l)=>{var c;return a+(((c=l.unclaimedFees)==null?void 0:c.totalUSD)||0)},0);return{meteora:n,raydium:r,totalValueUSD:s,totalUnclaimedFeesUSD:o}}async getPortfolioContext(e){const n=await this.getAllPositions(e);return{positions:[...n.meteora,...n.raydium],totalValueUSD:n.totalValueUSD,totalUnclaimedFeesUSD:n.totalUnclaimedFeesUSD,totalUnclaimedRewardsUSD:0,byProtocol:[{protocol:"meteora_dlmm",positionCount:n.meteora.length,totalValueUSD:n.meteora.reduce((i,s)=>i+s.valueUSD,0)},{protocol:"raydium_clmm",positionCount:n.raydium.length,totalValueUSD:n.raydium.reduce((i,s)=>i+s.valueUSD,0)}]}}async getTopPools(e,n){const r=this.timeframeToMinutes((n==null?void 0:n.timeframe)||"24h"),i={minTVL:n==null?void 0:n.minTVL,minVolume:n==null?void 0:n.minVolume,minAPY:n==null?void 0:n.minAPY,protocol:n==null?void 0:n.protocol},s=await kee.getTopPools(e,r,i),o=(n==null?void 0:n.limit)||10;return s.slice(0,o).map((a,l)=>({pool:a,rank:l+1,score:this.getPoolScore(a,e),reason:`#${l+1} by ${e} across all protocols`}))}timeframeToMinutes(e){switch(e){case"5m":return 5;case"15m":return 15;case"1h":return 60;case"4h":return 240;case"24h":return 1440;case"7d":return 10080;default:return 1440}}async compareProtocols(e,n){const[r,i]=await Promise.all([ls.queryPools({tokenPair:{tokenA:e,tokenB:n}}),Ai.queryPools({tokenPair:{tokenA:e,tokenB:n}})]),s=[...r,...i];let o=null,a=-1;for(const l of s){const c=l.tvl/1e3+(l.volume["24h"]||0)/100+(l.apy||0);c>a&&(a=c,o=l)}return{tokenPair:`${e}/${n}`,meteora:r,raydium:i,recommendation:o?{protocol:o.protocol,poolAddress:o.address,reason:`Best overall score considering TVL ($${o.tvl.toLocaleString()}), volume ($${(o.volume["24h"]||0).toLocaleString()}), and APY (${(o.apy||0).toFixed(2)}%)`}:{protocol:"meteora_dlmm",poolAddress:"",reason:"No pools found for this token pair"}}}async recommendProtocol(e,n,r="tvl"){const i=await this.compareProtocols(e,n),s=[...i.meteora,...i.raydium];return s.length===0?[{protocol:"meteora_dlmm",poolAddress:"",reason:`No pools found for ${e}/${n}`}]:s.sort((a,l)=>{const c=this.getPoolScore(a,r);return this.getPoolScore(l,r)-c}).slice(0,3).map((a,l)=>({protocol:a.protocol,poolAddress:a.address,reason:`#${l+1} by ${r}: ${this.formatScore(a,r)}`}))}async buildUnifiedContext(e,n){const[r,i]=await Promise.all([tmt.getBatchContext(e,n),S0e.getBatchContext(e,n)]),s=[...r.pools.map(l=>l.pool),...i.pools.map(l=>l.pool)],o=s.sort((l,c)=>(c.volume["24h"]||0)-(l.volume["24h"]||0)).slice(0,10).map((l,c)=>({pool:l,rank:c+1,score:l.volume["24h"]||0,reason:"Top volume"})),a=s.sort((l,c)=>(c.apy||0)-(l.apy||0)).slice(0,10).map((l,c)=>({pool:l,rank:c+1,score:l.apy||0,reason:"Top APY"}));return{meteora:{pools:r.pools.map(l=>l.pool),topByVolume:r.topByVolume,topByAPY:r.topByAPY},raydium:{pools:i.pools.map(l=>l.pool),topByVolume:i.topByVolume,topByAPY:i.topByAPY},combined:{topByVolume:o,topByAPY:a},positions:{meteora:r.positions,raydium:i.positions,totalValueUSD:r.totalValueUSD+i.totalValueUSD,totalUnclaimedFeesUSD:r.positions.reduce((l,c)=>{var u;return l+(((u=c.unclaimedFees)==null?void 0:u.totalUSD)||0)},0)+i.positions.reduce((l,c)=>{var u;return l+(((u=c.unclaimedFees)==null?void 0:u.totalUSD)||0)},0)},timestamp:Date.now()}}buildAnalysisPrompt(e,n){let r=`## Solana Liquidity Pool Context

`;r+=`**Query:** ${n}

`;const{positions:i}=e;return(i.meteora.length>0||i.raydium.length>0)&&(r+=`### Your LP Portfolio
`,r+=`- Total Value: $${i.totalValueUSD.toLocaleString()}
`,r+=`- Unclaimed Fees: $${i.totalUnclaimedFeesUSD.toFixed(2)}
`,r+=`- Meteora Positions: ${i.meteora.length}
`,r+=`- Raydium Positions: ${i.raydium.length}

`),r+=`### Top Pools by Volume (All Protocols)
`,e.combined.topByVolume.slice(0,5).forEach((s,o)=>{const a=s.pool.protocol.includes("meteora")?"MET":"RAY";r+=`${o+1}. [${a}] ${s.pool.name} | `,r+=`TVL: $${s.pool.tvl.toLocaleString()} | `,r+=`Vol: $${(s.pool.volume["24h"]||0).toLocaleString()}
`}),r+=`
`,r+=`### Top Pools by APY
`,e.combined.topByAPY.slice(0,5).forEach((s,o)=>{const a=s.pool.protocol.includes("meteora")?"MET":"RAY";r+=`${o+1}. [${a}] ${s.pool.name} | `,r+=`APY: ${(s.pool.apy||0).toFixed(2)}% | `,r+=`TVL: $${s.pool.tvl.toLocaleString()}
`}),r}getPoolScore(e,n){switch(n){case"volume":return e.volume["24h"]||0;case"apy":return e.apy||0;case"tvl":return e.tvl;default:return 0}}formatScore(e,n){switch(n){case"volume":return`$${(e.volume["24h"]||0).toLocaleString()}`;case"apy":return`${(e.apy||0).toFixed(2)}%`;case"tvl":return`$${e.tvl.toLocaleString()}`;default:return""}}}const Ng=new smt;class omt{async calculateVolatility(e,n=7){var r,i;try{const s=await this.getPriceHistory(e,n);if(s.length<2)return{poolAddress:e,currentPrice:((r=s[0])==null?void 0:r.price)||0,volatilityDaily:0,volatilityAnnualized:0,priceChange24h:0,priceChange7d:0,dataPoints:s.length,confidence:"low",error:"Insufficient data for volatility calculation"};const o=[];for(let R=1;R<s.length;R++){const D=s[R-1].price,O=s[R].price;D>0&&O>0&&o.push(Math.log(O/D))}if(o.length===0)return{poolAddress:e,currentPrice:((i=s[s.length-1])==null?void 0:i.price)||0,volatilityDaily:0,volatilityAnnualized:0,priceChange24h:0,priceChange7d:0,dataPoints:s.length,confidence:"low",error:"Could not calculate returns from price data"};const a=o.reduce((R,D)=>R+D,0)/o.length,c=o.map(R=>Math.pow(R-a,2)).reduce((R,D)=>R+D,0)/o.length,m=Math.sqrt(c)*Math.sqrt(288)*100,g=m*Math.sqrt(365),y=s[s.length-1].price,v=this.findPriceAtTime(s,1440),b=this.findPriceAtTime(s,10080),w=v>0?(y-v)/v*100:0,k=b>0?(y-b)/b*100:0;let N;return s.length>=288*3?N="high":s.length>=288?N="medium":N="low",{poolAddress:e,currentPrice:y,volatilityDaily:Math.round(m*100)/100,volatilityAnnualized:Math.round(g*100)/100,priceChange24h:Math.round(w*100)/100,priceChange7d:Math.round(k*100)/100,dataPoints:s.length,confidence:N}}catch(s){return console.error("[VolatilityService] Error calculating volatility:",s),{poolAddress:e,currentPrice:0,volatilityDaily:0,volatilityAnnualized:0,priceChange24h:0,priceChange7d:0,dataPoints:0,confidence:"low",error:s.message}}}suggestOptimalRanges(e,n){const r=n.volatilityDaily/100;return r===0||e===0?this.getDefaultRanges(e):[{strategy:"conservative",...this.calculateRange(e,r,2,7),sigmaMultiple:2,estimatedTimeInRange:"~95% do tempo",description:"Faixa ampla, menor rendimento, menor risco de sair da faixa"},{strategy:"moderate",...this.calculateRange(e,r,1.5,7),sigmaMultiple:1.5,estimatedTimeInRange:"~87% do tempo",description:"Balano entre rendimento e risco"},{strategy:"aggressive",...this.calculateRange(e,r,1,7),sigmaMultiple:1,estimatedTimeInRange:"~68% do tempo",description:"Faixa estreita, maior rendimento, maior risco de sair da faixa"}]}async getPriceHistory(e,n=7){const r=xo();if(!r)return console.warn("[VolatilityService] Supabase client not available"),[];try{const{data:i,error:s}=await r.from("liquidity_pools").select("id, name").eq("address",e).single();if(s||!i)return console.warn("[VolatilityService] Pool not found:",e),[];const o=new Date;o.setDate(o.getDate()-n);const{data:a,error:l}=await r.from("liquidity_pool_snapshots").select("timestamp, price").eq("pool_id",i.id).gte("timestamp",o.toISOString()).order("timestamp",{ascending:!0});return l?(console.error("[VolatilityService] Error fetching snapshots:",l),[]):(a||[]).map(c=>({timestamp:new Date(c.timestamp),price:parseFloat(c.price)||0})).filter(c=>c.price>0)}catch(i){return console.error("[VolatilityService] Error in getPriceHistory:",i),[]}}async searchPoolsByTokenPair(e,n,r=20){const i=xo();if(!i)return console.warn("[VolatilityService] Supabase client not available"),[];try{const{data:s,error:o}=await i.from("liquidity_pools").select(`
                    address,
                    name,
                    protocol,
                    liquidity_pool_snapshots (
                        tvl,
                        timestamp
                    )
                `).or(`name.ilike.%${e}%${n}%,name.ilike.%${n}%${e}%`).order("timestamp",{foreignTable:"liquidity_pool_snapshots",ascending:!1}).limit(1,{foreignTable:"liquidity_pool_snapshots"});return o?(console.error("[VolatilityService] Error searching pools:",o),[]):(s||[]).filter(c=>{const u=c.name.toUpperCase(),h=e.toUpperCase(),m=n.toUpperCase(),g=new RegExp(`(^|[^A-Z])${h}([^A-Z]|$)`),y=new RegExp(`(^|[^A-Z])${m}([^A-Z]|$)`);return g.test(u)&&y.test(u)}).map(c=>{var u,h;return{address:c.address,name:c.name,protocol:c.protocol,tvl:((h=(u=c.liquidity_pool_snapshots)==null?void 0:u[0])==null?void 0:h.tvl)||0}}).sort((c,u)=>u.tvl-c.tvl).slice(0,r)}catch(s){return console.error("[VolatilityService] Error in searchPoolsByTokenPair:",s),[]}}async getAllPoolsFromDatabase(e=0,n,r=100){const i=xo();if(!i)return console.warn("[VolatilityService] Supabase client not available"),[];try{let s=i.from("liquidity_pools").select(`
                    address,
                    name,
                    protocol,
                    liquidity_pool_snapshots (
                        tvl,
                        timestamp
                    )
                `).order("timestamp",{foreignTable:"liquidity_pool_snapshots",ascending:!1}).limit(1,{foreignTable:"liquidity_pool_snapshots"});n&&(s=s.ilike("protocol",`%${n}%`));const{data:o,error:a}=await s.limit(r);return a?(console.error("[VolatilityService] Error fetching pools:",a),[]):(o||[]).map(c=>{var u,h;return{address:c.address,name:c.name,protocol:c.protocol,tvl:((h=(u=c.liquidity_pool_snapshots)==null?void 0:u[0])==null?void 0:h.tvl)||0}}).filter(c=>c.tvl>=e).sort((c,u)=>u.tvl-c.tvl)}catch(s){return console.error("[VolatilityService] Error in getAllPoolsFromDatabase:",s),[]}}async getTopPoolsByVolatility(e=10,n=7,r=0,i){try{const s=await this.getAllPoolsFromDatabase(r,i,50);if(s.length===0)return console.warn("[VolatilityService] No pools found in database"),[];const o=[],a=5;for(let c=0;c<s.length;c+=a){const u=s.slice(c,c+a),h=await Promise.all(u.map(async m=>{const g=await this.calculateVolatility(m.address,n);return g.poolName=m.name,{pool:m,volatility:g}}));o.push(...h)}const l=o.filter(c=>!c.volatility.error&&c.volatility.volatilityDaily>0);return l.sort((c,u)=>u.volatility.volatilityDaily-c.volatility.volatilityDaily),l.slice(0,e)}catch(s){return console.error("[VolatilityService] Error in getTopPoolsByVolatility:",s),[]}}calculateRange(e,n,r,i){const s=n*Math.sqrt(i),o=r*s,a=e*(1-o),l=e*(1+o),c=o*2*100;return{priceMin:Math.round(a*1e4)/1e4,priceMax:Math.round(l*1e4)/1e4,widthPercent:Math.round(c*10)/10}}findPriceAtTime(e,n){const r=new Date;r.setMinutes(r.getMinutes()-n);let i=e[0],s=Math.abs(e[0].timestamp.getTime()-r.getTime());for(const o of e){const a=Math.abs(o.timestamp.getTime()-r.getTime());a<s&&(s=a,i=o)}return s<1800*1e3?i.price:0}getDefaultRanges(e){return[{strategy:"conservative",...this.calculateRange(e,.04,2,7),sigmaMultiple:2,estimatedTimeInRange:"~95% do tempo (estimado)",description:"Faixa baseada em volatilidade tpica (dados insuficientes)"},{strategy:"moderate",...this.calculateRange(e,.04,1.5,7),sigmaMultiple:1.5,estimatedTimeInRange:"~87% do tempo (estimado)",description:"Faixa baseada em volatilidade tpica (dados insuficientes)"},{strategy:"aggressive",...this.calculateRange(e,.04,1,7),sigmaMultiple:1,estimatedTimeInRange:"~68% do tempo (estimado)",description:"Faixa baseada em volatilidade tpica (dados insuficientes)"}]}}const op=new omt,by={EXECUTE_LP_OPS:{label:"Execute LP Operations",description:"General LP management",riskLevel:"medium"},OPEN_POSITION:{label:"Open Position",description:"Create new liquidity position",riskLevel:"high"},CLOSE_POSITION:{label:"Close Position",description:"Remove liquidity from position",riskLevel:"high"},REBALANCE_RANGE:{label:"Rebalance Range",description:"Adjust position price range",riskLevel:"high"},CLAIM_FEES:{label:"Claim Fees",description:"Collect earned trading fees",riskLevel:"low"},CLAIM_REWARDS:{label:"Claim Rewards",description:"Collect farming rewards",riskLevel:"low"}},T7={maxRangeWidthPercent:100,minRangeWidthPercent:1,maxCapitalPerPoolPercent:50,maxTotalLPExposurePercent:100,minTVLRequired:0,minVolumeRequired:0,minAPYRequired:0,tokenAllowlist:[],tokenBlocklist:[],protocolAllowlist:[],requireConfirmationFor:["OPEN_POSITION","CLOSE_POSITION","REBALANCE_RANGE"],enabled:!0};class amt{validateOperation(e,n,r){const i=[],s=[];if(!r.enabled)return{allowed:!0,violations:[],warnings:[]};if(n.rangeWidthPercent!==void 0&&(n.rangeWidthPercent>r.maxRangeWidthPercent&&i.push(`Range width ${n.rangeWidthPercent.toFixed(1)}% exceeds maximum allowed ${r.maxRangeWidthPercent}%`),n.rangeWidthPercent<r.minRangeWidthPercent&&i.push(`Range width ${n.rangeWidthPercent.toFixed(1)}% is below minimum required ${r.minRangeWidthPercent}%`)),n.capitalPercent!==void 0&&n.capitalPercent>r.maxCapitalPerPoolPercent&&i.push(`Capital allocation ${n.capitalPercent.toFixed(1)}% exceeds maximum ${r.maxCapitalPerPoolPercent}% per pool`),n.tvl!==void 0&&n.tvl<r.minTVLRequired&&i.push(`Pool TVL $${n.tvl.toLocaleString()} is below minimum required $${r.minTVLRequired.toLocaleString()}`),n.volume24h!==void 0&&n.volume24h<r.minVolumeRequired&&i.push(`24h volume $${n.volume24h.toLocaleString()} is below minimum required $${r.minVolumeRequired.toLocaleString()}`),n.apy!==void 0&&n.apy<r.minAPYRequired&&s.push(`Pool APY ${n.apy.toFixed(2)}% is below preferred minimum ${r.minAPYRequired}%`),n.tokens&&r.tokenAllowlist.length>0){const o=n.tokens.filter(a=>!r.tokenAllowlist.some(l=>l.toUpperCase()===a.toUpperCase()));o.length>0&&i.push(`Token(s) not in allowlist: ${o.join(", ")}`)}if(n.tokens&&r.tokenBlocklist.length>0){const o=n.tokens.filter(a=>r.tokenBlocklist.some(l=>l.toUpperCase()===a.toUpperCase()));o.length>0&&i.push(`Blocked token(s) detected: ${o.join(", ")}`)}return n.protocol&&r.protocolAllowlist.length>0&&(r.protocolAllowlist.some(a=>n.protocol.toLowerCase().includes(a.toLowerCase()))||i.push(`Protocol "${n.protocol}" is not in the allowed list`)),{allowed:i.length===0,violations:i,warnings:s}}requiresConfirmation(e,n){return n.enabled?n.requireConfirmationFor.includes(e):!1}getRiskLevel(e){var n;return((n=by[e])==null?void 0:n.riskLevel)||"medium"}generateRangeRationale(e,n,r){const i=[],s={conservative:"Faixa ampla (2)",moderate:"Faixa moderada (1.5)",aggressive:"Faixa estreita (1)"}[e];if(i.push(`${s} selecionada`),n.volatilityDaily>0&&i.push(`devido  volatilidade diria de ${n.volatilityDaily.toFixed(2)}%`),r!=null&&r.volume24h&&r.volume24h>0){const a=r.volume24h>=1e3?`$${(r.volume24h/1e3).toFixed(1)}K`:`$${r.volume24h.toFixed(0)}`;i.push(`volume 24h de ${a}`)}if(r!=null&&r.tvl&&r.tvl>0){const a=r.tvl>=1e6?`$${(r.tvl/1e6).toFixed(2)}M`:r.tvl>=1e3?`$${(r.tvl/1e3).toFixed(1)}K`:`$${r.tvl.toFixed(0)}`;i.push(`TVL de ${a}`)}if(r!=null&&r.apy&&r.apy>0&&i.push(`APY estimado de ${r.apy.toFixed(2)}%`),n.confidence==="low"?i.push("(dados histricos limitados)"):n.confidence==="high"&&i.push("(alta confiana nos dados)"),i.length<=2)return i.join(" ");const o=i.pop();return i.join(", ")+" e "+o}generateOpenPositionRationale(e,n,r,i,s,o){const a=(i-r)/s.currentPrice*100;let l=`Abertura de posio em ${e} com estratgia ${n}. `;return l+=`Range de $${r.toFixed(4)} a $${i.toFixed(4)} (${a.toFixed(1)}% de largura). `,l+=`Capital: $${o.toLocaleString()}. `,s.volatilityDaily>5?l+=` Alta volatilidade (${s.volatilityDaily.toFixed(2)}%/dia) - maior risco de sair do range. `:s.volatilityDaily<2&&(l+=`Baixa volatilidade (${s.volatilityDaily.toFixed(2)}%/dia) - range deve permanecer ativo. `),s.priceChange24h>10?l+=`Preo subiu ${s.priceChange24h.toFixed(2)}% em 24h - considere range assimtrico para cima.`:s.priceChange24h<-10&&(l+=`Preo caiu ${Math.abs(s.priceChange24h).toFixed(2)}% em 24h - considere range assimtrico para baixo.`),l.trim()}generateClosePositionRationale(e,n,r,i){let s=`Fechamento de posio em ${e}. `;return n||(s+="Posio fora do range - no est gerando fees. "),r>0&&(s+=`Fees no coletados: $${r.toFixed(2)} sero resgatados automaticamente. `),i&&(s+=i),s.trim()}generateRebalanceRationale(e,n,r,i,s){let o=`Rebalanceamento de ${e}. `;if(o+=`Range anterior: $${n.min.toFixed(4)} - $${n.max.toFixed(4)}. `,o+=`Novo range: $${r.min.toFixed(4)} - $${r.max.toFixed(4)}. `,o+=`Preo atual: $${i.toFixed(4)}. `,i<n.min){const a=(n.min-i)/n.min*100;o+=`Preo ${a.toFixed(1)}% abaixo do range anterior. `}else if(i>n.max){const a=(i-n.max)/n.max*100;o+=`Preo ${a.toFixed(1)}% acima do range anterior. `}return o+=`Volatilidade: ${s.volatilityDaily.toFixed(2)}%/dia.`,o.trim()}}const $b=new amt,A0e={policy:T7,autoClaimFees:!1,autoRebalance:!1,rebalanceThresholdPercent:10},Nee={isOn:!1,statusMessage:"Ready",statusDetail:"Awaiting activation",activePositions:[],totalValueUSD:0,totalUnclaimedFeesUSD:0,settings:A0e,logs:[],auditLog:[],pendingConfirmation:null};class lmt{constructor(){this.isInitialized=!1,this.initPromise=null,this.state=Nee,this.listeners=new Set}async init(){if(!this.isInitialized)return this.initPromise?this.initPromise:(this.initPromise=(async()=>{try{const e=await ke.getItem("solana_dealer_settings");if(e){const n=JSON.parse(e);this.state={...Nee,settings:{...A0e,...n.settings}}}this.isInitialized=!0}catch(e){console.error("[SolanaDealerStore] Failed to load settings:",e),this.isInitialized=!0}})(),this.initPromise)}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}notify(){this.listeners.forEach(e=>e())}getState(){return this.state}getPolicy(){return this.state.settings.policy}getAuditLog(){return this.state.auditLog}getLogs(){return this.state.logs}setStatus(e,n){this.state={...this.state,statusMessage:e,statusDetail:n||this.state.statusDetail},this.notify()}setOn(e){this.state={...this.state,isOn:e},this.notify(),this.addLog("INFO",e?"Solana Dealer activated":"Solana Dealer deactivated")}updatePolicy(e){this.state={...this.state,settings:{...this.state.settings,policy:{...this.state.settings.policy,...e}}},this.notify(),this.saveSettings(),this.addLog("POLICY","Policy updated",e)}resetPolicy(){this.state={...this.state,settings:{...this.state.settings,policy:T7}},this.notify(),this.saveSettings(),this.addLog("POLICY","Policy reset to defaults")}addAuditEntry(e){const n=`audit_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,r={...e,id:n,timestamp:Date.now()};return this.state={...this.state,auditLog:[r,...this.state.auditLog].slice(0,500)},this.notify(),this.saveAuditLog(),n}updateAuditEntry(e,n){this.state={...this.state,auditLog:this.state.auditLog.map(r=>r.id===e?{...r,...n}:r)},this.notify(),this.saveAuditLog()}addLog(e,n,r){const i={id:`log_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,timestamp:Date.now(),type:e,message:n,details:r};this.state={...this.state,logs:[i,...this.state.logs].slice(0,200)},this.notify()}clearLogs(){this.state={...this.state,logs:[]},this.notify()}updatePositions(e){const n=e.reduce((i,s)=>i+s.valueUSD,0),r=e.reduce((i,s)=>i+s.unclaimedFeesUSD,0);this.state={...this.state,activePositions:e,totalValueUSD:n,totalUnclaimedFeesUSD:r},this.notify()}setPendingConfirmation(e){this.state={...this.state,pendingConfirmation:e},this.notify()}clearPendingConfirmation(){this.state={...this.state,pendingConfirmation:null},this.notify()}async saveSettings(){try{await ke.setItem("solana_dealer_settings",JSON.stringify({settings:this.state.settings}))}catch(e){console.error("[SolanaDealerStore] Failed to save settings:",e)}}async saveAuditLog(){try{await ke.setItem("solana_dealer_audit",JSON.stringify(this.state.auditLog.slice(0,100)))}catch(e){console.error("[SolanaDealerStore] Failed to save audit log:",e)}}async loadAuditLog(){try{const e=await ke.getItem("solana_dealer_audit");if(e){const n=JSON.parse(e);this.state={...this.state,auditLog:n},this.notify()}}catch(e){console.error("[SolanaDealerStore] Failed to load audit log:",e)}}getAuditByScope(e,n=10){return this.state.auditLog.filter(r=>r.scope===e).slice(0,n)}getAuditByPool(e,n=10){return this.state.auditLog.filter(r=>r.poolAddress===e).slice(0,n)}getStats(){const e=this.state.auditLog;return{totalOperations:e.length,successfulOperations:e.filter(n=>n.status==="executed").length,failedOperations:e.filter(n=>n.status==="failed").length,policyViolations:e.filter(n=>n.policyViolations&&n.policyViolations.length>0).length}}}const wr=new lmt;function cmt(){const[t,e]=_s.useState(wr.getState());return _s.useEffect(()=>(wr.init(),wr.subscribe(()=>{e(wr.getState())})),[]),t}function T0e(t,e){var r;if(!e.enabled)return!0;if(e.minTVLRequired>0&&t.tvl<e.minTVLRequired||e.minVolumeRequired>0&&(((r=t.volume)==null?void 0:r["24h"])||0)<e.minVolumeRequired)return!1;let n=[];return t.tokenA&&t.tokenB?n=[t.tokenA.symbol,t.tokenB.symbol]:n=t.name.split(/[-\/]/).map(i=>i.trim().toUpperCase()),!(e.tokenBlocklist.length>0&&e.tokenBlocklist.some(i=>n.some(s=>s.toUpperCase()===i.toUpperCase()))||e.tokenAllowlist.length>0&&!n.every(s=>e.tokenAllowlist.some(o=>o.toUpperCase()===s.toUpperCase()))||e.protocolAllowlist.length>0&&!e.protocolAllowlist.some(i=>t.protocol.toLowerCase().includes(i.toLowerCase())))}function Cee(t,e){return e.enabled?t.filter(n=>T0e(n,e)):t}async function umt(t,e,n,r){var s,o,a,l,c,u,h,m,g;const i=r||(()=>{});if(t==="searchLiquidityPools")try{i("Searching liquidity pools...");const y=wr.getPolicy(),v=y.enabled?Math.max(y.minTVLRequired||0,e.minTVL||0):e.minTVL,b=y.enabled?Math.max(y.minVolumeRequired||0,e.minVolume||0):e.minVolume,w=y.enabled?Math.max(y.minAPYRequired||0,e.minAPY||0):e.minAPY,k={tokenPair:e.tokenA&&e.tokenB?{tokenA:e.tokenA,tokenB:e.tokenB}:void 0,minTVL:v,minVolume:b,volumeTimeframe:e.volumeTimeframe,minAPY:w,sortBy:e.sortBy||"tvl",sortOrder:"desc",limit:e.limit||10};e.protocol&&(e.protocol==="meteora"?k.protocol=["meteora_dlmm","meteora_damm"]:e.protocol==="raydium"&&(k.protocol=["raydium_clmm","raydium_cpmm"]));const N=await Ng.discoverPools(k),R=Cee(N,y);if(R.length===0)return{type:"info",title:"No Pools Found",details:"No pools match your search criteria."+(y.enabled&&N.length>0?`

_${N.length} pools were filtered out by your Policy settings._`:"")};let D=`Found ${R.length} pools:

`;D+=`| Pool | Protocol | TVL | Volume 24h | APY |
|------|----------|-----|------------|-----|
`,R.forEach(B=>{const z=B.protocol.includes("meteora")?"MET":"RAY";D+=`| ${B.name} | ${z} | $${B.tvl.toLocaleString()} | $${(B.volume["24h"]||0).toLocaleString()} | ${(B.apy||0).toFixed(2)}% |
`}),wr.addLog("INFO",`Searched pools: ${R.length} results (${N.length-R.length} filtered by policy)`,{filters:k});const O=R.map(B=>{const z=B.protocol.includes("meteora")?"meteora":"raydium";return{type:"pool",protocol:z,name:B.name,tokenA:{symbol:B.tokenA.symbol,mint:B.tokenA.mint},tokenB:{symbol:B.tokenB.symbol,mint:B.tokenB.mint},volume24h:B.volume["24h"]||0,tvl:B.tvl,apy:B.apy||0,feeBps:B.feeBps,poolAddress:B.address,poolUrl:KL(z,B.address),currentPrice:B.currentPrice}});return{type:"success",semanticType:"analysis",title:"Liquidity Pools",details:D,structuredData:{resultType:"pools",items:O,summary:`Found ${R.length} pools`}}}catch(y){return{type:"error",semanticType:"analysis",title:"Search Error",details:y.message}}if(t==="getPoolDetails")try{i("Fetching pool details...");let y=await ls.getPool(e.poolAddress);return y||(y=await Ai.getPoolById(e.poolAddress)),y?{type:"success",title:"Pool Details",details:`
**${y.name}**
- Protocol: ${y.protocol}
- Address: ${y.address}
- TVL: $${y.tvl.toLocaleString()}
- Volume 24h: $${(y.volume["24h"]||0).toLocaleString()}
- APY: ${(y.apy||0).toFixed(2)}%
- Fee: ${y.feeBps} bps (${(y.feeBps/100).toFixed(2)}%)
- Token A: ${y.tokenA.symbol} (${y.tokenA.mint.slice(0,8)}...)
- Token B: ${y.tokenB.symbol} (${y.tokenB.mint.slice(0,8)}...)
            `.trim()}:{type:"error",title:"Pool Not Found",details:`No pool found with address: ${e.poolAddress}`}}catch(y){return{type:"error",title:"Pool Details Error",details:y.message}}if(t==="getTopLiquidityPools")try{i(`Getting top pools by ${e.criteria}...`);const y=wr.getPolicy(),v=y.enabled?Math.max(y.minTVLRequired||0,e.minTVL||0):e.minTVL,b=y.enabled&&y.minVolumeRequired||0,w=y.enabled?Math.max(y.minAPYRequired||0,0):0,k=await Ng.getTopPools(e.criteria,{timeframe:e.volumeTimeframe,minTVL:v,minVolume:b,minAPY:w,protocol:e.protocol?e.protocol==="meteora"?["meteora_dlmm"]:["raydium_clmm","raydium_cpmm"]:void 0,limit:e.limit||10});if(k.length===0)return{type:"info",title:"No Pools",details:"No pools found matching criteria."};const N=k.filter(B=>Cee([B.pool],y).length>0);if(N.length===0)return{type:"info",title:"No Pools",details:`No pools match criteria.

_${k.length} pools were filtered out by your Policy settings._`};const R=[...N].sort((B,z)=>z.score-B.score);let D=`Top ${R.length} pools by ${e.criteria}:

`;R.forEach((B,z)=>{const U=B.pool.protocol.includes("meteora")?"MET":"RAY";let $="";e.criteria==="volume"?$=`Vol: $${(B.pool.volume["24h"]||0).toLocaleString()}`:e.criteria==="apy"?$=`APY: ${(B.pool.apy||0).toFixed(2)}%`:$=`TVL: $${B.pool.tvl.toLocaleString()}`,D+=`${z+1}. [${U}] ${B.pool.name} - ${$}
`});const O=R.map(B=>{const z=B.pool.protocol.includes("meteora")?"meteora":"raydium";return{type:"pool",protocol:z,name:B.pool.name,tokenA:{symbol:B.pool.tokenA.symbol,mint:B.pool.tokenA.mint},tokenB:{symbol:B.pool.tokenB.symbol,mint:B.pool.tokenB.mint},volume24h:B.pool.volume["24h"]||0,tvl:B.pool.tvl,apy:B.pool.apy||0,feeBps:B.pool.feeBps,poolAddress:B.pool.address,poolUrl:KL(z,B.pool.address),currentPrice:B.pool.currentPrice}});return{type:"success",title:`Top Pools by ${e.criteria.toUpperCase()}`,details:D,structuredData:{resultType:"pools",items:O,summary:`Top ${R.length} pools by ${e.criteria}`,title:`Top Pools by ${e.criteria.toUpperCase()}`}}}catch(y){return{type:"error",title:"Ranking Error",details:y.message}}if(t==="compareLiquidityPools")try{if(i("Comparing pools..."),e.tokenPair){const[y,v]=e.tokenPair.split("/").map(k=>k.trim()),b=await Ng.compareProtocols(y,v);let w=`**Comparison for ${e.tokenPair}**

`;return w+=`Meteora Pools: ${b.meteora.length}
`,w+=`Raydium Pools: ${b.raydium.length}

`,b.recommendation.poolAddress&&(w+=`**Recommendation:** ${b.recommendation.protocol}
`,w+=`Reason: ${b.recommendation.reason}`),{type:"success",title:"Pool Comparison",details:w}}return{type:"error",title:"Compare Error",details:'Please provide tokenPair (e.g., "SOL/USDC")'}}catch(y){return{type:"error",title:"Compare Error",details:y.message}}if(t==="getPoolHistory")try{i("Fetching pool history...");const y=await ls.getPoolTVLHistory(e.poolAddress,e.days||7);if(y.length===0)return{type:"info",title:"No History",details:"No historical data available."};let v=`${e.metric.toUpperCase()} History (${e.days||7} days):

`;return y.slice(-5).forEach(b=>{const w=new Date(b.timestamp).toLocaleDateString();v+=`${w}: $${b.value.toLocaleString()}
`}),{type:"success",title:"Pool History",details:v}}catch(y){return{type:"error",title:"History Error",details:y.message}}if(t==="getLPPositions")try{if(i("Fetching LP positions..."),!n)return{type:"error",title:"Wallet Required",details:"Please connect a wallet to view positions."};const y=await Ng.getAllPositions(n),v=[...y.meteora,...y.raydium];if(v.length===0)return{type:"info",title:"No Positions",details:"You have no active LP positions."};let b=`**Your LP Portfolio**
`;return b+=`Total Value: $${y.totalValueUSD.toLocaleString()}
`,b+=`Unclaimed Fees: $${y.totalUnclaimedFeesUSD.toFixed(2)}

`,b+=`Meteora: ${y.meteora.length} positions
`,b+=`Raydium: ${y.raydium.length} positions

`,v.slice(0,5).forEach((w,k)=>{const N=w.protocol.includes("meteora")?"MET":"RAY";b+=`${k+1}. [${N}] Pool: ${w.poolAddress.slice(0,8)}...
`,b+=`   Value: $${w.valueUSD.toLocaleString()} | Fees: $${w.unclaimedFees.totalUSD.toFixed(2)}
`}),{type:"success",title:"LP Positions",details:b}}catch(y){return{type:"error",title:"Positions Error",details:y.message}}if(t==="getLPPositionDetails")try{i("Fetching position details...");let y=await ls.getPosition(e.positionAddress);return y||(y=await Ai.getPositionByNft(e.positionAddress)),y?{type:"success",title:"Position Details",details:`
**Position Details**
- Address: ${y.positionAddress}
- Pool: ${y.poolAddress}
- Protocol: ${y.protocol}
- Value: $${y.valueUSD.toLocaleString()}
- Token A: ${y.tokenAAmount}
- Token B: ${y.tokenBAmount}
- Unclaimed Fees: $${y.unclaimedFees.totalUSD.toFixed(2)}
${y.priceRange?`- Price Range: ${y.priceRange.min.toFixed(4)} - ${y.priceRange.max.toFixed(4)}
- In Range: ${y.priceRange.inRange?"":""}`:""}
            `.trim()}:{type:"error",title:"Position Not Found",details:`Position not found: ${e.positionAddress}`}}catch(y){return{type:"error",title:"Position Error",details:y.message}}if(t==="getUnclaimedLPRewards")try{if(i("Checking unclaimed rewards..."),e.positionAddress){const v=await ls.getUnclaimedFees(e.positionAddress);return{type:"success",title:"Unclaimed Fees",details:`Position ${e.positionAddress.slice(0,8)}...
Token A: ${v.tokenA}
Token B: ${v.tokenB}
Total USD: $${v.totalUSD.toFixed(2)}`}}return n?{type:"success",title:"Total Unclaimed Rewards",details:`Total unclaimed fees across all positions: $${(await Ng.getAllPositions(n)).totalUnclaimedFeesUSD.toFixed(2)}`}:{type:"error",title:"Wallet Required",details:"Please connect a wallet."}}catch(y){return{type:"error",title:"Rewards Error",details:y.message}}if(t==="estimateLPPositionPnL")try{return i("Calculating PnL..."),{type:"info",title:"PnL Estimation",details:"PnL calculation requires entry data. Please check your position details for current value and unclaimed fees."}}catch(y){return{type:"error",title:"PnL Error",details:y.message}}if(t==="addLiquidity"){const y=wr.getPolicy();let v=await ls.getPool(e.poolAddress);v||(v=await Ai.getPoolById(e.poolAddress));const b=$b.validateOperation("OPEN_POSITION",{poolAddress:e.poolAddress,poolName:v==null?void 0:v.name,tokens:v?[v.tokenA.symbol,v.tokenB.symbol]:void 0,tvl:v==null?void 0:v.tvl,volume24h:v==null?void 0:v.volume["24h"],apy:v==null?void 0:v.apy,protocol:v==null?void 0:v.protocol,rangeWidthPercent:e.priceMin&&e.priceMax&&e.currentPrice?(e.priceMax-e.priceMin)/e.currentPrice*100:void 0},y);if(!b.allowed)return wr.addAuditEntry({scope:"OPEN_POSITION",action:"Add liquidity blocked by policy",poolAddress:e.poolAddress,rationale:"Policy violation detected",params:{amountA:e.amountA,amountB:e.amountB},status:"rejected",policyViolations:b.violations}),{type:"error",semanticType:"decision",title:"Policy Violation",details:` **Operao bloqueada pela Policy Engine**

${b.violations.map(N=>" "+N).join(`
`)}

Ajuste suas polticas em Solana Dealer > Policy para prosseguir.`};const w=$b.requiresConfirmation("OPEN_POSITION",y),k=`Adio de liquidez na pool ${((s=e.poolAddress)==null?void 0:s.slice(0,8))||"unknown"}. Valores: ${e.amountA} token A + ${e.amountB} token B.`;return w?(wr.addAuditEntry({scope:"OPEN_POSITION",action:"Add liquidity - awaiting confirmation",poolAddress:e.poolAddress,rationale:k,params:{amountA:e.amountA,amountB:e.amountB,priceMin:e.priceMin,priceMax:e.priceMax},status:"pending"}),{type:"info",semanticType:"decision",title:"Confirm Add Liquidity",details:`Adicionando liquidez  pool ${((o=e.poolAddress)==null?void 0:o.slice(0,8))||"unknown"}:
- Amount A: ${e.amountA}
- Amount B: ${e.amountB}
${e.priceMin?`- Range: ${e.priceMin} - ${e.priceMax}`:""}`,rationale:k,requiresConfirmation:!0,confirmationData:{scope:"OPEN_POSITION",action:"Add Liquidity",poolAddress:e.poolAddress,params:{amountA:e.amountA,amountB:e.amountB,priceMin:e.priceMin,priceMax:e.priceMax},rationale:k}}):(wr.addLog("OPERATION",`Add liquidity to ${(a=e.poolAddress)==null?void 0:a.slice(0,8)}`,e),{type:"info",semanticType:"execution",title:"Add Liquidity",details:`To add liquidity to pool ${((l=e.poolAddress)==null?void 0:l.slice(0,8))||"unknown"}...:
- Amount A: ${e.amountA}
- Amount B: ${e.amountB}
${e.priceMin?`- Price Range: ${e.priceMin} - ${e.priceMax}`:""}

 SDK integration required. Please use the protocol's web interface for now.`,rationale:k})}if(t==="removeLiquidity"){const y=wr.getPolicy(),v=$b.requiresConfirmation("CLOSE_POSITION",y),b=`Remoo de ${e.percentage}% da posio ${((c=e.positionAddress)==null?void 0:c.slice(0,8))||"unknown"}.`;return wr.addAuditEntry({scope:"CLOSE_POSITION",action:`Remove ${e.percentage}% liquidity`,poolAddress:e.positionAddress,rationale:b,params:{percentage:e.percentage},status:v?"pending":"executed"}),v?{type:"info",semanticType:"decision",title:"Confirm Remove Liquidity",details:`Removendo ${e.percentage}% da posio ${((u=e.positionAddress)==null?void 0:u.slice(0,8))||"unknown"}`,rationale:b,requiresConfirmation:!0,confirmationData:{scope:"CLOSE_POSITION",action:"Remove Liquidity",poolAddress:e.positionAddress,params:{percentage:e.percentage},rationale:b}}:{type:"info",semanticType:"execution",title:"Remove Liquidity",details:`To remove ${e.percentage}% from position ${((h=e.positionAddress)==null?void 0:h.slice(0,8))||"unknown"}...

 SDK integration required. Please use the protocol's web interface for now.`,rationale:b}}if(t==="claimLPFees"||t==="claimLPRewards"){const y=`Claim de fees/rewards da posio ${((m=e.positionAddress)==null?void 0:m.slice(0,8))||"unknown"}.`;return wr.addAuditEntry({scope:"CLAIM_FEES",action:"Claim fees/rewards",poolAddress:e.positionAddress,rationale:y,params:{},status:"executed"}),{type:"info",semanticType:"execution",title:"Claim Fees/Rewards",details:`To claim from position ${((g=e.positionAddress)==null?void 0:g.slice(0,8))||"unknown"}...

 SDK integration required. Please use the protocol's web interface for now.`,rationale:y}}if(t==="rebalanceLPPosition"){const y=wr.getPolicy(),v=$b.requiresConfirmation("REBALANCE_RANGE",y),b=`Rebalanceamento para novo range: ${e.newPriceMin} - ${e.newPriceMax}.`;return wr.addAuditEntry({scope:"REBALANCE_RANGE",action:"Rebalance to new range",poolAddress:e.positionAddress,rationale:b,params:{newPriceMin:e.newPriceMin,newPriceMax:e.newPriceMax},status:v?"pending":"executed"}),v?{type:"info",semanticType:"decision",title:"Confirm Rebalance",details:`Rebalanceando posio para range ${e.newPriceMin} - ${e.newPriceMax}`,rationale:b,requiresConfirmation:!0,confirmationData:{scope:"REBALANCE_RANGE",action:"Rebalance Position",poolAddress:e.positionAddress,params:{newPriceMin:e.newPriceMin,newPriceMax:e.newPriceMax},rationale:b}}:{type:"info",semanticType:"execution",title:"Rebalance Position",details:`To rebalance position to range ${e.newPriceMin} - ${e.newPriceMax}:

 SDK integration required. Please use the protocol's web interface for now.`,rationale:b}}if(t==="simulateAddLiquidity")try{i("Simulating liquidity addition...");const y=await ls.getPool(e.poolAddress)||await Ai.getPoolById(e.poolAddress);if(!y)return{type:"error",title:"Pool Not Found",details:"Cannot simulate - pool not found."};const v=(e.amountA||0)*100+(e.amountB||0),b=y.tvl>0?v/(y.tvl+v)*100:100;return{type:"success",title:"Liquidity Simulation",details:`**Simulation Results**
- Pool: ${y.name}
- Adding: ${e.amountA} token A + ${e.amountB} token B
- Estimated Value: ~$${v.toLocaleString()}
- Share of Pool: ~${b.toFixed(4)}%
- Current Pool TVL: $${y.tvl.toLocaleString()}
- Pool APY: ${(y.apy||0).toFixed(2)}%`}}catch(y){return{type:"error",title:"Simulation Error",details:y.message}}if(t==="estimateImpermanentLoss")try{const y=e.priceChangePercent/100,v=Math.abs(y),w=(2*Math.sqrt(1+v)/(2+v)-1)*100;return{type:"success",title:"Impermanent Loss Estimate",details:`**Price Change: ${e.priceChangePercent>0?"+":""}${e.priceChangePercent}%**

Estimated Impermanent Loss: ${Math.abs(w).toFixed(2)}%

Note: This is a simplified calculation. Actual IL depends on:
- Price range (for concentrated liquidity)
- Pool type (constant product vs concentrated)
- Fees earned (which offset IL)`}}catch(y){return{type:"error",title:"IL Calculation Error",details:y.message}}if(t==="calculateOptimalPriceRange")try{const y=await ls.getPool(e.poolAddress)||await Ai.getPoolById(e.poolAddress);if(!y||!y.currentPrice)return{type:"error",title:"Range Error",details:"Could not get current price for pool."};const v=S0e.calculateOptimalRange(y.currentPrice,e.riskLevel);return{type:"success",title:"Optimal Price Range",details:`**${e.riskLevel.toUpperCase()} Range**
- Current Price: $${y.currentPrice.toFixed(4)}
- Suggested Min: $${v.priceMin.toFixed(4)}
- Suggested Max: $${v.priceMax.toFixed(4)}
- Range Width: ${(v.rangeWidth/2).toFixed(1)}%

Wider ranges = more fees earned, less impermanent loss
Tighter ranges = higher capital efficiency, more active management needed`}}catch(y){return{type:"error",title:"Range Error",details:y.message}}if(t==="getLPSwapQuote")try{i("Getting swap quote...");const y=await Ai.getSwapQuote({inputMint:e.inputToken,outputMint:e.outputToken,amount:e.amount,slippageBps:e.slippageBps||50});return y?{type:"success",title:"Swap Quote",details:`**${e.inputToken}  ${e.outputToken}**
- Input: ${e.amount}
- Output: ${y.outputAmount}
- Price Impact: ${(y.priceImpact*100).toFixed(2)}%
- Fee: ${y.fee}`}:{type:"error",title:"Quote Error",details:"Could not get swap quote."}}catch(y){return{type:"error",title:"Quote Error",details:y.message}}if(t==="getTopVolatilityPools")try{i("Calculating volatility for all pools...");const y=e.limit||10,v=e.days||7,b=e.minTVL||0,w=e.protocol,k=await op.getTopPoolsByVolatility(y,v,b,w),N=wr.getPolicy(),R=k.filter(B=>T0e(B.pool,N));if(R.length===0)return{type:"info",title:"No Pools Found",details:`No pools with volatility data found in database.

This could mean:
- No pools have been synced yet
- No historical data available for volatility calculation

Data sync runs every 5 minutes.`+(N.enabled&&k.length>0?`

_${k.length} pools were filtered out by your Policy settings._`:"")};let D=` **Top ${R.length} Pools by Volatility**

`;D+=`| # | Pool | Protocol | Daily Vol | Ann. Vol | Price  24h | TVL |
`,D+=`|---|------|----------|-----------|----------|-------------|-----|
`;const O=[];return R.forEach((B,z)=>{const U=B.pool.protocol.includes("meteora")?"MET":"RAY",$=B.pool.protocol.includes("meteora")?"meteora":"raydium",W=B.pool.tvl>=1e3?`$${(B.pool.tvl/1e3).toFixed(1)}K`:`$${B.pool.tvl.toFixed(0)}`,H=B.volatility.priceChange24h>=0?`+${B.volatility.priceChange24h.toFixed(2)}%`:`${B.volatility.priceChange24h.toFixed(2)}%`;D+=`| ${z+1} | ${B.pool.name.slice(0,15)} | ${U} | ${B.volatility.volatilityDaily.toFixed(2)}% | ${B.volatility.volatilityAnnualized.toFixed(1)}% | ${H} | ${W} |
`,O.push({type:"volatility",poolName:B.pool.name,poolAddress:B.pool.address,protocol:$,currentPrice:B.volatility.currentPrice,volatilityDaily:B.volatility.volatilityDaily,volatilityAnnualized:B.volatility.volatilityAnnualized,priceChange24h:B.volatility.priceChange24h,priceChange7d:B.volatility.priceChange7d,tvl:B.pool.tvl,confidence:B.volatility.confidence,dataPoints:B.volatility.dataPoints})}),D+=`
*Volatility calculated from ${v} days of historical data.*`,b>0&&(D+=`
*Filtered to pools with TVL  $${b.toLocaleString()}*`),wr.addLog("INFO",`Top volatility pools: ${k.length} results`,{limit:y,days:v,minTVL:b,protocol:w}),{type:"success",semanticType:"analysis",title:"Top Pools by Volatility",details:D,structuredData:{resultType:"volatility",items:O,summary:`Top ${k.length} pools by volatility`,title:"Pools Ranked by Volatility"}}}catch(y){return{type:"error",title:"Volatility Error",details:y.message}}if(t==="getPoolVolatility")try{if(i("Calculating pool volatility..."),e.tokenA&&e.tokenB&&!e.poolAddress){i("Finding pools for token pair...");const w=await op.searchPoolsByTokenPair(e.tokenA,e.tokenB,10);if(w.length===0)return{type:"info",title:"No Pool Found",details:`No pool found in database for ${e.tokenA}/${e.tokenB}.

This could mean:
- No pools exist for this pair
- Pools haven't been synced yet (sync runs every 5 min)

Try searching for available pools with: "liste pools"`};let k=` **Volatility Analysis for ${e.tokenA}/${e.tokenB}**
`;k+=`Found ${w.length} pools

`,k+=`| Pool | Protocol | TVL | Daily Vol | Ann. Vol | Price |
`,k+=`|------|----------|-----|-----------|----------|-------|
`;const N=[];for(const R of w){const D=await op.calculateVolatility(R.address,e.days||7),O=R.protocol.includes("meteora")?"MET":"RAY",B=R.protocol.includes("meteora")?"meteora":"raydium",z=D.error?"N/A":`${D.volatilityDaily.toFixed(2)}%`,U=D.error?"N/A":`${D.volatilityAnnualized.toFixed(1)}%`,$=D.currentPrice>0?`$${D.currentPrice.toFixed(4)}`:"N/A",W=R.tvl>=1e3?`$${(R.tvl/1e3).toFixed(1)}K`:`$${R.tvl.toFixed(0)}`;k+=`| ${R.name.slice(0,15)} | ${O} | ${W} | ${z} | ${U} | ${$} |
`,D.error||N.push({type:"volatility",poolName:R.name,poolAddress:R.address,protocol:B,currentPrice:D.currentPrice,volatilityDaily:D.volatilityDaily,volatilityAnnualized:D.volatilityAnnualized,priceChange24h:D.priceChange24h,priceChange7d:D.priceChange7d,tvl:R.tvl,confidence:D.confidence,dataPoints:D.dataPoints})}return k+=`
*Note: Volatility calculated from ${e.days||7} days of historical data.*`,{type:"success",title:`${e.tokenA}/${e.tokenB} Volatility`,details:k,structuredData:N.length>0?{resultType:"volatility",items:N,summary:`Found ${w.length} pools for ${e.tokenA}/${e.tokenB}`,title:`${e.tokenA}/${e.tokenB} Volatility Analysis`}:void 0}}if(!e.poolAddress)return{type:"error",title:"Missing Parameter",details:'Please provide either poolAddress OR tokenA and tokenB (e.g., tokenA="SOL", tokenB="USDC")'};const y=e.days||7,v=await op.calculateVolatility(e.poolAddress,y);if(v.error)return{type:"error",title:"Volatility Error",details:v.error};const b={high:"",medium:"",low:""}[v.confidence];return{type:"success",title:"Pool Volatility",details:` **Volatility Analysis**
- Pool: ${e.poolAddress.slice(0,8)}...
- Current Price: $${v.currentPrice.toFixed(4)}

**Volatility:**
- Daily: ${v.volatilityDaily.toFixed(2)}%
- Annualized: ${v.volatilityAnnualized.toFixed(2)}%

**Price Changes:**
- 24h: ${v.priceChange24h>=0?"+":""}${v.priceChange24h.toFixed(2)}%
- 7d: ${v.priceChange7d>=0?"+":""}${v.priceChange7d.toFixed(2)}%

${b} Confidence: ${v.confidence.toUpperCase()} (${v.dataPoints} data points)`}}catch(y){return{type:"error",title:"Volatility Error",details:y.message}}if(t==="suggestOptimalRangeByVolatility")try{i("Calculating optimal ranges...");let y=e.poolAddress,v="";if(!y&&e.tokenA&&e.tokenB){i("Finding best pool for token pair...");const B=await op.searchPoolsByTokenPair(e.tokenA,e.tokenB,1);if(B.length===0)return{type:"info",title:"No Pool Found",details:`No pool found in database for ${e.tokenA}/${e.tokenB}.

Try: "liste pools" to see available pools.`};y=B[0].address,v=B[0].name}if(!y)return{type:"error",title:"Missing Parameter",details:"Please provide either poolAddress OR tokenA and tokenB"};const b=await op.calculateVolatility(y,e.days||7);if(!b.currentPrice||b.currentPrice===0)return{type:"error",title:"Range Error",details:"Could not get current price for pool. Make sure the pool has historical data in the database."};const w=op.suggestOptimalRanges(b.currentPrice,b),k={conservative:"",moderate:"",aggressive:""},N=v||y.slice(0,8)+"...";let R=` **Optimal Range Suggestions for ${N}**
`;R+=`Current Price: $${b.currentPrice.toFixed(4)}
`,R+=`Daily Volatility: ${b.volatilityDaily.toFixed(2)}%

`,w.forEach(B=>{const z=k[B.strategy];R+=`${z} **${B.strategy.toUpperCase()} (${B.sigmaMultiple})**
`,R+=`   Range: $${B.priceMin.toFixed(4)} - $${B.priceMax.toFixed(4)}
`,R+=`   Width: ${B.widthPercent.toFixed(1)}%
`,R+=`   ${B.estimatedTimeInRange}

`}),b.confidence==="low"&&(R+=`
 *Low confidence: ranges based on estimated volatility due to insufficient historical data.*`);const O=w.find(B=>B.strategy==="moderate")?$b.generateRangeRationale("moderate",b,{tvl:void 0,volume24h:void 0}):"Sugesto de range baseada na volatilidade calculada.";return wr.addLog("INFO",`Range suggestion for ${N}`,{strategy:"all",volatilityDaily:b.volatilityDaily,currentPrice:b.currentPrice}),{type:"success",semanticType:"decision",title:"Range Suggestions",details:R,rationale:O}}catch(y){return{type:"error",semanticType:"analysis",title:"Range Error",details:y.message}}if(t==="createLiquidityPool")return{type:"info",title:"Create Pool",details:`**Pool Creation Request**
- Protocol: ${e.protocol}
- Tokens: ${e.tokenA} / ${e.tokenB}
- Fee: ${e.feeBps} bps
- Initial Price: ${e.initialPrice}

 Pool creation requires SDK integration. Please use the protocol's web interface:
- Meteora: https://devnet.meteora.ag
- Raydium: https://raydium.io (switch to devnet)`};if(t==="estimatePoolCreationCost"){const y={meteora_dlmm:"~0.5 SOL",raydium_clmm:"~0.3 SOL",raydium_cpmm:"~0.2 SOL"};return{type:"success",title:"Pool Creation Cost",details:`Estimated cost for ${e.protocol}: ${y[e.protocol]||"~0.3-0.5 SOL"}

Includes:
- Account rent
- Transaction fees
- Protocol fees (if any)`}}return null}function dmt(t){return["searchLiquidityPools","getPoolDetails","getTopLiquidityPools","compareLiquidityPools","getPoolHistory","getLPPositions","getLPPositionDetails","getUnclaimedLPRewards","estimateLPPositionPnL","addLiquidity","removeLiquidity","claimLPFees","claimLPRewards","rebalanceLPPosition","simulateAddLiquidity","estimateImpermanentLoss","calculateOptimalPriceRange","getLPSwapQuote","createLiquidityPool","estimatePoolCreationCost","getPoolVolatility","suggestOptimalRangeByVolatility","getTopVolatilityPools"].includes(t)}const fmt=(t,e,n,r,i,s,o)=>{const[a,l]=A.useState([]),[c,u]=A.useState(null),[h,m]=A.useState(""),[g,y]=A.useState(!1),[v,b]=A.useState(""),w=A.useRef(null);A.useEffect(()=>{w.current&&(w.current.scrollTop=w.current.scrollHeight)},[]),A.useEffect(()=>{w.current&&(w.current.scrollTop=w.current.scrollHeight)},[a]),A.useEffect(()=>{const O=Os.addRateLimitListener(B=>{g&&(B.exhausted?(b("API Limit Reached. Saving tasks..."),r("Google Gemini API quota exceeded. Please try again later."),y(!1)):b(`Rate limited. High traffic. Retrying in ${B.blockedForSeconds}s...`))});return()=>{O()}},[g]);const k=()=>{var O,B;try{const z=gm.getApiKey();return z||((B=(O=window.process)==null?void 0:O.env)==null?void 0:B.GEMINI_API_KEY)}catch{return}};return{messages:a,setMessages:l,activeConversationId:c,loadConversation:O=>{l(O.messages),u(O.id)},startNewConversation:()=>{l([]),u(null),m(""),y(!1),b("")},inputMessage:h,setInputMessage:m,isAiProcessing:g,aiStatus:v,scrollRef:w,handleSendMessage:async O=>{var W,H,F,T,_,L,V,K,te;const B=O||h;if(!B.trim())return;const z=k();if(!z){r("System: API Key not found in environment.");return}const U={id:Date.now().toString(),role:"user",content:B,timestamp:Date.now()};let $=c;$||($=Date.now().toString(),u($)),l(G=>{const q=[...G,U];if(t.isUnlocked&&e&&$){G.length===0&&Jo.generateTitle(U.content);const M={id:$,title:G.length===0?Jo.generateTitle(U.content):"Conversation",lastMessage:U.content,timestamp:Date.now(),messages:q};Jo.saveConversation(M,e).catch(P=>console.error("Auto-save failed",P))}return q}),m(""),y(!0),b("Thinking...");try{gm.initialize(z);const G=xt.getSnapshot(),q=G.logs.slice(0,5).map(pe=>`[${new Date(pe.timestamp).toLocaleTimeString()}] ${pe.type}: ${pe.message}`).join(`
`);let M="",P="";if(t.hlPublicKey)try{const pe=await Un.getUserFills(t.hlPublicKey);if(pe&&Array.isArray(pe)&&pe.length>0){let Le=0,he=0,Te=0,Ge=0,We=0;pe.forEach(Xe=>{const ft=parseFloat(Xe.closedPnl||"0"),Me=parseFloat(Xe.fee||"0");Le+=ft-Me,We+=Me,Ge+=parseFloat(Xe.px)*parseFloat(Xe.sz),ft>0?he++:ft<0&&Te++});const Qe=he+Te,at=Qe>0?he/Qe*100:0;M=`
          **[PERFORMANCE METRICS - Trading Results]**
          - Total Profit/Loss: ${Le>=0?"+":""}$${Le.toFixed(2)} USD
          - Win Rate: ${at.toFixed(1)}% (${he} wins / ${Te} losses)
          - Total Trades: ${pe.length}
          - Total Volume: $${Ge.toFixed(2)} USD
          - Total Fees Paid: $${We.toFixed(2)} USD`,P=`
          **[RECENT TRADES - Last 5 Fills]**
${[...pe].sort((Xe,ft)=>ft.time-Xe.time).slice(0,5).map(Xe=>{const ft=parseFloat(Xe.closedPnl||"0"),Me=ft!==0?` | PnL: ${ft>=0?"+":""}$${ft.toFixed(2)}`:"";return`          - ${Xe.coin} ${Xe.side==="B"?"BUY":"SELL"} ${Xe.sz} @ $${parseFloat(Xe.px).toFixed(2)}${Me} (${new Date(Xe.time).toLocaleString()})`}).join(`
`)}`}else M=`
          **[PERFORMANCE METRICS]**
          - No trading history yet. Dealer has not executed any trades.`}catch(pe){console.warn("[Agent] Could not fetch dealer performance:",pe),M=`
          **[PERFORMANCE METRICS]**
          - Unable to fetch trading history at this moment.`}else M=`
          **[PERFORMANCE METRICS]**
          - Hyperliquid wallet not connected. Cannot fetch trading data.`;const Y=`
          **HYPERLIQUID DEALER CONTEXT (AUTONOMOUS TRADING ENGINE):**
          You have FULL access to the Hyperliquid Dealer's state, performance, and trading history.
          
          **[STATUS DATA - Current State]**
          - Dealer Status: ${G.isOn?" ACTIVE":" INACTIVE"}
          - Currently Analyzing: ${G.isAnalyzing?"Yes":"No"}
          - Current Task: ${G.currentTask||"Idle"}
          - Current Signal: ${G.currentSignal||"No signal"}
          - Trend Assessment: ${G.trendAssessment}
          - Current Exposure: $${G.currentExposure.toFixed(2)} USDC
          ${M}
          ${P}
          
          **[CONFIGURATION DATA - Only mention when user asks to CHANGE settings]**
          - Max Leverage: ${G.settings.maxLeverage}x
          - Max Position Size: $${G.settings.maxPositionSizeUSDC} USDC
          - Max Open Positions: ${G.settings.maxOpenPositions}
          - Trading Pairs: ${G.settings.tradingPairs.join(", ")}
          - Check Interval: ${G.settings.checkIntervalSeconds}s
          - Bankroll: ${G.settings.bankrollType} (${G.settings.bankrollType==="MANUAL"?"$"+G.settings.manualBankroll:"All Available"})
          
          **[ACTIVITY LOGS - Only show if user asks about activity/history]**
          ${q||"No recent activity"}
          
          **RESPONSE GUIDELINES (CRITICAL):**
          
          1. **STATUS QUESTIONS** (e.g., "What is the dealer doing?", "O que o dealer est fazendo?"):
             - Show: Status (active/inactive), current task, current signal
             - Keep response SHORT and concise (2-3 sentences max)
             - DO NOT list all settings or metrics unless asked
          
          2. **PERFORMANCE/RESULTS QUESTIONS** (e.g., "How much profit?", "Quanto lucrou?", "What's my win rate?"):
             - Use the PERFORMANCE METRICS data above
             - Answer specifically what was asked
             - You CAN mention recent trades if relevant
          
          3. **CONFIGURATION CHANGE REQUESTS** (e.g., "I want to change leverage", "Quero mudar os pares"):
             - Show the relevant current setting
             - Include the configuration navigation button:
             
             [ Go to Dealer Configuration](nav://DEALER_CONFIG)
          
          4. **TRADE REASONING QUESTIONS** (e.g., "Why did you open BTC?", "Por que o Dealer entrou em ETH?", "Explique essa operao"):
             - Use the 'getDealerTradeHistory' tool to fetch detailed reasoning
             - The tool returns the AI's analysis and confidence for each trade
             - Explain the reasoning in a conversational way
             - Include entry price, size, and confidence level
          
          5. **OPEN POSITIONS QUESTIONS** (e.g., "Quais posies esto abertas?", "What positions are open?", "Show my positions"):
             - The Hyperliquid Dealer operates ONLY on Hyperliquid - so if user asks about Dealer positions, use 'getHLBalance'
             - If the conversation context is about Dealer (trading, positions, anlise), assume Hyperliquid - DO NOT ask which network
             - Use the 'getHLBalance' tool to fetch LIVE positions from Hyperliquid
             - This shows CURRENT open positions with entry price, size, and unrealized PnL
             - Only ask "Solana ou Hyperliquid?" if there's no context at all about Dealer
             
             **CRITICAL - DEALER POSITION QUERIES:**
             When user asks ANY of these, IMMEDIATELY call 'getHLBalance':
             - "posies do dealer", "dealer positions"
             - "quais posies", "what positions" (when dealer context exists)
             - "posies abertas", "open positions" (when dealer context exists)
             - "quais?" as follow-up to a position question
             DO NOT respond with just text - CALL THE TOOL!
          
          6. **SPECIFIC QUESTIONS**: Answer ONLY what was asked. Don't dump all data.
          `,X=`
          You are Vault Operator, an autonomous DeFi Agent managing TWO separate vaults: Solana and Hyperliquid.
          Your name is Vault Operator. You also respond to just "Operator". When users ask "who are you" or similar questions, introduce yourself as Vault Operator.
          
          **YOUR IDENTITY:**
          - Solana Vault Address: ${t.publicKey||"UNKNOWN"}
          - Hyperliquid Vault Address: ${t.hlPublicKey||"NOT CREATED"}
          - Solana Owner's Wallet: ${t.ownerPublicKey||"NOT CONNECTED"}
          - Hyperliquid Owner's Wallet: ${t.hlOwnerPublicKey||"NOT CONNECTED"}
          - Current Vault SOL Balance: ${t.solBalance.toFixed(4)} SOL
          
          ${Y}
          
          **NETWORK CONTEXT AWARENESS (CRITICAL):**
          You manage TWO separate vaults on different networks:
          1. **Solana Vault** - for SOL and SPL tokens (USDC, RAY, etc.)
          2. **Hyperliquid Vault** - for perpetual trading with USDC on Hyperliquid Testnet
          
          **KEYWORD RECOGNITION:**
          - "hype", "hyperliquid", "hl" = Hyperliquid operations  call 'getHLBalance' for positions/balance
          - "sol", "solana" = Solana operations  call 'getVaultBalance' for balance
          - "dealer", "hyperliquid dealer", "trading bot", "autonomous trading" = Hyperliquid Dealer questions (implies Hyperliquid)
          
          **CRITICAL - NETWORK vs COIN DISAMBIGUATION:**
          "Solana" and "Hyperliquid" are BOTH network names AND coin names!
          
          CONTEXT CLUES FOR NETWORK:
          - "saldo", "balance", "posies", "positions", "carteira", "wallet"  asking about NETWORK
          - "enviar", "transferir", "withdraw", "sacar"  asking about NETWORK
          - Following a question about "which network?"  answering about NETWORK
          
          CONTEXT CLUES FOR COIN/TOKEN:
          - "preo", "price", "comprar", "buy", "vender", "sell"  asking about COIN
          - "anlise", "analyze", "RSI", "indicador"  asking about COIN
          - "abrir posio", "open position", "long", "short"  trading the COIN
          
          EXAMPLES:
          - "Qual meu saldo no Hyperliquid?"  NETWORK (getHLBalance)
          - "Qual o preo do HYPE?"  COIN (getMarketPrice with HYPEUSDT)
          - "Qual meu saldo de SOL?"  COIN balance on Solana network (getVaultBalance)
          - "Check Solana network"  NETWORK (getVaultBalance without token)
          - "Buy SOL on Hyperliquid"  Trading SOL COIN on HL network
          
          **CRITICAL - NETWORK RESPONSE HANDLING:**
          If the previous message was a question about which network and user responds with:
          - "hype", "hyperliquid", "hl"  IMMEDIATELY call 'getHLBalance' tool - DO NOT just acknowledge
          - "sol", "solana"  IMMEDIATELY call 'getVaultBalance' tool - DO NOT just acknowledge
          - The user is answering your question, so EXECUTE the action right away
          
          **TRANSFER DISAMBIGUATION (CRITICAL):**
          When a user requests a transfer (e.g., "send 1 USDC", "transfer USDC to me"):
          1. Check the conversation context:
             - If they just checked Hyperliquid balance  likely Hyperliquid
             - If they just checked Solana balance  likely Solana
          2. If context is unclear, ASK: "Do you want to withdraw from Solana or Hyperliquid?"
          3. NEVER assume the network - ALWAYS verify first
          
          **SOLANA TRANSFERS:**
          - Use 'transferToken' for SPL tokens
          - Use 'withdrawSol' for SOL
          - Destination: Owner's Solana wallet
          - Network: Solana
          
          **HYPERLIQUID WITHDRAWALS:**
          - Use 'withdrawFromHL' for USDC withdrawals
          - Network: Hyperliquid Testnet
          - Fee: $1 USDC (fixed)
          - Time: ~5 minutes
          - Destination: Owner's wallet on Hyperliquid Testnet (MUST be EVM address starting with 0x)
          - Check Status: Use 'getHLTransfers' to see pending/completed withdrawals
          - Minimum: Amount must be > $1 to cover fee
          
          **BEFORE ANY TRANSFER, YOU MUST:**
          1. Verify the correct network (Solana vs Hyperliquid)
          2. Check the balance on that specific network
          3. Confirm the user has sufficient funds (including fees)
          4. Use the correct tool for that network
          
          **YOUR PERMISSIONS (CRITICAL):**
          - You ARE AUTHORIZED to Withdraw SOL. Use 'withdrawSol'.
          - You ARE AUTHORIZED to Transfer Tokens (SPL/NFTs) to the Owner. Use 'transferToken'.
          - You ARE AUTHORIZED to Withdraw USDC from Hyperliquid. Use 'withdrawFromHL'.
          - You ARE AUTHORIZED to Swap tokens. Use 'executeSwap'.
          - You CANNOT transfer to any other address than the Owner's Wallet.
          
          **BALANCE CHECKING:**
          - When a user asks for their balance, ALWAYS ask if they want to see:
            1. All balances (SOL + all tokens)
            2. A specific token balance
            3. Hyperliquid balance
          - Do NOT assume they only want SOL balance.
          - The vault can hold SOL and many different SPL tokens.
          - If they specify a token, use the 'getVaultBalance' tool with the token parameter.
          - If they want all balances, use 'getVaultBalance' without the token parameter.
          - For Hyperliquid, use 'getHLBalance'.
          
          **TRANSFER REQUESTS (CRITICAL):**
          - When a user says "send", "transfer", or "withdraw" followed by an amount/token, they want to EXECUTE A TRANSFER IMMEDIATELY.
          - Examples of TRANSFER requests:
            * "send my all balance of [token] to me"
            * "transfer 10 USDC to me"
            * "withdraw all my SOL"
            * "send 5 [token mint address]"
            * "2 usdc" (after context is established)
          
          **EXECUTION FLOW:**
          1. Verify which network (Solana or Hyperliquid) from context or keywords
          2. If amount > $1 and network is Hyperliquid, IMMEDIATELY call 'withdrawFromHL'
          3. If network is Solana, call 'transferToken' or 'withdrawSol'
          
          **CRITICAL - DO NOT OVER-VERIFY:**
          - Do NOT check balance before executing withdrawal unless user explicitly asks
          - Do NOT ask for confirmation after user has specified amount and network
          - The user saying "2 usdc" after establishing Hyperliquid context means EXECUTE NOW
          - ALWAYS transfer to the Owner's wallet (you cannot send to any other address)
          
          **TOKEN HANDLING:**
          - If the user uses a ticker (like 'JUP', 'WIF', 'BONK') that is NOT in your list (SOL, USDC, RAY), YOU MUST ASK FOR THE MINT ADDRESS.
          - Say: "I don't recognize that ticker. Please provide the Token Mint Address."
          
          **SOL vs SPL TOKENS (CRITICAL):**
          - SOL is the NATIVE token of Solana, NOT an SPL token
          - When transferring SOL, use 'withdrawSol' tool (NOT 'transferToken')
          - SOL mint address: So11111111111111111111111111111111111111112
          - For SPL tokens (USDC, USDT, RAY, etc.), use 'transferToken' with the token's mint address
          - If user says "send SOL" or "transfer SOL", use 'withdrawSol'
          - If user provides a mint address that is NOT So11111111111111111111111111111111111111112, it's an SPL token
          
          **MARKET DATA & INDICATORS:**
          - You have access to real-time market data and technical indicators via TradingView.
          - Available indicators: RSI, MACD, EMA, SMA, Stochastic, Price
          - You can fetch current prices, OHLCV data, and indicator values for any trading symbol.
          - Use 'getMarketPrice' for current price, 'getIndicator' for technical indicators.
          - Use 'getTradingViewSummary' for overall market sentiment.
          
          **ASSET ANALYSIS (CRITICAL - When user asks about an asset):**
          When user asks something like:
          - "O que me diz do BTC?" / "What about BTC?"
          - "Como est o ETH?" / "How's ETH doing?"
          - "Analisa o SOL pra mim" / "Analyze SOL for me"
          - "What's your take on [asset]?"
          
          You MUST provide a COMPREHENSIVE ANALYSIS by:
          1. Call 'getMarketPrice' to get current price
          2. Call 'getIndicator' with indicator='rsi' and timeframe='60' (1h)
          3. Call 'getTradingViewSummary' to get overall sentiment
          
           **CRITICAL - DATA INTEGRITY (NEVER VIOLATE THIS):**
          - You MUST use ONLY the EXACT values returned by the tool calls
          - NEVER invent, estimate, or hallucinate numbers
          - If the tool returns price=89560.56, you say $89,560.56 - NOT any other number
          - If the tool returns RSI=47.67, you say 47.67 - NOT any other number
          - If the tool returns NEUTRAL with (Buy:0 Sell:0 Neutral:1), say EXACTLY that
          - FABRICATING DATA IS A CRITICAL FAILURE - This destroys user trust
          
          **After receiving tool results, format your response like this:**
          
          " **BTC est a $[EXACT PRICE FROM TOOL]** no momento.
          
          O RSI de 1h est em **[EXACT RSI FROM TOOL]** ([interpret based on value]).
          
          O sentimento do TradingView  **[EXACT RECOMMENDATION FROM TOOL]** ([EXACT buy/sell/neutral counts FROM TOOL]).
          
          **Minha leitura:** [Your interpretation based on the REAL data above]"
          
          **Interpretation Guide (use these to interpret the REAL values):**
          - RSI < 30 = Sobrevendido (oversold) - possvel reverso para alta
          - RSI 30-50 = Tendncia de baixa / fraqueza
          - RSI 50-70 = Neutro a levemente bullish
          - RSI > 70 = Sobrecomprado (overbought) - possvel correo
          
          **TradingView Summary meanings:**
          - STRONG_BUY = Sentimento muito bullish
          - BUY = Sentimento positivo
          - NEUTRAL = Mercado indeciso
          - SELL = Sentimento negativo
          - STRONG_SELL = Sentimento muito bearish
          
          **REMEMBER:** Your interpretation ("Minha leitura") should be based on the ACTUAL numbers you received. If RSI is 47.67, that's in the 30-50 range (slight weakness/neutral). If sentiment is NEUTRAL, say it's neutral - don't make up "COMPRA".
          
          **HYPERLIQUID TESTNET TRADING:**
          - You can trade perpetual futures on Hyperliquid Testnet!
          - You have a separate Hyperliquid Vault Wallet with USDC balance.
          
          **IMMEDIATE EXECUTION (CRITICAL):**
          When the user provides all necessary info for an order, EXECUTE IMMEDIATELY:
          - For MARKET orders with USDC amount: Call 'createHLOrder' directly with usdcAmount parameter
          - For MARKET orders with size: Call 'createHLOrder' directly with size parameter
          - DO NOT fetch market data first - the order handler calculates price internally
          - DO NOT ask for confirmation if user already specified the action
          
          **EXAMPLE - IMMEDIATE EXECUTION:**
          User: "short BTC with 5x leverage, 5% profit, 1% stop, using 30 USDC"
           All info provided! Call createHLOrder immediately:
            - coin: "BTC"
            - isBuy: false (SHORT)
            - usdcAmount: 30 (NOT size - let handler calculate)
            - orderType: "market"
            - leverage: 5
            - stopLoss: 1 (percentage - will be converted automatically)
            - takeProfit: 5 (percentage - will be converted automatically)
          
          **ONLY ASK if missing critical info:**
          - Direction not specified (LONG or SHORT?)
          - Amount not specified (how much USDC or size?)
          
          **TP/SL as PERCENTAGES:**
          - If user says "5% profit"  pass takeProfit: 5
          - If user says "1% stop"  pass stopLoss: 1
          - The handler converts percentages to absolute prices automatically
          
          **AVAILABLE HYPERLIQUID TOOLS:**
          - 'getHLBalance' - Check USDC balance and open positions
          - 'getHLMarketData' - Get current price and orderbook (NOT needed for orders)
          - 'createHLOrder' - Place a new order (LONG or SHORT)
          - 'updateHLLeverage' - Change leverage for an asset (automatic with createHLOrder)
          - 'closeHLPosition' - Close an open position
          - 'cancelHLOrder' - Cancel a pending order
          - 'cancelHLOrder' - Cancel a pending order
          - 'withdrawFromHL' - Withdraw USDC to Owner's wallet on Hyperliquid Testnet
          - 'getHLTransfers' - Check status of deposits and withdrawals (Real-time status)

          
          **TASK SCHEDULING (IMPORTANT):**
          You can schedule tasks in TWO ways:
          
          1. **TIME-BASED SCHEDULING:**
             - Provide 'delayMinutes' parameter
             - Examples:
               * User: "swap 0.1 SOL for USDC in 5 minutes"
               * You call: scheduleTask(taskType="SWAP", inputToken="SOL", outputToken="USDC", amount=0.1, delayMinutes=5)
          
          2. **CONDITION-BASED SCHEDULING:**
             - Provide 'conditionIndicator', 'conditionSymbol', 'conditionOperator', 'conditionValue', and 'conditionTimeframe'
             - **CRITICAL**: 'conditionTimeframe' is REQUIRED. If the user does not provide it, you MUST ASK.
             
             - Examples:
               * User: "swap 0.1 SOL to USDC when RSI of BTCUSDT is less than 30"
               * You: "What timeframe should I use for the RSI? (e.g., 15m, 1h, 4h, 1d)"
               * User: "1 hour"
               * You call: scheduleTask(taskType="SWAP", inputToken="SOL", outputToken="USDC", amount=0.1, conditionIndicator="rsi", conditionSymbol="BTCUSDT", conditionOperator="<", conditionValue=30, conditionTimeframe="60")
               
               * User (PT): "se o BTC estiver com o RSI maior ou igual a 50 me transfira 0.1 SOL"
               * You: "Qual o perodo (timeframe) para o RSI? (ex: 1h, 4h, Dirio)"
               * User: "Dirio"
               * You call: scheduleTask(taskType="TRANSFER", amount=0.1, inputToken="SOL", conditionIndicator="rsi", conditionSymbol="BTC", conditionOperator=">=", conditionValue=50, conditionTimeframe="D")
               
               * User (PT): "me avise se o RSI do BTC cair abaixo de 30"
               * You: "Em qual tempo grfico? (15m, 1h, 4h...)"
          
          **HYPERLIQUID ORDER SCHEDULING:**
          You can schedule Hyperliquid orders based on market conditions!
          
          - Examples:
            * User: "Open LONG 0.001 BTC at 90k when RSI daily < 30, stop 88k, profit 99k, leverage 10x"
            * You ask (if timeframe not specified): "What timeframe for RSI?"
            * User: "Daily"
            * You call: scheduleTask(
                taskType="HL_ORDER",
                coin="BTC",
                isBuy=true,
                size=0.001,
                orderType="limit",
                price=90000,
                leverage=10,
                stopLoss=88000,
                takeProfit=99000,
                conditionIndicator="rsi",
                conditionSymbol="BTCUSDT",
                conditionOperator="<",
                conditionValue=30,
                conditionTimeframe="D"
              )
            
            * User (PT): "abrir short de 0.5 ETH quando o MACD cruzar abaixo de 0"
            * You: "Qual o timeframe para o MACD? E qual o preo limite ou prefere ordem a mercado?"
            * User: "4 horas, a mercado"
            * You call: scheduleTask(
                taskType="HL_ORDER",
                coin="ETH",
                isBuy=false,
                size=0.5,
                orderType="market",
                conditionIndicator="macd",
                conditionSymbol="ETHUSDT",
                conditionOperator="<",
                conditionValue=0,
                conditionTimeframe="240"
              )
          
          **CRITICAL - HL_ORDER REQUIREMENTS:**
          You MUST ask for ALL required parameters:
          - Coin (asset symbol)
          - Direction (LONG/SHORT or BUY/SELL)
          - Size (amount)
          - Order Type (LIMIT or MARKET)
          - Price (required for LIMIT orders)
          - Leverage (default 1x if not specified)
          - Stop Loss (optional, ask if user wants)
          - Take Profit (optional, ask if user wants)
          - Condition details (indicator, symbol, operator, value, timeframe)
          
          **SUPPORTED PARAMETERS:**
          - taskType: "SWAP", "TRANSFER", "ALERT", or "HL_ORDER"
          - For SWAP: inputToken, outputToken, amount
          - For TRANSFER: inputToken (e.g. "SOL"), amount
          - For ALERT: No financial parameters needed
          - For HL_ORDER: coin, isBuy, size, orderType, price (for limit), leverage, stopLoss, takeProfit
          - For time-based: delayMinutes
          - For condition-based: conditionIndicator, conditionSymbol, conditionOperator, conditionValue, conditionTimeframe (REQUIRED - ASK IF MISSING)
          
          **INDICATORS:** rsi, macd, ema, sma, stoch, price
          **OPERATORS:** <, >, <=, >=, ==
          **TIMEFRAMES:** 1, 5, 15, 60, 240, D (daily), W (weekly)
          
          **CRITICAL - MISSING INFORMATION:**
          - If the user's request is MISSING required information (ESPECIALLY TIMEFRAME), you MUST ask for it.
          - DO NOT call scheduleTask with incomplete parameters.
          - DO NOT assume a default timeframe like 'D'. ALWAYS ASK.
          - Examples of what to ask:
            * "Para qual smbolo voc quer monitorar o RSI?" (Which symbol?)
            * "Qual o valor limite do RSI?" (What threshold?)
            * "Em qual perodo grfico (1h, 4h, Dirio)?" (Which timeframe?)
            * "Quanto voc quer transferir?" (How much?)
            * "Qual token voc quer transferir?" (Which token?)
          
          **EXECUTION:**
          - When swapping, confirm the action.
          - When scheduling with conditions, confirm the condition that will trigger the task.
          - Always respond in the same language the user is using (English or Portuguese).
          
          **=== LIQUIDITY POOL (LP) OPERATIONS - SOLANA DEVNET ===**
          
          **TERMINOLOGY - DEFINIES:**
          - **LP** = Liquidity Pool (Pool de Liquidez) OU Liquidity Provider (Provedor de Liquidez)
          - **Pool de Liquidez** = Par de tokens em um DEX que permite swaps (ex: SOL/USDC)
          - **Posio de LP** = Tokens depositados em um pool para ganhar taxas de trading
          - **TVL** = Total Value Locked (Valor Total Bloqueado em USD)
          - **APY** = Annual Percentage Yield (Rendimento Anual Percentual)
          - **Impermanent Loss (IL)** = Perda Impermanente vs simplesmente HODL
          - **DLMM** = Dynamic Liquidity Market Maker (Meteora - liquidez concentrada)
          - **CLMM** = Concentrated Liquidity Market Maker (Raydium - liquidez concentrada)
          - **CPMM** = Constant Product Market Maker (Raydium - AMM tradicional)
          
          **PROTOCOLS SUPPORTED:**
          - **Meteora** = DLMM pools com liquidez concentrada
          - **Raydium** = CLMM (concentrado) e CPMM (tradicional) pools
          
          **KEYWORD RECOGNITION - LP (PT/EN):**
          - "pools", "pool de liquidez", "liquidity pool", "LP"  LP operations
          - "liquidez", "liquidity", "fornecer liquidez", "add liquidity"  LP operations
          - "volume", "TVL", "APY", "rendimento", "yield"  Pool analytics
          - "Meteora", "Raydium", "DLMM", "CLMM"  Protocol-specific queries
          - "posies de LP", "LP positions", "minha liquidez", "my liquidity"  getLPPositions
          - "maior volume", "top pools", "melhores pools", "best pools"  getTopLiquidityPools
          - "impermanent loss", "perda impermanente", "IL"  estimateImpermanentLoss
          - "simular", "simulate", "quanto recebo", "how much"  simulateAddLiquidity
          - "comparar", "compare", "qual melhor"  compareLiquidityPools
          - "volatilidade", "volatility", "voltil", "volatile"  getPoolVolatility or getTopVolatilityPools
          - "ranking volatilidade", "volatility ranking", "most volatile", "mais volteis"  getTopVolatilityPools
          - "faixa ideal", "optimal range", "sugerir faixa", "suggest range", "faixa otimizada"  suggestOptimalRangeByVolatility
          
          **AVAILABLE LP TOOLS - USE THEM!:**
          - 'searchLiquidityPools' - Search pools by token pair, TVL, volume, APY, protocol
          - 'getTopLiquidityPools' - Get ranked pools by 'volume', 'apy', or 'tvl'
          - 'getPoolDetails' - Get details of a specific pool by address
          - 'getLPPositions' - Get user's LP positions across Meteora and Raydium
          - 'getLPPositionDetails' - Get details of a specific LP position
          - 'getUnclaimedLPRewards' - Check unclaimed fees/rewards
          - 'compareLiquidityPools' - Compare Meteora vs Raydium for a token pair
          - 'simulateAddLiquidity' - Simulate adding liquidity before execution
          - 'estimateImpermanentLoss' - Calculate potential IL for price change
          - 'calculateOptimalPriceRange' - Suggest price range for concentrated liquidity
          - 'getLPSwapQuote' - Get swap quote via LP
          - 'getPoolVolatility' - Calculate historical volatility (accepts tokenA/tokenB OR poolAddress)
          - 'getTopVolatilityPools' - Get ranked pools by volatility (highest first)
          - 'suggestOptimalRangeByVolatility' - Suggest price ranges based on volatility (accepts tokenA/tokenB OR poolAddress)
          
          **EXAMPLES - EXEMPLOS (When user says  Call this tool):**
          - "pools com maior volume" / "top pools by volume"  getTopLiquidityPools(criteria='volume')
          - "liste pools" / "list pools"  searchLiquidityPools()
          - "pools SOL/USDC" / "SOL USDC pools"  searchLiquidityPools(tokenA='SOL', tokenB='USDC')
          - "pools no Raydium" / "Raydium pools"  searchLiquidityPools(protocol='raydium')
          - "pools Meteora"  searchLiquidityPools(protocol='meteora')
          - "minhas posies de LP" / "my LP positions"  getLPPositions()
          - "quanto tenho de fees" / "unclaimed fees"  getUnclaimedLPRewards()
          - "compare Meteora e Raydium" / "compare protocols"  compareLiquidityPools(tokenPair='SOL/USDC')
          - "simule impermanent loss" / "estimate IL"  estimateImpermanentLoss(priceChangePercent=20)
          - "pools com APY maior que 50%"  searchLiquidityPools(minAPY=50)
          - "top 10 pools por TVL"  getTopLiquidityPools(criteria='tvl', limit=10)
          - "qual a volatilidade do SOL/USDC?"  getPoolVolatility(tokenA='SOL', tokenB='USDC')
          - "pools mais volteis" / "most volatile pools"  getTopVolatilityPools(limit=10)
          - "ranking de volatilidade"  getTopVolatilityPools()
          - "volatilidade do pool X"  getPoolVolatility(poolAddress='X')
          - "sugira faixa para SOL/USDC"  suggestOptimalRangeByVolatility(tokenA='SOL', tokenB='USDC')
          - "sugira faixa para esse pool"  suggestOptimalRangeByVolatility(poolAddress='X')
          
          **LP BEHAVIOR RULES:**
          1. If user mentions "pools", "LP", "liquidez", "liquidity"  USE LP TOOLS, NOT just text!
          2. If protocol not specified  ASK: "Meteora ou Raydium?" OR show both
          3. For write operations (add/remove liquidity)  ALWAYS confirm before executing
          4. Show results in table format when listing multiple pools
          5. ALWAYS mention we are on SOLANA DEVNET (not mainnet)
          6. If user asks about "melhores pools" without criteria  ask "By volume, APY, or TVL?"
          7. When user asks about volatility or optimal range, use the volatility tools!
          
          **CRITICAL - DO NOT SAY "I can't do LP operations"!**
          You HAVE the tools listed above. USE THEM when user asks about pools/LP/liquidity!
        `,se=await gm.sendOperatorMessage(a,U.content,X),oe=se.functionCalls;let me=[];if(oe&&oe.length>0)for(const pe of oe){const Le=pe.name,he=pe.args;if(Le==="getVaultBalance"){const Te=he.token;if(Te){const Ge=o(Te);if(Te.toUpperCase()==="SOL"||Ge==="So11111111111111111111111111111111111111112"){const We=t.solBalance.toFixed(4),Qe=t.solBalance*kc.SOL,at={type:"balance",network:"solana",token:{symbol:"SOL",mint:"So11111111111111111111111111111111111111112"},amount:t.solBalance,valueUsd:Qe};me.push({type:"success",title:"Balance Check",details:`SOL Balance: ${We} SOL (~$${Qe.toFixed(2)})`,structuredData:{resultType:"balance",items:[at],title:"SOL Balance"}})}else{const We=(W=t.assets)==null?void 0:W.find(Qe=>Qe.mint===Ge);if(We){const Qe=parseFloat(We.amount)/Math.pow(10,We.decimals),at=We.symbol!=="UNKNOWN"?Qe*(kc[We.symbol]||0):0,rt={type:"balance",network:"solana",token:{symbol:We.symbol,mint:We.mint},amount:Qe,valueUsd:at};me.push({type:"success",title:"Balance Check",details:`${We.name} (${We.symbol}): ${Qe.toFixed(4)}${at>0?` (~$${at.toFixed(2)})`:""}`,structuredData:{resultType:"balance",items:[rt],title:`${We.symbol} Balance`}})}else me.push({type:"error",title:"Token Not Found",details:`No balance found for token: ${Te}`})}}else{const Ge=t.solBalance.toFixed(4),We=t.solBalance*kc.SOL;let Qe=`SOL: ${Ge} SOL (~$${We.toFixed(2)})`;const at=[{type:"balance",network:"solana",token:{symbol:"SOL",mint:"So11111111111111111111111111111111111111112"},amount:t.solBalance,valueUsd:We}],rt=(t.assets||[]).filter(Xe=>!Xe.isNft);rt.length>0&&(Qe+=`

Tokens:`,rt.forEach(Xe=>{const ft=parseFloat(Xe.amount)/Math.pow(10,Xe.decimals),Me=Xe.symbol!=="UNKNOWN"?ft*(kc[Xe.symbol]||0):0;Qe+=`
 ${Xe.name} (${Xe.symbol}): ${ft.toFixed(4)}${Me>0?` (~$${Me.toFixed(2)})`:""}`,at.push({type:"balance",network:"solana",token:{symbol:Xe.symbol,mint:Xe.mint},amount:ft,valueUsd:Me})})),me.push({type:"success",title:"Balance Check",details:Qe,structuredData:{resultType:"balances",items:at,title:"Solana Vault Balances",summary:`${at.length} asset${at.length>1?"s":""}`}})}t.publicKey&&i(t.publicKey)}else if(Le==="withdrawSol")if(b("Withdrawing Funds..."),!t.isUnlocked||!t.encryptedPrivateKey)me.push({type:"error",title:"Withdraw Failed",details:"Vault is locked."});else if(!t.ownerPublicKey)me.push({type:"error",title:"Withdraw Failed",details:"No Owner Wallet connected."});else try{const Te=await or.decrypt(t.encryptedPrivateKey,e),Ge=Uint8Array.from(JSON.parse(Te)),We=oa.fromSecretKey(Ge),Qe=await Is.transferSol(We,t.ownerPublicKey,he.amount);s("Transfer",`Withdrew ${he.amount} SOL to Owner`,Qe);const at={type:"transaction",network:"solana",status:"success",title:"Withdraw Executed",description:"SOL transferred to Owner wallet",txHash:Qe,explorerUrl:`https://solscan.io/tx/${Qe}`,details:{from:t.publicKey,to:t.ownerPublicKey,amount:he.amount,token:"SOL"}};me.push({type:"success",title:"Withdraw Executed",details:`Sent ${he.amount} SOL to Owner`,tx:Qe,structuredData:{resultType:"transaction",items:[at],title:"Withdraw Completed"}}),i(t.publicKey)}catch(Te){me.push({type:"error",title:"Withdraw Error",details:Te.message})}else if(Le==="transferToken")if(b("Transferring Token..."),!t.isUnlocked||!t.encryptedPrivateKey)me.push({type:"error",title:"Transfer Failed",details:"Vault is locked."});else if(!t.ownerPublicKey)me.push({type:"error",title:"Transfer Failed",details:"No Owner Wallet connected."});else try{const Te=await or.decrypt(t.encryptedPrivateKey,e),Ge=Uint8Array.from(JSON.parse(Te)),We=oa.fromSecretKey(Ge),Qe=o(he.tokenMint),at=(H=t.assets)==null?void 0:H.find(pt=>pt.mint===Qe),rt=at?at.decimals:9,Xe=(at==null?void 0:at.symbol)||he.tokenMint,ft=await Is.transferToken(We,Qe,t.ownerPublicKey,he.amount,rt);s("Transfer",`Sent ${he.amount} ${Xe} to Owner`,ft);const Me={type:"transaction",network:"solana",status:"success",title:"Transfer Executed",description:`${Xe} transferred to Owner wallet`,txHash:ft,explorerUrl:`https://solscan.io/tx/${ft}`,details:{from:t.publicKey,to:t.ownerPublicKey,amount:he.amount,token:Xe}};me.push({type:"success",title:"Transfer Executed",details:`Sent ${he.amount} of ${Xe} to Owner`,tx:ft,structuredData:{resultType:"transaction",items:[Me],title:"Transfer Completed"}}),i(t.publicKey)}catch(Te){me.push({type:"error",title:"Transfer Error",details:Te.message})}else if(Le==="executeSwap")if(!t.isUnlocked||!t.encryptedPrivateKey)me.push({type:"error",title:"Swap Failed",details:"Vault is locked."});else try{const Te=await or.decrypt(t.encryptedPrivateKey,e),Ge=Uint8Array.from(JSON.parse(Te)),We=oa.fromSecretKey(Ge),Qe=o(he.inputToken),at=o(he.outputToken),rt=await Is.executeSwap(We,Qe,at,he.amount,ft=>b(ft));s("Swap",`Swapped ${he.amount} ${he.inputToken} -> ${he.outputToken}`,rt);const Xe={type:"transaction",network:"solana",status:"success",title:"Swap Executed",description:`${he.inputToken}  ${he.outputToken}`,txHash:rt,explorerUrl:`https://solscan.io/tx/${rt}`,details:{amount:he.amount,token:`${he.inputToken}  ${he.outputToken}`}};me.push({type:"success",title:"Swap Executed",details:`Swapped ${he.amount} ${he.inputToken} for ${he.outputToken}`,tx:rt,structuredData:{resultType:"transaction",items:[Xe],title:"Swap Completed"}}),t.publicKey&&i(t.publicKey)}catch(Te){if((F=Te.message)!=null&&F.includes("timeout")||(T=Te.message)!=null&&T.includes("expired")){console.warn("[Swap]   Swap confirmation timeout, but transaction may have succeeded. Check manually.");const Ge={type:"transaction",network:"solana",status:"pending",title:"Swap Executed (Slow Confirmation)",description:"Transaction sent but confirmation is slow"};me.push({type:"success",title:"Swap Executed (Slow Confirmation)",details:"Transaction sent but confirmation is slow. Please verify on explorer.",tx:"Check Explorer",structuredData:{resultType:"transaction",items:[Ge],title:"Swap Pending Confirmation"}}),i(t.publicKey)}else me.push({type:"error",title:"Swap Failed",details:Te.message})}else if(Le==="scheduleTask")try{console.log("[Scheduler]  Received scheduleTask call with args:",JSON.stringify(he,null,2));let Te,Ge;if(he.conditionIndicator&&he.conditionSymbol&&he.conditionOperator&&he.conditionValue!==void 0&&he.conditionTimeframe){let rt=he.conditionIndicator.toLowerCase(),Xe=he.conditionSymbol.toUpperCase(),ft=he.conditionTimeframe,Me=he.conditionOperator,pt=parseFloat(he.conditionValue);Xe==="BTC"?Xe="BTCUSDT":Xe==="SOL"?Xe="SOLUSDT":Xe==="ETH"?Xe="ETHUSDT":!Xe.includes("USDT")&&!Xe.includes("USD")&&(Xe=`${Xe}USDT`),Me==="menor que"||Me==="less than"?Me="<":Me==="maior que"||Me==="greater than"?Me=">":Me==="menor ou igual a"||Me==="less than or equal to"?Me="<=":Me==="maior ou igual a"||Me==="greater than or equal to"?Me=">=":(Me==="igual a"||Me==="equal to"||Me==="equals")&&(Me="=="),Ge={symbol:Xe,indicator:rt,operator:Me,value:pt,timeframe:ft},console.log("[Scheduler]  Condition-based task created:",Ge)}else if(he.delayMinutes)Te=Date.now()+he.delayMinutes*60*1e3,console.log("[Scheduler]  Time-based task created: executes in",he.delayMinutes,"minutes");else{console.error("[Scheduler]  Missing required parameters for scheduling"),me.push({type:"error",title:"Scheduling Failed",details:"Missing required parameters. Please provide either time delay or condition details."});continue}let We={};if(he.taskType==="SWAP")We={inputToken:he.inputToken,outputToken:he.outputToken,amount:he.amount};else if(he.taskType==="TRANSFER"){let rt=he.inputToken;rt==="SOL"||rt==="sol"?rt="So11111111111111111111111111111111111111112":rt=o(rt),We={amount:he.amount,tokenMint:rt}}else he.taskType==="ALERT"?We={}:he.taskType==="HL_ORDER"&&(We={coin:he.coin,side:he.isBuy?"B":"A",isBuy:he.isBuy,size:he.size,usdcAmount:he.usdcAmount,price:he.price,orderType:he.orderType||"limit",leverage:he.leverage||1,stopLoss:he.stopLoss,takeProfit:he.takeProfit,reduceOnly:he.reduceOnly||!1});const Qe={id:Date.now().toString(),type:he.taskType,params:JSON.stringify(We),executeAt:Te,condition:Ge,status:"active",createdAt:Date.now()};n(rt=>{const Xe=[...rt,Qe];return ke.setItem(ke.getUserKey("agent_scheduled_tasks"),JSON.stringify(Xe)),Xe});let at="";if(Ge)at=`${he.taskType} scheduled to execute when ${Ge.indicator.toUpperCase()} of ${Ge.symbol} (${Ge.timeframe}) ${Ge.operator} ${Ge.value}`;else if(Te){const rt=Math.round((Te-Date.now())/1e3);at=`${he.taskType} scheduled to execute in ${rt} seconds`}me.push({type:"info",title:"Task Scheduled",details:at})}catch(Te){console.error("[Scheduler] Error scheduling task:",Te),me.push({type:"error",title:"Scheduling Failed",details:Te.message})}else if(Le==="getMarketPrice")try{b("Fetching Market Price...");const Te=await wo.getMarketPrice(he.symbol);me.push({type:"success",title:"Market Price",details:`${he.symbol}: ${Te.price} (${Te.exchange})`})}catch(Te){me.push({type:"error",title:"Market Data Error",details:Te.message})}else if(Le==="getOHLCV")try{b("Fetching OHLCV Data...");const Te=await wo.getOHLCV(he.symbol,he.timeframe);me.push({type:"success",title:"OHLCV Data",details:`${he.symbol} [${he.timeframe||"60"}]: O:${Te.open} H:${Te.high} L:${Te.low} C:${Te.close} V:${Te.volume}`})}catch(Te){me.push({type:"error",title:"OHLCV Error",details:Te.message})}else if(Le==="getIndicator")try{b(`Calculating ${he.indicator}...`);const Te=await wo.getIndicator(he.symbol,he.indicator,he.timeframe);let Ge=Te.value;typeof Te.value=="object"&&Te.value!==null&&(Ge=JSON.stringify(Te.value,null,2)),me.push({type:"success",title:"Technical Indicator",details:`${he.symbol} ${Te.indicator.toUpperCase()}: ${Ge}`})}catch(Te){me.push({type:"error",title:"Indicator Error",details:Te.message})}else if(Le==="getTradingViewSummary")try{b("Fetching TradingView Summary...");const Te=await wo.getTradingViewSummary(he.symbol);me.push({type:"success",title:"TradingView Summary",details:`${he.symbol}: ${Te.recommendation} (Buy:${Te.buy} Sell:${Te.sell} Neutral:${Te.neutral})`})}catch(Te){me.push({type:"error",title:"Summary Error",details:Te.message})}else if(Le==="getHLBalance")try{if(!t.hlPublicKey)me.push({type:"error",title:"HL Error",details:"Hyperliquid Vault not created/unlocked."});else{b("Fetching HL Balance...");const Te=await Un.getUserState(t.hlPublicKey);console.log("[HL Debug] FULL USER STATE:",JSON.stringify(Te,null,2));const Ge=parseFloat(Te.marginSummary.accountValue),We=parseFloat(Te.withdrawable),Qe=Te.assetPositions.filter(ft=>parseFloat(ft.position.szi)!==0);let at=`USDC Account Value: $${Ge.toFixed(2)}`;at+=`
Withdrawable: $${We.toFixed(2)}`,Qe.length>0?(at+=`

Open Positions:`,Qe.forEach(ft=>{at+=`
 ${ft.position.coin} ${parseFloat(ft.position.szi)>0?"LONG":"SHORT"} ${Math.abs(parseFloat(ft.position.szi))} @ ${ft.position.entryPx}`})):at+=`
No open positions.`;const rt={type:"balance",network:"hyperliquid",token:{symbol:"USDC"},amount:Ge,valueUsd:Ge},Xe=Qe.map(ft=>{var dt;const Me=parseFloat(ft.position.szi),pt=parseFloat(ft.position.entryPx),Kt=parseFloat(ft.position.unrealizedPnl||0),Re=parseFloat(((dt=ft.position.leverage)==null?void 0:dt.value)||1),He=parseFloat(ft.position.marginUsed||0),gt=parseFloat(ft.position.liquidationPx||0);return{type:"position",protocol:"hyperliquid",coin:ft.position.coin,direction:Me>0?"long":"short",size:Math.abs(Me),entryPrice:pt,valueUsd:Math.abs(Me)*pt,leverage:Re,marginUsed:He,liquidationPrice:gt>0?gt:void 0,pnl:{value:Kt,percent:Kt/(He||1)*100}}});me.push({type:"success",title:"Hyperliquid Balance",details:at,structuredData:{resultType:Qe.length>0?"positions":"balance",items:Qe.length>0?[rt,...Xe]:[rt],title:"Hyperliquid Account",summary:Qe.length>0?`$${Ge.toFixed(2)}  ${Qe.length} position${Qe.length>1?"s":""}`:`$${Ge.toFixed(2)}`}})}}catch(Te){me.push({type:"error",title:"HL Balance Error",details:Te.message})}else if(Le==="getHLMarketData")try{b("Fetching HL Market Data...");const Te=await Un.getMarketData(he.coin),Ge=Te.levels[0][0].px,We=Te.levels[1][0].px;me.push({type:"success",title:`Hyperliquid ${he.coin}`,details:`Best Bid: ${Ge}
Best Ask: ${We}`})}catch(Te){me.push({type:"error",title:"HL Market Data Error",details:Te.message})}else if(Le==="createHLOrder")if(!t.isUnlocked||!t.hlEncryptedPrivateKey)me.push({type:"error",title:"Order Failed",details:"Vault is locked."});else try{b("Placing HL Order...");const Te=await or.decrypt(t.hlEncryptedPrivateKey,e),Ge=Vt.getWalletFromPrivateKey(Te);he.leverage&&await Un.updateLeverage(Ge,he.coin,he.leverage,!1);let We=he.size,Qe=he.price,at=he.orderType||"limit",rt;const Xe=at==="market";if(he.usdcAmount&&!he.size||Xe&&!he.price){console.log(`[HL Order]  Fetching price for ${Xe?"Market Order":"USDC Calc"}`),b("Fetching current price...");const ue=await Un.getMarketData(he.coin),Se=parseFloat(ue.levels[0][0].px),de=parseFloat(ue.levels[1][0].px),ye=he.isBuy?de:Se;if(rt=ye,he.usdcAmount&&!We){console.log(`[HL Order]  Fetching decimals for ${he.coin}`);const et=await Un.getAssetDecimals(he.coin);console.log(`[HL Order]  ${he.coin} decimals: ${et}`);const Ze=he.usdcAmount/ye;We=parseFloat(Ze.toFixed(et)),console.log(`[HL Order]  USDC: ${he.usdcAmount} / Price: ${ye} = Raw Size: ${Ze} -> Rounded: ${We}`)}if(Xe){let Ze=he.isBuy?ye*1.05:ye*.95;console.log("[HL Order]  Fetching decimals for price rounding");const $t=6-await Un.getAssetDecimals(he.coin);let vt=parseFloat(Ze.toFixed($t));vt=parseFloat(vt.toPrecision(5)),Qe=parseFloat(vt.toFixed($t)),at="ioc",console.log(`[HL Order]  Market Order: Base ${ye} -> Raw ${Ze.toFixed(6)} -> Rounded ${Qe}`)}}if(!We)throw new Error("Either size or usdcAmount must be provided");if(at==="limit"&&Qe){const ue=await Un.getAssetDecimals(he.coin),Se=Math.max(0,6-ue);let de=parseFloat(Qe.toFixed(Se));de=parseFloat(de.toPrecision(5)),Qe=parseFloat(de.toFixed(Se)),console.log(`[HL Order]   Limit price rounded: ${he.price} -> ${Qe} (maxDecimals=${Se})`)}if(at==="limit"&&!Qe)throw new Error("Price is required for Limit orders");let Me=he.stopLoss,pt=he.takeProfit;const Kt=rt||Qe;Kt&&(he.stopLoss&&he.stopLoss<100&&(he.isBuy?Me=Kt*(1-he.stopLoss/100):Me=Kt*(1+he.stopLoss/100),console.log(`[HL Order]  SL %: ${he.stopLoss}% -> Absolute: ${Me==null?void 0:Me.toFixed(2)} (from base ${Kt})`)),he.takeProfit&&he.takeProfit<100&&(he.isBuy?pt=Kt*(1+he.takeProfit/100):pt=Kt*(1-he.takeProfit/100),console.log(`[HL Order]  TP %: ${he.takeProfit}% -> Absolute: ${pt==null?void 0:pt.toFixed(2)} (from base ${Kt})`))),b("Placing HL Order...");const Re=await Un.createOrder(Ge,he.coin,he.isBuy,We,Qe,{orderType:at,reduceOnly:he.reduceOnly||!1,stopLoss:Me,takeProfit:pt}),He=(he.orderType||"limit").toUpperCase(),gt=he.leverage?` (${he.leverage}x leverage)`:"",dt=Qe?` @ ${Qe}`:"",ie=he.usdcAmount?` (${he.usdcAmount} USDC)`:"",J=Me||pt?` [SL: ${Me?Me.toFixed(2):"none"}, TP: ${pt?pt.toFixed(2):"none"}]`:"",Z={type:"transaction",network:"hyperliquid",status:"success",title:"Order Placed",description:`${He} ${he.isBuy?"LONG":"SHORT"} ${he.coin}`,details:{amount:We,token:he.coin}};me.push({type:"success",title:"Order Placed",details:`Placed ${He} ${he.isBuy?"LONG":"SHORT"} ${We.toFixed(4)} ${he.coin}${ie}${dt}${gt}${J}`,structuredData:{resultType:"transaction",items:[Z],title:"Order Executed"}})}catch(Te){me.push({type:"error",title:"Order Failed",details:Te.message})}else if(Le==="updateHLLeverage")if(!t.isUnlocked||!t.hlEncryptedPrivateKey)me.push({type:"error",title:"Leverage Update Failed",details:"Vault is locked."});else try{b("Updating Leverage...");const Te=await or.decrypt(t.hlEncryptedPrivateKey,e),Ge=Vt.getWalletFromPrivateKey(Te),We=await Un.updateLeverage(Ge,he.coin,he.leverage,he.isCross);me.push({type:"success",title:"Leverage Updated",details:`Set ${he.coin} leverage to ${he.leverage}x (${he.isCross?"Cross":"Isolated"})`})}catch(Te){me.push({type:"error",title:"Leverage Update Failed",details:Te.message})}else if(Le==="closeHLPosition")if(!t.isUnlocked||!t.hlEncryptedPrivateKey)me.push({type:"error",title:"Close Failed",details:"Vault is locked."});else try{b("Closing Position...");const Te=await or.decrypt(t.hlEncryptedPrivateKey,e),Ge=Vt.getWalletFromPrivateKey(Te);try{b("Closing HL Position...");try{const We=await Un.closePosition(Ge,he.coin,he.size,he.orderType||"market",he.price);me.push({type:"success",title:"Position Closed",details:`Closed ${he.size?he.size:"entire"} ${he.coin} position via ${he.orderType||"market"} order`})}catch(We){if(We.message&&We.message.includes("Insufficient margin")){console.log("[HL Close] Insufficient margin detected. Attempting to Add Isolated Margin..."),b("Insufficient Margin. Adding Funds...");const Qe=await Un.getUserState(Ge.address),at=Qe.assetPositions.find(rt=>rt.position.coin===he.coin);if(at){const Xe=parseFloat(at.position.szi)>0,ft=parseFloat(Qe.withdrawable);let Me=20;if(ft<25&&(Me=Math.max(0,ft-2)),Me<1)throw new Error(`Insufficient margin to close and wallet balance is too low ($${ft.toFixed(2)}) to add more margin.`);console.log(`[HL Close] Wallet Balance: ${ft}, Adding Margin: ${Me}`),await Un.updateIsolatedMargin(Ge,he.coin,Xe,Me),console.log("[HL Close] Retrying close after adding margin..."),b("Retrying Close Position..."),await Un.closePosition(Ge,he.coin,he.size,he.orderType||"market",he.price),me.push({type:"success",title:"Position Closed (Recovered)",details:`Added ${Me.toFixed(2)} USDC margin to cover loss and closed ${he.coin} position successfully.`})}else throw new Error("Position not found during margin recovery.")}else if(We.message&&We.message.includes("Cross margin is not allowed"))me.push({type:"error",title:"Close Failed",details:"Cross margin not supported and insufficient isolated margin."});else throw We}}catch(We){me.push({type:"error",title:"Close Failed",details:We.message})}}catch(Te){me.push({type:"error",title:"Close Failed",details:Te.message})}else if(Le==="cancelHLOrder")if(!t.isUnlocked||!t.hlEncryptedPrivateKey)me.push({type:"error",title:"Cancel Failed",details:"Vault is locked."});else try{b("Cancelling HL Order...");const Te=await or.decrypt(t.hlEncryptedPrivateKey,e),Ge=Vt.getWalletFromPrivateKey(Te),We=await Un.cancelOrder(Ge,he.coin,he.orderId);me.push({type:"success",title:"Order Cancelled",details:`Cancelled Order ${he.orderId}. Status: ${We.status}`})}catch(Te){me.push({type:"error",title:"Cancel Failed",details:Te.message})}else if(Le==="withdrawFromHL")if(!t.isUnlocked||!t.hlEncryptedPrivateKey)me.push({type:"error",title:"Withdrawal Failed",details:"Hyperliquid Vault is locked."});else if(!t.hlOwnerPublicKey)me.push({type:"error",title:"Withdrawal Failed",details:"No Hyperliquid Owner Wallet connected. Please connect your MetaMask wallet first."});else if(t.hlOwnerPublicKey&&!t.hlOwnerPublicKey.startsWith("0x"))me.push({type:"error",title:"Withdrawal Failed",details:`Invalid Hyperliquid Owner Address: ${t.hlOwnerPublicKey}. It must be an EVM address (start with 0x). You might be trying to send to a Solana wallet.`});else try{b("Withdrawing from Hyperliquid...");const Te=await or.decrypt(t.hlEncryptedPrivateKey,e),Ge=Vt.getWalletFromPrivateKey(Te),We=await Un.withdrawUSDC(Ge,t.hlOwnerPublicKey,he.amount);s("HL Withdrawal",`Withdrew ${he.amount} USDC from Hyperliquid`,((K=(V=(L=(_=We.response)==null?void 0:_.data)==null?void 0:L.statuses)==null?void 0:V[0])==null?void 0:K.tx)||"pending"),me.push({type:"success",title:"Hyperliquid Withdrawal Initiated",details:`Withdrawing ${he.amount} USDC to ${t.hlOwnerPublicKey.slice(0,6)}...${t.hlOwnerPublicKey.slice(-4)}. Fee: $1 USDC. ETA: ~5 minutes.`})}catch(Te){(te=Te.message)!=null&&te.includes("Must deposit before performing actions")?me.push({type:"error",title:"Deposit Required",details:"Your Hyperliquid account needs an initial deposit before you can perform any actions. Please deposit USDC to your Hyperliquid vault address first."}):me.push({type:"error",title:"Withdrawal Error",details:Te.message})}else if(Le==="getHLTransfers")if(!t.hlPublicKey)me.push({type:"error",title:"HL Error",details:"Hyperliquid Vault not created/unlocked."});else try{b("Fetching Transfer History...");const Te=await Un.getUserLedgerUpdates(t.hlPublicKey);if(Te.length===0)me.push({type:"success",title:"Transfer History",details:"No deposits or withdrawals found."});else{const Ge=Date.now(),We=Te.slice(0,10).map(Qe=>{const at=new Date(Qe.time),rt=Qe.delta.amount>0?"Deposit":"Withdrawal",Xe=Math.abs(parseFloat(Qe.delta.amount)),ft=Ge-Qe.time<600*1e3?"Processing/Recent":"Completed";return` ${rt} $${Xe.toFixed(2)} USDC - ${at.toLocaleString()} (${ft})`}).join(`
`);me.push({type:"success",title:"Hyperliquid Transfers",details:`Last 10 updates:
${We}`,structuredData:{resultType:"transaction",items:Te.map(Qe=>({type:"transaction",network:"hyperliquid",status:"success",title:Qe.delta.amount>0?"Deposit":"Withdrawal",description:`${Qe.delta.amount>0?"Deposit":"Withdrawal"} of $${Math.abs(parseFloat(Qe.delta.amount)).toFixed(2)} USDC`,details:{amount:Math.abs(parseFloat(Qe.delta.amount)),token:"USDC",timestamp:Qe.time}})),title:"Transfer History"}})}}catch(Te){me.push({type:"error",title:"Transfer History Error",details:Te.message})}else if(Le==="getDealerTradeHistory")try{b("Querying Dealer history...");const Te=he.coin||void 0,Ge=Math.min(he.limit||10,50),We=he.includeReasoning!==!1,Qe=xt.getSnapshot(),at=xt.getTradeHistory(Te,Ge,We);if(at.operations.length===0&&at.recentLogs.length===0){let rt="";Te?rt=`No h histrico de operaes em ${Te}. O Dealer no executou trades nessa moeda.`:Qe.logs.length===0?rt="Sem histrico disponvel. O Dealer ainda no executou nenhum trade ou o histrico foi limpo.":rt="O Dealer analisou o mercado mas no executou nenhum trade ainda. Os sinais recebidos no atingiram o nvel de confiana necessrio.",me.push({type:"success",title:"Dealer History",details:rt})}else{let rt="";at.operations.length>0&&(rt+=` **TRADE OPERATIONS** (${at.totalOperations} total)

`,at.operations.forEach((Xe,ft)=>{var Kt,Re;const Me=Xe.pnl!==void 0?` | PnL: ${Xe.pnl>=0?"+":""}$${Xe.pnl.toFixed(2)}`:"",pt=Xe.status==="OPEN"?"":"";rt+=`${pt} **${Xe.action} ${Xe.coin}** @ $${((Kt=Xe.entryPrice)==null?void 0:Kt.toFixed(2))||"N/A"}${Me}
`,rt+=`   Size: ${Xe.size} ($${(Re=Xe.sizeUSDC)==null?void 0:Re.toFixed(2)}) | Confidence: ${(Xe.confidence*100).toFixed(0)}%
`,We&&Xe.fullReasoning&&(rt+=`   **Reasoning:** ${Xe.fullReasoning}
`),rt+=`   Time: ${new Date(Xe.timestamp).toLocaleString()}

`})),at.operations.length===0&&at.recentLogs.length>0&&(rt+=` **RECENT ANALYSIS LOGS**

`,at.recentLogs.forEach(Xe=>{var ft;rt+=` [${Xe.type}] ${Xe.message}
`,(ft=Xe.details)!=null&&ft.fullReason&&(rt+=`  Reasoning: ${Xe.details.fullReason}
`)})),me.push({type:"success",title:Te?`Dealer History: ${Te}`:"Dealer Trade History",details:rt.trim()})}}catch(Te){me.push({type:"error",title:"Dealer History Error",details:Te.message})}else if(dmt(Le))try{const Te=await umt(Le,he,t.publicKey||void 0,Ge=>b(Ge));Te&&me.push(Te)}catch(Te){me.push({type:"error",title:"LP Tool Error",details:Te.message})}}let ce="";if(se.candidates&&se.candidates[0].content&&se.candidates[0].content.parts)for(const pe of se.candidates[0].content.parts)pe.text&&(ce+=pe.text);let ve="I processed your request.";if(me.length>0){const pe=me.some(he=>he.type==="error"),Le=me.some(he=>he.type==="success");pe&&!Le?ve="I encountered an issue executing that command.":Le?ve="Action completed successfully.":pe&&Le&&(ve="Some actions completed, but others failed.")}const Ne={id:(Date.now()+1).toString(),role:"model",content:ce||ve,timestamp:Date.now(),toolResults:me};l(pe=>{const Le=[...pe,Ne];if(t.isUnlocked&&e&&c){const he={id:c,title:pe.length>0&&pe[0].role==="user"?Jo.generateTitle(pe[0].content):"Conversation",lastMessage:Ne.content.substring(0,50),timestamp:Date.now(),messages:Le};Jo.saveConversation(he,e).catch(Te=>console.error("Auto-save after model response failed",Te))}return Le})}catch(G){console.error("AI Error:",G);const q={id:Date.now().toString(),role:"model",content:"Sorry, I encountered a system error while processing that request.",toolResults:[{type:"error",title:"System Error",details:G.message}],timestamp:Date.now()};l(M=>{const P=[...M,q];if(t.isUnlocked&&e&&c){const Y={id:c,title:M.length>0&&M[0].role==="user"?Jo.generateTitle(M[0].content):"Conversation",lastMessage:q.content.substring(0,50),timestamp:Date.now(),messages:P};Jo.saveConversation(Y,e).catch(X=>console.error("Auto-save after error response failed",X))}return P})}finally{y(!1),b("")}}}},gg="/poly-clob",lT="/poly-gamma",hmt="/poly-data",Pee=200,pmt=3;class mmt{constructor(){this.privateKey=null,this.wallet=null,this.apiCredentials=null,this.lastRequestTime=0,this.isInitialized=!1}createWallet(){return nh.createRandom()}getWalletFromPrivateKey(e){return new nh(e)}async initialize(e){try{return this.privateKey=e,this.wallet=new nh(e),this.apiCredentials=await this.createOrDeriveApiKeys(),this.isInitialized=!0,console.log("[PolymarketService] Initialized with address:",this.wallet.address),!0}catch(n){return console.error("[PolymarketService] Failed to initialize:",n),!1}}getIsInitialized(){return this.isInitialized}getAddress(){var e;return((e=this.wallet)==null?void 0:e.address)||null}async throttledFetch(e,n){const i=Date.now()-this.lastRequestTime;i<Pee&&await new Promise(o=>setTimeout(o,Pee-i)),this.lastRequestTime=Date.now();let s=null;for(let o=0;o<pmt;o++)try{const a=await fetch(e,n);if(a.status===429){const l=parseInt(a.headers.get("Retry-After")||"1",10);console.warn(`[PolymarketService] Rate limited, waiting ${l}s...`),await new Promise(c=>setTimeout(c,l*1e3));continue}return a}catch(a){s=a,console.warn(`[PolymarketService] Request failed (attempt ${o+1}):`,a),await new Promise(l=>setTimeout(l,1e3*(o+1)))}throw s||new Error("Request failed after retries")}async createOrDeriveApiKeys(){if(!this.wallet)throw new Error("Wallet not initialized");try{const n=`Deriving Polymarket API Key at ${Math.floor(Date.now()/1e3)}`,r=await this.wallet.signMessage(n),i=Kn(mi(r+"apiKey")).slice(0,34),s=Kn(mi(r+"secret")).slice(0,66),o=Kn(mi(r+"passphrase")).slice(0,18);return{apiKey:i,secret:s,passphrase:o}}catch(e){throw console.error("[PolymarketService] Failed to derive API keys:",e),e}}generateHmacSignature(e,n,r,i){if(!this.apiCredentials)throw new Error("API credentials not initialized");const s=r+e+n+(i||"");return Kn(mi(this.apiCredentials.secret+s))}getAuthHeaders(e,n,r){if(!this.apiCredentials||!this.wallet)throw new Error("Service not initialized");const i=Math.floor(Date.now()/1e3).toString(),s=this.generateHmacSignature(e,n,i,r);return{"Content-Type":"application/json",POLY_ADDRESS:this.wallet.address,POLY_API_KEY:this.apiCredentials.apiKey,POLY_PASSPHRASE:this.apiCredentials.passphrase,POLY_SIGNATURE:s,POLY_TIMESTAMP:i}}async getActiveMarkets(e,n=50,r=0){try{let i=`${lT}/events?active=true&closed=false&limit=${n}&offset=${r}`;e&&(i+=`&tag=${e}`);const s=await this.throttledFetch(i);if(!s.ok)throw new Error(`Failed to fetch markets: ${s.status}`);const o=await s.json(),a=[];for(const l of o)if(l.markets&&Array.isArray(l.markets))for(const c of l.markets)a.push(this.transformMarket(c,l));return a}catch(i){return console.error("[PolymarketService] Failed to fetch active markets:",i),[]}}async getMarketBySlug(e){try{const n=await this.throttledFetch(`${lT}/markets/slug/${e}`);if(!n.ok){if(n.status===404)return null;throw new Error(`Failed to fetch market: ${n.status}`)}const r=await n.json();return this.transformMarket(r)}catch(n){return console.error("[PolymarketService] Failed to fetch market by slug:",n),null}}async getMarketPrices(e){var r,i,s,o;const n=new Map;try{for(const a of e){const l=await this.throttledFetch(`${gg}/book?token_id=${a}`);if(l.ok){const c=await l.json(),u=((i=(r=c.bids)==null?void 0:r[0])==null?void 0:i.price)||0,h=((o=(s=c.asks)==null?void 0:s[0])==null?void 0:o.price)||1,m=(parseFloat(u)+parseFloat(h))/2;n.set(a,{yes:m,no:1-m})}}}catch(a){console.error("[PolymarketService] Failed to fetch market prices:",a)}return n}async searchMarkets(e,n=20){try{const r=await this.throttledFetch(`${lT}/search/events?search_string=${encodeURIComponent(e)}&limit=${n}`);if(!r.ok)throw new Error(`Search failed: ${r.status}`);const i=await r.json(),s=[];for(const o of i)if(o.markets&&Array.isArray(o.markets))for(const a of o.markets)s.push(this.transformMarket(a,o));return s}catch(r){return console.error("[PolymarketService] Failed to search markets:",r),[]}}transformMarket(e,n){var r,i,s,o,a,l,c,u;return{id:e.id||e.condition_id,conditionId:e.condition_id||e.conditionId||"",questionId:e.question_id||e.questionId||"",slug:e.slug||"",question:e.question||(n==null?void 0:n.title)||"",description:e.description||(n==null?void 0:n.description)||"",tokenIdYes:((i=(r=e.tokens)==null?void 0:r[0])==null?void 0:i.token_id)||((s=e.clobTokenIds)==null?void 0:s[0])||"",tokenIdNo:((a=(o=e.tokens)==null?void 0:o[1])==null?void 0:a.token_id)||((l=e.clobTokenIds)==null?void 0:l[1])||"",priceYes:parseFloat((c=e.outcomePrices)==null?void 0:c[0])||.5,priceNo:parseFloat((u=e.outcomePrices)==null?void 0:u[1])||.5,volume24h:parseFloat(e.volume24hr)||0,liquidity:parseFloat(e.liquidity)||0,endDate:e.endDate||e.end_date_iso||"",category:this.categorizeMarket((n==null?void 0:n.tags)||[]),active:e.active!==!1,resolved:e.resolved||!1,outcome:e.outcome||null}}categorizeMarket(e){const n=e.join(" ").toLowerCase();return n.includes("crypto")||n.includes("bitcoin")||n.includes("ethereum")?"crypto":n.includes("politic")||n.includes("election")||n.includes("government")?"politics":n.includes("sport")||n.includes("nfl")||n.includes("nba")||n.includes("soccer")?"sports":n.includes("business")||n.includes("economy")||n.includes("stock")?"business":n.includes("science")||n.includes("tech")||n.includes("ai")?"science":n.includes("culture")||n.includes("entertainment")||n.includes("celebrity")?"pop-culture":"other"}async getBalance(){if(!this.wallet)return 0;try{const e="https://polygon-rpc.com",n="0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174",r=new X_e(e),i=["function balanceOf(address) view returns (uint256)"],o=await new sy(n,i,r).balanceOf(this.wallet.address);return parseFloat(bre(o,6))}catch(e){return console.error("[PolymarketService] Failed to get balance:",e),0}}async getOpenOrders(){if(!this.isInitialized)return[];try{const e="/orders",n=this.getAuthHeaders("GET",e),r=await this.throttledFetch(`${gg}${e}`,{method:"GET",headers:n});if(!r.ok)throw new Error(`Failed to fetch orders: ${r.status}`);return(await r.json()).map(s=>this.transformOrder(s))}catch(e){return console.error("[PolymarketService] Failed to fetch open orders:",e),[]}}async getPositions(){if(!this.wallet)return[];try{const e=this.wallet.address,n=await this.throttledFetch(`${hmt}/positions?user=${e}`);if(!n.ok){if(n.status===404)return[];throw new Error(`Failed to fetch positions: ${n.status}`)}const r=await n.json();return Array.isArray(r)?r.map(i=>this.transformPosition(i)):[]}catch(e){return console.error("[PolymarketService] Failed to fetch positions:",e),[]}}async getTrades(e=20){if(!this.isInitialized)return[];try{const n=`/trades?limit=${e}`,r=this.getAuthHeaders("GET",n),i=await this.throttledFetch(`${gg}${n}`,{method:"GET",headers:r});if(!i.ok)throw new Error(`Failed to fetch trades: ${i.status}`);return(await i.json()).map(o=>this.transformTrade(o))}catch(n){return console.error("[PolymarketService] Failed to fetch trades:",n),[]}}async createOrder(e){if(!this.isInitialized)return{success:!1,error:"Service not initialized"};try{const n={tokenID:e.tokenId,price:e.price.toString(),size:e.size.toString(),side:e.side,orderType:"GTC",tickSize:e.tickSize||"0.01",negRisk:e.negRisk||!1},r="/order",i=JSON.stringify(n),s=this.getAuthHeaders("POST",r,i),o=await this.throttledFetch(`${gg}${r}`,{method:"POST",headers:s,body:i});if(!o.ok)return{success:!1,error:(await o.json().catch(()=>({}))).message||`Order failed: ${o.status}`};const a=await o.json();return{success:!0,orderId:a.orderID||a.order_id}}catch(n){return console.error("[PolymarketService] Failed to create order:",n),{success:!1,error:n.message}}}async cancelOrder(e){if(!this.isInitialized)return!1;try{const n=`/order/${e}`,r=this.getAuthHeaders("DELETE",n);return(await this.throttledFetch(`${gg}${n}`,{method:"DELETE",headers:r})).ok}catch(n){return console.error("[PolymarketService] Failed to cancel order:",n),!1}}async cancelAllOrders(){if(!this.isInitialized)return!1;try{const e="/orders",n=this.getAuthHeaders("DELETE",e);return(await this.throttledFetch(`${gg}${e}`,{method:"DELETE",headers:n})).ok}catch(e){return console.error("[PolymarketService] Failed to cancel all orders:",e),!1}}transformOrder(e){var n;return{id:e.id||e.order_id,marketId:e.market||e.marketId||"",tokenId:e.asset_id||e.tokenId||"",side:((n=e.side)==null?void 0:n.toUpperCase())||"BUY",outcome:e.outcome||"YES",price:parseFloat(e.price)||0,size:parseFloat(e.original_size||e.size)||0,filledSize:parseFloat(e.size_matched||e.filledSize)||0,status:this.mapOrderStatus(e.status),createdAt:new Date(e.created_at||e.createdAt).getTime()}}mapOrderStatus(e){return{open:"OPEN",live:"OPEN",matched:"FILLED",filled:"FILLED",cancelled:"CANCELED",canceled:"CANCELED",partial:"PARTIALLY_FILLED"}[e==null?void 0:e.toLowerCase()]||"OPEN"}transformPosition(e){var c;const n=parseFloat(e.size||e.shares)||0,r=parseFloat(e.avgPrice||e.average_price)||0,i=parseFloat(e.currentPrice||e.price)||r,s=n*r,o=n*i,a=o-s,l=s>0?a/s*100:0;return{marketId:e.market||e.marketId||"",question:e.question||e.title||"",outcome:((c=e.outcome)==null?void 0:c.toUpperCase())||"YES",shares:n,avgPrice:r,currentPrice:i,unrealizedPnl:a,unrealizedPnlPercent:l,costBasis:s,currentValue:o}}transformTrade(e){var n,r;return{id:e.id||e.trade_id,marketId:e.market||e.marketId||"",question:e.question||e.title||"",outcome:((n=e.outcome)==null?void 0:n.toUpperCase())||"YES",side:((r=e.side)==null?void 0:r.toUpperCase())||"BUY",price:parseFloat(e.price)||0,size:parseFloat(e.size)||0,fee:parseFloat(e.fee||e.trading_fee)||0,timestamp:new Date(e.created_at||e.timestamp||e.createdAt).getTime(),realizedPnl:e.realized_pnl?parseFloat(e.realized_pnl):void 0}}async checkHealth(){try{return(await this.throttledFetch(`${lT}/health`)).ok}catch{return!1}}}const os=new mmt;class gmt{async getMarketContext(e){try{const n=new Date(e.endDate),r=new Date,i=Math.max(0,Math.ceil((n.getTime()-r.getTime())/(1e3*60*60*24)));let s="neutral";return e.priceYes>.6?s="bullish":e.priceYes<.4&&(s="bearish"),{market:e,timeToResolution:i,sentiment:s,ts:Date.now()}}catch(n){return console.error("[PolymarketMCP] Failed to get market context:",n),{market:e,timeToResolution:0,ts:Date.now(),error:n.message}}}async getBatchContext(e,n,r,i,s=20){const o=[];try{for(const c of e){const h=(await os.getActiveMarkets(c,Math.ceil(s/e.length))).filter(m=>m.liquidity>=i.minLiquidity&&m.volume24h>=i.minVolume24h&&m.active&&!m.resolved);for(const m of h){const g=await this.getMarketContext(m);o.push(g)}}const a=n.reduce((c,u)=>c+u.currentValue,0),l=n.reduce((c,u)=>c+u.unrealizedPnl,0);return{markets:o.slice(0,s),portfolio:{balance:r,positions:n,totalExposure:a,unrealizedPnl:l},settings:i,ts:Date.now()}}catch(a){return console.error("[PolymarketMCP] Failed to get batch context:",a),{markets:[],portfolio:{balance:r,positions:n,totalExposure:0,unrealizedPnl:0},settings:i,ts:Date.now()}}}calculatePositionsPnL(e){const n=e.reduce((a,l)=>a+l.costBasis,0),r=e.reduce((a,l)=>a+l.currentValue,0),i=r-n,s=n>0?i/n*100:0,o=e.map(a=>({marketId:a.marketId,question:a.question,outcome:a.outcome,pnl:a.unrealizedPnl,pnlPercent:a.unrealizedPnlPercent}));return{totalCostBasis:n,totalValue:r,totalPnl:i,totalPnlPercent:s,byMarket:o}}buildAnalysisPrompt(e,n,r){const{markets:i,portfolio:s,settings:o}=e,a=i.map(u=>{const h=u.market;return`- "${h.question}" [${h.category}]
  ID: ${h.id} | TokenYES: ${h.tokenIdYes} | TokenNO: ${h.tokenIdNo}
  YES: ${(h.priceYes*100).toFixed(1)}% | Volume24h: $${h.volume24h.toLocaleString()} | Liquidity: $${h.liquidity.toLocaleString()}
  Days to Resolution: ${u.timeToResolution} | Sentiment: ${u.sentiment||"neutral"}`}).join(`
`),l=s.positions.length>0?s.positions.map(u=>`- "${u.question.slice(0,50)}..." ${u.outcome}: ${u.shares.toFixed(2)} shares @ ${(u.avgPrice*100).toFixed(1)}% (PnL: $${u.unrealizedPnl.toFixed(2)})`).join(`
`):"No open positions";return`
POLYMARKET DEALER ANALYSIS
${r?`
=== RECENT ACTIVITY CONTEXT ===
${r}
`:""}
=== STRATEGY ===
${n}

=== PORTFOLIO STATUS ===
Balance: $${s.balance.toFixed(2)} USDC
Total Exposure: $${s.totalExposure.toFixed(2)}
Unrealized PnL: $${s.unrealizedPnl.toFixed(2)}
Open Positions: ${s.positions.length} / ${o.maxOpenPositions}

=== CURRENT POSITIONS ===
${l}

=== AVAILABLE MARKETS (${i.length}) ===
${a}

=== CONSTRAINTS ===
- Max Position Size: $${o.maxPositionSizeUSDC}
- Max Open Positions: ${o.maxOpenPositions}
- Min Market Liquidity: $${o.minLiquidity.toLocaleString()}
- Allowed Categories: ${o.allowedCategories.join(", ")}

=== INSTRUCTIONS ===
Analyze each market and provide trading decisions.
For each decision include:
1. Action: BUY_YES, BUY_NO, SELL_YES, SELL_NO, or HOLD
2. Market ID (use the ID provided)
3. Token ID (use TokenYES for BUY_YES/SELL_YES, TokenNO for BUY_NO/SELL_NO)
4. Confidence (0-100)
5. Reasoning
6. Suggested size in USDC (if applicable)
7. Suggested limit price (if applicable)

Respond in JSON format:
{
  "decisions": [
    {
      "action": "BUY_YES",
      "marketId": "...",
      "question": "...",
      "tokenId": "...",
      "confidence": 75,
      "reason": "...",
      "suggestedSize": 25,
      "suggestedPrice": 0.45
    }
  ],
  "marketOverview": "Brief overall market assessment",
  "riskAssessment": "Brief risk commentary",
  "cycleSummary": "Brief 1-2 sentence summary of this analysis for context in next cycle. Include key observations and actions. Max 300 chars."
}
`}parseAIResponse(e){try{const n=e.match(/\{[\s\S]*\}/);if(!n)return console.error("[PolymarketMCP] No JSON found in AI response"),[];const r=JSON.parse(n[0]);return!r.decisions||!Array.isArray(r.decisions)?[]:r.decisions.map(i=>({action:i.action||"HOLD",marketId:i.marketId||"",question:i.question||"",tokenId:i.tokenId||"",confidence:i.confidence||0,reason:i.reason||"",suggestedSize:i.suggestedSize,suggestedPrice:i.suggestedPrice})).filter(i=>i.action!=="HOLD"&&i.confidence>=60)}catch(n){return console.error("[PolymarketMCP] Failed to parse AI response:",n),[]}}}const X4=new gmt,_ee="polymarket-dealer-cycle",Iee="polymarket-dealer-sync";class ymt{constructor(){this.isLoopRunning=!1,this.executor=null,ut.subscribe(()=>{const e=ut.getSnapshot();e.isOn&&!this.isLoopRunning?this.startLoop():!e.isOn&&this.isLoopRunning&&this.stopLoop()})}startLoop(){if(this.isLoopRunning)return;const e=ut.getSnapshot();if(!e.isOn)return;console.log("[PolymarketDealerService]  Starting main loop with Web Worker timer (background-safe)..."),this.isLoopRunning=!0,F2.start(),ut.addLog("INFO","Polymarket Dealer loop started"),this.runCycle();const n=e.settings.checkIntervalSeconds*1e3;qa.start(_ee,n,()=>this.runCycle()),this.startSyncLoop()}startSyncLoop(){qa.start(Iee,3e4,()=>this.syncPortfolio())}async syncPortfolio(){if(os.getIsInitialized())try{const[e,n]=await Promise.all([os.getBalance(),os.getPositions()]),r=n.reduce((i,s)=>i+s.currentValue,0);ut.updatePortfolioState(n,e,r)}catch(e){console.error("[PolymarketDealerService] Sync error:",e)}}stopLoop(){console.log("[PolymarketDealerService]  Stopping loop..."),qa.stop(_ee),qa.stop(Iee),F2.stop(),this.isLoopRunning=!1,ut.addLog("INFO","Polymarket Dealer loop stopped"),ut.setAnalyzing(!1)}setExecutor(e){this.executor=e}async runCycle(){const e=ut.getSnapshot();if(!e.isOn){this.stopLoop();return}if(!os.getIsInitialized()){ut.addLog("WARNING","Polymarket service not initialized, skipping cycle");return}try{console.log("[PolymarketDealerService] === Starting new cycle ==="),ut.setAnalyzing(!0),ut.setStatusMessage("Starting analysis cycle..."),ut.setCurrentTask("Fetching Markets"),ut.setStatusMessage("Fetching active markets from Polymarket...");const n=e.settings,[r,i]=await Promise.all([os.getBalance(),os.getPositions()]),s=i.reduce((w,k)=>w+k.currentValue,0);ut.updatePortfolioState(i,r,s);const o=i.length<n.maxOpenPositions,a=n.bankrollType==="MANUAL"?Math.min(n.manualBankroll,r):r;a<n.maxPositionSizeUSDC&&ut.addLog("WARNING","Insufficient balance for new positions"),ut.setCurrentTask("Building Context"),ut.setStatusMessage("Building market context for AI analysis...");const l=await X4.getBatchContext(n.allowedCategories.length>0?n.allowedCategories:["politics","crypto","business"],i,a,{maxPositionSizeUSDC:n.maxPositionSizeUSDC,maxOpenPositions:n.maxOpenPositions,minLiquidity:n.minLiquidity,minVolume24h:n.minVolume24h,allowedCategories:n.allowedCategories},20);if(l.markets.length===0){ut.addLog("REASONING","No actionable markets found",{fullReason:`Scanned available markets but none met the filtering criteria.
                    Filters: Min Liquidity: $${n.minLiquidity.toLocaleString()}, Min Volume: $${n.minVolume24h.toLocaleString()}
                    Allowed categories: ${n.allowedCategories.join(", ")}
                    Waiting for better opportunities in the next cycle.`,context:{minLiquidity:n.minLiquidity,minVolume24h:n.minVolume24h,allowedCategories:n.allowedCategories,availableBankroll:a,openPositions:i.length}}),ut.setAnalyzing(!1),ut.setCurrentTask(""),ut.setStatusMessage("Waiting for next cycle...");return}ut.setStatusDetail("Found "+l.markets.length+" markets to analyze"),ut.setCurrentTask("AI Analysis"),ut.setStatusMessage("Consulting AI for trading decisions...");const c=n.promptMode==="preset"?WT[n.selectedPreset]:n.strategyPrompt,u=sd.getContextForAI("polymarket");u&&ut.addLog("INFO",` Cycle Summary: Including ${u.length} char context from previous cycles`);const h=X4.buildAnalysisPrompt(l,c,u),m=await gm.getPolymarketAnalysis(h);if(!m){ut.addLog("ERROR","AI analysis failed - no response"),ut.setAnalyzing(!1);return}const g=X4.parseAIResponse(m);let y="",v;try{const w=m.match(/\{[\s\S]*\}/);if(w){const k=JSON.parse(w[0]);k.marketOverview&&(y=k.marketOverview),k.riskAssessment&&y&&(y+=" | Risk: "+k.riskAssessment),k.cycleSummary&&typeof k.cycleSummary=="string"&&(v=k.cycleSummary.slice(0,350))}}catch{y=m.replace(/\{[\s\S]*\}/,"").trim().slice(0,200)||"Analysis complete"}if(v&&(sd.setSummary("polymarket",v),ut.addLog("INFO",` AI Summary: ${v.slice(0,80)}...`)),ut.addLog("REASONING",y||"AI Analysis Complete",{fullReason:m,context:{marketsAnalyzed:l.markets.length,currentBalance:r,currentExposure:s,openPositions:i.length,maxPositions:n.maxOpenPositions,allowedCategories:n.allowedCategories,intentsFound:g.length}}),ut.setAnalysisNote(y||"Analyzed "+l.markets.length+" markets"),g.length===0)ut.addLog("REASONING","No trades recommended - HOLD strategy",{fullReason:"After analyzing the available markets, no opportunities met the confidence threshold or risk parameters. Current market conditions suggest holding existing positions.",context:{marketsAnalyzed:l.markets.length,currentBalance:r,recommendation:"HOLD"}}),ut.setCurrentSignal("NEUTRAL"),ut.setStatusDetail("No trades recommended - holding");else{const w=g.filter(R=>R.action.startsWith("BUY")).length,k=g.filter(R=>R.action.startsWith("SELL")).length,N=w>k?"BULLISH":k>w?"BEARISH":"NEUTRAL";ut.addLog("SIGNAL",`${g.length} trading signals - ${N}`,{fullReason:`AI identified ${g.length} trading opportunities across the analyzed markets.
                    ${w} BUY signals and ${k} SELL signals indicate a ${N} overall stance.`,context:{totalIntents:g.length,buySignals:w,sellSignals:k,sentiment:N,intents:g.map(R=>{var D;return{market:R.question.slice(0,60),action:R.action,confidence:R.confidence,reason:(D=R.reason)==null?void 0:D.slice(0,100)}})}}),ut.setCurrentSignal(N),ut.setStatusDetail(`${w} buy signals, ${k} sell signals`)}if(g.length>0&&o&&this.executor){ut.setCurrentTask("Executing Trades"),ut.setStatusMessage("Executing trading decisions...");for(const w of g){if(w.confidence<60){ut.addLog("INFO","Skipping low-confidence intent: "+w.question.slice(0,50));continue}if(i.length>=n.maxOpenPositions){ut.addLog("WARNING","Max positions reached, skipping remaining intents");break}try{await this.executor(w),ut.addLog("TRADE",`${w.action} on "${w.question.slice(0,40)}..."`,{fullReason:w.reason||"Trade executed based on AI analysis",context:{action:w.action,confidence:w.confidence,marketId:w.marketId,question:w.question,suggestedPrice:w.suggestedPrice,suggestedSize:w.suggestedSize}})}catch(k){ut.addLog("ERROR","Failed to execute: "+k.message)}}}ut.setAnalyzing(!1),ut.setCurrentTask(""),ut.setStatusMessage("Cycle complete. Waiting "+n.checkIntervalSeconds+"s..."),ut.setStatusDetail(""),console.log("[PolymarketDealerService] === Cycle complete ===");const b=l.markets.map(w=>w.market.question.slice(0,30));sd.recordCycle("polymarket",{timestamp:Date.now(),decisions:g.map(w=>({asset:w.question.slice(0,40),action:w.action,confidence:w.confidence/100})),assetsAnalyzed:b})}catch(n){console.error("[PolymarketDealerService] Cycle error:",n),ut.addLog("ERROR","Cycle error: "+n.message),ut.setAnalyzing(!1),ut.setCurrentTask(""),ut.setStatusMessage("Error occurred. Retrying next cycle...")}}}const xmt=new ymt;function k0e(t,e){const n=A.useSyncExternalStore(ut.subscribe.bind(ut),ut.getSnapshot.bind(ut)),r=A.useRef(!1);A.useEffect(()=>{if(!t.isUnlocked||!t.pmEncryptedPrivateKey||!e||e.trim()==="")return;(async()=>{try{const g=await or.decrypt(t.pmEncryptedPrivateKey,e);await os.initialize(g)?ut.addLog("INFO","Polymarket service initialized"):ut.addLog("ERROR","Failed to initialize Polymarket service")}catch(g){console.error("[usePolymarket] Init error:",g),ut.addLog("ERROR","Initialization error: "+g.message)}})()},[t.isUnlocked,t.pmEncryptedPrivateKey,e]),A.useEffect(()=>{r.current||(xmt.setExecutor(async m=>{await i(m)}),r.current=!0)},[]);const i=async m=>{var k,N;if(!os.getIsInitialized()){ut.addLog("ERROR","Service not initialized");return}const g=m.suggestedPrice||.5,y=m.suggestedSize||n.settings.maxPositionSizeUSDC;let v=m.tokenId;if(!v){ut.addLog("WARNING",`Skipping "${(k=m.question)==null?void 0:k.slice(0,40)}..." - tokenId not available`);return}const b=(g*100).toFixed(1);ut.addLog("TRADE",`Executing ${m.action} on "${(N=m.question)==null?void 0:N.slice(0,40)}..." @ ${b}`);const w=await os.createOrder({tokenId:v,side:m.action==="BUY_YES"||m.action==="BUY_NO"?"BUY":"SELL",price:g,size:Math.floor(y/g)});w.success?(ut.addLog("TRADE",`Order placed: ${w.orderId}`),ut.addOperationRecord({marketId:m.marketId,question:m.question,outcome:m.action.includes("YES")?"YES":"NO",action:m.action.startsWith("BUY")?"BUY":"SELL",timestamp:Date.now(),price:g,shares:y/g,sizeUSDC:y,reasoning:m.reason||m.reasoning||"",confidence:m.confidence,status:"OPEN"})):ut.addLog("ERROR",`Order failed: ${w.error}`)};A.useEffect(()=>{if(!n.isOn||!os.getIsInitialized())return;const m=async()=>{try{const[y,v]=await Promise.all([os.getBalance(),os.getPositions()]),b=v.reduce((w,k)=>w+k.currentValue,0);ut.updatePortfolioState(v,y,b)}catch(y){console.error("[usePolymarket] Sync error:",y)}};m();const g=setInterval(m,3e4);return()=>clearInterval(g)},[n.isOn]);const s=m=>{ut.toggleDealer(m),m?ut.addLog("INFO","Polymarket Dealer activated"):ut.addLog("INFO","Polymarket Dealer deactivated")},o=m=>{ut.updateSettings(m)},a=()=>{ut.reload(),ut.addLog("INFO","Settings applied")},l=m=>{ut.setStrategyPrompt(m),ut.addLog("INFO","Strategy prompt updated")},c=()=>{ut.clearLogs()},u=async m=>{if(!os.getIsInitialized())return ut.addLog("ERROR","Service not initialized"),{success:!1,error:"Service not initialized"};const g=(m.price*100).toFixed(1);ut.addLog("TRADE","Executing "+m.side+" "+m.outcome+" @ "+g+"c");const y=await os.createOrder({tokenId:m.tokenId,side:m.side,price:m.price,size:m.size});return y.success?(ut.addLog("TRADE","Order placed: "+y.orderId),ut.addOperationRecord({marketId:m.marketId,question:m.question,outcome:m.outcome,action:m.side,timestamp:Date.now(),price:m.price,shares:m.size,sizeUSDC:m.size*m.price,reasoning:m.reason,confidence:m.confidence,status:"OPEN"})):ut.addLog("ERROR","Order failed: "+y.error),y},h=async m=>{const g=await os.cancelOrder(m);return g?ut.addLog("INFO","Order "+m+" canceled"):ut.addLog("ERROR","Failed to cancel order "+m),g};return{state:n,isOn:n.isOn,isAnalyzing:n.isAnalyzing,settings:n.settings,logs:n.logs,positions:n.activePositions,operationHistory:n.operationHistory,toggleDealer:s,updateSettings:o,applyChanges:a,saveStrategy:l,clearLogs:c,executeOrder:u,cancelOrder:h}}const vmt=({onSelectConversation:t})=>{const[e,n]=A.useState([]),[r,i]=A.useState(""),{user:s}=B1();A.useEffect(()=>{s!=null&&s.uid&&o()},[s==null?void 0:s.uid]);const o=async()=>{const h=await Jo.getHistory();n(Array.isArray(h)?h:[])},a=async(h,m)=>{h.stopPropagation(),window.confirm("Delete this conversation?")&&(await Jo.deleteConversation(m),o())},l=e.filter(h=>h.title.toLowerCase().includes(r.toLowerCase())),c=l.reduce((h,m)=>{const g=new Date(m.timestamp),v=Math.floor((new Date().getTime()-g.getTime())/(1e3*60*60*24));let b="Older";return v===0?b="Today":v===1?b="Yesterday":v<7?b="Previous 7 Days":v<30&&(b="Previous 30 Days"),h[b]||(h[b]=[]),h[b].push(m),h},{}),u=["Today","Yesterday","Previous 7 Days","Previous 30 Days","Older"];return d.jsxs(Mt.div,{className:"h-full flex flex-col p-8 max-w-7xl mx-auto w-full",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[d.jsxs("div",{className:"flex items-center justify-between mb-8",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold text-white tracking-tight mb-2",children:"Conversation History"}),d.jsx("p",{className:"text-slate-400",children:"Manage and revisit your past interactions with the Vault Operator."})]}),d.jsxs("div",{className:"relative",children:[d.jsx(N8,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-500",size:18}),d.jsx(Ox,{type:"text",placeholder:"Search conversations...",value:r,onChange:h=>i(h.target.value),className:"pl-10 w-64 focus-visible:ring-[#E7FE55]/20 focus-visible:border-[#E7FE55]/30"})]})]}),d.jsx("div",{className:"flex-1 overflow-y-auto pr-2 custom-scrollbar",children:l.length===0?d.jsxs(Mt.div,{className:"flex flex-col items-center justify-center h-64 text-slate-500",initial:{opacity:0},animate:{opacity:1},children:[d.jsx(Ow,{size:48,className:"mb-4 opacity-20"}),d.jsx("p",{children:"No conversations found."})]}):d.jsx("div",{className:"space-y-8",children:u.map(h=>{const m=c[h];return!m||m.length===0?null:d.jsxs(Mt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[d.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[d.jsx("div",{className:"h-px bg-slate-800 flex-1"}),d.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:h}),d.jsx("div",{className:"h-px bg-slate-800 flex-1"})]}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.jsx(js,{children:m.map((g,y)=>d.jsx(Mt.div,{onClick:()=>t(g.id),className:"group",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:y*.05},whileHover:{scale:1.02},children:d.jsxs(Ws,{className:"p-4 cursor-pointer hover:border-[#E7FE55]/30 hover:shadow-xl hover:shadow-[#E7FE55]/5 relative overflow-hidden h-full",children:[d.jsx("div",{className:"absolute top-0 right-0 p-3 opacity-0 group-hover:opacity-100 transition-opacity z-10",children:d.jsx(Vi,{variant:"ghost",size:"icon",onClick:v=>a(v,g.id),className:"h-7 w-7 text-slate-400 hover:text-red-400 hover:bg-red-500/20",children:d.jsx(xm,{size:14})})}),d.jsxs("div",{className:"flex flex-col h-full justify-between",children:[d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-2 mb-3 text-[#E7FE55]",children:[d.jsx(Ow,{size:16}),d.jsxs("span",{className:"text-xs font-mono opacity-70",children:["ID: ",g.id.slice(0,8),"..."]})]}),d.jsx("h3",{className:"text-base font-semibold text-slate-200 group-hover:text-white line-clamp-2 mb-2 transition-colors",children:g.title})]}),d.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500 mt-4 pt-4 border-t border-slate-700/30",children:[d.jsxs("div",{className:"flex items-center gap-1.5",children:[d.jsx(v8,{size:12}),d.jsx("span",{children:new Date(g.timestamp).toLocaleDateString(void 0,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),d.jsx("div",{className:"group-hover:translate-x-1 transition-transform text-[#E7FE55]/50 group-hover:text-[#E7FE55]",children:d.jsx(Xa,{size:14})})]})]})]})},g.id))})})]},h)})})})]})};function Ree(t,[e,n]){return Math.min(n,Math.max(e,t))}function bmt(t){const e=wmt(t),n=A.forwardRef((r,i)=>{const{children:s,...o}=r,a=A.Children.toArray(s),l=a.find(Smt);if(l){const c=l.props.children,u=a.map(h=>h===l?A.Children.count(c)>1?A.Children.only(null):A.isValidElement(c)?c.props.children:null:h);return d.jsx(e,{...o,ref:i,children:A.isValidElement(c)?A.cloneElement(c,void 0,u):null})}return d.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}function wmt(t){const e=A.forwardRef((n,r)=>{const{children:i,...s}=n;if(A.isValidElement(i)){const o=Tmt(i),a=Amt(s,i.props);return i.type!==A.Fragment&&(a.ref=r?Qx(r,o):o),A.cloneElement(i,a)}return A.Children.count(i)>1?A.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var Emt=Symbol("radix.slottable");function Smt(t){return A.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Emt}function Amt(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const l=s(...a);return i(...a),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function Tmt(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function kmt(t){const e=A.useRef({value:t,previous:t});return A.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var Nmt=[" ","Enter","ArrowUp","ArrowDown"],Cmt=[" ","Enter"],Bm="Select",[pP,mP,Pmt]=upe(Bm),[Tv]=Hm(Bm,[Pmt,zN]),gP=zN(),[_mt,Ih]=Tv(Bm),[Imt,Rmt]=Tv(Bm),N0e=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:i,onOpenChange:s,value:o,defaultValue:a,onValueChange:l,dir:c,name:u,autoComplete:h,disabled:m,required:g,form:y}=t,v=gP(e),[b,w]=A.useState(null),[k,N]=A.useState(null),[R,D]=A.useState(!1),O=e7(c),[B,z]=Ww({prop:r,defaultProp:i??!1,onChange:s,caller:Bm}),[U,$]=Ww({prop:o,defaultProp:a,onChange:l,caller:Bm}),W=A.useRef(null),H=b?y||!!b.closest("form"):!0,[F,T]=A.useState(new Set),_=Array.from(F).map(L=>L.props.value).join(";");return d.jsx(M5e,{...v,children:d.jsxs(_mt,{required:g,scope:e,trigger:b,onTriggerChange:w,valueNode:k,onValueNodeChange:N,valueNodeHasChildren:R,onValueNodeHasChildrenChange:D,contentId:rh(),value:U,onValueChange:$,open:B,onOpenChange:z,dir:O,triggerPointerDownPosRef:W,disabled:m,children:[d.jsx(pP.Provider,{scope:e,children:d.jsx(Imt,{scope:t.__scopeSelect,onNativeOptionAdd:A.useCallback(L=>{T(V=>new Set(V).add(L))},[]),onNativeOptionRemove:A.useCallback(L=>{T(V=>{const K=new Set(V);return K.delete(L),K})},[]),children:n})}),H?d.jsxs(X0e,{"aria-hidden":!0,required:g,tabIndex:-1,name:u,autoComplete:h,value:U,onChange:L=>$(L.target.value),disabled:m,form:y,children:[U===void 0?d.jsx("option",{value:""}):null,Array.from(F)]},_):null]})})};N0e.displayName=Bm;var C0e="SelectTrigger",P0e=A.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...i}=t,s=gP(n),o=Ih(C0e,n),a=o.disabled||r,l=Pr(e,o.onTriggerChange),c=mP(n),u=A.useRef("touch"),[h,m,g]=Z0e(v=>{const b=c().filter(N=>!N.disabled),w=b.find(N=>N.value===o.value),k=ege(b,v,w);k!==void 0&&o.onValueChange(k.value)}),y=v=>{a||(o.onOpenChange(!0),g()),v&&(o.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return d.jsx(voe,{asChild:!0,...s,children:d.jsx(Mn.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":Q0e(o.value)?"":void 0,...i,ref:l,onClick:pn(i.onClick,v=>{v.currentTarget.focus(),u.current!=="mouse"&&y(v)}),onPointerDown:pn(i.onPointerDown,v=>{u.current=v.pointerType;const b=v.target;b.hasPointerCapture(v.pointerId)&&b.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(y(v),v.preventDefault())}),onKeyDown:pn(i.onKeyDown,v=>{const b=h.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&m(v.key),!(b&&v.key===" ")&&Nmt.includes(v.key)&&(y(),v.preventDefault())})})})});P0e.displayName=C0e;var _0e="SelectValue",I0e=A.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,children:s,placeholder:o="",...a}=t,l=Ih(_0e,n),{onValueNodeHasChildrenChange:c}=l,u=s!==void 0,h=Pr(e,l.onValueNodeChange);return Fs(()=>{c(u)},[c,u]),d.jsx(Mn.span,{...a,ref:h,style:{pointerEvents:"none"},children:Q0e(l.value)?d.jsx(d.Fragment,{children:o}):s})});I0e.displayName=_0e;var Omt="SelectIcon",R0e=A.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...i}=t;return d.jsx(Mn.span,{"aria-hidden":!0,...i,ref:e,children:r||""})});R0e.displayName=Omt;var Mmt="SelectPortal",O0e=t=>d.jsx(VN,{asChild:!0,...t});O0e.displayName=Mmt;var Um="SelectContent",M0e=A.forwardRef((t,e)=>{const n=Ih(Um,t.__scopeSelect),[r,i]=A.useState();if(Fs(()=>{i(new DocumentFragment)},[]),!n.open){const s=r;return s?qm.createPortal(d.jsx(L0e,{scope:t.__scopeSelect,children:d.jsx(pP.Slot,{scope:t.__scopeSelect,children:d.jsx("div",{children:t.children})})}),s):null}return d.jsx(D0e,{...t,ref:e})});M0e.displayName=Um;var gl=10,[L0e,Rh]=Tv(Um),Lmt="SelectContentImpl",Dmt=bmt("SelectContent.RemoveScroll"),D0e=A.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:o,side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:h,collisionBoundary:m,collisionPadding:g,sticky:y,hideWhenDetached:v,avoidCollisions:b,...w}=t,k=Ih(Um,n),[N,R]=A.useState(null),[D,O]=A.useState(null),B=Pr(e,oe=>R(oe)),[z,U]=A.useState(null),[$,W]=A.useState(null),H=mP(n),[F,T]=A.useState(!1),_=A.useRef(!1);A.useEffect(()=>{if(N)return Fpe(N)},[N]),Rpe();const L=A.useCallback(oe=>{const[me,...ce]=H().map(pe=>pe.ref.current),[ve]=ce.slice(-1),Ne=document.activeElement;for(const pe of oe)if(pe===Ne||(pe==null||pe.scrollIntoView({block:"nearest"}),pe===me&&D&&(D.scrollTop=0),pe===ve&&D&&(D.scrollTop=D.scrollHeight),pe==null||pe.focus(),document.activeElement!==Ne))return},[H,D]),V=A.useCallback(()=>L([z,N]),[L,z,N]);A.useEffect(()=>{F&&V()},[F,V]);const{onOpenChange:K,triggerPointerDownPosRef:te}=k;A.useEffect(()=>{if(N){let oe={x:0,y:0};const me=ve=>{var Ne,pe;oe={x:Math.abs(Math.round(ve.pageX)-(((Ne=te.current)==null?void 0:Ne.x)??0)),y:Math.abs(Math.round(ve.pageY)-(((pe=te.current)==null?void 0:pe.y)??0))}},ce=ve=>{oe.x<=10&&oe.y<=10?ve.preventDefault():N.contains(ve.target)||K(!1),document.removeEventListener("pointermove",me),te.current=null};return te.current!==null&&(document.addEventListener("pointermove",me),document.addEventListener("pointerup",ce,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",me),document.removeEventListener("pointerup",ce,{capture:!0})}}},[N,K,te]),A.useEffect(()=>{const oe=()=>K(!1);return window.addEventListener("blur",oe),window.addEventListener("resize",oe),()=>{window.removeEventListener("blur",oe),window.removeEventListener("resize",oe)}},[K]);const[G,q]=Z0e(oe=>{const me=H().filter(Ne=>!Ne.disabled),ce=me.find(Ne=>Ne.ref.current===document.activeElement),ve=ege(me,oe,ce);ve&&setTimeout(()=>ve.ref.current.focus())}),M=A.useCallback((oe,me,ce)=>{const ve=!_.current&&!ce;(k.value!==void 0&&k.value===me||ve)&&(U(oe),ve&&(_.current=!0))},[k.value]),P=A.useCallback(()=>N==null?void 0:N.focus(),[N]),Y=A.useCallback((oe,me,ce)=>{const ve=!_.current&&!ce;(k.value!==void 0&&k.value===me||ve)&&W(oe)},[k.value]),X=r==="popper"?AD:j0e,se=X===AD?{side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:h,collisionBoundary:m,collisionPadding:g,sticky:y,hideWhenDetached:v,avoidCollisions:b}:{};return d.jsx(L0e,{scope:n,content:N,viewport:D,onViewportChange:O,itemRefCallback:M,selectedItem:z,onItemLeave:P,itemTextRefCallback:Y,focusSelectedItem:V,selectedItemText:$,position:r,isPositioned:F,searchRef:G,children:d.jsx(r7,{as:Dmt,allowPinchZoom:!0,children:d.jsx(n7,{asChild:!0,trapped:k.open,onMountAutoFocus:oe=>{oe.preventDefault()},onUnmountAutoFocus:pn(i,oe=>{var me;(me=k.trigger)==null||me.focus({preventScroll:!0}),oe.preventDefault()}),children:d.jsx(jN,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:oe=>oe.preventDefault(),onDismiss:()=>k.onOpenChange(!1),children:d.jsx(X,{role:"listbox",id:k.contentId,"data-state":k.open?"open":"closed",dir:k.dir,onContextMenu:oe=>oe.preventDefault(),...w,...se,onPlaced:()=>T(!0),ref:B,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:pn(w.onKeyDown,oe=>{const me=oe.ctrlKey||oe.altKey||oe.metaKey;if(oe.key==="Tab"&&oe.preventDefault(),!me&&oe.key.length===1&&q(oe.key),["ArrowUp","ArrowDown","Home","End"].includes(oe.key)){let ve=H().filter(Ne=>!Ne.disabled).map(Ne=>Ne.ref.current);if(["ArrowUp","End"].includes(oe.key)&&(ve=ve.slice().reverse()),["ArrowUp","ArrowDown"].includes(oe.key)){const Ne=oe.target,pe=ve.indexOf(Ne);ve=ve.slice(pe+1)}setTimeout(()=>L(ve)),oe.preventDefault()}})})})})})})});D0e.displayName=Lmt;var jmt="SelectItemAlignedPosition",j0e=A.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...i}=t,s=Ih(Um,n),o=Rh(Um,n),[a,l]=A.useState(null),[c,u]=A.useState(null),h=Pr(e,B=>u(B)),m=mP(n),g=A.useRef(!1),y=A.useRef(!0),{viewport:v,selectedItem:b,selectedItemText:w,focusSelectedItem:k}=o,N=A.useCallback(()=>{if(s.trigger&&s.valueNode&&a&&c&&v&&b&&w){const B=s.trigger.getBoundingClientRect(),z=c.getBoundingClientRect(),U=s.valueNode.getBoundingClientRect(),$=w.getBoundingClientRect();if(s.dir!=="rtl"){const Ne=$.left-z.left,pe=U.left-Ne,Le=B.left-pe,he=B.width+Le,Te=Math.max(he,z.width),Ge=window.innerWidth-gl,We=Ree(pe,[gl,Math.max(gl,Ge-Te)]);a.style.minWidth=he+"px",a.style.left=We+"px"}else{const Ne=z.right-$.right,pe=window.innerWidth-U.right-Ne,Le=window.innerWidth-B.right-pe,he=B.width+Le,Te=Math.max(he,z.width),Ge=window.innerWidth-gl,We=Ree(pe,[gl,Math.max(gl,Ge-Te)]);a.style.minWidth=he+"px",a.style.right=We+"px"}const W=m(),H=window.innerHeight-gl*2,F=v.scrollHeight,T=window.getComputedStyle(c),_=parseInt(T.borderTopWidth,10),L=parseInt(T.paddingTop,10),V=parseInt(T.borderBottomWidth,10),K=parseInt(T.paddingBottom,10),te=_+L+F+K+V,G=Math.min(b.offsetHeight*5,te),q=window.getComputedStyle(v),M=parseInt(q.paddingTop,10),P=parseInt(q.paddingBottom,10),Y=B.top+B.height/2-gl,X=H-Y,se=b.offsetHeight/2,oe=b.offsetTop+se,me=_+L+oe,ce=te-me;if(me<=Y){const Ne=W.length>0&&b===W[W.length-1].ref.current;a.style.bottom="0px";const pe=c.clientHeight-v.offsetTop-v.offsetHeight,Le=Math.max(X,se+(Ne?P:0)+pe+V),he=me+Le;a.style.height=he+"px"}else{const Ne=W.length>0&&b===W[0].ref.current;a.style.top="0px";const Le=Math.max(Y,_+v.offsetTop+(Ne?M:0)+se)+ce;a.style.height=Le+"px",v.scrollTop=me-Y+v.offsetTop}a.style.margin=`${gl}px 0`,a.style.minHeight=G+"px",a.style.maxHeight=H+"px",r==null||r(),requestAnimationFrame(()=>g.current=!0)}},[m,s.trigger,s.valueNode,a,c,v,b,w,s.dir,r]);Fs(()=>N(),[N]);const[R,D]=A.useState();Fs(()=>{c&&D(window.getComputedStyle(c).zIndex)},[c]);const O=A.useCallback(B=>{B&&y.current===!0&&(N(),k==null||k(),y.current=!1)},[N,k]);return d.jsx(Umt,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:g,onScrollButtonChange:O,children:d.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:R},children:d.jsx(Mn.div,{...i,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});j0e.displayName=jmt;var Bmt="SelectPopperPosition",AD=A.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=gl,...s}=t,o=gP(n);return d.jsx(boe,{...o,...s,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});AD.displayName=Bmt;var[Umt,k7]=Tv(Um,{}),TD="SelectViewport",B0e=A.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...i}=t,s=Rh(TD,n),o=k7(TD,n),a=Pr(e,s.onViewportChange),l=A.useRef(0);return d.jsxs(d.Fragment,{children:[d.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),d.jsx(pP.Slot,{scope:n,children:d.jsx(Mn.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:pn(i.onScroll,c=>{const u=c.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:m}=o;if(m!=null&&m.current&&h){const g=Math.abs(l.current-u.scrollTop);if(g>0){const y=window.innerHeight-gl*2,v=parseFloat(h.style.minHeight),b=parseFloat(h.style.height),w=Math.max(v,b);if(w<y){const k=w+g,N=Math.min(y,k),R=k-N;h.style.height=N+"px",h.style.bottom==="0px"&&(u.scrollTop=R>0?R:0,h.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});B0e.displayName=TD;var U0e="SelectGroup",[Fmt,$mt]=Tv(U0e),zmt=A.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=rh();return d.jsx(Fmt,{scope:n,id:i,children:d.jsx(Mn.div,{role:"group","aria-labelledby":i,...r,ref:e})})});zmt.displayName=U0e;var F0e="SelectLabel",$0e=A.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=$mt(F0e,n);return d.jsx(Mn.div,{id:i.id,...r,ref:e})});$0e.displayName=F0e;var eN="SelectItem",[Vmt,z0e]=Tv(eN),V0e=A.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:s,...o}=t,a=Ih(eN,n),l=Rh(eN,n),c=a.value===r,[u,h]=A.useState(s??""),[m,g]=A.useState(!1),y=Pr(e,k=>{var N;return(N=l.itemRefCallback)==null?void 0:N.call(l,k,r,i)}),v=rh(),b=A.useRef("touch"),w=()=>{i||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return d.jsx(Vmt,{scope:n,value:r,disabled:i,textId:v,isSelected:c,onItemTextChange:A.useCallback(k=>{h(N=>N||((k==null?void 0:k.textContent)??"").trim())},[]),children:d.jsx(pP.ItemSlot,{scope:n,value:r,disabled:i,textValue:u,children:d.jsx(Mn.div,{role:"option","aria-labelledby":v,"data-highlighted":m?"":void 0,"aria-selected":c&&m,"data-state":c?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:y,onFocus:pn(o.onFocus,()=>g(!0)),onBlur:pn(o.onBlur,()=>g(!1)),onClick:pn(o.onClick,()=>{b.current!=="mouse"&&w()}),onPointerUp:pn(o.onPointerUp,()=>{b.current==="mouse"&&w()}),onPointerDown:pn(o.onPointerDown,k=>{b.current=k.pointerType}),onPointerMove:pn(o.onPointerMove,k=>{var N;b.current=k.pointerType,i?(N=l.onItemLeave)==null||N.call(l):b.current==="mouse"&&k.currentTarget.focus({preventScroll:!0})}),onPointerLeave:pn(o.onPointerLeave,k=>{var N;k.currentTarget===document.activeElement&&((N=l.onItemLeave)==null||N.call(l))}),onKeyDown:pn(o.onKeyDown,k=>{var R;((R=l.searchRef)==null?void 0:R.current)!==""&&k.key===" "||(Cmt.includes(k.key)&&w(),k.key===" "&&k.preventDefault())})})})})});V0e.displayName=eN;var rw="SelectItemText",H0e=A.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,...s}=t,o=Ih(rw,n),a=Rh(rw,n),l=z0e(rw,n),c=Rmt(rw,n),[u,h]=A.useState(null),m=Pr(e,w=>h(w),l.onItemTextChange,w=>{var k;return(k=a.itemTextRefCallback)==null?void 0:k.call(a,w,l.value,l.disabled)}),g=u==null?void 0:u.textContent,y=A.useMemo(()=>d.jsx("option",{value:l.value,disabled:l.disabled,children:g},l.value),[l.disabled,l.value,g]),{onNativeOptionAdd:v,onNativeOptionRemove:b}=c;return Fs(()=>(v(y),()=>b(y)),[v,b,y]),d.jsxs(d.Fragment,{children:[d.jsx(Mn.span,{id:l.textId,...s,ref:m}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?qm.createPortal(s.children,o.valueNode):null]})});H0e.displayName=rw;var q0e="SelectItemIndicator",G0e=A.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return z0e(q0e,n).isSelected?d.jsx(Mn.span,{"aria-hidden":!0,...r,ref:e}):null});G0e.displayName=q0e;var kD="SelectScrollUpButton",K0e=A.forwardRef((t,e)=>{const n=Rh(kD,t.__scopeSelect),r=k7(kD,t.__scopeSelect),[i,s]=A.useState(!1),o=Pr(e,r.onScrollButtonChange);return Fs(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollTop>0;s(c)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),i?d.jsx(Y0e,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});K0e.displayName=kD;var ND="SelectScrollDownButton",W0e=A.forwardRef((t,e)=>{const n=Rh(ND,t.__scopeSelect),r=k7(ND,t.__scopeSelect),[i,s]=A.useState(!1),o=Pr(e,r.onScrollButtonChange);return Fs(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;s(u)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),i?d.jsx(Y0e,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});W0e.displayName=ND;var Y0e=A.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=t,s=Rh("SelectScrollButton",n),o=A.useRef(null),a=mP(n),l=A.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return A.useEffect(()=>()=>l(),[l]),Fs(()=>{var u;const c=a().find(h=>h.ref.current===document.activeElement);(u=c==null?void 0:c.ref.current)==null||u.scrollIntoView({block:"nearest"})},[a]),d.jsx(Mn.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:pn(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:pn(i.onPointerMove,()=>{var c;(c=s.onItemLeave)==null||c.call(s),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:pn(i.onPointerLeave,()=>{l()})})}),Hmt="SelectSeparator",J0e=A.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return d.jsx(Mn.div,{"aria-hidden":!0,...r,ref:e})});J0e.displayName=Hmt;var CD="SelectArrow",qmt=A.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=gP(n),s=Ih(CD,n),o=Rh(CD,n);return s.open&&o.position==="popper"?d.jsx(woe,{...i,...r,ref:e}):null});qmt.displayName=CD;var Gmt="SelectBubbleInput",X0e=A.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const i=A.useRef(null),s=Pr(r,i),o=kmt(e);return A.useEffect(()=>{const a=i.current;if(!a)return;const l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&u){const h=new Event("change",{bubbles:!0});u.call(a,e),a.dispatchEvent(h)}},[o,e]),d.jsx(Mn.select,{...n,style:{...Eoe,...n.style},ref:s,defaultValue:e})});X0e.displayName=Gmt;function Q0e(t){return t===""||t===void 0}function Z0e(t){const e=hh(t),n=A.useRef(""),r=A.useRef(0),i=A.useCallback(o=>{const a=n.current+o;e(a),(function l(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))})(a)},[e]),s=A.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return A.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,s]}function ege(t,e,n){const i=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=Kmt(t,Math.max(s,0));i.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.textValue.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function Kmt(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var Wmt=N0e,tge=P0e,Ymt=I0e,Jmt=R0e,Xmt=O0e,nge=M0e,Qmt=B0e,rge=$0e,ige=V0e,Zmt=H0e,e0t=G0e,sge=K0e,oge=W0e,age=J0e;const Oee=Wmt,Mee=Ymt,PD=A.forwardRef(({className:t,children:e,...n},r)=>d.jsxs(tge,{ref:r,className:Pt("flex h-10 w-full items-center justify-between whitespace-nowrap rounded-lg border border-slate-700 bg-slate-800/50 px-3 py-2 text-sm text-white ring-offset-background placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,d.jsx(Jmt,{asChild:!0,children:d.jsx(aa,{className:"h-4 w-4 opacity-50"})})]}));PD.displayName=tge.displayName;const lge=A.forwardRef(({className:t,...e},n)=>d.jsx(sge,{ref:n,className:Pt("flex cursor-default items-center justify-center py-1",t),...e,children:d.jsx(ch,{className:"h-4 w-4"})}));lge.displayName=sge.displayName;const cge=A.forwardRef(({className:t,...e},n)=>d.jsx(oge,{ref:n,className:Pt("flex cursor-default items-center justify-center py-1",t),...e,children:d.jsx(aa,{className:"h-4 w-4"})}));cge.displayName=oge.displayName;const _D=A.forwardRef(({className:t,children:e,position:n="popper",...r},i)=>d.jsx(Xmt,{children:d.jsxs(nge,{ref:i,className:Pt("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border border-slate-700 bg-slate-800 text-slate-100 shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[d.jsx(lge,{}),d.jsx(Qmt,{className:Pt("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),d.jsx(cge,{})]})}));_D.displayName=nge.displayName;const t0t=A.forwardRef(({className:t,...e},n)=>d.jsx(rge,{ref:n,className:Pt("px-2 py-1.5 text-sm font-semibold text-slate-400",t),...e}));t0t.displayName=rge.displayName;const ID=A.forwardRef(({className:t,children:e,...n},r)=>d.jsxs(ige,{ref:r,className:Pt("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-slate-700 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[d.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:d.jsx(e0t,{children:d.jsx(lm,{className:"h-4 w-4"})})}),d.jsx(Zmt,{children:e})]}));ID.displayName=ige.displayName;const n0t=A.forwardRef(({className:t,...e},n)=>d.jsx(age,{ref:n,className:Pt("-mx-1 my-1 h-px bg-slate-700",t),...e}));n0t.displayName=age.displayName;const r0t=({onConnect:t,onCancel:e})=>{var W;const[n,r]=A.useState("input"),[i,s]=A.useState(""),[o,a]=A.useState(""),[l,c]=A.useState(!1),[u,h]=A.useState(null),[m,g]=A.useState(null),[y,v]=A.useState(!1),[b,w]=A.useState(null),[k,N]=A.useState(null),R=A.useCallback(()=>{if(!i){w(null);return}const H=as.validateUrl(i);w(H.valid?null:H.error||"Invalid URL")},[i]),D=A.useCallback(()=>{if(!o){N(null);return}const H=as.validateAnonKey(o);N(H.valid?null:H.error||"Invalid key")},[o]),O=A.useCallback(async()=>{const H=as.getSetupSQL();await navigator.clipboard.writeText(H),v(!0),setTimeout(()=>v(!1),2e3)},[]),B=A.useCallback(async()=>{h(null),r("connecting");const H=await as.connect(i.trim(),o.trim());if(!H.success){h(H.error||"Connection failed"),r("error");return}r("validating");const F=await as.validateSchema();if(g(F),!F.valid){r("schema-missing");return}r("success")},[i,o]),z=A.useCallback(async()=>{r("validating");const H=await as.validateSchema();if(g(H),!H.valid){r("schema-missing");return}r("success")},[]),U=A.useCallback(()=>{t()},[t]),$=i.trim()&&o.trim()&&!b&&!k;return d.jsxs(Mt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"p-5 bg-[#0f1015] border border-[#232328] rounded-xl space-y-4",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"p-2 rounded-lg bg-blue-500/10",children:d.jsx(yN,{className:"w-5 h-5 text-blue-400"})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-base font-semibold text-white",children:"Connect Your Supabase"}),d.jsx("p",{className:"text-xs text-[#747580]",children:"Required for 24/7 execution"})]})]}),d.jsxs(js,{mode:"wait",children:[n==="input"&&d.jsxs(Mt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-4",children:[d.jsxs("div",{className:"p-3 bg-blue-500/5 border border-blue-500/20 rounded-lg",children:[d.jsx("p",{className:"text-xs text-blue-200 mb-2 font-medium",children:"Quick Setup:"}),d.jsxs("ol",{className:"text-xs text-blue-200/80 space-y-1 list-decimal list-inside",children:[d.jsxs("li",{children:["Create free account at ",d.jsx("a",{href:"https://supabase.com",target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline",children:"supabase.com"})]}),d.jsx("li",{children:"Create a new project (any name)"}),d.jsxs("li",{children:["Go to ",d.jsx("strong",{children:"Settings  API"})]}),d.jsx("li",{children:"Copy the values below"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-[10px] text-[#747580] uppercase tracking-[0.1em] mb-1.5",children:"Project URL"}),d.jsx("input",{type:"text",value:i,onChange:H=>s(H.target.value),onBlur:R,placeholder:"https://abc123.supabase.co",className:Pt("w-full px-3 py-2 text-xs font-mono bg-[#14151a] border rounded text-white placeholder:text-[#3a3b42] focus:outline-none transition-colors",b?"border-red-500/50 focus:border-red-500":"border-[#232328] focus:border-blue-500/50")}),b&&d.jsx("p",{className:"text-[10px] text-red-400 mt-1",children:b})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-[10px] text-[#747580] uppercase tracking-[0.1em] mb-1.5",children:"Anon Key (public)"}),d.jsxs("div",{className:"relative",children:[d.jsx("input",{type:l?"text":"password",value:o,onChange:H=>a(H.target.value),onBlur:D,placeholder:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",className:Pt("w-full px-3 py-2 pr-9 text-xs font-mono bg-[#14151a] border rounded text-white placeholder:text-[#3a3b42] focus:outline-none transition-colors",k?"border-red-500/50 focus:border-red-500":"border-[#232328] focus:border-blue-500/50")}),d.jsx("button",{type:"button",onClick:()=>c(!l),className:"absolute right-3 top-1/2 -translate-y-1/2 text-[#747580] hover:text-white transition-colors",children:l?d.jsx(xN,{size:14}):d.jsx(S8,{size:14})})]}),k&&d.jsx("p",{className:"text-[10px] text-red-400 mt-1",children:k})]}),d.jsx("div",{className:"flex items-center justify-between",children:d.jsxs("a",{href:"https://supabase.com/dashboard/project/_/settings/api",target:"_blank",rel:"noopener noreferrer",className:"text-[10px] text-blue-400/70 hover:text-blue-400 transition-colors flex items-center gap-1",children:["Open Supabase API Settings ",d.jsx(ld,{size:10})]})}),d.jsxs("div",{className:"flex gap-3 pt-2",children:[d.jsx("button",{onClick:e,className:"flex-1 px-4 py-2 bg-[#232328] hover:bg-[#2a2b30] text-white rounded-lg text-sm font-medium transition-colors",children:"Cancel"}),d.jsxs("button",{onClick:B,disabled:!$,className:Pt("flex-1 px-4 py-2 rounded-lg text-sm font-semibold transition-all flex items-center justify-center gap-2",$?"bg-blue-600 hover:bg-blue-500 text-white":"bg-[#232328] text-[#3a3b42] cursor-not-allowed"),children:["Connect ",d.jsx(Xa,{size:14})]})]})]},"input"),(n==="connecting"||n==="validating")&&d.jsxs(Mt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"py-8 flex flex-col items-center gap-4",children:[d.jsx(A8,{className:"w-8 h-8 text-blue-400 animate-spin"}),d.jsx("p",{className:"text-sm text-[#a0a1a8]",children:n==="connecting"?"Connecting to Supabase...":"Validating schema..."})]},"connecting"),n==="schema-missing"&&m&&d.jsxs(Mt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-4",children:[d.jsx("div",{className:"p-4 bg-amber-500/10 border border-amber-500/30 rounded-lg",children:d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx(hs,{className:"w-5 h-5 text-amber-400 flex-shrink-0 mt-0.5"}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm font-medium text-amber-200",children:"Schema Setup Required"}),d.jsx("p",{className:"text-xs text-amber-200/70 mt-1",children:"Your Supabase project is connected, but missing required tables:"}),d.jsx("ul",{className:"mt-2 space-y-1",children:m.missingTables.map(H=>d.jsxs("li",{className:"text-xs text-amber-300 flex items-center gap-2",children:[d.jsx(fx,{size:12}),d.jsx("code",{className:"bg-amber-500/10 px-1 rounded",children:H})]},H))})]})]})}),d.jsxs("div",{className:"p-4 bg-[#14151a] border border-[#232328] rounded-lg space-y-3",children:[d.jsx("p",{className:"text-xs text-[#a0a1a8]",children:"Copy this SQL and run it in your Supabase SQL Editor:"}),d.jsx("button",{onClick:O,className:"w-full px-4 py-3 bg-[#0f1015] border border-[#232328] rounded-lg hover:border-blue-500/30 transition-all flex items-center justify-center gap-2 text-sm",children:y?d.jsxs(d.Fragment,{children:[d.jsx(lm,{size:16,className:"text-green-400"}),d.jsx("span",{className:"text-green-400",children:"Copied!"})]}):d.jsxs(d.Fragment,{children:[d.jsx(cm,{size:16,className:"text-[#747580]"}),d.jsx("span",{className:"text-white",children:"Copy SQL Schema"})]})}),d.jsxs("a",{href:"https://supabase.com/dashboard/project/_/sql/new",target:"_blank",rel:"noopener noreferrer",className:"w-full px-4 py-2 bg-[#232328] rounded-lg hover:bg-[#2a2b30] transition-all flex items-center justify-center gap-2 text-sm text-white",children:["Open SQL Editor ",d.jsx(ld,{size:14})]})]}),d.jsxs("div",{className:"flex gap-3 pt-2",children:[d.jsx("button",{onClick:e,className:"flex-1 px-4 py-2 bg-[#232328] hover:bg-[#2a2b30] text-white rounded-lg text-sm font-medium transition-colors",children:"Cancel"}),d.jsxs("button",{onClick:z,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg text-sm font-semibold transition-all flex items-center justify-center gap-2",children:["I've Run the SQL ",d.jsx(Xa,{size:14})]})]})]},"schema-missing"),n==="error"&&d.jsxs(Mt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-4",children:[d.jsx("div",{className:"p-4 bg-red-500/10 border border-red-500/30 rounded-lg",children:d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx(fx,{className:"w-5 h-5 text-red-400 flex-shrink-0 mt-0.5"}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm font-medium text-red-200",children:"Connection Failed"}),d.jsx("p",{className:"text-xs text-red-200/70 mt-1",children:u})]})]})}),d.jsxs("div",{className:"flex gap-3 pt-2",children:[d.jsx("button",{onClick:e,className:"flex-1 px-4 py-2 bg-[#232328] hover:bg-[#2a2b30] text-white rounded-lg text-sm font-medium transition-colors",children:"Cancel"}),d.jsx("button",{onClick:()=>r("input"),className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg text-sm font-semibold transition-all",children:"Try Again"})]})]},"error"),n==="success"&&d.jsxs(Mt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0},className:"py-6 flex flex-col items-center gap-4",children:[d.jsx("div",{className:"p-3 rounded-full bg-green-500/10",children:d.jsx(w8,{className:"w-8 h-8 text-green-400"})}),d.jsxs("div",{className:"text-center",children:[d.jsx("p",{className:"text-sm font-medium text-white",children:"Supabase Connected!"}),d.jsxs("p",{className:"text-xs text-[#747580] mt-1",children:["Project: ",(W=as.getConfig())==null?void 0:W.projectId]})]}),d.jsx("button",{onClick:U,className:"px-6 py-2 bg-green-600 hover:bg-green-500 text-white rounded-lg text-sm font-semibold transition-all",children:"Continue"})]},"success")]})]})},i0t=({isOpen:t,onClose:e,onConnect:n})=>d.jsx(bv,{open:t,onOpenChange:r=>!r&&e(),children:d.jsxs(Xm,{className:"max-w-xl bg-[#13141A] border-gray-800 text-white p-0 overflow-hidden",children:[d.jsxs(Qm,{className:"sr-only",children:[d.jsx(Zm,{children:"Connect Supabase"}),d.jsx(e0,{children:"Setup your Supabase connection for advanced features"})]}),d.jsx("div",{className:"p-1",children:d.jsx(r0t,{onConnect:n,onCancel:e})})]})}),s0t=({isOpen:t,onClose:e,onConfirm:n,isLoading:r,error:i})=>{const[s,o]=A.useState(""),[a,l]=A.useState(24),c=async()=>{s&&await n(s,a)};return d.jsx(bv,{open:t,onOpenChange:e,children:d.jsxs(Xm,{className:"max-w-md glass-panel rounded border-[#232328] text-white",children:[d.jsx(Qm,{children:d.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[d.jsx("div",{className:"p-2.5 rounded bg-amber-500/10",children:d.jsx(Hi,{className:"w-5 h-5 text-amber-400"})}),d.jsxs("div",{children:[d.jsx(Zm,{className:"text-base font-bold tracking-wide",children:"Setup Session Keys"}),d.jsx(e0,{className:"text-[11px] text-[#747580] mt-0.5",children:"Configure temporary keys for 24/7 execution"})]})]})}),d.jsxs("div",{className:"space-y-5 py-3",children:[d.jsxs("div",{className:"p-3 bg-amber-500/5 border border-amber-500/20 rounded",children:[d.jsx("h4",{className:"text-[11px] font-bold text-amber-300 mb-2 uppercase tracking-wide",children:"How it works"}),d.jsxs("ul",{className:"text-[10px] text-amber-200/70 space-y-1 list-disc list-inside leading-relaxed",children:[d.jsx("li",{children:"Keys are decrypted and stored in server memory"}),d.jsx("li",{children:"Bot runs 24/7 within the session duration"}),d.jsx("li",{children:"Keys are automatically wiped when session expires"}),d.jsx("li",{children:"More secure than persistent storage"})]})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-[10px] font-bold text-[#a0a1a8] mb-1.5 uppercase tracking-wide",children:"Session Duration (Hours)"}),d.jsxs("div",{className:"relative",children:[d.jsx("input",{type:"number",value:a,onChange:u=>l(Math.max(1,Math.min(72,parseInt(u.target.value)||24))),min:1,max:72,className:"w-full pl-10 pr-3 py-2.5 bg-[#0f1015] border border-[#232328] rounded text-sm font-mono text-white placeholder:text-[#747580] focus:outline-none focus:border-amber-500/50 transition-colors"}),d.jsx(Hi,{className:"w-4 h-4 text-[#747580] absolute left-3 top-1/2 -translate-y-1/2"})]}),d.jsx("p",{className:"text-[9px] text-[#747580] mt-1.5",children:"Maximum 72 hours."})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-[10px] font-bold text-[#a0a1a8] mb-1.5 uppercase tracking-wide",children:"Wallet Password"}),d.jsxs("div",{className:"relative",children:[d.jsx("input",{type:"password",value:s,onChange:u=>o(u.target.value),placeholder:"Enter your wallet password",className:"w-full pl-10 pr-3 py-2.5 bg-[#0f1015] border border-[#232328] rounded text-sm text-white placeholder:text-[#747580] focus:outline-none focus:border-amber-500/50 transition-colors"}),d.jsx(uh,{className:"w-4 h-4 text-[#747580] absolute left-3 top-1/2 -translate-y-1/2"})]}),d.jsx("p",{className:"text-[9px] text-[#747580] mt-1.5",children:"Required to decrypt your private key for this session."})]})]}),i&&d.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/30 rounded text-[10px] text-red-300",children:i})]}),d.jsxs(wv,{className:"gap-2",children:[d.jsx("button",{onClick:e,className:"px-4 py-2 bg-[#1a1b21] hover:bg-[#232328] text-[#a0a1a8] rounded text-[11px] font-semibold uppercase tracking-wide transition-colors",children:"Cancel"}),d.jsx("button",{onClick:c,disabled:!s||r,className:"px-4 py-2 bg-amber-600 hover:bg-amber-500 disabled:bg-[#1a1b21] disabled:text-[#747580] text-white rounded text-[11px] font-semibold uppercase tracking-wide transition-colors flex items-center gap-2",children:r?d.jsxs(d.Fragment,{children:[d.jsx(A8,{className:"w-3.5 h-3.5 animate-spin"}),"Starting..."]}):"Start Session"})]})]})})},o0t=({isOpen:t,onClose:e,onConfirm:n,isLoading:r,error:i})=>{const[s,o]=A.useState(""),[a,l]=A.useState(!1),c=async()=>{!s||!a||await n(s)};return d.jsx(bv,{open:t,onOpenChange:e,children:d.jsxs(Xm,{className:"max-w-md glass-panel rounded border-[#232328] text-white",children:[d.jsx(Qm,{children:d.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[d.jsx("div",{className:"p-2.5 rounded bg-red-500/10",children:d.jsx(ko,{className:"w-5 h-5 text-red-500"})}),d.jsxs("div",{children:[d.jsx(Zm,{className:"text-base font-bold tracking-wide",children:"Setup Persistent Keys"}),d.jsx(e0,{className:"text-[11px] text-[#747580] mt-0.5",children:"Store encrypted keys for permanent 24/7 execution"})]})]})}),d.jsxs("div",{className:"space-y-5 py-3",children:[d.jsx("div",{className:"p-3 bg-red-500/5 border border-red-500/20 rounded",children:d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx(Bke,{className:"w-4 h-4 text-red-500 flex-shrink-0 mt-0.5"}),d.jsxs("div",{children:[d.jsx("h4",{className:"text-[11px] font-bold text-red-300 mb-1 uppercase tracking-wide",children:"Security Warning"}),d.jsx("p",{className:"text-[10px] text-red-200/70 leading-relaxed",children:"This option stores your encrypted private keys and password on the server database. While we use encryption, this is less secure than local or session-based storage. If the server is compromised, your keys could be at risk."})]})]})}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-[10px] font-bold text-[#a0a1a8] mb-1.5 uppercase tracking-wide",children:"Wallet Password"}),d.jsxs("div",{className:"relative",children:[d.jsx("input",{type:"password",value:s,onChange:u=>o(u.target.value),placeholder:"Enter your wallet password",className:"w-full pl-10 pr-3 py-2.5 bg-[#0f1015] border border-[#232328] rounded text-sm text-white placeholder:text-[#747580] focus:outline-none focus:border-red-500/50 transition-colors"}),d.jsx(uh,{className:"w-4 h-4 text-[#747580] absolute left-3 top-1/2 -translate-y-1/2"})]})]}),d.jsxs("div",{className:"flex items-start gap-3 p-3 bg-[#0f1015] rounded border border-[#232328] hover:border-[#747580] transition-colors cursor-pointer",onClick:()=>l(!a),children:[d.jsx("div",{className:"flex items-center h-5",children:d.jsx("input",{type:"checkbox",checked:a,onChange:u=>l(u.target.checked),className:"w-4 h-4 rounded border-[#232328] text-red-500 focus:ring-red-500 bg-[#0f1015]"})}),d.jsxs("div",{className:"text-[10px] text-[#747580] select-none leading-relaxed",children:[d.jsx("span",{className:"font-bold text-[#a0a1a8]",children:"I understand the risks."}),d.jsx("span",{className:"block mt-0.5",children:"I accept full responsibility for storing my keys on the server."})]})]})]}),i&&d.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/30 rounded text-[10px] text-red-300",children:i})]}),d.jsxs(wv,{className:"gap-2",children:[d.jsx("button",{onClick:e,className:"px-4 py-2 bg-[#1a1b21] hover:bg-[#232328] text-[#a0a1a8] rounded text-[11px] font-semibold uppercase tracking-wide transition-colors",children:"Cancel"}),d.jsx("button",{onClick:c,disabled:!s||!a||r,className:"px-4 py-2 bg-red-600 hover:bg-red-500 disabled:bg-[#1a1b21] disabled:text-[#747580] text-white rounded text-[11px] font-semibold uppercase tracking-wide transition-colors flex items-center gap-2",children:r?d.jsxs(d.Fragment,{children:[d.jsx(A8,{className:"w-3.5 h-3.5 animate-spin"}),"Enabling..."]}):"Enable Persistent Keys"})]})]})})},a0t=({onTierChange:t})=>{var z;const e=A.useSyncExternalStore(kf.subscribe.bind(kf),()=>kf.getState()),[n,r]=A.useState(e.currentTier),[i,s]=A.useState(!1),[o,a]=A.useState(null),[l,c]=A.useState(!1),[u,h]=A.useState(as.isConnected()),[m,g]=A.useState(!1),[y,v]=A.useState(!1),b=kf.getSessionStatus();A.useEffect(()=>{r(e.currentTier)},[e.currentTier]),A.useEffect(()=>{const U=as.subscribe($=>{h($)});return()=>U()},[]);const w=async U=>{if(U===e.currentTier){r(U);return}if((U==="session"||U==="persistent")&&!u){r(U),c(!0);return}r(U),a(null),U==="local"?await N():U==="session"?g(!0):U==="persistent"&&v(!0)},k=()=>{c(!1),h(!0),n==="session"?g(!0):n==="persistent"&&v(!0)},N=async()=>{s(!0);try{const U=await kf.migrateToLocal();if(!U.success)throw new Error(U.error||"Migration failed");t==null||t("local")}catch(U){a(U instanceof Error?U.message:"Unknown error"),r(e.currentTier)}finally{s(!1)}},R=async(U,$)=>{s(!0);try{const W=await ke.getItem(ke.getUserKey("agent_hl_vault_enc")),H=await ke.getItem(ke.getUserKey("agent_hl_vault_salt"));if(!W||!H)throw new Error("No encrypted key found. Please set up your wallet first.");const F=await kf.migrateToSession(W,H,U,$);if(!F.success)throw new Error(F.error||"Migration failed");g(!1),t==null||t("session")}catch(W){a(W instanceof Error?W.message:"Unknown error")}finally{s(!1)}},D=async U=>{s(!0);try{const $=await ke.getItem(ke.getUserKey("agent_hl_vault_enc")),W=await ke.getItem(ke.getUserKey("agent_hl_vault_salt"));if(!$||!W)throw new Error("No encrypted key found. Please set up your wallet first.");const H=await kf.migrateToPersistent($,W,U);if(!H.success)throw new Error(H.error||"Migration failed");v(!1),t==null||t("persistent")}catch($){a($ instanceof Error?$.message:"Unknown error")}finally{s(!1)}},O=U=>{switch(U){case"local":return d.jsx(dh,{className:"w-6 h-6"});case"session":return d.jsx(Hi,{className:"w-6 h-6"});case"persistent":return d.jsx(ko,{className:"w-6 h-6"})}},B=(U,$,W)=>W?"border-emerald-500/50 bg-emerald-500/5":$?"border-blue-500 bg-blue-500/5":"border-gray-800 hover:border-gray-700 bg-gray-900/40";return d.jsxs("div",{className:"space-y-6",children:[e.currentTier==="session"&&b.active&&d.jsxs("div",{className:"flex items-center gap-3 p-3 bg-amber-500/10 border border-amber-500/20 rounded-lg animate-in fade-in slide-in-from-top-1",children:[d.jsx("div",{className:"p-1.5 bg-amber-500/20 rounded-full animate-pulse",children:d.jsx(Hi,{className:"w-3.5 h-3.5 text-amber-400"})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("span",{className:"text-sm font-medium text-amber-200",children:"Session Active"}),d.jsxs("span",{className:"text-xs text-amber-200/70 block",children:[b.remainingHours,"h remaining"]})]})]}),d.jsx("div",{className:"grid gap-3",children:Object.keys(uD).map(U=>{const $=uD[U],W=e.currentTier===U,H=n===U;return d.jsxs("button",{onClick:()=>w(U),className:`
                                group relative p-4 rounded-xl border transition-all duration-300 text-left w-full
                                ${B(U,H,W)}
                            `,children:[W&&d.jsxs("div",{className:"absolute top-3 right-3 flex items-center gap-1.5 px-2 py-0.5 rounded-full bg-emerald-500/10 border border-emerald-500/20 backdrop-blur-sm",children:[d.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"}),d.jsx("span",{className:"text-[10px] font-bold text-emerald-400 uppercase tracking-wider",children:"Active"})]}),d.jsxs("div",{className:"flex items-start gap-4",children:[d.jsx("div",{className:`
                                    p-3 rounded-xl transition-colors
                                    ${U==="local"?"bg-emerald-500/10 text-emerald-400 group-hover:bg-emerald-500/20":U==="session"?"bg-amber-500/10 text-amber-400 group-hover:bg-amber-500/20":"bg-red-500/10 text-red-400 group-hover:bg-red-500/20"}
                                `,children:O(U)}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("div",{className:"flex items-center gap-2 mb-1",children:d.jsx("h4",{className:`font-semibold text-sm ${W?"text-white":"text-gray-200 group-hover:text-white"}`,children:$.label})}),d.jsx("p",{className:"text-xs text-gray-500 leading-relaxed mb-3 pr-8",children:$.description}),d.jsxs("div",{className:"flex flex-wrap gap-2",children:[d.jsx("span",{className:`
                                            px-2 py-0.5 text-[10px] uppercase tracking-wider font-medium rounded-md border
                                            ${$.execution24x7?"bg-emerald-500/5 border-emerald-500/20 text-emerald-400":"bg-gray-800 border-gray-700 text-gray-400"}
                                        `,children:$.execution24x7?"24/7 Cloud Run":"Browser Only"}),d.jsx("span",{className:`
                                            px-2 py-0.5 text-[10px] uppercase tracking-wider font-medium rounded-md border
                                            ${$.securityLevel===3?"bg-emerald-500/5 border-emerald-500/20 text-emerald-400":$.securityLevel===2?"bg-amber-500/5 border-amber-500/20 text-amber-400":"bg-red-500/5 border-red-500/20 text-red-400"}
                                        `,children:$.securityLevel===3?"High Security":$.securityLevel===2?"Medium Security":"Low Security"})]})]})]})]},U)})}),(n==="session"||n==="persistent"||u)&&d.jsx("div",{className:"pt-2",children:d.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg border transition-all ${u?"bg-emerald-900/10 border-emerald-500/20":"bg-blue-900/10 border-blue-500/20"}`,children:[d.jsx("div",{className:`p-1.5 rounded-md ${u?"bg-emerald-500/20":"bg-blue-500/20"}`,children:d.jsx(yN,{className:`w-3.5 h-3.5 ${u?"text-emerald-400":"text-blue-400"}`})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:`text-xs font-medium ${u?"text-emerald-200":"text-blue-200"}`,children:u?"Supabase Connected":"Supabase Connection Required"}),d.jsx("p",{className:`text-[10px] truncate ${u?"text-emerald-200/60":"text-blue-200/60"}`,children:u?`Project: ${(z=as.getConfig())==null?void 0:z.projectId}`:"Required for cloud execution modes"})]}),u&&d.jsx("button",{onClick:()=>c(!0),className:"text-[10px] font-medium text-emerald-400 hover:text-emerald-300 transition-colors px-2 py-1 bg-emerald-500/10 rounded hover:bg-emerald-500/20",children:"Edit"})]})}),o&&d.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/30 rounded-lg animate-in fade-in slide-in-from-top-1",children:d.jsx("p",{className:"text-xs text-red-300 font-medium",children:o})}),d.jsx(i0t,{isOpen:l,onClose:()=>{c(!1),n!==e.currentTier&&r(e.currentTier)},onConnect:k}),d.jsx(s0t,{isOpen:m,onClose:()=>g(!1),onConfirm:R,isLoading:i,error:o}),d.jsx(o0t,{isOpen:y,onClose:()=>v(!1),onConfirm:D,isLoading:i,error:o})]})},l0t=({addNotification:t,password:e})=>{var L,V,K,te;const{user:n,logout:r,deleteAccount:i}=B1(),[s,o]=A.useState(!1),[a,l]=A.useState(!1),[c,u]=A.useState(""),[h,m]=A.useState(!1),[g,y]=A.useState(null),[v,b]=A.useState(!1),[w,k]=A.useState(!1),[N,R]=A.useState(""),D=A.useRef(null),[O,B]=A.useState(!1),[z,U]=A.useState(""),$=async G=>{var q,M,P,Y,X,se,oe,me,ce,ve,Ne,pe,Le,he,Te,Ge,We,Qe,at,rt,Xe,ft,Me,pt,Kt,Re,He,gt,dt,ie,J,Z,ue,Se,de,ye,et,Ze,lt,$t;if(!(n!=null&&n.uid)){t("No user session found");return}b(!0);try{const vt=ke.getUserKey("agent_activity_log"),jt=ke.getUserKey("vault_dealer_strategy"),sn=ke.getUserKey("agent_scheduler_tasks"),[tn,on,_i]=await Promise.all([ke.getItem(vt),ke.getItem(jt),ke.getItem(sn)]);let Vn=[];if(G){const ot=await Jo.getHistory();for(const mn of ot)try{const At=await Jo.loadConversation(mn.id,G);At&&Vn.push(At)}catch(At){console.warn(`Failed to decrypt conversation ${mn.id}`,At)}}const ae=await ke.getItem(ke.getUserKey("vault_dealer_storage"));let Q=null;if(ae)try{const ot=JSON.parse(ae);Q={strategyPrompt:(q=ot.settings)==null?void 0:q.strategyPrompt,aggressiveMode:(M=ot.settings)==null?void 0:M.aggressiveMode,maxLeverage:(P=ot.settings)==null?void 0:P.maxLeverage,maxPositionSizeUSDC:(Y=ot.settings)==null?void 0:Y.maxPositionSizeUSDC,maxOpenPositions:(X=ot.settings)==null?void 0:X.maxOpenPositions,bankrollType:(se=ot.settings)==null?void 0:se.bankrollType,manualBankroll:(oe=ot.settings)==null?void 0:oe.manualBankroll,tradingPairs:(me=ot.settings)==null?void 0:me.tradingPairs,checkIntervalSeconds:(ce=ot.settings)==null?void 0:ce.checkIntervalSeconds,analysisTimeframe:(ve=ot.settings)==null?void 0:ve.analysisTimeframe,historyCandles:(Ne=ot.settings)==null?void 0:Ne.historyCandles,macroTimeframeEnabled:(pe=ot.settings)==null?void 0:pe.macroTimeframeEnabled,macroTimeframe:(Le=ot.settings)==null?void 0:Le.macroTimeframe,macroEnabledIndicators:(he=ot.settings)==null?void 0:he.macroEnabledIndicators,indicatorSettings:(Te=ot.settings)==null?void 0:Te.indicatorSettings,autonomousIndicators:(Ge=ot.settings)==null?void 0:Ge.autonomousIndicators,selectedPreset:(We=ot.settings)==null?void 0:We.selectedPreset,promptMode:(Qe=ot.settings)==null?void 0:Qe.promptMode,stopLossEnabled:(at=ot.settings)==null?void 0:at.stopLossEnabled,stopLossPercent:(rt=ot.settings)==null?void 0:rt.stopLossPercent,takeProfitEnabled:(Xe=ot.settings)==null?void 0:Xe.takeProfitEnabled,takeProfitPercent:(ft=ot.settings)==null?void 0:ft.takeProfitPercent}}catch(ot){console.error("Failed to parse dealer settings",ot)}const ee=await ke.getItem(ke.getUserKey("vault_polymarket_storage"));let fe=null,_e;if(ee)try{const ot=JSON.parse(ee);fe={strategyPrompt:(Me=ot.settings)==null?void 0:Me.strategyPrompt,promptMode:(pt=ot.settings)==null?void 0:pt.promptMode,selectedPreset:(Kt=ot.settings)==null?void 0:Kt.selectedPreset,marketSelectionMode:(Re=ot.settings)==null?void 0:Re.marketSelectionMode,selectedMarkets:(He=ot.settings)==null?void 0:He.selectedMarkets,allowedCategories:(gt=ot.settings)==null?void 0:gt.allowedCategories,maxPositionSizeUSDC:(dt=ot.settings)==null?void 0:dt.maxPositionSizeUSDC,maxOpenPositions:(ie=ot.settings)==null?void 0:ie.maxOpenPositions,minLiquidity:(J=ot.settings)==null?void 0:J.minLiquidity,minVolume24h:(Z=ot.settings)==null?void 0:Z.minVolume24h,minVolumeThreshold:(ue=ot.settings)==null?void 0:ue.minVolumeThreshold,minLiquidityThreshold:(Se=ot.settings)==null?void 0:Se.minLiquidityThreshold,minSpreadThreshold:(de=ot.settings)==null?void 0:de.minSpreadThreshold,confidenceThreshold:(ye=ot.settings)==null?void 0:ye.confidenceThreshold,bankrollType:(et=ot.settings)==null?void 0:et.bankrollType,manualBankroll:(Ze=ot.settings)==null?void 0:Ze.manualBankroll,checkIntervalSeconds:(lt=ot.settings)==null?void 0:lt.checkIntervalSeconds},_e=($t=ot.settings)==null?void 0:$t.strategyPrompt}catch(ot){console.error("Failed to parse polymarket settings",ot)}const Oe={version:"1.0",exportedAt:new Date().toISOString(),data:{activityLog:tn?JSON.parse(tn):[],conversations:Vn.length>0?Vn:void 0,hyperliquidDealer:{settings:Q,strategyPrompt:on||void 0},polymarketDealer:{settings:fe,strategyPrompt:_e},schedulerTasks:_i?JSON.parse(_i):[]}},Ve=new Blob([JSON.stringify(Oe,null,2)],{type:"application/json"}),Qt=URL.createObjectURL(Ve),Ht=document.createElement("a");Ht.href=Qt,Ht.download=`autonomousvault_backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(Ht),Ht.click(),document.body.removeChild(Ht),URL.revokeObjectURL(Qt),t("Backup exported successfully!"),B(!1),U("")}catch(vt){console.error("Export failed:",vt),t("Failed to export data")}finally{b(!1)}},W=()=>{U(""),B(!0)},H=()=>{if(!z){t("Please enter your password");return}if(z!==e){t("Incorrect password");return}$(z)},F=G=>{var P;const q=(P=G.target.files)==null?void 0:P[0];if(!q)return;const M=new FileReader;M.onload=Y=>{var X;try{const se=(X=Y.target)==null?void 0:X.result,oe=JSON.parse(se);if(!oe.version||!oe.data){t("Invalid backup file format");return}y(oe),m(!0)}catch(se){console.error("Failed to parse backup file:",se),t("Failed to read backup file")}},M.readAsText(q),D.current&&(D.current.value="")},T=async()=>{var G,q,M,P,Y,X,se;if(!(!g||!(n!=null&&n.uid))){k(!0);try{const{data:oe}=g;if((G=oe.activityLog)!=null&&G.length){const ce=ke.getUserKey("agent_activity_log");await ke.setItem(ce,JSON.stringify(oe.activityLog))}if((q=oe.schedulerTasks)!=null&&q.length){const ce=ke.getUserKey("agent_scheduler_tasks");await ke.setItem(ce,JSON.stringify(oe.schedulerTasks))}if((M=oe.hyperliquidDealer)!=null&&M.strategyPrompt){const ce=ke.getUserKey("vault_dealer_strategy");await ke.setItem(ce,oe.hyperliquidDealer.strategyPrompt)}const me=e||N;if((P=oe.conversations)!=null&&P.length){if(!me){t("ERROR: Password required to import conversations"),k(!1);return}console.log(`[Import] Restoring ${oe.conversations.length} conversations using provided password...`);for(const ce of oe.conversations)try{await Jo.saveConversation(ce,me)}catch(ve){console.warn(`Failed to restore conversation ${ce.id}`,ve)}}if((Y=oe.hyperliquidDealer)!=null&&Y.settings){const ce=await ke.getItem(ke.getUserKey("vault_dealer_storage"));try{const ve=ce?JSON.parse(ce):{settings:{}};ve.settings={...ve.settings,...oe.hyperliquidDealer.settings},await ke.setItem(ke.getUserKey("vault_dealer_storage"),JSON.stringify(ve))}catch(ve){console.error("Failed to merge dealer settings",ve)}}if((X=oe.polymarketDealer)!=null&&X.settings||(se=oe.polymarketDealer)!=null&&se.strategyPrompt){console.log("[Import] Restoring Polymarket settings:",oe.polymarketDealer);const ce=await ke.getItem(ke.getUserKey("vault_polymarket_storage"));try{const ve=ce?JSON.parse(ce):{settings:{}};oe.polymarketDealer.settings&&(ve.settings={...ve.settings,...oe.polymarketDealer.settings}),oe.polymarketDealer.strategyPrompt&&(ve.settings={...ve.settings,strategyPrompt:oe.polymarketDealer.strategyPrompt}),console.log("[Import] Saving Polymarket settings:",ve.settings),await ke.setItem(ke.getUserKey("vault_polymarket_storage"),JSON.stringify(ve))}catch(ve){console.error("Failed to merge polymarket settings",ve)}}else console.log("[Import] No Polymarket settings to restore");console.log("[Import] Reloading stores from storage..."),await xt.reloadFromStorage(),await ut.reloadFromStorage(),t("Data restored successfully!"),m(!1),y(null)}catch(oe){console.error("Import failed:",oe),t("Failed to import data")}finally{k(!1)}}},_=async()=>{if(!(!n||c!=="DELETE")){l(!0);try{xt.reset(),ut.reset(),await i(),t("Account deleted successfully")}catch(G){console.error("Delete account failed:",G),t(G.message||"Failed to delete account"),l(!1)}}};return d.jsxs(Mt.div,{className:"flex flex-col gap-6",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:[d.jsxs("div",{className:"columns-1 lg:columns-2 gap-6 space-y-6",children:[d.jsxs("section",{className:"glass-panel rounded break-inside-avoid",children:[d.jsxs("div",{className:"px-6 py-4 border-b border-gray-800/60 flex items-center gap-3",children:[d.jsx("div",{className:"p-2 bg-blue-500/10 rounded",children:d.jsx(dh,{className:"h-4 w-4 text-blue-400"})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("h2",{className:"text-sm font-bold text-white tracking-wide",children:"Security & Execution"}),d.jsx("p",{className:"text-[11px] text-gray-500 mt-0.5 font-light",children:"Choose how your bot runs and stores keys"})]})]}),d.jsx("div",{className:"p-6",children:d.jsx(a0t,{onTierChange:G=>t(`Security tier changed to ${G}`)})})]}),d.jsxs("section",{className:"glass-panel rounded break-inside-avoid",children:[d.jsxs("div",{className:"px-6 py-4 border-b border-gray-800/60 flex items-center gap-3",children:[d.jsx("div",{className:"p-2 bg-gray-800/30 rounded",children:d.jsx(yN,{className:"h-4 w-4 text-white"})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("h2",{className:"text-sm font-bold text-white tracking-wide",children:"Data Backup"}),d.jsx("p",{className:"text-[11px] text-gray-500 mt-0.5",children:"Export your settings to move to another device"})]})]}),d.jsxs("div",{className:"p-6",children:[d.jsxs("p",{className:"text-xs text-gray-500 mb-5 font-light leading-relaxed",children:["Export your full configuration history, conversations, and strategies to a JSON file.",d.jsx("br",{}),d.jsx("span",{className:"text-amber-500/80 font-medium",children:" Note: Private keys and sensitive API tokens are never included in exports."})]}),d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[d.jsxs("button",{onClick:W,disabled:v,className:"group flex items-start gap-4 p-4 border border-gray-800/60 rounded-lg hover:border-gray-700 transition-all text-left",children:[d.jsx("div",{className:"p-2 rounded-lg bg-emerald-500/10 text-emerald-500 group-hover:text-emerald-400 transition-colors",children:d.jsx(Ks,{size:18})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("span",{className:"text-sm font-semibold text-gray-200 block mb-1 group-hover:text-white transition-colors",children:v?"Exporting...":"Export Data"}),d.jsx("p",{className:"text-[11px] text-gray-500 leading-snug",children:"Download settings backup file"})]})]}),d.jsxs("button",{onClick:()=>{var G;return(G=D.current)==null?void 0:G.click()},className:"group flex items-start gap-4 p-4 border border-gray-800/60 rounded-lg hover:border-gray-700 transition-all text-left",children:[d.jsx("div",{className:"p-2 rounded-lg bg-blue-500/10 text-blue-500 group-hover:text-blue-400 transition-colors",children:d.jsx(sk,{size:18})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("span",{className:"text-sm font-semibold text-gray-200 block mb-1 group-hover:text-white transition-colors",children:"Import Data"}),d.jsx("p",{className:"text-[11px] text-gray-500 leading-snug",children:"Restore from backup JSON"})]})]}),d.jsx("input",{ref:D,type:"file",accept:".json",onChange:F,className:"hidden"})]})]})]}),d.jsxs("section",{className:"glass-panel rounded break-inside-avoid",children:[d.jsxs("div",{className:"px-6 py-4 border-b border-red-900/40 flex items-center gap-3",children:[d.jsx("div",{className:"p-2 bg-red-500/10 rounded",children:d.jsx(hs,{className:"h-4 w-4 text-red-500"})}),d.jsx("div",{className:"flex-1",children:d.jsx("h2",{className:"text-sm font-bold text-red-500 tracking-wide",children:"Danger Zone"})})]}),d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"mb-4",children:[d.jsx("h3",{className:"text-sm font-medium text-red-300 mb-1",children:"Delete Account"}),d.jsxs("p",{className:"text-xs text-gray-500 leading-relaxed",children:["Permanently remove your account and all associated data. This involves clearing your local storage, dealer settings, and cloud database records. ",d.jsx("strong",{className:"text-red-400/80",children:"This action cannot be undone."})]})]}),d.jsx("button",{onClick:()=>o(!0),className:"px-5 py-2.5 bg-red-500/10 border border-red-500/20 rounded-lg text-red-400 text-xs font-semibold hover:bg-red-500 hover:text-white hover:border-red-500 transition-all whitespace-nowrap",children:"Delete Account"})]})]})]}),s&&d.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/80 backdrop-blur-sm flex items-center justify-center p-4",children:d.jsx(Mt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-[#13141A] border border-gray-800 w-full max-w-md rounded-xl shadow-2xl overflow-hidden",children:d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"flex items-center gap-4 mb-5",children:[d.jsx("div",{className:"p-3 rounded-full bg-red-500/10",children:d.jsx(hs,{size:24,className:"text-red-400"})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-bold text-white tracking-tight",children:"Delete Account"}),d.jsx("p",{className:"text-xs text-gray-500",children:"This action is irreversible"})]})]}),d.jsxs("p",{className:"text-sm text-gray-400 mb-5 leading-relaxed",children:["All your data will be permanently deleted.",d.jsx("br",{}),"To confirm, type ",d.jsx("strong",{className:"text-white",children:"DELETE"})," below:"]}),d.jsx("input",{type:"text",value:c,onChange:G=>u(G.target.value),placeholder:"Type DELETE to confirm",className:"w-full px-4 py-2.5 bg-transparent border border-gray-800 rounded-lg text-white placeholder:text-gray-600 focus:outline-none focus:border-red-500/50 focus:ring-1 focus:ring-red-500/20 transition-all mb-5 text-sm"}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx("button",{onClick:()=>{o(!1),u("")},className:"flex-1 px-4 py-2.5 bg-gray-800 rounded-lg text-gray-300 text-sm font-medium hover:bg-gray-700 transition-colors",children:"Cancel"}),d.jsx("button",{onClick:_,disabled:c!=="DELETE"||a,className:Pt("flex-1 px-4 py-2.5 rounded-lg text-sm font-medium transition-all",c==="DELETE"?"bg-red-500 text-white hover:bg-red-600":"bg-red-500/20 text-red-500/40 cursor-not-allowed"),children:a?"Deleting...":"Delete Account"})]})]})})}),h&&g&&d.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/80 backdrop-blur-sm flex items-center justify-center p-4",children:d.jsx(Mt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-[#13141A] border border-gray-800 w-full max-w-md rounded-xl shadow-2xl overflow-hidden",children:d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"flex items-center gap-4 mb-5",children:[d.jsx("div",{className:"p-3 rounded-full bg-blue-500/10",children:d.jsx(sk,{size:24,className:"text-blue-400"})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-bold text-white tracking-tight",children:"Import Backup"}),d.jsxs("p",{className:"text-xs text-gray-500",children:["Created: ",new Date(g.exportedAt).toLocaleDateString()]})]})]}),d.jsxs("div",{className:"border border-gray-800 rounded-lg p-4 mb-5 space-y-2",children:[d.jsx("p",{className:"text-[10px] text-gray-500 font-semibold uppercase tracking-wider mb-2",children:"Data to restore:"}),(L=g.data.activityLog)!=null&&L.length?d.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-300",children:[d.jsx(lm,{size:12,className:"text-emerald-500"}),d.jsxs("span",{children:["Activity Log (",g.data.activityLog.length," items)"]})]}):null,(V=g.data.conversations)!=null&&V.length?d.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-300",children:[d.jsx(lm,{size:12,className:"text-emerald-500"}),d.jsxs("span",{children:["Conversations (",g.data.conversations.length," chats)"]})]}):null,(K=g.data.hyperliquidDealer)!=null&&K.settings?d.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-300",children:[d.jsx(lm,{size:12,className:"text-emerald-500"}),d.jsx("span",{children:"Hyperliquid Dealer Settings"})]}):null,d.jsxs("div",{className:"text-[10px] text-gray-600 pl-5",children:["...and ",Object.keys(g.data).length-2," other data points"]})]}),(te=g.data.conversations)!=null&&te.length?d.jsxs("div",{className:"mb-5",children:[d.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Encryption password required:"}),d.jsx("input",{type:"password",value:N,onChange:G=>R(G.target.value),placeholder:"Enter encryption password",className:"w-full px-4 py-2.5 bg-transparent border border-gray-800 rounded-lg text-white placeholder:text-gray-600 focus:outline-none focus:border-blue-500/50 transition-all text-sm"}),!N&&!e&&d.jsxs("p",{className:"text-[10px] text-amber-500 mt-1.5 flex items-center gap-1",children:[d.jsx(hs,{size:10})," Password required to decrypt conversations"]})]}):null,d.jsxs("div",{className:"flex gap-3",children:[d.jsx("button",{onClick:()=>{m(!1),y(null),R("")},className:"flex-1 px-4 py-2.5 bg-gray-800 rounded-lg text-gray-300 text-sm font-medium hover:bg-gray-700 transition-colors",children:"Cancel"}),d.jsx("button",{onClick:T,disabled:w,className:"flex-1 px-4 py-2.5 bg-white text-black rounded-lg text-sm font-semibold hover:bg-gray-200 transition-colors disabled:opacity-50",children:w?"Importing...":"Restore Data"})]})]})})}),O&&d.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/80 backdrop-blur-sm flex items-center justify-center p-4",children:d.jsx(Mt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-[#13141A] border border-gray-800 w-full max-w-md rounded-xl shadow-2xl overflow-hidden",children:d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"flex items-center gap-4 mb-5",children:[d.jsx("div",{className:"p-3 rounded-full bg-emerald-500/10",children:d.jsx(Ks,{size:24,className:"text-emerald-400"})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-bold text-white tracking-tight",children:"Confirm Export"}),d.jsx("p",{className:"text-xs text-gray-500",children:"Security check required"})]})]}),d.jsx("p",{className:"text-sm text-gray-400 mb-5 leading-relaxed",children:"Please enter your Vault password to authorize the export. This ensures only you can download your data."}),d.jsx("div",{className:"mb-5",children:d.jsx("input",{type:"password",value:z,onChange:G=>U(G.target.value),placeholder:"Enter Vault password",className:"w-full px-4 py-2.5 bg-transparent border border-gray-800 rounded-lg text-white placeholder:text-gray-600 focus:outline-none focus:border-emerald-500/50 transition-all text-sm",onKeyDown:G=>{G.key==="Enter"&&H()}})}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx("button",{onClick:()=>{B(!1),U("")},className:"flex-1 px-4 py-2.5 bg-gray-800 rounded-lg text-gray-300 text-sm font-medium hover:bg-gray-700 transition-colors",children:"Cancel"}),d.jsx("button",{onClick:H,className:"flex-1 px-4 py-2.5 bg-white text-black rounded-lg text-sm font-semibold hover:bg-gray-200 transition-colors",children:"Export"})]})]})})})]})},Q4={operator:{name:"Chat Operator",shortName:"Operator",icon:d.jsx(Ake,{size:16}),description:"Chat assistant",color:"#9b87f5"},hyperliquidDealer:{name:"Hyperliquid Dealer",shortName:"Hyperliquid",icon:d.jsx(yn,{size:16}),description:"Perp trading",color:"#E7FE55"},polymarketDealer:{name:"Polymarket Dealer",shortName:"Polymarket",icon:d.jsx(Zg,{size:16}),description:"Predictions",color:"#22d3ee"}},c0t=({vault:t,password:e,addNotification:n,activeTab:r,setActiveTab:i})=>{const[s,o]=A.useState("gemini"),[a,l]=A.useState({gemini:"",openai:"",claude:""}),[c,u]=A.useState({gemini:!1,openai:!1,claude:!1}),[h,m]=A.useState({gemini:"empty",openai:"empty",claude:"empty"}),[g,y]=A.useState({operator:{providerType:"gemini",modelId:"gemini-2.5-flash"},hyperliquidDealer:{providerType:"gemini",modelId:"gemini-2.5-flash"},polymarketDealer:{providerType:"gemini",modelId:"gemini-2.5-flash"}}),[v,b]=A.useState("devnet"),[w,k]=A.useState("testnet");A.useEffect(()=>{const U=Fn.getSnapshot(),$={gemini:"",openai:"",claude:""},W={gemini:"empty",openai:"empty",claude:"empty"};for(const F of["gemini","openai","claude"]){const T=Fn.getApiKey(F);$[F]=T,W[F]=T?"saved":"empty"}l($),m(W),y(U.componentConfigs);const H=Fn.subscribe(()=>{const F=Fn.getSnapshot();y(F.componentConfigs)});return()=>{H()}},[]);const N=(U,$)=>{l(H=>({...H,[U]:$}));const W=Fn.getApiKey(U);m(H=>({...H,[U]:$===""?"empty":$!==W?"modified":"saved"}))},R=U=>{const $=a[U].trim();$&&(Fn.setApiKey(U,$),m(W=>({...W,[U]:"saved"})),n(`${vu[U].name} API Key saved!`))},D=U=>{Fn.clearApiKey(U),l($=>({...$,[U]:""})),m($=>({...$,[U]:"empty"})),n(`${vu[U].name} API Key cleared`)},O=(U,$)=>{var T;const H=((T=py[$][0])==null?void 0:T.id)||"",F={providerType:$,modelId:H};Fn.isProviderConfigured($)?(Fn.setComponentConfig(U,F),n(`${Q4[U].name} now using ${vu[$].name}`)):n(`Please configure ${vu[$].name} API key first`)},B=(U,$)=>{const W=g[U],H={...W,modelId:$};Fn.setComponentConfig(U,H);const F=py[W.providerType].find(T=>T.id===$);n(`${Q4[U].name} model changed to ${(F==null?void 0:F.name)||$}`)},z=()=>Fn.getConfiguredProviders();return d.jsx(Mt.div,{className:"h-full flex flex-col overflow-y-auto custom-scrollbar",initial:{opacity:0},animate:{opacity:1},transition:{duration:.4},children:d.jsx("div",{className:"flex-1 w-full max-w-5xl mx-auto px-6 py-8 flex flex-col gap-6",children:r==="user"?d.jsx(l0t,{addNotification:n,password:e}):d.jsxs("div",{className:"columns-1 lg:columns-2 gap-6 space-y-6",children:[d.jsxs("section",{className:"glass-panel rounded break-inside-avoid",children:[d.jsxs("div",{className:"px-6 py-4 border-b border-gray-800/60 flex items-center justify-between font-light",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"p-2 bg-gray-800/30 rounded",children:d.jsx(Xne,{className:"h-4 w-4 text-white"})}),d.jsx("h2",{className:"text-sm font-bold text-white tracking-wide",children:"AI Providers"})]}),d.jsx("div",{className:"flex items-center gap-2",children:["gemini","openai","claude"].map(U=>d.jsx("div",{className:Pt("w-1.5 h-1.5 rounded-full transition-all",h[U]==="saved"?"bg-emerald-500":"bg-gray-700"),title:`${vu[U].name}: ${h[U]==="saved"?"Configured":"Not configured"}`},U))})]}),d.jsxs("div",{className:"p-6",children:[d.jsx("div",{className:"flex items-center gap-6 border-b border-gray-800/60 mb-6 pb-1",children:["gemini","openai","claude"].map(U=>{const $=s===U;return d.jsxs("button",{onClick:()=>o(U),className:Pt("relative pb-3 text-sm font-medium transition-all",$?"text-white":"text-gray-500 hover:text-gray-300"),children:[vu[U].name,$&&d.jsx(Mt.div,{layoutId:"activeTab",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-[#E7FE55]"})]},U)})}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsxs("label",{className:"text-xs font-medium text-gray-400 uppercase tracking-wider flex items-center gap-2",children:[d.jsx("span",{children:"API Key"}),h[s]==="saved"&&d.jsxs("span",{className:"text-emerald-500 flex items-center gap-1 normal-case tracking-normal bg-emerald-500/10 px-2 py-0.5 rounded text-[10px] font-semibold",children:[d.jsx(lm,{size:10})," Saved"]})]}),d.jsxs("a",{href:vu[s].keyUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-[#E7FE55] hover:underline flex items-center gap-1 transition-colors",children:["Get API key ",d.jsx(ld,{size:10})]})]}),d.jsxs("div",{className:"relative group mb-4",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d.jsx(D3,{size:14,className:"text-gray-600 group-focus-within:text-white transition-colors"})}),d.jsx("input",{type:c[s]?"text":"password",value:a[s],onChange:U=>N(s,U.target.value),placeholder:`Enter ${vu[s].name} key...`,className:"w-full bg-transparent border border-gray-800 rounded-lg py-2.5 pl-10 pr-10 text-sm text-gray-200 focus:outline-none focus:border-[#E7FE55]/50 focus:ring-1 focus:ring-[#E7FE55]/20 font-mono transition-all placeholder:text-gray-700"}),d.jsx("button",{type:"button",onClick:()=>u(U=>({...U,[s]:!U[s]})),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-600 hover:text-white transition-colors",children:c[s]?d.jsx(xN,{size:14}):d.jsx(S8,{size:14})})]}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("button",{onClick:()=>R(s),disabled:h[s]!=="modified",className:Pt("h-9 px-5 rounded-lg text-sm font-medium transition-all",h[s]==="modified"?"bg-white text-black hover:bg-gray-200":"bg-gray-800/50 text-gray-500 cursor-not-allowed border border-gray-800"),children:"Save Changes"}),h[s]!=="empty"&&d.jsx("button",{onClick:()=>D(s),className:"h-9 px-4 rounded-lg text-sm text-gray-500 hover:text-red-400 hover:bg-red-500/10 transition-all ml-auto",children:"Disconnect"})]})]})]})]}),d.jsxs("section",{className:"glass-panel rounded break-inside-avoid",children:[d.jsxs("div",{className:"px-6 py-4 border-b border-gray-800/60 flex items-center gap-3",children:[d.jsx("div",{className:"p-2 bg-gray-800/30 rounded",children:d.jsx(pT,{className:"h-4 w-4 text-white"})}),d.jsxs("div",{className:"text-left",children:[d.jsx("h2",{className:"text-sm font-bold text-white tracking-wide",children:"Network Settings"}),d.jsx("p",{className:"text-[11px] text-gray-500 mt-0.5 font-light",children:"Configure blockchain connections"})]})]}),d.jsxs("div",{className:"p-6 space-y-4",children:[d.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border border-gray-800/40",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-800/50 border border-gray-800 flex items-center justify-center",children:d.jsx(ko,{size:14,className:"text-[#9945FF]"})}),d.jsxs("div",{children:[d.jsx("span",{className:"text-sm text-gray-300 font-medium block",children:"Solana"}),d.jsx("span",{className:"text-xs text-gray-600 block",children:"Blockchain Network"})]})]}),d.jsxs("div",{className:"flex rounded-lg p-1 border border-gray-800/60",children:[d.jsx("button",{onClick:()=>b("devnet"),className:Pt("px-4 py-1.5 rounded-md text-xs font-medium transition-all",v==="devnet"?"bg-gray-800 text-white":"text-gray-500 hover:text-gray-300"),children:"Devnet"}),d.jsxs("button",{disabled:!0,className:"px-4 py-1.5 rounded-md text-xs text-gray-600 flex items-center gap-1.5 cursor-not-allowed opacity-60",children:["Mainnet ",d.jsx("span",{className:"text-[9px] bg-gray-800 text-gray-400 px-1 rounded uppercase tracking-wider",children:"Soon"})]})]})]}),d.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border border-gray-800/40",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-800/50 border border-gray-800 flex items-center justify-center",children:d.jsx(yn,{size:14,className:"text-[#E7FE55]"})}),d.jsxs("div",{children:[d.jsx("span",{className:"text-sm text-gray-300 font-medium block",children:"Hyperliquid"}),d.jsx("span",{className:"text-xs text-gray-600 block",children:"Trading Engine"})]})]}),d.jsxs("div",{className:"flex rounded-lg p-1 border border-gray-800/60",children:[d.jsx("button",{onClick:()=>k("testnet"),className:Pt("px-4 py-1.5 rounded-md text-xs font-medium transition-all",w==="testnet"?"bg-gray-800 text-white":"text-gray-500 hover:text-gray-300"),children:"Testnet"}),d.jsxs("button",{disabled:!0,className:"px-4 py-1.5 rounded-md text-xs text-gray-600 flex items-center gap-1.5 cursor-not-allowed opacity-60",children:["Mainnet ",d.jsx("span",{className:"text-[9px] bg-gray-800 text-gray-400 px-1 rounded uppercase tracking-wider",children:"Soon"})]})]})]})]})]}),d.jsxs("section",{className:"glass-panel rounded break-inside-avoid",children:[d.jsxs("div",{className:"px-6 py-4 border-b border-gray-800/60 flex items-center gap-3",children:[d.jsx("div",{className:"p-2 bg-gray-800/30 rounded",children:d.jsx(to,{className:"h-4 w-4 text-white"})}),d.jsx("h2",{className:"text-sm font-bold text-white tracking-wide",children:"Model Assignment"})]}),d.jsx("div",{className:"p-6",children:d.jsx("div",{className:"flex flex-col gap-4",children:["operator","hyperliquidDealer","polymarketDealer"].map(U=>{const $=Q4[U],W=g[U],H=py[W.providerType],F=z(),T=F.includes(W.providerType);return d.jsxs("div",{className:"group p-4 rounded-lg border border-gray-800/60 hover:border-gray-700 transition-all duration-300",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[d.jsx("div",{className:"p-1.5 rounded-lg shrink-0",style:{backgroundColor:`${$.color}10`,color:$.color},children:$.icon}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h3",{className:"text-sm font-semibold text-gray-200",children:$.shortName}),d.jsx("span",{className:Pt("w-2 h-2 rounded-full",T?"bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.4)]":"bg-amber-500")})]}),d.jsx("p",{className:"text-[11px] text-gray-500 mt-0.5",children:$.description})]})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[d.jsxs("div",{children:[d.jsx("label",{className:"text-[10px] text-gray-500 font-semibold uppercase tracking-wider mb-1.5 block",children:"Provider"}),d.jsxs(Oee,{value:W.providerType,onValueChange:_=>O(U,_),children:[d.jsx(PD,{className:"w-full h-9 bg-transparent border-gray-800 hover:border-gray-700 text-xs text-gray-300 focus:ring-1 focus:ring-gray-700 transition-colors",children:d.jsx(Mee,{})}),d.jsx(_D,{className:"bg-[#1A1B21] border-[#2E2F36]",children:["gemini","openai","claude"].map(_=>{const L=vu[_],V=F.includes(_);return d.jsx(ID,{value:_,disabled:!V,className:"text-xs text-gray-300 focus:bg-[#2E2F36] focus:text-white",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{children:L.name}),!V&&d.jsx("span",{className:"opacity-50 text-[10px] ml-auto",children:"(no key)"})]})},_)})})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-[10px] text-gray-500 font-semibold uppercase tracking-wider mb-1.5 block",children:"Model"}),d.jsxs(Oee,{value:W.modelId,onValueChange:_=>B(U,_),children:[d.jsx(PD,{className:"w-full h-9 bg-transparent border-gray-800 hover:border-gray-700 text-xs text-gray-300 focus:ring-1 focus:ring-gray-700 transition-colors",children:d.jsx(Mee,{})}),d.jsx(_D,{className:"bg-[#1A1B21] border-[#2E2F36]",children:H.map(_=>d.jsx(ID,{value:_.id,className:"text-xs text-gray-300 focus:bg-[#2E2F36] focus:text-white",children:_.name},_.id))})]})]})]})]},U)})})})]})]})})})},u0t=(t,e,n)=>t*n.inputPricePerMillion/1e6+e*n.outputPricePerMillion/1e6,d0t=({addNotification:t})=>{const[e,n]=A.useState(null),[r,i]=A.useState([]),[s,o]=A.useState(!1),[a,l]=A.useState(!1),[c,u]=A.useState(20),[h,m]=A.useState("ALL"),[g,y]=A.useState(Ps.getSnapshot().pricing),[v,b]=A.useState(Ps.getSnapshot().pricing),w=B=>{const z=Ps.getRecords(1e3),U=Ps.getStats();if(!U)return null;const $=new Date,W=new Date($.getFullYear(),$.getMonth(),$.getDate()).getTime(),H=new Date($.getFullYear(),$.getMonth(),1).getTime();let F=0;const T={MANAGER:0,DEALER:0,POLYMARKET_DEALER:0},_={input:0,output:0,cost:0},L={input:0,output:0,cost:0};for(const V of z){const K=u0t(V.inputTokens,V.outputTokens,B);F+=K,T[V.source]+=K,V.timestamp>=W&&(_.input+=V.inputTokens,_.output+=V.outputTokens,_.cost+=K),V.timestamp>=H&&(L.input+=V.inputTokens,L.output+=V.outputTokens,L.cost+=K)}return{...U,totalCost:F,bySource:{MANAGER:{...U.bySource.MANAGER,cost:T.MANAGER},DEALER:{...U.bySource.DEALER,cost:T.DEALER},POLYMARKET_DEALER:{...U.bySource.POLYMARKET_DEALER,cost:T.POLYMARKET_DEALER}},today:_,thisMonth:L}};A.useEffect(()=>{const B=()=>{n(w(v)),i(Ps.getRecords(c,h==="ALL"?void 0:h))};B();const z=Ps.subscribe(B);return()=>{z()}},[c,h]),A.useEffect(()=>{const B=w(v);n(B)},[v]);const k=()=>{Ps.updatePricing(g),b({...g}),t("Pricing updated successfully")},N=()=>{confirm("Are you sure you want to clear all token usage history?")&&(Ps.clearHistory(),t("Token usage history cleared"))},R=B=>B>=1e6?(B/1e6).toFixed(2)+"M":B>=1e3?(B/1e3).toFixed(1)+"K":B.toFixed(0),D=B=>"$"+B.toFixed(4),O=B=>new Date(B).toLocaleString();return e?d.jsxs(Mt.div,{className:"h-full flex flex-col space-y-6 overflow-y-auto px-1 pb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[d.jsx(Ws,{className:"border-slate-700/50 bg-gradient-to-br from-slate-900/80 to-slate-800/30",children:d.jsxs(Tu,{className:"p-5",children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"p-2 rounded-lg bg-indigo-500/20",children:d.jsx(ko,{className:"text-indigo-400",size:20})}),d.jsx("span",{className:"text-sm text-slate-400",children:"Total Tokens"})]}),d.jsxs(Vi,{variant:"ghost",size:"sm",onClick:N,className:"h-7 px-2 text-xs text-slate-400 hover:text-red-400 hover:bg-red-500/10",children:[d.jsx(xm,{size:14,className:"mr-1"})," Clear"]})]}),d.jsx("div",{className:"text-2xl font-bold text-white",children:R(e.totalInputTokens+e.totalOutputTokens)}),d.jsxs("div",{className:"flex gap-4 mt-2 text-xs text-slate-500",children:[d.jsxs("span",{children:["In: ",R(e.totalInputTokens)]}),d.jsxs("span",{children:["Out: ",R(e.totalOutputTokens)]})]})]})}),d.jsx(Ws,{className:"border-amber-500/30 bg-gradient-to-br from-slate-900/80 to-amber-950/20",children:d.jsxs(Tu,{className:"p-5",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[d.jsx("div",{className:"p-2 rounded-lg bg-amber-500/20",children:d.jsx(E8,{className:"text-amber-400",size:20})}),d.jsx("span",{className:"text-sm text-slate-400",children:"Total Cost"})]}),d.jsx("div",{className:"text-2xl font-bold text-amber-400",children:D(e.totalCost)}),d.jsx("div",{className:"text-xs text-slate-500 mt-2",children:"Estimated based on current pricing"})]})}),d.jsx(Ws,{className:"border-emerald-500/30 bg-gradient-to-br from-slate-900/80 to-emerald-950/20",children:d.jsxs(Tu,{className:"p-5",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[d.jsx("div",{className:"p-2 rounded-lg bg-emerald-500/20",children:d.jsx(yn,{className:"text-emerald-400",size:20})}),d.jsx("span",{className:"text-sm text-slate-400",children:"Today"})]}),d.jsx("div",{className:"text-2xl font-bold text-white",children:R(e.today.input+e.today.output)}),d.jsx("div",{className:"text-xs text-emerald-400 mt-2",children:D(e.today.cost)})]})}),d.jsx(Ws,{className:"border-blue-500/30 bg-gradient-to-br from-slate-900/80 to-blue-950/20",children:d.jsxs(Tu,{className:"p-5",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[d.jsx("div",{className:"p-2 rounded-lg bg-blue-500/20",children:d.jsx(vm,{className:"text-blue-400",size:20})}),d.jsx("span",{className:"text-sm text-slate-400",children:"This Month"})]}),d.jsx("div",{className:"text-2xl font-bold text-white",children:R(e.thisMonth.input+e.thisMonth.output)}),d.jsx("div",{className:"text-xs text-blue-400 mt-2",children:D(e.thisMonth.cost)})]})})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[d.jsxs(Ws,{className:"border-indigo-500/30 bg-gradient-to-br from-slate-900/80 to-indigo-950/20",children:[d.jsx(HL,{className:"pb-4",children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"p-2 rounded-lg bg-indigo-500/20",children:d.jsx(Mg,{className:"text-indigo-400",size:24})}),d.jsxs("div",{children:[d.jsx(qL,{className:"text-base",children:"Vault Operator"}),d.jsx(GL,{children:"User queries and tool calls"})]})]})}),d.jsxs(Tu,{className:"space-y-3",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-sm text-slate-400",children:"Total Queries"}),d.jsx("span",{className:"text-white font-medium",children:e.managerMetrics.totalQueries})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-sm text-slate-400",children:"Avg Tokens/Query"}),d.jsx("span",{className:"text-white font-medium",children:R(e.managerMetrics.avgTokensPerQuery)})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-sm text-slate-400",children:"Avg Cost/Interaction"}),d.jsx("span",{className:"text-indigo-400 font-medium",children:e.managerMetrics.totalQueries>0?D(e.bySource.MANAGER.cost/e.managerMetrics.totalQueries):"$0.0000"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-sm text-slate-400",children:"Total Cost"}),d.jsx("span",{className:"text-indigo-400 font-medium",children:D(e.bySource.MANAGER.cost)})]}),d.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-700/50",children:[d.jsxs("div",{className:"flex justify-between text-xs text-slate-500 mb-1",children:[d.jsxs("span",{children:["Input: ",R(e.bySource.MANAGER.input)]}),d.jsxs("span",{children:["Output: ",R(e.bySource.MANAGER.output)]})]}),d.jsxs("div",{className:"h-2 bg-slate-800 rounded-full overflow-hidden flex",children:[d.jsx("div",{className:"bg-indigo-500 h-full",style:{width:`${e.bySource.MANAGER.input/(e.bySource.MANAGER.input+e.bySource.MANAGER.output+1)*100}%`}}),d.jsx("div",{className:"bg-indigo-300 h-full",style:{width:`${e.bySource.MANAGER.output/(e.bySource.MANAGER.input+e.bySource.MANAGER.output+1)*100}%`}})]})]})]})]}),d.jsxs(Ws,{className:"border-amber-500/30 bg-gradient-to-br from-slate-900/80 to-amber-950/20",children:[d.jsx(HL,{className:"pb-4",children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"p-2 rounded-lg bg-amber-500/20",children:d.jsx(ko,{className:"text-amber-400",size:24})}),d.jsxs("div",{children:[d.jsx(qL,{className:"text-base",children:"Hyperliquid Dealer"}),d.jsx(GL,{children:"Automated analysis cycles"})]})]})}),d.jsxs(Tu,{className:"space-y-3",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-sm text-slate-400",children:"Analysis Cycles"}),d.jsx("span",{className:"text-white font-medium",children:e.bySource.DEALER.count})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-sm text-slate-400",children:"Coins Analyzed"}),d.jsx("span",{className:"text-white font-medium",children:e.dealerMetrics.totalCoinsAnalyzed})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-sm text-slate-400",children:"Avg Cost/Cycle"}),d.jsx("span",{className:"text-amber-400 font-medium",children:e.bySource.DEALER.count>0?D(e.bySource.DEALER.cost/e.bySource.DEALER.count):"$0.0000"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-sm text-slate-400",children:"Avg Cost/Coin"}),d.jsx("span",{className:"text-amber-400 font-medium",children:e.dealerMetrics.totalCoinsAnalyzed>0?D(e.bySource.DEALER.cost/e.dealerMetrics.totalCoinsAnalyzed):"$0.0000"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-sm text-slate-400",children:"Total Cost"}),d.jsx("span",{className:"text-amber-400 font-medium",children:D(e.bySource.DEALER.cost)})]}),d.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-700/50",children:[d.jsxs("div",{className:"flex justify-between text-xs text-slate-500 mb-1",children:[d.jsxs("span",{children:["Input: ",R(e.bySource.DEALER.input)]}),d.jsxs("span",{children:["Output: ",R(e.bySource.DEALER.output)]})]}),d.jsxs("div",{className:"h-2 bg-slate-800 rounded-full overflow-hidden flex",children:[d.jsx("div",{className:"bg-amber-500 h-full",style:{width:`${e.bySource.DEALER.input/(e.bySource.DEALER.input+e.bySource.DEALER.output+1)*100}%`}}),d.jsx("div",{className:"bg-amber-300 h-full",style:{width:`${e.bySource.DEALER.output/(e.bySource.DEALER.input+e.bySource.DEALER.output+1)*100}%`}})]})]})]})]})]}),d.jsxs(Ws,{children:[d.jsxs("button",{onClick:()=>o(!s),className:"w-full p-4 flex items-center justify-between hover:bg-slate-800/50 rounded-xl transition-all",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(ik,{size:20,className:"text-slate-400"}),d.jsx("span",{className:"text-white font-medium",children:"Pricing Configuration"})]}),s?d.jsx(ch,{size:20,className:"text-slate-400"}):d.jsx(aa,{size:20,className:"text-slate-400"})]}),s&&d.jsxs(Tu,{className:"pt-0 border-t border-slate-700/50",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm text-slate-400 mb-2",children:"Input Price (per 1M tokens)"}),d.jsx(Ox,{type:"number",step:"0.01",value:g.inputPricePerMillion,onChange:B=>y(z=>({...z,inputPricePerMillion:parseFloat(B.target.value)||0})),className:"focus-visible:ring-[#E7FE55]/20 focus-visible:border-[#E7FE55]/30"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm text-slate-400 mb-2",children:"Output Price (per 1M tokens)"}),d.jsx(Ox,{type:"number",step:"0.01",value:g.outputPricePerMillion,onChange:B=>y(z=>({...z,outputPricePerMillion:parseFloat(B.target.value)||0})),className:"focus-visible:ring-[#E7FE55]/20 focus-visible:border-[#E7FE55]/30"})]})]}),d.jsx("div",{className:"mt-4 flex justify-end",children:d.jsx(Vi,{onClick:k,variant:"success",size:"sm",children:"Apply Pricing"})})]})]}),d.jsxs(Ws,{children:[d.jsxs("button",{onClick:()=>l(!a),className:"w-full p-4 flex items-center justify-between hover:bg-slate-800/50 rounded-xl transition-all",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx($l,{size:20,className:"text-slate-400"}),d.jsx("span",{className:"text-white font-medium",children:"Usage History"}),d.jsxs(nl,{variant:"secondary",children:[r.length," records"]})]}),a?d.jsx(ch,{size:20,className:"text-slate-400"}):d.jsx(aa,{size:20,className:"text-slate-400"})]}),a&&d.jsxs(Tu,{className:"pt-0 border-t border-slate-700/50",children:[d.jsxs("div",{className:"flex items-center gap-4 mt-4 mb-4",children:[d.jsx("div",{className:"flex bg-slate-800 rounded-lg p-1",children:["ALL","MANAGER","DEALER"].map(B=>d.jsx(Vi,{variant:h===B?"default":"ghost",size:"sm",onClick:()=>m(B),className:"text-xs",children:B},B))}),d.jsxs("select",{value:c,onChange:B=>u(parseInt(B.target.value)),className:"bg-slate-800 border border-slate-700 text-white rounded-lg px-3 py-1.5 text-xs",children:[d.jsx("option",{value:10,children:"10 records"}),d.jsx("option",{value:20,children:"20 records"}),d.jsx("option",{value:50,children:"50 records"})]})]}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full text-sm",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"text-slate-400 text-xs uppercase border-b border-slate-700",children:[d.jsx("th",{className:"text-left py-3 px-2",children:"Timestamp"}),d.jsx("th",{className:"text-left py-3 px-2",children:"Source"}),d.jsx("th",{className:"text-left py-3 px-2",children:"Operation"}),d.jsx("th",{className:"text-right py-3 px-2",children:"Input"}),d.jsx("th",{className:"text-right py-3 px-2",children:"Output"}),d.jsx("th",{className:"text-right py-3 px-2",children:"Cost"})]})}),d.jsxs("tbody",{children:[r.map(B=>d.jsxs("tr",{className:"border-b border-slate-800 hover:bg-slate-800/50",children:[d.jsx("td",{className:"py-2 px-2 text-slate-400 text-xs",children:O(B.timestamp)}),d.jsx("td",{className:"py-2 px-2",children:d.jsx(nl,{variant:B.source==="MANAGER"?"info":"warning",children:B.source})}),d.jsx("td",{className:"py-2 px-2 text-slate-300 text-xs",children:B.operation}),d.jsx("td",{className:"py-2 px-2 text-right text-slate-300",children:R(B.inputTokens)}),d.jsx("td",{className:"py-2 px-2 text-right text-slate-300",children:R(B.outputTokens)}),d.jsx("td",{className:"py-2 px-2 text-right text-amber-400 font-medium",children:D(B.inputTokens*v.inputPricePerMillion/1e6+B.outputTokens*v.outputPricePerMillion/1e6)})]},B.id)),r.length===0&&d.jsx("tr",{children:d.jsx("td",{colSpan:6,className:"py-8 text-center text-slate-500",children:"No usage records yet."})})]})]})})]})]})]}):d.jsx("div",{className:"flex items-center justify-center h-64",children:d.jsx(Mt.div,{className:"h-8 w-8 border-b-2 border-indigo-500 rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}})})},f0t=t=>{const e=t.match(/Market:\s*(.+?)(?:\s*\||$)/);return e?e[1].slice(0,30):null},h0t=({status:t,onToggle:e,vaultAddress:n,setActiveTab:r})=>{var $;const[i,s]=A.useState(0),[o,a]=A.useState([]),[l,c]=A.useState({totalPnl:0,winRate:0,totalVolume:0,tradesWithPnl:0}),[u,h]=A.useState(!1),{summary:m,isGenerating:g,cycleCount:y,lastUpdate:v,hasSummary:b}=cpe("polymarket"),[w,k]=A.useState(0),N=A.useMemo(()=>t.logs.filter(W=>W.type==="REASONING"||W.type==="SIGNAL").slice(0,20),[t.logs]),R=A.useMemo(()=>{var H,F,T;const W=new Map;for(const _ of N){const L=f0t(_.message)||((T=(F=(H=_.details)==null?void 0:H.context)==null?void 0:F.question)==null?void 0:T.slice(0,30));L&&!W.has(L)&&W.set(L,_)}return Array.from(W.entries()).sort((_,L)=>L[1].timestamp-_[1].timestamp).map(([_,L])=>({market:_,log:L}))},[N]);A.useEffect(()=>{R.length>0&&!t.isAnalyzing&&k(0)},[R.length,t.isAnalyzing]);const D=R[w];A.useEffect(()=>{if(t.operationHistory.length>0){let W=0,H=0,F=0,T=0;const _=[];let L=0;t.operationHistory.slice().reverse().forEach(K=>{const te=K.pnl||0;L+=te,W+=te,T+=K.sizeUSDC,te>0?H++:te<0&&F++,_.push({time:K.timestamp,date:new Date(K.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),pnl:L})});const V=H+F;c({totalPnl:W,winRate:V>0?H/V*100:0,totalVolume:T,tradesWithPnl:V}),a(_)}},[t.operationHistory]),A.useEffect(()=>{if(!n)return;const W=async()=>{try{const F=await os.getBalance();s(F)}catch(F){console.error("Failed to fetch Polymarket balance",F)}};W();const H=setInterval(W,6e4);return()=>clearInterval(H)},[n]);const O=()=>{n&&e(!t.isOn)},B=A.useMemo(()=>t.activePositions.reduce((W,H)=>W+H.unrealizedPnl,0),[t.activePositions]),z=()=>{k(W=>Math.min(R.length-1,W+1))},U=()=>{k(W=>Math.max(0,W-1))};return n?d.jsxs("div",{className:"flex flex-col h-full gap-4 overflow-y-auto custom-scrollbar pb-4",children:[d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 shrink-0",children:[d.jsxs("div",{className:"lg:col-span-2 flex flex-col gap-4",children:[d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[d.jsx("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs("div",{className:`px-3 py-1.5 rounded border flex items-center gap-2 transition-all ${t.isOn?"bg-[#E7FE55]/10 border-[#E7FE55]/30":"bg-[#1a1b21] border-[#232328]"}`,children:[d.jsxs("span",{className:"relative flex h-2 w-2",children:[t.isOn&&d.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-[#E7FE55] opacity-75"}),d.jsx("span",{className:`relative inline-flex rounded-full h-2 w-2 ${t.isOn?"bg-[#E7FE55]":"bg-red-500"}`})]}),d.jsx("span",{className:`font-semibold tracking-wider text-[10px] uppercase ${t.isOn?"text-[#E7FE55]":"text-[#747580]"}`,children:t.isOn?"ACTIVE":"OFFLINE"})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-[9px] font-medium text-[#747580] uppercase tracking-[0.1em]",children:"Master"}),d.jsx("button",{onClick:O,className:`relative inline-flex h-5 w-9 items-center rounded-full transition-all focus:outline-none ${t.isOn?"bg-[#E7FE55]":"bg-[#232328] hover:bg-[#2a2b30]"}`,children:d.jsx("span",{className:`${t.isOn?"translate-x-5":"translate-x-1"} inline-block h-3 w-3 transform rounded-full bg-black transition-transform`})})]})]})}),d.jsxs("div",{className:"glass-panel p-4 rounded",children:[d.jsx("div",{className:"text-[10px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Total Profit"}),d.jsxs("div",{className:`text-xl font-semibold font-mono tracking-tight ${l.totalPnl>=0?"text-[#34d399]":"text-red-400"}`,children:[l.totalPnl>=0?"+":"",l.totalPnl.toFixed(2)," USD"]})]}),d.jsxs("div",{className:"glass-panel p-4 rounded",children:[d.jsx("div",{className:"text-[10px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Unrealized PnL"}),d.jsxs("div",{className:`text-xl font-semibold font-mono tracking-tight ${B>=0?"text-[#34d399]":"text-red-400"}`,children:[B>=0?"+":"",B.toFixed(2)," USD"]})]}),d.jsxs("div",{className:"glass-panel p-4 rounded",children:[d.jsx("div",{className:"text-[10px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Win Rate"}),d.jsxs("div",{className:"text-xl font-semibold text-white font-mono tracking-tight",children:[l.winRate.toFixed(1),"%"]})]})]}),d.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[d.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Exposure"}),d.jsxs("span",{className:"text-white font-mono text-sm font-semibold",children:["$",t.currentExposure.toLocaleString()]})]}),d.jsx(cd,{className:"h-4 w-4 text-[#747580]"})]}),d.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Categories"}),d.jsx("span",{className:"text-white font-mono text-sm font-semibold",children:t.settings.allowedCategories.length})]}),d.jsx(_w,{className:"h-4 w-4 text-[#747580]"})]}),d.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Interval"}),d.jsxs("span",{className:"text-white font-mono text-sm font-semibold",children:[t.settings.checkIntervalSeconds,"s"]})]}),d.jsx(Hi,{className:"h-4 w-4 text-[#747580]"})]}),d.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Max Position"}),d.jsxs("span",{className:"text-white font-mono text-sm font-semibold",children:["$",t.settings.maxPositionSizeUSDC]})]}),d.jsx(V1,{className:"h-4 w-4 text-[#747580]"})]})]}),d.jsxs("div",{className:"glass-panel p-5 rounded min-h-[220px] flex flex-col flex-1",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[d.jsx(yn,{className:"h-4 w-4 text-[#E7FE55]"}),d.jsx("span",{className:"text-sm font-semibold text-white",children:"Performance Curve"})]}),d.jsx("div",{className:"flex-1 w-full",children:o.length>0?d.jsx(Zw,{width:"100%",height:"100%",minWidth:100,minHeight:100,children:d.jsxs(tfe,{data:o,children:[d.jsx("defs",{children:d.jsxs("linearGradient",{id:"colorPnlPoly",x1:"0",y1:"0",x2:"0",y2:"1",children:[d.jsx("stop",{offset:"5%",stopColor:"#E7FE55",stopOpacity:.2}),d.jsx("stop",{offset:"95%",stopColor:"#E7FE55",stopOpacity:0})]})}),d.jsx(d1,{strokeDasharray:"3 3",stroke:"#232328",vertical:!1}),d.jsx(h1,{dataKey:"date",stroke:"#747580",fontSize:10,tickLine:!1,axisLine:!1}),d.jsx(p1,{stroke:"#747580",fontSize:10,tickLine:!1,axisLine:!1,tickFormatter:W=>`$${W}`}),d.jsx(c2,{contentStyle:{backgroundColor:"#14151a",borderColor:"#232328",borderRadius:"4px"},itemStyle:{color:"#E7FE55"},formatter:W=>[`$${W.toFixed(2)}`,"Net PnL"]}),d.jsx($C,{type:"monotone",dataKey:"pnl",stroke:"#E7FE55",strokeWidth:1.5,fillOpacity:1,fill:"url(#colorPnlPoly)"})]})}):d.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-[#747580]",children:[d.jsx(Ml,{className:"h-8 w-8 mb-2 opacity-40"}),d.jsx("span",{className:"text-[11px]",children:"No performance data yet"})]})})]})]}),d.jsxs("div",{className:"glass-panel p-5 rounded flex flex-col",children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(To,{className:`h-4 w-4 shrink-0 ${t.isAnalyzing?"text-[#E7FE55] animate-pulse":"text-[#E7FE55]/60"}`}),d.jsxs("div",{className:"flex items-center bg-[#0f1015] rounded-full p-0.5 border border-[#232328]",children:[d.jsx("button",{onClick:()=>h(!1),className:`px-2 py-0.5 rounded-full text-[9px] font-semibold uppercase tracking-wider transition-all ${u?"text-[#747580] hover:text-white":"bg-[#E7FE55] text-black"}`,children:"Live"}),d.jsx("button",{onClick:()=>b&&h(!0),disabled:!b,className:`px-2 py-0.5 rounded-full text-[9px] font-semibold uppercase tracking-wider transition-all ${u?"bg-[#E7FE55] text-black":b?"text-[#747580] hover:text-white":"text-[#3a3b42] cursor-not-allowed"}`,title:b?"View AI Summary":`Available after ${2-y} more cycles`,children:"Summary"})]}),t.isAnalyzing&&!u&&d.jsx("span",{className:"px-2 py-0.5 rounded bg-[#E7FE55]/15 text-[#E7FE55] text-[9px] font-semibold uppercase tracking-wider animate-pulse",children:"LIVE"})]}),!t.isAnalyzing&&R.length>0&&!u&&d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{onClick:z,disabled:w>=R.length-1,className:`p-1 rounded transition-colors ${w>=R.length-1?"text-[#3a3b42] cursor-not-allowed":"text-[#747580] hover:text-white hover:bg-[#1a1b21]"}`,title:"Previous market",children:d.jsx(Iw,{size:16})}),d.jsxs("span",{className:"text-[10px] text-[#747580] font-mono min-w-[32px] text-center",children:[w+1,"/",R.length]}),d.jsx("button",{onClick:U,disabled:w<=0,className:`p-1 rounded transition-colors ${w<=0?"text-[#3a3b42] cursor-not-allowed":"text-[#747580] hover:text-white hover:bg-[#1a1b21]"}`,title:"Next market",children:d.jsx(Xa,{size:16})})]})]}),u?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs("span",{className:"px-2 py-0.5 rounded bg-[#E7FE55]/15 text-[#E7FE55] text-[9px] font-semibold uppercase tracking-wider",children:[y," cycles"]}),g&&d.jsx("span",{className:"text-[10px] text-[#747580] animate-pulse",children:"generating..."})]}),v>0&&d.jsx("span",{className:"text-[10px] text-[#747580] font-mono",children:new Date(v).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),d.jsx("div",{className:"flex-1 bg-[#0f1015] rounded p-3 border border-[#232328] overflow-y-auto custom-scrollbar min-h-0 mb-3",children:m?d.jsx("p",{className:"text-[13px] text-[#a0a1a8] leading-relaxed whitespace-pre-wrap",children:m}):d.jsx("p",{className:"text-[13px] text-[#747580] italic",children:"Summary will be generated after 2+ analysis cycles..."})})]}):t.isAnalyzing?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"flex items-center justify-between mb-3",children:d.jsx("span",{className:`px-2 py-0.5 rounded text-[9px] font-semibold uppercase tracking-wider ${t.currentSignal==="BULLISH"?"bg-[#34d399]/15 text-[#34d399]":t.currentSignal==="BEARISH"?"bg-red-500/15 text-red-400":"bg-[#1a1b21] text-[#747580]"}`,children:t.currentSignal||"ANALYZING"})}),d.jsx("div",{className:"flex-1 bg-[#0f1015] rounded p-3 border border-[#232328] overflow-y-auto custom-scrollbar min-h-0 mb-3",children:d.jsxs("p",{className:"text-[13px] text-[#a0a1a8] italic leading-relaxed",children:['"',t.statusDetail||t.statusMessage,'"']})})]}):D?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"flex items-center justify-between mb-3",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"px-2 py-1 rounded bg-[#E7FE55]/15 text-[#E7FE55] text-xs font-semibold uppercase tracking-wider truncate max-w-[150px]",children:D.market}),d.jsx("span",{className:"text-[10px] text-[#747580] font-mono",children:new Date(D.log.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})}),d.jsx("div",{className:"flex-1 bg-[#0f1015] rounded p-3 border border-[#232328] overflow-y-auto custom-scrollbar min-h-0 mb-3",children:d.jsxs("p",{className:"text-[13px] text-[#a0a1a8] italic leading-relaxed whitespace-pre-wrap",children:['"',(($=D.log.details)==null?void 0:$.fullReason)||D.log.message,'"']})})]}):d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"flex items-center justify-between mb-3",children:d.jsx("span",{className:`px-2 py-0.5 rounded text-[9px] font-semibold uppercase tracking-wider ${t.currentSignal==="BULLISH"?"bg-[#34d399]/15 text-[#34d399]":t.currentSignal==="BEARISH"?"bg-red-500/15 text-red-400":"bg-[#1a1b21] text-[#747580]"}`,children:t.currentSignal||"NEUTRAL"})}),d.jsx("div",{className:"flex-1 bg-[#0f1015] rounded p-3 border border-[#232328] overflow-y-auto custom-scrollbar min-h-0 mb-3",children:d.jsxs("p",{className:"text-[13px] text-[#a0a1a8] italic leading-relaxed",children:['"',t.statusMessage||"Waiting for analysis...",'"']})})]}),d.jsxs("div",{className:"pt-3 border-t border-[#232328] flex flex-col gap-2 shrink-0",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.05em] w-12 shrink-0",children:"Task"}),d.jsx("div",{className:"text-[10px] text-white truncate font-mono flex-1",children:t.currentTask||" Idle"})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.05em] w-12 shrink-0",children:"Status"}),d.jsx("div",{className:"text-[10px] text-[#a0a1a8] font-mono truncate flex-1",children:t.statusMessage})]}),t.statusDetail&&d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.05em] w-12 shrink-0",children:"Info"}),d.jsx("div",{className:"text-[10px] text-[#E7FE55] truncate flex-1",children:t.statusDetail})]})]})]})]}),d.jsxs("div",{className:"glass-panel p-5 rounded shrink-0",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Zg,{className:"h-4 w-4 text-[#E7FE55]"}),d.jsx("span",{className:"text-sm font-semibold text-white",children:"Active Positions"})]}),d.jsxs("span",{className:"text-[10px] text-[#747580]",children:[t.activePositions.length," / ",t.settings.maxOpenPositions]})]}),t.activePositions.length>0?d.jsx("div",{className:"overflow-auto max-h-[200px] custom-scrollbar",children:d.jsxs("table",{className:"w-full text-xs",children:[d.jsx("thead",{className:"text-[#747580] text-left sticky top-0 bg-[#14151a]",children:d.jsxs("tr",{children:[d.jsx("th",{className:"pb-2 font-medium",children:"Market"}),d.jsx("th",{className:"pb-2 font-medium",children:"Side"}),d.jsx("th",{className:"pb-2 font-medium text-right",children:"Shares"}),d.jsx("th",{className:"pb-2 font-medium text-right",children:"Avg Price"}),d.jsx("th",{className:"pb-2 font-medium text-right",children:"Current"}),d.jsx("th",{className:"pb-2 font-medium text-right",children:"PnL"})]})}),d.jsx("tbody",{className:"text-[#a0a1a8]",children:t.activePositions.map((W,H)=>d.jsxs("tr",{className:"border-t border-[#232328] hover:bg-[#1a1b21]",children:[d.jsxs("td",{className:"py-2 max-w-[200px] truncate",title:W.question,children:[W.question.slice(0,40),"..."]}),d.jsx("td",{className:`py-2 font-medium ${W.outcome==="YES"?"text-[#34d399]":"text-red-400"}`,children:W.outcome}),d.jsx("td",{className:"py-2 text-right font-mono",children:W.shares.toFixed(2)}),d.jsxs("td",{className:"py-2 text-right font-mono",children:[(W.avgPrice*100).toFixed(1),""]}),d.jsxs("td",{className:"py-2 text-right font-mono",children:[(W.currentPrice*100).toFixed(1),""]}),d.jsxs("td",{className:`py-2 text-right font-mono ${W.unrealizedPnl>=0?"text-[#34d399]":"text-red-400"}`,children:[W.unrealizedPnl>=0?"+":"","$",W.unrealizedPnl.toFixed(2)]})]},H))})]})}):d.jsxs("div",{className:"h-24 flex flex-col items-center justify-center text-[#747580] gap-2 bg-[#0f1015] rounded border border-[#232328]",children:[d.jsx(fh,{className:"h-6 w-6 opacity-40"}),d.jsx("span",{className:"text-[11px]",children:"No active positions"})]})]})]}):d.jsx("div",{className:"flex flex-col h-full items-center justify-center",children:d.jsxs("div",{className:"max-w-md w-full mx-auto space-y-6 p-8 text-center",children:[d.jsx("div",{className:"w-16 h-16 bg-[#1a1b21] rounded-full flex items-center justify-center mx-auto mb-4 border border-[#232328]",children:d.jsx(fh,{size:32,className:"text-[#E7FE55]"})}),d.jsx("h2",{className:"text-xl font-semibold text-white tracking-tight",children:"Polymarket Vault Required"}),d.jsxs("p",{className:"text-[#747580] text-sm",children:["To use the Polymarket Dealer, you need to create a ",d.jsx("span",{className:"text-[#E7FE55]",children:"Polymarket Vault"})," first."]}),d.jsx("button",{onClick:()=>r(we.VAULT),className:"mt-4 px-6 py-3 bg-[#E7FE55] hover:bg-[#d4eb4d] text-black font-bold rounded-xl transition-all",children:"Go to Vault Operator"})]})})},p0t=({settings:t,onUpdateSettings:e,onApplyChanges:n,isOn:r=!1,onToggle:i})=>{const[s,o]=A.useState(t),[a,l]=A.useState(!1);A.useEffect(()=>{o(t)},[t]),A.useEffect(()=>{l(JSON.stringify(s)!==JSON.stringify(t))},[s,t]);const c=y=>{o(v=>({...v,...y}))},u=()=>{e(s),n()},h=()=>{o(t),l(!1)},m=y=>{if(y==="custom")return;const v=ow[y];v&&c({selectedPreset:y,allowedCategories:v.categories})},g=y=>{const v=s.allowedCategories,b=v.includes(y)?v.filter(w=>w!==y):[...v,y];c({allowedCategories:b})};return d.jsx("div",{className:"h-full flex flex-col gap-4 overflow-y-auto custom-scrollbar",children:d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[d.jsxs("div",{className:"flex flex-col gap-4",children:[d.jsx("div",{className:"glass-panel p-4 rounded",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:`h-10 w-10 rounded flex items-center justify-center ${r?"bg-[#E7FE55]/15 text-[#E7FE55]":"bg-[#1a1b21] text-[#747580]"}`,children:d.jsx(ko,{className:"h-5 w-5"})}),d.jsxs("div",{children:[d.jsx("span",{className:"block text-sm font-semibold text-white",children:"Engine Status"}),d.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5",children:[d.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${r?"bg-[#E7FE55] animate-pulse":"bg-[#747580]"}`}),d.jsx("span",{className:"text-[10px] text-[#747580] font-medium uppercase tracking-wider",children:r?"Active & Running":"Stopped"})]})]})]}),d.jsxs("div",{className:"flex items-center gap-3",children:[i&&d.jsx("button",{onClick:()=>i(!r),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none ${r?"bg-[#E7FE55]":"bg-[#3a3b42]"}`,children:d.jsx("span",{className:`${r?"translate-x-6":"translate-x-1"} inline-block h-4 w-4 transform rounded-full bg-black transition-transform shadow`})}),a&&d.jsxs("button",{onClick:h,className:"flex items-center gap-2 bg-[#1a1b21] hover:bg-[#232328] text-[#747580] px-3 py-1.5 rounded text-[10px] font-semibold uppercase tracking-wider transition-all",children:[d.jsx(hx,{className:"h-3 w-3"})," Reset"]}),d.jsxs("button",{onClick:u,disabled:!a,className:`flex items-center gap-2 px-3 py-1.5 rounded text-[10px] font-semibold uppercase tracking-wider transition-all active:scale-95
                                        ${a?"bg-[#E7FE55] hover:bg-[#d4e94d] text-black":"bg-[#1a1b21] text-[#747580] cursor-not-allowed opacity-50"}`,children:[d.jsx($l,{className:"h-3 w-3"})," Apply"]})]})]})}),d.jsxs("div",{className:"glass-panel p-4 rounded",children:[d.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[#E7FE55] font-bold uppercase tracking-wide mb-3",children:[d.jsx(Ow,{className:"h-3.5 w-3.5"})," Strategy Preset"]}),d.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(ow).filter(([y])=>y!=="custom").map(([y,v])=>d.jsxs("button",{onClick:()=>m(y),className:`p-3 rounded border text-left transition-all ${s.selectedPreset===y?"border-[#E7FE55] bg-[#E7FE55]/10":"border-[#232328] hover:border-[#747580] bg-[#0f1015]"}`,children:[d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsx("span",{className:"text-sm",children:v.emoji}),d.jsx("span",{className:"text-[11px] font-semibold text-white",children:v.name})]}),d.jsx("p",{className:"text-[10px] text-[#747580] leading-relaxed",children:v.description})]},y))})]}),d.jsxs("div",{className:"glass-panel p-4 rounded",children:[d.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[#E7FE55] font-bold uppercase tracking-wide mb-3",children:[d.jsx(V1,{className:"h-3.5 w-3.5"})," Capital & Risk"]}),d.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[d.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[d.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1.5",children:"Type"}),d.jsxs("div",{className:"flex gap-0.5",children:[d.jsx("button",{onClick:()=>c({bankrollType:"MANUAL"}),className:`flex-1 py-1 text-[9px] font-semibold rounded transition-all ${s.bankrollType==="MANUAL"?"bg-[#60a5fa] text-white":"text-[#747580] hover:text-white"}`,children:"Fix"}),d.jsx("button",{onClick:()=>c({bankrollType:"ALL_AVAILABLE"}),className:`flex-1 py-1 text-[9px] font-semibold rounded transition-all ${s.bankrollType==="ALL_AVAILABLE"?"bg-[#34d399] text-white":"text-[#747580] hover:text-white"}`,children:"Max"})]})]}),d.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[d.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1.5",children:"Amount ($)"}),s.bankrollType==="MANUAL"?d.jsx("input",{type:"number",value:s.manualBankroll,onChange:y=>c({manualBankroll:parseFloat(y.target.value)||0}),className:"w-full bg-transparent text-sm font-mono text-white focus:outline-none"}):d.jsx("span",{className:"text-sm font-mono text-[#34d399]",children:"Auto"})]}),d.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[d.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1.5",children:"Max Pos ($)"}),d.jsx("input",{type:"number",value:s.maxPositionSizeUSDC,onChange:y=>c({maxPositionSizeUSDC:parseInt(y.target.value)||0}),className:"w-full bg-transparent text-sm font-mono text-white focus:outline-none"})]}),d.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[d.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1.5",children:"Max Open"}),d.jsx("input",{type:"number",value:s.maxOpenPositions,onChange:y=>c({maxOpenPositions:parseInt(y.target.value)||1}),className:"w-full bg-transparent text-sm font-mono text-white focus:outline-none"})]})]})]}),d.jsxs("div",{className:"glass-panel p-4 rounded",children:[d.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[#E7FE55] font-bold uppercase tracking-wide mb-3",children:[d.jsx(Hi,{className:"h-3.5 w-3.5"})," Analysis Settings"]}),d.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[d.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[d.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1.5",children:"Interval"}),d.jsxs("div",{className:"flex items-baseline gap-1",children:[d.jsx("input",{type:"number",value:s.checkIntervalSeconds,onChange:y=>c({checkIntervalSeconds:Math.max(60,parseInt(y.target.value)||60)}),className:"w-full bg-transparent text-sm font-mono text-white focus:outline-none"}),d.jsx("span",{className:"text-[10px] text-[#747580]",children:"s"})]})]}),d.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[d.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1.5",children:"Min Volume"}),d.jsxs("div",{className:"flex items-center",children:[d.jsx("span",{className:"text-[10px] text-[#747580] mr-1",children:"$"}),d.jsx("input",{type:"number",value:s.minVolumeThreshold,onChange:y=>c({minVolumeThreshold:parseInt(y.target.value)||0}),className:"w-full bg-transparent text-sm font-mono text-white focus:outline-none"})]})]}),d.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[d.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1.5",children:"Min Liquidity"}),d.jsxs("div",{className:"flex items-center",children:[d.jsx("span",{className:"text-[10px] text-[#747580] mr-1",children:"$"}),d.jsx("input",{type:"number",value:s.minLiquidityThreshold,onChange:y=>c({minLiquidityThreshold:parseInt(y.target.value)||0}),className:"w-full bg-transparent text-sm font-mono text-white focus:outline-none"})]})]})]})]})]}),d.jsxs("div",{className:"flex flex-col gap-4",children:[d.jsxs("div",{className:"glass-panel p-4 rounded",children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[#E7FE55] font-bold uppercase tracking-wide",children:[d.jsx(Qne,{className:"h-3.5 w-3.5"})," Market Categories"]}),d.jsx("span",{className:"text-[10px] bg-[#E7FE55]/15 text-[#E7FE55] px-2 py-0.5 rounded border border-[#E7FE55]/30 font-mono",children:s.allowedCategories.length})]}),d.jsx("div",{className:"flex flex-wrap gap-2",children:Dwe.map(y=>d.jsxs("button",{onClick:()=>g(y.value),className:`px-3 py-1.5 rounded-full text-xs flex items-center gap-1.5 transition-all ${s.allowedCategories.includes(y.value)?"bg-[#E7FE55]/20 text-[#E7FE55] border border-[#E7FE55]/50":"bg-[#0f1015] text-[#747580] border border-[#232328] hover:border-[#747580]"}`,children:[d.jsx("span",{children:y.icon}),y.label]},y.value))})]}),d.jsxs("div",{className:"glass-panel p-4 rounded",children:[d.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[#E7FE55] font-bold uppercase tracking-wide mb-3",children:[d.jsx(yn,{className:"h-3.5 w-3.5"})," Market Filters"]}),d.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[d.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[d.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1.5",children:"Spread Edge"}),d.jsx("div",{className:"flex items-baseline gap-1",children:d.jsx("input",{type:"number",step:"0.01",value:s.minSpreadThreshold||.02,onChange:y=>c({minSpreadThreshold:parseFloat(y.target.value)||.02}),className:"w-full bg-transparent text-sm font-mono text-white focus:outline-none"})})]}),d.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[d.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1.5",children:"Confidence"}),d.jsx("div",{className:"flex items-baseline gap-1",children:d.jsx("input",{type:"number",step:"0.05",min:"0",max:"1",value:s.confidenceThreshold||.6,onChange:y=>c({confidenceThreshold:parseFloat(y.target.value)||.6}),className:"w-full bg-transparent text-sm font-mono text-white focus:outline-none"})})]})]})]}),d.jsxs("div",{className:"glass-panel p-4 rounded flex items-start gap-3",children:[d.jsx(b8,{className:"h-4 w-4 text-[#E7FE55] shrink-0 mt-0.5"}),d.jsx("div",{children:d.jsxs("p",{className:"text-[10px] text-[#747580] leading-relaxed",children:[d.jsx("strong",{className:"text-[#a0a1a8]",children:"Polymarket Data:"})," Market data is fetched via the CLOB API. Categories filter which markets are analyzed. Higher confidence = fewer but more certain trades."]})})]})]})]})})},m0t=({settings:t,onUpdateSettings:e,onApplyChanges:n})=>{var v,b;const[r,i]=A.useState(t.strategyPrompt),[s,o]=A.useState(!1),[a,l]=A.useState(t.promptMode||"preset"),[c,u]=A.useState(t.selectedPreset||"balanced");A.useEffect(()=>{i(t.strategyPrompt),l(t.promptMode||"preset"),u(t.selectedPreset||"balanced")},[t.strategyPrompt,t.promptMode,t.selectedPreset]),A.useEffect(()=>{o(r!==t.strategyPrompt)},[r,t.strategyPrompt]);const h=w=>{if(w==="custom")l("custom"),u("custom"),o(!0);else{const k=WT[w];i(k),l("preset"),u(w),o(k!==t.strategyPrompt)}},m=w=>{i(w);const k=Object.entries(WT).find(([N,R])=>R===w);k?(l("preset"),u(k[0])):(l("custom"),u("custom")),o(w!==t.strategyPrompt)},g=()=>{e({strategyPrompt:r,promptMode:a,selectedPreset:c}),n(),o(!1)},y=w=>`
            flex items-center gap-1.5 px-3 py-1.5 rounded text-[10px] font-semibold uppercase tracking-[0.08em] transition-all
            ${c===w&&a==="preset"||a==="custom"&&w==="custom"?"bg-[#E7FE55] text-black":"bg-transparent text-[#747580] hover:text-[#a0a1a8] hover:bg-[#1a1b21]"}
        `;return d.jsxs("div",{className:"h-full flex flex-col gap-4 overflow-hidden",children:[d.jsx("div",{className:"glass-panel p-4 shrink-0",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Ow,{className:"h-4 w-4 text-[#E7FE55]"}),d.jsx("span",{className:"text-sm font-semibold text-white",children:"Strategy Prompt"})]}),d.jsxs("div",{className:`
                            inline-flex items-center gap-1.5 px-2 py-0.5 rounded text-[9px] font-semibold uppercase tracking-wider
                            ${a==="preset"?"bg-[#E7FE55]/10 text-[#E7FE55]":"bg-[#1a1b21] text-[#747580]"}
                        `,children:[d.jsx("span",{className:`h-1 w-1 rounded-full ${a==="preset"?"bg-[#E7FE55]":"bg-[#747580]"}`}),a==="preset"?`${(v=ow[c])==null?void 0:v.emoji} ${(b=ow[c])==null?void 0:b.name}`:"Custom"]}),s&&d.jsx("span",{className:"text-[9px] text-amber-500 uppercase tracking-wider font-medium",children:" Unsaved"})]}),d.jsxs("button",{onClick:g,disabled:!s,className:`
                            flex items-center gap-2 px-4 py-1.5 rounded text-[10px] font-semibold uppercase tracking-wider transition-all
                            ${s?"bg-[#E7FE55] hover:bg-[#f0ff7a] text-black":"bg-[#1a1b21] text-[#3a3b42] cursor-not-allowed"}
                        `,children:[d.jsx(T8,{className:"h-3.5 w-3.5"}),"Save"]})]})}),d.jsxs("div",{className:"flex-1 flex gap-4 min-h-0 overflow-hidden",children:[d.jsxs("div",{className:"w-40 shrink-0 flex flex-col gap-2",children:[d.jsxs("div",{className:"flex items-center gap-1.5 px-1 py-2",children:[d.jsx(nre,{size:12,className:"text-[#E7FE55]"}),d.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] font-semibold",children:"Presets"})]}),d.jsxs("div",{className:"flex flex-col gap-1",children:[Object.entries(ow).filter(([w])=>w!=="custom").map(([w,k])=>d.jsxs("button",{onClick:()=>h(w),className:y(w),children:[d.jsx("span",{children:k.emoji}),d.jsx("span",{children:k.name})]},w)),d.jsx("div",{className:"h-px bg-[#232328] my-2"}),d.jsxs("button",{onClick:()=>h("custom"),className:y("custom"),children:[d.jsx("span",{children:""}),d.jsx("span",{children:"Custom"})]})]}),d.jsx("div",{className:"mt-auto pt-4 px-1",children:d.jsx("p",{className:"text-[10px] text-[#3a3b42] leading-relaxed",children:"Edit the prompt to switch to custom mode automatically."})})]}),d.jsxs("div",{className:"flex-1 glass-panel relative overflow-hidden flex flex-col",children:[d.jsx("div",{className:"absolute inset-x-0 top-0 h-6 bg-gradient-to-b from-[#1e2028] to-transparent pointer-events-none z-10"}),d.jsx("textarea",{value:r,onChange:w=>m(w.target.value),className:"w-full h-full bg-transparent text-[#a0a1a8] font-mono text-[13px] p-5 resize-none focus:outline-none leading-relaxed custom-scrollbar selection:bg-[#E7FE55]/30",spellCheck:!1,placeholder:`// Define your prediction market strategy here...
// 
// Example:
// You are a probability analyst focusing on mispriced markets.
// 1. Look for markets with high volume and clear catalysts.
// 2. Prioritize events with upcoming resolution dates.
// 3. Consider news sentiment and expert opinions.`}),d.jsx("div",{className:"absolute inset-x-0 bottom-0 h-6 bg-gradient-to-t from-[#1e2028] to-transparent pointer-events-none z-10"}),d.jsxs("div",{className:"absolute bottom-3 right-3 flex items-center gap-2 opacity-50 hover:opacity-100 transition-opacity",children:[d.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-[#E7FE55]"}),d.jsx("span",{className:"text-[9px] text-[#747580] font-mono uppercase tracking-wider",children:"Live Context"})]})]})]})]})},g0t=({logs:t,onClearLogs:e})=>{const[n,r]=A.useState(null),i=t.filter(a=>{if(["REASONING","SIGNAL","TRADE","ERROR"].includes(a.type))return!0;if(["INFO","WARNING"].includes(a.type)){const l=a.message.toLowerCase();return l.includes("executing")||l.includes("skipping")||l.includes("ignored")||l.includes("position")}return!1}),s=(a,l)=>a==="ERROR"?d.jsx("div",{className:"text-red-400",children:d.jsx(j3,{size:16})}):a==="TRADE"?d.jsx("div",{className:"text-[#34d399]",children:d.jsx(ld,{size:16})}):l.includes("YES")||l.includes("BULLISH")?d.jsx("div",{className:"text-[#34d399]",children:d.jsx(yn,{size:16})}):l.includes("NO")||l.includes("BEARISH")?d.jsx("div",{className:"text-red-400",children:d.jsx(vm,{size:16})}):d.jsx("div",{className:"text-[#E7FE55]",children:d.jsx(To,{size:16})}),o=a=>new Date(a).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"});return d.jsxs("div",{className:"flex flex-col h-full overflow-hidden",children:[d.jsxs("div",{className:"p-4 border-b border-[#232328] flex justify-between items-center shrink-0",children:[d.jsxs("h3",{className:"text-sm font-semibold flex items-center gap-2 text-white",children:[d.jsx(To,{className:"h-4 w-4 text-[#E7FE55]"}),"AI Reasoning Log"]}),d.jsx("button",{onClick:e,className:"text-[10px] text-[#747580] hover:text-white transition-colors uppercase tracking-wider",children:"Clear History"})]}),d.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar",children:i.length===0?d.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-[#747580] opacity-50 py-12",children:[d.jsx(To,{size:48,className:"mb-4 opacity-30"}),d.jsx("p",{className:"text-sm",children:"No analysis recorded yet."}),d.jsx("p",{className:"text-[10px] text-[#747580]",children:"Start the dealer to see its thought process."})]}):i.map(a=>{var h,m;const l=n===a.id,c=(h=a.details)==null?void 0:h.context,u=(m=a.details)==null?void 0:m.context;return d.jsxs("div",{className:"relative pl-6 pb-2 border-l border-[#232328] last:border-0 transition-colors group",children:[d.jsx("div",{className:"absolute -left-[5px] top-1 w-2.5 h-2.5 rounded-full bg-[#14151a] border border-[#232328] group-hover:border-[#747580] transition-colors"}),d.jsxs("div",{className:"bg-[#14151a] p-3 rounded border border-[#232328] hover:border-[#3a3b42] transition-all",children:[d.jsxs("div",{className:"flex items-center justify-between mb-1",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[s(a.type,a.message),d.jsx("span",{className:`text-[10px] font-semibold uppercase tracking-wider ${a.type==="ERROR"?"text-red-400":a.type==="TRADE"?"text-[#34d399]":a.type==="SIGNAL"?"text-[#E7FE55]":"text-[#a0a1a8]"}`,children:a.type})]}),d.jsxs("span",{className:"text-[10px] text-[#747580] flex items-center gap-1 font-mono",children:[d.jsx(Hi,{size:10}),o(a.timestamp)]})]}),d.jsx("p",{className:"text-sm text-[#a0a1a8] leading-relaxed",children:a.message}),a.details&&a.details.fullReason&&d.jsxs("div",{className:"mt-2 p-2 bg-[#0f1015] rounded text-[11px] text-[#747580] font-mono italic border-l-2 border-[#E7FE55]/30 whitespace-pre-wrap",children:['"',typeof a.details.fullReason=="string"?a.details.fullReason:JSON.stringify(a.details.fullReason),'"']}),c&&d.jsxs("button",{onClick:()=>r(l?null:a.id),className:"mt-2 flex items-center gap-1 text-[10px] text-[#E7FE55] hover:text-[#d4eb4d] transition-colors uppercase tracking-wider",children:[l?d.jsx(ch,{size:12}):d.jsx(aa,{size:12}),l?"Hide":"Show"," Market Context"]}),l&&c&&d.jsxs("div",{className:"mt-3 p-3 bg-[#0f1015] rounded border border-[#232328] space-y-3",children:[u.question&&d.jsxs("div",{className:"text-[10px] text-[#747580]",children:["Market: ",d.jsxs("span",{className:"text-white",children:[u.question.slice(0,100),u.question.length>100?"...":""]})]}),(u.volume24h||u.liquidity)&&d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-[#34d399] mb-2 uppercase tracking-wider font-semibold",children:[d.jsx(V1,{size:10}),d.jsx("span",{children:"Market Metrics"})]}),d.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[u.volume24h&&d.jsxs("div",{className:"bg-[#34d399]/10 border border-[#34d399]/20 px-2 py-1 rounded text-[10px]",children:[d.jsx("span",{className:"text-[#34d399] uppercase font-medium",children:"Volume 24h"}),d.jsxs("span",{className:"text-[#4ade80] font-mono ml-2",children:["$",u.volume24h.toLocaleString()]})]}),u.liquidity&&d.jsxs("div",{className:"bg-[#34d399]/10 border border-[#34d399]/20 px-2 py-1 rounded text-[10px]",children:[d.jsx("span",{className:"text-[#34d399] uppercase font-medium",children:"Liquidity"}),d.jsxs("span",{className:"text-[#4ade80] font-mono ml-2",children:["$",u.liquidity.toLocaleString()]})]}),u.spread&&d.jsxs("div",{className:"bg-[#34d399]/10 border border-[#34d399]/20 px-2 py-1 rounded text-[10px]",children:[d.jsx("span",{className:"text-[#34d399] uppercase font-medium",children:"Spread"}),d.jsxs("span",{className:"text-[#4ade80] font-mono ml-2",children:[(u.spread*100).toFixed(2),"%"]})]})]})]}),(u.yesPrice||u.noPrice)&&d.jsxs("div",{className:"text-[10px] text-[#747580]",children:["Prices:",u.yesPrice&&d.jsxs("span",{className:"text-[#34d399] font-mono ml-2",children:["YES: ",(u.yesPrice*100).toFixed(1),""]}),u.noPrice&&d.jsxs("span",{className:"text-red-400 font-mono ml-2",children:["NO: ",(u.noPrice*100).toFixed(1),""]})]}),d.jsx("pre",{className:"text-[9px] text-[#747580] overflow-x-auto whitespace-pre-wrap custom-scrollbar max-h-[200px]",children:JSON.stringify(u,null,2)})]})]})]},a.id)})})]})},y0t=({log:t,index:e,getLogBadgeVariant:n})=>{const[r,i]=A.useState(!1),s=t.details&&Object.keys(t.details).length>0;return d.jsxs(Mt.div,{className:"flex gap-3 p-3 hover:bg-[#1a1b21] rounded border-b border-[#232328] last:border-0 transition-colors",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:e*.02},children:[d.jsx("span",{className:"text-[#747580] shrink-0 text-[10px] mt-0.5 font-mono",children:new Date(t.timestamp).toLocaleTimeString()}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(nl,{variant:n(t.type),className:"text-[9px] uppercase tracking-wider",children:t.type}),d.jsx("span",{className:"text-[#a0a1a8] flex-1 text-sm truncate",children:t.message}),s&&d.jsx("button",{onClick:()=>i(!r),className:"text-[#747580] hover:text-white transition-colors p-1 rounded hover:bg-[#232328]",title:r?"Collapse details":"Expand details",children:r?d.jsx(aa,{className:"h-4 w-4"}):d.jsx(Xa,{className:"h-4 w-4"})})]}),d.jsx(js,{children:s&&r&&d.jsx(Mt.pre,{className:"mt-2 text-[10px] text-[#747580] bg-[#0f1015] p-3 rounded overflow-x-auto max-h-[300px] overflow-y-auto custom-scrollbar border border-[#232328] font-mono",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:JSON.stringify(t.details,null,2)})})]})]},t.id)},x0t=({status:t,onClearLogs:e})=>{const[n,r]=A.useState("thinking"),i=A.useRef(null);if(!t)return d.jsx("div",{className:"p-4 text-red-500",children:"Error: Status not available"});const s=()=>{const a=JSON.stringify(t.logs,null,2),l="data:application/json;charset=utf-8,"+encodeURIComponent(a),c=`polymarket_logs_${new Date().toISOString()}.json`,u=document.createElement("a");u.setAttribute("href",l),u.setAttribute("download",c),u.click()},o=a=>{switch(a){case"INFO":return"info";case"WARNING":return"warning";case"ERROR":return"destructive";case"TRADE":return"success";case"SIGNAL":return"purple";case"REASONING":return"secondary";default:return"secondary"}};return d.jsxs("div",{className:"flex flex-col h-full gap-4 overflow-hidden p-4",children:[d.jsx("div",{className:"glass-panel p-4 shrink-0",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-2 bg-[#1a1b21] p-1 rounded border border-[#232328]",children:[d.jsxs("button",{onClick:()=>r("thinking"),className:`flex items-center gap-2 px-4 py-2 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${n==="thinking"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:[d.jsx(To,{className:"h-4 w-4"}),"Thinking"]}),d.jsxs("button",{onClick:()=>r("logs"),className:`flex items-center gap-2 px-4 py-2 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${n==="logs"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:[d.jsx(k8,{className:"h-4 w-4"}),"Activity Log",t.logs.length>0&&d.jsx("span",{className:"bg-white/20 px-1.5 py-0.5 rounded text-[9px]",children:t.logs.length})]})]}),d.jsx(js,{children:n==="logs"&&d.jsxs(Mt.div,{className:"flex items-center gap-2",initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},children:[d.jsx("button",{onClick:e,className:"p-2 rounded hover:bg-red-500/10 text-[#747580] hover:text-red-400 transition-colors border border-[#232328]",title:"Clear Logs",children:d.jsx(xm,{className:"h-4 w-4"})}),d.jsx("button",{onClick:s,className:"p-2 rounded hover:bg-[#1a1b21] text-[#747580] hover:text-white transition-colors border border-[#232328]",title:"Export JSON",children:d.jsx(Ks,{className:"h-4 w-4"})})]})})]})}),d.jsxs("div",{className:"glass-panel flex-1 min-h-0 overflow-hidden flex flex-col",children:[n==="thinking"&&d.jsx(g0t,{logs:t.logs,onClearLogs:e}),n==="logs"&&d.jsx("div",{className:"flex-1 min-h-0 relative",children:d.jsx("div",{ref:i,className:"absolute inset-0 overflow-y-auto custom-scrollbar",children:t.logs.length===0?d.jsxs(Mt.div,{className:"h-full flex flex-col items-center justify-center text-[#747580] gap-3 py-12",initial:{opacity:0},animate:{opacity:1},children:[d.jsx(vN,{className:"h-10 w-10 opacity-30"}),d.jsx("p",{className:"text-sm",children:"No operations recorded yet."})]}):d.jsx(js,{children:t.logs.map((a,l)=>d.jsx(y0t,{log:a,index:l,getLogBadgeVariant:o},a.id))})})})]})]})},v0t=({vault:t,password:e,activeTab:n,setActiveTab:r})=>{const i=!!t.pmPublicKey,s=n===we.POLYMARKET_DEALER?we.POLYMARKET_DASHBOARD:n,{state:o,toggleDealer:a,updateSettings:l,applyChanges:c,clearLogs:u}=k0e(t,e),h=()=>{switch(s){case we.POLYMARKET_DASHBOARD:return"dashboard";case we.POLYMARKET_THINKING:return"thinking";case we.POLYMARKET_CONFIG:return"config";case we.POLYMARKET_PROMPT:return"prompt";default:return"dashboard"}},m=g=>{switch(g){case"dashboard":r(we.POLYMARKET_DASHBOARD);break;case"thinking":r(we.POLYMARKET_THINKING);break;case"config":r(we.POLYMARKET_CONFIG);break;case"prompt":r(we.POLYMARKET_PROMPT);break}};return i?d.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[!t.isUnlocked&&d.jsx(Mt.div,{className:"mb-3 flex justify-end shrink-0 px-4",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},children:d.jsx(nl,{variant:"destructive",className:"animate-pulse",children:"VAULT LOCKED"})}),d.jsx(_pe,{value:h(),onValueChange:m,className:"flex-1 flex flex-col min-h-0",children:d.jsxs("div",{className:"flex-1 min-h-0 relative",children:[d.jsx(Qu,{value:"dashboard",forceMount:!0,className:"h-full mt-0 absolute inset-0 data-[state=inactive]:hidden",children:d.jsx(h0t,{status:o,onToggle:a,vaultAddress:t.pmPublicKey,setActiveTab:r})}),d.jsx(Qu,{value:"thinking",forceMount:!0,className:"h-full mt-0 absolute inset-0 data-[state=inactive]:hidden",children:d.jsx(x0t,{status:o,onClearLogs:u})}),d.jsx(Qu,{value:"config",forceMount:!0,className:"h-full mt-0 absolute inset-0 overflow-y-auto data-[state=inactive]:hidden",children:d.jsx(p0t,{settings:o.settings,onUpdateSettings:l,onApplyChanges:c,isOn:o.isOn,onToggle:a})}),d.jsx(Qu,{value:"prompt",forceMount:!0,className:"h-full mt-0 absolute inset-0 data-[state=inactive]:hidden",children:d.jsx(m0t,{settings:o.settings,onUpdateSettings:l,onApplyChanges:c})})]})})]}):d.jsx(Mt.div,{className:"flex flex-col h-[calc(100vh-8rem)] items-center justify-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:d.jsxs("div",{className:"max-w-md w-full mx-auto space-y-6 p-8 text-center",children:[d.jsx("div",{className:"w-16 h-16 bg-[#1a1b21] rounded-full flex items-center justify-center mx-auto mb-4 border border-[#232328]",children:d.jsx(fh,{size:32,className:"text-[#E7FE55]"})}),d.jsx("h2",{className:"text-xl font-semibold text-white tracking-tight",children:"Create a Vault First"}),d.jsxs("p",{className:"text-[#747580] text-sm",children:["You need to create a Polymarket wallet before using Polymarket Dealer. Go to the ",d.jsx("span",{className:"text-[#E7FE55]",children:"Vault"})," page to set up your wallet."]}),d.jsx(Vi,{onClick:()=>r(we.VAULT),variant:"success",size:"lg",className:"mt-4 bg-[#E7FE55] hover:bg-[#d4eb4d] text-black",children:"Go to Vault"})]})})},Lee=({state:t,walletAddress:e})=>{const[n,r]=_s.useState(!1),[i,s]=_s.useState(!1),[o,a]=_s.useState(0),l=async()=>{if(e){r(!0);try{const b=await Ng.getAllPositions(e),w=[...b.meteora.map(k=>{var N,R;return{poolAddress:k.poolAddress,poolName:k.poolAddress.slice(0,8)+"...",protocol:k.protocol,valueUSD:k.valueUSD,unclaimedFeesUSD:k.unclaimedFees.totalUSD,inRange:((N=k.priceRange)==null?void 0:N.inRange)??!0,priceRange:k.priceRange?{min:k.priceRange.min,max:k.priceRange.max}:void 0,currentPrice:(R=k.priceRange)==null?void 0:R.current}}),...b.raydium.map(k=>{var N,R;return{poolAddress:k.poolAddress,poolName:k.poolAddress.slice(0,8)+"...",protocol:k.protocol,valueUSD:k.valueUSD,unclaimedFeesUSD:k.unclaimedFees.totalUSD,inRange:((N=k.priceRange)==null?void 0:N.inRange)??!0,priceRange:k.priceRange?{min:k.priceRange.min,max:k.priceRange.max}:void 0,currentPrice:(R=k.priceRange)==null?void 0:R.current}})];wr.updatePositions(w),wr.addLog("INFO",`Refreshed ${w.length} positions`)}catch(b){wr.addLog("ERROR","Failed to refresh positions",b.message)}r(!1)}},c=t.activePositions.filter(b=>b.inRange).length,u=t.activePositions.filter(b=>!b.inRange).length,h=A.useMemo(()=>t.logs.slice(0,10),[t.logs]),m=h[o],g=()=>{a(b=>Math.min(h.length-1,b+1))},y=()=>{a(b=>Math.max(0,b-1))},v=()=>{const b=!t.settings.policy.enabled;wr.updatePolicy({enabled:b})};return d.jsxs("div",{className:"flex flex-col h-full gap-4 overflow-y-auto custom-scrollbar pb-4",children:[d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 shrink-0",children:[d.jsxs("div",{className:"lg:col-span-2 flex flex-col gap-4",children:[d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[d.jsxs("div",{className:"glass-panel p-4 rounded flex flex-wrap items-center justify-between gap-2",children:[d.jsxs("div",{className:`px-3 py-1.5 rounded border flex items-center gap-2 transition-all ${t.settings.policy.enabled?"bg-[#E7FE55]/10 border-[#E7FE55]/30":"bg-[#1a1b21] border-[#232328]"}`,children:[d.jsxs("span",{className:"relative flex h-2 w-2",children:[t.settings.policy.enabled&&d.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-[#E7FE55] opacity-75"}),d.jsx("span",{className:`relative inline-flex rounded-full h-2 w-2 ${t.settings.policy.enabled?"bg-[#E7FE55]":"bg-red-500"}`})]}),d.jsx("span",{className:`font-semibold tracking-wider text-[10px] uppercase ${t.settings.policy.enabled?"text-[#E7FE55]":"text-[#747580]"}`,children:t.settings.policy.enabled?"ACTIVE":"OFFLINE"})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-[9px] font-medium text-[#747580] uppercase tracking-[0.1em]",children:"Policy"}),d.jsx("button",{onClick:v,className:`relative inline-flex h-5 w-9 items-center rounded-full transition-all focus:outline-none ${t.settings.policy.enabled?"bg-[#E7FE55]":"bg-[#232328] hover:bg-[#2a2b30]"}`,children:d.jsx("span",{className:`${t.settings.policy.enabled?"translate-x-5":"translate-x-1"} inline-block h-3 w-3 transform rounded-full bg-black transition-transform`})})]})]}),d.jsxs("div",{className:"glass-panel p-4 rounded",children:[d.jsx("div",{className:"text-[10px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Total Value"}),d.jsxs("div",{className:"text-xl font-semibold text-white font-mono tracking-tight",children:["$",t.totalValueUSD.toLocaleString(void 0,{maximumFractionDigits:2})]})]}),d.jsxs("div",{className:"glass-panel p-4 rounded",children:[d.jsx("div",{className:"text-[10px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Unclaimed Fees"}),d.jsxs("div",{className:"text-xl font-semibold text-[#34d399] font-mono tracking-tight",children:["+$",t.totalUnclaimedFeesUSD.toFixed(2)]})]}),d.jsxs("div",{className:"glass-panel p-4 rounded",children:[d.jsx("div",{className:"text-[10px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Positions"}),d.jsx("div",{className:"text-xl font-semibold text-white font-mono tracking-tight",children:t.activePositions.length})]})]}),d.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[d.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"In Range"}),d.jsx("span",{className:"text-white font-mono text-sm font-semibold",children:c})]}),d.jsx(w8,{className:"h-4 w-4 text-[#34d399]"})]}),d.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Out of Range"}),d.jsx("span",{className:"text-white font-mono text-sm font-semibold",children:u})]}),d.jsx(fx,{className:"h-4 w-4 text-[#ef4444]"})]}),d.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Min TVL"}),d.jsxs("span",{className:"text-white font-mono text-sm font-semibold",children:["$",t.settings.policy.minTVLRequired.toLocaleString()]})]}),d.jsx(dh,{className:"h-4 w-4 text-[#747580]"})]}),d.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Max Range"}),d.jsxs("span",{className:"text-white font-mono text-sm font-semibold",children:[t.settings.policy.maxRangeWidthPercent,"%"]})]}),d.jsx(rk,{className:"h-4 w-4 text-[#747580]"})]})]}),d.jsxs("div",{className:"glass-panel p-5 rounded min-h-[220px] flex flex-col flex-1",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Rw,{className:"h-4 w-4 text-[#E7FE55]"}),d.jsx("span",{className:"text-sm font-semibold text-white",children:"Active LP Positions"})]}),d.jsxs("button",{onClick:l,disabled:n||!e,className:"flex items-center gap-1 px-2 py-1 text-[10px] text-[#747580] hover:text-white transition-colors disabled:opacity-50",children:[d.jsx($l,{size:12,className:n?"animate-spin":""}),"Refresh"]})]}),d.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:t.activePositions.length===0?d.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-[#747580]",children:[d.jsx(Rw,{className:"h-8 w-8 mb-2 opacity-40"}),d.jsx("span",{className:"text-[11px]",children:"No active LP positions"}),d.jsx("span",{className:"text-[10px] text-[#5a5b63] mt-1",children:e?"Use the Vault Operator to open positions":"Connect wallet to view positions"})]}):d.jsx("div",{className:"space-y-2",children:t.activePositions.map((b,w)=>d.jsxs("div",{className:"bg-[#0f1015] rounded p-3 border border-[#232328] flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:`w-2 h-2 rounded-full ${b.inRange?"bg-[#10b981]":"bg-[#ef4444]"}`}),d.jsxs("div",{children:[d.jsx("div",{className:"text-sm font-medium text-white",children:b.poolName}),d.jsx("div",{className:"text-[10px] text-[#747580] uppercase",children:b.protocol.replace("_"," ")})]})]}),d.jsxs("div",{className:"text-right",children:[d.jsxs("div",{className:"text-sm font-medium text-white font-mono",children:["$",b.valueUSD.toLocaleString(void 0,{maximumFractionDigits:2})]}),b.unclaimedFeesUSD>0&&d.jsxs("div",{className:"text-[10px] text-[#10b981] font-mono",children:["+$",b.unclaimedFeesUSD.toFixed(2)," fees"]})]})]},w))})})]})]}),d.jsxs("div",{className:"glass-panel p-5 rounded flex flex-col",children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(To,{className:`h-4 w-4 shrink-0 ${t.logs.length>0?"text-[#E7FE55]":"text-[#E7FE55]/60"}`}),d.jsxs("div",{className:"flex items-center bg-[#0f1015] rounded-full p-0.5 border border-[#232328]",children:[d.jsx("button",{onClick:()=>s(!1),className:`px-2 py-0.5 rounded-full text-[9px] font-semibold uppercase tracking-wider transition-all ${i?"text-[#747580] hover:text-white":"bg-[#E7FE55] text-black"}`,children:"Live"}),d.jsx("button",{onClick:()=>s(!0),className:`px-2 py-0.5 rounded-full text-[9px] font-semibold uppercase tracking-wider transition-all ${i?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-white"}`,children:"Policy"})]})]}),!i&&h.length>0&&d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{onClick:g,disabled:o>=h.length-1,className:`p-1 rounded transition-colors ${o>=h.length-1?"text-[#3a3b42] cursor-not-allowed":"text-[#747580] hover:text-white hover:bg-[#1a1b21]"}`,title:"Previous activity",children:d.jsx(Iw,{size:16})}),d.jsxs("span",{className:"text-[10px] text-[#747580] font-mono min-w-[32px] text-center",children:[o+1,"/",h.length]}),d.jsx("button",{onClick:y,disabled:o<=0,className:`p-1 rounded transition-colors ${o<=0?"text-[#3a3b42] cursor-not-allowed":"text-[#747580] hover:text-white hover:bg-[#1a1b21]"}`,title:"Next activity",children:d.jsx(Xa,{size:16})})]})]}),i?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"flex items-center justify-between mb-3",children:d.jsx("span",{className:"px-2 py-0.5 rounded bg-[#E7FE55]/15 text-[#E7FE55] text-[9px] font-semibold uppercase tracking-wider",children:"POLICY CONFIG"})}),d.jsx("div",{className:"flex-1 bg-[#0f1015] rounded p-3 border border-[#232328] overflow-y-auto custom-scrollbar min-h-0 mb-3",children:d.jsxs("div",{className:"space-y-3 text-[13px]",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-[#747580]",children:"Min TVL Required"}),d.jsxs("span",{className:"text-white font-mono",children:["$",t.settings.policy.minTVLRequired.toLocaleString()]})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-[#747580]",children:"Max Range Width"}),d.jsxs("span",{className:"text-white font-mono",children:[t.settings.policy.maxRangeWidthPercent,"%"]})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-[#747580]",children:"Max Capital/Pool"}),d.jsxs("span",{className:"text-white font-mono",children:[t.settings.policy.maxCapitalPerPoolPercent,"%"]})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-[#747580]",children:"Confirmation Actions"}),d.jsx("span",{className:"text-white font-mono",children:t.settings.policy.requireConfirmationFor.length})]}),d.jsxs("div",{className:"pt-2 border-t border-[#232328]",children:[d.jsx("span",{className:"text-[#747580] text-[11px] uppercase tracking-wider",children:"Requires Confirmation"}),d.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:t.settings.policy.requireConfirmationFor.map((b,w)=>d.jsx("span",{className:"px-2 py-0.5 rounded bg-[#232328] text-[#a0a1a8] text-[10px]",children:b},w))})]})]})})]}):m?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"flex items-center justify-between mb-3",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold uppercase tracking-wider ${m.type==="ERROR"?"bg-red-500/15 text-red-400":m.type==="WARNING"?"bg-[#f59e0b]/15 text-[#f59e0b]":m.type==="POLICY"?"bg-[#a855f7]/15 text-[#a855f7]":"bg-[#E7FE55]/15 text-[#E7FE55]"}`,children:m.type}),d.jsx("span",{className:"text-[10px] text-[#747580] font-mono",children:new Date(m.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})}),d.jsxs("div",{className:"flex-1 bg-[#0f1015] rounded p-3 border border-[#232328] overflow-y-auto custom-scrollbar min-h-0 mb-3",children:[d.jsx("p",{className:"text-[13px] text-[#a0a1a8] leading-relaxed whitespace-pre-wrap",children:m.message}),m.details&&d.jsx("div",{className:"mt-3 pt-3 border-t border-[#232328] text-[11px] text-[#747580] font-mono",children:typeof m.details=="string"?m.details:JSON.stringify(m.details,null,2)})]})]}):d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"flex items-center justify-between mb-3",children:d.jsx("span",{className:"px-2 py-0.5 rounded bg-[#1a1b21] text-[#747580] text-[9px] font-semibold uppercase tracking-wider",children:"IDLE"})}),d.jsx("div",{className:"flex-1 bg-[#0f1015] rounded p-3 border border-[#232328] overflow-y-auto custom-scrollbar min-h-0 mb-3",children:d.jsx("p",{className:"text-[13px] text-[#747580] italic leading-relaxed",children:"No recent activity. Start interacting with LP positions to see updates here."})})]}),d.jsxs("div",{className:"pt-3 border-t border-[#232328] flex flex-col gap-2 shrink-0",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.05em] w-16 shrink-0",children:"Status"}),d.jsx("div",{className:"text-[10px] text-white truncate font-mono flex-1",children:t.settings.policy.enabled?" Policy Active":" Policy Disabled"})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.05em] w-16 shrink-0",children:"Positions"}),d.jsxs("div",{className:"text-[10px] text-[#a0a1a8] font-mono truncate flex-1",children:[t.activePositions.length," active (",c," in range)"]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.05em] w-16 shrink-0",children:"Wallet"}),d.jsx("div",{className:"text-[10px] text-[#E7FE55] truncate flex-1 font-mono",children:e?`${e.slice(0,8)}...${e.slice(-6)}`:"Not connected"})]})]})]})]}),d.jsxs("div",{className:"glass-panel p-5 rounded shrink-0",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[d.jsx(to,{className:"h-4 w-4 text-[#E7FE55]"}),d.jsx("span",{className:"text-sm font-semibold text-white",children:"Activity Log"}),d.jsxs("span",{className:"text-[10px] text-[#747580] ml-auto",children:[t.logs.length," entries"]})]}),d.jsxs("div",{className:"max-h-48 overflow-y-auto custom-scrollbar",children:[t.logs.slice(0,10).map((b,w)=>d.jsxs("div",{className:"py-2 border-b border-[#232328]/50 last:border-0 flex items-start gap-3",children:[d.jsx("span",{className:`text-[10px] font-medium uppercase shrink-0 ${b.type==="ERROR"?"text-[#ef4444]":b.type==="WARNING"?"text-[#f59e0b]":b.type==="POLICY"?"text-[#a855f7]":"text-[#747580]"}`,children:b.type}),d.jsx("span",{className:"text-[10px] text-[#747580] font-mono shrink-0",children:new Date(b.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),d.jsx("span",{className:"text-[12px] text-[#a0a1a8] flex-1 truncate",children:b.message})]},w)),t.logs.length===0&&d.jsx("div",{className:"py-4 text-center text-[#747580] text-[11px]",children:"No activity recorded yet"})]})]})]})},b0t=({policy:t})=>{const[e,n]=A.useState(t),[r,i]=A.useState(""),[s,o]=A.useState(""),[a,l]=A.useState(!1),c=b=>{n(w=>({...w,...b})),l(!0)},u=()=>{wr.updatePolicy(e),l(!1)},h=()=>{n(T7),l(!0)},m=()=>{r&&!e.tokenAllowlist.includes(r.toUpperCase())&&(c({tokenAllowlist:[...e.tokenAllowlist,r.toUpperCase()]}),i(""))},g=()=>{s&&!e.tokenBlocklist.includes(s.toUpperCase())&&(c({tokenBlocklist:[...e.tokenBlocklist,s.toUpperCase()]}),o(""))},y=(b,w)=>{c(b==="allowlist"?{tokenAllowlist:e.tokenAllowlist.filter(k=>k!==w)}:{tokenBlocklist:e.tokenBlocklist.filter(k=>k!==w)})},v=b=>{const w=e.requireConfirmationFor;w.includes(b)?c({requireConfirmationFor:w.filter(k=>k!==b)}):c({requireConfirmationFor:[...w,b]})};return d.jsxs("div",{className:"flex flex-col h-full gap-3",children:[d.jsxs("div",{className:"glass-panel px-4 py-3 rounded shrink-0 flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(dh,{size:18,className:"text-[#E7FE55]"}),d.jsx("span",{className:"text-sm font-semibold text-white",children:"Policy Engine"}),d.jsx("button",{onClick:()=>c({enabled:!e.enabled}),className:`px-2 py-0.5 rounded text-[9px] font-semibold uppercase tracking-wider ${e.enabled?"bg-[#10b981]/20 text-[#10b981] border border-[#10b981]/30":"bg-[#ef4444]/20 text-[#ef4444] border border-[#ef4444]/30"}`,children:e.enabled?"Enabled":"Disabled"}),a&&d.jsxs("div",{className:"flex items-center gap-1 text-[#f59e0b]",children:[d.jsx(hs,{size:12}),d.jsx("span",{className:"text-[10px]",children:"Unsaved"})]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{onClick:h,className:"p-1.5 rounded hover:bg-[#1a1b21] text-[#747580] hover:text-white transition-colors",title:"Reset",children:d.jsx(tre,{size:14})}),d.jsxs("button",{onClick:u,disabled:!a,className:"flex items-center gap-1 px-2.5 py-1 bg-[#E7FE55] hover:bg-[#d4eb4c] text-black rounded text-[10px] font-semibold uppercase disabled:opacity-50",children:[d.jsx(T8,{size:12}),"Save"]})]})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-3 flex-1 min-h-0",children:[d.jsxs("div",{className:"glass-panel rounded p-4 flex flex-col",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[d.jsx(rk,{size:14,className:"text-[#E7FE55]"}),d.jsx("span",{className:"text-[11px] font-semibold text-white uppercase tracking-wider",children:"Constraints"})]}),d.jsxs("div",{className:"space-y-3 flex-1",children:[d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between text-[10px] mb-1",children:[d.jsx("span",{className:"text-[#747580]",children:"Max Range Width"}),d.jsxs("span",{className:"text-white font-mono",children:[e.maxRangeWidthPercent,"%"]})]}),d.jsx("input",{type:"range",min:"5",max:"200",value:e.maxRangeWidthPercent,onChange:b=>c({maxRangeWidthPercent:parseInt(b.target.value)}),className:"w-full accent-[#E7FE55] h-1"})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between text-[10px] mb-1",children:[d.jsx("span",{className:"text-[#747580]",children:"Min Range Width"}),d.jsxs("span",{className:"text-white font-mono",children:[e.minRangeWidthPercent,"%"]})]}),d.jsx("input",{type:"range",min:"1",max:"50",value:e.minRangeWidthPercent,onChange:b=>c({minRangeWidthPercent:parseInt(b.target.value)}),className:"w-full accent-[#E7FE55] h-1"})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between text-[10px] mb-1",children:[d.jsx("span",{className:"text-[#747580]",children:"Max Capital/Pool"}),d.jsxs("span",{className:"text-white font-mono",children:[e.maxCapitalPerPoolPercent,"%"]})]}),d.jsx("input",{type:"range",min:"5",max:"100",value:e.maxCapitalPerPoolPercent,onChange:b=>c({maxCapitalPerPoolPercent:parseInt(b.target.value)}),className:"w-full accent-[#E7FE55] h-1"})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-1",children:[d.jsxs("div",{children:[d.jsx("label",{className:"text-[9px] text-[#747580] uppercase",children:"Min TVL"}),d.jsxs("div",{className:"relative mt-1",children:[d.jsx("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 text-[#747580] text-[10px]",children:"$"}),d.jsx("input",{type:"number",min:"0",step:"1000",value:e.minTVLRequired,onChange:b=>c({minTVLRequired:parseInt(b.target.value)||0}),className:"w-full pl-5 pr-2 py-1.5 bg-[#0f1015] border border-[#232328] rounded text-white text-[11px] font-mono focus:outline-none focus:border-[#E7FE55]"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-[9px] text-[#747580] uppercase",children:"Min Volume"}),d.jsxs("div",{className:"relative mt-1",children:[d.jsx("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 text-[#747580] text-[10px]",children:"$"}),d.jsx("input",{type:"number",min:"0",step:"100",value:e.minVolumeRequired,onChange:b=>c({minVolumeRequired:parseInt(b.target.value)||0}),className:"w-full pl-5 pr-2 py-1.5 bg-[#0f1015] border border-[#232328] rounded text-white text-[11px] font-mono focus:outline-none focus:border-[#E7FE55]"})]})]})]})]})]}),d.jsxs("div",{className:"glass-panel rounded p-4 flex flex-col",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[d.jsx(E8,{size:14,className:"text-[#E7FE55]"}),d.jsx("span",{className:"text-[11px] font-semibold text-white uppercase tracking-wider",children:"Token Filtering"})]}),d.jsxs("div",{className:"space-y-3 flex-1",children:[d.jsxs("div",{children:[d.jsxs("label",{className:"text-[9px] text-[#747580] uppercase",children:["Allowlist ",d.jsx("span",{className:"normal-case text-[#5a5b63]",children:"(empty=all)"})]}),d.jsxs("div",{className:"flex gap-1 mt-1",children:[d.jsx("input",{type:"text",value:r,onChange:b=>i(b.target.value.toUpperCase()),onKeyPress:b=>b.key==="Enter"&&m(),className:"flex-1 px-2 py-1 bg-[#0f1015] border border-[#232328] rounded text-white text-[11px] focus:outline-none focus:border-[#E7FE55]",placeholder:"SOL, USDC..."}),d.jsx("button",{onClick:m,className:"px-2 bg-[#10b981] hover:bg-[#0d9668] text-white rounded",children:d.jsx(Cl,{size:12})})]}),d.jsx("div",{className:"flex flex-wrap gap-1 mt-2 min-h-[24px]",children:e.tokenAllowlist.length===0?d.jsx("span",{className:"text-[9px] text-[#5a5b63] italic",children:"All allowed"}):e.tokenAllowlist.map(b=>d.jsxs("span",{className:"inline-flex items-center gap-0.5 px-1.5 py-0.5 bg-[#10b981]/15 text-[#10b981] rounded text-[9px] border border-[#10b981]/30",children:[b,d.jsx("button",{onClick:()=>y("allowlist",b),children:d.jsx(hx,{size:10})})]},b))})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-[9px] text-[#747580] uppercase",children:"Blocklist"}),d.jsxs("div",{className:"flex gap-1 mt-1",children:[d.jsx("input",{type:"text",value:s,onChange:b=>o(b.target.value.toUpperCase()),onKeyPress:b=>b.key==="Enter"&&g(),className:"flex-1 px-2 py-1 bg-[#0f1015] border border-[#232328] rounded text-white text-[11px] focus:outline-none focus:border-[#E7FE55]",placeholder:"Block tokens..."}),d.jsx("button",{onClick:g,className:"px-2 bg-[#ef4444] hover:bg-[#dc2626] text-white rounded",children:d.jsx(Cl,{size:12})})]}),d.jsx("div",{className:"flex flex-wrap gap-1 mt-2 min-h-[24px]",children:e.tokenBlocklist.length===0?d.jsx("span",{className:"text-[9px] text-[#5a5b63] italic",children:"None blocked"}):e.tokenBlocklist.map(b=>d.jsxs("span",{className:"inline-flex items-center gap-0.5 px-1.5 py-0.5 bg-[#ef4444]/15 text-[#ef4444] rounded text-[9px] border border-[#ef4444]/30",children:[b,d.jsx("button",{onClick:()=>y("blocklist",b),children:d.jsx(hx,{size:10})})]},b))})]})]})]}),d.jsxs("div",{className:"glass-panel rounded p-4 flex flex-col",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[d.jsx(uh,{size:14,className:"text-[#E7FE55]"}),d.jsx("span",{className:"text-[11px] font-semibold text-white uppercase tracking-wider",children:"Confirmations"})]}),d.jsx("div",{className:"space-y-1.5 flex-1 overflow-y-auto custom-scrollbar",children:Object.keys(by).map(b=>{const w=by[b],k=e.requireConfirmationFor.includes(b);return d.jsxs("button",{onClick:()=>v(b),className:`w-full flex items-center justify-between px-2.5 py-2 rounded transition-colors ${k?"bg-[#E7FE55]/10 border border-[#E7FE55]/30":"bg-[#0f1015] hover:bg-[#1a1b21] border border-[#232328]"}`,children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:`w-4 h-4 rounded flex items-center justify-center text-[10px] ${k?"bg-[#E7FE55] text-black":"bg-[#232328] text-[#747580]"}`,children:k&&d.jsx(lm,{size:10})}),d.jsx("div",{className:"text-left",children:d.jsx("div",{className:"text-[11px] text-white",children:w.label})})]}),d.jsx("span",{className:`text-[8px] uppercase font-semibold px-1.5 py-0.5 rounded ${w.riskLevel==="high"?"bg-[#ef4444]/15 text-[#ef4444]":w.riskLevel==="medium"?"bg-[#f59e0b]/15 text-[#f59e0b]":"bg-[#10b981]/15 text-[#10b981]"}`,children:w.riskLevel})]},b)})})]})]})]})},w0t=({auditLog:t})=>{const[e,n]=A.useState("all"),[r,i]=A.useState("all"),[s,o]=A.useState(null),[a,l]=A.useState(""),c=A.useMemo(()=>t.filter(y=>{var v;return!(e!=="all"&&y.scope!==e||r!=="all"&&y.status!==r||a&&!y.action.toLowerCase().includes(a.toLowerCase())&&!((v=y.poolName)!=null&&v.toLowerCase().includes(a.toLowerCase())))}),[t,e,r,a]),u=A.useMemo(()=>{const y=t.filter(w=>w.status==="executed").length,v=t.filter(w=>w.status==="failed"||w.status==="rejected").length,b=t.filter(w=>w.status==="pending"||w.status==="confirmed").length;return{executed:y,failed:v,pending:b,total:t.length}},[t]),h=()=>{const y=JSON.stringify(t,null,2),v="data:application/json;charset=utf-8,"+encodeURIComponent(y),b=`solana_audit_log_${new Date().toISOString()}.json`,w=document.createElement("a");w.setAttribute("href",v),w.setAttribute("download",b),w.click()},m=y=>{switch(y){case"executed":return d.jsx(w8,{size:14,className:"text-[#10b981]"});case"failed":case"rejected":return d.jsx(fx,{size:14,className:"text-[#ef4444]"});case"pending":case"confirmed":return d.jsx(Hi,{size:14,className:"text-[#f59e0b]"});default:return null}},g=y=>{switch(y){case"executed":return"text-[#10b981] bg-[#10b981]/15 border-[#10b981]/30";case"failed":return"text-[#ef4444] bg-[#ef4444]/15 border-[#ef4444]/30";case"rejected":return"text-[#ef4444] bg-[#ef4444]/15 border-[#ef4444]/30";case"pending":return"text-[#f59e0b] bg-[#f59e0b]/15 border-[#f59e0b]/30";case"confirmed":return"text-[#3b82f6] bg-[#3b82f6]/15 border-[#3b82f6]/30";default:return"text-[#747580] bg-[#747580]/15 border-[#747580]/30"}};return d.jsxs("div",{className:"flex flex-col h-full gap-4 overflow-hidden",children:[d.jsxs("div",{className:"glass-panel p-5 rounded shrink-0",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"p-2 rounded-lg bg-[#E7FE55]/10",children:d.jsx(yV,{size:20,className:"text-[#E7FE55]"})}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-sm font-semibold text-white",children:"Audit Log"}),d.jsxs("p",{className:"text-[10px] text-[#747580] uppercase tracking-wider",children:[u.total," total entries"]})]})]}),d.jsxs("button",{onClick:h,className:"flex items-center gap-1.5 px-3 py-1.5 bg-[#1a1b21] hover:bg-[#232328] rounded text-[10px] text-[#a0a1a8] hover:text-white transition-colors border border-[#232328]",children:[d.jsx(Ks,{size:12}),"Export"]})]}),d.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[d.jsxs("div",{className:"bg-[#0f1015] rounded p-3 border border-[#232328]",children:[d.jsx("div",{className:"text-[9px] text-[#747580] uppercase tracking-wider mb-1",children:"Total"}),d.jsx("div",{className:"text-lg font-semibold text-white font-mono",children:u.total})]}),d.jsxs("div",{className:"bg-[#0f1015] rounded p-3 border border-[#232328]",children:[d.jsx("div",{className:"text-[9px] text-[#747580] uppercase tracking-wider mb-1",children:"Executed"}),d.jsx("div",{className:"text-lg font-semibold text-[#10b981] font-mono",children:u.executed})]}),d.jsxs("div",{className:"bg-[#0f1015] rounded p-3 border border-[#232328]",children:[d.jsx("div",{className:"text-[9px] text-[#747580] uppercase tracking-wider mb-1",children:"Failed"}),d.jsx("div",{className:"text-lg font-semibold text-[#ef4444] font-mono",children:u.failed})]}),d.jsxs("div",{className:"bg-[#0f1015] rounded p-3 border border-[#232328]",children:[d.jsx("div",{className:"text-[9px] text-[#747580] uppercase tracking-wider mb-1",children:"Pending"}),d.jsx("div",{className:"text-lg font-semibold text-[#f59e0b] font-mono",children:u.pending})]})]})]}),d.jsx("div",{className:"glass-panel p-4 rounded shrink-0",children:d.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[d.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[d.jsx(N8,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-[#747580]"}),d.jsx("input",{type:"text",value:a,onChange:y=>l(y.target.value),placeholder:"Search actions or pools...",className:"w-full pl-9 pr-3 py-2 bg-[#0f1015] border border-[#232328] rounded text-white text-sm focus:outline-none focus:border-[#E7FE55]"})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Qne,{size:14,className:"text-[#747580]"}),d.jsxs("select",{value:e,onChange:y=>n(y.target.value),className:"px-3 py-2 bg-[#0f1015] border border-[#232328] rounded text-white text-sm focus:outline-none focus:border-[#E7FE55]",children:[d.jsx("option",{value:"all",children:"All Scopes"}),Object.keys(by).map(y=>d.jsx("option",{value:y,children:by[y].label},y))]})]}),d.jsxs("select",{value:r,onChange:y=>i(y.target.value),className:"px-3 py-2 bg-[#0f1015] border border-[#232328] rounded text-white text-sm focus:outline-none focus:border-[#E7FE55]",children:[d.jsx("option",{value:"all",children:"All Status"}),d.jsx("option",{value:"executed",children:"Executed"}),d.jsx("option",{value:"pending",children:"Pending"}),d.jsx("option",{value:"confirmed",children:"Confirmed"}),d.jsx("option",{value:"rejected",children:"Rejected"}),d.jsx("option",{value:"failed",children:"Failed"})]}),d.jsxs("span",{className:"text-[10px] text-[#747580] font-mono",children:[c.length," / ",t.length]})]})}),d.jsx("div",{className:"glass-panel rounded flex-1 min-h-0 overflow-hidden",children:c.length===0?d.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-[#747580] gap-3 py-12",children:[d.jsx(yV,{className:"h-10 w-10 opacity-30"}),d.jsx("p",{className:"text-sm",children:"No audit entries found"}),d.jsx("p",{className:"text-[11px] text-[#5a5b63]",children:"LP operations will be logged here"})]}):d.jsx("div",{className:"h-full overflow-y-auto custom-scrollbar divide-y divide-[#232328]",children:c.map(y=>{var v,b;return d.jsxs("div",{className:"hover:bg-[#1a1b21]/50 transition-colors",children:[d.jsxs("button",{onClick:()=>o(s===y.id?null:y.id),className:"w-full px-5 py-4 flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[m(y.status),d.jsxs("div",{className:"text-left",children:[d.jsx("div",{className:"text-sm text-white font-medium",children:y.action}),d.jsxs("div",{className:"text-[10px] text-[#747580] flex items-center gap-2",children:[d.jsx("span",{className:"px-1.5 py-0.5 rounded bg-[#232328] text-[9px] uppercase",children:(v=by[y.scope])==null?void 0:v.label}),d.jsx("span",{children:""}),d.jsx("span",{children:y.poolName||((b=y.poolAddress)==null?void 0:b.slice(0,8))||"N/A"})]})]})]}),d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs("div",{className:"text-right",children:[d.jsx("div",{className:`px-2 py-0.5 rounded text-[9px] font-semibold uppercase border ${g(y.status)}`,children:y.status}),d.jsx("div",{className:"text-[10px] text-[#747580] mt-1 font-mono",children:new Date(y.timestamp).toLocaleString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),s===y.id?d.jsx(ch,{size:16,className:"text-[#747580]"}):d.jsx(aa,{size:16,className:"text-[#747580]"})]})]}),s===y.id&&d.jsxs("div",{className:"px-5 pb-4 pt-0 space-y-4",children:[y.rationale&&d.jsxs("div",{className:"bg-[#0f1015] rounded p-4 border border-[#232328]",children:[d.jsx("div",{className:"text-[9px] uppercase tracking-wider text-[#E7FE55] mb-2 font-semibold",children:"Rationale"}),d.jsxs("p",{className:"text-[13px] text-[#a0a1a8] italic leading-relaxed",children:['"',y.rationale,'"']})]}),y.policyViolations&&y.policyViolations.length>0&&d.jsxs("div",{className:"bg-[#ef4444]/5 border border-[#ef4444]/30 rounded p-4",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[d.jsx(hs,{size:14,className:"text-[#ef4444]"}),d.jsx("span",{className:"text-[10px] font-semibold text-[#ef4444] uppercase tracking-wider",children:"Policy Violations"})]}),d.jsx("ul",{className:"text-[12px] text-[#ef4444]/80 space-y-1",children:y.policyViolations.map((w,k)=>d.jsxs("li",{className:"flex items-start gap-2",children:[d.jsx("span",{className:"text-[#ef4444]",children:""}),w]},k))})]}),Object.keys(y.params).length>0&&d.jsxs("div",{children:[d.jsx("div",{className:"text-[9px] uppercase tracking-wider text-[#747580] mb-2 font-semibold",children:"Parameters"}),d.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:Object.entries(y.params).map(([w,k])=>d.jsxs("div",{className:"bg-[#0f1015] rounded px-3 py-2 border border-[#232328]",children:[d.jsx("span",{className:"text-[9px] text-[#747580] uppercase",children:w}),d.jsx("div",{className:"text-[12px] text-white font-mono truncate",children:typeof k=="object"?JSON.stringify(k):String(k)})]},w))})]}),y.txSignature&&d.jsxs("div",{className:"flex items-center gap-3 pt-2 border-t border-[#232328]",children:[d.jsx("span",{className:"text-[9px] uppercase tracking-wider text-[#747580]",children:"Transaction"}),d.jsxs("a",{href:`https://explorer.solana.com/tx/${y.txSignature}?cluster=devnet`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-[11px] text-[#3b82f6] hover:text-[#60a5fa] transition-colors font-mono",children:[y.txSignature.slice(0,16),"...",y.txSignature.slice(-8),d.jsx(ld,{size:10})]})]})]})]},y.id)})})})]})},E0t=({log:t,index:e})=>{const[n,r]=A.useState(!1),i=t.details&&(typeof t.details=="object"?Object.keys(t.details).length>0:!0),s=a=>{switch(a){case"ERROR":return d.jsx(fx,{size:14,className:"text-[#ef4444]"});case"WARNING":return d.jsx(hs,{size:14,className:"text-[#f59e0b]"});case"OPERATION":return d.jsx(ko,{size:14,className:"text-[#3b82f6]"});case"POLICY":return d.jsx(dh,{size:14,className:"text-[#a855f7]"});default:return d.jsx(Zne,{size:14,className:"text-[#747580]"})}},o=a=>{switch(a){case"ERROR":return"bg-[#ef4444]/15 text-[#ef4444] border-[#ef4444]/30";case"WARNING":return"bg-[#f59e0b]/15 text-[#f59e0b] border-[#f59e0b]/30";case"OPERATION":return"bg-[#3b82f6]/15 text-[#3b82f6] border-[#3b82f6]/30";case"POLICY":return"bg-[#a855f7]/15 text-[#a855f7] border-[#a855f7]/30";default:return"bg-[#747580]/15 text-[#747580] border-[#747580]/30"}};return d.jsxs("div",{className:"flex gap-3 p-3 hover:bg-[#1a1b21] rounded border-b border-[#232328] last:border-0 transition-colors",children:[d.jsx("span",{className:"text-[#747580] shrink-0 text-[10px] mt-0.5 font-mono",children:new Date(t.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[s(t.type),d.jsx("span",{className:`px-1.5 py-0.5 rounded text-[9px] uppercase tracking-wider font-medium border ${o(t.type)}`,children:t.type}),d.jsx("span",{className:"text-[#a0a1a8] flex-1 text-sm truncate",children:t.message}),i&&d.jsx("button",{onClick:()=>r(!n),className:"text-[#747580] hover:text-white transition-colors p-1 rounded hover:bg-[#232328]",title:n?"Collapse details":"Expand details",children:n?d.jsx(aa,{className:"h-4 w-4"}):d.jsx(Xa,{className:"h-4 w-4"})})]}),i&&n&&d.jsx("pre",{className:"mt-2 text-[10px] text-[#747580] bg-[#0f1015] p-3 rounded overflow-x-auto max-h-[300px] overflow-y-auto custom-scrollbar border border-[#232328] font-mono",children:typeof t.details=="string"?t.details:JSON.stringify(t.details,null,2)})]})]})},S0t=({logs:t})=>{const e=t.filter(n=>n.type==="POLICY"||n.type==="OPERATION"||n.message.toLowerCase().includes("analyzing"));return e.length===0?d.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-[#747580] gap-3 py-12",children:[d.jsx(To,{className:"h-10 w-10 opacity-30"}),d.jsx("p",{className:"text-sm",children:"No reasoning activity yet"}),d.jsx("p",{className:"text-xs text-[#5a5b63]",children:"AI analysis will appear here during operations"})]}):d.jsx("div",{className:"p-4 space-y-4",children:e.slice(0,20).map((n,r)=>d.jsxs("div",{className:`p-4 rounded-lg border-l-2 ${n.type==="POLICY"?"bg-[#a855f7]/5 border-[#a855f7]":n.type==="OPERATION"?"bg-[#3b82f6]/5 border-[#3b82f6]":"bg-[#E7FE55]/5 border-[#E7FE55]"}`,children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[n.type==="POLICY"?d.jsx(dh,{size:14,className:"text-[#a855f7]"}):n.type==="OPERATION"?d.jsx(ko,{size:14,className:"text-[#3b82f6]"}):d.jsx(To,{size:14,className:"text-[#E7FE55]"}),d.jsx("span",{className:`text-[10px] font-medium uppercase ${n.type==="POLICY"?"text-[#a855f7]":n.type==="OPERATION"?"text-[#3b82f6]":"text-[#E7FE55]"}`,children:n.type})]}),d.jsx("span",{className:"text-[10px] text-[#747580] font-mono",children:new Date(n.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),d.jsx("p",{className:"text-[13px] text-[#a0a1a8] leading-relaxed",children:n.message}),n.details&&d.jsx("div",{className:"mt-3 pt-3 border-t border-[#232328]",children:d.jsx("pre",{className:"text-[10px] text-[#747580] font-mono overflow-x-auto",children:typeof n.details=="string"?n.details:JSON.stringify(n.details,null,2)})})]},n.id))})},A0t=({logs:t})=>{const[e,n]=A.useState("thinking"),r=A.useRef(null),i=()=>{wr.clearLogs()},s=()=>{const o=JSON.stringify(t,null,2),a="data:application/json;charset=utf-8,"+encodeURIComponent(o),l=`solana_dealer_logs_${new Date().toISOString()}.json`,c=document.createElement("a");c.setAttribute("href",a),c.setAttribute("download",l),c.click()};return d.jsxs("div",{className:"flex flex-col h-full gap-4 overflow-hidden",children:[d.jsx("div",{className:"glass-panel p-4 rounded shrink-0",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-2 bg-[#1a1b21] p-1 rounded border border-[#232328]",children:[d.jsxs("button",{onClick:()=>n("thinking"),className:`flex items-center gap-2 px-4 py-2 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${e==="thinking"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:[d.jsx(To,{className:"h-4 w-4"}),"Thinking"]}),d.jsxs("button",{onClick:()=>n("logs"),className:`flex items-center gap-2 px-4 py-2 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${e==="logs"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:[d.jsx(k8,{className:"h-4 w-4"}),"Activity Log",t.length>0&&d.jsx("span",{className:"bg-white/20 px-1.5 py-0.5 rounded text-[9px]",children:t.length})]})]}),e==="logs"&&d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{onClick:i,className:"p-2 rounded hover:bg-red-500/10 text-[#747580] hover:text-red-400 transition-colors border border-[#232328]",title:"Clear Logs",children:d.jsx(xm,{className:"h-4 w-4"})}),d.jsx("button",{onClick:s,className:"p-2 rounded hover:bg-[#1a1b21] text-[#747580] hover:text-white transition-colors border border-[#232328]",title:"Export JSON",children:d.jsx(Ks,{className:"h-4 w-4"})})]})]})}),d.jsxs("div",{className:"glass-panel rounded flex-1 min-h-0 overflow-hidden flex flex-col",children:[e==="thinking"&&d.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:d.jsx(S0t,{logs:t})}),e==="logs"&&d.jsx("div",{ref:r,className:"flex-1 overflow-y-auto custom-scrollbar",children:t.length===0?d.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-[#747580] gap-3 py-12",children:[d.jsx(vN,{className:"h-10 w-10 opacity-30"}),d.jsx("p",{className:"text-sm",children:"No operations recorded yet."})]}):d.jsx("div",{className:"p-2",children:t.map((o,a)=>d.jsx(E0t,{log:o,index:a},o.id))})})]})]})},T0t=({activeTab:t,walletAddress:e})=>{const n=cmt(),r=()=>{switch(t){case we.SOLANA_DEALER:case we.SOLANA_DEALER_DASHBOARD:return d.jsx(Lee,{state:n,walletAddress:e});case we.SOLANA_DEALER_THINKING:return d.jsx(A0t,{logs:n.logs});case we.SOLANA_DEALER_POLICY:return d.jsx(b0t,{policy:n.settings.policy});case we.SOLANA_DEALER_LOG:return d.jsx(w0t,{auditLog:n.auditLog});default:return d.jsx(Lee,{state:n,walletAddress:e})}};return d.jsx("div",{className:"h-full flex flex-col",children:r()})},uge=({onBack:t})=>{const e=()=>{t?t():window.location.reload()};return d.jsx("div",{className:"min-h-screen bg-[#0f172a] text-slate-200 p-8 font-sans",children:d.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[d.jsxs("div",{className:"border-b border-slate-700 pb-6 mb-10 flex justify-between items-start",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-4xl font-light text-white mb-2",children:"Privacy Policy"}),d.jsx("p",{className:"text-slate-400",children:"Last Updated: December 23, 2025"})]}),d.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-800 rounded-full transition-colors text-slate-400 hover:text-white",title:"Go Back",children:d.jsx(tk,{size:24})})]}),d.jsx("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-xl p-6 mb-8",children:d.jsx("p",{className:"text-blue-200 text-sm",children:"This Privacy Policy explains how AutonomousVault handles your data. In short: We don't want your data, and we can't see your keys."})}),d.jsxs("section",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center gap-2 text-[#E7FE55]",children:[d.jsx(yN,{size:20}),d.jsx("h2",{className:"text-2xl font-light text-white",children:"1. Data Collection & Storage"})]}),d.jsxs("p",{className:"leading-relaxed text-slate-300",children:["AutonomousVault operates on a ",d.jsx("strong",{children:'"Local-First"'})," architecture."]}),d.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-slate-400",children:[d.jsxs("li",{children:[d.jsx("strong",{children:"Private Keys:"})," Generated locally and stored ONLY in your browser's encrypted storage (IndexedDB). They never leave your device unencrypted."]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Chat History:"})," Stored locally on your device."]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Usage Data:"})," We do not collect analytics or tracking data."]})]})]}),d.jsxs("section",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center gap-2 text-[#E7FE55]",children:[d.jsx(xN,{size:20}),d.jsx("h2",{className:"text-2xl font-light text-white",children:"2. Third-Party Services"})]}),d.jsx("p",{className:"leading-relaxed text-slate-300",children:"While the app runs locally, it interacts with the following services to function:"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[d.jsxs("div",{className:"bg-slate-800 p-4 rounded-lg",children:[d.jsx("h3",{className:"text-white font-medium mb-1",children:"Google Gemini (AI)"}),d.jsx("p",{className:"text-xs text-slate-400",children:"Processes user prompts to generate responses. Your keys are NOT sent to the AI."})]}),d.jsxs("div",{className:"bg-slate-800 p-4 rounded-lg",children:[d.jsx("h3",{className:"text-white font-medium mb-1",children:"Supabase (Auth & Database)"}),d.jsx("p",{className:"text-xs text-slate-400",children:"Handles authentication (Email/Google), user settings, and encrypted conversation history (if 24/7 mode is enabled). We only see your User ID and Email."})]}),d.jsxs("div",{className:"bg-slate-800 p-4 rounded-lg",children:[d.jsx("h3",{className:"text-white font-medium mb-1",children:"RPC Nodes"}),d.jsx("p",{className:"text-xs text-slate-400",children:"Public nodes (Solana, Hyperliquid, Polygon) receive your signed transactions to execute them on-chain."})]})]})]}),d.jsxs("section",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center gap-2 text-[#E7FE55]",children:[d.jsx(uh,{size:20}),d.jsx("h2",{className:"text-2xl font-light text-white",children:"3. Your Rights (GDPR/LGPD)"})]}),d.jsx("p",{className:"leading-relaxed text-slate-300",children:"You have complete control over your data:"}),d.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-slate-400",children:[d.jsxs("li",{children:[d.jsx("strong",{children:"Access:"})," All your data is visible within the application."]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Deletion:"}),' You can use the "Delete Account" button in Settings to wipe all local data and delete your Supabase authentication record.']}),d.jsxs("li",{children:[d.jsx("strong",{children:"Portability:"})," You can export your private keys at any time via the Backup feature."]})]})]}),d.jsxs("div",{className:"pt-10 border-t border-slate-700 flex justify-between items-center mt-12",children:[d.jsx("p",{className:"text-xs text-slate-500",children:"AutonomousVault v0.1"}),d.jsxs("button",{onClick:e,className:"text-[#E7FE55] hover:underline flex items-center gap-2",children:[d.jsx(tk,{size:14})," Return to App"]})]})]})})},dge=({onBack:t})=>{const e=()=>{t?t():window.location.reload()};return d.jsx("div",{className:"min-h-screen bg-[#0f172a] text-slate-200 p-8 font-sans",children:d.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[d.jsxs("div",{className:"border-b border-slate-700 pb-6 mb-10 flex justify-between items-start",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-4xl font-light text-white mb-2",children:"Terms of Use"}),d.jsx("p",{className:"text-slate-400",children:"Effective Date: December 23, 2025"})]}),d.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-800 rounded-full transition-colors text-slate-400 hover:text-white",title:"Go Back",children:d.jsx(tk,{size:24})})]}),d.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-6 flex flex-col gap-4",children:[d.jsxs("div",{className:"flex items-center gap-3 text-red-400",children:[d.jsx(hs,{size:24}),d.jsx("h2",{className:"text-xl font-semibold",children:"Critical Disclaimer"})]}),d.jsx("p",{className:"text-sm leading-relaxed text-red-100/80",children:'AutonomousVault is experimental, open-source software. It is provided "AS IS", without warranty of any kind. You use this software entirely at your own risk. The developers constitute a non-custodial entity and accept no liability for lost funds, private key mismanagement, or protocol failures.'})]}),d.jsxs("section",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center gap-2 text-[#E7FE55]",children:[d.jsx(D3,{size:20}),d.jsx("h2",{className:"text-2xl font-light text-white",children:"1. Self-Custody Model"})]}),d.jsx("p",{className:"leading-relaxed text-slate-300",children:"By using AutonomousVault, you acknowledge that:"}),d.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-slate-400",children:[d.jsx("li",{children:"You are the sole custodian of your cryptographic private keys."}),d.jsx("li",{children:"Private keys are encrypted and stored solely within your device's browser (IndexedDB)."}),d.jsx("li",{children:"We (the developers) never have access to your private keys or funds."}),d.jsx("li",{children:"If you lose your password or clear your browser data without a backup, your funds are permanently lost."})]})]}),d.jsxs("section",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center gap-2 text-[#E7FE55]",children:[d.jsx(dh,{size:20}),d.jsx("h2",{className:"text-2xl font-light text-white",children:"2. Universal Data Liability"})]}),d.jsx("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-6",children:d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx(hs,{className:"text-red-400 shrink-0 mt-1",size:20}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("h3",{className:"text-red-200 font-medium",children:"Full User Responsibility"}),d.jsxs("p",{className:"text-red-200/80 text-sm leading-relaxed",children:["The user assumes ",d.jsx("strong",{children:"FULL RESPONSIBILITY"})," for data security, custody, and management in ",d.jsx("strong",{children:"ALL MODES OF OPERATION"}),' (including "Local-Only" and "24/7 Server Mode").']}),d.jsxs("p",{className:"text-red-200/80 text-sm leading-relaxed",children:["The application always operates on the user's own infrastructure (local machine or personal Supabase database). The developers of AutonomousVault accept ",d.jsx("strong",{children:"NO LIABILITY"})," for data loss, unauthorized access, key compromise, or any other security breaches under any circumstances."]})]})]})})]}),d.jsxs("section",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center gap-2 text-[#E7FE55]",children:[d.jsx(vN,{size:20}),d.jsx("h2",{className:"text-2xl font-light text-white",children:"3. Experimental Protocols & Risks"})]}),d.jsxs("div",{className:"space-y-4 text-slate-300",children:[d.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg border border-slate-700",children:[d.jsxs("h3",{className:"text-white font-medium mb-2 flex items-center gap-2",children:[d.jsx("span",{className:"w-2 h-2 rounded-full bg-orange-400"}),"Hyperliquid (Testnet)"]}),d.jsxs("p",{className:"text-sm",children:["Trading on Hyperliquid is currently on ",d.jsx("strong",{children:"Testnet"}),". While no real funds are at risk on Testnet, the trading logic is experimental. The AI Agent's performance on Testnet does not guarantee future results on Mainnet."]})]}),d.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg border border-slate-700",children:[d.jsxs("h3",{className:"text-white font-medium mb-2 flex items-center gap-2",children:[d.jsx("span",{className:"w-2 h-2 rounded-full bg-purple-400"}),"Polymarket (Prediction Markets)"]}),d.jsxs("p",{className:"text-sm",children:["Prediction markets involve high risk. The AI Agent provides analysis based on available data, but ",d.jsx("strong",{children:"outcome predictions are never guaranteed"}),"."]}),d.jsxs("p",{className:"text-sm mt-2 text-slate-400 italic",children:[d.jsx("strong",{children:"Regular compliance:"})," You are solely responsible for ensuring that using prediction markets complies with the laws of your jurisdiction."]})]})]})]}),d.jsxs("section",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center gap-2 text-[#E7FE55]",children:[d.jsx(D3,{size:20}),d.jsx("h2",{className:"text-2xl font-light text-white",children:"4. AI Agent Autonomy"})]}),d.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-slate-400",children:[d.jsx("li",{children:"The AI Agent executes instructions based on your prompts."}),d.jsx("li",{children:"It may generate code, execute transactions (Solana), trade perps (Hyperliquid), or interact with prediction markets (Polymarket)."}),d.jsxs("li",{children:[d.jsx("strong",{children:"You are the final approver."})," While the agent can be autonomous, you are responsible for monitoring its actions."]}),d.jsx("li",{children:"The developers are not liable for losses caused by AI hallucination, error, or unintended execution."})]})]}),d.jsxs("section",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center gap-2 text-[#E7FE55]",children:[d.jsx(dh,{size:20}),d.jsx("h2",{className:"text-2xl font-light text-white",children:"5. Prohibited Activities"})]}),d.jsx("p",{className:"leading-relaxed text-slate-300",children:"You agree not to use AutonomousVault for:"}),d.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-slate-400",children:[d.jsx("li",{children:"Money laundering or financing terrorism."}),d.jsx("li",{children:"Interacting with sanctioned addresses or entities."}),d.jsx("li",{children:"Any illegal activity defined by the laws of your jurisdiction."})]})]}),d.jsxs("div",{className:"pt-10 border-t border-slate-700 flex justify-between items-center mt-12",children:[d.jsx("p",{className:"text-xs text-slate-500",children:"AutonomousVault v0.1"}),d.jsxs("button",{onClick:e,className:"text-[#E7FE55] hover:underline flex items-center gap-2",children:[d.jsx(tk,{size:14})," Return to App"]})]})]})})},k0t=({userId:t})=>{const[e,n]=A.useState(!0),[r,i]=A.useState(!0),s=t?`legal_consent_v1_${t}`:null;A.useEffect(()=>{(async()=>{if(!s){i(!1);return}const l=await ke.getItem(s);n(l==="true"),i(!1)})()},[s]);const o=async()=>{s&&await ke.setItem(s,"true"),n(!0)};return r||e?null:d.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/90 backdrop-blur-sm flex items-center justify-center p-4",children:d.jsxs("div",{className:"bg-[#0f172a] border border-slate-700 w-full max-w-lg rounded-2xl shadow-2xl overflow-hidden",children:[d.jsxs("div",{className:"p-8 pb-4 text-center",children:[d.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-[#E7FE55]/10 mb-4",children:d.jsx(cd,{size:32,className:"text-[#E7FE55]"})}),d.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Welcome to AutonomousVault"}),d.jsx("p",{className:"text-slate-400 text-sm",children:"Use AI to manage your DeFi portfolio autonomously."})]}),d.jsxs("div",{className:"px-8 py-4 space-y-4",children:[d.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 text-sm text-slate-300 border border-slate-700",children:[d.jsx("p",{className:"mb-2 font-semibold text-white",children:"Before you continue:"}),d.jsxs("ul",{className:"space-y-2 list-disc pl-4 text-slate-400",children:[d.jsxs("li",{children:["This software is ",d.jsx("strong",{children:"experimental"}),"."]}),d.jsxs("li",{children:["You maintain ",d.jsx("strong",{children:"sole custody"})," of your keys."]}),d.jsxs("li",{children:["The developers are ",d.jsx("strong",{children:"not liable"})," for any funds lost."]})]})]}),d.jsxs("p",{className:"text-sm text-center text-slate-400 mt-4 leading-relaxed",children:['By clicking "I Agree", you acknowledge that you have read and agree to our',d.jsx("br",{}),d.jsx("a",{href:"/terms.html",target:"_blank",rel:"noopener noreferrer",className:"text-[#E7FE55] hover:underline font-medium",children:"Terms of Use"})," and ",d.jsx("a",{href:"/privacy.html",target:"_blank",rel:"noopener noreferrer",className:"text-[#E7FE55] hover:underline font-medium",children:"Privacy Policy"}),"."]})]}),d.jsx("div",{className:"p-8 pt-4",children:d.jsxs("button",{onClick:o,className:"w-full bg-[#E7FE55] hover:bg-[#d9f044] text-black font-bold py-3.5 rounded-xl transition-all flex items-center justify-center gap-2 shadow-lg shadow-[#E7FE55]/20",children:["I Agree & Continue ",d.jsx(x8,{size:18})]})})]})})},N0t=({onNavigate:t})=>d.jsx("footer",{className:"w-full py-4 text-center mt-auto border-t border-[#232328]/50",children:d.jsxs("div",{className:"flex flex-col items-center gap-2",children:[d.jsx("p",{className:"text-[10px] text-slate-600 font-medium tracking-wide",children:" 2025 AutonomousVault. All rights reserved."}),t&&d.jsxs("div",{className:"flex items-center gap-4 text-[10px] text-slate-500",children:[d.jsx("button",{onClick:()=>t(we.TERMS),className:"hover:text-[#E7FE55] transition-colors",children:"Terms of Use"}),d.jsx("span",{children:""}),d.jsx("button",{onClick:()=>t(we.PRIVACY),className:"hover:text-[#E7FE55] transition-colors",children:"Privacy Policy"})]})]})});function C0t(){var ca,Zl,_o,Io,ua,Ro,xr,Zc;const[t,e]=A.useState(we.AGENT),[n,r]=A.useState([]),[i,s]=A.useState(!1),[o,a]=A.useState(!1),[l,c]=A.useState("providers"),[u,h]=A.useState("main"),{user:m,logout:g}=B1(),y=A.useRef(null);A.useEffect(()=>{y.current&&(y.current.scrollTop=0)},[t]);const v=Ar=>{const Fr=Date.now();r(vi=>[...vi,{id:Fr,message:Ar}]),setTimeout(()=>{r(vi=>vi.filter(Oh=>Oh.id!==Fr))},5e3)},{vault:b,password:w,setPassword:k,withdrawAmount:N,setWithdrawAmount:R,withdrawNetwork:D,setWithdrawNetwork:O,showBackupModal:B,setShowBackupModal:z,backupKey:U,setBackupKey:$,showHLBackupModal:W,setShowHLBackupModal:H,hlBackupKey:F,setHLBackupKey:T,isImporting:_,setIsImporting:L,importKey:V,setImportKey:K,refreshBalance:te,connectOwnerWallet:G,disconnectOwnerWallet:q,createVault:M,unlockVault:P,requestAirdrop:Y,handleWithdraw:X,handleWithdrawHL:se,handleWithdrawPM:oe,importVault:me,resolveTokenMint:ce,connectHLOwnerWallet:ve,disconnectHLOwnerWallet:Ne,refreshHLBalance:pe,isImportingSolana:Le,setIsImportingSolana:he,isImportingHyperliquid:Te,setIsImportingHyperliquid:Ge,isImportingPolymarket:We,setIsImportingPolymarket:Qe,solanaPassword:at,setSolanaPassword:rt,hyperliquidPassword:Xe,setHyperliquidPassword:ft,polymarketPassword:Me,setPolymarketPassword:pt,solanaImportKey:Kt,setSolanaImportKey:Re,hlImportKey:He,setHLImportKey:gt,pmImportKey:dt,setPMImportKey:ie,createSolanaVault:J,createHyperliquidVault:Z,createPolymarketVault:ue,importSolanaVault:Se,importHyperliquidVault:de,importPolymarketVault:ye,connectPMOwnerWallet:et,disconnectPMOwnerWallet:Ze,showPMBackupModal:lt,setShowPMBackupModal:$t,pmBackupKey:vt,setPMBackupKey:jt}=Gpt(v,(m==null?void 0:m.uid)||null),sn=!!(b.publicKey||b.hlPublicKey);A.useEffect(()=>{const Ar=[we.VAULT,we.PRIVACY,we.TERMS];sn&&!b.isUnlocked&&!Ar.includes(t)&&e(we.VAULT)},[t,b.isUnlocked,sn]),A.useEffect(()=>{b.isUnlocked&&e(we.DASHBOARD)},[b.isUnlocked]);const{portfolioHistoryDaily:tn,portfolioHistoryLongTerm:on,assetPrices:_i,assetAllocationData:Vn}=Kpt(b),{activityFeed:ae,activityDisplayCount:Q,addActivityLog:ee}=Wpt(b),{scheduledTasks:fe,setScheduledTasks:_e}=Ypt(b,w,v,te,ee),{messages:Oe,inputMessage:Ve,setInputMessage:Qt,isAiProcessing:Ht,aiStatus:ot,scrollRef:mn,handleSendMessage:At,activeConversationId:bn,loadConversation:ol,startNewConversation:ur}=fmt(b,w,_e,v,te,ee,ce);k0e(b,w);const yr=async Ar=>{try{const Fr=await Jo.loadConversation(Ar,w);Fr?ol(Fr):v("Failed to load conversation.")}catch(Fr){console.error(Fr),v("Error loading conversation. Check password.")}},Qc=()=>{ur(),e(we.AGENT)},Ql=async()=>{v("Refreshing data...");try{const Ar=[];b.publicKey&&Ar.push(te(b.publicKey)),b.hlPublicKey&&Ar.push(pe(b.hlPublicKey)),await Promise.all(Ar),v("Data refreshed successfully")}catch(Ar){console.error("Refresh failed",Ar),v("Failed to refresh data")}};return d.jsxs("div",{className:"flex h-screen bg-[#0f1015] text-[#e4e5e9] font-sans selection:bg-[#E7FE55]/30 overflow-hidden",children:[d.jsx(t4e,{activeTab:t,setActiveTab:e,isVaultUnlocked:b.isUnlocked,onSelectConversation:yr,onNewChat:Qc,currentConversationId:bn,password:w,isOpen:i,onClose:()=>s(!1)}),d.jsxs("main",{ref:y,className:`flex-1 ml-0 xl:ml-[264px] h-full flex flex-col relative transition-all duration-300 ${[we.VAULT_DEALER,we.DEALER_DASHBOARD,we.DEALER_THINKING,we.DEALER_CONFIG,we.DEALER_PROMPT,we.POLYMARKET_DEALER,we.POLYMARKET_DASHBOARD,we.POLYMARKET_THINKING,we.POLYMARKET_CONFIG,we.POLYMARKET_PROMPT,we.SOLANA_DEALER,we.SOLANA_DEALER_DASHBOARD,we.SOLANA_DEALER_THINKING,we.SOLANA_DEALER_POLICY,we.SOLANA_DEALER_LOG].includes(t)?"overflow-hidden":"overflow-y-auto"}`,children:[t===we.AGENT&&b.isUnlocked&&d.jsxs("header",{className:"flex justify-between items-center mb-0 sticky top-0 z-40 bg-[#0f1015] pt-8 pb-4 px-4 md:px-8 lg:px-12 xl:px-16 transition-all shrink-0 relative",children:[d.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[d.jsx("button",{onClick:()=>s(!0),className:"xl:hidden text-[#747580] hover:text-white transition-colors",children:d.jsx(vV,{size:24})}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-xl font-semibold text-white tracking-tight",children:"Vault Operator"}),d.jsx("p",{className:"text-[#747580] text-sm hidden sm:block",children:"Interact with Vault Operator using natural language."})]})]}),d.jsxs("div",{className:"hidden sm:flex items-center gap-2 absolute left-1/2 transform -translate-x-1/2",children:[d.jsxs("button",{onClick:Qc,className:"flex items-center gap-2 px-3 py-1.5 rounded bg-[#E7FE55] hover:bg-[#f0ff7a] text-black text-sm font-medium transition-colors",title:"New Chat",children:[d.jsx("div",{className:"w-5 h-5 rounded bg-black/20 flex items-center justify-center",children:d.jsx(Cl,{size:12,strokeWidth:2.5})}),d.jsx("span",{className:"hidden md:inline",children:"New"})]}),d.jsx("div",{className:"h-6 w-px bg-[#232328]"}),d.jsxs("button",{onClick:()=>e(we.HISTORY),className:"flex items-center gap-2 px-3 py-1.5 rounded bg-[#14151a] hover:bg-[#1a1b21] text-[#a0a1a8] hover:text-white text-sm font-medium transition-colors border border-[#232328]",title:"Chat History",children:[d.jsx(Hi,{size:14}),d.jsx("span",{className:"hidden md:inline",children:"History"})]}),d.jsxs("button",{onClick:()=>e(we.SCHEDULER),className:"flex items-center gap-2 px-3 py-1.5 rounded bg-[#14151a] hover:bg-[#1a1b21] text-[#a0a1a8] hover:text-white text-sm font-medium transition-colors border border-[#232328]",title:"Automations",children:[d.jsx(v8,{size:14}),d.jsx("span",{className:"hidden md:inline",children:"Automations"})]})]}),d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs("div",{className:"text-right hidden md:block",children:[d.jsx("div",{className:"text-[9px] uppercase tracking-[0.05em] text-[#5a5b63]",children:"System Status"}),d.jsxs("div",{className:"flex items-center justify-end gap-1.5 text-[#E7FE55] text-[11px] font-medium",children:[d.jsx("div",{className:"w-1 h-1 bg-[#E7FE55] rounded-full"}),"Online"]})]}),d.jsxs("div",{className:"relative",children:[d.jsx("button",{onClick:()=>a(!o),className:"flex items-center gap-2 p-1 rounded-lg hover:bg-[#1a1b21] transition-colors border border-transparent hover:border-[#232328]",title:(m==null?void 0:m.email)||"User",children:m!=null&&m.photoURL?d.jsx("img",{src:m.photoURL,alt:"User",className:"w-8 h-8 rounded-full border border-[#232328]"}):d.jsx("div",{className:"w-8 h-8 rounded-full bg-[#E7FE55] flex items-center justify-center text-black font-semibold text-sm",children:((Zl=(ca=m==null?void 0:m.email)==null?void 0:ca[0])==null?void 0:Zl.toUpperCase())||"U"})}),o&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>a(!1)}),d.jsxs("div",{className:"absolute right-0 top-full mt-2 w-64 bg-[#14151a] border border-[#232328] rounded-lg shadow-xl z-50 overflow-hidden",children:[d.jsx("div",{className:"px-4 py-3 border-b border-[#232328]",children:d.jsxs("div",{className:"flex items-center gap-3",children:[m!=null&&m.photoURL?d.jsx("img",{src:m.photoURL,alt:"User",className:"w-10 h-10 rounded-full border border-[#232328]"}):d.jsx("div",{className:"w-10 h-10 rounded-full bg-[#E7FE55] flex items-center justify-center text-black font-semibold",children:((Io=(_o=m==null?void 0:m.email)==null?void 0:_o[0])==null?void 0:Io.toUpperCase())||"U"}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:"text-white text-sm font-medium truncate",children:(m==null?void 0:m.displayName)||"User"}),d.jsx("p",{className:"text-[#747580] text-xs truncate",children:m==null?void 0:m.email})]})]})}),d.jsxs("div",{className:"p-2 space-y-1",children:[d.jsxs("button",{onClick:()=>{a(!1),Ql()},className:"w-full flex items-center gap-3 px-3 py-2 text-[#a0a1a8] hover:text-white hover:bg-[#1a1b21] rounded-lg transition-colors text-sm",children:[d.jsx($l,{size:16}),"Refresh Data"]}),d.jsxs("button",{onClick:()=>{a(!1),e(we.CONFIGURATION)},className:"w-full flex items-center gap-3 px-3 py-2 text-[#a0a1a8] hover:text-white hover:bg-[#1a1b21] rounded-lg transition-colors text-sm",children:[d.jsx(ik,{size:16}),"Configuration"]}),d.jsx("div",{className:"border-t border-[#232328] my-2"}),d.jsxs("button",{onClick:async()=>{a(!1),await g()},className:"w-full flex items-center gap-3 px-3 py-2 text-[#a0a1a8] hover:text-white hover:bg-[#1a1b21] rounded-lg transition-colors text-sm",children:[d.jsx(xV,{size:16}),"Sign Out"]})]})]})]})]})]})]}),d.jsxs("div",{className:`flex-1 pb-8 max-w-[1920px] mx-auto w-full ${t===we.AGENT?"px-6 md:px-24 lg:px-40 xl:px-64":"px-4 md:px-8 lg:px-12 xl:px-16"} ${[we.VAULT_DEALER,we.DEALER_DASHBOARD,we.DEALER_THINKING,we.DEALER_CONFIG,we.DEALER_PROMPT,we.POLYMARKET_DEALER,we.POLYMARKET_DASHBOARD,we.POLYMARKET_THINKING,we.POLYMARKET_CONFIG,we.POLYMARKET_PROMPT].includes(t)?"flex flex-col h-full":""}`,children:[t!==we.AGENT&&b.isUnlocked&&d.jsxs("header",{className:"flex justify-between items-center mb-6 sticky top-0 z-40 bg-[#0f1015] pt-8 pb-4 -mx-4 px-4 md:px-0 md:-mx-0 transition-all shrink-0",children:[d.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[d.jsx("button",{onClick:()=>s(!0),className:"xl:hidden text-[#747580] hover:text-white transition-colors",children:d.jsx(vV,{size:24})}),d.jsx("div",{className:"flex items-center gap-4",children:d.jsxs("div",{children:[d.jsxs("h2",{className:"text-xl font-semibold text-white tracking-tight",children:[t===we.DASHBOARD&&"Dashboard",t===we.VAULT&&"Vault",t===we.SCHEDULER&&"Automations",[we.VAULT_DEALER,we.DEALER_DASHBOARD,we.DEALER_THINKING,we.DEALER_CONFIG,we.DEALER_PROMPT].includes(t)&&"Hyperliquid Dealer",[we.SOLANA_DEALER,we.SOLANA_DEALER_DASHBOARD,we.SOLANA_DEALER_THINKING,we.SOLANA_DEALER_POLICY,we.SOLANA_DEALER_LOG].includes(t)&&"Solana Dealer",t===we.CONFIGURATION&&"Configuration",t===we.HYPERLIQUID&&"Hyperliquid Trading",t===we.HISTORY&&"History",t===we.TOKEN_COSTS&&"Token Costs",[we.POLYMARKET_DEALER,we.POLYMARKET_DASHBOARD].includes(t)&&"Polymarket Dealer",t===we.POLYMARKET_CONFIG&&"Polymarket Config",t===we.POLYMARKET_PROMPT&&"Polymarket Strategy"]}),d.jsxs("p",{className:"text-[#747580] text-sm hidden sm:block",children:[t===we.DASHBOARD&&"Overview of your autonomous DeFi agent.",t===we.VAULT&&"Manage your secure local vault and assets.",t===we.SCHEDULER&&"Automate swaps, transfers and trading strategies.",[we.VAULT_DEALER,we.DEALER_DASHBOARD,we.DEALER_THINKING,we.DEALER_CONFIG,we.DEALER_PROMPT].includes(t)&&"Autonomous trading engine (BETA).",[we.SOLANA_DEALER,we.SOLANA_DEALER_DASHBOARD,we.SOLANA_DEALER_THINKING,we.SOLANA_DEALER_POLICY,we.SOLANA_DEALER_LOG].includes(t)&&"Solana LP operations with Policy Engine.",t===we.CONFIGURATION&&"Configure trading parameters and risk management.",t===we.HYPERLIQUID&&"Trade on Hyperliquid Testnet.",t===we.HISTORY&&"Review past conversations.",t===we.TOKEN_COSTS&&"Monitor AI token consumption and costs.",[we.POLYMARKET_DEALER,we.POLYMARKET_DASHBOARD].includes(t)&&"Autonomous prediction market trading (BETA).",t===we.POLYMARKET_CONFIG&&"Configure Polymarket trading parameters.",t===we.POLYMARKET_PROMPT&&"Customize your Polymarket strategy."]})]})})]}),[we.VAULT_DEALER,we.DEALER_DASHBOARD,we.DEALER_THINKING,we.DEALER_CONFIG,we.DEALER_PROMPT].includes(t)&&d.jsxs("div",{className:"hidden sm:flex items-center gap-1 bg-[#1a1b21] p-1 rounded border border-[#232328] absolute left-1/2 transform -translate-x-1/2",children:[d.jsx("button",{onClick:()=>e(we.DEALER_DASHBOARD),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${[we.VAULT_DEALER,we.DEALER_DASHBOARD].includes(t)?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Dashboard"}),d.jsx("button",{onClick:()=>e(we.DEALER_THINKING),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${t===we.DEALER_THINKING?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Thinking"}),d.jsx("button",{onClick:()=>e(we.DEALER_CONFIG),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${t===we.DEALER_CONFIG?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Configuration"}),d.jsx("button",{onClick:()=>e(we.DEALER_PROMPT),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${t===we.DEALER_PROMPT?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Prompt"})]}),[we.POLYMARKET_DEALER,we.POLYMARKET_DASHBOARD,we.POLYMARKET_THINKING,we.POLYMARKET_CONFIG,we.POLYMARKET_PROMPT].includes(t)&&d.jsxs("div",{className:"hidden sm:flex items-center gap-1 bg-[#1a1b21] p-1 rounded border border-[#232328] absolute left-1/2 transform -translate-x-1/2",children:[d.jsx("button",{onClick:()=>e(we.POLYMARKET_DASHBOARD),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${[we.POLYMARKET_DEALER,we.POLYMARKET_DASHBOARD].includes(t)?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Dashboard"}),d.jsx("button",{onClick:()=>e(we.POLYMARKET_THINKING),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${t===we.POLYMARKET_THINKING?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Thinking"}),d.jsx("button",{onClick:()=>e(we.POLYMARKET_CONFIG),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${t===we.POLYMARKET_CONFIG?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Configuration"}),d.jsx("button",{onClick:()=>e(we.POLYMARKET_PROMPT),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${t===we.POLYMARKET_PROMPT?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Prompt"})]}),[we.SOLANA_DEALER,we.SOLANA_DEALER_DASHBOARD,we.SOLANA_DEALER_THINKING,we.SOLANA_DEALER_POLICY,we.SOLANA_DEALER_LOG].includes(t)&&d.jsxs("div",{className:"hidden sm:flex items-center gap-1 bg-[#1a1b21] p-1 rounded border border-[#232328] absolute left-1/2 transform -translate-x-1/2",children:[d.jsx("button",{onClick:()=>e(we.SOLANA_DEALER_DASHBOARD),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${[we.SOLANA_DEALER,we.SOLANA_DEALER_DASHBOARD].includes(t)?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Dashboard"}),d.jsx("button",{onClick:()=>e(we.SOLANA_DEALER_THINKING),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${t===we.SOLANA_DEALER_THINKING?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Thinking"}),d.jsx("button",{onClick:()=>e(we.SOLANA_DEALER_POLICY),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${t===we.SOLANA_DEALER_POLICY?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Policy"}),d.jsx("button",{onClick:()=>e(we.SOLANA_DEALER_LOG),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${t===we.SOLANA_DEALER_LOG?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Audit Log"})]}),t===we.CONFIGURATION&&d.jsxs("div",{className:"hidden sm:flex items-center gap-1 bg-[#1a1b21] p-1 rounded border border-[#232328] absolute left-1/2 transform -translate-x-1/2",children:[d.jsx("button",{onClick:()=>c("providers"),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${l==="providers"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"AI Providers"}),d.jsx("button",{onClick:()=>c("user"),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${l==="user"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"User Settings"})]}),t===we.VAULT&&d.jsxs("div",{className:"hidden sm:flex items-center gap-1 bg-[#1a1b21] p-1 rounded border border-[#232328] absolute left-1/2 transform -translate-x-1/2",children:[d.jsx("button",{onClick:()=>h("main"),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${u==="main"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Overview"}),d.jsx("button",{onClick:()=>h("solana"),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${u==="solana"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Solana"}),d.jsx("button",{onClick:()=>h("hyperliquid"),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${u==="hyperliquid"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Hyperliquid"}),d.jsx("button",{onClick:()=>h("polymarket"),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${u==="polymarket"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Polymarket"})]}),d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs("div",{className:"text-right hidden md:block",children:[d.jsx("div",{className:"text-[9px] uppercase tracking-[0.05em] text-[#5a5b63]",children:"System Status"}),d.jsxs("div",{className:"flex items-center justify-end gap-1.5 text-[#E7FE55] text-[11px] font-medium",children:[d.jsx("div",{className:"w-1 h-1 bg-[#E7FE55] rounded-full"}),"Online"]})]}),d.jsxs("div",{className:"relative",children:[d.jsx("button",{onClick:()=>a(!o),className:"flex items-center gap-2 p-1 rounded-lg hover:bg-[#1a1b21] transition-colors border border-transparent hover:border-[#232328]",title:(m==null?void 0:m.email)||"User",children:m!=null&&m.photoURL?d.jsx("img",{src:m.photoURL,alt:"User",className:"w-8 h-8 rounded-full border border-[#232328]"}):d.jsx("div",{className:"w-8 h-8 rounded-full bg-[#E7FE55] flex items-center justify-center text-black font-semibold text-sm",children:((Ro=(ua=m==null?void 0:m.email)==null?void 0:ua[0])==null?void 0:Ro.toUpperCase())||"U"})}),o&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>a(!1)}),d.jsxs("div",{className:"absolute right-0 top-full mt-2 w-64 bg-[#14151a] border border-[#232328] rounded-lg shadow-xl z-50 overflow-hidden",children:[d.jsx("div",{className:"px-4 py-3 border-b border-[#232328]",children:d.jsxs("div",{className:"flex items-center gap-3",children:[m!=null&&m.photoURL?d.jsx("img",{src:m.photoURL,alt:"User",className:"w-10 h-10 rounded-full border border-[#232328]"}):d.jsx("div",{className:"w-10 h-10 rounded-full bg-[#E7FE55] flex items-center justify-center text-black font-semibold",children:((Zc=(xr=m==null?void 0:m.email)==null?void 0:xr[0])==null?void 0:Zc.toUpperCase())||"U"}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:"text-white text-sm font-medium truncate",children:(m==null?void 0:m.displayName)||"User"}),d.jsx("p",{className:"text-[#747580] text-xs truncate",children:m==null?void 0:m.email})]})]})}),d.jsxs("div",{className:"p-2 space-y-1",children:[d.jsxs("button",{onClick:()=>{a(!1),Ql()},className:"w-full flex items-center gap-3 px-3 py-2 text-[#a0a1a8] hover:text-white hover:bg-[#1a1b21] rounded-lg transition-colors text-sm",children:[d.jsx($l,{size:16}),"Refresh Data"]}),d.jsxs("button",{onClick:()=>{a(!1),e(we.CONFIGURATION)},className:"w-full flex items-center gap-3 px-3 py-2 text-[#a0a1a8] hover:text-white hover:bg-[#1a1b21] rounded-lg transition-colors text-sm",children:[d.jsx(ik,{size:16}),"Configuration"]}),d.jsx("div",{className:"border-t border-[#232328] my-2"}),d.jsxs("button",{onClick:async()=>{a(!1),await g()},className:"w-full flex items-center gap-3 px-3 py-2 text-[#a0a1a8] hover:text-white hover:bg-[#1a1b21] rounded-lg transition-colors text-sm",children:[d.jsx(xV,{size:16}),"Sign Out"]})]})]})]})]})]})]}),(()=>{const Ar=[we.VAULT,we.PRIVACY,we.TERMS];return!sn||b.isUnlocked||Ar.includes(t)?d.jsxs("div",{className:`animate-fade-in ${[we.VAULT_DEALER,we.DEALER_DASHBOARD,we.DEALER_THINKING,we.DEALER_CONFIG,we.DEALER_PROMPT,we.POLYMARKET_DEALER,we.POLYMARKET_DASHBOARD,we.POLYMARKET_THINKING,we.POLYMARKET_CONFIG,we.POLYMARKET_PROMPT].includes(t)?"flex-1 min-h-0":""}`,children:[t===we.DASHBOARD&&d.jsx(wKe,{vault:b,connectOwnerWallet:G,disconnectOwnerWallet:q,connectHLOwnerWallet:ve,disconnectHLOwnerWallet:Ne,connectPMOwnerWallet:et,disconnectPMOwnerWallet:Ze,assetPrices:_i,portfolioHistoryDaily:tn,portfolioHistoryLongTerm:on,scheduledTasks:fe,assetAllocationData:Vn,activityFeed:ae,activityDisplayCount:Q,setActiveTab:e,refreshData:Ql,onNewChat:Qc,setActivityDisplayCount:function(vi){throw new Error("Function not implemented.")}}),t===we.VAULT&&d.jsx(EKe,{vault:b,password:w,setPassword:k,withdrawAmount:N,setWithdrawAmount:R,withdrawNetwork:D,setWithdrawNetwork:O,isImporting:_,setIsImporting:L,importKey:V,setImportKey:K,createVault:M,unlockVault:P,requestAirdrop:Y,handleWithdraw:X,handleWithdrawHL:se,handleWithdrawPM:oe,importVault:me,addNotification:v,isImportingSolana:Le,setIsImportingSolana:he,isImportingHyperliquid:Te,setIsImportingHyperliquid:Ge,isImportingPolymarket:We,setIsImportingPolymarket:Qe,solanaPassword:at,setSolanaPassword:rt,hyperliquidPassword:Xe,setHyperliquidPassword:ft,polymarketPassword:Me,setPolymarketPassword:pt,solanaImportKey:Kt,setSolanaImportKey:Re,hlImportKey:He,setHLImportKey:gt,pmImportKey:dt,setPMImportKey:ie,createSolanaVault:J,createHyperliquidVault:Z,createPolymarketVault:ue,importSolanaVault:Se,importHyperliquidVault:de,importPolymarketVault:ye,setActiveTab:e,activeVaultTab:u,setActiveVaultTab:h}),t===we.AGENT&&d.jsx(bet,{messages:Oe,inputMessage:Ve,setInputMessage:Qt,handleSendMessage:At,isAiProcessing:Ht,aiStatus:ot,scrollRef:mn,isVaultUnlocked:b.isUnlocked,password:w,setPassword:k,unlockVault:P,hasVault:!!(b.publicKey||b.hlPublicKey),onNavigate:e}),t===we.HISTORY&&d.jsx(vmt,{onSelectConversation:vi=>{yr(vi),e(we.AGENT)}}),t===we.SCHEDULER&&d.jsx(Eet,{scheduledTasks:fe,setScheduledTasks:_e,addNotification:v}),[we.VAULT_DEALER,we.DEALER_DASHBOARD,we.DEALER_THINKING,we.DEALER_CONFIG,we.DEALER_PROMPT].includes(t)&&d.jsx(rct,{vault:b,password:w,activeTab:t,setActiveTab:e}),t===we.CONFIGURATION&&d.jsx(c0t,{vault:b,password:w,addNotification:v,activeTab:l,setActiveTab:c}),t===we.HYPERLIQUID&&d.jsx(ict,{vault:b,connectHLOwnerWallet:ve,refreshHLBalance:pe,activityLog:ae}),t===we.TOKEN_COSTS&&d.jsx(d0t,{addNotification:v}),[we.POLYMARKET_DEALER,we.POLYMARKET_DASHBOARD,we.POLYMARKET_THINKING,we.POLYMARKET_CONFIG,we.POLYMARKET_PROMPT].includes(t)&&d.jsx(v0t,{vault:b,password:w,activeTab:t,setActiveTab:e}),[we.SOLANA_DEALER,we.SOLANA_DEALER_DASHBOARD,we.SOLANA_DEALER_THINKING,we.SOLANA_DEALER_POLICY,we.SOLANA_DEALER_LOG].includes(t)&&d.jsx(T0t,{activeTab:t,walletAddress:b.publicKey||void 0}),t===we.PRIVACY&&d.jsx(uge,{onBack:()=>e(we.DASHBOARD)}),t===we.TERMS&&d.jsx(dge,{onBack:()=>e(we.DASHBOARD)})]}):null})()]}),t!==we.AGENT&&d.jsx(N0t,{onNavigate:e})]}),d.jsx("div",{className:"fixed bottom-6 right-6 z-[60] space-y-2 pointer-events-none",children:n.map(Ar=>d.jsxs("div",{className:"bg-[#14151a] border border-[#232328] text-white px-4 py-3 rounded shadow-xl flex items-center gap-3 animate-slide-up pointer-events-auto max-w-sm",children:[d.jsx("div",{className:"w-1.5 h-1.5 bg-[#E7FE55] rounded-full"}),d.jsx("span",{className:"text-sm font-medium",children:Ar.message}),d.jsx("button",{onClick:()=>r(Fr=>Fr.filter(vi=>vi.id!==Ar.id)),className:"text-[#747580] hover:text-white ml-2",children:d.jsx(hx,{size:14})})]},Ar.id))}),B&&d.jsx(gut,{backupKey:U,setBackupKey:$,setShowBackupModal:z,addNotification:v,onClose:()=>{H(!0)}}),W&&d.jsx(yut,{backupKey:F,setBackupKey:T,setShowBackupModal:H,addNotification:v}),lt&&d.jsx(xut,{backupKey:vt,setBackupKey:jt,setShowBackupModal:$t,addNotification:v}),d.jsx(k0t,{userId:(m==null?void 0:m.uid)||null})]})}function P0t(){const{signInWithGoogle:t,signInWithGitHub:e,signInWithDiscord:n,signInWithEthereum:r,signInWithSolana:i,signInWithEmail:s,signUp:o}=B1(),[a,l]=A.useState(""),[c,u]=A.useState(""),[h,m]=A.useState(!1),[g,y]=A.useState(!1),[v,b]=A.useState(null),[w,k]=A.useState(!1),[N,R]=A.useState(null),D=async z=>{b(null),R(z);try{z==="google"?await t():z==="github"?await e():z==="discord"&&await n()}catch(U){b(U.message||`Failed to sign in with ${z}`)}finally{R(null)}},O=async z=>{b(null),R(z);try{z==="ethereum"?await r():await i()}catch(U){b(U.message||`Failed to sign in with ${z}`)}finally{R(null)}},B=async z=>{z.preventDefault(),b(null),k(!0);try{h?await o(a,c):await s(a,c)}catch(U){const $=U.code||"";$.includes("user-not-found")?b("No account found with this email"):$.includes("wrong-password")?b("Incorrect password"):$.includes("email-already-in-use")?b("An account already exists with this email"):$.includes("weak-password")?b("Password should be at least 6 characters"):$.includes("invalid-email")?b("Invalid email address"):b(U.message||"Authentication failed")}finally{k(!1)}};return d.jsx("div",{className:"min-h-screen bg-[#0f1015] flex items-center justify-center p-4",children:d.jsxs("div",{className:"w-full max-w-md",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-[#E7FE55] to-[#c8e044] rounded-2xl mb-4 shadow-lg shadow-[#E7FE55]/20",children:d.jsxs("svg",{className:"w-8 h-8 text-black",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"}),d.jsx("path",{d:"M12 8v4"}),d.jsx("path",{d:"M12 16h.01"})]})}),d.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"AutonomousVault"}),d.jsx("p",{className:"text-[#747580] text-sm",children:"Multi-Chain DeFi Agent"})]}),d.jsxs("div",{className:"bg-[#14151a] border border-[#232328] rounded-xl p-6 shadow-xl",children:[d.jsx("h2",{className:"text-lg font-semibold text-white mb-6 text-center",children:h?"Create Account":"Welcome Back"}),v&&d.jsxs("div",{className:"flex items-center gap-2 bg-red-500/10 border border-red-500/30 text-red-400 px-4 py-3 rounded-lg mb-4",children:[d.jsx(b8,{size:16}),d.jsx("span",{className:"text-sm",children:v})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[d.jsxs("button",{onClick:()=>D("google"),disabled:N!==null,className:"flex items-center justify-center gap-2 bg-white hover:bg-gray-100 text-gray-800 font-medium py-3 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[d.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[d.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),d.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),d.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),d.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),N==="google"?"...":"Google"]}),d.jsxs("button",{onClick:()=>D("github"),disabled:N!==null,className:"flex items-center justify-center gap-2 bg-[#24292e] hover:bg-[#2d3339] text-white font-medium py-3 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[d.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C6.477 2 2 6.477 2 12c0 4.42 2.865 8.17 6.839 9.49.5.092.682-.217.682-.482 0-.237-.008-.866-.013-1.7-2.782.604-3.369-1.34-3.369-1.34-.454-1.156-1.11-1.463-1.11-1.463-.908-.62.069-.608.069-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.087 2.91.831.092-.646.35-1.086.636-1.336-2.22-.253-4.555-1.11-4.555-4.943 0-1.091.39-1.984 1.029-2.683-.103-.253-.446-1.27.098-2.647 0 0 .84-.269 2.75 1.025A9.564 9.564 0 0112 6.844c.85.004 1.705.114 2.504.336 1.909-1.294 2.747-1.025 2.747-1.025.546 1.377.203 2.394.1 2.647.64.699 1.028 1.592 1.028 2.683 0 3.842-2.339 4.687-4.566 4.935.359.309.678.919.678 1.852 0 1.336-.012 2.415-.012 2.743 0 .267.18.578.688.48C19.138 20.167 22 16.418 22 12c0-5.523-4.477-10-10-10z"})}),N==="github"?"...":"GitHub"]}),d.jsxs("button",{onClick:()=>D("discord"),disabled:N!==null,className:"flex items-center justify-center gap-2 bg-[#5865F2] hover:bg-[#4752c4] text-white font-medium py-3 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[d.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{d:"M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028 14.09 14.09 0 0 0 1.226-1.994.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"})}),N==="discord"?"...":"Discord"]}),d.jsxs("button",{onClick:()=>O("ethereum"),disabled:N!==null,className:"flex items-center justify-center gap-2 bg-[#627EEA] hover:bg-[#5470d4] text-white font-medium py-3 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Sign in with Ethereum wallet (MetaMask, etc.)",children:[d.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:[d.jsx("path",{d:"M12 1.5l-9 15.5L12 22l9-5-9-15.5zM12 22v-5l9-5-9 10z",opacity:"0.6"}),d.jsx("path",{d:"M12 1.5v8l9 5.5-9-13.5zM12 1.5L3 17l9-7.5V1.5z"})]}),N==="ethereum"?"...":"ETH"]}),d.jsxs("button",{onClick:()=>O("solana"),disabled:N!==null,className:"flex items-center justify-center gap-2 bg-gradient-to-r from-[#9945FF] to-[#14F195] hover:opacity-90 text-white font-medium py-3 px-4 rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",title:"Sign in with Solana wallet (Phantom, etc.)",children:[d.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:d.jsx("path",{d:"M4.5 17.88l2.12-2.12a.75.75 0 01.53-.22H19.5a.75.75 0 01.53 1.28l-2.12 2.12a.75.75 0 01-.53.22H4.5a.75.75 0 01-.53-1.28h.03zM4.5 5.88A.75.75 0 015.03 4.6l2.12-2.12a.75.75 0 01.53-.22H19.5a.75.75 0 01.53 1.28L17.91 5.66a.75.75 0 01-.53.22H4.5zM19.5 11.88l-2.12-2.12a.75.75 0 00-.53-.22H4.5a.75.75 0 00-.53 1.28l2.12 2.12a.75.75 0 00.53.22H19.5a.75.75 0 00.53-1.28z"})}),N==="solana"?"...":"SOL"]})]}),d.jsxs("div",{className:"flex items-center gap-4 my-6",children:[d.jsx("div",{className:"flex-1 h-px bg-[#232328]"}),d.jsx("span",{className:"text-[#5a5b63] text-xs uppercase tracking-wider",children:"or continue with email"}),d.jsx("div",{className:"flex-1 h-px bg-[#232328]"})]}),d.jsxs("form",{onSubmit:B,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-[#a0a1a8] text-sm mb-2",children:"Email"}),d.jsxs("div",{className:"relative",children:[d.jsx(wke,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-[#5a5b63]"}),d.jsx("input",{type:"email",value:a,onChange:z=>l(z.target.value),placeholder:"you@example.com",required:!0,className:"w-full bg-[#0f1015] border border-[#232328] rounded-lg py-3 pl-10 pr-4 text-white placeholder-[#5a5b63] focus:outline-none focus:border-[#E7FE55] focus:ring-1 focus:ring-[#E7FE55]/20 transition-colors"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-[#a0a1a8] text-sm mb-2",children:"Password"}),d.jsxs("div",{className:"relative",children:[d.jsx(uh,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-[#5a5b63]"}),d.jsx("input",{type:g?"text":"password",value:c,onChange:z=>u(z.target.value),placeholder:"",required:!0,minLength:6,className:"w-full bg-[#0f1015] border border-[#232328] rounded-lg py-3 pl-10 pr-12 text-white placeholder-[#5a5b63] focus:outline-none focus:border-[#E7FE55] focus:ring-1 focus:ring-[#E7FE55]/20 transition-colors"}),d.jsx("button",{type:"button",onClick:()=>y(!g),className:"absolute right-3 top-1/2 -translate-y-1/2 text-[#5a5b63] hover:text-[#a0a1a8] transition-colors",children:g?d.jsx(xN,{size:16}):d.jsx(S8,{size:16})})]})]}),d.jsx("button",{type:"submit",disabled:w,className:"w-full bg-[#E7FE55] hover:bg-[#f0ff7a] text-black font-semibold py-3 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:w?"Loading...":h?"Create Account":"Sign In"})]}),d.jsxs("p",{className:"text-center text-[#747580] text-sm mt-6",children:[h?"Already have an account?":"Don't have an account?"," ",d.jsx("button",{onClick:()=>{m(!h),b(null)},className:"text-[#E7FE55] hover:underline font-medium",children:h?"Sign In":"Sign Up"})]})]}),d.jsxs("p",{className:"text-center text-[#5a5b63] text-xs mt-6",children:["By continuing, you agree to our"," ",d.jsx("a",{href:"/terms",target:"_blank",rel:"noopener noreferrer",className:"text-[#E7FE55] hover:underline",children:"Terms of Use"})," ","and"," ",d.jsx("a",{href:"/privacy",target:"_blank",rel:"noopener noreferrer",className:"text-[#E7FE55] hover:underline",children:"Privacy Policy"})]})]})})}function _0t({children:t}){const{user:e,loading:n}=B1();return n?d.jsx("div",{className:"h-screen w-screen bg-[#0f1015] flex items-center justify-center",children:d.jsxs("div",{className:"flex flex-col items-center gap-4",children:[d.jsxs("div",{className:"relative w-12 h-12",children:[d.jsx("div",{className:"absolute inset-0 border-2 border-[#232328] rounded-full"}),d.jsx("div",{className:"absolute inset-0 border-2 border-transparent border-t-[#E7FE55] rounded-full animate-spin"})]}),d.jsx("p",{className:"text-[#747580] text-sm",children:"Loading..."})]})}):e?d.jsx(d.Fragment,{children:t}):d.jsx(P0t,{})}vy.initializeProductionSecurity();const fge=document.getElementById("root");if(!fge)throw new Error("Failed to find the root element");const Z4=Hxe.createRoot(fge),Dee=window.location.pathname;Dee==="/terms"?Z4.render(d.jsx(_s.StrictMode,{children:d.jsx("div",{className:"min-h-screen bg-[#0f1015] text-[#e4e5e9]",children:d.jsx(dge,{onBack:()=>window.location.href="/"})})})):Dee==="/privacy"?Z4.render(d.jsx(_s.StrictMode,{children:d.jsx("div",{className:"min-h-screen bg-[#0f1015] text-[#e4e5e9]",children:d.jsx(uge,{onBack:()=>window.location.href="/"})})})):Z4.render(d.jsx(_s.StrictMode,{children:d.jsx(Uwe,{children:d.jsx(_0t,{children:d.jsx(C0t,{})})})}));export{zm as $,dee as A,ln as B,Dpt as C,ud as D,jr as E,ey as F,r2e as G,lk as H,aM as I,Bt as J,oa as K,Ee as L,uM as M,bse as N,c_e as O,mt as P,Ye as Q,mCe as R,see as S,Bi as T,X_e as U,Cc as V,fd as W,Cs as X,B_e as Y,Pl as Z,Qn as _,Ux as a,yM as a$,ds as a0,$w as a1,V8 as a2,sy as a3,Xx as a4,Y_e as a5,kse as a6,Rr as a7,Nt as a8,en as a9,C_e as aA,ck as aB,Em as aC,Tc as aD,MN as aE,qw as aF,fw as aG,yH as aH,kR as aI,Y1 as aJ,e_e as aK,lCe as aL,Sx as aM,y_e as aN,RN as aO,ps as aP,px as aQ,no as aR,Mc as aS,dm as aT,t_e as aU,dse as aV,Vw as aW,Bs as aX,bm as aY,pse as aZ,f2e as a_,Z8 as aa,J_e as ab,gr as ac,tIe as ad,rIe as ae,Am as af,yk as ag,r_e as ah,Yu as ai,a_e as aj,o_e as ak,Y8 as al,mse as am,LN as an,gk as ao,n_e as ap,bo as aq,H0t as ar,Ac as as,W8 as at,ure as au,Pu as av,bH as aw,TH as ax,x2e as ay,th as az,$pt as b,nh as b0,nIe as b1,Lw as b2,VV as b3,ire as b4,sre as b5,Eh as b6,Pie as b7,B0t as b8,W1 as b9,Xie as bA,hd as bB,K0t as bC,Tie as bD,bN as bE,C8 as bF,DH as bG,MH as bH,Y0t as bI,Np as bJ,sM as bK,j0t as bL,T2e as bM,kN as bN,$i as bO,M0t as bP,dd as bQ,q1 as bR,i2e as bS,L0t as bT,k2e as bU,W0t as bV,J0t as bW,X0t as bX,rre as bY,zw as ba,mr as bb,a2e as bc,l2e as bd,G1 as be,jH as bf,AIe as bg,SIe as bh,OR as bi,RPe as bj,cre as bk,c2e as bl,Oc as bm,jse as bn,Dse as bo,IPe as bp,D0t as bq,bre as br,ok as bs,Q0t as bt,fs as bu,G0t as bv,q0t as bw,Z0t as bx,wN as by,_ie as bz,$Z as c,gdt as d,Ngt as e,Ga as f,gs as g,r0e as h,Gx as i,Sh as j,Kn as k,Kx as l,Yx as m,Qa as n,j8 as o,bee as p,xe as q,td as r,Wx as s,st as t,y0e as u,On as v,bt as w,mi as x,xn as y,lre as z};
