var zye=Object.defineProperty;var Y9=t=>{throw TypeError(t)};var Hye=(t,e,n)=>e in t?zye(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Se=(t,e,n)=>Hye(t,typeof e!="symbol"?e+"":e,n),lP=(t,e,n)=>e.has(t)||Y9("Cannot "+n);var ie=(t,e,n)=>(lP(t,e,"read from private field"),n?n.call(t):e.get(t)),Be=(t,e,n)=>e.has(t)?Y9("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),ge=(t,e,n,r)=>(lP(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),tt=(t,e,n)=>(lP(t,e,"access private method"),n);var nb=(t,e,n,r)=>({set _(i){ge(t,e,i,n)},get _(){return ie(t,e,r)}});function Vye(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var mL={},GC={};GC.byteLength=Kye;GC.toByteArray=Yye;GC.fromByteArray=Qye;var fc=[],Ta=[],qye=typeof Uint8Array<"u"?Uint8Array:Array,cP="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var P0=0,Gye=cP.length;P0<Gye;++P0)fc[P0]=cP[P0],Ta[cP.charCodeAt(P0)]=P0;Ta[45]=62;Ta[95]=63;function cee(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function Kye(t){var e=cee(t),n=e[0],r=e[1];return(n+r)*3/4-r}function Wye(t,e,n){return(e+n)*3/4-n}function Yye(t){var e,n=cee(t),r=n[0],i=n[1],s=new qye(Wye(t,r,i)),o=0,a=i>0?r-4:r,l;for(l=0;l<a;l+=4)e=Ta[t.charCodeAt(l)]<<18|Ta[t.charCodeAt(l+1)]<<12|Ta[t.charCodeAt(l+2)]<<6|Ta[t.charCodeAt(l+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=Ta[t.charCodeAt(l)]<<2|Ta[t.charCodeAt(l+1)]>>4,s[o++]=e&255),i===1&&(e=Ta[t.charCodeAt(l)]<<10|Ta[t.charCodeAt(l+1)]<<4|Ta[t.charCodeAt(l+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function Jye(t){return fc[t>>18&63]+fc[t>>12&63]+fc[t>>6&63]+fc[t&63]}function Xye(t,e,n){for(var r,i=[],s=e;s<n;s+=3)r=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),i.push(Jye(r));return i.join("")}function Qye(t){for(var e,n=t.length,r=n%3,i=[],s=16383,o=0,a=n-r;o<a;o+=s)i.push(Xye(t,o,o+s>a?a:o+s));return r===1?(e=t[n-1],i.push(fc[e>>2]+fc[e<<4&63]+"==")):r===2&&(e=(t[n-2]<<8)+t[n-1],i.push(fc[e>>10]+fc[e>>4&63]+fc[e<<2&63]+"=")),i.join("")}var gL={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */gL.read=function(t,e,n,r,i){var s,o,a=i*8-r-1,l=(1<<a)-1,c=l>>1,u=-7,f=n?i-1:0,m=n?-1:1,g=t[e+f];for(f+=m,s=g&(1<<-u)-1,g>>=-u,u+=a;u>0;s=s*256+t[e+f],f+=m,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=r;u>0;o=o*256+t[e+f],f+=m,u-=8);if(s===0)s=1-c;else{if(s===l)return o?NaN:(g?-1:1)*(1/0);o=o+Math.pow(2,r),s=s-c}return(g?-1:1)*o*Math.pow(2,s-r)};gL.write=function(t,e,n,r,i,s){var o,a,l,c=s*8-i-1,u=(1<<c)-1,f=u>>1,m=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=r?0:s-1,v=r?1:-1,x=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+f>=1?e+=m/l:e+=m*Math.pow(2,1-f),e*l>=2&&(o++,l/=2),o+f>=u?(a=0,o=u):o+f>=1?(a=(e*l-1)*Math.pow(2,i),o=o+f):(a=e*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;t[n+g]=a&255,g+=v,a/=256,i-=8);for(o=o<<i|a,c+=i;c>0;t[n+g]=o&255,g+=v,o/=256,c-=8);t[n+g-v]|=x*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=GC,n=gL,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=u,t.SlowBuffer=U,t.INSPECT_MAX_BYTES=50;const i=2147483647;t.kMaxLength=i;const{Uint8Array:s,ArrayBuffer:o,SharedArrayBuffer:a}=globalThis;u.TYPED_ARRAY_SUPPORT=l(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{const se=new s(1),J={foo:function(){return 42}};return Object.setPrototypeOf(J,s.prototype),Object.setPrototypeOf(se,J),se.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function c(se){if(se>i)throw new RangeError('The value "'+se+'" is invalid for option "size"');const J=new s(se);return Object.setPrototypeOf(J,u.prototype),J}function u(se,J,Z){if(typeof se=="number"){if(typeof J=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return v(se)}return f(se,J,Z)}u.poolSize=8192;function f(se,J,Z){if(typeof se=="string")return x(se,J);if(o.isView(se))return E(se);if(se==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof se);if(ln(se,o)||se&&ln(se.buffer,o)||typeof a<"u"&&(ln(se,a)||se&&ln(se.buffer,a)))return C(se,J,Z);if(typeof se=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const fe=se.valueOf&&se.valueOf();if(fe!=null&&fe!==se)return u.from(fe,J,Z);const be=k(se);if(be)return be;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof se[Symbol.toPrimitive]=="function")return u.from(se[Symbol.toPrimitive]("string"),J,Z);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof se)}u.from=function(se,J,Z){return f(se,J,Z)},Object.setPrototypeOf(u.prototype,s.prototype),Object.setPrototypeOf(u,s);function m(se){if(typeof se!="number")throw new TypeError('"size" argument must be of type number');if(se<0)throw new RangeError('The value "'+se+'" is invalid for option "size"')}function g(se,J,Z){return m(se),se<=0?c(se):J!==void 0?typeof Z=="string"?c(se).fill(J,Z):c(se).fill(J):c(se)}u.alloc=function(se,J,Z){return g(se,J,Z)};function v(se){return m(se),c(se<0?0:O(se)|0)}u.allocUnsafe=function(se){return v(se)},u.allocUnsafeSlow=function(se){return v(se)};function x(se,J){if((typeof J!="string"||J==="")&&(J="utf8"),!u.isEncoding(J))throw new TypeError("Unknown encoding: "+J);const Z=R(se,J)|0;let fe=c(Z);const be=fe.write(se,J);return be!==Z&&(fe=fe.slice(0,be)),fe}function b(se){const J=se.length<0?0:O(se.length)|0,Z=c(J);for(let fe=0;fe<J;fe+=1)Z[fe]=se[fe]&255;return Z}function E(se){if(ln(se,s)){const J=new s(se);return C(J.buffer,J.byteOffset,J.byteLength)}return b(se)}function C(se,J,Z){if(J<0||se.byteLength<J)throw new RangeError('"offset" is outside of buffer bounds');if(se.byteLength<J+(Z||0))throw new RangeError('"length" is outside of buffer bounds');let fe;return J===void 0&&Z===void 0?fe=new s(se):Z===void 0?fe=new s(se,J):fe=new s(se,J,Z),Object.setPrototypeOf(fe,u.prototype),fe}function k(se){if(u.isBuffer(se)){const J=O(se.length)|0,Z=c(J);return Z.length===0||se.copy(Z,0,0,J),Z}if(se.length!==void 0)return typeof se.length!="number"||Pe(se.length)?c(0):b(se);if(se.type==="Buffer"&&Array.isArray(se.data))return b(se.data)}function O(se){if(se>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return se|0}function U(se){return+se!=se&&(se=0),u.alloc(+se)}u.isBuffer=function(J){return J!=null&&J._isBuffer===!0&&J!==u.prototype},u.compare=function(J,Z){if(ln(J,s)&&(J=u.from(J,J.offset,J.byteLength)),ln(Z,s)&&(Z=u.from(Z,Z.offset,Z.byteLength)),!u.isBuffer(J)||!u.isBuffer(Z))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(J===Z)return 0;let fe=J.length,be=Z.length;for(let he=0,ye=Math.min(fe,be);he<ye;++he)if(J[he]!==Z[he]){fe=J[he],be=Z[he];break}return fe<be?-1:be<fe?1:0},u.isEncoding=function(J){switch(String(J).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(J,Z){if(!Array.isArray(J))throw new TypeError('"list" argument must be an Array of Buffers');if(J.length===0)return u.alloc(0);let fe;if(Z===void 0)for(Z=0,fe=0;fe<J.length;++fe)Z+=J[fe].length;const be=u.allocUnsafe(Z);let he=0;for(fe=0;fe<J.length;++fe){let ye=J[fe];if(ln(ye,s))he+ye.length>be.length?(u.isBuffer(ye)||(ye=u.from(ye)),ye.copy(be,he)):s.prototype.set.call(be,ye,he);else if(u.isBuffer(ye))ye.copy(be,he);else throw new TypeError('"list" argument must be an Array of Buffers');he+=ye.length}return be};function R(se,J){if(u.isBuffer(se))return se.length;if(o.isView(se)||ln(se,o))return se.byteLength;if(typeof se!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof se);const Z=se.length,fe=arguments.length>2&&arguments[2]===!0;if(!fe&&Z===0)return 0;let be=!1;for(;;)switch(J){case"ascii":case"latin1":case"binary":return Z;case"utf8":case"utf-8":return ot(se).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Z*2;case"hex":return Z>>>1;case"base64":return Ge(se).length;default:if(be)return fe?-1:ot(se).length;J=(""+J).toLowerCase(),be=!0}}u.byteLength=R;function $(se,J,Z){let fe=!1;if((J===void 0||J<0)&&(J=0),J>this.length||((Z===void 0||Z>this.length)&&(Z=this.length),Z<=0)||(Z>>>=0,J>>>=0,Z<=J))return"";for(se||(se="utf8");;)switch(se){case"hex":return M(this,J,Z);case"utf8":case"utf-8":return z(this,J,Z);case"ascii":return K(this,J,Z);case"latin1":case"binary":return q(this,J,Z);case"base64":return D(this,J,Z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,J,Z);default:if(fe)throw new TypeError("Unknown encoding: "+se);se=(se+"").toLowerCase(),fe=!0}}u.prototype._isBuffer=!0;function V(se,J,Z){const fe=se[J];se[J]=se[Z],se[Z]=fe}u.prototype.swap16=function(){const J=this.length;if(J%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let Z=0;Z<J;Z+=2)V(this,Z,Z+1);return this},u.prototype.swap32=function(){const J=this.length;if(J%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let Z=0;Z<J;Z+=4)V(this,Z,Z+3),V(this,Z+1,Z+2);return this},u.prototype.swap64=function(){const J=this.length;if(J%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let Z=0;Z<J;Z+=8)V(this,Z,Z+7),V(this,Z+1,Z+6),V(this,Z+2,Z+5),V(this,Z+3,Z+4);return this},u.prototype.toString=function(){const J=this.length;return J===0?"":arguments.length===0?z(this,0,J):$.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(J){if(!u.isBuffer(J))throw new TypeError("Argument must be a Buffer");return this===J?!0:u.compare(this,J)===0},u.prototype.inspect=function(){let J="";const Z=t.INSPECT_MAX_BYTES;return J=this.toString("hex",0,Z).replace(/(.{2})/g,"$1 ").trim(),this.length>Z&&(J+=" ... "),"<Buffer "+J+">"},r&&(u.prototype[r]=u.prototype.inspect),u.prototype.compare=function(J,Z,fe,be,he){if(ln(J,s)&&(J=u.from(J,J.offset,J.byteLength)),!u.isBuffer(J))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof J);if(Z===void 0&&(Z=0),fe===void 0&&(fe=J?J.length:0),be===void 0&&(be=0),he===void 0&&(he=this.length),Z<0||fe>J.length||be<0||he>this.length)throw new RangeError("out of range index");if(be>=he&&Z>=fe)return 0;if(be>=he)return-1;if(Z>=fe)return 1;if(Z>>>=0,fe>>>=0,be>>>=0,he>>>=0,this===J)return 0;let ye=he-be,Xe=fe-Z;const et=Math.min(ye,Xe),st=this.slice(be,he),Ft=J.slice(Z,fe);for(let vt=0;vt<et;++vt)if(st[vt]!==Ft[vt]){ye=st[vt],Xe=Ft[vt];break}return ye<Xe?-1:Xe<ye?1:0};function j(se,J,Z,fe,be){if(se.length===0)return-1;if(typeof Z=="string"?(fe=Z,Z=0):Z>2147483647?Z=2147483647:Z<-2147483648&&(Z=-2147483648),Z=+Z,Pe(Z)&&(Z=be?0:se.length-1),Z<0&&(Z=se.length+Z),Z>=se.length){if(be)return-1;Z=se.length-1}else if(Z<0)if(be)Z=0;else return-1;if(typeof J=="string"&&(J=u.from(J,fe)),u.isBuffer(J))return J.length===0?-1:F(se,J,Z,fe,be);if(typeof J=="number")return J=J&255,typeof s.prototype.indexOf=="function"?be?s.prototype.indexOf.call(se,J,Z):s.prototype.lastIndexOf.call(se,J,Z):F(se,[J],Z,fe,be);throw new TypeError("val must be string, number or Buffer")}function F(se,J,Z,fe,be){let he=1,ye=se.length,Xe=J.length;if(fe!==void 0&&(fe=String(fe).toLowerCase(),fe==="ucs2"||fe==="ucs-2"||fe==="utf16le"||fe==="utf-16le")){if(se.length<2||J.length<2)return-1;he=2,ye/=2,Xe/=2,Z/=2}function et(Ft,vt){return he===1?Ft[vt]:Ft.readUInt16BE(vt*he)}let st;if(be){let Ft=-1;for(st=Z;st<ye;st++)if(et(se,st)===et(J,Ft===-1?0:st-Ft)){if(Ft===-1&&(Ft=st),st-Ft+1===Xe)return Ft*he}else Ft!==-1&&(st-=st-Ft),Ft=-1}else for(Z+Xe>ye&&(Z=ye-Xe),st=Z;st>=0;st--){let Ft=!0;for(let vt=0;vt<Xe;vt++)if(et(se,st+vt)!==et(J,vt)){Ft=!1;break}if(Ft)return st}return-1}u.prototype.includes=function(J,Z,fe){return this.indexOf(J,Z,fe)!==-1},u.prototype.indexOf=function(J,Z,fe){return j(this,J,Z,fe,!0)},u.prototype.lastIndexOf=function(J,Z,fe){return j(this,J,Z,fe,!1)};function W(se,J,Z,fe){Z=Number(Z)||0;const be=se.length-Z;fe?(fe=Number(fe),fe>be&&(fe=be)):fe=be;const he=J.length;fe>he/2&&(fe=he/2);let ye;for(ye=0;ye<fe;++ye){const Xe=parseInt(J.substr(ye*2,2),16);if(Pe(Xe))return ye;se[Z+ye]=Xe}return ye}function H(se,J,Z,fe){return Tt(ot(J,se.length-Z),se,Z,fe)}function B(se,J,Z,fe){return Tt(Bt(J),se,Z,fe)}function A(se,J,Z,fe){return Tt(Ge(J),se,Z,fe)}function I(se,J,Z,fe){return Tt(Zt(J,se.length-Z),se,Z,fe)}u.prototype.write=function(J,Z,fe,be){if(Z===void 0)be="utf8",fe=this.length,Z=0;else if(fe===void 0&&typeof Z=="string")be=Z,fe=this.length,Z=0;else if(isFinite(Z))Z=Z>>>0,isFinite(fe)?(fe=fe>>>0,be===void 0&&(be="utf8")):(be=fe,fe=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const he=this.length-Z;if((fe===void 0||fe>he)&&(fe=he),J.length>0&&(fe<0||Z<0)||Z>this.length)throw new RangeError("Attempt to write outside buffer bounds");be||(be="utf8");let ye=!1;for(;;)switch(be){case"hex":return W(this,J,Z,fe);case"utf8":case"utf-8":return H(this,J,Z,fe);case"ascii":case"latin1":case"binary":return B(this,J,Z,fe);case"base64":return A(this,J,Z,fe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,J,Z,fe);default:if(ye)throw new TypeError("Unknown encoding: "+be);be=(""+be).toLowerCase(),ye=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function D(se,J,Z){return J===0&&Z===se.length?e.fromByteArray(se):e.fromByteArray(se.slice(J,Z))}function z(se,J,Z){Z=Math.min(se.length,Z);const fe=[];let be=J;for(;be<Z;){const he=se[be];let ye=null,Xe=he>239?4:he>223?3:he>191?2:1;if(be+Xe<=Z){let et,st,Ft,vt;switch(Xe){case 1:he<128&&(ye=he);break;case 2:et=se[be+1],(et&192)===128&&(vt=(he&31)<<6|et&63,vt>127&&(ye=vt));break;case 3:et=se[be+1],st=se[be+2],(et&192)===128&&(st&192)===128&&(vt=(he&15)<<12|(et&63)<<6|st&63,vt>2047&&(vt<55296||vt>57343)&&(ye=vt));break;case 4:et=se[be+1],st=se[be+2],Ft=se[be+3],(et&192)===128&&(st&192)===128&&(Ft&192)===128&&(vt=(he&15)<<18|(et&63)<<12|(st&63)<<6|Ft&63,vt>65535&&vt<1114112&&(ye=vt))}}ye===null?(ye=65533,Xe=1):ye>65535&&(ye-=65536,fe.push(ye>>>10&1023|55296),ye=56320|ye&1023),fe.push(ye),be+=Xe}return te(fe)}const G=4096;function te(se){const J=se.length;if(J<=G)return String.fromCharCode.apply(String,se);let Z="",fe=0;for(;fe<J;)Z+=String.fromCharCode.apply(String,se.slice(fe,fe+=G));return Z}function K(se,J,Z){let fe="";Z=Math.min(se.length,Z);for(let be=J;be<Z;++be)fe+=String.fromCharCode(se[be]&127);return fe}function q(se,J,Z){let fe="";Z=Math.min(se.length,Z);for(let be=J;be<Z;++be)fe+=String.fromCharCode(se[be]);return fe}function M(se,J,Z){const fe=se.length;(!J||J<0)&&(J=0),(!Z||Z<0||Z>fe)&&(Z=fe);let be="";for(let he=J;he<Z;++he)be+=Ve[se[he]];return be}function _(se,J,Z){const fe=se.slice(J,Z);let be="";for(let he=0;he<fe.length-1;he+=2)be+=String.fromCharCode(fe[he]+fe[he+1]*256);return be}u.prototype.slice=function(J,Z){const fe=this.length;J=~~J,Z=Z===void 0?fe:~~Z,J<0?(J+=fe,J<0&&(J=0)):J>fe&&(J=fe),Z<0?(Z+=fe,Z<0&&(Z=0)):Z>fe&&(Z=fe),Z<J&&(Z=J);const be=this.subarray(J,Z);return Object.setPrototypeOf(be,u.prototype),be};function Y(se,J,Z){if(se%1!==0||se<0)throw new RangeError("offset is not uint");if(se+J>Z)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(J,Z,fe){J=J>>>0,Z=Z>>>0,fe||Y(J,Z,this.length);let be=this[J],he=1,ye=0;for(;++ye<Z&&(he*=256);)be+=this[J+ye]*he;return be},u.prototype.readUintBE=u.prototype.readUIntBE=function(J,Z,fe){J=J>>>0,Z=Z>>>0,fe||Y(J,Z,this.length);let be=this[J+--Z],he=1;for(;Z>0&&(he*=256);)be+=this[J+--Z]*he;return be},u.prototype.readUint8=u.prototype.readUInt8=function(J,Z){return J=J>>>0,Z||Y(J,1,this.length),this[J]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(J,Z){return J=J>>>0,Z||Y(J,2,this.length),this[J]|this[J+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(J,Z){return J=J>>>0,Z||Y(J,2,this.length),this[J]<<8|this[J+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(J,Z){return J=J>>>0,Z||Y(J,4,this.length),(this[J]|this[J+1]<<8|this[J+2]<<16)+this[J+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(J,Z){return J=J>>>0,Z||Y(J,4,this.length),this[J]*16777216+(this[J+1]<<16|this[J+2]<<8|this[J+3])},u.prototype.readBigUInt64LE=ht(function(J){J=J>>>0,Ze(J,"offset");const Z=this[J],fe=this[J+7];(Z===void 0||fe===void 0)&&Ye(J,this.length-8);const be=Z+this[++J]*2**8+this[++J]*2**16+this[++J]*2**24,he=this[++J]+this[++J]*2**8+this[++J]*2**16+fe*2**24;return BigInt(be)+(BigInt(he)<<BigInt(32))}),u.prototype.readBigUInt64BE=ht(function(J){J=J>>>0,Ze(J,"offset");const Z=this[J],fe=this[J+7];(Z===void 0||fe===void 0)&&Ye(J,this.length-8);const be=Z*2**24+this[++J]*2**16+this[++J]*2**8+this[++J],he=this[++J]*2**24+this[++J]*2**16+this[++J]*2**8+fe;return(BigInt(be)<<BigInt(32))+BigInt(he)}),u.prototype.readIntLE=function(J,Z,fe){J=J>>>0,Z=Z>>>0,fe||Y(J,Z,this.length);let be=this[J],he=1,ye=0;for(;++ye<Z&&(he*=256);)be+=this[J+ye]*he;return he*=128,be>=he&&(be-=Math.pow(2,8*Z)),be},u.prototype.readIntBE=function(J,Z,fe){J=J>>>0,Z=Z>>>0,fe||Y(J,Z,this.length);let be=Z,he=1,ye=this[J+--be];for(;be>0&&(he*=256);)ye+=this[J+--be]*he;return he*=128,ye>=he&&(ye-=Math.pow(2,8*Z)),ye},u.prototype.readInt8=function(J,Z){return J=J>>>0,Z||Y(J,1,this.length),this[J]&128?(255-this[J]+1)*-1:this[J]},u.prototype.readInt16LE=function(J,Z){J=J>>>0,Z||Y(J,2,this.length);const fe=this[J]|this[J+1]<<8;return fe&32768?fe|4294901760:fe},u.prototype.readInt16BE=function(J,Z){J=J>>>0,Z||Y(J,2,this.length);const fe=this[J+1]|this[J]<<8;return fe&32768?fe|4294901760:fe},u.prototype.readInt32LE=function(J,Z){return J=J>>>0,Z||Y(J,4,this.length),this[J]|this[J+1]<<8|this[J+2]<<16|this[J+3]<<24},u.prototype.readInt32BE=function(J,Z){return J=J>>>0,Z||Y(J,4,this.length),this[J]<<24|this[J+1]<<16|this[J+2]<<8|this[J+3]},u.prototype.readBigInt64LE=ht(function(J){J=J>>>0,Ze(J,"offset");const Z=this[J],fe=this[J+7];(Z===void 0||fe===void 0)&&Ye(J,this.length-8);const be=this[J+4]+this[J+5]*2**8+this[J+6]*2**16+(fe<<24);return(BigInt(be)<<BigInt(32))+BigInt(Z+this[++J]*2**8+this[++J]*2**16+this[++J]*2**24)}),u.prototype.readBigInt64BE=ht(function(J){J=J>>>0,Ze(J,"offset");const Z=this[J],fe=this[J+7];(Z===void 0||fe===void 0)&&Ye(J,this.length-8);const be=(Z<<24)+this[++J]*2**16+this[++J]*2**8+this[++J];return(BigInt(be)<<BigInt(32))+BigInt(this[++J]*2**24+this[++J]*2**16+this[++J]*2**8+fe)}),u.prototype.readFloatLE=function(J,Z){return J=J>>>0,Z||Y(J,4,this.length),n.read(this,J,!0,23,4)},u.prototype.readFloatBE=function(J,Z){return J=J>>>0,Z||Y(J,4,this.length),n.read(this,J,!1,23,4)},u.prototype.readDoubleLE=function(J,Z){return J=J>>>0,Z||Y(J,8,this.length),n.read(this,J,!0,52,8)},u.prototype.readDoubleBE=function(J,Z){return J=J>>>0,Z||Y(J,8,this.length),n.read(this,J,!1,52,8)};function X(se,J,Z,fe,be,he){if(!u.isBuffer(se))throw new TypeError('"buffer" argument must be a Buffer instance');if(J>be||J<he)throw new RangeError('"value" argument is out of bounds');if(Z+fe>se.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(J,Z,fe,be){if(J=+J,Z=Z>>>0,fe=fe>>>0,!be){const Xe=Math.pow(2,8*fe)-1;X(this,J,Z,fe,Xe,0)}let he=1,ye=0;for(this[Z]=J&255;++ye<fe&&(he*=256);)this[Z+ye]=J/he&255;return Z+fe},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(J,Z,fe,be){if(J=+J,Z=Z>>>0,fe=fe>>>0,!be){const Xe=Math.pow(2,8*fe)-1;X(this,J,Z,fe,Xe,0)}let he=fe-1,ye=1;for(this[Z+he]=J&255;--he>=0&&(ye*=256);)this[Z+he]=J/ye&255;return Z+fe},u.prototype.writeUint8=u.prototype.writeUInt8=function(J,Z,fe){return J=+J,Z=Z>>>0,fe||X(this,J,Z,1,255,0),this[Z]=J&255,Z+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(J,Z,fe){return J=+J,Z=Z>>>0,fe||X(this,J,Z,2,65535,0),this[Z]=J&255,this[Z+1]=J>>>8,Z+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(J,Z,fe){return J=+J,Z=Z>>>0,fe||X(this,J,Z,2,65535,0),this[Z]=J>>>8,this[Z+1]=J&255,Z+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(J,Z,fe){return J=+J,Z=Z>>>0,fe||X(this,J,Z,4,4294967295,0),this[Z+3]=J>>>24,this[Z+2]=J>>>16,this[Z+1]=J>>>8,this[Z]=J&255,Z+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(J,Z,fe){return J=+J,Z=Z>>>0,fe||X(this,J,Z,4,4294967295,0),this[Z]=J>>>24,this[Z+1]=J>>>16,this[Z+2]=J>>>8,this[Z+3]=J&255,Z+4};function re(se,J,Z,fe,be){$e(J,fe,be,se,Z,7);let he=Number(J&BigInt(4294967295));se[Z++]=he,he=he>>8,se[Z++]=he,he=he>>8,se[Z++]=he,he=he>>8,se[Z++]=he;let ye=Number(J>>BigInt(32)&BigInt(4294967295));return se[Z++]=ye,ye=ye>>8,se[Z++]=ye,ye=ye>>8,se[Z++]=ye,ye=ye>>8,se[Z++]=ye,Z}function oe(se,J,Z,fe,be){$e(J,fe,be,se,Z,7);let he=Number(J&BigInt(4294967295));se[Z+7]=he,he=he>>8,se[Z+6]=he,he=he>>8,se[Z+5]=he,he=he>>8,se[Z+4]=he;let ye=Number(J>>BigInt(32)&BigInt(4294967295));return se[Z+3]=ye,ye=ye>>8,se[Z+2]=ye,ye=ye>>8,se[Z+1]=ye,ye=ye>>8,se[Z]=ye,Z+8}u.prototype.writeBigUInt64LE=ht(function(J,Z=0){return re(this,J,Z,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=ht(function(J,Z=0){return oe(this,J,Z,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(J,Z,fe,be){if(J=+J,Z=Z>>>0,!be){const et=Math.pow(2,8*fe-1);X(this,J,Z,fe,et-1,-et)}let he=0,ye=1,Xe=0;for(this[Z]=J&255;++he<fe&&(ye*=256);)J<0&&Xe===0&&this[Z+he-1]!==0&&(Xe=1),this[Z+he]=(J/ye>>0)-Xe&255;return Z+fe},u.prototype.writeIntBE=function(J,Z,fe,be){if(J=+J,Z=Z>>>0,!be){const et=Math.pow(2,8*fe-1);X(this,J,Z,fe,et-1,-et)}let he=fe-1,ye=1,Xe=0;for(this[Z+he]=J&255;--he>=0&&(ye*=256);)J<0&&Xe===0&&this[Z+he+1]!==0&&(Xe=1),this[Z+he]=(J/ye>>0)-Xe&255;return Z+fe},u.prototype.writeInt8=function(J,Z,fe){return J=+J,Z=Z>>>0,fe||X(this,J,Z,1,127,-128),J<0&&(J=255+J+1),this[Z]=J&255,Z+1},u.prototype.writeInt16LE=function(J,Z,fe){return J=+J,Z=Z>>>0,fe||X(this,J,Z,2,32767,-32768),this[Z]=J&255,this[Z+1]=J>>>8,Z+2},u.prototype.writeInt16BE=function(J,Z,fe){return J=+J,Z=Z>>>0,fe||X(this,J,Z,2,32767,-32768),this[Z]=J>>>8,this[Z+1]=J&255,Z+2},u.prototype.writeInt32LE=function(J,Z,fe){return J=+J,Z=Z>>>0,fe||X(this,J,Z,4,2147483647,-2147483648),this[Z]=J&255,this[Z+1]=J>>>8,this[Z+2]=J>>>16,this[Z+3]=J>>>24,Z+4},u.prototype.writeInt32BE=function(J,Z,fe){return J=+J,Z=Z>>>0,fe||X(this,J,Z,4,2147483647,-2147483648),J<0&&(J=4294967295+J+1),this[Z]=J>>>24,this[Z+1]=J>>>16,this[Z+2]=J>>>8,this[Z+3]=J&255,Z+4},u.prototype.writeBigInt64LE=ht(function(J,Z=0){return re(this,J,Z,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=ht(function(J,Z=0){return oe(this,J,Z,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ee(se,J,Z,fe,be,he){if(Z+fe>se.length)throw new RangeError("Index out of range");if(Z<0)throw new RangeError("Index out of range")}function ce(se,J,Z,fe,be){return J=+J,Z=Z>>>0,be||Ee(se,J,Z,4),n.write(se,J,Z,fe,23,4),Z+4}u.prototype.writeFloatLE=function(J,Z,fe){return ce(this,J,Z,!0,fe)},u.prototype.writeFloatBE=function(J,Z,fe){return ce(this,J,Z,!1,fe)};function me(se,J,Z,fe,be){return J=+J,Z=Z>>>0,be||Ee(se,J,Z,8),n.write(se,J,Z,fe,52,8),Z+8}u.prototype.writeDoubleLE=function(J,Z,fe){return me(this,J,Z,!0,fe)},u.prototype.writeDoubleBE=function(J,Z,fe){return me(this,J,Z,!1,fe)},u.prototype.copy=function(J,Z,fe,be){if(!u.isBuffer(J))throw new TypeError("argument should be a Buffer");if(fe||(fe=0),!be&&be!==0&&(be=this.length),Z>=J.length&&(Z=J.length),Z||(Z=0),be>0&&be<fe&&(be=fe),be===fe||J.length===0||this.length===0)return 0;if(Z<0)throw new RangeError("targetStart out of bounds");if(fe<0||fe>=this.length)throw new RangeError("Index out of range");if(be<0)throw new RangeError("sourceEnd out of bounds");be>this.length&&(be=this.length),J.length-Z<be-fe&&(be=J.length-Z+fe);const he=be-fe;return this===J&&typeof s.prototype.copyWithin=="function"?this.copyWithin(Z,fe,be):s.prototype.set.call(J,this.subarray(fe,be),Z),he},u.prototype.fill=function(J,Z,fe,be){if(typeof J=="string"){if(typeof Z=="string"?(be=Z,Z=0,fe=this.length):typeof fe=="string"&&(be=fe,fe=this.length),be!==void 0&&typeof be!="string")throw new TypeError("encoding must be a string");if(typeof be=="string"&&!u.isEncoding(be))throw new TypeError("Unknown encoding: "+be);if(J.length===1){const ye=J.charCodeAt(0);(be==="utf8"&&ye<128||be==="latin1")&&(J=ye)}}else typeof J=="number"?J=J&255:typeof J=="boolean"&&(J=Number(J));if(Z<0||this.length<Z||this.length<fe)throw new RangeError("Out of range index");if(fe<=Z)return this;Z=Z>>>0,fe=fe===void 0?this.length:fe>>>0,J||(J=0);let he;if(typeof J=="number")for(he=Z;he<fe;++he)this[he]=J;else{const ye=u.isBuffer(J)?J:u.from(J,be),Xe=ye.length;if(Xe===0)throw new TypeError('The value "'+J+'" is invalid for argument "value"');for(he=0;he<fe-Z;++he)this[he+Z]=ye[he%Xe]}return this};const ue={};function le(se,J,Z){ue[se]=class extends Z{constructor(){super(),Object.defineProperty(this,"message",{value:J.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${se}]`,this.stack,delete this.name}get code(){return se}set code(be){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:be,writable:!0})}toString(){return`${this.name} [${se}]: ${this.message}`}}}le("ERR_BUFFER_OUT_OF_BOUNDS",function(se){return se?`${se} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),le("ERR_INVALID_ARG_TYPE",function(se,J){return`The "${se}" argument must be of type number. Received type ${typeof J}`},TypeError),le("ERR_OUT_OF_RANGE",function(se,J,Z){let fe=`The value of "${se}" is out of range.`,be=Z;return Number.isInteger(Z)&&Math.abs(Z)>2**32?be=Ie(String(Z)):typeof Z=="bigint"&&(be=String(Z),(Z>BigInt(2)**BigInt(32)||Z<-(BigInt(2)**BigInt(32)))&&(be=Ie(be)),be+="n"),fe+=` It must be ${J}. Received ${be}`,fe},RangeError);function Ie(se){let J="",Z=se.length;const fe=se[0]==="-"?1:0;for(;Z>=fe+4;Z-=3)J=`_${se.slice(Z-3,Z)}${J}`;return`${se.slice(0,Z)}${J}`}function Ne(se,J,Z){Ze(J,"offset"),(se[J]===void 0||se[J+Z]===void 0)&&Ye(J,se.length-(Z+1))}function $e(se,J,Z,fe,be,he){if(se>Z||se<J){const ye=typeof J=="bigint"?"n":"";let Xe;throw J===0||J===BigInt(0)?Xe=`>= 0${ye} and < 2${ye} ** ${(he+1)*8}${ye}`:Xe=`>= -(2${ye} ** ${(he+1)*8-1}${ye}) and < 2 ** ${(he+1)*8-1}${ye}`,new ue.ERR_OUT_OF_RANGE("value",Xe,se)}Ne(fe,be,he)}function Ze(se,J){if(typeof se!="number")throw new ue.ERR_INVALID_ARG_TYPE(J,"number",se)}function Ye(se,J,Z){throw Math.floor(se)!==se?(Ze(se,Z),new ue.ERR_OUT_OF_RANGE("offset","an integer",se)):J<0?new ue.ERR_BUFFER_OUT_OF_BOUNDS:new ue.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${J}`,se)}const We=/[^+/0-9A-Za-z-_]/g;function At(se){if(se=se.split("=")[0],se=se.trim().replace(We,""),se.length<2)return"";for(;se.length%4!==0;)se=se+"=";return se}function ot(se,J){J=J||1/0;let Z;const fe=se.length;let be=null;const he=[];for(let ye=0;ye<fe;++ye){if(Z=se.charCodeAt(ye),Z>55295&&Z<57344){if(!be){if(Z>56319){(J-=3)>-1&&he.push(239,191,189);continue}else if(ye+1===fe){(J-=3)>-1&&he.push(239,191,189);continue}be=Z;continue}if(Z<56320){(J-=3)>-1&&he.push(239,191,189),be=Z;continue}Z=(be-55296<<10|Z-56320)+65536}else be&&(J-=3)>-1&&he.push(239,191,189);if(be=null,Z<128){if((J-=1)<0)break;he.push(Z)}else if(Z<2048){if((J-=2)<0)break;he.push(Z>>6|192,Z&63|128)}else if(Z<65536){if((J-=3)<0)break;he.push(Z>>12|224,Z>>6&63|128,Z&63|128)}else if(Z<1114112){if((J-=4)<0)break;he.push(Z>>18|240,Z>>12&63|128,Z>>6&63|128,Z&63|128)}else throw new Error("Invalid code point")}return he}function Bt(se){const J=[];for(let Z=0;Z<se.length;++Z)J.push(se.charCodeAt(Z)&255);return J}function Zt(se,J){let Z,fe,be;const he=[];for(let ye=0;ye<se.length&&!((J-=2)<0);++ye)Z=se.charCodeAt(ye),fe=Z>>8,be=Z%256,he.push(be),he.push(fe);return he}function Ge(se){return e.toByteArray(At(se))}function Tt(se,J,Z,fe){let be;for(be=0;be<fe&&!(be+Z>=J.length||be>=se.length);++be)J[be+Z]=se[be];return be}function ln(se,J){return se instanceof J||se!=null&&se.constructor!=null&&se.constructor.name!=null&&se.constructor.name===J.name}function Pe(se){return se!==se}const Ve=(function(){const se="0123456789abcdef",J=new Array(256);for(let Z=0;Z<16;++Z){const fe=Z*16;for(let be=0;be<16;++be)J[fe+be]=se[Z]+se[be]}return J})();function ht(se){return typeof BigInt>"u"?ct:se}function ct(){throw new Error("BigInt not supported")}})(mL);const on=mL.Buffer,an=mL.Buffer;window.Buffer=an;function us(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function uee(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var uP={exports:{}},rb={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J9;function Zye(){if(J9)return rb;J9=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,s){var o=null;if(s!==void 0&&(o=""+s),i.key!==void 0&&(o=""+i.key),"key"in i){s={};for(var a in i)a!=="key"&&(s[a]=i[a])}else s=i;return i=s.ref,{$$typeof:t,type:r,key:o,ref:i!==void 0?i:null,props:s}}return rb.Fragment=e,rb.jsx=n,rb.jsxs=n,rb}var X9;function exe(){return X9||(X9=1,uP.exports=Zye()),uP.exports}var h=exe();function txe(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var dee={exports:{}},ii=dee.exports={},Zl,ec;function U3(){throw new Error("setTimeout has not been defined")}function F3(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Zl=setTimeout:Zl=U3}catch{Zl=U3}try{typeof clearTimeout=="function"?ec=clearTimeout:ec=F3}catch{ec=F3}})();function fee(t){if(Zl===setTimeout)return setTimeout(t,0);if((Zl===U3||!Zl)&&setTimeout)return Zl=setTimeout,setTimeout(t,0);try{return Zl(t,0)}catch{try{return Zl.call(null,t,0)}catch{return Zl.call(this,t,0)}}}function nxe(t){if(ec===clearTimeout)return clearTimeout(t);if((ec===F3||!ec)&&clearTimeout)return ec=clearTimeout,clearTimeout(t);try{return ec(t)}catch{try{return ec.call(null,t)}catch{return ec.call(this,t)}}}var Hu=[],jg=!1,hp,YA=-1;function rxe(){!jg||!hp||(jg=!1,hp.length?Hu=hp.concat(Hu):YA=-1,Hu.length&&hee())}function hee(){if(!jg){var t=fee(rxe);jg=!0;for(var e=Hu.length;e;){for(hp=Hu,Hu=[];++YA<e;)hp&&hp[YA].run();YA=-1,e=Hu.length}hp=null,jg=!1,nxe(t)}}ii.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];Hu.push(new pee(t,e)),Hu.length===1&&!jg&&fee(hee)};function pee(t,e){this.fun=t,this.array=e}pee.prototype.run=function(){this.fun.apply(null,this.array)};ii.title="browser";ii.browser=!0;ii.env={};ii.argv=[];ii.version="";ii.versions={};function Ed(){}ii.on=Ed;ii.addListener=Ed;ii.once=Ed;ii.off=Ed;ii.removeListener=Ed;ii.removeAllListeners=Ed;ii.emit=Ed;ii.prependListener=Ed;ii.prependOnceListener=Ed;ii.listeners=function(t){return[]};ii.binding=function(t){throw new Error("process.binding is not supported")};ii.cwd=function(){return"/"};ii.chdir=function(t){throw new Error("process.chdir is not supported")};ii.umask=function(){return 0};var ixe=dee.exports;const Al=txe(ixe);window.global=window;window.process=Al;window.Buffer=an;console.log("Polyfills loaded");var dP={exports:{}},nn={},Q9;function sxe(){if(Q9)return nn;Q9=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),f=Symbol.for("react.activity"),m=Symbol.iterator;function g(q){return q===null||typeof q!="object"?null:(q=m&&q[m]||q["@@iterator"],typeof q=="function"?q:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,b={};function E(q,M,_){this.props=q,this.context=M,this.refs=b,this.updater=_||v}E.prototype.isReactComponent={},E.prototype.setState=function(q,M){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,M,"setState")},E.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function C(){}C.prototype=E.prototype;function k(q,M,_){this.props=q,this.context=M,this.refs=b,this.updater=_||v}var O=k.prototype=new C;O.constructor=k,x(O,E.prototype),O.isPureReactComponent=!0;var U=Array.isArray;function R(){}var $={H:null,A:null,T:null,S:null},V=Object.prototype.hasOwnProperty;function j(q,M,_){var Y=_.ref;return{$$typeof:t,type:q,key:M,ref:Y!==void 0?Y:null,props:_}}function F(q,M){return j(q.type,M,q.props)}function W(q){return typeof q=="object"&&q!==null&&q.$$typeof===t}function H(q){var M={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(_){return M[_]})}var B=/\/+/g;function A(q,M){return typeof q=="object"&&q!==null&&q.key!=null?H(""+q.key):M.toString(36)}function I(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(R,R):(q.status="pending",q.then(function(M){q.status==="pending"&&(q.status="fulfilled",q.value=M)},function(M){q.status==="pending"&&(q.status="rejected",q.reason=M)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function D(q,M,_,Y,X){var re=typeof q;(re==="undefined"||re==="boolean")&&(q=null);var oe=!1;if(q===null)oe=!0;else switch(re){case"bigint":case"string":case"number":oe=!0;break;case"object":switch(q.$$typeof){case t:case e:oe=!0;break;case u:return oe=q._init,D(oe(q._payload),M,_,Y,X)}}if(oe)return X=X(q),oe=Y===""?"."+A(q,0):Y,U(X)?(_="",oe!=null&&(_=oe.replace(B,"$&/")+"/"),D(X,M,_,"",function(me){return me})):X!=null&&(W(X)&&(X=F(X,_+(X.key==null||q&&q.key===X.key?"":(""+X.key).replace(B,"$&/")+"/")+oe)),M.push(X)),1;oe=0;var Ee=Y===""?".":Y+":";if(U(q))for(var ce=0;ce<q.length;ce++)Y=q[ce],re=Ee+A(Y,ce),oe+=D(Y,M,_,re,X);else if(ce=g(q),typeof ce=="function")for(q=ce.call(q),ce=0;!(Y=q.next()).done;)Y=Y.value,re=Ee+A(Y,ce++),oe+=D(Y,M,_,re,X);else if(re==="object"){if(typeof q.then=="function")return D(I(q),M,_,Y,X);throw M=String(q),Error("Objects are not valid as a React child (found: "+(M==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":M)+"). If you meant to render a collection of children, use an array instead.")}return oe}function z(q,M,_){if(q==null)return q;var Y=[],X=0;return D(q,Y,"","",function(re){return M.call(_,re,X++)}),Y}function G(q){if(q._status===-1){var M=q._result;M=M(),M.then(function(_){(q._status===0||q._status===-1)&&(q._status=1,q._result=_)},function(_){(q._status===0||q._status===-1)&&(q._status=2,q._result=_)}),q._status===-1&&(q._status=0,q._result=M)}if(q._status===1)return q._result.default;throw q._result}var te=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var M=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(M))return}else if(typeof Al=="object"&&typeof Al.emit=="function"){Al.emit("uncaughtException",q);return}console.error(q)},K={map:z,forEach:function(q,M,_){z(q,function(){M.apply(this,arguments)},_)},count:function(q){var M=0;return z(q,function(){M++}),M},toArray:function(q){return z(q,function(M){return M})||[]},only:function(q){if(!W(q))throw Error("React.Children.only expected to receive a single React element child.");return q}};return nn.Activity=f,nn.Children=K,nn.Component=E,nn.Fragment=n,nn.Profiler=i,nn.PureComponent=k,nn.StrictMode=r,nn.Suspense=l,nn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=$,nn.__COMPILER_RUNTIME={__proto__:null,c:function(q){return $.H.useMemoCache(q)}},nn.cache=function(q){return function(){return q.apply(null,arguments)}},nn.cacheSignal=function(){return null},nn.cloneElement=function(q,M,_){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var Y=x({},q.props),X=q.key;if(M!=null)for(re in M.key!==void 0&&(X=""+M.key),M)!V.call(M,re)||re==="key"||re==="__self"||re==="__source"||re==="ref"&&M.ref===void 0||(Y[re]=M[re]);var re=arguments.length-2;if(re===1)Y.children=_;else if(1<re){for(var oe=Array(re),Ee=0;Ee<re;Ee++)oe[Ee]=arguments[Ee+2];Y.children=oe}return j(q.type,X,Y)},nn.createContext=function(q){return q={$$typeof:o,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:s,_context:q},q},nn.createElement=function(q,M,_){var Y,X={},re=null;if(M!=null)for(Y in M.key!==void 0&&(re=""+M.key),M)V.call(M,Y)&&Y!=="key"&&Y!=="__self"&&Y!=="__source"&&(X[Y]=M[Y]);var oe=arguments.length-2;if(oe===1)X.children=_;else if(1<oe){for(var Ee=Array(oe),ce=0;ce<oe;ce++)Ee[ce]=arguments[ce+2];X.children=Ee}if(q&&q.defaultProps)for(Y in oe=q.defaultProps,oe)X[Y]===void 0&&(X[Y]=oe[Y]);return j(q,re,X)},nn.createRef=function(){return{current:null}},nn.forwardRef=function(q){return{$$typeof:a,render:q}},nn.isValidElement=W,nn.lazy=function(q){return{$$typeof:u,_payload:{_status:-1,_result:q},_init:G}},nn.memo=function(q,M){return{$$typeof:c,type:q,compare:M===void 0?null:M}},nn.startTransition=function(q){var M=$.T,_={};$.T=_;try{var Y=q(),X=$.S;X!==null&&X(_,Y),typeof Y=="object"&&Y!==null&&typeof Y.then=="function"&&Y.then(R,te)}catch(re){te(re)}finally{M!==null&&_.types!==null&&(M.types=_.types),$.T=M}},nn.unstable_useCacheRefresh=function(){return $.H.useCacheRefresh()},nn.use=function(q){return $.H.use(q)},nn.useActionState=function(q,M,_){return $.H.useActionState(q,M,_)},nn.useCallback=function(q,M){return $.H.useCallback(q,M)},nn.useContext=function(q){return $.H.useContext(q)},nn.useDebugValue=function(){},nn.useDeferredValue=function(q,M){return $.H.useDeferredValue(q,M)},nn.useEffect=function(q,M){return $.H.useEffect(q,M)},nn.useEffectEvent=function(q){return $.H.useEffectEvent(q)},nn.useId=function(){return $.H.useId()},nn.useImperativeHandle=function(q,M,_){return $.H.useImperativeHandle(q,M,_)},nn.useInsertionEffect=function(q,M){return $.H.useInsertionEffect(q,M)},nn.useLayoutEffect=function(q,M){return $.H.useLayoutEffect(q,M)},nn.useMemo=function(q,M){return $.H.useMemo(q,M)},nn.useOptimistic=function(q,M){return $.H.useOptimistic(q,M)},nn.useReducer=function(q,M,_){return $.H.useReducer(q,M,_)},nn.useRef=function(q){return $.H.useRef(q)},nn.useState=function(q){return $.H.useState(q)},nn.useSyncExternalStore=function(q,M,_){return $.H.useSyncExternalStore(q,M,_)},nn.useTransition=function(){return $.H.useTransition()},nn.version="19.2.3",nn}var Z9;function Nx(){return Z9||(Z9=1,dP.exports=sxe()),dP.exports}var T=Nx();const pl=us(T),KC=Vye({__proto__:null,default:pl},[T]);var fP={exports:{}},ib={},hP={exports:{}},pP={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e$;function oxe(){return e$||(e$=1,(function(t){function e(D,z){var G=D.length;D.push(z);e:for(;0<G;){var te=G-1>>>1,K=D[te];if(0<i(K,z))D[te]=z,D[G]=K,G=te;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var z=D[0],G=D.pop();if(G!==z){D[0]=G;e:for(var te=0,K=D.length,q=K>>>1;te<q;){var M=2*(te+1)-1,_=D[M],Y=M+1,X=D[Y];if(0>i(_,G))Y<K&&0>i(X,_)?(D[te]=X,D[Y]=G,te=Y):(D[te]=_,D[M]=G,te=M);else if(Y<K&&0>i(X,G))D[te]=X,D[Y]=G,te=Y;else break e}}return z}function i(D,z){var G=D.sortIndex-z.sortIndex;return G!==0?G:D.id-z.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,m=3,g=!1,v=!1,x=!1,b=!1,E=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function O(D){for(var z=n(c);z!==null;){if(z.callback===null)r(c);else if(z.startTime<=D)r(c),z.sortIndex=z.expirationTime,e(l,z);else break;z=n(c)}}function U(D){if(x=!1,O(D),!v)if(n(l)!==null)v=!0,R||(R=!0,H());else{var z=n(c);z!==null&&I(U,z.startTime-D)}}var R=!1,$=-1,V=5,j=-1;function F(){return b?!0:!(t.unstable_now()-j<V)}function W(){if(b=!1,R){var D=t.unstable_now();j=D;var z=!0;try{e:{v=!1,x&&(x=!1,C($),$=-1),g=!0;var G=m;try{t:{for(O(D),f=n(l);f!==null&&!(f.expirationTime>D&&F());){var te=f.callback;if(typeof te=="function"){f.callback=null,m=f.priorityLevel;var K=te(f.expirationTime<=D);if(D=t.unstable_now(),typeof K=="function"){f.callback=K,O(D),z=!0;break t}f===n(l)&&r(l),O(D)}else r(l);f=n(l)}if(f!==null)z=!0;else{var q=n(c);q!==null&&I(U,q.startTime-D),z=!1}}break e}finally{f=null,m=G,g=!1}z=void 0}}finally{z?H():R=!1}}}var H;if(typeof k=="function")H=function(){k(W)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,A=B.port2;B.port1.onmessage=W,H=function(){A.postMessage(null)}}else H=function(){E(W,0)};function I(D,z){$=E(function(){D(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(D){switch(m){case 1:case 2:case 3:var z=3;break;default:z=m}var G=m;m=z;try{return D()}finally{m=G}},t.unstable_requestPaint=function(){b=!0},t.unstable_runWithPriority=function(D,z){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var G=m;m=D;try{return z()}finally{m=G}},t.unstable_scheduleCallback=function(D,z,G){var te=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?te+G:te):G=te,D){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=G+K,D={id:u++,callback:z,priorityLevel:D,startTime:G,expirationTime:K,sortIndex:-1},G>te?(D.sortIndex=G,e(c,D),n(l)===null&&D===n(c)&&(x?(C($),$=-1):x=!0,I(U,G-te))):(D.sortIndex=K,e(l,D),v||g||(v=!0,R||(R=!0,H()))),D},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(D){var z=m;return function(){var G=m;m=z;try{return D.apply(this,arguments)}finally{m=G}}}})(pP)),pP}var t$;function axe(){return t$||(t$=1,hP.exports=oxe()),hP.exports}var mP={exports:{}},fs={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n$;function lxe(){if(n$)return fs;n$=1;var t=Nx();function e(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)c+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(l,c,u){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:f==null?null:""+f,children:l,containerInfo:c,implementation:u}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(l,c){if(l==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return fs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,fs.createPortal=function(l,c){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(e(299));return s(l,c,null,u)},fs.flushSync=function(l){var c=o.T,u=r.p;try{if(o.T=null,r.p=2,l)return l()}finally{o.T=c,r.p=u,r.d.f()}},fs.preconnect=function(l,c){typeof l=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,r.d.C(l,c))},fs.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},fs.preinit=function(l,c){if(typeof l=="string"&&c&&typeof c.as=="string"){var u=c.as,f=a(u,c.crossOrigin),m=typeof c.integrity=="string"?c.integrity:void 0,g=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;u==="style"?r.d.S(l,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:f,integrity:m,fetchPriority:g}):u==="script"&&r.d.X(l,{crossOrigin:f,integrity:m,fetchPriority:g,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},fs.preinitModule=function(l,c){if(typeof l=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var u=a(c.as,c.crossOrigin);r.d.M(l,{crossOrigin:u,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&r.d.M(l)},fs.preload=function(l,c){if(typeof l=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var u=c.as,f=a(u,c.crossOrigin);r.d.L(l,u,{crossOrigin:f,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},fs.preloadModule=function(l,c){if(typeof l=="string")if(c){var u=a(c.as,c.crossOrigin);r.d.m(l,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:u,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else r.d.m(l)},fs.requestFormReset=function(l){r.d.r(l)},fs.unstable_batchedUpdates=function(l,c){return l(c)},fs.useFormState=function(l,c,u){return o.H.useFormState(l,c,u)},fs.useFormStatus=function(){return o.H.useHostTransitionStatus()},fs.version="19.2.3",fs}var r$;function mee(){if(r$)return mP.exports;r$=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),mP.exports=lxe(),mP.exports}var i$;function cxe(){if(i$)return ib;i$=1;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t=axe(),e=Nx(),n=mee();function r(d){var p="https://react.dev/errors/"+d;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)}function s(d){var p=d,y=d;if(d.alternate)for(;p.return;)p=p.return;else{d=p;do p=d,(p.flags&4098)!==0&&(y=p.return),d=p.return;while(d)}return p.tag===3?y:null}function o(d){if(d.tag===13){var p=d.memoizedState;if(p===null&&(d=d.alternate,d!==null&&(p=d.memoizedState)),p!==null)return p.dehydrated}return null}function a(d){if(d.tag===31){var p=d.memoizedState;if(p===null&&(d=d.alternate,d!==null&&(p=d.memoizedState)),p!==null)return p.dehydrated}return null}function l(d){if(s(d)!==d)throw Error(r(188))}function c(d){var p=d.alternate;if(!p){if(p=s(d),p===null)throw Error(r(188));return p!==d?null:d}for(var y=d,w=p;;){var P=y.return;if(P===null)break;var L=P.alternate;if(L===null){if(w=P.return,w!==null){y=w;continue}break}if(P.child===L.child){for(L=P.child;L;){if(L===y)return l(P),d;if(L===w)return l(P),p;L=L.sibling}throw Error(r(188))}if(y.return!==w.return)y=P,w=L;else{for(var ne=!1,de=P.child;de;){if(de===y){ne=!0,y=P,w=L;break}if(de===w){ne=!0,w=P,y=L;break}de=de.sibling}if(!ne){for(de=L.child;de;){if(de===y){ne=!0,y=L,w=P;break}if(de===w){ne=!0,w=L,y=P;break}de=de.sibling}if(!ne)throw Error(r(189))}}if(y.alternate!==w)throw Error(r(190))}if(y.tag!==3)throw Error(r(188));return y.stateNode.current===y?d:p}function u(d){var p=d.tag;if(p===5||p===26||p===27||p===6)return d;for(d=d.child;d!==null;){if(p=u(d),p!==null)return p;d=d.sibling}return null}var f=Object.assign,m=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),C=Symbol.for("react.consumer"),k=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),F=Symbol.for("react.memo_cache_sentinel"),W=Symbol.iterator;function H(d){return d===null||typeof d!="object"?null:(d=W&&d[W]||d["@@iterator"],typeof d=="function"?d:null)}var B=Symbol.for("react.client.reference");function A(d){if(d==null)return null;if(typeof d=="function")return d.$$typeof===B?null:d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case x:return"Fragment";case E:return"Profiler";case b:return"StrictMode";case U:return"Suspense";case R:return"SuspenseList";case j:return"Activity"}if(typeof d=="object")switch(d.$$typeof){case v:return"Portal";case k:return d.displayName||"Context";case C:return(d._context.displayName||"Context")+".Consumer";case O:var p=d.render;return d=d.displayName,d||(d=p.displayName||p.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case $:return p=d.displayName||null,p!==null?p:A(d.type)||"Memo";case V:p=d._payload,d=d._init;try{return A(d(p))}catch{}}return null}var I=Array.isArray,D=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G={pending:!1,data:null,method:null,action:null},te=[],K=-1;function q(d){return{current:d}}function M(d){0>K||(d.current=te[K],te[K]=null,K--)}function _(d,p){K++,te[K]=d.current,d.current=p}var Y=q(null),X=q(null),re=q(null),oe=q(null);function Ee(d,p){switch(_(re,p),_(X,d),_(Y,null),p.nodeType){case 9:case 11:d=(d=p.documentElement)&&(d=d.namespaceURI)?x9(d):0;break;default:if(d=p.tagName,p=p.namespaceURI)p=x9(p),d=v9(p,d);else switch(d){case"svg":d=1;break;case"math":d=2;break;default:d=0}}M(Y),_(Y,d)}function ce(){M(Y),M(X),M(re)}function me(d){d.memoizedState!==null&&_(oe,d);var p=Y.current,y=v9(p,d.type);p!==y&&(_(X,d),_(Y,y))}function ue(d){X.current===d&&(M(Y),M(X)),oe.current===d&&(M(oe),Qv._currentValue=G)}var le,Ie;function Ne(d){if(le===void 0)try{throw Error()}catch(y){var p=y.stack.trim().match(/\n( *(at )?)/);le=p&&p[1]||"",Ie=-1<y.stack.indexOf(`
    at`)?" (<anonymous>)":-1<y.stack.indexOf("@")?"@unknown:0:0":""}return`
`+le+d+Ie}var $e=!1;function Ze(d,p){if(!d||$e)return"";$e=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var w={DetermineComponentFrameRoot:function(){try{if(p){var Qe=function(){throw Error()};if(Object.defineProperty(Qe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Qe,[])}catch(He){var Ue=He}Reflect.construct(d,[],Qe)}else{try{Qe.call()}catch(He){Ue=He}d.call(Qe.prototype)}}else{try{throw Error()}catch(He){Ue=He}(Qe=d())&&typeof Qe.catch=="function"&&Qe.catch(function(){})}}catch(He){if(He&&Ue&&typeof He.stack=="string")return[He.stack,Ue.stack]}return[null,null]}};w.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var P=Object.getOwnPropertyDescriptor(w.DetermineComponentFrameRoot,"name");P&&P.configurable&&Object.defineProperty(w.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var L=w.DetermineComponentFrameRoot(),ne=L[0],de=L[1];if(ne&&de){var we=ne.split(`
`),Le=de.split(`
`);for(P=w=0;w<we.length&&!we[w].includes("DetermineComponentFrameRoot");)w++;for(;P<Le.length&&!Le[P].includes("DetermineComponentFrameRoot");)P++;if(w===we.length||P===Le.length)for(w=we.length-1,P=Le.length-1;1<=w&&0<=P&&we[w]!==Le[P];)P--;for(;1<=w&&0<=P;w--,P--)if(we[w]!==Le[P]){if(w!==1||P!==1)do if(w--,P--,0>P||we[w]!==Le[P]){var qe=`
`+we[w].replace(" at new "," at ");return d.displayName&&qe.includes("<anonymous>")&&(qe=qe.replace("<anonymous>",d.displayName)),qe}while(1<=w&&0<=P);break}}}finally{$e=!1,Error.prepareStackTrace=y}return(y=d?d.displayName||d.name:"")?Ne(y):""}function Ye(d,p){switch(d.tag){case 26:case 27:case 5:return Ne(d.type);case 16:return Ne("Lazy");case 13:return d.child!==p&&p!==null?Ne("Suspense Fallback"):Ne("Suspense");case 19:return Ne("SuspenseList");case 0:case 15:return Ze(d.type,!1);case 11:return Ze(d.type.render,!1);case 1:return Ze(d.type,!0);case 31:return Ne("Activity");default:return""}}function We(d){try{var p="",y=null;do p+=Ye(d,y),y=d,d=d.return;while(d);return p}catch(w){return`
Error generating stack: `+w.message+`
`+w.stack}}var At=Object.prototype.hasOwnProperty,ot=t.unstable_scheduleCallback,Bt=t.unstable_cancelCallback,Zt=t.unstable_shouldYield,Ge=t.unstable_requestPaint,Tt=t.unstable_now,ln=t.unstable_getCurrentPriorityLevel,Pe=t.unstable_ImmediatePriority,Ve=t.unstable_UserBlockingPriority,ht=t.unstable_NormalPriority,ct=t.unstable_LowPriority,se=t.unstable_IdlePriority,J=t.log,Z=t.unstable_setDisableYieldValue,fe=null,be=null;function he(d){if(typeof J=="function"&&Z(d),be&&typeof be.setStrictMode=="function")try{be.setStrictMode(fe,d)}catch{}}var ye=Math.clz32?Math.clz32:st,Xe=Math.log,et=Math.LN2;function st(d){return d>>>=0,d===0?32:31-(Xe(d)/et|0)|0}var Ft=256,vt=262144,Ot=4194304;function cn(d){var p=d&42;if(p!==0)return p;switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return d&261888;case 262144:case 524288:case 1048576:case 2097152:return d&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return d&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return d}}function en(d,p,y){var w=d.pendingLanes;if(w===0)return 0;var P=0,L=d.suspendedLanes,ne=d.pingedLanes;d=d.warmLanes;var de=w&134217727;return de!==0?(w=de&~L,w!==0?P=cn(w):(ne&=de,ne!==0?P=cn(ne):y||(y=de&~d,y!==0&&(P=cn(y))))):(de=w&~L,de!==0?P=cn(de):ne!==0?P=cn(ne):y||(y=w&~d,y!==0&&(P=cn(y)))),P===0?0:p!==0&&p!==P&&(p&L)===0&&(L=P&-P,y=p&-p,L>=y||L===32&&(y&4194048)!==0)?p:P}function rn(d,p){return(d.pendingLanes&~(d.suspendedLanes&~d.pingedLanes)&p)===0}function Ci(d,p){switch(d){case 1:case 2:case 4:case 8:case 64:return p+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zn(){var d=Ot;return Ot<<=1,(Ot&62914560)===0&&(Ot=4194304),d}function ae(d){for(var p=[],y=0;31>y;y++)p.push(d);return p}function Q(d,p){d.pendingLanes|=p,p!==268435456&&(d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0)}function ee(d,p,y,w,P,L){var ne=d.pendingLanes;d.pendingLanes=y,d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0,d.expiredLanes&=y,d.entangledLanes&=y,d.errorRecoveryDisabledLanes&=y,d.shellSuspendCounter=0;var de=d.entanglements,we=d.expirationTimes,Le=d.hiddenUpdates;for(y=ne&~y;0<y;){var qe=31-ye(y),Qe=1<<qe;de[qe]=0,we[qe]=-1;var Ue=Le[qe];if(Ue!==null)for(Le[qe]=null,qe=0;qe<Ue.length;qe++){var He=Ue[qe];He!==null&&(He.lane&=-536870913)}y&=~Qe}w!==0&&pe(d,w,0),L!==0&&P===0&&d.tag!==0&&(d.suspendedLanes|=L&~(ne&~p))}function pe(d,p,y){d.pendingLanes|=p,d.suspendedLanes&=~p;var w=31-ye(p);d.entangledLanes|=p,d.entanglements[w]=d.entanglements[w]|1073741824|y&261930}function ke(d,p){var y=d.entangledLanes|=p;for(d=d.entanglements;y;){var w=31-ye(y),P=1<<w;P&p|d[w]&p&&(d[w]|=p),y&=~P}}function Re(d,p){var y=p&-p;return y=(y&42)!==0?1:ze(y),(y&(d.suspendedLanes|p))!==0?0:y}function ze(d){switch(d){case 2:d=1;break;case 8:d=4;break;case 32:d=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:d=128;break;case 268435456:d=134217728;break;default:d=0}return d}function Jt(d){return d&=-d,2<d?8<d?(d&134217727)!==0?32:268435456:8:2}function $t(){var d=z.p;return d!==0?d:(d=window.event,d===void 0?32:z9(d.type))}function it(d,p){var y=z.p;try{return z.p=d,p()}finally{z.p=y}}var mn=Math.random().toString(36).slice(2),yt="__reactFiber$"+mn,vn="__reactProps$"+mn,Ya="__reactContainer$"+mn,ur="__reactEvents$"+mn,yr="__reactListeners$"+mn,qc="__reactHandles$"+mn,$l="__reactResources$"+mn,Zo="__reactMarker$"+mn;function zl(d){delete d[yt],delete d[vn],delete d[ur],delete d[yr],delete d[qc]}function wo(d){var p=d[yt];if(p)return p;for(var y=d.parentNode;y;){if(p=y[Ya]||y[yt]){if(y=p.alternate,p.child!==null||y!==null&&y.child!==null)for(d=k9(d);d!==null;){if(y=d[yt])return y;d=k9(d)}return p}d=y,y=d.parentNode}return null}function Eo(d){if(d=d[yt]||d[Ya]){var p=d.tag;if(p===5||p===6||p===13||p===31||p===26||p===27||p===3)return d}return null}function ea(d){var p=d.tag;if(p===5||p===26||p===27||p===6)return d.stateNode;throw Error(r(33))}function So(d){var p=d[$l];return p||(p=d[$l]={hoistableStyles:new Map,hoistableScripts:new Map}),p}function xr(d){d[Zo]=!0}var Gc=new Set,Sr={};function Yr(d,p){ds(d,p),ds(d+"Capture",p)}function ds(d,p){for(Sr[d]=p,d=0;d<p.length;d++)Gc.add(p[d])}var Th=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Jm={},Xm={};function pv(d){return At.call(Xm,d)?!0:At.call(Jm,d)?!1:Th.test(d)?Xm[d]=!0:(Jm[d]=!0,!1)}function Dd(d,p,y){if(pv(p))if(y===null)d.removeAttribute(p);else{switch(typeof y){case"undefined":case"function":case"symbol":d.removeAttribute(p);return;case"boolean":var w=p.toLowerCase().slice(0,5);if(w!=="data-"&&w!=="aria-"){d.removeAttribute(p);return}}d.setAttribute(p,""+y)}}function Ld(d,p,y){if(y===null)d.removeAttribute(p);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":d.removeAttribute(p);return}d.setAttribute(p,""+y)}}function Kc(d,p,y,w){if(w===null)d.removeAttribute(y);else{switch(typeof w){case"undefined":case"function":case"symbol":case"boolean":d.removeAttribute(y);return}d.setAttributeNS(p,y,""+w)}}function ta(d){switch(typeof d){case"bigint":case"boolean":case"number":case"string":case"undefined":return d;case"object":return d;default:return""}}function u7(d){var p=d.type;return(d=d.nodeName)&&d.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function D0e(d,p,y){var w=Object.getOwnPropertyDescriptor(d.constructor.prototype,p);if(!d.hasOwnProperty(p)&&typeof w<"u"&&typeof w.get=="function"&&typeof w.set=="function"){var P=w.get,L=w.set;return Object.defineProperty(d,p,{configurable:!0,get:function(){return P.call(this)},set:function(ne){y=""+ne,L.call(this,ne)}}),Object.defineProperty(d,p,{enumerable:w.enumerable}),{getValue:function(){return y},setValue:function(ne){y=""+ne},stopTracking:function(){d._valueTracker=null,delete d[p]}}}}function t_(d){if(!d._valueTracker){var p=u7(d)?"checked":"value";d._valueTracker=D0e(d,p,""+d[p])}}function d7(d){if(!d)return!1;var p=d._valueTracker;if(!p)return!0;var y=p.getValue(),w="";return d&&(w=u7(d)?d.checked?"true":"false":d.value),d=w,d!==y?(p.setValue(d),!0):!1}function wE(d){if(d=d||(typeof document<"u"?document:void 0),typeof d>"u")return null;try{return d.activeElement||d.body}catch{return d.body}}var L0e=/[\n"\\]/g;function na(d){return d.replace(L0e,function(p){return"\\"+p.charCodeAt(0).toString(16)+" "})}function n_(d,p,y,w,P,L,ne,de){d.name="",ne!=null&&typeof ne!="function"&&typeof ne!="symbol"&&typeof ne!="boolean"?d.type=ne:d.removeAttribute("type"),p!=null?ne==="number"?(p===0&&d.value===""||d.value!=p)&&(d.value=""+ta(p)):d.value!==""+ta(p)&&(d.value=""+ta(p)):ne!=="submit"&&ne!=="reset"||d.removeAttribute("value"),p!=null?r_(d,ne,ta(p)):y!=null?r_(d,ne,ta(y)):w!=null&&d.removeAttribute("value"),P==null&&L!=null&&(d.defaultChecked=!!L),P!=null&&(d.checked=P&&typeof P!="function"&&typeof P!="symbol"),de!=null&&typeof de!="function"&&typeof de!="symbol"&&typeof de!="boolean"?d.name=""+ta(de):d.removeAttribute("name")}function f7(d,p,y,w,P,L,ne,de){if(L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"&&(d.type=L),p!=null||y!=null){if(!(L!=="submit"&&L!=="reset"||p!=null)){t_(d);return}y=y!=null?""+ta(y):"",p=p!=null?""+ta(p):y,de||p===d.value||(d.value=p),d.defaultValue=p}w=w??P,w=typeof w!="function"&&typeof w!="symbol"&&!!w,d.checked=de?d.checked:!!w,d.defaultChecked=!!w,ne!=null&&typeof ne!="function"&&typeof ne!="symbol"&&typeof ne!="boolean"&&(d.name=ne),t_(d)}function r_(d,p,y){p==="number"&&wE(d.ownerDocument)===d||d.defaultValue===""+y||(d.defaultValue=""+y)}function Qm(d,p,y,w){if(d=d.options,p){p={};for(var P=0;P<y.length;P++)p["$"+y[P]]=!0;for(y=0;y<d.length;y++)P=p.hasOwnProperty("$"+d[y].value),d[y].selected!==P&&(d[y].selected=P),P&&w&&(d[y].defaultSelected=!0)}else{for(y=""+ta(y),p=null,P=0;P<d.length;P++){if(d[P].value===y){d[P].selected=!0,w&&(d[P].defaultSelected=!0);return}p!==null||d[P].disabled||(p=d[P])}p!==null&&(p.selected=!0)}}function h7(d,p,y){if(p!=null&&(p=""+ta(p),p!==d.value&&(d.value=p),y==null)){d.defaultValue!==p&&(d.defaultValue=p);return}d.defaultValue=y!=null?""+ta(y):""}function p7(d,p,y,w){if(p==null){if(w!=null){if(y!=null)throw Error(r(92));if(I(w)){if(1<w.length)throw Error(r(93));w=w[0]}y=w}y==null&&(y=""),p=y}y=ta(p),d.defaultValue=y,w=d.textContent,w===y&&w!==""&&w!==null&&(d.value=w),t_(d)}function Zm(d,p){if(p){var y=d.firstChild;if(y&&y===d.lastChild&&y.nodeType===3){y.nodeValue=p;return}}d.textContent=p}var j0e=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function m7(d,p,y){var w=p.indexOf("--")===0;y==null||typeof y=="boolean"||y===""?w?d.setProperty(p,""):p==="float"?d.cssFloat="":d[p]="":w?d.setProperty(p,y):typeof y!="number"||y===0||j0e.has(p)?p==="float"?d.cssFloat=y:d[p]=(""+y).trim():d[p]=y+"px"}function g7(d,p,y){if(p!=null&&typeof p!="object")throw Error(r(62));if(d=d.style,y!=null){for(var w in y)!y.hasOwnProperty(w)||p!=null&&p.hasOwnProperty(w)||(w.indexOf("--")===0?d.setProperty(w,""):w==="float"?d.cssFloat="":d[w]="");for(var P in p)w=p[P],p.hasOwnProperty(P)&&y[P]!==w&&m7(d,P,w)}else for(var L in p)p.hasOwnProperty(L)&&m7(d,L,p[L])}function i_(d){if(d.indexOf("-")===-1)return!1;switch(d){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var B0e=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),U0e=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function EE(d){return U0e.test(""+d)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":d}function Wc(){}var s_=null;function o_(d){return d=d.target||d.srcElement||window,d.correspondingUseElement&&(d=d.correspondingUseElement),d.nodeType===3?d.parentNode:d}var e0=null,t0=null;function y7(d){var p=Eo(d);if(p&&(d=p.stateNode)){var y=d[vn]||null;e:switch(d=p.stateNode,p.type){case"input":if(n_(d,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name),p=y.name,y.type==="radio"&&p!=null){for(y=d;y.parentNode;)y=y.parentNode;for(y=y.querySelectorAll('input[name="'+na(""+p)+'"][type="radio"]'),p=0;p<y.length;p++){var w=y[p];if(w!==d&&w.form===d.form){var P=w[vn]||null;if(!P)throw Error(r(90));n_(w,P.value,P.defaultValue,P.defaultValue,P.checked,P.defaultChecked,P.type,P.name)}}for(p=0;p<y.length;p++)w=y[p],w.form===d.form&&d7(w)}break e;case"textarea":h7(d,y.value,y.defaultValue);break e;case"select":p=y.value,p!=null&&Qm(d,!!y.multiple,p,!1)}}}var a_=!1;function x7(d,p,y){if(a_)return d(p,y);a_=!0;try{var w=d(p);return w}finally{if(a_=!1,(e0!==null||t0!==null)&&(cS(),e0&&(p=e0,d=t0,t0=e0=null,y7(p),d)))for(p=0;p<d.length;p++)y7(d[p])}}function mv(d,p){var y=d.stateNode;if(y===null)return null;var w=y[vn]||null;if(w===null)return null;y=w[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(d=d.type,w=!(d==="button"||d==="input"||d==="select"||d==="textarea")),d=!w;break e;default:d=!1}if(d)return null;if(y&&typeof y!="function")throw Error(r(231,p,typeof y));return y}var Yc=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l_=!1;if(Yc)try{var gv={};Object.defineProperty(gv,"passive",{get:function(){l_=!0}}),window.addEventListener("test",gv,gv),window.removeEventListener("test",gv,gv)}catch{l_=!1}var jd=null,c_=null,SE=null;function v7(){if(SE)return SE;var d,p=c_,y=p.length,w,P="value"in jd?jd.value:jd.textContent,L=P.length;for(d=0;d<y&&p[d]===P[d];d++);var ne=y-d;for(w=1;w<=ne&&p[y-w]===P[L-w];w++);return SE=P.slice(d,1<w?1-w:void 0)}function AE(d){var p=d.keyCode;return"charCode"in d?(d=d.charCode,d===0&&p===13&&(d=13)):d=p,d===10&&(d=13),32<=d||d===13?d:0}function TE(){return!0}function b7(){return!1}function eo(d){function p(y,w,P,L,ne){this._reactName=y,this._targetInst=P,this.type=w,this.nativeEvent=L,this.target=ne,this.currentTarget=null;for(var de in d)d.hasOwnProperty(de)&&(y=d[de],this[de]=y?y(L):L[de]);return this.isDefaultPrevented=(L.defaultPrevented!=null?L.defaultPrevented:L.returnValue===!1)?TE:b7,this.isPropagationStopped=b7,this}return f(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var y=this.nativeEvent;y&&(y.preventDefault?y.preventDefault():typeof y.returnValue!="unknown"&&(y.returnValue=!1),this.isDefaultPrevented=TE)},stopPropagation:function(){var y=this.nativeEvent;y&&(y.stopPropagation?y.stopPropagation():typeof y.cancelBubble!="unknown"&&(y.cancelBubble=!0),this.isPropagationStopped=TE)},persist:function(){},isPersistent:TE}),p}var kh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(d){return d.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kE=eo(kh),yv=f({},kh,{view:0,detail:0}),F0e=eo(yv),u_,d_,xv,CE=f({},yv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:h_,button:0,buttons:0,relatedTarget:function(d){return d.relatedTarget===void 0?d.fromElement===d.srcElement?d.toElement:d.fromElement:d.relatedTarget},movementX:function(d){return"movementX"in d?d.movementX:(d!==xv&&(xv&&d.type==="mousemove"?(u_=d.screenX-xv.screenX,d_=d.screenY-xv.screenY):d_=u_=0,xv=d),u_)},movementY:function(d){return"movementY"in d?d.movementY:d_}}),w7=eo(CE),$0e=f({},CE,{dataTransfer:0}),z0e=eo($0e),H0e=f({},yv,{relatedTarget:0}),f_=eo(H0e),V0e=f({},kh,{animationName:0,elapsedTime:0,pseudoElement:0}),q0e=eo(V0e),G0e=f({},kh,{clipboardData:function(d){return"clipboardData"in d?d.clipboardData:window.clipboardData}}),K0e=eo(G0e),W0e=f({},kh,{data:0}),E7=eo(W0e),Y0e={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},J0e={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},X0e={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Q0e(d){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(d):(d=X0e[d])?!!p[d]:!1}function h_(){return Q0e}var Z0e=f({},yv,{key:function(d){if(d.key){var p=Y0e[d.key]||d.key;if(p!=="Unidentified")return p}return d.type==="keypress"?(d=AE(d),d===13?"Enter":String.fromCharCode(d)):d.type==="keydown"||d.type==="keyup"?J0e[d.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:h_,charCode:function(d){return d.type==="keypress"?AE(d):0},keyCode:function(d){return d.type==="keydown"||d.type==="keyup"?d.keyCode:0},which:function(d){return d.type==="keypress"?AE(d):d.type==="keydown"||d.type==="keyup"?d.keyCode:0}}),ege=eo(Z0e),tge=f({},CE,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),S7=eo(tge),nge=f({},yv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:h_}),rge=eo(nge),ige=f({},kh,{propertyName:0,elapsedTime:0,pseudoElement:0}),sge=eo(ige),oge=f({},CE,{deltaX:function(d){return"deltaX"in d?d.deltaX:"wheelDeltaX"in d?-d.wheelDeltaX:0},deltaY:function(d){return"deltaY"in d?d.deltaY:"wheelDeltaY"in d?-d.wheelDeltaY:"wheelDelta"in d?-d.wheelDelta:0},deltaZ:0,deltaMode:0}),age=eo(oge),lge=f({},kh,{newState:0,oldState:0}),cge=eo(lge),uge=[9,13,27,32],p_=Yc&&"CompositionEvent"in window,vv=null;Yc&&"documentMode"in document&&(vv=document.documentMode);var dge=Yc&&"TextEvent"in window&&!vv,A7=Yc&&(!p_||vv&&8<vv&&11>=vv),T7=" ",k7=!1;function C7(d,p){switch(d){case"keyup":return uge.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function N7(d){return d=d.detail,typeof d=="object"&&"data"in d?d.data:null}var n0=!1;function fge(d,p){switch(d){case"compositionend":return N7(p);case"keypress":return p.which!==32?null:(k7=!0,T7);case"textInput":return d=p.data,d===T7&&k7?null:d;default:return null}}function hge(d,p){if(n0)return d==="compositionend"||!p_&&C7(d,p)?(d=v7(),SE=c_=jd=null,n0=!1,d):null;switch(d){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return A7&&p.locale!=="ko"?null:p.data;default:return null}}var pge={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _7(d){var p=d&&d.nodeName&&d.nodeName.toLowerCase();return p==="input"?!!pge[d.type]:p==="textarea"}function I7(d,p,y,w){e0?t0?t0.push(w):t0=[w]:e0=w,p=gS(p,"onChange"),0<p.length&&(y=new kE("onChange","change",null,y,w),d.push({event:y,listeners:p}))}var bv=null,wv=null;function mge(d){f9(d,0)}function NE(d){var p=ea(d);if(d7(p))return d}function P7(d,p){if(d==="change")return p}var R7=!1;if(Yc){var m_;if(Yc){var g_="oninput"in document;if(!g_){var O7=document.createElement("div");O7.setAttribute("oninput","return;"),g_=typeof O7.oninput=="function"}m_=g_}else m_=!1;R7=m_&&(!document.documentMode||9<document.documentMode)}function M7(){bv&&(bv.detachEvent("onpropertychange",D7),wv=bv=null)}function D7(d){if(d.propertyName==="value"&&NE(wv)){var p=[];I7(p,wv,d,o_(d)),x7(mge,p)}}function gge(d,p,y){d==="focusin"?(M7(),bv=p,wv=y,bv.attachEvent("onpropertychange",D7)):d==="focusout"&&M7()}function yge(d){if(d==="selectionchange"||d==="keyup"||d==="keydown")return NE(wv)}function xge(d,p){if(d==="click")return NE(p)}function vge(d,p){if(d==="input"||d==="change")return NE(p)}function bge(d,p){return d===p&&(d!==0||1/d===1/p)||d!==d&&p!==p}var Ao=typeof Object.is=="function"?Object.is:bge;function Ev(d,p){if(Ao(d,p))return!0;if(typeof d!="object"||d===null||typeof p!="object"||p===null)return!1;var y=Object.keys(d),w=Object.keys(p);if(y.length!==w.length)return!1;for(w=0;w<y.length;w++){var P=y[w];if(!At.call(p,P)||!Ao(d[P],p[P]))return!1}return!0}function L7(d){for(;d&&d.firstChild;)d=d.firstChild;return d}function j7(d,p){var y=L7(d);d=0;for(var w;y;){if(y.nodeType===3){if(w=d+y.textContent.length,d<=p&&w>=p)return{node:y,offset:p-d};d=w}e:{for(;y;){if(y.nextSibling){y=y.nextSibling;break e}y=y.parentNode}y=void 0}y=L7(y)}}function B7(d,p){return d&&p?d===p?!0:d&&d.nodeType===3?!1:p&&p.nodeType===3?B7(d,p.parentNode):"contains"in d?d.contains(p):d.compareDocumentPosition?!!(d.compareDocumentPosition(p)&16):!1:!1}function U7(d){d=d!=null&&d.ownerDocument!=null&&d.ownerDocument.defaultView!=null?d.ownerDocument.defaultView:window;for(var p=wE(d.document);p instanceof d.HTMLIFrameElement;){try{var y=typeof p.contentWindow.location.href=="string"}catch{y=!1}if(y)d=p.contentWindow;else break;p=wE(d.document)}return p}function y_(d){var p=d&&d.nodeName&&d.nodeName.toLowerCase();return p&&(p==="input"&&(d.type==="text"||d.type==="search"||d.type==="tel"||d.type==="url"||d.type==="password")||p==="textarea"||d.contentEditable==="true")}var wge=Yc&&"documentMode"in document&&11>=document.documentMode,r0=null,x_=null,Sv=null,v_=!1;function F7(d,p,y){var w=y.window===y?y.document:y.nodeType===9?y:y.ownerDocument;v_||r0==null||r0!==wE(w)||(w=r0,"selectionStart"in w&&y_(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),Sv&&Ev(Sv,w)||(Sv=w,w=gS(x_,"onSelect"),0<w.length&&(p=new kE("onSelect","select",null,p,y),d.push({event:p,listeners:w}),p.target=r0)))}function Ch(d,p){var y={};return y[d.toLowerCase()]=p.toLowerCase(),y["Webkit"+d]="webkit"+p,y["Moz"+d]="moz"+p,y}var i0={animationend:Ch("Animation","AnimationEnd"),animationiteration:Ch("Animation","AnimationIteration"),animationstart:Ch("Animation","AnimationStart"),transitionrun:Ch("Transition","TransitionRun"),transitionstart:Ch("Transition","TransitionStart"),transitioncancel:Ch("Transition","TransitionCancel"),transitionend:Ch("Transition","TransitionEnd")},b_={},$7={};Yc&&($7=document.createElement("div").style,"AnimationEvent"in window||(delete i0.animationend.animation,delete i0.animationiteration.animation,delete i0.animationstart.animation),"TransitionEvent"in window||delete i0.transitionend.transition);function Nh(d){if(b_[d])return b_[d];if(!i0[d])return d;var p=i0[d],y;for(y in p)if(p.hasOwnProperty(y)&&y in $7)return b_[d]=p[y];return d}var z7=Nh("animationend"),H7=Nh("animationiteration"),V7=Nh("animationstart"),Ege=Nh("transitionrun"),Sge=Nh("transitionstart"),Age=Nh("transitioncancel"),q7=Nh("transitionend"),G7=new Map,w_="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");w_.push("scrollEnd");function Ja(d,p){G7.set(d,p),Yr(p,[d])}var _E=typeof reportError=="function"?reportError:function(d){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var p=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof d=="object"&&d!==null&&typeof d.message=="string"?String(d.message):String(d),error:d});if(!window.dispatchEvent(p))return}else if(typeof Al=="object"&&typeof Al.emit=="function"){Al.emit("uncaughtException",d);return}console.error(d)},ra=[],s0=0,E_=0;function IE(){for(var d=s0,p=E_=s0=0;p<d;){var y=ra[p];ra[p++]=null;var w=ra[p];ra[p++]=null;var P=ra[p];ra[p++]=null;var L=ra[p];if(ra[p++]=null,w!==null&&P!==null){var ne=w.pending;ne===null?P.next=P:(P.next=ne.next,ne.next=P),w.pending=P}L!==0&&K7(y,P,L)}}function PE(d,p,y,w){ra[s0++]=d,ra[s0++]=p,ra[s0++]=y,ra[s0++]=w,E_|=w,d.lanes|=w,d=d.alternate,d!==null&&(d.lanes|=w)}function S_(d,p,y,w){return PE(d,p,y,w),RE(d)}function _h(d,p){return PE(d,null,null,p),RE(d)}function K7(d,p,y){d.lanes|=y;var w=d.alternate;w!==null&&(w.lanes|=y);for(var P=!1,L=d.return;L!==null;)L.childLanes|=y,w=L.alternate,w!==null&&(w.childLanes|=y),L.tag===22&&(d=L.stateNode,d===null||d._visibility&1||(P=!0)),d=L,L=L.return;return d.tag===3?(L=d.stateNode,P&&p!==null&&(P=31-ye(y),d=L.hiddenUpdates,w=d[P],w===null?d[P]=[p]:w.push(p),p.lane=y|536870912),L):null}function RE(d){if(50<qv)throw qv=0,RI=null,Error(r(185));for(var p=d.return;p!==null;)d=p,p=d.return;return d.tag===3?d.stateNode:null}var o0={};function Tge(d,p,y,w){this.tag=d,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function To(d,p,y,w){return new Tge(d,p,y,w)}function A_(d){return d=d.prototype,!(!d||!d.isReactComponent)}function Jc(d,p){var y=d.alternate;return y===null?(y=To(d.tag,p,d.key,d.mode),y.elementType=d.elementType,y.type=d.type,y.stateNode=d.stateNode,y.alternate=d,d.alternate=y):(y.pendingProps=p,y.type=d.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=d.flags&65011712,y.childLanes=d.childLanes,y.lanes=d.lanes,y.child=d.child,y.memoizedProps=d.memoizedProps,y.memoizedState=d.memoizedState,y.updateQueue=d.updateQueue,p=d.dependencies,y.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},y.sibling=d.sibling,y.index=d.index,y.ref=d.ref,y.refCleanup=d.refCleanup,y}function W7(d,p){d.flags&=65011714;var y=d.alternate;return y===null?(d.childLanes=0,d.lanes=p,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=y.childLanes,d.lanes=y.lanes,d.child=y.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=y.memoizedProps,d.memoizedState=y.memoizedState,d.updateQueue=y.updateQueue,d.type=y.type,p=y.dependencies,d.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext}),d}function OE(d,p,y,w,P,L){var ne=0;if(w=d,typeof d=="function")A_(d)&&(ne=1);else if(typeof d=="string")ne=Iye(d,y,Y.current)?26:d==="html"||d==="head"||d==="body"?27:5;else e:switch(d){case j:return d=To(31,y,p,P),d.elementType=j,d.lanes=L,d;case x:return Ih(y.children,P,L,p);case b:ne=8,P|=24;break;case E:return d=To(12,y,p,P|2),d.elementType=E,d.lanes=L,d;case U:return d=To(13,y,p,P),d.elementType=U,d.lanes=L,d;case R:return d=To(19,y,p,P),d.elementType=R,d.lanes=L,d;default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case k:ne=10;break e;case C:ne=9;break e;case O:ne=11;break e;case $:ne=14;break e;case V:ne=16,w=null;break e}ne=29,y=Error(r(130,d===null?"null":typeof d,"")),w=null}return p=To(ne,y,p,P),p.elementType=d,p.type=w,p.lanes=L,p}function Ih(d,p,y,w){return d=To(7,d,w,p),d.lanes=y,d}function T_(d,p,y){return d=To(6,d,null,p),d.lanes=y,d}function Y7(d){var p=To(18,null,null,0);return p.stateNode=d,p}function k_(d,p,y){return p=To(4,d.children!==null?d.children:[],d.key,p),p.lanes=y,p.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},p}var J7=new WeakMap;function ia(d,p){if(typeof d=="object"&&d!==null){var y=J7.get(d);return y!==void 0?y:(p={value:d,source:p,stack:We(p)},J7.set(d,p),p)}return{value:d,source:p,stack:We(p)}}var a0=[],l0=0,ME=null,Av=0,sa=[],oa=0,Bd=null,Hl=1,Vl="";function Xc(d,p){a0[l0++]=Av,a0[l0++]=ME,ME=d,Av=p}function X7(d,p,y){sa[oa++]=Hl,sa[oa++]=Vl,sa[oa++]=Bd,Bd=d;var w=Hl;d=Vl;var P=32-ye(w)-1;w&=~(1<<P),y+=1;var L=32-ye(p)+P;if(30<L){var ne=P-P%5;L=(w&(1<<ne)-1).toString(32),w>>=ne,P-=ne,Hl=1<<32-ye(p)+P|y<<P|w,Vl=L+d}else Hl=1<<L|y<<P|w,Vl=d}function C_(d){d.return!==null&&(Xc(d,1),X7(d,1,0))}function N_(d){for(;d===ME;)ME=a0[--l0],a0[l0]=null,Av=a0[--l0],a0[l0]=null;for(;d===Bd;)Bd=sa[--oa],sa[oa]=null,Vl=sa[--oa],sa[oa]=null,Hl=sa[--oa],sa[oa]=null}function Q7(d,p){sa[oa++]=Hl,sa[oa++]=Vl,sa[oa++]=Bd,Hl=p.id,Vl=p.overflow,Bd=d}var Vi=null,vr=null,Cn=!1,Ud=null,aa=!1,__=Error(r(519));function Fd(d){var p=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Tv(ia(p,d)),__}function Z7(d){var p=d.stateNode,y=d.type,w=d.memoizedProps;switch(p[yt]=d,p[vn]=w,y){case"dialog":wn("cancel",p),wn("close",p);break;case"iframe":case"object":case"embed":wn("load",p);break;case"video":case"audio":for(y=0;y<Kv.length;y++)wn(Kv[y],p);break;case"source":wn("error",p);break;case"img":case"image":case"link":wn("error",p),wn("load",p);break;case"details":wn("toggle",p);break;case"input":wn("invalid",p),f7(p,w.value,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name,!0);break;case"select":wn("invalid",p);break;case"textarea":wn("invalid",p),p7(p,w.value,w.defaultValue,w.children)}y=w.children,typeof y!="string"&&typeof y!="number"&&typeof y!="bigint"||p.textContent===""+y||w.suppressHydrationWarning===!0||g9(p.textContent,y)?(w.popover!=null&&(wn("beforetoggle",p),wn("toggle",p)),w.onScroll!=null&&wn("scroll",p),w.onScrollEnd!=null&&wn("scrollend",p),w.onClick!=null&&(p.onclick=Wc),p=!0):p=!1,p||Fd(d,!0)}function eU(d){for(Vi=d.return;Vi;)switch(Vi.tag){case 5:case 31:case 13:aa=!1;return;case 27:case 3:aa=!0;return;default:Vi=Vi.return}}function c0(d){if(d!==Vi)return!1;if(!Cn)return eU(d),Cn=!0,!1;var p=d.tag,y;if((y=p!==3&&p!==27)&&((y=p===5)&&(y=d.type,y=!(y!=="form"&&y!=="button")||KI(d.type,d.memoizedProps)),y=!y),y&&vr&&Fd(d),eU(d),p===13){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));vr=T9(d)}else if(p===31){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));vr=T9(d)}else p===27?(p=vr,ef(d.type)?(d=QI,QI=null,vr=d):vr=p):vr=Vi?ca(d.stateNode.nextSibling):null;return!0}function Ph(){vr=Vi=null,Cn=!1}function I_(){var d=Ud;return d!==null&&(io===null?io=d:io.push.apply(io,d),Ud=null),d}function Tv(d){Ud===null?Ud=[d]:Ud.push(d)}var P_=q(null),Rh=null,Qc=null;function $d(d,p,y){_(P_,p._currentValue),p._currentValue=y}function Zc(d){d._currentValue=P_.current,M(P_)}function R_(d,p,y){for(;d!==null;){var w=d.alternate;if((d.childLanes&p)!==p?(d.childLanes|=p,w!==null&&(w.childLanes|=p)):w!==null&&(w.childLanes&p)!==p&&(w.childLanes|=p),d===y)break;d=d.return}}function O_(d,p,y,w){var P=d.child;for(P!==null&&(P.return=d);P!==null;){var L=P.dependencies;if(L!==null){var ne=P.child;L=L.firstContext;e:for(;L!==null;){var de=L;L=P;for(var we=0;we<p.length;we++)if(de.context===p[we]){L.lanes|=y,de=L.alternate,de!==null&&(de.lanes|=y),R_(L.return,y,d),w||(ne=null);break e}L=de.next}}else if(P.tag===18){if(ne=P.return,ne===null)throw Error(r(341));ne.lanes|=y,L=ne.alternate,L!==null&&(L.lanes|=y),R_(ne,y,d),ne=null}else ne=P.child;if(ne!==null)ne.return=P;else for(ne=P;ne!==null;){if(ne===d){ne=null;break}if(P=ne.sibling,P!==null){P.return=ne.return,ne=P;break}ne=ne.return}P=ne}}function u0(d,p,y,w){d=null;for(var P=p,L=!1;P!==null;){if(!L){if((P.flags&524288)!==0)L=!0;else if((P.flags&262144)!==0)break}if(P.tag===10){var ne=P.alternate;if(ne===null)throw Error(r(387));if(ne=ne.memoizedProps,ne!==null){var de=P.type;Ao(P.pendingProps.value,ne.value)||(d!==null?d.push(de):d=[de])}}else if(P===oe.current){if(ne=P.alternate,ne===null)throw Error(r(387));ne.memoizedState.memoizedState!==P.memoizedState.memoizedState&&(d!==null?d.push(Qv):d=[Qv])}P=P.return}d!==null&&O_(p,d,y,w),p.flags|=262144}function DE(d){for(d=d.firstContext;d!==null;){if(!Ao(d.context._currentValue,d.memoizedValue))return!0;d=d.next}return!1}function Oh(d){Rh=d,Qc=null,d=d.dependencies,d!==null&&(d.firstContext=null)}function qi(d){return tU(Rh,d)}function LE(d,p){return Rh===null&&Oh(d),tU(d,p)}function tU(d,p){var y=p._currentValue;if(p={context:p,memoizedValue:y,next:null},Qc===null){if(d===null)throw Error(r(308));Qc=p,d.dependencies={lanes:0,firstContext:p},d.flags|=524288}else Qc=Qc.next=p;return y}var kge=typeof AbortController<"u"?AbortController:function(){var d=[],p=this.signal={aborted:!1,addEventListener:function(y,w){d.push(w)}};this.abort=function(){p.aborted=!0,d.forEach(function(y){return y()})}},Cge=t.unstable_scheduleCallback,Nge=t.unstable_NormalPriority,si={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function M_(){return{controller:new kge,data:new Map,refCount:0}}function kv(d){d.refCount--,d.refCount===0&&Cge(Nge,function(){d.controller.abort()})}var Cv=null,D_=0,d0=0,f0=null;function _ge(d,p){if(Cv===null){var y=Cv=[];D_=0,d0=BI(),f0={status:"pending",value:void 0,then:function(w){y.push(w)}}}return D_++,p.then(nU,nU),p}function nU(){if(--D_===0&&Cv!==null){f0!==null&&(f0.status="fulfilled");var d=Cv;Cv=null,d0=0,f0=null;for(var p=0;p<d.length;p++)(0,d[p])()}}function Ige(d,p){var y=[],w={status:"pending",value:null,reason:null,then:function(P){y.push(P)}};return d.then(function(){w.status="fulfilled",w.value=p;for(var P=0;P<y.length;P++)(0,y[P])(p)},function(P){for(w.status="rejected",w.reason=P,P=0;P<y.length;P++)(0,y[P])(void 0)}),w}var rU=D.S;D.S=function(d,p){FF=Tt(),typeof p=="object"&&p!==null&&typeof p.then=="function"&&_ge(d,p),rU!==null&&rU(d,p)};var Mh=q(null);function L_(){var d=Mh.current;return d!==null?d:sr.pooledCache}function jE(d,p){p===null?_(Mh,Mh.current):_(Mh,p.pool)}function iU(){var d=L_();return d===null?null:{parent:si._currentValue,pool:d}}var h0=Error(r(460)),j_=Error(r(474)),BE=Error(r(542)),UE={then:function(){}};function sU(d){return d=d.status,d==="fulfilled"||d==="rejected"}function oU(d,p,y){switch(y=d[y],y===void 0?d.push(p):y!==p&&(p.then(Wc,Wc),p=y),p.status){case"fulfilled":return p.value;case"rejected":throw d=p.reason,lU(d),d;default:if(typeof p.status=="string")p.then(Wc,Wc);else{if(d=sr,d!==null&&100<d.shellSuspendCounter)throw Error(r(482));d=p,d.status="pending",d.then(function(w){if(p.status==="pending"){var P=p;P.status="fulfilled",P.value=w}},function(w){if(p.status==="pending"){var P=p;P.status="rejected",P.reason=w}})}switch(p.status){case"fulfilled":return p.value;case"rejected":throw d=p.reason,lU(d),d}throw Lh=p,h0}}function Dh(d){try{var p=d._init;return p(d._payload)}catch(y){throw y!==null&&typeof y=="object"&&typeof y.then=="function"?(Lh=y,h0):y}}var Lh=null;function aU(){if(Lh===null)throw Error(r(459));var d=Lh;return Lh=null,d}function lU(d){if(d===h0||d===BE)throw Error(r(483))}var p0=null,Nv=0;function FE(d){var p=Nv;return Nv+=1,p0===null&&(p0=[]),oU(p0,d,p)}function _v(d,p){p=p.props.ref,d.ref=p!==void 0?p:null}function $E(d,p){throw p.$$typeof===m?Error(r(525)):(d=Object.prototype.toString.call(p),Error(r(31,d==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":d)))}function cU(d){function p(_e,Te){if(d){var De=_e.deletions;De===null?(_e.deletions=[Te],_e.flags|=16):De.push(Te)}}function y(_e,Te){if(!d)return null;for(;Te!==null;)p(_e,Te),Te=Te.sibling;return null}function w(_e){for(var Te=new Map;_e!==null;)_e.key!==null?Te.set(_e.key,_e):Te.set(_e.index,_e),_e=_e.sibling;return Te}function P(_e,Te){return _e=Jc(_e,Te),_e.index=0,_e.sibling=null,_e}function L(_e,Te,De){return _e.index=De,d?(De=_e.alternate,De!==null?(De=De.index,De<Te?(_e.flags|=67108866,Te):De):(_e.flags|=67108866,Te)):(_e.flags|=1048576,Te)}function ne(_e){return d&&_e.alternate===null&&(_e.flags|=67108866),_e}function de(_e,Te,De,Je){return Te===null||Te.tag!==6?(Te=T_(De,_e.mode,Je),Te.return=_e,Te):(Te=P(Te,De),Te.return=_e,Te)}function we(_e,Te,De,Je){var Ut=De.type;return Ut===x?qe(_e,Te,De.props.children,Je,De.key):Te!==null&&(Te.elementType===Ut||typeof Ut=="object"&&Ut!==null&&Ut.$$typeof===V&&Dh(Ut)===Te.type)?(Te=P(Te,De.props),_v(Te,De),Te.return=_e,Te):(Te=OE(De.type,De.key,De.props,null,_e.mode,Je),_v(Te,De),Te.return=_e,Te)}function Le(_e,Te,De,Je){return Te===null||Te.tag!==4||Te.stateNode.containerInfo!==De.containerInfo||Te.stateNode.implementation!==De.implementation?(Te=k_(De,_e.mode,Je),Te.return=_e,Te):(Te=P(Te,De.children||[]),Te.return=_e,Te)}function qe(_e,Te,De,Je,Ut){return Te===null||Te.tag!==7?(Te=Ih(De,_e.mode,Je,Ut),Te.return=_e,Te):(Te=P(Te,De),Te.return=_e,Te)}function Qe(_e,Te,De){if(typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint")return Te=T_(""+Te,_e.mode,De),Te.return=_e,Te;if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case g:return De=OE(Te.type,Te.key,Te.props,null,_e.mode,De),_v(De,Te),De.return=_e,De;case v:return Te=k_(Te,_e.mode,De),Te.return=_e,Te;case V:return Te=Dh(Te),Qe(_e,Te,De)}if(I(Te)||H(Te))return Te=Ih(Te,_e.mode,De,null),Te.return=_e,Te;if(typeof Te.then=="function")return Qe(_e,FE(Te),De);if(Te.$$typeof===k)return Qe(_e,LE(_e,Te),De);$E(_e,Te)}return null}function Ue(_e,Te,De,Je){var Ut=Te!==null?Te.key:null;if(typeof De=="string"&&De!==""||typeof De=="number"||typeof De=="bigint")return Ut!==null?null:de(_e,Te,""+De,Je);if(typeof De=="object"&&De!==null){switch(De.$$typeof){case g:return De.key===Ut?we(_e,Te,De,Je):null;case v:return De.key===Ut?Le(_e,Te,De,Je):null;case V:return De=Dh(De),Ue(_e,Te,De,Je)}if(I(De)||H(De))return Ut!==null?null:qe(_e,Te,De,Je,null);if(typeof De.then=="function")return Ue(_e,Te,FE(De),Je);if(De.$$typeof===k)return Ue(_e,Te,LE(_e,De),Je);$E(_e,De)}return null}function He(_e,Te,De,Je,Ut){if(typeof Je=="string"&&Je!==""||typeof Je=="number"||typeof Je=="bigint")return _e=_e.get(De)||null,de(Te,_e,""+Je,Ut);if(typeof Je=="object"&&Je!==null){switch(Je.$$typeof){case g:return _e=_e.get(Je.key===null?De:Je.key)||null,we(Te,_e,Je,Ut);case v:return _e=_e.get(Je.key===null?De:Je.key)||null,Le(Te,_e,Je,Ut);case V:return Je=Dh(Je),He(_e,Te,De,Je,Ut)}if(I(Je)||H(Je))return _e=_e.get(De)||null,qe(Te,_e,Je,Ut,null);if(typeof Je.then=="function")return He(_e,Te,De,FE(Je),Ut);if(Je.$$typeof===k)return He(_e,Te,De,LE(Te,Je),Ut);$E(Te,Je)}return null}function Nt(_e,Te,De,Je){for(var Ut=null,Dn=null,Rt=Te,un=Te=0,kn=null;Rt!==null&&un<De.length;un++){Rt.index>un?(kn=Rt,Rt=null):kn=Rt.sibling;var Ln=Ue(_e,Rt,De[un],Je);if(Ln===null){Rt===null&&(Rt=kn);break}d&&Rt&&Ln.alternate===null&&p(_e,Rt),Te=L(Ln,Te,un),Dn===null?Ut=Ln:Dn.sibling=Ln,Dn=Ln,Rt=kn}if(un===De.length)return y(_e,Rt),Cn&&Xc(_e,un),Ut;if(Rt===null){for(;un<De.length;un++)Rt=Qe(_e,De[un],Je),Rt!==null&&(Te=L(Rt,Te,un),Dn===null?Ut=Rt:Dn.sibling=Rt,Dn=Rt);return Cn&&Xc(_e,un),Ut}for(Rt=w(Rt);un<De.length;un++)kn=He(Rt,_e,un,De[un],Je),kn!==null&&(d&&kn.alternate!==null&&Rt.delete(kn.key===null?un:kn.key),Te=L(kn,Te,un),Dn===null?Ut=kn:Dn.sibling=kn,Dn=kn);return d&&Rt.forEach(function(of){return p(_e,of)}),Cn&&Xc(_e,un),Ut}function Kt(_e,Te,De,Je){if(De==null)throw Error(r(151));for(var Ut=null,Dn=null,Rt=Te,un=Te=0,kn=null,Ln=De.next();Rt!==null&&!Ln.done;un++,Ln=De.next()){Rt.index>un?(kn=Rt,Rt=null):kn=Rt.sibling;var of=Ue(_e,Rt,Ln.value,Je);if(of===null){Rt===null&&(Rt=kn);break}d&&Rt&&of.alternate===null&&p(_e,Rt),Te=L(of,Te,un),Dn===null?Ut=of:Dn.sibling=of,Dn=of,Rt=kn}if(Ln.done)return y(_e,Rt),Cn&&Xc(_e,un),Ut;if(Rt===null){for(;!Ln.done;un++,Ln=De.next())Ln=Qe(_e,Ln.value,Je),Ln!==null&&(Te=L(Ln,Te,un),Dn===null?Ut=Ln:Dn.sibling=Ln,Dn=Ln);return Cn&&Xc(_e,un),Ut}for(Rt=w(Rt);!Ln.done;un++,Ln=De.next())Ln=He(Rt,_e,un,Ln.value,Je),Ln!==null&&(d&&Ln.alternate!==null&&Rt.delete(Ln.key===null?un:Ln.key),Te=L(Ln,Te,un),Dn===null?Ut=Ln:Dn.sibling=Ln,Dn=Ln);return d&&Rt.forEach(function($ye){return p(_e,$ye)}),Cn&&Xc(_e,un),Ut}function tr(_e,Te,De,Je){if(typeof De=="object"&&De!==null&&De.type===x&&De.key===null&&(De=De.props.children),typeof De=="object"&&De!==null){switch(De.$$typeof){case g:e:{for(var Ut=De.key;Te!==null;){if(Te.key===Ut){if(Ut=De.type,Ut===x){if(Te.tag===7){y(_e,Te.sibling),Je=P(Te,De.props.children),Je.return=_e,_e=Je;break e}}else if(Te.elementType===Ut||typeof Ut=="object"&&Ut!==null&&Ut.$$typeof===V&&Dh(Ut)===Te.type){y(_e,Te.sibling),Je=P(Te,De.props),_v(Je,De),Je.return=_e,_e=Je;break e}y(_e,Te);break}else p(_e,Te);Te=Te.sibling}De.type===x?(Je=Ih(De.props.children,_e.mode,Je,De.key),Je.return=_e,_e=Je):(Je=OE(De.type,De.key,De.props,null,_e.mode,Je),_v(Je,De),Je.return=_e,_e=Je)}return ne(_e);case v:e:{for(Ut=De.key;Te!==null;){if(Te.key===Ut)if(Te.tag===4&&Te.stateNode.containerInfo===De.containerInfo&&Te.stateNode.implementation===De.implementation){y(_e,Te.sibling),Je=P(Te,De.children||[]),Je.return=_e,_e=Je;break e}else{y(_e,Te);break}else p(_e,Te);Te=Te.sibling}Je=k_(De,_e.mode,Je),Je.return=_e,_e=Je}return ne(_e);case V:return De=Dh(De),tr(_e,Te,De,Je)}if(I(De))return Nt(_e,Te,De,Je);if(H(De)){if(Ut=H(De),typeof Ut!="function")throw Error(r(150));return De=Ut.call(De),Kt(_e,Te,De,Je)}if(typeof De.then=="function")return tr(_e,Te,FE(De),Je);if(De.$$typeof===k)return tr(_e,Te,LE(_e,De),Je);$E(_e,De)}return typeof De=="string"&&De!==""||typeof De=="number"||typeof De=="bigint"?(De=""+De,Te!==null&&Te.tag===6?(y(_e,Te.sibling),Je=P(Te,De),Je.return=_e,_e=Je):(y(_e,Te),Je=T_(De,_e.mode,Je),Je.return=_e,_e=Je),ne(_e)):y(_e,Te)}return function(_e,Te,De,Je){try{Nv=0;var Ut=tr(_e,Te,De,Je);return p0=null,Ut}catch(Rt){if(Rt===h0||Rt===BE)throw Rt;var Dn=To(29,Rt,null,_e.mode);return Dn.lanes=Je,Dn.return=_e,Dn}finally{}}}var jh=cU(!0),uU=cU(!1),zd=!1;function B_(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function U_(d,p){d=d.updateQueue,p.updateQueue===d&&(p.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,callbacks:null})}function Hd(d){return{lane:d,tag:0,payload:null,callback:null,next:null}}function Vd(d,p,y){var w=d.updateQueue;if(w===null)return null;if(w=w.shared,(Hn&2)!==0){var P=w.pending;return P===null?p.next=p:(p.next=P.next,P.next=p),w.pending=p,p=RE(d),K7(d,null,y),p}return PE(d,w,p,y),RE(d)}function Iv(d,p,y){if(p=p.updateQueue,p!==null&&(p=p.shared,(y&4194048)!==0)){var w=p.lanes;w&=d.pendingLanes,y|=w,p.lanes=y,ke(d,y)}}function F_(d,p){var y=d.updateQueue,w=d.alternate;if(w!==null&&(w=w.updateQueue,y===w)){var P=null,L=null;if(y=y.firstBaseUpdate,y!==null){do{var ne={lane:y.lane,tag:y.tag,payload:y.payload,callback:null,next:null};L===null?P=L=ne:L=L.next=ne,y=y.next}while(y!==null);L===null?P=L=p:L=L.next=p}else P=L=p;y={baseState:w.baseState,firstBaseUpdate:P,lastBaseUpdate:L,shared:w.shared,callbacks:w.callbacks},d.updateQueue=y;return}d=y.lastBaseUpdate,d===null?y.firstBaseUpdate=p:d.next=p,y.lastBaseUpdate=p}var $_=!1;function Pv(){if($_){var d=f0;if(d!==null)throw d}}function Rv(d,p,y,w){$_=!1;var P=d.updateQueue;zd=!1;var L=P.firstBaseUpdate,ne=P.lastBaseUpdate,de=P.shared.pending;if(de!==null){P.shared.pending=null;var we=de,Le=we.next;we.next=null,ne===null?L=Le:ne.next=Le,ne=we;var qe=d.alternate;qe!==null&&(qe=qe.updateQueue,de=qe.lastBaseUpdate,de!==ne&&(de===null?qe.firstBaseUpdate=Le:de.next=Le,qe.lastBaseUpdate=we))}if(L!==null){var Qe=P.baseState;ne=0,qe=Le=we=null,de=L;do{var Ue=de.lane&-536870913,He=Ue!==de.lane;if(He?(Tn&Ue)===Ue:(w&Ue)===Ue){Ue!==0&&Ue===d0&&($_=!0),qe!==null&&(qe=qe.next={lane:0,tag:de.tag,payload:de.payload,callback:null,next:null});e:{var Nt=d,Kt=de;Ue=p;var tr=y;switch(Kt.tag){case 1:if(Nt=Kt.payload,typeof Nt=="function"){Qe=Nt.call(tr,Qe,Ue);break e}Qe=Nt;break e;case 3:Nt.flags=Nt.flags&-65537|128;case 0:if(Nt=Kt.payload,Ue=typeof Nt=="function"?Nt.call(tr,Qe,Ue):Nt,Ue==null)break e;Qe=f({},Qe,Ue);break e;case 2:zd=!0}}Ue=de.callback,Ue!==null&&(d.flags|=64,He&&(d.flags|=8192),He=P.callbacks,He===null?P.callbacks=[Ue]:He.push(Ue))}else He={lane:Ue,tag:de.tag,payload:de.payload,callback:de.callback,next:null},qe===null?(Le=qe=He,we=Qe):qe=qe.next=He,ne|=Ue;if(de=de.next,de===null){if(de=P.shared.pending,de===null)break;He=de,de=He.next,He.next=null,P.lastBaseUpdate=He,P.shared.pending=null}}while(!0);qe===null&&(we=Qe),P.baseState=we,P.firstBaseUpdate=Le,P.lastBaseUpdate=qe,L===null&&(P.shared.lanes=0),Yd|=ne,d.lanes=ne,d.memoizedState=Qe}}function dU(d,p){if(typeof d!="function")throw Error(r(191,d));d.call(p)}function fU(d,p){var y=d.callbacks;if(y!==null)for(d.callbacks=null,d=0;d<y.length;d++)dU(y[d],p)}var m0=q(null),zE=q(0);function hU(d,p){d=lu,_(zE,d),_(m0,p),lu=d|p.baseLanes}function z_(){_(zE,lu),_(m0,m0.current)}function H_(){lu=zE.current,M(m0),M(zE)}var ko=q(null),la=null;function qd(d){var p=d.alternate;_(Jr,Jr.current&1),_(ko,d),la===null&&(p===null||m0.current!==null||p.memoizedState!==null)&&(la=d)}function V_(d){_(Jr,Jr.current),_(ko,d),la===null&&(la=d)}function pU(d){d.tag===22?(_(Jr,Jr.current),_(ko,d),la===null&&(la=d)):Gd()}function Gd(){_(Jr,Jr.current),_(ko,ko.current)}function Co(d){M(ko),la===d&&(la=null),M(Jr)}var Jr=q(0);function HE(d){for(var p=d;p!==null;){if(p.tag===13){var y=p.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||JI(y)||XI(y)))return p}else if(p.tag===19&&(p.memoizedProps.revealOrder==="forwards"||p.memoizedProps.revealOrder==="backwards"||p.memoizedProps.revealOrder==="unstable_legacy-backwards"||p.memoizedProps.revealOrder==="together")){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===d)break;for(;p.sibling===null;){if(p.return===null||p.return===d)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var eu=0,sn=null,Zn=null,oi=null,VE=!1,g0=!1,Bh=!1,qE=0,Ov=0,y0=null,Pge=0;function Ur(){throw Error(r(321))}function q_(d,p){if(p===null)return!1;for(var y=0;y<p.length&&y<d.length;y++)if(!Ao(d[y],p[y]))return!1;return!0}function G_(d,p,y,w,P,L){return eu=L,sn=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,D.H=d===null||d.memoizedState===null?XU:aI,Bh=!1,L=y(w,P),Bh=!1,g0&&(L=gU(p,y,w,P)),mU(d),L}function mU(d){D.H=Lv;var p=Zn!==null&&Zn.next!==null;if(eu=0,oi=Zn=sn=null,VE=!1,Ov=0,y0=null,p)throw Error(r(300));d===null||ai||(d=d.dependencies,d!==null&&DE(d)&&(ai=!0))}function gU(d,p,y,w){sn=d;var P=0;do{if(g0&&(y0=null),Ov=0,g0=!1,25<=P)throw Error(r(301));if(P+=1,oi=Zn=null,d.updateQueue!=null){var L=d.updateQueue;L.lastEffect=null,L.events=null,L.stores=null,L.memoCache!=null&&(L.memoCache.index=0)}D.H=QU,L=p(y,w)}while(g0);return L}function Rge(){var d=D.H,p=d.useState()[0];return p=typeof p.then=="function"?Mv(p):p,d=d.useState()[0],(Zn!==null?Zn.memoizedState:null)!==d&&(sn.flags|=1024),p}function K_(){var d=qE!==0;return qE=0,d}function W_(d,p,y){p.updateQueue=d.updateQueue,p.flags&=-2053,d.lanes&=~y}function Y_(d){if(VE){for(d=d.memoizedState;d!==null;){var p=d.queue;p!==null&&(p.pending=null),d=d.next}VE=!1}eu=0,oi=Zn=sn=null,g0=!1,Ov=qE=0,y0=null}function Ls(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return oi===null?sn.memoizedState=oi=d:oi=oi.next=d,oi}function Xr(){if(Zn===null){var d=sn.alternate;d=d!==null?d.memoizedState:null}else d=Zn.next;var p=oi===null?sn.memoizedState:oi.next;if(p!==null)oi=p,Zn=d;else{if(d===null)throw sn.alternate===null?Error(r(467)):Error(r(310));Zn=d,d={memoizedState:Zn.memoizedState,baseState:Zn.baseState,baseQueue:Zn.baseQueue,queue:Zn.queue,next:null},oi===null?sn.memoizedState=oi=d:oi=oi.next=d}return oi}function GE(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Mv(d){var p=Ov;return Ov+=1,y0===null&&(y0=[]),d=oU(y0,d,p),p=sn,(oi===null?p.memoizedState:oi.next)===null&&(p=p.alternate,D.H=p===null||p.memoizedState===null?XU:aI),d}function KE(d){if(d!==null&&typeof d=="object"){if(typeof d.then=="function")return Mv(d);if(d.$$typeof===k)return qi(d)}throw Error(r(438,String(d)))}function J_(d){var p=null,y=sn.updateQueue;if(y!==null&&(p=y.memoCache),p==null){var w=sn.alternate;w!==null&&(w=w.updateQueue,w!==null&&(w=w.memoCache,w!=null&&(p={data:w.data.map(function(P){return P.slice()}),index:0})))}if(p==null&&(p={data:[],index:0}),y===null&&(y=GE(),sn.updateQueue=y),y.memoCache=p,y=p.data[p.index],y===void 0)for(y=p.data[p.index]=Array(d),w=0;w<d;w++)y[w]=F;return p.index++,y}function tu(d,p){return typeof p=="function"?p(d):p}function WE(d){var p=Xr();return X_(p,Zn,d)}function X_(d,p,y){var w=d.queue;if(w===null)throw Error(r(311));w.lastRenderedReducer=y;var P=d.baseQueue,L=w.pending;if(L!==null){if(P!==null){var ne=P.next;P.next=L.next,L.next=ne}p.baseQueue=P=L,w.pending=null}if(L=d.baseState,P===null)d.memoizedState=L;else{p=P.next;var de=ne=null,we=null,Le=p,qe=!1;do{var Qe=Le.lane&-536870913;if(Qe!==Le.lane?(Tn&Qe)===Qe:(eu&Qe)===Qe){var Ue=Le.revertLane;if(Ue===0)we!==null&&(we=we.next={lane:0,revertLane:0,gesture:null,action:Le.action,hasEagerState:Le.hasEagerState,eagerState:Le.eagerState,next:null}),Qe===d0&&(qe=!0);else if((eu&Ue)===Ue){Le=Le.next,Ue===d0&&(qe=!0);continue}else Qe={lane:0,revertLane:Le.revertLane,gesture:null,action:Le.action,hasEagerState:Le.hasEagerState,eagerState:Le.eagerState,next:null},we===null?(de=we=Qe,ne=L):we=we.next=Qe,sn.lanes|=Ue,Yd|=Ue;Qe=Le.action,Bh&&y(L,Qe),L=Le.hasEagerState?Le.eagerState:y(L,Qe)}else Ue={lane:Qe,revertLane:Le.revertLane,gesture:Le.gesture,action:Le.action,hasEagerState:Le.hasEagerState,eagerState:Le.eagerState,next:null},we===null?(de=we=Ue,ne=L):we=we.next=Ue,sn.lanes|=Qe,Yd|=Qe;Le=Le.next}while(Le!==null&&Le!==p);if(we===null?ne=L:we.next=de,!Ao(L,d.memoizedState)&&(ai=!0,qe&&(y=f0,y!==null)))throw y;d.memoizedState=L,d.baseState=ne,d.baseQueue=we,w.lastRenderedState=L}return P===null&&(w.lanes=0),[d.memoizedState,w.dispatch]}function Q_(d){var p=Xr(),y=p.queue;if(y===null)throw Error(r(311));y.lastRenderedReducer=d;var w=y.dispatch,P=y.pending,L=p.memoizedState;if(P!==null){y.pending=null;var ne=P=P.next;do L=d(L,ne.action),ne=ne.next;while(ne!==P);Ao(L,p.memoizedState)||(ai=!0),p.memoizedState=L,p.baseQueue===null&&(p.baseState=L),y.lastRenderedState=L}return[L,w]}function yU(d,p,y){var w=sn,P=Xr(),L=Cn;if(L){if(y===void 0)throw Error(r(407));y=y()}else y=p();var ne=!Ao((Zn||P).memoizedState,y);if(ne&&(P.memoizedState=y,ai=!0),P=P.queue,tI(bU.bind(null,w,P,d),[d]),P.getSnapshot!==p||ne||oi!==null&&oi.memoizedState.tag&1){if(w.flags|=2048,x0(9,{destroy:void 0},vU.bind(null,w,P,y,p),null),sr===null)throw Error(r(349));L||(eu&127)!==0||xU(w,p,y)}return y}function xU(d,p,y){d.flags|=16384,d={getSnapshot:p,value:y},p=sn.updateQueue,p===null?(p=GE(),sn.updateQueue=p,p.stores=[d]):(y=p.stores,y===null?p.stores=[d]:y.push(d))}function vU(d,p,y,w){p.value=y,p.getSnapshot=w,wU(p)&&EU(d)}function bU(d,p,y){return y(function(){wU(p)&&EU(d)})}function wU(d){var p=d.getSnapshot;d=d.value;try{var y=p();return!Ao(d,y)}catch{return!0}}function EU(d){var p=_h(d,2);p!==null&&so(p,d,2)}function Z_(d){var p=Ls();if(typeof d=="function"){var y=d;if(d=y(),Bh){he(!0);try{y()}finally{he(!1)}}}return p.memoizedState=p.baseState=d,p.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:tu,lastRenderedState:d},p}function SU(d,p,y,w){return d.baseState=y,X_(d,Zn,typeof w=="function"?w:tu)}function Oge(d,p,y,w,P){if(XE(d))throw Error(r(485));if(d=p.action,d!==null){var L={payload:P,action:d,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ne){L.listeners.push(ne)}};D.T!==null?y(!0):L.isTransition=!1,w(L),y=p.pending,y===null?(L.next=p.pending=L,AU(p,L)):(L.next=y.next,p.pending=y.next=L)}}function AU(d,p){var y=p.action,w=p.payload,P=d.state;if(p.isTransition){var L=D.T,ne={};D.T=ne;try{var de=y(P,w),we=D.S;we!==null&&we(ne,de),TU(d,p,de)}catch(Le){eI(d,p,Le)}finally{L!==null&&ne.types!==null&&(L.types=ne.types),D.T=L}}else try{L=y(P,w),TU(d,p,L)}catch(Le){eI(d,p,Le)}}function TU(d,p,y){y!==null&&typeof y=="object"&&typeof y.then=="function"?y.then(function(w){kU(d,p,w)},function(w){return eI(d,p,w)}):kU(d,p,y)}function kU(d,p,y){p.status="fulfilled",p.value=y,CU(p),d.state=y,p=d.pending,p!==null&&(y=p.next,y===p?d.pending=null:(y=y.next,p.next=y,AU(d,y)))}function eI(d,p,y){var w=d.pending;if(d.pending=null,w!==null){w=w.next;do p.status="rejected",p.reason=y,CU(p),p=p.next;while(p!==w)}d.action=null}function CU(d){d=d.listeners;for(var p=0;p<d.length;p++)(0,d[p])()}function NU(d,p){return p}function _U(d,p){if(Cn){var y=sr.formState;if(y!==null){e:{var w=sn;if(Cn){if(vr){t:{for(var P=vr,L=aa;P.nodeType!==8;){if(!L){P=null;break t}if(P=ca(P.nextSibling),P===null){P=null;break t}}L=P.data,P=L==="F!"||L==="F"?P:null}if(P){vr=ca(P.nextSibling),w=P.data==="F!";break e}}Fd(w)}w=!1}w&&(p=y[0])}}return y=Ls(),y.memoizedState=y.baseState=p,w={pending:null,lanes:0,dispatch:null,lastRenderedReducer:NU,lastRenderedState:p},y.queue=w,y=WU.bind(null,sn,w),w.dispatch=y,w=Z_(!1),L=oI.bind(null,sn,!1,w.queue),w=Ls(),P={state:p,dispatch:null,action:d,pending:null},w.queue=P,y=Oge.bind(null,sn,P,L,y),P.dispatch=y,w.memoizedState=d,[p,y,!1]}function IU(d){var p=Xr();return PU(p,Zn,d)}function PU(d,p,y){if(p=X_(d,p,NU)[0],d=WE(tu)[0],typeof p=="object"&&p!==null&&typeof p.then=="function")try{var w=Mv(p)}catch(ne){throw ne===h0?BE:ne}else w=p;p=Xr();var P=p.queue,L=P.dispatch;return y!==p.memoizedState&&(sn.flags|=2048,x0(9,{destroy:void 0},Mge.bind(null,P,y),null)),[w,L,d]}function Mge(d,p){d.action=p}function RU(d){var p=Xr(),y=Zn;if(y!==null)return PU(p,y,d);Xr(),p=p.memoizedState,y=Xr();var w=y.queue.dispatch;return y.memoizedState=d,[p,w,!1]}function x0(d,p,y,w){return d={tag:d,create:y,deps:w,inst:p,next:null},p=sn.updateQueue,p===null&&(p=GE(),sn.updateQueue=p),y=p.lastEffect,y===null?p.lastEffect=d.next=d:(w=y.next,y.next=d,d.next=w,p.lastEffect=d),d}function OU(){return Xr().memoizedState}function YE(d,p,y,w){var P=Ls();sn.flags|=d,P.memoizedState=x0(1|p,{destroy:void 0},y,w===void 0?null:w)}function JE(d,p,y,w){var P=Xr();w=w===void 0?null:w;var L=P.memoizedState.inst;Zn!==null&&w!==null&&q_(w,Zn.memoizedState.deps)?P.memoizedState=x0(p,L,y,w):(sn.flags|=d,P.memoizedState=x0(1|p,L,y,w))}function MU(d,p){YE(8390656,8,d,p)}function tI(d,p){JE(2048,8,d,p)}function Dge(d){sn.flags|=4;var p=sn.updateQueue;if(p===null)p=GE(),sn.updateQueue=p,p.events=[d];else{var y=p.events;y===null?p.events=[d]:y.push(d)}}function DU(d){var p=Xr().memoizedState;return Dge({ref:p,nextImpl:d}),function(){if((Hn&2)!==0)throw Error(r(440));return p.impl.apply(void 0,arguments)}}function LU(d,p){return JE(4,2,d,p)}function jU(d,p){return JE(4,4,d,p)}function BU(d,p){if(typeof p=="function"){d=d();var y=p(d);return function(){typeof y=="function"?y():p(null)}}if(p!=null)return d=d(),p.current=d,function(){p.current=null}}function UU(d,p,y){y=y!=null?y.concat([d]):null,JE(4,4,BU.bind(null,p,d),y)}function nI(){}function FU(d,p){var y=Xr();p=p===void 0?null:p;var w=y.memoizedState;return p!==null&&q_(p,w[1])?w[0]:(y.memoizedState=[d,p],d)}function $U(d,p){var y=Xr();p=p===void 0?null:p;var w=y.memoizedState;if(p!==null&&q_(p,w[1]))return w[0];if(w=d(),Bh){he(!0);try{d()}finally{he(!1)}}return y.memoizedState=[w,p],w}function rI(d,p,y){return y===void 0||(eu&1073741824)!==0&&(Tn&261930)===0?d.memoizedState=p:(d.memoizedState=y,d=zF(),sn.lanes|=d,Yd|=d,y)}function zU(d,p,y,w){return Ao(y,p)?y:m0.current!==null?(d=rI(d,y,w),Ao(d,p)||(ai=!0),d):(eu&42)===0||(eu&1073741824)!==0&&(Tn&261930)===0?(ai=!0,d.memoizedState=y):(d=zF(),sn.lanes|=d,Yd|=d,p)}function HU(d,p,y,w,P){var L=z.p;z.p=L!==0&&8>L?L:8;var ne=D.T,de={};D.T=de,oI(d,!1,p,y);try{var we=P(),Le=D.S;if(Le!==null&&Le(de,we),we!==null&&typeof we=="object"&&typeof we.then=="function"){var qe=Ige(we,w);Dv(d,p,qe,Io(d))}else Dv(d,p,w,Io(d))}catch(Qe){Dv(d,p,{then:function(){},status:"rejected",reason:Qe},Io())}finally{z.p=L,ne!==null&&de.types!==null&&(ne.types=de.types),D.T=ne}}function Lge(){}function iI(d,p,y,w){if(d.tag!==5)throw Error(r(476));var P=VU(d).queue;HU(d,P,p,G,y===null?Lge:function(){return qU(d),y(w)})}function VU(d){var p=d.memoizedState;if(p!==null)return p;p={memoizedState:G,baseState:G,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:tu,lastRenderedState:G},next:null};var y={};return p.next={memoizedState:y,baseState:y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:tu,lastRenderedState:y},next:null},d.memoizedState=p,d=d.alternate,d!==null&&(d.memoizedState=p),p}function qU(d){var p=VU(d);p.next===null&&(p=d.alternate.memoizedState),Dv(d,p.next.queue,{},Io())}function sI(){return qi(Qv)}function GU(){return Xr().memoizedState}function KU(){return Xr().memoizedState}function jge(d){for(var p=d.return;p!==null;){switch(p.tag){case 24:case 3:var y=Io();d=Hd(y);var w=Vd(p,d,y);w!==null&&(so(w,p,y),Iv(w,p,y)),p={cache:M_()},d.payload=p;return}p=p.return}}function Bge(d,p,y){var w=Io();y={lane:w,revertLane:0,gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null},XE(d)?YU(p,y):(y=S_(d,p,y,w),y!==null&&(so(y,d,w),JU(y,p,w)))}function WU(d,p,y){var w=Io();Dv(d,p,y,w)}function Dv(d,p,y,w){var P={lane:w,revertLane:0,gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null};if(XE(d))YU(p,P);else{var L=d.alternate;if(d.lanes===0&&(L===null||L.lanes===0)&&(L=p.lastRenderedReducer,L!==null))try{var ne=p.lastRenderedState,de=L(ne,y);if(P.hasEagerState=!0,P.eagerState=de,Ao(de,ne))return PE(d,p,P,0),sr===null&&IE(),!1}catch{}finally{}if(y=S_(d,p,P,w),y!==null)return so(y,d,w),JU(y,p,w),!0}return!1}function oI(d,p,y,w){if(w={lane:2,revertLane:BI(),gesture:null,action:w,hasEagerState:!1,eagerState:null,next:null},XE(d)){if(p)throw Error(r(479))}else p=S_(d,y,w,2),p!==null&&so(p,d,2)}function XE(d){var p=d.alternate;return d===sn||p!==null&&p===sn}function YU(d,p){g0=VE=!0;var y=d.pending;y===null?p.next=p:(p.next=y.next,y.next=p),d.pending=p}function JU(d,p,y){if((y&4194048)!==0){var w=p.lanes;w&=d.pendingLanes,y|=w,p.lanes=y,ke(d,y)}}var Lv={readContext:qi,use:KE,useCallback:Ur,useContext:Ur,useEffect:Ur,useImperativeHandle:Ur,useLayoutEffect:Ur,useInsertionEffect:Ur,useMemo:Ur,useReducer:Ur,useRef:Ur,useState:Ur,useDebugValue:Ur,useDeferredValue:Ur,useTransition:Ur,useSyncExternalStore:Ur,useId:Ur,useHostTransitionStatus:Ur,useFormState:Ur,useActionState:Ur,useOptimistic:Ur,useMemoCache:Ur,useCacheRefresh:Ur};Lv.useEffectEvent=Ur;var XU={readContext:qi,use:KE,useCallback:function(d,p){return Ls().memoizedState=[d,p===void 0?null:p],d},useContext:qi,useEffect:MU,useImperativeHandle:function(d,p,y){y=y!=null?y.concat([d]):null,YE(4194308,4,BU.bind(null,p,d),y)},useLayoutEffect:function(d,p){return YE(4194308,4,d,p)},useInsertionEffect:function(d,p){YE(4,2,d,p)},useMemo:function(d,p){var y=Ls();p=p===void 0?null:p;var w=d();if(Bh){he(!0);try{d()}finally{he(!1)}}return y.memoizedState=[w,p],w},useReducer:function(d,p,y){var w=Ls();if(y!==void 0){var P=y(p);if(Bh){he(!0);try{y(p)}finally{he(!1)}}}else P=p;return w.memoizedState=w.baseState=P,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:P},w.queue=d,d=d.dispatch=Bge.bind(null,sn,d),[w.memoizedState,d]},useRef:function(d){var p=Ls();return d={current:d},p.memoizedState=d},useState:function(d){d=Z_(d);var p=d.queue,y=WU.bind(null,sn,p);return p.dispatch=y,[d.memoizedState,y]},useDebugValue:nI,useDeferredValue:function(d,p){var y=Ls();return rI(y,d,p)},useTransition:function(){var d=Z_(!1);return d=HU.bind(null,sn,d.queue,!0,!1),Ls().memoizedState=d,[!1,d]},useSyncExternalStore:function(d,p,y){var w=sn,P=Ls();if(Cn){if(y===void 0)throw Error(r(407));y=y()}else{if(y=p(),sr===null)throw Error(r(349));(Tn&127)!==0||xU(w,p,y)}P.memoizedState=y;var L={value:y,getSnapshot:p};return P.queue=L,MU(bU.bind(null,w,L,d),[d]),w.flags|=2048,x0(9,{destroy:void 0},vU.bind(null,w,L,y,p),null),y},useId:function(){var d=Ls(),p=sr.identifierPrefix;if(Cn){var y=Vl,w=Hl;y=(w&~(1<<32-ye(w)-1)).toString(32)+y,p="_"+p+"R_"+y,y=qE++,0<y&&(p+="H"+y.toString(32)),p+="_"}else y=Pge++,p="_"+p+"r_"+y.toString(32)+"_";return d.memoizedState=p},useHostTransitionStatus:sI,useFormState:_U,useActionState:_U,useOptimistic:function(d){var p=Ls();p.memoizedState=p.baseState=d;var y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return p.queue=y,p=oI.bind(null,sn,!0,y),y.dispatch=p,[d,p]},useMemoCache:J_,useCacheRefresh:function(){return Ls().memoizedState=jge.bind(null,sn)},useEffectEvent:function(d){var p=Ls(),y={impl:d};return p.memoizedState=y,function(){if((Hn&2)!==0)throw Error(r(440));return y.impl.apply(void 0,arguments)}}},aI={readContext:qi,use:KE,useCallback:FU,useContext:qi,useEffect:tI,useImperativeHandle:UU,useInsertionEffect:LU,useLayoutEffect:jU,useMemo:$U,useReducer:WE,useRef:OU,useState:function(){return WE(tu)},useDebugValue:nI,useDeferredValue:function(d,p){var y=Xr();return zU(y,Zn.memoizedState,d,p)},useTransition:function(){var d=WE(tu)[0],p=Xr().memoizedState;return[typeof d=="boolean"?d:Mv(d),p]},useSyncExternalStore:yU,useId:GU,useHostTransitionStatus:sI,useFormState:IU,useActionState:IU,useOptimistic:function(d,p){var y=Xr();return SU(y,Zn,d,p)},useMemoCache:J_,useCacheRefresh:KU};aI.useEffectEvent=DU;var QU={readContext:qi,use:KE,useCallback:FU,useContext:qi,useEffect:tI,useImperativeHandle:UU,useInsertionEffect:LU,useLayoutEffect:jU,useMemo:$U,useReducer:Q_,useRef:OU,useState:function(){return Q_(tu)},useDebugValue:nI,useDeferredValue:function(d,p){var y=Xr();return Zn===null?rI(y,d,p):zU(y,Zn.memoizedState,d,p)},useTransition:function(){var d=Q_(tu)[0],p=Xr().memoizedState;return[typeof d=="boolean"?d:Mv(d),p]},useSyncExternalStore:yU,useId:GU,useHostTransitionStatus:sI,useFormState:RU,useActionState:RU,useOptimistic:function(d,p){var y=Xr();return Zn!==null?SU(y,Zn,d,p):(y.baseState=d,[d,y.queue.dispatch])},useMemoCache:J_,useCacheRefresh:KU};QU.useEffectEvent=DU;function lI(d,p,y,w){p=d.memoizedState,y=y(w,p),y=y==null?p:f({},p,y),d.memoizedState=y,d.lanes===0&&(d.updateQueue.baseState=y)}var cI={enqueueSetState:function(d,p,y){d=d._reactInternals;var w=Io(),P=Hd(w);P.payload=p,y!=null&&(P.callback=y),p=Vd(d,P,w),p!==null&&(so(p,d,w),Iv(p,d,w))},enqueueReplaceState:function(d,p,y){d=d._reactInternals;var w=Io(),P=Hd(w);P.tag=1,P.payload=p,y!=null&&(P.callback=y),p=Vd(d,P,w),p!==null&&(so(p,d,w),Iv(p,d,w))},enqueueForceUpdate:function(d,p){d=d._reactInternals;var y=Io(),w=Hd(y);w.tag=2,p!=null&&(w.callback=p),p=Vd(d,w,y),p!==null&&(so(p,d,y),Iv(p,d,y))}};function ZU(d,p,y,w,P,L,ne){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(w,L,ne):p.prototype&&p.prototype.isPureReactComponent?!Ev(y,w)||!Ev(P,L):!0}function eF(d,p,y,w){d=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(y,w),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(y,w),p.state!==d&&cI.enqueueReplaceState(p,p.state,null)}function Uh(d,p){var y=p;if("ref"in p){y={};for(var w in p)w!=="ref"&&(y[w]=p[w])}if(d=d.defaultProps){y===p&&(y=f({},y));for(var P in d)y[P]===void 0&&(y[P]=d[P])}return y}function tF(d){_E(d)}function nF(d){console.error(d)}function rF(d){_E(d)}function QE(d,p){try{var y=d.onUncaughtError;y(p.value,{componentStack:p.stack})}catch(w){setTimeout(function(){throw w})}}function iF(d,p,y){try{var w=d.onCaughtError;w(y.value,{componentStack:y.stack,errorBoundary:p.tag===1?p.stateNode:null})}catch(P){setTimeout(function(){throw P})}}function uI(d,p,y){return y=Hd(y),y.tag=3,y.payload={element:null},y.callback=function(){QE(d,p)},y}function sF(d){return d=Hd(d),d.tag=3,d}function oF(d,p,y,w){var P=y.type.getDerivedStateFromError;if(typeof P=="function"){var L=w.value;d.payload=function(){return P(L)},d.callback=function(){iF(p,y,w)}}var ne=y.stateNode;ne!==null&&typeof ne.componentDidCatch=="function"&&(d.callback=function(){iF(p,y,w),typeof P!="function"&&(Jd===null?Jd=new Set([this]):Jd.add(this));var de=w.stack;this.componentDidCatch(w.value,{componentStack:de!==null?de:""})})}function Uge(d,p,y,w,P){if(y.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){if(p=y.alternate,p!==null&&u0(p,y,P,!0),y=ko.current,y!==null){switch(y.tag){case 31:case 13:return la===null?uS():y.alternate===null&&Fr===0&&(Fr=3),y.flags&=-257,y.flags|=65536,y.lanes=P,w===UE?y.flags|=16384:(p=y.updateQueue,p===null?y.updateQueue=new Set([w]):p.add(w),DI(d,w,P)),!1;case 22:return y.flags|=65536,w===UE?y.flags|=16384:(p=y.updateQueue,p===null?(p={transitions:null,markerInstances:null,retryQueue:new Set([w])},y.updateQueue=p):(y=p.retryQueue,y===null?p.retryQueue=new Set([w]):y.add(w)),DI(d,w,P)),!1}throw Error(r(435,y.tag))}return DI(d,w,P),uS(),!1}if(Cn)return p=ko.current,p!==null?((p.flags&65536)===0&&(p.flags|=256),p.flags|=65536,p.lanes=P,w!==__&&(d=Error(r(422),{cause:w}),Tv(ia(d,y)))):(w!==__&&(p=Error(r(423),{cause:w}),Tv(ia(p,y))),d=d.current.alternate,d.flags|=65536,P&=-P,d.lanes|=P,w=ia(w,y),P=uI(d.stateNode,w,P),F_(d,P),Fr!==4&&(Fr=2)),!1;var L=Error(r(520),{cause:w});if(L=ia(L,y),Vv===null?Vv=[L]:Vv.push(L),Fr!==4&&(Fr=2),p===null)return!0;w=ia(w,y),y=p;do{switch(y.tag){case 3:return y.flags|=65536,d=P&-P,y.lanes|=d,d=uI(y.stateNode,w,d),F_(y,d),!1;case 1:if(p=y.type,L=y.stateNode,(y.flags&128)===0&&(typeof p.getDerivedStateFromError=="function"||L!==null&&typeof L.componentDidCatch=="function"&&(Jd===null||!Jd.has(L))))return y.flags|=65536,P&=-P,y.lanes|=P,P=sF(P),oF(P,d,y,w),F_(y,P),!1}y=y.return}while(y!==null);return!1}var dI=Error(r(461)),ai=!1;function Gi(d,p,y,w){p.child=d===null?uU(p,null,y,w):jh(p,d.child,y,w)}function aF(d,p,y,w,P){y=y.render;var L=p.ref;if("ref"in w){var ne={};for(var de in w)de!=="ref"&&(ne[de]=w[de])}else ne=w;return Oh(p),w=G_(d,p,y,ne,L,P),de=K_(),d!==null&&!ai?(W_(d,p,P),nu(d,p,P)):(Cn&&de&&C_(p),p.flags|=1,Gi(d,p,w,P),p.child)}function lF(d,p,y,w,P){if(d===null){var L=y.type;return typeof L=="function"&&!A_(L)&&L.defaultProps===void 0&&y.compare===null?(p.tag=15,p.type=L,cF(d,p,L,w,P)):(d=OE(y.type,null,w,p,p.mode,P),d.ref=p.ref,d.return=p,p.child=d)}if(L=d.child,!vI(d,P)){var ne=L.memoizedProps;if(y=y.compare,y=y!==null?y:Ev,y(ne,w)&&d.ref===p.ref)return nu(d,p,P)}return p.flags|=1,d=Jc(L,w),d.ref=p.ref,d.return=p,p.child=d}function cF(d,p,y,w,P){if(d!==null){var L=d.memoizedProps;if(Ev(L,w)&&d.ref===p.ref)if(ai=!1,p.pendingProps=w=L,vI(d,P))(d.flags&131072)!==0&&(ai=!0);else return p.lanes=d.lanes,nu(d,p,P)}return fI(d,p,y,w,P)}function uF(d,p,y,w){var P=w.children,L=d!==null?d.memoizedState:null;if(d===null&&p.stateNode===null&&(p.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),w.mode==="hidden"){if((p.flags&128)!==0){if(L=L!==null?L.baseLanes|y:y,d!==null){for(w=p.child=d.child,P=0;w!==null;)P=P|w.lanes|w.childLanes,w=w.sibling;w=P&~L}else w=0,p.child=null;return dF(d,p,L,y,w)}if((y&536870912)!==0)p.memoizedState={baseLanes:0,cachePool:null},d!==null&&jE(p,L!==null?L.cachePool:null),L!==null?hU(p,L):z_(),pU(p);else return w=p.lanes=536870912,dF(d,p,L!==null?L.baseLanes|y:y,y,w)}else L!==null?(jE(p,L.cachePool),hU(p,L),Gd(),p.memoizedState=null):(d!==null&&jE(p,null),z_(),Gd());return Gi(d,p,P,y),p.child}function jv(d,p){return d!==null&&d.tag===22||p.stateNode!==null||(p.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),p.sibling}function dF(d,p,y,w,P){var L=L_();return L=L===null?null:{parent:si._currentValue,pool:L},p.memoizedState={baseLanes:y,cachePool:L},d!==null&&jE(p,null),z_(),pU(p),d!==null&&u0(d,p,w,!0),p.childLanes=P,null}function ZE(d,p){return p=tS({mode:p.mode,children:p.children},d.mode),p.ref=d.ref,d.child=p,p.return=d,p}function fF(d,p,y){return jh(p,d.child,null,y),d=ZE(p,p.pendingProps),d.flags|=2,Co(p),p.memoizedState=null,d}function Fge(d,p,y){var w=p.pendingProps,P=(p.flags&128)!==0;if(p.flags&=-129,d===null){if(Cn){if(w.mode==="hidden")return d=ZE(p,w),p.lanes=536870912,jv(null,d);if(V_(p),(d=vr)?(d=A9(d,aa),d=d!==null&&d.data==="&"?d:null,d!==null&&(p.memoizedState={dehydrated:d,treeContext:Bd!==null?{id:Hl,overflow:Vl}:null,retryLane:536870912,hydrationErrors:null},y=Y7(d),y.return=p,p.child=y,Vi=p,vr=null)):d=null,d===null)throw Fd(p);return p.lanes=536870912,null}return ZE(p,w)}var L=d.memoizedState;if(L!==null){var ne=L.dehydrated;if(V_(p),P)if(p.flags&256)p.flags&=-257,p=fF(d,p,y);else if(p.memoizedState!==null)p.child=d.child,p.flags|=128,p=null;else throw Error(r(558));else if(ai||u0(d,p,y,!1),P=(y&d.childLanes)!==0,ai||P){if(w=sr,w!==null&&(ne=Re(w,y),ne!==0&&ne!==L.retryLane))throw L.retryLane=ne,_h(d,ne),so(w,d,ne),dI;uS(),p=fF(d,p,y)}else d=L.treeContext,vr=ca(ne.nextSibling),Vi=p,Cn=!0,Ud=null,aa=!1,d!==null&&Q7(p,d),p=ZE(p,w),p.flags|=4096;return p}return d=Jc(d.child,{mode:w.mode,children:w.children}),d.ref=p.ref,p.child=d,d.return=p,d}function eS(d,p){var y=p.ref;if(y===null)d!==null&&d.ref!==null&&(p.flags|=4194816);else{if(typeof y!="function"&&typeof y!="object")throw Error(r(284));(d===null||d.ref!==y)&&(p.flags|=4194816)}}function fI(d,p,y,w,P){return Oh(p),y=G_(d,p,y,w,void 0,P),w=K_(),d!==null&&!ai?(W_(d,p,P),nu(d,p,P)):(Cn&&w&&C_(p),p.flags|=1,Gi(d,p,y,P),p.child)}function hF(d,p,y,w,P,L){return Oh(p),p.updateQueue=null,y=gU(p,w,y,P),mU(d),w=K_(),d!==null&&!ai?(W_(d,p,L),nu(d,p,L)):(Cn&&w&&C_(p),p.flags|=1,Gi(d,p,y,L),p.child)}function pF(d,p,y,w,P){if(Oh(p),p.stateNode===null){var L=o0,ne=y.contextType;typeof ne=="object"&&ne!==null&&(L=qi(ne)),L=new y(w,L),p.memoizedState=L.state!==null&&L.state!==void 0?L.state:null,L.updater=cI,p.stateNode=L,L._reactInternals=p,L=p.stateNode,L.props=w,L.state=p.memoizedState,L.refs={},B_(p),ne=y.contextType,L.context=typeof ne=="object"&&ne!==null?qi(ne):o0,L.state=p.memoizedState,ne=y.getDerivedStateFromProps,typeof ne=="function"&&(lI(p,y,ne,w),L.state=p.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof L.getSnapshotBeforeUpdate=="function"||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(ne=L.state,typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount(),ne!==L.state&&cI.enqueueReplaceState(L,L.state,null),Rv(p,w,L,P),Pv(),L.state=p.memoizedState),typeof L.componentDidMount=="function"&&(p.flags|=4194308),w=!0}else if(d===null){L=p.stateNode;var de=p.memoizedProps,we=Uh(y,de);L.props=we;var Le=L.context,qe=y.contextType;ne=o0,typeof qe=="object"&&qe!==null&&(ne=qi(qe));var Qe=y.getDerivedStateFromProps;qe=typeof Qe=="function"||typeof L.getSnapshotBeforeUpdate=="function",de=p.pendingProps!==de,qe||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(de||Le!==ne)&&eF(p,L,w,ne),zd=!1;var Ue=p.memoizedState;L.state=Ue,Rv(p,w,L,P),Pv(),Le=p.memoizedState,de||Ue!==Le||zd?(typeof Qe=="function"&&(lI(p,y,Qe,w),Le=p.memoizedState),(we=zd||ZU(p,y,we,w,Ue,Le,ne))?(qe||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount()),typeof L.componentDidMount=="function"&&(p.flags|=4194308)):(typeof L.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=w,p.memoizedState=Le),L.props=w,L.state=Le,L.context=ne,w=we):(typeof L.componentDidMount=="function"&&(p.flags|=4194308),w=!1)}else{L=p.stateNode,U_(d,p),ne=p.memoizedProps,qe=Uh(y,ne),L.props=qe,Qe=p.pendingProps,Ue=L.context,Le=y.contextType,we=o0,typeof Le=="object"&&Le!==null&&(we=qi(Le)),de=y.getDerivedStateFromProps,(Le=typeof de=="function"||typeof L.getSnapshotBeforeUpdate=="function")||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(ne!==Qe||Ue!==we)&&eF(p,L,w,we),zd=!1,Ue=p.memoizedState,L.state=Ue,Rv(p,w,L,P),Pv();var He=p.memoizedState;ne!==Qe||Ue!==He||zd||d!==null&&d.dependencies!==null&&DE(d.dependencies)?(typeof de=="function"&&(lI(p,y,de,w),He=p.memoizedState),(qe=zd||ZU(p,y,qe,w,Ue,He,we)||d!==null&&d.dependencies!==null&&DE(d.dependencies))?(Le||typeof L.UNSAFE_componentWillUpdate!="function"&&typeof L.componentWillUpdate!="function"||(typeof L.componentWillUpdate=="function"&&L.componentWillUpdate(w,He,we),typeof L.UNSAFE_componentWillUpdate=="function"&&L.UNSAFE_componentWillUpdate(w,He,we)),typeof L.componentDidUpdate=="function"&&(p.flags|=4),typeof L.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof L.componentDidUpdate!="function"||ne===d.memoizedProps&&Ue===d.memoizedState||(p.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||ne===d.memoizedProps&&Ue===d.memoizedState||(p.flags|=1024),p.memoizedProps=w,p.memoizedState=He),L.props=w,L.state=He,L.context=we,w=qe):(typeof L.componentDidUpdate!="function"||ne===d.memoizedProps&&Ue===d.memoizedState||(p.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||ne===d.memoizedProps&&Ue===d.memoizedState||(p.flags|=1024),w=!1)}return L=w,eS(d,p),w=(p.flags&128)!==0,L||w?(L=p.stateNode,y=w&&typeof y.getDerivedStateFromError!="function"?null:L.render(),p.flags|=1,d!==null&&w?(p.child=jh(p,d.child,null,P),p.child=jh(p,null,y,P)):Gi(d,p,y,P),p.memoizedState=L.state,d=p.child):d=nu(d,p,P),d}function mF(d,p,y,w){return Ph(),p.flags|=256,Gi(d,p,y,w),p.child}var hI={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function pI(d){return{baseLanes:d,cachePool:iU()}}function mI(d,p,y){return d=d!==null?d.childLanes&~y:0,p&&(d|=_o),d}function gF(d,p,y){var w=p.pendingProps,P=!1,L=(p.flags&128)!==0,ne;if((ne=L)||(ne=d!==null&&d.memoizedState===null?!1:(Jr.current&2)!==0),ne&&(P=!0,p.flags&=-129),ne=(p.flags&32)!==0,p.flags&=-33,d===null){if(Cn){if(P?qd(p):Gd(),(d=vr)?(d=A9(d,aa),d=d!==null&&d.data!=="&"?d:null,d!==null&&(p.memoizedState={dehydrated:d,treeContext:Bd!==null?{id:Hl,overflow:Vl}:null,retryLane:536870912,hydrationErrors:null},y=Y7(d),y.return=p,p.child=y,Vi=p,vr=null)):d=null,d===null)throw Fd(p);return XI(d)?p.lanes=32:p.lanes=536870912,null}var de=w.children;return w=w.fallback,P?(Gd(),P=p.mode,de=tS({mode:"hidden",children:de},P),w=Ih(w,P,y,null),de.return=p,w.return=p,de.sibling=w,p.child=de,w=p.child,w.memoizedState=pI(y),w.childLanes=mI(d,ne,y),p.memoizedState=hI,jv(null,w)):(qd(p),gI(p,de))}var we=d.memoizedState;if(we!==null&&(de=we.dehydrated,de!==null)){if(L)p.flags&256?(qd(p),p.flags&=-257,p=yI(d,p,y)):p.memoizedState!==null?(Gd(),p.child=d.child,p.flags|=128,p=null):(Gd(),de=w.fallback,P=p.mode,w=tS({mode:"visible",children:w.children},P),de=Ih(de,P,y,null),de.flags|=2,w.return=p,de.return=p,w.sibling=de,p.child=w,jh(p,d.child,null,y),w=p.child,w.memoizedState=pI(y),w.childLanes=mI(d,ne,y),p.memoizedState=hI,p=jv(null,w));else if(qd(p),XI(de)){if(ne=de.nextSibling&&de.nextSibling.dataset,ne)var Le=ne.dgst;ne=Le,w=Error(r(419)),w.stack="",w.digest=ne,Tv({value:w,source:null,stack:null}),p=yI(d,p,y)}else if(ai||u0(d,p,y,!1),ne=(y&d.childLanes)!==0,ai||ne){if(ne=sr,ne!==null&&(w=Re(ne,y),w!==0&&w!==we.retryLane))throw we.retryLane=w,_h(d,w),so(ne,d,w),dI;JI(de)||uS(),p=yI(d,p,y)}else JI(de)?(p.flags|=192,p.child=d.child,p=null):(d=we.treeContext,vr=ca(de.nextSibling),Vi=p,Cn=!0,Ud=null,aa=!1,d!==null&&Q7(p,d),p=gI(p,w.children),p.flags|=4096);return p}return P?(Gd(),de=w.fallback,P=p.mode,we=d.child,Le=we.sibling,w=Jc(we,{mode:"hidden",children:w.children}),w.subtreeFlags=we.subtreeFlags&65011712,Le!==null?de=Jc(Le,de):(de=Ih(de,P,y,null),de.flags|=2),de.return=p,w.return=p,w.sibling=de,p.child=w,jv(null,w),w=p.child,de=d.child.memoizedState,de===null?de=pI(y):(P=de.cachePool,P!==null?(we=si._currentValue,P=P.parent!==we?{parent:we,pool:we}:P):P=iU(),de={baseLanes:de.baseLanes|y,cachePool:P}),w.memoizedState=de,w.childLanes=mI(d,ne,y),p.memoizedState=hI,jv(d.child,w)):(qd(p),y=d.child,d=y.sibling,y=Jc(y,{mode:"visible",children:w.children}),y.return=p,y.sibling=null,d!==null&&(ne=p.deletions,ne===null?(p.deletions=[d],p.flags|=16):ne.push(d)),p.child=y,p.memoizedState=null,y)}function gI(d,p){return p=tS({mode:"visible",children:p},d.mode),p.return=d,d.child=p}function tS(d,p){return d=To(22,d,null,p),d.lanes=0,d}function yI(d,p,y){return jh(p,d.child,null,y),d=gI(p,p.pendingProps.children),d.flags|=2,p.memoizedState=null,d}function yF(d,p,y){d.lanes|=p;var w=d.alternate;w!==null&&(w.lanes|=p),R_(d.return,p,y)}function xI(d,p,y,w,P,L){var ne=d.memoizedState;ne===null?d.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:w,tail:y,tailMode:P,treeForkCount:L}:(ne.isBackwards=p,ne.rendering=null,ne.renderingStartTime=0,ne.last=w,ne.tail=y,ne.tailMode=P,ne.treeForkCount=L)}function xF(d,p,y){var w=p.pendingProps,P=w.revealOrder,L=w.tail;w=w.children;var ne=Jr.current,de=(ne&2)!==0;if(de?(ne=ne&1|2,p.flags|=128):ne&=1,_(Jr,ne),Gi(d,p,w,y),w=Cn?Av:0,!de&&d!==null&&(d.flags&128)!==0)e:for(d=p.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&yF(d,y,p);else if(d.tag===19)yF(d,y,p);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===p)break e;for(;d.sibling===null;){if(d.return===null||d.return===p)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}switch(P){case"forwards":for(y=p.child,P=null;y!==null;)d=y.alternate,d!==null&&HE(d)===null&&(P=y),y=y.sibling;y=P,y===null?(P=p.child,p.child=null):(P=y.sibling,y.sibling=null),xI(p,!1,P,y,L,w);break;case"backwards":case"unstable_legacy-backwards":for(y=null,P=p.child,p.child=null;P!==null;){if(d=P.alternate,d!==null&&HE(d)===null){p.child=P;break}d=P.sibling,P.sibling=y,y=P,P=d}xI(p,!0,y,null,L,w);break;case"together":xI(p,!1,null,null,void 0,w);break;default:p.memoizedState=null}return p.child}function nu(d,p,y){if(d!==null&&(p.dependencies=d.dependencies),Yd|=p.lanes,(y&p.childLanes)===0)if(d!==null){if(u0(d,p,y,!1),(y&p.childLanes)===0)return null}else return null;if(d!==null&&p.child!==d.child)throw Error(r(153));if(p.child!==null){for(d=p.child,y=Jc(d,d.pendingProps),p.child=y,y.return=p;d.sibling!==null;)d=d.sibling,y=y.sibling=Jc(d,d.pendingProps),y.return=p;y.sibling=null}return p.child}function vI(d,p){return(d.lanes&p)!==0?!0:(d=d.dependencies,!!(d!==null&&DE(d)))}function $ge(d,p,y){switch(p.tag){case 3:Ee(p,p.stateNode.containerInfo),$d(p,si,d.memoizedState.cache),Ph();break;case 27:case 5:me(p);break;case 4:Ee(p,p.stateNode.containerInfo);break;case 10:$d(p,p.type,p.memoizedProps.value);break;case 31:if(p.memoizedState!==null)return p.flags|=128,V_(p),null;break;case 13:var w=p.memoizedState;if(w!==null)return w.dehydrated!==null?(qd(p),p.flags|=128,null):(y&p.child.childLanes)!==0?gF(d,p,y):(qd(p),d=nu(d,p,y),d!==null?d.sibling:null);qd(p);break;case 19:var P=(d.flags&128)!==0;if(w=(y&p.childLanes)!==0,w||(u0(d,p,y,!1),w=(y&p.childLanes)!==0),P){if(w)return xF(d,p,y);p.flags|=128}if(P=p.memoizedState,P!==null&&(P.rendering=null,P.tail=null,P.lastEffect=null),_(Jr,Jr.current),w)break;return null;case 22:return p.lanes=0,uF(d,p,y,p.pendingProps);case 24:$d(p,si,d.memoizedState.cache)}return nu(d,p,y)}function vF(d,p,y){if(d!==null)if(d.memoizedProps!==p.pendingProps)ai=!0;else{if(!vI(d,y)&&(p.flags&128)===0)return ai=!1,$ge(d,p,y);ai=(d.flags&131072)!==0}else ai=!1,Cn&&(p.flags&1048576)!==0&&X7(p,Av,p.index);switch(p.lanes=0,p.tag){case 16:e:{var w=p.pendingProps;if(d=Dh(p.elementType),p.type=d,typeof d=="function")A_(d)?(w=Uh(d,w),p.tag=1,p=pF(null,p,d,w,y)):(p.tag=0,p=fI(null,p,d,w,y));else{if(d!=null){var P=d.$$typeof;if(P===O){p.tag=11,p=aF(null,p,d,w,y);break e}else if(P===$){p.tag=14,p=lF(null,p,d,w,y);break e}}throw p=A(d)||d,Error(r(306,p,""))}}return p;case 0:return fI(d,p,p.type,p.pendingProps,y);case 1:return w=p.type,P=Uh(w,p.pendingProps),pF(d,p,w,P,y);case 3:e:{if(Ee(p,p.stateNode.containerInfo),d===null)throw Error(r(387));w=p.pendingProps;var L=p.memoizedState;P=L.element,U_(d,p),Rv(p,w,null,y);var ne=p.memoizedState;if(w=ne.cache,$d(p,si,w),w!==L.cache&&O_(p,[si],y,!0),Pv(),w=ne.element,L.isDehydrated)if(L={element:w,isDehydrated:!1,cache:ne.cache},p.updateQueue.baseState=L,p.memoizedState=L,p.flags&256){p=mF(d,p,w,y);break e}else if(w!==P){P=ia(Error(r(424)),p),Tv(P),p=mF(d,p,w,y);break e}else{switch(d=p.stateNode.containerInfo,d.nodeType){case 9:d=d.body;break;default:d=d.nodeName==="HTML"?d.ownerDocument.body:d}for(vr=ca(d.firstChild),Vi=p,Cn=!0,Ud=null,aa=!0,y=uU(p,null,w,y),p.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling}else{if(Ph(),w===P){p=nu(d,p,y);break e}Gi(d,p,w,y)}p=p.child}return p;case 26:return eS(d,p),d===null?(y=I9(p.type,null,p.pendingProps,null))?p.memoizedState=y:Cn||(y=p.type,d=p.pendingProps,w=yS(re.current).createElement(y),w[yt]=p,w[vn]=d,Ki(w,y,d),xr(w),p.stateNode=w):p.memoizedState=I9(p.type,d.memoizedProps,p.pendingProps,d.memoizedState),null;case 27:return me(p),d===null&&Cn&&(w=p.stateNode=C9(p.type,p.pendingProps,re.current),Vi=p,aa=!0,P=vr,ef(p.type)?(QI=P,vr=ca(w.firstChild)):vr=P),Gi(d,p,p.pendingProps.children,y),eS(d,p),d===null&&(p.flags|=4194304),p.child;case 5:return d===null&&Cn&&((P=w=vr)&&(w=yye(w,p.type,p.pendingProps,aa),w!==null?(p.stateNode=w,Vi=p,vr=ca(w.firstChild),aa=!1,P=!0):P=!1),P||Fd(p)),me(p),P=p.type,L=p.pendingProps,ne=d!==null?d.memoizedProps:null,w=L.children,KI(P,L)?w=null:ne!==null&&KI(P,ne)&&(p.flags|=32),p.memoizedState!==null&&(P=G_(d,p,Rge,null,null,y),Qv._currentValue=P),eS(d,p),Gi(d,p,w,y),p.child;case 6:return d===null&&Cn&&((d=y=vr)&&(y=xye(y,p.pendingProps,aa),y!==null?(p.stateNode=y,Vi=p,vr=null,d=!0):d=!1),d||Fd(p)),null;case 13:return gF(d,p,y);case 4:return Ee(p,p.stateNode.containerInfo),w=p.pendingProps,d===null?p.child=jh(p,null,w,y):Gi(d,p,w,y),p.child;case 11:return aF(d,p,p.type,p.pendingProps,y);case 7:return Gi(d,p,p.pendingProps,y),p.child;case 8:return Gi(d,p,p.pendingProps.children,y),p.child;case 12:return Gi(d,p,p.pendingProps.children,y),p.child;case 10:return w=p.pendingProps,$d(p,p.type,w.value),Gi(d,p,w.children,y),p.child;case 9:return P=p.type._context,w=p.pendingProps.children,Oh(p),P=qi(P),w=w(P),p.flags|=1,Gi(d,p,w,y),p.child;case 14:return lF(d,p,p.type,p.pendingProps,y);case 15:return cF(d,p,p.type,p.pendingProps,y);case 19:return xF(d,p,y);case 31:return Fge(d,p,y);case 22:return uF(d,p,y,p.pendingProps);case 24:return Oh(p),w=qi(si),d===null?(P=L_(),P===null&&(P=sr,L=M_(),P.pooledCache=L,L.refCount++,L!==null&&(P.pooledCacheLanes|=y),P=L),p.memoizedState={parent:w,cache:P},B_(p),$d(p,si,P)):((d.lanes&y)!==0&&(U_(d,p),Rv(p,null,null,y),Pv()),P=d.memoizedState,L=p.memoizedState,P.parent!==w?(P={parent:w,cache:w},p.memoizedState=P,p.lanes===0&&(p.memoizedState=p.updateQueue.baseState=P),$d(p,si,w)):(w=L.cache,$d(p,si,w),w!==P.cache&&O_(p,[si],y,!0))),Gi(d,p,p.pendingProps.children,y),p.child;case 29:throw p.pendingProps}throw Error(r(156,p.tag))}function ru(d){d.flags|=4}function bI(d,p,y,w,P){if((p=(d.mode&32)!==0)&&(p=!1),p){if(d.flags|=16777216,(P&335544128)===P)if(d.stateNode.complete)d.flags|=8192;else if(GF())d.flags|=8192;else throw Lh=UE,j_}else d.flags&=-16777217}function bF(d,p){if(p.type!=="stylesheet"||(p.state.loading&4)!==0)d.flags&=-16777217;else if(d.flags|=16777216,!D9(p))if(GF())d.flags|=8192;else throw Lh=UE,j_}function nS(d,p){p!==null&&(d.flags|=4),d.flags&16384&&(p=d.tag!==22?zn():536870912,d.lanes|=p,E0|=p)}function Bv(d,p){if(!Cn)switch(d.tailMode){case"hidden":p=d.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?d.tail=null:y.sibling=null;break;case"collapsed":y=d.tail;for(var w=null;y!==null;)y.alternate!==null&&(w=y),y=y.sibling;w===null?p||d.tail===null?d.tail=null:d.tail.sibling=null:w.sibling=null}}function br(d){var p=d.alternate!==null&&d.alternate.child===d.child,y=0,w=0;if(p)for(var P=d.child;P!==null;)y|=P.lanes|P.childLanes,w|=P.subtreeFlags&65011712,w|=P.flags&65011712,P.return=d,P=P.sibling;else for(P=d.child;P!==null;)y|=P.lanes|P.childLanes,w|=P.subtreeFlags,w|=P.flags,P.return=d,P=P.sibling;return d.subtreeFlags|=w,d.childLanes=y,p}function zge(d,p,y){var w=p.pendingProps;switch(N_(p),p.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return br(p),null;case 1:return br(p),null;case 3:return y=p.stateNode,w=null,d!==null&&(w=d.memoizedState.cache),p.memoizedState.cache!==w&&(p.flags|=2048),Zc(si),ce(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(d===null||d.child===null)&&(c0(p)?ru(p):d===null||d.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,I_())),br(p),null;case 26:var P=p.type,L=p.memoizedState;return d===null?(ru(p),L!==null?(br(p),bF(p,L)):(br(p),bI(p,P,null,w,y))):L?L!==d.memoizedState?(ru(p),br(p),bF(p,L)):(br(p),p.flags&=-16777217):(d=d.memoizedProps,d!==w&&ru(p),br(p),bI(p,P,d,w,y)),null;case 27:if(ue(p),y=re.current,P=p.type,d!==null&&p.stateNode!=null)d.memoizedProps!==w&&ru(p);else{if(!w){if(p.stateNode===null)throw Error(r(166));return br(p),null}d=Y.current,c0(p)?Z7(p):(d=C9(P,w,y),p.stateNode=d,ru(p))}return br(p),null;case 5:if(ue(p),P=p.type,d!==null&&p.stateNode!=null)d.memoizedProps!==w&&ru(p);else{if(!w){if(p.stateNode===null)throw Error(r(166));return br(p),null}if(L=Y.current,c0(p))Z7(p);else{var ne=yS(re.current);switch(L){case 1:L=ne.createElementNS("http://www.w3.org/2000/svg",P);break;case 2:L=ne.createElementNS("http://www.w3.org/1998/Math/MathML",P);break;default:switch(P){case"svg":L=ne.createElementNS("http://www.w3.org/2000/svg",P);break;case"math":L=ne.createElementNS("http://www.w3.org/1998/Math/MathML",P);break;case"script":L=ne.createElement("div"),L.innerHTML="<script><\/script>",L=L.removeChild(L.firstChild);break;case"select":L=typeof w.is=="string"?ne.createElement("select",{is:w.is}):ne.createElement("select"),w.multiple?L.multiple=!0:w.size&&(L.size=w.size);break;default:L=typeof w.is=="string"?ne.createElement(P,{is:w.is}):ne.createElement(P)}}L[yt]=p,L[vn]=w;e:for(ne=p.child;ne!==null;){if(ne.tag===5||ne.tag===6)L.appendChild(ne.stateNode);else if(ne.tag!==4&&ne.tag!==27&&ne.child!==null){ne.child.return=ne,ne=ne.child;continue}if(ne===p)break e;for(;ne.sibling===null;){if(ne.return===null||ne.return===p)break e;ne=ne.return}ne.sibling.return=ne.return,ne=ne.sibling}p.stateNode=L;e:switch(Ki(L,P,w),P){case"button":case"input":case"select":case"textarea":w=!!w.autoFocus;break e;case"img":w=!0;break e;default:w=!1}w&&ru(p)}}return br(p),bI(p,p.type,d===null?null:d.memoizedProps,p.pendingProps,y),null;case 6:if(d&&p.stateNode!=null)d.memoizedProps!==w&&ru(p);else{if(typeof w!="string"&&p.stateNode===null)throw Error(r(166));if(d=re.current,c0(p)){if(d=p.stateNode,y=p.memoizedProps,w=null,P=Vi,P!==null)switch(P.tag){case 27:case 5:w=P.memoizedProps}d[yt]=p,d=!!(d.nodeValue===y||w!==null&&w.suppressHydrationWarning===!0||g9(d.nodeValue,y)),d||Fd(p,!0)}else d=yS(d).createTextNode(w),d[yt]=p,p.stateNode=d}return br(p),null;case 31:if(y=p.memoizedState,d===null||d.memoizedState!==null){if(w=c0(p),y!==null){if(d===null){if(!w)throw Error(r(318));if(d=p.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(557));d[yt]=p}else Ph(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;br(p),d=!1}else y=I_(),d!==null&&d.memoizedState!==null&&(d.memoizedState.hydrationErrors=y),d=!0;if(!d)return p.flags&256?(Co(p),p):(Co(p),null);if((p.flags&128)!==0)throw Error(r(558))}return br(p),null;case 13:if(w=p.memoizedState,d===null||d.memoizedState!==null&&d.memoizedState.dehydrated!==null){if(P=c0(p),w!==null&&w.dehydrated!==null){if(d===null){if(!P)throw Error(r(318));if(P=p.memoizedState,P=P!==null?P.dehydrated:null,!P)throw Error(r(317));P[yt]=p}else Ph(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;br(p),P=!1}else P=I_(),d!==null&&d.memoizedState!==null&&(d.memoizedState.hydrationErrors=P),P=!0;if(!P)return p.flags&256?(Co(p),p):(Co(p),null)}return Co(p),(p.flags&128)!==0?(p.lanes=y,p):(y=w!==null,d=d!==null&&d.memoizedState!==null,y&&(w=p.child,P=null,w.alternate!==null&&w.alternate.memoizedState!==null&&w.alternate.memoizedState.cachePool!==null&&(P=w.alternate.memoizedState.cachePool.pool),L=null,w.memoizedState!==null&&w.memoizedState.cachePool!==null&&(L=w.memoizedState.cachePool.pool),L!==P&&(w.flags|=2048)),y!==d&&y&&(p.child.flags|=8192),nS(p,p.updateQueue),br(p),null);case 4:return ce(),d===null&&zI(p.stateNode.containerInfo),br(p),null;case 10:return Zc(p.type),br(p),null;case 19:if(M(Jr),w=p.memoizedState,w===null)return br(p),null;if(P=(p.flags&128)!==0,L=w.rendering,L===null)if(P)Bv(w,!1);else{if(Fr!==0||d!==null&&(d.flags&128)!==0)for(d=p.child;d!==null;){if(L=HE(d),L!==null){for(p.flags|=128,Bv(w,!1),d=L.updateQueue,p.updateQueue=d,nS(p,d),p.subtreeFlags=0,d=y,y=p.child;y!==null;)W7(y,d),y=y.sibling;return _(Jr,Jr.current&1|2),Cn&&Xc(p,w.treeForkCount),p.child}d=d.sibling}w.tail!==null&&Tt()>aS&&(p.flags|=128,P=!0,Bv(w,!1),p.lanes=4194304)}else{if(!P)if(d=HE(L),d!==null){if(p.flags|=128,P=!0,d=d.updateQueue,p.updateQueue=d,nS(p,d),Bv(w,!0),w.tail===null&&w.tailMode==="hidden"&&!L.alternate&&!Cn)return br(p),null}else 2*Tt()-w.renderingStartTime>aS&&y!==536870912&&(p.flags|=128,P=!0,Bv(w,!1),p.lanes=4194304);w.isBackwards?(L.sibling=p.child,p.child=L):(d=w.last,d!==null?d.sibling=L:p.child=L,w.last=L)}return w.tail!==null?(d=w.tail,w.rendering=d,w.tail=d.sibling,w.renderingStartTime=Tt(),d.sibling=null,y=Jr.current,_(Jr,P?y&1|2:y&1),Cn&&Xc(p,w.treeForkCount),d):(br(p),null);case 22:case 23:return Co(p),H_(),w=p.memoizedState!==null,d!==null?d.memoizedState!==null!==w&&(p.flags|=8192):w&&(p.flags|=8192),w?(y&536870912)!==0&&(p.flags&128)===0&&(br(p),p.subtreeFlags&6&&(p.flags|=8192)):br(p),y=p.updateQueue,y!==null&&nS(p,y.retryQueue),y=null,d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(y=d.memoizedState.cachePool.pool),w=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(w=p.memoizedState.cachePool.pool),w!==y&&(p.flags|=2048),d!==null&&M(Mh),null;case 24:return y=null,d!==null&&(y=d.memoizedState.cache),p.memoizedState.cache!==y&&(p.flags|=2048),Zc(si),br(p),null;case 25:return null;case 30:return null}throw Error(r(156,p.tag))}function Hge(d,p){switch(N_(p),p.tag){case 1:return d=p.flags,d&65536?(p.flags=d&-65537|128,p):null;case 3:return Zc(si),ce(),d=p.flags,(d&65536)!==0&&(d&128)===0?(p.flags=d&-65537|128,p):null;case 26:case 27:case 5:return ue(p),null;case 31:if(p.memoizedState!==null){if(Co(p),p.alternate===null)throw Error(r(340));Ph()}return d=p.flags,d&65536?(p.flags=d&-65537|128,p):null;case 13:if(Co(p),d=p.memoizedState,d!==null&&d.dehydrated!==null){if(p.alternate===null)throw Error(r(340));Ph()}return d=p.flags,d&65536?(p.flags=d&-65537|128,p):null;case 19:return M(Jr),null;case 4:return ce(),null;case 10:return Zc(p.type),null;case 22:case 23:return Co(p),H_(),d!==null&&M(Mh),d=p.flags,d&65536?(p.flags=d&-65537|128,p):null;case 24:return Zc(si),null;case 25:return null;default:return null}}function wF(d,p){switch(N_(p),p.tag){case 3:Zc(si),ce();break;case 26:case 27:case 5:ue(p);break;case 4:ce();break;case 31:p.memoizedState!==null&&Co(p);break;case 13:Co(p);break;case 19:M(Jr);break;case 10:Zc(p.type);break;case 22:case 23:Co(p),H_(),d!==null&&M(Mh);break;case 24:Zc(si)}}function Uv(d,p){try{var y=p.updateQueue,w=y!==null?y.lastEffect:null;if(w!==null){var P=w.next;y=P;do{if((y.tag&d)===d){w=void 0;var L=y.create,ne=y.inst;w=L(),ne.destroy=w}y=y.next}while(y!==P)}}catch(de){Jn(p,p.return,de)}}function Kd(d,p,y){try{var w=p.updateQueue,P=w!==null?w.lastEffect:null;if(P!==null){var L=P.next;w=L;do{if((w.tag&d)===d){var ne=w.inst,de=ne.destroy;if(de!==void 0){ne.destroy=void 0,P=p;var we=y,Le=de;try{Le()}catch(qe){Jn(P,we,qe)}}}w=w.next}while(w!==L)}}catch(qe){Jn(p,p.return,qe)}}function EF(d){var p=d.updateQueue;if(p!==null){var y=d.stateNode;try{fU(p,y)}catch(w){Jn(d,d.return,w)}}}function SF(d,p,y){y.props=Uh(d.type,d.memoizedProps),y.state=d.memoizedState;try{y.componentWillUnmount()}catch(w){Jn(d,p,w)}}function Fv(d,p){try{var y=d.ref;if(y!==null){switch(d.tag){case 26:case 27:case 5:var w=d.stateNode;break;case 30:w=d.stateNode;break;default:w=d.stateNode}typeof y=="function"?d.refCleanup=y(w):y.current=w}}catch(P){Jn(d,p,P)}}function ql(d,p){var y=d.ref,w=d.refCleanup;if(y!==null)if(typeof w=="function")try{w()}catch(P){Jn(d,p,P)}finally{d.refCleanup=null,d=d.alternate,d!=null&&(d.refCleanup=null)}else if(typeof y=="function")try{y(null)}catch(P){Jn(d,p,P)}else y.current=null}function AF(d){var p=d.type,y=d.memoizedProps,w=d.stateNode;try{e:switch(p){case"button":case"input":case"select":case"textarea":y.autoFocus&&w.focus();break e;case"img":y.src?w.src=y.src:y.srcSet&&(w.srcset=y.srcSet)}}catch(P){Jn(d,d.return,P)}}function wI(d,p,y){try{var w=d.stateNode;dye(w,d.type,y,p),w[vn]=p}catch(P){Jn(d,d.return,P)}}function TF(d){return d.tag===5||d.tag===3||d.tag===26||d.tag===27&&ef(d.type)||d.tag===4}function EI(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||TF(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.tag===27&&ef(d.type)||d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function SI(d,p,y){var w=d.tag;if(w===5||w===6)d=d.stateNode,p?(y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y).insertBefore(d,p):(p=y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y,p.appendChild(d),y=y._reactRootContainer,y!=null||p.onclick!==null||(p.onclick=Wc));else if(w!==4&&(w===27&&ef(d.type)&&(y=d.stateNode,p=null),d=d.child,d!==null))for(SI(d,p,y),d=d.sibling;d!==null;)SI(d,p,y),d=d.sibling}function rS(d,p,y){var w=d.tag;if(w===5||w===6)d=d.stateNode,p?y.insertBefore(d,p):y.appendChild(d);else if(w!==4&&(w===27&&ef(d.type)&&(y=d.stateNode),d=d.child,d!==null))for(rS(d,p,y),d=d.sibling;d!==null;)rS(d,p,y),d=d.sibling}function kF(d){var p=d.stateNode,y=d.memoizedProps;try{for(var w=d.type,P=p.attributes;P.length;)p.removeAttributeNode(P[0]);Ki(p,w,y),p[yt]=d,p[vn]=y}catch(L){Jn(d,d.return,L)}}var iu=!1,li=!1,AI=!1,CF=typeof WeakSet=="function"?WeakSet:Set,Ni=null;function Vge(d,p){if(d=d.containerInfo,qI=AS,d=U7(d),y_(d)){if("selectionStart"in d)var y={start:d.selectionStart,end:d.selectionEnd};else e:{y=(y=d.ownerDocument)&&y.defaultView||window;var w=y.getSelection&&y.getSelection();if(w&&w.rangeCount!==0){y=w.anchorNode;var P=w.anchorOffset,L=w.focusNode;w=w.focusOffset;try{y.nodeType,L.nodeType}catch{y=null;break e}var ne=0,de=-1,we=-1,Le=0,qe=0,Qe=d,Ue=null;t:for(;;){for(var He;Qe!==y||P!==0&&Qe.nodeType!==3||(de=ne+P),Qe!==L||w!==0&&Qe.nodeType!==3||(we=ne+w),Qe.nodeType===3&&(ne+=Qe.nodeValue.length),(He=Qe.firstChild)!==null;)Ue=Qe,Qe=He;for(;;){if(Qe===d)break t;if(Ue===y&&++Le===P&&(de=ne),Ue===L&&++qe===w&&(we=ne),(He=Qe.nextSibling)!==null)break;Qe=Ue,Ue=Qe.parentNode}Qe=He}y=de===-1||we===-1?null:{start:de,end:we}}else y=null}y=y||{start:0,end:0}}else y=null;for(GI={focusedElem:d,selectionRange:y},AS=!1,Ni=p;Ni!==null;)if(p=Ni,d=p.child,(p.subtreeFlags&1028)!==0&&d!==null)d.return=p,Ni=d;else for(;Ni!==null;){switch(p=Ni,L=p.alternate,d=p.flags,p.tag){case 0:if((d&4)!==0&&(d=p.updateQueue,d=d!==null?d.events:null,d!==null))for(y=0;y<d.length;y++)P=d[y],P.ref.impl=P.nextImpl;break;case 11:case 15:break;case 1:if((d&1024)!==0&&L!==null){d=void 0,y=p,P=L.memoizedProps,L=L.memoizedState,w=y.stateNode;try{var Nt=Uh(y.type,P);d=w.getSnapshotBeforeUpdate(Nt,L),w.__reactInternalSnapshotBeforeUpdate=d}catch(Kt){Jn(y,y.return,Kt)}}break;case 3:if((d&1024)!==0){if(d=p.stateNode.containerInfo,y=d.nodeType,y===9)YI(d);else if(y===1)switch(d.nodeName){case"HEAD":case"HTML":case"BODY":YI(d);break;default:d.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((d&1024)!==0)throw Error(r(163))}if(d=p.sibling,d!==null){d.return=p.return,Ni=d;break}Ni=p.return}}function NF(d,p,y){var w=y.flags;switch(y.tag){case 0:case 11:case 15:ou(d,y),w&4&&Uv(5,y);break;case 1:if(ou(d,y),w&4)if(d=y.stateNode,p===null)try{d.componentDidMount()}catch(ne){Jn(y,y.return,ne)}else{var P=Uh(y.type,p.memoizedProps);p=p.memoizedState;try{d.componentDidUpdate(P,p,d.__reactInternalSnapshotBeforeUpdate)}catch(ne){Jn(y,y.return,ne)}}w&64&&EF(y),w&512&&Fv(y,y.return);break;case 3:if(ou(d,y),w&64&&(d=y.updateQueue,d!==null)){if(p=null,y.child!==null)switch(y.child.tag){case 27:case 5:p=y.child.stateNode;break;case 1:p=y.child.stateNode}try{fU(d,p)}catch(ne){Jn(y,y.return,ne)}}break;case 27:p===null&&w&4&&kF(y);case 26:case 5:ou(d,y),p===null&&w&4&&AF(y),w&512&&Fv(y,y.return);break;case 12:ou(d,y);break;case 31:ou(d,y),w&4&&PF(d,y);break;case 13:ou(d,y),w&4&&RF(d,y),w&64&&(d=y.memoizedState,d!==null&&(d=d.dehydrated,d!==null&&(y=Zge.bind(null,y),vye(d,y))));break;case 22:if(w=y.memoizedState!==null||iu,!w){p=p!==null&&p.memoizedState!==null||li,P=iu;var L=li;iu=w,(li=p)&&!L?au(d,y,(y.subtreeFlags&8772)!==0):ou(d,y),iu=P,li=L}break;case 30:break;default:ou(d,y)}}function _F(d){var p=d.alternate;p!==null&&(d.alternate=null,_F(p)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(p=d.stateNode,p!==null&&zl(p)),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}var Ar=null,to=!1;function su(d,p,y){for(y=y.child;y!==null;)IF(d,p,y),y=y.sibling}function IF(d,p,y){if(be&&typeof be.onCommitFiberUnmount=="function")try{be.onCommitFiberUnmount(fe,y)}catch{}switch(y.tag){case 26:li||ql(y,p),su(d,p,y),y.memoizedState?y.memoizedState.count--:y.stateNode&&(y=y.stateNode,y.parentNode.removeChild(y));break;case 27:li||ql(y,p);var w=Ar,P=to;ef(y.type)&&(Ar=y.stateNode,to=!1),su(d,p,y),Yv(y.stateNode),Ar=w,to=P;break;case 5:li||ql(y,p);case 6:if(w=Ar,P=to,Ar=null,su(d,p,y),Ar=w,to=P,Ar!==null)if(to)try{(Ar.nodeType===9?Ar.body:Ar.nodeName==="HTML"?Ar.ownerDocument.body:Ar).removeChild(y.stateNode)}catch(L){Jn(y,p,L)}else try{Ar.removeChild(y.stateNode)}catch(L){Jn(y,p,L)}break;case 18:Ar!==null&&(to?(d=Ar,E9(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,y.stateNode),I0(d)):E9(Ar,y.stateNode));break;case 4:w=Ar,P=to,Ar=y.stateNode.containerInfo,to=!0,su(d,p,y),Ar=w,to=P;break;case 0:case 11:case 14:case 15:Kd(2,y,p),li||Kd(4,y,p),su(d,p,y);break;case 1:li||(ql(y,p),w=y.stateNode,typeof w.componentWillUnmount=="function"&&SF(y,p,w)),su(d,p,y);break;case 21:su(d,p,y);break;case 22:li=(w=li)||y.memoizedState!==null,su(d,p,y),li=w;break;default:su(d,p,y)}}function PF(d,p){if(p.memoizedState===null&&(d=p.alternate,d!==null&&(d=d.memoizedState,d!==null))){d=d.dehydrated;try{I0(d)}catch(y){Jn(p,p.return,y)}}}function RF(d,p){if(p.memoizedState===null&&(d=p.alternate,d!==null&&(d=d.memoizedState,d!==null&&(d=d.dehydrated,d!==null))))try{I0(d)}catch(y){Jn(p,p.return,y)}}function qge(d){switch(d.tag){case 31:case 13:case 19:var p=d.stateNode;return p===null&&(p=d.stateNode=new CF),p;case 22:return d=d.stateNode,p=d._retryCache,p===null&&(p=d._retryCache=new CF),p;default:throw Error(r(435,d.tag))}}function iS(d,p){var y=qge(d);p.forEach(function(w){if(!y.has(w)){y.add(w);var P=eye.bind(null,d,w);w.then(P,P)}})}function no(d,p){var y=p.deletions;if(y!==null)for(var w=0;w<y.length;w++){var P=y[w],L=d,ne=p,de=ne;e:for(;de!==null;){switch(de.tag){case 27:if(ef(de.type)){Ar=de.stateNode,to=!1;break e}break;case 5:Ar=de.stateNode,to=!1;break e;case 3:case 4:Ar=de.stateNode.containerInfo,to=!0;break e}de=de.return}if(Ar===null)throw Error(r(160));IF(L,ne,P),Ar=null,to=!1,L=P.alternate,L!==null&&(L.return=null),P.return=null}if(p.subtreeFlags&13886)for(p=p.child;p!==null;)OF(p,d),p=p.sibling}var Xa=null;function OF(d,p){var y=d.alternate,w=d.flags;switch(d.tag){case 0:case 11:case 14:case 15:no(p,d),ro(d),w&4&&(Kd(3,d,d.return),Uv(3,d),Kd(5,d,d.return));break;case 1:no(p,d),ro(d),w&512&&(li||y===null||ql(y,y.return)),w&64&&iu&&(d=d.updateQueue,d!==null&&(w=d.callbacks,w!==null&&(y=d.shared.hiddenCallbacks,d.shared.hiddenCallbacks=y===null?w:y.concat(w))));break;case 26:var P=Xa;if(no(p,d),ro(d),w&512&&(li||y===null||ql(y,y.return)),w&4){var L=y!==null?y.memoizedState:null;if(w=d.memoizedState,y===null)if(w===null)if(d.stateNode===null){e:{w=d.type,y=d.memoizedProps,P=P.ownerDocument||P;t:switch(w){case"title":L=P.getElementsByTagName("title")[0],(!L||L[Zo]||L[yt]||L.namespaceURI==="http://www.w3.org/2000/svg"||L.hasAttribute("itemprop"))&&(L=P.createElement(w),P.head.insertBefore(L,P.querySelector("head > title"))),Ki(L,w,y),L[yt]=d,xr(L),w=L;break e;case"link":var ne=O9("link","href",P).get(w+(y.href||""));if(ne){for(var de=0;de<ne.length;de++)if(L=ne[de],L.getAttribute("href")===(y.href==null||y.href===""?null:y.href)&&L.getAttribute("rel")===(y.rel==null?null:y.rel)&&L.getAttribute("title")===(y.title==null?null:y.title)&&L.getAttribute("crossorigin")===(y.crossOrigin==null?null:y.crossOrigin)){ne.splice(de,1);break t}}L=P.createElement(w),Ki(L,w,y),P.head.appendChild(L);break;case"meta":if(ne=O9("meta","content",P).get(w+(y.content||""))){for(de=0;de<ne.length;de++)if(L=ne[de],L.getAttribute("content")===(y.content==null?null:""+y.content)&&L.getAttribute("name")===(y.name==null?null:y.name)&&L.getAttribute("property")===(y.property==null?null:y.property)&&L.getAttribute("http-equiv")===(y.httpEquiv==null?null:y.httpEquiv)&&L.getAttribute("charset")===(y.charSet==null?null:y.charSet)){ne.splice(de,1);break t}}L=P.createElement(w),Ki(L,w,y),P.head.appendChild(L);break;default:throw Error(r(468,w))}L[yt]=d,xr(L),w=L}d.stateNode=w}else M9(P,d.type,d.stateNode);else d.stateNode=R9(P,w,d.memoizedProps);else L!==w?(L===null?y.stateNode!==null&&(y=y.stateNode,y.parentNode.removeChild(y)):L.count--,w===null?M9(P,d.type,d.stateNode):R9(P,w,d.memoizedProps)):w===null&&d.stateNode!==null&&wI(d,d.memoizedProps,y.memoizedProps)}break;case 27:no(p,d),ro(d),w&512&&(li||y===null||ql(y,y.return)),y!==null&&w&4&&wI(d,d.memoizedProps,y.memoizedProps);break;case 5:if(no(p,d),ro(d),w&512&&(li||y===null||ql(y,y.return)),d.flags&32){P=d.stateNode;try{Zm(P,"")}catch(Nt){Jn(d,d.return,Nt)}}w&4&&d.stateNode!=null&&(P=d.memoizedProps,wI(d,P,y!==null?y.memoizedProps:P)),w&1024&&(AI=!0);break;case 6:if(no(p,d),ro(d),w&4){if(d.stateNode===null)throw Error(r(162));w=d.memoizedProps,y=d.stateNode;try{y.nodeValue=w}catch(Nt){Jn(d,d.return,Nt)}}break;case 3:if(bS=null,P=Xa,Xa=xS(p.containerInfo),no(p,d),Xa=P,ro(d),w&4&&y!==null&&y.memoizedState.isDehydrated)try{I0(p.containerInfo)}catch(Nt){Jn(d,d.return,Nt)}AI&&(AI=!1,MF(d));break;case 4:w=Xa,Xa=xS(d.stateNode.containerInfo),no(p,d),ro(d),Xa=w;break;case 12:no(p,d),ro(d);break;case 31:no(p,d),ro(d),w&4&&(w=d.updateQueue,w!==null&&(d.updateQueue=null,iS(d,w)));break;case 13:no(p,d),ro(d),d.child.flags&8192&&d.memoizedState!==null!=(y!==null&&y.memoizedState!==null)&&(oS=Tt()),w&4&&(w=d.updateQueue,w!==null&&(d.updateQueue=null,iS(d,w)));break;case 22:P=d.memoizedState!==null;var we=y!==null&&y.memoizedState!==null,Le=iu,qe=li;if(iu=Le||P,li=qe||we,no(p,d),li=qe,iu=Le,ro(d),w&8192)e:for(p=d.stateNode,p._visibility=P?p._visibility&-2:p._visibility|1,P&&(y===null||we||iu||li||Fh(d)),y=null,p=d;;){if(p.tag===5||p.tag===26){if(y===null){we=y=p;try{if(L=we.stateNode,P)ne=L.style,typeof ne.setProperty=="function"?ne.setProperty("display","none","important"):ne.display="none";else{de=we.stateNode;var Qe=we.memoizedProps.style,Ue=Qe!=null&&Qe.hasOwnProperty("display")?Qe.display:null;de.style.display=Ue==null||typeof Ue=="boolean"?"":(""+Ue).trim()}}catch(Nt){Jn(we,we.return,Nt)}}}else if(p.tag===6){if(y===null){we=p;try{we.stateNode.nodeValue=P?"":we.memoizedProps}catch(Nt){Jn(we,we.return,Nt)}}}else if(p.tag===18){if(y===null){we=p;try{var He=we.stateNode;P?S9(He,!0):S9(we.stateNode,!1)}catch(Nt){Jn(we,we.return,Nt)}}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===d)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===d)break e;for(;p.sibling===null;){if(p.return===null||p.return===d)break e;y===p&&(y=null),p=p.return}y===p&&(y=null),p.sibling.return=p.return,p=p.sibling}w&4&&(w=d.updateQueue,w!==null&&(y=w.retryQueue,y!==null&&(w.retryQueue=null,iS(d,y))));break;case 19:no(p,d),ro(d),w&4&&(w=d.updateQueue,w!==null&&(d.updateQueue=null,iS(d,w)));break;case 30:break;case 21:break;default:no(p,d),ro(d)}}function ro(d){var p=d.flags;if(p&2){try{for(var y,w=d.return;w!==null;){if(TF(w)){y=w;break}w=w.return}if(y==null)throw Error(r(160));switch(y.tag){case 27:var P=y.stateNode,L=EI(d);rS(d,L,P);break;case 5:var ne=y.stateNode;y.flags&32&&(Zm(ne,""),y.flags&=-33);var de=EI(d);rS(d,de,ne);break;case 3:case 4:var we=y.stateNode.containerInfo,Le=EI(d);SI(d,Le,we);break;default:throw Error(r(161))}}catch(qe){Jn(d,d.return,qe)}d.flags&=-3}p&4096&&(d.flags&=-4097)}function MF(d){if(d.subtreeFlags&1024)for(d=d.child;d!==null;){var p=d;MF(p),p.tag===5&&p.flags&1024&&p.stateNode.reset(),d=d.sibling}}function ou(d,p){if(p.subtreeFlags&8772)for(p=p.child;p!==null;)NF(d,p.alternate,p),p=p.sibling}function Fh(d){for(d=d.child;d!==null;){var p=d;switch(p.tag){case 0:case 11:case 14:case 15:Kd(4,p,p.return),Fh(p);break;case 1:ql(p,p.return);var y=p.stateNode;typeof y.componentWillUnmount=="function"&&SF(p,p.return,y),Fh(p);break;case 27:Yv(p.stateNode);case 26:case 5:ql(p,p.return),Fh(p);break;case 22:p.memoizedState===null&&Fh(p);break;case 30:Fh(p);break;default:Fh(p)}d=d.sibling}}function au(d,p,y){for(y=y&&(p.subtreeFlags&8772)!==0,p=p.child;p!==null;){var w=p.alternate,P=d,L=p,ne=L.flags;switch(L.tag){case 0:case 11:case 15:au(P,L,y),Uv(4,L);break;case 1:if(au(P,L,y),w=L,P=w.stateNode,typeof P.componentDidMount=="function")try{P.componentDidMount()}catch(Le){Jn(w,w.return,Le)}if(w=L,P=w.updateQueue,P!==null){var de=w.stateNode;try{var we=P.shared.hiddenCallbacks;if(we!==null)for(P.shared.hiddenCallbacks=null,P=0;P<we.length;P++)dU(we[P],de)}catch(Le){Jn(w,w.return,Le)}}y&&ne&64&&EF(L),Fv(L,L.return);break;case 27:kF(L);case 26:case 5:au(P,L,y),y&&w===null&&ne&4&&AF(L),Fv(L,L.return);break;case 12:au(P,L,y);break;case 31:au(P,L,y),y&&ne&4&&PF(P,L);break;case 13:au(P,L,y),y&&ne&4&&RF(P,L);break;case 22:L.memoizedState===null&&au(P,L,y),Fv(L,L.return);break;case 30:break;default:au(P,L,y)}p=p.sibling}}function TI(d,p){var y=null;d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(y=d.memoizedState.cachePool.pool),d=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(d=p.memoizedState.cachePool.pool),d!==y&&(d!=null&&d.refCount++,y!=null&&kv(y))}function kI(d,p){d=null,p.alternate!==null&&(d=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==d&&(p.refCount++,d!=null&&kv(d))}function Qa(d,p,y,w){if(p.subtreeFlags&10256)for(p=p.child;p!==null;)DF(d,p,y,w),p=p.sibling}function DF(d,p,y,w){var P=p.flags;switch(p.tag){case 0:case 11:case 15:Qa(d,p,y,w),P&2048&&Uv(9,p);break;case 1:Qa(d,p,y,w);break;case 3:Qa(d,p,y,w),P&2048&&(d=null,p.alternate!==null&&(d=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==d&&(p.refCount++,d!=null&&kv(d)));break;case 12:if(P&2048){Qa(d,p,y,w),d=p.stateNode;try{var L=p.memoizedProps,ne=L.id,de=L.onPostCommit;typeof de=="function"&&de(ne,p.alternate===null?"mount":"update",d.passiveEffectDuration,-0)}catch(we){Jn(p,p.return,we)}}else Qa(d,p,y,w);break;case 31:Qa(d,p,y,w);break;case 13:Qa(d,p,y,w);break;case 23:break;case 22:L=p.stateNode,ne=p.alternate,p.memoizedState!==null?L._visibility&2?Qa(d,p,y,w):$v(d,p):L._visibility&2?Qa(d,p,y,w):(L._visibility|=2,v0(d,p,y,w,(p.subtreeFlags&10256)!==0||!1)),P&2048&&TI(ne,p);break;case 24:Qa(d,p,y,w),P&2048&&kI(p.alternate,p);break;default:Qa(d,p,y,w)}}function v0(d,p,y,w,P){for(P=P&&((p.subtreeFlags&10256)!==0||!1),p=p.child;p!==null;){var L=d,ne=p,de=y,we=w,Le=ne.flags;switch(ne.tag){case 0:case 11:case 15:v0(L,ne,de,we,P),Uv(8,ne);break;case 23:break;case 22:var qe=ne.stateNode;ne.memoizedState!==null?qe._visibility&2?v0(L,ne,de,we,P):$v(L,ne):(qe._visibility|=2,v0(L,ne,de,we,P)),P&&Le&2048&&TI(ne.alternate,ne);break;case 24:v0(L,ne,de,we,P),P&&Le&2048&&kI(ne.alternate,ne);break;default:v0(L,ne,de,we,P)}p=p.sibling}}function $v(d,p){if(p.subtreeFlags&10256)for(p=p.child;p!==null;){var y=d,w=p,P=w.flags;switch(w.tag){case 22:$v(y,w),P&2048&&TI(w.alternate,w);break;case 24:$v(y,w),P&2048&&kI(w.alternate,w);break;default:$v(y,w)}p=p.sibling}}var zv=8192;function b0(d,p,y){if(d.subtreeFlags&zv)for(d=d.child;d!==null;)LF(d,p,y),d=d.sibling}function LF(d,p,y){switch(d.tag){case 26:b0(d,p,y),d.flags&zv&&d.memoizedState!==null&&Pye(y,Xa,d.memoizedState,d.memoizedProps);break;case 5:b0(d,p,y);break;case 3:case 4:var w=Xa;Xa=xS(d.stateNode.containerInfo),b0(d,p,y),Xa=w;break;case 22:d.memoizedState===null&&(w=d.alternate,w!==null&&w.memoizedState!==null?(w=zv,zv=16777216,b0(d,p,y),zv=w):b0(d,p,y));break;default:b0(d,p,y)}}function jF(d){var p=d.alternate;if(p!==null&&(d=p.child,d!==null)){p.child=null;do p=d.sibling,d.sibling=null,d=p;while(d!==null)}}function Hv(d){var p=d.deletions;if((d.flags&16)!==0){if(p!==null)for(var y=0;y<p.length;y++){var w=p[y];Ni=w,UF(w,d)}jF(d)}if(d.subtreeFlags&10256)for(d=d.child;d!==null;)BF(d),d=d.sibling}function BF(d){switch(d.tag){case 0:case 11:case 15:Hv(d),d.flags&2048&&Kd(9,d,d.return);break;case 3:Hv(d);break;case 12:Hv(d);break;case 22:var p=d.stateNode;d.memoizedState!==null&&p._visibility&2&&(d.return===null||d.return.tag!==13)?(p._visibility&=-3,sS(d)):Hv(d);break;default:Hv(d)}}function sS(d){var p=d.deletions;if((d.flags&16)!==0){if(p!==null)for(var y=0;y<p.length;y++){var w=p[y];Ni=w,UF(w,d)}jF(d)}for(d=d.child;d!==null;){switch(p=d,p.tag){case 0:case 11:case 15:Kd(8,p,p.return),sS(p);break;case 22:y=p.stateNode,y._visibility&2&&(y._visibility&=-3,sS(p));break;default:sS(p)}d=d.sibling}}function UF(d,p){for(;Ni!==null;){var y=Ni;switch(y.tag){case 0:case 11:case 15:Kd(8,y,p);break;case 23:case 22:if(y.memoizedState!==null&&y.memoizedState.cachePool!==null){var w=y.memoizedState.cachePool.pool;w!=null&&w.refCount++}break;case 24:kv(y.memoizedState.cache)}if(w=y.child,w!==null)w.return=y,Ni=w;else e:for(y=d;Ni!==null;){w=Ni;var P=w.sibling,L=w.return;if(_F(w),w===y){Ni=null;break e}if(P!==null){P.return=L,Ni=P;break e}Ni=L}}}var Gge={getCacheForType:function(d){var p=qi(si),y=p.data.get(d);return y===void 0&&(y=d(),p.data.set(d,y)),y},cacheSignal:function(){return qi(si).controller.signal}},Kge=typeof WeakMap=="function"?WeakMap:Map,Hn=0,sr=null,bn=null,Tn=0,Yn=0,No=null,Wd=!1,w0=!1,CI=!1,lu=0,Fr=0,Yd=0,$h=0,NI=0,_o=0,E0=0,Vv=null,io=null,_I=!1,oS=0,FF=0,aS=1/0,lS=null,Jd=null,xi=0,Xd=null,S0=null,cu=0,II=0,PI=null,$F=null,qv=0,RI=null;function Io(){return(Hn&2)!==0&&Tn!==0?Tn&-Tn:D.T!==null?BI():$t()}function zF(){if(_o===0)if((Tn&536870912)===0||Cn){var d=vt;vt<<=1,(vt&3932160)===0&&(vt=262144),_o=d}else _o=536870912;return d=ko.current,d!==null&&(d.flags|=32),_o}function so(d,p,y){(d===sr&&(Yn===2||Yn===9)||d.cancelPendingCommit!==null)&&(A0(d,0),Qd(d,Tn,_o,!1)),Q(d,y),((Hn&2)===0||d!==sr)&&(d===sr&&((Hn&2)===0&&($h|=y),Fr===4&&Qd(d,Tn,_o,!1)),Gl(d))}function HF(d,p,y){if((Hn&6)!==0)throw Error(r(327));var w=!y&&(p&127)===0&&(p&d.expiredLanes)===0||rn(d,p),P=w?Jge(d,p):MI(d,p,!0),L=w;do{if(P===0){w0&&!w&&Qd(d,p,0,!1);break}else{if(y=d.current.alternate,L&&!Wge(y)){P=MI(d,p,!1),L=!1;continue}if(P===2){if(L=p,d.errorRecoveryDisabledLanes&L)var ne=0;else ne=d.pendingLanes&-536870913,ne=ne!==0?ne:ne&536870912?536870912:0;if(ne!==0){p=ne;e:{var de=d;P=Vv;var we=de.current.memoizedState.isDehydrated;if(we&&(A0(de,ne).flags|=256),ne=MI(de,ne,!1),ne!==2){if(CI&&!we){de.errorRecoveryDisabledLanes|=L,$h|=L,P=4;break e}L=io,io=P,L!==null&&(io===null?io=L:io.push.apply(io,L))}P=ne}if(L=!1,P!==2)continue}}if(P===1){A0(d,0),Qd(d,p,0,!0);break}e:{switch(w=d,L=P,L){case 0:case 1:throw Error(r(345));case 4:if((p&4194048)!==p)break;case 6:Qd(w,p,_o,!Wd);break e;case 2:io=null;break;case 3:case 5:break;default:throw Error(r(329))}if((p&62914560)===p&&(P=oS+300-Tt(),10<P)){if(Qd(w,p,_o,!Wd),en(w,0,!0)!==0)break e;cu=p,w.timeoutHandle=b9(VF.bind(null,w,y,io,lS,_I,p,_o,$h,E0,Wd,L,"Throttled",-0,0),P);break e}VF(w,y,io,lS,_I,p,_o,$h,E0,Wd,L,null,-0,0)}}break}while(!0);Gl(d)}function VF(d,p,y,w,P,L,ne,de,we,Le,qe,Qe,Ue,He){if(d.timeoutHandle=-1,Qe=p.subtreeFlags,Qe&8192||(Qe&16785408)===16785408){Qe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Wc},LF(p,L,Qe);var Nt=(L&62914560)===L?oS-Tt():(L&4194048)===L?FF-Tt():0;if(Nt=Rye(Qe,Nt),Nt!==null){cu=L,d.cancelPendingCommit=Nt(QF.bind(null,d,p,L,y,w,P,ne,de,we,qe,Qe,null,Ue,He)),Qd(d,L,ne,!Le);return}}QF(d,p,L,y,w,P,ne,de,we)}function Wge(d){for(var p=d;;){var y=p.tag;if((y===0||y===11||y===15)&&p.flags&16384&&(y=p.updateQueue,y!==null&&(y=y.stores,y!==null)))for(var w=0;w<y.length;w++){var P=y[w],L=P.getSnapshot;P=P.value;try{if(!Ao(L(),P))return!1}catch{return!1}}if(y=p.child,p.subtreeFlags&16384&&y!==null)y.return=p,p=y;else{if(p===d)break;for(;p.sibling===null;){if(p.return===null||p.return===d)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function Qd(d,p,y,w){p&=~NI,p&=~$h,d.suspendedLanes|=p,d.pingedLanes&=~p,w&&(d.warmLanes|=p),w=d.expirationTimes;for(var P=p;0<P;){var L=31-ye(P),ne=1<<L;w[L]=-1,P&=~ne}y!==0&&pe(d,y,p)}function cS(){return(Hn&6)===0?(Gv(0),!1):!0}function OI(){if(bn!==null){if(Yn===0)var d=bn.return;else d=bn,Qc=Rh=null,Y_(d),p0=null,Nv=0,d=bn;for(;d!==null;)wF(d.alternate,d),d=d.return;bn=null}}function A0(d,p){var y=d.timeoutHandle;y!==-1&&(d.timeoutHandle=-1,pye(y)),y=d.cancelPendingCommit,y!==null&&(d.cancelPendingCommit=null,y()),cu=0,OI(),sr=d,bn=y=Jc(d.current,null),Tn=p,Yn=0,No=null,Wd=!1,w0=rn(d,p),CI=!1,E0=_o=NI=$h=Yd=Fr=0,io=Vv=null,_I=!1,(p&8)!==0&&(p|=p&32);var w=d.entangledLanes;if(w!==0)for(d=d.entanglements,w&=p;0<w;){var P=31-ye(w),L=1<<P;p|=d[P],w&=~L}return lu=p,IE(),y}function qF(d,p){sn=null,D.H=Lv,p===h0||p===BE?(p=aU(),Yn=3):p===j_?(p=aU(),Yn=4):Yn=p===dI?8:p!==null&&typeof p=="object"&&typeof p.then=="function"?6:1,No=p,bn===null&&(Fr=1,QE(d,ia(p,d.current)))}function GF(){var d=ko.current;return d===null?!0:(Tn&4194048)===Tn?la===null:(Tn&62914560)===Tn||(Tn&536870912)!==0?d===la:!1}function KF(){var d=D.H;return D.H=Lv,d===null?Lv:d}function WF(){var d=D.A;return D.A=Gge,d}function uS(){Fr=4,Wd||(Tn&4194048)!==Tn&&ko.current!==null||(w0=!0),(Yd&134217727)===0&&($h&134217727)===0||sr===null||Qd(sr,Tn,_o,!1)}function MI(d,p,y){var w=Hn;Hn|=2;var P=KF(),L=WF();(sr!==d||Tn!==p)&&(lS=null,A0(d,p)),p=!1;var ne=Fr;e:do try{if(Yn!==0&&bn!==null){var de=bn,we=No;switch(Yn){case 8:OI(),ne=6;break e;case 3:case 2:case 9:case 6:ko.current===null&&(p=!0);var Le=Yn;if(Yn=0,No=null,T0(d,de,we,Le),y&&w0){ne=0;break e}break;default:Le=Yn,Yn=0,No=null,T0(d,de,we,Le)}}Yge(),ne=Fr;break}catch(qe){qF(d,qe)}while(!0);return p&&d.shellSuspendCounter++,Qc=Rh=null,Hn=w,D.H=P,D.A=L,bn===null&&(sr=null,Tn=0,IE()),ne}function Yge(){for(;bn!==null;)YF(bn)}function Jge(d,p){var y=Hn;Hn|=2;var w=KF(),P=WF();sr!==d||Tn!==p?(lS=null,aS=Tt()+500,A0(d,p)):w0=rn(d,p);e:do try{if(Yn!==0&&bn!==null){p=bn;var L=No;t:switch(Yn){case 1:Yn=0,No=null,T0(d,p,L,1);break;case 2:case 9:if(sU(L)){Yn=0,No=null,JF(p);break}p=function(){Yn!==2&&Yn!==9||sr!==d||(Yn=7),Gl(d)},L.then(p,p);break e;case 3:Yn=7;break e;case 4:Yn=5;break e;case 7:sU(L)?(Yn=0,No=null,JF(p)):(Yn=0,No=null,T0(d,p,L,7));break;case 5:var ne=null;switch(bn.tag){case 26:ne=bn.memoizedState;case 5:case 27:var de=bn;if(ne?D9(ne):de.stateNode.complete){Yn=0,No=null;var we=de.sibling;if(we!==null)bn=we;else{var Le=de.return;Le!==null?(bn=Le,dS(Le)):bn=null}break t}}Yn=0,No=null,T0(d,p,L,5);break;case 6:Yn=0,No=null,T0(d,p,L,6);break;case 8:OI(),Fr=6;break e;default:throw Error(r(462))}}Xge();break}catch(qe){qF(d,qe)}while(!0);return Qc=Rh=null,D.H=w,D.A=P,Hn=y,bn!==null?0:(sr=null,Tn=0,IE(),Fr)}function Xge(){for(;bn!==null&&!Zt();)YF(bn)}function YF(d){var p=vF(d.alternate,d,lu);d.memoizedProps=d.pendingProps,p===null?dS(d):bn=p}function JF(d){var p=d,y=p.alternate;switch(p.tag){case 15:case 0:p=hF(y,p,p.pendingProps,p.type,void 0,Tn);break;case 11:p=hF(y,p,p.pendingProps,p.type.render,p.ref,Tn);break;case 5:Y_(p);default:wF(y,p),p=bn=W7(p,lu),p=vF(y,p,lu)}d.memoizedProps=d.pendingProps,p===null?dS(d):bn=p}function T0(d,p,y,w){Qc=Rh=null,Y_(p),p0=null,Nv=0;var P=p.return;try{if(Uge(d,P,p,y,Tn)){Fr=1,QE(d,ia(y,d.current)),bn=null;return}}catch(L){if(P!==null)throw bn=P,L;Fr=1,QE(d,ia(y,d.current)),bn=null;return}p.flags&32768?(Cn||w===1?d=!0:w0||(Tn&536870912)!==0?d=!1:(Wd=d=!0,(w===2||w===9||w===3||w===6)&&(w=ko.current,w!==null&&w.tag===13&&(w.flags|=16384))),XF(p,d)):dS(p)}function dS(d){var p=d;do{if((p.flags&32768)!==0){XF(p,Wd);return}d=p.return;var y=zge(p.alternate,p,lu);if(y!==null){bn=y;return}if(p=p.sibling,p!==null){bn=p;return}bn=p=d}while(p!==null);Fr===0&&(Fr=5)}function XF(d,p){do{var y=Hge(d.alternate,d);if(y!==null){y.flags&=32767,bn=y;return}if(y=d.return,y!==null&&(y.flags|=32768,y.subtreeFlags=0,y.deletions=null),!p&&(d=d.sibling,d!==null)){bn=d;return}bn=d=y}while(d!==null);Fr=6,bn=null}function QF(d,p,y,w,P,L,ne,de,we){d.cancelPendingCommit=null;do fS();while(xi!==0);if((Hn&6)!==0)throw Error(r(327));if(p!==null){if(p===d.current)throw Error(r(177));if(L=p.lanes|p.childLanes,L|=E_,ee(d,y,L,ne,de,we),d===sr&&(bn=sr=null,Tn=0),S0=p,Xd=d,cu=y,II=L,PI=P,$F=w,(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?(d.callbackNode=null,d.callbackPriority=0,tye(ht,function(){return r9(),null})):(d.callbackNode=null,d.callbackPriority=0),w=(p.flags&13878)!==0,(p.subtreeFlags&13878)!==0||w){w=D.T,D.T=null,P=z.p,z.p=2,ne=Hn,Hn|=4;try{Vge(d,p,y)}finally{Hn=ne,z.p=P,D.T=w}}xi=1,ZF(),e9(),t9()}}function ZF(){if(xi===1){xi=0;var d=Xd,p=S0,y=(p.flags&13878)!==0;if((p.subtreeFlags&13878)!==0||y){y=D.T,D.T=null;var w=z.p;z.p=2;var P=Hn;Hn|=4;try{OF(p,d);var L=GI,ne=U7(d.containerInfo),de=L.focusedElem,we=L.selectionRange;if(ne!==de&&de&&de.ownerDocument&&B7(de.ownerDocument.documentElement,de)){if(we!==null&&y_(de)){var Le=we.start,qe=we.end;if(qe===void 0&&(qe=Le),"selectionStart"in de)de.selectionStart=Le,de.selectionEnd=Math.min(qe,de.value.length);else{var Qe=de.ownerDocument||document,Ue=Qe&&Qe.defaultView||window;if(Ue.getSelection){var He=Ue.getSelection(),Nt=de.textContent.length,Kt=Math.min(we.start,Nt),tr=we.end===void 0?Kt:Math.min(we.end,Nt);!He.extend&&Kt>tr&&(ne=tr,tr=Kt,Kt=ne);var _e=j7(de,Kt),Te=j7(de,tr);if(_e&&Te&&(He.rangeCount!==1||He.anchorNode!==_e.node||He.anchorOffset!==_e.offset||He.focusNode!==Te.node||He.focusOffset!==Te.offset)){var De=Qe.createRange();De.setStart(_e.node,_e.offset),He.removeAllRanges(),Kt>tr?(He.addRange(De),He.extend(Te.node,Te.offset)):(De.setEnd(Te.node,Te.offset),He.addRange(De))}}}}for(Qe=[],He=de;He=He.parentNode;)He.nodeType===1&&Qe.push({element:He,left:He.scrollLeft,top:He.scrollTop});for(typeof de.focus=="function"&&de.focus(),de=0;de<Qe.length;de++){var Je=Qe[de];Je.element.scrollLeft=Je.left,Je.element.scrollTop=Je.top}}AS=!!qI,GI=qI=null}finally{Hn=P,z.p=w,D.T=y}}d.current=p,xi=2}}function e9(){if(xi===2){xi=0;var d=Xd,p=S0,y=(p.flags&8772)!==0;if((p.subtreeFlags&8772)!==0||y){y=D.T,D.T=null;var w=z.p;z.p=2;var P=Hn;Hn|=4;try{NF(d,p.alternate,p)}finally{Hn=P,z.p=w,D.T=y}}xi=3}}function t9(){if(xi===4||xi===3){xi=0,Ge();var d=Xd,p=S0,y=cu,w=$F;(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?xi=5:(xi=0,S0=Xd=null,n9(d,d.pendingLanes));var P=d.pendingLanes;if(P===0&&(Jd=null),Jt(y),p=p.stateNode,be&&typeof be.onCommitFiberRoot=="function")try{be.onCommitFiberRoot(fe,p,void 0,(p.current.flags&128)===128)}catch{}if(w!==null){p=D.T,P=z.p,z.p=2,D.T=null;try{for(var L=d.onRecoverableError,ne=0;ne<w.length;ne++){var de=w[ne];L(de.value,{componentStack:de.stack})}}finally{D.T=p,z.p=P}}(cu&3)!==0&&fS(),Gl(d),P=d.pendingLanes,(y&261930)!==0&&(P&42)!==0?d===RI?qv++:(qv=0,RI=d):qv=0,Gv(0)}}function n9(d,p){(d.pooledCacheLanes&=p)===0&&(p=d.pooledCache,p!=null&&(d.pooledCache=null,kv(p)))}function fS(){return ZF(),e9(),t9(),r9()}function r9(){if(xi!==5)return!1;var d=Xd,p=II;II=0;var y=Jt(cu),w=D.T,P=z.p;try{z.p=32>y?32:y,D.T=null,y=PI,PI=null;var L=Xd,ne=cu;if(xi=0,S0=Xd=null,cu=0,(Hn&6)!==0)throw Error(r(331));var de=Hn;if(Hn|=4,BF(L.current),DF(L,L.current,ne,y),Hn=de,Gv(0,!1),be&&typeof be.onPostCommitFiberRoot=="function")try{be.onPostCommitFiberRoot(fe,L)}catch{}return!0}finally{z.p=P,D.T=w,n9(d,p)}}function i9(d,p,y){p=ia(y,p),p=uI(d.stateNode,p,2),d=Vd(d,p,2),d!==null&&(Q(d,2),Gl(d))}function Jn(d,p,y){if(d.tag===3)i9(d,d,y);else for(;p!==null;){if(p.tag===3){i9(p,d,y);break}else if(p.tag===1){var w=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(Jd===null||!Jd.has(w))){d=ia(y,d),y=sF(2),w=Vd(p,y,2),w!==null&&(oF(y,w,p,d),Q(w,2),Gl(w));break}}p=p.return}}function DI(d,p,y){var w=d.pingCache;if(w===null){w=d.pingCache=new Kge;var P=new Set;w.set(p,P)}else P=w.get(p),P===void 0&&(P=new Set,w.set(p,P));P.has(y)||(CI=!0,P.add(y),d=Qge.bind(null,d,p,y),p.then(d,d))}function Qge(d,p,y){var w=d.pingCache;w!==null&&w.delete(p),d.pingedLanes|=d.suspendedLanes&y,d.warmLanes&=~y,sr===d&&(Tn&y)===y&&(Fr===4||Fr===3&&(Tn&62914560)===Tn&&300>Tt()-oS?(Hn&2)===0&&A0(d,0):NI|=y,E0===Tn&&(E0=0)),Gl(d)}function s9(d,p){p===0&&(p=zn()),d=_h(d,p),d!==null&&(Q(d,p),Gl(d))}function Zge(d){var p=d.memoizedState,y=0;p!==null&&(y=p.retryLane),s9(d,y)}function eye(d,p){var y=0;switch(d.tag){case 31:case 13:var w=d.stateNode,P=d.memoizedState;P!==null&&(y=P.retryLane);break;case 19:w=d.stateNode;break;case 22:w=d.stateNode._retryCache;break;default:throw Error(r(314))}w!==null&&w.delete(p),s9(d,y)}function tye(d,p){return ot(d,p)}var hS=null,k0=null,LI=!1,pS=!1,jI=!1,Zd=0;function Gl(d){d!==k0&&d.next===null&&(k0===null?hS=k0=d:k0=k0.next=d),pS=!0,LI||(LI=!0,rye())}function Gv(d,p){if(!jI&&pS){jI=!0;do for(var y=!1,w=hS;w!==null;){if(d!==0){var P=w.pendingLanes;if(P===0)var L=0;else{var ne=w.suspendedLanes,de=w.pingedLanes;L=(1<<31-ye(42|d)+1)-1,L&=P&~(ne&~de),L=L&201326741?L&201326741|1:L?L|2:0}L!==0&&(y=!0,c9(w,L))}else L=Tn,L=en(w,w===sr?L:0,w.cancelPendingCommit!==null||w.timeoutHandle!==-1),(L&3)===0||rn(w,L)||(y=!0,c9(w,L));w=w.next}while(y);jI=!1}}function nye(){o9()}function o9(){pS=LI=!1;var d=0;Zd!==0&&hye()&&(d=Zd);for(var p=Tt(),y=null,w=hS;w!==null;){var P=w.next,L=a9(w,p);L===0?(w.next=null,y===null?hS=P:y.next=P,P===null&&(k0=y)):(y=w,(d!==0||(L&3)!==0)&&(pS=!0)),w=P}xi!==0&&xi!==5||Gv(d),Zd!==0&&(Zd=0)}function a9(d,p){for(var y=d.suspendedLanes,w=d.pingedLanes,P=d.expirationTimes,L=d.pendingLanes&-62914561;0<L;){var ne=31-ye(L),de=1<<ne,we=P[ne];we===-1?((de&y)===0||(de&w)!==0)&&(P[ne]=Ci(de,p)):we<=p&&(d.expiredLanes|=de),L&=~de}if(p=sr,y=Tn,y=en(d,d===p?y:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),w=d.callbackNode,y===0||d===p&&(Yn===2||Yn===9)||d.cancelPendingCommit!==null)return w!==null&&w!==null&&Bt(w),d.callbackNode=null,d.callbackPriority=0;if((y&3)===0||rn(d,y)){if(p=y&-y,p===d.callbackPriority)return p;switch(w!==null&&Bt(w),Jt(y)){case 2:case 8:y=Ve;break;case 32:y=ht;break;case 268435456:y=se;break;default:y=ht}return w=l9.bind(null,d),y=ot(y,w),d.callbackPriority=p,d.callbackNode=y,p}return w!==null&&w!==null&&Bt(w),d.callbackPriority=2,d.callbackNode=null,2}function l9(d,p){if(xi!==0&&xi!==5)return d.callbackNode=null,d.callbackPriority=0,null;var y=d.callbackNode;if(fS()&&d.callbackNode!==y)return null;var w=Tn;return w=en(d,d===sr?w:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),w===0?null:(HF(d,w,p),a9(d,Tt()),d.callbackNode!=null&&d.callbackNode===y?l9.bind(null,d):null)}function c9(d,p){if(fS())return null;HF(d,p,!0)}function rye(){mye(function(){(Hn&6)!==0?ot(Pe,nye):o9()})}function BI(){if(Zd===0){var d=d0;d===0&&(d=Ft,Ft<<=1,(Ft&261888)===0&&(Ft=256)),Zd=d}return Zd}function u9(d){return d==null||typeof d=="symbol"||typeof d=="boolean"?null:typeof d=="function"?d:EE(""+d)}function d9(d,p){var y=p.ownerDocument.createElement("input");return y.name=p.name,y.value=p.value,d.id&&y.setAttribute("form",d.id),p.parentNode.insertBefore(y,p),d=new FormData(d),y.parentNode.removeChild(y),d}function iye(d,p,y,w,P){if(p==="submit"&&y&&y.stateNode===P){var L=u9((P[vn]||null).action),ne=w.submitter;ne&&(p=(p=ne[vn]||null)?u9(p.formAction):ne.getAttribute("formAction"),p!==null&&(L=p,ne=null));var de=new kE("action","action",null,w,P);d.push({event:de,listeners:[{instance:null,listener:function(){if(w.defaultPrevented){if(Zd!==0){var we=ne?d9(P,ne):new FormData(P);iI(y,{pending:!0,data:we,method:P.method,action:L},null,we)}}else typeof L=="function"&&(de.preventDefault(),we=ne?d9(P,ne):new FormData(P),iI(y,{pending:!0,data:we,method:P.method,action:L},L,we))},currentTarget:P}]})}}for(var UI=0;UI<w_.length;UI++){var FI=w_[UI],sye=FI.toLowerCase(),oye=FI[0].toUpperCase()+FI.slice(1);Ja(sye,"on"+oye)}Ja(z7,"onAnimationEnd"),Ja(H7,"onAnimationIteration"),Ja(V7,"onAnimationStart"),Ja("dblclick","onDoubleClick"),Ja("focusin","onFocus"),Ja("focusout","onBlur"),Ja(Ege,"onTransitionRun"),Ja(Sge,"onTransitionStart"),Ja(Age,"onTransitionCancel"),Ja(q7,"onTransitionEnd"),ds("onMouseEnter",["mouseout","mouseover"]),ds("onMouseLeave",["mouseout","mouseover"]),ds("onPointerEnter",["pointerout","pointerover"]),ds("onPointerLeave",["pointerout","pointerover"]),Yr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Yr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Yr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Yr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Yr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Yr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Kv="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aye=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Kv));function f9(d,p){p=(p&4)!==0;for(var y=0;y<d.length;y++){var w=d[y],P=w.event;w=w.listeners;e:{var L=void 0;if(p)for(var ne=w.length-1;0<=ne;ne--){var de=w[ne],we=de.instance,Le=de.currentTarget;if(de=de.listener,we!==L&&P.isPropagationStopped())break e;L=de,P.currentTarget=Le;try{L(P)}catch(qe){_E(qe)}P.currentTarget=null,L=we}else for(ne=0;ne<w.length;ne++){if(de=w[ne],we=de.instance,Le=de.currentTarget,de=de.listener,we!==L&&P.isPropagationStopped())break e;L=de,P.currentTarget=Le;try{L(P)}catch(qe){_E(qe)}P.currentTarget=null,L=we}}}}function wn(d,p){var y=p[ur];y===void 0&&(y=p[ur]=new Set);var w=d+"__bubble";y.has(w)||(h9(p,d,2,!1),y.add(w))}function $I(d,p,y){var w=0;p&&(w|=4),h9(y,d,w,p)}var mS="_reactListening"+Math.random().toString(36).slice(2);function zI(d){if(!d[mS]){d[mS]=!0,Gc.forEach(function(y){y!=="selectionchange"&&(aye.has(y)||$I(y,!1,d),$I(y,!0,d))});var p=d.nodeType===9?d:d.ownerDocument;p===null||p[mS]||(p[mS]=!0,$I("selectionchange",!1,p))}}function h9(d,p,y,w){switch(z9(p)){case 2:var P=Dye;break;case 8:P=Lye;break;default:P=rP}y=P.bind(null,p,y,d),P=void 0,!l_||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||(P=!0),w?P!==void 0?d.addEventListener(p,y,{capture:!0,passive:P}):d.addEventListener(p,y,!0):P!==void 0?d.addEventListener(p,y,{passive:P}):d.addEventListener(p,y,!1)}function HI(d,p,y,w,P){var L=w;if((p&1)===0&&(p&2)===0&&w!==null)e:for(;;){if(w===null)return;var ne=w.tag;if(ne===3||ne===4){var de=w.stateNode.containerInfo;if(de===P)break;if(ne===4)for(ne=w.return;ne!==null;){var we=ne.tag;if((we===3||we===4)&&ne.stateNode.containerInfo===P)return;ne=ne.return}for(;de!==null;){if(ne=wo(de),ne===null)return;if(we=ne.tag,we===5||we===6||we===26||we===27){w=L=ne;continue e}de=de.parentNode}}w=w.return}x7(function(){var Le=L,qe=o_(y),Qe=[];e:{var Ue=G7.get(d);if(Ue!==void 0){var He=kE,Nt=d;switch(d){case"keypress":if(AE(y)===0)break e;case"keydown":case"keyup":He=ege;break;case"focusin":Nt="focus",He=f_;break;case"focusout":Nt="blur",He=f_;break;case"beforeblur":case"afterblur":He=f_;break;case"click":if(y.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":He=w7;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":He=z0e;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":He=rge;break;case z7:case H7:case V7:He=q0e;break;case q7:He=sge;break;case"scroll":case"scrollend":He=F0e;break;case"wheel":He=age;break;case"copy":case"cut":case"paste":He=K0e;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":He=S7;break;case"toggle":case"beforetoggle":He=cge}var Kt=(p&4)!==0,tr=!Kt&&(d==="scroll"||d==="scrollend"),_e=Kt?Ue!==null?Ue+"Capture":null:Ue;Kt=[];for(var Te=Le,De;Te!==null;){var Je=Te;if(De=Je.stateNode,Je=Je.tag,Je!==5&&Je!==26&&Je!==27||De===null||_e===null||(Je=mv(Te,_e),Je!=null&&Kt.push(Wv(Te,Je,De))),tr)break;Te=Te.return}0<Kt.length&&(Ue=new He(Ue,Nt,null,y,qe),Qe.push({event:Ue,listeners:Kt}))}}if((p&7)===0){e:{if(Ue=d==="mouseover"||d==="pointerover",He=d==="mouseout"||d==="pointerout",Ue&&y!==s_&&(Nt=y.relatedTarget||y.fromElement)&&(wo(Nt)||Nt[Ya]))break e;if((He||Ue)&&(Ue=qe.window===qe?qe:(Ue=qe.ownerDocument)?Ue.defaultView||Ue.parentWindow:window,He?(Nt=y.relatedTarget||y.toElement,He=Le,Nt=Nt?wo(Nt):null,Nt!==null&&(tr=s(Nt),Kt=Nt.tag,Nt!==tr||Kt!==5&&Kt!==27&&Kt!==6)&&(Nt=null)):(He=null,Nt=Le),He!==Nt)){if(Kt=w7,Je="onMouseLeave",_e="onMouseEnter",Te="mouse",(d==="pointerout"||d==="pointerover")&&(Kt=S7,Je="onPointerLeave",_e="onPointerEnter",Te="pointer"),tr=He==null?Ue:ea(He),De=Nt==null?Ue:ea(Nt),Ue=new Kt(Je,Te+"leave",He,y,qe),Ue.target=tr,Ue.relatedTarget=De,Je=null,wo(qe)===Le&&(Kt=new Kt(_e,Te+"enter",Nt,y,qe),Kt.target=De,Kt.relatedTarget=tr,Je=Kt),tr=Je,He&&Nt)t:{for(Kt=lye,_e=He,Te=Nt,De=0,Je=_e;Je;Je=Kt(Je))De++;Je=0;for(var Ut=Te;Ut;Ut=Kt(Ut))Je++;for(;0<De-Je;)_e=Kt(_e),De--;for(;0<Je-De;)Te=Kt(Te),Je--;for(;De--;){if(_e===Te||Te!==null&&_e===Te.alternate){Kt=_e;break t}_e=Kt(_e),Te=Kt(Te)}Kt=null}else Kt=null;He!==null&&p9(Qe,Ue,He,Kt,!1),Nt!==null&&tr!==null&&p9(Qe,tr,Nt,Kt,!0)}}e:{if(Ue=Le?ea(Le):window,He=Ue.nodeName&&Ue.nodeName.toLowerCase(),He==="select"||He==="input"&&Ue.type==="file")var Dn=P7;else if(_7(Ue))if(R7)Dn=vge;else{Dn=yge;var Rt=gge}else He=Ue.nodeName,!He||He.toLowerCase()!=="input"||Ue.type!=="checkbox"&&Ue.type!=="radio"?Le&&i_(Le.elementType)&&(Dn=P7):Dn=xge;if(Dn&&(Dn=Dn(d,Le))){I7(Qe,Dn,y,qe);break e}Rt&&Rt(d,Ue,Le),d==="focusout"&&Le&&Ue.type==="number"&&Le.memoizedProps.value!=null&&r_(Ue,"number",Ue.value)}switch(Rt=Le?ea(Le):window,d){case"focusin":(_7(Rt)||Rt.contentEditable==="true")&&(r0=Rt,x_=Le,Sv=null);break;case"focusout":Sv=x_=r0=null;break;case"mousedown":v_=!0;break;case"contextmenu":case"mouseup":case"dragend":v_=!1,F7(Qe,y,qe);break;case"selectionchange":if(wge)break;case"keydown":case"keyup":F7(Qe,y,qe)}var un;if(p_)e:{switch(d){case"compositionstart":var kn="onCompositionStart";break e;case"compositionend":kn="onCompositionEnd";break e;case"compositionupdate":kn="onCompositionUpdate";break e}kn=void 0}else n0?C7(d,y)&&(kn="onCompositionEnd"):d==="keydown"&&y.keyCode===229&&(kn="onCompositionStart");kn&&(A7&&y.locale!=="ko"&&(n0||kn!=="onCompositionStart"?kn==="onCompositionEnd"&&n0&&(un=v7()):(jd=qe,c_="value"in jd?jd.value:jd.textContent,n0=!0)),Rt=gS(Le,kn),0<Rt.length&&(kn=new E7(kn,d,null,y,qe),Qe.push({event:kn,listeners:Rt}),un?kn.data=un:(un=N7(y),un!==null&&(kn.data=un)))),(un=dge?fge(d,y):hge(d,y))&&(kn=gS(Le,"onBeforeInput"),0<kn.length&&(Rt=new E7("onBeforeInput","beforeinput",null,y,qe),Qe.push({event:Rt,listeners:kn}),Rt.data=un)),iye(Qe,d,Le,y,qe)}f9(Qe,p)})}function Wv(d,p,y){return{instance:d,listener:p,currentTarget:y}}function gS(d,p){for(var y=p+"Capture",w=[];d!==null;){var P=d,L=P.stateNode;if(P=P.tag,P!==5&&P!==26&&P!==27||L===null||(P=mv(d,y),P!=null&&w.unshift(Wv(d,P,L)),P=mv(d,p),P!=null&&w.push(Wv(d,P,L))),d.tag===3)return w;d=d.return}return[]}function lye(d){if(d===null)return null;do d=d.return;while(d&&d.tag!==5&&d.tag!==27);return d||null}function p9(d,p,y,w,P){for(var L=p._reactName,ne=[];y!==null&&y!==w;){var de=y,we=de.alternate,Le=de.stateNode;if(de=de.tag,we!==null&&we===w)break;de!==5&&de!==26&&de!==27||Le===null||(we=Le,P?(Le=mv(y,L),Le!=null&&ne.unshift(Wv(y,Le,we))):P||(Le=mv(y,L),Le!=null&&ne.push(Wv(y,Le,we)))),y=y.return}ne.length!==0&&d.push({event:p,listeners:ne})}var cye=/\r\n?/g,uye=/\u0000|\uFFFD/g;function m9(d){return(typeof d=="string"?d:""+d).replace(cye,`
`).replace(uye,"")}function g9(d,p){return p=m9(p),m9(d)===p}function er(d,p,y,w,P,L){switch(y){case"children":typeof w=="string"?p==="body"||p==="textarea"&&w===""||Zm(d,w):(typeof w=="number"||typeof w=="bigint")&&p!=="body"&&Zm(d,""+w);break;case"className":Ld(d,"class",w);break;case"tabIndex":Ld(d,"tabindex",w);break;case"dir":case"role":case"viewBox":case"width":case"height":Ld(d,y,w);break;case"style":g7(d,w,L);break;case"data":if(p!=="object"){Ld(d,"data",w);break}case"src":case"href":if(w===""&&(p!=="a"||y!=="href")){d.removeAttribute(y);break}if(w==null||typeof w=="function"||typeof w=="symbol"||typeof w=="boolean"){d.removeAttribute(y);break}w=EE(""+w),d.setAttribute(y,w);break;case"action":case"formAction":if(typeof w=="function"){d.setAttribute(y,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof L=="function"&&(y==="formAction"?(p!=="input"&&er(d,p,"name",P.name,P,null),er(d,p,"formEncType",P.formEncType,P,null),er(d,p,"formMethod",P.formMethod,P,null),er(d,p,"formTarget",P.formTarget,P,null)):(er(d,p,"encType",P.encType,P,null),er(d,p,"method",P.method,P,null),er(d,p,"target",P.target,P,null)));if(w==null||typeof w=="symbol"||typeof w=="boolean"){d.removeAttribute(y);break}w=EE(""+w),d.setAttribute(y,w);break;case"onClick":w!=null&&(d.onclick=Wc);break;case"onScroll":w!=null&&wn("scroll",d);break;case"onScrollEnd":w!=null&&wn("scrollend",d);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(r(61));if(y=w.__html,y!=null){if(P.children!=null)throw Error(r(60));d.innerHTML=y}}break;case"multiple":d.multiple=w&&typeof w!="function"&&typeof w!="symbol";break;case"muted":d.muted=w&&typeof w!="function"&&typeof w!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(w==null||typeof w=="function"||typeof w=="boolean"||typeof w=="symbol"){d.removeAttribute("xlink:href");break}y=EE(""+w),d.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",y);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":w!=null&&typeof w!="function"&&typeof w!="symbol"?d.setAttribute(y,""+w):d.removeAttribute(y);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":w&&typeof w!="function"&&typeof w!="symbol"?d.setAttribute(y,""):d.removeAttribute(y);break;case"capture":case"download":w===!0?d.setAttribute(y,""):w!==!1&&w!=null&&typeof w!="function"&&typeof w!="symbol"?d.setAttribute(y,w):d.removeAttribute(y);break;case"cols":case"rows":case"size":case"span":w!=null&&typeof w!="function"&&typeof w!="symbol"&&!isNaN(w)&&1<=w?d.setAttribute(y,w):d.removeAttribute(y);break;case"rowSpan":case"start":w==null||typeof w=="function"||typeof w=="symbol"||isNaN(w)?d.removeAttribute(y):d.setAttribute(y,w);break;case"popover":wn("beforetoggle",d),wn("toggle",d),Dd(d,"popover",w);break;case"xlinkActuate":Kc(d,"http://www.w3.org/1999/xlink","xlink:actuate",w);break;case"xlinkArcrole":Kc(d,"http://www.w3.org/1999/xlink","xlink:arcrole",w);break;case"xlinkRole":Kc(d,"http://www.w3.org/1999/xlink","xlink:role",w);break;case"xlinkShow":Kc(d,"http://www.w3.org/1999/xlink","xlink:show",w);break;case"xlinkTitle":Kc(d,"http://www.w3.org/1999/xlink","xlink:title",w);break;case"xlinkType":Kc(d,"http://www.w3.org/1999/xlink","xlink:type",w);break;case"xmlBase":Kc(d,"http://www.w3.org/XML/1998/namespace","xml:base",w);break;case"xmlLang":Kc(d,"http://www.w3.org/XML/1998/namespace","xml:lang",w);break;case"xmlSpace":Kc(d,"http://www.w3.org/XML/1998/namespace","xml:space",w);break;case"is":Dd(d,"is",w);break;case"innerText":case"textContent":break;default:(!(2<y.length)||y[0]!=="o"&&y[0]!=="O"||y[1]!=="n"&&y[1]!=="N")&&(y=B0e.get(y)||y,Dd(d,y,w))}}function VI(d,p,y,w,P,L){switch(y){case"style":g7(d,w,L);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(r(61));if(y=w.__html,y!=null){if(P.children!=null)throw Error(r(60));d.innerHTML=y}}break;case"children":typeof w=="string"?Zm(d,w):(typeof w=="number"||typeof w=="bigint")&&Zm(d,""+w);break;case"onScroll":w!=null&&wn("scroll",d);break;case"onScrollEnd":w!=null&&wn("scrollend",d);break;case"onClick":w!=null&&(d.onclick=Wc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Sr.hasOwnProperty(y))e:{if(y[0]==="o"&&y[1]==="n"&&(P=y.endsWith("Capture"),p=y.slice(2,P?y.length-7:void 0),L=d[vn]||null,L=L!=null?L[y]:null,typeof L=="function"&&d.removeEventListener(p,L,P),typeof w=="function")){typeof L!="function"&&L!==null&&(y in d?d[y]=null:d.hasAttribute(y)&&d.removeAttribute(y)),d.addEventListener(p,w,P);break e}y in d?d[y]=w:w===!0?d.setAttribute(y,""):Dd(d,y,w)}}}function Ki(d,p,y){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":wn("error",d),wn("load",d);var w=!1,P=!1,L;for(L in y)if(y.hasOwnProperty(L)){var ne=y[L];if(ne!=null)switch(L){case"src":w=!0;break;case"srcSet":P=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,p));default:er(d,p,L,ne,y,null)}}P&&er(d,p,"srcSet",y.srcSet,y,null),w&&er(d,p,"src",y.src,y,null);return;case"input":wn("invalid",d);var de=L=ne=P=null,we=null,Le=null;for(w in y)if(y.hasOwnProperty(w)){var qe=y[w];if(qe!=null)switch(w){case"name":P=qe;break;case"type":ne=qe;break;case"checked":we=qe;break;case"defaultChecked":Le=qe;break;case"value":L=qe;break;case"defaultValue":de=qe;break;case"children":case"dangerouslySetInnerHTML":if(qe!=null)throw Error(r(137,p));break;default:er(d,p,w,qe,y,null)}}f7(d,L,de,we,Le,ne,P,!1);return;case"select":wn("invalid",d),w=ne=L=null;for(P in y)if(y.hasOwnProperty(P)&&(de=y[P],de!=null))switch(P){case"value":L=de;break;case"defaultValue":ne=de;break;case"multiple":w=de;default:er(d,p,P,de,y,null)}p=L,y=ne,d.multiple=!!w,p!=null?Qm(d,!!w,p,!1):y!=null&&Qm(d,!!w,y,!0);return;case"textarea":wn("invalid",d),L=P=w=null;for(ne in y)if(y.hasOwnProperty(ne)&&(de=y[ne],de!=null))switch(ne){case"value":w=de;break;case"defaultValue":P=de;break;case"children":L=de;break;case"dangerouslySetInnerHTML":if(de!=null)throw Error(r(91));break;default:er(d,p,ne,de,y,null)}p7(d,w,P,L);return;case"option":for(we in y)if(y.hasOwnProperty(we)&&(w=y[we],w!=null))switch(we){case"selected":d.selected=w&&typeof w!="function"&&typeof w!="symbol";break;default:er(d,p,we,w,y,null)}return;case"dialog":wn("beforetoggle",d),wn("toggle",d),wn("cancel",d),wn("close",d);break;case"iframe":case"object":wn("load",d);break;case"video":case"audio":for(w=0;w<Kv.length;w++)wn(Kv[w],d);break;case"image":wn("error",d),wn("load",d);break;case"details":wn("toggle",d);break;case"embed":case"source":case"link":wn("error",d),wn("load",d);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Le in y)if(y.hasOwnProperty(Le)&&(w=y[Le],w!=null))switch(Le){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,p));default:er(d,p,Le,w,y,null)}return;default:if(i_(p)){for(qe in y)y.hasOwnProperty(qe)&&(w=y[qe],w!==void 0&&VI(d,p,qe,w,y,void 0));return}}for(de in y)y.hasOwnProperty(de)&&(w=y[de],w!=null&&er(d,p,de,w,y,null))}function dye(d,p,y,w){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var P=null,L=null,ne=null,de=null,we=null,Le=null,qe=null;for(He in y){var Qe=y[He];if(y.hasOwnProperty(He)&&Qe!=null)switch(He){case"checked":break;case"value":break;case"defaultValue":we=Qe;default:w.hasOwnProperty(He)||er(d,p,He,null,w,Qe)}}for(var Ue in w){var He=w[Ue];if(Qe=y[Ue],w.hasOwnProperty(Ue)&&(He!=null||Qe!=null))switch(Ue){case"type":L=He;break;case"name":P=He;break;case"checked":Le=He;break;case"defaultChecked":qe=He;break;case"value":ne=He;break;case"defaultValue":de=He;break;case"children":case"dangerouslySetInnerHTML":if(He!=null)throw Error(r(137,p));break;default:He!==Qe&&er(d,p,Ue,He,w,Qe)}}n_(d,ne,de,we,Le,qe,L,P);return;case"select":He=ne=de=Ue=null;for(L in y)if(we=y[L],y.hasOwnProperty(L)&&we!=null)switch(L){case"value":break;case"multiple":He=we;default:w.hasOwnProperty(L)||er(d,p,L,null,w,we)}for(P in w)if(L=w[P],we=y[P],w.hasOwnProperty(P)&&(L!=null||we!=null))switch(P){case"value":Ue=L;break;case"defaultValue":de=L;break;case"multiple":ne=L;default:L!==we&&er(d,p,P,L,w,we)}p=de,y=ne,w=He,Ue!=null?Qm(d,!!y,Ue,!1):!!w!=!!y&&(p!=null?Qm(d,!!y,p,!0):Qm(d,!!y,y?[]:"",!1));return;case"textarea":He=Ue=null;for(de in y)if(P=y[de],y.hasOwnProperty(de)&&P!=null&&!w.hasOwnProperty(de))switch(de){case"value":break;case"children":break;default:er(d,p,de,null,w,P)}for(ne in w)if(P=w[ne],L=y[ne],w.hasOwnProperty(ne)&&(P!=null||L!=null))switch(ne){case"value":Ue=P;break;case"defaultValue":He=P;break;case"children":break;case"dangerouslySetInnerHTML":if(P!=null)throw Error(r(91));break;default:P!==L&&er(d,p,ne,P,w,L)}h7(d,Ue,He);return;case"option":for(var Nt in y)if(Ue=y[Nt],y.hasOwnProperty(Nt)&&Ue!=null&&!w.hasOwnProperty(Nt))switch(Nt){case"selected":d.selected=!1;break;default:er(d,p,Nt,null,w,Ue)}for(we in w)if(Ue=w[we],He=y[we],w.hasOwnProperty(we)&&Ue!==He&&(Ue!=null||He!=null))switch(we){case"selected":d.selected=Ue&&typeof Ue!="function"&&typeof Ue!="symbol";break;default:er(d,p,we,Ue,w,He)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Kt in y)Ue=y[Kt],y.hasOwnProperty(Kt)&&Ue!=null&&!w.hasOwnProperty(Kt)&&er(d,p,Kt,null,w,Ue);for(Le in w)if(Ue=w[Le],He=y[Le],w.hasOwnProperty(Le)&&Ue!==He&&(Ue!=null||He!=null))switch(Le){case"children":case"dangerouslySetInnerHTML":if(Ue!=null)throw Error(r(137,p));break;default:er(d,p,Le,Ue,w,He)}return;default:if(i_(p)){for(var tr in y)Ue=y[tr],y.hasOwnProperty(tr)&&Ue!==void 0&&!w.hasOwnProperty(tr)&&VI(d,p,tr,void 0,w,Ue);for(qe in w)Ue=w[qe],He=y[qe],!w.hasOwnProperty(qe)||Ue===He||Ue===void 0&&He===void 0||VI(d,p,qe,Ue,w,He);return}}for(var _e in y)Ue=y[_e],y.hasOwnProperty(_e)&&Ue!=null&&!w.hasOwnProperty(_e)&&er(d,p,_e,null,w,Ue);for(Qe in w)Ue=w[Qe],He=y[Qe],!w.hasOwnProperty(Qe)||Ue===He||Ue==null&&He==null||er(d,p,Qe,Ue,w,He)}function y9(d){switch(d){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function fye(){if(typeof performance.getEntriesByType=="function"){for(var d=0,p=0,y=performance.getEntriesByType("resource"),w=0;w<y.length;w++){var P=y[w],L=P.transferSize,ne=P.initiatorType,de=P.duration;if(L&&de&&y9(ne)){for(ne=0,de=P.responseEnd,w+=1;w<y.length;w++){var we=y[w],Le=we.startTime;if(Le>de)break;var qe=we.transferSize,Qe=we.initiatorType;qe&&y9(Qe)&&(we=we.responseEnd,ne+=qe*(we<de?1:(de-Le)/(we-Le)))}if(--w,p+=8*(L+ne)/(P.duration/1e3),d++,10<d)break}}if(0<d)return p/d/1e6}return navigator.connection&&(d=navigator.connection.downlink,typeof d=="number")?d:5}var qI=null,GI=null;function yS(d){return d.nodeType===9?d:d.ownerDocument}function x9(d){switch(d){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function v9(d,p){if(d===0)switch(p){case"svg":return 1;case"math":return 2;default:return 0}return d===1&&p==="foreignObject"?0:d}function KI(d,p){return d==="textarea"||d==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.children=="bigint"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var WI=null;function hye(){var d=window.event;return d&&d.type==="popstate"?d===WI?!1:(WI=d,!0):(WI=null,!1)}var b9=typeof setTimeout=="function"?setTimeout:void 0,pye=typeof clearTimeout=="function"?clearTimeout:void 0,w9=typeof Promise=="function"?Promise:void 0,mye=typeof queueMicrotask=="function"?queueMicrotask:typeof w9<"u"?function(d){return w9.resolve(null).then(d).catch(gye)}:b9;function gye(d){setTimeout(function(){throw d})}function ef(d){return d==="head"}function E9(d,p){var y=p,w=0;do{var P=y.nextSibling;if(d.removeChild(y),P&&P.nodeType===8)if(y=P.data,y==="/$"||y==="/&"){if(w===0){d.removeChild(P),I0(p);return}w--}else if(y==="$"||y==="$?"||y==="$~"||y==="$!"||y==="&")w++;else if(y==="html")Yv(d.ownerDocument.documentElement);else if(y==="head"){y=d.ownerDocument.head,Yv(y);for(var L=y.firstChild;L;){var ne=L.nextSibling,de=L.nodeName;L[Zo]||de==="SCRIPT"||de==="STYLE"||de==="LINK"&&L.rel.toLowerCase()==="stylesheet"||y.removeChild(L),L=ne}}else y==="body"&&Yv(d.ownerDocument.body);y=P}while(y);I0(p)}function S9(d,p){var y=d;d=0;do{var w=y.nextSibling;if(y.nodeType===1?p?(y._stashedDisplay=y.style.display,y.style.display="none"):(y.style.display=y._stashedDisplay||"",y.getAttribute("style")===""&&y.removeAttribute("style")):y.nodeType===3&&(p?(y._stashedText=y.nodeValue,y.nodeValue=""):y.nodeValue=y._stashedText||""),w&&w.nodeType===8)if(y=w.data,y==="/$"){if(d===0)break;d--}else y!=="$"&&y!=="$?"&&y!=="$~"&&y!=="$!"||d++;y=w}while(y)}function YI(d){var p=d.firstChild;for(p&&p.nodeType===10&&(p=p.nextSibling);p;){var y=p;switch(p=p.nextSibling,y.nodeName){case"HTML":case"HEAD":case"BODY":YI(y),zl(y);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(y.rel.toLowerCase()==="stylesheet")continue}d.removeChild(y)}}function yye(d,p,y,w){for(;d.nodeType===1;){var P=y;if(d.nodeName.toLowerCase()!==p.toLowerCase()){if(!w&&(d.nodeName!=="INPUT"||d.type!=="hidden"))break}else if(w){if(!d[Zo])switch(p){case"meta":if(!d.hasAttribute("itemprop"))break;return d;case"link":if(L=d.getAttribute("rel"),L==="stylesheet"&&d.hasAttribute("data-precedence"))break;if(L!==P.rel||d.getAttribute("href")!==(P.href==null||P.href===""?null:P.href)||d.getAttribute("crossorigin")!==(P.crossOrigin==null?null:P.crossOrigin)||d.getAttribute("title")!==(P.title==null?null:P.title))break;return d;case"style":if(d.hasAttribute("data-precedence"))break;return d;case"script":if(L=d.getAttribute("src"),(L!==(P.src==null?null:P.src)||d.getAttribute("type")!==(P.type==null?null:P.type)||d.getAttribute("crossorigin")!==(P.crossOrigin==null?null:P.crossOrigin))&&L&&d.hasAttribute("async")&&!d.hasAttribute("itemprop"))break;return d;default:return d}}else if(p==="input"&&d.type==="hidden"){var L=P.name==null?null:""+P.name;if(P.type==="hidden"&&d.getAttribute("name")===L)return d}else return d;if(d=ca(d.nextSibling),d===null)break}return null}function xye(d,p,y){if(p==="")return null;for(;d.nodeType!==3;)if((d.nodeType!==1||d.nodeName!=="INPUT"||d.type!=="hidden")&&!y||(d=ca(d.nextSibling),d===null))return null;return d}function A9(d,p){for(;d.nodeType!==8;)if((d.nodeType!==1||d.nodeName!=="INPUT"||d.type!=="hidden")&&!p||(d=ca(d.nextSibling),d===null))return null;return d}function JI(d){return d.data==="$?"||d.data==="$~"}function XI(d){return d.data==="$!"||d.data==="$?"&&d.ownerDocument.readyState!=="loading"}function vye(d,p){var y=d.ownerDocument;if(d.data==="$~")d._reactRetry=p;else if(d.data!=="$?"||y.readyState!=="loading")p();else{var w=function(){p(),y.removeEventListener("DOMContentLoaded",w)};y.addEventListener("DOMContentLoaded",w),d._reactRetry=w}}function ca(d){for(;d!=null;d=d.nextSibling){var p=d.nodeType;if(p===1||p===3)break;if(p===8){if(p=d.data,p==="$"||p==="$!"||p==="$?"||p==="$~"||p==="&"||p==="F!"||p==="F")break;if(p==="/$"||p==="/&")return null}}return d}var QI=null;function T9(d){d=d.nextSibling;for(var p=0;d;){if(d.nodeType===8){var y=d.data;if(y==="/$"||y==="/&"){if(p===0)return ca(d.nextSibling);p--}else y!=="$"&&y!=="$!"&&y!=="$?"&&y!=="$~"&&y!=="&"||p++}d=d.nextSibling}return null}function k9(d){d=d.previousSibling;for(var p=0;d;){if(d.nodeType===8){var y=d.data;if(y==="$"||y==="$!"||y==="$?"||y==="$~"||y==="&"){if(p===0)return d;p--}else y!=="/$"&&y!=="/&"||p++}d=d.previousSibling}return null}function C9(d,p,y){switch(p=yS(y),d){case"html":if(d=p.documentElement,!d)throw Error(r(452));return d;case"head":if(d=p.head,!d)throw Error(r(453));return d;case"body":if(d=p.body,!d)throw Error(r(454));return d;default:throw Error(r(451))}}function Yv(d){for(var p=d.attributes;p.length;)d.removeAttributeNode(p[0]);zl(d)}var ua=new Map,N9=new Set;function xS(d){return typeof d.getRootNode=="function"?d.getRootNode():d.nodeType===9?d:d.ownerDocument}var uu=z.d;z.d={f:bye,r:wye,D:Eye,C:Sye,L:Aye,m:Tye,X:Cye,S:kye,M:Nye};function bye(){var d=uu.f(),p=cS();return d||p}function wye(d){var p=Eo(d);p!==null&&p.tag===5&&p.type==="form"?qU(p):uu.r(d)}var C0=typeof document>"u"?null:document;function _9(d,p,y){var w=C0;if(w&&typeof p=="string"&&p){var P=na(p);P='link[rel="'+d+'"][href="'+P+'"]',typeof y=="string"&&(P+='[crossorigin="'+y+'"]'),N9.has(P)||(N9.add(P),d={rel:d,crossOrigin:y,href:p},w.querySelector(P)===null&&(p=w.createElement("link"),Ki(p,"link",d),xr(p),w.head.appendChild(p)))}}function Eye(d){uu.D(d),_9("dns-prefetch",d,null)}function Sye(d,p){uu.C(d,p),_9("preconnect",d,p)}function Aye(d,p,y){uu.L(d,p,y);var w=C0;if(w&&d&&p){var P='link[rel="preload"][as="'+na(p)+'"]';p==="image"&&y&&y.imageSrcSet?(P+='[imagesrcset="'+na(y.imageSrcSet)+'"]',typeof y.imageSizes=="string"&&(P+='[imagesizes="'+na(y.imageSizes)+'"]')):P+='[href="'+na(d)+'"]';var L=P;switch(p){case"style":L=N0(d);break;case"script":L=_0(d)}ua.has(L)||(d=f({rel:"preload",href:p==="image"&&y&&y.imageSrcSet?void 0:d,as:p},y),ua.set(L,d),w.querySelector(P)!==null||p==="style"&&w.querySelector(Jv(L))||p==="script"&&w.querySelector(Xv(L))||(p=w.createElement("link"),Ki(p,"link",d),xr(p),w.head.appendChild(p)))}}function Tye(d,p){uu.m(d,p);var y=C0;if(y&&d){var w=p&&typeof p.as=="string"?p.as:"script",P='link[rel="modulepreload"][as="'+na(w)+'"][href="'+na(d)+'"]',L=P;switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":L=_0(d)}if(!ua.has(L)&&(d=f({rel:"modulepreload",href:d},p),ua.set(L,d),y.querySelector(P)===null)){switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(y.querySelector(Xv(L)))return}w=y.createElement("link"),Ki(w,"link",d),xr(w),y.head.appendChild(w)}}}function kye(d,p,y){uu.S(d,p,y);var w=C0;if(w&&d){var P=So(w).hoistableStyles,L=N0(d);p=p||"default";var ne=P.get(L);if(!ne){var de={loading:0,preload:null};if(ne=w.querySelector(Jv(L)))de.loading=5;else{d=f({rel:"stylesheet",href:d,"data-precedence":p},y),(y=ua.get(L))&&ZI(d,y);var we=ne=w.createElement("link");xr(we),Ki(we,"link",d),we._p=new Promise(function(Le,qe){we.onload=Le,we.onerror=qe}),we.addEventListener("load",function(){de.loading|=1}),we.addEventListener("error",function(){de.loading|=2}),de.loading|=4,vS(ne,p,w)}ne={type:"stylesheet",instance:ne,count:1,state:de},P.set(L,ne)}}}function Cye(d,p){uu.X(d,p);var y=C0;if(y&&d){var w=So(y).hoistableScripts,P=_0(d),L=w.get(P);L||(L=y.querySelector(Xv(P)),L||(d=f({src:d,async:!0},p),(p=ua.get(P))&&eP(d,p),L=y.createElement("script"),xr(L),Ki(L,"link",d),y.head.appendChild(L)),L={type:"script",instance:L,count:1,state:null},w.set(P,L))}}function Nye(d,p){uu.M(d,p);var y=C0;if(y&&d){var w=So(y).hoistableScripts,P=_0(d),L=w.get(P);L||(L=y.querySelector(Xv(P)),L||(d=f({src:d,async:!0,type:"module"},p),(p=ua.get(P))&&eP(d,p),L=y.createElement("script"),xr(L),Ki(L,"link",d),y.head.appendChild(L)),L={type:"script",instance:L,count:1,state:null},w.set(P,L))}}function I9(d,p,y,w){var P=(P=re.current)?xS(P):null;if(!P)throw Error(r(446));switch(d){case"meta":case"title":return null;case"style":return typeof y.precedence=="string"&&typeof y.href=="string"?(p=N0(y.href),y=So(P).hoistableStyles,w=y.get(p),w||(w={type:"style",instance:null,count:0,state:null},y.set(p,w)),w):{type:"void",instance:null,count:0,state:null};case"link":if(y.rel==="stylesheet"&&typeof y.href=="string"&&typeof y.precedence=="string"){d=N0(y.href);var L=So(P).hoistableStyles,ne=L.get(d);if(ne||(P=P.ownerDocument||P,ne={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},L.set(d,ne),(L=P.querySelector(Jv(d)))&&!L._p&&(ne.instance=L,ne.state.loading=5),ua.has(d)||(y={rel:"preload",as:"style",href:y.href,crossOrigin:y.crossOrigin,integrity:y.integrity,media:y.media,hrefLang:y.hrefLang,referrerPolicy:y.referrerPolicy},ua.set(d,y),L||_ye(P,d,y,ne.state))),p&&w===null)throw Error(r(528,""));return ne}if(p&&w!==null)throw Error(r(529,""));return null;case"script":return p=y.async,y=y.src,typeof y=="string"&&p&&typeof p!="function"&&typeof p!="symbol"?(p=_0(y),y=So(P).hoistableScripts,w=y.get(p),w||(w={type:"script",instance:null,count:0,state:null},y.set(p,w)),w):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,d))}}function N0(d){return'href="'+na(d)+'"'}function Jv(d){return'link[rel="stylesheet"]['+d+"]"}function P9(d){return f({},d,{"data-precedence":d.precedence,precedence:null})}function _ye(d,p,y,w){d.querySelector('link[rel="preload"][as="style"]['+p+"]")?w.loading=1:(p=d.createElement("link"),w.preload=p,p.addEventListener("load",function(){return w.loading|=1}),p.addEventListener("error",function(){return w.loading|=2}),Ki(p,"link",y),xr(p),d.head.appendChild(p))}function _0(d){return'[src="'+na(d)+'"]'}function Xv(d){return"script[async]"+d}function R9(d,p,y){if(p.count++,p.instance===null)switch(p.type){case"style":var w=d.querySelector('style[data-href~="'+na(y.href)+'"]');if(w)return p.instance=w,xr(w),w;var P=f({},y,{"data-href":y.href,"data-precedence":y.precedence,href:null,precedence:null});return w=(d.ownerDocument||d).createElement("style"),xr(w),Ki(w,"style",P),vS(w,y.precedence,d),p.instance=w;case"stylesheet":P=N0(y.href);var L=d.querySelector(Jv(P));if(L)return p.state.loading|=4,p.instance=L,xr(L),L;w=P9(y),(P=ua.get(P))&&ZI(w,P),L=(d.ownerDocument||d).createElement("link"),xr(L);var ne=L;return ne._p=new Promise(function(de,we){ne.onload=de,ne.onerror=we}),Ki(L,"link",w),p.state.loading|=4,vS(L,y.precedence,d),p.instance=L;case"script":return L=_0(y.src),(P=d.querySelector(Xv(L)))?(p.instance=P,xr(P),P):(w=y,(P=ua.get(L))&&(w=f({},y),eP(w,P)),d=d.ownerDocument||d,P=d.createElement("script"),xr(P),Ki(P,"link",w),d.head.appendChild(P),p.instance=P);case"void":return null;default:throw Error(r(443,p.type))}else p.type==="stylesheet"&&(p.state.loading&4)===0&&(w=p.instance,p.state.loading|=4,vS(w,y.precedence,d));return p.instance}function vS(d,p,y){for(var w=y.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),P=w.length?w[w.length-1]:null,L=P,ne=0;ne<w.length;ne++){var de=w[ne];if(de.dataset.precedence===p)L=de;else if(L!==P)break}L?L.parentNode.insertBefore(d,L.nextSibling):(p=y.nodeType===9?y.head:y,p.insertBefore(d,p.firstChild))}function ZI(d,p){d.crossOrigin==null&&(d.crossOrigin=p.crossOrigin),d.referrerPolicy==null&&(d.referrerPolicy=p.referrerPolicy),d.title==null&&(d.title=p.title)}function eP(d,p){d.crossOrigin==null&&(d.crossOrigin=p.crossOrigin),d.referrerPolicy==null&&(d.referrerPolicy=p.referrerPolicy),d.integrity==null&&(d.integrity=p.integrity)}var bS=null;function O9(d,p,y){if(bS===null){var w=new Map,P=bS=new Map;P.set(y,w)}else P=bS,w=P.get(y),w||(w=new Map,P.set(y,w));if(w.has(d))return w;for(w.set(d,null),y=y.getElementsByTagName(d),P=0;P<y.length;P++){var L=y[P];if(!(L[Zo]||L[yt]||d==="link"&&L.getAttribute("rel")==="stylesheet")&&L.namespaceURI!=="http://www.w3.org/2000/svg"){var ne=L.getAttribute(p)||"";ne=d+ne;var de=w.get(ne);de?de.push(L):w.set(ne,[L])}}return w}function M9(d,p,y){d=d.ownerDocument||d,d.head.insertBefore(y,p==="title"?d.querySelector("head > title"):null)}function Iye(d,p,y){if(y===1||p.itemProp!=null)return!1;switch(d){case"meta":case"title":return!0;case"style":if(typeof p.precedence!="string"||typeof p.href!="string"||p.href==="")break;return!0;case"link":if(typeof p.rel!="string"||typeof p.href!="string"||p.href===""||p.onLoad||p.onError)break;switch(p.rel){case"stylesheet":return d=p.disabled,typeof p.precedence=="string"&&d==null;default:return!0}case"script":if(p.async&&typeof p.async!="function"&&typeof p.async!="symbol"&&!p.onLoad&&!p.onError&&p.src&&typeof p.src=="string")return!0}return!1}function D9(d){return!(d.type==="stylesheet"&&(d.state.loading&3)===0)}function Pye(d,p,y,w){if(y.type==="stylesheet"&&(typeof w.media!="string"||matchMedia(w.media).matches!==!1)&&(y.state.loading&4)===0){if(y.instance===null){var P=N0(w.href),L=p.querySelector(Jv(P));if(L){p=L._p,p!==null&&typeof p=="object"&&typeof p.then=="function"&&(d.count++,d=wS.bind(d),p.then(d,d)),y.state.loading|=4,y.instance=L,xr(L);return}L=p.ownerDocument||p,w=P9(w),(P=ua.get(P))&&ZI(w,P),L=L.createElement("link"),xr(L);var ne=L;ne._p=new Promise(function(de,we){ne.onload=de,ne.onerror=we}),Ki(L,"link",w),y.instance=L}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(y,p),(p=y.state.preload)&&(y.state.loading&3)===0&&(d.count++,y=wS.bind(d),p.addEventListener("load",y),p.addEventListener("error",y))}}var tP=0;function Rye(d,p){return d.stylesheets&&d.count===0&&SS(d,d.stylesheets),0<d.count||0<d.imgCount?function(y){var w=setTimeout(function(){if(d.stylesheets&&SS(d,d.stylesheets),d.unsuspend){var L=d.unsuspend;d.unsuspend=null,L()}},6e4+p);0<d.imgBytes&&tP===0&&(tP=62500*fye());var P=setTimeout(function(){if(d.waitingForImages=!1,d.count===0&&(d.stylesheets&&SS(d,d.stylesheets),d.unsuspend)){var L=d.unsuspend;d.unsuspend=null,L()}},(d.imgBytes>tP?50:800)+p);return d.unsuspend=y,function(){d.unsuspend=null,clearTimeout(w),clearTimeout(P)}}:null}function wS(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)SS(this,this.stylesheets);else if(this.unsuspend){var d=this.unsuspend;this.unsuspend=null,d()}}}var ES=null;function SS(d,p){d.stylesheets=null,d.unsuspend!==null&&(d.count++,ES=new Map,p.forEach(Oye,d),ES=null,wS.call(d))}function Oye(d,p){if(!(p.state.loading&4)){var y=ES.get(d);if(y)var w=y.get(null);else{y=new Map,ES.set(d,y);for(var P=d.querySelectorAll("link[data-precedence],style[data-precedence]"),L=0;L<P.length;L++){var ne=P[L];(ne.nodeName==="LINK"||ne.getAttribute("media")!=="not all")&&(y.set(ne.dataset.precedence,ne),w=ne)}w&&y.set(null,w)}P=p.instance,ne=P.getAttribute("data-precedence"),L=y.get(ne)||w,L===w&&y.set(null,P),y.set(ne,P),this.count++,w=wS.bind(this),P.addEventListener("load",w),P.addEventListener("error",w),L?L.parentNode.insertBefore(P,L.nextSibling):(d=d.nodeType===9?d.head:d,d.insertBefore(P,d.firstChild)),p.state.loading|=4}}var Qv={$$typeof:k,Provider:null,Consumer:null,_currentValue:G,_currentValue2:G,_threadCount:0};function Mye(d,p,y,w,P,L,ne,de,we){this.tag=1,this.containerInfo=d,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ae(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ae(0),this.hiddenUpdates=ae(null),this.identifierPrefix=w,this.onUncaughtError=P,this.onCaughtError=L,this.onRecoverableError=ne,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=we,this.incompleteTransitions=new Map}function L9(d,p,y,w,P,L,ne,de,we,Le,qe,Qe){return d=new Mye(d,p,y,ne,we,Le,qe,Qe,de),p=1,L===!0&&(p|=24),L=To(3,null,null,p),d.current=L,L.stateNode=d,p=M_(),p.refCount++,d.pooledCache=p,p.refCount++,L.memoizedState={element:w,isDehydrated:y,cache:p},B_(L),d}function j9(d){return d?(d=o0,d):o0}function B9(d,p,y,w,P,L){P=j9(P),w.context===null?w.context=P:w.pendingContext=P,w=Hd(p),w.payload={element:y},L=L===void 0?null:L,L!==null&&(w.callback=L),y=Vd(d,w,p),y!==null&&(so(y,d,p),Iv(y,d,p))}function U9(d,p){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var y=d.retryLane;d.retryLane=y!==0&&y<p?y:p}}function nP(d,p){U9(d,p),(d=d.alternate)&&U9(d,p)}function F9(d){if(d.tag===13||d.tag===31){var p=_h(d,67108864);p!==null&&so(p,d,67108864),nP(d,67108864)}}function $9(d){if(d.tag===13||d.tag===31){var p=Io();p=ze(p);var y=_h(d,p);y!==null&&so(y,d,p),nP(d,p)}}var AS=!0;function Dye(d,p,y,w){var P=D.T;D.T=null;var L=z.p;try{z.p=2,rP(d,p,y,w)}finally{z.p=L,D.T=P}}function Lye(d,p,y,w){var P=D.T;D.T=null;var L=z.p;try{z.p=8,rP(d,p,y,w)}finally{z.p=L,D.T=P}}function rP(d,p,y,w){if(AS){var P=iP(w);if(P===null)HI(d,p,w,TS,y),H9(d,w);else if(Bye(P,d,p,y,w))w.stopPropagation();else if(H9(d,w),p&4&&-1<jye.indexOf(d)){for(;P!==null;){var L=Eo(P);if(L!==null)switch(L.tag){case 3:if(L=L.stateNode,L.current.memoizedState.isDehydrated){var ne=cn(L.pendingLanes);if(ne!==0){var de=L;for(de.pendingLanes|=2,de.entangledLanes|=2;ne;){var we=1<<31-ye(ne);de.entanglements[1]|=we,ne&=~we}Gl(L),(Hn&6)===0&&(aS=Tt()+500,Gv(0))}}break;case 31:case 13:de=_h(L,2),de!==null&&so(de,L,2),cS(),nP(L,2)}if(L=iP(w),L===null&&HI(d,p,w,TS,y),L===P)break;P=L}P!==null&&w.stopPropagation()}else HI(d,p,w,null,y)}}function iP(d){return d=o_(d),sP(d)}var TS=null;function sP(d){if(TS=null,d=wo(d),d!==null){var p=s(d);if(p===null)d=null;else{var y=p.tag;if(y===13){if(d=o(p),d!==null)return d;d=null}else if(y===31){if(d=a(p),d!==null)return d;d=null}else if(y===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;d=null}else p!==d&&(d=null)}}return TS=d,null}function z9(d){switch(d){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ln()){case Pe:return 2;case Ve:return 8;case ht:case ct:return 32;case se:return 268435456;default:return 32}default:return 32}}var oP=!1,tf=null,nf=null,rf=null,Zv=new Map,eb=new Map,sf=[],jye="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function H9(d,p){switch(d){case"focusin":case"focusout":tf=null;break;case"dragenter":case"dragleave":nf=null;break;case"mouseover":case"mouseout":rf=null;break;case"pointerover":case"pointerout":Zv.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":eb.delete(p.pointerId)}}function tb(d,p,y,w,P,L){return d===null||d.nativeEvent!==L?(d={blockedOn:p,domEventName:y,eventSystemFlags:w,nativeEvent:L,targetContainers:[P]},p!==null&&(p=Eo(p),p!==null&&F9(p)),d):(d.eventSystemFlags|=w,p=d.targetContainers,P!==null&&p.indexOf(P)===-1&&p.push(P),d)}function Bye(d,p,y,w,P){switch(p){case"focusin":return tf=tb(tf,d,p,y,w,P),!0;case"dragenter":return nf=tb(nf,d,p,y,w,P),!0;case"mouseover":return rf=tb(rf,d,p,y,w,P),!0;case"pointerover":var L=P.pointerId;return Zv.set(L,tb(Zv.get(L)||null,d,p,y,w,P)),!0;case"gotpointercapture":return L=P.pointerId,eb.set(L,tb(eb.get(L)||null,d,p,y,w,P)),!0}return!1}function V9(d){var p=wo(d.target);if(p!==null){var y=s(p);if(y!==null){if(p=y.tag,p===13){if(p=o(y),p!==null){d.blockedOn=p,it(d.priority,function(){$9(y)});return}}else if(p===31){if(p=a(y),p!==null){d.blockedOn=p,it(d.priority,function(){$9(y)});return}}else if(p===3&&y.stateNode.current.memoizedState.isDehydrated){d.blockedOn=y.tag===3?y.stateNode.containerInfo:null;return}}}d.blockedOn=null}function kS(d){if(d.blockedOn!==null)return!1;for(var p=d.targetContainers;0<p.length;){var y=iP(d.nativeEvent);if(y===null){y=d.nativeEvent;var w=new y.constructor(y.type,y);s_=w,y.target.dispatchEvent(w),s_=null}else return p=Eo(y),p!==null&&F9(p),d.blockedOn=y,!1;p.shift()}return!0}function q9(d,p,y){kS(d)&&y.delete(p)}function Uye(){oP=!1,tf!==null&&kS(tf)&&(tf=null),nf!==null&&kS(nf)&&(nf=null),rf!==null&&kS(rf)&&(rf=null),Zv.forEach(q9),eb.forEach(q9)}function CS(d,p){d.blockedOn===p&&(d.blockedOn=null,oP||(oP=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Uye)))}var NS=null;function G9(d){NS!==d&&(NS=d,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){NS===d&&(NS=null);for(var p=0;p<d.length;p+=3){var y=d[p],w=d[p+1],P=d[p+2];if(typeof w!="function"){if(sP(w||y)===null)continue;break}var L=Eo(y);L!==null&&(d.splice(p,3),p-=3,iI(L,{pending:!0,data:P,method:y.method,action:w},w,P))}}))}function I0(d){function p(we){return CS(we,d)}tf!==null&&CS(tf,d),nf!==null&&CS(nf,d),rf!==null&&CS(rf,d),Zv.forEach(p),eb.forEach(p);for(var y=0;y<sf.length;y++){var w=sf[y];w.blockedOn===d&&(w.blockedOn=null)}for(;0<sf.length&&(y=sf[0],y.blockedOn===null);)V9(y),y.blockedOn===null&&sf.shift();if(y=(d.ownerDocument||d).$$reactFormReplay,y!=null)for(w=0;w<y.length;w+=3){var P=y[w],L=y[w+1],ne=P[vn]||null;if(typeof L=="function")ne||G9(y);else if(ne){var de=null;if(L&&L.hasAttribute("formAction")){if(P=L,ne=L[vn]||null)de=ne.formAction;else if(sP(P)!==null)continue}else de=ne.action;typeof de=="function"?y[w+1]=de:(y.splice(w,3),w-=3),G9(y)}}}function K9(){function d(L){L.canIntercept&&L.info==="react-transition"&&L.intercept({handler:function(){return new Promise(function(ne){return P=ne})},focusReset:"manual",scroll:"manual"})}function p(){P!==null&&(P(),P=null),w||setTimeout(y,20)}function y(){if(!w&&!navigation.transition){var L=navigation.currentEntry;L&&L.url!=null&&navigation.navigate(L.url,{state:L.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var w=!1,P=null;return navigation.addEventListener("navigate",d),navigation.addEventListener("navigatesuccess",p),navigation.addEventListener("navigateerror",p),setTimeout(y,100),function(){w=!0,navigation.removeEventListener("navigate",d),navigation.removeEventListener("navigatesuccess",p),navigation.removeEventListener("navigateerror",p),P!==null&&(P(),P=null)}}}function aP(d){this._internalRoot=d}_S.prototype.render=aP.prototype.render=function(d){var p=this._internalRoot;if(p===null)throw Error(r(409));var y=p.current,w=Io();B9(y,w,d,p,null,null)},_S.prototype.unmount=aP.prototype.unmount=function(){var d=this._internalRoot;if(d!==null){this._internalRoot=null;var p=d.containerInfo;B9(d.current,2,null,d,null,null),cS(),p[Ya]=null}};function _S(d){this._internalRoot=d}_S.prototype.unstable_scheduleHydration=function(d){if(d){var p=$t();d={blockedOn:null,target:d,priority:p};for(var y=0;y<sf.length&&p!==0&&p<sf[y].priority;y++);sf.splice(y,0,d),y===0&&V9(d)}};var W9=e.version;if(W9!=="19.2.3")throw Error(r(527,W9,"19.2.3"));z.findDOMNode=function(d){var p=d._reactInternals;if(p===void 0)throw typeof d.render=="function"?Error(r(188)):(d=Object.keys(d).join(","),Error(r(268,d)));return d=c(p),d=d!==null?u(d):null,d=d===null?null:d.stateNode,d};var Fye={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var IS=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!IS.isDisabled&&IS.supportsFiber)try{fe=IS.inject(Fye),be=IS}catch{}}return ib.createRoot=function(d,p){if(!i(d))throw Error(r(299));var y=!1,w="",P=tF,L=nF,ne=rF;return p!=null&&(p.unstable_strictMode===!0&&(y=!0),p.identifierPrefix!==void 0&&(w=p.identifierPrefix),p.onUncaughtError!==void 0&&(P=p.onUncaughtError),p.onCaughtError!==void 0&&(L=p.onCaughtError),p.onRecoverableError!==void 0&&(ne=p.onRecoverableError)),p=L9(d,1,!1,null,null,y,w,null,P,L,ne,K9),d[Ya]=p.current,zI(d),new aP(p)},ib.hydrateRoot=function(d,p,y){if(!i(d))throw Error(r(299));var w=!1,P="",L=tF,ne=nF,de=rF,we=null;return y!=null&&(y.unstable_strictMode===!0&&(w=!0),y.identifierPrefix!==void 0&&(P=y.identifierPrefix),y.onUncaughtError!==void 0&&(L=y.onUncaughtError),y.onCaughtError!==void 0&&(ne=y.onCaughtError),y.onRecoverableError!==void 0&&(de=y.onRecoverableError),y.formState!==void 0&&(we=y.formState)),p=L9(d,1,!0,p,y??null,w,P,we,L,ne,de,K9),p.context=j9(null),y=p.current,w=Io(),w=ze(w),P=Hd(w),P.callback=null,Vd(y,P,w),y=w,p.current.lanes=y,Q(p,y),Gl(p),d[Ya]=p.current,zI(d),new _S(p)},ib.version="19.2.3",ib}var s$;function uxe(){if(s$)return fP.exports;s$=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),fP.exports=cxe(),fP.exports}var dxe=uxe();const fxe=us(dxe),hxe="modulepreload",pxe=function(t){return"/"+t},o$={},gl=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let o=function(c){return Promise.all(c.map(u=>Promise.resolve(u).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=o(n.map(c=>{if(c=pxe(c),c in o$)return;o$[c]=!0;const u=c.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const m=document.createElement("link");if(m.rel=u?"stylesheet":hxe,u||(m.as="script"),m.crossOrigin="",m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),u)return new Promise((g,v)=>{m.addEventListener("load",g),m.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};var hc=function(){return hc=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},hc.apply(this,arguments)};function _x(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function mxe(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function gxe(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}const yxe=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class yL extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class xxe extends yL{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class a$ extends yL{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class l$ extends yL{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var $3;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})($3||($3={}));class vxe{constructor(e,{headers:n={},customFetch:r,region:i=$3.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=yxe(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return mxe(this,arguments,void 0,function*(n,r={}){var i;let s,o;try{const{headers:a,method:l,body:c,signal:u,timeout:f}=r;let m={},{region:g}=r;g||(g=this.region);const v=new URL(`${this.url}/${n}`);g&&g!=="any"&&(m["x-region"]=g,v.searchParams.set("forceFunctionRegion",g));let x;c&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",x=c):typeof c=="string"?(m["Content-Type"]="text/plain",x=c):typeof FormData<"u"&&c instanceof FormData?x=c:(m["Content-Type"]="application/json",x=JSON.stringify(c)):x=c;let b=u;f&&(o=new AbortController,s=setTimeout(()=>o.abort(),f),u?(b=o.signal,u.addEventListener("abort",()=>o.abort())):b=o.signal);const E=yield this.fetch(v.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),a),body:x,signal:b}).catch(U=>{throw new xxe(U)}),C=E.headers.get("x-relay-error");if(C&&C==="true")throw new a$(E);if(!E.ok)throw new l$(E);let k=((i=E.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),O;return k==="application/json"?O=yield E.json():k==="application/octet-stream"||k==="application/pdf"?O=yield E.blob():k==="text/event-stream"?O=E:k==="multipart/form-data"?O=yield E.formData():O=yield E.text(),{data:O,error:null,response:E}}catch(a){return{data:null,error:a,response:a instanceof l$||a instanceof a$?a.context:void 0}}finally{s&&clearTimeout(s)}})}}var bxe=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},wxe=class{constructor(t){var e,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{let o=null,a=null,l=null,c=s.status,u=s.statusText;if(s.ok){var f,m;if(n.method!=="HEAD"){var g;const E=await s.text();E===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((g=n.headers.get("Accept"))===null||g===void 0)&&g.includes("application/vnd.pgrst.plan+text"))?a=E:a=JSON.parse(E))}const x=(f=n.headers.get("Prefer"))===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),b=(m=s.headers.get("content-range"))===null||m===void 0?void 0:m.split("/");x&&b&&b.length>1&&(l=parseInt(b[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(a)&&(a.length>1?(o={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,l=null,c=406,u="Not Acceptable"):a.length===1?a=a[0]:a=null)}else{var v;const x=await s.text();try{o=JSON.parse(x),Array.isArray(o)&&s.status===404&&(a=[],o=null,c=200,u="OK")}catch{s.status===404&&x===""?(c=204,u="No Content"):o={message:x}}if(o&&n.isMaybeSingle&&(!(o==null||(v=o.details)===null||v===void 0)&&v.includes("0 rows"))&&(o=null,c=200,u="OK"),o&&n.shouldThrowOnError)throw new bxe(o)}return{error:o,data:a,count:l,status:c,statusText:u}});return this.shouldThrowOnError||(i=i.catch(s=>{var o;let a="";const l=s==null?void 0:s.cause;if(l){var c,u,f,m;const v=(c=l==null?void 0:l.message)!==null&&c!==void 0?c:"",x=(u=l==null?void 0:l.code)!==null&&u!==void 0?u:"";a=`${(f=s==null?void 0:s.name)!==null&&f!==void 0?f:"FetchError"}: ${s==null?void 0:s.message}`,a+=`

Caused by: ${(m=l==null?void 0:l.name)!==null&&m!==void 0?m:"Error"}: ${v}`,x&&(a+=` (${x})`),l!=null&&l.stack&&(a+=`
${l.stack}`)}else{var g;a=(g=s==null?void 0:s.stack)!==null&&g!==void 0?g:""}return{error:{message:`${(o=s==null?void 0:s.name)!==null&&o!==void 0?o:"FetchError"}: ${s==null?void 0:s.message}`,details:a,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),i.then(t,e)}returns(){return this}overrideTypes(){return this}},Exe=class extends wxe{select(t){let e=!1;const n=(t??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){const s=i?`${i}.order`:"order",o=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${o?`${o},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"offset":`${r}.offset`,s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(s,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:s="text"}={}){var o;const a=[t?"analyze":null,e?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${s}; for="${l}"; options=${a};`),s==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const c$=new RegExp("[,()]");var ag=class extends Exe{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&c$.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}notIn(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&c$.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`not.in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const s=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${s}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}},Sxe=class{constructor(t,{headers:e={},schema:n,fetch:r}){this.url=t,this.headers=new Headers(e),this.schema=n,this.fetch=r}select(t,e){const{head:n=!1,count:r}=e??{},i=n?"HEAD":"GET";let s=!1;const o=(t??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),r&&this.headers.append("Prefer",`count=${r}`),new ag({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:n=!0}={}){var r;const i="POST";if(e&&this.headers.append("Prefer",`count=${e}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const s=t.reduce((o,a)=>o.concat(Object.keys(a)),[]);if(s.length>0){const o=[...new Set(s)].map(a=>`"${a}"`);this.url.searchParams.set("columns",o.join(","))}}return new ag({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}={}){var s;const o="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&this.url.searchParams.set("on_conflict",e),r&&this.headers.append("Prefer",`count=${r}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const a=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new ag({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}update(t,{count:e}={}){var n;const r="PATCH";return e&&this.headers.append("Prefer",`count=${e}`),new ag({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var e;const n="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new ag({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},Axe=class gee{constructor(e,{headers:n={},schema:r,fetch:i}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=i}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Sxe(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new gee(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:i=!1,count:s}={}){var o;let a;const l=new URL(`${this.url}/rpc/${e}`);let c;r||i?(a=r?"HEAD":"GET",Object.entries(n).filter(([f,m])=>m!==void 0).map(([f,m])=>[f,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([f,m])=>{l.searchParams.append(f,m)})):(a="POST",c=n);const u=new Headers(this.headers);return s&&u.set("Prefer",`count=${s}`),new ag({method:a,url:l,headers:u,schema:this.schemaName,body:c,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class Txe{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof Al<"u"){const n=Al.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const kxe="2.89.0",Cxe=`realtime-js/${kxe}`,yee="1.0.0",Nxe="2.0.0",u$=yee,z3=1e4,_xe=1e3,Ixe=100;var Af;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Af||(Af={}));var bi;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(bi||(bi={}));var ml;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(ml||(ml={}));var H3;(function(t){t.websocket="websocket"})(H3||(H3={}));var op;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(op||(op={}));class Pxe{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},o=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(e,n,r){var i,s;const o=e.topic,a=(i=e.ref)!==null&&i!==void 0?i:"",l=(s=e.join_ref)!==null&&s!==void 0?s:"",c=e.payload.event,u=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},f=Object.keys(u).length===0?"":JSON.stringify(u);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`userEvent length ${c.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`metadata length ${f.length} exceeds maximum of 255`);const m=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+a.length+o.length+c.length+f.length,g=new ArrayBuffer(this.HEADER_LENGTH+m);let v=new DataView(g),x=0;v.setUint8(x++,this.KINDS.userBroadcastPush),v.setUint8(x++,l.length),v.setUint8(x++,a.length),v.setUint8(x++,o.length),v.setUint8(x++,c.length),v.setUint8(x++,f.length),v.setUint8(x++,n),Array.from(l,E=>v.setUint8(x++,E.charCodeAt(0))),Array.from(a,E=>v.setUint8(x++,E.charCodeAt(0))),Array.from(o,E=>v.setUint8(x++,E.charCodeAt(0))),Array.from(c,E=>v.setUint8(x++,E.charCodeAt(0))),Array.from(f,E=>v.setUint8(x++,E.charCodeAt(0)));var b=new Uint8Array(g.byteLength+r.byteLength);return b.set(new Uint8Array(g),0),b.set(new Uint8Array(r),g.byteLength),b.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[i,s,o,a,l]=r;return n({join_ref:i,ref:s,topic:o,event:a,payload:l})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),i=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,i)}}_decodeUserBroadcast(e,n,r){const i=n.getUint8(1),s=n.getUint8(2),o=n.getUint8(3),a=n.getUint8(4);let l=this.HEADER_LENGTH+4;const c=r.decode(e.slice(l,l+i));l=l+i;const u=r.decode(e.slice(l,l+s));l=l+s;const f=r.decode(e.slice(l,l+o));l=l+o;const m=e.slice(l,e.byteLength),g=a===this.JSON_ENCODING?JSON.parse(r.decode(m)):m,v={type:this.BROADCAST_EVENT,event:u,payload:g};return o>0&&(v.meta=JSON.parse(f)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST_EVENT,payload:v}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>n.includes(r)))}}class xee{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var fr;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(fr||(fr={}));const d$=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((s,o)=>(s[o]=Rxe(o,t,e,i),s),{}):{}},Rxe=(t,e,n,r)=>{const i=e.find(a=>a.name===t),s=i==null?void 0:i.type,o=n[t];return s&&!r.includes(s)?vee(s,o):V3(o)},vee=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return Lxe(e,n)}switch(t){case fr.bool:return Oxe(e);case fr.float4:case fr.float8:case fr.int2:case fr.int4:case fr.int8:case fr.numeric:case fr.oid:return Mxe(e);case fr.json:case fr.jsonb:return Dxe(e);case fr.timestamp:return jxe(e);case fr.abstime:case fr.date:case fr.daterange:case fr.int4range:case fr.int8range:case fr.money:case fr.reltime:case fr.text:case fr.time:case fr.timestamptz:case fr.timetz:case fr.tsrange:case fr.tstzrange:return V3(e);default:return V3(e)}},V3=t=>t,Oxe=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Mxe=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Dxe=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},Lxe=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let s;const o=t.slice(1,n);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>vee(e,a))}return t},jxe=t=>typeof t=="string"?t.replace(" ","T"):t,bee=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class gP{constructor(e,n,r={},i=z3){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var f$;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(f$||(f$={}));class qb{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=qb.syncState(this.state,i,s,o),this.pendingDiffs.forEach(l=>{this.state=qb.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=qb.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const s=this.cloneDeep(e),o=this.transformState(n),a={},l={};return this.map(s,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const f=s[c];if(f){const m=u.map(b=>b.presence_ref),g=f.map(b=>b.presence_ref),v=u.filter(b=>g.indexOf(b.presence_ref)<0),x=f.filter(b=>m.indexOf(b.presence_ref)<0);v.length>0&&(a[c]=v),x.length>0&&(l[c]=x)}else a[c]=u}),this.syncDiff(s,{joins:a,leaves:l},r,i)}static syncDiff(e,n,r,i){const{joins:s,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(a,l)=>{var c;const u=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),u.length>0){const f=e[a].map(g=>g.presence_ref),m=u.filter(g=>f.indexOf(g.presence_ref)<0);e[a].unshift(...m)}r(a,u,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const u=l.map(f=>f.presence_ref);c=c.filter(f=>u.indexOf(f.presence_ref)<0),e[a]=c,i(a,c,l),c.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var h$;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(h$||(h$={}));var Gb;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Gb||(Gb={}));var bu;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(bu||(bu={}));class yg{constructor(e,n={config:{}},r){var i,s;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=bi.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new gP(this,ml.join,this.params,this.timeout),this.rejoinTimer=new xee(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=bi.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=bi.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=bi.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=bi.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=bi.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ml.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new qb(this),this.broadcastEndpointURL=bee(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==bi.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,c=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(g=>g.filter))!==null&&i!==void 0?i:[],u=!!this.bindings[Gb.PRESENCE]&&this.bindings[Gb.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,f={},m={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(g=>e==null?void 0:e(bu.CHANNEL_ERROR,g)),this._onClose(()=>e==null?void 0:e(bu.CLOSED)),this.updateJoinPayload(Object.assign({config:m},f)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:g})=>{var v;if(this.socket._isManualToken()||this.socket.setAuth(),g===void 0){e==null||e(bu.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,b=(v=x==null?void 0:x.length)!==null&&v!==void 0?v:0,E=[];for(let C=0;C<b;C++){const k=x[C],{filter:{event:O,schema:U,table:R,filter:$}}=k,V=g&&g[C];if(V&&V.event===O&&yg.isFilterValueEqual(V.schema,U)&&yg.isFilterValueEqual(V.table,R)&&yg.isFilterValueEqual(V.filter,$))E.push(Object.assign(Object.assign({},k),{id:V.id}));else{this.unsubscribe(),this.state=bi.errored,e==null||e(bu.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=E,e&&e(bu.SUBSCRIBED);return}}).receive("error",g=>{this.state=bi.errored,e==null||e(bu.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(bu.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===bi.joined&&e===Gb.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var i;if(n==null)return Promise.reject("Payload is required for httpSend()");const s={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(s.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:s,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const c=await a.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:o}=e,a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,l;const c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),c.receive("ok",()=>s("ok")),c.receive("error",()=>s("error")),c.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=bi.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ml.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new gP(this,ml.leave,{},e),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=bi.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new gP(this,e,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Ixe){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,s;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=ml;if(r&&[a,l,c,u].indexOf(o)>=0&&r!==this._joinRef())return;let m=this._onMessage(o,n,r);if(n&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(g=>{var v,x,b;return((v=g.filter)===null||v===void 0?void 0:v.event)==="*"||((b=(x=g.filter)===null||x===void 0?void 0:x.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(g=>g.callback(m,r)):(s=this.bindings[o])===null||s===void 0||s.filter(g=>{var v,x,b,E,C,k;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in g){const O=g.id,U=(v=g.filter)===null||v===void 0?void 0:v.event;return O&&((x=n.ids)===null||x===void 0?void 0:x.includes(O))&&(U==="*"||(U==null?void 0:U.toLocaleLowerCase())===((b=n.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const O=(C=(E=g==null?void 0:g.filter)===null||E===void 0?void 0:E.event)===null||C===void 0?void 0:C.toLocaleLowerCase();return O==="*"||O===((k=n==null?void 0:n.event)===null||k===void 0?void 0:k.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===o}).map(g=>{if(typeof m=="object"&&"ids"in m){const v=m.data,{schema:x,table:b,commit_timestamp:E,type:C,errors:k}=v;m=Object.assign(Object.assign({},{schema:x,table:b,commit_timestamp:E,eventType:C,new:{},old:{},errors:k}),this._getPayloadRecords(v))}g.callback(m,r)})}_isClosed(){return this.state===bi.closed}_isJoined(){return this.state===bi.joined}_isJoining(){return this.state===bi.joining}_isLeaving(){return this.state===bi.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&yg.isEqual(i.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ml.close,{},e)}_onError(e){this._on(ml.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=bi.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=d$(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=d$(e.columns,e.old_record)),n}}const yP=()=>{},PS={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Bxe=[1e3,2e3,5e3,1e4],Uxe=1e4,Fxe=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class $xe{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=z3,this.transport=null,this.heartbeatIntervalMs=PS.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=yP,this.ref=0,this.reconnectTimer=null,this.vsn=u$,this.logger=yP,this.conn=null,this.sendBuffer=[],this.serializer=new Pxe,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...s)=>i(...s):(...s)=>fetch(...s),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${H3.websocket}`,this.httpEndpoint=bee(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Txe.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Af.connecting:return op.Connecting;case Af.open:return op.Open;case Af.closing:return op.Closing;default:return op.Closed}}isConnected(){return this.connectionState()===op.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new yg(`realtime:${e}`,n,this);return this.channels.push(s),s}}push(e){const{topic:n,event:r,payload:i,ref:s}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(_xe,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},PS.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:s,ref:o}=n,a=o?`(${o})`:"",l=s.status||"";this.log("receive",`${l} ${r} ${i} ${a}`.trim(),s),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(i,s,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===Af.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Af.open||this.conn.readyState===Af.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(ml.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([Fxe],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,r=!1;if(e)n=e,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const s={access_token:n,version:Cxe};n&&i.updateJoinPayload(s),i.joinedOnce&&i._isJoined()&&i._push(ml.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new xee(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},PS.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,i,s,o,a,l,c,u,f,m,g;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:z3,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:PS.HEARTBEAT_INTERVAL,this.worker=(s=e==null?void 0:e.worker)!==null&&s!==void 0?s:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:yP,this.vsn=(l=e==null?void 0:e.vsn)!==null&&l!==void 0?l:u$,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:(v=>Bxe[v-1]||Uxe),this.vsn){case yee:this.encode=(u=e==null?void 0:e.encode)!==null&&u!==void 0?u:((v,x)=>x(JSON.stringify(v))),this.decode=(f=e==null?void 0:e.decode)!==null&&f!==void 0?f:((v,x)=>x(JSON.parse(v)));break;case Nxe:this.encode=(m=e==null?void 0:e.encode)!==null&&m!==void 0?m:this.serializer.encode.bind(this.serializer),this.decode=(g=e==null?void 0:e.decode)!==null&&g!==void 0?g:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var ow=class extends Error{constructor(t,e){var n;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((n=e.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function zxe(t,e,n){const r=new URL(e,t);if(n)for(const[i,s]of Object.entries(n))s!==void 0&&r.searchParams.set(i,s);return r.toString()}async function Hxe(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function Vxe(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:i,body:s,headers:o}){const a=zxe(t.baseUrl,r,i),l=await Hxe(t.auth),c=await e(a,{method:n,headers:{...s?{"Content-Type":"application/json"}:{},...l,...o},body:s?JSON.stringify(s):void 0}),u=await c.text(),f=(c.headers.get("content-type")||"").includes("application/json"),m=f&&u?JSON.parse(u):u;if(!c.ok){const g=f?m:void 0,v=g==null?void 0:g.error;throw new ow((v==null?void 0:v.message)??`Request failed with status ${c.status}`,{status:c.status,icebergType:v==null?void 0:v.type,icebergCode:v==null?void 0:v.code,details:g})}return{status:c.status,headers:c.headers,data:m}}}}function RS(t){return t.join("")}var qxe=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:RS(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${RS(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${RS(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${RS(t.namespace)}`}),!0}catch(e){if(e instanceof ow&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof ow&&n.status===409)return;throw n}}};function R0(t){return t.join("")}var Gxe=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${R0(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${R0(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${R0(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${R0(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${R0(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${R0(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof ow&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof ow&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},Kxe=class{constructor(t){var r;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=Vxe({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(r=t.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new qxe(this.client,e),this.tableOps=new Gxe(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},WC=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function Rr(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var Wxe=class extends WC{constructor(t,e,n){super(t),this.name="StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},q3=class extends WC{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};const xL=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Yxe=()=>Response,G3=t=>{if(Array.isArray(t))return t.map(n=>G3(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=G3(r)}),e},Jxe=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Xxe=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function aw(t){"@babel/helpers - typeof";return aw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},aw(t)}function Qxe(t,e){if(aw(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(aw(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Zxe(t){var e=Qxe(t,"string");return aw(e)=="symbol"?e:e+""}function eve(t,e,n){return(e=Zxe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Yt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?p$(Object(n),!0).forEach(function(r){eve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const xP=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},tve=async(t,e,n)=>{t instanceof await Yxe()&&!(n!=null&&n.noResolveJson)?t.json().then(r=>{const i=t.status||500,s=(r==null?void 0:r.statusCode)||i+"";e(new Wxe(xP(r),i,s))}).catch(r=>{e(new q3(xP(r),r))}):e(new q3(xP(t),t))},nve=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?i:(Jxe(r)?(i.headers=Yt({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,e!=null&&e.duplex&&(i.duplex=e.duplex),Yt(Yt({},i),n))};async function E1(t,e,n,r,i,s){return new Promise((o,a)=>{t(n,nve(e,r,i,s)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>tve(l,a,r))})}async function lw(t,e,n,r){return E1(t,"GET",e,n,r)}async function ol(t,e,n,r,i){return E1(t,"POST",e,r,i,n)}async function K3(t,e,n,r,i){return E1(t,"PUT",e,r,i,n)}async function rve(t,e,n,r){return E1(t,"HEAD",e,Yt(Yt({},n),{},{noResolveJson:!0}),r)}async function vL(t,e,n,r,i){return E1(t,"DELETE",e,r,i,n)}var ive=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Rr(e))return{data:null,error:e};throw e}}};let wee;wee=Symbol.toStringTag;var sve=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[wee]="BlobDownloadBuilder",this.promise=null}asStream(){return new ive(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Rr(e))return{data:null,error:e};throw e}}};const ove={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},m$={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var ave=class{constructor(t,e={},n,r){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=n,this.fetch=xL(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(t,e,n,r){var i=this;try{let s;const o=Yt(Yt({},m$),r);let a=Yt(Yt({},i.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",i.encodeMetadata(l)),s.append("",n)):typeof FormData<"u"&&n instanceof FormData?(s=n,s.has("cacheControl")||s.append("cacheControl",o.cacheControl),l&&!s.has("metadata")&&s.append("metadata",i.encodeMetadata(l))):(s=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=i.toBase64(i.encodeMetadata(l))),(typeof ReadableStream<"u"&&s instanceof ReadableStream||s&&typeof s=="object"&&"pipe"in s&&typeof s.pipe=="function")&&!o.duplex&&(o.duplex="half")),r!=null&&r.headers&&(a=Yt(Yt({},a),r.headers));const c=i._removeEmptyFolders(e),u=i._getFinalPath(c),f=await(t=="PUT"?K3:ol)(i.fetch,`${i.url}/object/${u}`,s,Yt({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:f.Id,fullPath:f.Key},error:null}}catch(s){if(i.shouldThrowOnError)throw s;if(Rr(s))return{data:null,error:s};throw s}}async upload(t,e,n){return this.uploadOrUpdate("POST",t,e,n)}async uploadToSignedUrl(t,e,n,r){var i=this;const s=i._removeEmptyFolders(t),o=i._getFinalPath(s),a=new URL(i.url+`/object/upload/sign/${o}`);a.searchParams.set("token",e);try{let l;const c=Yt({upsert:m$.upsert},r),u=Yt(Yt({},i.headers),{"x-upsert":String(c.upsert)});return typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType),{data:{path:s,fullPath:(await K3(i.fetch,a.toString(),l,{headers:u})).Key},error:null}}catch(l){if(i.shouldThrowOnError)throw l;if(Rr(l))return{data:null,error:l};throw l}}async createSignedUploadUrl(t,e){var n=this;try{let r=n._getFinalPath(t);const i=Yt({},n.headers);e!=null&&e.upsert&&(i["x-upsert"]="true");const s=await ol(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(n.url+s.url),a=o.searchParams.get("token");if(!a)throw new WC("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:a},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Rr(r))return{data:null,error:r};throw r}}async update(t,e,n){return this.uploadOrUpdate("PUT",t,e,n)}async move(t,e,n){var r=this;try{return{data:await ol(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers}),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Rr(i))return{data:null,error:i};throw i}}async copy(t,e,n){var r=this;try{return{data:{path:(await ol(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers})).Key},error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Rr(i))return{data:null,error:i};throw i}}async createSignedUrl(t,e,n){var r=this;try{let i=r._getFinalPath(t),s=await ol(r.fetch,`${r.url}/object/sign/${i}`,Yt({expiresIn:e},n!=null&&n.transform?{transform:n.transform}:{}),{headers:r.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return s={signedUrl:encodeURI(`${r.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Rr(i))return{data:null,error:i};throw i}}async createSignedUrls(t,e,n){var r=this;try{const i=await ol(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:e,paths:t},{headers:r.headers}),s=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(o=>Yt(Yt({},o),{},{signedUrl:o.signedURL?encodeURI(`${r.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Rr(i))return{data:null,error:i};throw i}}download(t,e){const n=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),i=r?`?${r}`:"",s=this._getFinalPath(t),o=()=>lw(this.fetch,`${this.url}/${n}/${s}${i}`,{headers:this.headers,noResolveJson:!0});return new sve(o,this.shouldThrowOnError)}async info(t){var e=this;const n=e._getFinalPath(t);try{return{data:G3(await lw(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Rr(r))return{data:null,error:r};throw r}}async exists(t){var e=this;const n=e._getFinalPath(t);try{return await rve(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Rr(r)&&r instanceof q3){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}}getPublicUrl(t,e){const n=this._getFinalPath(t),r=[],i=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";i!==""&&r.push(i);const s=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});o!==""&&r.push(o);let a=r.join("&");return a!==""&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${n}${a}`)}}}async remove(t){var e=this;try{return{data:await vL(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Rr(n))return{data:null,error:n};throw n}}async list(t,e,n){var r=this;try{const i=Yt(Yt(Yt({},ove),e),{},{prefix:t||""});return{data:await ol(r.fetch,`${r.url}/object/list/${r.bucketId}`,i,{headers:r.headers},n),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Rr(i))return{data:null,error:i};throw i}}async listV2(t,e){var n=this;try{const r=Yt({},t);return{data:await ol(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},e),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Rr(r))return{data:null,error:r};throw r}}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof on<"u"?on.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const Eee="2.89.0",See={"X-Client-Info":`storage-js/${Eee}`};var lve=class{constructor(t,e={},n,r){this.shouldThrowOnError=!1;const i=new URL(t);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Yt(Yt({},See),e),this.fetch=xL(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(t){var e=this;try{const n=e.listBucketOptionsToQueryString(t);return{data:await lw(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Rr(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await lw(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Rr(n))return{data:null,error:n};throw n}}async createBucket(t,e={public:!1}){var n=this;try{return{data:await ol(n.fetch,`${n.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Rr(r))return{data:null,error:r};throw r}}async updateBucket(t,e){var n=this;try{return{data:await K3(n.fetch,`${n.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Rr(r))return{data:null,error:r};throw r}}async emptyBucket(t){var e=this;try{return{data:await ol(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Rr(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await vL(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Rr(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},cve=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Yt(Yt({},See),e),this.fetch=xL(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await ol(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Rr(n))return{data:null,error:n};throw n}}async listBuckets(t){var e=this;try{const n=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&n.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&n.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&n.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&n.set("sortOrder",t.sortOrder),t!=null&&t.search&&n.set("search",t.search);const r=n.toString(),i=r?`${e.url}/bucket?${r}`:`${e.url}/bucket`;return{data:await lw(e.fetch,i,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Rr(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await vL(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Rr(n))return{data:null,error:n};throw n}}from(t){var e=this;if(!Xxe(t))throw new WC("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new Kxe({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(i,s){const o=i[s];return typeof o!="function"?o:async(...a)=>{try{return{data:await o.apply(i,a),error:null}}catch(l){if(r)throw l;return{data:null,error:l}}}}})}};const bL={"X-Client-Info":`storage-js/${Eee}`,"Content-Type":"application/json"};var Aee=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Vo(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}var vP=class extends Aee{constructor(t,e,n){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},uve=class extends Aee{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};const wL=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),dve=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},g$=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),fve=async(t,e,n)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const r=t.status||500,i=t;if(typeof i.json=="function")i.json().then(s=>{const o=(s==null?void 0:s.statusCode)||(s==null?void 0:s.code)||r+"";e(new vP(g$(s),r,o))}).catch(()=>{const s=r+"";e(new vP(i.statusText||`HTTP ${r} error`,r,s))});else{const s=r+"";e(new vP(i.statusText||`HTTP ${r} error`,r,s))}}else e(new uve(g$(t),t))},hve=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return r?(dve(r)?(i.headers=Yt({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,Yt(Yt({},i),n)):i};async function pve(t,e,n,r,i,s){return new Promise((o,a)=>{t(n,hve(e,r,i,s)).then(l=>{if(!l.ok)throw l;if(r!=null&&r.noResolveJson)return l;const c=l.headers.get("content-type");return!c||!c.includes("application/json")?{}:l.json()}).then(l=>o(l)).catch(l=>fve(l,a,r))})}async function qo(t,e,n,r,i){return pve(t,"POST",e,r,i,n)}var mve=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Yt(Yt({},bL),e),this.fetch=wL(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(t){var e=this;try{return{data:await qo(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Vo(n))return{data:null,error:n};throw n}}async getIndex(t,e){var n=this;try{return{data:await qo(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Vo(r))return{data:null,error:r};throw r}}async listIndexes(t){var e=this;try{return{data:await qo(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Vo(n))return{data:null,error:n};throw n}}async deleteIndex(t,e){var n=this;try{return{data:await qo(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Vo(r))return{data:null,error:r};throw r}}},gve=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Yt(Yt({},bL),e),this.fetch=wL(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(t){var e=this;try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await qo(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Vo(n))return{data:null,error:n};throw n}}async getVectors(t){var e=this;try{return{data:await qo(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Vo(n))return{data:null,error:n};throw n}}async listVectors(t){var e=this;try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:await qo(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Vo(n))return{data:null,error:n};throw n}}async queryVectors(t){var e=this;try{return{data:await qo(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Vo(n))return{data:null,error:n};throw n}}async deleteVectors(t){var e=this;try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await qo(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Vo(n))return{data:null,error:n};throw n}}},yve=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Yt(Yt({},bL),e),this.fetch=wL(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await qo(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Vo(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await qo(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Vo(n))return{data:null,error:n};throw n}}async listBuckets(t={}){var e=this;try{return{data:await qo(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Vo(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await qo(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Vo(n))return{data:null,error:n};throw n}}},xve=class extends yve{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new vve(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,n=this;return e().call(n,t)}async getBucket(t){var e=()=>super.getBucket,n=this;return e().call(n,t)}async listBuckets(t={}){var e=()=>super.listBuckets,n=this;return e().call(n,t)}async deleteBucket(t){var e=()=>super.deleteBucket,n=this;return e().call(n,t)}},vve=class extends mve{constructor(t,e,n,r){super(t,e,r),this.vectorBucketName=n}async createIndex(t){var e=()=>super.createIndex,n=this;return e().call(n,Yt(Yt({},t),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,n=this;return e().call(n,Yt(Yt({},t),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,t)}index(t){return new bve(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},bve=class extends gve{constructor(t,e,n,r,i){super(t,e,i),this.vectorBucketName=n,this.indexName=r}async putVectors(t){var e=()=>super.putVectors,n=this;return e().call(n,Yt(Yt({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(t){var e=()=>super.getVectors,n=this;return e().call(n,Yt(Yt({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,n=this;return e().call(n,Yt(Yt({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,n=this;return e().call(n,Yt(Yt({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,n=this;return e().call(n,Yt(Yt({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},wve=class extends lve{constructor(t,e={},n,r){super(t,e,n,r)}from(t){return new ave(this.url,this.headers,t,this.fetch)}get vectors(){return new xve(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new cve(this.url+"/iceberg",this.headers,this.fetch)}};const Tee="2.89.0",lg=30*1e3,W3=3,bP=W3*lg,Eve="http://localhost:9999",Sve="supabase.auth.token",Ave={"X-Client-Info":`gotrue-js/${Tee}`},Y3="X-Supabase-Api-Version",kee={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Tve=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,kve=600*1e3;class cw extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Lt(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Cve extends cw{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function Nve(t){return Lt(t)&&t.name==="AuthApiError"}class ap extends cw{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Sd extends cw{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class Po extends Sd{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function _ve(t){return Lt(t)&&t.name==="AuthSessionMissingError"}class O0 extends Sd{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class OS extends Sd{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class MS extends Sd{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Ive(t){return Lt(t)&&t.name==="AuthImplicitGrantRedirectError"}class y$ extends Sd{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Pve extends Sd{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class J3 extends Sd{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function wP(t){return Lt(t)&&t.name==="AuthRetryableFetchError"}class x$ extends Sd{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class X3 extends Sd{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const IT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),v$=` 	
\r=`.split(""),Rve=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<v$.length;e+=1)t[v$[e].charCodeAt(0)]=-2;for(let e=0;e<IT.length;e+=1)t[IT[e].charCodeAt(0)]=e;return t})();function b$(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(IT[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(IT[r]),e.queuedBits-=6}}function Cee(t,e,n){const r=Rve[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function w$(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=o=>{Dve(o,r,n)};for(let o=0;o<t.length;o+=1)Cee(t.charCodeAt(o),i,s);return e.join("")}function Ove(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Mve(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}Ove(r,e)}}function Dve(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if((t>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Bg(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)Cee(t.charCodeAt(i),n,r);return new Uint8Array(e)}function Lve(t){const e=[];return Mve(t,n=>e.push(n)),new Uint8Array(e)}function pp(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>b$(i,n,r)),b$(null,n,r),e.join("")}function jve(t){return Math.round(Date.now()/1e3)+t}function Bve(){return Symbol("auth-callback")}const Xi=()=>typeof window<"u"&&typeof document<"u",zh={tested:!1,writable:!1},Nee=()=>{if(!Xi())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(zh.tested)return zh.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),zh.tested=!0,zh.writable=!0}catch{zh.tested=!0,zh.writable=!1}return zh.writable};function Uve(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const _ee=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Fve=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",cg=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Hh=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Wi=async(t,e)=>{await t.removeItem(e)};class YC{constructor(){this.promise=new YC.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}YC.promiseConstructor=Promise;function EP(t){const e=t.split(".");if(e.length!==3)throw new X3("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!Tve.test(e[r]))throw new X3("JWT not in base64url format");return{header:JSON.parse(w$(e[0])),payload:JSON.parse(w$(e[1])),signature:Bg(e[2]),raw:{header:e[0],payload:e[1]}}}async function $ve(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function zve(t,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await t(s);if(!e(s,null,o)){r(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function Hve(t){return("0"+t.toString(16)).substr(-2)}function Vve(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,Hve).join("")}async function qve(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function Gve(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await qve(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function M0(t,e,n=!1){const r=Vve();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await cg(t,`${e}-code-verifier`,i);const s=await Gve(r);return[s,r===s?"plain":"s256"]}const Kve=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Wve(t){const e=t.headers.get(Y3);if(!e||!e.match(Kve))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Yve(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Jve(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Xve=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function D0(t){if(!Xve.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function SP(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Qve(t,e){return new Proxy(t,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)"||s==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,i)}})}function E$(t){return JSON.parse(JSON.stringify(t))}const Xh=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Zve=[502,503,504];async function S$(t){var e;if(!Fve(t))throw new J3(Xh(t),0);if(Zve.includes(t.status))throw new J3(Xh(t),t.status);let n;try{n=await t.json()}catch(s){throw new ap(Xh(s),s)}let r;const i=Wve(t);if(i&&i.getTime()>=kee["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new x$(Xh(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Po}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new x$(Xh(n),t.status,n.weak_password.reasons);throw new Cve(Xh(n),t.status||500,r)}const ebe=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function Wt(t,e,n,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[Y3]||(s[Y3]=kee["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const o=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await tbe(t,e,n+a,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function tbe(t,e,n,r,i,s){const o=ebe(e,r,i,s);let a;try{a=await t(n,Object.assign({},o))}catch(l){throw console.error(l),new J3(Xh(l),0)}if(a.ok||await S$(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await S$(l)}}function el(t){var e;let n=null;ibe(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=jve(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function A$(t){const e=el(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function _f(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function nbe(t){return{data:t,error:null}}function rbe(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=t,o=_x(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function T$(t){return t}function ibe(t){return t.access_token&&t.refresh_token&&t.expires_in}const AP=["global","local","others"];class sbe{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=_ee(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=AP[0]){if(AP.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${AP.join(", ")}`);try{return await Wt(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Lt(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Wt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:_f})}catch(r){if(Lt(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=_x(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await Wt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:rbe,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Lt(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Wt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:_f})}catch(n){if(Lt(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,s,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await Wt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:T$});if(u.error)throw u.error;const f=await u.json(),m=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return g.length>0&&(g.forEach(v=>{const x=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(v.split(";")[1].split("=")[1]);c[`${b}Page`]=x}),c.total=parseInt(m)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if(Lt(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){D0(e);try{return await Wt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:_f})}catch(n){if(Lt(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){D0(e);try{return await Wt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:_f})}catch(r){if(Lt(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){D0(e);try{return await Wt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:_f})}catch(r){if(Lt(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){D0(e.userId);try{const{data:n,error:r}=await Wt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(Lt(n))return{data:null,error:n};throw n}}async _deleteFactor(e){D0(e.userId),D0(e.id);try{return{data:await Wt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Lt(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,i,s,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await Wt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:T$});if(u.error)throw u.error;const f=await u.json(),m=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return g.length>0&&(g.forEach(v=>{const x=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(v.split(";")[1].split("=")[1]);c[`${b}Page`]=x}),c.total=parseInt(m)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if(Lt(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(e){try{return await Wt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Lt(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await Wt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Lt(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await Wt(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Lt(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await Wt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Lt(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await Wt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Lt(n))return{data:null,error:n};throw n}}}function k$(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const L0={debug:!!(globalThis&&Nee()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Iee extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class obe extends Iee{}async function abe(t,e,n){L0.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),L0.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){L0.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{L0.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw L0.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new obe(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(L0.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function lbe(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Pee(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function cbe(t){return parseInt(t,16)}function ube(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function dbe(t){var e;const{chainId:n,domain:r,expirationTime:i,issuedAt:s=new Date,nonce:o,notBefore:a,requestId:l,resources:c,scheme:u,uri:f,version:m}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(m!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${m}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const g=Pee(t.address),v=u?`${u}://${r}`:r,x=t.statement?`${t.statement}
`:"",b=`${v} wants you to sign in with your Ethereum account:
${g}

${x}`;let E=`URI: ${f}
Version: ${m}
Chain ID: ${n}${o?`
Nonce: ${o}`:""}
Issued At: ${s.toISOString()}`;if(i&&(E+=`
Expiration Time: ${i.toISOString()}`),a&&(E+=`
Not Before: ${a.toISOString()}`),l&&(E+=`
Request ID: ${l}`),c){let C=`
Resources:`;for(const k of c){if(!k||typeof k!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${k}`);C+=`
- ${k}`}E+=C}return`${b}
${E}`}class ui extends Error{constructor({message:e,code:n,cause:r,name:i}){var s;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(s=i??(r instanceof Error?r.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=n}}class PT extends ui{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function fbe({error:t,options:e}){var n,r,i;const{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ui({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=s.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new ui({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=s.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new ui({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new ui({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new ui({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new ui({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return s.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new ui({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new ui({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(Ree(o)){if(s.rp.id!==o)return new ui({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new ui({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new ui({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new ui({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new ui({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function hbe({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ui({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new ui({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(Ree(r)){if(n.rpId!==r)return new ui({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new ui({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new ui({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new ui({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class pbe{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const mbe=new pbe;function gbe(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,i=_x(t,["challenge","user","excludeCredentials"]),s=Bg(e).buffer,o=Object.assign(Object.assign({},n),{id:Bg(n.id).buffer}),a=Object.assign(Object.assign({},i),{challenge:s,user:o});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const c=r[l];a.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:Bg(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function ybe(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=_x(t,["challenge","allowCredentials"]),i=Bg(e).buffer,s=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){s.allowCredentials=new Array(n.length);for(let o=0;o<n.length;o++){const a=n[o];s.allowCredentials[o]=Object.assign(Object.assign({},a),{id:Bg(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return s}function xbe(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:pp(new Uint8Array(t.response.attestationObject)),clientDataJSON:pp(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function vbe(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:pp(new Uint8Array(i.authenticatorData)),clientDataJSON:pp(new Uint8Array(i.clientDataJSON)),signature:pp(new Uint8Array(i.signature)),userHandle:i.userHandle?pp(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Ree(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function C$(){var t,e;return!!(Xi()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function bbe(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new PT("Browser returned unexpected credential type",e)}:{data:null,error:new PT("Empty credential response",e)}}catch(e){return{data:null,error:fbe({error:e,options:t})}}}async function wbe(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new PT("Browser returned unexpected credential type",e)}:{data:null,error:new PT("Empty credential response",e)}}catch(e){return{data:null,error:hbe({error:e,options:t})}}}const Ebe={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Sbe={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function RT(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of t)if(i)for(const s in i){const o=i[s];if(o!==void 0)if(Array.isArray(o))r[s]=o;else if(n(o))r[s]=o;else if(e(o)){const a=r[s];e(a)?r[s]=RT(a,o):r[s]=RT(o)}else r[s]=o}return r}function Abe(t,e){return RT(Ebe,t,e||{})}function Tbe(t,e){return RT(Sbe,t,e||{})}class kbe{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:i},s){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!o)return{data:null,error:a};const l=i??mbe.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:c}=o.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${r}`),c.displayName||(c.displayName=c.name)}switch(o.webauthn.type){case"create":{const c=Abe(o.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:u,error:f}=await bbe({publicKey:c,signal:l});return u?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:f}}case"request":{const c=Tbe(o.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:u,error:f}=await wbe(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:c,signal:l}));return u?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:f}}}}catch(o){return Lt(o)?{data:null,error:o}:{data:null,error:new ap("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!n)return{data:null,error:new cw("rpId is required for WebAuthn authentication")};try{if(!C$())return{data:null,error:new ap("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:s});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:l.type,rpId:n,rpOrigins:r,credential_response:l.credential_response}})}catch(o){return Lt(o)?{data:null,error:o}:{data:null,error:new ap("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!n)return{data:null,error:new cw("rpId is required for WebAuthn registration")};try{if(!C$())return{data:null,error:new ap("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(u=>{var f;return(f=u.data)===null||f===void 0?void 0:f.all.find(m=>m.factor_type==="webauthn"&&m.friendly_name===e&&m.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u==null?void 0:u.id}):void 0),{data:null,error:a};const{data:l,error:c}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:s});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:n,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(o){return Lt(o)?{data:null,error:o}:{data:null,error:new ap("Unexpected error in register",o)}}}}lbe();const Cbe={url:Eve,storageKey:Sve,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Ave,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function N$(t,e,n){return await n()}const j0={};class uw{get jwks(){var e,n;return(n=(e=j0[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){j0[this.storageKey]=Object.assign(Object.assign({},j0[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=j0[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){j0[this.storageKey]=Object.assign(Object.assign({},j0[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const s=Object.assign(Object.assign({},Cbe),e);if(this.storageKey=s.storageKey,this.instanceID=(n=uw.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,uw.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.instanceID>0&&Xi()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new sbe({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=_ee(s.fetch),this.lock=s.lock||N$,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,s.lock?this.lock=s.lock:this.persistSession&&Xi()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=abe:this.lock=N$,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new kbe(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:Nee()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=k$(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=k$(this.memoryStorage)),Xi()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Tee}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(Xi()&&(n=Uve(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),Xi()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),Ive(s)){const l=(e=s.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Lt(n)?this._returnResult({error:n}):this._returnResult({error:new ap("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const s=await Wt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:el}),{data:o,error:a}=s;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(s){if(Lt(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(e){var n,r,i;try{let s;if("email"in e){const{email:u,password:f,options:m}=e;let g=null,v=null;this.flowType==="pkce"&&([g,v]=await M0(this.storage,this.storageKey)),s=await Wt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:u,password:f,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:g,code_challenge_method:v},xform:el})}else if("phone"in e){const{phone:u,password:f,options:m}=e;s=await Wt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:f,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},channel:(i=m==null?void 0:m.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:el})}else throw new OS("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return await Wi(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(s){if(await Wi(this.storage,`${this.storageKey}-code-verifier`),Lt(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(e){try{let n;if("email"in e){const{email:s,password:o,options:a}=e;n=await Wt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:A$})}else if("phone"in e){const{phone:s,password:o,options:a}=e;n=await Wt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:A$})}else throw new OS("You must provide either an email or phone number and a password");const{data:r,error:i}=n;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const s=new O0;return this._returnResult({data:{user:null,session:null},error:s})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(Lt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,i,s,o,a,l,c,u,f,m;let g,v;if("message"in e)g=e.message,v=e.signature;else{const{chain:x,wallet:b,statement:E,options:C}=e;let k;if(Xi())if(typeof b=="object")k=b;else{const j=window;if("ethereum"in j&&typeof j.ethereum=="object"&&"request"in j.ethereum&&typeof j.ethereum.request=="function")k=j.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(C!=null&&C.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=b}const O=new URL((n=C==null?void 0:C.url)!==null&&n!==void 0?n:window.location.href),U=await k.request({method:"eth_requestAccounts"}).then(j=>j).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!U||U.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const R=Pee(U[0]);let $=(r=C==null?void 0:C.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!$){const j=await k.request({method:"eth_chainId"});$=cbe(j)}const V={domain:O.host,address:R,statement:E,uri:O.href,version:"1",chainId:$,nonce:(i=C==null?void 0:C.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(o=(s=C==null?void 0:C.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=C==null?void 0:C.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=C==null?void 0:C.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=C==null?void 0:C.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(u=C==null?void 0:C.signInWithEthereum)===null||u===void 0?void 0:u.resources};g=dbe(V),v=await k.request({method:"personal_sign",params:[ube(g),R]})}try{const{data:x,error:b}=await Wt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:g,signature:v},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:el});if(b)throw b;if(!x||!x.session||!x.user){const E=new O0;return this._returnResult({data:{user:null,session:null},error:E})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:b})}catch(x){if(Lt(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async signInWithSolana(e){var n,r,i,s,o,a,l,c,u,f,m,g;let v,x;if("message"in e)v=e.message,x=e.signature;else{const{chain:b,wallet:E,statement:C,options:k}=e;let O;if(Xi())if(typeof E=="object")O=E;else{const R=window;if("solana"in R&&typeof R.solana=="object"&&("signIn"in R.solana&&typeof R.solana.signIn=="function"||"signMessage"in R.solana&&typeof R.solana.signMessage=="function"))O=R.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!(k!=null&&k.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");O=E}const U=new URL((n=k==null?void 0:k.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in O&&O.signIn){const R=await O.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},k==null?void 0:k.signInWithSolana),{version:"1",domain:U.host,uri:U.href}),C?{statement:C}:null));let $;if(Array.isArray(R)&&R[0]&&typeof R[0]=="object")$=R[0];else if(R&&typeof R=="object"&&"signedMessage"in R&&"signature"in R)$=R;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in $&&"signature"in $&&(typeof $.signedMessage=="string"||$.signedMessage instanceof Uint8Array)&&$.signature instanceof Uint8Array)v=typeof $.signedMessage=="string"?$.signedMessage:new TextDecoder().decode($.signedMessage),x=$.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in O)||typeof O.signMessage!="function"||!("publicKey"in O)||typeof O!="object"||!O.publicKey||!("toBase58"in O.publicKey)||typeof O.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${U.host} wants you to sign in with your Solana account:`,O.publicKey.toBase58(),...C?["",C,""]:[""],"Version: 1",`URI: ${U.href}`,`Issued At: ${(i=(r=k==null?void 0:k.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=k==null?void 0:k.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${k.signInWithSolana.notBefore}`]:[],...!((o=k==null?void 0:k.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${k.signInWithSolana.expirationTime}`]:[],...!((a=k==null?void 0:k.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${k.signInWithSolana.chainId}`]:[],...!((l=k==null?void 0:k.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${k.signInWithSolana.nonce}`]:[],...!((c=k==null?void 0:k.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${k.signInWithSolana.requestId}`]:[],...!((f=(u=k==null?void 0:k.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||f===void 0)&&f.length?["Resources",...k.signInWithSolana.resources.map($=>`- ${$}`)]:[]].join(`
`);const R=await O.signMessage(new TextEncoder().encode(v),"utf8");if(!R||!(R instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=R}}try{const{data:b,error:E}=await Wt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:pp(x)},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:el});if(E)throw E;if(!b||!b.session||!b.user){const C=new O0;return this._returnResult({data:{user:null,session:null},error:C})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:E})}catch(b){if(Lt(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}}async _exchangeCodeForSession(e){const n=await Hh(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new Pve;const{data:s,error:o}=await Wt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:el});if(await Wi(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!s||!s.session||!s.user){const a=new O0;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}catch(s){if(await Wi(this.storage,`${this.storageKey}-code-verifier`),Lt(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:s,nonce:o}=e,a=await Wt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:el}),{data:l,error:c}=a;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const u=new O0;return this._returnResult({data:{user:null,session:null},error:u})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:c})}catch(n){if(Lt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,i,s,o;try{if("email"in e){const{email:a,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await M0(this.storage,this.storageKey));const{error:f}=await Wt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:u}=await Wt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u})}throw new OS("You must provide either an email or phone number.")}catch(a){if(await Wi(this.storage,`${this.storageKey}-code-verifier`),Lt(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(e){var n,r;try{let i,s;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await Wt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:el});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(Lt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var n,r,i,s,o;try{let a=null,l=null;this.flowType==="pkce"&&([a,l]=await M0(this.storage,this.storageKey));const c=await Wt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:nbe});return!((s=c.data)===null||s===void 0)&&s.url&&Xi()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(c.data.url),this._returnResult(c)}catch(a){if(await Wi(this.storage,`${this.storageKey}-code-verifier`),Lt(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Po;const{error:i}=await Wt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(Lt(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:o}=await Wt(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:o,error:a}=await Wt(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a})}throw new OS("You must provide either an email or phone number and a type")}catch(n){if(Lt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Hh(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<bP:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const o=await Hh(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=SP()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=Qve(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await Wt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:_f}):await this._useSession(async n=>{var r,i,s;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Po}:await Wt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:_f})})}catch(n){if(Lt(n))return _ve(n)&&(await this._removeSession(),await Wi(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new Po;const o=i.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await M0(this.storage,this.storageKey));const{data:c,error:u}=await Wt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:_f});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(r){if(await Wi(this.storage,`${this.storageKey}-code-verifier`),Lt(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Po;const n=Date.now()/1e3;let r=n,i=!0,s=null;const{payload:o}=EP(e.access_token);if(o.exp&&(r=o.exp,i=r<=n),i){const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(n){if(Lt(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Po;const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(Lt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!Xi())throw new MS("No browser detected.");if(e.error||e.error_description||e.error_code)throw new MS(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new y$("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new MS("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new y$("No code detected.");const{data:C,error:k}=await this._exchangeCodeForSession(e.code);if(k)throw k;const O=new URL(window.location.href);return O.searchParams.delete("code"),window.history.replaceState(window.history.state,"",O.toString()),{data:{session:C.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!s||!a||!o||!c)throw new MS("No session defined in URL");const u=Math.round(Date.now()/1e3),f=parseInt(a);let m=u+f;l&&(m=parseInt(l));const g=m-u;g*1e3<=lg&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${f}s`);const v=m-f;u-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,m,u):u-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,m,u);const{data:x,error:b}=await this._getUser(s);if(b)throw b;const E={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:f,expires_at:m,refresh_token:o,token_type:c,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:E,redirectType:e.type},error:null})}catch(r){if(Lt(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Hh(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({error:s});const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(Nve(a)&&(a.status===404||a.status===401||a.status===403)))return this._returnResult({error:a})}return e!=="others"&&(await this._removeSession(),await Wi(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=Bve(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await M0(this.storage,this.storageKey,!0));try{return await Wt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(await Wi(this.storage,`${this.storageKey}-code-verifier`),Lt(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(Lt(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var o,a,l,c,u;const{data:f,error:m}=s;if(m)throw m;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await Wt(this.fetch,"GET",g,{headers:this.headers,jwt:(u=(c=f.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(i)throw i;return Xi()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(Lt(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:s}}=n;if(i)throw i;const{options:o,provider:a,token:l,access_token:c,nonce:u}=e,f=await Wt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=s==null?void 0:s.access_token)!==null&&r!==void 0?r:void 0,body:{provider:a,id_token:l,access_token:c,nonce:u,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:el}),{data:m,error:g}=f;return g?this._returnResult({data:{user:null,session:null},error:g}):!m||!m.session||!m.user?this._returnResult({data:{user:null,session:null},error:new O0}):(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("USER_UPDATED",m.session)),this._returnResult({data:m,error:g}))}catch(i){if(await Wi(this.storage,`${this.storageKey}-code-verifier`),Lt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)throw o;return await Wt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(Lt(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await zve(async i=>(i>0&&await $ve(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await Wt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:el})),(i,s)=>{const o=200*Math.pow(2,i);return s&&wP(s)&&Date.now()+o-r<lg})}catch(r){if(this._debug(n,"error",r),Lt(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Xi()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await Hh(this.storage,this.storageKey);if(i&&this.userStorage){let o=await Hh(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await cg(this.userStorage,this.storageKey+"-user",o)),i.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:SP()}else if(i&&!i.user&&!i.user){const o=await Hh(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(i.user=o.user,await Wi(this.storage,this.storageKey+"-user"),await cg(this.storage,this.storageKey,i)):i.user=SP()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const s=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<bP;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${bP}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),wP(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(i.access_token);!a&&(o!=null&&o.user)?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Po;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new YC;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new Po;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={data:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(i,"error",s),Lt(s)){const o={data:null,error:s};return wP(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(l){s.push(l)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Wi(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await cg(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const s=E$(i);await cg(this.storage,this.storageKey,s)}else{const i=E$(n);await cg(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Wi(this.storage,this.storageKey),await Wi(this.storage,this.storageKey+"-code-verifier"),await Wi(this.storage,this.storageKey+"-user"),this.userStorage&&await Wi(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Xi()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),lg);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/lg);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${lg}ms, refresh threshold is ${W3} ticks`),i<=W3&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Iee)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Xi()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,o]=await M0(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?this._returnResult({data:null,error:s}):await Wt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Lt(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:c}=await Wt(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?this._returnResult({data:null,error:c}):(e.factorType==="totp"&&l.type==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(n){if(Lt(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({data:null,error:s});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?xbe(e.webauthn.credential_response):vbe(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:l}=await Wt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:l}))})}catch(n){if(Lt(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({data:null,error:s});const o=await Wt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:gbe(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:ybe(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Lt(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const s of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])i.all.push(s),s.status==="verified"&&i[s.factor_type].push(s);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:r},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=EP(r.access_token);let o=null;s.aal&&(o=s.aal);let a=o;((n=(e=r.user.factors)===null||e===void 0?void 0:e.filter(u=>u.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(a="aal2");const c=s.amr||[];return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:c},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await Wt(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Po})})}catch(n){if(Lt(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:s}=r;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new Po});const o=await Wt(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&Xi()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(Lt(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:s}=r;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new Po});const o=await Wt(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&Xi()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(Lt(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;return r?this._returnResult({data:null,error:r}):n?await Wt(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Po})})}catch(e){if(Lt(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?(await Wt(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Po})})}catch(n){if(Lt(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(a=>a.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(a=>a.kid===e),r&&this.jwks_cached_at+kve>i)return r;const{data:s,error:o}=await Wt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,r=s.keys.find(a=>a.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:g,error:v}=await this.getSession();if(v||!g.session)return this._returnResult({data:null,error:v});r=g.session.access_token}const{header:i,payload:s,signature:o,raw:{header:a,payload:l}}=EP(r);n!=null&&n.allowExpired||Yve(s.exp);const c=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!c){const{error:g}=await this.getUser(r);if(g)throw g;return{data:{claims:s,header:i,signature:o},error:null}}const u=Jve(i.alg),f=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,f,o,Lve(`${a}.${l}`)))throw new X3("Invalid JWT signature");return{data:{claims:s,header:i,signature:o},error:null}}catch(r){if(Lt(r))return this._returnResult({data:null,error:r});throw r}}}uw.nextInstanceID={};const Nbe=uw,_be="2.89.0";let _b="";typeof Deno<"u"?_b="deno":typeof document<"u"?_b="web":typeof navigator<"u"&&navigator.product==="ReactNative"?_b="react-native":_b="node";const Ibe={"X-Client-Info":`supabase-js-${_b}/${_be}`},Pbe={headers:Ibe},Rbe={schema:"public"},Obe={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Mbe={};function dw(t){"@babel/helpers - typeof";return dw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dw(t)}function Dbe(t,e){if(dw(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(dw(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Lbe(t){var e=Dbe(t,"string");return dw(e)=="symbol"?e:e+""}function jbe(t,e,n){return(e=Lbe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_$(Object(n),!0).forEach(function(r){jbe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const Bbe=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Ube=()=>Headers,Fbe=(t,e,n)=>{const r=Bbe(n),i=Ube();return async(s,o)=>{var a;const l=(a=await e())!==null&&a!==void 0?a:t;let c=new i(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(s,zr(zr({},o),{},{headers:c}))}};function $be(t){return t.endsWith("/")?t:t+"/"}function zbe(t,e){var n,r;const{db:i,auth:s,realtime:o,global:a}=t,{db:l,auth:c,realtime:u,global:f}=e,m={db:zr(zr({},l),i),auth:zr(zr({},c),s),realtime:zr(zr({},u),o),storage:{},global:zr(zr(zr({},f),a),{},{headers:zr(zr({},(n=f==null?void 0:f.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?m.accessToken=t.accessToken:delete m.accessToken,m}function Hbe(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL($be(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Vbe=class extends Nbe{constructor(t){super(t)}},qbe=class{constructor(t,e,n){var r,i;this.supabaseUrl=t,this.supabaseKey=e;const s=Hbe(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",s),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",s),this.storageUrl=new URL("storage/v1",s),this.functionsUrl=new URL("functions/v1",s);const o=`sb-${s.hostname.split(".")[0]}-auth-token`,a={db:Rbe,realtime:Mbe,auth:zr(zr({},Obe),{},{storageKey:o}),global:Pbe},l=zbe(n??{},a);if(this.storageKey=(r=l.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=l.global.headers)!==null&&i!==void 0?i:{},l.accessToken)this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(u,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}});else{var c;this.auth=this._initSupabaseAuthClient((c=l.auth)!==null&&c!==void 0?c:{},this.headers,l.global.fetch)}this.fetch=Fbe(e,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(zr({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&this.accessToken().then(u=>this.realtime.setAuth(u)).catch(u=>console.warn("Failed to set initial Realtime auth token:",u)),this.rest=new Axe(new URL("rest/v1",s).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new wve(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new vxe(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,n;if(t.accessToken)return await t.accessToken();const{data:r}=await t.auth.getSession();return(e=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:i,storageKey:s,flowType:o,lock:a,debug:l,throwOnError:c},u,f){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Vbe({url:this.authUrl.href,headers:zr(zr({},m),u),storageKey:s,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:i,flowType:o,lock:a,debug:l,throwOnError:c,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(g=>g.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new $xe(this.realtimeUrl.href,zr(zr({},t),{},{params:zr(zr({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Oee=(t,e,n)=>new qbe(t,e,n);function Gbe(){if(typeof window<"u"||typeof Al>"u")return!1;const t=Al.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Gbe()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");function Mee(){return{url:"https://rhkkqojnaiyrxmiiykay.supabase.co",anonKey:"sb_publishable_Kd3ZVGh8x-DOQs8gEuVxYQ_tX2sBfpA"}}let OT=null;async function Kbe(){if(OT)return!0;const t=Mee();if(!t.url||!t.anonKey)return console.error("[Supabase] Cannot initialize: missing configuration"),!1;try{return OT=Oee(t.url,t.anonKey,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),!0}catch(e){return console.error("[Supabase] Initialization failed:",e),!1}}function du(){return OT||console.warn("[Supabase] Client not initialized. Call initializeSupabase() first."),OT}function Wbe(){const t=Mee();return!!(t.url&&t.anonKey)}function B0(t){var e,n,r;return t?{id:t.id,email:t.email||null,displayName:((e=t.user_metadata)==null?void 0:e.full_name)||((n=t.email)==null?void 0:n.split("@")[0])||null,photoURL:((r=t.user_metadata)==null?void 0:r.avatar_url)||null,emailVerified:t.email_confirmed_at!==null,createdAt:t.created_at}:null}class Ybe{constructor(){this.currentUser=null,this.listeners=[]}getUser(){return this.currentUser}onAuthStateChange(e){return this.listeners.push(e),()=>{this.listeners=this.listeners.filter(n=>n!==e)}}async signInWithGoogle(){return this.signInWithProvider("google",{queryParams:{access_type:"offline",prompt:"consent"}})}async signInWithGitHub(){return this.signInWithProvider("github",{scopes:"read:user user:email"})}async signInWithDiscord(){return this.signInWithProvider("discord",{scopes:"identify email"})}async signInWithProvider(e,n){const r=du();if(!r)throw console.error("[Auth] Supabase client not initialized"),new Error("Supabase not initialized");console.log(`[Auth] Starting sign in with ${e}...`,n);try{const{data:i,error:s}=await r.auth.signInWithOAuth({provider:e,options:{redirectTo:window.location.origin,scopes:n==null?void 0:n.scopes,queryParams:n==null?void 0:n.queryParams,skipBrowserRedirect:!1}});if(s)throw console.error(`[Auth] Error signing in with ${e}:`,s),s;return console.log(`[Auth] params for ${e} sign in initiated`,i),this.currentUser}catch(i){throw console.error(`[Auth] Unexpected error during ${e} sign in:`,i),i}}async signInWithEthereum(){const e=du();if(!e)throw new Error("Supabase not initialized");if(typeof window<"u"&&!window.ethereum)throw new Error("No Ethereum wallet detected. Please install MetaMask or another Web3 wallet.");const{data:n,error:r}=await e.auth.signInWithWeb3({chain:"ethereum",statement:"I accept the AutonomousVault Terms of Service"});if(r)throw r;return this.currentUser=B0(n.user),this.notifyListeners(),this.currentUser}async signInWithSolana(){const e=du();if(!e)throw new Error("Supabase not initialized");if(typeof window<"u"&&!window.solana)throw new Error("No Solana wallet detected. Please install Phantom or another Solana wallet.");try{await window.solana.connect()}catch{throw new Error("Failed to connect to Solana wallet")}const{data:n,error:r}=await e.auth.signInWithWeb3({chain:"solana",statement:"I accept the AutonomousVault Terms of Service"});if(r)throw r;return this.currentUser=B0(n.user),this.notifyListeners(),this.currentUser}async signInWithEmail(e,n){const r=du();if(!r)throw new Error("Supabase not initialized");const{data:i,error:s}=await r.auth.signInWithPassword({email:e,password:n});if(s)throw s;return this.currentUser=B0(i.user),this.notifyListeners(),this.currentUser}async signUp(e,n){const r=du();if(!r)throw new Error("Supabase not initialized");const{data:i,error:s}=await r.auth.signUp({email:e,password:n});if(s)throw s;return this.currentUser=B0(i.user),this.notifyListeners(),this.currentUser}async logout(){const e=du();if(!e)throw new Error("Supabase not initialized");const{error:n}=await e.auth.signOut();if(n)throw n;this.currentUser=null,this.notifyListeners()}async deleteAccount(){var r;const e=du();if(!e)throw new Error("Supabase not initialized");const{data:{user:n}}=await e.auth.getUser();if(!n)throw new Error("Not authenticated");try{const{StorageService:i}=await gl(async()=>{const{StorageService:s}=await Promise.resolve().then(()=>Zbe);return{StorageService:s}},void 0);await i.clearUserData(n.id),console.log("[Auth] Local storage cleared")}catch(i){console.warn("[Auth] Failed to clear local storage:",i)}try{const{error:i}=await e.rpc("delete_user");if(i)throw console.warn("[Auth] RPC delete_user not available, signing out only:",i.message),await this.logout(),new Error("Account deletion requires admin action. Please contact support or delete via Supabase dashboard.")}catch(i){throw(r=i.message)!=null&&r.includes("contact support")?i:(await this.logout(),new Error("Account deletion failed. You have been signed out. Please contact support to complete account deletion."))}this.currentUser=null,this.notifyListeners(),console.log("[Auth] Account deleted successfully")}async initialize(){const e=du();if(!e){console.warn("[SupabaseAuth] Cannot initialize: client not available");return}e.auth.onAuthStateChange((r,i)=>{this.currentUser=i?B0(i.user):null,this.notifyListeners()});const{data:{session:n}}=await e.auth.getSession();this.currentUser=n?B0(n.user):null,this.notifyListeners()}notifyListeners(){this.listeners.forEach(e=>{try{e(this.currentUser)}catch(n){console.error("[SupabaseAuth] Listener error:",n)}})}getUserId(){var e;return((e=this.currentUser)==null?void 0:e.id)||null}isAuthenticated(){return this.currentUser!==null}async getAccessToken(){const e=du();if(!e)return null;const{data:{session:n}}=await e.auth.getSession();return(n==null?void 0:n.access_token)||null}}const da=new Ybe;function Pm(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function Jbe(t,e){let n;const r=()=>{if(n)return n;const i=indexedDB.open(t);return i.onupgradeneeded=()=>i.result.createObjectStore(e),n=Pm(i),n.then(s=>{s.onclose=()=>n=void 0},()=>{}),n};return(i,s)=>r().then(o=>s(o.transaction(e,i).objectStore(e)))}let TP;function S1(){return TP||(TP=Jbe("keyval-store","keyval")),TP}function kP(t,e=S1()){return e("readonly",n=>Pm(n.get(t)))}function CP(t,e,n=S1()){return n("readwrite",r=>(r.put(e,t),Pm(r.transaction)))}function NP(t,e=S1()){return e("readwrite",n=>(n.delete(t),Pm(n.transaction)))}function Xbe(t=S1()){return t("readwrite",e=>(e.clear(),Pm(e.transaction)))}function Qbe(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},Pm(t.transaction)}function I$(t=S1()){return t("readonly",e=>{if(e.getAllKeys)return Pm(e.getAllKeys());const n=[];return Qbe(e,r=>n.push(r.key)).then(()=>n)})}const r7=class r7{static setUserId(e){console.log(`[StorageService] User context set to: ${e?e.substring(0,8)+"...":"null"}`),this.currentUserId=e}static getUserId(){return this.currentUserId}static getUserKey(e){return this.currentUserId?`${e}_${this.currentUserId}`:(console.warn(`[StorageService] No user context set! Using global key for: ${e}`),e)}static async getItem(e){try{return await kP(e)}catch(n){return console.error(`[StorageService] Failed to get item ${e}:`,n),null}}static async setItem(e,n){try{await CP(e,n)}catch(r){console.error(`[StorageService] Failed to set item ${e}:`,r)}}static async removeItem(e){try{await NP(e)}catch(n){console.error(`[StorageService] Failed to remove item ${e}:`,n)}}static async clear(){try{await Xbe()}catch(e){console.error("[StorageService] Failed to clear storage:",e)}}static async clearUserData(e){try{const n=await I$(),r=`_${e}`,i=n.filter(s=>typeof s=="string"&&s.endsWith(r));console.log(`[StorageService] Clearing ${i.length} keys for user ${e.substring(0,8)}...`);for(const s of i)await NP(s);console.log("[StorageService] User data cleared.")}catch(n){console.error("[StorageService] Failed to clear user data:",n)}}static async migrateFromLocalStorage(){console.log("[StorageService] Checking for legacy localStorage data...");const e=["agent_vault_pubkey","agent_vault_enc","agent_owner_pubkey","agent_hl_vault_pubkey","agent_hl_vault_enc","agent_hl_owner_pubkey","agent_pm_vault_pubkey","agent_pm_vault_enc","agent_pm_owner_pubkey","agent_chat_history","agent_chat_sessions","vault_dealer_strategy","agent_activity_log","agent_scheduler_tasks","agent_dealer_settings"];let n=0;for(const r of e){const i=localStorage.getItem(r);if(i)try{await CP(r,i),console.log(`[StorageService] Migrated key: ${r}`),n++}catch(s){console.error(`[StorageService] Failed to migrate key ${r}:`,s)}}if(n>0){console.log(`[StorageService] Migration complete. Moved ${n} items.`);for(const r of e)localStorage.removeItem(r);console.log("[StorageService] Legacy localStorage keys cleared.")}else console.log("[StorageService] No legacy data found to migrate.")}static async migrateToUserScoped(){if(!this.currentUserId){console.warn("[StorageService] Cannot migrate to user-scoped: no userId set");return}console.log("[StorageService] Checking for unscoped IndexedDB data to migrate...");const e=["agent_vault_pubkey","agent_vault_enc","agent_owner_pubkey","agent_hl_vault_pubkey","agent_hl_vault_enc","agent_hl_owner_pubkey","agent_pm_vault_pubkey","agent_pm_vault_enc","agent_pm_owner_pubkey","vault_dealer_strategy","agent_activity_log","agent_scheduler_tasks","agent_conversations_metadata","vault_dealer_storage","vault_polymarket_storage","ai_config_store","vault_balance_history","token_usage_store"],r=(await I$()).filter(o=>typeof o=="string"&&o.startsWith("agent_conversation_")&&!o.includes("_"+this.currentUserId)),i=[...e,...r];let s=0;for(const o of i)try{const a=await kP(o);if(a){const l=`${o}_${this.currentUserId}`;await kP(l)||(await CP(l,a),console.log(`[StorageService] Migrated to user-scoped: ${o} -> ${l}`),s++),await NP(o)}}catch(a){console.error(`[StorageService] Failed to migrate key ${o}:`,a)}s>0?console.log(`[StorageService] User-scoped migration complete. Moved ${s} items.`):console.log("[StorageService] No unscoped data found to migrate.")}};r7.currentUserId=null;let Ae=r7;const Zbe=Object.freeze(Object.defineProperty({__proto__:null,StorageService:Ae},Symbol.toStringTag,{value:"Module"})),ewe={gemini:[{id:"gemini-3-flash-preview",name:"Gemini 3 Flash Preview",description:"Next generation (Preview)",inputPricePerMillion:.1,outputPricePerMillion:.4},{id:"gemini-2.5-flash",name:"Gemini 2.5 Flash",description:"Fast & balanced",inputPricePerMillion:.15,outputPricePerMillion:.6},{id:"gemini-2.5-pro",name:"Gemini 2.5 Pro",description:"Most capable",inputPricePerMillion:1.25,outputPricePerMillion:10},{id:"gemini-2.5-flash-lite",name:"Gemini 2.5 Flash-Lite",description:"Lightweight",inputPricePerMillion:.075,outputPricePerMillion:.3},{id:"gemini-2.0-flash",name:"Gemini 2.0 Flash",description:"Stable",inputPricePerMillion:.1,outputPricePerMillion:.4}],openai:[{id:"gpt-4o",name:"GPT-4o",description:"Most capable",inputPricePerMillion:2.5,outputPricePerMillion:10},{id:"gpt-4o-mini",name:"GPT-4o Mini",description:"Fast & affordable",inputPricePerMillion:.15,outputPricePerMillion:.6},{id:"gpt-4-turbo",name:"GPT-4 Turbo",description:"Stable",inputPricePerMillion:10,outputPricePerMillion:30},{id:"o1-mini",name:"o1-mini",description:"Reasoning model",inputPricePerMillion:3,outputPricePerMillion:12}],claude:[{id:"claude-sonnet-4-20250514",name:"Claude Sonnet 4",description:"Latest & fastest",inputPricePerMillion:3,outputPricePerMillion:15},{id:"claude-3-5-sonnet-20241022",name:"Claude 3.5 Sonnet",description:"Previous gen",inputPricePerMillion:3,outputPricePerMillion:15},{id:"claude-3-opus-20240229",name:"Claude 3 Opus",description:"Most capable",inputPricePerMillion:15,outputPricePerMillion:75},{id:"claude-3-haiku-20240307",name:"Claude 3 Haiku",description:"Economy",inputPricePerMillion:.25,outputPricePerMillion:1.25}]},Dee={gemini:{providerType:"gemini",apiKey:"",isConfigured:!1},openai:{providerType:"openai",apiKey:"",isConfigured:!1},claude:{providerType:"claude",apiKey:"",isConfigured:!1}},Lee={operator:{providerType:"gemini",modelId:"gemini-2.5-flash"},hyperliquidDealer:{providerType:"gemini",modelId:"gemini-2.5-flash"},polymarketDealer:{providerType:"gemini",modelId:"gemini-2.5-flash"}},_P={credentials:Dee,componentConfigs:Lee},P$="ai_config_store";class twe{constructor(){this.isInitialized=!1,this.initPromise=null,this.state=_P,this.listeners=new Set,this.initPromise=this.initialize()}async initialize(){if(!this.isInitialized){if(!Ae.getUserId()){console.log("[AIConfigStore] No user context yet, skipping initial load"),this.isInitialized=!0;return}await this.loadFromStorage(),this.isInitialized=!0,this.notifyListeners()}}async reload(){console.log("[AIConfigStore] Reloading from storage..."),await this.loadFromStorage(),this.notifyListeners()}reset(){console.log("[AIConfigStore] Resetting to initial state..."),this.state={..._P},this.notifyListeners()}async loadFromStorage(){try{const e=await Ae.getItem(Ae.getUserKey(P$));if(e){const n=JSON.parse(e);this.state={..._P,...n,credentials:{...Dee,...n.credentials},componentConfigs:{...Lee,...n.componentConfigs}},console.log("[AIConfigStore] Loaded credentials from storage")}}catch(e){console.error("Failed to load AI config state:",e)}}async waitForInit(){this.initPromise&&await this.initPromise}async saveState(){try{await Ae.setItem(Ae.getUserKey(P$),JSON.stringify(this.state))}catch(e){console.error("Failed to save AI config state:",e)}}notifyListeners(){this.listeners.forEach(e=>e())}notify(){this.notifyListeners(),this.saveState()}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}getSnapshot(){return this.state}setApiKey(e,n){this.state={...this.state,credentials:{...this.state.credentials,[e]:{providerType:e,apiKey:n,isConfigured:n.trim().length>0}}},this.notify()}getApiKey(e){return this.state.credentials[e].apiKey}clearApiKey(e){this.setApiKey(e,"")}isProviderConfigured(e){return this.state.credentials[e].isConfigured}getConfiguredProviders(){return Object.entries(this.state.credentials).filter(([e,n])=>n.isConfigured).map(([e,n])=>e)}setComponentConfig(e,n){return this.state.credentials[n.providerType].isConfigured?ewe[n.providerType].find(i=>i.id===n.modelId)?(this.state={...this.state,componentConfigs:{...this.state.componentConfigs,[e]:n}},this.notify(),!0):(console.warn(`Invalid model ${n.modelId} for provider ${n.providerType}`),!1):(console.warn(`Cannot set ${e} to use ${n.providerType}: API key not configured`),!1)}getComponentConfig(e){return this.state.componentConfigs[e]}getComponentProvider(e){return this.state.componentConfigs[e].providerType}getComponentModel(e){return this.state.componentConfigs[e].modelId}getComponentApiKey(e){const n=this.getComponentProvider(e);return this.getApiKey(n)}isComponentConfigValid(e){const n=this.state.componentConfigs[e];return this.state.credentials[n.providerType].isConfigured}getInvalidComponents(){return Object.keys(this.state.componentConfigs).filter(e=>!this.isComponentConfigValid(e))}}const Un=new twe,JC={trend:{name:"Trend / Structure",color:"purple",icon:"TrendingUp",maxIndicators:2,indicators:["ema","sma","adx","ichimoku"],description:"Market direction and trend strength"},momentum:{name:"Momentum",color:"blue",icon:"Activity",maxIndicators:2,indicators:["rsi","macd","stoch"],description:"Entry/exit timing and divergences"},volume:{name:"Volume",color:"green",icon:"BarChart2",maxIndicators:1,indicators:["obv","vwap"],description:"Move confirmation with participation"},volatility:{name:"Volatility / Risk",color:"orange",icon:"Zap",maxIndicators:1,indicators:["atr","bollinger"],description:"Risk context and market regime"}},jee=5,Yu={balanced:{name:"Balanced",description:"Trend + Momentum + Timing + Risk",emoji:"",indicators:["ema","rsi","macd","atr"],marketCondition:"uncertain or mixed signals"},scalp:{name:"Scalp Momentum",description:"Fast entries, frequent trades (5m-15m)",emoji:"",indicators:["ema","rsi","stoch","vwap"],marketCondition:"high volatility with quick reversals"},trendFollowing:{name:"Trend Following",description:"Sustained movements (15m-1h)",emoji:"",indicators:["ema","sma","adx","macd"],marketCondition:"strong directional trend"},meanReversion:{name:"Mean Reversion",description:"Range / Lateral markets",emoji:"",indicators:["bollinger","rsi","stoch","vwap"],marketCondition:"ranging or sideways market"},volumeConfirm:{name:"Volume Confirmation",description:"Avoid fake breakouts",emoji:"",indicators:["ema","rsi","obv","vwap"],marketCondition:"breakout scenarios or unusual volume"},custom:{name:"Custom",description:"Your custom configuration",emoji:"",indicators:[],marketCondition:"user-defined"}},Q3={balanced:`You are Hyperliquid Dealer, an autonomous trading engine.
Your goal is to identify balanced trading opportunities using a combination of indicators.

RULES:
1. Use EMA for trend confirmation, RSI for timing, MACD for momentum, and ATR for risk management.
2. Enter LONG when: EMA points UP + RSI < 40 + MACD histogram positive.
3. Enter SHORT when: EMA points DOWN + RSI > 60 + MACD histogram negative.
4. Stop Loss: Position at 1.5x ATR from entry price.
5. Take Profit: Target 2x risk (1:2 ratio).
6. HOLD if indicators give conflicting signals.`,scalp:`You are Hyperliquid Dealer, a high-frequency scalping engine.
Your goal is to capture quick price movements (5m-15m) in volatile markets.

RULES:
1. Use EMA(9) for immediate direction, RSI for entry, Stoch for confirmation, VWAP as support/resistance.
2. LONG: Price above VWAP + RSI < 35 + Stoch crossing up.
3. SHORT: Price below VWAP + RSI > 65 + Stoch crossing down.
4. Quick trades: Target 0.3-0.5% profit per trade.
5. Tight stop: 0.5% maximum.
6. AVOID trades during low volatility.`,trendFollowing:`You are Hyperliquid Dealer, specialized in following strong trends.
Your goal is to ride sustained directional movements (15m-1h).

RULES:
1. Use EMA/SMA to confirm trend, ADX for strength, MACD for timing.
2. ONLY enter when ADX > 25 (strong trend).
3. LONG: EMA(20) > SMA(50) + ADX > 25 + MACD positive.
4. SHORT: EMA(20) < SMA(50) + ADX > 25 + MACD negative.
5. Let profits run: Trailing stop at 2x ATR.
6. HOLD in sideways markets (ADX < 20).`,meanReversion:`You are Hyperliquid Dealer, specialized in mean reversion.
Your goal is to trade ranging/sideways markets, buying dips and selling tops.

RULES:
1. Use Bollinger Bands for extremes, RSI for oversold/overbought, Stoch for confirmation, VWAP as anchor.
2. LONG: Price touches lower Bollinger + RSI < 30 + Stoch < 20.
3. SHORT: Price touches upper Bollinger + RSI > 70 + Stoch > 80.
4. Target: Return to mean (Bollinger middle or VWAP).
5. Stop: Outside the opposite band.
6. AVOID trading when Bollinger expands (breakout).`,volumeConfirm:`You are Hyperliquid Dealer with focus on volume confirmation.
Your goal is to avoid false breakouts by only trading with volume confirmation.

RULES:
1. Use EMA for trend, RSI for timing, OBV for volume flow, VWAP for institutional levels.
2. LONG: EMA up + RSI < 45 + OBV making higher highs + price above VWAP.
3. SHORT: EMA down + RSI > 55 + OBV making lower lows + price below VWAP.
4. Volume is KING: No OBV confirmation = no trade.
5. Breakouts: Only enter if volume > 1.5x average.
6. HOLD if OBV diverges from price (possible reversal signal).`,custom:`// Write your custom strategy instructions here...
// Example:
// You are a conservative trader focused on mean reversion.
// 1. Only trade when RSI is above 70 or below 30.
// 2. Prioritize high volume tokens.
// 3. Never risk more than 1% of equity per trade.`},Ug={rsi:{enabled:!0,params:{period:14},weight:1},macd:{enabled:!0,params:{fast:12,slow:26,signal:9},weight:1},bollinger:{enabled:!1,params:{period:20,stdDev:2},weight:1},atr:{enabled:!0,params:{period:14},weight:1},adx:{enabled:!1,params:{period:14},weight:1},obv:{enabled:!1,params:{},weight:1},vwap:{enabled:!1,params:{},weight:1},ichimoku:{enabled:!1,params:{conversion:9,base:26,spanB:52,displacement:26},weight:1},ema:{enabled:!0,params:{period:20},weight:1},sma:{enabled:!1,params:{period:20},weight:1},stoch:{enabled:!1,params:{period:14,signalPeriod:3},weight:1}},nwe=Q3.balanced,Bee={strategyPrompt:nwe,aggressiveMode:!1,maxLeverage:5,maxPositionSizeUSDC:50,maxOpenPositions:3,bankrollType:"MANUAL",manualBankroll:100,tradingPairs:["BTC","ETH","SOL"],checkIntervalSeconds:300,analysisTimeframe:"60",historyCandles:30,macroTimeframeEnabled:!1,macroTimeframe:"240",macroEnabledIndicators:["rsi","macd","ema"],indicatorSettings:Ug,autonomousIndicators:!1,selectedPreset:"balanced",promptMode:"preset",stopLossEnabled:!1,stopLossPercent:null,takeProfitEnabled:!1,takeProfitPercent:null},IP={isOn:!1,isAnalyzing:!1,statusMessage:"Ready",statusDetail:"Awaiting activation",executionMode:"local",currentTask:null,currentSignal:null,trendAssessment:"Waiting for data...",pendingExecution:!1,currentExposure:0,activePositions:[],portfolioValue:0,lastSyncTimestamp:0,settings:Bee,logs:[],operationHistory:[]};class rwe{constructor(){this.isInitialized=!1,this.initPromise=null,this.state=IP,this.listeners=new Set,this.initPromise=this.initialize()}async initialize(){this.isInitialized||(await this.loadState(),this.isInitialized=!0,this.notifyListeners())}async waitForInit(){this.initPromise&&await this.initPromise}async reloadFromStorage(){console.log("[DealerStore] Reloading from storage..."),await this.loadState(),this.notifyListeners()}reset(){console.log("[DealerStore] Resetting to initial state..."),this.state={...IP},this.notifyListeners()}async loadState(){var e,n;try{const r=await Ae.getItem(Ae.getUserKey("vault_dealer_storage"));if(r){const i=JSON.parse(r);let s=((e=i.settings)==null?void 0:e.indicatorSettings)||Ug;const o={};for(const a of Object.keys(Ug)){const l=s[a],c=Ug[a];o[a]={enabled:(l==null?void 0:l.enabled)??c.enabled,params:(l==null?void 0:l.params)??c.params,weight:(l==null?void 0:l.weight)??1}}this.state={...IP,...i,settings:{...Bee,...i.settings||{},indicatorSettings:o,selectedPreset:((n=i.settings)==null?void 0:n.selectedPreset)||"balanced"},isAnalyzing:!1,pendingExecution:!1,logs:i.logs||[]}}}catch(r){console.error("Failed to load dealer state:",r)}}async saveState(){try{await Ae.setItem(Ae.getUserKey("vault_dealer_storage"),JSON.stringify(this.state))}catch(e){console.error("Failed to save dealer state:",e)}}notifyListeners(){this.listeners.forEach(e=>e())}notify(){this.notifyListeners(),this.saveState()}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}getSnapshot(){return this.state}toggleDealer(e){this.state={...this.state,isOn:e,statusMessage:e?"Dealer Activated":"Dealer Stopped"},this.addLog("INFO",`Dealer turned ${e?"ON":"OFF"}`),this.notify()}updateSettings(e){this.state={...this.state,settings:{...this.state.settings,...e}},this.addLog("INFO","Settings updated"),this.notify()}setStrategyPrompt(e){this.updateSettings({strategyPrompt:e})}setAnalyzing(e){this.state={...this.state,isAnalyzing:e},this.notify()}updateStatus(e,n,r,i,s){this.state={...this.state,currentTask:e!==void 0?e:this.state.currentTask,currentSignal:n!==void 0?n:this.state.currentSignal,trendAssessment:r!==void 0?r:this.state.trendAssessment,currentExposure:i!==void 0?i:this.state.currentExposure,statusDetail:s!==void 0?s:this.state.statusDetail},this.notify()}updatePortfolioState(e,n,r){this.state={...this.state,activePositions:e,portfolioValue:n,currentExposure:r,lastSyncTimestamp:Date.now()},this.notify()}addLog(e,n,r){const s=[{id:Date.now().toString()+Math.random().toString().slice(2,5),timestamp:Date.now(),type:e,message:n,details:r},...this.state.logs].slice(0,100);this.state={...this.state,logs:s},this.notify()}clearLogs(){this.state={...this.state,logs:[]},this.notify()}reload(){this.state={...this.state,isAnalyzing:!1,currentTask:null,currentSignal:null,pendingExecution:!1,trendAssessment:"Reset by user",statusMessage:"Settings Applied"},this.addLog("INFO","System reloaded manually"),this.notify()}addOperationRecord(e){const r=[{...e,id:Date.now().toString()+Math.random().toString().slice(2,5)},...this.state.operationHistory].slice(0,50);this.state={...this.state,operationHistory:r},this.notify()}updateOperationStatus(e,n){const r=this.state.operationHistory.map(i=>i.cloid===e?{...i,...n}:i);this.state={...this.state,operationHistory:r},this.notify()}getTradeHistory(e,n=10,r=!0){let i=this.state.operationHistory;e&&(i=i.filter(a=>a.coin.toUpperCase()===e.toUpperCase()));const s=r?this.state.logs.filter(a=>a.type==="REASONING"||a.type==="TRADE"||a.type==="SIGNAL"):[];return{operations:i.slice(0,n).map(a=>{var c,u;const l=s.find(f=>f.message.includes(a.coin)&&Math.abs(f.timestamp-a.timestamp)<6e4);return{...a,fullReasoning:((c=l==null?void 0:l.details)==null?void 0:c.fullReason)||a.reasoning,analysisContext:(u=l==null?void 0:l.details)==null?void 0:u.context}}),totalOperations:i.length,recentLogs:s.slice(0,5)}}}const ft=new rwe,iwe=[{value:"politics",label:"Politics",icon:""},{value:"crypto",label:"Crypto",icon:""},{value:"sports",label:"Sports",icon:""},{value:"pop-culture",label:"Pop Culture",icon:""},{value:"science",label:"Science",icon:""},{value:"business",label:"Business",icon:""},{value:"other",label:"Other",icon:""}],Kb={balanced:{name:"Balanced",description:"Trade across all categories with balanced risk",emoji:"",categories:["politics","crypto","business","science"],marketCondition:"diverse markets with good liquidity"},highVolume:{name:"High Volume",description:"Focus on most liquid markets",emoji:"",categories:["politics","crypto","sports"],marketCondition:"high volume markets with tight spreads"},crypto:{name:"Crypto Focus",description:"Only cryptocurrency-related markets",emoji:"",categories:["crypto"],marketCondition:"crypto market events and predictions"},conservative:{name:"Conservative",description:"Low risk, high confidence trades only",emoji:"",categories:["politics","business"],marketCondition:"stable markets with clear probable outcomes"},custom:{name:"Custom",description:"Your custom configuration",emoji:"",categories:[],marketCondition:"user-defined"}},MT={balanced:`You are Polymarket Dealer, an autonomous prediction market trading engine.
Your goal is to identify high-probability trading opportunities across diverse markets.

RULES:
1. Analyze market question, current probability, volume, and time to resolution.
2. BUY YES when probability is undervalued (market < 40% but your analysis suggests > 60%).
3. BUY NO when probability is overvalued (market > 60% but your analysis suggests < 40%).
4. SELL positions when probability has moved 15%+ in your favor OR if new information changes thesis.
5. AVOID markets with < $10k liquidity or < 7 days to resolution (unless very high confidence).
6. Max position: 5% of bankroll per market.
7. HOLD if confidence < 65%.`,highVolume:`You are Polymarket Dealer, focused on liquid markets with high volume.
Your goal is to trade actively in markets with the best liquidity and tightest spreads.

RULES:
1. Only trade markets with > $50k volume in 24h.
2. Target spreads < 5% for entries and exits.
3. Look for momentum: price moving in a direction with increasing volume.
4. Use smaller positions (2% max) but trade more frequently.
5. Take profits quickly: exit at 10%+ gain.
6. Cut losses at 8%.
7. AVOID low-liquidity markets even if edge seems large.`,crypto:`You are Polymarket Dealer, specialized in cryptocurrency prediction markets.
Your goal is to leverage crypto market knowledge for prediction market alpha.

RULES:
1. Trade only crypto-related markets (price predictions, ETF approvals, protocol events).
2. Use your understanding of crypto market dynamics and sentiment.
3. BUY YES on bullish crypto catalysts you believe are underpriced.
4. BUY NO when crypto hype seems overextended.
5. Watch for correlation with actual crypto prices.
6. Higher conviction trades allowed (up to 8% of bankroll).
7. AVOID markets about specific coins you lack knowledge of.`,conservative:`You are Polymarket Dealer, taking a conservative low-risk approach.
Your goal is to identify very high probability trades with minimal downside.

RULES:
1. Only trade when confidence > 80%.
2. Focus on markets where outcome seems nearly certain (price > 85% or < 15%).
3. Look for arbitrage opportunities and mispriced markets.
4. Small position sizes (max 3% of bankroll).
5. AVOID volatile markets or those with incoming news catalysts.
6. Prefer longer time horizons (> 30 days to resolution).
7. HOLD cash if no clear opportunities.`,custom:`// Write your custom strategy instructions here...
// Example:
// You are a specialized Polymarket trader.
// 1. Focus on political markets only.
// 2. Trade based on polling data and historical patterns.
// 3. Never risk more than 2% per trade.`},swe=MT.balanced,Uee={strategyPrompt:swe,marketSelectionMode:"AI_DISCOVERY",selectedMarkets:[],allowedCategories:["politics","crypto","business","science"],maxPositionSizeUSDC:50,maxOpenPositions:5,minLiquidity:1e4,minVolume24h:5e3,minVolumeThreshold:5e3,minLiquidityThreshold:1e4,minSpreadThreshold:.02,confidenceThreshold:.6,bankrollType:"MANUAL",manualBankroll:100,checkIntervalSeconds:300,promptMode:"preset",selectedPreset:"balanced"},PP={isOn:!1,isAnalyzing:!1,statusMessage:"Ready",statusDetail:"Awaiting activation",currentTask:null,currentSignal:null,analysisNote:"Waiting for data...",pendingExecution:!1,currentExposure:0,activePositions:[],portfolioValue:0,lastSyncTimestamp:0,settings:Uee,logs:[],operationHistory:[]};class owe{constructor(){this.isInitialized=!1,this.initPromise=null,this.state=PP,this.listeners=new Set,this.initPromise=this.initialize()}async initialize(){this.isInitialized||(await this.loadState(),this.isInitialized=!0,this.notifyListeners())}async waitForInit(){this.initPromise&&await this.initPromise}async reloadFromStorage(){console.log("[PolymarketStore] Reloading from storage..."),await this.loadState(),this.notifyListeners()}reset(){console.log("[PolymarketStore] Resetting to initial state..."),this.state={...PP},this.notifyListeners()}async loadState(){try{const e=Ae.getUserKey("vault_polymarket_storage");console.log("[PolymarketStore] Loading from key:",e);const n=await Ae.getItem(e);if(n){const r=JSON.parse(n);console.log("[PolymarketStore] Loaded settings:",r.settings),this.state={...PP,...r,settings:{...Uee,...r.settings||{}},isAnalyzing:!1,pendingExecution:!1,logs:r.logs||[]}}else console.log("[PolymarketStore] No saved data found")}catch(e){console.error("Failed to load Polymarket state:",e)}}async saveState(){try{await Ae.setItem(Ae.getUserKey("vault_polymarket_storage"),JSON.stringify(this.state))}catch(e){console.error("Failed to save Polymarket state:",e)}}notifyListeners(){this.listeners.forEach(e=>e())}notify(){this.notifyListeners(),this.saveState()}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}getSnapshot(){return this.state}toggleDealer(e){this.state={...this.state,isOn:e,statusMessage:e?"Polymarket Dealer Activated":"Polymarket Dealer Stopped"},this.addLog("INFO",`Polymarket Dealer turned ${e?"ON":"OFF"}`),this.notify()}updateSettings(e){this.state={...this.state,settings:{...this.state.settings,...e}},this.addLog("INFO","Polymarket settings updated"),this.notify()}setStrategyPrompt(e){this.updateSettings({strategyPrompt:e})}setAnalyzing(e){this.state={...this.state,isAnalyzing:e},this.notify()}setCurrentTask(e){this.state={...this.state,currentTask:e},this.notify()}setStatusMessage(e){this.state={...this.state,statusMessage:e},this.notify()}setStatusDetail(e){this.state={...this.state,statusDetail:e},this.notify()}setAnalysisNote(e){this.state={...this.state,analysisNote:e},this.notify()}setCurrentSignal(e){this.state={...this.state,currentSignal:e},this.notify()}updateStatus(e,n,r,i,s){this.state={...this.state,currentTask:e!==void 0?e:this.state.currentTask,currentSignal:n!==void 0?n:this.state.currentSignal,analysisNote:r!==void 0?r:this.state.analysisNote,currentExposure:i!==void 0?i:this.state.currentExposure,statusDetail:s!==void 0?s:this.state.statusDetail},this.notify()}updatePortfolioState(e,n,r){this.state={...this.state,activePositions:e,portfolioValue:n,currentExposure:r,lastSyncTimestamp:Date.now()},this.notify()}addLog(e,n,r){const s=[{id:Date.now().toString()+Math.random().toString().slice(2,5),timestamp:Date.now(),type:e,message:n,details:r},...this.state.logs].slice(0,100);this.state={...this.state,logs:s},this.notify()}clearLogs(){this.state={...this.state,logs:[]},this.notify()}reload(){this.state={...this.state,isAnalyzing:!1,currentTask:null,currentSignal:null,pendingExecution:!1,analysisNote:"Reset by user",statusMessage:"Settings Applied"},this.addLog("INFO","Polymarket system reloaded manually"),this.notify()}addOperationRecord(e){const r=[{...e,id:Date.now().toString()+Math.random().toString().slice(2,5)},...this.state.operationHistory].slice(0,50);this.state={...this.state,operationHistory:r},this.notify()}updateOperationStatus(e,n){const r=this.state.operationHistory.map(i=>i.id===e?{...i,...n}:i);this.state={...this.state,operationHistory:r},this.notify()}getTradeHistory(e=10,n=!0){let r=this.state.operationHistory;const i=n?this.state.logs.filter(o=>o.type==="REASONING"||o.type==="TRADE"||o.type==="SIGNAL"):[];return{operations:r.slice(0,e).map(o=>{var l,c;const a=i.find(u=>u.message.includes(o.question.slice(0,30))&&Math.abs(u.timestamp-o.timestamp)<6e4);return{...o,fullReasoning:((l=a==null?void 0:a.details)==null?void 0:l.fullReason)||o.reasoning,analysisContext:(c=a==null?void 0:a.details)==null?void 0:c.context}}),totalOperations:r.length,recentLogs:i.slice(0,5)}}}const lt=new owe,Fee=T.createContext(void 0);function A1(){const t=T.useContext(Fee);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}function R$(t){return t?{uid:t.id,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified}:null}function awe({children:t}){const[e,n]=T.useState(null),[r,i]=T.useState(!0);T.useEffect(()=>{(async()=>{if(!Wbe()){console.warn("[AuthContext] Supabase not configured. Auth will not work until configured."),i(!1);return}await Kbe(),await da.initialize();const E=R$(da.getUser());n(E),Ae.setUserId((E==null?void 0:E.uid)||null),E!=null&&E.uid&&(await Ae.migrateToUserScoped(),await Un.reload(),await ft.reloadFromStorage(),await lt.reloadFromStorage()),i(!1)})();const b=da.onAuthStateChange(async E=>{const C=R$(E);n(C),Ae.setUserId((C==null?void 0:C.uid)||null),C!=null&&C.uid?(await Ae.migrateToUserScoped(),await Un.reload(),await ft.reloadFromStorage(),await lt.reloadFromStorage()):(ft.reset(),lt.reset())});return()=>b()},[]);const v={user:e,loading:r,signInWithGoogle:async()=>{try{await da.signInWithGoogle()}catch(x){throw console.error("Google sign-in error:",x),x}},signInWithGitHub:async()=>{try{await da.signInWithGitHub()}catch(x){throw console.error("GitHub sign-in error:",x),x}},signInWithDiscord:async()=>{try{await da.signInWithDiscord()}catch(x){throw console.error("Discord sign-in error:",x),x}},signInWithEthereum:async()=>{try{await da.signInWithEthereum()}catch(x){throw console.error("Ethereum sign-in error:",x),x}},signInWithSolana:async()=>{try{await da.signInWithSolana()}catch(x){throw console.error("Solana sign-in error:",x),x}},signInWithEmail:async(x,b)=>{try{await da.signInWithEmail(x,b)}catch(E){throw console.error("Email sign-in error:",E),E}},signUp:async(x,b)=>{try{await da.signUp(x,b)}catch(E){throw console.error("Sign-up error:",E),E}},logout:async()=>{try{await da.logout()}catch(x){throw console.error("Logout error:",x),x}},deleteAccount:async()=>{try{await da.deleteAccount()}catch(x){throw console.error("Delete account error:",x),x}}};return h.jsx(Fee.Provider,{value:v,children:t})}var Ce=(t=>(t.DASHBOARD="dashboard",t.VAULT="vault",t.AGENT="agent",t.SCHEDULER="scheduler",t.HYPERLIQUID="hyperliquid",t.VAULT_DEALER="vault_dealer",t.DEALER_DASHBOARD="dealer_dashboard",t.DEALER_THINKING="dealer_thinking",t.DEALER_CONFIG="dealer_config",t.DEALER_PROMPT="dealer_prompt",t.CONFIGURATION="configuration",t.SETTINGS="settings",t.HISTORY="history",t.TOKEN_COSTS="token_costs",t.POLYMARKET_DEALER="polymarket_dealer",t.POLYMARKET_DASHBOARD="polymarket_dashboard",t.POLYMARKET_THINKING="polymarket_thinking",t.POLYMARKET_CONFIG="polymarket_config",t.POLYMARKET_PROMPT="polymarket_prompt",t.PRIVACY="privacy",t.TERMS="terms",t))(Ce||{});const EL=T.createContext({});function SL(t){const e=T.useRef(null);return e.current===null&&(e.current=t()),e.current}const AL=typeof window<"u",$ee=AL?T.useLayoutEffect:T.useEffect,XC=T.createContext(null);function TL(t,e){t.indexOf(e)===-1&&t.push(e)}function kL(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const nd=(t,e,n)=>n>e?e:n<t?t:n;let CL=()=>{};const rd={},zee=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function Hee(t){return typeof t=="object"&&t!==null}const Vee=t=>/^0[^.\s]+$/u.test(t);function NL(t){let e;return()=>(e===void 0&&(e=t()),e)}const Ua=t=>t,lwe=(t,e)=>n=>e(t(n)),T1=(...t)=>t.reduce(lwe),fw=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class _L{constructor(){this.subscriptions=[]}add(e){return TL(this.subscriptions,e),()=>kL(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const wc=t=>t*1e3,ja=t=>t/1e3;function qee(t,e){return e?t*(1e3/e):0}const Gee=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,cwe=1e-7,uwe=12;function dwe(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=Gee(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>cwe&&++a<uwe);return o}function k1(t,e,n,r){if(t===e&&n===r)return Ua;const i=s=>dwe(s,0,1,t,n);return s=>s===0||s===1?s:Gee(i(s),e,r)}const Kee=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Wee=t=>e=>1-t(1-e),Yee=k1(.33,1.53,.69,.99),IL=Wee(Yee),Jee=Kee(IL),Xee=t=>(t*=2)<1?.5*IL(t):.5*(2-Math.pow(2,-10*(t-1))),PL=t=>1-Math.sin(Math.acos(t)),Qee=Wee(PL),Zee=Kee(PL),fwe=k1(.42,0,1,1),hwe=k1(0,0,.58,1),ete=k1(.42,0,.58,1),pwe=t=>Array.isArray(t)&&typeof t[0]!="number",tte=t=>Array.isArray(t)&&typeof t[0]=="number",mwe={linear:Ua,easeIn:fwe,easeInOut:ete,easeOut:hwe,circIn:PL,circInOut:Zee,circOut:Qee,backIn:IL,backInOut:Jee,backOut:Yee,anticipate:Xee},gwe=t=>typeof t=="string",O$=t=>{if(tte(t)){CL(t.length===4);const[e,n,r,i]=t;return k1(e,n,r,i)}else if(gwe(t))return mwe[t];return t},DS=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function ywe(t,e){let n=new Set,r=new Set,i=!1,s=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function l(u){o.has(u)&&(c.schedule(u),t()),u(a)}const c={schedule:(u,f=!1,m=!1)=>{const v=m&&i?n:r;return f&&o.add(u),v.has(u)||v.add(u),u},cancel:u=>{r.delete(u),o.delete(u)},process:u=>{if(a=u,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(l),n.clear(),i=!1,s&&(s=!1,c.process(u))}};return c}const xwe=40;function nte(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=DS.reduce((k,O)=>(k[O]=ywe(s),k),{}),{setup:a,read:l,resolveKeyframes:c,preUpdate:u,update:f,preRender:m,render:g,postRender:v}=o,x=()=>{const k=rd.useManualTiming?i.timestamp:performance.now();n=!1,rd.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(k-i.timestamp,xwe),1)),i.timestamp=k,i.isProcessing=!0,a.process(i),l.process(i),c.process(i),u.process(i),f.process(i),m.process(i),g.process(i),v.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(x))},b=()=>{n=!0,r=!0,i.isProcessing||t(x)};return{schedule:DS.reduce((k,O)=>{const U=o[O];return k[O]=(R,$=!1,V=!1)=>(n||b(),U.schedule(R,$,V)),k},{}),cancel:k=>{for(let O=0;O<DS.length;O++)o[DS[O]].cancel(k)},state:i,steps:o}}const{schedule:kr,cancel:rh,state:es,steps:RP}=nte(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ua,!0);let JA;function vwe(){JA=void 0}const ho={now:()=>(JA===void 0&&ho.set(es.isProcessing||rd.useManualTiming?es.timestamp:performance.now()),JA),set:t=>{JA=t,queueMicrotask(vwe)}},rte=t=>e=>typeof e=="string"&&e.startsWith(t),ite=rte("--"),bwe=rte("var(--"),RL=t=>bwe(t)?wwe.test(t.split("/*")[0].trim()):!1,wwe=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Ix={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},hw={...Ix,transform:t=>nd(0,1,t)},LS={...Ix,default:1},Wb=t=>Math.round(t*1e5)/1e5,OL=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Ewe(t){return t==null}const Swe=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,ML=(t,e)=>n=>!!(typeof n=="string"&&Swe.test(n)&&n.startsWith(t)||e&&!Ewe(n)&&Object.prototype.hasOwnProperty.call(n,e)),ste=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(OL);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},Awe=t=>nd(0,255,t),OP={...Ix,transform:t=>Math.round(Awe(t))},mp={test:ML("rgb","red"),parse:ste("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+OP.transform(t)+", "+OP.transform(e)+", "+OP.transform(n)+", "+Wb(hw.transform(r))+")"};function Twe(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Z3={test:ML("#"),parse:Twe,transform:mp.transform},C1=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),bf=C1("deg"),Ec=C1("%"),Xt=C1("px"),kwe=C1("vh"),Cwe=C1("vw"),M$={...Ec,parse:t=>Ec.parse(t)/100,transform:t=>Ec.transform(t*100)},xg={test:ML("hsl","hue"),parse:ste("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Ec.transform(Wb(e))+", "+Ec.transform(Wb(n))+", "+Wb(hw.transform(r))+")"},di={test:t=>mp.test(t)||Z3.test(t)||xg.test(t),parse:t=>mp.test(t)?mp.parse(t):xg.test(t)?xg.parse(t):Z3.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?mp.transform(t):xg.transform(t),getAnimatableNone:t=>{const e=di.parse(t);return e.alpha=0,di.transform(e)}},Nwe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function _we(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(OL))==null?void 0:e.length)||0)+(((n=t.match(Nwe))==null?void 0:n.length)||0)>0}const ote="number",ate="color",Iwe="var",Pwe="var(",D$="${}",Rwe=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function pw(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(Rwe,l=>(di.test(l)?(r.color.push(s),i.push(ate),n.push(di.parse(l))):l.startsWith(Pwe)?(r.var.push(s),i.push(Iwe),n.push(l)):(r.number.push(s),i.push(ote),n.push(parseFloat(l))),++s,D$)).split(D$);return{values:n,split:a,indexes:r,types:i}}function lte(t){return pw(t).values}function cte(t){const{split:e,types:n}=pw(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===ote?s+=Wb(i[o]):a===ate?s+=di.transform(i[o]):s+=i[o]}return s}}const Owe=t=>typeof t=="number"?0:di.test(t)?di.getAnimatableNone(t):t;function Mwe(t){const e=lte(t);return cte(t)(e.map(Owe))}const ih={test:_we,parse:lte,createTransformer:cte,getAnimatableNone:Mwe};function MP(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Dwe({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=MP(l,a,t+1/3),s=MP(l,a,t),o=MP(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function DT(t,e){return n=>n>0?e:t}const Dr=(t,e,n)=>t+(e-t)*n,DP=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},Lwe=[Z3,mp,xg],jwe=t=>Lwe.find(e=>e.test(t));function L$(t){const e=jwe(t);if(!e)return!1;let n=e.parse(t);return e===xg&&(n=Dwe(n)),n}const j$=(t,e)=>{const n=L$(t),r=L$(e);if(!n||!r)return DT(t,e);const i={...n};return s=>(i.red=DP(n.red,r.red,s),i.green=DP(n.green,r.green,s),i.blue=DP(n.blue,r.blue,s),i.alpha=Dr(n.alpha,r.alpha,s),mp.transform(i))},e4=new Set(["none","hidden"]);function Bwe(t,e){return e4.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function Uwe(t,e){return n=>Dr(t,e,n)}function DL(t){return typeof t=="number"?Uwe:typeof t=="string"?RL(t)?DT:di.test(t)?j$:zwe:Array.isArray(t)?ute:typeof t=="object"?di.test(t)?j$:Fwe:DT}function ute(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>DL(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function Fwe(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=DL(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function $we(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],o=t.indexes[s][r[s]],a=t.values[o]??0;n[i]=a,r[s]++}return n}const zwe=(t,e)=>{const n=ih.createTransformer(e),r=pw(t),i=pw(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?e4.has(t)&&!i.values.length||e4.has(e)&&!r.values.length?Bwe(t,e):T1(ute($we(r,i),i.values),n):DT(t,e)};function dte(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Dr(t,e,n):DL(t)(t,e)}const Hwe=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>kr.update(e,n),stop:()=>rh(e),now:()=>es.isProcessing?es.timestamp:ho.now()}},fte=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=Math.round(t(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},LT=2e4;function LL(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<LT;)e+=n,r=t.next(e);return e>=LT?1/0:e}function Vwe(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(LL(r),LT);return{type:"keyframes",ease:s=>r.next(i*s).value/e,duration:ja(i)}}const qwe=5;function hte(t,e,n){const r=Math.max(e-qwe,0);return qee(n-t(r),e-r)}const Hr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},LP=.001;function Gwe({duration:t=Hr.duration,bounce:e=Hr.bounce,velocity:n=Hr.velocity,mass:r=Hr.mass}){let i,s,o=1-e;o=nd(Hr.minDamping,Hr.maxDamping,o),t=nd(Hr.minDuration,Hr.maxDuration,ja(t)),o<1?(i=c=>{const u=c*o,f=u*t,m=u-n,g=t4(c,o),v=Math.exp(-f);return LP-m/g*v},s=c=>{const f=c*o*t,m=f*n+n,g=Math.pow(o,2)*Math.pow(c,2)*t,v=Math.exp(-f),x=t4(Math.pow(c,2),o);return(-i(c)+LP>0?-1:1)*((m-g)*v)/x}):(i=c=>{const u=Math.exp(-c*t),f=(c-n)*t+1;return-LP+u*f},s=c=>{const u=Math.exp(-c*t),f=(n-c)*(t*t);return u*f});const a=5/t,l=Wwe(i,s,a);if(t=wc(t),isNaN(l))return{stiffness:Hr.stiffness,damping:Hr.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const Kwe=12;function Wwe(t,e,n){let r=n;for(let i=1;i<Kwe;i++)r=r-t(r)/e(r);return r}function t4(t,e){return t*Math.sqrt(1-e*e)}const Ywe=["duration","bounce"],Jwe=["stiffness","damping","mass"];function B$(t,e){return e.some(n=>t[n]!==void 0)}function Xwe(t){let e={velocity:Hr.velocity,stiffness:Hr.stiffness,damping:Hr.damping,mass:Hr.mass,isResolvedFromDuration:!1,...t};if(!B$(t,Jwe)&&B$(t,Ywe))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*nd(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Hr.mass,stiffness:i,damping:s}}else{const n=Gwe(t);e={...e,...n,mass:Hr.mass},e.isResolvedFromDuration=!0}return e}function jT(t=Hr.visualDuration,e=Hr.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:f,velocity:m,isResolvedFromDuration:g}=Xwe({...n,velocity:-ja(n.velocity||0)}),v=m||0,x=c/(2*Math.sqrt(l*u)),b=o-s,E=ja(Math.sqrt(l/u)),C=Math.abs(b)<5;r||(r=C?Hr.restSpeed.granular:Hr.restSpeed.default),i||(i=C?Hr.restDelta.granular:Hr.restDelta.default);let k;if(x<1){const U=t4(E,x);k=R=>{const $=Math.exp(-x*E*R);return o-$*((v+x*E*b)/U*Math.sin(U*R)+b*Math.cos(U*R))}}else if(x===1)k=U=>o-Math.exp(-E*U)*(b+(v+E*b)*U);else{const U=E*Math.sqrt(x*x-1);k=R=>{const $=Math.exp(-x*E*R),V=Math.min(U*R,300);return o-$*((v+x*E*b)*Math.sinh(V)+U*b*Math.cosh(V))/U}}const O={calculatedDuration:g&&f||null,next:U=>{const R=k(U);if(g)a.done=U>=f;else{let $=U===0?v:0;x<1&&($=U===0?wc(v):hte(k,U,R));const V=Math.abs($)<=r,j=Math.abs(o-R)<=i;a.done=V&&j}return a.value=a.done?o:R,a},toString:()=>{const U=Math.min(LL(O),LT),R=fte($=>O.next(U*$).value,U,30);return U+"ms "+R},toTransition:()=>{}};return O}jT.applyToOptions=t=>{const e=Vwe(t,100,jT);return t.ease=e.ease,t.duration=wc(e.duration),t.type="keyframes",t};function n4({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const f=t[0],m={done:!1,value:f},g=V=>a!==void 0&&V<a||l!==void 0&&V>l,v=V=>a===void 0?l:l===void 0||Math.abs(a-V)<Math.abs(l-V)?a:l;let x=n*e;const b=f+x,E=o===void 0?b:o(b);E!==b&&(x=E-f);const C=V=>-x*Math.exp(-V/r),k=V=>E+C(V),O=V=>{const j=C(V),F=k(V);m.done=Math.abs(j)<=c,m.value=m.done?E:F};let U,R;const $=V=>{g(m.value)&&(U=V,R=jT({keyframes:[m.value,v(m.value)],velocity:hte(k,V,m.value),damping:i,stiffness:s,restDelta:c,restSpeed:u}))};return $(0),{calculatedDuration:null,next:V=>{let j=!1;return!R&&U===void 0&&(j=!0,O(V),$(V)),U!==void 0&&V>=U?R.next(V-U):(!j&&O(V),m)}}}function Qwe(t,e,n){const r=[],i=n||rd.mix||dte,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||Ua:e;a=T1(l,a)}r.push(a)}return r}function Zwe(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(CL(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=Qwe(e,r,i),l=a.length,c=u=>{if(o&&u<t[0])return e[0];let f=0;if(l>1)for(;f<t.length-2&&!(u<t[f+1]);f++);const m=fw(t[f],t[f+1],u);return a[f](m)};return n?u=>c(nd(t[0],t[s-1],u)):c}function e1e(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=fw(0,e,r);t.push(Dr(n,1,i))}}function t1e(t){const e=[0];return e1e(e,t.length-1),e}function n1e(t,e){return t.map(n=>n*e)}function r1e(t,e){return t.map(()=>e||ete).splice(0,t.length-1)}function Yb({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=pwe(r)?r.map(O$):O$(r),s={done:!1,value:e[0]},o=n1e(n&&n.length===e.length?n:t1e(e),t),a=Zwe(o,e,{ease:Array.isArray(i)?i:r1e(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const i1e=t=>t!==null;function jL(t,{repeat:e,repeatType:n="loop"},r,i=1){const s=t.filter(i1e),a=i<0||e&&n!=="loop"&&e%2===1?0:s.length-1;return!a||r===void 0?s[a]:r}const s1e={decay:n4,inertia:n4,tween:Yb,keyframes:Yb,spring:jT};function pte(t){typeof t.type=="string"&&(t.type=s1e[t.type])}class BL{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const o1e=t=>t/100;class UL extends BL{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==ho.now()&&this.tick(ho.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;pte(e);const{type:n=Yb,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=e;let{keyframes:a}=e;const l=n||Yb;l!==Yb&&typeof a[0]!="number"&&(this.mixKeyframes=T1(o1e,dte(a[0],a[1])),a=[0,100]);const c=l({...e,keyframes:a});s==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...a].reverse(),velocity:-o})),c.calculatedDuration===null&&(c.calculatedDuration=LL(c));const{calculatedDuration:u}=c;this.calculatedDuration=u,this.resolvedDuration=u+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=c}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:c=0,keyframes:u,repeat:f,repeatType:m,repeatDelay:g,type:v,onUpdate:x,finalKeyframe:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const E=this.currentTime-c*(this.playbackSpeed>=0?1:-1),C=this.playbackSpeed>=0?E<0:E>i;this.currentTime=Math.max(E,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let k=this.currentTime,O=r;if(f){const V=Math.min(this.currentTime,i)/a;let j=Math.floor(V),F=V%1;!F&&V>=1&&(F=1),F===1&&j--,j=Math.min(j,f+1),!!(j%2)&&(m==="reverse"?(F=1-F,g&&(F-=g/a)):m==="mirror"&&(O=o)),k=nd(0,1,F)*a}const U=C?{done:!1,value:u[0]}:O.next(k);s&&(U.value=s(U.value));let{done:R}=U;!C&&l!==null&&(R=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const $=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&R);return $&&v!==n4&&(U.value=jL(u,this.options,b,this.speed)),x&&x(U.value),$&&this.finish(),U}then(e,n){return this.finished.then(e,n)}get duration(){return ja(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+ja(e)}get time(){return ja(this.currentTime)}set time(e){var n;e=wc(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(ho.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=ja(this.currentTime))}play(){var i,s;if(this.isStopped)return;const{driver:e=Hwe,startTime:n}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(s=(i=this.options).onPlay)==null||s.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(ho.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function a1e(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const gp=t=>t*180/Math.PI,r4=t=>{const e=gp(Math.atan2(t[1],t[0]));return i4(e)},l1e={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:r4,rotateZ:r4,skewX:t=>gp(Math.atan(t[1])),skewY:t=>gp(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},i4=t=>(t=t%360,t<0&&(t+=360),t),U$=r4,F$=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),$$=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),c1e={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:F$,scaleY:$$,scale:t=>(F$(t)+$$(t))/2,rotateX:t=>i4(gp(Math.atan2(t[6],t[5]))),rotateY:t=>i4(gp(Math.atan2(-t[2],t[0]))),rotateZ:U$,rotate:U$,skewX:t=>gp(Math.atan(t[4])),skewY:t=>gp(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function s4(t){return t.includes("scale")?1:0}function o4(t,e){if(!t||t==="none")return s4(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=c1e,i=n;else{const a=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=l1e,i=a}if(!i)return s4(e);const s=r[e],o=i[1].split(",").map(d1e);return typeof s=="function"?s(o):o[s]}const u1e=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return o4(n,e)};function d1e(t){return parseFloat(t.trim())}const Px=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Rx=new Set(Px),z$=t=>t===Ix||t===Xt,f1e=new Set(["x","y","z"]),h1e=Px.filter(t=>!f1e.has(t));function p1e(t){const e=[];return h1e.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Jp={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>o4(e,"x"),y:(t,{transform:e})=>o4(e,"y")};Jp.translateX=Jp.x;Jp.translateY=Jp.y;const Xp=new Set;let a4=!1,l4=!1,c4=!1;function mte(){if(l4){const t=Array.from(Xp).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=p1e(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))==null||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}l4=!1,a4=!1,Xp.forEach(t=>t.complete(c4)),Xp.clear()}function gte(){Xp.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(l4=!0)})}function m1e(){c4=!0,gte(),mte(),c4=!1}class FL{constructor(e,n,r,i,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Xp.add(this),a4||(a4=!0,kr.read(gte),kr.resolveKeyframes(mte))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const s=i==null?void 0:i.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&n){const a=r.readValue(n,o);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=o),i&&s===void 0&&i.set(e[0])}a1e(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Xp.delete(this)}cancel(){this.state==="scheduled"&&(Xp.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const g1e=t=>t.startsWith("--");function y1e(t,e,n){g1e(e)?t.style.setProperty(e,n):t.style[e]=n}const x1e=NL(()=>window.ScrollTimeline!==void 0),v1e={};function b1e(t,e){const n=NL(t);return()=>v1e[e]??n()}const yte=b1e(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Ib=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,H$={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ib([0,.65,.55,1]),circOut:Ib([.55,0,1,.45]),backIn:Ib([.31,.01,.66,-.59]),backOut:Ib([.33,1.53,.69,.99])};function xte(t,e){if(t)return typeof t=="function"?yte()?fte(t,e):"ease-out":tte(t)?Ib(t):Array.isArray(t)?t.map(n=>xte(n,e)||H$.easeOut):H$[t]}function w1e(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeOut",times:l}={},c=void 0){const u={[e]:n};l&&(u.offset=l);const f=xte(a,i);Array.isArray(f)&&(u.easing=f);const m={delay:r,duration:i,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return c&&(m.pseudoElement=c),t.animate(u,m)}function vte(t){return typeof t=="function"&&"applyToOptions"in t}function E1e({type:t,...e}){return vte(t)&&yte()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class S1e extends BL{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=e;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=e,CL(typeof e.type!="string");const c=E1e(e);this.animation=w1e(n,r,i,c,s),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const u=jL(i,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(u):y1e(n,r,u),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return ja(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+ja(e)}get time(){return ja(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=wc(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&x1e()?(this.animation.timeline=e,Ua):n(this)}}const bte={anticipate:Xee,backInOut:Jee,circInOut:Zee};function A1e(t){return t in bte}function T1e(t){typeof t.ease=="string"&&A1e(t.ease)&&(t.ease=bte[t.ease])}const V$=10;class k1e extends S1e{constructor(e){T1e(e),pte(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const a=new UL({...o,autoplay:!1}),l=wc(this.finishedTime??this.time);n.setWithVelocity(a.sample(l-V$).value,a.sample(l).value,V$),a.stop()}}const q$=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(ih.test(t)||t==="0")&&!t.startsWith("url("));function C1e(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function N1e(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=q$(i,e),a=q$(s,e);return!o||!a?!1:C1e(t)||(n==="spring"||vte(n))&&r}function u4(t){t.duration=0,t.type="keyframes"}const _1e=new Set(["opacity","clipPath","filter","transform"]),I1e=NL(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function P1e(t){var u;const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:s,type:o}=t;if(!(((u=e==null?void 0:e.owner)==null?void 0:u.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=e.owner.getProps();return I1e()&&n&&_1e.has(n)&&(n!=="transform"||!c)&&!l&&!r&&i!=="mirror"&&s!==0&&o!=="inertia"}const R1e=40;class O1e extends BL{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",keyframes:a,name:l,motionValue:c,element:u,...f}){var v;super(),this.stop=()=>{var x,b;this._animation&&(this._animation.stop(),(x=this.stopTimeline)==null||x.call(this)),(b=this.keyframeResolver)==null||b.cancel()},this.createdAt=ho.now();const m={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,name:l,motionValue:c,element:u,...f},g=(u==null?void 0:u.KeyframeResolver)||FL;this.keyframeResolver=new g(a,(x,b,E)=>this.onKeyframesResolved(x,b,m,!E),l,c,u),(v=this.keyframeResolver)==null||v.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:s,type:o,velocity:a,delay:l,isHandoff:c,onUpdate:u}=r;this.resolvedAt=ho.now(),N1e(e,s,o,a)||((rd.instantAnimations||!l)&&(u==null||u(jL(e,r,n))),e[0]=e[e.length-1],u4(r),r.repeat=0);const m={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>R1e?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},g=!c&&P1e(m)?new k1e({...m,element:m.motionValue.owner.current}):new UL(m);g.finished.then(()=>this.notifyFinished()).catch(Ua),this.pendingTimeline&&(this.stopTimeline=g.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=g}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),m1e()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const M1e=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function D1e(t){const e=M1e.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function wte(t,e,n=1){const[r,i]=D1e(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return zee(o)?parseFloat(o):o}return RL(i)?wte(i,e,n+1):i}function $L(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const Ete=new Set(["width","height","top","left","right","bottom",...Px]),L1e={test:t=>t==="auto",parse:t=>t},Ste=t=>e=>e.test(t),Ate=[Ix,Xt,Ec,bf,Cwe,kwe,L1e],G$=t=>Ate.find(Ste(t));function j1e(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Vee(t):!0}const B1e=new Set(["brightness","contrast","saturate","opacity"]);function U1e(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(OL)||[];if(!r)return t;const i=n.replace(r,"");let s=B1e.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const F1e=/\b([a-z-]*)\(.*?\)/gu,d4={...ih,getAnimatableNone:t=>{const e=t.match(F1e);return e?e.map(U1e).join(" "):t}},K$={...Ix,transform:Math.round},$1e={rotate:bf,rotateX:bf,rotateY:bf,rotateZ:bf,scale:LS,scaleX:LS,scaleY:LS,scaleZ:LS,skew:bf,skewX:bf,skewY:bf,distance:Xt,translateX:Xt,translateY:Xt,translateZ:Xt,x:Xt,y:Xt,z:Xt,perspective:Xt,transformPerspective:Xt,opacity:hw,originX:M$,originY:M$,originZ:Xt},zL={borderWidth:Xt,borderTopWidth:Xt,borderRightWidth:Xt,borderBottomWidth:Xt,borderLeftWidth:Xt,borderRadius:Xt,radius:Xt,borderTopLeftRadius:Xt,borderTopRightRadius:Xt,borderBottomRightRadius:Xt,borderBottomLeftRadius:Xt,width:Xt,maxWidth:Xt,height:Xt,maxHeight:Xt,top:Xt,right:Xt,bottom:Xt,left:Xt,padding:Xt,paddingTop:Xt,paddingRight:Xt,paddingBottom:Xt,paddingLeft:Xt,margin:Xt,marginTop:Xt,marginRight:Xt,marginBottom:Xt,marginLeft:Xt,backgroundPositionX:Xt,backgroundPositionY:Xt,...$1e,zIndex:K$,fillOpacity:hw,strokeOpacity:hw,numOctaves:K$},z1e={...zL,color:di,backgroundColor:di,outlineColor:di,fill:di,stroke:di,borderColor:di,borderTopColor:di,borderRightColor:di,borderBottomColor:di,borderLeftColor:di,filter:d4,WebkitFilter:d4},Tte=t=>z1e[t];function kte(t,e){let n=Tte(t);return n!==d4&&(n=ih),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const H1e=new Set(["auto","none","0"]);function V1e(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!H1e.has(s)&&pw(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=kte(n,i)}class q1e extends FL{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),RL(c))){const u=wte(c,n.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!Ete.has(r)||e.length!==2)return;const[i,s]=e,o=G$(i),a=G$(s);if(o!==a)if(z$(o)&&z$(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else Jp[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||j1e(e[i]))&&r.push(i);r.length&&V1e(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Jp[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var a;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,o=r[s];r[s]=Jp[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([l,c])=>{e.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function G1e(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=(n==null?void 0:n[t])??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const Cte=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function Nte(t){return Hee(t)&&"offsetHeight"in t}const W$=30,K1e=t=>!isNaN(parseFloat(t));class W1e{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var s;const i=ho.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=ho.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=K1e(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new _L);const r=this.events[e].add(n);return e==="change"?()=>{r(),kr.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=ho.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>W$)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,W$);return qee(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Qy(t,e){return new W1e(t,e)}const{schedule:HL}=nte(queueMicrotask,!1),tl={x:!1,y:!1};function _te(){return tl.x||tl.y}function Y1e(t){return t==="x"||t==="y"?tl[t]?null:(tl[t]=!0,()=>{tl[t]=!1}):tl.x||tl.y?null:(tl.x=tl.y=!0,()=>{tl.x=tl.y=!1})}function Ite(t,e){const n=G1e(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function Y$(t){return!(t.pointerType==="touch"||_te())}function J1e(t,e,n={}){const[r,i,s]=Ite(t,n),o=a=>{if(!Y$(a))return;const{target:l}=a,c=e(l,a);if(typeof c!="function"||!l)return;const u=f=>{Y$(f)&&(c(f),l.removeEventListener("pointerleave",u))};l.addEventListener("pointerleave",u,i)};return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const Pte=(t,e)=>e?t===e?!0:Pte(t,e.parentElement):!1,VL=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,X1e=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Q1e(t){return X1e.has(t.tagName)||t.tabIndex!==-1}const XA=new WeakSet;function J$(t){return e=>{e.key==="Enter"&&t(e)}}function jP(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Z1e=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=J$(()=>{if(XA.has(n))return;jP(n,"down");const i=J$(()=>{jP(n,"up")}),s=()=>jP(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function X$(t){return VL(t)&&!_te()}function eEe(t,e,n={}){const[r,i,s]=Ite(t,n),o=a=>{const l=a.currentTarget;if(!X$(a))return;XA.add(l);const c=e(l,a),u=(g,v)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",m),XA.has(l)&&XA.delete(l),X$(g)&&typeof c=="function"&&c(g,{success:v})},f=g=>{u(g,l===window||l===document||n.useGlobalTarget||Pte(l,g.target))},m=g=>{u(g,!1)};window.addEventListener("pointerup",f,i),window.addEventListener("pointercancel",m,i)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),Nte(a)&&(a.addEventListener("focus",c=>Z1e(c,i)),!Q1e(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),s}function Rte(t){return Hee(t)&&"ownerSVGElement"in t}function tEe(t){return Rte(t)&&t.tagName==="svg"}const Cs=t=>!!(t&&t.getVelocity),nEe=[...Ate,di,ih],rEe=t=>nEe.find(Ste(t)),qL=T.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function Q$(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function iEe(...t){return e=>{let n=!1;const r=t.map(i=>{const s=Q$(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():Q$(t[i],null)}}}}function sEe(...t){return T.useCallback(iEe(...t),t)}class oEe extends T.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=Nte(r)&&r.offsetWidth||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=i-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function aEe({children:t,isPresent:e,anchorX:n,root:r}){const i=T.useId(),s=T.useRef(null),o=T.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=T.useContext(qL),l=sEe(s,t==null?void 0:t.ref);return T.useInsertionEffect(()=>{const{width:c,height:u,top:f,left:m,right:g}=o.current;if(e||!s.current||!c||!u)return;const v=n==="left"?`left: ${m}`:`right: ${g}`;s.current.dataset.motionPopId=i;const x=document.createElement("style");a&&(x.nonce=a);const b=r??document.head;return b.appendChild(x),x.sheet&&x.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${u}px !important;
            ${v}px !important;
            top: ${f}px !important;
          }
        `),()=>{b.contains(x)&&b.removeChild(x)}},[e]),h.jsx(oEe,{isPresent:e,childRef:s,sizeRef:o,children:T.cloneElement(t,{ref:l})})}const lEe=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o,anchorX:a,root:l})=>{const c=SL(cEe),u=T.useId();let f=!0,m=T.useMemo(()=>(f=!1,{id:u,initial:e,isPresent:n,custom:i,onExitComplete:g=>{c.set(g,!0);for(const v of c.values())if(!v)return;r&&r()},register:g=>(c.set(g,!1),()=>c.delete(g))}),[n,c,r]);return s&&f&&(m={...m}),T.useMemo(()=>{c.forEach((g,v)=>c.set(v,!1))},[n]),T.useEffect(()=>{!n&&!c.size&&r&&r()},[n]),o==="popLayout"&&(t=h.jsx(aEe,{isPresent:n,anchorX:a,root:l,children:t})),h.jsx(XC.Provider,{value:m,children:t})};function cEe(){return new Map}function Ote(t=!0){const e=T.useContext(XC);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=T.useId();T.useEffect(()=>{if(t)return i(s)},[t]);const o=T.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const jS=t=>t.key||"";function Z$(t){const e=[];return T.Children.forEach(t,n=>{T.isValidElement(n)&&e.push(n)}),e}const go=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1,anchorX:a="left",root:l})=>{const[c,u]=Ote(o),f=T.useMemo(()=>Z$(t),[t]),m=o&&!c?[]:f.map(jS),g=T.useRef(!0),v=T.useRef(f),x=SL(()=>new Map),[b,E]=T.useState(f),[C,k]=T.useState(f);$ee(()=>{g.current=!1,v.current=f;for(let R=0;R<C.length;R++){const $=jS(C[R]);m.includes($)?x.delete($):x.get($)!==!0&&x.set($,!1)}},[C,m.length,m.join("-")]);const O=[];if(f!==b){let R=[...f];for(let $=0;$<C.length;$++){const V=C[$],j=jS(V);m.includes(j)||(R.splice($,0,V),O.push(V))}return s==="wait"&&O.length&&(R=O),k(Z$(R)),E(f),null}const{forceRender:U}=T.useContext(EL);return h.jsx(h.Fragment,{children:C.map(R=>{const $=jS(R),V=o&&!c?!1:f===C||m.includes($),j=()=>{if(x.has($))x.set($,!0);else return;let F=!0;x.forEach(W=>{W||(F=!1)}),F&&(U==null||U(),k(v.current),o&&(u==null||u()),r&&r())};return h.jsx(lEe,{isPresent:V,initial:!g.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:s,root:l,onExitComplete:V?void 0:j,anchorX:a,children:R},$)})})},Mte=T.createContext({strict:!1}),ez={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Zy={};for(const t in ez)Zy[t]={isEnabled:e=>ez[t].some(n=>!!e[n])};function uEe(t){for(const e in t)Zy[e]={...Zy[e],...t[e]}}const dEe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function BT(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||dEe.has(t)}let Dte=t=>!BT(t);function fEe(t){typeof t=="function"&&(Dte=e=>e.startsWith("on")?!BT(e):t(e))}try{fEe(require("@emotion/is-prop-valid").default)}catch{}function hEe(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(Dte(i)||n===!0&&BT(i)||!e&&!BT(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const QC=T.createContext({});function ZC(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function mw(t){return typeof t=="string"||Array.isArray(t)}const GL=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],KL=["initial",...GL];function e2(t){return ZC(t.animate)||KL.some(e=>mw(t[e]))}function Lte(t){return!!(e2(t)||t.variants)}function pEe(t,e){if(e2(t)){const{initial:n,animate:r}=t;return{initial:n===!1||mw(n)?n:void 0,animate:mw(r)?r:void 0}}return t.inherit!==!1?e:{}}function mEe(t){const{initial:e,animate:n}=pEe(t,T.useContext(QC));return T.useMemo(()=>({initial:e,animate:n}),[tz(e),tz(n)])}function tz(t){return Array.isArray(t)?t.join(" "):t}function nz(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const sb={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Xt.test(t))t=parseFloat(t);else return t;const n=nz(t,e.target.x),r=nz(t,e.target.y);return`${n}% ${r}%`}},gEe={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=ih.parse(t);if(i.length>5)return r;const s=ih.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const c=Dr(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}},f4={borderRadius:{...sb,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:sb,borderTopRightRadius:sb,borderBottomLeftRadius:sb,borderBottomRightRadius:sb,boxShadow:gEe};function jte(t,{layout:e,layoutId:n}){return Rx.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!f4[t]||t==="opacity")}const yEe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},xEe=Px.length;function vEe(t,e,n){let r="",i=!0;for(let s=0;s<xEe;s++){const o=Px[s],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=Cte(a,zL[o]);if(!l){i=!1;const u=yEe[o]||o;r+=`${u}(${c}) `}n&&(e[o]=c)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function WL(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if(Rx.has(l)){o=!0;continue}else if(ite(l)){i[l]=c;continue}else{const u=Cte(c,zL[l]);l.startsWith("origin")?(a=!0,s[l]=u):r[l]=u}}if(e.transform||(o||n?r.transform=vEe(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:u=0}=s;r.transformOrigin=`${l} ${c} ${u}`}}const YL=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Bte(t,e,n){for(const r in e)!Cs(e[r])&&!jte(r,n)&&(t[r]=e[r])}function bEe({transformTemplate:t},e){return T.useMemo(()=>{const n=YL();return WL(n,e,t),Object.assign({},n.vars,n.style)},[e])}function wEe(t,e){const n=t.style||{},r={};return Bte(r,n,t),Object.assign(r,bEe(t,e)),r}function EEe(t,e){const n={},r=wEe(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const SEe={offset:"stroke-dashoffset",array:"stroke-dasharray"},AEe={offset:"strokeDashoffset",array:"strokeDasharray"};function TEe(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?SEe:AEe;t[s.offset]=Xt.transform(-r);const o=Xt.transform(e),a=Xt.transform(n);t[s.array]=`${o} ${a}`}function Ute(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:o=0,...a},l,c,u){if(WL(t,a,c),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:m}=t;f.transform&&(m.transform=f.transform,delete f.transform),(m.transform||f.transformOrigin)&&(m.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),m.transform&&(m.transformBox=(u==null?void 0:u.transformBox)??"fill-box",delete f.transformBox),e!==void 0&&(f.x=e),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),i!==void 0&&TEe(f,i,s,o,!1)}const Fte=()=>({...YL(),attrs:{}}),$te=t=>typeof t=="string"&&t.toLowerCase()==="svg";function kEe(t,e,n,r){const i=T.useMemo(()=>{const s=Fte();return Ute(s,e,$te(r),t.transformTemplate,t.style),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};Bte(s,t.style,t),i.style={...s,...i.style}}return i}const CEe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function JL(t){return typeof t!="string"||t.includes("-")?!1:!!(CEe.indexOf(t)>-1||/[A-Z]/u.test(t))}function NEe(t,e,n,{latestValues:r},i,s=!1){const a=(JL(t)?kEe:EEe)(e,r,i,t),l=hEe(e,typeof t=="string",s),c=t!==T.Fragment?{...l,...a,ref:n}:{},{children:u}=e,f=T.useMemo(()=>Cs(u)?u.get():u,[u]);return T.createElement(t,{...c,children:f})}function rz(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function XL(t,e,n,r){if(typeof e=="function"){const[i,s]=rz(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=rz(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function QA(t){return Cs(t)?t.get():t}function _Ee({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:IEe(n,r,i,t),renderState:e()}}function IEe(t,e,n,r){const i={},s=r(t,{});for(const m in s)i[m]=QA(s[m]);let{initial:o,animate:a}=t;const l=e2(t),c=Lte(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=n?n.initial===!1:!1;u=u||o===!1;const f=u?a:o;if(f&&typeof f!="boolean"&&!ZC(f)){const m=Array.isArray(f)?f:[f];for(let g=0;g<m.length;g++){const v=XL(t,m[g]);if(v){const{transitionEnd:x,transition:b,...E}=v;for(const C in E){let k=E[C];if(Array.isArray(k)){const O=u?k.length-1:0;k=k[O]}k!==null&&(i[C]=k)}for(const C in x)i[C]=x[C]}}}return i}const zte=t=>(e,n)=>{const r=T.useContext(QC),i=T.useContext(XC),s=()=>_Ee(t,e,r,i);return n?s():SL(s)};function QL(t,e,n){var s;const{style:r}=t,i={};for(const o in r)(Cs(r[o])||e.style&&Cs(e.style[o])||jte(o,t)||((s=n==null?void 0:n.getValue(o))==null?void 0:s.liveStyle)!==void 0)&&(i[o]=r[o]);return i}const PEe=zte({scrapeMotionValuesFromProps:QL,createRenderState:YL});function Hte(t,e,n){const r=QL(t,e,n);for(const i in t)if(Cs(t[i])||Cs(e[i])){const s=Px.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}const REe=zte({scrapeMotionValuesFromProps:Hte,createRenderState:Fte}),OEe=Symbol.for("motionComponentSymbol");function vg(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function MEe(t,e,n){return T.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):vg(n)&&(n.current=r))},[e])}const ZL=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),DEe="framerAppearId",Vte="data-"+ZL(DEe),qte=T.createContext({});function LEe(t,e,n,r,i){var x,b;const{visualElement:s}=T.useContext(QC),o=T.useContext(Mte),a=T.useContext(XC),l=T.useContext(qL).reducedMotion,c=T.useRef(null);r=r||o.renderer,!c.current&&r&&(c.current=r(t,{visualState:e,parent:s,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const u=c.current,f=T.useContext(qte);u&&!u.projection&&i&&(u.type==="html"||u.type==="svg")&&jEe(c.current,n,i,f);const m=T.useRef(!1);T.useInsertionEffect(()=>{u&&m.current&&u.update(n,a)});const g=n[Vte],v=T.useRef(!!g&&!((x=window.MotionHandoffIsComplete)!=null&&x.call(window,g))&&((b=window.MotionHasOptimisedAnimation)==null?void 0:b.call(window,g)));return $ee(()=>{u&&(m.current=!0,window.MotionIsMounted=!0,u.updateFeatures(),u.scheduleRenderMicrotask(),v.current&&u.animationState&&u.animationState.animateChanges())}),T.useEffect(()=>{u&&(!v.current&&u.animationState&&u.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var E;(E=window.MotionHandoffMarkAsComplete)==null||E.call(window,g)}),v.current=!1),u.enteringChildren=void 0)}),u}function jEe(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c,layoutCrossfade:u}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:Gte(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&vg(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:u,layoutScroll:l,layoutRoot:c})}function Gte(t){if(t)return t.options.allowProjection!==!1?t.projection:Gte(t.parent)}function BP(t,{forwardMotionProps:e=!1}={},n,r){n&&uEe(n);const i=JL(t)?REe:PEe;function s(a,l){let c;const u={...T.useContext(qL),...a,layoutId:BEe(a)},{isStatic:f}=u,m=mEe(a),g=i(a,f);if(!f&&AL){UEe();const v=FEe(u);c=v.MeasureLayout,m.visualElement=LEe(t,g,u,r,v.ProjectionNode)}return h.jsxs(QC.Provider,{value:m,children:[c&&m.visualElement?h.jsx(c,{visualElement:m.visualElement,...u}):null,NEe(t,a,MEe(g,m.visualElement,l),g,f,e)]})}s.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=T.forwardRef(s);return o[OEe]=t,o}function BEe({layoutId:t}){const e=T.useContext(EL).id;return e&&t!==void 0?e+"-"+t:t}function UEe(t,e){T.useContext(Mte).strict}function FEe(t){const{drag:e,layout:n}=Zy;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function $Ee(t,e){if(typeof Proxy>"u")return BP;const n=new Map,r=(s,o)=>BP(s,o,t,e),i=(s,o)=>r(s,o);return new Proxy(i,{get:(s,o)=>o==="create"?r:(n.has(o)||n.set(o,BP(o,void 0,t,e)),n.get(o))})}function Kte({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function zEe({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function HEe(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function UP(t){return t===void 0||t===1}function h4({scale:t,scaleX:e,scaleY:n}){return!UP(t)||!UP(e)||!UP(n)}function Qh(t){return h4(t)||Wte(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Wte(t){return iz(t.x)||iz(t.y)}function iz(t){return t&&t!=="0%"}function UT(t,e,n){const r=t-n,i=e*r;return n+i}function sz(t,e,n,r,i){return i!==void 0&&(t=UT(t,i,r)),UT(t,n,r)+e}function p4(t,e=0,n=1,r,i){t.min=sz(t.min,e,n,r,i),t.max=sz(t.max,e,n,r,i)}function Yte(t,{x:e,y:n}){p4(t.x,e.translate,e.scale,e.originPoint),p4(t.y,n.translate,n.scale,n.originPoint)}const oz=.999999999999,az=1.0000000000001;function VEe(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&wg(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,Yte(t,o)),r&&Qh(s.latestValues)&&wg(t,s.latestValues))}e.x<az&&e.x>oz&&(e.x=1),e.y<az&&e.y>oz&&(e.y=1)}function bg(t,e){t.min=t.min+e,t.max=t.max+e}function lz(t,e,n,r,i=.5){const s=Dr(t.min,t.max,i);p4(t,e,n,s,r)}function wg(t,e){lz(t.x,e.x,e.scaleX,e.scale,e.originX),lz(t.y,e.y,e.scaleY,e.scale,e.originY)}function Jte(t,e){return Kte(HEe(t.getBoundingClientRect(),e))}function qEe(t,e,n){const r=Jte(t,n),{scroll:i}=e;return i&&(bg(r.x,i.offset.x),bg(r.y,i.offset.y)),r}const cz=()=>({translate:0,scale:1,origin:0,originPoint:0}),Eg=()=>({x:cz(),y:cz()}),uz=()=>({min:0,max:0}),wi=()=>({x:uz(),y:uz()}),m4={current:null},Xte={current:!1};function GEe(){if(Xte.current=!0,!!AL)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>m4.current=t.matches;t.addEventListener("change",e),e()}else m4.current=!1}const KEe=new WeakMap;function WEe(t,e,n){for(const r in e){const i=e[r],s=n[r];if(Cs(i))t.addValue(r,i);else if(Cs(s))t.addValue(r,Qy(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,Qy(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const dz=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class YEe{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=FL,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=ho.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,kr.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=e2(n),this.isVariantNode=Lte(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in f){const g=f[m];l[m]!==void 0&&Cs(g)&&g.set(l[m])}}mount(e){var n;this.current=e,KEe.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),Xte.current||GEe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:m4.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),rh(this.notifyUpdate),rh(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Rx.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&kr.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Zy){const n=Zy[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):wi()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<dz.length;r++){const i=dz[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=WEe(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Qy(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(zee(r)||Vee(r))?r=parseFloat(r):!rEe(r)&&ih.test(n)&&(r=kte(e,n)),this.setBaseTarget(e,Cs(r)?r.get():r)),Cs(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var s;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=XL(this.props,n,(s=this.presenceContext)==null?void 0:s.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Cs(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new _L),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){HL.render(this.render)}}class Qte extends YEe{constructor(){super(...arguments),this.KeyframeResolver=q1e}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Cs(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Zte(t,{style:e,vars:n},r,i){const s=t.style;let o;for(o in e)s[o]=e[o];i==null||i.applyProjectionStyles(s,r);for(o in n)s.setProperty(o,n[o])}function JEe(t){return window.getComputedStyle(t)}class XEe extends Qte{constructor(){super(...arguments),this.type="html",this.renderInstance=Zte}readValueFromInstance(e,n){var r;if(Rx.has(n))return(r=this.projection)!=null&&r.isProjecting?s4(n):u1e(e,n);{const i=JEe(e),s=(ite(n)?i.getPropertyValue(n):i[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return Jte(e,n)}build(e,n,r){WL(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return QL(e,n,r)}}const ene=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function QEe(t,e,n,r){Zte(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(ene.has(i)?i:ZL(i),e.attrs[i])}class ZEe extends Qte{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=wi}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Rx.has(n)){const r=Tte(n);return r&&r.default||0}return n=ene.has(n)?n:ZL(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return Hte(e,n,r)}build(e,n,r){Ute(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){QEe(e,n,r,i)}mount(e){this.isSVGTag=$te(e.tagName),super.mount(e)}}const eSe=(t,e)=>JL(t)?new ZEe(e):new XEe(e,{allowProjection:t!==T.Fragment});function Fg(t,e,n){const r=t.getProps();return XL(r,e,n!==void 0?n:r.custom,t)}const g4=t=>Array.isArray(t);function tSe(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Qy(n))}function nSe(t){return g4(t)?t[t.length-1]||0:t}function rSe(t,e){const n=Fg(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=nSe(s[o]);tSe(t,o,a)}}function iSe(t){return!!(Cs(t)&&t.add)}function y4(t,e){const n=t.getValue("willChange");if(iSe(n))return n.add(e);if(!n&&rd.WillChange){const r=new rd.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function tne(t){return t.props[Vte]}const sSe=t=>t!==null;function oSe(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(sSe),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[s]}const aSe={type:"spring",stiffness:500,damping:25,restSpeed:10},lSe=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),cSe={type:"keyframes",duration:.8},uSe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},dSe=(t,{keyframes:e})=>e.length>2?cSe:Rx.has(t)?t.startsWith("scale")?lSe(e[1]):aSe:uSe;function fSe({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const e8=(t,e,n,r={},i,s)=>o=>{const a=$L(r,t)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-wc(l);const u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:m=>{e.set(m),a.onUpdate&&a.onUpdate(m)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};fSe(a)||Object.assign(u,dSe(t,u)),u.duration&&(u.duration=wc(u.duration)),u.repeatDelay&&(u.repeatDelay=wc(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let f=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u4(u),u.delay===0&&(f=!0)),(rd.instantAnimations||rd.skipAnimations)&&(f=!0,u4(u),u.delay=0),u.allowFlatten=!a.type&&!a.ease,f&&!s&&e.get()!==void 0){const m=oSe(u.keyframes,a);if(m!==void 0){kr.update(()=>{u.onUpdate(m),u.onComplete()});return}}return a.isSync?new UL(u):new O1e(u)};function hSe({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function nne(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...a}=e;r&&(s=r);const l=[],c=i&&t.animationState&&t.animationState.getState()[i];for(const u in a){const f=t.getValue(u,t.latestValues[u]??null),m=a[u];if(m===void 0||c&&hSe(c,u))continue;const g={delay:n,...$L(s||{},u)},v=f.get();if(v!==void 0&&!f.isAnimating&&!Array.isArray(m)&&m===v&&!g.velocity)continue;let x=!1;if(window.MotionHandoffAnimation){const E=tne(t);if(E){const C=window.MotionHandoffAnimation(E,u,kr);C!==null&&(g.startTime=C,x=!0)}}y4(t,u),f.start(e8(u,f,m,t.shouldReduceMotion&&Ete.has(u)?{type:!1}:g,t,x));const b=f.animation;b&&l.push(b)}return o&&Promise.all(l).then(()=>{kr.update(()=>{o&&rSe(t,o)})}),l}function rne(t,e,n,r=0,i=1){const s=Array.from(t).sort((c,u)=>c.sortNodePosition(u)).indexOf(e),o=t.size,a=(o-1)*r;return typeof n=="function"?n(s,o):i===1?s*r:a-s*r}function x4(t,e,n={}){var l;const r=Fg(t,e,n.type==="exit"?(l=t.presenceContext)==null?void 0:l.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(nne(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:f,staggerDirection:m}=i;return pSe(t,e,c,u,f,m,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[c,u]=a==="beforeChildren"?[s,o]:[o,s];return c().then(()=>u())}else return Promise.all([s(),o(n.delay)])}function pSe(t,e,n=0,r=0,i=0,s=1,o){const a=[];for(const l of t.variantChildren)l.notify("AnimationStart",e),a.push(x4(l,e,{...o,delay:n+(typeof r=="function"?0:r)+rne(t.variantChildren,l,r,i,s)}).then(()=>l.notify("AnimationComplete",e)));return Promise.all(a)}function mSe(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>x4(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=x4(t,e,n);else{const i=typeof e=="function"?Fg(t,e,n.custom):e;r=Promise.all(nne(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function ine(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const gSe=KL.length;function sne(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?sne(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<gSe;n++){const r=KL[n],i=t.props[r];(mw(i)||i===!1)&&(e[r]=i)}return e}const ySe=[...GL].reverse(),xSe=GL.length;function vSe(t){return e=>Promise.all(e.map(({animation:n,options:r})=>mSe(t,n,r)))}function bSe(t){let e=vSe(t),n=fz(),r=!0;const i=l=>(c,u)=>{var m;const f=Fg(t,u,l==="exit"?(m=t.presenceContext)==null?void 0:m.custom:void 0);if(f){const{transition:g,transitionEnd:v,...x}=f;c={...c,...x,...v}}return c};function s(l){e=l(t)}function o(l){const{props:c}=t,u=sne(t.parent)||{},f=[],m=new Set;let g={},v=1/0;for(let b=0;b<xSe;b++){const E=ySe[b],C=n[E],k=c[E]!==void 0?c[E]:u[E],O=mw(k),U=E===l?C.isActive:null;U===!1&&(v=b);let R=k===u[E]&&k!==c[E]&&O;if(R&&r&&t.manuallyAnimateOnMount&&(R=!1),C.protectedKeys={...g},!C.isActive&&U===null||!k&&!C.prevProp||ZC(k)||typeof k=="boolean")continue;const $=wSe(C.prevProp,k);let V=$||E===l&&C.isActive&&!R&&O||b>v&&O,j=!1;const F=Array.isArray(k)?k:[k];let W=F.reduce(i(E),{});U===!1&&(W={});const{prevResolvedValues:H={}}=C,B={...H,...W},A=z=>{V=!0,m.has(z)&&(j=!0,m.delete(z)),C.needsAnimating[z]=!0;const G=t.getValue(z);G&&(G.liveStyle=!1)};for(const z in B){const G=W[z],te=H[z];if(g.hasOwnProperty(z))continue;let K=!1;g4(G)&&g4(te)?K=!ine(G,te):K=G!==te,K?G!=null?A(z):m.add(z):G!==void 0&&m.has(z)?A(z):C.protectedKeys[z]=!0}C.prevProp=k,C.prevResolvedValues=W,C.isActive&&(g={...g,...W}),r&&t.blockInitialAnimation&&(V=!1);const I=R&&$;V&&(!I||j)&&f.push(...F.map(z=>{const G={type:E};if(typeof z=="string"&&r&&!I&&t.manuallyAnimateOnMount&&t.parent){const{parent:te}=t,K=Fg(te,z);if(te.enteringChildren&&K){const{delayChildren:q}=K.transition||{};G.delay=rne(te.enteringChildren,t,q)}}return{animation:z,options:G}}))}if(m.size){const b={};if(typeof c.initial!="boolean"){const E=Fg(t,Array.isArray(c.initial)?c.initial[0]:c.initial);E&&E.transition&&(b.transition=E.transition)}m.forEach(E=>{const C=t.getBaseTarget(E),k=t.getValue(E);k&&(k.liveStyle=!0),b[E]=C??null}),f.push({animation:b})}let x=!!f.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(x=!1),r=!1,x?e(f):Promise.resolve()}function a(l,c){var f;if(n[l].isActive===c)return Promise.resolve();(f=t.variantChildren)==null||f.forEach(m=>{var g;return(g=m.animationState)==null?void 0:g.setActive(l,c)}),n[l].isActive=c;const u=o(l);for(const m in n)n[m].protectedKeys={};return u}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=fz()}}}function wSe(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!ine(e,t):!1}function Vh(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function fz(){return{animate:Vh(!0),whileInView:Vh(),whileHover:Vh(),whileTap:Vh(),whileDrag:Vh(),whileFocus:Vh(),exit:Vh()}}class hh{constructor(e){this.isMounted=!1,this.node=e}update(){}}class ESe extends hh{constructor(e){super(e),e.animationState||(e.animationState=bSe(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();ZC(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let SSe=0;class ASe extends hh{constructor(){super(...arguments),this.id=SSe++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const TSe={animation:{Feature:ESe},exit:{Feature:ASe}};function gw(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function N1(t){return{point:{x:t.pageX,y:t.pageY}}}const kSe=t=>e=>VL(e)&&t(e,N1(e));function Jb(t,e,n,r){return gw(t,e,kSe(n),r)}const one=1e-4,CSe=1-one,NSe=1+one,ane=.01,_Se=0-ane,ISe=0+ane;function Vs(t){return t.max-t.min}function PSe(t,e,n){return Math.abs(t-e)<=n}function hz(t,e,n,r=.5){t.origin=r,t.originPoint=Dr(e.min,e.max,t.origin),t.scale=Vs(n)/Vs(e),t.translate=Dr(n.min,n.max,t.origin)-t.originPoint,(t.scale>=CSe&&t.scale<=NSe||isNaN(t.scale))&&(t.scale=1),(t.translate>=_Se&&t.translate<=ISe||isNaN(t.translate))&&(t.translate=0)}function Xb(t,e,n,r){hz(t.x,e.x,n.x,r?r.originX:void 0),hz(t.y,e.y,n.y,r?r.originY:void 0)}function pz(t,e,n){t.min=n.min+e.min,t.max=t.min+Vs(e)}function RSe(t,e,n){pz(t.x,e.x,n.x),pz(t.y,e.y,n.y)}function mz(t,e,n){t.min=e.min-n.min,t.max=t.min+Vs(e)}function FT(t,e,n){mz(t.x,e.x,n.x),mz(t.y,e.y,n.y)}function wa(t){return[t("x"),t("y")]}const lne=({current:t})=>t?t.ownerDocument.defaultView:null,gz=(t,e)=>Math.abs(t-e);function OSe(t,e){const n=gz(t.x,e.x),r=gz(t.y,e.y);return Math.sqrt(n**2+r**2)}class cne{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=$P(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,v=OSe(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!g&&!v)return;const{point:x}=m,{timestamp:b}=es;this.history.push({...x,timestamp:b});const{onStart:E,onMove:C}=this.handlers;g||(E&&E(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),C&&C(this.lastMoveEvent,m)},this.handlePointerMove=(m,g)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=FP(g,this.transformPagePoint),kr.update(this.updatePoint,!0)},this.handlePointerUp=(m,g)=>{this.end();const{onEnd:v,onSessionEnd:x,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const E=$P(m.type==="pointercancel"?this.lastMoveEventInfo:FP(g,this.transformPagePoint),this.history);this.startEvent&&v&&v(m,E),x&&x(m,E)},!VL(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const a=N1(e),l=FP(a,this.transformPagePoint),{point:c}=l,{timestamp:u}=es;this.history=[{...c,timestamp:u}];const{onSessionStart:f}=n;f&&f(e,$P(l,this.history)),this.removeListeners=T1(Jb(this.contextWindow,"pointermove",this.handlePointerMove),Jb(this.contextWindow,"pointerup",this.handlePointerUp),Jb(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),rh(this.updatePoint)}}function FP(t,e){return e?{point:e(t.point)}:t}function yz(t,e){return{x:t.x-e.x,y:t.y-e.y}}function $P({point:t},e){return{point:t,delta:yz(t,une(e)),offset:yz(t,MSe(e)),velocity:DSe(e,.1)}}function MSe(t){return t[0]}function une(t){return t[t.length-1]}function DSe(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=une(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>wc(e)));)n--;if(!r)return{x:0,y:0};const s=ja(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function LSe(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Dr(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Dr(n,t,r.max):Math.min(t,n)),t}function xz(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function jSe(t,{top:e,left:n,bottom:r,right:i}){return{x:xz(t.x,n,i),y:xz(t.y,e,r)}}function vz(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function BSe(t,e){return{x:vz(t.x,e.x),y:vz(t.y,e.y)}}function USe(t,e){let n=.5;const r=Vs(t),i=Vs(e);return i>r?n=fw(e.min,e.max-r,t.min):r>i&&(n=fw(t.min,t.max-i,e.min)),nd(0,1,n)}function FSe(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const v4=.35;function $Se(t=v4){return t===!1?t=0:t===!0&&(t=v4),{x:bz(t,"left","right"),y:bz(t,"top","bottom")}}function bz(t,e,n){return{min:wz(t,e),max:wz(t,n)}}function wz(t,e){return typeof t=="number"?t:t[e]||0}const zSe=new WeakMap;class HSe{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=wi(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=f=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(N1(f).point)},o=(f,m)=>{const{drag:g,dragPropagation:v,onDragStart:x}=this.getProps();if(g&&!v&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Y1e(g),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),wa(E=>{let C=this.getAxisMotionValue(E).get()||0;if(Ec.test(C)){const{projection:k}=this.visualElement;if(k&&k.layout){const O=k.layout.layoutBox[E];O&&(C=Vs(O)*(parseFloat(C)/100))}}this.originPoint[E]=C}),x&&kr.postRender(()=>x(f,m)),y4(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},a=(f,m)=>{this.latestPointerEvent=f,this.latestPanInfo=m;const{dragPropagation:g,dragDirectionLock:v,onDirectionLock:x,onDrag:b}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:E}=m;if(v&&this.currentDirection===null){this.currentDirection=VSe(E),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",m.point,E),this.updateAxis("y",m.point,E),this.visualElement.render(),b&&b(f,m)},l=(f,m)=>{this.latestPointerEvent=f,this.latestPanInfo=m,this.stop(f,m),this.latestPointerEvent=null,this.latestPanInfo=null},c=()=>wa(f=>{var m;return this.getAnimationState(f)==="paused"&&((m=this.getAxisMotionValue(f).animation)==null?void 0:m.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new cne(e,{onSessionStart:s,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,distanceThreshold:r,contextWindow:lne(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&kr.postRender(()=>a(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!BS(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=LSe(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var s;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,i=this.constraints;e&&vg(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=jSe(r.layoutBox,e):this.constraints=!1,this.elastic=$Se(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&wa(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=FSe(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!vg(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=qEe(r,i.root,this.visualElement.getTransformPagePoint());let o=BSe(i.layout.layoutBox,s);if(n){const a=n(zEe(o));this.hasMutatedConstraints=!!a,a&&(o=Kte(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=wa(u=>{if(!BS(u,n,this.currentDirection))return;let f=l&&l[u]||{};o&&(f={min:0,max:0});const m=i?200:1e6,g=i?40:1e7,v={type:"inertia",velocity:r?e[u]:0,bounceStiffness:m,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...s,...f};return this.startAxisValueAnimation(u,v)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return y4(this.visualElement,e),r.start(e8(e,r,0,n,this.visualElement,!1))}stopAnimation(){wa(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){wa(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){wa(n=>{const{drag:r}=this.getProps();if(!BS(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-Dr(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!vg(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};wa(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=USe({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),wa(o=>{if(!BS(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(Dr(l,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;zSe.set(this.visualElement,this);const e=this.visualElement.current,n=Jb(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();vg(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),kr.read(r);const o=gw(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",(({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(wa(u=>{const f=this.getAxisMotionValue(u);f&&(this.originPoint[u]+=l[u].translate,f.set(f.get()+l[u].translate))}),this.visualElement.render())}));return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=v4,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function BS(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function VSe(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class qSe extends hh{constructor(e){super(e),this.removeGroupControls=Ua,this.removeListeners=Ua,this.controls=new HSe(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ua}unmount(){this.removeGroupControls(),this.removeListeners()}}const Ez=t=>(e,n)=>{t&&kr.postRender(()=>t(e,n))};class GSe extends hh{constructor(){super(...arguments),this.removePointerDownListener=Ua}onPointerDown(e){this.session=new cne(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:lne(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:Ez(e),onStart:Ez(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&kr.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=Jb(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const ZA={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let zP=!1;class KSe extends T.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),zP&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),ZA.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:o}=r;return o&&(o.isPresent=s,zP=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==s?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||kr.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),HL.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;zP=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function dne(t){const[e,n]=Ote(),r=T.useContext(EL);return h.jsx(KSe,{...t,layoutGroup:r,switchLayoutGroup:T.useContext(qte),isPresent:e,safeToRemove:n})}function WSe(t,e,n){const r=Cs(t)?t:Qy(t);return r.start(e8("",r,e,n)),r.animation}const YSe=(t,e)=>t.depth-e.depth;class JSe{constructor(){this.children=[],this.isDirty=!1}add(e){TL(this.children,e),this.isDirty=!0}remove(e){kL(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(YSe),this.isDirty=!1,this.children.forEach(e)}}function XSe(t,e){const n=ho.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(rh(r),t(s-e))};return kr.setup(r,!0),()=>rh(r)}const fne=["TopLeft","TopRight","BottomLeft","BottomRight"],QSe=fne.length,Sz=t=>typeof t=="string"?parseFloat(t):t,Az=t=>typeof t=="number"||Xt.test(t);function ZSe(t,e,n,r,i,s){i?(t.opacity=Dr(0,n.opacity??1,eAe(r)),t.opacityExit=Dr(e.opacity??1,0,tAe(r))):s&&(t.opacity=Dr(e.opacity??1,n.opacity??1,r));for(let o=0;o<QSe;o++){const a=`border${fne[o]}Radius`;let l=Tz(e,a),c=Tz(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||Az(l)===Az(c)?(t[a]=Math.max(Dr(Sz(l),Sz(c),r),0),(Ec.test(c)||Ec.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=Dr(e.rotate||0,n.rotate||0,r))}function Tz(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const eAe=hne(0,.5,Qee),tAe=hne(.5,.95,Ua);function hne(t,e,n){return r=>r<t?0:r>e?1:n(fw(t,e,r))}function kz(t,e){t.min=e.min,t.max=e.max}function Za(t,e){kz(t.x,e.x),kz(t.y,e.y)}function Cz(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Nz(t,e,n,r,i){return t-=e,t=UT(t,1/n,r),i!==void 0&&(t=UT(t,1/i,r)),t}function nAe(t,e=0,n=1,r=.5,i,s=t,o=t){if(Ec.test(e)&&(e=parseFloat(e),e=Dr(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Dr(s.min,s.max,r);t===s&&(a-=e),t.min=Nz(t.min,e,n,a,i),t.max=Nz(t.max,e,n,a,i)}function _z(t,e,[n,r,i],s,o){nAe(t,e[n],e[r],e[i],e.scale,s,o)}const rAe=["x","scaleX","originX"],iAe=["y","scaleY","originY"];function Iz(t,e,n,r){_z(t.x,e,rAe,n?n.x:void 0,r?r.x:void 0),_z(t.y,e,iAe,n?n.y:void 0,r?r.y:void 0)}function Pz(t){return t.translate===0&&t.scale===1}function pne(t){return Pz(t.x)&&Pz(t.y)}function Rz(t,e){return t.min===e.min&&t.max===e.max}function sAe(t,e){return Rz(t.x,e.x)&&Rz(t.y,e.y)}function Oz(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function mne(t,e){return Oz(t.x,e.x)&&Oz(t.y,e.y)}function Mz(t){return Vs(t.x)/Vs(t.y)}function Dz(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class oAe{constructor(){this.members=[]}add(e){TL(this.members,e),e.scheduleRender()}remove(e){if(kL(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function aAe(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:u,rotateX:f,rotateY:m,skewX:g,skewY:v}=n;c&&(r=`perspective(${c}px) ${r}`),u&&(r+=`rotate(${u}deg) `),f&&(r+=`rotateX(${f}deg) `),m&&(r+=`rotateY(${m}deg) `),g&&(r+=`skewX(${g}deg) `),v&&(r+=`skewY(${v}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const HP=["","X","Y","Z"],lAe=1e3;let cAe=0;function VP(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function gne(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=tne(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",kr,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&gne(r)}function yne({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=cAe++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(fAe),this.nodes.forEach(gAe),this.nodes.forEach(yAe),this.nodes.forEach(hAe)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new JSe)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new _L),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=Rte(o)&&!tEe(o),this.instance=o;const{layoutId:a,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),t){let u,f=0;const m=()=>this.root.updateBlockedByResize=!1;kr.read(()=>{f=window.innerWidth}),t(o,()=>{const g=window.innerWidth;g!==f&&(f=g,this.root.updateBlockedByResize=!0,u&&u(),u=XSe(m,250),ZA.hasAnimatedSinceResize&&(ZA.hasAnimatedSinceResize=!1,this.nodes.forEach(Bz)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&c&&(a||l)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:f,hasRelativeLayoutChanged:m,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||c.getDefaultTransition()||EAe,{onLayoutAnimationStart:x,onLayoutAnimationComplete:b}=c.getProps(),E=!this.targetLayout||!mne(this.targetLayout,g),C=!f&&m;if(this.options.layoutRoot||this.resumeFrom||C||f&&(E||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const k={...$L(v,"layout"),onPlay:x,onComplete:b};(c.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k),this.setAnimationOrigin(u,C)}else f||Bz(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),rh(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(xAe),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&gne(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const f=this.path[u];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Lz);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(jz);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(mAe),this.nodes.forEach(uAe),this.nodes.forEach(dAe)):this.nodes.forEach(jz),this.clearAllSnapshots();const a=ho.now();es.delta=nd(0,1e3/60,a-es.timestamp),es.timestamp=a,es.isProcessing=!0,RP.update.process(es),RP.preRender.process(es),RP.render.process(es),es.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,HL.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(pAe),this.sharedNodes.forEach(vAe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,kr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){kr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Vs(this.snapshot.measuredBox.x)&&!Vs(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=wi(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!pne(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&this.instance&&(a||Qh(this.latestValues)||u)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),SAe(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:o}=this.options;if(!o)return wi();const a=o.measureViewportBox();if(!(((c=this.scroll)==null?void 0:c.wasRoot)||this.path.some(AAe))){const{scroll:u}=this.root;u&&(bg(a.x,u.offset.x),bg(a.y,u.offset.y))}return a}removeElementScroll(o){var l;const a=wi();if(Za(a,o),(l=this.scroll)!=null&&l.wasRoot)return a;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:f,options:m}=u;u!==this.root&&f&&m.layoutScroll&&(f.wasRoot&&Za(a,o),bg(a.x,f.offset.x),bg(a.y,f.offset.y))}return a}applyTransform(o,a=!1){const l=wi();Za(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&wg(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Qh(u.latestValues)&&wg(l,u.latestValues)}return Qh(this.latestValues)&&wg(l,this.latestValues),l}removeTransform(o){const a=wi();Za(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Qh(c.latestValues))continue;h4(c.latestValues)&&c.updateSnapshot();const u=wi(),f=c.measurePageBox();Za(u,f),Iz(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return Qh(this.latestValues)&&Iz(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==es.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var g;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(g=this.parent)!=null&&g.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:u,layoutId:f}=this.options;if(!this.layout||!(u||f))return;this.resolvedRelativeTargetAt=es.timestamp;const m=this.getClosestProjectingParent();m&&this.linkedParentVersion!==m.layoutVersion&&!m.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(m&&m.layout?this.createRelativeTarget(m,this.layout.layoutBox,m.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=wi(),this.targetWithTransforms=wi()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),RSe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Za(this.target,this.layout.layoutBox),Yte(this.target,this.targetDelta)):Za(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?this.createRelativeTarget(m,this.target,m.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||h4(this.parent.latestValues)||Wte(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(o,a,l){this.relativeParent=o,this.linkedParentVersion=o.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=wi(),this.relativeTargetOrigin=wi(),FT(this.relativeTargetOrigin,a,l),Za(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var v;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||(v=this.parent)!=null&&v.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===es.timestamp&&(l=!1),l)return;const{layout:c,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||u))return;Za(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,m=this.treeScale.y;VEe(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=wi());const{target:g}=o;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Cz(this.prevProjectionDelta.x,this.projectionDelta.x),Cz(this.prevProjectionDelta.y,this.projectionDelta.y)),Xb(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==m||!Dz(this.projectionDelta.x,this.prevProjectionDelta.x)||!Dz(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Eg(),this.projectionDelta=Eg(),this.projectionDeltaWithTransform=Eg()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},f=Eg();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const m=wi(),g=l?l.source:void 0,v=this.layout?this.layout.source:void 0,x=g!==v,b=this.getStack(),E=!b||b.members.length<=1,C=!!(x&&!E&&this.options.crossfade===!0&&!this.path.some(wAe));this.animationProgress=0;let k;this.mixTargetDelta=O=>{const U=O/1e3;Uz(f.x,o.x,U),Uz(f.y,o.y,U),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(FT(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),bAe(this.relativeTarget,this.relativeTargetOrigin,m,U),k&&sAe(this.relativeTarget,k)&&(this.isProjectionDirty=!1),k||(k=wi()),Za(k,this.relativeTarget)),x&&(this.animationValues=u,ZSe(u,c,this.latestValues,U,C,E)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=U},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var a,l,c;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(c=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||c.stop(),this.pendingAnimation&&(rh(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=kr.update(()=>{ZA.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Qy(0)),this.currentAnimation=WSe(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),o.onUpdate&&o.onUpdate(u)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(lAe),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&xne(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||wi();const f=Vs(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+f;const m=Vs(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+m}Za(a,l),wg(a,u),Xb(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new oAe),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&VP("z",o,c,this.animationValues);for(let u=0;u<HP.length;u++)VP(`rotate${HP[u]}`,o,c,this.animationValues),VP(`skew${HP[u]}`,o,c,this.animationValues);o.render();for(const u in c)o.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=QA(a==null?void 0:a.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none";return}const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=QA(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Qh(this.latestValues)&&(o.transform=l?l({},""):"none",this.hasProjected=!1);return}o.visibility="";const u=c.animationValues||c.latestValues;this.applyTransformsToTarget();let f=aAe(this.projectionDeltaWithTransform,this.treeScale,u);l&&(f=l(u,f)),o.transform=f;const{x:m,y:g}=this.projectionDelta;o.transformOrigin=`${m.origin*100}% ${g.origin*100}% 0`,c.animationValues?o.opacity=c===this?u.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:u.opacityExit:o.opacity=c===this?u.opacity!==void 0?u.opacity:"":u.opacityExit!==void 0?u.opacityExit:0;for(const v in f4){if(u[v]===void 0)continue;const{correct:x,applyTo:b,isCSSVariable:E}=f4[v],C=f==="none"?u[v]:x(u[v],c);if(b){const k=b.length;for(let O=0;O<k;O++)o[b[O]]=C}else E?this.options.visualElement.renderState.vars[v]=C:o[v]=C}this.options.layoutId&&(o.pointerEvents=c===this?QA(a==null?void 0:a.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(Lz),this.root.sharedNodes.clear()}}}function uAe(t){t.updateLayout()}function dAe(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=e.source!==t.layout.source;s==="size"?wa(f=>{const m=o?e.measuredBox[f]:e.layoutBox[f],g=Vs(m);m.min=r[f].min,m.max=m.min+g}):xne(s,e.layoutBox,r)&&wa(f=>{const m=o?e.measuredBox[f]:e.layoutBox[f],g=Vs(r[f]);m.max=m.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+g)});const a=Eg();Xb(a,r,e.layoutBox);const l=Eg();o?Xb(l,t.applyTransform(i,!0),e.measuredBox):Xb(l,r,e.layoutBox);const c=!pne(a);let u=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:m,layout:g}=f;if(m&&g){const v=wi();FT(v,e.layoutBox,m.layoutBox);const x=wi();FT(x,r,g.layoutBox),mne(v,x)||(u=!0),f.options.layoutRoot&&(t.relativeTarget=x,t.relativeTargetOrigin=v,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeLayoutChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function fAe(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function hAe(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function pAe(t){t.clearSnapshot()}function Lz(t){t.clearMeasurements()}function jz(t){t.isLayoutDirty=!1}function mAe(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Bz(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function gAe(t){t.resolveTargetDelta()}function yAe(t){t.calcProjection()}function xAe(t){t.resetSkewAndRotation()}function vAe(t){t.removeLeadSnapshot()}function Uz(t,e,n){t.translate=Dr(e.translate,0,n),t.scale=Dr(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Fz(t,e,n,r){t.min=Dr(e.min,n.min,r),t.max=Dr(e.max,n.max,r)}function bAe(t,e,n,r){Fz(t.x,e.x,n.x,r),Fz(t.y,e.y,n.y,r)}function wAe(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const EAe={duration:.45,ease:[.4,0,.1,1]},$z=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),zz=$z("applewebkit/")&&!$z("chrome/")?Math.round:Ua;function Hz(t){t.min=zz(t.min),t.max=zz(t.max)}function SAe(t){Hz(t.x),Hz(t.y)}function xne(t,e,n){return t==="position"||t==="preserve-aspect"&&!PSe(Mz(e),Mz(n),.2)}function AAe(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const TAe=yne({attachResizeListener:(t,e)=>gw(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),qP={current:void 0},vne=yne({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!qP.current){const t=new TAe({});t.mount(window),t.setOptions({layoutScroll:!0}),qP.current=t}return qP.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),kAe={pan:{Feature:GSe},drag:{Feature:qSe,ProjectionNode:vne,MeasureLayout:dne}};function Vz(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&kr.postRender(()=>s(e,N1(e)))}class CAe extends hh{mount(){const{current:e}=this.node;e&&(this.unmount=J1e(e,(n,r)=>(Vz(this.node,r,"Start"),i=>Vz(this.node,i,"End"))))}unmount(){}}class NAe extends hh{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=T1(gw(this.node.current,"focus",()=>this.onFocus()),gw(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function qz(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&kr.postRender(()=>s(e,N1(e)))}class _Ae extends hh{mount(){const{current:e}=this.node;e&&(this.unmount=eEe(e,(n,r)=>(qz(this.node,r,"Start"),(i,{success:s})=>qz(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const b4=new WeakMap,GP=new WeakMap,IAe=t=>{const e=b4.get(t.target);e&&e(t)},PAe=t=>{t.forEach(IAe)};function RAe({root:t,...e}){const n=t||document;GP.has(n)||GP.set(n,{});const r=GP.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(PAe,{root:t,...e})),r[i]}function OAe(t,e,n){const r=RAe(e);return b4.set(t,n),r.observe(t),()=>{b4.delete(t),r.unobserve(t)}}const MAe={some:0,all:1};class DAe extends hh{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:MAe[i]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:f}=this.node.getProps(),m=c?u:f;m&&m(l)};return OAe(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(LAe(e,n))&&this.startObserver()}unmount(){}}function LAe({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const jAe={inView:{Feature:DAe},tap:{Feature:_Ae},focus:{Feature:NAe},hover:{Feature:CAe}},BAe={layout:{ProjectionNode:vne,MeasureLayout:dne}},UAe={...TSe,...jAe,...kAe,...BAe},Ht=$Ee(UAe,eSe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FAe=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),$Ae=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),Gz=t=>{const e=$Ae(t);return e.charAt(0).toUpperCase()+e.slice(1)},bne=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),zAe=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var HAe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VAe=T.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>T.createElement("svg",{ref:l,...HAe,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:bne("lucide",i),...!s&&!zAe(a)&&{"aria-hidden":"true"},...a},[...o.map(([c,u])=>T.createElement(c,u)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=(t,e)=>{const n=T.forwardRef(({className:r,...i},s)=>T.createElement(VAe,{ref:s,iconNode:e,className:bne(`lucide-${FAe(Gz(t))}`,`lucide-${t}`,r),...i}));return n.displayName=Gz(t),n};/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qAe=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],yo=St("activity",qAe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GAe=[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]],KAe=St("arrow-down-left",GAe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WAe=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],$T=St("arrow-left",WAe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YAe=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],wne=St("arrow-right",YAe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JAe=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],Ene=St("arrow-up-right",JAe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XAe=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Sg=St("bot",XAe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QAe=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],Sc=St("brain",QAe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZAe=[["path",{d:"M16 14v2.2l1.6 1",key:"fo4ql5"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]],t8=St("calendar-clock",ZAe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eTe=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M7 16h8",key:"srdodz"}],["path",{d:"M7 11h12",key:"127s9w"}],["path",{d:"M7 6h3",key:"w9rmul"}]],tTe=St("chart-bar",eTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nTe=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],El=St("chart-no-axes-column",nTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rTe=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],yw=St("chart-pie",rTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iTe=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],$g=St("check",iTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sTe=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Ic=St("chevron-down",sTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oTe=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],zT=St("chevron-left",oTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aTe=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],id=St("chevron-right",aTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lTe=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],am=St("chevron-up",lTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cTe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],n8=St("circle-alert",cTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uTe=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],w4=St("circle-check-big",uTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dTe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],fTe=St("circle-check",dTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hTe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Kz=St("circle-x",hTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pTe=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Rs=St("clock",pTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mTe=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],Sne=St("coins",mTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gTe=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Qp=St("copy",gTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yTe=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],Ane=St("cpu",yTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xTe=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],r8=St("database",xTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vTe=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],_1=St("dollar-sign",vTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bTe=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Uo=St("download",bTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wTe=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],ex=St("external-link",wTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ETe=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],t2=St("eye-off",ETe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const STe=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],i8=St("eye",STe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ATe=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],TTe=St("funnel",ATe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kTe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],eT=St("globe",kTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CTe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],NTe=St("info",CTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _Te=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],E4=St("key",_Te);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ITe=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Wz=St("layers",ITe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PTe=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],s8=St("loader-circle",PTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RTe=[["circle",{cx:"12",cy:"16",r:"1",key:"1au0dj"}],["rect",{x:"3",y:"10",width:"18",height:"12",rx:"2",key:"6s8ecr"}],["path",{d:"M7 10V7a5 5 0 0 1 10 0v3",key:"1pqi11"}]],OTe=St("lock-keyhole",RTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MTe=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],Tne=St("lock-open",MTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DTe=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],lm=St("lock",DTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LTe=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Yz=St("log-out",LTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jTe=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],BTe=St("mail",jTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UTe=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],Jz=St("menu",UTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FTe=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],$Te=St("message-square",FTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zTe=[["path",{d:"M5 12h14",key:"1ays0h"}]],S4=St("minus",zTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HTe=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Su=St("plus",HTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VTe=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Pc=St("refresh-cw",VTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qTe=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],GTe=St("rotate-ccw",qTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KTe=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],o8=St("save",KTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WTe=[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],kne=St("scroll-text",WTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YTe=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Cne=St("search",YTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JTe=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],XTe=St("send",JTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QTe=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],HT=St("settings",QTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZTe=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],eke=St("shield-alert",ZTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tke=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],sd=St("shield-check",tke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nke=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],xw=St("shield",nke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rke=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],vw=St("sparkles",rke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ike=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],zg=St("target",ike);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ske=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],a8=St("terminal",ske);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oke=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],cm=St("trash-2",oke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ake=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],n2=St("trending-down",ake);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lke=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],In=St("trending-up",lke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cke=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],_l=St("triangle-alert",cke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uke=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],VT=St("upload",uke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dke=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],fke=St("user",dke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hke=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],tx=St("wallet",hke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pke=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],Nne=St("wand-sparkles",pke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mke=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],r2=St("x",mke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gke=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],$a=St("zap",gke),_ne="6.16.0";function yke(t,e,n){const r=e.split("|").map(s=>s.trim());for(let s=0;s<r.length;s++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof t===e)return}const i=new Error(`invalid value for type ${e}`);throw i.code="INVALID_ARGUMENT",i.argument=`value.${n}`,i.value=t,i}async function Ss(t){const e=Object.keys(t);return(await Promise.all(e.map(r=>Promise.resolve(t[r])))).reduce((r,i,s)=>(r[e[s]]=i,r),{})}function Mt(t,e,n){for(let r in e){let i=e[r];const s=n?n[r]:null;s&&yke(i,s,r),Object.defineProperty(t,r,{enumerable:!0,value:i,writable:!1})}}function Ag(t,e){if(t==null)return"null";if(e==null&&(e=new Set),typeof t=="object"){if(e.has(t))return"[Circular]";e.add(t)}if(Array.isArray(t))return"[ "+t.map(n=>Ag(n,e)).join(", ")+" ]";if(t instanceof Uint8Array){const n="0123456789abcdef";let r="0x";for(let i=0;i<t.length;i++)r+=n[t[i]>>4],r+=n[t[i]&15];return r}if(typeof t=="object"&&typeof t.toJSON=="function")return Ag(t.toJSON(),e);switch(typeof t){case"boolean":case"number":case"symbol":return t.toString();case"bigint":return BigInt(t).toString();case"string":return JSON.stringify(t);case"object":{const n=Object.keys(t);return n.sort(),"{ "+n.map(r=>`${Ag(r,e)}: ${Ag(t[r],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function os(t,e){return t&&t.code===e}function l8(t){return os(t,"CALL_EXCEPTION")}function Pr(t,e,n){let r=t;{const s=[];if(n){if("message"in n||"code"in n||"name"in n)throw new Error(`value will overwrite populated values: ${Ag(n)}`);for(const o in n){if(o==="shortMessage")continue;const a=n[o];s.push(o+"="+Ag(a))}}s.push(`code=${e}`),s.push(`version=${_ne}`),s.length&&(t+=" ("+s.join(", ")+")")}let i;switch(e){case"INVALID_ARGUMENT":i=new TypeError(t);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":i=new RangeError(t);break;default:i=new Error(t)}return Mt(i,{code:e}),n&&Object.assign(i,n),i.shortMessage==null&&Mt(i,{shortMessage:r}),i}function Ke(t,e,n,r){if(!t)throw Pr(e,n,r)}function xe(t,e,n,r){Ke(t,e,"INVALID_ARGUMENT",{argument:n,value:r})}function Ine(t,e,n){n==null&&(n=""),n&&(n=": "+n),Ke(t>=e,"missing argument"+n,"MISSING_ARGUMENT",{count:t,expectedCount:e}),Ke(t<=e,"too many arguments"+n,"UNEXPECTED_ARGUMENT",{count:t,expectedCount:e})}const xke=["NFD","NFC","NFKD","NFKC"].reduce((t,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"".normalize("NFD")!=="e")throw new Error("broken");t.push(e)}catch{}return t},[]);function Pne(t){Ke(xke.indexOf(t)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:t}})}function ph(t,e,n){if(n==null&&(n=""),t!==e){let r=n,i="new";n&&(r+=".",i+=" "+n),Ke(!1,`private constructor; use ${r}from* methods`,"UNSUPPORTED_OPERATION",{operation:i})}}function Rne(t,e,n){if(t instanceof Uint8Array)return n?new Uint8Array(t):t;if(typeof t=="string"&&t.length%2===0&&t.match(/^0x[0-9a-f]*$/i)){const r=new Uint8Array((t.length-2)/2);let i=2;for(let s=0;s<r.length;s++)r[s]=parseInt(t.substring(i,i+2),16),i+=2;return r}xe(!1,"invalid BytesLike value",e||"value",t)}function pt(t,e){return Rne(t,e,!1)}function as(t,e){return Rne(t,e,!0)}function gr(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&t.length!==2+2*e||e===!0&&t.length%2!==0)}function i2(t){return gr(t,!0)||t instanceof Uint8Array}const Xz="0123456789abcdef";function rt(t){const e=pt(t);let n="0x";for(let r=0;r<e.length;r++){const i=e[r];n+=Xz[(i&240)>>4]+Xz[i&15]}return n}function On(t){return"0x"+t.map(e=>rt(e).substring(2)).join("")}function Hg(t){return gr(t,!0)?(t.length-2)/2:pt(t).length}function mr(t,e,n){const r=pt(t);return n!=null&&n>r.length&&Ke(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:n}),rt(r.slice(e??0,n??r.length))}function gmt(t){let e=rt(t).substring(2);for(;e.startsWith("00");)e=e.substring(2);return"0x"+e}function One(t,e,n){const r=pt(t);Ke(e>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:e,offset:e+1});const i=new Uint8Array(e);return i.fill(0),n?i.set(r,e-r.length):i.set(r,0),rt(i)}function od(t,e){return One(t,e,!0)}function vke(t,e){return One(t,e,!1)}const I1=BigInt(0),xl=BigInt(1),Tg=9007199254740991;function qT(t,e){const n=s2(t,"value"),r=BigInt(Qt(e,"width"));if(Ke(n>>r===I1,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:t}),n>>r-xl){const i=(xl<<r)-xl;return-((~n&i)+xl)}return n}function Mne(t,e){let n=Et(t,"value");const r=BigInt(Qt(e,"width")),i=xl<<r-xl;if(n<I1){n=-n,Ke(n<=i,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});const s=(xl<<r)-xl;return(~n&s)+xl}else Ke(n<i,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});return n}function yp(t,e){const n=s2(t,"value"),r=BigInt(Qt(e,"bits"));return n&(xl<<r)-xl}function Et(t,e){switch(typeof t){case"bigint":return t;case"number":return xe(Number.isInteger(t),"underflow",e||"value",t),xe(t>=-Tg&&t<=Tg,"overflow",e||"value",t),BigInt(t);case"string":try{if(t==="")throw new Error("empty string");return t[0]==="-"&&t[1]!=="-"?-BigInt(t.substring(1)):BigInt(t)}catch(n){xe(!1,`invalid BigNumberish string: ${n.message}`,e||"value",t)}}xe(!1,"invalid BigNumberish value",e||"value",t)}function s2(t,e){const n=Et(t,e);return Ke(n>=I1,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t}),n}const Qz="0123456789abcdef";function P1(t){if(t instanceof Uint8Array){let e="0x0";for(const n of t)e+=Qz[n>>4],e+=Qz[n&15];return BigInt(e)}return Et(t)}function Qt(t,e){switch(typeof t){case"bigint":return xe(t>=-Tg&&t<=Tg,"overflow",e||"value",t),Number(t);case"number":return xe(Number.isInteger(t),"underflow",e||"value",t),xe(t>=-Tg&&t<=Tg,"overflow",e||"value",t),t;case"string":try{if(t==="")throw new Error("empty string");return Qt(BigInt(t),e)}catch(n){xe(!1,`invalid numeric string: ${n.message}`,e||"value",t)}}xe(!1,"invalid numeric value",e||"value",t)}function bke(t){return Qt(P1(t))}function ad(t,e){const n=s2(t,"value");let r=n.toString(16);if(e==null)r.length%2&&(r="0"+r);else{const i=Qt(e,"width");if(i===0&&n===I1)return"0x";for(Ke(i*2>=r.length,`value exceeds width (${i} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:t});r.length<i*2;)r="0"+r}return"0x"+r}function Lr(t,e){const n=s2(t,"value");if(n===I1){const s=e!=null?Qt(e,"width"):0;return new Uint8Array(s)}let r=n.toString(16);if(r.length%2&&(r="0"+r),e!=null){const s=Qt(e,"width");for(;r.length<s*2;)r="00"+r;Ke(s*2===r.length,`value exceeds width (${s} bytes)`,"NUMERIC_FAULT",{operation:"toBeArray",fault:"overflow",value:t})}const i=new Uint8Array(r.length/2);for(let s=0;s<i.length;s++){const o=s*2;i[s]=parseInt(r.substring(o,o+2),16)}return i}function yl(t){let e=rt(i2(t)?t:Lr(t)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const GT="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";let US=null;function wke(t){if(US==null){US={};for(let n=0;n<GT.length;n++)US[GT[n]]=BigInt(n)}const e=US[t];return xe(e!=null,"invalid base58 value","letter",t),e}const Eke=BigInt(0),A4=BigInt(58);function Dne(t){const e=pt(t);let n=P1(e),r="";for(;n;)r=GT[Number(n%A4)]+r,n/=A4;for(let i=0;i<e.length&&!e[i];i++)r=GT[0]+r;return r}function Ske(t){let e=Eke;for(let n=0;n<t.length;n++)e*=A4,e+=wke(t[n]);return e}function Ake(t){t=atob(t);const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return pt(e)}function Tke(t){const e=pt(t);let n="";for(let r=0;r<e.length;r++)n+=String.fromCharCode(e[r]);return btoa(n)}var cy;class Lne{constructor(e,n,r){Se(this,"filter");Se(this,"emitter");Be(this,cy);ge(this,cy,n),Mt(this,{emitter:e,filter:r})}async removeListener(){ie(this,cy)!=null&&await this.emitter.off(this.filter,ie(this,cy))}}cy=new WeakMap;function kke(t,e,n,r,i){xe(!1,`invalid codepoint at offset ${e}; ${t}`,"bytes",n)}function jne(t,e,n,r,i){if(t==="BAD_PREFIX"||t==="UNEXPECTED_CONTINUE"){let s=0;for(let o=e+1;o<n.length&&n[o]>>6===2;o++)s++;return s}return t==="OVERRUN"?n.length-e-1:0}function Cke(t,e,n,r,i){return t==="OVERLONG"?(xe(typeof i=="number","invalid bad code point for replacement","badCodepoint",i),r.push(i),0):(r.push(65533),jne(t,e,n))}const Nke=Object.freeze({error:kke,ignore:jne,replace:Cke});function Bne(t,e){e==null&&(e=Nke.error);const n=pt(t,"bytes"),r=[];let i=0;for(;i<n.length;){const s=n[i++];if(s>>7===0){r.push(s);continue}let o=null,a=null;if((s&224)===192)o=1,a=127;else if((s&240)===224)o=2,a=2047;else if((s&248)===240)o=3,a=65535;else{(s&192)===128?i+=e("UNEXPECTED_CONTINUE",i-1,n,r):i+=e("BAD_PREFIX",i-1,n,r);continue}if(i-1+o>=n.length){i+=e("OVERRUN",i-1,n,r);continue}let l=s&(1<<8-o-1)-1;for(let c=0;c<o;c++){let u=n[i];if((u&192)!=128){i+=e("MISSING_CONTINUE",i,n,r),l=null;break}l=l<<6|u&63,i++}if(l!==null){if(l>1114111){i+=e("OUT_OF_RANGE",i-1-o,n,r,l);continue}if(l>=55296&&l<=57343){i+=e("UTF16_SURROGATE",i-1-o,n,r,l);continue}if(l<=a){i+=e("OVERLONG",i-1-o,n,r,l);continue}r.push(l)}}return r}function pi(t,e){xe(typeof t=="string","invalid string value","str",t),e!=null&&(Pne(e),t=t.normalize(e));let n=[];for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);if(i<128)n.push(i);else if(i<2048)n.push(i>>6|192),n.push(i&63|128);else if((i&64512)==55296){r++;const s=t.charCodeAt(r);xe(r<t.length&&(s&64512)===56320,"invalid surrogate pair","str",t);const o=65536+((i&1023)<<10)+(s&1023);n.push(o>>18|240),n.push(o>>12&63|128),n.push(o>>6&63|128),n.push(o&63|128)}else n.push(i>>12|224),n.push(i>>6&63|128),n.push(i&63|128)}return new Uint8Array(n)}function _ke(t){return t.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function KT(t,e){return _ke(Bne(t,e))}function ymt(t,e){return Bne(pi(t,e))}function Une(t){async function e(n,r){Ke(r==null||!r.cancelled,"request cancelled before sending","CANCELLED");const i=n.url.split(":")[0].toLowerCase();Ke(i==="http"||i==="https",`unsupported protocol ${i}`,"UNSUPPORTED_OPERATION",{info:{protocol:i},operation:"request"}),Ke(i==="https"||!n.credentials||n.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let s=null;const o=new AbortController,a=setTimeout(()=>{s=Pr("request timeout","TIMEOUT"),o.abort()},n.timeout);r&&r.addListener(()=>{s=Pr("request cancelled","CANCELLED"),o.abort()});const l=Object.assign({},t,{method:n.method,headers:new Headers(Array.from(n)),body:n.body||void 0,signal:o.signal});let c;try{c=await fetch(n.url,l)}catch(g){throw clearTimeout(a),s||g}clearTimeout(a);const u={};c.headers.forEach((g,v)=>{u[v.toLowerCase()]=g});const f=await c.arrayBuffer(),m=f==null?null:new Uint8Array(f);return{statusCode:c.status,statusMessage:c.statusText,headers:u,body:m}}return e}const Ike=12,Pke=250;let Zz=Une();const Rke=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),Oke=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let KP=!1;async function Fne(t,e){try{const n=t.match(Rke);if(!n)throw new Error("invalid data");return new Xf(200,"OK",{"content-type":n[1]||"text/plain"},n[2]?Ake(n[3]):Dke(n[3]))}catch{return new Xf(599,"BAD REQUEST (invalid data: URI)",{},null,new ld(t))}}function $ne(t){async function e(n,r){try{const i=n.match(Oke);if(!i)throw new Error("invalid link");return new ld(`${t}${i[2]}`)}catch{return new Xf(599,"BAD REQUEST (invalid IPFS URI)",{},null,new ld(n))}}return e}const FS={data:Fne,ipfs:$ne("https://gateway.ipfs.io/ipfs/")},zne=new WeakMap;var Np,Pf;class Mke{constructor(e){Be(this,Np);Be(this,Pf);ge(this,Np,[]),ge(this,Pf,!1),zne.set(e,()=>{if(!ie(this,Pf)){ge(this,Pf,!0);for(const n of ie(this,Np))setTimeout(()=>{n()},0);ge(this,Np,[])}})}addListener(e){Ke(!ie(this,Pf),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),ie(this,Np).push(e)}get cancelled(){return ie(this,Pf)}checkSignal(){Ke(!this.cancelled,"cancelled","CANCELLED",{})}}Np=new WeakMap,Pf=new WeakMap;function $S(t){if(t==null)throw new Error("missing signal; should not happen");return t.checkSignal(),t}var uy,dy,ll,Cu,fy,hy,Pi,Do,Nu,_p,Ip,Pp,nc,cl,Rf,Rp,Pb;const UC=class UC{constructor(e){Be(this,Rp);Be(this,uy);Be(this,dy);Be(this,ll);Be(this,Cu);Be(this,fy);Be(this,hy);Be(this,Pi);Be(this,Do);Be(this,Nu);Be(this,_p);Be(this,Ip);Be(this,Pp);Be(this,nc);Be(this,cl);Be(this,Rf);ge(this,hy,String(e)),ge(this,uy,!1),ge(this,dy,!0),ge(this,ll,{}),ge(this,Cu,""),ge(this,fy,3e5),ge(this,cl,{slotInterval:Pke,maxAttempts:Ike}),ge(this,Rf,null)}get url(){return ie(this,hy)}set url(e){ge(this,hy,String(e))}get body(){return ie(this,Pi)==null?null:new Uint8Array(ie(this,Pi))}set body(e){if(e==null)ge(this,Pi,void 0),ge(this,Do,void 0);else if(typeof e=="string")ge(this,Pi,pi(e)),ge(this,Do,"text/plain");else if(e instanceof Uint8Array)ge(this,Pi,e),ge(this,Do,"application/octet-stream");else if(typeof e=="object")ge(this,Pi,pi(JSON.stringify(e))),ge(this,Do,"application/json");else throw new Error("invalid body")}hasBody(){return ie(this,Pi)!=null}get method(){return ie(this,Cu)?ie(this,Cu):this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),ge(this,Cu,String(e).toUpperCase())}get headers(){const e=Object.assign({},ie(this,ll));return ie(this,Nu)&&(e.authorization=`Basic ${Tke(pi(ie(this,Nu)))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&ie(this,Do)&&(e["content-type"]=ie(this,Do)),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,n){ie(this,ll)[String(e).toLowerCase()]=String(n)}clearHeaders(){ge(this,ll,{})}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const i=n[r++];return{value:[i,e[i]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return ie(this,Nu)||null}setCredentials(e,n){xe(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),ge(this,Nu,`${e}:${n}`)}get allowGzip(){return ie(this,dy)}set allowGzip(e){ge(this,dy,!!e)}get allowInsecureAuthentication(){return!!ie(this,uy)}set allowInsecureAuthentication(e){ge(this,uy,!!e)}get timeout(){return ie(this,fy)}set timeout(e){xe(e>=0,"timeout must be non-zero","timeout",e),ge(this,fy,e)}get preflightFunc(){return ie(this,_p)||null}set preflightFunc(e){ge(this,_p,e)}get processFunc(){return ie(this,Ip)||null}set processFunc(e){ge(this,Ip,e)}get retryFunc(){return ie(this,Pp)||null}set retryFunc(e){ge(this,Pp,e)}get getUrlFunc(){return ie(this,Rf)||Zz}set getUrlFunc(e){ge(this,Rf,e)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${ie(this,Pi)?rt(ie(this,Pi)):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(ie(this,cl).slotInterval=e.slotInterval),e.maxAttempts!=null&&(ie(this,cl).maxAttempts=e.maxAttempts)}send(){return Ke(ie(this,nc)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),ge(this,nc,new Mke(this)),tt(this,Rp,Pb).call(this,0,eH()+this.timeout,0,this,new Xf(0,"",{},null,this))}cancel(){Ke(ie(this,nc)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=zne.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const n=this.url.split(":")[0].toLowerCase(),r=e.split(":")[0].toLowerCase();Ke(this.method==="GET"&&(n!=="https"||r!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const i=new UC(e);return i.method="GET",i.allowGzip=this.allowGzip,i.timeout=this.timeout,ge(i,ll,Object.assign({},ie(this,ll))),ie(this,Pi)&&ge(i,Pi,new Uint8Array(ie(this,Pi))),ge(i,Do,ie(this,Do)),i}clone(){const e=new UC(this.url);return ge(e,Cu,ie(this,Cu)),ie(this,Pi)&&ge(e,Pi,ie(this,Pi)),ge(e,Do,ie(this,Do)),ge(e,ll,Object.assign({},ie(this,ll))),ge(e,Nu,ie(this,Nu)),this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),ge(e,_p,ie(this,_p)),ge(e,Ip,ie(this,Ip)),ge(e,Pp,ie(this,Pp)),ge(e,cl,Object.assign({},ie(this,cl))),ge(e,Rf,ie(this,Rf)),e}static lockConfig(){KP=!0}static getGateway(e){return FS[e.toLowerCase()]||null}static registerGateway(e,n){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(KP)throw new Error("gateways locked");FS[e]=n}static registerGetUrl(e){if(KP)throw new Error("gateways locked");Zz=e}static createGetUrlFunc(e){return Une(e)}static createDataGateway(){return Fne}static createIpfsGatewayFunc(e){return $ne(e)}};uy=new WeakMap,dy=new WeakMap,ll=new WeakMap,Cu=new WeakMap,fy=new WeakMap,hy=new WeakMap,Pi=new WeakMap,Do=new WeakMap,Nu=new WeakMap,_p=new WeakMap,Ip=new WeakMap,Pp=new WeakMap,nc=new WeakMap,cl=new WeakMap,Rf=new WeakMap,Rp=new WeakSet,Pb=async function(e,n,r,i,s){var u,f,m;if(e>=ie(this,cl).maxAttempts)return s.makeServerError("exceeded maximum retry limit");Ke(eH()<=n,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:i}),r>0&&await Lke(r);let o=this.clone();const a=(o.url.split(":")[0]||"").toLowerCase();if(a in FS){const g=await FS[a](o.url,$S(ie(i,nc)));if(g instanceof Xf){let v=g;if(this.processFunc){$S(ie(i,nc));try{v=await this.processFunc(o,v)}catch(x){(x.throttle==null||typeof x.stall!="number")&&v.makeServerError("error in post-processing function",x).assertOk()}}return v}o=g}this.preflightFunc&&(o=await this.preflightFunc(o));const l=await this.getUrlFunc(o,$S(ie(i,nc)));let c=new Xf(l.statusCode,l.statusMessage,l.headers,l.body,i);if(c.statusCode===301||c.statusCode===302){try{const g=c.headers.location||"";return tt(u=o.redirect(g),Rp,Pb).call(u,e+1,n,0,i,c)}catch{}return c}else if(c.statusCode===429&&(this.retryFunc==null||await this.retryFunc(o,c,e))){const g=c.headers["retry-after"];let v=ie(this,cl).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof g=="string"&&g.match(/^[1-9][0-9]*$/)&&(v=parseInt(g)),tt(f=o.clone(),Rp,Pb).call(f,e+1,n,v,i,c)}if(this.processFunc){$S(ie(i,nc));try{c=await this.processFunc(o,c)}catch(g){(g.throttle==null||typeof g.stall!="number")&&c.makeServerError("error in post-processing function",g).assertOk();let v=ie(this,cl).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return g.stall>=0&&(v=g.stall),tt(m=o.clone(),Rp,Pb).call(m,e+1,n,v,i,c)}}return c};let ld=UC;var o1,a1,l1,Lo,py,Op;const i7=class i7{constructor(e,n,r,i,s){Be(this,o1);Be(this,a1);Be(this,l1);Be(this,Lo);Be(this,py);Be(this,Op);ge(this,o1,e),ge(this,a1,n),ge(this,l1,Object.keys(r).reduce((o,a)=>(o[a.toLowerCase()]=String(r[a]),o),{})),ge(this,Lo,i==null?null:new Uint8Array(i)),ge(this,py,s||null),ge(this,Op,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${ie(this,Lo)?rt(ie(this,Lo)):"null"}>`}get statusCode(){return ie(this,o1)}get statusMessage(){return ie(this,a1)}get headers(){return Object.assign({},ie(this,l1))}get body(){return ie(this,Lo)==null?null:new Uint8Array(ie(this,Lo))}get bodyText(){try{return ie(this,Lo)==null?"":KT(ie(this,Lo))}catch{Ke(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{Ke(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const i=n[r++];return{value:[i,e[i]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(e,n){let r;e?r=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,r=`CLIENT ESCALATED SERVER ERROR (${e})`);const i=new i7(599,r,this.headers,this.body,ie(this,py)||void 0);return ge(i,Op,{message:e,error:n}),i}throwThrottleError(e,n){n==null?n=-1:xe(Number.isInteger(n)&&n>=0,"invalid stall timeout","stall",n);const r=new Error(e||"throttling requests");throw Mt(r,{stall:n,throttle:!0}),r}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return ie(this,Lo)!=null}get request(){return ie(this,py)}ok(){return ie(this,Op).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:n}=ie(this,Op);e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let r=null;this.request&&(r=this.request.url);let i=null;try{ie(this,Lo)&&(i=KT(ie(this,Lo)))}catch{}Ke(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:n,info:{requestUrl:r,responseBody:i,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};o1=new WeakMap,a1=new WeakMap,l1=new WeakMap,Lo=new WeakMap,py=new WeakMap,Op=new WeakMap;let Xf=i7;function eH(){return new Date().getTime()}function Dke(t){return pi(t.replace(/%([0-9a-f][0-9a-f])/gi,(e,n)=>String.fromCharCode(parseInt(n,16))))}function Lke(t){return new Promise(e=>setTimeout(e,t))}const jke=BigInt(-1),nl=BigInt(0),kg=BigInt(1),Bke=BigInt(5),U0={};let Vg="0000";for(;Vg.length<80;)Vg+=Vg;function qh(t){let e=Vg;for(;e.length<t;)e+=e;return BigInt("1"+e.substring(0,t))}function ob(t,e,n){const r=BigInt(e.width);if(e.signed){const i=kg<<r-kg;Ke(n==null||t>=-i&&t<i,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:t}),t>nl?t=qT(yp(t,r),r):t=-qT(yp(-t,r),r)}else{const i=kg<<r;Ke(n==null||t>=0&&t<i,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:t}),t=(t%i+i)%i&i-kg}return t}function WP(t){typeof t=="number"&&(t=`fixed128x${t}`);let e=!0,n=128,r=18;if(typeof t=="string"){if(t!=="fixed")if(t==="ufixed")e=!1;else{const s=t.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);xe(s,"invalid fixed format","format",t),e=s[1]!=="u",n=parseInt(s[2]),r=parseInt(s[3])}}else if(t){const s=t,o=(a,l,c)=>s[a]==null?c:(xe(typeof s[a]===l,"invalid fixed format ("+a+" not "+l+")","format."+a,s[a]),s[a]);e=o("signed","boolean",e),n=o("width","number",n),r=o("decimals","number",r)}xe(n%8===0,"invalid FixedNumber width (not byte aligned)","format.width",n),xe(r<=80,"invalid FixedNumber decimals (too large)","format.decimals",r);const i=(e?"":"u")+"fixed"+String(n)+"x"+String(r);return{signed:e,width:n,decimals:r,name:i}}function Uke(t,e){let n="";t<nl&&(n="-",t*=jke);let r=t.toString();if(e===0)return n+r;for(;r.length<=e;)r=Vg+r;const i=r.length-e;for(r=r.substring(0,i)+"."+r.substring(i);r[0]==="0"&&r[1]!==".";)r=r.substring(1);for(;r[r.length-1]==="0"&&r[r.length-2]!==".";)r=r.substring(0,r.length-1);return n+r}var ul,rr,js,Gn,Zh,yu,T4,k4,C4,N4;const Cf=class Cf{constructor(e,n,r){Be(this,Gn);Se(this,"format");Be(this,ul);Be(this,rr);Be(this,js);Se(this,"_value");ph(e,U0,"FixedNumber"),ge(this,rr,n),ge(this,ul,r);const i=Uke(n,r.decimals);Mt(this,{format:r.name,_value:i}),ge(this,js,qh(r.decimals))}get signed(){return ie(this,ul).signed}get width(){return ie(this,ul).width}get decimals(){return ie(this,ul).decimals}get value(){return ie(this,rr)}addUnsafe(e){return tt(this,Gn,T4).call(this,e)}add(e){return tt(this,Gn,T4).call(this,e,"add")}subUnsafe(e){return tt(this,Gn,k4).call(this,e)}sub(e){return tt(this,Gn,k4).call(this,e,"sub")}mulUnsafe(e){return tt(this,Gn,C4).call(this,e)}mul(e){return tt(this,Gn,C4).call(this,e,"mul")}mulSignal(e){tt(this,Gn,Zh).call(this,e);const n=ie(this,rr)*ie(e,rr);return Ke(n%ie(this,js)===nl,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),tt(this,Gn,yu).call(this,n/ie(this,js),"mulSignal")}divUnsafe(e){return tt(this,Gn,N4).call(this,e)}div(e){return tt(this,Gn,N4).call(this,e,"div")}divSignal(e){Ke(ie(e,rr)!==nl,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),tt(this,Gn,Zh).call(this,e);const n=ie(this,rr)*ie(this,js);return Ke(n%ie(e,rr)===nl,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),tt(this,Gn,yu).call(this,n/ie(e,rr),"divSignal")}cmp(e){let n=this.value,r=e.value;const i=this.decimals-e.decimals;return i>0?r*=qh(i):i<0&&(n*=qh(-i)),n<r?-1:n>r?1:0}eq(e){return this.cmp(e)===0}lt(e){return this.cmp(e)<0}lte(e){return this.cmp(e)<=0}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=ie(this,rr);return ie(this,rr)<nl&&(e-=ie(this,js)-kg),e=ie(this,rr)/ie(this,js)*ie(this,js),tt(this,Gn,yu).call(this,e,"floor")}ceiling(){let e=ie(this,rr);return ie(this,rr)>nl&&(e+=ie(this,js)-kg),e=ie(this,rr)/ie(this,js)*ie(this,js),tt(this,Gn,yu).call(this,e,"ceiling")}round(e){if(e==null&&(e=0),e>=this.decimals)return this;const n=this.decimals-e,r=Bke*qh(n-1);let i=this.value+r;const s=qh(n);return i=i/s*s,ob(i,ie(this,ul),"round"),new Cf(U0,i,ie(this,ul))}isZero(){return ie(this,rr)===nl}isNegative(){return ie(this,rr)<nl}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return Cf.fromString(this.toString(),e)}static fromValue(e,n,r){const i=n==null?0:Qt(n),s=WP(r);let o=Et(e,"value");const a=i-s.decimals;if(a>0){const l=qh(a);Ke(o%l===nl,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e}),o/=l}else a<0&&(o*=qh(-a));return ob(o,s,"fromValue"),new Cf(U0,o,s)}static fromString(e,n){const r=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);xe(r&&r[2].length+r[3].length>0,"invalid FixedNumber string value","value",e);const i=WP(n);let s=r[2]||"0",o=r[3]||"";for(;o.length<i.decimals;)o+=Vg;Ke(o.substring(i.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e}),o=o.substring(0,i.decimals);const a=BigInt(r[1]+s+o);return ob(a,i,"fromString"),new Cf(U0,a,i)}static fromBytes(e,n){let r=P1(pt(e,"value"));const i=WP(n);return i.signed&&(r=qT(r,i.width)),ob(r,i,"fromBytes"),new Cf(U0,r,i)}};ul=new WeakMap,rr=new WeakMap,js=new WeakMap,Gn=new WeakSet,Zh=function(e){xe(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)},yu=function(e,n){return e=ob(e,ie(this,ul),n),new Cf(U0,e,ie(this,ul))},T4=function(e,n){return tt(this,Gn,Zh).call(this,e),tt(this,Gn,yu).call(this,ie(this,rr)+ie(e,rr),n)},k4=function(e,n){return tt(this,Gn,Zh).call(this,e),tt(this,Gn,yu).call(this,ie(this,rr)-ie(e,rr),n)},C4=function(e,n){return tt(this,Gn,Zh).call(this,e),tt(this,Gn,yu).call(this,ie(this,rr)*ie(e,rr)/ie(this,js),n)},N4=function(e,n){return Ke(ie(e,rr)!==nl,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),tt(this,Gn,Zh).call(this,e),tt(this,Gn,yu).call(this,ie(this,rr)*ie(this,js)/ie(e,rr),n)};let WT=Cf;function Fke(t){let e=t.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function tH(t,e,n){let r=0;for(let i=0;i<n;i++)r=r*256+t[e+i];return r}function nH(t,e,n,r){const i=[];for(;n<e+1+r;){const s=Hne(t,n);i.push(s.result),n+=s.consumed,Ke(n<=e+1+r,"child data too short","BUFFER_OVERRUN",{buffer:t,length:r,offset:e})}return{consumed:1+r,result:i}}function Hne(t,e){Ke(t.length!==0,"data too short","BUFFER_OVERRUN",{buffer:t,length:0,offset:1});const n=r=>{Ke(r<=t.length,"data short segment too short","BUFFER_OVERRUN",{buffer:t,length:t.length,offset:r})};if(t[e]>=248){const r=t[e]-247;n(e+1+r);const i=tH(t,e+1,r);return n(e+1+r+i),nH(t,e,e+1+r,r+i)}else if(t[e]>=192){const r=t[e]-192;return n(e+1+r),nH(t,e,e+1,r)}else if(t[e]>=184){const r=t[e]-183;n(e+1+r);const i=tH(t,e+1,r);n(e+1+r+i);const s=rt(t.slice(e+1+r,e+1+r+i));return{consumed:1+r+i,result:s}}else if(t[e]>=128){const r=t[e]-128;n(e+1+r);const i=rt(t.slice(e+1,e+1+r));return{consumed:1+r,result:i}}return{consumed:1,result:Fke(t[e])}}function R1(t){const e=pt(t,"data"),n=Hne(e,0);return xe(n.consumed===e.length,"unexpected junk after rlp payload","data",t),n.result}function rH(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function Vne(t){if(Array.isArray(t)){let r=[];if(t.forEach(function(s){r=r.concat(Vne(s))}),r.length<=55)return r.unshift(192+r.length),r;const i=rH(r.length);return i.unshift(247+i.length),i.concat(r)}const e=Array.prototype.slice.call(pt(t,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const n=rH(e.length);return n.unshift(183+n.length),n.concat(e)}const iH="0123456789abcdef";function Ac(t){let e="0x";for(const n of Vne(t))e+=iH[n>>4],e+=iH[n&15];return e}const qne=["wei","kwei","mwei","gwei","szabo","finney","ether"];function Gne(t,e){let n=18;if(typeof e=="string"){const r=qne.indexOf(e);xe(r>=0,"invalid unit","unit",e),n=3*r}else e!=null&&(n=Qt(e,"unit"));return WT.fromValue(t,n,{decimals:n,width:512}).toString()}function $ke(t,e){xe(typeof t=="string","value must be a string","value",t);let n=18;if(typeof e=="string"){const r=qne.indexOf(e);xe(r>=0,"invalid unit","unit",e),n=3*r}else e!=null&&(n=Qt(e,"unit"));return WT.fromString(t,{decimals:n,width:512}).value}function xmt(t){return Gne(t,18)}function vmt(t){return $ke(t,18)}function zke(t){const e=pt(t,"randomBytes");e[6]=e[6]&15|64,e[8]=e[8]&63|128;const n=rt(e);return[n.substring(2,10),n.substring(10,14),n.substring(14,18),n.substring(18,22),n.substring(22,34)].join("-")}const qs=32,_4=new Uint8Array(qs),Hke=["then"],zS={},Kne=new WeakMap;function lp(t){return Kne.get(t)}function sH(t,e){Kne.set(t,e)}function ab(t,e){const n=new Error(`deferred error during ABI decoding triggered accessing ${t}`);throw n.error=e,n}function I4(t,e,n){return t.indexOf(null)>=0?e.map((r,i)=>r instanceof nx?I4(lp(r),r,n):r):t.reduce((r,i,s)=>{let o=e.getValue(i);return i in r||(n&&o instanceof nx&&(o=I4(lp(o),o,n)),r[i]=o),r},{})}var my;const Mg=class Mg extends Array{constructor(...n){const r=n[0];let i=n[1],s=(n[2]||[]).slice(),o=!0;r!==zS&&(i=n,s=[],o=!1);super(i.length);Be(this,my);i.forEach((c,u)=>{this[u]=c});const a=s.reduce((c,u)=>(typeof u=="string"&&c.set(u,(c.get(u)||0)+1),c),new Map);if(sH(this,Object.freeze(i.map((c,u)=>{const f=s[u];return f!=null&&a.get(f)===1?f:null}))),ge(this,my,[]),ie(this,my)==null&&ie(this,my),!o)return;Object.freeze(this);const l=new Proxy(this,{get:(c,u,f)=>{if(typeof u=="string"){if(u.match(/^[0-9]+$/)){const g=Qt(u,"%index");if(g<0||g>=this.length)throw new RangeError("out of result range");const v=c[g];return v instanceof Error&&ab(`index ${g}`,v),v}if(Hke.indexOf(u)>=0)return Reflect.get(c,u,f);const m=c[u];if(m instanceof Function)return function(...g){return m.apply(this===f?c:this,g)};if(!(u in c))return c.getValue.apply(this===f?c:this,[u])}return Reflect.get(c,u,f)}});return sH(l,lp(this)),l}toArray(n){const r=[];return this.forEach((i,s)=>{i instanceof Error&&ab(`index ${s}`,i),n&&i instanceof Mg&&(i=i.toArray(n)),r.push(i)}),r}toObject(n){const r=lp(this);return r.reduce((i,s,o)=>(Ke(s!=null,`value at index ${o} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),I4(r,this,n)),{})}slice(n,r){n==null&&(n=0),n<0&&(n+=this.length,n<0&&(n=0)),r==null&&(r=this.length),r<0&&(r+=this.length,r<0&&(r=0)),r>this.length&&(r=this.length);const i=lp(this),s=[],o=[];for(let a=n;a<r;a++)s.push(this[a]),o.push(i[a]);return new Mg(zS,s,o)}filter(n,r){const i=lp(this),s=[],o=[];for(let a=0;a<this.length;a++){const l=this[a];l instanceof Error&&ab(`index ${a}`,l),n.call(r,l,a,this)&&(s.push(l),o.push(i[a]))}return new Mg(zS,s,o)}map(n,r){const i=[];for(let s=0;s<this.length;s++){const o=this[s];o instanceof Error&&ab(`index ${s}`,o),i.push(n.call(r,o,s,this))}return i}getValue(n){const r=lp(this).indexOf(n);if(r===-1)return;const i=this[r];return i instanceof Error&&ab(`property ${JSON.stringify(n)}`,i.error),i}static fromItems(n,r){return new Mg(zS,n,r)}};my=new WeakMap;let nx=Mg;function bmt(t){const e=[],n=function(r,i){if(Array.isArray(i))for(let s in i){const o=r.slice();o.push(s);try{n(o,i[s])}catch(a){e.push({path:o,error:a})}}};return n([],t),e}function oH(t){let e=Lr(t);return Ke(e.length<=qs,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:qs,offset:e.length}),e.length!==qs&&(e=as(On([_4.slice(e.length%qs),e]))),e}class Ad{constructor(e,n,r,i){Se(this,"name");Se(this,"type");Se(this,"localName");Se(this,"dynamic");Mt(this,{name:e,type:n,localName:r,dynamic:i},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,n){xe(!1,e,this.localName,n)}}var _u,Mp,gy,tT;class P4{constructor(){Be(this,gy);Be(this,_u);Be(this,Mp);ge(this,_u,[]),ge(this,Mp,0)}get data(){return On(ie(this,_u))}get length(){return ie(this,Mp)}appendWriter(e){return tt(this,gy,tT).call(this,as(e.data))}writeBytes(e){let n=as(e);const r=n.length%qs;return r&&(n=as(On([n,_4.slice(r)]))),tt(this,gy,tT).call(this,n)}writeValue(e){return tt(this,gy,tT).call(this,oH(e))}writeUpdatableValue(){const e=ie(this,_u).length;return ie(this,_u).push(_4),ge(this,Mp,ie(this,Mp)+qs),n=>{ie(this,_u)[e]=oH(n)}}}_u=new WeakMap,Mp=new WeakMap,gy=new WeakSet,tT=function(e){return ie(this,_u).push(e),ge(this,Mp,ie(this,Mp)+e.length),e.length};var ao,jo,Dp,Lp,Of,Im,O4,Wne;const s7=class s7{constructor(e,n,r){Be(this,Im);Se(this,"allowLoose");Be(this,ao);Be(this,jo);Be(this,Dp);Be(this,Lp);Be(this,Of);Mt(this,{allowLoose:!!n}),ge(this,ao,as(e)),ge(this,Dp,0),ge(this,Lp,null),ge(this,Of,r??1024),ge(this,jo,0)}get data(){return rt(ie(this,ao))}get dataLength(){return ie(this,ao).length}get consumed(){return ie(this,jo)}get bytes(){return new Uint8Array(ie(this,ao))}subReader(e){const n=new s7(ie(this,ao).slice(ie(this,jo)+e),this.allowLoose,ie(this,Of));return ge(n,Lp,this),n}readBytes(e,n){let r=tt(this,Im,Wne).call(this,0,e,!!n);return tt(this,Im,O4).call(this,e),ge(this,jo,ie(this,jo)+r.length),r.slice(0,e)}readValue(){return P1(this.readBytes(qs))}readIndex(){return bke(this.readBytes(qs))}};ao=new WeakMap,jo=new WeakMap,Dp=new WeakMap,Lp=new WeakMap,Of=new WeakMap,Im=new WeakSet,O4=function(e){var n;if(ie(this,Lp))return tt(n=ie(this,Lp),Im,O4).call(n,e);ge(this,Dp,ie(this,Dp)+e),Ke(ie(this,Of)<1||ie(this,Dp)<=ie(this,Of)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${ie(this,Of)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:as(ie(this,ao)),offset:ie(this,jo),length:e,info:{bytesRead:ie(this,Dp),dataLength:this.dataLength}})},Wne=function(e,n,r){let i=Math.ceil(n/qs)*qs;return ie(this,jo)+i>ie(this,ao).length&&(this.allowLoose&&r&&ie(this,jo)+n<=ie(this,ao).length?i=n:Ke(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:as(ie(this,ao)),length:ie(this,ao).length,offset:ie(this,jo)+i})),ie(this,ao).slice(ie(this,jo),ie(this,jo)+i)};let R4=s7;function zo(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function c8(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function Yne(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");zo(t.outputLen),zo(t.blockLen)}function rx(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Jne(t,e){c8(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const YP=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Xne=t=>t instanceof Uint8Array,nT=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),rT=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Kl=(t,e)=>t<<32-e|t>>>e,Vke=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Vke)throw new Error("Non little-endian hardware is not supported");const qke=async()=>{};async function aH(t,e,n){let r=Date.now();for(let i=0;i<t;i++){n(i);const s=Date.now()-r;s>=0&&s<e||(await qke(),r+=s)}}function Gke(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function ix(t){if(typeof t=="string"&&(t=Gke(t)),!Xne(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function Kke(...t){const e=new Uint8Array(t.reduce((r,i)=>r+i.length,0));let n=0;return t.forEach(r=>{if(!Xne(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}let u8=class{clone(){return this._cloneInto()}};const Wke={}.toString;function Qne(t,e){if(e!==void 0&&Wke.call(e)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(t,e)}function o2(t){const e=r=>t().update(ix(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Yke(t=32){if(YP&&typeof YP.getRandomValues=="function")return YP.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}let Zne=class extends u8{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,Yne(e);const r=ix(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return rx(this),this.iHash.update(e),this}digestInto(e){rx(this),c8(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const a2=(t,e,n)=>new Zne(t,e).update(n).digest();a2.create=(t,e)=>new Zne(t,e);function Jke(t,e,n,r){Yne(t);const i=Qne({dkLen:32,asyncTick:10},r),{c:s,dkLen:o,asyncTick:a}=i;if(zo(s),zo(o),zo(a),s<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const l=ix(e),c=ix(n),u=new Uint8Array(o),f=a2.create(t,l),m=f._cloneInto().update(c);return{c:s,dkLen:o,asyncTick:a,DK:u,PRF:f,PRFSalt:m}}function Xke(t,e,n,r,i){return t.destroy(),e.destroy(),r&&r.destroy(),i.fill(0),n}function d8(t,e,n,r){const{c:i,dkLen:s,DK:o,PRF:a,PRFSalt:l}=Jke(t,e,n,r);let c;const u=new Uint8Array(4),f=rT(u),m=new Uint8Array(a.outputLen);for(let g=1,v=0;v<s;g++,v+=a.outputLen){const x=o.subarray(v,v+a.outputLen);f.setInt32(0,g,!1),(c=l._cloneInto(c)).update(u).digestInto(m),x.set(m.subarray(0,x.length));for(let b=1;b<i;b++){a._cloneInto(c).update(m).digestInto(m);for(let E=0;E<x.length;E++)x[E]^=m[E]}}return Xke(a,l,o,c,m)}function Qke(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),l=r?4:0,c=r?0:4;t.setUint32(e+l,o,r),t.setUint32(e+c,a,r)}class f8 extends u8{constructor(e,n,r,i){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=rT(this.buffer)}update(e){rx(this);const{view:n,buffer:r,blockLen:i}=this;e=ix(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=rT(e);for(;i<=s-o;o+=i)this.process(l,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){rx(this),Jne(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let f=o;f<i;f++)n[f]=0;Qke(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=rT(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=l/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<c;f++)a.setUint32(4*f,u[f],s)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%n&&e.buffer.set(r),e}}const Zke=(t,e,n)=>t&e^~t&n,eCe=(t,e,n)=>t&e^t&n^e&n,tCe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),af=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),lf=new Uint32Array(64);let nCe=class extends f8{constructor(){super(64,32,8,!1),this.A=af[0]|0,this.B=af[1]|0,this.C=af[2]|0,this.D=af[3]|0,this.E=af[4]|0,this.F=af[5]|0,this.G=af[6]|0,this.H=af[7]|0}get(){const{A:e,B:n,C:r,D:i,E:s,F:o,G:a,H:l}=this;return[e,n,r,i,s,o,a,l]}set(e,n,r,i,s,o,a,l){this.A=e|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(e,n){for(let f=0;f<16;f++,n+=4)lf[f]=e.getUint32(n,!1);for(let f=16;f<64;f++){const m=lf[f-15],g=lf[f-2],v=Kl(m,7)^Kl(m,18)^m>>>3,x=Kl(g,17)^Kl(g,19)^g>>>10;lf[f]=x+lf[f-7]+v+lf[f-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:l,G:c,H:u}=this;for(let f=0;f<64;f++){const m=Kl(a,6)^Kl(a,11)^Kl(a,25),g=u+m+Zke(a,l,c)+tCe[f]+lf[f]|0,x=(Kl(r,2)^Kl(r,13)^Kl(r,22))+eCe(r,i,s)|0;u=c,c=l,l=a,a=o+g|0,o=s,s=i,i=r,r=g+x|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(r,i,s,o,a,l,c,u)}roundClean(){lf.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const Ox=o2(()=>new nCe),HS=BigInt(2**32-1),M4=BigInt(32);function ere(t,e=!1){return e?{h:Number(t&HS),l:Number(t>>M4&HS)}:{h:Number(t>>M4&HS)|0,l:Number(t&HS)|0}}function tre(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=ere(t[i],e);[n[i],r[i]]=[s,o]}return[n,r]}const rCe=(t,e)=>BigInt(t>>>0)<<M4|BigInt(e>>>0),iCe=(t,e,n)=>t>>>n,sCe=(t,e,n)=>t<<32-n|e>>>n,oCe=(t,e,n)=>t>>>n|e<<32-n,aCe=(t,e,n)=>t<<32-n|e>>>n,lCe=(t,e,n)=>t<<64-n|e>>>n-32,cCe=(t,e,n)=>t>>>n-32|e<<64-n,uCe=(t,e)=>e,dCe=(t,e)=>t,nre=(t,e,n)=>t<<n|e>>>32-n,rre=(t,e,n)=>e<<n|t>>>32-n,ire=(t,e,n)=>e<<n-32|t>>>64-n,sre=(t,e,n)=>t<<n-32|e>>>64-n;function fCe(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:i|0}}const hCe=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),pCe=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,mCe=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),gCe=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0,yCe=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0),xCe=(t,e,n,r,i,s)=>e+n+r+i+s+(t/2**32|0)|0,fn={fromBig:ere,split:tre,toBig:rCe,shrSH:iCe,shrSL:sCe,rotrSH:oCe,rotrSL:aCe,rotrBH:lCe,rotrBL:cCe,rotr32H:uCe,rotr32L:dCe,rotlSH:nre,rotlSL:rre,rotlBH:ire,rotlBL:sre,add:fCe,add3L:hCe,add3H:pCe,add4L:mCe,add4H:gCe,add5H:xCe,add5L:yCe},[vCe,bCe]=fn.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),cf=new Uint32Array(80),uf=new Uint32Array(80);let wCe=class extends f8{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:l,Eh:c,El:u,Fh:f,Fl:m,Gh:g,Gl:v,Hh:x,Hl:b}=this;return[e,n,r,i,s,o,a,l,c,u,f,m,g,v,x,b]}set(e,n,r,i,s,o,a,l,c,u,f,m,g,v,x,b){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=c|0,this.El=u|0,this.Fh=f|0,this.Fl=m|0,this.Gh=g|0,this.Gl=v|0,this.Hh=x|0,this.Hl=b|0}process(e,n){for(let k=0;k<16;k++,n+=4)cf[k]=e.getUint32(n),uf[k]=e.getUint32(n+=4);for(let k=16;k<80;k++){const O=cf[k-15]|0,U=uf[k-15]|0,R=fn.rotrSH(O,U,1)^fn.rotrSH(O,U,8)^fn.shrSH(O,U,7),$=fn.rotrSL(O,U,1)^fn.rotrSL(O,U,8)^fn.shrSL(O,U,7),V=cf[k-2]|0,j=uf[k-2]|0,F=fn.rotrSH(V,j,19)^fn.rotrBH(V,j,61)^fn.shrSH(V,j,6),W=fn.rotrSL(V,j,19)^fn.rotrBL(V,j,61)^fn.shrSL(V,j,6),H=fn.add4L($,W,uf[k-7],uf[k-16]),B=fn.add4H(H,R,F,cf[k-7],cf[k-16]);cf[k]=B|0,uf[k]=H|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:l,Dh:c,Dl:u,Eh:f,El:m,Fh:g,Fl:v,Gh:x,Gl:b,Hh:E,Hl:C}=this;for(let k=0;k<80;k++){const O=fn.rotrSH(f,m,14)^fn.rotrSH(f,m,18)^fn.rotrBH(f,m,41),U=fn.rotrSL(f,m,14)^fn.rotrSL(f,m,18)^fn.rotrBL(f,m,41),R=f&g^~f&x,$=m&v^~m&b,V=fn.add5L(C,U,$,bCe[k],uf[k]),j=fn.add5H(V,E,O,R,vCe[k],cf[k]),F=V|0,W=fn.rotrSH(r,i,28)^fn.rotrBH(r,i,34)^fn.rotrBH(r,i,39),H=fn.rotrSL(r,i,28)^fn.rotrBL(r,i,34)^fn.rotrBL(r,i,39),B=r&s^r&a^s&a,A=i&o^i&l^o&l;E=x|0,C=b|0,x=g|0,b=v|0,g=f|0,v=m|0,{h:f,l:m}=fn.add(c|0,u|0,j|0,F|0),c=a|0,u=l|0,a=s|0,l=o|0,s=r|0,o=i|0;const I=fn.add3L(F,H,A);r=fn.add3H(I,j,W,B),i=I|0}({h:r,l:i}=fn.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=fn.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l}=fn.add(this.Ch|0,this.Cl|0,a|0,l|0),{h:c,l:u}=fn.add(this.Dh|0,this.Dl|0,c|0,u|0),{h:f,l:m}=fn.add(this.Eh|0,this.El|0,f|0,m|0),{h:g,l:v}=fn.add(this.Fh|0,this.Fl|0,g|0,v|0),{h:x,l:b}=fn.add(this.Gh|0,this.Gl|0,x|0,b|0),{h:E,l:C}=fn.add(this.Hh|0,this.Hl|0,E|0,C|0),this.set(r,i,s,o,a,l,c,u,f,m,g,v,x,b,E,C)}roundClean(){cf.fill(0),uf.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const h8=o2(()=>new wCe);function ECe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("unable to locate global object")}const lH=ECe(),cH=lH.crypto||lH.msCrypto;function ore(t){switch(t){case"sha256":return Ox.create();case"sha512":return h8.create()}xe(!1,"invalid hashing algorithm name","algorithm",t)}function SCe(t,e){const n={sha256:Ox,sha512:h8}[t];return xe(n!=null,"invalid hmac algorithm","algorithm",t),a2.create(n,e)}function ACe(t,e,n,r,i){const s={sha256:Ox,sha512:h8}[i];return xe(s!=null,"invalid pbkdf2 algorithm","algorithm",i),d8(s,t,e,{c:n,dkLen:r})}function TCe(t){Ke(cH!=null,"platform does not support secure random numbers","UNSUPPORTED_OPERATION",{operation:"randomBytes"}),xe(Number.isInteger(t)&&t>0&&t<=1024,"invalid length","length",t);const e=new Uint8Array(t);return cH.getRandomValues(e),e}let are=!1;const lre=function(t,e,n){return SCe(t,e).update(n).digest()};let cre=lre;function Mx(t,e,n){const r=pt(e,"key"),i=pt(n,"data");return rt(cre(t,r,i))}Mx._=lre;Mx.lock=function(){are=!0};Mx.register=function(t){if(are)throw new Error("computeHmac is locked");cre=t};Object.freeze(Mx);const[ure,dre,fre]=[[],[],[]],kCe=BigInt(0),lb=BigInt(1),CCe=BigInt(2),NCe=BigInt(7),_Ce=BigInt(256),ICe=BigInt(113);for(let t=0,e=lb,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],ure.push(2*(5*r+n)),dre.push((t+1)*(t+2)/2%64);let i=kCe;for(let s=0;s<7;s++)e=(e<<lb^(e>>NCe)*ICe)%_Ce,e&CCe&&(i^=lb<<(lb<<BigInt(s))-lb);fre.push(i)}const[PCe,RCe]=tre(fre,!0),uH=(t,e,n)=>n>32?ire(t,e,n):nre(t,e,n),dH=(t,e,n)=>n>32?sre(t,e,n):rre(t,e,n);function OCe(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,l=(o+2)%10,c=n[l],u=n[l+1],f=uH(c,u,1)^n[a],m=dH(c,u,1)^n[a+1];for(let g=0;g<50;g+=10)t[o+g]^=f,t[o+g+1]^=m}let i=t[2],s=t[3];for(let o=0;o<24;o++){const a=dre[o],l=uH(i,s,a),c=dH(i,s,a),u=ure[o];i=t[u],s=t[u+1],t[u]=l,t[u+1]=c}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=PCe[r],t[1]^=RCe[r]}n.fill(0)}class p8 extends u8{constructor(e,n,r,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,zo(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=nT(this.state)}keccak(){OCe(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){rx(this);const{blockLen:n,state:r}=this;e=ix(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);for(let a=0;a<o;a++)r[this.pos++]^=e[s++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:i}=this;e[r]^=n,(n&128)!==0&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){rx(this,!1),c8(e),this.finish();const n=this.state,{blockLen:r}=this;for(let i=0,s=e.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);e.set(n.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return zo(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Jne(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new p8(n,r,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}}const MCe=(t,e,n)=>o2(()=>new p8(e,t,n)),DCe=MCe(1,136,256/8);let hre=!1;const pre=function(t){return DCe(t)};let mre=pre;function Kn(t){const e=pt(t,"data");return rt(mre(e))}Kn._=pre;Kn.lock=function(){hre=!0};Kn.register=function(t){if(hre)throw new TypeError("keccak256 is locked");mre=t};Object.freeze(Kn);const LCe=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),gre=Uint8Array.from({length:16},(t,e)=>e),jCe=gre.map(t=>(9*t+5)%16);let m8=[gre],g8=[jCe];for(let t=0;t<4;t++)for(let e of[m8,g8])e.push(e[t].map(n=>LCe[n]));const yre=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(t=>new Uint8Array(t)),BCe=m8.map((t,e)=>t.map(n=>yre[e][n])),UCe=g8.map((t,e)=>t.map(n=>yre[e][n])),FCe=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),$Ce=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),VS=(t,e)=>t<<e|t>>>32-e;function fH(t,e,n,r){return t===0?e^n^r:t===1?e&n|~e&r:t===2?(e|~n)^r:t===3?e&r|n&~r:e^(n|~r)}const qS=new Uint32Array(16);class zCe extends f8{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:n,h2:r,h3:i,h4:s}=this;return[e,n,r,i,s]}set(e,n,r,i,s){this.h0=e|0,this.h1=n|0,this.h2=r|0,this.h3=i|0,this.h4=s|0}process(e,n){for(let g=0;g<16;g++,n+=4)qS[g]=e.getUint32(n,!0);let r=this.h0|0,i=r,s=this.h1|0,o=s,a=this.h2|0,l=a,c=this.h3|0,u=c,f=this.h4|0,m=f;for(let g=0;g<5;g++){const v=4-g,x=FCe[g],b=$Ce[g],E=m8[g],C=g8[g],k=BCe[g],O=UCe[g];for(let U=0;U<16;U++){const R=VS(r+fH(g,s,a,c)+qS[E[U]]+x,k[U])+f|0;r=f,f=c,c=VS(a,10)|0,a=s,s=R}for(let U=0;U<16;U++){const R=VS(i+fH(v,o,l,u)+qS[C[U]]+b,O[U])+m|0;i=m,m=u,u=VS(l,10)|0,l=o,o=R}}this.set(this.h1+a+u|0,this.h2+c+m|0,this.h3+f+i|0,this.h4+r+o|0,this.h0+s+l|0)}roundClean(){qS.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const HCe=o2(()=>new zCe);let xre=!1;const vre=function(t){return HCe(t)};let bre=vre;function Dx(t){const e=pt(t,"data");return rt(bre(e))}Dx._=vre;Dx.lock=function(){xre=!0};Dx.register=function(t){if(xre)throw new TypeError("ripemd160 is locked");bre=t};Object.freeze(Dx);let wre=!1;const Ere=function(t,e,n,r,i){return ACe(t,e,n,r,i)};let Sre=Ere;function mh(t,e,n,r,i){const s=pt(t,"password"),o=pt(e,"salt");return rt(Sre(s,o,n,r,i))}mh._=Ere;mh.lock=function(){wre=!0};mh.register=function(t){if(wre)throw new Error("pbkdf2 is locked");Sre=t};Object.freeze(mh);let Are=!1;const Tre=function(t){return new Uint8Array(TCe(t))};let kre=Tre;function Ju(t){return kre(t)}Ju._=Tre;Ju.lock=function(){Are=!0};Ju.register=function(t){if(Are)throw new Error("randomBytes is locked");kre=t};Object.freeze(Ju);const jn=(t,e)=>t<<e|t>>>32-e;function hH(t,e,n,r,i,s){let o=t[e++]^n[r++],a=t[e++]^n[r++],l=t[e++]^n[r++],c=t[e++]^n[r++],u=t[e++]^n[r++],f=t[e++]^n[r++],m=t[e++]^n[r++],g=t[e++]^n[r++],v=t[e++]^n[r++],x=t[e++]^n[r++],b=t[e++]^n[r++],E=t[e++]^n[r++],C=t[e++]^n[r++],k=t[e++]^n[r++],O=t[e++]^n[r++],U=t[e++]^n[r++],R=o,$=a,V=l,j=c,F=u,W=f,H=m,B=g,A=v,I=x,D=b,z=E,G=C,te=k,K=O,q=U;for(let M=0;M<8;M+=2)F^=jn(R+G|0,7),A^=jn(F+R|0,9),G^=jn(A+F|0,13),R^=jn(G+A|0,18),I^=jn(W+$|0,7),te^=jn(I+W|0,9),$^=jn(te+I|0,13),W^=jn($+te|0,18),K^=jn(D+H|0,7),V^=jn(K+D|0,9),H^=jn(V+K|0,13),D^=jn(H+V|0,18),j^=jn(q+z|0,7),B^=jn(j+q|0,9),z^=jn(B+j|0,13),q^=jn(z+B|0,18),$^=jn(R+j|0,7),V^=jn($+R|0,9),j^=jn(V+$|0,13),R^=jn(j+V|0,18),H^=jn(W+F|0,7),B^=jn(H+W|0,9),F^=jn(B+H|0,13),W^=jn(F+B|0,18),z^=jn(D+I|0,7),A^=jn(z+D|0,9),I^=jn(A+z|0,13),D^=jn(I+A|0,18),G^=jn(q+K|0,7),te^=jn(G+q|0,9),K^=jn(te+G|0,13),q^=jn(K+te|0,18);i[s++]=o+R|0,i[s++]=a+$|0,i[s++]=l+V|0,i[s++]=c+j|0,i[s++]=u+F|0,i[s++]=f+W|0,i[s++]=m+H|0,i[s++]=g+B|0,i[s++]=v+A|0,i[s++]=x+I|0,i[s++]=b+D|0,i[s++]=E+z|0,i[s++]=C+G|0,i[s++]=k+te|0,i[s++]=O+K|0,i[s++]=U+q|0}function qg(t,e,n,r,i){let s=r+0,o=r+16*i;for(let a=0;a<16;a++)n[o+a]=t[e+(2*i-1)*16+a];for(let a=0;a<i;a++,s+=16,e+=16)hH(n,o,t,e,n,s),a>0&&(o+=16),hH(n,s,t,e+=16,n,o)}function Cre(t,e,n){const r=Qne({dkLen:32,asyncTick:10,maxmem:1073742848},n),{N:i,r:s,p:o,dkLen:a,asyncTick:l,maxmem:c,onProgress:u}=r;if(zo(i),zo(s),zo(o),zo(a),zo(l),zo(c),u!==void 0&&typeof u!="function")throw new Error("progressCb should be function");const f=128*s,m=f/4;if(i<=1||(i&i-1)!==0||i>=2**(f/8)||i>2**32)throw new Error("Scrypt: N must be larger than 1, a power of 2, less than 2^(128 * r / 8) and less than 2^32");if(o<0||o>(2**32-1)*32/f)throw new Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(a<0||a>(2**32-1)*32)throw new Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");const g=f*(i+o);if(g>c)throw new Error(`Scrypt: parameters too large, ${g} (128 * r * (N + p)) > ${c} (maxmem)`);const v=d8(Ox,t,e,{c:1,dkLen:f*o}),x=nT(v),b=nT(new Uint8Array(f*i)),E=nT(new Uint8Array(f));let C=()=>{};if(u){const k=2*i*o,O=Math.max(Math.floor(k/1e4),1);let U=0;C=()=>{U++,u&&(!(U%O)||U===k)&&u(U/k)}}return{N:i,r:s,p:o,dkLen:a,blockSize32:m,V:b,B32:x,B:v,tmp:E,blockMixCb:C,asyncTick:l}}function Nre(t,e,n,r,i){const s=d8(Ox,t,n,{c:1,dkLen:e});return n.fill(0),r.fill(0),i.fill(0),s}function VCe(t,e,n){const{N:r,r:i,p:s,dkLen:o,blockSize32:a,V:l,B32:c,B:u,tmp:f,blockMixCb:m}=Cre(t,e,n);for(let g=0;g<s;g++){const v=a*g;for(let x=0;x<a;x++)l[x]=c[v+x];for(let x=0,b=0;x<r-1;x++)qg(l,b,l,b+=a,i),m();qg(l,(r-1)*a,c,v,i),m();for(let x=0;x<r;x++){const b=c[v+a-16]%r;for(let E=0;E<a;E++)f[E]=c[v+E]^l[b*a+E];qg(f,0,c,v,i),m()}}return Nre(t,o,u,l,f)}async function qCe(t,e,n){const{N:r,r:i,p:s,dkLen:o,blockSize32:a,V:l,B32:c,B:u,tmp:f,blockMixCb:m,asyncTick:g}=Cre(t,e,n);for(let v=0;v<s;v++){const x=a*v;for(let E=0;E<a;E++)l[E]=c[x+E];let b=0;await aH(r-1,g,()=>{qg(l,b,l,b+=a,i),m()}),qg(l,(r-1)*a,c,x,i),m(),await aH(r,g,()=>{const E=c[x+a-16]%r;for(let C=0;C<a;C++)f[C]=c[x+C]^l[E*a+C];qg(f,0,c,x,i),m()})}return Nre(t,o,u,l,f)}let _re=!1,Ire=!1;const Pre=async function(t,e,n,r,i,s,o){return await qCe(t,e,{N:n,r,p:i,dkLen:s,onProgress:o})},Rre=function(t,e,n,r,i,s){return VCe(t,e,{N:n,r,p:i,dkLen:s})};let Ore=Pre,Mre=Rre;async function Lx(t,e,n,r,i,s,o){const a=pt(t,"passwd"),l=pt(e,"salt");return rt(await Ore(a,l,n,r,i,s,o))}Lx._=Pre;Lx.lock=function(){Ire=!0};Lx.register=function(t){if(Ire)throw new Error("scrypt is locked");Ore=t};Object.freeze(Lx);function jx(t,e,n,r,i,s){const o=pt(t,"passwd"),a=pt(e,"salt");return rt(Mre(o,a,n,r,i,s))}jx._=Rre;jx.lock=function(){_re=!0};jx.register=function(t){if(_re)throw new Error("scryptSync is locked");Mre=t};Object.freeze(jx);const Dre=function(t){return ore("sha256").update(t).digest()},Lre=function(t){return ore("sha512").update(t).digest()};let jre=Dre,Bre=Lre,Ure=!1,Fre=!1;function za(t){const e=pt(t,"data");return rt(jre(e))}za._=Dre;za.lock=function(){Ure=!0};za.register=function(t){if(Ure)throw new Error("sha256 is locked");jre=t};Object.freeze(za);function y8(t){const e=pt(t,"data");return rt(Bre(e))}y8._=Lre;y8.lock=function(){Fre=!0};y8.register=function(t){if(Fre)throw new Error("sha512 is locked");Bre=t};Object.freeze(za);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const $re=BigInt(0),l2=BigInt(1),GCe=BigInt(2),c2=t=>t instanceof Uint8Array,KCe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function sx(t){if(!c2(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=KCe[t[n]];return e}function zre(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function x8(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}function ox(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let r=0;r<n.length;r++){const i=r*2,s=t.slice(i,i+2),o=Number.parseInt(s,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[r]=o}return n}function Zp(t){return x8(sx(t))}function v8(t){if(!c2(t))throw new Error("Uint8Array expected");return x8(sx(Uint8Array.from(t).reverse()))}function ax(t,e){return ox(t.toString(16).padStart(e*2,"0"))}function b8(t,e){return ax(t,e).reverse()}function WCe(t){return ox(zre(t))}function al(t,e,n){let r;if(typeof e=="string")try{r=ox(e)}catch(s){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${s}`)}else if(c2(e))r=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(`${t} expected ${n} bytes, got ${i}`);return r}function bw(...t){const e=new Uint8Array(t.reduce((r,i)=>r+i.length,0));let n=0;return t.forEach(r=>{if(!c2(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}function YCe(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function JCe(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function XCe(t){let e;for(e=0;t>$re;t>>=l2,e+=1);return e}function QCe(t,e){return t>>BigInt(e)&l2}const ZCe=(t,e,n)=>t|(n?l2:$re)<<BigInt(e),w8=t=>(GCe<<BigInt(t-1))-l2,JP=t=>new Uint8Array(t),pH=t=>Uint8Array.from(t);function Hre(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=JP(t),i=JP(t),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...f)=>n(i,r,...f),l=(f=JP())=>{i=a(pH([0]),f),r=a(),f.length!==0&&(i=a(pH([1]),f),r=a())},c=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const m=[];for(;f<e;){r=a();const g=r.slice();m.push(g),f+=r.length}return bw(...m)};return(f,m)=>{o(),l(f);let g;for(;!(g=m(c()));)l();return o(),g}}const e2e={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function O1(t,e,n={}){const r=(i,s,o)=>{const a=e2e[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);const l=t[i];if(!(o&&l===void 0)&&!a(l,t))throw new Error(`Invalid param ${String(i)}=${l} (${typeof l}), expected ${s}`)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return t}const t2e=Object.freeze(Object.defineProperty({__proto__:null,bitGet:QCe,bitLen:XCe,bitMask:w8,bitSet:ZCe,bytesToHex:sx,bytesToNumberBE:Zp,bytesToNumberLE:v8,concatBytes:bw,createHmacDrbg:Hre,ensureBytes:al,equalBytes:YCe,hexToBytes:ox,hexToNumber:x8,numberToBytesBE:ax,numberToBytesLE:b8,numberToHexUnpadded:zre,numberToVarBytesBE:WCe,utf8ToBytes:JCe,validateObject:O1},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ji=BigInt(0),ni=BigInt(1),cp=BigInt(2),n2e=BigInt(3),D4=BigInt(4),mH=BigInt(5),gH=BigInt(8);BigInt(9);BigInt(16);function co(t,e){const n=t%e;return n>=ji?n:e+n}function r2e(t,e,n){if(n<=ji||e<ji)throw new Error("Expected power/modulo > 0");if(n===ni)return ji;let r=ni;for(;e>ji;)e&ni&&(r=r*t%n),t=t*t%n,e>>=ni;return r}function fa(t,e,n){let r=t;for(;e-- >ji;)r*=r,r%=n;return r}function L4(t,e){if(t===ji||e<=ji)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=co(t,e),r=e,i=ji,s=ni;for(;n!==ji;){const a=r/n,l=r%n,c=i-s*a;r=n,n=l,i=s,s=c}if(r!==ni)throw new Error("invert: does not exist");return co(i,e)}function i2e(t){const e=(t-ni)/cp;let n,r,i;for(n=t-ni,r=0;n%cp===ji;n/=cp,r++);for(i=cp;i<t&&r2e(i,e,t)!==t-ni;i++);if(r===1){const o=(t+ni)/D4;return function(l,c){const u=l.pow(c,o);if(!l.eql(l.sqr(u),c))throw new Error("Cannot find square root");return u}}const s=(n+ni)/cp;return function(a,l){if(a.pow(l,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let c=r,u=a.pow(a.mul(a.ONE,i),n),f=a.pow(l,s),m=a.pow(l,n);for(;!a.eql(m,a.ONE);){if(a.eql(m,a.ZERO))return a.ZERO;let g=1;for(let x=a.sqr(m);g<c&&!a.eql(x,a.ONE);g++)x=a.sqr(x);const v=a.pow(u,ni<<BigInt(c-g-1));u=a.sqr(v),f=a.mul(f,v),m=a.mul(m,u),c=g}return f}}function s2e(t){if(t%D4===n2e){const e=(t+ni)/D4;return function(r,i){const s=r.pow(i,e);if(!r.eql(r.sqr(s),i))throw new Error("Cannot find square root");return s}}if(t%gH===mH){const e=(t-mH)/gH;return function(r,i){const s=r.mul(i,cp),o=r.pow(s,e),a=r.mul(i,o),l=r.mul(r.mul(a,cp),o),c=r.mul(a,r.sub(l,r.ONE));if(!r.eql(r.sqr(c),i))throw new Error("Cannot find square root");return c}}return i2e(t)}const o2e=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function a2e(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=o2e.reduce((r,i)=>(r[i]="function",r),e);return O1(t,n)}function l2e(t,e,n){if(n<ji)throw new Error("Expected power > 0");if(n===ji)return t.ONE;if(n===ni)return e;let r=t.ONE,i=e;for(;n>ji;)n&ni&&(r=t.mul(r,i)),i=t.sqr(i),n>>=ni;return r}function c2e(t,e){const n=new Array(e.length),r=e.reduce((s,o,a)=>t.is0(o)?s:(n[a]=s,t.mul(s,o)),t.ONE),i=t.inv(r);return e.reduceRight((s,o,a)=>t.is0(o)?s:(n[a]=t.mul(s,n[a]),t.mul(s,o)),i),n}function Vre(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function u2e(t,e,n=!1,r={}){if(t<=ji)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:i,nByteLength:s}=Vre(t,e);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=s2e(t),a=Object.freeze({ORDER:t,BITS:i,BYTES:s,MASK:w8(i),ZERO:ji,ONE:ni,create:l=>co(l,t),isValid:l=>{if(typeof l!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof l}`);return ji<=l&&l<t},is0:l=>l===ji,isOdd:l=>(l&ni)===ni,neg:l=>co(-l,t),eql:(l,c)=>l===c,sqr:l=>co(l*l,t),add:(l,c)=>co(l+c,t),sub:(l,c)=>co(l-c,t),mul:(l,c)=>co(l*c,t),pow:(l,c)=>l2e(a,l,c),div:(l,c)=>co(l*L4(c,t),t),sqrN:l=>l*l,addN:(l,c)=>l+c,subN:(l,c)=>l-c,mulN:(l,c)=>l*c,inv:l=>L4(l,t),sqrt:r.sqrt||(l=>o(a,l)),invertBatch:l=>c2e(a,l),cmov:(l,c,u)=>u?c:l,toBytes:l=>n?b8(l,s):ax(l,s),fromBytes:l=>{if(l.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${l.length}`);return n?v8(l):Zp(l)}});return Object.freeze(a)}function qre(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function Gre(t){const e=qre(t);return e+Math.ceil(e/2)}function d2e(t,e,n=!1){const r=t.length,i=qre(e),s=Gre(e);if(r<16||r<s||r>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${r}`);const o=n?Zp(t):v8(t),a=co(o,e-ni)+ni;return n?b8(a,i):ax(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const f2e=BigInt(0),XP=BigInt(1);function h2e(t,e){const n=(i,s)=>{const o=s.negate();return i?o:s},r=i=>{const s=Math.ceil(e/i)+1,o=2**(i-1);return{windows:s,windowSize:o}};return{constTimeNegate:n,unsafeLadder(i,s){let o=t.ZERO,a=i;for(;s>f2e;)s&XP&&(o=o.add(a)),a=a.double(),s>>=XP;return o},precomputeWindow(i,s){const{windows:o,windowSize:a}=r(s),l=[];let c=i,u=c;for(let f=0;f<o;f++){u=c,l.push(u);for(let m=1;m<a;m++)u=u.add(c),l.push(u);c=u.double()}return l},wNAF(i,s,o){const{windows:a,windowSize:l}=r(i);let c=t.ZERO,u=t.BASE;const f=BigInt(2**i-1),m=2**i,g=BigInt(i);for(let v=0;v<a;v++){const x=v*l;let b=Number(o&f);o>>=g,b>l&&(b-=m,o+=XP);const E=x,C=x+Math.abs(b)-1,k=v%2!==0,O=b<0;b===0?u=u.add(n(k,s[E])):c=c.add(n(O,s[C]))}return{p:c,f:u}},wNAFCached(i,s,o,a){const l=i._WINDOW_SIZE||1;let c=s.get(i);return c||(c=this.precomputeWindow(i,l),l!==1&&s.set(i,a(c))),this.wNAF(l,c,o)}}}function Kre(t){return a2e(t.Fp),O1(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Vre(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function p2e(t){const e=Kre(t);O1(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=e;if(n){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:m2e,hexToBytes:g2e}=t2e,xp={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=xp;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const n=t[1],r=t.subarray(2,n+2);if(!n||r.length!==n)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:m2e(r),l:t.subarray(n+2)}},toSig(t){const{Err:e}=xp,n=typeof t=="string"?g2e(t):t;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new e("Invalid signature tag");if(n[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:i,l:s}=xp._parseInt(n.subarray(2)),{d:o,l:a}=xp._parseInt(s);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(t){const e=c=>Number.parseInt(c[0],16)&8?"00"+c:c,n=c=>{const u=c.toString(16);return u.length&1?`0${u}`:u},r=e(n(t.s)),i=e(n(t.r)),s=r.length/2,o=i.length/2,a=n(s),l=n(o);return`30${n(o+s+4)}02${l}${i}02${a}${r}`}},Bu=BigInt(0),Ia=BigInt(1);BigInt(2);const yH=BigInt(3);BigInt(4);function y2e(t){const e=p2e(t),{Fp:n}=e,r=e.toBytes||((v,x,b)=>{const E=x.toAffine();return bw(Uint8Array.from([4]),n.toBytes(E.x),n.toBytes(E.y))}),i=e.fromBytes||(v=>{const x=v.subarray(1),b=n.fromBytes(x.subarray(0,n.BYTES)),E=n.fromBytes(x.subarray(n.BYTES,2*n.BYTES));return{x:b,y:E}});function s(v){const{a:x,b}=e,E=n.sqr(v),C=n.mul(E,v);return n.add(n.add(C,n.mul(v,x)),b)}if(!n.eql(n.sqr(e.Gy),s(e.Gx)))throw new Error("bad generator point: equation left != right");function o(v){return typeof v=="bigint"&&Bu<v&&v<e.n}function a(v){if(!o(v))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(v){const{allowedPrivateKeyLengths:x,nByteLength:b,wrapPrivateKey:E,n:C}=e;if(x&&typeof v!="bigint"){if(v instanceof Uint8Array&&(v=sx(v)),typeof v!="string"||!x.includes(v.length))throw new Error("Invalid key");v=v.padStart(b*2,"0")}let k;try{k=typeof v=="bigint"?v:Zp(al("private key",v,b))}catch{throw new Error(`private key must be ${b} bytes, hex or bigint, not ${typeof v}`)}return E&&(k=co(k,C)),a(k),k}const c=new Map;function u(v){if(!(v instanceof f))throw new Error("ProjectivePoint expected")}class f{constructor(x,b,E){if(this.px=x,this.py=b,this.pz=E,x==null||!n.isValid(x))throw new Error("x required");if(b==null||!n.isValid(b))throw new Error("y required");if(E==null||!n.isValid(E))throw new Error("z required")}static fromAffine(x){const{x:b,y:E}=x||{};if(!x||!n.isValid(b)||!n.isValid(E))throw new Error("invalid affine point");if(x instanceof f)throw new Error("projective point not allowed");const C=k=>n.eql(k,n.ZERO);return C(b)&&C(E)?f.ZERO:new f(b,E,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(x){const b=n.invertBatch(x.map(E=>E.pz));return x.map((E,C)=>E.toAffine(b[C])).map(f.fromAffine)}static fromHex(x){const b=f.fromAffine(i(al("pointHex",x)));return b.assertValidity(),b}static fromPrivateKey(x){return f.BASE.multiply(l(x))}_setWindowSize(x){this._WINDOW_SIZE=x,c.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x,y:b}=this.toAffine();if(!n.isValid(x)||!n.isValid(b))throw new Error("bad point: x or y not FE");const E=n.sqr(b),C=s(x);if(!n.eql(E,C))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:x}=this.toAffine();if(n.isOdd)return!n.isOdd(x);throw new Error("Field doesn't support isOdd")}equals(x){u(x);const{px:b,py:E,pz:C}=this,{px:k,py:O,pz:U}=x,R=n.eql(n.mul(b,U),n.mul(k,C)),$=n.eql(n.mul(E,U),n.mul(O,C));return R&&$}negate(){return new f(this.px,n.neg(this.py),this.pz)}double(){const{a:x,b}=e,E=n.mul(b,yH),{px:C,py:k,pz:O}=this;let U=n.ZERO,R=n.ZERO,$=n.ZERO,V=n.mul(C,C),j=n.mul(k,k),F=n.mul(O,O),W=n.mul(C,k);return W=n.add(W,W),$=n.mul(C,O),$=n.add($,$),U=n.mul(x,$),R=n.mul(E,F),R=n.add(U,R),U=n.sub(j,R),R=n.add(j,R),R=n.mul(U,R),U=n.mul(W,U),$=n.mul(E,$),F=n.mul(x,F),W=n.sub(V,F),W=n.mul(x,W),W=n.add(W,$),$=n.add(V,V),V=n.add($,V),V=n.add(V,F),V=n.mul(V,W),R=n.add(R,V),F=n.mul(k,O),F=n.add(F,F),V=n.mul(F,W),U=n.sub(U,V),$=n.mul(F,j),$=n.add($,$),$=n.add($,$),new f(U,R,$)}add(x){u(x);const{px:b,py:E,pz:C}=this,{px:k,py:O,pz:U}=x;let R=n.ZERO,$=n.ZERO,V=n.ZERO;const j=e.a,F=n.mul(e.b,yH);let W=n.mul(b,k),H=n.mul(E,O),B=n.mul(C,U),A=n.add(b,E),I=n.add(k,O);A=n.mul(A,I),I=n.add(W,H),A=n.sub(A,I),I=n.add(b,C);let D=n.add(k,U);return I=n.mul(I,D),D=n.add(W,B),I=n.sub(I,D),D=n.add(E,C),R=n.add(O,U),D=n.mul(D,R),R=n.add(H,B),D=n.sub(D,R),V=n.mul(j,I),R=n.mul(F,B),V=n.add(R,V),R=n.sub(H,V),V=n.add(H,V),$=n.mul(R,V),H=n.add(W,W),H=n.add(H,W),B=n.mul(j,B),I=n.mul(F,I),H=n.add(H,B),B=n.sub(W,B),B=n.mul(j,B),I=n.add(I,B),W=n.mul(H,I),$=n.add($,W),W=n.mul(D,I),R=n.mul(A,R),R=n.sub(R,W),W=n.mul(A,H),V=n.mul(D,V),V=n.add(V,W),new f(R,$,V)}subtract(x){return this.add(x.negate())}is0(){return this.equals(f.ZERO)}wNAF(x){return g.wNAFCached(this,c,x,b=>{const E=n.invertBatch(b.map(C=>C.pz));return b.map((C,k)=>C.toAffine(E[k])).map(f.fromAffine)})}multiplyUnsafe(x){const b=f.ZERO;if(x===Bu)return b;if(a(x),x===Ia)return this;const{endo:E}=e;if(!E)return g.unsafeLadder(this,x);let{k1neg:C,k1:k,k2neg:O,k2:U}=E.splitScalar(x),R=b,$=b,V=this;for(;k>Bu||U>Bu;)k&Ia&&(R=R.add(V)),U&Ia&&($=$.add(V)),V=V.double(),k>>=Ia,U>>=Ia;return C&&(R=R.negate()),O&&($=$.negate()),$=new f(n.mul($.px,E.beta),$.py,$.pz),R.add($)}multiply(x){a(x);let b=x,E,C;const{endo:k}=e;if(k){const{k1neg:O,k1:U,k2neg:R,k2:$}=k.splitScalar(b);let{p:V,f:j}=this.wNAF(U),{p:F,f:W}=this.wNAF($);V=g.constTimeNegate(O,V),F=g.constTimeNegate(R,F),F=new f(n.mul(F.px,k.beta),F.py,F.pz),E=V.add(F),C=j.add(W)}else{const{p:O,f:U}=this.wNAF(b);E=O,C=U}return f.normalizeZ([E,C])[0]}multiplyAndAddUnsafe(x,b,E){const C=f.BASE,k=(U,R)=>R===Bu||R===Ia||!U.equals(C)?U.multiplyUnsafe(R):U.multiply(R),O=k(this,b).add(k(x,E));return O.is0()?void 0:O}toAffine(x){const{px:b,py:E,pz:C}=this,k=this.is0();x==null&&(x=k?n.ONE:n.inv(C));const O=n.mul(b,x),U=n.mul(E,x),R=n.mul(C,x);if(k)return{x:n.ZERO,y:n.ZERO};if(!n.eql(R,n.ONE))throw new Error("invZ was invalid");return{x:O,y:U}}isTorsionFree(){const{h:x,isTorsionFree:b}=e;if(x===Ia)return!0;if(b)return b(f,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:x,clearCofactor:b}=e;return x===Ia?this:b?b(f,this):this.multiplyUnsafe(e.h)}toRawBytes(x=!0){return this.assertValidity(),r(f,this,x)}toHex(x=!0){return sx(this.toRawBytes(x))}}f.BASE=new f(e.Gx,e.Gy,n.ONE),f.ZERO=new f(n.ZERO,n.ONE,n.ZERO);const m=e.nBitLength,g=h2e(f,e.endo?Math.ceil(m/2):m);return{CURVE:e,ProjectivePoint:f,normPrivateKeyToScalar:l,weierstrassEquation:s,isWithinCurveOrder:o}}function x2e(t){const e=Kre(t);return O1(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function v2e(t){const e=x2e(t),{Fp:n,n:r}=e,i=n.BYTES+1,s=2*n.BYTES+1;function o(I){return Bu<I&&I<n.ORDER}function a(I){return co(I,r)}function l(I){return L4(I,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:u,weierstrassEquation:f,isWithinCurveOrder:m}=y2e({...e,toBytes(I,D,z){const G=D.toAffine(),te=n.toBytes(G.x),K=bw;return z?K(Uint8Array.from([D.hasEvenY()?2:3]),te):K(Uint8Array.from([4]),te,n.toBytes(G.y))},fromBytes(I){const D=I.length,z=I[0],G=I.subarray(1);if(D===i&&(z===2||z===3)){const te=Zp(G);if(!o(te))throw new Error("Point is not on curve");const K=f(te);let q=n.sqrt(K);const M=(q&Ia)===Ia;return(z&1)===1!==M&&(q=n.neg(q)),{x:te,y:q}}else if(D===s&&z===4){const te=n.fromBytes(G.subarray(0,n.BYTES)),K=n.fromBytes(G.subarray(n.BYTES,2*n.BYTES));return{x:te,y:K}}else throw new Error(`Point of length ${D} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),g=I=>sx(ax(I,e.nByteLength));function v(I){const D=r>>Ia;return I>D}function x(I){return v(I)?a(-I):I}const b=(I,D,z)=>Zp(I.slice(D,z));class E{constructor(D,z,G){this.r=D,this.s=z,this.recovery=G,this.assertValidity()}static fromCompact(D){const z=e.nByteLength;return D=al("compactSignature",D,z*2),new E(b(D,0,z),b(D,z,2*z))}static fromDER(D){const{r:z,s:G}=xp.toSig(al("DER",D));return new E(z,G)}assertValidity(){if(!m(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!m(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(D){return new E(this.r,this.s,D)}recoverPublicKey(D){const{r:z,s:G,recovery:te}=this,K=$(al("msgHash",D));if(te==null||![0,1,2,3].includes(te))throw new Error("recovery id invalid");const q=te===2||te===3?z+e.n:z;if(q>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const M=(te&1)===0?"02":"03",_=c.fromHex(M+g(q)),Y=l(q),X=a(-K*Y),re=a(G*Y),oe=c.BASE.multiplyAndAddUnsafe(_,X,re);if(!oe)throw new Error("point at infinify");return oe.assertValidity(),oe}hasHighS(){return v(this.s)}normalizeS(){return this.hasHighS()?new E(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return ox(this.toDERHex())}toDERHex(){return xp.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return ox(this.toCompactHex())}toCompactHex(){return g(this.r)+g(this.s)}}const C={isValidPrivateKey(I){try{return u(I),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const I=Gre(e.n);return d2e(e.randomBytes(I),e.n)},precompute(I=8,D=c.BASE){return D._setWindowSize(I),D.multiply(BigInt(3)),D}};function k(I,D=!0){return c.fromPrivateKey(I).toRawBytes(D)}function O(I){const D=I instanceof Uint8Array,z=typeof I=="string",G=(D||z)&&I.length;return D?G===i||G===s:z?G===2*i||G===2*s:I instanceof c}function U(I,D,z=!0){if(O(I))throw new Error("first arg must be private key");if(!O(D))throw new Error("second arg must be public key");return c.fromHex(D).multiply(u(I)).toRawBytes(z)}const R=e.bits2int||function(I){const D=Zp(I),z=I.length*8-e.nBitLength;return z>0?D>>BigInt(z):D},$=e.bits2int_modN||function(I){return a(R(I))},V=w8(e.nBitLength);function j(I){if(typeof I!="bigint")throw new Error("bigint expected");if(!(Bu<=I&&I<V))throw new Error(`bigint expected < 2^${e.nBitLength}`);return ax(I,e.nByteLength)}function F(I,D,z=W){if(["recovered","canonical"].some(ce=>ce in z))throw new Error("sign() legacy options not supported");const{hash:G,randomBytes:te}=e;let{lowS:K,prehash:q,extraEntropy:M}=z;K==null&&(K=!0),I=al("msgHash",I),q&&(I=al("prehashed msgHash",G(I)));const _=$(I),Y=u(D),X=[j(Y),j(_)];if(M!=null){const ce=M===!0?te(n.BYTES):M;X.push(al("extraEntropy",ce))}const re=bw(...X),oe=_;function Ee(ce){const me=R(ce);if(!m(me))return;const ue=l(me),le=c.BASE.multiply(me).toAffine(),Ie=a(le.x);if(Ie===Bu)return;const Ne=a(ue*a(oe+Ie*Y));if(Ne===Bu)return;let $e=(le.x===Ie?0:2)|Number(le.y&Ia),Ze=Ne;return K&&v(Ne)&&(Ze=x(Ne),$e^=1),new E(Ie,Ze,$e)}return{seed:re,k2sig:Ee}}const W={lowS:e.lowS,prehash:!1},H={lowS:e.lowS,prehash:!1};function B(I,D,z=W){const{seed:G,k2sig:te}=F(I,D,z),K=e;return Hre(K.hash.outputLen,K.nByteLength,K.hmac)(G,te)}c.BASE._setWindowSize(8);function A(I,D,z,G=H){var le;const te=I;if(D=al("msgHash",D),z=al("publicKey",z),"strict"in G)throw new Error("options.strict was renamed to lowS");const{lowS:K,prehash:q}=G;let M,_;try{if(typeof te=="string"||te instanceof Uint8Array)try{M=E.fromDER(te)}catch(Ie){if(!(Ie instanceof xp.Err))throw Ie;M=E.fromCompact(te)}else if(typeof te=="object"&&typeof te.r=="bigint"&&typeof te.s=="bigint"){const{r:Ie,s:Ne}=te;M=new E(Ie,Ne)}else throw new Error("PARSE");_=c.fromHex(z)}catch(Ie){if(Ie.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(K&&M.hasHighS())return!1;q&&(D=e.hash(D));const{r:Y,s:X}=M,re=$(D),oe=l(X),Ee=a(re*oe),ce=a(Y*oe),me=(le=c.BASE.multiplyAndAddUnsafe(_,Ee,ce))==null?void 0:le.toAffine();return me?a(me.x)===Y:!1}return{CURVE:e,getPublicKey:k,getSharedSecret:U,sign:B,verify:A,ProjectivePoint:c,Signature:E,utils:C}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function b2e(t){return{hash:t,hmac:(e,...n)=>a2(t,e,Kke(...n)),randomBytes:Yke}}function w2e(t,e){const n=r=>v2e({...t,...b2e(r)});return Object.freeze({...n(e),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Wre=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),xH=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),E2e=BigInt(1),j4=BigInt(2),vH=(t,e)=>(t+e/j4)/e;function S2e(t){const e=Wre,n=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),c=t*t*t%e,u=c*c*t%e,f=fa(u,n,e)*u%e,m=fa(f,n,e)*u%e,g=fa(m,j4,e)*c%e,v=fa(g,i,e)*g%e,x=fa(v,s,e)*v%e,b=fa(x,a,e)*x%e,E=fa(b,l,e)*b%e,C=fa(E,a,e)*x%e,k=fa(C,n,e)*u%e,O=fa(k,o,e)*v%e,U=fa(O,r,e)*c%e,R=fa(U,j4,e);if(!B4.eql(B4.sqr(R),t))throw new Error("Cannot find square root");return R}const B4=u2e(Wre,void 0,void 0,{sqrt:S2e}),wf=w2e({a:BigInt(0),b:BigInt(7),Fp:B4,n:xH,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=xH,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-E2e*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,o=BigInt("0x100000000000000000000000000000000"),a=vH(s*t,e),l=vH(-r*t,e);let c=co(t-a*n-l*i,e),u=co(-a*r-l*s,e);const f=c>o,m=u>o;if(f&&(c=e-c),m&&(u=e-u),c>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:f,k1:c,k2neg:m,k2:u}}}},Ox);BigInt(0);wf.ProjectivePoint;const ww="0x0000000000000000000000000000000000000000",bH="0x0000000000000000000000000000000000000000000000000000000000000000",kmt="",A2e=`Ethereum Signed Message:
`,wH=BigInt(0),EH=BigInt(1),U4=BigInt(2),SH=BigInt(27),AH=BigInt(28),GS=BigInt(35),Yre=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),T2e=Yre/U4,k2e=Symbol.for("nodejs.util.inspect.custom"),Gh={};function QP(t){return od(Lr(t),32)}var yy,rc,xy,Mf;const Ea=class Ea{constructor(e,n,r,i){Be(this,yy);Be(this,rc);Be(this,xy);Be(this,Mf);ph(e,Gh,"Signature"),ge(this,yy,n),ge(this,rc,r),ge(this,xy,i),ge(this,Mf,null)}get r(){return ie(this,yy)}set r(e){xe(Hg(e)===32,"invalid r","value",e),ge(this,yy,rt(e))}get s(){return xe(parseInt(ie(this,rc).substring(0,3))<8,"non-canonical s; use ._s","s",ie(this,rc)),ie(this,rc)}set s(e){xe(Hg(e)===32,"invalid s","value",e),ge(this,rc,rt(e))}get _s(){return ie(this,rc)}isValid(){return BigInt(ie(this,rc))<=T2e}get v(){return ie(this,xy)}set v(e){const n=Qt(e,"value");xe(n===27||n===28,"invalid v","v",e),ge(this,xy,n)}get networkV(){return ie(this,Mf)}get legacyChainId(){const e=this.networkV;return e==null?null:Ea.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=pt(this.s);return this.yParity&&(e[0]|=128),rt(e)}get compactSerialized(){return On([this.r,this.yParityAndS])}get serialized(){return On([this.r,this.s,this.yParity?"0x1c":"0x1b"])}getCanonical(){if(this.isValid())return this;const e=Yre-BigInt(this._s),n=55-this.v,r=new Ea(Gh,this.r,QP(e),n);return this.networkV&&ge(r,Mf,this.networkV),r}clone(){const e=new Ea(Gh,this.r,this._s,this.v);return this.networkV&&ge(e,Mf,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}[k2e](){return this.toString()}toString(){return this.isValid()?`Signature { r: ${this.r}, s: ${this._s}, v: ${this.v} }`:`Signature { r: ${this.r}, s: ${this._s}, v: ${this.v}, valid: false }`}static getChainId(e){const n=Et(e,"v");return n==SH||n==AH?wH:(xe(n>=GS,"invalid EIP-155 v","v",e),(n-GS)/U4)}static getChainIdV(e,n){return Et(e)*U4+BigInt(35+n-27)}static getNormalizedV(e){const n=Et(e);return n===wH||n===SH?27:n===EH||n===AH?28:(xe(n>=GS,"invalid v","v",e),n&EH?27:28)}static from(e){function n(c,u){xe(c,u,"signature",e)}if(e==null)return new Ea(Gh,bH,bH,27);if(typeof e=="string"){const c=pt(e,"signature");if(c.length===64){const u=rt(c.slice(0,32)),f=c.slice(32,64),m=f[0]&128?28:27;return f[0]&=127,new Ea(Gh,u,rt(f),m)}if(c.length===65){const u=rt(c.slice(0,32)),f=rt(c.slice(32,64)),m=Ea.getNormalizedV(c[64]);return new Ea(Gh,u,f,m)}n(!1,"invalid raw signature length")}if(e instanceof Ea)return e.clone();const r=e.r;n(r!=null,"missing r");const i=QP(r),s=(function(c,u){if(c!=null)return QP(c);if(u!=null){n(gr(u,32),"invalid yParityAndS");const f=pt(u);return f[0]&=127,rt(f)}n(!1,"missing s")})(e.s,e.yParityAndS),{networkV:o,v:a}=(function(c,u,f){if(c!=null){const m=Et(c);return{networkV:m>=GS?m:void 0,v:Ea.getNormalizedV(m)}}if(u!=null)return n(gr(u,32),"invalid yParityAndS"),{v:pt(u)[0]&128?28:27};if(f!=null){switch(Qt(f,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}n(!1,"invalid yParity")}n(!1,"missing v")})(e.v,e.yParityAndS,e.yParity),l=new Ea(Gh,i,s,a);return o&&ge(l,Mf,o),n(e.yParity==null||Qt(e.yParity,"sig.yParity")===l.yParity,"yParity mismatch"),n(e.yParityAndS==null||e.yParityAndS===l.yParityAndS,"yParityAndS mismatch"),l}};yy=new WeakMap,rc=new WeakMap,xy=new WeakMap,Mf=new WeakMap;let Ws=Ea;var Iu;const up=class up{constructor(e){Be(this,Iu);xe(Hg(e)===32,"invalid private key","privateKey","[REDACTED]"),ge(this,Iu,rt(e))}get privateKey(){return ie(this,Iu)}get publicKey(){return up.computePublicKey(ie(this,Iu))}get compressedPublicKey(){return up.computePublicKey(ie(this,Iu),!0)}sign(e){xe(Hg(e)===32,"invalid digest length","digest",e);const n=wf.sign(as(e),as(ie(this,Iu)),{lowS:!0});return Ws.from({r:ad(n.r,32),s:ad(n.s,32),v:n.recovery?28:27})}computeSharedSecret(e){const n=up.computePublicKey(e);return rt(wf.getSharedSecret(as(ie(this,Iu)),pt(n),!1))}static computePublicKey(e,n){let r=pt(e,"key");if(r.length===32){const s=wf.getPublicKey(r,!!n);return rt(s)}if(r.length===64){const s=new Uint8Array(65);s[0]=4,s.set(r,1),r=s}const i=wf.ProjectivePoint.fromHex(r);return rt(i.toRawBytes(n))}static recoverPublicKey(e,n){xe(Hg(e)===32,"invalid digest length","digest",e);const r=Ws.from(n);let i=wf.Signature.fromCompact(as(On([r.r,r.s])));i=i.addRecoveryBit(r.yParity);const s=i.recoverPublicKey(as(e));return xe(s!=null,"invalid signature for digest","signature",n),"0x"+s.toHex(!1)}static addPoints(e,n,r){const i=wf.ProjectivePoint.fromHex(up.computePublicKey(e).substring(2)),s=wf.ProjectivePoint.fromHex(up.computePublicKey(n).substring(2));return"0x"+i.add(s).toHex(!!r)}};Iu=new WeakMap;let Tc=up;const C2e=BigInt(0),N2e=BigInt(36);function TH(t){t=t.toLowerCase();const e=t.substring(2).split(""),n=new Uint8Array(40);for(let i=0;i<40;i++)n[i]=e[i].charCodeAt(0);const r=pt(Kn(n));for(let i=0;i<40;i+=2)r[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(r[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const E8={};for(let t=0;t<10;t++)E8[String(t)]=String(t);for(let t=0;t<26;t++)E8[String.fromCharCode(65+t)]=String(10+t);const kH=15;function Jre(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(r=>E8[r]).join("");for(;e.length>=kH;){let r=e.substring(0,kH);e=parseInt(r,10)%97+e.substring(r.length)}let n=String(98-parseInt(e,10)%97);for(;n.length<2;)n="0"+n;return n}const _2e=(function(){const t={};for(let e=0;e<36;e++){const n="0123456789abcdefghijklmnopqrstuvwxyz"[e];t[n]=BigInt(e)}return t})();function I2e(t){t=t.toLowerCase();let e=C2e;for(let n=0;n<t.length;n++)e=e*N2e+_2e[t[n]];return e}function yn(t){if(xe(typeof t=="string","invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/)){t.startsWith("0x")||(t="0x"+t);const e=TH(t);return xe(!t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===t,"bad address checksum","address",t),e}if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){xe(t.substring(2,4)===Jre(t),"bad icap checksum","address",t);let e=I2e(t.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return TH("0x"+e)}xe(!1,"invalid address","address",t)}function Cmt(t){let e=BigInt(yn(t)).toString(36).toUpperCase();for(;e.length<30;)e="0"+e;return"XE"+Jre("XE00"+e)+e}function P2e(t){const e=yn(t.from);let r=Et(t.nonce,"tx.nonce").toString(16);return r==="0"?r="0x":r.length%2?r="0x0"+r:r="0x"+r,yn(mr(Kn(Ac([e,r])),12))}function Nmt(t,e,n){const r=yn(t),i=pt(e,"salt"),s=pt(n,"initCodeHash");return xe(i.length===32,"salt must be 32 bytes","salt",e),xe(s.length===32,"initCodeHash must be 32 bytes","initCodeHash",n),yn(mr(Kn(On(["0xff",r,i,s])),12))}function Xre(t){return t&&typeof t.getAddress=="function"}function _mt(t){try{return yn(t),!0}catch{}return!1}async function ZP(t,e){const n=await e;return(n==null||n==="0x0000000000000000000000000000000000000000")&&(Ke(typeof t!="string","unconfigured name","UNCONFIGURED_NAME",{value:t}),xe(!1,"invalid AddressLike value; did not resolve to a value address","target",t)),yn(n)}function Bi(t,e){if(typeof t=="string")return t.match(/^0x[0-9a-f]{40}$/i)?yn(t):(Ke(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),ZP(t,e.resolveName(t)));if(Xre(t))return ZP(t,t.getAddress());if(t&&typeof t.then=="function")return ZP(t,t);xe(!1,"unsupported addressable value","target",t)}const wu={};function kt(t,e){let n=!1;return e<0&&(n=!0,e*=-1),new Is(wu,`${n?"":"u"}int${e}`,t,{signed:n,width:e})}function Bn(t,e){return new Is(wu,`bytes${e||""}`,t,{size:e})}const CH=Symbol.for("_ethers_typed");var jp;const Eu=class Eu{constructor(e,n,r,i){Se(this,"type");Se(this,"value");Be(this,jp);Se(this,"_typedSymbol");i==null&&(i=null),ph(wu,e,"Typed"),Mt(this,{_typedSymbol:CH,type:n,value:r}),ge(this,jp,i),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return ie(this,jp)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return ie(this,jp)===!0?-1:ie(this,jp)===!1?this.value.length:null}static from(e,n){return new Eu(wu,e,n)}static uint8(e){return kt(e,8)}static uint16(e){return kt(e,16)}static uint24(e){return kt(e,24)}static uint32(e){return kt(e,32)}static uint40(e){return kt(e,40)}static uint48(e){return kt(e,48)}static uint56(e){return kt(e,56)}static uint64(e){return kt(e,64)}static uint72(e){return kt(e,72)}static uint80(e){return kt(e,80)}static uint88(e){return kt(e,88)}static uint96(e){return kt(e,96)}static uint104(e){return kt(e,104)}static uint112(e){return kt(e,112)}static uint120(e){return kt(e,120)}static uint128(e){return kt(e,128)}static uint136(e){return kt(e,136)}static uint144(e){return kt(e,144)}static uint152(e){return kt(e,152)}static uint160(e){return kt(e,160)}static uint168(e){return kt(e,168)}static uint176(e){return kt(e,176)}static uint184(e){return kt(e,184)}static uint192(e){return kt(e,192)}static uint200(e){return kt(e,200)}static uint208(e){return kt(e,208)}static uint216(e){return kt(e,216)}static uint224(e){return kt(e,224)}static uint232(e){return kt(e,232)}static uint240(e){return kt(e,240)}static uint248(e){return kt(e,248)}static uint256(e){return kt(e,256)}static uint(e){return kt(e,256)}static int8(e){return kt(e,-8)}static int16(e){return kt(e,-16)}static int24(e){return kt(e,-24)}static int32(e){return kt(e,-32)}static int40(e){return kt(e,-40)}static int48(e){return kt(e,-48)}static int56(e){return kt(e,-56)}static int64(e){return kt(e,-64)}static int72(e){return kt(e,-72)}static int80(e){return kt(e,-80)}static int88(e){return kt(e,-88)}static int96(e){return kt(e,-96)}static int104(e){return kt(e,-104)}static int112(e){return kt(e,-112)}static int120(e){return kt(e,-120)}static int128(e){return kt(e,-128)}static int136(e){return kt(e,-136)}static int144(e){return kt(e,-144)}static int152(e){return kt(e,-152)}static int160(e){return kt(e,-160)}static int168(e){return kt(e,-168)}static int176(e){return kt(e,-176)}static int184(e){return kt(e,-184)}static int192(e){return kt(e,-192)}static int200(e){return kt(e,-200)}static int208(e){return kt(e,-208)}static int216(e){return kt(e,-216)}static int224(e){return kt(e,-224)}static int232(e){return kt(e,-232)}static int240(e){return kt(e,-240)}static int248(e){return kt(e,-248)}static int256(e){return kt(e,-256)}static int(e){return kt(e,-256)}static bytes1(e){return Bn(e,1)}static bytes2(e){return Bn(e,2)}static bytes3(e){return Bn(e,3)}static bytes4(e){return Bn(e,4)}static bytes5(e){return Bn(e,5)}static bytes6(e){return Bn(e,6)}static bytes7(e){return Bn(e,7)}static bytes8(e){return Bn(e,8)}static bytes9(e){return Bn(e,9)}static bytes10(e){return Bn(e,10)}static bytes11(e){return Bn(e,11)}static bytes12(e){return Bn(e,12)}static bytes13(e){return Bn(e,13)}static bytes14(e){return Bn(e,14)}static bytes15(e){return Bn(e,15)}static bytes16(e){return Bn(e,16)}static bytes17(e){return Bn(e,17)}static bytes18(e){return Bn(e,18)}static bytes19(e){return Bn(e,19)}static bytes20(e){return Bn(e,20)}static bytes21(e){return Bn(e,21)}static bytes22(e){return Bn(e,22)}static bytes23(e){return Bn(e,23)}static bytes24(e){return Bn(e,24)}static bytes25(e){return Bn(e,25)}static bytes26(e){return Bn(e,26)}static bytes27(e){return Bn(e,27)}static bytes28(e){return Bn(e,28)}static bytes29(e){return Bn(e,29)}static bytes30(e){return Bn(e,30)}static bytes31(e){return Bn(e,31)}static bytes32(e){return Bn(e,32)}static address(e){return new Eu(wu,"address",e)}static bool(e){return new Eu(wu,"bool",!!e)}static bytes(e){return new Eu(wu,"bytes",e)}static string(e){return new Eu(wu,"string",e)}static array(e,n){throw new Error("not implemented yet")}static tuple(e,n){throw new Error("not implemented yet")}static overrides(e){return new Eu(wu,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===CH}static dereference(e,n){if(Eu.isTyped(e)){if(e.type!==n)throw new Error(`invalid type: expecetd ${n}, got ${e.type}`);return e.value}return e}};jp=new WeakMap;let Is=Eu;class R2e extends Ad{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,n){let r=Is.dereference(n,"string");try{r=yn(r)}catch(i){return this._throwError(i.message,n)}return e.writeValue(r)}decode(e){return yn(ad(e.readValue(),20))}}class O2e extends Ad{constructor(n){super(n.name,n.type,"_",n.dynamic);Se(this,"coder");this.coder=n}defaultValue(){return this.coder.defaultValue()}encode(n,r){return this.coder.encode(n,r)}decode(n){return this.coder.decode(n)}}function Qre(t,e,n){let r=[];if(Array.isArray(n))r=n;else if(n&&typeof n=="object"){let l={};r=e.map(c=>{const u=c.localName;return Ke(u,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:c},value:n}),Ke(!l[u],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:c},value:n}),l[u]=!0,n[u]})}else xe(!1,"invalid tuple value","tuple",n);xe(e.length===r.length,"types/value length mismatch","tuple",n);let i=new P4,s=new P4,o=[];e.forEach((l,c)=>{let u=r[c];if(l.dynamic){let f=s.length;l.encode(s,u);let m=i.writeUpdatableValue();o.push(g=>{m(g+f)})}else l.encode(i,u)}),o.forEach(l=>{l(i.length)});let a=t.appendWriter(i);return a+=t.appendWriter(s),a}function Zre(t,e){let n=[],r=[],i=t.subReader(0);return e.forEach(s=>{let o=null;if(s.dynamic){let a=t.readIndex(),l=i.subReader(a);try{o=s.decode(l)}catch(c){if(os(c,"BUFFER_OVERRUN"))throw c;o=c,o.baseType=s.name,o.name=s.localName,o.type=s.type}}else try{o=s.decode(t)}catch(a){if(os(a,"BUFFER_OVERRUN"))throw a;o=a,o.baseType=s.name,o.name=s.localName,o.type=s.type}if(o==null)throw new Error("investigate");n.push(o),r.push(s.localName||null)}),nx.fromItems(n,r)}class M2e extends Ad{constructor(n,r,i){const s=n.type+"["+(r>=0?r:"")+"]",o=r===-1||n.dynamic;super("array",s,i,o);Se(this,"coder");Se(this,"length");Mt(this,{coder:n,length:r})}defaultValue(){const n=this.coder.defaultValue(),r=[];for(let i=0;i<this.length;i++)r.push(n);return r}encode(n,r){const i=Is.dereference(r,"array");Array.isArray(i)||this._throwError("expected array value",i);let s=this.length;s===-1&&(s=i.length,n.writeValue(i.length)),Ine(i.length,s,"coder array"+(this.localName?" "+this.localName:""));let o=[];for(let a=0;a<i.length;a++)o.push(this.coder);return Qre(n,o,i)}decode(n){let r=this.length;r===-1&&(r=n.readIndex(),Ke(r*qs<=n.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:n.bytes,offset:r*qs,length:n.dataLength}));let i=[];for(let s=0;s<r;s++)i.push(new O2e(this.coder));return Zre(n,i)}}class D2e extends Ad{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,n){const r=Is.dereference(n,"bool");return e.writeValue(r?1:0)}decode(e){return!!e.readValue()}}class eie extends Ad{constructor(e,n){super(e,e,n,!0)}defaultValue(){return"0x"}encode(e,n){n=as(n);let r=e.writeValue(n.length);return r+=e.writeBytes(n),r}decode(e){return e.readBytes(e.readIndex(),!0)}}class L2e extends eie{constructor(e){super("bytes",e)}decode(e){return rt(super.decode(e))}}class j2e extends Ad{constructor(n,r){let i="bytes"+String(n);super(i,i,r,!1);Se(this,"size");Mt(this,{size:n},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(n,r){let i=as(Is.dereference(r,this.type));return i.length!==this.size&&this._throwError("incorrect data length",r),n.writeBytes(i)}decode(n){return rt(n.readBytes(this.size))}}const B2e=new Uint8Array([]);class U2e extends Ad{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,n){return n!=null&&this._throwError("not null",n),e.writeBytes(B2e)}decode(e){return e.readBytes(0),null}}const F2e=BigInt(0),$2e=BigInt(1),z2e=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class H2e extends Ad{constructor(n,r,i){const s=(r?"int":"uint")+n*8;super(s,s,i,!1);Se(this,"size");Se(this,"signed");Mt(this,{size:n,signed:r},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(n,r){let i=Et(Is.dereference(r,this.type)),s=yp(z2e,qs*8);if(this.signed){let o=yp(s,this.size*8-1);(i>o||i<-(o+$2e))&&this._throwError("value out-of-bounds",r),i=Mne(i,8*qs)}else(i<F2e||i>yp(s,this.size*8))&&this._throwError("value out-of-bounds",r);return n.writeValue(i)}decode(n){let r=yp(n.readValue(),this.size*8);return this.signed&&(r=qT(r,this.size*8)),r}}class V2e extends eie{constructor(e){super("string",e)}defaultValue(){return""}encode(e,n){return super.encode(e,pi(Is.dereference(n,"string")))}decode(e){return KT(super.decode(e))}}class KS extends Ad{constructor(n,r){let i=!1;const s=[];n.forEach(a=>{a.dynamic&&(i=!0),s.push(a.type)});const o="tuple("+s.join(",")+")";super("tuple",o,r,i);Se(this,"coders");Mt(this,{coders:Object.freeze(n.slice())})}defaultValue(){const n=[];this.coders.forEach(i=>{n.push(i.defaultValue())});const r=this.coders.reduce((i,s)=>{const o=s.localName;return o&&(i[o]||(i[o]=0),i[o]++),i},{});return this.coders.forEach((i,s)=>{let o=i.localName;!o||r[o]!==1||(o==="length"&&(o="_length"),n[o]==null&&(n[o]=n[s]))}),Object.freeze(n)}encode(n,r){const i=Is.dereference(r,"tuple");return Qre(n,this.coders,i)}decode(n){return Zre(n,this.coders)}}function eR(t,e){return{address:yn(t),storageKeys:e.map((n,r)=>(xe(gr(n,32),"invalid slot",`storageKeys[${r}]`,n),n.toLowerCase()))}}function Rm(t){if(Array.isArray(t))return t.map((n,r)=>Array.isArray(n)?(xe(n.length===2,"invalid slot set",`value[${r}]`,n),eR(n[0],n[1])):(xe(n!=null&&typeof n=="object","invalid address-slot set","value",t),eR(n.address,n.storageKeys)));xe(t!=null&&typeof t=="object","invalid access list","value",t);const e=Object.keys(t).map(n=>{const r=t[n].reduce((i,s)=>(i[s]=!0,i),{});return eR(n,Object.keys(r).sort())});return e.sort((n,r)=>n.address.localeCompare(r.address)),e}function tie(t){return{address:yn(t.address),nonce:Et(t.nonce!=null?t.nonce:0),chainId:Et(t.chainId!=null?t.chainId:0),signature:Ws.from(t.signature)}}function M1(t){let e;return typeof t=="string"?e=Tc.computePublicKey(t,!1):e=t.publicKey,yn(Kn("0x"+e.substring(4)).substring(26))}function u2(t,e){return M1(Tc.recoverPublicKey(t,e))}const Li=BigInt(0),q2e=BigInt(2),G2e=BigInt(27),K2e=BigInt(28),W2e=BigInt(35),Y2e=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),J2e=Symbol.for("nodejs.util.inspect.custom"),tR=4096*32,iT=128;function X2e(t){return{blobToKzgCommitment:r=>{if("computeBlobProof"in t){if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return pt(t.blobToKzgCommitment(rt(r)))}else if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return pt(t.blobToKzgCommitment(r));if("blobToKZGCommitment"in t&&typeof t.blobToKZGCommitment=="function")return pt(t.blobToKZGCommitment(rt(r)));xe(!1,"unsupported KZG library","kzg",t)},computeBlobKzgProof:(r,i)=>{if("computeBlobProof"in t&&typeof t.computeBlobProof=="function")return pt(t.computeBlobProof(rt(r),rt(i)));if("computeBlobKzgProof"in t&&typeof t.computeBlobKzgProof=="function")return t.computeBlobKzgProof(r,i);if("computeBlobKZGProof"in t&&typeof t.computeBlobKZGProof=="function")return pt(t.computeBlobKZGProof(rt(r),rt(i)));xe(!1,"unsupported KZG library","kzg",t)}}}function NH(t,e){let n=t.toString(16);for(;n.length<2;)n="0"+n;return n+=za(e).substring(4),"0x"+n}function Bx(t){return t==="0x"?null:yn(t)}function d2(t,e){try{return Rm(t)}catch(n){xe(!1,n.message,e,t)}}function Q2e(t,e){try{if(!Array.isArray(t))throw new Error("authorizationList: invalid array");const n=[];for(let r=0;r<t.length;r++){const i=t[r];if(!Array.isArray(i))throw new Error(`authorization[${r}]: invalid array`);if(i.length!==6)throw new Error(`authorization[${r}]: wrong length`);if(!i[1])throw new Error(`authorization[${r}]: null address`);n.push({address:Bx(i[1]),nonce:ir(i[2],"nonce"),chainId:ir(i[0],"chainId"),signature:Ws.from({yParity:Om(i[3],"yParity"),r:od(i[4],32),s:od(i[5],32)})})}return n}catch(n){xe(!1,n.message,e,t)}}function Om(t,e){return t==="0x"?0:Qt(t,e)}function ir(t,e){if(t==="0x")return Li;const n=Et(t,e);return xe(n<=Y2e,"value exceeds uint size",e,n),n}function _n(t,e){const n=Et(t,"value"),r=Lr(n);return xe(r.length<=32,"value too large",`tx.${e}`,n),r}function f2(t){return Rm(t).map(e=>[e.address,e.storageKeys])}function Z2e(t){return t.map(e=>[_n(e.chainId,"chainId"),e.address,_n(e.nonce,"nonce"),_n(e.signature.yParity,"yParity"),Lr(e.signature.r),Lr(e.signature._s)])}function eNe(t,e){xe(Array.isArray(t),`invalid ${e}`,"value",t);for(let n=0;n<t.length;n++)xe(gr(t[n],32),"invalid ${ param } hash",`value[${n}]`,t[n]);return t}function tNe(t){const e=R1(t);xe(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",t);const n={type:0,nonce:Om(e[0],"nonce"),gasPrice:ir(e[1],"gasPrice"),gasLimit:ir(e[2],"gasLimit"),to:Bx(e[3]),value:ir(e[4],"value"),data:rt(e[5]),chainId:Li};if(e.length===6)return n;const r=ir(e[6],"v"),i=ir(e[7],"r"),s=ir(e[8],"s");if(i===Li&&s===Li)n.chainId=r;else{let o=(r-W2e)/q2e;o<Li&&(o=Li),n.chainId=o,xe(o!==Li||r===G2e||r===K2e,"non-canonical legacy v","v",e[6]),n.signature=Ws.from({r:od(e[7],32),s:od(e[8],32),v:r})}return n}function nNe(t,e){const n=[_n(t.nonce,"nonce"),_n(t.gasPrice||0,"gasPrice"),_n(t.gasLimit,"gasLimit"),t.to||"0x",_n(t.value,"value"),t.data];let r=Li;if(t.chainId!=Li)r=Et(t.chainId,"tx.chainId"),xe(!e||e.networkV==null||e.legacyChainId===r,"tx.chainId/sig.v mismatch","sig",e);else if(t.signature){const s=t.signature.legacyChainId;s!=null&&(r=s)}if(!e)return r!==Li&&(n.push(Lr(r)),n.push("0x"),n.push("0x")),Ac(n);let i=BigInt(27+e.yParity);return r!==Li?i=Ws.getChainIdV(r,e.v):BigInt(e.v)!==i&&xe(!1,"tx.chainId/sig.v mismatch","sig",e),n.push(Lr(i)),n.push(Lr(e.r)),n.push(Lr(e._s)),Ac(n)}function h2(t,e){let n;try{if(n=Om(e[0],"yParity"),n!==0&&n!==1)throw new Error("bad yParity")}catch{xe(!1,"invalid yParity","yParity",e[0])}const r=od(e[1],32),i=od(e[2],32),s=Ws.from({r,s:i,yParity:n});t.signature=s}function rNe(t){const e=R1(pt(t).slice(1));xe(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",rt(t));const n={type:2,chainId:ir(e[0],"chainId"),nonce:Om(e[1],"nonce"),maxPriorityFeePerGas:ir(e[2],"maxPriorityFeePerGas"),maxFeePerGas:ir(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:ir(e[4],"gasLimit"),to:Bx(e[5]),value:ir(e[6],"value"),data:rt(e[7]),accessList:d2(e[8],"accessList")};return e.length===9||h2(n,e.slice(9)),n}function iNe(t,e){const n=[_n(t.chainId,"chainId"),_n(t.nonce,"nonce"),_n(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),_n(t.maxFeePerGas||0,"maxFeePerGas"),_n(t.gasLimit,"gasLimit"),t.to||"0x",_n(t.value,"value"),t.data,f2(t.accessList||[])];return e&&(n.push(_n(e.yParity,"yParity")),n.push(Lr(e.r)),n.push(Lr(e.s))),On(["0x02",Ac(n)])}function sNe(t){const e=R1(pt(t).slice(1));xe(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",rt(t));const n={type:1,chainId:ir(e[0],"chainId"),nonce:Om(e[1],"nonce"),gasPrice:ir(e[2],"gasPrice"),gasLimit:ir(e[3],"gasLimit"),to:Bx(e[4]),value:ir(e[5],"value"),data:rt(e[6]),accessList:d2(e[7],"accessList")};return e.length===8||h2(n,e.slice(8)),n}function oNe(t,e){const n=[_n(t.chainId,"chainId"),_n(t.nonce,"nonce"),_n(t.gasPrice||0,"gasPrice"),_n(t.gasLimit,"gasLimit"),t.to||"0x",_n(t.value,"value"),t.data,f2(t.accessList||[])];return e&&(n.push(_n(e.yParity,"recoveryParam")),n.push(Lr(e.r)),n.push(Lr(e.s))),On(["0x01",Ac(n)])}function aNe(t){let e=R1(pt(t).slice(1)),n="3",r=null,i=null;if(e.length===4&&Array.isArray(e[0])){n="3 (network format)";const o=e[1],a=e[2],l=e[3];xe(Array.isArray(o),"invalid network format: blobs not an array","fields[1]",o),xe(Array.isArray(a),"invalid network format: commitments not an array","fields[2]",a),xe(Array.isArray(l),"invalid network format: proofs not an array","fields[3]",l),xe(o.length===a.length,"invalid network format: blobs/commitments length mismatch","fields",e),xe(o.length===l.length,"invalid network format: blobs/proofs length mismatch","fields",e),i=[];for(let c=0;c<e[1].length;c++)i.push({data:o[c],commitment:a[c],proof:l[c]});e=e[0]}else if(e.length===5&&Array.isArray(e[0])){n="3 (EIP-7594 network format)",r=Qt(e[1]);const o=e[2],a=e[3],l=e[4];xe(r===1,`unsupported EIP-7594 network format version: ${r}`,"fields[1]",r),xe(Array.isArray(o),"invalid EIP-7594 network format: blobs not an array","fields[2]",o),xe(Array.isArray(a),"invalid EIP-7594 network format: commitments not an array","fields[3]",a),xe(Array.isArray(l),"invalid EIP-7594 network format: proofs not an array","fields[4]",l),xe(o.length===a.length,"invalid network format: blobs/commitments length mismatch","fields",e),xe(o.length*iT===l.length,"invalid network format: blobs/proofs length mismatch","fields",e),i=[];for(let c=0;c<o.length;c++){const u=[];for(let f=0;f<iT;f++)u.push(l[c*iT+f]);i.push({data:o[c],commitment:a[c],proof:On(u)})}e=e[0]}xe(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${n}`,"data",rt(t));const s={type:3,chainId:ir(e[0],"chainId"),nonce:Om(e[1],"nonce"),maxPriorityFeePerGas:ir(e[2],"maxPriorityFeePerGas"),maxFeePerGas:ir(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:ir(e[4],"gasLimit"),to:Bx(e[5]),value:ir(e[6],"value"),data:rt(e[7]),accessList:d2(e[8],"accessList"),maxFeePerBlobGas:ir(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10],blobWrapperVersion:r};i&&(s.blobs=i),xe(s.to!=null,`invalid address for transaction type: ${n}`,"data",t),xe(Array.isArray(s.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",t);for(let o=0;o<s.blobVersionedHashes.length;o++)xe(gr(s.blobVersionedHashes[o],32),`invalid blobVersionedHash at index ${o}: must be length 32`,"data",t);return e.length===11||h2(s,e.slice(11)),s}function lNe(t,e,n){const r=[_n(t.chainId,"chainId"),_n(t.nonce,"nonce"),_n(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),_n(t.maxFeePerGas||0,"maxFeePerGas"),_n(t.gasLimit,"gasLimit"),t.to||ww,_n(t.value,"value"),t.data,f2(t.accessList||[]),_n(t.maxFeePerBlobGas||0,"maxFeePerBlobGas"),eNe(t.blobVersionedHashes||[],"blobVersionedHashes")];if(e&&(r.push(_n(e.yParity,"yParity")),r.push(Lr(e.r)),r.push(Lr(e.s)),n)){if(t.blobWrapperVersion!=null){const i=Lr(t.blobWrapperVersion),s=[];for(const{proof:o}of n){const a=pt(o),l=a.length/iT;for(let c=0;c<a.length;c+=l)s.push(a.subarray(c,c+l))}return On(["0x03",Ac([r,i,n.map(o=>o.data),n.map(o=>o.commitment),s])])}return On(["0x03",Ac([r,n.map(i=>i.data),n.map(i=>i.commitment),n.map(i=>i.proof)])])}return On(["0x03",Ac(r)])}function cNe(t){const e=R1(pt(t).slice(1));xe(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",rt(t));const n={type:4,chainId:ir(e[0],"chainId"),nonce:Om(e[1],"nonce"),maxPriorityFeePerGas:ir(e[2],"maxPriorityFeePerGas"),maxFeePerGas:ir(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:ir(e[4],"gasLimit"),to:Bx(e[5]),value:ir(e[6],"value"),data:rt(e[7]),accessList:d2(e[8],"accessList"),authorizationList:Q2e(e[9],"authorizationList")};return e.length===10||h2(n,e.slice(10)),n}function uNe(t,e){const n=[_n(t.chainId,"chainId"),_n(t.nonce,"nonce"),_n(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),_n(t.maxFeePerGas||0,"maxFeePerGas"),_n(t.gasLimit,"gasLimit"),t.to||"0x",_n(t.value,"value"),t.data,f2(t.accessList||[]),Z2e(t.authorizationList||[])];return e&&(n.push(_n(e.yParity,"yParity")),n.push(Lr(e.r)),n.push(Lr(e.s))),On(["0x04",Ac(n)])}var dl,vy,by,wy,Ey,Sy,Ay,Ty,ky,Cy,Ny,_y,Bp,Df,ic,Lf,Iy,Py,Ry,sT,Fo;let S8=(Fo=class{constructor(){Be(this,Ry);Be(this,dl);Be(this,vy);Be(this,by);Be(this,wy);Be(this,Ey);Be(this,Sy);Be(this,Ay);Be(this,Ty);Be(this,ky);Be(this,Cy);Be(this,Ny);Be(this,_y);Be(this,Bp);Be(this,Df);Be(this,ic);Be(this,Lf);Be(this,Iy);Be(this,Py);ge(this,dl,null),ge(this,vy,null),ge(this,wy,0),ge(this,Ey,Li),ge(this,Sy,null),ge(this,Ay,null),ge(this,Ty,null),ge(this,by,"0x"),ge(this,ky,Li),ge(this,Cy,Li),ge(this,Ny,null),ge(this,_y,null),ge(this,Bp,null),ge(this,Df,null),ge(this,ic,null),ge(this,Lf,null),ge(this,Iy,null),ge(this,Py,null)}get type(){return ie(this,dl)}set type(e){switch(e){case null:ge(this,dl,null);break;case 0:case"legacy":ge(this,dl,0);break;case 1:case"berlin":case"eip-2930":ge(this,dl,1);break;case 2:case"london":case"eip-1559":ge(this,dl,2);break;case 3:case"cancun":case"eip-4844":ge(this,dl,3);break;case 4:case"pectra":case"eip-7702":ge(this,dl,4);break;default:xe(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=ie(this,vy);return e==null&&this.type===3?ww:e}set to(e){ge(this,vy,e==null?null:yn(e))}get nonce(){return ie(this,wy)}set nonce(e){ge(this,wy,Qt(e,"value"))}get gasLimit(){return ie(this,Ey)}set gasLimit(e){ge(this,Ey,Et(e))}get gasPrice(){const e=ie(this,Sy);return e==null&&(this.type===0||this.type===1)?Li:e}set gasPrice(e){ge(this,Sy,e==null?null:Et(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=ie(this,Ay);return e??(this.type===2||this.type===3?Li:null)}set maxPriorityFeePerGas(e){ge(this,Ay,e==null?null:Et(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=ie(this,Ty);return e??(this.type===2||this.type===3?Li:null)}set maxFeePerGas(e){ge(this,Ty,e==null?null:Et(e,"maxFeePerGas"))}get data(){return ie(this,by)}set data(e){ge(this,by,rt(e))}get value(){return ie(this,ky)}set value(e){ge(this,ky,Et(e,"value"))}get chainId(){return ie(this,Cy)}set chainId(e){ge(this,Cy,Et(e))}get signature(){return ie(this,Ny)||null}set signature(e){ge(this,Ny,e==null?null:Ws.from(e))}isValid(){const e=this.signature;if(e&&!e.isValid())return!1;const n=this.authorizationList;if(n){for(const r of n)if(!r.signature.isValid())return!1}return!0}get accessList(){const e=ie(this,_y)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){ge(this,_y,e==null?null:Rm(e))}get authorizationList(){const e=ie(this,Iy)||null;return e==null&&this.type===4?[]:e}set authorizationList(e){ge(this,Iy,e==null?null:e.map(n=>tie(n)))}get maxFeePerBlobGas(){const e=ie(this,Bp);return e==null&&this.type===3?Li:e}set maxFeePerBlobGas(e){ge(this,Bp,e==null?null:Et(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=ie(this,Df);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){xe(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let n=0;n<e.length;n++)xe(gr(e[n],32),"invalid blobVersionedHash",`value[${n}]`,e[n])}ge(this,Df,e)}get blobs(){return ie(this,Lf)==null?null:ie(this,Lf).map(e=>Object.assign({},e))}set blobs(e){if(e==null){ge(this,Lf,null);return}const n=[],r=[];for(let i=0;i<e.length;i++){const s=e[i];if(i2(s)){Ke(ie(this,ic),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=pt(s);if(xe(o.length<=tR,"blob is too large",`blobs[${i}]`,s),o.length!==tR){const c=new Uint8Array(tR);c.set(o),o=c}const a=ie(this,ic).blobToKzgCommitment(o),l=rt(ie(this,ic).computeBlobKzgProof(o,a));n.push({data:rt(o),commitment:rt(a),proof:l}),r.push(NH(1,a))}else{const o=rt(s.data),a=rt(s.commitment),l=rt(s.proof);n.push({data:o,commitment:a,proof:l}),r.push(NH(1,a))}}ge(this,Lf,n),ge(this,Df,r)}get kzg(){return ie(this,ic)}set kzg(e){e==null?ge(this,ic,null):ge(this,ic,X2e(e))}get blobWrapperVersion(){return ie(this,Py)}set blobWrapperVersion(e){ge(this,Py,e)}get hash(){return this.signature==null?null:Kn(tt(this,Ry,sT).call(this,!0,!1))}get unsignedHash(){return Kn(this.unsignedSerialized)}get from(){return this.signature==null?null:u2(this.unsignedHash,this.signature.getCanonical())}get fromPublicKey(){return this.signature==null?null:Tc.recoverPublicKey(this.unsignedHash,this.signature.getCanonical())}isSigned(){return this.signature!=null}get serialized(){return tt(this,Ry,sT).call(this,!0,!0)}get unsignedSerialized(){return tt(this,Ry,sT).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,n=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,r=this.accessList!=null,i=ie(this,Bp)!=null||ie(this,Df);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&Ke(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),Ke(!n||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),Ke(this.type!==0||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const s=[];return this.type!=null?s.push(this.type):this.authorizationList&&this.authorizationList.length?s.push(4):n?s.push(2):e?(s.push(1),r||s.push(0)):r?(s.push(1),s.push(2)):(i&&this.to||(s.push(0),s.push(1),s.push(2)),s.push(3)),s.sort(),s}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return Fo.from(this)}toJSON(){const e=n=>n==null?null:n.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}[J2e](){return this.toString()}toString(){const e=[],n=i=>{let s=this[i];typeof s=="string"&&(s=JSON.stringify(s)),e.push(`${i}: ${s}`)};this.type&&n("type"),n("to"),n("data"),n("nonce"),n("gasLimit"),n("value"),this.chainId!=null&&n("chainId"),this.signature&&(n("from"),e.push(`signature: ${this.signature.toString()}`));const r=this.authorizationList;if(r){const i=[];for(const s of r){const o=[];o.push(`address: ${JSON.stringify(s.address)}`),s.nonce!=null&&o.push(`nonce: ${s.nonce}`),s.chainId!=null&&o.push(`chainId: ${s.chainId}`),s.signature&&o.push(`signature: ${s.signature.toString()}`),i.push(`Authorization { ${o.join(", ")} }`)}e.push(`authorizations: [ ${i.join(", ")} ]`)}return`Transaction { ${e.join(", ")} }`}static from(e){if(e==null)return new Fo;if(typeof e=="string"){const r=pt(e);if(r[0]>=127)return Fo.from(tNe(r));switch(r[0]){case 1:return Fo.from(sNe(r));case 2:return Fo.from(rNe(r));case 3:return Fo.from(aNe(r));case 4:return Fo.from(cNe(r))}Ke(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const n=new Fo;return e.type!=null&&(n.type=e.type),e.to!=null&&(n.to=e.to),e.nonce!=null&&(n.nonce=e.nonce),e.gasLimit!=null&&(n.gasLimit=e.gasLimit),e.gasPrice!=null&&(n.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(n.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(n.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(n.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(n.data=e.data),e.value!=null&&(n.value=e.value),e.chainId!=null&&(n.chainId=e.chainId),e.signature!=null&&(n.signature=Ws.from(e.signature)),e.accessList!=null&&(n.accessList=e.accessList),e.authorizationList!=null&&(n.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(n.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(n.kzg=e.kzg),e.blobWrapperVersion!=null&&(n.blobWrapperVersion=e.blobWrapperVersion),e.blobs!=null&&(n.blobs=e.blobs),e.hash!=null&&(xe(n.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),xe(n.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(xe(n.isSigned(),"unsigned transaction cannot define '.from'","tx",e),xe(n.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),n}},dl=new WeakMap,vy=new WeakMap,by=new WeakMap,wy=new WeakMap,Ey=new WeakMap,Sy=new WeakMap,Ay=new WeakMap,Ty=new WeakMap,ky=new WeakMap,Cy=new WeakMap,Ny=new WeakMap,_y=new WeakMap,Bp=new WeakMap,Df=new WeakMap,ic=new WeakMap,Lf=new WeakMap,Iy=new WeakMap,Py=new WeakMap,Ry=new WeakSet,sT=function(e,n){Ke(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const r=e?this.signature:null;switch(this.inferType()){case 0:return nNe(this,r);case 1:return oNe(this,r);case 2:return iNe(this,r);case 3:return lNe(this,r,n?this.blobs:null);case 4:return uNe(this,r)}Ke(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})},Fo);function nie(t){return xe(typeof t.address=="string","invalid address for hashAuthorization","auth.address",t),Kn(On(["0x05",Ac([t.chainId!=null?Lr(t.chainId):"0x",yn(t.address),t.nonce!=null?Lr(t.nonce):"0x"])]))}function Imt(t,e){return u2(nie(t),e)}function cd(t){return Kn(pi(t))}var dNe="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const _H=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),IH=4;function fNe(t){let e=0;function n(){return t[e++]<<8|t[e++]}let r=n(),i=1,s=[0,1];for(let U=1;U<r;U++)s.push(i+=n());let o=n(),a=e;e+=o;let l=0,c=0;function u(){return l==0&&(c=c<<8|t[e++],l=8),c>>--l&1}const f=31,m=2**f,g=m>>>1,v=g>>1,x=m-1;let b=0;for(let U=0;U<f;U++)b=b<<1|u();let E=[],C=0,k=m;for(;;){let U=Math.floor(((b-C+1)*i-1)/k),R=0,$=r;for(;$-R>1;){let F=R+$>>>1;U<s[F]?$=F:R=F}if(R==0)break;E.push(R);let V=C+Math.floor(k*s[R]/i),j=C+Math.floor(k*s[R+1]/i)-1;for(;((V^j)&g)==0;)b=b<<1&x|u(),V=V<<1&x,j=j<<1&x|1;for(;V&~j&v;)b=b&g|b<<1&x>>>1|u(),V=V<<1^g,j=(j^g)<<1|g|1;C=V,k=1+j-V}let O=r-4;return E.map(U=>{switch(U-O){case 3:return O+65792+(t[a++]<<16|t[a++]<<8|t[a++]);case 2:return O+256+(t[a++]<<8|t[a++]);case 1:return O+t[a++];default:return U-1}})}function hNe(t){let e=0;return()=>t[e++]}function rie(t){return hNe(fNe(pNe(t)))}function pNe(t){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((i,s)=>e[i.charCodeAt(0)]=s);let n=t.length,r=new Uint8Array(6*n>>3);for(let i=0,s=0,o=0,a=0;i<n;i++)a=a<<6|e[t.charCodeAt(i)],o+=6,o>=8&&(r[s++]=a>>(o-=8));return r}function mNe(t){return t&1?~t>>1:t>>1}function gNe(t,e){let n=Array(t);for(let r=0,i=0;r<t;r++)n[r]=i+=mNe(e());return n}function Ew(t,e=0){let n=[];for(;;){let r=t(),i=t();if(!i)break;e+=r;for(let s=0;s<i;s++)n.push(e+s);e+=i+1}return n}function iie(t){return Sw(()=>{let e=Ew(t);if(e.length)return e})}function sie(t){let e=[];for(;;){let n=t();if(n==0)break;e.push(yNe(n,t))}for(;;){let n=t()-1;if(n<0)break;e.push(xNe(n,t))}return e.flat()}function Sw(t){let e=[];for(;;){let n=t(e.length);if(!n)break;e.push(n)}return e}function oie(t,e,n){let r=Array(t).fill().map(()=>[]);for(let i=0;i<e;i++)gNe(t,n).forEach((s,o)=>r[o].push(s));return r}function yNe(t,e){let n=1+e(),r=e(),i=Sw(e);return oie(i.length,1+t,e).flatMap((o,a)=>{let[l,...c]=o;return Array(i[a]).fill().map((u,f)=>{let m=f*r;return[l+f*n,c.map(g=>g+m)]})})}function xNe(t,e){let n=1+e();return oie(n,1+t,e).map(i=>[i[0],i.slice(1)])}function vNe(t){let e=[],n=Ew(t);return i(r([]),[]),e;function r(s){let o=t(),a=Sw(()=>{let l=Ew(t).map(c=>n[c]);if(l.length)return r(l)});return{S:o,B:a,Q:s}}function i({S:s,B:o},a,l){if(!(s&4&&l===a[a.length-1])){s&2&&(l=a[a.length-1]),s&1&&e.push(a);for(let c of o)for(let u of c.Q)i(c,[...a,u],l)}}}function bNe(t){return t.toString(16).toUpperCase().padStart(2,"0")}function aie(t){return`{${bNe(t)}}`}function wNe(t){let e=[];for(let n=0,r=t.length;n<r;){let i=t.codePointAt(n);n+=i<65536?1:2,e.push(i)}return e}function lx(t){let n=t.length;if(n<4096)return String.fromCodePoint(...t);let r=[];for(let i=0;i<n;)r.push(String.fromCodePoint(...t.slice(i,i+=4096)));return r.join("")}function ENe(t,e){let n=t.length,r=n-e.length;for(let i=0;r==0&&i<n;i++)r=t[i]-e[i];return r}var SNe="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const Aw=44032,YT=4352,JT=4449,XT=4519,lie=19,cie=21,cx=28,QT=cie*cx,ANe=lie*QT,TNe=Aw+ANe,kNe=YT+lie,CNe=JT+cie,NNe=XT+cx;function Rb(t){return t>>24&255}function uie(t){return t&16777215}let F4,PH,$4,oT;function _Ne(){let t=rie(SNe);F4=new Map(iie(t).flatMap((e,n)=>e.map(r=>[r,n+1<<24]))),PH=new Set(Ew(t)),$4=new Map,oT=new Map;for(let[e,n]of sie(t)){if(!PH.has(e)&&n.length==2){let[r,i]=n,s=oT.get(r);s||(s=new Map,oT.set(r,s)),s.set(i,e)}$4.set(e,n.reverse())}}function die(t){return t>=Aw&&t<TNe}function INe(t,e){if(t>=YT&&t<kNe&&e>=JT&&e<CNe)return Aw+(t-YT)*QT+(e-JT)*cx;if(die(t)&&e>XT&&e<NNe&&(t-Aw)%cx==0)return t+(e-XT);{let n=oT.get(t);return n&&(n=n.get(e),n)?n:-1}}function fie(t){F4||_Ne();let e=[],n=[],r=!1;function i(s){let o=F4.get(s);o&&(r=!0,s|=o),e.push(s)}for(let s of t)for(;;){if(s<128)e.push(s);else if(die(s)){let o=s-Aw,a=o/QT|0,l=o%QT/cx|0,c=o%cx;i(YT+a),i(JT+l),c>0&&i(XT+c)}else{let o=$4.get(s);o?n.push(...o):i(s)}if(!n.length)break;s=n.pop()}if(r&&e.length>1){let s=Rb(e[0]);for(let o=1;o<e.length;o++){let a=Rb(e[o]);if(a==0||s<=a){s=a;continue}let l=o-1;for(;;){let c=e[l+1];if(e[l+1]=e[l],e[l]=c,!l||(s=Rb(e[--l]),s<=a))break}s=Rb(e[o])}}return e}function PNe(t){let e=[],n=[],r=-1,i=0;for(let s of t){let o=Rb(s),a=uie(s);if(r==-1)o==0?r=a:e.push(a);else if(i>0&&i>=o)o==0?(e.push(r,...n),n.length=0,r=a):n.push(a),i=o;else{let l=INe(r,a);l>=0?r=l:i==0&&o==0?(e.push(r),r=a):(n.push(a),i=o)}}return r>=0&&e.push(r,...n),e}function hie(t){return fie(t).map(uie)}function RNe(t){return PNe(fie(t))}const RH=45,pie=".",mie=65039,gie=1,ZT=t=>Array.from(t);function Tw(t,e){return t.P.has(e)||t.Q.has(e)}class ONe extends Array{get is_emoji(){return!0}}let z4,yie,vp,H4,xie,Gg,nR,ug,ep,OH,V4;function A8(){if(z4)return;let t=rie(dNe);const e=()=>Ew(t),n=()=>new Set(e()),r=(u,f)=>f.forEach(m=>u.add(m));z4=new Map(sie(t)),yie=n(),vp=e(),H4=new Set(e().map(u=>vp[u])),vp=new Set(vp),xie=n(),n();let i=iie(t),s=t();const o=()=>{let u=new Set;return e().forEach(f=>r(u,i[f])),r(u,e()),u};Gg=Sw(u=>{let f=Sw(t).map(m=>m+96);if(f.length){let m=u>=s;f[0]-=32,f=lx(f),m&&(f=`Restricted[${f}]`);let g=o(),v=o(),x=!t();return{N:f,P:g,Q:v,M:x,R:m}}}),nR=n(),ug=new Map;let a=e().concat(ZT(nR)).sort((u,f)=>u-f);a.forEach((u,f)=>{let m=t(),g=a[f]=m?a[f-m]:{V:[],M:new Map};g.V.push(u),nR.has(u)||ug.set(u,g)});for(let{V:u,M:f}of new Set(ug.values())){let m=[];for(let v of u){let x=Gg.filter(E=>Tw(E,v)),b=m.find(({G:E})=>x.some(C=>E.has(C)));b||(b={G:new Set,V:[]},m.push(b)),b.V.push(v),r(b.G,x)}let g=m.flatMap(v=>ZT(v.G));for(let{G:v,V:x}of m){let b=new Set(g.filter(E=>!v.has(E)));for(let E of x)f.set(E,b)}}ep=new Set;let l=new Set;const c=u=>ep.has(u)?l.add(u):ep.add(u);for(let u of Gg){for(let f of u.P)c(f);for(let f of u.Q)c(f)}for(let u of ep)!ug.has(u)&&!l.has(u)&&ug.set(u,gie);r(ep,hie(ep)),OH=vNe(t).map(u=>ONe.from(u)).sort(ENe),V4=new Map;for(let u of OH){let f=[V4];for(let m of u){let g=f.map(v=>{let x=v.get(m);return x||(x=new Map,v.set(m,x)),x});m===mie?f.push(...g):f=g}for(let m of f)m.V=u}}function T8(t){return(vie(t)?"":`${k8(p2([t]))} `)+aie(t)}function k8(t){return`"${t}"`}function MNe(t){if(t.length>=4&&t[2]==RH&&t[3]==RH)throw new Error(`invalid label extension: "${lx(t.slice(0,4))}"`)}function DNe(t){for(let n=t.lastIndexOf(95);n>0;)if(t[--n]!==95)throw new Error("underscore allowed only at start")}function LNe(t){let e=t[0],n=_H.get(e);if(n)throw Qb(`leading ${n}`);let r=t.length,i=-1;for(let s=1;s<r;s++){e=t[s];let o=_H.get(e);if(o){if(i==s)throw Qb(`${n} + ${o}`);i=s+1,n=o}}if(i==r)throw Qb(`trailing ${n}`)}function p2(t,e=1/0,n=aie){let r=[];jNe(t[0])&&r.push(""),t.length>e&&(e>>=1,t=[...t.slice(0,e),8230,...t.slice(-e)]);let i=0,s=t.length;for(let o=0;o<s;o++){let a=t[o];vie(a)&&(r.push(lx(t.slice(i,o))),r.push(n(a)),i=o+1)}return r.push(lx(t.slice(i,s))),r.join("")}function jNe(t){return A8(),vp.has(t)}function vie(t){return A8(),xie.has(t)}function BNe(t){return zNe(UNe(t,RNe,qNe))}function UNe(t,e,n){if(!t)return[];A8();let r=0;return t.split(pie).map(i=>{let s=wNe(i),o={input:s,offset:r};r+=s.length+1;try{let a=o.tokens=VNe(s,e,n),l=a.length,c;if(!l)throw new Error("empty label");let u=o.output=a.flat();if(DNe(u),!(o.emoji=l>1||a[0].is_emoji)&&u.every(m=>m<128))MNe(u),c="ASCII";else{let m=a.flatMap(g=>g.is_emoji?[]:g);if(!m.length)c="Emoji";else{if(vp.has(u[0]))throw Qb("leading combining mark");for(let x=1;x<l;x++){let b=a[x];if(!b.is_emoji&&vp.has(b[0]))throw Qb(`emoji + combining mark: "${lx(a[x-1])} + ${p2([b[0]])}"`)}LNe(u);let g=ZT(new Set(m)),[v]=$Ne(g);HNe(v,m),FNe(v,g),c=v.N}}o.type=c}catch(a){o.error=a}return o})}function FNe(t,e){let n,r=[];for(let i of e){let s=ug.get(i);if(s===gie)return;if(s){let o=s.M.get(i);if(n=n?n.filter(a=>o.has(a)):ZT(o),!n.length)return}else r.push(i)}if(n){for(let i of n)if(r.every(s=>Tw(i,s)))throw new Error(`whole-script confusable: ${t.N}/${i.N}`)}}function $Ne(t){let e=Gg;for(let n of t){let r=e.filter(i=>Tw(i,n));if(!r.length)throw Gg.some(i=>Tw(i,n))?wie(e[0],n):bie(n);if(e=r,r.length==1)break}return e}function zNe(t){return t.map(({input:e,error:n,output:r})=>{if(n){let i=n.message;throw new Error(t.length==1?i:`Invalid label ${k8(p2(e,63))}: ${i}`)}return lx(r)}).join(pie)}function bie(t){return new Error(`disallowed character: ${T8(t)}`)}function wie(t,e){let n=T8(e),r=Gg.find(i=>i.P.has(e));return r&&(n=`${r.N} ${n}`),new Error(`illegal mixture: ${t.N} + ${n}`)}function Qb(t){return new Error(`illegal placement: ${t}`)}function HNe(t,e){for(let n of e)if(!Tw(t,n))throw wie(t,n);if(t.M){let n=hie(e);for(let r=1,i=n.length;r<i;r++)if(H4.has(n[r])){let s=r+1;for(let o;s<i&&H4.has(o=n[s]);s++)for(let a=r;a<s;a++)if(n[a]==o)throw new Error(`duplicate non-spacing marks: ${T8(o)}`);if(s-r>IH)throw new Error(`excessive non-spacing marks: ${k8(p2(n.slice(r-1,s)))} (${s-r}/${IH})`);r=s}}}function VNe(t,e,n){let r=[],i=[];for(t=t.slice().reverse();t.length;){let s=GNe(t);if(s)i.length&&(r.push(e(i)),i=[]),r.push(n(s));else{let o=t.pop();if(ep.has(o))i.push(o);else{let a=z4.get(o);if(a)i.push(...a);else if(!yie.has(o))throw bie(o)}}}return i.length&&r.push(e(i)),r}function qNe(t){return t.filter(e=>e!=mie)}function GNe(t,e){let n=V4,r,i=t.length;for(;i&&(n=n.get(t[--i]),!!n);){let{V:s}=n;s&&(r=s,t.length=i)}return r}const Eie=new Uint8Array(32);Eie.fill(0);function MH(t){return xe(t.length!==0,"invalid ENS name; empty component","comp",t),t}function C8(t){const e=pi(KNe(t)),n=[];if(t.length===0)return n;let r=0;for(let i=0;i<e.length;i++)e[i]===46&&(n.push(MH(e.slice(r,i))),r=i+1);return xe(r<e.length,"invalid ENS name; empty component","name",t),n.push(MH(e.slice(r))),n}function KNe(t){try{if(t.length===0)throw new Error("empty label");return BNe(t)}catch(e){xe(!1,`invalid ENS name (${e.message})`,"name",t)}}function Pmt(t){try{return C8(t).length!==0}catch{}return!1}function q4(t){xe(typeof t=="string","invalid ENS name; not a string","name",t),xe(t.length,"invalid ENS name (empty label)","name",t);let e=Eie;const n=C8(t);for(;n.length;)e=Kn(On([e,Kn(n.pop())]));return rt(e)}function WNe(t,e){const n=e??63;return xe(n<=255,"DNS encoded label cannot exceed 255","length",n),rt(On(C8(t).map(r=>{xe(r.length<=n,`label ${JSON.stringify(t)} exceeds ${n} bytes`,"name",t);const i=new Uint8Array(r.length+1);return i.set(r,1),i[0]=i.length-1,i})))+"00"}function Sie(t){return typeof t=="string"&&(t=pi(t)),Kn(On([pi(A2e),pi(String(t.length)),t]))}function Rmt(t,e){const n=Sie(t);return u2(n,e)}const Aie=new Uint8Array(32);Aie.fill(0);const YNe=BigInt(-1),Tie=BigInt(0),kie=BigInt(1),JNe=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function XNe(t){const e=pt(t),n=e.length%32;return n?On([e,Aie.slice(n)]):rt(e)}const QNe=ad(kie,32),ZNe=ad(Tie,32),DH={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},rR=["name","version","chainId","verifyingContract","salt"];function LH(t){return function(e){return xe(typeof e=="string",`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const e_e={name:LH("name"),version:LH("version"),chainId:function(t){const e=Et(t,"domain.chainId");return xe(e>=0,"invalid chain ID","domain.chainId",t),Number.isSafeInteger(e)?Number(e):yl(e)},verifyingContract:function(t){try{return yn(t).toLowerCase()}catch{}xe(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){const e=pt(t,"domain.salt");return xe(e.length===32,'invalid domain value "salt"',"domain.salt",t),rt(e)}};function iR(t){{const e=t.match(/^(u?)int(\d+)$/);if(e){const n=e[1]==="",r=parseInt(e[2]);xe(r%8===0&&r!==0&&r<=256&&e[2]===String(r),"invalid numeric width","type",t);const i=yp(JNe,n?r-1:r),s=n?(i+kie)*YNe:Tie;return function(o){const a=Et(o,"value");return xe(a>=s&&a<=i,`value out-of-bounds for ${t}`,"value",a),ad(n?Mne(a,256):a,32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const n=parseInt(e[1]);return xe(n!==0&&n<=32&&e[1]===String(n),"invalid bytes width","type",t),function(r){const i=pt(r);return xe(i.length===n,`invalid length for ${t}`,"value",r),XNe(r)}}}switch(t){case"address":return function(e){return od(yn(e),32)};case"bool":return function(e){return e?QNe:ZNe};case"bytes":return function(e){return Kn(e)};case"string":return function(e){return cd(e)}}return null}function jH(t,e){return`${t}(${e.map(({name:n,type:r})=>r+" "+n).join(",")})`}function WS(t){const e=t.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:t}}var c1,Pu,Oy,FC,Cie;const Sa=class Sa{constructor(e){Be(this,FC);Se(this,"primaryType");Be(this,c1);Be(this,Pu);Be(this,Oy);ge(this,Pu,new Map),ge(this,Oy,new Map);const n=new Map,r=new Map,i=new Map,s={};Object.keys(e).forEach(l=>{s[l]=e[l].map(({name:c,type:u})=>{let{base:f,index:m}=WS(u);return f==="int"&&!e.int&&(f="int256"),f==="uint"&&!e.uint&&(f="uint256"),{name:c,type:f+(m||"")}}),n.set(l,new Set),r.set(l,[]),i.set(l,new Set)}),ge(this,c1,JSON.stringify(s));for(const l in s){const c=new Set;for(const u of s[l]){xe(!c.has(u.name),`duplicate variable name ${JSON.stringify(u.name)} in ${JSON.stringify(l)}`,"types",e),c.add(u.name);const f=WS(u.type).base;xe(f!==l,`circular type reference to ${JSON.stringify(f)}`,"types",e),!iR(f)&&(xe(r.has(f),`unknown type ${JSON.stringify(f)}`,"types",e),r.get(f).push(l),n.get(l).add(f))}}const o=Array.from(r.keys()).filter(l=>r.get(l).length===0);xe(o.length!==0,"missing primary type","types",e),xe(o.length===1,`ambiguous primary types or unused types: ${o.map(l=>JSON.stringify(l)).join(", ")}`,"types",e),Mt(this,{primaryType:o[0]});function a(l,c){xe(!c.has(l),`circular type reference to ${JSON.stringify(l)}`,"types",e),c.add(l);for(const u of n.get(l))if(r.has(u)){a(u,c);for(const f of c)i.get(f).add(u)}c.delete(l)}a(this.primaryType,new Set);for(const[l,c]of i){const u=Array.from(c);u.sort(),ie(this,Pu).set(l,jH(l,s[l])+u.map(f=>jH(f,s[f])).join(""))}}get types(){return JSON.parse(ie(this,c1))}getEncoder(e){let n=ie(this,Oy).get(e);return n||(n=tt(this,FC,Cie).call(this,e),ie(this,Oy).set(e,n)),n}encodeType(e){const n=ie(this,Pu).get(e);return xe(n,`unknown type: ${JSON.stringify(e)}`,"name",e),n}encodeData(e,n){return this.getEncoder(e)(n)}hashStruct(e,n){return Kn(this.encodeData(e,n))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,n,r){if(iR(e))return r(e,n);const i=WS(e).array;if(i)return xe(i.count===-1||i.count===n.length,`array length mismatch; expected length ${i.count}`,"value",n),n.map(o=>this._visit(i.prefix,o,r));const s=this.types[e];if(s)return s.reduce((o,{name:a,type:l})=>(o[a]=this._visit(l,n[a],r),o),{});xe(!1,`unknown type: ${e}`,"type",e)}visit(e,n){return this._visit(this.primaryType,e,n)}static from(e){return new Sa(e)}static getPrimaryType(e){return Sa.from(e).primaryType}static hashStruct(e,n,r){return Sa.from(n).hashStruct(e,r)}static hashDomain(e){const n=[];for(const r in e){if(e[r]==null)continue;const i=DH[r];xe(i,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),n.push({name:r,type:i})}return n.sort((r,i)=>rR.indexOf(r.name)-rR.indexOf(i.name)),Sa.hashStruct("EIP712Domain",{EIP712Domain:n},e)}static encode(e,n,r){return On(["0x1901",Sa.hashDomain(e),Sa.from(n).hash(r)])}static hash(e,n,r){return Kn(Sa.encode(e,n,r))}static async resolveNames(e,n,r,i){e=Object.assign({},e);for(const a in e)e[a]==null&&delete e[a];const s={};e.verifyingContract&&!gr(e.verifyingContract,20)&&(s[e.verifyingContract]="0x");const o=Sa.from(n);o.visit(r,(a,l)=>(a==="address"&&!gr(l,20)&&(s[l]="0x"),l));for(const a in s)s[a]=await i(a);return e.verifyingContract&&s[e.verifyingContract]&&(e.verifyingContract=s[e.verifyingContract]),r=o.visit(r,(a,l)=>a==="address"&&s[l]?s[l]:l),{domain:e,value:r}}static getPayload(e,n,r){Sa.hashDomain(e);const i={},s=[];rR.forEach(l=>{const c=e[l];c!=null&&(i[l]=e_e[l](c),s.push({name:l,type:DH[l]}))});const o=Sa.from(n);n=o.types;const a=Object.assign({},n);return xe(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",n),a.EIP712Domain=s,o.encode(r),{types:a,domain:i,primaryType:o.primaryType,message:o.visit(r,(l,c)=>{if(l.match(/^bytes(\d*)/))return rt(pt(c));if(l.match(/^u?int/))return Et(c).toString();switch(l){case"address":return c.toLowerCase();case"bool":return!!c;case"string":return xe(typeof c=="string","invalid string","value",c),c}xe(!1,"unsupported type","type",l)})}}};c1=new WeakMap,Pu=new WeakMap,Oy=new WeakMap,FC=new WeakSet,Cie=function(e){{const i=iR(e);if(i)return i}const n=WS(e).array;if(n){const i=n.prefix,s=this.getEncoder(i);return o=>{xe(n.count===-1||n.count===o.length,`array length mismatch; expected length ${n.count}`,"value",o);let a=o.map(s);return ie(this,Pu).has(i)&&(a=a.map(Kn)),Kn(On(a))}}const r=this.types[e];if(r){const i=cd(ie(this,Pu).get(e));return s=>{const o=r.map(({name:a,type:l})=>{const c=this.getEncoder(l)(s[a]);return ie(this,Pu).has(l)?Kn(c):c});return o.unshift(i),On(o)}}xe(!1,`unknown type: ${e}`,"type",e)};let um=Sa;function Omt(t,e,n,r){return u2(um.hash(t,e,n),r)}function Gs(t){const e=new Set;return t.forEach(n=>e.add(n)),Object.freeze(e)}const t_e="external public payable override",n_e=Gs(t_e.split(" ")),Nie="constant external internal payable private public pure view override",r_e=Gs(Nie.split(" ")),_ie="constructor error event fallback function receive struct",Iie=Gs(_ie.split(" ")),Pie="calldata memory storage payable indexed",i_e=Gs(Pie.split(" ")),s_e="tuple returns",o_e=[_ie,Pie,s_e,Nie].join(" "),a_e=Gs(o_e.split(" ")),l_e={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},c_e=new RegExp("^(\\s*)"),u_e=new RegExp("^([0-9]+)"),d_e=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),Rie=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),Oie=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var Qi,fl,u1,G4;const $C=class $C{constructor(e){Be(this,u1);Be(this,Qi);Be(this,fl);ge(this,Qi,0),ge(this,fl,e.slice())}get offset(){return ie(this,Qi)}get length(){return ie(this,fl).length-ie(this,Qi)}clone(){return new $C(ie(this,fl))}reset(){ge(this,Qi,0)}popKeyword(e){const n=this.peek();if(n.type!=="KEYWORD"||!e.has(n.text))throw new Error(`expected keyword ${n.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const n=this.peek();throw new Error(`expected ${e}; got ${n.type} ${JSON.stringify(n.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=tt(this,u1,G4).call(this,ie(this,Qi)+1,e.match+1);return ge(this,Qi,e.match+1),n}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=[];for(;ie(this,Qi)<e.match-1;){const r=this.peek().linkNext;n.push(tt(this,u1,G4).call(this,ie(this,Qi)+1,r)),ge(this,Qi,r)}return ge(this,Qi,e.match+1),n}peek(){if(ie(this,Qi)>=ie(this,fl).length)throw new Error("out-of-bounds");return ie(this,fl)[ie(this,Qi)]}peekKeyword(e){const n=this.peekType("KEYWORD");return n!=null&&e.has(n)?n:null}peekType(e){if(this.length===0)return null;const n=this.peek();return n.type===e?n.text:null}pop(){const e=this.peek();return nb(this,Qi)._++,e}toString(){const e=[];for(let n=ie(this,Qi);n<ie(this,fl).length;n++){const r=ie(this,fl)[n];e.push(`${r.type}:${r.text}`)}return`<TokenString ${e.join(" ")}>`}};Qi=new WeakMap,fl=new WeakMap,u1=new WeakSet,G4=function(e=0,n=0){return new $C(ie(this,fl).slice(e,n).map(r=>Object.freeze(Object.assign({},r,{match:r.match-e,linkBack:r.linkBack-e,linkNext:r.linkNext-e}))))};let Il=$C;function gh(t){const e=[],n=o=>{const a=s<t.length?JSON.stringify(t[s]):"$EOI";throw new Error(`invalid token ${a} at ${s}: ${o}`)};let r=[],i=[],s=0;for(;s<t.length;){let o=t.substring(s),a=o.match(c_e);a&&(s+=a[1].length,o=t.substring(s));const l={depth:r.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:s,value:-1};e.push(l);let c=l_e[o[0]]||"";if(c){if(l.type=c,l.text=o[0],s++,c==="OPEN_PAREN")r.push(e.length-1),i.push(e.length-1);else if(c=="CLOSE_PAREN")r.length===0&&n("no matching open bracket"),l.match=r.pop(),e[l.match].match=e.length-1,l.depth--,l.linkBack=i.pop(),e[l.linkBack].linkNext=e.length-1;else if(c==="COMMA")l.linkBack=i.pop(),e[l.linkBack].linkNext=e.length-1,i.push(e.length-1);else if(c==="OPEN_BRACKET")l.type="BRACKET";else if(c==="CLOSE_BRACKET"){let u=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const f=e.pop().text;u=f+u,e[e.length-1].value=Qt(f)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=u}continue}if(a=o.match(d_e),a){if(l.text=a[1],s+=l.text.length,a_e.has(l.text)){l.type="KEYWORD";continue}if(l.text.match(Oie)){l.type="TYPE";continue}l.type="ID";continue}if(a=o.match(u_e),a){l.text=a[1],l.type="NUMBER",s+=l.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${s}`)}return new Il(e.map(o=>Object.freeze(o)))}function BH(t,e){let n=[];for(const r in e.keys())t.has(r)&&n.push(r);if(n.length>1)throw new Error(`conflicting types: ${n.join(", ")}`)}function m2(t,e){if(e.peekKeyword(Iie)){const n=e.pop().text;if(n!==t)throw new Error(`expected ${t}, got ${n}`)}return e.popType("ID")}function ud(t,e){const n=new Set;for(;;){const r=t.peekType("KEYWORD");if(r==null||e&&!e.has(r))break;if(t.pop(),n.has(r))throw new Error(`duplicate keywords: ${JSON.stringify(r)}`);n.add(r)}return Object.freeze(n)}function Mie(t){let e=ud(t,r_e);return BH(e,Gs("constant payable nonpayable".split(" "))),BH(e,Gs("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function Xu(t,e){return t.popParams().map(n=>ls.from(n,e))}function Die(t){if(t.peekType("AT")){if(t.pop(),t.peekType("NUMBER"))return Et(t.pop().text);throw new Error("invalid gas")}return null}function dm(t){if(t.length)throw new Error(`unexpected tokens at offset ${t.offset}: ${t.toString()}`)}const f_e=new RegExp(/^(.*)\[([0-9]*)\]$/);function UH(t){const e=t.match(Oie);if(xe(e,"invalid type","type",t),t==="uint")return"uint256";if(t==="int")return"int256";if(e[2]){const n=parseInt(e[2]);xe(n!==0&&n<=32,"invalid bytes length","type",t)}else if(e[3]){const n=parseInt(e[3]);xe(n!==0&&n<=256&&n%8===0,"invalid numeric width","type",t)}return t}const Mr={},xo=Symbol.for("_ethers_internal"),FH="_ParamTypeInternal",$H="_ErrorInternal",zH="_EventInternal",HH="_ConstructorInternal",VH="_FallbackInternal",qH="_FunctionInternal",GH="_StructInternal";var My,aT;const Aa=class Aa{constructor(e,n,r,i,s,o,a,l){Be(this,My);Se(this,"name");Se(this,"type");Se(this,"baseType");Se(this,"indexed");Se(this,"components");Se(this,"arrayLength");Se(this,"arrayChildren");if(ph(e,Mr,"ParamType"),Object.defineProperty(this,xo,{value:FH}),o&&(o=Object.freeze(o.slice())),i==="array"){if(a==null||l==null)throw new Error("")}else if(a!=null||l!=null)throw new Error("");if(i==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");Mt(this,{name:n,type:r,baseType:i,indexed:s,components:o,arrayLength:a,arrayChildren:l})}format(e){if(e==null&&(e="sighash"),e==="json"){const r=this.name||"";if(this.isArray()){const s=JSON.parse(this.arrayChildren.format("json"));return s.name=r,s.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(s)}const i={type:this.baseType==="tuple"?"tuple":this.type,name:r};return typeof this.indexed=="boolean"&&(i.indexed=this.indexed),this.isTuple()&&(i.components=this.components.map(s=>JSON.parse(s.format(e)))),JSON.stringify(i)}let n="";return this.isArray()?(n+=this.arrayChildren.format(e),n+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?n+="("+this.components.map(r=>r.format(e)).join(e==="full"?", ":",")+")":n+=this.type,e!=="sighash"&&(this.indexed===!0&&(n+=" indexed"),e==="full"&&this.name&&(n+=" "+this.name)),n}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,n){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const r=this;return e.map(i=>r.arrayChildren.walk(i,n))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const r=this;return e.map((i,s)=>r.components[s].walk(i,n))}return n(this.type,e)}async walkAsync(e,n){const r=[],i=[e];return tt(this,My,aT).call(this,r,e,n,s=>{i[0]=s}),r.length&&await Promise.all(r),i[0]}static from(e,n){if(Aa.isParamType(e))return e;if(typeof e=="string")try{return Aa.from(gh(e),n)}catch{xe(!1,"invalid param type","obj",e)}else if(e instanceof Il){let a="",l="",c=null;ud(e,Gs(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(l="tuple",c=e.popParams().map(x=>Aa.from(x)),a=`tuple(${c.map(x=>x.format()).join(",")})`):(a=UH(e.popType("TYPE")),l=a);let u=null,f=null;for(;e.length&&e.peekType("BRACKET");){const x=e.pop();u=new Aa(Mr,"",a,l,null,c,f,u),f=x.value,a+=x.text,l="array",c=null}let m=null;if(ud(e,i_e).has("indexed")){if(!n)throw new Error("");m=!0}const v=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new Aa(Mr,v,a,l,m,c,f,u)}const r=e.name;xe(!r||typeof r=="string"&&r.match(Rie),"invalid name","obj.name",r);let i=e.indexed;i!=null&&(xe(n,"parameter cannot be indexed","obj.indexed",e.indexed),i=!!i);let s=e.type,o=s.match(f_e);if(o){const a=parseInt(o[2]||"-1"),l=Aa.from({type:o[1],components:e.components});return new Aa(Mr,r||"",s,"array",i,null,a,l)}if(s==="tuple"||s.startsWith("tuple(")||s.startsWith("(")){const a=e.components!=null?e.components.map(c=>Aa.from(c)):null;return new Aa(Mr,r||"",s,"tuple",i,a,null,null)}return s=UH(e.type),new Aa(Mr,r||"",s,s,i,null,null,null)}static isParamType(e){return e&&e[xo]===FH}};My=new WeakSet,aT=function(e,n,r,i){if(this.isArray()){if(!Array.isArray(n))throw new Error("invalid array value");if(this.arrayLength!==-1&&n.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,a=n.slice();a.forEach((l,c)=>{var u;tt(u=o,My,aT).call(u,e,l,r,f=>{a[c]=f})}),i(a);return}if(this.isTuple()){const o=this.components;let a;if(Array.isArray(n))a=n.slice();else{if(n==null||typeof n!="object")throw new Error("invalid tuple value");a=o.map(l=>{if(!l.name)throw new Error("cannot use object value with unnamed components");if(!(l.name in n))throw new Error(`missing value for component ${l.name}`);return n[l.name]})}if(a.length!==this.components.length)throw new Error("array is wrong length");a.forEach((l,c)=>{var u;tt(u=o[c],My,aT).call(u,e,l,r,f=>{a[c]=f})}),i(a);return}const s=r(this.type,n);s.then?e.push((async function(){i(await s)})()):i(s)};let ls=Aa;class fm{constructor(e,n,r){Se(this,"type");Se(this,"inputs");ph(e,Mr,"Fragment"),r=Object.freeze(r.slice()),Mt(this,{type:n,inputs:r})}static from(e){if(typeof e=="string"){try{fm.from(JSON.parse(e))}catch{}return fm.from(gh(e))}if(e instanceof Il)switch(e.peekKeyword(Iie)){case"constructor":return Vu.from(e);case"error":return uo.from(e);case"event":return pc.from(e);case"fallback":case"receive":return Au.from(e);case"function":return mc.from(e);case"struct":return em.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return Vu.from(e);case"error":return uo.from(e);case"event":return pc.from(e);case"fallback":case"receive":return Au.from(e);case"function":return mc.from(e);case"struct":return em.from(e)}Ke(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}xe(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return Vu.isFragment(e)}static isError(e){return uo.isFragment(e)}static isEvent(e){return pc.isFragment(e)}static isFunction(e){return mc.isFragment(e)}static isStruct(e){return em.isFragment(e)}}class g2 extends fm{constructor(n,r,i,s){super(n,r,s);Se(this,"name");xe(typeof i=="string"&&i.match(Rie),"invalid identifier","name",i),s=Object.freeze(s.slice()),Mt(this,{name:i})}}function kw(t,e){return"("+e.map(n=>n.format(t)).join(t==="full"?", ":",")+")"}class uo extends g2{constructor(e,n,r){super(e,"error",n,r),Object.defineProperty(this,xo,{value:$H})}get selector(){return cd(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const n=[];return e!=="sighash"&&n.push("error"),n.push(this.name+kw(e,this.inputs)),n.join(" ")}static from(e){if(uo.isFragment(e))return e;if(typeof e=="string")return uo.from(gh(e));if(e instanceof Il){const n=m2("error",e),r=Xu(e);return dm(e),new uo(Mr,n,r)}return new uo(Mr,e.name,e.inputs?e.inputs.map(ls.from):[])}static isFragment(e){return e&&e[xo]===$H}}class pc extends g2{constructor(n,r,i,s){super(n,"event",r,i);Se(this,"anonymous");Object.defineProperty(this,xo,{value:zH}),Mt(this,{anonymous:s})}get topicHash(){return cd(this.format("sighash"))}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(i=>JSON.parse(i.format(n)))});const r=[];return n!=="sighash"&&r.push("event"),r.push(this.name+kw(n,this.inputs)),n!=="sighash"&&this.anonymous&&r.push("anonymous"),r.join(" ")}static getTopicHash(n,r){return r=(r||[]).map(s=>ls.from(s)),new pc(Mr,n,r,!1).topicHash}static from(n){if(pc.isFragment(n))return n;if(typeof n=="string")try{return pc.from(gh(n))}catch{xe(!1,"invalid event fragment","obj",n)}else if(n instanceof Il){const r=m2("event",n),i=Xu(n,!0),s=!!ud(n,Gs(["anonymous"])).has("anonymous");return dm(n),new pc(Mr,r,i,s)}return new pc(Mr,n.name,n.inputs?n.inputs.map(r=>ls.from(r,!0)):[],!!n.anonymous)}static isFragment(n){return n&&n[xo]===zH}}class Vu extends fm{constructor(n,r,i,s,o){super(n,r,i);Se(this,"payable");Se(this,"gas");Object.defineProperty(this,xo,{value:HH}),Mt(this,{payable:s,gas:o})}format(n){if(Ke(n!=null&&n!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),n==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(i=>JSON.parse(i.format(n)))});const r=[`constructor${kw(n,this.inputs)}`];return this.payable&&r.push("payable"),this.gas!=null&&r.push(`@${this.gas.toString()}`),r.join(" ")}static from(n){if(Vu.isFragment(n))return n;if(typeof n=="string")try{return Vu.from(gh(n))}catch{xe(!1,"invalid constuctor fragment","obj",n)}else if(n instanceof Il){ud(n,Gs(["constructor"]));const r=Xu(n),i=!!ud(n,n_e).has("payable"),s=Die(n);return dm(n),new Vu(Mr,"constructor",r,i,s)}return new Vu(Mr,"constructor",n.inputs?n.inputs.map(ls.from):[],!!n.payable,n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[xo]===HH}}class Au extends fm{constructor(n,r,i){super(n,"fallback",r);Se(this,"payable");Object.defineProperty(this,xo,{value:VH}),Mt(this,{payable:i})}format(n){const r=this.inputs.length===0?"receive":"fallback";if(n==="json"){const i=this.payable?"payable":"nonpayable";return JSON.stringify({type:r,stateMutability:i})}return`${r}()${this.payable?" payable":""}`}static from(n){if(Au.isFragment(n))return n;if(typeof n=="string")try{return Au.from(gh(n))}catch{xe(!1,"invalid fallback fragment","obj",n)}else if(n instanceof Il){const r=n.toString(),i=n.peekKeyword(Gs(["fallback","receive"]));if(xe(i,"type must be fallback or receive","obj",r),n.popKeyword(Gs(["fallback","receive"]))==="receive"){const l=Xu(n);return xe(l.length===0,"receive cannot have arguments","obj.inputs",l),ud(n,Gs(["payable"])),dm(n),new Au(Mr,[],!0)}let o=Xu(n);o.length?xe(o.length===1&&o[0].type==="bytes","invalid fallback inputs","obj.inputs",o.map(l=>l.format("minimal")).join(", ")):o=[ls.from("bytes")];const a=Mie(n);if(xe(a==="nonpayable"||a==="payable","fallback cannot be constants","obj.stateMutability",a),ud(n,Gs(["returns"])).has("returns")){const l=Xu(n);xe(l.length===1&&l[0].type==="bytes","invalid fallback outputs","obj.outputs",l.map(c=>c.format("minimal")).join(", "))}return dm(n),new Au(Mr,o,a==="payable")}if(n.type==="receive")return new Au(Mr,[],!0);if(n.type==="fallback"){const r=[ls.from("bytes")],i=n.stateMutability==="payable";return new Au(Mr,r,i)}xe(!1,"invalid fallback description","obj",n)}static isFragment(n){return n&&n[xo]===VH}}class mc extends g2{constructor(n,r,i,s,o,a){super(n,"function",r,s);Se(this,"constant");Se(this,"outputs");Se(this,"stateMutability");Se(this,"payable");Se(this,"gas");Object.defineProperty(this,xo,{value:qH}),o=Object.freeze(o.slice()),Mt(this,{constant:i==="view"||i==="pure",gas:a,outputs:o,payable:i==="payable",stateMutability:i})}get selector(){return cd(this.format("sighash")).substring(0,10)}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(i=>JSON.parse(i.format(n))),outputs:this.outputs.map(i=>JSON.parse(i.format(n)))});const r=[];return n!=="sighash"&&r.push("function"),r.push(this.name+kw(n,this.inputs)),n!=="sighash"&&(this.stateMutability!=="nonpayable"&&r.push(this.stateMutability),this.outputs&&this.outputs.length&&(r.push("returns"),r.push(kw(n,this.outputs))),this.gas!=null&&r.push(`@${this.gas.toString()}`)),r.join(" ")}static getSelector(n,r){return r=(r||[]).map(s=>ls.from(s)),new mc(Mr,n,"view",r,[],null).selector}static from(n){if(mc.isFragment(n))return n;if(typeof n=="string")try{return mc.from(gh(n))}catch{xe(!1,"invalid function fragment","obj",n)}else if(n instanceof Il){const i=m2("function",n),s=Xu(n),o=Mie(n);let a=[];ud(n,Gs(["returns"])).has("returns")&&(a=Xu(n));const l=Die(n);return dm(n),new mc(Mr,i,o,s,a,l)}let r=n.stateMutability;return r==null&&(r="payable",typeof n.constant=="boolean"?(r="view",n.constant||(r="payable",typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable"))):typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable")),new mc(Mr,n.name,r,n.inputs?n.inputs.map(ls.from):[],n.outputs?n.outputs.map(ls.from):[],n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[xo]===qH}}class em extends g2{constructor(e,n,r){super(e,"struct",n,r),Object.defineProperty(this,xo,{value:GH})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return em.from(gh(e))}catch{xe(!1,"invalid struct fragment","obj",e)}else if(e instanceof Il){const n=m2("struct",e),r=Xu(e);return dm(e),new em(Mr,n,r)}return new em(Mr,e.name,e.inputs?e.inputs.map(ls.from):[])}static isFragment(e){return e&&e[xo]===GH}}const jl=new Map;jl.set(0,"GENERIC_PANIC");jl.set(1,"ASSERT_FALSE");jl.set(17,"OVERFLOW");jl.set(18,"DIVIDE_BY_ZERO");jl.set(33,"ENUM_RANGE_ERROR");jl.set(34,"BAD_STORAGE_DATA");jl.set(49,"STACK_UNDERFLOW");jl.set(50,"ARRAY_RANGE_ERROR");jl.set(65,"OUT_OF_MEMORY");jl.set(81,"UNINITIALIZED_FUNCTION_CALL");const h_e=new RegExp(/^bytes([0-9]*)$/),p_e=new RegExp(/^(u?int)([0-9]*)$/);let sR=null,KH=1024;function m_e(t,e,n,r){let i="missing revert data",s=null;const o=null;let a=null;if(n){i="execution reverted";const c=pt(n);if(n=rt(n),c.length===0)i+=" (no data present; likely require(false) occurred",s="require(false)";else if(c.length%32!==4)i+=" (could not decode reason; invalid data length)";else if(rt(c.slice(0,4))==="0x08c379a0")try{s=r.decode(["string"],c.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[s]},i+=`: ${JSON.stringify(s)}`}catch{i+=" (could not decode reason; invalid string data)"}else if(rt(c.slice(0,4))==="0x4e487b71")try{const u=Number(r.decode(["uint256"],c.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[u]},s=`Panic due to ${jl.get(u)||"UNKNOWN"}(${u})`,i+=`: ${s}`}catch{i+=" (could not decode panic code)"}else i+=" (unknown custom error)"}const l={to:e.to?yn(e.to):null,data:e.data||"0x"};return e.from&&(l.from=yn(e.from)),Pr(i,"CALL_EXCEPTION",{action:t,data:n,reason:s,transaction:l,invocation:o,revert:a})}var jf,dg;const zC=class zC{constructor(){Be(this,jf)}getDefaultValue(e){const n=e.map(i=>tt(this,jf,dg).call(this,ls.from(i)));return new KS(n,"_").defaultValue()}encode(e,n){Ine(n.length,e.length,"types/values length mismatch");const r=e.map(o=>tt(this,jf,dg).call(this,ls.from(o))),i=new KS(r,"_"),s=new P4;return i.encode(s,n),s.data}decode(e,n,r){const i=e.map(o=>tt(this,jf,dg).call(this,ls.from(o)));return new KS(i,"_").decode(new R4(n,r,KH))}static _setDefaultMaxInflation(e){xe(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),KH=e}static defaultAbiCoder(){return sR==null&&(sR=new zC),sR}static getBuiltinCallException(e,n,r){return m_e(e,n,r,zC.defaultAbiCoder())}};jf=new WeakSet,dg=function(e){if(e.isArray())return new M2e(tt(this,jf,dg).call(this,e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new KS(e.components.map(r=>tt(this,jf,dg).call(this,r)),e.name);switch(e.baseType){case"address":return new R2e(e.name);case"bool":return new D2e(e.name);case"string":return new V2e(e.name);case"bytes":return new L2e(e.name);case"":return new U2e(e.name)}let n=e.type.match(p_e);if(n){let r=parseInt(n[2]||"256");return xe(r!==0&&r<=256&&r%8===0,"invalid "+n[1]+" bit length","param",e),new H2e(r/8,n[1]==="int",e.name)}if(n=e.type.match(h_e),n){let r=parseInt(n[1]);return xe(r!==0&&r<=32,"invalid bytes length","param",e),new j2e(r,e.name)}xe(!1,"invalid type","type",e.type)};let Cw=zC;class g_e{constructor(e,n,r){Se(this,"fragment");Se(this,"name");Se(this,"signature");Se(this,"topic");Se(this,"args");const i=e.name,s=e.format();Mt(this,{fragment:e,name:i,signature:s,topic:n,args:r})}}class y_e{constructor(e,n,r,i){Se(this,"fragment");Se(this,"name");Se(this,"args");Se(this,"signature");Se(this,"selector");Se(this,"value");const s=e.name,o=e.format();Mt(this,{fragment:e,name:s,args:r,signature:o,selector:n,value:i})}}class x_e{constructor(e,n,r){Se(this,"fragment");Se(this,"name");Se(this,"args");Se(this,"signature");Se(this,"selector");const i=e.name,s=e.format();Mt(this,{fragment:e,name:i,args:r,signature:s,selector:n})}}class WH{constructor(e){Se(this,"hash");Se(this,"_isIndexed");Mt(this,{hash:e,_isIndexed:!0})}static isIndexed(e){return!!(e&&e._isIndexed)}}const YH={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},JH={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:t=>`reverted with reason string ${JSON.stringify(t)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:t=>{let e="unknown panic code";return t>=0&&t<=255&&YH[t.toString()]&&(e=YH[t.toString()]),`reverted with panic code 0x${t.toString(16)} (${e})`}}};var sc,oc,ac,xs,_c,lT,cT;const dp=class dp{constructor(e){Be(this,_c);Se(this,"fragments");Se(this,"deploy");Se(this,"fallback");Se(this,"receive");Be(this,sc);Be(this,oc);Be(this,ac);Be(this,xs);let n=[];typeof e=="string"?n=JSON.parse(e):n=e,ge(this,ac,new Map),ge(this,sc,new Map),ge(this,oc,new Map);const r=[];for(const o of n)try{r.push(fm.from(o))}catch(a){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,a.message)}Mt(this,{fragments:Object.freeze(r)});let i=null,s=!1;ge(this,xs,this.getAbiCoder()),this.fragments.forEach((o,a)=>{let l;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}Mt(this,{deploy:o});return;case"fallback":o.inputs.length===0?s=!0:(xe(!i||o.payable!==i.payable,"conflicting fallback fragments",`fragments[${a}]`,o),i=o,s=i.payable);return;case"function":l=ie(this,ac);break;case"event":l=ie(this,oc);break;case"error":l=ie(this,sc);break;default:return}const c=o.format();l.has(c)||l.set(c,o)}),this.deploy||Mt(this,{deploy:Vu.from("constructor()")}),Mt(this,{fallback:i,receive:s})}format(e){const n=e?"minimal":"full";return this.fragments.map(i=>i.format(n))}formatJson(){const e=this.fragments.map(n=>n.format("json"));return JSON.stringify(e.map(n=>JSON.parse(n)))}getAbiCoder(){return Cw.defaultAbiCoder()}getFunctionName(e){const n=tt(this,_c,lT).call(this,e,null,!1);return xe(n,"no matching function","key",e),n.name}hasFunction(e){return!!tt(this,_c,lT).call(this,e,null,!1)}getFunction(e,n){return tt(this,_c,lT).call(this,e,n||null,!0)}forEachFunction(e){const n=Array.from(ie(this,ac).keys());n.sort((r,i)=>r.localeCompare(i));for(let r=0;r<n.length;r++){const i=n[r];e(ie(this,ac).get(i),r)}}getEventName(e){const n=tt(this,_c,cT).call(this,e,null,!1);return xe(n,"no matching event","key",e),n.name}hasEvent(e){return!!tt(this,_c,cT).call(this,e,null,!1)}getEvent(e,n){return tt(this,_c,cT).call(this,e,n||null,!0)}forEachEvent(e){const n=Array.from(ie(this,oc).keys());n.sort((r,i)=>r.localeCompare(i));for(let r=0;r<n.length;r++){const i=n[r];e(ie(this,oc).get(i),r)}}getError(e,n){if(gr(e)){const i=e.toLowerCase();if(JH[i])return uo.from(JH[i].signature);for(const s of ie(this,sc).values())if(i===s.selector)return s;return null}if(e.indexOf("(")===-1){const i=[];for(const[s,o]of ie(this,sc))s.split("(")[0]===e&&i.push(o);if(i.length===0)return e==="Error"?uo.from("error Error(string)"):e==="Panic"?uo.from("error Panic(uint256)"):null;if(i.length>1){const s=i.map(o=>JSON.stringify(o.format())).join(", ");xe(!1,`ambiguous error description (i.e. ${s})`,"name",e)}return i[0]}if(e=uo.from(e).format(),e==="Error(string)")return uo.from("error Error(string)");if(e==="Panic(uint256)")return uo.from("error Panic(uint256)");const r=ie(this,sc).get(e);return r||null}forEachError(e){const n=Array.from(ie(this,sc).keys());n.sort((r,i)=>r.localeCompare(i));for(let r=0;r<n.length;r++){const i=n[r];e(ie(this,sc).get(i),r)}}_decodeParams(e,n){return ie(this,xs).decode(e,n)}_encodeParams(e,n){return ie(this,xs).encode(e,n)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);xe(r,"unknown error","fragment",e),e=r}return xe(mr(n,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",n),this._decodeParams(e.inputs,mr(n,4))}encodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);xe(r,"unknown error","fragment",e),e=r}return On([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);xe(r,"unknown function","fragment",e),e=r}return xe(mr(n,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",n),this._decodeParams(e.inputs,mr(n,4))}encodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);xe(r,"unknown function","fragment",e),e=r}return On([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionResult(e,n){if(typeof e=="string"){const s=this.getFunction(e);xe(s,"unknown function","fragment",e),e=s}let r="invalid length for result data";const i=as(n);if(i.length%32===0)try{return ie(this,xs).decode(e.outputs,i)}catch{r="could not decode result data"}Ke(!1,r,"BAD_DATA",{value:rt(i),info:{method:e.name,signature:e.format()}})}makeError(e,n){const r=pt(e,"data"),i=Cw.getBuiltinCallException("call",n,r);if(i.message.startsWith("execution reverted (unknown custom error)")){const a=rt(r.slice(0,4)),l=this.getError(a);if(l)try{const c=ie(this,xs).decode(l.inputs,r.slice(4));i.revert={name:l.name,signature:l.format(),args:c},i.reason=i.revert.signature,i.message=`execution reverted: ${i.reason}`}catch{i.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(n);return o&&(i.invocation={method:o.name,signature:o.signature,args:o.args}),i}encodeFunctionResult(e,n){if(typeof e=="string"){const r=this.getFunction(e);xe(r,"unknown function","fragment",e),e=r}return rt(ie(this,xs).encode(e.outputs,n||[]))}encodeFilterTopics(e,n){if(typeof e=="string"){const s=this.getEvent(e);xe(s,"unknown event","eventFragment",e),e=s}Ke(n.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:n.length,expectedCount:e.inputs.length});const r=[];e.anonymous||r.push(e.topicHash);const i=(s,o)=>s.type==="string"?cd(o):s.type==="bytes"?Kn(rt(o)):(s.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":s.type.match(/^u?int/)?o=ad(o):s.type.match(/^bytes/)?o=vke(o,32):s.type==="address"&&ie(this,xs).encode(["address"],[o]),od(rt(o),32));for(n.forEach((s,o)=>{const a=e.inputs[o];if(!a.indexed){xe(s==null,"cannot filter non-indexed parameters; must be null","contract."+a.name,s);return}s==null?r.push(null):a.baseType==="array"||a.baseType==="tuple"?xe(!1,"filtering with tuples or arrays not supported","contract."+a.name,s):Array.isArray(s)?r.push(s.map(l=>i(a,l))):r.push(i(a,s))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(e,n){if(typeof e=="string"){const o=this.getEvent(e);xe(o,"unknown event","eventFragment",e),e=o}const r=[],i=[],s=[];return e.anonymous||r.push(e.topicHash),xe(n.length===e.inputs.length,"event arguments/values mismatch","values",n),e.inputs.forEach((o,a)=>{const l=n[a];if(o.indexed)if(o.type==="string")r.push(cd(l));else if(o.type==="bytes")r.push(Kn(l));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");r.push(ie(this,xs).encode([o.type],[l]))}else i.push(o),s.push(l)}),{data:ie(this,xs).encode(i,s),topics:r}}decodeEventLog(e,n,r){if(typeof e=="string"){const g=this.getEvent(e);xe(g,"unknown event","eventFragment",e),e=g}if(r!=null&&!e.anonymous){const g=e.topicHash;xe(gr(r[0],32)&&r[0].toLowerCase()===g,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}const i=[],s=[],o=[];e.inputs.forEach((g,v)=>{g.indexed?g.type==="string"||g.type==="bytes"||g.baseType==="tuple"||g.baseType==="array"?(i.push(ls.from({type:"bytes32",name:g.name})),o.push(!0)):(i.push(g),o.push(!1)):(s.push(g),o.push(!1))});const a=r!=null?ie(this,xs).decode(i,On(r)):null,l=ie(this,xs).decode(s,n,!0),c=[],u=[];let f=0,m=0;return e.inputs.forEach((g,v)=>{let x=null;if(g.indexed)if(a==null)x=new WH(null);else if(o[v])x=new WH(a[m++]);else try{x=a[m++]}catch(b){x=b}else try{x=l[f++]}catch(b){x=b}c.push(x),u.push(g.name||null)}),nx.fromItems(c,u)}parseTransaction(e){const n=pt(e.data,"tx.data"),r=Et(e.value!=null?e.value:0,"tx.value"),i=this.getFunction(rt(n.slice(0,4)));if(!i)return null;const s=ie(this,xs).decode(i.inputs,n.slice(4));return new y_e(i,i.selector,s,r)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const n=this.getEvent(e.topics[0]);return!n||n.anonymous?null:new g_e(n,n.topicHash,this.decodeEventLog(n,e.data,e.topics))}parseError(e){const n=rt(e),r=this.getError(mr(n,0,4));if(!r)return null;const i=ie(this,xs).decode(r.inputs,mr(n,4));return new x_e(r,r.selector,i)}static from(e){return e instanceof dp?e:typeof e=="string"?new dp(JSON.parse(e)):typeof e.formatJson=="function"?new dp(e.formatJson()):typeof e.format=="function"?new dp(e.format("json")):new dp(e)}};sc=new WeakMap,oc=new WeakMap,ac=new WeakMap,xs=new WeakMap,_c=new WeakSet,lT=function(e,n,r){if(gr(e)){const s=e.toLowerCase();for(const o of ie(this,ac).values())if(s===o.selector)return o;return null}if(e.indexOf("(")===-1){const s=[];for(const[o,a]of ie(this,ac))o.split("(")[0]===e&&s.push(a);if(n){const o=n.length>0?n[n.length-1]:null;let a=n.length,l=!0;Is.isTyped(o)&&o.type==="overrides"&&(l=!1,a--);for(let c=s.length-1;c>=0;c--){const u=s[c].inputs.length;u!==a&&(!l||u!==a-1)&&s.splice(c,1)}for(let c=s.length-1;c>=0;c--){const u=s[c].inputs;for(let f=0;f<n.length;f++)if(Is.isTyped(n[f])){if(f>=u.length){if(n[f].type==="overrides")continue;s.splice(c,1);break}if(n[f].type!==u[f].baseType){s.splice(c,1);break}}}}if(s.length===1&&n&&n.length!==s[0].inputs.length){const o=n[n.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&s.splice(0,1)}if(s.length===0)return null;if(s.length>1&&r){const o=s.map(a=>JSON.stringify(a.format())).join(", ");xe(!1,`ambiguous function description (i.e. matches ${o})`,"key",e)}return s[0]}const i=ie(this,ac).get(mc.from(e).format());return i||null},cT=function(e,n,r){if(gr(e)){const s=e.toLowerCase();for(const o of ie(this,oc).values())if(s===o.topicHash)return o;return null}if(e.indexOf("(")===-1){const s=[];for(const[o,a]of ie(this,oc))o.split("(")[0]===e&&s.push(a);if(n){for(let o=s.length-1;o>=0;o--)s[o].inputs.length<n.length&&s.splice(o,1);for(let o=s.length-1;o>=0;o--){const a=s[o].inputs;for(let l=0;l<n.length;l++)if(Is.isTyped(n[l])&&n[l].type!==a[l].baseType){s.splice(o,1);break}}}if(s.length===0)return null;if(s.length>1&&r){const o=s.map(a=>JSON.stringify(a.format())).join(", ");xe(!1,`ambiguous event description (i.e. matches ${o})`,"key",e)}return s[0]}const i=ie(this,oc).get(pc.from(e).format());return i||null};let K4=dp;const Lie=BigInt(0);function Kg(t){return t??null}function ti(t){return t==null?null:t.toString()}class XH{constructor(e,n,r){Se(this,"gasPrice");Se(this,"maxFeePerGas");Se(this,"maxPriorityFeePerGas");Mt(this,{gasPrice:Kg(e),maxFeePerGas:Kg(n),maxPriorityFeePerGas:Kg(r)})}toJSON(){const{gasPrice:e,maxFeePerGas:n,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:ti(e),maxFeePerGas:ti(n),maxPriorityFeePerGas:ti(r)}}}function Nw(t){const e={};t.to&&(e.to=t.to),t.from&&(e.from=t.from),t.data&&(e.data=rt(t.data));const n="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const i of n)!(i in t)||t[i]==null||(e[i]=Et(t[i],`request.${i}`));const r="type,nonce".split(/,/);for(const i of r)!(i in t)||t[i]==null||(e[i]=Qt(t[i],`request.${i}`));return t.accessList&&(e.accessList=Rm(t.accessList)),t.authorizationList&&(e.authorizationList=t.authorizationList.slice()),"blockTag"in t&&(e.blockTag=t.blockTag),"enableCcipRead"in t&&(e.enableCcipRead=!!t.enableCcipRead),"customData"in t&&(e.customData=t.customData),"blobVersionedHashes"in t&&t.blobVersionedHashes&&(e.blobVersionedHashes=t.blobVersionedHashes.slice()),"kzg"in t&&(e.kzg=t.kzg),"blobWrapperVersion"in t&&(e.blobWrapperVersion=t.blobWrapperVersion),"blobs"in t&&t.blobs&&(e.blobs=t.blobs.map(i=>i2(i)?rt(i):Object.assign({},i))),e}var Ru;class v_e{constructor(e,n){Se(this,"provider");Se(this,"number");Se(this,"hash");Se(this,"timestamp");Se(this,"parentHash");Se(this,"parentBeaconBlockRoot");Se(this,"nonce");Se(this,"difficulty");Se(this,"gasLimit");Se(this,"gasUsed");Se(this,"stateRoot");Se(this,"receiptsRoot");Se(this,"blobGasUsed");Se(this,"excessBlobGas");Se(this,"miner");Se(this,"prevRandao");Se(this,"extraData");Se(this,"baseFeePerGas");Be(this,Ru);ge(this,Ru,e.transactions.map(r=>typeof r!="string"?new _w(r,n):r)),Mt(this,{provider:n,hash:Kg(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:Kg(e.prevRandao),extraData:e.extraData,baseFeePerGas:Kg(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return ie(this,Ru).map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){const e=ie(this,Ru).slice();return e.length===0?[]:(Ke(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:n,extraData:r,gasLimit:i,gasUsed:s,hash:o,miner:a,prevRandao:l,nonce:c,number:u,parentHash:f,parentBeaconBlockRoot:m,stateRoot:g,receiptsRoot:v,timestamp:x,transactions:b}=this;return{_type:"Block",baseFeePerGas:ti(e),difficulty:ti(n),extraData:r,gasLimit:ti(i),gasUsed:ti(s),blobGasUsed:ti(this.blobGasUsed),excessBlobGas:ti(this.excessBlobGas),hash:o,miner:a,prevRandao:l,nonce:c,number:u,parentHash:f,timestamp:x,parentBeaconBlockRoot:m,stateRoot:g,receiptsRoot:v,transactions:b}}[Symbol.iterator](){let e=0;const n=this.transactions;return{next:()=>e<this.length?{value:n[e++],done:!1}:{value:void 0,done:!0}}}get length(){return ie(this,Ru).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let n;if(typeof e=="number")n=ie(this,Ru)[e];else{const r=e.toLowerCase();for(const i of ie(this,Ru))if(typeof i=="string"){if(i!==r)continue;n=i;break}else{if(i.hash!==r)continue;n=i;break}}if(n==null)throw new Error("no such tx");return typeof n=="string"?await this.provider.getTransaction(n):n}getPrefetchedTransaction(e){const n=this.prefetchedTransactions;if(typeof e=="number")return n[e];e=e.toLowerCase();for(const r of n)if(r.hash===e)return r;xe(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return b_e(this)}}Ru=new WeakMap;class D1{constructor(e,n){Se(this,"provider");Se(this,"transactionHash");Se(this,"blockHash");Se(this,"blockNumber");Se(this,"removed");Se(this,"address");Se(this,"data");Se(this,"topics");Se(this,"index");Se(this,"transactionIndex");this.provider=n;const r=Object.freeze(e.topics.slice());Mt(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:r,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:n,blockNumber:r,data:i,index:s,removed:o,topics:a,transactionHash:l,transactionIndex:c}=this;return{_type:"log",address:e,blockHash:n,blockNumber:r,data:i,index:s,removed:o,topics:a,transactionHash:l,transactionIndex:c}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return Ke(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return Ke(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return Ke(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return w_e(this)}}var d1;class jie{constructor(e,n){Se(this,"provider");Se(this,"to");Se(this,"from");Se(this,"contractAddress");Se(this,"hash");Se(this,"index");Se(this,"blockHash");Se(this,"blockNumber");Se(this,"logsBloom");Se(this,"gasUsed");Se(this,"blobGasUsed");Se(this,"cumulativeGasUsed");Se(this,"gasPrice");Se(this,"blobGasPrice");Se(this,"type");Se(this,"status");Se(this,"root");Be(this,d1);ge(this,d1,Object.freeze(e.logs.map(i=>new D1(i,n))));let r=Lie;e.effectiveGasPrice!=null?r=e.effectiveGasPrice:e.gasPrice!=null&&(r=e.gasPrice),Mt(this,{provider:n,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:r,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return ie(this,d1)}toJSON(){const{to:e,from:n,contractAddress:r,hash:i,index:s,blockHash:o,blockNumber:a,logsBloom:l,logs:c,status:u,root:f}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:a,contractAddress:r,cumulativeGasUsed:ti(this.cumulativeGasUsed),from:n,gasPrice:ti(this.gasPrice),blobGasUsed:ti(this.blobGasUsed),blobGasPrice:ti(this.blobGasPrice),gasUsed:ti(this.gasUsed),hash:i,index:s,logs:c,logsBloom:l,root:f,status:u,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return Uie(this)}reorderedEvent(e){return Ke(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),Bie(this,e)}}d1=new WeakMap;var Bf;const o7=class o7{constructor(e,n){Se(this,"provider");Se(this,"blockNumber");Se(this,"blockHash");Se(this,"index");Se(this,"hash");Se(this,"type");Se(this,"to");Se(this,"from");Se(this,"nonce");Se(this,"gasLimit");Se(this,"gasPrice");Se(this,"maxPriorityFeePerGas");Se(this,"maxFeePerGas");Se(this,"maxFeePerBlobGas");Se(this,"data");Se(this,"value");Se(this,"chainId");Se(this,"signature");Se(this,"accessList");Se(this,"blobVersionedHashes");Se(this,"authorizationList");Be(this,Bf);this.provider=n,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,this.authorizationList=e.authorizationList!=null?e.authorizationList:null,ge(this,Bf,-1)}toJSON(){const{blockNumber:e,blockHash:n,index:r,hash:i,type:s,to:o,from:a,nonce:l,data:c,signature:u,accessList:f,blobVersionedHashes:m}=this;return{_type:"TransactionResponse",accessList:f,blockNumber:e,blockHash:n,blobVersionedHashes:m,chainId:ti(this.chainId),data:c,from:a,gasLimit:ti(this.gasLimit),gasPrice:ti(this.gasPrice),hash:i,maxFeePerGas:ti(this.maxFeePerGas),maxPriorityFeePerGas:ti(this.maxPriorityFeePerGas),maxFeePerBlobGas:ti(this.maxFeePerBlobGas),nonce:l,signature:u,to:o,index:r,type:s,value:ti(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const r=await this.getTransaction();r&&(e=r.blockNumber)}if(e==null)return null;const n=this.provider.getBlock(e);if(n==null)throw new Error("TODO");return n}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:n,blockNumber:r}=await Ss({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return n==null||n.blockNumber==null?0:r-n.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,n){const r=e??1,i=n??0;let s=ie(this,Bf),o=-1,a=s===-1;const l=async()=>{if(a)return null;const{blockNumber:m,nonce:g}=await Ss({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(g<this.nonce){s=m;return}if(a)return null;const v=await this.getTransaction();if(!(v&&v.blockNumber!=null))for(o===-1&&(o=s-3,o<ie(this,Bf)&&(o=ie(this,Bf)));o<=m;){if(a)return null;const x=await this.provider.getBlock(o,!0);if(x==null)return;for(const b of x)if(b===this.hash)return;for(let b=0;b<x.length;b++){const E=await x.getTransaction(b);if(E.from===this.from&&E.nonce===this.nonce){if(a)return null;const C=await this.provider.getTransactionReceipt(E.hash);if(C==null||m-C.blockNumber+1<r)return;let k="replaced";E.data===this.data&&E.to===this.to&&E.value===this.value?k="repriced":E.data==="0x"&&E.from===E.to&&E.value===Lie&&(k="cancelled"),Ke(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:k==="replaced"||k==="cancelled",reason:k,replacement:E.replaceableTransaction(s),hash:E.hash,receipt:C})}}o++}},c=m=>{if(m==null||m.status!==0)return m;Ke(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:m.to,from:m.from,data:""},receipt:m})},u=await this.provider.getTransactionReceipt(this.hash);if(r===0)return c(u);if(u){if(r===1||await u.confirmations()>=r)return c(u)}else if(await l(),r===0)return null;return await new Promise((m,g)=>{const v=[],x=()=>{v.forEach(E=>E())};if(v.push(()=>{a=!0}),i>0){const E=setTimeout(()=>{x(),g(Pr("wait for transaction timeout","TIMEOUT"))},i);v.push(()=>{clearTimeout(E)})}const b=async E=>{if(await E.confirmations()>=r){x();try{m(c(E))}catch(C){g(C)}}};if(v.push(()=>{this.provider.off(this.hash,b)}),this.provider.on(this.hash,b),s>=0){const E=async()=>{try{await l()}catch(C){if(os(C,"TRANSACTION_REPLACED")){x(),g(C);return}}a||this.provider.once("block",E)};v.push(()=>{this.provider.off("block",E)}),this.provider.once("block",E)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return Ke(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Uie(this)}reorderedEvent(e){return Ke(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Ke(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Bie(this,e)}replaceableTransaction(e){xe(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const n=new o7(this,this.provider);return ge(n,Bf,e),n}};Bf=new WeakMap;let _w=o7;function b_e(t){return{orphan:"drop-block",hash:t.hash,number:t.number}}function Bie(t,e){return{orphan:"reorder-transaction",tx:t,other:e}}function Uie(t){return{orphan:"drop-transaction",tx:t}}function w_e(t){return{orphan:"drop-log",log:{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,address:t.address,data:t.data,topics:Object.freeze(t.topics.slice()),index:t.index}}}class N8 extends D1{constructor(n,r,i){super(n,n.provider);Se(this,"interface");Se(this,"fragment");Se(this,"args");const s=r.decodeEventLog(i,n.data,n.topics);Mt(this,{args:s,fragment:i,interface:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class Fie extends D1{constructor(n,r){super(n,n.provider);Se(this,"error");Mt(this,{error:r})}}var Dy;class E_e extends jie{constructor(n,r,i){super(i,r);Be(this,Dy);ge(this,Dy,n)}get logs(){return super.logs.map(n=>{const r=n.topics.length?ie(this,Dy).getEvent(n.topics[0]):null;if(r)try{return new N8(n,ie(this,Dy),r)}catch(i){return new Fie(n,i)}return n})}}Dy=new WeakMap;var f1;class _8 extends _w{constructor(n,r,i){super(i,r);Be(this,f1);ge(this,f1,n)}async wait(n,r){const i=await super.wait(n,r);return i==null?null:new E_e(ie(this,f1),this.provider,i)}}f1=new WeakMap;class $ie extends Lne{constructor(n,r,i,s){super(n,r,i);Se(this,"log");Mt(this,{log:s})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class S_e extends $ie{constructor(e,n,r,i,s){super(e,n,r,new N8(s,e.interface,i));const o=e.interface.decodeEventLog(i,this.log.data,this.log.topics);Mt(this,{args:o,fragment:i})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const QH=BigInt(0);function zie(t){return t&&typeof t.call=="function"}function Hie(t){return t&&typeof t.estimateGas=="function"}function y2(t){return t&&typeof t.resolveName=="function"}function Vie(t){return t&&typeof t.sendTransaction=="function"}function qie(t){if(t!=null){if(y2(t))return t;if(t.provider)return t.provider}}var h1;class A_e{constructor(e,n,r){Be(this,h1);Se(this,"fragment");if(Mt(this,{fragment:n}),n.inputs.length<r.length)throw new Error("too many arguments");const i=hm(e.runner,"resolveName"),s=y2(i)?i:null;ge(this,h1,(async function(){const o=await Promise.all(n.inputs.map((a,l)=>r[l]==null?null:a.walkAsync(r[l],(u,f)=>u==="address"?Array.isArray(f)?Promise.all(f.map(m=>Bi(m,s))):Bi(f,s):f)));return e.interface.encodeFilterTopics(n,o)})())}getTopicFilter(){return ie(this,h1)}}h1=new WeakMap;function hm(t,e){return t==null?null:typeof t[e]=="function"?t:t.provider&&typeof t.provider[e]=="function"?t.provider:null}function bp(t){return t==null?null:t.provider||null}async function Gie(t,e){const n=Is.dereference(t,"overrides");xe(typeof n=="object","invalid overrides parameter","overrides",t);const r=Nw(n);return xe(r.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",r.to),xe(r.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",r.data),r.from&&(r.from=r.from),r}async function T_e(t,e,n){const r=hm(t,"resolveName"),i=y2(r)?r:null;return await Promise.all(e.map((s,o)=>s.walkAsync(n[o],(a,l)=>(l=Is.dereference(l,a),a==="address"?Bi(l,i):l))))}function k_e(t){const e=async function(o){const a=await Gie(o,["data"]);a.to=await t.getAddress(),a.from&&(a.from=await Bi(a.from,qie(t.runner)));const l=t.interface,c=Et(a.value||QH,"overrides.value")===QH,u=(a.data||"0x")==="0x";l.fallback&&!l.fallback.payable&&l.receive&&!u&&!c&&xe(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),xe(l.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data);const f=l.receive||l.fallback&&l.fallback.payable;return xe(f||c,"cannot send value to non-payable fallback","overrides.value",a.value),xe(l.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data),a},n=async function(o){const a=hm(t.runner,"call");Ke(zie(a),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const l=await e(o);try{return await a.call(l)}catch(c){throw l8(c)&&c.data?t.interface.makeError(c.data,l):c}},r=async function(o){const a=t.runner;Ke(Vie(a),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const l=await a.sendTransaction(await e(o)),c=bp(t.runner);return new _8(t.interface,c,l)},i=async function(o){const a=hm(t.runner,"estimateGas");return Ke(Hie(a),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await a.estimateGas(await e(o))},s=async o=>await r(o);return Mt(s,{_contract:t,estimateGas:i,populateTransaction:e,send:r,staticCall:n}),s}function C_e(t,e){const n=function(...c){const u=t.interface.getFunction(e,c);return Ke(u,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:c}}),u},r=async function(...c){const u=n(...c);let f={};if(u.inputs.length+1===c.length&&(f=await Gie(c.pop()),f.from&&(f.from=await Bi(f.from,qie(t.runner)))),u.inputs.length!==c.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const m=await T_e(t.runner,u.inputs,c);return Object.assign({},f,await Ss({to:t.getAddress(),data:t.interface.encodeFunctionData(u,m)}))},i=async function(...c){const u=await a(...c);return u.length===1?u[0]:u},s=async function(...c){const u=t.runner;Ke(Vie(u),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const f=await u.sendTransaction(await r(...c)),m=bp(t.runner);return new _8(t.interface,m,f)},o=async function(...c){const u=hm(t.runner,"estimateGas");return Ke(Hie(u),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await u.estimateGas(await r(...c))},a=async function(...c){const u=hm(t.runner,"call");Ke(zie(u),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const f=await r(...c);let m="0x";try{m=await u.call(f)}catch(v){throw l8(v)&&v.data?t.interface.makeError(v.data,f):v}const g=n(...c);return t.interface.decodeFunctionResult(g,m)},l=async(...c)=>n(...c).constant?await i(...c):await s(...c);return Mt(l,{name:t.interface.getFunctionName(e),_contract:t,_key:e,getFragment:n,estimateGas:o,populateTransaction:r,send:s,staticCall:i,staticCallResult:a}),Object.defineProperty(l,"fragment",{configurable:!1,enumerable:!0,get:()=>{const c=t.interface.getFunction(e);return Ke(c,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),c}}),l}function N_e(t,e){const n=function(...i){const s=t.interface.getEvent(e,i);return Ke(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:i}}),s},r=function(...i){return new A_e(t,n(...i),i)};return Mt(r,{name:t.interface.getEventName(e),_contract:t,_key:e,getFragment:n}),Object.defineProperty(r,"fragment",{configurable:!1,enumerable:!0,get:()=>{const i=t.interface.getEvent(e);return Ke(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),i}}),r}const ek=Symbol.for("_ethersInternal_contract"),Kie=new WeakMap;function __e(t,e){Kie.set(t[ek],e)}function Mo(t){return Kie.get(t[ek])}function I_e(t){return t&&typeof t=="object"&&"getTopicFilter"in t&&typeof t.getTopicFilter=="function"&&t.fragment}async function I8(t,e){let n,r=null;if(Array.isArray(e)){const s=function(o){if(gr(o,32))return o;const a=t.interface.getEvent(o);return xe(a,"unknown fragment","name",o),a.topicHash};n=e.map(o=>o==null?null:Array.isArray(o)?o.map(s):s(o))}else e==="*"?n=[null]:typeof e=="string"?gr(e,32)?n=[e]:(r=t.interface.getEvent(e),xe(r,"unknown fragment","event",e),n=[r.topicHash]):I_e(e)?n=await e.getTopicFilter():"fragment"in e?(r=e.fragment,n=[r.topicHash]):xe(!1,"unknown event name","event",e);n=n.map(s=>{if(s==null)return null;if(Array.isArray(s)){const o=Array.from(new Set(s.map(a=>a.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return s.toLowerCase()});const i=n.map(s=>s==null?"null":Array.isArray(s)?s.join("|"):s).join("&");return{fragment:r,tag:i,topics:n}}async function Ob(t,e){const{subs:n}=Mo(t);return n.get((await I8(t,e)).tag)||null}async function ZH(t,e,n){const r=bp(t.runner);Ke(r,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:i,tag:s,topics:o}=await I8(t,n),{addr:a,subs:l}=Mo(t);let c=l.get(s);if(!c){const f={address:a||t,topics:o},m=b=>{let E=i;if(E==null)try{E=t.interface.getEvent(b.topics[0])}catch{}if(E){const C=E,k=i?t.interface.decodeEventLog(i,b.data,b.topics):[];Y4(t,n,k,O=>new S_e(t,O,n,C,b))}else Y4(t,n,[],C=>new $ie(t,C,n,b))};let g=[];c={tag:s,listeners:[],start:()=>{g.length||g.push(r.on(f,m))},stop:async()=>{if(g.length==0)return;let b=g;g=[],await Promise.all(b),r.off(f,m)}},l.set(s,c)}return c}let W4=Promise.resolve();async function P_e(t,e,n,r){await W4;const i=await Ob(t,e);if(!i)return!1;const s=i.listeners.length;return i.listeners=i.listeners.filter(({listener:o,once:a})=>{const l=Array.from(n);r&&l.push(r(a?null:o));try{o.call(t,...l)}catch{}return!a}),i.listeners.length===0&&(i.stop(),Mo(t).subs.delete(i.tag)),s>0}async function Y4(t,e,n,r){try{await W4}catch{}const i=P_e(t,e,n,r);return W4=i,await i}const YS=["then"];var lee;lee=ek;const sw=class sw{constructor(e,n,r,i){Se(this,"target");Se(this,"interface");Se(this,"runner");Se(this,"filters");Se(this,lee);Se(this,"fallback");xe(typeof e=="string"||Xre(e),"invalid value for Contract target","target",e),r==null&&(r=null);const s=K4.from(n);Mt(this,{target:e,runner:r,interface:s}),Object.defineProperty(this,ek,{value:{}});let o,a=null,l=null;if(i){const f=bp(r);l=new _8(this.interface,f,i)}let c=new Map;if(typeof e=="string")if(gr(e))a=e,o=Promise.resolve(e);else{const f=hm(r,"resolveName");if(!y2(f))throw Pr("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=f.resolveName(e).then(m=>{if(m==null)throw Pr("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return Mo(this).addr=m,m})}else o=e.getAddress().then(f=>{if(f==null)throw new Error("TODO");return Mo(this).addr=f,f});__e(this,{addrPromise:o,addr:a,deployTx:l,subs:c});const u=new Proxy({},{get:(f,m,g)=>{if(typeof m=="symbol"||YS.indexOf(m)>=0)return Reflect.get(f,m,g);try{return this.getEvent(m)}catch(v){if(!os(v,"INVALID_ARGUMENT")||v.argument!=="key")throw v}},has:(f,m)=>YS.indexOf(m)>=0?Reflect.has(f,m):Reflect.has(f,m)||this.interface.hasEvent(String(m))});return Mt(this,{filters:u}),Mt(this,{fallback:s.receive||s.fallback?k_e(this):null}),new Proxy(this,{get:(f,m,g)=>{if(typeof m=="symbol"||m in f||YS.indexOf(m)>=0)return Reflect.get(f,m,g);try{return f.getFunction(m)}catch(v){if(!os(v,"INVALID_ARGUMENT")||v.argument!=="key")throw v}},has:(f,m)=>typeof m=="symbol"||m in f||YS.indexOf(m)>=0?Reflect.has(f,m):f.interface.hasFunction(m)})}connect(e){return new sw(this.target,this.interface,e)}attach(e){return new sw(e,this.interface,this.runner)}async getAddress(){return await Mo(this).addrPromise}async getDeployedCode(){const e=bp(this.runner);Ke(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const n=await e.getCode(await this.getAddress());return n==="0x"?null:n}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const r=bp(this.runner);return Ke(r!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((i,s)=>{const o=async()=>{try{if(await this.getDeployedCode()!=null)return i(this);r.once("block",o)}catch(a){s(a)}};o()})}deploymentTransaction(){return Mo(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),C_e(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),N_e(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,n,r){n==null&&(n=0),r==null&&(r="latest");const{addr:i,addrPromise:s}=Mo(this),o=i||await s,{fragment:a,topics:l}=await I8(this,e),c={address:o,topics:l,fromBlock:n,toBlock:r},u=bp(this.runner);return Ke(u,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await u.getLogs(c)).map(f=>{let m=a;if(m==null)try{m=this.interface.getEvent(f.topics[0])}catch{}if(m)try{return new N8(f,this.interface,m)}catch(g){return new Fie(f,g)}return new D1(f,u)})}async on(e,n){const r=await ZH(this,"on",e);return r.listeners.push({listener:n,once:!1}),r.start(),this}async once(e,n){const r=await ZH(this,"once",e);return r.listeners.push({listener:n,once:!0}),r.start(),this}async emit(e,...n){return await Y4(this,e,n,null)}async listenerCount(e){if(e){const i=await Ob(this,e);return i?i.listeners.length:0}const{subs:n}=Mo(this);let r=0;for(const{listeners:i}of n.values())r+=i.length;return r}async listeners(e){if(e){const i=await Ob(this,e);return i?i.listeners.map(({listener:s})=>s):[]}const{subs:n}=Mo(this);let r=[];for(const{listeners:i}of n.values())r=r.concat(i.map(({listener:s})=>s));return r}async off(e,n){const r=await Ob(this,e);if(!r)return this;if(n){const i=r.listeners.map(({listener:s})=>s).indexOf(n);i>=0&&r.listeners.splice(i,1)}return(n==null||r.listeners.length===0)&&(r.stop(),Mo(this).subs.delete(r.tag)),this}async removeAllListeners(e){if(e){const n=await Ob(this,e);if(!n)return this;n.stop(),Mo(this).subs.delete(n.tag)}else{const{subs:n}=Mo(this);for(const{tag:r,stop:i}of n.values())i(),n.delete(r)}return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return await this.off(e,n)}static buildClass(e){class n extends sw{constructor(i,s=null){super(i,e,s)}}return n}static from(e,n,r){return r==null&&(r=null),new this(e,n,r)}};let J4=sw;function R_e(){return J4}class Wg extends R_e(){}function oR(t){return t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):xe(!1,"unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}class O_e{constructor(e){Se(this,"name");Mt(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,n){throw new Error("unsupported coin")}async decodeAddress(e,n){throw new Error("unsupported coin")}}const Wie=new RegExp("^(ipfs)://(.*)$","i"),eV=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),Wie,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var Uf,Up,Ff,fg,HC,Yie;const Dg=class Dg{constructor(e,n,r){Be(this,Ff);Se(this,"provider");Se(this,"address");Se(this,"name");Be(this,Uf);Be(this,Up);Mt(this,{provider:e,address:n,name:r}),ge(this,Uf,null),ge(this,Up,new Wg(n,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e))}async supportsWildcard(){return ie(this,Uf)==null&&ge(this,Uf,(async()=>{try{return await ie(this,Up).supportsInterface("0x9061b923")}catch(e){if(os(e,"CALL_EXCEPTION"))return!1;throw ge(this,Uf,null),e}})()),await ie(this,Uf)}async getAddress(e){if(e==null&&(e=60),e===60)try{const s=await tt(this,Ff,fg).call(this,"addr(bytes32)");return s==null||s===ww?null:s}catch(s){if(os(s,"CALL_EXCEPTION"))return null;throw s}if(e>=0&&e<2147483648){let s=e+2147483648;const o=await tt(this,Ff,fg).call(this,"addr(bytes32,uint)",[s]);if(gr(o,20))return yn(o)}let n=null;for(const s of this.provider.plugins)if(s instanceof O_e&&s.supportsCoinType(e)){n=s;break}if(n==null)return null;const r=await tt(this,Ff,fg).call(this,"addr(bytes32,uint)",[e]);if(r==null||r==="0x")return null;const i=await n.decodeAddress(e,r);if(i!=null)return i;Ke(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:r}})}async getText(e){const n=await tt(this,Ff,fg).call(this,"text(bytes32,string)",[e]);return n==null||n==="0x"?null:n}async getContentHash(){const e=await tt(this,Ff,fg).call(this,"contenthash(bytes32)");if(e==null||e==="0x")return null;const n=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const i=n[1]==="e3010170"?"ipfs":"ipns",s=parseInt(n[4],16);if(n[5].length===s*2)return`${i}://${Dne("0x"+n[2])}`}const r=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&r[1].length===64)return`bzz://${r[1]}`;Ke(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const n=await this.getText("avatar");if(n==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:n});for(let r=0;r<eV.length;r++){const i=n.match(eV[r]);if(i==null)continue;const s=i[1].toLowerCase();switch(s){case"https":case"data":return e.push({type:"url",value:n}),{linkage:e,url:n};case"ipfs":{const o=oR(n);return e.push({type:"ipfs",value:n}),e.push({type:"url",value:o}),{linkage:e,url:o}}case"erc721":case"erc1155":{const o=s==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:s,value:n});const a=await this.getAddress();if(a==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const l=(i[2]||"").split("/");if(l.length!==2)return e.push({type:`!${s}caip`,value:i[2]||""}),{url:null,linkage:e};const c=l[1],u=new Wg(l[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(s==="erc721"){const x=await u.ownerOf(c);if(a!==x)return e.push({type:"!owner",value:x}),{url:null,linkage:e};e.push({type:"owner",value:x})}else if(s==="erc1155"){const x=await u.balanceOf(a,c);if(!x)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:x.toString()})}let f=await u[o](c);if(f==null||f==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:f}),s==="erc1155"&&(f=f.replace("{id}",ad(c,32).substring(2)),e.push({type:"metadata-url-expanded",value:f})),f.match(/^ipfs:/i)&&(f=oR(f)),e.push({type:"metadata-url",value:f});let m={};const g=await new ld(f).send();g.assertOk();try{m=g.bodyJson}catch{try{e.push({type:"!metadata",value:g.bodyText})}catch{const E=g.body;return E&&e.push({type:"!metadata",value:rt(E)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!m)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(m)});let v=m.image;if(typeof v!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!v.match(/^(https:\/\/|data:)/i)){if(v.match(Wie)==null)return e.push({type:"!imageUrl-ipfs",value:v}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:v}),v=oR(v)}return e.push({type:"url",value:v}),{linkage:e,url:v}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){const n=await e.getNetwork(),r=n.getPlugin("org.ethers.plugins.network.Ens");return Ke(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:n}}),r.address}static async fromName(e,n){var i;let r=n;for(;;){if(r===""||r==="."||n!=="eth"&&r==="eth")return null;const s=await tt(i=Dg,HC,Yie).call(i,e,r);if(s!=null){const o=new Dg(e,s,n);return r!==n&&!await o.supportsWildcard()?null:o}r=r.split(".").slice(1).join(".")}}};Uf=new WeakMap,Up=new WeakMap,Ff=new WeakSet,fg=async function(e,n){n=(n||[]).slice();const r=ie(this,Up).interface;n.unshift(q4(this.name));let i=null;await this.supportsWildcard()&&(i=r.getFunction(e),Ke(i,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),n=[WNe(this.name,255),r.encodeFunctionData(i,n)],e="resolve(bytes,bytes)"),n.push({enableCcipRead:!0});try{const s=await ie(this,Up)[e](...n);return i?r.decodeFunctionResult(i,s)[0]:s}catch(s){if(!os(s,"CALL_EXCEPTION"))throw s}return null},HC=new WeakSet,Yie=async function(e,n){const r=await Dg.getEnsAddress(e);try{const s=await new Wg(r,["function resolver(bytes32) view returns (address)"],e).resolver(q4(n),{enableCcipRead:!0});return s===ww?null:s}catch(i){throw i}return null},Be(Dg,HC);let tk=Dg;const tV=BigInt(0);function Nn(t,e){return(function(n){return n==null?e:t(n)})}function Iw(t,e){return(n=>{if(e&&n==null)return null;if(!Array.isArray(n))throw new Error("not an array");return n.map(r=>t(r))})}function L1(t,e){return(n=>{const r={};for(const i in t){let s=i;if(e&&i in e&&!(s in n)){for(const o of e[i])if(o in n){s=o;break}}try{const o=t[i](n[s]);o!==void 0&&(r[i]=o)}catch(o){const a=o instanceof Error?o.message:"not-an-error";Ke(!1,`invalid value for value.${i} (${a})`,"BAD_DATA",{value:n})}}return r})}function M_e(t){switch(t){case!0:case"true":return!0;case!1:case"false":return!1}xe(!1,`invalid boolean; ${JSON.stringify(t)}`,"value",t)}function ux(t){return xe(gr(t,!0),"invalid data","value",t),t}function is(t){return xe(gr(t,32),"invalid hash","value",t),t}const D_e=L1({address:yn,blockHash:is,blockNumber:Qt,data:ux,index:Qt,removed:Nn(M_e,!1),topics:Iw(is),transactionHash:is,transactionIndex:Qt},{index:["logIndex"]});function L_e(t){return D_e(t)}const j_e=L1({hash:Nn(is),parentHash:is,parentBeaconBlockRoot:Nn(is,null),number:Qt,timestamp:Qt,nonce:Nn(ux),difficulty:Et,gasLimit:Et,gasUsed:Et,stateRoot:Nn(is,null),receiptsRoot:Nn(is,null),blobGasUsed:Nn(Et,null),excessBlobGas:Nn(Et,null),miner:Nn(yn),prevRandao:Nn(is,null),extraData:ux,baseFeePerGas:Nn(Et)},{prevRandao:["mixHash"]});function B_e(t){const e=j_e(t);return e.transactions=t.transactions.map(n=>typeof n=="string"?n:Jie(n)),e}const U_e=L1({transactionIndex:Qt,blockNumber:Qt,transactionHash:is,address:yn,topics:Iw(is),data:ux,index:Qt,blockHash:is},{index:["logIndex"]});function F_e(t){return U_e(t)}const $_e=L1({to:Nn(yn,null),from:Nn(yn,null),contractAddress:Nn(yn,null),index:Qt,root:Nn(rt),gasUsed:Et,blobGasUsed:Nn(Et,null),logsBloom:Nn(ux),blockHash:is,hash:is,logs:Iw(F_e),blockNumber:Qt,cumulativeGasUsed:Et,effectiveGasPrice:Nn(Et),blobGasPrice:Nn(Et,null),status:Nn(Qt),type:Nn(Qt,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function z_e(t){return $_e(t)}function Jie(t){t.to&&Et(t.to)===tV&&(t.to="0x0000000000000000000000000000000000000000");const e=L1({hash:is,index:Nn(Qt,void 0),type:n=>n==="0x"||n==null?0:Qt(n),accessList:Nn(Rm,null),blobVersionedHashes:Nn(Iw(is,!0),null),authorizationList:Nn(Iw(n=>{let r;if(n.signature)r=n.signature;else{let i=n.yParity;i==="0x1b"?i=0:i==="0x1c"&&(i=1),r=Object.assign({},n,{yParity:i})}return{address:yn(n.address),chainId:Et(n.chainId),nonce:Et(n.nonce),signature:Ws.from(r)}},!1),null),blockHash:Nn(is,null),blockNumber:Nn(Qt,null),transactionIndex:Nn(Qt,null),from:yn,gasPrice:Nn(Et),maxPriorityFeePerGas:Nn(Et),maxFeePerGas:Nn(Et),maxFeePerBlobGas:Nn(Et,null),gasLimit:Et,to:Nn(yn,null),value:Et,nonce:Qt,data:ux,creates:Nn(yn,null),chainId:Nn(Et,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(t);if(e.to==null&&e.creates==null&&(e.creates=P2e(e)),(t.type===1||t.type===2)&&t.accessList==null&&(e.accessList=[]),t.signature?e.signature=Ws.from(t.signature):e.signature=Ws.from(t),e.chainId==null){const n=e.signature.legacyChainId;n!=null&&(e.chainId=n)}return e.blockHash&&Et(e.blockHash)===tV&&(e.blockHash=null),e}const H_e="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class Ux{constructor(e){Se(this,"name");Mt(this,{name:e})}clone(){return new Ux(this.name)}}class x2 extends Ux{constructor(n,r){n==null&&(n=0);super(`org.ethers.network.plugins.GasCost#${n||0}`);Se(this,"effectiveBlock");Se(this,"txBase");Se(this,"txCreate");Se(this,"txDataZero");Se(this,"txDataNonzero");Se(this,"txAccessListStorageKey");Se(this,"txAccessListAddress");const i={effectiveBlock:n};function s(o,a){let l=(r||{})[o];l==null&&(l=a),xe(typeof l=="number",`invalud value for ${o}`,"costs",r),i[o]=l}s("txBase",21e3),s("txCreate",32e3),s("txDataZero",4),s("txDataNonzero",16),s("txAccessListStorageKey",1900),s("txAccessListAddress",2400),Mt(this,i)}clone(){return new x2(this.effectiveBlock,this)}}class v2 extends Ux{constructor(n,r){super("org.ethers.plugins.network.Ens");Se(this,"address");Se(this,"targetNetwork");Mt(this,{address:n||H_e,targetNetwork:r??1})}clone(){return new v2(this.address,this.targetNetwork)}}var Fp;const a7=class a7 extends Ux{constructor(n){super("org.ethers.plugins.network.FeeData");Be(this,Fp);ge(this,Fp,n)}get feeDataFunc(){return ie(this,Fp)}async getFeeData(n){return await ie(this,Fp).call(this,n)}clone(){return new a7(ie(this,Fp))}};Fp=new WeakMap;let nV=a7;var p1,m1;class V_e extends Ux{constructor(n,r){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");Be(this,p1);Be(this,m1);ge(this,p1,n),ge(this,m1,r)}get url(){return ie(this,p1)}get processFunc(){return ie(this,m1)}clone(){return this}}p1=new WeakMap,m1=new WeakMap;const aR=new Map;var Ly,jy,$f;const Lg=class Lg{constructor(e,n){Be(this,Ly);Be(this,jy);Be(this,$f);ge(this,Ly,e),ge(this,jy,Et(n)),ge(this,$f,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return ie(this,Ly)}set name(e){ge(this,Ly,e)}get chainId(){return ie(this,jy)}set chainId(e){ge(this,jy,Et(e,"chainId"))}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===Et(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===Et(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===Et(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(ie(this,$f).values())}attachPlugin(e){if(ie(this,$f).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return ie(this,$f).set(e.name,e.clone()),this}getPlugin(e){return ie(this,$f).get(e)||null}getPlugins(e){return this.plugins.filter(n=>n.name.split("#")[0]===e)}clone(){const e=new Lg(this.name,this.chainId);return this.plugins.forEach(n=>{e.attachPlugin(n.clone())}),e}computeIntrinsicGas(e){const n=this.getPlugin("org.ethers.plugins.network.GasCost")||new x2;let r=n.txBase;if(e.to==null&&(r+=n.txCreate),e.data)for(let i=2;i<e.data.length;i+=2)e.data.substring(i,i+2)==="00"?r+=n.txDataZero:r+=n.txDataNonzero;if(e.accessList){const i=Rm(e.accessList);for(const s in i)r+=n.txAccessListAddress+n.txAccessListStorageKey*i[s].storageKeys.length}return r}static from(e){if(q_e(),e==null)return Lg.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){const n=aR.get(e);if(n)return n();if(typeof e=="bigint")return new Lg("unknown",e);xe(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){xe(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);const n=new Lg(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&n.attachPlugin(new v2(e.ensAddress,e.ensNetwork)),n}xe(!1,"invalid network","network",e)}static register(e,n){typeof e=="number"&&(e=BigInt(e));const r=aR.get(e);r&&xe(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",e),aR.set(e,n)}};Ly=new WeakMap,jy=new WeakMap,$f=new WeakMap;let xc=Lg;function rV(t,e){const n=String(t);if(!n.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${t}`);const r=n.split(".");if(r.length===1&&r.push(""),r.length!==2)throw new Error(`invalid gwei value: ${t}`);for(;r[1].length<e;)r[1]+="0";if(r[1].length>9){let i=BigInt(r[1].substring(0,9));r[1].substring(9).match(/^0+$/)||i++,r[1]=i.toString()}return BigInt(r[0]+r[1])}function iV(t){return new V_e(t,async(e,n,r)=>{r.setHeader("User-Agent","ethers");let i;try{const[s,o]=await Promise.all([r.send(),e()]);i=s;const a=i.bodyJson.standard;return{gasPrice:o.gasPrice,maxFeePerGas:rV(a.maxFee,9),maxPriorityFeePerGas:rV(a.maxPriorityFee,9)}}catch(s){Ke(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:i,error:s})}})}let sV=!1;function q_e(){if(sV)return;sV=!0;function t(e,n,r){const i=function(){const s=new xc(e,n);return r.ensNetwork!=null&&s.attachPlugin(new v2(null,r.ensNetwork)),s.attachPlugin(new x2),(r.plugins||[]).forEach(o=>{s.attachPlugin(o)}),s};xc.register(e,i),xc.register(n,i),r.altNames&&r.altNames.forEach(s=>{xc.register(s,i)})}t("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),t("ropsten",3,{ensNetwork:3}),t("rinkeby",4,{ensNetwork:4}),t("goerli",5,{ensNetwork:5}),t("kovan",42,{ensNetwork:42}),t("sepolia",11155111,{ensNetwork:11155111}),t("holesky",17e3,{ensNetwork:17e3}),t("classic",61,{}),t("classicKotti",6,{}),t("arbitrum",42161,{ensNetwork:1}),t("arbitrum-goerli",421613,{}),t("arbitrum-sepolia",421614,{}),t("base",8453,{ensNetwork:1}),t("base-goerli",84531,{}),t("base-sepolia",84532,{}),t("bnb",56,{ensNetwork:1}),t("bnbt",97,{}),t("filecoin",314,{}),t("filecoin-calibration",314159,{}),t("linea",59144,{ensNetwork:1}),t("linea-goerli",59140,{}),t("linea-sepolia",59141,{}),t("matic",137,{ensNetwork:1,plugins:[iV("https://gasstation.polygon.technology/v2")]}),t("matic-amoy",80002,{}),t("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[iV("https://gasstation-testnet.polygon.technology/v2")]}),t("optimism",10,{ensNetwork:1,plugins:[]}),t("optimism-goerli",420,{}),t("optimism-sepolia",11155420,{}),t("xdai",100,{ensNetwork:1})}function X4(t){return JSON.parse(JSON.stringify(t))}var Ou,ka,zf,lc,By,uT;class G_e{constructor(e){Be(this,By);Be(this,Ou);Be(this,ka);Be(this,zf);Be(this,lc);ge(this,Ou,e),ge(this,ka,null),ge(this,zf,4e3),ge(this,lc,-2)}get pollingInterval(){return ie(this,zf)}set pollingInterval(e){ge(this,zf,e)}start(){ie(this,ka)||(ge(this,ka,ie(this,Ou)._setTimeout(tt(this,By,uT).bind(this),ie(this,zf))),tt(this,By,uT).call(this))}stop(){ie(this,ka)&&(ie(this,Ou)._clearTimeout(ie(this,ka)),ge(this,ka,null))}pause(e){this.stop(),e&&ge(this,lc,-2)}resume(){this.start()}}Ou=new WeakMap,ka=new WeakMap,zf=new WeakMap,lc=new WeakMap,By=new WeakSet,uT=async function(){try{const e=await ie(this,Ou).getBlockNumber();if(ie(this,lc)===-2){ge(this,lc,e);return}if(e!==ie(this,lc)){for(let n=ie(this,lc)+1;n<=e;n++){if(ie(this,ka)==null)return;await ie(this,Ou).emit("block",n)}ge(this,lc,e)}}catch{}ie(this,ka)!=null&&ge(this,ka,ie(this,Ou)._setTimeout(tt(this,By,uT).bind(this),ie(this,zf)))};var $p,zp,Hf;class P8{constructor(e){Be(this,$p);Be(this,zp);Be(this,Hf);ge(this,$p,e),ge(this,Hf,!1),ge(this,zp,n=>{this._poll(n,ie(this,$p))})}async _poll(e,n){throw new Error("sub-classes must override this")}start(){ie(this,Hf)||(ge(this,Hf,!0),ie(this,zp).call(this,-2),ie(this,$p).on("block",ie(this,zp)))}stop(){ie(this,Hf)&&(ge(this,Hf,!1),ie(this,$p).off("block",ie(this,zp)))}pause(e){this.stop()}resume(){this.start()}}$p=new WeakMap,zp=new WeakMap,Hf=new WeakMap;var Uy,Mu;class K_e extends P8{constructor(n,r){super(n);Be(this,Uy);Be(this,Mu);ge(this,Uy,r),ge(this,Mu,-2)}pause(n){n&&ge(this,Mu,-2),super.pause(n)}async _poll(n,r){const i=await r.getBlock(ie(this,Uy));i!=null&&(ie(this,Mu)===-2?ge(this,Mu,i.number):i.number>ie(this,Mu)&&(r.emit(ie(this,Uy),i.number),ge(this,Mu,i.number)))}}Uy=new WeakMap,Mu=new WeakMap;var VC;class W_e extends P8{constructor(n,r){super(n);Be(this,VC);ge(this,VC,X4(r))}async _poll(n,r){throw new Error("@TODO")}}VC=new WeakMap;var Fy;class Y_e extends P8{constructor(n,r){super(n);Be(this,Fy);ge(this,Fy,r)}async _poll(n,r){const i=await r.getTransactionReceipt(ie(this,Fy));i&&r.emit(ie(this,Fy),i)}}Fy=new WeakMap;var Du,$y,zy,Vf,Ca,qC,Xie;class R8{constructor(e,n){Be(this,qC);Be(this,Du);Be(this,$y);Be(this,zy);Be(this,Vf);Be(this,Ca);ge(this,Du,e),ge(this,$y,X4(n)),ge(this,zy,tt(this,qC,Xie).bind(this)),ge(this,Vf,!1),ge(this,Ca,-2)}start(){ie(this,Vf)||(ge(this,Vf,!0),ie(this,Ca)===-2&&ie(this,Du).getBlockNumber().then(e=>{ge(this,Ca,e)}),ie(this,Du).on("block",ie(this,zy)))}stop(){ie(this,Vf)&&(ge(this,Vf,!1),ie(this,Du).off("block",ie(this,zy)))}pause(e){this.stop(),e&&ge(this,Ca,-2)}resume(){this.start()}}Du=new WeakMap,$y=new WeakMap,zy=new WeakMap,Vf=new WeakMap,Ca=new WeakMap,qC=new WeakSet,Xie=async function(e){if(ie(this,Ca)===-2)return;const n=X4(ie(this,$y));n.fromBlock=ie(this,Ca)+1,n.toBlock=e;const r=await ie(this,Du).getLogs(n);if(r.length===0){ie(this,Ca)<e-60&&ge(this,Ca,e-60);return}for(const i of r)ie(this,Du).emit(ie(this,$y),i),ge(this,Ca,i.blockNumber)};const J_e=BigInt(2),X_e=10;function JS(t){return t&&typeof t.then=="function"}function dT(t,e){return t+":"+JSON.stringify(e,(n,r)=>{if(r==null)return"null";if(typeof r=="bigint")return`bigint:${r.toString()}`;if(typeof r=="string")return r.toLowerCase();if(typeof r=="object"&&!Array.isArray(r)){const i=Object.keys(r);return i.sort(),i.reduce((s,o)=>(s[o]=r[o],s),{})}return r})}class Qie{constructor(e){Se(this,"name");Mt(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function Q_e(t){return JSON.parse(JSON.stringify(t))}function Q4(t){return t=Array.from(new Set(t).values()),t.sort(),t}async function lR(t,e){if(t==null)throw new Error("invalid event");if(Array.isArray(t)&&(t={topics:t}),typeof t=="string")switch(t){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:t,tag:t}}if(gr(t,32)){const n=t.toLowerCase();return{type:"transaction",tag:dT("tx",{hash:n}),hash:n}}if(t.orphan){const n=t;return{type:"orphan",tag:dT("orphan",n),filter:Q_e(n)}}if(t.address||t.topics){const n=t,r={topics:(n.topics||[]).map(i=>i==null?null:Array.isArray(i)?Q4(i.map(s=>s.toLowerCase())):i.toLowerCase())};if(n.address){const i=[],s=[],o=a=>{gr(a)?i.push(a):s.push((async()=>{i.push(await Bi(a,e))})())};Array.isArray(n.address)?n.address.forEach(o):o(n.address),s.length&&await Promise.all(s),r.address=Q4(i.map(a=>a.toLowerCase()))}return{filter:r,tag:dT("event",r),type:"event"}}xe(!1,"unknown ProviderEvent","event",t)}function cR(){return new Date().getTime()}const Z_e={cacheTimeout:250,pollingInterval:4e3};var vs,qf,bs,Hy,Bo,Hp,Gf,Lu,g1,Na,Vy,qy,xn,Ro,Z4,eM,Mb,tM,Db,fT;class eIe{constructor(e,n){Be(this,xn);Be(this,vs);Be(this,qf);Be(this,bs);Be(this,Hy);Be(this,Bo);Be(this,Hp);Be(this,Gf);Be(this,Lu);Be(this,g1);Be(this,Na);Be(this,Vy);Be(this,qy);if(ge(this,qy,Object.assign({},Z_e,n||{})),e==="any")ge(this,Hp,!0),ge(this,Bo,null);else if(e){const r=xc.from(e);ge(this,Hp,!1),ge(this,Bo,Promise.resolve(r)),setTimeout(()=>{this.emit("network",r,null)},0)}else ge(this,Hp,!1),ge(this,Bo,null);ge(this,Lu,-1),ge(this,Gf,new Map),ge(this,vs,new Map),ge(this,qf,new Map),ge(this,bs,null),ge(this,Hy,!1),ge(this,g1,1),ge(this,Na,new Map),ge(this,Vy,!1)}get pollingInterval(){return ie(this,qy).pollingInterval}get provider(){return this}get plugins(){return Array.from(ie(this,qf).values())}attachPlugin(e){if(ie(this,qf).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return ie(this,qf).set(e.name,e.connect(this)),this}getPlugin(e){return ie(this,qf).get(e)||null}get disableCcipRead(){return ie(this,Vy)}set disableCcipRead(e){ge(this,Vy,!!e)}async ccipReadFetch(e,n,r){if(this.disableCcipRead||r.length===0||e.to==null)return null;const i=e.to.toLowerCase(),s=n.toLowerCase(),o=[];for(let a=0;a<r.length;a++){const l=r[a],c=l.replace("{sender}",i).replace("{data}",s),u=new ld(c);l.indexOf("{data}")===-1&&(u.body={data:s,sender:i}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:u,index:a,urls:r});let f="unknown error",m;try{m=await u.send()}catch(g){o.push(g.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:{error:g}});continue}try{const g=m.bodyJson;if(g.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:u,result:g}),g.data;g.message&&(f=g.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:g})}catch{}Ke(m.statusCode<400||m.statusCode>=500,`response not found during CCIP fetch: ${f}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:l,errorMessage:f}}),o.push(f)}Ke(!1,`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:r,errorMessages:o}})}_wrapBlock(e,n){return new v_e(B_e(e),this)}_wrapLog(e,n){return new D1(L_e(e),this)}_wrapTransactionReceipt(e,n){return new jie(z_e(e),this)}_wrapTransactionResponse(e,n){return new _w(Jie(e),this)}_detectNetwork(){Ke(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){Ke(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=Qt(await tt(this,xn,Ro).call(this,{method:"getBlockNumber"}),"%response");return ie(this,Lu)>=0&&ge(this,Lu,e),e}_getAddress(e){return Bi(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(gr(e))return gr(e,32)?e:yl(e);if(typeof e=="bigint"&&(e=Qt(e,"blockTag")),typeof e=="number")return e>=0?yl(e):ie(this,Lu)>=0?yl(ie(this,Lu)+e):this.getBlockNumber().then(n=>yl(n+e));xe(!1,"invalid blockTag","blockTag",e)}_getFilter(e){const n=(e.topics||[]).map(l=>l==null?null:Array.isArray(l)?Q4(l.map(c=>c.toLowerCase())):l.toLowerCase()),r="blockHash"in e?e.blockHash:void 0,i=(l,c,u)=>{let f;switch(l.length){case 0:break;case 1:f=l[0];break;default:l.sort(),f=l}if(r&&(c!=null||u!=null))throw new Error("invalid filter");const m={};return f&&(m.address=f),n.length&&(m.topics=n),c&&(m.fromBlock=c),u&&(m.toBlock=u),r&&(m.blockHash=r),m};let s=[];if(e.address)if(Array.isArray(e.address))for(const l of e.address)s.push(this._getAddress(l));else s.push(this._getAddress(e.address));let o;"fromBlock"in e&&(o=this._getBlockTag(e.fromBlock));let a;return"toBlock"in e&&(a=this._getBlockTag(e.toBlock)),s.filter(l=>typeof l!="string").length||o!=null&&typeof o!="string"||a!=null&&typeof a!="string"?Promise.all([Promise.all(s),o,a]).then(l=>i(l[0],l[1],l[2])):i(s,o,a)}_getTransactionRequest(e){const n=Nw(e),r=[];if(["to","from"].forEach(i=>{if(n[i]==null)return;const s=Bi(n[i],this);JS(s)?r.push((async function(){n[i]=await s})()):n[i]=s}),n.blockTag!=null){const i=this._getBlockTag(n.blockTag);JS(i)?r.push((async function(){n.blockTag=await i})()):n.blockTag=i}return r.length?(async function(){return await Promise.all(r),n})():n}async getNetwork(){if(ie(this,Bo)==null){const i=(async()=>{try{const s=await this._detectNetwork();return this.emit("network",s,null),s}catch(s){throw ie(this,Bo)===i&&ge(this,Bo,null),s}})();return ge(this,Bo,i),(await i).clone()}const e=ie(this,Bo),[n,r]=await Promise.all([e,this._detectNetwork()]);return n.chainId!==r.chainId&&(ie(this,Hp)?(this.emit("network",r,n),ie(this,Bo)===e&&ge(this,Bo,Promise.resolve(r))):Ke(!1,`network changed: ${n.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),n.clone()}async getFeeData(){const e=await this.getNetwork(),n=async()=>{const{_block:i,gasPrice:s,priorityFee:o}=await Ss({_block:tt(this,xn,tM).call(this,"latest",!1),gasPrice:(async()=>{try{const u=await tt(this,xn,Ro).call(this,{method:"getGasPrice"});return Et(u,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const u=await tt(this,xn,Ro).call(this,{method:"getPriorityFee"});return Et(u,"%response")}catch{}return null})()});let a=null,l=null;const c=this._wrapBlock(i,e);return c&&c.baseFeePerGas&&(l=o??BigInt("1000000000"),a=c.baseFeePerGas*J_e+l),new XH(s,a,l)},r=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){const i=new ld(r.url),s=await r.processFunc(n,this,i);return new XH(s.gasPrice,s.maxFeePerGas,s.maxPriorityFeePerGas)}return await n()}async estimateGas(e){let n=this._getTransactionRequest(e);return JS(n)&&(n=await n),Et(await tt(this,xn,Ro).call(this,{method:"estimateGas",transaction:n}),"%response")}async call(e){const{tx:n,blockTag:r}=await Ss({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await tt(this,xn,eM).call(this,tt(this,xn,Z4).call(this,n,r,e.enableCcipRead?0:-1))}async getBalance(e,n){return Et(await tt(this,xn,Mb).call(this,{method:"getBalance"},e,n),"%response")}async getTransactionCount(e,n){return Qt(await tt(this,xn,Mb).call(this,{method:"getTransactionCount"},e,n),"%response")}async getCode(e,n){return rt(await tt(this,xn,Mb).call(this,{method:"getCode"},e,n))}async getStorage(e,n,r){const i=Et(n,"position");return rt(await tt(this,xn,Mb).call(this,{method:"getStorage",position:i},e,r))}async broadcastTransaction(e){const{blockNumber:n,hash:r,network:i}=await Ss({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),s=S8.from(e);if(s.hash!==r)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(s,i).replaceableTransaction(n)}async getBlock(e,n){const{network:r,params:i}=await Ss({network:this.getNetwork(),params:tt(this,xn,tM).call(this,e,!!n)});return i==null?null:this._wrapBlock(i,r)}async getTransaction(e){const{network:n,params:r}=await Ss({network:this.getNetwork(),params:tt(this,xn,Ro).call(this,{method:"getTransaction",hash:e})});return r==null?null:this._wrapTransactionResponse(r,n)}async getTransactionReceipt(e){const{network:n,params:r}=await Ss({network:this.getNetwork(),params:tt(this,xn,Ro).call(this,{method:"getTransactionReceipt",hash:e})});if(r==null)return null;if(r.gasPrice==null&&r.effectiveGasPrice==null){const i=await tt(this,xn,Ro).call(this,{method:"getTransaction",hash:e});if(i==null)throw new Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=i.gasPrice}return this._wrapTransactionReceipt(r,n)}async getTransactionResult(e){const{result:n}=await Ss({network:this.getNetwork(),result:tt(this,xn,Ro).call(this,{method:"getTransactionResult",hash:e})});return n==null?null:rt(n)}async getLogs(e){let n=this._getFilter(e);JS(n)&&(n=await n);const{network:r,params:i}=await Ss({network:this.getNetwork(),params:tt(this,xn,Ro).call(this,{method:"getLogs",filter:n})});return i.map(s=>this._wrapLog(s,r))}_getProvider(e){Ke(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await tk.fromName(this,e)}async getAvatar(e){const n=await this.getResolver(e);return n?await n.getAvatar():null}async resolveName(e){const n=await this.getResolver(e);return n?await n.getAddress():null}async lookupAddress(e){e=yn(e);const n=q4(e.substring(2).toLowerCase()+".addr.reverse");try{const r=await tk.getEnsAddress(this),s=await new Wg(r,["function resolver(bytes32) view returns (address)"],this).resolver(n);if(s==null||s===ww)return null;const a=await new Wg(s,["function name(bytes32) view returns (string)"],this).name(n);return await this.resolveName(a)!==e?null:a}catch(r){if(os(r,"BAD_DATA")&&r.value==="0x"||os(r,"CALL_EXCEPTION"))return null;throw r}return null}async waitForTransaction(e,n,r){const i=n??1;return i===0?this.getTransactionReceipt(e):new Promise(async(s,o)=>{let a=null;const l=(async c=>{try{const u=await this.getTransactionReceipt(e);if(u!=null&&c-u.blockNumber+1>=i){s(u),a&&(clearTimeout(a),a=null);return}}catch(u){console.log("EEE",u)}this.once("block",l)});r!=null&&(a=setTimeout(()=>{a!=null&&(a=null,this.off("block",l),o(Pr("timeout","TIMEOUT",{reason:"timeout"})))},r)),l(await this.getBlockNumber())})}async waitForBlock(e){Ke(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const n=ie(this,Na).get(e);n&&(n.timer&&clearTimeout(n.timer),ie(this,Na).delete(e))}_setTimeout(e,n){n==null&&(n=0);const r=nb(this,g1)._++,i=()=>{ie(this,Na).delete(r),e()};if(this.paused)ie(this,Na).set(r,{timer:null,func:i,time:n});else{const s=setTimeout(i,n);ie(this,Na).set(r,{timer:s,func:i,time:cR()})}return r}_forEachSubscriber(e){for(const n of ie(this,vs).values())e(n.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new Qie(e.type);case"block":{const n=new G_e(this);return n.pollingInterval=this.pollingInterval,n}case"safe":case"finalized":return new K_e(this,e.type);case"event":return new R8(this,e.filter);case"transaction":return new Y_e(this,e.hash);case"orphan":return new W_e(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,n){for(const r of ie(this,vs).values())if(r.subscriber===e){r.started&&r.subscriber.stop(),r.subscriber=n,r.started&&n.start(),ie(this,bs)!=null&&n.pause(ie(this,bs));break}}async on(e,n){const r=await tt(this,xn,fT).call(this,e);return r.listeners.push({listener:n,once:!1}),r.started||(r.subscriber.start(),r.started=!0,ie(this,bs)!=null&&r.subscriber.pause(ie(this,bs))),this}async once(e,n){const r=await tt(this,xn,fT).call(this,e);return r.listeners.push({listener:n,once:!0}),r.started||(r.subscriber.start(),r.started=!0,ie(this,bs)!=null&&r.subscriber.pause(ie(this,bs))),this}async emit(e,...n){const r=await tt(this,xn,Db).call(this,e,n);if(!r||r.listeners.length===0)return!1;const i=r.listeners.length;return r.listeners=r.listeners.filter(({listener:s,once:o})=>{const a=new Lne(this,o?null:s,e);try{s.call(this,...n,a)}catch{}return!o}),r.listeners.length===0&&(r.started&&r.subscriber.stop(),ie(this,vs).delete(r.tag)),i>0}async listenerCount(e){if(e){const r=await tt(this,xn,Db).call(this,e);return r?r.listeners.length:0}let n=0;for(const{listeners:r}of ie(this,vs).values())n+=r.length;return n}async listeners(e){if(e){const r=await tt(this,xn,Db).call(this,e);return r?r.listeners.map(({listener:i})=>i):[]}let n=[];for(const{listeners:r}of ie(this,vs).values())n=n.concat(r.map(({listener:i})=>i));return n}async off(e,n){const r=await tt(this,xn,Db).call(this,e);if(!r)return this;if(n){const i=r.listeners.map(({listener:s})=>s).indexOf(n);i>=0&&r.listeners.splice(i,1)}return(!n||r.listeners.length===0)&&(r.started&&r.subscriber.stop(),ie(this,vs).delete(r.tag)),this}async removeAllListeners(e){if(e){const{tag:n,started:r,subscriber:i}=await tt(this,xn,fT).call(this,e);r&&i.stop(),ie(this,vs).delete(n)}else for(const[n,{started:r,subscriber:i}]of ie(this,vs))r&&i.stop(),ie(this,vs).delete(n);return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return this.off(e,n)}get destroyed(){return ie(this,Hy)}destroy(){this.removeAllListeners();for(const e of ie(this,Na).keys())this._clearTimeout(e);ge(this,Hy,!0)}get paused(){return ie(this,bs)!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(ge(this,Lu,-1),ie(this,bs)!=null){if(ie(this,bs)==!!e)return;Ke(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(n=>n.pause(e)),ge(this,bs,!!e);for(const n of ie(this,Na).values())n.timer&&clearTimeout(n.timer),n.time=cR()-n.time}resume(){if(ie(this,bs)!=null){this._forEachSubscriber(e=>e.resume()),ge(this,bs,null);for(const e of ie(this,Na).values()){let n=e.time;n<0&&(n=0),e.time=cR(),setTimeout(e.func,n)}}}}vs=new WeakMap,qf=new WeakMap,bs=new WeakMap,Hy=new WeakMap,Bo=new WeakMap,Hp=new WeakMap,Gf=new WeakMap,Lu=new WeakMap,g1=new WeakMap,Na=new WeakMap,Vy=new WeakMap,qy=new WeakMap,xn=new WeakSet,Ro=async function(e){const n=ie(this,qy).cacheTimeout;if(n<0)return await this._perform(e);const r=dT(e.method,e);let i=ie(this,Gf).get(r);return i||(i=this._perform(e),ie(this,Gf).set(r,i),setTimeout(()=>{ie(this,Gf).get(r)===i&&ie(this,Gf).delete(r)},n)),await i},Z4=async function(e,n,r){Ke(r<X_e,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:n,enableCcipRead:!0})});const i=Nw(e);try{return rt(await this._perform({method:"call",transaction:i,blockTag:n}))}catch(s){if(!this.disableCcipRead&&l8(s)&&s.data&&r>=0&&n==="latest"&&i.to!=null&&mr(s.data,0,4)==="0x556f1830"){const o=s.data,a=await Bi(i.to,this);let l;try{l=sIe(mr(s.data,4))}catch(f){Ke(!1,f.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:i,info:{data:o}})}Ke(l.sender.toLowerCase()===a.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:i,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:l.errorArgs}});const c=await this.ccipReadFetch(i,l.calldata,l.urls);Ke(c!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:i,info:{data:s.data,errorArgs:l.errorArgs}});const u={to:a,data:On([l.selector,iIe([c,l.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:u});try{const f=await tt(this,xn,Z4).call(this,u,n,r+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},u),result:f}),f}catch(f){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},u),error:f}),f}}throw s}},eM=async function(e){const{value:n}=await Ss({network:this.getNetwork(),value:e});return n},Mb=async function(e,n,r){let i=this._getAddress(n),s=this._getBlockTag(r);return(typeof i!="string"||typeof s!="string")&&([i,s]=await Promise.all([i,s])),await tt(this,xn,eM).call(this,tt(this,xn,Ro).call(this,Object.assign(e,{address:i,blockTag:s})))},tM=async function(e,n){if(gr(e,32))return await tt(this,xn,Ro).call(this,{method:"getBlock",blockHash:e,includeTransactions:n});let r=this._getBlockTag(e);return typeof r!="string"&&(r=await r),await tt(this,xn,Ro).call(this,{method:"getBlock",blockTag:r,includeTransactions:n})},Db=async function(e,n){let r=await lR(e,this);return r.type==="event"&&n&&n.length>0&&n[0].removed===!0&&(r=await lR({orphan:"drop-log",log:n[0]},this)),ie(this,vs).get(r.tag)||null},fT=async function(e){const n=await lR(e,this),r=n.tag;let i=ie(this,vs).get(r);return i||(i={subscriber:this._getSubscriber(n),tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},ie(this,vs).set(r,i)),i};function tIe(t,e){try{const n=nM(t,e);if(n)return KT(n)}catch{}return null}function nM(t,e){if(t==="0x")return null;try{const n=Qt(mr(t,e,e+32)),r=Qt(mr(t,n,n+32));return mr(t,n+32,n+32+r)}catch{}return null}function oV(t){const e=Lr(t);if(e.length>32)throw new Error("internal; should not happen");const n=new Uint8Array(32);return n.set(e,32-e.length),n}function nIe(t){if(t.length%32===0)return t;const e=new Uint8Array(Math.ceil(t.length/32)*32);return e.set(t),e}const rIe=new Uint8Array([]);function iIe(t){const e=[];let n=0;for(let r=0;r<t.length;r++)e.push(rIe),n+=32;for(let r=0;r<t.length;r++){const i=pt(t[r]);e[r]=oV(n),e.push(oV(i.length)),e.push(nIe(i)),n+=32+Math.ceil(i.length/32)*32}return On(e)}const aV="0x0000000000000000000000000000000000000000000000000000000000000000";function sIe(t){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};Ke(Hg(t)>=160,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const n=mr(t,0,32);Ke(mr(n,0,12)===mr(aV,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=mr(n,12);try{const r=[],i=Qt(mr(t,32,64)),s=Qt(mr(t,i,i+32)),o=mr(t,i+32);for(let a=0;a<s;a++){const l=tIe(o,a*32);if(l==null)throw new Error("abort");r.push(l)}e.urls=r}catch{Ke(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const r=nM(t,64);if(r==null)throw new Error("abort");e.calldata=r}catch{Ke(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}Ke(mr(t,100,128)===mr(aV,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=mr(t,96,100);try{const r=nM(t,128);if(r==null)throw new Error("abort");e.extraData=r}catch{Ke(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(r=>e[r]),e}function Kh(t,e){if(t.provider)return t.provider;Ke(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function lV(t,e){let n=Nw(e);if(n.to!=null&&(n.to=Bi(n.to,t)),n.from!=null){const r=n.from;n.from=Promise.all([t.getAddress(),Bi(r,t)]).then(([i,s])=>(xe(i.toLowerCase()===s.toLowerCase(),"transaction from mismatch","tx.from",s),i))}else n.from=t.getAddress();return await Ss(n)}class O8{constructor(e){Se(this,"provider");Mt(this,{provider:e||null})}async getNonce(e){return Kh(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await lV(this,e)}async populateTransaction(e){const n=Kh(this,"populateTransaction"),r=await lV(this,e);r.nonce==null&&(r.nonce=await this.getNonce("pending")),r.gasLimit==null&&(r.gasLimit=await this.estimateGas(r));const i=await this.provider.getNetwork();if(r.chainId!=null){const o=Et(r.chainId);xe(o===i.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else r.chainId=i.chainId;const s=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||s)?xe(!1,"eip-1559 transaction do not support gasPrice","tx",e):(r.type===0||r.type===1)&&s&&xe(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1){const o=await n.getFeeData();Ke(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice)}else{const o=await n.getFeeData();if(r.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(r.authorizationList&&r.authorizationList.length?r.type=4:r.type=2,r.gasPrice!=null){const a=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=a,r.maxPriorityFeePerGas=a}else r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(Ke(!s,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice),r.type=0):Ke(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(r.type===2||r.type===3||r.type===4)&&(r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await Ss(r)}async populateAuthorization(e){const n=Object.assign({},e);return n.chainId==null&&(n.chainId=(await Kh(this,"getNetwork").getNetwork()).chainId),n.nonce==null&&(n.nonce=await this.getNonce()),n}async estimateGas(e){return Kh(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return Kh(this,"call").call(await this.populateCall(e))}async resolveName(e){return await Kh(this,"resolveName").resolveName(e)}async sendTransaction(e){const n=Kh(this,"sendTransaction"),r=await this.populateTransaction(e);delete r.from;const i=S8.from(r);return await n.broadcastTransaction(await this.signTransaction(i))}authorize(e){Ke(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}var Gy,hT;const l7=class l7 extends O8{constructor(n,r){super(r);Be(this,Gy);Se(this,"address");Mt(this,{address:n})}async getAddress(){return this.address}connect(n){return new l7(this.address,n)}async signTransaction(n){tt(this,Gy,hT).call(this,"transactions","signTransaction")}async signMessage(n){tt(this,Gy,hT).call(this,"messages","signMessage")}async signTypedData(n,r,i){tt(this,Gy,hT).call(this,"typed-data","signTypedData")}};Gy=new WeakSet,hT=function(n,r){Ke(!1,`VoidSigner cannot sign ${n}`,"UNSUPPORTED_OPERATION",{operation:r})};let rM=l7;function oIe(t){return JSON.parse(JSON.stringify(t))}var Bs,cc,Vp,Kf,qp,Ky,fh,iM,sM;class Zie{constructor(e){Be(this,fh);Be(this,Bs);Be(this,cc);Be(this,Vp);Be(this,Kf);Be(this,qp);Be(this,Ky);ge(this,Bs,e),ge(this,cc,null),ge(this,Vp,tt(this,fh,iM).bind(this)),ge(this,Kf,!1),ge(this,qp,null),ge(this,Ky,!1)}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,n){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}start(){ie(this,Kf)||(ge(this,Kf,!0),tt(this,fh,iM).call(this,-2))}stop(){ie(this,Kf)&&(ge(this,Kf,!1),ge(this,Ky,!0),tt(this,fh,sM).call(this),ie(this,Bs).off("block",ie(this,Vp)))}pause(e){e&&tt(this,fh,sM).call(this),ie(this,Bs).off("block",ie(this,Vp))}resume(){this.start()}}Bs=new WeakMap,cc=new WeakMap,Vp=new WeakMap,Kf=new WeakMap,qp=new WeakMap,Ky=new WeakMap,fh=new WeakSet,iM=async function(e){try{ie(this,cc)==null&&ge(this,cc,this._subscribe(ie(this,Bs)));let n=null;try{n=await ie(this,cc)}catch(s){if(!os(s,"UNSUPPORTED_OPERATION")||s.operation!=="eth_newFilter")throw s}if(n==null){ge(this,cc,null),ie(this,Bs)._recoverSubscriber(this,this._recover(ie(this,Bs)));return}const r=await ie(this,Bs).getNetwork();if(ie(this,qp)||ge(this,qp,r),ie(this,qp).chainId!==r.chainId)throw new Error("chaid changed");if(ie(this,Ky))return;const i=await ie(this,Bs).send("eth_getFilterChanges",[n]);await this._emitResults(ie(this,Bs),i)}catch(n){console.log("@TODO",n)}ie(this,Bs).once("block",ie(this,Vp))},sM=function(){const e=ie(this,cc);e&&(ge(this,cc,null),e.then(n=>{ie(this,Bs).destroyed||ie(this,Bs).send("eth_uninstallFilter",[n])}))};var Gp;class aIe extends Zie{constructor(n,r){super(n);Be(this,Gp);ge(this,Gp,oIe(r))}_recover(n){return new R8(n,ie(this,Gp))}async _subscribe(n){return await n.send("eth_newFilter",[ie(this,Gp)])}async _emitResults(n,r){for(const i of r)n.emit(ie(this,Gp),n._wrapLog(i,n._network))}}Gp=new WeakMap;class lIe extends Zie{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,n){for(const r of n)e.emit("pending",r)}}const cIe="bigint,boolean,function,number,string,symbol".split(/,/g);function pT(t){if(t==null||cIe.indexOf(typeof t)>=0||typeof t.getAddress=="function")return t;if(Array.isArray(t))return t.map(pT);if(typeof t=="object")return Object.keys(t).reduce((e,n)=>(e[n]=t[n],e),{});throw new Error(`should not happen: ${t} (${typeof t})`)}function uIe(t){return new Promise(e=>{setTimeout(e,t)})}function F0(t){return t&&t.toLowerCase()}function cV(t){return t&&typeof t.pollingInterval=="number"}const ese={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class uR extends O8{constructor(n,r){super(n);Se(this,"address");r=yn(r),Mt(this,{address:r})}connect(n){Ke(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(n){return await this.populateCall(n)}async sendUncheckedTransaction(n){const r=pT(n),i=[];if(r.from){const o=r.from;i.push((async()=>{const a=await Bi(o,this.provider);xe(a!=null&&a.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=a})())}else r.from=this.address;if(r.gasLimit==null&&i.push((async()=>{r.gasLimit=await this.provider.estimateGas({...r,from:this.address})})()),r.to!=null){const o=r.to;i.push((async()=>{r.to=await Bi(o,this.provider)})())}i.length&&await Promise.all(i);const s=this.provider.getRpcTransaction(r);return this.provider.send("eth_sendTransaction",[s])}async sendTransaction(n){const r=await this.provider.getBlockNumber(),i=await this.sendUncheckedTransaction(n);return await new Promise((s,o)=>{const a=[1e3,100];let l=0;const c=async()=>{try{const u=await this.provider.getTransaction(i);if(u!=null){s(u.replaceableTransaction(r));return}}catch(u){if(os(u,"CANCELLED")||os(u,"BAD_DATA")||os(u,"NETWORK_ERROR")||os(u,"UNSUPPORTED_OPERATION")){u.info==null&&(u.info={}),u.info.sendTransactionHash=i,o(u);return}if(os(u,"INVALID_ARGUMENT")&&(l++,u.info==null&&(u.info={}),u.info.sendTransactionHash=i,l>10)){o(u);return}this.provider.emit("error",Pr("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:u}))}this.provider._setTimeout(()=>{c()},a.pop()||4e3)};c()})}async signTransaction(n){const r=pT(n);if(r.from){const s=await Bi(r.from,this.provider);xe(s!=null&&s.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=s}else r.from=this.address;const i=this.provider.getRpcTransaction(r);return await this.provider.send("eth_signTransaction",[i])}async signMessage(n){const r=typeof n=="string"?pi(n):n;return await this.provider.send("personal_sign",[rt(r),this.address.toLowerCase()])}async signTypedData(n,r,i){const s=pT(i),o=await um.resolveNames(n,r,s,async a=>{const l=await Bi(a);return xe(l!=null,"TypedData does not support null address","value",a),l});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(um.getPayload(o.domain,r,o.value))])}async unlock(n){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),n,null])}async _legacySignMessage(n){const r=typeof n=="string"?pi(n):n;return await this.provider.send("eth_sign",[this.address.toLowerCase(),rt(r)])}}var Kp,Wy,ju,uc,hl,_a,lo,y1,oM;class dIe extends eIe{constructor(n,r){super(n,r);Be(this,y1);Be(this,Kp);Be(this,Wy);Be(this,ju);Be(this,uc);Be(this,hl);Be(this,_a);Be(this,lo);ge(this,Wy,1),ge(this,Kp,Object.assign({},ese,r||{})),ge(this,ju,[]),ge(this,uc,null),ge(this,_a,null),ge(this,lo,null);{let s=null;const o=new Promise(a=>{s=a});ge(this,hl,{promise:o,resolve:s})}const i=this._getOption("staticNetwork");typeof i=="boolean"?(xe(!i||n!=="any","staticNetwork cannot be used on special network 'any'","options",r),i&&n!=null&&ge(this,_a,xc.from(n))):i&&(xe(n==null||i.matches(n),"staticNetwork MUST match network object","options",r),ge(this,_a,i))}_getOption(n){return ie(this,Kp)[n]}get _network(){return Ke(ie(this,_a),"network is not available yet","NETWORK_ERROR"),ie(this,_a)}async _perform(n){if(n.method==="call"||n.method==="estimateGas"){let i=n.transaction;if(i&&i.type!=null&&Et(i.type)&&i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null){const s=await this.getFeeData();s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null&&(n=Object.assign({},n,{transaction:Object.assign({},i,{type:void 0})}))}}const r=this.getRpcRequest(n);return r!=null?await this.send(r.method,r.args):super._perform(n)}async _detectNetwork(){const n=this._getOption("staticNetwork");if(n)if(n===!0){if(ie(this,_a))return ie(this,_a)}else return n;return ie(this,lo)?await ie(this,lo):this.ready?(ge(this,lo,(async()=>{try{const r=xc.from(Et(await this.send("eth_chainId",[])));return ge(this,lo,null),r}catch(r){throw ge(this,lo,null),r}})()),await ie(this,lo)):(ge(this,lo,(async()=>{const r={id:nb(this,Wy)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:r});let i;try{i=(await this._send(r))[0],ge(this,lo,null)}catch(s){throw ge(this,lo,null),this.emit("debug",{action:"receiveRpcError",error:s}),s}if(this.emit("debug",{action:"receiveRpcResult",result:i}),"result"in i)return xc.from(Et(i.result));throw this.getRpcError(r,i)})()),await ie(this,lo))}_start(){ie(this,hl)==null||ie(this,hl).resolve==null||(ie(this,hl).resolve(),ge(this,hl,null),(async()=>{for(;ie(this,_a)==null&&!this.destroyed;)try{ge(this,_a,await this._detectNetwork())}catch(n){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",Pr("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:n}})),await uIe(1e3)}tt(this,y1,oM).call(this)})())}async _waitUntilReady(){if(ie(this,hl)!=null)return await ie(this,hl).promise}_getSubscriber(n){return n.type==="pending"?new lIe(this):n.type==="event"?this._getOption("polling")?new R8(this,n.filter):new aIe(this,n.filter):n.type==="orphan"&&n.filter.orphan==="drop-log"?new Qie("orphan"):super._getSubscriber(n)}get ready(){return ie(this,hl)==null}getRpcTransaction(n){const r={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(i=>{if(n[i]==null)return;let s=i;i==="gasLimit"&&(s="gas"),r[s]=yl(Et(n[i],`tx.${i}`))}),["from","to","data"].forEach(i=>{n[i]!=null&&(r[i]=rt(n[i]))}),n.accessList&&(r.accessList=Rm(n.accessList)),n.blobVersionedHashes&&(r.blobVersionedHashes=n.blobVersionedHashes.map(i=>i.toLowerCase())),n.authorizationList&&(r.authorizationList=n.authorizationList.map(i=>{const s=tie(i);return{address:s.address,nonce:yl(s.nonce),chainId:yl(s.chainId),yParity:yl(s.signature.yParity),r:yl(s.signature.r),s:yl(s.signature.s)}})),r}getRpcRequest(n){switch(n.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[F0(n.address),n.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[F0(n.address),n.blockTag]};case"getCode":return{method:"eth_getCode",args:[F0(n.address),n.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[F0(n.address),"0x"+n.position.toString(16),n.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[n.signedTransaction]};case"getBlock":if("blockTag"in n)return{method:"eth_getBlockByNumber",args:[n.blockTag,!!n.includeTransactions]};if("blockHash"in n)return{method:"eth_getBlockByHash",args:[n.blockHash,!!n.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[n.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[n.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(n.transaction),n.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(n.transaction)]};case"getLogs":return n.filter&&n.filter.address!=null&&(Array.isArray(n.filter.address)?n.filter.address=n.filter.address.map(F0):n.filter.address=F0(n.filter.address)),{method:"eth_getLogs",args:[n.filter]}}return null}getRpcError(n,r){const{method:i}=n,{error:s}=r;if(i==="eth_estimateGas"&&s.message){const l=s.message;if(!l.match(/revert/i)&&l.match(/insufficient funds/i))return Pr("insufficient funds","INSUFFICIENT_FUNDS",{transaction:n.params[0],info:{payload:n,error:s}});if(l.match(/nonce/i)&&l.match(/too low/i))return Pr("nonce has already been used","NONCE_EXPIRED",{transaction:n.params[0],info:{payload:n,error:s}})}if(i==="eth_call"||i==="eth_estimateGas"){const l=aM(s),c=Cw.getBuiltinCallException(i==="eth_call"?"call":"estimateGas",n.params[0],l?l.data:null);return c.info={error:s,payload:n},c}const o=JSON.stringify(pIe(s));if(typeof s.message=="string"&&s.message.match(/user denied|ethers-user-denied/i))return Pr("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[i]||"unknown",reason:"rejected",info:{payload:n,error:s}});if(i==="eth_sendRawTransaction"||i==="eth_sendTransaction"){const l=n.params[0];if(o.match(/insufficient funds|base fee exceeds gas limit/i))return Pr("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:l,info:{error:s}});if(o.match(/nonce/i)&&o.match(/too low/i))return Pr("nonce has already been used","NONCE_EXPIRED",{transaction:l,info:{error:s}});if(o.match(/replacement transaction/i)&&o.match(/underpriced/i))return Pr("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:l,info:{error:s}});if(o.match(/only replay-protected/i))return Pr("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:i,info:{transaction:l,info:{error:s}}})}let a=!!o.match(/the method .* does not exist/i);return a||s&&s.details&&s.details.startsWith("Unauthorized method:")&&(a=!0),a?Pr("unsupported operation","UNSUPPORTED_OPERATION",{operation:n.method,info:{error:s,payload:n}}):Pr("could not coalesce error","UNKNOWN_ERROR",{error:s,payload:n})}send(n,r){if(this.destroyed)return Promise.reject(Pr("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n}));const i=nb(this,Wy)._++,s=new Promise((o,a)=>{ie(this,ju).push({resolve:o,reject:a,payload:{method:n,params:r,id:i,jsonrpc:"2.0"}})});return tt(this,y1,oM).call(this),s}async getSigner(n){n==null&&(n=0);const r=this.send("eth_accounts",[]);if(typeof n=="number"){const s=await r;if(n>=s.length)throw new Error("no such account");return new uR(this,s[n])}const{accounts:i}=await Ss({network:this.getNetwork(),accounts:r});n=yn(n);for(const s of i)if(yn(s)===n)return new uR(this,n);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(r=>new uR(this,r))}destroy(){ie(this,uc)&&(clearTimeout(ie(this,uc)),ge(this,uc,null));for(const{payload:n,reject:r}of ie(this,ju))r(Pr("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n.method}));ge(this,ju,[]),super.destroy()}}Kp=new WeakMap,Wy=new WeakMap,ju=new WeakMap,uc=new WeakMap,hl=new WeakMap,_a=new WeakMap,lo=new WeakMap,y1=new WeakSet,oM=function(){if(ie(this,uc))return;const n=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");ge(this,uc,setTimeout(()=>{ge(this,uc,null);const r=ie(this,ju);for(ge(this,ju,[]);r.length;){const i=[r.shift()];for(;r.length&&i.length!==ie(this,Kp).batchMaxCount;)if(i.push(r.shift()),JSON.stringify(i.map(o=>o.payload)).length>ie(this,Kp).batchMaxSize){r.unshift(i.pop());break}(async()=>{const s=i.length===1?i[0].payload:i.map(o=>o.payload);this.emit("debug",{action:"sendRpcPayload",payload:s});try{const o=await this._send(s);this.emit("debug",{action:"receiveRpcResult",result:o});for(const{resolve:a,reject:l,payload:c}of i){if(this.destroyed){l(Pr("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:c.method}));continue}const u=o.filter(f=>f.id===c.id)[0];if(u==null){const f=Pr("missing response for request","BAD_DATA",{value:o,info:{payload:c}});this.emit("error",f),l(f);continue}if("error"in u){l(this.getRpcError(c,u));continue}a(u.result)}}catch(o){this.emit("debug",{action:"receiveRpcError",error:o});for(const{reject:a}of i)a(o)}})()}},n))};var Wf;class fIe extends dIe{constructor(n,r){super(n,r);Be(this,Wf);let i=this._getOption("pollingInterval");i==null&&(i=ese.pollingInterval),ge(this,Wf,i)}_getSubscriber(n){const r=super._getSubscriber(n);return cV(r)&&(r.pollingInterval=ie(this,Wf)),r}get pollingInterval(){return ie(this,Wf)}set pollingInterval(n){if(!Number.isInteger(n)||n<0)throw new Error("invalid interval");ge(this,Wf,n),this._forEachSubscriber(r=>{cV(r)&&(r.pollingInterval=ie(this,Wf))})}}Wf=new WeakMap;var Yy;class hIe extends fIe{constructor(n,r,i){n==null&&(n="http://localhost:8545");super(r,i);Be(this,Yy);typeof n=="string"?ge(this,Yy,new ld(n)):ge(this,Yy,n.clone())}_getConnection(){return ie(this,Yy).clone()}async send(n,r){return await this._start(),await super.send(n,r)}async _send(n){const r=this._getConnection();r.body=JSON.stringify(n),r.setHeader("content-type","application/json");const i=await r.send();i.assertOk();let s=i.bodyJson;return Array.isArray(s)||(s=[s]),s}}Yy=new WeakMap;function aM(t){if(t==null)return null;if(typeof t.message=="string"&&t.message.match(/revert/i)&&gr(t.data))return{message:t.message,data:t.data};if(typeof t=="object"){for(const e in t){const n=aM(t[e]);if(n)return n}return null}if(typeof t=="string")try{return aM(JSON.parse(t))}catch{}return null}function lM(t,e){if(t!=null){if(typeof t.message=="string"&&e.push(t.message),typeof t=="object")for(const n in t)lM(t[n],e);if(typeof t=="string")try{return lM(JSON.parse(t),e)}catch{}}}function pIe(t){const e=[];return lM(t,e),e}var Jy;const c7=class c7 extends O8{constructor(n,r){super(r);Se(this,"address");Be(this,Jy);xe(n&&typeof n.sign=="function","invalid private key","privateKey","[ REDACTED ]"),ge(this,Jy,n);const i=M1(this.signingKey.publicKey);Mt(this,{address:i})}get signingKey(){return ie(this,Jy)}get privateKey(){return this.signingKey.privateKey}async getAddress(){return this.address}connect(n){return new c7(ie(this,Jy),n)}async signTransaction(n){n=Nw(n);const{to:r,from:i}=await Ss({to:n.to?Bi(n.to,this):void 0,from:n.from?Bi(n.from,this):void 0});r!=null&&(n.to=r),i!=null&&(n.from=i),n.from!=null&&(xe(yn(n.from)===this.address,"transaction from address mismatch","tx.from",n.from),delete n.from);const s=S8.from(n);return s.signature=this.signingKey.sign(s.unsignedHash),s.serialized}async signMessage(n){return this.signMessageSync(n)}signMessageSync(n){return this.signingKey.sign(Sie(n)).serialized}authorizeSync(n){xe(typeof n.address=="string","invalid address for authorizeSync","auth.address",n);const r=this.signingKey.sign(nie(n));return Object.assign({},{address:yn(n.address),nonce:Et(n.nonce||0),chainId:Et(n.chainId||0)},{signature:r})}async authorize(n){return n=Object.assign({},n,{address:await Bi(n.address,this)}),this.authorizeSync(await this.populateAuthorization(n))}async signTypedData(n,r,i){const s=await um.resolveNames(n,r,i,async o=>{Ke(this.provider!=null,"cannot resolve ENS names without a provider","UNSUPPORTED_OPERATION",{operation:"resolveName",info:{name:o}});const a=await this.provider.resolveName(o);return Ke(a!=null,"unconfigured ENS name","UNCONFIGURED_NAME",{value:o}),a});return this.signingKey.sign(um.hash(s.domain,r,s.value)).serialized}};Jy=new WeakMap;let nk=c7;const rk=" !#$%&'()*+,-./<=>?@[]^_`{|}~",mIe=/^[a-z]*$/i;function uV(t,e){let n=97;return t.reduce((r,i)=>(i===e?n++:i.match(mIe)?r.push(String.fromCharCode(n)+i):(n=97,r.push(i)),r),[])}function gIe(t,e){for(let i=rk.length-1;i>=0;i--)t=t.split(rk[i]).join(e.substring(2*i,2*i+2));const n=[],r=t.replace(/(:|([0-9])|([A-Z][a-z]*))/g,(i,s,o,a)=>{if(o)for(let l=parseInt(o);l>=0;l--)n.push(";");else n.push(s.toLowerCase());return""});if(r)throw new Error(`leftovers: ${JSON.stringify(r)}`);return uV(uV(n,";"),":")}function yIe(t){return xe(t[0]==="0","unsupported auwl data","data",t),gIe(t.substring(1+2*rk.length),t.substring(1,1+2*rk.length))}class xIe{constructor(e){Se(this,"locale");Mt(this,{locale:e})}split(e){return e.toLowerCase().split(/\s+/g)}join(e){return e.join(" ")}}var Xy,x1,Wp,v1,cM;class vIe extends xIe{constructor(n,r,i){super(n);Be(this,v1);Be(this,Xy);Be(this,x1);Be(this,Wp);ge(this,Xy,r),ge(this,x1,i),ge(this,Wp,null)}get _data(){return ie(this,Xy)}_decodeWords(){return yIe(ie(this,Xy))}getWord(n){const r=tt(this,v1,cM).call(this);return xe(n>=0&&n<r.length,`invalid word index: ${n}`,"index",n),r[n]}getWordIndex(n){return tt(this,v1,cM).call(this).indexOf(n)}}Xy=new WeakMap,x1=new WeakMap,Wp=new WeakMap,v1=new WeakSet,cM=function(){if(ie(this,Wp)==null){const n=this._decodeWords();if(cd(n.join(`
`)+`
`)!==ie(this,x1))throw new Error(`BIP39 Wordlist for ${this.locale} FAILED`);ge(this,Wp,n)}return ie(this,Wp)};const bIe="0erleonalorenseinceregesticitStanvetearctssi#ch2Athck&tneLl0And#Il.yLeOutO=S|S%b/ra@SurdU'0Ce[Cid|CountCu'Hie=IdOu,-Qui*Ro[TT]T%T*[Tu$0AptDD-tD*[Ju,M.UltV<)Vi)0Rob-0FairF%dRaid0A(EEntRee0Ead0MRRp%tS!_rmBumCoholErtI&LLeyLowMo,O}PhaReadySoT Ways0A>urAz(gOngOuntU'd0Aly,Ch%Ci|G G!GryIm$K!Noun)Nu$O` Sw T&naTiqueXietyY1ArtOlogyPe?P!Pro=Ril1ChCt-EaEnaGueMMedM%MyOundR<+Re,Ri=RowTTefa@Ti,Tw%k0KPe@SaultSetSi,SumeThma0H!>OmTa{T&dT.udeTra@0Ct]D.Gu,NtTh%ToTumn0Era+OcadoOid0AkeA*AyEsomeFulKw?d0Is:ByChel%C#D+GL<)Lc#y~MbooN<aNn RRelyRga(R*lSeS-SketTt!3A^AnAutyCau'ComeEfF%eG(Ha=H(dLie=LowLtN^Nef./TrayTt Twe&Y#d3Cyc!DKeNdOlogyRdR`Tt _{AdeAmeAnketA,EakE[IndOodO[omOu'UeUrUsh_rdAtDyIlMbNeNusOkO,Rd R(gRrowSsTtomUn)XY_{etA(AndA[A=EadEezeI{Id+IefIghtIngIskOccoliOk&OnzeOomO` OwnUsh2Bb!DdyD+tFf$oIldLbLkL!tNd!Nk Rd&Rg R,SS(e[SyTt Y Zz:Bba+B(B!CtusGeKe~LmM aMpNN$N)lNdyNn#NoeNvasNy#Pab!P.$Pta(RRb#RdRgoRpetRryRtSeShS(o/!Su$TT$ogT^Teg%yTt!UghtU'Ut]Ve3Il(gL yM|NsusNturyRe$Rta(_irAlkAmp]An+AosApt Ar+A'AtEapE{Ee'EfErryE,I{&IefIldIm}yOi)Oo'R#-U{!UnkUrn0G?Nnam#Rc!Tiz&TyVil_imApArifyAwAyE<ErkEv I{I|IffImbIn-IpO{OgO'O`OudOwnUbUmpU, Ut^_^A,C#utDeFfeeIlInL!@L%LumnMb(eMeMf%tM-Mm#Mp<yNc tNdu@NfirmNg*[N}@Nsid NtrolNv()OkOlPp PyR$ReRnR*@/Tt#U^UntryUp!Ur'Us(V Yo>_{Ad!AftAmA}AshAt AwlAzyEamEd.EekEwI{etImeIspIt-OpO[Ou^OwdUci$UelUi'Umb!Un^UshYY,$2BeLtu*PPbo?dRiousRr|Rta(R=Sh]/omTe3C!:DMa+MpN)Ng R(gShUght WnY3AlBa>BrisCadeCemb CideCl(eC%a>C*a'ErF&'F(eFyG*eLayLiv M<dMi'Ni$Nti,NyP?tP&dPos.P`PutyRi=ScribeS tSignSkSpair/royTailTe@VelopVi)Vo>3AgramAlAm#dAryCeE'lEtFf G.$Gn.yLemmaNn NosaurRe@RtSag*eScov Sea'ShSmi[S%d Splay/<)V tVideV%)Zzy5Ct%Cum|G~Lph(Ma(Na>NkeyN%OrSeUb!Ve_ftAg#AmaA,-AwEamE[IftIllInkIpI=OpUmY2CkMbNeR(g/T^Ty1Arf1Nam-:G G!RlyRnR`Sily/Sy1HoOlogyOnomy0GeItUca>1F%t0G1GhtTh 2BowD E@r-Eg<tEm|Eph<tEvat%I>Se0B?kBodyBra)Er+Ot]PloyPow Pty0Ab!A@DD![D%'EmyErgyF%)Ga+G(eH<)JoyLi,OughR-hRollSu*T Ti*TryVelope1Isode0U$Uip0AA'OdeOs]R%Upt0CapeSayS&)Ta>0Ern$H-s1Id&)IlOkeOl=1A@Amp!Ce[Ch<+C.eCludeCu'Ecu>Erci'Hau,Hib.I!I,ItOt-P<dPe@Pi*Pla(Po'P*[T&dTra0EEbrow:Br-CeCultyDeIntI`~L'MeMilyMousNNcyNtasyRmSh]TT$Th TigueUltV%.e3Atu*Bru?yD $EEdElMa!N)/iv$T^V W3B Ct]EldGu*LeLmLt N$NdNeNg NishReRmR,Sc$ShTT}[X_gAmeAshAtAv%EeIghtIpOatO{O%Ow UidUshY_mCusGIlLd~owOdOtR)Re,R+tRkRtu}RumRw?dSsil/ UndX_gi!AmeEqu|EshI&dIn+OgOntO,OwnOz&U.2ElNNnyRna)RyTu*:D+tInLaxy~ yMePRa+Rba+Rd&Rl-Rm|SSpTeTh U+Ze3N $NiusN*Nt!Nu(e/u*2O,0AntFtGg!Ng RaffeRlVe_dAn)A*A[IdeImp'ObeOomOryO=OwUe_tDde[LdOdO'RillaSpelSsipV nWn_bA)A(AntApeA[Av.yEatE&IdIefItOc yOupOwUnt_rdE[IdeIltIt?N3M:B.IrLfMm M, NdPpyRb%RdRshR=,TVeWkZ?d3AdAl`ArtAvyD+hogIght~oLmetLpNRo3Dd&Gh~NtPRe/%y5BbyCkeyLdLeLiday~owMeNeyOdPeRnRr%R'Sp.$/TelUrV 5BGeM<Mb!M%Nd*dNgryNtRd!RryRtSb<d3Brid:1EOn0EaEntifyLe2N%e4LLeg$L}[0A+Ita>M&'Mu}Pa@Po'Pro=Pul'0ChCludeComeC*a'DexD-a>Do%Du,ryF<tFl-tF%mHa!H .Iti$Je@JuryMa>N Noc|PutQuiryS<eSe@SideSpi*/$lTa@T e,ToVe,V.eVol=3On0L<dOla>Sue0Em1Ory:CketGu?RZz3AlousAns~yWel9BInKeUr}yY5D+I)MpNg!Ni%Nk/:Ng?oo3EnEpT^upY3CkDD}yNdNgdomSsTT^&TeTt&Wi4EeIfeO{Ow:BBelB%Dd DyKeMpNgua+PtopR+T T(UghUndryVaWWnWsu.Y Zy3Ad AfArnA=Ctu*FtGG$G&dIsu*M#NdNg`NsOp?dSs#Tt Vel3ArB tyBr?yC&'FeFtGhtKeMbM.NkOnQuid/Tt!VeZ?d5AdAnB, C$CkG-NelyNgOpTt yUdUn+VeY$5CkyGga+Mb N?N^Xury3R-s:Ch(eDG-G}tIdIlInJ%KeMm$NNa+Nda>NgoNs]Nu$P!Rb!R^Rg(R(eRketRria+SkSs/ T^T i$ThTrixTt XimumZe3AdowAnAsu*AtCh<-D$DiaLodyLtMb M%yNt]NuRcyR+R.RryShSsa+T$Thod3Dd!DnightLk~]M-NdNimumN%Nu>Rac!Rr%S ySs/akeXXedXtu*5Bi!DelDifyMM|N.%NkeyN, N`OnR$ReRn(gSqu.oTh T]T%Unta(U'VeVie5ChFf(LeLtiplySc!SeumShroomS-/Tu$3Self/ yTh:I=MePk(Rrow/yT]Tu*3ArCkEdGati=G!@I` PhewR=/TTw%kUtr$V WsXt3CeGht5B!I'M(eeOd!Rm$R`SeTab!TeTh(gTi)VelW5C!?Mb R'T:K0EyJe@Li+Scu*S =Ta(Vious0CurE<Tob 0Or1FF Fi)T&2L1Ay0DI=Ymp-0It0CeEI#L(eLy1EnEraIn]Po'T]1An+B.Ch?dD D(?yG<I|Ig($Ph<0Tr-h0H 0Tdo%T TputTside0AlEnEr0NN 0Yg&0/ 0O}:CtDd!GeIrLa)LmNdaNelN-N` P RadeR|RkRrotRtySsT^ThTi|TrolTt nU'VeYm|3A)AnutArAs<tL-<NN$tyNcilOp!Pp Rfe@Rm.Rs#T2O}OtoRa'Ys-$0AnoCn-Ctu*E)GGe#~LotNkO} Pe/olT^Zza_)A}tA,-A>AyEa'Ed+U{UgUn+2EmEtIntL?LeLi)NdNyOlPul?Rt]S.]Ssib!/TatoTt yV tyWd W _@i)Ai'Ed-tEf Epa*Es|EttyEv|I)IdeIm?yIntI%.yIs#Iva>IzeOb!mO)[Odu)Of.OgramOje@Omo>OofOp tyOsp O>@OudOvide2Bl-Dd(g~LpL'Mpk(N^PilPpyR^a'R.yRpo'R'ShTZz!3Ramid:99Al.yAntumArt E,]I{ItIzO>:Bb.Cco#CeCkD?DioIlInI'~yMpN^NdomN+PidReTeTh V&WZ%3AdyAlAs#BelBuildC$lCei=CipeC%dCyc!Du)F!@F%mFu'G]G*tGul?Je@LaxLea'LiefLyMa(Memb M(dMo=Nd NewNtOp&PairPeatPla)P%tQui*ScueSemb!Si,Sour)Sp#'SultTi*T*atTurnUn]Ve$ViewW?d2Y`m0BBb#CeChDeD+F!GhtGidNgOtPp!SkTu$V$V 5AdA,BotBu,CketM<)OfOkieOmSeTa>UghUndU>Y$5Bb DeGLeNNwayR$:DDd!D}[FeIlLadLm#L#LtLu>MeMp!NdTisfyToshiU)Usa+VeY1A!AnA*Att E}HemeHoolI&)I[%sOrp]OutRapRe&RiptRub1AAr^As#AtC#dC*tCt]Cur.yEdEkGm|Le@~M(?Ni%N'Nt&)RiesRvi)Ss]Tt!TupV&_dowAftAllowA*EdEllEriffIeldIftI}IpIv O{OeOotOpOrtOuld O=RimpRugUff!Y0Bl(gCkDeE+GhtGnL|Lk~yLv Mil?Mp!N)NgR&/ Tua>XZe1A>Et^IIllInIrtUll0AbAmEepEnd I)IdeIghtImOg<OtOwUsh0AllArtI!OkeOo`0A{AkeApIffOw0ApCc Ci$CkDaFtL?Ldi LidLut]L=Me#eNgOnRryRtUlUndUpUr)U`0A)A*Ati$AwnEakEci$EedEllEndH eI)Id IkeInIr.L.OilOns%O#OrtOtRayReadR(gY0Ua*UeezeUir*l_b!AdiumAffA+AirsAmpAndArtA>AyEakEelEmEpE*oI{IllIngO{Oma^O}OolOryO=Ra>gyReetRikeR#gRugg!Ud|UffUmb!Y!0Bje@Bm.BwayC)[ChDd&Ff G?G+,ItMm NNnyN'tP PplyP*meReRfa)R+Rpri'RroundR=ySpe@/a(1AllowAmpApArmE?EetIftImIngIt^Ord1MbolMptomRup/em:B!Ck!GIlL|LkNkPeR+tSk/eTtooXi3A^Am~NN<tNnisNtRm/Xt_nkAtEmeEnE%yE*EyIngIsOughtReeRi=RowUmbUnd 0CketDeG LtMb MeNyPRedSsueT!5A,BaccoDayDdl EGe` I!tK&MatoM%rowNeNgueNightOlO`PP-Pp!R^RnadoRtoi'SsT$Uri,W?dW WnY_{AdeAff-Ag-A(Ansf ApAshA=lAyEatEeEndI$IbeI{Igg ImIpOphyOub!U{UeUlyUmpetU,U`Y2BeIt]Mb!NaN}lRkeyRnRt!1El=EntyI)InI,O1PeP-$:5Ly5B*lla0Ab!Awa*C!Cov D DoFairFoldHappyIf%mIqueItIv 'KnownLo{TilUsu$Veil1Da>GradeHoldOnP Set1B<Ge0A+EEdEfulE![U$0Il.y:C<tCuumGueLidL!yL=NNishP%Rious/Ult3H-!L=tNd%Ntu*NueRbRifyRs]RyS'lT <3Ab!Br<tCiousCt%yDeoEw~a+Nta+Ol(Rtu$RusSaS.Su$T$Vid5C$I)IdLc<oLumeTeYa+:GeG#ItLk~LnutNtRfa*RmRri%ShSp/eT VeY3Al`Ap#ArA'lA` BDd(gEk&dIrdLcome/T_!AtEatEelEnE*IpIsp 0DeD`FeLd~NNdowNeNgNkNn Nt ReSdomSeShT}[5LfM<Nd OdOlRdRkRldRryR`_pE{E,!I,I>Ong::Rd3Ar~ow9UUngU`:3BraRo9NeO",wIe="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60";let dR=null;class pm extends vIe{constructor(){super("en",bIe,wIe)}static wordlist(){return dR==null&&(dR=new pm),dR}}function tse(t){return(1<<t)-1<<8-t&255}function EIe(t){return(1<<t)-1&255}function fR(t,e){Pne("NFKD"),e==null&&(e=pm.wordlist());const n=e.split(t);xe(n.length%3===0&&n.length>=12&&n.length<=24,"invalid mnemonic length","mnemonic","[ REDACTED ]");const r=new Uint8Array(Math.ceil(11*n.length/8));let i=0;for(let c=0;c<n.length;c++){let u=e.getWordIndex(n[c].normalize("NFKD"));xe(u>=0,`invalid mnemonic word at index ${c}`,"mnemonic","[ REDACTED ]");for(let f=0;f<11;f++)u&1<<10-f&&(r[i>>3]|=1<<7-i%8),i++}const s=32*n.length/3,o=n.length/3,a=tse(o),l=pt(za(r.slice(0,s/8)))[0]&a;return xe(l===(r[r.length-1]&a),"invalid mnemonic checksum","mnemonic","[ REDACTED ]"),rt(r.slice(0,s/8))}function hR(t,e){xe(t.length%4===0&&t.length>=16&&t.length<=32,"invalid entropy size","entropy","[ REDACTED ]"),e==null&&(e=pm.wordlist());const n=[0];let r=11;for(let o=0;o<t.length;o++)r>8?(n[n.length-1]<<=8,n[n.length-1]|=t[o],r-=8):(n[n.length-1]<<=r,n[n.length-1]|=t[o]>>8-r,n.push(t[o]&EIe(8-r)),r+=3);const i=t.length/4,s=parseInt(za(t).substring(2,4),16)&tse(i);return n[n.length-1]<<=i,n[n.length-1]|=s>>8-i,e.join(n.map(o=>e.getWord(o)))}const pR={};class dx{constructor(e,n,r,i,s){Se(this,"phrase");Se(this,"password");Se(this,"wordlist");Se(this,"entropy");i==null&&(i=""),s==null&&(s=pm.wordlist()),ph(e,pR,"Mnemonic"),Mt(this,{phrase:r,password:i,wordlist:s,entropy:n})}computeSeed(){const e=pi("mnemonic"+this.password,"NFKD");return mh(pi(this.phrase,"NFKD"),e,2048,64,"sha512")}static fromPhrase(e,n,r){const i=fR(e,r);return e=hR(pt(i),r),new dx(pR,i,e,n,r)}static fromEntropy(e,n,r){const i=pt(e,"entropy"),s=hR(i,r);return new dx(pR,rt(i),s,n,r)}static entropyToPhrase(e,n){const r=pt(e,"entropy");return hR(r,n)}static phraseToEntropy(e,n){return fR(e,n)}static isValidMnemonic(e,n){try{return fR(e,n),!0}catch{}return!1}}/*! MIT License. Copyright 2015-2022 Richard Moore <me@ricmoo.com>. See LICENSE.txt. */var Yi=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},mR=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},mT,xa,Xl;const SIe={16:10,24:12,32:14},AIe=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],ha=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],XS=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],TIe=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],kIe=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],CIe=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],NIe=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],_Ie=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],IIe=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],PIe=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],RIe=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],OIe=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],MIe=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],DIe=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],LIe=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function gR(t){const e=[];for(let n=0;n<t.length;n+=4)e.push(t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3]);return e}class M8{get key(){return Yi(this,mT,"f").slice()}constructor(e){if(mT.set(this,void 0),xa.set(this,void 0),Xl.set(this,void 0),!(this instanceof M8))throw Error("AES must be instanitated with `new`");mR(this,mT,new Uint8Array(e),"f");const n=SIe[this.key.length];if(n==null)throw new TypeError("invalid key size (must be 16, 24 or 32 bytes)");mR(this,Xl,[],"f"),mR(this,xa,[],"f");for(let u=0;u<=n;u++)Yi(this,Xl,"f").push([0,0,0,0]),Yi(this,xa,"f").push([0,0,0,0]);const r=(n+1)*4,i=this.key.length/4,s=gR(this.key);let o;for(let u=0;u<i;u++)o=u>>2,Yi(this,Xl,"f")[o][u%4]=s[u],Yi(this,xa,"f")[n-o][u%4]=s[u];let a=0,l=i,c;for(;l<r;){if(c=s[i-1],s[0]^=ha[c>>16&255]<<24^ha[c>>8&255]<<16^ha[c&255]<<8^ha[c>>24&255]^AIe[a]<<24,a+=1,i!=8)for(let g=1;g<i;g++)s[g]^=s[g-1];else{for(let g=1;g<i/2;g++)s[g]^=s[g-1];c=s[i/2-1],s[i/2]^=ha[c&255]^ha[c>>8&255]<<8^ha[c>>16&255]<<16^ha[c>>24&255]<<24;for(let g=i/2+1;g<i;g++)s[g]^=s[g-1]}let u=0,f,m;for(;u<i&&l<r;)f=l>>2,m=l%4,Yi(this,Xl,"f")[f][m]=s[u],Yi(this,xa,"f")[n-f][m]=s[u++],l++}for(let u=1;u<n;u++)for(let f=0;f<4;f++)c=Yi(this,xa,"f")[u][f],Yi(this,xa,"f")[u][f]=OIe[c>>24&255]^MIe[c>>16&255]^DIe[c>>8&255]^LIe[c&255]}encrypt(e){if(e.length!=16)throw new TypeError("invalid plaintext size (must be 16 bytes)");const n=Yi(this,Xl,"f").length-1,r=[0,0,0,0];let i=gR(e);for(let a=0;a<4;a++)i[a]^=Yi(this,Xl,"f")[0][a];for(let a=1;a<n;a++){for(let l=0;l<4;l++)r[l]=TIe[i[l]>>24&255]^kIe[i[(l+1)%4]>>16&255]^CIe[i[(l+2)%4]>>8&255]^NIe[i[(l+3)%4]&255]^Yi(this,Xl,"f")[a][l];i=r.slice()}const s=new Uint8Array(16);let o=0;for(let a=0;a<4;a++)o=Yi(this,Xl,"f")[n][a],s[4*a]=(ha[i[a]>>24&255]^o>>24)&255,s[4*a+1]=(ha[i[(a+1)%4]>>16&255]^o>>16)&255,s[4*a+2]=(ha[i[(a+2)%4]>>8&255]^o>>8)&255,s[4*a+3]=(ha[i[(a+3)%4]&255]^o)&255;return s}decrypt(e){if(e.length!=16)throw new TypeError("invalid ciphertext size (must be 16 bytes)");const n=Yi(this,xa,"f").length-1,r=[0,0,0,0];let i=gR(e);for(let a=0;a<4;a++)i[a]^=Yi(this,xa,"f")[0][a];for(let a=1;a<n;a++){for(let l=0;l<4;l++)r[l]=_Ie[i[l]>>24&255]^IIe[i[(l+3)%4]>>16&255]^PIe[i[(l+2)%4]>>8&255]^RIe[i[(l+1)%4]&255]^Yi(this,xa,"f")[a][l];i=r.slice()}const s=new Uint8Array(16);let o=0;for(let a=0;a<4;a++)o=Yi(this,xa,"f")[n][a],s[4*a]=(XS[i[a]>>24&255]^o>>24)&255,s[4*a+1]=(XS[i[(a+3)%4]>>16&255]^o>>16)&255,s[4*a+2]=(XS[i[(a+2)%4]>>8&255]^o>>8)&255,s[4*a+3]=(XS[i[(a+1)%4]&255]^o)&255;return s}}mT=new WeakMap,xa=new WeakMap,Xl=new WeakMap;class nse{constructor(e,n,r){if(r&&!(this instanceof r))throw new Error(`${e} must be instantiated with "new"`);Object.defineProperties(this,{aes:{enumerable:!0,value:new M8(n)},name:{enumerable:!0,value:e}})}}var QS=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},$0=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Lb,xu;class D8 extends nse{constructor(e,n){if(super("ECC",e,D8),Lb.set(this,void 0),xu.set(this,void 0),n){if(n.length%16)throw new TypeError("invalid iv size (must be 16 bytes)");QS(this,Lb,new Uint8Array(n),"f")}else QS(this,Lb,new Uint8Array(16),"f");QS(this,xu,this.iv,"f")}get iv(){return new Uint8Array($0(this,Lb,"f"))}encrypt(e){if(e.length%16)throw new TypeError("invalid plaintext size (must be multiple of 16 bytes)");const n=new Uint8Array(e.length);for(let r=0;r<e.length;r+=16){for(let i=0;i<16;i++)$0(this,xu,"f")[i]^=e[r+i];QS(this,xu,this.aes.encrypt($0(this,xu,"f")),"f"),n.set($0(this,xu,"f"),r)}return n}decrypt(e){if(e.length%16)throw new TypeError("invalid ciphertext size (must be multiple of 16 bytes)");const n=new Uint8Array(e.length);for(let r=0;r<e.length;r+=16){const i=this.aes.decrypt(e.subarray(r,r+16));for(let s=0;s<16;s++)n[r+s]=i[s]^$0(this,xu,"f")[s],$0(this,xu,"f")[s]=e[r+s]}return n}}Lb=new WeakMap,xu=new WeakMap;var z0=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},pa=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},jb,tp,va;class fx extends nse{constructor(e,n){super("CTR",e,fx),jb.set(this,void 0),tp.set(this,void 0),va.set(this,void 0),z0(this,va,new Uint8Array(16),"f"),pa(this,va,"f").fill(0),z0(this,jb,pa(this,va,"f"),"f"),z0(this,tp,16,"f"),n==null&&(n=1),typeof n=="number"?this.setCounterValue(n):this.setCounterBytes(n)}get counter(){return new Uint8Array(pa(this,va,"f"))}setCounterValue(e){if(!Number.isInteger(e)||e<0||e>Number.MAX_SAFE_INTEGER)throw new TypeError("invalid counter initial integer value");for(let n=15;n>=0;--n)pa(this,va,"f")[n]=e%256,e=Math.floor(e/256)}setCounterBytes(e){if(e.length!==16)throw new TypeError("invalid counter initial Uint8Array value length");pa(this,va,"f").set(e)}increment(){for(let e=15;e>=0;e--)if(pa(this,va,"f")[e]===255)pa(this,va,"f")[e]=0;else{pa(this,va,"f")[e]++;break}}encrypt(e){var n,r;const i=new Uint8Array(e);for(let s=0;s<i.length;s++)pa(this,tp,"f")===16&&(z0(this,jb,this.aes.encrypt(pa(this,va,"f")),"f"),z0(this,tp,0,"f"),this.increment()),i[s]^=pa(this,jb,"f")[z0(this,tp,(r=pa(this,tp,"f"),n=r++,r),"f"),n];return i}decrypt(e){return this.encrypt(e)}}jb=new WeakMap,tp=new WeakMap,va=new WeakMap;function jIe(t){if(t.length<16)throw new TypeError("PKCS#7 invalid length");const e=t[t.length-1];if(e>16)throw new TypeError("PKCS#7 padding byte out of range");const n=t.length-e;for(let r=0;r<e;r++)if(t[n+r]!==e)throw new TypeError("PKCS#7 invalid padding byte");return new Uint8Array(t.subarray(0,n))}function rse(t){return typeof t=="string"&&!t.startsWith("0x")&&(t="0x"+t),as(t)}function cb(t,e){for(t=String(t);t.length<e;)t="0"+t;return t}function j1(t){return typeof t=="string"?pi(t,"NFKC"):as(t)}function Zr(t,e){const n=e.match(/^([a-z0-9$_.-]*)(:([a-z]+))?(!)?$/i);xe(n!=null,"invalid path","path",e);const r=n[1],i=n[3],s=n[4]==="!";let o=t;for(const a of r.toLowerCase().split(".")){if(Array.isArray(o)){if(!a.match(/^[0-9]+$/))break;o=o[parseInt(a)]}else if(typeof o=="object"){let l=null;for(const c in o)if(c.toLowerCase()===a){l=o[c];break}o=l}else o=null;if(o==null)break}if(xe(!s||o!=null,"missing required value","path",r),i&&o!=null){if(i==="int"){if(typeof o=="string"&&o.match(/^-?[0-9]+$/))return parseInt(o);if(Number.isSafeInteger(o))return o}if(i==="number"&&typeof o=="string"&&o.match(/^-?[0-9.]*$/))return parseFloat(o);if(i==="data"&&typeof o=="string")return rse(o);if(i==="array"&&Array.isArray(o)||i===typeof o)return o;xe(!1,`wrong type found for ${i} `,"path",r)}return o}const ise="m/44'/60'/0'/0/0";function dV(t){try{const e=JSON.parse(t);if((e.version!=null?parseInt(e.version):0)===3)return!0}catch{}return!1}function BIe(t,e,n){if(Zr(t,"crypto.cipher:string")==="aes-128-ctr"){const i=Zr(t,"crypto.cipherparams.iv:data!"),s=new fx(e,i);return rt(s.decrypt(n))}Ke(!1,"unsupported cipher","UNSUPPORTED_OPERATION",{operation:"decrypt"})}function ik(t,e){const n=pt(e),r=Zr(t,"crypto.ciphertext:data!"),i=rt(Kn(On([n.slice(16,32),r]))).substring(2);xe(i===Zr(t,"crypto.mac:string!").toLowerCase(),"incorrect password","password","[ REDACTED ]");const s=BIe(t,n.slice(0,16),r),o=M1(s);if(t.address){let c=t.address.toLowerCase();c.startsWith("0x")||(c="0x"+c),xe(yn(c)===o,"keystore address/privateKey mismatch","address",t.address)}const a={address:o,privateKey:s};if(Zr(t,"x-ethers.version:string")==="0.1"){const c=n.slice(32,64),u=Zr(t,"x-ethers.mnemonicCiphertext:data!"),f=Zr(t,"x-ethers.mnemonicCounter:data!"),m=new fx(c,f);a.mnemonic={path:Zr(t,"x-ethers.path:string")||ise,locale:Zr(t,"x-ethers.locale:string")||"en",entropy:rt(pt(m.decrypt(u)))}}return a}function sse(t){const e=Zr(t,"crypto.kdf:string");if(e&&typeof e=="string"){if(e.toLowerCase()==="scrypt"){const n=Zr(t,"crypto.kdfparams.salt:data!"),r=Zr(t,"crypto.kdfparams.n:int!"),i=Zr(t,"crypto.kdfparams.r:int!"),s=Zr(t,"crypto.kdfparams.p:int!");xe(r>0&&(r&r-1)===0,"invalid kdf.N","kdf.N",r),xe(i>0&&s>0,"invalid kdf","kdf",e);const o=Zr(t,"crypto.kdfparams.dklen:int!");return xe(o===32,"invalid kdf.dklen","kdf.dflen",o),{name:"scrypt",salt:n,N:r,r:i,p:s,dkLen:64}}else if(e.toLowerCase()==="pbkdf2"){const n=Zr(t,"crypto.kdfparams.salt:data!"),r=Zr(t,"crypto.kdfparams.prf:string!"),i=r.split("-").pop();xe(i==="sha256"||i==="sha512","invalid kdf.pdf","kdf.pdf",r);const s=Zr(t,"crypto.kdfparams.c:int!"),o=Zr(t,"crypto.kdfparams.dklen:int!");return xe(o===32,"invalid kdf.dklen","kdf.dklen",o),{name:"pbkdf2",salt:n,count:s,dkLen:o,algorithm:i}}}xe(!1,"unsupported key-derivation function","kdf",e)}function UIe(t,e){const n=JSON.parse(t),r=j1(e),i=sse(n);if(i.name==="pbkdf2"){const{salt:f,count:m,dkLen:g,algorithm:v}=i,x=mh(r,f,m,g,v);return ik(n,x)}Ke(i.name==="scrypt","cannot be reached","UNKNOWN_ERROR",{params:i});const{salt:s,N:o,r:a,p:l,dkLen:c}=i,u=jx(r,s,o,a,l,c);return ik(n,u)}function fV(t){return new Promise(e=>{setTimeout(()=>{e()},t)})}async function FIe(t,e,n){const r=JSON.parse(t),i=j1(e),s=sse(r);if(s.name==="pbkdf2"){n&&(n(0),await fV(0));const{salt:m,count:g,dkLen:v,algorithm:x}=s,b=mh(i,m,g,v,x);return n&&(n(1),await fV(0)),ik(r,b)}Ke(s.name==="scrypt","cannot be reached","UNKNOWN_ERROR",{params:s});const{salt:o,N:a,r:l,p:c,dkLen:u}=s,f=await Lx(i,o,a,l,c,u,n);return ik(r,f)}function ose(t){const e=t.salt!=null?pt(t.salt,"options.salt"):Ju(32);let n=1<<17,r=8,i=1;return t.scrypt&&(t.scrypt.N&&(n=t.scrypt.N),t.scrypt.r&&(r=t.scrypt.r),t.scrypt.p&&(i=t.scrypt.p)),xe(typeof n=="number"&&n>0&&Number.isSafeInteger(n)&&(BigInt(n)&BigInt(n-1))===BigInt(0),"invalid scrypt N parameter","options.N",n),xe(typeof r=="number"&&r>0&&Number.isSafeInteger(r),"invalid scrypt r parameter","options.r",r),xe(typeof i=="number"&&i>0&&Number.isSafeInteger(i),"invalid scrypt p parameter","options.p",i),{name:"scrypt",dkLen:32,salt:e,N:n,r,p:i}}function ase(t,e,n,r){const i=pt(n.privateKey,"privateKey"),s=r.iv!=null?pt(r.iv,"options.iv"):Ju(16);xe(s.length===16,"invalid options.iv length","options.iv",r.iv);const o=r.uuid!=null?pt(r.uuid,"options.uuid"):Ju(16);xe(o.length===16,"invalid options.uuid length","options.uuid",r.iv);const a=t.slice(0,16),l=t.slice(16,32),c=new fx(a,s),u=pt(c.encrypt(i)),f=Kn(On([l,u])),m={address:n.address.substring(2).toLowerCase(),id:zke(o),version:3,Crypto:{cipher:"aes-128-ctr",cipherparams:{iv:rt(s).substring(2)},ciphertext:rt(u).substring(2),kdf:"scrypt",kdfparams:{salt:rt(e.salt).substring(2),n:e.N,dklen:32,p:e.p,r:e.r},mac:f.substring(2)}};if(n.mnemonic){const g=r.client!=null?r.client:`ethers/${_ne}`,v=n.mnemonic.path||ise,x=n.mnemonic.locale||"en",b=t.slice(32,64),E=pt(n.mnemonic.entropy,"account.mnemonic.entropy"),C=Ju(16),k=new fx(b,C),O=pt(k.encrypt(E)),U=new Date,$="UTC--"+(U.getUTCFullYear()+"-"+cb(U.getUTCMonth()+1,2)+"-"+cb(U.getUTCDate(),2)+"T"+cb(U.getUTCHours(),2)+"-"+cb(U.getUTCMinutes(),2)+"-"+cb(U.getUTCSeconds(),2)+".0Z")+"--"+m.address;m["x-ethers"]={client:g,gethFilename:$,path:v,locale:x,mnemonicCounter:rt(C).substring(2),mnemonicCiphertext:rt(O).substring(2),version:"0.1"}}return JSON.stringify(m)}function lse(t,e,n){n==null&&(n={});const r=j1(e),i=ose(n),s=jx(r,i.salt,i.N,i.r,i.p,64);return ase(pt(s),i,t,n)}async function cse(t,e,n){n==null&&(n={});const r=j1(e),i=ose(n),s=await Lx(r,i.salt,i.N,i.r,i.p,64,n.progressCallback);return ase(pt(s),i,t,n)}const yR="m/44'/60'/0'/0/0",$Ie=new Uint8Array([66,105,116,99,111,105,110,32,115,101,101,100]),kc=2147483648,zIe=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),HIe="0123456789abcdef";function sk(t,e){let n="";for(;t;)n=HIe[t%16]+n,t=Math.trunc(t/16);for(;n.length<e*2;)n="0"+n;return"0x"+n}function uM(t){const e=pt(t),n=mr(za(za(e)),0,4),r=On([e,n]);return Dne(r)}const tc={};function use(t,e,n,r){const i=new Uint8Array(37);t&kc?(Ke(r!=null,"cannot derive child of neutered node","UNSUPPORTED_OPERATION",{operation:"deriveChild"}),i.set(pt(r),1)):i.set(pt(n));for(let o=24;o>=0;o-=8)i[33+(o>>3)]=t>>24-o&255;const s=pt(Mx("sha512",e,i));return{IL:s.slice(0,32),IR:s.slice(32)}}function dse(t,e){const n=e.split("/");xe(n.length>0,"invalid path","path",e),n[0]==="m"&&(xe(t.depth===0,`cannot derive root path (i.e. path starting with "m/") for a node at non-zero depth ${t.depth}`,"path",e),n.shift());let r=t;for(let i=0;i<n.length;i++){const s=n[i];if(s.match(/^[0-9]+'$/)){const o=parseInt(s.substring(0,s.length-1));xe(o<kc,"invalid path index",`path[${i}]`,s),r=r.deriveChild(kc+o)}else if(s.match(/^[0-9]+$/)){const o=parseInt(s);xe(o<kc,"invalid path index",`path[${i}]`,s),r=r.deriveChild(o)}else xe(!1,"invalid path component",`path[${i}]`,s)}return r}var b1,dM,Yp,Bb;const sl=class sl extends nk{constructor(n,r,i,s,o,a,l,c,u){super(r,u);Be(this,b1);Se(this,"publicKey");Se(this,"fingerprint");Se(this,"parentFingerprint");Se(this,"mnemonic");Se(this,"chainCode");Se(this,"path");Se(this,"index");Se(this,"depth");ph(n,tc,"HDNodeWallet"),Mt(this,{publicKey:r.compressedPublicKey});const f=mr(Dx(za(this.publicKey)),0,4);Mt(this,{parentFingerprint:i,fingerprint:f,chainCode:s,path:o,index:a,depth:l}),Mt(this,{mnemonic:c})}connect(n){return new sl(tc,this.signingKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.mnemonic,n)}async encrypt(n,r){return await cse(tt(this,b1,dM).call(this),n,{progressCallback:r})}encryptSync(n){return lse(tt(this,b1,dM).call(this),n)}get extendedKey(){return Ke(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),uM(On(["0x0488ADE4",sk(this.depth,1),this.parentFingerprint,sk(this.index,4),this.chainCode,On(["0x00",this.privateKey])]))}hasPath(){return this.path!=null}neuter(){return new Pw(tc,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.provider)}deriveChild(n){const r=Qt(n,"index");xe(r<=4294967295,"invalid index","index",r);let i=this.path;i&&(i+="/"+(r&~kc),r&kc&&(i+="'"));const{IR:s,IL:o}=use(r,this.chainCode,this.publicKey,this.privateKey),a=new Tc(ad((P1(o)+BigInt(this.privateKey))%zIe,32));return new sl(tc,a,this.fingerprint,rt(s),i,r,this.depth+1,this.mnemonic,this.provider)}derivePath(n){return dse(this,n)}static fromExtendedKey(n){const r=Lr(Ske(n));xe(r.length===82||uM(r.slice(0,78))===n,"invalid extended key","extendedKey","[ REDACTED ]");const i=r[4],s=rt(r.slice(5,9)),o=parseInt(rt(r.slice(9,13)).substring(2),16),a=rt(r.slice(13,45)),l=r.slice(45,78);switch(rt(r.slice(0,4))){case"0x0488b21e":case"0x043587cf":{const c=rt(l);return new Pw(tc,M1(c),c,s,a,null,o,i,null)}case"0x0488ade4":case"0x04358394 ":if(l[0]!==0)break;return new sl(tc,new Tc(l.slice(1)),s,a,null,o,i,null,null)}xe(!1,"invalid extended key prefix","extendedKey","[ REDACTED ]")}static createRandom(n,r,i){var o;n==null&&(n=""),r==null&&(r=yR),i==null&&(i=pm.wordlist());const s=dx.fromEntropy(Ju(16),n,i);return tt(o=sl,Yp,Bb).call(o,s.computeSeed(),s).derivePath(r)}static fromMnemonic(n,r){var i;return r||(r=yR),tt(i=sl,Yp,Bb).call(i,n.computeSeed(),n).derivePath(r)}static fromPhrase(n,r,i,s){var a;r==null&&(r=""),i==null&&(i=yR),s==null&&(s=pm.wordlist());const o=dx.fromPhrase(n,r,s);return tt(a=sl,Yp,Bb).call(a,o.computeSeed(),o).derivePath(i)}static fromSeed(n){var r;return tt(r=sl,Yp,Bb).call(r,n,null)}};b1=new WeakSet,dM=function(){const n={address:this.address,privateKey:this.privateKey},r=this.mnemonic;return this.path&&r&&r.wordlist.locale==="en"&&r.password===""&&(n.mnemonic={path:this.path,locale:"en",entropy:r.entropy}),n},Yp=new WeakSet,Bb=function(n,r){xe(i2(n),"invalid seed","seed","[REDACTED]");const i=pt(n,"seed");xe(i.length>=16&&i.length<=64,"invalid seed","seed","[REDACTED]");const s=pt(Mx("sha512",$Ie,i)),o=new Tc(rt(s.slice(0,32)));return new sl(tc,o,"0x00000000",rt(s.slice(32)),"m",0,0,r,null)},Be(sl,Yp);let Zb=sl;class Pw extends rM{constructor(n,r,i,s,o,a,l,c,u){super(r,u);Se(this,"publicKey");Se(this,"fingerprint");Se(this,"parentFingerprint");Se(this,"chainCode");Se(this,"path");Se(this,"index");Se(this,"depth");ph(n,tc,"HDNodeVoidWallet"),Mt(this,{publicKey:i});const f=mr(Dx(za(i)),0,4);Mt(this,{publicKey:i,fingerprint:f,parentFingerprint:s,chainCode:o,path:a,index:l,depth:c})}connect(n){return new Pw(tc,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,n)}get extendedKey(){return Ke(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),uM(On(["0x0488B21E",sk(this.depth,1),this.parentFingerprint,sk(this.index,4),this.chainCode,this.publicKey]))}hasPath(){return this.path!=null}deriveChild(n){const r=Qt(n,"index");xe(r<=4294967295,"invalid index","index",r);let i=this.path;i&&(i+="/"+(r&~kc),r&kc&&(i+="'"));const{IR:s,IL:o}=use(r,this.chainCode,this.publicKey,null),a=Tc.addPoints(o,this.publicKey,!0),l=M1(a);return new Pw(tc,l,a,this.fingerprint,rt(s),i,r,this.depth+1,this.provider)}derivePath(n){return dse(this,n)}}function Mmt(t){const e=Qt(t,"index");return xe(e>=0&&e<kc,"invalid account index","index",e),`m/44'/60'/${e}'/0/0`}function Dmt(t){const e=Qt(t,"index");return xe(e>=0&&e<kc,"invalid account index","index",e),`m/44'/60'/0'/0/${e}`}function hV(t){try{if(JSON.parse(t).encseed)return!0}catch{}return!1}function pV(t,e){const n=JSON.parse(t),r=j1(e),i=yn(Zr(n,"ethaddr:string!")),s=rse(Zr(n,"encseed:string!"));xe(s&&s.length%16===0,"invalid encseed","json",t);const o=pt(mh(r,r,2e3,32,"sha256")).slice(0,16),a=s.slice(0,16),l=s.slice(16),c=new D8(o,a),u=jIe(pt(c.decrypt(l)));let f="";for(let m=0;m<u.length;m++)f+=String.fromCharCode(u[m]);return{address:i,privateKey:cd(f)}}function mV(t){return new Promise(e=>{setTimeout(()=>{e()},t)})}var w1,fM;const fp=class fp extends nk{constructor(e,n){typeof e=="string"&&!e.startsWith("0x")&&(e="0x"+e);let r=typeof e=="string"?new Tc(e):e;super(r,n)}connect(e){return new fp(this.signingKey,e)}async encrypt(e,n){const r={address:this.address,privateKey:this.privateKey};return await cse(r,e,{progressCallback:n})}encryptSync(e){const n={address:this.address,privateKey:this.privateKey};return lse(n,e)}static async fromEncryptedJson(e,n,r){var s;let i=null;return dV(e)?i=await FIe(e,n,r):hV(e)&&(r&&(r(0),await mV(0)),i=pV(e,n),r&&(r(1),await mV(0))),tt(s=fp,w1,fM).call(s,i)}static fromEncryptedJsonSync(e,n){var i;let r=null;return dV(e)?r=UIe(e,n):hV(e)?r=pV(e,n):xe(!1,"invalid JSON wallet","json","[ REDACTED ]"),tt(i=fp,w1,fM).call(i,r)}static createRandom(e){const n=Zb.createRandom();return e?n.connect(e):n}static fromPhrase(e,n){const r=Zb.fromPhrase(e);return n?r.connect(n):r}};w1=new WeakSet,fM=function(e){if(xe(e,"invalid JSON wallet","json","[ REDACTED ]"),"mnemonic"in e&&e.mnemonic&&e.mnemonic.locale==="en"){const r=dx.fromEntropy(e.mnemonic.entropy),i=Zb.fromMnemonic(r,e.mnemonic.path);if(i.address===e.address&&i.privateKey===e.privateKey)return i;console.log("WARNING: JSON mismatch address/privateKey != mnemonic; fallback onto private key")}const n=new fp(e.privateKey);return xe(n.address===e.address,"address/privateKey mismatch","json","[ REDACTED ]"),n},Be(fp,w1);let Qf=fp;var df={},xR={},vR={},bR={},wR={},ER={},ub,gV;function VIe(){if(gV)return ub;gV=1,ub=t(typeof on<"u"&&on)||t(ub.Buffer)||t(typeof window<"u"&&window.Buffer)||ub.Buffer;function t(e){return e&&e.isBuffer&&e}return ub}var SR,yV;function L8(){if(yV)return SR;yV=1;var t={}.toString;return SR=Array.isArray||function(e){return t.call(e)=="[object Array]"},SR}var AR={exports:{}},xV;function qIe(){if(xV)return AR.exports;xV=1;var t=Ka(),e=AR.exports=n(0);e.alloc=n,e.concat=t.concat,e.from=r;function n(i){return new Array(i)}function r(i){if(!t.isBuffer(i)&&t.isView(i))i=t.Uint8Array.from(i);else if(t.isArrayBuffer(i))i=new Uint8Array(i);else{if(typeof i=="string")return t.from.call(e,i);if(typeof i=="number")throw new TypeError('"value" argument must not be a number')}return Array.prototype.slice.call(i)}return AR.exports}var TR={exports:{}},vV;function GIe(){if(vV)return TR.exports;vV=1;var t=Ka(),e=t.global,n=TR.exports=t.hasBuffer?r(0):[];n.alloc=t.hasBuffer&&e.alloc||r,n.concat=t.concat,n.from=i;function r(s){return new e(s)}function i(s){if(!t.isBuffer(s)&&t.isView(s))s=t.Uint8Array.from(s);else if(t.isArrayBuffer(s))s=new Uint8Array(s);else{if(typeof s=="string")return t.from.call(n,s);if(typeof s=="number")throw new TypeError('"value" argument must not be a number')}return e.from&&e.from.length!==1?e.from(s):new e(s)}return TR.exports}var kR={exports:{}},bV;function KIe(){if(bV)return kR.exports;bV=1;var t=Ka(),e=kR.exports=t.hasArrayBuffer?n(0):[];e.alloc=n,e.concat=t.concat,e.from=r;function n(i){return new Uint8Array(i)}function r(i){if(t.isView(i)){var s=i.byteOffset,o=i.byteLength;i=i.buffer,i.byteLength!==o&&(i.slice?i=i.slice(s,s+o):(i=new Uint8Array(i),i.byteLength!==o&&(i=Array.prototype.slice.call(i,s,s+o))))}else{if(typeof i=="string")return t.from.call(e,i);if(typeof i=="number")throw new TypeError('"value" argument must not be a number')}return new Uint8Array(i)}return kR.exports}var H0={},db={},wV;function WIe(){if(wV)return db;wV=1,db.copy=n,db.toString=e,db.write=t;function t(r,i){for(var s=this,o=i||(i|=0),a=r.length,l=0,c=0;c<a;)l=r.charCodeAt(c++),l<128?s[o++]=l:l<2048?(s[o++]=192|l>>>6,s[o++]=128|l&63):l<55296||l>57343?(s[o++]=224|l>>>12,s[o++]=128|l>>>6&63,s[o++]=128|l&63):(l=(l-55296<<10|r.charCodeAt(c++)-56320)+65536,s[o++]=240|l>>>18,s[o++]=128|l>>>12&63,s[o++]=128|l>>>6&63,s[o++]=128|l&63);return o-i}function e(r,i,s){var o=this,a=i|0;s||(s=o.length);for(var l="",c=0;a<s;){if(c=o[a++],c<128){l+=String.fromCharCode(c);continue}(c&224)===192?c=(c&31)<<6|o[a++]&63:(c&240)===224?c=(c&15)<<12|(o[a++]&63)<<6|o[a++]&63:(c&248)===240&&(c=(c&7)<<18|(o[a++]&63)<<12|(o[a++]&63)<<6|o[a++]&63),c>=65536?(c-=65536,l+=String.fromCharCode((c>>>10)+55296,(c&1023)+56320)):l+=String.fromCharCode(c)}return l}function n(r,i,s,o){var a;s||(s=0),!o&&o!==0&&(o=this.length),i||(i=0);var l=o-s;if(r===this&&s<i&&i<o)for(a=l-1;a>=0;a--)r[a+i]=this[a+s];else for(a=0;a<l;a++)r[a+i]=this[a+s];return l}return db}var EV;function j8(){if(EV)return H0;EV=1;var t=WIe();H0.copy=s,H0.slice=o,H0.toString=a,H0.write=l("write");var e=Ka(),n=e.global,r=e.hasBuffer&&"TYPED_ARRAY_SUPPORT"in n,i=r&&!n.TYPED_ARRAY_SUPPORT;function s(c,u,f,m){var g=e.isBuffer(this),v=e.isBuffer(c);if(g&&v)return this.copy(c,u,f,m);if(!i&&!g&&!v&&e.isView(this)&&e.isView(c)){var x=f||m!=null?o.call(this,f,m):this;return c.set(x,u),x.length}else return t.copy.call(this,c,u,f,m)}function o(c,u){var f=this.slice||!i&&this.subarray;if(f)return f.call(this,c,u);var m=e.alloc.call(this,u-c);return s.call(this,m,0,c,u),m}function a(c,u,f){var m=!r&&e.isBuffer(this)?this.toString:t.toString;return m.apply(this,arguments)}function l(c){return u;function u(){var f=this[c]||t[c];return f.apply(this,arguments)}}return H0}var SV;function Ka(){return SV||(SV=1,(function(t){var e=t.global=VIe(),n=t.hasBuffer=e&&!!e.isBuffer,r=t.hasArrayBuffer=typeof ArrayBuffer<"u",i=t.isArray=L8();t.isArrayBuffer=r?x:C;var s=t.isBuffer=n?e.isBuffer:C,o=t.isView=r?ArrayBuffer.isView||k("ArrayBuffer","buffer"):C;t.alloc=m,t.concat=g,t.from=f;var a=t.Array=qIe(),l=t.Buffer=GIe(),c=t.Uint8Array=KIe(),u=t.prototype=j8();function f(O){return typeof O=="string"?b.call(this,O):E(this).from(O)}function m(O){return E(this).alloc(O)}function g(O,U){U||(U=0,Array.prototype.forEach.call(O,j));var R=this!==t&&this||O[0],$=m.call(R,U),V=0;return Array.prototype.forEach.call(O,F),$;function j(W){U+=W.length}function F(W){V+=u.copy.call(W,$,V)}}var v=k("ArrayBuffer");function x(O){return O instanceof ArrayBuffer||v(O)}function b(O){var U=O.length*3,R=m.call(this,U),$=u.write.call(R,O);return U!==$&&(R=u.slice.call(R,0,$)),R}function E(O){return s(O)?l:o(O)?c:i(O)?a:n?l:r?c:a}function C(){return!1}function k(O,U){return O="[object "+O+"]",function(R){return R!=null&&{}.toString.call(U?R[U]:R)===O}}})(ER)),ER}var AV;function B8(){if(AV)return wR;AV=1,wR.ExtBuffer=e;var t=Ka();function e(n,r){if(!(this instanceof e))return new e(n,r);this.buffer=t.from(n),this.type=r}return wR}var CR={},TV;function YIe(){if(TV)return CR;TV=1,CR.setExtPackers=s;var t=Ka(),e=t.global,n=t.Uint8Array.from,r,i={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function s(u){u.addExtPacker(14,Error,[c,o]),u.addExtPacker(1,EvalError,[c,o]),u.addExtPacker(2,RangeError,[c,o]),u.addExtPacker(3,ReferenceError,[c,o]),u.addExtPacker(4,SyntaxError,[c,o]),u.addExtPacker(5,TypeError,[c,o]),u.addExtPacker(6,URIError,[c,o]),u.addExtPacker(10,RegExp,[l,o]),u.addExtPacker(11,Boolean,[a,o]),u.addExtPacker(12,String,[a,o]),u.addExtPacker(13,Date,[Number,o]),u.addExtPacker(15,Number,[a,o]),typeof Uint8Array<"u"&&(u.addExtPacker(17,Int8Array,n),u.addExtPacker(18,Uint8Array,n),u.addExtPacker(19,Int16Array,n),u.addExtPacker(20,Uint16Array,n),u.addExtPacker(21,Int32Array,n),u.addExtPacker(22,Uint32Array,n),u.addExtPacker(23,Float32Array,n),typeof Float64Array<"u"&&u.addExtPacker(24,Float64Array,n),typeof Uint8ClampedArray<"u"&&u.addExtPacker(25,Uint8ClampedArray,n),u.addExtPacker(26,ArrayBuffer,n),u.addExtPacker(29,DataView,n)),t.hasBuffer&&u.addExtPacker(27,e,t.from)}function o(u){return r||(r=gse().encode),r(u)}function a(u){return u.valueOf()}function l(u){u=RegExp.prototype.toString.call(u).split("/"),u.shift();var f=[u.pop()];return f.unshift(u.join("/")),f}function c(u){var f={};for(var m in i)f[m]=u[m];return f}return CR}var NR={},ZS={},kV;function U8(){return kV||(kV=1,(function(t){(function(e){var n="undefined",r=n!==typeof on&&on,i=n!==typeof Uint8Array&&Uint8Array,s=n!==typeof ArrayBuffer&&ArrayBuffer,o=[0,0,0,0,0,0,0,0],a=Array.isArray||R,l=4294967296,c=16777216,u;f("Uint64BE",!0,!0),f("Int64BE",!0,!1),f("Uint64LE",!1,!0),f("Int64LE",!1,!1);function f($,V,j){var F=V?0:4,W=V?4:0,H=V?0:3,B=V?1:2,A=V?2:1,I=V?3:0,D=V?C:O,z=V?k:U,G=q.prototype,te="is"+$,K="_"+te;return G.buffer=void 0,G.offset=0,G[K]=!0,G.toNumber=X,G.toString=re,G.toJSON=X,G.toArray=m,r&&(G.toBuffer=g),i&&(G.toArrayBuffer=v),q[te]=M,e[$]=q,q;function q(ce,me,ue,le){return this instanceof q?_(this,ce,me,ue,le):new q(ce,me,ue,le)}function M(ce){return!!(ce&&ce[K])}function _(ce,me,ue,le,Ie){if(i&&s&&(me instanceof s&&(me=new i(me)),le instanceof s&&(le=new i(le))),!me&&!ue&&!le&&!u){ce.buffer=E(o,0);return}if(!x(me,ue)){var Ne=u||Array;Ie=ue,le=me,ue=0,me=new Ne(8)}ce.buffer=me,ce.offset=ue|=0,n!==typeof le&&(typeof le=="string"?Y(me,ue,le,Ie||10):x(le,Ie)?b(me,ue,le,Ie):typeof Ie=="number"?(oe(me,ue+F,le),oe(me,ue+W,Ie)):le>0?D(me,ue,le):le<0?z(me,ue,le):b(me,ue,o,0))}function Y(ce,me,ue,le){var Ie=0,Ne=ue.length,$e=0,Ze=0;ue[0]==="-"&&Ie++;for(var Ye=Ie;Ie<Ne;){var We=parseInt(ue[Ie++],le);if(!(We>=0))break;Ze=Ze*le+We,$e=$e*le+Math.floor(Ze/l),Ze%=l}Ye&&($e=~$e,Ze?Ze=l-Ze:$e++),oe(ce,me+F,$e),oe(ce,me+W,Ze)}function X(){var ce=this.buffer,me=this.offset,ue=Ee(ce,me+F),le=Ee(ce,me+W);return j||(ue|=0),ue?ue*l+le:le}function re(ce){var me=this.buffer,ue=this.offset,le=Ee(me,ue+F),Ie=Ee(me,ue+W),Ne="",$e=!j&&le&2147483648;for($e&&(le=~le,Ie=l-Ie),ce=ce||10;;){var Ze=le%ce*l+Ie;if(le=Math.floor(le/ce),Ie=Math.floor(Ze/ce),Ne=(Ze%ce).toString(ce)+Ne,!le&&!Ie)break}return $e&&(Ne="-"+Ne),Ne}function oe(ce,me,ue){ce[me+I]=ue&255,ue=ue>>8,ce[me+A]=ue&255,ue=ue>>8,ce[me+B]=ue&255,ue=ue>>8,ce[me+H]=ue&255}function Ee(ce,me){return ce[me+H]*c+(ce[me+B]<<16)+(ce[me+A]<<8)+ce[me+I]}}function m($){var V=this.buffer,j=this.offset;return u=null,$!==!1&&j===0&&V.length===8&&a(V)?V:E(V,j)}function g($){var V=this.buffer,j=this.offset;if(u=r,$!==!1&&j===0&&V.length===8&&on.isBuffer(V))return V;var F=new r(8);return b(F,0,V,j),F}function v($){var V=this.buffer,j=this.offset,F=V.buffer;if(u=i,$!==!1&&j===0&&F instanceof s&&F.byteLength===8)return F;var W=new i(8);return b(W,0,V,j),W.buffer}function x($,V){var j=$&&$.length;return V|=0,j&&V+8<=j&&typeof $[V]!="string"}function b($,V,j,F){V|=0,F|=0;for(var W=0;W<8;W++)$[V++]=j[F++]&255}function E($,V){return Array.prototype.slice.call($,V,V+8)}function C($,V,j){for(var F=V+8;F>V;)$[--F]=j&255,j/=256}function k($,V,j){var F=V+8;for(j++;F>V;)$[--F]=-j&255^255,j/=256}function O($,V,j){for(var F=V+8;V<F;)$[V++]=j&255,j/=256}function U($,V,j){var F=V+8;for(j++;V<F;)$[V++]=-j&255^255,j/=256}function R($){return!!$&&Object.prototype.toString.call($)=="[object Array]"}})(typeof t.nodeName!="string"?t:ZS||{})})(ZS)),ZS}var _R={},eA={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var CV;function fse(){return CV||(CV=1,eA.read=function(t,e,n,r,i){var s,o,a=i*8-r-1,l=(1<<a)-1,c=l>>1,u=-7,f=n?i-1:0,m=n?-1:1,g=t[e+f];for(f+=m,s=g&(1<<-u)-1,g>>=-u,u+=a;u>0;s=s*256+t[e+f],f+=m,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=r;u>0;o=o*256+t[e+f],f+=m,u-=8);if(s===0)s=1-c;else{if(s===l)return o?NaN:(g?-1:1)*(1/0);o=o+Math.pow(2,r),s=s-c}return(g?-1:1)*o*Math.pow(2,s-r)},eA.write=function(t,e,n,r,i,s){var o,a,l,c=s*8-i-1,u=(1<<c)-1,f=u>>1,m=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=r?0:s-1,v=r?1:-1,x=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+f>=1?e+=m/l:e+=m*Math.pow(2,1-f),e*l>=2&&(o++,l/=2),o+f>=u?(a=0,o=u):o+f>=1?(a=(e*l-1)*Math.pow(2,i),o=o+f):(a=e*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;t[n+g]=a&255,g+=v,a/=256,i-=8);for(o=o<<i|a,c+=i;c>0;t[n+g]=o&255,g+=v,o/=256,c-=8);t[n+g-v]|=x*128}),eA}var IR={},NV;function hse(){if(NV)return IR;NV=1;for(var t=IR.uint8=new Array(256),e=0;e<=255;e++)t[e]=n(e);function n(r){return function(i){var s=i.reserve(1);i.buffer[s]=r}}return IR}var _V;function JIe(){if(_V)return _R;_V=1;var t=fse(),e=U8(),n=e.Uint64BE,r=e.Int64BE,i=hse().uint8,s=Ka(),o=s.global,a=s.hasBuffer&&"TYPED_ARRAY_SUPPORT"in o,l=a&&!o.TYPED_ARRAY_SUPPORT,c=s.hasBuffer&&o.prototype||{};_R.getWriteToken=u;function u(R){return R&&R.uint8array?f():l||s.hasBuffer&&R&&R.safe?g():m()}function f(){var R=m();return R[202]=E(202,4,O),R[203]=E(203,8,U),R}function m(){var R=i.slice();return R[196]=v(196),R[197]=x(197),R[198]=b(198),R[199]=v(199),R[200]=x(200),R[201]=b(201),R[202]=E(202,4,c.writeFloatBE||O,!0),R[203]=E(203,8,c.writeDoubleBE||U,!0),R[204]=v(204),R[205]=x(205),R[206]=b(206),R[207]=E(207,8,C),R[208]=v(208),R[209]=x(209),R[210]=b(210),R[211]=E(211,8,k),R[217]=v(217),R[218]=x(218),R[219]=b(219),R[220]=x(220),R[221]=b(221),R[222]=x(222),R[223]=b(223),R}function g(){var R=i.slice();return R[196]=E(196,1,o.prototype.writeUInt8),R[197]=E(197,2,o.prototype.writeUInt16BE),R[198]=E(198,4,o.prototype.writeUInt32BE),R[199]=E(199,1,o.prototype.writeUInt8),R[200]=E(200,2,o.prototype.writeUInt16BE),R[201]=E(201,4,o.prototype.writeUInt32BE),R[202]=E(202,4,o.prototype.writeFloatBE),R[203]=E(203,8,o.prototype.writeDoubleBE),R[204]=E(204,1,o.prototype.writeUInt8),R[205]=E(205,2,o.prototype.writeUInt16BE),R[206]=E(206,4,o.prototype.writeUInt32BE),R[207]=E(207,8,C),R[208]=E(208,1,o.prototype.writeInt8),R[209]=E(209,2,o.prototype.writeInt16BE),R[210]=E(210,4,o.prototype.writeInt32BE),R[211]=E(211,8,k),R[217]=E(217,1,o.prototype.writeUInt8),R[218]=E(218,2,o.prototype.writeUInt16BE),R[219]=E(219,4,o.prototype.writeUInt32BE),R[220]=E(220,2,o.prototype.writeUInt16BE),R[221]=E(221,4,o.prototype.writeUInt32BE),R[222]=E(222,2,o.prototype.writeUInt16BE),R[223]=E(223,4,o.prototype.writeUInt32BE),R}function v(R){return function($,V){var j=$.reserve(2),F=$.buffer;F[j++]=R,F[j]=V}}function x(R){return function($,V){var j=$.reserve(3),F=$.buffer;F[j++]=R,F[j++]=V>>>8,F[j]=V}}function b(R){return function($,V){var j=$.reserve(5),F=$.buffer;F[j++]=R,F[j++]=V>>>24,F[j++]=V>>>16,F[j++]=V>>>8,F[j]=V}}function E(R,$,V,j){return function(F,W){var H=F.reserve($+1);F.buffer[H++]=R,V.call(F.buffer,W,H,j)}}function C(R,$){new n(this,$,R)}function k(R,$){new r(this,$,R)}function O(R,$){t.write(this,R,$,!1,23,4)}function U(R,$){t.write(this,R,$,!1,52,8)}return _R}var IV;function XIe(){if(IV)return NR;IV=1;var t=L8(),e=U8(),n=e.Uint64BE,r=e.Int64BE,i=Ka(),s=j8(),o=JIe(),a=hse().uint8,l=B8().ExtBuffer,c=typeof Uint8Array<"u",u=typeof Map<"u",f=[];f[1]=212,f[2]=213,f[4]=214,f[8]=215,f[16]=216,NR.getWriteType=m;function m(g){var v=o.getWriteToken(g),x=g&&g.useraw,b=c&&g&&g.binarraybuffer,E=b?i.isArrayBuffer:i.isBuffer,C=b?G:z,k=u&&g&&g.usemap,O=k?q:K,U={boolean:R,function:I,number:$,object:x?A:B,string:H(x?W:F),symbol:I,undefined:I};return U;function R(_,Y){var X=Y?195:194;v[X](_,Y)}function $(_,Y){var X=Y|0,re;if(Y!==X){re=203,v[re](_,Y);return}else-32<=X&&X<=127?re=X&255:0<=X?re=X<=255?204:X<=65535?205:206:re=-128<=X?208:-32768<=X?209:210;v[re](_,X)}function V(_,Y){var X=207;v[X](_,Y.toArray())}function j(_,Y){var X=211;v[X](_,Y.toArray())}function F(_){return _<32?1:_<=255?2:_<=65535?3:5}function W(_){return _<32?1:_<=65535?3:5}function H(_){return Y;function Y(X,re){var oe=re.length,Ee=5+oe*3;X.offset=X.reserve(Ee);var ce=X.buffer,me=_(oe),ue=X.offset+me;oe=s.write.call(ce,re,ue);var le=_(oe);if(me!==le){var Ie=ue+le-me,Ne=ue+oe;s.copy.call(ce,ce,Ie,ue,Ne)}var $e=le===1?160+oe:le<=3?215+le:219;v[$e](X,oe),X.offset+=oe}}function B(_,Y){if(Y===null)return I(_,Y);if(E(Y))return C(_,Y);if(t(Y))return D(_,Y);if(n.isUint64BE(Y))return V(_,Y);if(r.isInt64BE(Y))return j(_,Y);var X=_.codec.getExtPacker(Y);if(X&&(Y=X(Y)),Y instanceof l)return te(_,Y);O(_,Y)}function A(_,Y){if(E(Y))return M(_,Y);B(_,Y)}function I(_,Y){var X=192;v[X](_,Y)}function D(_,Y){var X=Y.length,re=X<16?144+X:X<=65535?220:221;v[re](_,X);for(var oe=_.codec.encode,Ee=0;Ee<X;Ee++)oe(_,Y[Ee])}function z(_,Y){var X=Y.length,re=X<255?196:X<=65535?197:198;v[re](_,X),_.send(Y)}function G(_,Y){z(_,new Uint8Array(Y))}function te(_,Y){var X=Y.buffer,re=X.length,oe=f[re]||(re<255?199:re<=65535?200:201);v[oe](_,re),a[Y.type](_),_.send(X)}function K(_,Y){var X=Object.keys(Y),re=X.length,oe=re<16?128+re:re<=65535?222:223;v[oe](_,re);var Ee=_.codec.encode;X.forEach(function(ce){Ee(_,ce),Ee(_,Y[ce])})}function q(_,Y){if(!(Y instanceof Map))return K(_,Y);var X=Y.size,re=X<16?128+X:X<=65535?222:223;v[re](_,X);var oe=_.codec.encode;Y.forEach(function(Ee,ce,me){oe(_,ce),oe(_,Ee)})}function M(_,Y){var X=Y.length,re=X<32?160+X:X<=65535?218:219;v[re](_,X),_.send(Y)}}return NR}var V0={},PV;function b2(){if(PV)return V0;PV=1;var t=L8();V0.createCodec=a,V0.install=r,V0.filter=o;var e=Ka();function n(l){if(!(this instanceof n))return new n(l);this.options=l,this.init()}n.prototype.init=function(){var l=this.options;return l&&l.uint8array&&(this.bufferish=e.Uint8Array),this};function r(l){for(var c in l)n.prototype[c]=i(n.prototype[c],l[c])}function i(l,c){return l&&c?u:l||c;function u(){return l.apply(this,arguments),c.apply(this,arguments)}}function s(l){return l=l.slice(),function(u){return l.reduce(c,u)};function c(u,f){return f(u)}}function o(l){return t(l)?s(l):l}function a(l){return new n(l)}return V0.preset=a({preset:!0}),V0}var RV;function F8(){if(RV)return bR;RV=1;var t=B8().ExtBuffer,e=YIe(),n=XIe(),r=b2();r.install({addExtPacker:o,getExtPacker:a,init:s}),bR.preset=s.call(r.preset);function i(l){var c=n.getWriteType(l);return u;function u(f,m){var g=c[typeof m];if(!g)throw new Error('Unsupported type "'+typeof m+'": '+m);g(f,m)}}function s(){var l=this.options;return this.encode=i(l),l&&l.preset&&e.setExtPackers(this),this}function o(l,c,u){u=r.filter(u);var f=c.name;if(f&&f!=="Object"){var m=this.extPackers||(this.extPackers={});m[f]=v}else{var g=this.extEncoderList||(this.extEncoderList=[]);g.unshift([c,v])}function v(x){return u&&(x=u(x)),new t(x,l)}}function a(l){var c=this.extPackers||(this.extPackers={}),u=l.constructor,f=u&&u.name&&c[u.name];if(f)return f;for(var m=this.extEncoderList||(this.extEncoderList=[]),g=m.length,v=0;v<g;v++){var x=m[v];if(u===x[0])return x[1]}}return bR}var tA={},OV;function pse(){if(OV)return tA;OV=1,tA.FlexDecoder=i,tA.FlexEncoder=s;var t=Ka(),e=2048,n=65536,r="BUFFER_SHORTAGE";function i(){if(!(this instanceof i))return new i}function s(){if(!(this instanceof s))return new s}i.mixin=g(o()),i.mixin(i.prototype),s.mixin=g(a()),s.mixin(s.prototype);function o(){return{bufferish:t,write:v,fetch:c,flush:x,push:f,pull:m,read:u,reserve:b,offset:0};function v(E){var C=this.offset?t.prototype.slice.call(this.buffer,this.offset):this.buffer;this.buffer=C?E?this.bufferish.concat([C,E]):C:E,this.offset=0}function x(){for(;this.offset<this.buffer.length;){var E=this.offset,C;try{C=this.fetch()}catch(k){if(k&&k.message!=r)throw k;this.offset=E;break}this.push(C)}}function b(E){var C=this.offset,k=C+E;if(k>this.buffer.length)throw new Error(r);return this.offset=k,C}}function a(){return{bufferish:t,write:l,fetch:v,flush:x,push:f,pull:b,read:u,reserve:E,send:C,maxBufferSize:n,minBufferSize:e,offset:0,start:0};function v(){var k=this.start;if(k<this.offset){var O=this.start=this.offset;return t.prototype.slice.call(this.buffer,k,O)}}function x(){for(;this.start<this.offset;){var k=this.fetch();k&&this.push(k)}}function b(){var k=this.buffers||(this.buffers=[]),O=k.length>1?this.bufferish.concat(k):k[0];return k.length=0,O}function E(k){var O=k|0;if(this.buffer){var U=this.buffer.length,R=this.offset|0,$=R+O;if($<U)return this.offset=$,R;this.flush(),k=Math.max(k,Math.min(U*2,this.maxBufferSize))}return k=Math.max(k,this.minBufferSize),this.buffer=this.bufferish.alloc(k),this.start=0,this.offset=O,0}function C(k){var O=k.length;if(O>this.minBufferSize)this.flush(),this.push(k);else{var U=this.reserve(O);t.prototype.copy.call(k,this.buffer,U)}}}function l(){throw new Error("method not implemented: write()")}function c(){throw new Error("method not implemented: fetch()")}function u(){var v=this.buffers&&this.buffers.length;return v?(this.flush(),this.pull()):this.fetch()}function f(v){var x=this.buffers||(this.buffers=[]);x.push(v)}function m(){var v=this.buffers||(this.buffers=[]);return v.shift()}function g(v){return x;function x(b){for(var E in v)b[E]=v[E];return b}}return tA}var MV;function mse(){if(MV)return vR;MV=1,vR.EncodeBuffer=n;var t=F8().preset,e=pse().FlexEncoder;e.mixin(n.prototype);function n(r){if(!(this instanceof n))return new n(r);if(r&&(this.options=r,r.codec)){var i=this.codec=r.codec;i.bufferish&&(this.bufferish=i.bufferish)}}return n.prototype.codec=t,n.prototype.write=function(r){this.codec.encode(this,r)},vR}var DV;function gse(){if(DV)return xR;DV=1,xR.encode=e;var t=mse().EncodeBuffer;function e(n,r){var i=new t(r);return i.write(n),i.read()}return xR}var PR={},RR={},OR={},MR={},LV;function QIe(){if(LV)return MR;LV=1,MR.setExtUnpackers=i;var t=Ka(),e=t.global,n,r={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function i(u){u.addExtUnpacker(14,[s,a(Error)]),u.addExtUnpacker(1,[s,a(EvalError)]),u.addExtUnpacker(2,[s,a(RangeError)]),u.addExtUnpacker(3,[s,a(ReferenceError)]),u.addExtUnpacker(4,[s,a(SyntaxError)]),u.addExtUnpacker(5,[s,a(TypeError)]),u.addExtUnpacker(6,[s,a(URIError)]),u.addExtUnpacker(10,[s,o]),u.addExtUnpacker(11,[s,l(Boolean)]),u.addExtUnpacker(12,[s,l(String)]),u.addExtUnpacker(13,[s,l(Date)]),u.addExtUnpacker(15,[s,l(Number)]),typeof Uint8Array<"u"&&(u.addExtUnpacker(17,l(Int8Array)),u.addExtUnpacker(18,l(Uint8Array)),u.addExtUnpacker(19,[c,l(Int16Array)]),u.addExtUnpacker(20,[c,l(Uint16Array)]),u.addExtUnpacker(21,[c,l(Int32Array)]),u.addExtUnpacker(22,[c,l(Uint32Array)]),u.addExtUnpacker(23,[c,l(Float32Array)]),typeof Float64Array<"u"&&u.addExtUnpacker(24,[c,l(Float64Array)]),typeof Uint8ClampedArray<"u"&&u.addExtUnpacker(25,l(Uint8ClampedArray)),u.addExtUnpacker(26,c),u.addExtUnpacker(29,[c,l(DataView)])),t.hasBuffer&&u.addExtUnpacker(27,l(e))}function s(u){return n||(n=vse().decode),n(u)}function o(u){return RegExp.apply(null,u)}function a(u){return function(f){var m=new u;for(var g in r)m[g]=f[g];return m}}function l(u){return function(f){return new u(f)}}function c(u){return new Uint8Array(u).buffer}return MR}var nA={},jV;function yse(){if(jV)return nA;jV=1;var t=fse(),e=U8(),n=e.Uint64BE,r=e.Int64BE;nA.getReadFormat=l,nA.readUint8=b;var i=Ka(),s=j8(),o=typeof Map<"u",a=!0;function l(B){var A=i.hasArrayBuffer&&B&&B.binarraybuffer,I=B&&B.int64,D=o&&B&&B.usemap,z={map:D?u:c,array:f,str:m,bin:A?v:g,ext:x,uint8:b,uint16:C,uint32:O,uint64:R(8,I?j:$),int8:E,int16:k,int32:U,int64:R(8,I?F:V),float32:R(4,W),float64:R(8,H)};return z}function c(B,A){var I={},D,z=new Array(A),G=new Array(A),te=B.codec.decode;for(D=0;D<A;D++)z[D]=te(B),G[D]=te(B);for(D=0;D<A;D++)I[z[D]]=G[D];return I}function u(B,A){var I=new Map,D,z=new Array(A),G=new Array(A),te=B.codec.decode;for(D=0;D<A;D++)z[D]=te(B),G[D]=te(B);for(D=0;D<A;D++)I.set(z[D],G[D]);return I}function f(B,A){for(var I=new Array(A),D=B.codec.decode,z=0;z<A;z++)I[z]=D(B);return I}function m(B,A){var I=B.reserve(A),D=I+A;return s.toString.call(B.buffer,"utf-8",I,D)}function g(B,A){var I=B.reserve(A),D=I+A,z=s.slice.call(B.buffer,I,D);return i.from(z)}function v(B,A){var I=B.reserve(A),D=I+A,z=s.slice.call(B.buffer,I,D);return i.Uint8Array.from(z).buffer}function x(B,A){var I=B.reserve(A+1),D=B.buffer[I++],z=I+A,G=B.codec.getExtUnpacker(D);if(!G)throw new Error("Invalid ext type: "+(D&&"0x"+D.toString(16)));var te=s.slice.call(B.buffer,I,z);return G(te)}function b(B){var A=B.reserve(1);return B.buffer[A]}function E(B){var A=B.reserve(1),I=B.buffer[A];return I&128?I-256:I}function C(B){var A=B.reserve(2),I=B.buffer;return I[A++]<<8|I[A]}function k(B){var A=B.reserve(2),I=B.buffer,D=I[A++]<<8|I[A];return D&32768?D-65536:D}function O(B){var A=B.reserve(4),I=B.buffer;return I[A++]*16777216+(I[A++]<<16)+(I[A++]<<8)+I[A]}function U(B){var A=B.reserve(4),I=B.buffer;return I[A++]<<24|I[A++]<<16|I[A++]<<8|I[A]}function R(B,A){return function(I){var D=I.reserve(B);return A.call(I.buffer,D,a)}}function $(B){return new n(this,B).toNumber()}function V(B){return new r(this,B).toNumber()}function j(B){return new n(this,B)}function F(B){return new r(this,B)}function W(B){return t.read(this,B,!1,23,4)}function H(B){return t.read(this,B,!1,52,8)}return nA}var DR={},BV;function ZIe(){if(BV)return DR;BV=1;var t=yse();DR.getReadToken=e;function e(a){var l=t.getReadFormat(a);return a&&a.useraw?r(l):n(l)}function n(a){var l,c=new Array(256);for(l=0;l<=127;l++)c[l]=i(l);for(l=128;l<=143;l++)c[l]=o(l-128,a.map);for(l=144;l<=159;l++)c[l]=o(l-144,a.array);for(l=160;l<=191;l++)c[l]=o(l-160,a.str);for(c[192]=i(null),c[193]=null,c[194]=i(!1),c[195]=i(!0),c[196]=s(a.uint8,a.bin),c[197]=s(a.uint16,a.bin),c[198]=s(a.uint32,a.bin),c[199]=s(a.uint8,a.ext),c[200]=s(a.uint16,a.ext),c[201]=s(a.uint32,a.ext),c[202]=a.float32,c[203]=a.float64,c[204]=a.uint8,c[205]=a.uint16,c[206]=a.uint32,c[207]=a.uint64,c[208]=a.int8,c[209]=a.int16,c[210]=a.int32,c[211]=a.int64,c[212]=o(1,a.ext),c[213]=o(2,a.ext),c[214]=o(4,a.ext),c[215]=o(8,a.ext),c[216]=o(16,a.ext),c[217]=s(a.uint8,a.str),c[218]=s(a.uint16,a.str),c[219]=s(a.uint32,a.str),c[220]=s(a.uint16,a.array),c[221]=s(a.uint32,a.array),c[222]=s(a.uint16,a.map),c[223]=s(a.uint32,a.map),l=224;l<=255;l++)c[l]=i(l-256);return c}function r(a){var l,c=n(a).slice();for(c[217]=c[196],c[218]=c[197],c[219]=c[198],l=160;l<=191;l++)c[l]=o(l-160,a.bin);return c}function i(a){return function(){return a}}function s(a,l){return function(c){var u=a(c);return l(c,u)}}function o(a,l){return function(c){return l(c,a)}}return DR}var UV;function $8(){if(UV)return OR;UV=1;var t=B8().ExtBuffer,e=QIe(),n=yse().readUint8,r=ZIe(),i=b2();i.install({addExtUnpacker:a,getExtUnpacker:l,init:o}),OR.preset=o.call(i.preset);function s(c){var u=r.getReadToken(c);return f;function f(m){var g=n(m),v=u[g];if(!v)throw new Error("Invalid type: "+(g&&"0x"+g.toString(16)));return v(m)}}function o(){var c=this.options;return this.decode=s(c),c&&c.preset&&e.setExtUnpackers(this),this}function a(c,u){var f=this.extUnpackers||(this.extUnpackers=[]);f[c]=i.filter(u)}function l(c){var u=this.extUnpackers||(this.extUnpackers=[]);return u[c]||f;function f(m){return new t(m,c)}}return OR}var FV;function xse(){if(FV)return RR;FV=1,RR.DecodeBuffer=n;var t=$8().preset,e=pse().FlexDecoder;e.mixin(n.prototype);function n(r){if(!(this instanceof n))return new n(r);if(r&&(this.options=r,r.codec)){var i=this.codec=r.codec;i.bufferish&&(this.bufferish=i.bufferish)}}return n.prototype.codec=t,n.prototype.fetch=function(){return this.codec.decode(this)},RR}var $V;function vse(){if($V)return PR;$V=1,PR.decode=e;var t=xse().DecodeBuffer;function e(n,r){var i=new t(r);return i.write(n),i.read()}return PR}var LR={},jR={exports:{}};/**
 * event-lite.js - Light-weight EventEmitter (less than 1KB when gzipped)
 *
 * @copyright Yusuke Kawasaki
 * @license MIT
 * @constructor
 * @see https://github.com/kawanet/event-lite
 * @see http://kawanet.github.io/event-lite/EventLite.html
 * @example
 * var EventLite = require("event-lite");
 *
 * function MyClass() {...}             // your class
 *
 * EventLite.mixin(MyClass.prototype);  // import event methods
 *
 * var obj = new MyClass();
 * obj.on("foo", function() {...});     // add event listener
 * obj.once("bar", function() {...});   // add one-time event listener
 * obj.emit("foo");                     // dispatch event
 * obj.emit("bar");                     // dispatch another event
 * obj.off("foo");                      // remove event listener
 */var zV;function bse(){return zV||(zV=1,(function(t){function e(){if(!(this instanceof e))return new e}(function(n){t.exports=n;var r="listeners",i={on:o,once:a,off:l,emit:c};s(n.prototype),n.mixin=s;function s(f){for(var m in i)f[m]=i[m];return f}function o(f,m){return u(this,f).push(m),this}function a(f,m){var g=this;return v.originalListener=m,u(g,f).push(v),g;function v(){l.call(g,f,v),m.apply(this,arguments)}}function l(f,m){var g=this,v;if(!arguments.length)delete g[r];else if(m){if(v=u(g,f,!0),v){if(v=v.filter(x),!v.length)return l.call(g,f);g[r][f]=v}}else if(v=g[r],v&&(delete v[f],!Object.keys(v).length))return l.call(g);return g;function x(b){return b!==m&&b.originalListener!==m}}function c(f,m){var g=this,v=u(g,f,!0);if(!v)return!1;var x=arguments.length;if(x===1)v.forEach(E);else if(x===2)v.forEach(C);else{var b=Array.prototype.slice.call(arguments,1);v.forEach(k)}return!!v.length;function E(O){O.call(g)}function C(O){O.call(g,m)}function k(O){O.apply(g,b)}}function u(f,m,g){if(!(g&&!f[r])){var v=f[r]||(f[r]={});return v[m]||(v[m]=[])}}})(e)})(jR)),jR.exports}var HV;function ePe(){if(HV)return LR;HV=1,LR.Encoder=n;var t=bse(),e=mse().EncodeBuffer;function n(r){if(!(this instanceof n))return new n(r);e.call(this,r)}return n.prototype=new e,t.mixin(n.prototype),n.prototype.encode=function(r){this.write(r),this.emit("data",this.read())},n.prototype.end=function(r){arguments.length&&this.encode(r),this.flush(),this.emit("end")},LR}var BR={},VV;function tPe(){if(VV)return BR;VV=1,BR.Decoder=n;var t=bse(),e=xse().DecodeBuffer;function n(r){if(!(this instanceof n))return new n(r);e.call(this,r)}return n.prototype=new e,t.mixin(n.prototype),n.prototype.decode=function(r){arguments.length&&this.write(r),this.flush()},n.prototype.push=function(r){this.emit("data",r)},n.prototype.end=function(r){this.decode(r),this.emit("end")},BR}var UR={},qV;function nPe(){return qV||(qV=1,$8(),F8(),UR.createCodec=b2().createCodec),UR}var FR={},GV;function rPe(){return GV||(GV=1,$8(),F8(),FR.codec={preset:b2().preset}),FR}var KV;function iPe(){return KV||(KV=1,df.encode=gse().encode,df.decode=vse().decode,df.Encoder=ePe().Encoder,df.Decoder=tPe().Decoder,df.createCodec=nPe().createCodec,df.codec=rPe().codec),df}var sPe=iPe();const oPe=us(sPe),wse="https://api.hyperliquid-testnet.xyz",aPe=`${wse}/exchange`,Wl=`${wse}/info`,lPe=!1,WV=1200,$R=60*1e3,YV=100,zR=3,JV=2e3,XV={l2Book:2,allMids:2,clearinghouseState:2,orderStatus:2,spotClearinghouseState:2,exchangeStatus:2,meta:20,metaAndAssetCtxs:20,candleSnapshot:20,userFills:20,openOrders:20,userRole:60,default:20};class cPe{constructor(){this.weightHistory=[],this.requestQueue=Promise.resolve(),this.lastRequestTime=0,this.cache=new Map,this.CACHE_TTL_MS=5e3,this.PRICE_CACHE_TTL_MS=2e3,this.CANDLE_CACHE_TTL_MS=1e4,this.ASSET_CONTEXT_CACHE_TTL_MS=3e4,this.dealerLockActive=!1,this.dealerLockResolver=null,this.waitingForDealerUnlock=Promise.resolve(),this.sharedDataCache=new Map,this.SHARED_CACHE_TTL_MS=15e3,this.universeCache=[],this.lastCacheUpdate=0}acquireDealerLock(){this.dealerLockActive||(this.dealerLockActive=!0,this.waitingForDealerUnlock=new Promise(e=>{this.dealerLockResolver=e}),console.log("[Hyperliquid]  Dealer lock ACQUIRED - other requests will be skipped"))}releaseDealerLock(){this.dealerLockActive&&(this.dealerLockActive=!1,this.dealerLockResolver&&(this.dealerLockResolver(),this.dealerLockResolver=null),this.waitingForDealerUnlock=Promise.resolve(),console.log("[Hyperliquid]  Dealer lock RELEASED - other requests can proceed"))}isDealerActive(){return this.dealerLockActive}getCurrentWeight(){const n=Date.now()-$R;return this.weightHistory=this.weightHistory.filter(r=>r.timestamp>n),this.weightHistory.reduce((r,i)=>r+i.weight,0)}recordWeight(e){this.weightHistory.push({timestamp:Date.now(),weight:e})}calculateWeight(e,n){const r=XV[e]||XV.default;return e==="candleSnapshot"&&n?r+Math.ceil(n/60):r}async waitForBudget(e){const n=this.getCurrentWeight(),r=WV-n;if(e<=r)return;const i=Date.now(),s=i-$R,o=[...this.weightHistory].sort((u,f)=>u.timestamp-f.timestamp);let a=e-r,l=i;for(const u of o)if(!(u.timestamp<=s)&&(a-=u.weight,l=u.timestamp+$R,a<=0))break;const c=Math.max(0,l-i);c>0&&(console.log(`[Hyperliquid] Rate budget: ${n}/${WV} used, waiting ${(c/1e3).toFixed(1)}s for budget...`),await new Promise(u=>setTimeout(u,c+100)))}async throttledFetch(e,n,r,i,s="default",o){if(r){const c=this.cache.get(r);if(c&&Date.now()-c.timestamp<(i||this.CACHE_TTL_MS))return new Response(JSON.stringify(c.data),{status:200,headers:{"Content-Type":"application/json"}})}const a=this.calculateWeight(s,o);this.requestQueue=this.requestQueue.then(async()=>{await this.waitForBudget(a);const u=Date.now()-this.lastRequestTime;u<YV&&await new Promise(f=>setTimeout(f,YV-u)),this.lastRequestTime=Date.now()}),await this.requestQueue,this.recordWeight(a);let l=null;for(let c=0;c<zR;c++)try{const u=await fetch(e,n);if(u.status===429){const f=parseInt(u.headers.get("Retry-After")||"2",10),m=Math.max(f*1e3,JV*Math.pow(2,c));console.warn(`[Hyperliquid] Rate limited (429), waiting ${m}ms before retry ${c+1}/${zR}`),await new Promise(g=>setTimeout(g,m));continue}if(u.ok&&r){const f=u.clone();try{const m=await f.json();this.cache.set(r,{data:m,timestamp:Date.now()})}catch{}}return u}catch(u){if(l=u,c<zR-1){const f=JV*Math.pow(2,c);await new Promise(m=>setTimeout(m,f))}}throw l||new Error("Request failed after retries")}async checkHealth(){try{return await this.getMetadata(),!0}catch(e){return console.error("Hyperliquid Health Check Failed:",e),!1}}createVaultWallet(){const e=Qf.createRandom();return new Qf(e.privateKey)}getWalletFromPrivateKey(e){return new Qf(e)}async getMarketData(e){try{const n=await this.throttledFetch(Wl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"l2Book",coin:e})},`marketData:${e}`,this.PRICE_CACHE_TTL_MS,"l2Book");if(!n.ok)throw new Error(`Failed to fetch market data: ${n.statusText}`);return await n.json()}catch(n){throw console.error("Hyperliquid Market Data Error:",n),n}}async getOrderBookMetrics(e){var n,r,i,s,o,a,l,c;try{const u=await this.getMarketData(e),f=((n=u.levels)==null?void 0:n[0])||[],m=((r=u.levels)==null?void 0:r[1])||[];if(f.length===0||m.length===0)throw new Error(`No order book data for ${e}`);const g=parseFloat(((i=f[0])==null?void 0:i.px)||"0"),v=parseFloat(((s=m[0])==null?void 0:s.px)||"0"),x=(g+v)/2,b=v-g,E=x>0?b/x*100:0,C=5;let k=0,O=0,U=0,R=0;const $=[],V=[];for(let I=0;I<f.length;I++){const D=parseFloat(((o=f[I])==null?void 0:o.px)||"0"),z=parseFloat(((a=f[I])==null?void 0:a.sz)||"0"),G=D*z;I<C&&(k+=G),U+=G,$.push({price:D,volume:G})}for(let I=0;I<m.length;I++){const D=parseFloat(((l=m[I])==null?void 0:l.px)||"0"),z=parseFloat(((c=m[I])==null?void 0:c.sz)||"0"),G=D*z;I<C&&(O+=G),R+=G,V.push({price:D,volume:G})}const j=R>0?U/R:1,F=.2,W=.2;let H,B;for(const{price:I,volume:D}of $)if(U>0&&D/U>F){H=I;break}for(const{price:I,volume:D}of V)if(R>0&&D/R>W){B=I;break}const A={bidAskSpread:parseFloat(E.toFixed(4)),bidAskSpreadUSDC:parseFloat(b.toFixed(4)),imbalanceRatio:parseFloat(j.toFixed(3)),nearBidDepth:parseFloat(k.toFixed(2)),nearAskDepth:parseFloat(O.toFixed(2)),totalBidDepth:parseFloat(U.toFixed(2)),totalAskDepth:parseFloat(R.toFixed(2)),bidWallPrice:H,askWallPrice:B,midPrice:parseFloat(x.toFixed(6)),bestBid:parseFloat(g.toFixed(6)),bestAsk:parseFloat(v.toFixed(6))};return console.log(`[Hyperliquid] OrderBook ${e}: Spread=${A.bidAskSpread}%, Imbalance=${A.imbalanceRatio}, NearDepth(B/A)=${A.nearBidDepth}/${A.nearAskDepth}`),A}catch(u){return console.error(`Hyperliquid OrderBook Metrics Error for ${e}:`,u),{bidAskSpread:0,bidAskSpreadUSDC:0,imbalanceRatio:1,nearBidDepth:0,nearAskDepth:0,totalBidDepth:0,totalAskDepth:0,midPrice:0,bestBid:0,bestAsk:0}}}async getUserState(e){try{const n=await this.throttledFetch(Wl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"clearinghouseState",user:e})},`userState:${e}`,this.CACHE_TTL_MS,"clearinghouseState");if(!n.ok)throw new Error(`Failed to fetch user state: ${n.statusText}`);return await n.json()}catch(n){throw console.error("Hyperliquid User State Error:",n),n}}async getOpenOrders(e){try{const n=await this.throttledFetch(Wl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"openOrders",user:e})},`openOrders:${e}`,this.CACHE_TTL_MS,"openOrders");if(!n.ok)throw new Error(`Failed to fetch open orders: ${n.statusText}`);return await n.json()}catch(n){throw console.error("Hyperliquid Open Orders Error:",n),n}}async getUserFills(e,n=20){try{const r=await this.throttledFetch(Wl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"userFills",user:e})},`userFills:${e}`,this.CACHE_TTL_MS,"userFills");if(!r.ok)throw new Error(`Failed to fetch user fills: ${r.statusText}`);const i=await r.json();return Array.isArray(i)?i.slice(0,n):[]}catch(r){return console.error("Hyperliquid User Fills Error:",r),[]}}async getCandles(e,n="1h",r=100){try{const i=Date.now(),s=this.intervalToMs(n),o=i-s*r,a=await this.throttledFetch(Wl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"candleSnapshot",req:{coin:e,interval:n,startTime:o}})},`candles:${e}:${n}:${r}`,this.CANDLE_CACHE_TTL_MS,"candleSnapshot",r);if(!a.ok)throw new Error(`Failed to fetch candles: ${a.statusText}`);const l=await a.json();return Array.isArray(l)?l.map(c=>({time:c.t||c.time,open:parseFloat(c.o||c.open),high:parseFloat(c.h||c.high),low:parseFloat(c.l||c.low),close:parseFloat(c.c||c.close),volume:parseFloat(c.v||c.volume||"0")})):l.t&&Array.isArray(l.t)?l.t.map((c,u)=>{var f;return{time:c,open:parseFloat(l.o[u]),high:parseFloat(l.h[u]),low:parseFloat(l.l[u]),close:parseFloat(l.c[u]),volume:parseFloat(((f=l.v)==null?void 0:f[u])||"0")}}):[]}catch(i){return console.error("Hyperliquid Candles Error:",i),[]}}async getCurrentPrice(e){var n,r;try{const i=await this.getMarketData(e),s=parseFloat(((n=i.levels[0][0])==null?void 0:n.px)||"0"),o=parseFloat(((r=i.levels[1][0])==null?void 0:r.px)||"0");return(s+o)/2}catch(i){throw console.error(`Hyperliquid Price Error for ${e}:`,i),i}}intervalToMs(e){return{"1m":6e4,"5m":3e5,"15m":9e5,"1h":36e5,"4h":144e5,"1d":864e5,"1D":864e5}[e]||3600*1e3}async getMetadata(){try{const e=await this.throttledFetch(Wl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"meta"})},"metadata",6e4,"meta");if(!e.ok)throw new Error(`Failed to fetch metadata: ${e.statusText}`);return await e.json()}catch(e){throw console.error("Hyperliquid Metadata Error:",e),e}}async getAllAvailableAssets(){try{return(await this.getMetadata()).universe.filter(n=>!n.isDelisted).map(n=>n.name)}catch(e){throw console.error("Hyperliquid Get Available Assets Error:",e),e}}async isValidAsset(e){try{return(await this.getAllAvailableAssets()).some(r=>r.toLowerCase()===e.toLowerCase())}catch(n){return console.error("Hyperliquid Asset Validation Error:",n),!0}}async signL1Action(e,n,r,i,s){const o=this.actionHash(n,r,i,s),a=this.constructPhantomAgent(o,lPe),l={name:"Exchange",version:"1",chainId:1337,verifyingContract:"0x0000000000000000000000000000000000000000"},c={Agent:[{name:"source",type:"string"},{name:"connectionId",type:"bytes32"}]},u=await e.signTypedData(l,c,a),f=Ws.from(u);return console.log("[Hyperliquid]  Signing Action:"),console.log("  - Domain:",JSON.stringify(l)),console.log("  - Types:",JSON.stringify(c)),console.log("  - Phantom Agent:",JSON.stringify(a)),console.log("  - Signature:",u),{r:f.r,s:f.s,v:f.v}}actionHash(e,n,r,i){let s=oPe.encode(e);const o=on.alloc(8);if(o.writeBigUInt64BE(BigInt(r),0),s=on.concat([s,o]),n===null)s=on.concat([s,on.from([0])]);else{s=on.concat([s,on.from([1])]);const a=on.from(n.replace("0x",""),"hex");s=on.concat([s,a])}if(i!==void 0){s=on.concat([s,on.from([0])]);const a=on.alloc(8);a.writeBigUInt64BE(BigInt(i),0),s=on.concat([s,a])}return Kn(s)}constructPhantomAgent(e,n){return{source:n?"a":"b",connectionId:e}}floatToWire(e){return e===0?"0":e.toFixed(8).replace(/\.?0+$/,"")}async postAction(e,n,r){var l,c;const i=await this.signL1Action(n,e,null,r),s={action:e,nonce:r,signature:i,vaultAddress:null};console.log("[Hyperliquid]  Sending action:",JSON.stringify({action:e,nonce:r},null,2)),console.log("[Hyperliquid]  Payload:",JSON.stringify(s,null,2));const o=await fetch(aPe,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!o.ok){let u=`HTTP ${o.status}: ${o.statusText}`;try{const f=await o.text();console.error("[Hyperliquid] Error response:",f);try{const m=JSON.parse(f);u=`Exchange API Error (${o.status}): ${JSON.stringify(m)}`}catch{u=`Exchange API Error (${o.status}): ${f}`}}catch(f){console.error("[Hyperliquid] Failed to read error response:",f)}throw new Error(u)}const a=await o.json();if(console.log("[Hyperliquid]  Raw Response:",JSON.stringify(a,null,2)),a.status!=="ok")throw new Error(`Exchange API Error: ${JSON.stringify(a.response||a)}`);if((c=(l=a.response)==null?void 0:l.data)!=null&&c.statuses){const f=a.response.data.statuses.find(m=>m.error);if(f)throw new Error(`Order Failed: ${f.error}`)}return a}async placeOrder(e,n,r,i,s,o){const a=Date.now(),l=await this.getAssetIndex(n),c=(o==null?void 0:o.orderType)||"limit",u=(o==null?void 0:o.reduceOnly)||!1;let f;c==="market"?f={market:{}}:f={limit:{tif:(o==null?void 0:o.tif)||(c==="ioc"?"Ioc":c==="alo"?"Alo":"Gtc")}};let m="0";if(s){const b=await this.getAssetDecimals(n),E=Math.max(0,6-b);let C=parseFloat(s.toFixed(E));C=parseFloat(C.toPrecision(5)),C=parseFloat(C.toFixed(E)),m=this.floatToWire(C),console.log(`[Hyperliquid] Price rounding: ${s} -> ${m} (maxDecimals=${E}, szDecimals=${b})`)}const g={a:l,b:r,p:m,s:this.floatToWire(i),r:u,t:f};o!=null&&o.cloid&&(g.c=o.cloid);const v={type:"order",orders:[g],grouping:"na"},x=await this.postAction(v,e,a);return(o!=null&&o.stopLoss||o!=null&&o.takeProfit)&&await this.placeTpSlOrders(e,n,r,i,o.stopLoss,o.takeProfit,o.cloid),x}async placeTpSlOrders(e,n,r,i,s,o,a){const l=await this.getAssetIndex(n),u=6-await this.getAssetDecimals(n),f=v=>{let x=parseFloat(v.toFixed(u));return x=parseFloat(x.toPrecision(5)),x=parseFloat(x.toFixed(u)),this.floatToWire(x)},m=()=>{const v=new Uint8Array(16);return crypto.getRandomValues(v),"0x"+Array.from(v,x=>x.toString(16).padStart(2,"0")).join("")},g=[];if(s){const v=f(s),x=m();console.log(`[HL TP/SL] SL Price: ${s} -> Rounded: ${v}, cloid: ${x}`),g.push({a:l,b:!r,p:v,s:this.floatToWire(i),r:!0,t:{trigger:{isMarket:!0,triggerPx:v,tpsl:"sl"}},c:x})}if(o){const v=f(o),x=m();console.log(`[HL TP/SL] TP Price: ${o} -> Rounded: ${v}, cloid: ${x}`),g.push({a:l,b:!r,p:v,s:this.floatToWire(i),r:!0,t:{trigger:{isMarket:!0,triggerPx:v,tpsl:"tp"}},c:x})}if(g.length>0){const v=Date.now(),x={type:"order",orders:g,grouping:"positionTpsl"};await this.postAction(x,e,v)}}async cancelOrder(e,n,r){const i=Date.now(),s={type:"cancel",cancels:[{a:await this.getAssetIndex(n),o:r}]};return await this.postAction(s,e,i)}async updateLeverage(e,n,r,i){const s=Date.now(),o={type:"updateLeverage",asset:await this.getAssetIndex(n),isCross:i,leverage:r};return await this.postAction(o,e,s)}async updateIsolatedMargin(e,n,r,i){const s=Date.now(),o=Math.floor(i*1e6),a={type:"updateIsolatedMargin",asset:await this.getAssetIndex(n),isBuy:r,ntli:o};return console.log(`[Hyperliquid] Updating Isolated Margin: ${i} USDC -> ntli: ${o} for ${n} (isBuy: ${r})`),await this.postAction(a,e,s)}async closePosition(e,n,r,i="market",s){const a=(await this.getUserState(e.address)).assetPositions.find(g=>g.position.coin===n);if(!a||parseFloat(a.position.szi)===0)throw new Error(`No open position for ${n}`);const l=parseFloat(a.position.szi),c=l<0,u=r||Math.abs(l);let f=i,m=s;if(i==="market"){const g=await this.getMarketData(n),v=parseFloat(g.levels[0][0].px),x=parseFloat(g.levels[1][0].px),b=c?x:v,E=.01;let C=c?b*(1+E):b*(1-E);const O=6-await this.getAssetDecimals(n);let U=parseFloat(C.toFixed(O));U=parseFloat(U.toPrecision(5)),m=parseFloat(U.toFixed(O)),f="ioc",console.log(`[HL Close] Market Close -> Base: ${b}, Price: ${m} `)}return await this.placeOrder(e,n,c,u,m,{orderType:f==="market"?"ioc":f,reduceOnly:!0})}async withdrawUSDC(e,n,r){if(r<=1)throw new Error("Withdrawal amount must be greater than $1 to cover the withdrawal fee");const i=Date.now(),s={type:"usdSend",hyperliquidChain:"Testnet",signatureChainId:"0xa4b1",destination:n,amount:this.floatToWire(r),time:i};return await this.postAction(s,e,i)}async getAssetIndex(e){await this.updateUniverseCache();const n=this.universeCache.find(r=>r.name===e);if(!n)throw new Error(`Asset ${e} not found`);return this.universeCache.indexOf(n)}async getAssetDecimals(e){await this.updateUniverseCache();const n=this.universeCache.find(r=>r.name===e);if(!n)throw new Error(`Asset ${e} not found`);return n.szDecimals}async updateUniverseCache(){const e=Date.now();if(this.universeCache.length>0&&e-this.lastCacheUpdate<300*1e3)return;const r=await(await this.throttledFetch(Wl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"meta"})},"universeCache",300*1e3)).json();this.universeCache=r.universe,this.lastCacheUpdate=e}async getAssetContexts(){try{const e=await this.throttledFetch(Wl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"metaAndAssetCtxs"})},"assetContexts",this.ASSET_CONTEXT_CACHE_TTL_MS,"metaAndAssetCtxs");if(!e.ok)throw new Error(`Failed to fetch asset contexts: ${e.statusText}`);const n=await e.json();return Array.isArray(n)&&n.length>1?n[1]:[]}catch(e){return console.error("Hyperliquid Asset Contexts Error:",e),[]}}async getFundingRate(e){try{const n=await this.getAssetContexts();await this.updateUniverseCache();const r=this.universeCache.findIndex(s=>s.name===e);if(r===-1)return null;const i=n[r];return i?{funding:parseFloat(i.funding||"0"),premium:parseFloat(i.premium||"0"),nextFunding:parseFloat(i.funding||"0")}:null}catch(n){return console.error(`Hyperliquid Funding Rate Error for ${e}:`,n),null}}async getUserFees(e){try{const n=await fetch(Wl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"userFees",user:e})});if(!n.ok)throw new Error(`Failed to fetch user fees: ${n.statusText}`);const r=await n.json();return{makerFee:parseFloat((r==null?void 0:r.userCrossRate)||(r==null?void 0:r.userAddRate)||"0.0002"),takerFee:parseFloat((r==null?void 0:r.userCrossRate)||(r==null?void 0:r.userRemoveRate)||"0.0005"),dailyVolume:parseFloat((r==null?void 0:r.dailyUserVlm)||"0"),feeSchedule:(r==null?void 0:r.feeSchedule)||null}}catch(n){return console.error("Hyperliquid User Fees Error:",n),{makerFee:2e-4,takerFee:5e-4,dailyVolume:0,feeSchedule:null}}}async getUserFundingHistory(e,n,r){try{const i=Date.now(),s={type:"userFunding",user:e,startTime:n||i-1440*60*1e3};r&&(s.endTime=r);const o=await fetch(Wl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!o.ok)throw new Error(`Failed to fetch funding history: ${o.statusText}`);return await o.json()}catch(i){return console.error("Hyperliquid Funding History Error:",i),[]}}calculateBreakevenPrice(e,n,r,i=2e-4,s=5e-4,o=0,a=8){const l=s,c=s,u=a/8,f=Math.abs(o)*u,m=l+c+f,g=e*m,v=r?e+g:e-g,x=.01,b=r?v*(1+x):v*(1-x);return{breakevenPrice:v,minProfitPrice:b,totalCostPercent:m,costBreakdown:{entryFeePercent:l,exitFeePercent:c,fundingCostPercent:f}}}async getUserStateShared(e){const n=`shared:userState:${e}`,r=this.sharedDataCache.get(n);if(r&&Date.now()-r.timestamp<this.SHARED_CACHE_TTL_MS)return console.log("[Hyperliquid]  Using shared cache for userState"),r.data;const i=await this.getUserState(e);return this.sharedDataCache.set(n,{data:i,timestamp:Date.now()}),i}async getUserFillsShared(e,n=20){const r=`shared:userFills:${e}`,i=this.sharedDataCache.get(r);if(i&&Date.now()-i.timestamp<this.SHARED_CACHE_TTL_MS)return console.log("[Hyperliquid]  Using shared cache for userFills"),i.data;const s=await this.getUserFills(e,n);return this.sharedDataCache.set(r,{data:s,timestamp:Date.now()}),s}clearSharedCache(){this.sharedDataCache.clear(),console.log("[Hyperliquid]  Shared cache cleared")}}const zt=new cPe;function pn(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function QV(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Fx(...t){return e=>{let n=!1;const r=t.map(i=>{const s=QV(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():QV(t[i],null)}}}}function Nr(...t){return T.useCallback(Fx(...t),t)}function uPe(t,e){const n=T.createContext(e),r=s=>{const{children:o,...a}=s,l=T.useMemo(()=>a,Object.values(a));return h.jsx(n.Provider,{value:l,children:o})};r.displayName=t+"Provider";function i(s){const o=T.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${t}\``)}return[r,i]}function Mm(t,e=[]){let n=[];function r(s,o){const a=T.createContext(o),l=n.length;n=[...n,o];const c=f=>{var E;const{scope:m,children:g,...v}=f,x=((E=m==null?void 0:m[t])==null?void 0:E[l])||a,b=T.useMemo(()=>v,Object.values(v));return h.jsx(x.Provider,{value:b,children:g})};c.displayName=s+"Provider";function u(f,m){var x;const g=((x=m==null?void 0:m[t])==null?void 0:x[l])||a,v=T.useContext(g);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${s}\``)}return[c,u]}const i=()=>{const s=n.map(o=>T.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return T.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[r,dPe(i,...e)]}function dPe(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const f=l(s)[`__scope${c}`];return{...a,...f}},{});return T.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var Dm=mee();const fPe=us(Dm);function hPe(t){const e=pPe(t),n=T.forwardRef((r,i)=>{const{children:s,...o}=r,a=T.Children.toArray(s),l=a.find(gPe);if(l){const c=l.props.children,u=a.map(f=>f===l?T.Children.count(c)>1?T.Children.only(null):T.isValidElement(c)?c.props.children:null:f);return h.jsx(e,{...o,ref:i,children:T.isValidElement(c)?T.cloneElement(c,void 0,u):null})}return h.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}function pPe(t){const e=T.forwardRef((n,r)=>{const{children:i,...s}=n;if(T.isValidElement(i)){const o=xPe(i),a=yPe(s,i.props);return i.type!==T.Fragment&&(a.ref=r?Fx(r,o):o),T.cloneElement(i,a)}return T.Children.count(i)>1?T.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var mPe=Symbol("radix.slottable");function gPe(t){return T.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===mPe}function yPe(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const l=s(...a);return i(...a),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function xPe(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var vPe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Mn=vPe.reduce((t,e)=>{const n=hPe(`Primitive.${e}`),r=T.forwardRef((i,s)=>{const{asChild:o,...a}=i,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(l,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function bPe(t,e){t&&Dm.flushSync(()=>t.dispatchEvent(e))}function sh(t){const e=T.useRef(t);return T.useEffect(()=>{e.current=t}),T.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function wPe(t,e=globalThis==null?void 0:globalThis.document){const n=sh(t);T.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var EPe="DismissableLayer",hM="dismissableLayer.update",SPe="dismissableLayer.pointerDownOutside",APe="dismissableLayer.focusOutside",ZV,Ese=T.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),w2=T.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=t,c=T.useContext(Ese),[u,f]=T.useState(null),m=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=T.useState({}),v=Nr(e,$=>f($)),x=Array.from(c.layers),[b]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),E=x.indexOf(b),C=u?x.indexOf(u):-1,k=c.layersWithOutsidePointerEventsDisabled.size>0,O=C>=E,U=CPe($=>{const V=$.target,j=[...c.branches].some(F=>F.contains(V));!O||j||(i==null||i($),o==null||o($),$.defaultPrevented||a==null||a())},m),R=NPe($=>{const V=$.target;[...c.branches].some(F=>F.contains(V))||(s==null||s($),o==null||o($),$.defaultPrevented||a==null||a())},m);return wPe($=>{C===c.layers.size-1&&(r==null||r($),!$.defaultPrevented&&a&&($.preventDefault(),a()))},m),T.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(ZV=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),eq(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=ZV)}},[u,m,n,c]),T.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),eq())},[u,c]),T.useEffect(()=>{const $=()=>g({});return document.addEventListener(hM,$),()=>document.removeEventListener(hM,$)},[]),h.jsx(Mn.div,{...l,ref:v,style:{pointerEvents:k?O?"auto":"none":void 0,...t.style},onFocusCapture:pn(t.onFocusCapture,R.onFocusCapture),onBlurCapture:pn(t.onBlurCapture,R.onBlurCapture),onPointerDownCapture:pn(t.onPointerDownCapture,U.onPointerDownCapture)})});w2.displayName=EPe;var TPe="DismissableLayerBranch",kPe=T.forwardRef((t,e)=>{const n=T.useContext(Ese),r=T.useRef(null),i=Nr(e,r);return T.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),h.jsx(Mn.div,{...t,ref:i})});kPe.displayName=TPe;function CPe(t,e=globalThis==null?void 0:globalThis.document){const n=sh(t),r=T.useRef(!1),i=T.useRef(()=>{});return T.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){Sse(SPe,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function NPe(t,e=globalThis==null?void 0:globalThis.document){const n=sh(t),r=T.useRef(!1);return T.useEffect(()=>{const i=s=>{s.target&&!r.current&&Sse(APe,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function eq(){const t=new CustomEvent(hM);document.dispatchEvent(t)}function Sse(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?bPe(i,s):i.dispatchEvent(s)}var Os=globalThis!=null&&globalThis.document?T.useLayoutEffect:()=>{},_Pe=KC[" useId ".trim().toString()]||(()=>{}),IPe=0;function Zf(t){const[e,n]=T.useState(_Pe());return Os(()=>{n(r=>r??String(IPe++))},[t]),e?`radix-${e}`:""}const PPe=["top","right","bottom","left"],oh=Math.min,Ho=Math.max,ok=Math.round,rA=Math.floor,Cc=t=>({x:t,y:t}),RPe={left:"right",right:"left",bottom:"top",top:"bottom"},OPe={start:"end",end:"start"};function pM(t,e,n){return Ho(t,oh(e,n))}function dd(t,e){return typeof t=="function"?t(e):t}function fd(t){return t.split("-")[0]}function $x(t){return t.split("-")[1]}function z8(t){return t==="x"?"y":"x"}function H8(t){return t==="y"?"height":"width"}const MPe=new Set(["top","bottom"]);function vc(t){return MPe.has(fd(t))?"y":"x"}function V8(t){return z8(vc(t))}function DPe(t,e,n){n===void 0&&(n=!1);const r=$x(t),i=V8(t),s=H8(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=ak(o)),[o,ak(o)]}function LPe(t){const e=ak(t);return[mM(t),e,mM(e)]}function mM(t){return t.replace(/start|end/g,e=>OPe[e])}const tq=["left","right"],nq=["right","left"],jPe=["top","bottom"],BPe=["bottom","top"];function UPe(t,e,n){switch(t){case"top":case"bottom":return n?e?nq:tq:e?tq:nq;case"left":case"right":return e?jPe:BPe;default:return[]}}function FPe(t,e,n,r){const i=$x(t);let s=UPe(fd(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(mM)))),s}function ak(t){return t.replace(/left|right|bottom|top/g,e=>RPe[e])}function $Pe(t){return{top:0,right:0,bottom:0,left:0,...t}}function Ase(t){return typeof t!="number"?$Pe(t):{top:t,right:t,bottom:t,left:t}}function lk(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function rq(t,e,n){let{reference:r,floating:i}=t;const s=vc(e),o=V8(e),a=H8(o),l=fd(e),c=s==="y",u=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,m=r[a]/2-i[a]/2;let g;switch(l){case"top":g={x:u,y:r.y-i.height};break;case"bottom":g={x:u,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:f};break;case"left":g={x:r.x-i.width,y:f};break;default:g={x:r.x,y:r.y}}switch($x(e)){case"start":g[o]-=m*(n&&c?-1:1);break;case"end":g[o]+=m*(n&&c?-1:1);break}return g}const zPe=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:f}=rq(c,r,l),m=r,g={},v=0;for(let x=0;x<a.length;x++){const{name:b,fn:E}=a[x],{x:C,y:k,data:O,reset:U}=await E({x:u,y:f,initialPlacement:r,placement:m,strategy:i,middlewareData:g,rects:c,platform:o,elements:{reference:t,floating:e}});u=C??u,f=k??f,g={...g,[b]:{...g[b],...O}},U&&v<=50&&(v++,typeof U=="object"&&(U.placement&&(m=U.placement),U.rects&&(c=U.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):U.rects),{x:u,y:f}=rq(c,m,l)),x=-1)}return{x:u,y:f,placement:m,strategy:i,middlewareData:g}};async function Rw(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:m=!1,padding:g=0}=dd(e,t),v=Ase(g),b=a[m?f==="floating"?"reference":"floating":f],E=lk(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(b)))==null||n?b:b.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),C=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,k=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),O=await(s.isElement==null?void 0:s.isElement(k))?await(s.getScale==null?void 0:s.getScale(k))||{x:1,y:1}:{x:1,y:1},U=lk(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:C,offsetParent:k,strategy:l}):C);return{top:(E.top-U.top+v.top)/O.y,bottom:(U.bottom-E.bottom+v.bottom)/O.y,left:(E.left-U.left+v.left)/O.x,right:(U.right-E.right+v.right)/O.x}}const HPe=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=dd(t,e)||{};if(c==null)return{};const f=Ase(u),m={x:n,y:r},g=V8(i),v=H8(g),x=await o.getDimensions(c),b=g==="y",E=b?"top":"left",C=b?"bottom":"right",k=b?"clientHeight":"clientWidth",O=s.reference[v]+s.reference[g]-m[g]-s.floating[v],U=m[g]-s.reference[g],R=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let $=R?R[k]:0;(!$||!await(o.isElement==null?void 0:o.isElement(R)))&&($=a.floating[k]||s.floating[v]);const V=O/2-U/2,j=$/2-x[v]/2-1,F=oh(f[E],j),W=oh(f[C],j),H=F,B=$-x[v]-W,A=$/2-x[v]/2+V,I=pM(H,A,B),D=!l.arrow&&$x(i)!=null&&A!==I&&s.reference[v]/2-(A<H?F:W)-x[v]/2<0,z=D?A<H?A-H:A-B:0;return{[g]:m[g]+z,data:{[g]:I,centerOffset:A-I-z,...D&&{alignmentOffset:z}},reset:D}}}),VPe=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:x=!0,...b}=dd(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const E=fd(i),C=vc(a),k=fd(a)===a,O=await(l.isRTL==null?void 0:l.isRTL(c.floating)),U=m||(k||!x?[ak(a)]:LPe(a)),R=v!=="none";!m&&R&&U.push(...FPe(a,x,v,O));const $=[a,...U],V=await Rw(e,b),j=[];let F=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&j.push(V[E]),f){const A=DPe(i,o,O);j.push(V[A[0]],V[A[1]])}if(F=[...F,{placement:i,overflows:j}],!j.every(A=>A<=0)){var W,H;const A=(((W=s.flip)==null?void 0:W.index)||0)+1,I=$[A];if(I&&(!(f==="alignment"?C!==vc(I):!1)||F.every(G=>vc(G.placement)===C?G.overflows[0]>0:!0)))return{data:{index:A,overflows:F},reset:{placement:I}};let D=(H=F.filter(z=>z.overflows[0]<=0).sort((z,G)=>z.overflows[1]-G.overflows[1])[0])==null?void 0:H.placement;if(!D)switch(g){case"bestFit":{var B;const z=(B=F.filter(G=>{if(R){const te=vc(G.placement);return te===C||te==="y"}return!0}).map(G=>[G.placement,G.overflows.filter(te=>te>0).reduce((te,K)=>te+K,0)]).sort((G,te)=>G[1]-te[1])[0])==null?void 0:B[0];z&&(D=z);break}case"initialPlacement":D=a;break}if(i!==D)return{reset:{placement:D}}}return{}}}};function iq(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function sq(t){return PPe.some(e=>t[e]>=0)}const qPe=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=dd(t,e);switch(r){case"referenceHidden":{const s=await Rw(e,{...i,elementContext:"reference"}),o=iq(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:sq(o)}}}case"escaped":{const s=await Rw(e,{...i,altBoundary:!0}),o=iq(s,n.floating);return{data:{escapedOffsets:o,escaped:sq(o)}}}default:return{}}}}},Tse=new Set(["left","top"]);async function GPe(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=fd(n),a=$x(n),l=vc(n)==="y",c=Tse.has(o)?-1:1,u=s&&l?-1:1,f=dd(e,t);let{mainAxis:m,crossAxis:g,alignmentAxis:v}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof v=="number"&&(g=a==="end"?v*-1:v),l?{x:g*u,y:m*c}:{x:m*c,y:g*u}}const KPe=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await GPe(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},WPe=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:b=>{let{x:E,y:C}=b;return{x:E,y:C}}},...l}=dd(t,e),c={x:n,y:r},u=await Rw(e,l),f=vc(fd(i)),m=z8(f);let g=c[m],v=c[f];if(s){const b=m==="y"?"top":"left",E=m==="y"?"bottom":"right",C=g+u[b],k=g-u[E];g=pM(C,g,k)}if(o){const b=f==="y"?"top":"left",E=f==="y"?"bottom":"right",C=v+u[b],k=v-u[E];v=pM(C,v,k)}const x=a.fn({...e,[m]:g,[f]:v});return{...x,data:{x:x.x-n,y:x.y-r,enabled:{[m]:s,[f]:o}}}}}},YPe=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=dd(t,e),u={x:n,y:r},f=vc(i),m=z8(f);let g=u[m],v=u[f];const x=dd(a,e),b=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(l){const k=m==="y"?"height":"width",O=s.reference[m]-s.floating[k]+b.mainAxis,U=s.reference[m]+s.reference[k]-b.mainAxis;g<O?g=O:g>U&&(g=U)}if(c){var E,C;const k=m==="y"?"width":"height",O=Tse.has(fd(i)),U=s.reference[f]-s.floating[k]+(O&&((E=o.offset)==null?void 0:E[f])||0)+(O?0:b.crossAxis),R=s.reference[f]+s.reference[k]+(O?0:((C=o.offset)==null?void 0:C[f])||0)-(O?b.crossAxis:0);v<U?v=U:v>R&&(v=R)}return{[m]:g,[f]:v}}}},JPe=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...c}=dd(t,e),u=await Rw(e,c),f=fd(i),m=$x(i),g=vc(i)==="y",{width:v,height:x}=s.floating;let b,E;f==="top"||f==="bottom"?(b=f,E=m===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(E=f,b=m==="end"?"top":"bottom");const C=x-u.top-u.bottom,k=v-u.left-u.right,O=oh(x-u[b],C),U=oh(v-u[E],k),R=!e.middlewareData.shift;let $=O,V=U;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(V=k),(r=e.middlewareData.shift)!=null&&r.enabled.y&&($=C),R&&!m){const F=Ho(u.left,0),W=Ho(u.right,0),H=Ho(u.top,0),B=Ho(u.bottom,0);g?V=v-2*(F!==0||W!==0?F+W:Ho(u.left,u.right)):$=x-2*(H!==0||B!==0?H+B:Ho(u.top,u.bottom))}await l({...e,availableWidth:V,availableHeight:$});const j=await o.getDimensions(a.floating);return v!==j.width||x!==j.height?{reset:{rects:!0}}:{}}}};function E2(){return typeof window<"u"}function zx(t){return kse(t)?(t.nodeName||"").toLowerCase():"#document"}function Wo(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Uc(t){var e;return(e=(kse(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function kse(t){return E2()?t instanceof Node||t instanceof Wo(t).Node:!1}function Pl(t){return E2()?t instanceof Element||t instanceof Wo(t).Element:!1}function Rc(t){return E2()?t instanceof HTMLElement||t instanceof Wo(t).HTMLElement:!1}function oq(t){return!E2()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Wo(t).ShadowRoot}const XPe=new Set(["inline","contents"]);function B1(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=Rl(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!XPe.has(i)}const QPe=new Set(["table","td","th"]);function ZPe(t){return QPe.has(zx(t))}const eRe=[":popover-open",":modal"];function S2(t){return eRe.some(e=>{try{return t.matches(e)}catch{return!1}})}const tRe=["transform","translate","scale","rotate","perspective"],nRe=["transform","translate","scale","rotate","perspective","filter"],rRe=["paint","layout","strict","content"];function q8(t){const e=G8(),n=Pl(t)?Rl(t):t;return tRe.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||nRe.some(r=>(n.willChange||"").includes(r))||rRe.some(r=>(n.contain||"").includes(r))}function iRe(t){let e=ah(t);for(;Rc(e)&&!hx(e);){if(q8(e))return e;if(S2(e))return null;e=ah(e)}return null}function G8(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const sRe=new Set(["html","body","#document"]);function hx(t){return sRe.has(zx(t))}function Rl(t){return Wo(t).getComputedStyle(t)}function A2(t){return Pl(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ah(t){if(zx(t)==="html")return t;const e=t.assignedSlot||t.parentNode||oq(t)&&t.host||Uc(t);return oq(e)?e.host:e}function Cse(t){const e=ah(t);return hx(e)?t.ownerDocument?t.ownerDocument.body:t.body:Rc(e)&&B1(e)?e:Cse(e)}function Ow(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=Cse(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=Wo(i);if(s){const a=gM(o);return e.concat(o,o.visualViewport||[],B1(i)?i:[],a&&n?Ow(a):[])}return e.concat(i,Ow(i,[],n))}function gM(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Nse(t){const e=Rl(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Rc(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=ok(n)!==s||ok(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function K8(t){return Pl(t)?t:t.contextElement}function Yg(t){const e=K8(t);if(!Rc(e))return Cc(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=Nse(e);let o=(s?ok(n.width):n.width)/r,a=(s?ok(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const oRe=Cc(0);function _se(t){const e=Wo(t);return!G8()||!e.visualViewport?oRe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function aRe(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Wo(t)?!1:e}function mm(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=K8(t);let o=Cc(1);e&&(r?Pl(r)&&(o=Yg(r)):o=Yg(t));const a=aRe(s,n,r)?_se(s):Cc(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,u=i.width/o.x,f=i.height/o.y;if(s){const m=Wo(s),g=r&&Pl(r)?Wo(r):r;let v=m,x=gM(v);for(;x&&r&&g!==v;){const b=Yg(x),E=x.getBoundingClientRect(),C=Rl(x),k=E.left+(x.clientLeft+parseFloat(C.paddingLeft))*b.x,O=E.top+(x.clientTop+parseFloat(C.paddingTop))*b.y;l*=b.x,c*=b.y,u*=b.x,f*=b.y,l+=k,c+=O,v=Wo(x),x=gM(v)}}return lk({width:u,height:f,x:l,y:c})}function T2(t,e){const n=A2(t).scrollLeft;return e?e.left+n:mm(Uc(t)).left+n}function Ise(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-T2(t,n),i=n.top+e.scrollTop;return{x:r,y:i}}function lRe(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",o=Uc(r),a=e?S2(e.floating):!1;if(r===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=Cc(1);const u=Cc(0),f=Rc(r);if((f||!f&&!s)&&((zx(r)!=="body"||B1(o))&&(l=A2(r)),Rc(r))){const g=mm(r);c=Yg(r),u.x=g.x+r.clientLeft,u.y=g.y+r.clientTop}const m=o&&!f&&!s?Ise(o,l):Cc(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+m.x,y:n.y*c.y-l.scrollTop*c.y+u.y+m.y}}function cRe(t){return Array.from(t.getClientRects())}function uRe(t){const e=Uc(t),n=A2(t),r=t.ownerDocument.body,i=Ho(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=Ho(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+T2(t);const a=-n.scrollTop;return Rl(r).direction==="rtl"&&(o+=Ho(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}const aq=25;function dRe(t,e){const n=Wo(t),r=Uc(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const u=G8();(!u||u&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}const c=T2(r);if(c<=0){const u=r.ownerDocument,f=u.body,m=getComputedStyle(f),g=u.compatMode==="CSS1Compat"&&parseFloat(m.marginLeft)+parseFloat(m.marginRight)||0,v=Math.abs(r.clientWidth-f.clientWidth-g);v<=aq&&(s-=v)}else c<=aq&&(s+=c);return{width:s,height:o,x:a,y:l}}const fRe=new Set(["absolute","fixed"]);function hRe(t,e){const n=mm(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=Rc(t)?Yg(t):Cc(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=i*s.x,c=r*s.y;return{width:o,height:a,x:l,y:c}}function lq(t,e,n){let r;if(e==="viewport")r=dRe(t,n);else if(e==="document")r=uRe(Uc(t));else if(Pl(e))r=hRe(e,n);else{const i=_se(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return lk(r)}function Pse(t,e){const n=ah(t);return n===e||!Pl(n)||hx(n)?!1:Rl(n).position==="fixed"||Pse(n,e)}function pRe(t,e){const n=e.get(t);if(n)return n;let r=Ow(t,[],!1).filter(a=>Pl(a)&&zx(a)!=="body"),i=null;const s=Rl(t).position==="fixed";let o=s?ah(t):t;for(;Pl(o)&&!hx(o);){const a=Rl(o),l=q8(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&fRe.has(i.position)||B1(o)&&!l&&Pse(t,o))?r=r.filter(u=>u!==o):i=a,o=ah(o)}return e.set(t,r),r}function mRe(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?S2(e)?[]:pRe(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,u)=>{const f=lq(e,u,i);return c.top=Ho(f.top,c.top),c.right=oh(f.right,c.right),c.bottom=oh(f.bottom,c.bottom),c.left=Ho(f.left,c.left),c},lq(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function gRe(t){const{width:e,height:n}=Nse(t);return{width:e,height:n}}function yRe(t,e,n){const r=Rc(e),i=Uc(e),s=n==="fixed",o=mm(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=Cc(0);function c(){l.x=T2(i)}if(r||!r&&!s)if((zx(e)!=="body"||B1(i))&&(a=A2(e)),r){const g=mm(e,!0,s,e);l.x=g.x+e.clientLeft,l.y=g.y+e.clientTop}else i&&c();s&&!r&&i&&c();const u=i&&!r&&!s?Ise(i,a):Cc(0),f=o.left+a.scrollLeft-l.x-u.x,m=o.top+a.scrollTop-l.y-u.y;return{x:f,y:m,width:o.width,height:o.height}}function HR(t){return Rl(t).position==="static"}function cq(t,e){if(!Rc(t)||Rl(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Uc(t)===n&&(n=n.ownerDocument.body),n}function Rse(t,e){const n=Wo(t);if(S2(t))return n;if(!Rc(t)){let i=ah(t);for(;i&&!hx(i);){if(Pl(i)&&!HR(i))return i;i=ah(i)}return n}let r=cq(t,e);for(;r&&ZPe(r)&&HR(r);)r=cq(r,e);return r&&hx(r)&&HR(r)&&!q8(r)?n:r||iRe(t)||n}const xRe=async function(t){const e=this.getOffsetParent||Rse,n=this.getDimensions,r=await n(t.floating);return{reference:yRe(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function vRe(t){return Rl(t).direction==="rtl"}const bRe={convertOffsetParentRelativeRectToViewportRelativeRect:lRe,getDocumentElement:Uc,getClippingRect:mRe,getOffsetParent:Rse,getElementRects:xRe,getClientRects:cRe,getDimensions:gRe,getScale:Yg,isElement:Pl,isRTL:vRe};function Ose(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function wRe(t,e){let n=null,r;const i=Uc(t);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=t.getBoundingClientRect(),{left:u,top:f,width:m,height:g}=c;if(a||e(),!m||!g)return;const v=rA(f),x=rA(i.clientWidth-(u+m)),b=rA(i.clientHeight-(f+g)),E=rA(u),k={rootMargin:-v+"px "+-x+"px "+-b+"px "+-E+"px",threshold:Ho(0,oh(1,l))||1};let O=!0;function U(R){const $=R[0].intersectionRatio;if($!==l){if(!O)return o();$?o(!1,$):r=setTimeout(()=>{o(!1,1e-7)},1e3)}$===1&&!Ose(c,t.getBoundingClientRect())&&o(),O=!1}try{n=new IntersectionObserver(U,{...k,root:i.ownerDocument})}catch{n=new IntersectionObserver(U,k)}n.observe(t)}return o(!0),s}function ERe(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=K8(t),u=i||s?[...c?Ow(c):[],...Ow(e)]:[];u.forEach(E=>{i&&E.addEventListener("scroll",n,{passive:!0}),s&&E.addEventListener("resize",n)});const f=c&&a?wRe(c,n):null;let m=-1,g=null;o&&(g=new ResizeObserver(E=>{let[C]=E;C&&C.target===c&&g&&(g.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var k;(k=g)==null||k.observe(e)})),n()}),c&&!l&&g.observe(c),g.observe(e));let v,x=l?mm(t):null;l&&b();function b(){const E=mm(t);x&&!Ose(x,E)&&n(),x=E,v=requestAnimationFrame(b)}return n(),()=>{var E;u.forEach(C=>{i&&C.removeEventListener("scroll",n),s&&C.removeEventListener("resize",n)}),f==null||f(),(E=g)==null||E.disconnect(),g=null,l&&cancelAnimationFrame(v)}}const SRe=KPe,ARe=WPe,TRe=VPe,kRe=JPe,CRe=qPe,uq=HPe,NRe=YPe,_Re=(t,e,n)=>{const r=new Map,i={platform:bRe,...n},s={...i.platform,_c:r};return zPe(t,e,{...i,platform:s})};var IRe=typeof document<"u",PRe=function(){},gT=IRe?T.useLayoutEffect:PRe;function ck(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!ck(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!ck(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function Mse(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function dq(t,e){const n=Mse(t);return Math.round(e*n)/n}function VR(t){const e=T.useRef(t);return gT(()=>{e.current=t}),e}function RRe(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,f]=T.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[m,g]=T.useState(r);ck(m,r)||g(r);const[v,x]=T.useState(null),[b,E]=T.useState(null),C=T.useCallback(G=>{G!==R.current&&(R.current=G,x(G))},[]),k=T.useCallback(G=>{G!==$.current&&($.current=G,E(G))},[]),O=s||v,U=o||b,R=T.useRef(null),$=T.useRef(null),V=T.useRef(u),j=l!=null,F=VR(l),W=VR(i),H=VR(c),B=T.useCallback(()=>{if(!R.current||!$.current)return;const G={placement:e,strategy:n,middleware:m};W.current&&(G.platform=W.current),_Re(R.current,$.current,G).then(te=>{const K={...te,isPositioned:H.current!==!1};A.current&&!ck(V.current,K)&&(V.current=K,Dm.flushSync(()=>{f(K)}))})},[m,e,n,W,H]);gT(()=>{c===!1&&V.current.isPositioned&&(V.current.isPositioned=!1,f(G=>({...G,isPositioned:!1})))},[c]);const A=T.useRef(!1);gT(()=>(A.current=!0,()=>{A.current=!1}),[]),gT(()=>{if(O&&(R.current=O),U&&($.current=U),O&&U){if(F.current)return F.current(O,U,B);B()}},[O,U,B,F,j]);const I=T.useMemo(()=>({reference:R,floating:$,setReference:C,setFloating:k}),[C,k]),D=T.useMemo(()=>({reference:O,floating:U}),[O,U]),z=T.useMemo(()=>{const G={position:n,left:0,top:0};if(!D.floating)return G;const te=dq(D.floating,u.x),K=dq(D.floating,u.y);return a?{...G,transform:"translate("+te+"px, "+K+"px)",...Mse(D.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:te,top:K}},[n,a,D.floating,u.x,u.y]);return T.useMemo(()=>({...u,update:B,refs:I,elements:D,floatingStyles:z}),[u,B,I,D,z])}const ORe=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?uq({element:r.current,padding:i}).fn(n):{}:r?uq({element:r,padding:i}).fn(n):{}}}},MRe=(t,e)=>({...SRe(t),options:[t,e]}),DRe=(t,e)=>({...ARe(t),options:[t,e]}),LRe=(t,e)=>({...NRe(t),options:[t,e]}),jRe=(t,e)=>({...TRe(t),options:[t,e]}),BRe=(t,e)=>({...kRe(t),options:[t,e]}),URe=(t,e)=>({...CRe(t),options:[t,e]}),FRe=(t,e)=>({...ORe(t),options:[t,e]});var $Re="Arrow",Dse=T.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...s}=t;return h.jsx(Mn.svg,{...s,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:h.jsx("polygon",{points:"0,0 30,0 15,10"})})});Dse.displayName=$Re;var zRe=Dse;function HRe(t){const[e,n]=T.useState(void 0);return Os(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var W8="Popper",[Lse,k2]=Mm(W8),[VRe,jse]=Lse(W8),Bse=t=>{const{__scopePopper:e,children:n}=t,[r,i]=T.useState(null);return h.jsx(VRe,{scope:e,anchor:r,onAnchorChange:i,children:n})};Bse.displayName=W8;var Use="PopperAnchor",Fse=T.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,s=jse(Use,n),o=T.useRef(null),a=Nr(e,o),l=T.useRef(null);return T.useEffect(()=>{const c=l.current;l.current=(r==null?void 0:r.current)||o.current,c!==l.current&&s.onAnchorChange(l.current)}),r?null:h.jsx(Mn.div,{...i,ref:a})});Fse.displayName=Use;var Y8="PopperContent",[qRe,GRe]=Lse(Y8),$se=T.forwardRef((t,e)=>{var oe,Ee,ce,me,ue,le;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:g="optimized",onPlaced:v,...x}=t,b=jse(Y8,n),[E,C]=T.useState(null),k=Nr(e,Ie=>C(Ie)),[O,U]=T.useState(null),R=HRe(O),$=(R==null?void 0:R.width)??0,V=(R==null?void 0:R.height)??0,j=r+(s!=="center"?"-"+s:""),F=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},W=Array.isArray(c)?c:[c],H=W.length>0,B={padding:F,boundary:W.filter(WRe),altBoundary:H},{refs:A,floatingStyles:I,placement:D,isPositioned:z,middlewareData:G}=RRe({strategy:"fixed",placement:j,whileElementsMounted:(...Ie)=>ERe(...Ie,{animationFrame:g==="always"}),elements:{reference:b.anchor},middleware:[MRe({mainAxis:i+V,alignmentAxis:o}),l&&DRe({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?LRe():void 0,...B}),l&&jRe({...B}),BRe({...B,apply:({elements:Ie,rects:Ne,availableWidth:$e,availableHeight:Ze})=>{const{width:Ye,height:We}=Ne.reference,At=Ie.floating.style;At.setProperty("--radix-popper-available-width",`${$e}px`),At.setProperty("--radix-popper-available-height",`${Ze}px`),At.setProperty("--radix-popper-anchor-width",`${Ye}px`),At.setProperty("--radix-popper-anchor-height",`${We}px`)}}),O&&FRe({element:O,padding:a}),YRe({arrowWidth:$,arrowHeight:V}),m&&URe({strategy:"referenceHidden",...B})]}),[te,K]=Vse(D),q=sh(v);Os(()=>{z&&(q==null||q())},[z,q]);const M=(oe=G.arrow)==null?void 0:oe.x,_=(Ee=G.arrow)==null?void 0:Ee.y,Y=((ce=G.arrow)==null?void 0:ce.centerOffset)!==0,[X,re]=T.useState();return Os(()=>{E&&re(window.getComputedStyle(E).zIndex)},[E]),h.jsx("div",{ref:A.setFloating,"data-radix-popper-content-wrapper":"",style:{...I,transform:z?I.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:X,"--radix-popper-transform-origin":[(me=G.transformOrigin)==null?void 0:me.x,(ue=G.transformOrigin)==null?void 0:ue.y].join(" "),...((le=G.hide)==null?void 0:le.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:h.jsx(qRe,{scope:n,placedSide:te,onArrowChange:U,arrowX:M,arrowY:_,shouldHideArrow:Y,children:h.jsx(Mn.div,{"data-side":te,"data-align":K,...x,ref:k,style:{...x.style,animation:z?void 0:"none"}})})})});$se.displayName=Y8;var zse="PopperArrow",KRe={top:"bottom",right:"left",bottom:"top",left:"right"},Hse=T.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,s=GRe(zse,r),o=KRe[s.placedSide];return h.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:h.jsx(zRe,{...i,ref:n,style:{...i.style,display:"block"}})})});Hse.displayName=zse;function WRe(t){return t!==null}var YRe=t=>({name:"transformOrigin",options:t,fn(e){var b,E,C;const{placement:n,rects:r,middlewareData:i}=e,o=((b=i.arrow)==null?void 0:b.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,u]=Vse(n),f={start:"0%",center:"50%",end:"100%"}[u],m=(((E=i.arrow)==null?void 0:E.x)??0)+a/2,g=(((C=i.arrow)==null?void 0:C.y)??0)+l/2;let v="",x="";return c==="bottom"?(v=o?f:`${m}px`,x=`${-l}px`):c==="top"?(v=o?f:`${m}px`,x=`${r.floating.height+l}px`):c==="right"?(v=`${-l}px`,x=o?f:`${g}px`):c==="left"&&(v=`${r.floating.width+l}px`,x=o?f:`${g}px`),{data:{x:v,y:x}}}});function Vse(t){const[e,n="center"]=t.split("-");return[e,n]}var JRe=Bse,qse=Fse,Gse=$se,Kse=Hse,XRe="Portal",C2=T.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[i,s]=T.useState(!1);Os(()=>s(!0),[]);const o=n||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?fPe.createPortal(h.jsx(Mn.div,{...r,ref:e}),o):null});C2.displayName=XRe;function QRe(t,e){return T.useReducer((n,r)=>e[n][r]??n,t)}var Lm=t=>{const{present:e,children:n}=t,r=ZRe(e),i=typeof n=="function"?n({present:r.isPresent}):T.Children.only(n),s=Nr(r.ref,e5e(i));return typeof n=="function"||r.isPresent?T.cloneElement(i,{ref:s}):null};Lm.displayName="Presence";function ZRe(t){const[e,n]=T.useState(),r=T.useRef(null),i=T.useRef(t),s=T.useRef("none"),o=t?"mounted":"unmounted",[a,l]=QRe(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return T.useEffect(()=>{const c=iA(r.current);s.current=a==="mounted"?c:"none"},[a]),Os(()=>{const c=r.current,u=i.current;if(u!==t){const m=s.current,g=iA(c);t?l("MOUNT"):g==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&m!==g?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,l]),Os(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,f=g=>{const x=iA(r.current).includes(CSS.escape(g.animationName));if(g.target===e&&x&&(l("ANIMATION_END"),!i.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},m=g=>{g.target===e&&(s.current=iA(r.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:T.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function iA(t){return(t==null?void 0:t.animationName)||"none"}function e5e(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var t5e=Symbol("radix.slottable");function n5e(t){const e=({children:n})=>h.jsx(h.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=t5e,e}var r5e=KC[" useInsertionEffect ".trim().toString()]||Os;function Mw({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[i,s,o]=i5e({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:i;{const u=T.useRef(t!==void 0);T.useEffect(()=>{const f=u.current;f!==a&&console.warn(`${r} is changing from ${f?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,r])}const c=T.useCallback(u=>{var f;if(a){const m=s5e(u)?u(t):u;m!==t&&((f=o.current)==null||f.call(o,m))}else s(u)},[a,t,s,o]);return[l,c]}function i5e({defaultProp:t,onChange:e}){const[n,r]=T.useState(t),i=T.useRef(n),s=T.useRef(e);return r5e(()=>{s.current=e},[e]),T.useEffect(()=>{var o;i.current!==n&&((o=s.current)==null||o.call(s,n),i.current=n)},[n,i]),[n,r,s]}function s5e(t){return typeof t=="function"}var Wse=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),o5e="VisuallyHidden",Yse=T.forwardRef((t,e)=>h.jsx(Mn.span,{...t,ref:e,style:{...Wse,...t.style}}));Yse.displayName=o5e;var a5e=Yse,[N2]=Mm("Tooltip",[k2]),J8=k2(),Jse="TooltipProvider",l5e=700,fq="tooltip.open",[c5e,Xse]=N2(Jse),Qse=t=>{const{__scopeTooltip:e,delayDuration:n=l5e,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:s}=t,o=T.useRef(!0),a=T.useRef(!1),l=T.useRef(0);return T.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),h.jsx(c5e,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:T.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:T.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:T.useCallback(c=>{a.current=c},[]),disableHoverableContent:i,children:s})};Qse.displayName=Jse;var Zse="Tooltip",[Lmt,U1]=N2(Zse),yM="TooltipTrigger",u5e=T.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=U1(yM,n),s=Xse(yM,n),o=J8(n),a=T.useRef(null),l=Nr(e,a,i.onTriggerChange),c=T.useRef(!1),u=T.useRef(!1),f=T.useCallback(()=>c.current=!1,[]);return T.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),h.jsx(qse,{asChild:!0,...o,children:h.jsx(Mn.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:l,onPointerMove:pn(t.onPointerMove,m=>{m.pointerType!=="touch"&&!u.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),u.current=!0)}),onPointerLeave:pn(t.onPointerLeave,()=>{i.onTriggerLeave(),u.current=!1}),onPointerDown:pn(t.onPointerDown,()=>{i.open&&i.onClose(),c.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:pn(t.onFocus,()=>{c.current||i.onOpen()}),onBlur:pn(t.onBlur,i.onClose),onClick:pn(t.onClick,i.onClose)})})});u5e.displayName=yM;var X8="TooltipPortal",[d5e,f5e]=N2(X8,{forceMount:void 0}),eoe=t=>{const{__scopeTooltip:e,forceMount:n,children:r,container:i}=t,s=U1(X8,e);return h.jsx(d5e,{scope:e,forceMount:n,children:h.jsx(Lm,{present:n||s.open,children:h.jsx(C2,{asChild:!0,container:i,children:r})})})};eoe.displayName=X8;var px="TooltipContent",toe=T.forwardRef((t,e)=>{const n=f5e(px,t.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...s}=t,o=U1(px,t.__scopeTooltip);return h.jsx(Lm,{present:r||o.open,children:o.disableHoverableContent?h.jsx(noe,{side:i,...s,ref:e}):h.jsx(h5e,{side:i,...s,ref:e})})}),h5e=T.forwardRef((t,e)=>{const n=U1(px,t.__scopeTooltip),r=Xse(px,t.__scopeTooltip),i=T.useRef(null),s=Nr(e,i),[o,a]=T.useState(null),{trigger:l,onClose:c}=n,u=i.current,{onPointerInTransitChange:f}=r,m=T.useCallback(()=>{a(null),f(!1)},[f]),g=T.useCallback((v,x)=>{const b=v.currentTarget,E={x:v.clientX,y:v.clientY},C=x5e(E,b.getBoundingClientRect()),k=v5e(E,C),O=b5e(x.getBoundingClientRect()),U=E5e([...k,...O]);a(U),f(!0)},[f]);return T.useEffect(()=>()=>m(),[m]),T.useEffect(()=>{if(l&&u){const v=b=>g(b,u),x=b=>g(b,l);return l.addEventListener("pointerleave",v),u.addEventListener("pointerleave",x),()=>{l.removeEventListener("pointerleave",v),u.removeEventListener("pointerleave",x)}}},[l,u,g,m]),T.useEffect(()=>{if(o){const v=x=>{const b=x.target,E={x:x.clientX,y:x.clientY},C=(l==null?void 0:l.contains(b))||(u==null?void 0:u.contains(b)),k=!w5e(E,o);C?m():k&&(m(),c())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[l,u,o,c,m]),h.jsx(noe,{...t,ref:s})}),[p5e,m5e]=N2(Zse,{isInside:!1}),g5e=n5e("TooltipContent"),noe=T.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=t,l=U1(px,n),c=J8(n),{onClose:u}=l;return T.useEffect(()=>(document.addEventListener(fq,u),()=>document.removeEventListener(fq,u)),[u]),T.useEffect(()=>{if(l.trigger){const f=m=>{const g=m.target;g!=null&&g.contains(l.trigger)&&u()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[l.trigger,u]),h.jsx(w2,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:u,children:h.jsxs(Gse,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[h.jsx(g5e,{children:r}),h.jsx(p5e,{scope:n,isInside:!0,children:h.jsx(a5e,{id:l.contentId,role:"tooltip",children:i||r})})]})})});toe.displayName=px;var roe="TooltipArrow",y5e=T.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=J8(n);return m5e(roe,n).isInside?null:h.jsx(Kse,{...i,...r,ref:e})});y5e.displayName=roe;function x5e(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),i=Math.abs(e.right-t.x),s=Math.abs(e.left-t.x);switch(Math.min(n,r,i,s)){case s:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function v5e(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function b5e(t){const{top:e,right:n,bottom:r,left:i}=t;return[{x:i,y:e},{x:n,y:e},{x:n,y:r},{x:i,y:r}]}function w5e(t,e){const{x:n,y:r}=t;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s],l=e[o],c=a.x,u=a.y,f=l.x,m=l.y;u>r!=m>r&&n<(f-c)*(r-u)/(m-u)+c&&(i=!i)}return i}function E5e(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),S5e(e)}function S5e(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const i=t[r];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const i=t[r];for(;n.length>=2;){const s=n[n.length-1],o=n[n.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))n.pop();else break}n.push(i)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var A5e=Qse,T5e=eoe,ioe=toe;function soe(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=soe(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Rn(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=soe(t))&&(r&&(r+=" "),r+=e);return r}const k5e=(t,e)=>{const n=new Array(t.length+e.length);for(let r=0;r<t.length;r++)n[r]=t[r];for(let r=0;r<e.length;r++)n[t.length+r]=e[r];return n},C5e=(t,e)=>({classGroupId:t,validator:e}),ooe=(t=new Map,e=null,n)=>({nextPart:t,validators:e,classGroupId:n}),uk="-",hq=[],N5e="arbitrary..",_5e=t=>{const e=P5e(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{if(o.startsWith("[")&&o.endsWith("]"))return I5e(o);const a=o.split(uk),l=a[0]===""&&a.length>1?1:0;return aoe(a,l,e)},getConflictingClassGroupIds:(o,a)=>{if(a){const l=r[o],c=n[o];return l?c?k5e(c,l):l:c||hq}return n[o]||hq}}},aoe=(t,e,n)=>{if(t.length-e===0)return n.classGroupId;const i=t[e],s=n.nextPart.get(i);if(s){const c=aoe(t,e+1,s);if(c)return c}const o=n.validators;if(o===null)return;const a=e===0?t.join(uk):t.slice(e).join(uk),l=o.length;for(let c=0;c<l;c++){const u=o[c];if(u.validator(a))return u.classGroupId}},I5e=t=>t.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=t.slice(1,-1),n=e.indexOf(":"),r=e.slice(0,n);return r?N5e+r:void 0})(),P5e=t=>{const{theme:e,classGroups:n}=t;return R5e(n,e)},R5e=(t,e)=>{const n=ooe();for(const r in t){const i=t[r];Q8(i,n,r,e)}return n},Q8=(t,e,n,r)=>{const i=t.length;for(let s=0;s<i;s++){const o=t[s];O5e(o,e,n,r)}},O5e=(t,e,n,r)=>{if(typeof t=="string"){M5e(t,e,n);return}if(typeof t=="function"){D5e(t,e,n,r);return}L5e(t,e,n,r)},M5e=(t,e,n)=>{const r=t===""?e:loe(e,t);r.classGroupId=n},D5e=(t,e,n,r)=>{if(j5e(t)){Q8(t(r),e,n,r);return}e.validators===null&&(e.validators=[]),e.validators.push(C5e(n,t))},L5e=(t,e,n,r)=>{const i=Object.entries(t),s=i.length;for(let o=0;o<s;o++){const[a,l]=i[o];Q8(l,loe(e,a),n,r)}},loe=(t,e)=>{let n=t;const r=e.split(uk),i=r.length;for(let s=0;s<i;s++){const o=r[s];let a=n.nextPart.get(o);a||(a=ooe(),n.nextPart.set(o,a)),n=a}return n},j5e=t=>"isThemeGetter"in t&&t.isThemeGetter===!0,B5e=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=Object.create(null),r=Object.create(null);const i=(s,o)=>{n[s]=o,e++,e>t&&(e=0,r=n,n=Object.create(null))};return{get(s){let o=n[s];if(o!==void 0)return o;if((o=r[s])!==void 0)return i(s,o),o},set(s,o){s in n?n[s]=o:i(s,o)}}},xM="!",pq=":",U5e=[],mq=(t,e,n,r,i)=>({modifiers:t,hasImportantModifier:e,baseClassName:n,maybePostfixModifierPosition:r,isExternal:i}),F5e=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=i=>{const s=[];let o=0,a=0,l=0,c;const u=i.length;for(let x=0;x<u;x++){const b=i[x];if(o===0&&a===0){if(b===pq){s.push(i.slice(l,x)),l=x+1;continue}if(b==="/"){c=x;continue}}b==="["?o++:b==="]"?o--:b==="("?a++:b===")"&&a--}const f=s.length===0?i:i.slice(l);let m=f,g=!1;f.endsWith(xM)?(m=f.slice(0,-1),g=!0):f.startsWith(xM)&&(m=f.slice(1),g=!0);const v=c&&c>l?c-l:void 0;return mq(s,g,m,v)};if(e){const i=e+pq,s=r;r=o=>o.startsWith(i)?s(o.slice(i.length)):mq(U5e,!1,o,void 0,!0)}if(n){const i=r;r=s=>n({className:s,parseClassName:i})}return r},$5e=t=>{const e=new Map;return t.orderSensitiveModifiers.forEach((n,r)=>{e.set(n,1e6+r)}),n=>{const r=[];let i=[];for(let s=0;s<n.length;s++){const o=n[s],a=o[0]==="[",l=e.has(o);a||l?(i.length>0&&(i.sort(),r.push(...i),i=[]),r.push(o)):i.push(o)}return i.length>0&&(i.sort(),r.push(...i)),r}},z5e=t=>({cache:B5e(t.cacheSize),parseClassName:F5e(t),sortModifiers:$5e(t),..._5e(t)}),H5e=/\s+/,V5e=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:s}=e,o=[],a=t.trim().split(H5e);let l="";for(let c=a.length-1;c>=0;c-=1){const u=a[c],{isExternal:f,modifiers:m,hasImportantModifier:g,baseClassName:v,maybePostfixModifierPosition:x}=n(u);if(f){l=u+(l.length>0?" "+l:l);continue}let b=!!x,E=r(b?v.substring(0,x):v);if(!E){if(!b){l=u+(l.length>0?" "+l:l);continue}if(E=r(v),!E){l=u+(l.length>0?" "+l:l);continue}b=!1}const C=m.length===0?"":m.length===1?m[0]:s(m).join(":"),k=g?C+xM:C,O=k+E;if(o.indexOf(O)>-1)continue;o.push(O);const U=i(E,b);for(let R=0;R<U.length;++R){const $=U[R];o.push(k+$)}l=u+(l.length>0?" "+l:l)}return l},q5e=(...t)=>{let e=0,n,r,i="";for(;e<t.length;)(n=t[e++])&&(r=coe(n))&&(i&&(i+=" "),i+=r);return i},coe=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=coe(t[r]))&&(n&&(n+=" "),n+=e);return n},G5e=(t,...e)=>{let n,r,i,s;const o=l=>{const c=e.reduce((u,f)=>f(u),t());return n=z5e(c),r=n.cache.get,i=n.cache.set,s=a,a(l)},a=l=>{const c=r(l);if(c)return c;const u=V5e(l,n);return i(l,u),u};return s=o,(...l)=>s(q5e(...l))},K5e=[],vi=t=>{const e=n=>n[t]||K5e;return e.isThemeGetter=!0,e},uoe=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,doe=/^\((?:(\w[\w-]*):)?(.+)\)$/i,W5e=/^\d+\/\d+$/,Y5e=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,J5e=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,X5e=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Q5e=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Z5e=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,q0=t=>W5e.test(t),gn=t=>!!t&&!Number.isNaN(Number(t)),ff=t=>!!t&&Number.isInteger(Number(t)),qR=t=>t.endsWith("%")&&gn(t.slice(0,-1)),fu=t=>Y5e.test(t),eOe=()=>!0,tOe=t=>J5e.test(t)&&!X5e.test(t),foe=()=>!1,nOe=t=>Q5e.test(t),rOe=t=>Z5e.test(t),iOe=t=>!_t(t)&&!It(t),sOe=t=>Hx(t,moe,foe),_t=t=>uoe.test(t),Wh=t=>Hx(t,goe,tOe),GR=t=>Hx(t,uOe,gn),gq=t=>Hx(t,hoe,foe),oOe=t=>Hx(t,poe,rOe),sA=t=>Hx(t,yoe,nOe),It=t=>doe.test(t),fb=t=>Vx(t,goe),aOe=t=>Vx(t,dOe),yq=t=>Vx(t,hoe),lOe=t=>Vx(t,moe),cOe=t=>Vx(t,poe),oA=t=>Vx(t,yoe,!0),Hx=(t,e,n)=>{const r=uoe.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},Vx=(t,e,n=!1)=>{const r=doe.exec(t);return r?r[1]?e(r[1]):n:!1},hoe=t=>t==="position"||t==="percentage",poe=t=>t==="image"||t==="url",moe=t=>t==="length"||t==="size"||t==="bg-size",goe=t=>t==="length",uOe=t=>t==="number",dOe=t=>t==="family-name",yoe=t=>t==="shadow",fOe=()=>{const t=vi("color"),e=vi("font"),n=vi("text"),r=vi("font-weight"),i=vi("tracking"),s=vi("leading"),o=vi("breakpoint"),a=vi("container"),l=vi("spacing"),c=vi("radius"),u=vi("shadow"),f=vi("inset-shadow"),m=vi("text-shadow"),g=vi("drop-shadow"),v=vi("blur"),x=vi("perspective"),b=vi("aspect"),E=vi("ease"),C=vi("animate"),k=()=>["auto","avoid","all","avoid-page","page","left","right","column"],O=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],U=()=>[...O(),It,_t],R=()=>["auto","hidden","clip","visible","scroll"],$=()=>["auto","contain","none"],V=()=>[It,_t,l],j=()=>[q0,"full","auto",...V()],F=()=>[ff,"none","subgrid",It,_t],W=()=>["auto",{span:["full",ff,It,_t]},ff,It,_t],H=()=>[ff,"auto",It,_t],B=()=>["auto","min","max","fr",It,_t],A=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],I=()=>["start","end","center","stretch","center-safe","end-safe"],D=()=>["auto",...V()],z=()=>[q0,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...V()],G=()=>[t,It,_t],te=()=>[...O(),yq,gq,{position:[It,_t]}],K=()=>["no-repeat",{repeat:["","x","y","space","round"]}],q=()=>["auto","cover","contain",lOe,sOe,{size:[It,_t]}],M=()=>[qR,fb,Wh],_=()=>["","none","full",c,It,_t],Y=()=>["",gn,fb,Wh],X=()=>["solid","dashed","dotted","double"],re=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],oe=()=>[gn,qR,yq,gq],Ee=()=>["","none",v,It,_t],ce=()=>["none",gn,It,_t],me=()=>["none",gn,It,_t],ue=()=>[gn,It,_t],le=()=>[q0,"full",...V()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[fu],breakpoint:[fu],color:[eOe],container:[fu],"drop-shadow":[fu],ease:["in","out","in-out"],font:[iOe],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[fu],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[fu],shadow:[fu],spacing:["px",gn],text:[fu],"text-shadow":[fu],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",q0,_t,It,b]}],container:["container"],columns:[{columns:[gn,_t,It,a]}],"break-after":[{"break-after":k()}],"break-before":[{"break-before":k()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:U()}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:$()}],"overscroll-x":[{"overscroll-x":$()}],"overscroll-y":[{"overscroll-y":$()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:j()}],"inset-x":[{"inset-x":j()}],"inset-y":[{"inset-y":j()}],start:[{start:j()}],end:[{end:j()}],top:[{top:j()}],right:[{right:j()}],bottom:[{bottom:j()}],left:[{left:j()}],visibility:["visible","invisible","collapse"],z:[{z:[ff,"auto",It,_t]}],basis:[{basis:[q0,"full","auto",a,...V()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[gn,q0,"auto","initial","none",_t]}],grow:[{grow:["",gn,It,_t]}],shrink:[{shrink:["",gn,It,_t]}],order:[{order:[ff,"first","last","none",It,_t]}],"grid-cols":[{"grid-cols":F()}],"col-start-end":[{col:W()}],"col-start":[{"col-start":H()}],"col-end":[{"col-end":H()}],"grid-rows":[{"grid-rows":F()}],"row-start-end":[{row:W()}],"row-start":[{"row-start":H()}],"row-end":[{"row-end":H()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":B()}],"auto-rows":[{"auto-rows":B()}],gap:[{gap:V()}],"gap-x":[{"gap-x":V()}],"gap-y":[{"gap-y":V()}],"justify-content":[{justify:[...A(),"normal"]}],"justify-items":[{"justify-items":[...I(),"normal"]}],"justify-self":[{"justify-self":["auto",...I()]}],"align-content":[{content:["normal",...A()]}],"align-items":[{items:[...I(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...I(),{baseline:["","last"]}]}],"place-content":[{"place-content":A()}],"place-items":[{"place-items":[...I(),"baseline"]}],"place-self":[{"place-self":["auto",...I()]}],p:[{p:V()}],px:[{px:V()}],py:[{py:V()}],ps:[{ps:V()}],pe:[{pe:V()}],pt:[{pt:V()}],pr:[{pr:V()}],pb:[{pb:V()}],pl:[{pl:V()}],m:[{m:D()}],mx:[{mx:D()}],my:[{my:D()}],ms:[{ms:D()}],me:[{me:D()}],mt:[{mt:D()}],mr:[{mr:D()}],mb:[{mb:D()}],ml:[{ml:D()}],"space-x":[{"space-x":V()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":V()}],"space-y-reverse":["space-y-reverse"],size:[{size:z()}],w:[{w:[a,"screen",...z()]}],"min-w":[{"min-w":[a,"screen","none",...z()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[o]},...z()]}],h:[{h:["screen","lh",...z()]}],"min-h":[{"min-h":["screen","lh","none",...z()]}],"max-h":[{"max-h":["screen","lh",...z()]}],"font-size":[{text:["base",n,fb,Wh]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,It,GR]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",qR,_t]}],"font-family":[{font:[aOe,_t,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,It,_t]}],"line-clamp":[{"line-clamp":[gn,"none",It,GR]}],leading:[{leading:[s,...V()]}],"list-image":[{"list-image":["none",It,_t]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",It,_t]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:G()}],"text-color":[{text:G()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...X(),"wavy"]}],"text-decoration-thickness":[{decoration:[gn,"from-font","auto",It,Wh]}],"text-decoration-color":[{decoration:G()}],"underline-offset":[{"underline-offset":[gn,"auto",It,_t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:V()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",It,_t]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",It,_t]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:te()}],"bg-repeat":[{bg:K()}],"bg-size":[{bg:q()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},ff,It,_t],radial:["",It,_t],conic:[ff,It,_t]},cOe,oOe]}],"bg-color":[{bg:G()}],"gradient-from-pos":[{from:M()}],"gradient-via-pos":[{via:M()}],"gradient-to-pos":[{to:M()}],"gradient-from":[{from:G()}],"gradient-via":[{via:G()}],"gradient-to":[{to:G()}],rounded:[{rounded:_()}],"rounded-s":[{"rounded-s":_()}],"rounded-e":[{"rounded-e":_()}],"rounded-t":[{"rounded-t":_()}],"rounded-r":[{"rounded-r":_()}],"rounded-b":[{"rounded-b":_()}],"rounded-l":[{"rounded-l":_()}],"rounded-ss":[{"rounded-ss":_()}],"rounded-se":[{"rounded-se":_()}],"rounded-ee":[{"rounded-ee":_()}],"rounded-es":[{"rounded-es":_()}],"rounded-tl":[{"rounded-tl":_()}],"rounded-tr":[{"rounded-tr":_()}],"rounded-br":[{"rounded-br":_()}],"rounded-bl":[{"rounded-bl":_()}],"border-w":[{border:Y()}],"border-w-x":[{"border-x":Y()}],"border-w-y":[{"border-y":Y()}],"border-w-s":[{"border-s":Y()}],"border-w-e":[{"border-e":Y()}],"border-w-t":[{"border-t":Y()}],"border-w-r":[{"border-r":Y()}],"border-w-b":[{"border-b":Y()}],"border-w-l":[{"border-l":Y()}],"divide-x":[{"divide-x":Y()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Y()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...X(),"hidden","none"]}],"divide-style":[{divide:[...X(),"hidden","none"]}],"border-color":[{border:G()}],"border-color-x":[{"border-x":G()}],"border-color-y":[{"border-y":G()}],"border-color-s":[{"border-s":G()}],"border-color-e":[{"border-e":G()}],"border-color-t":[{"border-t":G()}],"border-color-r":[{"border-r":G()}],"border-color-b":[{"border-b":G()}],"border-color-l":[{"border-l":G()}],"divide-color":[{divide:G()}],"outline-style":[{outline:[...X(),"none","hidden"]}],"outline-offset":[{"outline-offset":[gn,It,_t]}],"outline-w":[{outline:["",gn,fb,Wh]}],"outline-color":[{outline:G()}],shadow:[{shadow:["","none",u,oA,sA]}],"shadow-color":[{shadow:G()}],"inset-shadow":[{"inset-shadow":["none",f,oA,sA]}],"inset-shadow-color":[{"inset-shadow":G()}],"ring-w":[{ring:Y()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:G()}],"ring-offset-w":[{"ring-offset":[gn,Wh]}],"ring-offset-color":[{"ring-offset":G()}],"inset-ring-w":[{"inset-ring":Y()}],"inset-ring-color":[{"inset-ring":G()}],"text-shadow":[{"text-shadow":["none",m,oA,sA]}],"text-shadow-color":[{"text-shadow":G()}],opacity:[{opacity:[gn,It,_t]}],"mix-blend":[{"mix-blend":[...re(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":re()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[gn]}],"mask-image-linear-from-pos":[{"mask-linear-from":oe()}],"mask-image-linear-to-pos":[{"mask-linear-to":oe()}],"mask-image-linear-from-color":[{"mask-linear-from":G()}],"mask-image-linear-to-color":[{"mask-linear-to":G()}],"mask-image-t-from-pos":[{"mask-t-from":oe()}],"mask-image-t-to-pos":[{"mask-t-to":oe()}],"mask-image-t-from-color":[{"mask-t-from":G()}],"mask-image-t-to-color":[{"mask-t-to":G()}],"mask-image-r-from-pos":[{"mask-r-from":oe()}],"mask-image-r-to-pos":[{"mask-r-to":oe()}],"mask-image-r-from-color":[{"mask-r-from":G()}],"mask-image-r-to-color":[{"mask-r-to":G()}],"mask-image-b-from-pos":[{"mask-b-from":oe()}],"mask-image-b-to-pos":[{"mask-b-to":oe()}],"mask-image-b-from-color":[{"mask-b-from":G()}],"mask-image-b-to-color":[{"mask-b-to":G()}],"mask-image-l-from-pos":[{"mask-l-from":oe()}],"mask-image-l-to-pos":[{"mask-l-to":oe()}],"mask-image-l-from-color":[{"mask-l-from":G()}],"mask-image-l-to-color":[{"mask-l-to":G()}],"mask-image-x-from-pos":[{"mask-x-from":oe()}],"mask-image-x-to-pos":[{"mask-x-to":oe()}],"mask-image-x-from-color":[{"mask-x-from":G()}],"mask-image-x-to-color":[{"mask-x-to":G()}],"mask-image-y-from-pos":[{"mask-y-from":oe()}],"mask-image-y-to-pos":[{"mask-y-to":oe()}],"mask-image-y-from-color":[{"mask-y-from":G()}],"mask-image-y-to-color":[{"mask-y-to":G()}],"mask-image-radial":[{"mask-radial":[It,_t]}],"mask-image-radial-from-pos":[{"mask-radial-from":oe()}],"mask-image-radial-to-pos":[{"mask-radial-to":oe()}],"mask-image-radial-from-color":[{"mask-radial-from":G()}],"mask-image-radial-to-color":[{"mask-radial-to":G()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":O()}],"mask-image-conic-pos":[{"mask-conic":[gn]}],"mask-image-conic-from-pos":[{"mask-conic-from":oe()}],"mask-image-conic-to-pos":[{"mask-conic-to":oe()}],"mask-image-conic-from-color":[{"mask-conic-from":G()}],"mask-image-conic-to-color":[{"mask-conic-to":G()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:te()}],"mask-repeat":[{mask:K()}],"mask-size":[{mask:q()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",It,_t]}],filter:[{filter:["","none",It,_t]}],blur:[{blur:Ee()}],brightness:[{brightness:[gn,It,_t]}],contrast:[{contrast:[gn,It,_t]}],"drop-shadow":[{"drop-shadow":["","none",g,oA,sA]}],"drop-shadow-color":[{"drop-shadow":G()}],grayscale:[{grayscale:["",gn,It,_t]}],"hue-rotate":[{"hue-rotate":[gn,It,_t]}],invert:[{invert:["",gn,It,_t]}],saturate:[{saturate:[gn,It,_t]}],sepia:[{sepia:["",gn,It,_t]}],"backdrop-filter":[{"backdrop-filter":["","none",It,_t]}],"backdrop-blur":[{"backdrop-blur":Ee()}],"backdrop-brightness":[{"backdrop-brightness":[gn,It,_t]}],"backdrop-contrast":[{"backdrop-contrast":[gn,It,_t]}],"backdrop-grayscale":[{"backdrop-grayscale":["",gn,It,_t]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[gn,It,_t]}],"backdrop-invert":[{"backdrop-invert":["",gn,It,_t]}],"backdrop-opacity":[{"backdrop-opacity":[gn,It,_t]}],"backdrop-saturate":[{"backdrop-saturate":[gn,It,_t]}],"backdrop-sepia":[{"backdrop-sepia":["",gn,It,_t]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":V()}],"border-spacing-x":[{"border-spacing-x":V()}],"border-spacing-y":[{"border-spacing-y":V()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",It,_t]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[gn,"initial",It,_t]}],ease:[{ease:["linear","initial",E,It,_t]}],delay:[{delay:[gn,It,_t]}],animate:[{animate:["none",C,It,_t]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[x,It,_t]}],"perspective-origin":[{"perspective-origin":U()}],rotate:[{rotate:ce()}],"rotate-x":[{"rotate-x":ce()}],"rotate-y":[{"rotate-y":ce()}],"rotate-z":[{"rotate-z":ce()}],scale:[{scale:me()}],"scale-x":[{"scale-x":me()}],"scale-y":[{"scale-y":me()}],"scale-z":[{"scale-z":me()}],"scale-3d":["scale-3d"],skew:[{skew:ue()}],"skew-x":[{"skew-x":ue()}],"skew-y":[{"skew-y":ue()}],transform:[{transform:[It,_t,"","none","gpu","cpu"]}],"transform-origin":[{origin:U()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:le()}],"translate-x":[{"translate-x":le()}],"translate-y":[{"translate-y":le()}],"translate-z":[{"translate-z":le()}],"translate-none":["translate-none"],accent:[{accent:G()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:G()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",It,_t]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":V()}],"scroll-mx":[{"scroll-mx":V()}],"scroll-my":[{"scroll-my":V()}],"scroll-ms":[{"scroll-ms":V()}],"scroll-me":[{"scroll-me":V()}],"scroll-mt":[{"scroll-mt":V()}],"scroll-mr":[{"scroll-mr":V()}],"scroll-mb":[{"scroll-mb":V()}],"scroll-ml":[{"scroll-ml":V()}],"scroll-p":[{"scroll-p":V()}],"scroll-px":[{"scroll-px":V()}],"scroll-py":[{"scroll-py":V()}],"scroll-ps":[{"scroll-ps":V()}],"scroll-pe":[{"scroll-pe":V()}],"scroll-pt":[{"scroll-pt":V()}],"scroll-pr":[{"scroll-pr":V()}],"scroll-pb":[{"scroll-pb":V()}],"scroll-pl":[{"scroll-pl":V()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",It,_t]}],fill:[{fill:["none",...G()]}],"stroke-w":[{stroke:[gn,fb,Wh,GR]}],stroke:[{stroke:["none",...G()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},hOe=G5e(fOe);function jt(...t){return hOe(Rn(t))}const pOe=A5e,mOe=T.forwardRef(({className:t,sideOffset:e=4,...n},r)=>h.jsx(T5e,{children:h.jsx(ioe,{ref:r,sideOffset:e,className:jt("z-50 overflow-hidden rounded-md bg-slate-800 border border-slate-700 px-3 py-1.5 text-xs text-slate-200 animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));mOe.displayName=ioe.displayName;const KR=({icon:t,label:e,isActive:n,onClick:r})=>h.jsxs("button",{onClick:r,className:jt("w-full flex items-center gap-3 px-3 py-2.5 text-[13px] font-medium transition-all duration-200 rounded-xl relative overflow-hidden",n?"text-white bg-[#1a1b21]/80 backdrop-blur-sm":"text-[#747580] hover:text-[#a0a1a8] hover:bg-[#1a1b21]/40"),title:e,children:[n&&h.jsx("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 w-1 h-6 bg-[#E7FE55] rounded-full"}),h.jsx("span",{className:jt("flex items-center justify-center transition-colors ml-1",n&&"text-[#E7FE55]"),children:t}),h.jsx("span",{className:"tracking-wide",children:e})]}),xq=({status:t,label:e,latency:n,network:r})=>{const i=t==="Down",s=t==="Checking",o=i?"#ef4444":s?"#747580":"#E7FE55";return h.jsxs("div",{className:"flex items-center justify-between py-0.5",children:[h.jsx("span",{className:"text-[9px] uppercase tracking-[0.05em] text-[#5a5b63]",children:e}),h.jsxs("div",{className:"flex items-center gap-1.5",children:[h.jsx("span",{className:"text-[9px] font-mono text-[#5a5b63]",children:i?"DOWN":s?"...":n}),h.jsx("div",{className:"w-1 h-1 rounded-full",style:{backgroundColor:o}})]})]})},gOe=({activeTab:t,setActiveTab:e,isVaultUnlocked:n,onSelectConversation:r,onNewChat:i,currentConversationId:s,password:o,isOpen:a=!1,onClose:l})=>{const[c,u]=T.useState("Checking");T.useEffect(()=>{const x=async()=>{const E=await zt.checkHealth();u(E?"Online":"Down")};x();const b=setInterval(x,3e4);return()=>clearInterval(b)},[]);const f=x=>{e(x),l&&l()},m=[Ce.VAULT_DEALER,Ce.DEALER_DASHBOARD,Ce.DEALER_THINKING,Ce.DEALER_CONFIG,Ce.DEALER_PROMPT].includes(t),g=[Ce.POLYMARKET_DEALER,Ce.POLYMARKET_DASHBOARD,Ce.POLYMARKET_THINKING,Ce.POLYMARKET_CONFIG,Ce.POLYMARKET_PROMPT].includes(t),v=t===Ce.AGENT;return h.jsxs(pOe,{delayDuration:300,children:[h.jsx(go,{children:a&&h.jsx(Ht.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 z-40 xl:hidden",onClick:l})}),h.jsxs("aside",{className:jt("m-3 p-5 flex flex-col fixed h-[calc(100%-24px)] bg-[#0f1015]/95 backdrop-blur-xl z-50 w-60 transform transition-transform duration-300 ease-in-out","rounded-2xl border border-[#232328]/60 shadow-2xl shadow-black/20",a?"translate-x-0":"-translate-x-full","xl:translate-x-0"),children:[h.jsxs("div",{className:"mb-8 flex items-center gap-3 px-2",children:[h.jsx("div",{className:"w-8 h-8 flex-shrink-0 bg-[#E7FE55] rounded flex items-center justify-center",children:h.jsx(sd,{className:"text-black w-5 h-5"})}),h.jsx("h1",{className:"text-[15px] font-semibold text-white tracking-tight hidden xl:block",children:"AutonomousVault"})]}),h.jsxs("nav",{className:"space-y-1 flex-1",children:[h.jsx(KR,{icon:h.jsx(yo,{size:18}),label:"Dashboard",isActive:t===Ce.DASHBOARD,onClick:()=>f(Ce.DASHBOARD)}),h.jsxs("div",{onClick:()=>f(Ce.AGENT),className:jt("flex items-center justify-between px-3 py-2.5 rounded-xl transition-all duration-200 cursor-pointer relative overflow-hidden",v?"bg-[#1a1b21]/80 backdrop-blur-sm":"hover:bg-[#1a1b21]/40"),children:[v&&h.jsx("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 w-1 h-6 bg-[#E7FE55] rounded-full"}),h.jsxs("div",{className:jt("ml-1","flex flex-1 items-center gap-3 text-[13px] font-medium",t===Ce.AGENT?"text-white":"text-[#747580] hover:text-[#a0a1a8]"),title:"Vault Operator",children:[h.jsx("span",{className:jt("transition-colors",t===Ce.AGENT&&"text-[#E7FE55]"),children:h.jsx(Sg,{size:18})}),h.jsx("span",{className:"tracking-wide",children:"Vault Operator"})]})]}),h.jsx("div",{className:"pt-2",children:h.jsxs("button",{onClick:()=>f(Ce.VAULT_DEALER),className:jt("w-full flex items-center gap-3 px-3 py-2.5 text-[13px] font-medium transition-all duration-200 rounded-xl relative overflow-hidden",m?"text-white bg-[#1a1b21]/80 backdrop-blur-sm":"text-[#747580] hover:text-[#a0a1a8] hover:bg-[#1a1b21]/40"),title:"Hyperliquid Dealer",children:[m&&h.jsx("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 w-1 h-6 bg-[#E7FE55] rounded-full"}),h.jsx("span",{className:jt("transition-colors ml-1",m&&"text-[#E7FE55]"),children:h.jsx($a,{size:18})}),h.jsx("span",{className:"tracking-wide",children:"Hyperliquid Dealer"})]})}),h.jsx("div",{children:h.jsxs("button",{onClick:()=>f(Ce.POLYMARKET_DEALER),className:jt("w-full flex items-center gap-3 px-3 py-2.5 text-[13px] font-medium transition-all duration-200 rounded-xl relative overflow-hidden",g?"text-white bg-[#1a1b21]/80 backdrop-blur-sm":"text-[#747580] hover:text-[#a0a1a8] hover:bg-[#1a1b21]/40"),title:"Polymarket Dealer",children:[g&&h.jsx("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 w-1 h-6 bg-[#E7FE55] rounded-full"}),h.jsx("span",{className:jt("transition-colors ml-1",g&&"text-[#E7FE55]"),children:h.jsx(In,{size:18})}),h.jsx("span",{className:"tracking-wide",children:"Polymarket Dealer"})]})}),h.jsx(KR,{icon:h.jsx(OTe,{size:18}),label:"Vault",isActive:t===Ce.VAULT,onClick:()=>f(Ce.VAULT)}),h.jsx(KR,{icon:h.jsx(Sne,{size:18}),label:"Token Costs",isActive:t===Ce.TOKEN_COSTS,onClick:()=>f(Ce.TOKEN_COSTS)})]}),h.jsxs("div",{className:"pt-6 border-t border-[#232328]",children:[h.jsx("div",{className:"text-[10px] uppercase tracking-[0.1em] text-[#747580] font-semibold mb-3 px-2",children:"Network Status"}),h.jsxs("div",{className:"space-y-2 px-2",children:[h.jsx(xq,{status:"Online",label:"Solana Devnet",latency:"18m",network:"solana"}),h.jsx(xq,{status:c,label:"Hyperliquid Testnet",latency:"450ms",network:"hyperliquid"})]})]})]})]})};var yOe=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function Z8(t){if(typeof t!="string")return!1;var e=yOe;return e.includes(t)}var xOe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],vOe=new Set(xOe);function xoe(t){return typeof t!="string"?!1:vOe.has(t)}function voe(t){return typeof t=="string"&&t.startsWith("data-")}function Ys(t){if(typeof t!="object"||t===null)return{};var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(xoe(n)||voe(n))&&(e[n]=t[n]);return e}function gm(t){if(t==null)return null;if(T.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return Ys(e)}return typeof t=="object"&&!Array.isArray(t)?Ys(t):null}function Ms(t){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(xoe(n)||voe(n)||Z8(n))&&(e[n]=t[n]);return e}function bOe(t){return t==null?null:T.isValidElement(t)?Ms(t.props):typeof t=="object"&&!Array.isArray(t)?Ms(t):null}var wOe=["children","width","height","viewBox","className","style","title","desc"];function vM(){return vM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vM.apply(null,arguments)}function EOe(t,e){if(t==null)return{};var n,r,i=SOe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function SOe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var boe=T.forwardRef((t,e)=>{var{children:n,width:r,height:i,viewBox:s,className:o,style:a,title:l,desc:c}=t,u=EOe(t,wOe),f=s||{width:r,height:i,x:0,y:0},m=Rn("recharts-surface",o);return T.createElement("svg",vM({},Ms(u),{className:m,width:r,height:i,style:a,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:e}),T.createElement("title",null,l),T.createElement("desc",null,c),n)}),AOe=["children","className"];function bM(){return bM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bM.apply(null,arguments)}function TOe(t,e){if(t==null)return{};var n,r,i=kOe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function kOe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Wr=T.forwardRef((t,e)=>{var{children:n,className:r}=t,i=TOe(t,AOe),s=Rn("recharts-layer",r);return T.createElement("g",bM({className:s},Ms(i),{ref:e}),n)}),COe=T.createContext(null);function pr(t){return function(){return t}}const woe=Math.cos,dk=Math.sin,Bl=Math.sqrt,fk=Math.PI,_2=2*fk,wM=Math.PI,EM=2*wM,np=1e-6,NOe=EM-np;function Eoe(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function _Oe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Eoe;const n=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class IOe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Eoe:_Oe(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,s,o){this._append`C${+e},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(e,n,r,i,s){if(e=+e,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,l=r-e,c=i-n,u=o-e,f=a-n,m=u*u+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(m>np)if(!(Math.abs(f*l-c*u)>np)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let g=r-o,v=i-a,x=l*l+c*c,b=g*g+v*v,E=Math.sqrt(x),C=Math.sqrt(m),k=s*Math.tan((wM-Math.acos((x+m-b)/(2*E*C)))/2),O=k/C,U=k/E;Math.abs(O-1)>np&&this._append`L${e+O*u},${n+O*f}`,this._append`A${s},${s},0,0,${+(f*g>u*v)},${this._x1=e+U*l},${this._y1=n+U*c}`}}arc(e,n,r,i,s,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),l=r*Math.sin(i),c=e+a,u=n+l,f=1^o,m=o?i-s:s-i;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>np||Math.abs(this._y1-u)>np)&&this._append`L${c},${u}`,r&&(m<0&&(m=m%EM+EM),m>NOe?this._append`A${r},${r},0,1,${f},${e-a},${n-l}A${r},${r},0,1,${f},${this._x1=c},${this._y1=u}`:m>np&&this._append`A${r},${r},0,${+(m>=wM)},${f},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function e6(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new IOe(e)}function t6(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Soe(t){this._context=t}Soe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function I2(t){return new Soe(t)}function Aoe(t){return t[0]}function Toe(t){return t[1]}function koe(t,e){var n=pr(!0),r=null,i=I2,s=null,o=e6(a);t=typeof t=="function"?t:t===void 0?Aoe:pr(t),e=typeof e=="function"?e:e===void 0?Toe:pr(e);function a(l){var c,u=(l=t6(l)).length,f,m=!1,g;for(r==null&&(s=i(g=o())),c=0;c<=u;++c)!(c<u&&n(f=l[c],c,l))===m&&((m=!m)?s.lineStart():s.lineEnd()),m&&s.point(+t(f,c,l),+e(f,c,l));if(g)return s=null,g+""||null}return a.x=function(l){return arguments.length?(t=typeof l=="function"?l:pr(+l),a):t},a.y=function(l){return arguments.length?(e=typeof l=="function"?l:pr(+l),a):e},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:pr(!!l),a):n},a.curve=function(l){return arguments.length?(i=l,r!=null&&(s=i(r)),a):i},a.context=function(l){return arguments.length?(l==null?r=s=null:s=i(r=l),a):r},a}function aA(t,e,n){var r=null,i=pr(!0),s=null,o=I2,a=null,l=e6(c);t=typeof t=="function"?t:t===void 0?Aoe:pr(+t),e=typeof e=="function"?e:pr(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?Toe:pr(+n);function c(f){var m,g,v,x=(f=t6(f)).length,b,E=!1,C,k=new Array(x),O=new Array(x);for(s==null&&(a=o(C=l())),m=0;m<=x;++m){if(!(m<x&&i(b=f[m],m,f))===E)if(E=!E)g=m,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),v=m-1;v>=g;--v)a.point(k[v],O[v]);a.lineEnd(),a.areaEnd()}E&&(k[m]=+t(b,m,f),O[m]=+e(b,m,f),a.point(r?+r(b,m,f):k[m],n?+n(b,m,f):O[m]))}if(C)return a=null,C+""||null}function u(){return koe().defined(i).curve(o).context(s)}return c.x=function(f){return arguments.length?(t=typeof f=="function"?f:pr(+f),r=null,c):t},c.x0=function(f){return arguments.length?(t=typeof f=="function"?f:pr(+f),c):t},c.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:pr(+f),c):r},c.y=function(f){return arguments.length?(e=typeof f=="function"?f:pr(+f),n=null,c):e},c.y0=function(f){return arguments.length?(e=typeof f=="function"?f:pr(+f),c):e},c.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:pr(+f),c):n},c.lineX0=c.lineY0=function(){return u().x(t).y(e)},c.lineY1=function(){return u().x(t).y(n)},c.lineX1=function(){return u().x(r).y(e)},c.defined=function(f){return arguments.length?(i=typeof f=="function"?f:pr(!!f),c):i},c.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),c):o},c.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),c):s},c}class Coe{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function POe(t){return new Coe(t,!0)}function ROe(t){return new Coe(t,!1)}const n6={draw(t,e){const n=Bl(e/fk);t.moveTo(n,0),t.arc(0,0,n,0,_2)}},OOe={draw(t,e){const n=Bl(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},Noe=Bl(1/3),MOe=Noe*2,DOe={draw(t,e){const n=Bl(e/MOe),r=n*Noe;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},LOe={draw(t,e){const n=Bl(e),r=-n/2;t.rect(r,r,n,n)}},jOe=.8908130915292852,_oe=dk(fk/10)/dk(7*fk/10),BOe=dk(_2/10)*_oe,UOe=-woe(_2/10)*_oe,FOe={draw(t,e){const n=Bl(e*jOe),r=BOe*n,i=UOe*n;t.moveTo(0,-n),t.lineTo(r,i);for(let s=1;s<5;++s){const o=_2*s/5,a=woe(o),l=dk(o);t.lineTo(l*n,-a*n),t.lineTo(a*r-l*i,l*r+a*i)}t.closePath()}},WR=Bl(3),$Oe={draw(t,e){const n=-Bl(e/(WR*3));t.moveTo(0,n*2),t.lineTo(-WR*n,-n),t.lineTo(WR*n,-n),t.closePath()}},ma=-.5,ga=Bl(3)/2,SM=1/Bl(12),zOe=(SM/2+1)*3,HOe={draw(t,e){const n=Bl(e/zOe),r=n/2,i=n*SM,s=r,o=n*SM+n,a=-s,l=o;t.moveTo(r,i),t.lineTo(s,o),t.lineTo(a,l),t.lineTo(ma*r-ga*i,ga*r+ma*i),t.lineTo(ma*s-ga*o,ga*s+ma*o),t.lineTo(ma*a-ga*l,ga*a+ma*l),t.lineTo(ma*r+ga*i,ma*i-ga*r),t.lineTo(ma*s+ga*o,ma*o-ga*s),t.lineTo(ma*a+ga*l,ma*l-ga*a),t.closePath()}};function VOe(t,e){let n=null,r=e6(i);t=typeof t=="function"?t:pr(t||n6),e=typeof e=="function"?e:pr(e===void 0?64:+e);function i(){let s;if(n||(n=s=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(t=typeof s=="function"?s:pr(s),i):t},i.size=function(s){return arguments.length?(e=typeof s=="function"?s:pr(+s),i):e},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function hk(){}function pk(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Ioe(t){this._context=t}Ioe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:pk(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:pk(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function qOe(t){return new Ioe(t)}function Poe(t){this._context=t}Poe.prototype={areaStart:hk,areaEnd:hk,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:pk(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function GOe(t){return new Poe(t)}function Roe(t){this._context=t}Roe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:pk(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function KOe(t){return new Roe(t)}function Ooe(t){this._context=t}Ooe.prototype={areaStart:hk,areaEnd:hk,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function WOe(t){return new Ooe(t)}function vq(t){return t<0?-1:1}function bq(t,e,n){var r=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(vq(s)+vq(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function wq(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function YR(t,e,n){var r=t._x0,i=t._y0,s=t._x1,o=t._y1,a=(s-r)/3;t._context.bezierCurveTo(r+a,i+a*e,s-a,o-a*n,s,o)}function mk(t){this._context=t}mk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:YR(this,this._t0,wq(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,YR(this,wq(this,n=bq(this,t,e)),n);break;default:YR(this,this._t0,n=bq(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function Moe(t){this._context=new Doe(t)}(Moe.prototype=Object.create(mk.prototype)).point=function(t,e){mk.prototype.point.call(this,e,t)};function Doe(t){this._context=t}Doe.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,s){this._context.bezierCurveTo(e,t,r,n,s,i)}};function YOe(t){return new mk(t)}function JOe(t){return new Moe(t)}function Loe(t){this._context=t}Loe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=Eq(t),i=Eq(e),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function Eq(t){var e,n=t.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,s[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/s[e-1],s[e]-=r,o[e]-=r*o[e-1];for(i[n-1]=o[n-1]/s[n-1],e=n-2;e>=0;--e)i[e]=(o[e]-i[e+1])/s[e];for(s[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function XOe(t){return new Loe(t)}function P2(t,e){this._context=t,this._t=e}P2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function QOe(t){return new P2(t,.5)}function ZOe(t){return new P2(t,0)}function e3e(t){return new P2(t,1)}function ym(t,e){if((o=t.length)>1)for(var n=1,r,i,s=t[e[0]],o,a=s.length;n<o;++n)for(i=s,s=t[e[n]],r=0;r<a;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function AM(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function t3e(t,e){return t[e]}function n3e(t){const e=[];return e.key=t,e}function r3e(){var t=pr([]),e=AM,n=ym,r=t3e;function i(s){var o=Array.from(t.apply(this,arguments),n3e),a,l=o.length,c=-1,u;for(const f of s)for(a=0,++c;a<l;++a)(o[a][c]=[0,+r(f,o[a].key,c,s)]).data=f;for(a=0,u=t6(e(o));a<l;++a)o[u[a]].index=a;return n(o,u),o}return i.keys=function(s){return arguments.length?(t=typeof s=="function"?s:pr(Array.from(s)),i):t},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:pr(+s),i):r},i.order=function(s){return arguments.length?(e=s==null?AM:typeof s=="function"?s:pr(Array.from(s)),i):e},i.offset=function(s){return arguments.length?(n=s??ym,i):n},i}function i3e(t,e){if((r=t.length)>0){for(var n,r,i=0,s=t[0].length,o;i<s;++i){for(o=n=0;n<r;++n)o+=t[n][i][1]||0;if(o)for(n=0;n<r;++n)t[n][i][1]/=o}ym(t,e)}}function s3e(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,s=r.length;n<s;++n){for(var o=0,a=0;o<i;++o)a+=t[o][n][1]||0;r[n][1]+=r[n][0]=-a/2}ym(t,e)}}function o3e(t,e){if(!(!((o=t.length)>0)||!((s=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,s,o;r<s;++r){for(var a=0,l=0,c=0;a<o;++a){for(var u=t[e[a]],f=u[r][1]||0,m=u[r-1][1]||0,g=(f-m)/2,v=0;v<a;++v){var x=t[e[v]],b=x[r][1]||0,E=x[r-1][1]||0;g+=b-E}l+=f,c+=g*f}i[r-1][1]+=i[r-1][0]=n,l&&(n-=c/l)}i[r-1][1]+=i[r-1][0]=n,ym(t,e)}}var JR={},XR={},Sq;function a3e(){return Sq||(Sq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(XR)),XR}var QR={},Aq;function joe(){return Aq||(Aq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(QR)),QR}var ZR={},Tq;function r6(){return Tq||(Tq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){var r;return typeof n=="string"||typeof n=="symbol"?n:Object.is((r=n==null?void 0:n.valueOf)==null?void 0:r.call(n),-0)?"-0":String(n)}t.toKey=e})(ZR)),ZR}var e5={},t5={},kq;function l3e(){return kq||(kq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(e).join(",");const r=String(n);return r==="0"&&Object.is(Number(n),-0)?"-0":r}t.toString=e})(t5)),t5}var Cq;function i6(){return Cq||(Cq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=l3e(),n=r6();function r(i){if(Array.isArray(i))return i.map(n.toKey);if(typeof i=="symbol")return[i];i=e.toString(i);const s=[],o=i.length;if(o===0)return s;let a=0,l="",c="",u=!1;for(i.charCodeAt(0)===46&&(s.push(""),a++);a<o;){const f=i[a];c?f==="\\"&&a+1<o?(a++,l+=i[a]):f===c?c="":l+=f:u?f==='"'||f==="'"?c=f:f==="]"?(u=!1,s.push(l),l=""):l+=f:f==="["?(u=!0,l&&(s.push(l),l="")):f==="."?l&&(s.push(l),l=""):l+=f,a++}return l&&s.push(l),s}t.toPath=r})(e5)),e5}var Nq;function s6(){return Nq||(Nq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=a3e(),n=joe(),r=r6(),i=i6();function s(a,l,c){if(a==null)return c;switch(typeof l){case"string":{if(e.isUnsafeProperty(l))return c;const u=a[l];return u===void 0?n.isDeepKey(l)?s(a,i.toPath(l),c):c:u}case"number":case"symbol":{typeof l=="number"&&(l=r.toKey(l));const u=a[l];return u===void 0?c:u}default:{if(Array.isArray(l))return o(a,l,c);if(Object.is(l==null?void 0:l.valueOf(),-0)?l="-0":l=String(l),e.isUnsafeProperty(l))return c;const u=a[l];return u===void 0?c:u}}}function o(a,l,c){if(l.length===0)return c;let u=a;for(let f=0;f<l.length;f++){if(u==null||e.isUnsafeProperty(l[f]))return c;u=u[l[f]]}return u===void 0?c:u}t.get=s})(JR)),JR}var n5,_q;function c3e(){return _q||(_q=1,n5=s6().get),n5}var u3e=c3e();const xm=us(u3e);var d3e=4;function Yf(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d3e,n=10**e,r=Math.round(t*n)/n;return Object.is(r,-0)?0:r}function Vr(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.reduce((i,s,o)=>{var a=n[o-1];return typeof a=="string"?i+a+s:a!==void 0?i+Yf(a)+s:i+s},"")}var Ui=t=>t===0?0:t>0?1:-1,Ha=t=>typeof t=="number"&&t!=+t,hd=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,wt=t=>(typeof t=="number"||t instanceof Number)&&!Ha(t),Oc=t=>wt(t)||typeof t=="string",f3e=0,Dw=t=>{var e=++f3e;return"".concat(t||"").concat(e)},Ps=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!wt(e)&&typeof e!="string")return r;var s;if(hd(e)){if(n==null)return r;var o=e.indexOf("%");s=n*parseFloat(e.slice(0,o))/100}else s=+e;return Ha(s)&&(s=r),i&&n!=null&&s>n&&(s=n),s},Boe=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},r=0;r<e;r++)if(!n[String(t[r])])n[String(t[r])]=!0;else return!0;return!1};function qn(t,e,n){return wt(t)&&wt(e)?Yf(t+n*(e-t)):e}function Uoe(t,e,n){if(!(!t||!t.length))return t.find(r=>r&&(typeof e=="function"?e(r):xm(r,e))===n)}var Er=t=>t===null||typeof t>"u",F1=t=>Er(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function h3e(t){return t!=null}function $1(){}var p3e=["type","size","sizeType"];function TM(){return TM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},TM.apply(null,arguments)}function Iq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Pq(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Iq(Object(n),!0).forEach(function(r){m3e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Iq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function m3e(t,e,n){return(e=g3e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function g3e(t){var e=y3e(t,"string");return typeof e=="symbol"?e:e+""}function y3e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function x3e(t,e){if(t==null)return{};var n,r,i=v3e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function v3e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Foe={symbolCircle:n6,symbolCross:OOe,symbolDiamond:DOe,symbolSquare:LOe,symbolStar:FOe,symbolTriangle:$Oe,symbolWye:HOe},b3e=Math.PI/180,w3e=t=>{var e="symbol".concat(F1(t));return Foe[e]||n6},E3e=(t,e,n)=>{if(e==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var r=18*b3e;return 1.25*t*t*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},S3e=(t,e)=>{Foe["symbol".concat(F1(t))]=e},$oe=t=>{var{type:e="circle",size:n=64,sizeType:r="area"}=t,i=x3e(t,p3e),s=Pq(Pq({},i),{},{type:e,size:n,sizeType:r}),o="circle";typeof e=="string"&&(o=e);var a=()=>{var m=w3e(o),g=VOe().type(m).size(E3e(n,r,o)),v=g();if(v!==null)return v},{className:l,cx:c,cy:u}=s,f=Ms(s);return wt(c)&&wt(u)&&wt(n)?T.createElement("path",TM({},f,{className:Rn("recharts-symbols",l),transform:"translate(".concat(c,", ").concat(u,")"),d:a()})):null};$oe.registerSymbol=S3e;var zoe=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,o6=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(T.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{Z8(i)&&(r[i]=(s=>n[i](n,s)))}),r},A3e=(t,e,n)=>r=>(t(e,n,r),null),R2=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var r=null;return Object.keys(t).forEach(i=>{var s=t[i];Z8(i)&&typeof s=="function"&&(r||(r={}),r[i]=A3e(s,e,n))}),r};function Rq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function T3e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Rq(Object(n),!0).forEach(function(r){k3e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Rq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function k3e(t,e,n){return(e=C3e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function C3e(t){var e=N3e(t,"string");return typeof e=="symbol"?e:e+""}function N3e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yi(t,e){var n=T3e({},t),r=e,i=Object.keys(e),s=i.reduce((o,a)=>(o[a]===void 0&&r[a]!==void 0&&(o[a]=r[a]),o),n);return s}var r5={},i5={},Oq;function _3e(){return Oq||(Oq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){const i=new Map;for(let s=0;s<n.length;s++){const o=n[s],a=r(o);i.has(a)||i.set(a,o)}return Array.from(i.values())}t.uniqBy=e})(i5)),i5}var s5={},Mq;function Hoe(){return Mq||(Mq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(s5)),s5}var o5={},a5={},l5={},Dq;function I3e(){return Dq||(Dq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})(l5)),l5}var Lq;function a6(){return Lq||(Lq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=I3e();function n(r){return r!=null&&typeof r!="function"&&e.isLength(r.length)}t.isArrayLike=n})(a5)),a5}var c5={},jq;function P3e(){return jq||(jq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})(c5)),c5}var Bq;function R3e(){return Bq||(Bq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=a6(),n=P3e();function r(i){return n.isObjectLike(i)&&e.isArrayLike(i)}t.isArrayLikeObject=r})(o5)),o5}var u5={},d5={},Uq;function O3e(){return Uq||(Uq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=s6();function n(r){return function(i){return e.get(i,r)}}t.property=n})(d5)),d5}var f5={},h5={},p5={},m5={},Fq;function Voe(){return Fq||(Fq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(m5)),m5}var g5={},$q;function qoe(){return $q||($q=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})(g5)),g5}var y5={},zq;function Goe(){return zq||(zq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}t.eq=e})(y5)),y5}var Hq;function M3e(){return Hq||(Hq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Voe(),n=qoe(),r=Goe();function i(u,f,m){return typeof m!="function"?i(u,f,()=>{}):s(u,f,function g(v,x,b,E,C,k){const O=m(v,x,b,E,C,k);return O!==void 0?!!O:s(v,x,g,k)},new Map)}function s(u,f,m,g){if(f===u)return!0;switch(typeof f){case"object":return o(u,f,m,g);case"function":return Object.keys(f).length>0?s(u,{...f},m,g):r.eq(u,f);default:return e.isObject(u)?typeof f=="string"?f==="":!0:r.eq(u,f)}}function o(u,f,m,g){if(f==null)return!0;if(Array.isArray(f))return l(u,f,m,g);if(f instanceof Map)return a(u,f,m,g);if(f instanceof Set)return c(u,f,m,g);const v=Object.keys(f);if(u==null||n.isPrimitive(u))return v.length===0;if(v.length===0)return!0;if(g!=null&&g.has(f))return g.get(f)===u;g==null||g.set(f,u);try{for(let x=0;x<v.length;x++){const b=v[x];if(!n.isPrimitive(u)&&!(b in u)||f[b]===void 0&&u[b]!==void 0||f[b]===null&&u[b]!==null||!m(u[b],f[b],b,u,f,g))return!1}return!0}finally{g==null||g.delete(f)}}function a(u,f,m,g){if(f.size===0)return!0;if(!(u instanceof Map))return!1;for(const[v,x]of f.entries()){const b=u.get(v);if(m(b,x,v,u,f,g)===!1)return!1}return!0}function l(u,f,m,g){if(f.length===0)return!0;if(!Array.isArray(u))return!1;const v=new Set;for(let x=0;x<f.length;x++){const b=f[x];let E=!1;for(let C=0;C<u.length;C++){if(v.has(C))continue;const k=u[C];let O=!1;if(m(k,b,x,u,f,g)&&(O=!0),O){v.add(C),E=!0;break}}if(!E)return!1}return!0}function c(u,f,m,g){return f.size===0?!0:u instanceof Set?l([...u],[...f],m,g):!1}t.isMatchWith=i,t.isSetMatch=c})(p5)),p5}var Vq;function Koe(){return Vq||(Vq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=M3e();function n(r,i){return e.isMatchWith(r,i,()=>{})}t.isMatch=n})(h5)),h5}var x5={},v5={},b5={},qq;function D3e(){return qq||(qq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}t.getSymbols=e})(b5)),b5}var w5={},Gq;function Woe(){return Gq||(Gq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})(w5)),w5}var E5={},Kq;function Yoe(){return Kq||(Kq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",s="[object Arguments]",o="[object Symbol]",a="[object Date]",l="[object Map]",c="[object Set]",u="[object Array]",f="[object Function]",m="[object ArrayBuffer]",g="[object Object]",v="[object Error]",x="[object DataView]",b="[object Uint8Array]",E="[object Uint8ClampedArray]",C="[object Uint16Array]",k="[object Uint32Array]",O="[object BigUint64Array]",U="[object Int8Array]",R="[object Int16Array]",$="[object Int32Array]",V="[object BigInt64Array]",j="[object Float32Array]",F="[object Float64Array]";t.argumentsTag=s,t.arrayBufferTag=m,t.arrayTag=u,t.bigInt64ArrayTag=V,t.bigUint64ArrayTag=O,t.booleanTag=i,t.dataViewTag=x,t.dateTag=a,t.errorTag=v,t.float32ArrayTag=j,t.float64ArrayTag=F,t.functionTag=f,t.int16ArrayTag=R,t.int32ArrayTag=$,t.int8ArrayTag=U,t.mapTag=l,t.numberTag=r,t.objectTag=g,t.regexpTag=e,t.setTag=c,t.stringTag=n,t.symbolTag=o,t.uint16ArrayTag=C,t.uint32ArrayTag=k,t.uint8ArrayTag=b,t.uint8ClampedArrayTag=E})(E5)),E5}var S5={},Wq;function L3e(){return Wq||(Wq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(S5)),S5}var Yq;function Joe(){return Yq||(Yq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=D3e(),n=Woe(),r=Yoe(),i=qoe(),s=L3e();function o(u,f){return a(u,void 0,u,new Map,f)}function a(u,f,m,g=new Map,v=void 0){const x=v==null?void 0:v(u,f,m,g);if(x!==void 0)return x;if(i.isPrimitive(u))return u;if(g.has(u))return g.get(u);if(Array.isArray(u)){const b=new Array(u.length);g.set(u,b);for(let E=0;E<u.length;E++)b[E]=a(u[E],E,m,g,v);return Object.hasOwn(u,"index")&&(b.index=u.index),Object.hasOwn(u,"input")&&(b.input=u.input),b}if(u instanceof Date)return new Date(u.getTime());if(u instanceof RegExp){const b=new RegExp(u.source,u.flags);return b.lastIndex=u.lastIndex,b}if(u instanceof Map){const b=new Map;g.set(u,b);for(const[E,C]of u)b.set(E,a(C,E,m,g,v));return b}if(u instanceof Set){const b=new Set;g.set(u,b);for(const E of u)b.add(a(E,void 0,m,g,v));return b}if(typeof on<"u"&&on.isBuffer(u))return u.subarray();if(s.isTypedArray(u)){const b=new(Object.getPrototypeOf(u)).constructor(u.length);g.set(u,b);for(let E=0;E<u.length;E++)b[E]=a(u[E],E,m,g,v);return b}if(u instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&u instanceof SharedArrayBuffer)return u.slice(0);if(u instanceof DataView){const b=new DataView(u.buffer.slice(0),u.byteOffset,u.byteLength);return g.set(u,b),l(b,u,m,g,v),b}if(typeof File<"u"&&u instanceof File){const b=new File([u],u.name,{type:u.type});return g.set(u,b),l(b,u,m,g,v),b}if(typeof Blob<"u"&&u instanceof Blob){const b=new Blob([u],{type:u.type});return g.set(u,b),l(b,u,m,g,v),b}if(u instanceof Error){const b=new u.constructor;return g.set(u,b),b.message=u.message,b.name=u.name,b.stack=u.stack,b.cause=u.cause,l(b,u,m,g,v),b}if(u instanceof Boolean){const b=new Boolean(u.valueOf());return g.set(u,b),l(b,u,m,g,v),b}if(u instanceof Number){const b=new Number(u.valueOf());return g.set(u,b),l(b,u,m,g,v),b}if(u instanceof String){const b=new String(u.valueOf());return g.set(u,b),l(b,u,m,g,v),b}if(typeof u=="object"&&c(u)){const b=Object.create(Object.getPrototypeOf(u));return g.set(u,b),l(b,u,m,g,v),b}return u}function l(u,f,m=u,g,v){const x=[...Object.keys(f),...e.getSymbols(f)];for(let b=0;b<x.length;b++){const E=x[b],C=Object.getOwnPropertyDescriptor(u,E);(C==null||C.writable)&&(u[E]=a(f[E],E,m,g,v))}}function c(u){switch(n.getTag(u)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=o,t.cloneDeepWithImpl=a,t.copyProperties=l})(v5)),v5}var Jq;function j3e(){return Jq||(Jq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Joe();function n(r){return e.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}t.cloneDeep=n})(x5)),x5}var Xq;function B3e(){return Xq||(Xq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Koe(),n=j3e();function r(i){return i=n.cloneDeep(i),s=>e.isMatch(s,i)}t.matches=r})(f5)),f5}var A5={},T5={},k5={},Qq;function U3e(){return Qq||(Qq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Joe(),n=Yoe();function r(i,s){return e.cloneDeepWith(i,(o,a,l,c)=>{const u=s==null?void 0:s(o,a,l,c);if(u!==void 0)return u;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const f=new i.constructor(i==null?void 0:i.valueOf());return e.copyProperties(f,i),f}case n.argumentsTag:{const f={};return e.copyProperties(f,i),f.length=i.length,f[Symbol.iterator]=i[Symbol.iterator],f}default:return}})}t.cloneDeepWith=r})(k5)),k5}var Zq;function F3e(){return Zq||(Zq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=U3e();function n(r){return e.cloneDeepWith(r)}t.cloneDeep=n})(T5)),T5}var C5={},N5={},eG;function Xoe(){return eG||(eG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return e.test(r)}}t.isIndex=n})(N5)),N5}var _5={},tG;function $3e(){return tG||(tG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Woe();function n(r){return r!==null&&typeof r=="object"&&e.getTag(r)==="[object Arguments]"}t.isArguments=n})(_5)),_5}var nG;function z3e(){return nG||(nG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=joe(),n=Xoe(),r=$3e(),i=i6();function s(o,a){let l;if(Array.isArray(a)?l=a:typeof a=="string"&&e.isDeepKey(a)&&(o==null?void 0:o[a])==null?l=i.toPath(a):l=[a],l.length===0)return!1;let c=o;for(let u=0;u<l.length;u++){const f=l[u];if((c==null||!Object.hasOwn(c,f))&&!((Array.isArray(c)||r.isArguments(c))&&n.isIndex(f)&&f<c.length))return!1;c=c[f]}return!0}t.has=s})(C5)),C5}var rG;function H3e(){return rG||(rG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Koe(),n=r6(),r=F3e(),i=s6(),s=z3e();function o(a,l){switch(typeof a){case"object":{Object.is(a==null?void 0:a.valueOf(),-0)&&(a="-0");break}case"number":{a=n.toKey(a);break}}return l=r.cloneDeep(l),function(c){const u=i.get(c,a);return u===void 0?s.has(c,a):l===void 0?u===void 0:e.isMatch(u,l)}}t.matchesProperty=o})(A5)),A5}var iG;function V3e(){return iG||(iG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Hoe(),n=O3e(),r=B3e(),i=H3e();function s(o){if(o==null)return e.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?i.matchesProperty(o[0],o[1]):r.matches(o);case"string":case"symbol":case"number":return n.property(o)}}t.iteratee=s})(u5)),u5}var sG;function q3e(){return sG||(sG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=_3e(),n=Hoe(),r=R3e(),i=V3e();function s(o,a=n.identity){return r.isArrayLikeObject(o)?e.uniqBy(Array.from(o),i.iteratee(a)):[]}t.uniqBy=s})(r5)),r5}var I5,oG;function G3e(){return oG||(oG=1,I5=q3e().uniqBy),I5}var K3e=G3e();const aG=us(K3e);function W3e(t,e,n){return e===!0?aG(t,n):typeof e=="function"?aG(t,e):t}var P5={exports:{}},R5={},O5={exports:{}},M5={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lG;function Y3e(){if(lG)return M5;lG=1;var t=Nx();function e(f,m){return f===m&&(f!==0||1/f===1/m)||f!==f&&m!==m}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function a(f,m){var g=m(),v=r({inst:{value:g,getSnapshot:m}}),x=v[0].inst,b=v[1];return s(function(){x.value=g,x.getSnapshot=m,l(x)&&b({inst:x})},[f,g,m]),i(function(){return l(x)&&b({inst:x}),f(function(){l(x)&&b({inst:x})})},[f]),o(g),g}function l(f){var m=f.getSnapshot;f=f.value;try{var g=m();return!n(f,g)}catch{return!0}}function c(f,m){return m()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return M5.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:u,M5}var cG;function J3e(){return cG||(cG=1,O5.exports=Y3e()),O5.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uG;function X3e(){if(uG)return R5;uG=1;var t=Nx(),e=J3e();function n(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,a=t.useMemo,l=t.useDebugValue;return R5.useSyncExternalStoreWithSelector=function(c,u,f,m,g){var v=s(null);if(v.current===null){var x={hasValue:!1,value:null};v.current=x}else x=v.current;v=a(function(){function E(R){if(!C){if(C=!0,k=R,R=m(R),g!==void 0&&x.hasValue){var $=x.value;if(g($,R))return O=$}return O=R}if($=O,r(k,R))return $;var V=m(R);return g!==void 0&&g($,V)?(k=R,$):(k=R,O=V)}var C=!1,k,O,U=f===void 0?null:f;return[function(){return E(u())},U===null?void 0:function(){return E(U())}]},[u,f,m,g]);var b=i(c,v[0],v[1]);return o(function(){x.hasValue=!0,x.value=b},[b]),l(b),b},R5}var dG;function Q3e(){return dG||(dG=1,P5.exports=X3e()),P5.exports}var Z3e=Q3e(),l6=T.createContext(null),e4e=t=>t,_r=()=>{var t=T.useContext(l6);return t?t.store.dispatch:e4e},yT=()=>{},t4e=()=>yT,n4e=(t,e)=>t===e;function Pt(t){var e=T.useContext(l6);return Z3e.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:t4e,e?e.store.getState:yT,e?e.store.getState:yT,e?t:yT,n4e)}function r4e(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function i4e(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function s4e(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var fG=t=>Array.isArray(t)?t:[t];function o4e(t){const e=Array.isArray(t[0])?t[0]:t;return s4e(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function a4e(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}var l4e=class{constructor(t){this.value=t}deref(){return this.value}},c4e=typeof WeakRef<"u"?WeakRef:l4e,u4e=0,hG=1;function lA(){return{s:u4e,v:void 0,o:null,p:null}}function Qoe(t,e={}){let n=lA();const{resultEqualityCheck:r}=e;let i,s=0;function o(){var f;let a=n;const{length:l}=arguments;for(let m=0,g=l;m<g;m++){const v=arguments[m];if(typeof v=="function"||typeof v=="object"&&v!==null){let x=a.o;x===null&&(a.o=x=new WeakMap);const b=x.get(v);b===void 0?(a=lA(),x.set(v,a)):a=b}else{let x=a.p;x===null&&(a.p=x=new Map);const b=x.get(v);b===void 0?(a=lA(),x.set(v,a)):a=b}}const c=a;let u;if(a.s===hG)u=a.v;else if(u=t.apply(null,arguments),s++,r){const m=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;m!=null&&r(m,u)&&(u=m,s!==0&&s--),i=typeof u=="object"&&u!==null||typeof u=="function"?new c4e(u):u}return c.s=hG,c.v=u,u}return o.clearCache=()=>{n=lA(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function d4e(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let s=0,o=0,a,l={},c=i.pop();typeof c=="object"&&(l=c,c=i.pop()),r4e(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);const u={...n,...l},{memoize:f,memoizeOptions:m=[],argsMemoize:g=Qoe,argsMemoizeOptions:v=[]}=u,x=fG(m),b=fG(v),E=o4e(i),C=f(function(){return s++,c.apply(null,arguments)},...x),k=g(function(){o++;const U=a4e(E,arguments);return a=C.apply(null,U),a},...b);return Object.assign(k,{resultFunc:c,memoizedResultFunc:C,dependencies:E,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:g})};return Object.assign(r,{withTypes:()=>r}),r}var Me=d4e(Qoe),f4e=Object.assign((t,e=Me)=>{i4e(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(s=>t[s]);return e(r,(...s)=>s.reduce((o,a,l)=>(o[n[l]]=a,o),{}))},{withTypes:()=>f4e}),D5={},L5={},j5={},pG;function h4e(){return pG||(pG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,s)=>{if(r!==i){const o=e(r),a=e(i);if(o===a&&o===0){if(r<i)return s==="desc"?1:-1;if(r>i)return s==="desc"?-1:1}return s==="desc"?a-o:o-a}return 0};t.compareValues=n})(j5)),j5}var B5={},U5={},mG;function Zoe(){return mG||(mG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(U5)),U5}var gG;function p4e(){return gG||(gG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Zoe(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,o){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||e.isSymbol(s)?!0:typeof s=="string"&&(r.test(s)||!n.test(s))||o!=null&&Object.hasOwn(o,s)}t.isKey=i})(B5)),B5}var yG;function m4e(){return yG||(yG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=h4e(),n=p4e(),r=i6();function i(s,o,a,l){if(s==null)return[];a=l?void 0:a,Array.isArray(s)||(s=Object.values(s)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(a)||(a=a==null?[]:[a]),a=a.map(g=>String(g));const c=(g,v)=>{let x=g;for(let b=0;b<v.length&&x!=null;++b)x=x[v[b]];return x},u=(g,v)=>v==null||g==null?v:typeof g=="object"&&"key"in g?Object.hasOwn(v,g.key)?v[g.key]:c(v,g.path):typeof g=="function"?g(v):Array.isArray(g)?c(v,g):typeof v=="object"?v[g]:v,f=o.map(g=>(Array.isArray(g)&&g.length===1&&(g=g[0]),g==null||typeof g=="function"||Array.isArray(g)||n.isKey(g)?g:{key:g,path:r.toPath(g)}));return s.map(g=>({original:g,criteria:f.map(v=>u(v,g))})).slice().sort((g,v)=>{for(let x=0;x<f.length;x++){const b=e.compareValues(g.criteria[x],v.criteria[x],a[x]);if(b!==0)return b}return 0}).map(g=>g.original)}t.orderBy=i})(L5)),L5}var F5={},xG;function g4e(){return xG||(xG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r=1){const i=[],s=Math.floor(r),o=(a,l)=>{for(let c=0;c<a.length;c++){const u=a[c];Array.isArray(u)&&l<s?o(u,l+1):i.push(u)}};return o(n,0),i}t.flatten=e})(F5)),F5}var $5={},vG;function eae(){return vG||(vG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Xoe(),n=a6(),r=Voe(),i=Goe();function s(o,a,l){return r.isObject(l)&&(typeof a=="number"&&n.isArrayLike(l)&&e.isIndex(a)&&a<l.length||typeof a=="string"&&a in l)?i.eq(l[a],o):!1}t.isIterateeCall=s})($5)),$5}var bG;function y4e(){return bG||(bG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=m4e(),n=g4e(),r=eae();function i(s,...o){const a=o.length;return a>1&&r.isIterateeCall(s,o[0],o[1])?o=[]:a>2&&r.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),e.orderBy(s,n.flatten(o),["asc"])}t.sortBy=i})(D5)),D5}var z5,wG;function x4e(){return wG||(wG=1,z5=y4e().sortBy),z5}var v4e=x4e();const O2=us(v4e);var tae=t=>t.legend.settings,b4e=t=>t.legend.size,w4e=t=>t.legend.payload;Me([w4e,tae],(t,e)=>{var{itemSorter:n}=e,r=t.flat(1);return n?O2(r,n):r});var cA=1;function E4e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=T.useState({height:0,left:0,top:0,width:0}),r=T.useCallback(i=>{if(i!=null){var s=i.getBoundingClientRect(),o={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(o.height-e.height)>cA||Math.abs(o.left-e.left)>cA||Math.abs(o.top-e.top)>cA||Math.abs(o.width-e.width)>cA)&&n({height:o.height,left:o.left,top:o.top,width:o.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,r]}function Zi(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var S4e=typeof Symbol=="function"&&Symbol.observable||"@@observable",EG=S4e,H5=()=>Math.random().toString(36).substring(7).split("").join("."),A4e={INIT:`@@redux/INIT${H5()}`,REPLACE:`@@redux/REPLACE${H5()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${H5()}`},gk=A4e;function c6(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function nae(t,e,n){if(typeof t!="function")throw new Error(Zi(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Zi(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Zi(1));return n(nae)(t,e)}let r=t,i=e,s=new Map,o=s,a=0,l=!1;function c(){o===s&&(o=new Map,s.forEach((b,E)=>{o.set(E,b)}))}function u(){if(l)throw new Error(Zi(3));return i}function f(b){if(typeof b!="function")throw new Error(Zi(4));if(l)throw new Error(Zi(5));let E=!0;c();const C=a++;return o.set(C,b),function(){if(E){if(l)throw new Error(Zi(6));E=!1,c(),o.delete(C),s=null}}}function m(b){if(!c6(b))throw new Error(Zi(7));if(typeof b.type>"u")throw new Error(Zi(8));if(typeof b.type!="string")throw new Error(Zi(17));if(l)throw new Error(Zi(9));try{l=!0,i=r(i,b)}finally{l=!1}return(s=o).forEach(C=>{C()}),b}function g(b){if(typeof b!="function")throw new Error(Zi(10));r=b,m({type:gk.REPLACE})}function v(){const b=f;return{subscribe(E){if(typeof E!="object"||E===null)throw new Error(Zi(11));function C(){const O=E;O.next&&O.next(u())}return C(),{unsubscribe:b(C)}},[EG](){return this}}}return m({type:gk.INIT}),{dispatch:m,subscribe:f,getState:u,replaceReducer:g,[EG]:v}}function T4e(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:gk.INIT})>"u")throw new Error(Zi(12));if(typeof n(void 0,{type:gk.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Zi(13))})}function rae(t){const e=Object.keys(t),n={};for(let s=0;s<e.length;s++){const o=e[s];typeof t[o]=="function"&&(n[o]=t[o])}const r=Object.keys(n);let i;try{T4e(n)}catch(s){i=s}return function(o={},a){if(i)throw i;let l=!1;const c={};for(let u=0;u<r.length;u++){const f=r[u],m=n[f],g=o[f],v=m(g,a);if(typeof v>"u")throw a&&a.type,new Error(Zi(14));c[f]=v,l=l||v!==g}return l=l||r.length!==Object.keys(o).length,l?c:o}}function yk(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function k4e(...t){return e=>(n,r)=>{const i=e(n,r);let s=()=>{throw new Error(Zi(15))};const o={getState:i.getState,dispatch:(l,...c)=>s(l,...c)},a=t.map(l=>l(o));return s=yk(...a)(i.dispatch),{...i,dispatch:s}}}function iae(t){return c6(t)&&"type"in t&&typeof t.type=="string"}var sae=Symbol.for("immer-nothing"),SG=Symbol.for("immer-draftable"),Js=Symbol.for("immer-state");function vl(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Ko=Object,mx=Ko.getPrototypeOf,xk="constructor",M2="prototype",kM="configurable",vk="enumerable",xT="writable",Lw="value",pd=t=>!!t&&!!t[Js];function Ol(t){var e;return t?oae(t)||D2(t)||!!t[SG]||!!((e=t[xk])!=null&&e[SG])||L2(t)||j2(t):!1}var C4e=Ko[M2][xk].toString(),AG=new WeakMap;function oae(t){if(!t||!u6(t))return!1;const e=mx(t);if(e===null||e===Ko[M2])return!0;const n=Ko.hasOwnProperty.call(e,xk)&&e[xk];if(n===Object)return!0;if(!hg(n))return!1;let r=AG.get(n);return r===void 0&&(r=Function.toString.call(n),AG.set(n,r)),r===C4e}function z1(t,e,n=!0){H1(t)===0?(n?Reflect.ownKeys(t):Ko.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function H1(t){const e=t[Js];return e?e.type_:D2(t)?1:L2(t)?2:j2(t)?3:0}var TG=(t,e,n=H1(t))=>n===2?t.has(e):Ko[M2].hasOwnProperty.call(t,e),CM=(t,e,n=H1(t))=>n===2?t.get(e):t[e],bk=(t,e,n,r=H1(t))=>{r===2?t.set(e,n):r===3?t.add(n):t[e]=n};function N4e(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var D2=Array.isArray,L2=t=>t instanceof Map,j2=t=>t instanceof Set,u6=t=>typeof t=="object",hg=t=>typeof t=="function",V5=t=>typeof t=="boolean";function _4e(t){const e=+t;return Number.isInteger(e)&&String(e)===t}var Tu=t=>t.copy_||t.base_,d6=t=>t.modified_?t.copy_:t.base_;function NM(t,e){if(L2(t))return new Map(t);if(j2(t))return new Set(t);if(D2(t))return Array[M2].slice.call(t);const n=oae(t);if(e===!0||e==="class_only"&&!n){const r=Ko.getOwnPropertyDescriptors(t);delete r[Js];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a[xT]===!1&&(a[xT]=!0,a[kM]=!0),(a.get||a.set)&&(r[o]={[kM]:!0,[xT]:!0,[vk]:a[vk],[Lw]:t[o]})}return Ko.create(mx(t),r)}else{const r=mx(t);if(r!==null&&n)return{...t};const i=Ko.create(r);return Ko.assign(i,t)}}function f6(t,e=!1){return B2(t)||pd(t)||!Ol(t)||(H1(t)>1&&Ko.defineProperties(t,{set:uA,add:uA,clear:uA,delete:uA}),Ko.freeze(t),e&&z1(t,(n,r)=>{f6(r,!0)},!1)),t}function I4e(){vl(2)}var uA={[Lw]:I4e};function B2(t){return t===null||!u6(t)?!0:Ko.isFrozen(t)}var wk="MapSet",_M="Patches",kG="ArrayMethods",aae={};function vm(t){const e=aae[t];return e||vl(0,t),e}var CG=t=>!!aae[t],jw,lae=()=>jw,P4e=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:CG(wk)?vm(wk):void 0,arrayMethodsPlugin_:CG(kG)?vm(kG):void 0});function NG(t,e){e&&(t.patchPlugin_=vm(_M),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function IM(t){PM(t),t.drafts_.forEach(R4e),t.drafts_=null}function PM(t){t===jw&&(jw=t.parent_)}var _G=t=>jw=P4e(jw,t);function R4e(t){const e=t[Js];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function IG(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];if(t!==void 0&&t!==n){n[Js].modified_&&(IM(e),vl(4)),Ol(t)&&(t=PG(e,t));const{patchPlugin_:i}=e;i&&i.generateReplacementPatches_(n[Js].base_,t,e)}else t=PG(e,n);return O4e(e,t,!0),IM(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==sae?t:void 0}function PG(t,e){if(B2(e))return e;const n=e[Js];if(!n)return h6(e,t.handledSet_,t);if(!U2(n,t))return e;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(t);dae(n,t)}return n.copy_}function O4e(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&f6(e,n)}function cae(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var U2=(t,e)=>t.scope_===e,M4e=[];function uae(t,e,n,r){const i=Tu(t),s=t.type_;if(r!==void 0&&CM(i,r,s)===e){bk(i,r,n,s);return}if(!t.draftLocations_){const a=t.draftLocations_=new Map;z1(i,(l,c)=>{if(pd(c)){const u=a.get(c)||[];u.push(l),a.set(c,u)}})}const o=t.draftLocations_.get(e)??M4e;for(const a of o)bk(i,a,n,s)}function D4e(t,e,n){t.callbacks_.push(function(i){var a;const s=e;if(!s||!U2(s,i))return;(a=i.mapSetPlugin_)==null||a.fixSetContents(s);const o=d6(s);uae(t,s.draft_??s,o,n),dae(s,i)})}function dae(t,e){var r;if(t.modified_&&!t.finalized_&&(t.type_===3||t.type_===1&&t.allIndicesReassigned_||(((r=t.assigned_)==null?void 0:r.size)??0)>0)){const{patchPlugin_:i}=e;if(i){const s=i.getPath(t);s&&i.generatePatches_(t,s,e)}cae(t)}}function L4e(t,e,n){const{scope_:r}=t;if(pd(n)){const i=n[Js];U2(i,r)&&i.callbacks_.push(function(){vT(t);const o=d6(i);uae(t,n,o,e)})}else Ol(n)&&t.callbacks_.push(function(){const s=Tu(t);CM(s,e,t.type_)===n&&r.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&h6(CM(t.copy_,e,t.type_),r.handledSet_,r)})}function h6(t,e,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||pd(t)||e.has(t)||!Ol(t)||B2(t)||(e.add(t),z1(t,(r,i)=>{if(pd(i)){const s=i[Js];if(U2(s,n)){const o=d6(s);bk(t,r,o,t.type_),cae(s)}}else Ol(i)&&h6(i,e,n)})),t}function j4e(t,e){const n=D2(t),r={type_:n?1:0,scope_:e?e.scope_:lae(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=r,s=p6;n&&(i=[r],s=Bw);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,[a,r]}var p6={get(t,e){if(e===Js)return t;let n=t.scope_.arrayMethodsPlugin_;const r=t.type_===1&&typeof e=="string";if(r&&n!=null&&n.isArrayOperationMethod(e))return n.createMethodInterceptor(t,e);const i=Tu(t);if(!TG(i,e,t.type_))return B4e(t,i,e);const s=i[e];if(t.finalized_||!Ol(s)||r&&t.operationMethod&&(n!=null&&n.isMutatingArrayMethod(t.operationMethod))&&_4e(e))return s;if(s===q5(t.base_,e)){vT(t);const o=t.type_===1?+e:e,a=OM(t.scope_,s,t,o);return t.copy_[o]=a}return s},has(t,e){return e in Tu(t)},ownKeys(t){return Reflect.ownKeys(Tu(t))},set(t,e,n){const r=fae(Tu(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=q5(Tu(t),e),s=i==null?void 0:i[Js];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_.set(e,!1),!0;if(N4e(n,i)&&(n!==void 0||TG(t.base_,e,t.type_)))return!0;vT(t),RM(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_.set(e,!0),L4e(t,e,n)),!0},deleteProperty(t,e){return vT(t),q5(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),RM(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Tu(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{[xT]:!0,[kM]:t.type_!==1||e!=="length",[vk]:r[vk],[Lw]:n[e]}},defineProperty(){vl(11)},getPrototypeOf(t){return mx(t.base_)},setPrototypeOf(){vl(12)}},Bw={};z1(p6,(t,e)=>{Bw[t]=function(){const n=arguments;return n[0]=n[0][0],e.apply(this,n)}});Bw.deleteProperty=function(t,e){return Bw.set.call(this,t,e,void 0)};Bw.set=function(t,e,n){return p6.set.call(this,t[0],e,n,t[0])};function q5(t,e){const n=t[Js];return(n?Tu(n):t)[e]}function B4e(t,e,n){var i;const r=fae(e,n);return r?Lw in r?r[Lw]:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function fae(t,e){if(!(e in t))return;let n=mx(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=mx(n)}}function RM(t){t.modified_||(t.modified_=!0,t.parent_&&RM(t.parent_))}function vT(t){t.copy_||(t.assigned_=new Map,t.copy_=NM(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var U4e=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,r,i)=>{if(hg(n)&&!hg(r)){const o=r;r=n;const a=this;return function(c=o,...u){return a.produce(c,f=>r.call(this,f,...u))}}hg(r)||vl(6),i!==void 0&&!hg(i)&&vl(7);let s;if(Ol(n)){const o=_G(this),a=OM(o,n,void 0);let l=!0;try{s=r(a),l=!1}finally{l?IM(o):PM(o)}return NG(o,i),IG(s,o)}else if(!n||!u6(n)){if(s=r(n),s===void 0&&(s=n),s===sae&&(s=void 0),this.autoFreeze_&&f6(s,!0),i){const o=[],a=[];vm(_M).generateReplacementPatches_(n,s,{patches_:o,inversePatches_:a}),i(o,a)}return s}else vl(1,n)},this.produceWithPatches=(n,r)=>{if(hg(n))return(a,...l)=>this.produceWithPatches(a,c=>n(c,...l));let i,s;return[this.produce(n,r,(a,l)=>{i=a,s=l}),i,s]},V5(e==null?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),V5(e==null?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),V5(e==null?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Ol(e)||vl(8),pd(e)&&(e=Tl(e));const n=_G(this),r=OM(n,e,void 0);return r[Js].isManual_=!0,PM(n),r}finishDraft(e,n){const r=e&&e[Js];(!r||!r.isManual_)&&vl(9);const{scope_:i}=r;return NG(i,n),IG(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,n){let r;for(r=n.length-1;r>=0;r--){const s=n[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(n=n.slice(r+1));const i=vm(_M).applyPatches_;return pd(e)?i(e,n):this.produce(e,s=>i(s,n))}};function OM(t,e,n,r){const[i,s]=L2(e)?vm(wk).proxyMap_(e,n):j2(e)?vm(wk).proxySet_(e,n):j4e(e,n);return((n==null?void 0:n.scope_)??lae()).drafts_.push(i),s.callbacks_=(n==null?void 0:n.callbacks_)??[],s.key_=r,n&&r!==void 0?D4e(n,s,r):s.callbacks_.push(function(l){var u;(u=l.mapSetPlugin_)==null||u.fixSetContents(s);const{patchPlugin_:c}=l;s.modified_&&c&&c.generatePatches_(s,[],l)}),i}function Tl(t){return pd(t)||vl(10,t),hae(t)}function hae(t){if(!Ol(t)||B2(t))return t;const e=t[Js];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=NM(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=NM(t,!0);return z1(n,(i,s)=>{bk(n,i,hae(s))},r),e&&(e.finalized_=!1),n}var F4e=new U4e,pae=F4e.produce;function mae(t){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,t):i(s)}var $4e=mae(),z4e=mae,H4e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?yk:yk.apply(null,arguments)};function Va(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(Yo(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>iae(r)&&r.type===t,n}var gae=class Ub extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Ub.prototype)}static get[Symbol.species](){return Ub}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Ub(...e[0].concat(this)):new Ub(...e.concat(this))}};function RG(t){return Ol(t)?pae(t,()=>{}):t}function dA(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function V4e(t){return typeof t=="boolean"}var q4e=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=e??{};let o=new gae;return n&&(V4e(n)?o.push($4e):o.push(z4e(n.extraArgument))),o},yae="RTK_autoBatch",Tr=()=>t=>({payload:t,meta:{[yae]:!0}}),OG=t=>e=>{setTimeout(e,t)},xae=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,s=!1,o=!1;const a=new Set,l=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:OG(10):t.type==="callback"?t.queueNotification:OG(t.timeout),c=()=>{o=!1,s&&(s=!1,a.forEach(u=>u()))};return Object.assign({},r,{subscribe(u){const f=()=>i&&u(),m=r.subscribe(f);return a.add(u),()=>{m(),a.delete(u)}},dispatch(u){var f;try{return i=!((f=u==null?void 0:u.meta)!=null&&f[yae]),s=!i,s&&(o||(o=!0,l(c))),r.dispatch(u)}finally{i=!0}}})},G4e=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new gae(t);return r&&i.push(xae(typeof r=="object"?r:void 0)),i};function K4e(t){const e=q4e(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=t||{};let a;if(typeof n=="function")a=n;else if(c6(n))a=rae(n);else throw new Error(Yo(1));let l;typeof r=="function"?l=r(e):l=e();let c=yk;i&&(c=H4e({trace:!1,...typeof i=="object"&&i}));const u=k4e(...l),f=G4e(u);let m=typeof o=="function"?o(f):f();const g=c(...m);return nae(a,s,g)}function vae(t){const e={},n=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(Yo(28));if(a in e)throw new Error(Yo(29));return e[a]=o,i},addAsyncThunk(s,o){return o.pending&&(e[s.pending.type]=o.pending),o.rejected&&(e[s.rejected.type]=o.rejected),o.fulfilled&&(e[s.fulfilled.type]=o.fulfilled),o.settled&&n.push({matcher:s.settled,reducer:o.settled}),i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return t(i),[e,n,r]}function W4e(t){return typeof t=="function"}function Y4e(t,e){let[n,r,i]=vae(e),s;if(W4e(t))s=()=>RG(t());else{const a=RG(t);s=()=>a}function o(a=s(),l){let c=[n[l.type],...r.filter(({matcher:u})=>u(l)).map(({reducer:u})=>u)];return c.filter(u=>!!u).length===0&&(c=[i]),c.reduce((u,f)=>{if(f)if(pd(u)){const g=f(u,l);return g===void 0?u:g}else{if(Ol(u))return pae(u,m=>f(m,l));{const m=f(u,l);if(m===void 0){if(u===null)return u;throw Error("A case reducer on a non-draftable value must not return undefined")}return m}}return u},a)}return o.getInitialState=s,o}var J4e="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",X4e=(t=21)=>{let e="",n=t;for(;n--;)e+=J4e[Math.random()*64|0];return e},Q4e=Symbol.for("rtk-slice-createasyncthunk");function Z4e(t,e){return`${t}/${e}`}function eMe({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[Q4e];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(Yo(11));const a=(typeof i.reducers=="function"?i.reducers(nMe()):i.reducers)||{},l=Object.keys(a),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(O,U){const R=typeof O=="string"?O:O.type;if(!R)throw new Error(Yo(12));if(R in c.sliceCaseReducersByType)throw new Error(Yo(13));return c.sliceCaseReducersByType[R]=U,u},addMatcher(O,U){return c.sliceMatchers.push({matcher:O,reducer:U}),u},exposeAction(O,U){return c.actionCreators[O]=U,u},exposeCaseReducer(O,U){return c.sliceCaseReducersByName[O]=U,u}};l.forEach(O=>{const U=a[O],R={reducerName:O,type:Z4e(s,O),createNotation:typeof i.reducers=="function"};iMe(U)?oMe(R,U,u,e):rMe(R,U,u)});function f(){const[O={},U=[],R=void 0]=typeof i.extraReducers=="function"?vae(i.extraReducers):[i.extraReducers],$={...O,...c.sliceCaseReducersByType};return Y4e(i.initialState,V=>{for(let j in $)V.addCase(j,$[j]);for(let j of c.sliceMatchers)V.addMatcher(j.matcher,j.reducer);for(let j of U)V.addMatcher(j.matcher,j.reducer);R&&V.addDefaultCase(R)})}const m=O=>O,g=new Map,v=new WeakMap;let x;function b(O,U){return x||(x=f()),x(O,U)}function E(){return x||(x=f()),x.getInitialState()}function C(O,U=!1){function R(V){let j=V[O];return typeof j>"u"&&U&&(j=dA(v,R,E)),j}function $(V=m){const j=dA(g,U,()=>new WeakMap);return dA(j,V,()=>{const F={};for(const[W,H]of Object.entries(i.selectors??{}))F[W]=tMe(H,V,()=>dA(v,V,E),U);return F})}return{reducerPath:O,getSelectors:$,get selectors(){return $(R)},selectSlice:R}}const k={name:s,reducer:b,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:E,...C(o),injectInto(O,{reducerPath:U,...R}={}){const $=U??o;return O.inject({reducerPath:$,reducer:b},R),{...k,...C($,!0)}}};return k}}function tMe(t,e,n,r){function i(s,...o){let a=e(s);return typeof a>"u"&&r&&(a=n()),t(a,...o)}return i.unwrapped=t,i}var vo=eMe();function nMe(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function rMe({type:t,reducerName:e,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!sMe(r))throw new Error(Yo(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(t,s).exposeCaseReducer(e,s).exposeAction(e,o?Va(t,o):Va(t))}function iMe(t){return t._reducerDefinitionType==="asyncThunk"}function sMe(t){return t._reducerDefinitionType==="reducerWithPrepare"}function oMe({type:t,reducerName:e},n,r,i){if(!i)throw new Error(Yo(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:l,settled:c,options:u}=n,f=i(t,s,u);r.exposeAction(e,f),o&&r.addCase(f.fulfilled,o),a&&r.addCase(f.pending,a),l&&r.addCase(f.rejected,l),c&&r.addMatcher(f.settled,c),r.exposeCaseReducer(e,{fulfilled:o||fA,pending:a||fA,rejected:l||fA,settled:c||fA})}function fA(){}var aMe="task",bae="listener",wae="completed",m6="cancelled",lMe=`task-${m6}`,cMe=`task-${wae}`,MM=`${bae}-${m6}`,uMe=`${bae}-${wae}`,F2=class{constructor(t){Se(this,"name","TaskAbortError");Se(this,"message");this.code=t,this.message=`${aMe} ${m6} (reason: ${t})`}},g6=(t,e)=>{if(typeof t!="function")throw new TypeError(Yo(32))},Ek=()=>{},Eae=(t,e=Ek)=>(t.catch(e),t),Sae=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),tm=t=>{if(t.aborted)throw new F2(t.reason)};function Aae(t,e){let n=Ek;return new Promise((r,i)=>{const s=()=>i(new F2(t.reason));if(t.aborted){s();return}n=Sae(t,s),e.finally(()=>n()).then(r,i)}).finally(()=>{n=Ek})}var dMe=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof F2?"cancelled":"rejected",error:n}}finally{e==null||e()}},Sk=t=>e=>Eae(Aae(t,e).then(n=>(tm(t),n))),Tae=t=>{const e=Sk(t);return n=>e(new Promise(r=>setTimeout(r,n)))},{assign:Jg}=Object,MG={},$2="listenerMiddleware",fMe=(t,e)=>{const n=r=>Sae(t,()=>r.abort(t.reason));return(r,i)=>{g6(r);const s=new AbortController;n(s);const o=dMe(async()=>{tm(t),tm(s.signal);const a=await r({pause:Sk(s.signal),delay:Tae(s.signal),signal:s.signal});return tm(s.signal),a},()=>s.abort(cMe));return i!=null&&i.autoJoin&&e.push(o.catch(Ek)),{result:Sk(t)(o),cancel(){s.abort(lMe)}}}},hMe=(t,e)=>{const n=async(r,i)=>{tm(e);let s=()=>{};const a=[new Promise((l,c)=>{let u=t({predicate:r,effect:(f,m)=>{m.unsubscribe(),l([f,m.getState(),m.getOriginalState()])}});s=()=>{u(),c()}})];i!=null&&a.push(new Promise(l=>setTimeout(l,i,null)));try{const l=await Aae(e,Promise.race(a));return tm(e),l}finally{s()}};return(r,i)=>Eae(n(r,i))},kae=t=>{let{type:e,actionCreator:n,matcher:r,predicate:i,effect:s}=t;if(e)i=Va(e).match;else if(n)e=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(Yo(21));return g6(s),{predicate:i,type:e,effect:s}},Cae=Jg(t=>{const{type:e,predicate:n,effect:r}=kae(t);return{id:X4e(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Yo(22))}}},{withTypes:()=>Cae}),DG=(t,e)=>{const{type:n,effect:r,predicate:i}=kae(e);return Array.from(t.values()).find(s=>(typeof n=="string"?s.type===n:s.predicate===i)&&s.effect===r)},DM=t=>{t.pending.forEach(e=>{e.abort(MM)})},pMe=(t,e)=>()=>{for(const n of e.keys())DM(n);t.clear()},LG=(t,e,n)=>{try{t(e,n)}catch(r){setTimeout(()=>{throw r},0)}},Nae=Jg(Va(`${$2}/add`),{withTypes:()=>Nae}),mMe=Va(`${$2}/removeAll`),_ae=Jg(Va(`${$2}/remove`),{withTypes:()=>_ae}),gMe=(...t)=>{console.error(`${$2}/error`,...t)},V1=(t={})=>{const e=new Map,n=new Map,r=g=>{const v=n.get(g)??0;n.set(g,v+1)},i=g=>{const v=n.get(g)??1;v===1?n.delete(g):n.set(g,v-1)},{extra:s,onError:o=gMe}=t;g6(o);const a=g=>(g.unsubscribe=()=>e.delete(g.id),e.set(g.id,g),v=>{g.unsubscribe(),v!=null&&v.cancelActive&&DM(g)}),l=g=>{const v=DG(e,g)??Cae(g);return a(v)};Jg(l,{withTypes:()=>l});const c=g=>{const v=DG(e,g);return v&&(v.unsubscribe(),g.cancelActive&&DM(v)),!!v};Jg(c,{withTypes:()=>c});const u=async(g,v,x,b)=>{const E=new AbortController,C=hMe(l,E.signal),k=[];try{g.pending.add(E),r(g),await Promise.resolve(g.effect(v,Jg({},x,{getOriginalState:b,condition:(O,U)=>C(O,U).then(Boolean),take:C,delay:Tae(E.signal),pause:Sk(E.signal),extra:s,signal:E.signal,fork:fMe(E.signal,k),unsubscribe:g.unsubscribe,subscribe:()=>{e.set(g.id,g)},cancelActiveListeners:()=>{g.pending.forEach((O,U,R)=>{O!==E&&(O.abort(MM),R.delete(O))})},cancel:()=>{E.abort(MM),g.pending.delete(E)},throwIfCancelled:()=>{tm(E.signal)}})))}catch(O){O instanceof F2||LG(o,O,{raisedBy:"effect"})}finally{await Promise.all(k),E.abort(uMe),i(g),g.pending.delete(E)}},f=pMe(e,n);return{middleware:g=>v=>x=>{if(!iae(x))return v(x);if(Nae.match(x))return l(x.payload);if(mMe.match(x)){f();return}if(_ae.match(x))return c(x.payload);let b=g.getState();const E=()=>{if(b===MG)throw new Error(Yo(23));return b};let C;try{if(C=v(x),e.size>0){const k=g.getState(),O=Array.from(e.values());for(const U of O){let R=!1;try{R=U.predicate(x,k,b)}catch($){R=!1,LG(o,$,{raisedBy:"predicate"})}R&&u(U,x,g,E)}}}finally{b=MG}return C},startListening:l,stopListening:c,clearListeners:f}};function Yo(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var yMe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},Iae=vo({name:"chartLayout",initialState:yMe,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var n,r,i,s;t.margin.top=(n=e.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(r=e.payload.right)!==null&&r!==void 0?r:0,t.margin.bottom=(i=e.payload.bottom)!==null&&i!==void 0?i:0,t.margin.left=(s=e.payload.left)!==null&&s!==void 0?s:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:xMe,setLayout:vMe,setChartSize:bMe,setScale:wMe}=Iae.actions,EMe=Iae.reducer;function Pae(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function cr(t){return Number.isFinite(t)}function Mc(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function jG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Cg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jG(Object(n),!0).forEach(function(r){SMe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function SMe(t,e,n){return(e=AMe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function AMe(t){var e=TMe(t,"string");return typeof e=="symbol"?e:e+""}function TMe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Wn(t,e,n){return Er(t)||Er(e)?n:Oc(e)?xm(t,e,n):typeof e=="function"?e(t):n}var kMe=(t,e,n)=>{if(e&&n){var{width:r,height:i}=n,{align:s,verticalAlign:o,layout:a}=e;if((a==="vertical"||a==="horizontal"&&o==="middle")&&s!=="center"&&wt(t[s]))return Cg(Cg({},t),{},{[s]:t[s]+(r||0)});if((a==="horizontal"||a==="vertical"&&s==="center")&&o!=="middle"&&wt(t[o]))return Cg(Cg({},t),{},{[o]:t[o]+(i||0)})}return t},Fc=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",Rae=(t,e,n,r)=>{if(r)return t.map(a=>a.coordinate);var i,s,o=t.map(a=>(a.coordinate===e&&(i=!0),a.coordinate===n&&(s=!0),a.coordinate));return i||o.push(e),s||o.push(n),o},Oae=(t,e,n)=>{if(!t)return null;var{duplicateDomain:r,type:i,range:s,scale:o,realScaleType:a,isCategorical:l,categoricalDomain:c,tickCount:u,ticks:f,niceTicks:m,axisType:g}=t;if(!o)return null;var v=a==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,x=i==="category"&&o.bandwidth?o.bandwidth()/v:0;if(x=g==="angleAxis"&&s&&s.length>=2?Ui(s[0]-s[1])*2*x:x,f||m){var b=(f||m||[]).map((E,C)=>{var k=r?r.indexOf(E):E;return{coordinate:o(k)+x,value:E,offset:x,index:C}});return b.filter(E=>!Ha(E.coordinate))}return l&&c?c.map((E,C)=>({coordinate:o(E)+x,value:E,index:C,offset:x})):o.ticks&&u!=null?o.ticks(u).map((E,C)=>({coordinate:o(E)+x,value:E,offset:x,index:C})):o.domain().map((E,C)=>({coordinate:o(E)+x,value:r?r[E]:E,index:C,offset:x}))},BG=1e-4,CMe=t=>{var e=t.domain();if(!(!e||e.length<=2)){var n=e.length,r=t.range(),i=Math.min(r[0],r[1])-BG,s=Math.max(r[0],r[1])+BG,o=t(e[0]),a=t(e[n-1]);(o<i||o>s||a<i||a>s)&&t.domain([e[0],e[n-1]])}},NMe=(t,e)=>{if(!e||e.length!==2||!wt(e[0])||!wt(e[1]))return t;var n=Math.min(e[0],e[1]),r=Math.max(e[0],e[1]),i=[t[0],t[1]];return(!wt(t[0])||t[0]<n)&&(i[0]=n),(!wt(t[1])||t[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},_Me=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var s=0,o=0,a=0;a<n;++a){var l=t[a],c=l==null?void 0:l[i];if(c!=null){var u=c[1],f=c[0],m=Ha(u)?f:u;m>=0?(c[0]=s,c[1]=s+m,s=u):(c[0]=o,c[1]=o+m,o=u)}}}},IMe=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var s=0,o=0;o<n;++o){var a=t[o],l=a==null?void 0:a[i];if(l!=null){var c=Ha(l[1])?l[0]:l[1];c>=0?(l[0]=s,l[1]=s+c,s=l[1]):(l[0]=0,l[1]=0)}}}},PMe={sign:_Me,expand:i3e,none:ym,silhouette:s3e,wiggle:o3e,positive:IMe},RMe=(t,e,n)=>{var r,i=(r=PMe[n])!==null&&r!==void 0?r:ym,s=r3e().keys(e).value((a,l)=>Number(Wn(a,l,0))).order(AM).offset(i),o=s(t);return o.forEach((a,l)=>{a.forEach((c,u)=>{var f=Wn(t[u],e[l],0);Array.isArray(f)&&f.length===2&&wt(f[0])&&wt(f[1])&&(c[0]=f[0],c[1]=f[1])})}),o};function Mae(t){return t==null?void 0:String(t)}function Ak(t){var{axis:e,ticks:n,bandSize:r,entry:i,index:s,dataKey:o}=t;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Er(i[e.dataKey])){var a=Uoe(n,"value",i[e.dataKey]);if(a)return a.coordinate+r/2}return n[s]?n[s].coordinate+r/2:null}var l=Wn(i,Er(o)?e.dataKey:o);return Er(l)?null:e.scale(l)}var UG=t=>{var{axis:e,ticks:n,offset:r,bandSize:i,entry:s,index:o}=t;if(e.type==="category")return n[o]?n[o].coordinate+r:null;var a=Wn(s,e.dataKey,e.scale.domain()[o]);return Er(a)?null:e.scale(a)-i/2+r},OMe=t=>{var{numericAxis:e}=t,n=e.scale.domain();if(e.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},MMe=t=>{var e=t.flat(2).filter(wt);return[Math.min(...e),Math.max(...e)]},DMe=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],LMe=(t,e,n)=>{if(t!=null)return DMe(Object.keys(t).reduce((r,i)=>{var s=t[i];if(!s)return r;var{stackedData:o}=s,a=o.reduce((l,c)=>{var u=Pae(c,e,n),f=MMe(u);return!cr(f[0])||!cr(f[1])?l:[Math.min(l[0],f[0]),Math.max(l[1],f[1])]},[1/0,-1/0]);return[Math.min(a[0],r[0]),Math.max(a[1],r[1])]},[1/0,-1/0]))},FG=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,$G=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,lh=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();if(!n||r>0)return r}if(t&&e&&e.length>=2){for(var i=O2(e,u=>u.coordinate),s=1/0,o=1,a=i.length;o<a;o++){var l=i[o],c=i[o-1];s=Math.min(((l==null?void 0:l.coordinate)||0)-((c==null?void 0:c.coordinate)||0),s)}return s===1/0?0:s}return n?void 0:0};function zG(t){var{tooltipEntrySettings:e,dataKey:n,payload:r,value:i,name:s}=t;return Cg(Cg({},e),{},{dataKey:n,payload:r,value:i,name:s})}function yh(t,e){if(t)return String(t);if(typeof e=="string")return e}var jMe=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},BMe=(t,e)=>e==="centric"?t.angle:t.radius,Td=t=>t.layout.width,kd=t=>t.layout.height,UMe=t=>t.layout.scale,Dae=t=>t.layout.margin,z2=Me(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),H2=Me(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),Lae="data-recharts-item-index",jae="data-recharts-item-id",q1=60;function HG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HG(Object(n),!0).forEach(function(r){FMe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function FMe(t,e,n){return(e=$Me(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $Me(t){var e=zMe(t,"string");return typeof e=="symbol"?e:e+""}function zMe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var HMe=t=>t.brush.height;function VMe(t){var e=H2(t);return e.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:q1;return n+i}return n},0)}function qMe(t){var e=H2(t);return e.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:q1;return n+i}return n},0)}function GMe(t){var e=z2(t);return e.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function KMe(t){var e=z2(t);return e.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var Si=Me([Td,kd,Dae,HMe,VMe,qMe,GMe,KMe,tae,b4e],(t,e,n,r,i,s,o,a,l,c)=>{var u={left:(n.left||0)+i,right:(n.right||0)+s},f={top:(n.top||0)+o,bottom:(n.bottom||0)+a},m=hA(hA({},f),u),g=m.bottom;m.bottom+=r,m=kMe(m,l,c);var v=t-m.left-m.right,x=e-m.top-m.bottom;return hA(hA({brushBottom:g},m),{},{width:Math.max(v,0),height:Math.max(x,0)})}),WMe=Me(Si,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),y6=Me(Td,kd,(t,e)=>({x:0,y:0,width:t,height:e})),YMe=T.createContext(null),$i=()=>T.useContext(YMe)!=null,V2=t=>t.brush,q2=Me([V2,Si,Dae],(t,e,n)=>({height:t.height,x:wt(t.x)?t.x:e.left,y:wt(t.y)?t.y:e.top+e.height+e.brushBottom-((n==null?void 0:n.bottom)||0),width:wt(t.width)?t.width:e.width})),G5={},K5={},W5={},VG;function JMe(){return VG||(VG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r,{signal:i,edges:s}={}){let o,a=null;const l=s!=null&&s.includes("leading"),c=s==null||s.includes("trailing"),u=()=>{a!==null&&(n.apply(o,a),o=void 0,a=null)},f=()=>{c&&u(),x()};let m=null;const g=()=>{m!=null&&clearTimeout(m),m=setTimeout(()=>{m=null,f()},r)},v=()=>{m!==null&&(clearTimeout(m),m=null)},x=()=>{v(),o=void 0,a=null},b=()=>{u()},E=function(...C){if(i!=null&&i.aborted)return;o=this,a=C;const k=m==null;g(),l&&k&&u()};return E.schedule=g,E.cancel=x,E.flush=b,i==null||i.addEventListener("abort",x,{once:!0}),E}t.debounce=e})(W5)),W5}var qG;function XMe(){return qG||(qG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=JMe();function n(r,i=0,s={}){typeof s!="object"&&(s={});const{leading:o=!1,trailing:a=!0,maxWait:l}=s,c=Array(2);o&&(c[0]="leading"),a&&(c[1]="trailing");let u,f=null;const m=e.debounce(function(...x){u=r.apply(this,x),f=null},i,{edges:c}),g=function(...x){return l!=null&&(f===null&&(f=Date.now()),Date.now()-f>=l)?(u=r.apply(this,x),f=Date.now(),m.cancel(),m.schedule(),u):(m.apply(this,x),u)},v=()=>(m.flush(),u);return g.cancel=m.cancel,g.flush=v,g}t.debounce=n})(K5)),K5}var GG;function QMe(){return GG||(GG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=XMe();function n(r,i=0,s={}){const{leading:o=!0,trailing:a=!0}=s;return e.debounce(r,i,{leading:o,maxWait:i,trailing:a})}t.throttle=n})(G5)),G5}var Y5,KG;function ZMe(){return KG||(KG=1,Y5=QMe().throttle),Y5}var eDe=ZMe();const tDe=us(eDe);var Tk=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var o=0;console.warn(n.replace(/%s/g,()=>i[o++]))}},Bae=(t,e,n)=>{var{width:r="100%",height:i="100%",aspect:s,maxHeight:o}=n,a=hd(r)?t:Number(r),l=hd(i)?e:Number(i);return s&&s>0&&(a?l=a/s:l&&(a=l*s),o&&l!=null&&l>o&&(l=o)),{calculatedWidth:a,calculatedHeight:l}},nDe={width:0,height:0,overflow:"visible"},rDe={width:0,overflowX:"visible"},iDe={height:0,overflowY:"visible"},sDe={},oDe=t=>{var{width:e,height:n}=t,r=hd(e),i=hd(n);return r&&i?nDe:r?rDe:i?iDe:sDe};function aDe(t){var{width:e,height:n,aspect:r}=t,i=e,s=n;return i===void 0&&s===void 0?(i="100%",s="100%"):i===void 0?i=r&&r>0?void 0:"100%":s===void 0&&(s=r&&r>0?void 0:"100%"),{width:i,height:s}}function LM(){return LM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},LM.apply(null,arguments)}function WG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function YG(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WG(Object(n),!0).forEach(function(r){lDe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lDe(t,e,n){return(e=cDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cDe(t){var e=uDe(t,"string");return typeof e=="symbol"?e:e+""}function uDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Uae=T.createContext({width:-1,height:-1});function dDe(t){return Mc(t.width)&&Mc(t.height)}function Fae(t){var{children:e,width:n,height:r}=t,i=T.useMemo(()=>({width:n,height:r}),[n,r]);return dDe(i)?T.createElement(Uae.Provider,{value:i},e):null}var x6=()=>T.useContext(Uae),fDe=T.forwardRef((t,e)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i,height:s,minWidth:o=0,minHeight:a,maxHeight:l,children:c,debounce:u=0,id:f,className:m,onResize:g,style:v={}}=t,x=T.useRef(null),b=T.useRef();b.current=g,T.useImperativeHandle(e,()=>x.current);var[E,C]=T.useState({containerWidth:r.width,containerHeight:r.height}),k=T.useCallback((V,j)=>{C(F=>{var W=Math.round(V),H=Math.round(j);return F.containerWidth===W&&F.containerHeight===H?F:{containerWidth:W,containerHeight:H}})},[]);T.useEffect(()=>{if(x.current==null||typeof ResizeObserver>"u")return $1;var V=H=>{var B,{width:A,height:I}=H[0].contentRect;k(A,I),(B=b.current)===null||B===void 0||B.call(b,A,I)};u>0&&(V=tDe(V,u,{trailing:!0,leading:!1}));var j=new ResizeObserver(V),{width:F,height:W}=x.current.getBoundingClientRect();return k(F,W),j.observe(x.current),()=>{j.disconnect()}},[k,u]);var{containerWidth:O,containerHeight:U}=E;Tk(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:R,calculatedHeight:$}=Bae(O,U,{width:i,height:s,aspect:n,maxHeight:l});return Tk(R!=null&&R>0||$!=null&&$>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,R,$,i,s,o,a,n),T.createElement("div",{id:f?"".concat(f):void 0,className:Rn("recharts-responsive-container",m),style:YG(YG({},v),{},{width:i,height:s,minWidth:o,minHeight:a,maxHeight:l}),ref:x},T.createElement("div",{style:oDe({width:i,height:s})},T.createElement(Fae,{width:R,height:$},c)))}),Uw=T.forwardRef((t,e)=>{var n=x6();if(Mc(n.width)&&Mc(n.height))return t.children;var{width:r,height:i}=aDe({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:s,calculatedHeight:o}=Bae(void 0,void 0,{width:r,height:i,aspect:t.aspect,maxHeight:t.maxHeight});return wt(s)&&wt(o)?T.createElement(Fae,{width:s,height:o},t.children):T.createElement(fDe,LM({},t,{width:r,height:i,ref:e}))});function $ae(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var G2=()=>{var t,e=$i(),n=Pt(WMe),r=Pt(q2),i=(t=Pt(V2))===null||t===void 0?void 0:t.padding;return!e||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},hDe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},zae=()=>{var t;return(t=Pt(Si))!==null&&t!==void 0?t:hDe},Hae=()=>Pt(Td),Vae=()=>Pt(kd),An=t=>t.layout.layoutType,xh=()=>Pt(An),pDe=()=>{var t=xh();if(t==="horizontal"||t==="vertical")return t},mDe=()=>{var t=xh();return t!==void 0},K2=t=>{var e=_r(),n=$i(),{width:r,height:i}=t,s=x6(),o=r,a=i;return s&&(o=s.width>0?s.width:r,a=s.height>0?s.height:i),T.useEffect(()=>{!n&&Mc(o)&&Mc(a)&&e(bMe({width:o,height:a}))},[e,n,o,a]),null},qae=Symbol.for("immer-nothing"),JG=Symbol.for("immer-draftable"),Qo=Symbol.for("immer-state");function bl(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Fw=Object.getPrototypeOf;function gx(t){return!!t&&!!t[Qo]}function bm(t){var e;return t?Gae(t)||Array.isArray(t)||!!t[JG]||!!((e=t.constructor)!=null&&e[JG])||G1(t)||Y2(t):!1}var gDe=Object.prototype.constructor.toString(),XG=new WeakMap;function Gae(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let r=XG.get(n);return r===void 0&&(r=Function.toString.call(n),XG.set(n,r)),r===gDe}function kk(t,e,n=!0){W2(t)===0?(n?Reflect.ownKeys(t):Object.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function W2(t){const e=t[Qo];return e?e.type_:Array.isArray(t)?1:G1(t)?2:Y2(t)?3:0}function jM(t,e){return W2(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function Kae(t,e,n){const r=W2(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function yDe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function G1(t){return t instanceof Map}function Y2(t){return t instanceof Set}function rp(t){return t.copy_||t.base_}function BM(t,e){if(G1(t))return new Map(t);if(Y2(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=Gae(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[Qo];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:t[o]})}return Object.create(Fw(t),r)}else{const r=Fw(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function v6(t,e=!1){return J2(t)||gx(t)||!bm(t)||(W2(t)>1&&Object.defineProperties(t,{set:pA,add:pA,clear:pA,delete:pA}),Object.freeze(t),e&&Object.values(t).forEach(n=>v6(n,!0))),t}function xDe(){bl(2)}var pA={value:xDe};function J2(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var vDe={};function wm(t){const e=vDe[t];return e||bl(0,t),e}var $w;function Wae(){return $w}function bDe(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function QG(t,e){e&&(wm("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function UM(t){FM(t),t.drafts_.forEach(wDe),t.drafts_=null}function FM(t){t===$w&&($w=t.parent_)}function ZG(t){return $w=bDe($w,t)}function wDe(t){const e=t[Qo];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function eK(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[Qo].modified_&&(UM(e),bl(4)),bm(t)&&(t=Ck(e,t),e.parent_||Nk(e,t)),e.patches_&&wm("Patches").generateReplacementPatches_(n[Qo].base_,t,e.patches_,e.inversePatches_)):t=Ck(e,n,[]),UM(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==qae?t:void 0}function Ck(t,e,n){if(J2(e))return e;const r=t.immer_.shouldUseStrictIteration(),i=e[Qo];if(!i)return kk(e,(s,o)=>tK(t,i,e,s,o,n),r),e;if(i.scope_!==t)return e;if(!i.modified_)return Nk(t,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const s=i.copy_;let o=s,a=!1;i.type_===3&&(o=new Set(s),s.clear(),a=!0),kk(o,(l,c)=>tK(t,i,s,l,c,n,a),r),Nk(t,s,!1),n&&t.patches_&&wm("Patches").generatePatches_(i,n,t.patches_,t.inversePatches_)}return i.copy_}function tK(t,e,n,r,i,s,o){if(i==null||typeof i!="object"&&!o)return;const a=J2(i);if(!(a&&!o)){if(gx(i)){const l=s&&e&&e.type_!==3&&!jM(e.assigned_,r)?s.concat(r):void 0,c=Ck(t,i,l);if(Kae(n,r,c),gx(c))t.canAutoFreeze_=!1;else return}else o&&n.add(i);if(bm(i)&&!a){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[r]===i&&a)return;Ck(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(G1(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&Nk(t,i)}}}function Nk(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&v6(e,n)}function EDe(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:Wae(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=b6;n&&(i=[r],s=zw);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var b6={get(t,e){if(e===Qo)return t;const n=rp(t);if(!jM(n,e))return SDe(t,n,e);const r=n[e];return t.finalized_||!bm(r)?r:r===J5(t.base_,e)?(X5(t),t.copy_[e]=zM(r,t)):r},has(t,e){return e in rp(t)},ownKeys(t){return Reflect.ownKeys(rp(t))},set(t,e,n){const r=Yae(rp(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=J5(rp(t),e),s=i==null?void 0:i[Qo];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(yDe(n,i)&&(n!==void 0||jM(t.base_,e)))return!0;X5(t),$M(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return J5(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,X5(t),$M(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=rp(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){bl(11)},getPrototypeOf(t){return Fw(t.base_)},setPrototypeOf(){bl(12)}},zw={};kk(b6,(t,e)=>{zw[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});zw.deleteProperty=function(t,e){return zw.set.call(this,t,e,void 0)};zw.set=function(t,e,n){return b6.set.call(this,t[0],e,n,t[0])};function J5(t,e){const n=t[Qo];return(n?rp(n):t)[e]}function SDe(t,e,n){var i;const r=Yae(e,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function Yae(t,e){if(!(e in t))return;let n=Fw(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Fw(n)}}function $M(t){t.modified_||(t.modified_=!0,t.parent_&&$M(t.parent_))}function X5(t){t.copy_||(t.copy_=BM(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var ADe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const s=n;n=e;const o=this;return function(l=s,...c){return o.produce(l,u=>n.call(this,u,...c))}}typeof n!="function"&&bl(6),r!==void 0&&typeof r!="function"&&bl(7);let i;if(bm(e)){const s=ZG(this),o=zM(e,void 0);let a=!0;try{i=n(o),a=!1}finally{a?UM(s):FM(s)}return QG(s,r),eK(i,s)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===qae&&(i=void 0),this.autoFreeze_&&v6(i,!0),r){const s=[],o=[];wm("Patches").generateReplacementPatches_(e,i,s,o),r(s,o)}return i}else bl(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(o,...a)=>this.produceWithPatches(o,l=>e(l,...a));let r,i;return[this.produce(e,n,(o,a)=>{r=o,i=a}),r,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof(t==null?void 0:t.useStrictIteration)=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){bm(t)||bl(8),gx(t)&&(t=TDe(t));const e=ZG(this),n=zM(t,void 0);return n[Qo].isManual_=!0,FM(e),n}finishDraft(t,e){const n=t&&t[Qo];(!n||!n.isManual_)&&bl(9);const{scope_:r}=n;return QG(r,e),eK(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=wm("Patches").applyPatches_;return gx(t)?r(t,e):this.produce(t,i=>r(i,e))}};function zM(t,e){const n=G1(t)?wm("MapSet").proxyMap_(t,e):Y2(t)?wm("MapSet").proxySet_(t,e):EDe(t,e);return(e?e.scope_:Wae()).drafts_.push(n),n}function TDe(t){return gx(t)||bl(10,t),Jae(t)}function Jae(t){if(!bm(t)||J2(t))return t;const e=t[Qo];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=BM(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=BM(t,!0);return kk(n,(i,s)=>{Kae(n,i,Jae(s))},r),e&&(e.finalized_=!1),n}var kDe=new ADe;kDe.produce;var CDe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},Xae=vo({name:"legend",initialState:CDe,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:Tr()},replaceLegendPayload:{reducer(t,e){var{prev:n,next:r}=e.payload,i=Tl(t).payload.indexOf(n);i>-1&&(t.payload[i]=r)},prepare:Tr()},removeLegendPayload:{reducer(t,e){var n=Tl(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)},prepare:Tr()}}}),{setLegendSize:Bmt,setLegendSettings:Umt,addLegendPayload:Qae,replaceLegendPayload:Zae,removeLegendPayload:ele}=Xae.actions,NDe=Xae.reducer;function HM(){return HM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},HM.apply(null,arguments)}function nK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Q5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nK(Object(n),!0).forEach(function(r){_De(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _De(t,e,n){return(e=IDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function IDe(t){var e=PDe(t,"string");return typeof e=="symbol"?e:e+""}function PDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function RDe(t){return Array.isArray(t)&&Oc(t[0])&&Oc(t[1])?t.join(" ~ "):t}var ODe=t=>{var{separator:e=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:s,formatter:o,itemSorter:a,wrapperClassName:l,labelClassName:c,label:u,labelFormatter:f,accessibilityLayer:m=!1}=t,g=()=>{if(s&&s.length){var U={padding:0,margin:0},R=(a?O2(s,a):s).map(($,V)=>{if($.type==="none")return null;var j=$.formatter||o||RDe,{value:F,name:W}=$,H=F,B=W;if(j){var A=j(F,W,$,V,s);if(Array.isArray(A))[H,B]=A;else if(A!=null)H=A;else return null}var I=Q5({display:"block",paddingTop:4,paddingBottom:4,color:$.color||"#000"},r);return T.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(V),style:I},Oc(B)?T.createElement("span",{className:"recharts-tooltip-item-name"},B):null,Oc(B)?T.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,T.createElement("span",{className:"recharts-tooltip-item-value"},H),T.createElement("span",{className:"recharts-tooltip-item-unit"},$.unit||""))});return T.createElement("ul",{className:"recharts-tooltip-item-list",style:U},R)}return null},v=Q5({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),x=Q5({margin:0},i),b=!Er(u),E=b?u:"",C=Rn("recharts-default-tooltip",l),k=Rn("recharts-tooltip-label",c);b&&f&&s!==void 0&&s!==null&&(E=f(u,s));var O=m?{role:"status","aria-live":"assertive"}:{};return T.createElement("div",HM({className:C,style:v},O),T.createElement("p",{className:k,style:x},T.isValidElement(E)?E:"".concat(E)),g())},hb="recharts-tooltip-wrapper",MDe={visibility:"hidden"};function DDe(t){var{coordinate:e,translateX:n,translateY:r}=t;return Rn(hb,{["".concat(hb,"-right")]:wt(n)&&e&&wt(e.x)&&n>=e.x,["".concat(hb,"-left")]:wt(n)&&e&&wt(e.x)&&n<e.x,["".concat(hb,"-bottom")]:wt(r)&&e&&wt(e.y)&&r>=e.y,["".concat(hb,"-top")]:wt(r)&&e&&wt(e.y)&&r<e.y})}function rK(t){var{allowEscapeViewBox:e,coordinate:n,key:r,offsetTopLeft:i,position:s,reverseDirection:o,tooltipDimension:a,viewBox:l,viewBoxDimension:c}=t;if(s&&wt(s[r]))return s[r];var u=n[r]-a-(i>0?i:0),f=n[r]+i;if(e[r])return o[r]?u:f;var m=l[r];if(m==null)return 0;if(o[r]){var g=u,v=m;return g<v?Math.max(f,m):Math.max(u,m)}if(c==null)return 0;var x=f+a,b=m+c;return x>b?Math.max(u,m):Math.max(f,m)}function LDe(t){var{translateX:e,translateY:n,useTranslate3d:r}=t;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function jDe(t){var{allowEscapeViewBox:e,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:s,tooltipBox:o,useTranslate3d:a,viewBox:l}=t,c,u,f;return o.height>0&&o.width>0&&n?(u=rK({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:o.width,viewBox:l,viewBoxDimension:l.width}),f=rK({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:o.height,viewBox:l,viewBoxDimension:l.height}),c=LDe({translateX:u,translateY:f,useTranslate3d:a})):c=MDe,{cssProperties:c,cssClasses:DDe({translateX:u,translateY:f,coordinate:n})}}function iK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function mA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iK(Object(n),!0).forEach(function(r){VM(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function VM(t,e,n){return(e=BDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function BDe(t){var e=UDe(t,"string");return typeof e=="symbol"?e:e+""}function UDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class FDe extends T.PureComponent{constructor(){super(...arguments),VM(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),VM(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,r,i,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:s,coordinate:o,hasPayload:a,isAnimationActive:l,offset:c,position:u,reverseDirection:f,useTranslate3d:m,viewBox:g,wrapperStyle:v,lastBoundingBox:x,innerRef:b,hasPortalFromProps:E}=this.props,{cssClasses:C,cssProperties:k}=jDe({allowEscapeViewBox:n,coordinate:o,offsetTopLeft:c,position:u,reverseDirection:f,tooltipBox:{height:x.height,width:x.width},useTranslate3d:m,viewBox:g}),O=E?{}:mA(mA({transition:l&&e?"transform ".concat(r,"ms ").concat(i):void 0},k),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&a?"visible":"hidden",position:"absolute",top:0,left:0}),U=mA(mA({},O),{},{visibility:!this.state.dismissed&&e&&a?"visible":"hidden"},v);return T.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:C,style:U,ref:b},s)}}var tle=()=>{var t;return(t=Pt(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function qM(){return qM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qM.apply(null,arguments)}function sK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function oK(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sK(Object(n),!0).forEach(function(r){$De(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $De(t,e,n){return(e=zDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zDe(t){var e=HDe(t,"string");return typeof e=="symbol"?e:e+""}function HDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var aK={curveBasisClosed:GOe,curveBasisOpen:KOe,curveBasis:qOe,curveBumpX:POe,curveBumpY:ROe,curveLinearClosed:WOe,curveLinear:I2,curveMonotoneX:YOe,curveMonotoneY:JOe,curveNatural:XOe,curveStep:QOe,curveStepAfter:e3e,curveStepBefore:ZOe},_k=t=>cr(t.x)&&cr(t.y),lK=t=>t.base!=null&&_k(t.base)&&_k(t),pb=t=>t.x,mb=t=>t.y,VDe=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(F1(t));return(n==="curveMonotone"||n==="curveBump")&&e?aK["".concat(n).concat(e==="vertical"?"Y":"X")]:aK[n]||I2},qDe=t=>{var{type:e="linear",points:n=[],baseLine:r,layout:i,connectNulls:s=!1}=t,o=VDe(e,i),a=s?n.filter(_k):n,l;if(Array.isArray(r)){var c=n.map((g,v)=>oK(oK({},g),{},{base:r[v]}));i==="vertical"?l=aA().y(mb).x1(pb).x0(g=>g.base.x):l=aA().x(pb).y1(mb).y0(g=>g.base.y);var u=l.defined(lK).curve(o),f=s?c.filter(lK):c;return u(f)}i==="vertical"&&wt(r)?l=aA().y(mb).x1(pb).x0(r):wt(r)?l=aA().x(pb).y1(mb).y0(r):l=koe().x(pb).y(mb);var m=l.defined(_k).curve(o);return m(a)},Xg=t=>{var{className:e,points:n,path:r,pathRef:i}=t,s=xh();if((!n||!n.length)&&!r)return null;var o={type:t.type,points:t.points,baseLine:t.baseLine,layout:t.layout||s,connectNulls:t.connectNulls},a=n&&n.length?qDe(o):r;return T.createElement("path",qM({},Ys(t),o6(t),{className:Rn("recharts-curve",e),d:a===null?void 0:a,ref:i}))},GDe=["x","y","top","left","width","height","className"];function GM(){return GM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},GM.apply(null,arguments)}function cK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function KDe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cK(Object(n),!0).forEach(function(r){WDe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function WDe(t,e,n){return(e=YDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function YDe(t){var e=JDe(t,"string");return typeof e=="symbol"?e:e+""}function JDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function XDe(t,e){if(t==null)return{};var n,r,i=QDe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function QDe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var ZDe=(t,e,n,r,i,s)=>"M".concat(t,",").concat(i,"v").concat(r,"M").concat(s,",").concat(e,"h").concat(n),eLe=t=>{var{x:e=0,y:n=0,top:r=0,left:i=0,width:s=0,height:o=0,className:a}=t,l=XDe(t,GDe),c=KDe({x:e,y:n,top:r,left:i,width:s,height:o},l);return!wt(e)||!wt(n)||!wt(s)||!wt(o)||!wt(r)||!wt(i)?null:T.createElement("path",GM({},Ms(c),{className:Rn("recharts-cross",a),d:ZDe(e,n,s,o,r,i)}))};function tLe(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function uK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function dK(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uK(Object(n),!0).forEach(function(r){nLe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nLe(t,e,n){return(e=rLe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rLe(t){var e=iLe(t,"string");return typeof e=="symbol"?e:e+""}function iLe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var sLe=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),nle=(t,e,n)=>t.map(r=>"".concat(sLe(r)," ").concat(e,"ms ").concat(n)).join(","),oLe=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,r)=>n.filter(i=>r.includes(i))),Hw=(t,e)=>Object.keys(e).reduce((n,r)=>dK(dK({},n),{},{[r]:t(r,e[r])}),{});function fK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ei(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fK(Object(n),!0).forEach(function(r){aLe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function aLe(t,e,n){return(e=lLe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lLe(t){var e=cLe(t,"string");return typeof e=="symbol"?e:e+""}function cLe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ik=(t,e,n)=>t+(e-t)*n,KM=t=>{var{from:e,to:n}=t;return e!==n},rle=(t,e,n)=>{var r=Hw((i,s)=>{if(KM(s)){var[o,a]=t(s.from,s.to,s.velocity);return Ei(Ei({},s),{},{from:o,velocity:a})}return s},e);return n<1?Hw((i,s)=>KM(s)&&r[i]!=null?Ei(Ei({},s),{},{velocity:Ik(s.velocity,r[i].velocity,n),from:Ik(s.from,r[i].from,n)}):s,e):rle(t,r,n-1)};function uLe(t,e,n,r,i,s){var o,a=r.reduce((m,g)=>Ei(Ei({},m),{},{[g]:{from:t[g],velocity:0,to:e[g]}}),{}),l=()=>Hw((m,g)=>g.from,a),c=()=>!Object.values(a).filter(KM).length,u=null,f=m=>{o||(o=m);var g=m-o,v=g/n.dt;a=rle(n,a,v),i(Ei(Ei(Ei({},t),e),l())),o=m,c()||(u=s.setTimeout(f))};return()=>(u=s.setTimeout(f),()=>{var m;(m=u)===null||m===void 0||m()})}function dLe(t,e,n,r,i,s,o){var a=null,l=i.reduce((f,m)=>{var g=t[m],v=e[m];return g==null||v==null?f:Ei(Ei({},f),{},{[m]:[g,v]})},{}),c,u=f=>{c||(c=f);var m=(f-c)/r,g=Hw((x,b)=>Ik(...b,n(m)),l);if(s(Ei(Ei(Ei({},t),e),g)),m<1)a=o.setTimeout(u);else{var v=Hw((x,b)=>Ik(...b,n(1)),l);s(Ei(Ei(Ei({},t),e),v))}};return()=>(a=o.setTimeout(u),()=>{var f;(f=a)===null||f===void 0||f()})}const fLe=(t,e,n,r,i,s)=>{var o=oLe(t,e);return n==null?()=>(i(Ei(Ei({},t),e)),()=>{}):n.isStepper===!0?uLe(t,e,n,o,i,s):dLe(t,e,n,r,o,i,s)};var Pk=1e-4,ile=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],sle=(t,e)=>t.map((n,r)=>n*e**r).reduce((n,r)=>n+r),hK=(t,e)=>n=>{var r=ile(t,e);return sle(r,n)},hLe=(t,e)=>n=>{var r=ile(t,e),i=[...r.map((s,o)=>s*o).slice(1),0];return sle(i,n)},pLe=t=>{var e,n=t.split("(");if(n.length!==2||n[0]!=="cubic-bezier")return null;var r=(e=n[1])===null||e===void 0||(e=e.split(")")[0])===null||e===void 0?void 0:e.split(",");if(r==null||r.length!==4)return null;var i=r.map(s=>parseFloat(s));return[i[0],i[1],i[2],i[3]]},mLe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i=pLe(n[0]);if(i)return i}}return n.length===4?n:[0,0,1,1]},gLe=(t,e,n,r)=>{var i=hK(t,n),s=hK(e,r),o=hLe(t,n),a=c=>c>1?1:c<0?0:c,l=c=>{for(var u=c>1?1:c,f=u,m=0;m<8;++m){var g=i(f)-u,v=o(f);if(Math.abs(g-u)<Pk||v<Pk)return s(f);f=a(f-g/v)}return s(f)};return l.isStepper=!1,l},pK=function(){return gLe(...mLe(...arguments))},yLe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=e,s=(o,a,l)=>{var c=-(o-a)*n,u=l*r,f=l+(c-u)*i/1e3,m=l*i/1e3+o;return Math.abs(m-a)<Pk&&Math.abs(f)<Pk?[a,0]:[m,f]};return s.isStepper=!0,s.dt=i,s},xLe=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return pK(t);case"spring":return yLe();default:if(t.split("(")[0]==="cubic-bezier")return pK(t)}return typeof t=="function"?t:null};function vLe(t){var e,n=()=>null,r=!1,i=null,s=o=>{if(!r){if(Array.isArray(o)){if(!o.length)return;var a=o,[l,...c]=a;if(typeof l=="number"){i=t.setTimeout(s.bind(null,c),l);return}s(l),i=t.setTimeout(s.bind(null,c));return}typeof o=="string"&&(e=o,n(e)),typeof o=="object"&&(e=o,n(e)),typeof o=="function"&&o()}};return{stop:()=>{r=!0},start:o=>{r=!1,i&&(i(),i=null),s(o)},subscribe:o=>(n=o,()=>{n=()=>null}),getTimeoutController:()=>t}}class bLe{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,s=o=>{o-r>=n?e(o):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(s))};return i=requestAnimationFrame(s),()=>{i!=null&&cancelAnimationFrame(i)}}}function wLe(){return vLe(new bLe)}var ELe=T.createContext(wLe);function SLe(t,e){var n=T.useContext(ELe);return T.useMemo(()=>e??n(t),[t,e,n])}var ALe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),K1={isSsr:ALe()},TLe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},mK={t:0},Z5={t:1};function qx(t){var e=yi(t,TLe),{isActive:n,canBegin:r,duration:i,easing:s,begin:o,onAnimationEnd:a,onAnimationStart:l,children:c}=e,u=n==="auto"?!K1.isSsr:n,f=SLe(e.animationId,e.animationManager),[m,g]=T.useState(u?mK:Z5),v=T.useRef(null);return T.useEffect(()=>{u||g(Z5)},[u]),T.useEffect(()=>{if(!u||!r)return $1;var x=fLe(mK,Z5,xLe(s),i,g,f.getTimeoutController()),b=()=>{v.current=x()};return f.start([l,o,b,i,a]),()=>{f.stop(),v.current&&v.current(),a()}},[u,r,i,s,o,l,a,f]),c(m.t)}function Gx(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=T.useRef(Dw(e)),r=T.useRef(t);return r.current!==t&&(n.current=Dw(e),r.current=t),n.current}var kLe=["radius"],CLe=["radius"],gK,yK,xK,vK,bK,wK,EK,SK,AK,TK;function kK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function CK(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kK(Object(n),!0).forEach(function(r){NLe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function NLe(t,e,n){return(e=_Le(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _Le(t){var e=ILe(t,"string");return typeof e=="symbol"?e:e+""}function ILe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Rk(){return Rk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Rk.apply(null,arguments)}function NK(t,e){if(t==null)return{};var n,r,i=PLe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function PLe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Yl(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var _K=(t,e,n,r,i)=>{var s=Yf(n),o=Yf(r),a=Math.min(Math.abs(s)/2,Math.abs(o)/2),l=o>=0?1:-1,c=s>=0?1:-1,u=o>=0&&s>=0||o<0&&s<0?1:0,f;if(a>0&&i instanceof Array){for(var m=[0,0,0,0],g=0,v=4;g<v;g++)m[g]=i[g]>a?a:i[g];f=Vr(gK||(gK=Yl(["M",",",""])),t,e+l*m[0]),m[0]>0&&(f+=Vr(yK||(yK=Yl(["A ",",",",0,0,",",",",",""])),m[0],m[0],u,t+c*m[0],e)),f+=Vr(xK||(xK=Yl(["L ",",",""])),t+n-c*m[1],e),m[1]>0&&(f+=Vr(vK||(vK=Yl(["A ",",",",0,0,",`,
        `,",",""])),m[1],m[1],u,t+n,e+l*m[1])),f+=Vr(bK||(bK=Yl(["L ",",",""])),t+n,e+r-l*m[2]),m[2]>0&&(f+=Vr(wK||(wK=Yl(["A ",",",",0,0,",`,
        `,",",""])),m[2],m[2],u,t+n-c*m[2],e+r)),f+=Vr(EK||(EK=Yl(["L ",",",""])),t+c*m[3],e+r),m[3]>0&&(f+=Vr(SK||(SK=Yl(["A ",",",",0,0,",`,
        `,",",""])),m[3],m[3],u,t,e+r-l*m[3])),f+="Z"}else if(a>0&&i===+i&&i>0){var x=Math.min(a,i);f=Vr(AK||(AK=Yl(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),t,e+l*x,x,x,u,t+c*x,e,t+n-c*x,e,x,x,u,t+n,e+l*x,t+n,e+r-l*x,x,x,u,t+n-c*x,e+r,t+c*x,e+r,x,x,u,t,e+r-l*x)}else f=Vr(TK||(TK=Yl(["M ",","," h "," v "," h "," Z"])),t,e,n,r,-n);return f},IK={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},ole=t=>{var e=yi(t,IK),n=T.useRef(null),[r,i]=T.useState(-1);T.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var z=n.current.getTotalLength();z&&i(z)}catch{}},[]);var{x:s,y:o,width:a,height:l,radius:c,className:u}=e,{animationEasing:f,animationDuration:m,animationBegin:g,isAnimationActive:v,isUpdateAnimationActive:x}=e,b=T.useRef(a),E=T.useRef(l),C=T.useRef(s),k=T.useRef(o),O=T.useMemo(()=>({x:s,y:o,width:a,height:l,radius:c}),[s,o,a,l,c]),U=Gx(O,"rectangle-");if(s!==+s||o!==+o||a!==+a||l!==+l||a===0||l===0)return null;var R=Rn("recharts-rectangle",u);if(!x){var $=Ms(e),{radius:V}=$,j=NK($,kLe);return T.createElement("path",Rk({},j,{x:Yf(s),y:Yf(o),width:Yf(a),height:Yf(l),radius:typeof c=="number"?c:void 0,className:R,d:_K(s,o,a,l,c)}))}var F=b.current,W=E.current,H=C.current,B=k.current,A="0px ".concat(r===-1?1:r,"px"),I="".concat(r,"px 0px"),D=nle(["strokeDasharray"],m,typeof f=="string"?f:IK.animationEasing);return T.createElement(qx,{animationId:U,key:U,canBegin:r>0,duration:m,easing:f,isActive:x,begin:g},z=>{var G=qn(F,a,z),te=qn(W,l,z),K=qn(H,s,z),q=qn(B,o,z);n.current&&(b.current=G,E.current=te,C.current=K,k.current=q);var M;v?z>0?M={transition:D,strokeDasharray:I}:M={strokeDasharray:A}:M={strokeDasharray:I};var _=Ms(e),{radius:Y}=_,X=NK(_,CLe);return T.createElement("path",Rk({},X,{radius:typeof c=="number"?c:void 0,className:R,d:_K(K,q,G,te,c),ref:n,style:CK(CK({},M),e.style)}))})};function PK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function RK(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PK(Object(n),!0).forEach(function(r){RLe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function RLe(t,e,n){return(e=OLe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function OLe(t){var e=MLe(t,"string");return typeof e=="symbol"?e:e+""}function MLe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ok=Math.PI/180,DLe=t=>t*180/Math.PI,mi=(t,e,n,r)=>({x:t+Math.cos(-Ok*r)*n,y:e+Math.sin(-Ok*r)*n}),ale=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},LLe=(t,e)=>{var{x:n,y:r}=t,{x:i,y:s}=e;return Math.sqrt((n-i)**2+(r-s)**2)},jLe=(t,e)=>{var{x:n,y:r}=t,{cx:i,cy:s}=e,o=LLe({x:n,y:r},{x:i,y:s});if(o<=0)return{radius:o,angle:0};var a=(n-i)/o,l=Math.acos(a);return r>s&&(l=2*Math.PI-l),{radius:o,angle:DLe(l),angleInRadian:l}},BLe=t=>{var{startAngle:e,endAngle:n}=t,r=Math.floor(e/360),i=Math.floor(n/360),s=Math.min(r,i);return{startAngle:e-s*360,endAngle:n-s*360}},ULe=(t,e)=>{var{startAngle:n,endAngle:r}=e,i=Math.floor(n/360),s=Math.floor(r/360),o=Math.min(i,s);return t+o*360},FLe=(t,e)=>{var{chartX:n,chartY:r}=t,{radius:i,angle:s}=jLe({x:n,y:r},e),{innerRadius:o,outerRadius:a}=e;if(i<o||i>a||i===0)return null;var{startAngle:l,endAngle:c}=BLe(e),u=s,f;if(l<=c){for(;u>c;)u-=360;for(;u<l;)u+=360;f=u>=l&&u<=c}else{for(;u>l;)u-=360;for(;u<c;)u+=360;f=u>=c&&u<=l}return f?RK(RK({},e),{},{radius:i,angle:ULe(u,e)}):null};function lle(t){var{cx:e,cy:n,radius:r,startAngle:i,endAngle:s}=t,o=mi(e,n,r,i),a=mi(e,n,r,s);return{points:[o,a],cx:e,cy:n,radius:r,startAngle:i,endAngle:s}}var OK,MK,DK,LK,jK,BK,UK;function WM(){return WM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},WM.apply(null,arguments)}function wp(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var $Le=(t,e)=>{var n=Ui(e-t),r=Math.min(Math.abs(e-t),359.999);return n*r},gA=t=>{var{cx:e,cy:n,radius:r,angle:i,sign:s,isExternal:o,cornerRadius:a,cornerIsExternal:l}=t,c=a*(o?1:-1)+r,u=Math.asin(a/c)/Ok,f=l?i:i+s*u,m=mi(e,n,c,f),g=mi(e,n,r,f),v=l?i-s*u:i,x=mi(e,n,c*Math.cos(u*Ok),v);return{center:m,circleTangency:g,lineTangency:x,theta:u}},cle=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:s,endAngle:o}=t,a=$Le(s,o),l=s+a,c=mi(e,n,i,s),u=mi(e,n,i,l),f=Vr(OK||(OK=wp(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),c.x,c.y,i,i,+(Math.abs(a)>180),+(s>l),u.x,u.y);if(r>0){var m=mi(e,n,r,s),g=mi(e,n,r,l);f+=Vr(MK||(MK=wp(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),g.x,g.y,r,r,+(Math.abs(a)>180),+(s<=l),m.x,m.y)}else f+=Vr(DK||(DK=wp(["L ",","," Z"])),e,n);return f},zLe=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,cornerRadius:s,forceCornerRadius:o,cornerIsExternal:a,startAngle:l,endAngle:c}=t,u=Ui(c-l),{circleTangency:f,lineTangency:m,theta:g}=gA({cx:e,cy:n,radius:i,angle:l,sign:u,cornerRadius:s,cornerIsExternal:a}),{circleTangency:v,lineTangency:x,theta:b}=gA({cx:e,cy:n,radius:i,angle:c,sign:-u,cornerRadius:s,cornerIsExternal:a}),E=a?Math.abs(l-c):Math.abs(l-c)-g-b;if(E<0)return o?Vr(LK||(LK=wp(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),m.x,m.y,s,s,s*2,s,s,-s*2):cle({cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:l,endAngle:c});var C=Vr(jK||(jK=wp(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),m.x,m.y,s,s,+(u<0),f.x,f.y,i,i,+(E>180),+(u<0),v.x,v.y,s,s,+(u<0),x.x,x.y);if(r>0){var{circleTangency:k,lineTangency:O,theta:U}=gA({cx:e,cy:n,radius:r,angle:l,sign:u,isExternal:!0,cornerRadius:s,cornerIsExternal:a}),{circleTangency:R,lineTangency:$,theta:V}=gA({cx:e,cy:n,radius:r,angle:c,sign:-u,isExternal:!0,cornerRadius:s,cornerIsExternal:a}),j=a?Math.abs(l-c):Math.abs(l-c)-U-V;if(j<0&&s===0)return"".concat(C,"L").concat(e,",").concat(n,"Z");C+=Vr(BK||(BK=wp(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),$.x,$.y,s,s,+(u<0),R.x,R.y,r,r,+(j>180),+(u>0),k.x,k.y,s,s,+(u<0),O.x,O.y)}else C+=Vr(UK||(UK=wp(["L",",","Z"])),e,n);return C},HLe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},ule=t=>{var e=yi(t,HLe),{cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:o,forceCornerRadius:a,cornerIsExternal:l,startAngle:c,endAngle:u,className:f}=e;if(s<i||c===u)return null;var m=Rn("recharts-sector",f),g=s-i,v=Ps(o,g,0,!0),x;return v>0&&Math.abs(c-u)<360?x=zLe({cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:Math.min(v,g/2),forceCornerRadius:a,cornerIsExternal:l,startAngle:c,endAngle:u}):x=cle({cx:n,cy:r,innerRadius:i,outerRadius:s,startAngle:c,endAngle:u}),T.createElement("path",WM({},Ms(e),{className:m,d:x}))};function VLe(t,e,n){if(t==="horizontal")return[{x:e.x,y:n.top},{x:e.x,y:n.top+n.height}];if(t==="vertical")return[{x:n.left,y:e.y},{x:n.left+n.width,y:e.y}];if(zoe(e)){if(t==="centric"){var{cx:r,cy:i,innerRadius:s,outerRadius:o,angle:a}=e,l=mi(r,i,s,a),c=mi(r,i,o,a);return[{x:l.x,y:l.y},{x:c.x,y:c.y}]}return lle(e)}}var eO={},tO={},nO={},FK;function qLe(){return FK||(FK=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Zoe();function n(r){return e.isSymbol(r)?NaN:Number(r)}t.toNumber=n})(nO)),nO}var $K;function GLe(){return $K||($K=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=qLe();function n(r){return r?(r=e.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}t.toFinite=n})(tO)),tO}var zK;function KLe(){return zK||(zK=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=eae(),n=GLe();function r(i,s,o){o&&typeof o!="number"&&e.isIterateeCall(i,s,o)&&(s=o=void 0),i=n.toFinite(i),s===void 0?(s=i,i=0):s=n.toFinite(s),o=o===void 0?i<s?1:-1:n.toFinite(o);const a=Math.max(Math.ceil((s-i)/(o||1)),0),l=new Array(a);for(let c=0;c<a;c++)l[c]=i,i+=o;return l}t.range=r})(eO)),eO}var rO,HK;function WLe(){return HK||(HK=1,rO=KLe().range),rO}var YLe=WLe();const dle=us(YLe);function eh(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function JLe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function w6(t){let e,n,r;t.length!==2?(e=eh,n=(a,l)=>eh(t(a),l),r=(a,l)=>t(a)-l):(e=t===eh||t===JLe?t:XLe,n=t,r=t);function i(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const f=c+u>>>1;n(a[f],l)<0?c=f+1:u=f}while(c<u)}return c}function s(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const f=c+u>>>1;n(a[f],l)<=0?c=f+1:u=f}while(c<u)}return c}function o(a,l,c=0,u=a.length){const f=i(a,l,c,u-1);return f>c&&r(a[f-1],l)>-r(a[f],l)?f-1:f}return{left:i,center:o,right:s}}function XLe(){return 0}function fle(t){return t===null?NaN:+t}function*QLe(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const ZLe=w6(eh),W1=ZLe.right;w6(fle).center;class VK extends Map{constructor(e,n=n8e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(qK(this,e))}has(e){return super.has(qK(this,e))}set(e,n){return super.set(e8e(this,e),n)}delete(e){return super.delete(t8e(this,e))}}function qK({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function e8e({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function t8e({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function n8e(t){return t!==null&&typeof t=="object"?t.valueOf():t}function r8e(t=eh){if(t===eh)return hle;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function hle(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const i8e=Math.sqrt(50),s8e=Math.sqrt(10),o8e=Math.sqrt(2);function Mk(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=i8e?10:s>=s8e?5:s>=o8e?2:1;let a,l,c;return i<0?(c=Math.pow(10,-i)/o,a=Math.round(t*c),l=Math.round(e*c),a/c<t&&++a,l/c>e&&--l,c=-c):(c=Math.pow(10,i)*o,a=Math.round(t/c),l=Math.round(e/c),a*c<t&&++a,l*c>e&&--l),l<a&&.5<=n&&n<2?Mk(t,e,n*2):[a,l,c]}function YM(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,s,o]=r?Mk(e,t,n):Mk(t,e,n);if(!(s>=i))return[];const a=s-i+1,l=new Array(a);if(r)if(o<0)for(let c=0;c<a;++c)l[c]=(s-c)/-o;else for(let c=0;c<a;++c)l[c]=(s-c)*o;else if(o<0)for(let c=0;c<a;++c)l[c]=(i+c)/-o;else for(let c=0;c<a;++c)l[c]=(i+c)*o;return l}function JM(t,e,n){return e=+e,t=+t,n=+n,Mk(t,e,n)[2]}function XM(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?JM(e,t,n):JM(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function GK(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function KK(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function ple(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?hle:r8e(i);r>n;){if(r-n>600){const l=r-n+1,c=e-n+1,u=Math.log(l),f=.5*Math.exp(2*u/3),m=.5*Math.sqrt(u*f*(l-f)/l)*(c-l/2<0?-1:1),g=Math.max(n,Math.floor(e-c*f/l+m)),v=Math.min(r,Math.floor(e+(l-c)*f/l+m));ple(t,e,g,v,i)}const s=t[e];let o=n,a=r;for(gb(t,n,e),i(t[r],s)>0&&gb(t,n,r);o<a;){for(gb(t,o,a),++o,--a;i(t[o],s)<0;)++o;for(;i(t[a],s)>0;)--a}i(t[n],s)===0?gb(t,n,a):(++a,gb(t,a,r)),a<=e&&(n=a+1),e<=a&&(r=a-1)}return t}function gb(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function a8e(t,e,n){if(t=Float64Array.from(QLe(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return KK(t);if(e>=1)return GK(t);var r,i=(r-1)*e,s=Math.floor(i),o=GK(ple(t,s).subarray(0,s+1)),a=KK(t.subarray(s+1));return o+(a-o)*(i-s)}}function l8e(t,e,n=fle){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,s=Math.floor(i),o=+n(t[s],s,t),a=+n(t[s+1],s+1,t);return o+(a-o)*(i-s)}}function c8e(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++r<i;)s[r]=t+r*n;return s}function Wa(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Cd(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const QM=Symbol("implicit");function E6(){var t=new VK,e=[],n=[],r=QM;function i(s){let o=t.get(s);if(o===void 0){if(r!==QM)return r;t.set(s,o=e.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new VK;for(const o of s)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return E6(e,n).unknown(r)},Wa.apply(i,arguments),i}function S6(){var t=E6().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,s,o,a=!1,l=0,c=0,u=.5;delete t.unknown;function f(){var m=e().length,g=i<r,v=g?i:r,x=g?r:i;s=(x-v)/Math.max(1,m-l+c*2),a&&(s=Math.floor(s)),v+=(x-v-s*(m-l))*u,o=s*(1-l),a&&(v=Math.round(v),o=Math.round(o));var b=c8e(m).map(function(E){return v+s*E});return n(g?b.reverse():b)}return t.domain=function(m){return arguments.length?(e(m),f()):e()},t.range=function(m){return arguments.length?([r,i]=m,r=+r,i=+i,f()):[r,i]},t.rangeRound=function(m){return[r,i]=m,r=+r,i=+i,a=!0,f()},t.bandwidth=function(){return o},t.step=function(){return s},t.round=function(m){return arguments.length?(a=!!m,f()):a},t.padding=function(m){return arguments.length?(l=Math.min(1,c=+m),f()):l},t.paddingInner=function(m){return arguments.length?(l=Math.min(1,m),f()):l},t.paddingOuter=function(m){return arguments.length?(c=+m,f()):c},t.align=function(m){return arguments.length?(u=Math.max(0,Math.min(1,m)),f()):u},t.copy=function(){return S6(e(),[r,i]).round(a).paddingInner(l).paddingOuter(c).align(u)},Wa.apply(f(),arguments)}function mle(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return mle(e())},t}function u8e(){return mle(S6.apply(null,arguments).paddingInner(1))}function A6(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function gle(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Y1(){}var Vw=.7,Dk=1/Vw,Qg="\\s*([+-]?\\d+)\\s*",qw="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Nc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",d8e=/^#([0-9a-f]{3,8})$/,f8e=new RegExp(`^rgb\\(${Qg},${Qg},${Qg}\\)$`),h8e=new RegExp(`^rgb\\(${Nc},${Nc},${Nc}\\)$`),p8e=new RegExp(`^rgba\\(${Qg},${Qg},${Qg},${qw}\\)$`),m8e=new RegExp(`^rgba\\(${Nc},${Nc},${Nc},${qw}\\)$`),g8e=new RegExp(`^hsl\\(${qw},${Nc},${Nc}\\)$`),y8e=new RegExp(`^hsla\\(${qw},${Nc},${Nc},${qw}\\)$`),WK={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};A6(Y1,Gw,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:YK,formatHex:YK,formatHex8:x8e,formatHsl:v8e,formatRgb:JK,toString:JK});function YK(){return this.rgb().formatHex()}function x8e(){return this.rgb().formatHex8()}function v8e(){return yle(this).formatHsl()}function JK(){return this.rgb().formatRgb()}function Gw(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=d8e.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?XK(e):n===3?new po(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?yA(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?yA(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=f8e.exec(t))?new po(e[1],e[2],e[3],1):(e=h8e.exec(t))?new po(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=p8e.exec(t))?yA(e[1],e[2],e[3],e[4]):(e=m8e.exec(t))?yA(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=g8e.exec(t))?eW(e[1],e[2]/100,e[3]/100,1):(e=y8e.exec(t))?eW(e[1],e[2]/100,e[3]/100,e[4]):WK.hasOwnProperty(t)?XK(WK[t]):t==="transparent"?new po(NaN,NaN,NaN,0):null}function XK(t){return new po(t>>16&255,t>>8&255,t&255,1)}function yA(t,e,n,r){return r<=0&&(t=e=n=NaN),new po(t,e,n,r)}function b8e(t){return t instanceof Y1||(t=Gw(t)),t?(t=t.rgb(),new po(t.r,t.g,t.b,t.opacity)):new po}function ZM(t,e,n,r){return arguments.length===1?b8e(t):new po(t,e,n,r??1)}function po(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}A6(po,ZM,gle(Y1,{brighter(t){return t=t==null?Dk:Math.pow(Dk,t),new po(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Vw:Math.pow(Vw,t),new po(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new po(nm(this.r),nm(this.g),nm(this.b),Lk(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:QK,formatHex:QK,formatHex8:w8e,formatRgb:ZK,toString:ZK}));function QK(){return`#${Ep(this.r)}${Ep(this.g)}${Ep(this.b)}`}function w8e(){return`#${Ep(this.r)}${Ep(this.g)}${Ep(this.b)}${Ep((isNaN(this.opacity)?1:this.opacity)*255)}`}function ZK(){const t=Lk(this.opacity);return`${t===1?"rgb(":"rgba("}${nm(this.r)}, ${nm(this.g)}, ${nm(this.b)}${t===1?")":`, ${t})`}`}function Lk(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function nm(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ep(t){return t=nm(t),(t<16?"0":"")+t.toString(16)}function eW(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new wl(t,e,n,r)}function yle(t){if(t instanceof wl)return new wl(t.h,t.s,t.l,t.opacity);if(t instanceof Y1||(t=Gw(t)),!t)return new wl;if(t instanceof wl)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(e===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-e)/a+2:o=(e-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new wl(o,a,l,t.opacity)}function E8e(t,e,n,r){return arguments.length===1?yle(t):new wl(t,e,n,r??1)}function wl(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}A6(wl,E8e,gle(Y1,{brighter(t){return t=t==null?Dk:Math.pow(Dk,t),new wl(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Vw:Math.pow(Vw,t),new wl(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new po(iO(t>=240?t-240:t+120,i,r),iO(t,i,r),iO(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new wl(tW(this.h),xA(this.s),xA(this.l),Lk(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Lk(this.opacity);return`${t===1?"hsl(":"hsla("}${tW(this.h)}, ${xA(this.s)*100}%, ${xA(this.l)*100}%${t===1?")":`, ${t})`}`}}));function tW(t){return t=(t||0)%360,t<0?t+360:t}function xA(t){return Math.max(0,Math.min(1,t||0))}function iO(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const T6=t=>()=>t;function S8e(t,e){return function(n){return t+n*e}}function A8e(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function T8e(t){return(t=+t)==1?xle:function(e,n){return n-e?A8e(e,n,t):T6(isNaN(e)?n:e)}}function xle(t,e){var n=e-t;return n?S8e(t,n):T6(isNaN(t)?e:t)}const nW=(function t(e){var n=T8e(e);function r(i,s){var o=n((i=ZM(i)).r,(s=ZM(s)).r),a=n(i.g,s.g),l=n(i.b,s.b),c=xle(i.opacity,s.opacity);return function(u){return i.r=o(u),i.g=a(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=t,r})(1);function k8e(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function C8e(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function N8e(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=Kx(t[o],e[o]);for(;o<n;++o)s[o]=e[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function _8e(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function jk(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function I8e(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Kx(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var eD=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,sO=new RegExp(eD.source,"g");function P8e(t){return function(){return t}}function R8e(t){return function(e){return t(e)+""}}function O8e(t,e){var n=eD.lastIndex=sO.lastIndex=0,r,i,s,o=-1,a=[],l=[];for(t=t+"",e=e+"";(r=eD.exec(t))&&(i=sO.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:jk(r,i)})),n=sO.lastIndex;return n<e.length&&(s=e.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?R8e(l[0].x):P8e(e):(e=l.length,function(c){for(var u=0,f;u<e;++u)a[(f=l[u]).i]=f.x(c);return a.join("")})}function Kx(t,e){var n=typeof e,r;return e==null||n==="boolean"?T6(e):(n==="number"?jk:n==="string"?(r=Gw(e))?(e=r,nW):O8e:e instanceof Gw?nW:e instanceof Date?_8e:C8e(e)?k8e:Array.isArray(e)?N8e:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?I8e:jk)(t,e)}function k6(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function M8e(t,e){e===void 0&&(e=t,t=Kx);for(var n=0,r=e.length-1,i=e[0],s=new Array(r<0?0:r);n<r;)s[n]=t(i,i=e[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function D8e(t){return function(){return t}}function Bk(t){return+t}var rW=[0,1];function Ks(t){return t}function tD(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:D8e(isNaN(e)?NaN:.5)}function L8e(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function j8e(t,e,n){var r=t[0],i=t[1],s=e[0],o=e[1];return i<r?(r=tD(i,r),s=n(o,s)):(r=tD(r,i),s=n(s,o)),function(a){return s(r(a))}}function B8e(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=tD(t[o],t[o+1]),s[o]=n(e[o],e[o+1]);return function(a){var l=W1(t,a,1,r)-1;return s[l](i[l](a))}}function J1(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function X2(){var t=rW,e=rW,n=Kx,r,i,s,o=Ks,a,l,c;function u(){var m=Math.min(t.length,e.length);return o!==Ks&&(o=L8e(t[0],t[m-1])),a=m>2?B8e:j8e,l=c=null,f}function f(m){return m==null||isNaN(m=+m)?s:(l||(l=a(t.map(r),e,n)))(r(o(m)))}return f.invert=function(m){return o(i((c||(c=a(e,t.map(r),jk)))(m)))},f.domain=function(m){return arguments.length?(t=Array.from(m,Bk),u()):t.slice()},f.range=function(m){return arguments.length?(e=Array.from(m),u()):e.slice()},f.rangeRound=function(m){return e=Array.from(m),n=k6,u()},f.clamp=function(m){return arguments.length?(o=m?!0:Ks,u()):o!==Ks},f.interpolate=function(m){return arguments.length?(n=m,u()):n},f.unknown=function(m){return arguments.length?(s=m,f):s},function(m,g){return r=m,i=g,u()}}function C6(){return X2()(Ks,Ks)}function U8e(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Uk(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function yx(t){return t=Uk(Math.abs(t)),t?t[1]:NaN}function F8e(t,e){return function(n,r){for(var i=n.length,s=[],o=0,a=t[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),s.push(n.substring(i-=a,i+a)),!((l+=a+1)>r));)a=t[o=(o+1)%t.length];return s.reverse().join(e)}}function $8e(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var z8e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Kw(t){if(!(e=z8e.exec(t)))throw new Error("invalid format: "+t);var e;return new N6({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Kw.prototype=N6.prototype;function N6(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}N6.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function H8e(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var vle;function V8e(t,e){var n=Uk(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(vle=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Uk(t,Math.max(0,e+s-1))[0]}function iW(t,e){var n=Uk(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const sW={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:U8e,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>iW(t*100,e),r:iW,s:V8e,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function oW(t){return t}var aW=Array.prototype.map,lW=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function q8e(t){var e=t.grouping===void 0||t.thousands===void 0?oW:F8e(aW.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?oW:$8e(aW.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(f){f=Kw(f);var m=f.fill,g=f.align,v=f.sign,x=f.symbol,b=f.zero,E=f.width,C=f.comma,k=f.precision,O=f.trim,U=f.type;U==="n"?(C=!0,U="g"):sW[U]||(k===void 0&&(k=12),O=!0,U="g"),(b||m==="0"&&g==="=")&&(b=!0,m="0",g="=");var R=x==="$"?n:x==="#"&&/[boxX]/.test(U)?"0"+U.toLowerCase():"",$=x==="$"?r:/[%p]/.test(U)?o:"",V=sW[U],j=/[defgprs%]/.test(U);k=k===void 0?6:/[gprs]/.test(U)?Math.max(1,Math.min(21,k)):Math.max(0,Math.min(20,k));function F(W){var H=R,B=$,A,I,D;if(U==="c")B=V(W)+B,W="";else{W=+W;var z=W<0||1/W<0;if(W=isNaN(W)?l:V(Math.abs(W),k),O&&(W=H8e(W)),z&&+W==0&&v!=="+"&&(z=!1),H=(z?v==="("?v:a:v==="-"||v==="("?"":v)+H,B=(U==="s"?lW[8+vle/3]:"")+B+(z&&v==="("?")":""),j){for(A=-1,I=W.length;++A<I;)if(D=W.charCodeAt(A),48>D||D>57){B=(D===46?i+W.slice(A+1):W.slice(A))+B,W=W.slice(0,A);break}}}C&&!b&&(W=e(W,1/0));var G=H.length+W.length+B.length,te=G<E?new Array(E-G+1).join(m):"";switch(C&&b&&(W=e(te+W,te.length?E-B.length:1/0),te=""),g){case"<":W=H+W+B+te;break;case"=":W=H+te+W+B;break;case"^":W=te.slice(0,G=te.length>>1)+H+W+B+te.slice(G);break;default:W=te+H+W+B;break}return s(W)}return F.toString=function(){return f+""},F}function u(f,m){var g=c((f=Kw(f),f.type="f",f)),v=Math.max(-8,Math.min(8,Math.floor(yx(m)/3)))*3,x=Math.pow(10,-v),b=lW[8+v/3];return function(E){return g(x*E)+b}}return{format:c,formatPrefix:u}}var vA,_6,ble;G8e({thousands:",",grouping:[3],currency:["$",""]});function G8e(t){return vA=q8e(t),_6=vA.format,ble=vA.formatPrefix,vA}function K8e(t){return Math.max(0,-yx(Math.abs(t)))}function W8e(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(yx(e)/3)))*3-yx(Math.abs(t)))}function Y8e(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,yx(e)-yx(t))+1}function wle(t,e,n,r){var i=XM(t,e,n),s;switch(r=Kw(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=W8e(i,o))&&(r.precision=s),ble(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=Y8e(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=K8e(i))&&(r.precision=s-(r.type==="%")*2);break}}return _6(r)}function vh(t){var e=t.domain;return t.ticks=function(n){var r=e();return YM(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return wle(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,o=r[i],a=r[s],l,c,u=10;for(a<o&&(c=o,o=a,a=c,c=i,i=s,s=c);u-- >0;){if(c=JM(o,a,n),c===l)return r[i]=o,r[s]=a,e(r);if(c>0)o=Math.floor(o/c)*c,a=Math.ceil(a/c)*c;else if(c<0)o=Math.ceil(o*c)/c,a=Math.floor(a*c)/c;else break;l=c}return t},t}function Ele(){var t=C6();return t.copy=function(){return J1(t,Ele())},Wa.apply(t,arguments),vh(t)}function Sle(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,Bk),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return Sle(t).unknown(e)},t=arguments.length?Array.from(t,Bk):[0,1],vh(n)}function Ale(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],s=t[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),t[n]=e.floor(i),t[r]=e.ceil(s),t}function cW(t){return Math.log(t)}function uW(t){return Math.exp(t)}function J8e(t){return-Math.log(-t)}function X8e(t){return-Math.exp(-t)}function Q8e(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Z8e(t){return t===10?Q8e:t===Math.E?Math.exp:e=>Math.pow(t,e)}function e6e(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function dW(t){return(e,n)=>-t(-e,n)}function I6(t){const e=t(cW,uW),n=e.domain;let r=10,i,s;function o(){return i=e6e(r),s=Z8e(r),n()[0]<0?(i=dW(i),s=dW(s),t(J8e,X8e)):t(cW,uW),e}return e.base=function(a){return arguments.length?(r=+a,o()):r},e.domain=function(a){return arguments.length?(n(a),o()):n()},e.ticks=a=>{const l=n();let c=l[0],u=l[l.length-1];const f=u<c;f&&([c,u]=[u,c]);let m=i(c),g=i(u),v,x;const b=a==null?10:+a;let E=[];if(!(r%1)&&g-m<b){if(m=Math.floor(m),g=Math.ceil(g),c>0){for(;m<=g;++m)for(v=1;v<r;++v)if(x=m<0?v/s(-m):v*s(m),!(x<c)){if(x>u)break;E.push(x)}}else for(;m<=g;++m)for(v=r-1;v>=1;--v)if(x=m>0?v/s(-m):v*s(m),!(x<c)){if(x>u)break;E.push(x)}E.length*2<b&&(E=YM(c,u,b))}else E=YM(m,g,Math.min(g-m,b)).map(s);return f?E.reverse():E},e.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=Kw(l)).precision==null&&(l.trim=!0),l=_6(l)),a===1/0)return l;const c=Math.max(1,r*a/e.ticks().length);return u=>{let f=u/s(Math.round(i(u)));return f*r<r-.5&&(f*=r),f<=c?l(u):""}},e.nice=()=>n(Ale(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),e}function Tle(){const t=I6(X2()).domain([1,10]);return t.copy=()=>J1(t,Tle()).base(t.base()),Wa.apply(t,arguments),t}function fW(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function hW(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function P6(t){var e=1,n=t(fW(e),hW(e));return n.constant=function(r){return arguments.length?t(fW(e=+r),hW(e)):e},vh(n)}function kle(){var t=P6(X2());return t.copy=function(){return J1(t,kle()).constant(t.constant())},Wa.apply(t,arguments)}function pW(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function t6e(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function n6e(t){return t<0?-t*t:t*t}function R6(t){var e=t(Ks,Ks),n=1;function r(){return n===1?t(Ks,Ks):n===.5?t(t6e,n6e):t(pW(n),pW(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},vh(e)}function O6(){var t=R6(X2());return t.copy=function(){return J1(t,O6()).exponent(t.exponent())},Wa.apply(t,arguments),t}function r6e(){return O6.apply(null,arguments).exponent(.5)}function mW(t){return Math.sign(t)*t*t}function i6e(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function Cle(){var t=C6(),e=[0,1],n=!1,r;function i(s){var o=i6e(t(s));return isNaN(o)?r:n?Math.round(o):o}return i.invert=function(s){return t.invert(mW(s))},i.domain=function(s){return arguments.length?(t.domain(s),i):t.domain()},i.range=function(s){return arguments.length?(t.range((e=Array.from(s,Bk)).map(mW)),i):e.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(n=!!s,i):n},i.clamp=function(s){return arguments.length?(t.clamp(s),i):t.clamp()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Cle(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Wa.apply(i,arguments),vh(i)}function Nle(){var t=[],e=[],n=[],r;function i(){var o=0,a=Math.max(1,e.length);for(n=new Array(a-1);++o<a;)n[o-1]=l8e(t,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:e[W1(n,o)]}return s.invertExtent=function(o){var a=e.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:t[0],a<n.length?n[a]:t[t.length-1]]},s.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let a of o)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(eh),i()},s.range=function(o){return arguments.length?(e=Array.from(o),i()):e.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return Nle().domain(t).range(e).unknown(r)},Wa.apply(s,arguments)}function _le(){var t=0,e=1,n=1,r=[.5],i=[0,1],s;function o(l){return l!=null&&l<=l?i[W1(r,l,0,n)]:s}function a(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return o}return o.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,a()):[t,e]},o.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,a()):i.slice()},o.invertExtent=function(l){var c=i.indexOf(l);return c<0?[NaN,NaN]:c<1?[t,r[0]]:c>=n?[r[n-1],e]:[r[c-1],r[c]]},o.unknown=function(l){return arguments.length&&(s=l),o},o.thresholds=function(){return r.slice()},o.copy=function(){return _le().domain([t,e]).range(i).unknown(s)},Wa.apply(vh(o),arguments)}function Ile(){var t=[.5],e=[0,1],n,r=1;function i(s){return s!=null&&s<=s?e[W1(t,s,0,r)]:n}return i.domain=function(s){return arguments.length?(t=Array.from(s),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(s){return arguments.length?(e=Array.from(s),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(s){var o=e.indexOf(s);return[t[o-1],t[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return Ile().domain(t).range(e).unknown(n)},Wa.apply(i,arguments)}const oO=new Date,aO=new Date;function Ai(t,e,n,r){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(e(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const l=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return l;let c;do l.push(c=new Date(+s)),e(s,a),t(s);while(c<s&&s<o);return l},i.filter=s=>Ai(o=>{if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;e(o,-1),!s(o););else for(;--a>=0;)for(;e(o,1),!s(o););}),n&&(i.count=(s,o)=>(oO.setTime(+s),aO.setTime(+o),t(oO),t(aO),Math.floor(n(oO,aO))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const Fk=Ai(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Fk.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Ai(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Fk);Fk.range;const qu=1e3,Ba=qu*60,Gu=Ba*60,md=Gu*24,M6=md*7,gW=md*30,lO=md*365,Sp=Ai(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*qu)},(t,e)=>(e-t)/qu,t=>t.getUTCSeconds());Sp.range;const D6=Ai(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*qu)},(t,e)=>{t.setTime(+t+e*Ba)},(t,e)=>(e-t)/Ba,t=>t.getMinutes());D6.range;const L6=Ai(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Ba)},(t,e)=>(e-t)/Ba,t=>t.getUTCMinutes());L6.range;const j6=Ai(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*qu-t.getMinutes()*Ba)},(t,e)=>{t.setTime(+t+e*Gu)},(t,e)=>(e-t)/Gu,t=>t.getHours());j6.range;const B6=Ai(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Gu)},(t,e)=>(e-t)/Gu,t=>t.getUTCHours());B6.range;const X1=Ai(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ba)/md,t=>t.getDate()-1);X1.range;const Q2=Ai(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/md,t=>t.getUTCDate()-1);Q2.range;const Ple=Ai(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/md,t=>Math.floor(t/md));Ple.range;function jm(t){return Ai(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Ba)/M6)}const Z2=jm(0),$k=jm(1),s6e=jm(2),o6e=jm(3),xx=jm(4),a6e=jm(5),l6e=jm(6);Z2.range;$k.range;s6e.range;o6e.range;xx.range;a6e.range;l6e.range;function Bm(t){return Ai(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/M6)}const eN=Bm(0),zk=Bm(1),c6e=Bm(2),u6e=Bm(3),vx=Bm(4),d6e=Bm(5),f6e=Bm(6);eN.range;zk.range;c6e.range;u6e.range;vx.range;d6e.range;f6e.range;const U6=Ai(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());U6.range;const F6=Ai(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());F6.range;const gd=Ai(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());gd.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ai(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});gd.range;const yd=Ai(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());yd.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ai(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});yd.range;function Rle(t,e,n,r,i,s){const o=[[Sp,1,qu],[Sp,5,5*qu],[Sp,15,15*qu],[Sp,30,30*qu],[s,1,Ba],[s,5,5*Ba],[s,15,15*Ba],[s,30,30*Ba],[i,1,Gu],[i,3,3*Gu],[i,6,6*Gu],[i,12,12*Gu],[r,1,md],[r,2,2*md],[n,1,M6],[e,1,gW],[e,3,3*gW],[t,1,lO]];function a(c,u,f){const m=u<c;m&&([c,u]=[u,c]);const g=f&&typeof f.range=="function"?f:l(c,u,f),v=g?g.range(c,+u+1):[];return m?v.reverse():v}function l(c,u,f){const m=Math.abs(u-c)/f,g=w6(([,,b])=>b).right(o,m);if(g===o.length)return t.every(XM(c/lO,u/lO,f));if(g===0)return Fk.every(Math.max(XM(c,u,f),1));const[v,x]=o[m/o[g-1][2]<o[g][2]/m?g-1:g];return v.every(x)}return[a,l]}const[h6e,p6e]=Rle(yd,F6,eN,Ple,B6,L6),[m6e,g6e]=Rle(gd,U6,Z2,X1,j6,D6);function cO(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function uO(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function yb(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function y6e(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,s=t.days,o=t.shortDays,a=t.months,l=t.shortMonths,c=xb(i),u=vb(i),f=xb(s),m=vb(s),g=xb(o),v=vb(o),x=xb(a),b=vb(a),E=xb(l),C=vb(l),k={a:z,A:G,b:te,B:K,c:null,d:EW,e:EW,f:F6e,g:J6e,G:Q6e,H:j6e,I:B6e,j:U6e,L:Ole,m:$6e,M:z6e,p:q,q:M,Q:TW,s:kW,S:H6e,u:V6e,U:q6e,V:G6e,w:K6e,W:W6e,x:null,X:null,y:Y6e,Y:X6e,Z:Z6e,"%":AW},O={a:_,A:Y,b:X,B:re,c:null,d:SW,e:SW,f:rje,g:hje,G:mje,H:eje,I:tje,j:nje,L:Dle,m:ije,M:sje,p:oe,q:Ee,Q:TW,s:kW,S:oje,u:aje,U:lje,V:cje,w:uje,W:dje,x:null,X:null,y:fje,Y:pje,Z:gje,"%":AW},U={a:F,A:W,b:H,B,c:A,d:bW,e:bW,f:O6e,g:vW,G:xW,H:wW,I:wW,j:_6e,L:R6e,m:N6e,M:I6e,p:j,q:C6e,Q:D6e,s:L6e,S:P6e,u:E6e,U:S6e,V:A6e,w:w6e,W:T6e,x:I,X:D,y:vW,Y:xW,Z:k6e,"%":M6e};k.x=R(n,k),k.X=R(r,k),k.c=R(e,k),O.x=R(n,O),O.X=R(r,O),O.c=R(e,O);function R(ce,me){return function(ue){var le=[],Ie=-1,Ne=0,$e=ce.length,Ze,Ye,We;for(ue instanceof Date||(ue=new Date(+ue));++Ie<$e;)ce.charCodeAt(Ie)===37&&(le.push(ce.slice(Ne,Ie)),(Ye=yW[Ze=ce.charAt(++Ie)])!=null?Ze=ce.charAt(++Ie):Ye=Ze==="e"?" ":"0",(We=me[Ze])&&(Ze=We(ue,Ye)),le.push(Ze),Ne=Ie+1);return le.push(ce.slice(Ne,Ie)),le.join("")}}function $(ce,me){return function(ue){var le=yb(1900,void 0,1),Ie=V(le,ce,ue+="",0),Ne,$e;if(Ie!=ue.length)return null;if("Q"in le)return new Date(le.Q);if("s"in le)return new Date(le.s*1e3+("L"in le?le.L:0));if(me&&!("Z"in le)&&(le.Z=0),"p"in le&&(le.H=le.H%12+le.p*12),le.m===void 0&&(le.m="q"in le?le.q:0),"V"in le){if(le.V<1||le.V>53)return null;"w"in le||(le.w=1),"Z"in le?(Ne=uO(yb(le.y,0,1)),$e=Ne.getUTCDay(),Ne=$e>4||$e===0?zk.ceil(Ne):zk(Ne),Ne=Q2.offset(Ne,(le.V-1)*7),le.y=Ne.getUTCFullYear(),le.m=Ne.getUTCMonth(),le.d=Ne.getUTCDate()+(le.w+6)%7):(Ne=cO(yb(le.y,0,1)),$e=Ne.getDay(),Ne=$e>4||$e===0?$k.ceil(Ne):$k(Ne),Ne=X1.offset(Ne,(le.V-1)*7),le.y=Ne.getFullYear(),le.m=Ne.getMonth(),le.d=Ne.getDate()+(le.w+6)%7)}else("W"in le||"U"in le)&&("w"in le||(le.w="u"in le?le.u%7:"W"in le?1:0),$e="Z"in le?uO(yb(le.y,0,1)).getUTCDay():cO(yb(le.y,0,1)).getDay(),le.m=0,le.d="W"in le?(le.w+6)%7+le.W*7-($e+5)%7:le.w+le.U*7-($e+6)%7);return"Z"in le?(le.H+=le.Z/100|0,le.M+=le.Z%100,uO(le)):cO(le)}}function V(ce,me,ue,le){for(var Ie=0,Ne=me.length,$e=ue.length,Ze,Ye;Ie<Ne;){if(le>=$e)return-1;if(Ze=me.charCodeAt(Ie++),Ze===37){if(Ze=me.charAt(Ie++),Ye=U[Ze in yW?me.charAt(Ie++):Ze],!Ye||(le=Ye(ce,ue,le))<0)return-1}else if(Ze!=ue.charCodeAt(le++))return-1}return le}function j(ce,me,ue){var le=c.exec(me.slice(ue));return le?(ce.p=u.get(le[0].toLowerCase()),ue+le[0].length):-1}function F(ce,me,ue){var le=g.exec(me.slice(ue));return le?(ce.w=v.get(le[0].toLowerCase()),ue+le[0].length):-1}function W(ce,me,ue){var le=f.exec(me.slice(ue));return le?(ce.w=m.get(le[0].toLowerCase()),ue+le[0].length):-1}function H(ce,me,ue){var le=E.exec(me.slice(ue));return le?(ce.m=C.get(le[0].toLowerCase()),ue+le[0].length):-1}function B(ce,me,ue){var le=x.exec(me.slice(ue));return le?(ce.m=b.get(le[0].toLowerCase()),ue+le[0].length):-1}function A(ce,me,ue){return V(ce,e,me,ue)}function I(ce,me,ue){return V(ce,n,me,ue)}function D(ce,me,ue){return V(ce,r,me,ue)}function z(ce){return o[ce.getDay()]}function G(ce){return s[ce.getDay()]}function te(ce){return l[ce.getMonth()]}function K(ce){return a[ce.getMonth()]}function q(ce){return i[+(ce.getHours()>=12)]}function M(ce){return 1+~~(ce.getMonth()/3)}function _(ce){return o[ce.getUTCDay()]}function Y(ce){return s[ce.getUTCDay()]}function X(ce){return l[ce.getUTCMonth()]}function re(ce){return a[ce.getUTCMonth()]}function oe(ce){return i[+(ce.getUTCHours()>=12)]}function Ee(ce){return 1+~~(ce.getUTCMonth()/3)}return{format:function(ce){var me=R(ce+="",k);return me.toString=function(){return ce},me},parse:function(ce){var me=$(ce+="",!1);return me.toString=function(){return ce},me},utcFormat:function(ce){var me=R(ce+="",O);return me.toString=function(){return ce},me},utcParse:function(ce){var me=$(ce+="",!0);return me.toString=function(){return ce},me}}}var yW={"-":"",_:" ",0:"0"},zi=/^\s*\d+/,x6e=/^%/,v6e=/[\\^$*+?|[\]().{}]/g;function Fn(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(e)+i:i)}function b6e(t){return t.replace(v6e,"\\$&")}function xb(t){return new RegExp("^(?:"+t.map(b6e).join("|")+")","i")}function vb(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function w6e(t,e,n){var r=zi.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function E6e(t,e,n){var r=zi.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function S6e(t,e,n){var r=zi.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function A6e(t,e,n){var r=zi.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function T6e(t,e,n){var r=zi.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function xW(t,e,n){var r=zi.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function vW(t,e,n){var r=zi.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function k6e(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function C6e(t,e,n){var r=zi.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function N6e(t,e,n){var r=zi.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function bW(t,e,n){var r=zi.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function _6e(t,e,n){var r=zi.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function wW(t,e,n){var r=zi.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function I6e(t,e,n){var r=zi.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function P6e(t,e,n){var r=zi.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function R6e(t,e,n){var r=zi.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function O6e(t,e,n){var r=zi.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function M6e(t,e,n){var r=x6e.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function D6e(t,e,n){var r=zi.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function L6e(t,e,n){var r=zi.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function EW(t,e){return Fn(t.getDate(),e,2)}function j6e(t,e){return Fn(t.getHours(),e,2)}function B6e(t,e){return Fn(t.getHours()%12||12,e,2)}function U6e(t,e){return Fn(1+X1.count(gd(t),t),e,3)}function Ole(t,e){return Fn(t.getMilliseconds(),e,3)}function F6e(t,e){return Ole(t,e)+"000"}function $6e(t,e){return Fn(t.getMonth()+1,e,2)}function z6e(t,e){return Fn(t.getMinutes(),e,2)}function H6e(t,e){return Fn(t.getSeconds(),e,2)}function V6e(t){var e=t.getDay();return e===0?7:e}function q6e(t,e){return Fn(Z2.count(gd(t)-1,t),e,2)}function Mle(t){var e=t.getDay();return e>=4||e===0?xx(t):xx.ceil(t)}function G6e(t,e){return t=Mle(t),Fn(xx.count(gd(t),t)+(gd(t).getDay()===4),e,2)}function K6e(t){return t.getDay()}function W6e(t,e){return Fn($k.count(gd(t)-1,t),e,2)}function Y6e(t,e){return Fn(t.getFullYear()%100,e,2)}function J6e(t,e){return t=Mle(t),Fn(t.getFullYear()%100,e,2)}function X6e(t,e){return Fn(t.getFullYear()%1e4,e,4)}function Q6e(t,e){var n=t.getDay();return t=n>=4||n===0?xx(t):xx.ceil(t),Fn(t.getFullYear()%1e4,e,4)}function Z6e(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Fn(e/60|0,"0",2)+Fn(e%60,"0",2)}function SW(t,e){return Fn(t.getUTCDate(),e,2)}function eje(t,e){return Fn(t.getUTCHours(),e,2)}function tje(t,e){return Fn(t.getUTCHours()%12||12,e,2)}function nje(t,e){return Fn(1+Q2.count(yd(t),t),e,3)}function Dle(t,e){return Fn(t.getUTCMilliseconds(),e,3)}function rje(t,e){return Dle(t,e)+"000"}function ije(t,e){return Fn(t.getUTCMonth()+1,e,2)}function sje(t,e){return Fn(t.getUTCMinutes(),e,2)}function oje(t,e){return Fn(t.getUTCSeconds(),e,2)}function aje(t){var e=t.getUTCDay();return e===0?7:e}function lje(t,e){return Fn(eN.count(yd(t)-1,t),e,2)}function Lle(t){var e=t.getUTCDay();return e>=4||e===0?vx(t):vx.ceil(t)}function cje(t,e){return t=Lle(t),Fn(vx.count(yd(t),t)+(yd(t).getUTCDay()===4),e,2)}function uje(t){return t.getUTCDay()}function dje(t,e){return Fn(zk.count(yd(t)-1,t),e,2)}function fje(t,e){return Fn(t.getUTCFullYear()%100,e,2)}function hje(t,e){return t=Lle(t),Fn(t.getUTCFullYear()%100,e,2)}function pje(t,e){return Fn(t.getUTCFullYear()%1e4,e,4)}function mje(t,e){var n=t.getUTCDay();return t=n>=4||n===0?vx(t):vx.ceil(t),Fn(t.getUTCFullYear()%1e4,e,4)}function gje(){return"+0000"}function AW(){return"%"}function TW(t){return+t}function kW(t){return Math.floor(+t/1e3)}var G0,jle,Ble;yje({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function yje(t){return G0=y6e(t),jle=G0.format,G0.parse,Ble=G0.utcFormat,G0.utcParse,G0}function xje(t){return new Date(t)}function vje(t){return t instanceof Date?+t:+new Date(+t)}function $6(t,e,n,r,i,s,o,a,l,c){var u=C6(),f=u.invert,m=u.domain,g=c(".%L"),v=c(":%S"),x=c("%I:%M"),b=c("%I %p"),E=c("%a %d"),C=c("%b %d"),k=c("%B"),O=c("%Y");function U(R){return(l(R)<R?g:a(R)<R?v:o(R)<R?x:s(R)<R?b:r(R)<R?i(R)<R?E:C:n(R)<R?k:O)(R)}return u.invert=function(R){return new Date(f(R))},u.domain=function(R){return arguments.length?m(Array.from(R,vje)):m().map(xje)},u.ticks=function(R){var $=m();return t($[0],$[$.length-1],R??10)},u.tickFormat=function(R,$){return $==null?U:c($)},u.nice=function(R){var $=m();return(!R||typeof R.range!="function")&&(R=e($[0],$[$.length-1],R??10)),R?m(Ale($,R)):u},u.copy=function(){return J1(u,$6(t,e,n,r,i,s,o,a,l,c))},u}function bje(){return Wa.apply($6(m6e,g6e,gd,U6,Z2,X1,j6,D6,Sp,jle).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function wje(){return Wa.apply($6(h6e,p6e,yd,F6,eN,Q2,B6,L6,Sp,Ble).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function tN(){var t=0,e=1,n,r,i,s,o=Ks,a=!1,l;function c(f){return f==null||isNaN(f=+f)?l:o(i===0?.5:(f=(s(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}c.domain=function(f){return arguments.length?([t,e]=f,n=s(t=+t),r=s(e=+e),i=n===r?0:1/(r-n),c):[t,e]},c.clamp=function(f){return arguments.length?(a=!!f,c):a},c.interpolator=function(f){return arguments.length?(o=f,c):o};function u(f){return function(m){var g,v;return arguments.length?([g,v]=m,o=f(g,v),c):[o(0),o(1)]}}return c.range=u(Kx),c.rangeRound=u(k6),c.unknown=function(f){return arguments.length?(l=f,c):l},function(f){return s=f,n=f(t),r=f(e),i=n===r?0:1/(r-n),c}}function bh(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Ule(){var t=vh(tN()(Ks));return t.copy=function(){return bh(t,Ule())},Cd.apply(t,arguments)}function Fle(){var t=I6(tN()).domain([1,10]);return t.copy=function(){return bh(t,Fle()).base(t.base())},Cd.apply(t,arguments)}function $le(){var t=P6(tN());return t.copy=function(){return bh(t,$le()).constant(t.constant())},Cd.apply(t,arguments)}function z6(){var t=R6(tN());return t.copy=function(){return bh(t,z6()).exponent(t.exponent())},Cd.apply(t,arguments)}function Eje(){return z6.apply(null,arguments).exponent(.5)}function zle(){var t=[],e=Ks;function n(r){if(r!=null&&!isNaN(r=+r))return e((W1(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(eh),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,s)=>a8e(t,s/r))},n.copy=function(){return zle(e).domain(t)},Cd.apply(n,arguments)}function nN(){var t=0,e=.5,n=1,r=1,i,s,o,a,l,c=Ks,u,f=!1,m;function g(x){return isNaN(x=+x)?m:(x=.5+((x=+u(x))-s)*(r*x<r*s?a:l),c(f?Math.max(0,Math.min(1,x)):x))}g.domain=function(x){return arguments.length?([t,e,n]=x,i=u(t=+t),s=u(e=+e),o=u(n=+n),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),r=s<i?-1:1,g):[t,e,n]},g.clamp=function(x){return arguments.length?(f=!!x,g):f},g.interpolator=function(x){return arguments.length?(c=x,g):c};function v(x){return function(b){var E,C,k;return arguments.length?([E,C,k]=b,c=M8e(x,[E,C,k]),g):[c(0),c(.5),c(1)]}}return g.range=v(Kx),g.rangeRound=v(k6),g.unknown=function(x){return arguments.length?(m=x,g):m},function(x){return u=x,i=x(t),s=x(e),o=x(n),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),r=s<i?-1:1,g}}function Hle(){var t=vh(nN()(Ks));return t.copy=function(){return bh(t,Hle())},Cd.apply(t,arguments)}function Vle(){var t=I6(nN()).domain([.1,1,10]);return t.copy=function(){return bh(t,Vle()).base(t.base())},Cd.apply(t,arguments)}function qle(){var t=P6(nN());return t.copy=function(){return bh(t,qle()).constant(t.constant())},Cd.apply(t,arguments)}function H6(){var t=R6(nN());return t.copy=function(){return bh(t,H6()).exponent(t.exponent())},Cd.apply(t,arguments)}function Sje(){return H6.apply(null,arguments).exponent(.5)}const Fb=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:S6,scaleDiverging:Hle,scaleDivergingLog:Vle,scaleDivergingPow:H6,scaleDivergingSqrt:Sje,scaleDivergingSymlog:qle,scaleIdentity:Sle,scaleImplicit:QM,scaleLinear:Ele,scaleLog:Tle,scaleOrdinal:E6,scalePoint:u8e,scalePow:O6,scaleQuantile:Nle,scaleQuantize:_le,scaleRadial:Cle,scaleSequential:Ule,scaleSequentialLog:Fle,scaleSequentialPow:z6,scaleSequentialQuantile:zle,scaleSequentialSqrt:Eje,scaleSequentialSymlog:$le,scaleSqrt:r6e,scaleSymlog:kle,scaleThreshold:Ile,scaleTime:bje,scaleUtc:wje,tickFormat:wle},Symbol.toStringTag,{value:"Module"}));var Nd=t=>t.chartData,rN=Me([Nd],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),V6=(t,e,n,r)=>r?rN(t):Nd(t),Gle=(t,e,n)=>n?rN(t):Nd(t);function ch(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(cr(e)&&cr(n))return!0}return!1}function CW(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function Kle(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,r]=t,i,s;if(cr(n))i=n;else if(typeof n=="function")return;if(cr(r))s=r;else if(typeof r=="function")return;var o=[i,s];if(ch(o))return o}}function Aje(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var r=t(e,n);if(ch(r))return CW(r,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[i,s]=t,o,a;if(i==="auto")e!=null&&(o=Math.min(...e));else if(wt(i))o=i;else if(typeof i=="function")try{e!=null&&(o=i(e==null?void 0:e[0]))}catch{}else if(typeof i=="string"&&FG.test(i)){var l=FG.exec(i);if(l==null||l[1]==null||e==null)o=void 0;else{var c=+l[1];o=e[0]-c}}else o=e==null?void 0:e[0];if(s==="auto")e!=null&&(a=Math.max(...e));else if(wt(s))a=s;else if(typeof s=="function")try{e!=null&&(a=s(e==null?void 0:e[1]))}catch{}else if(typeof s=="string"&&$G.test(s)){var u=$G.exec(s);if(u==null||u[1]==null||e==null)a=void 0;else{var f=+u[1];a=e[1]+f}}else a=e==null?void 0:e[1];var m=[o,a];if(ch(m))return e==null?m:CW(m,e,n)}}}var Wx=1e9,Tje={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},G6,Cr=!0,qa="[DecimalError] ",rm=qa+"Invalid argument: ",q6=qa+"Exponent out of range: ",Yx=Math.floor,ip=Math.pow,kje=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Go,Mi=1e7,wr=7,Wle=9007199254740991,Hk=Yx(Wle/wr),Ct={};Ct.absoluteValue=Ct.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Ct.comparedTo=Ct.cmp=function(t){var e,n,r,i,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(r=s.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return r===i?0:r>i^s.s<0?1:-1};Ct.decimalPlaces=Ct.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*wr;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Ct.dividedBy=Ct.div=function(t){return Qu(this,new this.constructor(t))};Ct.dividedToIntegerBy=Ct.idiv=function(t){var e=this,n=e.constructor;return ar(Qu(e,new n(t),0,1),n.precision)};Ct.equals=Ct.eq=function(t){return!this.cmp(t)};Ct.exponent=function(){return gi(this)};Ct.greaterThan=Ct.gt=function(t){return this.cmp(t)>0};Ct.greaterThanOrEqualTo=Ct.gte=function(t){return this.cmp(t)>=0};Ct.isInteger=Ct.isint=function(){return this.e>this.d.length-2};Ct.isNegative=Ct.isneg=function(){return this.s<0};Ct.isPositive=Ct.ispos=function(){return this.s>0};Ct.isZero=function(){return this.s===0};Ct.lessThan=Ct.lt=function(t){return this.cmp(t)<0};Ct.lessThanOrEqualTo=Ct.lte=function(t){return this.cmp(t)<1};Ct.logarithm=Ct.log=function(t){var e,n=this,r=n.constructor,i=r.precision,s=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(Go))throw Error(qa+"NaN");if(n.s<1)throw Error(qa+(n.s?"NaN":"-Infinity"));return n.eq(Go)?new r(0):(Cr=!1,e=Qu(Ww(n,s),Ww(t,s),s),Cr=!0,ar(e,i))};Ct.minus=Ct.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?Xle(e,t):Yle(e,(t.s=-t.s,t))};Ct.modulo=Ct.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(qa+"NaN");return n.s?(Cr=!1,e=Qu(n,t,0,1).times(t),Cr=!0,n.minus(e)):ar(new r(n),i)};Ct.naturalExponential=Ct.exp=function(){return Jle(this)};Ct.naturalLogarithm=Ct.ln=function(){return Ww(this)};Ct.negated=Ct.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Ct.plus=Ct.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?Yle(e,t):Xle(e,(t.s=-t.s,t))};Ct.precision=Ct.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(rm+t);if(e=gi(i)+1,r=i.d.length-1,n=r*wr+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Ct.squareRoot=Ct.sqrt=function(){var t,e,n,r,i,s,o,a=this,l=a.constructor;if(a.s<1){if(!a.s)return new l(0);throw Error(qa+"NaN")}for(t=gi(a),Cr=!1,i=Math.sqrt(+a),i==0||i==1/0?(e=bc(a.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=Yx((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new l(e)):r=new l(i.toString()),n=l.precision,i=o=n+3;;)if(s=r,r=s.plus(Qu(a,s,o+2)).times(.5),bc(s.d).slice(0,o)===(e=bc(r.d)).slice(0,o)){if(e=e.slice(o-3,o+1),i==o&&e=="4999"){if(ar(s,n+1,0),s.times(s).eq(a)){r=s;break}}else if(e!="9999")break;o+=4}return Cr=!0,ar(r,n)};Ct.times=Ct.mul=function(t){var e,n,r,i,s,o,a,l,c,u=this,f=u.constructor,m=u.d,g=(t=new f(t)).d;if(!u.s||!t.s)return new f(0);for(t.s*=u.s,n=u.e+t.e,l=m.length,c=g.length,l<c&&(s=m,m=g,g=s,o=l,l=c,c=o),s=[],o=l+c,r=o;r--;)s.push(0);for(r=c;--r>=0;){for(e=0,i=l+r;i>r;)a=s[i]+g[r]*m[i-r-1]+e,s[i--]=a%Mi|0,e=a/Mi|0;s[i]=(s[i]+e)%Mi|0}for(;!s[--o];)s.pop();return e?++n:s.shift(),t.d=s,t.e=n,Cr?ar(t,f.precision):t};Ct.toDecimalPlaces=Ct.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Dc(t,0,Wx),e===void 0?e=r.rounding:Dc(e,0,8),ar(n,t+gi(n)+1,e))};Ct.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Em(r,!0):(Dc(t,0,Wx),e===void 0?e=i.rounding:Dc(e,0,8),r=ar(new i(r),t+1,e),n=Em(r,!0,t+1)),n};Ct.toFixed=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?Em(i):(Dc(t,0,Wx),e===void 0?e=s.rounding:Dc(e,0,8),r=ar(new s(i),t+gi(i)+1,e),n=Em(r.abs(),!1,t+gi(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Ct.toInteger=Ct.toint=function(){var t=this,e=t.constructor;return ar(new e(t),gi(t)+1,e.rounding)};Ct.toNumber=function(){return+this};Ct.toPower=Ct.pow=function(t){var e,n,r,i,s,o,a=this,l=a.constructor,c=12,u=+(t=new l(t));if(!t.s)return new l(Go);if(a=new l(a),!a.s){if(t.s<1)throw Error(qa+"Infinity");return a}if(a.eq(Go))return a;if(r=l.precision,t.eq(Go))return ar(a,r);if(e=t.e,n=t.d.length-1,o=e>=n,s=a.s,o){if((n=u<0?-u:u)<=Wle){for(i=new l(Go),e=Math.ceil(r/wr+4),Cr=!1;n%2&&(i=i.times(a),_W(i.d,e)),n=Yx(n/2),n!==0;)a=a.times(a),_W(a.d,e);return Cr=!0,t.s<0?new l(Go).div(i):ar(i,r)}}else if(s<0)throw Error(qa+"NaN");return s=s<0&&t.d[Math.max(e,n)]&1?-1:1,a.s=1,Cr=!1,i=t.times(Ww(a,r+c)),Cr=!0,i=Jle(i),i.s=s,i};Ct.toPrecision=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?(n=gi(i),r=Em(i,n<=s.toExpNeg||n>=s.toExpPos)):(Dc(t,1,Wx),e===void 0?e=s.rounding:Dc(e,0,8),i=ar(new s(i),t,e),n=gi(i),r=Em(i,t<=n||n<=s.toExpNeg,t)),r};Ct.toSignificantDigits=Ct.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Dc(t,1,Wx),e===void 0?e=r.rounding:Dc(e,0,8)),ar(new r(n),t,e)};Ct.toString=Ct.valueOf=Ct.val=Ct.toJSON=Ct[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=gi(t),n=t.constructor;return Em(t,e<=n.toExpNeg||e>=n.toExpPos)};function Yle(t,e){var n,r,i,s,o,a,l,c,u=t.constructor,f=u.precision;if(!t.s||!e.s)return e.s||(e=new u(t)),Cr?ar(e,f):e;if(l=t.d,c=e.d,o=t.e,i=e.e,l=l.slice(),s=o-i,s){for(s<0?(r=l,s=-s,a=c.length):(r=c,i=o,a=l.length),o=Math.ceil(f/wr),a=o>a?o+1:a+1,s>a&&(s=a,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(a=l.length,s=c.length,a-s<0&&(s=a,r=c,c=l,l=r),n=0;s;)n=(l[--s]=l[s]+c[s]+n)/Mi|0,l[s]%=Mi;for(n&&(l.unshift(n),++i),a=l.length;l[--a]==0;)l.pop();return e.d=l,e.e=i,Cr?ar(e,f):e}function Dc(t,e,n){if(t!==~~t||t<e||t>n)throw Error(rm+t)}function bc(t){var e,n,r,i=t.length-1,s="",o=t[0];if(i>0){for(s+=o,e=1;e<i;e++)r=t[e]+"",n=wr-r.length,n&&(s+=Tf(n)),s+=r;o=t[e],r=o+"",n=wr-r.length,n&&(s+=Tf(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var Qu=(function(){function t(r,i){var s,o=0,a=r.length;for(r=r.slice();a--;)s=r[a]*i+o,r[a]=s%Mi|0,o=s/Mi|0;return o&&r.unshift(o),r}function e(r,i,s,o){var a,l;if(s!=o)l=s>o?1:-1;else for(a=l=0;a<s;a++)if(r[a]!=i[a]){l=r[a]>i[a]?1:-1;break}return l}function n(r,i,s){for(var o=0;s--;)r[s]-=o,o=r[s]<i[s]?1:0,r[s]=o*Mi+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,o){var a,l,c,u,f,m,g,v,x,b,E,C,k,O,U,R,$,V,j=r.constructor,F=r.s==i.s?1:-1,W=r.d,H=i.d;if(!r.s)return new j(r);if(!i.s)throw Error(qa+"Division by zero");for(l=r.e-i.e,$=H.length,U=W.length,g=new j(F),v=g.d=[],c=0;H[c]==(W[c]||0);)++c;if(H[c]>(W[c]||0)&&--l,s==null?C=s=j.precision:o?C=s+(gi(r)-gi(i))+1:C=s,C<0)return new j(0);if(C=C/wr+2|0,c=0,$==1)for(u=0,H=H[0],C++;(c<U||u)&&C--;c++)k=u*Mi+(W[c]||0),v[c]=k/H|0,u=k%H|0;else{for(u=Mi/(H[0]+1)|0,u>1&&(H=t(H,u),W=t(W,u),$=H.length,U=W.length),O=$,x=W.slice(0,$),b=x.length;b<$;)x[b++]=0;V=H.slice(),V.unshift(0),R=H[0],H[1]>=Mi/2&&++R;do u=0,a=e(H,x,$,b),a<0?(E=x[0],$!=b&&(E=E*Mi+(x[1]||0)),u=E/R|0,u>1?(u>=Mi&&(u=Mi-1),f=t(H,u),m=f.length,b=x.length,a=e(f,x,m,b),a==1&&(u--,n(f,$<m?V:H,m))):(u==0&&(a=u=1),f=H.slice()),m=f.length,m<b&&f.unshift(0),n(x,f,b),a==-1&&(b=x.length,a=e(H,x,$,b),a<1&&(u++,n(x,$<b?V:H,b))),b=x.length):a===0&&(u++,x=[0]),v[c++]=u,a&&x[0]?x[b++]=W[O]||0:(x=[W[O]],b=1);while((O++<U||x[0]!==void 0)&&C--)}return v[0]||v.shift(),g.e=l,ar(g,o?s+gi(g)+1:s)}})();function Jle(t,e){var n,r,i,s,o,a,l=0,c=0,u=t.constructor,f=u.precision;if(gi(t)>16)throw Error(q6+gi(t));if(!t.s)return new u(Go);for(Cr=!1,a=f,o=new u(.03125);t.abs().gte(.1);)t=t.times(o),c+=5;for(r=Math.log(ip(2,c))/Math.LN10*2+5|0,a+=r,n=i=s=new u(Go),u.precision=a;;){if(i=ar(i.times(t),a),n=n.times(++l),o=s.plus(Qu(i,n,a)),bc(o.d).slice(0,a)===bc(s.d).slice(0,a)){for(;c--;)s=ar(s.times(s),a);return u.precision=f,e==null?(Cr=!0,ar(s,f)):s}s=o}}function gi(t){for(var e=t.e*wr,n=t.d[0];n>=10;n/=10)e++;return e}function dO(t,e,n){if(e>t.LN10.sd())throw Cr=!0,n&&(t.precision=n),Error(qa+"LN10 precision limit exceeded");return ar(new t(t.LN10),e)}function Tf(t){for(var e="";t--;)e+="0";return e}function Ww(t,e){var n,r,i,s,o,a,l,c,u,f=1,m=10,g=t,v=g.d,x=g.constructor,b=x.precision;if(g.s<1)throw Error(qa+(g.s?"NaN":"-Infinity"));if(g.eq(Go))return new x(0);if(e==null?(Cr=!1,c=b):c=e,g.eq(10))return e==null&&(Cr=!0),dO(x,c);if(c+=m,x.precision=c,n=bc(v),r=n.charAt(0),s=gi(g),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)g=g.times(t),n=bc(g.d),r=n.charAt(0),f++;s=gi(g),r>1?(g=new x("0."+n),s++):g=new x(r+"."+n.slice(1))}else return l=dO(x,c+2,b).times(s+""),g=Ww(new x(r+"."+n.slice(1)),c-m).plus(l),x.precision=b,e==null?(Cr=!0,ar(g,b)):g;for(a=o=g=Qu(g.minus(Go),g.plus(Go),c),u=ar(g.times(g),c),i=3;;){if(o=ar(o.times(u),c),l=a.plus(Qu(o,new x(i),c)),bc(l.d).slice(0,c)===bc(a.d).slice(0,c))return a=a.times(2),s!==0&&(a=a.plus(dO(x,c+2,b).times(s+""))),a=Qu(a,new x(f),c),x.precision=b,e==null?(Cr=!0,ar(a,b)):a;a=l,i+=2}}function NW(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=Yx(n/wr),t.d=[],r=(n+1)%wr,n<0&&(r+=wr),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=wr;r<i;)t.d.push(+e.slice(r,r+=wr));e=e.slice(r),r=wr-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),Cr&&(t.e>Hk||t.e<-Hk))throw Error(q6+n)}else t.s=0,t.e=0,t.d=[0];return t}function ar(t,e,n){var r,i,s,o,a,l,c,u,f=t.d;for(o=1,s=f[0];s>=10;s/=10)o++;if(r=e-o,r<0)r+=wr,i=e,c=f[u=0];else{if(u=Math.ceil((r+1)/wr),s=f.length,u>=s)return t;for(c=s=f[u],o=1;s>=10;s/=10)o++;r%=wr,i=r-wr+o}if(n!==void 0&&(s=ip(10,o-i-1),a=c/s%10|0,l=e<0||f[u+1]!==void 0||c%s,l=n<4?(a||l)&&(n==0||n==(t.s<0?3:2)):a>5||a==5&&(n==4||l||n==6&&(r>0?i>0?c/ip(10,o-i):0:f[u-1])%10&1||n==(t.s<0?8:7))),e<1||!f[0])return l?(s=gi(t),f.length=1,e=e-s-1,f[0]=ip(10,(wr-e%wr)%wr),t.e=Yx(-e/wr)||0):(f.length=1,f[0]=t.e=t.s=0),t;if(r==0?(f.length=u,s=1,u--):(f.length=u+1,s=ip(10,wr-r),f[u]=i>0?(c/ip(10,o-i)%ip(10,i)|0)*s:0),l)for(;;)if(u==0){(f[0]+=s)==Mi&&(f[0]=1,++t.e);break}else{if(f[u]+=s,f[u]!=Mi)break;f[u--]=0,s=1}for(r=f.length;f[--r]===0;)f.pop();if(Cr&&(t.e>Hk||t.e<-Hk))throw Error(q6+gi(t));return t}function Xle(t,e){var n,r,i,s,o,a,l,c,u,f,m=t.constructor,g=m.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new m(t),Cr?ar(e,g):e;if(l=t.d,f=e.d,r=e.e,c=t.e,l=l.slice(),o=c-r,o){for(u=o<0,u?(n=l,o=-o,a=f.length):(n=f,r=c,a=l.length),i=Math.max(Math.ceil(g/wr),a)+2,o>i&&(o=i,n.length=1),n.reverse(),i=o;i--;)n.push(0);n.reverse()}else{for(i=l.length,a=f.length,u=i<a,u&&(a=i),i=0;i<a;i++)if(l[i]!=f[i]){u=l[i]<f[i];break}o=0}for(u&&(n=l,l=f,f=n,e.s=-e.s),a=l.length,i=f.length-a;i>0;--i)l[a++]=0;for(i=f.length;i>o;){if(l[--i]<f[i]){for(s=i;s&&l[--s]===0;)l[s]=Mi-1;--l[s],l[i]+=Mi}l[i]-=f[i]}for(;l[--a]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,Cr?ar(e,g):e):new m(0)}function Em(t,e,n){var r,i=gi(t),s=bc(t.d),o=s.length;return e?(n&&(r=n-o)>0?s=s.charAt(0)+"."+s.slice(1)+Tf(r):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+Tf(-i-1)+s,n&&(r=n-o)>0&&(s+=Tf(r))):i>=o?(s+=Tf(i+1-o),n&&(r=n-i-1)>0&&(s=s+"."+Tf(r))):((r=i+1)<o&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(s+="."),s+=Tf(r))),t.s<0?"-"+s:s}function _W(t,e){if(t.length>e)return t.length=e,!0}function Qle(t){var e,n,r;function i(s){var o=this;if(!(o instanceof i))return new i(s);if(o.constructor=i,s instanceof i){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(rm+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return NW(o,s.toString())}else if(typeof s!="string")throw Error(rm+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,kje.test(s))NW(o,s);else throw Error(rm+s)}if(i.prototype=Ct,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=Qle,i.config=i.set=Cje,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function Cje(t){if(!t||typeof t!="object")throw Error(qa+"Object expected");var e,n,r,i=["precision",1,Wx,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(Yx(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(rm+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(rm+n+": "+r);return this}var G6=Qle(Tje);Go=new G6(1);const Qn=G6;var Nje=t=>t,Zle={},ece=t=>t===Zle,IW=t=>function e(){return arguments.length===0||arguments.length===1&&ece(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},tce=(t,e)=>t===1?e:IW(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=r.filter(o=>o!==Zle).length;return s>=t?e(...r):tce(t-s,IW(function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];var c=r.map(u=>ece(u)?a.shift():u);return e(...c,...a)}))}),_je=t=>tce(t.length,t),nD=(t,e)=>{for(var n=[],r=t;r<e;++r)n[r-t]=r;return n},Ije=_je((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(n=>e[n]).map(t)),Pje=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return Nje;var i=n.reverse(),s=i[0],o=i.slice(1);return function(){return o.reduce((a,l)=>l(a),s(...arguments))}};function nce(t){var e;return t===0?e=1:e=Math.floor(new Qn(t).abs().log(10).toNumber())+1,e}function rce(t,e,n){for(var r=new Qn(t),i=0,s=[];r.lt(e)&&i<1e5;)s.push(r.toNumber()),r=r.add(n),i++;return s}var ice=t=>{var[e,n]=t,[r,i]=[e,n];return e>n&&([r,i]=[n,e]),[r,i]},sce=(t,e,n)=>{if(t.lte(0))return new Qn(0);var r=nce(t.toNumber()),i=new Qn(10).pow(r),s=t.div(i),o=r!==1?.05:.1,a=new Qn(Math.ceil(s.div(o).toNumber())).add(n).mul(o),l=a.mul(i);return e?new Qn(l.toNumber()):new Qn(Math.ceil(l.toNumber()))},Rje=(t,e,n)=>{var r=new Qn(1),i=new Qn(t);if(!i.isint()&&n){var s=Math.abs(t);s<1?(r=new Qn(10).pow(nce(t)-1),i=new Qn(Math.floor(i.div(r).toNumber())).mul(r)):s>1&&(i=new Qn(Math.floor(t)))}else t===0?i=new Qn(Math.floor((e-1)/2)):n||(i=new Qn(Math.floor(t)));var o=Math.floor((e-1)/2),a=Pje(Ije(l=>i.add(new Qn(l-o).mul(r)).toNumber()),nD);return a(0,e)},oce=function(e,n,r,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(r-1)))return{step:new Qn(0),tickMin:new Qn(0),tickMax:new Qn(0)};var o=sce(new Qn(n).sub(e).div(r-1),i,s),a;e<=0&&n>=0?a=new Qn(0):(a=new Qn(e).add(n).div(2),a=a.sub(new Qn(a).mod(o)));var l=Math.ceil(a.sub(e).div(o).toNumber()),c=Math.ceil(new Qn(n).sub(a).div(o).toNumber()),u=l+c+1;return u>r?oce(e,n,r,i,s+1):(u<r&&(c=n>0?c+(r-u):c,l=n>0?l:l+(r-u)),{step:o,tickMin:a.sub(new Qn(l).mul(o)),tickMax:a.add(new Qn(c).mul(o))})},Oje=function(e){var[n,r]=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(i,2),[a,l]=ice([n,r]);if(a===-1/0||l===1/0){var c=l===1/0?[a,...nD(0,i-1).map(()=>1/0)]:[...nD(0,i-1).map(()=>-1/0),l];return n>r?c.reverse():c}if(a===l)return Rje(a,i,s);var{step:u,tickMin:f,tickMax:m}=oce(a,l,o,s,0),g=rce(f,m.add(new Qn(.1).mul(u)),u);return n>r?g.reverse():g},Mje=function(e,n){var[r,i]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[o,a]=ice([r,i]);if(o===-1/0||a===1/0)return[r,i];if(o===a)return[o];var l=Math.max(n,2),c=sce(new Qn(a).sub(o).div(l-1),s,0),u=[...rce(new Qn(o),new Qn(a),c),a];return s===!1&&(u=u.map(f=>Math.round(f))),r>i?u.reverse():u},ace=t=>t.rootProps.maxBarSize,Dje=t=>t.rootProps.barGap,lce=t=>t.rootProps.barCategoryGap,Lje=t=>t.rootProps.barSize,Q1=t=>t.rootProps.stackOffset,cce=t=>t.rootProps.reverseStackOrder,K6=t=>t.options.chartName,W6=t=>t.rootProps.syncId,uce=t=>t.rootProps.syncMethod,Y6=t=>t.options.eventEmitter,jje=t=>t.rootProps.baseValue,ri={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Uu={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},$o={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},iN=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},Bje={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Uu.angleAxisId,includeHidden:!1,name:void 0,reversed:Uu.reversed,scale:Uu.scale,tick:Uu.tick,tickCount:void 0,ticks:void 0,type:Uu.type,unit:void 0},Uje={allowDataOverflow:$o.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:$o.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:$o.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:$o.scale,tick:$o.tick,tickCount:$o.tickCount,ticks:void 0,type:$o.type,unit:void 0},Fje={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Uu.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Uu.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Uu.scale,tick:Uu.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},$je={allowDataOverflow:$o.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:$o.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:$o.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:$o.scale,tick:$o.tick,tickCount:$o.tickCount,ticks:void 0,type:"category",unit:void 0},J6=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?Fje:Bje,X6=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?$je:Uje,sN=t=>t.polarOptions,Q6=Me([Td,kd,Si],ale),dce=Me([sN,Q6],(t,e)=>{if(t!=null)return Ps(t.innerRadius,e,0)}),fce=Me([sN,Q6],(t,e)=>{if(t!=null)return Ps(t.outerRadius,e,e*.8)}),zje=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},hce=Me([sN],zje);Me([J6,hce],iN);var pce=Me([Q6,dce,fce],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});Me([X6,pce],iN);var mce=Me([An,sN,dce,fce,Td,kd],(t,e,n,r,i,s)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||r==null)){var{cx:o,cy:a,startAngle:l,endAngle:c}=e;return{cx:Ps(o,i,i/2),cy:Ps(a,s,s/2),innerRadius:n,outerRadius:r,startAngle:l,endAngle:c,clockWise:!1}}}),Ir=(t,e)=>e,Z1=(t,e,n)=>n;function oN(t){return t==null?void 0:t.id}function gce(t,e,n){var{chartData:r=[]}=e,{allowDuplicatedCategory:i,dataKey:s}=n,o=new Map;return t.forEach(a=>{var l,c=(l=a.data)!==null&&l!==void 0?l:r;if(!(c==null||c.length===0)){var u=oN(a);c.forEach((f,m)=>{var g=s==null||i?m:String(Wn(f,s,null)),v=Wn(f,a.dataKey,0),x;o.has(g)?x=o.get(g):x={},Object.assign(x,{[u]:v}),o.set(g,x)})}}),Array.from(o.values())}function aN(t){return"stackId"in t&&t.stackId!=null&&t.dataKey!=null}var lN=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function cN(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function Hje(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return!1}var Ti=t=>{var e=An(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},Jx=t=>t.tooltip.settings.axisId;function PW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Vk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PW(Object(n),!0).forEach(function(r){Vje(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Vje(t,e,n){return(e=qje(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qje(t){var e=Gje(t,"string");return typeof e=="symbol"?e:e+""}function Gje(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var rD=[0,"auto"],_i={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},yce=(t,e)=>t.cartesianAxis.xAxis[e],_d=(t,e)=>{var n=yce(t,e);return n??_i},Ii={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:rD,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:q1},xce=(t,e)=>t.cartesianAxis.yAxis[e],Id=(t,e)=>{var n=xce(t,e);return n??Ii},Kje={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},Z6=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??Kje},Br=(t,e,n)=>{switch(e){case"xAxis":return _d(t,n);case"yAxis":return Id(t,n);case"zAxis":return Z6(t,n);case"angleAxis":return J6(t,n);case"radiusAxis":return X6(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},Wje=(t,e,n)=>{switch(e){case"xAxis":return _d(t,n);case"yAxis":return Id(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},eE=(t,e,n)=>{switch(e){case"xAxis":return _d(t,n);case"yAxis":return Id(t,n);case"angleAxis":return J6(t,n);case"radiusAxis":return X6(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},vce=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function ej(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var tE=t=>t.graphicalItems.cartesianItems,Yje=Me([Ir,Z1],ej),tj=(t,e,n)=>t.filter(n).filter(r=>(e==null?void 0:e.includeHidden)===!0?!0:!r.hide),nE=Me([tE,Br,Yje],tj,{memoizeOptions:{resultEqualityCheck:cN}}),bce=Me([nE],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(aN)),wce=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),Jje=Me([nE],wce),nj=t=>t.map(e=>e.data).filter(Boolean).flat(1),Xje=Me([nE],nj,{memoizeOptions:{resultEqualityCheck:cN}}),rj=(t,e)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=e;return t.length>0?t:n.slice(r,i+1)},ij=Me([Xje,V6],rj),sj=(t,e,n)=>(e==null?void 0:e.dataKey)!=null?t.map(r=>({value:Wn(r,e.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>t.map(i=>({value:Wn(i,r)}))):t.map(r=>({value:r})),uN=Me([ij,Br,nE],sj);function Ece(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function bT(t){if(Oc(t)||t instanceof Date){var e=Number(t);if(cr(e))return e}}function RW(t){if(Array.isArray(t)){var e=[bT(t[0]),bT(t[1])];return ch(e)?e:void 0}var n=bT(t);if(n!=null)return[n,n]}function xd(t){return t.map(bT).filter(h3e)}function Qje(t,e,n){return!n||typeof e!="number"||Ha(e)?[]:n.length?xd(n.flatMap(r=>{var i=Wn(t,r.dataKey),s,o;if(Array.isArray(i)?[s,o]=i:s=o=i,!(!cr(s)||!cr(o)))return[e-s,e+o]})):[]}var ki=t=>{var e=Ti(t),n=Jx(t);return eE(t,e,n)},rE=Me([ki],t=>t==null?void 0:t.dataKey),Zje=Me([bce,V6,ki],gce),Sce=(t,e,n,r)=>{var i={},s=e.reduce((o,a)=>{if(a.stackId==null)return o;var l=o[a.stackId];return l==null&&(l=[]),l.push(a),o[a.stackId]=l,o},i);return Object.fromEntries(Object.entries(s).map(o=>{var[a,l]=o,c=r?[...l].reverse():l,u=c.map(oN);return[a,{stackedData:RMe(t,u,n),graphicalItems:c}]}))},qk=Me([Zje,bce,Q1,cce],Sce),Ace=(t,e,n,r)=>{var{dataStartIndex:i,dataEndIndex:s}=e;if(r==null&&n!=="zAxis"){var o=LMe(t,i,s);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},eBe=Me([Br],t=>t.allowDataOverflow),oj=t=>{var e;if(t==null||!("domain"in t))return rD;if(t.domain!=null)return t.domain;if("ticks"in t&&t.ticks!=null){if(t.type==="number"){var n=xd(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t==null?void 0:t.domain)!==null&&e!==void 0?e:rD},aj=Me([Br],oj),lj=Me([aj,eBe],Kle),tBe=Me([qk,Nd,Ir,lj],Ace,{memoizeOptions:{resultEqualityCheck:lN}}),dN=t=>t.errorBars,nBe=(t,e,n)=>t.flatMap(r=>e[r.id]).filter(Boolean).filter(r=>Ece(n,r)),Gk=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var s=i.flat(),o=Math.min(...s),a=Math.max(...s);return[o,a]}},cj=(t,e,n,r,i)=>{var s,o;if(n.length>0&&t.forEach(a=>{n.forEach(l=>{var c,u,f=(c=r[l.id])===null||c===void 0?void 0:c.filter(E=>Ece(i,E)),m=Wn(a,(u=e.dataKey)!==null&&u!==void 0?u:l.dataKey),g=Qje(a,m,f);if(g.length>=2){var v=Math.min(...g),x=Math.max(...g);(s==null||v<s)&&(s=v),(o==null||x>o)&&(o=x)}var b=RW(m);b!=null&&(s=s==null?b[0]:Math.min(s,b[0]),o=o==null?b[1]:Math.max(o,b[1]))})}),(e==null?void 0:e.dataKey)!=null&&t.forEach(a=>{var l=RW(Wn(a,e.dataKey));l!=null&&(s=s==null?l[0]:Math.min(s,l[0]),o=o==null?l[1]:Math.max(o,l[1]))}),cr(s)&&cr(o))return[s,o]},rBe=Me([ij,Br,Jje,dN,Ir],cj,{memoizeOptions:{resultEqualityCheck:lN}});function iBe(t){var{value:e}=t;if(Oc(e)||e instanceof Date)return e}var sBe=(t,e,n)=>{var r=t.map(iBe).filter(i=>i!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&Boe(r))?dle(0,t.length):e.allowDuplicatedCategory?r:Array.from(new Set(r))},Tce=t=>t.referenceElements.dots,Xx=(t,e,n)=>t.filter(r=>r.ifOverflow==="extendDomain").filter(r=>e==="xAxis"?r.xAxisId===n:r.yAxisId===n),oBe=Me([Tce,Ir,Z1],Xx),kce=t=>t.referenceElements.areas,aBe=Me([kce,Ir,Z1],Xx),Cce=t=>t.referenceElements.lines,lBe=Me([Cce,Ir,Z1],Xx),Nce=(t,e)=>{if(t!=null){var n=xd(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},cBe=Me(oBe,Ir,Nce),_ce=(t,e)=>{if(t!=null){var n=xd(t.flatMap(r=>[e==="xAxis"?r.x1:r.y1,e==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},uBe=Me([aBe,Ir],_ce);function dBe(t){var e;if(t.x!=null)return xd([t.x]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.x);return n==null||n.length===0?[]:xd(n)}function fBe(t){var e;if(t.y!=null)return xd([t.y]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.y);return n==null||n.length===0?[]:xd(n)}var Ice=(t,e)=>{if(t!=null){var n=t.flatMap(r=>e==="xAxis"?dBe(r):fBe(r));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},hBe=Me([lBe,Ir],Ice),pBe=Me(cBe,hBe,uBe,(t,e,n)=>Gk(t,n,e)),uj=(t,e,n,r,i,s,o,a)=>{if(n!=null)return n;var l=o==="vertical"&&a==="xAxis"||o==="horizontal"&&a==="yAxis",c=l?Gk(r,s,i):Gk(s,i);return Aje(e,c,t.allowDataOverflow)},mBe=Me([Br,aj,lj,tBe,rBe,pBe,An,Ir],uj,{memoizeOptions:{resultEqualityCheck:lN}}),gBe=[0,1],dj=(t,e,n,r,i,s,o)=>{if(!((t==null||n==null||n.length===0)&&o===void 0)){var{dataKey:a,type:l}=t,c=Fc(e,s);if(c&&a==null){var u;return dle(0,(u=n==null?void 0:n.length)!==null&&u!==void 0?u:0)}return l==="category"?sBe(r,t,c):i==="expand"?gBe:o}},fj=Me([Br,An,ij,uN,Q1,Ir,mBe],dj),Pce=(t,e,n,r,i)=>{if(t!=null){var{scale:s,type:o}=t;if(s==="auto")return e==="radial"&&i==="radiusAxis"?"band":e==="radial"&&i==="angleAxis"?"linear":o==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":o==="category"?"band":"linear";if(typeof s=="string"){var a="scale".concat(F1(s));return a in Fb?a:"point"}}},Qx=Me([Br,An,vce,K6,Ir],Pce);function yBe(t){if(t!=null){if(t in Fb)return Fb[t]();var e="scale".concat(F1(t));if(e in Fb)return Fb[e]()}}function hj(t,e,n,r){if(!(n==null||r==null)){if(typeof t.scale=="function")return t.scale.copy().domain(n).range(r);var i=yBe(e);if(i!=null){var s=i.domain(n).range(r);return CMe(s),s}}}var pj=(t,e,n)=>{var r=oj(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&ch(t))return Oje(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&ch(t))return Mje(t,e.tickCount,e.allowDecimals)}},mj=Me([fj,eE,Qx],pj),gj=(t,e,n,r)=>{if(r!=="angleAxis"&&(t==null?void 0:t.type)==="number"&&ch(e)&&Array.isArray(n)&&n.length>0){var i=e[0],s=n[0],o=e[1],a=n[n.length-1];return[Math.min(i,s),Math.max(o,a)]}return e},xBe=Me([Br,fj,mj,Ir],gj),vBe=Me(uN,Br,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,r=Array.from(xd(t.map(f=>f.value))).sort((f,m)=>f-m),i=r[0],s=r[r.length-1];if(i==null||s==null)return 1/0;var o=s-i;if(o===0)return 1/0;for(var a=0;a<r.length-1;a++){var l=r[a],c=r[a+1];if(!(l==null||c==null)){var u=c-l;n=Math.min(n,u)}}return n/o}}),Rce=Me(vBe,An,lce,Si,(t,e,n,r,i)=>i,(t,e,n,r,i)=>{if(!cr(t))return 0;var s=e==="vertical"?r.height:r.width;if(i==="gap")return t*s/2;if(i==="no-gap"){var o=Ps(n,t*s),a=t*s/2;return a-o-(a-o)/s*o}return 0}),bBe=(t,e,n)=>{var r=_d(t,e);return r==null||typeof r.padding!="string"?0:Rce(t,"xAxis",e,n,r.padding)},wBe=(t,e,n)=>{var r=Id(t,e);return r==null||typeof r.padding!="string"?0:Rce(t,"yAxis",e,n,r.padding)},EBe=Me(_d,bBe,(t,e)=>{var n,r;if(t==null)return{left:0,right:0};var{padding:i}=t;return typeof i=="string"?{left:e,right:e}:{left:((n=i.left)!==null&&n!==void 0?n:0)+e,right:((r=i.right)!==null&&r!==void 0?r:0)+e}}),SBe=Me(Id,wBe,(t,e)=>{var n,r;if(t==null)return{top:0,bottom:0};var{padding:i}=t;return typeof i=="string"?{top:e,bottom:e}:{top:((n=i.top)!==null&&n!==void 0?n:0)+e,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+e}}),ABe=Me([Si,EBe,q2,V2,(t,e,n)=>n],(t,e,n,r,i)=>{var{padding:s}=r;return i?[s.left,n.width-s.right]:[t.left+e.left,t.left+t.width-e.right]}),TBe=Me([Si,An,SBe,q2,V2,(t,e,n)=>n],(t,e,n,r,i,s)=>{var{padding:o}=i;return s?[r.height-o.bottom,o.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),iE=(t,e,n,r)=>{var i;switch(e){case"xAxis":return ABe(t,n,r);case"yAxis":return TBe(t,n,r);case"zAxis":return(i=Z6(t,n))===null||i===void 0?void 0:i.range;case"angleAxis":return hce(t);case"radiusAxis":return pce(t,n);default:return}},Oce=Me([Br,iE],iN),fN=Me([Br,Qx,xBe,Oce],hj);Me([nE,dN,Ir],nBe);function Mce(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var hN=(t,e)=>e,pN=(t,e,n)=>n,kBe=Me(z2,hN,pN,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(Mce)),CBe=Me(H2,hN,pN,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(Mce)),Dce=(t,e)=>({width:t.width,height:e.height}),NBe=(t,e)=>{var n=typeof e.width=="number"?e.width:q1;return{width:n,height:t.height}},Lce=Me(Si,_d,Dce),_Be=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},IBe=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},PBe=Me(kd,Si,kBe,hN,pN,(t,e,n,r,i)=>{var s={},o;return n.forEach(a=>{var l=Dce(e,a);o==null&&(o=_Be(e,r,t));var c=r==="top"&&!i||r==="bottom"&&i;s[a.id]=o-Number(c)*l.height,o+=(c?-1:1)*l.height}),s}),RBe=Me(Td,Si,CBe,hN,pN,(t,e,n,r,i)=>{var s={},o;return n.forEach(a=>{var l=NBe(e,a);o==null&&(o=IBe(e,r,t));var c=r==="left"&&!i||r==="right"&&i;s[a.id]=o-Number(c)*l.width,o+=(c?-1:1)*l.width}),s}),OBe=(t,e)=>{var n=_d(t,e);if(n!=null)return PBe(t,n.orientation,n.mirror)},MBe=Me([Si,_d,OBe,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n==null?void 0:n[r];return i==null?{x:t.left,y:0}:{x:t.left,y:i}}}),DBe=(t,e)=>{var n=Id(t,e);if(n!=null)return RBe(t,n.orientation,n.mirror)},LBe=Me([Si,Id,DBe,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n==null?void 0:n[r];return i==null?{x:0,y:t.top}:{x:i,y:t.top}}}),jce=Me(Si,Id,(t,e)=>{var n=typeof e.width=="number"?e.width:q1;return{width:n,height:t.height}}),OW=(t,e,n)=>{switch(e){case"xAxis":return Lce(t,n).width;case"yAxis":return jce(t,n).height;default:return}},Bce=(t,e,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:s,dataKey:o}=n,a=Fc(t,r),l=e.map(c=>c.value);if(o&&a&&s==="category"&&i&&Boe(l))return l}},yj=Me([An,uN,Br,Ir],Bce),Uce=(t,e,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:s}=n,o=Fc(t,r);if(o&&(i==="number"||s!=="auto"))return e.map(a=>a.value)}},xj=Me([An,uN,eE,Ir],Uce),MW=Me([An,Wje,Qx,fN,yj,xj,iE,mj,Ir],(t,e,n,r,i,s,o,a,l)=>{if(e!=null){var c=Fc(t,l);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:l,categoricalDomain:s,duplicateDomain:i,isCategorical:c,niceTicks:a,range:o,realScaleType:n,scale:r}}}),jBe=(t,e,n,r,i,s,o,a,l)=>{if(!(e==null||r==null)){var c=Fc(t,l),{type:u,ticks:f,tickCount:m}=e,g=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,v=u==="category"&&r.bandwidth?r.bandwidth()/g:0;v=l==="angleAxis"&&s!=null&&s.length>=2?Ui(s[0]-s[1])*2*v:v;var x=f||i;if(x){var b=x.map((E,C)=>{var k=o?o.indexOf(E):E;return{index:C,coordinate:r(k)+v,value:E,offset:v}});return b.filter(E=>cr(E.coordinate))}return c&&a?a.map((E,C)=>({coordinate:r(E)+v,value:E,index:C,offset:v})).filter(E=>cr(E.coordinate)):r.ticks?r.ticks(m).map(E=>({coordinate:r(E)+v,value:E,offset:v})):r.domain().map((E,C)=>({coordinate:r(E)+v,value:o?o[E]:E,index:C,offset:v}))}},Fce=Me([An,eE,Qx,fN,mj,iE,yj,xj,Ir],jBe),BBe=(t,e,n,r,i,s,o)=>{if(!(e==null||n==null||r==null||r[0]===r[1])){var a=Fc(t,o),{tickCount:l}=e,c=0;return c=o==="angleAxis"&&(r==null?void 0:r.length)>=2?Ui(r[0]-r[1])*2*c:c,a&&s?s.map((u,f)=>({coordinate:n(u)+c,value:u,index:f,offset:c})):n.ticks?n.ticks(l).map(u=>({coordinate:n(u)+c,value:u,offset:c})):n.domain().map((u,f)=>({coordinate:n(u)+c,value:i?i[u]:u,index:f,offset:c}))}},Lc=Me([An,eE,fN,iE,yj,xj,Ir],BBe),jc=Me(Br,fN,(t,e)=>{if(!(t==null||e==null))return Vk(Vk({},t),{},{scale:e})}),UBe=Me([Br,Qx,fj,Oce],hj);Me((t,e,n)=>Z6(t,n),UBe,(t,e)=>{if(!(t==null||e==null))return Vk(Vk({},t),{},{scale:e})});var FBe=Me([An,z2,H2],(t,e,n)=>{switch(t){case"horizontal":return e.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),$ce=t=>t.options.defaultTooltipEventType,zce=t=>t.options.validateTooltipEventTypes;function Hce(t,e,n){if(t==null)return e;var r=t?"axis":"item";return n==null?e:n.includes(r)?r:e}function vj(t,e){var n=$ce(t),r=zce(t);return Hce(e,n,r)}function $Be(t){return Pt(e=>vj(e,t))}var Vce=(t,e)=>{var n,r=Number(e);if(!(Ha(r)||e==null))return r>=0?t==null||(n=t[r])===null||n===void 0?void 0:n.value:void 0},zBe=t=>t.tooltip.settings,If={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},HBe={itemInteraction:{click:If,hover:If},axisInteraction:{click:If,hover:If},keyboardInteraction:If,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},qce=vo({name:"tooltip",initialState:HBe,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:Tr()},replaceTooltipEntrySettings:{reducer(t,e){var{prev:n,next:r}=e.payload,i=Tl(t).tooltipItemPayloads.indexOf(n);i>-1&&(t.tooltipItemPayloads[i]=r)},prepare:Tr()},removeTooltipEntrySettings:{reducer(t,e){var n=Tl(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},prepare:Tr()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate}}}),{addTooltipEntrySettings:VBe,replaceTooltipEntrySettings:qBe,removeTooltipEntrySettings:GBe,setTooltipSettingsState:KBe,setActiveMouseOverItemIndex:Gce,mouseLeaveItem:WBe,mouseLeaveChart:Kce,setActiveClickItemIndex:YBe,setMouseOverAxisIndex:Wce,setMouseClickAxisIndex:JBe,setSyncInteraction:iD,setKeyboardInteraction:sD}=qce.actions,XBe=qce.reducer;function DW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function bA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DW(Object(n),!0).forEach(function(r){QBe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function QBe(t,e,n){return(e=ZBe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ZBe(t){var e=e7e(t,"string");return typeof e=="symbol"?e:e+""}function e7e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function t7e(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function n7e(t){return t.index!=null}var Yce=(t,e,n,r)=>{if(e==null)return If;var i=t7e(t,e,n);if(i==null)return If;if(i.active)return i;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var s=t.settings.active===!0;if(n7e(i)){if(s)return bA(bA({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r,graphicalItemId:void 0};return bA(bA({},If),{},{coordinate:i.coordinate})};function r7e(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var e=t.valueOf();return Number.isFinite(e)?e:void 0}var n=Number(t);return Number.isFinite(n)?n:void 0}function i7e(t,e){var n=r7e(t),r=e[0],i=e[1];if(n===void 0)return!1;var s=Math.min(r,i),o=Math.max(r,i);return n>=s&&n<=o}function s7e(t,e,n){if(n==null||e==null)return!0;var r=Wn(t,e);return r==null||!ch(n)?!0:i7e(r,n)}var bj=(t,e,n,r)=>{var i=t==null?void 0:t.index;if(i==null)return null;var s=Number(i);if(!cr(s))return i;var o=0,a=1/0;e.length>0&&(a=e.length-1);var l=Math.max(o,Math.min(s,a)),c=e[l];return c==null||s7e(c,n,r)?String(l):null},Jce=(t,e,n,r,i,s,o,a)=>{if(!(s==null||a==null)){var l=o[0],c=l==null?void 0:a(l.positions,s);if(c!=null)return c;var u=i==null?void 0:i[Number(s)];if(u)switch(n){case"horizontal":return{x:u.coordinate,y:(r.top+e)/2};default:return{x:(r.left+t)/2,y:u.coordinate}}}},Xce=(t,e,n,r)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var i;if(n==="hover"?i=t.itemInteraction.hover.graphicalItemId:i=t.itemInteraction.click.graphicalItemId,i==null&&r!=null){var s=t.tooltipItemPayloads[0];return s!=null?[s]:[]}return t.tooltipItemPayloads.filter(o=>{var a;return((a=o.settings)===null||a===void 0?void 0:a.graphicalItemId)===i})},sE=t=>t.options.tooltipPayloadSearcher,Zx=t=>t.tooltip;function LW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function jW(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LW(Object(n),!0).forEach(function(r){o7e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function o7e(t,e,n){return(e=a7e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a7e(t){var e=l7e(t,"string");return typeof e=="symbol"?e:e+""}function l7e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function c7e(t,e){return t??e}var Qce=(t,e,n,r,i,s,o)=>{if(!(e==null||s==null)){var{chartData:a,computedData:l,dataStartIndex:c,dataEndIndex:u}=n,f=[];return t.reduce((m,g)=>{var v,{dataDefinedOnItem:x,settings:b}=g,E=c7e(x,a),C=Array.isArray(E)?Pae(E,c,u):E,k=(v=b==null?void 0:b.dataKey)!==null&&v!==void 0?v:r,O=b==null?void 0:b.nameKey,U;if(r&&Array.isArray(C)&&!Array.isArray(C[0])&&o==="axis"?U=Uoe(C,r,i):U=s(C,e,l,O),Array.isArray(U))U.forEach($=>{var V=jW(jW({},b),{},{name:$.name,unit:$.unit,color:void 0,fill:void 0});m.push(zG({tooltipEntrySettings:V,dataKey:$.dataKey,payload:$.payload,value:Wn($.payload,$.dataKey),name:$.name}))});else{var R;m.push(zG({tooltipEntrySettings:b,dataKey:k,payload:U,value:Wn(U,k),name:(R=Wn(U,O))!==null&&R!==void 0?R:b==null?void 0:b.name}))}return m},f)}},wj=Me([ki,An,vce,K6,Ti],Pce),u7e=Me([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),d7e=Me([Ti,Jx],ej),ev=Me([u7e,ki,d7e],tj,{memoizeOptions:{resultEqualityCheck:cN}}),f7e=Me([ev],t=>t.filter(aN)),h7e=Me([ev],nj,{memoizeOptions:{resultEqualityCheck:cN}}),tv=Me([h7e,Nd],rj),p7e=Me([f7e,Nd,ki],gce),Ej=Me([tv,ki,ev],sj),Zce=Me([ki],oj),m7e=Me([ki],t=>t.allowDataOverflow),eue=Me([Zce,m7e],Kle),g7e=Me([ev],t=>t.filter(aN)),y7e=Me([p7e,g7e,Q1,cce],Sce),x7e=Me([y7e,Nd,Ti,eue],Ace),v7e=Me([ev],wce),b7e=Me([tv,ki,v7e,dN,Ti],cj,{memoizeOptions:{resultEqualityCheck:lN}}),w7e=Me([Tce,Ti,Jx],Xx),E7e=Me([w7e,Ti],Nce),S7e=Me([kce,Ti,Jx],Xx),A7e=Me([S7e,Ti],_ce),T7e=Me([Cce,Ti,Jx],Xx),k7e=Me([T7e,Ti],Ice),C7e=Me([E7e,k7e,A7e],Gk),N7e=Me([ki,Zce,eue,x7e,b7e,C7e,An,Ti],uj),oE=Me([ki,An,tv,Ej,Q1,Ti,N7e],dj),_7e=Me([oE,ki,wj],pj),I7e=Me([ki,oE,_7e,Ti],gj),tue=t=>{var e=Ti(t),n=Jx(t),r=!1;return iE(t,e,n,r)},nue=Me([ki,tue],iN),rue=Me([ki,wj,I7e,nue],hj),P7e=Me([An,Ej,ki,Ti],Bce),R7e=Me([An,Ej,ki,Ti],Uce),O7e=(t,e,n,r,i,s,o,a)=>{if(e){var{type:l}=e,c=Fc(t,a);if(r){var u=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,f=l==="category"&&r.bandwidth?r.bandwidth()/u:0;return f=a==="angleAxis"&&i!=null&&(i==null?void 0:i.length)>=2?Ui(i[0]-i[1])*2*f:f,c&&o?o.map((m,g)=>({coordinate:r(m)+f,value:m,index:g,offset:f})):r.domain().map((m,g)=>({coordinate:r(m)+f,value:s?s[m]:m,index:g,offset:f}))}}},Pd=Me([An,ki,wj,rue,tue,P7e,R7e,Ti],O7e),Sj=Me([$ce,zce,zBe],(t,e,n)=>Hce(n.shared,t,e)),iue=t=>t.tooltip.settings.trigger,Aj=t=>t.tooltip.settings.defaultIndex,aE=Me([Zx,Sj,iue,Aj],Yce),uh=Me([aE,tv,rE,oE],bj),sue=Me([Pd,uh],Vce),Tj=Me([aE],t=>{if(t)return t.dataKey}),M7e=Me([aE],t=>{if(t)return t.graphicalItemId}),oue=Me([Zx,Sj,iue,Aj],Xce),D7e=Me([Td,kd,An,Si,Pd,Aj,oue,sE],Jce),L7e=Me([aE,D7e],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),j7e=Me([aE],t=>{var e;return(e=t==null?void 0:t.active)!==null&&e!==void 0?e:!1}),B7e=Me([oue,uh,Nd,rE,sue,sE,Sj],Qce),U7e=Me([B7e],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function BW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function UW(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BW(Object(n),!0).forEach(function(r){F7e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function F7e(t,e,n){return(e=$7e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $7e(t){var e=z7e(t,"string");return typeof e=="symbol"?e:e+""}function z7e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var H7e=()=>Pt(ki),V7e=()=>{var t=H7e(),e=Pt(Pd),n=Pt(rue);return lh(!t||!n?void 0:UW(UW({},t),{},{scale:n}),e)};function FW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function K0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FW(Object(n),!0).forEach(function(r){q7e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function q7e(t,e,n){return(e=G7e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function G7e(t){var e=K7e(t,"string");return typeof e=="symbol"?e:e+""}function K7e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var W7e=(t,e,n,r)=>{var i=e.find(s=>s&&s.index===n);if(i){if(t==="horizontal")return{x:i.coordinate,y:r.chartY};if(t==="vertical")return{x:r.chartX,y:i.coordinate}}return{x:0,y:0}},Y7e=(t,e,n,r)=>{var i=e.find(c=>c&&c.index===n);if(i){if(t==="centric"){var s=i.coordinate,{radius:o}=r;return K0(K0(K0({},r),mi(r.cx,r.cy,o,s)),{},{angle:s,radius:o})}var a=i.coordinate,{angle:l}=r;return K0(K0(K0({},r),mi(r.cx,r.cy,a,l)),{},{angle:l,radius:a})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function J7e(t,e){var{chartX:n,chartY:r}=t;return n>=e.left&&n<=e.left+e.width&&r>=e.top&&r<=e.top+e.height}var aue=(t,e,n,r,i)=>{var s,o=(s=e==null?void 0:e.length)!==null&&s!==void 0?s:0;if(o<=1||t==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var a=0;a<o;a++){var l,c,u,f,m,g=a>0?(l=n[a-1])===null||l===void 0?void 0:l.coordinate:(c=n[o-1])===null||c===void 0?void 0:c.coordinate,v=(u=n[a])===null||u===void 0?void 0:u.coordinate,x=a>=o-1?(f=n[0])===null||f===void 0?void 0:f.coordinate:(m=n[a+1])===null||m===void 0?void 0:m.coordinate,b=void 0;if(!(g==null||v==null||x==null))if(Ui(v-g)!==Ui(x-v)){var E=[];if(Ui(x-v)===Ui(i[1]-i[0])){b=x;var C=v+i[1]-i[0];E[0]=Math.min(C,(C+g)/2),E[1]=Math.max(C,(C+g)/2)}else{b=g;var k=x+i[1]-i[0];E[0]=Math.min(v,(k+v)/2),E[1]=Math.max(v,(k+v)/2)}var O=[Math.min(v,(b+v)/2),Math.max(v,(b+v)/2)];if(t>O[0]&&t<=O[1]||t>=E[0]&&t<=E[1]){var U;return(U=n[a])===null||U===void 0?void 0:U.index}}else{var R=Math.min(g,x),$=Math.max(g,x);if(t>(R+v)/2&&t<=($+v)/2){var V;return(V=n[a])===null||V===void 0?void 0:V.index}}}else if(e)for(var j=0;j<o;j++){var F=e[j];if(F!=null){var W=e[j+1],H=e[j-1];if(j===0&&W!=null&&t<=(F.coordinate+W.coordinate)/2||j===o-1&&H!=null&&t>(F.coordinate+H.coordinate)/2||j>0&&j<o-1&&H!=null&&W!=null&&t>(F.coordinate+H.coordinate)/2&&t<=(F.coordinate+W.coordinate)/2)return F.index}}return-1},lue=()=>Pt(K6),kj=(t,e)=>e,cue=(t,e,n)=>n,Cj=(t,e,n,r)=>r,X7e=Me(Pd,t=>O2(t,e=>e.coordinate)),Nj=Me([Zx,kj,cue,Cj],Yce),_j=Me([Nj,tv,rE,oE],bj),Q7e=(t,e,n)=>{if(e!=null){var r=Zx(t);return e==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},uue=Me([Zx,kj,cue,Cj],Xce),Kk=Me([Td,kd,An,Si,Pd,Cj,uue,sE],Jce),Z7e=Me([Nj,Kk],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),due=Me([Pd,_j],Vce),eUe=Me([uue,_j,Nd,rE,due,sE,kj],Qce),tUe=Me([Nj,_j],(t,e)=>({isActive:t.active&&e!=null,activeIndex:e})),nUe=(t,e,n,r,i,s,o)=>{if(!(!t||!n||!r||!i)&&J7e(t,o)){var a=jMe(t,e),l=aue(a,s,i,n,r),c=W7e(e,i,l,t);return{activeIndex:String(l),activeCoordinate:c}}},rUe=(t,e,n,r,i,s,o)=>{if(!(!t||!r||!i||!s||!n)){var a=FLe(t,n);if(a){var l=BMe(a,e),c=aue(l,o,s,r,i),u=Y7e(e,s,c,a);return{activeIndex:String(c),activeCoordinate:u}}}},iUe=(t,e,n,r,i,s,o,a)=>{if(!(!t||!e||!r||!i||!s))return e==="horizontal"||e==="vertical"?nUe(t,e,r,i,s,o,a):rUe(t,e,n,r,i,s,o)},sUe=Me(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,n)=>n,(t,e,n)=>{if(e!=null){var r=t[e];if(r!=null)return n?r.panoramaElement:r.element}}),oUe=Me(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(r=>parseInt(r,10)).concat(Object.values(ri)),n=Array.from(new Set(e));return n.sort((r,i)=>r-i)},{memoizeOptions:{resultEqualityCheck:Hje}});function $W(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zW(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$W(Object(n),!0).forEach(function(r){aUe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$W(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function aUe(t,e,n){return(e=lUe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lUe(t){var e=cUe(t,"string");return typeof e=="symbol"?e:e+""}function cUe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var uUe={},dUe={zIndexMap:Object.values(ri).reduce((t,e)=>zW(zW({},t),{},{[e]:{element:void 0,panoramaElement:void 0,consumers:0}}),uUe)},fUe=new Set(Object.values(ri));function hUe(t){return fUe.has(t)}var fue=vo({name:"zIndex",initialState:dUe,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]?t.zIndexMap[n].consumers+=1:t.zIndexMap[n]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:Tr()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(t.zIndexMap[n].consumers-=1,t.zIndexMap[n].consumers<=0&&!hUe(n)&&delete t.zIndexMap[n])},prepare:Tr()},registerZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n,element:r,isPanorama:i}=e.payload;t.zIndexMap[n]?i?t.zIndexMap[n].panoramaElement=r:t.zIndexMap[n].element=r:t.zIndexMap[n]={consumers:0,element:i?void 0:r,panoramaElement:i?r:void 0}},prepare:Tr()},unregisterZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(e.payload.isPanorama?t.zIndexMap[n].panoramaElement=void 0:t.zIndexMap[n].element=void 0)},prepare:Tr()}}}),{registerZIndexPortal:pUe,unregisterZIndexPortal:mUe,registerZIndexPortalElement:gUe,unregisterZIndexPortalElement:yUe}=fue.actions,xUe=fue.reducer;function Zs(t){var{zIndex:e,children:n}=t,r=mDe(),i=r&&e!==void 0&&e!==0,s=$i(),o=_r();T.useLayoutEffect(()=>i?(o(pUe({zIndex:e})),()=>{o(mUe({zIndex:e}))}):$1,[o,e,i]);var a=Pt(l=>sUe(l,e,s));return i?a?Dm.createPortal(n,a):null:n}function oD(){return oD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},oD.apply(null,arguments)}function HW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HW(Object(n),!0).forEach(function(r){vUe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vUe(t,e,n){return(e=bUe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bUe(t){var e=wUe(t,"string");return typeof e=="symbol"?e:e+""}function wUe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function EUe(t){var{cursor:e,cursorComp:n,cursorProps:r}=t;return T.isValidElement(e)?T.cloneElement(e,r):T.createElement(n,r)}function SUe(t){var e,{coordinate:n,payload:r,index:i,offset:s,tooltipAxisBandSize:o,layout:a,cursor:l,tooltipEventType:c,chartName:u}=t,f=n,m=r,g=i;if(!l||!f||u!=="ScatterChart"&&c!=="axis")return null;var v,x,b;if(u==="ScatterChart")v=f,x=eLe,b=ri.cursorLine;else if(u==="BarChart")v=tLe(a,f,s,o),x=ole,b=ri.cursorRectangle;else if(a==="radial"&&zoe(f)){var{cx:E,cy:C,radius:k,startAngle:O,endAngle:U}=lle(f);v={cx:E,cy:C,startAngle:O,endAngle:U,innerRadius:k,outerRadius:k},x=ule,b=ri.cursorLine}else v={points:VLe(a,f,s)},x=Xg,b=ri.cursorLine;var R=typeof l=="object"&&"className"in l?l.className:void 0,$=wA(wA(wA(wA({stroke:"#ccc",pointerEvents:"none"},s),v),gm(l)),{},{payload:m,payloadIndex:g,className:Rn("recharts-tooltip-cursor",R)});return T.createElement(Zs,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:b},T.createElement(EUe,{cursor:l,cursorComp:x,cursorProps:$}))}function AUe(t){var e=V7e(),n=zae(),r=xh(),i=lue();return e==null||n==null||r==null||i==null?null:T.createElement(SUe,oD({},t,{offset:n,layout:r,tooltipAxisBandSize:e,chartName:i}))}var hue=T.createContext(null),TUe=()=>T.useContext(hue),fO={exports:{}},VW;function kUe(){return VW||(VW=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function s(l,c,u,f,m){if(typeof u!="function")throw new TypeError("The listener must be a function");var g=new i(u,f||l,m),v=n?n+c:c;return l._events[v]?l._events[v].fn?l._events[v]=[l._events[v],g]:l._events[v].push(g):(l._events[v]=g,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],u,f;if(this._eventsCount===0)return c;for(f in u=this._events)e.call(u,f)&&c.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},a.prototype.listeners=function(c){var u=n?n+c:c,f=this._events[u];if(!f)return[];if(f.fn)return[f.fn];for(var m=0,g=f.length,v=new Array(g);m<g;m++)v[m]=f[m].fn;return v},a.prototype.listenerCount=function(c){var u=n?n+c:c,f=this._events[u];return f?f.fn?1:f.length:0},a.prototype.emit=function(c,u,f,m,g,v){var x=n?n+c:c;if(!this._events[x])return!1;var b=this._events[x],E=arguments.length,C,k;if(b.fn){switch(b.once&&this.removeListener(c,b.fn,void 0,!0),E){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,u),!0;case 3:return b.fn.call(b.context,u,f),!0;case 4:return b.fn.call(b.context,u,f,m),!0;case 5:return b.fn.call(b.context,u,f,m,g),!0;case 6:return b.fn.call(b.context,u,f,m,g,v),!0}for(k=1,C=new Array(E-1);k<E;k++)C[k-1]=arguments[k];b.fn.apply(b.context,C)}else{var O=b.length,U;for(k=0;k<O;k++)switch(b[k].once&&this.removeListener(c,b[k].fn,void 0,!0),E){case 1:b[k].fn.call(b[k].context);break;case 2:b[k].fn.call(b[k].context,u);break;case 3:b[k].fn.call(b[k].context,u,f);break;case 4:b[k].fn.call(b[k].context,u,f,m);break;default:if(!C)for(U=1,C=new Array(E-1);U<E;U++)C[U-1]=arguments[U];b[k].fn.apply(b[k].context,C)}}return!0},a.prototype.on=function(c,u,f){return s(this,c,u,f,!1)},a.prototype.once=function(c,u,f){return s(this,c,u,f,!0)},a.prototype.removeListener=function(c,u,f,m){var g=n?n+c:c;if(!this._events[g])return this;if(!u)return o(this,g),this;var v=this._events[g];if(v.fn)v.fn===u&&(!m||v.once)&&(!f||v.context===f)&&o(this,g);else{for(var x=0,b=[],E=v.length;x<E;x++)(v[x].fn!==u||m&&!v[x].once||f&&v[x].context!==f)&&b.push(v[x]);b.length?this._events[g]=b.length===1?b[0]:b:o(this,g)}return this},a.prototype.removeAllListeners=function(c){var u;return c?(u=n?n+c:c,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(fO)),fO.exports}var CUe=kUe();const Ij=us(CUe);var Yw=new Ij,aD="recharts.syncEvent.tooltip",qW="recharts.syncEvent.brush";function mN(t,e){if(e){var n=Number.parseInt(e,10);if(!Ha(n))return t==null?void 0:t[n]}}var NUe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},pue=vo({name:"options",initialState:NUe,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),_Ue=pue.reducer,{createEventEmitter:IUe}=pue.actions;function PUe(t){return t.tooltip.syncInteraction}var RUe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},mue=vo({name:"chartData",initialState:RUe,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:r}=e.payload;n!=null&&(t.dataStartIndex=n),r!=null&&(t.dataEndIndex=r)}}}),{setChartData:GW,setDataStartEndIndexes:OUe,setComputedData:Fmt}=mue.actions,MUe=mue.reducer,DUe=["x","y"];function KW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function W0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KW(Object(n),!0).forEach(function(r){LUe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function LUe(t,e,n){return(e=jUe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jUe(t){var e=BUe(t,"string");return typeof e=="symbol"?e:e+""}function BUe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function UUe(t,e){if(t==null)return{};var n,r,i=FUe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function FUe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function $Ue(){var t=Pt(W6),e=Pt(Y6),n=_r(),r=Pt(uce),i=Pt(Pd),s=xh(),o=G2(),a=Pt(l=>l.rootProps.className);T.useEffect(()=>{if(t==null)return $1;var l=(c,u,f)=>{if(e!==f&&t===c){if(r==="index"){var m;if(o&&u!==null&&u!==void 0&&(m=u.payload)!==null&&m!==void 0&&m.coordinate&&u.payload.sourceViewBox){var g=u.payload.coordinate,{x:v,y:x}=g,b=UUe(g,DUe),{x:E,y:C,width:k,height:O}=u.payload.sourceViewBox,U=W0(W0({},b),{},{x:o.x+(k?(v-E)/k:0)*o.width,y:o.y+(O?(x-C)/O:0)*o.height});n(W0(W0({},u),{},{payload:W0(W0({},u.payload),{},{coordinate:U})}))}else n(u);return}if(i!=null){var R;if(typeof r=="function"){var $={activeTooltipIndex:u.payload.index==null?void 0:Number(u.payload.index),isTooltipActive:u.payload.active,activeIndex:u.payload.index==null?void 0:Number(u.payload.index),activeLabel:u.payload.label,activeDataKey:u.payload.dataKey,activeCoordinate:u.payload.coordinate},V=r(i,$);R=i[V]}else r==="value"&&(R=i.find(D=>String(D.value)===u.payload.label));var{coordinate:j}=u.payload;if(R==null||u.payload.active===!1||j==null||o==null){n(iD({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:F,y:W}=j,H=Math.min(F,o.x+o.width),B=Math.min(W,o.y+o.height),A={x:s==="horizontal"?R.coordinate:H,y:s==="horizontal"?B:R.coordinate},I=iD({active:u.payload.active,coordinate:A,dataKey:u.payload.dataKey,index:String(R.index),label:u.payload.label,sourceViewBox:u.payload.sourceViewBox,graphicalItemId:u.payload.graphicalItemId});n(I)}}};return Yw.on(aD,l),()=>{Yw.off(aD,l)}},[a,n,e,t,r,i,s,o])}function zUe(){var t=Pt(W6),e=Pt(Y6),n=_r();T.useEffect(()=>{if(t==null)return $1;var r=(i,s,o)=>{e!==o&&t===i&&n(OUe(s))};return Yw.on(qW,r),()=>{Yw.off(qW,r)}},[n,e,t])}function HUe(){var t=_r();T.useEffect(()=>{t(IUe())},[t]),$Ue(),zUe()}function VUe(t,e,n,r,i,s){var o=Pt(g=>Q7e(g,t,e)),a=Pt(Y6),l=Pt(W6),c=Pt(uce),u=Pt(PUe),f=u==null?void 0:u.active,m=G2();T.useEffect(()=>{if(!f&&l!=null&&a!=null){var g=iD({active:s,coordinate:n,dataKey:o,index:i,label:typeof r=="number"?String(r):r,sourceViewBox:m,graphicalItemId:void 0});Yw.emit(aD,l,g,a)}},[f,n,o,i,r,a,l,c,s,m])}function WW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function YW(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WW(Object(n),!0).forEach(function(r){qUe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qUe(t,e,n){return(e=GUe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function GUe(t){var e=KUe(t,"string");return typeof e=="symbol"?e:e+""}function KUe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function WUe(t){return t.dataKey}function YUe(t,e){return T.isValidElement(t)?T.cloneElement(t,e):typeof t=="function"?T.createElement(t,e):T.createElement(ODe,e)}var JW=[],JUe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Wk(t){var e,n,r=yi(t,JUe),{active:i,allowEscapeViewBox:s,animationDuration:o,animationEasing:a,content:l,filterNull:c,isAnimationActive:u,offset:f,payloadUniqBy:m,position:g,reverseDirection:v,useTranslate3d:x,wrapperStyle:b,cursor:E,shared:C,trigger:k,defaultIndex:O,portal:U,axisId:R}=r,$=_r(),V=typeof O=="number"?String(O):O;T.useEffect(()=>{$(KBe({shared:C,trigger:k,axisId:R,active:i,defaultIndex:V}))},[$,C,k,R,i,V]);var j=G2(),F=tle(),W=$Be(C),{activeIndex:H,isActive:B}=(e=Pt(oe=>tUe(oe,W,k,V)))!==null&&e!==void 0?e:{},A=Pt(oe=>eUe(oe,W,k,V)),I=Pt(oe=>due(oe,W,k,V)),D=Pt(oe=>Z7e(oe,W,k,V)),z=A,G=TUe(),te=(n=i??B)!==null&&n!==void 0?n:!1,[K,q]=E4e([z,te]),M=W==="axis"?I:void 0;VUe(W,k,D,M,H,te);var _=U??G;if(_==null||j==null||W==null)return null;var Y=z??JW;te||(Y=JW),c&&Y.length&&(Y=W3e(Y.filter(oe=>oe.value!=null&&(oe.hide!==!0||r.includeHidden)),m,WUe));var X=Y.length>0,re=T.createElement(FDe,{allowEscapeViewBox:s,animationDuration:o,animationEasing:a,isAnimationActive:u,active:te,coordinate:D,hasPayload:X,offset:f,position:g,reverseDirection:v,useTranslate3d:x,viewBox:j,wrapperStyle:b,lastBoundingBox:K,innerRef:q,hasPortalFromProps:!!U},YUe(l,YW(YW({},r),{},{payload:Y,label:M,active:te,activeIndex:H,coordinate:D,accessibilityLayer:F})));return T.createElement(T.Fragment,null,Dm.createPortal(re,_),te&&T.createElement(AUe,{cursor:E,tooltipEventType:W,coordinate:D,payload:Y,index:H}))}var nv=t=>null;nv.displayName="Cell";function XUe(t,e,n){return(e=QUe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function QUe(t){var e=ZUe(t,"string");return typeof e=="symbol"?e:e+""}function ZUe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class eFe{constructor(e){XUe(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;r!=null&&this.cache.delete(r)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function XW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function tFe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XW(Object(n),!0).forEach(function(r){nFe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nFe(t,e,n){return(e=rFe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rFe(t){var e=iFe(t,"string");return typeof e=="symbol"?e:e+""}function iFe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var sFe={cacheSize:2e3,enableCache:!0},gue=tFe({},sFe),QW=new eFe(gue.cacheSize),oFe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},ZW="recharts_measurement_span";function aFe(t,e){var n=e.fontSize||"",r=e.fontFamily||"",i=e.fontWeight||"",s=e.fontStyle||"",o=e.letterSpacing||"",a=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(s,"|").concat(o,"|").concat(a)}var eY=(t,e)=>{try{var n=document.getElementById(ZW);n||(n=document.createElement("span"),n.setAttribute("id",ZW),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,oFe,e),n.textContent="".concat(t);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},ew=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||K1.isSsr)return{width:0,height:0};if(!gue.enableCache)return eY(e,n);var r=aFe(e,n),i=QW.get(r);if(i)return i;var s=eY(e,n);return QW.set(r,s),s},yue;function lFe(t,e,n){return(e=cFe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cFe(t){var e=uFe(t,"string");return typeof e=="symbol"?e:e+""}function uFe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var tY=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,nY=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,dFe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,fFe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,hFe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},pFe=["cm","mm","pt","pc","in","Q","px"];function mFe(t){return pFe.includes(t)}var Ng="NaN";function gFe(t,e){return t*hFe[e]}class ts{static parse(e){var n,[,r,i]=(n=fFe.exec(e))!==null&&n!==void 0?n:[];return r==null?ts.NaN:new ts(parseFloat(r),i??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,Ha(e)&&(this.unit=""),n!==""&&!dFe.test(n)&&(this.num=NaN,this.unit=""),mFe(n)&&(this.num=gFe(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new ts(NaN,""):new ts(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new ts(NaN,""):new ts(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new ts(NaN,""):new ts(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new ts(NaN,""):new ts(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Ha(this.num)}}yue=ts;lFe(ts,"NaN",new yue(NaN,""));function xue(t){if(t==null||t.includes(Ng))return Ng;for(var e=t;e.includes("*")||e.includes("/");){var n,[,r,i,s]=(n=tY.exec(e))!==null&&n!==void 0?n:[],o=ts.parse(r??""),a=ts.parse(s??""),l=i==="*"?o.multiply(a):o.divide(a);if(l.isNaN())return Ng;e=e.replace(tY,l.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var c,[,u,f,m]=(c=nY.exec(e))!==null&&c!==void 0?c:[],g=ts.parse(u??""),v=ts.parse(m??""),x=f==="+"?g.add(v):g.subtract(v);if(x.isNaN())return Ng;e=e.replace(nY,x.toString())}return e}var rY=/\(([^()]*)\)/;function yFe(t){for(var e=t,n;(n=rY.exec(e))!=null;){var[,r]=n;e=e.replace(rY,xue(r))}return e}function xFe(t){var e=t.replace(/\s+/g,"");return e=yFe(e),e=xue(e),e}function vFe(t){try{return xFe(t)}catch{return Ng}}function hO(t){var e=vFe(t.slice(5,-1));return e===Ng?"":e}var bFe=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],wFe=["dx","dy","angle","className","breakAll"];function lD(){return lD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lD.apply(null,arguments)}function iY(t,e){if(t==null)return{};var n,r,i=EFe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function EFe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var vue=/[ \f\n\r\t\v\u2028\u2029]+/,bue=t=>{var{children:e,breakAll:n,style:r}=t;try{var i=[];Er(e)||(n?i=e.toString().split(""):i=e.toString().split(vue));var s=i.map(a=>({word:a,width:ew(a,r).width})),o=n?0:ew("",r).width;return{wordsWithComputedWidth:s,spaceWidth:o}}catch{return null}};function SFe(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var wue=(t,e,n,r)=>t.reduce((i,s)=>{var{word:o,width:a}=s,l=i[i.length-1];if(l&&a!=null&&(e==null||r||l.width+a+n<Number(e)))l.words.push(o),l.width+=a+n;else{var c={words:[o],width:a};i.push(c)}return i},[]),Eue=t=>t.reduce((e,n)=>e.width>n.width?e:n),AFe="",sY=(t,e,n,r,i,s,o,a)=>{var l=t.slice(0,e),c=bue({breakAll:n,style:r,children:l+AFe});if(!c)return[!1,[]];var u=wue(c.wordsWithComputedWidth,s,o,a),f=u.length>i||Eue(u).width>Number(s);return[f,u]},TFe=(t,e,n,r,i)=>{var{maxLines:s,children:o,style:a,breakAll:l}=t,c=wt(s),u=String(o),f=wue(e,r,n,i);if(!c||i)return f;var m=f.length>s||Eue(f).width>Number(r);if(!m)return f;for(var g=0,v=u.length-1,x=0,b;g<=v&&x<=u.length-1;){var E=Math.floor((g+v)/2),C=E-1,[k,O]=sY(u,C,l,a,s,r,n,i),[U]=sY(u,E,l,a,s,r,n,i);if(!k&&!U&&(g=E+1),k&&U&&(v=E-1),!k&&U){b=O;break}x++}return b||f},oY=t=>{var e=Er(t)?[]:t.toString().split(vue);return[{words:e,width:void 0}]},kFe=t=>{var{width:e,scaleToFit:n,children:r,style:i,breakAll:s,maxLines:o}=t;if((e||n)&&!K1.isSsr){var a,l,c=bue({breakAll:s,children:r,style:i});if(c){var{wordsWithComputedWidth:u,spaceWidth:f}=c;a=u,l=f}else return oY(r);return TFe({breakAll:s,children:r,maxLines:o,style:i},a,l,e,!!n)}return oY(r)},Sue="#808080",CFe={angle:0,breakAll:!1,capHeight:"0.71em",fill:Sue,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},gN=T.forwardRef((t,e)=>{var n=yi(t,CFe),{x:r,y:i,lineHeight:s,capHeight:o,fill:a,scaleToFit:l,textAnchor:c,verticalAnchor:u}=n,f=iY(n,bFe),m=T.useMemo(()=>kFe({breakAll:f.breakAll,children:f.children,maxLines:f.maxLines,scaleToFit:l,style:f.style,width:f.width}),[f.breakAll,f.children,f.maxLines,l,f.style,f.width]),{dx:g,dy:v,angle:x,className:b,breakAll:E}=f,C=iY(f,wFe);if(!Oc(r)||!Oc(i)||m.length===0)return null;var k=Number(r)+(wt(g)?g:0),O=Number(i)+(wt(v)?v:0);if(!cr(k)||!cr(O))return null;var U;switch(u){case"start":U=hO("calc(".concat(o,")"));break;case"middle":U=hO("calc(".concat((m.length-1)/2," * -").concat(s," + (").concat(o," / 2))"));break;default:U=hO("calc(".concat(m.length-1," * -").concat(s,")"));break}var R=[];if(l){var $=m[0].width,{width:V}=f;R.push("scale(".concat(wt(V)&&wt($)?V/$:1,")"))}return x&&R.push("rotate(".concat(x,", ").concat(k,", ").concat(O,")")),R.length&&(C.transform=R.join(" ")),T.createElement("text",lD({},Ms(C),{ref:e,x:k,y:O,className:Rn("recharts-text",b),textAnchor:c,fill:a.includes("url")?Sue:a}),m.map((j,F)=>{var W=j.words.join(E?"":" ");return T.createElement("tspan",{x:k,dy:F===0?U:s,key:"".concat(W,"-").concat(F)},W)}))});gN.displayName="Text";var NFe=["labelRef"],_Fe=["content"];function aY(t,e){if(t==null)return{};var n,r,i=IFe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function IFe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function lY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Qr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lY(Object(n),!0).forEach(function(r){PFe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function PFe(t,e,n){return(e=RFe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function RFe(t){var e=OFe(t,"string");return typeof e=="symbol"?e:e+""}function OFe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Fu(){return Fu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Fu.apply(null,arguments)}var Aue=T.createContext(null),MFe=t=>{var{x:e,y:n,upperWidth:r,lowerWidth:i,width:s,height:o,children:a}=t,l=T.useMemo(()=>({x:e,y:n,upperWidth:r,lowerWidth:i,width:s,height:o}),[e,n,r,i,s,o]);return T.createElement(Aue.Provider,{value:l},a)},Tue=()=>{var t=T.useContext(Aue),e=G2();return t||$ae(e)},DFe=T.createContext(null),LFe=()=>{var t=T.useContext(DFe),e=Pt(mce);return t||e},jFe=t=>{var{value:e,formatter:n}=t,r=Er(t.children)?e:t.children;return typeof n=="function"?n(r):r},Pj=t=>t!=null&&typeof t=="function",BFe=(t,e)=>{var n=Ui(e-t),r=Math.min(Math.abs(e-t),360);return n*r},UFe=(t,e,n,r,i)=>{var{offset:s,className:o}=t,{cx:a,cy:l,innerRadius:c,outerRadius:u,startAngle:f,endAngle:m,clockWise:g}=i,v=(c+u)/2,x=BFe(f,m),b=x>=0?1:-1,E,C;switch(e){case"insideStart":E=f+b*s,C=g;break;case"insideEnd":E=m-b*s,C=!g;break;case"end":E=m+b*s,C=g;break;default:throw new Error("Unsupported position ".concat(e))}C=x<=0?C:!C;var k=mi(a,l,v,E),O=mi(a,l,v,E+(C?1:-1)*359),U="M".concat(k.x,",").concat(k.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(C?0:1,`,
    `).concat(O.x,",").concat(O.y),R=Er(t.id)?Dw("recharts-radial-line-"):t.id;return T.createElement("text",Fu({},r,{dominantBaseline:"central",className:Rn("recharts-radial-bar-label",o)}),T.createElement("defs",null,T.createElement("path",{id:R,d:U})),T.createElement("textPath",{xlinkHref:"#".concat(R)},n))},FFe=(t,e,n)=>{var{cx:r,cy:i,innerRadius:s,outerRadius:o,startAngle:a,endAngle:l}=t,c=(a+l)/2;if(n==="outside"){var{x:u,y:f}=mi(r,i,o+e,c);return{x:u,y:f,textAnchor:u>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var m=(s+o)/2,{x:g,y:v}=mi(r,i,m,c);return{x:g,y:v,textAnchor:"middle",verticalAnchor:"middle"}},cD=t=>"cx"in t&&wt(t.cx),$Fe=(t,e)=>{var{parentViewBox:n,offset:r,position:i}=t,s;n!=null&&!cD(n)&&(s=n);var{x:o,y:a,upperWidth:l,lowerWidth:c,height:u}=e,f=o,m=o+(l-c)/2,g=(f+m)/2,v=(l+c)/2,x=f+l/2,b=u>=0?1:-1,E=b*r,C=b>0?"end":"start",k=b>0?"start":"end",O=l>=0?1:-1,U=O*r,R=O>0?"end":"start",$=O>0?"start":"end";if(i==="top"){var V={x:f+l/2,y:a-E,textAnchor:"middle",verticalAnchor:C};return Qr(Qr({},V),s?{height:Math.max(a-s.y,0),width:l}:{})}if(i==="bottom"){var j={x:m+c/2,y:a+u+E,textAnchor:"middle",verticalAnchor:k};return Qr(Qr({},j),s?{height:Math.max(s.y+s.height-(a+u),0),width:c}:{})}if(i==="left"){var F={x:g-U,y:a+u/2,textAnchor:R,verticalAnchor:"middle"};return Qr(Qr({},F),s?{width:Math.max(F.x-s.x,0),height:u}:{})}if(i==="right"){var W={x:g+v+U,y:a+u/2,textAnchor:$,verticalAnchor:"middle"};return Qr(Qr({},W),s?{width:Math.max(s.x+s.width-W.x,0),height:u}:{})}var H=s?{width:v,height:u}:{};return i==="insideLeft"?Qr({x:g+U,y:a+u/2,textAnchor:$,verticalAnchor:"middle"},H):i==="insideRight"?Qr({x:g+v-U,y:a+u/2,textAnchor:R,verticalAnchor:"middle"},H):i==="insideTop"?Qr({x:f+l/2,y:a+E,textAnchor:"middle",verticalAnchor:k},H):i==="insideBottom"?Qr({x:m+c/2,y:a+u-E,textAnchor:"middle",verticalAnchor:C},H):i==="insideTopLeft"?Qr({x:f+U,y:a+E,textAnchor:$,verticalAnchor:k},H):i==="insideTopRight"?Qr({x:f+l-U,y:a+E,textAnchor:R,verticalAnchor:k},H):i==="insideBottomLeft"?Qr({x:m+U,y:a+u-E,textAnchor:$,verticalAnchor:C},H):i==="insideBottomRight"?Qr({x:m+c-U,y:a+u-E,textAnchor:R,verticalAnchor:C},H):i&&typeof i=="object"&&(wt(i.x)||hd(i.x))&&(wt(i.y)||hd(i.y))?Qr({x:o+Ps(i.x,v),y:a+Ps(i.y,u),textAnchor:"end",verticalAnchor:"end"},H):Qr({x,y:a+u/2,textAnchor:"middle",verticalAnchor:"middle"},H)},zFe={angle:0,offset:5,zIndex:ri.label,position:"middle",textBreakAll:!1};function kf(t){var e=yi(t,zFe),{viewBox:n,position:r,value:i,children:s,content:o,className:a="",textBreakAll:l,labelRef:c}=e,u=LFe(),f=Tue(),m=r==="center"?f:u??f,g,v,x;if(n==null?g=m:cD(n)?g=n:g=$ae(n),!g||Er(i)&&Er(s)&&!T.isValidElement(o)&&typeof o!="function")return null;var b=Qr(Qr({},e),{},{viewBox:g});if(T.isValidElement(o)){var{labelRef:E}=b,C=aY(b,NFe);return T.cloneElement(o,C)}if(typeof o=="function"){var{content:k}=b,O=aY(b,_Fe);if(v=T.createElement(o,O),T.isValidElement(v))return v}else v=jFe(e);var U=Ms(e);if(cD(g)){if(r==="insideStart"||r==="insideEnd"||r==="end")return UFe(e,r,v,U,g);x=FFe(g,e.offset,e.position)}else x=$Fe(e,g);return T.createElement(Zs,{zIndex:e.zIndex},T.createElement(gN,Fu({ref:c,className:Rn("recharts-label",a)},U,x,{textAnchor:SFe(U.textAnchor)?U.textAnchor:x.textAnchor,breakAll:l}),v))}kf.displayName="Label";var HFe=(t,e,n)=>{if(!t)return null;var r={viewBox:e,labelRef:n};return t===!0?T.createElement(kf,Fu({key:"label-implicit"},r)):Oc(t)?T.createElement(kf,Fu({key:"label-implicit",value:t},r)):T.isValidElement(t)?t.type===kf?T.cloneElement(t,Qr({key:"label-implicit"},r)):T.createElement(kf,Fu({key:"label-implicit",content:t},r)):Pj(t)?T.createElement(kf,Fu({key:"label-implicit",content:t},r)):t&&typeof t=="object"?T.createElement(kf,Fu({},t,{key:"label-implicit"},r)):null};function VFe(t){var{label:e,labelRef:n}=t,r=Tue();return HFe(e,r,n)||null}var pO={},mO={},cY;function qFe(){return cY||(cY=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(mO)),mO}var gO={},uY;function GFe(){return uY||(uY=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})(gO)),gO}var dY;function KFe(){return dY||(dY=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=qFe(),n=GFe(),r=a6();function i(s){if(r.isArrayLike(s))return e.last(n.toArray(s))}t.last=i})(pO)),pO}var yO,fY;function WFe(){return fY||(fY=1,yO=KFe().last),yO}var YFe=WFe();const JFe=us(YFe);var XFe=["valueAccessor"],QFe=["dataKey","clockWise","id","textBreakAll","zIndex"];function Yk(){return Yk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yk.apply(null,arguments)}function hY(t,e){if(t==null)return{};var n,r,i=ZFe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function ZFe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var e9e=t=>Array.isArray(t.value)?JFe(t.value):t.value,kue=T.createContext(void 0),Rj=kue.Provider,Cue=T.createContext(void 0),t9e=Cue.Provider;function n9e(){return T.useContext(kue)}function r9e(){return T.useContext(Cue)}function wT(t){var{valueAccessor:e=e9e}=t,n=hY(t,XFe),{dataKey:r,clockWise:i,id:s,textBreakAll:o,zIndex:a}=n,l=hY(n,QFe),c=n9e(),u=r9e(),f=c||u;return!f||!f.length?null:T.createElement(Zs,{zIndex:a??ri.label},T.createElement(Wr,{className:"recharts-label-list"},f.map((m,g)=>{var v,x=Er(r)?e(m,g):Wn(m&&m.payload,r),b=Er(s)?{}:{id:"".concat(s,"-").concat(g)};return T.createElement(kf,Yk({key:"label-".concat(g)},Ms(m),l,b,{fill:(v=n.fill)!==null&&v!==void 0?v:m.fill,parentViewBox:m.parentViewBox,value:x,textBreakAll:o,viewBox:m.viewBox,index:g,zIndex:0}))})))}wT.displayName="LabelList";function yN(t){var{label:e}=t;return e?e===!0?T.createElement(wT,{key:"labelList-implicit"}):T.isValidElement(e)||Pj(e)?T.createElement(wT,{key:"labelList-implicit",content:e}):typeof e=="object"?T.createElement(wT,Yk({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}function uD(){return uD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uD.apply(null,arguments)}var Nue=t=>{var{cx:e,cy:n,r,className:i}=t,s=Rn("recharts-dot",i);return wt(e)&&wt(n)&&wt(r)?T.createElement("circle",uD({},Ys(t),o6(t),{className:s,cx:e,cy:n,r})):null},_ue=t=>t.graphicalItems.polarItems,i9e=Me([Ir,Z1],ej),xN=Me([_ue,Br,i9e],tj),s9e=Me([xN],nj),vN=Me([s9e,rN],rj),o9e=Me([vN,Br,xN],sj);Me([vN,Br,xN],(t,e,n)=>n.length>0?t.flatMap(r=>n.flatMap(i=>{var s,o=Wn(r,(s=e.dataKey)!==null&&s!==void 0?s:i.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):(e==null?void 0:e.dataKey)!=null?t.map(r=>({value:Wn(r,e.dataKey),errorDomain:[]})):t.map(r=>({value:r,errorDomain:[]})));var pY=()=>{},a9e=Me([vN,Br,xN,dN,Ir],cj),l9e=Me([Br,aj,lj,pY,a9e,pY,An,Ir],uj),Iue=Me([Br,An,vN,o9e,Q1,Ir,l9e],dj),c9e=Me([Iue,Br,Qx],pj);Me([Br,Iue,c9e,Ir],gj);var u9e={radiusAxis:{},angleAxis:{}},Pue=vo({name:"polarAxis",initialState:u9e,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:$mt,removeRadiusAxis:zmt,addAngleAxis:Hmt,removeAngleAxis:Vmt}=Pue.actions,d9e=Pue.reducer;function mY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gY(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mY(Object(n),!0).forEach(function(r){f9e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function f9e(t,e,n){return(e=h9e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h9e(t){var e=p9e(t,"string");return typeof e=="symbol"?e:e+""}function p9e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var m9e=(t,e)=>e,Oj=Me([_ue,m9e],(t,e)=>t.filter(n=>n.type==="pie").find(n=>n.id===e)),g9e=[],Mj=(t,e,n)=>(n==null?void 0:n.length)===0?g9e:n,Rue=Me([rN,Oj,Mj],(t,e,n)=>{var{chartData:r}=t;if(e!=null){var i;if((e==null?void 0:e.data)!=null&&e.data.length>0?i=e.data:i=r,(!i||!i.length)&&n!=null&&(i=n.map(s=>gY(gY({},e.presentationProps),s.props))),i!=null)return i}}),y9e=Me([Rue,Oj,Mj],(t,e,n)=>{if(!(t==null||e==null))return t.map((r,i)=>{var s,o=Wn(r,e.nameKey,e.name),a;return n!=null&&(s=n[i])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?a=n[i].props.fill:typeof r=="object"&&r!=null&&"fill"in r?a=r.fill:a=e.fill,{value:yh(o,e.dataKey),color:a,payload:r,type:e.legendType}})}),x9e=Me([Rue,Oj,Mj,Si],(t,e,n,r)=>{if(!(e==null||t==null))return b$e({offset:r,pieSettings:e,displayedData:t,cells:n})}),xO={exports:{}},nr={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yY;function v9e(){if(yY)return nr;yY=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.suspense_list"),u=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),m=Symbol.for("react.view_transition"),g=Symbol.for("react.client.reference");function v(x){if(typeof x=="object"&&x!==null){var b=x.$$typeof;switch(b){case t:switch(x=x.type,x){case n:case i:case r:case l:case c:case m:return x;default:switch(x=x&&x.$$typeof,x){case o:case a:case f:case u:return x;case s:return x;default:return b}}case e:return b}}}return nr.ContextConsumer=s,nr.ContextProvider=o,nr.Element=t,nr.ForwardRef=a,nr.Fragment=n,nr.Lazy=f,nr.Memo=u,nr.Portal=e,nr.Profiler=i,nr.StrictMode=r,nr.Suspense=l,nr.SuspenseList=c,nr.isContextConsumer=function(x){return v(x)===s},nr.isContextProvider=function(x){return v(x)===o},nr.isElement=function(x){return typeof x=="object"&&x!==null&&x.$$typeof===t},nr.isForwardRef=function(x){return v(x)===a},nr.isFragment=function(x){return v(x)===n},nr.isLazy=function(x){return v(x)===f},nr.isMemo=function(x){return v(x)===u},nr.isPortal=function(x){return v(x)===e},nr.isProfiler=function(x){return v(x)===i},nr.isStrictMode=function(x){return v(x)===r},nr.isSuspense=function(x){return v(x)===l},nr.isSuspenseList=function(x){return v(x)===c},nr.isValidElementType=function(x){return typeof x=="string"||typeof x=="function"||x===n||x===i||x===r||x===l||x===c||typeof x=="object"&&x!==null&&(x.$$typeof===f||x.$$typeof===u||x.$$typeof===o||x.$$typeof===s||x.$$typeof===a||x.$$typeof===g||x.getModuleId!==void 0)},nr.typeOf=v,nr}var xY;function b9e(){return xY||(xY=1,xO.exports=v9e()),xO.exports}var w9e=b9e(),vY=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",bY=null,vO=null,Oue=t=>{if(t===bY&&Array.isArray(vO))return vO;var e=[];return T.Children.forEach(t,n=>{Er(n)||(w9e.isFragment(n)?e=e.concat(Oue(n.props.children)):e.push(n))}),vO=e,bY=t,e};function Dj(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(i=>vY(i)):r=[vY(e)],Oue(t).forEach(i=>{var s=xm(i,"type.displayName")||xm(i,"type.name");s&&r.indexOf(s)!==-1&&n.push(i)}),n}var Lj=t=>t&&typeof t=="object"&&"clipDot"in t?!!t.clipDot:!0,bO={},wY;function E9e(){return wY||(wY=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){var i;if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const s=n[Symbol.toStringTag];return s==null||!((i=Object.getOwnPropertyDescriptor(n,Symbol.toStringTag))!=null&&i.writable)?!1:n.toString()===`[object ${s}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}t.isPlainObject=e})(bO)),bO}var wO,EY;function S9e(){return EY||(EY=1,wO=E9e().isPlainObject),wO}var A9e=S9e();const T9e=us(A9e);var SY,AY,TY,kY,CY;function NY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _Y(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NY(Object(n),!0).forEach(function(r){k9e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function k9e(t,e,n){return(e=C9e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function C9e(t){var e=N9e(t,"string");return typeof e=="symbol"?e:e+""}function N9e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Jk(){return Jk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jk.apply(null,arguments)}function bb(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var IY=(t,e,n,r,i)=>{var s=n-r,o;return o=Vr(SY||(SY=bb(["M ",",",""])),t,e),o+=Vr(AY||(AY=bb(["L ",",",""])),t+n,e),o+=Vr(TY||(TY=bb(["L ",",",""])),t+n-s/2,e+i),o+=Vr(kY||(kY=bb(["L ",",",""])),t+n-s/2-r,e+i),o+=Vr(CY||(CY=bb(["L ",","," Z"])),t,e),o},_9e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},I9e=t=>{var e=yi(t,_9e),{x:n,y:r,upperWidth:i,lowerWidth:s,height:o,className:a}=e,{animationEasing:l,animationDuration:c,animationBegin:u,isUpdateAnimationActive:f}=e,m=T.useRef(null),[g,v]=T.useState(-1),x=T.useRef(i),b=T.useRef(s),E=T.useRef(o),C=T.useRef(n),k=T.useRef(r),O=Gx(t,"trapezoid-");if(T.useEffect(()=>{if(m.current&&m.current.getTotalLength)try{var A=m.current.getTotalLength();A&&v(A)}catch{}},[]),n!==+n||r!==+r||i!==+i||s!==+s||o!==+o||i===0&&s===0||o===0)return null;var U=Rn("recharts-trapezoid",a);if(!f)return T.createElement("g",null,T.createElement("path",Jk({},Ms(e),{className:U,d:IY(n,r,i,s,o)})));var R=x.current,$=b.current,V=E.current,j=C.current,F=k.current,W="0px ".concat(g===-1?1:g,"px"),H="".concat(g,"px 0px"),B=nle(["strokeDasharray"],c,l);return T.createElement(qx,{animationId:O,key:O,canBegin:g>0,duration:c,easing:l,isActive:f,begin:u},A=>{var I=qn(R,i,A),D=qn($,s,A),z=qn(V,o,A),G=qn(j,n,A),te=qn(F,r,A);m.current&&(x.current=I,b.current=D,E.current=z,C.current=G,k.current=te);var K=A>0?{transition:B,strokeDasharray:H}:{strokeDasharray:W};return T.createElement("path",Jk({},Ms(e),{className:U,d:IY(G,te,I,D,z),ref:m,style:_Y(_Y({},K),e.style)}))})},P9e=["option","shapeType","activeClassName"];function R9e(t,e){if(t==null)return{};var n,r,i=O9e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function O9e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function PY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Xk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PY(Object(n),!0).forEach(function(r){M9e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function M9e(t,e,n){return(e=D9e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function D9e(t){var e=L9e(t,"string");return typeof e=="symbol"?e:e+""}function L9e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function j9e(t,e){return Xk(Xk({},e),t)}function B9e(t,e){return t==="symbols"}function RY(t){var{shapeType:e,elementProps:n}=t;switch(e){case"rectangle":return T.createElement(ole,n);case"trapezoid":return T.createElement(I9e,n);case"sector":return T.createElement(ule,n);case"symbols":if(B9e(e))return T.createElement($oe,n);break;case"curve":return T.createElement(Xg,n);default:return null}}function U9e(t){return T.isValidElement(t)?t.props:t}function jj(t){var{option:e,shapeType:n,activeClassName:r="recharts-active-shape"}=t,i=R9e(t,P9e),s;if(T.isValidElement(e))s=T.cloneElement(e,Xk(Xk({},i),U9e(e)));else if(typeof e=="function")s=e(i,i.index);else if(T9e(e)&&typeof e!="boolean"){var o=j9e(e,i);s=T.createElement(RY,{shapeType:n,elementProps:o})}else{var a=i;s=T.createElement(RY,{shapeType:n,elementProps:a})}return i.isActive?T.createElement(Wr,{className:r},s):s}var Bj=(t,e,n)=>{var r=_r();return(i,s)=>o=>{t==null||t(i,s,o),r(Gce({activeIndex:String(s),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}},Uj=t=>{var e=_r();return(n,r)=>i=>{t==null||t(n,r,i),e(WBe())}},Fj=(t,e,n)=>{var r=_r();return(i,s)=>o=>{t==null||t(i,s,o),r(YBe({activeIndex:String(s),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}};function bN(t){var{tooltipEntrySettings:e}=t,n=_r(),r=$i(),i=T.useRef(null);return T.useLayoutEffect(()=>{r||(i.current===null?n(VBe(e)):i.current!==e&&n(qBe({prev:i.current,next:e})),i.current=e)},[e,n,r]),T.useLayoutEffect(()=>()=>{i.current&&(n(GBe(i.current)),i.current=null)},[n]),null}function $j(t){var{legendPayload:e}=t,n=_r(),r=$i(),i=T.useRef(null);return T.useLayoutEffect(()=>{r||(i.current===null?n(Qae(e)):i.current!==e&&n(Zae({prev:i.current,next:e})),i.current=e)},[n,r,e]),T.useLayoutEffect(()=>()=>{i.current&&(n(ele(i.current)),i.current=null)},[n]),null}function F9e(t){var{legendPayload:e}=t,n=_r(),r=Pt(An),i=T.useRef(null);return T.useLayoutEffect(()=>{r!=="centric"&&r!=="radial"||(i.current===null?n(Qae(e)):i.current!==e&&n(Zae({prev:i.current,next:e})),i.current=e)},[n,r,e]),T.useLayoutEffect(()=>()=>{i.current&&(n(ele(i.current)),i.current=null)},[n]),null}var EO,$9e=()=>{var[t]=T.useState(()=>Dw("uid-"));return t},z9e=(EO=KC.useId)!==null&&EO!==void 0?EO:$9e;function H9e(t,e){var n=z9e();return e||(t?"".concat(t,"-").concat(n):n)}var V9e=T.createContext(void 0),wN=t=>{var{id:e,type:n,children:r}=t,i=H9e("recharts-".concat(n),e);return T.createElement(V9e.Provider,{value:i},r(i))},q9e={cartesianItems:[],polarItems:[]},Mue=vo({name:"graphicalItems",initialState:q9e,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:Tr()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:n,next:r}=e.payload,i=Tl(t).cartesianItems.indexOf(n);i>-1&&(t.cartesianItems[i]=r)},prepare:Tr()},removeCartesianGraphicalItem:{reducer(t,e){var n=Tl(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},prepare:Tr()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:Tr()},removePolarGraphicalItem:{reducer(t,e){var n=Tl(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)},prepare:Tr()}}}),{addCartesianGraphicalItem:G9e,replaceCartesianGraphicalItem:K9e,removeCartesianGraphicalItem:W9e,addPolarGraphicalItem:Y9e,removePolarGraphicalItem:J9e}=Mue.actions,X9e=Mue.reducer,Q9e=t=>{var e=_r(),n=T.useRef(null);return T.useLayoutEffect(()=>{n.current===null?e(G9e(t)):n.current!==t&&e(K9e({prev:n.current,next:t})),n.current=t},[e,t]),T.useLayoutEffect(()=>()=>{n.current&&(e(W9e(n.current)),n.current=null)},[e]),null},zj=T.memo(Q9e);function Z9e(t){var e=_r();return T.useLayoutEffect(()=>(e(Y9e(t)),()=>{e(J9e(t))}),[e,t]),null}var e$e=["key"],t$e=["onMouseEnter","onClick","onMouseLeave"],n$e=["id"],r$e=["id"];function OY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Kr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OY(Object(n),!0).forEach(function(r){i$e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function i$e(t,e,n){return(e=s$e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s$e(t){var e=o$e(t,"string");return typeof e=="symbol"?e:e+""}function o$e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dh(){return dh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dh.apply(null,arguments)}function EN(t,e){if(t==null)return{};var n,r,i=a$e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function a$e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function l$e(t){var e=T.useMemo(()=>Dj(t.children,nv),[t.children]),n=Pt(r=>y9e(r,t.id,e));return n==null?null:T.createElement(F9e,{legendPayload:n})}var c$e=T.memo(t=>{var{dataKey:e,nameKey:n,sectors:r,stroke:i,strokeWidth:s,fill:o,name:a,hide:l,tooltipType:c,id:u}=t,f={dataDefinedOnItem:r.map(m=>m.tooltipPayload),positions:r.map(m=>m.tooltipPosition),settings:{stroke:i,strokeWidth:s,fill:o,dataKey:e,nameKey:n,name:yh(a,e),hide:l,type:c,color:o,unit:"",graphicalItemId:u}};return T.createElement(bN,{tooltipEntrySettings:f})}),u$e=(t,e)=>t>e?"start":t<e?"end":"middle",d$e=(t,e,n)=>Ps(typeof e=="function"?e(t):e,n,n*.8),f$e=(t,e,n)=>{var{top:r,left:i,width:s,height:o}=e,a=ale(s,o),l=i+Ps(t.cx,s,s/2),c=r+Ps(t.cy,o,o/2),u=Ps(t.innerRadius,a,0),f=d$e(n,t.outerRadius,a),m=t.maxRadius||Math.sqrt(s*s+o*o)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:f,maxRadius:m}},h$e=(t,e)=>{var n=Ui(e-t),r=Math.min(Math.abs(e-t),360);return n*r};function p$e(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}var m$e=(t,e)=>{if(T.isValidElement(t))return T.cloneElement(t,e);if(typeof t=="function")return t(e);var n=Rn("recharts-pie-label-line",typeof t!="boolean"?t.className:""),{key:r}=e,i=EN(e,e$e);return T.createElement(Xg,dh({},i,{type:"linear",className:n}))},g$e=(t,e,n)=>{if(T.isValidElement(t))return T.cloneElement(t,e);var r=n;if(typeof t=="function"&&(r=t(e),T.isValidElement(r)))return r;var i=Rn("recharts-pie-label-text",p$e(t));return T.createElement(gN,dh({},e,{alignmentBaseline:"middle",className:i}),r)};function y$e(t){var{sectors:e,props:n,showLabels:r}=t,{label:i,labelLine:s,dataKey:o}=n;if(!r||!i||!e)return null;var a=Ys(n),l=gm(i),c=gm(s),u=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,f=e.map((m,g)=>{var v=(m.startAngle+m.endAngle)/2,x=mi(m.cx,m.cy,m.outerRadius+u,v),b=Kr(Kr(Kr(Kr({},a),m),{},{stroke:"none"},l),{},{index:g,textAnchor:u$e(x.x,m.cx)},x),E=Kr(Kr(Kr(Kr({},a),m),{},{fill:"none",stroke:m.fill},c),{},{index:g,points:[mi(m.cx,m.cy,m.outerRadius,v),x],key:"line"});return T.createElement(Zs,{zIndex:ri.label,key:"label-".concat(m.startAngle,"-").concat(m.endAngle,"-").concat(m.midAngle,"-").concat(g)},T.createElement(Wr,null,s&&m$e(s,E),g$e(i,b,Wn(m,o))))});return T.createElement(Wr,{className:"recharts-pie-labels"},f)}function x$e(t){var{sectors:e,props:n,showLabels:r}=t,{label:i}=n;return typeof i=="object"&&i!=null&&"position"in i?T.createElement(yN,{label:i}):T.createElement(y$e,{sectors:e,props:n,showLabels:r})}function v$e(t){var{sectors:e,activeShape:n,inactiveShape:r,allOtherPieProps:i,shape:s,id:o}=t,a=Pt(uh),l=Pt(Tj),c=Pt(M7e),{onMouseEnter:u,onClick:f,onMouseLeave:m}=i,g=EN(i,t$e),v=Bj(u,i.dataKey,o),x=Uj(m),b=Fj(f,i.dataKey,o);return e==null||e.length===0?null:T.createElement(T.Fragment,null,e.map((E,C)=>{if((E==null?void 0:E.startAngle)===0&&(E==null?void 0:E.endAngle)===0&&e.length!==1)return null;var k=c==null||c===o,O=String(C)===a&&(l==null||i.dataKey===l)&&k,U=a?r:null,R=n&&O?n:U,$=Kr(Kr({},E),{},{stroke:E.stroke,tabIndex:-1,[Lae]:C,[jae]:o});return T.createElement(Wr,dh({key:"sector-".concat(E==null?void 0:E.startAngle,"-").concat(E==null?void 0:E.endAngle,"-").concat(E.midAngle,"-").concat(C),tabIndex:-1,className:"recharts-pie-sector"},R2(g,E,C),{onMouseEnter:v(E,C),onMouseLeave:x(E,C),onClick:b(E,C)}),T.createElement(jj,dh({option:s??R,index:C,shapeType:"sector",isActive:O},$)))}))}function b$e(t){var e,{pieSettings:n,displayedData:r,cells:i,offset:s}=t,{cornerRadius:o,startAngle:a,endAngle:l,dataKey:c,nameKey:u,tooltipType:f}=n,m=Math.abs(n.minAngle),g=h$e(a,l),v=Math.abs(g),x=r.length<=1?0:(e=n.paddingAngle)!==null&&e!==void 0?e:0,b=r.filter(R=>Wn(R,c,0)!==0).length,E=(v>=360?b:b-1)*x,C=v-b*m-E,k=r.reduce((R,$)=>{var V=Wn($,c,0);return R+(wt(V)?V:0)},0),O;if(k>0){var U;O=r.map((R,$)=>{var V=Wn(R,c,0),j=Wn(R,u,$),F=f$e(n,s,R),W=(wt(V)?V:0)/k,H,B=Kr(Kr({},R),i&&i[$]&&i[$].props);$?H=U.endAngle+Ui(g)*x*(V!==0?1:0):H=a;var A=H+Ui(g)*((V!==0?m:0)+W*C),I=(H+A)/2,D=(F.innerRadius+F.outerRadius)/2,z=[{name:j,value:V,payload:B,dataKey:c,type:f,graphicalItemId:n.id}],G=mi(F.cx,F.cy,D,I);return U=Kr(Kr(Kr(Kr({},n.presentationProps),{},{percent:W,cornerRadius:typeof o=="string"?parseFloat(o):o,name:j,tooltipPayload:z,midAngle:I,middleRadius:D,tooltipPosition:G},B),F),{},{value:V,dataKey:c,startAngle:H,endAngle:A,payload:B,paddingAngle:Ui(g)*x}),U})}return O}function w$e(t){var{showLabels:e,sectors:n,children:r}=t,i=T.useMemo(()=>!e||!n?[]:n.map(s=>({value:s.value,payload:s.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:s.cx,cy:s.cy,innerRadius:s.innerRadius,outerRadius:s.outerRadius,startAngle:s.startAngle,endAngle:s.endAngle,clockWise:!1},fill:s.fill})),[n,e]);return T.createElement(t9e,{value:e?i:void 0},r)}function E$e(t){var{props:e,previousSectorsRef:n,id:r}=t,{sectors:i,isAnimationActive:s,animationBegin:o,animationDuration:a,animationEasing:l,activeShape:c,inactiveShape:u,onAnimationStart:f,onAnimationEnd:m}=e,g=Gx(e,"recharts-pie-"),v=n.current,[x,b]=T.useState(!1),E=T.useCallback(()=>{typeof m=="function"&&m(),b(!1)},[m]),C=T.useCallback(()=>{typeof f=="function"&&f(),b(!0)},[f]);return T.createElement(w$e,{showLabels:!x,sectors:i},T.createElement(qx,{animationId:g,begin:o,duration:a,isActive:s,easing:l,onAnimationStart:C,onAnimationEnd:E,key:g},k=>{var O=[],U=i&&i[0],R=U==null?void 0:U.startAngle;return i==null||i.forEach(($,V)=>{var j=v&&v[V],F=V>0?xm($,"paddingAngle",0):0;if(j){var W=qn(j.endAngle-j.startAngle,$.endAngle-$.startAngle,k),H=Kr(Kr({},$),{},{startAngle:R+F,endAngle:R+W+F});O.push(H),R=H.endAngle}else{var{endAngle:B,startAngle:A}=$,I=qn(0,B-A,k),D=Kr(Kr({},$),{},{startAngle:R+F,endAngle:R+I+F});O.push(D),R=D.endAngle}}),n.current=O,T.createElement(Wr,null,T.createElement(v$e,{sectors:O,activeShape:c,inactiveShape:u,allOtherPieProps:e,shape:e.shape,id:r}))}),T.createElement(x$e,{showLabels:!x,sectors:i,props:e}),e.children)}var S$e={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:ri.area};function A$e(t){var{id:e}=t,n=EN(t,n$e),{hide:r,className:i,rootTabIndex:s}=t,o=T.useMemo(()=>Dj(t.children,nv),[t.children]),a=Pt(u=>x9e(u,e,o)),l=T.useRef(null),c=Rn("recharts-pie",i);return r||a==null?(l.current=null,T.createElement(Wr,{tabIndex:s,className:c})):T.createElement(Zs,{zIndex:t.zIndex},T.createElement(c$e,{dataKey:t.dataKey,nameKey:t.nameKey,sectors:a,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,tooltipType:t.tooltipType,id:e}),T.createElement(Wr,{tabIndex:s,className:c},T.createElement(E$e,{props:Kr(Kr({},n),{},{sectors:a}),previousSectorsRef:l,id:e})))}function Hj(t){var e=yi(t,S$e),{id:n}=e,r=EN(e,r$e),i=Ys(r);return T.createElement(wN,{id:n,type:"pie"},s=>T.createElement(T.Fragment,null,T.createElement(Z9e,{type:"pie",id:s,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:i,maxRadius:e.maxRadius}),T.createElement(l$e,dh({},r,{id:s})),T.createElement(A$e,dh({},r,{id:s}))))}Hj.displayName="Pie";var T$e=["points"];function MY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function SO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MY(Object(n),!0).forEach(function(r){k$e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function k$e(t,e,n){return(e=C$e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function C$e(t){var e=N$e(t,"string");return typeof e=="symbol"?e:e+""}function N$e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Qk(){return Qk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qk.apply(null,arguments)}function _$e(t,e){if(t==null)return{};var n,r,i=I$e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function I$e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function P$e(t){var{option:e,dotProps:n,className:r}=t;if(T.isValidElement(e))return T.cloneElement(e,n);if(typeof e=="function")return e(n);var i=Rn(r,typeof e!="boolean"?e.className:""),s=n??{},{points:o}=s,a=_$e(s,T$e);return T.createElement(Nue,Qk({},a,{className:i}))}function R$e(t,e){return t==null?!1:e?!0:t.length===1}function Due(t){var{points:e,dot:n,className:r,dotClassName:i,dataKey:s,baseProps:o,needClip:a,clipPathId:l,zIndex:c=ri.scatter}=t;if(!R$e(e,n))return null;var u=Lj(n),f=bOe(n),m=e.map((v,x)=>{var b,E,C=SO(SO(SO({r:3},o),f),{},{index:x,cx:(b=v.x)!==null&&b!==void 0?b:void 0,cy:(E=v.y)!==null&&E!==void 0?E:void 0,dataKey:s,value:v.value,payload:v.payload,points:e});return T.createElement(P$e,{key:"dot-".concat(x),option:n,dotProps:C,className:i})}),g={};return a&&l!=null&&(g.clipPath="url(#clipPath-".concat(u?"":"dots-").concat(l,")")),T.createElement(Zs,{zIndex:c},T.createElement(Wr,Qk({className:r},g),m))}function DY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function LY(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DY(Object(n),!0).forEach(function(r){O$e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function O$e(t,e,n){return(e=M$e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function M$e(t){var e=D$e(t,"string");return typeof e=="symbol"?e:e+""}function D$e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Lue=0,L$e={xAxis:{},yAxis:{},zAxis:{}},jue=vo({name:"cartesianAxis",initialState:L$e,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:Tr()},replaceXAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.xAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.xAxis[n.id],t.xAxis[r.id]=r)},prepare:Tr()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:Tr()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:Tr()},replaceYAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.yAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.yAxis[n.id],t.yAxis[r.id]=r)},prepare:Tr()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:Tr()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:Tr()},replaceZAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.zAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.zAxis[n.id],t.zAxis[r.id]=r)},prepare:Tr()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:Tr()},updateYAxisWidth(t,e){var{id:n,width:r}=e.payload,i=t.yAxis[n];if(i){var s=i.widthHistory||[];if(s.length===3&&s[0]===s[2]&&r===s[1]&&r!==i.width&&Math.abs(r-s[0])<=1)return;var o=[...s,r].slice(-3);t.yAxis[n]=LY(LY({},t.yAxis[n]),{},{width:r,widthHistory:o})}}}}),{addXAxis:j$e,replaceXAxis:B$e,removeXAxis:U$e,addYAxis:F$e,replaceYAxis:$$e,removeYAxis:z$e,addZAxis:qmt,replaceZAxis:Gmt,removeZAxis:Kmt,updateYAxisWidth:H$e}=jue.actions,V$e=jue.reducer,q$e=Me([Si],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),G$e=Me([q$e,Td,kd],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),SN=()=>Pt(G$e),K$e=()=>Pt(U7e);function jY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function AO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jY(Object(n),!0).forEach(function(r){W$e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function W$e(t,e,n){return(e=Y$e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Y$e(t){var e=J$e(t,"string");return typeof e=="symbol"?e:e+""}function J$e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var X$e=t=>{var{point:e,childIndex:n,mainColor:r,activeDot:i,dataKey:s,clipPath:o}=t;if(i===!1||e.x==null||e.y==null)return null;var a={index:n,dataKey:s,cx:e.x,cy:e.y,r:4,fill:r??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},l=AO(AO(AO({},a),gm(i)),o6(i)),c;return T.isValidElement(i)?c=T.cloneElement(i,l):typeof i=="function"?c=i(l):c=T.createElement(Nue,l),T.createElement(Wr,{className:"recharts-active-dot",clipPath:o},c)};function dD(t){var{points:e,mainColor:n,activeDot:r,itemDataKey:i,clipPath:s,zIndex:o=ri.activeDot}=t,a=Pt(uh),l=K$e();if(e==null||l==null)return null;var c=e.find(u=>l.includes(u.payload));return Er(c)?null:T.createElement(Zs,{zIndex:o},T.createElement(X$e,{point:c,childIndex:Number(a),mainColor:n,dataKey:i,activeDot:r,clipPath:s}))}var BY=(t,e,n)=>{var r=n??t;if(!Er(r))return Ps(r,e,0)},Q$e=(t,e,n)=>{var r={},i=t.filter(aN),s=t.filter(c=>c.stackId==null),o=i.reduce((c,u)=>(c[u.stackId]||(c[u.stackId]=[]),c[u.stackId].push(u),c),r),a=Object.entries(o).map(c=>{var[u,f]=c,m=f.map(v=>v.dataKey),g=BY(e,n,f[0].barSize);return{stackId:u,dataKeys:m,barSize:g}}),l=s.map(c=>{var u=[c.dataKey].filter(m=>m!=null),f=BY(e,n,c.barSize);return{stackId:void 0,dataKeys:u,barSize:f}});return[...a,...l]};function UY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function EA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UY(Object(n),!0).forEach(function(r){Z$e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Z$e(t,e,n){return(e=eze(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function eze(t){var e=tze(t,"string");return typeof e=="symbol"?e:e+""}function tze(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nze(t,e,n,r,i){var s=r.length;if(!(s<1)){var o=Ps(t,n,0,!0),a,l=[];if(cr(r[0].barSize)){var c=!1,u=n/s,f=r.reduce((E,C)=>E+(C.barSize||0),0);f+=(s-1)*o,f>=n&&(f-=(s-1)*o,o=0),f>=n&&u>0&&(c=!0,u*=.9,f=s*u);var m=(n-f)/2>>0,g={offset:m-o,size:0};a=r.reduce((E,C)=>{var k,O={stackId:C.stackId,dataKeys:C.dataKeys,position:{offset:g.offset+g.size+o,size:c?u:(k=C.barSize)!==null&&k!==void 0?k:0}},U=[...E,O];return g=U[U.length-1].position,U},l)}else{var v=Ps(e,n,0,!0);n-2*v-(s-1)*o<=0&&(o=0);var x=(n-2*v-(s-1)*o)/s;x>1&&(x>>=0);var b=cr(i)?Math.min(x,i):x;a=r.reduce((E,C,k)=>[...E,{stackId:C.stackId,dataKeys:C.dataKeys,position:{offset:v+(x+o)*k+(x-b)/2,size:b}}],l)}return a}}var rze=(t,e,n,r,i,s,o)=>{var a=Er(o)?e:o,l=nze(n,r,i!==s?i:s,t,a);return i!==s&&l!=null&&(l=l.map(c=>EA(EA({},c),{},{position:EA(EA({},c.position),{},{offset:c.position.offset-i/2})}))),l},ize=(t,e)=>{var n=oN(e);if(!(!t||n==null||e==null)){var{stackId:r}=e;if(r!=null){var i=t[r];if(i){var{stackedData:s}=i;if(s)return s.find(o=>o.key===n)}}}};function sze(t,e){return t&&typeof t=="object"&&"zIndex"in t&&typeof t.zIndex=="number"&&cr(t.zIndex)?t.zIndex:e}var Bue=t=>{var{chartData:e}=t,n=_r(),r=$i();return T.useEffect(()=>r?()=>{}:(n(GW(e)),()=>{n(GW(void 0))}),[e,n,r]),null},FY={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},Uue=vo({name:"brush",initialState:FY,reducers:{setBrushSettings(t,e){return e.payload==null?FY:e.payload}}}),{setBrushSettings:Wmt}=Uue.actions,oze=Uue.reducer;function aze(t,e,n){return(e=lze(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lze(t){var e=cze(t,"string");return typeof e=="symbol"?e:e+""}function cze(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class Vj{static create(e){return new Vj(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(r)switch(r){case"start":return this.scale(e);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(e)+s}default:return this.scale(e)}if(n){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+o}return this.scale(e)}}isInRange(e){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?e>=r&&e<=i:e>=i&&e<=r}}aze(Vj,"EPS",1e-4);function uze(t){return(t%180+180)%180}var dze=function(e){var{width:n,height:r}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=uze(i),o=s*Math.PI/180,a=Math.atan(r/n),l=o>a&&o<Math.PI-a?r/Math.sin(o):n/Math.cos(o);return Math.abs(l)},fze={dots:[],areas:[],lines:[]},Fue=vo({name:"referenceElements",initialState:fze,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=Tl(t).dots.findIndex(r=>r===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=Tl(t).areas.findIndex(r=>r===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=Tl(t).lines.findIndex(r=>r===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:Ymt,removeDot:Jmt,addArea:Xmt,removeArea:Qmt,addLine:Zmt,removeLine:e0t}=Fue.actions,hze=Fue.reducer,pze=T.createContext(void 0),mze=t=>{var{children:e}=t,[n]=T.useState("".concat(Dw("recharts"),"-clip")),r=SN();if(r==null)return null;var{x:i,y:s,width:o,height:a}=r;return T.createElement(pze.Provider,{value:n},T.createElement("defs",null,T.createElement("clipPath",{id:n},T.createElement("rect",{x:i,y:s,height:a,width:o}))),e)};function $ue(t,e){if(e<1)return[];if(e===1)return t;for(var n=[],r=0;r<t.length;r+=e){var i=t[r];i!==void 0&&n.push(i)}return n}function gze(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return dze(r,n)}function yze(t,e,n){var r=n==="width",{x:i,y:s,width:o,height:a}=t;return e===1?{start:r?i:s,end:r?i+o:s+a}:{start:r?i+o:s+a,end:r?i:s}}function Jw(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var s=n();return t*(e-t*s/2-r)>=0&&t*(e+t*s/2-i)<=0}function xze(t,e){return $ue(t,e+1)}function vze(t,e,n,r,i){for(var s=(r||[]).slice(),{start:o,end:a}=e,l=0,c=1,u=o,f=function(){var v=r==null?void 0:r[l];if(v===void 0)return{v:$ue(r,c)};var x=l,b,E=()=>(b===void 0&&(b=n(v,x)),b),C=v.coordinate,k=l===0||Jw(t,C,E,u,a);k||(l=0,u=o,c+=1),k&&(u=C+t*(E()/2+i),l+=c)},m;c<=s.length;)if(m=f(),m)return m.v;return[]}function bze(t,e,n,r,i){var s=(r||[]).slice(),o=s.length;if(o===0)return[];for(var{start:a,end:l}=e,c=1;c<=o;c++){for(var u=(o-1)%c,f=a,m=!0,g=function(){var C=r[v],k=v,O,U=()=>(O===void 0&&(O=n(C,k)),O),R=C.coordinate,$=v===u||Jw(t,R,U,f,l);if(!$)return m=!1,1;$&&(f=R+t*(U()/2+i))},v=u;v<o&&!g();v+=c);if(m){for(var x=[],b=u;b<o;b+=c)x.push(r[b]);return x}}return[]}function $Y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Es(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$Y(Object(n),!0).forEach(function(r){wze(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$Y(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wze(t,e,n){return(e=Eze(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Eze(t){var e=Sze(t,"string");return typeof e=="symbol"?e:e+""}function Sze(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Aze(t,e,n,r,i){for(var s=(r||[]).slice(),o=s.length,{start:a}=e,{end:l}=e,c=function(m){var g=s[m],v,x=()=>(v===void 0&&(v=n(g,m)),v);if(m===o-1){var b=t*(g.coordinate+t*x()/2-l);s[m]=g=Es(Es({},g),{},{tickCoord:b>0?g.coordinate-b*t:g.coordinate})}else s[m]=g=Es(Es({},g),{},{tickCoord:g.coordinate});if(g.tickCoord!=null){var E=Jw(t,g.tickCoord,x,a,l);E&&(l=g.tickCoord-t*(x()/2+i),s[m]=Es(Es({},g),{},{isShow:!0}))}},u=o-1;u>=0;u--)c(u);return s}function Tze(t,e,n,r,i,s){var o=(r||[]).slice(),a=o.length,{start:l,end:c}=e;if(s){var u=r[a-1],f=n(u,a-1),m=t*(u.coordinate+t*f/2-c);if(o[a-1]=u=Es(Es({},u),{},{tickCoord:m>0?u.coordinate-m*t:u.coordinate}),u.tickCoord!=null){var g=Jw(t,u.tickCoord,()=>f,l,c);g&&(c=u.tickCoord-t*(f/2+i),o[a-1]=Es(Es({},u),{},{isShow:!0}))}}for(var v=s?a-1:a,x=function(C){var k=o[C],O,U=()=>(O===void 0&&(O=n(k,C)),O);if(C===0){var R=t*(k.coordinate-t*U()/2-l);o[C]=k=Es(Es({},k),{},{tickCoord:R<0?k.coordinate-R*t:k.coordinate})}else o[C]=k=Es(Es({},k),{},{tickCoord:k.coordinate});if(k.tickCoord!=null){var $=Jw(t,k.tickCoord,U,l,c);$&&(l=k.tickCoord+t*(U()/2+i),o[C]=Es(Es({},k),{},{isShow:!0}))}},b=0;b<v;b++)x(b);return o}function qj(t,e,n){var{tick:r,ticks:i,viewBox:s,minTickGap:o,orientation:a,interval:l,tickFormatter:c,unit:u,angle:f}=t;if(!i||!i.length||!r)return[];if(wt(l)||K1.isSsr){var m;return(m=xze(i,wt(l)?l:0))!==null&&m!==void 0?m:[]}var g=[],v=a==="top"||a==="bottom"?"width":"height",x=u&&v==="width"?ew(u,{fontSize:e,letterSpacing:n}):{width:0,height:0},b=(k,O)=>{var U=typeof c=="function"?c(k.value,O):k.value;return v==="width"?gze(ew(U,{fontSize:e,letterSpacing:n}),x,f):ew(U,{fontSize:e,letterSpacing:n})[v]},E=i.length>=2?Ui(i[1].coordinate-i[0].coordinate):1,C=yze(s,E,v);return l==="equidistantPreserveStart"?vze(E,C,b,i,o):l==="equidistantPreserveEnd"?bze(E,C,b,i,o):(l==="preserveStart"||l==="preserveStartEnd"?g=Tze(E,C,b,i,o,l==="preserveStartEnd"):g=Aze(E,C,b,i,o),g.filter(k=>k.isShow))}var kze=t=>{var{ticks:e,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:s=0}=t,o=0;if(e){Array.from(e).forEach(u=>{if(u){var f=u.getBoundingClientRect();f.width>o&&(o=f.width)}});var a=n?n.getBoundingClientRect().width:0,l=i+s,c=o+l+a+(n?r:0);return Math.round(c)}return 0},Cze=["axisLine","width","height","className","hide","ticks","axisType"];function Nze(t,e){if(t==null)return{};var n,r,i=_ze(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function _ze(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Sm(){return Sm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Sm.apply(null,arguments)}function zY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zY(Object(n),!0).forEach(function(r){Ize(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ize(t,e,n){return(e=Pze(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pze(t){var e=Rze(t,"string");return typeof e=="symbol"?e:e+""}function Rze(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Zu={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:ri.axis};function Oze(t){var{x:e,y:n,width:r,height:i,orientation:s,mirror:o,axisLine:a,otherSvgProps:l}=t;if(!a)return null;var c=fi(fi(fi({},l),Ys(a)),{},{fill:"none"});if(s==="top"||s==="bottom"){var u=+(s==="top"&&!o||s==="bottom"&&o);c=fi(fi({},c),{},{x1:e,y1:n+u*i,x2:e+r,y2:n+u*i})}else{var f=+(s==="left"&&!o||s==="right"&&o);c=fi(fi({},c),{},{x1:e+f*r,y1:n,x2:e+f*r,y2:n+i})}return T.createElement("line",Sm({},c,{className:Rn("recharts-cartesian-axis-line",xm(a,"className"))}))}function Mze(t,e,n,r,i,s,o,a,l){var c,u,f,m,g,v,x=a?-1:1,b=t.tickSize||o,E=wt(t.tickCoord)?t.tickCoord:t.coordinate;switch(s){case"top":c=u=t.coordinate,m=n+ +!a*i,f=m-x*b,v=f-x*l,g=E;break;case"left":f=m=t.coordinate,u=e+ +!a*r,c=u-x*b,g=c-x*l,v=E;break;case"right":f=m=t.coordinate,u=e+ +a*r,c=u+x*b,g=c+x*l,v=E;break;default:c=u=t.coordinate,m=n+ +a*i,f=m+x*b,v=f+x*l,g=E;break}return{line:{x1:c,y1:f,x2:u,y2:m},tick:{x:g,y:v}}}function Dze(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function Lze(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function jze(t){var{option:e,tickProps:n,value:r}=t,i,s=Rn(n.className,"recharts-cartesian-axis-tick-value");if(T.isValidElement(e))i=T.cloneElement(e,fi(fi({},n),{},{className:s}));else if(typeof e=="function")i=e(fi(fi({},n),{},{className:s}));else{var o="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(o=Rn(o,e==null?void 0:e.className)),i=T.createElement(gN,Sm({},n,{className:o}),r)}return i}var Bze=T.forwardRef((t,e)=>{var{ticks:n=[],tick:r,tickLine:i,stroke:s,tickFormatter:o,unit:a,padding:l,tickTextProps:c,orientation:u,mirror:f,x:m,y:g,width:v,height:x,tickSize:b,tickMargin:E,fontSize:C,letterSpacing:k,getTicksConfig:O,events:U,axisType:R}=t,$=qj(fi(fi({},O),{},{ticks:n}),C,k),V=Dze(u,f),j=Lze(u,f),F=Ys(O),W=gm(r),H={};typeof i=="object"&&(H=i);var B=fi(fi({},F),{},{fill:"none"},H),A=$.map(z=>fi({entry:z},Mze(z,m,g,v,x,u,b,f,E))),I=A.map(z=>{var{entry:G,line:te}=z;return T.createElement(Wr,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(G.value,"-").concat(G.coordinate,"-").concat(G.tickCoord)},i&&T.createElement("line",Sm({},B,te,{className:Rn("recharts-cartesian-axis-tick-line",xm(i,"className"))})))}),D=A.map((z,G)=>{var{entry:te,tick:K}=z,q=fi(fi(fi(fi({textAnchor:V,verticalAnchor:j},F),{},{stroke:"none",fill:s},W),K),{},{index:G,payload:te,visibleTicksCount:$.length,tickFormatter:o,padding:l},c);return T.createElement(Wr,Sm({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(te.value,"-").concat(te.coordinate,"-").concat(te.tickCoord)},R2(U,te,G)),r&&T.createElement(jze,{option:r,tickProps:q,value:"".concat(typeof o=="function"?o(te.value,G):te.value).concat(a||"")}))});return T.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(R,"-ticks")},D.length>0&&T.createElement(Zs,{zIndex:ri.label},T.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(R,"-tick-labels"),ref:e},D)),I.length>0&&T.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(R,"-tick-lines")},I))}),Uze=T.forwardRef((t,e)=>{var{axisLine:n,width:r,height:i,className:s,hide:o,ticks:a,axisType:l}=t,c=Nze(t,Cze),[u,f]=T.useState(""),[m,g]=T.useState(""),v=T.useRef(null);T.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var b;return kze({ticks:v.current,label:(b=t.labelRef)===null||b===void 0?void 0:b.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var x=T.useCallback(b=>{if(b){var E=b.getElementsByClassName("recharts-cartesian-axis-tick-value");v.current=E;var C=E[0];if(C){var k=window.getComputedStyle(C),O=k.fontSize,U=k.letterSpacing;(O!==u||U!==m)&&(f(O),g(U))}}},[u,m]);return o||r!=null&&r<=0||i!=null&&i<=0?null:T.createElement(Zs,{zIndex:t.zIndex},T.createElement(Wr,{className:Rn("recharts-cartesian-axis",s)},T.createElement(Oze,{x:t.x,y:t.y,width:r,height:i,orientation:t.orientation,mirror:t.mirror,axisLine:n,otherSvgProps:Ys(t)}),T.createElement(Bze,{ref:x,axisType:l,events:c,fontSize:u,getTicksConfig:t,height:t.height,letterSpacing:m,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:a,unit:t.unit,width:t.width,x:t.x,y:t.y}),T.createElement(MFe,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},T.createElement(VFe,{label:t.label,labelRef:t.labelRef}),t.children)))}),Gj=T.forwardRef((t,e)=>{var n=yi(t,Zu);return T.createElement(Uze,Sm({},n,{ref:e}))});Gj.displayName="CartesianAxis";var Fze=["x1","y1","x2","y2","key"],$ze=["offset"],zze=["xAxisId","yAxisId"],Hze=["xAxisId","yAxisId"];function HY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ks(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HY(Object(n),!0).forEach(function(r){Vze(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Vze(t,e,n){return(e=qze(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qze(t){var e=Gze(t,"string");return typeof e=="symbol"?e:e+""}function Gze(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ap(){return Ap=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ap.apply(null,arguments)}function Zk(t,e){if(t==null)return{};var n,r,i=Kze(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Kze(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Wze=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:n,x:r,y:i,width:s,height:o,ry:a}=t;return T.createElement("rect",{x:r,y:i,ry:a,width:s,height:o,stroke:"none",fill:e,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function zue(t){var{option:e,lineItemProps:n}=t,r;if(T.isValidElement(e))r=T.cloneElement(e,n);else if(typeof e=="function")r=e(n);else{var i,{x1:s,y1:o,x2:a,y2:l,key:c}=n,u=Zk(n,Fze),f=(i=Ys(u))!==null&&i!==void 0?i:{},{offset:m}=f,g=Zk(f,$ze);r=T.createElement("line",Ap({},g,{x1:s,y1:o,x2:a,y2:l,fill:"none",key:c}))}return r}function Yze(t){var{x:e,width:n,horizontal:r=!0,horizontalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:o}=t,a=Zk(t,zze),l=i.map((c,u)=>{var f=ks(ks({},a),{},{x1:e,y1:c,x2:e+n,y2:c,key:"line-".concat(u),index:u});return T.createElement(zue,{key:"line-".concat(u),option:r,lineItemProps:f})});return T.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function Jze(t){var{y:e,height:n,vertical:r=!0,verticalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:o}=t,a=Zk(t,Hze),l=i.map((c,u)=>{var f=ks(ks({},a),{},{x1:c,y1:e,x2:c,y2:e+n,key:"line-".concat(u),index:u});return T.createElement(zue,{option:r,lineItemProps:f,key:"line-".concat(u)})});return T.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function Xze(t){var{horizontalFill:e,fillOpacity:n,x:r,y:i,width:s,height:o,horizontalPoints:a,horizontal:l=!0}=t;if(!l||!e||!e.length||a==null)return null;var c=a.map(f=>Math.round(f+i-i)).sort((f,m)=>f-m);i!==c[0]&&c.unshift(0);var u=c.map((f,m)=>{var g=!c[m+1],v=g?i+o-f:c[m+1]-f;if(v<=0)return null;var x=m%e.length;return T.createElement("rect",{key:"react-".concat(m),y:f,x:r,height:v,width:s,stroke:"none",fill:e[x],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return T.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},u)}function Qze(t){var{vertical:e=!0,verticalFill:n,fillOpacity:r,x:i,y:s,width:o,height:a,verticalPoints:l}=t;if(!e||!n||!n.length)return null;var c=l.map(f=>Math.round(f+i-i)).sort((f,m)=>f-m);i!==c[0]&&c.unshift(0);var u=c.map((f,m)=>{var g=!c[m+1],v=g?i+o-f:c[m+1]-f;if(v<=0)return null;var x=m%n.length;return T.createElement("rect",{key:"react-".concat(m),x:f,y:s,width:v,height:a,stroke:"none",fill:n[x],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return T.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var Zze=(t,e)=>{var{xAxis:n,width:r,height:i,offset:s}=t;return Rae(qj(ks(ks(ks({},Zu),n),{},{ticks:Oae(n),viewBox:{x:0,y:0,width:r,height:i}})),s.left,s.left+s.width,e)},eHe=(t,e)=>{var{yAxis:n,width:r,height:i,offset:s}=t;return Rae(qj(ks(ks(ks({},Zu),n),{},{ticks:Oae(n),viewBox:{x:0,y:0,width:r,height:i}})),s.top,s.top+s.height,e)},tHe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:ri.grid};function Xw(t){var e=Hae(),n=Vae(),r=zae(),i=ks(ks({},yi(t,tHe)),{},{x:wt(t.x)?t.x:r.left,y:wt(t.y)?t.y:r.top,width:wt(t.width)?t.width:r.width,height:wt(t.height)?t.height:r.height}),{xAxisId:s,yAxisId:o,x:a,y:l,width:c,height:u,syncWithTicks:f,horizontalValues:m,verticalValues:g}=i,v=$i(),x=Pt(j=>MW(j,"xAxis",s,v)),b=Pt(j=>MW(j,"yAxis",o,v));if(!Mc(c)||!Mc(u)||!wt(a)||!wt(l))return null;var E=i.verticalCoordinatesGenerator||Zze,C=i.horizontalCoordinatesGenerator||eHe,{horizontalPoints:k,verticalPoints:O}=i;if((!k||!k.length)&&typeof C=="function"){var U=m&&m.length,R=C({yAxis:b?ks(ks({},b),{},{ticks:U?m:b.ticks}):void 0,width:e??c,height:n??u,offset:r},U?!0:f);Tk(Array.isArray(R),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof R,"]")),Array.isArray(R)&&(k=R)}if((!O||!O.length)&&typeof E=="function"){var $=g&&g.length,V=E({xAxis:x?ks(ks({},x),{},{ticks:$?g:x.ticks}):void 0,width:e??c,height:n??u,offset:r},$?!0:f);Tk(Array.isArray(V),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof V,"]")),Array.isArray(V)&&(O=V)}return T.createElement(Zs,{zIndex:i.zIndex},T.createElement("g",{className:"recharts-cartesian-grid"},T.createElement(Wze,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),T.createElement(Xze,Ap({},i,{horizontalPoints:k})),T.createElement(Qze,Ap({},i,{verticalPoints:O})),T.createElement(Yze,Ap({},i,{offset:r,horizontalPoints:k,xAxis:x,yAxis:b})),T.createElement(Jze,Ap({},i,{offset:r,verticalPoints:O,xAxis:x,yAxis:b}))))}Xw.displayName="CartesianGrid";var nHe={},Hue=vo({name:"errorBars",initialState:nHe,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]||(t[n]=[]),t[n].push(r)},replaceErrorBar:(t,e)=>{var{itemId:n,prev:r,next:i}=e.payload;t[n]&&(t[n]=t[n].map(s=>s.dataKey===r.dataKey&&s.direction===r.direction?i:s))},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]&&(t[n]=t[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:t0t,replaceErrorBar:n0t,removeErrorBar:r0t}=Hue.actions,rHe=Hue.reducer,iHe=["children"];function sHe(t,e){if(t==null)return{};var n,r,i=oHe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function oHe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var aHe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},lHe=T.createContext(aHe);function Vue(t){var{children:e}=t,n=sHe(t,iHe);return T.createElement(lHe.Provider,{value:n},e)}function AN(t,e){var n,r,i=Pt(c=>_d(c,t)),s=Pt(c=>Id(c,e)),o=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:_i.allowDataOverflow,a=(r=s==null?void 0:s.allowDataOverflow)!==null&&r!==void 0?r:Ii.allowDataOverflow,l=o||a;return{needClip:l,needClipX:o,needClipY:a}}function Kj(t){var{xAxisId:e,yAxisId:n,clipPathId:r}=t,i=SN(),{needClipX:s,needClipY:o,needClip:a}=AN(e,n);if(!a||!i)return null;var{x:l,y:c,width:u,height:f}=i;return T.createElement("clipPath",{id:"clipPath-".concat(r)},T.createElement("rect",{x:s?l:l-u/2,y:o?c:c-f/2,width:s?u:u*2,height:o?f:f*2}))}var que=(t,e,n,r)=>jc(t,"xAxis",e,r),Gue=(t,e,n,r)=>Lc(t,"xAxis",e,r),Kue=(t,e,n,r)=>jc(t,"yAxis",n,r),Wue=(t,e,n,r)=>Lc(t,"yAxis",n,r),cHe=Me([An,que,Kue,Gue,Wue],(t,e,n,r,i)=>Fc(t,"xAxis")?lh(e,r,!1):lh(n,i,!1)),uHe=(t,e,n,r,i)=>i;function dHe(t){return t.type==="line"}var fHe=Me([tE,uHe],(t,e)=>t.filter(dHe).find(n=>n.id===e)),hHe=Me([An,que,Kue,Gue,Wue,fHe,cHe,V6],(t,e,n,r,i,s,o,a)=>{var{chartData:l,dataStartIndex:c,dataEndIndex:u}=a;if(!(s==null||e==null||n==null||r==null||i==null||r.length===0||i.length===0||o==null||t!=="horizontal"&&t!=="vertical")){var{dataKey:f,data:m}=s,g;if(m!=null&&m.length>0?g=m:g=l==null?void 0:l.slice(c,u+1),g!=null)return XHe({layout:t,xAxis:e,yAxis:n,xAxisTicks:r,yAxisTicks:i,dataKey:f,bandSize:o,displayedData:g})}});function Yue(t){var e=gm(t),n=3,r=2;if(e!=null){var{r:i,strokeWidth:s}=e,o=Number(i),a=Number(s);return(Number.isNaN(o)||o<0)&&(o=n),(Number.isNaN(a)||a<0)&&(a=r),{r:o,strokeWidth:a}}return{r:n,strokeWidth:r}}var TO={exports:{}},kO={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VY;function pHe(){if(VY)return kO;VY=1;var t=Nx();function e(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,i=t.useRef,s=t.useEffect,o=t.useMemo,a=t.useDebugValue;return kO.useSyncExternalStoreWithSelector=function(l,c,u,f,m){var g=i(null);if(g.current===null){var v={hasValue:!1,value:null};g.current=v}else v=g.current;g=o(function(){function b(U){if(!E){if(E=!0,C=U,U=f(U),m!==void 0&&v.hasValue){var R=v.value;if(m(R,U))return k=R}return k=U}if(R=k,n(C,U))return R;var $=f(U);return m!==void 0&&m(R,$)?(C=U,R):(C=U,k=$)}var E=!1,C,k,O=u===void 0?null:u;return[function(){return b(c())},O===null?void 0:function(){return b(O())}]},[c,u,f,m]);var x=r(l,g[0],g[1]);return s(function(){v.hasValue=!0,v.value=x},[x]),a(x),x},kO}var qY;function mHe(){return qY||(qY=1,TO.exports=pHe()),TO.exports}mHe();function gHe(t){t()}function yHe(){let t=null,e=null;return{clear(){t=null,e=null},notify(){gHe(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var GY={notify(){},get:()=>[]};function xHe(t,e){let n,r=GY,i=0,s=!1;function o(x){u();const b=r.subscribe(x);let E=!1;return()=>{E||(E=!0,b(),f())}}function a(){r.notify()}function l(){v.onStateChange&&v.onStateChange()}function c(){return s}function u(){i++,n||(n=t.subscribe(l),r=yHe())}function f(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=GY)}function m(){s||(s=!0,u())}function g(){s&&(s=!1,f())}const v={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:l,isSubscribed:c,trySubscribe:m,tryUnsubscribe:g,getListeners:()=>r};return v}var vHe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",bHe=vHe(),wHe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",EHe=wHe(),SHe=()=>bHe||EHe?T.useLayoutEffect:T.useEffect,AHe=SHe();function KY(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function THe(t,e){if(KY(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(e,n[i])||!KY(t[n[i]],e[n[i]]))return!1;return!0}var CO=Symbol.for("react-redux-context"),NO=typeof globalThis<"u"?globalThis:{};function kHe(){if(!T.createContext)return{};const t=NO[CO]??(NO[CO]=new Map);let e=t.get(T.createContext);return e||(e=T.createContext(null),t.set(T.createContext,e)),e}var CHe=kHe();function NHe(t){const{children:e,context:n,serverState:r,store:i}=t,s=T.useMemo(()=>{const l=xHe(i);return{store:i,subscription:l,getServerState:r?()=>r:void 0}},[i,r]),o=T.useMemo(()=>i.getState(),[i]);AHe(()=>{const{subscription:l}=s;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),o!==i.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[s,o]);const a=n||CHe;return T.createElement(a.Provider,{value:s},e)}var _He=NHe,IHe=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function PHe(t,e){return t==null&&e==null?!0:typeof t=="number"&&typeof e=="number"?t===e||t!==t&&e!==e:t===e}function lE(t,e){var n=new Set([...Object.keys(t),...Object.keys(e)]);for(var r of n)if(IHe.has(r)){if(t[r]==null&&e[r]==null)continue;if(!THe(t[r],e[r]))return!1}else if(!PHe(t[r],e[r]))return!1;return!0}var RHe=["id"],OHe=["type","layout","connectNulls","needClip","shape"],MHe=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function Qw(){return Qw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qw.apply(null,arguments)}function WY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function dc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WY(Object(n),!0).forEach(function(r){DHe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function DHe(t,e,n){return(e=LHe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function LHe(t){var e=jHe(t,"string");return typeof e=="symbol"?e:e+""}function jHe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Wj(t,e){if(t==null)return{};var n,r,i=BHe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function BHe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var UHe=t=>{var{dataKey:e,name:n,stroke:r,legendType:i,hide:s}=t;return[{inactive:s,dataKey:e,type:i,color:r,value:yh(n,e),payload:t}]},FHe=T.memo(t=>{var{dataKey:e,data:n,stroke:r,strokeWidth:i,fill:s,name:o,hide:a,unit:l,tooltipType:c,id:u}=t,f={dataDefinedOnItem:n,positions:void 0,settings:{stroke:r,strokeWidth:i,fill:s,dataKey:e,nameKey:void 0,name:yh(o,e),hide:a,type:c,color:r,unit:l,graphicalItemId:u}};return T.createElement(bN,{tooltipEntrySettings:f})}),Jue=(t,e)=>"".concat(e,"px ").concat(t-e,"px");function $He(t,e){for(var n=t.length%2!==0?[...t,0]:t,r=[],i=0;i<e;++i)r=[...r,...n];return r}var zHe=(t,e,n)=>{var r=n.reduce((f,m)=>f+m);if(!r)return Jue(e,t);for(var i=Math.floor(t/r),s=t%r,o=e-t,a=[],l=0,c=0;l<n.length;c+=n[l],++l)if(c+n[l]>s){a=[...n.slice(0,l),s-c];break}var u=a.length%2===0?[0,o]:[o];return[...$He(n,i),...a,...u].map(f=>"".concat(f,"px")).join(", ")};function HHe(t){var{clipPathId:e,points:n,props:r}=t,{dot:i,dataKey:s,needClip:o}=r,{id:a}=r,l=Wj(r,RHe),c=Ys(l);return T.createElement(Due,{points:n,dot:i,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:s,baseProps:c,needClip:o,clipPathId:e})}function VHe(t){var{showLabels:e,children:n,points:r}=t,i=T.useMemo(()=>r==null?void 0:r.map(s=>{var o,a,l={x:(o=s.x)!==null&&o!==void 0?o:0,y:(a=s.y)!==null&&a!==void 0?a:0,width:0,lowerWidth:0,upperWidth:0,height:0};return dc(dc({},l),{},{value:s.value,payload:s.payload,viewBox:l,parentViewBox:void 0,fill:void 0})}),[r]);return T.createElement(Rj,{value:e?i:void 0},n)}function YY(t){var{clipPathId:e,pathRef:n,points:r,strokeDasharray:i,props:s}=t,{type:o,layout:a,connectNulls:l,needClip:c,shape:u}=s,f=Wj(s,OHe),m=dc(dc({},Ms(f)),{},{fill:"none",className:"recharts-line-curve",clipPath:c?"url(#clipPath-".concat(e,")"):void 0,points:r,type:o,layout:a,connectNulls:l,strokeDasharray:i??s.strokeDasharray});return T.createElement(T.Fragment,null,(r==null?void 0:r.length)>1&&T.createElement(jj,Qw({shapeType:"curve",option:u},m,{pathRef:n})),T.createElement(HHe,{points:r,clipPathId:e,props:s}))}function qHe(t){try{return t&&t.getTotalLength&&t.getTotalLength()||0}catch{return 0}}function GHe(t){var{clipPathId:e,props:n,pathRef:r,previousPointsRef:i,longestAnimatedLengthRef:s}=t,{points:o,strokeDasharray:a,isAnimationActive:l,animationBegin:c,animationDuration:u,animationEasing:f,animateNewValues:m,width:g,height:v,onAnimationEnd:x,onAnimationStart:b}=n,E=i.current,C=Gx(o,"recharts-line-"),k=T.useRef(C),[O,U]=T.useState(!1),R=!O,$=T.useCallback(()=>{typeof x=="function"&&x(),U(!1)},[x]),V=T.useCallback(()=>{typeof b=="function"&&b(),U(!0)},[b]),j=qHe(r.current),F=T.useRef(0);k.current!==C&&(F.current=s.current,k.current=C);var W=F.current;return T.createElement(VHe,{points:o,showLabels:R},n.children,T.createElement(qx,{animationId:C,begin:c,duration:u,isActive:l,easing:f,onAnimationEnd:$,onAnimationStart:V,key:C},H=>{var B=qn(W,j+W,H),A=Math.min(B,j),I;if(l)if(a){var D="".concat(a).split(/[,\s]+/gim).map(te=>parseFloat(te));I=zHe(A,j,D)}else I=Jue(j,A);else I=a==null?void 0:String(a);if(H>0&&j>0&&(i.current=o,s.current=Math.max(s.current,A)),E){var z=E.length/o.length,G=H===1?o:o.map((te,K)=>{var q=Math.floor(K*z);if(E[q]){var M=E[q];return dc(dc({},te),{},{x:qn(M.x,te.x,H),y:qn(M.y,te.y,H)})}return m?dc(dc({},te),{},{x:qn(g*2,te.x,H),y:qn(v/2,te.y,H)}):dc(dc({},te),{},{x:te.x,y:te.y})});return i.current=G,T.createElement(YY,{props:n,points:G,clipPathId:e,pathRef:r,strokeDasharray:I})}return T.createElement(YY,{props:n,points:o,clipPathId:e,pathRef:r,strokeDasharray:I})}),T.createElement(yN,{label:n.label}))}function KHe(t){var{clipPathId:e,props:n}=t,r=T.useRef(null),i=T.useRef(0),s=T.useRef(null);return T.createElement(GHe,{props:n,clipPathId:e,previousPointsRef:r,longestAnimatedLengthRef:i,pathRef:s})}var WHe=(t,e)=>{var n,r;return{x:(n=t.x)!==null&&n!==void 0?n:void 0,y:(r=t.y)!==null&&r!==void 0?r:void 0,value:t.value,errorVal:Wn(t.payload,e)}};class YHe extends T.Component{render(){var{hide:e,dot:n,points:r,className:i,xAxisId:s,yAxisId:o,top:a,left:l,width:c,height:u,id:f,needClip:m,zIndex:g}=this.props;if(e)return null;var v=Rn("recharts-line",i),x=f,{r:b,strokeWidth:E}=Yue(n),C=Lj(n),k=b*2+E,O=m?"url(#clipPath-".concat(C?"":"dots-").concat(x,")"):void 0;return T.createElement(Zs,{zIndex:g},T.createElement(Wr,{className:v},m&&T.createElement("defs",null,T.createElement(Kj,{clipPathId:x,xAxisId:s,yAxisId:o}),!C&&T.createElement("clipPath",{id:"clipPath-dots-".concat(x)},T.createElement("rect",{x:l-k/2,y:a-k/2,width:c+k,height:u+k}))),T.createElement(Vue,{xAxisId:s,yAxisId:o,data:r,dataPointFormatter:WHe,errorBarOffset:0},T.createElement(KHe,{props:this.props,clipPathId:x}))),T.createElement(dD,{activeDot:this.props.activeDot,points:r,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:O}))}}var Xue={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:ri.line,type:"linear"};function JHe(t){var e=yi(t,Xue),{activeDot:n,animateNewValues:r,animationBegin:i,animationDuration:s,animationEasing:o,connectNulls:a,dot:l,hide:c,isAnimationActive:u,label:f,legendType:m,xAxisId:g,yAxisId:v,id:x}=e,b=Wj(e,MHe),{needClip:E}=AN(g,v),C=SN(),k=xh(),O=$i(),U=Pt(F=>hHe(F,g,v,O,x));if(k!=="horizontal"&&k!=="vertical"||U==null||C==null)return null;var{height:R,width:$,x:V,y:j}=C;return T.createElement(YHe,Qw({},b,{id:x,connectNulls:a,dot:l,activeDot:n,animateNewValues:r,animationBegin:i,animationDuration:s,animationEasing:o,isAnimationActive:u,hide:c,label:f,legendType:m,xAxisId:g,yAxisId:v,points:U,layout:k,height:R,width:$,left:V,top:j,needClip:E}))}function XHe(t){var{layout:e,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:s,dataKey:o,bandSize:a,displayedData:l}=t;return l.map((c,u)=>{var f=Wn(c,o);if(e==="horizontal"){var m=Ak({axis:n,ticks:i,bandSize:a,entry:c,index:u}),g=Er(f)?null:r.scale(f);return{x:m,y:g,value:f,payload:c}}var v=Er(f)?null:n.scale(f),x=Ak({axis:r,ticks:s,bandSize:a,entry:c,index:u});return v==null||x==null?null:{x:v,y:x,value:f,payload:c}}).filter(Boolean)}function QHe(t){var e=yi(t,Xue),n=$i();return T.createElement(wN,{id:e.id,type:"line"},r=>T.createElement(T.Fragment,null,T.createElement($j,{legendPayload:UHe(e)}),T.createElement(FHe,{dataKey:e.dataKey,data:e.data,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:r}),T.createElement(zj,{type:"line",id:r,data:e.data,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,hide:e.hide,isPanorama:n}),T.createElement(JHe,Qw({},e,{id:r}))))}var ET=T.memo(QHe,lE);ET.displayName="Line";function $c(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(i=>i.id===e))===null||r===void 0?void 0:r.xAxisId)!==null&&n!==void 0?n:Lue}function zc(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(i=>i.id===e))===null||r===void 0?void 0:r.yAxisId)!==null&&n!==void 0?n:Lue}var Que=(t,e,n)=>jc(t,"xAxis",$c(t,e),n),Zue=(t,e,n)=>Lc(t,"xAxis",$c(t,e),n),ede=(t,e,n)=>jc(t,"yAxis",zc(t,e),n),tde=(t,e,n)=>Lc(t,"yAxis",zc(t,e),n),ZHe=Me([An,Que,ede,Zue,tde],(t,e,n,r,i)=>Fc(t,"xAxis")?lh(e,r,!1):lh(n,i,!1)),eVe=(t,e)=>e,nde=Me([tE,eVe],(t,e)=>t.filter(n=>n.type==="area").find(n=>n.id===e)),rde=t=>{var e=An(t),n=Fc(e,"xAxis");return n?"yAxis":"xAxis"},tVe=(t,e)=>{var n=rde(t);return n==="yAxis"?zc(t,e):$c(t,e)},nVe=(t,e,n)=>qk(t,rde(t),tVe(t,e),n),rVe=Me([nde,nVe],(t,e)=>{var n;if(!(t==null||e==null)){var{stackId:r}=t,i=oN(t);if(!(r==null||i==null)){var s=(n=e[r])===null||n===void 0?void 0:n.stackedData,o=s==null?void 0:s.find(a=>a.key===i);if(o!=null)return o.map(a=>[a[0],a[1]])}}}),iVe=Me([An,Que,ede,Zue,tde,rVe,Gle,ZHe,nde,jje],(t,e,n,r,i,s,o,a,l,c)=>{var{chartData:u,dataStartIndex:f,dataEndIndex:m}=o;if(!(l==null||t!=="horizontal"&&t!=="vertical"||e==null||n==null||r==null||i==null||r.length===0||i.length===0||a==null)){var{data:g}=l,v;if(g&&g.length>0?v=g:v=u==null?void 0:u.slice(f,m+1),v!=null)return SVe({layout:t,xAxis:e,yAxis:n,xAxisTicks:r,yAxisTicks:i,dataStartIndex:f,areaSettings:l,stackedData:s,displayedData:v,chartBaseValue:c,bandSize:a})}}),sVe=["id"],oVe=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function im(){return im=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},im.apply(null,arguments)}function ide(t,e){if(t==null)return{};var n,r,i=aVe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function aVe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function JY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _g(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JY(Object(n),!0).forEach(function(r){lVe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lVe(t,e,n){return(e=cVe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cVe(t){var e=uVe(t,"string");return typeof e=="symbol"?e:e+""}function uVe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function eC(t,e){return t&&t!=="none"?t:e}var dVe=t=>{var{dataKey:e,name:n,stroke:r,fill:i,legendType:s,hide:o}=t;return[{inactive:o,dataKey:e,type:s,color:eC(r,i),value:yh(n,e),payload:t}]},fVe=T.memo(t=>{var{dataKey:e,data:n,stroke:r,strokeWidth:i,fill:s,name:o,hide:a,unit:l,tooltipType:c,id:u}=t,f={dataDefinedOnItem:n,positions:void 0,settings:{stroke:r,strokeWidth:i,fill:s,dataKey:e,nameKey:void 0,name:yh(o,e),hide:a,type:c,color:eC(r,s),unit:l,graphicalItemId:u}};return T.createElement(bN,{tooltipEntrySettings:f})});function hVe(t){var{clipPathId:e,points:n,props:r}=t,{needClip:i,dot:s,dataKey:o}=r,a=Ys(r);return T.createElement(Due,{points:n,dot:s,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:o,baseProps:a,needClip:i,clipPathId:e})}function pVe(t){var{showLabels:e,children:n,points:r}=t,i=r.map(s=>{var o,a,l={x:(o=s.x)!==null&&o!==void 0?o:0,y:(a=s.y)!==null&&a!==void 0?a:0,width:0,lowerWidth:0,upperWidth:0,height:0};return _g(_g({},l),{},{value:s.value,payload:s.payload,parentViewBox:void 0,viewBox:l,fill:void 0})});return T.createElement(Rj,{value:e?i:void 0},n)}function XY(t){var{points:e,baseLine:n,needClip:r,clipPathId:i,props:s}=t,{layout:o,type:a,stroke:l,connectNulls:c,isRange:u}=s,{id:f}=s,m=ide(s,sVe),g=Ys(m),v=Ms(m);return T.createElement(T.Fragment,null,(e==null?void 0:e.length)>1&&T.createElement(Wr,{clipPath:r?"url(#clipPath-".concat(i,")"):void 0},T.createElement(Xg,im({},v,{id:f,points:e,connectNulls:c,type:a,baseLine:n,layout:o,stroke:"none",className:"recharts-area-area"})),l!=="none"&&T.createElement(Xg,im({},g,{className:"recharts-area-curve",layout:o,type:a,connectNulls:c,fill:"none",points:e})),l!=="none"&&u&&T.createElement(Xg,im({},g,{className:"recharts-area-curve",layout:o,type:a,connectNulls:c,fill:"none",points:n}))),T.createElement(hVe,{points:e,props:m,clipPathId:i}))}function mVe(t){var e,n,{alpha:r,baseLine:i,points:s,strokeWidth:o}=t,a=(e=s[0])===null||e===void 0?void 0:e.y,l=(n=s[s.length-1])===null||n===void 0?void 0:n.y;if(!cr(a)||!cr(l))return null;var c=r*Math.abs(a-l),u=Math.max(...s.map(f=>f.x||0));return wt(i)?u=Math.max(i,u):i&&Array.isArray(i)&&i.length&&(u=Math.max(...i.map(f=>f.x||0),u)),wt(u)?T.createElement("rect",{x:0,y:a<l?a:a-c,width:u+(o?parseInt("".concat(o),10):1),height:Math.floor(c)}):null}function gVe(t){var e,n,{alpha:r,baseLine:i,points:s,strokeWidth:o}=t,a=(e=s[0])===null||e===void 0?void 0:e.x,l=(n=s[s.length-1])===null||n===void 0?void 0:n.x;if(!cr(a)||!cr(l))return null;var c=r*Math.abs(a-l),u=Math.max(...s.map(f=>f.y||0));return wt(i)?u=Math.max(i,u):i&&Array.isArray(i)&&i.length&&(u=Math.max(...i.map(f=>f.y||0),u)),wt(u)?T.createElement("rect",{x:a<l?a:a-c,y:0,width:c,height:Math.floor(u+(o?parseInt("".concat(o),10):1))}):null}function yVe(t){var{alpha:e,layout:n,points:r,baseLine:i,strokeWidth:s}=t;return n==="vertical"?T.createElement(mVe,{alpha:e,points:r,baseLine:i,strokeWidth:s}):T.createElement(gVe,{alpha:e,points:r,baseLine:i,strokeWidth:s})}function xVe(t){var{needClip:e,clipPathId:n,props:r,previousPointsRef:i,previousBaselineRef:s}=t,{points:o,baseLine:a,isAnimationActive:l,animationBegin:c,animationDuration:u,animationEasing:f,onAnimationStart:m,onAnimationEnd:g}=r,v=T.useMemo(()=>({points:o,baseLine:a}),[o,a]),x=Gx(v,"recharts-area-"),b=pDe(),[E,C]=T.useState(!1),k=!E,O=T.useCallback(()=>{typeof g=="function"&&g(),C(!1)},[g]),U=T.useCallback(()=>{typeof m=="function"&&m(),C(!0)},[m]);if(b==null)return null;var R=i.current,$=s.current;return T.createElement(pVe,{showLabels:k,points:o},r.children,T.createElement(qx,{animationId:x,begin:c,duration:u,isActive:l,easing:f,onAnimationEnd:O,onAnimationStart:U,key:x},V=>{if(R){var j=R.length/o.length,F=V===1?o:o.map((H,B)=>{var A=Math.floor(B*j);if(R[A]){var I=R[A];return _g(_g({},H),{},{x:qn(I.x,H.x,V),y:qn(I.y,H.y,V)})}return H}),W;return wt(a)?W=qn($,a,V):Er(a)||Ha(a)?W=qn($,0,V):W=a.map((H,B)=>{var A=Math.floor(B*j);if(Array.isArray($)&&$[A]){var I=$[A];return _g(_g({},H),{},{x:qn(I.x,H.x,V),y:qn(I.y,H.y,V)})}return H}),V>0&&(i.current=F,s.current=W),T.createElement(XY,{points:F,baseLine:W,needClip:e,clipPathId:n,props:r})}return V>0&&(i.current=o,s.current=a),T.createElement(Wr,null,l&&T.createElement("defs",null,T.createElement("clipPath",{id:"animationClipPath-".concat(n)},T.createElement(yVe,{alpha:V,points:o,baseLine:a,layout:b,strokeWidth:r.strokeWidth}))),T.createElement(Wr,{clipPath:"url(#animationClipPath-".concat(n,")")},T.createElement(XY,{points:o,baseLine:a,needClip:e,clipPathId:n,props:r})))}),T.createElement(yN,{label:r.label}))}function vVe(t){var{needClip:e,clipPathId:n,props:r}=t,i=T.useRef(null),s=T.useRef();return T.createElement(xVe,{needClip:e,clipPathId:n,props:r,previousPointsRef:i,previousBaselineRef:s})}class bVe extends T.PureComponent{render(){var{hide:e,dot:n,points:r,className:i,top:s,left:o,needClip:a,xAxisId:l,yAxisId:c,width:u,height:f,id:m,baseLine:g,zIndex:v}=this.props;if(e)return null;var x=Rn("recharts-area",i),b=m,{r:E,strokeWidth:C}=Yue(n),k=Lj(n),O=E*2+C,U=a?"url(#clipPath-".concat(k?"":"dots-").concat(b,")"):void 0;return T.createElement(Zs,{zIndex:v},T.createElement(Wr,{className:x},a&&T.createElement("defs",null,T.createElement(Kj,{clipPathId:b,xAxisId:l,yAxisId:c}),!k&&T.createElement("clipPath",{id:"clipPath-dots-".concat(b)},T.createElement("rect",{x:o-O/2,y:s-O/2,width:u+O,height:f+O}))),T.createElement(vVe,{needClip:a,clipPathId:b,props:this.props})),T.createElement(dD,{points:r,mainColor:eC(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:U}),this.props.isRange&&Array.isArray(g)&&T.createElement(dD,{points:g,mainColor:eC(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:U}))}}var sde={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:"auto",legendType:"line",stroke:"#3182bd",strokeWidth:1,type:"linear",label:!1,xAxisId:0,yAxisId:0,zIndex:ri.area};function wVe(t){var e,n=yi(t,sde),{activeDot:r,animationBegin:i,animationDuration:s,animationEasing:o,connectNulls:a,dot:l,fill:c,fillOpacity:u,hide:f,isAnimationActive:m,legendType:g,stroke:v,xAxisId:x,yAxisId:b}=n,E=ide(n,oVe),C=xh(),k=lue(),{needClip:O}=AN(x,b),U=$i(),{points:R,isRange:$,baseLine:V}=(e=Pt(A=>iVe(A,t.id,U)))!==null&&e!==void 0?e:{},j=SN();if(C!=="horizontal"&&C!=="vertical"||j==null||k!=="AreaChart"&&k!=="ComposedChart")return null;var{height:F,width:W,x:H,y:B}=j;return!R||!R.length?null:T.createElement(bVe,im({},E,{activeDot:r,animationBegin:i,animationDuration:s,animationEasing:o,baseLine:V,connectNulls:a,dot:l,fill:c,fillOpacity:u,height:F,hide:f,layout:C,isAnimationActive:m==="auto"?!K1.isSsr:m,isRange:$,legendType:g,needClip:O,points:R,stroke:v,width:W,left:H,top:B,xAxisId:x,yAxisId:b}))}var EVe=(t,e,n,r,i)=>{var s=n??e;if(wt(s))return s;var o=t==="horizontal"?i:r,a=o.scale.domain();if(o.type==="number"){var l=Math.max(a[0],a[1]),c=Math.min(a[0],a[1]);return s==="dataMin"?c:s==="dataMax"||l<0?l:Math.max(Math.min(a[0],a[1]),0)}return s==="dataMin"?a[0]:s==="dataMax"?a[1]:a[0]};function SVe(t){var{areaSettings:{connectNulls:e,baseValue:n,dataKey:r},stackedData:i,layout:s,chartBaseValue:o,xAxis:a,yAxis:l,displayedData:c,dataStartIndex:u,xAxisTicks:f,yAxisTicks:m,bandSize:g}=t,v=i&&i.length,x=EVe(s,o,n,a,l),b=s==="horizontal",E=!1,C=c.map((O,U)=>{var R,$,V;if(v)V=i[u+U];else{var j=Wn(O,r);Array.isArray(j)?(V=j,E=!0):V=[x,j]}var F=(R=($=V)===null||$===void 0?void 0:$[1])!==null&&R!==void 0?R:null,W=F==null||v&&!e&&Wn(O,r)==null;return b?{x:Ak({axis:a,ticks:f,bandSize:g,entry:O,index:U}),y:W?null:l.scale(F),value:V,payload:O}:{x:W?null:a.scale(F),y:Ak({axis:l,ticks:m,bandSize:g,entry:O,index:U}),value:V,payload:O}}),k;return v||E?k=C.map(O=>{var U=Array.isArray(O.value)?O.value[0]:null;return b?{x:O.x,y:U!=null&&O.y!=null?l.scale(U):null,payload:O.payload}:{x:U!=null?a.scale(U):null,y:O.y,payload:O.payload}}):k=b?l.scale(x):a.scale(x),{points:C,baseLine:k,isRange:E}}function AVe(t){var e=yi(t,sde),n=$i();return T.createElement(wN,{id:e.id,type:"area"},r=>T.createElement(T.Fragment,null,T.createElement($j,{legendPayload:dVe(e)}),T.createElement(fVe,{dataKey:e.dataKey,data:e.data,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:r}),T.createElement(zj,{type:"area",id:r,data:e.data,dataKey:e.dataKey,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,stackId:Mae(e.stackId),hide:e.hide,barSize:void 0,baseValue:e.baseValue,isPanorama:n,connectNulls:e.connectNulls}),T.createElement(wVe,im({},e,{id:r}))))}var TN=T.memo(AVe,lE);TN.displayName="Area";var TVe="Invariant failed";function kVe(t,e){throw new Error(TVe)}function fD(){return fD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fD.apply(null,arguments)}function tC(t){return T.createElement(jj,fD({shapeType:"rectangle",activeClassName:"recharts-active-bar"},t))}var CVe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(wt(e))return e;var s=wt(r)||Er(r);return s?e(r,i):(s||kVe(),n)}},NVe=(t,e,n)=>n,_Ve=(t,e)=>e,cE=Me([tE,_Ve],(t,e)=>t.filter(n=>n.type==="bar").find(n=>n.id===e)),IVe=Me([cE],t=>t==null?void 0:t.maxBarSize),PVe=(t,e,n,r)=>r,RVe=Me([An,tE,$c,zc,NVe],(t,e,n,r,i)=>e.filter(s=>t==="horizontal"?s.xAxisId===n:s.yAxisId===r).filter(s=>s.isPanorama===i).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),OVe=(t,e,n)=>{var r=An(t),i=$c(t,e),s=zc(t,e);if(!(i==null||s==null))return r==="horizontal"?qk(t,"yAxis",s,n):qk(t,"xAxis",i,n)},MVe=(t,e)=>{var n=An(t),r=$c(t,e),i=zc(t,e);if(!(r==null||i==null))return n==="horizontal"?OW(t,"xAxis",r):OW(t,"yAxis",i)},DVe=Me([RVe,Lje,MVe],Q$e),LVe=(t,e,n)=>{var r,i,s=cE(t,e);if(s!=null){var o=$c(t,e),a=zc(t,e);if(!(o==null||a==null)){var l=An(t),c=ace(t),{maxBarSize:u}=s,f=Er(u)?c:u,m,g;return l==="horizontal"?(m=jc(t,"xAxis",o,n),g=Lc(t,"xAxis",o,n)):(m=jc(t,"yAxis",a,n),g=Lc(t,"yAxis",a,n)),(r=(i=lh(m,g,!0))!==null&&i!==void 0?i:f)!==null&&r!==void 0?r:0}}},ode=(t,e,n)=>{var r=An(t),i=$c(t,e),s=zc(t,e);if(!(i==null||s==null)){var o,a;return r==="horizontal"?(o=jc(t,"xAxis",i,n),a=Lc(t,"xAxis",i,n)):(o=jc(t,"yAxis",s,n),a=Lc(t,"yAxis",s,n)),lh(o,a)}},jVe=Me([DVe,ace,Dje,lce,LVe,ode,IVe],rze),BVe=(t,e,n)=>{var r=$c(t,e);if(r!=null)return jc(t,"xAxis",r,n)},UVe=(t,e,n)=>{var r=zc(t,e);if(r!=null)return jc(t,"yAxis",r,n)},FVe=(t,e,n)=>{var r=$c(t,e);if(r!=null)return Lc(t,"xAxis",r,n)},$Ve=(t,e,n)=>{var r=zc(t,e);if(r!=null)return Lc(t,"yAxis",r,n)},zVe=Me([jVe,cE],(t,e)=>{if(!(t==null||e==null)){var n=t.find(r=>r.stackId===e.stackId&&e.dataKey!=null&&r.dataKeys.includes(e.dataKey));if(n!=null)return n.position}}),HVe=Me([OVe,cE],ize),VVe=Me([Si,y6,BVe,UVe,FVe,$Ve,zVe,An,Gle,ode,HVe,cE,PVe],(t,e,n,r,i,s,o,a,l,c,u,f,m)=>{var{chartData:g,dataStartIndex:v,dataEndIndex:x}=l;if(!(f==null||o==null||e==null||a!=="horizontal"&&a!=="vertical"||n==null||r==null||i==null||s==null||c==null)){var{data:b}=f,E;if(b!=null&&b.length>0?E=b:E=g==null?void 0:g.slice(v,x+1),E!=null)return vqe({layout:a,barSettings:f,pos:o,parentViewBox:e,bandSize:c,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:s,stackedData:u,displayedData:E,offset:t,cells:m,dataStartIndex:v})}}),qVe=["index"];function hD(){return hD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hD.apply(null,arguments)}function GVe(t,e){if(t==null)return{};var n,r,i=KVe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function KVe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var ade=T.createContext(void 0),WVe=t=>{var e=T.useContext(ade);if(e!=null)return e.stackId;if(t!=null)return Mae(t)},YVe=(t,e)=>"recharts-bar-stack-clip-path-".concat(t,"-").concat(e),JVe=t=>{var e=T.useContext(ade);if(e!=null){var{stackId:n}=e;return"url(#".concat(YVe(n,t),")")}},XVe=t=>{var{index:e}=t,n=GVe(t,qVe),r=JVe(e);return T.createElement(Wr,hD({className:"recharts-bar-stack-layer",clipPath:r},n))},QVe=["onMouseEnter","onMouseLeave","onClick"],ZVe=["value","background","tooltipPosition"],eqe=["id"],tqe=["onMouseEnter","onClick","onMouseLeave"];function vd(){return vd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vd.apply(null,arguments)}function QY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $s(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QY(Object(n),!0).forEach(function(r){nqe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nqe(t,e,n){return(e=rqe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rqe(t){var e=iqe(t,"string");return typeof e=="symbol"?e:e+""}function iqe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nC(t,e){if(t==null)return{};var n,r,i=sqe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function sqe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var oqe=t=>{var{dataKey:e,name:n,fill:r,legendType:i,hide:s}=t;return[{inactive:s,dataKey:e,type:i,color:r,value:yh(n,e),payload:t}]},aqe=T.memo(t=>{var{dataKey:e,stroke:n,strokeWidth:r,fill:i,name:s,hide:o,unit:a,tooltipType:l,id:c}=t,u={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:e,nameKey:void 0,name:yh(s,e),hide:o,type:l,color:i,unit:a,graphicalItemId:c}};return T.createElement(bN,{tooltipEntrySettings:u})});function lqe(t){var e=Pt(uh),{data:n,dataKey:r,background:i,allOtherBarProps:s}=t,{onMouseEnter:o,onMouseLeave:a,onClick:l}=s,c=nC(s,QVe),u=Bj(o,r,s.id),f=Uj(a),m=Fj(l,r,s.id);if(!i||n==null)return null;var g=gm(i);return T.createElement(Zs,{zIndex:sze(i,ri.barBackground)},n.map((v,x)=>{var{value:b,background:E,tooltipPosition:C}=v,k=nC(v,ZVe);if(!E)return null;var O=u(v,x),U=f(v,x),R=m(v,x),$=$s($s($s($s($s({option:i,isActive:String(x)===e},k),{},{fill:"#eee"},E),g),R2(c,v,x)),{},{onMouseEnter:O,onMouseLeave:U,onClick:R,dataKey:r,index:x,className:"recharts-bar-background-rectangle"});return T.createElement(tC,vd({key:"background-bar-".concat(x)},$))}))}function cqe(t){var{showLabels:e,children:n,rects:r}=t,i=r==null?void 0:r.map(s=>{var o={x:s.x,y:s.y,width:s.width,lowerWidth:s.width,upperWidth:s.width,height:s.height};return $s($s({},o),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:o,fill:s.fill})});return T.createElement(Rj,{value:e?i:void 0},n)}function uqe(t){var{shape:e,activeBar:n,baseProps:r,entry:i,index:s,dataKey:o}=t,a=Pt(uh),l=Pt(Tj),c=n&&String(s)===a&&(l==null||o===l),u=c?n:e;return c?T.createElement(Zs,{zIndex:ri.activeBar},T.createElement(tC,vd({},r,{name:String(r.name)},i,{isActive:c,option:u,index:s,dataKey:o}))):T.createElement(tC,vd({},r,{name:String(r.name)},i,{isActive:c,option:u,index:s,dataKey:o}))}function dqe(t){var{shape:e,baseProps:n,entry:r,index:i,dataKey:s}=t;return T.createElement(tC,vd({},n,{name:String(n.name)},r,{isActive:!1,option:e,index:i,dataKey:s}))}function fqe(t){var e,{data:n,props:r}=t,i=(e=Ys(r))!==null&&e!==void 0?e:{},{id:s}=i,o=nC(i,eqe),{shape:a,dataKey:l,activeBar:c}=r,{onMouseEnter:u,onClick:f,onMouseLeave:m}=r,g=nC(r,tqe),v=Bj(u,l,s),x=Uj(m),b=Fj(f,l,s);return n?T.createElement(T.Fragment,null,n.map((E,C)=>T.createElement(XVe,vd({index:C,key:"rectangle-".concat(E==null?void 0:E.x,"-").concat(E==null?void 0:E.y,"-").concat(E==null?void 0:E.value,"-").concat(C),className:"recharts-bar-rectangle"},R2(g,E,C),{onMouseEnter:v(E,C),onMouseLeave:x(E,C),onClick:b(E,C)}),c?T.createElement(uqe,{shape:a,activeBar:c,baseProps:o,entry:E,index:C,dataKey:l}):T.createElement(dqe,{shape:a,baseProps:o,entry:E,index:C,dataKey:l})))):null}function hqe(t){var{props:e,previousRectanglesRef:n}=t,{data:r,layout:i,isAnimationActive:s,animationBegin:o,animationDuration:a,animationEasing:l,onAnimationEnd:c,onAnimationStart:u}=e,f=n.current,m=Gx(e,"recharts-bar-"),[g,v]=T.useState(!1),x=!g,b=T.useCallback(()=>{typeof c=="function"&&c(),v(!1)},[c]),E=T.useCallback(()=>{typeof u=="function"&&u(),v(!0)},[u]);return T.createElement(cqe,{showLabels:x,rects:r},T.createElement(qx,{animationId:m,begin:o,duration:a,isActive:s,easing:l,onAnimationEnd:b,onAnimationStart:E,key:m},C=>{var k=C===1?r:r==null?void 0:r.map((O,U)=>{var R=f&&f[U];if(R)return $s($s({},O),{},{x:qn(R.x,O.x,C),y:qn(R.y,O.y,C),width:qn(R.width,O.width,C),height:qn(R.height,O.height,C)});if(i==="horizontal"){var $=qn(0,O.height,C),V=qn(O.stackedBarStart,O.y,C);return $s($s({},O),{},{y:V,height:$})}var j=qn(0,O.width,C),F=qn(O.stackedBarStart,O.x,C);return $s($s({},O),{},{width:j,x:F})});return C>0&&(n.current=k??null),k==null?null:T.createElement(Wr,null,T.createElement(fqe,{props:e,data:k}))}),T.createElement(yN,{label:e.label}),e.children)}function pqe(t){var e=T.useRef(null);return T.createElement(hqe,{previousRectanglesRef:e,props:t})}var lde=0,mqe=(t,e)=>{var n=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:n,errorVal:Wn(t,e)}};class gqe extends T.PureComponent{render(){var{hide:e,data:n,dataKey:r,className:i,xAxisId:s,yAxisId:o,needClip:a,background:l,id:c}=this.props;if(e||n==null)return null;var u=Rn("recharts-bar",i),f=c;return T.createElement(Wr,{className:u,id:c},a&&T.createElement("defs",null,T.createElement(Kj,{clipPathId:f,xAxisId:s,yAxisId:o})),T.createElement(Wr,{className:"recharts-bar-rectangles",clipPath:a?"url(#clipPath-".concat(f,")"):void 0},T.createElement(lqe,{data:n,dataKey:r,background:l,allOtherBarProps:this.props}),T.createElement(pqe,this.props)))}}var yqe={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:lde,xAxisId:0,yAxisId:0,zIndex:ri.bar};function xqe(t){var{xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:s,activeBar:o,animationBegin:a,animationDuration:l,animationEasing:c,isAnimationActive:u}=t,{needClip:f}=AN(e,n),m=xh(),g=$i(),v=Dj(t.children,nv),x=Pt(C=>VVe(C,t.id,g,v));if(m!=="vertical"&&m!=="horizontal")return null;var b,E=x==null?void 0:x[0];return E==null||E.height==null||E.width==null?b=0:b=m==="vertical"?E.height/2:E.width/2,T.createElement(Vue,{xAxisId:e,yAxisId:n,data:x,dataPointFormatter:mqe,errorBarOffset:b},T.createElement(gqe,vd({},t,{layout:m,needClip:f,data:x,xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:s,activeBar:o,animationBegin:a,animationDuration:l,animationEasing:c,isAnimationActive:u})))}function vqe(t){var{layout:e,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:s,xAxis:o,yAxis:a,xAxisTicks:l,yAxisTicks:c,stackedData:u,displayedData:f,offset:m,cells:g,parentViewBox:v,dataStartIndex:x}=t,b=e==="horizontal"?a:o,E=u?b.scale.domain():null,C=OMe({numericAxis:b}),k=b.scale(C);return f.map((O,U)=>{var R,$,V,j,F,W;if(u){var H=u[U+x];if(H==null)return null;R=NMe(H,E)}else R=Wn(O,n),Array.isArray(R)||(R=[C,R]);var B=CVe(r,lde)(R[1],U);if(e==="horizontal"){var A,[I,D]=[a.scale(R[0]),a.scale(R[1])];$=UG({axis:o,ticks:l,bandSize:s,offset:i.offset,entry:O,index:U}),V=(A=D??I)!==null&&A!==void 0?A:void 0,j=i.size;var z=I-D;if(F=Ha(z)?0:z,W={x:$,y:m.top,width:j,height:m.height},Math.abs(B)>0&&Math.abs(F)<Math.abs(B)){var G=Ui(F||B)*(Math.abs(B)-Math.abs(F));V-=G,F+=G}}else{var[te,K]=[o.scale(R[0]),o.scale(R[1])];if($=te,V=UG({axis:a,ticks:c,bandSize:s,offset:i.offset,entry:O,index:U}),j=K-te,F=i.size,W={x:m.left,y:V,width:m.width,height:F},Math.abs(B)>0&&Math.abs(j)<Math.abs(B)){var q=Ui(j||B)*(Math.abs(B)-Math.abs(j));j+=q}}if($==null||V==null||j==null||F==null)return null;var M=$s($s({},O),{},{stackedBarStart:k,x:$,y:V,width:j,height:F,value:u?R:R[1],payload:O,background:W,tooltipPosition:{x:$+j/2,y:V+F/2},parentViewBox:v},g&&g[U]&&g[U].props);return M}).filter(Boolean)}function bqe(t){var e=yi(t,yqe),n=WVe(e.stackId),r=$i();return T.createElement(wN,{id:e.id,type:"bar"},i=>T.createElement(T.Fragment,null,T.createElement($j,{legendPayload:oqe(e)}),T.createElement(aqe,{dataKey:e.dataKey,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:i}),T.createElement(zj,{type:"bar",id:i,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:n,hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:r}),T.createElement(Zs,{zIndex:e.zIndex},T.createElement(xqe,vd({},e,{id:i})))))}var cde=T.memo(bqe,lE);cde.displayName="Bar";var wqe=["domain","range"],Eqe=["domain","range"];function ZY(t,e){if(t==null)return{};var n,r,i=Sqe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Sqe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function eJ(t,e){return t===e?!0:Array.isArray(t)&&t.length===2&&Array.isArray(e)&&e.length===2?t[0]===e[0]&&t[1]===e[1]:!1}function ude(t,e){if(t===e)return!0;var{domain:n,range:r}=t,i=ZY(t,wqe),{domain:s,range:o}=e,a=ZY(e,Eqe);return!eJ(n,s)||!eJ(r,o)?!1:lE(i,a)}var Aqe=["dangerouslySetInnerHTML","ticks","scale"],Tqe=["id","scale"];function pD(){return pD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pD.apply(null,arguments)}function tJ(t,e){if(t==null)return{};var n,r,i=kqe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function kqe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Cqe(t){var e=_r(),n=T.useRef(null);return T.useLayoutEffect(()=>{n.current===null?e(j$e(t)):n.current!==t&&e(B$e({prev:n.current,next:t})),n.current=t},[t,e]),T.useLayoutEffect(()=>()=>{n.current&&(e(U$e(n.current)),n.current=null)},[e]),null}var Nqe=t=>{var{xAxisId:e,className:n}=t,r=Pt(y6),i=$i(),s="xAxis",o=Pt(E=>Fce(E,s,e,i)),a=Pt(E=>Lce(E,e)),l=Pt(E=>MBe(E,e)),c=Pt(E=>yce(E,e));if(a==null||l==null||c==null)return null;var{dangerouslySetInnerHTML:u,ticks:f,scale:m}=t,g=tJ(t,Aqe),{id:v,scale:x}=c,b=tJ(c,Tqe);return T.createElement(Gj,pD({},g,b,{x:l.x,y:l.y,width:a.width,height:a.height,className:Rn("recharts-".concat(s," ").concat(s),n),viewBox:r,ticks:o,axisType:s}))},_qe={allowDataOverflow:_i.allowDataOverflow,allowDecimals:_i.allowDecimals,allowDuplicatedCategory:_i.allowDuplicatedCategory,angle:_i.angle,axisLine:Zu.axisLine,height:_i.height,hide:!1,includeHidden:_i.includeHidden,interval:_i.interval,minTickGap:_i.minTickGap,mirror:_i.mirror,orientation:_i.orientation,padding:_i.padding,reversed:_i.reversed,scale:_i.scale,tick:_i.tick,tickCount:_i.tickCount,tickLine:Zu.tickLine,tickSize:Zu.tickSize,type:_i.type,xAxisId:0},Iqe=t=>{var e=yi(t,_qe);return T.createElement(T.Fragment,null,T.createElement(Cqe,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),T.createElement(Nqe,e))},Zw=T.memo(Iqe,ude);Zw.displayName="XAxis";var Pqe=["dangerouslySetInnerHTML","ticks","scale"],Rqe=["id","scale"];function mD(){return mD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mD.apply(null,arguments)}function nJ(t,e){if(t==null)return{};var n,r,i=Oqe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Oqe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Mqe(t){var e=_r(),n=T.useRef(null);return T.useLayoutEffect(()=>{n.current===null?e(F$e(t)):n.current!==t&&e($$e({prev:n.current,next:t})),n.current=t},[t,e]),T.useLayoutEffect(()=>()=>{n.current&&(e(z$e(n.current)),n.current=null)},[e]),null}var Dqe=t=>{var{yAxisId:e,className:n,width:r,label:i}=t,s=T.useRef(null),o=T.useRef(null),a=Pt(y6),l=$i(),c=_r(),u="yAxis",f=Pt(R=>jce(R,e)),m=Pt(R=>LBe(R,e)),g=Pt(R=>Fce(R,u,e,l)),v=Pt(R=>xce(R,e));if(T.useLayoutEffect(()=>{if(!(r!=="auto"||!f||Pj(i)||T.isValidElement(i)||v==null)){var R=s.current;if(R){var $=R.getCalculatedWidth();Math.round(f.width)!==Math.round($)&&c(H$e({id:e,width:$}))}}},[g,f,c,i,e,r,v]),f==null||m==null||v==null)return null;var{dangerouslySetInnerHTML:x,ticks:b,scale:E}=t,C=nJ(t,Pqe),{id:k,scale:O}=v,U=nJ(v,Rqe);return T.createElement(Gj,mD({},C,U,{ref:s,labelRef:o,x:m.x,y:m.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:f.width,height:f.height,className:Rn("recharts-".concat(u," ").concat(u),n),viewBox:a,ticks:g,axisType:u}))},Lqe={allowDataOverflow:Ii.allowDataOverflow,allowDecimals:Ii.allowDecimals,allowDuplicatedCategory:Ii.allowDuplicatedCategory,angle:Ii.angle,axisLine:Zu.axisLine,hide:!1,includeHidden:Ii.includeHidden,interval:Ii.interval,minTickGap:Ii.minTickGap,mirror:Ii.mirror,orientation:Ii.orientation,padding:Ii.padding,reversed:Ii.reversed,scale:Ii.scale,tick:Ii.tick,tickCount:Ii.tickCount,tickLine:Zu.tickLine,tickSize:Zu.tickSize,type:Ii.type,width:Ii.width,yAxisId:0},jqe=t=>{var e=yi(t,Lqe);return T.createElement(T.Fragment,null,T.createElement(Mqe,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),T.createElement(Dqe,e))},e1=T.memo(jqe,ude);e1.displayName="YAxis";var Bqe=(t,e)=>e,Yj=Me([Bqe,An,mce,Ti,nue,Pd,X7e,Si],iUe),Jj=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,r=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/r)}},dde=Va("mouseClick"),fde=V1();fde.startListening({actionCreator:dde,effect:(t,e)=>{var n=t.payload,r=Yj(e.getState(),Jj(n));(r==null?void 0:r.activeIndex)!=null&&e.dispatch(JBe({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var gD=Va("mouseMove"),hde=V1(),SA=null;hde.startListening({actionCreator:gD,effect:(t,e)=>{var n=t.payload;SA!==null&&cancelAnimationFrame(SA);var r=Jj(n);SA=requestAnimationFrame(()=>{var i=e.getState(),s=vj(i,i.tooltip.settings.shared);if(s==="axis"){var o=Yj(i,r);(o==null?void 0:o.activeIndex)!=null?e.dispatch(Wce({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate})):e.dispatch(Kce())}SA=null})}});function Uqe(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":t==="children"&&typeof e=="object"&&e!==null?"<<CHILDREN>>":e}var rJ={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},pde=vo({name:"rootProps",initialState:rJ,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:rJ.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue,t.reverseStackOrder=e.payload.reverseStackOrder}}}),Fqe=pde.reducer,{updateOptions:$qe}=pde.actions,mde=vo({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:zqe}=mde.actions,Hqe=mde.reducer,gde=Va("keyDown"),yde=Va("focus"),Xj=V1();Xj.startListening({actionCreator:gde,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,s=t.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var o=bj(i,tv(n),rE(n),oE(n)),a=o==null?-1:Number(o);if(!(!Number.isFinite(a)||a<0)){var l=Pd(n);if(s==="Enter"){var c=Kk(n,"axis","hover",String(i.index));e.dispatch(sD({active:!i.active,activeIndex:i.index,activeCoordinate:c}));return}var u=FBe(n),f=u==="left-to-right"?1:-1,m=s==="ArrowRight"?1:-1,g=a+m*f;if(!(l==null||g>=l.length||g<0)){var v=Kk(n,"axis","hover",String(g));e.dispatch(sD({active:!0,activeIndex:g.toString(),activeCoordinate:v}))}}}}}});Xj.startListening({actionCreator:yde,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var s="0",o=Kk(n,"axis","hover",String(s));e.dispatch(sD({active:!0,activeIndex:s,activeCoordinate:o}))}}}});var ba=Va("externalEvent"),xde=V1(),_O=new Map;xde.startListening({actionCreator:ba,effect:(t,e)=>{var{handler:n,reactEvent:r}=t.payload;if(n!=null){r.persist();var i=r.type,s=_O.get(i);s!==void 0&&cancelAnimationFrame(s);var o=requestAnimationFrame(()=>{try{var a=e.getState(),l={activeCoordinate:L7e(a),activeDataKey:Tj(a),activeIndex:uh(a),activeLabel:sue(a),activeTooltipIndex:uh(a),isTooltipActive:j7e(a)};n(l,r)}finally{_O.delete(i)}});_O.set(i,o)}}});var Vqe=Me([Zx],t=>t.tooltipItemPayloads),qqe=Me([Vqe,sE,(t,e)=>e,(t,e,n)=>n],(t,e,n,r)=>{var i=t.find(a=>a.settings.graphicalItemId===r);if(i!=null){var{positions:s}=i;if(s!=null){var o=e(s,n);return o}}}),vde=Va("touchMove"),bde=V1();bde.startListening({actionCreator:vde,effect:(t,e)=>{var n=t.payload;if(!(n.touches==null||n.touches.length===0)){var r=e.getState(),i=vj(r,r.tooltip.settings.shared);if(i==="axis"){var s=n.touches[0];if(s==null)return;var o=Yj(r,Jj({clientX:s.clientX,clientY:s.clientY,currentTarget:n.currentTarget}));(o==null?void 0:o.activeIndex)!=null&&e.dispatch(Wce({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate}))}else if(i==="item"){var a,l=n.touches[0];if(document.elementFromPoint==null||l==null)return;var c=document.elementFromPoint(l.clientX,l.clientY);if(!c||!c.getAttribute)return;var u=c.getAttribute(Lae),f=(a=c.getAttribute(jae))!==null&&a!==void 0?a:void 0,m=ev(r).find(x=>x.id===f);if(u==null||m==null||f==null)return;var{dataKey:g}=m,v=qqe(r,u,f);e.dispatch(Gce({activeDataKey:g,activeIndex:u,activeCoordinate:v,activeGraphicalItemId:f}))}}}});var Gqe=rae({brush:oze,cartesianAxis:V$e,chartData:MUe,errorBars:rHe,graphicalItems:X9e,layout:EMe,legend:NDe,options:_Ue,polarAxis:d9e,polarOptions:Hqe,referenceElements:hze,rootProps:Fqe,tooltip:XBe,zIndex:xUe}),Kqe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return K4e({reducer:Gqe,preloadedState:e,middleware:r=>{var i;return r({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((i="es6")!==null&&i!==void 0?i:"")}).concat([fde.middleware,hde.middleware,Xj.middleware,xde.middleware,bde.middleware])},enhancers:r=>{var i=r;return typeof r=="function"&&(i=r()),i.concat(xae({type:"raf"}))},devTools:{serialize:{replacer:Uqe},name:"recharts-".concat(n)}})};function wde(t){var{preloadedState:e,children:n,reduxStoreName:r}=t,i=$i(),s=T.useRef(null);if(i)return n;s.current==null&&(s.current=Kqe(e,r));var o=l6;return T.createElement(_He,{context:o,store:s.current},n)}function Wqe(t){var{layout:e,margin:n}=t,r=_r(),i=$i();return T.useEffect(()=>{i||(r(vMe(e)),r(xMe(n)))},[r,i,e,n]),null}var Ede=T.memo(Wqe,lE);function Sde(t){var e=_r();return T.useEffect(()=>{e($qe(t))},[e,t]),null}function iJ(t){var{zIndex:e,isPanorama:n}=t,r=T.useRef(null),i=_r();return T.useLayoutEffect(()=>(r.current&&i(gUe({zIndex:e,element:r.current,isPanorama:n})),()=>{i(yUe({zIndex:e,isPanorama:n}))}),[i,e,n]),T.createElement("g",{tabIndex:-1,ref:r})}function sJ(t){var{children:e,isPanorama:n}=t,r=Pt(oUe);if(!r||r.length===0)return e;var i=r.filter(o=>o<0),s=r.filter(o=>o>0);return T.createElement(T.Fragment,null,i.map(o=>T.createElement(iJ,{key:o,zIndex:o,isPanorama:n})),e,s.map(o=>T.createElement(iJ,{key:o,zIndex:o,isPanorama:n})))}var Yqe=["children"];function Jqe(t,e){if(t==null)return{};var n,r,i=Xqe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Xqe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function rC(){return rC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rC.apply(null,arguments)}var Qqe={width:"100%",height:"100%",display:"block"},Zqe=T.forwardRef((t,e)=>{var n=Hae(),r=Vae(),i=tle();if(!Mc(n)||!Mc(r))return null;var{children:s,otherAttributes:o,title:a,desc:l}=t,c,u;return o!=null&&(typeof o.tabIndex=="number"?c=o.tabIndex:c=i?0:void 0,typeof o.role=="string"?u=o.role:u=i?"application":void 0),T.createElement(boe,rC({},o,{title:a,desc:l,role:u,tabIndex:c,width:n,height:r,style:Qqe,ref:e}),s)}),eGe=t=>{var{children:e}=t,n=Pt(q2);if(!n)return null;var{width:r,height:i,y:s,x:o}=n;return T.createElement(boe,{width:r,height:i,x:o,y:s},e)},oJ=T.forwardRef((t,e)=>{var{children:n}=t,r=Jqe(t,Yqe),i=$i();return i?T.createElement(eGe,null,T.createElement(sJ,{isPanorama:!0},n)):T.createElement(Zqe,rC({ref:e},r),T.createElement(sJ,{isPanorama:!1},n))});function tGe(){var t=_r(),[e,n]=T.useState(null),r=Pt(UMe);return T.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),s=i.width/e.offsetWidth;cr(s)&&s!==r&&t(wMe(s))}},[e,t,r]),n}function aJ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function nGe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aJ(Object(n),!0).forEach(function(r){rGe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aJ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rGe(t,e,n){return(e=iGe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function iGe(t){var e=sGe(t,"string");return typeof e=="symbol"?e:e+""}function sGe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Am(){return Am=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Am.apply(null,arguments)}var oGe=()=>(HUe(),null);function iC(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var aGe=T.forwardRef((t,e)=>{var n,r,i=T.useRef(null),[s,o]=T.useState({containerWidth:iC((n=t.style)===null||n===void 0?void 0:n.width),containerHeight:iC((r=t.style)===null||r===void 0?void 0:r.height)}),a=T.useCallback((c,u)=>{o(f=>{var m=Math.round(c),g=Math.round(u);return f.containerWidth===m&&f.containerHeight===g?f:{containerWidth:m,containerHeight:g}})},[]),l=T.useCallback(c=>{if(typeof e=="function"&&e(c),c!=null&&typeof ResizeObserver<"u"){var{width:u,height:f}=c.getBoundingClientRect();a(u,f);var m=v=>{var{width:x,height:b}=v[0].contentRect;a(x,b)},g=new ResizeObserver(m);g.observe(c),i.current=g}},[e,a]);return T.useEffect(()=>()=>{var c=i.current;c!=null&&c.disconnect()},[a]),T.createElement(T.Fragment,null,T.createElement(K2,{width:s.containerWidth,height:s.containerHeight}),T.createElement("div",Am({ref:l},t)))}),lGe=T.forwardRef((t,e)=>{var{width:n,height:r}=t,[i,s]=T.useState({containerWidth:iC(n),containerHeight:iC(r)}),o=T.useCallback((l,c)=>{s(u=>{var f=Math.round(l),m=Math.round(c);return u.containerWidth===f&&u.containerHeight===m?u:{containerWidth:f,containerHeight:m}})},[]),a=T.useCallback(l=>{if(typeof e=="function"&&e(l),l!=null){var{width:c,height:u}=l.getBoundingClientRect();o(c,u)}},[e,o]);return T.createElement(T.Fragment,null,T.createElement(K2,{width:i.containerWidth,height:i.containerHeight}),T.createElement("div",Am({ref:a},t)))}),cGe=T.forwardRef((t,e)=>{var{width:n,height:r}=t;return T.createElement(T.Fragment,null,T.createElement(K2,{width:n,height:r}),T.createElement("div",Am({ref:e},t)))}),uGe=T.forwardRef((t,e)=>{var{width:n,height:r}=t;return hd(n)||hd(r)?T.createElement(lGe,Am({},t,{ref:e})):T.createElement(cGe,Am({},t,{ref:e}))});function dGe(t){return t===!0?aGe:uGe}var fGe=T.forwardRef((t,e)=>{var{children:n,className:r,height:i,onClick:s,onContextMenu:o,onDoubleClick:a,onMouseDown:l,onMouseEnter:c,onMouseLeave:u,onMouseMove:f,onMouseUp:m,onTouchEnd:g,onTouchMove:v,onTouchStart:x,style:b,width:E,responsive:C,dispatchTouchEvents:k=!0}=t,O=T.useRef(null),U=_r(),[R,$]=T.useState(null),[V,j]=T.useState(null),F=tGe(),W=x6(),H=(W==null?void 0:W.width)>0?W.width:E,B=(W==null?void 0:W.height)>0?W.height:i,A=T.useCallback(ce=>{F(ce),typeof e=="function"&&e(ce),$(ce),j(ce),ce!=null&&(O.current=ce)},[F,e,$,j]),I=T.useCallback(ce=>{U(dde(ce)),U(ba({handler:s,reactEvent:ce}))},[U,s]),D=T.useCallback(ce=>{U(gD(ce)),U(ba({handler:c,reactEvent:ce}))},[U,c]),z=T.useCallback(ce=>{U(Kce()),U(ba({handler:u,reactEvent:ce}))},[U,u]),G=T.useCallback(ce=>{U(gD(ce)),U(ba({handler:f,reactEvent:ce}))},[U,f]),te=T.useCallback(()=>{U(yde())},[U]),K=T.useCallback(ce=>{U(gde(ce.key))},[U]),q=T.useCallback(ce=>{U(ba({handler:o,reactEvent:ce}))},[U,o]),M=T.useCallback(ce=>{U(ba({handler:a,reactEvent:ce}))},[U,a]),_=T.useCallback(ce=>{U(ba({handler:l,reactEvent:ce}))},[U,l]),Y=T.useCallback(ce=>{U(ba({handler:m,reactEvent:ce}))},[U,m]),X=T.useCallback(ce=>{U(ba({handler:x,reactEvent:ce}))},[U,x]),re=T.useCallback(ce=>{k&&U(vde(ce)),U(ba({handler:v,reactEvent:ce}))},[U,k,v]),oe=T.useCallback(ce=>{U(ba({handler:g,reactEvent:ce}))},[U,g]),Ee=dGe(C);return T.createElement(hue.Provider,{value:R},T.createElement(COe.Provider,{value:V},T.createElement(Ee,{width:H??(b==null?void 0:b.width),height:B??(b==null?void 0:b.height),className:Rn("recharts-wrapper",r),style:nGe({position:"relative",cursor:"default",width:H,height:B},b),onClick:I,onContextMenu:q,onDoubleClick:M,onFocus:te,onKeyDown:K,onMouseDown:_,onMouseEnter:D,onMouseLeave:z,onMouseMove:G,onMouseUp:Y,onTouchEnd:oe,onTouchMove:re,onTouchStart:X,ref:A},T.createElement(oGe,null),n)))}),hGe=["width","height","responsive","children","className","style","compact","title","desc"];function pGe(t,e){if(t==null)return{};var n,r,i=mGe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function mGe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Ade=T.forwardRef((t,e)=>{var{width:n,height:r,responsive:i,children:s,className:o,style:a,compact:l,title:c,desc:u}=t,f=pGe(t,hGe),m=Ys(f);return l?T.createElement(T.Fragment,null,T.createElement(K2,{width:n,height:r}),T.createElement(oJ,{otherAttributes:m,title:c,desc:u},s)):T.createElement(fGe,{className:o,style:a,width:n,height:r,responsive:i??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},T.createElement(oJ,{otherAttributes:m,title:c,desc:u,ref:e},T.createElement(mze,null,s)))});function yD(){return yD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yD.apply(null,arguments)}var gGe={top:5,right:5,bottom:5,left:5},yGe={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:gGe,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},Qj=T.forwardRef(function(e,n){var r,i=yi(e.categoricalChartProps,yGe),{chartName:s,defaultTooltipEventType:o,validateTooltipEventTypes:a,tooltipPayloadSearcher:l,categoricalChartProps:c}=e,u={chartName:s,defaultTooltipEventType:o,validateTooltipEventTypes:a,tooltipPayloadSearcher:l,eventEmitter:void 0};return T.createElement(wde,{preloadedState:{options:u},reduxStoreName:(r=c.id)!==null&&r!==void 0?r:s},T.createElement(Bue,{chartData:c.data}),T.createElement(Ede,{layout:i.layout,margin:i.margin}),T.createElement(Sde,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),T.createElement(Ade,yD({},i,{ref:n})))}),xGe=["axis","item"],vGe=T.forwardRef((t,e)=>T.createElement(Qj,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:xGe,tooltipPayloadSearcher:mN,categoricalChartProps:t,ref:e}));function bGe(t){var e=_r();return T.useEffect(()=>{e(zqe(t))},[e,t]),null}var wGe=["layout"];function xD(){return xD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xD.apply(null,arguments)}function EGe(t,e){if(t==null)return{};var n,r,i=SGe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function SGe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var AGe={top:5,right:5,bottom:5,left:5},Tde={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:AGe,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},TGe=T.forwardRef(function(e,n){var r,i=yi(e.categoricalChartProps,Tde),{layout:s}=i,o=EGe(i,wGe),{chartName:a,defaultTooltipEventType:l,validateTooltipEventTypes:c,tooltipPayloadSearcher:u}=e,f={chartName:a,defaultTooltipEventType:l,validateTooltipEventTypes:c,tooltipPayloadSearcher:u,eventEmitter:void 0};return T.createElement(wde,{preloadedState:{options:f},reduxStoreName:(r=i.id)!==null&&r!==void 0?r:a},T.createElement(Bue,{chartData:i.data}),T.createElement(Ede,{layout:s,margin:i.margin}),T.createElement(Sde,{baseValue:void 0,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),T.createElement(bGe,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),T.createElement(Ade,xD({},o,{ref:n})))});function lJ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function cJ(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lJ(Object(n),!0).forEach(function(r){kGe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lJ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kGe(t,e,n){return(e=CGe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function CGe(t){var e=NGe(t,"string");return typeof e=="symbol"?e:e+""}function NGe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _Ge=["item"],IGe=cJ(cJ({},Tde),{},{layout:"centric",startAngle:0,endAngle:360}),kde=T.forwardRef((t,e)=>{var n=yi(t,IGe);return T.createElement(TGe,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:_Ge,tooltipPayloadSearcher:mN,categoricalChartProps:n,ref:e})}),PGe=["axis"],Cde=T.forwardRef((t,e)=>T.createElement(Qj,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:PGe,tooltipPayloadSearcher:mN,categoricalChartProps:t,ref:e})),RGe=["axis"],OGe=T.forwardRef((t,e)=>T.createElement(Qj,{chartName:"ComposedChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:RGe,tooltipPayloadSearcher:mN,categoricalChartProps:t,ref:e}));const MGe="https://api.devnet.solana.com",DGe="HWy1jotHpo6UqeQxx49dpYYdQB8wj9Qk9MdxwjLvDHB8",th=[{symbol:"SOL",name:"Solana",mint:"So11111111111111111111111111111111111111112",decimals:9,logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png"},{symbol:"USDC",name:"USD Coin (Devnet)",mint:"4zMMC9srt5Ri5X14GAgXhaHii3GnPAEERYPJgZJDncDU",decimals:6,logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v/logo.png"},{symbol:"RAY",name:"Raydium",mint:"4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R",decimals:6,logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R/logo.png"}],gc={SOL:145.5,USDC:1,RAY:1.85},uJ=({network:t})=>{const e={solana:"bg-[#9b87f5]/15 text-[#9b87f5] border-[#9b87f5]/30",hyperliquid:"bg-[#34d399]/15 text-[#34d399] border-[#34d399]/30",polymarket:"bg-[#60a5fa]/15 text-[#60a5fa] border-[#60a5fa]/30"},n={solana:"SOL",hyperliquid:"HL",polymarket:"PM"};return h.jsx("span",{className:`px-1.5 py-0.5 text-[10px] font-semibold rounded uppercase tracking-[0.05em] border ${e[t]}`,children:n[t]})},LGe=({vault:t,connectOwnerWallet:e,disconnectOwnerWallet:n,connectHLOwnerWallet:r,disconnectHLOwnerWallet:i,connectPMOwnerWallet:s,disconnectPMOwnerWallet:o,assetPrices:a,portfolioHistoryDaily:l,portfolioHistoryLongTerm:c,scheduledTasks:u,assetAllocationData:f,activityFeed:m,activityDisplayCount:g,setActivityDisplayCount:v,setActiveTab:x,refreshData:b,onNewChat:E})=>{const[C,k]=T.useState("all"),[O,U]=T.useState(0),R=2,[$,V]=T.useState("1D"),j=c.length,F=T.useMemo(()=>({"1D":l.length>0||j>=1,"1W":j>=7,"1M":j>=30,"1Y":j>=365}),[j,l.length]),W=T.useMemo(()=>{if($==="1D")return l;if(c.length===0)return[];const re={"1D":1,"1W":7,"1M":30,"1Y":365}[$]||30;return c.slice(-re)},[l,c,$]),[H,B]=T.useState(0),A=2,[I,D]=T.useState(null),[z,G]=T.useState("pie"),[te,K]=T.useState(null),[q,M]=T.useState(void 0),_=async X=>{try{await navigator.clipboard.writeText(X),D(X),setTimeout(()=>D(null),2e3)}catch(re){console.error("Failed to copy:",re)}},Y=X=>X.network==="solana"&&X.signature?`https://solscan.io/tx/${X.signature}?cluster=devnet`:X.network==="hyperliquid"&&X.signature?`https://app.hyperliquid-testnet.xyz/explorer/tx/${X.signature.replace("hl-","")}`:null;return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 2xl:grid-cols-4 gap-4 lg:gap-6",children:[h.jsxs("div",{className:"flex flex-col gap-4 lg:gap-6",children:[h.jsxs("div",{className:"glass-panel p-5 rounded relative overflow-hidden flex-1 flex flex-col justify-center group",children:[h.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 group-hover:opacity-10 transition-opacity",children:h.jsx(tx,{size:48,className:"text-white"})}),h.jsx("h3",{className:"text-[10px] uppercase tracking-[0.1em] text-[#747580] font-semibold mb-2",children:"Total Net Worth"}),h.jsxs("div",{className:"text-2xl lg:text-3xl font-semibold text-white tracking-tight",children:["$",f.totalValue.toFixed(2)]}),h.jsx("div",{className:"text-[11px] text-[#747580] mt-1",children:"Cross-Chain Unified Portfolio"})]}),h.jsxs("button",{onClick:E,className:"glass-panel p-5 rounded relative overflow-hidden flex-1 flex flex-col justify-center items-start text-left hover:bg-[#1a1b21] transition-colors group border border-dashed border-[#232328] hover:border-[#E7FE55]/50",children:[h.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 group-hover:opacity-10 transition-opacity text-[#E7FE55]",children:h.jsx(Su,{size:48})}),h.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[h.jsx("div",{className:"p-1.5 rounded bg-[#E7FE55]/15 text-[#E7FE55] group-hover:bg-[#E7FE55] group-hover:text-black transition-colors",children:h.jsx(Su,{size:16})}),h.jsx("h3",{className:"text-[#E7FE55] font-medium text-sm",children:"New Conversation"})]}),h.jsx("div",{className:"text-[11px] text-[#747580]",children:"Start a new task or query"})]})]}),h.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col",children:[h.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5",children:h.jsx(yo,{size:48,className:"text-white"})}),h.jsx("div",{className:"flex items-center gap-2 mb-2",children:h.jsx("h3",{className:"text-[10px] uppercase tracking-[0.1em] text-[#747580] font-semibold",children:"Solana Vault"})}),h.jsxs("div",{className:"text-xl lg:text-2xl font-semibold text-white tracking-tight",children:[t.solBalance.toFixed(4)," SOL"]}),h.jsxs("div",{className:"text-[11px] text-[#E7FE55] mt-1",children:[" $",(t.solBalance*(a.SOL||gc.SOL)).toFixed(2)]}),h.jsxs("div",{className:"mt-4 pt-3 border-t border-[#232328]",children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsx("span",{className:"text-[10px] font-semibold uppercase tracking-[0.05em] text-[#747580]",children:"Vault Address"}),t.publicKey&&h.jsxs("a",{href:`https://solscan.io/address/${t.publicKey}?cluster=devnet`,target:"_blank",rel:"noopener noreferrer",className:"text-[10px] text-[#E7FE55] hover:text-[#f0ff85] flex items-center gap-1",title:"View on Solscan Explorer",children:[h.jsx(eT,{size:10})," Solscan"]})]}),t.publicKey?h.jsxs("div",{onClick:()=>_(t.publicKey),className:"flex items-center gap-2 cursor-pointer group",children:[h.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#E7FE55]"}),h.jsxs("span",{className:"text-xs text-white font-mono truncate group-hover:text-[#E7FE55] transition-colors",children:[t.publicKey.slice(0,4),"...",t.publicKey.slice(-4)]}),I===t.publicKey?h.jsx("span",{className:"text-[10px] text-[#E7FE55] ml-auto",children:"Copied!"}):h.jsx("span",{className:"text-[10px] text-[#747580] ml-auto opacity-0 group-hover:opacity-100 transition-opacity",children:"Click to copy"})]}):h.jsx("div",{className:"text-[10px] text-[#747580] italic",children:"Not created"})]}),h.jsxs("div",{className:"mt-3 pt-3 border-t border-[#232328]",children:[h.jsx("div",{className:"flex items-center justify-between mb-2",children:h.jsx("span",{className:"text-[10px] uppercase tracking-[0.05em] font-semibold text-[#747580]",children:"Solana Owner"})}),t.ownerPublicKey?h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{onClick:()=>_(t.ownerPublicKey),className:"flex items-center gap-2 cursor-pointer group flex-1",children:[h.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#E7FE55]"}),h.jsxs("span",{className:"text-xs text-white font-mono truncate group-hover:text-[#E7FE55] transition-colors",children:[t.ownerPublicKey.slice(0,4),"...",t.ownerPublicKey.slice(-4)]}),I===t.ownerPublicKey?h.jsx("span",{className:"text-[10px] text-[#E7FE55] ml-2",children:"Copied!"}):h.jsx("span",{className:"text-[10px] text-[#747580] ml-2 opacity-0 group-hover:opacity-100 transition-opacity",children:"Click to copy"})]}),h.jsx("button",{onClick:n,className:"ml-2 px-2 py-1 text-[10px] font-medium text-[#747580] hover:text-[#E7FE55] bg-transparent hover:bg-[#E7FE55]/10 rounded border border-[#232328] hover:border-[#E7FE55]/30 transition-colors flex-shrink-0",children:"Disconnect"})]}):h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("div",{className:"text-[10px] text-[#747580] italic",children:"Not connected"}),h.jsx("button",{onClick:e,className:"px-2 py-1 text-[10px] font-medium text-[#E7FE55] hover:text-[#f0ff85] bg-[#E7FE55]/10 hover:bg-[#E7FE55]/20 rounded border border-[#E7FE55]/20 transition-colors flex-shrink-0",children:"Connect"})]})]})]}),h.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col",children:[h.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5",children:h.jsx(In,{size:48,className:"text-white"})}),h.jsx("div",{className:"flex items-center gap-2 mb-2",children:h.jsx("h3",{className:"text-[10px] uppercase tracking-[0.1em] text-[#747580] font-semibold",children:"Hyperliquid Vault"})}),h.jsxs("div",{className:"text-xl lg:text-2xl font-semibold text-white tracking-tight",children:[(t.hlBalance||0).toFixed(2)," USDC"]}),h.jsx("div",{className:"text-[11px] text-[#747580] mt-1",children:t.hlPositions&&t.hlPositions.length>0?`${t.hlPositions.length} open position${t.hlPositions.length>1?"s":""}`:"No open positions"}),h.jsxs("div",{className:"mt-4 pt-3 border-t border-[#232328]",children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsx("span",{className:"text-[10px] font-semibold uppercase tracking-[0.05em] text-[#747580]",children:"Vault Address"}),h.jsxs("a",{href:"https://app.hyperliquid-testnet.xyz",target:"_blank",rel:"noopener noreferrer",className:"text-[10px] text-[#E7FE55] hover:text-[#f0ff85] flex items-center gap-1",title:"Hyperliquid Platform Official Website",children:[h.jsx(In,{size:10})," Hyperliquid"]})]}),t.hlPublicKey?h.jsxs("div",{onClick:()=>_(t.hlPublicKey),className:"flex items-center gap-2 cursor-pointer group",children:[h.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#E7FE55]"}),h.jsxs("span",{className:"text-xs text-white font-mono truncate group-hover:text-[#E7FE55] transition-colors",children:[t.hlPublicKey.slice(0,6),"...",t.hlPublicKey.slice(-4)]}),I===t.hlPublicKey?h.jsx("span",{className:"text-[10px] text-[#E7FE55] ml-auto",children:"Copied!"}):h.jsx("span",{className:"text-[10px] text-[#747580] ml-auto opacity-0 group-hover:opacity-100 transition-opacity",children:"Click to copy"})]}):h.jsx("div",{className:"text-[10px] text-[#747580] italic",children:"Not created"})]}),h.jsxs("div",{className:"mt-3 pt-3 border-t border-[#232328]",children:[h.jsx("div",{className:"flex items-center justify-between mb-2",children:h.jsx("span",{className:"text-[10px] uppercase tracking-[0.05em] font-semibold text-[#747580]",children:"Hyperliquid Owner"})}),t.hlOwnerPublicKey?h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{onClick:()=>_(t.hlOwnerPublicKey),className:"flex items-center gap-2 cursor-pointer group flex-1",children:[h.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#E7FE55]"}),h.jsxs("span",{className:"text-xs text-white font-mono truncate group-hover:text-[#E7FE55] transition-colors",children:[t.hlOwnerPublicKey.slice(0,4),"...",t.hlOwnerPublicKey.slice(-4)]}),I===t.hlOwnerPublicKey?h.jsx("span",{className:"text-[10px] text-[#E7FE55] ml-2",children:"Copied!"}):h.jsx("span",{className:"text-[10px] text-[#747580] ml-2 opacity-0 group-hover:opacity-100 transition-opacity",children:"Click to copy"})]}),h.jsx("button",{onClick:i,className:"ml-2 px-2 py-1 text-[10px] font-medium text-[#747580] hover:text-[#E7FE55] bg-transparent hover:bg-[#E7FE55]/10 rounded border border-[#232328] hover:border-[#E7FE55]/30 transition-colors flex-shrink-0",children:"Disconnect"})]}):h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("div",{className:"text-[10px] text-[#747580] italic",children:"Not connected"}),h.jsx("button",{onClick:r,className:"px-2 py-1 text-[10px] font-medium text-[#E7FE55] hover:text-[#f0ff85] bg-[#E7FE55]/10 hover:bg-[#E7FE55]/20 rounded border border-[#E7FE55]/20 transition-colors flex-shrink-0",children:"Connect"})]})]})]}),h.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col",children:[h.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5",children:h.jsx(eT,{size:48,className:"text-white"})}),h.jsx("div",{className:"flex items-center gap-2 mb-2",children:h.jsx("h3",{className:"text-[10px] uppercase tracking-[0.1em] text-[#747580] font-semibold",children:"Polymarket Vault"})}),h.jsxs("div",{className:"text-xl lg:text-2xl font-semibold text-white tracking-tight",children:[(t.pmBalance||0).toFixed(2)," USDC"]}),h.jsxs("div",{className:"text-[11px] text-[#E7FE55] mt-1",children:[" $",(t.pmBalance||0).toFixed(2)]}),h.jsxs("div",{className:"mt-4 pt-3 border-t border-[#232328]",children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsx("span",{className:"text-[10px] font-semibold uppercase tracking-[0.05em] text-[#747580]",children:"Vault Address"}),h.jsxs("a",{href:"https://polymarket.com",target:"_blank",rel:"noopener noreferrer",className:"text-[10px] text-[#E7FE55] hover:text-[#f0ff85] flex items-center gap-1",title:"Polymarket Platform",children:[h.jsx(eT,{size:10})," Polymarket"]})]}),t.pmPublicKey?h.jsxs("div",{onClick:()=>_(t.pmPublicKey),className:"flex items-center gap-2 cursor-pointer group",children:[h.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#E7FE55]"}),h.jsxs("span",{className:"text-xs text-white font-mono truncate group-hover:text-[#E7FE55] transition-colors",children:[t.pmPublicKey.slice(0,6),"...",t.pmPublicKey.slice(-4)]}),I===t.pmPublicKey?h.jsx("span",{className:"text-[10px] text-[#E7FE55] ml-auto",children:"Copied!"}):h.jsx("span",{className:"text-[10px] text-[#747580] ml-auto opacity-0 group-hover:opacity-100 transition-opacity",children:"Click to copy"})]}):h.jsx("div",{className:"text-[10px] text-[#747580] italic",children:"Not created"})]}),h.jsxs("div",{className:"mt-3 pt-3 border-t border-[#232328]",children:[h.jsx("div",{className:"flex items-center justify-between mb-2",children:h.jsx("span",{className:"text-[10px] uppercase tracking-[0.05em] font-semibold text-[#747580]",children:"Polymarket Owner"})}),t.pmOwnerPublicKey?h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{onClick:()=>_(t.pmOwnerPublicKey),className:"flex items-center gap-2 cursor-pointer group flex-1",children:[h.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#E7FE55]"}),h.jsxs("span",{className:"text-xs text-white font-mono truncate group-hover:text-[#E7FE55] transition-colors",children:[t.pmOwnerPublicKey.slice(0,4),"...",t.pmOwnerPublicKey.slice(-4)]}),I===t.pmOwnerPublicKey?h.jsx("span",{className:"text-[10px] text-[#E7FE55] ml-2",children:"Copied!"}):h.jsx("span",{className:"text-[10px] text-[#747580] ml-2 opacity-0 group-hover:opacity-100 transition-opacity",children:"Click to copy"})]}),h.jsx("button",{onClick:o,className:"ml-2 px-2 py-1 text-[10px] font-medium text-[#747580] hover:text-[#E7FE55] bg-transparent hover:bg-[#E7FE55]/10 rounded border border-[#232328] hover:border-[#E7FE55]/30 transition-colors flex-shrink-0",children:"Disconnect"})]}):h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("div",{className:"text-[10px] text-[#747580] italic",children:"Not connected"}),h.jsx("button",{onClick:s,className:"px-2 py-1 text-[10px] font-medium text-[#E7FE55] hover:text-[#f0ff85] bg-[#E7FE55]/10 hover:bg-[#E7FE55]/20 rounded border border-[#E7FE55]/20 transition-colors flex-shrink-0",children:"Connect"})]})]})]})]}),h.jsxs("div",{className:"grid grid-cols-1 2xl:grid-cols-3 gap-6",children:[h.jsxs("div",{className:"2xl:col-span-2 space-y-6",children:[h.jsxs("div",{className:"glass-panel p-6 rounded",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 mb-6",children:[h.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[h.jsx(yo,{className:"text-[#E7FE55]",size:18}),"Portfolio Evolution"]}),h.jsx("div",{className:"flex gap-2",children:["1D","1W","1M","1Y"].map(X=>{const re=F[X],oe=X===$;return h.jsx("button",{disabled:!re,onClick:()=>re&&V(X),className:`px-3 py-1 rounded text-xs font-medium transition-colors ${re?oe?"bg-[#E7FE55]/15 text-[#E7FE55] border border-[#E7FE55]/30":"text-[#747580] hover:text-[#a0a1a8] hover:bg-[#1a1b21]":"text-[#3a3a40] cursor-not-allowed"}`,children:X},X)})})]}),h.jsx("div",{className:"h-[250px] lg:h-[300px] w-full",children:h.jsx(Uw,{width:"100%",height:"100%",children:h.jsxs(OGe,{data:W.length>0?W:[],children:[h.jsx("defs",{children:h.jsxs("linearGradient",{id:"colorValue",x1:"0",y1:"0",x2:"0",y2:"1",children:[h.jsx("stop",{offset:"5%",stopColor:"#E7FE55",stopOpacity:.25}),h.jsx("stop",{offset:"50%",stopColor:"#E7FE55",stopOpacity:.08}),h.jsx("stop",{offset:"95%",stopColor:"#E7FE55",stopOpacity:0})]})}),h.jsx(Xw,{strokeDasharray:"3 3",stroke:"#232328",vertical:!1}),h.jsx(Zw,{dataKey:"date",stroke:"#747580",tick:{fill:"#747580",fontSize:10},tickLine:!1,axisLine:!1}),h.jsx(e1,{stroke:"#747580",tick:{fill:"#747580",fontSize:10},tickLine:!1,axisLine:!1,tickFormatter:X=>`$${X}`,width:50}),h.jsx(Wk,{contentStyle:{backgroundColor:"#14151a",borderColor:"#232328",borderRadius:"4px"},itemStyle:{color:"#e4e5e9"},labelStyle:{color:"#747580"},itemSorter:X=>({value:0,solValue:1,hlValue:2,pmValue:3})[X.dataKey]??10,formatter:(X,re)=>[`$${X.toFixed(2)}`,re==="value"?"Total Value":re==="solValue"?"SOL Value":re==="hlValue"?"HL Value":re==="pmValue"?"PM Value":re]}),h.jsx(TN,{type:"monotone",dataKey:"value",stroke:"#E7FE55",strokeWidth:1.5,fillOpacity:1,fill:"url(#colorValue)"}),h.jsx(ET,{type:"monotone",dataKey:"solValue",stroke:"#9b87f5",strokeWidth:1.5,dot:!1}),h.jsx(ET,{type:"monotone",dataKey:"hlValue",stroke:"#34d399",strokeWidth:1.5,dot:!1}),h.jsx(ET,{type:"monotone",dataKey:"pmValue",stroke:"#60a5fa",strokeWidth:1.5,dot:!1})]})})}),h.jsxs("div",{className:"flex items-center justify-center gap-6 mt-4 text-[11px] text-[#747580]",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-2 h-2 rounded-full bg-[#E7FE55]"}),h.jsx("span",{children:"Total Value"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-2 h-2 rounded-full bg-[#9b87f5]"}),h.jsx("span",{children:"SOL Value"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-2 h-2 rounded-full bg-[#34d399]"}),h.jsx("span",{children:"HL Value"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-2 h-2 rounded-full bg-[#60a5fa]"}),h.jsx("span",{children:"PM Value"})]})]})]}),h.jsxs("div",{className:"glass-panel p-6 rounded",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[h.jsx(In,{className:"text-[#E7FE55]",size:18}),"Open Trading"]}),h.jsxs("button",{onClick:()=>x(Ce.HYPERLIQUID),className:"text-[10px] px-3 py-1.5 rounded uppercase tracking-wider font-medium transition-colors flex items-center gap-2 text-[#747580] hover:text-[#E7FE55] bg-transparent hover:bg-[#E7FE55]/10 border border-[#232328] hover:border-[#E7FE55]/30",children:[h.jsx(In,{size:12}),"Details"]})]}),!t.hlPositions||t.hlPositions.length===0?h.jsx("div",{className:"text-center py-8 text-[#747580] text-sm bg-[#14151a] rounded border border-[#232328]",children:"No open positions. Start trading to see your portfolio grow!"}):h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full text-left border-collapse",children:[h.jsx("thead",{children:h.jsxs("tr",{className:"text-[10px] uppercase tracking-[0.05em] text-[#747580] border-b border-[#232328]",children:[h.jsx("th",{className:"py-3 pl-4 font-medium",children:"Symbol"}),h.jsx("th",{className:"py-3 font-medium",children:"Size"}),h.jsx("th",{className:"py-3 font-medium",children:"Entry Price"}),h.jsx("th",{className:"py-3 font-medium",children:"Mark Price"}),h.jsx("th",{className:"py-3 font-medium",children:"Liq. Price"}),h.jsx("th",{className:"py-3 font-medium",children:"Leverage"}),h.jsx("th",{className:"py-3 pr-4 font-medium text-right",children:"Unrealized PnL"})]})}),h.jsx("tbody",{className:"text-sm",children:t.hlPositions.map((X,re)=>{const oe=parseFloat(X.position.szi),Ee=parseFloat(X.position.entryPx),ce=a[X.position.coin]||Ee,me=parseFloat(X.position.unrealizedPnl),ue=X.position.leverage.value,le=oe>0,Ie=le?Ee*(1-.9/ue):Ee*(1+.9/ue);return h.jsxs("tr",{className:"border-b border-[#232328]/50 last:border-0 hover:bg-[#1a1b21] transition-colors",children:[h.jsx("td",{className:"py-3 pl-4",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:`w-1 h-6 rounded-full ${le?"bg-[#34d399]":"bg-red-500"}`}),h.jsx("span",{className:"font-semibold text-white",children:X.position.coin}),h.jsx("span",{className:`text-[9px] px-1.5 py-0.5 rounded uppercase tracking-wider ${le?"bg-[#34d399]/15 text-[#34d399]":"bg-red-500/15 text-red-400"}`,children:le?"LONG":"SHORT"})]})}),h.jsx("td",{className:"py-3 text-[#a0a1a8]",children:Math.abs(oe).toFixed(4)}),h.jsxs("td",{className:"py-3 text-[#a0a1a8]",children:["$",Ee.toFixed(4)]}),h.jsxs("td",{className:"py-3 text-[#a0a1a8]",children:["$",ce.toFixed(4)]}),h.jsxs("td",{className:"py-3 text-orange-400/80",children:["$",Ie.toFixed(4)]}),h.jsxs("td",{className:"py-3 text-[#747580]",children:[ue,"x"]}),h.jsxs("td",{className:`py-3 pr-4 text-right font-medium ${me>=0?"text-[#34d399]":"text-red-400"}`,children:[me>=0?"+":"",me.toFixed(2)," USDC"]})]},re)})})]})})]}),h.jsxs("div",{className:"glass-panel p-6 rounded flex flex-col",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[h.jsx(Rs,{className:"text-[#E7FE55]",size:18}),"Open Tasks"]}),h.jsxs("span",{className:"text-[10px] bg-[#1a1b21] text-[#747580] px-2 py-1 rounded uppercase tracking-wider",children:[u.filter(X=>X.status==="active").length," Active"]}),h.jsxs("button",{onClick:()=>x(Ce.SCHEDULER),className:"text-[10px] px-3 py-1.5 rounded uppercase tracking-wider font-medium transition-colors flex items-center gap-2 text-[#747580] hover:text-[#E7FE55] bg-transparent hover:bg-[#E7FE55]/10 border border-[#232328] hover:border-[#E7FE55]/30",children:[h.jsx(Rs,{size:12}),"Details"]})]}),h.jsx("div",{className:"flex-1 flex flex-col",children:u.filter(X=>X.status==="active").length===0?h.jsx("div",{className:"text-center py-8 text-[#747580] text-sm my-auto bg-[#14151a] rounded border border-[#232328]",children:"No active tasks scheduled. Ask the AI to schedule a swap or transfer."}):h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"space-y-3",children:u.filter(X=>X.status==="active").slice(H*A,(H+1)*A).map(X=>h.jsxs("div",{className:"bg-[#14151a] p-4 rounded border border-[#232328] flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#E7FE55]"}),h.jsxs("div",{children:[h.jsxs("div",{className:"text-sm font-medium text-white flex items-center gap-2",children:[X.type,X.type==="HL_ORDER"&&h.jsx(uJ,{network:"hyperliquid"}),X.condition&&h.jsx("span",{className:"text-[10px] text-yellow-500",children:"(Condition)"})]}),h.jsx("div",{className:"text-[11px] text-[#747580]",children:X.condition?`${X.condition.indicator.toUpperCase()} ${X.condition.operator} ${X.condition.value} (${X.condition.symbol})`:`Executes in ${Math.max(0,Math.round(((X.executeAt||0)-Date.now())/6e4))} mins`})]})]}),h.jsxs("div",{className:"text-[10px] font-mono text-[#747580]",children:["ID: ",X.id.slice(-4)]})]},X.id))}),h.jsx("div",{className:"mt-auto",children:u.filter(X=>X.status==="active").length>A&&h.jsxs("div",{className:"flex items-center justify-between mt-4 pt-2 border-t border-[#232328]",children:[h.jsx("button",{onClick:()=>B(Math.max(0,H-1)),disabled:H===0,className:`p-1 rounded hover:bg-[#1a1b21] transition-colors ${H===0?"text-[#3a3b42] cursor-not-allowed":"text-[#747580]"}`,children:h.jsx(zT,{size:16})}),h.jsxs("span",{className:"text-[10px] text-[#747580]",children:["Page ",H+1," of ",Math.ceil(u.filter(X=>X.status==="active").length/A)]}),h.jsx("button",{onClick:()=>B(Math.min(Math.ceil(u.filter(X=>X.status==="active").length/A)-1,H+1)),disabled:H>=Math.ceil(u.filter(X=>X.status==="active").length/A)-1,className:`p-1 rounded hover:bg-[#1a1b21] transition-colors ${H>=Math.ceil(u.filter(X=>X.status==="active").length/A)-1?"text-[#3a3b42] cursor-not-allowed":"text-[#747580]"}`,children:h.jsx(id,{size:16})})]})})]})})]})]}),h.jsxs("div",{className:"space-y-6 flex flex-col",children:[h.jsxs("div",{className:"glass-panel p-6 rounded flex flex-col",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx("h3",{className:"text-sm font-semibold text-white",children:"Asset Allocation"}),h.jsxs("div",{className:"flex gap-1 bg-[#1a1b21] p-1 rounded border border-[#232328]",children:[h.jsx("button",{onClick:()=>G("bar"),className:`p-1.5 rounded transition-colors ${z==="bar"?"bg-[#232328] text-[#E7FE55]":"text-[#747580] hover:text-[#a0a1a8]"}`,title:"Bar View",children:h.jsx(tTe,{size:14})}),h.jsx("button",{onClick:()=>G("pie"),className:`p-1.5 rounded transition-colors ${z==="pie"?"bg-[#232328] text-[#E7FE55]":"text-[#747580] hover:text-[#a0a1a8]"}`,title:"Pie View",children:h.jsx(yw,{size:14})})]})]}),h.jsx("div",{className:"h-[180px] w-full relative flex-shrink-0",children:h.jsx(Uw,{width:"100%",height:"100%",children:z==="pie"?h.jsxs(kde,{children:[h.jsx(Hj,{data:f.data,cx:"50%",cy:"50%",innerRadius:45,outerRadius:q!==void 0?65:70,paddingAngle:3,dataKey:"value",onMouseEnter:(X,re)=>M(re),onMouseLeave:()=>M(void 0),animationBegin:0,animationDuration:800,animationEasing:"ease-out",children:f.data.map((X,re)=>h.jsx(nv,{fill:X.color,stroke:q===re?X.color:"transparent",strokeWidth:q===re?3:0,style:{cursor:"pointer",transition:"all 0.2s ease-out",filter:q===re?`brightness(1.2) drop-shadow(0 0 8px ${X.color})`:"brightness(1)",transform:q===re?"scale(1.05)":"scale(1)",transformOrigin:"center"}},`cell-${re}`))}),q!==void 0&&f.data[q]&&h.jsxs("g",{children:[h.jsx("text",{x:"50%",y:"42%",textAnchor:"middle",fill:"#fff",fontSize:12,fontWeight:"bold",children:f.data[q].symbol}),h.jsxs("text",{x:"50%",y:"54%",textAnchor:"middle",fill:f.data[q].color,fontSize:15,fontWeight:"bold",fontFamily:"monospace",children:["$",f.data[q].value.toFixed(2)]}),h.jsxs("text",{x:"50%",y:"65%",textAnchor:"middle",fill:"#747580",fontSize:10,children:[(f.data[q].value/(f.totalValue||1)*100).toFixed(1),"%"]})]}),q===void 0&&h.jsxs("g",{children:[h.jsx("text",{x:"50%",y:"46%",textAnchor:"middle",fill:"#747580",fontSize:10,style:{textTransform:"uppercase",letterSpacing:"0.1em"},children:"Total"}),h.jsxs("text",{x:"50%",y:"58%",textAnchor:"middle",fill:"#fff",fontSize:18,fontWeight:"600",children:["$",f.totalValue.toFixed(0)]})]})]}):h.jsxs(vGe,{data:[f.data.reduce((X,re)=>({...X,[re.symbol]:re.value}),{name:"Total"})],layout:"vertical",margin:{top:20,right:30,left:20,bottom:5},children:[h.jsx(Xw,{strokeDasharray:"3 3",horizontal:!0,vertical:!0,stroke:"#232328"}),h.jsx(Zw,{type:"number",tickFormatter:X=>`$${X}`,tick:{fill:"#747580",fontSize:10},tickLine:!1,axisLine:!1}),h.jsx(e1,{type:"category",dataKey:"name",hide:!0}),h.jsx(Wk,{cursor:{fill:"transparent"},content:({active:X,payload:re})=>{if(!X||!re||!re.length||!te)return null;const oe=re.find(Ee=>Ee.dataKey===te);return oe?h.jsxs("div",{className:"bg-[#14151a] border border-[#232328] p-2 rounded shadow-lg",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[h.jsx("div",{className:"w-1.5 h-1.5 rounded-full",style:{backgroundColor:oe.color}}),h.jsx("span",{className:"text-[#a0a1a8] font-semibold text-[11px]",children:oe.name})]}),h.jsxs("p",{className:"text-white font-mono text-sm",children:["$",Number(oe.value).toFixed(2)]})]}):null}}),f.data.map((X,re)=>h.jsx(cde,{dataKey:X.symbol,stackId:"a",fill:X.color,onMouseEnter:()=>K(X.symbol),onMouseLeave:()=>K(null),radius:re===0&&f.data.length===1?[4,4,4,4]:re===0?[4,0,0,4]:re===f.data.length-1?[0,4,4,0]:[0,0,0,0],barSize:40},X.symbol))]})})}),h.jsx("div",{className:"mt-4 space-y-1 flex-1 overflow-y-auto pr-2 custom-scrollbar",children:f.data.map((X,re)=>h.jsxs("div",{className:`flex items-center justify-between text-sm p-2 rounded-lg transition-all cursor-pointer ${q===re?"bg-[#232328]":"hover:bg-[#1a1b21]"}`,onMouseEnter:()=>M(re),onMouseLeave:()=>M(void 0),children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0 transition-transform",style:{backgroundColor:X.color,transform:q===re?"scale(1.3)":"scale(1)",boxShadow:q===re?`0 0 8px ${X.color}`:"none"}}),h.jsx("span",{className:`truncate max-w-[80px] sm:max-w-[100px] text-xs transition-colors ${q===re?"text-white":"text-[#a0a1a8]"}`,children:X.symbol}),X.network&&h.jsx("span",{className:`text-[9px] px-1 rounded uppercase tracking-wider ${X.network==="solana"?"bg-[#9b87f5]/15 text-[#9b87f5]":X.network==="hyperliquid"?"bg-[#34d399]/15 text-[#34d399]":"bg-[#60a5fa]/15 text-[#60a5fa]"}`,children:X.network==="solana"?"SOL":X.network==="hyperliquid"?"HL":"PM"})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs("span",{className:`text-xs font-mono transition-colors ${q===re?"text-white":"text-[#747580]"}`,children:["$",X.value.toFixed(2)]}),h.jsxs("span",{className:"text-xs font-mono font-semibold",style:{color:X.color},children:[(X.value/(f.totalValue||1)*100).toFixed(1),"%"]})]})]},re))})]}),h.jsxs("div",{className:"glass-panel p-6 rounded flex flex-col",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx("h3",{className:"text-sm font-semibold text-white",children:"Recent Activity"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>{k(C==="solana"?"all":"solana"),U(0)},className:`text-[9px] px-2 py-1 rounded uppercase tracking-wider font-medium transition-colors ${C==="solana"?"bg-[#9b87f5] text-white":"bg-[#9b87f5]/15 text-[#9b87f5] hover:bg-[#9b87f5]/25"}`,children:"SOL"}),h.jsx("button",{onClick:()=>{k(C==="hyperliquid"?"all":"hyperliquid"),U(0)},className:`text-[9px] px-2 py-1 rounded uppercase tracking-wider font-medium transition-colors ${C==="hyperliquid"?"bg-[#34d399] text-[#0f1015]":"bg-[#34d399]/15 text-[#34d399] hover:bg-[#34d399]/25"}`,children:"HL"})]})]}),h.jsx("div",{className:"flex-1 flex flex-col",children:m.filter(X=>C==="all"||X.network===C).length===0?h.jsx("div",{className:"text-center text-[#747580] text-sm py-4 my-auto bg-[#14151a] rounded border border-[#232328]",children:"No recent activity"}):h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"space-y-3",children:m.filter(X=>C==="all"||X.network===C).slice(O*R,(O+1)*R).map((X,re)=>h.jsxs("div",{className:"flex items-start gap-3 pb-3 border-b border-[#232328] last:border-0",children:[h.jsx("div",{className:`mt-1 p-1.5 rounded-full ${X.status==="failed"?"bg-red-500/15 text-red-400":X.network==="solana"?"bg-[#9b87f5]/15 text-[#9b87f5]":"bg-[#34d399]/15 text-[#34d399]"}`,children:X.status==="failed"?h.jsx(KAe,{size:14}):h.jsx(Ene,{size:14})}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("div",{className:"flex justify-between items-start gap-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:`text-sm font-medium ${X.status==="failed"?"text-red-400":X.network==="solana"?"text-[#9b87f5]":"text-[#34d399]"}`,children:X.type}),h.jsx(uJ,{network:X.network})]}),h.jsx("span",{className:"text-[10px] text-[#747580] flex-shrink-0",children:X.time})]}),h.jsx("div",{className:"text-[11px] text-[#747580] truncate mt-0.5",children:X.desc}),X.signature&&Y(X)&&h.jsxs("a",{href:Y(X),target:"_blank",rel:"noopener noreferrer",className:`text-[10px] ${X.network==="solana"?"text-[#9b87f5] hover:text-[#a78bfa]":"text-[#34d399] hover:text-[#4ade80]"} flex items-center gap-1 mt-1`,children:[X.network==="solana"?"View on Solscan Explorer":"View on HL Explorer"," ",h.jsx(ex,{size:10})]})]})]},re))}),h.jsx("div",{className:"mt-auto",children:m.filter(X=>C==="all"||X.network===C).length>R&&h.jsxs("div",{className:"flex items-center justify-between mt-4 pt-2 border-t border-[#232328]",children:[h.jsx("button",{onClick:()=>U(Math.max(0,O-1)),disabled:O===0,className:`p-1 rounded hover:bg-[#1a1b21] transition-colors ${O===0?"text-[#3a3b42] cursor-not-allowed":"text-[#747580]"}`,children:h.jsx(zT,{size:16})}),h.jsxs("span",{className:"text-[10px] text-[#747580]",children:["Page ",O+1," of ",Math.ceil(m.filter(X=>C==="all"||X.network===C).length/R)]}),h.jsx("button",{onClick:()=>U(Math.min(Math.ceil(m.filter(X=>C==="all"||X.network===C).length/R)-1,O+1)),disabled:O>=Math.ceil(m.filter(X=>C==="all"||X.network===C).length/R)-1,className:`p-1 rounded hover:bg-[#1a1b21] transition-colors ${O>=Math.ceil(m.filter(X=>C==="all"||X.network===C).length/R)-1?"text-[#3a3b42] cursor-not-allowed":"text-[#747580]"}`,children:h.jsx(id,{size:16})})]})})]})})]})]})]})]})},jGe=({vault:t,password:e,setPassword:n,withdrawAmount:r,setWithdrawAmount:i,withdrawNetwork:s,setWithdrawNetwork:o,isImporting:a,setIsImporting:l,importKey:c,setImportKey:u,createVault:f,unlockVault:m,requestAirdrop:g,handleWithdraw:v,handleWithdrawHL:x,handleWithdrawPM:b,importVault:E,addNotification:C,isImportingSolana:k,setIsImportingSolana:O,isImportingHyperliquid:U,setIsImportingHyperliquid:R,isImportingPolymarket:$,setIsImportingPolymarket:V,solanaPassword:j,setSolanaPassword:F,hyperliquidPassword:W,setHyperliquidPassword:H,polymarketPassword:B,setPolymarketPassword:A,solanaImportKey:I,setSolanaImportKey:D,hlImportKey:z,setHLImportKey:G,pmImportKey:te,setPMImportKey:K,createSolanaVault:q,createHyperliquidVault:M,createPolymarketVault:_,importSolanaVault:Y,importHyperliquidVault:X,importPolymarketVault:re,setActiveTab:oe,activeVaultTab:Ee,setActiveVaultTab:ce})=>{var At,ot,Bt,Zt;const me=T.useMemo(()=>{const Ge=(t.solBalance||0)*gc.SOL,Tt=t.hlBalance||0,ln=t.pmBalance||0;return Ge+Tt+ln},[t.solBalance,t.hlBalance,t.pmBalance]),ue=T.useMemo(()=>{const Ge=(t.solBalance||0)*gc.SOL,Tt=t.hlBalance||0,ln=t.pmBalance||0,Pe=Ge+Tt+ln;return{solana:{value:Ge,percent:Pe>0?Ge/Pe*100:0},hyperliquid:{value:Tt,percent:Pe>0?Tt/Pe*100:0},polymarket:{value:ln,percent:Pe>0?ln/Pe*100:0},total:Pe}},[t.solBalance,t.hlBalance,t.pmBalance]);!t.publicKey&&!t.hlPublicKey||t.isUnlocked;const le={solana:"#E7FE55",hyperliquid:"#E7FE55",polymarket:"#60a5fa"},Ie=()=>{const{solana:Ge,hyperliquid:Tt,polymarket:ln,total:Pe}=ue,[Ve,ht]=T.useState(void 0),ct=T.useMemo(()=>Pe===0?[]:[{name:"Solana",value:Ge.value,percent:Ge.percent,color:le.solana},{name:"Hyperliquid",value:Tt.value,percent:Tt.percent,color:le.hyperliquid},{name:"Polymarket",value:ln.value,percent:ln.percent,color:le.polymarket}].filter(Z=>Z.value>0),[Ge,Tt,ln,Pe]);if(Pe===0)return h.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[h.jsx("div",{className:"w-32 h-32 rounded-full bg-[#1a1b21] border-2 border-dashed border-[#232328] flex items-center justify-center",children:h.jsx(yw,{size:32,className:"text-[#747580]"})}),h.jsx("p",{className:"text-[#747580] text-xs mt-4",children:"No assets"})]});const se=(Z,fe)=>{ht(fe)},J=()=>{ht(void 0)};return h.jsxs("div",{className:"flex flex-col items-center justify-center h-full w-full gap-4",children:[h.jsx("div",{className:"w-full h-[180px] relative",children:h.jsx(Uw,{width:"100%",height:"100%",children:h.jsxs(kde,{children:[h.jsxs("defs",{children:[h.jsxs("linearGradient",{id:"solanaGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[h.jsx("stop",{offset:"0%",stopColor:"#E7FE55",stopOpacity:.8}),h.jsx("stop",{offset:"100%",stopColor:"#E7FE55",stopOpacity:.4})]}),h.jsxs("linearGradient",{id:"hyperliquidGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[h.jsx("stop",{offset:"0%",stopColor:"#f3ffad"}),h.jsx("stop",{offset:"100%",stopColor:"#E7FE55"})]}),h.jsxs("linearGradient",{id:"polymarketGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[h.jsx("stop",{offset:"0%",stopColor:"#7db4fb"}),h.jsx("stop",{offset:"100%",stopColor:"#60a5fa"})]})]}),h.jsx(Hj,{data:ct,cx:"50%",cy:"50%",innerRadius:45,outerRadius:Ve!==void 0?65:70,paddingAngle:3,dataKey:"value",onMouseEnter:se,onMouseLeave:J,animationBegin:0,animationDuration:800,animationEasing:"ease-out",children:ct.map((Z,fe)=>h.jsx(nv,{fill:Z.color,stroke:Ve===fe?Z.color:"transparent",strokeWidth:Ve===fe?3:0,style:{cursor:"pointer",transition:"all 0.2s ease-out",filter:Ve===fe?`brightness(1.2) drop-shadow(0 0 8px ${Z.color})`:"brightness(1)",transform:Ve===fe?"scale(1.05)":"scale(1)",transformOrigin:"center"}},`cell-${fe}`))}),Ve!==void 0&&ct[Ve]&&h.jsxs("g",{children:[h.jsx("text",{x:"50%",y:"45%",textAnchor:"middle",fill:"#fff",fontSize:13,fontWeight:"bold",children:ct[Ve].name}),h.jsxs("text",{x:"50%",y:"55%",textAnchor:"middle",fill:ct[Ve].color,fontSize:16,fontWeight:"bold",fontFamily:"monospace",children:["$",ct[Ve].value.toFixed(2)]}),h.jsxs("text",{x:"50%",y:"65%",textAnchor:"middle",fill:"#747580",fontSize:10,children:[ct[Ve].percent.toFixed(1),"%"]})]})]})})}),h.jsx("div",{className:"flex flex-col gap-2 w-full",children:ct.map((Z,fe)=>h.jsxs("div",{className:`flex items-center justify-between p-2 rounded-lg transition-all cursor-pointer ${Ve===fe?"bg-[#232328]":"hover:bg-[#1a1b21]"}`,onMouseEnter:()=>ht(fe),onMouseLeave:()=>ht(void 0),children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-3 h-3 rounded-full transition-transform",style:{backgroundColor:Z.color,transform:Ve===fe?"scale(1.3)":"scale(1)",boxShadow:Ve===fe?`0 0 8px ${Z.color}`:"none"}}),h.jsx("span",{className:`text-xs transition-colors ${Ve===fe?"text-white":"text-[#747580]"}`,children:Z.name})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs("span",{className:`text-xs font-mono transition-colors ${Ve===fe?"text-white":"text-[#747580]"}`,children:["$",Z.value.toFixed(2)]}),h.jsxs("span",{className:"text-xs font-mono font-semibold",style:{color:Z.color},children:[Z.percent.toFixed(1),"%"]})]})]},Z.name))})]})},Ne=h.jsxs("div",{className:"glass-panel p-4 flex flex-col h-full",children:[h.jsxs("div",{className:"flex items-center gap-2 swiss-label text-[#E7FE55] mb-3",children:[h.jsx(VT,{size:14}),"Fast Withdraw"]}),h.jsxs("div",{className:"flex gap-1 mb-3 bg-[#0f1015] p-1 rounded",children:[h.jsx("button",{onClick:()=>o("SOL"),className:`flex-1 py-1.5 text-[10px] font-semibold uppercase tracking-wider rounded transition-all ${s==="SOL"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-white"}`,children:"SOL"}),h.jsx("button",{onClick:()=>o("HYPE"),className:`flex-1 py-1.5 text-[10px] font-semibold uppercase tracking-wider rounded transition-all ${s==="HYPE"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-white"}`,children:"HYPE"}),h.jsx("button",{onClick:()=>o("POLY"),className:`flex-1 py-1.5 text-[10px] font-semibold uppercase tracking-wider rounded transition-all ${s==="POLY"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-white"}`,children:"POLY"})]}),h.jsxs("div",{className:"flex-1 flex flex-col justify-end space-y-3",children:[h.jsxs("div",{children:[h.jsx("label",{className:"swiss-label block mb-1.5",children:"Amount"}),h.jsxs("div",{className:"flex items-center relative",children:[h.jsx("input",{type:"number",value:r,onChange:Ge=>i(Ge.target.value),className:"w-full bg-[#0f1015] border border-[#232328] rounded pl-3 pr-12 py-2.5 text-sm text-white focus:ring-1 outline-none transition-all focus:ring-[#E7FE55]",placeholder:"0.00"}),h.jsx("button",{onClick:()=>{i(s==="SOL"?Math.max(0,t.solBalance-.005).toFixed(4):s==="HYPE"?Math.max(0,(t.hlBalance||0)-1).toFixed(2):Math.max(0,t.pmBalance||0).toFixed(2))},className:"absolute right-2 text-[9px] font-semibold px-1.5 py-0.5 rounded bg-[#E7FE55]/20 text-[#E7FE55]",children:"MAX"})]})]}),h.jsxs("button",{onClick:s==="SOL"?v:s==="HYPE"?x:b,disabled:s==="SOL"&&!t.publicKey||s==="HYPE"&&!t.hlPublicKey||s==="POLY"&&!t.pmPublicKey,className:`w-full font-semibold py-2.5 rounded transition-all flex items-center justify-center gap-2 text-xs ${s==="SOL"&&t.publicKey||s==="HYPE"&&t.hlPublicKey||s==="POLY"&&t.pmPublicKey?"bg-[#E7FE55] hover:brightness-110 text-black":"bg-[#1a1b21] text-[#747580] cursor-not-allowed"}`,children:[h.jsx(VT,{size:14}),s==="SOL"?"Withdraw SOL":"Withdraw USDC"]})]})]}),$e=h.jsxs("div",{className:"flex flex-col gap-6 flex-1",children:[h.jsxs("div",{className:"glass-panel glass-panel-solana p-4",children:[h.jsxs("div",{className:"flex items-center gap-2 swiss-label text-[#9b87f5] mb-3",children:[h.jsx("img",{src:th[0].logoURI,alt:"SOL",className:"w-4 h-4 rounded-full"}),"Solana Vault"]}),t.publicKey?h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"bg-[#0f1015] p-2 rounded border border-[#232328] flex items-center justify-between",children:[h.jsx("code",{className:"text-[10px] text-[#747580] font-mono truncate max-w-[200px]",children:t.publicKey}),h.jsx("button",{onClick:()=>{navigator.clipboard.writeText(t.publicKey),C("Copied!")},className:"text-[#747580] hover:text-white",children:h.jsx(Qp,{size:12})})]}),h.jsxs("div",{className:"flex justify-between items-end",children:[h.jsxs("div",{children:[h.jsx("div",{className:"swiss-label",children:"Balance"}),h.jsxs("div",{className:"text-xl font-bold text-white leading-none mt-1",children:[t.solBalance.toFixed(4)," ",h.jsx("span",{className:"text-xs text-[#747580]",children:"SOL"})]})]}),h.jsxs("div",{className:"text-xs text-[#9b87f5] font-mono",children:[" $",(t.solBalance*gc.SOL).toFixed(2)]})]})]}):h.jsxs("div",{className:"space-y-3 p-3 bg-[#0f1015] rounded border border-[#232328]",children:[h.jsx("p",{className:"text-xs text-[#747580]",children:"No Solana wallet found."}),h.jsx("input",{type:"password",value:j,onChange:Ge=>F(Ge.target.value),className:"w-full bg-[#14151a] border border-[#232328] rounded px-2 py-1.5 text-xs text-white focus:ring-1 focus:ring-[#9b87f5] outline-none",placeholder:"Password..."}),k&&h.jsx("input",{type:"password",value:I,onChange:Ge=>D(Ge.target.value),className:"w-full bg-[#14151a] border border-[#232328] rounded px-2 py-1.5 text-xs text-white focus:ring-1 focus:ring-[#9b87f5] outline-none font-mono",placeholder:"Private Key..."}),h.jsx("div",{className:"flex gap-2",children:k?h.jsxs(h.Fragment,{children:[h.jsx("button",{onClick:Y,className:"flex-1 bg-[#9b87f5] hover:bg-[#a896f7] text-white text-xs font-semibold py-1.5 rounded",children:"Confirm"}),h.jsx("button",{onClick:()=>O(!1),className:"px-2 py-1.5 text-[#747580] text-xs hover:text-white",children:"Cancel"})]}):h.jsxs(h.Fragment,{children:[h.jsxs("button",{onClick:q,className:"flex-1 bg-[#9b87f5] hover:bg-[#a896f7] text-white text-xs font-semibold py-1.5 rounded flex items-center justify-center gap-1",children:[h.jsx(Su,{size:12})," New"]}),h.jsxs("button",{onClick:()=>O(!0),className:"flex-1 bg-[#1a1b21] hover:bg-[#232328] text-white text-xs font-semibold py-1.5 rounded flex items-center justify-center gap-1 border border-[#232328]",children:[h.jsx(Uo,{size:12})," Import"]})]})})]})]}),t.publicKey&&h.jsxs("div",{className:"glass-panel glass-panel-solana flex flex-col overflow-hidden flex-1",children:[h.jsxs("div",{className:"px-4 py-3 border-b border-[#232328] flex items-center justify-between bg-[#0f1015]/50",children:[h.jsxs("div",{className:"flex items-center gap-2 swiss-label text-[#9b87f5]",children:[h.jsx(Pc,{size:12})," Solana Assets"]}),h.jsxs("span",{className:"text-[10px] text-[#747580] font-mono",children:[((At=t.assets)==null?void 0:At.filter(Ge=>!Ge.isNft&&Ge.symbol!=="SOL").length)||0," Assets"]})]}),h.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:h.jsxs("table",{className:"swiss-table w-full",children:[h.jsx("thead",{className:"sticky top-0 bg-[#0f1015]/90 backdrop-blur-sm",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-4",children:"Asset"}),h.jsx("th",{className:"px-4 text-right",children:"Balance"}),h.jsx("th",{className:"px-4 text-right",children:"Value"})]})}),h.jsxs("tbody",{children:[h.jsxs("tr",{children:[h.jsx("td",{className:"px-4",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-6 h-6 rounded bg-[#1a1b21] flex items-center justify-center",children:h.jsx("img",{src:th[0].logoURI,alt:"SOL",className:"w-4 h-4 rounded-full"})}),h.jsxs("div",{className:"flex flex-col",children:[h.jsx("span",{className:"text-xs font-semibold text-white leading-none",children:"SOL"}),h.jsx("span",{className:"text-[9px] text-[#747580]",children:"Native"})]})]})}),h.jsx("td",{className:"px-4 text-right font-mono text-xs text-slate-300",children:t.solBalance.toFixed(4)}),h.jsxs("td",{className:"px-4 text-right font-mono text-xs text-[#9b87f5]",children:["$",(t.solBalance*gc.SOL).toFixed(2)]})]}),t.assets&&t.assets.filter(Ge=>!Ge.isNft&&Ge.symbol!=="SOL").length>0?t.assets.filter(Ge=>!Ge.isNft&&Ge.symbol!=="SOL").map((Ge,Tt)=>h.jsxs("tr",{children:[h.jsx("td",{className:"px-4",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-6 h-6 rounded bg-[#1a1b21] flex items-center justify-center text-[10px] font-bold text-[#747580] border border-[#232328]",children:Ge.symbol[0]}),h.jsxs("div",{className:"flex flex-col",children:[h.jsx("span",{className:"text-xs font-semibold text-white leading-none",children:Ge.symbol}),h.jsx("span",{className:"text-[9px] text-[#747580] truncate max-w-[60px]",children:Ge.name})]})]})}),h.jsx("td",{className:"px-4 text-right font-mono text-xs text-slate-300",children:(parseFloat(Ge.amount)/Math.pow(10,Ge.decimals)).toFixed(4)}),h.jsx("td",{className:"px-4 text-right font-mono text-xs text-[#34d399]",children:Ge.symbol!=="UNKNOWN"?`$${(parseFloat(Ge.amount)/Math.pow(10,Ge.decimals)*(gc[Ge.symbol]||0)).toFixed(2)}`:"-"})]},Tt)):null]})]})})]})]}),Ze=h.jsxs("div",{className:"flex flex-col gap-6 flex-1",children:[h.jsxs("div",{className:"glass-panel glass-panel-hyperliquid p-4",children:[h.jsxs("div",{className:"flex items-center gap-2 swiss-label text-[#34d399] mb-3",children:[h.jsx(In,{size:14}),"Hyperliquid Vault"]}),t.hlPublicKey?h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"bg-[#0f1015] p-2 rounded border border-[#232328] flex items-center justify-between",children:[h.jsx("code",{className:"text-[10px] text-[#747580] font-mono truncate max-w-[200px]",children:t.hlPublicKey}),h.jsx("button",{onClick:()=>{t.hlPublicKey&&(navigator.clipboard.writeText(t.hlPublicKey),C("Copied!"))},className:"text-[#747580] hover:text-white",children:h.jsx(Qp,{size:12})})]}),h.jsxs("div",{className:"flex justify-between items-end",children:[h.jsxs("div",{children:[h.jsx("div",{className:"swiss-label",children:"Balance"}),h.jsxs("div",{className:"text-xl font-bold text-white leading-none mt-1",children:[((ot=t.hlBalance)==null?void 0:ot.toFixed(2))||"0.00"," ",h.jsx("span",{className:"text-xs text-[#747580]",children:"USDC"})]})]}),h.jsx("div",{className:"text-xs text-[#E7FE55] font-mono",children:"Testnet"})]})]}):h.jsxs("div",{className:"space-y-3 p-3 bg-[#0f1015] rounded border border-[#232328]",children:[h.jsx("p",{className:"text-xs text-[#747580]",children:"No Hyperliquid wallet found."}),h.jsx("input",{type:"password",value:W,onChange:Ge=>H(Ge.target.value),className:"w-full bg-[#14151a] border border-[#232328] rounded px-2 py-1.5 text-xs text-white focus:ring-1 focus:ring-[#E7FE55] outline-none",placeholder:"Password..."}),U&&h.jsx("input",{type:"password",value:z,onChange:Ge=>G(Ge.target.value),className:"w-full bg-[#14151a] border border-[#232328] rounded px-2 py-1.5 text-xs text-white focus:ring-1 focus:ring-[#E7FE55] outline-none font-mono",placeholder:"PrivKey (0x...)..."}),h.jsx("div",{className:"flex gap-2",children:U?h.jsxs(h.Fragment,{children:[h.jsx("button",{onClick:X,className:"flex-1 bg-[#E7FE55] hover:brightness-110 text-black text-xs font-semibold py-1.5 rounded",children:"Confirm"}),h.jsx("button",{onClick:()=>R(!1),className:"px-2 py-1.5 text-[#747580] text-xs hover:text-white",children:"Cancel"})]}):h.jsxs(h.Fragment,{children:[h.jsxs("button",{onClick:M,className:"flex-1 bg-[#E7FE55] hover:brightness-110 text-black text-xs font-semibold py-1.5 rounded flex items-center justify-center gap-1",children:[h.jsx(Su,{size:12})," New"]}),h.jsxs("button",{onClick:()=>R(!0),className:"flex-1 bg-[#1a1b21] hover:bg-[#232328] text-white text-xs font-semibold py-1.5 rounded flex items-center justify-center gap-1 border border-[#232328]",children:[h.jsx(Uo,{size:12})," Import"]})]})})]})]}),t.hlPublicKey&&h.jsxs("div",{className:"glass-panel glass-panel-hyperliquid flex flex-col overflow-hidden flex-1",children:[h.jsxs("div",{className:"px-4 py-3 border-b border-[#232328] flex items-center justify-between bg-[#0f1015]/50",children:[h.jsxs("div",{className:"flex items-center gap-2 swiss-label text-[#34d399]",children:[h.jsx(In,{size:12})," Active Positions"]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs("span",{className:"text-[10px] text-[#747580] font-mono",children:[((Bt=t.hlPositions)==null?void 0:Bt.filter(Ge=>parseFloat(Ge.position.szi)!==0).length)||0," Open"]}),h.jsxs("button",{onClick:()=>oe(Ce.HYPERLIQUID),className:"text-[10px] bg-[#E7FE55]/15 hover:bg-[#E7FE55]/25 text-[#E7FE55] border border-[#E7FE55]/30 px-2 py-1 rounded transition-colors flex items-center gap-1",children:[h.jsx(In,{size:10}),"Details"]})]})]}),h.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:h.jsxs("table",{className:"swiss-table w-full",children:[h.jsx("thead",{className:"sticky top-0 bg-[#0f1015]/90 backdrop-blur-sm",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-3",children:"Ticker"}),h.jsx("th",{className:"px-3",children:"Side"}),h.jsx("th",{className:"px-3 text-right",children:"Size"}),h.jsx("th",{className:"px-3 text-right",children:"PnL"})]})}),h.jsx("tbody",{children:t.hlPositions&&t.hlPositions.filter(Ge=>parseFloat(Ge.position.szi)!==0).length>0?t.hlPositions.filter(Ge=>parseFloat(Ge.position.szi)!==0).map((Ge,Tt)=>{const ln=parseFloat(Ge.position.szi),Pe=ln>0,Ve=parseFloat(Ge.position.unrealizedPnl||"0");return h.jsxs("tr",{children:[h.jsx("td",{className:"px-3",children:h.jsx("span",{className:"text-xs font-semibold text-white",children:Ge.position.coin})}),h.jsx("td",{className:"px-3",children:h.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded font-semibold ${Pe?"bg-[#34d399]/15 text-[#34d399]":"bg-red-500/15 text-red-400"}`,children:Pe?"LONG":"SHORT"})}),h.jsx("td",{className:"px-3 text-right font-mono text-xs text-slate-300",children:Math.abs(ln).toFixed(4)}),h.jsxs("td",{className:`px-3 text-right font-mono text-xs font-semibold ${Ve>=0?"text-[#34d399]":"text-red-400"}`,children:[Ve>=0?"+":"",Ve.toFixed(2)]})]},`hl-${Tt}`)}):h.jsx("tr",{children:h.jsx("td",{colSpan:4,className:"px-4 py-8 text-center text-[#747580] text-xs italic",children:"No active positions."})})})]})})]})]}),Ye=h.jsxs("div",{className:"flex flex-col gap-6 flex-1",children:[h.jsxs("div",{className:"glass-panel glass-panel-polymarket p-4",children:[h.jsxs("div",{className:"flex items-center gap-2 swiss-label text-[#60a5fa] mb-3",children:[h.jsx(El,{size:14}),"Polymarket Vault"]}),t.pmPublicKey?h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"bg-[#0f1015] p-2 rounded border border-[#232328] flex items-center justify-between",children:[h.jsx("code",{className:"text-[10px] text-[#747580] font-mono truncate max-w-[200px]",children:t.pmPublicKey}),h.jsx("button",{onClick:()=>{t.pmPublicKey&&(navigator.clipboard.writeText(t.pmPublicKey),C("Copied!"))},className:"text-[#747580] hover:text-white",children:h.jsx(Qp,{size:12})})]}),h.jsxs("div",{className:"flex justify-between items-end",children:[h.jsxs("div",{children:[h.jsx("div",{className:"swiss-label",children:"Balance"}),h.jsxs("div",{className:"text-xl font-bold text-white leading-none mt-1",children:[((Zt=t.pmBalance)==null?void 0:Zt.toFixed(2))||"0.00"," ",h.jsx("span",{className:"text-xs text-[#747580]",children:"USDC"})]})]}),h.jsx("div",{className:"text-xs text-[#60a5fa] font-mono",children:"Polygon"})]})]}):h.jsxs("div",{className:"space-y-3 p-3 bg-[#0f1015] rounded border border-[#232328]",children:[h.jsx("p",{className:"text-xs text-[#747580]",children:"No Polymarket wallet found."}),h.jsx("input",{type:"password",value:B,onChange:Ge=>A(Ge.target.value),className:"w-full bg-[#14151a] border border-[#232328] rounded px-2 py-1.5 text-xs text-white focus:ring-1 focus:ring-[#60a5fa] outline-none",placeholder:"Password..."}),$&&h.jsx("input",{type:"password",value:te,onChange:Ge=>K(Ge.target.value),className:"w-full bg-[#14151a] border border-[#232328] rounded px-2 py-1.5 text-xs text-white focus:ring-1 focus:ring-[#60a5fa] outline-none font-mono",placeholder:"PrivKey (0x...)..."}),h.jsx("div",{className:"flex gap-2",children:$?h.jsxs(h.Fragment,{children:[h.jsx("button",{onClick:re,className:"flex-1 bg-[#60a5fa] hover:bg-[#7db4fb] text-white text-xs font-semibold py-1.5 rounded",children:"Confirm"}),h.jsx("button",{onClick:()=>V(!1),className:"px-2 py-1.5 text-[#747580] text-xs hover:text-white",children:"Cancel"})]}):h.jsxs(h.Fragment,{children:[h.jsxs("button",{onClick:_,className:"flex-1 bg-[#60a5fa] hover:bg-[#7db4fb] text-white text-xs font-semibold py-1.5 rounded flex items-center justify-center gap-1",children:[h.jsx(Su,{size:12})," New"]}),h.jsxs("button",{onClick:()=>V(!0),className:"flex-1 bg-[#1a1b21] hover:bg-[#232328] text-white text-xs font-semibold py-1.5 rounded flex items-center justify-center gap-1 border border-[#232328]",children:[h.jsx(Uo,{size:12})," Import"]})]})})]})]}),t.pmPublicKey&&h.jsxs("div",{className:"glass-panel glass-panel-polymarket flex flex-col overflow-hidden flex-1",children:[h.jsxs("div",{className:"px-4 py-3 border-b border-[#232328] flex items-center justify-between bg-[#0f1015]/50",children:[h.jsxs("div",{className:"flex items-center gap-2 swiss-label text-[#60a5fa]",children:[h.jsx(El,{size:12})," Market Positions"]}),h.jsxs("button",{onClick:()=>oe(Ce.POLYMARKET_DASHBOARD),className:"text-[10px] bg-[#60a5fa]/15 hover:bg-[#60a5fa]/25 text-[#60a5fa] border border-[#60a5fa]/30 px-2 py-1 rounded transition-colors flex items-center gap-1",children:[h.jsx(El,{size:10}),"Details"]})]}),h.jsx("div",{className:"flex-1 flex items-center justify-center p-8",children:h.jsx("p",{className:"text-xs text-[#747580] text-center",children:"View your Polymarket positions in the Polymarket Dealer dashboard."})})]})]}),We=h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 flex-1",children:[h.jsxs("div",{className:"glass-panel p-4 flex flex-col",children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsxs("div",{className:"flex items-center gap-2 swiss-label text-white",children:[h.jsx(yw,{size:14}),"Asset Allocation"]}),h.jsxs("div",{className:"text-right",children:[h.jsx("div",{className:"text-[10px] text-[#747580] uppercase tracking-wider",children:"Net Worth"}),h.jsxs("div",{className:"text-lg font-bold font-mono text-white",children:["$",me.toFixed(2)]})]})]}),h.jsx("div",{className:"flex-1 flex items-center justify-center min-h-[200px]",children:h.jsx(Ie,{})})]}),Ne]});return h.jsx("div",{className:"h-full flex flex-col gap-6 overflow-y-auto custom-scrollbar p-1",children:!t.publicKey&&!t.hlPublicKey?h.jsxs(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-2xl mx-auto relative z-10 flex flex-col items-center justify-center flex-1",children:[h.jsxs(Ht.div,{initial:{scale:.8},animate:{scale:1},transition:{type:"spring",stiffness:200,damping:20},className:"w-20 h-20 glass-panel rounded-full flex items-center justify-center mb-6 border-[#E7FE55]/30 relative group",children:[h.jsx("div",{className:"absolute inset-0 bg-[#E7FE55]/5 rounded-full blur-xl group-hover:bg-[#E7FE55]/10 transition-colors"}),h.jsx(lm,{size:32,className:"text-[#E7FE55] relative z-10"})]}),h.jsx("h2",{className:"text-3xl font-bold text-white mb-2 text-center tracking-tight",children:"Configure Your Vault"}),h.jsx("p",{className:"text-[#747580] text-center mb-8 text-sm",children:"Securely manage your assets across multiple networks."}),h.jsxs("div",{className:"w-full grid grid-cols-1 md:grid-cols-3 gap-6",children:[h.jsxs("div",{className:"glass-panel glass-panel-solana p-6 space-y-4 border-[#9b87f5]/20 transition-transform duration-200 hover:-translate-y-1",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsx("div",{className:"w-10 h-10 bg-[#9b87f5]/10 rounded-lg flex items-center justify-center border border-[#9b87f5]/20",children:h.jsx("img",{src:th[0].logoURI,alt:"SOL",className:"w-5 h-5 rounded-full"})}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-white font-semibold",children:"Solana"}),h.jsx("span",{className:"text-[10px] text-[#9b87f5] uppercase tracking-widest font-bold",children:"Devnet"})]})]}),h.jsx("input",{type:"password",value:j,onChange:Ge=>F(Ge.target.value),className:"w-full bg-[#0f1015]/50 border border-[#232328] rounded-md px-3 py-3 text-white text-sm focus:ring-1 focus:ring-[#9b87f5]/50 outline-none transition-all placeholder:text-[#747580]",placeholder:"Wallet Password"}),k&&h.jsx("input",{type:"password",value:I,onChange:Ge=>D(Ge.target.value),className:"w-full bg-[#0f1015]/50 border border-[#232328] rounded-md px-3 py-3 text-white text-sm focus:ring-1 focus:ring-[#9b87f5]/50 outline-none transition-all font-mono placeholder:text-[#747580]",placeholder:"Private Key (Base58)"}),h.jsx("div",{className:"flex gap-2",children:k?h.jsxs(h.Fragment,{children:[h.jsxs("button",{onClick:Y,className:"flex-1 bg-[#9b87f5] hover:bg-[#a896f7] text-white font-bold py-3 rounded-md transition-all flex items-center justify-center gap-2 text-xs uppercase tracking-wider",children:[h.jsx(Uo,{size:14})," Import"]}),h.jsx("button",{onClick:()=>O(!1),className:"px-3 py-3 text-[#747580] hover:text-white text-xs font-semibold",children:"Cancel"})]}):h.jsxs(h.Fragment,{children:[h.jsxs("button",{onClick:q,className:"flex-1 bg-[#9b87f5] hover:bg-[#a896f7] text-white font-bold py-3 rounded-md transition-all flex items-center justify-center gap-2 text-xs uppercase tracking-wider",children:[h.jsx(Su,{size:14})," Create"]}),h.jsxs("button",{onClick:()=>O(!0),className:"flex-1 bg-[#1a1b21] hover:bg-[#232328] text-white font-bold py-3 rounded-md transition-all flex items-center justify-center gap-2 text-xs uppercase tracking-wider border border-[#232328]",children:[h.jsx(Uo,{size:14})," Import"]})]})})]}),h.jsxs("div",{className:"glass-panel p-6 space-y-4 border-[#34d399]/20 transition-transform duration-200 hover:-translate-y-1",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsx("div",{className:"w-10 h-10 bg-[#34d399]/10 rounded-lg flex items-center justify-center border border-[#34d399]/20",children:h.jsx(In,{size:20,className:"text-[#34d399]"})}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-white font-semibold",children:"Hyperliquid"}),h.jsx("span",{className:"text-[10px] text-[#34d399] uppercase tracking-widest font-bold",children:"Testnet"})]})]}),h.jsx("input",{type:"password",value:W,onChange:Ge=>H(Ge.target.value),className:"w-full bg-[#0f1015]/50 border border-[#232328] rounded-md px-3 py-3 text-white text-sm focus:ring-1 focus:ring-[#34d399]/50 outline-none transition-all placeholder:text-[#747580]",placeholder:"Wallet Password"}),U&&h.jsx("input",{type:"password",value:z,onChange:Ge=>G(Ge.target.value),className:"w-full bg-[#0f1015]/50 border border-[#232328] rounded-md px-3 py-3 text-white text-sm focus:ring-1 focus:ring-[#34d399]/50 outline-none transition-all font-mono placeholder:text-[#747580]",placeholder:"Private Key (0x...)"}),h.jsx("div",{className:"flex gap-2",children:U?h.jsxs(h.Fragment,{children:[h.jsxs("button",{onClick:X,className:"flex-1 bg-[#34d399] hover:bg-[#4ade80] text-white font-bold py-3 rounded-md transition-all flex items-center justify-center gap-2 text-xs uppercase tracking-wider",children:[h.jsx(Uo,{size:14})," Import"]}),h.jsx("button",{onClick:()=>R(!1),className:"px-3 py-3 text-[#747580] hover:text-white text-xs font-semibold",children:"Cancel"})]}):h.jsxs(h.Fragment,{children:[h.jsxs("button",{onClick:M,className:"flex-1 bg-[#34d399] hover:bg-[#4ade80] text-white font-bold py-3 rounded-md transition-all flex items-center justify-center gap-2 text-xs uppercase tracking-wider",children:[h.jsx(Su,{size:14})," Create"]}),h.jsxs("button",{onClick:()=>R(!0),className:"flex-1 bg-[#1a1b21] hover:bg-[#232328] text-white font-bold py-3 rounded-md transition-all flex items-center justify-center gap-2 text-xs uppercase tracking-wider border border-[#232328]",children:[h.jsx(Uo,{size:14})," Import"]})]})})]}),h.jsxs("div",{className:"glass-panel glass-panel-polymarket p-6 space-y-4 border-[#60a5fa]/20 transition-transform duration-200 hover:-translate-y-1",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsx("div",{className:"w-10 h-10 bg-[#60a5fa]/10 rounded-lg flex items-center justify-center border border-[#60a5fa]/20",children:h.jsx(El,{size:20,className:"text-[#60a5fa]"})}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-white font-semibold",children:"Polymarket"}),h.jsx("span",{className:"text-[10px] text-[#60a5fa] uppercase tracking-widest font-bold",children:"Polygon"})]})]}),h.jsx("input",{type:"password",value:B,onChange:Ge=>A(Ge.target.value),className:"w-full bg-[#0f1015]/50 border border-[#232328] rounded-md px-3 py-3 text-white text-sm focus:ring-1 focus:ring-[#60a5fa]/50 outline-none transition-all placeholder:text-[#747580]",placeholder:"Wallet Password"}),$&&h.jsx("input",{type:"password",value:te,onChange:Ge=>K(Ge.target.value),className:"w-full bg-[#0f1015]/50 border border-[#232328] rounded-md px-3 py-3 text-white text-sm focus:ring-1 focus:ring-[#60a5fa]/50 outline-none transition-all font-mono placeholder:text-[#747580]",placeholder:"Private Key (0x...)"}),h.jsx("div",{className:"flex gap-2",children:$?h.jsxs(h.Fragment,{children:[h.jsxs("button",{onClick:re,className:"flex-1 bg-[#60a5fa] hover:bg-[#7db4fb] text-white font-bold py-3 rounded-md transition-all flex items-center justify-center gap-2 text-xs uppercase tracking-wider",children:[h.jsx(Uo,{size:14})," Import"]}),h.jsx("button",{onClick:()=>V(!1),className:"px-3 py-3 text-[#747580] hover:text-white text-xs font-semibold",children:"Cancel"})]}):h.jsxs(h.Fragment,{children:[h.jsxs("button",{onClick:_,className:"flex-1 bg-[#60a5fa] hover:bg-[#7db4fb] text-white font-bold py-3 rounded-md transition-all flex items-center justify-center gap-2 text-xs uppercase tracking-wider",children:[h.jsx(Su,{size:14})," Create"]}),h.jsxs("button",{onClick:()=>V(!0),className:"flex-1 bg-[#1a1b21] hover:bg-[#232328] text-white font-bold py-3 rounded-md transition-all flex items-center justify-center gap-2 text-xs uppercase tracking-wider border border-[#232328]",children:[h.jsx(Uo,{size:14})," Import"]})]})})]})]}),h.jsx("p",{className:"text-xs text-[#747580] mt-8 text-center max-w-sm",children:"Wallets are stored locally and encrypted. Never share your private keys or password."})]}):t.isUnlocked?h.jsxs("div",{className:"flex flex-col gap-6 flex-1",children:[Ee==="main"&&We,Ee==="solana"&&$e,Ee==="hyperliquid"&&Ze,Ee==="polymarket"&&Ye]}):h.jsxs(Ht.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.4},className:"max-w-md mx-auto relative z-10 flex flex-col items-center justify-center flex-1 w-full",children:[h.jsxs(Ht.div,{animate:{rotate:[0,-10,10,-10,10,0]},transition:{delay:.5,duration:.5,ease:"easeInOut"},className:"w-24 h-24 glass-panel rounded-full flex items-center justify-center mb-8 border-[#E7FE55]/30 relative",children:[h.jsx("div",{className:"absolute inset-0 bg-[#E7FE55]/10 rounded-full blur-2xl animate-pulse"}),h.jsx(lm,{size:40,className:"text-[#E7FE55] relative z-10"})]}),h.jsx("h2",{className:"text-3xl font-bold text-white mb-2 text-center tracking-tight",children:"Vault Locked"}),h.jsx("p",{className:"text-[#747580] text-center mb-10 text-sm",children:"Authentication required to access your assets."}),h.jsxs("div",{className:"w-full glass-panel p-8 space-y-6 border-[#E7FE55]/10 shadow-2xl",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"swiss-label px-1",children:"Security Password"}),h.jsx("input",{type:"password",value:e,onChange:Ge=>n(Ge.target.value),className:"w-full bg-[#0f1015]/80 border border-[#232328] rounded-md px-4 py-4 text-white focus:ring-1 focus:ring-[#E7FE55]/50 outline-none transition-all placeholder:text-[#333540] text-lg font-mono",placeholder:"",onKeyDown:Ge=>Ge.key==="Enter"&&m()})]}),h.jsxs("button",{onClick:m,className:"w-full bg-[#E7FE55] hover:brightness-110 active:scale-[0.98] text-black font-bold py-4 rounded-md transition-all flex items-center justify-center gap-2 text-sm uppercase tracking-widest",children:[h.jsx(Tne,{size:18})," Unlock Vault"]})]})]})})};function BGe(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const UGe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,FGe=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,$Ge={};function dJ(t,e){return($Ge.jsx?FGe:UGe).test(t)}const zGe=/[ \t\n\f\r]/g;function HGe(t){return typeof t=="object"?t.type==="text"?fJ(t.value):!1:fJ(t)}function fJ(t){return t.replace(zGe,"")===""}class uE{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}}uE.prototype.normal={};uE.prototype.property={};uE.prototype.space=void 0;function Nde(t,e){const n={},r={};for(const i of t)Object.assign(n,i.property),Object.assign(r,i.normal);return new uE(n,r,e)}function vD(t){return t.toLowerCase()}class bo{constructor(e,n){this.attribute=n,this.property=e}}bo.prototype.attribute="";bo.prototype.booleanish=!1;bo.prototype.boolean=!1;bo.prototype.commaOrSpaceSeparated=!1;bo.prototype.commaSeparated=!1;bo.prototype.defined=!1;bo.prototype.mustUseProperty=!1;bo.prototype.number=!1;bo.prototype.overloadedBoolean=!1;bo.prototype.property="";bo.prototype.spaceSeparated=!1;bo.prototype.space=void 0;let VGe=0;const dn=Um(),ci=Um(),bD=Um(),at=Um(),hr=Um(),Zg=Um(),Oo=Um();function Um(){return 2**++VGe}const wD=Object.freeze(Object.defineProperty({__proto__:null,boolean:dn,booleanish:ci,commaOrSpaceSeparated:Oo,commaSeparated:Zg,number:at,overloadedBoolean:bD,spaceSeparated:hr},Symbol.toStringTag,{value:"Module"})),IO=Object.keys(wD);class Zj extends bo{constructor(e,n,r,i){let s=-1;if(super(e,n),hJ(this,"space",i),typeof r=="number")for(;++s<IO.length;){const o=IO[s];hJ(this,IO[s],(r&wD[o])===wD[o])}}}Zj.prototype.defined=!0;function hJ(t,e,n){n&&(t[e]=n)}function rv(t){const e={},n={};for(const[r,i]of Object.entries(t.properties)){const s=new Zj(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),e[r]=s,n[vD(r)]=r,n[vD(s.attribute)]=r}return new uE(e,n,t.space)}const _de=rv({properties:{ariaActiveDescendant:null,ariaAtomic:ci,ariaAutoComplete:null,ariaBusy:ci,ariaChecked:ci,ariaColCount:at,ariaColIndex:at,ariaColSpan:at,ariaControls:hr,ariaCurrent:null,ariaDescribedBy:hr,ariaDetails:null,ariaDisabled:ci,ariaDropEffect:hr,ariaErrorMessage:null,ariaExpanded:ci,ariaFlowTo:hr,ariaGrabbed:ci,ariaHasPopup:null,ariaHidden:ci,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:hr,ariaLevel:at,ariaLive:null,ariaModal:ci,ariaMultiLine:ci,ariaMultiSelectable:ci,ariaOrientation:null,ariaOwns:hr,ariaPlaceholder:null,ariaPosInSet:at,ariaPressed:ci,ariaReadOnly:ci,ariaRelevant:null,ariaRequired:ci,ariaRoleDescription:hr,ariaRowCount:at,ariaRowIndex:at,ariaRowSpan:at,ariaSelected:ci,ariaSetSize:at,ariaSort:null,ariaValueMax:at,ariaValueMin:at,ariaValueNow:at,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function Ide(t,e){return e in t?t[e]:e}function Pde(t,e){return Ide(t,e.toLowerCase())}const qGe=rv({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Zg,acceptCharset:hr,accessKey:hr,action:null,allow:null,allowFullScreen:dn,allowPaymentRequest:dn,allowUserMedia:dn,alt:null,as:null,async:dn,autoCapitalize:null,autoComplete:hr,autoFocus:dn,autoPlay:dn,blocking:hr,capture:null,charSet:null,checked:dn,cite:null,className:hr,cols:at,colSpan:null,content:null,contentEditable:ci,controls:dn,controlsList:hr,coords:at|Zg,crossOrigin:null,data:null,dateTime:null,decoding:null,default:dn,defer:dn,dir:null,dirName:null,disabled:dn,download:bD,draggable:ci,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:dn,formTarget:null,headers:hr,height:at,hidden:bD,high:at,href:null,hrefLang:null,htmlFor:hr,httpEquiv:hr,id:null,imageSizes:null,imageSrcSet:null,inert:dn,inputMode:null,integrity:null,is:null,isMap:dn,itemId:null,itemProp:hr,itemRef:hr,itemScope:dn,itemType:hr,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:dn,low:at,manifest:null,max:null,maxLength:at,media:null,method:null,min:null,minLength:at,multiple:dn,muted:dn,name:null,nonce:null,noModule:dn,noValidate:dn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:dn,optimum:at,pattern:null,ping:hr,placeholder:null,playsInline:dn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:dn,referrerPolicy:null,rel:hr,required:dn,reversed:dn,rows:at,rowSpan:at,sandbox:hr,scope:null,scoped:dn,seamless:dn,selected:dn,shadowRootClonable:dn,shadowRootDelegatesFocus:dn,shadowRootMode:null,shape:null,size:at,sizes:null,slot:null,span:at,spellCheck:ci,src:null,srcDoc:null,srcLang:null,srcSet:null,start:at,step:null,style:null,tabIndex:at,target:null,title:null,translate:null,type:null,typeMustMatch:dn,useMap:null,value:ci,width:at,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:hr,axis:null,background:null,bgColor:null,border:at,borderColor:null,bottomMargin:at,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:dn,declare:dn,event:null,face:null,frame:null,frameBorder:null,hSpace:at,leftMargin:at,link:null,longDesc:null,lowSrc:null,marginHeight:at,marginWidth:at,noResize:dn,noHref:dn,noShade:dn,noWrap:dn,object:null,profile:null,prompt:null,rev:null,rightMargin:at,rules:null,scheme:null,scrolling:ci,standby:null,summary:null,text:null,topMargin:at,valueType:null,version:null,vAlign:null,vLink:null,vSpace:at,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:dn,disableRemotePlayback:dn,prefix:null,property:null,results:at,security:null,unselectable:null},space:"html",transform:Pde}),GGe=rv({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Oo,accentHeight:at,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:at,amplitude:at,arabicForm:null,ascent:at,attributeName:null,attributeType:null,azimuth:at,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:at,by:null,calcMode:null,capHeight:at,className:hr,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:at,diffuseConstant:at,direction:null,display:null,dur:null,divisor:at,dominantBaseline:null,download:dn,dx:null,dy:null,edgeMode:null,editable:null,elevation:at,enableBackground:null,end:null,event:null,exponent:at,externalResourcesRequired:null,fill:null,fillOpacity:at,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Zg,g2:Zg,glyphName:Zg,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:at,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:at,horizOriginX:at,horizOriginY:at,id:null,ideographic:at,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:at,k:at,k1:at,k2:at,k3:at,k4:at,kernelMatrix:Oo,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:at,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:at,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:at,overlineThickness:at,paintOrder:null,panose1:null,path:null,pathLength:at,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:hr,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:at,pointsAtY:at,pointsAtZ:at,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Oo,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Oo,rev:Oo,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Oo,requiredFeatures:Oo,requiredFonts:Oo,requiredFormats:Oo,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:at,specularExponent:at,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:at,strikethroughThickness:at,string:null,stroke:null,strokeDashArray:Oo,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:at,strokeOpacity:at,strokeWidth:null,style:null,surfaceScale:at,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Oo,tabIndex:at,tableValues:null,target:null,targetX:at,targetY:at,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Oo,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:at,underlineThickness:at,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:at,values:null,vAlphabetic:at,vMathematical:at,vectorEffect:null,vHanging:at,vIdeographic:at,version:null,vertAdvY:at,vertOriginX:at,vertOriginY:at,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:at,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Ide}),Rde=rv({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),Ode=rv({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Pde}),Mde=rv({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),KGe={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},WGe=/[A-Z]/g,pJ=/-[a-z]/g,YGe=/^data[-\w.:]+$/i;function JGe(t,e){const n=vD(e);let r=e,i=bo;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&YGe.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(pJ,QGe);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!pJ.test(s)){let o=s.replace(WGe,XGe);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=Zj}return new i(r,e)}function XGe(t){return"-"+t.toLowerCase()}function QGe(t){return t.charAt(1).toUpperCase()}const ZGe=Nde([_de,qGe,Rde,Ode,Mde],"html"),eB=Nde([_de,GGe,Rde,Ode,Mde],"svg");function eKe(t){return t.join(" ").trim()}var Y0={},PO,mJ;function tKe(){if(mJ)return PO;mJ=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,a=/^\s+|\s+$/g,l=`
`,c="/",u="*",f="",m="comment",g="declaration";function v(b,E){if(typeof b!="string")throw new TypeError("First argument must be a string");if(!b)return[];E=E||{};var C=1,k=1;function O(A){var I=A.match(e);I&&(C+=I.length);var D=A.lastIndexOf(l);k=~D?A.length-D:k+A.length}function U(){var A={line:C,column:k};return function(I){return I.position=new R(A),j(),I}}function R(A){this.start=A,this.end={line:C,column:k},this.source=E.source}R.prototype.content=b;function $(A){var I=new Error(E.source+":"+C+":"+k+": "+A);if(I.reason=A,I.filename=E.source,I.line=C,I.column=k,I.source=b,!E.silent)throw I}function V(A){var I=A.exec(b);if(I){var D=I[0];return O(D),b=b.slice(D.length),I}}function j(){V(n)}function F(A){var I;for(A=A||[];I=W();)I!==!1&&A.push(I);return A}function W(){var A=U();if(!(c!=b.charAt(0)||u!=b.charAt(1))){for(var I=2;f!=b.charAt(I)&&(u!=b.charAt(I)||c!=b.charAt(I+1));)++I;if(I+=2,f===b.charAt(I-1))return $("End of comment missing");var D=b.slice(2,I-2);return k+=2,O(D),b=b.slice(I),k+=2,A({type:m,comment:D})}}function H(){var A=U(),I=V(r);if(I){if(W(),!V(i))return $("property missing ':'");var D=V(s),z=A({type:g,property:x(I[0].replace(t,f)),value:D?x(D[0].replace(t,f)):f});return V(o),z}}function B(){var A=[];F(A);for(var I;I=H();)I!==!1&&(A.push(I),F(A));return A}return j(),B()}function x(b){return b?b.replace(a,f):f}return PO=v,PO}var gJ;function nKe(){if(gJ)return Y0;gJ=1;var t=Y0&&Y0.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Y0,"__esModule",{value:!0}),Y0.default=n;const e=t(tKe());function n(r,i){let s=null;if(!r||typeof r!="string")return s;const o=(0,e.default)(r),a=typeof i=="function";return o.forEach(l=>{if(l.type!=="declaration")return;const{property:c,value:u}=l;a?i(c,u,l):u&&(s=s||{},s[c]=u)}),s}return Y0}var wb={},yJ;function rKe(){if(yJ)return wb;yJ=1,Object.defineProperty(wb,"__esModule",{value:!0}),wb.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,s=function(c){return!c||n.test(c)||t.test(c)},o=function(c,u){return u.toUpperCase()},a=function(c,u){return"".concat(u,"-")},l=function(c,u){return u===void 0&&(u={}),s(c)?c:(c=c.toLowerCase(),u.reactCompat?c=c.replace(i,a):c=c.replace(r,a),c.replace(e,o))};return wb.camelCase=l,wb}var Eb,xJ;function iKe(){if(xJ)return Eb;xJ=1;var t=Eb&&Eb.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},e=t(nKe()),n=rKe();function r(i,s){var o={};return!i||typeof i!="string"||(0,e.default)(i,function(a,l){a&&l&&(o[(0,n.camelCase)(a,s)]=l)}),o}return r.default=r,Eb=r,Eb}var sKe=iKe();const oKe=us(sKe),Dde=Lde("end"),tB=Lde("start");function Lde(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function aKe(t){const e=tB(t),n=Dde(t);if(e&&n)return{start:e,end:n}}function tw(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?vJ(t.position):"start"in t||"end"in t?vJ(t):"line"in t||"column"in t?ED(t):""}function ED(t){return bJ(t&&t.line)+":"+bJ(t&&t.column)}function vJ(t){return ED(t&&t.start)+"-"+ED(t&&t.end)}function bJ(t){return t&&typeof t=="number"?t:1}class Ds extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof e=="string"?i=e:!s.cause&&e&&(o=!0,i=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof r=="string"){const l=r.indexOf(":");l===-1?s.ruleId=r:(s.source=r.slice(0,l),s.ruleId=r.slice(l+1))}if(!s.place&&s.ancestors&&s.ancestors){const l=s.ancestors[s.ancestors.length-1];l&&(s.place=l.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=a?a.line:void 0,this.name=tw(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Ds.prototype.file="";Ds.prototype.name="";Ds.prototype.reason="";Ds.prototype.message="";Ds.prototype.stack="";Ds.prototype.column=void 0;Ds.prototype.line=void 0;Ds.prototype.ancestors=void 0;Ds.prototype.cause=void 0;Ds.prototype.fatal=void 0;Ds.prototype.place=void 0;Ds.prototype.ruleId=void 0;Ds.prototype.source=void 0;const nB={}.hasOwnProperty,lKe=new Map,cKe=/[A-Z]/g,uKe=new Set(["table","tbody","thead","tfoot","tr"]),dKe=new Set(["td","th"]),jde="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function fKe(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=bKe(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=vKe(n,e.jsx,e.jsxs)}const i={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?eB:ZGe,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=Bde(i,t,void 0);return s&&typeof s!="string"?s:i.create(t,i.Fragment,{children:s||void 0},void 0)}function Bde(t,e,n){if(e.type==="element")return hKe(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return pKe(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return gKe(t,e,n);if(e.type==="mdxjsEsm")return mKe(t,e);if(e.type==="root")return yKe(t,e,n);if(e.type==="text")return xKe(t,e)}function hKe(t,e,n){const r=t.schema;let i=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=eB,t.schema=i),t.ancestors.push(e);const s=Fde(t,e.tagName,!1),o=wKe(t,e);let a=iB(t,e);return uKe.has(e.tagName)&&(a=a.filter(function(l){return typeof l=="string"?!HGe(l):!0})),Ude(t,o,s,e),rB(o,a),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function pKe(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}t1(t,e.position)}function mKe(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);t1(t,e.position)}function gKe(t,e,n){const r=t.schema;let i=r;e.name==="svg"&&r.space==="html"&&(i=eB,t.schema=i),t.ancestors.push(e);const s=e.name===null?t.Fragment:Fde(t,e.name,!0),o=EKe(t,e),a=iB(t,e);return Ude(t,o,s,e),rB(o,a),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function yKe(t,e,n){const r={};return rB(r,iB(t,e)),t.create(e,t.Fragment,r,n)}function xKe(t,e){return e.value}function Ude(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function rB(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function vKe(t,e,n){return r;function r(i,s,o,a){const c=Array.isArray(o.children)?n:e;return a?c(s,o,a):c(s,o)}}function bKe(t,e){return n;function n(r,i,s,o){const a=Array.isArray(s.children),l=tB(r);return e(i,s,o,a,{columnNumber:l?l.column-1:void 0,fileName:t,lineNumber:l?l.line:void 0},void 0)}}function wKe(t,e){const n={};let r,i;for(i in e.properties)if(i!=="children"&&nB.call(e.properties,i)){const s=SKe(t,i,e.properties[i]);if(s){const[o,a]=s;t.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&dKe.has(e.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function EKe(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,t.evaluater.evaluateExpression(a.argument))}else t1(t,e.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const a=r.value.data.estree.body[0];a.type,s=t.evaluater.evaluateExpression(a.expression)}else t1(t,e.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function iB(t,e){const n=[];let r=-1;const i=t.passKeys?new Map:lKe;for(;++r<e.children.length;){const s=e.children[r];let o;if(t.passKeys){const l=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(l){const c=i.get(l)||0;o=l+"-"+c,i.set(l,c+1)}}const a=Bde(t,s,o);a!==void 0&&n.push(a)}return n}function SKe(t,e,n){const r=JGe(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?BGe(n):eKe(n)),r.property==="style"){let i=typeof n=="object"?n:AKe(t,String(n));return t.stylePropertyNameCase==="css"&&(i=TKe(i)),["style",i]}return[t.elementAttributeNameCase==="react"&&r.space?KGe[r.property]||r.property:r.attribute,n]}}function AKe(t,e){try{return oKe(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,i=new Ds("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=t.filePath||void 0,i.url=jde+"#cannot-parse-style-attribute",i}}function Fde(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const i=e.split(".");let s=-1,o;for(;++s<i.length;){const a=dJ(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=dJ(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const i=r.value;return nB.call(t.components,i)?t.components[i]:i}if(t.evaluater)return t.evaluater.evaluateExpression(r);t1(t)}function t1(t,e){const n=new Ds("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=jde+"#cannot-handle-mdx-estrees-without-createevaluater",n}function TKe(t){const e={};let n;for(n in t)nB.call(t,n)&&(e[kKe(n)]=t[n]);return e}function kKe(t){let e=t.replace(cKe,CKe);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function CKe(t){return"-"+t.toLowerCase()}const RO={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},NKe={};function sB(t,e){const n=NKe,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return $de(t,r,i)}function $de(t,e,n){if(_Ke(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return wJ(t.children,e,n)}return Array.isArray(t)?wJ(t,e,n):""}function wJ(t,e,n){const r=[];let i=-1;for(;++i<t.length;)r[i]=$de(t[i],e,n);return r.join("")}function _Ke(t){return!!(t&&typeof t=="object")}const EJ=document.createElement("i");function oB(t){const e="&"+t+";";EJ.innerHTML=e;const n=EJ.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function Jo(t,e,n,r){const i=t.length;let s=0,o;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(e,0),t.splice(...o),s+=1e4,e+=1e4}function Ma(t,e){return t.length>0?(Jo(t,t.length,0,e),t):e}const SJ={}.hasOwnProperty;function zde(t){const e={};let n=-1;for(;++n<t.length;)IKe(e,t[n]);return e}function IKe(t,e){let n;for(n in e){const i=(SJ.call(t,n)?t[n]:void 0)||(t[n]={}),s=e[n];let o;if(s)for(o in s){SJ.call(i,o)||(i[o]=[]);const a=s[o];PKe(i[o],Array.isArray(a)?a:a?[a]:[])}}}function PKe(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);Jo(t,0,0,r)}function Hde(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function kl(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const zs=wh(/[A-Za-z]/),Ns=wh(/[\dA-Za-z]/),RKe=wh(/[#-'*+\--9=?A-Z^-~]/);function sC(t){return t!==null&&(t<32||t===127)}const SD=wh(/\d/),OKe=wh(/[\dA-Fa-f]/),MKe=wh(/[!-/:-@[-`{-~]/);function Gt(t){return t!==null&&t<-2}function lr(t){return t!==null&&(t<0||t===32)}function Sn(t){return t===-2||t===-1||t===32}const kN=wh(new RegExp("\\p{P}|\\p{S}","u")),Tm=wh(/\s/);function wh(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function iv(t){const e=[];let n=-1,r=0,i=0;for(;++n<t.length;){const s=t.charCodeAt(n);let o="";if(s===37&&Ns(t.charCodeAt(n+1))&&Ns(t.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=t.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(e.push(t.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return e.join("")+t.slice(r)}function Pn(t,e,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(l){return Sn(l)?(t.enter(n),a(l)):e(l)}function a(l){return Sn(l)&&s++<i?(t.consume(l),a):(t.exit(n),e(l))}}const DKe={tokenize:LKe};function LKe(t){const e=t.attempt(this.parser.constructs.contentInitial,r,i);let n;return e;function r(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),Pn(t,e,"linePrefix")}function i(a){return t.enter("paragraph"),s(a)}function s(a){const l=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,o(a)}function o(a){if(a===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(a);return}return Gt(a)?(t.consume(a),t.exit("chunkText"),s):(t.consume(a),o)}}const jKe={tokenize:BKe},AJ={tokenize:UKe};function BKe(t){const e=this,n=[];let r=0,i,s,o;return a;function a(k){if(r<n.length){const O=n[r];return e.containerState=O[1],t.attempt(O[0].continuation,l,c)(k)}return c(k)}function l(k){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&C();const O=e.events.length;let U=O,R;for(;U--;)if(e.events[U][0]==="exit"&&e.events[U][1].type==="chunkFlow"){R=e.events[U][1].end;break}E(r);let $=O;for(;$<e.events.length;)e.events[$][1].end={...R},$++;return Jo(e.events,U+1,0,e.events.slice(O)),e.events.length=$,c(k)}return a(k)}function c(k){if(r===n.length){if(!i)return m(k);if(i.currentConstruct&&i.currentConstruct.concrete)return v(k);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(AJ,u,f)(k)}function u(k){return i&&C(),E(r),m(k)}function f(k){return e.parser.lazy[e.now().line]=r!==n.length,o=e.now().offset,v(k)}function m(k){return e.containerState={},t.attempt(AJ,g,v)(k)}function g(k){return r++,n.push([e.currentConstruct,e.containerState]),m(k)}function v(k){if(k===null){i&&C(),E(0),t.consume(k);return}return i=i||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),x(k)}function x(k){if(k===null){b(t.exit("chunkFlow"),!0),E(0),t.consume(k);return}return Gt(k)?(t.consume(k),b(t.exit("chunkFlow")),r=0,e.interrupt=void 0,a):(t.consume(k),x)}function b(k,O){const U=e.sliceStream(k);if(O&&U.push(null),k.previous=s,s&&(s.next=k),s=k,i.defineSkip(k.start),i.write(U),e.parser.lazy[k.start.line]){let R=i.events.length;for(;R--;)if(i.events[R][1].start.offset<o&&(!i.events[R][1].end||i.events[R][1].end.offset>o))return;const $=e.events.length;let V=$,j,F;for(;V--;)if(e.events[V][0]==="exit"&&e.events[V][1].type==="chunkFlow"){if(j){F=e.events[V][1].end;break}j=!0}for(E(r),R=$;R<e.events.length;)e.events[R][1].end={...F},R++;Jo(e.events,V+1,0,e.events.slice($)),e.events.length=R}}function E(k){let O=n.length;for(;O-- >k;){const U=n[O];e.containerState=U[1],U[0].exit.call(e,t)}n.length=k}function C(){i.write([null]),s=void 0,i=void 0,e.containerState._closeFlow=void 0}}function UKe(t,e,n){return Pn(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function bx(t){if(t===null||lr(t)||Tm(t))return 1;if(kN(t))return 2}function CN(t,e,n){const r=[];let i=-1;for(;++i<t.length;){const s=t[i].resolveAll;s&&!r.includes(s)&&(e=s(e,n),r.push(s))}return e}const AD={name:"attention",resolveAll:FKe,tokenize:$Ke};function FKe(t,e){let n=-1,r,i,s,o,a,l,c,u;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;l=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const f={...t[r][1].end},m={...t[n][1].start};TJ(f,-l),TJ(m,l),o={type:l>1?"strongSequence":"emphasisSequence",start:f,end:{...t[r][1].end}},a={type:l>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:m},s={type:l>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},i={type:l>1?"strong":"emphasis",start:{...o.start},end:{...a.end}},t[r][1].end={...o.start},t[n][1].start={...a.end},c=[],t[r][1].end.offset-t[r][1].start.offset&&(c=Ma(c,[["enter",t[r][1],e],["exit",t[r][1],e]])),c=Ma(c,[["enter",i,e],["enter",o,e],["exit",o,e],["enter",s,e]]),c=Ma(c,CN(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),c=Ma(c,[["exit",s,e],["enter",a,e],["exit",a,e],["exit",i,e]]),t[n][1].end.offset-t[n][1].start.offset?(u=2,c=Ma(c,[["enter",t[n][1],e],["exit",t[n][1],e]])):u=0,Jo(t,r-1,n-r+3,c),n=r+c.length-u-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function $Ke(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=bx(r);let s;return o;function o(l){return s=l,t.enter("attentionSequence"),a(l)}function a(l){if(l===s)return t.consume(l),a;const c=t.exit("attentionSequence"),u=bx(l),f=!u||u===2&&i||n.includes(l),m=!i||i===2&&u||n.includes(r);return c._open=!!(s===42?f:f&&(i||!m)),c._close=!!(s===42?m:m&&(u||!f)),e(l)}}function TJ(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const zKe={name:"autolink",tokenize:HKe};function HKe(t,e,n){let r=0;return i;function i(g){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(g){return zs(g)?(t.consume(g),o):g===64?n(g):c(g)}function o(g){return g===43||g===45||g===46||Ns(g)?(r=1,a(g)):c(g)}function a(g){return g===58?(t.consume(g),r=0,l):(g===43||g===45||g===46||Ns(g))&&r++<32?(t.consume(g),a):(r=0,c(g))}function l(g){return g===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.exit("autolink"),e):g===null||g===32||g===60||sC(g)?n(g):(t.consume(g),l)}function c(g){return g===64?(t.consume(g),u):RKe(g)?(t.consume(g),c):n(g)}function u(g){return Ns(g)?f(g):n(g)}function f(g){return g===46?(t.consume(g),r=0,u):g===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.exit("autolink"),e):m(g)}function m(g){if((g===45||Ns(g))&&r++<63){const v=g===45?m:f;return t.consume(g),v}return n(g)}}const dE={partial:!0,tokenize:VKe};function VKe(t,e,n){return r;function r(s){return Sn(s)?Pn(t,i,"linePrefix")(s):i(s)}function i(s){return s===null||Gt(s)?e(s):n(s)}}const Vde={continuation:{tokenize:GKe},exit:KKe,name:"blockQuote",tokenize:qKe};function qKe(t,e,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(t.enter("blockQuote",{_container:!0}),a.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),s}return n(o)}function s(o){return Sn(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function GKe(t,e,n){const r=this;return i;function i(o){return Sn(o)?Pn(t,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return t.attempt(Vde,e,n)(o)}}function KKe(t){t.exit("blockQuote")}const qde={name:"characterEscape",tokenize:WKe};function WKe(t,e,n){return r;function r(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),i}function i(s){return MKe(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(s)}}const Gde={name:"characterReference",tokenize:YKe};function YKe(t,e,n){const r=this;let i=0,s,o;return a;function a(f){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(f),t.exit("characterReferenceMarker"),l}function l(f){return f===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(f),t.exit("characterReferenceMarkerNumeric"),c):(t.enter("characterReferenceValue"),s=31,o=Ns,u(f))}function c(f){return f===88||f===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(f),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,o=OKe,u):(t.enter("characterReferenceValue"),s=7,o=SD,u(f))}function u(f){if(f===59&&i){const m=t.exit("characterReferenceValue");return o===Ns&&!oB(r.sliceSerialize(m))?n(f):(t.enter("characterReferenceMarker"),t.consume(f),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return o(f)&&i++<s?(t.consume(f),u):n(f)}}const kJ={partial:!0,tokenize:XKe},CJ={concrete:!0,name:"codeFenced",tokenize:JKe};function JKe(t,e,n){const r=this,i={partial:!0,tokenize:U};let s=0,o=0,a;return l;function l(R){return c(R)}function c(R){const $=r.events[r.events.length-1];return s=$&&$[1].type==="linePrefix"?$[2].sliceSerialize($[1],!0).length:0,a=R,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),u(R)}function u(R){return R===a?(o++,t.consume(R),u):o<3?n(R):(t.exit("codeFencedFenceSequence"),Sn(R)?Pn(t,f,"whitespace")(R):f(R))}function f(R){return R===null||Gt(R)?(t.exit("codeFencedFence"),r.interrupt?e(R):t.check(kJ,x,O)(R)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),m(R))}function m(R){return R===null||Gt(R)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),f(R)):Sn(R)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),Pn(t,g,"whitespace")(R)):R===96&&R===a?n(R):(t.consume(R),m)}function g(R){return R===null||Gt(R)?f(R):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),v(R))}function v(R){return R===null||Gt(R)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),f(R)):R===96&&R===a?n(R):(t.consume(R),v)}function x(R){return t.attempt(i,O,b)(R)}function b(R){return t.enter("lineEnding"),t.consume(R),t.exit("lineEnding"),E}function E(R){return s>0&&Sn(R)?Pn(t,C,"linePrefix",s+1)(R):C(R)}function C(R){return R===null||Gt(R)?t.check(kJ,x,O)(R):(t.enter("codeFlowValue"),k(R))}function k(R){return R===null||Gt(R)?(t.exit("codeFlowValue"),C(R)):(t.consume(R),k)}function O(R){return t.exit("codeFenced"),e(R)}function U(R,$,V){let j=0;return F;function F(I){return R.enter("lineEnding"),R.consume(I),R.exit("lineEnding"),W}function W(I){return R.enter("codeFencedFence"),Sn(I)?Pn(R,H,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(I):H(I)}function H(I){return I===a?(R.enter("codeFencedFenceSequence"),B(I)):V(I)}function B(I){return I===a?(j++,R.consume(I),B):j>=o?(R.exit("codeFencedFenceSequence"),Sn(I)?Pn(R,A,"whitespace")(I):A(I)):V(I)}function A(I){return I===null||Gt(I)?(R.exit("codeFencedFence"),$(I)):V(I)}}}function XKe(t,e,n){const r=this;return i;function i(o){return o===null?n(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}const OO={name:"codeIndented",tokenize:ZKe},QKe={partial:!0,tokenize:eWe};function ZKe(t,e,n){const r=this;return i;function i(c){return t.enter("codeIndented"),Pn(t,s,"linePrefix",5)(c)}function s(c){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?o(c):n(c)}function o(c){return c===null?l(c):Gt(c)?t.attempt(QKe,o,l)(c):(t.enter("codeFlowValue"),a(c))}function a(c){return c===null||Gt(c)?(t.exit("codeFlowValue"),o(c)):(t.consume(c),a)}function l(c){return t.exit("codeIndented"),e(c)}}function eWe(t,e,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):Gt(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),i):Pn(t,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):Gt(o)?i(o):n(o)}}const tWe={name:"codeText",previous:rWe,resolve:nWe,tokenize:iWe};function nWe(t){let e=t.length-4,n=3,r,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)i===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(i=r):(r===e||t[r][1].type==="lineEnding")&&(t[i][1].type="codeTextData",r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return t}function rWe(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function iWe(t,e,n){let r=0,i,s;return o;function o(f){return t.enter("codeText"),t.enter("codeTextSequence"),a(f)}function a(f){return f===96?(t.consume(f),r++,a):(t.exit("codeTextSequence"),l(f))}function l(f){return f===null?n(f):f===32?(t.enter("space"),t.consume(f),t.exit("space"),l):f===96?(s=t.enter("codeTextSequence"),i=0,u(f)):Gt(f)?(t.enter("lineEnding"),t.consume(f),t.exit("lineEnding"),l):(t.enter("codeTextData"),c(f))}function c(f){return f===null||f===32||f===96||Gt(f)?(t.exit("codeTextData"),l(f)):(t.consume(f),c)}function u(f){return f===96?(t.consume(f),i++,u):i===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(f)):(s.type="codeTextData",c(f))}}class sWe{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const i=n||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&Sb(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Sb(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Sb(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);Sb(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Sb(this.left,n.reverse())}}}function Sb(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function Kde(t){const e={};let n=-1,r,i,s,o,a,l,c;const u=new sWe(t);for(;++n<u.length;){for(;n in e;)n=e[n];if(r=u.get(n),n&&r[1].type==="chunkFlow"&&u.get(n-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,s=0,s<l.length&&l[s][1].type==="lineEndingBlank"&&(s+=2),s<l.length&&l[s][1].type==="content"))for(;++s<l.length&&l[s][1].type!=="content";)l[s][1].type==="chunkText"&&(l[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,oWe(u,n)),n=e[n],c=!0);else if(r[1]._container){for(s=n,i=void 0;s--;)if(o=u.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(u.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(r[1].end={...u.get(i)[1].start},a=u.slice(i,n),a.unshift(r),u.splice(i,n-i+1,a))}}return Jo(t,0,Number.POSITIVE_INFINITY,u.slice(0)),!c}function oWe(t,e){const n=t.get(e)[1],r=t.get(e)[2];let i=e-1;const s=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const a=o.events,l=[],c={};let u,f,m=-1,g=n,v=0,x=0;const b=[x];for(;g;){for(;t.get(++i)[1]!==g;);s.push(i),g._tokenizer||(u=r.sliceStream(g),g.next||u.push(null),f&&o.defineSkip(g.start),g._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(u),g._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=g,g=g.next}for(g=n;++m<a.length;)a[m][0]==="exit"&&a[m-1][0]==="enter"&&a[m][1].type===a[m-1][1].type&&a[m][1].start.line!==a[m][1].end.line&&(x=m+1,b.push(x),g._tokenizer=void 0,g.previous=void 0,g=g.next);for(o.events=[],g?(g._tokenizer=void 0,g.previous=void 0):b.pop(),m=b.length;m--;){const E=a.slice(b[m],b[m+1]),C=s.pop();l.push([C,C+E.length-1]),t.splice(C,2,E)}for(l.reverse(),m=-1;++m<l.length;)c[v+l[m][0]]=v+l[m][1],v+=l[m][1]-l[m][0]-1;return c}const aWe={resolve:cWe,tokenize:uWe},lWe={partial:!0,tokenize:dWe};function cWe(t){return Kde(t),t}function uWe(t,e){let n;return r;function r(a){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):Gt(a)?t.check(lWe,o,s)(a):(t.consume(a),i)}function s(a){return t.exit("chunkContent"),t.exit("content"),e(a)}function o(a){return t.consume(a),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function dWe(t,e,n){const r=this;return i;function i(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),Pn(t,s,"linePrefix")}function s(o){if(o===null||Gt(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):t.interrupt(r.parser.constructs.flow,n,e)(o)}}function Wde(t,e,n,r,i,s,o,a,l){const c=l||Number.POSITIVE_INFINITY;let u=0;return f;function f(E){return E===60?(t.enter(r),t.enter(i),t.enter(s),t.consume(E),t.exit(s),m):E===null||E===32||E===41||sC(E)?n(E):(t.enter(r),t.enter(o),t.enter(a),t.enter("chunkString",{contentType:"string"}),x(E))}function m(E){return E===62?(t.enter(s),t.consume(E),t.exit(s),t.exit(i),t.exit(r),e):(t.enter(a),t.enter("chunkString",{contentType:"string"}),g(E))}function g(E){return E===62?(t.exit("chunkString"),t.exit(a),m(E)):E===null||E===60||Gt(E)?n(E):(t.consume(E),E===92?v:g)}function v(E){return E===60||E===62||E===92?(t.consume(E),g):g(E)}function x(E){return!u&&(E===null||E===41||lr(E))?(t.exit("chunkString"),t.exit(a),t.exit(o),t.exit(r),e(E)):u<c&&E===40?(t.consume(E),u++,x):E===41?(t.consume(E),u--,x):E===null||E===32||E===40||sC(E)?n(E):(t.consume(E),E===92?b:x)}function b(E){return E===40||E===41||E===92?(t.consume(E),x):x(E)}}function Yde(t,e,n,r,i,s){const o=this;let a=0,l;return c;function c(g){return t.enter(r),t.enter(i),t.consume(g),t.exit(i),t.enter(s),u}function u(g){return a>999||g===null||g===91||g===93&&!l||g===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(g):g===93?(t.exit(s),t.enter(i),t.consume(g),t.exit(i),t.exit(r),e):Gt(g)?(t.enter("lineEnding"),t.consume(g),t.exit("lineEnding"),u):(t.enter("chunkString",{contentType:"string"}),f(g))}function f(g){return g===null||g===91||g===93||Gt(g)||a++>999?(t.exit("chunkString"),u(g)):(t.consume(g),l||(l=!Sn(g)),g===92?m:f)}function m(g){return g===91||g===92||g===93?(t.consume(g),a++,f):f(g)}}function Jde(t,e,n,r,i,s){let o;return a;function a(m){return m===34||m===39||m===40?(t.enter(r),t.enter(i),t.consume(m),t.exit(i),o=m===40?41:m,l):n(m)}function l(m){return m===o?(t.enter(i),t.consume(m),t.exit(i),t.exit(r),e):(t.enter(s),c(m))}function c(m){return m===o?(t.exit(s),l(o)):m===null?n(m):Gt(m)?(t.enter("lineEnding"),t.consume(m),t.exit("lineEnding"),Pn(t,c,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),u(m))}function u(m){return m===o||m===null||Gt(m)?(t.exit("chunkString"),c(m)):(t.consume(m),m===92?f:u)}function f(m){return m===o||m===92?(t.consume(m),u):u(m)}}function nw(t,e){let n;return r;function r(i){return Gt(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),n=!0,r):Sn(i)?Pn(t,r,n?"linePrefix":"lineSuffix")(i):e(i)}}const fWe={name:"definition",tokenize:pWe},hWe={partial:!0,tokenize:mWe};function pWe(t,e,n){const r=this;let i;return s;function s(g){return t.enter("definition"),o(g)}function o(g){return Yde.call(r,t,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(g)}function a(g){return i=kl(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),g===58?(t.enter("definitionMarker"),t.consume(g),t.exit("definitionMarker"),l):n(g)}function l(g){return lr(g)?nw(t,c)(g):c(g)}function c(g){return Wde(t,u,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(g)}function u(g){return t.attempt(hWe,f,f)(g)}function f(g){return Sn(g)?Pn(t,m,"whitespace")(g):m(g)}function m(g){return g===null||Gt(g)?(t.exit("definition"),r.parser.defined.push(i),e(g)):n(g)}}function mWe(t,e,n){return r;function r(a){return lr(a)?nw(t,i)(a):n(a)}function i(a){return Jde(t,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return Sn(a)?Pn(t,o,"whitespace")(a):o(a)}function o(a){return a===null||Gt(a)?e(a):n(a)}}const gWe={name:"hardBreakEscape",tokenize:yWe};function yWe(t,e,n){return r;function r(s){return t.enter("hardBreakEscape"),t.consume(s),i}function i(s){return Gt(s)?(t.exit("hardBreakEscape"),e(s)):n(s)}}const xWe={name:"headingAtx",resolve:vWe,tokenize:bWe};function vWe(t,e){let n=t.length-2,r=3,i,s;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},s={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},Jo(t,r,n-r+1,[["enter",i,e],["enter",s,e],["exit",s,e],["exit",i,e]])),t}function bWe(t,e,n){let r=0;return i;function i(u){return t.enter("atxHeading"),s(u)}function s(u){return t.enter("atxHeadingSequence"),o(u)}function o(u){return u===35&&r++<6?(t.consume(u),o):u===null||lr(u)?(t.exit("atxHeadingSequence"),a(u)):n(u)}function a(u){return u===35?(t.enter("atxHeadingSequence"),l(u)):u===null||Gt(u)?(t.exit("atxHeading"),e(u)):Sn(u)?Pn(t,a,"whitespace")(u):(t.enter("atxHeadingText"),c(u))}function l(u){return u===35?(t.consume(u),l):(t.exit("atxHeadingSequence"),a(u))}function c(u){return u===null||u===35||lr(u)?(t.exit("atxHeadingText"),a(u)):(t.consume(u),c)}}const wWe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],NJ=["pre","script","style","textarea"],EWe={concrete:!0,name:"htmlFlow",resolveTo:TWe,tokenize:kWe},SWe={partial:!0,tokenize:NWe},AWe={partial:!0,tokenize:CWe};function TWe(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function kWe(t,e,n){const r=this;let i,s,o,a,l;return c;function c(_){return u(_)}function u(_){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(_),f}function f(_){return _===33?(t.consume(_),m):_===47?(t.consume(_),s=!0,x):_===63?(t.consume(_),i=3,r.interrupt?e:K):zs(_)?(t.consume(_),o=String.fromCharCode(_),b):n(_)}function m(_){return _===45?(t.consume(_),i=2,g):_===91?(t.consume(_),i=5,a=0,v):zs(_)?(t.consume(_),i=4,r.interrupt?e:K):n(_)}function g(_){return _===45?(t.consume(_),r.interrupt?e:K):n(_)}function v(_){const Y="CDATA[";return _===Y.charCodeAt(a++)?(t.consume(_),a===Y.length?r.interrupt?e:H:v):n(_)}function x(_){return zs(_)?(t.consume(_),o=String.fromCharCode(_),b):n(_)}function b(_){if(_===null||_===47||_===62||lr(_)){const Y=_===47,X=o.toLowerCase();return!Y&&!s&&NJ.includes(X)?(i=1,r.interrupt?e(_):H(_)):wWe.includes(o.toLowerCase())?(i=6,Y?(t.consume(_),E):r.interrupt?e(_):H(_)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(_):s?C(_):k(_))}return _===45||Ns(_)?(t.consume(_),o+=String.fromCharCode(_),b):n(_)}function E(_){return _===62?(t.consume(_),r.interrupt?e:H):n(_)}function C(_){return Sn(_)?(t.consume(_),C):F(_)}function k(_){return _===47?(t.consume(_),F):_===58||_===95||zs(_)?(t.consume(_),O):Sn(_)?(t.consume(_),k):F(_)}function O(_){return _===45||_===46||_===58||_===95||Ns(_)?(t.consume(_),O):U(_)}function U(_){return _===61?(t.consume(_),R):Sn(_)?(t.consume(_),U):k(_)}function R(_){return _===null||_===60||_===61||_===62||_===96?n(_):_===34||_===39?(t.consume(_),l=_,$):Sn(_)?(t.consume(_),R):V(_)}function $(_){return _===l?(t.consume(_),l=null,j):_===null||Gt(_)?n(_):(t.consume(_),$)}function V(_){return _===null||_===34||_===39||_===47||_===60||_===61||_===62||_===96||lr(_)?U(_):(t.consume(_),V)}function j(_){return _===47||_===62||Sn(_)?k(_):n(_)}function F(_){return _===62?(t.consume(_),W):n(_)}function W(_){return _===null||Gt(_)?H(_):Sn(_)?(t.consume(_),W):n(_)}function H(_){return _===45&&i===2?(t.consume(_),D):_===60&&i===1?(t.consume(_),z):_===62&&i===4?(t.consume(_),q):_===63&&i===3?(t.consume(_),K):_===93&&i===5?(t.consume(_),te):Gt(_)&&(i===6||i===7)?(t.exit("htmlFlowData"),t.check(SWe,M,B)(_)):_===null||Gt(_)?(t.exit("htmlFlowData"),B(_)):(t.consume(_),H)}function B(_){return t.check(AWe,A,M)(_)}function A(_){return t.enter("lineEnding"),t.consume(_),t.exit("lineEnding"),I}function I(_){return _===null||Gt(_)?B(_):(t.enter("htmlFlowData"),H(_))}function D(_){return _===45?(t.consume(_),K):H(_)}function z(_){return _===47?(t.consume(_),o="",G):H(_)}function G(_){if(_===62){const Y=o.toLowerCase();return NJ.includes(Y)?(t.consume(_),q):H(_)}return zs(_)&&o.length<8?(t.consume(_),o+=String.fromCharCode(_),G):H(_)}function te(_){return _===93?(t.consume(_),K):H(_)}function K(_){return _===62?(t.consume(_),q):_===45&&i===2?(t.consume(_),K):H(_)}function q(_){return _===null||Gt(_)?(t.exit("htmlFlowData"),M(_)):(t.consume(_),q)}function M(_){return t.exit("htmlFlow"),e(_)}}function CWe(t,e,n){const r=this;return i;function i(o){return Gt(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}function NWe(t,e,n){return r;function r(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),t.attempt(dE,e,n)}}const _We={name:"htmlText",tokenize:IWe};function IWe(t,e,n){const r=this;let i,s,o;return a;function a(K){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(K),l}function l(K){return K===33?(t.consume(K),c):K===47?(t.consume(K),U):K===63?(t.consume(K),k):zs(K)?(t.consume(K),V):n(K)}function c(K){return K===45?(t.consume(K),u):K===91?(t.consume(K),s=0,v):zs(K)?(t.consume(K),C):n(K)}function u(K){return K===45?(t.consume(K),g):n(K)}function f(K){return K===null?n(K):K===45?(t.consume(K),m):Gt(K)?(o=f,z(K)):(t.consume(K),f)}function m(K){return K===45?(t.consume(K),g):f(K)}function g(K){return K===62?D(K):K===45?m(K):f(K)}function v(K){const q="CDATA[";return K===q.charCodeAt(s++)?(t.consume(K),s===q.length?x:v):n(K)}function x(K){return K===null?n(K):K===93?(t.consume(K),b):Gt(K)?(o=x,z(K)):(t.consume(K),x)}function b(K){return K===93?(t.consume(K),E):x(K)}function E(K){return K===62?D(K):K===93?(t.consume(K),E):x(K)}function C(K){return K===null||K===62?D(K):Gt(K)?(o=C,z(K)):(t.consume(K),C)}function k(K){return K===null?n(K):K===63?(t.consume(K),O):Gt(K)?(o=k,z(K)):(t.consume(K),k)}function O(K){return K===62?D(K):k(K)}function U(K){return zs(K)?(t.consume(K),R):n(K)}function R(K){return K===45||Ns(K)?(t.consume(K),R):$(K)}function $(K){return Gt(K)?(o=$,z(K)):Sn(K)?(t.consume(K),$):D(K)}function V(K){return K===45||Ns(K)?(t.consume(K),V):K===47||K===62||lr(K)?j(K):n(K)}function j(K){return K===47?(t.consume(K),D):K===58||K===95||zs(K)?(t.consume(K),F):Gt(K)?(o=j,z(K)):Sn(K)?(t.consume(K),j):D(K)}function F(K){return K===45||K===46||K===58||K===95||Ns(K)?(t.consume(K),F):W(K)}function W(K){return K===61?(t.consume(K),H):Gt(K)?(o=W,z(K)):Sn(K)?(t.consume(K),W):j(K)}function H(K){return K===null||K===60||K===61||K===62||K===96?n(K):K===34||K===39?(t.consume(K),i=K,B):Gt(K)?(o=H,z(K)):Sn(K)?(t.consume(K),H):(t.consume(K),A)}function B(K){return K===i?(t.consume(K),i=void 0,I):K===null?n(K):Gt(K)?(o=B,z(K)):(t.consume(K),B)}function A(K){return K===null||K===34||K===39||K===60||K===61||K===96?n(K):K===47||K===62||lr(K)?j(K):(t.consume(K),A)}function I(K){return K===47||K===62||lr(K)?j(K):n(K)}function D(K){return K===62?(t.consume(K),t.exit("htmlTextData"),t.exit("htmlText"),e):n(K)}function z(K){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(K),t.exit("lineEnding"),G}function G(K){return Sn(K)?Pn(t,te,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(K):te(K)}function te(K){return t.enter("htmlTextData"),o(K)}}const aB={name:"labelEnd",resolveAll:MWe,resolveTo:DWe,tokenize:LWe},PWe={tokenize:jWe},RWe={tokenize:BWe},OWe={tokenize:UWe};function MWe(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",e+=i}}return t.length!==n.length&&Jo(t,0,t.length,n),t}function DWe(t,e){let n=t.length,r=0,i,s,o,a;for(;n--;)if(i=t[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;t[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(t[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const l={type:t[s][1].type==="labelLink"?"link":"image",start:{...t[s][1].start},end:{...t[t.length-1][1].end}},c={type:"label",start:{...t[s][1].start},end:{...t[o][1].end}},u={type:"labelText",start:{...t[s+r+2][1].end},end:{...t[o-2][1].start}};return a=[["enter",l,e],["enter",c,e]],a=Ma(a,t.slice(s+1,s+r+3)),a=Ma(a,[["enter",u,e]]),a=Ma(a,CN(e.parser.constructs.insideSpan.null,t.slice(s+r+4,o-3),e)),a=Ma(a,[["exit",u,e],t[o-2],t[o-1],["exit",c,e]]),a=Ma(a,t.slice(o+1)),a=Ma(a,[["exit",l,e]]),Jo(t,s,t.length,a),t}function LWe(t,e,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(m){return s?s._inactive?f(m):(o=r.parser.defined.includes(kl(r.sliceSerialize({start:s.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(m),t.exit("labelMarker"),t.exit("labelEnd"),l):n(m)}function l(m){return m===40?t.attempt(PWe,u,o?u:f)(m):m===91?t.attempt(RWe,u,o?c:f)(m):o?u(m):f(m)}function c(m){return t.attempt(OWe,u,f)(m)}function u(m){return e(m)}function f(m){return s._balanced=!0,n(m)}}function jWe(t,e,n){return r;function r(f){return t.enter("resource"),t.enter("resourceMarker"),t.consume(f),t.exit("resourceMarker"),i}function i(f){return lr(f)?nw(t,s)(f):s(f)}function s(f){return f===41?u(f):Wde(t,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function o(f){return lr(f)?nw(t,l)(f):u(f)}function a(f){return n(f)}function l(f){return f===34||f===39||f===40?Jde(t,c,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):u(f)}function c(f){return lr(f)?nw(t,u)(f):u(f)}function u(f){return f===41?(t.enter("resourceMarker"),t.consume(f),t.exit("resourceMarker"),t.exit("resource"),e):n(f)}}function BWe(t,e,n){const r=this;return i;function i(a){return Yde.call(r,t,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(kl(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(a):n(a)}function o(a){return n(a)}}function UWe(t,e,n){return r;function r(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),i}function i(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):n(s)}}const FWe={name:"labelStartImage",resolveAll:aB.resolveAll,tokenize:$We};function $We(t,e,n){const r=this;return i;function i(a){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(a),t.exit("labelImageMarker"),s}function s(a){return a===91?(t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):e(a)}}const zWe={name:"labelStartLink",resolveAll:aB.resolveAll,tokenize:HWe};function HWe(t,e,n){const r=this;return i;function i(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):e(o)}}const MO={name:"lineEnding",tokenize:VWe};function VWe(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),Pn(t,e,"linePrefix")}}const ST={name:"thematicBreak",tokenize:qWe};function qWe(t,e,n){let r=0,i;return s;function s(c){return t.enter("thematicBreak"),o(c)}function o(c){return i=c,a(c)}function a(c){return c===i?(t.enter("thematicBreakSequence"),l(c)):r>=3&&(c===null||Gt(c))?(t.exit("thematicBreak"),e(c)):n(c)}function l(c){return c===i?(t.consume(c),r++,l):(t.exit("thematicBreakSequence"),Sn(c)?Pn(t,a,"whitespace")(c):a(c))}}const oo={continuation:{tokenize:YWe},exit:XWe,name:"list",tokenize:WWe},GWe={partial:!0,tokenize:QWe},KWe={partial:!0,tokenize:JWe};function WWe(t,e,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(g){const v=r.containerState.type||(g===42||g===43||g===45?"listUnordered":"listOrdered");if(v==="listUnordered"?!r.containerState.marker||g===r.containerState.marker:SD(g)){if(r.containerState.type||(r.containerState.type=v,t.enter(v,{_container:!0})),v==="listUnordered")return t.enter("listItemPrefix"),g===42||g===45?t.check(ST,n,c)(g):c(g);if(!r.interrupt||g===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),l(g)}return n(g)}function l(g){return SD(g)&&++o<10?(t.consume(g),l):(!r.interrupt||o<2)&&(r.containerState.marker?g===r.containerState.marker:g===41||g===46)?(t.exit("listItemValue"),c(g)):n(g)}function c(g){return t.enter("listItemMarker"),t.consume(g),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||g,t.check(dE,r.interrupt?n:u,t.attempt(GWe,m,f))}function u(g){return r.containerState.initialBlankLine=!0,s++,m(g)}function f(g){return Sn(g)?(t.enter("listItemPrefixWhitespace"),t.consume(g),t.exit("listItemPrefixWhitespace"),m):n(g)}function m(g){return r.containerState.size=s+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(g)}}function YWe(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(dE,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Pn(t,e,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!Sn(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(KWe,e,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,Pn(t,t.attempt(oo,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function JWe(t,e,n){const r=this;return Pn(t,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?e(s):n(s)}}function XWe(t){t.exit(this.containerState.type)}function QWe(t,e,n){const r=this;return Pn(t,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!Sn(s)&&o&&o[1].type==="listItemPrefixWhitespace"?e(s):n(s)}}const _J={name:"setextUnderline",resolveTo:ZWe,tokenize:eYe};function ZWe(t,e){let n=t.length,r,i,s;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(i=n)}else t[n][1].type==="content"&&t.splice(n,1),!s&&t[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[i][1].type="setextHeadingText",s?(t.splice(i,0,["enter",o,e]),t.splice(s+1,0,["exit",t[r][1],e]),t[r][1].end={...t[s][1].end}):t[r][1]=o,t.push(["exit",o,e]),t}function eYe(t,e,n){const r=this;let i;return s;function s(c){let u=r.events.length,f;for(;u--;)if(r.events[u][1].type!=="lineEnding"&&r.events[u][1].type!=="linePrefix"&&r.events[u][1].type!=="content"){f=r.events[u][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(t.enter("setextHeadingLine"),i=c,o(c)):n(c)}function o(c){return t.enter("setextHeadingLineSequence"),a(c)}function a(c){return c===i?(t.consume(c),a):(t.exit("setextHeadingLineSequence"),Sn(c)?Pn(t,l,"lineSuffix")(c):l(c))}function l(c){return c===null||Gt(c)?(t.exit("setextHeadingLine"),e(c)):n(c)}}const tYe={tokenize:nYe};function nYe(t){const e=this,n=t.attempt(dE,r,t.attempt(this.parser.constructs.flowInitial,i,Pn(t,t.attempt(this.parser.constructs.flow,i,t.attempt(aWe,i)),"linePrefix")));return n;function r(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function i(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const rYe={resolveAll:Qde()},iYe=Xde("string"),sYe=Xde("text");function Xde(t){return{resolveAll:Qde(t==="text"?oYe:void 0),tokenize:e};function e(n){const r=this,i=this.parser.constructs[t],s=n.attempt(i,o,a);return o;function o(u){return c(u)?s(u):a(u)}function a(u){if(u===null){n.consume(u);return}return n.enter("data"),n.consume(u),l}function l(u){return c(u)?(n.exit("data"),s(u)):(n.consume(u),l)}function c(u){if(u===null)return!0;const f=i[u];let m=-1;if(f)for(;++m<f.length;){const g=f[m];if(!g.previous||g.previous.call(r,r.previous))return!0}return!1}}}function Qde(t){return e;function e(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return t?t(n,r):n}}function oYe(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],i=e.sliceStream(r);let s=i.length,o=-1,a=0,l;for(;s--;){const c=i[s];if(typeof c=="string"){for(o=c.length;c.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(c===-2)l=!0,a++;else if(c!==-1){s++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(a=0),a){const c={type:n===t.length||l||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:r.start._bufferIndex+o,_index:r.start._index+s,line:r.end.line,column:r.end.column-a,offset:r.end.offset-a},end:{...r.end}};r.end={...c.start},r.start.offset===r.end.offset?Object.assign(r,c):(t.splice(n,0,["enter",c,e],["exit",c,e]),n+=2)}n++}return t}const aYe={42:oo,43:oo,45:oo,48:oo,49:oo,50:oo,51:oo,52:oo,53:oo,54:oo,55:oo,56:oo,57:oo,62:Vde},lYe={91:fWe},cYe={[-2]:OO,[-1]:OO,32:OO},uYe={35:xWe,42:ST,45:[_J,ST],60:EWe,61:_J,95:ST,96:CJ,126:CJ},dYe={38:Gde,92:qde},fYe={[-5]:MO,[-4]:MO,[-3]:MO,33:FWe,38:Gde,42:AD,60:[zKe,_We],91:zWe,92:[gWe,qde],93:aB,95:AD,96:tWe},hYe={null:[AD,rYe]},pYe={null:[42,95]},mYe={null:[]},gYe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:pYe,contentInitial:lYe,disable:mYe,document:aYe,flow:uYe,flowInitial:cYe,insideSpan:hYe,string:dYe,text:fYe},Symbol.toStringTag,{value:"Module"}));function yYe(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},s=[];let o=[],a=[];const l={attempt:$(U),check:$(R),consume:C,enter:k,exit:O,interrupt:$(R,{interrupt:!0})},c={code:null,containerState:{},defineSkip:x,events:[],now:v,parser:t,previous:null,sliceSerialize:m,sliceStream:g,write:f};let u=e.tokenize.call(c,l);return e.resolveAll&&s.push(e),c;function f(W){return o=Ma(o,W),b(),o[o.length-1]!==null?[]:(V(e,0),c.events=CN(s,c.events,c),c.events)}function m(W,H){return vYe(g(W),H)}function g(W){return xYe(o,W)}function v(){const{_bufferIndex:W,_index:H,line:B,column:A,offset:I}=r;return{_bufferIndex:W,_index:H,line:B,column:A,offset:I}}function x(W){i[W.line]=W.column,F()}function b(){let W;for(;r._index<o.length;){const H=o[r._index];if(typeof H=="string")for(W=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===W&&r._bufferIndex<H.length;)E(H.charCodeAt(r._bufferIndex));else E(H)}}function E(W){u=u(W)}function C(W){Gt(W)?(r.line++,r.column=1,r.offset+=W===-3?2:1,F()):W!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),c.previous=W}function k(W,H){const B=H||{};return B.type=W,B.start=v(),c.events.push(["enter",B,c]),a.push(B),B}function O(W){const H=a.pop();return H.end=v(),c.events.push(["exit",H,c]),H}function U(W,H){V(W,H.from)}function R(W,H){H.restore()}function $(W,H){return B;function B(A,I,D){let z,G,te,K;return Array.isArray(A)?M(A):"tokenize"in A?M([A]):q(A);function q(re){return oe;function oe(Ee){const ce=Ee!==null&&re[Ee],me=Ee!==null&&re.null,ue=[...Array.isArray(ce)?ce:ce?[ce]:[],...Array.isArray(me)?me:me?[me]:[]];return M(ue)(Ee)}}function M(re){return z=re,G=0,re.length===0?D:_(re[G])}function _(re){return oe;function oe(Ee){return K=j(),te=re,re.partial||(c.currentConstruct=re),re.name&&c.parser.constructs.disable.null.includes(re.name)?X():re.tokenize.call(H?Object.assign(Object.create(c),H):c,l,Y,X)(Ee)}}function Y(re){return W(te,K),I}function X(re){return K.restore(),++G<z.length?_(z[G]):D}}}function V(W,H){W.resolveAll&&!s.includes(W)&&s.push(W),W.resolve&&Jo(c.events,H,c.events.length-H,W.resolve(c.events.slice(H),c)),W.resolveTo&&(c.events=W.resolveTo(c.events,c))}function j(){const W=v(),H=c.previous,B=c.currentConstruct,A=c.events.length,I=Array.from(a);return{from:A,restore:D};function D(){r=W,c.previous=H,c.currentConstruct=B,c.events.length=A,a=I,F()}}function F(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function xYe(t,e){const n=e.start._index,r=e.start._bufferIndex,i=e.end._index,s=e.end._bufferIndex;let o;if(n===i)o=[t[n].slice(r,s)];else{if(o=t.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(t[i].slice(0,s))}return o}function vYe(t,e){let n=-1;const r=[];let i;for(;++n<t.length;){const s=t[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}function bYe(t){const r={constructs:zde([gYe,...(t||{}).extensions||[]]),content:i(DKe),defined:[],document:i(jKe),flow:i(tYe),lazy:{},string:i(iYe),text:i(sYe)};return r;function i(s){return o;function o(a){return yYe(r,s,a)}}}function wYe(t){for(;!Kde(t););return t}const IJ=/[\0\t\n\r]/g;function EYe(){let t=1,e="",n=!0,r;return i;function i(s,o,a){const l=[];let c,u,f,m,g;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),f=0,e="",n&&(s.charCodeAt(0)===65279&&f++,n=void 0);f<s.length;){if(IJ.lastIndex=f,c=IJ.exec(s),m=c&&c.index!==void 0?c.index:s.length,g=s.charCodeAt(m),!c){e=s.slice(f);break}if(g===10&&f===m&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),f<m&&(l.push(s.slice(f,m)),t+=m-f),g){case 0:{l.push(65533),t++;break}case 9:{for(u=Math.ceil(t/4)*4,l.push(-2);t++<u;)l.push(-1);break}case 10:{l.push(-4),t=1;break}default:r=!0,t=1}f=m+1}return a&&(r&&l.push(-5),e&&l.push(e),l.push(null)),l}}const SYe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function AYe(t){return t.replace(SYe,TYe)}function TYe(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return Hde(n.slice(s?2:1),s?16:10)}return oB(n)||t}const Zde={}.hasOwnProperty;function kYe(t,e,n){return typeof e!="string"&&(n=e,e=void 0),CYe(n)(wYe(bYe(n).document().write(EYe()(t,e,!0))))}function CYe(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(At),autolinkProtocol:j,autolinkEmail:j,atxHeading:s($e),blockQuote:s(me),characterEscape:j,characterReference:j,codeFenced:s(ue),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(ue,o),codeText:s(le,o),codeTextData:j,data:j,codeFlowValue:j,definition:s(Ie),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(Ne),hardBreakEscape:s(Ze),hardBreakTrailing:s(Ze),htmlFlow:s(Ye,o),htmlFlowData:j,htmlText:s(Ye,o),htmlTextData:j,image:s(We),label:o,link:s(At),listItem:s(Bt),listItemValue:m,listOrdered:s(ot,f),listUnordered:s(ot),paragraph:s(Zt),reference:_,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s($e),strong:s(Ge),thematicBreak:s(ln)},exit:{atxHeading:l(),atxHeadingSequence:U,autolink:l(),autolinkEmail:ce,autolinkProtocol:Ee,blockQuote:l(),characterEscapeValue:F,characterReferenceMarkerHexadecimal:X,characterReferenceMarkerNumeric:X,characterReferenceValue:re,characterReference:oe,codeFenced:l(b),codeFencedFence:x,codeFencedFenceInfo:g,codeFencedFenceMeta:v,codeFlowValue:F,codeIndented:l(E),codeText:l(I),codeTextData:F,data:F,definition:l(),definitionDestinationString:O,definitionLabelString:C,definitionTitleString:k,emphasis:l(),hardBreakEscape:l(H),hardBreakTrailing:l(H),htmlFlow:l(B),htmlFlowData:F,htmlText:l(A),htmlTextData:F,image:l(z),label:te,labelText:G,lineEnding:W,link:l(D),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:Y,resourceDestinationString:K,resourceTitleString:q,resource:M,setextHeading:l(V),setextHeadingLineSequence:$,setextHeadingText:R,strong:l(),thematicBreak:l()}};efe(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(Pe){let Ve={type:"root",children:[]};const ht={stack:[Ve],tokenStack:[],config:e,enter:a,exit:c,buffer:o,resume:u,data:n},ct=[];let se=-1;for(;++se<Pe.length;)if(Pe[se][1].type==="listOrdered"||Pe[se][1].type==="listUnordered")if(Pe[se][0]==="enter")ct.push(se);else{const J=ct.pop();se=i(Pe,J,se)}for(se=-1;++se<Pe.length;){const J=e[Pe[se][0]];Zde.call(J,Pe[se][1].type)&&J[Pe[se][1].type].call(Object.assign({sliceSerialize:Pe[se][2].sliceSerialize},ht),Pe[se][1])}if(ht.tokenStack.length>0){const J=ht.tokenStack[ht.tokenStack.length-1];(J[1]||PJ).call(ht,void 0,J[0])}for(Ve.position={start:hf(Pe.length>0?Pe[0][1].start:{line:1,column:1,offset:0}),end:hf(Pe.length>0?Pe[Pe.length-2][1].end:{line:1,column:1,offset:0})},se=-1;++se<e.transforms.length;)Ve=e.transforms[se](Ve)||Ve;return Ve}function i(Pe,Ve,ht){let ct=Ve-1,se=-1,J=!1,Z,fe,be,he;for(;++ct<=ht;){const ye=Pe[ct];switch(ye[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{ye[0]==="enter"?se++:se--,he=void 0;break}case"lineEndingBlank":{ye[0]==="enter"&&(Z&&!he&&!se&&!be&&(be=ct),he=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:he=void 0}if(!se&&ye[0]==="enter"&&ye[1].type==="listItemPrefix"||se===-1&&ye[0]==="exit"&&(ye[1].type==="listUnordered"||ye[1].type==="listOrdered")){if(Z){let Xe=ct;for(fe=void 0;Xe--;){const et=Pe[Xe];if(et[1].type==="lineEnding"||et[1].type==="lineEndingBlank"){if(et[0]==="exit")continue;fe&&(Pe[fe][1].type="lineEndingBlank",J=!0),et[1].type="lineEnding",fe=Xe}else if(!(et[1].type==="linePrefix"||et[1].type==="blockQuotePrefix"||et[1].type==="blockQuotePrefixWhitespace"||et[1].type==="blockQuoteMarker"||et[1].type==="listItemIndent"))break}be&&(!fe||be<fe)&&(Z._spread=!0),Z.end=Object.assign({},fe?Pe[fe][1].start:ye[1].end),Pe.splice(fe||ct,0,["exit",Z,ye[2]]),ct++,ht++}if(ye[1].type==="listItemPrefix"){const Xe={type:"listItem",_spread:!1,start:Object.assign({},ye[1].start),end:void 0};Z=Xe,Pe.splice(ct,0,["enter",Xe,ye[2]]),ct++,ht++,be=void 0,he=!0}}}return Pe[Ve][1]._spread=J,ht}function s(Pe,Ve){return ht;function ht(ct){a.call(this,Pe(ct),ct),Ve&&Ve.call(this,ct)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(Pe,Ve,ht){this.stack[this.stack.length-1].children.push(Pe),this.stack.push(Pe),this.tokenStack.push([Ve,ht||void 0]),Pe.position={start:hf(Ve.start),end:void 0}}function l(Pe){return Ve;function Ve(ht){Pe&&Pe.call(this,ht),c.call(this,ht)}}function c(Pe,Ve){const ht=this.stack.pop(),ct=this.tokenStack.pop();if(ct)ct[0].type!==Pe.type&&(Ve?Ve.call(this,Pe,ct[0]):(ct[1]||PJ).call(this,Pe,ct[0]));else throw new Error("Cannot close `"+Pe.type+"` ("+tw({start:Pe.start,end:Pe.end})+"): its not open");ht.position.end=hf(Pe.end)}function u(){return sB(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function m(Pe){if(this.data.expectingFirstListItemValue){const Ve=this.stack[this.stack.length-2];Ve.start=Number.parseInt(this.sliceSerialize(Pe),10),this.data.expectingFirstListItemValue=void 0}}function g(){const Pe=this.resume(),Ve=this.stack[this.stack.length-1];Ve.lang=Pe}function v(){const Pe=this.resume(),Ve=this.stack[this.stack.length-1];Ve.meta=Pe}function x(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function b(){const Pe=this.resume(),Ve=this.stack[this.stack.length-1];Ve.value=Pe.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function E(){const Pe=this.resume(),Ve=this.stack[this.stack.length-1];Ve.value=Pe.replace(/(\r?\n|\r)$/g,"")}function C(Pe){const Ve=this.resume(),ht=this.stack[this.stack.length-1];ht.label=Ve,ht.identifier=kl(this.sliceSerialize(Pe)).toLowerCase()}function k(){const Pe=this.resume(),Ve=this.stack[this.stack.length-1];Ve.title=Pe}function O(){const Pe=this.resume(),Ve=this.stack[this.stack.length-1];Ve.url=Pe}function U(Pe){const Ve=this.stack[this.stack.length-1];if(!Ve.depth){const ht=this.sliceSerialize(Pe).length;Ve.depth=ht}}function R(){this.data.setextHeadingSlurpLineEnding=!0}function $(Pe){const Ve=this.stack[this.stack.length-1];Ve.depth=this.sliceSerialize(Pe).codePointAt(0)===61?1:2}function V(){this.data.setextHeadingSlurpLineEnding=void 0}function j(Pe){const ht=this.stack[this.stack.length-1].children;let ct=ht[ht.length-1];(!ct||ct.type!=="text")&&(ct=Tt(),ct.position={start:hf(Pe.start),end:void 0},ht.push(ct)),this.stack.push(ct)}function F(Pe){const Ve=this.stack.pop();Ve.value+=this.sliceSerialize(Pe),Ve.position.end=hf(Pe.end)}function W(Pe){const Ve=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ht=Ve.children[Ve.children.length-1];ht.position.end=hf(Pe.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(Ve.type)&&(j.call(this,Pe),F.call(this,Pe))}function H(){this.data.atHardBreak=!0}function B(){const Pe=this.resume(),Ve=this.stack[this.stack.length-1];Ve.value=Pe}function A(){const Pe=this.resume(),Ve=this.stack[this.stack.length-1];Ve.value=Pe}function I(){const Pe=this.resume(),Ve=this.stack[this.stack.length-1];Ve.value=Pe}function D(){const Pe=this.stack[this.stack.length-1];if(this.data.inReference){const Ve=this.data.referenceType||"shortcut";Pe.type+="Reference",Pe.referenceType=Ve,delete Pe.url,delete Pe.title}else delete Pe.identifier,delete Pe.label;this.data.referenceType=void 0}function z(){const Pe=this.stack[this.stack.length-1];if(this.data.inReference){const Ve=this.data.referenceType||"shortcut";Pe.type+="Reference",Pe.referenceType=Ve,delete Pe.url,delete Pe.title}else delete Pe.identifier,delete Pe.label;this.data.referenceType=void 0}function G(Pe){const Ve=this.sliceSerialize(Pe),ht=this.stack[this.stack.length-2];ht.label=AYe(Ve),ht.identifier=kl(Ve).toLowerCase()}function te(){const Pe=this.stack[this.stack.length-1],Ve=this.resume(),ht=this.stack[this.stack.length-1];if(this.data.inReference=!0,ht.type==="link"){const ct=Pe.children;ht.children=ct}else ht.alt=Ve}function K(){const Pe=this.resume(),Ve=this.stack[this.stack.length-1];Ve.url=Pe}function q(){const Pe=this.resume(),Ve=this.stack[this.stack.length-1];Ve.title=Pe}function M(){this.data.inReference=void 0}function _(){this.data.referenceType="collapsed"}function Y(Pe){const Ve=this.resume(),ht=this.stack[this.stack.length-1];ht.label=Ve,ht.identifier=kl(this.sliceSerialize(Pe)).toLowerCase(),this.data.referenceType="full"}function X(Pe){this.data.characterReferenceType=Pe.type}function re(Pe){const Ve=this.sliceSerialize(Pe),ht=this.data.characterReferenceType;let ct;ht?(ct=Hde(Ve,ht==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ct=oB(Ve);const se=this.stack[this.stack.length-1];se.value+=ct}function oe(Pe){const Ve=this.stack.pop();Ve.position.end=hf(Pe.end)}function Ee(Pe){F.call(this,Pe);const Ve=this.stack[this.stack.length-1];Ve.url=this.sliceSerialize(Pe)}function ce(Pe){F.call(this,Pe);const Ve=this.stack[this.stack.length-1];Ve.url="mailto:"+this.sliceSerialize(Pe)}function me(){return{type:"blockquote",children:[]}}function ue(){return{type:"code",lang:null,meta:null,value:""}}function le(){return{type:"inlineCode",value:""}}function Ie(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ne(){return{type:"emphasis",children:[]}}function $e(){return{type:"heading",depth:0,children:[]}}function Ze(){return{type:"break"}}function Ye(){return{type:"html",value:""}}function We(){return{type:"image",title:null,url:"",alt:null}}function At(){return{type:"link",title:null,url:"",children:[]}}function ot(Pe){return{type:"list",ordered:Pe.type==="listOrdered",start:null,spread:Pe._spread,children:[]}}function Bt(Pe){return{type:"listItem",spread:Pe._spread,checked:null,children:[]}}function Zt(){return{type:"paragraph",children:[]}}function Ge(){return{type:"strong",children:[]}}function Tt(){return{type:"text",value:""}}function ln(){return{type:"thematicBreak"}}}function hf(t){return{line:t.line,column:t.column,offset:t.offset}}function efe(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?efe(t,r):NYe(t,r)}}function NYe(t,e){let n;for(n in e)if(Zde.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function PJ(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+tw({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+tw({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+tw({start:e.start,end:e.end})+") is still open")}function _Ye(t){const e=this;e.parser=n;function n(r){return kYe(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function IYe(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function PYe(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function RYe(t,e){const n=e.value?e.value+`
`:"",r={},i=e.lang?e.lang.split(/\s+/):[];i.length>0&&(r.className=["language-"+i[0]]);let s={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(s.data={meta:e.meta}),t.patch(e,s),s=t.applyData(e,s),s={type:"element",tagName:"pre",properties:{},children:[s]},t.patch(e,s),s}function OYe(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function MYe(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function DYe(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),i=iv(r.toLowerCase()),s=t.footnoteOrder.indexOf(r);let o,a=t.footnoteCounts.get(r);a===void 0?(a=0,t.footnoteOrder.push(r),o=t.footnoteOrder.length):o=s+1,a+=1,t.footnoteCounts.set(r,a);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};t.patch(e,l);const c={type:"element",tagName:"sup",properties:{},children:[l]};return t.patch(e,c),t.applyData(e,c)}function LYe(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function jYe(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function tfe(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const i=t.all(e),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function BYe(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return tfe(t,e);const i={src:iv(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return t.patch(e,s),t.applyData(e,s)}function UYe(t,e){const n={src:iv(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function FYe(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function $Ye(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return tfe(t,e);const i={href:iv(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function zYe(t,e){const n={href:iv(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function HYe(t,e,n){const r=t.all(e),i=n?VYe(n):nfe(e),s={},o=[];if(typeof e.checked=="boolean"){const u=r[0];let f;u&&u.type==="element"&&u.tagName==="p"?f=u:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const u=r[a];(i||a!==0||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`}),u.type==="element"&&u.tagName==="p"&&!i?o.push(...u.children):o.push(u)}const l=r[r.length-1];l&&(i||l.type!=="element"||l.tagName!=="p")&&o.push({type:"text",value:`
`});const c={type:"element",tagName:"li",properties:s,children:o};return t.patch(e,c),t.applyData(e,c)}function VYe(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=nfe(n[r])}return e}function nfe(t){const e=t.spread;return e??t.children.length>1}function qYe(t,e){const n={},r=t.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,s),t.applyData(e,s)}function GYe(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function KYe(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function WYe(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function YYe(t,e){const n=t.all(e),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},a=tB(e.children[1]),l=Dde(e.children[e.children.length-1]);a&&l&&(o.position={start:a,end:l}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:t.wrap(i,!0)};return t.patch(e,s),t.applyData(e,s)}function JYe(t,e,n){const r=n?n.children:void 0,s=(r?r.indexOf(e):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:e.children.length;let l=-1;const c=[];for(;++l<a;){const f=e.children[l],m={},g=o?o[l]:void 0;g&&(m.align=g);let v={type:"element",tagName:s,properties:m,children:[]};f&&(v.children=t.all(f),t.patch(f,v),v=t.applyData(f,v)),c.push(v)}const u={type:"element",tagName:"tr",properties:{},children:t.wrap(c,!0)};return t.patch(e,u),t.applyData(e,u)}function XYe(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const RJ=9,OJ=32;function QYe(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),i=0;const s=[];for(;r;)s.push(MJ(e.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(e);return s.push(MJ(e.slice(i),i>0,!1)),s.join("")}function MJ(t,e,n){let r=0,i=t.length;if(e){let s=t.codePointAt(r);for(;s===RJ||s===OJ;)r++,s=t.codePointAt(r)}if(n){let s=t.codePointAt(i-1);for(;s===RJ||s===OJ;)i--,s=t.codePointAt(i-1)}return i>r?t.slice(r,i):""}function ZYe(t,e){const n={type:"text",value:QYe(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function eJe(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const tJe={blockquote:IYe,break:PYe,code:RYe,delete:OYe,emphasis:MYe,footnoteReference:DYe,heading:LYe,html:jYe,imageReference:BYe,image:UYe,inlineCode:FYe,linkReference:$Ye,link:zYe,listItem:HYe,list:qYe,paragraph:GYe,root:KYe,strong:WYe,table:YYe,tableCell:XYe,tableRow:JYe,text:ZYe,thematicBreak:eJe,toml:AA,yaml:AA,definition:AA,footnoteDefinition:AA};function AA(){}const rfe=-1,NN=0,rw=1,oC=2,lB=3,cB=4,uB=5,dB=6,ife=7,sfe=8,DJ=typeof self=="object"?self:globalThis,nJe=(t,e)=>{const n=(i,s)=>(t.set(s,i),i),r=i=>{if(t.has(i))return t.get(i);const[s,o]=e[i];switch(s){case NN:case rfe:return n(o,i);case rw:{const a=n([],i);for(const l of o)a.push(r(l));return a}case oC:{const a=n({},i);for(const[l,c]of o)a[r(l)]=r(c);return a}case lB:return n(new Date(o),i);case cB:{const{source:a,flags:l}=o;return n(new RegExp(a,l),i)}case uB:{const a=n(new Map,i);for(const[l,c]of o)a.set(r(l),r(c));return a}case dB:{const a=n(new Set,i);for(const l of o)a.add(r(l));return a}case ife:{const{name:a,message:l}=o;return n(new DJ[a](l),i)}case sfe:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:a}=new Uint8Array(o);return n(new DataView(a),o)}}return n(new DJ[s](o),i)};return r},LJ=t=>nJe(new Map,t)(0),J0="",{toString:rJe}={},{keys:iJe}=Object,Ab=t=>{const e=typeof t;if(e!=="object"||!t)return[NN,e];const n=rJe.call(t).slice(8,-1);switch(n){case"Array":return[rw,J0];case"Object":return[oC,J0];case"Date":return[lB,J0];case"RegExp":return[cB,J0];case"Map":return[uB,J0];case"Set":return[dB,J0];case"DataView":return[rw,n]}return n.includes("Array")?[rw,n]:n.includes("Error")?[ife,n]:[oC,n]},TA=([t,e])=>t===NN&&(e==="function"||e==="symbol"),sJe=(t,e,n,r)=>{const i=(o,a)=>{const l=r.push(o)-1;return n.set(a,l),l},s=o=>{if(n.has(o))return n.get(o);let[a,l]=Ab(o);switch(a){case NN:{let u=o;switch(l){case"bigint":a=sfe,u=o.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+l);u=null;break;case"undefined":return i([rfe],o)}return i([a,u],o)}case rw:{if(l){let m=o;return l==="DataView"?m=new Uint8Array(o.buffer):l==="ArrayBuffer"&&(m=new Uint8Array(o)),i([l,[...m]],o)}const u=[],f=i([a,u],o);for(const m of o)u.push(s(m));return f}case oC:{if(l)switch(l){case"BigInt":return i([l,o.toString()],o);case"Boolean":case"Number":case"String":return i([l,o.valueOf()],o)}if(e&&"toJSON"in o)return s(o.toJSON());const u=[],f=i([a,u],o);for(const m of iJe(o))(t||!TA(Ab(o[m])))&&u.push([s(m),s(o[m])]);return f}case lB:return i([a,o.toISOString()],o);case cB:{const{source:u,flags:f}=o;return i([a,{source:u,flags:f}],o)}case uB:{const u=[],f=i([a,u],o);for(const[m,g]of o)(t||!(TA(Ab(m))||TA(Ab(g))))&&u.push([s(m),s(g)]);return f}case dB:{const u=[],f=i([a,u],o);for(const m of o)(t||!TA(Ab(m)))&&u.push(s(m));return f}}const{message:c}=o;return i([a,{name:l,message:c}],o)};return s},jJ=(t,{json:e,lossy:n}={})=>{const r=[];return sJe(!(e||n),!!e,new Map,r)(t),r},aC=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?LJ(jJ(t,e)):structuredClone(t):(t,e)=>LJ(jJ(t,e));function oJe(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function aJe(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function lJe(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||oJe,r=t.options.footnoteBackLabel||aJe,i=t.options.footnoteLabel||"Footnotes",s=t.options.footnoteLabelTagName||"h2",o=t.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let l=-1;for(;++l<t.footnoteOrder.length;){const c=t.footnoteById.get(t.footnoteOrder[l]);if(!c)continue;const u=t.all(c),f=String(c.identifier).toUpperCase(),m=iv(f.toLowerCase());let g=0;const v=[],x=t.footnoteCounts.get(f);for(;x!==void 0&&++g<=x;){v.length>0&&v.push({type:"text",value:" "});let C=typeof n=="string"?n:n(l,g);typeof C=="string"&&(C={type:"text",value:C}),v.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+m+(g>1?"-"+g:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(l,g),className:["data-footnote-backref"]},children:Array.isArray(C)?C:[C]})}const b=u[u.length-1];if(b&&b.type==="element"&&b.tagName==="p"){const C=b.children[b.children.length-1];C&&C.type==="text"?C.value+=" ":b.children.push({type:"text",value:" "}),b.children.push(...v)}else u.push(...v);const E={type:"element",tagName:"li",properties:{id:e+"fn-"+m},children:t.wrap(u,!0)};t.patch(c,E),a.push(E)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...aC(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(a,!0)},{type:"text",value:`
`}]}}const _N=(function(t){if(t==null)return fJe;if(typeof t=="function")return IN(t);if(typeof t=="object")return Array.isArray(t)?cJe(t):uJe(t);if(typeof t=="string")return dJe(t);throw new Error("Expected function, string, or object as test")});function cJe(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=_N(t[n]);return IN(r);function r(...i){let s=-1;for(;++s<e.length;)if(e[s].apply(this,i))return!0;return!1}}function uJe(t){const e=t;return IN(n);function n(r){const i=r;let s;for(s in t)if(i[s]!==e[s])return!1;return!0}}function dJe(t){return IN(e);function e(n){return n&&n.type===t}}function IN(t){return e;function e(n,r,i){return!!(hJe(n)&&t.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function fJe(){return!0}function hJe(t){return t!==null&&typeof t=="object"&&"type"in t}const ofe=[],pJe=!0,TD=!1,mJe="skip";function afe(t,e,n,r){let i;typeof e=="function"&&typeof n!="function"?(r=n,n=e):i=e;const s=_N(i),o=r?-1:1;a(t,void 0,[])();function a(l,c,u){const f=l&&typeof l=="object"?l:{};if(typeof f.type=="string"){const g=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(m,"name",{value:"node ("+(l.type+(g?"<"+g+">":""))+")"})}return m;function m(){let g=ofe,v,x,b;if((!e||s(l,c,u[u.length-1]||void 0))&&(g=gJe(n(l,u)),g[0]===TD))return g;if("children"in l&&l.children){const E=l;if(E.children&&g[0]!==mJe)for(x=(r?E.children.length:-1)+o,b=u.concat(E);x>-1&&x<E.children.length;){const C=E.children[x];if(v=a(C,x,b)(),v[0]===TD)return v;x=typeof v[1]=="number"?v[1]:x+o}}return g}}}function gJe(t){return Array.isArray(t)?t:typeof t=="number"?[pJe,t]:t==null?ofe:[t]}function fB(t,e,n,r){let i,s,o;typeof e=="function"&&typeof n!="function"?(s=void 0,o=e,i=n):(s=e,o=n,i=r),afe(t,s,a,i);function a(l,c){const u=c[c.length-1],f=u?u.children.indexOf(l):void 0;return o(l,f,u)}}const kD={}.hasOwnProperty,yJe={};function xJe(t,e){const n=e||yJe,r=new Map,i=new Map,s=new Map,o={...tJe,...n.handlers},a={all:c,applyData:bJe,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:l,options:n,patch:vJe,wrap:EJe};return fB(t,function(u){if(u.type==="definition"||u.type==="footnoteDefinition"){const f=u.type==="definition"?r:i,m=String(u.identifier).toUpperCase();f.has(m)||f.set(m,u)}}),a;function l(u,f){const m=u.type,g=a.handlers[m];if(kD.call(a.handlers,m)&&g)return g(a,u,f);if(a.options.passThrough&&a.options.passThrough.includes(m)){if("children"in u){const{children:x,...b}=u,E=aC(b);return E.children=a.all(u),E}return aC(u)}return(a.options.unknownHandler||wJe)(a,u,f)}function c(u){const f=[];if("children"in u){const m=u.children;let g=-1;for(;++g<m.length;){const v=a.one(m[g],u);if(v){if(g&&m[g-1].type==="break"&&(!Array.isArray(v)&&v.type==="text"&&(v.value=BJ(v.value)),!Array.isArray(v)&&v.type==="element")){const x=v.children[0];x&&x.type==="text"&&(x.value=BJ(x.value))}Array.isArray(v)?f.push(...v):f.push(v)}}}return f}}function vJe(t,e){t.position&&(e.position=aKe(t))}function bJe(t,e){let n=e;if(t&&t.data){const r=t.data.hName,i=t.data.hChildren,s=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,aC(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function wJe(t,e){const n=e.data||{},r="value"in e&&!(kD.call(n,"hProperties")||kD.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function EJe(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function BJ(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function UJ(t,e){const n=xJe(t,e),r=n.one(t,void 0),i=lJe(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function SJe(t,e){return t&&"run"in t?async function(n,r){const i=UJ(n,{file:r,...e});await t.run(i,r)}:function(n,r){return UJ(n,{file:r,...t||e})}}function FJ(t){if(t)throw t}var DO,$J;function AJe(){if($J)return DO;$J=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(c){return typeof Array.isArray=="function"?Array.isArray(c):e.call(c)==="[object Array]"},s=function(c){if(!c||e.call(c)!=="[object Object]")return!1;var u=t.call(c,"constructor"),f=c.constructor&&c.constructor.prototype&&t.call(c.constructor.prototype,"isPrototypeOf");if(c.constructor&&!u&&!f)return!1;var m;for(m in c);return typeof m>"u"||t.call(c,m)},o=function(c,u){n&&u.name==="__proto__"?n(c,u.name,{enumerable:!0,configurable:!0,value:u.newValue,writable:!0}):c[u.name]=u.newValue},a=function(c,u){if(u==="__proto__")if(t.call(c,u)){if(r)return r(c,u).value}else return;return c[u]};return DO=function l(){var c,u,f,m,g,v,x=arguments[0],b=1,E=arguments.length,C=!1;for(typeof x=="boolean"&&(C=x,x=arguments[1]||{},b=2),(x==null||typeof x!="object"&&typeof x!="function")&&(x={});b<E;++b)if(c=arguments[b],c!=null)for(u in c)f=a(x,u),m=a(c,u),x!==m&&(C&&m&&(s(m)||(g=i(m)))?(g?(g=!1,v=f&&i(f)?f:[]):v=f&&s(f)?f:{},o(x,{name:u,newValue:l(C,v,m)})):typeof m<"u"&&o(x,{name:u,newValue:m}));return x},DO}var TJe=AJe();const LO=us(TJe);function CD(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function kJe(){const t=[],e={run:n,use:r};return e;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(l,...c){const u=t[++s];let f=-1;if(l){o(l);return}for(;++f<i.length;)(c[f]===null||c[f]===void 0)&&(c[f]=i[f]);i=c,u?CJe(u,a)(...c):o(null,...c)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return t.push(i),e}}function CJe(t,e){let n;return r;function r(...o){const a=t.length>o.length;let l;a&&o.push(i);try{l=t.apply(this,o)}catch(c){const u=c;if(a&&n)throw u;return i(u)}a||(l&&l.then&&typeof l.then=="function"?l.then(s,i):l instanceof Error?i(l):s(l))}function i(o,...a){n||(n=!0,e(o,...a))}function s(o){i(null,o)}}const Ql={basename:NJe,dirname:_Je,extname:IJe,join:PJe,sep:"/"};function NJe(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');fE(t);let n=0,r=-1,i=t.length,s;if(e===void 0||e.length===0||e.length>t.length){for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let o=-1,a=e.length-1;for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(t.codePointAt(i)===e.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=t.length),t.slice(n,r)}function _Je(t){if(fE(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function IJe(t){fE(t);let e=t.length,n=-1,r=0,i=-1,s=0,o;for(;e--;){const a=t.codePointAt(e);if(a===47){if(o){r=e+1;break}continue}n<0&&(o=!0,n=e+1),a===46?i<0?i=e:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":t.slice(i,n)}function PJe(...t){let e=-1,n;for(;++e<t.length;)fE(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":RJe(n)}function RJe(t){fE(t);const e=t.codePointAt(0)===47;let n=OJe(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function OJe(t,e){let n="",r=0,i=-1,s=0,o=-1,a,l;for(;++o<=t.length;){if(o<t.length)a=t.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(i+1,o):n=t.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function fE(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const MJe={cwd:DJe};function DJe(){return"/"}function ND(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function LJe(t){if(typeof t=="string")t=new URL(t);else if(!ND(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return jJe(t)}function jJe(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const jO=["history","path","basename","stem","extname","dirname"];class lfe{constructor(e){let n;e?ND(e)?n={path:e}:typeof e=="string"||BJe(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":MJe.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<jO.length;){const s=jO[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)jO.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Ql.basename(this.path):void 0}set basename(e){UO(e,"basename"),BO(e,"basename"),this.path=Ql.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?Ql.dirname(this.path):void 0}set dirname(e){zJ(this.basename,"dirname"),this.path=Ql.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?Ql.extname(this.path):void 0}set extname(e){if(BO(e,"extname"),zJ(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Ql.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){ND(e)&&(e=LJe(e)),UO(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?Ql.basename(this.path,this.extname):void 0}set stem(e){UO(e,"stem"),BO(e,"stem"),this.path=Ql.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const i=this.message(e,n,r);throw i.fatal=!0,i}info(e,n,r){const i=this.message(e,n,r);return i.fatal=void 0,i}message(e,n,r){const i=new Ds(e,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function BO(t,e){if(t&&t.includes(Ql.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Ql.sep+"`")}function UO(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function zJ(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function BJe(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const UJe=(function(t){const r=this.constructor.prototype,i=r[t],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s}),FJe={}.hasOwnProperty;class hB extends UJe{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=kJe()}copy(){const e=new hB;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(LO(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(zO("data",this.frozen),this.namespace[e]=n,this):FJe.call(this.namespace,e)&&this.namespace[e]||void 0:e?(zO("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(e,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=kA(e),r=this.parser||this.Parser;return FO("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),FO("process",this.parser||this.Parser),$O("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=kA(e),l=r.parse(a);r.run(l,a,function(u,f,m){if(u||!f||!m)return c(u);const g=f,v=r.stringify(g,m);HJe(v)?m.value=v:m.result=v,c(u,m)});function c(u,f){u||!f?o(u):s?s(f):n(void 0,f)}}}processSync(e){let n=!1,r;return this.freeze(),FO("processSync",this.parser||this.Parser),$O("processSync",this.compiler||this.Compiler),this.process(e,i),VJ("processSync","process",n),r;function i(s,o){n=!0,FJ(s),r=o}}run(e,n,r){HJ(e),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const l=kA(n);i.run(e,l,c);function c(u,f,m){const g=f||e;u?a(u):o?o(g):r(void 0,g,m)}}}runSync(e,n){let r=!1,i;return this.run(e,n,s),VJ("runSync","run",r),i;function s(o,a){FJ(o),i=a,r=!0}}stringify(e,n){this.freeze();const r=kA(n),i=this.compiler||this.Compiler;return $O("stringify",i),HJ(e),i(e,r)}use(e,...n){const r=this.attachers,i=this.namespace;if(zO("use",this.frozen),e!=null)if(typeof e=="function")l(e,n);else if(typeof e=="object")Array.isArray(e)?a(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(c){if(typeof c=="function")l(c,[]);else if(typeof c=="object")if(Array.isArray(c)){const[u,...f]=c;l(u,f)}else o(c);else throw new TypeError("Expected usable value, not `"+c+"`")}function o(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(c.plugins),c.settings&&(i.settings=LO(!0,i.settings,c.settings))}function a(c){let u=-1;if(c!=null)if(Array.isArray(c))for(;++u<c.length;){const f=c[u];s(f)}else throw new TypeError("Expected a list of plugins, not `"+c+"`")}function l(c,u){let f=-1,m=-1;for(;++f<r.length;)if(r[f][0]===c){m=f;break}if(m===-1)r.push([c,...u]);else if(u.length>0){let[g,...v]=u;const x=r[m][1];CD(x)&&CD(g)&&(g=LO(!0,x,g)),r[m]=[c,g,...v]}}}}const $Je=new hB().freeze();function FO(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function $O(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function zO(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function HJ(t){if(!CD(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function VJ(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function kA(t){return zJe(t)?t:new lfe(t)}function zJe(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function HJe(t){return typeof t=="string"||VJe(t)}function VJe(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const qJe="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",qJ=[],GJ={allowDangerousHtml:!0},GJe=/^(https?|ircs?|mailto|xmpp)$/i,KJe=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function WJe(t){const e=YJe(t),n=JJe(t);return XJe(e.runSync(e.parse(n),n),t)}function YJe(t){const e=t.rehypePlugins||qJ,n=t.remarkPlugins||qJ,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...GJ}:GJ;return $Je().use(_Ye).use(n).use(SJe,r).use(e)}function JJe(t){const e=t.children||"",n=new lfe;return typeof e=="string"&&(n.value=e),n}function XJe(t,e){const n=e.allowedElements,r=e.allowElement,i=e.components,s=e.disallowedElements,o=e.skipHtml,a=e.unwrapDisallowed,l=e.urlTransform||QJe;for(const u of KJe)Object.hasOwn(e,u.from)&&(""+u.from+(u.to?"use `"+u.to+"` instead":"remove it")+qJe+u.id,void 0);return fB(t,c),fKe(t,{Fragment:h.Fragment,components:i,ignoreInvalidStyle:!0,jsx:h.jsx,jsxs:h.jsxs,passKeys:!0,passNode:!0});function c(u,f,m){if(u.type==="raw"&&m&&typeof f=="number")return o?m.children.splice(f,1):m.children[f]={type:"text",value:u.value},f;if(u.type==="element"){let g;for(g in RO)if(Object.hasOwn(RO,g)&&Object.hasOwn(u.properties,g)){const v=u.properties[g],x=RO[g];(x===null||x.includes(u.tagName))&&(u.properties[g]=l(String(v||""),g,u))}}if(u.type==="element"){let g=n?!n.includes(u.tagName):s?s.includes(u.tagName):!1;if(!g&&r&&typeof f=="number"&&(g=!r(u,f,m)),g&&m&&typeof f=="number")return a&&u.children?m.children.splice(f,1,...u.children):m.children.splice(f,1),f}}}function QJe(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),i=t.indexOf("/");return e===-1||i!==-1&&e>i||n!==-1&&e>n||r!==-1&&e>r||GJe.test(t.slice(0,e))?t:""}function KJ(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(e);for(;i!==-1;)r++,i=n.indexOf(e,i+e.length);return r}function ZJe(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function eXe(t,e,n){const i=_N((n||{}).ignore||[]),s=tXe(e);let o=-1;for(;++o<s.length;)afe(t,"text",a);function a(c,u){let f=-1,m;for(;++f<u.length;){const g=u[f],v=m?m.children:void 0;if(i(g,v?v.indexOf(g):void 0,m))return;m=g}if(m)return l(c,u)}function l(c,u){const f=u[u.length-1],m=s[o][0],g=s[o][1];let v=0;const b=f.children.indexOf(c);let E=!1,C=[];m.lastIndex=0;let k=m.exec(c.value);for(;k;){const O=k.index,U={index:k.index,input:k.input,stack:[...u,c]};let R=g(...k,U);if(typeof R=="string"&&(R=R.length>0?{type:"text",value:R}:void 0),R===!1?m.lastIndex=O+1:(v!==O&&C.push({type:"text",value:c.value.slice(v,O)}),Array.isArray(R)?C.push(...R):R&&C.push(R),v=O+k[0].length,E=!0),!m.global)break;k=m.exec(c.value)}return E?(v<c.value.length&&C.push({type:"text",value:c.value.slice(v)}),f.children.splice(b,1,...C)):C=[c],b+C.length}}function tXe(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let r=-1;for(;++r<n.length;){const i=n[r];e.push([nXe(i[0]),rXe(i[1])])}return e}function nXe(t){return typeof t=="string"?new RegExp(ZJe(t),"g"):t}function rXe(t){return typeof t=="function"?t:function(){return t}}const HO="phrasing",VO=["autolink","link","image","label"];function iXe(){return{transforms:[dXe],enter:{literalAutolink:oXe,literalAutolinkEmail:qO,literalAutolinkHttp:qO,literalAutolinkWww:qO},exit:{literalAutolink:uXe,literalAutolinkEmail:cXe,literalAutolinkHttp:aXe,literalAutolinkWww:lXe}}}function sXe(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:HO,notInConstruct:VO},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:HO,notInConstruct:VO},{character:":",before:"[ps]",after:"\\/",inConstruct:HO,notInConstruct:VO}]}}function oXe(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function qO(t){this.config.enter.autolinkProtocol.call(this,t)}function aXe(t){this.config.exit.autolinkProtocol.call(this,t)}function lXe(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function cXe(t){this.config.exit.autolinkEmail.call(this,t)}function uXe(t){this.exit(t)}function dXe(t){eXe(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,fXe],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),hXe]],{ignore:["link","linkReference"]})}function fXe(t,e,n,r,i){let s="";if(!cfe(i)||(/^w/i.test(e)&&(n=e+n,e="",s="http://"),!pXe(n)))return!1;const o=mXe(n+r);if(!o[0])return!1;const a={type:"link",title:null,url:s+e+o[0],children:[{type:"text",value:e+o[0]}]};return o[1]?[a,{type:"text",value:o[1]}]:a}function hXe(t,e,n,r){return!cfe(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function pXe(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function mXe(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],r=n.indexOf(")");const i=KJ(t,"(");let s=KJ(t,")");for(;r!==-1&&i>s;)t+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),s++;return[t,n]}function cfe(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||Tm(n)||kN(n))&&(!e||n!==47)}ufe.peek=AXe;function gXe(){this.buffer()}function yXe(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function xXe(){this.buffer()}function vXe(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function bXe(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=kl(this.sliceSerialize(t)).toLowerCase(),n.label=e}function wXe(t){this.exit(t)}function EXe(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=kl(this.sliceSerialize(t)).toLowerCase(),n.label=e}function SXe(t){this.exit(t)}function AXe(){return"["}function ufe(t,e,n,r){const i=n.createTracker(r);let s=i.move("[^");const o=n.enter("footnoteReference"),a=n.enter("reference");return s+=i.move(n.safe(n.associationId(t),{after:"]",before:s})),a(),o(),s+=i.move("]"),s}function TXe(){return{enter:{gfmFootnoteCallString:gXe,gfmFootnoteCall:yXe,gfmFootnoteDefinitionLabelString:xXe,gfmFootnoteDefinition:vXe},exit:{gfmFootnoteCallString:bXe,gfmFootnoteCall:wXe,gfmFootnoteDefinitionLabelString:EXe,gfmFootnoteDefinition:SXe}}}function kXe(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:ufe},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,i,s,o){const a=s.createTracker(o);let l=a.move("[^");const c=s.enter("footnoteDefinition"),u=s.enter("label");return l+=a.move(s.safe(s.associationId(r),{before:l,after:"]"})),u(),l+=a.move("]:"),r.children&&r.children.length>0&&(a.shift(4),l+=a.move((e?`
`:" ")+s.indentLines(s.containerFlow(r,a.current()),e?dfe:CXe))),c(),l}}function CXe(t,e,n){return e===0?t:dfe(t,e,n)}function dfe(t,e,n){return(n?"":"    ")+t}const NXe=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];ffe.peek=OXe;function _Xe(){return{canContainEols:["delete"],enter:{strikethrough:PXe},exit:{strikethrough:RXe}}}function IXe(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:NXe}],handlers:{delete:ffe}}}function PXe(t){this.enter({type:"delete",children:[]},t)}function RXe(t){this.exit(t)}function ffe(t,e,n,r){const i=n.createTracker(r),s=n.enter("strikethrough");let o=i.move("~~");return o+=n.containerPhrasing(t,{...i.current(),before:o,after:"~"}),o+=i.move("~~"),s(),o}function OXe(){return"~"}function MXe(t){return t.length}function DXe(t,e){const n=e||{},r=(n.align||[]).concat(),i=n.stringLength||MXe,s=[],o=[],a=[],l=[];let c=0,u=-1;for(;++u<t.length;){const x=[],b=[];let E=-1;for(t[u].length>c&&(c=t[u].length);++E<t[u].length;){const C=LXe(t[u][E]);if(n.alignDelimiters!==!1){const k=i(C);b[E]=k,(l[E]===void 0||k>l[E])&&(l[E]=k)}x.push(C)}o[u]=x,a[u]=b}let f=-1;if(typeof r=="object"&&"length"in r)for(;++f<c;)s[f]=WJ(r[f]);else{const x=WJ(r);for(;++f<c;)s[f]=x}f=-1;const m=[],g=[];for(;++f<c;){const x=s[f];let b="",E="";x===99?(b=":",E=":"):x===108?b=":":x===114&&(E=":");let C=n.alignDelimiters===!1?1:Math.max(1,l[f]-b.length-E.length);const k=b+"-".repeat(C)+E;n.alignDelimiters!==!1&&(C=b.length+C+E.length,C>l[f]&&(l[f]=C),g[f]=C),m[f]=k}o.splice(1,0,m),a.splice(1,0,g),u=-1;const v=[];for(;++u<o.length;){const x=o[u],b=a[u];f=-1;const E=[];for(;++f<c;){const C=x[f]||"";let k="",O="";if(n.alignDelimiters!==!1){const U=l[f]-(b[f]||0),R=s[f];R===114?k=" ".repeat(U):R===99?U%2?(k=" ".repeat(U/2+.5),O=" ".repeat(U/2-.5)):(k=" ".repeat(U/2),O=k):O=" ".repeat(U)}n.delimiterStart!==!1&&!f&&E.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&C==="")&&(n.delimiterStart!==!1||f)&&E.push(" "),n.alignDelimiters!==!1&&E.push(k),E.push(C),n.alignDelimiters!==!1&&E.push(O),n.padding!==!1&&E.push(" "),(n.delimiterEnd!==!1||f!==c-1)&&E.push("|")}v.push(n.delimiterEnd===!1?E.join("").replace(/ +$/,""):E.join(""))}return v.join(`
`)}function LXe(t){return t==null?"":String(t)}function WJ(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function jXe(t,e,n,r){const i=n.enter("blockquote"),s=n.createTracker(r);s.move("> "),s.shift(2);const o=n.indentLines(n.containerFlow(t,s.current()),BXe);return i(),o}function BXe(t,e,n){return">"+(n?"":" ")+t}function UXe(t,e){return YJ(t,e.inConstruct,!0)&&!YJ(t,e.notInConstruct,!1)}function YJ(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let r=-1;for(;++r<e.length;)if(t.includes(e[r]))return!0;return!1}function JJ(t,e,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&UXe(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function FXe(t,e){const n=String(t);let r=n.indexOf(e),i=r,s=0,o=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++s>o&&(o=s):s=1,i=r+e.length,r=n.indexOf(e,i);return o}function $Xe(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function zXe(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function HXe(t,e,n,r){const i=zXe(n),s=t.value||"",o=i==="`"?"GraveAccent":"Tilde";if($Xe(t,n)){const f=n.enter("codeIndented"),m=n.indentLines(s,VXe);return f(),m}const a=n.createTracker(r),l=i.repeat(Math.max(FXe(s,i)+1,3)),c=n.enter("codeFenced");let u=a.move(l);if(t.lang){const f=n.enter(`codeFencedLang${o}`);u+=a.move(n.safe(t.lang,{before:u,after:" ",encode:["`"],...a.current()})),f()}if(t.lang&&t.meta){const f=n.enter(`codeFencedMeta${o}`);u+=a.move(" "),u+=a.move(n.safe(t.meta,{before:u,after:`
`,encode:["`"],...a.current()})),f()}return u+=a.move(`
`),s&&(u+=a.move(s+`
`)),u+=a.move(l),c(),u}function VXe(t,e,n){return(n?"":"    ")+t}function pB(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function qXe(t,e,n,r){const i=pB(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("definition");let a=n.enter("label");const l=n.createTracker(r);let c=l.move("[");return c+=l.move(n.safe(n.associationId(t),{before:c,after:"]",...l.current()})),c+=l.move("]: "),a(),!t.url||/[\0- \u007F]/.test(t.url)?(a=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(t.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=n.enter("destinationRaw"),c+=l.move(n.safe(t.url,{before:c,after:t.title?" ":`
`,...l.current()}))),a(),t.title&&(a=n.enter(`title${s}`),c+=l.move(" "+i),c+=l.move(n.safe(t.title,{before:c,after:i,...l.current()})),c+=l.move(i),a()),o(),c}function GXe(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function n1(t){return"&#x"+t.toString(16).toUpperCase()+";"}function lC(t,e,n){const r=bx(t),i=bx(e);return r===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}hfe.peek=KXe;function hfe(t,e,n,r){const i=GXe(n),s=n.enter("emphasis"),o=n.createTracker(r),a=o.move(i);let l=o.move(n.containerPhrasing(t,{after:i,before:a,...o.current()}));const c=l.charCodeAt(0),u=lC(r.before.charCodeAt(r.before.length-1),c,i);u.inside&&(l=n1(c)+l.slice(1));const f=l.charCodeAt(l.length-1),m=lC(r.after.charCodeAt(0),f,i);m.inside&&(l=l.slice(0,-1)+n1(f));const g=o.move(i);return s(),n.attentionEncodeSurroundingInfo={after:m.outside,before:u.outside},a+l+g}function KXe(t,e,n){return n.options.emphasis||"*"}function WXe(t,e){let n=!1;return fB(t,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,TD}),!!((!t.depth||t.depth<3)&&sB(t)&&(e.options.setext||n))}function YXe(t,e,n,r){const i=Math.max(Math.min(6,t.depth||1),1),s=n.createTracker(r);if(WXe(t,n)){const u=n.enter("headingSetext"),f=n.enter("phrasing"),m=n.containerPhrasing(t,{...s.current(),before:`
`,after:`
`});return f(),u(),m+`
`+(i===1?"=":"-").repeat(m.length-(Math.max(m.lastIndexOf("\r"),m.lastIndexOf(`
`))+1))}const o="#".repeat(i),a=n.enter("headingAtx"),l=n.enter("phrasing");s.move(o+" ");let c=n.containerPhrasing(t,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(c)&&(c=n1(c.charCodeAt(0))+c.slice(1)),c=c?o+" "+c:o,n.options.closeAtx&&(c+=" "+o),l(),a(),c}pfe.peek=JXe;function pfe(t){return t.value||""}function JXe(){return"<"}mfe.peek=XXe;function mfe(t,e,n,r){const i=pB(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("image");let a=n.enter("label");const l=n.createTracker(r);let c=l.move("![");return c+=l.move(n.safe(t.alt,{before:c,after:"]",...l.current()})),c+=l.move("]("),a(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(a=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(t.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=n.enter("destinationRaw"),c+=l.move(n.safe(t.url,{before:c,after:t.title?" ":")",...l.current()}))),a(),t.title&&(a=n.enter(`title${s}`),c+=l.move(" "+i),c+=l.move(n.safe(t.title,{before:c,after:i,...l.current()})),c+=l.move(i),a()),c+=l.move(")"),o(),c}function XXe(){return"!"}gfe.peek=QXe;function gfe(t,e,n,r){const i=t.referenceType,s=n.enter("imageReference");let o=n.enter("label");const a=n.createTracker(r);let l=a.move("![");const c=n.safe(t.alt,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),o();const u=n.stack;n.stack=[],o=n.enter("reference");const f=n.safe(n.associationId(t),{before:l,after:"]",...a.current()});return o(),n.stack=u,s(),i==="full"||!c||c!==f?l+=a.move(f+"]"):i==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function QXe(){return"!"}yfe.peek=ZXe;function yfe(t,e,n){let r=t.value||"",i="`",s=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++s<n.unsafe.length;){const o=n.unsafe[s],a=n.compilePattern(o);let l;if(o.atBreak)for(;l=a.exec(r);){let c=l.index;r.charCodeAt(c)===10&&r.charCodeAt(c-1)===13&&c--,r=r.slice(0,c)+" "+r.slice(l.index+1)}}return i+r+i}function ZXe(){return"`"}function xfe(t,e){const n=sB(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}vfe.peek=eQe;function vfe(t,e,n,r){const i=pB(n),s=i==='"'?"Quote":"Apostrophe",o=n.createTracker(r);let a,l;if(xfe(t,n)){const u=n.stack;n.stack=[],a=n.enter("autolink");let f=o.move("<");return f+=o.move(n.containerPhrasing(t,{before:f,after:">",...o.current()})),f+=o.move(">"),a(),n.stack=u,f}a=n.enter("link"),l=n.enter("label");let c=o.move("[");return c+=o.move(n.containerPhrasing(t,{before:c,after:"](",...o.current()})),c+=o.move("]("),l(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),c+=o.move("<"),c+=o.move(n.safe(t.url,{before:c,after:">",...o.current()})),c+=o.move(">")):(l=n.enter("destinationRaw"),c+=o.move(n.safe(t.url,{before:c,after:t.title?" ":")",...o.current()}))),l(),t.title&&(l=n.enter(`title${s}`),c+=o.move(" "+i),c+=o.move(n.safe(t.title,{before:c,after:i,...o.current()})),c+=o.move(i),l()),c+=o.move(")"),a(),c}function eQe(t,e,n){return xfe(t,n)?"<":"["}bfe.peek=tQe;function bfe(t,e,n,r){const i=t.referenceType,s=n.enter("linkReference");let o=n.enter("label");const a=n.createTracker(r);let l=a.move("[");const c=n.containerPhrasing(t,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),o();const u=n.stack;n.stack=[],o=n.enter("reference");const f=n.safe(n.associationId(t),{before:l,after:"]",...a.current()});return o(),n.stack=u,s(),i==="full"||!c||c!==f?l+=a.move(f+"]"):i==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function tQe(){return"["}function mB(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function nQe(t){const e=mB(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function rQe(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function wfe(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function iQe(t,e,n,r){const i=n.enter("list"),s=n.bulletCurrent;let o=t.ordered?rQe(n):mB(n);const a=t.ordered?o==="."?")":".":nQe(n);let l=e&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!t.ordered){const u=t.children?t.children[0]:void 0;if((o==="*"||o==="-")&&u&&(!u.children||!u.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(l=!0),wfe(n)===o&&u){let f=-1;for(;++f<t.children.length;){const m=t.children[f];if(m&&m.type==="listItem"&&m.children&&m.children[0]&&m.children[0].type==="thematicBreak"){l=!0;break}}}}l&&(o=a),n.bulletCurrent=o;const c=n.containerFlow(t,r);return n.bulletLastUsed=o,n.bulletCurrent=s,i(),c}function sQe(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function oQe(t,e,n,r){const i=sQe(n);let s=n.bulletCurrent||mB(n);e&&e.type==="list"&&e.ordered&&(s=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+s);let o=s.length+1;(i==="tab"||i==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(o=Math.ceil(o/4)*4);const a=n.createTracker(r);a.move(s+" ".repeat(o-s.length)),a.shift(o);const l=n.enter("listItem"),c=n.indentLines(n.containerFlow(t,a.current()),u);return l(),c;function u(f,m,g){return m?(g?"":" ".repeat(o))+f:(g?s:s+" ".repeat(o-s.length))+f}}function aQe(t,e,n,r){const i=n.enter("paragraph"),s=n.enter("phrasing"),o=n.containerPhrasing(t,r);return s(),i(),o}const lQe=_N(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function cQe(t,e,n,r){return(t.children.some(function(o){return lQe(o)})?n.containerPhrasing:n.containerFlow).call(n,t,r)}function uQe(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}Efe.peek=dQe;function Efe(t,e,n,r){const i=uQe(n),s=n.enter("strong"),o=n.createTracker(r),a=o.move(i+i);let l=o.move(n.containerPhrasing(t,{after:i,before:a,...o.current()}));const c=l.charCodeAt(0),u=lC(r.before.charCodeAt(r.before.length-1),c,i);u.inside&&(l=n1(c)+l.slice(1));const f=l.charCodeAt(l.length-1),m=lC(r.after.charCodeAt(0),f,i);m.inside&&(l=l.slice(0,-1)+n1(f));const g=o.move(i+i);return s(),n.attentionEncodeSurroundingInfo={after:m.outside,before:u.outside},a+l+g}function dQe(t,e,n){return n.options.strong||"*"}function fQe(t,e,n,r){return n.safe(t.value,r)}function hQe(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function pQe(t,e,n){const r=(wfe(n)+(n.options.ruleSpaces?" ":"")).repeat(hQe(n));return n.options.ruleSpaces?r.slice(0,-1):r}const Sfe={blockquote:jXe,break:JJ,code:HXe,definition:qXe,emphasis:hfe,hardBreak:JJ,heading:YXe,html:pfe,image:mfe,imageReference:gfe,inlineCode:yfe,link:vfe,linkReference:bfe,list:iQe,listItem:oQe,paragraph:aQe,root:cQe,strong:Efe,text:fQe,thematicBreak:pQe};function mQe(){return{enter:{table:gQe,tableData:XJ,tableHeader:XJ,tableRow:xQe},exit:{codeText:vQe,table:yQe,tableData:GO,tableHeader:GO,tableRow:GO}}}function gQe(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function yQe(t){this.exit(t),this.data.inTable=void 0}function xQe(t){this.enter({type:"tableRow",children:[]},t)}function GO(t){this.exit(t)}function XJ(t){this.enter({type:"tableCell",children:[]},t)}function vQe(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,bQe));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function bQe(t,e){return e==="|"?e:t}function wQe(t){const e=t||{},n=e.tableCellPadding,r=e.tablePipeAlign,i=e.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:m,table:o,tableCell:l,tableRow:a}};function o(g,v,x,b){return c(u(g,x,b),g.align)}function a(g,v,x,b){const E=f(g,x,b),C=c([E]);return C.slice(0,C.indexOf(`
`))}function l(g,v,x,b){const E=x.enter("tableCell"),C=x.enter("phrasing"),k=x.containerPhrasing(g,{...b,before:s,after:s});return C(),E(),k}function c(g,v){return DXe(g,{align:v,alignDelimiters:r,padding:n,stringLength:i})}function u(g,v,x){const b=g.children;let E=-1;const C=[],k=v.enter("table");for(;++E<b.length;)C[E]=f(b[E],v,x);return k(),C}function f(g,v,x){const b=g.children;let E=-1;const C=[],k=v.enter("tableRow");for(;++E<b.length;)C[E]=l(b[E],g,v,x);return k(),C}function m(g,v,x){let b=Sfe.inlineCode(g,v,x);return x.stack.includes("tableCell")&&(b=b.replace(/\|/g,"\\$&")),b}}function EQe(){return{exit:{taskListCheckValueChecked:QJ,taskListCheckValueUnchecked:QJ,paragraph:AQe}}}function SQe(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:TQe}}}function QJ(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function AQe(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const i=e.children;let s=-1,o;for(;++s<i.length;){const a=i[s];if(a.type==="paragraph"){o=a;break}}o===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(t)}function TQe(t,e,n,r){const i=t.children[0],s=typeof t.checked=="boolean"&&i&&i.type==="paragraph",o="["+(t.checked?"x":" ")+"] ",a=n.createTracker(r);s&&a.move(o);let l=Sfe.listItem(t,e,n,{...r,...a.current()});return s&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,c)),l;function c(u){return u+o}}function kQe(){return[iXe(),TXe(),_Xe(),mQe(),EQe()]}function CQe(t){return{extensions:[sXe(),kXe(t),IXe(),wQe(t),SQe()]}}const NQe={tokenize:MQe,partial:!0},Afe={tokenize:DQe,partial:!0},Tfe={tokenize:LQe,partial:!0},kfe={tokenize:jQe,partial:!0},_Qe={tokenize:BQe,partial:!0},Cfe={name:"wwwAutolink",tokenize:RQe,previous:_fe},Nfe={name:"protocolAutolink",tokenize:OQe,previous:Ife},Rd={name:"emailAutolink",tokenize:PQe,previous:Pfe},Hc={};function IQe(){return{text:Hc}}let Yh=48;for(;Yh<123;)Hc[Yh]=Rd,Yh++,Yh===58?Yh=65:Yh===91&&(Yh=97);Hc[43]=Rd;Hc[45]=Rd;Hc[46]=Rd;Hc[95]=Rd;Hc[72]=[Rd,Nfe];Hc[104]=[Rd,Nfe];Hc[87]=[Rd,Cfe];Hc[119]=[Rd,Cfe];function PQe(t,e,n){const r=this;let i,s;return o;function o(f){return!_D(f)||!Pfe.call(r,r.previous)||gB(r.events)?n(f):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),a(f))}function a(f){return _D(f)?(t.consume(f),a):f===64?(t.consume(f),l):n(f)}function l(f){return f===46?t.check(_Qe,u,c)(f):f===45||f===95||Ns(f)?(s=!0,t.consume(f),l):u(f)}function c(f){return t.consume(f),i=!0,l}function u(f){return s&&i&&zs(r.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(f)):n(f)}}function RQe(t,e,n){const r=this;return i;function i(o){return o!==87&&o!==119||!_fe.call(r,r.previous)||gB(r.events)?n(o):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(NQe,t.attempt(Afe,t.attempt(Tfe,s),n),n)(o))}function s(o){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(o)}}function OQe(t,e,n){const r=this;let i="",s=!1;return o;function o(f){return(f===72||f===104)&&Ife.call(r,r.previous)&&!gB(r.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),i+=String.fromCodePoint(f),t.consume(f),a):n(f)}function a(f){if(zs(f)&&i.length<5)return i+=String.fromCodePoint(f),t.consume(f),a;if(f===58){const m=i.toLowerCase();if(m==="http"||m==="https")return t.consume(f),l}return n(f)}function l(f){return f===47?(t.consume(f),s?c:(s=!0,l)):n(f)}function c(f){return f===null||sC(f)||lr(f)||Tm(f)||kN(f)?n(f):t.attempt(Afe,t.attempt(Tfe,u),n)(f)}function u(f){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(f)}}function MQe(t,e,n){let r=0;return i;function i(o){return(o===87||o===119)&&r<3?(r++,t.consume(o),i):o===46&&r===3?(t.consume(o),s):n(o)}function s(o){return o===null?n(o):e(o)}}function DQe(t,e,n){let r,i,s;return o;function o(c){return c===46||c===95?t.check(kfe,l,a)(c):c===null||lr(c)||Tm(c)||c!==45&&kN(c)?l(c):(s=!0,t.consume(c),o)}function a(c){return c===95?r=!0:(i=r,r=void 0),t.consume(c),o}function l(c){return i||r||!s?n(c):e(c)}}function LQe(t,e){let n=0,r=0;return i;function i(o){return o===40?(n++,t.consume(o),i):o===41&&r<n?s(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?t.check(kfe,e,s)(o):o===null||lr(o)||Tm(o)?e(o):(t.consume(o),i)}function s(o){return o===41&&r++,t.consume(o),i}}function jQe(t,e,n){return r;function r(a){return a===33||a===34||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===63||a===95||a===126?(t.consume(a),r):a===38?(t.consume(a),s):a===93?(t.consume(a),i):a===60||a===null||lr(a)||Tm(a)?e(a):n(a)}function i(a){return a===null||a===40||a===91||lr(a)||Tm(a)?e(a):r(a)}function s(a){return zs(a)?o(a):n(a)}function o(a){return a===59?(t.consume(a),r):zs(a)?(t.consume(a),o):n(a)}}function BQe(t,e,n){return r;function r(s){return t.consume(s),i}function i(s){return Ns(s)?n(s):e(s)}}function _fe(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||lr(t)}function Ife(t){return!zs(t)}function Pfe(t){return!(t===47||_D(t))}function _D(t){return t===43||t===45||t===46||t===95||Ns(t)}function gB(t){let e=t.length,n=!1;for(;e--;){const r=t[e][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const UQe={tokenize:KQe,partial:!0};function FQe(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:VQe,continuation:{tokenize:qQe},exit:GQe}},text:{91:{name:"gfmFootnoteCall",tokenize:HQe},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:$Qe,resolveTo:zQe}}}}function $Qe(t,e,n){const r=this;let i=r.events.length;const s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o;for(;i--;){const l=r.events[i][1];if(l.type==="labelImage"){o=l;break}if(l.type==="gfmFootnoteCall"||l.type==="labelLink"||l.type==="label"||l.type==="image"||l.type==="link")break}return a;function a(l){if(!o||!o._balanced)return n(l);const c=kl(r.sliceSerialize({start:o.end,end:r.now()}));return c.codePointAt(0)!==94||!s.includes(c.slice(1))?n(l):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(l),t.exit("gfmFootnoteCallLabelMarker"),e(l))}}function zQe(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},t[t.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},a=[t[n+1],t[n+2],["enter",r,e],t[n+3],t[n+4],["enter",i,e],["exit",i,e],["enter",s,e],["enter",o,e],["exit",o,e],["exit",s,e],t[t.length-2],t[t.length-1],["exit",r,e]];return t.splice(n,t.length-n+1,...a),t}function HQe(t,e,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s=0,o;return a;function a(f){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(f),t.exit("gfmFootnoteCallLabelMarker"),l}function l(f){return f!==94?n(f):(t.enter("gfmFootnoteCallMarker"),t.consume(f),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",c)}function c(f){if(s>999||f===93&&!o||f===null||f===91||lr(f))return n(f);if(f===93){t.exit("chunkString");const m=t.exit("gfmFootnoteCallString");return i.includes(kl(r.sliceSerialize(m)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(f),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(f)}return lr(f)||(o=!0),s++,t.consume(f),f===92?u:c}function u(f){return f===91||f===92||f===93?(t.consume(f),s++,c):c(f)}}function VQe(t,e,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s,o=0,a;return l;function l(v){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(v),t.exit("gfmFootnoteDefinitionLabelMarker"),c}function c(v){return v===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(v),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",u):n(v)}function u(v){if(o>999||v===93&&!a||v===null||v===91||lr(v))return n(v);if(v===93){t.exit("chunkString");const x=t.exit("gfmFootnoteDefinitionLabelString");return s=kl(r.sliceSerialize(x)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(v),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),m}return lr(v)||(a=!0),o++,t.consume(v),v===92?f:u}function f(v){return v===91||v===92||v===93?(t.consume(v),o++,u):u(v)}function m(v){return v===58?(t.enter("definitionMarker"),t.consume(v),t.exit("definitionMarker"),i.includes(s)||i.push(s),Pn(t,g,"gfmFootnoteDefinitionWhitespace")):n(v)}function g(v){return e(v)}}function qQe(t,e,n){return t.check(dE,e,t.attempt(UQe,e,n))}function GQe(t){t.exit("gfmFootnoteDefinition")}function KQe(t,e,n){const r=this;return Pn(t,i,"gfmFootnoteDefinitionIndent",5);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?e(s):n(s)}}function WQe(t){let n=(t||{}).singleTilde;const r={name:"strikethrough",tokenize:s,resolveAll:i};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(o,a){let l=-1;for(;++l<o.length;)if(o[l][0]==="enter"&&o[l][1].type==="strikethroughSequenceTemporary"&&o[l][1]._close){let c=l;for(;c--;)if(o[c][0]==="exit"&&o[c][1].type==="strikethroughSequenceTemporary"&&o[c][1]._open&&o[l][1].end.offset-o[l][1].start.offset===o[c][1].end.offset-o[c][1].start.offset){o[l][1].type="strikethroughSequence",o[c][1].type="strikethroughSequence";const u={type:"strikethrough",start:Object.assign({},o[c][1].start),end:Object.assign({},o[l][1].end)},f={type:"strikethroughText",start:Object.assign({},o[c][1].end),end:Object.assign({},o[l][1].start)},m=[["enter",u,a],["enter",o[c][1],a],["exit",o[c][1],a],["enter",f,a]],g=a.parser.constructs.insideSpan.null;g&&Jo(m,m.length,0,CN(g,o.slice(c+1,l),a)),Jo(m,m.length,0,[["exit",f,a],["enter",o[l][1],a],["exit",o[l][1],a],["exit",u,a]]),Jo(o,c-1,l-c+3,m),l=c+m.length-2;break}}for(l=-1;++l<o.length;)o[l][1].type==="strikethroughSequenceTemporary"&&(o[l][1].type="data");return o}function s(o,a,l){const c=this.previous,u=this.events;let f=0;return m;function m(v){return c===126&&u[u.length-1][1].type!=="characterEscape"?l(v):(o.enter("strikethroughSequenceTemporary"),g(v))}function g(v){const x=bx(c);if(v===126)return f>1?l(v):(o.consume(v),f++,g);if(f<2&&!n)return l(v);const b=o.exit("strikethroughSequenceTemporary"),E=bx(v);return b._open=!E||E===2&&!!x,b._close=!x||x===2&&!!E,a(v)}}}class YQe{constructor(){this.map=[]}add(e,n,r){JQe(this,e,n,r)}consume(e){if(this.map.sort(function(s,o){return s[0]-o[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];r.push(e.slice()),e.length=0;let i=r.pop();for(;i;){for(const s of i)e.push(s);i=r.pop()}this.map.length=0}}function JQe(t,e,n,r){let i=0;if(!(n===0&&r.length===0)){for(;i<t.map.length;){if(t.map[i][0]===e){t.map[i][1]+=n,t.map[i][2].push(...r);return}i+=1}t.map.push([e,n,r])}}function XQe(t,e){let n=!1;const r=[];for(;e<t.length;){const i=t[e];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const s=r.length-1;r[s]=r[s]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return r}function QQe(){return{flow:{null:{name:"table",tokenize:ZQe,resolveAll:eZe}}}}function ZQe(t,e,n){const r=this;let i=0,s=0,o;return a;function a(F){let W=r.events.length-1;for(;W>-1;){const A=r.events[W][1].type;if(A==="lineEnding"||A==="linePrefix")W--;else break}const H=W>-1?r.events[W][1].type:null,B=H==="tableHead"||H==="tableRow"?R:l;return B===R&&r.parser.lazy[r.now().line]?n(F):B(F)}function l(F){return t.enter("tableHead"),t.enter("tableRow"),c(F)}function c(F){return F===124||(o=!0,s+=1),u(F)}function u(F){return F===null?n(F):Gt(F)?s>1?(s=0,r.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(F),t.exit("lineEnding"),g):n(F):Sn(F)?Pn(t,u,"whitespace")(F):(s+=1,o&&(o=!1,i+=1),F===124?(t.enter("tableCellDivider"),t.consume(F),t.exit("tableCellDivider"),o=!0,u):(t.enter("data"),f(F)))}function f(F){return F===null||F===124||lr(F)?(t.exit("data"),u(F)):(t.consume(F),F===92?m:f)}function m(F){return F===92||F===124?(t.consume(F),f):f(F)}function g(F){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(F):(t.enter("tableDelimiterRow"),o=!1,Sn(F)?Pn(t,v,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(F):v(F))}function v(F){return F===45||F===58?b(F):F===124?(o=!0,t.enter("tableCellDivider"),t.consume(F),t.exit("tableCellDivider"),x):U(F)}function x(F){return Sn(F)?Pn(t,b,"whitespace")(F):b(F)}function b(F){return F===58?(s+=1,o=!0,t.enter("tableDelimiterMarker"),t.consume(F),t.exit("tableDelimiterMarker"),E):F===45?(s+=1,E(F)):F===null||Gt(F)?O(F):U(F)}function E(F){return F===45?(t.enter("tableDelimiterFiller"),C(F)):U(F)}function C(F){return F===45?(t.consume(F),C):F===58?(o=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(F),t.exit("tableDelimiterMarker"),k):(t.exit("tableDelimiterFiller"),k(F))}function k(F){return Sn(F)?Pn(t,O,"whitespace")(F):O(F)}function O(F){return F===124?v(F):F===null||Gt(F)?!o||i!==s?U(F):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(F)):U(F)}function U(F){return n(F)}function R(F){return t.enter("tableRow"),$(F)}function $(F){return F===124?(t.enter("tableCellDivider"),t.consume(F),t.exit("tableCellDivider"),$):F===null||Gt(F)?(t.exit("tableRow"),e(F)):Sn(F)?Pn(t,$,"whitespace")(F):(t.enter("data"),V(F))}function V(F){return F===null||F===124||lr(F)?(t.exit("data"),$(F)):(t.consume(F),F===92?j:V)}function j(F){return F===92||F===124?(t.consume(F),V):V(F)}}function eZe(t,e){let n=-1,r=!0,i=0,s=[0,0,0,0],o=[0,0,0,0],a=!1,l=0,c,u,f;const m=new YQe;for(;++n<t.length;){const g=t[n],v=g[1];g[0]==="enter"?v.type==="tableHead"?(a=!1,l!==0&&(ZJ(m,e,l,c,u),u=void 0,l=0),c={type:"table",start:Object.assign({},v.start),end:Object.assign({},v.end)},m.add(n,0,[["enter",c,e]])):v.type==="tableRow"||v.type==="tableDelimiterRow"?(r=!0,f=void 0,s=[0,0,0,0],o=[0,n+1,0,0],a&&(a=!1,u={type:"tableBody",start:Object.assign({},v.start),end:Object.assign({},v.end)},m.add(n,0,[["enter",u,e]])),i=v.type==="tableDelimiterRow"?2:u?3:1):i&&(v.type==="data"||v.type==="tableDelimiterMarker"||v.type==="tableDelimiterFiller")?(r=!1,o[2]===0&&(s[1]!==0&&(o[0]=o[1],f=CA(m,e,s,i,void 0,f),s=[0,0,0,0]),o[2]=n)):v.type==="tableCellDivider"&&(r?r=!1:(s[1]!==0&&(o[0]=o[1],f=CA(m,e,s,i,void 0,f)),s=o,o=[s[1],n,0,0])):v.type==="tableHead"?(a=!0,l=n):v.type==="tableRow"||v.type==="tableDelimiterRow"?(l=n,s[1]!==0?(o[0]=o[1],f=CA(m,e,s,i,n,f)):o[1]!==0&&(f=CA(m,e,o,i,n,f)),i=0):i&&(v.type==="data"||v.type==="tableDelimiterMarker"||v.type==="tableDelimiterFiller")&&(o[3]=n)}for(l!==0&&ZJ(m,e,l,c,u),m.consume(e.events),n=-1;++n<e.events.length;){const g=e.events[n];g[0]==="enter"&&g[1].type==="table"&&(g[1]._align=XQe(e.events,n))}return t}function CA(t,e,n,r,i,s){const o=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",a="tableContent";n[0]!==0&&(s.end=Object.assign({},pg(e.events,n[0])),t.add(n[0],0,[["exit",s,e]]));const l=pg(e.events,n[1]);if(s={type:o,start:Object.assign({},l),end:Object.assign({},l)},t.add(n[1],0,[["enter",s,e]]),n[2]!==0){const c=pg(e.events,n[2]),u=pg(e.events,n[3]),f={type:a,start:Object.assign({},c),end:Object.assign({},u)};if(t.add(n[2],0,[["enter",f,e]]),r!==2){const m=e.events[n[2]],g=e.events[n[3]];if(m[1].end=Object.assign({},g[1].end),m[1].type="chunkText",m[1].contentType="text",n[3]>n[2]+1){const v=n[2]+1,x=n[3]-n[2]-1;t.add(v,x,[])}}t.add(n[3]+1,0,[["exit",f,e]])}return i!==void 0&&(s.end=Object.assign({},pg(e.events,i)),t.add(i,0,[["exit",s,e]]),s=void 0),s}function ZJ(t,e,n,r,i){const s=[],o=pg(e.events,n);i&&(i.end=Object.assign({},o),s.push(["exit",i,e])),r.end=Object.assign({},o),s.push(["exit",r,e]),t.add(n+1,0,s)}function pg(t,e){const n=t[e],r=n[0]==="enter"?"start":"end";return n[1][r]}const tZe={name:"tasklistCheck",tokenize:rZe};function nZe(){return{text:{91:tZe}}}function rZe(t,e,n){const r=this;return i;function i(l){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(l):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),s)}function s(l){return lr(l)?(t.enter("taskListCheckValueUnchecked"),t.consume(l),t.exit("taskListCheckValueUnchecked"),o):l===88||l===120?(t.enter("taskListCheckValueChecked"),t.consume(l),t.exit("taskListCheckValueChecked"),o):n(l)}function o(l){return l===93?(t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),a):n(l)}function a(l){return Gt(l)?e(l):Sn(l)?t.check({tokenize:iZe},e,n)(l):n(l)}}function iZe(t,e,n){return Pn(t,r,"whitespace");function r(i){return i===null?n(i):e(i)}}function sZe(t){return zde([IQe(),FQe(),WQe(t),QQe(),nZe()])}const oZe={};function aZe(t){const e=this,n=t||oZe,r=e.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),s=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),o=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(sZe(n)),s.push(kQe()),o.push(CQe(n))}const Fs=T.forwardRef(({className:t,...e},n)=>h.jsx("div",{ref:n,className:jt("rounded border border-[#232328] bg-[#14151a] text-card-foreground shadow-sm",t),...e}));Fs.displayName="Card";const ID=T.forwardRef(({className:t,...e},n)=>h.jsx("div",{ref:n,className:jt("flex flex-col space-y-1.5 p-6",t),...e}));ID.displayName="CardHeader";const PD=T.forwardRef(({className:t,...e},n)=>h.jsx("div",{ref:n,className:jt("font-semibold leading-none tracking-tight text-white",t),...e}));PD.displayName="CardTitle";const RD=T.forwardRef(({className:t,...e},n)=>h.jsx("div",{ref:n,className:jt("text-sm text-muted-foreground",t),...e}));RD.displayName="CardDescription";const vu=T.forwardRef(({className:t,...e},n)=>h.jsx("div",{ref:n,className:jt("p-6 pt-0",t),...e}));vu.displayName="CardContent";const lZe=T.forwardRef(({className:t,...e},n)=>h.jsx("div",{ref:n,className:jt("flex items-center p-6 pt-0",t),...e}));lZe.displayName="CardFooter";const cZe=({messages:t})=>{const e=T.useRef(null),n=T.useMemo(()=>{const r=[];return t.forEach(i=>{i.role==="model"&&i.toolResults&&i.toolResults.length>0&&i.toolResults.forEach(s=>{if(s.type==="error")return;const o=s.title||"",a=s.details||"";if(o.includes("Swap")||o.includes("Order")||o.includes("Transfer")||o.includes("Withdraw")||o.includes("Position")||o.includes("Leverage")){let l="info";o.includes("Swap")?l="swap":o.includes("Order")||o.includes("Position")||o.includes("Leverage")?l="order":(o.includes("Transfer")||o.includes("Withdraw"))&&(l="transfer"),r.push({type:l,title:o,details:a.split(`
`)[0]||a,subDetails:s.tx?"Transaction Executed":void 0,timestamp:i.timestamp,tx:s.tx})}else o.includes("Task")||o.includes("Scheduled")?r.push({type:"info",title:o,details:a,timestamp:i.timestamp}):o.includes("Price")||o.includes("OHLCV")||o.includes("Indicator")||o.includes("TradingView")||o.includes("Summary")||o.includes("Market Data")?r.push({type:"price",title:o,details:a,timestamp:i.timestamp}):o.includes("Balance")?r.push({type:"balance",title:"Balance Checked",details:a.split(`
`)[0],subDetails:"View specific assets in chat",timestamp:i.timestamp}):r.push({type:"info",title:o,details:a.substring(0,100)+(a.length>100?"...":""),timestamp:i.timestamp})})}),r},[t]);return T.useEffect(()=>{e.current&&e.current.scrollTo({top:e.current.scrollHeight,behavior:"smooth"})},[n.length]),n.length===0?null:h.jsxs("div",{ref:e,className:"w-full h-full overflow-y-auto pr-1 custom-scrollbar space-y-3 pb-4",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-2 px-1 sticky top-0 bg-slate-900/90 backdrop-blur-sm py-2 z-10",children:[h.jsx(yo,{size:12,className:"text-indigo-400"}),h.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider text-slate-500",children:"Activity Feed"})]}),h.jsx(go,{children:n.map((r,i)=>{var l;const s=r.tx,o=r.title.includes("Hyperliquid")||r.title.includes("Order"),a=s?o?`https://app.hyperliquid.xyz/explorer/tx/${s}`:`https://solscan.io/tx/${s}`:null;return h.jsx(Ht.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:i*.05},children:h.jsxs(Fs,{className:"p-3 relative overflow-hidden group hover:border-indigo-500/30 transition-all duration-300",children:[h.jsx("div",{className:"absolute top-0 right-0 w-12 h-12 bg-indigo-500/5 rounded-full blur-xl -z-10 transition-all duration-700 group-hover:bg-indigo-500/10"}),h.jsx("div",{className:"flex items-center justify-between mb-1.5",children:h.jsxs("div",{className:"flex items-center gap-1.5",children:[h.jsx("div",{className:jt("w-1 h-1 rounded-full",r.type==="error"?"bg-red-500":"bg-indigo-500")}),h.jsx("span",{className:"text-[9px] text-slate-600 font-mono",children:new Date(r.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})}),h.jsxs("div",{className:"space-y-1",children:[h.jsx("h3",{className:"text-xs font-bold text-white leading-tight",children:r.title}),h.jsx("div",{className:"py-1",children:r.type==="swap"?h.jsx("div",{className:"bg-slate-800/50 rounded-lg p-2 border border-slate-700/50",children:h.jsx("p",{className:"text-[10px] text-slate-300 font-medium",children:r.details})}):r.type==="price"&&r.details.includes(":")&&!r.details.includes(`
`)?h.jsxs("div",{className:"flex flex-col gap-0.5",children:[h.jsx("div",{className:"text-lg font-bold text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-teal-300",children:(l=r.details.split(":")[1])==null?void 0:l.trim()}),h.jsx("div",{className:"text-[10px] text-slate-400 font-medium",children:r.details.split(":")[0]})]}):h.jsx("p",{className:"text-[10px] text-slate-300 font-medium",children:r.details})}),h.jsxs("div",{className:"flex items-center justify-between mt-1 pt-1 border-t border-slate-800/50",children:[r.subDetails&&!s&&h.jsx("div",{className:"flex items-center gap-1.5 text-[10px] text-emerald-400 font-medium",children:r.subDetails}),s&&h.jsxs("a",{href:a||"#",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1.5 text-[10px] text-indigo-400 hover:text-indigo-300 transition-colors group/link ml-auto",children:["View Transaction",h.jsx(Ene,{size:10,className:"group-hover/link:translate-x-0.5 group-hover/link:-translate-y-0.5 transition-transform"})]})]})]})]})},`${r.timestamp}-${i}`)})})]})};var uZe=Symbol.for("react.lazy"),cC=KC[" use ".trim().toString()];function dZe(t){return typeof t=="object"&&t!==null&&"then"in t}function Rfe(t){return t!=null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===uZe&&"_payload"in t&&dZe(t._payload)}function fZe(t){const e=pZe(t),n=T.forwardRef((r,i)=>{let{children:s,...o}=r;Rfe(s)&&typeof cC=="function"&&(s=cC(s._payload));const a=T.Children.toArray(s),l=a.find(gZe);if(l){const c=l.props.children,u=a.map(f=>f===l?T.Children.count(c)>1?T.Children.only(null):T.isValidElement(c)?c.props.children:null:f);return h.jsx(e,{...o,ref:i,children:T.isValidElement(c)?T.cloneElement(c,void 0,u):null})}return h.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}var hZe=fZe("Slot");function pZe(t){const e=T.forwardRef((n,r)=>{let{children:i,...s}=n;if(Rfe(i)&&typeof cC=="function"&&(i=cC(i._payload)),T.isValidElement(i)){const o=xZe(i),a=yZe(s,i.props);return i.type!==T.Fragment&&(a.ref=r?Fx(r,o):o),T.cloneElement(i,a)}return T.Children.count(i)>1?T.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var mZe=Symbol("radix.slottable");function gZe(t){return T.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===mZe}function yZe(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const l=s(...a);return i(...a),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function xZe(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}const eX=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,tX=Rn,Ofe=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return tX(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(c=>{const u=n==null?void 0:n[c],f=s==null?void 0:s[c];if(u===null)return null;const m=eX(u)||eX(f);return i[c][m]}),a=n&&Object.entries(n).reduce((c,u)=>{let[f,m]=u;return m===void 0||(c[f]=m),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:f,className:m,...g}=u;return Object.entries(g).every(v=>{let[x,b]=v;return Array.isArray(b)?b.includes({...s,...a}[x]):{...s,...a}[x]===b})?[...c,f,m]:c},[]);return tX(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)},vZe=Ofe("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-medium transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-slate-700 bg-transparent hover:bg-slate-800 hover:text-slate-100",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-slate-800 hover:text-slate-100",link:"text-primary underline-offset-4 hover:underline",success:"bg-emerald-600 text-white shadow hover:bg-emerald-700"},size:{default:"h-10 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-12 rounded-lg px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Fi=T.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},s)=>{const o=r?hZe:"button";return h.jsx(o,{className:jt(vZe({variant:e,size:n,className:t})),ref:s,...i})});Fi.displayName="Button";const wx=T.forwardRef(({className:t,type:e,...n},r)=>h.jsx("input",{type:e,className:jt("flex h-10 w-full rounded-lg border border-slate-700 bg-slate-800/50 px-3 py-2 text-sm text-white placeholder:text-slate-500 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-slate-500/50 focus-visible:border-slate-500/50 disabled:cursor-not-allowed disabled:opacity-50 transition-colors",t),ref:r,...n}));wx.displayName="Input";const bZe=({messages:t,inputMessage:e,setInputMessage:n,handleSendMessage:r,isAiProcessing:i,aiStatus:s,scrollRef:o,isVaultUnlocked:a,password:l,setPassword:c,unlockVault:u,hasVault:f,onNavigate:m})=>{const g=T.useRef(null),v=T.useMemo(()=>t.some(x=>x.role==="model"&&x.toolResults&&x.toolResults.length>0&&x.toolResults.some(b=>b.type!=="error")),[t]);return T.useEffect(()=>{!i&&a&&g.current&&g.current.focus()},[i,a]),T.useEffect(()=>{o.current&&(o.current.scrollTop=o.current.scrollHeight)},[t,o]),!a&&f?h.jsx(Ht.div,{className:"flex flex-col h-[calc(100vh-8rem)] items-center justify-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:h.jsxs("div",{className:"max-w-md w-full mx-auto space-y-6 p-8",children:[h.jsxs("div",{className:"text-center",children:[h.jsx(Ht.div,{className:"w-16 h-16 bg-[#1a1b21] rounded-full flex items-center justify-center mx-auto mb-4 border border-[#232328]",animate:{scale:[1,1.05,1]},transition:{duration:2,repeat:1/0},children:h.jsx(lm,{size:32,className:"text-[#E7FE55]"})}),h.jsx("h2",{className:"text-xl font-semibold text-white tracking-tight",children:"Unlock Vault Operator"}),h.jsx("p",{className:"text-[#747580] mt-2 text-sm",children:"Enter your password to start using Vault Operator."})]}),h.jsxs(Fs,{className:"p-6 space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-[10px] font-semibold text-[#747580] uppercase tracking-[0.1em] mb-2",children:"Password"}),h.jsx(wx,{type:"password",value:l,onChange:x=>c(x.target.value),placeholder:"Enter password...",onKeyDown:x=>x.key==="Enter"&&u(),className:"focus-visible:ring-[#E7FE55]/20 focus-visible:border-[#E7FE55]/30",autoFocus:!0})]}),h.jsxs(Fi,{onClick:u,className:"w-full",size:"lg",children:[h.jsx(Tne,{size:18})," Unlock Vault Operator"]})]}),h.jsx("p",{className:"text-center text-[11px] text-[#747580]",children:"This is the same password used to unlock your Vault."})]})}):f?h.jsxs("div",{className:"flex h-[calc(100vh-9rem)] gap-6",children:[h.jsxs("div",{className:jt("flex-1 flex flex-col bg-transparent rounded overflow-hidden relative min-w-0",v&&"lg:pr-2"),children:[h.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 space-y-6",ref:o,children:[h.jsxs(go,{children:[t.length===0&&h.jsxs(Ht.div,{className:"flex flex-col items-center justify-center h-full text-[#747580] opacity-60",initial:{opacity:0},animate:{opacity:.6},children:[h.jsx(Sg,{size:48,className:"mb-4 text-[#E7FE55]"}),h.jsx("p",{className:"text-sm font-semibold text-white",children:"Vault Operator Ready"}),h.jsx("p",{className:"text-[11px] text-[#747580]",children:"Ask me to check balances, swap tokens, or schedule automations."})]}),t.map((x,b)=>h.jsx(Ht.div,{className:jt("flex",x.role==="user"?"justify-end":"justify-start"),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:b*.05},children:h.jsxs("div",{className:jt("flex gap-4",v?"max-w-[85%]":"max-w-[90%]",x.role==="user"?"flex-row-reverse":"flex-row"),children:[h.jsx("div",{className:jt("w-9 h-9 rounded-full flex items-center justify-center flex-shrink-0 border",x.role==="user"?"bg-[#9b87f5]/10 border-[#9b87f5]/20":"bg-[#E7FE55]/10 border-[#E7FE55]/20"),children:x.role==="user"?h.jsx(fke,{size:18,className:"text-[#9b87f5]"}):h.jsx(Sg,{size:18,className:"text-[#E7FE55]"})}),h.jsxs("div",{className:jt("flex flex-col",x.role==="user"?"items-end":"items-start"),children:[h.jsxs("div",{className:jt("px-4 py-3 rounded-lg bg-[#1a1b21] text-[#e4e5e9] border border-[#232328]",x.role==="user"?"rounded-tr-sm":"rounded-tl-sm"),children:[x.toolResults&&x.toolResults.length>0&&h.jsx("div",{className:"mb-4 space-y-3 w-full",children:x.toolResults.map((E,C)=>h.jsxs("div",{className:jt("text-[11px] p-3 rounded border",E.type==="success"?"bg-[#34d399]/10 border-[#34d399]/30 text-[#34d399]":E.type==="error"?"bg-red-500/10 border-red-500/30 text-red-400":"bg-[#60a5fa]/10 border-[#60a5fa]/30 text-[#60a5fa]"),children:[h.jsxs("div",{className:"flex items-center gap-2 font-bold mb-1",children:[E.type==="success"?h.jsx(w4,{size:14}):E.type==="error"?h.jsx(_l,{size:14}):h.jsx(NTe,{size:14}),E.title]}),h.jsx("div",{className:"whitespace-pre-wrap font-mono opacity-90",children:E.details}),E.tx&&h.jsxs("div",{className:"mt-2 pt-2 border-t border-white/10 text-[10px] font-mono opacity-70 truncate",children:["TX: ",E.tx]})]},C))}),h.jsx("div",{className:"prose prose-invert prose-sm max-w-none",children:h.jsx(WJe,{remarkPlugins:[aZe],components:{a:({href:E,children:C})=>{if(E!=null&&E.startsWith("nav://")){const k=E.replace("nav://",""),U={DEALER_CONFIG:Ce.DEALER_CONFIG,DEALER_DASHBOARD:Ce.DEALER_DASHBOARD,DEALER_THINKING:Ce.DEALER_THINKING,VAULT_DEALER:Ce.VAULT_DEALER,DASHBOARD:Ce.DASHBOARD,VAULT:Ce.VAULT,SCHEDULER:Ce.SCHEDULER}[k];return U&&m?h.jsxs(Fi,{onClick:R=>{R.preventDefault(),R.stopPropagation(),m(U)},className:"mt-3 inline-flex",children:[h.jsx(HT,{size:16}),h.jsx("span",{children:C}),h.jsx(wne,{size:14})]}):h.jsx("span",{className:"text-indigo-400",children:C})}return h.jsx("a",{href:E,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-400 hover:text-indigo-300 underline",children:C})},pre:({children:E})=>h.jsx("pre",{className:"overflow-x-auto overflow-y-auto max-h-[400px] custom-scrollbar bg-[#0f1015] rounded border border-[#232328] p-4 my-4",children:E}),code:({node:E,inline:C,className:k,children:O,...U})=>C?h.jsx("code",{className:"bg-[#1a1b21] px-1.5 py-0.5 rounded text-sm text-[#E7FE55] font-mono border border-[#232328]",...U,children:O}):h.jsx("code",{className:`${k} text-sm`,...U,children:O})},children:x.content})})]}),h.jsx("span",{className:"text-[10px] text-[#747580] mt-1.5 px-1",children:new Date(x.timestamp).toLocaleTimeString()})]})]})},x.id))]}),h.jsx(go,{children:i&&h.jsx(Ht.div,{className:"flex justify-start",initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0},children:h.jsxs("div",{className:"flex gap-4 max-w-[80%]",children:[h.jsx(Ht.div,{className:"w-9 h-9 rounded-full bg-[#E7FE55]/10 border border-[#E7FE55]/20 flex items-center justify-center flex-shrink-0",animate:{scale:[1,1.1,1]},transition:{duration:1,repeat:1/0},children:h.jsx(Sg,{size:18,className:"text-[#E7FE55]"})}),h.jsxs("div",{className:"bg-[#1a1b21] px-4 py-3 rounded-lg rounded-tl-sm border border-[#232328] flex items-center gap-3",children:[h.jsxs("div",{className:"flex space-x-1",children:[h.jsx(Ht.div,{className:"w-1.5 h-1.5 bg-[#E7FE55] rounded-full",animate:{y:[0,-6,0]},transition:{duration:.5,repeat:1/0,delay:0}}),h.jsx(Ht.div,{className:"w-1.5 h-1.5 bg-[#E7FE55] rounded-full",animate:{y:[0,-6,0]},transition:{duration:.5,repeat:1/0,delay:.15}}),h.jsx(Ht.div,{className:"w-1.5 h-1.5 bg-[#E7FE55] rounded-full",animate:{y:[0,-6,0]},transition:{duration:.5,repeat:1/0,delay:.3}})]}),h.jsx("span",{className:"text-[11px] text-[#E7FE55] font-medium",children:s})]})]})})})]}),h.jsxs("div",{className:"p-4 bg-transparent z-10 box-border",children:[h.jsxs("div",{className:"relative",children:[h.jsx(wx,{ref:g,type:"text",value:e,onChange:x=>n(x.target.value),onKeyDown:x=>x.key==="Enter"&&!i&&a&&r(),placeholder:"Ask Vault Operator to swap tokens, check prices, or schedule a task...",className:"pl-5 pr-14 py-5 text-sm bg-[#1a1b21] border-[#232328] focus-visible:ring-1 focus-visible:ring-[#E7FE55]/20 focus-visible:border-[#E7FE55]/30 placeholder:text-[#747580]",disabled:i}),h.jsx(Fi,{onClick:r,disabled:!e.trim()||i,size:"icon",className:"absolute right-2 top-2 bottom-2 h-auto bg-[#E7FE55] hover:bg-[#f0ff7a] text-black",children:i?h.jsx(Rs,{size:18,className:"animate-spin"}):h.jsx(XTe,{size:18})})]}),h.jsx("p",{className:"text-center mt-3 text-[10px] text-[#747580] tracking-wide",children:"Vault Operator can make mistakes. Always verify transactions."})]})]}),h.jsx(go,{children:v&&h.jsx(Ht.div,{className:"hidden lg:block w-64 xl:w-72 h-full flex-shrink-0",initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:50},children:h.jsx(cZe,{messages:t})})})]}):h.jsx(Ht.div,{className:"flex flex-col h-[calc(100vh-8rem)] items-center justify-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:h.jsxs("div",{className:"max-w-md w-full mx-auto space-y-6 p-8 text-center",children:[h.jsx("div",{className:"w-16 h-16 bg-[#1a1b21] rounded-full flex items-center justify-center mx-auto mb-4 border border-[#232328]",children:h.jsx(Sg,{size:32,className:"text-[#747580]"})}),h.jsx("h2",{className:"text-xl font-semibold text-white tracking-tight",children:"Create a Vault First"}),h.jsxs("p",{className:"text-[#747580] text-sm",children:["You need to create a vault before using Vault Operator. Go to the ",h.jsx("span",{className:"text-[#E7FE55]",children:"Vault"})," page to set up your wallets."]})]})})},wZe=Ofe("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-red-500/20 text-red-400 border-red-500/30",outline:"text-foreground border-slate-600",success:"border-transparent bg-emerald-500/20 text-emerald-400 border-emerald-500/30",warning:"border-transparent bg-yellow-500/20 text-yellow-400 border-yellow-500/30",info:"border-transparent bg-blue-500/20 text-blue-400 border-blue-500/30",purple:"border-transparent bg-purple-500/20 text-purple-400 border-purple-500/30"}},defaultVariants:{variant:"default"}});function Ml({className:t,variant:e,...n}){return h.jsx("div",{className:jt(wZe({variant:e}),t),...n})}const EZe=({scheduledTasks:t,setScheduledTasks:e,addNotification:n})=>{const r=t.filter(a=>a.status==="active"||a.status==="executing"),i=t.filter(a=>a.status==="completed"||a.status==="failed").sort((a,l)=>(l.lastExecuted||0)-(a.lastExecuted||0)),s=()=>{window.confirm("Clear all task history?")&&(e(a=>{const l=a.filter(c=>c.status==="active"||c.status==="executing");return Ae.setItem(Ae.getUserKey("agent_scheduled_tasks"),JSON.stringify(l)),l}),n("Task history cleared"))},o=a=>{window.confirm("Cancel this task?")&&(e(l=>{const c=l.map(u=>u.id===a?{...u,status:"failed",result:"Cancelled by user"}:u);return Ae.setItem(Ae.getUserKey("agent_scheduled_tasks"),JSON.stringify(c)),c}),n(`Task #${a.slice(-4)} cancelled`))};return h.jsx(Ht.div,{className:"space-y-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[h.jsxs("div",{className:"space-y-4",children:[h.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[h.jsx(Rs,{size:20,className:"text-emerald-400"})," Active Tasks"]}),h.jsx(go,{children:r.length===0?h.jsx(Ht.div,{initial:{opacity:0},animate:{opacity:1},children:h.jsxs(Fs,{className:"p-8 text-center border-dashed border-2 border-slate-800",children:[h.jsx(t8,{size:48,className:"mx-auto text-slate-700 mb-4"}),h.jsx("p",{className:"text-slate-500",children:"No active tasks."}),h.jsx("p",{className:"text-xs text-slate-600 mt-2",children:'Ask the AI to "schedule a swap in 10 mins" or "alert me when BTC > 100k"'})]})}):r.map((a,l)=>{const c=JSON.parse(a.params||"{}");let u=0,f=0,m=0;if(a.type==="HL_ORDER"&&c.price&&c.size){const{price:g,size:v,leverage:x=1,side:b,takeProfit:E,stopLoss:C}=c,k=b==="B";E&&(u=(k?E-g:g-E)*v),C&&(f=(k?g-C:C-g)*v);const O=1/x-.005;m=k?g*(1-O):g*(1+O)}return h.jsx(Ht.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{delay:l*.1},children:h.jsxs(Fs,{className:"p-5 border-l-4 border-l-emerald-500 relative overflow-hidden",children:[a.status==="executing"&&h.jsx("div",{className:"absolute top-2 right-2",children:h.jsxs("span",{className:"relative flex h-3 w-3",children:[h.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"}),h.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-emerald-500"})]})}),h.jsxs("div",{className:"flex justify-between items-start mb-3",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Ml,{variant:a.type==="SWAP"||a.type==="TRANSFER"?"info":a.type==="HL_ORDER"?"purple":a.type==="ALERT"?"warning":"secondary",children:a.type}),h.jsxs("span",{className:"text-xs font-mono text-slate-500",children:["#",a.id.slice(-4)]})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs("span",{className:"text-xs text-slate-400",children:["Created: ",new Date(a.createdAt).toLocaleTimeString()]}),a.status!=="executing"&&h.jsxs(Fi,{variant:"ghost",size:"sm",onClick:()=>o(a.id),className:"text-red-400 hover:text-red-300 hover:bg-red-900/20",children:[h.jsx(cm,{size:12})," Cancel"]})]})]}),h.jsxs("div",{className:"mb-3 space-y-2",children:[a.type==="SWAP"&&h.jsxs("div",{className:"bg-slate-950/50 p-3 rounded-lg border border-slate-800",children:[h.jsx("div",{className:"text-xs text-slate-500 mb-1 font-bold uppercase",children:"Swap Details"}),h.jsxs("div",{className:"text-sm text-white font-medium",children:[c.amount," ",c.inputToken,"  ",c.outputToken]})]}),a.type==="HL_ORDER"&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"bg-slate-950/50 p-3 rounded-lg border border-purple-900/30 space-y-2",children:[h.jsx("div",{className:"text-xs text-slate-500 mb-2 font-bold uppercase",children:"Hyperliquid Order"}),h.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[h.jsxs("div",{children:[h.jsx("span",{className:"text-slate-500",children:"Asset:"}),h.jsx("span",{className:"ml-2 text-white font-bold",children:c.coin})]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-slate-500",children:"Direction:"}),h.jsx("span",{className:jt("ml-2 font-bold",c.side==="B"?"text-emerald-400":"text-red-400"),children:c.side==="B"?"LONG":"SHORT"})]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-slate-500",children:"Size:"}),h.jsx("span",{className:"ml-2 text-white font-medium",children:c.size})]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-slate-500",children:"Type:"}),h.jsx("span",{className:"ml-2 text-white font-medium uppercase",children:c.orderType})]}),c.price&&h.jsxs("div",{children:[h.jsx("span",{className:"text-slate-500",children:"Price:"}),h.jsxs("span",{className:"ml-2 text-white font-medium",children:["$",c.price.toLocaleString()]})]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-slate-500",children:"Leverage:"}),h.jsxs("span",{className:"ml-2 text-yellow-400 font-bold",children:[c.leverage,"x"]})]})]}),(c.stopLoss||c.takeProfit)&&h.jsxs("div",{className:"pt-2 border-t border-slate-800 grid grid-cols-2 gap-2 text-xs",children:[c.stopLoss&&h.jsxs("div",{children:[h.jsx("span",{className:"text-slate-500",children:"Stop Loss:"}),h.jsxs("span",{className:"ml-2 text-red-400 font-medium",children:["$",c.stopLoss.toLocaleString()]})]}),c.takeProfit&&h.jsxs("div",{children:[h.jsx("span",{className:"text-slate-500",children:"Take Profit:"}),h.jsxs("span",{className:"ml-2 text-emerald-400 font-medium",children:["$",c.takeProfit.toLocaleString()]})]})]})]}),c.price&&h.jsxs("div",{className:"bg-gradient-to-br from-slate-950/80 to-purple-950/20 p-3 rounded-lg border border-purple-900/40 space-y-2",children:[h.jsxs("div",{className:"text-xs text-purple-300 mb-2 font-bold uppercase flex items-center gap-2",children:[h.jsx(In,{size:12})," Risk Analysis"]}),h.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[c.takeProfit&&h.jsxs("div",{className:"bg-emerald-900/20 p-2 rounded border border-emerald-800/30",children:[h.jsx("div",{className:"text-emerald-500 text-[10px] mb-1",children:"MAX PROFIT"}),h.jsxs("div",{className:"text-emerald-400 font-bold",children:["$",u.toFixed(2)]})]}),c.stopLoss&&h.jsxs("div",{className:"bg-red-900/20 p-2 rounded border border-red-800/30",children:[h.jsx("div",{className:"text-red-500 text-[10px] mb-1",children:"MAX LOSS"}),h.jsxs("div",{className:"text-red-400 font-bold",children:["-$",f.toFixed(2)]})]}),h.jsxs("div",{className:"bg-orange-900/20 p-2 rounded border border-orange-800/30",children:[h.jsx("div",{className:"text-orange-500 text-[10px] mb-1",children:"LIQUIDATION"}),h.jsxs("div",{className:"text-orange-400 font-bold",children:["$",m.toFixed(2)]})]})]})]})]})]}),h.jsxs("div",{className:"bg-slate-950/50 p-3 rounded-lg border border-slate-800 text-xs",children:[h.jsx("div",{className:"flex items-center gap-2 mb-2 text-slate-500 font-bold uppercase tracking-wider",children:"Trigger Condition"}),a.condition?h.jsx("div",{className:"space-y-1",children:h.jsxs("div",{className:"flex items-center gap-2 text-yellow-400 font-medium",children:[h.jsx(In,{size:14}),a.condition.indicator.toUpperCase()," (",a.condition.symbol,") ",a.condition.operator," ",a.condition.value]})}):h.jsxs("div",{className:"flex items-center gap-2 text-emerald-400",children:[h.jsx(Rs,{size:14}),"Time: ",new Date(a.executeAt).toLocaleString()]})]})]})},a.id)})})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[h.jsx(w4,{size:20,className:"text-slate-400"})," History"]}),h.jsxs(Fi,{variant:"ghost",size:"sm",onClick:s,className:"text-slate-500 hover:text-white",children:[h.jsx(cm,{size:14})," Clear History"]})]}),h.jsx("div",{className:"space-y-3 max-h-[500px] overflow-y-auto custom-scrollbar pr-2",children:i.length===0?h.jsx("div",{className:"text-center py-8 text-slate-600 text-sm",children:"No history available."}):i.map((a,l)=>h.jsx(Ht.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:l*.05},children:h.jsxs(Fs,{className:jt("p-4",a.status==="completed"?"opacity-70 hover:opacity-100 transition-opacity":"border-red-900/30 bg-red-900/10"),children:[h.jsxs("div",{className:"flex justify-between items-center mb-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[a.status==="completed"?h.jsx(w4,{size:16,className:"text-emerald-500"}):h.jsx(_l,{size:16,className:"text-red-500"}),h.jsx(Ml,{variant:a.status==="completed"?"success":"destructive",children:a.status.toUpperCase()})]}),h.jsx("span",{className:"text-xs text-slate-500",children:a.lastExecuted?new Date(a.lastExecuted).toLocaleString():"Unknown"})]}),h.jsxs("div",{className:"text-xs text-slate-300 mb-2",children:[a.type," - ",a.condition?"Condition":"Time"," Trigger"]}),h.jsx("div",{className:"bg-black/30 p-2 rounded text-[10px] font-mono text-slate-400 break-all",children:a.result})]})},a.id))})]})]})})},SZe=5,AZe="dealer_cycle_summary",Tb={recentCycles:[],aiSummary:null,lastSummaryTime:0,isGenerating:!1};class TZe{constructor(){this.state=new Map,this.listeners=new Map,this.initialized=new Map,this.state.set("hyperliquid",{...Tb}),this.state.set("polymarket",{...Tb}),this.listeners.set("hyperliquid",new Set),this.listeners.set("polymarket",new Set),this.initialized.set("hyperliquid",!1),this.initialized.set("polymarket",!1)}getStorageKey(e){return Ae.getUserKey(`${AZe}_${e}`)}async loadState(e){var n;if(!this.initialized.get(e)){try{const r=this.getStorageKey(e),i=await Ae.getItem(r);if(i){const s=JSON.parse(i);this.state.set(e,{...Tb,...s,isGenerating:!1}),console.log(`[CycleSummaryStore] Loaded ${e} state: ${((n=s.recentCycles)==null?void 0:n.length)||0} cycles`)}}catch(r){console.warn(`[CycleSummaryStore] Failed to load ${e} state:`,r)}this.initialized.set(e,!0)}}async saveState(e){try{const n=this.getStorageKey(e),r=this.state.get(e);if(r){const{isGenerating:i,...s}=r;await Ae.setItem(n,JSON.stringify(s))}}catch(n){console.warn(`[CycleSummaryStore] Failed to save ${e} state:`,n)}}getSnapshot(e){return this.state.get(e)||{...Tb}}subscribe(e,n){const r=this.listeners.get(e);return r&&r.add(n),()=>{r==null||r.delete(n)}}notify(e){const n=this.listeners.get(e);n==null||n.forEach(r=>r())}recordCycle(e,n){const r=this.state.get(e);if(!r)return;const i=r.recentCycles.length+1,o=[{...n,cycleNumber:i},...r.recentCycles].slice(0,SZe);this.state.set(e,{...r,recentCycles:o}),this.notify(e),this.saveState(e),console.log(`[CycleSummaryStore] Recorded ${e} cycle #${i}: ${n.decisions.length} decisions`)}setGenerating(e,n){const r=this.state.get(e);r&&(this.state.set(e,{...r,isGenerating:n}),this.notify(e))}setSummary(e,n){const r=this.state.get(e);r&&(this.state.set(e,{...r,aiSummary:n,lastSummaryTime:Date.now(),isGenerating:!1}),this.notify(e),this.saveState(e),console.log(`[CycleSummaryStore] Updated ${e} AI summary (${n.length} chars)`))}clear(e){this.state.set(e,{...Tb}),this.notify(e),this.saveState(e)}getContextForAI(e){const n=this.state.get(e);return!n||!n.aiSummary?null:n.aiSummary}getCyclesForSummary(e){const n=this.state.get(e);return(n==null?void 0:n.recentCycles)||[]}}const ed=new TZe;let nX=class{constructor(e,n,r){this.next=r,r&&(r.prev=this),this.prev=n,n&&(n.next=this),this.data=e}};class Mfe{constructor(){this._length=0}get head(){return this._head&&this._head.data}get tail(){return this._tail&&this._tail.data}get current(){return this._current&&this._current.data}get length(){return this._length}push(e){this._tail=new nX(e,this._tail),this._length===0&&(this._head=this._tail,this._current=this._head,this._next=this._head),this._length++}pop(){var e=this._tail;if(this._length!==0)return this._length--,this._length===0?(this._head=this._tail=this._current=this._next=void 0,e.data):(this._tail=e.prev,this._tail.next=void 0,this._current===e&&(this._current=this._tail,this._next=void 0),e.data)}shift(){var e=this._head;if(this._length!==0)return this._length--,this._length===0?(this._head=this._tail=this._current=this._next=void 0,e.data):(this._head=this._head.next,this._current===e&&(this._current=this._head,this._next=this._current.next),e.data)}unshift(e){this._head=new nX(e,void 0,this._head),this._length===0&&(this._tail=this._head,this._next=this._head),this._length++}unshiftCurrent(){var e=this._current;return e===this._head||this._length<2?e&&e.data:(e===this._tail?(this._tail=e.prev,this._tail.next=void 0,this._current=this._tail):(e.next.prev=e.prev,e.prev.next=e.next,this._current=e.prev),this._next=this._current.next,e.next=this._head,e.prev=void 0,this._head.prev=e,this._head=e,e.data)}removeCurrent(){var e=this._current;if(this._length!==0)return this._length--,this._length===0?(this._head=this._tail=this._current=this._next=void 0,e.data):(e===this._tail?(this._tail=e.prev,this._tail.next=void 0,this._current=this._tail):e===this._head?(this._head=e.next,this._head.prev=void 0,this._current=this._head):(e.next.prev=e.prev,e.prev.next=e.next,this._current=e.prev),this._next=this._current.next,e.data)}resetCursor(){return this._current=this._next=this._head,this}next(){var e=this._next;if(e!==void 0)return this._next=e.next,this._current=e,e.data}}class ey extends Mfe{constructor(e,n,r,i){if(super(),this.size=e,this.maintainHigh=n,this.maintainLow=r,this.maintainSum=i,this.totalPushed=0,this.periodHigh=0,this.periodLow=1/0,this.periodSum=0,!e||typeof e!="number")throw"Size required and should be a number.";this._push=this.push,this.push=function(s){this.add(s),this.totalPushed++}}add(e){this.length===this.size?(this.lastShift=this.shift(),this._push(e),this.maintainHigh&&this.lastShift==this.periodHigh&&this.calculatePeriodHigh(),this.maintainLow&&this.lastShift==this.periodLow&&this.calculatePeriodLow(),this.maintainSum&&(this.periodSum=this.periodSum-this.lastShift)):this._push(e),this.maintainHigh&&this.periodHigh<=e&&(this.periodHigh=e),this.maintainLow&&this.periodLow>=e&&(this.periodLow=e),this.maintainSum&&(this.periodSum=this.periodSum+e)}*iterator(){for(this.resetCursor();this.next();)yield this.current}calculatePeriodHigh(){for(this.resetCursor(),this.next()&&(this.periodHigh=this.current);this.next();)this.periodHigh<=this.current&&(this.periodHigh=this.current)}calculatePeriodLow(){for(this.resetCursor(),this.next()&&(this.periodLow=this.current);this.next();)this.periodLow>=this.current&&(this.periodLow=this.current)}}let kZe={};function CZe(t){return kZe[t]}function NZe(t){let e=CZe("precision");return e?parseFloat(t.toPrecision(e)):t}class qt{constructor(e){this.format=e.format||NZe}static reverseInputs(e){e.reversedInput&&(e.values&&e.values.reverse(),e.open&&e.open.reverse(),e.high&&e.high.reverse(),e.low&&e.low.reverse(),e.close&&e.close.reverse(),e.volume&&e.volume.reverse(),e.timestamp&&e.timestamp.reverse())}getResult(){return this.result}}class Dl extends qt{constructor(e){super(e),this.period=e.period,this.price=e.values;var n=(function*(r){var i=new Mfe,s=0,o=1,a=yield,l;for(i.push(0);;)o<r?(o++,i.push(a),s=s+a):(s=s-i.shift()+a,l=s/r,i.push(a)),a=yield l});this.generator=n(this.period),this.generator.next(),this.result=[],this.price.forEach(r=>{var i=this.generator.next(r);i.value!==void 0&&this.result.push(this.format(i.value))})}nextValue(e){var n=this.generator.next(e).value;if(n!=null)return this.format(n)}}Dl.calculate=_Ze;function _Ze(t){qt.reverseInputs(t);var e=new Dl(t).result;return t.reversedInput&&e.reverse(),qt.reverseInputs(t),e}class Ex extends qt{constructor(e){super(e);var n=e.period,r=e.values,i=2/(n+1),s;this.result=[],s=new Dl({period:n,values:[]});var o=(function*(){for(var a=yield,l;;)l!==void 0&&a!==void 0?(l=(a-l)*i+l,a=yield l):(a=yield,l=s.nextValue(a),l&&(a=yield l))});this.generator=o(),this.generator.next(),this.generator.next(),r.forEach(a=>{var l=this.generator.next(a);l.value!=null&&this.result.push(this.format(l.value))})}nextValue(e){var n=this.generator.next(e).value;if(n!=null)return this.format(n)}}Ex.calculate=IZe;function IZe(t){qt.reverseInputs(t);var e=new Ex(t).result;return t.reversedInput&&e.reverse(),qt.reverseInputs(t),e}class PN extends qt{constructor(e){super(e);var n=e.period,r=e.values,i=1/n,s;this.result=[],s=new Dl({period:n,values:[]});var o=(function*(){for(var a=yield,l;;)l!==void 0&&a!==void 0?(l=(a-l)*i+l,a=yield l):(a=yield,l=s.nextValue(a),l!==void 0&&(a=yield l))});this.generator=o(),this.generator.next(),this.generator.next(),r.forEach(a=>{var l=this.generator.next(a);l.value!=null&&this.result.push(this.format(l.value))})}nextValue(e){var n=this.generator.next(e).value;if(n!=null)return this.format(n)}}PN.calculate=PZe;function PZe(t){qt.reverseInputs(t);var e=new PN(t).result;return t.reversedInput&&e.reverse(),qt.reverseInputs(t),e}class uC extends qt{constructor(e){super(e);var n=e.SimpleMAOscillator?Dl:Ex,r=e.SimpleMASignal?Dl:Ex,i=new n({period:e.fastPeriod,values:[],format:l=>l}),s=new n({period:e.slowPeriod,values:[],format:l=>l}),o=new r({period:e.signalPeriod,values:[],format:l=>l}),a=this.format;this.result=[],this.generator=(function*(){for(var l=0,c,u,f,m,g,v;;){if(l<e.slowPeriod){c=yield,g=i.nextValue(c),v=s.nextValue(c),l++;continue}g&&v&&(u=g-v,f=o.nextValue(u)),m=u-f,c=yield{MACD:a(u),signal:f?a(f):void 0,histogram:isNaN(m)?void 0:a(m)},g=i.nextValue(c),v=s.nextValue(c)}})(),this.generator.next(),e.values.forEach(l=>{var c=this.generator.next(l);c.value!=null&&this.result.push(c.value)})}nextValue(e){var n=this.generator.next(e).value;return n}}uC.calculate=RZe;function RZe(t){qt.reverseInputs(t);var e=new uC(t).result;return t.reversedInput&&e.reverse(),qt.reverseInputs(t),e}class yB extends qt{constructor(e){super(e);let n=e.values,r=e.period,i=this.format;this.generator=(function*(s){var o=yield,a=1,l=0,c,u,f=o;for(o=yield;;)u=o-f,u=u>0?u:0,u>0&&(l=l+u),a<s?a++:c===void 0?c=l/s:c=(c*(s-1)+u)/s,f=o,c=c!==void 0?i(c):void 0,o=yield c})(r),this.generator.next(),this.result=[],n.forEach(s=>{var o=this.generator.next(s);o.value!==void 0&&this.result.push(o.value)})}nextValue(e){return this.generator.next(e).value}}yB.calculate=OZe;function OZe(t){qt.reverseInputs(t);var e=new yB(t).result;return t.reversedInput&&e.reverse(),qt.reverseInputs(t),e}class xB extends qt{constructor(e){super(e);let n=e.values,r=e.period,i=this.format;this.generator=(function*(s){var o=yield,a=1,l=0,c,u,f=o;for(o=yield;;)u=f-o,u=u>0?u:0,u>0&&(l=l+u),a<s?a++:c===void 0?c=l/s:c=(c*(s-1)+u)/s,f=o,c=c!==void 0?i(c):void 0,o=yield c})(r),this.generator.next(),this.result=[],n.forEach(s=>{var o=this.generator.next(s);o.value!==void 0&&this.result.push(o.value)})}nextValue(e){return this.generator.next(e).value}}xB.calculate=MZe;function MZe(t){qt.reverseInputs(t);var e=new xB(t).result;return t.reversedInput&&e.reverse(),qt.reverseInputs(t),e}class dC extends qt{constructor(e){super(e);var n=e.period,r=e.values,i=new yB({period:n,values:[]}),s=new xB({period:n,values:[]});this.generator=(function*(o){for(var a=yield,l,c,u,f;;)l=i.nextValue(a),c=s.nextValue(a),l!==void 0&&c!==void 0&&(c===0?f=100:l===0?f=0:(u=l/c,u=isNaN(u)?0:u,f=parseFloat((100-100/(1+u)).toFixed(2)))),a=yield f})(),this.generator.next(),this.result=[],r.forEach(o=>{var a=this.generator.next(o);a.value!==void 0&&this.result.push(a.value)})}nextValue(e){return this.generator.next(e).value}}dC.calculate=DZe;function DZe(t){qt.reverseInputs(t);var e=new dC(t).result;return t.reversedInput&&e.reverse(),qt.reverseInputs(t),e}class vB extends qt{constructor(e){super(e);var n=e.period,r=e.values,i=new Dl({period:n,values:[],format:s=>s});this.result=[],this.generator=(function*(){var s,o,a=new ey(n);s=yield;for(var l;;){if(a.push(s),o=i.nextValue(s),o){let c=0;for(let u of a.iterator())c=c+Math.pow(u-o,2);l=Math.sqrt(c/n)}s=yield l}})(),this.generator.next(),r.forEach(s=>{var o=this.generator.next(s);o.value!=null&&this.result.push(this.format(o.value))})}nextValue(e){var n=this.generator.next(e);if(n.value!=null)return this.format(n.value)}}vB.calculate=LZe;function LZe(t){qt.reverseInputs(t);var e=new vB(t).result;return t.reversedInput&&e.reverse(),qt.reverseInputs(t),e}class fC extends qt{constructor(e){super(e);var n=e.period,r=e.values,i=e.stdDev,s=this.format,o,a;this.result=[],o=new Dl({period:n,values:[],format:l=>l}),a=new vB({period:n,values:[],format:l=>l}),this.generator=(function*(){var l,c,u,f;for(c=yield;;){if(u=o.nextValue(c),f=a.nextValue(c),u){let m=s(u),g=s(u+f*i),v=s(u-f*i),x=s((c-v)/(g-v));l={middle:m,upper:g,lower:v,pb:x}}c=yield l}})(),this.generator.next(),r.forEach(l=>{var c=this.generator.next(l);c.value!=null&&this.result.push(c.value)})}nextValue(e){return this.generator.next(e).value}}fC.calculate=jZe;function jZe(t){qt.reverseInputs(t);var e=new fC(t).result;return t.reversedInput&&e.reverse(),qt.reverseInputs(t),e}class iw extends qt{constructor(e){super(e),this.period=e.period,this.price=e.values;var n=(function*(r){for(var i=0,s=1,o=yield,a=0;;)s<r?(s++,i=i+o,a=void 0):s==r?(s++,i=i+o,a=i):a=a-a/r+o,o=yield a});this.generator=n(this.period),this.generator.next(),this.result=[],this.price.forEach(r=>{var i=this.generator.next(r);i.value!=null&&this.result.push(this.format(i.value))})}nextValue(e){var n=this.generator.next(e).value;if(n!=null)return this.format(n)}}iw.calculate=BZe;function BZe(t){qt.reverseInputs(t);var e=new iw(t).result;return t.reversedInput&&e.reverse(),qt.reverseInputs(t),e}class bB extends qt{constructor(e){super(e);var n=e.low,r=e.high,i=this.format;if(n.length!=r.length)throw"Inputs(low,high) not of equal size";this.result=[],this.generator=(function*(){for(var s,o=yield,a;;){if(a){let l=o.high-a.high,c=a.low-o.low;s=i(c>l&&c>0?c:0)}a=o,o=yield s}})(),this.generator.next(),n.forEach((s,o)=>{var a=this.generator.next({high:r[o],low:n[o]});a.value!==void 0&&this.result.push(a.value)})}static calculate(e){qt.reverseInputs(e);var n=new bB(e).result;return e.reversedInput&&n.reverse(),qt.reverseInputs(e),n}nextValue(e){return this.generator.next(e).value}}class wB extends qt{constructor(e){super(e);var n=e.low,r=e.high,i=this.format;if(n.length!=r.length)throw"Inputs(low,high) not of equal size";this.result=[],this.generator=(function*(){for(var s,o=yield,a;;){if(a){let l=o.high-a.high,c=a.low-o.low;s=i(l>c&&l>0?l:0)}a=o,o=yield s}})(),this.generator.next(),n.forEach((s,o)=>{var a=this.generator.next({high:r[o],low:n[o]});a.value!==void 0&&this.result.push(a.value)})}static calculate(e){qt.reverseInputs(e);var n=new wB(e).result;return e.reversedInput&&n.reverse(),qt.reverseInputs(e),n}nextValue(e){return this.generator.next(e).value}}class RN extends qt{constructor(e){super(e);var n=e.low,r=e.high,i=e.close,s=this.format;if(n.length!=r.length)throw"Inputs(low,high) not of equal size";this.result=[],this.generator=(function*(){for(var o=yield,a,l;;)a===void 0&&(a=o.close,o=yield l),l=Math.max(o.high-o.low,isNaN(Math.abs(o.high-a))?0:Math.abs(o.high-a),isNaN(Math.abs(o.low-a))?0:Math.abs(o.low-a)),a=o.close,l!=null&&(l=s(l)),o=yield l})(),this.generator.next(),n.forEach((o,a)=>{var l=this.generator.next({high:r[a],low:n[a],close:i[a]});l.value!=null&&this.result.push(l.value)})}nextValue(e){return this.generator.next(e).value}}RN.calculate=UZe;function UZe(t){qt.reverseInputs(t);var e=new RN(t).result;return t.reversedInput&&e.reverse(),qt.reverseInputs(t),e}class hC extends qt{constructor(e){super(e);var n=e.low,r=e.high,i=e.close,s=e.period,o=this.format,a=new wB({high:[],low:[]}),l=new bB({high:[],low:[]}),c=new iw({period:s,values:[],format:v=>v}),u=new iw({period:s,values:[],format:v=>v}),f=new iw({period:s,values:[],format:v=>v}),m=new PN({period:s,values:[],format:v=>v}),g=new RN({low:[],high:[],close:[]});if(!(n.length===r.length&&r.length===i.length))throw"Inputs(low,high, close) not of equal size";this.result=[],this.generator=(function*(){for(var v=yield,x,b,E,C;;){let k=g.nextValue(v),O=a.nextValue(v),U=l.nextValue(v);if(k===void 0){v=yield;continue}let R=f.nextValue(k),$=c.nextValue(O),V=u.nextValue(U);if(R!=null&&$!=null&&V!=null){x=$*100/R,b=V*100/R;let j=Math.abs(x-b),F=x+b;E=j/F*100,C=m.nextValue(E)}v=yield{adx:C,pdi:x,mdi:b}}})(),this.generator.next(),n.forEach((v,x)=>{var b=this.generator.next({high:r[x],low:n[x],close:i[x]});b.value!=null&&b.value.adx!=null&&this.result.push({adx:o(b.value.adx),pdi:o(b.value.pdi),mdi:o(b.value.mdi)})})}nextValue(e){let n=this.generator.next(e).value;if(n!=null&&n.adx!=null)return{adx:this.format(n.adx),pdi:this.format(n.pdi),mdi:this.format(n.mdi)}}}hC.calculate=FZe;function FZe(t){qt.reverseInputs(t);var e=new hC(t).result;return t.reversedInput&&e.reverse(),qt.reverseInputs(t),e}class pC extends qt{constructor(e){super(e);var n=e.low,r=e.high,i=e.close,s=e.period,o=this.format;if(!(n.length===r.length&&r.length===i.length))throw"Inputs(low,high, close) not of equal size";var a=new RN({low:[],high:[],close:[]}),l=new PN({period:s,values:[],format:c=>c});this.result=[],this.generator=(function*(){for(var c=yield,u,f;;)f=a.nextValue({low:c.low,high:c.high,close:c.close}),f===void 0?u=void 0:u=l.nextValue(f),c=yield u})(),this.generator.next(),n.forEach((c,u)=>{var f=this.generator.next({high:r[u],low:n[u],close:i[u]});f.value!==void 0&&this.result.push(o(f.value))})}nextValue(e){return this.generator.next(e).value}}pC.calculate=$Ze;function $Ze(t){qt.reverseInputs(t);var e=new pC(t).result;return t.reversedInput&&e.reverse(),qt.reverseInputs(t),e}class mC extends qt{constructor(e){super(e);let n=e.low,r=e.high,i=e.close,s=e.period,o=e.signalPeriod,a=this.format;if(!(n.length===r.length&&r.length===i.length))throw"Inputs(low,high, close) not of equal size";this.result=[],this.generator=(function*(){let l=1,c=new ey(s,!0,!1),u=new ey(s,!1,!0),f=new Dl({period:o,values:[],format:x=>x}),m,g;for(var v=yield;;){if(c.push(v.high),u.push(v.low),l<s){l++,v=yield;continue}let x=u.periodLow;m=(v.close-x)/(c.periodHigh-x)*100,m=isNaN(m)?0:m,g=f.nextValue(m),v=yield{k:a(m),d:g!==void 0?a(g):void 0}}})(),this.generator.next(),n.forEach((l,c)=>{var u=this.generator.next({high:r[c],low:n[c],close:i[c]});u.value!==void 0&&this.result.push(u.value)})}nextValue(e){let n=this.generator.next(e);if(n.value!==void 0)return n.value}}mC.calculate=zZe;function zZe(t){qt.reverseInputs(t);var e=new mC(t).result;return t.reversedInput&&e.reverse(),qt.reverseInputs(t),e}class gC extends qt{constructor(e){super(e);var n=e.close,r=e.volume;this.result=[],this.generator=(function*(){var i=0,s,o;for(s=yield,s.close&&typeof s.close=="number"&&(o=s.close,s=yield);;)o<s.close?i=i+s.volume:s.close<o&&(i=i-s.volume),o=s.close,s=yield i})(),this.generator.next(),n.forEach((i,s)=>{let o={close:n[s],volume:r[s]},a=this.generator.next(o);a.value!=null&&this.result.push(a.value)})}nextValue(e){return this.generator.next(e).value}}gC.calculate=HZe;function HZe(t){qt.reverseInputs(t);var e=new gC(t).result;return t.reversedInput&&e.reverse(),qt.reverseInputs(t),e}class yC extends qt{constructor(e){super(e),this.result=[];var n={conversionPeriod:9,basePeriod:26,spanPeriod:52,displacement:26},r=Object.assign({},n,e),i=new ey(r.conversionPeriod*2,!0,!0,!1),s=new ey(r.basePeriod*2,!0,!0,!1),o=new ey(r.spanPeriod*2,!0,!0,!1);this.generator=(function*(){let a,l,c=Math.max(r.conversionPeriod,r.basePeriod,r.spanPeriod,r.displacement),u=1;for(l=yield;;){if(i.push(l.high),i.push(l.low),s.push(l.high),s.push(l.low),o.push(l.high),o.push(l.low),u<c)u++;else{let f=(i.periodHigh+i.periodLow)/2,m=(s.periodHigh+s.periodLow)/2,g=(f+m)/2,v=(o.periodHigh+o.periodLow)/2;a={conversion:f,base:m,spanA:g,spanB:v}}l=yield a}})(),this.generator.next(),e.low.forEach((a,l)=>{var c=this.generator.next({high:e.high[l],low:e.low[l]});c.value&&this.result.push(c.value)})}nextValue(e){return this.generator.next(e).value}}yC.calculate=VZe;function VZe(t){qt.reverseInputs(t);var e=new yC(t).result;return t.reversedInput&&e.reverse(),qt.reverseInputs(t),e}class qZe{normalizeInterval(e){const n=e.toLowerCase();return{1:"1m",5:"5m",15:"15m",60:"1h",240:"4h",d:"1d","1d":"1d",w:"1d","1w":"1d","7d":"1d"}[n]||"1h"}async getMarketPrice(e){try{const n=e.replace(/USDT$/i,"").replace(/USD$/i,"");return{price:await zt.getCurrentPrice(n),exchange:"Hyperliquid",lastUpdate:new Date().toISOString()}}catch(n){throw console.error(`Error fetching market price for ${e}:`,n),new Error(`Failed to get market price: ${n.message}`)}}async getOHLCV(e,n="60"){try{const r=e.replace(/USDT$/i,"").replace(/USD$/i,""),i=this.normalizeInterval(n),s=await zt.getCandles(r,i,1);if(!s||s.length===0)throw new Error("No candle data available");const o=s[s.length-1];return{open:o.open,high:o.high,low:o.low,close:o.close,volume:o.volume||0,timestamp:new Date(o.time).toISOString()}}catch(r){throw console.error(`Error fetching OHLCV for ${e}:`,r),new Error(`Failed to get OHLCV data: ${r.message}`)}}async getHistory(e,n="1D",r=100){try{const i=e.replace(/USDT$/i,"").replace(/USD$/i,""),s=this.normalizeInterval(n);return(await zt.getCandles(i,s,r)).map(a=>({time:Math.floor(a.time/1e3),open:a.open,high:a.high,low:a.low,close:a.close,volume:a.volume}))}catch(i){return console.error(`Error fetching history for ${e}:`,i),[]}}async getIndicator(e,n,r="60",i){try{const s=e.replace(/USDT$/i,"").replace(/USD$/i,""),o=this.normalizeInterval(r),a=await zt.getCandles(s,o,200);if(!a||a.length===0)throw new Error("No data available for indicator calculation");const l=a.map(x=>x.close),c=a.map(x=>x.high),u=a.map(x=>x.low),f=a.map(x=>x.volume||0);let m=0,g=[];switch(n.toLowerCase()){case"rsi":const x=(i==null?void 0:i.period)||14,b={values:l,period:x},E=dC.calculate(b);m=E[E.length-1],g=E.slice(-100);break;case"macd":const C={values:l,fastPeriod:(i==null?void 0:i.fast)||12,slowPeriod:(i==null?void 0:i.slow)||26,signalPeriod:(i==null?void 0:i.signal)||9,SimpleMAOscillator:!1,SimpleMASignal:!1},k=uC.calculate(C),O=k[k.length-1];m={macd:(O==null?void 0:O.MACD)||0,signal:(O==null?void 0:O.signal)||0,histogram:(O==null?void 0:O.histogram)||0},g=k.slice(-100);break;case"ema":const R={period:(i==null?void 0:i.period)||20,values:l},$=Ex.calculate(R);m=$[$.length-1],g=$.slice(-100);break;case"sma":const j={period:(i==null?void 0:i.period)||20,values:l},F=Dl.calculate(j);m=F[F.length-1],g=F.slice(-100);break;case"stoch":const W={high:c,low:u,close:l,period:(i==null?void 0:i.period)||14,signalPeriod:(i==null?void 0:i.signalPeriod)||3},H=mC.calculate(W),B=H[H.length-1];m={k:(B==null?void 0:B.k)||0,d:(B==null?void 0:B.d)||0},g=H.slice(-100);break;case"bollinger":const A=(i==null?void 0:i.period)||20,I=(i==null?void 0:i.stdDev)||2,D={period:A,values:l,stdDev:I},z=fC.calculate(D),G=z[z.length-1],te=l[l.length-1],K=G?(te-G.lower)/(G.upper-G.lower):.5;m={upper:(G==null?void 0:G.upper)||0,middle:(G==null?void 0:G.middle)||0,lower:(G==null?void 0:G.lower)||0,pb:K},g=z.slice(-100);break;case"atr":const q=(i==null?void 0:i.period)||14,M={high:c,low:u,close:l,period:q},_=pC.calculate(M);m=_[_.length-1]||0,g=_.slice(-100);break;case"adx":const Y=(i==null?void 0:i.period)||14,X={high:c,low:u,close:l,period:Y},re=hC.calculate(X),oe=re[re.length-1];m={adx:(oe==null?void 0:oe.adx)||0,pdi:(oe==null?void 0:oe.pdi)||0,mdi:(oe==null?void 0:oe.mdi)||0},g=re.slice(-100);break;case"obv":const Ee={close:l,volume:f},ce=gC.calculate(Ee);m=ce[ce.length-1]||0,g=ce.slice(-100);break;case"vwap":let me=0,ue=0;const le=[];for(let ot=0;ot<a.length;ot++){const Bt=(c[ot]+u[ot]+l[ot])/3;me+=Bt*f[ot],ue+=f[ot],le.push(ue>0?me/ue:Bt)}m=le[le.length-1]||l[l.length-1],g=le.slice(-100);break;case"ichimoku":const Ie=(i==null?void 0:i.conversion)||9,Ne=(i==null?void 0:i.base)||26,$e=(i==null?void 0:i.spanB)||52,Ze=(i==null?void 0:i.displacement)||26,Ye={high:c,low:u,conversionPeriod:Ie,basePeriod:Ne,spanPeriod:$e,displacement:Ze},We=yC.calculate(Ye),At=We[We.length-1];m={tenkanSen:(At==null?void 0:At.conversion)||0,kijunSen:(At==null?void 0:At.base)||0,senkouSpanA:(At==null?void 0:At.spanA)||0,senkouSpanB:(At==null?void 0:At.spanB)||0,chikouSpan:l[l.length-Ze]||l[l.length-1]},g=We.slice(-100);break;case"price":m=l[l.length-1],g=l.slice(-100);break;default:throw new Error(`Unsupported indicator: ${n}`)}return{symbol:e,indicator:n.toUpperCase(),value:m,history:g,timestamp:Date.now()}}catch(s){throw console.error(`Error calculating indicator ${n} for ${e}:`,s),new Error(`Failed to calculate indicator: ${s.message}`)}}async getTradingViewSummary(e){try{const n=e.replace(/USDT$/i,"").replace(/USD$/i,""),r=await zt.getCandles(n,"1h",12);if(!r||r.length<2)return{buy:0,sell:0,neutral:1,recommendation:"NEUTRAL"};let i=0,s=0;for(let l=1;l<r.length;l++)r[l].close>r[l-1].close?i++:s++;const o=Math.max(0,r.length-1-i-s);let a;return i>8?a="STRONG_BUY":i>6?a="BUY":s>8?a="STRONG_SELL":s>6?a="SELL":a="NEUTRAL",{buy:i,sell:s,neutral:o,recommendation:a}}catch(n){return console.error(`Error fetching summary for ${e}:`,n),{buy:0,sell:0,neutral:1,recommendation:"NEUTRAL"}}}detectDivergences(e,n,r){const i=[];if(e.length<20||n.length<20)return i;const o=(m,g=5)=>{const v=[],x=[];for(let b=g;b<m.length-g;b++){let E=!0,C=!0;for(let k=b-g;k<=b+g;k++)k!==b&&(m[k]<=m[b]&&(E=!1),m[k]>=m[b]&&(C=!1));E&&v.push(b),C&&x.push(b)}return{minima:v,maxima:x}},a=e.slice(-20),l=n.slice(-20),c=r.slice(-20),u=o(a),f=o(l);if(u.minima.length>=2&&f.minima.length>=2){const m=u.minima[u.minima.length-1],g=u.minima[u.minima.length-2],v=f.minima[f.minima.length-1],x=f.minima[f.minima.length-2],b=a[m]<a[g],E=l[v]>l[x];if(b&&E){const O=l[v]<30?"STRONG":l[v]<40?"MODERATE":"WEAK";i.push({type:"BULLISH",indicator:"RSI",description:`Price made lower low (${a[g].toFixed(2)}  ${a[m].toFixed(2)}) but RSI made higher low (${l[x].toFixed(1)}  ${l[v].toFixed(1)}). Potential reversal UP.`,strength:O,priceRange:{start:a[g],end:a[m]},indicatorRange:{start:l[x],end:l[v]}})}const C=a[m]>a[g],k=l[v]<l[x];C&&k&&i.push({type:"HIDDEN_BULLISH",indicator:"RSI",description:"Price made higher low but RSI made lower low. Bullish trend continuation signal.",strength:"MODERATE",priceRange:{start:a[g],end:a[m]},indicatorRange:{start:l[x],end:l[v]}})}if(u.maxima.length>=2&&f.maxima.length>=2){const m=u.maxima[u.maxima.length-1],g=u.maxima[u.maxima.length-2],v=f.maxima[f.maxima.length-1],x=f.maxima[f.maxima.length-2],b=a[m]>a[g],E=l[v]<l[x];if(b&&E){const O=l[v]>70?"STRONG":l[v]>60?"MODERATE":"WEAK";i.push({type:"BEARISH",indicator:"RSI",description:`Price made higher high (${a[g].toFixed(2)}  ${a[m].toFixed(2)}) but RSI made lower high (${l[x].toFixed(1)}  ${l[v].toFixed(1)}). Potential reversal DOWN.`,strength:O,priceRange:{start:a[g],end:a[m]},indicatorRange:{start:l[x],end:l[v]}})}const C=a[m]<a[g],k=l[v]>l[x];C&&k&&i.push({type:"HIDDEN_BEARISH",indicator:"RSI",description:"Price made lower high but RSI made higher high. Bearish trend continuation signal.",strength:"MODERATE",priceRange:{start:a[g],end:a[m]},indicatorRange:{start:l[x],end:l[v]}})}if(c.length>=10){const m=c[c.length-1]-c[c.length-5],g=a[a.length-1]-a[a.length-5];m<-.5&&g>0&&i.push({type:"BEARISH",indicator:"MACD",description:"MACD histogram declining while price rising. Momentum weakening.",strength:"WEAK",priceRange:{start:a[a.length-5],end:a[a.length-1]},indicatorRange:{start:c[c.length-5],end:c[c.length-1]}}),m>.5&&g<0&&i.push({type:"BULLISH",indicator:"MACD",description:"MACD histogram rising while price falling. Momentum building.",strength:"WEAK",priceRange:{start:a[a.length-5],end:a[a.length-1]},indicatorRange:{start:c[c.length-5],end:c[c.length-1]}})}return i}calculateIndicatorFromCandles(e,n,r){if(!e||e.length===0)return{value:0,history:[]};const i=e.map(f=>f.close),s=e.map(f=>f.high),o=e.map(f=>f.low),a=e.map(f=>f.volume||0);let l=0,c=[];switch(n.toLowerCase()){case"rsi":const f=(r==null?void 0:r.period)||14,m=dC.calculate({values:i,period:f});l=m[m.length-1]||0,c=m.slice(-100);break;case"macd":const g=uC.calculate({values:i,fastPeriod:(r==null?void 0:r.fast)||12,slowPeriod:(r==null?void 0:r.slow)||26,signalPeriod:(r==null?void 0:r.signal)||9,SimpleMAOscillator:!1,SimpleMASignal:!1}),v=g[g.length-1];l={macd:(v==null?void 0:v.MACD)||0,signal:(v==null?void 0:v.signal)||0,histogram:(v==null?void 0:v.histogram)||0},c=g.slice(-100).map(z=>({macd:(z==null?void 0:z.MACD)||0,signal:(z==null?void 0:z.signal)||0,histogram:(z==null?void 0:z.histogram)||0}));break;case"ema":const x=Ex.calculate({period:(r==null?void 0:r.period)||20,values:i});l=x[x.length-1]||0,c=x.slice(-100);break;case"sma":const b=Dl.calculate({period:(r==null?void 0:r.period)||20,values:i});l=b[b.length-1]||0,c=b.slice(-100);break;case"stoch":const E=mC.calculate({high:s,low:o,close:i,period:(r==null?void 0:r.period)||14,signalPeriod:(r==null?void 0:r.signalPeriod)||3}),C=E[E.length-1];l={k:(C==null?void 0:C.k)||0,d:(C==null?void 0:C.d)||0},c=E.slice(-100);break;case"bollinger":const k=fC.calculate({period:(r==null?void 0:r.period)||20,values:i,stdDev:(r==null?void 0:r.stdDev)||2}),O=k[k.length-1],U=i[i.length-1],R=O?(U-O.lower)/(O.upper-O.lower):.5;l={upper:(O==null?void 0:O.upper)||0,middle:(O==null?void 0:O.middle)||0,lower:(O==null?void 0:O.lower)||0,pb:R},c=k.slice(-100);break;case"atr":const $=pC.calculate({high:s,low:o,close:i,period:(r==null?void 0:r.period)||14});l=$[$.length-1]||0,c=$.slice(-100);break;case"adx":const V=hC.calculate({high:s,low:o,close:i,period:(r==null?void 0:r.period)||14}),j=V[V.length-1];l={adx:(j==null?void 0:j.adx)||0,pdi:(j==null?void 0:j.pdi)||0,mdi:(j==null?void 0:j.mdi)||0},c=V.slice(-100);break;case"obv":const F=gC.calculate({close:i,volume:a});l=F[F.length-1]||0,c=F.slice(-100);break;case"vwap":let W=0,H=0;const B=[];for(let z=0;z<e.length;z++){const G=(s[z]+o[z]+i[z])/3;W+=G*a[z],H+=a[z],B.push(H>0?W/H:G)}l=B[B.length-1]||i[i.length-1],c=B.slice(-100);break;case"ichimoku":const A=yC.calculate({high:s,low:o,conversionPeriod:(r==null?void 0:r.conversion)||9,basePeriod:(r==null?void 0:r.base)||26,spanPeriod:(r==null?void 0:r.spanB)||52,displacement:(r==null?void 0:r.displacement)||26}),I=A[A.length-1],D=(r==null?void 0:r.displacement)||26;l={tenkanSen:(I==null?void 0:I.conversion)||0,kijunSen:(I==null?void 0:I.base)||0,senkouSpanA:(I==null?void 0:I.spanA)||0,senkouSpanB:(I==null?void 0:I.spanB)||0,chikouSpan:i[i.length-D]||i[i.length-1]},c=A.slice(-100);break;default:console.warn(`[MarketDataMCP] Unknown indicator: ${n}`)}return{value:l,history:c}}}const fo=new qZe,Vn={async getMarketData(t){return await zt.getMarketData(t)},async getPositions(t){return(await zt.getUserState(t)).assetPositions},async getOpenOrders(t){return await zt.getOpenOrders(t)},async getUserFills(t){return await zt.getUserFills(t)},async createOrder(t,e,n,r,i,s){return await zt.placeOrder(t,e,n,r,i,s)},async cancelOrder(t,e,n){return await zt.cancelOrder(t,e,n)},async getUserState(t){return await zt.getUserState(t)},async updateLeverage(t,e,n,r){return await zt.updateLeverage(t,e,n,r)},async updateIsolatedMargin(t,e,n,r){return await zt.updateIsolatedMargin(t,e,n,r)},async closePosition(t,e,n,r="market",i){return await zt.closePosition(t,e,n,r,i)},async withdrawUSDC(t,e,n){return await zt.withdrawUSDC(t,e,n)},async getAvailableAssets(){return await zt.getAllAvailableAssets()},async getAssetDecimals(t){return await zt.getAssetDecimals(t)},async validateAsset(t){return await zt.isValidAsset(t)},async getAssetContexts(){return await zt.getAssetContexts()},async getFundingRate(t){return await zt.getFundingRate(t)},async getUserFees(t){return await zt.getUserFees(t)},async getUserFundingHistory(t,e,n){return await zt.getUserFundingHistory(t,e,n)},calculateBreakevenPrice(t,e,n,r,i,s,o){return zt.calculateBreakevenPrice(t,e,n,r,i,s,o)}};function Dfe(t){for(const[e,n]of Object.entries(JC))if(n.indicators.includes(t))return e;return null}function Lfe(t,e){return JC[e].indicators.filter(r=>{var i;return(i=t[r])==null?void 0:i.enabled}).length}function jfe(t,e){return Lfe(t,e)>=JC[e].maxIndicators}function Bfe(t){return Object.values(t).filter(e=>e.enabled).length}function Ufe(t){return Bfe(t)>=jee}function rX(t,e){var r;if((r=t[e])!=null&&r.enabled)return!0;if(Ufe(t))return!1;const n=Dfe(e);return!(n&&jfe(t,n))}function GZe(t,e){const r={...e||Ug};for(const i of Object.keys(r))r[i]={...r[i],enabled:!1};if(t!=="custom"){const i=Yu[t];for(const s of i.indicators)r[s]&&(r[s]={...r[s],enabled:!0})}return r}function KZe(t){const e=Object.keys(t).filter(n=>t[n].enabled).sort();for(const[n,r]of Object.entries(Yu)){if(n==="custom")continue;const i=[...r.indicators].sort();if(JSON.stringify(e)===JSON.stringify(i))return n}return"custom"}class WZe{constructor(){this.userFeesCache=null,this.userFeesCacheTime=0,this.FEES_CACHE_TTL=300*1e3}async getUserFeesFromCache(e){const n=Date.now();if(this.userFeesCache&&n-this.userFeesCacheTime<this.FEES_CACHE_TTL)return this.userFeesCache;if(e)try{const r=await Vn.getUserFees(e);return this.userFeesCache={makerFee:r.makerFee,takerFee:r.takerFee},this.userFeesCacheTime=n,this.userFeesCache}catch{console.warn("[DealerMCP] Failed to fetch user fees, using defaults")}return{makerFee:2e-4,takerFee:5e-4}}async getMarketContext(e,n,r="60",i,s=100){var a,l;const o=`${e}USDT`;try{const c=await fo.getMarketPrice(o),f=await fo.getHistory(o,r,200),m=f.slice(-s);console.log(`[DealerMCP] Fetched ${f.length} candles, using last ${m.length} for history (config: ${s})`);const g={},v=[],x=f.map(H=>({open:H.open,high:H.high,low:H.low,close:H.close,volume:H.volume||0})),b=i?Object.entries(i).filter(([H,B])=>B.enabled).map(([H,B])=>({name:H,params:B.params})):[{name:"rsi",params:{period:14}},{name:"macd",params:{fast:12,slow:26,signal:9}}];for(const{name:H,params:B}of b)try{const A=fo.calculateIndicatorFromCandles(x,H,B),I=i==null?void 0:i[H],D=(I==null?void 0:I.weight)??1,z=Dfe(H);g[H]={value:A.value,history:A.history,weight:D,category:z},v.push(H)}catch(A){console.warn(`[DealerMCP] Failed to calculate ${H} for ${e}:`,A)}const[E,C,k]=await Promise.all([Vn.getFundingRate(e).catch(()=>null),this.getUserFeesFromCache(n),zt.getOrderBookMetrics(e).catch(()=>null)]),O=(E==null?void 0:E.funding)||0,U=Math.abs(O)*3,R={fundingRate:O,dailyHoldingCost:U},$=((a=g.rsi)==null?void 0:a.history)||[],j=(((l=g.macd)==null?void 0:l.history)||[]).map(H=>(H==null?void 0:H.histogram)||0),F=m.map(H=>H.close),W=fo.detectDivergences(F,$,j);return W.length>0&&console.log(`[DealerMCP] Divergences detected for ${e}:`,W.map(H=>`${H.type}(${H.indicator})`).join(", ")),console.log(`[DealerMCP] Context for ${e} (${r}m): Price=${c.price}, Indicators=[${v.join(",")}], Divergences=${W.length}, OrderBook=${k?"OK":"N/A"}`),{symbol:e,currentPrice:c.price,history:m,indicators:g,divergences:W,tradingCosts:R,orderBook:k||void 0,ts:Math.floor(Date.now()/1e3)}}catch(c){return console.error(`[DealerMCP] Failed to gather context for ${e}:`,c),{symbol:e,currentPrice:0,history:[],indicators:{},divergences:[],tradingCosts:{fundingRate:0,dailyHoldingCost:0},error:c.message||"Data unavailable",ts:Math.floor(Date.now()/1e3)}}}calculatePositionBreakevens(e,n,r){return e.map(i=>{var x,b,E,C,k,O,U;const s=((x=i.position)==null?void 0:x.coin)||i.coin,o=parseFloat(((b=i.position)==null?void 0:b.entryPx)||i.entryPx||"0"),a=((C=(E=i.position)==null?void 0:E.leverage)==null?void 0:C.value)||1,c=parseFloat(((k=i.position)==null?void 0:k.szi)||i.szi||"0")>0,u=r.get(s)||0,f=Vn.calculateBreakevenPrice(o,a,c,n.makerFee,n.takerFee,u,8),m=parseFloat(((O=i.position)==null?void 0:O.unrealizedPnl)||"0"),g=parseFloat(((U=i.position)==null?void 0:U.positionValue)||"0"),v=g>0?m/g*100:0;return{coin:s,entryPrice:o,breakevenPrice:f.breakevenPrice,minProfitPrice:f.minProfitPrice,currentPnlPercent:v,isAboveBreakeven:m>0}})}async getMacroSnapshot(e,n,r){const i=`${e}USDT`;try{const o=await fo.getHistory(i,n,50);if(o.length<20)return console.warn(`[DealerMCP] Insufficient candles for macro ${e}@${n}`),{timeframe:n,indicators:{},ts:Math.floor(Date.now()/1e3)};const a=o.map(u=>({open:u.open,high:u.high,low:u.low,close:u.close,volume:u.volume||0})),l={},c=r?Object.entries(r).filter(([u,f])=>f.enabled).map(([u,f])=>({name:u,params:f.params})):[{name:"rsi",params:{period:14}},{name:"macd",params:{fast:12,slow:26,signal:9}}];for(const{name:u,params:f}of c)try{const m=fo.calculateIndicatorFromCandles(a,u,f);l[u]={value:m.value}}catch(m){console.warn(`[DealerMCP] Failed to calc macro ${u} for ${e}:`,m)}return console.log(`[DealerMCP] Macro snapshot for ${e}@${n}: ${Object.keys(l).join(",")}`),{timeframe:n,indicators:l,ts:Math.floor(Date.now()/1e3)}}catch(s){return console.error(`[DealerMCP] Macro snapshot failed for ${e}:`,s),{timeframe:n,indicators:{},ts:Math.floor(Date.now()/1e3)}}}}const KO=new WZe;var YZe={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let JZe,XZe;function QZe(){return{geminiUrl:JZe,vertexUrl:XZe}}function ZZe(t,e,n,r){var i,s;if(!(t!=null&&t.baseUrl)){const o=QZe();return e?(i=o.vertexUrl)!==null&&i!==void 0?i:n:(s=o.geminiUrl)!==null&&s!==void 0?s:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Od{}function xt(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const s=e[i];return s!=null?String(s):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function N(t,e,n){for(let s=0;s<e.length-1;s++){const o=e[s];if(o.endsWith("[]")){const a=o.slice(0,-2);if(!(a in t))if(Array.isArray(n))t[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(t[a])){const l=t[a];if(Array.isArray(n))for(let c=0;c<l.length;c++){const u=l[c];N(u,e.slice(s+1),n[c])}else for(const c of l)N(c,e.slice(s+1),n)}return}else if(o.endsWith("[0]")){const a=o.slice(0,-3);a in t||(t[a]=[{}]);const l=t[a];N(l[0],e.slice(s+1),n);return}(!t[o]||typeof t[o]!="object")&&(t[o]={}),t=t[o]}const r=e[e.length-1],i=t[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function S(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const i=e[r];if(i.endsWith("[]")){const s=i.slice(0,-2);if(s in t){const o=t[s];return Array.isArray(o)?o.map(a=>S(a,e.slice(r+1),n)):n}else return n}else t=t[i]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function eet(t,e){for(const[n,r]of Object.entries(e)){const i=n.split("."),s=r.split("."),o=new Set;let a=-1;for(let l=0;l<i.length;l++)if(i[l]==="*"){a=l;break}if(a!==-1&&s.length>a)for(let l=a;l<s.length;l++){const c=s[l];c!=="*"&&!c.endsWith("[]")&&!c.endsWith("[0]")&&o.add(c)}OD(t,i,s,0,o)}}function OD(t,e,n,r,i){if(r>=e.length||typeof t!="object"||t===null)return;const s=e[r];if(s.endsWith("[]")){const o=s.slice(0,-2),a=t;if(o in a&&Array.isArray(a[o]))for(const l of a[o])OD(l,e,n,r+1,i)}else if(s==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const o=t,a=Object.keys(o).filter(c=>!c.startsWith("_")&&!i.has(c)),l={};for(const c of a)l[c]=o[c];for(const[c,u]of Object.entries(l)){const f=[];for(const m of n.slice(r))m==="*"?f.push(c):f.push(m);N(o,f,u)}for(const c of a)delete o[c]}}else{const o=t;s in o&&OD(o[s],e,n,r+1,i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function EB(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tet(t){const e={},n=S(t,["operationName"]);n!=null&&N(e,["operationName"],n);const r=S(t,["resourceName"]);return r!=null&&N(e,["_url","resourceName"],r),e}function net(t){const e={},n=S(t,["name"]);n!=null&&N(e,["name"],n);const r=S(t,["metadata"]);r!=null&&N(e,["metadata"],r);const i=S(t,["done"]);i!=null&&N(e,["done"],i);const s=S(t,["error"]);s!=null&&N(e,["error"],s);const o=S(t,["response","generateVideoResponse"]);return o!=null&&N(e,["response"],iet(o)),e}function ret(t){const e={},n=S(t,["name"]);n!=null&&N(e,["name"],n);const r=S(t,["metadata"]);r!=null&&N(e,["metadata"],r);const i=S(t,["done"]);i!=null&&N(e,["done"],i);const s=S(t,["error"]);s!=null&&N(e,["error"],s);const o=S(t,["response"]);return o!=null&&N(e,["response"],set(o)),e}function iet(t){const e={},n=S(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>oet(o))),N(e,["generatedVideos"],s)}const r=S(t,["raiMediaFilteredCount"]);r!=null&&N(e,["raiMediaFilteredCount"],r);const i=S(t,["raiMediaFilteredReasons"]);return i!=null&&N(e,["raiMediaFilteredReasons"],i),e}function set(t){const e={},n=S(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>aet(o))),N(e,["generatedVideos"],s)}const r=S(t,["raiMediaFilteredCount"]);r!=null&&N(e,["raiMediaFilteredCount"],r);const i=S(t,["raiMediaFilteredReasons"]);return i!=null&&N(e,["raiMediaFilteredReasons"],i),e}function oet(t){const e={},n=S(t,["video"]);return n!=null&&N(e,["video"],pet(n)),e}function aet(t){const e={},n=S(t,["_self"]);return n!=null&&N(e,["video"],met(n)),e}function cet(t){const e={},n=S(t,["operationName"]);return n!=null&&N(e,["_url","operationName"],n),e}function uet(t){const e={},n=S(t,["operationName"]);return n!=null&&N(e,["_url","operationName"],n),e}function det(t){const e={},n=S(t,["name"]);n!=null&&N(e,["name"],n);const r=S(t,["metadata"]);r!=null&&N(e,["metadata"],r);const i=S(t,["done"]);i!=null&&N(e,["done"],i);const s=S(t,["error"]);s!=null&&N(e,["error"],s);const o=S(t,["response"]);return o!=null&&N(e,["response"],fet(o)),e}function fet(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["parent"]);r!=null&&N(e,["parent"],r);const i=S(t,["documentName"]);return i!=null&&N(e,["documentName"],i),e}function Ffe(t){const e={},n=S(t,["name"]);n!=null&&N(e,["name"],n);const r=S(t,["metadata"]);r!=null&&N(e,["metadata"],r);const i=S(t,["done"]);i!=null&&N(e,["done"],i);const s=S(t,["error"]);s!=null&&N(e,["error"],s);const o=S(t,["response"]);return o!=null&&N(e,["response"],het(o)),e}function het(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["parent"]);r!=null&&N(e,["parent"],r);const i=S(t,["documentName"]);return i!=null&&N(e,["documentName"],i),e}function pet(t){const e={},n=S(t,["uri"]);n!=null&&N(e,["uri"],n);const r=S(t,["encodedVideo"]);r!=null&&N(e,["videoBytes"],EB(r));const i=S(t,["encoding"]);return i!=null&&N(e,["mimeType"],i),e}function met(t){const e={},n=S(t,["gcsUri"]);n!=null&&N(e,["uri"],n);const r=S(t,["bytesBase64Encoded"]);r!=null&&N(e,["videoBytes"],EB(r));const i=S(t,["mimeType"]);return i!=null&&N(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var iX;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(iX||(iX={}));var sX;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(sX||(sX={}));var oX;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(oX||(oX={}));var je;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(je||(je={}));var aX;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(aX||(aX={}));var lX;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(lX||(lX={}));var cX;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(cX||(cX={}));var uX;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(uX||(uX={}));var dX;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(dX||(dX={}));var fX;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(fX||(fX={}));var hX;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(hX||(hX={}));var pX;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(pX||(pX={}));var mX;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(mX||(mX={}));var gX;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(gX||(gX={}));var yX;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(yX||(yX={}));var xX;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(xX||(xX={}));var vX;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(vX||(vX={}));var bX;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(bX||(bX={}));var wX;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(wX||(wX={}));var xC;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(xC||(xC={}));var EX;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(EX||(EX={}));var SX;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(SX||(SX={}));var AX;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(AX||(AX={}));var MD;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(MD||(MD={}));var TX;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(TX||(TX={}));var kX;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(kX||(kX={}));var CX;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(CX||(CX={}));var NX;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(NX||(NX={}));var _X;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(_X||(_X={}));var IX;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(IX||(IX={}));var PX;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(PX||(PX={}));var RX;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(RX||(RX={}));var OX;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(OX||(OX={}));var MX;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(MX||(MX={}));var DX;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(DX||(DX={}));var LX;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(LX||(LX={}));var jX;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(jX||(jX={}));var BX;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(BX||(BX={}));var UX;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(UX||(UX={}));var FX;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(FX||(FX={}));var $X;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})($X||($X={}));var zX;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(zX||(zX={}));var HX;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(HX||(HX={}));var VX;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(VX||(VX={}));var qX;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(qX||(qX={}));var GX;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(GX||(GX={}));var KX;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(KX||(KX={}));var WX;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(WX||(WX={}));var YX;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(YX||(YX={}));var JX;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(JX||(JX={}));var XX;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(XX||(XX={}));var QX;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(QX||(QX={}));var ZX;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(ZX||(ZX={}));var eQ;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(eQ||(eQ={}));var tQ;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(tQ||(tQ={}));var Ig;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Ig||(Ig={}));class DD{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class kb{get text(){var e,n,r,i,s,o,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",u=!1;const f=[];for(const m of(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[g,v]of Object.entries(m))g!=="text"&&g!=="thought"&&g!=="thoughtSignature"&&(v!==null||v!==void 0)&&f.push(g);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;u=!0,c+=m.text}}return f.length>0&&console.warn(`there are non-text parts ${f} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),u?c:void 0}get data(){var e,n,r,i,s,o,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const u=[];for(const f of(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[m,g]of Object.entries(f))m!=="inlineData"&&(g!==null||g!==void 0)&&u.push(m);f.inlineData&&typeof f.inlineData.data=="string"&&(c+=atob(f.inlineData.data))}return u.length>0&&console.warn(`there are non-data parts ${u} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,n,r,i,s,o,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(u=>u.functionCall).map(u=>u.functionCall).filter(u=>u!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var e,n,r,i,s,o,a,l,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const u=(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(f=>f.executableCode).map(f=>f.executableCode).filter(f=>f!==void 0);if((u==null?void 0:u.length)!==0)return(c=u==null?void 0:u[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,n,r,i,s,o,a,l,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const u=(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(f=>f.codeExecutionResult).map(f=>f.codeExecutionResult).filter(f=>f!==void 0);if((u==null?void 0:u.length)!==0)return(c=u==null?void 0:u[0])===null||c===void 0?void 0:c.output}}class nQ{}class rQ{}class get{}class yet{}class xet{}class vet{}class iQ{}class sQ{}class oQ{}class bet{}class vC{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new vC;let i;const s=e;return n?i=ret(s):i=net(s),Object.assign(r,i),r}}class aQ{}class lQ{}class cQ{}class uQ{}class wet{}class Eet{}class Aet{}class SB{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new SB,s=det(e);return Object.assign(r,s),r}}class Tet{}class ket{}class Cet{}class dQ{}class Net{get text(){var e,n,r;let i="",s=!1;const o=[];for(const a of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[l,c]of Object.entries(a))l!=="text"&&l!=="thought"&&c!==null&&o.push(l);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;s=!0,i+=a.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?i:void 0}get data(){var e,n,r;let i="";const s=[];for(const o of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[a,l]of Object.entries(o))a!=="inlineData"&&l!==null&&s.push(a);o.inlineData&&typeof o.inlineData.data=="string"&&(i+=atob(o.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class _et{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class AB{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new AB,s=Ffe(e);return Object.assign(r,s),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $n(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function $fe(t,e){const n=$n(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function zfe(t){return Array.isArray(t)?t.map(e=>bC(e)):[bC(t)]}function bC(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Hfe(t){const e=bC(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Vfe(t){const e=bC(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function fQ(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function qfe(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>fQ(e)):[fQ(t)]}function LD(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function hQ(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function pQ(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function _s(t){if(t==null)throw new Error("ContentUnion is required");return LD(t)?t:{role:"user",parts:qfe(t)}}function TB(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=_s(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=_s(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>_s(n)):[_s(e)]}function Fa(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(hQ(t)||pQ(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[_s(t)]}const e=[],n=[],r=LD(t[0]);for(const i of t){const s=LD(i);if(s!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)e.push(i);else{if(hQ(i)||pQ(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||e.push({role:"user",parts:qfe(n)}),e}function Iet(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(je).includes(n[0].toUpperCase())?n[0].toUpperCase():je.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(je).includes(r.toUpperCase())?r.toUpperCase():je.TYPE_UNSPECIFIED})}}function ty(t){const e={},n=["items"],r=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const s=t.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(e.nullable=!0,t=s[1]):s[1].type==="null"&&(e.nullable=!0,t=s[0])),t.type instanceof Array&&Iet(t.type,e);for(const[o,a]of Object.entries(t))if(a!=null)if(o=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(je).includes(a.toUpperCase())?a.toUpperCase():je.TYPE_UNSPECIFIED}else if(n.includes(o))e[o]=ty(a);else if(r.includes(o)){const l=[];for(const c of a){if(c.type=="null"){e.nullable=!0;continue}l.push(ty(c))}e[o]=l}else if(i.includes(o)){const l={};for(const[c,u]of Object.entries(a))l[c]=ty(u);e[o]=l}else{if(o==="additionalProperties")continue;e[o]=a}return e}function kB(t){return ty(t)}function CB(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function NB(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function sv(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=ty(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=ty(e.response));return t}function ov(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function Pet(t,e,n,r=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function Md(t,e){if(typeof e!="string")throw new Error("name must be a string");return Pet(t,e,"cachedContents")}function Gfe(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Eh(t){return EB(t)}function Ret(t){return t!=null&&typeof t=="object"&&"name"in t}function Oet(t){return t!=null&&typeof t=="object"&&"video"in t}function Met(t){return t!=null&&typeof t=="object"&&"uri"in t}function Kfe(t){var e;let n;if(Ret(t)&&(n=t.name),!(Met(t)&&(n=t.uri,n===void 0))&&!(Oet(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function Wfe(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function Yfe(t){for(const e of["models","tunedModels","publisherModels"])if(Det(t,e))return t[e];return[]}function Det(t,e){return t!==null&&typeof t=="object"&&e in t}function Let(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function jet(t,e={}){const n=[],r=new Set;for(const i of t){const s=i.name;if(r.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);r.add(s);const o=Let(i,e);o.functionDeclarations&&n.push(...o.functionDeclarations)}return{functionDeclarations:n}}function Jfe(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,i=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(i>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function Bet(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Xfe(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const i=n.inlinedResponses;if(!Array.isArray(i)||i.length===0)return t;let s=!1;for(const o of i){if(typeof o!="object"||o===null)continue;const l=o.response;if(typeof l!="object"||l===null)continue;if(l.embedding!==void 0){s=!0;break}}return s&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function av(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function Qfe(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Uet(t){const e={},n=S(t,["responsesFile"]);n!=null&&N(e,["fileName"],n);const r=S(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>vtt(o))),N(e,["inlinedResponses"],s)}const i=S(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),N(e,["inlinedEmbedContentResponses"],s)}return e}function Fet(t){const e={},n=S(t,["predictionsFormat"]);n!=null&&N(e,["format"],n);const r=S(t,["gcsDestination","outputUriPrefix"]);r!=null&&N(e,["gcsUri"],r);const i=S(t,["bigqueryDestination","outputUri"]);return i!=null&&N(e,["bigqueryUri"],i),e}function $et(t){const e={},n=S(t,["format"]);n!=null&&N(e,["predictionsFormat"],n);const r=S(t,["gcsUri"]);r!=null&&N(e,["gcsDestination","outputUriPrefix"],r);const i=S(t,["bigqueryUri"]);if(i!=null&&N(e,["bigqueryDestination","outputUri"],i),S(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(S(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(S(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function AT(t){const e={},n=S(t,["name"]);n!=null&&N(e,["name"],n);const r=S(t,["metadata","displayName"]);r!=null&&N(e,["displayName"],r);const i=S(t,["metadata","state"]);i!=null&&N(e,["state"],Qfe(i));const s=S(t,["metadata","createTime"]);s!=null&&N(e,["createTime"],s);const o=S(t,["metadata","endTime"]);o!=null&&N(e,["endTime"],o);const a=S(t,["metadata","updateTime"]);a!=null&&N(e,["updateTime"],a);const l=S(t,["metadata","model"]);l!=null&&N(e,["model"],l);const c=S(t,["metadata","output"]);return c!=null&&N(e,["dest"],Uet(Xfe(c))),e}function jD(t){const e={},n=S(t,["name"]);n!=null&&N(e,["name"],n);const r=S(t,["displayName"]);r!=null&&N(e,["displayName"],r);const i=S(t,["state"]);i!=null&&N(e,["state"],Qfe(i));const s=S(t,["error"]);s!=null&&N(e,["error"],s);const o=S(t,["createTime"]);o!=null&&N(e,["createTime"],o);const a=S(t,["startTime"]);a!=null&&N(e,["startTime"],a);const l=S(t,["endTime"]);l!=null&&N(e,["endTime"],l);const c=S(t,["updateTime"]);c!=null&&N(e,["updateTime"],c);const u=S(t,["model"]);u!=null&&N(e,["model"],u);const f=S(t,["inputConfig"]);f!=null&&N(e,["src"],zet(f));const m=S(t,["outputConfig"]);m!=null&&N(e,["dest"],Fet(Xfe(m)));const g=S(t,["completionStats"]);return g!=null&&N(e,["completionStats"],g),e}function zet(t){const e={},n=S(t,["instancesFormat"]);n!=null&&N(e,["format"],n);const r=S(t,["gcsSource","uris"]);r!=null&&N(e,["gcsUri"],r);const i=S(t,["bigquerySource","inputUri"]);return i!=null&&N(e,["bigqueryUri"],i),e}function Het(t,e){const n={};if(S(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(S(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(S(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=S(e,["fileName"]);r!=null&&N(n,["fileName"],r);const i=S(e,["inlinedRequests"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>xtt(t,o))),N(n,["requests","requests"],s)}return n}function Vet(t){const e={},n=S(t,["format"]);n!=null&&N(e,["instancesFormat"],n);const r=S(t,["gcsUri"]);r!=null&&N(e,["gcsSource","uris"],r);const i=S(t,["bigqueryUri"]);if(i!=null&&N(e,["bigquerySource","inputUri"],i),S(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(S(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function qet(t){const e={},n=S(t,["data"]);if(n!=null&&N(e,["data"],n),S(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=S(t,["mimeType"]);return r!=null&&N(e,["mimeType"],r),e}function Get(t,e){const n={},r=S(e,["name"]);return r!=null&&N(n,["_url","name"],av(t,r)),n}function Ket(t,e){const n={},r=S(e,["name"]);return r!=null&&N(n,["_url","name"],av(t,r)),n}function Wet(t){const e={},n=S(t,["content"]);n!=null&&N(e,["content"],n);const r=S(t,["citationMetadata"]);r!=null&&N(e,["citationMetadata"],Yet(r));const i=S(t,["tokenCount"]);i!=null&&N(e,["tokenCount"],i);const s=S(t,["finishReason"]);s!=null&&N(e,["finishReason"],s);const o=S(t,["avgLogprobs"]);o!=null&&N(e,["avgLogprobs"],o);const a=S(t,["groundingMetadata"]);a!=null&&N(e,["groundingMetadata"],a);const l=S(t,["index"]);l!=null&&N(e,["index"],l);const c=S(t,["logprobsResult"]);c!=null&&N(e,["logprobsResult"],c);const u=S(t,["safetyRatings"]);if(u!=null){let m=u;Array.isArray(m)&&(m=m.map(g=>g)),N(e,["safetyRatings"],m)}const f=S(t,["urlContextMetadata"]);return f!=null&&N(e,["urlContextMetadata"],f),e}function Yet(t){const e={},n=S(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),N(e,["citations"],r)}return e}function Zfe(t){const e={},n=S(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>ktt(s))),N(e,["parts"],i)}const r=S(t,["role"]);return r!=null&&N(e,["role"],r),e}function Jet(t,e){const n={},r=S(t,["displayName"]);if(e!==void 0&&r!=null&&N(e,["batch","displayName"],r),S(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function Xet(t,e){const n={},r=S(t,["displayName"]);e!==void 0&&r!=null&&N(e,["displayName"],r);const i=S(t,["dest"]);return e!==void 0&&i!=null&&N(e,["outputConfig"],$et(Bet(i))),n}function mQ(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["_url","model"],$n(t,r));const i=S(e,["src"]);i!=null&&N(n,["batch","inputConfig"],Het(t,Jfe(t,i)));const s=S(e,["config"]);return s!=null&&Jet(s,n),n}function Qet(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["model"],$n(t,r));const i=S(e,["src"]);i!=null&&N(n,["inputConfig"],Vet(Jfe(t,i)));const s=S(e,["config"]);return s!=null&&Xet(s,n),n}function Zet(t,e){const n={},r=S(t,["displayName"]);return e!==void 0&&r!=null&&N(e,["batch","displayName"],r),n}function ett(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["_url","model"],$n(t,r));const i=S(e,["src"]);i!=null&&N(n,["batch","inputConfig"],att(t,i));const s=S(e,["config"]);return s!=null&&Zet(s,n),n}function ttt(t,e){const n={},r=S(e,["name"]);return r!=null&&N(n,["_url","name"],av(t,r)),n}function ntt(t,e){const n={},r=S(e,["name"]);return r!=null&&N(n,["_url","name"],av(t,r)),n}function rtt(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["name"]);r!=null&&N(e,["name"],r);const i=S(t,["done"]);i!=null&&N(e,["done"],i);const s=S(t,["error"]);return s!=null&&N(e,["error"],s),e}function itt(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["name"]);r!=null&&N(e,["name"],r);const i=S(t,["done"]);i!=null&&N(e,["done"],i);const s=S(t,["error"]);return s!=null&&N(e,["error"],s),e}function stt(t,e){const n={},r=S(e,["contents"]);if(r!=null){let s=TB(t,r);Array.isArray(s)&&(s=s.map(o=>o)),N(n,["requests[]","request","content"],s)}const i=S(e,["config"]);return i!=null&&(N(n,["_self"],ott(i,n)),eet(n,{"requests[].*":"requests[].request.*"})),n}function ott(t,e){const n={},r=S(t,["taskType"]);e!==void 0&&r!=null&&N(e,["requests[]","taskType"],r);const i=S(t,["title"]);e!==void 0&&i!=null&&N(e,["requests[]","title"],i);const s=S(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&N(e,["requests[]","outputDimensionality"],s),S(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(S(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function att(t,e){const n={},r=S(e,["fileName"]);r!=null&&N(n,["file_name"],r);const i=S(e,["inlinedRequests"]);return i!=null&&N(n,["requests"],stt(t,i)),n}function ltt(t){const e={};if(S(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=S(t,["fileUri"]);n!=null&&N(e,["fileUri"],n);const r=S(t,["mimeType"]);return r!=null&&N(e,["mimeType"],r),e}function ctt(t){const e={},n=S(t,["id"]);n!=null&&N(e,["id"],n);const r=S(t,["args"]);r!=null&&N(e,["args"],r);const i=S(t,["name"]);if(i!=null&&N(e,["name"],i),S(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(S(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function utt(t){const e={},n=S(t,["mode"]);n!=null&&N(e,["mode"],n);const r=S(t,["allowedFunctionNames"]);if(r!=null&&N(e,["allowedFunctionNames"],r),S(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function dtt(t,e,n){const r={},i=S(e,["systemInstruction"]);n!==void 0&&i!=null&&N(n,["systemInstruction"],Zfe(_s(i)));const s=S(e,["temperature"]);s!=null&&N(r,["temperature"],s);const o=S(e,["topP"]);o!=null&&N(r,["topP"],o);const a=S(e,["topK"]);a!=null&&N(r,["topK"],a);const l=S(e,["candidateCount"]);l!=null&&N(r,["candidateCount"],l);const c=S(e,["maxOutputTokens"]);c!=null&&N(r,["maxOutputTokens"],c);const u=S(e,["stopSequences"]);u!=null&&N(r,["stopSequences"],u);const f=S(e,["responseLogprobs"]);f!=null&&N(r,["responseLogprobs"],f);const m=S(e,["logprobs"]);m!=null&&N(r,["logprobs"],m);const g=S(e,["presencePenalty"]);g!=null&&N(r,["presencePenalty"],g);const v=S(e,["frequencyPenalty"]);v!=null&&N(r,["frequencyPenalty"],v);const x=S(e,["seed"]);x!=null&&N(r,["seed"],x);const b=S(e,["responseMimeType"]);b!=null&&N(r,["responseMimeType"],b);const E=S(e,["responseSchema"]);E!=null&&N(r,["responseSchema"],kB(E));const C=S(e,["responseJsonSchema"]);if(C!=null&&N(r,["responseJsonSchema"],C),S(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(S(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const k=S(e,["safetySettings"]);if(n!==void 0&&k!=null){let B=k;Array.isArray(B)&&(B=B.map(A=>Ctt(A))),N(n,["safetySettings"],B)}const O=S(e,["tools"]);if(n!==void 0&&O!=null){let B=ov(O);Array.isArray(B)&&(B=B.map(A=>_tt(sv(A)))),N(n,["tools"],B)}const U=S(e,["toolConfig"]);if(n!==void 0&&U!=null&&N(n,["toolConfig"],Ntt(U)),S(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const R=S(e,["cachedContent"]);n!==void 0&&R!=null&&N(n,["cachedContent"],Md(t,R));const $=S(e,["responseModalities"]);$!=null&&N(r,["responseModalities"],$);const V=S(e,["mediaResolution"]);V!=null&&N(r,["mediaResolution"],V);const j=S(e,["speechConfig"]);if(j!=null&&N(r,["speechConfig"],CB(j)),S(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const F=S(e,["thinkingConfig"]);F!=null&&N(r,["thinkingConfig"],F);const W=S(e,["imageConfig"]);W!=null&&N(r,["imageConfig"],ytt(W));const H=S(e,["enableEnhancedCivicAnswers"]);return H!=null&&N(r,["enableEnhancedCivicAnswers"],H),r}function ftt(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>Wet(c))),N(e,["candidates"],l)}const i=S(t,["modelVersion"]);i!=null&&N(e,["modelVersion"],i);const s=S(t,["promptFeedback"]);s!=null&&N(e,["promptFeedback"],s);const o=S(t,["responseId"]);o!=null&&N(e,["responseId"],o);const a=S(t,["usageMetadata"]);return a!=null&&N(e,["usageMetadata"],a),e}function htt(t,e){const n={},r=S(e,["name"]);return r!=null&&N(n,["_url","name"],av(t,r)),n}function ptt(t,e){const n={},r=S(e,["name"]);return r!=null&&N(n,["_url","name"],av(t,r)),n}function mtt(t){const e={};if(S(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=S(t,["enableWidget"]);return n!=null&&N(e,["enableWidget"],n),e}function gtt(t){const e={};if(S(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(S(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=S(t,["timeRangeFilter"]);return n!=null&&N(e,["timeRangeFilter"],n),e}function ytt(t){const e={},n=S(t,["aspectRatio"]);n!=null&&N(e,["aspectRatio"],n);const r=S(t,["imageSize"]);if(r!=null&&N(e,["imageSize"],r),S(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(S(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function xtt(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["request","model"],$n(t,r));const i=S(e,["contents"]);if(i!=null){let a=Fa(i);Array.isArray(a)&&(a=a.map(l=>Zfe(l))),N(n,["request","contents"],a)}const s=S(e,["metadata"]);s!=null&&N(n,["metadata"],s);const o=S(e,["config"]);return o!=null&&N(n,["request","generationConfig"],dtt(t,o,S(n,["request"],{}))),n}function vtt(t){const e={},n=S(t,["response"]);n!=null&&N(e,["response"],ftt(n));const r=S(t,["error"]);return r!=null&&N(e,["error"],r),e}function btt(t,e){const n={},r=S(t,["pageSize"]);e!==void 0&&r!=null&&N(e,["_query","pageSize"],r);const i=S(t,["pageToken"]);if(e!==void 0&&i!=null&&N(e,["_query","pageToken"],i),S(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function wtt(t,e){const n={},r=S(t,["pageSize"]);e!==void 0&&r!=null&&N(e,["_query","pageSize"],r);const i=S(t,["pageToken"]);e!==void 0&&i!=null&&N(e,["_query","pageToken"],i);const s=S(t,["filter"]);return e!==void 0&&s!=null&&N(e,["_query","filter"],s),n}function Ett(t){const e={},n=S(t,["config"]);return n!=null&&btt(n,e),e}function Stt(t){const e={},n=S(t,["config"]);return n!=null&&wtt(n,e),e}function Att(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["nextPageToken"]);r!=null&&N(e,["nextPageToken"],r);const i=S(t,["operations"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>AT(o))),N(e,["batchJobs"],s)}return e}function Ttt(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["nextPageToken"]);r!=null&&N(e,["nextPageToken"],r);const i=S(t,["batchPredictionJobs"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>jD(o))),N(e,["batchJobs"],s)}return e}function ktt(t){const e={},n=S(t,["mediaResolution"]);n!=null&&N(e,["mediaResolution"],n);const r=S(t,["codeExecutionResult"]);r!=null&&N(e,["codeExecutionResult"],r);const i=S(t,["executableCode"]);i!=null&&N(e,["executableCode"],i);const s=S(t,["fileData"]);s!=null&&N(e,["fileData"],ltt(s));const o=S(t,["functionCall"]);o!=null&&N(e,["functionCall"],ctt(o));const a=S(t,["functionResponse"]);a!=null&&N(e,["functionResponse"],a);const l=S(t,["inlineData"]);l!=null&&N(e,["inlineData"],qet(l));const c=S(t,["text"]);c!=null&&N(e,["text"],c);const u=S(t,["thought"]);u!=null&&N(e,["thought"],u);const f=S(t,["thoughtSignature"]);f!=null&&N(e,["thoughtSignature"],f);const m=S(t,["videoMetadata"]);return m!=null&&N(e,["videoMetadata"],m),e}function Ctt(t){const e={},n=S(t,["category"]);if(n!=null&&N(e,["category"],n),S(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=S(t,["threshold"]);return r!=null&&N(e,["threshold"],r),e}function Ntt(t){const e={},n=S(t,["functionCallingConfig"]);n!=null&&N(e,["functionCallingConfig"],utt(n));const r=S(t,["retrievalConfig"]);return r!=null&&N(e,["retrievalConfig"],r),e}function _tt(t){const e={},n=S(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(f=>f)),N(e,["functionDeclarations"],u)}if(S(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=S(t,["googleSearchRetrieval"]);r!=null&&N(e,["googleSearchRetrieval"],r);const i=S(t,["computerUse"]);i!=null&&N(e,["computerUse"],i);const s=S(t,["fileSearch"]);s!=null&&N(e,["fileSearch"],s);const o=S(t,["codeExecution"]);if(o!=null&&N(e,["codeExecution"],o),S(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=S(t,["googleMaps"]);a!=null&&N(e,["googleMaps"],mtt(a));const l=S(t,["googleSearch"]);l!=null&&N(e,["googleSearch"],gtt(l));const c=S(t,["urlContext"]);return c!=null&&N(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var bd;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(bd||(bd={}));class Fm{constructor(e,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,i)}init(e,n,r){var i,s;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let o={config:{}};!r||Object.keys(r).length===0?o={config:{}}:typeof r=="object"?o=Object.assign({},r):o=r,o.config&&(o.config.pageToken=n.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(s=(i=o.config)===null||i===void 0?void 0:i.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Itt extends Od{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Fm(bd.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=mQ(this.apiClient,e),r=n._url,i=xt("{model}:batchGenerateContent",r),a=n.batch.inputConfig.requests,l=a.requests,c=[];for(const u of l){const f=Object.assign({},u);if(f.systemInstruction){const m=f.systemInstruction;delete f.systemInstruction;const g=f.request;g.systemInstruction=m,f.request=g}c.push(f)}return a.requests=c,delete n.config,delete n._url,delete n._query,{path:i,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},i=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${i}`),r.dest===void 0){const s=this.getGcsUri(e),o=this.getBigqueryUri(e);if(s)s.endsWith(".jsonl")?r.dest=`${s.slice(0,-6)}/dest`:r.dest=`${s}_dest_${i}`;else if(o)r.dest=`${o}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Qet(this.apiClient,e);return a=xt("batchPredictionJobs",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>jD(u))}else{const c=mQ(this.apiClient,e);return a=xt("{model}:batchGenerateContent",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>AT(u))}}async createEmbeddingsInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=ett(this.apiClient,e);return s=xt("{model}:asyncBatchEmbedContent",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>AT(l))}}async get(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=ptt(this.apiClient,e);return a=xt("batchPredictionJobs/{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>jD(u))}else{const c=htt(this.apiClient,e);return a=xt("batches/{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>AT(u))}}async cancel(e){var n,r,i,s;let o="",a={};if(this.apiClient.isVertexAI()){const l=Ket(this.apiClient,e);o=xt("batchPredictionJobs/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const l=Get(this.apiClient,e);o=xt("batches/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Stt(e);return a=xt("batchPredictionJobs",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const f=Ttt(u),m=new dQ;return Object.assign(m,f),m})}else{const c=Ett(e);return a=xt("batches",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const f=Att(u),m=new dQ;return Object.assign(m,f),m})}}async delete(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=ntt(this.apiClient,e);return a=xt("batchPredictionJobs/{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>itt(u))}else{const c=ttt(this.apiClient,e);return a=xt("batches/{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>rtt(u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ptt(t){const e={},n=S(t,["data"]);if(n!=null&&N(e,["data"],n),S(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=S(t,["mimeType"]);return r!=null&&N(e,["mimeType"],r),e}function gQ(t){const e={},n=S(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>ent(s))),N(e,["parts"],i)}const r=S(t,["role"]);return r!=null&&N(e,["role"],r),e}function Rtt(t,e){const n={},r=S(t,["ttl"]);e!==void 0&&r!=null&&N(e,["ttl"],r);const i=S(t,["expireTime"]);e!==void 0&&i!=null&&N(e,["expireTime"],i);const s=S(t,["displayName"]);e!==void 0&&s!=null&&N(e,["displayName"],s);const o=S(t,["contents"]);if(e!==void 0&&o!=null){let u=Fa(o);Array.isArray(u)&&(u=u.map(f=>gQ(f))),N(e,["contents"],u)}const a=S(t,["systemInstruction"]);e!==void 0&&a!=null&&N(e,["systemInstruction"],gQ(_s(a)));const l=S(t,["tools"]);if(e!==void 0&&l!=null){let u=l;Array.isArray(u)&&(u=u.map(f=>nnt(f))),N(e,["tools"],u)}const c=S(t,["toolConfig"]);if(e!==void 0&&c!=null&&N(e,["toolConfig"],tnt(c)),S(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function Ott(t,e){const n={},r=S(t,["ttl"]);e!==void 0&&r!=null&&N(e,["ttl"],r);const i=S(t,["expireTime"]);e!==void 0&&i!=null&&N(e,["expireTime"],i);const s=S(t,["displayName"]);e!==void 0&&s!=null&&N(e,["displayName"],s);const o=S(t,["contents"]);if(e!==void 0&&o!=null){let f=Fa(o);Array.isArray(f)&&(f=f.map(m=>m)),N(e,["contents"],f)}const a=S(t,["systemInstruction"]);e!==void 0&&a!=null&&N(e,["systemInstruction"],_s(a));const l=S(t,["tools"]);if(e!==void 0&&l!=null){let f=l;Array.isArray(f)&&(f=f.map(m=>rnt(m))),N(e,["tools"],f)}const c=S(t,["toolConfig"]);e!==void 0&&c!=null&&N(e,["toolConfig"],c);const u=S(t,["kmsKeyName"]);return e!==void 0&&u!=null&&N(e,["encryption_spec","kmsKeyName"],u),n}function Mtt(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["model"],$fe(t,r));const i=S(e,["config"]);return i!=null&&Rtt(i,n),n}function Dtt(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["model"],$fe(t,r));const i=S(e,["config"]);return i!=null&&Ott(i,n),n}function Ltt(t,e){const n={},r=S(e,["name"]);return r!=null&&N(n,["_url","name"],Md(t,r)),n}function jtt(t,e){const n={},r=S(e,["name"]);return r!=null&&N(n,["_url","name"],Md(t,r)),n}function Btt(t){const e={},n=S(t,["sdkHttpResponse"]);return n!=null&&N(e,["sdkHttpResponse"],n),e}function Utt(t){const e={},n=S(t,["sdkHttpResponse"]);return n!=null&&N(e,["sdkHttpResponse"],n),e}function Ftt(t){const e={};if(S(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=S(t,["fileUri"]);n!=null&&N(e,["fileUri"],n);const r=S(t,["mimeType"]);return r!=null&&N(e,["mimeType"],r),e}function $tt(t){const e={},n=S(t,["id"]);n!=null&&N(e,["id"],n);const r=S(t,["args"]);r!=null&&N(e,["args"],r);const i=S(t,["name"]);if(i!=null&&N(e,["name"],i),S(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(S(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function ztt(t){const e={},n=S(t,["mode"]);n!=null&&N(e,["mode"],n);const r=S(t,["allowedFunctionNames"]);if(r!=null&&N(e,["allowedFunctionNames"],r),S(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Htt(t){const e={};if(S(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=S(t,["description"]);n!=null&&N(e,["description"],n);const r=S(t,["name"]);r!=null&&N(e,["name"],r);const i=S(t,["parameters"]);i!=null&&N(e,["parameters"],i);const s=S(t,["parametersJsonSchema"]);s!=null&&N(e,["parametersJsonSchema"],s);const o=S(t,["response"]);o!=null&&N(e,["response"],o);const a=S(t,["responseJsonSchema"]);return a!=null&&N(e,["responseJsonSchema"],a),e}function Vtt(t,e){const n={},r=S(e,["name"]);return r!=null&&N(n,["_url","name"],Md(t,r)),n}function qtt(t,e){const n={},r=S(e,["name"]);return r!=null&&N(n,["_url","name"],Md(t,r)),n}function Gtt(t){const e={};if(S(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=S(t,["enableWidget"]);return n!=null&&N(e,["enableWidget"],n),e}function Ktt(t){const e={};if(S(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(S(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=S(t,["timeRangeFilter"]);return n!=null&&N(e,["timeRangeFilter"],n),e}function Wtt(t,e){const n={},r=S(t,["pageSize"]);e!==void 0&&r!=null&&N(e,["_query","pageSize"],r);const i=S(t,["pageToken"]);return e!==void 0&&i!=null&&N(e,["_query","pageToken"],i),n}function Ytt(t,e){const n={},r=S(t,["pageSize"]);e!==void 0&&r!=null&&N(e,["_query","pageSize"],r);const i=S(t,["pageToken"]);return e!==void 0&&i!=null&&N(e,["_query","pageToken"],i),n}function Jtt(t){const e={},n=S(t,["config"]);return n!=null&&Wtt(n,e),e}function Xtt(t){const e={},n=S(t,["config"]);return n!=null&&Ytt(n,e),e}function Qtt(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["nextPageToken"]);r!=null&&N(e,["nextPageToken"],r);const i=S(t,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),N(e,["cachedContents"],s)}return e}function Ztt(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["nextPageToken"]);r!=null&&N(e,["nextPageToken"],r);const i=S(t,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),N(e,["cachedContents"],s)}return e}function ent(t){const e={},n=S(t,["mediaResolution"]);n!=null&&N(e,["mediaResolution"],n);const r=S(t,["codeExecutionResult"]);r!=null&&N(e,["codeExecutionResult"],r);const i=S(t,["executableCode"]);i!=null&&N(e,["executableCode"],i);const s=S(t,["fileData"]);s!=null&&N(e,["fileData"],Ftt(s));const o=S(t,["functionCall"]);o!=null&&N(e,["functionCall"],$tt(o));const a=S(t,["functionResponse"]);a!=null&&N(e,["functionResponse"],a);const l=S(t,["inlineData"]);l!=null&&N(e,["inlineData"],Ptt(l));const c=S(t,["text"]);c!=null&&N(e,["text"],c);const u=S(t,["thought"]);u!=null&&N(e,["thought"],u);const f=S(t,["thoughtSignature"]);f!=null&&N(e,["thoughtSignature"],f);const m=S(t,["videoMetadata"]);return m!=null&&N(e,["videoMetadata"],m),e}function tnt(t){const e={},n=S(t,["functionCallingConfig"]);n!=null&&N(e,["functionCallingConfig"],ztt(n));const r=S(t,["retrievalConfig"]);return r!=null&&N(e,["retrievalConfig"],r),e}function nnt(t){const e={},n=S(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(f=>f)),N(e,["functionDeclarations"],u)}if(S(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=S(t,["googleSearchRetrieval"]);r!=null&&N(e,["googleSearchRetrieval"],r);const i=S(t,["computerUse"]);i!=null&&N(e,["computerUse"],i);const s=S(t,["fileSearch"]);s!=null&&N(e,["fileSearch"],s);const o=S(t,["codeExecution"]);if(o!=null&&N(e,["codeExecution"],o),S(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=S(t,["googleMaps"]);a!=null&&N(e,["googleMaps"],Gtt(a));const l=S(t,["googleSearch"]);l!=null&&N(e,["googleSearch"],Ktt(l));const c=S(t,["urlContext"]);return c!=null&&N(e,["urlContext"],c),e}function rnt(t){const e={},n=S(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(m=>Htt(m))),N(e,["functionDeclarations"],f)}const r=S(t,["retrieval"]);r!=null&&N(e,["retrieval"],r);const i=S(t,["googleSearchRetrieval"]);i!=null&&N(e,["googleSearchRetrieval"],i);const s=S(t,["computerUse"]);if(s!=null&&N(e,["computerUse"],s),S(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=S(t,["codeExecution"]);o!=null&&N(e,["codeExecution"],o);const a=S(t,["enterpriseWebSearch"]);a!=null&&N(e,["enterpriseWebSearch"],a);const l=S(t,["googleMaps"]);l!=null&&N(e,["googleMaps"],l);const c=S(t,["googleSearch"]);c!=null&&N(e,["googleSearch"],c);const u=S(t,["urlContext"]);return u!=null&&N(e,["urlContext"],u),e}function int(t,e){const n={},r=S(t,["ttl"]);e!==void 0&&r!=null&&N(e,["ttl"],r);const i=S(t,["expireTime"]);return e!==void 0&&i!=null&&N(e,["expireTime"],i),n}function snt(t,e){const n={},r=S(t,["ttl"]);e!==void 0&&r!=null&&N(e,["ttl"],r);const i=S(t,["expireTime"]);return e!==void 0&&i!=null&&N(e,["expireTime"],i),n}function ont(t,e){const n={},r=S(e,["name"]);r!=null&&N(n,["_url","name"],Md(t,r));const i=S(e,["config"]);return i!=null&&int(i,n),n}function ant(t,e){const n={},r=S(e,["name"]);r!=null&&N(n,["_url","name"],Md(t,r));const i=S(e,["config"]);return i!=null&&snt(i,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lnt extends Od{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Fm(bd.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Dtt(this.apiClient,e);return a=xt("cachedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>u)}else{const c=Mtt(this.apiClient,e);return a=xt("cachedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>u)}}async get(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=qtt(this.apiClient,e);return a=xt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>u)}else{const c=Vtt(this.apiClient,e);return a=xt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>u)}}async delete(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=jtt(this.apiClient,e);return a=xt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const f=Utt(u),m=new cQ;return Object.assign(m,f),m})}else{const c=Ltt(this.apiClient,e);return a=xt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const f=Btt(u),m=new cQ;return Object.assign(m,f),m})}}async update(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=ant(this.apiClient,e);return a=xt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>u)}else{const c=ont(this.apiClient,e);return a=xt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>u)}}async listInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Xtt(e);return a=xt("cachedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const f=Ztt(u),m=new uQ;return Object.assign(m,f),m})}else{const c=Jtt(e);return a=xt("cachedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const f=Qtt(u),m=new uQ;return Object.assign(m,f),m})}}}function wC(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function yQ(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function tn(t){return this instanceof tn?(this.v=t,this):new tn(t)}function Cl(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(g){return function(v){return Promise.resolve(v).then(g,f)}}function a(g,v){r[g]&&(i[g]=function(x){return new Promise(function(b,E){s.push([g,x,b,E])>1||l(g,x)})},v&&(i[g]=v(i[g])))}function l(g,v){try{c(r[g](v))}catch(x){m(s[0][3],x)}}function c(g){g.value instanceof tn?Promise.resolve(g.value.v).then(u,f):m(s[0][2],g)}function u(g){l("next",g)}function f(g){l("throw",g)}function m(g,v){g(v),s.shift(),s.length&&l(s[0][0],s[0][1])}}function Nl(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof yQ=="function"?yQ(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,l){o=t[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cnt(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:ehe(n)}function ehe(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function unt(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function xQ(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const i=[];let s=!0;for(;r<n&&t[r].role==="model";)i.push(t[r]),s&&!ehe(t[r])&&(s=!1),r++;s?e.push(...i):e.pop()}return e}class dnt{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new fnt(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class fnt{constructor(e,n,r,i={},s=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=i,this.history=s,this.sendPromise=Promise.resolve(),unt(s)}async sendMessage(e){var n;await this.sendPromise;const r=_s(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var s,o,a;const l=await i,c=(o=(s=l.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content,u=l.automaticFunctionCallingHistory,f=this.getHistory(!0).length;let m=[];u!=null&&(m=(a=u.slice(f))!==null&&a!==void 0?a:[]);const g=c?[c]:[];this.recordHistory(r,g,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;const r=_s(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const s=await i;return this.processStreamResponse(s,r)}getHistory(e=!1){const n=e?xQ(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return Cl(this,arguments,function*(){var i,s,o,a,l,c;const u=[];try{for(var f=!0,m=Nl(e),g;g=yield tn(m.next()),i=g.done,!i;f=!0){a=g.value,f=!1;const v=a;if(cnt(v)){const x=(c=(l=v.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content;x!==void 0&&u.push(x)}yield yield tn(v)}}catch(v){s={error:v}}finally{try{!f&&!i&&(o=m.return)&&(yield tn(o.call(m)))}finally{if(s)throw s.error}}this.recordHistory(n,u)})}recordHistory(e,n,r){let i=[];n.length>0&&n.every(s=>s.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...xQ(r)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ON extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,ON.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hnt(t){const e={},n=S(t,["file"]);return n!=null&&N(e,["file"],n),e}function pnt(t){const e={},n=S(t,["sdkHttpResponse"]);return n!=null&&N(e,["sdkHttpResponse"],n),e}function mnt(t){const e={},n=S(t,["name"]);return n!=null&&N(e,["_url","file"],Kfe(n)),e}function gnt(t){const e={},n=S(t,["sdkHttpResponse"]);return n!=null&&N(e,["sdkHttpResponse"],n),e}function ynt(t){const e={},n=S(t,["name"]);return n!=null&&N(e,["_url","file"],Kfe(n)),e}function xnt(t,e){const n={},r=S(t,["pageSize"]);e!==void 0&&r!=null&&N(e,["_query","pageSize"],r);const i=S(t,["pageToken"]);return e!==void 0&&i!=null&&N(e,["_query","pageToken"],i),n}function vnt(t){const e={},n=S(t,["config"]);return n!=null&&xnt(n,e),e}function bnt(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["nextPageToken"]);r!=null&&N(e,["nextPageToken"],r);const i=S(t,["files"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),N(e,["files"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wnt extends Od{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Fm(bd.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=vnt(e);return s=xt("files",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),i.then(l=>{const c=bnt(l),u=new Tet;return Object.assign(u,c),u})}}async createInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=hnt(e);return s=xt("upload/v1beta/files",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=pnt(l),u=new ket;return Object.assign(u,c),u})}}async get(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=ynt(e);return s=xt("files/{file}",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=mnt(e);return s=xt("files/{file}",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),i.then(l=>{const c=gnt(l),u=new Cet;return Object.assign(u,c),u})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function TT(t){const e={},n=S(t,["data"]);if(n!=null&&N(e,["data"],n),S(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=S(t,["mimeType"]);return r!=null&&N(e,["mimeType"],r),e}function Ent(t){const e={},n=S(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>Bnt(s))),N(e,["parts"],i)}const r=S(t,["role"]);return r!=null&&N(e,["role"],r),e}function Snt(t){const e={};if(S(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=S(t,["fileUri"]);n!=null&&N(e,["fileUri"],n);const r=S(t,["mimeType"]);return r!=null&&N(e,["mimeType"],r),e}function Ant(t){const e={},n=S(t,["id"]);n!=null&&N(e,["id"],n);const r=S(t,["args"]);r!=null&&N(e,["args"],r);const i=S(t,["name"]);if(i!=null&&N(e,["name"],i),S(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(S(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Tnt(t){const e={};if(S(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=S(t,["description"]);n!=null&&N(e,["description"],n);const r=S(t,["name"]);r!=null&&N(e,["name"],r);const i=S(t,["parameters"]);i!=null&&N(e,["parameters"],i);const s=S(t,["parametersJsonSchema"]);s!=null&&N(e,["parametersJsonSchema"],s);const o=S(t,["response"]);o!=null&&N(e,["response"],o);const a=S(t,["responseJsonSchema"]);return a!=null&&N(e,["responseJsonSchema"],a),e}function knt(t){const e={},n=S(t,["modelSelectionConfig"]);n!=null&&N(e,["modelConfig"],n);const r=S(t,["responseJsonSchema"]);r!=null&&N(e,["responseJsonSchema"],r);const i=S(t,["audioTimestamp"]);i!=null&&N(e,["audioTimestamp"],i);const s=S(t,["candidateCount"]);s!=null&&N(e,["candidateCount"],s);const o=S(t,["enableAffectiveDialog"]);o!=null&&N(e,["enableAffectiveDialog"],o);const a=S(t,["frequencyPenalty"]);a!=null&&N(e,["frequencyPenalty"],a);const l=S(t,["logprobs"]);l!=null&&N(e,["logprobs"],l);const c=S(t,["maxOutputTokens"]);c!=null&&N(e,["maxOutputTokens"],c);const u=S(t,["mediaResolution"]);u!=null&&N(e,["mediaResolution"],u);const f=S(t,["presencePenalty"]);f!=null&&N(e,["presencePenalty"],f);const m=S(t,["responseLogprobs"]);m!=null&&N(e,["responseLogprobs"],m);const g=S(t,["responseMimeType"]);g!=null&&N(e,["responseMimeType"],g);const v=S(t,["responseModalities"]);v!=null&&N(e,["responseModalities"],v);const x=S(t,["responseSchema"]);x!=null&&N(e,["responseSchema"],x);const b=S(t,["routingConfig"]);b!=null&&N(e,["routingConfig"],b);const E=S(t,["seed"]);E!=null&&N(e,["seed"],E);const C=S(t,["speechConfig"]);C!=null&&N(e,["speechConfig"],C);const k=S(t,["stopSequences"]);k!=null&&N(e,["stopSequences"],k);const O=S(t,["temperature"]);O!=null&&N(e,["temperature"],O);const U=S(t,["thinkingConfig"]);U!=null&&N(e,["thinkingConfig"],U);const R=S(t,["topK"]);R!=null&&N(e,["topK"],R);const $=S(t,["topP"]);if($!=null&&N(e,["topP"],$),S(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Cnt(t){const e={};if(S(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=S(t,["enableWidget"]);return n!=null&&N(e,["enableWidget"],n),e}function Nnt(t){const e={};if(S(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(S(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=S(t,["timeRangeFilter"]);return n!=null&&N(e,["timeRangeFilter"],n),e}function _nt(t,e){const n={},r=S(t,["generationConfig"]);e!==void 0&&r!=null&&N(e,["setup","generationConfig"],r);const i=S(t,["responseModalities"]);e!==void 0&&i!=null&&N(e,["setup","generationConfig","responseModalities"],i);const s=S(t,["temperature"]);e!==void 0&&s!=null&&N(e,["setup","generationConfig","temperature"],s);const o=S(t,["topP"]);e!==void 0&&o!=null&&N(e,["setup","generationConfig","topP"],o);const a=S(t,["topK"]);e!==void 0&&a!=null&&N(e,["setup","generationConfig","topK"],a);const l=S(t,["maxOutputTokens"]);e!==void 0&&l!=null&&N(e,["setup","generationConfig","maxOutputTokens"],l);const c=S(t,["mediaResolution"]);e!==void 0&&c!=null&&N(e,["setup","generationConfig","mediaResolution"],c);const u=S(t,["seed"]);e!==void 0&&u!=null&&N(e,["setup","generationConfig","seed"],u);const f=S(t,["speechConfig"]);e!==void 0&&f!=null&&N(e,["setup","generationConfig","speechConfig"],NB(f));const m=S(t,["thinkingConfig"]);e!==void 0&&m!=null&&N(e,["setup","generationConfig","thinkingConfig"],m);const g=S(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&N(e,["setup","generationConfig","enableAffectiveDialog"],g);const v=S(t,["systemInstruction"]);e!==void 0&&v!=null&&N(e,["setup","systemInstruction"],Ent(_s(v)));const x=S(t,["tools"]);if(e!==void 0&&x!=null){let R=ov(x);Array.isArray(R)&&(R=R.map($=>Fnt(sv($)))),N(e,["setup","tools"],R)}const b=S(t,["sessionResumption"]);e!==void 0&&b!=null&&N(e,["setup","sessionResumption"],Unt(b));const E=S(t,["inputAudioTranscription"]);e!==void 0&&E!=null&&N(e,["setup","inputAudioTranscription"],E);const C=S(t,["outputAudioTranscription"]);e!==void 0&&C!=null&&N(e,["setup","outputAudioTranscription"],C);const k=S(t,["realtimeInputConfig"]);e!==void 0&&k!=null&&N(e,["setup","realtimeInputConfig"],k);const O=S(t,["contextWindowCompression"]);e!==void 0&&O!=null&&N(e,["setup","contextWindowCompression"],O);const U=S(t,["proactivity"]);if(e!==void 0&&U!=null&&N(e,["setup","proactivity"],U),S(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function Int(t,e){const n={},r=S(t,["generationConfig"]);e!==void 0&&r!=null&&N(e,["setup","generationConfig"],knt(r));const i=S(t,["responseModalities"]);e!==void 0&&i!=null&&N(e,["setup","generationConfig","responseModalities"],i);const s=S(t,["temperature"]);e!==void 0&&s!=null&&N(e,["setup","generationConfig","temperature"],s);const o=S(t,["topP"]);e!==void 0&&o!=null&&N(e,["setup","generationConfig","topP"],o);const a=S(t,["topK"]);e!==void 0&&a!=null&&N(e,["setup","generationConfig","topK"],a);const l=S(t,["maxOutputTokens"]);e!==void 0&&l!=null&&N(e,["setup","generationConfig","maxOutputTokens"],l);const c=S(t,["mediaResolution"]);e!==void 0&&c!=null&&N(e,["setup","generationConfig","mediaResolution"],c);const u=S(t,["seed"]);e!==void 0&&u!=null&&N(e,["setup","generationConfig","seed"],u);const f=S(t,["speechConfig"]);e!==void 0&&f!=null&&N(e,["setup","generationConfig","speechConfig"],NB(f));const m=S(t,["thinkingConfig"]);e!==void 0&&m!=null&&N(e,["setup","generationConfig","thinkingConfig"],m);const g=S(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&N(e,["setup","generationConfig","enableAffectiveDialog"],g);const v=S(t,["systemInstruction"]);e!==void 0&&v!=null&&N(e,["setup","systemInstruction"],_s(v));const x=S(t,["tools"]);if(e!==void 0&&x!=null){let $=ov(x);Array.isArray($)&&($=$.map(V=>$nt(sv(V)))),N(e,["setup","tools"],$)}const b=S(t,["sessionResumption"]);e!==void 0&&b!=null&&N(e,["setup","sessionResumption"],b);const E=S(t,["inputAudioTranscription"]);e!==void 0&&E!=null&&N(e,["setup","inputAudioTranscription"],E);const C=S(t,["outputAudioTranscription"]);e!==void 0&&C!=null&&N(e,["setup","outputAudioTranscription"],C);const k=S(t,["realtimeInputConfig"]);e!==void 0&&k!=null&&N(e,["setup","realtimeInputConfig"],k);const O=S(t,["contextWindowCompression"]);e!==void 0&&O!=null&&N(e,["setup","contextWindowCompression"],O);const U=S(t,["proactivity"]);e!==void 0&&U!=null&&N(e,["setup","proactivity"],U);const R=S(t,["explicitVadSignal"]);return e!==void 0&&R!=null&&N(e,["setup","explicitVadSignal"],R),n}function Pnt(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["setup","model"],$n(t,r));const i=S(e,["config"]);return i!=null&&N(n,["config"],_nt(i,n)),n}function Rnt(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["setup","model"],$n(t,r));const i=S(e,["config"]);return i!=null&&N(n,["config"],Int(i,n)),n}function Ont(t){const e={},n=S(t,["musicGenerationConfig"]);return n!=null&&N(e,["musicGenerationConfig"],n),e}function Mnt(t){const e={},n=S(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),N(e,["weightedPrompts"],r)}return e}function Dnt(t){const e={},n=S(t,["media"]);if(n!=null){let c=zfe(n);Array.isArray(c)&&(c=c.map(u=>TT(u))),N(e,["mediaChunks"],c)}const r=S(t,["audio"]);r!=null&&N(e,["audio"],TT(Vfe(r)));const i=S(t,["audioStreamEnd"]);i!=null&&N(e,["audioStreamEnd"],i);const s=S(t,["video"]);s!=null&&N(e,["video"],TT(Hfe(s)));const o=S(t,["text"]);o!=null&&N(e,["text"],o);const a=S(t,["activityStart"]);a!=null&&N(e,["activityStart"],a);const l=S(t,["activityEnd"]);return l!=null&&N(e,["activityEnd"],l),e}function Lnt(t){const e={},n=S(t,["media"]);if(n!=null){let c=zfe(n);Array.isArray(c)&&(c=c.map(u=>u)),N(e,["mediaChunks"],c)}const r=S(t,["audio"]);r!=null&&N(e,["audio"],Vfe(r));const i=S(t,["audioStreamEnd"]);i!=null&&N(e,["audioStreamEnd"],i);const s=S(t,["video"]);s!=null&&N(e,["video"],Hfe(s));const o=S(t,["text"]);o!=null&&N(e,["text"],o);const a=S(t,["activityStart"]);a!=null&&N(e,["activityStart"],a);const l=S(t,["activityEnd"]);return l!=null&&N(e,["activityEnd"],l),e}function jnt(t){const e={},n=S(t,["setupComplete"]);n!=null&&N(e,["setupComplete"],n);const r=S(t,["serverContent"]);r!=null&&N(e,["serverContent"],r);const i=S(t,["toolCall"]);i!=null&&N(e,["toolCall"],i);const s=S(t,["toolCallCancellation"]);s!=null&&N(e,["toolCallCancellation"],s);const o=S(t,["usageMetadata"]);o!=null&&N(e,["usageMetadata"],znt(o));const a=S(t,["goAway"]);a!=null&&N(e,["goAway"],a);const l=S(t,["sessionResumptionUpdate"]);l!=null&&N(e,["sessionResumptionUpdate"],l);const c=S(t,["voiceActivityDetectionSignal"]);return c!=null&&N(e,["voiceActivityDetectionSignal"],c),e}function Bnt(t){const e={},n=S(t,["mediaResolution"]);n!=null&&N(e,["mediaResolution"],n);const r=S(t,["codeExecutionResult"]);r!=null&&N(e,["codeExecutionResult"],r);const i=S(t,["executableCode"]);i!=null&&N(e,["executableCode"],i);const s=S(t,["fileData"]);s!=null&&N(e,["fileData"],Snt(s));const o=S(t,["functionCall"]);o!=null&&N(e,["functionCall"],Ant(o));const a=S(t,["functionResponse"]);a!=null&&N(e,["functionResponse"],a);const l=S(t,["inlineData"]);l!=null&&N(e,["inlineData"],TT(l));const c=S(t,["text"]);c!=null&&N(e,["text"],c);const u=S(t,["thought"]);u!=null&&N(e,["thought"],u);const f=S(t,["thoughtSignature"]);f!=null&&N(e,["thoughtSignature"],f);const m=S(t,["videoMetadata"]);return m!=null&&N(e,["videoMetadata"],m),e}function Unt(t){const e={},n=S(t,["handle"]);if(n!=null&&N(e,["handle"],n),S(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Fnt(t){const e={},n=S(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(f=>f)),N(e,["functionDeclarations"],u)}if(S(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=S(t,["googleSearchRetrieval"]);r!=null&&N(e,["googleSearchRetrieval"],r);const i=S(t,["computerUse"]);i!=null&&N(e,["computerUse"],i);const s=S(t,["fileSearch"]);s!=null&&N(e,["fileSearch"],s);const o=S(t,["codeExecution"]);if(o!=null&&N(e,["codeExecution"],o),S(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=S(t,["googleMaps"]);a!=null&&N(e,["googleMaps"],Cnt(a));const l=S(t,["googleSearch"]);l!=null&&N(e,["googleSearch"],Nnt(l));const c=S(t,["urlContext"]);return c!=null&&N(e,["urlContext"],c),e}function $nt(t){const e={},n=S(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(m=>Tnt(m))),N(e,["functionDeclarations"],f)}const r=S(t,["retrieval"]);r!=null&&N(e,["retrieval"],r);const i=S(t,["googleSearchRetrieval"]);i!=null&&N(e,["googleSearchRetrieval"],i);const s=S(t,["computerUse"]);if(s!=null&&N(e,["computerUse"],s),S(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=S(t,["codeExecution"]);o!=null&&N(e,["codeExecution"],o);const a=S(t,["enterpriseWebSearch"]);a!=null&&N(e,["enterpriseWebSearch"],a);const l=S(t,["googleMaps"]);l!=null&&N(e,["googleMaps"],l);const c=S(t,["googleSearch"]);c!=null&&N(e,["googleSearch"],c);const u=S(t,["urlContext"]);return u!=null&&N(e,["urlContext"],u),e}function znt(t){const e={},n=S(t,["promptTokenCount"]);n!=null&&N(e,["promptTokenCount"],n);const r=S(t,["cachedContentTokenCount"]);r!=null&&N(e,["cachedContentTokenCount"],r);const i=S(t,["candidatesTokenCount"]);i!=null&&N(e,["responseTokenCount"],i);const s=S(t,["toolUsePromptTokenCount"]);s!=null&&N(e,["toolUsePromptTokenCount"],s);const o=S(t,["thoughtsTokenCount"]);o!=null&&N(e,["thoughtsTokenCount"],o);const a=S(t,["totalTokenCount"]);a!=null&&N(e,["totalTokenCount"],a);const l=S(t,["promptTokensDetails"]);if(l!=null){let g=l;Array.isArray(g)&&(g=g.map(v=>v)),N(e,["promptTokensDetails"],g)}const c=S(t,["cacheTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(v=>v)),N(e,["cacheTokensDetails"],g)}const u=S(t,["candidatesTokensDetails"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(v=>v)),N(e,["responseTokensDetails"],g)}const f=S(t,["toolUsePromptTokensDetails"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(v=>v)),N(e,["toolUsePromptTokensDetails"],g)}const m=S(t,["trafficType"]);return m!=null&&N(e,["trafficType"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Hnt(t){const e={},n=S(t,["data"]);if(n!=null&&N(e,["data"],n),S(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=S(t,["mimeType"]);return r!=null&&N(e,["mimeType"],r),e}function Vnt(t){const e={},n=S(t,["content"]);n!=null&&N(e,["content"],n);const r=S(t,["citationMetadata"]);r!=null&&N(e,["citationMetadata"],qnt(r));const i=S(t,["tokenCount"]);i!=null&&N(e,["tokenCount"],i);const s=S(t,["finishReason"]);s!=null&&N(e,["finishReason"],s);const o=S(t,["avgLogprobs"]);o!=null&&N(e,["avgLogprobs"],o);const a=S(t,["groundingMetadata"]);a!=null&&N(e,["groundingMetadata"],a);const l=S(t,["index"]);l!=null&&N(e,["index"],l);const c=S(t,["logprobsResult"]);c!=null&&N(e,["logprobsResult"],c);const u=S(t,["safetyRatings"]);if(u!=null){let m=u;Array.isArray(m)&&(m=m.map(g=>g)),N(e,["safetyRatings"],m)}const f=S(t,["urlContextMetadata"]);return f!=null&&N(e,["urlContextMetadata"],f),e}function qnt(t){const e={},n=S(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),N(e,["citations"],r)}return e}function Gnt(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["_url","model"],$n(t,r));const i=S(e,["contents"]);if(i!=null){let s=Fa(i);Array.isArray(s)&&(s=s.map(o=>o)),N(n,["contents"],s)}return n}function Knt(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["tokensInfo"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),N(e,["tokensInfo"],i)}return e}function Wnt(t){const e={},n=S(t,["values"]);n!=null&&N(e,["values"],n);const r=S(t,["statistics"]);return r!=null&&N(e,["statistics"],Ynt(r)),e}function Ynt(t){const e={},n=S(t,["truncated"]);n!=null&&N(e,["truncated"],n);const r=S(t,["token_count"]);return r!=null&&N(e,["tokenCount"],r),e}function MN(t){const e={},n=S(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>iit(s))),N(e,["parts"],i)}const r=S(t,["role"]);return r!=null&&N(e,["role"],r),e}function Jnt(t){const e={},n=S(t,["controlType"]);n!=null&&N(e,["controlType"],n);const r=S(t,["enableControlImageComputation"]);return r!=null&&N(e,["computeControl"],r),e}function Xnt(t){const e={};if(S(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(S(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(S(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Qnt(t,e){const n={},r=S(t,["systemInstruction"]);e!==void 0&&r!=null&&N(e,["systemInstruction"],_s(r));const i=S(t,["tools"]);if(e!==void 0&&i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>ihe(a))),N(e,["tools"],o)}const s=S(t,["generationConfig"]);return e!==void 0&&s!=null&&N(e,["generationConfig"],Hrt(s)),n}function Znt(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["_url","model"],$n(t,r));const i=S(e,["contents"]);if(i!=null){let o=Fa(i);Array.isArray(o)&&(o=o.map(a=>MN(a))),N(n,["contents"],o)}const s=S(e,["config"]);return s!=null&&Xnt(s),n}function ert(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["_url","model"],$n(t,r));const i=S(e,["contents"]);if(i!=null){let o=Fa(i);Array.isArray(o)&&(o=o.map(a=>a)),N(n,["contents"],o)}const s=S(e,["config"]);return s!=null&&Qnt(s,n),n}function trt(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["totalTokens"]);r!=null&&N(e,["totalTokens"],r);const i=S(t,["cachedContentTokenCount"]);return i!=null&&N(e,["cachedContentTokenCount"],i),e}function nrt(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["totalTokens"]);return r!=null&&N(e,["totalTokens"],r),e}function rrt(t,e){const n={},r=S(e,["model"]);return r!=null&&N(n,["_url","name"],$n(t,r)),n}function irt(t,e){const n={},r=S(e,["model"]);return r!=null&&N(n,["_url","name"],$n(t,r)),n}function srt(t){const e={},n=S(t,["sdkHttpResponse"]);return n!=null&&N(e,["sdkHttpResponse"],n),e}function ort(t){const e={},n=S(t,["sdkHttpResponse"]);return n!=null&&N(e,["sdkHttpResponse"],n),e}function art(t,e){const n={},r=S(t,["outputGcsUri"]);e!==void 0&&r!=null&&N(e,["parameters","storageUri"],r);const i=S(t,["negativePrompt"]);e!==void 0&&i!=null&&N(e,["parameters","negativePrompt"],i);const s=S(t,["numberOfImages"]);e!==void 0&&s!=null&&N(e,["parameters","sampleCount"],s);const o=S(t,["aspectRatio"]);e!==void 0&&o!=null&&N(e,["parameters","aspectRatio"],o);const a=S(t,["guidanceScale"]);e!==void 0&&a!=null&&N(e,["parameters","guidanceScale"],a);const l=S(t,["seed"]);e!==void 0&&l!=null&&N(e,["parameters","seed"],l);const c=S(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&N(e,["parameters","safetySetting"],c);const u=S(t,["personGeneration"]);e!==void 0&&u!=null&&N(e,["parameters","personGeneration"],u);const f=S(t,["includeSafetyAttributes"]);e!==void 0&&f!=null&&N(e,["parameters","includeSafetyAttributes"],f);const m=S(t,["includeRaiReason"]);e!==void 0&&m!=null&&N(e,["parameters","includeRaiReason"],m);const g=S(t,["language"]);e!==void 0&&g!=null&&N(e,["parameters","language"],g);const v=S(t,["outputMimeType"]);e!==void 0&&v!=null&&N(e,["parameters","outputOptions","mimeType"],v);const x=S(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&N(e,["parameters","outputOptions","compressionQuality"],x);const b=S(t,["addWatermark"]);e!==void 0&&b!=null&&N(e,["parameters","addWatermark"],b);const E=S(t,["labels"]);e!==void 0&&E!=null&&N(e,["labels"],E);const C=S(t,["editMode"]);e!==void 0&&C!=null&&N(e,["parameters","editMode"],C);const k=S(t,["baseSteps"]);return e!==void 0&&k!=null&&N(e,["parameters","editConfig","baseSteps"],k),n}function lrt(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["_url","model"],$n(t,r));const i=S(e,["prompt"]);i!=null&&N(n,["instances[0]","prompt"],i);const s=S(e,["referenceImages"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>uit(l))),N(n,["instances[0]","referenceImages"],a)}const o=S(e,["config"]);return o!=null&&art(o,n),n}function crt(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>DN(s))),N(e,["generatedImages"],i)}return e}function urt(t,e){const n={},r=S(t,["taskType"]);e!==void 0&&r!=null&&N(e,["requests[]","taskType"],r);const i=S(t,["title"]);e!==void 0&&i!=null&&N(e,["requests[]","title"],i);const s=S(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&N(e,["requests[]","outputDimensionality"],s),S(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(S(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function drt(t,e){const n={},r=S(t,["taskType"]);e!==void 0&&r!=null&&N(e,["instances[]","task_type"],r);const i=S(t,["title"]);e!==void 0&&i!=null&&N(e,["instances[]","title"],i);const s=S(t,["outputDimensionality"]);e!==void 0&&s!=null&&N(e,["parameters","outputDimensionality"],s);const o=S(t,["mimeType"]);e!==void 0&&o!=null&&N(e,["instances[]","mimeType"],o);const a=S(t,["autoTruncate"]);return e!==void 0&&a!=null&&N(e,["parameters","autoTruncate"],a),n}function frt(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["_url","model"],$n(t,r));const i=S(e,["contents"]);if(i!=null){let a=TB(t,i);Array.isArray(a)&&(a=a.map(l=>l)),N(n,["requests[]","content"],a)}const s=S(e,["config"]);s!=null&&urt(s,n);const o=S(e,["model"]);return o!==void 0&&N(n,["requests[]","model"],$n(t,o)),n}function hrt(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["_url","model"],$n(t,r));const i=S(e,["contents"]);if(i!=null){let o=TB(t,i);Array.isArray(o)&&(o=o.map(a=>a)),N(n,["instances[]","content"],o)}const s=S(e,["config"]);return s!=null&&drt(s,n),n}function prt(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["embeddings"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>o)),N(e,["embeddings"],s)}const i=S(t,["metadata"]);return i!=null&&N(e,["metadata"],i),e}function mrt(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["predictions[]","embeddings"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>Wnt(o))),N(e,["embeddings"],s)}const i=S(t,["metadata"]);return i!=null&&N(e,["metadata"],i),e}function grt(t){const e={},n=S(t,["endpoint"]);n!=null&&N(e,["name"],n);const r=S(t,["deployedModelId"]);return r!=null&&N(e,["deployedModelId"],r),e}function yrt(t){const e={};if(S(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=S(t,["fileUri"]);n!=null&&N(e,["fileUri"],n);const r=S(t,["mimeType"]);return r!=null&&N(e,["mimeType"],r),e}function xrt(t){const e={},n=S(t,["id"]);n!=null&&N(e,["id"],n);const r=S(t,["args"]);r!=null&&N(e,["args"],r);const i=S(t,["name"]);if(i!=null&&N(e,["name"],i),S(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(S(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function vrt(t){const e={},n=S(t,["mode"]);n!=null&&N(e,["mode"],n);const r=S(t,["allowedFunctionNames"]);if(r!=null&&N(e,["allowedFunctionNames"],r),S(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function brt(t){const e={};if(S(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=S(t,["description"]);n!=null&&N(e,["description"],n);const r=S(t,["name"]);r!=null&&N(e,["name"],r);const i=S(t,["parameters"]);i!=null&&N(e,["parameters"],i);const s=S(t,["parametersJsonSchema"]);s!=null&&N(e,["parametersJsonSchema"],s);const o=S(t,["response"]);o!=null&&N(e,["response"],o);const a=S(t,["responseJsonSchema"]);return a!=null&&N(e,["responseJsonSchema"],a),e}function wrt(t,e,n){const r={},i=S(e,["systemInstruction"]);n!==void 0&&i!=null&&N(n,["systemInstruction"],MN(_s(i)));const s=S(e,["temperature"]);s!=null&&N(r,["temperature"],s);const o=S(e,["topP"]);o!=null&&N(r,["topP"],o);const a=S(e,["topK"]);a!=null&&N(r,["topK"],a);const l=S(e,["candidateCount"]);l!=null&&N(r,["candidateCount"],l);const c=S(e,["maxOutputTokens"]);c!=null&&N(r,["maxOutputTokens"],c);const u=S(e,["stopSequences"]);u!=null&&N(r,["stopSequences"],u);const f=S(e,["responseLogprobs"]);f!=null&&N(r,["responseLogprobs"],f);const m=S(e,["logprobs"]);m!=null&&N(r,["logprobs"],m);const g=S(e,["presencePenalty"]);g!=null&&N(r,["presencePenalty"],g);const v=S(e,["frequencyPenalty"]);v!=null&&N(r,["frequencyPenalty"],v);const x=S(e,["seed"]);x!=null&&N(r,["seed"],x);const b=S(e,["responseMimeType"]);b!=null&&N(r,["responseMimeType"],b);const E=S(e,["responseSchema"]);E!=null&&N(r,["responseSchema"],kB(E));const C=S(e,["responseJsonSchema"]);if(C!=null&&N(r,["responseJsonSchema"],C),S(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(S(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const k=S(e,["safetySettings"]);if(n!==void 0&&k!=null){let B=k;Array.isArray(B)&&(B=B.map(A=>dit(A))),N(n,["safetySettings"],B)}const O=S(e,["tools"]);if(n!==void 0&&O!=null){let B=ov(O);Array.isArray(B)&&(B=B.map(A=>xit(sv(A)))),N(n,["tools"],B)}const U=S(e,["toolConfig"]);if(n!==void 0&&U!=null&&N(n,["toolConfig"],yit(U)),S(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const R=S(e,["cachedContent"]);n!==void 0&&R!=null&&N(n,["cachedContent"],Md(t,R));const $=S(e,["responseModalities"]);$!=null&&N(r,["responseModalities"],$);const V=S(e,["mediaResolution"]);V!=null&&N(r,["mediaResolution"],V);const j=S(e,["speechConfig"]);if(j!=null&&N(r,["speechConfig"],CB(j)),S(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const F=S(e,["thinkingConfig"]);F!=null&&N(r,["thinkingConfig"],F);const W=S(e,["imageConfig"]);W!=null&&N(r,["imageConfig"],Wrt(W));const H=S(e,["enableEnhancedCivicAnswers"]);return H!=null&&N(r,["enableEnhancedCivicAnswers"],H),r}function Ert(t,e,n){const r={},i=S(e,["systemInstruction"]);n!==void 0&&i!=null&&N(n,["systemInstruction"],_s(i));const s=S(e,["temperature"]);s!=null&&N(r,["temperature"],s);const o=S(e,["topP"]);o!=null&&N(r,["topP"],o);const a=S(e,["topK"]);a!=null&&N(r,["topK"],a);const l=S(e,["candidateCount"]);l!=null&&N(r,["candidateCount"],l);const c=S(e,["maxOutputTokens"]);c!=null&&N(r,["maxOutputTokens"],c);const u=S(e,["stopSequences"]);u!=null&&N(r,["stopSequences"],u);const f=S(e,["responseLogprobs"]);f!=null&&N(r,["responseLogprobs"],f);const m=S(e,["logprobs"]);m!=null&&N(r,["logprobs"],m);const g=S(e,["presencePenalty"]);g!=null&&N(r,["presencePenalty"],g);const v=S(e,["frequencyPenalty"]);v!=null&&N(r,["frequencyPenalty"],v);const x=S(e,["seed"]);x!=null&&N(r,["seed"],x);const b=S(e,["responseMimeType"]);b!=null&&N(r,["responseMimeType"],b);const E=S(e,["responseSchema"]);E!=null&&N(r,["responseSchema"],kB(E));const C=S(e,["responseJsonSchema"]);C!=null&&N(r,["responseJsonSchema"],C);const k=S(e,["routingConfig"]);k!=null&&N(r,["routingConfig"],k);const O=S(e,["modelSelectionConfig"]);O!=null&&N(r,["modelConfig"],O);const U=S(e,["safetySettings"]);if(n!==void 0&&U!=null){let D=U;Array.isArray(D)&&(D=D.map(z=>z)),N(n,["safetySettings"],D)}const R=S(e,["tools"]);if(n!==void 0&&R!=null){let D=ov(R);Array.isArray(D)&&(D=D.map(z=>ihe(sv(z)))),N(n,["tools"],D)}const $=S(e,["toolConfig"]);n!==void 0&&$!=null&&N(n,["toolConfig"],$);const V=S(e,["labels"]);n!==void 0&&V!=null&&N(n,["labels"],V);const j=S(e,["cachedContent"]);n!==void 0&&j!=null&&N(n,["cachedContent"],Md(t,j));const F=S(e,["responseModalities"]);F!=null&&N(r,["responseModalities"],F);const W=S(e,["mediaResolution"]);W!=null&&N(r,["mediaResolution"],W);const H=S(e,["speechConfig"]);H!=null&&N(r,["speechConfig"],CB(H));const B=S(e,["audioTimestamp"]);B!=null&&N(r,["audioTimestamp"],B);const A=S(e,["thinkingConfig"]);A!=null&&N(r,["thinkingConfig"],A);const I=S(e,["imageConfig"]);if(I!=null&&N(r,["imageConfig"],Yrt(I)),S(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return r}function vQ(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["_url","model"],$n(t,r));const i=S(e,["contents"]);if(i!=null){let o=Fa(i);Array.isArray(o)&&(o=o.map(a=>MN(a))),N(n,["contents"],o)}const s=S(e,["config"]);return s!=null&&N(n,["generationConfig"],wrt(t,s,n)),n}function bQ(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["_url","model"],$n(t,r));const i=S(e,["contents"]);if(i!=null){let o=Fa(i);Array.isArray(o)&&(o=o.map(a=>a)),N(n,["contents"],o)}const s=S(e,["config"]);return s!=null&&N(n,["generationConfig"],Ert(t,s,n)),n}function wQ(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>Vnt(c))),N(e,["candidates"],l)}const i=S(t,["modelVersion"]);i!=null&&N(e,["modelVersion"],i);const s=S(t,["promptFeedback"]);s!=null&&N(e,["promptFeedback"],s);const o=S(t,["responseId"]);o!=null&&N(e,["responseId"],o);const a=S(t,["usageMetadata"]);return a!=null&&N(e,["usageMetadata"],a),e}function EQ(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(u=>u)),N(e,["candidates"],c)}const i=S(t,["createTime"]);i!=null&&N(e,["createTime"],i);const s=S(t,["modelVersion"]);s!=null&&N(e,["modelVersion"],s);const o=S(t,["promptFeedback"]);o!=null&&N(e,["promptFeedback"],o);const a=S(t,["responseId"]);a!=null&&N(e,["responseId"],a);const l=S(t,["usageMetadata"]);return l!=null&&N(e,["usageMetadata"],l),e}function Srt(t,e){const n={};if(S(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(S(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=S(t,["numberOfImages"]);e!==void 0&&r!=null&&N(e,["parameters","sampleCount"],r);const i=S(t,["aspectRatio"]);e!==void 0&&i!=null&&N(e,["parameters","aspectRatio"],i);const s=S(t,["guidanceScale"]);if(e!==void 0&&s!=null&&N(e,["parameters","guidanceScale"],s),S(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=S(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&N(e,["parameters","safetySetting"],o);const a=S(t,["personGeneration"]);e!==void 0&&a!=null&&N(e,["parameters","personGeneration"],a);const l=S(t,["includeSafetyAttributes"]);e!==void 0&&l!=null&&N(e,["parameters","includeSafetyAttributes"],l);const c=S(t,["includeRaiReason"]);e!==void 0&&c!=null&&N(e,["parameters","includeRaiReason"],c);const u=S(t,["language"]);e!==void 0&&u!=null&&N(e,["parameters","language"],u);const f=S(t,["outputMimeType"]);e!==void 0&&f!=null&&N(e,["parameters","outputOptions","mimeType"],f);const m=S(t,["outputCompressionQuality"]);if(e!==void 0&&m!=null&&N(e,["parameters","outputOptions","compressionQuality"],m),S(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(S(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const g=S(t,["imageSize"]);if(e!==void 0&&g!=null&&N(e,["parameters","sampleImageSize"],g),S(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function Art(t,e){const n={},r=S(t,["outputGcsUri"]);e!==void 0&&r!=null&&N(e,["parameters","storageUri"],r);const i=S(t,["negativePrompt"]);e!==void 0&&i!=null&&N(e,["parameters","negativePrompt"],i);const s=S(t,["numberOfImages"]);e!==void 0&&s!=null&&N(e,["parameters","sampleCount"],s);const o=S(t,["aspectRatio"]);e!==void 0&&o!=null&&N(e,["parameters","aspectRatio"],o);const a=S(t,["guidanceScale"]);e!==void 0&&a!=null&&N(e,["parameters","guidanceScale"],a);const l=S(t,["seed"]);e!==void 0&&l!=null&&N(e,["parameters","seed"],l);const c=S(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&N(e,["parameters","safetySetting"],c);const u=S(t,["personGeneration"]);e!==void 0&&u!=null&&N(e,["parameters","personGeneration"],u);const f=S(t,["includeSafetyAttributes"]);e!==void 0&&f!=null&&N(e,["parameters","includeSafetyAttributes"],f);const m=S(t,["includeRaiReason"]);e!==void 0&&m!=null&&N(e,["parameters","includeRaiReason"],m);const g=S(t,["language"]);e!==void 0&&g!=null&&N(e,["parameters","language"],g);const v=S(t,["outputMimeType"]);e!==void 0&&v!=null&&N(e,["parameters","outputOptions","mimeType"],v);const x=S(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&N(e,["parameters","outputOptions","compressionQuality"],x);const b=S(t,["addWatermark"]);e!==void 0&&b!=null&&N(e,["parameters","addWatermark"],b);const E=S(t,["labels"]);e!==void 0&&E!=null&&N(e,["labels"],E);const C=S(t,["imageSize"]);e!==void 0&&C!=null&&N(e,["parameters","sampleImageSize"],C);const k=S(t,["enhancePrompt"]);return e!==void 0&&k!=null&&N(e,["parameters","enhancePrompt"],k),n}function Trt(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["_url","model"],$n(t,r));const i=S(e,["prompt"]);i!=null&&N(n,["instances[0]","prompt"],i);const s=S(e,["config"]);return s!=null&&Srt(s,n),n}function krt(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["_url","model"],$n(t,r));const i=S(e,["prompt"]);i!=null&&N(n,["instances[0]","prompt"],i);const s=S(e,["config"]);return s!=null&&Art(s,n),n}function Crt(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>Urt(o))),N(e,["generatedImages"],s)}const i=S(t,["positivePromptSafetyAttributes"]);return i!=null&&N(e,["positivePromptSafetyAttributes"],nhe(i)),e}function Nrt(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>DN(o))),N(e,["generatedImages"],s)}const i=S(t,["positivePromptSafetyAttributes"]);return i!=null&&N(e,["positivePromptSafetyAttributes"],rhe(i)),e}function _rt(t,e){const n={},r=S(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&N(e,["parameters","sampleCount"],r),S(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(S(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=S(t,["durationSeconds"]);if(e!==void 0&&i!=null&&N(e,["parameters","durationSeconds"],i),S(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=S(t,["aspectRatio"]);e!==void 0&&s!=null&&N(e,["parameters","aspectRatio"],s);const o=S(t,["resolution"]);e!==void 0&&o!=null&&N(e,["parameters","resolution"],o);const a=S(t,["personGeneration"]);if(e!==void 0&&a!=null&&N(e,["parameters","personGeneration"],a),S(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const l=S(t,["negativePrompt"]);e!==void 0&&l!=null&&N(e,["parameters","negativePrompt"],l);const c=S(t,["enhancePrompt"]);if(e!==void 0&&c!=null&&N(e,["parameters","enhancePrompt"],c),S(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const u=S(t,["lastFrame"]);e!==void 0&&u!=null&&N(e,["instances[0]","lastFrame"],LN(u));const f=S(t,["referenceImages"]);if(e!==void 0&&f!=null){let m=f;Array.isArray(m)&&(m=m.map(g=>Pit(g))),N(e,["instances[0]","referenceImages"],m)}if(S(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(S(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function Irt(t,e){const n={},r=S(t,["numberOfVideos"]);e!==void 0&&r!=null&&N(e,["parameters","sampleCount"],r);const i=S(t,["outputGcsUri"]);e!==void 0&&i!=null&&N(e,["parameters","storageUri"],i);const s=S(t,["fps"]);e!==void 0&&s!=null&&N(e,["parameters","fps"],s);const o=S(t,["durationSeconds"]);e!==void 0&&o!=null&&N(e,["parameters","durationSeconds"],o);const a=S(t,["seed"]);e!==void 0&&a!=null&&N(e,["parameters","seed"],a);const l=S(t,["aspectRatio"]);e!==void 0&&l!=null&&N(e,["parameters","aspectRatio"],l);const c=S(t,["resolution"]);e!==void 0&&c!=null&&N(e,["parameters","resolution"],c);const u=S(t,["personGeneration"]);e!==void 0&&u!=null&&N(e,["parameters","personGeneration"],u);const f=S(t,["pubsubTopic"]);e!==void 0&&f!=null&&N(e,["parameters","pubsubTopic"],f);const m=S(t,["negativePrompt"]);e!==void 0&&m!=null&&N(e,["parameters","negativePrompt"],m);const g=S(t,["enhancePrompt"]);e!==void 0&&g!=null&&N(e,["parameters","enhancePrompt"],g);const v=S(t,["generateAudio"]);e!==void 0&&v!=null&&N(e,["parameters","generateAudio"],v);const x=S(t,["lastFrame"]);e!==void 0&&x!=null&&N(e,["instances[0]","lastFrame"],Ul(x));const b=S(t,["referenceImages"]);if(e!==void 0&&b!=null){let k=b;Array.isArray(k)&&(k=k.map(O=>Rit(O))),N(e,["instances[0]","referenceImages"],k)}const E=S(t,["mask"]);e!==void 0&&E!=null&&N(e,["instances[0]","mask"],Iit(E));const C=S(t,["compressionQuality"]);return e!==void 0&&C!=null&&N(e,["parameters","compressionQuality"],C),n}function Prt(t){const e={},n=S(t,["name"]);n!=null&&N(e,["name"],n);const r=S(t,["metadata"]);r!=null&&N(e,["metadata"],r);const i=S(t,["done"]);i!=null&&N(e,["done"],i);const s=S(t,["error"]);s!=null&&N(e,["error"],s);const o=S(t,["response","generateVideoResponse"]);return o!=null&&N(e,["response"],Drt(o)),e}function Rrt(t){const e={},n=S(t,["name"]);n!=null&&N(e,["name"],n);const r=S(t,["metadata"]);r!=null&&N(e,["metadata"],r);const i=S(t,["done"]);i!=null&&N(e,["done"],i);const s=S(t,["error"]);s!=null&&N(e,["error"],s);const o=S(t,["response"]);return o!=null&&N(e,["response"],Lrt(o)),e}function Ort(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["_url","model"],$n(t,r));const i=S(e,["prompt"]);i!=null&&N(n,["instances[0]","prompt"],i);const s=S(e,["image"]);s!=null&&N(n,["instances[0]","image"],LN(s));const o=S(e,["video"]);o!=null&&N(n,["instances[0]","video"],she(o));const a=S(e,["source"]);a!=null&&jrt(a,n);const l=S(e,["config"]);return l!=null&&_rt(l,n),n}function Mrt(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["_url","model"],$n(t,r));const i=S(e,["prompt"]);i!=null&&N(n,["instances[0]","prompt"],i);const s=S(e,["image"]);s!=null&&N(n,["instances[0]","image"],Ul(s));const o=S(e,["video"]);o!=null&&N(n,["instances[0]","video"],ohe(o));const a=S(e,["source"]);a!=null&&Brt(a,n);const l=S(e,["config"]);return l!=null&&Irt(l,n),n}function Drt(t){const e={},n=S(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>$rt(o))),N(e,["generatedVideos"],s)}const r=S(t,["raiMediaFilteredCount"]);r!=null&&N(e,["raiMediaFilteredCount"],r);const i=S(t,["raiMediaFilteredReasons"]);return i!=null&&N(e,["raiMediaFilteredReasons"],i),e}function Lrt(t){const e={},n=S(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>zrt(o))),N(e,["generatedVideos"],s)}const r=S(t,["raiMediaFilteredCount"]);r!=null&&N(e,["raiMediaFilteredCount"],r);const i=S(t,["raiMediaFilteredReasons"]);return i!=null&&N(e,["raiMediaFilteredReasons"],i),e}function jrt(t,e){const n={},r=S(t,["prompt"]);e!==void 0&&r!=null&&N(e,["instances[0]","prompt"],r);const i=S(t,["image"]);e!==void 0&&i!=null&&N(e,["instances[0]","image"],LN(i));const s=S(t,["video"]);return e!==void 0&&s!=null&&N(e,["instances[0]","video"],she(s)),n}function Brt(t,e){const n={},r=S(t,["prompt"]);e!==void 0&&r!=null&&N(e,["instances[0]","prompt"],r);const i=S(t,["image"]);e!==void 0&&i!=null&&N(e,["instances[0]","image"],Ul(i));const s=S(t,["video"]);return e!==void 0&&s!=null&&N(e,["instances[0]","video"],ohe(s)),n}function Urt(t){const e={},n=S(t,["_self"]);n!=null&&N(e,["image"],Jrt(n));const r=S(t,["raiFilteredReason"]);r!=null&&N(e,["raiFilteredReason"],r);const i=S(t,["_self"]);return i!=null&&N(e,["safetyAttributes"],nhe(i)),e}function DN(t){const e={},n=S(t,["_self"]);n!=null&&N(e,["image"],the(n));const r=S(t,["raiFilteredReason"]);r!=null&&N(e,["raiFilteredReason"],r);const i=S(t,["_self"]);i!=null&&N(e,["safetyAttributes"],rhe(i));const s=S(t,["prompt"]);return s!=null&&N(e,["enhancedPrompt"],s),e}function Frt(t){const e={},n=S(t,["_self"]);n!=null&&N(e,["mask"],the(n));const r=S(t,["labels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),N(e,["labels"],i)}return e}function $rt(t){const e={},n=S(t,["video"]);return n!=null&&N(e,["video"],Nit(n)),e}function zrt(t){const e={},n=S(t,["_self"]);return n!=null&&N(e,["video"],_it(n)),e}function Hrt(t){const e={},n=S(t,["modelSelectionConfig"]);n!=null&&N(e,["modelConfig"],n);const r=S(t,["responseJsonSchema"]);r!=null&&N(e,["responseJsonSchema"],r);const i=S(t,["audioTimestamp"]);i!=null&&N(e,["audioTimestamp"],i);const s=S(t,["candidateCount"]);s!=null&&N(e,["candidateCount"],s);const o=S(t,["enableAffectiveDialog"]);o!=null&&N(e,["enableAffectiveDialog"],o);const a=S(t,["frequencyPenalty"]);a!=null&&N(e,["frequencyPenalty"],a);const l=S(t,["logprobs"]);l!=null&&N(e,["logprobs"],l);const c=S(t,["maxOutputTokens"]);c!=null&&N(e,["maxOutputTokens"],c);const u=S(t,["mediaResolution"]);u!=null&&N(e,["mediaResolution"],u);const f=S(t,["presencePenalty"]);f!=null&&N(e,["presencePenalty"],f);const m=S(t,["responseLogprobs"]);m!=null&&N(e,["responseLogprobs"],m);const g=S(t,["responseMimeType"]);g!=null&&N(e,["responseMimeType"],g);const v=S(t,["responseModalities"]);v!=null&&N(e,["responseModalities"],v);const x=S(t,["responseSchema"]);x!=null&&N(e,["responseSchema"],x);const b=S(t,["routingConfig"]);b!=null&&N(e,["routingConfig"],b);const E=S(t,["seed"]);E!=null&&N(e,["seed"],E);const C=S(t,["speechConfig"]);C!=null&&N(e,["speechConfig"],C);const k=S(t,["stopSequences"]);k!=null&&N(e,["stopSequences"],k);const O=S(t,["temperature"]);O!=null&&N(e,["temperature"],O);const U=S(t,["thinkingConfig"]);U!=null&&N(e,["thinkingConfig"],U);const R=S(t,["topK"]);R!=null&&N(e,["topK"],R);const $=S(t,["topP"]);if($!=null&&N(e,["topP"],$),S(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Vrt(t,e){const n={},r=S(e,["model"]);return r!=null&&N(n,["_url","name"],$n(t,r)),n}function qrt(t,e){const n={},r=S(e,["model"]);return r!=null&&N(n,["_url","name"],$n(t,r)),n}function Grt(t){const e={};if(S(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=S(t,["enableWidget"]);return n!=null&&N(e,["enableWidget"],n),e}function Krt(t){const e={};if(S(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(S(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=S(t,["timeRangeFilter"]);return n!=null&&N(e,["timeRangeFilter"],n),e}function Wrt(t){const e={},n=S(t,["aspectRatio"]);n!=null&&N(e,["aspectRatio"],n);const r=S(t,["imageSize"]);if(r!=null&&N(e,["imageSize"],r),S(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(S(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function Yrt(t){const e={},n=S(t,["aspectRatio"]);n!=null&&N(e,["aspectRatio"],n);const r=S(t,["imageSize"]);r!=null&&N(e,["imageSize"],r);const i=S(t,["outputMimeType"]);i!=null&&N(e,["imageOutputOptions","mimeType"],i);const s=S(t,["outputCompressionQuality"]);return s!=null&&N(e,["imageOutputOptions","compressionQuality"],s),e}function Jrt(t){const e={},n=S(t,["bytesBase64Encoded"]);n!=null&&N(e,["imageBytes"],Eh(n));const r=S(t,["mimeType"]);return r!=null&&N(e,["mimeType"],r),e}function the(t){const e={},n=S(t,["gcsUri"]);n!=null&&N(e,["gcsUri"],n);const r=S(t,["bytesBase64Encoded"]);r!=null&&N(e,["imageBytes"],Eh(r));const i=S(t,["mimeType"]);return i!=null&&N(e,["mimeType"],i),e}function LN(t){const e={};if(S(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=S(t,["imageBytes"]);n!=null&&N(e,["bytesBase64Encoded"],Eh(n));const r=S(t,["mimeType"]);return r!=null&&N(e,["mimeType"],r),e}function Ul(t){const e={},n=S(t,["gcsUri"]);n!=null&&N(e,["gcsUri"],n);const r=S(t,["imageBytes"]);r!=null&&N(e,["bytesBase64Encoded"],Eh(r));const i=S(t,["mimeType"]);return i!=null&&N(e,["mimeType"],i),e}function Xrt(t,e,n){const r={},i=S(e,["pageSize"]);n!==void 0&&i!=null&&N(n,["_query","pageSize"],i);const s=S(e,["pageToken"]);n!==void 0&&s!=null&&N(n,["_query","pageToken"],s);const o=S(e,["filter"]);n!==void 0&&o!=null&&N(n,["_query","filter"],o);const a=S(e,["queryBase"]);return n!==void 0&&a!=null&&N(n,["_url","models_url"],Wfe(t,a)),r}function Qrt(t,e,n){const r={},i=S(e,["pageSize"]);n!==void 0&&i!=null&&N(n,["_query","pageSize"],i);const s=S(e,["pageToken"]);n!==void 0&&s!=null&&N(n,["_query","pageToken"],s);const o=S(e,["filter"]);n!==void 0&&o!=null&&N(n,["_query","filter"],o);const a=S(e,["queryBase"]);return n!==void 0&&a!=null&&N(n,["_url","models_url"],Wfe(t,a)),r}function Zrt(t,e){const n={},r=S(e,["config"]);return r!=null&&Xrt(t,r,n),n}function eit(t,e){const n={},r=S(e,["config"]);return r!=null&&Qrt(t,r,n),n}function tit(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["nextPageToken"]);r!=null&&N(e,["nextPageToken"],r);const i=S(t,["_self"]);if(i!=null){let s=Yfe(i);Array.isArray(s)&&(s=s.map(o=>BD(o))),N(e,["models"],s)}return e}function nit(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["nextPageToken"]);r!=null&&N(e,["nextPageToken"],r);const i=S(t,["_self"]);if(i!=null){let s=Yfe(i);Array.isArray(s)&&(s=s.map(o=>UD(o))),N(e,["models"],s)}return e}function rit(t){const e={},n=S(t,["maskMode"]);n!=null&&N(e,["maskMode"],n);const r=S(t,["segmentationClasses"]);r!=null&&N(e,["maskClasses"],r);const i=S(t,["maskDilation"]);return i!=null&&N(e,["dilation"],i),e}function BD(t){const e={},n=S(t,["name"]);n!=null&&N(e,["name"],n);const r=S(t,["displayName"]);r!=null&&N(e,["displayName"],r);const i=S(t,["description"]);i!=null&&N(e,["description"],i);const s=S(t,["version"]);s!=null&&N(e,["version"],s);const o=S(t,["_self"]);o!=null&&N(e,["tunedModelInfo"],vit(o));const a=S(t,["inputTokenLimit"]);a!=null&&N(e,["inputTokenLimit"],a);const l=S(t,["outputTokenLimit"]);l!=null&&N(e,["outputTokenLimit"],l);const c=S(t,["supportedGenerationMethods"]);c!=null&&N(e,["supportedActions"],c);const u=S(t,["temperature"]);u!=null&&N(e,["temperature"],u);const f=S(t,["maxTemperature"]);f!=null&&N(e,["maxTemperature"],f);const m=S(t,["topP"]);m!=null&&N(e,["topP"],m);const g=S(t,["topK"]);g!=null&&N(e,["topK"],g);const v=S(t,["thinking"]);return v!=null&&N(e,["thinking"],v),e}function UD(t){const e={},n=S(t,["name"]);n!=null&&N(e,["name"],n);const r=S(t,["displayName"]);r!=null&&N(e,["displayName"],r);const i=S(t,["description"]);i!=null&&N(e,["description"],i);const s=S(t,["versionId"]);s!=null&&N(e,["version"],s);const o=S(t,["deployedModels"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(m=>grt(m))),N(e,["endpoints"],f)}const a=S(t,["labels"]);a!=null&&N(e,["labels"],a);const l=S(t,["_self"]);l!=null&&N(e,["tunedModelInfo"],bit(l));const c=S(t,["defaultCheckpointId"]);c!=null&&N(e,["defaultCheckpointId"],c);const u=S(t,["checkpoints"]);if(u!=null){let f=u;Array.isArray(f)&&(f=f.map(m=>m)),N(e,["checkpoints"],f)}return e}function iit(t){const e={},n=S(t,["mediaResolution"]);n!=null&&N(e,["mediaResolution"],n);const r=S(t,["codeExecutionResult"]);r!=null&&N(e,["codeExecutionResult"],r);const i=S(t,["executableCode"]);i!=null&&N(e,["executableCode"],i);const s=S(t,["fileData"]);s!=null&&N(e,["fileData"],yrt(s));const o=S(t,["functionCall"]);o!=null&&N(e,["functionCall"],xrt(o));const a=S(t,["functionResponse"]);a!=null&&N(e,["functionResponse"],a);const l=S(t,["inlineData"]);l!=null&&N(e,["inlineData"],Hnt(l));const c=S(t,["text"]);c!=null&&N(e,["text"],c);const u=S(t,["thought"]);u!=null&&N(e,["thought"],u);const f=S(t,["thoughtSignature"]);f!=null&&N(e,["thoughtSignature"],f);const m=S(t,["videoMetadata"]);return m!=null&&N(e,["videoMetadata"],m),e}function sit(t){const e={},n=S(t,["productImage"]);return n!=null&&N(e,["image"],Ul(n)),e}function oit(t,e){const n={},r=S(t,["numberOfImages"]);e!==void 0&&r!=null&&N(e,["parameters","sampleCount"],r);const i=S(t,["baseSteps"]);e!==void 0&&i!=null&&N(e,["parameters","baseSteps"],i);const s=S(t,["outputGcsUri"]);e!==void 0&&s!=null&&N(e,["parameters","storageUri"],s);const o=S(t,["seed"]);e!==void 0&&o!=null&&N(e,["parameters","seed"],o);const a=S(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&N(e,["parameters","safetySetting"],a);const l=S(t,["personGeneration"]);e!==void 0&&l!=null&&N(e,["parameters","personGeneration"],l);const c=S(t,["addWatermark"]);e!==void 0&&c!=null&&N(e,["parameters","addWatermark"],c);const u=S(t,["outputMimeType"]);e!==void 0&&u!=null&&N(e,["parameters","outputOptions","mimeType"],u);const f=S(t,["outputCompressionQuality"]);e!==void 0&&f!=null&&N(e,["parameters","outputOptions","compressionQuality"],f);const m=S(t,["enhancePrompt"]);e!==void 0&&m!=null&&N(e,["parameters","enhancePrompt"],m);const g=S(t,["labels"]);return e!==void 0&&g!=null&&N(e,["labels"],g),n}function ait(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["_url","model"],$n(t,r));const i=S(e,["source"]);i!=null&&cit(i,n);const s=S(e,["config"]);return s!=null&&oit(s,n),n}function lit(t){const e={},n=S(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>DN(i))),N(e,["generatedImages"],r)}return e}function cit(t,e){const n={},r=S(t,["prompt"]);e!==void 0&&r!=null&&N(e,["instances[0]","prompt"],r);const i=S(t,["personImage"]);e!==void 0&&i!=null&&N(e,["instances[0]","personImage","image"],Ul(i));const s=S(t,["productImages"]);if(e!==void 0&&s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>sit(a))),N(e,["instances[0]","productImages"],o)}return n}function uit(t){const e={},n=S(t,["referenceImage"]);n!=null&&N(e,["referenceImage"],Ul(n));const r=S(t,["referenceId"]);r!=null&&N(e,["referenceId"],r);const i=S(t,["referenceType"]);i!=null&&N(e,["referenceType"],i);const s=S(t,["maskImageConfig"]);s!=null&&N(e,["maskImageConfig"],rit(s));const o=S(t,["controlImageConfig"]);o!=null&&N(e,["controlImageConfig"],Jnt(o));const a=S(t,["styleImageConfig"]);a!=null&&N(e,["styleImageConfig"],a);const l=S(t,["subjectImageConfig"]);return l!=null&&N(e,["subjectImageConfig"],l),e}function nhe(t){const e={},n=S(t,["safetyAttributes","categories"]);n!=null&&N(e,["categories"],n);const r=S(t,["safetyAttributes","scores"]);r!=null&&N(e,["scores"],r);const i=S(t,["contentType"]);return i!=null&&N(e,["contentType"],i),e}function rhe(t){const e={},n=S(t,["safetyAttributes","categories"]);n!=null&&N(e,["categories"],n);const r=S(t,["safetyAttributes","scores"]);r!=null&&N(e,["scores"],r);const i=S(t,["contentType"]);return i!=null&&N(e,["contentType"],i),e}function dit(t){const e={},n=S(t,["category"]);if(n!=null&&N(e,["category"],n),S(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=S(t,["threshold"]);return r!=null&&N(e,["threshold"],r),e}function fit(t){const e={},n=S(t,["image"]);return n!=null&&N(e,["image"],Ul(n)),e}function hit(t,e){const n={},r=S(t,["mode"]);e!==void 0&&r!=null&&N(e,["parameters","mode"],r);const i=S(t,["maxPredictions"]);e!==void 0&&i!=null&&N(e,["parameters","maxPredictions"],i);const s=S(t,["confidenceThreshold"]);e!==void 0&&s!=null&&N(e,["parameters","confidenceThreshold"],s);const o=S(t,["maskDilation"]);e!==void 0&&o!=null&&N(e,["parameters","maskDilation"],o);const a=S(t,["binaryColorThreshold"]);e!==void 0&&a!=null&&N(e,["parameters","binaryColorThreshold"],a);const l=S(t,["labels"]);return e!==void 0&&l!=null&&N(e,["labels"],l),n}function pit(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["_url","model"],$n(t,r));const i=S(e,["source"]);i!=null&&git(i,n);const s=S(e,["config"]);return s!=null&&hit(s,n),n}function mit(t){const e={},n=S(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Frt(i))),N(e,["generatedMasks"],r)}return e}function git(t,e){const n={},r=S(t,["prompt"]);e!==void 0&&r!=null&&N(e,["instances[0]","prompt"],r);const i=S(t,["image"]);e!==void 0&&i!=null&&N(e,["instances[0]","image"],Ul(i));const s=S(t,["scribbleImage"]);return e!==void 0&&s!=null&&N(e,["instances[0]","scribble"],fit(s)),n}function yit(t){const e={},n=S(t,["functionCallingConfig"]);n!=null&&N(e,["functionCallingConfig"],vrt(n));const r=S(t,["retrievalConfig"]);return r!=null&&N(e,["retrievalConfig"],r),e}function xit(t){const e={},n=S(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(f=>f)),N(e,["functionDeclarations"],u)}if(S(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=S(t,["googleSearchRetrieval"]);r!=null&&N(e,["googleSearchRetrieval"],r);const i=S(t,["computerUse"]);i!=null&&N(e,["computerUse"],i);const s=S(t,["fileSearch"]);s!=null&&N(e,["fileSearch"],s);const o=S(t,["codeExecution"]);if(o!=null&&N(e,["codeExecution"],o),S(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=S(t,["googleMaps"]);a!=null&&N(e,["googleMaps"],Grt(a));const l=S(t,["googleSearch"]);l!=null&&N(e,["googleSearch"],Krt(l));const c=S(t,["urlContext"]);return c!=null&&N(e,["urlContext"],c),e}function ihe(t){const e={},n=S(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(m=>brt(m))),N(e,["functionDeclarations"],f)}const r=S(t,["retrieval"]);r!=null&&N(e,["retrieval"],r);const i=S(t,["googleSearchRetrieval"]);i!=null&&N(e,["googleSearchRetrieval"],i);const s=S(t,["computerUse"]);if(s!=null&&N(e,["computerUse"],s),S(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=S(t,["codeExecution"]);o!=null&&N(e,["codeExecution"],o);const a=S(t,["enterpriseWebSearch"]);a!=null&&N(e,["enterpriseWebSearch"],a);const l=S(t,["googleMaps"]);l!=null&&N(e,["googleMaps"],l);const c=S(t,["googleSearch"]);c!=null&&N(e,["googleSearch"],c);const u=S(t,["urlContext"]);return u!=null&&N(e,["urlContext"],u),e}function vit(t){const e={},n=S(t,["baseModel"]);n!=null&&N(e,["baseModel"],n);const r=S(t,["createTime"]);r!=null&&N(e,["createTime"],r);const i=S(t,["updateTime"]);return i!=null&&N(e,["updateTime"],i),e}function bit(t){const e={},n=S(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&N(e,["baseModel"],n);const r=S(t,["createTime"]);r!=null&&N(e,["createTime"],r);const i=S(t,["updateTime"]);return i!=null&&N(e,["updateTime"],i),e}function wit(t,e){const n={},r=S(t,["displayName"]);e!==void 0&&r!=null&&N(e,["displayName"],r);const i=S(t,["description"]);e!==void 0&&i!=null&&N(e,["description"],i);const s=S(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&N(e,["defaultCheckpointId"],s),n}function Eit(t,e){const n={},r=S(t,["displayName"]);e!==void 0&&r!=null&&N(e,["displayName"],r);const i=S(t,["description"]);e!==void 0&&i!=null&&N(e,["description"],i);const s=S(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&N(e,["defaultCheckpointId"],s),n}function Sit(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["_url","name"],$n(t,r));const i=S(e,["config"]);return i!=null&&wit(i,n),n}function Ait(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["_url","model"],$n(t,r));const i=S(e,["config"]);return i!=null&&Eit(i,n),n}function Tit(t,e){const n={},r=S(t,["outputGcsUri"]);e!==void 0&&r!=null&&N(e,["parameters","storageUri"],r);const i=S(t,["safetyFilterLevel"]);e!==void 0&&i!=null&&N(e,["parameters","safetySetting"],i);const s=S(t,["personGeneration"]);e!==void 0&&s!=null&&N(e,["parameters","personGeneration"],s);const o=S(t,["includeRaiReason"]);e!==void 0&&o!=null&&N(e,["parameters","includeRaiReason"],o);const a=S(t,["outputMimeType"]);e!==void 0&&a!=null&&N(e,["parameters","outputOptions","mimeType"],a);const l=S(t,["outputCompressionQuality"]);e!==void 0&&l!=null&&N(e,["parameters","outputOptions","compressionQuality"],l);const c=S(t,["enhanceInputImage"]);e!==void 0&&c!=null&&N(e,["parameters","upscaleConfig","enhanceInputImage"],c);const u=S(t,["imagePreservationFactor"]);e!==void 0&&u!=null&&N(e,["parameters","upscaleConfig","imagePreservationFactor"],u);const f=S(t,["labels"]);e!==void 0&&f!=null&&N(e,["labels"],f);const m=S(t,["numberOfImages"]);e!==void 0&&m!=null&&N(e,["parameters","sampleCount"],m);const g=S(t,["mode"]);return e!==void 0&&g!=null&&N(e,["parameters","mode"],g),n}function kit(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["_url","model"],$n(t,r));const i=S(e,["image"]);i!=null&&N(n,["instances[0]","image"],Ul(i));const s=S(e,["upscaleFactor"]);s!=null&&N(n,["parameters","upscaleConfig","upscaleFactor"],s);const o=S(e,["config"]);return o!=null&&Tit(o,n),n}function Cit(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>DN(s))),N(e,["generatedImages"],i)}return e}function Nit(t){const e={},n=S(t,["uri"]);n!=null&&N(e,["uri"],n);const r=S(t,["encodedVideo"]);r!=null&&N(e,["videoBytes"],Eh(r));const i=S(t,["encoding"]);return i!=null&&N(e,["mimeType"],i),e}function _it(t){const e={},n=S(t,["gcsUri"]);n!=null&&N(e,["uri"],n);const r=S(t,["bytesBase64Encoded"]);r!=null&&N(e,["videoBytes"],Eh(r));const i=S(t,["mimeType"]);return i!=null&&N(e,["mimeType"],i),e}function Iit(t){const e={},n=S(t,["image"]);n!=null&&N(e,["_self"],Ul(n));const r=S(t,["maskMode"]);return r!=null&&N(e,["maskMode"],r),e}function Pit(t){const e={},n=S(t,["image"]);n!=null&&N(e,["image"],LN(n));const r=S(t,["referenceType"]);return r!=null&&N(e,["referenceType"],r),e}function Rit(t){const e={},n=S(t,["image"]);n!=null&&N(e,["image"],Ul(n));const r=S(t,["referenceType"]);return r!=null&&N(e,["referenceType"],r),e}function she(t){const e={},n=S(t,["uri"]);n!=null&&N(e,["uri"],n);const r=S(t,["videoBytes"]);r!=null&&N(e,["encodedVideo"],Eh(r));const i=S(t,["mimeType"]);return i!=null&&N(e,["encoding"],i),e}function ohe(t){const e={},n=S(t,["uri"]);n!=null&&N(e,["gcsUri"],n);const r=S(t,["videoBytes"]);r!=null&&N(e,["bytesBase64Encoded"],Eh(r));const i=S(t,["mimeType"]);return i!=null&&N(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Oit(t,e){const n={},r=S(t,["displayName"]);return e!==void 0&&r!=null&&N(e,["displayName"],r),n}function Mit(t){const e={},n=S(t,["config"]);return n!=null&&Oit(n,e),e}function Dit(t,e){const n={},r=S(t,["force"]);return e!==void 0&&r!=null&&N(e,["_query","force"],r),n}function Lit(t){const e={},n=S(t,["name"]);n!=null&&N(e,["_url","name"],n);const r=S(t,["config"]);return r!=null&&Dit(r,e),e}function jit(t){const e={},n=S(t,["name"]);return n!=null&&N(e,["_url","name"],n),e}function Bit(t,e){const n={},r=S(t,["customMetadata"]);if(e!==void 0&&r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>o)),N(e,["customMetadata"],s)}const i=S(t,["chunkingConfig"]);return e!==void 0&&i!=null&&N(e,["chunkingConfig"],i),n}function Uit(t){const e={},n=S(t,["name"]);n!=null&&N(e,["name"],n);const r=S(t,["metadata"]);r!=null&&N(e,["metadata"],r);const i=S(t,["done"]);i!=null&&N(e,["done"],i);const s=S(t,["error"]);s!=null&&N(e,["error"],s);const o=S(t,["response"]);return o!=null&&N(e,["response"],$it(o)),e}function Fit(t){const e={},n=S(t,["fileSearchStoreName"]);n!=null&&N(e,["_url","file_search_store_name"],n);const r=S(t,["fileName"]);r!=null&&N(e,["fileName"],r);const i=S(t,["config"]);return i!=null&&Bit(i,e),e}function $it(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["parent"]);r!=null&&N(e,["parent"],r);const i=S(t,["documentName"]);return i!=null&&N(e,["documentName"],i),e}function zit(t,e){const n={},r=S(t,["pageSize"]);e!==void 0&&r!=null&&N(e,["_query","pageSize"],r);const i=S(t,["pageToken"]);return e!==void 0&&i!=null&&N(e,["_query","pageToken"],i),n}function Hit(t){const e={},n=S(t,["config"]);return n!=null&&zit(n,e),e}function Vit(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["nextPageToken"]);r!=null&&N(e,["nextPageToken"],r);const i=S(t,["fileSearchStores"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),N(e,["fileSearchStores"],s)}return e}function ahe(t,e){const n={},r=S(t,["mimeType"]);e!==void 0&&r!=null&&N(e,["mimeType"],r);const i=S(t,["displayName"]);e!==void 0&&i!=null&&N(e,["displayName"],i);const s=S(t,["customMetadata"]);if(e!==void 0&&s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),N(e,["customMetadata"],a)}const o=S(t,["chunkingConfig"]);return e!==void 0&&o!=null&&N(e,["chunkingConfig"],o),n}function qit(t){const e={},n=S(t,["fileSearchStoreName"]);n!=null&&N(e,["_url","file_search_store_name"],n);const r=S(t,["config"]);return r!=null&&ahe(r,e),e}function Git(t){const e={},n=S(t,["sdkHttpResponse"]);return n!=null&&N(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Kit="Content-Type",Wit="X-Server-Timeout",Yit="User-Agent",FD="x-goog-api-client",Jit="1.34.0",Xit=`google-genai-sdk/${Jit}`,Qit="v1beta1",Zit="v1beta";class est{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:Qit,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:Zit,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[o,a]of Object.entries(e.queryParams))i.searchParams.append(o,String(a));let s={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=e.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,n,i.toString(),e.abortSignal),this.unaryApiCall(i,s,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[i,s]of Object.entries(n))typeof s=="object"?r[i]=Object.assign(Object.assign({},r[i]),s):s!==void 0&&(r[i]=s);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let s={};return s.body=e.body,s=await this.includeExtraHttpOptionsToRequestInit(s,n,i.toString(),e.abortSignal),this.streamApiCall(i,s,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,i){if(n&&n.timeout||i){const s=new AbortController,o=s.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const a=setTimeout(()=>s.abort(),n.timeout);a&&typeof a.unref=="function"&&a.unref()}i&&i.addEventListener("abort",()=>{s.abort()}),e.signal=o}return n&&n.extraBody!==null&&tst(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await SQ(i),new DD(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await SQ(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){return Cl(this,arguments,function*(){var r;const i=(r=e==null?void 0:e.body)===null||r===void 0?void 0:r.getReader(),s=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let o="";const a="data:",l=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:c,value:u}=yield tn(i.read());if(c){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const f=s.decode(u,{stream:!0});try{const v=JSON.parse(f);if("error"in v){const x=JSON.parse(JSON.stringify(v.error)),b=x.status,E=x.code,C=`got status: ${b}. ${JSON.stringify(v)}`;if(E>=400&&E<600)throw new ON({message:C,status:E})}}catch(v){if(v.name==="ApiError")throw v}o+=f;let m=-1,g=0;for(;;){m=-1,g=0;for(const b of l){const E=o.indexOf(b);E!==-1&&(m===-1||E<m)&&(m=E,g=b.length)}if(m===-1)break;const v=o.substring(0,m);o=o.substring(m+g);const x=v.trim();if(x.startsWith(a)){const b=x.substring(a.length).trim();try{const E=new Response(b,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield tn(new DD(E))}catch(E){throw new Error(`exception parsing stream chunk ${b}. ${E}`)}}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=Xit+" "+this.clientOptions.userAgentExtra;return e[Yit]=n,e[FD]=n,e[Kit]="application/json",e}async getHeadersInternal(e,n){const r=new Headers;if(e&&e.headers){for(const[i,s]of Object.entries(e.headers))r.append(i,s);e.timeout&&e.timeout>0&&r.append(Wit,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(e){var n;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(e,n){var r;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const s=this.clientOptions.uploader,o=await s.stat(e);i.sizeBytes=String(o.size);const a=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:o.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=a;const l={file:i},c=this.getFileName(e),u=xt("upload/v1beta/files",l._url),f=await this.fetchUploadUrl(u,i.sizeBytes,i.mimeType,c,l,n==null?void 0:n.httpOptions);return s.upload(e,f,this)}async uploadFileToFileSearchStore(e,n,r){var i;const s=this.clientOptions.uploader,o=await s.stat(n),a=String(o.size),l=(i=r==null?void 0:r.mimeType)!==null&&i!==void 0?i:o.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const c=`upload/v1beta/${e}:uploadToFileSearchStore`,u=this.getFileName(n),f={};r!=null&&ahe(r,f);const m=await this.fetchUploadUrl(c,a,l,u,f,r==null?void 0:r.httpOptions);return s.uploadToFileSearchStore(n,m,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r,i,s,o){var a;let l={};o?l=o:l={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},i?{"X-Goog-Upload-File-Name":i}:{})};const c=await this.request({path:e,body:JSON.stringify(s),httpMethod:"POST",httpOptions:l});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const u=(a=c==null?void 0:c.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(u===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return u}}async function SQ(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const i=JSON.stringify(r);throw n>=400&&n<600?new ON({message:i,status:n}):new Error(i)}}function tst(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const s=JSON.parse(t.body);if(typeof s=="object"&&s!==null&&!Array.isArray(s))n=s;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(s,o){const a=Object.assign({},s);for(const l in o)if(Object.prototype.hasOwnProperty.call(o,l)){const c=o[l],u=a[l];c&&typeof c=="object"&&!Array.isArray(c)&&u&&typeof u=="object"&&!Array.isArray(u)?a[l]=r(u,c):(u&&c&&typeof u!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof u}, New type: ${typeof c}. Overwriting.`),a[l]=c)}return a}const i=r(n,e);t.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const nst="mcp_used/unknown";let rst=!1;function lhe(t){for(const e of t)if(ist(e)||typeof e=="object"&&"inputSchema"in e)return!0;return rst}function che(t){var e;const n=(e=t[FD])!==null&&e!==void 0?e:"";t[FD]=(n+` ${nst}`).trimStart()}function ist(t){return t!==null&&typeof t=="object"&&t instanceof _B}function sst(t){return Cl(this,arguments,function*(n,r=100){let i,s=0;for(;s<r;){const o=yield tn(n.listTools({cursor:i}));for(const a of o.tools)yield yield tn(a),s++;if(!o.nextCursor)break;i=o.nextCursor}})}class _B{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new _B(e,n)}async initialize(){var e,n,r,i;if(this.mcpTools.length>0)return;const s={},o=[];for(const u of this.mcpClients)try{for(var a=!0,l=(n=void 0,Nl(sst(u))),c;c=await l.next(),e=c.done,!e;a=!0){i=c.value,a=!1;const f=i;o.push(f);const m=f.name;if(s[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);s[m]=u}}catch(f){n={error:f}}finally{try{!a&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}this.mcpTools=o,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),jet(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let s;this.config.timeout&&(s={timeout:this.config.timeout});const o=await i.callTool({name:r.name,arguments:r.args},void 0,s);n.push({functionResponse:{name:r.name,response:o.isError?{error:o}:o}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function ost(t,e,n){const r=new _et;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data),Object.assign(r,i),e(r)}class ast{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),o=ust(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),l=`${i}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${a}`;let c=()=>{};const u=new Promise(k=>{c=k}),f=e.callbacks,m=function(){c({})},g=this.apiClient,v={onopen:m,onmessage:k=>{ost(g,f.onmessage,k)},onerror:(n=f==null?void 0:f.onerror)!==null&&n!==void 0?n:function(k){},onclose:(r=f==null?void 0:f.onclose)!==null&&r!==void 0?r:function(k){}},x=this.webSocketFactory.create(l,cst(o),v);x.connect(),await u;const C={setup:{model:$n(this.apiClient,e.model)}};return x.send(JSON.stringify(C)),new lst(x,this.apiClient)}}class lst{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=Mnt(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=Ont(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Ig.PLAY)}pause(){this.sendPlaybackControl(Ig.PAUSE)}stop(){this.sendPlaybackControl(Ig.STOP)}resetContext(){this.sendPlaybackControl(Ig.RESET_CONTEXT)}close(){this.conn.close()}}function cst(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function ust(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dst="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function fst(t,e,n){const r=new Net;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const s=JSON.parse(i);if(t.isVertexAI()){const o=jnt(s);Object.assign(r,o)}else Object.assign(r,s);e(r)}class hst{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new ast(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,i,s,o,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const l=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let u;const f=this.apiClient.getHeaders();e.config&&e.config.tools&&lhe(e.config.tools)&&che(f);const m=yst(f);if(this.apiClient.isVertexAI())u=`${l}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m,u);else{const j=this.apiClient.getApiKey();let F="BidiGenerateContent",W="key";j!=null&&j.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),F="BidiGenerateContentConstrained",W="access_token"),u=`${l}/ws/google.ai.generativelanguage.${c}.GenerativeService.${F}?${W}=${j}`}let g=()=>{};const v=new Promise(j=>{g=j}),x=e.callbacks,b=function(){var j;(j=x==null?void 0:x.onopen)===null||j===void 0||j.call(x),g({})},E=this.apiClient,C={onopen:b,onmessage:j=>{fst(E,x.onmessage,j)},onerror:(n=x==null?void 0:x.onerror)!==null&&n!==void 0?n:function(j){},onclose:(r=x==null?void 0:x.onclose)!==null&&r!==void 0?r:function(j){}},k=this.webSocketFactory.create(u,gst(m),C);k.connect(),await v;let O=$n(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&O.startsWith("publishers/")){const j=this.apiClient.getProject(),F=this.apiClient.getLocation();O=`projects/${j}/locations/${F}/`+O}let U={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[xC.AUDIO]}:e.config.responseModalities=[xC.AUDIO]),!((s=e.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const R=(a=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[],$=[];for(const j of R)if(this.isCallableTool(j)){const F=j;$.push(await F.tool())}else $.push(j);$.length>0&&(e.config.tools=$);const V={model:O,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?U=Rnt(this.apiClient,V):U=Pnt(this.apiClient,V),delete U.config,k.send(JSON.stringify(U)),new mst(k,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const pst={turnComplete:!0};class mst{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=Fa(n.turns),e.isVertexAI()||(r=r.map(i=>MN(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const s of r){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error(dst)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},pst),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:Lnt(e)}:n={realtimeInput:Dnt(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function gst(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function yst(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const AQ=10;function TQ(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const o of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(ny(o)){i=!0;break}if(!i)return!0;const s=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function ny(t){return"callTool"in t&&typeof t.callTool=="function"}function xst(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>ny(i)))!==null&&r!==void 0?r:!1}function kQ(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,i)=>{if(ny(r))return;const s=r;s.functionDeclarations&&s.functionDeclarations.length>0&&n.push(i)}),n}function CQ(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vst extends Od{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,i,s,o,a;const l=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!xst(n)||TQ(n.config))return await this.generateContentInternal(l);const c=kQ(n);if(c.length>0){const x=c.map(b=>`tools[${b}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${x}.`)}let u,f;const m=Fa(l.contents),g=(s=(i=(r=l.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&s!==void 0?s:AQ;let v=0;for(;v<g&&(u=await this.generateContentInternal(l),!(!u.functionCalls||u.functionCalls.length===0));){const x=u.candidates[0].content,b=[];for(const E of(a=(o=n.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[])if(ny(E)){const k=await E.callTool(u.functionCalls);b.push(...k)}v++,f={role:"user",parts:b},l.contents=Fa(l.contents),l.contents.push(x),l.contents.push(f),CQ(l.config)&&(m.push(x),m.push(f))}return CQ(l.config)&&(u.automaticFunctionCallingHistory=m),u},this.generateContentStream=async n=>{var r,i,s,o,a;if(this.maybeMoveToResponseJsonSchem(n),TQ(n.config)){const f=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(f)}const l=kQ(n);if(l.length>0){const f=l.map(m=>`tools[${m}]`).join(", ");throw new Error(`Incompatible tools found at ${f}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const c=(s=(i=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||i===void 0?void 0:i.functionCallingConfig)===null||s===void 0?void 0:s.streamFunctionCallArguments,u=(a=(o=n==null?void 0:n.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||a===void 0?void 0:a.disable;if(c&&!u)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let s;const o=[];if(r!=null&&r.generatedImages)for(const l of r.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((i=l==null?void 0:l.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?s=l==null?void 0:l.safetyAttributes:o.push(l);let a;return s?a={generatedImages:o,positivePromptSafetyAttributes:s,sdkHttpResponse:r.sdkHttpResponse}:a={generatedImages:o,sdkHttpResponse:r.sdkHttpResponse},a}),this.list=async n=>{var r;const o={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((r=o.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new Fm(bd.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(o),o)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>{var r,i,s,o,a,l;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((i=n.video)===null||i===void 0)&&i.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((o=(s=n.source)===null||s===void 0?void 0:s.video)===null||o===void 0)&&o.uri&&(!((l=(a=n.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,i;const s=(n=e.config)===null||n===void 0?void 0:n.tools;if(!s)return e;const o=await Promise.all(s.map(async l=>ny(l)?await l.tool():l)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:o})};if(a.config.tools=o,e.config&&e.config.tools&&lhe(e.config.tools)){const l=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let c=Object.assign({},l);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),che(c),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return a}async initAfcToolsMap(e){var n,r,i;const s=new Map;for(const o of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(ny(o)){const a=o,l=await a.tool();for(const c of(i=l.functionDeclarations)!==null&&i!==void 0?i:[]){if(!c.name)throw new Error("Function declaration name is required.");if(s.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);s.set(c.name,a)}}return s}async processAfcStream(e){var n,r,i;const s=(i=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:AQ;let o=!1,a=0;const l=await this.initAfcToolsMap(e);return(function(c,u,f){return Cl(this,arguments,function*(){for(var m,g,v,x,b,E;a<s;){o&&(a++,o=!1);const U=yield tn(c.processParamsMaybeAddMcpUsage(f)),R=yield tn(c.generateContentStreamInternal(U)),$=[],V=[];try{for(var C=!0,k=(g=void 0,Nl(R)),O;O=yield tn(k.next()),m=O.done,!m;C=!0){x=O.value,C=!1;const j=x;if(yield yield tn(j),j.candidates&&(!((b=j.candidates[0])===null||b===void 0)&&b.content)){V.push(j.candidates[0].content);for(const F of(E=j.candidates[0].content.parts)!==null&&E!==void 0?E:[])if(a<s&&F.functionCall){if(!F.functionCall.name)throw new Error("Function call name was not returned by the model.");if(u.has(F.functionCall.name)){const W=yield tn(u.get(F.functionCall.name).callTool([F.functionCall]));$.push(...W)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${u.keys()}, mising tool: ${F.functionCall.name}`)}}}}catch(j){g={error:j}}finally{try{!C&&!m&&(v=k.return)&&(yield tn(v.call(k)))}finally{if(g)throw g.error}}if($.length>0){o=!0;const j=new kb;j.candidates=[{content:{role:"user",parts:$}}],yield yield tn(j);const F=[];F.push(...V),F.push({role:"user",parts:$});const W=Fa(f.contents).concat(F);f.contents=W}else break}})})(this,l,e)}async generateContentInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=bQ(this.apiClient,e);return a=xt("{model}:generateContent",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const f=EQ(u),m=new kb;return Object.assign(m,f),m})}else{const c=vQ(this.apiClient,e);return a=xt("{model}:generateContent",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const f=wQ(u),m=new kb;return Object.assign(m,f),m})}}async generateContentStreamInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=bQ(this.apiClient,e);return a=xt("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),o.then(function(f){return Cl(this,arguments,function*(){var m,g,v,x;try{for(var b=!0,E=Nl(f),C;C=yield tn(E.next()),m=C.done,!m;b=!0){x=C.value,b=!1;const k=x,O=EQ(yield tn(k.json()));O.sdkHttpResponse={headers:k.headers};const U=new kb;Object.assign(U,O),yield yield tn(U)}}catch(k){g={error:k}}finally{try{!b&&!m&&(v=E.return)&&(yield tn(v.call(E)))}finally{if(g)throw g.error}}})})}else{const c=vQ(this.apiClient,e);return a=xt("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),o.then(function(f){return Cl(this,arguments,function*(){var m,g,v,x;try{for(var b=!0,E=Nl(f),C;C=yield tn(E.next()),m=C.done,!m;b=!0){x=C.value,b=!1;const k=x,O=wQ(yield tn(k.json()));O.sdkHttpResponse={headers:k.headers};const U=new kb;Object.assign(U,O),yield yield tn(U)}}catch(k){g={error:k}}finally{try{!b&&!m&&(v=E.return)&&(yield tn(v.call(E)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=hrt(this.apiClient,e);return a=xt("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const f=mrt(u),m=new nQ;return Object.assign(m,f),m})}else{const c=frt(this.apiClient,e);return a=xt("{model}:batchEmbedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const f=prt(u),m=new nQ;return Object.assign(m,f),m})}}async generateImagesInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=krt(this.apiClient,e);return a=xt("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const f=Nrt(u),m=new rQ;return Object.assign(m,f),m})}else{const c=Trt(this.apiClient,e);return a=xt("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const f=Crt(u),m=new rQ;return Object.assign(m,f),m})}}async editImageInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=lrt(this.apiClient,e);return s=xt("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),i.then(l=>{const c=crt(l),u=new get;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=kit(this.apiClient,e);return s=xt("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),i.then(l=>{const c=Cit(l),u=new yet;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=ait(this.apiClient,e);return s=xt("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=lit(l),u=new xet;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=pit(this.apiClient,e);return s=xt("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=mit(l),u=new vet;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=qrt(this.apiClient,e);return a=xt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>UD(u))}else{const c=Vrt(this.apiClient,e);return a=xt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>BD(u))}}async listInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=eit(this.apiClient,e);return a=xt("{models_url}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const f=nit(u),m=new iQ;return Object.assign(m,f),m})}else{const c=Zrt(this.apiClient,e);return a=xt("{models_url}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const f=tit(u),m=new iQ;return Object.assign(m,f),m})}}async update(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Ait(this.apiClient,e);return a=xt("{model}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>UD(u))}else{const c=Sit(this.apiClient,e);return a=xt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>BD(u))}}async delete(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=irt(this.apiClient,e);return a=xt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const f=ort(u),m=new sQ;return Object.assign(m,f),m})}else{const c=rrt(this.apiClient,e);return a=xt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const f=srt(u),m=new sQ;return Object.assign(m,f),m})}}async countTokens(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=ert(this.apiClient,e);return a=xt("{model}:countTokens",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const f=nrt(u),m=new oQ;return Object.assign(m,f),m})}else{const c=Znt(this.apiClient,e);return a=xt("{model}:countTokens",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const f=trt(u),m=new oQ;return Object.assign(m,f),m})}}async computeTokens(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=Gnt(this.apiClient,e);return s=xt("{model}:computeTokens",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),i.then(l=>{const c=Knt(l),u=new bet;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Mrt(this.apiClient,e);return a=xt("{model}:predictLongRunning",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>{const f=Rrt(u),m=new vC;return Object.assign(m,f),m})}else{const c=Ort(this.apiClient,e);return a=xt("{model}:predictLongRunning",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>{const f=Prt(u),m=new vC;return Object.assign(m,f),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bst extends Od{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let s;r&&"httpOptions"in r&&(s=r.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let s;r&&"httpOptions"in r&&(s=r.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=uet(e);return a=xt("{operationName}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o}else{const c=cet(e);return a=xt("{operationName}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o}}async fetchPredictVideosOperationInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=tet(e);return s=xt("{resourceName}:fetchPredictOperation",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wst(t){const e={},n=S(t,["data"]);if(n!=null&&N(e,["data"],n),S(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=S(t,["mimeType"]);return r!=null&&N(e,["mimeType"],r),e}function Est(t){const e={},n=S(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>Pst(s))),N(e,["parts"],i)}const r=S(t,["role"]);return r!=null&&N(e,["role"],r),e}function Sst(t,e,n){const r={},i=S(e,["expireTime"]);n!==void 0&&i!=null&&N(n,["expireTime"],i);const s=S(e,["newSessionExpireTime"]);n!==void 0&&s!=null&&N(n,["newSessionExpireTime"],s);const o=S(e,["uses"]);n!==void 0&&o!=null&&N(n,["uses"],o);const a=S(e,["liveConnectConstraints"]);n!==void 0&&a!=null&&N(n,["bidiGenerateContentSetup"],Ist(t,a));const l=S(e,["lockAdditionalFields"]);return n!==void 0&&l!=null&&N(n,["fieldMask"],l),r}function Ast(t,e){const n={},r=S(e,["config"]);return r!=null&&N(n,["config"],Sst(t,r,n)),n}function Tst(t){const e={};if(S(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=S(t,["fileUri"]);n!=null&&N(e,["fileUri"],n);const r=S(t,["mimeType"]);return r!=null&&N(e,["mimeType"],r),e}function kst(t){const e={},n=S(t,["id"]);n!=null&&N(e,["id"],n);const r=S(t,["args"]);r!=null&&N(e,["args"],r);const i=S(t,["name"]);if(i!=null&&N(e,["name"],i),S(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(S(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Cst(t){const e={};if(S(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=S(t,["enableWidget"]);return n!=null&&N(e,["enableWidget"],n),e}function Nst(t){const e={};if(S(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(S(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=S(t,["timeRangeFilter"]);return n!=null&&N(e,["timeRangeFilter"],n),e}function _st(t,e){const n={},r=S(t,["generationConfig"]);e!==void 0&&r!=null&&N(e,["setup","generationConfig"],r);const i=S(t,["responseModalities"]);e!==void 0&&i!=null&&N(e,["setup","generationConfig","responseModalities"],i);const s=S(t,["temperature"]);e!==void 0&&s!=null&&N(e,["setup","generationConfig","temperature"],s);const o=S(t,["topP"]);e!==void 0&&o!=null&&N(e,["setup","generationConfig","topP"],o);const a=S(t,["topK"]);e!==void 0&&a!=null&&N(e,["setup","generationConfig","topK"],a);const l=S(t,["maxOutputTokens"]);e!==void 0&&l!=null&&N(e,["setup","generationConfig","maxOutputTokens"],l);const c=S(t,["mediaResolution"]);e!==void 0&&c!=null&&N(e,["setup","generationConfig","mediaResolution"],c);const u=S(t,["seed"]);e!==void 0&&u!=null&&N(e,["setup","generationConfig","seed"],u);const f=S(t,["speechConfig"]);e!==void 0&&f!=null&&N(e,["setup","generationConfig","speechConfig"],NB(f));const m=S(t,["thinkingConfig"]);e!==void 0&&m!=null&&N(e,["setup","generationConfig","thinkingConfig"],m);const g=S(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&N(e,["setup","generationConfig","enableAffectiveDialog"],g);const v=S(t,["systemInstruction"]);e!==void 0&&v!=null&&N(e,["setup","systemInstruction"],Est(_s(v)));const x=S(t,["tools"]);if(e!==void 0&&x!=null){let R=ov(x);Array.isArray(R)&&(R=R.map($=>Ost(sv($)))),N(e,["setup","tools"],R)}const b=S(t,["sessionResumption"]);e!==void 0&&b!=null&&N(e,["setup","sessionResumption"],Rst(b));const E=S(t,["inputAudioTranscription"]);e!==void 0&&E!=null&&N(e,["setup","inputAudioTranscription"],E);const C=S(t,["outputAudioTranscription"]);e!==void 0&&C!=null&&N(e,["setup","outputAudioTranscription"],C);const k=S(t,["realtimeInputConfig"]);e!==void 0&&k!=null&&N(e,["setup","realtimeInputConfig"],k);const O=S(t,["contextWindowCompression"]);e!==void 0&&O!=null&&N(e,["setup","contextWindowCompression"],O);const U=S(t,["proactivity"]);if(e!==void 0&&U!=null&&N(e,["setup","proactivity"],U),S(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function Ist(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["setup","model"],$n(t,r));const i=S(e,["config"]);return i!=null&&N(n,["config"],_st(i,n)),n}function Pst(t){const e={},n=S(t,["mediaResolution"]);n!=null&&N(e,["mediaResolution"],n);const r=S(t,["codeExecutionResult"]);r!=null&&N(e,["codeExecutionResult"],r);const i=S(t,["executableCode"]);i!=null&&N(e,["executableCode"],i);const s=S(t,["fileData"]);s!=null&&N(e,["fileData"],Tst(s));const o=S(t,["functionCall"]);o!=null&&N(e,["functionCall"],kst(o));const a=S(t,["functionResponse"]);a!=null&&N(e,["functionResponse"],a);const l=S(t,["inlineData"]);l!=null&&N(e,["inlineData"],wst(l));const c=S(t,["text"]);c!=null&&N(e,["text"],c);const u=S(t,["thought"]);u!=null&&N(e,["thought"],u);const f=S(t,["thoughtSignature"]);f!=null&&N(e,["thoughtSignature"],f);const m=S(t,["videoMetadata"]);return m!=null&&N(e,["videoMetadata"],m),e}function Rst(t){const e={},n=S(t,["handle"]);if(n!=null&&N(e,["handle"],n),S(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Ost(t){const e={},n=S(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(f=>f)),N(e,["functionDeclarations"],u)}if(S(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=S(t,["googleSearchRetrieval"]);r!=null&&N(e,["googleSearchRetrieval"],r);const i=S(t,["computerUse"]);i!=null&&N(e,["computerUse"],i);const s=S(t,["fileSearch"]);s!=null&&N(e,["fileSearch"],s);const o=S(t,["codeExecution"]);if(o!=null&&N(e,["codeExecution"],o),S(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=S(t,["googleMaps"]);a!=null&&N(e,["googleMaps"],Cst(a));const l=S(t,["googleSearch"]);l!=null&&N(e,["googleSearch"],Nst(l));const c=S(t,["urlContext"]);return c!=null&&N(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Mst(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(s=>`${n}.${s}`);e.push(...i)}else e.push(n)}return e.join(",")}function Dst(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const s=r.setup;typeof s=="object"&&s!==null?(t.bidiGenerateContentSetup=s,n=s):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const i=t.fieldMask;if(n){const s=Mst(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)s?t.fieldMask=s:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const o=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];i.length>0&&(a=i.map(c=>o.includes(c)?`generationConfig.${c}`:c));const l=[];s&&l.push(s),a.length>0&&l.push(...a),l.length>0?t.fieldMask=l.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}class Lst extends Od{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=Ast(this.apiClient,e);s=xt("auth_tokens",a._url),o=a._query,delete a.config,delete a._url,delete a._query;const l=Dst(a,e.config);return i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>c)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jst(t,e){const n={},r=S(t,["force"]);return e!==void 0&&r!=null&&N(e,["_query","force"],r),n}function Bst(t){const e={},n=S(t,["name"]);n!=null&&N(e,["_url","name"],n);const r=S(t,["config"]);return r!=null&&jst(r,e),e}function Ust(t){const e={},n=S(t,["name"]);return n!=null&&N(e,["_url","name"],n),e}function Fst(t,e){const n={},r=S(t,["pageSize"]);e!==void 0&&r!=null&&N(e,["_query","pageSize"],r);const i=S(t,["pageToken"]);return e!==void 0&&i!=null&&N(e,["_query","pageToken"],i),n}function $st(t){const e={},n=S(t,["parent"]);n!=null&&N(e,["_url","parent"],n);const r=S(t,["config"]);return r!=null&&Fst(r,e),e}function zst(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["nextPageToken"]);r!=null&&N(e,["nextPageToken"],r);const i=S(t,["documents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),N(e,["documents"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Hst extends Od{constructor(e){super(),this.apiClient=e,this.list=async n=>new Fm(bd.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Ust(e);return s=xt("{name}",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=Bst(e);i=xt("{name}",o._url),s=o._query,delete o._url,delete o._query,await this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=$st(e);return s=xt("{parent}/documents",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=zst(l),u=new wet;return Object.assign(u,c),u})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Vst extends Od{constructor(e,n=new Hst(e)){super(),this.apiClient=e,this.documents=n,this.list=async(r={})=>new Fm(bd.PAGED_ITEM_FILE_SEARCH_STORES,i=>this.listInternal(i),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Mit(e);return s=xt("fileSearchStores",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async get(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=jit(e);return s=xt("{name}",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=Lit(e);i=xt("{name}",o._url),s=o._query,delete o._url,delete o._query,await this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Hit(e);return s=xt("fileSearchStores",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=Vit(l),u=new Eet;return Object.assign(u,c),u})}}async uploadToFileSearchStoreInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=qit(e);return s=xt("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=Git(l),u=new Aet;return Object.assign(u,c),u})}}async importFile(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Fit(e);return s=xt("{file_search_store_name}:importFile",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=Uit(l),u=new SB;return Object.assign(u,c),u})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let uhe=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return uhe=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};const qst=()=>uhe();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $D(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const zD=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ga extends Error{}class Xs extends Ga{constructor(e,n,r,i){super(`${Xs.makeMessage(e,n,r)}`),this.status=e,this.headers=i,this.error=n}static makeMessage(e,n,r){const i=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,r,i){if(!e||!i)return new jN({message:r,cause:zD(n)});const s=n;return e===400?new fhe(e,s,r,i):e===401?new hhe(e,s,r,i):e===403?new phe(e,s,r,i):e===404?new mhe(e,s,r,i):e===409?new ghe(e,s,r,i):e===422?new yhe(e,s,r,i):e===429?new xhe(e,s,r,i):e>=500?new vhe(e,s,r,i):new Xs(e,s,r,i)}}class HD extends Xs{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class jN extends Xs{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class dhe extends jN{constructor({message:e}={}){super({message:e??"Request timed out."})}}class fhe extends Xs{}class hhe extends Xs{}class phe extends Xs{}class mhe extends Xs{}class ghe extends Xs{}class yhe extends Xs{}class xhe extends Xs{}class vhe extends Xs{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Gst=/^[a-z][a-z0-9+.-]*:/i,Kst=t=>Gst.test(t);let VD=t=>(VD=Array.isArray,VD(t));const Wst=VD;let Yst=Wst;const NQ=Yst;function Jst(t){if(!t)return!0;for(const e in t)return!1;return!0}function Xst(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const Qst=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Ga(`${t} must be an integer`);if(e<0)throw new Ga(`${t} must be a positive integer`);return e},Zst=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const eot=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mg="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tot(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const not=()=>{var t,e,n,r,i;const s=tot();if(s==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":mg,"X-Stainless-OS":IQ(Deno.build.os),"X-Stainless-Arch":_Q(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":mg,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(s==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":mg,"X-Stainless-OS":IQ((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":_Q((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(i=globalThis.process.version)!==null&&i!==void 0?i:"unknown"};const o=rot();return o?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":mg,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${o.browser}`,"X-Stainless-Runtime-Version":o.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":mg,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function rot(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,s=r[2]||0,o=r[3]||0;return{browser:e,version:`${i}.${s}.${o}`}}}return null}const _Q=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",IQ=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let NA;const iot=()=>NA??(NA=not());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sot(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function bhe(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function oot(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return bhe({start(){},async pull(n){const{done:r,value:i}=await e.next();r?n.close():n.enqueue(i)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function whe(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function aot(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const r=t.getReader(),i=r.cancel();r.releaseLock(),await i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lot=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ehe=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function WO(t,e,n){return Ehe(),new File(t,e??"unknown_file",n)}function cot(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const uot=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const She=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",dot=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&She(t),fot=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function hot(t,e,n){if(Ehe(),t=await t,dot(t))return t instanceof File?t:WO([await t.arrayBuffer()],t.name);if(fot(t)){const i=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),WO(await qD(i),e,n)}const r=await qD(t);if(e||(e=cot(t)),!(n!=null&&n.type)){const i=r.find(s=>typeof s=="object"&&"type"in s&&s.type);typeof i=="string"&&(n=Object.assign(Object.assign({},n),{type:i}))}return WO(r,e,n)}async function qD(t){var e,n,r,i,s;let o=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)o.push(t);else if(She(t))o.push(t instanceof Blob?t:await t.arrayBuffer());else if(uot(t))try{for(var a=!0,l=Nl(t),c;c=await l.next(),e=c.done,!e;a=!0){i=c.value,a=!1;const u=i;o.push(...await qD(u))}}catch(u){n={error:u}}finally{try{!a&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}else{const u=(s=t==null?void 0:t.constructor)===null||s===void 0?void 0:s.name;throw new Error(`Unexpected data type: ${typeof t}${u?`; constructor: ${u}`:""}${pot(t)}`)}return o}function pot(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ahe{constructor(e){this._client=e}}Ahe._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function The(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const PQ=Object.freeze(Object.create(null)),mot=(t=The)=>(function(n,...r){if(n.length===1)return n[0];let i=!1;const s=[],o=n.reduce((u,f,m)=>{var g,v,x;/[?#]/.test(f)&&(i=!0);const b=r[m];let E=(i?encodeURIComponent:t)(""+b);return m!==r.length&&(b==null||typeof b=="object"&&b.toString===((x=Object.getPrototypeOf((v=Object.getPrototypeOf((g=b.hasOwnProperty)!==null&&g!==void 0?g:PQ))!==null&&v!==void 0?v:PQ))===null||x===void 0?void 0:x.toString))&&(E=b+"",s.push({start:u.length+f.length,length:E.length,error:`Value of type ${Object.prototype.toString.call(b).slice(8,-1)} is not a valid path parameter`})),u+f+(m===r.length?"":E)},""),a=o.split(/[?#]/,1)[0],l=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let c;for(;(c=l.exec(a))!==null;)s.push({start:c.index,length:c[0].length,error:`Value "${c[0]}" can't be safely passed as a path parameter`});if(s.sort((u,f)=>u.start-f.start),s.length>0){let u=0;const f=s.reduce((m,g)=>{const v=" ".repeat(g.start-u),x="^".repeat(g.length);return u=g.start+g.length,m+v+x},"");throw new Ga(`Path parameters result in path with invalid segments:
${s.map(m=>m.error).join(`
`)}
${o}
${f}`)}return o}),_A=mot(The);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class khe extends Ahe{create(e,n){var r;const{api_version:i=this._client.apiVersion}=e,s=wC(e,["api_version"]);if("model"in s&&"agent_config"in s)throw new Ga("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in s&&"generation_config"in s)throw new Ga("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(_A`/${i}/interactions`,Object.assign(Object.assign({body:s},n),{stream:(r=e.stream)!==null&&r!==void 0?r:!1}))}delete(e,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.delete(_A`/${i}/interactions/${e}`,r)}cancel(e,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.post(_A`/${i}/interactions/${e}/cancel`,r)}get(e,n={},r){var i;const s=n??{},{api_version:o=this._client.apiVersion}=s,a=wC(s,["api_version"]);return this._client.get(_A`/${o}/interactions/${e}`,Object.assign(Object.assign({query:a},r),{stream:(i=n==null?void 0:n.stream)!==null&&i!==void 0?i:!1}))}}khe._key=Object.freeze(["interactions"]);class Che extends khe{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function got(t){let e=0;for(const i of t)e+=i.length;const n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}let IA;function IB(t){let e;return(IA??(e=new globalThis.TextEncoder,IA=e.encode.bind(e)))(t)}let PA;function RQ(t){let e;return(PA??(e=new globalThis.TextDecoder,PA=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BN{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?IB(e):e;this.buffer=got([this.buffer,n]);const r=[];let i;for(;(i=yot(this.buffer,this.carriageReturnIndex))!=null;){if(i.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=i.index;continue}if(this.carriageReturnIndex!=null&&(i.index!==this.carriageReturnIndex+1||i.carriage)){r.push(RQ(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const s=this.carriageReturnIndex!==null?i.preceding-1:i.preceding,o=RQ(this.buffer.subarray(0,s));r.push(o),this.buffer=this.buffer.subarray(i.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}}BN.NEWLINE_CHARS=new Set([`
`,"\r"]);BN.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function yot(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function xot(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const EC={off:0,error:200,warn:300,info:400,debug:500},OQ=(t,e,n)=>{if(t){if(Xst(EC,t))return t;Us(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(EC))}`)}};function $b(){}function RA(t,e,n){return!e||EC[t]>EC[n]?$b:e[t].bind(e)}const vot={error:$b,warn:$b,info:$b,debug:$b};let MQ=new WeakMap;function Us(t){var e;const n=t.logger,r=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return vot;const i=MQ.get(n);if(i&&i[0]===r)return i[1];const s={error:RA("error",n,r),warn:RA("warn",n,r),info:RA("info",n,r),debug:RA("debug",n,r)};return MQ.set(n,[r,s]),s}const sp=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let bot=class zb{constructor(e,n,r){this.iterator=e,this.controller=n,this.client=r}static fromSSEResponse(e,n,r){let i=!1;const s=r?Us(r):console;function o(){return Cl(this,arguments,function*(){var l,c,u,f;if(i)throw new Ga("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let m=!1;try{try{for(var g=!0,v=Nl(wot(e,n)),x;x=yield tn(v.next()),l=x.done,!l;g=!0){f=x.value,g=!1;const b=f;if(!m)if(b.data.startsWith("[DONE]")){m=!0;continue}else try{yield yield tn(JSON.parse(b.data))}catch(E){throw s.error("Could not parse message into JSON:",b.data),s.error("From chunk:",b.raw),E}}}catch(b){c={error:b}}finally{try{!g&&!l&&(u=v.return)&&(yield tn(u.call(v)))}finally{if(c)throw c.error}}m=!0}catch(b){if($D(b))return yield tn(void 0);throw b}finally{m||n.abort()}})}return new zb(o,n,r)}static fromReadableStream(e,n,r){let i=!1;function s(){return Cl(this,arguments,function*(){var l,c,u,f;const m=new BN,g=whe(e);try{for(var v=!0,x=Nl(g),b;b=yield tn(x.next()),l=b.done,!l;v=!0){f=b.value,v=!1;const E=f;for(const C of m.decode(E))yield yield tn(C)}}catch(E){c={error:E}}finally{try{!v&&!l&&(u=x.return)&&(yield tn(u.call(x)))}finally{if(c)throw c.error}}for(const E of m.flush())yield yield tn(E)})}function o(){return Cl(this,arguments,function*(){var l,c,u,f;if(i)throw new Ga("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let m=!1;try{try{for(var g=!0,v=Nl(s()),x;x=yield tn(v.next()),l=x.done,!l;g=!0){f=x.value,g=!1;const b=f;m||b&&(yield yield tn(JSON.parse(b)))}}catch(b){c={error:b}}finally{try{!g&&!l&&(u=v.return)&&(yield tn(u.call(v)))}finally{if(c)throw c.error}}m=!0}catch(b){if($D(b))return yield tn(void 0);throw b}finally{m||n.abort()}})}return new zb(o,n,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),i=s=>({next:()=>{if(s.length===0){const o=r.next();e.push(o),n.push(o)}return s.shift()}});return[new zb(()=>i(e),this.controller,this.client),new zb(()=>i(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return bhe({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:i,done:s}=await n.next();if(s)return r.close();const o=IB(JSON.stringify(i)+`
`);r.enqueue(o)}catch(i){r.error(i)}},async cancel(){var r;await((r=n.return)===null||r===void 0?void 0:r.call(n))}})}};function wot(t,e){return Cl(this,arguments,function*(){var r,i,s,o;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Ga("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Ga("Attempted to iterate over a response with no body");const a=new Sot,l=new BN,c=whe(t.body);try{for(var u=!0,f=Nl(Eot(c)),m;m=yield tn(f.next()),r=m.done,!r;u=!0){o=m.value,u=!1;const g=o;for(const v of l.decode(g)){const x=a.decode(v);x&&(yield yield tn(x))}}}catch(g){i={error:g}}finally{try{!u&&!r&&(s=f.return)&&(yield tn(s.call(f)))}finally{if(i)throw i.error}}for(const g of l.flush()){const v=a.decode(g);v&&(yield yield tn(v))}})}function Eot(t){return Cl(this,arguments,function*(){var n,r,i,s;let o=new Uint8Array;try{for(var a=!0,l=Nl(t),c;c=yield tn(l.next()),n=c.done,!n;a=!0){s=c.value,a=!1;const u=s;if(u==null)continue;const f=u instanceof ArrayBuffer?new Uint8Array(u):typeof u=="string"?IB(u):u;let m=new Uint8Array(o.length+f.length);m.set(o),m.set(f,o.length),o=m;let g;for(;(g=xot(o))!==-1;)yield yield tn(o.slice(0,g)),o=o.slice(g)}}catch(u){r={error:u}}finally{try{!a&&!n&&(i=l.return)&&(yield tn(i.call(l)))}finally{if(r)throw r.error}}o.length>0&&(yield yield tn(o))})}class Sot{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,i]=Aot(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}function Aot(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Tot(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:i,startTime:s}=e,o=await(async()=>{var a;if(e.options.stream)return Us(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):bot.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const l=n.headers.get("content-type"),c=(a=l==null?void 0:l.split(";")[0])===null||a===void 0?void 0:a.trim();return(c==null?void 0:c.includes("application/json"))||(c==null?void 0:c.endsWith("+json"))?await n.json():await n.text()})();return Us(t).debug(`[${r}] response parsed`,sp({retryOfRequestLogID:i,url:n.url,status:n.status,body:o,durationMs:Date.now()-s})),o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class PB extends Promise{constructor(e,n,r=Tot){super(i=>{i(null)}),this.responsePromise=n,this.parseResponse=r,this.client=e}_thenUnwrap(e){return new PB(this.client,this.responsePromise,async(n,r)=>e(await this.parseResponse(n,r),r))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Nhe=Symbol("brand.privateNullableHeaders");function*kot(t){if(!t)return;if(Nhe in t){const{values:r,nulls:i}=t;yield*r.entries();for(const s of i)yield[s,null];return}let e=!1,n;t instanceof Headers?n=t.entries():NQ(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const s=NQ(r[1])?r[1]:[r[1]];let o=!1;for(const a of s)a!==void 0&&(e&&!o&&(o=!0,yield[i,null]),yield[i,a])}}const Cb=t=>{const e=new Headers,n=new Set;for(const r of t){const i=new Set;for(const[s,o]of kot(r)){const a=s.toLowerCase();i.has(a)||(e.delete(s),i.add(a)),o===null?(e.delete(s),n.add(a)):(e.append(s,o),n.delete(a))}}return{[Nhe]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const YO=t=>{var e,n,r,i,s,o;if(typeof globalThis.process<"u")return(r=(n=(e=YZe)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(o=(s=(i=globalThis.Deno.env)===null||i===void 0?void 0:i.get)===null||s===void 0?void 0:s.call(i,t))===null||o===void 0?void 0:o.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var _he;class UN{constructor(e){var n,r,i,s,o,a,l,{baseURL:c=YO("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:u=(n=YO("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:f="v1beta"}=e,m=wC(e,["baseURL","apiKey","apiVersion"]);const g=Object.assign(Object.assign({apiKey:u,apiVersion:f},m),{baseURL:c||"https://generativelanguage.googleapis.com"});this.baseURL=g.baseURL,this.timeout=(r=g.timeout)!==null&&r!==void 0?r:UN.DEFAULT_TIMEOUT,this.logger=(i=g.logger)!==null&&i!==void 0?i:console;const v="warn";this.logLevel=v,this.logLevel=(o=(s=OQ(g.logLevel,"ClientOptions.logLevel",this))!==null&&s!==void 0?s:OQ(YO("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&o!==void 0?o:v,this.fetchOptions=g.fetchOptions,this.maxRetries=(a=g.maxRetries)!==null&&a!==void 0?a:2,this.fetch=(l=g.fetch)!==null&&l!==void 0?l:sot(),this.encoder=lot,this._options=g,this.apiKey=u,this.apiVersion=f,this.clientAdapter=g.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=Cb([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Cb([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Cb([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new Ga(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${mg}`}defaultIdempotencyKey(){return`stainless-node-retry-${qst()}`}makeStatusError(e,n,r,i){return Xs.generate(e,n,r,i)}buildURL(e,n,r){const i=!this.baseURLOverridden()&&r||this.baseURL,s=Kst(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return Jst(o)||(n=Object.assign(Object.assign({},o),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(s.search=this.stringifyQuery(n)),s.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(i=>Object.assign({method:e,path:n},i)))}request(e,n=null){return new PB(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){var i,s,o;const a=await e,l=(i=a.maxRetries)!==null&&i!==void 0?i:this.maxRetries;n==null&&(n=l),await this.prepareOptions(a);const{req:c,url:u,timeout:f}=await this.buildRequest(a,{retryCount:l-n});await this.prepareRequest(c,{url:u,options:a});const m="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),g=r===void 0?"":`, retryOf: ${r}`,v=Date.now();if(Us(this).debug(`[${m}] sending request`,sp({retryOfRequestLogID:r,method:a.method,url:u,options:a,headers:c.headers})),!((s=a.signal)===null||s===void 0)&&s.aborted)throw new HD;const x=new AbortController,b=await this.fetchWithTimeout(u,c,f,x).catch(zD),E=Date.now();if(b instanceof globalThis.Error){const k=`retrying, ${n} attempts remaining`;if(!((o=a.signal)===null||o===void 0)&&o.aborted)throw new HD;const O=$D(b)||/timed? ?out/i.test(String(b)+("cause"in b?String(b.cause):""));if(n)return Us(this).info(`[${m}] connection ${O?"timed out":"failed"} - ${k}`),Us(this).debug(`[${m}] connection ${O?"timed out":"failed"} (${k})`,sp({retryOfRequestLogID:r,url:u,durationMs:E-v,message:b.message})),this.retryRequest(a,n,r??m);throw Us(this).info(`[${m}] connection ${O?"timed out":"failed"} - error; no more retries left`),Us(this).debug(`[${m}] connection ${O?"timed out":"failed"} (error; no more retries left)`,sp({retryOfRequestLogID:r,url:u,durationMs:E-v,message:b.message})),O?new dhe:new jN({cause:b})}const C=`[${m}${g}] ${c.method} ${u} ${b.ok?"succeeded":"failed"} with status ${b.status} in ${E-v}ms`;if(!b.ok){const k=await this.shouldRetry(b);if(n&&k){const j=`retrying, ${n} attempts remaining`;return await aot(b.body),Us(this).info(`${C} - ${j}`),Us(this).debug(`[${m}] response error (${j})`,sp({retryOfRequestLogID:r,url:b.url,status:b.status,headers:b.headers,durationMs:E-v})),this.retryRequest(a,n,r??m,b.headers)}const O=k?"error; no more retries left":"error; not retryable";Us(this).info(`${C} - ${O}`);const U=await b.text().catch(j=>zD(j).message),R=Zst(U),$=R?void 0:U;throw Us(this).debug(`[${m}] response error (${O})`,sp({retryOfRequestLogID:r,url:b.url,status:b.status,headers:b.headers,message:$,durationMs:Date.now()-v})),this.makeStatusError(b.status,R,$,b.headers)}return Us(this).info(C),Us(this).debug(`[${m}] response start`,sp({retryOfRequestLogID:r,url:b.url,status:b.status,headers:b.headers,durationMs:E-v})),{response:b,options:a,controller:x,requestLogID:m,retryOfRequestLogID:r,startTime:v}}async fetchWithTimeout(e,n,r,i){const s=n||{},{signal:o,method:a}=s,l=wC(s,["signal","method"]);o&&o.addEventListener("abort",()=>i.abort());const c=setTimeout(()=>i.abort(),r),u=globalThis.ReadableStream&&l.body instanceof globalThis.ReadableStream||typeof l.body=="object"&&l.body!==null&&Symbol.asyncIterator in l.body,f=Object.assign(Object.assign(Object.assign({signal:i.signal},u?{duplex:"half"}:{}),{method:"GET"}),l);a&&(f.method=a.toUpperCase());try{return await this.fetch.call(void 0,e,f)}finally{clearTimeout(c)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,i){var s;let o;const a=i==null?void 0:i.get("retry-after-ms");if(a){const c=parseFloat(a);Number.isNaN(c)||(o=c)}const l=i==null?void 0:i.get("retry-after");if(l&&!o){const c=parseFloat(l);Number.isNaN(c)?o=Date.parse(l)-Date.now():o=c*1e3}if(!(o&&0<=o&&o<60*1e3)){const c=(s=e.maxRetries)!==null&&s!==void 0?s:this.maxRetries;o=this.calculateDefaultRetryTimeoutMillis(n,c)}return await eot(o),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const s=n-e,o=Math.min(.5*Math.pow(2,s),8),a=1-Math.random()*.25;return o*a*1e3}async buildRequest(e,{retryCount:n=0}={}){var r,i,s;const o=Object.assign({},e),{method:a,path:l,query:c,defaultBaseURL:u}=o,f=this.buildURL(l,c,u);"timeout"in o&&Qst("timeout",o.timeout),o.timeout=(r=o.timeout)!==null&&r!==void 0?r:this.timeout;const{bodyHeaders:m,body:g}=this.buildBody({options:o}),v=await this.buildHeaders({options:e,method:a,bodyHeaders:m,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:a,headers:v},o.signal&&{signal:o.signal}),globalThis.ReadableStream&&g instanceof globalThis.ReadableStream&&{duplex:"half"}),g&&{body:g}),(i=this.fetchOptions)!==null&&i!==void 0?i:{}),(s=o.fetchOptions)!==null&&s!==void 0?s:{}),url:f,timeout:o.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:i}){let s={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=e.idempotencyKey);const o=await this.authHeaders(e);let a=Cb([s,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),iot()),this._options.defaultHeaders,r,e.headers,o]);return this.validateHeaders(a),a.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=Cb([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:oot(e)}:this.encoder({body:e,headers:r})}}UN.DEFAULT_TIMEOUT=6e4;class Hi extends UN{constructor(){super(...arguments),this.interactions=new Che(this)}}_he=Hi;Hi.GeminiNextGenAPIClient=_he;Hi.GeminiNextGenAPIClientError=Ga;Hi.APIError=Xs;Hi.APIConnectionError=jN;Hi.APIConnectionTimeoutError=dhe;Hi.APIUserAbortError=HD;Hi.NotFoundError=mhe;Hi.ConflictError=ghe;Hi.RateLimitError=xhe;Hi.BadRequestError=fhe;Hi.AuthenticationError=hhe;Hi.InternalServerError=vhe;Hi.PermissionDeniedError=phe;Hi.UnprocessableEntityError=yhe;Hi.toFile=hot;Hi.Interactions=Che;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Cot(t,e){const n={},r=S(t,["name"]);return r!=null&&N(n,["_url","name"],r),n}function Not(t,e){const n={},r=S(t,["name"]);return r!=null&&N(n,["_url","name"],r),n}function _ot(t,e){const n={},r=S(t,["sdkHttpResponse"]);return r!=null&&N(n,["sdkHttpResponse"],r),n}function Iot(t,e){const n={},r=S(t,["sdkHttpResponse"]);return r!=null&&N(n,["sdkHttpResponse"],r),n}function Pot(t,e,n){const r={};if(S(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=S(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&N(e,["displayName"],i),S(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=S(t,["epochCount"]);e!==void 0&&s!=null&&N(e,["tuningTask","hyperparameters","epochCount"],s);const o=S(t,["learningRateMultiplier"]);if(o!=null&&N(r,["tuningTask","hyperparameters","learningRateMultiplier"],o),S(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(S(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(S(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=S(t,["batchSize"]);e!==void 0&&a!=null&&N(e,["tuningTask","hyperparameters","batchSize"],a);const l=S(t,["learningRate"]);if(e!==void 0&&l!=null&&N(e,["tuningTask","hyperparameters","learningRate"],l),S(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(S(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function Rot(t,e,n){const r={};let i=S(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const g=S(t,["validationDataset"]);e!==void 0&&g!=null&&N(e,["supervisedTuningSpec"],DQ(g))}else if(i==="PREFERENCE_TUNING"){const g=S(t,["validationDataset"]);e!==void 0&&g!=null&&N(e,["preferenceOptimizationSpec"],DQ(g))}const s=S(t,["tunedModelDisplayName"]);e!==void 0&&s!=null&&N(e,["tunedModelDisplayName"],s);const o=S(t,["description"]);e!==void 0&&o!=null&&N(e,["description"],o);let a=S(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const g=S(t,["epochCount"]);e!==void 0&&g!=null&&N(e,["supervisedTuningSpec","hyperParameters","epochCount"],g)}else if(a==="PREFERENCE_TUNING"){const g=S(t,["epochCount"]);e!==void 0&&g!=null&&N(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],g)}let l=S(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const g=S(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&N(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],g)}else if(l==="PREFERENCE_TUNING"){const g=S(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&N(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],g)}let c=S(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const g=S(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&N(e,["supervisedTuningSpec","exportLastCheckpointOnly"],g)}else if(c==="PREFERENCE_TUNING"){const g=S(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&N(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],g)}let u=S(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const g=S(t,["adapterSize"]);e!==void 0&&g!=null&&N(e,["supervisedTuningSpec","hyperParameters","adapterSize"],g)}else if(u==="PREFERENCE_TUNING"){const g=S(t,["adapterSize"]);e!==void 0&&g!=null&&N(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],g)}if(S(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(S(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const f=S(t,["labels"]);e!==void 0&&f!=null&&N(e,["labels"],f);const m=S(t,["beta"]);return e!==void 0&&m!=null&&N(e,["preferenceOptimizationSpec","hyperParameters","beta"],m),r}function Oot(t,e){const n={},r=S(t,["baseModel"]);r!=null&&N(n,["baseModel"],r);const i=S(t,["preTunedModel"]);i!=null&&N(n,["preTunedModel"],i);const s=S(t,["trainingDataset"]);s!=null&&Vot(s);const o=S(t,["config"]);return o!=null&&Pot(o,n),n}function Mot(t,e){const n={},r=S(t,["baseModel"]);r!=null&&N(n,["baseModel"],r);const i=S(t,["preTunedModel"]);i!=null&&N(n,["preTunedModel"],i);const s=S(t,["trainingDataset"]);s!=null&&qot(s,n,e);const o=S(t,["config"]);return o!=null&&Rot(o,n,e),n}function Dot(t,e){const n={},r=S(t,["name"]);return r!=null&&N(n,["_url","name"],r),n}function Lot(t,e){const n={},r=S(t,["name"]);return r!=null&&N(n,["_url","name"],r),n}function jot(t,e,n){const r={},i=S(t,["pageSize"]);e!==void 0&&i!=null&&N(e,["_query","pageSize"],i);const s=S(t,["pageToken"]);e!==void 0&&s!=null&&N(e,["_query","pageToken"],s);const o=S(t,["filter"]);return e!==void 0&&o!=null&&N(e,["_query","filter"],o),r}function Bot(t,e,n){const r={},i=S(t,["pageSize"]);e!==void 0&&i!=null&&N(e,["_query","pageSize"],i);const s=S(t,["pageToken"]);e!==void 0&&s!=null&&N(e,["_query","pageToken"],s);const o=S(t,["filter"]);return e!==void 0&&o!=null&&N(e,["_query","filter"],o),r}function Uot(t,e){const n={},r=S(t,["config"]);return r!=null&&jot(r,n),n}function Fot(t,e){const n={},r=S(t,["config"]);return r!=null&&Bot(r,n),n}function $ot(t,e){const n={},r=S(t,["sdkHttpResponse"]);r!=null&&N(n,["sdkHttpResponse"],r);const i=S(t,["nextPageToken"]);i!=null&&N(n,["nextPageToken"],i);const s=S(t,["tunedModels"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>Ihe(a))),N(n,["tuningJobs"],o)}return n}function zot(t,e){const n={},r=S(t,["sdkHttpResponse"]);r!=null&&N(n,["sdkHttpResponse"],r);const i=S(t,["nextPageToken"]);i!=null&&N(n,["nextPageToken"],i);const s=S(t,["tuningJobs"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>GD(a))),N(n,["tuningJobs"],o)}return n}function Hot(t,e){const n={},r=S(t,["name"]);r!=null&&N(n,["model"],r);const i=S(t,["name"]);return i!=null&&N(n,["endpoint"],i),n}function Vot(t,e){const n={};if(S(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(S(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=S(t,["examples"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),N(n,["examples","examples"],i)}return n}function qot(t,e,n){const r={};let i=S(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const o=S(t,["gcsUri"]);e!==void 0&&o!=null&&N(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(i==="PREFERENCE_TUNING"){const o=S(t,["gcsUri"]);e!==void 0&&o!=null&&N(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}let s=S(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const o=S(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&N(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(s==="PREFERENCE_TUNING"){const o=S(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&N(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}if(S(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function Ihe(t,e){const n={},r=S(t,["sdkHttpResponse"]);r!=null&&N(n,["sdkHttpResponse"],r);const i=S(t,["name"]);i!=null&&N(n,["name"],i);const s=S(t,["state"]);s!=null&&N(n,["state"],Gfe(s));const o=S(t,["createTime"]);o!=null&&N(n,["createTime"],o);const a=S(t,["tuningTask","startTime"]);a!=null&&N(n,["startTime"],a);const l=S(t,["tuningTask","completeTime"]);l!=null&&N(n,["endTime"],l);const c=S(t,["updateTime"]);c!=null&&N(n,["updateTime"],c);const u=S(t,["description"]);u!=null&&N(n,["description"],u);const f=S(t,["baseModel"]);f!=null&&N(n,["baseModel"],f);const m=S(t,["_self"]);return m!=null&&N(n,["tunedModel"],Hot(m)),n}function GD(t,e){const n={},r=S(t,["sdkHttpResponse"]);r!=null&&N(n,["sdkHttpResponse"],r);const i=S(t,["name"]);i!=null&&N(n,["name"],i);const s=S(t,["state"]);s!=null&&N(n,["state"],Gfe(s));const o=S(t,["createTime"]);o!=null&&N(n,["createTime"],o);const a=S(t,["startTime"]);a!=null&&N(n,["startTime"],a);const l=S(t,["endTime"]);l!=null&&N(n,["endTime"],l);const c=S(t,["updateTime"]);c!=null&&N(n,["updateTime"],c);const u=S(t,["error"]);u!=null&&N(n,["error"],u);const f=S(t,["description"]);f!=null&&N(n,["description"],f);const m=S(t,["baseModel"]);m!=null&&N(n,["baseModel"],m);const g=S(t,["tunedModel"]);g!=null&&N(n,["tunedModel"],g);const v=S(t,["preTunedModel"]);v!=null&&N(n,["preTunedModel"],v);const x=S(t,["supervisedTuningSpec"]);x!=null&&N(n,["supervisedTuningSpec"],x);const b=S(t,["preferenceOptimizationSpec"]);b!=null&&N(n,["preferenceOptimizationSpec"],b);const E=S(t,["tuningDataStats"]);E!=null&&N(n,["tuningDataStats"],E);const C=S(t,["encryptionSpec"]);C!=null&&N(n,["encryptionSpec"],C);const k=S(t,["partnerModelTuningSpec"]);k!=null&&N(n,["partnerModelTuningSpec"],k);const O=S(t,["customBaseModel"]);O!=null&&N(n,["customBaseModel"],O);const U=S(t,["experiment"]);U!=null&&N(n,["experiment"],U);const R=S(t,["labels"]);R!=null&&N(n,["labels"],R);const $=S(t,["outputUri"]);$!=null&&N(n,["outputUri"],$);const V=S(t,["pipelineJob"]);V!=null&&N(n,["pipelineJob"],V);const j=S(t,["serviceAccount"]);j!=null&&N(n,["serviceAccount"],j);const F=S(t,["tunedModelDisplayName"]);F!=null&&N(n,["tunedModelDisplayName"],F);const W=S(t,["veoTuningSpec"]);return W!=null&&N(n,["veoTuningSpec"],W),n}function Got(t,e){const n={},r=S(t,["sdkHttpResponse"]);r!=null&&N(n,["sdkHttpResponse"],r);const i=S(t,["name"]);i!=null&&N(n,["name"],i);const s=S(t,["metadata"]);s!=null&&N(n,["metadata"],s);const o=S(t,["done"]);o!=null&&N(n,["done"],o);const a=S(t,["error"]);return a!=null&&N(n,["error"],a),n}function DQ(t,e){const n={},r=S(t,["gcsUri"]);r!=null&&N(n,["validationDatasetUri"],r);const i=S(t,["vertexDatasetResource"]);return i!=null&&N(n,["validationDatasetUri"],i),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Kot extends Od{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Fm(bd.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const i={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(i.checkpointId=n.config.preTunedModelCheckpointId);const s=Object.assign(Object.assign({},n),{preTunedModel:i});return s.baseModel=void 0,await this.tuneInternal(s)}else{const i=Object.assign({},n);return await this.tuneInternal(i)}else{const i=Object.assign({},n),s=await this.tuneMldevInternal(i);let o="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?o=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(o=s.name.split("/operations/")[0]),{name:o,state:MD.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Lot(e);return a=xt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>GD(u))}else{const c=Dot(e);return a=xt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>Ihe(u))}}async listInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Fot(e);return a=xt("tuningJobs",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const f=zot(u),m=new aQ;return Object.assign(m,f),m})}else{const c=Uot(e);return a=xt("tunedModels",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const f=$ot(u),m=new aQ;return Object.assign(m,f),m})}}async cancel(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Not(e);return a=xt("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const f=Iot(u),m=new lQ;return Object.assign(m,f),m})}else{const c=Cot(e);return a=xt("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const f=_ot(u),m=new lQ;return Object.assign(m,f),m})}}async tuneInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=Mot(e,e);return s=xt("tuningJobs",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),i.then(l=>GD(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Oot(e);return s=xt("tunedModels",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),i.then(l=>Got(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Wot{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Yot=1024*1024*8,Jot=3,Xot=1e3,Qot=2,SC="x-goog-upload-status";async function Zot(t,e,n){var r;const i=await Phe(t,e,n),s=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[SC])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return s.file}async function eat(t,e,n){var r;const i=await Phe(t,e,n),s=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[SC])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const o=Ffe(s),a=new AB;return Object.assign(a,o),a}async function Phe(t,e,n){var r,i;let s=0,o=0,a=new DD(new Response),l="upload";for(s=t.size;o<s;){const c=Math.min(Yot,s-o),u=t.slice(o,o+c);o+c>=s&&(l+=", finalize");let f=0,m=Xot;for(;f<Jot&&(a=await n.request({path:"",body:u,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(o),"Content-Length":String(c)}}}),!(!((r=a==null?void 0:a.headers)===null||r===void 0)&&r[SC]));)f++,await nat(m),m=m*Qot;if(o+=c,((i=a==null?void 0:a.headers)===null||i===void 0?void 0:i[SC])!=="active")break;if(s<=o)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}async function tat(t){return{size:t.size,type:t.type}}function nat(t){return new Promise(e=>setTimeout(e,t))}class rat{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Zot(e,n,r)}async uploadToFileSearchStore(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await eat(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await tat(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class iat{create(e,n,r){return new sat(e,n,r)}}class sat{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const LQ="x-goog-api-key";class oat{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(LQ)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(LQ,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const aat="gl-node/";class Rhe{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new Hi({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=ZZe(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const i=new oat(this.apiKey);this.apiClient=new est({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:aat+"web",uploader:new rat,downloader:new Wot}),this.models=new vst(this.apiClient),this.live=new hst(this.apiClient,i,new iat),this.batches=new Itt(this.apiClient),this.chats=new dnt(this.models,this.apiClient),this.caches=new lnt(this.apiClient),this.files=new wnt(this.apiClient),this.operations=new bst(this.apiClient),this.authTokens=new Lst(this.apiClient),this.tunings=new Kot(this.apiClient),this.fileSearchStores=new Vst(this.apiClient)}}const Ohe={inputPricePerMillion:.15,outputPricePerMillion:.6,customModelPricing:{"gemini-3-flash-preview":{input:.15,output:.6},"gemini-2.5-pro":{input:1.25,output:10},"gemini-2.5-flash":{input:.15,output:.6},"gemini-2.5-flash-lite":{input:.075,output:.3},"gemini-2.0-flash":{input:.1,output:.4},"gemini-2.0-flash-lite":{input:.075,output:.3}}},jQ={records:[],pricing:Ohe},BQ="token_usage_store";class lat{constructor(){this.isInitialized=!1,this.initPromise=null,this.state=jQ,this.listeners=new Set,this.initPromise=this.initialize()}async initialize(){this.isInitialized||(await this.loadState(),this.isInitialized=!0,this.notifyListeners())}async waitForInit(){this.initPromise&&await this.initPromise}async loadState(){try{const e=await Ae.getItem(Ae.getUserKey(BQ));if(e){const n=JSON.parse(e);this.state={...jQ,...n,pricing:{...Ohe,...n.pricing||{}}}}}catch(e){console.error("[TokenUsageStore] Failed to load state:",e)}}async saveState(){try{await Ae.setItem(Ae.getUserKey(BQ),JSON.stringify(this.state))}catch(e){console.error("[TokenUsageStore] Failed to save state:",e)}}notifyListeners(){this.listeners.forEach(e=>e())}notify(){this.notifyListeners(),this.saveState()}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}getSnapshot(){return this.state}addRecord(e){const r=[{...e,id:Date.now().toString()+Math.random().toString().slice(2,6),timestamp:Date.now()},...this.state.records].slice(0,1e3);this.state={...this.state,records:r},this.notify(),console.log(`[TokenUsageStore] Recorded: ${e.source} ${e.operation} - In: ${e.inputTokens}, Out: ${e.outputTokens}`)}updatePricing(e){this.state={...this.state,pricing:{...this.state.pricing,...e}},this.notify()}clearHistory(){this.state={...this.state,records:[]},this.notify()}calculateCost(e,n,r){var s;const i=this.state.pricing;if(r&&((s=i.customModelPricing)!=null&&s[r])){const o=i.customModelPricing[r];return e*o.input/1e6+n*o.output/1e6}return e*i.inputPricePerMillion/1e6+n*i.outputPricePerMillion/1e6}getStats(){var l;const e=this.state.records,n=new Date,r=new Date(n.getFullYear(),n.getMonth(),n.getDate()).getTime(),i=new Date(n.getFullYear(),n.getMonth(),1).getTime(),s={totalInputTokens:0,totalOutputTokens:0,totalCost:0,bySource:{MANAGER:{input:0,output:0,cost:0,count:0},DEALER:{input:0,output:0,cost:0,count:0},POLYMARKET_DEALER:{input:0,output:0,cost:0,count:0}},byOperation:{},today:{input:0,output:0,cost:0},thisMonth:{input:0,output:0,cost:0},dealerMetrics:{avgTokensPerCoin:0,avgTokensPerCycle:0,totalCoinsAnalyzed:0},managerMetrics:{avgTokensPerQuery:0,totalQueries:0}};let o=0,a=0;for(const c of e){const u=this.calculateCost(c.inputTokens,c.outputTokens,c.model);s.totalInputTokens+=c.inputTokens,s.totalOutputTokens+=c.outputTokens,s.totalCost+=u,s.bySource[c.source].input+=c.inputTokens,s.bySource[c.source].output+=c.outputTokens,s.bySource[c.source].cost+=u,s.bySource[c.source].count++,s.byOperation[c.operation]||(s.byOperation[c.operation]={input:0,output:0,cost:0,count:0}),s.byOperation[c.operation].input+=c.inputTokens,s.byOperation[c.operation].output+=c.outputTokens,s.byOperation[c.operation].cost+=u,s.byOperation[c.operation].count++,c.timestamp>=r&&(s.today.input+=c.inputTokens,s.today.output+=c.outputTokens,s.today.cost+=u),c.timestamp>=i&&(s.thisMonth.input+=c.inputTokens,s.thisMonth.output+=c.outputTokens,s.thisMonth.cost+=u),c.source==="DEALER"&&(o+=c.inputTokens+c.outputTokens,a++,(l=c.metadata)!=null&&l.coinsAnalyzed&&(s.dealerMetrics.totalCoinsAnalyzed+=c.metadata.coinsAnalyzed)),c.source==="MANAGER"&&s.managerMetrics.totalQueries++}if(s.dealerMetrics.totalCoinsAnalyzed>0&&(s.dealerMetrics.avgTokensPerCoin=o/s.dealerMetrics.totalCoinsAnalyzed),a>0&&(s.dealerMetrics.avgTokensPerCycle=o/a),s.managerMetrics.totalQueries>0){const c=s.bySource.MANAGER.input+s.bySource.MANAGER.output;s.managerMetrics.avgTokensPerQuery=c/s.managerMetrics.totalQueries}return s}getRecords(e=50,n){let r=this.state.records;return n&&(r=r.filter(i=>i.source===n)),r.slice(0,e)}}const As=new lat,ry={gemini:[{id:"gemini-3-flash-preview",name:"Gemini 3 Flash Preview",description:"Next generation (Preview)",inputPricePerMillion:.1,outputPricePerMillion:.4},{id:"gemini-2.5-flash",name:"Gemini 2.5 Flash",description:"Fast & balanced",inputPricePerMillion:.15,outputPricePerMillion:.6},{id:"gemini-2.5-pro",name:"Gemini 2.5 Pro",description:"Most capable",inputPricePerMillion:1.25,outputPricePerMillion:10},{id:"gemini-2.5-flash-lite",name:"Gemini 2.5 Flash-Lite",description:"Lightweight",inputPricePerMillion:.075,outputPricePerMillion:.3},{id:"gemini-2.0-flash",name:"Gemini 2.0 Flash",description:"Stable",inputPricePerMillion:.1,outputPricePerMillion:.4},{id:"gemini-2.0-flash-lite",name:"Gemini 2.0 Flash-Lite",description:"Economy",inputPricePerMillion:.075,outputPricePerMillion:.3}],openai:[{id:"gpt-4o",name:"GPT-4o",description:"Most capable",inputPricePerMillion:2.5,outputPricePerMillion:10},{id:"gpt-4o-mini",name:"GPT-4o Mini",description:"Fast & affordable",inputPricePerMillion:.15,outputPricePerMillion:.6},{id:"gpt-4-turbo",name:"GPT-4 Turbo",description:"Stable",inputPricePerMillion:10,outputPricePerMillion:30},{id:"o1-mini",name:"o1-mini",description:"Reasoning model",inputPricePerMillion:3,outputPricePerMillion:12}],claude:[{id:"claude-sonnet-4-20250514",name:"Claude Sonnet 4",description:"Latest & fastest",inputPricePerMillion:3,outputPricePerMillion:15},{id:"claude-3-5-sonnet-20241022",name:"Claude 3.5 Sonnet",description:"Previous gen",inputPricePerMillion:3,outputPricePerMillion:15},{id:"claude-3-opus-20240229",name:"Claude 3 Opus",description:"Most capable",inputPricePerMillion:15,outputPricePerMillion:75},{id:"claude-3-haiku-20240307",name:"Claude 3 Haiku",description:"Economy",inputPricePerMillion:.25,outputPricePerMillion:1.25}]},hu={gemini:{name:"Google Gemini",icon:"",color:"#4285F4",keyUrl:"https://aistudio.google.com/apikey"},openai:{name:"OpenAI",icon:"",color:"#10A37F",keyUrl:"https://platform.openai.com/api-keys"},claude:{name:"Anthropic Claude",icon:"",color:"#D97757",keyUrl:"https://console.anthropic.com/settings/keys"}},cat={gemini:{minIntervalMs:5e3,maxRetries:5,baseBackoffMs:5e3,maxBackoffMs:12e4,jitterMs:1e3},openai:{minIntervalMs:500,maxRetries:3,baseBackoffMs:1e3,maxBackoffMs:3e4,jitterMs:500},claude:{minIntervalMs:500,maxRetries:3,baseBackoffMs:1e3,maxBackoffMs:3e4,jitterMs:500}},UQ={CRITICAL:100,HIGH:75,NORMAL:50,LOW:25};class Pg{constructor(){this.queue=[],this.isProcessing=!1,this.lastRequestTime=0,this.consecutiveRateLimits=0,this.blockedUntil=0,this.successCount=0,this.failureCount=0,this.totalWaitTimeMs=0,this.requestCount=0,this.config={minIntervalMs:5e3,maxRetries:5,baseBackoffMs:5e3,maxBackoffMs:12e4,jitterMs:1e3},this.onRateLimitCallback=null,console.log("[AIRequestQueue]  Initialized global request queue")}static getInstance(){return Pg.instance||(Pg.instance=new Pg),Pg.instance}setConfig(e){const n=cat[e];n&&(this.config={...n},console.log(`[AIRequestQueue]  Config updated for provider: ${e}`))}setOnRateLimit(e){this.onRateLimitCallback=e}enqueue(e){return new Promise((n,r)=>{const i=this.generateId(),s={id:i,priority:e.priority,source:e.source,execute:e.execute,resolve:n,reject:r,timestamp:Date.now(),retries:0,provider:e.provider||"gemini"};this.insertByPriority(s);const o=this.queue.findIndex(a=>a.id===i)+1;console.log(`[AIRequestQueue]  Queued request #${i.slice(-6)} (position: ${o}, priority: ${e.priority}, source: ${e.source})`),this.isProcessing||this.processQueue()})}insertByPriority(e){const n=UQ[e.priority];let r=this.queue.length;for(let i=0;i<this.queue.length;i++){const s=UQ[this.queue[i].priority];if(n>s){r=i;break}}this.queue.splice(r,0,e)}async processQueue(){if(!this.isProcessing){for(this.isProcessing=!0,console.log("[AIRequestQueue]  Starting queue processing");this.queue.length>0;){const e=this.queue.shift();try{await this.waitForSlot();const n=Date.now(),r=await this.executeWithRetry(e),i=Date.now()-e.timestamp;this.successCount++,this.totalWaitTimeMs+=i,this.requestCount++,this.consecutiveRateLimits=0,console.log(`[AIRequestQueue]  Request #${e.id.slice(-6)} completed (wait: ${(i/1e3).toFixed(1)}s)`),e.resolve(r)}catch(n){this.failureCount++,console.error(`[AIRequestQueue]  Request #${e.id.slice(-6)} failed:`,n.message),e.reject(n)}}this.isProcessing=!1,console.log("[AIRequestQueue]  Queue empty, processing stopped")}}async executeWithRetry(e){let n;for(let r=0;r<=this.config.maxRetries;r++)try{return r>0&&console.log(`[AIRequestQueue]  Retry attempt ${r}/${this.config.maxRetries} for #${e.id.slice(-6)}`),await e.execute()}catch(i){if(n=i,this.isRateLimitError(i)){const o=this.parseRetryDelay(i);if(this.handleRateLimit(o),r<this.config.maxRetries){await this.waitForSlot();continue}}if(r===this.config.maxRetries)break;const s=this.calculateBackoff(r);console.log(`[AIRequestQueue]  Waiting ${(s/1e3).toFixed(1)}s before retry...`),await this.sleep(s)}throw n}async waitForSlot(){const e=Date.now();if(this.blockedUntil>e){const l=this.blockedUntil-e;console.log(`[AIRequestQueue]  Rate limited, waiting ${(l/1e3).toFixed(1)}s...`),await this.sleep(l)}const n=Math.pow(2,Math.min(this.consecutiveRateLimits,6)),r=this.config.minIntervalMs*n,i=Math.min(r,this.config.maxBackoffMs),s=Math.random()*this.config.jitterMs,o=i+s,a=e-this.lastRequestTime;if(a<o){const l=o-a;this.consecutiveRateLimits>0&&console.log(`[AIRequestQueue]  Throttling: waiting ${(l/1e3).toFixed(1)}s (backoff level: ${this.consecutiveRateLimits})...`),await this.sleep(l)}this.lastRequestTime=Date.now()}handleRateLimit(e){this.consecutiveRateLimits++;const n=Math.min(this.config.baseBackoffMs+Math.pow(2,this.consecutiveRateLimits)*5e3,this.config.maxBackoffMs);this.blockedUntil=Date.now()+e*1e3+n;const r=e+Math.ceil(n/1e3);if(console.log(`[AIRequestQueue]  Rate limited (hit #${this.consecutiveRateLimits}). Blocked for ${r}s`),this.onRateLimitCallback){const i=this.consecutiveRateLimits>=this.config.maxRetries;this.onRateLimitCallback({consecutiveHits:this.consecutiveRateLimits,blockedForSeconds:r,exhausted:i})}}calculateBackoff(e){const n=this.config.baseBackoffMs*Math.pow(2,e),r=Math.random()*this.config.jitterMs;return Math.min(n+r,this.config.maxBackoffMs)}isRateLimitError(e){const n=typeof e=="string"?e:JSON.stringify(e);return n.includes("429")||n.includes("RESOURCE_EXHAUSTED")||n.includes("Too Many Requests")||n.includes("quota")||n.includes("rate_limit")||n.includes("rate limit")}parseRetryDelay(e){try{const n=typeof e=="string"?e:JSON.stringify(e),r=n.match(/retry in (\d+\.?\d*)s/i);if(r)return Math.ceil(parseFloat(r[1]));const i=n.match(/"retryDelay"\s*:\s*"(\d+)s?"/i);if(i)return parseInt(i[1]);const s=n.match(/retry-after[:\s]+(\d+)/i);if(s)return parseInt(s[1])}catch{}return 30}generateId(){return`req_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}sleep(e){return new Promise(n=>setTimeout(n,e))}getMetrics(){return{queueLength:this.queue.length,avgWaitTimeMs:this.requestCount>0?this.totalWaitTimeMs/this.requestCount:0,successCount:this.successCount,failureCount:this.failureCount,lastRequestTime:this.lastRequestTime,consecutiveRateLimits:this.consecutiveRateLimits,isProcessing:this.isProcessing}}clear(){const e=this.queue.length;this.queue.forEach(n=>{n.reject(new Error("Queue cleared"))}),this.queue=[],console.log(`[AIRequestQueue]  Cleared ${e} pending requests`)}resetMetrics(){this.successCount=0,this.failureCount=0,this.totalWaitTimeMs=0,this.requestCount=0,console.log("[AIRequestQueue]  Metrics reset")}}const Hs=Pg.getInstance();class uat{constructor(){this.providerType="gemini",this.client=null,this.modelName="gemini-2.5-flash"}isInitialized(){return this.client!==null}initialize(e){this.client=new Rhe({apiKey:e})}setModel(e){this.modelName=e}getModel(){return this.modelName}getTools(){const e={name:"getVaultBalance",description:"Get the balance of the internal Vault Wallet. Can show all balances or a specific token balance.",parameters:{type:je.OBJECT,properties:{token:{type:je.STRING,description:"Optional: Symbol or Mint Address of specific token to check."}}}},n={name:"executeSwap",description:"Execute a token swap on Raydium Devnet.",parameters:{type:je.OBJECT,properties:{inputToken:{type:je.STRING,description:"Symbol or Mint Address of token to sell"},outputToken:{type:je.STRING,description:"Symbol or Mint Address of token to buy"},amount:{type:je.NUMBER,description:"Amount of input token to swap"}},required:["inputToken","outputToken","amount"]}},r={name:"withdrawSol",description:"Transfer SOL from the internal Vault to the connected Owner Wallet.",parameters:{type:je.OBJECT,properties:{amount:{type:je.NUMBER,description:"Amount of SOL to transfer"}},required:["amount"]}},i={name:"transferToken",description:"Transfer SPL tokens or NFTs from the Vault to the Owner Wallet.",parameters:{type:je.OBJECT,properties:{tokenMint:{type:je.STRING,description:"Mint address of the token to transfer"},amount:{type:je.NUMBER,description:"Amount of tokens to transfer"}},required:["tokenMint","amount"]}},s={name:"getMarketPrice",description:"Get the current market price for a given symbol.",parameters:{type:je.OBJECT,properties:{symbol:{type:je.STRING,description:'Trading symbol (e.g., "BTCUSDT")'}},required:["symbol"]}},o={name:"getOHLCV",description:"Get OHLCV candlestick data for a symbol.",parameters:{type:je.OBJECT,properties:{symbol:{type:je.STRING,description:"Trading symbol"},timeframe:{type:je.STRING,description:'Timeframe (e.g., "1", "5", "15", "60", "240", "D")'}},required:["symbol"]}},a={name:"getIndicator",description:"Get a specific technical indicator value for a symbol.",parameters:{type:je.OBJECT,properties:{symbol:{type:je.STRING,description:"Trading symbol"},indicator:{type:je.STRING,description:'Indicator name: "rsi", "macd", "ema", "sma", "stoch"'},timeframe:{type:je.STRING,description:"Timeframe"}},required:["symbol","indicator"]}},l={name:"getTradingViewSummary",description:"Get TradingView buy/sell/neutral recommendation summary.",parameters:{type:je.OBJECT,properties:{symbol:{type:je.STRING,description:"Trading symbol"}},required:["symbol"]}},c={name:"getHLBalance",description:"Get the balance of the Hyperliquid Vault and positions.",parameters:{type:je.OBJECT,properties:{}}},u={name:"getHLPositions",description:"Get open positions in the Hyperliquid Vault.",parameters:{type:je.OBJECT,properties:{}}},f={name:"getHLMarketData",description:"Get market data for a Hyperliquid asset.",parameters:{type:je.OBJECT,properties:{coin:{type:je.STRING,description:'Asset symbol (e.g., "BTC", "ETH")'}},required:["coin"]}},m={name:"createHLOrder",description:"Place an order on Hyperliquid Testnet.",parameters:{type:je.OBJECT,properties:{coin:{type:je.STRING,description:"Asset symbol"},isBuy:{type:je.BOOLEAN,description:"True for LONG, False for SHORT"},size:{type:je.NUMBER,description:"Size of the order"},usdcAmount:{type:je.NUMBER,description:"Amount in USDC to spend"},orderType:{type:je.STRING,description:'Order type: "limit", "market"'},price:{type:je.NUMBER,description:"Limit price"},leverage:{type:je.NUMBER,description:"Leverage multiplier (1-50)"},stopLoss:{type:je.NUMBER,description:"Stop loss price"},takeProfit:{type:je.NUMBER,description:"Take profit price"},reduceOnly:{type:je.BOOLEAN,description:"True to only reduce existing position"}},required:["coin","isBuy","orderType"]}},g={name:"cancelHLOrder",description:"Cancel a specific order on Hyperliquid.",parameters:{type:je.OBJECT,properties:{coin:{type:je.STRING,description:"Asset symbol"},orderId:{type:je.NUMBER,description:"Order ID to cancel"}},required:["coin","orderId"]}},v={name:"updateHLLeverage",description:"Update leverage for a specific asset on Hyperliquid.",parameters:{type:je.OBJECT,properties:{coin:{type:je.STRING,description:"Asset symbol"},leverage:{type:je.NUMBER,description:"New leverage (1-50)"},isCross:{type:je.BOOLEAN,description:"True for cross margin"}},required:["coin","leverage","isCross"]}},x={name:"closeHLPosition",description:"Close an open position on Hyperliquid.",parameters:{type:je.OBJECT,properties:{coin:{type:je.STRING,description:"Asset symbol"},size:{type:je.NUMBER,description:"Optional: partial close size"},orderType:{type:je.STRING,description:'Order type: "market" or "limit"'},price:{type:je.NUMBER,description:"Price for limit orders"}},required:["coin","orderType"]}},b={name:"withdrawFromHL",description:"Execute a USDC withdrawal from Hyperliquid Testnet.",parameters:{type:je.OBJECT,properties:{amount:{type:je.NUMBER,description:"Amount of USDC to withdraw"}},required:["amount"]}},E={name:"getDealerTradeHistory",description:"Query the Hyperliquid Dealer's trade history and AI reasoning.",parameters:{type:je.OBJECT,properties:{coin:{type:je.STRING,description:"Optional: Filter by coin"},limit:{type:je.NUMBER,description:"Max records to return (default 10)"},includeReasoning:{type:je.BOOLEAN,description:"Include full AI reasoning"}}}},C={name:"scheduleTask",description:"Schedule a task to execute at a specific time or when a market condition is met.",parameters:{type:je.OBJECT,properties:{taskType:{type:je.STRING,description:"Type: SWAP, TRANSFER, ALERT, or HL_ORDER"},inputToken:{type:je.STRING,description:"For SWAP/TRANSFER: Input token"},outputToken:{type:je.STRING,description:"For SWAP: Output token"},amount:{type:je.NUMBER,description:"Amount to swap or transfer"},coin:{type:je.STRING,description:"For HL_ORDER: Asset symbol"},isBuy:{type:je.BOOLEAN,description:"For HL_ORDER: True for LONG"},size:{type:je.NUMBER,description:"For HL_ORDER: Order size"},orderType:{type:je.STRING,description:"For HL_ORDER: Order type"},price:{type:je.NUMBER,description:"For HL_ORDER: Limit price"},leverage:{type:je.NUMBER,description:"For HL_ORDER: Leverage"},stopLoss:{type:je.NUMBER,description:"For HL_ORDER: Stop loss"},takeProfit:{type:je.NUMBER,description:"For HL_ORDER: Take profit"},reduceOnly:{type:je.BOOLEAN,description:"For HL_ORDER: Reduce only"},delayMinutes:{type:je.NUMBER,description:"For time-based: Delay in minutes"},conditionIndicator:{type:je.STRING,description:"For condition-based: Indicator name"},conditionSymbol:{type:je.STRING,description:"For condition-based: Trading symbol"},conditionOperator:{type:je.STRING,description:"For condition-based: Comparison operator"},conditionValue:{type:je.NUMBER,description:"For condition-based: Threshold value"},conditionTimeframe:{type:je.STRING,description:"For condition-based: Timeframe"}},required:["taskType"]}};return[{functionDeclarations:[e,n,r,i,C,s,o,a,l,c,u,f,m,g,v,x,b,E]}]}async sendMessage(e,n,r,i){if(!this.client)throw new Error("Gemini not initialized. Please set API Key.");const s=this.client,o=this.modelName,a=()=>this.getTools();return Hs.enqueue({priority:"HIGH",source:"operator",provider:"gemini",execute:async()=>{var m,g,v;const l=e.map(x=>({role:x.role==="model"?"model":"user",parts:[{text:x.content}]})),u=await s.chats.create({model:o,config:{systemInstruction:r,tools:i||a()},history:l}).sendMessage({message:n});let f="";if(u.candidates&&((g=(m=u.candidates[0])==null?void 0:m.content)!=null&&g.parts))for(const x of u.candidates[0].content.parts)x.text&&(f+=x.text);return{text:f,usageMetadata:u.usageMetadata?{promptTokenCount:u.usageMetadata.promptTokenCount||0,candidatesTokenCount:u.usageMetadata.candidatesTokenCount||0}:void 0,functionCalls:((v=u.functionCalls)==null?void 0:v.map(x=>({name:x.name,args:x.args})))||void 0}}})}async sendJsonAnalysis(e,n){if(!this.client)return console.warn("[GeminiProvider] Client not initialized"),null;const r=this.client,i=this.modelName;return Hs.enqueue({priority:"NORMAL",source:"polymarketDealer",provider:"gemini",execute:async()=>{var l,c;const o=await r.chats.create({model:i,config:{systemInstruction:n,responseMimeType:"application/json"}}).sendMessage({message:e});let a="";if(o.candidates&&((c=(l=o.candidates[0])==null?void 0:l.content)!=null&&c.parts))for(const u of o.candidates[0].content.parts)u.text&&(a+=u.text);return a||null}})}async sendBatchAnalysis(e,n,r){if(!this.client)throw new Error("Gemini not initialized. Please set API Key.");if(r!=null&&r.aborted)throw new DOMException("Dealer cycle aborted","AbortError");const i=this.client,s=this.modelName,o=this.getBatchDealerSystemInstruction(),a=(u,f,m)=>this.normalizeDecisions(u,f,m),l=e.cycleSummary?`
[RECENT ACTIVITY CONTEXT]
${e.cycleSummary}
`:"",c=`
            [USER STRATEGY]
            ${n}
            ${l}
            [BATCH MARKET DATA]
            ${JSON.stringify(e)}

            Analyze all assets in the batch. Return a JSON Array of decisions.
        `;return Hs.enqueue({priority:"NORMAL",source:"hyperliquidDealer",provider:"gemini",execute:async()=>{var x,b;if(r!=null&&r.aborted)throw new DOMException("Dealer cycle aborted","AbortError");const f=await i.chats.create({model:s,config:{systemInstruction:o,responseMimeType:"application/json"}}).sendMessage({message:c});if(r!=null&&r.aborted)throw new DOMException("Dealer cycle aborted","AbortError");let m="";if(f.candidates&&((b=(x=f.candidates[0])==null?void 0:x.content)!=null&&b.parts))for(const E of f.candidates[0].content.parts)E.text&&(m+=E.text);if(!m)return console.warn("[GeminiProvider] Empty response from batch analysis"),{decisions:[]};const g=m.replace(/```json/g,"").replace(/```/g,"").trim();let v;try{v=JSON.parse(g)}catch(E){return console.error("[GeminiProvider] Failed to parse batch response:",E),{decisions:[]}}return a(v,f.usageMetadata,e)}})}normalizeDecisions(e,n,r){let i=[],s;Array.isArray(e)?i=e:typeof e=="object"&&(e.decisions?i=e.decisions:i=[e],e.cycleSummary&&typeof e.cycleSummary=="string"&&(s=e.cycleSummary.slice(0,350)));const a=i.map(u=>u.action==="LONG"?{...u,action:"BUY"}:u.action==="SHORT"?{...u,action:"SELL"}:u.action==="WAIT"?{...u,action:"HOLD"}:u).filter(u=>{const f=typeof u.coin=="string"&&u.coin.length>0,m=["BUY","SELL","HOLD","CLOSE"].includes(u.action);return f&&m}),l=new Map,c={CLOSE:3,BUY:2,SELL:2,HOLD:1};for(const u of a){const f=u.coin.toUpperCase(),m=l.get(f);if(!m)l.set(f,u);else{const g=c[m.action]||0,v=c[u.action]||0;(v>g||v===g&&(u.confidence||0)>(m.confidence||0))&&l.set(f,u)}}return{decisions:Array.from(l.values()),cycleSummary:s}}getBatchDealerSystemInstruction(){return`
            You are Hyperliquid Dealer, an autonomous crypto trading engine.
            Your goal is to analyze specific assets and output a TRADING DECISION for EACH one.

            You will receive:
            1. A JSON Object containing an array of 'coins' with their Market Data (Price, Indicators) AND HISTORICAL SERIES.
            2. Portfolio Context (Balance, Open Positions, Risk Limits, userFees with makerFee/takerFee).
            3. PRE-CALCULATED DIVERGENCE SIGNALS: Each coin includes a 'divergences' array with detected divergence patterns.
            4. [RECENT ACTIVITY CONTEXT]: Summary of your previous analysis cycles (if available).

            You must return valid JSON with this EXACT structure:
            {
                "decisions": [
                    {
                        "coin": "Symbol analyzed",
                        "action": "BUY" | "SELL" | "HOLD" | "CLOSE",
                        "confidence": number (0.0 to 1.0),
                        "reason": "Format: [ACTION] Position Status + Explanation. Max 600 chars.",
                        "suggestedLeverage": number (1-50, optional),
                        "sizeUSDC": number (optional),
                        "orderType": "limit" | "market",
                        "price": number (for limit orders, optional),
                        "stopLoss": number (optional, ONLY for BUY/SELL actions),
                        "takeProfit": number (optional, ONLY for BUY/SELL actions)
                    }
                ],
                "cycleSummary": "Brief 1-2 sentence summary of this analysis cycle for context in the next cycle. Include: key market observations, actions taken, and any notable patterns. Max 300 chars."
            }

            CRITICAL RULES:
            1. ONLY output valid JSON with the structure above.
            2. Must return one decision object per coin provided in the decisions array.
            3. CHECK PORTFOLIO LIMITS: Do not suggest BUY if maxPositions is reached.
            4. CLOSE POSITIONS: Prioritize checking existing positions for exit signals.
            5. LEVERAGE CONSTRAINT: suggestedLeverage MUST NOT exceed portfolio.settings.maxLeverage.
            6. CYCLE SUMMARY: ALWAYS include a cycleSummary field with a brief context for the next cycle.
            
            REASONING FORMAT (CRITICAL - MUST FOLLOW):
            - Start with action: "LONG:", "SHORT:", "CLOSE:", or "WAIT:".
            - POSITION STATUS (MANDATORY - ALWAYS INCLUDE):
              - Check each coin's 'openPosition.hasPosition' field.
              - If hasPosition === false: MUST say "No position." at the START of your reason.
              - If hasPosition === true: MUST say "In [side] at $[entryPx], PnL: $[unrealizedPnl]" at the START.
            - ENTRY/SL/TP VALUES:
              - ONLY include Entry, SL, TP values for BUY or SELL actions (new trades).
              - For HOLD or CLOSE actions, do NOT include Entry/SL/TP values.
            - CRITICAL: If hasPosition is false, DO NOT report SL/TP values - there is no position to have SL/TP.
            - Examples:
              - HOLD with no position: "WAIT: No position. RSI neutral, waiting for signal."
              - BUY with no position: "LONG: No position. RSI divergence detected. Entry: $95000, SL: $93100, TP: $98800"
              - CLOSE with position: "CLOSE: In LONG at $95000, PnL: +$150. Take profit target reached."
        `}}class dat{constructor(){this.providerType="openai",this.apiKey="",this.modelName="gpt-4o-mini",this.baseUrl="https://api.openai.com/v1"}isInitialized(){return this.apiKey.length>0}initialize(e){this.apiKey=e}setModel(e){this.modelName=e}getModel(){return this.modelName}convertToolsToOpenAI(e){if(!e||e.length===0)return[];const n=[];for(const r of e)if(r.functionDeclarations)for(const i of r.functionDeclarations)n.push({type:"function",function:{name:i.name,description:i.description,parameters:this.convertGeminiParamsToOpenAI(i.parameters)}});return n}convertGeminiParamsToOpenAI(e){if(!e)return{type:"object",properties:{}};const n={},r=e.required||[];if(e.properties)for(const[i,s]of Object.entries(e.properties))n[i]={type:this.convertGeminiTypeToOpenAI(s.type),description:s.description||""};return{type:"object",properties:n,required:r}}convertGeminiTypeToOpenAI(e){return{STRING:"string",NUMBER:"number",BOOLEAN:"boolean",OBJECT:"object",ARRAY:"array"}[e]||"string"}async sendMessage(e,n,r,i){if(!this.isInitialized())throw new Error("OpenAI not initialized. Please set API Key.");return Hs.enqueue({priority:"HIGH",source:"operator",provider:"openai",execute:async()=>{var g;const s=[{role:"system",content:r}];for(const v of e)s.push({role:v.role==="model"?"assistant":"user",content:v.content});s.push({role:"user",content:n});const o=this.convertToolsToOpenAI(i),a={model:this.modelName,messages:s};o.length>0&&(a.tools=o,a.tool_choice="auto");const l=await fetch(`${this.baseUrl}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify(a)});if(!l.ok){const v=await l.text();throw new Error(`OpenAI API error: ${l.status} ${v}`)}const c=await l.json(),u=(g=c.choices)==null?void 0:g[0],f=u==null?void 0:u.message,m=[];if(f!=null&&f.tool_calls)for(const v of f.tool_calls)v.type==="function"&&m.push({name:v.function.name,args:JSON.parse(v.function.arguments||"{}")});return{text:(f==null?void 0:f.content)||"",usageMetadata:c.usage?{promptTokenCount:c.usage.prompt_tokens||0,candidatesTokenCount:c.usage.completion_tokens||0}:void 0,functionCalls:m.length>0?m:void 0}}})}async sendJsonAnalysis(e,n){return this.isInitialized()?Hs.enqueue({priority:"NORMAL",source:"polymarketDealer",provider:"openai",execute:async()=>{var s,o,a;const r=await fetch(`${this.baseUrl}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify({model:this.modelName,messages:[{role:"system",content:n},{role:"user",content:e}],response_format:{type:"json_object"}})});if(!r.ok){const l=await r.text();throw new Error(`OpenAI API error: ${r.status} ${l}`)}return((a=(o=(s=(await r.json()).choices)==null?void 0:s[0])==null?void 0:o.message)==null?void 0:a.content)||null}}):(console.warn("[OpenAIProvider] Client not initialized"),null)}async sendBatchAnalysis(e,n,r){if(!this.isInitialized())throw new Error("OpenAI not initialized. Please set API Key.");if(r!=null&&r.aborted)throw new DOMException("Dealer cycle aborted","AbortError");const i=this.getBatchDealerSystemInstruction(),s=`
            [USER STRATEGY]
            ${n}

            [BATCH MARKET DATA]
            ${JSON.stringify(e)}

            Analyze all assets in the batch. Return a JSON object with decisions array and cycleSummary.
        `;return Hs.enqueue({priority:"NORMAL",source:"hyperliquidDealer",provider:"openai",execute:async()=>{var u,f,m,g,v;const o=await fetch(`${this.baseUrl}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify({model:this.modelName,messages:[{role:"system",content:i},{role:"user",content:s}],response_format:{type:"json_object"}}),signal:r});if(!o.ok){const x=await o.text();throw new Error(`OpenAI API error: ${o.status} ${x}`)}const a=await o.json(),l=(m=(f=(u=a.choices)==null?void 0:u[0])==null?void 0:f.message)==null?void 0:m.content;if(!l)throw new Error("Empty response from OpenAI");if(((v=(g=a.choices)==null?void 0:g[0])==null?void 0:v.finish_reason)==="length")throw new Error("Response truncated by length limit");let c;try{c=JSON.parse(l)}catch(x){throw new Error(`Failed to parse JSON response: ${x.message}`)}return this.normalizeDecisions(c)}})}normalizeDecisions(e){let n=[],r;typeof e=="object"&&e.decisions?(n=e.decisions,e.cycleSummary&&typeof e.cycleSummary=="string"&&(r=e.cycleSummary.slice(0,350))):Array.isArray(e)?n=e:typeof e=="object"&&(n=[e]);const s=n.map(l=>l.action==="LONG"?{...l,action:"BUY"}:l.action==="SHORT"?{...l,action:"SELL"}:l.action==="WAIT"?{...l,action:"HOLD"}:l).filter(l=>{const c=typeof l.coin=="string"&&l.coin.length>0,u=["BUY","SELL","HOLD","CLOSE"].includes(l.action);return c&&u}),o=new Map,a={CLOSE:3,BUY:2,SELL:2,HOLD:1};for(const l of s){const c=l.coin.toUpperCase(),u=o.get(c);if(!u)o.set(c,l);else{const f=a[u.action]||0,m=a[l.action]||0;(m>f||m===f&&(l.confidence||0)>(u.confidence||0))&&o.set(c,l)}}return{decisions:Array.from(o.values()),cycleSummary:r}}getBatchDealerSystemInstruction(){return`
            You are Hyperliquid Dealer, an autonomous crypto trading engine.
            Your goal is to analyze specific assets and output a TRADING DECISION for EACH one.

            RESPONSE FORMAT:
            You MUST return a JSON object with a "decisions" array:
            {
                "decisions": [
                    {
                        "coin": "BTC",
                        "action": "BUY" | "SELL" | "HOLD" | "CLOSE",
                        "confidence": 0.0 to 1.0,
                        "reason": "Format: [ACTION] Position Status + Explanation. See REASONING FORMAT below.",
                        "suggestedLeverage": 1-50,
                        "sizeUSDC": number,
                        "orderType": "limit" | "market",
                        "price": number (optional),
                        "stopLoss": number (optional, ONLY for BUY/SELL actions),
                        "takeProfit": number (optional, ONLY for BUY/SELL actions)
                    }
                ]
            }

            CRITICAL RULES:
            1. Return valid JSON with "decisions" array.
            2. One decision per coin provided.
            3. CHECK PORTFOLIO LIMITS: Do not suggest BUY if maxPositions is reached.
            4. LEVERAGE CONSTRAINT: suggestedLeverage MUST NOT exceed portfolio.settings.maxLeverage.
            5. Consider trading costs before recommending trades.
            
            REASONING FORMAT (CRITICAL - MUST FOLLOW):
            - Start with action: "LONG:", "SHORT:", "CLOSE:", or "WAIT:".
            - POSITION STATUS (MANDATORY - ALWAYS INCLUDE):
              - Check each coin's 'openPosition.hasPosition' field.
              - If hasPosition === false: MUST say "No position." at the START of your reason.
              - If hasPosition === true: MUST say "In [side] at $[entryPx], PnL: $[unrealizedPnl]" at the START.
            - ENTRY/SL/TP VALUES:
              - ONLY include Entry, SL, TP values for BUY or SELL actions (new trades).
              - For HOLD or CLOSE actions, do NOT include Entry/SL/TP values.
            - CRITICAL: If hasPosition is false, DO NOT report SL/TP values - there is no position to have SL/TP.
            - Examples:
              - HOLD: "WAIT: No position. RSI neutral, waiting for signal."
              - BUY: "LONG: No position. RSI divergence. Entry: $95000, SL: $93100, TP: $98800"
              - CLOSE: "CLOSE: In LONG at $95000, PnL: +$150. Take profit reached."
        `}}class fat{constructor(){this.providerType="claude",this.apiKey="",this.modelName="claude-sonnet-4-20250514",this.baseUrl="https://api.anthropic.com/v1"}isInitialized(){return this.apiKey.length>0}initialize(e){this.apiKey=e}setModel(e){this.modelName=e}getModel(){return this.modelName}convertToolsToClaudeFormat(e){if(!e||e.length===0)return[];const n=[];for(const r of e)if(r.functionDeclarations)for(const i of r.functionDeclarations)n.push({name:i.name,description:i.description,input_schema:this.convertParamsToJsonSchema(i.parameters)});return n}convertParamsToJsonSchema(e){if(!e)return{type:"object",properties:{}};const n={},r=e.required||[];if(e.properties)for(const[i,s]of Object.entries(e.properties))n[i]={type:this.convertTypeToJsonSchema(s.type),description:s.description||""};return{type:"object",properties:n,required:r}}convertTypeToJsonSchema(e){return{STRING:"string",NUMBER:"number",BOOLEAN:"boolean",OBJECT:"object",ARRAY:"array"}[e]||"string"}async sendMessage(e,n,r,i){if(!this.isInitialized())throw new Error("Claude not initialized. Please set API Key.");return Hs.enqueue({priority:"HIGH",source:"operator",provider:"claude",execute:async()=>{const s=[];for(const m of e)s.push({role:m.role==="model"?"assistant":"user",content:m.content});s.push({role:"user",content:n});const o=this.convertToolsToClaudeFormat(i),a={model:this.modelName,max_tokens:4096,system:r,messages:s};o.length>0&&(a.tools=o);const l=await fetch(`${this.baseUrl}/messages`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":this.apiKey,"anthropic-version":"2023-06-01","anthropic-dangerous-direct-browser-access":"true"},body:JSON.stringify(a)});if(!l.ok){const m=await l.text();throw new Error(`Claude API error: ${l.status} ${m}`)}const c=await l.json();let u="";const f=[];for(const m of c.content||[])m.type==="text"?u+=m.text:m.type==="tool_use"&&f.push({name:m.name,args:m.input||{}});return{text:u,usageMetadata:c.usage?{promptTokenCount:c.usage.input_tokens||0,candidatesTokenCount:c.usage.output_tokens||0}:void 0,functionCalls:f.length>0?f:void 0}}})}async sendJsonAnalysis(e,n){return this.isInitialized()?Hs.enqueue({priority:"NORMAL",source:"polymarketDealer",provider:"claude",execute:async()=>{const r=`${n}

IMPORTANT: You MUST respond with ONLY valid JSON. No explanations, no markdown code blocks, just the raw JSON object.`,i=await fetch(`${this.baseUrl}/messages`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":this.apiKey,"anthropic-version":"2023-06-01","anthropic-dangerous-direct-browser-access":"true"},body:JSON.stringify({model:this.modelName,max_tokens:4096,system:r,messages:[{role:"user",content:e},{role:"assistant",content:"{"}]})});if(!i.ok){const a=await i.text();throw new Error(`Claude API error: ${i.status} ${a}`)}const s=await i.json();let o="";for(const a of s.content||[])a.type==="text"&&(o+=a.text);return"{"+o}}):(console.warn("[ClaudeProvider] Client not initialized"),null)}async sendBatchAnalysis(e,n,r){if(!this.isInitialized())throw new Error("Claude not initialized. Please set API Key.");if(r!=null&&r.aborted)throw new DOMException("Dealer cycle aborted","AbortError");const i=this.getBatchDealerSystemInstruction(),s=`
            [USER STRATEGY]
            ${n}

            [BATCH MARKET DATA]
            ${JSON.stringify(e)}

            Analyze all assets in the batch. Return a JSON object with a "decisions" array.
        `;return Hs.enqueue({priority:"NORMAL",source:"hyperliquidDealer",provider:"claude",execute:async()=>{const o=await fetch(`${this.baseUrl}/messages`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":this.apiKey,"anthropic-version":"2023-06-01","anthropic-dangerous-direct-browser-access":"true"},body:JSON.stringify({model:this.modelName,max_tokens:4096,system:i,messages:[{role:"user",content:s},{role:"assistant",content:'{"decisions":'}]}),signal:r});if(!o.ok){const f=await o.text();throw new Error(`Claude API error: ${o.status} ${f}`)}const a=await o.json();let l="";for(const f of a.content||[])f.type==="text"&&(l+=f.text);if(!l)throw new Error("Empty response from Claude");const c='{"decisions":'+l;let u;try{u=JSON.parse(c)}catch{try{const f=l.replace(/```json/g,"").replace(/```/g,"").trim();u={decisions:JSON.parse("["+f)}}catch(f){throw new Error(`Failed to parse JSON response: ${f.message}`)}}return this.normalizeDecisions(u)}})}normalizeDecisions(e){let n=[],r;typeof e=="object"&&e.decisions?(n=e.decisions,e.cycleSummary&&typeof e.cycleSummary=="string"&&(r=e.cycleSummary.slice(0,350))):Array.isArray(e)?n=e:typeof e=="object"&&(n=[e]);const s=n.map(l=>l.action==="LONG"?{...l,action:"BUY"}:l.action==="SHORT"?{...l,action:"SELL"}:l.action==="WAIT"?{...l,action:"HOLD"}:l).filter(l=>{const c=typeof l.coin=="string"&&l.coin.length>0,u=["BUY","SELL","HOLD","CLOSE"].includes(l.action);return c&&u}),o=new Map,a={CLOSE:3,BUY:2,SELL:2,HOLD:1};for(const l of s){const c=l.coin.toUpperCase(),u=o.get(c);if(!u)o.set(c,l);else{const f=a[u.action]||0,m=a[l.action]||0;(m>f||m===f&&(l.confidence||0)>(u.confidence||0))&&o.set(c,l)}}return{decisions:Array.from(o.values()),cycleSummary:r}}getBatchDealerSystemInstruction(){return`You are Hyperliquid Dealer, an autonomous crypto trading engine.
Your goal is to analyze specific assets and output a TRADING DECISION for EACH one.

RESPONSE FORMAT:
You MUST respond with ONLY valid JSON. The response will be prefilled with '{"decisions":' so you should continue with the array.

Each decision in the array should have:
{
    "coin": "BTC",
    "action": "BUY" | "SELL" | "HOLD" | "CLOSE",
    "confidence": 0.0 to 1.0,
    "reason": "Format: [ACTION] Position Status + Explanation. See REASONING FORMAT below.",
    "suggestedLeverage": 1-50,
    "sizeUSDC": number,
    "orderType": "limit" | "market",
    "price": number (optional),
    "stopLoss": number (optional, ONLY for BUY/SELL actions),
    "takeProfit": number (optional, ONLY for BUY/SELL actions)
}

CRITICAL RULES:
1. Continue the JSON array after the prefill.
2. One decision per coin provided.
3. CHECK PORTFOLIO LIMITS: Do not suggest BUY if maxPositions is reached.
4. LEVERAGE CONSTRAINT: suggestedLeverage MUST NOT exceed portfolio.settings.maxLeverage.
5. Consider trading costs before recommending trades.

REASONING FORMAT (CRITICAL - MUST FOLLOW):
- Start with action: "LONG:", "SHORT:", "CLOSE:", or "WAIT:".
- POSITION STATUS (MANDATORY - ALWAYS INCLUDE):
  - Check each coin's 'openPosition.hasPosition' field.
  - If hasPosition === false: MUST say "No position." at the START of your reason.
  - If hasPosition === true: MUST say "In [side] at $[entryPx], PnL: $[unrealizedPnl]" at the START.
- ENTRY/SL/TP VALUES:
  - ONLY include Entry, SL, TP values for BUY or SELL actions (new trades).
  - For HOLD or CLOSE actions, do NOT include Entry/SL/TP values.
- CRITICAL: If hasPosition is false, DO NOT report SL/TP values - there is no position to have SL/TP.
- Examples:
  - HOLD: "WAIT: No position. RSI neutral, waiting for signal."
  - BUY: "LONG: No position. RSI divergence. Entry: $95000, SL: $93100, TP: $98800"
  - CLOSE: "CLOSE: In LONG at $95000, PnL: +$150. Take profit reached."`}}class hat{constructor(){this.providers=new Map,this.providers.set("gemini",new uat),this.providers.set("openai",new dat),this.providers.set("claude",new fat),this.initializeFromConfig(),Un.subscribe(()=>{this.initializeFromConfig()})}initializeFromConfig(){const e=Un.getSnapshot();for(const[n,r]of Object.entries(e.credentials))r.isConfigured&&r.apiKey&&this.initializeProvider(n,r.apiKey);for(const[n,r]of Object.entries(e.componentConfigs)){const i=this.getProvider(r.providerType);i&&"setModel"in i&&i.setModel(r.modelId)}}getProvider(e){return this.providers.get(e)||null}initializeProvider(e,n){const r=this.providers.get(e);r&&(r.initialize(n),console.log(`[ProviderFactory] Initialized ${e} provider`))}getProviderForComponent(e){const r=Un.getSnapshot().componentConfigs[e];if(!r)return console.warn(`[ProviderFactory] No config found for component: ${e}`),null;const i=this.providers.get(r.providerType);if(!i)return console.warn(`[ProviderFactory] Provider ${r.providerType} not found`),null;if(!i.isInitialized()){const s=Un.getApiKey(r.providerType);if(s)i.initialize(s);else return console.warn(`[ProviderFactory] Provider ${r.providerType} not initialized (no API key)`),null}return"setModel"in i&&i.setModel(r.modelId),i}getModelForComponent(e){var r;return((r=Un.getSnapshot().componentConfigs[e])==null?void 0:r.modelId)||""}isComponentReady(e){const n=this.getProviderForComponent(e);return n!==null&&n.isInitialized()}getAvailableProviders(){return Array.from(this.providers.keys())}getModelsForProvider(e){return ry[e]||[]}validateConfiguration(){const e=[],n=["operator","hyperliquidDealer","polymarketDealer"];for(const r of n)this.isComponentReady(r)||e.push(r);return{valid:e.length===0,missing:e}}}const X0=new hat;class pat{constructor(){this.client=null,this.modelName="gemini-2.5-flash",this.initFromConfig()}initFromConfig(){var i,s;const e=Un.getApiKey("gemini"),n=(s=(i=window.process)==null?void 0:i.env)==null?void 0:s.GEMINI_API_KEY,r=e||n;r&&this.initialize(r)}initialize(e){this.client=new Rhe({apiKey:e})}setModel(e){this.modelName=e}getModel(){return this.modelName}setApiKey(e){Un.setApiKey("gemini",e),this.initialize(e)}getApiKey(){return Un.getApiKey("gemini")}clearApiKey(){Un.clearApiKey("gemini"),this.client=null}isInitialized(){return this.client!==null}getTools(){const e={name:"getVaultBalance",description:"Get the balance of the internal Vault Wallet. Can show all balances or a specific token balance. If no token is specified, ask the user if they want to see all balances or a specific token.",parameters:{type:je.OBJECT,properties:{token:{type:je.STRING,description:"Optional: Symbol (e.g., SOL, USDC) or Mint Address of specific token to check. If not provided, show all balances."}}}},n={name:"executeSwap",description:"Execute a token swap on Raydium Devnet. If the token symbol is not known (not SOL/USDC/RAY), you MUST ask the user for the Mint Address.",parameters:{type:je.OBJECT,properties:{inputToken:{type:je.STRING,description:"Symbol (e.g., SOL) or Mint Address of token to sell"},outputToken:{type:je.STRING,description:"Symbol (e.g., RAY) or Mint Address of token to buy"},amount:{type:je.NUMBER,description:"Amount of input token to swap"}},required:["inputToken","outputToken","amount"]}},r={name:"withdrawSol",description:"Transfer SOL from the internal Vault to the connected Owner Wallet.",parameters:{type:je.OBJECT,properties:{amount:{type:je.NUMBER,description:"Amount of SOL to transfer"}},required:["amount"]}},i={name:"scheduleTask",description:`Schedule a task (swap, transfer, alert, or Hyperliquid order) to execute either at a specific time OR when a market condition is met.
      
      CRITICAL: You MUST provide ALL required parameters. If ANY information is missing, ask the user for it instead of calling this tool.
      
      For TIME-BASED tasks: provide 'delayMinutes'
      For CONDITION-BASED tasks: provide 'conditionIndicator', 'conditionSymbol', 'conditionOperator', 'conditionValue', and 'conditionTimeframe'.
      
      IMPORTANT: 'conditionTimeframe' is REQUIRED for condition-based tasks. If the user does not specify it (e.g., "1h", "4h", "1d"), you MUST ASK them for it. DO NOT DEFAULT TO 'D'.

      Examples:
      - Time-based: delayMinutes=5
      - Condition (SWAP): taskType="SWAP", inputToken="SOL", outputToken="USDC", amount=0.1, conditionIndicator="rsi", conditionSymbol="BTCUSDT", conditionOperator="<", conditionValue=30, conditionTimeframe="D"
      - Condition (HL_ORDER): taskType="HL_ORDER", coin="BTC", isBuy=true, size=0.001, orderType="limit", price=90000, leverage=10, stopLoss=88000, takeProfit=99000, conditionIndicator="rsi", conditionSymbol="BTCUSDT", conditionOperator="<", conditionValue=30, conditionTimeframe="D"`,parameters:{type:je.OBJECT,properties:{taskType:{type:je.STRING,description:"Type of task: SWAP, TRANSFER, ALERT, or HL_ORDER (Hyperliquid order)"},inputToken:{type:je.STRING,description:"For SWAP: Input token symbol or mint address. For TRANSFER: Token to transfer. Not used for ALERT or HL_ORDER."},outputToken:{type:je.STRING,description:"For SWAP: Output token symbol or mint address. Not used for other task types."},amount:{type:je.NUMBER,description:"Amount to swap or transfer. Not used for ALERT or HL_ORDER."},coin:{type:je.STRING,description:'For HL_ORDER: Asset symbol (e.g., "BTC", "ETH", "SOL"). Required for HL_ORDER.'},isBuy:{type:je.BOOLEAN,description:"For HL_ORDER: True for LONG/BUY, False for SHORT/SELL. Required for HL_ORDER."},size:{type:je.NUMBER,description:"For HL_ORDER: Size of the order. Required for HL_ORDER."},orderType:{type:je.STRING,description:'For HL_ORDER: Order type ("limit", "market", "ioc", "alo"). Ask user if not specified.'},price:{type:je.NUMBER,description:"For HL_ORDER: Limit price. Required for LIMIT orders, ignored for MARKET."},leverage:{type:je.NUMBER,description:"For HL_ORDER: Leverage multiplier (1-50). Ask user, default 1x if not specified."},stopLoss:{type:je.NUMBER,description:"For HL_ORDER: Optional stop loss price. Ask user if they want to set one."},takeProfit:{type:je.NUMBER,description:"For HL_ORDER: Optional take profit price. Ask user if they want to set one."},reduceOnly:{type:je.BOOLEAN,description:"For HL_ORDER: True to only reduce existing position. Default false."},delayMinutes:{type:je.NUMBER,description:"For time-based: Number of minutes to wait before executing. Leave empty for condition-based."},conditionIndicator:{type:je.STRING,description:"For condition-based: Indicator name (rsi, macd, ema, sma, stoch, price). Required for condition-based tasks."},conditionSymbol:{type:je.STRING,description:"For condition-based: Trading symbol (e.g., BTCUSDT, SOLUSDT). Required for condition-based tasks."},conditionOperator:{type:je.STRING,description:"For condition-based: Comparison operator (<, >, <=, >=, ==). Required for condition-based tasks."},conditionValue:{type:je.NUMBER,description:"For condition-based: Threshold value to compare against. Required for condition-based tasks."},conditionTimeframe:{type:je.STRING,description:"For condition-based: Timeframe (1, 5, 15, 60, 240, D, W). REQUIRED. If missing, ask user."}},required:["taskType"]}},s={name:"transferToken",description:"Transfer SPL tokens or NFTs from the Vault to the Owner Wallet. You can ONLY send to the Owner, not to any other address.",parameters:{type:je.OBJECT,properties:{tokenMint:{type:je.STRING,description:"Mint address of the token to transfer"},amount:{type:je.NUMBER,description:"Amount of tokens to transfer (in human-readable units, not raw)"}},required:["tokenMint","amount"]}},o={name:"getMarketPrice",description:"Get the current market price, exchange, and last update time for a given symbol.",parameters:{type:je.OBJECT,properties:{symbol:{type:je.STRING,description:'Trading symbol (e.g., "BTCUSDT", "SOLUSDT")'}},required:["symbol"]}},a={name:"getOHLCV",description:"Get OHLCV (Open, High, Low, Close, Volume) candlestick data for a symbol.",parameters:{type:je.OBJECT,properties:{symbol:{type:je.STRING,description:'Trading symbol (e.g., "BTCUSDT", "SOLUSDT")'},timeframe:{type:je.STRING,description:'Timeframe (e.g., "1", "5", "15", "60", "240", "D"). Default is "60".'}},required:["symbol"]}},l={name:"getIndicator",description:"Get a specific technical indicator value for a symbol.",parameters:{type:je.OBJECT,properties:{symbol:{type:je.STRING,description:'Trading symbol (e.g., "BTCUSDT", "SOLUSDT")'},indicator:{type:je.STRING,description:'Indicator name: "rsi", "macd", "ema", "sma", "stoch"'},timeframe:{type:je.STRING,description:'Timeframe (e.g., "1", "5", "15", "60", "240", "D"). Default is "60".'}},required:["symbol","indicator"]}},c={name:"getTradingViewSummary",description:"Get the TradingView buy/sell/neutral recommendation summary for a symbol.",parameters:{type:je.OBJECT,properties:{symbol:{type:je.STRING,description:'Trading symbol (e.g., "BTCUSDT", "SOLUSDT")'}},required:["symbol"]}},u={name:"getHLBalance",description:"Get the balance of the Hyperliquid Vault (USDC) and positions.",parameters:{type:je.OBJECT,properties:{}}},f={name:"getHLPositions",description:"Get open positions in the Hyperliquid Vault.",parameters:{type:je.OBJECT,properties:{}}},m={name:"getHLMarketData",description:"Get market data (price, orderbook) for a Hyperliquid asset.",parameters:{type:je.OBJECT,properties:{coin:{type:je.STRING,description:'Asset symbol (e.g., "BTC", "ETH", "SOL")'}},required:["coin"]}},g={name:"createHLOrder",description:`Place an order on Hyperliquid Testnet. 
      
      **USDC-BASED ORDERS:**
      If user says "comprar X USDC de COIN", provide usdcAmount=X and the system will automatically calculate the size.
      
      CRITICAL: You MUST ask the user for ALL required information before calling this tool:
      1. Coin (asset symbol)
      2. Direction (LONG/BUY or SHORT/SELL)
      3. Size (amount) OR usdcAmount (USDC to spend)
      4. Order Type (LIMIT or MARKET)
      5. Price (required for LIMIT orders)
      6. Leverage (1-50x, default 1x if not specified)
      7. Stop Loss (optional)
      8. Take Profit (optional)
      
      Minimum order value: $10 USD`,parameters:{type:je.OBJECT,properties:{coin:{type:je.STRING,description:'Asset symbol (e.g., "BTC", "ETH", "SOL", "HYPE")'},isBuy:{type:je.BOOLEAN,description:"True for LONG/BUY, False for SHORT/SELL"},size:{type:je.NUMBER,description:"Size of the order in token units. Leave empty if usdcAmount is provided."},usdcAmount:{type:je.NUMBER,description:"Amount in USDC to spend (for buys) or receive (for sells). If provided, size will be auto-calculated."},orderType:{type:je.STRING,description:'Order type: "limit", "market", "ioc", "alo". Ask user if not specified.'},price:{type:je.NUMBER,description:"Limit price. Required for LIMIT orders, ignored for MARKET."},leverage:{type:je.NUMBER,description:"Leverage multiplier (1-50). Ask user, default 1x if not specified."},stopLoss:{type:je.NUMBER,description:"Optional stop loss price. Ask user if they want to set one."},takeProfit:{type:je.NUMBER,description:"Optional take profit price. Ask user if they want to set one."},reduceOnly:{type:je.BOOLEAN,description:"True to only reduce existing position. Default false."}},required:["coin","isBuy","orderType"]}},v={name:"cancelHLOrder",description:"Cancel a specific order on Hyperliquid.",parameters:{type:je.OBJECT,properties:{coin:{type:je.STRING,description:"Asset symbol"},orderId:{type:je.NUMBER,description:"Order ID to cancel"}},required:["coin","orderId"]}},x={name:"updateHLLeverage",description:"Update leverage for a specific asset on Hyperliquid.",parameters:{type:je.OBJECT,properties:{coin:{type:je.STRING,description:"Asset symbol"},leverage:{type:je.NUMBER,description:"New leverage (1-50)"},isCross:{type:je.BOOLEAN,description:"True for cross margin, false for isolated"}},required:["coin","leverage","isCross"]}},b={name:"closeHLPosition",description:"Close an open position on Hyperliquid.",parameters:{type:je.OBJECT,properties:{coin:{type:je.STRING,description:"Asset symbol"},size:{type:je.NUMBER,description:"Optional: partial close size. If not provided, closes entire position."},orderType:{type:je.STRING,description:'Order type: "market" (immediate) or "limit"'},price:{type:je.NUMBER,description:"Price for limit orders"}},required:["coin","orderType"]}},E={name:"withdrawFromHL",description:`Execute a USDC withdrawal from Hyperliquid Testnet Vault to the Owner's wallet.
      
      This tool EXECUTES the withdrawal immediately. Only call this when the user explicitly wants to withdraw/send/transfer USDC from Hyperliquid.
      
      Requirements:
      - Amount must be > $1 (to cover the $1 USDC withdrawal fee)
      - Vault must be unlocked
      - Owner wallet must be connected
      
      Network: Hyperliquid Testnet
      Fee: $1 USDC (deducted from withdrawal amount)
      Processing time: ~5 minutes`,parameters:{type:je.OBJECT,properties:{amount:{type:je.NUMBER,description:"Amount of USDC to withdraw (must be > $1 to cover fee)"}},required:["amount"]}},C={name:"getDealerTradeHistory",description:`Query the Hyperliquid Dealer's trade operation history and AI reasoning.
      
      Use this tool when users ask about:
      - Why a specific position was opened/closed
      - The reasoning behind Dealer trades
      - Details about past or current operations
      - What the Dealer did or is doing
      
      Returns:
      - Operation records with coin, action, price, size, PnL
      - Full AI reasoning and confidence for each trade
      - Recent activity logs`,parameters:{type:je.OBJECT,properties:{coin:{type:je.STRING,description:'Optional: Filter by specific coin (e.g., "BTC", "ETH"). If not provided, returns all operations.'},limit:{type:je.NUMBER,description:"Optional: Maximum number of records to return (default 10, max 50)"},includeReasoning:{type:je.BOOLEAN,description:"Optional: Whether to include full AI reasoning (default true). Set to false for basic info only."}}}};return[{functionDeclarations:[e,n,r,s,i,o,a,l,c,u,f,m,g,v,x,b,E,C]}]}async sendMessage(e,n,r){if(!this.client)throw new Error("AI Agent not initialized. Please set API Key.");const i=this.client,s=this.modelName,o=()=>this.getTools(),a=l=>{l.usageMetadata&&As.addRecord({source:"MANAGER",operation:"QUERY",inputTokens:l.usageMetadata.promptTokenCount||0,outputTokens:l.usageMetadata.candidatesTokenCount||0,model:s})};return Hs.enqueue({priority:"HIGH",source:"operator",provider:"gemini",execute:async()=>{const l=e.map(f=>({role:f.role==="model"?"model":"user",parts:[{text:f.content}]})),u=await i.chats.create({model:s,config:{systemInstruction:r,tools:o()},history:l}).sendMessage({message:n});return a(u),u}})}async getDealerAnalysis(e,n){if(!this.client)throw new Error("AI Agent not initialized.");const r=this.client,i=this.modelName,s=`
      You are Hyperliquid Dealer, an autonomous crypto trading engine.
      Your goal is to analyze provided market data and output a TRADING DECISION based strictly on the user's Strategy and Portfolio Constraints.

      You will receive:
      1. Market Data (Prices, Indicators, Orderbook)
      2. Portfolio Context (Current Balance, Open Positions, PnL, Risk Limits)
      3. TRADING COSTS (Maker/Taker Fees, Funding Rate, Breakeven Prices)

      You must return valid JSON with this schema:
      {
        "action": "BUY" | "SELL" | "HOLD" | "CLOSE",
        "confidence": number (0.0 to 1.0),
        "reason": "Detailed explanation citing technicals, fees, and costs. Include Entry Price, Stop Loss, and Take Profit values if applicable. (Max 600 characters)",
        "coin": "Symbol analyzed",
        "suggestedLeverage": number (1-50, optional, MUST NOT exceed portfolio.settings.maxLeverage),
        "sizeUSDC": number (optional, calculate based on bankroll settings),
        "orderType": "limit" | "market",
        "price": number (for limit orders, optional),
        "stopLoss": number (optional),
        "takeProfit": number (optional)
      }

      CRITICAL RULES:
      1. ONLY output the JSON decision. No markdown blocks, no fluff.
      2. If data is insufficient or unclear, action="HOLD".
      3. CHECK PORTFOLIO LIMITS: Do not buy if 'maxPositions' is reached.
      4. CLOSE POSITIONS: If an open position hits target or stop loss criteria in your analysis, output "CLOSE".
      5. BANKROLL: Using 'manualBankroll' or 'availableBalance' from context, suggest a safe 'sizeUSDC' for new trades.
      6. REASONING FORMAT: Start 'reason' with action: "LONG:", "SHORT:", "CLOSE:", or "WAIT:".
      7. LEVERAGE CONSTRAINT: If suggesting leverage, 'suggestedLeverage' MUST NOT exceed 'portfolio.settings.maxLeverage'. This is a hard limit set by the user.
      
      TRADING COSTS AWARENESS (CRITICAL FOR PROFIT CALCULATION):
      8. FEE CONSIDERATION: Context includes 'tradingCosts.makerFee' and 'tradingCosts.takerFee' (as decimals, e.g., 0.0005 = 0.05%).
         - Total round-trip cost = (takerFee * 2) for market orders or (makerFee * 2) for limit orders.
         - Only enter trades where expected price movement > total round-trip cost.
      9. FUNDING RATE: Context includes 'tradingCosts.fundingRate' (8h rate) and 'estimatedDailyHoldingCost'.
         - Positive funding: Longs pay shorts.
         - Negative funding: Shorts pay longs.
         - Factor funding into holding decisions for swing trades.
      10. BREAKEVEN PRICES: If 'portfolio.positionBreakevens' exists, it contains:
         - breakevenPrice: Price needed to cover entry/exit fees
         - minProfitPrice: Price needed for 1% profit after costs
         - Use these to decide when to CLOSE positions profitably.
      11. PROFIT THRESHOLD: Only suggest trades where expected move > 2x trading costs (to be safe).
    `;return Hs.enqueue({priority:"HIGH",source:"hyperliquidDealer",provider:"gemini",execute:async()=>{var u,f;const o=r.chats.create({model:i,config:{systemInstruction:s,responseMimeType:"application/json"}}),a=`
            [USER STRATEGY]
            ${n}

            [MARKET CONTEXT]
            ${JSON.stringify(e)}
        `,l=await o.sendMessage({message:a});let c="";if(l.candidates&&((f=(u=l.candidates[0])==null?void 0:u.content)!=null&&f.parts))for(const m of l.candidates[0].content.parts)m.text&&(c+=m.text);try{const m=c.replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(m)}catch{return console.error("Failed to parse Dealer JSON response:",c),{action:"HOLD",reason:"Failed to parse AI response"}}}})}async getBatchDealerAnalysis(e,n){var o,a;if(!this.client){console.warn("[AIService] Client not initialized. Attempting lazy init...");const l=Un.getApiKey("gemini"),c=(a=(o=window.process)==null?void 0:o.env)==null?void 0:a.GEMINI_API_KEY,u=l||c;if(u)this.initialize(u),console.log("[AIService] Lazy init successful.");else throw new Error("AI Agent not initialized and no API Key found. Please configure your API key in Settings.")}const r=this.client,i=this.modelName,s=`
      You are Hyperliquid Dealer, an autonomous crypto trading engine.
      Your goal is to analyze specific assets and output a TRADING DECISION for EACH one.

      You will receive:
      1. A JSON Object containing an array of 'coins' with their Market Data (Price, Indicators) AND HISTORICAL SERIES.
      2. Portfolio Context (Balance, Open Positions, Risk Limits, userFees with makerFee/takerFee).
      3. PRE-CALCULATED DIVERGENCE SIGNALS: Each coin includes a 'divergences' array with detected divergence patterns.

      DATA STRUCTURE NOTES:
      - 'portfolio.userFees' contains global makerFee and takerFee (applies to all coins).
      - Each coin's 'tradingCosts' contains only fundingRate and dailyHoldingCost (unique per coin).
      - The keys in each coin's 'indicators' object tell you which indicators are active (e.g., {rsi: ..., macd: ...}).
      - 'ts' is a Unix timestamp (seconds since epoch).

      INDICATOR WEIGHTING SYSTEM:
      - Each indicator includes a 'weight' field (0.5 to 2.0, default 1.0).
      - Each indicator includes a 'category' field (trend, momentum, volume, volatility).
      - weight > 1.0: User considers this indicator MORE important (prioritize its signals)
      - weight < 1.0: User considers this indicator LESS important (lower priority)
      - weight = 1.0: Standard importance
      - When indicators conflict, prefer higher-weighted signals.
      - Give each category's signals equal base weight, then apply individual indicator weights.

      INDICATOR CATEGORIES (do NOT stack similar signals from same category):
      - TREND (EMA, SMA, ADX, Ichimoku): Direction of market
      - MOMENTUM (RSI, MACD, Stochastic): Timing of entry/exit
      - VOLUME (OBV, VWAP): Confirmation of moves
      - VOLATILITY (ATR, Bollinger): Risk context

      AUTONOMOUS MODE (when 'autonomousMode' is true in context):
      - The context includes 'availablePresets' with preset configurations.
      - You MUST analyze market conditions first and choose the best preset.
      - Add a 'chosenPreset' field to your JSON response (outside the decisions array) with one of:
        - 'balanced': For uncertain/mixed signals (default fallback)
        - 'scalp': For high volatility with quick reversals
        - 'trendFollowing': For strong directional trends (ADX > 25)
        - 'meanReversion': For ranging/sideways markets
        - 'volumeConfirm': For breakout scenarios or unusual volume
      - Add a 'presetReason' field explaining why you chose that preset.
      - Focus your analysis on the indicators most relevant to your chosen preset.

      RESPONSE FORMAT:
      - For NORMAL mode: Return JSON array of decisions directly.
      - For AUTONOMOUS mode: Return { "chosenPreset": "...", "presetReason": "...", "decisions": [...] }

      You must return valid JSON with this EXACT schema for each decision:
      {
        "coin": "Symbol analyzed",
        "action": "BUY" | "SELL" | "HOLD" | "CLOSE",
        "confidence": number (0.0 to 1.0),
        "reason": "Format: [ACTION] Position Status + Explanation. POSITION STATUS RULES: If NO open position, say 'No position.' If HAVE open position, say 'In LONG/SHORT at $X, PnL: $Y'. ENTRY/SL/TP RULES: Only include Entry/SL/TP values for BUY or SELL actions. For HOLD/CLOSE, do NOT include Entry/SL/TP. Examples: HOLD='WAIT: No position. RSI neutral.' BUY='LONG: No position. RSI divergence. Entry: $95000, SL: $93100, TP: $98800' CLOSE='CLOSE: In LONG at $95000, PnL: +$150. TP reached.'. Max 600 chars.",
        "suggestedLeverage": number (1-50, optional, MUST NOT exceed portfolio.settings.maxLeverage),
        "sizeUSDC": number (optional, calculate based on bankroll settings),
        "orderType": "limit" | "market",
        "price": number (for limit orders, optional),
        "stopLoss": number (optional),
        "takeProfit": number (optional)
      }

      CRITICAL RULES:
      1. ONLY output valid JSON.
      2. Must return one decision object per coin provided in the input.
      3. CHECK PORTFOLIO LIMITS: Do not suggest BUY if 'portfolio.maxPositions' is reached.
      4. CLOSE POSITIONS: Prioritize checking existing positions for exit signals.
      5. PROFITABILITY: Consider 'portfolio.userFees' and coin's 'tradingCosts'. Only trade if potential > costs.
      6. LEVERAGE CONSTRAINT: If suggesting leverage, 'suggestedLeverage' MUST NOT exceed 'portfolio.settings.maxLeverage'. This is a hard limit set by the user.
      
      7. RISK PROTECTION (CRITICAL - MANDATORY JSON FIELDS):
         - Check 'portfolio.settings.stopLossEnabled' and 'portfolio.settings.takeProfitEnabled'.
         - If 'stopLossEnabled' is true AND 'stopLossPercent' is null: You MUST include the numeric field "stopLoss" in your JSON response (not just in reason text). Example: "stopLoss": 93100.50
         - If 'takeProfitEnabled' is true AND 'takeProfitPercent' is null: You MUST include the numeric field "takeProfit" in your JSON response (not just in reason text). Example: "takeProfit": 98800.00
         - These are SEPARATE JSON FIELDS, not just mentions in the "reason" string.
         - For BUY/LONG: stopLoss should be BELOW entry price, takeProfit should be ABOVE entry price.
         - For SELL/SHORT: stopLoss should be ABOVE entry price, takeProfit should be BELOW entry price.
      
      8. DIVERGENCE SIGNALS (HIGH PRIORITY): Each coin includes a 'divergences' array with pre-calculated signals:
         - BULLISH: Price lower low + RSI/MACD higher low  potential reversal UP
         - BEARISH: Price higher high + RSI/MACD lower high  potential reversal DOWN
         - HIDDEN_BULLISH: Trend continuation signal UP
         - HIDDEN_BEARISH: Trend continuation signal DOWN
         - Strength: WEAK, MODERATE, STRONG (prioritize MODERATE and STRONG signals)
         - Use these divergences with HIGH PRIORITY - they are algorithmically detected and reliable.
       8. REASONING FORMAT (CRITICAL - MUST FOLLOW):
          - Start with action: "LONG:", "SHORT:", "CLOSE:", or "WAIT:".
          - POSITION STATUS (MANDATORY - ALWAYS INCLUDE):
            - Check each coin's 'openPosition.hasPosition' field.
            - If hasPosition === false: MUST say "No position." at the START of your reason.
            - If hasPosition === true: MUST say "In [side] at $[entryPx], PnL: $[unrealizedPnl]" at the START.
          - ENTRY/SL/TP VALUES:
            - ONLY include Entry, SL, TP values for BUY or SELL actions (new trades).
            - For HOLD or CLOSE actions, do NOT include Entry/SL/TP values.
          - CRITICAL: Use ONLY the openPosition data from each coin's context. NEVER invent or guess PnL values.
          - CRITICAL: If hasPosition is false, DO NOT report SL/TP values - there is no position to have SL/TP.
          - MANDATORY: If divergences are present, mention them in your reasoning.
          - RECOMMENDED: Mention indicator weights if they influenced your decision.
         - RECOMMENDED: If 'macro' data is present, mention macro alignment in your reasoning.

      MACRO TIMEFRAME CONFIRMATION (CRITICAL FOR ACCURACY):
      - Each coin MAY include a 'macro' object with indicator values from a HIGHER timeframe.
      - 'macro.timeframe' tells you the macro timeframe (e.g., '240' = 4H, 'D' = Daily, 'W' = Weekly).
      - 'macro.indicators' contains current values only (no history).
      
      MACRO ALIGNMENT RULES:
      - If main timeframe shows OVERBOUGHT but macro shows OVERSOLD: Consider HOLD or reduce confidence by 20-30%.
      - If main timeframe shows OVERSOLD but macro shows OVERBOUGHT: Consider HOLD or reduce confidence by 20-30%.
      - If main and macro ALIGN (both overbought or both oversold): Full confidence trade.
      - If conflicting signals: MENTION THE CONFLICT in your reasoning (e.g., "Main RSI=75 but Macro RSI=30 - conflicting").
      
      EXAMPLES:
      - Main RSI=25 (oversold) + Macro RSI=35 (neutral-oversold) = ALIGNED = Full confidence BUY.
      - Main RSI=75 (overbought) + Macro RSI=30 (oversold) = CONFLICTING = HOLD or reduce size.
      - Use macro as a FILTER to avoid trading against the higher timeframe trend.
    `;return Hs.enqueue({priority:"NORMAL",source:"hyperliquidDealer",provider:"gemini",execute:async()=>{var k,O,U;const l=r.chats.create({model:i,config:{systemInstruction:s,responseMimeType:"application/json"}}),c=`
          [USER STRATEGY]
          ${n}

          [BATCH MARKET DATA]
          ${JSON.stringify(e)}

          Analyze all assets in the batch. Return a JSON Array of decisions.
        `,u=await l.sendMessage({message:c});u.usageMetadata&&As.addRecord({source:"DEALER",operation:"BATCH_ANALYSIS",inputTokens:u.usageMetadata.promptTokenCount||0,outputTokens:u.usageMetadata.candidatesTokenCount||0,model:i,metadata:{coinsAnalyzed:((k=e==null?void 0:e.coins)==null?void 0:k.length)||0}});let f="";if(u.candidates&&((U=(O=u.candidates[0])==null?void 0:O.content)!=null&&U.parts))for(const R of u.candidates[0].content.parts)R.text&&(f+=R.text);if(!f)return console.warn("[AIService] Empty response from Batch Dealer Analysis"),[];const m=f.replace(/```json/g,"").replace(/```/g,"").trim();let g;try{g=JSON.parse(m)}catch(R){return console.warn("[AIService] JSON Parse Error:",R),[]}let v=[];if(Array.isArray(g))v=g;else if(typeof g=="object")v=[g];else return[];const b=v.map(R=>R.action==="LONG"?{...R,action:"BUY"}:R.action==="SHORT"?{...R,action:"SELL"}:R.action==="WAIT"?{...R,action:"HOLD"}:R).filter(R=>{const $=typeof R.coin=="string"&&R.coin.length>0,V=["BUY","SELL","HOLD","CLOSE"].includes(R.action);return!(!$||!V)}),E={CLOSE:3,BUY:2,SELL:2,HOLD:1},C=new Map;for(const R of b){const $=R.coin.toUpperCase(),V=C.get($);if(!V)C.set($,R);else{const j=E[V.action]||0,F=E[R.action]||0;if(F>j)C.set($,R);else if(F===j){const W=V.confidence||0;(R.confidence||0)>W&&C.set($,R)}}}return Array.from(C.values())}})}async analyzePolymarket(e){if(!this.client)return console.warn("[AIService] Client not initialized for Polymarket analysis"),null;const n=this.client,r=this.modelName,i=`
      You are a Polymarket prediction market analyst.
      Your goal is to analyze prediction markets and identify trading opportunities.

      You will receive market data including:
      - Market questions and current YES/NO prices
      - Time to resolution
      - Volume and liquidity data
      - Current portfolio positions

      Respond with a JSON object containing your analysis:
      {
        "decisions": [
          {
            "action": "BUY_YES" | "BUY_NO" | "SELL_YES" | "SELL_NO" | "HOLD",
            "marketId": "string",
            "question": "string",
            "confidence": 0-100,
            "reason": "explanation",
            "suggestedSize": number (USDC),
            "suggestedPrice": number (0-1)
          }
        ],
        "marketOverview": "Brief overall assessment",
        "riskAssessment": "Brief risk commentary"
      }

      RULES:
      1. Only suggest trades with confidence >= 60
      2. Consider time to resolution (avoid markets expiring soon without clear edge)
      3. Factor in liquidity - avoid illiquid markets
      4. Look for mispriced probabilities based on news/fundamentals
      5. Diversify across different categories when possible
    `;return Hs.enqueue({priority:"NORMAL",source:"polymarketDealer",provider:"gemini",execute:async()=>{var l,c;const o=await n.chats.create({model:r,config:{systemInstruction:i,responseMimeType:"application/json"}}).sendMessage({message:e});o.usageMetadata&&As.addRecord({source:"POLYMARKET_DEALER",operation:"ANALYSIS",inputTokens:o.usageMetadata.promptTokenCount||0,outputTokens:o.usageMetadata.candidatesTokenCount||0,model:r});let a="";if(o.candidates&&((c=(l=o.candidates[0])==null?void 0:l.content)!=null&&c.parts))for(const u of o.candidates[0].content.parts)u.text&&(a+=u.text);return a||null}})}getProviderFactory(){return X0}getConfigStore(){return Un}getAvailableProviders(){return["gemini","openai","claude"]}getModelsForProvider(e){return ry[e]||[]}async sendOperatorMessage(e,n,r){var s;const i=X0.getProviderForComponent("operator");if(!i)return console.log("[AIService] Falling back to legacy Gemini for operator"),this.sendMessage(e,n,r);try{const o=await i.sendMessage(e,n,r,((s=i.getTools)==null?void 0:s.call(i))||this.getTools());if(o.usageMetadata){const a=Un.getComponentConfig("operator");As.addRecord({source:"MANAGER",operation:"QUERY",inputTokens:o.usageMetadata.promptTokenCount||0,outputTokens:o.usageMetadata.candidatesTokenCount||0,model:a.modelId})}return{text:o.text,functionCalls:o.functionCalls,usageMetadata:o.usageMetadata,candidates:[{content:{parts:[{text:o.text}]}}]}}catch(o){return console.error("[AIService] Operator provider error:",o),this.sendMessage(e,n,r)}}async getDealerBatchAnalysis(e,n,r){var s;const i=X0.getProviderForComponent("hyperliquidDealer");if(!i)return console.log("[AIService] Falling back to legacy batch analysis"),{decisions:await this.getBatchDealerAnalysis(e,n)};try{const o=await i.sendBatchAnalysis(e,n,r),a=Un.getComponentConfig("hyperliquidDealer");return As.addRecord({source:"DEALER",operation:"BATCH_ANALYSIS",inputTokens:Math.round(JSON.stringify(e).length/4),outputTokens:Math.round(JSON.stringify(o).length/4),model:a.modelId,metadata:{coinsAnalyzed:((s=e==null?void 0:e.coins)==null?void 0:s.length)||0}}),o}catch(o){if((o==null?void 0:o.name)==="AbortError")throw console.log("[AIService] Dealer analysis aborted"),o;return console.error("[AIService] Dealer provider error:",o),{decisions:await this.getBatchDealerAnalysis(e,n)}}}async getDealerAnalysisViaOracle(e,n,r){const i=Un.getComponentConfig("hyperliquidDealer"),s=Un.getComponentApiKey("hyperliquidDealer");if(!s)throw new Error("No AI API key configured for Hyperliquid Dealer");const o={marketContext:e,aiConfig:{provider:i.providerType,apiKey:s,modelId:i.modelId},portfolioContext:n};try{const a=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!a.ok){const c=await a.text();throw new Error(`Strategy Oracle error: ${c}`)}const l=await a.json();return As.addRecord({source:"DEALER",operation:"ORACLE_ANALYSIS",inputTokens:Math.round(JSON.stringify(e).length/4),outputTokens:Math.round(JSON.stringify(l).length/4),model:i.modelId,metadata:{via:"strategy-oracle"}}),{decisions:l.decisions||[],timestamp:l.timestamp||new Date().toISOString()}}catch(a){throw console.error("[AIService] Strategy Oracle call failed:",a),a}}async getPolymarketAnalysis(e){const n=X0.getProviderForComponent("polymarketDealer");if(!n)return console.log("[AIService] Falling back to legacy Polymarket analysis"),this.analyzePolymarket(e);const r=`
      You are a Polymarket prediction market analyst.
      Your goal is to analyze prediction markets and identify trading opportunities.

      Respond with a JSON object containing your analysis:
      {
        "decisions": [
          {
            "action": "BUY_YES" | "BUY_NO" | "SELL_YES" | "SELL_NO" | "HOLD",
            "marketId": "string",
            "question": "string",
            "confidence": 0-100,
            "reason": "explanation",
            "suggestedSize": number (USDC),
            "suggestedPrice": number (0-1)
          }
        ],
        "marketOverview": "Brief overall assessment",
        "riskAssessment": "Brief risk commentary"
      }

      RULES:
      1. Only suggest trades with confidence >= 60
      2. Consider time to resolution
      3. Factor in liquidity
      4. Look for mispriced probabilities
      5. Diversify when possible
    `;try{const i=await n.sendJsonAnalysis(e,r);if(i){const s=Un.getComponentConfig("polymarketDealer");As.addRecord({source:"POLYMARKET_DEALER",operation:"ANALYSIS",inputTokens:Math.round(e.length/4),outputTokens:Math.round(i.length/4),model:s.modelId})}return i}catch(i){return console.error("[AIService] Polymarket provider error:",i),this.analyzePolymarket(e)}}isComponentReady(e){return X0.isComponentReady(e)}getComponentProviderInfo(e){const n=Un.getComponentConfig(e),i=ry[n.providerType].find(s=>s.id===n.modelId);return{provider:n.providerType,model:n.modelId,modelName:(i==null?void 0:i.name)||n.modelId,isReady:X0.isComponentReady(e)}}async generateCycleSummary(e,n){if(!this.client)return console.warn("[AIService] Client not initialized for cycle summary"),"";if(e.length===0)return"";const r=this.client,i=this.modelName,o=`You are a trading analyst summarizing recent trading activity.
Generate a CONCISE contextual summary for an AI trader about to analyze ${n==="hyperliquid"?"crypto perpetual futures trading on Hyperliquid":"prediction market trading on Polymarket"}.

The summary should help the AI understand:
1. Recent market sentiment and patterns observed
2. Actions taken in previous cycles (buys, sells, holds)
3. Key assets/markets being monitored
4. Any notable patterns or trends

CRITICAL RULES:
- Output ONLY plain text, max 300 characters
- Be extremely concise - every word must add value
- Focus on actionable context for the next analysis
- No JSON, no markdown, no formatting`,a=e.map(c=>({time:new Date(c.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),actions:c.decisions.map(u=>`${u.asset}:${u.action}(${Math.round(u.confidence*100)}%)`).join(", "),assets:c.assetsAnalyzed.length})),l=`Recent ${n} trading cycles (newest first):
${a.map((c,u)=>`Cycle ${e.length-u}: ${c.time} - Analyzed ${c.assets} assets. Actions: ${c.actions||"None"}`).join(`
`)}

Generate a brief contextual summary for the next analysis cycle.`;return Hs.enqueue({priority:"LOW",source:n==="hyperliquid"?"hyperliquidDealer":"polymarketDealer",provider:"gemini",execute:async()=>{var c,u;try{const m=await r.chats.create({model:i,config:{systemInstruction:o}}).sendMessage({message:l});m.usageMetadata&&As.addRecord({source:n==="hyperliquid"?"DEALER":"POLYMARKET_DEALER",operation:"CYCLE_SUMMARY",inputTokens:m.usageMetadata.promptTokenCount||0,outputTokens:m.usageMetadata.candidatesTokenCount||0,model:i});let g="";if(m.candidates&&((u=(c=m.candidates[0])==null?void 0:c.content)!=null&&u.parts))for(const v of m.candidates[0].content.parts)v.text&&(g+=v.text);return g.trim().slice(0,350)}catch(f){return console.error("[AIService] Cycle summary generation failed:",f),""}}})}}const sm=new pat;class mat{constructor(){this.worker=null,this.callbacks=new Map,this.fallbackTimers=new Map,this.isSupported=typeof Worker<"u",this.isSupported?this.initWorker():console.warn("[BackgroundTimer]  Web Workers not supported, falling back to setInterval (will be throttled in background)")}initWorker(){try{const e=`
                const timers = new Map();
                
                self.onmessage = (event) => {
                    const { type, timerId, intervalMs } = event.data;
                    
                    if (type === 'START' && timerId && intervalMs) {
                        // Clear existing timer if any
                        if (timers.has(timerId)) {
                            clearInterval(timers.get(timerId));
                        }
                        
                        // Start new timer
                        const id = setInterval(() => {
                            self.postMessage({ type: 'TICK', timerId, timestamp: Date.now() });
                        }, intervalMs);
                        timers.set(timerId, id);
                        
                        // Log start (visible in browser console under Worker context)
                        console.log('[TimerWorker] Started timer "' + timerId + '" with ' + intervalMs + 'ms interval');
                    }
                    
                    if (type === 'STOP' && timerId) {
                        if (timers.has(timerId)) {
                            clearInterval(timers.get(timerId));
                            timers.delete(timerId);
                            console.log('[TimerWorker] Stopped timer "' + timerId + '"');
                        }
                    }
                    
                    if (type === 'UPDATE_INTERVAL' && timerId && intervalMs) {
                        if (timers.has(timerId)) {
                            clearInterval(timers.get(timerId));
                        }
                        const id = setInterval(() => {
                            self.postMessage({ type: 'TICK', timerId, timestamp: Date.now() });
                        }, intervalMs);
                        timers.set(timerId, id);
                        console.log('[TimerWorker] Updated timer "' + timerId + '" to ' + intervalMs + 'ms');
                    }
                };
            `,n=new Blob([e],{type:"application/javascript"});this.worker=new Worker(URL.createObjectURL(n)),this.worker.onmessage=r=>{const{type:i,timerId:s,timestamp:o}=r.data;if(i==="TICK"&&this.callbacks.has(s))try{this.callbacks.get(s)(o)}catch(a){console.error(`[BackgroundTimer] Error in callback for "${s}":`,a)}},this.worker.onerror=r=>{console.error("[BackgroundTimer] Worker error:",r)},console.log("[BackgroundTimer]  Web Worker initialized - timers will run in background")}catch(e){console.error("[BackgroundTimer] Failed to initialize Worker:",e),this.isSupported=!1}}start(e,n,r){if(this.callbacks.set(e,r),this.worker)this.worker.postMessage({type:"START",timerId:e,intervalMs:n});else{console.warn(`[BackgroundTimer] Using fallback for "${e}" - may be throttled in background`);const i=setInterval(()=>r(Date.now()),n);this.fallbackTimers.set(e,i)}}stop(e){this.callbacks.delete(e),this.worker&&this.worker.postMessage({type:"STOP",timerId:e}),this.fallbackTimers.has(e)&&(clearInterval(this.fallbackTimers.get(e)),this.fallbackTimers.delete(e))}updateInterval(e,n){if(this.worker&&this.callbacks.has(e))this.worker.postMessage({type:"UPDATE_INTERVAL",timerId:e,intervalMs:n});else if(this.fallbackTimers.has(e)){const r=this.callbacks.get(e);if(r){clearInterval(this.fallbackTimers.get(e));const i=setInterval(()=>r(Date.now()),n);this.fallbackTimers.set(e,i)}}}isRunning(e){return this.callbacks.has(e)}getActiveTimers(){return Array.from(this.callbacks.keys())}destroy(){for(const e of this.callbacks.keys())this.stop(e);this.worker&&(this.worker.terminate(),this.worker=null),this.callbacks.clear(),this.fallbackTimers.clear()}}const Da=new mat;class gat{constructor(){this.audioContext=null,this.oscillator=null,this.gainNode=null,this.isActive=!1,this.checkInterval=null,this.visibilityHandler=null,this.userInteractionHandler=null}start(){var e;if(this.isActive&&((e=this.audioContext)==null?void 0:e.state)==="running")return console.log("[KeepAlive] Already active and running"),!0;try{return this.audioContext&&this.audioContext.state!=="closed"&&this.cleanupAudio(),this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.oscillator=this.audioContext.createOscillator(),this.oscillator.type="sine",this.oscillator.frequency.setValueAtTime(1,this.audioContext.currentTime),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.setValueAtTime(.001,this.audioContext.currentTime),this.oscillator.connect(this.gainNode),this.gainNode.connect(this.audioContext.destination),this.oscillator.start(),this.isActive=!0,console.log("[KeepAlive]  Silent audio started - tab will stay active in background"),this.setupMaintenance(),!0}catch(n){return console.error("[KeepAlive]  Failed to start silent audio:",n),!1}}setupMaintenance(){this.cleanupMaintenance(),this.visibilityHandler=()=>{document.visibilityState==="visible"&&this.isActive&&(console.log("[KeepAlive]  Tab became visible, checking audio..."),this.ensureRunning())},document.addEventListener("visibilitychange",this.visibilityHandler),this.userInteractionHandler=()=>{var e;this.isActive&&((e=this.audioContext)==null?void 0:e.state)==="suspended"&&(console.log("[KeepAlive]  User interaction detected, resuming audio..."),this.resume())},["click","keydown","touchstart","mousedown"].forEach(e=>{document.addEventListener(e,this.userInteractionHandler,{passive:!0})}),this.checkInterval=setInterval(()=>{this.isActive&&this.ensureRunning()},5e3)}async ensureRunning(){var n;if(!this.isActive)return;const e=(n=this.audioContext)==null?void 0:n.state;e==="suspended"?(console.log("[KeepAlive]  AudioContext suspended, attempting resume..."),await this.resume()):(e==="closed"||!this.audioContext)&&(console.log("[KeepAlive]  AudioContext closed, restarting..."),this.isActive=!1,this.start())}cleanupMaintenance(){this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null),this.visibilityHandler&&(document.removeEventListener("visibilitychange",this.visibilityHandler),this.visibilityHandler=null),this.userInteractionHandler&&(["click","keydown","touchstart","mousedown"].forEach(e=>{document.removeEventListener(e,this.userInteractionHandler)}),this.userInteractionHandler=null)}cleanupAudio(){try{this.oscillator&&(this.oscillator.stop(),this.oscillator.disconnect(),this.oscillator=null),this.gainNode&&(this.gainNode.disconnect(),this.gainNode=null),this.audioContext&&this.audioContext.state!=="closed"&&this.audioContext.close(),this.audioContext=null}catch{}}stop(){if(this.isActive)try{this.cleanupMaintenance(),this.cleanupAudio(),this.isActive=!1,console.log("[KeepAlive]  Silent audio stopped")}catch(e){console.error("[KeepAlive] Error stopping:",e)}}async resume(){if(!this.audioContext)return this.start();if(this.audioContext.state==="suspended")try{return await this.audioContext.resume(),console.log("[KeepAlive]  AudioContext resumed"),!0}catch(e){return console.error("[KeepAlive] Failed to resume:",e),this.isActive=!1,this.start()}return!0}getIsActive(){var e;return this.isActive&&((e=this.audioContext)==null?void 0:e.state)==="running"}getState(){var e;return((e=this.audioContext)==null?void 0:e.state)||"not-initialized"}}const AC=new gat,JO="user_supabase_config",FQ=["encrypted_keys","execution_sessions"];class yat{constructor(){this.client=null,this.config=null,this.listeners=new Set,this.loadStoredConfig()}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}notify(){const e=this.isConnected();this.listeners.forEach(n=>n(e))}isConnected(){return this.client!==null&&this.config!==null}getConfig(){return this.config}getClient(){return this.client}async loadStoredConfig(){try{const e=await Ae.getItem(Ae.getUserKey(JO));if(!e)return console.log("[UserDataSupabase] No stored configuration found"),!1;const n=JSON.parse(e),r=await this.connect(n.url,n.anonKey);return r.success?(console.log("[UserDataSupabase] Reconnected using stored config"),!0):(console.warn("[UserDataSupabase] Failed to reconnect:",r.error),!1)}catch(e){return console.error("[UserDataSupabase] Failed to load stored config:",e),!1}}validateUrl(e){return e?e.startsWith("https://")?e.includes(".supabase.co")?{valid:!0}:{valid:!1,error:"URL must be a Supabase project URL (*.supabase.co)"}:{valid:!1,error:"URL must start with https://"}:{valid:!1,error:"URL is required"}}validateAnonKey(e){return e?e.length<100?{valid:!1,error:"Anon key appears invalid (too short)"}:e.startsWith("eyJ")?{valid:!0}:{valid:!1,error:"Anon key should be a JWT token"}:{valid:!1,error:"Anon key is required"}}async connect(e,n){var s;const r=this.validateUrl(e);if(!r.valid)return{success:!1,projectId:null,error:r.error};const i=this.validateAnonKey(n);if(!i.valid)return{success:!1,projectId:null,error:i.error};try{const o=Oee(e,n,{auth:{autoRefreshToken:!1,persistSession:!1,detectSessionInUrl:!1}}),{error:a}=await o.auth.getSession();if(a&&a.message!=="Auth session missing!")return{success:!1,projectId:null,error:`Connection failed: ${a.message}`};const l=((s=e.split("//")[1])==null?void 0:s.split(".")[0])||null;return this.config={url:e,anonKey:n,projectId:l||"",connectedAt:new Date().toISOString()},this.client=o,await this.saveConfig(),console.log("[UserDataSupabase] Connected to project:",l),this.notify(),{success:!0,projectId:l}}catch(o){return{success:!1,projectId:null,error:o instanceof Error?o.message:"Unknown error"}}}async validateSchema(){if(!this.client)return{valid:!1,missingTables:FQ,error:"Not connected"};const e=[];for(const n of FQ)try{const{error:r}=await this.client.from(n).select("id").limit(1);r&&(r.code==="42P01"||r.message.includes("does not exist"))&&e.push(n)}catch{e.push(n)}return{valid:e.length===0,missingTables:e}}async disconnect(){this.client=null,this.config=null,await Ae.removeItem(Ae.getUserKey(JO)),console.log("[UserDataSupabase] Disconnected and cleared config"),this.notify()}getSetupSQL(){return`-- AutonomousVault Security Tier Schema
-- Run this in your Supabase SQL Editor

-- Table for storing encrypted keys (Tier B & C)
CREATE TABLE IF NOT EXISTS encrypted_keys (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID NOT NULL,
    key_name TEXT NOT NULL,
    encrypted_blob TEXT NOT NULL,
    encryption_salt TEXT NOT NULL,
    encrypted_password TEXT, -- Only for Tier C (persistent)
    created_at TIMESTAMPTZ DEFAULT now(),
    updated_at TIMESTAMPTZ DEFAULT now(),
    UNIQUE(user_id, key_name)
);

-- Table for execution sessions (Tier B)
CREATE TABLE IF NOT EXISTS execution_sessions (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID NOT NULL,
    encrypted_session_token TEXT NOT NULL,
    expires_at TIMESTAMPTZ NOT NULL,
    revoked BOOLEAN DEFAULT false,
    created_at TIMESTAMPTZ DEFAULT now()
);

-- Row Level Security (RLS) policies
ALTER TABLE encrypted_keys ENABLE ROW LEVEL SECURITY;
ALTER TABLE execution_sessions ENABLE ROW LEVEL SECURITY;

-- Users can only access their own data
CREATE POLICY "Users can manage own keys" ON encrypted_keys
    FOR ALL USING (auth.uid() = user_id);

CREATE POLICY "Users can manage own sessions" ON execution_sessions
    FOR ALL USING (auth.uid() = user_id);

-- Indexes for performance
CREATE INDEX IF NOT EXISTS idx_encrypted_keys_user ON encrypted_keys(user_id);
CREATE INDEX IF NOT EXISTS idx_execution_sessions_user ON execution_sessions(user_id);
CREATE INDEX IF NOT EXISTS idx_execution_sessions_expires ON execution_sessions(expires_at);
`}async saveConfig(){if(this.config)try{await Ae.setItem(Ae.getUserKey(JO),JSON.stringify(this.config))}catch(e){console.error("[UserDataSupabase] Failed to save config:",e)}}}const rs=new yat;class xat{get supabase(){return rs.getClient()}isAvailable(){return this.supabase!==null}async runCycle(e){if(!this.supabase)throw new Error("Supabase not connected");const{data:n,error:r}=await this.supabase.functions.invoke("dealer-cycle",{body:e});return r?(console.error("[SupabaseDealerClient] Cycle error:",r),{success:!1,decisions:[],usage:{cyclesUsed:0,cyclesRemaining:0},timestamp:new Date().toISOString(),error:r.message}):n}async syncPortfolio(){if(!this.supabase)throw new Error("Supabase not connected");const{data:e,error:n}=await this.supabase.functions.invoke("sync-portfolio",{body:{}});return n?(console.error("[SupabaseDealerClient] Sync error:",n),{positions:[],portfolioValue:0,error:n.message}):e}async enableSchedule(e){if(!this.supabase)throw new Error("Supabase not connected");const n=Ae.getUserId();if(!n)return{success:!1,error:"Not authenticated"};const{error:r}=await this.supabase.from("cron_schedules").upsert({user_id:n,schedule_name:"default",enabled:e.enabled,interval_seconds:e.intervalSeconds,coins:e.coins,next_run_at:e.enabled?new Date().toISOString():null},{onConflict:"user_id,schedule_name"});return r?(console.error("[SupabaseDealerClient] Schedule error:",r),{success:!1,error:r.message}):{success:!0}}async disableSchedule(){return this.enableSchedule({enabled:!1,intervalSeconds:300,coins:[]})}async getScheduleStatus(){if(!this.supabase)return null;const e=Ae.getUserId();if(!e)return null;const{data:n,error:r}=await this.supabase.from("cron_schedules").select("*").eq("user_id",e).eq("schedule_name","default").single();return r||!n?null:{enabled:n.enabled,intervalSeconds:n.interval_seconds,coins:n.coins||[],lastRunAt:n.last_run_at?new Date(n.last_run_at):void 0,nextRunAt:n.next_run_at?new Date(n.next_run_at):void 0,runCount:n.run_count||0,lastError:n.last_error}}async getSessionStatus(){if(!this.supabase)return{hasActiveSession:!1,tier:"local"};const e=Ae.getUserId();if(!e)return{hasActiveSession:!1,tier:"local"};const{data:n}=await this.supabase.from("encrypted_keys").select("encrypted_password").eq("user_id",e).eq("key_name","hyperliquid").single();if(n!=null&&n.encrypted_password)return{hasActiveSession:!0,tier:"persistent"};const{data:r}=await this.supabase.from("execution_sessions").select("expires_at").eq("user_id",e).eq("revoked",!1).gt("expires_at",new Date().toISOString()).order("expires_at",{ascending:!1}).limit(1).single();return r?{hasActiveSession:!0,expiresAt:new Date(r.expires_at),tier:"session"}:{hasActiveSession:!1,tier:"local"}}async getUsageStats(){if(!this.supabase)return null;const e=Ae.getUserId();if(!e)return null;const n=new Date,r=new Date(n.getFullYear(),n.getMonth(),1),{data:i,error:s}=await this.supabase.from("usage_tracking").select("*").eq("user_id",e).eq("period_start",r.toISOString().split("T")[0]).single();if(s&&s.code!=="PGRST116")return console.error("[SupabaseDealerClient] Usage error:",s),null;const{data:o}=await this.supabase.from("user_plans").select("cycles_limit").eq("user_id",e).single(),a=(o==null?void 0:o.cycles_limit)||1e3;return{cyclesExecuted:(i==null?void 0:i.cycles_executed)||0,tradesExecuted:(i==null?void 0:i.trades_executed)||0,cyclesRemaining:Math.max(0,a-((i==null?void 0:i.cycles_executed)||0)),periodStart:r}}}const vat=new xat,KD={local:{tier:"local",label:"Local Keys",description:"Maximum security. Keys never leave your browser. Browser must remain open for execution.",icon:"",securityLevel:3,execution24x7:!1,requiresBrowserOpen:!0},session:{tier:"session",label:"Session Keys",description:"Balanced security. 24-hour execution sessions on your server.Re-authenticate daily.",icon:"",securityLevel:2,execution24x7:!1,requiresBrowserOpen:!1},persistent:{tier:"persistent",label:"Persistent Keys",description:"Full automation. 24/7 execution. Lower security - password stored encrypted on your server.",icon:"",securityLevel:1,execution24x7:!0,requiresBrowserOpen:!1}},$Q="security_tier",zQ=24;class bat{constructor(){this.state={currentTier:"local",session:null,keysInSupabase:!1,passwordStoredInSupabase:!1},this.listeners=new Set,this.loadState()}async loadState(){try{const e=await Ae.getItem(Ae.getUserKey($Q));if(e){const n=JSON.parse(e);this.state={...this.state,currentTier:n.currentTier||"local",session:n.session?{...n.session,createdAt:new Date(n.session.createdAt),expiresAt:new Date(n.session.expiresAt)}:null},this.state.session&&new Date>this.state.session.expiresAt&&(console.log("[SecurityTierService] Session expired, reverting to local"),this.state.session=null,this.state.currentTier==="session"&&(this.state.currentTier="local"))}await this.syncSupabaseState()}catch(e){console.error("[SecurityTierService] Failed to load state:",e)}}async saveState(){try{await Ae.setItem(Ae.getUserKey($Q),JSON.stringify({currentTier:this.state.currentTier,session:this.state.session}))}catch(e){console.error("[SecurityTierService] Failed to save state:",e)}}notify(){this.listeners.forEach(e=>e()),this.saveState()}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}getState(){return this.state}getCurrentTier(){return this.state.currentTier}getTierInfo(e){return KD[e||this.state.currentTier]}getSessionStatus(){if(!this.state.session)return{active:!1};const e=new Date,n=e<this.state.session.expiresAt,r=this.state.session.expiresAt.getTime()-e.getTime(),i=Math.max(0,r/(1e3*60*60));return{active:n,expiresAt:this.state.session.expiresAt,remainingHours:Math.round(i*10)/10}}async migrateToSession(e,n,r,i=zQ){try{const s=rs.getClient();if(!s)return{success:!1,error:"Your Supabase not connected. Please connect in Security Tier settings."};const o=Ae.getUserId();if(!o)return{success:!1,error:"Not authenticated"};const{error:a}=await s.from("encrypted_keys").upsert({user_id:o,key_name:"hyperliquid",encrypted_blob:e,encryption_salt:n,encrypted_password:null},{onConflict:"user_id,key_name"});if(a)return{success:!1,error:`Failed to upload key: ${a.message}`};const l=new Date,c=new Date(l.getTime()+i*60*60*1e3),u=crypto.randomUUID(),f=await this.createSessionToken(o,r,c),{error:m}=await s.from("execution_sessions").insert({id:u,user_id:o,encrypted_session_token:f,expires_at:c.toISOString(),revoked:!1});return m?{success:!1,error:`Failed to create session: ${m.message}`}:(this.state={...this.state,currentTier:"session",keysInSupabase:!0,passwordStoredInSupabase:!1,session:{id:u,userId:o,createdAt:l,expiresAt:c,active:!0}},this.notify(),console.log("[SecurityTierService] Migrated to Tier B (Session)"),{success:!0})}catch(s){return{success:!1,error:s instanceof Error?s.message:"Unknown error"}}}async migrateToPersistent(e,n,r){try{const i=rs.getClient();if(!i)return{success:!1,error:"Your Supabase not connected. Please connect in Security Tier settings."};const s=Ae.getUserId();if(!s)return{success:!1,error:"Not authenticated"};const o=await this.encryptPasswordForStorage(r),{error:a}=await i.from("encrypted_keys").upsert({user_id:s,key_name:"hyperliquid",encrypted_blob:e,encryption_salt:n,encrypted_password:o},{onConflict:"user_id,key_name"});return a?{success:!1,error:`Failed to upload key: ${a.message}`}:(this.state={...this.state,currentTier:"persistent",keysInSupabase:!0,passwordStoredInSupabase:!0,session:null},this.notify(),console.log("[SecurityTierService] Migrated to Tier C (Persistent)"),{success:!0})}catch(i){return{success:!1,error:i instanceof Error?i.message:"Unknown error"}}}async migrateToLocal(){try{const e=rs.getClient();if(!e)return this.state={...this.state,currentTier:"local",keysInSupabase:!1,passwordStoredInSupabase:!1,session:null},this.notify(),{success:!0};const n=Ae.getUserId();return n?(await e.from("encrypted_keys").delete().eq("user_id",n).eq("key_name","hyperliquid"),await e.from("execution_sessions").update({revoked:!0}).eq("user_id",n),this.state={...this.state,currentTier:"local",keysInSupabase:!1,passwordStoredInSupabase:!1,session:null},this.notify(),console.log("[SecurityTierService] Migrated to Tier A (Local)"),{success:!0}):{success:!1,error:"Not authenticated"}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async endSession(){if(this.state.session){try{const e=rs.getClient();e&&await e.from("execution_sessions").update({revoked:!0}).eq("id",this.state.session.id)}catch(e){console.error("[SecurityTierService] Failed to revoke session:",e)}this.state={...this.state,session:null},this.notify()}}async refreshSession(e,n=zQ){if(this.state.currentTier!=="session")return{success:!1,error:"Not in session mode"};await this.endSession();const r=rs.getClient();if(!r)return{success:!1,error:"Your Supabase not connected"};const i=Ae.getUserId();if(!i)return{success:!1,error:"Not authenticated"};const{data:s}=await r.from("encrypted_keys").select("encrypted_blob, encryption_salt").eq("user_id",i).eq("key_name","hyperliquid").single();return s?this.migrateToSession(s.encrypted_blob,s.encryption_salt,e,n):{success:!1,error:"No key found in Supabase"}}async syncSupabaseState(){var e;try{const n=rs.getClient();if(!n)return;const r=Ae.getUserId();if(!r)return;const{data:i}=await n.from("encrypted_keys").select("encrypted_password").eq("user_id",r).eq("key_name","hyperliquid").single();this.state.keysInSupabase=!!i,this.state.passwordStoredInSupabase=!!(i!=null&&i.encrypted_password),this.state.keysInSupabase?this.state.passwordStoredInSupabase?this.state.currentTier="persistent":(e=this.state.session)!=null&&e.active?this.state.currentTier="session":this.state.currentTier="local":this.state.currentTier="local"}catch(n){console.error("[SecurityTierService] Failed to sync Supabase state:",n)}}async createSessionToken(e,n,r){const i=JSON.stringify({userId:e,password:n,expiresAt:r.toISOString()}),o=new TextEncoder().encode(i),a=await crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt"]),l=crypto.getRandomValues(new Uint8Array(12)),c=await crypto.subtle.encrypt({name:"AES-GCM",iv:l},a,o),u=await crypto.subtle.exportKey("raw",a),f=new Uint8Array(l.length+c.byteLength+u.byteLength);return f.set(l,0),f.set(new Uint8Array(c),l.length),f.set(new Uint8Array(u),l.length+c.byteLength),btoa(String.fromCharCode(...f))}async encryptPasswordForStorage(e){const n=new TextEncoder,r=n.encode(e),i=n.encode("autonomousvault-persistent-key-v1"),s=await crypto.subtle.importKey("raw",n.encode("server-managed-key-placeholder"),"PBKDF2",!1,["deriveKey"]),o=await crypto.subtle.deriveKey({name:"PBKDF2",salt:i,iterations:1e5,hash:"SHA-256"},s,{name:"AES-GCM",length:256},!1,["encrypt"]),a=crypto.getRandomValues(new Uint8Array(12)),l=await crypto.subtle.encrypt({name:"AES-GCM",iv:a},o,r),c=new Uint8Array(a.length+l.byteLength);return c.set(a,0),c.set(new Uint8Array(l),a.length),btoa(String.fromCharCode(...c))}}const Ef=new bat,HQ="hyperliquid-dealer-cycle",XO="hyperliquid-dealer-sync";class wat{constructor(){this.isLoopRunning=!1,this.currentCycleAbortController=null,this.vaultContext={balance:0,positions:[]},this.lastError=null,this.consecutiveFailures=0,this.executor=null,ft.subscribe(()=>{const e=ft.getSnapshot();e.isOn&&!this.isLoopRunning?this.startLoop():!e.isOn&&this.isLoopRunning&&this.stopLoop()}),Hs.setOnRateLimit(e=>{e.exhausted?(ft.addLog("ERROR"," AI API Quota Exhausted! Credits may be depleted. System paused.",{consecutiveHits:e.consecutiveHits}),ft.updateStatus(" Quota Exhausted",null,"Check your AI API credits or billing",void 0,`Retried ${e.consecutiveHits}x without success`)):(ft.addLog("WARNING",` AI Rate Limited! Waiting ${e.blockedForSeconds}s before retry... (attempt ${e.consecutiveHits})`,{consecutiveHits:e.consecutiveHits}),ft.updateStatus(" Rate Limited",null,"AI credits/quota may be running low",void 0,`Retry in ${e.blockedForSeconds}s (attempt ${e.consecutiveHits})`))})}startLoop(){if(this.isLoopRunning)return;this.isLoopRunning=!0,console.log("[DealerService]  Starting loop with Web Worker timer (background-safe)..."),AC.start();const n=ft.getSnapshot().settings.checkIntervalSeconds*1e3||6e4;Da.start(HQ,n,()=>this.runCycle()),this.startSyncLoop(),this.runCycle()}startSyncLoop(){Da.stop(XO),console.log("[DealerService] Starting sync loop with Web Worker timer..."),Da.start(XO,15e3,()=>this.syncPortfolio()),this.syncPortfolio()}async syncPortfolio(){if(this.vaultContext.walletAddress){if(zt.isDealerActive()){console.log("[DealerService]   Skipping sync - dealer is active");return}try{const e=await zt.getUserStateShared(this.vaultContext.walletAddress);let n=[],r=0;e&&(e.assetPositions&&(n=e.assetPositions.filter(o=>parseFloat(o.position.szi)!==0),this.vaultContext.positions=n),e.marginSummary&&(r=parseFloat(e.marginSummary.accountValue||"0")));let i=0;const s=n.map(o=>{var u;const a=parseFloat(o.position.szi),l=parseFloat(o.position.entryPx),c=Math.abs(a*l);return i+=c,{coin:o.position.coin,size:a,entryPrice:l,unrealizedPnl:parseFloat(o.position.unrealizedPnl||"0"),side:a>0?"LONG":"SHORT",leverage:parseFloat(((u=o.position.leverage)==null?void 0:u.value)||"1"),liquidationPrice:o.position.liquidationPx?parseFloat(o.position.liquidationPx):void 0}});this.vaultContext.balance=r,ft.updatePortfolioState(s,r,i)}catch(e){console.warn("[DealerService] syncPortfolio failed:",e)}}}stopLoop(){this.isLoopRunning&&(console.log("[DealerService]  Stopping loop..."),this.currentCycleAbortController&&(console.log("[DealerService]  Aborting current cycle requests..."),this.currentCycleAbortController.abort(),this.currentCycleAbortController=null),Da.stop(HQ),Da.stop(XO),AC.stop(),this.isLoopRunning=!1,ft.updateStatus(null,null,"System paused",void 0,"Dealer offline"))}setVaultContext(e){this.vaultContext={...this.vaultContext,...e}}async runCycle(){if(!ft.getSnapshot().isOn){this.stopLoop();return}const n=Ef.getCurrentTier();return n==="session"||n==="persistent"?this.runSupabaseCycle():this.runLocalCycle()}async runSupabaseCycle(){var s,o;const e=ft.getSnapshot();ft.setAnalyzing(!0),ft.updateStatus(" Supabase Cycle",null,"Executing via Edge Function...",void 0,`Mode: ${e.executionMode}`);const n=Un.getComponentConfig("hyperliquidDealer"),r=Un.getComponentApiKey("hyperliquidDealer"),i={provider:n.providerType,apiKey:r,modelId:n.modelId,systemPrompt:e.settings.strategyPrompt};try{const a=await vat.runCycle({coins:e.settings.tradingPairs,settings:{intervalMs:e.settings.checkIntervalSeconds*1e3,maxPositions:e.settings.maxOpenPositions,maxLeverage:e.settings.maxLeverage,maxPositionSizeUSDC:e.settings.maxPositionSizeUSDC,analysisTimeframe:e.settings.analysisTimeframe||"60",historyCandles:e.settings.historyCandles||100,macroTimeframeEnabled:e.settings.macroTimeframeEnabled,macroTimeframe:e.settings.macroTimeframe,macroEnabledIndicators:e.settings.macroEnabledIndicators,indicatorSettings:e.settings.indicatorSettings,autonomousIndicators:e.settings.autonomousIndicators,stopLossEnabled:e.settings.stopLossEnabled,stopLossPercent:e.settings.stopLossPercent,takeProfitEnabled:e.settings.takeProfitEnabled,takeProfitPercent:e.settings.takeProfitPercent,strategyPrompt:e.settings.strategyPrompt},portfolioContext:{balance:((s=this.vaultContext)==null?void 0:s.balance)||0,positions:(((o=this.vaultContext)==null?void 0:o.positions)||[]).map(l=>{var c,u,f,m,g,v,x,b;return{coin:((c=l.position)==null?void 0:c.coin)||l.coin,side:parseFloat(((u=l.position)==null?void 0:u.szi)||l.szi||"0")>0?"LONG":"SHORT",size:Math.abs(parseFloat(((f=l.position)==null?void 0:f.szi)||l.szi||"0")),entryPrice:parseFloat(((m=l.position)==null?void 0:m.entryPx)||l.entryPx||"0"),unrealizedPnl:parseFloat(((g=l.position)==null?void 0:g.unrealizedPnl)||l.unrealizedPnl||"0"),leverage:parseFloat(((x=(v=l.position)==null?void 0:v.leverage)==null?void 0:x.value)||((b=l.leverage)==null?void 0:b.value)||"1")}})},aiConfig:i,executeTradesIfSignal:!0});if(a.success){for(const l of a.decisions){const c=l.action==="BUY"?"":l.action==="SELL"?"":l.action==="CLOSE"?"":"";ft.addLog(l.executed?"TRADE":"SIGNAL",`${c} ${l.coin}: ${l.action} (${(l.confidence*100).toFixed(0)}%)${l.executed?" ":""}`,{fullReason:l.reason,orderId:l.orderId,error:l.error})}ft.updateStatus(" Waiting",null,`Supabase cycle complete. ${a.decisions.length} decisions.`,void 0,`Cycles remaining: ${a.usage.cyclesRemaining}`)}else throw new Error(a.error||"Supabase cycle failed")}catch(a){console.error("[DealerService] Supabase cycle error:",a),ft.addLog("ERROR",`Supabase cycle failed: ${a.message}`),ft.updateStatus(" Error",null,a.message,void 0,"Will retry next interval")}finally{ft.setAnalyzing(!1)}}async runLocalCycle(){var x,b,E,C;const e=ft.getSnapshot();this.currentCycleAbortController=new AbortController;const n=this.currentCycleAbortController.signal;zt.acquireDealerLock();const r=e.settings.indicatorSettings,s=Object.entries(r).filter(([k,O])=>O.enabled).map(([k,O])=>k.toUpperCase()).join(", ")||"Default",o=e.settings.tradingPairs.length,a=e.settings.analysisTimeframe,l=a==="1"?"1m":a==="5"?"5m":a==="15"?"15m":a==="60"?"1h":a==="240"?"4h":a==="D"?"1D":`${a}m`,c=e.settings.macroTimeframe,u=e.settings.macroTimeframeEnabled?`  ${c==="15"?"15m":c==="60"?"1H":c==="240"?"4H":c==="D"?"1D":c==="W"?"1W":c}`:"";ft.setAnalyzing(!0),ft.updateStatus(" Scanning Markets",null,"Initializing market analysis cycle...",void 0,` ${o} pairs  ${l}${u}  ${s}`);const f=Date.now();let m=0,g=0,v=0;try{let k=this.vaultContext.positions||[];this.vaultContext.walletAddress&&(!k||k.length===0)&&(await this.syncPortfolio(),k=this.vaultContext.positions||[]);const O=e.settings.tradingPairs;if(O.length===0){ft.addLog("WARNING","No trading pairs configured.");return}const U=5,R=[];for(let A=0;A<O.length;A+=U)R.push(O.slice(A,A+U));const $=e.settings.maxOpenPositions||3,V=[],j=new Map;for(let A=0;A<R.length;A++){if(n.aborted)throw new DOMException("Dealer cycle aborted","AbortError");const I=R[A],D=A+1,z=I.join(", ");ft.updateStatus(" Fetching Data",null,`Collecting market data for ${z}...`,void 0,`Batch ${D}/${R.length}  ${I.length} coins`);const G=Date.now(),te=[];for(const me of I){if(n.aborted)throw new DOMException("Dealer cycle aborted","AbortError");const ue=e.settings.autonomousIndicators?void 0:e.settings.indicatorSettings,le=await KO.getMarketContext(me,this.vaultContext.walletAddress,e.settings.analysisTimeframe||"60",ue,e.settings.historyCandles||100);if(e.settings.macroTimeframeEnabled&&e.settings.macroTimeframe&&!le.error){let Ie=ue;if(Ie&&e.settings.macroEnabledIndicators){Ie={...Ie};const $e={},Ze=e.settings.macroEnabledIndicators;for(const[Ye,We]of Object.entries(Ie))$e[Ye]={...We,enabled:We.enabled&&Ze.includes(Ye)};Ie=$e}const Ne=await KO.getMacroSnapshot(me,e.settings.macroTimeframe,Ie);Object.keys(Ne.indicators).length>0&&(le.macro=Ne)}le.error||(te.push(le),j.set(me,le)),await new Promise(Ie=>setTimeout(Ie,200))}if(m+=Date.now()-G,te.length===0)continue;for(const me of te){const ue=me.symbol,le=k.find(Ie=>{var Ne;return((Ne=Ie.position)==null?void 0:Ne.coin)===ue||Ie.coin===ue});if(le&&parseFloat(((x=le.position)==null?void 0:x.szi)||le.szi||"0")!==0){const Ie=le.position||le;me.openPosition={hasPosition:!0,side:parseFloat(Ie.szi)>0?"LONG":"SHORT",size:Math.abs(parseFloat(Ie.szi)),entryPrice:parseFloat(Ie.entryPx||"0"),unrealizedPnl:parseFloat(Ie.unrealizedPnl||"0"),leverage:parseFloat(((b=Ie.leverage)==null?void 0:b.value)||"1")}}else me.openPosition={hasPosition:!1}}const K=k.length>0?KO.calculatePositionBreakevens(k,{makerFee:2e-4,takerFee:5e-4},new Map(te.map(me=>{var ue;return[me.symbol,((ue=me.tradingCosts)==null?void 0:ue.fundingRate)||0]}))):[],q={coins:te,portfolio:{balance:this.vaultContext.balance,positions:k,positionBreakevens:K,settings:{maxPositions:e.settings.maxOpenPositions,maxLeverage:e.settings.maxLeverage,bankrollType:e.settings.bankrollType,manualBankroll:e.settings.manualBankroll,stopLossEnabled:e.settings.stopLossEnabled,stopLossPercent:e.settings.stopLossPercent,takeProfitEnabled:e.settings.takeProfitEnabled,takeProfitPercent:e.settings.takeProfitPercent},userFees:{makerFee:2e-4,takerFee:5e-4},lastExecutionError:this.lastError&&Date.now()-this.lastError.timestamp<6e4?{message:this.lastError.message,timestamp:this.lastError.timestamp}:null},autonomousMode:e.settings.autonomousIndicators,availablePresets:e.settings.autonomousIndicators?Yu:void 0,cycleSummary:ed.getContextForAI("hyperliquid")},M=te.map(me=>me.symbol).join(", ");ft.updateStatus(" Analyzing",null,`AI processing ${M}...`,void 0,`Using ${s} indicators`);const _=e.settings.strategyPrompt||"Scalp trading. Buy low RSI, Sell high RSI.",Y=q.cycleSummary;Y&&ft.addLog("INFO",` Cycle Summary: Including ${Y.length} char context from previous cycles`);const X=Date.now();if(n.aborted)throw new DOMException("Dealer cycle aborted","AbortError");const re=await sm.getDealerBatchAnalysis(q,_,n);g+=Date.now()-X;let oe=[],Ee;const ce=re;ce&&typeof ce=="object"&&!Array.isArray(ce)?(oe=ce.decisions||[],Ee=ce.cycleSummary,e.settings.autonomousIndicators&&ce.chosenPreset&&(ft.addLog("INFO",` AI chose preset: ${((E=Yu[ce.chosenPreset])==null?void 0:E.emoji)||""} ${ce.chosenPreset}`),ce.presetReason&&ft.addLog("INFO",` Preset reason: ${ce.presetReason}`))):Array.isArray(ce)&&(oe=ce),Ee&&(ed.setSummary("hyperliquid",Ee),ft.addLog("INFO",` AI Summary: ${Ee.slice(0,80)}...`));for(const me of oe){const ue=me.coin,le=me.action,Ie=me.reason,Ne=me.confidence||0,$e=j.get(ue);if(ft.addLog("REASONING",`${ue}: ${le} (Conf: ${(Ne*100).toFixed(0)}%)`,{fullReason:Ie,context:{...me,currentPrice:$e==null?void 0:$e.currentPrice,indicators:$e==null?void 0:$e.indicators,enabledIndicators:$e==null?void 0:$e.enabledIndicators,tradingCosts:$e==null?void 0:$e.tradingCosts,orderBook:$e==null?void 0:$e.orderBook,macro:$e==null?void 0:$e.macro}}),le==="HOLD")continue;const Ze=e.settings.aggressiveMode?.5:.6;if(Ne<Ze){ft.addLog("INFO",`Skipped ${le} on ${ue}: Confidence ${(Ne*100).toFixed(0)}% < ${(Ze*100).toFixed(0)}%`);continue}V.push({decision:me,marketContext:j.get(ue)})}A<R.length-1&&await new Promise(me=>setTimeout(me,500))}const F=V.length;ft.updateStatus(" Prioritizing",null,F>0?`Found ${F} trading signal${F>1?"s":""}`:"No actionable signals found",void 0,F>0?"Ranking by confidence...":"Monitoring for opportunities"),V.sort((A,I)=>{const D=(A.decision.confidence||0)+(A.decision.action==="CLOSE"?.5:0);return(I.decision.confidence||0)+(I.decision.action==="CLOSE"?.5:0)-D}),V.length>$&&ft.addLog("INFO",` Prioritizing top ${$} trades from ${V.length} signals (sorted by confidence)`);let W=0;const H=Date.now();for(const{decision:A,marketContext:I}of V){if(n.aborted)throw new DOMException("Dealer cycle aborted","AbortError");const D=A.coin,z=A.action,G=A.reason,te=A.confidence||0;if(W>=$&&z!=="CLOSE"){ft.addLog("INFO",` Skipping ${z} on ${D} (${(te*100).toFixed(0)}%): Cycle limit reached, lower priority`);continue}const K=k.length;if(z==="BUY"&&K>=e.settings.maxOpenPositions&&!k.some(M=>{var _;return M.coin===D||((_=M.position)==null?void 0:_.coin)===D})){ft.addLog("WARNING",`Ignored BUY on ${D}: Max positions reached.`);continue}if(ft.addLog("SIGNAL",` Executing ${z} on ${D} (${(te*100).toFixed(0)}% confidence)`),this.executor){let q=A.sizeUSDC||e.settings.maxPositionSizeUSDC||20;e.settings.maxPositionSizeUSDC&&(q=Math.min(q,e.settings.maxPositionSizeUSDC));const M=A.suggestedLeverage||e.settings.maxLeverage||1,_=Math.min(M,e.settings.maxLeverage||1);M>_&&ft.addLog("INFO",` Leverage capped for ${D}: ${M}x  ${_}x (max: ${e.settings.maxLeverage}x)`);const X=(this.vaultContext.balance||0)*_*.95;if(q>X&&(q=X),q<10&&z!=="CLOSE"){ft.addLog("WARNING",`Trade skipped on ${D}: Size < $10`);continue}try{const re=z==="BUY"?"":z==="SELL"?"":"";ft.updateStatus(`${re} Executing`,null,`${z} ${D} @ $${((C=I==null?void 0:I.currentPrice)==null?void 0:C.toFixed(2))||"market"}`,void 0,`Confidence: ${(te*100).toFixed(0)}%  Size: $${q.toFixed(0)}`),await this.executor({coin:D,action:z,type:A.orderType||"limit",price:A.price||(I==null?void 0:I.currentPrice),sizeUSDC:q,leverage:_,reason:G,cloid:this.generateCloid(),stopLoss:A.stopLoss,takeProfit:A.takeProfit}),W+=z!=="CLOSE"?1:0,await new Promise(oe=>setTimeout(oe,2e3))}catch(re){console.error(`[DealerService] Execution failed for ${D}:`,re),ft.addLog("ERROR",`Execution failed for ${D}: ${re.message}`)}}}v+=Date.now()-H;const B=(Date.now()-f)/1e3;console.log(`[DealerService] Cycle Telemetry: Total=${B.toFixed(1)}s, Fetch=${(m/1e3).toFixed(1)}s, AI=${(g/1e3).toFixed(1)}s, Exec=${(v/1e3).toFixed(1)}s`),ed.recordCycle("hyperliquid",{timestamp:Date.now(),decisions:V.map(A=>({asset:A.decision.coin,action:A.decision.action,confidence:A.decision.confidence||0})),assetsAnalyzed:O}),this.consecutiveFailures=0}catch(k){if((k==null?void 0:k.name)==="AbortError"){console.log("[DealerService]  Cycle aborted by user"),ft.addLog("INFO"," Analysis cycle cancelled");return}console.error("[DealerService] Cycle Error:",k),ft.addLog("ERROR",`Cycle failed: ${k.message}`),this.lastError={message:k.message,timestamp:Date.now()}}finally{zt.releaseDealerLock(),zt.clearSharedCache(),ft.setAnalyzing(!1);const k=e.settings.checkIntervalSeconds,O=Math.floor(k/60),U=O>=1?`${O}min`:`${k}s`;ft.updateStatus(" Waiting",null,"Analysis complete, waiting for next cycle",void 0,`Next scan in ${U}`)}}setExecutor(e){this.executor=e}generateCloid(){const e=new Uint8Array(16);return crypto.getRandomValues(e),"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}}const Q0=new wat;class or{static async encrypt(e,n){const i=new TextEncoder().encode(e),s=crypto.getRandomValues(new Uint8Array(16)),o=await this.deriveKey(n,s),a=crypto.getRandomValues(new Uint8Array(12)),l=await crypto.subtle.encrypt({name:"AES-GCM",iv:a},o,i),c=new Uint8Array(s.byteLength+a.byteLength+l.byteLength);return c.set(s,0),c.set(a,s.byteLength),c.set(new Uint8Array(l),s.byteLength+a.byteLength),btoa(String.fromCharCode(...c))}static async decrypt(e,n){try{const r=atob(e),i=new Uint8Array(r.length);for(let f=0;f<r.length;f++)i[f]=r.charCodeAt(f);const s=i.slice(0,16),o=i.slice(16,28),a=i.slice(28),l=await this.deriveKey(n,s),c=await crypto.subtle.decrypt({name:"AES-GCM",iv:o},l,a);return new TextDecoder().decode(c)}catch{throw new Error("Failed to decrypt. Wrong password or corrupted data.")}}static async deriveKey(e,n){const r=new TextEncoder,i=await crypto.subtle.importKey("raw",r.encode(e),"PBKDF2",!1,["deriveKey"]);return crypto.subtle.deriveKey({name:"PBKDF2",salt:n,iterations:1e5,hash:"SHA-256"},i,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}}const Eat=(t,e)=>{const n=T.useSyncExternalStore(c=>ft.subscribe(c),()=>ft.getSnapshot()),r=T.useRef(!1);return T.useEffect(()=>{var f,m;const u=sm.getApiKey()||void 0||((m=(f=window.process)==null?void 0:f.env)==null?void 0:m.GEMINI_API_KEY);u&&sm.initialize(u)},[]),T.useEffect(()=>{Q0.setVaultContext({walletAddress:t.hlPublicKey,balance:t.hlBalance||0})},[t.hlBalance,t.hlPublicKey]),T.useEffect(()=>{Q0.setExecutor(async c=>{var u;if(console.log("[useDealer] GENUINE EXECUTION TRIGGERED:",c),!t.isUnlocked||!t.hlPublicKey||!t.hlEncryptedPrivateKey){ft.addLog("ERROR","Cannot execute: Vault locked or HL not initialized");return}try{if(!e)throw new Error("Password required for execution");const f=await or.decrypt(t.hlEncryptedPrivateKey,e),m=zt.getWalletFromPrivateKey(f);ft.addLog("TRADE",` EXECUTING ${c.action} ${c.coin}...`,{reason:c.reason,confidence:c.confidence});let g=c.action==="BUY",v=!1;if(c.action==="CLOSE"){console.log("[useDealer] Seeking position for CLOSE:",c.coin),console.log("[useDealer] Cached Positions (may be stale):",(u=t.hlPositions)==null?void 0:u.map(te=>{var K;return((K=te==null?void 0:te.position)==null?void 0:K.coin)||(te==null?void 0:te.coin)})),ft.addLog("INFO",`Fetching current positions for ${c.coin}...`);let z=[];try{const te=await zt.getUserState(t.hlPublicKey);z=(te==null?void 0:te.assetPositions)||[],console.log("[useDealer] Fresh Positions from API:",z.map(K=>{var q;return((q=K==null?void 0:K.position)==null?void 0:q.coin)||(K==null?void 0:K.coin)}))}catch(te){console.error("[useDealer] Failed to fetch fresh positions:",te),ft.addLog("ERROR",`Failed to fetch positions: ${te.message}`);return}const G=z.find(te=>{var K;return((K=te.position)==null?void 0:K.coin)===c.coin});if(G&&parseFloat(G.position.szi)!==0){const te=G.position.szi,K=parseFloat(te);g=K<0,v=!0,ft.addLog("INFO",`Closing ${K} ${c.coin} (Side: ${g?"BUY":"SELL"}, ReduceOnly: Yes)`)}else{ft.addLog("WARNING",`CLOSE signal ignored: No open position found for ${c.coin}`),console.log("[useDealer] Position not found or size is 0. Available positions:",z.map(te=>{var K,q;return`${(K=te==null?void 0:te.position)==null?void 0:K.coin}: ${(q=te==null?void 0:te.position)==null?void 0:q.szi}`}));return}}const x=c.type==="market";ft.addLog("INFO","Fetching market data...");const b=await Vn.getMarketData(c.coin),E=parseFloat(b.levels[0][0].px),C=parseFloat(b.levels[1][0].px),k=g?C:E,O=await Vn.getAssetDecimals(c.coin),U=c.sizeUSDC||n.settings.maxPositionSizeUSDC||20,R=U/k,$=parseFloat(R.toFixed(O));let V,j=x?"ioc":"limit";const F=Math.max(0,6-O);if(x){let G=g?k*1.05:k*.95,te=parseFloat(G.toFixed(F));te=parseFloat(te.toPrecision(5)),V=parseFloat(te.toFixed(F))}else{const z=c.price||k;let G=parseFloat(z.toFixed(F));G=parseFloat(G.toPrecision(5)),V=parseFloat(G.toFixed(F)),console.log(`[useDealer] Limit price rounded: ${z} -> ${V} (maxDecimals=${F})`)}const W=c.leverage||n.settings.maxLeverage||1,H=Math.min(W,n.settings.maxLeverage||1);if(W>H&&ft.addLog("INFO",` Leverage capped for ${c.coin}: ${W}x  ${H}x (max: ${n.settings.maxLeverage}x)`),H>1)try{await Vn.updateLeverage(m,c.coin,H,!1)}catch(z){console.warn(`[useDealer] Leverage update failed, using current: ${z.message}`),ft.addLog("WARNING",`Leverage update failed (using current): ${z.message.slice(0,50)}...`)}console.log("[useDealer SL/TP DEBUG] Settings:",{stopLossEnabled:n.settings.stopLossEnabled,stopLossPercent:n.settings.stopLossPercent,takeProfitEnabled:n.settings.takeProfitEnabled,takeProfitPercent:n.settings.takeProfitPercent}),console.log("[useDealer SL/TP DEBUG] AI Intent:",{stopLoss:c.stopLoss,takeProfit:c.takeProfit});let B;if(n.settings.stopLossEnabled&&!v)if(n.settings.stopLossPercent!==null){const z=n.settings.stopLossPercent/100;B=g?V*(1-z):V*(1+z),ft.addLog("INFO",` Stop Loss: ${n.settings.stopLossPercent}%  $${B.toFixed(2)}`)}else c.stopLoss&&(B=c.stopLoss,ft.addLog("INFO",` Stop Loss (AI): $${B.toFixed(2)}`));let A;if(n.settings.takeProfitEnabled&&!v)if(n.settings.takeProfitPercent!==null){const z=n.settings.takeProfitPercent/100;A=g?V*(1+z):V*(1-z),ft.addLog("INFO",` Take Profit: ${n.settings.takeProfitPercent}%  $${A.toFixed(2)}`)}else c.takeProfit&&(A=c.takeProfit,ft.addLog("INFO",` Take Profit (AI): $${A.toFixed(2)}`));const I=B||A;ft.addLog("INFO",`Placing ${j.toUpperCase()} order: ${$} ${c.coin} @ ${V.toFixed(2)}${I?" (with SL/TP)":""}`);const D=await Vn.createOrder(m,c.coin,g,$,V,{orderType:j,reduceOnly:v,cloid:c.cloid,stopLoss:B,takeProfit:A});ft.addLog("INFO",`Order Placed: ${D.status||"Submitted"}`),ft.addOperationRecord({coin:c.coin,action:c.action,timestamp:Date.now(),entryPrice:V,size:$,sizeUSDC:U,reasoning:c.reason||"AI analysis decision",confidence:c.confidence||.7,status:c.action==="CLOSE"?"CLOSED":"OPEN",cloid:c.cloid})}catch(f){console.error("Execution Error:",f),ft.addLog("ERROR",`Execution Failed: ${f.message}`)}}),r.current=!0},[t.isUnlocked,t.hlPublicKey,e,n.settings.maxPositionSizeUSDC,n.settings.maxLeverage,n.settings.stopLossEnabled,n.settings.stopLossPercent,n.settings.takeProfitEnabled,n.settings.takeProfitPercent]),{...n,toggleDealer:c=>{ft.toggleDealer(c),c?Q0.startLoop():Q0.stopLoop()},updateSettings:c=>{ft.updateSettings(c)},applyChanges:()=>{ft.reload(),n.isOn&&(Q0.stopLoop(),setTimeout(()=>Q0.startLoop(),500))},saveStrategy:c=>{ft.setStrategyPrompt(c)},clearLogs:()=>{ft.clearLogs()}}},Sat=({vaultAddress:t,setActiveTab:e})=>{const[n,r]=T.useState([]),[i,s]=T.useState([]),[o,a]=T.useState(!1),[l,c]=T.useState(null),u=T.useSyncExternalStore(m=>ft.subscribe(m),()=>ft.getSnapshot()),f=async()=>{if(t){a(!0);try{const m=await Vn.getUserState(t);if(m&&m.assetPositions){const v=m.assetPositions.filter(x=>parseFloat(x.position.szi)!==0).map(x=>({coin:x.position.coin,szi:x.position.szi,entryPx:x.position.entryPx,positionValue:x.position.positionValue,unrealizedPnl:x.position.unrealizedPnl,returnOnEquity:x.position.returnOnEquity,liquidationPx:x.position.liquidationPx,leverage:x.position.leverage}));r(v)}const g=await Vn.getOpenOrders(t);g&&Array.isArray(g)&&s(g.map(v=>({oid:v.oid,coin:v.coin,side:v.side,limitPx:v.limitPx,sz:v.sz,orderType:v.orderType,timestamp:v.timestamp}))),c(new Date)}catch(m){console.error("[DealerOpenOrders] Failed to fetch data:",m)}finally{a(!1)}}};return T.useEffect(()=>{u.isAnalyzing||f();const m=setInterval(()=>{!u.isAnalyzing&&!u.pendingExecution&&f()},3e4);return()=>clearInterval(m)},[t,u.isAnalyzing,u.pendingExecution]),h.jsxs("div",{className:"flex flex-col min-h-[150px]",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[h.jsx(Wz,{className:"h-4 w-4 text-[#E7FE55]"}),"Open Trading"]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs("button",{onClick:()=>e(Ce.HYPERLIQUID),className:"text-[10px] bg-[#E7FE55]/10 hover:bg-[#E7FE55]/20 text-[#E7FE55] border border-[#E7FE55]/30 px-3 py-1.5 rounded transition-colors flex items-center gap-2 uppercase tracking-wider font-medium",title:"View Trading Page",children:[h.jsx(In,{size:12})," Details"]}),h.jsx("button",{onClick:f,className:`p-1.5 rounded hover:bg-[#1a1b21] transition-colors ${o?"animate-spin text-[#60a5fa]":"text-[#747580]"}`,title:"Refresh",children:h.jsx(Pc,{className:"h-3.5 w-3.5"})}),h.jsxs("span",{className:"text-[10px] text-[#747580] bg-[#1a1b21] px-2 py-1 rounded uppercase tracking-wider",children:[n.length," Pos  ",i.length," Ord"]})]})]}),h.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:n.length===0&&i.length===0?h.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-[#747580] gap-2 py-8 bg-[#0f1015] rounded border border-[#232328]",children:[h.jsx(Wz,{className:"h-8 w-8 opacity-30"}),h.jsx("span",{className:"text-[11px]",children:"No open positions or active orders"})]}):h.jsxs("div",{className:"flex flex-col gap-4",children:[n.length>0&&h.jsxs("div",{className:"bg-[#0f1015] rounded border border-[#232328] overflow-hidden",children:[h.jsxs("div",{className:"px-4 py-2 border-b border-[#232328] flex items-center gap-2",children:[h.jsx(zg,{className:"h-3.5 w-3.5 text-[#E7FE55]"}),h.jsx("span",{className:"text-[10px] font-semibold text-[#E7FE55] uppercase tracking-[0.1em]",children:"Active Positions"})]}),h.jsxs("table",{className:"w-full text-left text-[10px]",children:[h.jsx("thead",{children:h.jsxs("tr",{className:"text-[#747580] border-b border-[#232328]",children:[h.jsx("th",{className:"px-4 py-2 font-medium text-[9px] uppercase tracking-[0.05em]",children:"Pair"}),h.jsx("th",{className:"px-4 py-2 font-medium text-[9px] uppercase tracking-[0.05em]",children:"Side"}),h.jsx("th",{className:"px-4 py-2 font-medium text-right text-[9px] uppercase tracking-[0.05em]",children:"Size"}),h.jsx("th",{className:"px-4 py-2 font-medium text-right text-[9px] uppercase tracking-[0.05em]",children:"Entry"}),h.jsx("th",{className:"px-4 py-2 font-medium text-right text-[9px] uppercase tracking-[0.05em]",children:"Liq. Price"}),h.jsx("th",{className:"px-4 py-2 font-medium text-right text-[9px] uppercase tracking-[0.05em]",children:"PnL (ROE%)"})]})}),h.jsx("tbody",{children:n.map(m=>{var C;const g=parseFloat(m.unrealizedPnl),v=(parseFloat(m.returnOnEquity)*100).toFixed(2),x=g>=0,b=parseFloat(m.szi)>0,E=((C=m.leverage)==null?void 0:C.value)||0;return h.jsxs("tr",{className:"border-b border-[#232328]/50 last:border-0 hover:bg-[#1a1b21] transition-colors",children:[h.jsx("td",{className:"px-4 py-3 font-semibold text-white",children:m.coin}),h.jsx("td",{className:"px-4 py-3",children:h.jsxs("span",{className:`px-1.5 py-0.5 rounded text-[9px] font-semibold uppercase tracking-wider ${b?"bg-[#34d399]/15 text-[#34d399]":"bg-red-500/15 text-red-400"}`,children:[b?"LONG":"SHORT"," ",E,"x"]})}),h.jsxs("td",{className:`px-4 py-3 text-right font-mono ${parseFloat(m.szi)>0?"text-[#34d399]":"text-red-400"}`,children:[parseFloat(m.szi)>0?"+":"",m.szi]}),h.jsxs("td",{className:"px-4 py-3 text-right text-[#a0a1a8] font-mono",children:["$",parseFloat(m.entryPx).toFixed(4)]}),h.jsx("td",{className:"px-4 py-3 text-right text-[#747580] font-mono",children:m.liquidationPx?`$${parseFloat(m.liquidationPx).toFixed(4)}`:"-"}),h.jsxs("td",{className:`px-4 py-3 text-right font-mono font-semibold ${x?"text-[#34d399]":"text-red-400"}`,children:[x?"+":"",g.toFixed(2)," (",x?"+":"",v,"%)"]})]},m.coin)})})]})]}),i.length>0&&h.jsxs("div",{className:"bg-[#0f1015] rounded border border-[#232328] overflow-hidden",children:[h.jsxs("div",{className:"px-4 py-2 border-b border-[#232328] flex items-center gap-2",children:[h.jsx(n8,{className:"h-3.5 w-3.5 text-[#E7FE55]"}),h.jsx("span",{className:"text-[10px] font-semibold text-[#E7FE55] uppercase tracking-[0.1em]",children:"Active Orders"})]}),h.jsxs("table",{className:"w-full text-left text-[10px]",children:[h.jsx("thead",{children:h.jsxs("tr",{className:"text-[#747580] border-b border-[#232328]",children:[h.jsx("th",{className:"px-4 py-2 font-medium text-[9px] uppercase tracking-[0.05em]",children:"Pair"}),h.jsx("th",{className:"px-4 py-2 font-medium text-[9px] uppercase tracking-[0.05em]",children:"Side"}),h.jsx("th",{className:"px-4 py-2 font-medium text-[9px] uppercase tracking-[0.05em]",children:"Type"}),h.jsx("th",{className:"px-4 py-2 font-medium text-right text-[9px] uppercase tracking-[0.05em]",children:"Size"}),h.jsx("th",{className:"px-4 py-2 font-medium text-right text-[9px] uppercase tracking-[0.05em]",children:"Price"}),h.jsx("th",{className:"px-4 py-2 font-medium text-right text-[9px] uppercase tracking-[0.05em]",children:"Action"})]})}),h.jsx("tbody",{children:i.map(m=>{var g;return h.jsxs("tr",{className:"border-b border-[#232328]/50 last:border-0 hover:bg-[#1a1b21] transition-colors",children:[h.jsx("td",{className:"px-4 py-3 font-semibold text-white",children:m.coin}),h.jsx("td",{className:"px-4 py-3",children:h.jsx("span",{className:`px-1.5 py-0.5 rounded text-[9px] font-semibold uppercase tracking-wider ${m.side==="B"?"bg-[#34d399]/15 text-[#34d399]":"bg-red-500/15 text-red-400"}`,children:m.side==="B"?"BUY":"SELL"})}),h.jsx("td",{className:"px-4 py-3 text-[#a0a1a8] uppercase",children:((g=m.orderType)==null?void 0:g.split(" ")[0])||"Limit"}),h.jsx("td",{className:"px-4 py-3 text-right text-[#a0a1a8] font-mono",children:m.sz}),h.jsxs("td",{className:"px-4 py-3 text-right text-[#a0a1a8] font-mono",children:["$",parseFloat(m.limitPx).toFixed(4)]}),h.jsx("td",{className:"px-4 py-3 text-right",children:h.jsx("span",{className:"text-[#747580] text-[9px] italic",children:"Pending"})})]},m.oid)})})]})]})]})}),h.jsx("div",{className:"pt-4 flex justify-end",children:h.jsxs("a",{href:"https://app.hyperliquid-testnet.xyz/trade",target:"_blank",rel:"noopener noreferrer",className:"text-[10px] text-[#E7FE55] hover:text-[#E7FE55]/80 flex items-center gap-1 transition-colors",title:"Hyperliquid Platform Official Website",children:[h.jsx(In,{size:10})," Hyperliquid Platform Testnet"]})})]})},Mhe=t=>{const e=T.useSyncExternalStore(n=>ed.subscribe(t,n),()=>ed.getSnapshot(t));return T.useEffect(()=>{ed.loadState(t)},[t]),{summary:e.aiSummary,isGenerating:e.isGenerating,cycleCount:e.recentCycles.length,lastUpdate:e.lastSummaryTime,hasSummary:!!e.aiSummary&&e.aiSummary.length>0}},Aat=t=>{const e=t.match(/(\w+):/);return e?e[1]:null},QO=8,Tat=({status:t,onToggle:e,vaultAddress:n,setActiveTab:r})=>{var q,M;const[i,s]=T.useState([]),[o,a]=T.useState([]),[l,c]=T.useState(0),[u,f]=T.useState({totalPnl:0,winRate:0,totalVolume:0,tradesWithPnl:0}),[m,g]=T.useState(0),v="hl_dealer_metrics_baseline",[x,b]=T.useState(null),[E,C]=T.useState(!1);T.useEffect(()=>{(async()=>{try{const Y=await Ae.getItem(Ae.getUserKey(v));Y&&b(parseInt(Y,10))}catch(Y){console.warn("[DealerDashboard] Failed to load baseline:",Y)}C(!0)})()},[]);const k=T.useCallback(async()=>{const _=Date.now();b(_);try{await Ae.setItem(Ae.getUserKey(v),_.toString()),console.log("[DealerDashboard] Metrics baseline reset to:",new Date(_).toISOString())}catch(Y){console.error("[DealerDashboard] Failed to save baseline:",Y)}},[]),[O,U]=T.useState(!1),{summary:R,isGenerating:$,cycleCount:V,lastUpdate:j,hasSummary:F}=Mhe("hyperliquid"),[W,H]=T.useState(0),B=T.useMemo(()=>t.logs.filter(_=>_.type==="REASONING"||_.type==="SIGNAL").slice(0,20),[t.logs]),A=T.useMemo(()=>{var Y,X;const _=new Map;for(const re of B){const oe=Aat(re.message)||((X=(Y=re.details)==null?void 0:Y.context)==null?void 0:X.coin);oe&&!_.has(oe)&&_.set(oe,re)}return Array.from(_.entries()).sort((re,oe)=>oe[1].timestamp-re[1].timestamp).map(([re,oe])=>({coin:re,log:oe}))},[B]);T.useEffect(()=>{A.length>0&&!t.isAnalyzing&&H(0)},[A.length,t.isAnalyzing]);const I=A[W],D=T.useMemo(()=>[...i].reverse(),[i]);Math.ceil(D.length/QO),T.useMemo(()=>{const _=l*QO;return D.slice(_,_+QO)},[D,l]);const z=T.useCallback((_,Y)=>{const X=Y?_.filter(Ie=>Ie.time>=Y):_;let re=0,oe=0,Ee=0,ce=0,me=0;const ue=X.map(Ie=>{const Ne=parseFloat(Ie.closedPnl||"0"),$e=parseFloat(Ie.fee||"0"),Ze=Ne-$e;return Ne!==0&&(me++,Ze>0?oe++:Ze<0&&Ee++),re+=Ze,ce+=parseFloat(Ie.px)*parseFloat(Ie.sz),{time:Ie.time,date:new Date(Ie.time).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),pnl:re,rawPnl:Ne}}),le=oe+Ee;f({totalPnl:re,winRate:le>0?oe/le*100:0,totalVolume:ce,tradesWithPnl:me}),a(ue)},[]);T.useEffect(()=>{if(!n)return;const _=async()=>{try{if(zt.isDealerActive()){console.log("[Dashboard]   Skipping fetch - dealer is active");return}const X=await zt.getUserFillsShared(n);if(X&&Array.isArray(X)){const Ee=[...X.filter(ce=>ce.cloid||ce.c)].sort((ce,me)=>ce.time-me.time);s(Ee),z(Ee,x)}const re=await zt.getUserStateShared(n);if(re&&re.assetPositions){const oe=re.assetPositions.reduce((Ee,ce)=>Ee+parseFloat(ce.position.unrealizedPnl||"0"),0);g(oe)}}catch(X){console.error("Failed to load dealer history",X)}};_();const Y=setInterval(_,3e4);return()=>clearInterval(Y)},[n,x,z]),T.useEffect(()=>{i.length>0&&z(i,x)},[x,i,z]);const G=()=>{e(!t.isOn)},te=()=>{H(_=>Math.min(A.length-1,_+1))},K=()=>{H(_=>Math.max(0,_-1))};return h.jsxs("div",{className:"flex flex-col h-full gap-4 overflow-y-auto custom-scrollbar pb-4",children:[h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 shrink-0",children:[h.jsxs("div",{className:"lg:col-span-2 flex flex-col gap-4",children:[h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[h.jsxs("div",{className:"glass-panel p-4 rounded flex flex-wrap items-center justify-between gap-2",children:[h.jsxs("div",{className:`px-3 py-1.5 rounded border flex items-center gap-2 transition-all ${t.isOn?"bg-[#E7FE55]/10 border-[#E7FE55]/30":"bg-[#1a1b21] border-[#232328]"}`,children:[h.jsxs("span",{className:"relative flex h-2 w-2",children:[t.isOn&&h.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-[#E7FE55] opacity-75"}),h.jsx("span",{className:`relative inline-flex rounded-full h-2 w-2 ${t.isOn?"bg-[#E7FE55]":"bg-red-500"}`})]}),h.jsx("span",{className:`font-semibold tracking-wider text-[10px] uppercase ${t.isOn?"text-[#E7FE55]":"text-[#747580]"}`,children:t.isOn?"ACTIVE":"OFFLINE"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-[9px] font-medium text-[#747580] uppercase tracking-[0.1em]",children:"Master"}),h.jsx("button",{onClick:G,className:`relative inline-flex h-5 w-9 items-center rounded-full transition-all focus:outline-none ${t.isOn?"bg-[#E7FE55]":"bg-[#232328] hover:bg-[#2a2b30]"}`,children:h.jsx("span",{className:`${t.isOn?"translate-x-5":"translate-x-1"} inline-block h-3 w-3 transform rounded-full bg-black transition-transform`})})]})]}),h.jsxs("div",{className:"glass-panel p-4 rounded relative group",children:[h.jsxs("div",{className:"flex items-center justify-between mb-1",children:[h.jsx("div",{className:"text-[10px] text-[#747580] uppercase tracking-[0.1em]",children:"Total Profit"}),h.jsx("button",{onClick:k,className:"p-1 rounded opacity-0 group-hover:opacity-100 transition-opacity text-[#747580] hover:text-[#E7FE55] hover:bg-[#1a1b21]",title:"Reset metrics from now",children:h.jsx(GTe,{size:12})})]}),h.jsxs("div",{className:`text-xl font-semibold font-mono tracking-tight ${u.totalPnl>=0?"text-[#34d399]":"text-red-400"}`,children:[u.totalPnl>=0?"+":"",u.totalPnl.toFixed(2)," USD"]}),x&&h.jsxs("div",{className:"text-[8px] text-[#3a3b42] mt-1",title:`Measuring since ${new Date(x).toLocaleString()}`,children:["Since ",new Date(x).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),h.jsxs("div",{className:"glass-panel p-4 rounded",children:[h.jsx("div",{className:"text-[10px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Unrealized PnL"}),h.jsxs("div",{className:`text-xl font-semibold font-mono tracking-tight ${m>=0?"text-[#34d399]":"text-red-400"}`,children:[m>=0?"+":"",m.toFixed(2)," USD"]})]}),h.jsxs("div",{className:"glass-panel p-4 rounded",children:[h.jsx("div",{className:"text-[10px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Win Rate"}),h.jsxs("div",{className:"text-xl font-semibold text-white font-mono tracking-tight",children:[u.winRate.toFixed(1),"%"]})]})]}),h.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[h.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[h.jsxs("div",{className:"flex flex-col",children:[h.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Exposure"}),h.jsxs("span",{className:"text-white font-mono text-sm font-semibold",children:["$",t.currentExposure.toLocaleString()]})]}),h.jsx(sd,{className:"h-4 w-4 text-[#747580]"})]}),h.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[h.jsxs("div",{className:"flex flex-col",children:[h.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Active Pairs"}),h.jsx("span",{className:"text-white font-mono text-sm font-semibold",children:t.settings.tradingPairs.length})]}),h.jsx(yw,{className:"h-4 w-4 text-[#747580]"})]}),h.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[h.jsxs("div",{className:"flex flex-col",children:[h.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Interval"}),h.jsxs("span",{className:"text-white font-mono text-sm font-semibold",children:[t.settings.checkIntervalSeconds,"s"]})]}),h.jsx(Rs,{className:"h-4 w-4 text-[#747580]"})]}),h.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[h.jsxs("div",{className:"flex flex-col",children:[h.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Max Leverage"}),h.jsxs("span",{className:"text-white font-mono text-sm font-semibold",children:[t.settings.maxLeverage,"x"]})]}),h.jsx(El,{className:"h-4 w-4 text-[#747580]"})]})]}),h.jsxs("div",{className:"glass-panel p-5 rounded min-h-[220px] flex flex-col flex-1",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[h.jsx(In,{className:"h-4 w-4 text-[#E7FE55]"}),h.jsx("span",{className:"text-sm font-semibold text-white",children:"Performance Curve"})]}),h.jsx("div",{className:"flex-1 w-full",children:o.length>0?h.jsx(Uw,{width:"100%",height:"100%",minWidth:100,minHeight:100,children:h.jsxs(Cde,{data:o,children:[h.jsx("defs",{children:h.jsxs("linearGradient",{id:"colorPnl",x1:"0",y1:"0",x2:"0",y2:"1",children:[h.jsx("stop",{offset:"5%",stopColor:"#E7FE55",stopOpacity:.2}),h.jsx("stop",{offset:"95%",stopColor:"#E7FE55",stopOpacity:0})]})}),h.jsx(Xw,{strokeDasharray:"3 3",stroke:"#232328",vertical:!1}),h.jsx(Zw,{dataKey:"date",stroke:"#747580",fontSize:10,tickLine:!1,axisLine:!1}),h.jsx(e1,{stroke:"#747580",fontSize:10,tickLine:!1,axisLine:!1,tickFormatter:_=>`$${_}`}),h.jsx(Wk,{contentStyle:{backgroundColor:"#14151a",borderColor:"#232328",borderRadius:"4px"},itemStyle:{color:"#E7FE55"},formatter:_=>[`$${_.toFixed(2)}`,"Net PnL"]}),h.jsx(TN,{type:"monotone",dataKey:"pnl",stroke:"#E7FE55",strokeWidth:1.5,fillOpacity:1,fill:"url(#colorPnl)"})]})}):h.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-[#747580]",children:[h.jsx(El,{className:"h-8 w-8 mb-2 opacity-40"}),h.jsx("span",{className:"text-[11px]",children:"No performance data yet"})]})})]})]}),h.jsxs("div",{className:"glass-panel p-5 rounded flex flex-col",children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Sc,{className:`h-4 w-4 shrink-0 ${t.isAnalyzing?"text-[#E7FE55] animate-pulse":"text-[#E7FE55]/60"}`}),h.jsxs("div",{className:"flex items-center bg-[#0f1015] rounded-full p-0.5 border border-[#232328]",children:[h.jsx("button",{onClick:()=>U(!1),className:`px-2 py-0.5 rounded-full text-[9px] font-semibold uppercase tracking-wider transition-all ${O?"text-[#747580] hover:text-white":"bg-[#E7FE55] text-black"}`,children:"Live"}),h.jsx("button",{onClick:()=>F&&U(!0),disabled:!F,className:`px-2 py-0.5 rounded-full text-[9px] font-semibold uppercase tracking-wider transition-all ${O?"bg-[#E7FE55] text-black":F?"text-[#747580] hover:text-white":"text-[#3a3b42] cursor-not-allowed"}`,title:F?"View AI Summary":`Available after ${2-V} more cycles`,children:"Summary"})]}),t.isAnalyzing&&!O&&h.jsx("span",{className:"px-2 py-0.5 rounded bg-[#E7FE55]/15 text-[#E7FE55] text-[9px] font-semibold uppercase tracking-wider animate-pulse",children:"LIVE"})]}),!t.isAnalyzing&&A.length>0&&!O&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("button",{onClick:te,disabled:W>=A.length-1,className:`p-1 rounded transition-colors ${W>=A.length-1?"text-[#3a3b42] cursor-not-allowed":"text-[#747580] hover:text-white hover:bg-[#1a1b21]"}`,title:"Previous coin",children:h.jsx(zT,{size:16})}),h.jsxs("span",{className:"text-[10px] text-[#747580] font-mono min-w-[32px] text-center",children:[W+1,"/",A.length]}),h.jsx("button",{onClick:K,disabled:W<=0,className:`p-1 rounded transition-colors ${W<=0?"text-[#3a3b42] cursor-not-allowed":"text-[#747580] hover:text-white hover:bg-[#1a1b21]"}`,title:"Next coin",children:h.jsx(id,{size:16})})]})]}),O?h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("span",{className:"px-2 py-0.5 rounded bg-[#E7FE55]/15 text-[#E7FE55] text-[9px] font-semibold uppercase tracking-wider",children:[V," cycles"]}),$&&h.jsx("span",{className:"text-[10px] text-[#747580] animate-pulse",children:"generating..."})]}),j>0&&h.jsx("span",{className:"text-[10px] text-[#747580] font-mono",children:new Date(j).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),h.jsx("div",{className:"flex-1 bg-[#0f1015] rounded p-3 border border-[#232328] overflow-y-auto custom-scrollbar min-h-0 mb-3",children:R?h.jsx("p",{className:"text-[13px] text-[#a0a1a8] leading-relaxed whitespace-pre-wrap",children:R}):h.jsx("p",{className:"text-[13px] text-[#747580] italic",children:"Summary will be generated after 2+ analysis cycles..."})})]}):t.isAnalyzing?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"flex items-center justify-between mb-3",children:h.jsx("span",{className:`px-2 py-0.5 rounded text-[9px] font-semibold uppercase tracking-wider ${t.currentSignal==="BULLISH"?"bg-[#34d399]/15 text-[#34d399]":t.currentSignal==="BEARISH"?"bg-red-500/15 text-red-400":"bg-[#1a1b21] text-[#747580]"}`,children:t.currentSignal||"ANALYZING"})}),h.jsx("div",{className:"flex-1 bg-[#0f1015] rounded p-3 border border-[#232328] overflow-y-auto custom-scrollbar min-h-0 mb-3",children:h.jsxs("p",{className:"text-[13px] text-[#a0a1a8] italic leading-relaxed",children:['"',t.trendAssessment,'"']})})]}):I?h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"px-2 py-1 rounded bg-[#E7FE55]/15 text-[#E7FE55] text-xs font-semibold uppercase tracking-wider",children:I.coin}),h.jsx("span",{className:"text-[10px] text-[#747580] font-mono",children:new Date(I.log.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),((q=I.log.details)==null?void 0:q.signal)&&h.jsx("span",{className:`px-2 py-0.5 rounded text-[9px] font-semibold uppercase tracking-wider ${I.log.details.signal==="BUY"||I.log.details.signal==="LONG"?"bg-[#34d399]/15 text-[#34d399]":I.log.details.signal==="SELL"||I.log.details.signal==="SHORT"?"bg-red-500/15 text-red-400":"bg-[#1a1b21] text-[#747580]"}`,children:I.log.details.signal})]}),h.jsx("div",{className:"flex-1 bg-[#0f1015] rounded p-3 border border-[#232328] overflow-y-auto custom-scrollbar min-h-0 mb-3",children:h.jsxs("p",{className:"text-[13px] text-[#a0a1a8] italic leading-relaxed whitespace-pre-wrap",children:['"',((M=I.log.details)==null?void 0:M.fullReason)||I.log.message,'"']})})]}):h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"flex items-center justify-between mb-3",children:h.jsx("span",{className:`px-2 py-0.5 rounded text-[9px] font-semibold uppercase tracking-wider ${t.currentSignal==="BULLISH"?"bg-[#34d399]/15 text-[#34d399]":t.currentSignal==="BEARISH"?"bg-red-500/15 text-red-400":"bg-[#1a1b21] text-[#747580]"}`,children:t.currentSignal||"NEUTRAL"})}),h.jsx("div",{className:"flex-1 bg-[#0f1015] rounded p-3 border border-[#232328] overflow-y-auto custom-scrollbar min-h-0 mb-3",children:h.jsxs("p",{className:"text-[13px] text-[#a0a1a8] italic leading-relaxed",children:['"',t.trendAssessment,'"']})})]}),h.jsxs("div",{className:"pt-3 border-t border-[#232328] flex flex-col gap-2 shrink-0",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.05em] w-12 shrink-0",children:"Task"}),h.jsx("div",{className:"text-[10px] text-white truncate font-mono flex-1",children:t.currentTask||" Idle"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.05em] w-12 shrink-0",children:"Status"}),h.jsx("div",{className:"text-[10px] text-[#a0a1a8] font-mono truncate flex-1",children:t.statusMessage})]}),t.statusDetail&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.05em] w-12 shrink-0",children:"Info"}),h.jsx("div",{className:"text-[10px] text-[#E7FE55] truncate flex-1",children:t.statusDetail})]})]})]})]}),h.jsx("div",{className:"glass-panel p-5 rounded shrink-0",children:h.jsx(Sat,{vaultAddress:n,setActiveTab:r})})]})},kat=({logs:t,onClearLogs:e})=>{const[n,r]=T.useState(null),i=t.filter(l=>{if(["REASONING","SIGNAL","TRADE","ERROR"].includes(l.type))return!0;if(["INFO","WARNING"].includes(l.type)){const c=l.message.toLowerCase();return c.includes("executing")||c.includes("skipping")||c.includes("ignored")}return!1}),s=(l,c)=>l==="ERROR"?h.jsx("div",{className:"text-red-400",children:h.jsx(S4,{size:16})}):l==="TRADE"?h.jsx("div",{className:"text-[#34d399]",children:h.jsx(ex,{size:16})}):c.includes("BUY")||c.includes("BULLISH")?h.jsx("div",{className:"text-[#34d399]",children:h.jsx(In,{size:16})}):c.includes("SELL")||c.includes("BEARISH")||c.includes("SHORT")?h.jsx("div",{className:"text-red-400",children:h.jsx(n2,{size:16})}):c.includes("CLOSE")?h.jsx("div",{className:"text-orange-400",children:h.jsx(S4,{size:16})}):h.jsx("div",{className:"text-[#E7FE55]",children:h.jsx(Sc,{size:16})}),o=l=>new Date(l).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}),a=l=>typeof l=="number"?l.toFixed(2):typeof l=="object"&&l!==null?Object.entries(l).map(([c,u])=>`${c}: ${typeof u=="number"?u.toFixed(2):u}`).join(", "):String(l);return h.jsxs("div",{className:"flex flex-col h-full overflow-hidden",children:[h.jsxs("div",{className:"p-4 border-b border-[#232328] flex justify-between items-center shrink-0",children:[h.jsxs("h3",{className:"text-sm font-semibold flex items-center gap-2 text-white",children:[h.jsx(Sc,{className:"h-4 w-4 text-[#E7FE55]"}),"AI Reasoning Log"]}),h.jsx("button",{onClick:e,className:"text-[10px] text-[#747580] hover:text-white transition-colors uppercase tracking-wider",children:"Clear History"})]}),h.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar",children:i.length===0?h.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-[#747580] opacity-50 py-12",children:[h.jsx(Sc,{size:48,className:"mb-4 opacity-30"}),h.jsx("p",{className:"text-sm",children:"No analysis recorded yet."}),h.jsx("p",{className:"text-[10px] text-[#747580]",children:"Start the dealer to see its thought process."})]}):i.map(l=>{var m,g;const c=n===l.id,u=(m=l.details)==null?void 0:m.context,f=(g=l.details)==null?void 0:g.context;return h.jsxs("div",{className:"relative pl-6 pb-2 border-l border-[#232328] last:border-0 transition-colors group",children:[h.jsx("div",{className:"absolute -left-[5px] top-1 w-2.5 h-2.5 rounded-full bg-[#14151a] border border-[#232328] group-hover:border-[#747580] transition-colors"}),h.jsxs("div",{className:"bg-[#14151a] p-3 rounded border border-[#232328] hover:border-[#3a3b42] transition-all",children:[h.jsxs("div",{className:"flex items-center justify-between mb-1",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[s(l.type,l.message),h.jsx("span",{className:`text-[10px] font-semibold uppercase tracking-wider ${l.type==="ERROR"?"text-red-400":l.type==="TRADE"?"text-[#34d399]":l.type==="SIGNAL"?"text-[#E7FE55]":"text-[#a0a1a8]"}`,children:l.type})]}),h.jsxs("span",{className:"text-[10px] text-[#747580] flex items-center gap-1 font-mono",children:[h.jsx(Rs,{size:10}),o(l.timestamp)]})]}),h.jsx("p",{className:"text-sm text-[#a0a1a8] leading-relaxed",children:l.message}),l.details&&l.details.fullReason&&h.jsxs("div",{className:"mt-2 p-2 bg-[#0f1015] rounded text-[11px] text-[#747580] font-mono italic border-l-2 border-[#60a5fa]/30",children:['"',l.details.fullReason,'"']}),u&&h.jsxs("button",{onClick:()=>r(c?null:l.id),className:"mt-2 flex items-center gap-1 text-[10px] text-[#60a5fa] hover:text-[#93c5fd] transition-colors uppercase tracking-wider",children:[c?h.jsx(am,{size:12}):h.jsx(Ic,{size:12}),c?"Hide":"Show"," Analysis Context"]}),c&&u&&h.jsxs("div",{className:"mt-3 p-3 bg-[#0f1015] rounded border border-[#232328] space-y-3",children:[f.indicators&&Object.keys(f.indicators).length>0&&h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-[#34d399] mb-2 uppercase tracking-wider font-semibold",children:[h.jsx(yo,{size:10}),h.jsx("span",{children:"Indicators Used"})]}),h.jsx("div",{className:"grid grid-cols-2 gap-1",children:Object.entries(f.indicators).map(([v,x])=>h.jsxs("div",{className:"flex justify-between bg-[#34d399]/10 border border-[#34d399]/20 px-2 py-1 rounded text-[10px]",children:[h.jsx("span",{className:"text-[#34d399] uppercase font-medium",children:v}),h.jsx("span",{className:"text-[#4ade80] font-mono",children:a((x==null?void 0:x.value)||x)})]},v))})]}),f.macro&&Object.keys(f.macro.indicators||{}).length>0&&h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-amber-400 mb-2 uppercase tracking-wider font-semibold",children:[h.jsx(In,{size:10}),h.jsxs("span",{children:["Macro Confirmation (",f.macro.timeframe==="15"?"15m":f.macro.timeframe==="60"?"1H":f.macro.timeframe==="240"?"4H":f.macro.timeframe==="D"?"Daily":f.macro.timeframe==="W"?"Weekly":f.macro.timeframe,")"]})]}),h.jsx("div",{className:"grid grid-cols-2 gap-1",children:Object.entries(f.macro.indicators).map(([v,x])=>{var U,R;const b=(R=(U=f.indicators)==null?void 0:U[v])==null?void 0:R.value,E=(x==null?void 0:x.value)||x;let C="";const k=typeof b=="number"?b:typeof b=="object"&&b!==null?Object.values(b)[0]:null,O=typeof E=="number"?E:typeof E=="object"&&E!==null?Object.values(E)[0]:null;if(v==="rsi"&&typeof k=="number"&&typeof O=="number"){const $=k>70,V=k<30,j=O>70,F=O<30;$&&F||V&&j?C=" ":($&&j||V&&F)&&(C=" ")}return h.jsxs("div",{className:"flex justify-between bg-amber-500/10 border border-amber-500/20 px-2 py-1 rounded text-[10px]",children:[h.jsx("span",{className:"text-amber-400 uppercase font-medium",children:v}),h.jsxs("span",{className:"text-amber-300 font-mono",children:[C,a(E)]})]},v)})})]}),f.tradingCosts&&h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-[#747580] mb-2 uppercase tracking-wider font-semibold",children:[h.jsx(_1,{size:10}),h.jsx("span",{children:"Trading Costs"})]}),h.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[h.jsxs("div",{className:"bg-[#1a1b21] px-2 py-1 rounded text-[10px] border border-[#232328]",children:[h.jsx("span",{className:"text-[#747580]",children:"Maker: "}),h.jsxs("span",{className:"text-white font-mono",children:[((f.tradingCosts.makerFee??2e-4)*100).toFixed(3),"%"]})]}),h.jsxs("div",{className:"bg-[#1a1b21] px-2 py-1 rounded text-[10px] border border-[#232328]",children:[h.jsx("span",{className:"text-[#747580]",children:"Taker: "}),h.jsxs("span",{className:"text-white font-mono",children:[((f.tradingCosts.takerFee??5e-4)*100).toFixed(3),"%"]})]}),h.jsxs("div",{className:"bg-[#1a1b21] px-2 py-1 rounded text-[10px] border border-[#232328]",children:[h.jsx("span",{className:"text-[#747580]",children:"Funding: "}),h.jsxs("span",{className:(f.tradingCosts.fundingRate??0)>0?"text-red-400 font-mono":"text-[#34d399] font-mono",children:[((f.tradingCosts.fundingRate??0)*100).toFixed(4),"%"]})]})]})]}),f.currentPrice&&h.jsxs("div",{className:"text-[10px] text-[#747580]",children:["Price at analysis: ",h.jsxs("span",{className:"text-white font-mono",children:["$",f.currentPrice.toLocaleString()]})]}),f.enabledIndicators&&f.enabledIndicators.length>0&&h.jsxs("div",{className:"text-[10px] text-[#747580]",children:["Enabled: ",h.jsx("span",{className:"font-mono",children:f.enabledIndicators.join(", ").toUpperCase()})]})]})]})]},l.id)})})]})},Cat=({log:t,index:e,getLogBadgeVariant:n})=>{const[r,i]=T.useState(!1),s=t.details&&Object.keys(t.details).length>0;return h.jsxs(Ht.div,{className:"flex gap-3 p-3 hover:bg-[#1a1b21] rounded border-b border-[#232328] last:border-0 transition-colors",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:e*.02},children:[h.jsx("span",{className:"text-[#747580] shrink-0 text-[10px] mt-0.5 font-mono",children:new Date(t.timestamp).toLocaleTimeString()}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Ml,{variant:n(t.type),className:"text-[9px] uppercase tracking-wider",children:t.type}),h.jsx("span",{className:"text-[#a0a1a8] flex-1 text-sm",children:t.message}),s&&h.jsx("button",{onClick:()=>i(!r),className:"text-[#747580] hover:text-white transition-colors p-1 rounded hover:bg-[#232328]",title:r?"Collapse details":"Expand details",children:r?h.jsx(Ic,{className:"h-4 w-4"}):h.jsx(id,{className:"h-4 w-4"})})]}),h.jsx(go,{children:s&&r&&h.jsx(Ht.pre,{className:"mt-2 text-[10px] text-[#747580] bg-[#0f1015] p-3 rounded overflow-x-auto max-h-[300px] overflow-y-auto custom-scrollbar border border-[#232328] font-mono",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:JSON.stringify(t.details,null,2)})})]})]},t.id)},Nat=({status:t,onClearLogs:e})=>{const[n,r]=T.useState("thinking"),i=T.useRef(null),s=()=>{const a=JSON.stringify(t.logs,null,2),l="data:application/json;charset=utf-8,"+encodeURIComponent(a),c=`dealer_logs_${new Date().toISOString()}.json`,u=document.createElement("a");u.setAttribute("href",l),u.setAttribute("download",c),u.click()},o=a=>{switch(a){case"INFO":return"info";case"WARNING":return"warning";case"ERROR":return"destructive";case"TRADE":return"success";case"SIGNAL":return"purple";default:return"secondary"}};return h.jsxs("div",{className:"flex flex-col h-full gap-4 overflow-hidden",children:[h.jsx("div",{className:"glass-panel p-4 shrink-0",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2 bg-[#1a1b21] p-1 rounded border border-[#232328]",children:[h.jsxs("button",{onClick:()=>r("thinking"),className:`flex items-center gap-2 px-4 py-2 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${n==="thinking"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:[h.jsx(Sc,{className:"h-4 w-4"}),"Thinking"]}),h.jsxs("button",{onClick:()=>r("logs"),className:`flex items-center gap-2 px-4 py-2 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${n==="logs"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:[h.jsx(kne,{className:"h-4 w-4"}),"Activity Log",t.logs.length>0&&h.jsx("span",{className:"bg-white/20 px-1.5 py-0.5 rounded text-[9px]",children:t.logs.length})]})]}),h.jsx(go,{children:n==="logs"&&h.jsxs(Ht.div,{className:"flex items-center gap-2",initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},children:[h.jsx("button",{onClick:e,className:"p-2 rounded hover:bg-red-500/10 text-[#747580] hover:text-red-400 transition-colors border border-[#232328]",title:"Clear Logs",children:h.jsx(cm,{className:"h-4 w-4"})}),h.jsx("button",{onClick:s,className:"p-2 rounded hover:bg-[#1a1b21] text-[#747580] hover:text-white transition-colors border border-[#232328]",title:"Export JSON",children:h.jsx(Uo,{className:"h-4 w-4"})})]})})]})}),h.jsxs("div",{className:"glass-panel flex-1 min-h-0 overflow-hidden flex flex-col",children:[n==="thinking"&&h.jsx(kat,{logs:t.logs,onClearLogs:e}),n==="logs"&&h.jsx("div",{className:"flex-1 min-h-0 relative",children:h.jsx("div",{ref:i,className:"absolute inset-0 overflow-y-auto custom-scrollbar",children:t.logs.length===0?h.jsxs(Ht.div,{className:"h-full flex flex-col items-center justify-center text-[#747580] gap-3 py-12",initial:{opacity:0},animate:{opacity:1},children:[h.jsx(a8,{className:"h-10 w-10 opacity-30"}),h.jsx("p",{className:"text-sm",children:"No operations recorded yet."})]}):h.jsx(go,{children:t.logs.map((a,l)=>h.jsx(Cat,{log:a,index:l,getLogBadgeVariant:o},a.id))})})})]})]})},VQ={rsi:{name:"RSI",key:"rsi",description:"Relative Strength Index",icon:h.jsx(yo,{size:14}),params:[{key:"period",label:"Period",default:14}]},macd:{name:"MACD",key:"macd",description:"Moving Average Convergence Divergence",icon:h.jsx(In,{size:14}),params:[{key:"fast",label:"Fast",default:12},{key:"slow",label:"Slow",default:26},{key:"signal",label:"Signal",default:9}]},bollinger:{name:"Bollinger",key:"bollinger",description:"Bollinger Bands",icon:h.jsx(El,{size:14}),params:[{key:"period",label:"Period",default:20},{key:"stdDev",label:"StdDev",default:2}]},atr:{name:"ATR",key:"atr",description:"Average True Range",icon:h.jsx($a,{size:14}),params:[{key:"period",label:"Period",default:14}]},adx:{name:"ADX",key:"adx",description:"Average Directional Index",icon:h.jsx(In,{size:14}),params:[{key:"period",label:"Period",default:14}]},obv:{name:"OBV",key:"obv",description:"On-Balance Volume",icon:h.jsx(El,{size:14}),params:[]},vwap:{name:"VWAP",key:"vwap",description:"Volume Weighted Avg Price",icon:h.jsx(yo,{size:14}),params:[]},ichimoku:{name:"Ichimoku",key:"ichimoku",description:"Ichimoku Cloud",icon:h.jsx(In,{size:14}),params:[{key:"conversion",label:"Conv",default:9},{key:"base",label:"Base",default:26},{key:"spanB",label:"SpanB",default:52},{key:"displacement",label:"Disp",default:26}]},ema:{name:"EMA",key:"ema",description:"Exponential Moving Average",icon:h.jsx(In,{size:14}),params:[{key:"period",label:"Period",default:20}]},sma:{name:"SMA",key:"sma",description:"Simple Moving Average",icon:h.jsx(In,{size:14}),params:[{key:"period",label:"Period",default:20}]},stoch:{name:"Stochastic",key:"stoch",description:"Stochastic Oscillator",icon:h.jsx(yo,{size:14}),params:[{key:"period",label:"Period",default:14},{key:"signalPeriod",label:"Signal",default:3}]}},_at={trend:{bg:"bg-purple-500/10",text:"text-purple-400",border:"border-purple-500/30"},momentum:{bg:"bg-blue-500/10",text:"text-blue-400",border:"border-blue-500/30"},volume:{bg:"bg-green-500/10",text:"text-green-400",border:"border-green-500/30"},volatility:{bg:"bg-orange-500/10",text:"text-orange-400",border:"border-orange-500/30"}},Iat={trend:h.jsx(In,{size:14}),momentum:h.jsx(yo,{size:14}),volume:h.jsx(El,{size:14}),volatility:h.jsx($a,{size:14})},Pat=({indicatorSettings:t,autonomousMode:e,selectedPreset:n,onUpdateIndicatorSettings:r,onToggleAutonomousMode:i,onSelectPreset:s})=>{const[o,a]=T.useState("trend"),[l,c]=T.useState(null),[u,f]=T.useState([]),[m,g]=T.useState(!1),[v,x]=T.useState(!1),b=T.useMemo(()=>Bfe(t),[t]),E=T.useMemo(()=>KZe(t),[t]),C=T.useMemo(()=>Ufe(t),[t]),k=j=>{const F=t[j];!rX(t,j)&&!F.enabled||(r({[j]:{...F,enabled:!F.enabled}}),E!=="custom"&&s("custom"))},O=(j,F)=>{const W=t[j];r({[j]:{...W,weight:Math.max(.5,Math.min(2,F))}})},U=(j,F,W)=>{const H=t[j];r({[j]:{...H,params:{...H.params,[F]:W}}})},R=j=>{if(j==="custom")return;const F=GZe(j,t);r(F),s(j)},$=()=>{r(Ug),s("balanced")},V=async()=>{g(!0),x(!0);const j=[],F=Object.keys(t).filter(W=>t[W].enabled);for(const W of F){const H=VQ[W];j.push({indicator:H.name,value:null,loading:!0}),f([...j]);try{const B=t[W],A=await fo.getIndicator("BTCUSDT",W,"60",B.params);j[j.length-1]={indicator:H.name,value:A.value,loading:!1}}catch(B){j[j.length-1]={indicator:H.name,value:null,loading:!1,error:B.message}}f([...j])}g(!1)};return e?h.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-4",children:[h.jsx("div",{className:"h-14 w-14 rounded-full bg-gradient-to-br from-emerald-500/30 to-cyan-500/30 flex items-center justify-center mb-4 border border-emerald-500/20",children:h.jsx(Ane,{className:"h-7 w-7 text-emerald-400"})}),h.jsx("h3",{className:"text-white font-semibold mb-2",children:"Autonomous Mode Active"}),h.jsx("p",{className:"text-xs text-gray-400 max-w-[280px] mb-4",children:"AI will analyze market conditions and choose the optimal preset each cycle:"}),h.jsx("div",{className:"grid grid-cols-2 gap-2 w-full max-w-[320px] text-[10px]",children:Object.entries(Yu).filter(([j])=>j!=="custom").map(([j,F])=>h.jsxs("div",{className:"bg-gray-800/50 border border-gray-700/30 rounded-lg p-2 text-left",children:[h.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5",children:[h.jsx("span",{children:F.emoji}),h.jsx("span",{className:"text-gray-300 font-medium",children:F.name})]}),h.jsx("div",{className:"text-gray-500",children:F.marketCondition})]},j))})]}):h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{className:"text-[10px] text-gray-400 uppercase tracking-wider font-semibold",children:"Presets"}),h.jsxs("span",{className:`text-[10px] font-mono ${C?"text-orange-400":"text-gray-400"}`,children:[b," / ",jee," selected"]})]}),h.jsx("div",{className:"grid grid-cols-3 gap-1.5",children:Object.entries(Yu).filter(([j])=>j!=="custom").map(([j,F])=>h.jsxs("button",{onClick:()=>R(j),className:`px-2 py-1.5 rounded-lg text-[10px] font-medium transition-all border ${E===j?"bg-purple-500/20 border-purple-500/50 text-purple-300":"bg-gray-800/30 border-gray-700/30 text-gray-400 hover:border-gray-600"}`,title:F.description,children:[h.jsx("span",{className:"mr-1",children:F.emoji}),F.name]},j))}),E==="custom"&&h.jsx("div",{className:"text-[10px] text-gray-500 text-center",children:" Custom configuration"})]}),h.jsx("div",{className:"space-y-2",children:Object.entries(JC).map(([j,F])=>{const W=o===j,H=Lfe(t,j),B=jfe(t,j),A=_at[j];return h.jsxs("div",{className:`rounded-lg border ${A.border} overflow-hidden`,children:[h.jsxs("button",{onClick:()=>a(W?null:j),className:`w-full px-3 py-2 flex items-center justify-between ${A.bg}`,children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:A.text,children:Iat[j]}),h.jsx("span",{className:`text-xs font-medium ${A.text}`,children:F.name})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("span",{className:`text-[10px] px-1.5 py-0.5 rounded font-mono ${B?"bg-orange-500/20 text-orange-400":"bg-gray-700/50 text-gray-400"}`,children:[H,"/",F.maxIndicators]}),W?h.jsx(am,{size:14,className:"text-gray-500"}):h.jsx(Ic,{size:14,className:"text-gray-500"})]})]}),W&&h.jsx("div",{className:"p-2 space-y-1.5 bg-gray-900/30",children:F.indicators.map(I=>{const D=t[I],z=VQ[I],G=rX(t,I),te=l===I;return h.jsxs("div",{className:`rounded-lg border transition-all ${D.enabled?`${A.border} ${A.bg}`:"border-gray-700/30 bg-gray-800/20"}`,children:[h.jsxs("div",{className:"px-2.5 py-1.5 flex items-center gap-2",children:[h.jsx("button",{onClick:()=>k(I),disabled:!G&&!D.enabled,className:`shrink-0 w-7 h-3.5 rounded-full relative transition-all ${D.enabled?"bg-purple-500":G?"bg-gray-600":"bg-gray-700 opacity-40 cursor-not-allowed"}`,title:!G&&!D.enabled?"Limit reached":void 0,children:h.jsx("div",{className:"absolute top-0.5 w-2.5 h-2.5 rounded-full bg-white transition-all",style:{left:D.enabled?"14px":"2px"}})}),h.jsxs("button",{onClick:()=>c(te?null:I),className:"flex items-center gap-1.5 flex-1 text-left",children:[h.jsx("span",{className:`text-xs font-medium ${D.enabled?"text-white":"text-gray-400"}`,children:z.name}),h.jsx("span",{className:"text-[9px] text-gray-500 truncate",children:z.description})]}),D.enabled&&h.jsxs("span",{className:`text-[9px] font-mono px-1 py-0.5 rounded ${D.weight>1?"bg-green-500/20 text-green-400":D.weight<1?"bg-yellow-500/20 text-yellow-400":"bg-gray-700/50 text-gray-400"}`,children:[D.weight.toFixed(1),""]}),(z.params.length>0||D.enabled)&&h.jsx("button",{onClick:()=>c(te?null:I),children:te?h.jsx(am,{size:12,className:"text-gray-500"}):h.jsx(Ic,{size:12,className:"text-gray-500"})})]}),te&&h.jsxs("div",{className:"px-2.5 pb-2 pt-1 border-t border-gray-700/30 space-y-2",children:[D.enabled&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-[9px] text-gray-500 w-10",children:"Weight"}),h.jsx("input",{type:"range",min:"0.5",max:"2.0",step:"0.1",value:D.weight,onChange:K=>O(I,parseFloat(K.target.value)),className:"flex-1 h-1 bg-gray-700 rounded-full appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-purple-500"}),h.jsxs("span",{className:`text-[10px] font-mono w-8 text-right ${D.weight>1?"text-green-400":D.weight<1?"text-yellow-400":"text-gray-400"}`,children:[D.weight.toFixed(1),""]})]}),z.params.length>0&&h.jsx("div",{className:"flex flex-wrap gap-1.5",children:z.params.map(K=>h.jsxs("div",{className:"flex items-center gap-1 bg-gray-900/50 px-1.5 py-0.5 rounded",children:[h.jsx("label",{className:"text-[9px] text-gray-400",children:K.label}),h.jsx("input",{type:"number",value:D.params[K.key]||K.default,onChange:q=>U(I,K.key,parseInt(q.target.value)),className:"w-10 bg-transparent border border-gray-700/50 rounded px-1 py-0.5 text-[9px] text-white focus:outline-none focus:border-purple-500"})]},K.key))})]})]},I)})})]},j)})}),h.jsxs("div",{className:"flex items-center justify-center gap-2 pt-2 border-t border-gray-700/30",children:[h.jsxs("button",{onClick:V,disabled:m||b===0,className:"flex items-center justify-center gap-1.5 bg-[#E7FE55] hover:bg-[#d4e94d] disabled:bg-gray-700 disabled:text-gray-500 text-black px-3 py-1.5 rounded text-[10px] font-bold uppercase tracking-wide transition-all",children:[m?h.jsx(Pc,{size:10,className:"animate-spin"}):h.jsx($a,{size:10}),"Test (",b,")"]}),h.jsx("button",{onClick:$,className:"px-2 py-1.5 bg-gray-700 hover:bg-gray-600 text-white rounded text-[10px] transition-all",title:"Reset to Balanced Preset",children:h.jsx(Pc,{size:10})})]}),v&&u.length>0&&h.jsxs("div",{className:"bg-gray-900/50 rounded-lg border border-gray-700/30 p-2",children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsx("span",{className:"text-[10px] font-bold text-gray-400",children:"Results (BTC 1H)"}),h.jsx("button",{onClick:()=>{f([]),x(!1)},className:"text-[9px] text-gray-500 hover:text-gray-300",children:"Clear"})]}),h.jsx("div",{className:"space-y-1",children:u.map((j,F)=>h.jsxs("div",{className:"flex items-center justify-between text-[10px] bg-gray-800/30 px-2 py-1 rounded",children:[h.jsx("span",{className:"text-gray-300",children:j.indicator}),j.loading?h.jsx("span",{className:"text-gray-500",children:"..."}):j.error?h.jsx("span",{className:"text-red-400",title:j.error,children:"ERR"}):h.jsx("span",{className:"text-emerald-400 font-mono",children:typeof j.value=="object"?"":typeof j.value=="number"?j.value.toFixed(2):String(j.value)})]},F))})]})]})},Rat=({status:t,onToggle:e,onUpdateSettings:n,onApplyChanges:r})=>{const i=t.settings,[s,o]=T.useState(i),[a,l]=T.useState(!1);T.useEffect(()=>{o(i)},[JSON.stringify(i)]),T.useEffect(()=>{l(JSON.stringify(s)!==JSON.stringify(i))},[s,i]);const c=E=>{o(C=>({...C,...E}))},u=()=>{n(s),r()},[f,m]=T.useState([]),[g,v]=T.useState(!1);T.useEffect(()=>{(async()=>{v(!0);try{const C=await zt.getAllAvailableAssets();m(C.sort())}catch(C){console.error("Failed to fetch assets",C)}finally{v(!1)}})()},[]);const x=E=>{s.tradingPairs.includes(E)||c({tradingPairs:[...s.tradingPairs,E]})},b=E=>{c({tradingPairs:s.tradingPairs.filter(C=>C!==E)})};return h.jsx("div",{className:"h-full flex flex-col gap-4 overflow-y-auto custom-scrollbar",children:h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[h.jsxs("div",{className:"flex flex-col gap-4",children:[h.jsx("div",{className:"glass-panel p-4",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:`h-10 w-10 rounded flex items-center justify-center ${t.isOn?"bg-[#E7FE55]/15 text-[#E7FE55]":"bg-[#1a1b21] text-[#747580]"}`,children:h.jsx($a,{className:"h-5 w-5"})}),h.jsxs("div",{children:[h.jsx("span",{className:"block text-sm font-semibold text-white",children:"Engine Status"}),h.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5",children:[h.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${t.isOn?"bg-[#E7FE55] animate-pulse":"bg-[#747580]"}`}),h.jsx("span",{className:"text-[10px] text-[#747580] font-medium uppercase tracking-wider",children:t.isOn?"Active & Running":"Stopped"})]})]})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("button",{onClick:()=>e(!t.isOn),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none ${t.isOn?"bg-[#E7FE55]":"bg-[#3a3b42]"}`,children:h.jsx("span",{className:`${t.isOn?"translate-x-6":"translate-x-1"} inline-block h-4 w-4 transform rounded-full bg-black transition-transform shadow`})}),h.jsxs("button",{onClick:u,disabled:!a,className:`flex items-center gap-2 px-3 py-1.5 rounded text-[10px] font-semibold uppercase tracking-wider transition-all active:scale-95
                                        ${a?"bg-[#E7FE55] hover:bg-[#d4e94d] text-black":"bg-[#1a1b21] text-[#747580] cursor-not-allowed opacity-50"}`,children:[h.jsx(Pc,{className:"h-3 w-3"})," Apply"]})]})]})}),h.jsxs("div",{className:"glass-panel p-3",children:[h.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[#E7FE55] font-semibold uppercase tracking-[0.1em] mb-2",children:[h.jsx(_1,{className:"h-3 w-3"})," Capital & Risk"]}),h.jsxs("div",{className:"grid grid-cols-5 gap-2 mb-2",children:[h.jsxs("div",{className:"bg-[#0f1015] p-2 rounded border border-[#232328]",children:[h.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1",children:"Type"}),h.jsxs("div",{className:"flex gap-0.5",children:[h.jsx("button",{onClick:()=>c({bankrollType:"MANUAL"}),className:`flex-1 py-1 text-[9px] font-semibold rounded transition-all ${s.bankrollType==="MANUAL"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-white"}`,children:"Fix"}),h.jsx("button",{onClick:()=>c({bankrollType:"ALL_AVAILABLE"}),className:`flex-1 py-1 text-[9px] font-semibold rounded transition-all ${s.bankrollType==="ALL_AVAILABLE"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-white"}`,children:"Max"})]})]}),h.jsxs("div",{className:"bg-[#0f1015] p-2 rounded border border-[#232328]",children:[h.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1",children:"Amount ($)"}),s.bankrollType==="MANUAL"?h.jsx("div",{className:"flex items-center",children:h.jsx("input",{type:"number",value:s.manualBankroll,onChange:E=>c({manualBankroll:parseFloat(E.target.value)}),className:"w-full bg-transparent text-sm font-mono text-white focus:outline-none"})}):h.jsx("span",{className:"text-sm font-mono text-[#E7FE55]",children:"Auto"})]}),h.jsxs("div",{className:"bg-[#0f1015] p-2 rounded border border-[#232328]",children:[h.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1",children:"Leverage"}),h.jsxs("div",{className:"flex items-center",children:[h.jsx("input",{type:"number",value:s.maxLeverage,onChange:E=>c({maxLeverage:parseInt(E.target.value)}),className:"w-full bg-transparent text-sm font-bold font-mono text-white focus:outline-none"}),h.jsx("span",{className:"text-[14px] text-[#747580]",children:"x"})]})]}),h.jsxs("div",{className:"bg-[#0f1015] p-2 rounded border border-[#232328]",children:[h.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1",children:"Pos/Cycle"}),h.jsx("input",{type:"number",value:s.maxOpenPositions,onChange:E=>c({maxOpenPositions:parseInt(E.target.value)}),className:"w-full bg-transparent text-sm font-bold font-mono text-white focus:outline-none"})]}),h.jsxs("div",{className:"bg-[#0f1015] p-2 rounded border border-[#232328]",children:[h.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1",children:"Max Size ($)"}),h.jsx("div",{className:"flex items-center",children:h.jsx("input",{type:"number",value:s.maxPositionSizeUSDC,onChange:E=>c({maxPositionSizeUSDC:parseInt(E.target.value)}),className:"w-full bg-transparent text-sm font-bold font-mono text-white focus:outline-none"})})]})]}),h.jsxs("div",{className:"flex items-center gap-4 pt-2 border-t border-[#232328]",children:[h.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer group",children:[h.jsx($a,{className:"h-3 w-3 text-red-400"}),h.jsx("span",{className:"text-[10px] text-[#747580] group-hover:text-white",children:"Aggressive"}),h.jsx("button",{onClick:()=>c({aggressiveMode:!s.aggressiveMode}),className:`relative inline-flex h-4 w-7 items-center rounded-full transition-colors ${s.aggressiveMode?"bg-red-500":"bg-[#3a3b42]"}`,children:h.jsx("span",{className:`${s.aggressiveMode?"translate-x-4":"translate-x-0.5"} inline-block h-2.5 w-2.5 transform rounded-full bg-white transition-transform`})})]}),h.jsx("div",{className:"w-px h-4 bg-[#232328]"}),h.jsxs("div",{className:"flex items-center gap-1.5",children:[h.jsx(sd,{className:"h-3 w-3 text-red-400"}),h.jsx("span",{className:"text-[10px] text-[#747580]",children:"STOP LOSS"}),s.stopLossEnabled&&h.jsxs(h.Fragment,{children:[h.jsx("input",{type:"number",step:"0.5",value:s.stopLossPercent??"",placeholder:"AI",onChange:E=>c({stopLossPercent:E.target.value?parseFloat(E.target.value):null}),className:"w-10 bg-[#0f1015] border border-[#232328] rounded px-1 py-0.5 text-[10px] text-white font-mono focus:outline-none placeholder:text-[#747580]"}),h.jsx("span",{className:"text-[9px] text-[#747580]",children:"%"})]}),h.jsx("button",{onClick:()=>c({stopLossEnabled:!s.stopLossEnabled}),className:`relative inline-flex h-4 w-7 items-center rounded-full transition-colors ${s.stopLossEnabled?"bg-red-500":"bg-[#3a3b42]"}`,children:h.jsx("span",{className:`${s.stopLossEnabled?"translate-x-4":"translate-x-0.5"} inline-block h-2.5 w-2.5 transform rounded-full bg-white transition-transform`})})]}),h.jsx("div",{className:"w-px h-4 bg-[#232328]"}),h.jsxs("div",{className:"flex items-center gap-1.5",children:[h.jsx(zg,{className:"h-3 w-3 text-[#34d399]"}),h.jsx("span",{className:"text-[10px] text-[#747580]",children:"TAKE PROFIT"}),s.takeProfitEnabled&&h.jsxs(h.Fragment,{children:[h.jsx("input",{type:"number",step:"0.5",value:s.takeProfitPercent??"",placeholder:"AI",onChange:E=>c({takeProfitPercent:E.target.value?parseFloat(E.target.value):null}),className:"w-10 bg-[#0f1015] border border-[#232328] rounded px-1 py-0.5 text-[10px] text-white font-mono focus:outline-none placeholder:text-[#747580]"}),h.jsx("span",{className:"text-[9px] text-[#747580]",children:"%"})]}),h.jsx("button",{onClick:()=>c({takeProfitEnabled:!s.takeProfitEnabled}),className:`relative inline-flex h-4 w-7 items-center rounded-full transition-colors ${s.takeProfitEnabled?"bg-[#34d399]":"bg-[#3a3b42]"}`,children:h.jsx("span",{className:`${s.takeProfitEnabled?"translate-x-4":"translate-x-0.5"} inline-block h-2.5 w-2.5 transform rounded-full bg-white transition-transform`})})]})]})]}),h.jsxs("div",{className:"glass-panel p-4",children:[h.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[#E7FE55] font-semibold uppercase tracking-[0.1em] mb-3",children:[h.jsx(El,{className:"h-3.5 w-3.5"})," Analysis Settings"]}),h.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[h.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[h.jsx("label",{className:"block text-[10px] text-[#747580] font-medium mb-1.5 uppercase tracking-wider",children:"Timeframe"}),h.jsxs("select",{className:"w-full bg-transparent text-sm font-mono text-white focus:outline-none cursor-pointer [&>option]:bg-[#0f1015]",value:s.analysisTimeframe||"60",onChange:E=>c({analysisTimeframe:E.target.value}),children:[h.jsx("option",{value:"1",children:"1m"}),h.jsx("option",{value:"5",children:"5m"}),h.jsx("option",{value:"15",children:"15m"}),h.jsx("option",{value:"60",children:"1H"}),h.jsx("option",{value:"240",children:"4H"}),h.jsx("option",{value:"D",children:"1D"})]})]}),h.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[h.jsx("label",{className:"block text-[10px] text-[#747580] font-medium mb-1.5 uppercase tracking-wider",children:"Indicators History"}),h.jsx("input",{type:"number",min:10,max:100,value:s.historyCandles||100,onChange:E=>c({historyCandles:Math.min(100,Math.max(10,parseInt(E.target.value)||100))}),className:"w-full bg-transparent text-sm font-mono text-white focus:outline-none",title:"10-100"})]}),h.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[h.jsxs("label",{className:"block text-[10px] text-[#747580] font-medium mb-1.5 uppercase tracking-wider",children:[h.jsx(Rs,{className:"inline h-3 w-3 mr-1 opacity-50"}),"Interval"]}),h.jsxs("div",{className:"flex items-baseline gap-1",children:[h.jsx("input",{type:"number",value:s.checkIntervalSeconds,onChange:E=>c({checkIntervalSeconds:Math.max(60,parseInt(E.target.value)||60)}),className:"w-full bg-transparent text-sm font-mono text-white focus:outline-none"}),h.jsx("span",{className:"text-[10px] text-[#747580]",children:"s"})]})]})]})]}),h.jsxs("div",{className:"glass-panel p-4",children:[h.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[#E7FE55] font-semibold uppercase tracking-[0.1em] mb-3",children:[h.jsx(In,{className:"h-3.5 w-3.5"})," Macro Timeframe"]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("div",{className:"flex items-center gap-2",children:h.jsx("span",{className:"text-[11px] text-[#747580]",children:"Multi-timeframe confirmation"})}),h.jsxs("div",{className:"flex items-center gap-3",children:[s.macroTimeframeEnabled&&h.jsxs("select",{className:"bg-[#0f1015] border border-[#232328] rounded py-1.5 px-2 text-[11px] text-white focus:outline-none focus:border-amber-500 [&>option]:bg-[#0f1015]",value:s.macroTimeframe||"240",onChange:E=>c({macroTimeframe:E.target.value}),children:[h.jsx("option",{value:"15",children:"15m"}),h.jsx("option",{value:"60",children:"1H"}),h.jsx("option",{value:"240",children:"4H"}),h.jsx("option",{value:"D",children:"1D"}),h.jsx("option",{value:"W",children:"1W"})]}),h.jsx("button",{onClick:()=>c({macroTimeframeEnabled:!s.macroTimeframeEnabled}),className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors ${s.macroTimeframeEnabled?"bg-amber-500":"bg-[#3a3b42]"}`,children:h.jsx("span",{className:`${s.macroTimeframeEnabled?"translate-x-5":"translate-x-1"} inline-block h-3 w-3 transform rounded-full bg-white transition-transform`})})]})]}),s.macroTimeframeEnabled&&h.jsxs("div",{className:"mt-3",children:[h.jsx("div",{className:"text-[10px] text-[#747580] mb-2 uppercase tracking-wider",children:"Active Indicators:"}),h.jsx("div",{className:"grid grid-cols-4 gap-1.5",children:Object.entries(s.indicatorSettings).filter(([E,C])=>C.enabled).map(([E,C])=>{var O;const k=(O=s.macroEnabledIndicators)==null?void 0:O.includes(E);return h.jsx("button",{onClick:()=>{const U=s.macroEnabledIndicators||[],R=U.includes(E)?U.filter($=>$!==E):[...U,E];c({macroEnabledIndicators:R})},className:`
                                                        px-1.5 py-0.5 rounded text-[10px] font-mono border transition-all truncate
                                                        ${k?"bg-amber-500/20 border-amber-500/50 text-amber-300 hover:bg-amber-500/30":"bg-[#0f1015] border-[#232328] text-[#747580] hover:border-[#747580]"}
                                                    `,title:E.toUpperCase(),children:E.toUpperCase()},E)})}),(!s.macroEnabledIndicators||s.macroEnabledIndicators.length===0)&&h.jsxs("div",{className:"text-[10px] text-red-400 mt-2 flex items-center gap-1",children:[h.jsx(sd,{size:10})," No macro indicators selected"]})]})]}),h.jsxs("div",{className:"glass-panel p-4",children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[#E7FE55] font-semibold uppercase tracking-[0.1em]",children:[h.jsx(zg,{className:"h-3.5 w-3.5"})," Trading Pairs"]}),h.jsx("span",{className:"text-[10px] bg-[#E7FE55]/15 text-[#E7FE55] px-2 py-0.5 rounded border border-[#E7FE55]/30 font-mono",children:s.tradingPairs.length})]}),h.jsxs("select",{disabled:g,onChange:E=>{E.target.value&&x(E.target.value),E.target.value=""},className:"w-full bg-[#0f1015] border border-[#232328] rounded py-2 px-3 text-[11px] text-[#747580] focus:outline-none focus:text-white focus:border-[#E7FE55] transition-colors [&>option]:bg-[#0f1015] cursor-pointer hover:border-[#E7FE55]/30 mb-3",children:[h.jsx("option",{value:"",children:g?"Loading...":"+ Add Pair..."}),!g&&f.filter(E=>!s.tradingPairs.includes(E)).map(E=>h.jsx("option",{value:E,children:E},E))]}),h.jsxs("div",{className:"flex flex-wrap gap-1.5 max-h-[120px] overflow-y-auto custom-scrollbar",children:[s.tradingPairs.map(E=>h.jsxs("span",{className:"inline-flex items-center gap-1 bg-[#1a1b21] hover:bg-[#232328] border border-[#232328] hover:border-[#E7FE55]/50 text-[#a0a1a8] hover:text-white px-2 py-1 rounded text-[10px] font-mono transition-all",children:[E,h.jsx("button",{onClick:()=>b(E),className:"text-[#747580] hover:text-red-400 transition-colors",children:h.jsx(r2,{size:10})})]},E)),s.tradingPairs.length===0&&h.jsxs("div",{className:"w-full py-4 flex flex-col items-center justify-center text-[#747580] opacity-60 border border-dashed border-[#232328] rounded",children:[h.jsx(zg,{className:"h-5 w-5 mb-1"}),h.jsx("span",{className:"text-[10px]",children:"No pairs"})]})]})]})]}),h.jsxs("div",{className:"glass-panel flex flex-col overflow-hidden",children:[h.jsxs("div",{className:"p-3 border-b border-[#232328] flex items-center justify-between shrink-0",children:[h.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[#E7FE55] font-semibold uppercase tracking-[0.1em]",children:[h.jsx(yo,{className:"h-3.5 w-3.5"})," Indicators"]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-[10px] text-[#747580]",children:s.autonomousIndicators?"Auto":"Manual"}),h.jsx("button",{onClick:()=>c({autonomousIndicators:!s.autonomousIndicators}),className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors ${s.autonomousIndicators?"bg-[#34d399]":"bg-[#E7FE55]"}`,title:s.autonomousIndicators?"AI selects indicators":"Manual selection",children:h.jsx("span",{className:`${s.autonomousIndicators?"translate-x-5":"translate-x-1"} inline-block h-3 w-3 transform rounded-full bg-white transition-transform`})})]})]}),h.jsx("div",{className:"p-4",children:h.jsx(Pat,{indicatorSettings:s.indicatorSettings,autonomousMode:s.autonomousIndicators,selectedPreset:s.selectedPreset||"balanced",onUpdateIndicatorSettings:E=>{c({indicatorSettings:{...s.indicatorSettings,...E}})},onToggleAutonomousMode:E=>{c({autonomousIndicators:E})},onSelectPreset:E=>{c({selectedPreset:E})}})})]})]})})},Oat=({status:t,onSaveStrategy:e,onUpdateSettings:n})=>{var b,E;T.useEffect(()=>{console.log("DealerPromptPage Mounted. Status:",t)},[t]);const r=t==null?void 0:t.settings;if(!r)return h.jsx("div",{className:"p-8 text-red-500",children:"Error: Dealer settings not loaded."});const[i,s]=T.useState(r.strategyPrompt||""),[o,a]=T.useState(r.promptMode||"preset"),[l,c]=T.useState(r.selectedPreset||"balanced"),[u,f]=T.useState(!1);T.useEffect(()=>{s(r.strategyPrompt),a(r.promptMode||"preset"),c(r.selectedPreset||"balanced")},[r.strategyPrompt,r.promptMode,r.selectedPreset]);const m=C=>{if(C==="custom")a("custom"),c("custom"),f(!0);else{const k=Q3[C];s(k),a("preset"),c(C),f(k!==r.strategyPrompt)}},g=C=>{const k=C.target.value;s(k);const O=Object.entries(Q3).find(([U,R])=>R===k);O?(a("preset"),c(O[0])):(a("custom"),c("custom")),f(k!==r.strategyPrompt)},v=()=>{e(i),n&&n({promptMode:o,selectedPreset:l,strategyPrompt:i}),f(!1)},x=C=>`
            flex items-center gap-1.5 px-3 py-1.5 rounded text-[10px] font-semibold uppercase tracking-[0.08em] transition-all
            ${l===C&&o==="preset"||o==="custom"&&C==="custom"?"bg-[#E7FE55] text-black":"bg-transparent text-[#747580] hover:text-[#a0a1a8] hover:bg-[#1a1b21]"}
        `;return h.jsxs("div",{className:"h-full flex flex-col gap-4 overflow-hidden",children:[h.jsx("div",{className:"glass-panel p-4 shrink-0",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(vw,{className:"h-4 w-4 text-[#E7FE55]"}),h.jsx("span",{className:"text-sm font-semibold text-white",children:"Strategy Prompt"})]}),h.jsxs("div",{className:`
                            inline-flex items-center gap-1.5 px-2 py-0.5 rounded text-[9px] font-semibold uppercase tracking-wider
                            ${o==="preset"?"bg-[#E7FE55]/10 text-[#E7FE55]":"bg-[#1a1b21] text-[#747580]"}
                        `,children:[h.jsx("span",{className:`h-1 w-1 rounded-full ${o==="preset"?"bg-[#E7FE55]":"bg-[#747580]"}`}),o==="preset"?`${(b=Yu[l])==null?void 0:b.emoji} ${(E=Yu[l])==null?void 0:E.name}`:"Custom"]}),u&&h.jsx("span",{className:"text-[9px] text-amber-500 uppercase tracking-wider font-medium",children:" Unsaved"})]}),h.jsxs("button",{onClick:v,disabled:!u,className:`
                            flex items-center gap-2 px-4 py-1.5 rounded text-[10px] font-semibold uppercase tracking-wider transition-all
                            ${u?"bg-[#E7FE55] hover:bg-[#f0ff7a] text-black":"bg-[#1a1b21] text-[#3a3b42] cursor-not-allowed"}
                        `,children:[h.jsx(o8,{className:"h-3.5 w-3.5"}),"Save"]})]})}),h.jsxs("div",{className:"flex-1 flex gap-4 min-h-0 overflow-hidden",children:[h.jsxs("div",{className:"w-40 shrink-0 flex flex-col gap-2",children:[h.jsxs("div",{className:"flex items-center gap-1.5 px-1 py-2",children:[h.jsx(Nne,{size:12,className:"text-[#E7FE55]"}),h.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] font-semibold",children:"Presets"})]}),h.jsxs("div",{className:"flex flex-col gap-1",children:[Object.entries(Yu).filter(([C])=>C!=="custom").map(([C,k])=>h.jsxs("button",{onClick:()=>m(C),className:x(C),children:[h.jsx("span",{children:k.emoji}),h.jsx("span",{children:k.name})]},C)),h.jsx("div",{className:"h-px bg-[#232328] my-2"}),h.jsxs("button",{onClick:()=>m("custom"),className:x("custom"),children:[h.jsx("span",{children:""}),h.jsx("span",{children:"Custom"})]})]}),h.jsx("div",{className:"mt-auto pt-4 px-1",children:h.jsx("p",{className:"text-[10px] text-[#3a3b42] leading-relaxed",children:"Edit the prompt to switch to custom mode automatically."})})]}),h.jsxs("div",{className:"flex-1 glass-panel relative overflow-hidden flex flex-col",children:[h.jsx("div",{className:"absolute inset-x-0 top-0 h-6 bg-gradient-to-b from-[#1e2028] to-transparent pointer-events-none z-10"}),h.jsx("textarea",{value:i,onChange:g,className:"w-full h-full bg-transparent text-[#a0a1a8] font-mono text-[13px] p-5 resize-none focus:outline-none leading-relaxed custom-scrollbar selection:bg-[#E7FE55]/30",spellCheck:!1,placeholder:`// Define your trading strategy here...
// 
// Example:
// You are a conservative trader focusing on mean reversion.
// 1. Only trade when RSI is above 70 or below 30.
// 2. Prioritize high volume tokens.
// 3. Never risk more than 1% of equity per trade.`}),h.jsx("div",{className:"absolute inset-x-0 bottom-0 h-6 bg-gradient-to-t from-[#1e2028] to-transparent pointer-events-none z-10"}),h.jsxs("div",{className:"absolute bottom-3 right-3 flex items-center gap-2 opacity-50 hover:opacity-100 transition-opacity",children:[h.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-[#E7FE55]"}),h.jsx("span",{className:"text-[9px] text-[#747580] font-mono uppercase tracking-wider",children:"Live Context"})]})]})]})]})};function qQ(t){const e=Mat(t),n=T.forwardRef((r,i)=>{const{children:s,...o}=r,a=T.Children.toArray(s),l=a.find(Lat);if(l){const c=l.props.children,u=a.map(f=>f===l?T.Children.count(c)>1?T.Children.only(null):T.isValidElement(c)?c.props.children:null:f);return h.jsx(e,{...o,ref:i,children:T.isValidElement(c)?T.cloneElement(c,void 0,u):null})}return h.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}function Mat(t){const e=T.forwardRef((n,r)=>{const{children:i,...s}=n;if(T.isValidElement(i)){const o=Bat(i),a=jat(s,i.props);return i.type!==T.Fragment&&(a.ref=r?Fx(r,o):o),T.cloneElement(i,a)}return T.Children.count(i)>1?T.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var Dat=Symbol("radix.slottable");function Lat(t){return T.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Dat}function jat(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const l=s(...a);return i(...a),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function Bat(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Dhe(t){const e=t+"CollectionProvider",[n,r]=Mm(e),[i,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=x=>{const{scope:b,children:E}=x,C=pl.useRef(null),k=pl.useRef(new Map).current;return h.jsx(i,{scope:b,itemMap:k,collectionRef:C,children:E})};o.displayName=e;const a=t+"CollectionSlot",l=qQ(a),c=pl.forwardRef((x,b)=>{const{scope:E,children:C}=x,k=s(a,E),O=Nr(b,k.collectionRef);return h.jsx(l,{ref:O,children:C})});c.displayName=a;const u=t+"CollectionItemSlot",f="data-radix-collection-item",m=qQ(u),g=pl.forwardRef((x,b)=>{const{scope:E,children:C,...k}=x,O=pl.useRef(null),U=Nr(b,O),R=s(u,E);return pl.useEffect(()=>(R.itemMap.set(O,{ref:O,...k}),()=>void R.itemMap.delete(O))),h.jsx(m,{[f]:"",ref:U,children:C})});g.displayName=u;function v(x){const b=s(t+"CollectionConsumer",x);return pl.useCallback(()=>{const C=b.collectionRef.current;if(!C)return[];const k=Array.from(C.querySelectorAll(`[${f}]`));return Array.from(b.itemMap.values()).sort((R,$)=>k.indexOf(R.ref.current)-k.indexOf($.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:o,Slot:c,ItemSlot:g},v,r]}var Uat=T.createContext(void 0);function RB(t){const e=T.useContext(Uat);return t||e||"ltr"}var ZO="rovingFocusGroup.onEntryFocus",Fat={bubbles:!1,cancelable:!0},hE="RovingFocusGroup",[WD,Lhe,$at]=Dhe(hE),[zat,jhe]=Mm(hE,[$at]),[Hat,Vat]=zat(hE),Bhe=T.forwardRef((t,e)=>h.jsx(WD.Provider,{scope:t.__scopeRovingFocusGroup,children:h.jsx(WD.Slot,{scope:t.__scopeRovingFocusGroup,children:h.jsx(qat,{...t,ref:e})})}));Bhe.displayName=hE;var qat=T.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...f}=t,m=T.useRef(null),g=Nr(e,m),v=RB(s),[x,b]=Mw({prop:o,defaultProp:a??null,onChange:l,caller:hE}),[E,C]=T.useState(!1),k=sh(c),O=Lhe(n),U=T.useRef(!1),[R,$]=T.useState(0);return T.useEffect(()=>{const V=m.current;if(V)return V.addEventListener(ZO,k),()=>V.removeEventListener(ZO,k)},[k]),h.jsx(Hat,{scope:n,orientation:r,dir:v,loop:i,currentTabStopId:x,onItemFocus:T.useCallback(V=>b(V),[b]),onItemShiftTab:T.useCallback(()=>C(!0),[]),onFocusableItemAdd:T.useCallback(()=>$(V=>V+1),[]),onFocusableItemRemove:T.useCallback(()=>$(V=>V-1),[]),children:h.jsx(Mn.div,{tabIndex:E||R===0?-1:0,"data-orientation":r,...f,ref:g,style:{outline:"none",...t.style},onMouseDown:pn(t.onMouseDown,()=>{U.current=!0}),onFocus:pn(t.onFocus,V=>{const j=!U.current;if(V.target===V.currentTarget&&j&&!E){const F=new CustomEvent(ZO,Fat);if(V.currentTarget.dispatchEvent(F),!F.defaultPrevented){const W=O().filter(D=>D.focusable),H=W.find(D=>D.active),B=W.find(D=>D.id===x),I=[H,B,...W].filter(Boolean).map(D=>D.ref.current);$he(I,u)}}U.current=!1}),onBlur:pn(t.onBlur,()=>C(!1))})})}),Uhe="RovingFocusGroupItem",Fhe=T.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:s,children:o,...a}=t,l=Zf(),c=s||l,u=Vat(Uhe,n),f=u.currentTabStopId===c,m=Lhe(n),{onFocusableItemAdd:g,onFocusableItemRemove:v,currentTabStopId:x}=u;return T.useEffect(()=>{if(r)return g(),()=>v()},[r,g,v]),h.jsx(WD.ItemSlot,{scope:n,id:c,focusable:r,active:i,children:h.jsx(Mn.span,{tabIndex:f?0:-1,"data-orientation":u.orientation,...a,ref:e,onMouseDown:pn(t.onMouseDown,b=>{r?u.onItemFocus(c):b.preventDefault()}),onFocus:pn(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:pn(t.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){u.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const E=Wat(b,u.orientation,u.dir);if(E!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let k=m().filter(O=>O.focusable).map(O=>O.ref.current);if(E==="last")k.reverse();else if(E==="prev"||E==="next"){E==="prev"&&k.reverse();const O=k.indexOf(b.currentTarget);k=u.loop?Yat(k,O+1):k.slice(O+1)}setTimeout(()=>$he(k))}}),children:typeof o=="function"?o({isCurrentTabStop:f,hasTabStop:x!=null}):o})})});Fhe.displayName=Uhe;var Gat={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Kat(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Wat(t,e,n){const r=Kat(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Gat[r]}function $he(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function Yat(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var Jat=Bhe,Xat=Fhe,FN="Tabs",[Qat]=Mm(FN,[jhe]),zhe=jhe(),[Zat,OB]=Qat(FN),Hhe=T.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=t,u=RB(a),[f,m]=Mw({prop:r,onChange:i,defaultProp:s??"",caller:FN});return h.jsx(Zat,{scope:n,baseId:Zf(),value:f,onValueChange:m,orientation:o,dir:u,activationMode:l,children:h.jsx(Mn.div,{dir:u,"data-orientation":o,...c,ref:e})})});Hhe.displayName=FN;var Vhe="TabsList",qhe=T.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...i}=t,s=OB(Vhe,n),o=zhe(n);return h.jsx(Jat,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:r,children:h.jsx(Mn.div,{role:"tablist","aria-orientation":s.orientation,...i,ref:e})})});qhe.displayName=Vhe;var Ghe="TabsTrigger",Khe=T.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...s}=t,o=OB(Ghe,n),a=zhe(n),l=Jhe(o.baseId,r),c=Xhe(o.baseId,r),u=r===o.value;return h.jsx(Xat,{asChild:!0,...a,focusable:!i,active:u,children:h.jsx(Mn.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l,...s,ref:e,onMouseDown:pn(t.onMouseDown,f=>{!i&&f.button===0&&f.ctrlKey===!1?o.onValueChange(r):f.preventDefault()}),onKeyDown:pn(t.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(r)}),onFocus:pn(t.onFocus,()=>{const f=o.activationMode!=="manual";!u&&!i&&f&&o.onValueChange(r)})})})});Khe.displayName=Ghe;var Whe="TabsContent",Yhe=T.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:i,children:s,...o}=t,a=OB(Whe,n),l=Jhe(a.baseId,r),c=Xhe(a.baseId,r),u=r===a.value,f=T.useRef(u);return T.useEffect(()=>{const m=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(m)},[]),h.jsx(Lm,{present:i||u,children:({present:m})=>h.jsx(Mn.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!m,id:c,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:f.current?"0s":void 0},children:m&&s})})});Yhe.displayName=Whe;function Jhe(t,e){return`${t}-trigger-${e}`}function Xhe(t,e){return`${t}-content-${e}`}var elt=Hhe,Qhe=qhe,Zhe=Khe,epe=Yhe;const tpe=elt,tlt=T.forwardRef(({className:t,...e},n)=>h.jsx(Qhe,{ref:n,className:jt("inline-flex h-9 items-center justify-center rounded bg-[#1a1b21] p-1 text-[#747580] border border-[#232328]",t),...e}));tlt.displayName=Qhe.displayName;const nlt=T.forwardRef(({className:t,...e},n)=>h.jsx(Zhe,{ref:n,className:jt("inline-flex items-center justify-center whitespace-nowrap rounded px-4 py-1.5 text-[11px] font-medium uppercase tracking-[0.05em] ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-[#E7FE55] data-[state=active]:text-black data-[state=active]:shadow-sm hover:text-[#a0a1a8]",t),...e}));nlt.displayName=Zhe.displayName;const Ku=T.forwardRef(({className:t,...e},n)=>h.jsx(epe,{ref:n,className:jt("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Ku.displayName=epe.displayName;const rlt=({vault:t,password:e,activeTab:n,setActiveTab:r})=>{const i=!!t.hlPublicKey,s=n===Ce.VAULT_DEALER?Ce.DEALER_DASHBOARD:n,{isOn:o,isAnalyzing:a,statusMessage:l,statusDetail:c,currentTask:u,currentSignal:f,trendAssessment:m,pendingExecution:g,currentExposure:v,activePositions:x,portfolioValue:b,lastSyncTimestamp:E,settings:C,logs:k,operationHistory:O,toggleDealer:U,updateSettings:R,applyChanges:$,saveStrategy:V,clearLogs:j}=Eat(t,e),F={isOn:o,isAnalyzing:a,statusMessage:l,statusDetail:c,currentTask:u,currentSignal:f,trendAssessment:m,pendingExecution:g,currentExposure:v,activePositions:x,portfolioValue:b,lastSyncTimestamp:E,settings:C,logs:k,operationHistory:O},W=()=>{switch(s){case Ce.DEALER_DASHBOARD:return"dashboard";case Ce.DEALER_THINKING:return"thinking";case Ce.DEALER_CONFIG:return"config";case Ce.DEALER_PROMPT:return"prompt";default:return"dashboard"}},H=B=>{switch(B){case"dashboard":r(Ce.DEALER_DASHBOARD);break;case"thinking":r(Ce.DEALER_THINKING);break;case"config":r(Ce.DEALER_CONFIG);break;case"prompt":r(Ce.DEALER_PROMPT);break}};return i?h.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[!t.isUnlocked&&h.jsx(Ht.div,{className:"mb-3 flex justify-end shrink-0 px-4",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},children:h.jsx(Ml,{variant:"destructive",className:"animate-pulse",children:"VAULT LOCKED"})}),h.jsx(tpe,{value:W(),onValueChange:H,className:"flex-1 flex flex-col min-h-0",children:h.jsxs("div",{className:"flex-1 min-h-0 relative",children:[h.jsx(Ku,{value:"dashboard",className:"h-full mt-0 absolute inset-0",children:h.jsx(Tat,{status:F,onToggle:U,vaultAddress:t.hlPublicKey,setActiveTab:r})}),h.jsx(Ku,{value:"thinking",className:"h-full mt-0 absolute inset-0",children:h.jsx(Nat,{status:F,onClearLogs:j})}),h.jsx(Ku,{value:"config",className:"h-full mt-0 absolute inset-0 overflow-y-auto",children:h.jsx(Rat,{status:F,onToggle:U,onUpdateSettings:R,onApplyChanges:$,onSaveStrategy:V})}),h.jsx(Ku,{value:"prompt",className:"h-full mt-0 absolute inset-0",children:h.jsx(Oat,{status:F,onSaveStrategy:V,onUpdateSettings:R})})]})})]}):h.jsx(Ht.div,{className:"flex flex-col h-[calc(100vh-8rem)] items-center justify-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:h.jsxs("div",{className:"max-w-md w-full mx-auto space-y-6 p-8 text-center",children:[h.jsx("div",{className:"w-16 h-16 bg-[#1a1b21] rounded-full flex items-center justify-center mx-auto mb-4 border border-[#232328]",children:h.jsx(In,{size:32,className:"text-[#34d399]"})}),h.jsx("h2",{className:"text-xl font-semibold text-white tracking-tight",children:"Create a Vault First"}),h.jsxs("p",{className:"text-[#747580] text-sm",children:["You need to create a Hyperliquid wallet before using Hyperliquid Dealer. Go to the ",h.jsx("span",{className:"text-[#34d399]",children:"Vault"})," page to set up your wallet."]}),h.jsx(Fi,{onClick:()=>r(Ce.VAULT),variant:"success",size:"lg",className:"mt-4",children:"Go to Vault"})]})})},ilt=({vault:t,connectHLOwnerWallet:e,refreshHLBalance:n,activityLog:r=[]})=>{var B;const[i,s]=T.useState([]),[o,a]=T.useState([]),[l,c]=T.useState(new Map),[u,f]=T.useState([]),[m,g]=T.useState(""),[v,x]=T.useState(!1),[b,E]=T.useState(Date.now()),[C,k]=T.useState(!0),[O,U]=T.useState(null),R=async A=>{try{await navigator.clipboard.writeText(A),U(A),setTimeout(()=>U(null),2e3)}catch(I){console.error("Failed to copy:",I)}},$=T.useCallback(async()=>{if(t.hlPublicKey){x(!0);try{await n(t.hlPublicKey);const I=(await Vn.getUserState(t.hlPublicKey)).assetPositions.filter(_=>parseFloat(_.position.szi)!==0);s(I);const D=await Vn.getOpenOrders(t.hlPublicKey);a(D);const z=await Vn.getAvailableAssets();f(z);const G=new Set([...I.map(_=>_.position.coin)]);["BTC","ETH","SOL","BNB","DOGE","AVAX","MATIC","ARB","OP","APT"].forEach(_=>G.add(_));const K=[...G].slice(0,15).map(async _=>{var Y,X,re,oe;try{const Ee=await Vn.getMarketData(_),ce=parseFloat(((X=(Y=Ee.levels[0])==null?void 0:Y[0])==null?void 0:X.px)||0),me=parseFloat(((oe=(re=Ee.levels[1])==null?void 0:re[0])==null?void 0:oe.px)||0),ue=me-ce,le=ce>0?ue/ce*100:0;return{coin:_,bid:ce,ask:me,spread:ue,spreadPercent:le,lastUpdate:Date.now()}}catch(Ee){return console.error(`Failed to fetch market data for ${_}`,Ee),null}}),q=await Promise.all(K),M=new Map;q.forEach(_=>{_&&M.set(_.coin,_)}),c(M),E(Date.now())}catch(A){console.error("Failed to fetch HL data",A)}finally{x(!1)}}},[t.hlPublicKey,n]);T.useEffect(()=>{t.hlPublicKey&&$()},[t.hlPublicKey]),T.useEffect(()=>{if(!C||!t.hlPublicKey)return;const A=setInterval(()=>{$()},6e4);return()=>clearInterval(A)},[C,t.hlPublicKey,$]);const V=i.reduce((A,I)=>A+parseFloat(I.position.unrealizedPnl||0),0),j=i.reduce((A,I)=>{const D=Math.abs(parseFloat(I.position.szi)),z=parseFloat(I.position.entryPx);return A+D*z},0),F=u.filter(A=>A.toLowerCase().includes(m.toLowerCase())),W=new Set(i.map(A=>A.position.coin)),H=r.filter(A=>A.network==="hyperliquid"||A.type==="HL Order"||A.type.startsWith("HL"));return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 2xl:grid-cols-4 gap-4 lg:gap-6",children:[h.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col justify-center group",children:[h.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 group-hover:opacity-10 transition-opacity",children:h.jsx(tx,{size:48,className:"text-white"})}),h.jsx("div",{className:"flex items-center justify-between mb-2",children:h.jsx("h3",{className:"text-[10px] uppercase tracking-[0.1em] text-[#747580] font-semibold",children:"Vault Balance"})}),h.jsxs("div",{className:"text-2xl lg:text-3xl font-semibold text-white tracking-tight mb-1",children:["$",((B=t.hlBalance)==null?void 0:B.toFixed(2))||"0.00"]}),h.jsx("div",{className:"text-[11px] text-[#747580] mb-3",children:"USDC"}),h.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-[#232328]",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("input",{type:"checkbox",id:"autoRefresh",checked:C,onChange:A=>k(A.target.checked),className:"w-3.5 h-3.5 rounded border-[#232328] bg-[#1a1b21] key-emerald-600 focus:ring-emerald-500"}),h.jsx("label",{htmlFor:"autoRefresh",className:"text-[10px] text-[#747580] cursor-pointer",children:"Auto-refresh"})]}),h.jsx("button",{onClick:$,disabled:v,className:"p-1.5 hover:bg-[#1a1b21] rounded transition-colors text-[#E7FE55] hover:text-[#f0ff85] disabled:opacity-50",title:"Refresh now",children:h.jsx(Pc,{size:14,className:v?"animate-spin":""})})]})]}),h.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col justify-center",children:[h.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5",children:h.jsx(In,{size:48,className:"text-white"})}),h.jsx("div",{className:"flex items-center justify-between mb-2",children:h.jsx("h3",{className:"text-[10px] uppercase tracking-[0.1em] text-[#747580] font-semibold",children:"Position Value"})}),h.jsxs("div",{className:"text-2xl lg:text-3xl font-semibold text-white tracking-tight mb-1",children:["$",j.toFixed(2)]}),h.jsxs("div",{className:"flex items-center justify-between mt-1",children:[h.jsxs("div",{className:"text-[11px] text-[#747580]",children:[i.length," open position",i.length!==1?"s":""]}),h.jsxs("a",{href:"https://app.hyperliquid-testnet.xyz",target:"_blank",rel:"noopener noreferrer",className:"text-[10px] text-[#E7FE55] hover:text-[#f0ff85] flex items-center gap-1",title:"Hyperliquid Platform Official Website",children:[h.jsx(In,{size:10})," Hyperliquid"]})]})]}),h.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col justify-center",children:[h.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5",children:V>=0?h.jsx(In,{size:48,className:"text-white"}):h.jsx(n2,{size:48,className:"text-white"})}),h.jsx("div",{className:"flex items-center justify-between mb-2",children:h.jsx("h3",{className:"text-[10px] uppercase tracking-[0.1em] text-[#747580] font-semibold",children:"Unrealized PnL"})}),h.jsxs("div",{className:`text-2xl lg:text-3xl font-semibold tracking-tight mb-1 ${V>=0?"text-[#34d399]":"text-red-400"}`,children:[V>=0?"+":"",V.toFixed(2)]}),h.jsx("div",{className:"text-[11px] text-[#747580] mt-1",children:"USDC"})]}),h.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col justify-center",children:[h.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5",children:h.jsx(tx,{size:48,className:"text-white"})}),h.jsx("div",{className:"flex items-center justify-between mb-2",children:h.jsx("h3",{className:"text-[10px] uppercase tracking-[0.1em] text-[#747580] font-semibold",children:"Vault Address"})}),t.hlPublicKey?h.jsxs("div",{onClick:()=>R(t.hlPublicKey),className:"flex items-center gap-2 cursor-pointer group",children:[h.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#E7FE55]"}),h.jsxs("span",{className:"text-sm font-mono text-white truncate group-hover:text-[#E7FE55] transition-colors",children:[t.hlPublicKey.slice(0,6),"...",t.hlPublicKey.slice(-4)]}),O===t.hlPublicKey?h.jsx("span",{className:"text-[10px] text-[#E7FE55] ml-auto",children:"Copied!"}):h.jsx("span",{className:"text-[10px] text-[#747580] ml-auto opacity-0 group-hover:opacity-100 transition-opacity",children:"Click to copy"})]}):h.jsx("div",{className:"text-sm font-mono text-white mb-1 truncate",children:"Not Available"}),h.jsx("div",{className:"text-[11px] text-[#747580] mt-1",children:b&&`Updated ${new Date(b).toLocaleTimeString()}`})]})]}),h.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[h.jsx(yo,{size:18,className:"text-[#E7FE55]"}),"Open Positions"]}),h.jsxs("span",{className:"text-[10px] bg-[#1a1b21] text-[#747580] px-2 py-1 rounded uppercase tracking-wider",children:[i.length," active"]})]}),h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full text-left text-sm border-collapse",children:[h.jsx("thead",{children:h.jsxs("tr",{className:"text-[10px] uppercase tracking-[0.05em] text-[#747580] border-b border-[#232328]",children:[h.jsx("th",{className:"py-3 pl-4 font-medium",children:"Symbol"}),h.jsx("th",{className:"py-3 font-medium",children:"Side"}),h.jsx("th",{className:"py-3 font-medium",children:"Size"}),h.jsx("th",{className:"py-3 font-medium",children:"Entry Price"}),h.jsx("th",{className:"py-3 font-medium",children:"Current Price"}),h.jsx("th",{className:"py-3 font-medium",children:"Leverage"}),h.jsx("th",{className:"py-3 font-medium",children:"Margin Type"}),h.jsx("th",{className:"py-3 font-medium",children:"Liq. Price"}),h.jsx("th",{className:"py-3 font-medium",children:"Unrealized PnL"}),h.jsx("th",{className:"py-3 pr-4 font-medium",children:"ROE"})]})}),h.jsx("tbody",{className:"text-sm",children:i.length===0?h.jsx("tr",{children:h.jsx("td",{colSpan:10,className:"p-8 text-center text-slate-500",children:"No open positions"})}):i.map((A,I)=>{var re,oe;const D=parseFloat(A.position.szi)>0,z=Math.abs(parseFloat(A.position.szi)),G=parseFloat(A.position.entryPx),te=parseFloat(A.position.unrealizedPnl),K=parseFloat(A.position.returnOnEquity),q=((re=A.position.leverage)==null?void 0:re.value)||1,M=((oe=A.position.leverage)==null?void 0:oe.type)||"cross",_=A.position.liquidationPx,Y=l.get(A.position.coin),X=D?Y==null?void 0:Y.bid:Y==null?void 0:Y.ask;return h.jsxs("tr",{className:"border-b border-[#232328]/50 last:border-0 hover:bg-[#1a1b21] transition-colors",children:[h.jsx("td",{className:"py-3 pl-4 font-medium text-white",children:A.position.coin}),h.jsx("td",{className:`py-3 font-semibold ${D?"text-[#34d399]":"text-red-400"}`,children:D?"LONG":"SHORT"}),h.jsx("td",{className:"py-3 text-[#a0a1a8]",children:z.toFixed(4)}),h.jsxs("td",{className:"py-3 text-[#a0a1a8]",children:["$",G]}),h.jsx("td",{className:"py-3 text-[#a0a1a8]",children:X?`$${X.toFixed(2)}`:"-"}),h.jsxs("td",{className:"py-3 text-[#E7FE55] font-medium",children:[q,"x"]}),h.jsx("td",{className:"py-3",children:h.jsx("span",{className:`px-2 py-1 rounded text-[10px] font-medium uppercase tracking-wider ${M==="isolated"?"bg-purple-500/15 text-purple-400":"bg-blue-500/15 text-blue-400"}`,children:M})}),h.jsx("td",{className:"py-3 text-red-400/80",children:_?`$${parseFloat(_).toFixed(2)}`:"-"}),h.jsxs("td",{className:`py-3 font-semibold ${te>=0?"text-[#34d399]":"text-red-400"}`,children:[te>=0?"+":"",te.toFixed(2)]}),h.jsxs("td",{className:`py-3 pr-4 font-medium ${K>=0?"text-[#34d399]":"text-red-400"}`,children:[K>=0?"+":"",(K*100).toFixed(2),"%"]})]},I)})})]})})]}),h.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[h.jsx(_l,{size:18,className:"text-yellow-500"}),"Open Orders"]}),h.jsxs("span",{className:"text-[10px] bg-[#1a1b21] text-[#747580] px-2 py-1 rounded uppercase tracking-wider",children:[o.length," pending"]})]}),h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full text-left text-sm border-collapse",children:[h.jsx("thead",{children:h.jsxs("tr",{className:"text-[10px] uppercase tracking-[0.05em] text-[#747580] border-b border-[#232328]",children:[h.jsx("th",{className:"py-3 pl-4 font-medium",children:"Symbol"}),h.jsx("th",{className:"py-3 font-medium",children:"Side"}),h.jsx("th",{className:"py-3 font-medium",children:"Size"}),h.jsx("th",{className:"py-3 font-medium",children:"Price"}),h.jsx("th",{className:"py-3 font-medium",children:"Type"})]})}),h.jsx("tbody",{className:"text-sm",children:o.length===0?h.jsx("tr",{children:h.jsx("td",{colSpan:5,className:"p-8 text-center text-slate-500",children:"No open orders"})}):o.map((A,I)=>h.jsxs("tr",{className:"border-b border-[#232328]/50 last:border-0 hover:bg-[#1a1b21]",children:[h.jsx("td",{className:"py-3 pl-4 font-medium text-white",children:A.coin}),h.jsx("td",{className:`py-3 font-medium ${A.side==="B"?"text-[#34d399]":"text-red-400"}`,children:A.side==="B"?"BUY":"SELL"}),h.jsx("td",{className:"py-3 text-[#a0a1a8]",children:A.sz}),h.jsxs("td",{className:"py-3 text-[#a0a1a8]",children:["$",A.limitPx]}),h.jsx("td",{className:"py-3 text-[#a0a1a8]",children:A.orderType})]},I))})]})})]}),h.jsxs("div",{className:"grid grid-cols-1 2xl:grid-cols-2 gap-6",children:[h.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col",children:[h.jsx("div",{className:"flex items-center justify-between mb-4 border-b border-[#232328] pb-2",children:h.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[h.jsx(yo,{size:18,className:"text-[#E7FE55]"}),"Recent Activity"]})}),h.jsx("div",{className:"flex-1",children:H.length===0?h.jsx("div",{className:"text-center py-8 text-[#747580] text-sm",children:"No recent transactions"}):h.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto pr-2 custom-scrollbar",children:H.slice(0,15).map((A,I)=>h.jsxs("div",{className:"flex items-start gap-3 pb-3 border-b border-[#232328]/50 last:border-0 border-dashed",children:[h.jsx("div",{className:"mt-1 p-1.5 rounded-full bg-[#E7FE55]/15 text-[#E7FE55]",children:h.jsx(yo,{size:12})}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("div",{className:"flex justify-between items-start gap-2",children:[h.jsx("span",{className:"text-xs font-medium text-[#E7FE55]",children:A.type}),h.jsx("span",{className:"text-[10px] text-[#747580] flex-shrink-0",children:new Date(A.timestamp).toLocaleTimeString()})]}),h.jsx("div",{className:"text-[11px] text-[#a0a1a8] truncate mt-0.5",children:A.desc}),A.signature&&A.signature!=="pending"&&h.jsxs("div",{className:"text-[9px] text-[#747580] font-mono mt-1 hover:text-[#E7FE55] cursor-pointer transition-colors",children:[A.signature.slice(0,6),"..."]})]})]},I))})})]}),h.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col",children:[h.jsxs("div",{className:"flex justify-between items-start mb-4 border-b border-[#232328] pb-2",children:[h.jsxs("div",{className:"flex flex-col",children:[h.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[h.jsx(In,{size:18,className:"text-[#E7FE55]"}),"Market Data"]}),h.jsxs("span",{className:"text-[10px] text-[#747580] mt-1",children:[F.length," assets"]})]}),h.jsxs("div",{className:"relative",children:[h.jsx(Cne,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-[#747580]",size:14}),h.jsx("input",{type:"text",placeholder:"Search assets...",value:m,onChange:A=>g(A.target.value),className:"w-48 pl-9 pr-3 py-1.5 bg-[#14151a] border border-[#232328] text-white rounded text-xs focus:outline-none focus:border-[#E7FE55]"})]})]}),h.jsx("div",{className:"overflow-x-auto max-h-96 custom-scrollbar",children:h.jsxs("table",{className:"w-full text-left text-sm border-collapse",children:[h.jsx("thead",{className:"sticky top-0 bg-[#0c0d10] z-10",children:h.jsxs("tr",{className:"text-[10px] uppercase tracking-[0.05em] text-[#747580] border-b border-[#232328]",children:[h.jsx("th",{className:"py-2 pl-2 font-medium",children:"Asset"}),h.jsx("th",{className:"py-2 font-medium",children:"Bid"}),h.jsx("th",{className:"py-2 font-medium",children:"Ask"}),h.jsx("th",{className:"py-2 font-medium",children:"Spread %"})]})}),h.jsx("tbody",{className:"text-sm",children:F.length===0?h.jsx("tr",{children:h.jsx("td",{colSpan:4,className:"py-8 text-center text-[#747580]",children:"No assets found"})}):F.slice(0,20).map(A=>{const I=l.get(A),D=W.has(A);return h.jsxs("tr",{className:`border-b border-[#232328]/50 last:border-0 hover:bg-[#1a1b21] transition-colors ${D?"bg-[#E7FE55]/5":""}`,children:[h.jsxs("td",{className:"py-2 pl-2 font-medium text-white flex items-center gap-2",children:[A,D&&h.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-[#E7FE55]",title:"Open Position"})]}),h.jsx("td",{className:"py-2 text-[#34d399] font-medium",children:I?`$${I.bid.toFixed(2)}`:"-"}),h.jsx("td",{className:"py-2 text-red-400 font-medium",children:I?`$${I.ask.toFixed(2)}`:"-"}),h.jsx("td",{className:"py-2 text-[#a0a1a8]",children:I?`${I.spreadPercent.toFixed(3)}%`:"-"})]},A)})})]})})]})]})]})};var e3="focusScope.autoFocusOnMount",t3="focusScope.autoFocusOnUnmount",GQ={bubbles:!1,cancelable:!0},slt="FocusScope",MB=T.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=t,[a,l]=T.useState(null),c=sh(i),u=sh(s),f=T.useRef(null),m=Nr(e,x=>l(x)),g=T.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;T.useEffect(()=>{if(r){let x=function(k){if(g.paused||!a)return;const O=k.target;a.contains(O)?f.current=O:Sf(f.current,{select:!0})},b=function(k){if(g.paused||!a)return;const O=k.relatedTarget;O!==null&&(a.contains(O)||Sf(f.current,{select:!0}))},E=function(k){if(document.activeElement===document.body)for(const U of k)U.removedNodes.length>0&&Sf(a)};document.addEventListener("focusin",x),document.addEventListener("focusout",b);const C=new MutationObserver(E);return a&&C.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",b),C.disconnect()}}},[r,a,g.paused]),T.useEffect(()=>{if(a){WQ.add(g);const x=document.activeElement;if(!a.contains(x)){const E=new CustomEvent(e3,GQ);a.addEventListener(e3,c),a.dispatchEvent(E),E.defaultPrevented||(olt(dlt(npe(a)),{select:!0}),document.activeElement===x&&Sf(a))}return()=>{a.removeEventListener(e3,c),setTimeout(()=>{const E=new CustomEvent(t3,GQ);a.addEventListener(t3,u),a.dispatchEvent(E),E.defaultPrevented||Sf(x??document.body,{select:!0}),a.removeEventListener(t3,u),WQ.remove(g)},0)}}},[a,c,u,g]);const v=T.useCallback(x=>{if(!n&&!r||g.paused)return;const b=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,E=document.activeElement;if(b&&E){const C=x.currentTarget,[k,O]=alt(C);k&&O?!x.shiftKey&&E===O?(x.preventDefault(),n&&Sf(k,{select:!0})):x.shiftKey&&E===k&&(x.preventDefault(),n&&Sf(O,{select:!0})):E===C&&x.preventDefault()}},[n,r,g.paused]);return h.jsx(Mn.div,{tabIndex:-1,...o,ref:m,onKeyDown:v})});MB.displayName=slt;function olt(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Sf(r,{select:e}),document.activeElement!==n)return}function alt(t){const e=npe(t),n=KQ(e,t),r=KQ(e.reverse(),t);return[n,r]}function npe(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function KQ(t,e){for(const n of t)if(!llt(n,{upTo:e}))return n}function llt(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function clt(t){return t instanceof HTMLInputElement&&"select"in t}function Sf(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&clt(t)&&e&&t.select()}}var WQ=ult();function ult(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=YQ(t,e),t.unshift(e)},remove(e){var n;t=YQ(t,e),(n=t[0])==null||n.resume()}}}function YQ(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function dlt(t){return t.filter(e=>e.tagName!=="A")}var n3=0;function rpe(){T.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??JQ()),document.body.insertAdjacentElement("beforeend",t[1]??JQ()),n3++,()=>{n3===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),n3--}},[])}function JQ(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var kT="right-scroll-bar-position",CT="width-before-scroll-bar",flt="with-scroll-bars-hidden",hlt="--removed-body-scroll-bar-size";function r3(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function plt(t,e){var n=T.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var mlt=typeof window<"u"?T.useLayoutEffect:T.useEffect,XQ=new WeakMap;function glt(t,e){var n=plt(null,function(r){return t.forEach(function(i){return r3(i,r)})});return mlt(function(){var r=XQ.get(n);if(r){var i=new Set(r),s=new Set(t),o=n.current;i.forEach(function(a){s.has(a)||r3(a,null)}),s.forEach(function(a){i.has(a)||r3(a,o)})}XQ.set(n,t)},[t]),n}function ylt(t){return t}function xlt(t,e){e===void 0&&(e=ylt);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var u=o;o=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),n}}}};return i}function vlt(t){t===void 0&&(t={});var e=xlt(null);return e.options=hc({async:!0,ssr:!1},t),e}var ipe=function(t){var e=t.sideCar,n=_x(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return T.createElement(r,hc({},n))};ipe.isSideCarExport=!0;function blt(t,e){return t.useMedium(e),ipe}var spe=vlt(),i3=function(){},$N=T.forwardRef(function(t,e){var n=T.useRef(null),r=T.useState({onScrollCapture:i3,onWheelCapture:i3,onTouchMoveCapture:i3}),i=r[0],s=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,f=t.shards,m=t.sideCar,g=t.noRelative,v=t.noIsolation,x=t.inert,b=t.allowPinchZoom,E=t.as,C=E===void 0?"div":E,k=t.gapMode,O=_x(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),U=m,R=glt([n,e]),$=hc(hc({},O),i);return T.createElement(T.Fragment,null,u&&T.createElement(U,{sideCar:spe,removeScrollBar:c,shards:f,noRelative:g,noIsolation:v,inert:x,setCallbacks:s,allowPinchZoom:!!b,lockRef:n,gapMode:k}),o?T.cloneElement(T.Children.only(a),hc(hc({},$),{ref:R})):T.createElement(C,hc({},$,{className:l,ref:R}),a))});$N.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};$N.classNames={fullWidth:CT,zeroRight:kT};var wlt=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Elt(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=wlt();return e&&t.setAttribute("nonce",e),t}function Slt(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function Alt(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var Tlt=function(){var t=0,e=null;return{add:function(n){t==0&&(e=Elt())&&(Slt(e,n),Alt(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},klt=function(){var t=Tlt();return function(e,n){T.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},ope=function(){var t=klt(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},Clt={left:0,top:0,right:0,gap:0},s3=function(t){return parseInt(t||"",10)||0},Nlt=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[s3(n),s3(r),s3(i)]},_lt=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return Clt;var e=Nlt(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},Ilt=ope(),iy="data-scroll-locked",Plt=function(t,e,n,r){var i=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(flt,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(iy,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(kT,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(CT,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(kT," .").concat(kT,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(CT," .").concat(CT,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(iy,`] {
    `).concat(hlt,": ").concat(a,`px;
  }
`)},QQ=function(){var t=parseInt(document.body.getAttribute(iy)||"0",10);return isFinite(t)?t:0},Rlt=function(){T.useEffect(function(){return document.body.setAttribute(iy,(QQ()+1).toString()),function(){var t=QQ()-1;t<=0?document.body.removeAttribute(iy):document.body.setAttribute(iy,t.toString())}},[])},Olt=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;Rlt();var s=T.useMemo(function(){return _lt(i)},[i]);return T.createElement(Ilt,{styles:Plt(s,!e,i,n?"":"!important")})},YD=!1;if(typeof window<"u")try{var OA=Object.defineProperty({},"passive",{get:function(){return YD=!0,!0}});window.addEventListener("test",OA,OA),window.removeEventListener("test",OA,OA)}catch{YD=!1}var Z0=YD?{passive:!1}:!1,Mlt=function(t){return t.tagName==="TEXTAREA"},ape=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!Mlt(t)&&n[e]==="visible")},Dlt=function(t){return ape(t,"overflowY")},Llt=function(t){return ape(t,"overflowX")},ZQ=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=lpe(t,r);if(i){var s=cpe(t,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},jlt=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},Blt=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},lpe=function(t,e){return t==="v"?Dlt(e):Llt(e)},cpe=function(t,e){return t==="v"?jlt(e):Blt(e)},Ult=function(t,e){return t==="h"&&e==="rtl"?-1:1},Flt=function(t,e,n,r,i){var s=Ult(t,window.getComputedStyle(e).direction),o=s*r,a=n.target,l=e.contains(a),c=!1,u=o>0,f=0,m=0;do{if(!a)break;var g=cpe(t,a),v=g[0],x=g[1],b=g[2],E=x-b-s*v;(v||E)&&lpe(t,a)&&(f+=E,m+=v);var C=a.parentNode;a=C&&C.nodeType===Node.DOCUMENT_FRAGMENT_NODE?C.host:C}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&Math.abs(f)<1||!u&&Math.abs(m)<1)&&(c=!0),c},MA=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},eZ=function(t){return[t.deltaX,t.deltaY]},tZ=function(t){return t&&"current"in t?t.current:t},$lt=function(t,e){return t[0]===e[0]&&t[1]===e[1]},zlt=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Hlt=0,eg=[];function Vlt(t){var e=T.useRef([]),n=T.useRef([0,0]),r=T.useRef(),i=T.useState(Hlt++)[0],s=T.useState(ope)[0],o=T.useRef(t);T.useEffect(function(){o.current=t},[t]),T.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var x=gxe([t.lockRef.current],(t.shards||[]).map(tZ),!0).filter(Boolean);return x.forEach(function(b){return b.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),x.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var a=T.useCallback(function(x,b){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!o.current.allowPinchZoom;var E=MA(x),C=n.current,k="deltaX"in x?x.deltaX:C[0]-E[0],O="deltaY"in x?x.deltaY:C[1]-E[1],U,R=x.target,$=Math.abs(k)>Math.abs(O)?"h":"v";if("touches"in x&&$==="h"&&R.type==="range")return!1;var V=window.getSelection(),j=V&&V.anchorNode,F=j?j===R||j.contains(R):!1;if(F)return!1;var W=ZQ($,R);if(!W)return!0;if(W?U=$:(U=$==="v"?"h":"v",W=ZQ($,R)),!W)return!1;if(!r.current&&"changedTouches"in x&&(k||O)&&(r.current=U),!U)return!0;var H=r.current||U;return Flt(H,b,x,H==="h"?k:O)},[]),l=T.useCallback(function(x){var b=x;if(!(!eg.length||eg[eg.length-1]!==s)){var E="deltaY"in b?eZ(b):MA(b),C=e.current.filter(function(U){return U.name===b.type&&(U.target===b.target||b.target===U.shadowParent)&&$lt(U.delta,E)})[0];if(C&&C.should){b.cancelable&&b.preventDefault();return}if(!C){var k=(o.current.shards||[]).map(tZ).filter(Boolean).filter(function(U){return U.contains(b.target)}),O=k.length>0?a(b,k[0]):!o.current.noIsolation;O&&b.cancelable&&b.preventDefault()}}},[]),c=T.useCallback(function(x,b,E,C){var k={name:x,delta:b,target:E,should:C,shadowParent:qlt(E)};e.current.push(k),setTimeout(function(){e.current=e.current.filter(function(O){return O!==k})},1)},[]),u=T.useCallback(function(x){n.current=MA(x),r.current=void 0},[]),f=T.useCallback(function(x){c(x.type,eZ(x),x.target,a(x,t.lockRef.current))},[]),m=T.useCallback(function(x){c(x.type,MA(x),x.target,a(x,t.lockRef.current))},[]);T.useEffect(function(){return eg.push(s),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:m}),document.addEventListener("wheel",l,Z0),document.addEventListener("touchmove",l,Z0),document.addEventListener("touchstart",u,Z0),function(){eg=eg.filter(function(x){return x!==s}),document.removeEventListener("wheel",l,Z0),document.removeEventListener("touchmove",l,Z0),document.removeEventListener("touchstart",u,Z0)}},[]);var g=t.removeScrollBar,v=t.inert;return T.createElement(T.Fragment,null,v?T.createElement(s,{styles:zlt(i)}):null,g?T.createElement(Olt,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function qlt(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const Glt=blt(spe,Vlt);var DB=T.forwardRef(function(t,e){return T.createElement($N,hc({},t,{ref:e,sideCar:Glt}))});DB.classNames=$N.classNames;var Klt=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},tg=new WeakMap,DA=new WeakMap,LA={},o3=0,upe=function(t){return t&&(t.host||upe(t.parentNode))},Wlt=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=upe(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},Ylt=function(t,e,n,r){var i=Wlt(e,Array.isArray(t)?t:[t]);LA[n]||(LA[n]=new WeakMap);var s=LA[n],o=[],a=new Set,l=new Set(i),c=function(f){!f||a.has(f)||(a.add(f),c(f.parentNode))};i.forEach(c);var u=function(f){!f||l.has(f)||Array.prototype.forEach.call(f.children,function(m){if(a.has(m))u(m);else try{var g=m.getAttribute(r),v=g!==null&&g!=="false",x=(tg.get(m)||0)+1,b=(s.get(m)||0)+1;tg.set(m,x),s.set(m,b),o.push(m),x===1&&v&&DA.set(m,!0),b===1&&m.setAttribute(n,"true"),v||m.setAttribute(r,"true")}catch(E){console.error("aria-hidden: cannot operate on ",m,E)}})};return u(e),a.clear(),o3++,function(){o.forEach(function(f){var m=tg.get(f)-1,g=s.get(f)-1;tg.set(f,m),s.set(f,g),m||(DA.has(f)||f.removeAttribute(r),DA.delete(f)),g||f.removeAttribute(n)}),o3--,o3||(tg=new WeakMap,tg=new WeakMap,DA=new WeakMap,LA={})}},dpe=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=Klt(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),Ylt(r,i,n,"aria-hidden")):function(){return null}};function Jlt(t){const e=Xlt(t),n=T.forwardRef((r,i)=>{const{children:s,...o}=r,a=T.Children.toArray(s),l=a.find(Zlt);if(l){const c=l.props.children,u=a.map(f=>f===l?T.Children.count(c)>1?T.Children.only(null):T.isValidElement(c)?c.props.children:null:f);return h.jsx(e,{...o,ref:i,children:T.isValidElement(c)?T.cloneElement(c,void 0,u):null})}return h.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}function Xlt(t){const e=T.forwardRef((n,r)=>{const{children:i,...s}=n;if(T.isValidElement(i)){const o=tct(i),a=ect(s,i.props);return i.type!==T.Fragment&&(a.ref=r?Fx(r,o):o),T.cloneElement(i,a)}return T.Children.count(i)>1?T.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var Qlt=Symbol("radix.slottable");function Zlt(t){return T.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Qlt}function ect(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const l=s(...a);return i(...a),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function tct(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var zN="Dialog",[fpe]=Mm(zN),[nct,Fl]=fpe(zN),hpe=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!0}=t,a=T.useRef(null),l=T.useRef(null),[c,u]=Mw({prop:r,defaultProp:i??!1,onChange:s,caller:zN});return h.jsx(nct,{scope:e,triggerRef:a,contentRef:l,contentId:Zf(),titleId:Zf(),descriptionId:Zf(),open:c,onOpenChange:u,onOpenToggle:T.useCallback(()=>u(f=>!f),[u]),modal:o,children:n})};hpe.displayName=zN;var ppe="DialogTrigger",rct=T.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Fl(ppe,n),s=Nr(e,i.triggerRef);return h.jsx(Mn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":BB(i.open),...r,ref:s,onClick:pn(t.onClick,i.onOpenToggle)})});rct.displayName=ppe;var LB="DialogPortal",[ict,mpe]=fpe(LB,{forceMount:void 0}),gpe=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,s=Fl(LB,e);return h.jsx(ict,{scope:e,forceMount:n,children:T.Children.map(r,o=>h.jsx(Lm,{present:n||s.open,children:h.jsx(C2,{asChild:!0,container:i,children:o})}))})};gpe.displayName=LB;var TC="DialogOverlay",ype=T.forwardRef((t,e)=>{const n=mpe(TC,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=Fl(TC,t.__scopeDialog);return s.modal?h.jsx(Lm,{present:r||s.open,children:h.jsx(oct,{...i,ref:e})}):null});ype.displayName=TC;var sct=Jlt("DialogOverlay.RemoveScroll"),oct=T.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Fl(TC,n);return h.jsx(DB,{as:sct,allowPinchZoom:!0,shards:[i.contentRef],children:h.jsx(Mn.div,{"data-state":BB(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),km="DialogContent",xpe=T.forwardRef((t,e)=>{const n=mpe(km,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=Fl(km,t.__scopeDialog);return h.jsx(Lm,{present:r||s.open,children:s.modal?h.jsx(act,{...i,ref:e}):h.jsx(lct,{...i,ref:e})})});xpe.displayName=km;var act=T.forwardRef((t,e)=>{const n=Fl(km,t.__scopeDialog),r=T.useRef(null),i=Nr(e,n.contentRef,r);return T.useEffect(()=>{const s=r.current;if(s)return dpe(s)},[]),h.jsx(vpe,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:pn(t.onCloseAutoFocus,s=>{var o;s.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:pn(t.onPointerDownOutside,s=>{const o=s.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&s.preventDefault()}),onFocusOutside:pn(t.onFocusOutside,s=>s.preventDefault())})}),lct=T.forwardRef((t,e)=>{const n=Fl(km,t.__scopeDialog),r=T.useRef(!1),i=T.useRef(!1);return h.jsx(vpe,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,s),s.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),vpe=T.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...o}=t,a=Fl(km,n),l=T.useRef(null),c=Nr(e,l);return rpe(),h.jsxs(h.Fragment,{children:[h.jsx(MB,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:h.jsx(w2,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":BB(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),h.jsxs(h.Fragment,{children:[h.jsx(cct,{titleId:a.titleId}),h.jsx(dct,{contentRef:l,descriptionId:a.descriptionId})]})]})}),jB="DialogTitle",bpe=T.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Fl(jB,n);return h.jsx(Mn.h2,{id:i.titleId,...r,ref:e})});bpe.displayName=jB;var wpe="DialogDescription",Epe=T.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Fl(wpe,n);return h.jsx(Mn.p,{id:i.descriptionId,...r,ref:e})});Epe.displayName=wpe;var Spe="DialogClose",Ape=T.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Fl(Spe,n);return h.jsx(Mn.button,{type:"button",...r,ref:e,onClick:pn(t.onClick,()=>i.onOpenChange(!1))})});Ape.displayName=Spe;function BB(t){return t?"open":"closed"}var Tpe="DialogTitleWarning",[s0t,kpe]=uPe(Tpe,{contentName:km,titleName:jB,docsSlug:"dialog"}),cct=({titleId:t})=>{const e=kpe(Tpe),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return T.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},uct="DialogDescriptionWarning",dct=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${kpe(uct).contentName}}.`;return T.useEffect(()=>{var s;const i=(s=t.current)==null?void 0:s.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},fct=hpe,hct=gpe,Cpe=ype,Npe=xpe,_pe=bpe,Ipe=Epe,pct=Ape;const lv=fct,mct=hct,Ppe=T.forwardRef(({className:t,...e},n)=>h.jsx(Cpe,{ref:n,className:jt("fixed inset-0 z-50 bg-black/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));Ppe.displayName=Cpe.displayName;const $m=T.forwardRef(({className:t,children:e,...n},r)=>h.jsxs(mct,{children:[h.jsx(Ppe,{}),h.jsxs(Npe,{ref:r,className:jt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-slate-700 bg-slate-900 p-6 shadow-2xl duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-xl",t),...n,children:[e,h.jsxs(pct,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[h.jsx(r2,{className:"h-4 w-4"}),h.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));$m.displayName=Npe.displayName;const zm=({className:t,...e})=>h.jsx("div",{className:jt("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});zm.displayName="DialogHeader";const cv=({className:t,...e})=>h.jsx("div",{className:jt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});cv.displayName="DialogFooter";const Hm=T.forwardRef(({className:t,...e},n)=>h.jsx(_pe,{ref:n,className:jt("text-lg font-semibold leading-none tracking-tight text-white",t),...e}));Hm.displayName=_pe.displayName;const Vm=T.forwardRef(({className:t,...e},n)=>h.jsx(Ipe,{ref:n,className:jt("text-sm text-muted-foreground",t),...e}));Vm.displayName=Ipe.displayName;const gct=({backupKey:t,setBackupKey:e,setShowBackupModal:n,addNotification:r,onClose:i})=>{const s=async()=>{try{await navigator.clipboard.writeText(t),r("Private key copied to clipboard")}catch{r("Failed to copy to clipboard")}},o=()=>{e(""),n(!1),r("Solana backup confirmed!"),i&&i()};return h.jsx(lv,{open:!0,onOpenChange:()=>{},children:h.jsxs($m,{className:"max-w-md",onPointerDownOutside:a=>a.preventDefault(),children:[h.jsxs(zm,{children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsx("div",{className:"w-10 h-10 bg-purple-500/20 rounded-full flex items-center justify-center",children:h.jsx(sd,{className:"text-purple-400 w-5 h-5"})}),h.jsx("div",{children:h.jsxs(Hm,{className:"flex items-center gap-2",children:["Backup Your Solana Key",h.jsx(Ml,{variant:"purple",children:"CRITICAL"})]})})]}),h.jsx(Vm,{children:"This is your Solana wallet private key. Save it securely - you will NOT see it again."})]}),h.jsxs(Ht.div,{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-3 flex items-start gap-2",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:[h.jsx(_l,{className:"text-red-400 w-5 h-5 shrink-0 mt-0.5"}),h.jsxs("p",{className:"text-red-400 text-sm",children:[h.jsx("strong",{children:"Warning:"})," Anyone with this key can access your funds. Never share it with anyone."]})]}),h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-slate-700",children:[h.jsx("p",{className:"text-[10px] uppercase text-slate-500 font-bold mb-2",children:"Private Key"}),h.jsx("div",{className:"font-mono text-xs text-slate-300 break-all bg-black/30 p-3 rounded border border-slate-700/50",children:t})]}),h.jsxs(Fi,{onClick:s,variant:"outline",className:"w-full",children:[h.jsx(Qp,{className:"w-4 h-4 mr-2"}),"Copy to Clipboard"]})]}),h.jsx(cv,{children:h.jsx(Fi,{onClick:o,variant:"success",className:"w-full",children:"I've Saved My Key Securely"})})]})})},yct=({backupKey:t,setBackupKey:e,setShowBackupModal:n,addNotification:r})=>{const i=async()=>{try{await navigator.clipboard.writeText(t),r("Hyperliquid private key copied to clipboard")}catch{r("Failed to copy to clipboard")}},s=()=>{e(""),n(!1),r("Hyperliquid backup confirmed!")};return h.jsx(lv,{open:!0,onOpenChange:()=>{},children:h.jsxs($m,{className:"max-w-md",onPointerDownOutside:o=>o.preventDefault(),children:[h.jsxs(zm,{children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsx("div",{className:"w-10 h-10 bg-emerald-500/20 rounded-full flex items-center justify-center",children:h.jsx(sd,{className:"text-emerald-400 w-5 h-5"})}),h.jsx("div",{children:h.jsxs(Hm,{className:"flex items-center gap-2",children:["Backup Your Hyperliquid Key",h.jsx(Ml,{variant:"success",children:"CRITICAL"})]})})]}),h.jsx(Vm,{children:"This is your Hyperliquid (EVM) wallet private key. Save it securely - you will NOT see it again."})]}),h.jsxs(Ht.div,{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-3 flex items-start gap-2",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:[h.jsx(_l,{className:"text-red-400 w-5 h-5 shrink-0 mt-0.5"}),h.jsxs("p",{className:"text-red-400 text-sm",children:[h.jsx("strong",{children:"Warning:"})," Anyone with this key can access your funds. Never share it with anyone."]})]}),h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-slate-700",children:[h.jsx("p",{className:"text-[10px] uppercase text-slate-500 font-bold mb-2",children:"Private Key (EVM)"}),h.jsx("div",{className:"font-mono text-xs text-slate-300 break-all bg-black/30 p-3 rounded border border-slate-700/50",children:t})]}),h.jsxs(Fi,{onClick:i,variant:"outline",className:"w-full",children:[h.jsx(Qp,{className:"w-4 h-4 mr-2"}),"Copy to Clipboard"]})]}),h.jsx(cv,{children:h.jsx(Fi,{onClick:s,variant:"success",className:"w-full",children:"I've Saved My Key Securely"})})]})})},xct=({backupKey:t,setBackupKey:e,setShowBackupModal:n,addNotification:r})=>{const i=async()=>{try{await navigator.clipboard.writeText(t),r("Polymarket private key copied to clipboard")}catch{r("Failed to copy to clipboard")}},s=()=>{e(""),n(!1),r("Polymarket backup confirmed!")};return h.jsx(lv,{open:!0,onOpenChange:()=>{},children:h.jsxs($m,{className:"max-w-md",onPointerDownOutside:o=>o.preventDefault(),children:[h.jsxs(zm,{children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsx("div",{className:"w-10 h-10 bg-purple-500/20 rounded-full flex items-center justify-center",children:h.jsx(sd,{className:"text-purple-400 w-5 h-5"})}),h.jsx("div",{children:h.jsxs(Hm,{className:"flex items-center gap-2",children:["Backup Your Polymarket Key",h.jsx(Ml,{variant:"destructive",children:"CRITICAL"})]})})]}),h.jsx(Vm,{children:"This is your Polymarket (Polygon) wallet private key. Save it securely - you will NOT see it again."})]}),h.jsxs(Ht.div,{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-3 flex items-start gap-2",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:[h.jsx(_l,{className:"text-red-400 w-5 h-5 shrink-0 mt-0.5"}),h.jsxs("p",{className:"text-red-400 text-sm",children:[h.jsx("strong",{children:"Warning:"})," Anyone with this key can access your Polygon funds. Never share it with anyone."]})]}),h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-slate-700",children:[h.jsx("p",{className:"text-[10px] uppercase text-slate-500 font-bold mb-2",children:"Private Key (Polygon EVM)"}),h.jsx("div",{className:"font-mono text-xs text-slate-300 break-all bg-black/30 p-3 rounded border border-slate-700/50",children:t})]}),h.jsxs(Fi,{onClick:i,variant:"outline",className:"w-full",children:[h.jsx(Qp,{className:"w-4 h-4 mr-2"}),"Copy to Clipboard"]})]}),h.jsx(cv,{children:h.jsx(Fi,{onClick:s,variant:"success",className:"w-full",children:"I've Saved My Key Securely"})})]})})},ng=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function pE(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function JD(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function qm(t,...e){if(!pE(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Rpe(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");JD(t.outputLen),JD(t.blockLen)}function kC(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function vct(t,e){qm(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Sx(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function a3(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Jl(t,e){return t<<32-e|t>>>e}const Ope=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",bct=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function om(t){if(qm(t),Ope)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=bct[t[n]];return e}const pu={_0:48,_9:57,A:65,F:70,a:97,f:102};function nZ(t){if(t>=pu._0&&t<=pu._9)return t-pu._0;if(t>=pu.A&&t<=pu.F)return t-(pu.A-10);if(t>=pu.a&&t<=pu.f)return t-(pu.a-10)}function CC(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(Ope)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let i=0,s=0;i<n;i++,s+=2){const o=nZ(t.charCodeAt(s)),a=nZ(t.charCodeAt(s+1));if(o===void 0||a===void 0){const l=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+l+'" at index '+s)}r[i]=o*16+a}return r}function wct(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function UB(t){return typeof t=="string"&&(t=wct(t)),qm(t),t}function yc(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];qm(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}class Mpe{}function Dpe(t){const e=r=>t().update(UB(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function FB(t=32){if(ng&&typeof ng.getRandomValues=="function")return ng.getRandomValues(new Uint8Array(t));if(ng&&typeof ng.randomBytes=="function")return Uint8Array.from(ng.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}function Ect(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),l=r?4:0,c=r?0:4;t.setUint32(e+l,o,r),t.setUint32(e+c,a,r)}function Sct(t,e,n){return t&e^~t&n}function Act(t,e,n){return t&e^t&n^e&n}class Lpe extends Mpe{constructor(e,n,r,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.buffer=new Uint8Array(e),this.view=a3(this.buffer)}update(e){kC(this),e=UB(e),qm(e);const{view:n,buffer:r,blockLen:i}=this,s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=a3(e);for(;i<=s-o;o+=i)this.process(l,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){kC(this),vct(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,Sx(this.buffer.subarray(o)),this.padOffset>i-o&&(this.process(r,0),o=0);for(let f=o;f<i;f++)n[f]=0;Ect(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=a3(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=l/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<c;f++)a.setUint32(4*f,u[f],s)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=s,e.length=i,e.pos=a,i%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const pf=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),hs=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),jA=BigInt(2**32-1),rZ=BigInt(32);function Tct(t,e=!1){return e?{h:Number(t&jA),l:Number(t>>rZ&jA)}:{h:Number(t>>rZ&jA)|0,l:Number(t&jA)|0}}function kct(t,e=!1){const n=t.length;let r=new Uint32Array(n),i=new Uint32Array(n);for(let s=0;s<n;s++){const{h:o,l:a}=Tct(t[s],e);[r[s],i[s]]=[o,a]}return[r,i]}const iZ=(t,e,n)=>t>>>n,sZ=(t,e,n)=>t<<32-n|e>>>n,rg=(t,e,n)=>t>>>n|e<<32-n,ig=(t,e,n)=>t<<32-n|e>>>n,BA=(t,e,n)=>t<<64-n|e>>>n-32,UA=(t,e,n)=>t>>>n-32|e<<64-n;function mu(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:i|0}}const Cct=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),Nct=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,_ct=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),Ict=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0,Pct=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0),Rct=(t,e,n,r,i,s)=>e+n+r+i+s+(t/2**32|0)|0,Oct=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),mf=new Uint32Array(64);class Mct extends Lpe{constructor(e=32){super(64,e,8,!1),this.A=pf[0]|0,this.B=pf[1]|0,this.C=pf[2]|0,this.D=pf[3]|0,this.E=pf[4]|0,this.F=pf[5]|0,this.G=pf[6]|0,this.H=pf[7]|0}get(){const{A:e,B:n,C:r,D:i,E:s,F:o,G:a,H:l}=this;return[e,n,r,i,s,o,a,l]}set(e,n,r,i,s,o,a,l){this.A=e|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(e,n){for(let f=0;f<16;f++,n+=4)mf[f]=e.getUint32(n,!1);for(let f=16;f<64;f++){const m=mf[f-15],g=mf[f-2],v=Jl(m,7)^Jl(m,18)^m>>>3,x=Jl(g,17)^Jl(g,19)^g>>>10;mf[f]=x+mf[f-7]+v+mf[f-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:l,G:c,H:u}=this;for(let f=0;f<64;f++){const m=Jl(a,6)^Jl(a,11)^Jl(a,25),g=u+m+Sct(a,l,c)+Oct[f]+mf[f]|0,x=(Jl(r,2)^Jl(r,13)^Jl(r,22))+Act(r,i,s)|0;u=c,c=l,l=a,a=o+g|0,o=s,s=i,i=r,r=g+x|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(r,i,s,o,a,l,c,u)}roundClean(){Sx(mf)}destroy(){this.set(0,0,0,0,0,0,0,0),Sx(this.buffer)}}const jpe=kct(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Dct=jpe[0],Lct=jpe[1],gf=new Uint32Array(80),yf=new Uint32Array(80);class jct extends Lpe{constructor(e=64){super(128,e,16,!1),this.Ah=hs[0]|0,this.Al=hs[1]|0,this.Bh=hs[2]|0,this.Bl=hs[3]|0,this.Ch=hs[4]|0,this.Cl=hs[5]|0,this.Dh=hs[6]|0,this.Dl=hs[7]|0,this.Eh=hs[8]|0,this.El=hs[9]|0,this.Fh=hs[10]|0,this.Fl=hs[11]|0,this.Gh=hs[12]|0,this.Gl=hs[13]|0,this.Hh=hs[14]|0,this.Hl=hs[15]|0}get(){const{Ah:e,Al:n,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:l,Eh:c,El:u,Fh:f,Fl:m,Gh:g,Gl:v,Hh:x,Hl:b}=this;return[e,n,r,i,s,o,a,l,c,u,f,m,g,v,x,b]}set(e,n,r,i,s,o,a,l,c,u,f,m,g,v,x,b){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=c|0,this.El=u|0,this.Fh=f|0,this.Fl=m|0,this.Gh=g|0,this.Gl=v|0,this.Hh=x|0,this.Hl=b|0}process(e,n){for(let k=0;k<16;k++,n+=4)gf[k]=e.getUint32(n),yf[k]=e.getUint32(n+=4);for(let k=16;k<80;k++){const O=gf[k-15]|0,U=yf[k-15]|0,R=rg(O,U,1)^rg(O,U,8)^iZ(O,U,7),$=ig(O,U,1)^ig(O,U,8)^sZ(O,U,7),V=gf[k-2]|0,j=yf[k-2]|0,F=rg(V,j,19)^BA(V,j,61)^iZ(V,j,6),W=ig(V,j,19)^UA(V,j,61)^sZ(V,j,6),H=_ct($,W,yf[k-7],yf[k-16]),B=Ict(H,R,F,gf[k-7],gf[k-16]);gf[k]=B|0,yf[k]=H|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:l,Dh:c,Dl:u,Eh:f,El:m,Fh:g,Fl:v,Gh:x,Gl:b,Hh:E,Hl:C}=this;for(let k=0;k<80;k++){const O=rg(f,m,14)^rg(f,m,18)^BA(f,m,41),U=ig(f,m,14)^ig(f,m,18)^UA(f,m,41),R=f&g^~f&x,$=m&v^~m&b,V=Pct(C,U,$,Lct[k],yf[k]),j=Rct(V,E,O,R,Dct[k],gf[k]),F=V|0,W=rg(r,i,28)^BA(r,i,34)^BA(r,i,39),H=ig(r,i,28)^UA(r,i,34)^UA(r,i,39),B=r&s^r&a^s&a,A=i&o^i&l^o&l;E=x|0,C=b|0,x=g|0,b=v|0,g=f|0,v=m|0,{h:f,l:m}=mu(c|0,u|0,j|0,F|0),c=a|0,u=l|0,a=s|0,l=o|0,s=r|0,o=i|0;const I=Cct(F,H,A);r=Nct(I,j,W,B),i=I|0}({h:r,l:i}=mu(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=mu(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l}=mu(this.Ch|0,this.Cl|0,a|0,l|0),{h:c,l:u}=mu(this.Dh|0,this.Dl|0,c|0,u|0),{h:f,l:m}=mu(this.Eh|0,this.El|0,f|0,m|0),{h:g,l:v}=mu(this.Fh|0,this.Fl|0,g|0,v|0),{h:x,l:b}=mu(this.Gh|0,this.Gl|0,x|0,b|0),{h:E,l:C}=mu(this.Hh|0,this.Hl|0,E|0,C|0),this.set(r,i,s,o,a,l,c,u,f,m,g,v,x,b,E,C)}roundClean(){Sx(gf,yf)}destroy(){Sx(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Bpe=Dpe(()=>new Mct),Bct=Dpe(()=>new jct);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const $B=BigInt(0),XD=BigInt(1);function Cm(t,e=""){if(typeof t!="boolean"){const n=e&&`"${e}"`;throw new Error(n+"expected boolean, got type="+typeof t)}return t}function Sl(t,e,n=""){const r=pE(t),i=t==null?void 0:t.length,s=e!==void 0;if(!r||s&&i!==e){const o=n&&`"${n}" `,a=s?` of length ${e}`:"",l=r?`length=${i}`:`type=${typeof t}`;throw new Error(o+"expected Uint8Array"+a+", got "+l)}return t}function FA(t){const e=t.toString(16);return e.length&1?"0"+e:e}function Upe(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?$B:BigInt("0x"+t)}function HN(t){return Upe(om(t))}function r1(t){return qm(t),Upe(om(Uint8Array.from(t).reverse()))}function zB(t,e){return CC(t.toString(16).padStart(e*2,"0"))}function Fpe(t,e){return zB(t,e).reverse()}function qr(t,e,n){let r;if(typeof e=="string")try{r=CC(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(pE(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(t+" of length "+n+" expected, got "+i);return r}function oZ(t){return Uint8Array.from(t)}const l3=t=>typeof t=="bigint"&&$B<=t;function Uct(t,e,n){return l3(t)&&l3(e)&&l3(n)&&e<=t&&t<n}function QD(t,e,n,r){if(!Uct(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function $pe(t){let e;for(e=0;t>$B;t>>=XD,e+=1);return e}const mE=t=>(XD<<BigInt(t))-XD;function Fct(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=g=>new Uint8Array(g),i=g=>Uint8Array.of(g);let s=r(t),o=r(t),a=0;const l=()=>{s.fill(1),o.fill(0),a=0},c=(...g)=>n(o,s,...g),u=(g=r(0))=>{o=c(i(0),g),s=c(),g.length!==0&&(o=c(i(1),g),s=c())},f=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let g=0;const v=[];for(;g<e;){s=c();const x=s.slice();v.push(x),g+=s.length}return yc(...v)};return(g,v)=>{l(),u(g);let x;for(;!(x=v(f()));)u();return l(),x}}function gE(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(i,s,o){const a=t[i];if(o&&a===void 0)return;const l=typeof a;if(l!==s||a===null)throw new Error(`param "${i}" is invalid: expected ${s}, got ${l}`)}Object.entries(e).forEach(([i,s])=>r(i,s,!1)),Object.entries(n).forEach(([i,s])=>r(i,s,!0))}function NC(t){const e=new WeakMap;return(n,...r)=>{const i=e.get(n);if(i!==void 0)return i;const s=t(n,...r);return e.set(n,s),s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const mo=BigInt(0),cs=BigInt(1),Tp=BigInt(2),zpe=BigInt(3),Hpe=BigInt(4),Vpe=BigInt(5),$ct=BigInt(7),qpe=BigInt(8),zct=BigInt(9),Gpe=BigInt(16);function hi(t,e){const n=t%e;return n>=mo?n:e+n}function $r(t,e,n){let r=t;for(;e-- >mo;)r*=r,r%=n;return r}function aZ(t,e){if(t===mo)throw new Error("invert: expected non-zero number");if(e<=mo)throw new Error("invert: expected positive modulus, got "+e);let n=hi(t,e),r=e,i=mo,s=cs;for(;n!==mo;){const a=r/n,l=r%n,c=i-s*a;r=n,n=l,i=s,s=c}if(r!==cs)throw new Error("invert: does not exist");return hi(i,e)}function HB(t,e,n){if(!t.eql(t.sqr(e),n))throw new Error("Cannot find square root")}function Kpe(t,e){const n=(t.ORDER+cs)/Hpe,r=t.pow(e,n);return HB(t,r,e),r}function Hct(t,e){const n=(t.ORDER-Vpe)/qpe,r=t.mul(e,Tp),i=t.pow(r,n),s=t.mul(e,i),o=t.mul(t.mul(s,Tp),i),a=t.mul(s,t.sub(o,t.ONE));return HB(t,a,e),a}function Vct(t){const e=Gm(t),n=Wpe(t),r=n(e,e.neg(e.ONE)),i=n(e,r),s=n(e,e.neg(r)),o=(t+$ct)/Gpe;return(a,l)=>{let c=a.pow(l,o),u=a.mul(c,r);const f=a.mul(c,i),m=a.mul(c,s),g=a.eql(a.sqr(u),l),v=a.eql(a.sqr(f),l);c=a.cmov(c,u,g),u=a.cmov(m,f,v);const x=a.eql(a.sqr(u),l),b=a.cmov(c,u,x);return HB(a,b,l),b}}function Wpe(t){if(t<zpe)throw new Error("sqrt is not defined for small field");let e=t-cs,n=0;for(;e%Tp===mo;)e/=Tp,n++;let r=Tp;const i=Gm(t);for(;lZ(i,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return Kpe;let s=i.pow(r,e);const o=(e+cs)/Tp;return function(l,c){if(l.is0(c))return c;if(lZ(l,c)!==1)throw new Error("Cannot find square root");let u=n,f=l.mul(l.ONE,s),m=l.pow(c,e),g=l.pow(c,o);for(;!l.eql(m,l.ONE);){if(l.is0(m))return l.ZERO;let v=1,x=l.sqr(m);for(;!l.eql(x,l.ONE);)if(v++,x=l.sqr(x),v===u)throw new Error("Cannot find square root");const b=cs<<BigInt(u-v-1),E=l.pow(f,b);u=v,f=l.sqr(E),m=l.mul(m,f),g=l.mul(g,E)}return g}}function qct(t){return t%Hpe===zpe?Kpe:t%qpe===Vpe?Hct:t%Gpe===zct?Vct(t):Wpe(t)}const Gct=(t,e)=>(hi(t,e)&cs)===cs,Kct=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Wct(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=Kct.reduce((r,i)=>(r[i]="function",r),e);return gE(t,n),t}function Yct(t,e,n){if(n<mo)throw new Error("invalid exponent, negatives unsupported");if(n===mo)return t.ONE;if(n===cs)return e;let r=t.ONE,i=e;for(;n>mo;)n&cs&&(r=t.mul(r,i)),i=t.sqr(i),n>>=cs;return r}function Ype(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),i=e.reduce((o,a,l)=>t.is0(a)?o:(r[l]=o,t.mul(o,a)),t.ONE),s=t.inv(i);return e.reduceRight((o,a,l)=>t.is0(a)?o:(r[l]=t.mul(o,r[l]),t.mul(o,a)),s),r}function lZ(t,e){const n=(t.ORDER-cs)/Tp,r=t.pow(e,n),i=t.eql(r,t.ONE),s=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!i&&!s&&!o)throw new Error("invalid Legendre symbol result");return i?1:s?0:-1}function Jpe(t,e){e!==void 0&&JD(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Gm(t,e,n=!1,r={}){if(t<=mo)throw new Error("invalid field: expected ORDER > 0, got "+t);let i,s,o=!1,a;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const m=e;m.BITS&&(i=m.BITS),m.sqrt&&(s=m.sqrt),typeof m.isLE=="boolean"&&(n=m.isLE),typeof m.modFromBytes=="boolean"&&(o=m.modFromBytes),a=m.allowedLengths}else typeof e=="number"&&(i=e),r.sqrt&&(s=r.sqrt);const{nBitLength:l,nByteLength:c}=Jpe(t,i);if(c>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let u;const f=Object.freeze({ORDER:t,isLE:n,BITS:l,BYTES:c,MASK:mE(l),ZERO:mo,ONE:cs,allowedLengths:a,create:m=>hi(m,t),isValid:m=>{if(typeof m!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof m);return mo<=m&&m<t},is0:m=>m===mo,isValidNot0:m=>!f.is0(m)&&f.isValid(m),isOdd:m=>(m&cs)===cs,neg:m=>hi(-m,t),eql:(m,g)=>m===g,sqr:m=>hi(m*m,t),add:(m,g)=>hi(m+g,t),sub:(m,g)=>hi(m-g,t),mul:(m,g)=>hi(m*g,t),pow:(m,g)=>Yct(f,m,g),div:(m,g)=>hi(m*aZ(g,t),t),sqrN:m=>m*m,addN:(m,g)=>m+g,subN:(m,g)=>m-g,mulN:(m,g)=>m*g,inv:m=>aZ(m,t),sqrt:s||(m=>(u||(u=qct(t)),u(f,m))),toBytes:m=>n?Fpe(m,c):zB(m,c),fromBytes:(m,g=!0)=>{if(a){if(!a.includes(m.length)||m.length>c)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+m.length);const x=new Uint8Array(c);x.set(m,n?0:x.length-m.length),m=x}if(m.length!==c)throw new Error("Field.fromBytes: expected "+c+" bytes, got "+m.length);let v=n?r1(m):HN(m);if(o&&(v=hi(v,t)),!g&&!f.isValid(v))throw new Error("invalid field element: outside of range 0..ORDER");return v},invertBatch:m=>Ype(f,m),cmov:(m,g,v)=>v?g:m});return Object.freeze(f)}function Xpe(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function Qpe(t){const e=Xpe(t);return e+Math.ceil(e/2)}function Jct(t,e,n=!1){const r=t.length,i=Xpe(e),s=Qpe(e);if(r<16||r<s||r>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+r);const o=n?r1(t):HN(t),a=hi(o,e-cs)+cs;return n?Fpe(a,i):zB(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ax=BigInt(0),kp=BigInt(1);function _C(t,e){const n=e.negate();return t?n:e}function Cp(t,e){const n=Ype(t.Fp,e.map(r=>r.Z));return e.map((r,i)=>t.fromAffine(r.toAffine(n[i])))}function Zpe(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function c3(t,e){Zpe(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),i=2**t,s=mE(t),o=BigInt(t);return{windows:n,windowSize:r,mask:s,maxNumber:i,shiftBy:o}}function cZ(t,e,n){const{windowSize:r,mask:i,maxNumber:s,shiftBy:o}=n;let a=Number(t&i),l=t>>o;a>r&&(a-=s,l+=kp);const c=e*r,u=c+Math.abs(a)-1,f=a===0,m=a<0,g=e%2!==0;return{nextN:l,offset:u,isZero:f,isNeg:m,isNegF:g,offsetF:c}}function Xct(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function Qct(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const u3=new WeakMap,eme=new WeakMap;function d3(t){return eme.get(t)||1}function uZ(t){if(t!==Ax)throw new Error("invalid wNAF")}class tme{constructor(e,n){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=n}_unsafeLadder(e,n,r=this.ZERO){let i=e;for(;n>Ax;)n&kp&&(r=r.add(i)),i=i.double(),n>>=kp;return r}precomputeWindow(e,n){const{windows:r,windowSize:i}=c3(n,this.bits),s=[];let o=e,a=o;for(let l=0;l<r;l++){a=o,s.push(a);for(let c=1;c<i;c++)a=a.add(o),s.push(a);o=a.double()}return s}wNAF(e,n,r){if(!this.Fn.isValid(r))throw new Error("invalid scalar");let i=this.ZERO,s=this.BASE;const o=c3(e,this.bits);for(let a=0;a<o.windows;a++){const{nextN:l,offset:c,isZero:u,isNeg:f,isNegF:m,offsetF:g}=cZ(r,a,o);r=l,u?s=s.add(_C(m,n[g])):i=i.add(_C(f,n[c]))}return uZ(r),{p:i,f:s}}wNAFUnsafe(e,n,r,i=this.ZERO){const s=c3(e,this.bits);for(let o=0;o<s.windows&&r!==Ax;o++){const{nextN:a,offset:l,isZero:c,isNeg:u}=cZ(r,o,s);if(r=a,!c){const f=n[l];i=i.add(u?f.negate():f)}}return uZ(r),i}getPrecomputes(e,n,r){let i=u3.get(n);return i||(i=this.precomputeWindow(n,e),e!==1&&(typeof r=="function"&&(i=r(i)),u3.set(n,i))),i}cached(e,n,r){const i=d3(e);return this.wNAF(i,this.getPrecomputes(i,e,r),n)}unsafe(e,n,r,i){const s=d3(e);return s===1?this._unsafeLadder(e,n,i):this.wNAFUnsafe(s,this.getPrecomputes(s,e,r),n,i)}createCache(e,n){Zpe(n,this.bits),eme.set(e,n),u3.delete(e)}hasCache(e){return d3(e)!==1}}function Zct(t,e,n,r){let i=e,s=t.ZERO,o=t.ZERO;for(;n>Ax||r>Ax;)n&kp&&(s=s.add(i)),r&kp&&(o=o.add(i)),i=i.double(),n>>=kp,r>>=kp;return{p1:s,p2:o}}function nme(t,e,n,r){Xct(n,t),Qct(r,e);const i=n.length,s=r.length;if(i!==s)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=$pe(BigInt(i));let l=1;a>12?l=a-3:a>4?l=a-2:a>0&&(l=2);const c=mE(l),u=new Array(Number(c)+1).fill(o),f=Math.floor((e.BITS-1)/l)*l;let m=o;for(let g=f;g>=0;g-=l){u.fill(o);for(let x=0;x<s;x++){const b=r[x],E=Number(b>>BigInt(g)&c);u[E]=u[E].add(n[x])}let v=o;for(let x=u.length-1,b=o;x>0;x--)b=b.add(u[x]),v=v.add(b);if(m=m.add(v),g!==0)for(let x=0;x<l;x++)m=m.double()}return m}function dZ(t,e,n){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Wct(e),e}else return Gm(t,{isLE:n})}function rme(t,e,n={},r){if(r===void 0&&(r=t==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const l of["p","n","h"]){const c=e[l];if(!(typeof c=="bigint"&&c>Ax))throw new Error(`CURVE.${l} must be positive bigint`)}const i=dZ(e.p,n.Fp,r),s=dZ(e.n,n.Fn,r),a=["Gx","Gy","a",t==="weierstrass"?"b":"d"];for(const l of a)if(!i.isValid(e[l]))throw new Error(`CURVE.${l} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:i,Fn:s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const xf=BigInt(0),Ri=BigInt(1),f3=BigInt(2),eut=BigInt(8);function tut(t,e,n,r){const i=t.sqr(n),s=t.sqr(r),o=t.add(t.mul(e.a,i),s),a=t.add(t.ONE,t.mul(e.d,t.mul(i,s)));return t.eql(o,a)}function nut(t,e={}){const n=rme("edwards",t,e,e.FpFnLE),{Fp:r,Fn:i}=n;let s=n.CURVE;const{h:o}=s;gE(e,{},{uvRatio:"function"});const a=f3<<BigInt(i.BYTES*8)-Ri,l=b=>r.create(b),c=e.uvRatio||((b,E)=>{try{return{isValid:!0,value:r.sqrt(r.div(b,E))}}catch{return{isValid:!1,value:xf}}});if(!tut(r,s,s.Gx,s.Gy))throw new Error("bad curve params: generator point");function u(b,E,C=!1){const k=C?Ri:xf;return QD("coordinate "+b,E,k,a),E}function f(b){if(!(b instanceof v))throw new Error("ExtendedPoint expected")}const m=NC((b,E)=>{const{X:C,Y:k,Z:O}=b,U=b.is0();E==null&&(E=U?eut:r.inv(O));const R=l(C*E),$=l(k*E),V=r.mul(O,E);if(U)return{x:xf,y:Ri};if(V!==Ri)throw new Error("invZ was invalid");return{x:R,y:$}}),g=NC(b=>{const{a:E,d:C}=s;if(b.is0())throw new Error("bad point: ZERO");const{X:k,Y:O,Z:U,T:R}=b,$=l(k*k),V=l(O*O),j=l(U*U),F=l(j*j),W=l($*E),H=l(j*l(W+V)),B=l(F+l(C*l($*V)));if(H!==B)throw new Error("bad point: equation left != right (1)");const A=l(k*O),I=l(U*R);if(A!==I)throw new Error("bad point: equation left != right (2)");return!0});class v{constructor(E,C,k,O){this.X=u("x",E),this.Y=u("y",C),this.Z=u("z",k,!0),this.T=u("t",O),Object.freeze(this)}static CURVE(){return s}static fromAffine(E){if(E instanceof v)throw new Error("extended point not allowed");const{x:C,y:k}=E||{};return u("x",C),u("y",k),new v(C,k,Ri,l(C*k))}static fromBytes(E,C=!1){const k=r.BYTES,{a:O,d:U}=s;E=oZ(Sl(E,k,"point")),Cm(C,"zip215");const R=oZ(E),$=E[k-1];R[k-1]=$&-129;const V=r1(R),j=C?a:r.ORDER;QD("point.y",V,xf,j);const F=l(V*V),W=l(F-Ri),H=l(U*F-O);let{isValid:B,value:A}=c(W,H);if(!B)throw new Error("bad point: invalid y coordinate");const I=(A&Ri)===Ri,D=($&128)!==0;if(!C&&A===xf&&D)throw new Error("bad point: x=0 and x_0=1");return D!==I&&(A=l(-A)),v.fromAffine({x:A,y:V})}static fromHex(E,C=!1){return v.fromBytes(qr("point",E),C)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(E=8,C=!0){return x.createCache(this,E),C||this.multiply(f3),this}assertValidity(){g(this)}equals(E){f(E);const{X:C,Y:k,Z:O}=this,{X:U,Y:R,Z:$}=E,V=l(C*$),j=l(U*O),F=l(k*$),W=l(R*O);return V===j&&F===W}is0(){return this.equals(v.ZERO)}negate(){return new v(l(-this.X),this.Y,this.Z,l(-this.T))}double(){const{a:E}=s,{X:C,Y:k,Z:O}=this,U=l(C*C),R=l(k*k),$=l(f3*l(O*O)),V=l(E*U),j=C+k,F=l(l(j*j)-U-R),W=V+R,H=W-$,B=V-R,A=l(F*H),I=l(W*B),D=l(F*B),z=l(H*W);return new v(A,I,z,D)}add(E){f(E);const{a:C,d:k}=s,{X:O,Y:U,Z:R,T:$}=this,{X:V,Y:j,Z:F,T:W}=E,H=l(O*V),B=l(U*j),A=l($*k*W),I=l(R*F),D=l((O+U)*(V+j)-H-B),z=I-A,G=I+A,te=l(B-C*H),K=l(D*z),q=l(G*te),M=l(D*te),_=l(z*G);return new v(K,q,_,M)}subtract(E){return this.add(E.negate())}multiply(E){if(!i.isValidNot0(E))throw new Error("invalid scalar: expected 1 <= sc < curve.n");const{p:C,f:k}=x.cached(this,E,O=>Cp(v,O));return Cp(v,[C,k])[0]}multiplyUnsafe(E,C=v.ZERO){if(!i.isValid(E))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return E===xf?v.ZERO:this.is0()||E===Ri?this:x.unsafe(this,E,k=>Cp(v,k),C)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}isTorsionFree(){return x.unsafe(this,s.n).is0()}toAffine(E){return m(this,E)}clearCofactor(){return o===Ri?this:this.multiplyUnsafe(o)}toBytes(){const{x:E,y:C}=this.toAffine(),k=r.toBytes(C);return k[k.length-1]|=E&Ri?128:0,k}toHex(){return om(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(E){return Cp(v,E)}static msm(E,C){return nme(v,i,E,C)}_setWindowSize(E){this.precompute(E)}toRawBytes(){return this.toBytes()}}v.BASE=new v(s.Gx,s.Gy,Ri,l(s.Gx*s.Gy)),v.ZERO=new v(xf,Ri,Ri,xf),v.Fp=r,v.Fn=i;const x=new tme(v,i.BITS);return v.BASE.precompute(8),v}function rut(t,e,n={}){if(typeof e!="function")throw new Error('"hash" function param is required');gE(n,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:r}=n,{BASE:i,Fp:s,Fn:o}=t,a=n.randomBytes||FB,l=n.adjustScalarBytes||(j=>j),c=n.domain||((j,F,W)=>{if(Cm(W,"phflag"),F.length||W)throw new Error("Contexts/pre-hash are not supported");return j});function u(j){return o.create(r1(j))}function f(j){const F=k.secretKey;j=qr("private key",j,F);const W=qr("hashed private key",e(j),2*F),H=l(W.slice(0,F)),B=W.slice(F,2*F),A=u(H);return{head:H,prefix:B,scalar:A}}function m(j){const{head:F,prefix:W,scalar:H}=f(j),B=i.multiply(H),A=B.toBytes();return{head:F,prefix:W,scalar:H,point:B,pointBytes:A}}function g(j){return m(j).pointBytes}function v(j=Uint8Array.of(),...F){const W=yc(...F);return u(e(c(W,qr("context",j),!!r)))}function x(j,F,W={}){j=qr("message",j),r&&(j=r(j));const{prefix:H,scalar:B,pointBytes:A}=m(F),I=v(W.context,H,j),D=i.multiply(I).toBytes(),z=v(W.context,D,A,j),G=o.create(I+z*B);if(!o.isValid(G))throw new Error("sign failed: invalid s");const te=yc(D,o.toBytes(G));return Sl(te,k.signature,"result")}const b={zip215:!0};function E(j,F,W,H=b){const{context:B,zip215:A}=H,I=k.signature;j=qr("signature",j,I),F=qr("message",F),W=qr("publicKey",W,k.publicKey),A!==void 0&&Cm(A,"zip215"),r&&(F=r(F));const D=I/2,z=j.subarray(0,D),G=r1(j.subarray(D,I));let te,K,q;try{te=t.fromBytes(W,A),K=t.fromBytes(z,A),q=i.multiplyUnsafe(G)}catch{return!1}if(!A&&te.isSmallOrder())return!1;const M=v(B,K.toBytes(),te.toBytes(),F);return K.add(te.multiplyUnsafe(M)).subtract(q).clearCofactor().is0()}const C=s.BYTES,k={secretKey:C,publicKey:C,signature:2*C,seed:C};function O(j=a(k.seed)){return Sl(j,k.seed,"seed")}function U(j){const F=V.randomSecretKey(j);return{secretKey:F,publicKey:g(F)}}function R(j){return pE(j)&&j.length===o.BYTES}function $(j,F){try{return!!t.fromBytes(j,F)}catch{return!1}}const V={getExtendedPublicKey:m,randomSecretKey:O,isValidSecretKey:R,isValidPublicKey:$,toMontgomery(j){const{y:F}=t.fromBytes(j),W=k.publicKey,H=W===32;if(!H&&W!==57)throw new Error("only defined for 25519 and 448");const B=H?s.div(Ri+F,Ri-F):s.div(F-Ri,F+Ri);return s.toBytes(B)},toMontgomerySecret(j){const F=k.secretKey;Sl(j,F);const W=e(j.subarray(0,F));return l(W).subarray(0,F)},randomPrivateKey:O,precompute(j=8,F=t.BASE){return F.precompute(j,!1)}};return Object.freeze({keygen:U,getPublicKey:g,sign:x,verify:E,utils:V,Point:t,lengths:k})}function iut(t){const e={a:t.a,d:t.d,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,r=Gm(e.n,t.nBitLength,!0),i={Fp:n,Fn:r,uvRatio:t.uvRatio},s={randomBytes:t.randomBytes,adjustScalarBytes:t.adjustScalarBytes,domain:t.domain,prehash:t.prehash,mapToCurve:t.mapToCurve};return{CURVE:e,curveOpts:i,hash:t.hash,eddsaOpts:s}}function sut(t,e){const n=e.Point;return Object.assign({},e,{ExtendedPoint:n,CURVE:t,nBitLength:n.Fn.BITS,nByteLength:n.Fn.BYTES})}function out(t){const{CURVE:e,curveOpts:n,hash:r,eddsaOpts:i}=iut(t),s=nut(e,n),o=rut(s,r,i);return sut(t,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const aut=BigInt(1),fZ=BigInt(2);BigInt(3);const lut=BigInt(5),cut=BigInt(8),VB=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),ime={p:VB,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:cut,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function uut(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),i=BigInt(80),s=VB,a=t*t%s*t%s,l=$r(a,fZ,s)*a%s,c=$r(l,aut,s)*t%s,u=$r(c,lut,s)*c%s,f=$r(u,e,s)*u%s,m=$r(f,n,s)*f%s,g=$r(m,r,s)*m%s,v=$r(g,i,s)*g%s,x=$r(v,i,s)*g%s,b=$r(x,e,s)*u%s;return{pow_p_5_8:$r(b,fZ,s)*t%s,b2:a}}function dut(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const hZ=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function fut(t,e){const n=VB,r=hi(e*e*e,n),i=hi(r*r*e,n),s=uut(t*i).pow_p_5_8;let o=hi(t*r*s,n);const a=hi(e*o*o,n),l=o,c=hi(o*hZ,n),u=a===t,f=a===hi(-t,n),m=a===hi(-t*hZ,n);return u&&(o=l),(f||m)&&(o=c),Gct(o,n)&&(o=hi(-o,n)),{isValid:u||f,value:o}}const hut=Gm(ime.p,{isLE:!0}),put={...ime,Fp:hut,hash:Bct,adjustScalarBytes:dut,uvRatio:fut},uv=out(put);var NT={exports:{}},h3={},pZ;function qB(){return pZ||(pZ=1,(function(t){Object.defineProperties(t,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var e={},n={};n.byteLength=u,n.toByteArray=m,n.fromByteArray=x;for(var r=[],i=[],s=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,l=o.length;a<l;++a)r[a]=o[a],i[o.charCodeAt(a)]=a;i[45]=62,i[95]=63;function c(C){var k=C.length;if(k%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var O=C.indexOf("=");O===-1&&(O=k);var U=O===k?0:4-O%4;return[O,U]}function u(C){var k=c(C),O=k[0],U=k[1];return(O+U)*3/4-U}function f(C,k,O){return(k+O)*3/4-O}function m(C){var k,O=c(C),U=O[0],R=O[1],$=new s(f(C,U,R)),V=0,j=R>0?U-4:U,F;for(F=0;F<j;F+=4)k=i[C.charCodeAt(F)]<<18|i[C.charCodeAt(F+1)]<<12|i[C.charCodeAt(F+2)]<<6|i[C.charCodeAt(F+3)],$[V++]=k>>16&255,$[V++]=k>>8&255,$[V++]=k&255;return R===2&&(k=i[C.charCodeAt(F)]<<2|i[C.charCodeAt(F+1)]>>4,$[V++]=k&255),R===1&&(k=i[C.charCodeAt(F)]<<10|i[C.charCodeAt(F+1)]<<4|i[C.charCodeAt(F+2)]>>2,$[V++]=k>>8&255,$[V++]=k&255),$}function g(C){return r[C>>18&63]+r[C>>12&63]+r[C>>6&63]+r[C&63]}function v(C,k,O){for(var U,R=[],$=k;$<O;$+=3)U=(C[$]<<16&16711680)+(C[$+1]<<8&65280)+(C[$+2]&255),R.push(g(U));return R.join("")}function x(C){for(var k,O=C.length,U=O%3,R=[],$=16383,V=0,j=O-U;V<j;V+=$)R.push(v(C,V,V+$>j?j:V+$));return U===1?(k=C[O-1],R.push(r[k>>2]+r[k<<4&63]+"==")):U===2&&(k=(C[O-2]<<8)+C[O-1],R.push(r[k>>10]+r[k>>4&63]+r[k<<2&63]+"=")),R.join("")}var b={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */b.read=function(C,k,O,U,R){var $,V,j=R*8-U-1,F=(1<<j)-1,W=F>>1,H=-7,B=O?R-1:0,A=O?-1:1,I=C[k+B];for(B+=A,$=I&(1<<-H)-1,I>>=-H,H+=j;H>0;$=$*256+C[k+B],B+=A,H-=8);for(V=$&(1<<-H)-1,$>>=-H,H+=U;H>0;V=V*256+C[k+B],B+=A,H-=8);if($===0)$=1-W;else{if($===F)return V?NaN:(I?-1:1)*(1/0);V=V+Math.pow(2,U),$=$-W}return(I?-1:1)*V*Math.pow(2,$-U)},b.write=function(C,k,O,U,R,$){var V,j,F,W=$*8-R-1,H=(1<<W)-1,B=H>>1,A=R===23?Math.pow(2,-24)-Math.pow(2,-77):0,I=U?0:$-1,D=U?1:-1,z=k<0||k===0&&1/k<0?1:0;for(k=Math.abs(k),isNaN(k)||k===1/0?(j=isNaN(k)?1:0,V=H):(V=Math.floor(Math.log(k)/Math.LN2),k*(F=Math.pow(2,-V))<1&&(V--,F*=2),V+B>=1?k+=A/F:k+=A*Math.pow(2,1-B),k*F>=2&&(V++,F/=2),V+B>=H?(j=0,V=H):V+B>=1?(j=(k*F-1)*Math.pow(2,R),V=V+B):(j=k*Math.pow(2,B-1)*Math.pow(2,R),V=0));R>=8;C[O+I]=j&255,I+=D,j/=256,R-=8);for(V=V<<R|j,W+=R;W>0;C[O+I]=V&255,I+=D,V/=256,W-=8);C[O+I-D]|=z*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(C){const k=n,O=b,U=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;C.Buffer=H,C.SlowBuffer=_,C.INSPECT_MAX_BYTES=50;const R=2147483647;C.kMaxLength=R;const{Uint8Array:$,ArrayBuffer:V,SharedArrayBuffer:j}=globalThis;H.TYPED_ARRAY_SUPPORT=F(),!H.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function F(){try{const ae=new $(1),Q={foo:function(){return 42}};return Object.setPrototypeOf(Q,$.prototype),Object.setPrototypeOf(ae,Q),ae.foo()===42}catch{return!1}}Object.defineProperty(H.prototype,"parent",{enumerable:!0,get:function(){if(H.isBuffer(this))return this.buffer}}),Object.defineProperty(H.prototype,"offset",{enumerable:!0,get:function(){if(H.isBuffer(this))return this.byteOffset}});function W(ae){if(ae>R)throw new RangeError('The value "'+ae+'" is invalid for option "size"');const Q=new $(ae);return Object.setPrototypeOf(Q,H.prototype),Q}function H(ae,Q,ee){if(typeof ae=="number"){if(typeof Q=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return D(ae)}return B(ae,Q,ee)}H.poolSize=8192;function B(ae,Q,ee){if(typeof ae=="string")return z(ae,Q);if(V.isView(ae))return te(ae);if(ae==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ae);if(cn(ae,V)||ae&&cn(ae.buffer,V)||typeof j<"u"&&(cn(ae,j)||ae&&cn(ae.buffer,j)))return K(ae,Q,ee);if(typeof ae=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const pe=ae.valueOf&&ae.valueOf();if(pe!=null&&pe!==ae)return H.from(pe,Q,ee);const ke=q(ae);if(ke)return ke;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ae[Symbol.toPrimitive]=="function")return H.from(ae[Symbol.toPrimitive]("string"),Q,ee);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ae)}H.from=function(ae,Q,ee){return B(ae,Q,ee)},Object.setPrototypeOf(H.prototype,$.prototype),Object.setPrototypeOf(H,$);function A(ae){if(typeof ae!="number")throw new TypeError('"size" argument must be of type number');if(ae<0)throw new RangeError('The value "'+ae+'" is invalid for option "size"')}function I(ae,Q,ee){return A(ae),ae<=0?W(ae):Q!==void 0?typeof ee=="string"?W(ae).fill(Q,ee):W(ae).fill(Q):W(ae)}H.alloc=function(ae,Q,ee){return I(ae,Q,ee)};function D(ae){return A(ae),W(ae<0?0:M(ae)|0)}H.allocUnsafe=function(ae){return D(ae)},H.allocUnsafeSlow=function(ae){return D(ae)};function z(ae,Q){if((typeof Q!="string"||Q==="")&&(Q="utf8"),!H.isEncoding(Q))throw new TypeError("Unknown encoding: "+Q);const ee=Y(ae,Q)|0;let pe=W(ee);const ke=pe.write(ae,Q);return ke!==ee&&(pe=pe.slice(0,ke)),pe}function G(ae){const Q=ae.length<0?0:M(ae.length)|0,ee=W(Q);for(let pe=0;pe<Q;pe+=1)ee[pe]=ae[pe]&255;return ee}function te(ae){if(cn(ae,$)){const Q=new $(ae);return K(Q.buffer,Q.byteOffset,Q.byteLength)}return G(ae)}function K(ae,Q,ee){if(Q<0||ae.byteLength<Q)throw new RangeError('"offset" is outside of buffer bounds');if(ae.byteLength<Q+(ee||0))throw new RangeError('"length" is outside of buffer bounds');let pe;return Q===void 0&&ee===void 0?pe=new $(ae):ee===void 0?pe=new $(ae,Q):pe=new $(ae,Q,ee),Object.setPrototypeOf(pe,H.prototype),pe}function q(ae){if(H.isBuffer(ae)){const Q=M(ae.length)|0,ee=W(Q);return ee.length===0||ae.copy(ee,0,0,Q),ee}if(ae.length!==void 0)return typeof ae.length!="number"||en(ae.length)?W(0):G(ae);if(ae.type==="Buffer"&&Array.isArray(ae.data))return G(ae.data)}function M(ae){if(ae>=R)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+R.toString(16)+" bytes");return ae|0}function _(ae){return+ae!=ae&&(ae=0),H.alloc(+ae)}H.isBuffer=function(Q){return Q!=null&&Q._isBuffer===!0&&Q!==H.prototype},H.compare=function(Q,ee){if(cn(Q,$)&&(Q=H.from(Q,Q.offset,Q.byteLength)),cn(ee,$)&&(ee=H.from(ee,ee.offset,ee.byteLength)),!H.isBuffer(Q)||!H.isBuffer(ee))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(Q===ee)return 0;let pe=Q.length,ke=ee.length;for(let Re=0,ze=Math.min(pe,ke);Re<ze;++Re)if(Q[Re]!==ee[Re]){pe=Q[Re],ke=ee[Re];break}return pe<ke?-1:ke<pe?1:0},H.isEncoding=function(Q){switch(String(Q).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},H.concat=function(Q,ee){if(!Array.isArray(Q))throw new TypeError('"list" argument must be an Array of Buffers');if(Q.length===0)return H.alloc(0);let pe;if(ee===void 0)for(ee=0,pe=0;pe<Q.length;++pe)ee+=Q[pe].length;const ke=H.allocUnsafe(ee);let Re=0;for(pe=0;pe<Q.length;++pe){let ze=Q[pe];if(cn(ze,$))Re+ze.length>ke.length?(H.isBuffer(ze)||(ze=H.from(ze)),ze.copy(ke,Re)):$.prototype.set.call(ke,ze,Re);else if(H.isBuffer(ze))ze.copy(ke,Re);else throw new TypeError('"list" argument must be an Array of Buffers');Re+=ze.length}return ke};function Y(ae,Q){if(H.isBuffer(ae))return ae.length;if(V.isView(ae)||cn(ae,V))return ae.byteLength;if(typeof ae!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ae);const ee=ae.length,pe=arguments.length>2&&arguments[2]===!0;if(!pe&&ee===0)return 0;let ke=!1;for(;;)switch(Q){case"ascii":case"latin1":case"binary":return ee;case"utf8":case"utf-8":return et(ae).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ee*2;case"hex":return ee>>>1;case"base64":return vt(ae).length;default:if(ke)return pe?-1:et(ae).length;Q=(""+Q).toLowerCase(),ke=!0}}H.byteLength=Y;function X(ae,Q,ee){let pe=!1;if((Q===void 0||Q<0)&&(Q=0),Q>this.length||((ee===void 0||ee>this.length)&&(ee=this.length),ee<=0)||(ee>>>=0,Q>>>=0,ee<=Q))return"";for(ae||(ae="utf8");;)switch(ae){case"hex":return ot(this,Q,ee);case"utf8":case"utf-8":return $e(this,Q,ee);case"ascii":return We(this,Q,ee);case"latin1":case"binary":return At(this,Q,ee);case"base64":return Ne(this,Q,ee);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Bt(this,Q,ee);default:if(pe)throw new TypeError("Unknown encoding: "+ae);ae=(ae+"").toLowerCase(),pe=!0}}H.prototype._isBuffer=!0;function re(ae,Q,ee){const pe=ae[Q];ae[Q]=ae[ee],ae[ee]=pe}H.prototype.swap16=function(){const Q=this.length;if(Q%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let ee=0;ee<Q;ee+=2)re(this,ee,ee+1);return this},H.prototype.swap32=function(){const Q=this.length;if(Q%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let ee=0;ee<Q;ee+=4)re(this,ee,ee+3),re(this,ee+1,ee+2);return this},H.prototype.swap64=function(){const Q=this.length;if(Q%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let ee=0;ee<Q;ee+=8)re(this,ee,ee+7),re(this,ee+1,ee+6),re(this,ee+2,ee+5),re(this,ee+3,ee+4);return this},H.prototype.toString=function(){const Q=this.length;return Q===0?"":arguments.length===0?$e(this,0,Q):X.apply(this,arguments)},H.prototype.toLocaleString=H.prototype.toString,H.prototype.equals=function(Q){if(!H.isBuffer(Q))throw new TypeError("Argument must be a Buffer");return this===Q?!0:H.compare(this,Q)===0},H.prototype.inspect=function(){let Q="";const ee=C.INSPECT_MAX_BYTES;return Q=this.toString("hex",0,ee).replace(/(.{2})/g,"$1 ").trim(),this.length>ee&&(Q+=" ... "),"<Buffer "+Q+">"},U&&(H.prototype[U]=H.prototype.inspect),H.prototype.compare=function(Q,ee,pe,ke,Re){if(cn(Q,$)&&(Q=H.from(Q,Q.offset,Q.byteLength)),!H.isBuffer(Q))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof Q);if(ee===void 0&&(ee=0),pe===void 0&&(pe=Q?Q.length:0),ke===void 0&&(ke=0),Re===void 0&&(Re=this.length),ee<0||pe>Q.length||ke<0||Re>this.length)throw new RangeError("out of range index");if(ke>=Re&&ee>=pe)return 0;if(ke>=Re)return-1;if(ee>=pe)return 1;if(ee>>>=0,pe>>>=0,ke>>>=0,Re>>>=0,this===Q)return 0;let ze=Re-ke,Jt=pe-ee;const $t=Math.min(ze,Jt),it=this.slice(ke,Re),mn=Q.slice(ee,pe);for(let yt=0;yt<$t;++yt)if(it[yt]!==mn[yt]){ze=it[yt],Jt=mn[yt];break}return ze<Jt?-1:Jt<ze?1:0};function oe(ae,Q,ee,pe,ke){if(ae.length===0)return-1;if(typeof ee=="string"?(pe=ee,ee=0):ee>2147483647?ee=2147483647:ee<-2147483648&&(ee=-2147483648),ee=+ee,en(ee)&&(ee=ke?0:ae.length-1),ee<0&&(ee=ae.length+ee),ee>=ae.length){if(ke)return-1;ee=ae.length-1}else if(ee<0)if(ke)ee=0;else return-1;if(typeof Q=="string"&&(Q=H.from(Q,pe)),H.isBuffer(Q))return Q.length===0?-1:Ee(ae,Q,ee,pe,ke);if(typeof Q=="number")return Q=Q&255,typeof $.prototype.indexOf=="function"?ke?$.prototype.indexOf.call(ae,Q,ee):$.prototype.lastIndexOf.call(ae,Q,ee):Ee(ae,[Q],ee,pe,ke);throw new TypeError("val must be string, number or Buffer")}function Ee(ae,Q,ee,pe,ke){let Re=1,ze=ae.length,Jt=Q.length;if(pe!==void 0&&(pe=String(pe).toLowerCase(),pe==="ucs2"||pe==="ucs-2"||pe==="utf16le"||pe==="utf-16le")){if(ae.length<2||Q.length<2)return-1;Re=2,ze/=2,Jt/=2,ee/=2}function $t(mn,yt){return Re===1?mn[yt]:mn.readUInt16BE(yt*Re)}let it;if(ke){let mn=-1;for(it=ee;it<ze;it++)if($t(ae,it)===$t(Q,mn===-1?0:it-mn)){if(mn===-1&&(mn=it),it-mn+1===Jt)return mn*Re}else mn!==-1&&(it-=it-mn),mn=-1}else for(ee+Jt>ze&&(ee=ze-Jt),it=ee;it>=0;it--){let mn=!0;for(let yt=0;yt<Jt;yt++)if($t(ae,it+yt)!==$t(Q,yt)){mn=!1;break}if(mn)return it}return-1}H.prototype.includes=function(Q,ee,pe){return this.indexOf(Q,ee,pe)!==-1},H.prototype.indexOf=function(Q,ee,pe){return oe(this,Q,ee,pe,!0)},H.prototype.lastIndexOf=function(Q,ee,pe){return oe(this,Q,ee,pe,!1)};function ce(ae,Q,ee,pe){ee=Number(ee)||0;const ke=ae.length-ee;pe?(pe=Number(pe),pe>ke&&(pe=ke)):pe=ke;const Re=Q.length;pe>Re/2&&(pe=Re/2);let ze;for(ze=0;ze<pe;++ze){const Jt=parseInt(Q.substr(ze*2,2),16);if(en(Jt))return ze;ae[ee+ze]=Jt}return ze}function me(ae,Q,ee,pe){return Ot(et(Q,ae.length-ee),ae,ee,pe)}function ue(ae,Q,ee,pe){return Ot(st(Q),ae,ee,pe)}function le(ae,Q,ee,pe){return Ot(vt(Q),ae,ee,pe)}function Ie(ae,Q,ee,pe){return Ot(Ft(Q,ae.length-ee),ae,ee,pe)}H.prototype.write=function(Q,ee,pe,ke){if(ee===void 0)ke="utf8",pe=this.length,ee=0;else if(pe===void 0&&typeof ee=="string")ke=ee,pe=this.length,ee=0;else if(isFinite(ee))ee=ee>>>0,isFinite(pe)?(pe=pe>>>0,ke===void 0&&(ke="utf8")):(ke=pe,pe=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Re=this.length-ee;if((pe===void 0||pe>Re)&&(pe=Re),Q.length>0&&(pe<0||ee<0)||ee>this.length)throw new RangeError("Attempt to write outside buffer bounds");ke||(ke="utf8");let ze=!1;for(;;)switch(ke){case"hex":return ce(this,Q,ee,pe);case"utf8":case"utf-8":return me(this,Q,ee,pe);case"ascii":case"latin1":case"binary":return ue(this,Q,ee,pe);case"base64":return le(this,Q,ee,pe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ie(this,Q,ee,pe);default:if(ze)throw new TypeError("Unknown encoding: "+ke);ke=(""+ke).toLowerCase(),ze=!0}},H.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Ne(ae,Q,ee){return Q===0&&ee===ae.length?k.fromByteArray(ae):k.fromByteArray(ae.slice(Q,ee))}function $e(ae,Q,ee){ee=Math.min(ae.length,ee);const pe=[];let ke=Q;for(;ke<ee;){const Re=ae[ke];let ze=null,Jt=Re>239?4:Re>223?3:Re>191?2:1;if(ke+Jt<=ee){let $t,it,mn,yt;switch(Jt){case 1:Re<128&&(ze=Re);break;case 2:$t=ae[ke+1],($t&192)===128&&(yt=(Re&31)<<6|$t&63,yt>127&&(ze=yt));break;case 3:$t=ae[ke+1],it=ae[ke+2],($t&192)===128&&(it&192)===128&&(yt=(Re&15)<<12|($t&63)<<6|it&63,yt>2047&&(yt<55296||yt>57343)&&(ze=yt));break;case 4:$t=ae[ke+1],it=ae[ke+2],mn=ae[ke+3],($t&192)===128&&(it&192)===128&&(mn&192)===128&&(yt=(Re&15)<<18|($t&63)<<12|(it&63)<<6|mn&63,yt>65535&&yt<1114112&&(ze=yt))}}ze===null?(ze=65533,Jt=1):ze>65535&&(ze-=65536,pe.push(ze>>>10&1023|55296),ze=56320|ze&1023),pe.push(ze),ke+=Jt}return Ye(pe)}const Ze=4096;function Ye(ae){const Q=ae.length;if(Q<=Ze)return String.fromCharCode.apply(String,ae);let ee="",pe=0;for(;pe<Q;)ee+=String.fromCharCode.apply(String,ae.slice(pe,pe+=Ze));return ee}function We(ae,Q,ee){let pe="";ee=Math.min(ae.length,ee);for(let ke=Q;ke<ee;++ke)pe+=String.fromCharCode(ae[ke]&127);return pe}function At(ae,Q,ee){let pe="";ee=Math.min(ae.length,ee);for(let ke=Q;ke<ee;++ke)pe+=String.fromCharCode(ae[ke]);return pe}function ot(ae,Q,ee){const pe=ae.length;(!Q||Q<0)&&(Q=0),(!ee||ee<0||ee>pe)&&(ee=pe);let ke="";for(let Re=Q;Re<ee;++Re)ke+=rn[ae[Re]];return ke}function Bt(ae,Q,ee){const pe=ae.slice(Q,ee);let ke="";for(let Re=0;Re<pe.length-1;Re+=2)ke+=String.fromCharCode(pe[Re]+pe[Re+1]*256);return ke}H.prototype.slice=function(Q,ee){const pe=this.length;Q=~~Q,ee=ee===void 0?pe:~~ee,Q<0?(Q+=pe,Q<0&&(Q=0)):Q>pe&&(Q=pe),ee<0?(ee+=pe,ee<0&&(ee=0)):ee>pe&&(ee=pe),ee<Q&&(ee=Q);const ke=this.subarray(Q,ee);return Object.setPrototypeOf(ke,H.prototype),ke};function Zt(ae,Q,ee){if(ae%1!==0||ae<0)throw new RangeError("offset is not uint");if(ae+Q>ee)throw new RangeError("Trying to access beyond buffer length")}H.prototype.readUintLE=H.prototype.readUIntLE=function(Q,ee,pe){Q=Q>>>0,ee=ee>>>0,pe||Zt(Q,ee,this.length);let ke=this[Q],Re=1,ze=0;for(;++ze<ee&&(Re*=256);)ke+=this[Q+ze]*Re;return ke},H.prototype.readUintBE=H.prototype.readUIntBE=function(Q,ee,pe){Q=Q>>>0,ee=ee>>>0,pe||Zt(Q,ee,this.length);let ke=this[Q+--ee],Re=1;for(;ee>0&&(Re*=256);)ke+=this[Q+--ee]*Re;return ke},H.prototype.readUint8=H.prototype.readUInt8=function(Q,ee){return Q=Q>>>0,ee||Zt(Q,1,this.length),this[Q]},H.prototype.readUint16LE=H.prototype.readUInt16LE=function(Q,ee){return Q=Q>>>0,ee||Zt(Q,2,this.length),this[Q]|this[Q+1]<<8},H.prototype.readUint16BE=H.prototype.readUInt16BE=function(Q,ee){return Q=Q>>>0,ee||Zt(Q,2,this.length),this[Q]<<8|this[Q+1]},H.prototype.readUint32LE=H.prototype.readUInt32LE=function(Q,ee){return Q=Q>>>0,ee||Zt(Q,4,this.length),(this[Q]|this[Q+1]<<8|this[Q+2]<<16)+this[Q+3]*16777216},H.prototype.readUint32BE=H.prototype.readUInt32BE=function(Q,ee){return Q=Q>>>0,ee||Zt(Q,4,this.length),this[Q]*16777216+(this[Q+1]<<16|this[Q+2]<<8|this[Q+3])},H.prototype.readBigUInt64LE=Ci(function(Q){Q=Q>>>0,be(Q,"offset");const ee=this[Q],pe=this[Q+7];(ee===void 0||pe===void 0)&&he(Q,this.length-8);const ke=ee+this[++Q]*2**8+this[++Q]*2**16+this[++Q]*2**24,Re=this[++Q]+this[++Q]*2**8+this[++Q]*2**16+pe*2**24;return BigInt(ke)+(BigInt(Re)<<BigInt(32))}),H.prototype.readBigUInt64BE=Ci(function(Q){Q=Q>>>0,be(Q,"offset");const ee=this[Q],pe=this[Q+7];(ee===void 0||pe===void 0)&&he(Q,this.length-8);const ke=ee*2**24+this[++Q]*2**16+this[++Q]*2**8+this[++Q],Re=this[++Q]*2**24+this[++Q]*2**16+this[++Q]*2**8+pe;return(BigInt(ke)<<BigInt(32))+BigInt(Re)}),H.prototype.readIntLE=function(Q,ee,pe){Q=Q>>>0,ee=ee>>>0,pe||Zt(Q,ee,this.length);let ke=this[Q],Re=1,ze=0;for(;++ze<ee&&(Re*=256);)ke+=this[Q+ze]*Re;return Re*=128,ke>=Re&&(ke-=Math.pow(2,8*ee)),ke},H.prototype.readIntBE=function(Q,ee,pe){Q=Q>>>0,ee=ee>>>0,pe||Zt(Q,ee,this.length);let ke=ee,Re=1,ze=this[Q+--ke];for(;ke>0&&(Re*=256);)ze+=this[Q+--ke]*Re;return Re*=128,ze>=Re&&(ze-=Math.pow(2,8*ee)),ze},H.prototype.readInt8=function(Q,ee){return Q=Q>>>0,ee||Zt(Q,1,this.length),this[Q]&128?(255-this[Q]+1)*-1:this[Q]},H.prototype.readInt16LE=function(Q,ee){Q=Q>>>0,ee||Zt(Q,2,this.length);const pe=this[Q]|this[Q+1]<<8;return pe&32768?pe|4294901760:pe},H.prototype.readInt16BE=function(Q,ee){Q=Q>>>0,ee||Zt(Q,2,this.length);const pe=this[Q+1]|this[Q]<<8;return pe&32768?pe|4294901760:pe},H.prototype.readInt32LE=function(Q,ee){return Q=Q>>>0,ee||Zt(Q,4,this.length),this[Q]|this[Q+1]<<8|this[Q+2]<<16|this[Q+3]<<24},H.prototype.readInt32BE=function(Q,ee){return Q=Q>>>0,ee||Zt(Q,4,this.length),this[Q]<<24|this[Q+1]<<16|this[Q+2]<<8|this[Q+3]},H.prototype.readBigInt64LE=Ci(function(Q){Q=Q>>>0,be(Q,"offset");const ee=this[Q],pe=this[Q+7];(ee===void 0||pe===void 0)&&he(Q,this.length-8);const ke=this[Q+4]+this[Q+5]*2**8+this[Q+6]*2**16+(pe<<24);return(BigInt(ke)<<BigInt(32))+BigInt(ee+this[++Q]*2**8+this[++Q]*2**16+this[++Q]*2**24)}),H.prototype.readBigInt64BE=Ci(function(Q){Q=Q>>>0,be(Q,"offset");const ee=this[Q],pe=this[Q+7];(ee===void 0||pe===void 0)&&he(Q,this.length-8);const ke=(ee<<24)+this[++Q]*2**16+this[++Q]*2**8+this[++Q];return(BigInt(ke)<<BigInt(32))+BigInt(this[++Q]*2**24+this[++Q]*2**16+this[++Q]*2**8+pe)}),H.prototype.readFloatLE=function(Q,ee){return Q=Q>>>0,ee||Zt(Q,4,this.length),O.read(this,Q,!0,23,4)},H.prototype.readFloatBE=function(Q,ee){return Q=Q>>>0,ee||Zt(Q,4,this.length),O.read(this,Q,!1,23,4)},H.prototype.readDoubleLE=function(Q,ee){return Q=Q>>>0,ee||Zt(Q,8,this.length),O.read(this,Q,!0,52,8)},H.prototype.readDoubleBE=function(Q,ee){return Q=Q>>>0,ee||Zt(Q,8,this.length),O.read(this,Q,!1,52,8)};function Ge(ae,Q,ee,pe,ke,Re){if(!H.isBuffer(ae))throw new TypeError('"buffer" argument must be a Buffer instance');if(Q>ke||Q<Re)throw new RangeError('"value" argument is out of bounds');if(ee+pe>ae.length)throw new RangeError("Index out of range")}H.prototype.writeUintLE=H.prototype.writeUIntLE=function(Q,ee,pe,ke){if(Q=+Q,ee=ee>>>0,pe=pe>>>0,!ke){const Jt=Math.pow(2,8*pe)-1;Ge(this,Q,ee,pe,Jt,0)}let Re=1,ze=0;for(this[ee]=Q&255;++ze<pe&&(Re*=256);)this[ee+ze]=Q/Re&255;return ee+pe},H.prototype.writeUintBE=H.prototype.writeUIntBE=function(Q,ee,pe,ke){if(Q=+Q,ee=ee>>>0,pe=pe>>>0,!ke){const Jt=Math.pow(2,8*pe)-1;Ge(this,Q,ee,pe,Jt,0)}let Re=pe-1,ze=1;for(this[ee+Re]=Q&255;--Re>=0&&(ze*=256);)this[ee+Re]=Q/ze&255;return ee+pe},H.prototype.writeUint8=H.prototype.writeUInt8=function(Q,ee,pe){return Q=+Q,ee=ee>>>0,pe||Ge(this,Q,ee,1,255,0),this[ee]=Q&255,ee+1},H.prototype.writeUint16LE=H.prototype.writeUInt16LE=function(Q,ee,pe){return Q=+Q,ee=ee>>>0,pe||Ge(this,Q,ee,2,65535,0),this[ee]=Q&255,this[ee+1]=Q>>>8,ee+2},H.prototype.writeUint16BE=H.prototype.writeUInt16BE=function(Q,ee,pe){return Q=+Q,ee=ee>>>0,pe||Ge(this,Q,ee,2,65535,0),this[ee]=Q>>>8,this[ee+1]=Q&255,ee+2},H.prototype.writeUint32LE=H.prototype.writeUInt32LE=function(Q,ee,pe){return Q=+Q,ee=ee>>>0,pe||Ge(this,Q,ee,4,4294967295,0),this[ee+3]=Q>>>24,this[ee+2]=Q>>>16,this[ee+1]=Q>>>8,this[ee]=Q&255,ee+4},H.prototype.writeUint32BE=H.prototype.writeUInt32BE=function(Q,ee,pe){return Q=+Q,ee=ee>>>0,pe||Ge(this,Q,ee,4,4294967295,0),this[ee]=Q>>>24,this[ee+1]=Q>>>16,this[ee+2]=Q>>>8,this[ee+3]=Q&255,ee+4};function Tt(ae,Q,ee,pe,ke){fe(Q,pe,ke,ae,ee,7);let Re=Number(Q&BigInt(4294967295));ae[ee++]=Re,Re=Re>>8,ae[ee++]=Re,Re=Re>>8,ae[ee++]=Re,Re=Re>>8,ae[ee++]=Re;let ze=Number(Q>>BigInt(32)&BigInt(4294967295));return ae[ee++]=ze,ze=ze>>8,ae[ee++]=ze,ze=ze>>8,ae[ee++]=ze,ze=ze>>8,ae[ee++]=ze,ee}function ln(ae,Q,ee,pe,ke){fe(Q,pe,ke,ae,ee,7);let Re=Number(Q&BigInt(4294967295));ae[ee+7]=Re,Re=Re>>8,ae[ee+6]=Re,Re=Re>>8,ae[ee+5]=Re,Re=Re>>8,ae[ee+4]=Re;let ze=Number(Q>>BigInt(32)&BigInt(4294967295));return ae[ee+3]=ze,ze=ze>>8,ae[ee+2]=ze,ze=ze>>8,ae[ee+1]=ze,ze=ze>>8,ae[ee]=ze,ee+8}H.prototype.writeBigUInt64LE=Ci(function(Q,ee=0){return Tt(this,Q,ee,BigInt(0),BigInt("0xffffffffffffffff"))}),H.prototype.writeBigUInt64BE=Ci(function(Q,ee=0){return ln(this,Q,ee,BigInt(0),BigInt("0xffffffffffffffff"))}),H.prototype.writeIntLE=function(Q,ee,pe,ke){if(Q=+Q,ee=ee>>>0,!ke){const $t=Math.pow(2,8*pe-1);Ge(this,Q,ee,pe,$t-1,-$t)}let Re=0,ze=1,Jt=0;for(this[ee]=Q&255;++Re<pe&&(ze*=256);)Q<0&&Jt===0&&this[ee+Re-1]!==0&&(Jt=1),this[ee+Re]=(Q/ze>>0)-Jt&255;return ee+pe},H.prototype.writeIntBE=function(Q,ee,pe,ke){if(Q=+Q,ee=ee>>>0,!ke){const $t=Math.pow(2,8*pe-1);Ge(this,Q,ee,pe,$t-1,-$t)}let Re=pe-1,ze=1,Jt=0;for(this[ee+Re]=Q&255;--Re>=0&&(ze*=256);)Q<0&&Jt===0&&this[ee+Re+1]!==0&&(Jt=1),this[ee+Re]=(Q/ze>>0)-Jt&255;return ee+pe},H.prototype.writeInt8=function(Q,ee,pe){return Q=+Q,ee=ee>>>0,pe||Ge(this,Q,ee,1,127,-128),Q<0&&(Q=255+Q+1),this[ee]=Q&255,ee+1},H.prototype.writeInt16LE=function(Q,ee,pe){return Q=+Q,ee=ee>>>0,pe||Ge(this,Q,ee,2,32767,-32768),this[ee]=Q&255,this[ee+1]=Q>>>8,ee+2},H.prototype.writeInt16BE=function(Q,ee,pe){return Q=+Q,ee=ee>>>0,pe||Ge(this,Q,ee,2,32767,-32768),this[ee]=Q>>>8,this[ee+1]=Q&255,ee+2},H.prototype.writeInt32LE=function(Q,ee,pe){return Q=+Q,ee=ee>>>0,pe||Ge(this,Q,ee,4,2147483647,-2147483648),this[ee]=Q&255,this[ee+1]=Q>>>8,this[ee+2]=Q>>>16,this[ee+3]=Q>>>24,ee+4},H.prototype.writeInt32BE=function(Q,ee,pe){return Q=+Q,ee=ee>>>0,pe||Ge(this,Q,ee,4,2147483647,-2147483648),Q<0&&(Q=4294967295+Q+1),this[ee]=Q>>>24,this[ee+1]=Q>>>16,this[ee+2]=Q>>>8,this[ee+3]=Q&255,ee+4},H.prototype.writeBigInt64LE=Ci(function(Q,ee=0){return Tt(this,Q,ee,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),H.prototype.writeBigInt64BE=Ci(function(Q,ee=0){return ln(this,Q,ee,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Pe(ae,Q,ee,pe,ke,Re){if(ee+pe>ae.length)throw new RangeError("Index out of range");if(ee<0)throw new RangeError("Index out of range")}function Ve(ae,Q,ee,pe,ke){return Q=+Q,ee=ee>>>0,ke||Pe(ae,Q,ee,4),O.write(ae,Q,ee,pe,23,4),ee+4}H.prototype.writeFloatLE=function(Q,ee,pe){return Ve(this,Q,ee,!0,pe)},H.prototype.writeFloatBE=function(Q,ee,pe){return Ve(this,Q,ee,!1,pe)};function ht(ae,Q,ee,pe,ke){return Q=+Q,ee=ee>>>0,ke||Pe(ae,Q,ee,8),O.write(ae,Q,ee,pe,52,8),ee+8}H.prototype.writeDoubleLE=function(Q,ee,pe){return ht(this,Q,ee,!0,pe)},H.prototype.writeDoubleBE=function(Q,ee,pe){return ht(this,Q,ee,!1,pe)},H.prototype.copy=function(Q,ee,pe,ke){if(!H.isBuffer(Q))throw new TypeError("argument should be a Buffer");if(pe||(pe=0),!ke&&ke!==0&&(ke=this.length),ee>=Q.length&&(ee=Q.length),ee||(ee=0),ke>0&&ke<pe&&(ke=pe),ke===pe||Q.length===0||this.length===0)return 0;if(ee<0)throw new RangeError("targetStart out of bounds");if(pe<0||pe>=this.length)throw new RangeError("Index out of range");if(ke<0)throw new RangeError("sourceEnd out of bounds");ke>this.length&&(ke=this.length),Q.length-ee<ke-pe&&(ke=Q.length-ee+pe);const Re=ke-pe;return this===Q&&typeof $.prototype.copyWithin=="function"?this.copyWithin(ee,pe,ke):$.prototype.set.call(Q,this.subarray(pe,ke),ee),Re},H.prototype.fill=function(Q,ee,pe,ke){if(typeof Q=="string"){if(typeof ee=="string"?(ke=ee,ee=0,pe=this.length):typeof pe=="string"&&(ke=pe,pe=this.length),ke!==void 0&&typeof ke!="string")throw new TypeError("encoding must be a string");if(typeof ke=="string"&&!H.isEncoding(ke))throw new TypeError("Unknown encoding: "+ke);if(Q.length===1){const ze=Q.charCodeAt(0);(ke==="utf8"&&ze<128||ke==="latin1")&&(Q=ze)}}else typeof Q=="number"?Q=Q&255:typeof Q=="boolean"&&(Q=Number(Q));if(ee<0||this.length<ee||this.length<pe)throw new RangeError("Out of range index");if(pe<=ee)return this;ee=ee>>>0,pe=pe===void 0?this.length:pe>>>0,Q||(Q=0);let Re;if(typeof Q=="number")for(Re=ee;Re<pe;++Re)this[Re]=Q;else{const ze=H.isBuffer(Q)?Q:H.from(Q,ke),Jt=ze.length;if(Jt===0)throw new TypeError('The value "'+Q+'" is invalid for argument "value"');for(Re=0;Re<pe-ee;++Re)this[Re+ee]=ze[Re%Jt]}return this};const ct={};function se(ae,Q,ee){ct[ae]=class extends ee{constructor(){super(),Object.defineProperty(this,"message",{value:Q.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${ae}]`,this.stack,delete this.name}get code(){return ae}set code(ke){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ke,writable:!0})}toString(){return`${this.name} [${ae}]: ${this.message}`}}}se("ERR_BUFFER_OUT_OF_BOUNDS",function(ae){return ae?`${ae} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),se("ERR_INVALID_ARG_TYPE",function(ae,Q){return`The "${ae}" argument must be of type number. Received type ${typeof Q}`},TypeError),se("ERR_OUT_OF_RANGE",function(ae,Q,ee){let pe=`The value of "${ae}" is out of range.`,ke=ee;return Number.isInteger(ee)&&Math.abs(ee)>2**32?ke=J(String(ee)):typeof ee=="bigint"&&(ke=String(ee),(ee>BigInt(2)**BigInt(32)||ee<-(BigInt(2)**BigInt(32)))&&(ke=J(ke)),ke+="n"),pe+=` It must be ${Q}. Received ${ke}`,pe},RangeError);function J(ae){let Q="",ee=ae.length;const pe=ae[0]==="-"?1:0;for(;ee>=pe+4;ee-=3)Q=`_${ae.slice(ee-3,ee)}${Q}`;return`${ae.slice(0,ee)}${Q}`}function Z(ae,Q,ee){be(Q,"offset"),(ae[Q]===void 0||ae[Q+ee]===void 0)&&he(Q,ae.length-(ee+1))}function fe(ae,Q,ee,pe,ke,Re){if(ae>ee||ae<Q){const ze=typeof Q=="bigint"?"n":"";let Jt;throw Q===0||Q===BigInt(0)?Jt=`>= 0${ze} and < 2${ze} ** ${(Re+1)*8}${ze}`:Jt=`>= -(2${ze} ** ${(Re+1)*8-1}${ze}) and < 2 ** ${(Re+1)*8-1}${ze}`,new ct.ERR_OUT_OF_RANGE("value",Jt,ae)}Z(pe,ke,Re)}function be(ae,Q){if(typeof ae!="number")throw new ct.ERR_INVALID_ARG_TYPE(Q,"number",ae)}function he(ae,Q,ee){throw Math.floor(ae)!==ae?(be(ae,ee),new ct.ERR_OUT_OF_RANGE("offset","an integer",ae)):Q<0?new ct.ERR_BUFFER_OUT_OF_BOUNDS:new ct.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${Q}`,ae)}const ye=/[^+/0-9A-Za-z-_]/g;function Xe(ae){if(ae=ae.split("=")[0],ae=ae.trim().replace(ye,""),ae.length<2)return"";for(;ae.length%4!==0;)ae=ae+"=";return ae}function et(ae,Q){Q=Q||1/0;let ee;const pe=ae.length;let ke=null;const Re=[];for(let ze=0;ze<pe;++ze){if(ee=ae.charCodeAt(ze),ee>55295&&ee<57344){if(!ke){if(ee>56319){(Q-=3)>-1&&Re.push(239,191,189);continue}else if(ze+1===pe){(Q-=3)>-1&&Re.push(239,191,189);continue}ke=ee;continue}if(ee<56320){(Q-=3)>-1&&Re.push(239,191,189),ke=ee;continue}ee=(ke-55296<<10|ee-56320)+65536}else ke&&(Q-=3)>-1&&Re.push(239,191,189);if(ke=null,ee<128){if((Q-=1)<0)break;Re.push(ee)}else if(ee<2048){if((Q-=2)<0)break;Re.push(ee>>6|192,ee&63|128)}else if(ee<65536){if((Q-=3)<0)break;Re.push(ee>>12|224,ee>>6&63|128,ee&63|128)}else if(ee<1114112){if((Q-=4)<0)break;Re.push(ee>>18|240,ee>>12&63|128,ee>>6&63|128,ee&63|128)}else throw new Error("Invalid code point")}return Re}function st(ae){const Q=[];for(let ee=0;ee<ae.length;++ee)Q.push(ae.charCodeAt(ee)&255);return Q}function Ft(ae,Q){let ee,pe,ke;const Re=[];for(let ze=0;ze<ae.length&&!((Q-=2)<0);++ze)ee=ae.charCodeAt(ze),pe=ee>>8,ke=ee%256,Re.push(ke),Re.push(pe);return Re}function vt(ae){return k.toByteArray(Xe(ae))}function Ot(ae,Q,ee,pe){let ke;for(ke=0;ke<pe&&!(ke+ee>=Q.length||ke>=ae.length);++ke)Q[ke+ee]=ae[ke];return ke}function cn(ae,Q){return ae instanceof Q||ae!=null&&ae.constructor!=null&&ae.constructor.name!=null&&ae.constructor.name===Q.name}function en(ae){return ae!==ae}const rn=(function(){const ae="0123456789abcdef",Q=new Array(256);for(let ee=0;ee<16;++ee){const pe=ee*16;for(let ke=0;ke<16;++ke)Q[pe+ke]=ae[ee]+ae[ke]}return Q})();function Ci(ae){return typeof BigInt>"u"?zn:ae}function zn(){throw new Error("BigInt not supported")}})(e);const E=e.Buffer;t.Blob=e.Blob,t.BlobOptions=e.BlobOptions,t.Buffer=e.Buffer,t.File=e.File,t.FileOptions=e.FileOptions,t.INSPECT_MAX_BYTES=e.INSPECT_MAX_BYTES,t.SlowBuffer=e.SlowBuffer,t.TranscodeEncoding=e.TranscodeEncoding,t.atob=e.atob,t.btoa=e.btoa,t.constants=e.constants,t.default=E,t.isAscii=e.isAscii,t.isUtf8=e.isUtf8,t.kMaxLength=e.kMaxLength,t.kStringMaxLength=e.kStringMaxLength,t.resolveObjectURL=e.resolveObjectURL,t.transcode=e.transcode})(h3)),h3}var mut=NT.exports,mZ;function sme(){return mZ||(mZ=1,(function(t){(function(e,n){function r(B,A){if(!B)throw new Error(A||"Assertion failed")}function i(B,A){B.super_=A;var I=function(){};I.prototype=A.prototype,B.prototype=new I,B.prototype.constructor=B}function s(B,A,I){if(s.isBN(B))return B;this.negative=0,this.words=null,this.length=0,this.red=null,B!==null&&((A==="le"||A==="be")&&(I=A,A=10),this._init(B||0,A||10,I||"be"))}typeof e=="object"?e.exports=s:n.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=qB().Buffer}catch{}s.isBN=function(A){return A instanceof s?!0:A!==null&&typeof A=="object"&&A.constructor.wordSize===s.wordSize&&Array.isArray(A.words)},s.max=function(A,I){return A.cmp(I)>0?A:I},s.min=function(A,I){return A.cmp(I)<0?A:I},s.prototype._init=function(A,I,D){if(typeof A=="number")return this._initNumber(A,I,D);if(typeof A=="object")return this._initArray(A,I,D);I==="hex"&&(I=16),r(I===(I|0)&&I>=2&&I<=36),A=A.toString().replace(/\s+/g,"");var z=0;A[0]==="-"&&(z++,this.negative=1),z<A.length&&(I===16?this._parseHex(A,z,D):(this._parseBase(A,I,z),D==="le"&&this._initArray(this.toArray(),I,D)))},s.prototype._initNumber=function(A,I,D){A<0&&(this.negative=1,A=-A),A<67108864?(this.words=[A&67108863],this.length=1):A<4503599627370496?(this.words=[A&67108863,A/67108864&67108863],this.length=2):(r(A<9007199254740992),this.words=[A&67108863,A/67108864&67108863,1],this.length=3),D==="le"&&this._initArray(this.toArray(),I,D)},s.prototype._initArray=function(A,I,D){if(r(typeof A.length=="number"),A.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(A.length/3),this.words=new Array(this.length);for(var z=0;z<this.length;z++)this.words[z]=0;var G,te,K=0;if(D==="be")for(z=A.length-1,G=0;z>=0;z-=3)te=A[z]|A[z-1]<<8|A[z-2]<<16,this.words[G]|=te<<K&67108863,this.words[G+1]=te>>>26-K&67108863,K+=24,K>=26&&(K-=26,G++);else if(D==="le")for(z=0,G=0;z<A.length;z+=3)te=A[z]|A[z+1]<<8|A[z+2]<<16,this.words[G]|=te<<K&67108863,this.words[G+1]=te>>>26-K&67108863,K+=24,K>=26&&(K-=26,G++);return this._strip()};function a(B,A){var I=B.charCodeAt(A);if(I>=48&&I<=57)return I-48;if(I>=65&&I<=70)return I-55;if(I>=97&&I<=102)return I-87;r(!1,"Invalid character in "+B)}function l(B,A,I){var D=a(B,I);return I-1>=A&&(D|=a(B,I-1)<<4),D}s.prototype._parseHex=function(A,I,D){this.length=Math.ceil((A.length-I)/6),this.words=new Array(this.length);for(var z=0;z<this.length;z++)this.words[z]=0;var G=0,te=0,K;if(D==="be")for(z=A.length-1;z>=I;z-=2)K=l(A,I,z)<<G,this.words[te]|=K&67108863,G>=18?(G-=18,te+=1,this.words[te]|=K>>>26):G+=8;else{var q=A.length-I;for(z=q%2===0?I+1:I;z<A.length;z+=2)K=l(A,I,z)<<G,this.words[te]|=K&67108863,G>=18?(G-=18,te+=1,this.words[te]|=K>>>26):G+=8}this._strip()};function c(B,A,I,D){for(var z=0,G=0,te=Math.min(B.length,I),K=A;K<te;K++){var q=B.charCodeAt(K)-48;z*=D,q>=49?G=q-49+10:q>=17?G=q-17+10:G=q,r(q>=0&&G<D,"Invalid character"),z+=G}return z}s.prototype._parseBase=function(A,I,D){this.words=[0],this.length=1;for(var z=0,G=1;G<=67108863;G*=I)z++;z--,G=G/I|0;for(var te=A.length-D,K=te%z,q=Math.min(te,te-K)+D,M=0,_=D;_<q;_+=z)M=c(A,_,_+z,I),this.imuln(G),this.words[0]+M<67108864?this.words[0]+=M:this._iaddn(M);if(K!==0){var Y=1;for(M=c(A,_,A.length,I),_=0;_<K;_++)Y*=I;this.imuln(Y),this.words[0]+M<67108864?this.words[0]+=M:this._iaddn(M)}this._strip()},s.prototype.copy=function(A){A.words=new Array(this.length);for(var I=0;I<this.length;I++)A.words[I]=this.words[I];A.length=this.length,A.negative=this.negative,A.red=this.red};function u(B,A){B.words=A.words,B.length=A.length,B.negative=A.negative,B.red=A.red}if(s.prototype._move=function(A){u(A,this)},s.prototype.clone=function(){var A=new s(null);return this.copy(A),A},s.prototype._expand=function(A){for(;this.length<A;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=f}catch{s.prototype.inspect=f}else s.prototype.inspect=f;function f(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var m=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],g=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],v=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(A,I){A=A||10,I=I|0||1;var D;if(A===16||A==="hex"){D="";for(var z=0,G=0,te=0;te<this.length;te++){var K=this.words[te],q=((K<<z|G)&16777215).toString(16);G=K>>>24-z&16777215,z+=2,z>=26&&(z-=26,te--),G!==0||te!==this.length-1?D=m[6-q.length]+q+D:D=q+D}for(G!==0&&(D=G.toString(16)+D);D.length%I!==0;)D="0"+D;return this.negative!==0&&(D="-"+D),D}if(A===(A|0)&&A>=2&&A<=36){var M=g[A],_=v[A];D="";var Y=this.clone();for(Y.negative=0;!Y.isZero();){var X=Y.modrn(_).toString(A);Y=Y.idivn(_),Y.isZero()?D=X+D:D=m[M-X.length]+X+D}for(this.isZero()&&(D="0"+D);D.length%I!==0;)D="0"+D;return this.negative!==0&&(D="-"+D),D}r(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var A=this.words[0];return this.length===2?A+=this.words[1]*67108864:this.length===3&&this.words[2]===1?A+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-A:A},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(A,I){return this.toArrayLike(o,A,I)}),s.prototype.toArray=function(A,I){return this.toArrayLike(Array,A,I)};var x=function(A,I){return A.allocUnsafe?A.allocUnsafe(I):new A(I)};s.prototype.toArrayLike=function(A,I,D){this._strip();var z=this.byteLength(),G=D||Math.max(1,z);r(z<=G,"byte array longer than desired length"),r(G>0,"Requested array length <= 0");var te=x(A,G),K=I==="le"?"LE":"BE";return this["_toArrayLike"+K](te,z),te},s.prototype._toArrayLikeLE=function(A,I){for(var D=0,z=0,G=0,te=0;G<this.length;G++){var K=this.words[G]<<te|z;A[D++]=K&255,D<A.length&&(A[D++]=K>>8&255),D<A.length&&(A[D++]=K>>16&255),te===6?(D<A.length&&(A[D++]=K>>24&255),z=0,te=0):(z=K>>>24,te+=2)}if(D<A.length)for(A[D++]=z;D<A.length;)A[D++]=0},s.prototype._toArrayLikeBE=function(A,I){for(var D=A.length-1,z=0,G=0,te=0;G<this.length;G++){var K=this.words[G]<<te|z;A[D--]=K&255,D>=0&&(A[D--]=K>>8&255),D>=0&&(A[D--]=K>>16&255),te===6?(D>=0&&(A[D--]=K>>24&255),z=0,te=0):(z=K>>>24,te+=2)}if(D>=0)for(A[D--]=z;D>=0;)A[D--]=0},Math.clz32?s.prototype._countBits=function(A){return 32-Math.clz32(A)}:s.prototype._countBits=function(A){var I=A,D=0;return I>=4096&&(D+=13,I>>>=13),I>=64&&(D+=7,I>>>=7),I>=8&&(D+=4,I>>>=4),I>=2&&(D+=2,I>>>=2),D+I},s.prototype._zeroBits=function(A){if(A===0)return 26;var I=A,D=0;return(I&8191)===0&&(D+=13,I>>>=13),(I&127)===0&&(D+=7,I>>>=7),(I&15)===0&&(D+=4,I>>>=4),(I&3)===0&&(D+=2,I>>>=2),(I&1)===0&&D++,D},s.prototype.bitLength=function(){var A=this.words[this.length-1],I=this._countBits(A);return(this.length-1)*26+I};function b(B){for(var A=new Array(B.bitLength()),I=0;I<A.length;I++){var D=I/26|0,z=I%26;A[I]=B.words[D]>>>z&1}return A}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var A=0,I=0;I<this.length;I++){var D=this._zeroBits(this.words[I]);if(A+=D,D!==26)break}return A},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(A){return this.negative!==0?this.abs().inotn(A).iaddn(1):this.clone()},s.prototype.fromTwos=function(A){return this.testn(A-1)?this.notn(A).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(A){for(;this.length<A.length;)this.words[this.length++]=0;for(var I=0;I<A.length;I++)this.words[I]=this.words[I]|A.words[I];return this._strip()},s.prototype.ior=function(A){return r((this.negative|A.negative)===0),this.iuor(A)},s.prototype.or=function(A){return this.length>A.length?this.clone().ior(A):A.clone().ior(this)},s.prototype.uor=function(A){return this.length>A.length?this.clone().iuor(A):A.clone().iuor(this)},s.prototype.iuand=function(A){var I;this.length>A.length?I=A:I=this;for(var D=0;D<I.length;D++)this.words[D]=this.words[D]&A.words[D];return this.length=I.length,this._strip()},s.prototype.iand=function(A){return r((this.negative|A.negative)===0),this.iuand(A)},s.prototype.and=function(A){return this.length>A.length?this.clone().iand(A):A.clone().iand(this)},s.prototype.uand=function(A){return this.length>A.length?this.clone().iuand(A):A.clone().iuand(this)},s.prototype.iuxor=function(A){var I,D;this.length>A.length?(I=this,D=A):(I=A,D=this);for(var z=0;z<D.length;z++)this.words[z]=I.words[z]^D.words[z];if(this!==I)for(;z<I.length;z++)this.words[z]=I.words[z];return this.length=I.length,this._strip()},s.prototype.ixor=function(A){return r((this.negative|A.negative)===0),this.iuxor(A)},s.prototype.xor=function(A){return this.length>A.length?this.clone().ixor(A):A.clone().ixor(this)},s.prototype.uxor=function(A){return this.length>A.length?this.clone().iuxor(A):A.clone().iuxor(this)},s.prototype.inotn=function(A){r(typeof A=="number"&&A>=0);var I=Math.ceil(A/26)|0,D=A%26;this._expand(I),D>0&&I--;for(var z=0;z<I;z++)this.words[z]=~this.words[z]&67108863;return D>0&&(this.words[z]=~this.words[z]&67108863>>26-D),this._strip()},s.prototype.notn=function(A){return this.clone().inotn(A)},s.prototype.setn=function(A,I){r(typeof A=="number"&&A>=0);var D=A/26|0,z=A%26;return this._expand(D+1),I?this.words[D]=this.words[D]|1<<z:this.words[D]=this.words[D]&~(1<<z),this._strip()},s.prototype.iadd=function(A){var I;if(this.negative!==0&&A.negative===0)return this.negative=0,I=this.isub(A),this.negative^=1,this._normSign();if(this.negative===0&&A.negative!==0)return A.negative=0,I=this.isub(A),A.negative=1,I._normSign();var D,z;this.length>A.length?(D=this,z=A):(D=A,z=this);for(var G=0,te=0;te<z.length;te++)I=(D.words[te]|0)+(z.words[te]|0)+G,this.words[te]=I&67108863,G=I>>>26;for(;G!==0&&te<D.length;te++)I=(D.words[te]|0)+G,this.words[te]=I&67108863,G=I>>>26;if(this.length=D.length,G!==0)this.words[this.length]=G,this.length++;else if(D!==this)for(;te<D.length;te++)this.words[te]=D.words[te];return this},s.prototype.add=function(A){var I;return A.negative!==0&&this.negative===0?(A.negative=0,I=this.sub(A),A.negative^=1,I):A.negative===0&&this.negative!==0?(this.negative=0,I=A.sub(this),this.negative=1,I):this.length>A.length?this.clone().iadd(A):A.clone().iadd(this)},s.prototype.isub=function(A){if(A.negative!==0){A.negative=0;var I=this.iadd(A);return A.negative=1,I._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(A),this.negative=1,this._normSign();var D=this.cmp(A);if(D===0)return this.negative=0,this.length=1,this.words[0]=0,this;var z,G;D>0?(z=this,G=A):(z=A,G=this);for(var te=0,K=0;K<G.length;K++)I=(z.words[K]|0)-(G.words[K]|0)+te,te=I>>26,this.words[K]=I&67108863;for(;te!==0&&K<z.length;K++)I=(z.words[K]|0)+te,te=I>>26,this.words[K]=I&67108863;if(te===0&&K<z.length&&z!==this)for(;K<z.length;K++)this.words[K]=z.words[K];return this.length=Math.max(this.length,K),z!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(A){return this.clone().isub(A)};function E(B,A,I){I.negative=A.negative^B.negative;var D=B.length+A.length|0;I.length=D,D=D-1|0;var z=B.words[0]|0,G=A.words[0]|0,te=z*G,K=te&67108863,q=te/67108864|0;I.words[0]=K;for(var M=1;M<D;M++){for(var _=q>>>26,Y=q&67108863,X=Math.min(M,A.length-1),re=Math.max(0,M-B.length+1);re<=X;re++){var oe=M-re|0;z=B.words[oe]|0,G=A.words[re]|0,te=z*G+Y,_+=te/67108864|0,Y=te&67108863}I.words[M]=Y|0,q=_|0}return q!==0?I.words[M]=q|0:I.length--,I._strip()}var C=function(A,I,D){var z=A.words,G=I.words,te=D.words,K=0,q,M,_,Y=z[0]|0,X=Y&8191,re=Y>>>13,oe=z[1]|0,Ee=oe&8191,ce=oe>>>13,me=z[2]|0,ue=me&8191,le=me>>>13,Ie=z[3]|0,Ne=Ie&8191,$e=Ie>>>13,Ze=z[4]|0,Ye=Ze&8191,We=Ze>>>13,At=z[5]|0,ot=At&8191,Bt=At>>>13,Zt=z[6]|0,Ge=Zt&8191,Tt=Zt>>>13,ln=z[7]|0,Pe=ln&8191,Ve=ln>>>13,ht=z[8]|0,ct=ht&8191,se=ht>>>13,J=z[9]|0,Z=J&8191,fe=J>>>13,be=G[0]|0,he=be&8191,ye=be>>>13,Xe=G[1]|0,et=Xe&8191,st=Xe>>>13,Ft=G[2]|0,vt=Ft&8191,Ot=Ft>>>13,cn=G[3]|0,en=cn&8191,rn=cn>>>13,Ci=G[4]|0,zn=Ci&8191,ae=Ci>>>13,Q=G[5]|0,ee=Q&8191,pe=Q>>>13,ke=G[6]|0,Re=ke&8191,ze=ke>>>13,Jt=G[7]|0,$t=Jt&8191,it=Jt>>>13,mn=G[8]|0,yt=mn&8191,vn=mn>>>13,Ya=G[9]|0,ur=Ya&8191,yr=Ya>>>13;D.negative=A.negative^I.negative,D.length=19,q=Math.imul(X,he),M=Math.imul(X,ye),M=M+Math.imul(re,he)|0,_=Math.imul(re,ye);var qc=(K+q|0)+((M&8191)<<13)|0;K=(_+(M>>>13)|0)+(qc>>>26)|0,qc&=67108863,q=Math.imul(Ee,he),M=Math.imul(Ee,ye),M=M+Math.imul(ce,he)|0,_=Math.imul(ce,ye),q=q+Math.imul(X,et)|0,M=M+Math.imul(X,st)|0,M=M+Math.imul(re,et)|0,_=_+Math.imul(re,st)|0;var $l=(K+q|0)+((M&8191)<<13)|0;K=(_+(M>>>13)|0)+($l>>>26)|0,$l&=67108863,q=Math.imul(ue,he),M=Math.imul(ue,ye),M=M+Math.imul(le,he)|0,_=Math.imul(le,ye),q=q+Math.imul(Ee,et)|0,M=M+Math.imul(Ee,st)|0,M=M+Math.imul(ce,et)|0,_=_+Math.imul(ce,st)|0,q=q+Math.imul(X,vt)|0,M=M+Math.imul(X,Ot)|0,M=M+Math.imul(re,vt)|0,_=_+Math.imul(re,Ot)|0;var Zo=(K+q|0)+((M&8191)<<13)|0;K=(_+(M>>>13)|0)+(Zo>>>26)|0,Zo&=67108863,q=Math.imul(Ne,he),M=Math.imul(Ne,ye),M=M+Math.imul($e,he)|0,_=Math.imul($e,ye),q=q+Math.imul(ue,et)|0,M=M+Math.imul(ue,st)|0,M=M+Math.imul(le,et)|0,_=_+Math.imul(le,st)|0,q=q+Math.imul(Ee,vt)|0,M=M+Math.imul(Ee,Ot)|0,M=M+Math.imul(ce,vt)|0,_=_+Math.imul(ce,Ot)|0,q=q+Math.imul(X,en)|0,M=M+Math.imul(X,rn)|0,M=M+Math.imul(re,en)|0,_=_+Math.imul(re,rn)|0;var zl=(K+q|0)+((M&8191)<<13)|0;K=(_+(M>>>13)|0)+(zl>>>26)|0,zl&=67108863,q=Math.imul(Ye,he),M=Math.imul(Ye,ye),M=M+Math.imul(We,he)|0,_=Math.imul(We,ye),q=q+Math.imul(Ne,et)|0,M=M+Math.imul(Ne,st)|0,M=M+Math.imul($e,et)|0,_=_+Math.imul($e,st)|0,q=q+Math.imul(ue,vt)|0,M=M+Math.imul(ue,Ot)|0,M=M+Math.imul(le,vt)|0,_=_+Math.imul(le,Ot)|0,q=q+Math.imul(Ee,en)|0,M=M+Math.imul(Ee,rn)|0,M=M+Math.imul(ce,en)|0,_=_+Math.imul(ce,rn)|0,q=q+Math.imul(X,zn)|0,M=M+Math.imul(X,ae)|0,M=M+Math.imul(re,zn)|0,_=_+Math.imul(re,ae)|0;var wo=(K+q|0)+((M&8191)<<13)|0;K=(_+(M>>>13)|0)+(wo>>>26)|0,wo&=67108863,q=Math.imul(ot,he),M=Math.imul(ot,ye),M=M+Math.imul(Bt,he)|0,_=Math.imul(Bt,ye),q=q+Math.imul(Ye,et)|0,M=M+Math.imul(Ye,st)|0,M=M+Math.imul(We,et)|0,_=_+Math.imul(We,st)|0,q=q+Math.imul(Ne,vt)|0,M=M+Math.imul(Ne,Ot)|0,M=M+Math.imul($e,vt)|0,_=_+Math.imul($e,Ot)|0,q=q+Math.imul(ue,en)|0,M=M+Math.imul(ue,rn)|0,M=M+Math.imul(le,en)|0,_=_+Math.imul(le,rn)|0,q=q+Math.imul(Ee,zn)|0,M=M+Math.imul(Ee,ae)|0,M=M+Math.imul(ce,zn)|0,_=_+Math.imul(ce,ae)|0,q=q+Math.imul(X,ee)|0,M=M+Math.imul(X,pe)|0,M=M+Math.imul(re,ee)|0,_=_+Math.imul(re,pe)|0;var Eo=(K+q|0)+((M&8191)<<13)|0;K=(_+(M>>>13)|0)+(Eo>>>26)|0,Eo&=67108863,q=Math.imul(Ge,he),M=Math.imul(Ge,ye),M=M+Math.imul(Tt,he)|0,_=Math.imul(Tt,ye),q=q+Math.imul(ot,et)|0,M=M+Math.imul(ot,st)|0,M=M+Math.imul(Bt,et)|0,_=_+Math.imul(Bt,st)|0,q=q+Math.imul(Ye,vt)|0,M=M+Math.imul(Ye,Ot)|0,M=M+Math.imul(We,vt)|0,_=_+Math.imul(We,Ot)|0,q=q+Math.imul(Ne,en)|0,M=M+Math.imul(Ne,rn)|0,M=M+Math.imul($e,en)|0,_=_+Math.imul($e,rn)|0,q=q+Math.imul(ue,zn)|0,M=M+Math.imul(ue,ae)|0,M=M+Math.imul(le,zn)|0,_=_+Math.imul(le,ae)|0,q=q+Math.imul(Ee,ee)|0,M=M+Math.imul(Ee,pe)|0,M=M+Math.imul(ce,ee)|0,_=_+Math.imul(ce,pe)|0,q=q+Math.imul(X,Re)|0,M=M+Math.imul(X,ze)|0,M=M+Math.imul(re,Re)|0,_=_+Math.imul(re,ze)|0;var ea=(K+q|0)+((M&8191)<<13)|0;K=(_+(M>>>13)|0)+(ea>>>26)|0,ea&=67108863,q=Math.imul(Pe,he),M=Math.imul(Pe,ye),M=M+Math.imul(Ve,he)|0,_=Math.imul(Ve,ye),q=q+Math.imul(Ge,et)|0,M=M+Math.imul(Ge,st)|0,M=M+Math.imul(Tt,et)|0,_=_+Math.imul(Tt,st)|0,q=q+Math.imul(ot,vt)|0,M=M+Math.imul(ot,Ot)|0,M=M+Math.imul(Bt,vt)|0,_=_+Math.imul(Bt,Ot)|0,q=q+Math.imul(Ye,en)|0,M=M+Math.imul(Ye,rn)|0,M=M+Math.imul(We,en)|0,_=_+Math.imul(We,rn)|0,q=q+Math.imul(Ne,zn)|0,M=M+Math.imul(Ne,ae)|0,M=M+Math.imul($e,zn)|0,_=_+Math.imul($e,ae)|0,q=q+Math.imul(ue,ee)|0,M=M+Math.imul(ue,pe)|0,M=M+Math.imul(le,ee)|0,_=_+Math.imul(le,pe)|0,q=q+Math.imul(Ee,Re)|0,M=M+Math.imul(Ee,ze)|0,M=M+Math.imul(ce,Re)|0,_=_+Math.imul(ce,ze)|0,q=q+Math.imul(X,$t)|0,M=M+Math.imul(X,it)|0,M=M+Math.imul(re,$t)|0,_=_+Math.imul(re,it)|0;var So=(K+q|0)+((M&8191)<<13)|0;K=(_+(M>>>13)|0)+(So>>>26)|0,So&=67108863,q=Math.imul(ct,he),M=Math.imul(ct,ye),M=M+Math.imul(se,he)|0,_=Math.imul(se,ye),q=q+Math.imul(Pe,et)|0,M=M+Math.imul(Pe,st)|0,M=M+Math.imul(Ve,et)|0,_=_+Math.imul(Ve,st)|0,q=q+Math.imul(Ge,vt)|0,M=M+Math.imul(Ge,Ot)|0,M=M+Math.imul(Tt,vt)|0,_=_+Math.imul(Tt,Ot)|0,q=q+Math.imul(ot,en)|0,M=M+Math.imul(ot,rn)|0,M=M+Math.imul(Bt,en)|0,_=_+Math.imul(Bt,rn)|0,q=q+Math.imul(Ye,zn)|0,M=M+Math.imul(Ye,ae)|0,M=M+Math.imul(We,zn)|0,_=_+Math.imul(We,ae)|0,q=q+Math.imul(Ne,ee)|0,M=M+Math.imul(Ne,pe)|0,M=M+Math.imul($e,ee)|0,_=_+Math.imul($e,pe)|0,q=q+Math.imul(ue,Re)|0,M=M+Math.imul(ue,ze)|0,M=M+Math.imul(le,Re)|0,_=_+Math.imul(le,ze)|0,q=q+Math.imul(Ee,$t)|0,M=M+Math.imul(Ee,it)|0,M=M+Math.imul(ce,$t)|0,_=_+Math.imul(ce,it)|0,q=q+Math.imul(X,yt)|0,M=M+Math.imul(X,vn)|0,M=M+Math.imul(re,yt)|0,_=_+Math.imul(re,vn)|0;var xr=(K+q|0)+((M&8191)<<13)|0;K=(_+(M>>>13)|0)+(xr>>>26)|0,xr&=67108863,q=Math.imul(Z,he),M=Math.imul(Z,ye),M=M+Math.imul(fe,he)|0,_=Math.imul(fe,ye),q=q+Math.imul(ct,et)|0,M=M+Math.imul(ct,st)|0,M=M+Math.imul(se,et)|0,_=_+Math.imul(se,st)|0,q=q+Math.imul(Pe,vt)|0,M=M+Math.imul(Pe,Ot)|0,M=M+Math.imul(Ve,vt)|0,_=_+Math.imul(Ve,Ot)|0,q=q+Math.imul(Ge,en)|0,M=M+Math.imul(Ge,rn)|0,M=M+Math.imul(Tt,en)|0,_=_+Math.imul(Tt,rn)|0,q=q+Math.imul(ot,zn)|0,M=M+Math.imul(ot,ae)|0,M=M+Math.imul(Bt,zn)|0,_=_+Math.imul(Bt,ae)|0,q=q+Math.imul(Ye,ee)|0,M=M+Math.imul(Ye,pe)|0,M=M+Math.imul(We,ee)|0,_=_+Math.imul(We,pe)|0,q=q+Math.imul(Ne,Re)|0,M=M+Math.imul(Ne,ze)|0,M=M+Math.imul($e,Re)|0,_=_+Math.imul($e,ze)|0,q=q+Math.imul(ue,$t)|0,M=M+Math.imul(ue,it)|0,M=M+Math.imul(le,$t)|0,_=_+Math.imul(le,it)|0,q=q+Math.imul(Ee,yt)|0,M=M+Math.imul(Ee,vn)|0,M=M+Math.imul(ce,yt)|0,_=_+Math.imul(ce,vn)|0,q=q+Math.imul(X,ur)|0,M=M+Math.imul(X,yr)|0,M=M+Math.imul(re,ur)|0,_=_+Math.imul(re,yr)|0;var Gc=(K+q|0)+((M&8191)<<13)|0;K=(_+(M>>>13)|0)+(Gc>>>26)|0,Gc&=67108863,q=Math.imul(Z,et),M=Math.imul(Z,st),M=M+Math.imul(fe,et)|0,_=Math.imul(fe,st),q=q+Math.imul(ct,vt)|0,M=M+Math.imul(ct,Ot)|0,M=M+Math.imul(se,vt)|0,_=_+Math.imul(se,Ot)|0,q=q+Math.imul(Pe,en)|0,M=M+Math.imul(Pe,rn)|0,M=M+Math.imul(Ve,en)|0,_=_+Math.imul(Ve,rn)|0,q=q+Math.imul(Ge,zn)|0,M=M+Math.imul(Ge,ae)|0,M=M+Math.imul(Tt,zn)|0,_=_+Math.imul(Tt,ae)|0,q=q+Math.imul(ot,ee)|0,M=M+Math.imul(ot,pe)|0,M=M+Math.imul(Bt,ee)|0,_=_+Math.imul(Bt,pe)|0,q=q+Math.imul(Ye,Re)|0,M=M+Math.imul(Ye,ze)|0,M=M+Math.imul(We,Re)|0,_=_+Math.imul(We,ze)|0,q=q+Math.imul(Ne,$t)|0,M=M+Math.imul(Ne,it)|0,M=M+Math.imul($e,$t)|0,_=_+Math.imul($e,it)|0,q=q+Math.imul(ue,yt)|0,M=M+Math.imul(ue,vn)|0,M=M+Math.imul(le,yt)|0,_=_+Math.imul(le,vn)|0,q=q+Math.imul(Ee,ur)|0,M=M+Math.imul(Ee,yr)|0,M=M+Math.imul(ce,ur)|0,_=_+Math.imul(ce,yr)|0;var Sr=(K+q|0)+((M&8191)<<13)|0;K=(_+(M>>>13)|0)+(Sr>>>26)|0,Sr&=67108863,q=Math.imul(Z,vt),M=Math.imul(Z,Ot),M=M+Math.imul(fe,vt)|0,_=Math.imul(fe,Ot),q=q+Math.imul(ct,en)|0,M=M+Math.imul(ct,rn)|0,M=M+Math.imul(se,en)|0,_=_+Math.imul(se,rn)|0,q=q+Math.imul(Pe,zn)|0,M=M+Math.imul(Pe,ae)|0,M=M+Math.imul(Ve,zn)|0,_=_+Math.imul(Ve,ae)|0,q=q+Math.imul(Ge,ee)|0,M=M+Math.imul(Ge,pe)|0,M=M+Math.imul(Tt,ee)|0,_=_+Math.imul(Tt,pe)|0,q=q+Math.imul(ot,Re)|0,M=M+Math.imul(ot,ze)|0,M=M+Math.imul(Bt,Re)|0,_=_+Math.imul(Bt,ze)|0,q=q+Math.imul(Ye,$t)|0,M=M+Math.imul(Ye,it)|0,M=M+Math.imul(We,$t)|0,_=_+Math.imul(We,it)|0,q=q+Math.imul(Ne,yt)|0,M=M+Math.imul(Ne,vn)|0,M=M+Math.imul($e,yt)|0,_=_+Math.imul($e,vn)|0,q=q+Math.imul(ue,ur)|0,M=M+Math.imul(ue,yr)|0,M=M+Math.imul(le,ur)|0,_=_+Math.imul(le,yr)|0;var Yr=(K+q|0)+((M&8191)<<13)|0;K=(_+(M>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,q=Math.imul(Z,en),M=Math.imul(Z,rn),M=M+Math.imul(fe,en)|0,_=Math.imul(fe,rn),q=q+Math.imul(ct,zn)|0,M=M+Math.imul(ct,ae)|0,M=M+Math.imul(se,zn)|0,_=_+Math.imul(se,ae)|0,q=q+Math.imul(Pe,ee)|0,M=M+Math.imul(Pe,pe)|0,M=M+Math.imul(Ve,ee)|0,_=_+Math.imul(Ve,pe)|0,q=q+Math.imul(Ge,Re)|0,M=M+Math.imul(Ge,ze)|0,M=M+Math.imul(Tt,Re)|0,_=_+Math.imul(Tt,ze)|0,q=q+Math.imul(ot,$t)|0,M=M+Math.imul(ot,it)|0,M=M+Math.imul(Bt,$t)|0,_=_+Math.imul(Bt,it)|0,q=q+Math.imul(Ye,yt)|0,M=M+Math.imul(Ye,vn)|0,M=M+Math.imul(We,yt)|0,_=_+Math.imul(We,vn)|0,q=q+Math.imul(Ne,ur)|0,M=M+Math.imul(Ne,yr)|0,M=M+Math.imul($e,ur)|0,_=_+Math.imul($e,yr)|0;var ds=(K+q|0)+((M&8191)<<13)|0;K=(_+(M>>>13)|0)+(ds>>>26)|0,ds&=67108863,q=Math.imul(Z,zn),M=Math.imul(Z,ae),M=M+Math.imul(fe,zn)|0,_=Math.imul(fe,ae),q=q+Math.imul(ct,ee)|0,M=M+Math.imul(ct,pe)|0,M=M+Math.imul(se,ee)|0,_=_+Math.imul(se,pe)|0,q=q+Math.imul(Pe,Re)|0,M=M+Math.imul(Pe,ze)|0,M=M+Math.imul(Ve,Re)|0,_=_+Math.imul(Ve,ze)|0,q=q+Math.imul(Ge,$t)|0,M=M+Math.imul(Ge,it)|0,M=M+Math.imul(Tt,$t)|0,_=_+Math.imul(Tt,it)|0,q=q+Math.imul(ot,yt)|0,M=M+Math.imul(ot,vn)|0,M=M+Math.imul(Bt,yt)|0,_=_+Math.imul(Bt,vn)|0,q=q+Math.imul(Ye,ur)|0,M=M+Math.imul(Ye,yr)|0,M=M+Math.imul(We,ur)|0,_=_+Math.imul(We,yr)|0;var Th=(K+q|0)+((M&8191)<<13)|0;K=(_+(M>>>13)|0)+(Th>>>26)|0,Th&=67108863,q=Math.imul(Z,ee),M=Math.imul(Z,pe),M=M+Math.imul(fe,ee)|0,_=Math.imul(fe,pe),q=q+Math.imul(ct,Re)|0,M=M+Math.imul(ct,ze)|0,M=M+Math.imul(se,Re)|0,_=_+Math.imul(se,ze)|0,q=q+Math.imul(Pe,$t)|0,M=M+Math.imul(Pe,it)|0,M=M+Math.imul(Ve,$t)|0,_=_+Math.imul(Ve,it)|0,q=q+Math.imul(Ge,yt)|0,M=M+Math.imul(Ge,vn)|0,M=M+Math.imul(Tt,yt)|0,_=_+Math.imul(Tt,vn)|0,q=q+Math.imul(ot,ur)|0,M=M+Math.imul(ot,yr)|0,M=M+Math.imul(Bt,ur)|0,_=_+Math.imul(Bt,yr)|0;var Jm=(K+q|0)+((M&8191)<<13)|0;K=(_+(M>>>13)|0)+(Jm>>>26)|0,Jm&=67108863,q=Math.imul(Z,Re),M=Math.imul(Z,ze),M=M+Math.imul(fe,Re)|0,_=Math.imul(fe,ze),q=q+Math.imul(ct,$t)|0,M=M+Math.imul(ct,it)|0,M=M+Math.imul(se,$t)|0,_=_+Math.imul(se,it)|0,q=q+Math.imul(Pe,yt)|0,M=M+Math.imul(Pe,vn)|0,M=M+Math.imul(Ve,yt)|0,_=_+Math.imul(Ve,vn)|0,q=q+Math.imul(Ge,ur)|0,M=M+Math.imul(Ge,yr)|0,M=M+Math.imul(Tt,ur)|0,_=_+Math.imul(Tt,yr)|0;var Xm=(K+q|0)+((M&8191)<<13)|0;K=(_+(M>>>13)|0)+(Xm>>>26)|0,Xm&=67108863,q=Math.imul(Z,$t),M=Math.imul(Z,it),M=M+Math.imul(fe,$t)|0,_=Math.imul(fe,it),q=q+Math.imul(ct,yt)|0,M=M+Math.imul(ct,vn)|0,M=M+Math.imul(se,yt)|0,_=_+Math.imul(se,vn)|0,q=q+Math.imul(Pe,ur)|0,M=M+Math.imul(Pe,yr)|0,M=M+Math.imul(Ve,ur)|0,_=_+Math.imul(Ve,yr)|0;var pv=(K+q|0)+((M&8191)<<13)|0;K=(_+(M>>>13)|0)+(pv>>>26)|0,pv&=67108863,q=Math.imul(Z,yt),M=Math.imul(Z,vn),M=M+Math.imul(fe,yt)|0,_=Math.imul(fe,vn),q=q+Math.imul(ct,ur)|0,M=M+Math.imul(ct,yr)|0,M=M+Math.imul(se,ur)|0,_=_+Math.imul(se,yr)|0;var Dd=(K+q|0)+((M&8191)<<13)|0;K=(_+(M>>>13)|0)+(Dd>>>26)|0,Dd&=67108863,q=Math.imul(Z,ur),M=Math.imul(Z,yr),M=M+Math.imul(fe,ur)|0,_=Math.imul(fe,yr);var Ld=(K+q|0)+((M&8191)<<13)|0;return K=(_+(M>>>13)|0)+(Ld>>>26)|0,Ld&=67108863,te[0]=qc,te[1]=$l,te[2]=Zo,te[3]=zl,te[4]=wo,te[5]=Eo,te[6]=ea,te[7]=So,te[8]=xr,te[9]=Gc,te[10]=Sr,te[11]=Yr,te[12]=ds,te[13]=Th,te[14]=Jm,te[15]=Xm,te[16]=pv,te[17]=Dd,te[18]=Ld,K!==0&&(te[19]=K,D.length++),D};Math.imul||(C=E);function k(B,A,I){I.negative=A.negative^B.negative,I.length=B.length+A.length;for(var D=0,z=0,G=0;G<I.length-1;G++){var te=z;z=0;for(var K=D&67108863,q=Math.min(G,A.length-1),M=Math.max(0,G-B.length+1);M<=q;M++){var _=G-M,Y=B.words[_]|0,X=A.words[M]|0,re=Y*X,oe=re&67108863;te=te+(re/67108864|0)|0,oe=oe+K|0,K=oe&67108863,te=te+(oe>>>26)|0,z+=te>>>26,te&=67108863}I.words[G]=K,D=te,te=z}return D!==0?I.words[G]=D:I.length--,I._strip()}function O(B,A,I){return k(B,A,I)}s.prototype.mulTo=function(A,I){var D,z=this.length+A.length;return this.length===10&&A.length===10?D=C(this,A,I):z<63?D=E(this,A,I):z<1024?D=k(this,A,I):D=O(this,A,I),D},s.prototype.mul=function(A){var I=new s(null);return I.words=new Array(this.length+A.length),this.mulTo(A,I)},s.prototype.mulf=function(A){var I=new s(null);return I.words=new Array(this.length+A.length),O(this,A,I)},s.prototype.imul=function(A){return this.clone().mulTo(A,this)},s.prototype.imuln=function(A){var I=A<0;I&&(A=-A),r(typeof A=="number"),r(A<67108864);for(var D=0,z=0;z<this.length;z++){var G=(this.words[z]|0)*A,te=(G&67108863)+(D&67108863);D>>=26,D+=G/67108864|0,D+=te>>>26,this.words[z]=te&67108863}return D!==0&&(this.words[z]=D,this.length++),this.length=A===0?1:this.length,I?this.ineg():this},s.prototype.muln=function(A){return this.clone().imuln(A)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(A){var I=b(A);if(I.length===0)return new s(1);for(var D=this,z=0;z<I.length&&I[z]===0;z++,D=D.sqr());if(++z<I.length)for(var G=D.sqr();z<I.length;z++,G=G.sqr())I[z]!==0&&(D=D.mul(G));return D},s.prototype.iushln=function(A){r(typeof A=="number"&&A>=0);var I=A%26,D=(A-I)/26,z=67108863>>>26-I<<26-I,G;if(I!==0){var te=0;for(G=0;G<this.length;G++){var K=this.words[G]&z,q=(this.words[G]|0)-K<<I;this.words[G]=q|te,te=K>>>26-I}te&&(this.words[G]=te,this.length++)}if(D!==0){for(G=this.length-1;G>=0;G--)this.words[G+D]=this.words[G];for(G=0;G<D;G++)this.words[G]=0;this.length+=D}return this._strip()},s.prototype.ishln=function(A){return r(this.negative===0),this.iushln(A)},s.prototype.iushrn=function(A,I,D){r(typeof A=="number"&&A>=0);var z;I?z=(I-I%26)/26:z=0;var G=A%26,te=Math.min((A-G)/26,this.length),K=67108863^67108863>>>G<<G,q=D;if(z-=te,z=Math.max(0,z),q){for(var M=0;M<te;M++)q.words[M]=this.words[M];q.length=te}if(te!==0)if(this.length>te)for(this.length-=te,M=0;M<this.length;M++)this.words[M]=this.words[M+te];else this.words[0]=0,this.length=1;var _=0;for(M=this.length-1;M>=0&&(_!==0||M>=z);M--){var Y=this.words[M]|0;this.words[M]=_<<26-G|Y>>>G,_=Y&K}return q&&_!==0&&(q.words[q.length++]=_),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(A,I,D){return r(this.negative===0),this.iushrn(A,I,D)},s.prototype.shln=function(A){return this.clone().ishln(A)},s.prototype.ushln=function(A){return this.clone().iushln(A)},s.prototype.shrn=function(A){return this.clone().ishrn(A)},s.prototype.ushrn=function(A){return this.clone().iushrn(A)},s.prototype.testn=function(A){r(typeof A=="number"&&A>=0);var I=A%26,D=(A-I)/26,z=1<<I;if(this.length<=D)return!1;var G=this.words[D];return!!(G&z)},s.prototype.imaskn=function(A){r(typeof A=="number"&&A>=0);var I=A%26,D=(A-I)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=D)return this;if(I!==0&&D++,this.length=Math.min(D,this.length),I!==0){var z=67108863^67108863>>>I<<I;this.words[this.length-1]&=z}return this._strip()},s.prototype.maskn=function(A){return this.clone().imaskn(A)},s.prototype.iaddn=function(A){return r(typeof A=="number"),r(A<67108864),A<0?this.isubn(-A):this.negative!==0?this.length===1&&(this.words[0]|0)<=A?(this.words[0]=A-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(A),this.negative=1,this):this._iaddn(A)},s.prototype._iaddn=function(A){this.words[0]+=A;for(var I=0;I<this.length&&this.words[I]>=67108864;I++)this.words[I]-=67108864,I===this.length-1?this.words[I+1]=1:this.words[I+1]++;return this.length=Math.max(this.length,I+1),this},s.prototype.isubn=function(A){if(r(typeof A=="number"),r(A<67108864),A<0)return this.iaddn(-A);if(this.negative!==0)return this.negative=0,this.iaddn(A),this.negative=1,this;if(this.words[0]-=A,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var I=0;I<this.length&&this.words[I]<0;I++)this.words[I]+=67108864,this.words[I+1]-=1;return this._strip()},s.prototype.addn=function(A){return this.clone().iaddn(A)},s.prototype.subn=function(A){return this.clone().isubn(A)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(A,I,D){var z=A.length+D,G;this._expand(z);var te,K=0;for(G=0;G<A.length;G++){te=(this.words[G+D]|0)+K;var q=(A.words[G]|0)*I;te-=q&67108863,K=(te>>26)-(q/67108864|0),this.words[G+D]=te&67108863}for(;G<this.length-D;G++)te=(this.words[G+D]|0)+K,K=te>>26,this.words[G+D]=te&67108863;if(K===0)return this._strip();for(r(K===-1),K=0,G=0;G<this.length;G++)te=-(this.words[G]|0)+K,K=te>>26,this.words[G]=te&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(A,I){var D=this.length-A.length,z=this.clone(),G=A,te=G.words[G.length-1]|0,K=this._countBits(te);D=26-K,D!==0&&(G=G.ushln(D),z.iushln(D),te=G.words[G.length-1]|0);var q=z.length-G.length,M;if(I!=="mod"){M=new s(null),M.length=q+1,M.words=new Array(M.length);for(var _=0;_<M.length;_++)M.words[_]=0}var Y=z.clone()._ishlnsubmul(G,1,q);Y.negative===0&&(z=Y,M&&(M.words[q]=1));for(var X=q-1;X>=0;X--){var re=(z.words[G.length+X]|0)*67108864+(z.words[G.length+X-1]|0);for(re=Math.min(re/te|0,67108863),z._ishlnsubmul(G,re,X);z.negative!==0;)re--,z.negative=0,z._ishlnsubmul(G,1,X),z.isZero()||(z.negative^=1);M&&(M.words[X]=re)}return M&&M._strip(),z._strip(),I!=="div"&&D!==0&&z.iushrn(D),{div:M||null,mod:z}},s.prototype.divmod=function(A,I,D){if(r(!A.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var z,G,te;return this.negative!==0&&A.negative===0?(te=this.neg().divmod(A,I),I!=="mod"&&(z=te.div.neg()),I!=="div"&&(G=te.mod.neg(),D&&G.negative!==0&&G.iadd(A)),{div:z,mod:G}):this.negative===0&&A.negative!==0?(te=this.divmod(A.neg(),I),I!=="mod"&&(z=te.div.neg()),{div:z,mod:te.mod}):(this.negative&A.negative)!==0?(te=this.neg().divmod(A.neg(),I),I!=="div"&&(G=te.mod.neg(),D&&G.negative!==0&&G.isub(A)),{div:te.div,mod:G}):A.length>this.length||this.cmp(A)<0?{div:new s(0),mod:this}:A.length===1?I==="div"?{div:this.divn(A.words[0]),mod:null}:I==="mod"?{div:null,mod:new s(this.modrn(A.words[0]))}:{div:this.divn(A.words[0]),mod:new s(this.modrn(A.words[0]))}:this._wordDiv(A,I)},s.prototype.div=function(A){return this.divmod(A,"div",!1).div},s.prototype.mod=function(A){return this.divmod(A,"mod",!1).mod},s.prototype.umod=function(A){return this.divmod(A,"mod",!0).mod},s.prototype.divRound=function(A){var I=this.divmod(A);if(I.mod.isZero())return I.div;var D=I.div.negative!==0?I.mod.isub(A):I.mod,z=A.ushrn(1),G=A.andln(1),te=D.cmp(z);return te<0||G===1&&te===0?I.div:I.div.negative!==0?I.div.isubn(1):I.div.iaddn(1)},s.prototype.modrn=function(A){var I=A<0;I&&(A=-A),r(A<=67108863);for(var D=(1<<26)%A,z=0,G=this.length-1;G>=0;G--)z=(D*z+(this.words[G]|0))%A;return I?-z:z},s.prototype.modn=function(A){return this.modrn(A)},s.prototype.idivn=function(A){var I=A<0;I&&(A=-A),r(A<=67108863);for(var D=0,z=this.length-1;z>=0;z--){var G=(this.words[z]|0)+D*67108864;this.words[z]=G/A|0,D=G%A}return this._strip(),I?this.ineg():this},s.prototype.divn=function(A){return this.clone().idivn(A)},s.prototype.egcd=function(A){r(A.negative===0),r(!A.isZero());var I=this,D=A.clone();I.negative!==0?I=I.umod(A):I=I.clone();for(var z=new s(1),G=new s(0),te=new s(0),K=new s(1),q=0;I.isEven()&&D.isEven();)I.iushrn(1),D.iushrn(1),++q;for(var M=D.clone(),_=I.clone();!I.isZero();){for(var Y=0,X=1;(I.words[0]&X)===0&&Y<26;++Y,X<<=1);if(Y>0)for(I.iushrn(Y);Y-- >0;)(z.isOdd()||G.isOdd())&&(z.iadd(M),G.isub(_)),z.iushrn(1),G.iushrn(1);for(var re=0,oe=1;(D.words[0]&oe)===0&&re<26;++re,oe<<=1);if(re>0)for(D.iushrn(re);re-- >0;)(te.isOdd()||K.isOdd())&&(te.iadd(M),K.isub(_)),te.iushrn(1),K.iushrn(1);I.cmp(D)>=0?(I.isub(D),z.isub(te),G.isub(K)):(D.isub(I),te.isub(z),K.isub(G))}return{a:te,b:K,gcd:D.iushln(q)}},s.prototype._invmp=function(A){r(A.negative===0),r(!A.isZero());var I=this,D=A.clone();I.negative!==0?I=I.umod(A):I=I.clone();for(var z=new s(1),G=new s(0),te=D.clone();I.cmpn(1)>0&&D.cmpn(1)>0;){for(var K=0,q=1;(I.words[0]&q)===0&&K<26;++K,q<<=1);if(K>0)for(I.iushrn(K);K-- >0;)z.isOdd()&&z.iadd(te),z.iushrn(1);for(var M=0,_=1;(D.words[0]&_)===0&&M<26;++M,_<<=1);if(M>0)for(D.iushrn(M);M-- >0;)G.isOdd()&&G.iadd(te),G.iushrn(1);I.cmp(D)>=0?(I.isub(D),z.isub(G)):(D.isub(I),G.isub(z))}var Y;return I.cmpn(1)===0?Y=z:Y=G,Y.cmpn(0)<0&&Y.iadd(A),Y},s.prototype.gcd=function(A){if(this.isZero())return A.abs();if(A.isZero())return this.abs();var I=this.clone(),D=A.clone();I.negative=0,D.negative=0;for(var z=0;I.isEven()&&D.isEven();z++)I.iushrn(1),D.iushrn(1);do{for(;I.isEven();)I.iushrn(1);for(;D.isEven();)D.iushrn(1);var G=I.cmp(D);if(G<0){var te=I;I=D,D=te}else if(G===0||D.cmpn(1)===0)break;I.isub(D)}while(!0);return D.iushln(z)},s.prototype.invm=function(A){return this.egcd(A).a.umod(A)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(A){return this.words[0]&A},s.prototype.bincn=function(A){r(typeof A=="number");var I=A%26,D=(A-I)/26,z=1<<I;if(this.length<=D)return this._expand(D+1),this.words[D]|=z,this;for(var G=z,te=D;G!==0&&te<this.length;te++){var K=this.words[te]|0;K+=G,G=K>>>26,K&=67108863,this.words[te]=K}return G!==0&&(this.words[te]=G,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(A){var I=A<0;if(this.negative!==0&&!I)return-1;if(this.negative===0&&I)return 1;this._strip();var D;if(this.length>1)D=1;else{I&&(A=-A),r(A<=67108863,"Number is too big");var z=this.words[0]|0;D=z===A?0:z<A?-1:1}return this.negative!==0?-D|0:D},s.prototype.cmp=function(A){if(this.negative!==0&&A.negative===0)return-1;if(this.negative===0&&A.negative!==0)return 1;var I=this.ucmp(A);return this.negative!==0?-I|0:I},s.prototype.ucmp=function(A){if(this.length>A.length)return 1;if(this.length<A.length)return-1;for(var I=0,D=this.length-1;D>=0;D--){var z=this.words[D]|0,G=A.words[D]|0;if(z!==G){z<G?I=-1:z>G&&(I=1);break}}return I},s.prototype.gtn=function(A){return this.cmpn(A)===1},s.prototype.gt=function(A){return this.cmp(A)===1},s.prototype.gten=function(A){return this.cmpn(A)>=0},s.prototype.gte=function(A){return this.cmp(A)>=0},s.prototype.ltn=function(A){return this.cmpn(A)===-1},s.prototype.lt=function(A){return this.cmp(A)===-1},s.prototype.lten=function(A){return this.cmpn(A)<=0},s.prototype.lte=function(A){return this.cmp(A)<=0},s.prototype.eqn=function(A){return this.cmpn(A)===0},s.prototype.eq=function(A){return this.cmp(A)===0},s.red=function(A){return new W(A)},s.prototype.toRed=function(A){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),A.convertTo(this)._forceRed(A)},s.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(A){return this.red=A,this},s.prototype.forceRed=function(A){return r(!this.red,"Already a number in reduction context"),this._forceRed(A)},s.prototype.redAdd=function(A){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,A)},s.prototype.redIAdd=function(A){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,A)},s.prototype.redSub=function(A){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,A)},s.prototype.redISub=function(A){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,A)},s.prototype.redShl=function(A){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,A)},s.prototype.redMul=function(A){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,A),this.red.mul(this,A)},s.prototype.redIMul=function(A){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,A),this.red.imul(this,A)},s.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(A){return r(this.red&&!A.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,A)};var U={k256:null,p224:null,p192:null,p25519:null};function R(B,A){this.name=B,this.p=new s(A,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}R.prototype._tmp=function(){var A=new s(null);return A.words=new Array(Math.ceil(this.n/13)),A},R.prototype.ireduce=function(A){var I=A,D;do this.split(I,this.tmp),I=this.imulK(I),I=I.iadd(this.tmp),D=I.bitLength();while(D>this.n);var z=D<this.n?-1:I.ucmp(this.p);return z===0?(I.words[0]=0,I.length=1):z>0?I.isub(this.p):I.strip!==void 0?I.strip():I._strip(),I},R.prototype.split=function(A,I){A.iushrn(this.n,0,I)},R.prototype.imulK=function(A){return A.imul(this.k)};function $(){R.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i($,R),$.prototype.split=function(A,I){for(var D=4194303,z=Math.min(A.length,9),G=0;G<z;G++)I.words[G]=A.words[G];if(I.length=z,A.length<=9){A.words[0]=0,A.length=1;return}var te=A.words[9];for(I.words[I.length++]=te&D,G=10;G<A.length;G++){var K=A.words[G]|0;A.words[G-10]=(K&D)<<4|te>>>22,te=K}te>>>=22,A.words[G-10]=te,te===0&&A.length>10?A.length-=10:A.length-=9},$.prototype.imulK=function(A){A.words[A.length]=0,A.words[A.length+1]=0,A.length+=2;for(var I=0,D=0;D<A.length;D++){var z=A.words[D]|0;I+=z*977,A.words[D]=I&67108863,I=z*64+(I/67108864|0)}return A.words[A.length-1]===0&&(A.length--,A.words[A.length-1]===0&&A.length--),A};function V(){R.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(V,R);function j(){R.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(j,R);function F(){R.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(F,R),F.prototype.imulK=function(A){for(var I=0,D=0;D<A.length;D++){var z=(A.words[D]|0)*19+I,G=z&67108863;z>>>=26,A.words[D]=G,I=z}return I!==0&&(A.words[A.length++]=I),A},s._prime=function(A){if(U[A])return U[A];var I;if(A==="k256")I=new $;else if(A==="p224")I=new V;else if(A==="p192")I=new j;else if(A==="p25519")I=new F;else throw new Error("Unknown prime "+A);return U[A]=I,I};function W(B){if(typeof B=="string"){var A=s._prime(B);this.m=A.p,this.prime=A}else r(B.gtn(1),"modulus must be greater than 1"),this.m=B,this.prime=null}W.prototype._verify1=function(A){r(A.negative===0,"red works only with positives"),r(A.red,"red works only with red numbers")},W.prototype._verify2=function(A,I){r((A.negative|I.negative)===0,"red works only with positives"),r(A.red&&A.red===I.red,"red works only with red numbers")},W.prototype.imod=function(A){return this.prime?this.prime.ireduce(A)._forceRed(this):(u(A,A.umod(this.m)._forceRed(this)),A)},W.prototype.neg=function(A){return A.isZero()?A.clone():this.m.sub(A)._forceRed(this)},W.prototype.add=function(A,I){this._verify2(A,I);var D=A.add(I);return D.cmp(this.m)>=0&&D.isub(this.m),D._forceRed(this)},W.prototype.iadd=function(A,I){this._verify2(A,I);var D=A.iadd(I);return D.cmp(this.m)>=0&&D.isub(this.m),D},W.prototype.sub=function(A,I){this._verify2(A,I);var D=A.sub(I);return D.cmpn(0)<0&&D.iadd(this.m),D._forceRed(this)},W.prototype.isub=function(A,I){this._verify2(A,I);var D=A.isub(I);return D.cmpn(0)<0&&D.iadd(this.m),D},W.prototype.shl=function(A,I){return this._verify1(A),this.imod(A.ushln(I))},W.prototype.imul=function(A,I){return this._verify2(A,I),this.imod(A.imul(I))},W.prototype.mul=function(A,I){return this._verify2(A,I),this.imod(A.mul(I))},W.prototype.isqr=function(A){return this.imul(A,A.clone())},W.prototype.sqr=function(A){return this.mul(A,A)},W.prototype.sqrt=function(A){if(A.isZero())return A.clone();var I=this.m.andln(3);if(r(I%2===1),I===3){var D=this.m.add(new s(1)).iushrn(2);return this.pow(A,D)}for(var z=this.m.subn(1),G=0;!z.isZero()&&z.andln(1)===0;)G++,z.iushrn(1);r(!z.isZero());var te=new s(1).toRed(this),K=te.redNeg(),q=this.m.subn(1).iushrn(1),M=this.m.bitLength();for(M=new s(2*M*M).toRed(this);this.pow(M,q).cmp(K)!==0;)M.redIAdd(K);for(var _=this.pow(M,z),Y=this.pow(A,z.addn(1).iushrn(1)),X=this.pow(A,z),re=G;X.cmp(te)!==0;){for(var oe=X,Ee=0;oe.cmp(te)!==0;Ee++)oe=oe.redSqr();r(Ee<re);var ce=this.pow(_,new s(1).iushln(re-Ee-1));Y=Y.redMul(ce),_=ce.redSqr(),X=X.redMul(_),re=Ee}return Y},W.prototype.invm=function(A){var I=A._invmp(this.m);return I.negative!==0?(I.negative=0,this.imod(I).redNeg()):this.imod(I)},W.prototype.pow=function(A,I){if(I.isZero())return new s(1).toRed(this);if(I.cmpn(1)===0)return A.clone();var D=4,z=new Array(1<<D);z[0]=new s(1).toRed(this),z[1]=A;for(var G=2;G<z.length;G++)z[G]=this.mul(z[G-1],A);var te=z[0],K=0,q=0,M=I.bitLength()%26;for(M===0&&(M=26),G=I.length-1;G>=0;G--){for(var _=I.words[G],Y=M-1;Y>=0;Y--){var X=_>>Y&1;if(te!==z[0]&&(te=this.sqr(te)),X===0&&K===0){q=0;continue}K<<=1,K|=X,q++,!(q!==D&&(G!==0||Y!==0))&&(te=this.mul(te,z[K]),q=0,K=0)}M=26}return te},W.prototype.convertTo=function(A){var I=A.umod(this.m);return I===A?I.clone():I},W.prototype.convertFrom=function(A){var I=A.clone();return I.red=null,I},s.mont=function(A){return new H(A)};function H(B){W.call(this,B),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(H,W),H.prototype.convertTo=function(A){return this.imod(A.ushln(this.shift))},H.prototype.convertFrom=function(A){var I=this.imod(A.mul(this.rinv));return I.red=null,I},H.prototype.imul=function(A,I){if(A.isZero()||I.isZero())return A.words[0]=0,A.length=1,A;var D=A.imul(I),z=D.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),G=D.isub(z).iushrn(this.shift),te=G;return G.cmp(this.m)>=0?te=G.isub(this.m):G.cmpn(0)<0&&(te=G.iadd(this.m)),te._forceRed(this)},H.prototype.mul=function(A,I){if(A.isZero()||I.isZero())return new s(0)._forceRed(this);var D=A.mul(I),z=D.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),G=D.isub(z).iushrn(this.shift),te=G;return G.cmp(this.m)>=0?te=G.isub(this.m):G.cmpn(0)<0&&(te=G.iadd(this.m)),te._forceRed(this)},H.prototype.invm=function(A){var I=this.imod(A._invmp(this.m).mul(this.r2));return I._forceRed(this)}})(t,mut)})(NT)),NT.exports}var gut=sme();const gZ=us(gut);var $A={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var yZ;function ome(){return yZ||(yZ=1,(function(t,e){var n=qB(),r=n.Buffer;function i(o,a){for(var l in o)a[l]=o[l]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=n:(i(n,e),e.Buffer=s);function s(o,a,l){return r(o,a,l)}s.prototype=Object.create(r.prototype),i(r,s),s.from=function(o,a,l){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,a,l)},s.alloc=function(o,a,l){if(typeof o!="number")throw new TypeError("Argument must be a number");var c=r(o);return a!==void 0?typeof l=="string"?c.fill(a,l):c.fill(a):c.fill(0),c},s.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},s.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(o)}})($A,$A.exports)),$A.exports}var p3,xZ;function yut(){if(xZ)return p3;xZ=1;var t=ome().Buffer;function e(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var s=0;s<n.length;s++){var o=n.charAt(s),a=o.charCodeAt(0);if(r[a]!==255)throw new TypeError(o+" is ambiguous");r[a]=s}var l=n.length,c=n.charAt(0),u=Math.log(l)/Math.log(256),f=Math.log(256)/Math.log(l);function m(x){if((Array.isArray(x)||x instanceof Uint8Array)&&(x=t.from(x)),!t.isBuffer(x))throw new TypeError("Expected Buffer");if(x.length===0)return"";for(var b=0,E=0,C=0,k=x.length;C!==k&&x[C]===0;)C++,b++;for(var O=(k-C)*f+1>>>0,U=new Uint8Array(O);C!==k;){for(var R=x[C],$=0,V=O-1;(R!==0||$<E)&&V!==-1;V--,$++)R+=256*U[V]>>>0,U[V]=R%l>>>0,R=R/l>>>0;if(R!==0)throw new Error("Non-zero carry");E=$,C++}for(var j=O-E;j!==O&&U[j]===0;)j++;for(var F=c.repeat(b);j<O;++j)F+=n.charAt(U[j]);return F}function g(x){if(typeof x!="string")throw new TypeError("Expected String");if(x.length===0)return t.alloc(0);for(var b=0,E=0,C=0;x[b]===c;)E++,b++;for(var k=(x.length-b)*u+1>>>0,O=new Uint8Array(k);b<x.length;){var U=x.charCodeAt(b);if(U>255)return;var R=r[U];if(R===255)return;for(var $=0,V=k-1;(R!==0||$<C)&&V!==-1;V--,$++)R+=l*O[V]>>>0,O[V]=R%256>>>0,R=R/256>>>0;if(R!==0)throw new Error("Non-zero carry");C=$,b++}for(var j=k-C;j!==k&&O[j]===0;)j++;var F=t.allocUnsafe(E+(k-j));F.fill(0,0,E);for(var W=E;j!==k;)F[W++]=O[j++];return F}function v(x){var b=g(x);if(b)return b;throw new Error("Non-base"+l+" character")}return{encode:m,decodeUnsafe:g,decode:v}}return p3=e,p3}var m3,vZ;function xut(){if(vZ)return m3;vZ=1;var t=yut(),e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return m3=t(e),m3}var vut=xut();const ss=us(vut),bZ=Bpe;var Xn={},g3,wZ;function but(){if(wZ)return g3;wZ=1;var t=ome().Buffer;function e(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var s=0;s<n.length;s++){var o=n.charAt(s),a=o.charCodeAt(0);if(r[a]!==255)throw new TypeError(o+" is ambiguous");r[a]=s}var l=n.length,c=n.charAt(0),u=Math.log(l)/Math.log(256),f=Math.log(256)/Math.log(l);function m(x){if((Array.isArray(x)||x instanceof Uint8Array)&&(x=t.from(x)),!t.isBuffer(x))throw new TypeError("Expected Buffer");if(x.length===0)return"";for(var b=0,E=0,C=0,k=x.length;C!==k&&x[C]===0;)C++,b++;for(var O=(k-C)*f+1>>>0,U=new Uint8Array(O);C!==k;){for(var R=x[C],$=0,V=O-1;(R!==0||$<E)&&V!==-1;V--,$++)R+=256*U[V]>>>0,U[V]=R%l>>>0,R=R/l>>>0;if(R!==0)throw new Error("Non-zero carry");E=$,C++}for(var j=O-E;j!==O&&U[j]===0;)j++;for(var F=c.repeat(b);j<O;++j)F+=n.charAt(U[j]);return F}function g(x){if(typeof x!="string")throw new TypeError("Expected String");if(x.length===0)return t.alloc(0);for(var b=0,E=0,C=0;x[b]===c;)E++,b++;for(var k=(x.length-b)*u+1>>>0,O=new Uint8Array(k);b<x.length;){var U=x.charCodeAt(b);if(U>255)return;var R=r[U];if(R===255)return;for(var $=0,V=k-1;(R!==0||$<C)&&V!==-1;V--,$++)R+=l*O[V]>>>0,O[V]=R%256>>>0,R=R/256>>>0;if(R!==0)throw new Error("Non-zero carry");C=$,b++}for(var j=k-C;j!==k&&O[j]===0;)j++;var F=t.allocUnsafe(E+(k-j));F.fill(0,0,E);for(var W=E;j!==k;)F[W++]=O[j++];return F}function v(x){var b=g(x);if(b)return b;throw new Error("Non-base"+l+" character")}return{encode:m,decodeUnsafe:g,decode:v}}return g3=e,g3}var y3,EZ;function wut(){if(EZ)return y3;EZ=1;var t=but(),e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return y3=t(e),y3}function $u(t,e,n){return e<=t&&t<=n}function VN(t){if(t===void 0)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}function Eut(t){for(var e=String(t),n=e.length,r=0,i=[];r<n;){var s=e.charCodeAt(r);if(s<55296||s>57343)i.push(s);else if(56320<=s&&s<=57343)i.push(65533);else if(55296<=s&&s<=56319)if(r===n-1)i.push(65533);else{var o=t.charCodeAt(r+1);if(56320<=o&&o<=57343){var a=s&1023,l=o&1023;i.push(65536+(a<<10)+l),r+=1}else i.push(65533)}r+=1}return i}function Sut(t){for(var e="",n=0;n<t.length;++n){var r=t[n];r<=65535?e+=String.fromCharCode(r):(r-=65536,e+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return e}var IC=-1;function GB(t){this.tokens=[].slice.call(t)}GB.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():IC},prepend:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(t)},push:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.push(e.shift());else this.tokens.push(t)}};var Tx=-1;function x3(t,e){if(t)throw TypeError("Decoder error");return e||65533}var PC="utf-8";function RC(t,e){if(!(this instanceof RC))return new RC(t,e);if(t=t!==void 0?String(t).toLowerCase():PC,t!==PC)throw new Error("Encoding not supported. Only utf-8 is supported");e=VN(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}RC.prototype={decode:function(e,n){var r;typeof e=="object"&&e instanceof ArrayBuffer?r=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):r=new Uint8Array(0),n=VN(n),this._streaming||(this._decoder=new Aut({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!n.stream;for(var i=new GB(r),s=[],o;!i.endOfStream()&&(o=this._decoder.handler(i,i.read()),o!==Tx);)o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o));if(!this._streaming){do{if(o=this._decoder.handler(i,i.read()),o===Tx)break;o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o))}while(!i.endOfStream());this._decoder=null}return s.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(s[0]===65279?(this._BOMseen=!0,s.shift()):this._BOMseen=!0),Sut(s)}};function OC(t,e){if(!(this instanceof OC))return new OC(t,e);if(t=t!==void 0?String(t).toLowerCase():PC,t!==PC)throw new Error("Encoding not supported. Only utf-8 is supported");e=VN(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}OC.prototype={encode:function(e,n){e=e?String(e):"",n=VN(n),this._streaming||(this._encoder=new Tut(this._options)),this._streaming=!!n.stream;for(var r=[],i=new GB(Eut(e)),s;!i.endOfStream()&&(s=this._encoder.handler(i,i.read()),s!==Tx);)Array.isArray(s)?r.push.apply(r,s):r.push(s);if(!this._streaming){for(;s=this._encoder.handler(i,i.read()),s!==Tx;)Array.isArray(s)?r.push.apply(r,s):r.push(s);this._encoder=null}return new Uint8Array(r)}};function Aut(t){var e=t.fatal,n=0,r=0,i=0,s=128,o=191;this.handler=function(a,l){if(l===IC&&i!==0)return i=0,x3(e);if(l===IC)return Tx;if(i===0){if($u(l,0,127))return l;if($u(l,194,223))i=1,n=l-192;else if($u(l,224,239))l===224&&(s=160),l===237&&(o=159),i=2,n=l-224;else if($u(l,240,244))l===240&&(s=144),l===244&&(o=143),i=3,n=l-240;else return x3(e);return n=n<<6*i,null}if(!$u(l,s,o))return n=i=r=0,s=128,o=191,a.prepend(l),x3(e);if(s=128,o=191,r+=1,n+=l-128<<6*(i-r),r!==i)return null;var c=n;return n=i=r=0,c}}function Tut(t){t.fatal,this.handler=function(e,n){if(n===IC)return Tx;if($u(n,0,127))return n;var r,i;$u(n,128,2047)?(r=1,i=192):$u(n,2048,65535)?(r=2,i=224):$u(n,65536,1114111)&&(r=3,i=240);for(var s=[(n>>6*r)+i];r>0;){var o=n>>6*(r-1);s.push(128|o&63),r-=1}return s}}const kut=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:RC,TextEncoder:OC},Symbol.toStringTag,{value:"Module"})),Cut=uee(kut);var SZ;function Nut(){if(SZ)return Xn;SZ=1;var t=Xn&&Xn.__createBinding||(Object.create?(function(j,F,W,H){H===void 0&&(H=W),Object.defineProperty(j,H,{enumerable:!0,get:function(){return F[W]}})}):(function(j,F,W,H){H===void 0&&(H=W),j[H]=F[W]})),e=Xn&&Xn.__setModuleDefault||(Object.create?(function(j,F){Object.defineProperty(j,"default",{enumerable:!0,value:F})}):function(j,F){j.default=F}),n=Xn&&Xn.__decorate||function(j,F,W,H){var B=arguments.length,A=B<3?F:H===null?H=Object.getOwnPropertyDescriptor(F,W):H,I;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(j,F,W,H);else for(var D=j.length-1;D>=0;D--)(I=j[D])&&(A=(B<3?I(A):B>3?I(F,W,A):I(F,W))||A);return B>3&&A&&Object.defineProperty(F,W,A),A},r=Xn&&Xn.__importStar||function(j){if(j&&j.__esModule)return j;var F={};if(j!=null)for(var W in j)W!=="default"&&Object.hasOwnProperty.call(j,W)&&t(F,j,W);return e(F,j),F},i=Xn&&Xn.__importDefault||function(j){return j&&j.__esModule?j:{default:j}};Object.defineProperty(Xn,"__esModule",{value:!0}),Xn.deserializeUnchecked=Xn.deserialize=Xn.serialize=Xn.BinaryReader=Xn.BinaryWriter=Xn.BorshError=Xn.baseDecode=Xn.baseEncode=void 0;const s=i(sme()),o=i(wut()),a=r(Cut),l=typeof TextDecoder!="function"?a.TextDecoder:TextDecoder,c=new l("utf-8",{fatal:!0});function u(j){return typeof j=="string"&&(j=on.from(j,"utf8")),o.default.encode(on.from(j))}Xn.baseEncode=u;function f(j){return on.from(o.default.decode(j))}Xn.baseDecode=f;const m=1024;class g extends Error{constructor(F){super(F),this.fieldPath=[],this.originalMessage=F}addToFieldPath(F){this.fieldPath.splice(0,0,F),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}Xn.BorshError=g;class v{constructor(){this.buf=on.alloc(m),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=on.concat([this.buf,on.alloc(m)]))}writeU8(F){this.maybeResize(),this.buf.writeUInt8(F,this.length),this.length+=1}writeU16(F){this.maybeResize(),this.buf.writeUInt16LE(F,this.length),this.length+=2}writeU32(F){this.maybeResize(),this.buf.writeUInt32LE(F,this.length),this.length+=4}writeU64(F){this.maybeResize(),this.writeBuffer(on.from(new s.default(F).toArray("le",8)))}writeU128(F){this.maybeResize(),this.writeBuffer(on.from(new s.default(F).toArray("le",16)))}writeU256(F){this.maybeResize(),this.writeBuffer(on.from(new s.default(F).toArray("le",32)))}writeU512(F){this.maybeResize(),this.writeBuffer(on.from(new s.default(F).toArray("le",64)))}writeBuffer(F){this.buf=on.concat([on.from(this.buf.subarray(0,this.length)),F,on.alloc(m)]),this.length+=F.length}writeString(F){this.maybeResize();const W=on.from(F,"utf8");this.writeU32(W.length),this.writeBuffer(W)}writeFixedArray(F){this.writeBuffer(on.from(F))}writeArray(F,W){this.maybeResize(),this.writeU32(F.length);for(const H of F)this.maybeResize(),W(H)}toArray(){return this.buf.subarray(0,this.length)}}Xn.BinaryWriter=v;function x(j,F,W){const H=W.value;W.value=function(...B){try{return H.apply(this,B)}catch(A){if(A instanceof RangeError){const I=A.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(I)>=0)throw new g("Reached the end of buffer when deserializing")}throw A}}}class b{constructor(F){this.buf=F,this.offset=0}readU8(){const F=this.buf.readUInt8(this.offset);return this.offset+=1,F}readU16(){const F=this.buf.readUInt16LE(this.offset);return this.offset+=2,F}readU32(){const F=this.buf.readUInt32LE(this.offset);return this.offset+=4,F}readU64(){const F=this.readBuffer(8);return new s.default(F,"le")}readU128(){const F=this.readBuffer(16);return new s.default(F,"le")}readU256(){const F=this.readBuffer(32);return new s.default(F,"le")}readU512(){const F=this.readBuffer(64);return new s.default(F,"le")}readBuffer(F){if(this.offset+F>this.buf.length)throw new g(`Expected buffer length ${F} isn't within bounds`);const W=this.buf.slice(this.offset,this.offset+F);return this.offset+=F,W}readString(){const F=this.readU32(),W=this.readBuffer(F);try{return c.decode(W)}catch(H){throw new g(`Error decoding UTF-8 string: ${H}`)}}readFixedArray(F){return new Uint8Array(this.readBuffer(F))}readArray(F){const W=this.readU32(),H=Array();for(let B=0;B<W;++B)H.push(F());return H}}n([x],b.prototype,"readU8",null),n([x],b.prototype,"readU16",null),n([x],b.prototype,"readU32",null),n([x],b.prototype,"readU64",null),n([x],b.prototype,"readU128",null),n([x],b.prototype,"readU256",null),n([x],b.prototype,"readU512",null),n([x],b.prototype,"readString",null),n([x],b.prototype,"readFixedArray",null),n([x],b.prototype,"readArray",null),Xn.BinaryReader=b;function E(j){return j.charAt(0).toUpperCase()+j.slice(1)}function C(j,F,W,H,B){try{if(typeof H=="string")B[`write${E(H)}`](W);else if(H instanceof Array)if(typeof H[0]=="number"){if(W.length!==H[0])throw new g(`Expecting byte array of length ${H[0]}, but got ${W.length} bytes`);B.writeFixedArray(W)}else if(H.length===2&&typeof H[1]=="number"){if(W.length!==H[1])throw new g(`Expecting byte array of length ${H[1]}, but got ${W.length} bytes`);for(let A=0;A<H[1];A++)C(j,null,W[A],H[0],B)}else B.writeArray(W,A=>{C(j,F,A,H[0],B)});else if(H.kind!==void 0)switch(H.kind){case"option":{W==null?B.writeU8(0):(B.writeU8(1),C(j,F,W,H.type,B));break}case"map":{B.writeU32(W.size),W.forEach((A,I)=>{C(j,F,I,H.key,B),C(j,F,A,H.value,B)});break}default:throw new g(`FieldType ${H} unrecognized`)}else k(j,W,B)}catch(A){throw A instanceof g&&A.addToFieldPath(F),A}}function k(j,F,W){if(typeof F.borshSerialize=="function"){F.borshSerialize(W);return}const H=j.get(F.constructor);if(!H)throw new g(`Class ${F.constructor.name} is missing in schema`);if(H.kind==="struct")H.fields.map(([B,A])=>{C(j,B,F[B],A,W)});else if(H.kind==="enum"){const B=F[H.field];for(let A=0;A<H.values.length;++A){const[I,D]=H.values[A];if(I===B){W.writeU8(A),C(j,I,F[I],D,W);break}}}else throw new g(`Unexpected schema kind: ${H.kind} for ${F.constructor.name}`)}function O(j,F,W=v){const H=new W;return k(j,F,H),H.toArray()}Xn.serialize=O;function U(j,F,W,H){try{if(typeof W=="string")return H[`read${E(W)}`]();if(W instanceof Array){if(typeof W[0]=="number")return H.readFixedArray(W[0]);if(typeof W[1]=="number"){const B=[];for(let A=0;A<W[1];A++)B.push(U(j,null,W[0],H));return B}else return H.readArray(()=>U(j,F,W[0],H))}if(W.kind==="option")return H.readU8()?U(j,F,W.type,H):void 0;if(W.kind==="map"){let B=new Map;const A=H.readU32();for(let I=0;I<A;I++){const D=U(j,F,W.key,H),z=U(j,F,W.value,H);B.set(D,z)}return B}return R(j,W,H)}catch(B){throw B instanceof g&&B.addToFieldPath(F),B}}function R(j,F,W){if(typeof F.borshDeserialize=="function")return F.borshDeserialize(W);const H=j.get(F);if(!H)throw new g(`Class ${F.name} is missing in schema`);if(H.kind==="struct"){const B={};for(const[A,I]of j.get(F).fields)B[A]=U(j,A,I,W);return new F(B)}if(H.kind==="enum"){const B=W.readU8();if(B>=H.values.length)throw new g(`Enum index: ${B} is out of range`);const[A,I]=H.values[B],D=U(j,A,I,W);return new F({[A]:D})}throw new g(`Unexpected schema kind: ${H.kind} for ${F.constructor.name}`)}function $(j,F,W,H=b){const B=new H(W),A=R(j,F,B);if(B.offset<W.length)throw new g(`Unexpected ${W.length-B.offset} bytes after deserialized data`);return A}Xn.deserialize=$;function V(j,F,W,H=b){const B=new H(W);return R(j,F,B)}return Xn.deserializeUnchecked=V,Xn}var v3=Nut(),Fe={},AZ;function _ut(){if(AZ)return Fe;AZ=1,Object.defineProperty(Fe,"__esModule",{value:!0}),Fe.s16=Fe.s8=Fe.nu64be=Fe.u48be=Fe.u40be=Fe.u32be=Fe.u24be=Fe.u16be=Fe.nu64=Fe.u48=Fe.u40=Fe.u32=Fe.u24=Fe.u16=Fe.u8=Fe.offset=Fe.greedy=Fe.Constant=Fe.UTF8=Fe.CString=Fe.Blob=Fe.Boolean=Fe.BitField=Fe.BitStructure=Fe.VariantLayout=Fe.Union=Fe.UnionLayoutDiscriminator=Fe.UnionDiscriminator=Fe.Structure=Fe.Sequence=Fe.DoubleBE=Fe.Double=Fe.FloatBE=Fe.Float=Fe.NearInt64BE=Fe.NearInt64=Fe.NearUInt64BE=Fe.NearUInt64=Fe.IntBE=Fe.Int=Fe.UIntBE=Fe.UInt=Fe.OffsetLayout=Fe.GreedyCount=Fe.ExternalLayout=Fe.bindConstructorLayout=Fe.nameWithProperty=Fe.Layout=Fe.uint8ArrayToBuffer=Fe.checkUint8Array=void 0,Fe.constant=Fe.utf8=Fe.cstr=Fe.blob=Fe.unionLayoutDiscriminator=Fe.union=Fe.seq=Fe.bits=Fe.struct=Fe.f64be=Fe.f64=Fe.f32be=Fe.f32=Fe.ns64be=Fe.s48be=Fe.s40be=Fe.s32be=Fe.s24be=Fe.s16be=Fe.ns64=Fe.s48=Fe.s40=Fe.s32=Fe.s24=void 0;const t=qB();function e(M){if(!(M instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}Fe.checkUint8Array=e;function n(M){return e(M),t.Buffer.from(M.buffer,M.byteOffset,M.length)}Fe.uint8ArrayToBuffer=n;let r=class{constructor(_,Y){if(!Number.isInteger(_))throw new TypeError("span must be an integer");this.span=_,this.property=Y}makeDestinationObject(){return{}}getSpan(_,Y){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(_){const Y=Object.create(this.constructor.prototype);return Object.assign(Y,this),Y.property=_,Y}fromArray(_){}};Fe.Layout=r;function i(M,_){return _.property?M+"["+_.property+"]":M}Fe.nameWithProperty=i;function s(M,_){if(typeof M!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(M,"layout_"))throw new Error("Class is already bound to a layout");if(!(_&&_ instanceof r))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(_,"boundConstructor_"))throw new Error("layout is already bound to a constructor");M.layout_=_,_.boundConstructor_=M,_.makeDestinationObject=(()=>new M),Object.defineProperty(M.prototype,"encode",{value(Y,X){return _.encode(this,Y,X)},writable:!0}),Object.defineProperty(M,"decode",{value(Y,X){return _.decode(Y,X)},writable:!0})}Fe.bindConstructorLayout=s;class o extends r{isCount(){throw new Error("ExternalLayout is abstract")}}Fe.ExternalLayout=o;class a extends o{constructor(_=1,Y){if(!Number.isInteger(_)||0>=_)throw new TypeError("elementSpan must be a (positive) integer");super(-1,Y),this.elementSpan=_}isCount(){return!0}decode(_,Y=0){e(_);const X=_.length-Y;return Math.floor(X/this.elementSpan)}encode(_,Y,X){return 0}}Fe.GreedyCount=a;class l extends o{constructor(_,Y=0,X){if(!(_ instanceof r))throw new TypeError("layout must be a Layout");if(!Number.isInteger(Y))throw new TypeError("offset must be integer or undefined");super(_.span,X||_.property),this.layout=_,this.offset=Y}isCount(){return this.layout instanceof c||this.layout instanceof u}decode(_,Y=0){return this.layout.decode(_,Y+this.offset)}encode(_,Y,X=0){return this.layout.encode(_,Y,X+this.offset)}}Fe.OffsetLayout=l;class c extends r{constructor(_,Y){if(super(_,Y),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(_,Y=0){return n(_).readUIntLE(Y,this.span)}encode(_,Y,X=0){return n(Y).writeUIntLE(_,X,this.span),this.span}}Fe.UInt=c;class u extends r{constructor(_,Y){if(super(_,Y),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(_,Y=0){return n(_).readUIntBE(Y,this.span)}encode(_,Y,X=0){return n(Y).writeUIntBE(_,X,this.span),this.span}}Fe.UIntBE=u;class f extends r{constructor(_,Y){if(super(_,Y),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(_,Y=0){return n(_).readIntLE(Y,this.span)}encode(_,Y,X=0){return n(Y).writeIntLE(_,X,this.span),this.span}}Fe.Int=f;class m extends r{constructor(_,Y){if(super(_,Y),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(_,Y=0){return n(_).readIntBE(Y,this.span)}encode(_,Y,X=0){return n(Y).writeIntBE(_,X,this.span),this.span}}Fe.IntBE=m;const g=Math.pow(2,32);function v(M){const _=Math.floor(M/g),Y=M-_*g;return{hi32:_,lo32:Y}}function x(M,_){return M*g+_}class b extends r{constructor(_){super(8,_)}decode(_,Y=0){const X=n(_),re=X.readUInt32LE(Y),oe=X.readUInt32LE(Y+4);return x(oe,re)}encode(_,Y,X=0){const re=v(_),oe=n(Y);return oe.writeUInt32LE(re.lo32,X),oe.writeUInt32LE(re.hi32,X+4),8}}Fe.NearUInt64=b;class E extends r{constructor(_){super(8,_)}decode(_,Y=0){const X=n(_),re=X.readUInt32BE(Y),oe=X.readUInt32BE(Y+4);return x(re,oe)}encode(_,Y,X=0){const re=v(_),oe=n(Y);return oe.writeUInt32BE(re.hi32,X),oe.writeUInt32BE(re.lo32,X+4),8}}Fe.NearUInt64BE=E;class C extends r{constructor(_){super(8,_)}decode(_,Y=0){const X=n(_),re=X.readUInt32LE(Y),oe=X.readInt32LE(Y+4);return x(oe,re)}encode(_,Y,X=0){const re=v(_),oe=n(Y);return oe.writeUInt32LE(re.lo32,X),oe.writeInt32LE(re.hi32,X+4),8}}Fe.NearInt64=C;class k extends r{constructor(_){super(8,_)}decode(_,Y=0){const X=n(_),re=X.readInt32BE(Y),oe=X.readUInt32BE(Y+4);return x(re,oe)}encode(_,Y,X=0){const re=v(_),oe=n(Y);return oe.writeInt32BE(re.hi32,X),oe.writeUInt32BE(re.lo32,X+4),8}}Fe.NearInt64BE=k;class O extends r{constructor(_){super(4,_)}decode(_,Y=0){return n(_).readFloatLE(Y)}encode(_,Y,X=0){return n(Y).writeFloatLE(_,X),4}}Fe.Float=O;class U extends r{constructor(_){super(4,_)}decode(_,Y=0){return n(_).readFloatBE(Y)}encode(_,Y,X=0){return n(Y).writeFloatBE(_,X),4}}Fe.FloatBE=U;class R extends r{constructor(_){super(8,_)}decode(_,Y=0){return n(_).readDoubleLE(Y)}encode(_,Y,X=0){return n(Y).writeDoubleLE(_,X),8}}Fe.Double=R;class $ extends r{constructor(_){super(8,_)}decode(_,Y=0){return n(_).readDoubleBE(Y)}encode(_,Y,X=0){return n(Y).writeDoubleBE(_,X),8}}Fe.DoubleBE=$;class V extends r{constructor(_,Y,X){if(!(_ instanceof r))throw new TypeError("elementLayout must be a Layout");if(!(Y instanceof o&&Y.isCount()||Number.isInteger(Y)&&0<=Y))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let re=-1;!(Y instanceof o)&&0<_.span&&(re=Y*_.span),super(re,X),this.elementLayout=_,this.count=Y}getSpan(_,Y=0){if(0<=this.span)return this.span;let X=0,re=this.count;if(re instanceof o&&(re=re.decode(_,Y)),0<this.elementLayout.span)X=re*this.elementLayout.span;else{let oe=0;for(;oe<re;)X+=this.elementLayout.getSpan(_,Y+X),++oe}return X}decode(_,Y=0){const X=[];let re=0,oe=this.count;for(oe instanceof o&&(oe=oe.decode(_,Y));re<oe;)X.push(this.elementLayout.decode(_,Y)),Y+=this.elementLayout.getSpan(_,Y),re+=1;return X}encode(_,Y,X=0){const re=this.elementLayout,oe=_.reduce((Ee,ce)=>Ee+re.encode(ce,Y,X+Ee),0);return this.count instanceof o&&this.count.encode(_.length,Y,X),oe}}Fe.Sequence=V;class j extends r{constructor(_,Y,X){if(!(Array.isArray(_)&&_.reduce((oe,Ee)=>oe&&Ee instanceof r,!0)))throw new TypeError("fields must be array of Layout instances");typeof Y=="boolean"&&X===void 0&&(X=Y,Y=void 0);for(const oe of _)if(0>oe.span&&oe.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let re=-1;try{re=_.reduce((oe,Ee)=>oe+Ee.getSpan(),0)}catch{}super(re,Y),this.fields=_,this.decodePrefixes=!!X}getSpan(_,Y=0){if(0<=this.span)return this.span;let X=0;try{X=this.fields.reduce((re,oe)=>{const Ee=oe.getSpan(_,Y);return Y+=Ee,re+Ee},0)}catch{throw new RangeError("indeterminate span")}return X}decode(_,Y=0){e(_);const X=this.makeDestinationObject();for(const re of this.fields)if(re.property!==void 0&&(X[re.property]=re.decode(_,Y)),Y+=re.getSpan(_,Y),this.decodePrefixes&&_.length===Y)break;return X}encode(_,Y,X=0){const re=X;let oe=0,Ee=0;for(const ce of this.fields){let me=ce.span;if(Ee=0<me?me:0,ce.property!==void 0){const ue=_[ce.property];ue!==void 0&&(Ee=ce.encode(ue,Y,X),0>me&&(me=ce.getSpan(Y,X)))}oe=X,X+=me}return oe+Ee-re}fromArray(_){const Y=this.makeDestinationObject();for(const X of this.fields)X.property!==void 0&&0<_.length&&(Y[X.property]=_.shift());return Y}layoutFor(_){if(typeof _!="string")throw new TypeError("property must be string");for(const Y of this.fields)if(Y.property===_)return Y}offsetOf(_){if(typeof _!="string")throw new TypeError("property must be string");let Y=0;for(const X of this.fields){if(X.property===_)return Y;0>X.span?Y=-1:0<=Y&&(Y+=X.span)}}}Fe.Structure=j;class F{constructor(_){this.property=_}decode(_,Y){throw new Error("UnionDiscriminator is abstract")}encode(_,Y,X){throw new Error("UnionDiscriminator is abstract")}}Fe.UnionDiscriminator=F;class W extends F{constructor(_,Y){if(!(_ instanceof o&&_.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(Y||_.property||"variant"),this.layout=_}decode(_,Y){return this.layout.decode(_,Y)}encode(_,Y,X){return this.layout.encode(_,Y,X)}}Fe.UnionLayoutDiscriminator=W;class H extends r{constructor(_,Y,X){let re;if(_ instanceof c||_ instanceof u)re=new W(new l(_));else if(_ instanceof o&&_.isCount())re=new W(_);else if(_ instanceof F)re=_;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(Y===void 0&&(Y=null),!(Y===null||Y instanceof r))throw new TypeError("defaultLayout must be null or a Layout");if(Y!==null){if(0>Y.span)throw new Error("defaultLayout must have constant span");Y.property===void 0&&(Y=Y.replicate("content"))}let oe=-1;Y&&(oe=Y.span,0<=oe&&(_ instanceof c||_ instanceof u)&&(oe+=re.layout.span)),super(oe,X),this.discriminator=re,this.usesPrefixDiscriminator=_ instanceof c||_ instanceof u,this.defaultLayout=Y,this.registry={};let Ee=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(ce){return Ee(ce)},this.configGetSourceVariant=function(ce){Ee=ce.bind(this)}}getSpan(_,Y=0){if(0<=this.span)return this.span;const X=this.getVariant(_,Y);if(!X)throw new Error("unable to determine span for unrecognized variant");return X.getSpan(_,Y)}defaultGetSourceVariant(_){if(Object.prototype.hasOwnProperty.call(_,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(_,this.defaultLayout.property))return;const Y=this.registry[_[this.discriminator.property]];if(Y&&(!Y.layout||Y.property&&Object.prototype.hasOwnProperty.call(_,Y.property)))return Y}else for(const Y in this.registry){const X=this.registry[Y];if(X.property&&Object.prototype.hasOwnProperty.call(_,X.property))return X}throw new Error("unable to infer src variant")}decode(_,Y=0){let X;const re=this.discriminator,oe=re.decode(_,Y),Ee=this.registry[oe];if(Ee===void 0){const ce=this.defaultLayout;let me=0;this.usesPrefixDiscriminator&&(me=re.layout.span),X=this.makeDestinationObject(),X[re.property]=oe,X[ce.property]=ce.decode(_,Y+me)}else X=Ee.decode(_,Y);return X}encode(_,Y,X=0){const re=this.getSourceVariant(_);if(re===void 0){const oe=this.discriminator,Ee=this.defaultLayout;let ce=0;return this.usesPrefixDiscriminator&&(ce=oe.layout.span),oe.encode(_[oe.property],Y,X),ce+Ee.encode(_[Ee.property],Y,X+ce)}return re.encode(_,Y,X)}addVariant(_,Y,X){const re=new B(this,_,Y,X);return this.registry[_]=re,re}getVariant(_,Y=0){let X;return _ instanceof Uint8Array?X=this.discriminator.decode(_,Y):X=_,this.registry[X]}}Fe.Union=H;class B extends r{constructor(_,Y,X,re){if(!(_ instanceof H))throw new TypeError("union must be a Union");if(!Number.isInteger(Y)||0>Y)throw new TypeError("variant must be a (non-negative) integer");if(typeof X=="string"&&re===void 0&&(re=X,X=null),X){if(!(X instanceof r))throw new TypeError("layout must be a Layout");if(_.defaultLayout!==null&&0<=X.span&&X.span>_.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof re!="string")throw new TypeError("variant must have a String property")}let oe=_.span;0>_.span&&(oe=X?X.span:0,0<=oe&&_.usesPrefixDiscriminator&&(oe+=_.discriminator.layout.span)),super(oe,re),this.union=_,this.variant=Y,this.layout=X||null}getSpan(_,Y=0){if(0<=this.span)return this.span;let X=0;this.union.usesPrefixDiscriminator&&(X=this.union.discriminator.layout.span);let re=0;return this.layout&&(re=this.layout.getSpan(_,Y+X)),X+re}decode(_,Y=0){const X=this.makeDestinationObject();if(this!==this.union.getVariant(_,Y))throw new Error("variant mismatch");let re=0;return this.union.usesPrefixDiscriminator&&(re=this.union.discriminator.layout.span),this.layout?X[this.property]=this.layout.decode(_,Y+re):this.property?X[this.property]=!0:this.union.usesPrefixDiscriminator&&(X[this.union.discriminator.property]=this.variant),X}encode(_,Y,X=0){let re=0;if(this.union.usesPrefixDiscriminator&&(re=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(_,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,Y,X);let oe=re;if(this.layout&&(this.layout.encode(_[this.property],Y,X+re),oe+=this.layout.getSpan(Y,X+re),0<=this.union.span&&oe>this.union.span))throw new Error("encoded variant overruns containing union");return oe}fromArray(_){if(this.layout)return this.layout.fromArray(_)}}Fe.VariantLayout=B;function A(M){return 0>M&&(M+=4294967296),M}class I extends r{constructor(_,Y,X){if(!(_ instanceof c||_ instanceof u))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof Y=="string"&&X===void 0&&(X=Y,Y=!1),4<_.span)throw new RangeError("word cannot exceed 32 bits");super(_.span,X),this.word=_,this.msb=!!Y,this.fields=[];let re=0;this._packedSetValue=function(oe){return re=A(oe),this},this._packedGetValue=function(){return re}}decode(_,Y=0){const X=this.makeDestinationObject(),re=this.word.decode(_,Y);this._packedSetValue(re);for(const oe of this.fields)oe.property!==void 0&&(X[oe.property]=oe.decode(_));return X}encode(_,Y,X=0){const re=this.word.decode(Y,X);this._packedSetValue(re);for(const oe of this.fields)if(oe.property!==void 0){const Ee=_[oe.property];Ee!==void 0&&oe.encode(Ee)}return this.word.encode(this._packedGetValue(),Y,X)}addField(_,Y){const X=new D(this,_,Y);return this.fields.push(X),X}addBoolean(_){const Y=new z(this,_);return this.fields.push(Y),Y}fieldFor(_){if(typeof _!="string")throw new TypeError("property must be string");for(const Y of this.fields)if(Y.property===_)return Y}}Fe.BitStructure=I;class D{constructor(_,Y,X){if(!(_ instanceof I))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(Y)||0>=Y)throw new TypeError("bits must be positive integer");const re=8*_.span,oe=_.fields.reduce((Ee,ce)=>Ee+ce.bits,0);if(Y+oe>re)throw new Error("bits too long for span remainder ("+(re-oe)+" of "+re+" remain)");this.container=_,this.bits=Y,this.valueMask=(1<<Y)-1,Y===32&&(this.valueMask=4294967295),this.start=oe,this.container.msb&&(this.start=re-oe-Y),this.wordMask=A(this.valueMask<<this.start),this.property=X}decode(_,Y){const X=this.container._packedGetValue();return A(X&this.wordMask)>>>this.start}encode(_){if(typeof _!="number"||!Number.isInteger(_)||_!==A(_&this.valueMask))throw new TypeError(i("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const Y=this.container._packedGetValue(),X=A(_<<this.start);this.container._packedSetValue(A(Y&~this.wordMask)|X)}}Fe.BitField=D;class z extends D{constructor(_,Y){super(_,1,Y)}decode(_,Y){return!!super.decode(_,Y)}encode(_){typeof _=="boolean"&&(_=+_),super.encode(_)}}Fe.Boolean=z;class G extends r{constructor(_,Y){if(!(_ instanceof o&&_.isCount()||Number.isInteger(_)&&0<=_))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let X=-1;_ instanceof o||(X=_),super(X,Y),this.length=_}getSpan(_,Y){let X=this.span;return 0>X&&(X=this.length.decode(_,Y)),X}decode(_,Y=0){let X=this.span;return 0>X&&(X=this.length.decode(_,Y)),n(_).slice(Y,Y+X)}encode(_,Y,X){let re=this.length;if(this.length instanceof o&&(re=_.length),!(_ instanceof Uint8Array&&re===_.length))throw new TypeError(i("Blob.encode",this)+" requires (length "+re+") Uint8Array as src");if(X+re>Y.length)throw new RangeError("encoding overruns Uint8Array");const oe=n(_);return n(Y).write(oe.toString("hex"),X,re,"hex"),this.length instanceof o&&this.length.encode(re,Y,X),re}}Fe.Blob=G;class te extends r{constructor(_){super(-1,_)}getSpan(_,Y=0){e(_);let X=Y;for(;X<_.length&&_[X]!==0;)X+=1;return 1+X-Y}decode(_,Y=0){const X=this.getSpan(_,Y);return n(_).slice(Y,Y+X-1).toString("utf-8")}encode(_,Y,X=0){typeof _!="string"&&(_=String(_));const re=t.Buffer.from(_,"utf8"),oe=re.length;if(X+oe>Y.length)throw new RangeError("encoding overruns Buffer");const Ee=n(Y);return re.copy(Ee,X),Ee[X+oe]=0,oe+1}}Fe.CString=te;class K extends r{constructor(_,Y){if(typeof _=="string"&&Y===void 0&&(Y=_,_=void 0),_===void 0)_=-1;else if(!Number.isInteger(_))throw new TypeError("maxSpan must be an integer");super(-1,Y),this.maxSpan=_}getSpan(_,Y=0){return e(_),_.length-Y}decode(_,Y=0){const X=this.getSpan(_,Y);if(0<=this.maxSpan&&this.maxSpan<X)throw new RangeError("text length exceeds maxSpan");return n(_).slice(Y,Y+X).toString("utf-8")}encode(_,Y,X=0){typeof _!="string"&&(_=String(_));const re=t.Buffer.from(_,"utf8"),oe=re.length;if(0<=this.maxSpan&&this.maxSpan<oe)throw new RangeError("text length exceeds maxSpan");if(X+oe>Y.length)throw new RangeError("encoding overruns Buffer");return re.copy(n(Y),X),oe}}Fe.UTF8=K;class q extends r{constructor(_,Y){super(0,Y),this.value=_}decode(_,Y){return this.value}encode(_,Y,X){return 0}}return Fe.Constant=q,Fe.greedy=((M,_)=>new a(M,_)),Fe.offset=((M,_,Y)=>new l(M,_,Y)),Fe.u8=(M=>new c(1,M)),Fe.u16=(M=>new c(2,M)),Fe.u24=(M=>new c(3,M)),Fe.u32=(M=>new c(4,M)),Fe.u40=(M=>new c(5,M)),Fe.u48=(M=>new c(6,M)),Fe.nu64=(M=>new b(M)),Fe.u16be=(M=>new u(2,M)),Fe.u24be=(M=>new u(3,M)),Fe.u32be=(M=>new u(4,M)),Fe.u40be=(M=>new u(5,M)),Fe.u48be=(M=>new u(6,M)),Fe.nu64be=(M=>new E(M)),Fe.s8=(M=>new f(1,M)),Fe.s16=(M=>new f(2,M)),Fe.s24=(M=>new f(3,M)),Fe.s32=(M=>new f(4,M)),Fe.s40=(M=>new f(5,M)),Fe.s48=(M=>new f(6,M)),Fe.ns64=(M=>new C(M)),Fe.s16be=(M=>new m(2,M)),Fe.s24be=(M=>new m(3,M)),Fe.s32be=(M=>new m(4,M)),Fe.s40be=(M=>new m(5,M)),Fe.s48be=(M=>new m(6,M)),Fe.ns64be=(M=>new k(M)),Fe.f32=(M=>new O(M)),Fe.f32be=(M=>new U(M)),Fe.f64=(M=>new R(M)),Fe.f64be=(M=>new $(M)),Fe.struct=((M,_,Y)=>new j(M,_,Y)),Fe.bits=((M,_,Y)=>new I(M,_,Y)),Fe.seq=((M,_,Y)=>new V(M,_,Y)),Fe.union=((M,_,Y)=>new H(M,_,Y)),Fe.unionLayoutDiscriminator=((M,_)=>new W(M,_)),Fe.blob=((M,_)=>new G(M,_)),Fe.cstr=(M=>new te(M)),Fe.utf8=((M,_)=>new K(M,_)),Fe.constant=((M,_)=>new q(M,_)),Fe}var ve=_ut(),Iut=8078e3,Put=8078001,Rut=8078004,Out=8078005,Mut=8078006,Dut=8078011;function ame(t){return Array.isArray(t)?"%5B"+t.map(ame).join("%2C%20")+"%5D":typeof t=="bigint"?`${t}n`:encodeURIComponent(String(t!=null&&Object.getPrototypeOf(t)===null?{...t}:t))}function Lut([t,e]){return`${t}=${ame(e)}`}function jut(t){const e=Object.entries(t).map(Lut).join("&");return btoa(e)}function But(t,e={}){{let n=`Solana error #${t}; Decode this error by running \`npx @solana/errors decode -- ${t}`;return Object.keys(e).length&&(n+=` '${jut(e)}'`),`${n}\``}}var sy=class extends Error{constructor(...[e,n]){let r,i;if(n){const{cause:o,...a}=n;o&&(i={cause:o}),Object.keys(a).length>0&&(r=a)}const s=But(e,r);super(s,i);Se(this,"cause",this.cause);Se(this,"context");this.context={__code:e,...r},this.name="SolanaError"}};function Uut(t,e){return"fixedSize"in e?e.fixedSize:e.getSizeFromValue(t)}function Fut(t){return Object.freeze({...t,encode:e=>{const n=new Uint8Array(Uut(e,t));return t.write(e,n,0),n}})}function $ut(t){return Object.freeze({...t,decode:(e,n=0)=>t.read(e,n)[0]})}function sg(t){return"fixedSize"in t&&typeof t.fixedSize=="number"}function zut(t,e){if(sg(t)!==sg(e))throw new sy(Rut);if(sg(t)&&sg(e)&&t.fixedSize!==e.fixedSize)throw new sy(Out,{decoderFixedSize:e.fixedSize,encoderFixedSize:t.fixedSize});if(!sg(t)&&!sg(e)&&t.maxSize!==e.maxSize)throw new sy(Mut,{decoderMaxSize:e.maxSize,encoderMaxSize:t.maxSize});return{...e,...t,decode:e.decode,encode:t.encode,read:e.read,write:t.write}}function Hut(t,e,n=0){if(e.length-n<=0)throw new sy(Iut,{codecDescription:t})}function Vut(t,e,n,r=0){const i=n.length-r;if(i<e)throw new sy(Put,{bytesLength:i,codecDescription:t,expected:e})}function qut(t,e,n,r){if(r<e||r>n)throw new sy(Dut,{codecDescription:t,max:n,min:e,value:r})}function lme(t){return(t==null?void 0:t.endian)!==1}function Gut(t){return Fut({fixedSize:t.size,write(e,n,r){t.range&&qut(t.name,t.range[0],t.range[1],e);const i=new ArrayBuffer(t.size);return t.set(new DataView(i),e,lme(t.config)),n.set(new Uint8Array(i),r),r+t.size}})}function Kut(t){return $ut({fixedSize:t.size,read(e,n=0){Hut(t.name,e,n),Vut(t.name,t.size,e,n);const r=new DataView(Wut(e,n,t.size));return[t.get(r,lme(t.config)),n+t.size]}})}function Wut(t,e,n){const r=t.byteOffset+(e??0),i=n??t.byteLength;return t.buffer.slice(r,r+i)}var Yut=(t={})=>Gut({config:t,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(e,n,r)=>e.setBigUint64(0,BigInt(n),r),size:8}),Jut=(t={})=>Kut({config:t,get:(e,n)=>e.getBigUint64(0,n),name:"u64",size:8}),Xut=(t={})=>zut(Yut(t),Jut(t));class Qut extends TypeError{constructor(e,n){let r;const{message:i,explanation:s,...o}=e,{path:a}=e,l=a.length===0?i:`At path: ${a.join(".")} -- ${i}`;super(s??l),s!=null&&(this.cause=l),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...n()])}}function Zut(t){return yE(t)&&typeof t[Symbol.iterator]=="function"}function yE(t){return typeof t=="object"&&t!=null}function MC(t){return yE(t)&&!Array.isArray(t)}function Ll(t){return typeof t=="symbol"?t.toString():typeof t=="string"?JSON.stringify(t):`${t}`}function edt(t){const{done:e,value:n}=t.next();return e?void 0:n}function tdt(t,e,n,r){if(t===!0)return;t===!1?t={}:typeof t=="string"&&(t={message:t});const{path:i,branch:s}=e,{type:o}=n,{refinement:a,message:l=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${Ll(r)}\``}=t;return{value:r,type:o,refinement:a,key:i[i.length-1],path:i,branch:s,...t,message:l}}function*TZ(t,e,n,r){Zut(t)||(t=[t]);for(const i of t){const s=tdt(i,e,n,r);s&&(yield s)}}function*KB(t,e,n={}){const{path:r=[],branch:i=[t],coerce:s=!1,mask:o=!1}=n,a={path:r,branch:i,mask:o};s&&(t=e.coercer(t,a));let l="valid";for(const c of e.validator(t,a))c.explanation=n.message,l="not_valid",yield[c,void 0];for(let[c,u,f]of e.entries(t,a)){const m=KB(u,f,{path:c===void 0?r:[...r,c],branch:c===void 0?i:[...i,u],coerce:s,mask:o,message:n.message});for(const g of m)g[0]?(l=g[0].refinement!=null?"not_refined":"not_valid",yield[g[0],void 0]):s&&(u=g[1],c===void 0?t=u:t instanceof Map?t.set(c,u):t instanceof Set?t.add(u):yE(t)&&(u!==void 0||c in t)&&(t[c]=u))}if(l!=="not_valid")for(const c of e.refiner(t,a))c.explanation=n.message,l="not_refined",yield[c,void 0];l==="valid"&&(yield[void 0,t])}let Vc=class{constructor(e){const{type:n,schema:r,validator:i,refiner:s,coercer:o=l=>l,entries:a=function*(){}}=e;this.type=n,this.schema=r,this.entries=a,this.coercer=o,i?this.validator=(l,c)=>{const u=i(l,c);return TZ(u,c,this,l)}:this.validator=()=>[],s?this.refiner=(l,c)=>{const u=s(l,c);return TZ(u,c,this,l)}:this.refiner=()=>[]}assert(e,n){return ndt(e,this,n)}create(e,n){return dt(e,this,n)}is(e){return cme(e,this)}mask(e,n){return rdt(e,this,n)}validate(e,n={}){return xE(e,this,n)}};function ndt(t,e,n){const r=xE(t,e,{message:n});if(r[0])throw r[0]}function dt(t,e,n){const r=xE(t,e,{coerce:!0,message:n});if(r[0])throw r[0];return r[1]}function rdt(t,e,n){const r=xE(t,e,{coerce:!0,mask:!0,message:n});if(r[0])throw r[0];return r[1]}function cme(t,e){return!xE(t,e)[0]}function xE(t,e,n={}){const r=KB(t,e,n),i=edt(r);return i[0]?[new Qut(i[0],function*(){for(const o of r)o[0]&&(yield o[0])}),void 0]:[void 0,i[1]]}function Km(t,e){return new Vc({type:t,schema:null,validator:e})}function idt(){return Km("any",()=>!0)}function mt(t){return new Vc({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(const[n,r]of e.entries())yield[n,r,t]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${Ll(e)}`}})}function Bc(){return Km("boolean",t=>typeof t=="boolean")}function WB(t){return Km("instance",e=>e instanceof t||`Expected a \`${t.name}\` instance, but received: ${Ll(e)}`)}function Or(t){const e=Ll(t),n=typeof t;return new Vc({type:"literal",schema:n==="string"||n==="number"||n==="boolean"?t:null,validator(r){return r===t||`Expected the literal \`${e}\`, but received: ${Ll(r)}`}})}function sdt(){return Km("never",()=>!1)}function gt(t){return new Vc({...t,validator:(e,n)=>e===null||t.validator(e,n),refiner:(e,n)=>e===null||t.refiner(e,n)})}function Oe(){return Km("number",t=>typeof t=="number"&&!isNaN(t)||`Expected a number, but received: ${Ll(t)}`)}function Vt(t){return new Vc({...t,validator:(e,n)=>e===void 0||t.validator(e,n),refiner:(e,n)=>e===void 0||t.refiner(e,n)})}function ume(t,e){return new Vc({type:"record",schema:null,*entries(n){if(yE(n))for(const r in n){const i=n[r];yield[r,r,t],yield[r,i,e]}},validator(n){return MC(n)||`Expected an object, but received: ${Ll(n)}`},coercer(n){return MC(n)?{...n}:n}})}function ut(){return Km("string",t=>typeof t=="string"||`Expected a string, but received: ${Ll(t)}`)}function YB(t){const e=sdt();return new Vc({type:"tuple",schema:null,*entries(n){if(Array.isArray(n)){const r=Math.max(t.length,n.length);for(let i=0;i<r;i++)yield[i,n[i],t[i]||e]}},validator(n){return Array.isArray(n)||`Expected an array, but received: ${Ll(n)}`},coercer(n){return Array.isArray(n)?n.slice():n}})}function nt(t){const e=Object.keys(t);return new Vc({type:"type",schema:t,*entries(n){if(yE(n))for(const r of e)yield[r,n[r],t[r]]},validator(n){return MC(n)||`Expected an object, but received: ${Ll(n)}`},coercer(n){return MC(n)?{...n}:n}})}function Qs(t){const e=t.map(n=>n.type).join(" | ");return new Vc({type:"union",schema:null,coercer(n,r){for(const i of t){const[s,o]=i.validate(n,{coerce:!0,mask:r.mask});if(!s)return o}return n},validator(n,r){const i=[];for(const s of t){const[...o]=KB(n,s,r),[a]=o;if(a[0])for(const[l]of o)l&&i.push(l);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${Ll(n)}`,...i]}})}function dv(){return Km("unknown",()=>!0)}function vE(t,e,n){return new Vc({...t,coercer:(r,i)=>cme(r,e)?t.coercer(n(r,i),i):t.coercer(r,i)})}var zA,odt=new Uint8Array(16);function dme(){if(!zA&&(zA=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!zA))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return zA(odt)}const adt=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function qN(t){return typeof t=="string"&&adt.test(t)}var Ji=[];for(var b3=0;b3<256;++b3)Ji.push((b3+256).toString(16).substr(1));function GN(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(Ji[t[e+0]]+Ji[t[e+1]]+Ji[t[e+2]]+Ji[t[e+3]]+"-"+Ji[t[e+4]]+Ji[t[e+5]]+"-"+Ji[t[e+6]]+Ji[t[e+7]]+"-"+Ji[t[e+8]]+Ji[t[e+9]]+"-"+Ji[t[e+10]]+Ji[t[e+11]]+Ji[t[e+12]]+Ji[t[e+13]]+Ji[t[e+14]]+Ji[t[e+15]]).toLowerCase();if(!qN(n))throw TypeError("Stringified UUID is invalid");return n}var kZ,w3,E3=0,S3=0;function ldt(t,e,n){var r=e&&n||0,i=e||new Array(16);t=t||{};var s=t.node||kZ,o=t.clockseq!==void 0?t.clockseq:w3;if(s==null||o==null){var a=t.random||(t.rng||dme)();s==null&&(s=kZ=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),o==null&&(o=w3=(a[6]<<8|a[7])&16383)}var l=t.msecs!==void 0?t.msecs:Date.now(),c=t.nsecs!==void 0?t.nsecs:S3+1,u=l-E3+(c-S3)/1e4;if(u<0&&t.clockseq===void 0&&(o=o+1&16383),(u<0||l>E3)&&t.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");E3=l,S3=c,w3=o,l+=122192928e5;var f=((l&268435455)*1e4+c)%4294967296;i[r++]=f>>>24&255,i[r++]=f>>>16&255,i[r++]=f>>>8&255,i[r++]=f&255;var m=l/4294967296*1e4&268435455;i[r++]=m>>>8&255,i[r++]=m&255,i[r++]=m>>>24&15|16,i[r++]=m>>>16&255,i[r++]=o>>>8|128,i[r++]=o&255;for(var g=0;g<6;++g)i[r+g]=s[g];return e||GN(i)}function fme(t){if(!qN(t))throw TypeError("Invalid UUID");var e,n=new Uint8Array(16);return n[0]=(e=parseInt(t.slice(0,8),16))>>>24,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=e&255,n[4]=(e=parseInt(t.slice(9,13),16))>>>8,n[5]=e&255,n[6]=(e=parseInt(t.slice(14,18),16))>>>8,n[7]=e&255,n[8]=(e=parseInt(t.slice(19,23),16))>>>8,n[9]=e&255,n[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,n[11]=e/4294967296&255,n[12]=e>>>24&255,n[13]=e>>>16&255,n[14]=e>>>8&255,n[15]=e&255,n}function cdt(t){t=unescape(encodeURIComponent(t));for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e}var udt="6ba7b810-9dad-11d1-80b4-00c04fd430c8",ddt="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function hme(t,e,n){function r(i,s,o,a){if(typeof i=="string"&&(i=cdt(i)),typeof s=="string"&&(s=fme(s)),s.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var l=new Uint8Array(16+i.length);if(l.set(s),l.set(i,s.length),l=n(l),l[6]=l[6]&15|e,l[8]=l[8]&63|128,o){a=a||0;for(var c=0;c<16;++c)o[a+c]=l[c];return o}return GN(l)}try{r.name=t}catch{}return r.DNS=udt,r.URL=ddt,r}function fdt(t){if(typeof t=="string"){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var n=0;n<e.length;++n)t[n]=e.charCodeAt(n)}return hdt(pdt(mdt(t),t.length*8))}function hdt(t){for(var e=[],n=t.length*32,r="0123456789abcdef",i=0;i<n;i+=8){var s=t[i>>5]>>>i%32&255,o=parseInt(r.charAt(s>>>4&15)+r.charAt(s&15),16);e.push(o)}return e}function pme(t){return(t+64>>>9<<4)+14+1}function pdt(t,e){t[e>>5]|=128<<e%32,t[pme(e)-1]=e;for(var n=1732584193,r=-271733879,i=-1732584194,s=271733878,o=0;o<t.length;o+=16){var a=n,l=r,c=i,u=s;n=ps(n,r,i,s,t[o],7,-680876936),s=ps(s,n,r,i,t[o+1],12,-389564586),i=ps(i,s,n,r,t[o+2],17,606105819),r=ps(r,i,s,n,t[o+3],22,-1044525330),n=ps(n,r,i,s,t[o+4],7,-176418897),s=ps(s,n,r,i,t[o+5],12,1200080426),i=ps(i,s,n,r,t[o+6],17,-1473231341),r=ps(r,i,s,n,t[o+7],22,-45705983),n=ps(n,r,i,s,t[o+8],7,1770035416),s=ps(s,n,r,i,t[o+9],12,-1958414417),i=ps(i,s,n,r,t[o+10],17,-42063),r=ps(r,i,s,n,t[o+11],22,-1990404162),n=ps(n,r,i,s,t[o+12],7,1804603682),s=ps(s,n,r,i,t[o+13],12,-40341101),i=ps(i,s,n,r,t[o+14],17,-1502002290),r=ps(r,i,s,n,t[o+15],22,1236535329),n=ms(n,r,i,s,t[o+1],5,-165796510),s=ms(s,n,r,i,t[o+6],9,-1069501632),i=ms(i,s,n,r,t[o+11],14,643717713),r=ms(r,i,s,n,t[o],20,-373897302),n=ms(n,r,i,s,t[o+5],5,-701558691),s=ms(s,n,r,i,t[o+10],9,38016083),i=ms(i,s,n,r,t[o+15],14,-660478335),r=ms(r,i,s,n,t[o+4],20,-405537848),n=ms(n,r,i,s,t[o+9],5,568446438),s=ms(s,n,r,i,t[o+14],9,-1019803690),i=ms(i,s,n,r,t[o+3],14,-187363961),r=ms(r,i,s,n,t[o+8],20,1163531501),n=ms(n,r,i,s,t[o+13],5,-1444681467),s=ms(s,n,r,i,t[o+2],9,-51403784),i=ms(i,s,n,r,t[o+7],14,1735328473),r=ms(r,i,s,n,t[o+12],20,-1926607734),n=gs(n,r,i,s,t[o+5],4,-378558),s=gs(s,n,r,i,t[o+8],11,-2022574463),i=gs(i,s,n,r,t[o+11],16,1839030562),r=gs(r,i,s,n,t[o+14],23,-35309556),n=gs(n,r,i,s,t[o+1],4,-1530992060),s=gs(s,n,r,i,t[o+4],11,1272893353),i=gs(i,s,n,r,t[o+7],16,-155497632),r=gs(r,i,s,n,t[o+10],23,-1094730640),n=gs(n,r,i,s,t[o+13],4,681279174),s=gs(s,n,r,i,t[o],11,-358537222),i=gs(i,s,n,r,t[o+3],16,-722521979),r=gs(r,i,s,n,t[o+6],23,76029189),n=gs(n,r,i,s,t[o+9],4,-640364487),s=gs(s,n,r,i,t[o+12],11,-421815835),i=gs(i,s,n,r,t[o+15],16,530742520),r=gs(r,i,s,n,t[o+2],23,-995338651),n=ys(n,r,i,s,t[o],6,-198630844),s=ys(s,n,r,i,t[o+7],10,1126891415),i=ys(i,s,n,r,t[o+14],15,-1416354905),r=ys(r,i,s,n,t[o+5],21,-57434055),n=ys(n,r,i,s,t[o+12],6,1700485571),s=ys(s,n,r,i,t[o+3],10,-1894986606),i=ys(i,s,n,r,t[o+10],15,-1051523),r=ys(r,i,s,n,t[o+1],21,-2054922799),n=ys(n,r,i,s,t[o+8],6,1873313359),s=ys(s,n,r,i,t[o+15],10,-30611744),i=ys(i,s,n,r,t[o+6],15,-1560198380),r=ys(r,i,s,n,t[o+13],21,1309151649),n=ys(n,r,i,s,t[o+4],6,-145523070),s=ys(s,n,r,i,t[o+11],10,-1120210379),i=ys(i,s,n,r,t[o+2],15,718787259),r=ys(r,i,s,n,t[o+9],21,-343485551),n=Jf(n,a),r=Jf(r,l),i=Jf(i,c),s=Jf(s,u)}return[n,r,i,s]}function mdt(t){if(t.length===0)return[];for(var e=t.length*8,n=new Uint32Array(pme(e)),r=0;r<e;r+=8)n[r>>5]|=(t[r/8]&255)<<r%32;return n}function Jf(t,e){var n=(t&65535)+(e&65535),r=(t>>16)+(e>>16)+(n>>16);return r<<16|n&65535}function gdt(t,e){return t<<e|t>>>32-e}function KN(t,e,n,r,i,s){return Jf(gdt(Jf(Jf(e,t),Jf(r,s)),i),n)}function ps(t,e,n,r,i,s,o){return KN(e&n|~e&r,t,e,i,s,o)}function ms(t,e,n,r,i,s,o){return KN(e&r|n&~r,t,e,i,s,o)}function gs(t,e,n,r,i,s,o){return KN(e^n^r,t,e,i,s,o)}function ys(t,e,n,r,i,s,o){return KN(n^(e|~r),t,e,i,s,o)}var ydt=hme("v3",48,fdt);function xdt(t,e,n){t=t||{};var r=t.random||(t.rng||dme)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return GN(r)}function vdt(t,e,n,r){switch(t){case 0:return e&n^~e&r;case 1:return e^n^r;case 2:return e&n^e&r^n&r;case 3:return e^n^r}}function A3(t,e){return t<<e|t>>>32-e}function bdt(t){var e=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){var r=unescape(encodeURIComponent(t));t=[];for(var i=0;i<r.length;++i)t.push(r.charCodeAt(i))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var s=t.length/4+2,o=Math.ceil(s/16),a=new Array(o),l=0;l<o;++l){for(var c=new Uint32Array(16),u=0;u<16;++u)c[u]=t[l*64+u*4]<<24|t[l*64+u*4+1]<<16|t[l*64+u*4+2]<<8|t[l*64+u*4+3];a[l]=c}a[o-1][14]=(t.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(t.length-1)*8&4294967295;for(var f=0;f<o;++f){for(var m=new Uint32Array(80),g=0;g<16;++g)m[g]=a[f][g];for(var v=16;v<80;++v)m[v]=A3(m[v-3]^m[v-8]^m[v-14]^m[v-16],1);for(var x=n[0],b=n[1],E=n[2],C=n[3],k=n[4],O=0;O<80;++O){var U=Math.floor(O/20),R=A3(x,5)+vdt(U,b,E,C)+k+e[U]+m[O]>>>0;k=C,C=E,E=A3(b,30)>>>0,b=x,x=R}n[0]=n[0]+x>>>0,n[1]=n[1]+b>>>0,n[2]=n[2]+E>>>0,n[3]=n[3]+C>>>0,n[4]=n[4]+k>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,n[0]&255,n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,n[1]&255,n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,n[2]&255,n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,n[3]&255,n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,n[4]&255]}var wdt=hme("v5",80,bdt);const Edt="00000000-0000-0000-0000-000000000000";function Sdt(t){if(!qN(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}const Adt=Object.freeze(Object.defineProperty({__proto__:null,NIL:Edt,parse:fme,stringify:GN,v1:ldt,v3:ydt,v4:xdt,v5:wdt,validate:qN,version:Sdt},Symbol.toStringTag,{value:"Module"})),mme=uee(Adt);var T3,CZ;function Tdt(){if(CZ)return T3;CZ=1;const t=mme.v4;return T3=function(n,r,i,s){if(typeof n!="string")throw new TypeError(n+" must be a string");s=s||{};const o=typeof s.version=="number"?s.version:2;if(o!==1&&o!==2)throw new TypeError(o+" must be 1 or 2");const a={method:n};if(o===2&&(a.jsonrpc="2.0"),r){if(typeof r!="object"&&!Array.isArray(r))throw new TypeError(r+" must be an object, array or omitted");a.params=r}if(typeof i>"u"){const l=typeof s.generator=="function"?s.generator:function(){return t()};a.id=l(a,s)}else o===2&&i===null?s.notificationIdNull&&(a.id=null):a.id=i;return a},T3}var k3,NZ;function kdt(){if(NZ)return k3;NZ=1;const t=mme.v4,e=Tdt(),n=function(r,i){if(!(this instanceof n))return new n(r,i);i||(i={}),this.options={reviver:typeof i.reviver<"u"?i.reviver:null,replacer:typeof i.replacer<"u"?i.replacer:null,generator:typeof i.generator<"u"?i.generator:function(){return t()},version:typeof i.version<"u"?i.version:2,notificationIdNull:typeof i.notificationIdNull=="boolean"?i.notificationIdNull:!1},this.callServer=r};return k3=n,n.prototype.request=function(r,i,s,o){const a=this;let l=null;const c=Array.isArray(r)&&typeof i=="function";if(this.options.version===1&&c)throw new TypeError("JSON-RPC 1.0 does not support batching");if(c||!c&&r&&typeof r=="object"&&typeof i=="function")o=i,l=r;else{typeof s=="function"&&(o=s,s=void 0);const m=typeof o=="function";try{l=e(r,i,s,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(g){if(m){o(g);return}throw g}if(!m)return l}let f;try{f=JSON.stringify(l,this.options.replacer)}catch(m){o(m);return}return this.callServer(f,function(m,g){a._parseResponse(m,g,o)}),l},n.prototype._parseResponse=function(r,i,s){if(r){s(r);return}if(!i){s();return}let o;try{o=JSON.parse(i,this.options.reviver)}catch(a){s(a);return}if(s.length===3)if(Array.isArray(o)){const a=function(c){return typeof c.error<"u"},l=function(c){return!a(c)};s(null,o.filter(a),o.filter(l));return}else{s(null,o.error,o.result);return}s(null,o)},k3}var Cdt=kdt();const Ndt=us(Cdt);var _dt=class extends Ij{constructor(e,n){super();Se(this,"socket");this.socket=new window.WebSocket(e,n.protocols),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=r=>this.emit("message",r.data),this.socket.onerror=r=>this.emit("error",r),this.socket.onclose=r=>{this.emit("close",r.code,r.reason)}}send(e,n,r){const i=r||n;try{this.socket.send(e),i()}catch(s){i(s)}}close(e,n){this.socket.close(e,n)}addEventListener(e,n,r){this.socket.addEventListener(e,n,r)}};function Idt(t,e){return new _dt(t,e)}var Pdt=class{encode(t){return JSON.stringify(t)}decode(t){return JSON.parse(t)}},Rdt=class extends Ij{constructor(e,n="ws://localhost:8080",{autoconnect:r=!0,reconnect:i=!0,reconnect_interval:s=1e3,max_reconnects:o=5,...a}={},l,c){super();Se(this,"address");Se(this,"rpc_id");Se(this,"queue");Se(this,"options");Se(this,"autoconnect");Se(this,"ready");Se(this,"reconnect");Se(this,"reconnect_timer_id");Se(this,"reconnect_interval");Se(this,"max_reconnects");Se(this,"rest_options");Se(this,"current_reconnects");Se(this,"generate_request_id");Se(this,"socket");Se(this,"webSocketFactory");Se(this,"dataPack");this.webSocketFactory=e,this.queue={},this.rpc_id=0,this.address=n,this.autoconnect=r,this.ready=!1,this.reconnect=i,this.reconnect_timer_id=void 0,this.reconnect_interval=s,this.max_reconnects=o,this.rest_options=a,this.current_reconnects=0,this.generate_request_id=l||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),c?this.dataPack=c:this.dataPack=new Pdt,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(e,n,r,i){return!i&&typeof r=="object"&&(i=r,r=null),new Promise((s,o)=>{if(!this.ready)return o(new Error("socket not ready"));const a=this.generate_request_id(e,n),l={jsonrpc:"2.0",method:e,params:n||void 0,id:a};this.socket.send(this.dataPack.encode(l),i,c=>{if(c)return o(c);this.queue[a]={promise:[s,o]},r&&(this.queue[a].timeout=setTimeout(()=>{delete this.queue[a],o(new Error("reply timeout"))},r))})})}async login(e){const n=await this.call("rpc.login",e);if(!n)throw new Error("authentication failed");return n}async listMethods(){return await this.call("__listMethods")}notify(e,n){return new Promise((r,i)=>{if(!this.ready)return i(new Error("socket not ready"));const s={jsonrpc:"2.0",method:e,params:n};this.socket.send(this.dataPack.encode(s),o=>{if(o)return i(o);r()})})}async subscribe(e){typeof e=="string"&&(e=[e]);const n=await this.call("rpc.on",e);if(typeof e=="string"&&n[e]!=="ok")throw new Error("Failed subscribing to an event '"+e+"' with: "+n[e]);return n}async unsubscribe(e){typeof e=="string"&&(e=[e]);const n=await this.call("rpc.off",e);if(typeof e=="string"&&n[e]!=="ok")throw new Error("Failed unsubscribing from an event with: "+n);return n}close(e,n){this.socket&&this.socket.close(e||1e3,n)}setAutoReconnect(e){this.reconnect=e}setReconnectInterval(e){this.reconnect_interval=e}setMaxReconnects(e){this.max_reconnects=e}getCurrentReconnects(){return this.current_reconnects}getMaxReconnects(){return this.max_reconnects}isReconnecting(){return this.reconnect_timer_id!==void 0}willReconnect(){return this.reconnect&&(this.max_reconnects===0||this.current_reconnects<this.max_reconnects)}_connect(e,n){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(e,n),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:r})=>{r instanceof ArrayBuffer&&(r=an.from(r).toString());try{r=this.dataPack.decode(r)}catch{return}if(r.notification&&this.listeners(r.notification).length){if(!Object.keys(r.params).length)return this.emit(r.notification);const i=[r.notification];if(r.params.constructor===Object)i.push(r.params);else for(let s=0;s<r.params.length;s++)i.push(r.params[s]);return Promise.resolve().then(()=>{this.emit.apply(this,i)})}if(!this.queue[r.id])return r.method?Promise.resolve().then(()=>{this.emit(r.method,r==null?void 0:r.params)}):void 0;"error"in r=="result"in r&&this.queue[r.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[r.id].timeout&&clearTimeout(this.queue[r.id].timeout),r.error?this.queue[r.id].promise[1](r.error):this.queue[r.id].promise[0](r.result),delete this.queue[r.id]}),this.socket.addEventListener("error",r=>this.emit("error",r)),this.socket.addEventListener("close",({code:r,reason:i})=>{this.ready&&setTimeout(()=>this.emit("close",r,i),0),this.ready=!1,this.socket=void 0,r!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)?this.reconnect_timer_id=setTimeout(()=>this._connect(e,n),this.reconnect_interval):this.reconnect&&this.max_reconnects>0&&this.current_reconnects>=this.max_reconnects&&setTimeout(()=>this.emit("max_reconnects_reached",r,i),1))})}};class gme extends Mpe{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,Rpe(e);const r=UB(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),Sx(s)}update(e){return kC(this),this.iHash.update(e),this}digestInto(e){kC(this),qm(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const yme=(t,e,n)=>new gme(t,e).update(n).digest();yme.create=(t,e)=>new gme(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _Z=(t,e)=>(t+(t>=0?e:-e)/xme)/e;function Odt(t,e,n){const[[r,i],[s,o]]=e,a=_Z(o*t,n),l=_Z(-i*t,n);let c=t-a*r-l*s,u=-a*i-l*o;const f=c<Wu,m=u<Wu;f&&(c=-c),m&&(u=-u);const g=mE(Math.ceil($pe(n)/2))+oy;if(c<Wu||c>=g||u<Wu||u>=g)throw new Error("splitScalar (endomorphism): failed, k="+t);return{k1neg:f,k1:c,k2neg:m,k2:u}}function ZD(t){if(!["compact","recovered","der"].includes(t))throw new Error('Signature format must be "compact", "recovered", or "der"');return t}function C3(t,e){const n={};for(let r of Object.keys(e))n[r]=t[r]===void 0?e[r]:t[r];return Cm(n.lowS,"lowS"),Cm(n.prehash,"prehash"),n.format!==void 0&&ZD(n.format),n}class Mdt extends Error{constructor(e=""){super(e)}}const ku={Err:Mdt,_tlv:{encode:(t,e)=>{const{Err:n}=ku;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,i=FA(r);if(i.length/2&128)throw new n("tlv.encode: long form length too big");const s=r>127?FA(i.length/2|128):"";return FA(t)+s+i+e},decode(t,e){const{Err:n}=ku;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const i=e[r++],s=!!(i&128);let o=0;if(!s)o=i;else{const l=i&127;if(!l)throw new n("tlv.decode(long): indefinite length not supported");if(l>4)throw new n("tlv.decode(long): byte length is too big");const c=e.subarray(r,r+l);if(c.length!==l)throw new n("tlv.decode: length bytes not complete");if(c[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of c)o=o<<8|u;if(r+=l,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=ku;if(t<Wu)throw new e("integer: negative integers are not allowed");let n=FA(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=ku;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return HN(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=ku,i=qr("signature",t),{v:s,l:o}=r.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l}=r.decode(2,s),{v:c,l:u}=r.decode(2,l);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(c)}},hexFromSig(t){const{_tlv:e,_int:n}=ku,r=e.encode(2,n.encode(t.r)),i=e.encode(2,n.encode(t.s)),s=r+i;return e.encode(48,s)}},Wu=BigInt(0),oy=BigInt(1),xme=BigInt(2),HA=BigInt(3),Ddt=BigInt(4);function Rg(t,e){const{BYTES:n}=t;let r;if(typeof e=="bigint")r=e;else{let i=qr("private key",e);try{r=t.fromBytes(i)}catch{throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof e}`)}}if(!t.isValidNot0(r))throw new Error("invalid private key: out of range [1..N-1]");return r}function Ldt(t,e={}){const n=rme("weierstrass",t,e),{Fp:r,Fn:i}=n;let s=n.CURVE;const{h:o,n:a}=s;gE(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:l}=e;if(l&&(!r.is0(s.a)||typeof l.beta!="bigint"||!Array.isArray(l.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const c=bme(r,i);function u(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function f(H,B,A){const{x:I,y:D}=B.toAffine(),z=r.toBytes(I);if(Cm(A,"isCompressed"),A){u();const G=!r.isOdd(D);return yc(vme(G),z)}else return yc(Uint8Array.of(4),z,r.toBytes(D))}function m(H){Sl(H,void 0,"Point");const{publicKey:B,publicKeyUncompressed:A}=c,I=H.length,D=H[0],z=H.subarray(1);if(I===B&&(D===2||D===3)){const G=r.fromBytes(z);if(!r.isValid(G))throw new Error("bad point: is not on curve, wrong x");const te=x(G);let K;try{K=r.sqrt(te)}catch(_){const Y=_ instanceof Error?": "+_.message:"";throw new Error("bad point: is not on curve, sqrt error"+Y)}u();const q=r.isOdd(K);return(D&1)===1!==q&&(K=r.neg(K)),{x:G,y:K}}else if(I===A&&D===4){const G=r.BYTES,te=r.fromBytes(z.subarray(0,G)),K=r.fromBytes(z.subarray(G,G*2));if(!b(te,K))throw new Error("bad point: is not on curve");return{x:te,y:K}}else throw new Error(`bad point: got length ${I}, expected compressed=${B} or uncompressed=${A}`)}const g=e.toBytes||f,v=e.fromBytes||m;function x(H){const B=r.sqr(H),A=r.mul(B,H);return r.add(r.add(A,r.mul(H,s.a)),s.b)}function b(H,B){const A=r.sqr(B),I=x(H);return r.eql(A,I)}if(!b(s.Gx,s.Gy))throw new Error("bad curve params: generator point");const E=r.mul(r.pow(s.a,HA),Ddt),C=r.mul(r.sqr(s.b),BigInt(27));if(r.is0(r.add(E,C)))throw new Error("bad curve params: a or b");function k(H,B,A=!1){if(!r.isValid(B)||A&&r.is0(B))throw new Error(`bad point coordinate ${H}`);return B}function O(H){if(!(H instanceof j))throw new Error("ProjectivePoint expected")}function U(H){if(!l||!l.basises)throw new Error("no endo");return Odt(H,l.basises,i.ORDER)}const R=NC((H,B)=>{const{X:A,Y:I,Z:D}=H;if(r.eql(D,r.ONE))return{x:A,y:I};const z=H.is0();B==null&&(B=z?r.ONE:r.inv(D));const G=r.mul(A,B),te=r.mul(I,B),K=r.mul(D,B);if(z)return{x:r.ZERO,y:r.ZERO};if(!r.eql(K,r.ONE))throw new Error("invZ was invalid");return{x:G,y:te}}),$=NC(H=>{if(H.is0()){if(e.allowInfinityPoint&&!r.is0(H.Y))return;throw new Error("bad point: ZERO")}const{x:B,y:A}=H.toAffine();if(!r.isValid(B)||!r.isValid(A))throw new Error("bad point: x or y not field elements");if(!b(B,A))throw new Error("bad point: equation left != right");if(!H.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function V(H,B,A,I,D){return A=new j(r.mul(A.X,H),A.Y,A.Z),B=_C(I,B),A=_C(D,A),B.add(A)}class j{constructor(B,A,I){this.X=k("x",B),this.Y=k("y",A,!0),this.Z=k("z",I),Object.freeze(this)}static CURVE(){return s}static fromAffine(B){const{x:A,y:I}=B||{};if(!B||!r.isValid(A)||!r.isValid(I))throw new Error("invalid affine point");if(B instanceof j)throw new Error("projective point not allowed");return r.is0(A)&&r.is0(I)?j.ZERO:new j(A,I,r.ONE)}static fromBytes(B){const A=j.fromAffine(v(Sl(B,void 0,"point")));return A.assertValidity(),A}static fromHex(B){return j.fromBytes(qr("pointHex",B))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(B=8,A=!0){return W.createCache(this,B),A||this.multiply(HA),this}assertValidity(){$(this)}hasEvenY(){const{y:B}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(B)}equals(B){O(B);const{X:A,Y:I,Z:D}=this,{X:z,Y:G,Z:te}=B,K=r.eql(r.mul(A,te),r.mul(z,D)),q=r.eql(r.mul(I,te),r.mul(G,D));return K&&q}negate(){return new j(this.X,r.neg(this.Y),this.Z)}double(){const{a:B,b:A}=s,I=r.mul(A,HA),{X:D,Y:z,Z:G}=this;let te=r.ZERO,K=r.ZERO,q=r.ZERO,M=r.mul(D,D),_=r.mul(z,z),Y=r.mul(G,G),X=r.mul(D,z);return X=r.add(X,X),q=r.mul(D,G),q=r.add(q,q),te=r.mul(B,q),K=r.mul(I,Y),K=r.add(te,K),te=r.sub(_,K),K=r.add(_,K),K=r.mul(te,K),te=r.mul(X,te),q=r.mul(I,q),Y=r.mul(B,Y),X=r.sub(M,Y),X=r.mul(B,X),X=r.add(X,q),q=r.add(M,M),M=r.add(q,M),M=r.add(M,Y),M=r.mul(M,X),K=r.add(K,M),Y=r.mul(z,G),Y=r.add(Y,Y),M=r.mul(Y,X),te=r.sub(te,M),q=r.mul(Y,_),q=r.add(q,q),q=r.add(q,q),new j(te,K,q)}add(B){O(B);const{X:A,Y:I,Z:D}=this,{X:z,Y:G,Z:te}=B;let K=r.ZERO,q=r.ZERO,M=r.ZERO;const _=s.a,Y=r.mul(s.b,HA);let X=r.mul(A,z),re=r.mul(I,G),oe=r.mul(D,te),Ee=r.add(A,I),ce=r.add(z,G);Ee=r.mul(Ee,ce),ce=r.add(X,re),Ee=r.sub(Ee,ce),ce=r.add(A,D);let me=r.add(z,te);return ce=r.mul(ce,me),me=r.add(X,oe),ce=r.sub(ce,me),me=r.add(I,D),K=r.add(G,te),me=r.mul(me,K),K=r.add(re,oe),me=r.sub(me,K),M=r.mul(_,ce),K=r.mul(Y,oe),M=r.add(K,M),K=r.sub(re,M),M=r.add(re,M),q=r.mul(K,M),re=r.add(X,X),re=r.add(re,X),oe=r.mul(_,oe),ce=r.mul(Y,ce),re=r.add(re,oe),oe=r.sub(X,oe),oe=r.mul(_,oe),ce=r.add(ce,oe),X=r.mul(re,ce),q=r.add(q,X),X=r.mul(me,ce),K=r.mul(Ee,K),K=r.sub(K,X),X=r.mul(Ee,re),M=r.mul(me,M),M=r.add(M,X),new j(K,q,M)}subtract(B){return this.add(B.negate())}is0(){return this.equals(j.ZERO)}multiply(B){const{endo:A}=e;if(!i.isValidNot0(B))throw new Error("invalid scalar: out of range");let I,D;const z=G=>W.cached(this,G,te=>Cp(j,te));if(A){const{k1neg:G,k1:te,k2neg:K,k2:q}=U(B),{p:M,f:_}=z(te),{p:Y,f:X}=z(q);D=_.add(X),I=V(A.beta,M,Y,G,K)}else{const{p:G,f:te}=z(B);I=G,D=te}return Cp(j,[I,D])[0]}multiplyUnsafe(B){const{endo:A}=e,I=this;if(!i.isValid(B))throw new Error("invalid scalar: out of range");if(B===Wu||I.is0())return j.ZERO;if(B===oy)return I;if(W.hasCache(this))return this.multiply(B);if(A){const{k1neg:D,k1:z,k2neg:G,k2:te}=U(B),{p1:K,p2:q}=Zct(j,I,z,te);return V(A.beta,K,q,D,G)}else return W.unsafe(I,B)}multiplyAndAddUnsafe(B,A,I){const D=this.multiplyUnsafe(A).add(B.multiplyUnsafe(I));return D.is0()?void 0:D}toAffine(B){return R(this,B)}isTorsionFree(){const{isTorsionFree:B}=e;return o===oy?!0:B?B(j,this):W.unsafe(this,a).is0()}clearCofactor(){const{clearCofactor:B}=e;return o===oy?this:B?B(j,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(B=!0){return Cm(B,"isCompressed"),this.assertValidity(),g(j,this,B)}toHex(B=!0){return om(this.toBytes(B))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(B=!0){return this.toBytes(B)}_setWindowSize(B){this.precompute(B)}static normalizeZ(B){return Cp(j,B)}static msm(B,A){return nme(j,i,B,A)}static fromPrivateKey(B){return j.BASE.multiply(Rg(i,B))}}j.BASE=new j(s.Gx,s.Gy,r.ONE),j.ZERO=new j(r.ZERO,r.ONE,r.ZERO),j.Fp=r,j.Fn=i;const F=i.BITS,W=new tme(j,e.endo?Math.ceil(F/2):F);return j.BASE.precompute(8),j}function vme(t){return Uint8Array.of(t?2:3)}function bme(t,e){return{secretKey:e.BYTES,publicKey:1+t.BYTES,publicKeyUncompressed:1+2*t.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function jdt(t,e={}){const{Fn:n}=t,r=e.randomBytes||FB,i=Object.assign(bme(t.Fp,n),{seed:Qpe(n.ORDER)});function s(g){try{return!!Rg(n,g)}catch{return!1}}function o(g,v){const{publicKey:x,publicKeyUncompressed:b}=i;try{const E=g.length;return v===!0&&E!==x||v===!1&&E!==b?!1:!!t.fromBytes(g)}catch{return!1}}function a(g=r(i.seed)){return Jct(Sl(g,i.seed,"seed"),n.ORDER)}function l(g,v=!0){return t.BASE.multiply(Rg(n,g)).toBytes(v)}function c(g){const v=a(g);return{secretKey:v,publicKey:l(v)}}function u(g){if(typeof g=="bigint")return!1;if(g instanceof t)return!0;const{secretKey:v,publicKey:x,publicKeyUncompressed:b}=i;if(n.allowedLengths||v===x)return;const E=qr("key",g).length;return E===x||E===b}function f(g,v,x=!0){if(u(g)===!0)throw new Error("first arg must be private key");if(u(v)===!1)throw new Error("second arg must be public key");const b=Rg(n,g);return t.fromHex(v).multiply(b).toBytes(x)}return Object.freeze({getPublicKey:l,getSharedSecret:f,keygen:c,Point:t,utils:{isValidSecretKey:s,isValidPublicKey:o,randomSecretKey:a,isValidPrivateKey:s,randomPrivateKey:a,normPrivateKeyToScalar:g=>Rg(n,g),precompute(g=8,v=t.BASE){return v.precompute(g,!1)}},lengths:i})}function Bdt(t,e,n={}){Rpe(e),gE(n,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=n.randomBytes||FB,i=n.hmac||((A,...I)=>yme(e,A,yc(...I))),{Fp:s,Fn:o}=t,{ORDER:a,BITS:l}=o,{keygen:c,getPublicKey:u,getSharedSecret:f,utils:m,lengths:g}=jdt(t,n),v={prehash:!1,lowS:typeof n.lowS=="boolean"?n.lowS:!1,format:void 0,extraEntropy:!1},x="compact";function b(A){const I=a>>oy;return A>I}function E(A,I){if(!o.isValidNot0(I))throw new Error(`invalid signature ${A}: out of range 1..Point.Fn.ORDER`);return I}function C(A,I){ZD(I);const D=g.signature,z=I==="compact"?D:I==="recovered"?D+1:void 0;return Sl(A,z,`${I} signature`)}class k{constructor(I,D,z){this.r=E("r",I),this.s=E("s",D),z!=null&&(this.recovery=z),Object.freeze(this)}static fromBytes(I,D=x){C(I,D);let z;if(D==="der"){const{r:q,s:M}=ku.toSig(Sl(I));return new k(q,M)}D==="recovered"&&(z=I[0],D="compact",I=I.subarray(1));const G=o.BYTES,te=I.subarray(0,G),K=I.subarray(G,G*2);return new k(o.fromBytes(te),o.fromBytes(K),z)}static fromHex(I,D){return this.fromBytes(CC(I),D)}addRecoveryBit(I){return new k(this.r,this.s,I)}recoverPublicKey(I){const D=s.ORDER,{r:z,s:G,recovery:te}=this;if(te==null||![0,1,2,3].includes(te))throw new Error("recovery id invalid");if(a*xme<D&&te>1)throw new Error("recovery id is ambiguous for h>1 curve");const q=te===2||te===3?z+a:z;if(!s.isValid(q))throw new Error("recovery id 2 or 3 invalid");const M=s.toBytes(q),_=t.fromBytes(yc(vme((te&1)===0),M)),Y=o.inv(q),X=U(qr("msgHash",I)),re=o.create(-X*Y),oe=o.create(G*Y),Ee=t.BASE.multiplyUnsafe(re).add(_.multiplyUnsafe(oe));if(Ee.is0())throw new Error("point at infinify");return Ee.assertValidity(),Ee}hasHighS(){return b(this.s)}toBytes(I=x){if(ZD(I),I==="der")return CC(ku.hexFromSig(this));const D=o.toBytes(this.r),z=o.toBytes(this.s);if(I==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return yc(Uint8Array.of(this.recovery),D,z)}return yc(D,z)}toHex(I){return om(this.toBytes(I))}assertValidity(){}static fromCompact(I){return k.fromBytes(qr("sig",I),"compact")}static fromDER(I){return k.fromBytes(qr("sig",I),"der")}normalizeS(){return this.hasHighS()?new k(this.r,o.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return om(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return om(this.toBytes("compact"))}}const O=n.bits2int||function(I){if(I.length>8192)throw new Error("input is too large");const D=HN(I),z=I.length*8-l;return z>0?D>>BigInt(z):D},U=n.bits2int_modN||function(I){return o.create(O(I))},R=mE(l);function $(A){return QD("num < 2^"+l,A,Wu,R),o.toBytes(A)}function V(A,I){return Sl(A,void 0,"message"),I?Sl(e(A),void 0,"prehashed message"):A}function j(A,I,D){if(["recovered","canonical"].some(re=>re in D))throw new Error("sign() legacy options not supported");const{lowS:z,prehash:G,extraEntropy:te}=C3(D,v);A=V(A,G);const K=U(A),q=Rg(o,I),M=[$(q),$(K)];if(te!=null&&te!==!1){const re=te===!0?r(g.secretKey):te;M.push(qr("extraEntropy",re))}const _=yc(...M),Y=K;function X(re){const oe=O(re);if(!o.isValidNot0(oe))return;const Ee=o.inv(oe),ce=t.BASE.multiply(oe).toAffine(),me=o.create(ce.x);if(me===Wu)return;const ue=o.create(Ee*o.create(Y+me*q));if(ue===Wu)return;let le=(ce.x===me?0:2)|Number(ce.y&oy),Ie=ue;return z&&b(ue)&&(Ie=o.neg(ue),le^=1),new k(me,Ie,le)}return{seed:_,k2sig:X}}function F(A,I,D={}){A=qr("message",A);const{seed:z,k2sig:G}=j(A,I,D);return Fct(e.outputLen,o.BYTES,i)(z,G)}function W(A){let I;const D=typeof A=="string"||pE(A),z=!D&&A!==null&&typeof A=="object"&&typeof A.r=="bigint"&&typeof A.s=="bigint";if(!D&&!z)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(z)I=new k(A.r,A.s);else if(D){try{I=k.fromBytes(qr("sig",A),"der")}catch(G){if(!(G instanceof ku.Err))throw G}if(!I)try{I=k.fromBytes(qr("sig",A),"compact")}catch{return!1}}return I||!1}function H(A,I,D,z={}){const{lowS:G,prehash:te,format:K}=C3(z,v);if(D=qr("publicKey",D),I=V(qr("message",I),te),"strict"in z)throw new Error("options.strict was renamed to lowS");const q=K===void 0?W(A):k.fromBytes(qr("sig",A),K);if(q===!1)return!1;try{const M=t.fromBytes(D);if(G&&q.hasHighS())return!1;const{r:_,s:Y}=q,X=U(I),re=o.inv(Y),oe=o.create(X*re),Ee=o.create(_*re),ce=t.BASE.multiplyUnsafe(oe).add(M.multiplyUnsafe(Ee));return ce.is0()?!1:o.create(ce.x)===_}catch{return!1}}function B(A,I,D={}){const{prehash:z}=C3(D,v);return I=V(I,z),k.fromBytes(A,"recovered").recoverPublicKey(I).toBytes()}return Object.freeze({keygen:c,getPublicKey:u,getSharedSecret:f,utils:m,lengths:g,Point:t,sign:F,verify:H,recoverPublicKey:B,Signature:k,hash:e})}function Udt(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp;let r=t.allowedPrivateKeyLengths?Array.from(new Set(t.allowedPrivateKeyLengths.map(o=>Math.ceil(o/2)))):void 0;const i=Gm(e.n,{BITS:t.nBitLength,allowedLengths:r,modFromBytes:t.wrapPrivateKey}),s={Fp:n,Fn:i,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:s}}function Fdt(t){const{CURVE:e,curveOpts:n}=Udt(t),r={hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,hash:t.hash,ecdsaOpts:r}}function $dt(t,e){const n=e.Point;return Object.assign({},e,{ProjectivePoint:n,CURVE:Object.assign({},t,Jpe(n.Fn.ORDER,n.Fn.BITS))})}function zdt(t){const{CURVE:e,curveOpts:n,hash:r,ecdsaOpts:i}=Fdt(t),s=Ldt(e,n),o=Bdt(s,r,i);return $dt(t,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Hdt(t,e){const n=r=>zdt({...t,hash:r});return{...n(e),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const JB={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},Vdt={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},IZ=BigInt(2);function qdt(t){const e=JB.p,n=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),c=t*t*t%e,u=c*c*t%e,f=$r(u,n,e)*u%e,m=$r(f,n,e)*u%e,g=$r(m,IZ,e)*c%e,v=$r(g,i,e)*g%e,x=$r(v,s,e)*v%e,b=$r(x,a,e)*x%e,E=$r(b,l,e)*b%e,C=$r(E,a,e)*x%e,k=$r(C,n,e)*u%e,O=$r(k,o,e)*v%e,U=$r(O,r,e)*c%e,R=$r(U,IZ,e);if(!eL.eql(eL.sqr(R),t))throw new Error("Cannot find square root");return R}const eL=Gm(JB.p,{sqrt:qdt}),Gdt=Hdt({...JB,Fp:eL,lowS:!0,endo:Vdt},Bpe);uv.utils.randomPrivateKey;const PZ=()=>{const t=uv.utils.randomPrivateKey(),e=tL(t),n=new Uint8Array(64);return n.set(t),n.set(e,32),{publicKey:e,secretKey:n}},tL=uv.getPublicKey;function RZ(t){try{return uv.ExtendedPoint.fromHex(t),!0}catch{return!1}}const Kdt=(t,e)=>uv.sign(t,e.slice(0,32)),Wdt=uv.verify,Oi=t=>an.isBuffer(t)?t:t instanceof Uint8Array?an.from(t.buffer,t.byteOffset,t.byteLength):an.from(t);class Ydt{constructor(e){Object.assign(this,e)}encode(){return an.from(v3.serialize(_T,this))}static decode(e){return v3.deserialize(_T,this,e)}static decodeUnchecked(e){return v3.deserializeUnchecked(_T,this,e)}}const _T=new Map;var wme;const Jdt=32,nh=32;function Xdt(t){return t._bn!==void 0}let OZ=1;class bt extends Ydt{constructor(e){if(super({}),this._bn=void 0,Xdt(e))this._bn=e._bn;else{if(typeof e=="string"){const n=ss.decode(e);if(n.length!=nh)throw new Error("Invalid public key input");this._bn=new gZ(n)}else this._bn=new gZ(e);if(this._bn.byteLength()>nh)throw new Error("Invalid public key input")}}static unique(){const e=new bt(OZ);return OZ+=1,new bt(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return ss.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(an);if(e.length===nh)return e;const n=an.alloc(32);return e.copy(n,32-e.length),n}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,n,r){const i=an.concat([e.toBuffer(),an.from(n),r.toBuffer()]),s=bZ(i);return new bt(s)}static createProgramAddressSync(e,n){let r=an.alloc(0);e.forEach(function(s){if(s.length>Jdt)throw new TypeError("Max seed length exceeded");r=an.concat([r,Oi(s)])}),r=an.concat([r,n.toBuffer(),an.from("ProgramDerivedAddress")]);const i=bZ(r);if(RZ(i))throw new Error("Invalid seeds, address must fall off the curve");return new bt(i)}static async createProgramAddress(e,n){return this.createProgramAddressSync(e,n)}static findProgramAddressSync(e,n){let r=255,i;for(;r!=0;){try{const s=e.concat(an.from([r]));i=this.createProgramAddressSync(s,n)}catch(s){if(s instanceof TypeError)throw s;r--;continue}return[i,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,n){return this.findProgramAddressSync(e,n)}static isOnCurve(e){const n=new bt(e);return RZ(n.toBytes())}}wme=bt;bt.default=new wme("11111111111111111111111111111111");_T.set(bt,{kind:"struct",fields:[["_bn","u256"]]});new bt("BPFLoader1111111111111111111111111111111111");const ay=1232,Eme=127,Sme=64;class Ame extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Ame.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class Tme extends Error{constructor(e,n){super(`Transaction was not confirmed in ${n.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Tme.prototype,"name",{value:"TransactionExpiredTimeoutError"});class Hb extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Hb.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class DC{constructor(e,n){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=n}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const n of this.keySegments()){if(e<n.length)return n[e];e-=n.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((s,o)=>{r.set(s.toBase58(),o)});const i=s=>{const o=r.get(s.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return e.map(s=>({programIdIndex:i(s.programId),accountKeyIndexes:s.keys.map(o=>i(o.pubkey)),data:s.data}))}}const En=(t="publicKey")=>ve.blob(32,t),Og=(t="string")=>{const e=ve.struct([ve.u32("length"),ve.u32("lengthPadding"),ve.blob(ve.offset(ve.u32(),-8),"chars")],t),n=e.decode.bind(e),r=e.encode.bind(e),i=e;return i.decode=(s,o)=>n(s,o).chars.toString(),i.encode=(s,o,a)=>{const l={chars:an.from(s,"utf8")};return r(l,o,a)},i.alloc=s=>ve.u32().span+ve.u32().span+an.from(s,"utf8").length,i},Qdt=(t="authorized")=>ve.struct([En("staker"),En("withdrawer")],t),Zdt=(t="lockup")=>ve.struct([ve.ns64("unixTimestamp"),ve.ns64("epoch"),En("custodian")],t),eft=(t="voteInit")=>ve.struct([En("nodePubkey"),En("authorizedVoter"),En("authorizedWithdrawer"),ve.u8("commission")],t),tft=(t="voteAuthorizeWithSeedArgs")=>ve.struct([ve.u32("voteAuthorizationType"),En("currentAuthorityDerivedKeyOwnerPubkey"),Og("currentAuthorityDerivedKeySeed"),En("newAuthorized")],t);function kme(t,e){const n=i=>{if(i.span>=0)return i.span;if(typeof i.alloc=="function")return i.alloc(e[i.property]);if("count"in i&&"elementLayout"in i){const s=e[i.property];if(Array.isArray(s))return s.length*n(i.elementLayout)}else if("fields"in i)return kme({layout:i},e[i.property]);return 0};let r=0;return t.layout.fields.forEach(i=>{r+=n(i)}),r}function Pa(t){let e=0,n=0;for(;;){let r=t.shift();if(e|=(r&127)<<n*7,n+=1,(r&128)===0)break}return e}function Ra(t,e){let n=e;for(;;){let r=n&127;if(n>>=7,n==0){t.push(r);break}else r|=128,t.push(r)}}function Gr(t,e){if(!t)throw new Error(e||"Assertion failed")}class WN{constructor(e,n){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=n}static compile(e,n){const r=new Map,i=o=>{const a=o.toBase58();let l=r.get(a);return l===void 0&&(l={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(a,l)),l},s=i(n);s.isSigner=!0,s.isWritable=!0;for(const o of e){i(o.programId).isInvoked=!0;for(const a of o.keys){const l=i(a.pubkey);l.isSigner||(l.isSigner=a.isSigner),l.isWritable||(l.isWritable=a.isWritable)}}return new WN(n,r)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];Gr(e.length<=256,"Max static account keys length exceeded");const n=e.filter(([,l])=>l.isSigner&&l.isWritable),r=e.filter(([,l])=>l.isSigner&&!l.isWritable),i=e.filter(([,l])=>!l.isSigner&&l.isWritable),s=e.filter(([,l])=>!l.isSigner&&!l.isWritable),o={numRequiredSignatures:n.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:s.length};{Gr(n.length>0,"Expected at least one writable signer key");const[l]=n[0];Gr(l===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const a=[...n.map(([l])=>new bt(l)),...r.map(([l])=>new bt(l)),...i.map(([l])=>new bt(l)),...s.map(([l])=>new bt(l))];return[o,a]}extractTableLookup(e){const[n,r]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[i,s]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(n.length===0&&i.length===0))return[{accountKey:e.key,writableIndexes:n,readonlyIndexes:i},{writable:r,readonly:s}]}drainKeysFoundInLookupTable(e,n){const r=new Array,i=new Array;for(const[s,o]of this.keyMetaMap.entries())if(n(o)){const a=new bt(s),l=e.findIndex(c=>c.equals(a));l>=0&&(Gr(l<256,"Max lookup table index exceeded"),r.push(l),i.push(a),this.keyMetaMap.delete(s))}return[r,i]}}const Cme="Reached end of buffer unexpectedly";function zu(t){if(t.length===0)throw new Error(Cme);return t.shift()}function Oa(t,...e){const[n]=e;if(e.length===2?n+(e[1]??0)>t.length:n>=t.length)throw new Error(Cme);return t.splice(...e)}class wd{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(n=>new bt(n)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(n=>this.indexToProgramIds.set(n.programIdIndex,this.accountKeys[n.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:ss.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new DC(this.staticAccountKeys)}static compile(e){const n=WN.compile(e.instructions,e.payerKey),[r,i]=n.getMessageComponents(),o=new DC(i).compileInstructions(e.instructions).map(a=>({programIdIndex:a.programIdIndex,accounts:a.accountKeyIndexes,data:ss.encode(a.data)}));return new wd({header:r,accountKeys:i,recentBlockhash:e.recentBlockhash,instructions:o})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const n=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const r=e-n,s=this.accountKeys.length-n-this.header.numReadonlyUnsignedAccounts;return r<s}else{const r=n-this.header.numReadonlySignedAccounts;return e<r}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,n)=>!this.isProgramId(n))}serialize(){const e=this.accountKeys.length;let n=[];Ra(n,e);const r=this.instructions.map(f=>{const{accounts:m,programIdIndex:g}=f,v=Array.from(ss.decode(f.data));let x=[];Ra(x,m.length);let b=[];return Ra(b,v.length),{programIdIndex:g,keyIndicesCount:an.from(x),keyIndices:m,dataLength:an.from(b),data:v}});let i=[];Ra(i,r.length);let s=an.alloc(ay);an.from(i).copy(s);let o=i.length;r.forEach(f=>{const g=ve.struct([ve.u8("programIdIndex"),ve.blob(f.keyIndicesCount.length,"keyIndicesCount"),ve.seq(ve.u8("keyIndex"),f.keyIndices.length,"keyIndices"),ve.blob(f.dataLength.length,"dataLength"),ve.seq(ve.u8("userdatum"),f.data.length,"data")]).encode(f,s,o);o+=g}),s=s.slice(0,o);const a=ve.struct([ve.blob(1,"numRequiredSignatures"),ve.blob(1,"numReadonlySignedAccounts"),ve.blob(1,"numReadonlyUnsignedAccounts"),ve.blob(n.length,"keyCount"),ve.seq(En("key"),e,"keys"),En("recentBlockhash")]),l={numRequiredSignatures:an.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:an.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:an.from([this.header.numReadonlyUnsignedAccounts]),keyCount:an.from(n),keys:this.accountKeys.map(f=>Oi(f.toBytes())),recentBlockhash:ss.decode(this.recentBlockhash)};let c=an.alloc(2048);const u=a.encode(l,c);return s.copy(c,u),c.slice(0,u+s.length)}static from(e){let n=[...e];const r=zu(n);if(r!==(r&Eme))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=zu(n),s=zu(n),o=Pa(n);let a=[];for(let m=0;m<o;m++){const g=Oa(n,0,nh);a.push(new bt(an.from(g)))}const l=Oa(n,0,nh),c=Pa(n);let u=[];for(let m=0;m<c;m++){const g=zu(n),v=Pa(n),x=Oa(n,0,v),b=Pa(n),E=Oa(n,0,b),C=ss.encode(an.from(E));u.push({programIdIndex:g,accounts:x,data:C})}const f={header:{numRequiredSignatures:r,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:ss.encode(an.from(l)),accountKeys:a,instructions:u};return new wd(f)}}class i1{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const n of this.addressTableLookups)e+=n.readonlyIndexes.length+n.writableIndexes.length;return e}getAccountKeys(e){let n;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");n=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)n=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new DC(this.staticAccountKeys,n)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const n=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(e>=r){const i=e-r,s=this.addressTableLookups.reduce((o,a)=>o+a.writableIndexes.length,0);return i<s}else if(e>=this.header.numRequiredSignatures){const i=e-n,o=r-n-this.header.numReadonlyUnsignedAccounts;return i<o}else{const i=n-this.header.numReadonlySignedAccounts;return e<i}}resolveAddressTableLookups(e){const n={writable:[],readonly:[]};for(const r of this.addressTableLookups){const i=e.find(s=>s.key.equals(r.accountKey));if(!i)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const s of r.writableIndexes)if(s<i.state.addresses.length)n.writable.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${r.accountKey.toBase58()}`);for(const s of r.readonlyIndexes)if(s<i.state.addresses.length)n.readonly.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${r.accountKey.toBase58()}`)}return n}static compile(e){const n=WN.compile(e.instructions,e.payerKey),r=new Array,i={writable:new Array,readonly:new Array},s=e.addressLookupTableAccounts||[];for(const u of s){const f=n.extractTableLookup(u);if(f!==void 0){const[m,{writable:g,readonly:v}]=f;r.push(m),i.writable.push(...g),i.readonly.push(...v)}}const[o,a]=n.getMessageComponents(),c=new DC(a,i).compileInstructions(e.instructions);return new i1({header:o,staticAccountKeys:a,recentBlockhash:e.recentBlockhash,compiledInstructions:c,addressTableLookups:r})}serialize(){const e=Array();Ra(e,this.staticAccountKeys.length);const n=this.serializeInstructions(),r=Array();Ra(r,this.compiledInstructions.length);const i=this.serializeAddressTableLookups(),s=Array();Ra(s,this.addressTableLookups.length);const o=ve.struct([ve.u8("prefix"),ve.struct([ve.u8("numRequiredSignatures"),ve.u8("numReadonlySignedAccounts"),ve.u8("numReadonlyUnsignedAccounts")],"header"),ve.blob(e.length,"staticAccountKeysLength"),ve.seq(En(),this.staticAccountKeys.length,"staticAccountKeys"),En("recentBlockhash"),ve.blob(r.length,"instructionsLength"),ve.blob(n.length,"serializedInstructions"),ve.blob(s.length,"addressTableLookupsLength"),ve.blob(i.length,"serializedAddressTableLookups")]),a=new Uint8Array(ay),c=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(u=>u.toBytes()),recentBlockhash:ss.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:n,addressTableLookupsLength:new Uint8Array(s),serializedAddressTableLookups:i},a);return a.slice(0,c)}serializeInstructions(){let e=0;const n=new Uint8Array(ay);for(const r of this.compiledInstructions){const i=Array();Ra(i,r.accountKeyIndexes.length);const s=Array();Ra(s,r.data.length);const o=ve.struct([ve.u8("programIdIndex"),ve.blob(i.length,"encodedAccountKeyIndexesLength"),ve.seq(ve.u8(),r.accountKeyIndexes.length,"accountKeyIndexes"),ve.blob(s.length,"encodedDataLength"),ve.blob(r.data.length,"data")]);e+=o.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(i),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(s),data:r.data},n,e)}return n.slice(0,e)}serializeAddressTableLookups(){let e=0;const n=new Uint8Array(ay);for(const r of this.addressTableLookups){const i=Array();Ra(i,r.writableIndexes.length);const s=Array();Ra(s,r.readonlyIndexes.length);const o=ve.struct([En("accountKey"),ve.blob(i.length,"encodedWritableIndexesLength"),ve.seq(ve.u8(),r.writableIndexes.length,"writableIndexes"),ve.blob(s.length,"encodedReadonlyIndexesLength"),ve.seq(ve.u8(),r.readonlyIndexes.length,"readonlyIndexes")]);e+=o.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(i),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(s),readonlyIndexes:r.readonlyIndexes},n,e)}return n.slice(0,e)}static deserialize(e){let n=[...e];const r=zu(n),i=r&Eme;Gr(r!==i,"Expected versioned message but received legacy message");const s=i;Gr(s===0,`Expected versioned message with version 0 but found version ${s}`);const o={numRequiredSignatures:zu(n),numReadonlySignedAccounts:zu(n),numReadonlyUnsignedAccounts:zu(n)},a=[],l=Pa(n);for(let v=0;v<l;v++)a.push(new bt(Oa(n,0,nh)));const c=ss.encode(Oa(n,0,nh)),u=Pa(n),f=[];for(let v=0;v<u;v++){const x=zu(n),b=Pa(n),E=Oa(n,0,b),C=Pa(n),k=new Uint8Array(Oa(n,0,C));f.push({programIdIndex:x,accountKeyIndexes:E,data:k})}const m=Pa(n),g=[];for(let v=0;v<m;v++){const x=new bt(Oa(n,0,nh)),b=Pa(n),E=Oa(n,0,b),C=Pa(n),k=Oa(n,0,C);g.push({accountKey:x,writableIndexes:E,readonlyIndexes:k})}return new i1({header:o,staticAccountKeys:a,recentBlockhash:c,compiledInstructions:f,addressTableLookups:g})}}let vf=(function(t){return t[t.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",t[t.PROCESSED=1]="PROCESSED",t[t.TIMED_OUT=2]="TIMED_OUT",t[t.NONCE_INVALID=3]="NONCE_INVALID",t})({});const nft=an.alloc(Sme).fill(0);class Di{constructor(e){this.keys=void 0,this.programId=void 0,this.data=an.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:n,isWritable:r})=>({pubkey:e.toJSON(),isSigner:n,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class La{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:n,nonceInfo:r}=e;this.minNonceContextSlot=n,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:n,lastValidBlockHeight:r}=e;this.recentBlockhash=n,this.lastValidBlockHeight=r}else{const{recentBlockhash:n,nonceInfo:r}=e;r&&(this.nonceInfo=r),this.recentBlockhash=n}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(n=>{"instructions"in n?this.instructions=this.instructions.concat(n.instructions):"data"in n&&"programId"in n&&"keys"in n?this.instructions.push(n):this.instructions.push(new Di(n))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,n;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?n=[this.nonceInfo.nonceInstruction,...this.instructions]:n=this.instructions):(e=this.recentBlockhash,n=this.instructions),!e)throw new Error("Transaction recentBlockhash required");n.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let x=0;x<n.length;x++)if(n[x].programId===void 0)throw new Error(`Transaction instruction index ${x} has undefined program id`);const i=[],s=[];n.forEach(x=>{x.keys.forEach(E=>{s.push({...E})});const b=x.programId.toString();i.includes(b)||i.push(b)}),i.forEach(x=>{s.push({pubkey:new bt(x),isSigner:!1,isWritable:!1})});const o=[];s.forEach(x=>{const b=x.pubkey.toString(),E=o.findIndex(C=>C.pubkey.toString()===b);E>-1?(o[E].isWritable=o[E].isWritable||x.isWritable,o[E].isSigner=o[E].isSigner||x.isSigner):o.push(x)}),o.sort(function(x,b){if(x.isSigner!==b.isSigner)return x.isSigner?-1:1;if(x.isWritable!==b.isWritable)return x.isWritable?-1:1;const E={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return x.pubkey.toBase58().localeCompare(b.pubkey.toBase58(),"en",E)});const a=o.findIndex(x=>x.pubkey.equals(r));if(a>-1){const[x]=o.splice(a,1);x.isSigner=!0,x.isWritable=!0,o.unshift(x)}else o.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const x of this.signatures){const b=o.findIndex(E=>E.pubkey.equals(x.publicKey));if(b>-1)o[b].isSigner||(o[b].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${x.publicKey.toString()}`)}let l=0,c=0,u=0;const f=[],m=[];o.forEach(({pubkey:x,isSigner:b,isWritable:E})=>{b?(f.push(x.toString()),l+=1,E||(c+=1)):(m.push(x.toString()),E||(u+=1))});const g=f.concat(m),v=n.map(x=>{const{data:b,programId:E}=x;return{programIdIndex:g.indexOf(E.toString()),accounts:x.keys.map(C=>g.indexOf(C.pubkey.toString())),data:ss.encode(b)}});return v.forEach(x=>{Gr(x.programIdIndex>=0),x.accounts.forEach(b=>Gr(b>=0))}),new wd({header:{numRequiredSignatures:l,numReadonlySignedAccounts:c,numReadonlyUnsignedAccounts:u},accountKeys:g,recentBlockhash:e,instructions:v})}_compile(){const e=this.compileMessage(),n=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===n.length&&this.signatures.every((i,s)=>n[s].equals(i.publicKey))||(this.signatures=n.map(r=>({signature:null,publicKey:r}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const n=new Set;this.signatures=e.filter(r=>{const i=r.toString();return n.has(i)?!1:(n.add(i),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...e){if(e.length===0)throw new Error("No signers");const n=new Set,r=[];for(const s of e){const o=s.publicKey.toString();n.has(o)||(n.add(o),r.push(s))}this.signatures=r.map(s=>({signature:null,publicKey:s.publicKey}));const i=this._compile();this._partialSign(i,...r)}partialSign(...e){if(e.length===0)throw new Error("No signers");const n=new Set,r=[];for(const s of e){const o=s.publicKey.toString();n.has(o)||(n.add(o),r.push(s))}const i=this._compile();this._partialSign(i,...r)}_partialSign(e,...n){const r=e.serialize();n.forEach(i=>{const s=Kdt(r,i.secretKey);this._addSignature(i.publicKey,Oi(s))})}addSignature(e,n){this._compile(),this._addSignature(e,n)}_addSignature(e,n){Gr(n.length===64);const r=this.signatures.findIndex(i=>e.equals(i.publicKey));if(r<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[r].signature=an.from(n)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,n){const r={};for(const{signature:i,publicKey:s}of this.signatures)i===null?n&&(r.missing||(r.missing=[])).push(s):Wdt(i,e,s.toBytes())||(r.invalid||(r.invalid=[])).push(s);return r.invalid||r.missing?r:void 0}serialize(e){const{requireAllSignatures:n,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),i=this.serializeMessage();if(r){const s=this._getMessageSignednessErrors(i,n);if(s){let o="Signature verification failed.";throw s.invalid&&(o+=`
Invalid signature for public key${s.invalid.length===1?"":"(s)"} [\`${s.invalid.map(a=>a.toBase58()).join("`, `")}\`].`),s.missing&&(o+=`
Missing signature for public key${s.missing.length===1?"":"(s)"} [\`${s.missing.map(a=>a.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(i)}_serialize(e){const{signatures:n}=this,r=[];Ra(r,n.length);const i=r.length+n.length*64+e.length,s=an.alloc(i);return Gr(n.length<256),an.from(r).copy(s,0),n.forEach(({signature:o},a)=>{o!==null&&(Gr(o.length===64,"signature has invalid length"),an.from(o).copy(s,r.length+a*64))}),e.copy(s,r.length+n.length*64),Gr(s.length<=ay,`Transaction too large: ${s.length} > ${ay}`),s}get keys(){return Gr(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return Gr(this.instructions.length===1),this.instructions[0].programId}get data(){return Gr(this.instructions.length===1),this.instructions[0].data}static from(e){let n=[...e];const r=Pa(n);let i=[];for(let s=0;s<r;s++){const o=Oa(n,0,Sme);i.push(ss.encode(an.from(o)))}return La.populate(wd.from(n),i)}static populate(e,n=[]){const r=new La;return r.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(r.feePayer=e.accountKeys[0]),n.forEach((i,s)=>{const o={signature:i==ss.encode(nft)?null:ss.decode(i),publicKey:e.accountKeys[s]};r.signatures.push(o)}),e.instructions.forEach(i=>{const s=i.accounts.map(o=>{const a=e.accountKeys[o];return{pubkey:a,isSigner:r.signatures.some(l=>l.publicKey.toString()===a.toString())||e.isAccountSigner(o),isWritable:e.isAccountWritable(o)}});r.instructions.push(new Di({keys:s,programId:e.accountKeys[i.programIdIndex],data:ss.decode(i.data)}))}),r._message=e,r._json=r.toJSON(),r}}class Nme{constructor(e){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=e.payerKey,this.instructions=e.instructions,this.recentBlockhash=e.recentBlockhash}static decompile(e,n){const{header:r,compiledInstructions:i,recentBlockhash:s}=e,{numRequiredSignatures:o,numReadonlySignedAccounts:a,numReadonlyUnsignedAccounts:l}=r,c=o-a;Gr(c>0,"Message header is invalid");const u=e.staticAccountKeys.length-o-l;Gr(u>=0,"Message header is invalid");const f=e.getAccountKeys(n),m=f.get(0);if(m===void 0)throw new Error("Failed to decompile message because no account keys were found");const g=[];for(const v of i){const x=[];for(const E of v.accountKeyIndexes){const C=f.get(E);if(C===void 0)throw new Error(`Failed to find key for account key index ${E}`);const k=E<o;let O;k?O=E<c:E<f.staticAccountKeys.length?O=E-o<u:O=E-f.staticAccountKeys.length<f.accountKeysFromLookups.writable.length,x.push({pubkey:C,isSigner:E<r.numRequiredSignatures,isWritable:O})}const b=f.get(v.programIdIndex);if(b===void 0)throw new Error(`Failed to find program id for program id index ${v.programIdIndex}`);g.push(new Di({programId:b,data:Oi(v.data),keys:x}))}return new Nme({payerKey:m,instructions:g,recentBlockhash:s})}compileToLegacyMessage(){return wd.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(e){return i1.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:e})}}const rft=160,ift=64,sft=rft/ift,oft=1e3/sft,c0t=new bt("SysvarC1ock11111111111111111111111111111111");new bt("SysvarEpochSchedu1e111111111111111111111111");new bt("Sysvar1nstructions1111111111111111111111111");const N3=new bt("SysvarRecentB1ockHashes11111111111111111111"),MZ=new bt("SysvarRent111111111111111111111111111111111");new bt("SysvarRewards111111111111111111111111111111");new bt("SysvarS1otHashes111111111111111111111111111");new bt("SysvarS1otHistory11111111111111111111111111");new bt("SysvarStakeHistory1111111111111111111111111");class DZ extends Error{constructor({action:e,signature:n,transactionMessage:r,logs:i}){const s=i?`Logs: 
${JSON.stringify(i.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let a;switch(e){case"send":a=`Transaction ${n} resulted in an error. 
${r}. `+s+o;break;case"simulate":a=`Simulation failed. 
Message: ${r}. 
`+s+o;break;default:a=`Unknown action '${(l=>l)(e)}'`}super(a),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=n,this.transactionMessage=r,this.transactionLogs=i||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const e=this.transactionLogs;if(!(e!=null&&typeof e=="object"&&"then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((n,r)=>{e.getTransaction(this.signature).then(i=>{if(i&&i.meta&&i.meta.logMessages){const s=i.meta.logMessages;this.transactionLogs=s,n(s)}else r(new Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}}class Dt extends Error{constructor({code:e,message:n,data:r},i){super(i!=null?`${i}: ${n}`:n),this.code=void 0,this.data=void 0,this.code=e,this.data=r,this.name="SolanaJSONRPCError"}}function gg(t){return new Promise(e=>setTimeout(e,t))}function ws(t,e){const n=t.layout.span>=0?t.layout.span:kme(t,e),r=an.alloc(n),i=Object.assign({instruction:t.index},e);return t.layout.encode(i,r),r}const aft=ve.nu64("lamportsPerSignature"),_me=ve.struct([ve.u32("version"),ve.u32("state"),En("authorizedPubkey"),En("nonce"),ve.struct([aft],"feeCalculator")]),LZ=_me.span;class XB{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const n=_me.decode(Oi(e),0);return new XB({authorizedPubkey:new bt(n.authorizedPubkey),nonce:new bt(n.nonce).toString(),feeCalculator:n.feeCalculator})}}function kx(t){const e=ve.blob(8,t),n=e.decode.bind(e),r=e.encode.bind(e),i=e,s=Xut();return i.decode=(o,a)=>{const l=n(o,a);return s.decode(l)},i.encode=(o,a,l)=>{const c=s.encode(o);return r(c,a,l)},i}const ya=Object.freeze({Create:{index:0,layout:ve.struct([ve.u32("instruction"),ve.ns64("lamports"),ve.ns64("space"),En("programId")])},Assign:{index:1,layout:ve.struct([ve.u32("instruction"),En("programId")])},Transfer:{index:2,layout:ve.struct([ve.u32("instruction"),kx("lamports")])},CreateWithSeed:{index:3,layout:ve.struct([ve.u32("instruction"),En("base"),Og("seed"),ve.ns64("lamports"),ve.ns64("space"),En("programId")])},AdvanceNonceAccount:{index:4,layout:ve.struct([ve.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:ve.struct([ve.u32("instruction"),ve.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:ve.struct([ve.u32("instruction"),En("authorized")])},AuthorizeNonceAccount:{index:7,layout:ve.struct([ve.u32("instruction"),En("authorized")])},Allocate:{index:8,layout:ve.struct([ve.u32("instruction"),ve.ns64("space")])},AllocateWithSeed:{index:9,layout:ve.struct([ve.u32("instruction"),En("base"),Og("seed"),ve.ns64("space"),En("programId")])},AssignWithSeed:{index:10,layout:ve.struct([ve.u32("instruction"),En("base"),Og("seed"),En("programId")])},TransferWithSeed:{index:11,layout:ve.struct([ve.u32("instruction"),kx("lamports"),Og("seed"),En("programId")])},UpgradeNonceAccount:{index:12,layout:ve.struct([ve.u32("instruction")])}});class Cx{constructor(){}static createAccount(e){const n=ya.Create,r=ws(n,{lamports:e.lamports,space:e.space,programId:Oi(e.programId.toBuffer())});return new Di({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}static transfer(e){let n,r;if("basePubkey"in e){const i=ya.TransferWithSeed;n=ws(i,{lamports:BigInt(e.lamports),seed:e.seed,programId:Oi(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{const i=ya.Transfer;n=ws(i,{lamports:BigInt(e.lamports)}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new Di({keys:r,programId:this.programId,data:n})}static assign(e){let n,r;if("basePubkey"in e){const i=ya.AssignWithSeed;n=ws(i,{base:Oi(e.basePubkey.toBuffer()),seed:e.seed,programId:Oi(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=ya.Assign;n=ws(i,{programId:Oi(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new Di({keys:r,programId:this.programId,data:n})}static createAccountWithSeed(e){const n=ya.CreateWithSeed,r=ws(n,{base:Oi(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:Oi(e.programId.toBuffer())});let i=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||i.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new Di({keys:i,programId:this.programId,data:r})}static createNonceAccount(e){const n=new La;"basePubkey"in e&&"seed"in e?n.add(Cx.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:LZ,programId:this.programId})):n.add(Cx.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:LZ,programId:this.programId}));const r={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return n.add(this.nonceInitialize(r)),n}static nonceInitialize(e){const n=ya.InitializeNonceAccount,r=ws(n,{authorized:Oi(e.authorizedPubkey.toBuffer())}),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:N3,isSigner:!1,isWritable:!1},{pubkey:MZ,isSigner:!1,isWritable:!1}],programId:this.programId,data:r};return new Di(i)}static nonceAdvance(e){const n=ya.AdvanceNonceAccount,r=ws(n),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:N3,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new Di(i)}static nonceWithdraw(e){const n=ya.WithdrawNonceAccount,r=ws(n,{lamports:e.lamports});return new Di({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:N3,isSigner:!1,isWritable:!1},{pubkey:MZ,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static nonceAuthorize(e){const n=ya.AuthorizeNonceAccount,r=ws(n,{authorized:Oi(e.newAuthorizedPubkey.toBuffer())});return new Di({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static allocate(e){let n,r;if("basePubkey"in e){const i=ya.AllocateWithSeed;n=ws(i,{base:Oi(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:Oi(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=ya.Allocate;n=ws(i,{space:e.space}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new Di({keys:r,programId:this.programId,data:n})}}Cx.programId=new bt("11111111111111111111111111111111");new bt("BPFLoader2111111111111111111111111111111111");function lft(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var _3,jZ;function cft(){if(jZ)return _3;jZ=1;var t=Object.prototype.toString,e=Object.keys||function(r){var i=[];for(var s in r)i.push(s);return i};function n(r,i){var s,o,a,l,c,u,f;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return n(r.toJSON(),i);if(f=t.call(r),f==="[object Array]"){for(a="[",o=r.length-1,s=0;s<o;s++)a+=n(r[s],!0)+",";return o>-1&&(a+=n(r[s],!0)),a+"]"}else if(f==="[object Object]"){for(l=e(r).sort(),o=l.length,a="",s=0;s<o;)c=l[s],u=n(r[c],!1),u!==void 0&&(a&&(a+=","),a+=JSON.stringify(c)+":"+u),s++;return"{"+a+"}"}else return JSON.stringify(r);case"function":case"undefined":return i?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}return _3=function(r){var i=n(r,!1);if(i!==void 0)return""+i},_3}var uft=cft(),BZ=lft(uft);const Nb=32;function I3(t){let e=0;for(;t>1;)t/=2,e++;return e}function dft(t){return t===0?1:(t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t|=t>>32,t+1)}class fft{constructor(e,n,r,i,s){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=n,this.warmup=r,this.firstNormalEpoch=i,this.firstNormalSlot=s}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const n=I3(dft(e+Nb+1))-I3(Nb)-1,r=this.getSlotsInEpoch(n),i=e-(r-Nb);return[n,i]}else{const n=e-this.firstNormalSlot,r=Math.floor(n/this.slotsPerEpoch),i=this.firstNormalEpoch+r,s=n%this.slotsPerEpoch;return[i,s]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*Nb:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+I3(Nb)):this.slotsPerEpoch}}var hft=globalThis.fetch;class pft extends Rdt{constructor(e,n,r){const i=s=>{const o=Idt(s,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...n});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(i,e,n,r),this.underlyingSocket=void 0}call(...e){var r;const n=(r=this.underlyingSocket)==null?void 0:r.readyState;return n===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+n+")"))}notify(...e){var r;const n=(r=this.underlyingSocket)==null?void 0:r.readyState;return n===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+n+")"))}}function mft(t,e){let n;try{n=t.layout.decode(e)}catch(r){throw new Error("invalid instruction; "+r)}if(n.typeIndex!==t.index)throw new Error(`invalid account data; account type mismatch ${n.typeIndex} != ${t.index}`);return n}const UZ=56;class FZ{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const n=mft(gft,e),r=e.length-UZ;Gr(r>=0,"lookup table is invalid"),Gr(r%32===0,"lookup table is invalid");const i=r/32,{addresses:s}=ve.struct([ve.seq(En(),i,"addresses")]).decode(e.slice(UZ));return{deactivationSlot:n.deactivationSlot,lastExtendedSlot:n.lastExtendedSlot,lastExtendedSlotStartIndex:n.lastExtendedStartIndex,authority:n.authority.length!==0?new bt(n.authority[0]):void 0,addresses:s.map(o=>new bt(o))}}}const gft={index:1,layout:ve.struct([ve.u32("typeIndex"),kx("deactivationSlot"),ve.nu64("lastExtendedSlot"),ve.u8("lastExtendedStartIndex"),ve.u8(),ve.seq(En(),ve.offset(ve.u8(),-1),"authority")])},yft=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function xft(t){const e=t.match(yft);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${t}\``);const[n,r,i,s]=e,o=t.startsWith("https:")?"wss:":"ws:",a=i==null?null:parseInt(i.slice(1),10),l=a==null?"":`:${a+1}`;return`${o}//${r}${l}${s}`}const jr=vE(WB(bt),ut(),t=>new bt(t)),Ime=YB([ut(),Or("base64")]),QB=vE(WB(an),Ime,t=>an.from(t[0],"base64")),vft=30*1e3;function bft(t){if(/^https?:/.test(t)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return t}function dr(t){let e,n;if(typeof t=="string")e=t;else if(t){const{commitment:r,...i}=t;e=r,n=i}return{commitment:e,config:n}}function $Z(t){return t.map(e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e)}function Pme(t){return Qs([nt({jsonrpc:Or("2.0"),id:ut(),result:t}),nt({jsonrpc:Or("2.0"),id:ut(),error:nt({code:dv(),message:ut(),data:Vt(idt())})})])}const wft=Pme(dv());function hn(t){return vE(Pme(t),wft,e=>"error"in e?e:{...e,result:dt(e.result,t)})}function ei(t){return hn(nt({context:nt({slot:Oe()}),value:t}))}function YN(t){return nt({context:nt({slot:Oe()}),value:t})}function P3(t,e){return t===0?new i1({header:e.header,staticAccountKeys:e.accountKeys.map(n=>new bt(n)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(n=>({programIdIndex:n.programIdIndex,accountKeyIndexes:n.accounts,data:ss.decode(n.data)})),addressTableLookups:e.addressTableLookups}):new wd(e)}const Eft=nt({foundation:Oe(),foundationTerm:Oe(),initial:Oe(),taper:Oe(),terminal:Oe()}),Sft=hn(mt(gt(nt({epoch:Oe(),effectiveSlot:Oe(),amount:Oe(),postBalance:Oe(),commission:Vt(gt(Oe()))})))),Aft=mt(nt({slot:Oe(),prioritizationFee:Oe()})),Tft=nt({total:Oe(),validator:Oe(),foundation:Oe(),epoch:Oe()}),kft=nt({epoch:Oe(),slotIndex:Oe(),slotsInEpoch:Oe(),absoluteSlot:Oe(),blockHeight:Vt(Oe()),transactionCount:Vt(Oe())}),Cft=nt({slotsPerEpoch:Oe(),leaderScheduleSlotOffset:Oe(),warmup:Bc(),firstNormalEpoch:Oe(),firstNormalSlot:Oe()}),Nft=ume(ut(),mt(Oe())),Wm=gt(Qs([nt({}),ut()])),_ft=nt({err:Wm}),Ift=Or("receivedSignature"),Pft=nt({"solana-core":ut(),"feature-set":Vt(Oe())}),Rft=nt({program:ut(),programId:jr,parsed:dv()}),Oft=nt({programId:jr,accounts:mt(jr),data:ut()}),zZ=ei(nt({err:gt(Qs([nt({}),ut()])),logs:gt(mt(ut())),accounts:Vt(gt(mt(gt(nt({executable:Bc(),owner:ut(),lamports:Oe(),data:mt(ut()),rentEpoch:Vt(Oe())}))))),unitsConsumed:Vt(Oe()),returnData:Vt(gt(nt({programId:ut(),data:YB([ut(),Or("base64")])}))),innerInstructions:Vt(gt(mt(nt({index:Oe(),instructions:mt(Qs([Rft,Oft]))}))))})),Mft=ei(nt({byIdentity:ume(ut(),mt(Oe())),range:nt({firstSlot:Oe(),lastSlot:Oe()})}));function Dft(t,e,n,r,i,s){const o=n||hft;let a;s!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let l;return r&&(l=async(u,f)=>{const m=await new Promise((g,v)=>{try{r(u,f,(x,b)=>g([x,b]))}catch(x){v(x)}});return await o(...m)}),new Ndt(async(u,f)=>{const m={method:"POST",body:u,agent:a,headers:Object.assign({"Content-Type":"application/json"},e||{},Dht)};try{let g=5,v,x=500;for(;l?v=await l(t,m):v=await o(t,m),!(v.status!==429||i===!0||(g-=1,g===0));)console.error(`Server responded with ${v.status} ${v.statusText}.  Retrying after ${x}ms delay...`),await gg(x),x*=2;const b=await v.text();v.ok?f(null,b):f(new Error(`${v.status} ${v.statusText}: ${b}`))}catch(g){g instanceof Error&&f(g)}},{})}function Lft(t){return(e,n)=>new Promise((r,i)=>{t.request(e,n,(s,o)=>{if(s){i(s);return}r(o)})})}function jft(t){return e=>new Promise((n,r)=>{e.length===0&&n([]);const i=e.map(s=>t.request(s.methodName,s.args));t.request(i,(s,o)=>{if(s){r(s);return}n(o)})})}const Bft=hn(Eft),Uft=hn(Tft),Fft=hn(Aft),$ft=hn(kft),zft=hn(Cft),Hft=hn(Nft),Vft=hn(Oe()),qft=ei(nt({total:Oe(),circulating:Oe(),nonCirculating:Oe(),nonCirculatingAccounts:mt(jr)})),nL=nt({amount:ut(),uiAmount:gt(Oe()),decimals:Oe(),uiAmountString:Vt(ut())}),Gft=ei(mt(nt({address:jr,amount:ut(),uiAmount:gt(Oe()),decimals:Oe(),uiAmountString:Vt(ut())}))),Kft=ei(mt(nt({pubkey:jr,account:nt({executable:Bc(),owner:jr,lamports:Oe(),data:QB,rentEpoch:Oe()})}))),rL=nt({program:ut(),parsed:dv(),space:Oe()}),Wft=ei(mt(nt({pubkey:jr,account:nt({executable:Bc(),owner:jr,lamports:Oe(),data:rL,rentEpoch:Oe()})}))),Yft=ei(mt(nt({lamports:Oe(),address:jr}))),s1=nt({executable:Bc(),owner:jr,lamports:Oe(),data:QB,rentEpoch:Oe()}),Jft=nt({pubkey:jr,account:s1}),Xft=vE(Qs([WB(an),rL]),Qs([Ime,rL]),t=>Array.isArray(t)?dt(t,QB):t),iL=nt({executable:Bc(),owner:jr,lamports:Oe(),data:Xft,rentEpoch:Oe()}),Qft=nt({pubkey:jr,account:iL}),Zft=nt({state:Qs([Or("active"),Or("inactive"),Or("activating"),Or("deactivating")]),active:Oe(),inactive:Oe()}),eht=hn(mt(nt({signature:ut(),slot:Oe(),err:Wm,memo:gt(ut()),blockTime:Vt(gt(Oe()))}))),tht=hn(mt(nt({signature:ut(),slot:Oe(),err:Wm,memo:gt(ut()),blockTime:Vt(gt(Oe()))}))),nht=nt({subscription:Oe(),result:YN(s1)}),rht=nt({pubkey:jr,account:s1}),iht=nt({subscription:Oe(),result:YN(rht)}),sht=nt({parent:Oe(),slot:Oe(),root:Oe()}),oht=nt({subscription:Oe(),result:sht}),aht=Qs([nt({type:Qs([Or("firstShredReceived"),Or("completed"),Or("optimisticConfirmation"),Or("root")]),slot:Oe(),timestamp:Oe()}),nt({type:Or("createdBank"),parent:Oe(),slot:Oe(),timestamp:Oe()}),nt({type:Or("frozen"),slot:Oe(),timestamp:Oe(),stats:nt({numTransactionEntries:Oe(),numSuccessfulTransactions:Oe(),numFailedTransactions:Oe(),maxTransactionsPerEntry:Oe()})}),nt({type:Or("dead"),slot:Oe(),timestamp:Oe(),err:ut()})]),lht=nt({subscription:Oe(),result:aht}),cht=nt({subscription:Oe(),result:YN(Qs([_ft,Ift]))}),uht=nt({subscription:Oe(),result:Oe()}),dht=nt({pubkey:ut(),gossip:gt(ut()),tpu:gt(ut()),rpc:gt(ut()),version:gt(ut())}),HZ=nt({votePubkey:ut(),nodePubkey:ut(),activatedStake:Oe(),epochVoteAccount:Bc(),epochCredits:mt(YB([Oe(),Oe(),Oe()])),commission:Oe(),lastVote:Oe(),rootSlot:gt(Oe())}),fht=hn(nt({current:mt(HZ),delinquent:mt(HZ)})),hht=Qs([Or("processed"),Or("confirmed"),Or("finalized")]),pht=nt({slot:Oe(),confirmations:gt(Oe()),err:Wm,confirmationStatus:Vt(hht)}),mht=ei(mt(gt(pht))),ght=hn(Oe()),Rme=nt({accountKey:jr,writableIndexes:mt(Oe()),readonlyIndexes:mt(Oe())}),ZB=nt({signatures:mt(ut()),message:nt({accountKeys:mt(ut()),header:nt({numRequiredSignatures:Oe(),numReadonlySignedAccounts:Oe(),numReadonlyUnsignedAccounts:Oe()}),instructions:mt(nt({accounts:mt(Oe()),data:ut(),programIdIndex:Oe()})),recentBlockhash:ut(),addressTableLookups:Vt(mt(Rme))})}),Ome=nt({pubkey:jr,signer:Bc(),writable:Bc(),source:Vt(Qs([Or("transaction"),Or("lookupTable")]))}),Mme=nt({accountKeys:mt(Ome),signatures:mt(ut())}),Dme=nt({parsed:dv(),program:ut(),programId:jr}),Lme=nt({accounts:mt(jr),data:ut(),programId:jr}),yht=Qs([Lme,Dme]),xht=Qs([nt({parsed:dv(),program:ut(),programId:ut()}),nt({accounts:mt(ut()),data:ut(),programId:ut()})]),jme=vE(yht,xht,t=>"accounts"in t?dt(t,Lme):dt(t,Dme)),Bme=nt({signatures:mt(ut()),message:nt({accountKeys:mt(Ome),instructions:mt(jme),recentBlockhash:ut(),addressTableLookups:Vt(gt(mt(Rme)))})}),LC=nt({accountIndex:Oe(),mint:ut(),owner:Vt(ut()),programId:Vt(ut()),uiTokenAmount:nL}),Ume=nt({writable:mt(jr),readonly:mt(jr)}),JN=nt({err:Wm,fee:Oe(),innerInstructions:Vt(gt(mt(nt({index:Oe(),instructions:mt(nt({accounts:mt(Oe()),data:ut(),programIdIndex:Oe()}))})))),preBalances:mt(Oe()),postBalances:mt(Oe()),logMessages:Vt(gt(mt(ut()))),preTokenBalances:Vt(gt(mt(LC))),postTokenBalances:Vt(gt(mt(LC))),loadedAddresses:Vt(Ume),computeUnitsConsumed:Vt(Oe()),costUnits:Vt(Oe())}),e7=nt({err:Wm,fee:Oe(),innerInstructions:Vt(gt(mt(nt({index:Oe(),instructions:mt(jme)})))),preBalances:mt(Oe()),postBalances:mt(Oe()),logMessages:Vt(gt(mt(ut()))),preTokenBalances:Vt(gt(mt(LC))),postTokenBalances:Vt(gt(mt(LC))),loadedAddresses:Vt(Ume),computeUnitsConsumed:Vt(Oe()),costUnits:Vt(Oe())}),fv=Qs([Or(0),Or("legacy")]),Ym=nt({pubkey:ut(),lamports:Oe(),postBalance:gt(Oe()),rewardType:gt(ut()),commission:Vt(gt(Oe()))}),vht=hn(gt(nt({blockhash:ut(),previousBlockhash:ut(),parentSlot:Oe(),transactions:mt(nt({transaction:ZB,meta:gt(JN),version:Vt(fv)})),rewards:Vt(mt(Ym)),blockTime:gt(Oe()),blockHeight:gt(Oe())}))),bht=hn(gt(nt({blockhash:ut(),previousBlockhash:ut(),parentSlot:Oe(),rewards:Vt(mt(Ym)),blockTime:gt(Oe()),blockHeight:gt(Oe())}))),wht=hn(gt(nt({blockhash:ut(),previousBlockhash:ut(),parentSlot:Oe(),transactions:mt(nt({transaction:Mme,meta:gt(JN),version:Vt(fv)})),rewards:Vt(mt(Ym)),blockTime:gt(Oe()),blockHeight:gt(Oe())}))),Eht=hn(gt(nt({blockhash:ut(),previousBlockhash:ut(),parentSlot:Oe(),transactions:mt(nt({transaction:Bme,meta:gt(e7),version:Vt(fv)})),rewards:Vt(mt(Ym)),blockTime:gt(Oe()),blockHeight:gt(Oe())}))),Sht=hn(gt(nt({blockhash:ut(),previousBlockhash:ut(),parentSlot:Oe(),transactions:mt(nt({transaction:Mme,meta:gt(e7),version:Vt(fv)})),rewards:Vt(mt(Ym)),blockTime:gt(Oe()),blockHeight:gt(Oe())}))),Aht=hn(gt(nt({blockhash:ut(),previousBlockhash:ut(),parentSlot:Oe(),rewards:Vt(mt(Ym)),blockTime:gt(Oe()),blockHeight:gt(Oe())}))),Tht=hn(gt(nt({blockhash:ut(),previousBlockhash:ut(),parentSlot:Oe(),transactions:mt(nt({transaction:ZB,meta:gt(JN)})),rewards:Vt(mt(Ym)),blockTime:gt(Oe())}))),VZ=hn(gt(nt({blockhash:ut(),previousBlockhash:ut(),parentSlot:Oe(),signatures:mt(ut()),blockTime:gt(Oe())}))),R3=hn(gt(nt({slot:Oe(),meta:gt(JN),blockTime:Vt(gt(Oe())),transaction:ZB,version:Vt(fv)}))),VA=hn(gt(nt({slot:Oe(),transaction:Bme,meta:gt(e7),blockTime:Vt(gt(Oe())),version:Vt(fv)}))),kht=ei(nt({blockhash:ut(),lastValidBlockHeight:Oe()})),Cht=ei(Bc()),Nht=nt({slot:Oe(),numTransactions:Oe(),numSlots:Oe(),samplePeriodSecs:Oe()}),_ht=hn(mt(Nht)),Iht=ei(gt(nt({feeCalculator:nt({lamportsPerSignature:Oe()})}))),Pht=hn(ut()),Rht=hn(ut()),Oht=nt({err:Wm,logs:mt(ut()),signature:ut()}),Mht=nt({result:YN(Oht),subscription:Oe()}),Dht={"solana-client":"js/1.0.0-maintenance"};class Lht{constructor(e,n){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const c={};return async u=>{const{commitment:f,config:m}=dr(u),g=this._buildArgs([],f,void 0,m),v=BZ(g);return c[v]=c[v]??(async()=>{try{const x=await this._rpcRequest("getBlockHeight",g),b=dt(x,hn(Oe()));if("error"in b)throw new Dt(b.error,"failed to get block height information");return b.result}finally{delete c[v]}})(),await c[v]}})();let r,i,s,o,a,l;n&&typeof n=="string"?this._commitment=n:n&&(this._commitment=n.commitment,this._confirmTransactionInitialTimeout=n.confirmTransactionInitialTimeout,r=n.wsEndpoint,i=n.httpHeaders,s=n.fetch,o=n.fetchMiddleware,a=n.disableRetryOnRateLimit,l=n.httpAgent),this._rpcEndpoint=bft(e),this._rpcWsEndpoint=r||xft(e),this._rpcClient=Dft(e,i,s,o,a,l),this._rpcRequest=Lft(this._rpcClient),this._rpcBatchRequest=jft(this._rpcClient),this._rpcWebSocket=new pft(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,n){const{commitment:r,config:i}=dr(n),s=this._buildArgs([e.toBase58()],r,void 0,i),o=await this._rpcRequest("getBalance",s),a=dt(o,ei(Oe()));if("error"in a)throw new Dt(a.error,`failed to get balance for ${e.toBase58()}`);return a.result}async getBalance(e,n){return await this.getBalanceAndContext(e,n).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+r)})}async getBlockTime(e){const n=await this._rpcRequest("getBlockTime",[e]),r=dt(n,hn(gt(Oe())));if("error"in r)throw new Dt(r.error,`failed to get block time for slot ${e}`);return r.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),n=dt(e,hn(Oe()));if("error"in n)throw new Dt(n.error,"failed to get minimum ledger slot");return n.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),n=dt(e,Vft);if("error"in n)throw new Dt(n.error,"failed to get first available block");return n.result}async getSupply(e){let n={};typeof e=="string"?n={commitment:e}:e?n={...e,commitment:e&&e.commitment||this.commitment}:n={commitment:this.commitment};const r=await this._rpcRequest("getSupply",[n]),i=dt(r,qft);if("error"in i)throw new Dt(i.error,"failed to get supply");return i.result}async getTokenSupply(e,n){const r=this._buildArgs([e.toBase58()],n),i=await this._rpcRequest("getTokenSupply",r),s=dt(i,ei(nL));if("error"in s)throw new Dt(s.error,"failed to get token supply");return s.result}async getTokenAccountBalance(e,n){const r=this._buildArgs([e.toBase58()],n),i=await this._rpcRequest("getTokenAccountBalance",r),s=dt(i,ei(nL));if("error"in s)throw new Dt(s.error,"failed to get token account balance");return s.result}async getTokenAccountsByOwner(e,n,r){const{commitment:i,config:s}=dr(r);let o=[e.toBase58()];"mint"in n?o.push({mint:n.mint.toBase58()}):o.push({programId:n.programId.toBase58()});const a=this._buildArgs(o,i,"base64",s),l=await this._rpcRequest("getTokenAccountsByOwner",a),c=dt(l,Kft);if("error"in c)throw new Dt(c.error,`failed to get token accounts owned by account ${e.toBase58()}`);return c.result}async getParsedTokenAccountsByOwner(e,n,r){let i=[e.toBase58()];"mint"in n?i.push({mint:n.mint.toBase58()}):i.push({programId:n.programId.toBase58()});const s=this._buildArgs(i,r,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",s),a=dt(o,Wft);if("error"in a)throw new Dt(a.error,`failed to get token accounts owned by account ${e.toBase58()}`);return a.result}async getLargestAccounts(e){const n={...e,commitment:e&&e.commitment||this.commitment},r=n.filter||n.commitment?[n]:[],i=await this._rpcRequest("getLargestAccounts",r),s=dt(i,Yft);if("error"in s)throw new Dt(s.error,"failed to get largest accounts");return s.result}async getTokenLargestAccounts(e,n){const r=this._buildArgs([e.toBase58()],n),i=await this._rpcRequest("getTokenLargestAccounts",r),s=dt(i,Gft);if("error"in s)throw new Dt(s.error,"failed to get token largest accounts");return s.result}async getAccountInfoAndContext(e,n){const{commitment:r,config:i}=dr(n),s=this._buildArgs([e.toBase58()],r,"base64",i),o=await this._rpcRequest("getAccountInfo",s),a=dt(o,ei(gt(s1)));if("error"in a)throw new Dt(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getParsedAccountInfo(e,n){const{commitment:r,config:i}=dr(n),s=this._buildArgs([e.toBase58()],r,"jsonParsed",i),o=await this._rpcRequest("getAccountInfo",s),a=dt(o,ei(gt(iL)));if("error"in a)throw new Dt(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getAccountInfo(e,n){try{return(await this.getAccountInfoAndContext(e,n)).value}catch(r){throw new Error("failed to get info about account "+e.toBase58()+": "+r)}}async getMultipleParsedAccounts(e,n){const{commitment:r,config:i}=dr(n),s=e.map(c=>c.toBase58()),o=this._buildArgs([s],r,"jsonParsed",i),a=await this._rpcRequest("getMultipleAccounts",o),l=dt(a,ei(mt(gt(iL))));if("error"in l)throw new Dt(l.error,`failed to get info for accounts ${s}`);return l.result}async getMultipleAccountsInfoAndContext(e,n){const{commitment:r,config:i}=dr(n),s=e.map(c=>c.toBase58()),o=this._buildArgs([s],r,"base64",i),a=await this._rpcRequest("getMultipleAccounts",o),l=dt(a,ei(mt(gt(s1))));if("error"in l)throw new Dt(l.error,`failed to get info for accounts ${s}`);return l.result}async getMultipleAccountsInfo(e,n){return(await this.getMultipleAccountsInfoAndContext(e,n)).value}async getStakeActivation(e,n,r){const{commitment:i,config:s}=dr(n),o=this._buildArgs([e.toBase58()],i,void 0,{...s,epoch:r??(s==null?void 0:s.epoch)}),a=await this._rpcRequest("getStakeActivation",o),l=dt(a,hn(Zft));if("error"in l)throw new Dt(l.error,`failed to get Stake Activation ${e.toBase58()}`);return l.result}async getProgramAccounts(e,n){const{commitment:r,config:i}=dr(n),{encoding:s,...o}=i||{},a=this._buildArgs([e.toBase58()],r,s||"base64",{...o,...o.filters?{filters:$Z(o.filters)}:null}),l=await this._rpcRequest("getProgramAccounts",a),c=mt(Jft),u=o.withContext===!0?dt(l,ei(c)):dt(l,hn(c));if("error"in u)throw new Dt(u.error,`failed to get accounts owned by program ${e.toBase58()}`);return u.result}async getParsedProgramAccounts(e,n){const{commitment:r,config:i}=dr(n),s=this._buildArgs([e.toBase58()],r,"jsonParsed",i),o=await this._rpcRequest("getProgramAccounts",s),a=dt(o,hn(mt(Qft)));if("error"in a)throw new Dt(a.error,`failed to get accounts owned by program ${e.toBase58()}`);return a.result}async confirmTransaction(e,n){var s;let r;if(typeof e=="string")r=e;else{const o=e;if((s=o.abortSignal)!=null&&s.aborted)return Promise.reject(o.abortSignal.reason);r=o.signature}let i;try{i=ss.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return Gr(i.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:n||this.commitment,signature:r}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:n||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:n||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((n,r)=>{e!=null&&(e.aborted?r(e.reason):e.addEventListener("abort",()=>{r(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:n}){let r,i,s=!1;const o=new Promise((l,c)=>{try{r=this.onSignature(n,(f,m)=>{r=void 0;const g={context:m,value:f};l({__type:vf.PROCESSED,response:g})},e);const u=new Promise(f=>{r==null?f():i=this._onSubscriptionStateChange(r,m=>{m==="subscribed"&&f()})});(async()=>{if(await u,s)return;const f=await this.getSignatureStatus(n);if(s||f==null)return;const{context:m,value:g}=f;if(g!=null)if(g!=null&&g.err)c(g.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(g.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(g.confirmationStatus==="processed"||g.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}s=!0,l({__type:vf.PROCESSED,response:{context:m,value:g}})}})()}catch(u){c(u)}});return{abortConfirmation:()=>{i&&(i(),i=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:n,lastValidBlockHeight:r,signature:i}}){let s=!1;const o=new Promise(f=>{const m=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let g=await m();if(!s){for(;g<=r;)if(await gg(1e3),s||(g=await m(),s))return;f({__type:vf.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:a,confirmationPromise:l}=this.getTransactionConfirmationPromise({commitment:e,signature:i}),c=this.getCancellationPromise(n);let u;try{const f=await Promise.race([c,l,o]);if(f.__type===vf.PROCESSED)u=f.response;else throw new Ame(i)}finally{s=!0,a()}return u}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:n,minContextSlot:r,nonceAccountPubkey:i,nonceValue:s,signature:o}}){let a=!1;const l=new Promise(g=>{let v=s,x=null;const b=async()=>{try{const{context:E,value:C}=await this.getNonceAndContext(i,{commitment:e,minContextSlot:r});return x=E.slot,C==null?void 0:C.nonce}catch{return v}};(async()=>{if(v=await b(),!a)for(;;){if(s!==v){g({__type:vf.NONCE_INVALID,slotInWhichNonceDidAdvance:x});return}if(await gg(2e3),a||(v=await b(),a))return}})()}),{abortConfirmation:c,confirmationPromise:u}=this.getTransactionConfirmationPromise({commitment:e,signature:o}),f=this.getCancellationPromise(n);let m;try{const g=await Promise.race([f,u,l]);if(g.__type===vf.PROCESSED)m=g.response;else{let v;for(;;){const x=await this.getSignatureStatus(o);if(x==null)break;if(x.context.slot<(g.slotInWhichNonceDidAdvance??r)){await gg(400);continue}v=x;break}if(v!=null&&v.value){const x=e||"finalized",{confirmationStatus:b}=v.value;switch(x){case"processed":case"recent":if(b!=="processed"&&b!=="confirmed"&&b!=="finalized")throw new Hb(o);break;case"confirmed":case"single":case"singleGossip":if(b!=="confirmed"&&b!=="finalized")throw new Hb(o);break;case"finalized":case"max":case"root":if(b!=="finalized")throw new Hb(o);break;default:}m={context:v.context,value:{err:v.value.err}}}else throw new Hb(o)}}finally{a=!0,c()}return m}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:n}){let r;const i=new Promise(l=>{let c=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{c=this._confirmTransactionInitialTimeout||3e4;break}}r=setTimeout(()=>l({__type:vf.TIMED_OUT,timeoutMs:c}),c)}),{abortConfirmation:s,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:e,signature:n});let a;try{const l=await Promise.race([o,i]);if(l.__type===vf.PROCESSED)a=l.response;else throw new Tme(n,l.timeoutMs/1e3)}finally{clearTimeout(r),s()}return a}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),n=dt(e,hn(mt(dht)));if("error"in n)throw new Dt(n.error,"failed to get cluster nodes");return n.result}async getVoteAccounts(e){const n=this._buildArgs([],e),r=await this._rpcRequest("getVoteAccounts",n),i=dt(r,fht);if("error"in i)throw new Dt(i.error,"failed to get vote accounts");return i.result}async getSlot(e){const{commitment:n,config:r}=dr(e),i=this._buildArgs([],n,void 0,r),s=await this._rpcRequest("getSlot",i),o=dt(s,hn(Oe()));if("error"in o)throw new Dt(o.error,"failed to get slot");return o.result}async getSlotLeader(e){const{commitment:n,config:r}=dr(e),i=this._buildArgs([],n,void 0,r),s=await this._rpcRequest("getSlotLeader",i),o=dt(s,hn(ut()));if("error"in o)throw new Dt(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(e,n){const r=[e,n],i=await this._rpcRequest("getSlotLeaders",r),s=dt(i,hn(mt(jr)));if("error"in s)throw new Dt(s.error,"failed to get slot leaders");return s.result}async getSignatureStatus(e,n){const{context:r,value:i}=await this.getSignatureStatuses([e],n);Gr(i.length===1);const s=i[0];return{context:r,value:s}}async getSignatureStatuses(e,n){const r=[e];n&&r.push(n);const i=await this._rpcRequest("getSignatureStatuses",r),s=dt(i,mht);if("error"in s)throw new Dt(s.error,"failed to get signature status");return s.result}async getTransactionCount(e){const{commitment:n,config:r}=dr(e),i=this._buildArgs([],n,void 0,r),s=await this._rpcRequest("getTransactionCount",i),o=dt(s,hn(Oe()));if("error"in o)throw new Dt(o.error,"failed to get transaction count");return o.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const n=this._buildArgs([],e),r=await this._rpcRequest("getInflationGovernor",n),i=dt(r,Bft);if("error"in i)throw new Dt(i.error,"failed to get inflation");return i.result}async getInflationReward(e,n,r){const{commitment:i,config:s}=dr(r),o=this._buildArgs([e.map(c=>c.toBase58())],i,void 0,{...s,epoch:n??(s==null?void 0:s.epoch)}),a=await this._rpcRequest("getInflationReward",o),l=dt(a,Sft);if("error"in l)throw new Dt(l.error,"failed to get inflation reward");return l.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),n=dt(e,Uft);if("error"in n)throw new Dt(n.error,"failed to get inflation rate");return n.result}async getEpochInfo(e){const{commitment:n,config:r}=dr(e),i=this._buildArgs([],n,void 0,r),s=await this._rpcRequest("getEpochInfo",i),o=dt(s,$ft);if("error"in o)throw new Dt(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),n=dt(e,zft);if("error"in n)throw new Dt(n.error,"failed to get epoch schedule");const r=n.result;return new fft(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),n=dt(e,Hft);if("error"in n)throw new Dt(n.error,"failed to get leader schedule");return n.result}async getMinimumBalanceForRentExemption(e,n){const r=this._buildArgs([e],n),i=await this._rpcRequest("getMinimumBalanceForRentExemption",r),s=dt(i,ght);return"error"in s?(console.warn("Unable to fetch minimum balance for rent exemption"),0):s.result}async getRecentBlockhashAndContext(e){const{context:n,value:{blockhash:r}}=await this.getLatestBlockhashAndContext(e);return{context:n,value:{blockhash:r,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(e){const n=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),r=dt(n,_ht);if("error"in r)throw new Dt(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(e,n){const r=this._buildArgs([e],n),i=await this._rpcRequest("getFeeCalculatorForBlockhash",r),s=dt(i,Iht);if("error"in s)throw new Dt(s.error,"failed to get fee calculator");const{context:o,value:a}=s.result;return{context:o,value:a!==null?a.feeCalculator:null}}async getFeeForMessage(e,n){const r=Oi(e.serialize()).toString("base64"),i=this._buildArgs([r],n),s=await this._rpcRequest("getFeeForMessage",i),o=dt(s,ei(gt(Oe())));if("error"in o)throw new Dt(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(e){var o;const n=(o=e==null?void 0:e.lockedWritableAccounts)==null?void 0:o.map(a=>a.toBase58()),r=n!=null&&n.length?[n]:[],i=await this._rpcRequest("getRecentPrioritizationFees",r),s=dt(i,Fft);if("error"in s)throw new Dt(s.error,"failed to get recent prioritization fees");return s.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(n){throw new Error("failed to get recent blockhash: "+n)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(n){throw new Error("failed to get recent blockhash: "+n)}}async getLatestBlockhashAndContext(e){const{commitment:n,config:r}=dr(e),i=this._buildArgs([],n,void 0,r),s=await this._rpcRequest("getLatestBlockhash",i),o=dt(s,kht);if("error"in o)throw new Dt(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(e,n){const{commitment:r,config:i}=dr(n),s=this._buildArgs([e],r,void 0,i),o=await this._rpcRequest("isBlockhashValid",s),a=dt(o,Cht);if("error"in a)throw new Dt(a.error,"failed to determine if the blockhash `"+e+"`is valid");return a.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),n=dt(e,hn(Pft));if("error"in n)throw new Dt(n.error,"failed to get version");return n.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),n=dt(e,hn(ut()));if("error"in n)throw new Dt(n.error,"failed to get genesis hash");return n.result}async getBlock(e,n){const{commitment:r,config:i}=dr(n),s=this._buildArgsAtLeastConfirmed([e],r,void 0,i),o=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const a=dt(o,wht);if("error"in a)throw a.error;return a.result}case"none":{const a=dt(o,bht);if("error"in a)throw a.error;return a.result}default:{const a=dt(o,vht);if("error"in a)throw a.error;const{result:l}=a;return l?{...l,transactions:l.transactions.map(({transaction:c,meta:u,version:f})=>({meta:u,transaction:{...c,message:P3(f,c.message)},version:f}))}:null}}}catch(a){throw new Dt(a,"failed to get confirmed block")}}async getParsedBlock(e,n){const{commitment:r,config:i}=dr(n),s=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",i),o=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const a=dt(o,Sht);if("error"in a)throw a.error;return a.result}case"none":{const a=dt(o,Aht);if("error"in a)throw a.error;return a.result}default:{const a=dt(o,Eht);if("error"in a)throw a.error;return a.result}}}catch(a){throw new Dt(a,"failed to get block")}}async getBlockProduction(e){let n,r;if(typeof e=="string")r=e;else if(e){const{commitment:a,...l}=e;r=a,n=l}const i=this._buildArgs([],r,"base64",n),s=await this._rpcRequest("getBlockProduction",i),o=dt(s,Mft);if("error"in o)throw new Dt(o.error,"failed to get block production information");return o.result}async getTransaction(e,n){const{commitment:r,config:i}=dr(n),s=this._buildArgsAtLeastConfirmed([e],r,void 0,i),o=await this._rpcRequest("getTransaction",s),a=dt(o,R3);if("error"in a)throw new Dt(a.error,"failed to get transaction");const l=a.result;return l&&{...l,transaction:{...l.transaction,message:P3(l.version,l.transaction.message)}}}async getParsedTransaction(e,n){const{commitment:r,config:i}=dr(n),s=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",i),o=await this._rpcRequest("getTransaction",s),a=dt(o,VA);if("error"in a)throw new Dt(a.error,"failed to get transaction");return a.result}async getParsedTransactions(e,n){const{commitment:r,config:i}=dr(n),s=e.map(l=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([l],r,"jsonParsed",i)}));return(await this._rpcBatchRequest(s)).map(l=>{const c=dt(l,VA);if("error"in c)throw new Dt(c.error,"failed to get transactions");return c.result})}async getTransactions(e,n){const{commitment:r,config:i}=dr(n),s=e.map(l=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([l],r,void 0,i)}));return(await this._rpcBatchRequest(s)).map(l=>{const c=dt(l,R3);if("error"in c)throw new Dt(c.error,"failed to get transactions");const u=c.result;return u&&{...u,transaction:{...u.transaction,message:P3(u.version,u.transaction.message)}}})}async getConfirmedBlock(e,n){const r=this._buildArgsAtLeastConfirmed([e],n),i=await this._rpcRequest("getBlock",r),s=dt(i,Tht);if("error"in s)throw new Dt(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+e+" not found");const a={...o,transactions:o.transactions.map(({transaction:l,meta:c})=>{const u=new wd(l.message);return{meta:c,transaction:{...l,message:u}}})};return{...a,transactions:a.transactions.map(({transaction:l,meta:c})=>({meta:c,transaction:La.populate(l.message,l.signatures)}))}}async getBlocks(e,n,r){const i=this._buildArgsAtLeastConfirmed(n!==void 0?[e,n]:[e],r),s=await this._rpcRequest("getBlocks",i),o=dt(s,hn(mt(Oe())));if("error"in o)throw new Dt(o.error,"failed to get blocks");return o.result}async getBlockSignatures(e,n){const r=this._buildArgsAtLeastConfirmed([e],n,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",r),s=dt(i,VZ);if("error"in s)throw new Dt(s.error,"failed to get block");const o=s.result;if(!o)throw new Error("Block "+e+" not found");return o}async getConfirmedBlockSignatures(e,n){const r=this._buildArgsAtLeastConfirmed([e],n,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",r),s=dt(i,VZ);if("error"in s)throw new Dt(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+e+" not found");return o}async getConfirmedTransaction(e,n){const r=this._buildArgsAtLeastConfirmed([e],n),i=await this._rpcRequest("getTransaction",r),s=dt(i,R3);if("error"in s)throw new Dt(s.error,"failed to get transaction");const o=s.result;if(!o)return o;const a=new wd(o.transaction.message),l=o.transaction.signatures;return{...o,transaction:La.populate(a,l)}}async getParsedConfirmedTransaction(e,n){const r=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed"),i=await this._rpcRequest("getTransaction",r),s=dt(i,VA);if("error"in s)throw new Dt(s.error,"failed to get confirmed transaction");return s.result}async getParsedConfirmedTransactions(e,n){const r=e.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],n,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(o=>{const a=dt(o,VA);if("error"in a)throw new Dt(a.error,"failed to get confirmed transactions");return a.result})}async getConfirmedSignaturesForAddress(e,n,r){let i={},s=await this.getFirstAvailableBlock();for(;!("until"in i)&&(n--,!(n<=0||n<s));)try{const l=await this.getConfirmedBlockSignatures(n,"finalized");l.signatures.length>0&&(i.until=l.signatures[l.signatures.length-1].toString())}catch(l){if(l instanceof Error&&l.message.includes("skipped"))continue;throw l}let o=await this.getSlot("finalized");for(;!("before"in i)&&(r++,!(r>o));)try{const l=await this.getConfirmedBlockSignatures(r);l.signatures.length>0&&(i.before=l.signatures[l.signatures.length-1].toString())}catch(l){if(l instanceof Error&&l.message.includes("skipped"))continue;throw l}return(await this.getConfirmedSignaturesForAddress2(e,i)).map(l=>l.signature)}async getConfirmedSignaturesForAddress2(e,n,r){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,n),s=await this._rpcRequest("getConfirmedSignaturesForAddress2",i),o=dt(s,eht);if("error"in o)throw new Dt(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(e,n,r){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,n),s=await this._rpcRequest("getSignaturesForAddress",i),o=dt(s,tht);if("error"in o)throw new Dt(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(e,n){const{context:r,value:i}=await this.getAccountInfoAndContext(e,n);let s=null;return i!==null&&(s=new FZ({key:e,state:FZ.deserialize(i.data)})),{context:r,value:s}}async getNonceAndContext(e,n){const{context:r,value:i}=await this.getAccountInfoAndContext(e,n);let s=null;return i!==null&&(s=XB.fromAccountData(i.data)),{context:r,value:s}}async getNonce(e,n){return await this.getNonceAndContext(e,n).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+r)})}async requestAirdrop(e,n){const r=await this._rpcRequest("requestAirdrop",[e.toBase58(),n]),i=dt(r,Pht);if("error"in i)throw new Dt(i.error,`airdrop to ${e.toBase58()} failed`);return i.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await gg(100);const r=Date.now()-this._blockhashInfo.lastFetch>=vft;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),n=this._blockhashInfo.latestBlockhash,r=n?n.blockhash:null;for(let i=0;i<50;i++){const s=await this.getLatestBlockhash("finalized");if(r!==s.blockhash)return this._blockhashInfo={latestBlockhash:s,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},s;await gg(oft/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:n,config:r}=dr(e),i=this._buildArgs([],n,"base64",r),s=await this._rpcRequest("getStakeMinimumDelegation",i),o=dt(s,ei(Oe()));if("error"in o)throw new Dt(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(e,n,r){if("message"in e){const x=e.serialize(),b=an.from(x).toString("base64");if(Array.isArray(n)||r!==void 0)throw new Error("Invalid arguments");const E=n||{};E.encoding="base64","commitment"in E||(E.commitment=this.commitment),n&&typeof n=="object"&&"innerInstructions"in n&&(E.innerInstructions=n.innerInstructions);const C=[b,E],k=await this._rpcRequest("simulateTransaction",C),O=dt(k,zZ);if("error"in O)throw new Error("failed to simulate transaction: "+O.error.message);return O.result}let i;if(e instanceof La){let v=e;i=new La,i.feePayer=v.feePayer,i.instructions=e.instructions,i.nonceInfo=v.nonceInfo,i.signatures=v.signatures}else i=La.populate(e),i._message=i._json=void 0;if(n!==void 0&&!Array.isArray(n))throw new Error("Invalid arguments");const s=n;if(i.nonceInfo&&s)i.sign(...s);else{let v=this._disableBlockhashCaching;for(;;){const x=await this._blockhashWithExpiryBlockHeight(v);if(i.lastValidBlockHeight=x.lastValidBlockHeight,i.recentBlockhash=x.blockhash,!s)break;if(i.sign(...s),!i.signature)throw new Error("!signature");const b=i.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(b)&&!this._blockhashInfo.transactionSignatures.includes(b)){this._blockhashInfo.simulatedSignatures.push(b);break}else v=!0}}const o=i._compile(),a=o.serialize(),c=i._serialize(a).toString("base64"),u={encoding:"base64",commitment:this.commitment};if(r){const v=(Array.isArray(r)?r:o.nonProgramIds()).map(x=>x.toBase58());u.accounts={encoding:"base64",addresses:v}}s&&(u.sigVerify=!0),n&&typeof n=="object"&&"innerInstructions"in n&&(u.innerInstructions=n.innerInstructions);const f=[c,u],m=await this._rpcRequest("simulateTransaction",f),g=dt(m,zZ);if("error"in g){let v;if("data"in g.error&&(v=g.error.data.logs,v&&Array.isArray(v))){const x=`
    `,b=x+v.join(x);console.error(g.error.message,b)}throw new DZ({action:"simulate",signature:"",transactionMessage:g.error.message,logs:v})}return g.result}async sendTransaction(e,n,r){if("version"in e){if(n&&Array.isArray(n))throw new Error("Invalid arguments");const o=e.serialize();return await this.sendRawTransaction(o,n)}if(n===void 0||!Array.isArray(n))throw new Error("Invalid arguments");const i=n;if(e.nonceInfo)e.sign(...i);else{let o=this._disableBlockhashCaching;for(;;){const a=await this._blockhashWithExpiryBlockHeight(o);if(e.lastValidBlockHeight=a.lastValidBlockHeight,e.recentBlockhash=a.blockhash,e.sign(...i),!e.signature)throw new Error("!signature");const l=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(l))o=!0;else{this._blockhashInfo.transactionSignatures.push(l);break}}}const s=e.serialize();return await this.sendRawTransaction(s,r)}async sendRawTransaction(e,n){const r=Oi(e).toString("base64");return await this.sendEncodedTransaction(r,n)}async sendEncodedTransaction(e,n){const r={encoding:"base64"},i=n&&n.skipPreflight,s=i===!0?"processed":n&&n.preflightCommitment||this.commitment;n&&n.maxRetries!=null&&(r.maxRetries=n.maxRetries),n&&n.minContextSlot!=null&&(r.minContextSlot=n.minContextSlot),i&&(r.skipPreflight=i),s&&(r.preflightCommitment=s);const o=[e,r],a=await this._rpcRequest("sendTransaction",o),l=dt(a,Rht);if("error"in l){let c;throw"data"in l.error&&(c=l.error.data.logs),new DZ({action:i?"send":"simulate",signature:"",transactionMessage:l.error.message,logs:c})}return l.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([n,r])=>{this._setSubscription(n,{...r,state:"pending"})})}_setSubscription(e,n){var i;const r=(i=this._subscriptionsByHash[e])==null?void 0:i.state;if(this._subscriptionsByHash[e]=n,r!==n.state){const s=this._subscriptionStateChangeCallbacksByHash[e];s&&s.forEach(o=>{try{o(n.state)}catch{}})}}_onSubscriptionStateChange(e,n){var s;const r=this._subscriptionHashByClientSubscriptionId[e];if(r==null)return()=>{};const i=(s=this._subscriptionStateChangeCallbacksByHash)[r]||(s[r]=new Set);return i.add(n),()=>{i.delete(n),i.size===0&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const e=this._rpcWebSocketGeneration,n=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{const i=this._subscriptionsByHash[r];if(i!==void 0)switch(i.state){case"pending":case"unsubscribed":if(i.callbacks.size===0){delete this._subscriptionsByHash[r],i.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[i.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:s,method:o}=i;try{this._setSubscription(r,{...i,state:"subscribing"});const a=await this._rpcWebSocket.call(o,s);this._setSubscription(r,{...i,serverSubscriptionId:a,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[a]=i.callbacks,await this._updateSubscriptions()}catch(a){if(console.error(`Received ${a instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:s,error:a}),!n())return;this._setSubscription(r,{...i,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":i.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:s,unsubscribeMethod:o}=i;if(this._subscriptionsAutoDisposedByRpc.has(s))this._subscriptionsAutoDisposedByRpc.delete(s);else{this._setSubscription(r,{...i,state:"unsubscribing"}),this._setSubscription(r,{...i,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[s])}catch(a){if(a instanceof Error&&console.error(`${o} error:`,a.message),!n())return;this._setSubscription(r,{...i,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(r,{...i,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,n){const r=this._subscriptionCallbacksByServerSubscriptionId[e];r!==void 0&&r.forEach(i=>{try{i(...n)}catch(s){console.error(s)}})}_wsOnAccountNotification(e){const{result:n,subscription:r}=dt(e,nht);this._handleServerNotification(r,[n.value,n.context])}_makeSubscription(e,n){const r=this._nextClientSubscriptionId++,i=BZ([e.method,n]),s=this._subscriptionsByHash[i];return s===void 0?this._subscriptionsByHash[i]={...e,args:n,callbacks:new Set([e.callback]),state:"pending"}:s.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[r]=i,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const o=this._subscriptionsByHash[i];Gr(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),o.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(e,n,r){const{commitment:i,config:s}=dr(r),o=this._buildArgs([e.toBase58()],i||this._commitment||"finalized","base64",s);return this._makeSubscription({callback:n,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:n,subscription:r}=dt(e,iht);this._handleServerNotification(r,[{accountId:n.value.pubkey,accountInfo:n.value.account},n.context])}onProgramAccountChange(e,n,r,i){const{commitment:s,config:o}=dr(r),a=this._buildArgs([e.toBase58()],s||this._commitment||"finalized","base64",o||(i?{filters:$Z(i)}:void 0));return this._makeSubscription({callback:n,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},a)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,n,r){const i=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],r||this._commitment||"finalized");return this._makeSubscription({callback:n,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},i)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:n,subscription:r}=dt(e,Mht);this._handleServerNotification(r,[n.value,n.context])}_wsOnSlotNotification(e){const{result:n,subscription:r}=dt(e,oht);this._handleServerNotification(r,[n])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:n,subscription:r}=dt(e,lht);this._handleServerNotification(r,[n])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,n){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${n}' events could not be found.`)}_buildArgs(e,n,r,i){const s=n||this._commitment;if(s||r||i){let o={};r&&(o.encoding=r),s&&(o.commitment=s),i&&(o=Object.assign(o,i)),e.push(o)}return e}_buildArgsAtLeastConfirmed(e,n,r,i){const s=n||this._commitment;if(s&&!["confirmed","finalized"].includes(s))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,n,r,i)}_wsOnSignatureNotification(e){const{result:n,subscription:r}=dt(e,cht);n.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,n.value==="receivedSignature"?[{type:"received"},n.context]:[{type:"status",result:n.value},n.context])}onSignature(e,n,r){const i=this._buildArgs([e],r||this._commitment||"finalized"),s=this._makeSubscription({callback:(o,a)=>{if(o.type==="status"){n(o.result,a);try{this.removeSignatureListener(s)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return s}onSignatureWithOptions(e,n,r){const{commitment:i,...s}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},o=this._buildArgs([e],i,void 0,s),a=this._makeSubscription({callback:(l,c)=>{n(l,c);try{this.removeSignatureListener(a)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return a}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:n,subscription:r}=dt(e,uht);this._handleServerNotification(r,[n])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}class Xo{constructor(e){this._keypair=void 0,this._keypair=e??PZ()}static generate(){return new Xo(PZ())}static fromSecretKey(e,n){if(e.byteLength!==64)throw new Error("bad secret key size");const r=e.slice(32,64);if(!n||!n.skipValidation){const i=e.slice(0,32),s=tL(i);for(let o=0;o<32;o++)if(r[o]!==s[o])throw new Error("provided secretKey is invalid")}return new Xo({publicKey:r,secretKey:e})}static fromSeed(e){const n=tL(e),r=new Uint8Array(64);return r.set(e),r.set(n,32),new Xo({publicKey:n,secretKey:r})}get publicKey(){return new bt(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}Object.freeze({CreateLookupTable:{index:0,layout:ve.struct([ve.u32("instruction"),kx("recentSlot"),ve.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:ve.struct([ve.u32("instruction")])},ExtendLookupTable:{index:2,layout:ve.struct([ve.u32("instruction"),kx(),ve.seq(En(),ve.offset(ve.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:ve.struct([ve.u32("instruction")])},CloseLookupTable:{index:4,layout:ve.struct([ve.u32("instruction")])}});new bt("AddressLookupTab1e1111111111111111111111111");const qA=Object.freeze({RequestUnits:{index:0,layout:ve.struct([ve.u8("instruction"),ve.u32("units"),ve.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:ve.struct([ve.u8("instruction"),ve.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:ve.struct([ve.u8("instruction"),ve.u32("units")])},SetComputeUnitPrice:{index:3,layout:ve.struct([ve.u8("instruction"),kx("microLamports")])}});class jht{constructor(){}static requestUnits(e){const n=qA.RequestUnits,r=ws(n,e);return new Di({keys:[],programId:this.programId,data:r})}static requestHeapFrame(e){const n=qA.RequestHeapFrame,r=ws(n,e);return new Di({keys:[],programId:this.programId,data:r})}static setComputeUnitLimit(e){const n=qA.SetComputeUnitLimit,r=ws(n,e);return new Di({keys:[],programId:this.programId,data:r})}static setComputeUnitPrice(e){const n=qA.SetComputeUnitPrice,r=ws(n,{microLamports:BigInt(e.microLamports)});return new Di({keys:[],programId:this.programId,data:r})}}jht.programId=new bt("ComputeBudget111111111111111111111111111111");ve.struct([ve.u8("numSignatures"),ve.u8("padding"),ve.u16("signatureOffset"),ve.u16("signatureInstructionIndex"),ve.u16("publicKeyOffset"),ve.u16("publicKeyInstructionIndex"),ve.u16("messageDataOffset"),ve.u16("messageDataSize"),ve.u16("messageInstructionIndex")]);new bt("Ed25519SigVerify111111111111111111111111111");Gdt.utils.isValidPrivateKey;ve.struct([ve.u8("numSignatures"),ve.u16("signatureOffset"),ve.u8("signatureInstructionIndex"),ve.u16("ethAddressOffset"),ve.u8("ethAddressInstructionIndex"),ve.u16("messageDataOffset"),ve.u16("messageDataSize"),ve.u8("messageInstructionIndex"),ve.blob(20,"ethAddress"),ve.blob(64,"signature"),ve.u8("recoveryId")]);new bt("KeccakSecp256k11111111111111111111111111111");var Fme;new bt("StakeConfig11111111111111111111111111111111");class $me{constructor(e,n,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=n,this.custodian=r}}Fme=$me;$me.default=new Fme(0,0,bt.default);Object.freeze({Initialize:{index:0,layout:ve.struct([ve.u32("instruction"),Qdt(),Zdt()])},Authorize:{index:1,layout:ve.struct([ve.u32("instruction"),En("newAuthorized"),ve.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:ve.struct([ve.u32("instruction")])},Split:{index:3,layout:ve.struct([ve.u32("instruction"),ve.ns64("lamports")])},Withdraw:{index:4,layout:ve.struct([ve.u32("instruction"),ve.ns64("lamports")])},Deactivate:{index:5,layout:ve.struct([ve.u32("instruction")])},Merge:{index:7,layout:ve.struct([ve.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:ve.struct([ve.u32("instruction"),En("newAuthorized"),ve.u32("stakeAuthorizationType"),Og("authoritySeed"),En("authorityOwner")])}});new bt("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:ve.struct([ve.u32("instruction"),eft()])},Authorize:{index:1,layout:ve.struct([ve.u32("instruction"),En("newAuthorized"),ve.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:ve.struct([ve.u32("instruction"),ve.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:ve.struct([ve.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:ve.struct([ve.u32("instruction"),tft()])}});new bt("Vote111111111111111111111111111111111111111");new bt("Va1idator1nfo111111111111111111111111111111");nt({name:ut(),website:Vt(ut()),details:Vt(ut()),iconUrl:Vt(ut()),keybaseUsername:Vt(ut())});new bt("Vote111111111111111111111111111111111111111");ve.struct([En("nodePubkey"),En("authorizedWithdrawer"),ve.u8("commission"),ve.nu64(),ve.seq(ve.struct([ve.nu64("slot"),ve.u32("confirmationCount")]),ve.offset(ve.u32(),-8),"votes"),ve.u8("rootSlotValid"),ve.nu64("rootSlot"),ve.nu64(),ve.seq(ve.struct([ve.nu64("epoch"),En("authorizedVoter")]),ve.offset(ve.u32(),-8),"authorizedVoters"),ve.struct([ve.seq(ve.struct([En("authorizedPubkey"),ve.nu64("epochOfLastAuthorizedSwitch"),ve.nu64("targetEpoch")]),32,"buf"),ve.nu64("idx"),ve.u8("isEmpty")],"priorVoters"),ve.nu64(),ve.seq(ve.struct([ve.nu64("epoch"),ve.nu64("credits"),ve.nu64("prevCredits")]),ve.offset(ve.u32(),-8),"epochCredits"),ve.struct([ve.nu64("slot"),ve.nu64("timestamp")],"lastTimestamp")]);const GA=1e9;var O3,qZ;function Bht(){if(qZ)return O3;qZ=1;function t(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(n[o]!==255)throw new TypeError(s+" is ambiguous");n[o]=i}var a=e.length,l=e.charAt(0),c=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function f(v){if(v instanceof Uint8Array||(ArrayBuffer.isView(v)?v=new Uint8Array(v.buffer,v.byteOffset,v.byteLength):Array.isArray(v)&&(v=Uint8Array.from(v))),!(v instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(v.length===0)return"";for(var x=0,b=0,E=0,C=v.length;E!==C&&v[E]===0;)E++,x++;for(var k=(C-E)*u+1>>>0,O=new Uint8Array(k);E!==C;){for(var U=v[E],R=0,$=k-1;(U!==0||R<b)&&$!==-1;$--,R++)U+=256*O[$]>>>0,O[$]=U%a>>>0,U=U/a>>>0;if(U!==0)throw new Error("Non-zero carry");b=R,E++}for(var V=k-b;V!==k&&O[V]===0;)V++;for(var j=l.repeat(x);V<k;++V)j+=e.charAt(O[V]);return j}function m(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return new Uint8Array;for(var x=0,b=0,E=0;v[x]===l;)b++,x++;for(var C=(v.length-x)*c+1>>>0,k=new Uint8Array(C);v[x];){var O=v.charCodeAt(x);if(O>255)return;var U=n[O];if(U===255)return;for(var R=0,$=C-1;(U!==0||R<E)&&$!==-1;$--,R++)U+=a*k[$]>>>0,k[$]=U%256>>>0,U=U/256>>>0;if(U!==0)throw new Error("Non-zero carry");E=R,x++}for(var V=C-E;V!==C&&k[V]===0;)V++;for(var j=new Uint8Array(b+(C-V)),F=b;V!==C;)j[F++]=k[V++];return j}function g(v){var x=m(v);if(x)return x;throw new Error("Non-base"+a+" character")}return{encode:f,decodeUnsafe:m,decode:g}}return O3=t,O3}var M3,GZ;function Uht(){return GZ||(GZ=1,M3=Bht()("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")),M3}var KA=Uht();const bE=new bt("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");new bt("TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb");const XN=new bt("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");new bt("So11111111111111111111111111111111111111112");new bt("9pan9bMn5HatX4EJdBwg9VgCa7Uz5HL8N1m5D3NdXejP");const t7=t=>{const e=t.decode.bind(t),n=t.encode.bind(t);return{decode:e,encode:n}};var Jh={},KZ;function Fht(){if(KZ)return Jh;KZ=1,Object.defineProperty(Jh,"__esModule",{value:!0});function t(i){{const s=on.from(i);s.reverse();const o=s.toString("hex");return o.length===0?BigInt(0):BigInt(`0x${o}`)}}Jh.toBigIntLE=t;function e(i){{const s=i.toString("hex");return s.length===0?BigInt(0):BigInt(`0x${s}`)}}Jh.toBigIntBE=e;function n(i,s){{const o=i.toString(16),a=on.from(o.padStart(s*2,"0").slice(0,s*2),"hex");return a.reverse(),a}}Jh.toBufferLE=n;function r(i,s){{const o=i.toString(16);return on.from(o.padStart(s*2,"0").slice(0,s*2),"hex")}}return Jh.toBufferBE=r,Jh}var WZ=Fht();const $ht=t=>e=>{const n=ve.blob(t,e),{encode:r,decode:i}=t7(n),s=n;return s.decode=(o,a)=>{const l=i(o,a);return WZ.toBigIntLE(on.from(l))},s.encode=(o,a,l)=>{const c=WZ.toBufferLE(o,t);return r(c,a,l)},s},zme=$ht(8),zht=t=>{const e=ve.u8(t),{encode:n,decode:r}=t7(e),i=e;return i.decode=(s,o)=>!!r(s,o),i.encode=(s,o,a)=>{const l=Number(s);return n(l,o,a)},i},YZ=t=>{const e=ve.blob(32,t),{encode:n,decode:r}=t7(e),i=e;return i.decode=(s,o)=>{const a=r(s,o);return new bt(a)},i.encode=(s,o,a)=>{const l=s.toBuffer();return n(l,o,a)},i};class Hme extends Error{constructor(e){super(e)}}class Vme extends Hme{constructor(){super(...arguments),this.name="TokenOwnerOffCurveError"}}var jC;(function(t){t[t.InitializeMint=0]="InitializeMint",t[t.InitializeAccount=1]="InitializeAccount",t[t.InitializeMultisig=2]="InitializeMultisig",t[t.Transfer=3]="Transfer",t[t.Approve=4]="Approve",t[t.Revoke=5]="Revoke",t[t.SetAuthority=6]="SetAuthority",t[t.MintTo=7]="MintTo",t[t.Burn=8]="Burn",t[t.CloseAccount=9]="CloseAccount",t[t.FreezeAccount=10]="FreezeAccount",t[t.ThawAccount=11]="ThawAccount",t[t.TransferChecked=12]="TransferChecked",t[t.ApproveChecked=13]="ApproveChecked",t[t.MintToChecked=14]="MintToChecked",t[t.BurnChecked=15]="BurnChecked",t[t.InitializeAccount2=16]="InitializeAccount2",t[t.SyncNative=17]="SyncNative",t[t.InitializeAccount3=18]="InitializeAccount3",t[t.InitializeMultisig2=19]="InitializeMultisig2",t[t.InitializeMint2=20]="InitializeMint2",t[t.GetAccountDataSize=21]="GetAccountDataSize",t[t.InitializeImmutableOwner=22]="InitializeImmutableOwner",t[t.AmountToUiAmount=23]="AmountToUiAmount",t[t.UiAmountToAmount=24]="UiAmountToAmount",t[t.InitializeMintCloseAuthority=25]="InitializeMintCloseAuthority",t[t.TransferFeeExtension=26]="TransferFeeExtension",t[t.ConfidentialTransferExtension=27]="ConfidentialTransferExtension",t[t.DefaultAccountStateExtension=28]="DefaultAccountStateExtension",t[t.Reallocate=29]="Reallocate",t[t.MemoTransferExtension=30]="MemoTransferExtension",t[t.CreateNativeMint=31]="CreateNativeMint",t[t.InitializeNonTransferableMint=32]="InitializeNonTransferableMint",t[t.InterestBearingMintExtension=33]="InterestBearingMintExtension",t[t.CpiGuardExtension=34]="CpiGuardExtension",t[t.InitializePermanentDelegate=35]="InitializePermanentDelegate",t[t.TransferHookExtension=36]="TransferHookExtension",t[t.MetadataPointerExtension=39]="MetadataPointerExtension",t[t.GroupPointerExtension=40]="GroupPointerExtension",t[t.GroupMemberPointerExtension=41]="GroupMemberPointerExtension"})(jC||(jC={}));function Hht(t,e,n){if(n.length){t.push({pubkey:e,isSigner:!1,isWritable:!1});for(const r of n)t.push({pubkey:r instanceof bt?r:r.publicKey,isSigner:!0,isWritable:!1})}else t.push({pubkey:e,isSigner:!0,isWritable:!1});return t}const qme=ve.struct([ve.u32("mintAuthorityOption"),YZ("mintAuthority"),zme("supply"),ve.u8("decimals"),zht("isInitialized"),ve.u32("freezeAuthorityOption"),YZ("freezeAuthority")]);qme.span;async function sL(t,e,n=!1,r=bE,i=XN){if(!n&&!bt.isOnCurve(e.toBuffer()))throw new Vme;const[s]=await bt.findProgramAddress([e.toBuffer(),r.toBuffer(),t.toBuffer()],i);return s}function Gme(t,e,n,r,i=bE,s=XN){return Vht(t,e,n,r,on.alloc(0),i,s)}function Vht(t,e,n,r,i,s=bE,o=XN){const a=[{pubkey:t,isSigner:!0,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:Cx.programId,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!1}];return new Di({keys:a,programId:o,data:i})}const oL=ve.struct([ve.u8("instruction"),zme("amount")]);function Kme(t,e,n,r,i=[],s=bE){const o=Hht([{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0}],n,i),a=on.alloc(oL.span);return oL.encode({instruction:jC.Transfer,amount:BigInt(r)},a),new Di({keys:o,programId:s,data:a})}const JZ=Object.freeze(Object.defineProperty({__proto__:null,ASSOCIATED_TOKEN_PROGRAM_ID:XN,MintLayout:qme,TOKEN_PROGRAM_ID:bE,TokenError:Hme,get TokenInstruction(){return jC},TokenOwnerOffCurveError:Vme,createAssociatedTokenAccountInstruction:Gme,createTransferInstruction:Kme,getAssociatedTokenAddress:sL,transferInstructionData:oL},Symbol.toStringTag,{value:"Module"}));class qht{constructor(){this.connection=new Lht(MGe,"confirmed")}createVaultKeypair(){return Xo.generate()}getKeypairFromSecretKey(e){const n=Uint8Array.from(JSON.parse(e));return Xo.fromSecretKey(n)}async getBalance(e){try{return await this.connection.getBalance(new bt(e))/GA}catch(n){return console.error("Error fetching balance:",n),0}}async wait(e){return new Promise(n=>setTimeout(n,e))}async getAccountInfoWithRetry(e,n=5){for(let r=0;r<n;r++)try{return await this.connection.getAccountInfo(e)}catch(i){if(console.warn(`Attempt ${r+1} failed to fetch account info: ${i.message}`),r===n-1)throw i;await this.wait(500*Math.pow(2,r))}return null}async getLatestBlockhashWithRetry(e=5){for(let n=0;n<e;n++)try{return await this.connection.getLatestBlockhash("confirmed")}catch(r){if(console.warn(`Attempt ${n+1} failed to get blockhash: ${r.message}`),n===e-1)throw new Error("Network error: Failed to fetch blockhash. Devnet may be down.");await this.wait(500*Math.pow(2,n))}throw new Error("Failed to get blockhash")}async getTokenBalances(e){const n=await this.getBalance(e);return th.map(r=>({...r,balance:r.symbol==="SOL"?n:0}))}async airdrop(e){var n,r;try{const i=await this.connection.requestAirdrop(new bt(e),1*GA),s=await this.getLatestBlockhashWithRetry();return await this.connection.confirmTransaction({blockhash:s.blockhash,lastValidBlockHeight:s.lastValidBlockHeight,signature:i}),i}catch(i){throw(n=i.message)!=null&&n.includes("429")?new Error("Devnet Rate Limit Reached. Please try again later."):(r=i.message)!=null&&r.includes("limit reached")?new Error("Daily Airdrop Limit Reached for this IP."):i}}async connectWallet(){try{const{solana:e}=window;if(e&&e.isPhantom)return(await e.connect()).publicKey.toString();throw alert("Solana object not found! Get a Phantom Wallet "),new Error("No wallet found")}catch(e){throw console.error(e),e}}async pollForConfirmation(e,n=15,r=2e3){var i,s,o;for(let a=0;a<n;a++)try{const l=await this.connection.getSignatureStatus(e);if((i=l==null?void 0:l.value)!=null&&i.confirmationStatus){const c=l.value.confirmationStatus;if(c==="confirmed"||c==="finalized")return console.log(`[Solana]  Transaction confirmed (${c}) after ${a+1} attempts`),!0;c==="processed"&&console.log("[Solana]  Transaction processed, waiting for confirmation...")}if((s=l==null?void 0:l.value)!=null&&s.err)throw new Error(`Transaction failed on-chain: ${JSON.stringify(l.value.err)}`);await this.wait(r)}catch(l){if((o=l.message)!=null&&o.includes("failed on-chain"))throw l;console.warn(`[Solana] Poll attempt ${a+1} failed:`,l.message),await this.wait(r)}return!1}async sendTransactionWithRetry(e,n){var i,s;let r="";try{const o=await this.getLatestBlockhashWithRetry();if(e.recentBlockhash=o.blockhash,e.lastValidBlockHeight=o.lastValidBlockHeight,e.sign(...n),r=await this.connection.sendRawTransaction(e.serialize(),{skipPreflight:!1,preflightCommitment:"confirmed"}),console.log(`[Solana]  Transaction sent: ${r.slice(0,16)}...`),!await this.pollForConfirmation(r,15,2e3)){console.warn(`[Solana]  Confirmation polling timed out, but transaction may have succeeded: ${r}`);const l=new Error("Transaction timed out. The network is congested. Please check your wallet history before trying again to avoid double spending.");throw l.signature=r,l.isTimeout=!0,l}return r}catch(o){if(console.warn("Transaction Error:",o.name,o.message),o.name==="TransactionExpiredBlockheightExceededError"||(i=o.message)!=null&&i.includes("block height exceeded")||(s=o.message)!=null&&s.includes("timeout")||o.isTimeout){const a=new Error("Transaction timed out. The network is congested. Please check your wallet history before trying again to avoid double spending.");throw a.signature=r,a.isTimeout=!0,a}throw o}}async transferSol(e,n,r){try{const i=new La().add(Cx.transfer({fromPubkey:e.publicKey,toPubkey:new bt(n),lamports:Math.floor(r*GA)}));return i.feePayer=e.publicKey,await this.sendTransactionWithRetry(i,[e])}catch(i){throw console.error("Transfer Error",i),new Error(`Transfer failed: ${i.message}`)}}async findPoolKeys(e,n){const{Liquidity:r,MARKET_STATE_LAYOUT_V3:i,LIQUIDITY_STATE_LAYOUT_V4:s,SPL_MINT_LAYOUT:o}=await gl(async()=>{const{Liquidity:k,MARKET_STATE_LAYOUT_V3:O,LIQUIDITY_STATE_LAYOUT_V4:U,SPL_MINT_LAYOUT:R}=await import("./index-CR9Kqg4L.js");return{Liquidity:k,MARKET_STATE_LAYOUT_V3:O,LIQUIDITY_STATE_LAYOUT_V4:U,SPL_MINT_LAYOUT:R}},[]),a=new bt(e),l=new bt(n),c=new bt(DGe),u=[{dataSize:s.span},{memcmp:{offset:s.offsetOf("baseMint"),bytes:a.toBase58()}},{memcmp:{offset:s.offsetOf("quoteMint"),bytes:l.toBase58()}}],f=[{dataSize:s.span},{memcmp:{offset:s.offsetOf("baseMint"),bytes:l.toBase58()}},{memcmp:{offset:s.offsetOf("quoteMint"),bytes:a.toBase58()}}];let m=await this.connection.getProgramAccounts(c,{filters:u});if(m.length===0&&(m=await this.connection.getProgramAccounts(c,{filters:f})),m.length===0)return null;const g=m[0],v=s.decode(g.account.data),x=v.marketId,b=await this.connection.getAccountInfo(x);if(!b)throw new Error("Failed to fetch market info");const E=i.decode(b.data),C=r.getAssociatedAuthority({programId:c}).publicKey;return{id:g.pubkey,baseMint:v.baseMint,quoteMint:v.quoteMint,lpMint:v.lpMint,baseDecimals:v.baseDecimal.toNumber(),quoteDecimals:v.quoteDecimal.toNumber(),lpDecimals:5,version:4,programId:c,authority:C,openOrders:v.openOrders,targetOrders:v.targetOrders,baseVault:v.baseVault,quoteVault:v.quoteVault,withdrawQueue:v.withdrawQueue,lpVault:v.lpVault,marketVersion:3,marketProgramId:v.marketProgramId,marketId:v.marketId,marketAuthority:r.getAssociatedAuthority({programId:v.marketProgramId}).publicKey,marketBaseVault:E.baseVault,marketQuoteVault:E.quoteVault,marketBids:E.bids,marketAsks:E.asks,marketEventQueue:E.eventQueue}}async executeSwap(e,n,r,i,s){const{Liquidity:o,Token:a,TokenAmount:l,Percent:c,TxVersion:u}=await gl(async()=>{const{Liquidity:f,Token:m,TokenAmount:g,Percent:v,TxVersion:x}=await import("./index-CR9Kqg4L.js");return{Liquidity:f,Token:m,TokenAmount:g,Percent:v,TxVersion:x}},[]);try{const f=B=>{console.log(`[Swap Status] ${B}`),s&&s(B)};f("Initializing Swap Protocol...");const m="So11111111111111111111111111111111111111112",g=n.trim()==="SOL"?m:n.trim(),v=r.trim()==="SOL"?m:r.trim();f("Fetching Pool Keys...");const x=await this.findPoolKeys(g,v);if(!x)throw new Error(`No Liquidity Pool found for ${g} <-> ${v} on Devnet.`);f("Calculating Amount Out...");const b=g===x.baseMint.toBase58(),{TOKEN_PROGRAM_ID:E}=await gl(async()=>{const{TOKEN_PROGRAM_ID:B}=await Promise.resolve().then(()=>JZ);return{TOKEN_PROGRAM_ID:B}},void 0),C=new a(E,new bt(g),b?x.baseDecimals:x.quoteDecimals),k=new a(E,new bt(v),b?x.quoteDecimals:x.baseDecimals),O=new l(C,i,!1),U=new c(25,100);f("Fetching Pool Reserves...");const R=await o.fetchInfo({connection:this.connection,poolKeys:x}),{amountOut:$,minAmountOut:V}=o.computeAmountOut({poolKeys:x,poolInfo:R,amountIn:O,currencyOut:k,slippage:U});f(`Calculated Amount Out: ${$.toFixed()} (Min: ${V.toFixed()})`),f("Building Swap Transaction...");const j=await this.getTokenAccountsByOwner(e.publicKey),{innerTransactions:F}=await o.makeSwapInstructionSimple({connection:this.connection,poolKeys:x,userKeys:{tokenAccounts:j,owner:e.publicKey},amountIn:O,amountOut:V,fixedSide:"in",makeTxVersion:u.V0});f("Sending Transaction to Devnet...");const W=await Promise.all(F.map(async B=>{const{instructions:A,signers:I}=B,D=new La;return D.add(...A),D.feePayer=e.publicKey,D.recentBlockhash=(await this.connection.getLatestBlockhash()).blockhash,D.sign(e,...I),D}));let H="";for(const B of W){const A=await this.connection.sendRawTransaction(B.serialize(),{skipPreflight:!1,preflightCommitment:"confirmed",maxRetries:5});if(console.log(`[Swap]  Transaction sent: ${A.slice(0,16)}...`),!await this.pollForConfirmation(A,15,2e3))throw new Error("Transaction confirmation timed out - please check explorer for status");H=A}return f("Transaction Confirmed!"),H}catch(f){throw console.error("Swap Error:",f),new Error(`Swap failed: ${f.message}`)}}async getWalletAssets(e){const n=new bt(e),r=await this.getBalance(e),s=(await this.getTokenAccountsByOwner(n)).map(o=>{var a,l;return{mint:o.accountInfo.mint.toBase58(),amount:o.accountInfo.amount,decimals:o.accountInfo.decimals,symbol:((a=th.find(c=>c.mint===o.accountInfo.mint.toBase58()))==null?void 0:a.symbol)||"UNKNOWN",name:((l=th.find(c=>c.mint===o.accountInfo.mint.toBase58()))==null?void 0:l.name)||"Unknown Token",isNft:o.accountInfo.decimals===0&&o.accountInfo.amount==="1"}});return s.unshift({mint:"So11111111111111111111111111111111111111112",amount:(r*GA).toString(),decimals:9,symbol:"SOL",name:"Solana",isNft:!1}),s}async getTokenAccountsByOwner(e){const{TOKEN_PROGRAM_ID:n}=await gl(async()=>{const{TOKEN_PROGRAM_ID:i}=await Promise.resolve().then(()=>JZ);return{TOKEN_PROGRAM_ID:i}},void 0);return(await this.connection.getParsedTokenAccountsByOwner(e,{programId:n})).value.map(i=>({pubkey:i.pubkey,programId:i.account.owner,accountInfo:{mint:new bt(i.account.data.parsed.info.mint),amount:i.account.data.parsed.info.tokenAmount.amount,decimals:i.account.data.parsed.info.tokenAmount.decimals}}))}async transferToken(e,n,r,i,s){if(n==="So11111111111111111111111111111111111111112"||n==="SOL")return this.transferSol(e,r,i);try{const o=new bt(n),a=new bt(r),l=await sL(o,e.publicKey),c=await sL(o,a),u=new La;await this.connection.getAccountInfo(c)||u.add(Gme(e.publicKey,c,a,o));let m;if(await this.connection.getAccountInfo(l)){const v=await this.connection.getTokenAccountBalance(l),x=BigInt(v.value.amount),b=BigInt(Math.round(i*Math.pow(10,s))),E=x>b?x-b:b-x,C=x/BigInt(100);E<=C?(m=x,console.log(`[Transfer] Using actual balance: ${x} (requested: ${b})`)):m=b}else m=BigInt(Math.round(i*Math.pow(10,s)));return u.add(Kme(l,c,e.publicKey,m)),u.feePayer=e.publicKey,await this.sendTransactionWithRetry(u,[e])}catch(o){throw console.error("Token Transfer Error",o),new Error(`Token Transfer failed: ${o.message}`)}}async getRecentTransactions(e,n=20){try{const r=new bt(e);return(await this.connection.getSignaturesForAddress(r,{limit:n})).map(s=>({signature:s.signature,slot:s.slot,err:s.err,memo:s.memo,blockTime:s.blockTime,status:s.err?"failed":"success",confirmationStatus:s.confirmationStatus}))}catch(r){return console.error("Error fetching transactions:",r),[]}}}const Ts=new qht,Nf=class Nf{static async setSessionHash(e){try{const n=Date.now(),r=new TextEncoder,i=crypto.getRandomValues(new Uint8Array(16)),s=r.encode(e+n.toString()),o=new Uint8Array(i.length+s.length);o.set(i),o.set(s,i.length);const a=await crypto.subtle.digest("SHA-256",o),l=new Uint8Array(a);this.sessionHash=btoa(String.fromCharCode(...l)),this.sessionTimestamp=n}catch{console.error("[SecurityService] Failed to set session hash")}}static hasValidSession(){return this.sessionHash!==null&&this.sessionTimestamp>0}static getSessionTimestamp(){return this.sessionTimestamp}static clearSession(){this.sessionHash=null,this.sessionTimestamp=0}static initializeDevToolsDetection(){if(this.detectionInterval)return;const e=()=>{const i=window.outerWidth-window.innerWidth>160,s=window.outerHeight-window.innerHeight>160;(i||s)&&!this.devToolsDetected&&this.handleDevToolsDetected()},n=new Image;let r=!1;Object.defineProperty(n,"id",{get:function(){return r=!0,""}}),this.detectionInterval=setInterval(()=>{r=!1,console.log(n),console.clear(),r&&!this.devToolsDetected&&this.handleDevToolsDetected(),e()},2e3),window.addEventListener("resize",e)}static handleDevToolsDetected(){this.devToolsDetected||(this.devToolsDetected=!0,console.clear(),console.warn("%c SECURITY NOTICE ","color: #ff4444; font-size: 28px; font-weight: bold; text-shadow: 2px 2px 4px rgba(0,0,0,0.3);"),console.warn("%cDeveloper tools detected.","color: #ff8800; font-size: 16px;"),console.warn("%cFor your security, sensitive operations may be restricted.","color: #ffaa00; font-size: 14px;"),console.warn("%cIf you are not a developer, please close this panel immediately.","color: #ffffff; font-size: 12px;"),this.securityListeners.forEach(e=>{try{e()}catch{}}))}static isDevToolsDetected(){return this.devToolsDetected}static onSecurityBreach(e){return this.securityListeners.add(e),()=>this.securityListeners.delete(e)}static initializeConsoleSanitization(){const e=[/0x[a-fA-F0-9]{64}/g,/[1-9A-HJ-NP-Za-km-z]{87,88}/g,/0x[a-fA-F0-9]{40,}/g,/[A-Za-z0-9+/]{100,}={0,2}/g],n=r=>r.map(i=>{if(typeof i=="string"){let s=i;for(const o of e)s=s.replace(o,"[REDACTED]");return s}if(typeof i=="object"&&i!==null)try{const s=JSON.stringify(i);let o=!1;for(const a of e)if(a.test(s)){o=!0;break}if(o)return"[Object with sensitive data]"}catch{}return i});console.log=(...r)=>{this.originalConsole.log.apply(console,n(r))},console.warn=(...r)=>{this.originalConsole.warn.apply(console,n(r))},console.info=(...r)=>{this.originalConsole.info.apply(console,n(r))},console.debug=(...r)=>{this.originalConsole.debug.apply(console,n(r))}}static protectGlobalNamespace(){if(typeof window>"u")return;const e=window,n=["__dealerService","__polymarketDealerService","__backgroundTimer"];for(const r of n)try{e[r]&&delete e[r],Object.defineProperty(e,r,{value:void 0,writable:!1,configurable:!1})}catch{}}static initializeProductionSecurity(){console.log("[SecurityService] Initializing production security..."),this.initializeConsoleSanitization(),this.initializeDevToolsDetection(),this.protectGlobalNamespace(),console.log("[SecurityService] Production security initialized")}static cleanup(){this.detectionInterval&&(clearInterval(this.detectionInterval),this.detectionInterval=null),this.securityListeners.clear(),this.devToolsDetected=!1,this.clearSession()}};Nf.sessionHash=null,Nf.sessionTimestamp=0,Nf.devToolsDetected=!1,Nf.detectionInterval=null,Nf.securityListeners=new Set,Nf.originalConsole={log:console.log,warn:console.warn,error:console.error,info:console.info,debug:console.debug};let ly=Nf;const XZ="vault_balance_history",QZ="vault_intraday_history",ZZ=90,eee=96;class Ght{constructor(){this.history=[],this.intradayHistory=[],this.listeners=new Set,this.isInitialized=!1,this.initPromise=null,this.initPromise=this.initialize()}async initialize(){this.isInitialized||(await this.loadFromStorage(),this.isInitialized=!0,this.notify())}async waitForInit(){this.initPromise&&await this.initPromise}async loadFromStorage(){try{const e=await Ae.getItem(Ae.getUserKey(XZ));e&&(this.history=JSON.parse(e));const n=await Ae.getItem(Ae.getUserKey(QZ));if(n){this.intradayHistory=JSON.parse(n);const r=Date.now()-1440*60*1e3;this.intradayHistory=this.intradayHistory.filter(i=>i.timestamp>r)}}catch(e){console.error("[BalanceHistory] Failed to load:",e),this.history=[],this.intradayHistory=[]}}async saveToStorage(){try{await Ae.setItem(Ae.getUserKey(XZ),JSON.stringify(this.history)),await Ae.setItem(Ae.getUserKey(QZ),JSON.stringify(this.intradayHistory))}catch(e){console.error("[BalanceHistory] Failed to save:",e)}}notify(){this.listeners.forEach(e=>e())}getTodayDate(){return new Date().toISOString().split("T")[0]}get15MinTimeKey(){const e=new Date,n=Math.floor(e.getMinutes()/15)*15;return`${e.getHours().toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`}async reloadFromStorage(){console.log("[BalanceHistory] Reloading from storage..."),await this.loadFromStorage(),this.notify()}reset(){console.log("[BalanceHistory] Resetting history..."),this.history=[],this.intradayHistory=[],this.notify()}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}getSnapshot(){return this.history}recordSnapshot(e,n,r){const i=this.getTodayDate(),s=e+n+r,o=Date.now(),a=this.history.findIndex(g=>g.date===i),l={date:i,timestamp:o,solValue:e,hlValue:n,pmValue:r,totalValue:s};a>=0?this.history[a]=l:this.history.push(l),this.history.sort((g,v)=>g.date.localeCompare(v.date)),this.history.length>ZZ&&(this.history=this.history.slice(-ZZ));const c=this.get15MinTimeKey(),u=o-1440*60*1e3;this.intradayHistory=this.intradayHistory.filter(g=>g.timestamp>u);const f=this.intradayHistory.findIndex(g=>g.timeKey===c&&o-g.timestamp<900*1e3),m={timestamp:o,timeKey:c,solValue:e,hlValue:n,pmValue:r,totalValue:s};f>=0?this.intradayHistory[f]=m:this.intradayHistory.push(m),this.intradayHistory.length>eee&&(this.intradayHistory=this.intradayHistory.slice(-eee)),this.saveToStorage(),this.notify(),console.log(`[BalanceHistory]  Snapshot saved: SOL=$${e.toFixed(2)}, HL=$${n.toFixed(2)}, PM=$${r.toFixed(2)} [${c}]`)}getHistoryForChart(e=30){return e===1?this.intradayHistory.map(r=>({date:r.timeKey,value:r.totalValue,solValue:r.solValue,hlValue:r.hlValue,pmValue:r.pmValue})):this.history.slice(-e).map(r=>({date:new Date(r.date).toLocaleDateString("en-US",{month:"short",day:"numeric"}),value:r.totalValue,solValue:r.solValue,hlValue:r.hlValue,pmValue:r.pmValue}))}hasHistory(){return this.history.length>0||this.intradayHistory.length>0}getHistoryDays(){return this.history.length}hasIntradayHistory(){return this.intradayHistory.length>0}clearHistory(){this.history=[],this.intradayHistory=[],this.saveToStorage(),this.notify()}}const rl=new Ght,Kht=(t,e)=>{const[n,r]=T.useState(!0),[i,s]=T.useState({publicKey:null,encryptedPrivateKey:null,solBalance:0,tokens:th,assets:[],isUnlocked:!1,ownerPublicKey:null,hlPublicKey:null,hlEncryptedPrivateKey:null,hlBalance:0,hlOwnerPublicKey:null,hlPositions:[],pmPublicKey:null,pmEncryptedPrivateKey:null,pmBalance:0,pmOwnerPublicKey:null}),[o,a]=T.useState(""),[l,c]=T.useState(""),[u,f]=T.useState("SOL"),[m,g]=T.useState(null),[v,x]=T.useState(!1),[b,E]=T.useState(""),[C,k]=T.useState(!1),[O,U]=T.useState(""),[R,$]=T.useState(!1),[V,j]=T.useState(""),[F,W]=T.useState(!1),[H,B]=T.useState(""),[A,I]=T.useState(!1),[D,z]=T.useState(!1),[G,te]=T.useState(!1),[K,q]=T.useState(""),[M,_]=T.useState(""),[Y,X]=T.useState(""),[re,oe]=T.useState(""),[Ee,ce]=T.useState(""),[me,ue]=T.useState("");T.useEffect(()=>{const he=ly.onSecurityBreach(()=>{i.isUnlocked&&(console.warn("[useVault] Security breach detected - locking vault"),s(ye=>({...ye,isUnlocked:!1})),a(""),g(null),ly.clearSession(),t("Security alert: Vault locked for protection"))});return()=>he()},[i.isUnlocked,t]),T.useEffect(()=>{if(!e){console.log("[useVault] Waiting for userId before loading vault data..."),r(!0),rl.reset(),ft.reset();return}(async()=>{r(!0);try{await rl.reloadFromStorage(),await ft.reloadFromStorage(),await Ae.migrateFromLocalStorage(),console.log("[useVault] Loading vault data for user:",e.substring(0,8)+"...");const ye=await Ae.getItem(Ae.getUserKey("agent_vault_pubkey")),Xe=await Ae.getItem(Ae.getUserKey("agent_vault_enc")),et=await Ae.getItem(Ae.getUserKey("agent_owner_pubkey")),st=await Ae.getItem(Ae.getUserKey("agent_hl_vault_pubkey")),Ft=await Ae.getItem(Ae.getUserKey("agent_hl_vault_enc")),vt=await Ae.getItem(Ae.getUserKey("agent_hl_owner_pubkey")),Ot=await Ae.getItem(Ae.getUserKey("agent_pm_vault_pubkey")),cn=await Ae.getItem(Ae.getUserKey("agent_pm_vault_enc")),en=await Ae.getItem(Ae.getUserKey("agent_pm_owner_pubkey"));console.log("[useVault] Loaded keys:",{solana:ye?ye.substring(0,8)+"...":null,hyperliquid:st?st.substring(0,8)+"...":null,polymarket:Ot?Ot.substring(0,8)+"...":null}),ye&&Xe?(s(rn=>({...rn,publicKey:ye,encryptedPrivateKey:Xe,ownerPublicKey:et,hlPublicKey:st,hlEncryptedPrivateKey:Ft,hlOwnerPublicKey:vt,pmPublicKey:Ot,pmEncryptedPrivateKey:cn,pmOwnerPublicKey:en})),Ne(ye),st&&le(st),Ot&&Ie(Ot)):st&&Ft?(s(rn=>({...rn,hlPublicKey:st,hlEncryptedPrivateKey:Ft,hlOwnerPublicKey:vt,pmPublicKey:Ot,pmEncryptedPrivateKey:cn,pmOwnerPublicKey:en})),le(st),Ot&&Ie(Ot)):Ot&&cn&&(s(rn=>({...rn,pmPublicKey:Ot,pmEncryptedPrivateKey:cn,pmOwnerPublicKey:en})),Ie(Ot))}catch(ye){console.error("[useVault] Failed to load vault from storage",ye)}finally{r(!1)}})()},[e]);const le=async he=>{try{const ye=await zt.getUserState(he),Xe=ye.marginSummary,et=Xe?parseFloat(Xe.accountValue):0,st=ye.assetPositions||[];s(Ft=>({...Ft,hlBalance:et,hlPositions:st}))}catch(ye){console.error("Failed to refresh HL balance",ye)}},Ie=async he=>{try{const{ethers:ye}=await gl(async()=>{const{ethers:cn}=await import("./index-BOWO39xQ.js");return{ethers:cn}},[]),Xe=new ye.JsonRpcProvider("https://polygon-rpc.com"),et="0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174",st=["function balanceOf(address) view returns (uint256)"],vt=await new ye.Contract(et,st,Xe).balanceOf(he),Ot=parseFloat(ye.formatUnits(vt,6));s(cn=>({...cn,pmBalance:Ot}))}catch(ye){console.error("Failed to refresh Polymarket balance",ye)}},Ne=async he=>{try{const ye=await Ts.getBalance(he),Xe=await Ts.getWalletAssets(he);s(et=>({...et,solBalance:ye,assets:Xe}))}catch(ye){console.error("Failed to refresh balance",ye)}};return{vault:i,setVault:s,password:o,setPassword:a,withdrawAmount:l,setWithdrawAmount:c,withdrawNetwork:u,setWithdrawNetwork:f,showBackupModal:v,setShowBackupModal:x,backupKey:b,setBackupKey:E,showHLBackupModal:C,setShowHLBackupModal:k,hlBackupKey:O,setHLBackupKey:U,isImporting:F,setIsImporting:W,importKey:H,setImportKey:B,refreshBalance:Ne,connectOwnerWallet:async()=>{try{const he=await Ts.connectWallet();s(ye=>({...ye,ownerPublicKey:he})),await Ae.setItem(Ae.getUserKey("agent_owner_pubkey"),he),t("Solana Owner Wallet Connected: "+he.slice(0,6)+"...")}catch{t("Failed to connect Solana wallet.")}},disconnectOwnerWallet:async()=>{s(he=>({...he,ownerPublicKey:null})),await Ae.removeItem(Ae.getUserKey("agent_owner_pubkey")),t("Solana Owner Wallet Disconnected")},connectHLOwnerWallet:async()=>{try{const{ethereum:he}=window;if(he){const Xe=(await he.request({method:"eth_requestAccounts"}))[0];s(et=>({...et,hlOwnerPublicKey:Xe})),await Ae.setItem(Ae.getUserKey("agent_hl_owner_pubkey"),Xe),t("Hyperliquid Owner Wallet Connected: "+Xe.slice(0,6)+"...")}else t("No Ethereum wallet found! Install MetaMask.")}catch{t("Failed to connect EVM wallet.")}},disconnectHLOwnerWallet:async()=>{s(he=>({...he,hlOwnerPublicKey:null})),await Ae.removeItem(Ae.getUserKey("agent_hl_owner_pubkey")),t("Hyperliquid Owner Wallet Disconnected")},createVault:async()=>{if(!o){t("Password is required");return}try{const he=Ts.createVaultKeypair(),ye=Array.from(he.secretKey),Xe=await or.encrypt(JSON.stringify(ye),o),et=zt.createVaultWallet(),st=await or.encrypt(et.privateKey,o);await Ae.setItem(Ae.getUserKey("agent_vault_pubkey"),he.publicKey.toBase58()),await Ae.setItem(Ae.getUserKey("agent_vault_enc"),Xe),await Ae.setItem(Ae.getUserKey("agent_hl_vault_pubkey"),et.address),await Ae.setItem(Ae.getUserKey("agent_hl_vault_enc"),st),s(Ft=>({...Ft,isUnlocked:!0,publicKey:he.publicKey.toBase58(),encryptedPrivateKey:Xe,hlPublicKey:et.address,hlEncryptedPrivateKey:st})),U(et.privateKey),E(KA.encode(he.secretKey)),x(!0),t("Vaults created successfully")}catch(he){console.error("Vault creation failed",he),t("Failed to create vault")}},unlockVault:async()=>{if(!o){t("Password is required");return}try{const he=await Ae.getItem(Ae.getUserKey("agent_vault_enc")),ye=await Ae.getItem(Ae.getUserKey("agent_vault_pubkey")),Xe=await Ae.getItem(Ae.getUserKey("agent_hl_vault_enc")),et=await Ae.getItem(Ae.getUserKey("agent_hl_vault_pubkey"));if((!he||!ye)&&(!Xe||!et)){t("No vault found. Please create one.");return}let st=null,Ft=null,vt=null;if(he&&ye)try{const Ot=await or.decrypt(he,o),cn=Uint8Array.from(JSON.parse(Ot));if(st=Xo.fromSecretKey(cn),st.publicKey.toBase58()!==ye)throw new Error("Keypair mismatch");g(st)}catch(Ot){throw console.error("Solana unlock failed",Ot),new Error("Incorrect password for Solana Vault")}if(Xe&&et)try{const Ot=await or.decrypt(Xe,o),{ethers:cn}=await gl(async()=>{const{ethers:rn}=await import("./index-BOWO39xQ.js");return{ethers:rn}},[]),en=new cn.Wallet(Ot);en.address.toLowerCase()!==et.toLowerCase()?(console.error(`[Vault]  HL Address Mismatch! Stored: ${et}, Derived: ${en.address}`),Ft=en.address,t("Warning: Stored HL address mismatch. Using derived address.")):Ft=et,vt=Xe}catch(Ot){throw console.error("Hyperliquid unlock failed",Ot),new Error("Incorrect password for Hyperliquid Vault")}s(Ot=>({...Ot,isUnlocked:!0,publicKey:st?st.publicKey.toBase58():null,encryptedPrivateKey:he||null,hlPublicKey:Ft||null,hlEncryptedPrivateKey:vt||null})),Ft&&le(Ft),st&&Ne(st.publicKey.toBase58()),await ly.setSessionHash(o),t("Vault unlocked")}catch(he){console.error("Unlock failed",he),t(he.message||"Incorrect password or corrupted vault")}},requestAirdrop:async()=>{if(i.publicKey)try{t("Requesting 1 SOL Airdrop..."),await Ts.airdrop(i.publicKey),t("Airdrop Successful!"),setTimeout(()=>Ne(i.publicKey),2e3)}catch(he){console.error("Airdrop failed",he),t(`Airdrop Failed: ${he.message}`),alert(he.message)}},handleWithdraw:async()=>{if(!i.isUnlocked&&!m){alert("Vault is locked or keypair missing");return}if(!i.isUnlocked||!m){alert("Vault is locked");return}if(!i.ownerPublicKey){alert("Connect Owner Wallet first");return}const he=parseFloat(l);if(isNaN(he)||he<=0){alert("Invalid amount");return}if(he>i.solBalance){alert("Insufficient balance");return}try{t(`Sending ${he} SOL to Owner...`);const ye=await Ts.transferSol(m,i.ownerPublicKey,he);t(`Withdrawal Success! Sig: ${ye.slice(0,8)}...`),c(""),Ne(i.publicKey)}catch(ye){console.error(ye),t(`Withdrawal Failed: ${ye.message}`)}},handleWithdrawHL:async()=>{if(!i.isUnlocked){alert("Vault is locked");return}if(!i.hlOwnerPublicKey){alert("Connect Hyperliquid Owner Wallet first");return}if(!i.hlEncryptedPrivateKey){alert("Hyperliquid vault not found");return}const he=parseFloat(l);if(isNaN(he)||he<=1){alert("Amount must be greater than $1 (withdrawal fee)");return}if(he>(i.hlBalance||0)){alert("Insufficient USDC balance");return}try{const ye=await or.decrypt(i.hlEncryptedPrivateKey,o),Xe=zt.getWalletFromPrivateKey(ye);t(`Withdrawing ${he} USDC to Hyperliquid Owner...`);const et=await zt.withdrawUSDC(Xe,i.hlOwnerPublicKey,he);t(`Withdrawal Success! Status: ${et.status}`),c(""),i.hlPublicKey&&setTimeout(()=>le(i.hlPublicKey),2e3)}catch(ye){console.error(ye),t(`Withdrawal Failed: ${ye.message}`)}},handleWithdrawPM:async()=>{if(!i.isUnlocked){alert("Vault is locked");return}if(!i.pmOwnerPublicKey){alert("Connect Polymarket Owner Wallet first");return}if(!i.pmEncryptedPrivateKey){alert("Polymarket vault not found");return}const he=parseFloat(l);if(isNaN(he)||he<=0){alert("Amount must be greater than 0");return}if(he>(i.pmBalance||0)){alert("Insufficient USDC balance");return}try{const ye=await or.decrypt(i.pmEncryptedPrivateKey,o),{ethers:Xe}=await gl(async()=>{const{ethers:rn}=await import("./index-BOWO39xQ.js");return{ethers:rn}},[]),et=new Xe.JsonRpcProvider("https://polygon-rpc.com"),st=new Xe.Wallet(ye,et),Ft="0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174",vt=["function transfer(address to, uint256 amount) returns (bool)","function balanceOf(address) view returns (uint256)"],Ot=new Xe.Contract(Ft,vt,st),cn=Xe.parseUnits(he.toString(),6);t(`Withdrawing ${he} USDC to Polymarket Owner...`);const en=await Ot.transfer(i.pmOwnerPublicKey,cn);await en.wait(),t(`Withdrawal Success! Tx: ${en.hash.slice(0,10)}...`),c(""),i.pmPublicKey&&setTimeout(()=>Ie(i.pmPublicKey),2e3)}catch(ye){console.error(ye),t(`Withdrawal Failed: ${ye.message}`)}},importVault:async()=>{if(!o||!H){t("Password and Private Key are required");return}try{const he=KA.decode(H),ye=Xo.fromSecretKey(he),Xe=Array.from(ye.secretKey),et=await or.encrypt(JSON.stringify(Xe),o);await Ae.setItem(Ae.getUserKey("agent_vault_pubkey"),ye.publicKey.toBase58()),await Ae.setItem(Ae.getUserKey("agent_vault_enc"),et),s(st=>({...st,isUnlocked:!0,publicKey:ye.publicKey.toBase58(),encryptedPrivateKey:et})),t("Vault imported successfully"),W(!1),B("")}catch(he){console.error("Vault import failed",he),t("Invalid Private Key or Import Failed")}},resolveTokenMint:he=>{const ye=he.trim(),Xe=th.find(et=>et.symbol.toUpperCase()===ye.toUpperCase());return Xe?Xe.mint:ye},refreshHLBalance:le,isImportingSolana:A,setIsImportingSolana:I,isImportingHyperliquid:D,setIsImportingHyperliquid:z,solanaPassword:K,setSolanaPassword:q,hyperliquidPassword:M,setHyperliquidPassword:_,solanaImportKey:re,setSolanaImportKey:oe,hlImportKey:Ee,setHLImportKey:ce,createSolanaVault:async()=>{if(!K){t("Password is required");return}try{const he=Ts.createVaultKeypair(),ye=Array.from(he.secretKey),Xe=await or.encrypt(JSON.stringify(ye),K);await Ae.setItem(Ae.getUserKey("agent_vault_pubkey"),he.publicKey.toBase58()),await Ae.setItem(Ae.getUserKey("agent_vault_enc"),Xe),s(et=>({...et,isUnlocked:!0,publicKey:he.publicKey.toBase58(),encryptedPrivateKey:Xe})),g(he),E(KA.encode(he.secretKey)),x(!0),t("Solana Vault created successfully"),q("")}catch(he){console.error("Solana vault creation failed",he),t("Failed to create Solana vault")}},createHyperliquidVault:async()=>{if(!M){t("Password is required");return}try{const he=zt.createVaultWallet(),ye=await or.encrypt(he.privateKey,M);await Ae.setItem(Ae.getUserKey("agent_hl_vault_pubkey"),he.address),await Ae.setItem(Ae.getUserKey("agent_hl_vault_enc"),ye),s(Xe=>({...Xe,hlPublicKey:he.address,hlEncryptedPrivateKey:ye})),U(he.privateKey),k(!0),t("Hyperliquid Vault created successfully"),_(""),le(he.address)}catch(he){console.error("Hyperliquid vault creation failed",he),t("Failed to create Hyperliquid vault")}},importSolanaVault:async()=>{if(!K||!re){t("Password and Private Key are required");return}try{const he=KA.decode(re),ye=Xo.fromSecretKey(he),Xe=Array.from(ye.secretKey),et=await or.encrypt(JSON.stringify(Xe),K);await Ae.setItem(Ae.getUserKey("agent_vault_pubkey"),ye.publicKey.toBase58()),await Ae.setItem(Ae.getUserKey("agent_vault_enc"),et),s(st=>({...st,isUnlocked:!0,publicKey:ye.publicKey.toBase58(),encryptedPrivateKey:et})),g(ye),t("Solana Vault imported successfully"),I(!1),oe(""),q(""),Ne(ye.publicKey.toBase58())}catch(he){console.error("Solana vault import failed",he),t("Invalid Private Key or Import Failed")}},importHyperliquidVault:async()=>{if(!M||!Ee){t("Password and Private Key are required");return}try{let he=Ee.trim();he.startsWith("0x")||(he="0x"+he);const{ethers:ye}=await gl(async()=>{const{ethers:st}=await import("./index-BOWO39xQ.js");return{ethers:st}},[]),Xe=new ye.Wallet(he),et=await or.encrypt(he,M);await Ae.setItem(Ae.getUserKey("agent_hl_vault_pubkey"),Xe.address),await Ae.setItem(Ae.getUserKey("agent_hl_vault_enc"),et),s(st=>({...st,hlPublicKey:Xe.address,hlEncryptedPrivateKey:et})),t("Hyperliquid Vault imported successfully"),z(!1),ce(""),_(""),le(Xe.address)}catch(he){console.error("Hyperliquid vault import failed",he),t("Invalid Private Key or Import Failed")}},isImportingPolymarket:G,setIsImportingPolymarket:te,polymarketPassword:Y,setPolymarketPassword:X,pmImportKey:me,setPMImportKey:ue,createPolymarketVault:async()=>{if(!Y){t("Password is required");return}try{const{ethers:he}=await gl(async()=>{const{ethers:et}=await import("./index-BOWO39xQ.js");return{ethers:et}},[]),ye=he.Wallet.createRandom(),Xe=await or.encrypt(ye.privateKey,Y);await Ae.setItem(Ae.getUserKey("agent_pm_vault_pubkey"),ye.address),await Ae.setItem(Ae.getUserKey("agent_pm_vault_enc"),Xe),s(et=>({...et,pmPublicKey:ye.address,pmEncryptedPrivateKey:Xe})),j(ye.privateKey),$(!0),t("Polymarket Vault created successfully"),X(""),Ie(ye.address)}catch(he){console.error("Polymarket vault creation failed",he),t("Failed to create Polymarket vault")}},importPolymarketVault:async()=>{if(!Y||!me){t("Password and Private Key are required");return}try{let he=me.trim();he.startsWith("0x")||(he="0x"+he);const{ethers:ye}=await gl(async()=>{const{ethers:st}=await import("./index-BOWO39xQ.js");return{ethers:st}},[]),Xe=new ye.Wallet(he),et=await or.encrypt(he,Y);await Ae.setItem(Ae.getUserKey("agent_pm_vault_pubkey"),Xe.address),await Ae.setItem(Ae.getUserKey("agent_pm_vault_enc"),et),s(st=>({...st,pmPublicKey:Xe.address,pmEncryptedPrivateKey:et})),t("Polymarket Vault imported successfully"),te(!1),ue(""),X(""),Ie(Xe.address)}catch(he){console.error("Polymarket vault import failed",he),t("Invalid Private Key or Import Failed")}},connectPMOwnerWallet:async()=>{try{const{ethereum:he}=window;if(he){const Xe=(await he.request({method:"eth_requestAccounts"}))[0];s(et=>({...et,pmOwnerPublicKey:Xe})),await Ae.setItem(Ae.getUserKey("agent_pm_owner_pubkey"),Xe),t("Polymarket Owner Wallet Connected: "+Xe.slice(0,6)+"...")}else t("No Ethereum wallet found! Install MetaMask.")}catch{t("Failed to connect EVM wallet.")}},disconnectPMOwnerWallet:async()=>{s(he=>({...he,pmOwnerPublicKey:null})),await Ae.removeItem(Ae.getUserKey("agent_pm_owner_pubkey")),t("Polymarket Owner Wallet Disconnected")},refreshPMBalance:Ie,showPMBackupModal:R,setShowPMBackupModal:$,pmBackupKey:V,setPMBackupKey:j,deleteAccount:async()=>{try{await Ae.clear(),window.location.reload()}catch(he){console.error(he)}}}},gu=["#E7FE55","#D4EB4C","#C1D843","#AEC53A","#9BB231","#889F28","#758C1F","#627916","#4F660D","#3C5304"];Array.from({length:30},(t,e)=>({date:new Date(Date.now()-(29-e)*24*60*60*1e3).toLocaleDateString("en-US",{month:"short",day:"numeric"}),value:100+Math.random()*50+e*2}));const Wht=t=>{const[e,n]=T.useState([]),[r,i]=T.useState([]),[s,o]=T.useState({}),a=T.useSyncExternalStore(lt.subscribe.bind(lt),lt.getSnapshot.bind(lt));T.useEffect(()=>{const u=async()=>{const f={};try{const m=await fo.getMarketPrice("SOLUSDT");f.SOL=m.price}catch(m){console.error("Failed to fetch SOL price",m)}for(const m of t.assets||[])if(!(!m.symbol||m.symbol==="UNKNOWN"))try{const g=m.symbol.toUpperCase();if(f[g])continue;const v=await fo.getMarketPrice(`${g}USDT`);f[g]=v.price}catch(g){console.warn(`Failed to fetch price for ${m.symbol}`,g)}f.USDC=1,o(m=>({...m,...f}))};if(t.isUnlocked){u();const f=setInterval(u,6e4);return()=>clearInterval(f)}},[t.isUnlocked,t.assets]);const l=T.useSyncExternalStore(rl.subscribe.bind(rl),rl.getSnapshot.bind(rl));T.useEffect(()=>{if(!t.isUnlocked)return;const u=s.SOL||0,f=t.solBalance*u,m=t.hlBalance||0,g=(a.portfolioValue||0)+(a.currentExposure||0);(f>0||m>0||g>0)&&rl.recordSnapshot(f,m,g)},[t.isUnlocked,t.solBalance,s,t.hlBalance,a.portfolioValue,a.currentExposure]),T.useEffect(()=>{if(!t.isUnlocked)return;const u=()=>{const g=s.SOL||0,v=t.solBalance*g,x=t.hlBalance||0,b=(a.portfolioValue||0)+(a.currentExposure||0);(v>0||x>0||b>0)&&(rl.recordSnapshot(v,x,b),console.log("[useMarketData]  Periodic 15-min snapshot recorded"))};u();const f=900*1e3,m=setInterval(u,f);return()=>clearInterval(m)},[t.isUnlocked]),T.useEffect(()=>{if(rl.hasHistory()){const u=rl.getHistoryForChart(1);n(u);const f=rl.getHistoryForChart(365);i(f)}},[l]);const c=T.useMemo(()=>{const u=[];let f=0,m=0;const g=s.SOL||0,v=t.solBalance*g;t.solBalance>0&&(u.push({name:"Solana",symbol:"SOL",value:v,amount:t.solBalance,price:g,color:gu[0],hasPrice:g>0,network:"solana"}),g>0?f+=v:m++);const x=t.hlBalance||0;x>0&&(u.push({name:"USDC (Hyperliquid)",symbol:"USDC",value:x,amount:x,price:1,color:gu[1],hasPrice:!0,network:"hyperliquid"}),f+=x),t.hlPositions&&t.hlPositions.length>0&&t.hlPositions.forEach((E,C)=>{const k=E.position,O=parseFloat(k.szi),U=parseFloat(k.entryPx),R=parseFloat(k.unrealizedPnl),$=Math.abs(O*U)+R;$>0&&(u.push({name:`${k.coin} ${O>=0?"Long":"Short"}`,symbol:k.coin,value:$,amount:Math.abs(O),price:U,color:gu[(C+2)%gu.length],hasPrice:!0,network:"hyperliquid",pnl:R}),f+=$)});const b=a.portfolioValue||0;return b>0&&(u.push({name:"USDC (Polymarket)",symbol:"USDC",value:b,amount:b,price:1,color:gu[2],hasPrice:!0,network:"polymarket"}),f+=b),a.activePositions&&a.activePositions.length>0&&a.activePositions.forEach((E,C)=>{E.currentValue>0&&(u.push({name:`${E.question}`,symbol:E.outcome,value:E.currentValue,amount:E.shares,price:E.currentPrice,color:gu[(C+4)%gu.length],hasPrice:!0,network:"polymarket",pnl:E.unrealizedPnl}),f+=E.currentValue)}),(t.assets||[]).forEach((E,C)=>{var O;if(E.isNft||((O=E.symbol)==null?void 0:O.toUpperCase())==="SOL")return;const k=parseFloat(E.amount)/Math.pow(10,E.decimals);if(k>0){const U=s[E.symbol]||0,R=k*U;u.push({name:E.name||E.symbol,symbol:E.symbol,value:R,amount:k,price:U,color:gu[(C+3)%gu.length],hasPrice:U>0,network:"solana"}),U>0?f+=R:m++}}),m>0&&u.forEach(E=>{E.hasPrice||(E.value=E.amount*1,E.price=1,f+=E.value)}),{data:u.sort((E,C)=>C.value-E.value),totalValue:f}},[t.solBalance,t.hlBalance,t.hlPositions,t.assets,s,a.portfolioValue,a.currentExposure,a.activePositions]);return{portfolioHistoryDaily:e,portfolioHistoryLongTerm:r,assetPrices:s,assetAllocationData:c}},Yht=t=>{const[e,n]=T.useState([]),[r,i]=T.useState([]),[s,o]=T.useState(4);T.useEffect(()=>{(async()=>{const c=Ae.getUserKey("agent_activity_log"),u=await Ae.getItem(c);u&&i(JSON.parse(u))})()},[]);const a=(l,c,u)=>{const f={type:l,desc:c,signature:u,timestamp:Date.now(),status:"pending"};i(m=>{const g=[f,...m].slice(0,50);return Ae.setItem(Ae.getUserKey("agent_activity_log"),JSON.stringify(g)),g})};return T.useEffect(()=>{if(!t.isUnlocked)return;const l=async()=>{try{if(zt.isDealerActive()){console.log("[ActivityFeed]   Skipping fetch - dealer is active");return}const u=[];if(t.publicKey){const m=(await Ts.getRecentTransactions(t.publicKey)).map(g=>({type:g.err?"Failed":"Transaction",desc:`Signature: ${g.signature.slice(0,8)}...`,time:g.blockTime?new Date(g.blockTime*1e3).toLocaleTimeString():"Unknown",status:g.err?"failed":"success",signature:g.signature,network:"solana",timestamp:g.blockTime?g.blockTime*1e3:0}));u.push(...m)}if(t.hlPublicKey){const m=(await zt.getUserFillsShared(t.hlPublicKey,20)).map(g=>{const v=g.side==="B"?"Buy":"Sell",x=g.dir||v,b=parseFloat(g.closedPnl||"0"),E=b!==0?` (PnL: ${b>=0?"+":""}$${b.toFixed(2)})`:"";return{type:x,desc:`${g.coin} ${parseFloat(g.sz).toFixed(4)} @ $${parseFloat(g.px).toFixed(2)}${E}`,time:new Date(g.time).toLocaleTimeString(),status:"success",signature:`hl-${g.tid}`,network:"hyperliquid",timestamp:g.time}});u.push(...m)}u.sort((f,m)=>m.timestamp-f.timestamp),n(u)}catch(u){console.error("Failed to fetch history",u)}};l();const c=setInterval(l,3e4);return()=>clearInterval(c)},[t.isUnlocked,t.publicKey,t.hlPublicKey]),{activityFeed:e,localActivityLog:r,activityDisplayCount:s,setActivityDisplayCount:o,addActivityLog:a}},D3="vault-scheduler",Jht=(t,e,n,r,i)=>{const[s,o]=T.useState([]),[a,l]=T.useState(!1);T.useEffect(()=>{(async()=>{const f=Ae.getUserKey("agent_scheduled_tasks"),m=await Ae.getItem(f);m&&o(JSON.parse(m)),l(!0)})()},[]);const c=T.useRef(null);return T.useEffect(()=>{if(!t.isUnlocked){Da.stop(D3);return}console.log("[Scheduler]  Starting scheduler loop with Web Worker timer (background-safe, checks every 10s)");const u=async()=>{var g,v,x,b,E,C,k,O,U,R,$,V;const f=Date.now(),m=s.filter(j=>j.status==="active");if(m.length===0){console.log("[Scheduler]   No active tasks to check");return}console.log(`[Scheduler]  Checking ${m.length} active task(s)...`);for(const j of m){let F=!1;if(j.executeAt&&j.executeAt<=f)console.log(`[Scheduler]  Time-based task ${String(j.id).slice(0,6)} triggered`),F=!0;else if(j.condition)try{const{symbol:W,indicator:H,operator:B,value:A,timeframe:I}=j.condition;console.log(`[Scheduler]  Checking ${H.toUpperCase()} for ${W} (${I}): target ${B} ${A}`);const D=await fo.getIndicator(W,H,I);let z=0;if(typeof D.value=="number")z=D.value;else if(typeof D.value=="object"&&D.value!==null){const G=H.toLowerCase();G==="macd"?z=D.value.macd||0:G==="stoch"||G==="stochastic"?z=D.value.k||0:"value"in D.value?z=D.value.value:"rsi"in D.value?z=D.value.rsi:console.warn(`[Scheduler] Unknown indicator object structure for ${H}:`,D.value)}console.log(`[Scheduler]  Current ${H.toUpperCase()}: ${z.toFixed(2)} | Condition: ${B} ${A}`),B===">"&&z>A&&(F=!0),B==="<"&&z<A&&(F=!0),B===">="&&z>=A&&(F=!0),B==="<="&&z<=A&&(F=!0),B==="=="&&z==A&&(F=!0),console.log(F?`[Scheduler]  Condition MET! ${z.toFixed(2)} ${B} ${A}`:`[Scheduler]  Condition NOT met: ${z.toFixed(2)} ${B} ${A}`)}catch(W){console.error(`[Scheduler]   Error checking condition for task ${j.id}:`,W)}if(F){if(((g=s.find(B=>B.id===j.id))==null?void 0:g.status)==="executing"){console.log(`[Scheduler]   Task ${String(j.id).slice(0,6)} is already executing, skipping...`);continue}const H=(v=s.find(B=>B.id===j.id))==null?void 0:v.lastExecuted;if(H&&Date.now()-H<3e5){console.log(`[Scheduler]  Task ${String(j.id).slice(0,6)} was recently completed (${Math.round((Date.now()-H)/1e3)}s ago), skipping...`);continue}console.log(`[Scheduler]  Executing task ${String(j.id).slice(0,6)} (${j.type})...`),o(B=>B.map(A=>A.id===j.id?{...A,status:"executing"}:A));try{const B=JSON.parse(j.params||"{}");let A="";if(!t.encryptedPrivateKey)throw new Error("Vault encrypted key not available");const I=await or.decrypt(t.encryptedPrivateKey,e),D=Uint8Array.from(JSON.parse(I)),z=Xo.fromSecretKey(D);if(j.type==="SWAP"){console.log(`[Scheduler]  Swapping ${B.amount} ${B.inputToken} -> ${B.outputToken}`);try{A=await Ts.executeSwap(z,B.inputToken,B.outputToken,B.amount,G=>console.log(`[Scheduler] ${G}`)),i("Swap",`Scheduled: Swapped ${B.amount} ${B.inputToken} -> ${B.outputToken}`,A)}catch(G){if((x=G.message)!=null&&x.includes("timeout")||G.isTimeout){console.warn("[Scheduler]   Swap confirmation timeout. Verifying transaction status...");const te=G.signature;if(te)try{const K=await Ts.connection.getSignatureStatus(te),q=K==null?void 0:K.value;if((q==null?void 0:q.confirmationStatus)==="finalized"||(q==null?void 0:q.confirmationStatus)==="confirmed"){console.log(`[Scheduler]  Transaction verified as successful: ${te}`),A=te,i("Swap",`Scheduled: Swapped ${B.amount} ${B.inputToken} -> ${B.outputToken}`,te),o(M=>{const _=M.map(Y=>Y.id===j.id?{...Y,status:"completed",lastExecuted:Date.now(),result:`Success: ${te}`}:Y);return Ae.setItem(Ae.getUserKey("agent_scheduled_tasks"),JSON.stringify(_)),_}),n(`Task ${String(j.id).slice(0,4)} completed: ${te.slice(0,8)}...`),r(t.publicKey);continue}else{if(q!=null&&q.err)throw console.error("[Scheduler]  Transaction failed on-chain:",q.err),new Error(`Transaction failed: ${JSON.stringify(q.err)}`);console.warn(`[Scheduler]   Transaction status unknown. Signature: ${te}`),o(M=>{const _=M.map(Y=>Y.id===j.id?{...Y,status:"completed",lastExecuted:Date.now(),result:`Warning: Status unknown - verify manually: ${te}`}:Y);return Ae.setItem(Ae.getUserKey("agent_scheduled_tasks"),JSON.stringify(_)),_}),n(`Task ${String(j.id).slice(0,4)} - verify: ${te.slice(0,8)}...`),r(t.publicKey);continue}}catch(K){console.error("[Scheduler]   Failed to verify transaction:",K)}}throw G}}else if(j.type==="TRANSFER"){if(console.log(`[Scheduler]  Transferring ${B.amount} tokens to Owner`),!t.ownerPublicKey)throw new Error("Owner wallet not connected");try{B.tokenMint==="So11111111111111111111111111111111111111112"?A=await Ts.transferSol(z,t.ownerPublicKey,B.amount):A=await Ts.transferToken(z,B.tokenMint,t.ownerPublicKey,B.amount,B.decimals||9),i("Transfer",`Scheduled: Sent ${B.amount} to Owner`,A)}catch(G){if((b=G.message)!=null&&b.includes("timeout")||G.isTimeout){console.warn("[Scheduler]   Transfer confirmation timeout. Verifying transaction status...");const te=G.signature;if(te)try{const K=await Ts.connection.getSignatureStatus(te),q=K==null?void 0:K.value;if((q==null?void 0:q.confirmationStatus)==="finalized"||(q==null?void 0:q.confirmationStatus)==="confirmed"){console.log(`[Scheduler]  Transaction verified as successful: ${te}`),A=te,i("Transfer",`Scheduled: Sent ${B.amount} to Owner`,te),o(M=>{const _=M.map(Y=>Y.id===j.id?{...Y,status:"completed",lastExecuted:Date.now(),result:`Success: ${te}`}:Y);return Ae.setItem(Ae.getUserKey("agent_scheduled_tasks"),JSON.stringify(_)),_}),n(`Task ${String(j.id).slice(0,4)} completed: ${te.slice(0,8)}...`),r(t.publicKey);continue}else{if(q!=null&&q.err)throw console.error("[Scheduler]  Transaction failed on-chain:",q.err),new Error(`Transaction failed: ${JSON.stringify(q.err)}`);console.warn(`[Scheduler]   Transaction status unknown. Signature: ${te}`),o(M=>{const _=M.map(Y=>Y.id===j.id?{...Y,status:"completed",lastExecuted:Date.now(),result:`Warning: Status unknown - verify manually: ${te}`}:Y);return Ae.setItem(Ae.getUserKey("agent_scheduled_tasks"),JSON.stringify(_)),_}),n(`Task ${String(j.id).slice(0,4)} - verify: ${te.slice(0,8)}...`),r(t.publicKey);continue}}catch(K){console.error("[Scheduler]   Failed to verify transaction:",K)}}throw G}}else if(j.type==="ALERT")console.log(`[Scheduler]  Alert triggered for task ${String(j.id).slice(0,6)}`),A="ALERT_TRIGGERED",n(` ALERT: ${(E=j.condition)==null?void 0:E.indicator.toUpperCase()} ${(C=j.condition)==null?void 0:C.operator} ${(k=j.condition)==null?void 0:k.value}`);else if(j.type==="HL_ORDER"){if(console.log(`[Scheduler]  Executing Hyperliquid Order: ${B.side} ${B.size} ${B.coin}`),!t.hlEncryptedPrivateKey)throw new Error("Hyperliquid Vault not available");const G=await or.decrypt(t.hlEncryptedPrivateKey,e),te=zt.getWalletFromPrivateKey(G);B.leverage&&B.leverage!==1&&await Vn.updateLeverage(te,B.coin,B.leverage,!1);const K=B.isBuy!==void 0?B.isBuy:B.side==="B";let q=B.size;if(q==null&&B.usdcAmount){console.log(`[Scheduler]  Calculating size for ${B.usdcAmount} USDC of ${B.coin}...`);try{let oe=B.price;if(!oe){const ue=await zt.getMarketData(B.coin),le=parseFloat(ue.levels[1][0].px),Ie=parseFloat(ue.levels[0][0].px);oe=K?le:Ie,console.log(`[Scheduler]   Current Price for ${B.coin}: ${oe}`)}if(!oe||oe===0)throw new Error("Could not determine price for size calculation");const Ee=await zt.getAssetDecimals(B.coin),ce=B.usdcAmount/oe,me=Math.pow(10,Ee);q=Math.floor(ce*me)/me,console.log(`[Scheduler]  Calculated Size: ${q} ${B.coin} (Decimals: ${Ee})`)}catch(oe){throw console.error("[Scheduler]  Error calculating size:",oe),new Error(`Failed to calculate order size: ${oe.message}`)}}if(!q||q<=0)throw new Error(`Invalid order size: ${q}`);let M=B.orderType||"limit",_=B.price;const Y=await zt.getAssetDecimals(B.coin),X=Math.max(0,6-Y);if(M==="market"){console.log("[Scheduler]  Converting Market Order to Limit IOC with slippage...");const oe=await zt.getMarketData(B.coin),Ee=parseFloat(oe.levels[0][0].px),ce=parseFloat(oe.levels[1][0].px),me=K?ce:Ee,ue=.05;let le=K?me*(1+ue):me*(1-ue),Ie=parseFloat(le.toFixed(X));Ie=parseFloat(Ie.toPrecision(5)),_=parseFloat(Ie.toFixed(X)),M="ioc",console.log(`[Scheduler]   Market -> IOC: Base ${me} -> Slippage ${_}`)}else if(_){let oe=parseFloat(_.toFixed(X));oe=parseFloat(oe.toPrecision(5)),_=parseFloat(oe.toFixed(X)),console.log(`[Scheduler]   Limit price rounded: ${B.price} -> ${_} (maxDecimals=${X})`)}const re=await Vn.createOrder(te,B.coin,K,q,_,{orderType:M,reduceOnly:B.reduceOnly||!1,stopLoss:B.stopLoss,takeProfit:B.takeProfit});if(re.status==="ok"){const oe=(R=(U=(O=re.response)==null?void 0:O.data)==null?void 0:U.statuses)==null?void 0:R[0];if(oe!=null&&oe.error)throw new Error(`HL Order Error: ${oe.error}`);A=`HL_ORDER:${(($=oe==null?void 0:oe.filled)==null?void 0:$.oid)||((V=oe==null?void 0:oe.resting)==null?void 0:V.oid)||"placed"}`,i("HL Order",`Placed ${B.side} ${B.size} ${B.coin} @ ${B.price}`,A)}else throw new Error(`HL Order Failed: ${JSON.stringify(re)}`)}o(G=>{const te=G.map(K=>K.id===j.id?{...K,status:"completed",lastExecuted:Date.now(),result:`Success: ${A}`}:K);return Ae.setItem(Ae.getUserKey("agent_scheduled_tasks"),JSON.stringify(te)),te}),console.log(`[Scheduler]  Task ${String(j.id).slice(0,6)} completed! TX: ${A.slice(0,12)}...`),n(`Task ${String(j.id).slice(0,4)} executed: ${A.slice(0,8)}...`),r(t.publicKey)}catch(B){console.error(`[Scheduler]  Task ${j.id} failed:`,B),o(A=>{const I=A.map(D=>D.id===j.id?{...D,status:"failed",lastExecuted:Date.now(),result:B.message}:D);return Ae.setItem(Ae.getUserKey("agent_scheduled_tasks"),JSON.stringify(I)),I}),n(`Task ${String(j.id).slice(0,4)} failed: ${B.message}`)}}}};return c.current=u,Da.start(D3,1e4,()=>{c.current&&c.current()}),u(),()=>{console.log("[Scheduler]  Stopping scheduler loop"),Da.stop(D3)}},[t.isUnlocked,s]),{scheduledTasks:s,setScheduledTasks:o}};var Xht={};const Qht="agent_conversation_",Zht="agent_conversations_metadata";class td{static getConversationKey(e){return Ae.getUserKey(`${Qht}${e}`)}static getMetadataKey(){return Ae.getUserKey(Zht)}static async saveConversation(e,n){if(!Xht.TEST&&!n)throw new Error("Password required for encryption");try{const r=await or.encrypt(JSON.stringify(e),n);await Ae.setItem(this.getConversationKey(e.id),r);const i={id:e.id,title:e.title,lastMessage:e.lastMessage,timestamp:e.timestamp};await this.updateMetadata(i)}catch(r){throw console.error("Failed to save conversation:",r),r}}static async updateMetadata(e){const n=await Ae.getItem(this.getMetadataKey());let r=n?JSON.parse(n):[];if(r=r.filter(i=>i.id!==e.id),r.unshift(e),r.length>50){const i=r.pop();i&&await Ae.removeItem(this.getConversationKey(i.id))}await Ae.setItem(this.getMetadataKey(),JSON.stringify(r))}static async getHistory(){const e=this.getMetadataKey();console.log("[ConversationService] Loading history from key:",e);const n=await Ae.getItem(e);if(console.log("[ConversationService] Raw data:",n?`${n.length} characters`:"null"),!n)return[];try{const r=JSON.parse(n);return console.log("[ConversationService] Parsed conversations:",Array.isArray(r)?r.length:"not array"),Array.isArray(r)?r:[]}catch(r){return console.error("Failed to parse conversation history:",r),[]}}static async loadConversation(e,n){const r=await Ae.getItem(this.getConversationKey(e));if(!r)return null;try{const i=await or.decrypt(r,n);return JSON.parse(i)}catch(i){throw console.error(`Failed to load conversation ${e}:`,i),new Error("Failed to decrypt conversation. Wrong password?")}}static async deleteConversation(e){await Ae.removeItem(this.getConversationKey(e));const n=await Ae.getItem(this.getMetadataKey());if(n){let r=JSON.parse(n);r=r.filter(i=>i.id!==e),await Ae.setItem(this.getMetadataKey(),JSON.stringify(r))}}static generateTitle(e){return e?e.length>30?e.substring(0,30)+"...":e:"New Conversation"}}const ept=(t,e,n,r,i,s,o)=>{const[a,l]=T.useState([]),[c,u]=T.useState(null),[f,m]=T.useState(""),[g,v]=T.useState(!1),[x,b]=T.useState(""),E=T.useRef(null);T.useEffect(()=>{E.current&&(E.current.scrollTop=E.current.scrollHeight)},[]),T.useEffect(()=>{E.current&&(E.current.scrollTop=E.current.scrollHeight)},[a]);const C=()=>{var R,$;try{const V=sm.getApiKey();return V||(($=(R=window.process)==null?void 0:R.env)==null?void 0:$.GEMINI_API_KEY)}catch{return}};return{messages:a,setMessages:l,activeConversationId:c,loadConversation:R=>{l(R.messages),u(R.id)},startNewConversation:()=>{l([]),u(null),m(""),v(!1),b("")},inputMessage:f,setInputMessage:m,isAiProcessing:g,aiStatus:x,scrollRef:E,handleSendMessage:async()=>{var j,F,W,H,B,A,I,D,z;if(!f.trim())return;const R=C();if(!R){r("System: API Key not found in environment.");return}const $={id:Date.now().toString(),role:"user",content:f,timestamp:Date.now()};let V=c;V||(V=Date.now().toString(),u(V)),l(G=>{const te=[...G,$];if(t.isUnlocked&&e&&V){G.length===0&&td.generateTitle($.content);const K={id:V,title:G.length===0?td.generateTitle($.content):"Conversation",lastMessage:$.content,timestamp:Date.now(),messages:te};td.saveConversation(K,e).catch(q=>console.error("Auto-save failed",q))}return te}),m(""),v(!0),b("Thinking...");try{sm.initialize(R);const G=ft.getSnapshot(),te=G.logs.slice(0,5).map(ce=>`[${new Date(ce.timestamp).toLocaleTimeString()}] ${ce.type}: ${ce.message}`).join(`
`);let K="",q="";if(t.hlPublicKey)try{const ce=await Vn.getUserFills(t.hlPublicKey);if(ce&&Array.isArray(ce)&&ce.length>0){let me=0,ue=0,le=0,Ie=0,Ne=0;ce.forEach(We=>{const At=parseFloat(We.closedPnl||"0"),ot=parseFloat(We.fee||"0");me+=At-ot,Ne+=ot,Ie+=parseFloat(We.px)*parseFloat(We.sz),At>0?ue++:At<0&&le++});const $e=ue+le,Ze=$e>0?ue/$e*100:0;K=`
          **[PERFORMANCE METRICS - Trading Results]**
          - Total Profit/Loss: ${me>=0?"+":""}$${me.toFixed(2)} USD
          - Win Rate: ${Ze.toFixed(1)}% (${ue} wins / ${le} losses)
          - Total Trades: ${ce.length}
          - Total Volume: $${Ie.toFixed(2)} USD
          - Total Fees Paid: $${Ne.toFixed(2)} USD`,q=`
          **[RECENT TRADES - Last 5 Fills]**
${[...ce].sort((We,At)=>At.time-We.time).slice(0,5).map(We=>{const At=parseFloat(We.closedPnl||"0"),ot=At!==0?` | PnL: ${At>=0?"+":""}$${At.toFixed(2)}`:"";return`          - ${We.coin} ${We.side==="B"?"BUY":"SELL"} ${We.sz} @ $${parseFloat(We.px).toFixed(2)}${ot} (${new Date(We.time).toLocaleString()})`}).join(`
`)}`}else K=`
          **[PERFORMANCE METRICS]**
          - No trading history yet. Dealer has not executed any trades.`}catch(ce){console.warn("[Agent] Could not fetch dealer performance:",ce),K=`
          **[PERFORMANCE METRICS]**
          - Unable to fetch trading history at this moment.`}else K=`
          **[PERFORMANCE METRICS]**
          - Hyperliquid wallet not connected. Cannot fetch trading data.`;const M=`
          **HYPERLIQUID DEALER CONTEXT (AUTONOMOUS TRADING ENGINE):**
          You have FULL access to the Hyperliquid Dealer's state, performance, and trading history.
          
          **[STATUS DATA - Current State]**
          - Dealer Status: ${G.isOn?" ACTIVE":" INACTIVE"}
          - Currently Analyzing: ${G.isAnalyzing?"Yes":"No"}
          - Current Task: ${G.currentTask||"Idle"}
          - Current Signal: ${G.currentSignal||"No signal"}
          - Trend Assessment: ${G.trendAssessment}
          - Current Exposure: $${G.currentExposure.toFixed(2)} USDC
          ${K}
          ${q}
          
          **[CONFIGURATION DATA - Only mention when user asks to CHANGE settings]**
          - Max Leverage: ${G.settings.maxLeverage}x
          - Max Position Size: $${G.settings.maxPositionSizeUSDC} USDC
          - Max Open Positions: ${G.settings.maxOpenPositions}
          - Trading Pairs: ${G.settings.tradingPairs.join(", ")}
          - Check Interval: ${G.settings.checkIntervalSeconds}s
          - Bankroll: ${G.settings.bankrollType} (${G.settings.bankrollType==="MANUAL"?"$"+G.settings.manualBankroll:"All Available"})
          
          **[ACTIVITY LOGS - Only show if user asks about activity/history]**
          ${te||"No recent activity"}
          
          **RESPONSE GUIDELINES (CRITICAL):**
          
          1. **STATUS QUESTIONS** (e.g., "What is the dealer doing?", "O que o dealer est fazendo?"):
             - Show: Status (active/inactive), current task, current signal
             - Keep response SHORT and concise (2-3 sentences max)
             - DO NOT list all settings or metrics unless asked
          
          2. **PERFORMANCE/RESULTS QUESTIONS** (e.g., "How much profit?", "Quanto lucrou?", "What's my win rate?"):
             - Use the PERFORMANCE METRICS data above
             - Answer specifically what was asked
             - You CAN mention recent trades if relevant
          
          3. **CONFIGURATION CHANGE REQUESTS** (e.g., "I want to change leverage", "Quero mudar os pares"):
             - Show the relevant current setting
             - Include the configuration navigation button:
             
             [ Go to Dealer Configuration](nav://DEALER_CONFIG)
          
          4. **TRADE REASONING QUESTIONS** (e.g., "Why did you open BTC?", "Por que o Dealer entrou em ETH?", "Explique essa operao"):
             - Use the 'getDealerTradeHistory' tool to fetch detailed reasoning
             - The tool returns the AI's analysis and confidence for each trade
             - Explain the reasoning in a conversational way
             - Include entry price, size, and confidence level
          
          5. **OPEN POSITIONS QUESTIONS** (e.g., "Quais posies esto abertas?", "What positions are open?", "Show my positions"):
             - The Hyperliquid Dealer operates ONLY on Hyperliquid - so if user asks about Dealer positions, use 'getHLBalance'
             - If the conversation context is about Dealer (trading, positions, anlise), assume Hyperliquid - DO NOT ask which network
             - Use the 'getHLBalance' tool to fetch LIVE positions from Hyperliquid
             - This shows CURRENT open positions with entry price, size, and unrealized PnL
             - Only ask "Solana ou Hyperliquid?" if there's no context at all about Dealer
             
             **CRITICAL - DEALER POSITION QUERIES:**
             When user asks ANY of these, IMMEDIATELY call 'getHLBalance':
             - "posies do dealer", "dealer positions"
             - "quais posies", "what positions" (when dealer context exists)
             - "posies abertas", "open positions" (when dealer context exists)
             - "quais?" as follow-up to a position question
             DO NOT respond with just text - CALL THE TOOL!
          
          6. **SPECIFIC QUESTIONS**: Answer ONLY what was asked. Don't dump all data.
          `,_=`
          You are Vault Operator, an autonomous DeFi Agent managing TWO separate vaults: Solana and Hyperliquid.
          Your name is Vault Operator. You also respond to just "Operator". When users ask "who are you" or similar questions, introduce yourself as Vault Operator.
          
          **YOUR IDENTITY:**
          - Solana Vault Address: ${t.publicKey||"UNKNOWN"}
          - Hyperliquid Vault Address: ${t.hlPublicKey||"NOT CREATED"}
          - Your Owner's Wallet: ${t.ownerPublicKey||"NOT CONNECTED"}
          - Current Vault SOL Balance: ${t.solBalance.toFixed(4)} SOL
          
          ${M}
          
          **NETWORK CONTEXT AWARENESS (CRITICAL):**
          You manage TWO separate vaults on different networks:
          1. **Solana Vault** - for SOL and SPL tokens (USDC, RAY, etc.)
          2. **Hyperliquid Vault** - for perpetual trading with USDC on Hyperliquid Testnet
          
          **KEYWORD RECOGNITION:**
          - "hype", "hyperliquid", "hl" = Hyperliquid operations  call 'getHLBalance' for positions/balance
          - "sol", "solana" = Solana operations  call 'getVaultBalance' for balance
          - "dealer", "hyperliquid dealer", "trading bot", "autonomous trading" = Hyperliquid Dealer questions (implies Hyperliquid)
          
          **CRITICAL - NETWORK vs COIN DISAMBIGUATION:**
          "Solana" and "Hyperliquid" are BOTH network names AND coin names!
          
          CONTEXT CLUES FOR NETWORK:
          - "saldo", "balance", "posies", "positions", "carteira", "wallet"  asking about NETWORK
          - "enviar", "transferir", "withdraw", "sacar"  asking about NETWORK
          - Following a question about "which network?"  answering about NETWORK
          
          CONTEXT CLUES FOR COIN/TOKEN:
          - "preo", "price", "comprar", "buy", "vender", "sell"  asking about COIN
          - "anlise", "analyze", "RSI", "indicador"  asking about COIN
          - "abrir posio", "open position", "long", "short"  trading the COIN
          
          EXAMPLES:
          - "Qual meu saldo no Hyperliquid?"  NETWORK (getHLBalance)
          - "Qual o preo do HYPE?"  COIN (getMarketPrice with HYPEUSDT)
          - "Qual meu saldo de SOL?"  COIN balance on Solana network (getVaultBalance)
          - "Check Solana network"  NETWORK (getVaultBalance without token)
          - "Buy SOL on Hyperliquid"  Trading SOL COIN on HL network
          
          **CRITICAL - NETWORK RESPONSE HANDLING:**
          If the previous message was a question about which network and user responds with:
          - "hype", "hyperliquid", "hl"  IMMEDIATELY call 'getHLBalance' tool - DO NOT just acknowledge
          - "sol", "solana"  IMMEDIATELY call 'getVaultBalance' tool - DO NOT just acknowledge
          - The user is answering your question, so EXECUTE the action right away
          
          **TRANSFER DISAMBIGUATION (CRITICAL):**
          When a user requests a transfer (e.g., "send 1 USDC", "transfer USDC to me"):
          1. Check the conversation context:
             - If they just checked Hyperliquid balance  likely Hyperliquid
             - If they just checked Solana balance  likely Solana
          2. If context is unclear, ASK: "Do you want to withdraw from Solana or Hyperliquid?"
          3. NEVER assume the network - ALWAYS verify first
          
          **SOLANA TRANSFERS:**
          - Use 'transferToken' for SPL tokens
          - Use 'withdrawSol' for SOL
          - Destination: Owner's Solana wallet
          - Network: Solana
          
          **HYPERLIQUID WITHDRAWALS:**
          - Use 'withdrawFromHL' for USDC withdrawals
          - Network: Hyperliquid Testnet
          - Fee: $1 USDC (fixed)
          - Time: ~5 minutes
          - Destination: Owner's wallet on Hyperliquid Testnet
          - Minimum: Amount must be > $1 to cover fee
          
          **BEFORE ANY TRANSFER, YOU MUST:**
          1. Verify the correct network (Solana vs Hyperliquid)
          2. Check the balance on that specific network
          3. Confirm the user has sufficient funds (including fees)
          4. Use the correct tool for that network
          
          **YOUR PERMISSIONS (CRITICAL):**
          - You ARE AUTHORIZED to Withdraw SOL. Use 'withdrawSol'.
          - You ARE AUTHORIZED to Transfer Tokens (SPL/NFTs) to the Owner. Use 'transferToken'.
          - You ARE AUTHORIZED to Withdraw USDC from Hyperliquid. Use 'withdrawFromHL'.
          - You ARE AUTHORIZED to Swap tokens. Use 'executeSwap'.
          - You CANNOT transfer to any other address than the Owner's Wallet.
          
          **BALANCE CHECKING:**
          - When a user asks for their balance, ALWAYS ask if they want to see:
            1. All balances (SOL + all tokens)
            2. A specific token balance
            3. Hyperliquid balance
          - Do NOT assume they only want SOL balance.
          - The vault can hold SOL and many different SPL tokens.
          - If they specify a token, use the 'getVaultBalance' tool with the token parameter.
          - If they want all balances, use 'getVaultBalance' without the token parameter.
          - For Hyperliquid, use 'getHLBalance'.
          
          **TRANSFER REQUESTS (CRITICAL):**
          - When a user says "send", "transfer", or "withdraw" followed by an amount/token, they want to EXECUTE A TRANSFER IMMEDIATELY.
          - Examples of TRANSFER requests:
            * "send my all balance of [token] to me"
            * "transfer 10 USDC to me"
            * "withdraw all my SOL"
            * "send 5 [token mint address]"
            * "2 usdc" (after context is established)
          
          **EXECUTION FLOW:**
          1. Verify which network (Solana or Hyperliquid) from context or keywords
          2. If amount > $1 and network is Hyperliquid, IMMEDIATELY call 'withdrawFromHL'
          3. If network is Solana, call 'transferToken' or 'withdrawSol'
          
          **CRITICAL - DO NOT OVER-VERIFY:**
          - Do NOT check balance before executing withdrawal unless user explicitly asks
          - Do NOT ask for confirmation after user has specified amount and network
          - The user saying "2 usdc" after establishing Hyperliquid context means EXECUTE NOW
          - ALWAYS transfer to the Owner's wallet (you cannot send to any other address)
          
          **TOKEN HANDLING:**
          - If the user uses a ticker (like 'JUP', 'WIF', 'BONK') that is NOT in your list (SOL, USDC, RAY), YOU MUST ASK FOR THE MINT ADDRESS.
          - Say: "I don't recognize that ticker. Please provide the Token Mint Address."
          
          **SOL vs SPL TOKENS (CRITICAL):**
          - SOL is the NATIVE token of Solana, NOT an SPL token
          - When transferring SOL, use 'withdrawSol' tool (NOT 'transferToken')
          - SOL mint address: So11111111111111111111111111111111111111112
          - For SPL tokens (USDC, USDT, RAY, etc.), use 'transferToken' with the token's mint address
          - If user says "send SOL" or "transfer SOL", use 'withdrawSol'
          - If user provides a mint address that is NOT So11111111111111111111111111111111111111112, it's an SPL token
          
          **MARKET DATA & INDICATORS:**
          - You have access to real-time market data and technical indicators via TradingView.
          - Available indicators: RSI, MACD, EMA, SMA, Stochastic, Price
          - You can fetch current prices, OHLCV data, and indicator values for any trading symbol.
          - Use 'getMarketPrice' for current price, 'getIndicator' for technical indicators.
          - Use 'getTradingViewSummary' for overall market sentiment.
          
          **ASSET ANALYSIS (CRITICAL - When user asks about an asset):**
          When user asks something like:
          - "O que me diz do BTC?" / "What about BTC?"
          - "Como est o ETH?" / "How's ETH doing?"
          - "Analisa o SOL pra mim" / "Analyze SOL for me"
          - "What's your take on [asset]?"
          
          You MUST provide a COMPREHENSIVE ANALYSIS by:
          1. Call 'getMarketPrice' to get current price
          2. Call 'getIndicator' with indicator='rsi' and timeframe='60' (1h)
          3. Call 'getTradingViewSummary' to get overall sentiment
          
           **CRITICAL - DATA INTEGRITY (NEVER VIOLATE THIS):**
          - You MUST use ONLY the EXACT values returned by the tool calls
          - NEVER invent, estimate, or hallucinate numbers
          - If the tool returns price=89560.56, you say $89,560.56 - NOT any other number
          - If the tool returns RSI=47.67, you say 47.67 - NOT any other number
          - If the tool returns NEUTRAL with (Buy:0 Sell:0 Neutral:1), say EXACTLY that
          - FABRICATING DATA IS A CRITICAL FAILURE - This destroys user trust
          
          **After receiving tool results, format your response like this:**
          
          " **BTC est a $[EXACT PRICE FROM TOOL]** no momento.
          
          O RSI de 1h est em **[EXACT RSI FROM TOOL]** ([interpret based on value]).
          
          O sentimento do TradingView  **[EXACT RECOMMENDATION FROM TOOL]** ([EXACT buy/sell/neutral counts FROM TOOL]).
          
          **Minha leitura:** [Your interpretation based on the REAL data above]"
          
          **Interpretation Guide (use these to interpret the REAL values):**
          - RSI < 30 = Sobrevendido (oversold) - possvel reverso para alta
          - RSI 30-50 = Tendncia de baixa / fraqueza
          - RSI 50-70 = Neutro a levemente bullish
          - RSI > 70 = Sobrecomprado (overbought) - possvel correo
          
          **TradingView Summary meanings:**
          - STRONG_BUY = Sentimento muito bullish
          - BUY = Sentimento positivo
          - NEUTRAL = Mercado indeciso
          - SELL = Sentimento negativo
          - STRONG_SELL = Sentimento muito bearish
          
          **REMEMBER:** Your interpretation ("Minha leitura") should be based on the ACTUAL numbers you received. If RSI is 47.67, that's in the 30-50 range (slight weakness/neutral). If sentiment is NEUTRAL, say it's neutral - don't make up "COMPRA".
          
          **HYPERLIQUID TESTNET TRADING:**
          - You can trade perpetual futures on Hyperliquid Testnet!
          - You have a separate Hyperliquid Vault Wallet with USDC balance.
          
          **IMMEDIATE EXECUTION (CRITICAL):**
          When the user provides all necessary info for an order, EXECUTE IMMEDIATELY:
          - For MARKET orders with USDC amount: Call 'createHLOrder' directly with usdcAmount parameter
          - For MARKET orders with size: Call 'createHLOrder' directly with size parameter
          - DO NOT fetch market data first - the order handler calculates price internally
          - DO NOT ask for confirmation if user already specified the action
          
          **EXAMPLE - IMMEDIATE EXECUTION:**
          User: "short BTC with 5x leverage, 5% profit, 1% stop, using 30 USDC"
           All info provided! Call createHLOrder immediately:
            - coin: "BTC"
            - isBuy: false (SHORT)
            - usdcAmount: 30 (NOT size - let handler calculate)
            - orderType: "market"
            - leverage: 5
            - stopLoss: 1 (percentage - will be converted automatically)
            - takeProfit: 5 (percentage - will be converted automatically)
          
          **ONLY ASK if missing critical info:**
          - Direction not specified (LONG or SHORT?)
          - Amount not specified (how much USDC or size?)
          
          **TP/SL as PERCENTAGES:**
          - If user says "5% profit"  pass takeProfit: 5
          - If user says "1% stop"  pass stopLoss: 1
          - The handler converts percentages to absolute prices automatically
          
          **AVAILABLE HYPERLIQUID TOOLS:**
          - 'getHLBalance' - Check USDC balance and open positions
          - 'getHLMarketData' - Get current price and orderbook (NOT needed for orders)
          - 'createHLOrder' - Place a new order (LONG or SHORT)
          - 'updateHLLeverage' - Change leverage for an asset (automatic with createHLOrder)
          - 'closeHLPosition' - Close an open position
          - 'cancelHLOrder' - Cancel a pending order
          - 'withdrawFromHL' - Withdraw USDC to Owner's wallet on Hyperliquid Testnet

          
          **TASK SCHEDULING (IMPORTANT):**
          You can schedule tasks in TWO ways:
          
          1. **TIME-BASED SCHEDULING:**
             - Provide 'delayMinutes' parameter
             - Examples:
               * User: "swap 0.1 SOL for USDC in 5 minutes"
               * You call: scheduleTask(taskType="SWAP", inputToken="SOL", outputToken="USDC", amount=0.1, delayMinutes=5)
          
          2. **CONDITION-BASED SCHEDULING:**
             - Provide 'conditionIndicator', 'conditionSymbol', 'conditionOperator', 'conditionValue', and 'conditionTimeframe'
             - **CRITICAL**: 'conditionTimeframe' is REQUIRED. If the user does not provide it, you MUST ASK.
             
             - Examples:
               * User: "swap 0.1 SOL to USDC when RSI of BTCUSDT is less than 30"
               * You: "What timeframe should I use for the RSI? (e.g., 15m, 1h, 4h, 1d)"
               * User: "1 hour"
               * You call: scheduleTask(taskType="SWAP", inputToken="SOL", outputToken="USDC", amount=0.1, conditionIndicator="rsi", conditionSymbol="BTCUSDT", conditionOperator="<", conditionValue=30, conditionTimeframe="60")
               
               * User (PT): "se o BTC estiver com o RSI maior ou igual a 50 me transfira 0.1 SOL"
               * You: "Qual o perodo (timeframe) para o RSI? (ex: 1h, 4h, Dirio)"
               * User: "Dirio"
               * You call: scheduleTask(taskType="TRANSFER", amount=0.1, inputToken="SOL", conditionIndicator="rsi", conditionSymbol="BTC", conditionOperator=">=", conditionValue=50, conditionTimeframe="D")
               
               * User (PT): "me avise se o RSI do BTC cair abaixo de 30"
               * You: "Em qual tempo grfico? (15m, 1h, 4h...)"
          
          **HYPERLIQUID ORDER SCHEDULING:**
          You can schedule Hyperliquid orders based on market conditions!
          
          - Examples:
            * User: "Open LONG 0.001 BTC at 90k when RSI daily < 30, stop 88k, profit 99k, leverage 10x"
            * You ask (if timeframe not specified): "What timeframe for RSI?"
            * User: "Daily"
            * You call: scheduleTask(
                taskType="HL_ORDER",
                coin="BTC",
                isBuy=true,
                size=0.001,
                orderType="limit",
                price=90000,
                leverage=10,
                stopLoss=88000,
                takeProfit=99000,
                conditionIndicator="rsi",
                conditionSymbol="BTCUSDT",
                conditionOperator="<",
                conditionValue=30,
                conditionTimeframe="D"
              )
            
            * User (PT): "abrir short de 0.5 ETH quando o MACD cruzar abaixo de 0"
            * You: "Qual o timeframe para o MACD? E qual o preo limite ou prefere ordem a mercado?"
            * User: "4 horas, a mercado"
            * You call: scheduleTask(
                taskType="HL_ORDER",
                coin="ETH",
                isBuy=false,
                size=0.5,
                orderType="market",
                conditionIndicator="macd",
                conditionSymbol="ETHUSDT",
                conditionOperator="<",
                conditionValue=0,
                conditionTimeframe="240"
              )
          
          **CRITICAL - HL_ORDER REQUIREMENTS:**
          You MUST ask for ALL required parameters:
          - Coin (asset symbol)
          - Direction (LONG/SHORT or BUY/SELL)
          - Size (amount)
          - Order Type (LIMIT or MARKET)
          - Price (required for LIMIT orders)
          - Leverage (default 1x if not specified)
          - Stop Loss (optional, ask if user wants)
          - Take Profit (optional, ask if user wants)
          - Condition details (indicator, symbol, operator, value, timeframe)
          
          **SUPPORTED PARAMETERS:**
          - taskType: "SWAP", "TRANSFER", "ALERT", or "HL_ORDER"
          - For SWAP: inputToken, outputToken, amount
          - For TRANSFER: inputToken (e.g. "SOL"), amount
          - For ALERT: No financial parameters needed
          - For HL_ORDER: coin, isBuy, size, orderType, price (for limit), leverage, stopLoss, takeProfit
          - For time-based: delayMinutes
          - For condition-based: conditionIndicator, conditionSymbol, conditionOperator, conditionValue, conditionTimeframe (REQUIRED - ASK IF MISSING)
          
          **INDICATORS:** rsi, macd, ema, sma, stoch, price
          **OPERATORS:** <, >, <=, >=, ==
          **TIMEFRAMES:** 1, 5, 15, 60, 240, D (daily), W (weekly)
          
          **CRITICAL - MISSING INFORMATION:**
          - If the user's request is MISSING required information (ESPECIALLY TIMEFRAME), you MUST ask for it.
          - DO NOT call scheduleTask with incomplete parameters.
          - DO NOT assume a default timeframe like 'D'. ALWAYS ASK.
          - Examples of what to ask:
            * "Para qual smbolo voc quer monitorar o RSI?" (Which symbol?)
            * "Qual o valor limite do RSI?" (What threshold?)
            * "Em qual perodo grfico (1h, 4h, Dirio)?" (Which timeframe?)
            * "Quanto voc quer transferir?" (How much?)
            * "Qual token voc quer transferir?" (Which token?)
          
          **EXECUTION:**
          - When swapping, confirm the action.
          - When scheduling with conditions, confirm the condition that will trigger the task.
          - Always respond in the same language the user is using (English or Portuguese).
        `,Y=await sm.sendOperatorMessage(a,$.content,_),X=Y.functionCalls;let re=[];if(X&&X.length>0)for(const ce of X){const me=ce.name,ue=ce.args;if(me==="getVaultBalance"){const le=ue.token;if(le){const Ie=o(le);if(le.toUpperCase()==="SOL"||Ie==="So11111111111111111111111111111111111111112"){const Ne=t.solBalance.toFixed(4);re.push({type:"success",title:"Balance Check",details:`SOL Balance: ${Ne} SOL (~$${(t.solBalance*gc.SOL).toFixed(2)})`})}else{const Ne=(j=t.assets)==null?void 0:j.find($e=>$e.mint===Ie);if(Ne){const $e=(parseFloat(Ne.amount)/Math.pow(10,Ne.decimals)).toFixed(4),Ze=Ne.symbol!=="UNKNOWN"?` (~$${(parseFloat(Ne.amount)/Math.pow(10,Ne.decimals)*(gc[Ne.symbol]||0)).toFixed(2)})`:"";re.push({type:"success",title:"Balance Check",details:`${Ne.name} (${Ne.symbol}): ${$e}${Ze}`})}else re.push({type:"error",title:"Token Not Found",details:`No balance found for token: ${le}`})}}else{const Ie=t.solBalance.toFixed(4),Ne=(t.solBalance*gc.SOL).toFixed(2);let $e=`SOL: ${Ie} SOL (~$${Ne})`;const Ze=(t.assets||[]).filter(Ye=>!Ye.isNft);Ze.length>0&&($e+=`

Tokens:`,Ze.forEach(Ye=>{const We=(parseFloat(Ye.amount)/Math.pow(10,Ye.decimals)).toFixed(4),At=Ye.symbol!=="UNKNOWN"?` (~$${(parseFloat(Ye.amount)/Math.pow(10,Ye.decimals)*(gc[Ye.symbol]||0)).toFixed(2)})`:"";$e+=`
 ${Ye.name} (${Ye.symbol}): ${We}${At}`})),re.push({type:"success",title:"Balance Check",details:$e})}t.publicKey&&i(t.publicKey)}else if(me==="withdrawSol")if(b("Withdrawing Funds..."),!t.isUnlocked||!t.encryptedPrivateKey)re.push({type:"error",title:"Withdraw Failed",details:"Vault is locked."});else if(!t.ownerPublicKey)re.push({type:"error",title:"Withdraw Failed",details:"No Owner Wallet connected."});else try{const le=await or.decrypt(t.encryptedPrivateKey,e),Ie=Uint8Array.from(JSON.parse(le)),Ne=Xo.fromSecretKey(Ie),$e=await Ts.transferSol(Ne,t.ownerPublicKey,ue.amount);s("Transfer",`Withdrew ${ue.amount} SOL to Owner`,$e),re.push({type:"success",title:"Withdraw Executed",details:`Sent ${ue.amount} SOL to Owner`,tx:$e}),i(t.publicKey)}catch(le){re.push({type:"error",title:"Withdraw Error",details:le.message})}else if(me==="transferToken")if(b("Transferring Token..."),!t.isUnlocked||!t.encryptedPrivateKey)re.push({type:"error",title:"Transfer Failed",details:"Vault is locked."});else if(!t.ownerPublicKey)re.push({type:"error",title:"Transfer Failed",details:"No Owner Wallet connected."});else try{const le=await or.decrypt(t.encryptedPrivateKey,e),Ie=Uint8Array.from(JSON.parse(le)),Ne=Xo.fromSecretKey(Ie),$e=o(ue.tokenMint),Ze=(F=t.assets)==null?void 0:F.find(At=>At.mint===$e),Ye=Ze?Ze.decimals:9,We=await Ts.transferToken(Ne,$e,t.ownerPublicKey,ue.amount,Ye);s("Transfer",`Sent ${ue.amount} ${ue.tokenMint} to Owner`,We),re.push({type:"success",title:"Transfer Executed",details:`Sent ${ue.amount} of ${ue.tokenMint} to Owner`,tx:We}),i(t.publicKey)}catch(le){re.push({type:"error",title:"Transfer Error",details:le.message})}else if(me==="executeSwap")if(!t.isUnlocked||!t.encryptedPrivateKey)re.push({type:"error",title:"Swap Failed",details:"Vault is locked."});else try{const le=await or.decrypt(t.encryptedPrivateKey,e),Ie=Uint8Array.from(JSON.parse(le)),Ne=Xo.fromSecretKey(Ie),$e=o(ue.inputToken),Ze=o(ue.outputToken),Ye=await Ts.executeSwap(Ne,$e,Ze,ue.amount,We=>b(We));s("Swap",`Swapped ${ue.amount} ${ue.inputToken} -> ${ue.outputToken}`,Ye),re.push({type:"success",title:"Swap Executed",details:`Swapped ${ue.amount} ${ue.inputToken} for ${ue.outputToken}`,tx:Ye}),t.publicKey&&i(t.publicKey)}catch(le){(W=le.message)!=null&&W.includes("timeout")||(H=le.message)!=null&&H.includes("expired")?(console.warn("[Swap]   Swap confirmation timeout, but transaction may have succeeded. Check manually."),re.push({type:"success",title:"Swap Executed (Slow Confirmation)",details:"Transaction sent but confirmation is slow. Please verify on explorer.",tx:"Check Explorer"}),i(t.publicKey)):re.push({type:"error",title:"Swap Failed",details:le.message})}else if(me==="scheduleTask")try{console.log("[Scheduler]  Received scheduleTask call with args:",JSON.stringify(ue,null,2));let le,Ie;if(ue.conditionIndicator&&ue.conditionSymbol&&ue.conditionOperator&&ue.conditionValue!==void 0&&ue.conditionTimeframe){let Ye=ue.conditionIndicator.toLowerCase(),We=ue.conditionSymbol.toUpperCase(),At=ue.conditionTimeframe,ot=ue.conditionOperator,Bt=parseFloat(ue.conditionValue);We==="BTC"?We="BTCUSDT":We==="SOL"?We="SOLUSDT":We==="ETH"?We="ETHUSDT":!We.includes("USDT")&&!We.includes("USD")&&(We=`${We}USDT`),ot==="menor que"||ot==="less than"?ot="<":ot==="maior que"||ot==="greater than"?ot=">":ot==="menor ou igual a"||ot==="less than or equal to"?ot="<=":ot==="maior ou igual a"||ot==="greater than or equal to"?ot=">=":(ot==="igual a"||ot==="equal to"||ot==="equals")&&(ot="=="),Ie={symbol:We,indicator:Ye,operator:ot,value:Bt,timeframe:At},console.log("[Scheduler]  Condition-based task created:",Ie)}else if(ue.delayMinutes)le=Date.now()+ue.delayMinutes*60*1e3,console.log("[Scheduler]  Time-based task created: executes in",ue.delayMinutes,"minutes");else{console.error("[Scheduler]  Missing required parameters for scheduling"),re.push({type:"error",title:"Scheduling Failed",details:"Missing required parameters. Please provide either time delay or condition details."});continue}let Ne={};if(ue.taskType==="SWAP")Ne={inputToken:ue.inputToken,outputToken:ue.outputToken,amount:ue.amount};else if(ue.taskType==="TRANSFER"){let Ye=ue.inputToken;Ye==="SOL"||Ye==="sol"?Ye="So11111111111111111111111111111111111111112":Ye=o(Ye),Ne={amount:ue.amount,tokenMint:Ye}}else ue.taskType==="ALERT"?Ne={}:ue.taskType==="HL_ORDER"&&(Ne={coin:ue.coin,side:ue.isBuy?"B":"A",isBuy:ue.isBuy,size:ue.size,usdcAmount:ue.usdcAmount,price:ue.price,orderType:ue.orderType||"limit",leverage:ue.leverage||1,stopLoss:ue.stopLoss,takeProfit:ue.takeProfit,reduceOnly:ue.reduceOnly||!1});const $e={id:Date.now().toString(),type:ue.taskType,params:JSON.stringify(Ne),executeAt:le,condition:Ie,status:"active",createdAt:Date.now()};n(Ye=>{const We=[...Ye,$e];return Ae.setItem(Ae.getUserKey("agent_scheduled_tasks"),JSON.stringify(We)),We});let Ze="";if(Ie)Ze=`${ue.taskType} scheduled to execute when ${Ie.indicator.toUpperCase()} of ${Ie.symbol} (${Ie.timeframe}) ${Ie.operator} ${Ie.value}`;else if(le){const Ye=Math.round((le-Date.now())/1e3);Ze=`${ue.taskType} scheduled to execute in ${Ye} seconds`}re.push({type:"info",title:"Task Scheduled",details:Ze})}catch(le){console.error("[Scheduler] Error scheduling task:",le),re.push({type:"error",title:"Scheduling Failed",details:le.message})}else if(me==="getMarketPrice")try{b("Fetching Market Price...");const le=await fo.getMarketPrice(ue.symbol);re.push({type:"success",title:"Market Price",details:`${ue.symbol}: ${le.price} (${le.exchange})`})}catch(le){re.push({type:"error",title:"Market Data Error",details:le.message})}else if(me==="getOHLCV")try{b("Fetching OHLCV Data...");const le=await fo.getOHLCV(ue.symbol,ue.timeframe);re.push({type:"success",title:"OHLCV Data",details:`${ue.symbol} [${ue.timeframe||"60"}]: O:${le.open} H:${le.high} L:${le.low} C:${le.close} V:${le.volume}`})}catch(le){re.push({type:"error",title:"OHLCV Error",details:le.message})}else if(me==="getIndicator")try{b(`Calculating ${ue.indicator}...`);const le=await fo.getIndicator(ue.symbol,ue.indicator,ue.timeframe);let Ie=le.value;typeof le.value=="object"&&le.value!==null&&(Ie=JSON.stringify(le.value,null,2)),re.push({type:"success",title:"Technical Indicator",details:`${ue.symbol} ${le.indicator.toUpperCase()}: ${Ie}`})}catch(le){re.push({type:"error",title:"Indicator Error",details:le.message})}else if(me==="getTradingViewSummary")try{b("Fetching TradingView Summary...");const le=await fo.getTradingViewSummary(ue.symbol);re.push({type:"success",title:"TradingView Summary",details:`${ue.symbol}: ${le.recommendation} (Buy:${le.buy} Sell:${le.sell} Neutral:${le.neutral})`})}catch(le){re.push({type:"error",title:"Summary Error",details:le.message})}else if(me==="getHLBalance")try{if(!t.hlPublicKey)re.push({type:"error",title:"HL Error",details:"Hyperliquid Vault not created/unlocked."});else{b("Fetching HL Balance...");const le=await Vn.getUserState(t.hlPublicKey);console.log("[HL Debug] FULL USER STATE:",JSON.stringify(le,null,2));const Ie=parseFloat(le.marginSummary.accountValue),Ne=parseFloat(le.withdrawable).toFixed(2),$e=Ie.toFixed(2),Ze=le.assetPositions.filter(We=>parseFloat(We.position.szi)!==0);let Ye=`USDC Account Value: $${$e}`;Ye+=`
Withdrawable: $${Ne}`,Ze.length>0?(Ye+=`

Open Positions:`,Ze.forEach(We=>{Ye+=`
 ${We.position.coin} ${parseFloat(We.position.szi)>0?"LONG":"SHORT"} ${Math.abs(parseFloat(We.position.szi))} @ ${We.position.entryPx}`})):Ye+=`
No open positions.`,re.push({type:"success",title:"Hyperliquid Balance",details:Ye})}}catch(le){re.push({type:"error",title:"HL Balance Error",details:le.message})}else if(me==="getHLMarketData")try{b("Fetching HL Market Data...");const le=await Vn.getMarketData(ue.coin),Ie=le.levels[0][0].px,Ne=le.levels[1][0].px;re.push({type:"success",title:`Hyperliquid ${ue.coin}`,details:`Best Bid: ${Ie}
Best Ask: ${Ne}`})}catch(le){re.push({type:"error",title:"HL Market Data Error",details:le.message})}else if(me==="createHLOrder")if(!t.isUnlocked||!t.hlEncryptedPrivateKey)re.push({type:"error",title:"Order Failed",details:"Vault is locked."});else try{b("Placing HL Order...");const le=await or.decrypt(t.hlEncryptedPrivateKey,e),Ie=zt.getWalletFromPrivateKey(le);ue.leverage&&await Vn.updateLeverage(Ie,ue.coin,ue.leverage,!1);let Ne=ue.size,$e=ue.price,Ze=ue.orderType||"limit",Ye;const We=Ze==="market";if(ue.usdcAmount&&!ue.size||We&&!ue.price){console.log(`[HL Order]  Fetching price for ${We?"Market Order":"USDC Calc"}`),b("Fetching current price...");const ct=await Vn.getMarketData(ue.coin),se=parseFloat(ct.levels[0][0].px),J=parseFloat(ct.levels[1][0].px),Z=ue.isBuy?J:se;if(Ye=Z,ue.usdcAmount&&!Ne){console.log(`[HL Order]  Fetching decimals for ${ue.coin}`);const fe=await Vn.getAssetDecimals(ue.coin);console.log(`[HL Order]  ${ue.coin} decimals: ${fe}`);const be=ue.usdcAmount/Z;Ne=parseFloat(be.toFixed(fe)),console.log(`[HL Order]  USDC: ${ue.usdcAmount} / Price: ${Z} = Raw Size: ${be} -> Rounded: ${Ne}`)}if(We){let be=ue.isBuy?Z*1.05:Z*.95;console.log("[HL Order]  Fetching decimals for price rounding");const ye=6-await Vn.getAssetDecimals(ue.coin);let Xe=parseFloat(be.toFixed(ye));Xe=parseFloat(Xe.toPrecision(5)),$e=parseFloat(Xe.toFixed(ye)),Ze="ioc",console.log(`[HL Order]  Market Order: Base ${Z} -> Raw ${be.toFixed(6)} -> Rounded ${$e}`)}}if(!Ne)throw new Error("Either size or usdcAmount must be provided");if(Ze==="limit"&&$e){const ct=await Vn.getAssetDecimals(ue.coin),se=Math.max(0,6-ct);let J=parseFloat($e.toFixed(se));J=parseFloat(J.toPrecision(5)),$e=parseFloat(J.toFixed(se)),console.log(`[HL Order]   Limit price rounded: ${ue.price} -> ${$e} (maxDecimals=${se})`)}if(Ze==="limit"&&!$e)throw new Error("Price is required for Limit orders");let ot=ue.stopLoss,Bt=ue.takeProfit;const Zt=Ye||$e;Zt&&(ue.stopLoss&&ue.stopLoss<100&&(ue.isBuy?ot=Zt*(1-ue.stopLoss/100):ot=Zt*(1+ue.stopLoss/100),console.log(`[HL Order]  SL %: ${ue.stopLoss}% -> Absolute: ${ot==null?void 0:ot.toFixed(2)} (from base ${Zt})`)),ue.takeProfit&&ue.takeProfit<100&&(ue.isBuy?Bt=Zt*(1+ue.takeProfit/100):Bt=Zt*(1-ue.takeProfit/100),console.log(`[HL Order]  TP %: ${ue.takeProfit}% -> Absolute: ${Bt==null?void 0:Bt.toFixed(2)} (from base ${Zt})`))),b("Placing HL Order...");const Ge=await Vn.createOrder(Ie,ue.coin,ue.isBuy,Ne,$e,{orderType:Ze,reduceOnly:ue.reduceOnly||!1,stopLoss:ot,takeProfit:Bt}),Tt=(ue.orderType||"limit").toUpperCase(),ln=ue.leverage?` (${ue.leverage}x leverage)`:"",Pe=$e?` @ ${$e}`:"",Ve=ue.usdcAmount?` (${ue.usdcAmount} USDC)`:"",ht=ot||Bt?` [SL: ${ot?ot.toFixed(2):"none"}, TP: ${Bt?Bt.toFixed(2):"none"}]`:"";re.push({type:"success",title:"Order Placed",details:`Placed ${Tt} ${ue.isBuy?"LONG":"SHORT"} ${Ne.toFixed(4)} ${ue.coin}${Ve}${Pe}${ln}${ht}`})}catch(le){re.push({type:"error",title:"Order Failed",details:le.message})}else if(me==="updateHLLeverage")if(!t.isUnlocked||!t.hlEncryptedPrivateKey)re.push({type:"error",title:"Leverage Update Failed",details:"Vault is locked."});else try{b("Updating Leverage...");const le=await or.decrypt(t.hlEncryptedPrivateKey,e),Ie=zt.getWalletFromPrivateKey(le),Ne=await Vn.updateLeverage(Ie,ue.coin,ue.leverage,ue.isCross);re.push({type:"success",title:"Leverage Updated",details:`Set ${ue.coin} leverage to ${ue.leverage}x (${ue.isCross?"Cross":"Isolated"})`})}catch(le){re.push({type:"error",title:"Leverage Update Failed",details:le.message})}else if(me==="closeHLPosition")if(!t.isUnlocked||!t.hlEncryptedPrivateKey)re.push({type:"error",title:"Close Failed",details:"Vault is locked."});else try{b("Closing Position...");const le=await or.decrypt(t.hlEncryptedPrivateKey,e),Ie=zt.getWalletFromPrivateKey(le);try{b("Closing HL Position...");try{const Ne=await Vn.closePosition(Ie,ue.coin,ue.size,ue.orderType||"market",ue.price);re.push({type:"success",title:"Position Closed",details:`Closed ${ue.size?ue.size:"entire"} ${ue.coin} position via ${ue.orderType||"market"} order`})}catch(Ne){if(Ne.message&&Ne.message.includes("Insufficient margin")){console.log("[HL Close] Insufficient margin detected. Attempting to Add Isolated Margin..."),b("Insufficient Margin. Adding Funds...");const $e=await Vn.getUserState(Ie.address),Ze=$e.assetPositions.find(Ye=>Ye.position.coin===ue.coin);if(Ze){const We=parseFloat(Ze.position.szi)>0,At=parseFloat($e.withdrawable);let ot=20;if(At<25&&(ot=Math.max(0,At-2)),ot<1)throw new Error(`Insufficient margin to close and wallet balance is too low ($${At.toFixed(2)}) to add more margin.`);console.log(`[HL Close] Wallet Balance: ${At}, Adding Margin: ${ot}`),await Vn.updateIsolatedMargin(Ie,ue.coin,We,ot),console.log("[HL Close] Retrying close after adding margin..."),b("Retrying Close Position..."),await Vn.closePosition(Ie,ue.coin,ue.size,ue.orderType||"market",ue.price),re.push({type:"success",title:"Position Closed (Recovered)",details:`Added ${ot.toFixed(2)} USDC margin to cover loss and closed ${ue.coin} position successfully.`})}else throw new Error("Position not found during margin recovery.")}else if(Ne.message&&Ne.message.includes("Cross margin is not allowed"))re.push({type:"error",title:"Close Failed",details:"Cross margin not supported and insufficient isolated margin."});else throw Ne}}catch(Ne){re.push({type:"error",title:"Close Failed",details:Ne.message})}}catch(le){re.push({type:"error",title:"Close Failed",details:le.message})}else if(me==="cancelHLOrder")if(!t.isUnlocked||!t.hlEncryptedPrivateKey)re.push({type:"error",title:"Cancel Failed",details:"Vault is locked."});else try{b("Cancelling HL Order...");const le=await or.decrypt(t.hlEncryptedPrivateKey,e),Ie=zt.getWalletFromPrivateKey(le),Ne=await Vn.cancelOrder(Ie,ue.coin,ue.orderId);re.push({type:"success",title:"Order Cancelled",details:`Cancelled Order ${ue.orderId}. Status: ${Ne.status}`})}catch(le){re.push({type:"error",title:"Cancel Failed",details:le.message})}else if(me==="withdrawFromHL")if(!t.isUnlocked||!t.hlEncryptedPrivateKey)re.push({type:"error",title:"Withdrawal Failed",details:"Hyperliquid Vault is locked."});else if(!t.hlOwnerPublicKey)re.push({type:"error",title:"Withdrawal Failed",details:"No Hyperliquid Owner Wallet connected. Please connect your MetaMask wallet first."});else try{b("Withdrawing from Hyperliquid...");const le=await or.decrypt(t.hlEncryptedPrivateKey,e),Ie=zt.getWalletFromPrivateKey(le),Ne=await Vn.withdrawUSDC(Ie,t.hlOwnerPublicKey,ue.amount);s("HL Withdrawal",`Withdrew ${ue.amount} USDC from Hyperliquid`,((D=(I=(A=(B=Ne.response)==null?void 0:B.data)==null?void 0:A.statuses)==null?void 0:I[0])==null?void 0:D.tx)||"pending"),re.push({type:"success",title:"Hyperliquid Withdrawal Initiated",details:`Withdrawing ${ue.amount} USDC to ${t.hlOwnerPublicKey.slice(0,6)}...${t.hlOwnerPublicKey.slice(-4)}. Fee: $1 USDC. ETA: ~5 minutes.`})}catch(le){(z=le.message)!=null&&z.includes("Must deposit before performing actions")?re.push({type:"error",title:"Deposit Required",details:"Your Hyperliquid account needs an initial deposit before you can perform any actions. Please deposit USDC to your Hyperliquid vault address first."}):re.push({type:"error",title:"Withdrawal Error",details:le.message})}else if(me==="getDealerTradeHistory")try{b("Querying Dealer history...");const le=ue.coin||void 0,Ie=Math.min(ue.limit||10,50),Ne=ue.includeReasoning!==!1,$e=ft.getSnapshot(),Ze=ft.getTradeHistory(le,Ie,Ne);if(Ze.operations.length===0&&Ze.recentLogs.length===0){let Ye="";le?Ye=`No h histrico de operaes em ${le}. O Dealer no executou trades nessa moeda.`:$e.logs.length===0?Ye="Sem histrico disponvel. O Dealer ainda no executou nenhum trade ou o histrico foi limpo.":Ye="O Dealer analisou o mercado mas no executou nenhum trade ainda. Os sinais recebidos no atingiram o nvel de confiana necessrio.",re.push({type:"success",title:"Dealer History",details:Ye})}else{let Ye="";Ze.operations.length>0&&(Ye+=` **TRADE OPERATIONS** (${Ze.totalOperations} total)

`,Ze.operations.forEach((We,At)=>{var Zt,Ge;const ot=We.pnl!==void 0?` | PnL: ${We.pnl>=0?"+":""}$${We.pnl.toFixed(2)}`:"",Bt=We.status==="OPEN"?"":"";Ye+=`${Bt} **${We.action} ${We.coin}** @ $${((Zt=We.entryPrice)==null?void 0:Zt.toFixed(2))||"N/A"}${ot}
`,Ye+=`   Size: ${We.size} ($${(Ge=We.sizeUSDC)==null?void 0:Ge.toFixed(2)}) | Confidence: ${(We.confidence*100).toFixed(0)}%
`,Ne&&We.fullReasoning&&(Ye+=`   **Reasoning:** ${We.fullReasoning}
`),Ye+=`   Time: ${new Date(We.timestamp).toLocaleString()}

`})),Ze.operations.length===0&&Ze.recentLogs.length>0&&(Ye+=` **RECENT ANALYSIS LOGS**

`,Ze.recentLogs.forEach(We=>{var At;Ye+=` [${We.type}] ${We.message}
`,(At=We.details)!=null&&At.fullReason&&(Ye+=`  Reasoning: ${We.details.fullReason}
`)})),re.push({type:"success",title:le?`Dealer History: ${le}`:"Dealer Trade History",details:Ye.trim()})}}catch(le){re.push({type:"error",title:"Dealer History Error",details:le.message})}}let oe="";if(Y.candidates&&Y.candidates[0].content&&Y.candidates[0].content.parts)for(const ce of Y.candidates[0].content.parts)ce.text&&(oe+=ce.text);let Ee="I processed your request.";if(re.length>0){const ce=re.some(ue=>ue.type==="error"),me=re.some(ue=>ue.type==="success");ce&&!me?Ee="I encountered an issue executing that command.":me?Ee="Action completed successfully.":ce&&me&&(Ee="Some actions completed, but others failed.")}l(ce=>[...ce,{id:(Date.now()+1).toString(),role:"model",content:oe||Ee,timestamp:Date.now(),toolResults:re}])}catch(G){console.error("AI Error:",G),l(te=>[...te,{id:Date.now().toString(),role:"model",content:"Sorry, I encountered a system error while processing that request.",toolResults:[{type:"error",title:"System Error",details:G.message}],timestamp:Date.now()}])}finally{v(!1),b("")}}}},og="/poly-clob",WA="/poly-gamma",tpt="/poly-data",tee=200,npt=3;class rpt{constructor(){this.privateKey=null,this.wallet=null,this.apiCredentials=null,this.lastRequestTime=0,this.isInitialized=!1}createWallet(){return Qf.createRandom()}getWalletFromPrivateKey(e){return new Qf(e)}async initialize(e){try{return this.privateKey=e,this.wallet=new Qf(e),this.apiCredentials=await this.createOrDeriveApiKeys(),this.isInitialized=!0,console.log("[PolymarketService] Initialized with address:",this.wallet.address),!0}catch(n){return console.error("[PolymarketService] Failed to initialize:",n),!1}}getIsInitialized(){return this.isInitialized}getAddress(){var e;return((e=this.wallet)==null?void 0:e.address)||null}async throttledFetch(e,n){const i=Date.now()-this.lastRequestTime;i<tee&&await new Promise(o=>setTimeout(o,tee-i)),this.lastRequestTime=Date.now();let s=null;for(let o=0;o<npt;o++)try{const a=await fetch(e,n);if(a.status===429){const l=parseInt(a.headers.get("Retry-After")||"1",10);console.warn(`[PolymarketService] Rate limited, waiting ${l}s...`),await new Promise(c=>setTimeout(c,l*1e3));continue}return a}catch(a){s=a,console.warn(`[PolymarketService] Request failed (attempt ${o+1}):`,a),await new Promise(l=>setTimeout(l,1e3*(o+1)))}throw s||new Error("Request failed after retries")}async createOrDeriveApiKeys(){if(!this.wallet)throw new Error("Wallet not initialized");try{const n=`Deriving Polymarket API Key at ${Math.floor(Date.now()/1e3)}`,r=await this.wallet.signMessage(n),i=Kn(pi(r+"apiKey")).slice(0,34),s=Kn(pi(r+"secret")).slice(0,66),o=Kn(pi(r+"passphrase")).slice(0,18);return{apiKey:i,secret:s,passphrase:o}}catch(e){throw console.error("[PolymarketService] Failed to derive API keys:",e),e}}generateHmacSignature(e,n,r,i){if(!this.apiCredentials)throw new Error("API credentials not initialized");const s=r+e+n+(i||"");return Kn(pi(this.apiCredentials.secret+s))}getAuthHeaders(e,n,r){if(!this.apiCredentials||!this.wallet)throw new Error("Service not initialized");const i=Math.floor(Date.now()/1e3).toString(),s=this.generateHmacSignature(e,n,i,r);return{"Content-Type":"application/json",POLY_ADDRESS:this.wallet.address,POLY_API_KEY:this.apiCredentials.apiKey,POLY_PASSPHRASE:this.apiCredentials.passphrase,POLY_SIGNATURE:s,POLY_TIMESTAMP:i}}async getActiveMarkets(e,n=50,r=0){try{let i=`${WA}/events?active=true&closed=false&limit=${n}&offset=${r}`;e&&(i+=`&tag=${e}`);const s=await this.throttledFetch(i);if(!s.ok)throw new Error(`Failed to fetch markets: ${s.status}`);const o=await s.json(),a=[];for(const l of o)if(l.markets&&Array.isArray(l.markets))for(const c of l.markets)a.push(this.transformMarket(c,l));return a}catch(i){return console.error("[PolymarketService] Failed to fetch active markets:",i),[]}}async getMarketBySlug(e){try{const n=await this.throttledFetch(`${WA}/markets/slug/${e}`);if(!n.ok){if(n.status===404)return null;throw new Error(`Failed to fetch market: ${n.status}`)}const r=await n.json();return this.transformMarket(r)}catch(n){return console.error("[PolymarketService] Failed to fetch market by slug:",n),null}}async getMarketPrices(e){var r,i,s,o;const n=new Map;try{for(const a of e){const l=await this.throttledFetch(`${og}/book?token_id=${a}`);if(l.ok){const c=await l.json(),u=((i=(r=c.bids)==null?void 0:r[0])==null?void 0:i.price)||0,f=((o=(s=c.asks)==null?void 0:s[0])==null?void 0:o.price)||1,m=(parseFloat(u)+parseFloat(f))/2;n.set(a,{yes:m,no:1-m})}}}catch(a){console.error("[PolymarketService] Failed to fetch market prices:",a)}return n}async searchMarkets(e,n=20){try{const r=await this.throttledFetch(`${WA}/search/events?search_string=${encodeURIComponent(e)}&limit=${n}`);if(!r.ok)throw new Error(`Search failed: ${r.status}`);const i=await r.json(),s=[];for(const o of i)if(o.markets&&Array.isArray(o.markets))for(const a of o.markets)s.push(this.transformMarket(a,o));return s}catch(r){return console.error("[PolymarketService] Failed to search markets:",r),[]}}transformMarket(e,n){var r,i,s,o,a,l,c,u;return{id:e.id||e.condition_id,conditionId:e.condition_id||e.conditionId||"",questionId:e.question_id||e.questionId||"",slug:e.slug||"",question:e.question||(n==null?void 0:n.title)||"",description:e.description||(n==null?void 0:n.description)||"",tokenIdYes:((i=(r=e.tokens)==null?void 0:r[0])==null?void 0:i.token_id)||((s=e.clobTokenIds)==null?void 0:s[0])||"",tokenIdNo:((a=(o=e.tokens)==null?void 0:o[1])==null?void 0:a.token_id)||((l=e.clobTokenIds)==null?void 0:l[1])||"",priceYes:parseFloat((c=e.outcomePrices)==null?void 0:c[0])||.5,priceNo:parseFloat((u=e.outcomePrices)==null?void 0:u[1])||.5,volume24h:parseFloat(e.volume24hr)||0,liquidity:parseFloat(e.liquidity)||0,endDate:e.endDate||e.end_date_iso||"",category:this.categorizeMarket((n==null?void 0:n.tags)||[]),active:e.active!==!1,resolved:e.resolved||!1,outcome:e.outcome||null}}categorizeMarket(e){const n=e.join(" ").toLowerCase();return n.includes("crypto")||n.includes("bitcoin")||n.includes("ethereum")?"crypto":n.includes("politic")||n.includes("election")||n.includes("government")?"politics":n.includes("sport")||n.includes("nfl")||n.includes("nba")||n.includes("soccer")?"sports":n.includes("business")||n.includes("economy")||n.includes("stock")?"business":n.includes("science")||n.includes("tech")||n.includes("ai")?"science":n.includes("culture")||n.includes("entertainment")||n.includes("celebrity")?"pop-culture":"other"}async getBalance(){if(!this.wallet)return 0;try{const e="https://polygon-rpc.com",n="0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174",r=new hIe(e),i=["function balanceOf(address) view returns (uint256)"],o=await new Wg(n,i,r).balanceOf(this.wallet.address);return parseFloat(Gne(o,6))}catch(e){return console.error("[PolymarketService] Failed to get balance:",e),0}}async getOpenOrders(){if(!this.isInitialized)return[];try{const e="/orders",n=this.getAuthHeaders("GET",e),r=await this.throttledFetch(`${og}${e}`,{method:"GET",headers:n});if(!r.ok)throw new Error(`Failed to fetch orders: ${r.status}`);return(await r.json()).map(s=>this.transformOrder(s))}catch(e){return console.error("[PolymarketService] Failed to fetch open orders:",e),[]}}async getPositions(){if(!this.wallet)return[];try{const e=this.wallet.address,n=await this.throttledFetch(`${tpt}/positions?user=${e}`);if(!n.ok){if(n.status===404)return[];throw new Error(`Failed to fetch positions: ${n.status}`)}const r=await n.json();return Array.isArray(r)?r.map(i=>this.transformPosition(i)):[]}catch(e){return console.error("[PolymarketService] Failed to fetch positions:",e),[]}}async getTrades(e=20){if(!this.isInitialized)return[];try{const n=`/trades?limit=${e}`,r=this.getAuthHeaders("GET",n),i=await this.throttledFetch(`${og}${n}`,{method:"GET",headers:r});if(!i.ok)throw new Error(`Failed to fetch trades: ${i.status}`);return(await i.json()).map(o=>this.transformTrade(o))}catch(n){return console.error("[PolymarketService] Failed to fetch trades:",n),[]}}async createOrder(e){if(!this.isInitialized)return{success:!1,error:"Service not initialized"};try{const n={tokenID:e.tokenId,price:e.price.toString(),size:e.size.toString(),side:e.side,orderType:"GTC",tickSize:e.tickSize||"0.01",negRisk:e.negRisk||!1},r="/order",i=JSON.stringify(n),s=this.getAuthHeaders("POST",r,i),o=await this.throttledFetch(`${og}${r}`,{method:"POST",headers:s,body:i});if(!o.ok)return{success:!1,error:(await o.json().catch(()=>({}))).message||`Order failed: ${o.status}`};const a=await o.json();return{success:!0,orderId:a.orderID||a.order_id}}catch(n){return console.error("[PolymarketService] Failed to create order:",n),{success:!1,error:n.message}}}async cancelOrder(e){if(!this.isInitialized)return!1;try{const n=`/order/${e}`,r=this.getAuthHeaders("DELETE",n);return(await this.throttledFetch(`${og}${n}`,{method:"DELETE",headers:r})).ok}catch(n){return console.error("[PolymarketService] Failed to cancel order:",n),!1}}async cancelAllOrders(){if(!this.isInitialized)return!1;try{const e="/orders",n=this.getAuthHeaders("DELETE",e);return(await this.throttledFetch(`${og}${e}`,{method:"DELETE",headers:n})).ok}catch(e){return console.error("[PolymarketService] Failed to cancel all orders:",e),!1}}transformOrder(e){var n;return{id:e.id||e.order_id,marketId:e.market||e.marketId||"",tokenId:e.asset_id||e.tokenId||"",side:((n=e.side)==null?void 0:n.toUpperCase())||"BUY",outcome:e.outcome||"YES",price:parseFloat(e.price)||0,size:parseFloat(e.original_size||e.size)||0,filledSize:parseFloat(e.size_matched||e.filledSize)||0,status:this.mapOrderStatus(e.status),createdAt:new Date(e.created_at||e.createdAt).getTime()}}mapOrderStatus(e){return{open:"OPEN",live:"OPEN",matched:"FILLED",filled:"FILLED",cancelled:"CANCELED",canceled:"CANCELED",partial:"PARTIALLY_FILLED"}[e==null?void 0:e.toLowerCase()]||"OPEN"}transformPosition(e){var c;const n=parseFloat(e.size||e.shares)||0,r=parseFloat(e.avgPrice||e.average_price)||0,i=parseFloat(e.currentPrice||e.price)||r,s=n*r,o=n*i,a=o-s,l=s>0?a/s*100:0;return{marketId:e.market||e.marketId||"",question:e.question||e.title||"",outcome:((c=e.outcome)==null?void 0:c.toUpperCase())||"YES",shares:n,avgPrice:r,currentPrice:i,unrealizedPnl:a,unrealizedPnlPercent:l,costBasis:s,currentValue:o}}transformTrade(e){var n,r;return{id:e.id||e.trade_id,marketId:e.market||e.marketId||"",question:e.question||e.title||"",outcome:((n=e.outcome)==null?void 0:n.toUpperCase())||"YES",side:((r=e.side)==null?void 0:r.toUpperCase())||"BUY",price:parseFloat(e.price)||0,size:parseFloat(e.size)||0,fee:parseFloat(e.fee||e.trading_fee)||0,timestamp:new Date(e.created_at||e.timestamp||e.createdAt).getTime(),realizedPnl:e.realized_pnl?parseFloat(e.realized_pnl):void 0}}async checkHealth(){try{return(await this.throttledFetch(`${WA}/health`)).ok}catch{return!1}}}const ns=new rpt;class ipt{async getMarketContext(e){try{const n=new Date(e.endDate),r=new Date,i=Math.max(0,Math.ceil((n.getTime()-r.getTime())/(1e3*60*60*24)));let s="neutral";return e.priceYes>.6?s="bullish":e.priceYes<.4&&(s="bearish"),{market:e,timeToResolution:i,sentiment:s,ts:Date.now()}}catch(n){return console.error("[PolymarketMCP] Failed to get market context:",n),{market:e,timeToResolution:0,ts:Date.now(),error:n.message}}}async getBatchContext(e,n,r,i,s=20){const o=[];try{for(const c of e){const f=(await ns.getActiveMarkets(c,Math.ceil(s/e.length))).filter(m=>m.liquidity>=i.minLiquidity&&m.volume24h>=i.minVolume24h&&m.active&&!m.resolved);for(const m of f){const g=await this.getMarketContext(m);o.push(g)}}const a=n.reduce((c,u)=>c+u.currentValue,0),l=n.reduce((c,u)=>c+u.unrealizedPnl,0);return{markets:o.slice(0,s),portfolio:{balance:r,positions:n,totalExposure:a,unrealizedPnl:l},settings:i,ts:Date.now()}}catch(a){return console.error("[PolymarketMCP] Failed to get batch context:",a),{markets:[],portfolio:{balance:r,positions:n,totalExposure:0,unrealizedPnl:0},settings:i,ts:Date.now()}}}calculatePositionsPnL(e){const n=e.reduce((a,l)=>a+l.costBasis,0),r=e.reduce((a,l)=>a+l.currentValue,0),i=r-n,s=n>0?i/n*100:0,o=e.map(a=>({marketId:a.marketId,question:a.question,outcome:a.outcome,pnl:a.unrealizedPnl,pnlPercent:a.unrealizedPnlPercent}));return{totalCostBasis:n,totalValue:r,totalPnl:i,totalPnlPercent:s,byMarket:o}}buildAnalysisPrompt(e,n,r){const{markets:i,portfolio:s,settings:o}=e,a=i.map(u=>{const f=u.market;return`- "${f.question}" [${f.category}]
  ID: ${f.id} | TokenYES: ${f.tokenIdYes} | TokenNO: ${f.tokenIdNo}
  YES: ${(f.priceYes*100).toFixed(1)}% | Volume24h: $${f.volume24h.toLocaleString()} | Liquidity: $${f.liquidity.toLocaleString()}
  Days to Resolution: ${u.timeToResolution} | Sentiment: ${u.sentiment||"neutral"}`}).join(`
`),l=s.positions.length>0?s.positions.map(u=>`- "${u.question.slice(0,50)}..." ${u.outcome}: ${u.shares.toFixed(2)} shares @ ${(u.avgPrice*100).toFixed(1)}% (PnL: $${u.unrealizedPnl.toFixed(2)})`).join(`
`):"No open positions";return`
POLYMARKET DEALER ANALYSIS
${r?`
=== RECENT ACTIVITY CONTEXT ===
${r}
`:""}
=== STRATEGY ===
${n}

=== PORTFOLIO STATUS ===
Balance: $${s.balance.toFixed(2)} USDC
Total Exposure: $${s.totalExposure.toFixed(2)}
Unrealized PnL: $${s.unrealizedPnl.toFixed(2)}
Open Positions: ${s.positions.length} / ${o.maxOpenPositions}

=== CURRENT POSITIONS ===
${l}

=== AVAILABLE MARKETS (${i.length}) ===
${a}

=== CONSTRAINTS ===
- Max Position Size: $${o.maxPositionSizeUSDC}
- Max Open Positions: ${o.maxOpenPositions}
- Min Market Liquidity: $${o.minLiquidity.toLocaleString()}
- Allowed Categories: ${o.allowedCategories.join(", ")}

=== INSTRUCTIONS ===
Analyze each market and provide trading decisions.
For each decision include:
1. Action: BUY_YES, BUY_NO, SELL_YES, SELL_NO, or HOLD
2. Market ID (use the ID provided)
3. Token ID (use TokenYES for BUY_YES/SELL_YES, TokenNO for BUY_NO/SELL_NO)
4. Confidence (0-100)
5. Reasoning
6. Suggested size in USDC (if applicable)
7. Suggested limit price (if applicable)

Respond in JSON format:
{
  "decisions": [
    {
      "action": "BUY_YES",
      "marketId": "...",
      "question": "...",
      "tokenId": "...",
      "confidence": 75,
      "reason": "...",
      "suggestedSize": 25,
      "suggestedPrice": 0.45
    }
  ],
  "marketOverview": "Brief overall market assessment",
  "riskAssessment": "Brief risk commentary",
  "cycleSummary": "Brief 1-2 sentence summary of this analysis for context in next cycle. Include key observations and actions. Max 300 chars."
}
`}parseAIResponse(e){try{const n=e.match(/\{[\s\S]*\}/);if(!n)return console.error("[PolymarketMCP] No JSON found in AI response"),[];const r=JSON.parse(n[0]);return!r.decisions||!Array.isArray(r.decisions)?[]:r.decisions.map(i=>({action:i.action||"HOLD",marketId:i.marketId||"",question:i.question||"",tokenId:i.tokenId||"",confidence:i.confidence||0,reason:i.reason||"",suggestedSize:i.suggestedSize,suggestedPrice:i.suggestedPrice})).filter(i=>i.action!=="HOLD"&&i.confidence>=60)}catch(n){return console.error("[PolymarketMCP] Failed to parse AI response:",n),[]}}}const L3=new ipt,nee="polymarket-dealer-cycle",ree="polymarket-dealer-sync";class spt{constructor(){this.isLoopRunning=!1,this.executor=null,lt.subscribe(()=>{const e=lt.getSnapshot();e.isOn&&!this.isLoopRunning?this.startLoop():!e.isOn&&this.isLoopRunning&&this.stopLoop()})}startLoop(){if(this.isLoopRunning)return;const e=lt.getSnapshot();if(!e.isOn)return;console.log("[PolymarketDealerService]  Starting main loop with Web Worker timer (background-safe)..."),this.isLoopRunning=!0,AC.start(),lt.addLog("INFO","Polymarket Dealer loop started"),this.runCycle();const n=e.settings.checkIntervalSeconds*1e3;Da.start(nee,n,()=>this.runCycle()),this.startSyncLoop()}startSyncLoop(){Da.start(ree,3e4,()=>this.syncPortfolio())}async syncPortfolio(){if(ns.getIsInitialized())try{const[e,n]=await Promise.all([ns.getBalance(),ns.getPositions()]),r=n.reduce((i,s)=>i+s.currentValue,0);lt.updatePortfolioState(n,e,r)}catch(e){console.error("[PolymarketDealerService] Sync error:",e)}}stopLoop(){console.log("[PolymarketDealerService]  Stopping loop..."),Da.stop(nee),Da.stop(ree),AC.stop(),this.isLoopRunning=!1,lt.addLog("INFO","Polymarket Dealer loop stopped"),lt.setAnalyzing(!1)}setExecutor(e){this.executor=e}async runCycle(){const e=lt.getSnapshot();if(!e.isOn){this.stopLoop();return}if(!ns.getIsInitialized()){lt.addLog("WARNING","Polymarket service not initialized, skipping cycle");return}try{console.log("[PolymarketDealerService] === Starting new cycle ==="),lt.setAnalyzing(!0),lt.setStatusMessage("Starting analysis cycle..."),lt.setCurrentTask("Fetching Markets"),lt.setStatusMessage("Fetching active markets from Polymarket...");const n=e.settings,[r,i]=await Promise.all([ns.getBalance(),ns.getPositions()]),s=i.reduce((E,C)=>E+C.currentValue,0);lt.updatePortfolioState(i,r,s);const o=i.length<n.maxOpenPositions,a=n.bankrollType==="MANUAL"?Math.min(n.manualBankroll,r):r;a<n.maxPositionSizeUSDC&&lt.addLog("WARNING","Insufficient balance for new positions"),lt.setCurrentTask("Building Context"),lt.setStatusMessage("Building market context for AI analysis...");const l=await L3.getBatchContext(n.allowedCategories.length>0?n.allowedCategories:["politics","crypto","business"],i,a,{maxPositionSizeUSDC:n.maxPositionSizeUSDC,maxOpenPositions:n.maxOpenPositions,minLiquidity:n.minLiquidity,minVolume24h:n.minVolume24h,allowedCategories:n.allowedCategories},20);if(l.markets.length===0){lt.addLog("REASONING","No actionable markets found",{fullReason:`Scanned available markets but none met the filtering criteria.
                    Filters: Min Liquidity: $${n.minLiquidity.toLocaleString()}, Min Volume: $${n.minVolume24h.toLocaleString()}
                    Allowed categories: ${n.allowedCategories.join(", ")}
                    Waiting for better opportunities in the next cycle.`,context:{minLiquidity:n.minLiquidity,minVolume24h:n.minVolume24h,allowedCategories:n.allowedCategories,availableBankroll:a,openPositions:i.length}}),lt.setAnalyzing(!1),lt.setCurrentTask(""),lt.setStatusMessage("Waiting for next cycle...");return}lt.setStatusDetail("Found "+l.markets.length+" markets to analyze"),lt.setCurrentTask("AI Analysis"),lt.setStatusMessage("Consulting AI for trading decisions...");const c=n.promptMode==="preset"?MT[n.selectedPreset]:n.strategyPrompt,u=ed.getContextForAI("polymarket");u&&lt.addLog("INFO",` Cycle Summary: Including ${u.length} char context from previous cycles`);const f=L3.buildAnalysisPrompt(l,c,u),m=await sm.getPolymarketAnalysis(f);if(!m){lt.addLog("ERROR","AI analysis failed - no response"),lt.setAnalyzing(!1);return}const g=L3.parseAIResponse(m);let v="",x;try{const E=m.match(/\{[\s\S]*\}/);if(E){const C=JSON.parse(E[0]);C.marketOverview&&(v=C.marketOverview),C.riskAssessment&&v&&(v+=" | Risk: "+C.riskAssessment),C.cycleSummary&&typeof C.cycleSummary=="string"&&(x=C.cycleSummary.slice(0,350))}}catch{v=m.replace(/\{[\s\S]*\}/,"").trim().slice(0,200)||"Analysis complete"}if(x&&(ed.setSummary("polymarket",x),lt.addLog("INFO",` AI Summary: ${x.slice(0,80)}...`)),lt.addLog("REASONING",v||"AI Analysis Complete",{fullReason:m,context:{marketsAnalyzed:l.markets.length,currentBalance:r,currentExposure:s,openPositions:i.length,maxPositions:n.maxOpenPositions,allowedCategories:n.allowedCategories,intentsFound:g.length}}),lt.setAnalysisNote(v||"Analyzed "+l.markets.length+" markets"),g.length===0)lt.addLog("REASONING","No trades recommended - HOLD strategy",{fullReason:"After analyzing the available markets, no opportunities met the confidence threshold or risk parameters. Current market conditions suggest holding existing positions.",context:{marketsAnalyzed:l.markets.length,currentBalance:r,recommendation:"HOLD"}}),lt.setCurrentSignal("NEUTRAL"),lt.setStatusDetail("No trades recommended - holding");else{const E=g.filter(O=>O.action.startsWith("BUY")).length,C=g.filter(O=>O.action.startsWith("SELL")).length,k=E>C?"BULLISH":C>E?"BEARISH":"NEUTRAL";lt.addLog("SIGNAL",`${g.length} trading signals - ${k}`,{fullReason:`AI identified ${g.length} trading opportunities across the analyzed markets.
                    ${E} BUY signals and ${C} SELL signals indicate a ${k} overall stance.`,context:{totalIntents:g.length,buySignals:E,sellSignals:C,sentiment:k,intents:g.map(O=>{var U;return{market:O.question.slice(0,60),action:O.action,confidence:O.confidence,reason:(U=O.reason)==null?void 0:U.slice(0,100)}})}}),lt.setCurrentSignal(k),lt.setStatusDetail(`${E} buy signals, ${C} sell signals`)}if(g.length>0&&o&&this.executor){lt.setCurrentTask("Executing Trades"),lt.setStatusMessage("Executing trading decisions...");for(const E of g){if(E.confidence<60){lt.addLog("INFO","Skipping low-confidence intent: "+E.question.slice(0,50));continue}if(i.length>=n.maxOpenPositions){lt.addLog("WARNING","Max positions reached, skipping remaining intents");break}try{await this.executor(E),lt.addLog("TRADE",`${E.action} on "${E.question.slice(0,40)}..."`,{fullReason:E.reason||"Trade executed based on AI analysis",context:{action:E.action,confidence:E.confidence,marketId:E.marketId,question:E.question,suggestedPrice:E.suggestedPrice,suggestedSize:E.suggestedSize}})}catch(C){lt.addLog("ERROR","Failed to execute: "+C.message)}}}lt.setAnalyzing(!1),lt.setCurrentTask(""),lt.setStatusMessage("Cycle complete. Waiting "+n.checkIntervalSeconds+"s..."),lt.setStatusDetail(""),console.log("[PolymarketDealerService] === Cycle complete ===");const b=l.markets.map(E=>E.market.question.slice(0,30));ed.recordCycle("polymarket",{timestamp:Date.now(),decisions:g.map(E=>({asset:E.question.slice(0,40),action:E.action,confidence:E.confidence/100})),assetsAnalyzed:b})}catch(n){console.error("[PolymarketDealerService] Cycle error:",n),lt.addLog("ERROR","Cycle error: "+n.message),lt.setAnalyzing(!1),lt.setCurrentTask(""),lt.setStatusMessage("Error occurred. Retrying next cycle...")}}}const opt=new spt;function Wme(t,e){const n=T.useSyncExternalStore(lt.subscribe.bind(lt),lt.getSnapshot.bind(lt)),r=T.useRef(!1);T.useEffect(()=>{if(!t.isUnlocked||!t.pmEncryptedPrivateKey||!e||e.trim()==="")return;(async()=>{try{const g=await or.decrypt(t.pmEncryptedPrivateKey,e);await ns.initialize(g)?lt.addLog("INFO","Polymarket service initialized"):lt.addLog("ERROR","Failed to initialize Polymarket service")}catch(g){console.error("[usePolymarket] Init error:",g),lt.addLog("ERROR","Initialization error: "+g.message)}})()},[t.isUnlocked,t.pmEncryptedPrivateKey,e]),T.useEffect(()=>{r.current||(opt.setExecutor(async m=>{await i(m)}),r.current=!0)},[]);const i=async m=>{var C,k;if(!ns.getIsInitialized()){lt.addLog("ERROR","Service not initialized");return}const g=m.suggestedPrice||.5,v=m.suggestedSize||n.settings.maxPositionSizeUSDC;let x=m.tokenId;if(!x){lt.addLog("WARNING",`Skipping "${(C=m.question)==null?void 0:C.slice(0,40)}..." - tokenId not available`);return}const b=(g*100).toFixed(1);lt.addLog("TRADE",`Executing ${m.action} on "${(k=m.question)==null?void 0:k.slice(0,40)}..." @ ${b}`);const E=await ns.createOrder({tokenId:x,side:m.action==="BUY_YES"||m.action==="BUY_NO"?"BUY":"SELL",price:g,size:Math.floor(v/g)});E.success?(lt.addLog("TRADE",`Order placed: ${E.orderId}`),lt.addOperationRecord({marketId:m.marketId,question:m.question,outcome:m.action.includes("YES")?"YES":"NO",action:m.action.startsWith("BUY")?"BUY":"SELL",timestamp:Date.now(),price:g,shares:v/g,sizeUSDC:v,reasoning:m.reason||m.reasoning||"",confidence:m.confidence,status:"OPEN"})):lt.addLog("ERROR",`Order failed: ${E.error}`)};T.useEffect(()=>{if(!n.isOn||!ns.getIsInitialized())return;const m=async()=>{try{const[v,x]=await Promise.all([ns.getBalance(),ns.getPositions()]),b=x.reduce((E,C)=>E+C.currentValue,0);lt.updatePortfolioState(x,v,b)}catch(v){console.error("[usePolymarket] Sync error:",v)}};m();const g=setInterval(m,3e4);return()=>clearInterval(g)},[n.isOn]);const s=m=>{lt.toggleDealer(m),m?lt.addLog("INFO","Polymarket Dealer activated"):lt.addLog("INFO","Polymarket Dealer deactivated")},o=m=>{lt.updateSettings(m)},a=()=>{lt.reload(),lt.addLog("INFO","Settings applied")},l=m=>{lt.setStrategyPrompt(m),lt.addLog("INFO","Strategy prompt updated")},c=()=>{lt.clearLogs()},u=async m=>{if(!ns.getIsInitialized())return lt.addLog("ERROR","Service not initialized"),{success:!1,error:"Service not initialized"};const g=(m.price*100).toFixed(1);lt.addLog("TRADE","Executing "+m.side+" "+m.outcome+" @ "+g+"c");const v=await ns.createOrder({tokenId:m.tokenId,side:m.side,price:m.price,size:m.size});return v.success?(lt.addLog("TRADE","Order placed: "+v.orderId),lt.addOperationRecord({marketId:m.marketId,question:m.question,outcome:m.outcome,action:m.side,timestamp:Date.now(),price:m.price,shares:m.size,sizeUSDC:m.size*m.price,reasoning:m.reason,confidence:m.confidence,status:"OPEN"})):lt.addLog("ERROR","Order failed: "+v.error),v},f=async m=>{const g=await ns.cancelOrder(m);return g?lt.addLog("INFO","Order "+m+" canceled"):lt.addLog("ERROR","Failed to cancel order "+m),g};return{state:n,isOn:n.isOn,isAnalyzing:n.isAnalyzing,settings:n.settings,logs:n.logs,positions:n.activePositions,operationHistory:n.operationHistory,toggleDealer:s,updateSettings:o,applyChanges:a,saveStrategy:l,clearLogs:c,executeOrder:u,cancelOrder:f}}const apt=({onSelectConversation:t})=>{const[e,n]=T.useState([]),[r,i]=T.useState(""),{user:s}=A1();T.useEffect(()=>{s!=null&&s.uid&&o()},[s==null?void 0:s.uid]);const o=async()=>{const f=await td.getHistory();n(Array.isArray(f)?f:[])},a=async(f,m)=>{f.stopPropagation(),window.confirm("Delete this conversation?")&&(await td.deleteConversation(m),o())},l=e.filter(f=>f.title.toLowerCase().includes(r.toLowerCase())),c=l.reduce((f,m)=>{const g=new Date(m.timestamp),x=Math.floor((new Date().getTime()-g.getTime())/(1e3*60*60*24));let b="Older";return x===0?b="Today":x===1?b="Yesterday":x<7?b="Previous 7 Days":x<30&&(b="Previous 30 Days"),f[b]||(f[b]=[]),f[b].push(m),f},{}),u=["Today","Yesterday","Previous 7 Days","Previous 30 Days","Older"];return h.jsxs(Ht.div,{className:"h-full flex flex-col p-8 max-w-7xl mx-auto w-full",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[h.jsxs("div",{className:"flex items-center justify-between mb-8",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-bold text-white tracking-tight mb-2",children:"Conversation History"}),h.jsx("p",{className:"text-slate-400",children:"Manage and revisit your past interactions with the Vault Operator."})]}),h.jsxs("div",{className:"relative",children:[h.jsx(Cne,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-500",size:18}),h.jsx(wx,{type:"text",placeholder:"Search conversations...",value:r,onChange:f=>i(f.target.value),className:"pl-10 w-64 focus-visible:ring-[#E7FE55]/20 focus-visible:border-[#E7FE55]/30"})]})]}),h.jsx("div",{className:"flex-1 overflow-y-auto pr-2 custom-scrollbar",children:l.length===0?h.jsxs(Ht.div,{className:"flex flex-col items-center justify-center h-64 text-slate-500",initial:{opacity:0},animate:{opacity:1},children:[h.jsx(vw,{size:48,className:"mb-4 opacity-20"}),h.jsx("p",{children:"No conversations found."})]}):h.jsx("div",{className:"space-y-8",children:u.map(f=>{const m=c[f];return!m||m.length===0?null:h.jsxs(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[h.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[h.jsx("div",{className:"h-px bg-slate-800 flex-1"}),h.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:f}),h.jsx("div",{className:"h-px bg-slate-800 flex-1"})]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:h.jsx(go,{children:m.map((g,v)=>h.jsx(Ht.div,{onClick:()=>t(g.id),className:"group",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:v*.05},whileHover:{scale:1.02},children:h.jsxs(Fs,{className:"p-4 cursor-pointer hover:border-[#E7FE55]/30 hover:shadow-xl hover:shadow-[#E7FE55]/5 relative overflow-hidden h-full",children:[h.jsx("div",{className:"absolute top-0 right-0 p-3 opacity-0 group-hover:opacity-100 transition-opacity z-10",children:h.jsx(Fi,{variant:"ghost",size:"icon",onClick:x=>a(x,g.id),className:"h-7 w-7 text-slate-400 hover:text-red-400 hover:bg-red-500/20",children:h.jsx(cm,{size:14})})}),h.jsxs("div",{className:"flex flex-col h-full justify-between",children:[h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center gap-2 mb-3 text-[#E7FE55]",children:[h.jsx(vw,{size:16}),h.jsxs("span",{className:"text-xs font-mono opacity-70",children:["ID: ",g.id.slice(0,8),"..."]})]}),h.jsx("h3",{className:"text-base font-semibold text-slate-200 group-hover:text-white line-clamp-2 mb-2 transition-colors",children:g.title})]}),h.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500 mt-4 pt-4 border-t border-slate-700/30",children:[h.jsxs("div",{className:"flex items-center gap-1.5",children:[h.jsx(t8,{size:12}),h.jsx("span",{children:new Date(g.timestamp).toLocaleDateString(void 0,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),h.jsx("div",{className:"group-hover:translate-x-1 transition-transform text-[#E7FE55]/50 group-hover:text-[#E7FE55]",children:h.jsx(id,{size:14})})]})]})]})},g.id))})})]},f)})})})]})};function iee(t,[e,n]){return Math.min(n,Math.max(e,t))}function lpt(t){const e=cpt(t),n=T.forwardRef((r,i)=>{const{children:s,...o}=r,a=T.Children.toArray(s),l=a.find(dpt);if(l){const c=l.props.children,u=a.map(f=>f===l?T.Children.count(c)>1?T.Children.only(null):T.isValidElement(c)?c.props.children:null:f);return h.jsx(e,{...o,ref:i,children:T.isValidElement(c)?T.cloneElement(c,void 0,u):null})}return h.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}function cpt(t){const e=T.forwardRef((n,r)=>{const{children:i,...s}=n;if(T.isValidElement(i)){const o=hpt(i),a=fpt(s,i.props);return i.type!==T.Fragment&&(a.ref=r?Fx(r,o):o),T.cloneElement(i,a)}return T.Children.count(i)>1?T.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var upt=Symbol("radix.slottable");function dpt(t){return T.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===upt}function fpt(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const l=s(...a);return i(...a),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function hpt(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function ppt(t){const e=T.useRef({value:t,previous:t});return T.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var mpt=[" ","Enter","ArrowUp","ArrowDown"],gpt=[" ","Enter"],Nm="Select",[QN,ZN,ypt]=Dhe(Nm),[hv]=Mm(Nm,[ypt,k2]),e_=k2(),[xpt,Sh]=hv(Nm),[vpt,bpt]=hv(Nm),Yme=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:i,onOpenChange:s,value:o,defaultValue:a,onValueChange:l,dir:c,name:u,autoComplete:f,disabled:m,required:g,form:v}=t,x=e_(e),[b,E]=T.useState(null),[C,k]=T.useState(null),[O,U]=T.useState(!1),R=RB(c),[$,V]=Mw({prop:r,defaultProp:i??!1,onChange:s,caller:Nm}),[j,F]=Mw({prop:o,defaultProp:a,onChange:l,caller:Nm}),W=T.useRef(null),H=b?v||!!b.closest("form"):!0,[B,A]=T.useState(new Set),I=Array.from(B).map(D=>D.props.value).join(";");return h.jsx(JRe,{...x,children:h.jsxs(xpt,{required:g,scope:e,trigger:b,onTriggerChange:E,valueNode:C,onValueNodeChange:k,valueNodeHasChildren:O,onValueNodeHasChildrenChange:U,contentId:Zf(),value:j,onValueChange:F,open:$,onOpenChange:V,dir:R,triggerPointerDownPosRef:W,disabled:m,children:[h.jsx(QN.Provider,{scope:e,children:h.jsx(vpt,{scope:t.__scopeSelect,onNativeOptionAdd:T.useCallback(D=>{A(z=>new Set(z).add(D))},[]),onNativeOptionRemove:T.useCallback(D=>{A(z=>{const G=new Set(z);return G.delete(D),G})},[]),children:n})}),H?h.jsxs(v0e,{"aria-hidden":!0,required:g,tabIndex:-1,name:u,autoComplete:f,value:j,onChange:D=>F(D.target.value),disabled:m,form:v,children:[j===void 0?h.jsx("option",{value:""}):null,Array.from(B)]},I):null]})})};Yme.displayName=Nm;var Jme="SelectTrigger",Xme=T.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...i}=t,s=e_(n),o=Sh(Jme,n),a=o.disabled||r,l=Nr(e,o.onTriggerChange),c=ZN(n),u=T.useRef("touch"),[f,m,g]=w0e(x=>{const b=c().filter(k=>!k.disabled),E=b.find(k=>k.value===o.value),C=E0e(b,x,E);C!==void 0&&o.onValueChange(C.value)}),v=x=>{a||(o.onOpenChange(!0),g()),x&&(o.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)})};return h.jsx(qse,{asChild:!0,...s,children:h.jsx(Mn.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":b0e(o.value)?"":void 0,...i,ref:l,onClick:pn(i.onClick,x=>{x.currentTarget.focus(),u.current!=="mouse"&&v(x)}),onPointerDown:pn(i.onPointerDown,x=>{u.current=x.pointerType;const b=x.target;b.hasPointerCapture(x.pointerId)&&b.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&x.pointerType==="mouse"&&(v(x),x.preventDefault())}),onKeyDown:pn(i.onKeyDown,x=>{const b=f.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&m(x.key),!(b&&x.key===" ")&&mpt.includes(x.key)&&(v(),x.preventDefault())})})})});Xme.displayName=Jme;var Qme="SelectValue",Zme=T.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,children:s,placeholder:o="",...a}=t,l=Sh(Qme,n),{onValueNodeHasChildrenChange:c}=l,u=s!==void 0,f=Nr(e,l.onValueNodeChange);return Os(()=>{c(u)},[c,u]),h.jsx(Mn.span,{...a,ref:f,style:{pointerEvents:"none"},children:b0e(l.value)?h.jsx(h.Fragment,{children:o}):s})});Zme.displayName=Qme;var wpt="SelectIcon",e0e=T.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...i}=t;return h.jsx(Mn.span,{"aria-hidden":!0,...i,ref:e,children:r||""})});e0e.displayName=wpt;var Ept="SelectPortal",t0e=t=>h.jsx(C2,{asChild:!0,...t});t0e.displayName=Ept;var _m="SelectContent",n0e=T.forwardRef((t,e)=>{const n=Sh(_m,t.__scopeSelect),[r,i]=T.useState();if(Os(()=>{i(new DocumentFragment)},[]),!n.open){const s=r;return s?Dm.createPortal(h.jsx(r0e,{scope:t.__scopeSelect,children:h.jsx(QN.Slot,{scope:t.__scopeSelect,children:h.jsx("div",{children:t.children})})}),s):null}return h.jsx(i0e,{...t,ref:e})});n0e.displayName=_m;var il=10,[r0e,Ah]=hv(_m),Spt="SelectContentImpl",Apt=lpt("SelectContent.RemoveScroll"),i0e=T.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:o,side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:f,collisionBoundary:m,collisionPadding:g,sticky:v,hideWhenDetached:x,avoidCollisions:b,...E}=t,C=Sh(_m,n),[k,O]=T.useState(null),[U,R]=T.useState(null),$=Nr(e,oe=>O(oe)),[V,j]=T.useState(null),[F,W]=T.useState(null),H=ZN(n),[B,A]=T.useState(!1),I=T.useRef(!1);T.useEffect(()=>{if(k)return dpe(k)},[k]),rpe();const D=T.useCallback(oe=>{const[Ee,...ce]=H().map(le=>le.ref.current),[me]=ce.slice(-1),ue=document.activeElement;for(const le of oe)if(le===ue||(le==null||le.scrollIntoView({block:"nearest"}),le===Ee&&U&&(U.scrollTop=0),le===me&&U&&(U.scrollTop=U.scrollHeight),le==null||le.focus(),document.activeElement!==ue))return},[H,U]),z=T.useCallback(()=>D([V,k]),[D,V,k]);T.useEffect(()=>{B&&z()},[B,z]);const{onOpenChange:G,triggerPointerDownPosRef:te}=C;T.useEffect(()=>{if(k){let oe={x:0,y:0};const Ee=me=>{var ue,le;oe={x:Math.abs(Math.round(me.pageX)-(((ue=te.current)==null?void 0:ue.x)??0)),y:Math.abs(Math.round(me.pageY)-(((le=te.current)==null?void 0:le.y)??0))}},ce=me=>{oe.x<=10&&oe.y<=10?me.preventDefault():k.contains(me.target)||G(!1),document.removeEventListener("pointermove",Ee),te.current=null};return te.current!==null&&(document.addEventListener("pointermove",Ee),document.addEventListener("pointerup",ce,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ee),document.removeEventListener("pointerup",ce,{capture:!0})}}},[k,G,te]),T.useEffect(()=>{const oe=()=>G(!1);return window.addEventListener("blur",oe),window.addEventListener("resize",oe),()=>{window.removeEventListener("blur",oe),window.removeEventListener("resize",oe)}},[G]);const[K,q]=w0e(oe=>{const Ee=H().filter(ue=>!ue.disabled),ce=Ee.find(ue=>ue.ref.current===document.activeElement),me=E0e(Ee,oe,ce);me&&setTimeout(()=>me.ref.current.focus())}),M=T.useCallback((oe,Ee,ce)=>{const me=!I.current&&!ce;(C.value!==void 0&&C.value===Ee||me)&&(j(oe),me&&(I.current=!0))},[C.value]),_=T.useCallback(()=>k==null?void 0:k.focus(),[k]),Y=T.useCallback((oe,Ee,ce)=>{const me=!I.current&&!ce;(C.value!==void 0&&C.value===Ee||me)&&W(oe)},[C.value]),X=r==="popper"?aL:s0e,re=X===aL?{side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:f,collisionBoundary:m,collisionPadding:g,sticky:v,hideWhenDetached:x,avoidCollisions:b}:{};return h.jsx(r0e,{scope:n,content:k,viewport:U,onViewportChange:R,itemRefCallback:M,selectedItem:V,onItemLeave:_,itemTextRefCallback:Y,focusSelectedItem:z,selectedItemText:F,position:r,isPositioned:B,searchRef:K,children:h.jsx(DB,{as:Apt,allowPinchZoom:!0,children:h.jsx(MB,{asChild:!0,trapped:C.open,onMountAutoFocus:oe=>{oe.preventDefault()},onUnmountAutoFocus:pn(i,oe=>{var Ee;(Ee=C.trigger)==null||Ee.focus({preventScroll:!0}),oe.preventDefault()}),children:h.jsx(w2,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:oe=>oe.preventDefault(),onDismiss:()=>C.onOpenChange(!1),children:h.jsx(X,{role:"listbox",id:C.contentId,"data-state":C.open?"open":"closed",dir:C.dir,onContextMenu:oe=>oe.preventDefault(),...E,...re,onPlaced:()=>A(!0),ref:$,style:{display:"flex",flexDirection:"column",outline:"none",...E.style},onKeyDown:pn(E.onKeyDown,oe=>{const Ee=oe.ctrlKey||oe.altKey||oe.metaKey;if(oe.key==="Tab"&&oe.preventDefault(),!Ee&&oe.key.length===1&&q(oe.key),["ArrowUp","ArrowDown","Home","End"].includes(oe.key)){let me=H().filter(ue=>!ue.disabled).map(ue=>ue.ref.current);if(["ArrowUp","End"].includes(oe.key)&&(me=me.slice().reverse()),["ArrowUp","ArrowDown"].includes(oe.key)){const ue=oe.target,le=me.indexOf(ue);me=me.slice(le+1)}setTimeout(()=>D(me)),oe.preventDefault()}})})})})})})});i0e.displayName=Spt;var Tpt="SelectItemAlignedPosition",s0e=T.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...i}=t,s=Sh(_m,n),o=Ah(_m,n),[a,l]=T.useState(null),[c,u]=T.useState(null),f=Nr(e,$=>u($)),m=ZN(n),g=T.useRef(!1),v=T.useRef(!0),{viewport:x,selectedItem:b,selectedItemText:E,focusSelectedItem:C}=o,k=T.useCallback(()=>{if(s.trigger&&s.valueNode&&a&&c&&x&&b&&E){const $=s.trigger.getBoundingClientRect(),V=c.getBoundingClientRect(),j=s.valueNode.getBoundingClientRect(),F=E.getBoundingClientRect();if(s.dir!=="rtl"){const ue=F.left-V.left,le=j.left-ue,Ie=$.left-le,Ne=$.width+Ie,$e=Math.max(Ne,V.width),Ze=window.innerWidth-il,Ye=iee(le,[il,Math.max(il,Ze-$e)]);a.style.minWidth=Ne+"px",a.style.left=Ye+"px"}else{const ue=V.right-F.right,le=window.innerWidth-j.right-ue,Ie=window.innerWidth-$.right-le,Ne=$.width+Ie,$e=Math.max(Ne,V.width),Ze=window.innerWidth-il,Ye=iee(le,[il,Math.max(il,Ze-$e)]);a.style.minWidth=Ne+"px",a.style.right=Ye+"px"}const W=m(),H=window.innerHeight-il*2,B=x.scrollHeight,A=window.getComputedStyle(c),I=parseInt(A.borderTopWidth,10),D=parseInt(A.paddingTop,10),z=parseInt(A.borderBottomWidth,10),G=parseInt(A.paddingBottom,10),te=I+D+B+G+z,K=Math.min(b.offsetHeight*5,te),q=window.getComputedStyle(x),M=parseInt(q.paddingTop,10),_=parseInt(q.paddingBottom,10),Y=$.top+$.height/2-il,X=H-Y,re=b.offsetHeight/2,oe=b.offsetTop+re,Ee=I+D+oe,ce=te-Ee;if(Ee<=Y){const ue=W.length>0&&b===W[W.length-1].ref.current;a.style.bottom="0px";const le=c.clientHeight-x.offsetTop-x.offsetHeight,Ie=Math.max(X,re+(ue?_:0)+le+z),Ne=Ee+Ie;a.style.height=Ne+"px"}else{const ue=W.length>0&&b===W[0].ref.current;a.style.top="0px";const Ie=Math.max(Y,I+x.offsetTop+(ue?M:0)+re)+ce;a.style.height=Ie+"px",x.scrollTop=Ee-Y+x.offsetTop}a.style.margin=`${il}px 0`,a.style.minHeight=K+"px",a.style.maxHeight=H+"px",r==null||r(),requestAnimationFrame(()=>g.current=!0)}},[m,s.trigger,s.valueNode,a,c,x,b,E,s.dir,r]);Os(()=>k(),[k]);const[O,U]=T.useState();Os(()=>{c&&U(window.getComputedStyle(c).zIndex)},[c]);const R=T.useCallback($=>{$&&v.current===!0&&(k(),C==null||C(),v.current=!1)},[k,C]);return h.jsx(Cpt,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:g,onScrollButtonChange:R,children:h.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:O},children:h.jsx(Mn.div,{...i,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});s0e.displayName=Tpt;var kpt="SelectPopperPosition",aL=T.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=il,...s}=t,o=e_(n);return h.jsx(Gse,{...o,...s,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});aL.displayName=kpt;var[Cpt,n7]=hv(_m,{}),lL="SelectViewport",o0e=T.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...i}=t,s=Ah(lL,n),o=n7(lL,n),a=Nr(e,s.onViewportChange),l=T.useRef(0);return h.jsxs(h.Fragment,{children:[h.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),h.jsx(QN.Slot,{scope:n,children:h.jsx(Mn.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:pn(i.onScroll,c=>{const u=c.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:m}=o;if(m!=null&&m.current&&f){const g=Math.abs(l.current-u.scrollTop);if(g>0){const v=window.innerHeight-il*2,x=parseFloat(f.style.minHeight),b=parseFloat(f.style.height),E=Math.max(x,b);if(E<v){const C=E+g,k=Math.min(v,C),O=C-k;f.style.height=k+"px",f.style.bottom==="0px"&&(u.scrollTop=O>0?O:0,f.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});o0e.displayName=lL;var a0e="SelectGroup",[Npt,_pt]=hv(a0e),Ipt=T.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=Zf();return h.jsx(Npt,{scope:n,id:i,children:h.jsx(Mn.div,{role:"group","aria-labelledby":i,...r,ref:e})})});Ipt.displayName=a0e;var l0e="SelectLabel",c0e=T.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=_pt(l0e,n);return h.jsx(Mn.div,{id:i.id,...r,ref:e})});c0e.displayName=l0e;var BC="SelectItem",[Ppt,u0e]=hv(BC),d0e=T.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:s,...o}=t,a=Sh(BC,n),l=Ah(BC,n),c=a.value===r,[u,f]=T.useState(s??""),[m,g]=T.useState(!1),v=Nr(e,C=>{var k;return(k=l.itemRefCallback)==null?void 0:k.call(l,C,r,i)}),x=Zf(),b=T.useRef("touch"),E=()=>{i||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return h.jsx(Ppt,{scope:n,value:r,disabled:i,textId:x,isSelected:c,onItemTextChange:T.useCallback(C=>{f(k=>k||((C==null?void 0:C.textContent)??"").trim())},[]),children:h.jsx(QN.ItemSlot,{scope:n,value:r,disabled:i,textValue:u,children:h.jsx(Mn.div,{role:"option","aria-labelledby":x,"data-highlighted":m?"":void 0,"aria-selected":c&&m,"data-state":c?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:v,onFocus:pn(o.onFocus,()=>g(!0)),onBlur:pn(o.onBlur,()=>g(!1)),onClick:pn(o.onClick,()=>{b.current!=="mouse"&&E()}),onPointerUp:pn(o.onPointerUp,()=>{b.current==="mouse"&&E()}),onPointerDown:pn(o.onPointerDown,C=>{b.current=C.pointerType}),onPointerMove:pn(o.onPointerMove,C=>{var k;b.current=C.pointerType,i?(k=l.onItemLeave)==null||k.call(l):b.current==="mouse"&&C.currentTarget.focus({preventScroll:!0})}),onPointerLeave:pn(o.onPointerLeave,C=>{var k;C.currentTarget===document.activeElement&&((k=l.onItemLeave)==null||k.call(l))}),onKeyDown:pn(o.onKeyDown,C=>{var O;((O=l.searchRef)==null?void 0:O.current)!==""&&C.key===" "||(gpt.includes(C.key)&&E(),C.key===" "&&C.preventDefault())})})})})});d0e.displayName=BC;var Vb="SelectItemText",f0e=T.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,...s}=t,o=Sh(Vb,n),a=Ah(Vb,n),l=u0e(Vb,n),c=bpt(Vb,n),[u,f]=T.useState(null),m=Nr(e,E=>f(E),l.onItemTextChange,E=>{var C;return(C=a.itemTextRefCallback)==null?void 0:C.call(a,E,l.value,l.disabled)}),g=u==null?void 0:u.textContent,v=T.useMemo(()=>h.jsx("option",{value:l.value,disabled:l.disabled,children:g},l.value),[l.disabled,l.value,g]),{onNativeOptionAdd:x,onNativeOptionRemove:b}=c;return Os(()=>(x(v),()=>b(v)),[x,b,v]),h.jsxs(h.Fragment,{children:[h.jsx(Mn.span,{id:l.textId,...s,ref:m}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Dm.createPortal(s.children,o.valueNode):null]})});f0e.displayName=Vb;var h0e="SelectItemIndicator",p0e=T.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return u0e(h0e,n).isSelected?h.jsx(Mn.span,{"aria-hidden":!0,...r,ref:e}):null});p0e.displayName=h0e;var cL="SelectScrollUpButton",m0e=T.forwardRef((t,e)=>{const n=Ah(cL,t.__scopeSelect),r=n7(cL,t.__scopeSelect),[i,s]=T.useState(!1),o=Nr(e,r.onScrollButtonChange);return Os(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollTop>0;s(c)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),i?h.jsx(y0e,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});m0e.displayName=cL;var uL="SelectScrollDownButton",g0e=T.forwardRef((t,e)=>{const n=Ah(uL,t.__scopeSelect),r=n7(uL,t.__scopeSelect),[i,s]=T.useState(!1),o=Nr(e,r.onScrollButtonChange);return Os(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;s(u)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),i?h.jsx(y0e,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});g0e.displayName=uL;var y0e=T.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=t,s=Ah("SelectScrollButton",n),o=T.useRef(null),a=ZN(n),l=T.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return T.useEffect(()=>()=>l(),[l]),Os(()=>{var u;const c=a().find(f=>f.ref.current===document.activeElement);(u=c==null?void 0:c.ref.current)==null||u.scrollIntoView({block:"nearest"})},[a]),h.jsx(Mn.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:pn(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:pn(i.onPointerMove,()=>{var c;(c=s.onItemLeave)==null||c.call(s),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:pn(i.onPointerLeave,()=>{l()})})}),Rpt="SelectSeparator",x0e=T.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return h.jsx(Mn.div,{"aria-hidden":!0,...r,ref:e})});x0e.displayName=Rpt;var dL="SelectArrow",Opt=T.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=e_(n),s=Sh(dL,n),o=Ah(dL,n);return s.open&&o.position==="popper"?h.jsx(Kse,{...i,...r,ref:e}):null});Opt.displayName=dL;var Mpt="SelectBubbleInput",v0e=T.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const i=T.useRef(null),s=Nr(r,i),o=ppt(e);return T.useEffect(()=>{const a=i.current;if(!a)return;const l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&u){const f=new Event("change",{bubbles:!0});u.call(a,e),a.dispatchEvent(f)}},[o,e]),h.jsx(Mn.select,{...n,style:{...Wse,...n.style},ref:s,defaultValue:e})});v0e.displayName=Mpt;function b0e(t){return t===""||t===void 0}function w0e(t){const e=sh(t),n=T.useRef(""),r=T.useRef(0),i=T.useCallback(o=>{const a=n.current+o;e(a),(function l(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))})(a)},[e]),s=T.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return T.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,s]}function E0e(t,e,n){const i=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=Dpt(t,Math.max(s,0));i.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.textValue.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function Dpt(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var Lpt=Yme,S0e=Xme,jpt=Zme,Bpt=e0e,Upt=t0e,A0e=n0e,Fpt=o0e,T0e=c0e,k0e=d0e,$pt=f0e,zpt=p0e,C0e=m0e,N0e=g0e,_0e=x0e;const see=Lpt,oee=jpt,fL=T.forwardRef(({className:t,children:e,...n},r)=>h.jsxs(S0e,{ref:r,className:jt("flex h-10 w-full items-center justify-between whitespace-nowrap rounded-lg border border-slate-700 bg-slate-800/50 px-3 py-2 text-sm text-white ring-offset-background placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,h.jsx(Bpt,{asChild:!0,children:h.jsx(Ic,{className:"h-4 w-4 opacity-50"})})]}));fL.displayName=S0e.displayName;const I0e=T.forwardRef(({className:t,...e},n)=>h.jsx(C0e,{ref:n,className:jt("flex cursor-default items-center justify-center py-1",t),...e,children:h.jsx(am,{className:"h-4 w-4"})}));I0e.displayName=C0e.displayName;const P0e=T.forwardRef(({className:t,...e},n)=>h.jsx(N0e,{ref:n,className:jt("flex cursor-default items-center justify-center py-1",t),...e,children:h.jsx(Ic,{className:"h-4 w-4"})}));P0e.displayName=N0e.displayName;const hL=T.forwardRef(({className:t,children:e,position:n="popper",...r},i)=>h.jsx(Upt,{children:h.jsxs(A0e,{ref:i,className:jt("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border border-slate-700 bg-slate-800 text-slate-100 shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[h.jsx(I0e,{}),h.jsx(Fpt,{className:jt("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),h.jsx(P0e,{})]})}));hL.displayName=A0e.displayName;const Hpt=T.forwardRef(({className:t,...e},n)=>h.jsx(T0e,{ref:n,className:jt("px-2 py-1.5 text-sm font-semibold text-slate-400",t),...e}));Hpt.displayName=T0e.displayName;const pL=T.forwardRef(({className:t,children:e,...n},r)=>h.jsxs(k0e,{ref:r,className:jt("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-slate-700 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[h.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:h.jsx(zpt,{children:h.jsx($g,{className:"h-4 w-4"})})}),h.jsx($pt,{children:e})]}));pL.displayName=k0e.displayName;const Vpt=T.forwardRef(({className:t,...e},n)=>h.jsx(_0e,{ref:n,className:jt("-mx-1 my-1 h-px bg-slate-700",t),...e}));Vpt.displayName=_0e.displayName;const qpt=({onConnect:t,onCancel:e})=>{var W;const[n,r]=T.useState("input"),[i,s]=T.useState(""),[o,a]=T.useState(""),[l,c]=T.useState(!1),[u,f]=T.useState(null),[m,g]=T.useState(null),[v,x]=T.useState(!1),[b,E]=T.useState(null),[C,k]=T.useState(null),O=T.useCallback(()=>{if(!i){E(null);return}const H=rs.validateUrl(i);E(H.valid?null:H.error||"Invalid URL")},[i]),U=T.useCallback(()=>{if(!o){k(null);return}const H=rs.validateAnonKey(o);k(H.valid?null:H.error||"Invalid key")},[o]),R=T.useCallback(async()=>{const H=rs.getSetupSQL();await navigator.clipboard.writeText(H),x(!0),setTimeout(()=>x(!1),2e3)},[]),$=T.useCallback(async()=>{f(null),r("connecting");const H=await rs.connect(i.trim(),o.trim());if(!H.success){f(H.error||"Connection failed"),r("error");return}r("validating");const B=await rs.validateSchema();if(g(B),!B.valid){r("schema-missing");return}r("success")},[i,o]),V=T.useCallback(async()=>{r("validating");const H=await rs.validateSchema();if(g(H),!H.valid){r("schema-missing");return}r("success")},[]),j=T.useCallback(()=>{t()},[t]),F=i.trim()&&o.trim()&&!b&&!C;return h.jsxs(Ht.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"p-5 bg-[#0f1015] border border-[#232328] rounded-xl space-y-4",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"p-2 rounded-lg bg-blue-500/10",children:h.jsx(r8,{className:"w-5 h-5 text-blue-400"})}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-base font-semibold text-white",children:"Connect Your Supabase"}),h.jsx("p",{className:"text-xs text-[#747580]",children:"Required for 24/7 execution"})]})]}),h.jsxs(go,{mode:"wait",children:[n==="input"&&h.jsxs(Ht.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-4",children:[h.jsxs("div",{className:"p-3 bg-blue-500/5 border border-blue-500/20 rounded-lg",children:[h.jsx("p",{className:"text-xs text-blue-200 mb-2 font-medium",children:"Quick Setup:"}),h.jsxs("ol",{className:"text-xs text-blue-200/80 space-y-1 list-decimal list-inside",children:[h.jsxs("li",{children:["Create free account at ",h.jsx("a",{href:"https://supabase.com",target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline",children:"supabase.com"})]}),h.jsx("li",{children:"Create a new project (any name)"}),h.jsxs("li",{children:["Go to ",h.jsx("strong",{children:"Settings  API"})]}),h.jsx("li",{children:"Copy the values below"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-[10px] text-[#747580] uppercase tracking-[0.1em] mb-1.5",children:"Project URL"}),h.jsx("input",{type:"text",value:i,onChange:H=>s(H.target.value),onBlur:O,placeholder:"https://abc123.supabase.co",className:jt("w-full px-3 py-2 text-xs font-mono bg-[#14151a] border rounded text-white placeholder:text-[#3a3b42] focus:outline-none transition-colors",b?"border-red-500/50 focus:border-red-500":"border-[#232328] focus:border-blue-500/50")}),b&&h.jsx("p",{className:"text-[10px] text-red-400 mt-1",children:b})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-[10px] text-[#747580] uppercase tracking-[0.1em] mb-1.5",children:"Anon Key (public)"}),h.jsxs("div",{className:"relative",children:[h.jsx("input",{type:l?"text":"password",value:o,onChange:H=>a(H.target.value),onBlur:U,placeholder:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",className:jt("w-full px-3 py-2 pr-9 text-xs font-mono bg-[#14151a] border rounded text-white placeholder:text-[#3a3b42] focus:outline-none transition-colors",C?"border-red-500/50 focus:border-red-500":"border-[#232328] focus:border-blue-500/50")}),h.jsx("button",{type:"button",onClick:()=>c(!l),className:"absolute right-3 top-1/2 -translate-y-1/2 text-[#747580] hover:text-white transition-colors",children:l?h.jsx(t2,{size:14}):h.jsx(i8,{size:14})})]}),C&&h.jsx("p",{className:"text-[10px] text-red-400 mt-1",children:C})]}),h.jsx("div",{className:"flex items-center justify-between",children:h.jsxs("a",{href:"https://supabase.com/dashboard/project/_/settings/api",target:"_blank",rel:"noopener noreferrer",className:"text-[10px] text-blue-400/70 hover:text-blue-400 transition-colors flex items-center gap-1",children:["Open Supabase API Settings ",h.jsx(ex,{size:10})]})}),h.jsxs("div",{className:"flex gap-3 pt-2",children:[h.jsx("button",{onClick:e,className:"flex-1 px-4 py-2 bg-[#232328] hover:bg-[#2a2b30] text-white rounded-lg text-sm font-medium transition-colors",children:"Cancel"}),h.jsxs("button",{onClick:$,disabled:!F,className:jt("flex-1 px-4 py-2 rounded-lg text-sm font-semibold transition-all flex items-center justify-center gap-2",F?"bg-blue-600 hover:bg-blue-500 text-white":"bg-[#232328] text-[#3a3b42] cursor-not-allowed"),children:["Connect ",h.jsx(id,{size:14})]})]})]},"input"),(n==="connecting"||n==="validating")&&h.jsxs(Ht.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"py-8 flex flex-col items-center gap-4",children:[h.jsx(s8,{className:"w-8 h-8 text-blue-400 animate-spin"}),h.jsx("p",{className:"text-sm text-[#a0a1a8]",children:n==="connecting"?"Connecting to Supabase...":"Validating schema..."})]},"connecting"),n==="schema-missing"&&m&&h.jsxs(Ht.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-4",children:[h.jsx("div",{className:"p-4 bg-amber-500/10 border border-amber-500/30 rounded-lg",children:h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx(_l,{className:"w-5 h-5 text-amber-400 flex-shrink-0 mt-0.5"}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm font-medium text-amber-200",children:"Schema Setup Required"}),h.jsx("p",{className:"text-xs text-amber-200/70 mt-1",children:"Your Supabase project is connected, but missing required tables:"}),h.jsx("ul",{className:"mt-2 space-y-1",children:m.missingTables.map(H=>h.jsxs("li",{className:"text-xs text-amber-300 flex items-center gap-2",children:[h.jsx(Kz,{size:12}),h.jsx("code",{className:"bg-amber-500/10 px-1 rounded",children:H})]},H))})]})]})}),h.jsxs("div",{className:"p-4 bg-[#14151a] border border-[#232328] rounded-lg space-y-3",children:[h.jsx("p",{className:"text-xs text-[#a0a1a8]",children:"Copy this SQL and run it in your Supabase SQL Editor:"}),h.jsx("button",{onClick:R,className:"w-full px-4 py-3 bg-[#0f1015] border border-[#232328] rounded-lg hover:border-blue-500/30 transition-all flex items-center justify-center gap-2 text-sm",children:v?h.jsxs(h.Fragment,{children:[h.jsx($g,{size:16,className:"text-green-400"}),h.jsx("span",{className:"text-green-400",children:"Copied!"})]}):h.jsxs(h.Fragment,{children:[h.jsx(Qp,{size:16,className:"text-[#747580]"}),h.jsx("span",{className:"text-white",children:"Copy SQL Schema"})]})}),h.jsxs("a",{href:"https://supabase.com/dashboard/project/_/sql/new",target:"_blank",rel:"noopener noreferrer",className:"w-full px-4 py-2 bg-[#232328] rounded-lg hover:bg-[#2a2b30] transition-all flex items-center justify-center gap-2 text-sm text-white",children:["Open SQL Editor ",h.jsx(ex,{size:14})]})]}),h.jsxs("div",{className:"flex gap-3 pt-2",children:[h.jsx("button",{onClick:e,className:"flex-1 px-4 py-2 bg-[#232328] hover:bg-[#2a2b30] text-white rounded-lg text-sm font-medium transition-colors",children:"Cancel"}),h.jsxs("button",{onClick:V,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg text-sm font-semibold transition-all flex items-center justify-center gap-2",children:["I've Run the SQL ",h.jsx(id,{size:14})]})]})]},"schema-missing"),n==="error"&&h.jsxs(Ht.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-4",children:[h.jsx("div",{className:"p-4 bg-red-500/10 border border-red-500/30 rounded-lg",children:h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx(Kz,{className:"w-5 h-5 text-red-400 flex-shrink-0 mt-0.5"}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm font-medium text-red-200",children:"Connection Failed"}),h.jsx("p",{className:"text-xs text-red-200/70 mt-1",children:u})]})]})}),h.jsxs("div",{className:"flex gap-3 pt-2",children:[h.jsx("button",{onClick:e,className:"flex-1 px-4 py-2 bg-[#232328] hover:bg-[#2a2b30] text-white rounded-lg text-sm font-medium transition-colors",children:"Cancel"}),h.jsx("button",{onClick:()=>r("input"),className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg text-sm font-semibold transition-all",children:"Try Again"})]})]},"error"),n==="success"&&h.jsxs(Ht.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0},className:"py-6 flex flex-col items-center gap-4",children:[h.jsx("div",{className:"p-3 rounded-full bg-green-500/10",children:h.jsx(fTe,{className:"w-8 h-8 text-green-400"})}),h.jsxs("div",{className:"text-center",children:[h.jsx("p",{className:"text-sm font-medium text-white",children:"Supabase Connected!"}),h.jsxs("p",{className:"text-xs text-[#747580] mt-1",children:["Project: ",(W=rs.getConfig())==null?void 0:W.projectId]})]}),h.jsx("button",{onClick:j,className:"px-6 py-2 bg-green-600 hover:bg-green-500 text-white rounded-lg text-sm font-semibold transition-all",children:"Continue"})]},"success")]})]})},Gpt=({isOpen:t,onClose:e,onConnect:n})=>h.jsx(lv,{open:t,onOpenChange:r=>!r&&e(),children:h.jsxs($m,{className:"max-w-xl bg-[#13141A] border-gray-800 text-white p-0 overflow-hidden",children:[h.jsxs(zm,{className:"sr-only",children:[h.jsx(Hm,{children:"Connect Supabase"}),h.jsx(Vm,{children:"Setup your Supabase connection for advanced features"})]}),h.jsx("div",{className:"p-1",children:h.jsx(qpt,{onConnect:n,onCancel:e})})]})}),Kpt=({isOpen:t,onClose:e,onConfirm:n,isLoading:r,error:i})=>{const[s,o]=T.useState(""),[a,l]=T.useState(24),c=async()=>{s&&await n(s,a)};return h.jsx(lv,{open:t,onOpenChange:e,children:h.jsxs($m,{className:"max-w-md bg-[#13141A] border-gray-800 text-white",children:[h.jsx(zm,{children:h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsx("div",{className:"p-3 rounded-full bg-amber-500/10",children:h.jsx(Rs,{className:"w-6 h-6 text-amber-400"})}),h.jsxs("div",{children:[h.jsx(Hm,{children:"Setup Session Keys"}),h.jsx(Vm,{className:"text-gray-500",children:"Configure temporary keys for 24/7 execution"})]})]})}),h.jsxs("div",{className:"space-y-6 py-4",children:[h.jsxs("div",{className:"p-4 bg-amber-500/5 border border-amber-500/20 rounded-lg",children:[h.jsx("h4",{className:"text-sm font-medium text-amber-200 mb-2 flex items-center gap-2",children:"How it works"}),h.jsxs("ul",{className:"text-xs text-amber-200/70 space-y-1.5 list-disc list-inside",children:[h.jsx("li",{children:"Keys are decrypted and stored in server memory"}),h.jsx("li",{children:"Bot runs 24/7 within the session duration"}),h.jsx("li",{children:"Keys are automatically wiped when session expires"}),h.jsx("li",{children:"More secure than persistent storage"})]})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1.5",children:"Session Duration (Hours)"}),h.jsxs("div",{className:"relative",children:[h.jsx("input",{type:"number",value:a,onChange:u=>l(Math.max(1,Math.min(72,parseInt(u.target.value)||24))),min:1,max:72,className:"w-full pl-10 pr-3 py-2.5 bg-gray-900 border border-gray-700 rounded-lg text-white placeholder:text-gray-600 focus:outline-none focus:border-amber-500/50 transition-colors"}),h.jsx(Rs,{className:"w-4 h-4 text-gray-500 absolute left-3 top-1/2 -translate-y-1/2"})]}),h.jsx("p",{className:"text-[10px] text-gray-500 mt-1.5",children:"Maximum 72 hours."})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1.5",children:"Wallet Password"}),h.jsxs("div",{className:"relative",children:[h.jsx("input",{type:"password",value:s,onChange:u=>o(u.target.value),placeholder:"Enter your wallet password",className:"w-full pl-10 pr-3 py-2.5 bg-gray-900 border border-gray-700 rounded-lg text-white placeholder:text-gray-600 focus:outline-none focus:border-amber-500/50 transition-colors"}),h.jsx(lm,{className:"w-4 h-4 text-gray-500 absolute left-3 top-1/2 -translate-y-1/2"})]}),h.jsx("p",{className:"text-[10px] text-gray-500 mt-1.5",children:"Required to decrypt your private key for this session."})]})]}),i&&h.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/30 rounded-lg text-xs text-red-300",children:i})]}),h.jsxs(cv,{children:[h.jsx("button",{onClick:e,className:"px-4 py-2 bg-gray-800 hover:bg-gray-700 text-gray-300 rounded-lg text-sm font-medium transition-colors",children:"Cancel"}),h.jsx("button",{onClick:c,disabled:!s||r,className:"px-4 py-2 bg-amber-600 hover:bg-amber-500 disabled:bg-gray-800 disabled:text-gray-500 text-white rounded-lg text-sm font-medium transition-colors flex items-center gap-2",children:r?h.jsxs(h.Fragment,{children:[h.jsx(s8,{className:"w-4 h-4 animate-spin"}),"Starting Session..."]}):"Start Session"})]})]})})},Wpt=({isOpen:t,onClose:e,onConfirm:n,isLoading:r,error:i})=>{const[s,o]=T.useState(""),[a,l]=T.useState(!1),c=async()=>{!s||!a||await n(s)};return h.jsx(lv,{open:t,onOpenChange:e,children:h.jsxs($m,{className:"max-w-md bg-[#13141A] border-gray-800 text-white",children:[h.jsx(zm,{children:h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsx("div",{className:"p-3 rounded-full bg-red-500/10",children:h.jsx($a,{className:"w-6 h-6 text-red-500"})}),h.jsxs("div",{children:[h.jsx(Hm,{children:"Setup Persistent Keys"}),h.jsx(Vm,{className:"text-gray-500",children:"Store encrypted keys for permanent 24/7 execution"})]})]})}),h.jsxs("div",{className:"space-y-6 py-4",children:[h.jsx("div",{className:"p-4 bg-red-500/5 border border-red-500/20 rounded-lg",children:h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx(eke,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-sm font-medium text-red-200 mb-1",children:"Security Warning"}),h.jsx("p",{className:"text-xs text-red-200/70 leading-relaxed",children:"This option stores your encrypted private keys and password on the server database. While we use encryption, this is less secure than local or session-based storage. If the server is compromised, your keys could be at risk."})]})]})}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1.5",children:"Wallet Password"}),h.jsxs("div",{className:"relative",children:[h.jsx("input",{type:"password",value:s,onChange:u=>o(u.target.value),placeholder:"Enter your wallet password",className:"w-full pl-10 pr-3 py-2.5 bg-gray-900 border border-gray-700 rounded-lg text-white placeholder:text-gray-600 focus:outline-none focus:border-red-500/50 transition-colors"}),h.jsx(lm,{className:"w-4 h-4 text-gray-500 absolute left-3 top-1/2 -translate-y-1/2"})]})]}),h.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-900 rounded-lg border border-gray-800 hover:border-gray-700 transition-colors cursor-pointer",onClick:()=>l(!a),children:[h.jsx("div",{className:"flex items-center h-5",children:h.jsx("input",{type:"checkbox",checked:a,onChange:u=>l(u.target.checked),className:"w-4 h-4 rounded border-gray-600 text-red-500 focus:ring-red-500 bg-gray-800"})}),h.jsxs("div",{className:"text-xs text-gray-400 select-none",children:[h.jsx("span",{className:"font-medium text-gray-300",children:"I understand the risks."}),h.jsx("span",{className:"block mt-0.5",children:"I accept full responsibility for storing my keys on the server."})]})]})]}),i&&h.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/30 rounded-lg text-xs text-red-300",children:i})]}),h.jsxs(cv,{children:[h.jsx("button",{onClick:e,className:"px-4 py-2 bg-gray-800 hover:bg-gray-700 text-gray-300 rounded-lg text-sm font-medium transition-colors",children:"Cancel"}),h.jsx("button",{onClick:c,disabled:!s||!a||r,className:"px-4 py-2 bg-red-600 hover:bg-red-500 disabled:bg-gray-800 disabled:text-gray-500 text-white rounded-lg text-sm font-medium transition-colors flex items-center gap-2",children:r?h.jsxs(h.Fragment,{children:[h.jsx(s8,{className:"w-4 h-4 animate-spin"}),"Enabled Persistent Keys..."]}):"Enable Persistent Keys"})]})]})})},Ypt=({onTierChange:t})=>{var V;const e=T.useSyncExternalStore(Ef.subscribe.bind(Ef),()=>Ef.getState()),[n,r]=T.useState(e.currentTier),[i,s]=T.useState(!1),[o,a]=T.useState(null),[l,c]=T.useState(!1),[u,f]=T.useState(rs.isConnected()),[m,g]=T.useState(!1),[v,x]=T.useState(!1),b=Ef.getSessionStatus();T.useEffect(()=>{r(e.currentTier)},[e.currentTier]),T.useEffect(()=>{const j=rs.subscribe(F=>{f(F)});return()=>j()},[]);const E=async j=>{if(j===e.currentTier){r(j);return}if((j==="session"||j==="persistent")&&!u){r(j),c(!0);return}r(j),a(null),j==="local"?await k():j==="session"?g(!0):j==="persistent"&&x(!0)},C=()=>{c(!1),f(!0),n==="session"?g(!0):n==="persistent"&&x(!0)},k=async()=>{s(!0);try{const j=await Ef.migrateToLocal();if(!j.success)throw new Error(j.error||"Migration failed");t==null||t("local")}catch(j){a(j instanceof Error?j.message:"Unknown error"),r(e.currentTier)}finally{s(!1)}},O=async(j,F)=>{s(!0);try{const W=await Ae.getItem(Ae.getUserKey("agent_hl_vault_enc")),H=await Ae.getItem(Ae.getUserKey("agent_hl_vault_salt"));if(!W||!H)throw new Error("No encrypted key found. Please set up your wallet first.");const B=await Ef.migrateToSession(W,H,j,F);if(!B.success)throw new Error(B.error||"Migration failed");g(!1),t==null||t("session")}catch(W){a(W instanceof Error?W.message:"Unknown error")}finally{s(!1)}},U=async j=>{s(!0);try{const F=await Ae.getItem(Ae.getUserKey("agent_hl_vault_enc")),W=await Ae.getItem(Ae.getUserKey("agent_hl_vault_salt"));if(!F||!W)throw new Error("No encrypted key found. Please set up your wallet first.");const H=await Ef.migrateToPersistent(F,W,j);if(!H.success)throw new Error(H.error||"Migration failed");x(!1),t==null||t("persistent")}catch(F){a(F instanceof Error?F.message:"Unknown error")}finally{s(!1)}},R=j=>{switch(j){case"local":return h.jsx(xw,{className:"w-6 h-6"});case"session":return h.jsx(Rs,{className:"w-6 h-6"});case"persistent":return h.jsx($a,{className:"w-6 h-6"})}},$=(j,F,W)=>W?"border-emerald-500/50 bg-emerald-500/5":F?"border-blue-500 bg-blue-500/5":"border-gray-800 hover:border-gray-700 bg-gray-900/40";return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[h.jsx("div",{className:"p-2 bg-blue-500/10 rounded-lg",children:h.jsx(xw,{className:"w-5 h-5 text-blue-400"})}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-bold text-white tracking-tight",children:"Security & Execution"}),h.jsx("p",{className:"text-xs text-gray-500",children:"Choose how your bot runs and stores keys"})]})]}),e.currentTier==="session"&&b.active&&h.jsxs("div",{className:"flex items-center gap-3 p-3 bg-amber-500/10 border border-amber-500/20 rounded-lg animate-in fade-in slide-in-from-top-1",children:[h.jsx("div",{className:"p-1.5 bg-amber-500/20 rounded-full animate-pulse",children:h.jsx(Rs,{className:"w-3.5 h-3.5 text-amber-400"})}),h.jsxs("div",{className:"flex-1",children:[h.jsx("span",{className:"text-sm font-medium text-amber-200",children:"Session Active"}),h.jsxs("span",{className:"text-xs text-amber-200/70 block",children:[b.remainingHours,"h remaining"]})]})]}),h.jsx("div",{className:"grid gap-3",children:Object.keys(KD).map(j=>{const F=KD[j],W=e.currentTier===j,H=n===j;return h.jsxs("button",{onClick:()=>E(j),className:`
                                group relative p-4 rounded-xl border transition-all duration-300 text-left w-full
                                ${$(j,H,W)}
                            `,children:[W&&h.jsxs("div",{className:"absolute top-3 right-3 flex items-center gap-1.5 px-2 py-0.5 rounded-full bg-emerald-500/10 border border-emerald-500/20 backdrop-blur-sm",children:[h.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"}),h.jsx("span",{className:"text-[10px] font-bold text-emerald-400 uppercase tracking-wider",children:"Active"})]}),h.jsxs("div",{className:"flex items-start gap-4",children:[h.jsx("div",{className:`
                                    p-3 rounded-xl transition-colors
                                    ${j==="local"?"bg-emerald-500/10 text-emerald-400 group-hover:bg-emerald-500/20":j==="session"?"bg-amber-500/10 text-amber-400 group-hover:bg-amber-500/20":"bg-red-500/10 text-red-400 group-hover:bg-red-500/20"}
                                `,children:R(j)}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("div",{className:"flex items-center gap-2 mb-1",children:h.jsx("h4",{className:`font-semibold text-sm ${W?"text-white":"text-gray-200 group-hover:text-white"}`,children:F.label})}),h.jsx("p",{className:"text-xs text-gray-500 leading-relaxed mb-3 pr-8",children:F.description}),h.jsxs("div",{className:"flex flex-wrap gap-2",children:[h.jsx("span",{className:`
                                            px-2 py-0.5 text-[10px] uppercase tracking-wider font-medium rounded-md border
                                            ${F.execution24x7?"bg-emerald-500/5 border-emerald-500/20 text-emerald-400":"bg-gray-800 border-gray-700 text-gray-400"}
                                        `,children:F.execution24x7?"24/7 Cloud Run":"Browser Only"}),h.jsx("span",{className:`
                                            px-2 py-0.5 text-[10px] uppercase tracking-wider font-medium rounded-md border
                                            ${F.securityLevel===3?"bg-emerald-500/5 border-emerald-500/20 text-emerald-400":F.securityLevel===2?"bg-amber-500/5 border-amber-500/20 text-amber-400":"bg-red-500/5 border-red-500/20 text-red-400"}
                                        `,children:F.securityLevel===3?"High Security":F.securityLevel===2?"Medium Security":"Low Security"})]})]})]})]},j)})}),(n==="session"||n==="persistent"||u)&&h.jsx("div",{className:"pt-2",children:h.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg border transition-all ${u?"bg-emerald-900/10 border-emerald-500/20":"bg-blue-900/10 border-blue-500/20"}`,children:[h.jsx("div",{className:`p-1.5 rounded-md ${u?"bg-emerald-500/20":"bg-blue-500/20"}`,children:h.jsx(r8,{className:`w-3.5 h-3.5 ${u?"text-emerald-400":"text-blue-400"}`})}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("p",{className:`text-xs font-medium ${u?"text-emerald-200":"text-blue-200"}`,children:u?"Supabase Connected":"Supabase Connection Required"}),h.jsx("p",{className:`text-[10px] truncate ${u?"text-emerald-200/60":"text-blue-200/60"}`,children:u?`Project: ${(V=rs.getConfig())==null?void 0:V.projectId}`:"Required for cloud execution modes"})]}),u&&h.jsx("button",{onClick:()=>c(!0),className:"text-[10px] font-medium text-emerald-400 hover:text-emerald-300 transition-colors px-2 py-1 bg-emerald-500/10 rounded hover:bg-emerald-500/20",children:"Edit"})]})}),o&&h.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/30 rounded-lg animate-in fade-in slide-in-from-top-1",children:h.jsx("p",{className:"text-xs text-red-300 font-medium",children:o})}),h.jsx(Gpt,{isOpen:l,onClose:()=>{c(!1),n!==e.currentTier&&r(e.currentTier)},onConnect:C}),h.jsx(Kpt,{isOpen:m,onClose:()=>g(!1),onConfirm:O,isLoading:i,error:o}),h.jsx(Wpt,{isOpen:v,onClose:()=>x(!1),onConfirm:U,isLoading:i,error:o})]})},Jpt=({addNotification:t,password:e})=>{var D,z,G,te;const{user:n,logout:r,deleteAccount:i}=A1(),[s,o]=T.useState(!1),[a,l]=T.useState(!1),[c,u]=T.useState(""),[f,m]=T.useState(!1),[g,v]=T.useState(null),[x,b]=T.useState(!1),[E,C]=T.useState(!1),[k,O]=T.useState(""),U=T.useRef(null),[R,$]=T.useState(!1),[V,j]=T.useState(""),F=async K=>{var q,M,_,Y,X,re,oe,Ee,ce,me,ue,le,Ie,Ne,$e,Ze,Ye,We,At,ot,Bt,Zt,Ge,Tt,ln,Pe,Ve,ht,ct,se,J,Z,fe,be,he,ye,Xe,et,st,Ft;if(!(n!=null&&n.uid)){t("No user session found");return}b(!0);try{const vt=Ae.getUserKey("agent_activity_log"),Ot=Ae.getUserKey("vault_dealer_strategy"),cn=Ae.getUserKey("agent_scheduler_tasks"),[en,rn,Ci]=await Promise.all([Ae.getItem(vt),Ae.getItem(Ot),Ae.getItem(cn)]);let zn=[];if(K){const it=await td.getHistory();for(const mn of it)try{const yt=await td.loadConversation(mn.id,K);yt&&zn.push(yt)}catch(yt){console.warn(`Failed to decrypt conversation ${mn.id}`,yt)}}const ae=await Ae.getItem(Ae.getUserKey("vault_dealer_storage"));let Q=null;if(ae)try{const it=JSON.parse(ae);Q={strategyPrompt:(q=it.settings)==null?void 0:q.strategyPrompt,aggressiveMode:(M=it.settings)==null?void 0:M.aggressiveMode,maxLeverage:(_=it.settings)==null?void 0:_.maxLeverage,maxPositionSizeUSDC:(Y=it.settings)==null?void 0:Y.maxPositionSizeUSDC,maxOpenPositions:(X=it.settings)==null?void 0:X.maxOpenPositions,bankrollType:(re=it.settings)==null?void 0:re.bankrollType,manualBankroll:(oe=it.settings)==null?void 0:oe.manualBankroll,tradingPairs:(Ee=it.settings)==null?void 0:Ee.tradingPairs,checkIntervalSeconds:(ce=it.settings)==null?void 0:ce.checkIntervalSeconds,analysisTimeframe:(me=it.settings)==null?void 0:me.analysisTimeframe,historyCandles:(ue=it.settings)==null?void 0:ue.historyCandles,macroTimeframeEnabled:(le=it.settings)==null?void 0:le.macroTimeframeEnabled,macroTimeframe:(Ie=it.settings)==null?void 0:Ie.macroTimeframe,macroEnabledIndicators:(Ne=it.settings)==null?void 0:Ne.macroEnabledIndicators,indicatorSettings:($e=it.settings)==null?void 0:$e.indicatorSettings,autonomousIndicators:(Ze=it.settings)==null?void 0:Ze.autonomousIndicators,selectedPreset:(Ye=it.settings)==null?void 0:Ye.selectedPreset,promptMode:(We=it.settings)==null?void 0:We.promptMode,stopLossEnabled:(At=it.settings)==null?void 0:At.stopLossEnabled,stopLossPercent:(ot=it.settings)==null?void 0:ot.stopLossPercent,takeProfitEnabled:(Bt=it.settings)==null?void 0:Bt.takeProfitEnabled,takeProfitPercent:(Zt=it.settings)==null?void 0:Zt.takeProfitPercent}}catch(it){console.error("Failed to parse dealer settings",it)}const ee=await Ae.getItem(Ae.getUserKey("vault_polymarket_storage"));let pe=null,ke;if(ee)try{const it=JSON.parse(ee);pe={strategyPrompt:(Ge=it.settings)==null?void 0:Ge.strategyPrompt,promptMode:(Tt=it.settings)==null?void 0:Tt.promptMode,selectedPreset:(ln=it.settings)==null?void 0:ln.selectedPreset,marketSelectionMode:(Pe=it.settings)==null?void 0:Pe.marketSelectionMode,selectedMarkets:(Ve=it.settings)==null?void 0:Ve.selectedMarkets,allowedCategories:(ht=it.settings)==null?void 0:ht.allowedCategories,maxPositionSizeUSDC:(ct=it.settings)==null?void 0:ct.maxPositionSizeUSDC,maxOpenPositions:(se=it.settings)==null?void 0:se.maxOpenPositions,minLiquidity:(J=it.settings)==null?void 0:J.minLiquidity,minVolume24h:(Z=it.settings)==null?void 0:Z.minVolume24h,minVolumeThreshold:(fe=it.settings)==null?void 0:fe.minVolumeThreshold,minLiquidityThreshold:(be=it.settings)==null?void 0:be.minLiquidityThreshold,minSpreadThreshold:(he=it.settings)==null?void 0:he.minSpreadThreshold,confidenceThreshold:(ye=it.settings)==null?void 0:ye.confidenceThreshold,bankrollType:(Xe=it.settings)==null?void 0:Xe.bankrollType,manualBankroll:(et=it.settings)==null?void 0:et.manualBankroll,checkIntervalSeconds:(st=it.settings)==null?void 0:st.checkIntervalSeconds},ke=(Ft=it.settings)==null?void 0:Ft.strategyPrompt}catch(it){console.error("Failed to parse polymarket settings",it)}const Re={version:"1.0",exportedAt:new Date().toISOString(),data:{activityLog:en?JSON.parse(en):[],conversations:zn.length>0?zn:void 0,hyperliquidDealer:{settings:Q,strategyPrompt:rn||void 0},polymarketDealer:{settings:pe,strategyPrompt:ke},schedulerTasks:Ci?JSON.parse(Ci):[]}},ze=new Blob([JSON.stringify(Re,null,2)],{type:"application/json"}),Jt=URL.createObjectURL(ze),$t=document.createElement("a");$t.href=Jt,$t.download=`autonomousvault_backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild($t),$t.click(),document.body.removeChild($t),URL.revokeObjectURL(Jt),t("Backup exported successfully!"),$(!1),j("")}catch(vt){console.error("Export failed:",vt),t("Failed to export data")}finally{b(!1)}},W=()=>{j(""),$(!0)},H=()=>{if(!V){t("Please enter your password");return}if(V!==e){t("Incorrect password");return}F(V)},B=K=>{var _;const q=(_=K.target.files)==null?void 0:_[0];if(!q)return;const M=new FileReader;M.onload=Y=>{var X;try{const re=(X=Y.target)==null?void 0:X.result,oe=JSON.parse(re);if(!oe.version||!oe.data){t("Invalid backup file format");return}v(oe),m(!0)}catch(re){console.error("Failed to parse backup file:",re),t("Failed to read backup file")}},M.readAsText(q),U.current&&(U.current.value="")},A=async()=>{var K,q,M,_,Y,X,re;if(!(!g||!(n!=null&&n.uid))){C(!0);try{const{data:oe}=g;if((K=oe.activityLog)!=null&&K.length){const ce=Ae.getUserKey("agent_activity_log");await Ae.setItem(ce,JSON.stringify(oe.activityLog))}if((q=oe.schedulerTasks)!=null&&q.length){const ce=Ae.getUserKey("agent_scheduler_tasks");await Ae.setItem(ce,JSON.stringify(oe.schedulerTasks))}if((M=oe.hyperliquidDealer)!=null&&M.strategyPrompt){const ce=Ae.getUserKey("vault_dealer_strategy");await Ae.setItem(ce,oe.hyperliquidDealer.strategyPrompt)}const Ee=e||k;if((_=oe.conversations)!=null&&_.length){if(!Ee){t("ERROR: Password required to import conversations"),C(!1);return}console.log(`[Import] Restoring ${oe.conversations.length} conversations using provided password...`);for(const ce of oe.conversations)try{await td.saveConversation(ce,Ee)}catch(me){console.warn(`Failed to restore conversation ${ce.id}`,me)}}if((Y=oe.hyperliquidDealer)!=null&&Y.settings){const ce=await Ae.getItem(Ae.getUserKey("vault_dealer_storage"));try{const me=ce?JSON.parse(ce):{settings:{}};me.settings={...me.settings,...oe.hyperliquidDealer.settings},await Ae.setItem(Ae.getUserKey("vault_dealer_storage"),JSON.stringify(me))}catch(me){console.error("Failed to merge dealer settings",me)}}if((X=oe.polymarketDealer)!=null&&X.settings||(re=oe.polymarketDealer)!=null&&re.strategyPrompt){console.log("[Import] Restoring Polymarket settings:",oe.polymarketDealer);const ce=await Ae.getItem(Ae.getUserKey("vault_polymarket_storage"));try{const me=ce?JSON.parse(ce):{settings:{}};oe.polymarketDealer.settings&&(me.settings={...me.settings,...oe.polymarketDealer.settings}),oe.polymarketDealer.strategyPrompt&&(me.settings={...me.settings,strategyPrompt:oe.polymarketDealer.strategyPrompt}),console.log("[Import] Saving Polymarket settings:",me.settings),await Ae.setItem(Ae.getUserKey("vault_polymarket_storage"),JSON.stringify(me))}catch(me){console.error("Failed to merge polymarket settings",me)}}else console.log("[Import] No Polymarket settings to restore");console.log("[Import] Reloading stores from storage..."),await ft.reloadFromStorage(),await lt.reloadFromStorage(),t("Data restored successfully!"),m(!1),v(null)}catch(oe){console.error("Import failed:",oe),t("Failed to import data")}finally{C(!1)}}},I=async()=>{if(!(!n||c!=="DELETE")){l(!0);try{ft.reset(),lt.reset(),await i(),t("Account deleted successfully")}catch(K){console.error("Delete account failed:",K),t(K.message||"Failed to delete account"),l(!1)}}};return h.jsxs(Ht.div,{className:"flex flex-col gap-6",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:[h.jsxs("div",{className:"flex flex-col gap-2 mb-2",children:[h.jsx("h1",{className:"text-3xl font-light tracking-tight text-white",children:"User Settings"}),h.jsx("p",{className:"text-sm text-gray-500 font-light",children:"Manage security, backups, and account data."})]}),h.jsxs("div",{className:"columns-1 lg:columns-2 gap-6 space-y-6",children:[h.jsxs("section",{className:"rounded-lg border border-gray-800/60 overflow-hidden break-inside-avoid",children:[h.jsxs("div",{className:"px-6 py-4 border-b border-gray-800/60 flex items-center gap-3",children:[h.jsx("div",{className:"p-2 bg-gray-800/30 rounded-lg",children:h.jsx(xw,{className:"h-4 w-4 text-emerald-400"})}),h.jsx("h2",{className:"text-sm font-medium text-gray-200 tracking-wide",children:"Security Tier"})]}),h.jsx("div",{className:"p-6",children:h.jsx(Ypt,{onTierChange:K=>t(`Security tier changed to ${K}`)})})]}),h.jsxs("section",{className:"rounded-lg border border-gray-800/60 overflow-hidden break-inside-avoid",children:[h.jsxs("div",{className:"px-6 py-4 border-b border-gray-800/60 flex items-center gap-3",children:[h.jsx("div",{className:"p-2 bg-gray-800/30 rounded-lg",children:h.jsx(o8,{className:"h-4 w-4 text-blue-400"})}),h.jsxs("div",{className:"flex-1",children:[h.jsx("h2",{className:"text-sm font-medium text-gray-200 tracking-wide",children:"Data Backup"}),h.jsx("p",{className:"text-[11px] text-gray-500 mt-0.5",children:"Export your settings to move to another device"})]})]}),h.jsxs("div",{className:"p-6",children:[h.jsxs("p",{className:"text-xs text-gray-500 mb-5 font-light leading-relaxed",children:["Export your full configuration history, conversations, and strategies to a JSON file.",h.jsx("br",{}),h.jsx("span",{className:"text-amber-500/80 font-medium",children:" Note: Private keys and sensitive API tokens are never included in exports."})]}),h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[h.jsxs("button",{onClick:W,disabled:x,className:"group flex items-start gap-4 p-4 border border-gray-800/60 rounded-lg hover:border-gray-700 transition-all text-left",children:[h.jsx("div",{className:"p-2 rounded-lg bg-emerald-500/10 text-emerald-500 group-hover:text-emerald-400 transition-colors",children:h.jsx(Uo,{size:18})}),h.jsxs("div",{className:"flex-1",children:[h.jsx("span",{className:"text-sm font-semibold text-gray-200 block mb-1 group-hover:text-white transition-colors",children:x?"Exporting...":"Export Data"}),h.jsx("p",{className:"text-[11px] text-gray-500 leading-snug",children:"Download settings backup file"})]})]}),h.jsxs("button",{onClick:()=>{var K;return(K=U.current)==null?void 0:K.click()},className:"group flex items-start gap-4 p-4 border border-gray-800/60 rounded-lg hover:border-gray-700 transition-all text-left",children:[h.jsx("div",{className:"p-2 rounded-lg bg-blue-500/10 text-blue-500 group-hover:text-blue-400 transition-colors",children:h.jsx(VT,{size:18})}),h.jsxs("div",{className:"flex-1",children:[h.jsx("span",{className:"text-sm font-semibold text-gray-200 block mb-1 group-hover:text-white transition-colors",children:"Import Data"}),h.jsx("p",{className:"text-[11px] text-gray-500 leading-snug",children:"Restore from backup JSON"})]})]}),h.jsx("input",{ref:U,type:"file",accept:".json",onChange:B,className:"hidden"})]})]})]}),h.jsxs("section",{className:"rounded-lg border border-red-900/20 overflow-hidden break-inside-avoid",children:[h.jsxs("div",{className:"px-6 py-4 border-b border-red-900/20 flex items-center gap-3 bg-red-950/10",children:[h.jsx("div",{className:"p-2 bg-red-900/20 rounded-lg",children:h.jsx(cm,{className:"h-4 w-4 text-red-400"})}),h.jsx("div",{className:"flex-1",children:h.jsx("h2",{className:"text-sm font-medium text-red-200 tracking-wide",children:"Danger Zone"})})]}),h.jsxs("div",{className:"p-6",children:[h.jsxs("div",{className:"mb-4",children:[h.jsx("h3",{className:"text-sm font-medium text-red-300 mb-1",children:"Delete Account"}),h.jsxs("p",{className:"text-xs text-gray-500 leading-relaxed",children:["Permanently remove your account and all associated data. This involves clearing your local storage, dealer settings, and cloud database records. ",h.jsx("strong",{className:"text-red-400/80",children:"This action cannot be undone."})]})]}),h.jsx("button",{onClick:()=>o(!0),className:"px-5 py-2.5 bg-red-500/10 border border-red-500/20 rounded-lg text-red-400 text-xs font-semibold hover:bg-red-500 hover:text-white hover:border-red-500 transition-all whitespace-nowrap",children:"Delete Account"})]})]})]}),s&&h.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/80 backdrop-blur-sm flex items-center justify-center p-4",children:h.jsx(Ht.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-[#13141A] border border-gray-800 w-full max-w-md rounded-xl shadow-2xl overflow-hidden",children:h.jsxs("div",{className:"p-6",children:[h.jsxs("div",{className:"flex items-center gap-4 mb-5",children:[h.jsx("div",{className:"p-3 rounded-full bg-red-500/10",children:h.jsx(_l,{size:24,className:"text-red-400"})}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-bold text-white tracking-tight",children:"Delete Account"}),h.jsx("p",{className:"text-xs text-gray-500",children:"This action is irreversible"})]})]}),h.jsxs("p",{className:"text-sm text-gray-400 mb-5 leading-relaxed",children:["All your data will be permanently deleted.",h.jsx("br",{}),"To confirm, type ",h.jsx("strong",{className:"text-white",children:"DELETE"})," below:"]}),h.jsx("input",{type:"text",value:c,onChange:K=>u(K.target.value),placeholder:"Type DELETE to confirm",className:"w-full px-4 py-2.5 bg-transparent border border-gray-800 rounded-lg text-white placeholder:text-gray-600 focus:outline-none focus:border-red-500/50 focus:ring-1 focus:ring-red-500/20 transition-all mb-5 text-sm"}),h.jsxs("div",{className:"flex gap-3",children:[h.jsx("button",{onClick:()=>{o(!1),u("")},className:"flex-1 px-4 py-2.5 bg-gray-800 rounded-lg text-gray-300 text-sm font-medium hover:bg-gray-700 transition-colors",children:"Cancel"}),h.jsx("button",{onClick:I,disabled:c!=="DELETE"||a,className:jt("flex-1 px-4 py-2.5 rounded-lg text-sm font-medium transition-all",c==="DELETE"?"bg-red-500 text-white hover:bg-red-600":"bg-red-500/20 text-red-500/40 cursor-not-allowed"),children:a?"Deleting...":"Delete Account"})]})]})})}),f&&g&&h.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/80 backdrop-blur-sm flex items-center justify-center p-4",children:h.jsx(Ht.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-[#13141A] border border-gray-800 w-full max-w-md rounded-xl shadow-2xl overflow-hidden",children:h.jsxs("div",{className:"p-6",children:[h.jsxs("div",{className:"flex items-center gap-4 mb-5",children:[h.jsx("div",{className:"p-3 rounded-full bg-blue-500/10",children:h.jsx(VT,{size:24,className:"text-blue-400"})}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-bold text-white tracking-tight",children:"Import Backup"}),h.jsxs("p",{className:"text-xs text-gray-500",children:["Created: ",new Date(g.exportedAt).toLocaleDateString()]})]})]}),h.jsxs("div",{className:"border border-gray-800 rounded-lg p-4 mb-5 space-y-2",children:[h.jsx("p",{className:"text-[10px] text-gray-500 font-semibold uppercase tracking-wider mb-2",children:"Data to restore:"}),(D=g.data.activityLog)!=null&&D.length?h.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-300",children:[h.jsx($g,{size:12,className:"text-emerald-500"}),h.jsxs("span",{children:["Activity Log (",g.data.activityLog.length," items)"]})]}):null,(z=g.data.conversations)!=null&&z.length?h.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-300",children:[h.jsx($g,{size:12,className:"text-emerald-500"}),h.jsxs("span",{children:["Conversations (",g.data.conversations.length," chats)"]})]}):null,(G=g.data.hyperliquidDealer)!=null&&G.settings?h.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-300",children:[h.jsx($g,{size:12,className:"text-emerald-500"}),h.jsx("span",{children:"Hyperliquid Dealer Settings"})]}):null,h.jsxs("div",{className:"text-[10px] text-gray-600 pl-5",children:["...and ",Object.keys(g.data).length-2," other data points"]})]}),(te=g.data.conversations)!=null&&te.length?h.jsxs("div",{className:"mb-5",children:[h.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Encryption password required:"}),h.jsx("input",{type:"password",value:k,onChange:K=>O(K.target.value),placeholder:"Enter encryption password",className:"w-full px-4 py-2.5 bg-transparent border border-gray-800 rounded-lg text-white placeholder:text-gray-600 focus:outline-none focus:border-blue-500/50 transition-all text-sm"}),!k&&!e&&h.jsxs("p",{className:"text-[10px] text-amber-500 mt-1.5 flex items-center gap-1",children:[h.jsx(_l,{size:10})," Password required to decrypt conversations"]})]}):null,h.jsxs("div",{className:"flex gap-3",children:[h.jsx("button",{onClick:()=>{m(!1),v(null),O("")},className:"flex-1 px-4 py-2.5 bg-gray-800 rounded-lg text-gray-300 text-sm font-medium hover:bg-gray-700 transition-colors",children:"Cancel"}),h.jsx("button",{onClick:A,disabled:E,className:"flex-1 px-4 py-2.5 bg-white text-black rounded-lg text-sm font-semibold hover:bg-gray-200 transition-colors disabled:opacity-50",children:E?"Importing...":"Restore Data"})]})]})})}),R&&h.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/80 backdrop-blur-sm flex items-center justify-center p-4",children:h.jsx(Ht.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-[#13141A] border border-gray-800 w-full max-w-md rounded-xl shadow-2xl overflow-hidden",children:h.jsxs("div",{className:"p-6",children:[h.jsxs("div",{className:"flex items-center gap-4 mb-5",children:[h.jsx("div",{className:"p-3 rounded-full bg-emerald-500/10",children:h.jsx(Uo,{size:24,className:"text-emerald-400"})}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-bold text-white tracking-tight",children:"Confirm Export"}),h.jsx("p",{className:"text-xs text-gray-500",children:"Security check required"})]})]}),h.jsx("p",{className:"text-sm text-gray-400 mb-5 leading-relaxed",children:"Please enter your Vault password to authorize the export. This ensures only you can download your data."}),h.jsx("div",{className:"mb-5",children:h.jsx("input",{type:"password",value:V,onChange:K=>j(K.target.value),placeholder:"Enter Vault password",className:"w-full px-4 py-2.5 bg-transparent border border-gray-800 rounded-lg text-white placeholder:text-gray-600 focus:outline-none focus:border-emerald-500/50 transition-all text-sm",onKeyDown:K=>{K.key==="Enter"&&H()}})}),h.jsxs("div",{className:"flex gap-3",children:[h.jsx("button",{onClick:()=>{$(!1),j("")},className:"flex-1 px-4 py-2.5 bg-gray-800 rounded-lg text-gray-300 text-sm font-medium hover:bg-gray-700 transition-colors",children:"Cancel"}),h.jsx("button",{onClick:H,className:"flex-1 px-4 py-2.5 bg-white text-black rounded-lg text-sm font-semibold hover:bg-gray-200 transition-colors",children:"Export"})]})]})})})]})},j3={operator:{name:"Chat Operator",shortName:"Operator",icon:h.jsx($Te,{size:16}),description:"Chat assistant",color:"#9b87f5"},hyperliquidDealer:{name:"Hyperliquid Dealer",shortName:"Hyperliquid",icon:h.jsx(In,{size:16}),description:"Perp trading",color:"#E7FE55"},polymarketDealer:{name:"Polymarket Dealer",shortName:"Polymarket",icon:h.jsx(zg,{size:16}),description:"Predictions",color:"#22d3ee"}},Xpt=({vault:t,password:e,addNotification:n,activeTab:r,setActiveTab:i})=>{const[s,o]=T.useState("gemini"),[a,l]=T.useState({gemini:"",openai:"",claude:""}),[c,u]=T.useState({gemini:!1,openai:!1,claude:!1}),[f,m]=T.useState({gemini:"empty",openai:"empty",claude:"empty"}),[g,v]=T.useState({operator:{providerType:"gemini",modelId:"gemini-2.5-flash"},hyperliquidDealer:{providerType:"gemini",modelId:"gemini-2.5-flash"},polymarketDealer:{providerType:"gemini",modelId:"gemini-2.5-flash"}}),[x,b]=T.useState("devnet"),[E,C]=T.useState("testnet");T.useEffect(()=>{const j=Un.getSnapshot(),F={gemini:"",openai:"",claude:""},W={gemini:"empty",openai:"empty",claude:"empty"};for(const B of["gemini","openai","claude"]){const A=Un.getApiKey(B);F[B]=A,W[B]=A?"saved":"empty"}l(F),m(W),v(j.componentConfigs);const H=Un.subscribe(()=>{const B=Un.getSnapshot();v(B.componentConfigs)});return()=>{H()}},[]);const k=(j,F)=>{l(H=>({...H,[j]:F}));const W=Un.getApiKey(j);m(H=>({...H,[j]:F===""?"empty":F!==W?"modified":"saved"}))},O=j=>{const F=a[j].trim();F&&(Un.setApiKey(j,F),m(W=>({...W,[j]:"saved"})),n(`${hu[j].name} API Key saved!`))},U=j=>{Un.clearApiKey(j),l(F=>({...F,[j]:""})),m(F=>({...F,[j]:"empty"})),n(`${hu[j].name} API Key cleared`)},R=(j,F)=>{var A;const H=((A=ry[F][0])==null?void 0:A.id)||"",B={providerType:F,modelId:H};Un.isProviderConfigured(F)?(Un.setComponentConfig(j,B),n(`${j3[j].name} now using ${hu[F].name}`)):n(`Please configure ${hu[F].name} API key first`)},$=(j,F)=>{const W=g[j],H={...W,modelId:F};Un.setComponentConfig(j,H);const B=ry[W.providerType].find(A=>A.id===F);n(`${j3[j].name} model changed to ${(B==null?void 0:B.name)||F}`)},V=()=>Un.getConfiguredProviders();return h.jsx(Ht.div,{className:"h-full flex flex-col overflow-y-auto custom-scrollbar",initial:{opacity:0},animate:{opacity:1},transition:{duration:.4},children:h.jsxs("div",{className:"flex-1 w-full max-w-5xl mx-auto px-6 py-8 flex flex-col gap-6",children:[r!=="user"&&h.jsxs("header",{className:"mb-2",children:[h.jsx("h1",{className:"text-3xl font-light tracking-tight text-white",children:"System Configuration"}),h.jsx("p",{className:"text-sm text-gray-500 mt-2 font-light",children:"Manage your AI providers, model assignments, and network connections."})]}),r==="user"?h.jsx(Jpt,{addNotification:n,password:e}):h.jsxs("div",{className:"columns-1 lg:columns-2 gap-6 space-y-6",children:[h.jsxs("section",{className:"rounded-lg border border-gray-800/60 overflow-hidden break-inside-avoid",children:[h.jsxs("div",{className:"px-6 py-4 border-b border-gray-800/60 flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"p-2 bg-gray-800/30 rounded-lg",children:h.jsx(Ane,{className:"h-4 w-4 text-white"})}),h.jsx("h2",{className:"text-sm font-medium text-gray-200 tracking-wide",children:"AI Providers"})]}),h.jsx("div",{className:"flex items-center gap-2",children:["gemini","openai","claude"].map(j=>h.jsx("div",{className:jt("w-1.5 h-1.5 rounded-full transition-all",f[j]==="saved"?"bg-emerald-500":"bg-gray-700"),title:`${hu[j].name}: ${f[j]==="saved"?"Configured":"Not configured"}`},j))})]}),h.jsxs("div",{className:"p-6",children:[h.jsx("div",{className:"flex items-center gap-6 border-b border-gray-800/60 mb-6 pb-1",children:["gemini","openai","claude"].map(j=>{const F=s===j;return h.jsxs("button",{onClick:()=>o(j),className:jt("relative pb-3 text-sm font-medium transition-all",F?"text-white":"text-gray-500 hover:text-gray-300"),children:[hu[j].name,F&&h.jsx(Ht.div,{layoutId:"activeTab",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-[#E7FE55]"})]},j)})}),h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsxs("label",{className:"text-xs font-medium text-gray-400 uppercase tracking-wider flex items-center gap-2",children:[h.jsx("span",{children:"API Key"}),f[s]==="saved"&&h.jsxs("span",{className:"text-emerald-500 flex items-center gap-1 normal-case tracking-normal bg-emerald-500/10 px-2 py-0.5 rounded text-[10px] font-semibold",children:[h.jsx($g,{size:10})," Saved"]})]}),h.jsxs("a",{href:hu[s].keyUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-[#E7FE55] hover:underline flex items-center gap-1 transition-colors",children:["Get API key ",h.jsx(ex,{size:10})]})]}),h.jsxs("div",{className:"relative group mb-4",children:[h.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:h.jsx(E4,{size:14,className:"text-gray-600 group-focus-within:text-white transition-colors"})}),h.jsx("input",{type:c[s]?"text":"password",value:a[s],onChange:j=>k(s,j.target.value),placeholder:`Enter ${hu[s].name} key...`,className:"w-full bg-transparent border border-gray-800 rounded-lg py-2.5 pl-10 pr-10 text-sm text-gray-200 focus:outline-none focus:border-[#E7FE55]/50 focus:ring-1 focus:ring-[#E7FE55]/20 font-mono transition-all placeholder:text-gray-700"}),h.jsx("button",{type:"button",onClick:()=>u(j=>({...j,[s]:!j[s]})),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-600 hover:text-white transition-colors",children:c[s]?h.jsx(t2,{size:14}):h.jsx(i8,{size:14})})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("button",{onClick:()=>O(s),disabled:f[s]!=="modified",className:jt("h-9 px-5 rounded-lg text-sm font-medium transition-all",f[s]==="modified"?"bg-white text-black hover:bg-gray-200":"bg-gray-800/50 text-gray-500 cursor-not-allowed border border-gray-800"),children:"Save Changes"}),f[s]!=="empty"&&h.jsx("button",{onClick:()=>U(s),className:"h-9 px-4 rounded-lg text-sm text-gray-500 hover:text-red-400 hover:bg-red-500/10 transition-all ml-auto",children:"Disconnect"})]})]})]})]}),h.jsxs("section",{className:"rounded-lg border border-gray-800/60 overflow-hidden break-inside-avoid",children:[h.jsxs("div",{className:"px-6 py-4 border-b border-gray-800/60 flex items-center gap-3",children:[h.jsx("div",{className:"p-2 bg-gray-800/30 rounded-lg",children:h.jsx(eT,{className:"h-4 w-4 text-white"})}),h.jsxs("div",{className:"text-left",children:[h.jsx("h2",{className:"text-sm font-medium text-gray-200 tracking-wide",children:"Network Settings"}),h.jsx("p",{className:"text-xs text-gray-500",children:"Configure blockchain connections"})]})]}),h.jsxs("div",{className:"p-6 space-y-4",children:[h.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border border-gray-800/40",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-800/50 border border-gray-800 flex items-center justify-center",children:h.jsx($a,{size:14,className:"text-[#9945FF]"})}),h.jsxs("div",{children:[h.jsx("span",{className:"text-sm text-gray-300 font-medium block",children:"Solana"}),h.jsx("span",{className:"text-xs text-gray-600 block",children:"Blockchain Network"})]})]}),h.jsxs("div",{className:"flex rounded-lg p-1 border border-gray-800/60",children:[h.jsx("button",{onClick:()=>b("devnet"),className:jt("px-4 py-1.5 rounded-md text-xs font-medium transition-all",x==="devnet"?"bg-gray-800 text-white":"text-gray-500 hover:text-gray-300"),children:"Devnet"}),h.jsxs("button",{disabled:!0,className:"px-4 py-1.5 rounded-md text-xs text-gray-600 flex items-center gap-1.5 cursor-not-allowed opacity-60",children:["Mainnet ",h.jsx("span",{className:"text-[9px] bg-gray-800 text-gray-400 px-1 rounded uppercase tracking-wider",children:"Soon"})]})]})]}),h.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border border-gray-800/40",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-800/50 border border-gray-800 flex items-center justify-center",children:h.jsx(In,{size:14,className:"text-[#E7FE55]"})}),h.jsxs("div",{children:[h.jsx("span",{className:"text-sm text-gray-300 font-medium block",children:"Hyperliquid"}),h.jsx("span",{className:"text-xs text-gray-600 block",children:"Trading Engine"})]})]}),h.jsxs("div",{className:"flex rounded-lg p-1 border border-gray-800/60",children:[h.jsx("button",{onClick:()=>C("testnet"),className:jt("px-4 py-1.5 rounded-md text-xs font-medium transition-all",E==="testnet"?"bg-gray-800 text-white":"text-gray-500 hover:text-gray-300"),children:"Testnet"}),h.jsxs("button",{disabled:!0,className:"px-4 py-1.5 rounded-md text-xs text-gray-600 flex items-center gap-1.5 cursor-not-allowed opacity-60",children:["Mainnet ",h.jsx("span",{className:"text-[9px] bg-gray-800 text-gray-400 px-1 rounded uppercase tracking-wider",children:"Soon"})]})]})]})]})]}),h.jsxs("section",{className:"rounded-lg border border-gray-800/60 overflow-hidden break-inside-avoid",children:[h.jsxs("div",{className:"px-6 py-4 border-b border-gray-800/60 flex items-center gap-3",children:[h.jsx("div",{className:"p-2 bg-gray-800/30 rounded-lg",children:h.jsx(yo,{className:"h-4 w-4 text-white"})}),h.jsx("h2",{className:"text-sm font-medium text-gray-200 tracking-wide",children:"Model Assignment"})]}),h.jsx("div",{className:"p-6",children:h.jsx("div",{className:"flex flex-col gap-4",children:["operator","hyperliquidDealer","polymarketDealer"].map(j=>{const F=j3[j],W=g[j],H=ry[W.providerType],B=V(),A=B.includes(W.providerType);return h.jsxs("div",{className:"group p-4 rounded-lg border border-gray-800/60 hover:border-gray-700 transition-all duration-300",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[h.jsx("div",{className:"p-1.5 rounded-lg shrink-0",style:{backgroundColor:`${F.color}10`,color:F.color},children:F.icon}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("h3",{className:"text-sm font-semibold text-gray-200",children:F.shortName}),h.jsx("span",{className:jt("w-2 h-2 rounded-full",A?"bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.4)]":"bg-amber-500")})]}),h.jsx("p",{className:"text-[11px] text-gray-500 mt-0.5",children:F.description})]})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-[10px] text-gray-500 font-semibold uppercase tracking-wider mb-1.5 block",children:"Provider"}),h.jsxs(see,{value:W.providerType,onValueChange:I=>R(j,I),children:[h.jsx(fL,{className:"w-full h-9 bg-transparent border-gray-800 hover:border-gray-700 text-xs text-gray-300 focus:ring-1 focus:ring-gray-700 transition-colors",children:h.jsx(oee,{})}),h.jsx(hL,{className:"bg-[#1A1B21] border-[#2E2F36]",children:["gemini","openai","claude"].map(I=>{const D=hu[I],z=B.includes(I);return h.jsx(pL,{value:I,disabled:!z,className:"text-xs text-gray-300 focus:bg-[#2E2F36] focus:text-white",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{children:D.name}),!z&&h.jsx("span",{className:"opacity-50 text-[10px] ml-auto",children:"(no key)"})]})},I)})})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-[10px] text-gray-500 font-semibold uppercase tracking-wider mb-1.5 block",children:"Model"}),h.jsxs(see,{value:W.modelId,onValueChange:I=>$(j,I),children:[h.jsx(fL,{className:"w-full h-9 bg-transparent border-gray-800 hover:border-gray-700 text-xs text-gray-300 focus:ring-1 focus:ring-gray-700 transition-colors",children:h.jsx(oee,{})}),h.jsx(hL,{className:"bg-[#1A1B21] border-[#2E2F36]",children:H.map(I=>h.jsx(pL,{value:I.id,className:"text-xs text-gray-300 focus:bg-[#2E2F36] focus:text-white",children:I.name},I.id))})]})]})]})]},j)})})})]})]})]})})},Qpt=(t,e,n)=>t*n.inputPricePerMillion/1e6+e*n.outputPricePerMillion/1e6,Zpt=({addNotification:t})=>{const[e,n]=T.useState(null),[r,i]=T.useState([]),[s,o]=T.useState(!1),[a,l]=T.useState(!1),[c,u]=T.useState(20),[f,m]=T.useState("ALL"),[g,v]=T.useState(As.getSnapshot().pricing),[x,b]=T.useState(As.getSnapshot().pricing),E=$=>{const V=As.getRecords(1e3),j=As.getStats();if(!j)return null;const F=new Date,W=new Date(F.getFullYear(),F.getMonth(),F.getDate()).getTime(),H=new Date(F.getFullYear(),F.getMonth(),1).getTime();let B=0;const A={MANAGER:0,DEALER:0,POLYMARKET_DEALER:0},I={input:0,output:0,cost:0},D={input:0,output:0,cost:0};for(const z of V){const G=Qpt(z.inputTokens,z.outputTokens,$);B+=G,A[z.source]+=G,z.timestamp>=W&&(I.input+=z.inputTokens,I.output+=z.outputTokens,I.cost+=G),z.timestamp>=H&&(D.input+=z.inputTokens,D.output+=z.outputTokens,D.cost+=G)}return{...j,totalCost:B,bySource:{MANAGER:{...j.bySource.MANAGER,cost:A.MANAGER},DEALER:{...j.bySource.DEALER,cost:A.DEALER},POLYMARKET_DEALER:{...j.bySource.POLYMARKET_DEALER,cost:A.POLYMARKET_DEALER}},today:I,thisMonth:D}};T.useEffect(()=>{const $=()=>{n(E(x)),i(As.getRecords(c,f==="ALL"?void 0:f))};$();const V=As.subscribe($);return()=>{V()}},[c,f]),T.useEffect(()=>{const $=E(x);n($)},[x]);const C=()=>{As.updatePricing(g),b({...g}),t("Pricing updated successfully")},k=()=>{confirm("Are you sure you want to clear all token usage history?")&&(As.clearHistory(),t("Token usage history cleared"))},O=$=>$>=1e6?($/1e6).toFixed(2)+"M":$>=1e3?($/1e3).toFixed(1)+"K":$.toFixed(0),U=$=>"$"+$.toFixed(4),R=$=>new Date($).toLocaleString();return e?h.jsxs(Ht.div,{className:"h-full flex flex-col space-y-6 overflow-y-auto px-1 pb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[h.jsx(Fs,{className:"border-slate-700/50 bg-gradient-to-br from-slate-900/80 to-slate-800/30",children:h.jsxs(vu,{className:"p-5",children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"p-2 rounded-lg bg-indigo-500/20",children:h.jsx($a,{className:"text-indigo-400",size:20})}),h.jsx("span",{className:"text-sm text-slate-400",children:"Total Tokens"})]}),h.jsxs(Fi,{variant:"ghost",size:"sm",onClick:k,className:"h-7 px-2 text-xs text-slate-400 hover:text-red-400 hover:bg-red-500/10",children:[h.jsx(cm,{size:14,className:"mr-1"})," Clear"]})]}),h.jsx("div",{className:"text-2xl font-bold text-white",children:O(e.totalInputTokens+e.totalOutputTokens)}),h.jsxs("div",{className:"flex gap-4 mt-2 text-xs text-slate-500",children:[h.jsxs("span",{children:["In: ",O(e.totalInputTokens)]}),h.jsxs("span",{children:["Out: ",O(e.totalOutputTokens)]})]})]})}),h.jsx(Fs,{className:"border-amber-500/30 bg-gradient-to-br from-slate-900/80 to-amber-950/20",children:h.jsxs(vu,{className:"p-5",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[h.jsx("div",{className:"p-2 rounded-lg bg-amber-500/20",children:h.jsx(Sne,{className:"text-amber-400",size:20})}),h.jsx("span",{className:"text-sm text-slate-400",children:"Total Cost"})]}),h.jsx("div",{className:"text-2xl font-bold text-amber-400",children:U(e.totalCost)}),h.jsx("div",{className:"text-xs text-slate-500 mt-2",children:"Estimated based on current pricing"})]})}),h.jsx(Fs,{className:"border-emerald-500/30 bg-gradient-to-br from-slate-900/80 to-emerald-950/20",children:h.jsxs(vu,{className:"p-5",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[h.jsx("div",{className:"p-2 rounded-lg bg-emerald-500/20",children:h.jsx(In,{className:"text-emerald-400",size:20})}),h.jsx("span",{className:"text-sm text-slate-400",children:"Today"})]}),h.jsx("div",{className:"text-2xl font-bold text-white",children:O(e.today.input+e.today.output)}),h.jsx("div",{className:"text-xs text-emerald-400 mt-2",children:U(e.today.cost)})]})}),h.jsx(Fs,{className:"border-blue-500/30 bg-gradient-to-br from-slate-900/80 to-blue-950/20",children:h.jsxs(vu,{className:"p-5",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[h.jsx("div",{className:"p-2 rounded-lg bg-blue-500/20",children:h.jsx(n2,{className:"text-blue-400",size:20})}),h.jsx("span",{className:"text-sm text-slate-400",children:"This Month"})]}),h.jsx("div",{className:"text-2xl font-bold text-white",children:O(e.thisMonth.input+e.thisMonth.output)}),h.jsx("div",{className:"text-xs text-blue-400 mt-2",children:U(e.thisMonth.cost)})]})})]}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[h.jsxs(Fs,{className:"border-indigo-500/30 bg-gradient-to-br from-slate-900/80 to-indigo-950/20",children:[h.jsx(ID,{className:"pb-4",children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"p-2 rounded-lg bg-indigo-500/20",children:h.jsx(Sg,{className:"text-indigo-400",size:24})}),h.jsxs("div",{children:[h.jsx(PD,{className:"text-base",children:"Vault Operator"}),h.jsx(RD,{children:"User queries and tool calls"})]})]})}),h.jsxs(vu,{className:"space-y-3",children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("span",{className:"text-sm text-slate-400",children:"Total Queries"}),h.jsx("span",{className:"text-white font-medium",children:e.managerMetrics.totalQueries})]}),h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("span",{className:"text-sm text-slate-400",children:"Avg Tokens/Query"}),h.jsx("span",{className:"text-white font-medium",children:O(e.managerMetrics.avgTokensPerQuery)})]}),h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("span",{className:"text-sm text-slate-400",children:"Avg Cost/Interaction"}),h.jsx("span",{className:"text-indigo-400 font-medium",children:e.managerMetrics.totalQueries>0?U(e.bySource.MANAGER.cost/e.managerMetrics.totalQueries):"$0.0000"})]}),h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("span",{className:"text-sm text-slate-400",children:"Total Cost"}),h.jsx("span",{className:"text-indigo-400 font-medium",children:U(e.bySource.MANAGER.cost)})]}),h.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-700/50",children:[h.jsxs("div",{className:"flex justify-between text-xs text-slate-500 mb-1",children:[h.jsxs("span",{children:["Input: ",O(e.bySource.MANAGER.input)]}),h.jsxs("span",{children:["Output: ",O(e.bySource.MANAGER.output)]})]}),h.jsxs("div",{className:"h-2 bg-slate-800 rounded-full overflow-hidden flex",children:[h.jsx("div",{className:"bg-indigo-500 h-full",style:{width:`${e.bySource.MANAGER.input/(e.bySource.MANAGER.input+e.bySource.MANAGER.output+1)*100}%`}}),h.jsx("div",{className:"bg-indigo-300 h-full",style:{width:`${e.bySource.MANAGER.output/(e.bySource.MANAGER.input+e.bySource.MANAGER.output+1)*100}%`}})]})]})]})]}),h.jsxs(Fs,{className:"border-amber-500/30 bg-gradient-to-br from-slate-900/80 to-amber-950/20",children:[h.jsx(ID,{className:"pb-4",children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"p-2 rounded-lg bg-amber-500/20",children:h.jsx($a,{className:"text-amber-400",size:24})}),h.jsxs("div",{children:[h.jsx(PD,{className:"text-base",children:"Hyperliquid Dealer"}),h.jsx(RD,{children:"Automated analysis cycles"})]})]})}),h.jsxs(vu,{className:"space-y-3",children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("span",{className:"text-sm text-slate-400",children:"Analysis Cycles"}),h.jsx("span",{className:"text-white font-medium",children:e.bySource.DEALER.count})]}),h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("span",{className:"text-sm text-slate-400",children:"Coins Analyzed"}),h.jsx("span",{className:"text-white font-medium",children:e.dealerMetrics.totalCoinsAnalyzed})]}),h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("span",{className:"text-sm text-slate-400",children:"Avg Cost/Cycle"}),h.jsx("span",{className:"text-amber-400 font-medium",children:e.bySource.DEALER.count>0?U(e.bySource.DEALER.cost/e.bySource.DEALER.count):"$0.0000"})]}),h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("span",{className:"text-sm text-slate-400",children:"Avg Cost/Coin"}),h.jsx("span",{className:"text-amber-400 font-medium",children:e.dealerMetrics.totalCoinsAnalyzed>0?U(e.bySource.DEALER.cost/e.dealerMetrics.totalCoinsAnalyzed):"$0.0000"})]}),h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("span",{className:"text-sm text-slate-400",children:"Total Cost"}),h.jsx("span",{className:"text-amber-400 font-medium",children:U(e.bySource.DEALER.cost)})]}),h.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-700/50",children:[h.jsxs("div",{className:"flex justify-between text-xs text-slate-500 mb-1",children:[h.jsxs("span",{children:["Input: ",O(e.bySource.DEALER.input)]}),h.jsxs("span",{children:["Output: ",O(e.bySource.DEALER.output)]})]}),h.jsxs("div",{className:"h-2 bg-slate-800 rounded-full overflow-hidden flex",children:[h.jsx("div",{className:"bg-amber-500 h-full",style:{width:`${e.bySource.DEALER.input/(e.bySource.DEALER.input+e.bySource.DEALER.output+1)*100}%`}}),h.jsx("div",{className:"bg-amber-300 h-full",style:{width:`${e.bySource.DEALER.output/(e.bySource.DEALER.input+e.bySource.DEALER.output+1)*100}%`}})]})]})]})]})]}),h.jsxs(Fs,{children:[h.jsxs("button",{onClick:()=>o(!s),className:"w-full p-4 flex items-center justify-between hover:bg-slate-800/50 rounded-xl transition-all",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(HT,{size:20,className:"text-slate-400"}),h.jsx("span",{className:"text-white font-medium",children:"Pricing Configuration"})]}),s?h.jsx(am,{size:20,className:"text-slate-400"}):h.jsx(Ic,{size:20,className:"text-slate-400"})]}),s&&h.jsxs(vu,{className:"pt-0 border-t border-slate-700/50",children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm text-slate-400 mb-2",children:"Input Price (per 1M tokens)"}),h.jsx(wx,{type:"number",step:"0.01",value:g.inputPricePerMillion,onChange:$=>v(V=>({...V,inputPricePerMillion:parseFloat($.target.value)||0})),className:"focus-visible:ring-[#E7FE55]/20 focus-visible:border-[#E7FE55]/30"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm text-slate-400 mb-2",children:"Output Price (per 1M tokens)"}),h.jsx(wx,{type:"number",step:"0.01",value:g.outputPricePerMillion,onChange:$=>v(V=>({...V,outputPricePerMillion:parseFloat($.target.value)||0})),className:"focus-visible:ring-[#E7FE55]/20 focus-visible:border-[#E7FE55]/30"})]})]}),h.jsx("div",{className:"mt-4 flex justify-end",children:h.jsx(Fi,{onClick:C,variant:"success",size:"sm",children:"Apply Pricing"})})]})]}),h.jsxs(Fs,{children:[h.jsxs("button",{onClick:()=>l(!a),className:"w-full p-4 flex items-center justify-between hover:bg-slate-800/50 rounded-xl transition-all",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(Pc,{size:20,className:"text-slate-400"}),h.jsx("span",{className:"text-white font-medium",children:"Usage History"}),h.jsxs(Ml,{variant:"secondary",children:[r.length," records"]})]}),a?h.jsx(am,{size:20,className:"text-slate-400"}):h.jsx(Ic,{size:20,className:"text-slate-400"})]}),a&&h.jsxs(vu,{className:"pt-0 border-t border-slate-700/50",children:[h.jsxs("div",{className:"flex items-center gap-4 mt-4 mb-4",children:[h.jsx("div",{className:"flex bg-slate-800 rounded-lg p-1",children:["ALL","MANAGER","DEALER"].map($=>h.jsx(Fi,{variant:f===$?"default":"ghost",size:"sm",onClick:()=>m($),className:"text-xs",children:$},$))}),h.jsxs("select",{value:c,onChange:$=>u(parseInt($.target.value)),className:"bg-slate-800 border border-slate-700 text-white rounded-lg px-3 py-1.5 text-xs",children:[h.jsx("option",{value:10,children:"10 records"}),h.jsx("option",{value:20,children:"20 records"}),h.jsx("option",{value:50,children:"50 records"})]})]}),h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full text-sm",children:[h.jsx("thead",{children:h.jsxs("tr",{className:"text-slate-400 text-xs uppercase border-b border-slate-700",children:[h.jsx("th",{className:"text-left py-3 px-2",children:"Timestamp"}),h.jsx("th",{className:"text-left py-3 px-2",children:"Source"}),h.jsx("th",{className:"text-left py-3 px-2",children:"Operation"}),h.jsx("th",{className:"text-right py-3 px-2",children:"Input"}),h.jsx("th",{className:"text-right py-3 px-2",children:"Output"}),h.jsx("th",{className:"text-right py-3 px-2",children:"Cost"})]})}),h.jsxs("tbody",{children:[r.map($=>h.jsxs("tr",{className:"border-b border-slate-800 hover:bg-slate-800/50",children:[h.jsx("td",{className:"py-2 px-2 text-slate-400 text-xs",children:R($.timestamp)}),h.jsx("td",{className:"py-2 px-2",children:h.jsx(Ml,{variant:$.source==="MANAGER"?"info":"warning",children:$.source})}),h.jsx("td",{className:"py-2 px-2 text-slate-300 text-xs",children:$.operation}),h.jsx("td",{className:"py-2 px-2 text-right text-slate-300",children:O($.inputTokens)}),h.jsx("td",{className:"py-2 px-2 text-right text-slate-300",children:O($.outputTokens)}),h.jsx("td",{className:"py-2 px-2 text-right text-amber-400 font-medium",children:U($.inputTokens*x.inputPricePerMillion/1e6+$.outputTokens*x.outputPricePerMillion/1e6)})]},$.id)),r.length===0&&h.jsx("tr",{children:h.jsx("td",{colSpan:6,className:"py-8 text-center text-slate-500",children:"No usage records yet."})})]})]})})]})]})]}):h.jsx("div",{className:"flex items-center justify-center h-64",children:h.jsx(Ht.div,{className:"h-8 w-8 border-b-2 border-indigo-500 rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}})})},emt=t=>{const e=t.match(/Market:\s*(.+?)(?:\s*\||$)/);return e?e[1].slice(0,30):null},tmt=({status:t,onToggle:e,vaultAddress:n,setActiveTab:r})=>{var F;const[i,s]=T.useState(0),[o,a]=T.useState([]),[l,c]=T.useState({totalPnl:0,winRate:0,totalVolume:0,tradesWithPnl:0}),[u,f]=T.useState(!1),{summary:m,isGenerating:g,cycleCount:v,lastUpdate:x,hasSummary:b}=Mhe("polymarket"),[E,C]=T.useState(0),k=T.useMemo(()=>t.logs.filter(W=>W.type==="REASONING"||W.type==="SIGNAL").slice(0,20),[t.logs]),O=T.useMemo(()=>{var H,B,A;const W=new Map;for(const I of k){const D=emt(I.message)||((A=(B=(H=I.details)==null?void 0:H.context)==null?void 0:B.question)==null?void 0:A.slice(0,30));D&&!W.has(D)&&W.set(D,I)}return Array.from(W.entries()).sort((I,D)=>D[1].timestamp-I[1].timestamp).map(([I,D])=>({market:I,log:D}))},[k]);T.useEffect(()=>{O.length>0&&!t.isAnalyzing&&C(0)},[O.length,t.isAnalyzing]);const U=O[E];T.useEffect(()=>{if(t.operationHistory.length>0){let W=0,H=0,B=0,A=0;const I=[];let D=0;t.operationHistory.slice().reverse().forEach(G=>{const te=G.pnl||0;D+=te,W+=te,A+=G.sizeUSDC,te>0?H++:te<0&&B++,I.push({time:G.timestamp,date:new Date(G.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),pnl:D})});const z=H+B;c({totalPnl:W,winRate:z>0?H/z*100:0,totalVolume:A,tradesWithPnl:z}),a(I)}},[t.operationHistory]),T.useEffect(()=>{if(!n)return;const W=async()=>{try{const B=await ns.getBalance();s(B)}catch(B){console.error("Failed to fetch Polymarket balance",B)}};W();const H=setInterval(W,6e4);return()=>clearInterval(H)},[n]);const R=()=>{n&&e(!t.isOn)},$=T.useMemo(()=>t.activePositions.reduce((W,H)=>W+H.unrealizedPnl,0),[t.activePositions]),V=()=>{C(W=>Math.min(O.length-1,W+1))},j=()=>{C(W=>Math.max(0,W-1))};return n?h.jsxs("div",{className:"flex flex-col h-full gap-4 overflow-y-auto custom-scrollbar pb-4",children:[h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 shrink-0",children:[h.jsxs("div",{className:"lg:col-span-2 flex flex-col gap-4",children:[h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[h.jsx("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("div",{className:`px-3 py-1.5 rounded border flex items-center gap-2 transition-all ${t.isOn?"bg-[#E7FE55]/10 border-[#E7FE55]/30":"bg-[#1a1b21] border-[#232328]"}`,children:[h.jsxs("span",{className:"relative flex h-2 w-2",children:[t.isOn&&h.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-[#E7FE55] opacity-75"}),h.jsx("span",{className:`relative inline-flex rounded-full h-2 w-2 ${t.isOn?"bg-[#E7FE55]":"bg-red-500"}`})]}),h.jsx("span",{className:`font-semibold tracking-wider text-[10px] uppercase ${t.isOn?"text-[#E7FE55]":"text-[#747580]"}`,children:t.isOn?"ACTIVE":"OFFLINE"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-[9px] font-medium text-[#747580] uppercase tracking-[0.1em]",children:"Master"}),h.jsx("button",{onClick:R,className:`relative inline-flex h-5 w-9 items-center rounded-full transition-all focus:outline-none ${t.isOn?"bg-[#E7FE55]":"bg-[#232328] hover:bg-[#2a2b30]"}`,children:h.jsx("span",{className:`${t.isOn?"translate-x-5":"translate-x-1"} inline-block h-3 w-3 transform rounded-full bg-black transition-transform`})})]})]})}),h.jsxs("div",{className:"glass-panel p-4 rounded",children:[h.jsx("div",{className:"text-[10px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Total Profit"}),h.jsxs("div",{className:`text-xl font-semibold font-mono tracking-tight ${l.totalPnl>=0?"text-[#34d399]":"text-red-400"}`,children:[l.totalPnl>=0?"+":"",l.totalPnl.toFixed(2)," USD"]})]}),h.jsxs("div",{className:"glass-panel p-4 rounded",children:[h.jsx("div",{className:"text-[10px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Unrealized PnL"}),h.jsxs("div",{className:`text-xl font-semibold font-mono tracking-tight ${$>=0?"text-[#34d399]":"text-red-400"}`,children:[$>=0?"+":"",$.toFixed(2)," USD"]})]}),h.jsxs("div",{className:"glass-panel p-4 rounded",children:[h.jsx("div",{className:"text-[10px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Win Rate"}),h.jsxs("div",{className:"text-xl font-semibold text-white font-mono tracking-tight",children:[l.winRate.toFixed(1),"%"]})]})]}),h.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[h.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[h.jsxs("div",{className:"flex flex-col",children:[h.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Exposure"}),h.jsxs("span",{className:"text-white font-mono text-sm font-semibold",children:["$",t.currentExposure.toLocaleString()]})]}),h.jsx(sd,{className:"h-4 w-4 text-[#747580]"})]}),h.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[h.jsxs("div",{className:"flex flex-col",children:[h.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Categories"}),h.jsx("span",{className:"text-white font-mono text-sm font-semibold",children:t.settings.allowedCategories.length})]}),h.jsx(yw,{className:"h-4 w-4 text-[#747580]"})]}),h.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[h.jsxs("div",{className:"flex flex-col",children:[h.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Interval"}),h.jsxs("span",{className:"text-white font-mono text-sm font-semibold",children:[t.settings.checkIntervalSeconds,"s"]})]}),h.jsx(Rs,{className:"h-4 w-4 text-[#747580]"})]}),h.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[h.jsxs("div",{className:"flex flex-col",children:[h.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Max Position"}),h.jsxs("span",{className:"text-white font-mono text-sm font-semibold",children:["$",t.settings.maxPositionSizeUSDC]})]}),h.jsx(_1,{className:"h-4 w-4 text-[#747580]"})]})]}),h.jsxs("div",{className:"glass-panel p-5 rounded min-h-[220px] flex flex-col flex-1",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[h.jsx(In,{className:"h-4 w-4 text-[#E7FE55]"}),h.jsx("span",{className:"text-sm font-semibold text-white",children:"Performance Curve"})]}),h.jsx("div",{className:"flex-1 w-full",children:o.length>0?h.jsx(Uw,{width:"100%",height:"100%",minWidth:100,minHeight:100,children:h.jsxs(Cde,{data:o,children:[h.jsx("defs",{children:h.jsxs("linearGradient",{id:"colorPnlPoly",x1:"0",y1:"0",x2:"0",y2:"1",children:[h.jsx("stop",{offset:"5%",stopColor:"#E7FE55",stopOpacity:.2}),h.jsx("stop",{offset:"95%",stopColor:"#E7FE55",stopOpacity:0})]})}),h.jsx(Xw,{strokeDasharray:"3 3",stroke:"#232328",vertical:!1}),h.jsx(Zw,{dataKey:"date",stroke:"#747580",fontSize:10,tickLine:!1,axisLine:!1}),h.jsx(e1,{stroke:"#747580",fontSize:10,tickLine:!1,axisLine:!1,tickFormatter:W=>`$${W}`}),h.jsx(Wk,{contentStyle:{backgroundColor:"#14151a",borderColor:"#232328",borderRadius:"4px"},itemStyle:{color:"#E7FE55"},formatter:W=>[`$${W.toFixed(2)}`,"Net PnL"]}),h.jsx(TN,{type:"monotone",dataKey:"pnl",stroke:"#E7FE55",strokeWidth:1.5,fillOpacity:1,fill:"url(#colorPnlPoly)"})]})}):h.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-[#747580]",children:[h.jsx(El,{className:"h-8 w-8 mb-2 opacity-40"}),h.jsx("span",{className:"text-[11px]",children:"No performance data yet"})]})})]})]}),h.jsxs("div",{className:"glass-panel p-5 rounded flex flex-col",children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Sc,{className:`h-4 w-4 shrink-0 ${t.isAnalyzing?"text-[#E7FE55] animate-pulse":"text-[#E7FE55]/60"}`}),h.jsxs("div",{className:"flex items-center bg-[#0f1015] rounded-full p-0.5 border border-[#232328]",children:[h.jsx("button",{onClick:()=>f(!1),className:`px-2 py-0.5 rounded-full text-[9px] font-semibold uppercase tracking-wider transition-all ${u?"text-[#747580] hover:text-white":"bg-[#E7FE55] text-black"}`,children:"Live"}),h.jsx("button",{onClick:()=>b&&f(!0),disabled:!b,className:`px-2 py-0.5 rounded-full text-[9px] font-semibold uppercase tracking-wider transition-all ${u?"bg-[#E7FE55] text-black":b?"text-[#747580] hover:text-white":"text-[#3a3b42] cursor-not-allowed"}`,title:b?"View AI Summary":`Available after ${2-v} more cycles`,children:"Summary"})]}),t.isAnalyzing&&!u&&h.jsx("span",{className:"px-2 py-0.5 rounded bg-[#E7FE55]/15 text-[#E7FE55] text-[9px] font-semibold uppercase tracking-wider animate-pulse",children:"LIVE"})]}),!t.isAnalyzing&&O.length>0&&!u&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("button",{onClick:V,disabled:E>=O.length-1,className:`p-1 rounded transition-colors ${E>=O.length-1?"text-[#3a3b42] cursor-not-allowed":"text-[#747580] hover:text-white hover:bg-[#1a1b21]"}`,title:"Previous market",children:h.jsx(zT,{size:16})}),h.jsxs("span",{className:"text-[10px] text-[#747580] font-mono min-w-[32px] text-center",children:[E+1,"/",O.length]}),h.jsx("button",{onClick:j,disabled:E<=0,className:`p-1 rounded transition-colors ${E<=0?"text-[#3a3b42] cursor-not-allowed":"text-[#747580] hover:text-white hover:bg-[#1a1b21]"}`,title:"Next market",children:h.jsx(id,{size:16})})]})]}),u?h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("span",{className:"px-2 py-0.5 rounded bg-[#E7FE55]/15 text-[#E7FE55] text-[9px] font-semibold uppercase tracking-wider",children:[v," cycles"]}),g&&h.jsx("span",{className:"text-[10px] text-[#747580] animate-pulse",children:"generating..."})]}),x>0&&h.jsx("span",{className:"text-[10px] text-[#747580] font-mono",children:new Date(x).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),h.jsx("div",{className:"flex-1 bg-[#0f1015] rounded p-3 border border-[#232328] overflow-y-auto custom-scrollbar min-h-0 mb-3",children:m?h.jsx("p",{className:"text-[13px] text-[#a0a1a8] leading-relaxed whitespace-pre-wrap",children:m}):h.jsx("p",{className:"text-[13px] text-[#747580] italic",children:"Summary will be generated after 2+ analysis cycles..."})})]}):t.isAnalyzing?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"flex items-center justify-between mb-3",children:h.jsx("span",{className:`px-2 py-0.5 rounded text-[9px] font-semibold uppercase tracking-wider ${t.currentSignal==="BULLISH"?"bg-[#34d399]/15 text-[#34d399]":t.currentSignal==="BEARISH"?"bg-red-500/15 text-red-400":"bg-[#1a1b21] text-[#747580]"}`,children:t.currentSignal||"ANALYZING"})}),h.jsx("div",{className:"flex-1 bg-[#0f1015] rounded p-3 border border-[#232328] overflow-y-auto custom-scrollbar min-h-0 mb-3",children:h.jsxs("p",{className:"text-[13px] text-[#a0a1a8] italic leading-relaxed",children:['"',t.statusDetail||t.statusMessage,'"']})})]}):U?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"flex items-center justify-between mb-3",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"px-2 py-1 rounded bg-[#E7FE55]/15 text-[#E7FE55] text-xs font-semibold uppercase tracking-wider truncate max-w-[150px]",children:U.market}),h.jsx("span",{className:"text-[10px] text-[#747580] font-mono",children:new Date(U.log.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})}),h.jsx("div",{className:"flex-1 bg-[#0f1015] rounded p-3 border border-[#232328] overflow-y-auto custom-scrollbar min-h-0 mb-3",children:h.jsxs("p",{className:"text-[13px] text-[#a0a1a8] italic leading-relaxed whitespace-pre-wrap",children:['"',((F=U.log.details)==null?void 0:F.fullReason)||U.log.message,'"']})})]}):h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"flex items-center justify-between mb-3",children:h.jsx("span",{className:`px-2 py-0.5 rounded text-[9px] font-semibold uppercase tracking-wider ${t.currentSignal==="BULLISH"?"bg-[#34d399]/15 text-[#34d399]":t.currentSignal==="BEARISH"?"bg-red-500/15 text-red-400":"bg-[#1a1b21] text-[#747580]"}`,children:t.currentSignal||"NEUTRAL"})}),h.jsx("div",{className:"flex-1 bg-[#0f1015] rounded p-3 border border-[#232328] overflow-y-auto custom-scrollbar min-h-0 mb-3",children:h.jsxs("p",{className:"text-[13px] text-[#a0a1a8] italic leading-relaxed",children:['"',t.statusMessage||"Waiting for analysis...",'"']})})]}),h.jsxs("div",{className:"pt-3 border-t border-[#232328] flex flex-col gap-2 shrink-0",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.05em] w-12 shrink-0",children:"Task"}),h.jsx("div",{className:"text-[10px] text-white truncate font-mono flex-1",children:t.currentTask||" Idle"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.05em] w-12 shrink-0",children:"Status"}),h.jsx("div",{className:"text-[10px] text-[#a0a1a8] font-mono truncate flex-1",children:t.statusMessage})]}),t.statusDetail&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.05em] w-12 shrink-0",children:"Info"}),h.jsx("div",{className:"text-[10px] text-[#E7FE55] truncate flex-1",children:t.statusDetail})]})]})]})]}),h.jsxs("div",{className:"glass-panel p-5 rounded shrink-0",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(zg,{className:"h-4 w-4 text-[#E7FE55]"}),h.jsx("span",{className:"text-sm font-semibold text-white",children:"Active Positions"})]}),h.jsxs("span",{className:"text-[10px] text-[#747580]",children:[t.activePositions.length," / ",t.settings.maxOpenPositions]})]}),t.activePositions.length>0?h.jsx("div",{className:"overflow-auto max-h-[200px] custom-scrollbar",children:h.jsxs("table",{className:"w-full text-xs",children:[h.jsx("thead",{className:"text-[#747580] text-left sticky top-0 bg-[#14151a]",children:h.jsxs("tr",{children:[h.jsx("th",{className:"pb-2 font-medium",children:"Market"}),h.jsx("th",{className:"pb-2 font-medium",children:"Side"}),h.jsx("th",{className:"pb-2 font-medium text-right",children:"Shares"}),h.jsx("th",{className:"pb-2 font-medium text-right",children:"Avg Price"}),h.jsx("th",{className:"pb-2 font-medium text-right",children:"Current"}),h.jsx("th",{className:"pb-2 font-medium text-right",children:"PnL"})]})}),h.jsx("tbody",{className:"text-[#a0a1a8]",children:t.activePositions.map((W,H)=>h.jsxs("tr",{className:"border-t border-[#232328] hover:bg-[#1a1b21]",children:[h.jsxs("td",{className:"py-2 max-w-[200px] truncate",title:W.question,children:[W.question.slice(0,40),"..."]}),h.jsx("td",{className:`py-2 font-medium ${W.outcome==="YES"?"text-[#34d399]":"text-red-400"}`,children:W.outcome}),h.jsx("td",{className:"py-2 text-right font-mono",children:W.shares.toFixed(2)}),h.jsxs("td",{className:"py-2 text-right font-mono",children:[(W.avgPrice*100).toFixed(1),""]}),h.jsxs("td",{className:"py-2 text-right font-mono",children:[(W.currentPrice*100).toFixed(1),""]}),h.jsxs("td",{className:`py-2 text-right font-mono ${W.unrealizedPnl>=0?"text-[#34d399]":"text-red-400"}`,children:[W.unrealizedPnl>=0?"+":"","$",W.unrealizedPnl.toFixed(2)]})]},H))})]})}):h.jsxs("div",{className:"h-24 flex flex-col items-center justify-center text-[#747580] gap-2 bg-[#0f1015] rounded border border-[#232328]",children:[h.jsx(tx,{className:"h-6 w-6 opacity-40"}),h.jsx("span",{className:"text-[11px]",children:"No active positions"})]})]})]}):h.jsx("div",{className:"flex flex-col h-full items-center justify-center",children:h.jsxs("div",{className:"max-w-md w-full mx-auto space-y-6 p-8 text-center",children:[h.jsx("div",{className:"w-16 h-16 bg-[#1a1b21] rounded-full flex items-center justify-center mx-auto mb-4 border border-[#232328]",children:h.jsx(tx,{size:32,className:"text-[#E7FE55]"})}),h.jsx("h2",{className:"text-xl font-semibold text-white tracking-tight",children:"Polymarket Vault Required"}),h.jsxs("p",{className:"text-[#747580] text-sm",children:["To use the Polymarket Dealer, you need to create a ",h.jsx("span",{className:"text-[#E7FE55]",children:"Polymarket Vault"})," first."]}),h.jsx("button",{onClick:()=>r(Ce.VAULT),className:"mt-4 px-6 py-3 bg-[#E7FE55] hover:bg-[#d4eb4d] text-black font-bold rounded-xl transition-all",children:"Go to Vault Operator"})]})})},nmt=({settings:t,onUpdateSettings:e,onApplyChanges:n,isOn:r=!1,onToggle:i})=>{const[s,o]=T.useState(t),[a,l]=T.useState(!1);T.useEffect(()=>{o(t)},[t]),T.useEffect(()=>{l(JSON.stringify(s)!==JSON.stringify(t))},[s,t]);const c=v=>{o(x=>({...x,...v}))},u=()=>{e(s),n()},f=()=>{o(t),l(!1)},m=v=>{if(v==="custom")return;const x=Kb[v];x&&c({selectedPreset:v,allowedCategories:x.categories})},g=v=>{const x=s.allowedCategories,b=x.includes(v)?x.filter(E=>E!==v):[...x,v];c({allowedCategories:b})};return h.jsx("div",{className:"h-full flex flex-col gap-4 overflow-y-auto custom-scrollbar",children:h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[h.jsxs("div",{className:"flex flex-col gap-4",children:[h.jsx("div",{className:"glass-panel p-4",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:`h-10 w-10 rounded flex items-center justify-center ${r?"bg-[#E7FE55]/15 text-[#E7FE55]":"bg-[#1a1b21] text-[#747580]"}`,children:h.jsx($a,{className:"h-5 w-5"})}),h.jsxs("div",{children:[h.jsx("span",{className:"block text-sm font-semibold text-white",children:"Engine Status"}),h.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5",children:[h.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${r?"bg-[#E7FE55] animate-pulse":"bg-[#747580]"}`}),h.jsx("span",{className:"text-[10px] text-[#747580] font-medium uppercase tracking-wider",children:r?"Active & Running":"Stopped"})]})]})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[i&&h.jsx("button",{onClick:()=>i(!r),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none ${r?"bg-[#E7FE55]":"bg-[#3a3b42]"}`,children:h.jsx("span",{className:`${r?"translate-x-6":"translate-x-1"} inline-block h-4 w-4 transform rounded-full bg-black transition-transform shadow`})}),a&&h.jsxs("button",{onClick:f,className:"flex items-center gap-2 bg-[#1a1b21] hover:bg-[#232328] text-[#747580] px-3 py-1.5 rounded text-[10px] font-semibold uppercase tracking-wider transition-all",children:[h.jsx(r2,{className:"h-3 w-3"})," Reset"]}),h.jsxs("button",{onClick:u,disabled:!a,className:`flex items-center gap-2 px-3 py-1.5 rounded text-[10px] font-semibold uppercase tracking-wider transition-all active:scale-95
                                        ${a?"bg-[#E7FE55] hover:bg-[#d4e94d] text-black":"bg-[#1a1b21] text-[#747580] cursor-not-allowed opacity-50"}`,children:[h.jsx(Pc,{className:"h-3 w-3"})," Apply"]})]})]})}),h.jsxs("div",{className:"glass-panel p-4",children:[h.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[#E7FE55] font-semibold uppercase tracking-[0.1em] mb-3",children:[h.jsx(vw,{className:"h-3.5 w-3.5"})," Strategy Preset"]}),h.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(Kb).filter(([v])=>v!=="custom").map(([v,x])=>h.jsxs("button",{onClick:()=>m(v),className:`p-3 rounded border text-left transition-all ${s.selectedPreset===v?"border-[#E7FE55] bg-[#E7FE55]/10":"border-[#232328] hover:border-[#747580] bg-[#0f1015]"}`,children:[h.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[h.jsx("span",{className:"text-sm",children:x.emoji}),h.jsx("span",{className:"text-[11px] font-semibold text-white",children:x.name})]}),h.jsx("p",{className:"text-[10px] text-[#747580] leading-relaxed",children:x.description})]},v))})]}),h.jsxs("div",{className:"glass-panel p-4",children:[h.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[#E7FE55] font-semibold uppercase tracking-[0.1em] mb-3",children:[h.jsx(_1,{className:"h-3.5 w-3.5"})," Capital & Risk"]}),h.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[h.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[h.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1.5",children:"Type"}),h.jsxs("div",{className:"flex gap-0.5",children:[h.jsx("button",{onClick:()=>c({bankrollType:"MANUAL"}),className:`flex-1 py-1 text-[9px] font-semibold rounded transition-all ${s.bankrollType==="MANUAL"?"bg-[#60a5fa] text-white":"text-[#747580] hover:text-white"}`,children:"Fix"}),h.jsx("button",{onClick:()=>c({bankrollType:"ALL_AVAILABLE"}),className:`flex-1 py-1 text-[9px] font-semibold rounded transition-all ${s.bankrollType==="ALL_AVAILABLE"?"bg-[#34d399] text-white":"text-[#747580] hover:text-white"}`,children:"Max"})]})]}),h.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[h.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1.5",children:"Amount ($)"}),s.bankrollType==="MANUAL"?h.jsx("input",{type:"number",value:s.manualBankroll,onChange:v=>c({manualBankroll:parseFloat(v.target.value)||0}),className:"w-full bg-transparent text-sm font-mono text-white focus:outline-none"}):h.jsx("span",{className:"text-sm font-mono text-[#34d399]",children:"Auto"})]}),h.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[h.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1.5",children:"Max Pos ($)"}),h.jsx("input",{type:"number",value:s.maxPositionSizeUSDC,onChange:v=>c({maxPositionSizeUSDC:parseInt(v.target.value)||0}),className:"w-full bg-transparent text-sm font-mono text-white focus:outline-none"})]}),h.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[h.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1.5",children:"Max Open"}),h.jsx("input",{type:"number",value:s.maxOpenPositions,onChange:v=>c({maxOpenPositions:parseInt(v.target.value)||1}),className:"w-full bg-transparent text-sm font-mono text-white focus:outline-none"})]})]})]}),h.jsxs("div",{className:"glass-panel p-4",children:[h.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[#E7FE55] font-semibold uppercase tracking-[0.1em] mb-3",children:[h.jsx(Rs,{className:"h-3.5 w-3.5"})," Analysis Settings"]}),h.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[h.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[h.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1.5",children:"Interval"}),h.jsxs("div",{className:"flex items-baseline gap-1",children:[h.jsx("input",{type:"number",value:s.checkIntervalSeconds,onChange:v=>c({checkIntervalSeconds:Math.max(60,parseInt(v.target.value)||60)}),className:"w-full bg-transparent text-sm font-mono text-white focus:outline-none"}),h.jsx("span",{className:"text-[10px] text-[#747580]",children:"s"})]})]}),h.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[h.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1.5",children:"Min Volume"}),h.jsxs("div",{className:"flex items-center",children:[h.jsx("span",{className:"text-[10px] text-[#747580] mr-1",children:"$"}),h.jsx("input",{type:"number",value:s.minVolumeThreshold,onChange:v=>c({minVolumeThreshold:parseInt(v.target.value)||0}),className:"w-full bg-transparent text-sm font-mono text-white focus:outline-none"})]})]}),h.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[h.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1.5",children:"Min Liquidity"}),h.jsxs("div",{className:"flex items-center",children:[h.jsx("span",{className:"text-[10px] text-[#747580] mr-1",children:"$"}),h.jsx("input",{type:"number",value:s.minLiquidityThreshold,onChange:v=>c({minLiquidityThreshold:parseInt(v.target.value)||0}),className:"w-full bg-transparent text-sm font-mono text-white focus:outline-none"})]})]})]})]})]}),h.jsxs("div",{className:"flex flex-col gap-4",children:[h.jsxs("div",{className:"glass-panel p-4",children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[#E7FE55] font-semibold uppercase tracking-[0.1em]",children:[h.jsx(TTe,{className:"h-3.5 w-3.5"})," Market Categories"]}),h.jsx("span",{className:"text-[10px] bg-[#E7FE55]/15 text-[#E7FE55] px-2 py-0.5 rounded border border-[#E7FE55]/30 font-mono",children:s.allowedCategories.length})]}),h.jsx("div",{className:"flex flex-wrap gap-2",children:iwe.map(v=>h.jsxs("button",{onClick:()=>g(v.value),className:`px-3 py-1.5 rounded-full text-xs flex items-center gap-1.5 transition-all ${s.allowedCategories.includes(v.value)?"bg-[#E7FE55]/20 text-[#E7FE55] border border-[#E7FE55]/50":"bg-[#0f1015] text-[#747580] border border-[#232328] hover:border-[#747580]"}`,children:[h.jsx("span",{children:v.icon}),v.label]},v.value))})]}),h.jsxs("div",{className:"glass-panel p-4",children:[h.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[#E7FE55] font-semibold uppercase tracking-[0.1em] mb-3",children:[h.jsx(In,{className:"h-3.5 w-3.5"})," Market Filters"]}),h.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[h.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[h.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1.5",children:"Spread Edge"}),h.jsx("div",{className:"flex items-baseline gap-1",children:h.jsx("input",{type:"number",step:"0.01",value:s.minSpreadThreshold||.02,onChange:v=>c({minSpreadThreshold:parseFloat(v.target.value)||.02}),className:"w-full bg-transparent text-sm font-mono text-white focus:outline-none"})})]}),h.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[h.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1.5",children:"Confidence"}),h.jsx("div",{className:"flex items-baseline gap-1",children:h.jsx("input",{type:"number",step:"0.05",min:"0",max:"1",value:s.confidenceThreshold||.6,onChange:v=>c({confidenceThreshold:parseFloat(v.target.value)||.6}),className:"w-full bg-transparent text-sm font-mono text-white focus:outline-none"})})]})]})]}),h.jsxs("div",{className:"glass-panel p-4 flex items-start gap-3",children:[h.jsx(n8,{className:"h-4 w-4 text-[#E7FE55] shrink-0 mt-0.5"}),h.jsx("div",{children:h.jsxs("p",{className:"text-[10px] text-[#747580] leading-relaxed",children:[h.jsx("strong",{className:"text-[#a0a1a8]",children:"Polymarket Data:"})," Market data is fetched via the CLOB API. Categories filter which markets are analyzed. Higher confidence = fewer but more certain trades."]})})]})]})]})})},rmt=({settings:t,onUpdateSettings:e,onApplyChanges:n})=>{var x,b;const[r,i]=T.useState(t.strategyPrompt),[s,o]=T.useState(!1),[a,l]=T.useState(t.promptMode||"preset"),[c,u]=T.useState(t.selectedPreset||"balanced");T.useEffect(()=>{i(t.strategyPrompt),l(t.promptMode||"preset"),u(t.selectedPreset||"balanced")},[t.strategyPrompt,t.promptMode,t.selectedPreset]),T.useEffect(()=>{o(r!==t.strategyPrompt)},[r,t.strategyPrompt]);const f=E=>{if(E==="custom")l("custom"),u("custom"),o(!0);else{const C=MT[E];i(C),l("preset"),u(E),o(C!==t.strategyPrompt)}},m=E=>{i(E);const C=Object.entries(MT).find(([k,O])=>O===E);C?(l("preset"),u(C[0])):(l("custom"),u("custom")),o(E!==t.strategyPrompt)},g=()=>{e({strategyPrompt:r,promptMode:a,selectedPreset:c}),n(),o(!1)},v=E=>`
            flex items-center gap-1.5 px-3 py-1.5 rounded text-[10px] font-semibold uppercase tracking-[0.08em] transition-all
            ${c===E&&a==="preset"||a==="custom"&&E==="custom"?"bg-[#E7FE55] text-black":"bg-transparent text-[#747580] hover:text-[#a0a1a8] hover:bg-[#1a1b21]"}
        `;return h.jsxs("div",{className:"h-full flex flex-col gap-4 overflow-hidden",children:[h.jsx("div",{className:"glass-panel p-4 shrink-0",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(vw,{className:"h-4 w-4 text-[#E7FE55]"}),h.jsx("span",{className:"text-sm font-semibold text-white",children:"Strategy Prompt"})]}),h.jsxs("div",{className:`
                            inline-flex items-center gap-1.5 px-2 py-0.5 rounded text-[9px] font-semibold uppercase tracking-wider
                            ${a==="preset"?"bg-[#E7FE55]/10 text-[#E7FE55]":"bg-[#1a1b21] text-[#747580]"}
                        `,children:[h.jsx("span",{className:`h-1 w-1 rounded-full ${a==="preset"?"bg-[#E7FE55]":"bg-[#747580]"}`}),a==="preset"?`${(x=Kb[c])==null?void 0:x.emoji} ${(b=Kb[c])==null?void 0:b.name}`:"Custom"]}),s&&h.jsx("span",{className:"text-[9px] text-amber-500 uppercase tracking-wider font-medium",children:" Unsaved"})]}),h.jsxs("button",{onClick:g,disabled:!s,className:`
                            flex items-center gap-2 px-4 py-1.5 rounded text-[10px] font-semibold uppercase tracking-wider transition-all
                            ${s?"bg-[#E7FE55] hover:bg-[#f0ff7a] text-black":"bg-[#1a1b21] text-[#3a3b42] cursor-not-allowed"}
                        `,children:[h.jsx(o8,{className:"h-3.5 w-3.5"}),"Save"]})]})}),h.jsxs("div",{className:"flex-1 flex gap-4 min-h-0 overflow-hidden",children:[h.jsxs("div",{className:"w-40 shrink-0 flex flex-col gap-2",children:[h.jsxs("div",{className:"flex items-center gap-1.5 px-1 py-2",children:[h.jsx(Nne,{size:12,className:"text-[#E7FE55]"}),h.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] font-semibold",children:"Presets"})]}),h.jsxs("div",{className:"flex flex-col gap-1",children:[Object.entries(Kb).filter(([E])=>E!=="custom").map(([E,C])=>h.jsxs("button",{onClick:()=>f(E),className:v(E),children:[h.jsx("span",{children:C.emoji}),h.jsx("span",{children:C.name})]},E)),h.jsx("div",{className:"h-px bg-[#232328] my-2"}),h.jsxs("button",{onClick:()=>f("custom"),className:v("custom"),children:[h.jsx("span",{children:""}),h.jsx("span",{children:"Custom"})]})]}),h.jsx("div",{className:"mt-auto pt-4 px-1",children:h.jsx("p",{className:"text-[10px] text-[#3a3b42] leading-relaxed",children:"Edit the prompt to switch to custom mode automatically."})})]}),h.jsxs("div",{className:"flex-1 glass-panel relative overflow-hidden flex flex-col",children:[h.jsx("div",{className:"absolute inset-x-0 top-0 h-6 bg-gradient-to-b from-[#1e2028] to-transparent pointer-events-none z-10"}),h.jsx("textarea",{value:r,onChange:E=>m(E.target.value),className:"w-full h-full bg-transparent text-[#a0a1a8] font-mono text-[13px] p-5 resize-none focus:outline-none leading-relaxed custom-scrollbar selection:bg-[#E7FE55]/30",spellCheck:!1,placeholder:`// Define your prediction market strategy here...
// 
// Example:
// You are a probability analyst focusing on mispriced markets.
// 1. Look for markets with high volume and clear catalysts.
// 2. Prioritize events with upcoming resolution dates.
// 3. Consider news sentiment and expert opinions.`}),h.jsx("div",{className:"absolute inset-x-0 bottom-0 h-6 bg-gradient-to-t from-[#1e2028] to-transparent pointer-events-none z-10"}),h.jsxs("div",{className:"absolute bottom-3 right-3 flex items-center gap-2 opacity-50 hover:opacity-100 transition-opacity",children:[h.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-[#E7FE55]"}),h.jsx("span",{className:"text-[9px] text-[#747580] font-mono uppercase tracking-wider",children:"Live Context"})]})]})]})]})},imt=({logs:t,onClearLogs:e})=>{const[n,r]=T.useState(null),i=t.filter(a=>{if(["REASONING","SIGNAL","TRADE","ERROR"].includes(a.type))return!0;if(["INFO","WARNING"].includes(a.type)){const l=a.message.toLowerCase();return l.includes("executing")||l.includes("skipping")||l.includes("ignored")||l.includes("position")}return!1}),s=(a,l)=>a==="ERROR"?h.jsx("div",{className:"text-red-400",children:h.jsx(S4,{size:16})}):a==="TRADE"?h.jsx("div",{className:"text-[#34d399]",children:h.jsx(ex,{size:16})}):l.includes("YES")||l.includes("BULLISH")?h.jsx("div",{className:"text-[#34d399]",children:h.jsx(In,{size:16})}):l.includes("NO")||l.includes("BEARISH")?h.jsx("div",{className:"text-red-400",children:h.jsx(n2,{size:16})}):h.jsx("div",{className:"text-[#E7FE55]",children:h.jsx(Sc,{size:16})}),o=a=>new Date(a).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"});return h.jsxs("div",{className:"flex flex-col h-full overflow-hidden",children:[h.jsxs("div",{className:"p-4 border-b border-[#232328] flex justify-between items-center shrink-0",children:[h.jsxs("h3",{className:"text-sm font-semibold flex items-center gap-2 text-white",children:[h.jsx(Sc,{className:"h-4 w-4 text-[#E7FE55]"}),"AI Reasoning Log"]}),h.jsx("button",{onClick:e,className:"text-[10px] text-[#747580] hover:text-white transition-colors uppercase tracking-wider",children:"Clear History"})]}),h.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar",children:i.length===0?h.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-[#747580] opacity-50 py-12",children:[h.jsx(Sc,{size:48,className:"mb-4 opacity-30"}),h.jsx("p",{className:"text-sm",children:"No analysis recorded yet."}),h.jsx("p",{className:"text-[10px] text-[#747580]",children:"Start the dealer to see its thought process."})]}):i.map(a=>{var f,m;const l=n===a.id,c=(f=a.details)==null?void 0:f.context,u=(m=a.details)==null?void 0:m.context;return h.jsxs("div",{className:"relative pl-6 pb-2 border-l border-[#232328] last:border-0 transition-colors group",children:[h.jsx("div",{className:"absolute -left-[5px] top-1 w-2.5 h-2.5 rounded-full bg-[#14151a] border border-[#232328] group-hover:border-[#747580] transition-colors"}),h.jsxs("div",{className:"bg-[#14151a] p-3 rounded border border-[#232328] hover:border-[#3a3b42] transition-all",children:[h.jsxs("div",{className:"flex items-center justify-between mb-1",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[s(a.type,a.message),h.jsx("span",{className:`text-[10px] font-semibold uppercase tracking-wider ${a.type==="ERROR"?"text-red-400":a.type==="TRADE"?"text-[#34d399]":a.type==="SIGNAL"?"text-[#E7FE55]":"text-[#a0a1a8]"}`,children:a.type})]}),h.jsxs("span",{className:"text-[10px] text-[#747580] flex items-center gap-1 font-mono",children:[h.jsx(Rs,{size:10}),o(a.timestamp)]})]}),h.jsx("p",{className:"text-sm text-[#a0a1a8] leading-relaxed",children:a.message}),a.details&&a.details.fullReason&&h.jsxs("div",{className:"mt-2 p-2 bg-[#0f1015] rounded text-[11px] text-[#747580] font-mono italic border-l-2 border-[#E7FE55]/30 whitespace-pre-wrap",children:['"',typeof a.details.fullReason=="string"?a.details.fullReason:JSON.stringify(a.details.fullReason),'"']}),c&&h.jsxs("button",{onClick:()=>r(l?null:a.id),className:"mt-2 flex items-center gap-1 text-[10px] text-[#E7FE55] hover:text-[#d4eb4d] transition-colors uppercase tracking-wider",children:[l?h.jsx(am,{size:12}):h.jsx(Ic,{size:12}),l?"Hide":"Show"," Market Context"]}),l&&c&&h.jsxs("div",{className:"mt-3 p-3 bg-[#0f1015] rounded border border-[#232328] space-y-3",children:[u.question&&h.jsxs("div",{className:"text-[10px] text-[#747580]",children:["Market: ",h.jsxs("span",{className:"text-white",children:[u.question.slice(0,100),u.question.length>100?"...":""]})]}),(u.volume24h||u.liquidity)&&h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-[#34d399] mb-2 uppercase tracking-wider font-semibold",children:[h.jsx(_1,{size:10}),h.jsx("span",{children:"Market Metrics"})]}),h.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[u.volume24h&&h.jsxs("div",{className:"bg-[#34d399]/10 border border-[#34d399]/20 px-2 py-1 rounded text-[10px]",children:[h.jsx("span",{className:"text-[#34d399] uppercase font-medium",children:"Volume 24h"}),h.jsxs("span",{className:"text-[#4ade80] font-mono ml-2",children:["$",u.volume24h.toLocaleString()]})]}),u.liquidity&&h.jsxs("div",{className:"bg-[#34d399]/10 border border-[#34d399]/20 px-2 py-1 rounded text-[10px]",children:[h.jsx("span",{className:"text-[#34d399] uppercase font-medium",children:"Liquidity"}),h.jsxs("span",{className:"text-[#4ade80] font-mono ml-2",children:["$",u.liquidity.toLocaleString()]})]}),u.spread&&h.jsxs("div",{className:"bg-[#34d399]/10 border border-[#34d399]/20 px-2 py-1 rounded text-[10px]",children:[h.jsx("span",{className:"text-[#34d399] uppercase font-medium",children:"Spread"}),h.jsxs("span",{className:"text-[#4ade80] font-mono ml-2",children:[(u.spread*100).toFixed(2),"%"]})]})]})]}),(u.yesPrice||u.noPrice)&&h.jsxs("div",{className:"text-[10px] text-[#747580]",children:["Prices:",u.yesPrice&&h.jsxs("span",{className:"text-[#34d399] font-mono ml-2",children:["YES: ",(u.yesPrice*100).toFixed(1),""]}),u.noPrice&&h.jsxs("span",{className:"text-red-400 font-mono ml-2",children:["NO: ",(u.noPrice*100).toFixed(1),""]})]}),h.jsx("pre",{className:"text-[9px] text-[#747580] overflow-x-auto whitespace-pre-wrap custom-scrollbar max-h-[200px]",children:JSON.stringify(u,null,2)})]})]})]},a.id)})})]})},smt=({log:t,index:e,getLogBadgeVariant:n})=>{const[r,i]=T.useState(!1),s=t.details&&Object.keys(t.details).length>0;return h.jsxs(Ht.div,{className:"flex gap-3 p-3 hover:bg-[#1a1b21] rounded border-b border-[#232328] last:border-0 transition-colors",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:e*.02},children:[h.jsx("span",{className:"text-[#747580] shrink-0 text-[10px] mt-0.5 font-mono",children:new Date(t.timestamp).toLocaleTimeString()}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Ml,{variant:n(t.type),className:"text-[9px] uppercase tracking-wider",children:t.type}),h.jsx("span",{className:"text-[#a0a1a8] flex-1 text-sm truncate",children:t.message}),s&&h.jsx("button",{onClick:()=>i(!r),className:"text-[#747580] hover:text-white transition-colors p-1 rounded hover:bg-[#232328]",title:r?"Collapse details":"Expand details",children:r?h.jsx(Ic,{className:"h-4 w-4"}):h.jsx(id,{className:"h-4 w-4"})})]}),h.jsx(go,{children:s&&r&&h.jsx(Ht.pre,{className:"mt-2 text-[10px] text-[#747580] bg-[#0f1015] p-3 rounded overflow-x-auto max-h-[300px] overflow-y-auto custom-scrollbar border border-[#232328] font-mono",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:JSON.stringify(t.details,null,2)})})]})]},t.id)},omt=({status:t,onClearLogs:e})=>{const[n,r]=T.useState("thinking"),i=T.useRef(null);if(!t)return h.jsx("div",{className:"p-4 text-red-500",children:"Error: Status not available"});const s=()=>{const a=JSON.stringify(t.logs,null,2),l="data:application/json;charset=utf-8,"+encodeURIComponent(a),c=`polymarket_logs_${new Date().toISOString()}.json`,u=document.createElement("a");u.setAttribute("href",l),u.setAttribute("download",c),u.click()},o=a=>{switch(a){case"INFO":return"info";case"WARNING":return"warning";case"ERROR":return"destructive";case"TRADE":return"success";case"SIGNAL":return"purple";case"REASONING":return"secondary";default:return"secondary"}};return h.jsxs("div",{className:"flex flex-col h-full gap-4 overflow-hidden p-4",children:[h.jsx("div",{className:"glass-panel p-4 shrink-0",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2 bg-[#1a1b21] p-1 rounded border border-[#232328]",children:[h.jsxs("button",{onClick:()=>r("thinking"),className:`flex items-center gap-2 px-4 py-2 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${n==="thinking"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:[h.jsx(Sc,{className:"h-4 w-4"}),"Thinking"]}),h.jsxs("button",{onClick:()=>r("logs"),className:`flex items-center gap-2 px-4 py-2 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${n==="logs"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:[h.jsx(kne,{className:"h-4 w-4"}),"Activity Log",t.logs.length>0&&h.jsx("span",{className:"bg-white/20 px-1.5 py-0.5 rounded text-[9px]",children:t.logs.length})]})]}),h.jsx(go,{children:n==="logs"&&h.jsxs(Ht.div,{className:"flex items-center gap-2",initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},children:[h.jsx("button",{onClick:e,className:"p-2 rounded hover:bg-red-500/10 text-[#747580] hover:text-red-400 transition-colors border border-[#232328]",title:"Clear Logs",children:h.jsx(cm,{className:"h-4 w-4"})}),h.jsx("button",{onClick:s,className:"p-2 rounded hover:bg-[#1a1b21] text-[#747580] hover:text-white transition-colors border border-[#232328]",title:"Export JSON",children:h.jsx(Uo,{className:"h-4 w-4"})})]})})]})}),h.jsxs("div",{className:"glass-panel flex-1 min-h-0 overflow-hidden flex flex-col",children:[n==="thinking"&&h.jsx(imt,{logs:t.logs,onClearLogs:e}),n==="logs"&&h.jsx("div",{className:"flex-1 min-h-0 relative",children:h.jsx("div",{ref:i,className:"absolute inset-0 overflow-y-auto custom-scrollbar",children:t.logs.length===0?h.jsxs(Ht.div,{className:"h-full flex flex-col items-center justify-center text-[#747580] gap-3 py-12",initial:{opacity:0},animate:{opacity:1},children:[h.jsx(a8,{className:"h-10 w-10 opacity-30"}),h.jsx("p",{className:"text-sm",children:"No operations recorded yet."})]}):h.jsx(go,{children:t.logs.map((a,l)=>h.jsx(smt,{log:a,index:l,getLogBadgeVariant:o},a.id))})})})]})]})},amt=({vault:t,password:e,activeTab:n,setActiveTab:r})=>{const i=!!t.pmPublicKey,s=n===Ce.POLYMARKET_DEALER?Ce.POLYMARKET_DASHBOARD:n,{state:o,toggleDealer:a,updateSettings:l,applyChanges:c,clearLogs:u}=Wme(t,e),f=()=>{switch(s){case Ce.POLYMARKET_DASHBOARD:return"dashboard";case Ce.POLYMARKET_THINKING:return"thinking";case Ce.POLYMARKET_CONFIG:return"config";case Ce.POLYMARKET_PROMPT:return"prompt";default:return"dashboard"}},m=g=>{switch(g){case"dashboard":r(Ce.POLYMARKET_DASHBOARD);break;case"thinking":r(Ce.POLYMARKET_THINKING);break;case"config":r(Ce.POLYMARKET_CONFIG);break;case"prompt":r(Ce.POLYMARKET_PROMPT);break}};return i?h.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[!t.isUnlocked&&h.jsx(Ht.div,{className:"mb-3 flex justify-end shrink-0 px-4",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},children:h.jsx(Ml,{variant:"destructive",className:"animate-pulse",children:"VAULT LOCKED"})}),h.jsx(tpe,{value:f(),onValueChange:m,className:"flex-1 flex flex-col min-h-0",children:h.jsxs("div",{className:"flex-1 min-h-0 relative",children:[h.jsx(Ku,{value:"dashboard",forceMount:!0,className:"h-full mt-0 absolute inset-0 data-[state=inactive]:hidden",children:h.jsx(tmt,{status:o,onToggle:a,vaultAddress:t.pmPublicKey,setActiveTab:r})}),h.jsx(Ku,{value:"thinking",forceMount:!0,className:"h-full mt-0 absolute inset-0 data-[state=inactive]:hidden",children:h.jsx(omt,{status:o,onClearLogs:u})}),h.jsx(Ku,{value:"config",forceMount:!0,className:"h-full mt-0 absolute inset-0 overflow-y-auto data-[state=inactive]:hidden",children:h.jsx(nmt,{settings:o.settings,onUpdateSettings:l,onApplyChanges:c,isOn:o.isOn,onToggle:a})}),h.jsx(Ku,{value:"prompt",forceMount:!0,className:"h-full mt-0 absolute inset-0 data-[state=inactive]:hidden",children:h.jsx(rmt,{settings:o.settings,onUpdateSettings:l,onApplyChanges:c})})]})})]}):h.jsx(Ht.div,{className:"flex flex-col h-[calc(100vh-8rem)] items-center justify-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:h.jsxs("div",{className:"max-w-md w-full mx-auto space-y-6 p-8 text-center",children:[h.jsx("div",{className:"w-16 h-16 bg-[#1a1b21] rounded-full flex items-center justify-center mx-auto mb-4 border border-[#232328]",children:h.jsx(tx,{size:32,className:"text-[#E7FE55]"})}),h.jsx("h2",{className:"text-xl font-semibold text-white tracking-tight",children:"Create a Vault First"}),h.jsxs("p",{className:"text-[#747580] text-sm",children:["You need to create a Polymarket wallet before using Polymarket Dealer. Go to the ",h.jsx("span",{className:"text-[#E7FE55]",children:"Vault"})," page to set up your wallet."]}),h.jsx(Fi,{onClick:()=>r(Ce.VAULT),variant:"success",size:"lg",className:"mt-4 bg-[#E7FE55] hover:bg-[#d4eb4d] text-black",children:"Go to Vault"})]})})},R0e=({onBack:t})=>{const e=()=>{t?t():window.location.reload()};return h.jsx("div",{className:"min-h-screen bg-[#0f172a] text-slate-200 p-8 font-sans",children:h.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[h.jsxs("div",{className:"border-b border-slate-700 pb-6 mb-10 flex justify-between items-start",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-4xl font-light text-white mb-2",children:"Privacy Policy"}),h.jsx("p",{className:"text-slate-400",children:"Last Updated: December 23, 2025"})]}),h.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-800 rounded-full transition-colors text-slate-400 hover:text-white",title:"Go Back",children:h.jsx($T,{size:24})})]}),h.jsx("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-xl p-6 mb-8",children:h.jsx("p",{className:"text-blue-200 text-sm",children:"This Privacy Policy explains how AutonomousVault handles your data. In short: We don't want your data, and we can't see your keys."})}),h.jsxs("section",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center gap-2 text-[#E7FE55]",children:[h.jsx(r8,{size:20}),h.jsx("h2",{className:"text-2xl font-light text-white",children:"1. Data Collection & Storage"})]}),h.jsxs("p",{className:"leading-relaxed text-slate-300",children:["AutonomousVault operates on a ",h.jsx("strong",{children:'"Local-First"'})," architecture."]}),h.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-slate-400",children:[h.jsxs("li",{children:[h.jsx("strong",{children:"Private Keys:"})," Generated locally and stored ONLY in your browser's encrypted storage (IndexedDB). They never leave your device unencrypted."]}),h.jsxs("li",{children:[h.jsx("strong",{children:"Chat History:"})," Stored locally on your device."]}),h.jsxs("li",{children:[h.jsx("strong",{children:"Usage Data:"})," We do not collect analytics or tracking data."]})]})]}),h.jsxs("section",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center gap-2 text-[#E7FE55]",children:[h.jsx(t2,{size:20}),h.jsx("h2",{className:"text-2xl font-light text-white",children:"2. Third-Party Services"})]}),h.jsx("p",{className:"leading-relaxed text-slate-300",children:"While the app runs locally, it interacts with the following services to function:"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[h.jsxs("div",{className:"bg-slate-800 p-4 rounded-lg",children:[h.jsx("h3",{className:"text-white font-medium mb-1",children:"Google Gemini (AI)"}),h.jsx("p",{className:"text-xs text-slate-400",children:"Processes user prompts to generate responses. Your keys are NOT sent to the AI."})]}),h.jsxs("div",{className:"bg-slate-800 p-4 rounded-lg",children:[h.jsx("h3",{className:"text-white font-medium mb-1",children:"Supabase (Auth & Database)"}),h.jsx("p",{className:"text-xs text-slate-400",children:"Handles authentication (Email/Google), user settings, and encrypted conversation history (if 24/7 mode is enabled). We only see your User ID and Email."})]}),h.jsxs("div",{className:"bg-slate-800 p-4 rounded-lg",children:[h.jsx("h3",{className:"text-white font-medium mb-1",children:"RPC Nodes"}),h.jsx("p",{className:"text-xs text-slate-400",children:"Public nodes (Solana, Hyperliquid, Polygon) receive your signed transactions to execute them on-chain."})]})]})]}),h.jsxs("section",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center gap-2 text-[#E7FE55]",children:[h.jsx(lm,{size:20}),h.jsx("h2",{className:"text-2xl font-light text-white",children:"3. Your Rights (GDPR/LGPD)"})]}),h.jsx("p",{className:"leading-relaxed text-slate-300",children:"You have complete control over your data:"}),h.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-slate-400",children:[h.jsxs("li",{children:[h.jsx("strong",{children:"Access:"})," All your data is visible within the application."]}),h.jsxs("li",{children:[h.jsx("strong",{children:"Deletion:"}),' You can use the "Delete Account" button in Settings to wipe all local data and delete your Supabase authentication record.']}),h.jsxs("li",{children:[h.jsx("strong",{children:"Portability:"})," You can export your private keys at any time via the Backup feature."]})]})]}),h.jsxs("div",{className:"pt-10 border-t border-slate-700 flex justify-between items-center mt-12",children:[h.jsx("p",{className:"text-xs text-slate-500",children:"AutonomousVault v0.1"}),h.jsxs("button",{onClick:e,className:"text-[#E7FE55] hover:underline flex items-center gap-2",children:[h.jsx($T,{size:14})," Return to App"]})]})]})})},O0e=({onBack:t})=>{const e=()=>{t?t():window.location.reload()};return h.jsx("div",{className:"min-h-screen bg-[#0f172a] text-slate-200 p-8 font-sans",children:h.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[h.jsxs("div",{className:"border-b border-slate-700 pb-6 mb-10 flex justify-between items-start",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-4xl font-light text-white mb-2",children:"Terms of Use"}),h.jsx("p",{className:"text-slate-400",children:"Effective Date: December 23, 2025"})]}),h.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-800 rounded-full transition-colors text-slate-400 hover:text-white",title:"Go Back",children:h.jsx($T,{size:24})})]}),h.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-6 flex flex-col gap-4",children:[h.jsxs("div",{className:"flex items-center gap-3 text-red-400",children:[h.jsx(_l,{size:24}),h.jsx("h2",{className:"text-xl font-semibold",children:"Critical Disclaimer"})]}),h.jsx("p",{className:"text-sm leading-relaxed text-red-100/80",children:'AutonomousVault is experimental, open-source software. It is provided "AS IS", without warranty of any kind. You use this software entirely at your own risk. The developers constitute a non-custodial entity and accept no liability for lost funds, private key mismanagement, or protocol failures.'})]}),h.jsxs("section",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center gap-2 text-[#E7FE55]",children:[h.jsx(E4,{size:20}),h.jsx("h2",{className:"text-2xl font-light text-white",children:"1. Self-Custody Model"})]}),h.jsx("p",{className:"leading-relaxed text-slate-300",children:"By using AutonomousVault, you acknowledge that:"}),h.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-slate-400",children:[h.jsx("li",{children:"You are the sole custodian of your cryptographic private keys."}),h.jsx("li",{children:"Private keys are encrypted and stored solely within your device's browser (IndexedDB)."}),h.jsx("li",{children:"We (the developers) never have access to your private keys or funds."}),h.jsx("li",{children:"If you lose your password or clear your browser data without a backup, your funds are permanently lost."})]})]}),h.jsxs("section",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center gap-2 text-[#E7FE55]",children:[h.jsx(xw,{size:20}),h.jsx("h2",{className:"text-2xl font-light text-white",children:"2. Universal Data Liability"})]}),h.jsx("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-6",children:h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx(_l,{className:"text-red-400 shrink-0 mt-1",size:20}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("h3",{className:"text-red-200 font-medium",children:"Full User Responsibility"}),h.jsxs("p",{className:"text-red-200/80 text-sm leading-relaxed",children:["The user assumes ",h.jsx("strong",{children:"FULL RESPONSIBILITY"})," for data security, custody, and management in ",h.jsx("strong",{children:"ALL MODES OF OPERATION"}),' (including "Local-Only" and "24/7 Server Mode").']}),h.jsxs("p",{className:"text-red-200/80 text-sm leading-relaxed",children:["The application always operates on the user's own infrastructure (local machine or personal Supabase database). The developers of AutonomousVault accept ",h.jsx("strong",{children:"NO LIABILITY"})," for data loss, unauthorized access, key compromise, or any other security breaches under any circumstances."]})]})]})})]}),h.jsxs("section",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center gap-2 text-[#E7FE55]",children:[h.jsx(a8,{size:20}),h.jsx("h2",{className:"text-2xl font-light text-white",children:"3. Experimental Protocols & Risks"})]}),h.jsxs("div",{className:"space-y-4 text-slate-300",children:[h.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg border border-slate-700",children:[h.jsxs("h3",{className:"text-white font-medium mb-2 flex items-center gap-2",children:[h.jsx("span",{className:"w-2 h-2 rounded-full bg-orange-400"}),"Hyperliquid (Testnet)"]}),h.jsxs("p",{className:"text-sm",children:["Trading on Hyperliquid is currently on ",h.jsx("strong",{children:"Testnet"}),". While no real funds are at risk on Testnet, the trading logic is experimental. The AI Agent's performance on Testnet does not guarantee future results on Mainnet."]})]}),h.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg border border-slate-700",children:[h.jsxs("h3",{className:"text-white font-medium mb-2 flex items-center gap-2",children:[h.jsx("span",{className:"w-2 h-2 rounded-full bg-purple-400"}),"Polymarket (Prediction Markets)"]}),h.jsxs("p",{className:"text-sm",children:["Prediction markets involve high risk. The AI Agent provides analysis based on available data, but ",h.jsx("strong",{children:"outcome predictions are never guaranteed"}),"."]}),h.jsxs("p",{className:"text-sm mt-2 text-slate-400 italic",children:[h.jsx("strong",{children:"Regular compliance:"})," You are solely responsible for ensuring that using prediction markets complies with the laws of your jurisdiction."]})]})]})]}),h.jsxs("section",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center gap-2 text-[#E7FE55]",children:[h.jsx(E4,{size:20}),h.jsx("h2",{className:"text-2xl font-light text-white",children:"4. AI Agent Autonomy"})]}),h.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-slate-400",children:[h.jsx("li",{children:"The AI Agent executes instructions based on your prompts."}),h.jsx("li",{children:"It may generate code, execute transactions (Solana), trade perps (Hyperliquid), or interact with prediction markets (Polymarket)."}),h.jsxs("li",{children:[h.jsx("strong",{children:"You are the final approver."})," While the agent can be autonomous, you are responsible for monitoring its actions."]}),h.jsx("li",{children:"The developers are not liable for losses caused by AI hallucination, error, or unintended execution."})]})]}),h.jsxs("section",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center gap-2 text-[#E7FE55]",children:[h.jsx(xw,{size:20}),h.jsx("h2",{className:"text-2xl font-light text-white",children:"5. Prohibited Activities"})]}),h.jsx("p",{className:"leading-relaxed text-slate-300",children:"You agree not to use AutonomousVault for:"}),h.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-slate-400",children:[h.jsx("li",{children:"Money laundering or financing terrorism."}),h.jsx("li",{children:"Interacting with sanctioned addresses or entities."}),h.jsx("li",{children:"Any illegal activity defined by the laws of your jurisdiction."})]})]}),h.jsxs("div",{className:"pt-10 border-t border-slate-700 flex justify-between items-center mt-12",children:[h.jsx("p",{className:"text-xs text-slate-500",children:"AutonomousVault v0.1"}),h.jsxs("button",{onClick:e,className:"text-[#E7FE55] hover:underline flex items-center gap-2",children:[h.jsx($T,{size:14})," Return to App"]})]})]})})},lmt=({userId:t})=>{const[e,n]=T.useState(!0),[r,i]=T.useState(!0),s=t?`legal_consent_v1_${t}`:null;T.useEffect(()=>{(async()=>{if(!s){i(!1);return}const l=await Ae.getItem(s);n(l==="true"),i(!1)})()},[s]);const o=async()=>{s&&await Ae.setItem(s,"true"),n(!0)};return r||e?null:h.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/90 backdrop-blur-sm flex items-center justify-center p-4",children:h.jsxs("div",{className:"bg-[#0f172a] border border-slate-700 w-full max-w-lg rounded-2xl shadow-2xl overflow-hidden",children:[h.jsxs("div",{className:"p-8 pb-4 text-center",children:[h.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-[#E7FE55]/10 mb-4",children:h.jsx(sd,{size:32,className:"text-[#E7FE55]"})}),h.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Welcome to AutonomousVault"}),h.jsx("p",{className:"text-slate-400 text-sm",children:"Use AI to manage your DeFi portfolio autonomously."})]}),h.jsxs("div",{className:"px-8 py-4 space-y-4",children:[h.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 text-sm text-slate-300 border border-slate-700",children:[h.jsx("p",{className:"mb-2 font-semibold text-white",children:"Before you continue:"}),h.jsxs("ul",{className:"space-y-2 list-disc pl-4 text-slate-400",children:[h.jsxs("li",{children:["This software is ",h.jsx("strong",{children:"experimental"}),"."]}),h.jsxs("li",{children:["You maintain ",h.jsx("strong",{children:"sole custody"})," of your keys."]}),h.jsxs("li",{children:["The developers are ",h.jsx("strong",{children:"not liable"})," for any funds lost."]})]})]}),h.jsxs("p",{className:"text-sm text-center text-slate-400 mt-4 leading-relaxed",children:['By clicking "I Agree", you acknowledge that you have read and agree to our',h.jsx("br",{}),h.jsx("a",{href:"/terms.html",target:"_blank",rel:"noopener noreferrer",className:"text-[#E7FE55] hover:underline font-medium",children:"Terms of Use"})," and ",h.jsx("a",{href:"/privacy.html",target:"_blank",rel:"noopener noreferrer",className:"text-[#E7FE55] hover:underline font-medium",children:"Privacy Policy"}),"."]})]}),h.jsx("div",{className:"p-8 pt-4",children:h.jsxs("button",{onClick:o,className:"w-full bg-[#E7FE55] hover:bg-[#d9f044] text-black font-bold py-3.5 rounded-xl transition-all flex items-center justify-center gap-2 shadow-lg shadow-[#E7FE55]/20",children:["I Agree & Continue ",h.jsx(wne,{size:18})]})})]})})},cmt=({onNavigate:t})=>h.jsx("footer",{className:"w-full py-4 text-center mt-auto border-t border-[#232328]/50",children:h.jsxs("div",{className:"flex flex-col items-center gap-2",children:[h.jsx("p",{className:"text-[10px] text-slate-600 font-medium tracking-wide",children:" 2025 AutonomousVault. All rights reserved."}),t&&h.jsxs("div",{className:"flex items-center gap-4 text-[10px] text-slate-500",children:[h.jsx("button",{onClick:()=>t(Ce.TERMS),className:"hover:text-[#E7FE55] transition-colors",children:"Terms of Use"}),h.jsx("span",{children:""}),h.jsx("button",{onClick:()=>t(Ce.PRIVACY),className:"hover:text-[#E7FE55] transition-colors",children:"Privacy Policy"})]})]})});function umt(){var Zo,zl,wo,Eo,ea,So,xr,Gc;const[t,e]=T.useState(Ce.AGENT),[n,r]=T.useState([]),[i,s]=T.useState(!1),[o,a]=T.useState(!1),[l,c]=T.useState("providers"),[u,f]=T.useState("main"),{user:m,logout:g}=A1(),v=T.useRef(null);T.useEffect(()=>{v.current&&(v.current.scrollTop=0)},[t]);const x=Sr=>{const Yr=Date.now();r(ds=>[...ds,{id:Yr,message:Sr}]),setTimeout(()=>{r(ds=>ds.filter(Th=>Th.id!==Yr))},5e3)},{vault:b,password:E,setPassword:C,withdrawAmount:k,setWithdrawAmount:O,withdrawNetwork:U,setWithdrawNetwork:R,showBackupModal:$,setShowBackupModal:V,backupKey:j,setBackupKey:F,showHLBackupModal:W,setShowHLBackupModal:H,hlBackupKey:B,setHLBackupKey:A,isImporting:I,setIsImporting:D,importKey:z,setImportKey:G,refreshBalance:te,connectOwnerWallet:K,disconnectOwnerWallet:q,createVault:M,unlockVault:_,requestAirdrop:Y,handleWithdraw:X,handleWithdrawHL:re,handleWithdrawPM:oe,importVault:Ee,resolveTokenMint:ce,connectHLOwnerWallet:me,disconnectHLOwnerWallet:ue,refreshHLBalance:le,isImportingSolana:Ie,setIsImportingSolana:Ne,isImportingHyperliquid:$e,setIsImportingHyperliquid:Ze,isImportingPolymarket:Ye,setIsImportingPolymarket:We,solanaPassword:At,setSolanaPassword:ot,hyperliquidPassword:Bt,setHyperliquidPassword:Zt,polymarketPassword:Ge,setPolymarketPassword:Tt,solanaImportKey:ln,setSolanaImportKey:Pe,hlImportKey:Ve,setHLImportKey:ht,pmImportKey:ct,setPMImportKey:se,createSolanaVault:J,createHyperliquidVault:Z,createPolymarketVault:fe,importSolanaVault:be,importHyperliquidVault:he,importPolymarketVault:ye,connectPMOwnerWallet:Xe,disconnectPMOwnerWallet:et,showPMBackupModal:st,setShowPMBackupModal:Ft,pmBackupKey:vt,setPMBackupKey:Ot}=Kht(x,(m==null?void 0:m.uid)||null),cn=!!(b.publicKey||b.hlPublicKey);T.useEffect(()=>{[Ce.AGENT,Ce.VAULT_DEALER,Ce.DEALER_DASHBOARD,Ce.DEALER_THINKING,Ce.DEALER_CONFIG].includes(t)&&!b.isUnlocked&&cn&&e(Ce.VAULT)},[t,b.isUnlocked,cn]),T.useEffect(()=>{b.isUnlocked&&e(Ce.DASHBOARD)},[b.isUnlocked]);const{portfolioHistoryDaily:en,portfolioHistoryLongTerm:rn,assetPrices:Ci,assetAllocationData:zn}=Wht(b),{activityFeed:ae,activityDisplayCount:Q,addActivityLog:ee}=Yht(b),{scheduledTasks:pe,setScheduledTasks:ke}=Jht(b,E,x,te,ee),{messages:Re,inputMessage:ze,setInputMessage:Jt,isAiProcessing:$t,aiStatus:it,scrollRef:mn,handleSendMessage:yt,activeConversationId:vn,loadConversation:Ya,startNewConversation:ur}=ept(b,E,ke,x,te,ee,ce);Wme(b,E);const yr=async Sr=>{try{const Yr=await td.loadConversation(Sr,E);Yr?Ya(Yr):x("Failed to load conversation.")}catch(Yr){console.error(Yr),x("Error loading conversation. Check password.")}},qc=()=>{ur(),e(Ce.AGENT)},$l=async()=>{x("Refreshing data...");try{const Sr=[];b.publicKey&&Sr.push(te(b.publicKey)),b.hlPublicKey&&Sr.push(le(b.hlPublicKey)),await Promise.all(Sr),x("Data refreshed successfully")}catch(Sr){console.error("Refresh failed",Sr),x("Failed to refresh data")}};return h.jsxs("div",{className:"flex h-screen bg-[#0f1015] text-[#e4e5e9] font-sans selection:bg-[#E7FE55]/30 overflow-hidden",children:[h.jsx(gOe,{activeTab:t,setActiveTab:e,isVaultUnlocked:b.isUnlocked,onSelectConversation:yr,onNewChat:qc,currentConversationId:vn,password:E,isOpen:i,onClose:()=>s(!1)}),h.jsxs("main",{ref:v,className:`flex-1 ml-0 xl:ml-[264px] h-full flex flex-col relative transition-all duration-300 ${[Ce.VAULT_DEALER,Ce.DEALER_DASHBOARD,Ce.DEALER_THINKING,Ce.DEALER_CONFIG,Ce.DEALER_PROMPT,Ce.POLYMARKET_DEALER,Ce.POLYMARKET_DASHBOARD,Ce.POLYMARKET_THINKING,Ce.POLYMARKET_CONFIG,Ce.POLYMARKET_PROMPT].includes(t)?"overflow-hidden":"overflow-y-auto"}`,children:[t===Ce.AGENT&&h.jsxs("header",{className:"flex justify-between items-center mb-0 sticky top-0 z-40 bg-[#0f1015] pt-8 pb-4 px-4 md:px-8 lg:px-12 xl:px-16 transition-all shrink-0 relative",children:[h.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[h.jsx("button",{onClick:()=>s(!0),className:"xl:hidden text-[#747580] hover:text-white transition-colors",children:h.jsx(Jz,{size:24})}),h.jsxs("div",{children:[h.jsx("h2",{className:"text-xl font-semibold text-white tracking-tight",children:"Vault Operator"}),h.jsx("p",{className:"text-[#747580] text-sm hidden sm:block",children:"Interact with Vault Operator using natural language."})]})]}),h.jsxs("div",{className:"hidden sm:flex items-center gap-2 absolute left-1/2 transform -translate-x-1/2",children:[h.jsxs("button",{onClick:qc,className:"flex items-center gap-2 px-3 py-1.5 rounded bg-[#E7FE55] hover:bg-[#f0ff7a] text-black text-sm font-medium transition-colors",title:"New Chat",children:[h.jsx("div",{className:"w-5 h-5 rounded bg-black/20 flex items-center justify-center",children:h.jsx(Su,{size:12,strokeWidth:2.5})}),h.jsx("span",{className:"hidden md:inline",children:"New"})]}),h.jsx("div",{className:"h-6 w-px bg-[#232328]"}),h.jsxs("button",{onClick:()=>e(Ce.HISTORY),className:"flex items-center gap-2 px-3 py-1.5 rounded bg-[#14151a] hover:bg-[#1a1b21] text-[#a0a1a8] hover:text-white text-sm font-medium transition-colors border border-[#232328]",title:"Chat History",children:[h.jsx(Rs,{size:14}),h.jsx("span",{className:"hidden md:inline",children:"History"})]}),h.jsxs("button",{onClick:()=>e(Ce.SCHEDULER),className:"flex items-center gap-2 px-3 py-1.5 rounded bg-[#14151a] hover:bg-[#1a1b21] text-[#a0a1a8] hover:text-white text-sm font-medium transition-colors border border-[#232328]",title:"Automations",children:[h.jsx(t8,{size:14}),h.jsx("span",{className:"hidden md:inline",children:"Automations"})]})]}),h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("div",{className:"text-right hidden md:block",children:[h.jsx("div",{className:"text-[9px] uppercase tracking-[0.05em] text-[#5a5b63]",children:"System Status"}),h.jsxs("div",{className:"flex items-center justify-end gap-1.5 text-[#E7FE55] text-[11px] font-medium",children:[h.jsx("div",{className:"w-1 h-1 bg-[#E7FE55] rounded-full"}),"Online"]})]}),h.jsxs("div",{className:"relative",children:[h.jsx("button",{onClick:()=>a(!o),className:"flex items-center gap-2 p-1 rounded-lg hover:bg-[#1a1b21] transition-colors border border-transparent hover:border-[#232328]",title:(m==null?void 0:m.email)||"User",children:m!=null&&m.photoURL?h.jsx("img",{src:m.photoURL,alt:"User",className:"w-8 h-8 rounded-full border border-[#232328]"}):h.jsx("div",{className:"w-8 h-8 rounded-full bg-[#E7FE55] flex items-center justify-center text-black font-semibold text-sm",children:((zl=(Zo=m==null?void 0:m.email)==null?void 0:Zo[0])==null?void 0:zl.toUpperCase())||"U"})}),o&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>a(!1)}),h.jsxs("div",{className:"absolute right-0 top-full mt-2 w-64 bg-[#14151a] border border-[#232328] rounded-lg shadow-xl z-50 overflow-hidden",children:[h.jsx("div",{className:"px-4 py-3 border-b border-[#232328]",children:h.jsxs("div",{className:"flex items-center gap-3",children:[m!=null&&m.photoURL?h.jsx("img",{src:m.photoURL,alt:"User",className:"w-10 h-10 rounded-full border border-[#232328]"}):h.jsx("div",{className:"w-10 h-10 rounded-full bg-[#E7FE55] flex items-center justify-center text-black font-semibold",children:((Eo=(wo=m==null?void 0:m.email)==null?void 0:wo[0])==null?void 0:Eo.toUpperCase())||"U"}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("p",{className:"text-white text-sm font-medium truncate",children:(m==null?void 0:m.displayName)||"User"}),h.jsx("p",{className:"text-[#747580] text-xs truncate",children:m==null?void 0:m.email})]})]})}),h.jsxs("div",{className:"p-2 space-y-1",children:[h.jsxs("button",{onClick:()=>{a(!1),$l()},className:"w-full flex items-center gap-3 px-3 py-2 text-[#a0a1a8] hover:text-white hover:bg-[#1a1b21] rounded-lg transition-colors text-sm",children:[h.jsx(Pc,{size:16}),"Refresh Data"]}),h.jsxs("button",{onClick:()=>{a(!1),e(Ce.CONFIGURATION)},className:"w-full flex items-center gap-3 px-3 py-2 text-[#a0a1a8] hover:text-white hover:bg-[#1a1b21] rounded-lg transition-colors text-sm",children:[h.jsx(HT,{size:16}),"Configuration"]}),h.jsx("div",{className:"border-t border-[#232328] my-2"}),h.jsxs("button",{onClick:async()=>{a(!1),await g()},className:"w-full flex items-center gap-3 px-3 py-2 text-[#a0a1a8] hover:text-white hover:bg-[#1a1b21] rounded-lg transition-colors text-sm",children:[h.jsx(Yz,{size:16}),"Sign Out"]})]})]})]})]})]})]}),h.jsxs("div",{className:`flex-1 pb-8 max-w-[1920px] mx-auto w-full ${t===Ce.AGENT?"px-6 md:px-24 lg:px-40 xl:px-64":"px-4 md:px-8 lg:px-12 xl:px-16"} ${[Ce.VAULT_DEALER,Ce.DEALER_DASHBOARD,Ce.DEALER_THINKING,Ce.DEALER_CONFIG,Ce.DEALER_PROMPT,Ce.POLYMARKET_DEALER,Ce.POLYMARKET_DASHBOARD,Ce.POLYMARKET_THINKING,Ce.POLYMARKET_CONFIG,Ce.POLYMARKET_PROMPT].includes(t)?"flex flex-col h-full":""}`,children:[t!==Ce.AGENT&&h.jsxs("header",{className:"flex justify-between items-center mb-6 sticky top-0 z-40 bg-[#0f1015] pt-8 pb-4 -mx-4 px-4 md:px-0 md:-mx-0 transition-all shrink-0",children:[h.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[h.jsx("button",{onClick:()=>s(!0),className:"xl:hidden text-[#747580] hover:text-white transition-colors",children:h.jsx(Jz,{size:24})}),h.jsx("div",{className:"flex items-center gap-4",children:h.jsxs("div",{children:[h.jsxs("h2",{className:"text-xl font-semibold text-white tracking-tight",children:[t===Ce.DASHBOARD&&"Dashboard",t===Ce.VAULT&&"Vault",t===Ce.SCHEDULER&&"Automations",[Ce.VAULT_DEALER,Ce.DEALER_DASHBOARD,Ce.DEALER_THINKING,Ce.DEALER_CONFIG,Ce.DEALER_PROMPT].includes(t)&&"Hyperliquid Dealer",t===Ce.CONFIGURATION&&"Configuration",t===Ce.HYPERLIQUID&&"Hyperliquid Trading",t===Ce.HISTORY&&"History",t===Ce.TOKEN_COSTS&&"Token Costs",[Ce.POLYMARKET_DEALER,Ce.POLYMARKET_DASHBOARD].includes(t)&&"Polymarket Dealer",t===Ce.POLYMARKET_CONFIG&&"Polymarket Config",t===Ce.POLYMARKET_PROMPT&&"Polymarket Strategy"]}),h.jsxs("p",{className:"text-[#747580] text-sm hidden sm:block",children:[t===Ce.DASHBOARD&&"Overview of your autonomous DeFi agent.",t===Ce.VAULT&&"Manage your secure local vault and assets.",t===Ce.SCHEDULER&&"Automate swaps, transfers and trading strategies.",[Ce.VAULT_DEALER,Ce.DEALER_DASHBOARD,Ce.DEALER_THINKING,Ce.DEALER_CONFIG,Ce.DEALER_PROMPT].includes(t)&&"Autonomous trading engine (BETA).",t===Ce.CONFIGURATION&&"Configure trading parameters and risk management.",t===Ce.HYPERLIQUID&&"Trade on Hyperliquid Testnet.",t===Ce.HISTORY&&"Review past conversations.",t===Ce.TOKEN_COSTS&&"Monitor AI token consumption and costs.",[Ce.POLYMARKET_DEALER,Ce.POLYMARKET_DASHBOARD].includes(t)&&"Autonomous prediction market trading (BETA).",t===Ce.POLYMARKET_CONFIG&&"Configure Polymarket trading parameters.",t===Ce.POLYMARKET_PROMPT&&"Customize your Polymarket strategy."]})]})})]}),[Ce.VAULT_DEALER,Ce.DEALER_DASHBOARD,Ce.DEALER_THINKING,Ce.DEALER_CONFIG,Ce.DEALER_PROMPT].includes(t)&&h.jsxs("div",{className:"hidden sm:flex items-center gap-1 bg-[#1a1b21] p-1 rounded border border-[#232328] absolute left-1/2 transform -translate-x-1/2",children:[h.jsx("button",{onClick:()=>e(Ce.DEALER_DASHBOARD),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${[Ce.VAULT_DEALER,Ce.DEALER_DASHBOARD].includes(t)?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Dashboard"}),h.jsx("button",{onClick:()=>e(Ce.DEALER_THINKING),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${t===Ce.DEALER_THINKING?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Thinking"}),h.jsx("button",{onClick:()=>e(Ce.DEALER_CONFIG),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${t===Ce.DEALER_CONFIG?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Configuration"}),h.jsx("button",{onClick:()=>e(Ce.DEALER_PROMPT),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${t===Ce.DEALER_PROMPT?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Prompt"})]}),[Ce.POLYMARKET_DEALER,Ce.POLYMARKET_DASHBOARD,Ce.POLYMARKET_THINKING,Ce.POLYMARKET_CONFIG,Ce.POLYMARKET_PROMPT].includes(t)&&h.jsxs("div",{className:"hidden sm:flex items-center gap-1 bg-[#1a1b21] p-1 rounded border border-[#232328] absolute left-1/2 transform -translate-x-1/2",children:[h.jsx("button",{onClick:()=>e(Ce.POLYMARKET_DASHBOARD),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${[Ce.POLYMARKET_DEALER,Ce.POLYMARKET_DASHBOARD].includes(t)?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Dashboard"}),h.jsx("button",{onClick:()=>e(Ce.POLYMARKET_THINKING),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${t===Ce.POLYMARKET_THINKING?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Thinking"}),h.jsx("button",{onClick:()=>e(Ce.POLYMARKET_CONFIG),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${t===Ce.POLYMARKET_CONFIG?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Configuration"}),h.jsx("button",{onClick:()=>e(Ce.POLYMARKET_PROMPT),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${t===Ce.POLYMARKET_PROMPT?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Prompt"})]}),t===Ce.CONFIGURATION&&h.jsxs("div",{className:"hidden sm:flex items-center gap-1 bg-[#1a1b21] p-1 rounded border border-[#232328] absolute left-1/2 transform -translate-x-1/2",children:[h.jsx("button",{onClick:()=>c("providers"),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${l==="providers"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"AI Providers"}),h.jsx("button",{onClick:()=>c("user"),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${l==="user"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"User Settings"})]}),t===Ce.VAULT&&h.jsxs("div",{className:"hidden sm:flex items-center gap-1 bg-[#1a1b21] p-1 rounded border border-[#232328] absolute left-1/2 transform -translate-x-1/2",children:[h.jsx("button",{onClick:()=>f("main"),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${u==="main"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Overview"}),h.jsx("button",{onClick:()=>f("solana"),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${u==="solana"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Solana"}),h.jsx("button",{onClick:()=>f("hyperliquid"),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${u==="hyperliquid"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Hyperliquid"}),h.jsx("button",{onClick:()=>f("polymarket"),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${u==="polymarket"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Polymarket"})]}),h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("div",{className:"text-right hidden md:block",children:[h.jsx("div",{className:"text-[9px] uppercase tracking-[0.05em] text-[#5a5b63]",children:"System Status"}),h.jsxs("div",{className:"flex items-center justify-end gap-1.5 text-[#E7FE55] text-[11px] font-medium",children:[h.jsx("div",{className:"w-1 h-1 bg-[#E7FE55] rounded-full"}),"Online"]})]}),h.jsxs("div",{className:"relative",children:[h.jsx("button",{onClick:()=>a(!o),className:"flex items-center gap-2 p-1 rounded-lg hover:bg-[#1a1b21] transition-colors border border-transparent hover:border-[#232328]",title:(m==null?void 0:m.email)||"User",children:m!=null&&m.photoURL?h.jsx("img",{src:m.photoURL,alt:"User",className:"w-8 h-8 rounded-full border border-[#232328]"}):h.jsx("div",{className:"w-8 h-8 rounded-full bg-[#E7FE55] flex items-center justify-center text-black font-semibold text-sm",children:((So=(ea=m==null?void 0:m.email)==null?void 0:ea[0])==null?void 0:So.toUpperCase())||"U"})}),o&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>a(!1)}),h.jsxs("div",{className:"absolute right-0 top-full mt-2 w-64 bg-[#14151a] border border-[#232328] rounded-lg shadow-xl z-50 overflow-hidden",children:[h.jsx("div",{className:"px-4 py-3 border-b border-[#232328]",children:h.jsxs("div",{className:"flex items-center gap-3",children:[m!=null&&m.photoURL?h.jsx("img",{src:m.photoURL,alt:"User",className:"w-10 h-10 rounded-full border border-[#232328]"}):h.jsx("div",{className:"w-10 h-10 rounded-full bg-[#E7FE55] flex items-center justify-center text-black font-semibold",children:((Gc=(xr=m==null?void 0:m.email)==null?void 0:xr[0])==null?void 0:Gc.toUpperCase())||"U"}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("p",{className:"text-white text-sm font-medium truncate",children:(m==null?void 0:m.displayName)||"User"}),h.jsx("p",{className:"text-[#747580] text-xs truncate",children:m==null?void 0:m.email})]})]})}),h.jsxs("div",{className:"p-2 space-y-1",children:[h.jsxs("button",{onClick:()=>{a(!1),$l()},className:"w-full flex items-center gap-3 px-3 py-2 text-[#a0a1a8] hover:text-white hover:bg-[#1a1b21] rounded-lg transition-colors text-sm",children:[h.jsx(Pc,{size:16}),"Refresh Data"]}),h.jsxs("button",{onClick:()=>{a(!1),e(Ce.CONFIGURATION)},className:"w-full flex items-center gap-3 px-3 py-2 text-[#a0a1a8] hover:text-white hover:bg-[#1a1b21] rounded-lg transition-colors text-sm",children:[h.jsx(HT,{size:16}),"Configuration"]}),h.jsx("div",{className:"border-t border-[#232328] my-2"}),h.jsxs("button",{onClick:async()=>{a(!1),await g()},className:"w-full flex items-center gap-3 px-3 py-2 text-[#a0a1a8] hover:text-white hover:bg-[#1a1b21] rounded-lg transition-colors text-sm",children:[h.jsx(Yz,{size:16}),"Sign Out"]})]})]})]})]})]})]}),h.jsxs("div",{className:`animate-fade-in ${[Ce.VAULT_DEALER,Ce.DEALER_DASHBOARD,Ce.DEALER_THINKING,Ce.DEALER_CONFIG,Ce.DEALER_PROMPT,Ce.POLYMARKET_DEALER,Ce.POLYMARKET_DASHBOARD,Ce.POLYMARKET_THINKING,Ce.POLYMARKET_CONFIG,Ce.POLYMARKET_PROMPT].includes(t)?"flex-1 min-h-0":""}`,children:[t===Ce.DASHBOARD&&h.jsx(LGe,{vault:b,connectOwnerWallet:K,disconnectOwnerWallet:q,connectHLOwnerWallet:me,disconnectHLOwnerWallet:ue,connectPMOwnerWallet:Xe,disconnectPMOwnerWallet:et,assetPrices:Ci,portfolioHistoryDaily:en,portfolioHistoryLongTerm:rn,scheduledTasks:pe,assetAllocationData:zn,activityFeed:ae,activityDisplayCount:Q,setActiveTab:e,refreshData:$l,onNewChat:qc,setActivityDisplayCount:function(Sr){throw new Error("Function not implemented.")}}),t===Ce.VAULT&&h.jsx(jGe,{vault:b,password:E,setPassword:C,withdrawAmount:k,setWithdrawAmount:O,withdrawNetwork:U,setWithdrawNetwork:R,isImporting:I,setIsImporting:D,importKey:z,setImportKey:G,createVault:M,unlockVault:_,requestAirdrop:Y,handleWithdraw:X,handleWithdrawHL:re,handleWithdrawPM:oe,importVault:Ee,addNotification:x,isImportingSolana:Ie,setIsImportingSolana:Ne,isImportingHyperliquid:$e,setIsImportingHyperliquid:Ze,isImportingPolymarket:Ye,setIsImportingPolymarket:We,solanaPassword:At,setSolanaPassword:ot,hyperliquidPassword:Bt,setHyperliquidPassword:Zt,polymarketPassword:Ge,setPolymarketPassword:Tt,solanaImportKey:ln,setSolanaImportKey:Pe,hlImportKey:Ve,setHLImportKey:ht,pmImportKey:ct,setPMImportKey:se,createSolanaVault:J,createHyperliquidVault:Z,createPolymarketVault:fe,importSolanaVault:be,importHyperliquidVault:he,importPolymarketVault:ye,setActiveTab:e,activeVaultTab:u,setActiveVaultTab:f}),t===Ce.AGENT&&h.jsx(bZe,{messages:Re,inputMessage:ze,setInputMessage:Jt,handleSendMessage:yt,isAiProcessing:$t,aiStatus:it,scrollRef:mn,isVaultUnlocked:b.isUnlocked,password:E,setPassword:C,unlockVault:_,hasVault:!!(b.publicKey||b.hlPublicKey),onNavigate:e}),t===Ce.HISTORY&&h.jsx(apt,{onSelectConversation:Sr=>{yr(Sr),e(Ce.AGENT)}}),t===Ce.SCHEDULER&&h.jsx(EZe,{scheduledTasks:pe,setScheduledTasks:ke,addNotification:x}),[Ce.VAULT_DEALER,Ce.DEALER_DASHBOARD,Ce.DEALER_THINKING,Ce.DEALER_CONFIG,Ce.DEALER_PROMPT].includes(t)&&h.jsx(rlt,{vault:b,password:E,activeTab:t,setActiveTab:e}),t===Ce.CONFIGURATION&&h.jsx(Xpt,{vault:b,password:E,addNotification:x,activeTab:l,setActiveTab:c}),t===Ce.HYPERLIQUID&&h.jsx(ilt,{vault:b,connectHLOwnerWallet:me,refreshHLBalance:le,activityLog:ae}),t===Ce.TOKEN_COSTS&&h.jsx(Zpt,{addNotification:x}),[Ce.POLYMARKET_DEALER,Ce.POLYMARKET_DASHBOARD,Ce.POLYMARKET_THINKING,Ce.POLYMARKET_CONFIG,Ce.POLYMARKET_PROMPT].includes(t)&&h.jsx(amt,{vault:b,password:E,activeTab:t,setActiveTab:e}),t===Ce.PRIVACY&&h.jsx(R0e,{onBack:()=>e(Ce.DASHBOARD)}),t===Ce.TERMS&&h.jsx(O0e,{onBack:()=>e(Ce.DASHBOARD)})]})]}),t!==Ce.AGENT&&h.jsx(cmt,{onNavigate:e})]}),h.jsx("div",{className:"fixed bottom-6 right-6 z-[60] space-y-2 pointer-events-none",children:n.map(Sr=>h.jsxs("div",{className:"bg-[#14151a] border border-[#232328] text-white px-4 py-3 rounded shadow-xl flex items-center gap-3 animate-slide-up pointer-events-auto max-w-sm",children:[h.jsx("div",{className:"w-1.5 h-1.5 bg-[#E7FE55] rounded-full"}),h.jsx("span",{className:"text-sm font-medium",children:Sr.message}),h.jsx("button",{onClick:()=>r(Yr=>Yr.filter(ds=>ds.id!==Sr.id)),className:"text-[#747580] hover:text-white ml-2",children:h.jsx(r2,{size:14})})]},Sr.id))}),$&&h.jsx(gct,{backupKey:j,setBackupKey:F,setShowBackupModal:V,addNotification:x,onClose:()=>{H(!0)}}),W&&h.jsx(yct,{backupKey:B,setBackupKey:A,setShowBackupModal:H,addNotification:x}),st&&h.jsx(xct,{backupKey:vt,setBackupKey:Ot,setShowBackupModal:Ft,addNotification:x}),h.jsx(lmt,{userId:(m==null?void 0:m.uid)||null})]})}function dmt(){const{signInWithGoogle:t,signInWithGitHub:e,signInWithDiscord:n,signInWithEthereum:r,signInWithSolana:i,signInWithEmail:s,signUp:o}=A1(),[a,l]=T.useState(""),[c,u]=T.useState(""),[f,m]=T.useState(!1),[g,v]=T.useState(!1),[x,b]=T.useState(null),[E,C]=T.useState(!1),[k,O]=T.useState(null),U=async V=>{b(null),O(V);try{V==="google"?await t():V==="github"?await e():V==="discord"&&await n()}catch(j){b(j.message||`Failed to sign in with ${V}`)}finally{O(null)}},R=async V=>{b(null),O(V);try{V==="ethereum"?await r():await i()}catch(j){b(j.message||`Failed to sign in with ${V}`)}finally{O(null)}},$=async V=>{V.preventDefault(),b(null),C(!0);try{f?await o(a,c):await s(a,c)}catch(j){const F=j.code||"";F.includes("user-not-found")?b("No account found with this email"):F.includes("wrong-password")?b("Incorrect password"):F.includes("email-already-in-use")?b("An account already exists with this email"):F.includes("weak-password")?b("Password should be at least 6 characters"):F.includes("invalid-email")?b("Invalid email address"):b(j.message||"Authentication failed")}finally{C(!1)}};return h.jsx("div",{className:"min-h-screen bg-[#0f1015] flex items-center justify-center p-4",children:h.jsxs("div",{className:"w-full max-w-md",children:[h.jsxs("div",{className:"text-center mb-8",children:[h.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-[#E7FE55] to-[#c8e044] rounded-2xl mb-4 shadow-lg shadow-[#E7FE55]/20",children:h.jsxs("svg",{className:"w-8 h-8 text-black",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"}),h.jsx("path",{d:"M12 8v4"}),h.jsx("path",{d:"M12 16h.01"})]})}),h.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"AutonomousVault"}),h.jsx("p",{className:"text-[#747580] text-sm",children:"Multi-Chain DeFi Agent"})]}),h.jsxs("div",{className:"bg-[#14151a] border border-[#232328] rounded-xl p-6 shadow-xl",children:[h.jsx("h2",{className:"text-lg font-semibold text-white mb-6 text-center",children:f?"Create Account":"Welcome Back"}),x&&h.jsxs("div",{className:"flex items-center gap-2 bg-red-500/10 border border-red-500/30 text-red-400 px-4 py-3 rounded-lg mb-4",children:[h.jsx(n8,{size:16}),h.jsx("span",{className:"text-sm",children:x})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[h.jsxs("button",{onClick:()=>U("google"),disabled:k!==null,className:"flex items-center justify-center gap-2 bg-white hover:bg-gray-100 text-gray-800 font-medium py-3 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[h.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[h.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),h.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),h.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),h.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),k==="google"?"...":"Google"]}),h.jsxs("button",{onClick:()=>U("github"),disabled:k!==null,className:"flex items-center justify-center gap-2 bg-[#24292e] hover:bg-[#2d3339] text-white font-medium py-3 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[h.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C6.477 2 2 6.477 2 12c0 4.42 2.865 8.17 6.839 9.49.5.092.682-.217.682-.482 0-.237-.008-.866-.013-1.7-2.782.604-3.369-1.34-3.369-1.34-.454-1.156-1.11-1.463-1.11-1.463-.908-.62.069-.608.069-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.087 2.91.831.092-.646.35-1.086.636-1.336-2.22-.253-4.555-1.11-4.555-4.943 0-1.091.39-1.984 1.029-2.683-.103-.253-.446-1.27.098-2.647 0 0 .84-.269 2.75 1.025A9.564 9.564 0 0112 6.844c.85.004 1.705.114 2.504.336 1.909-1.294 2.747-1.025 2.747-1.025.546 1.377.203 2.394.1 2.647.64.699 1.028 1.592 1.028 2.683 0 3.842-2.339 4.687-4.566 4.935.359.309.678.919.678 1.852 0 1.336-.012 2.415-.012 2.743 0 .267.18.578.688.48C19.138 20.167 22 16.418 22 12c0-5.523-4.477-10-10-10z"})}),k==="github"?"...":"GitHub"]}),h.jsxs("button",{onClick:()=>U("discord"),disabled:k!==null,className:"flex items-center justify-center gap-2 bg-[#5865F2] hover:bg-[#4752c4] text-white font-medium py-3 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[h.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{d:"M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028 14.09 14.09 0 0 0 1.226-1.994.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"})}),k==="discord"?"...":"Discord"]}),h.jsxs("button",{onClick:()=>R("ethereum"),disabled:k!==null,className:"flex items-center justify-center gap-2 bg-[#627EEA] hover:bg-[#5470d4] text-white font-medium py-3 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Sign in with Ethereum wallet (MetaMask, etc.)",children:[h.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:[h.jsx("path",{d:"M12 1.5l-9 15.5L12 22l9-5-9-15.5zM12 22v-5l9-5-9 10z",opacity:"0.6"}),h.jsx("path",{d:"M12 1.5v8l9 5.5-9-13.5zM12 1.5L3 17l9-7.5V1.5z"})]}),k==="ethereum"?"...":"ETH"]}),h.jsxs("button",{onClick:()=>R("solana"),disabled:k!==null,className:"flex items-center justify-center gap-2 bg-gradient-to-r from-[#9945FF] to-[#14F195] hover:opacity-90 text-white font-medium py-3 px-4 rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",title:"Sign in with Solana wallet (Phantom, etc.)",children:[h.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:h.jsx("path",{d:"M4.5 17.88l2.12-2.12a.75.75 0 01.53-.22H19.5a.75.75 0 01.53 1.28l-2.12 2.12a.75.75 0 01-.53.22H4.5a.75.75 0 01-.53-1.28h.03zM4.5 5.88A.75.75 0 015.03 4.6l2.12-2.12a.75.75 0 01.53-.22H19.5a.75.75 0 01.53 1.28L17.91 5.66a.75.75 0 01-.53.22H4.5zM19.5 11.88l-2.12-2.12a.75.75 0 00-.53-.22H4.5a.75.75 0 00-.53 1.28l2.12 2.12a.75.75 0 00.53.22H19.5a.75.75 0 00.53-1.28z"})}),k==="solana"?"...":"SOL"]})]}),h.jsxs("div",{className:"flex items-center gap-4 my-6",children:[h.jsx("div",{className:"flex-1 h-px bg-[#232328]"}),h.jsx("span",{className:"text-[#5a5b63] text-xs uppercase tracking-wider",children:"or continue with email"}),h.jsx("div",{className:"flex-1 h-px bg-[#232328]"})]}),h.jsxs("form",{onSubmit:$,className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-[#a0a1a8] text-sm mb-2",children:"Email"}),h.jsxs("div",{className:"relative",children:[h.jsx(BTe,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-[#5a5b63]"}),h.jsx("input",{type:"email",value:a,onChange:V=>l(V.target.value),placeholder:"you@example.com",required:!0,className:"w-full bg-[#0f1015] border border-[#232328] rounded-lg py-3 pl-10 pr-4 text-white placeholder-[#5a5b63] focus:outline-none focus:border-[#E7FE55] focus:ring-1 focus:ring-[#E7FE55]/20 transition-colors"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-[#a0a1a8] text-sm mb-2",children:"Password"}),h.jsxs("div",{className:"relative",children:[h.jsx(lm,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-[#5a5b63]"}),h.jsx("input",{type:g?"text":"password",value:c,onChange:V=>u(V.target.value),placeholder:"",required:!0,minLength:6,className:"w-full bg-[#0f1015] border border-[#232328] rounded-lg py-3 pl-10 pr-12 text-white placeholder-[#5a5b63] focus:outline-none focus:border-[#E7FE55] focus:ring-1 focus:ring-[#E7FE55]/20 transition-colors"}),h.jsx("button",{type:"button",onClick:()=>v(!g),className:"absolute right-3 top-1/2 -translate-y-1/2 text-[#5a5b63] hover:text-[#a0a1a8] transition-colors",children:g?h.jsx(t2,{size:16}):h.jsx(i8,{size:16})})]})]}),h.jsx("button",{type:"submit",disabled:E,className:"w-full bg-[#E7FE55] hover:bg-[#f0ff7a] text-black font-semibold py-3 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:E?"Loading...":f?"Create Account":"Sign In"})]}),h.jsxs("p",{className:"text-center text-[#747580] text-sm mt-6",children:[f?"Already have an account?":"Don't have an account?"," ",h.jsx("button",{onClick:()=>{m(!f),b(null)},className:"text-[#E7FE55] hover:underline font-medium",children:f?"Sign In":"Sign Up"})]})]}),h.jsxs("p",{className:"text-center text-[#5a5b63] text-xs mt-6",children:["By continuing, you agree to our"," ",h.jsx("a",{href:"/terms",target:"_blank",rel:"noopener noreferrer",className:"text-[#E7FE55] hover:underline",children:"Terms of Use"})," ","and"," ",h.jsx("a",{href:"/privacy",target:"_blank",rel:"noopener noreferrer",className:"text-[#E7FE55] hover:underline",children:"Privacy Policy"})]})]})})}function fmt({children:t}){const{user:e,loading:n}=A1();return n?h.jsx("div",{className:"h-screen w-screen bg-[#0f1015] flex items-center justify-center",children:h.jsxs("div",{className:"flex flex-col items-center gap-4",children:[h.jsxs("div",{className:"relative w-12 h-12",children:[h.jsx("div",{className:"absolute inset-0 border-2 border-[#232328] rounded-full"}),h.jsx("div",{className:"absolute inset-0 border-2 border-transparent border-t-[#E7FE55] rounded-full animate-spin"})]}),h.jsx("p",{className:"text-[#747580] text-sm",children:"Loading..."})]})}):e?h.jsx(h.Fragment,{children:t}):h.jsx(dmt,{})}ly.initializeProductionSecurity();const M0e=document.getElementById("root");if(!M0e)throw new Error("Failed to find the root element");const B3=fxe.createRoot(M0e),aee=window.location.pathname;aee==="/terms"?B3.render(h.jsx(pl.StrictMode,{children:h.jsx("div",{className:"min-h-screen bg-[#0f1015] text-[#e4e5e9]",children:h.jsx(O0e,{onBack:()=>window.location.href="/"})})})):aee==="/privacy"?B3.render(h.jsx(pl.StrictMode,{children:h.jsx("div",{className:"min-h-screen bg-[#0f1015] text-[#e4e5e9]",children:h.jsx(R0e,{onBack:()=>window.location.href="/"})})})):B3.render(h.jsx(pl.StrictMode,{children:h.jsx(awe,{children:h.jsx(fmt,{children:h.jsx(umt,{})})})}));export{Rm as $,FZ as A,on as B,jht as C,od as D,Lr as E,Hg as F,vke as G,KT as H,K4 as I,Mt as J,Xo as K,ve as L,J4 as M,Gie as N,T_e as O,bt as P,Ke as Q,P2e as R,MZ as S,Di as T,hIe as U,xc as V,ld as W,Ss as X,eIe as Y,yl as Z,Qn as _,Cx as a,rM as a$,os as a0,Cw as a1,S8 as a2,Wg as a3,Ux as a4,dIe as a5,Qie as a6,Pr as a7,Et as a8,Qt as a9,V_e as aA,WT as aB,fm as aC,mc as aD,x2 as aE,Pw as aF,Zb as aG,WH as aH,uR as aI,D1 as aJ,g_e as aK,A2e as aL,dx as aM,O_e as aN,g2 as aO,ls as aP,nx as aQ,Ws as aR,Tc as aS,em as aT,y_e as aU,jie as aV,_w as aW,Is as aX,um as aY,Fie as aZ,Nke as a_,O8 as aa,fIe as ab,gr as ac,yIe as ad,vIe as ae,pm as af,nk as ag,v_e as ah,Vu as ai,S_e as aj,E_e as ak,_8 as al,$ie as am,v2 as an,tk as ao,x_e as ap,uo as aq,kmt as ar,pc as as,N8 as at,Lne as au,Au as av,XH as aw,nV as ax,Mke as ay,Xf as az,zht as b,Qf as b0,xIe as b1,ww as b2,bH as b3,Ine as b4,Pne as b5,ph as b6,tie as b7,bmt as b8,M1 as b9,Sie as bA,cd as bB,_mt as bC,Xre as bD,i2 as bE,l8 as bF,hV as bG,dV as bH,Pmt as bI,yp as bJ,q4 as bK,vmt as bL,$ke as bM,u2 as bN,Bi as bO,gmt as bP,ad as bQ,P1 as bR,bke as bS,ymt as bT,zke as bU,Imt as bV,Rmt as bW,Omt as bX,_ne as bY,Nw as ba,mr as bb,Ske as bc,Ake as bd,R1 as be,pV as bf,FIe as bg,UIe as bh,yR as bi,WNe as bj,Dne as bk,Tke as bl,Ac as bm,cse as bn,lse as bo,KNe as bp,xmt as bq,Gne as br,qT as bs,Mmt as bt,as as bu,Nmt as bv,Cmt as bw,Dmt as bx,s2 as by,nie as bz,gZ as c,gut as d,c0t as e,La as f,us as g,Nme as h,Mx as i,mh as j,Kn as k,Dx as l,jx as m,za as n,y8 as o,YZ as p,xe as q,Ju as r,Lx as s,rt as t,zme as u,On as v,pt as w,pi as x,yn as y,Mne as z};
