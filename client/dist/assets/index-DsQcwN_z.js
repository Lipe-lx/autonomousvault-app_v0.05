var Cye=Object.defineProperty;var B9=t=>{throw TypeError(t)};var Nye=(t,e,n)=>e in t?Cye(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Se=(t,e,n)=>Nye(t,typeof e!="symbol"?e+"":e,n),nP=(t,e,n)=>e.has(t)||B9("Cannot "+n);var ie=(t,e,n)=>(nP(t,e,"read from private field"),n?n.call(t):e.get(t)),je=(t,e,n)=>e.has(t)?B9("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),ge=(t,e,n,r)=>(nP(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),tt=(t,e,n)=>(nP(t,e,"access private method"),n);var Gv=(t,e,n,r)=>({set _(i){ge(t,e,i,n)},get _(){return ie(t,e,r)}});function _ye(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var oL={},DC={};DC.byteLength=Rye;DC.toByteArray=Mye;DC.fromByteArray=Bye;var cc=[],Sa=[],Iye=typeof Uint8Array<"u"?Uint8Array:Array,rP="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var S0=0,Pye=rP.length;S0<Pye;++S0)cc[S0]=rP[S0],Sa[rP.charCodeAt(S0)]=S0;Sa[45]=62;Sa[95]=63;function GZ(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function Rye(t){var e=GZ(t),n=e[0],r=e[1];return(n+r)*3/4-r}function Oye(t,e,n){return(e+n)*3/4-n}function Mye(t){var e,n=GZ(t),r=n[0],i=n[1],s=new Iye(Oye(t,r,i)),o=0,a=i>0?r-4:r,l;for(l=0;l<a;l+=4)e=Sa[t.charCodeAt(l)]<<18|Sa[t.charCodeAt(l+1)]<<12|Sa[t.charCodeAt(l+2)]<<6|Sa[t.charCodeAt(l+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=Sa[t.charCodeAt(l)]<<2|Sa[t.charCodeAt(l+1)]>>4,s[o++]=e&255),i===1&&(e=Sa[t.charCodeAt(l)]<<10|Sa[t.charCodeAt(l+1)]<<4|Sa[t.charCodeAt(l+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function Dye(t){return cc[t>>18&63]+cc[t>>12&63]+cc[t>>6&63]+cc[t&63]}function Lye(t,e,n){for(var r,i=[],s=e;s<n;s+=3)r=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),i.push(Dye(r));return i.join("")}function Bye(t){for(var e,n=t.length,r=n%3,i=[],s=16383,o=0,a=n-r;o<a;o+=s)i.push(Lye(t,o,o+s>a?a:o+s));return r===1?(e=t[n-1],i.push(cc[e>>2]+cc[e<<4&63]+"==")):r===2&&(e=(t[n-2]<<8)+t[n-1],i.push(cc[e>>10]+cc[e>>4&63]+cc[e<<2&63]+"=")),i.join("")}var aL={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */aL.read=function(t,e,n,r,i){var s,o,a=i*8-r-1,l=(1<<a)-1,c=l>>1,u=-7,f=n?i-1:0,m=n?-1:1,g=t[e+f];for(f+=m,s=g&(1<<-u)-1,g>>=-u,u+=a;u>0;s=s*256+t[e+f],f+=m,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=r;u>0;o=o*256+t[e+f],f+=m,u-=8);if(s===0)s=1-c;else{if(s===l)return o?NaN:(g?-1:1)*(1/0);o=o+Math.pow(2,r),s=s-c}return(g?-1:1)*o*Math.pow(2,s-r)};aL.write=function(t,e,n,r,i,s){var o,a,l,c=s*8-i-1,u=(1<<c)-1,f=u>>1,m=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=r?0:s-1,x=r?1:-1,v=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+f>=1?e+=m/l:e+=m*Math.pow(2,1-f),e*l>=2&&(o++,l/=2),o+f>=u?(a=0,o=u):o+f>=1?(a=(e*l-1)*Math.pow(2,i),o=o+f):(a=e*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;t[n+g]=a&255,g+=x,a/=256,i-=8);for(o=o<<i|a,c+=i;c>0;t[n+g]=o&255,g+=x,o/=256,c-=8);t[n+g-x]|=v*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=DC,n=aL,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=u,t.SlowBuffer=j,t.INSPECT_MAX_BYTES=50;const i=2147483647;t.kMaxLength=i;const{Uint8Array:s,ArrayBuffer:o,SharedArrayBuffer:a}=globalThis;u.TYPED_ARRAY_SUPPORT=l(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{const se=new s(1),J={foo:function(){return 42}};return Object.setPrototypeOf(J,s.prototype),Object.setPrototypeOf(se,J),se.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function c(se){if(se>i)throw new RangeError('The value "'+se+'" is invalid for option "size"');const J=new s(se);return Object.setPrototypeOf(J,u.prototype),J}function u(se,J,Z){if(typeof se=="number"){if(typeof J=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return x(se)}return f(se,J,Z)}u.poolSize=8192;function f(se,J,Z){if(typeof se=="string")return v(se,J);if(o.isView(se))return E(se);if(se==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof se);if(un(se,o)||se&&un(se.buffer,o)||typeof a<"u"&&(un(se,a)||se&&un(se.buffer,a)))return C(se,J,Z);if(typeof se=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const fe=se.valueOf&&se.valueOf();if(fe!=null&&fe!==se)return u.from(fe,J,Z);const be=k(se);if(be)return be;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof se[Symbol.toPrimitive]=="function")return u.from(se[Symbol.toPrimitive]("string"),J,Z);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof se)}u.from=function(se,J,Z){return f(se,J,Z)},Object.setPrototypeOf(u.prototype,s.prototype),Object.setPrototypeOf(u,s);function m(se){if(typeof se!="number")throw new TypeError('"size" argument must be of type number');if(se<0)throw new RangeError('The value "'+se+'" is invalid for option "size"')}function g(se,J,Z){return m(se),se<=0?c(se):J!==void 0?typeof Z=="string"?c(se).fill(J,Z):c(se).fill(J):c(se)}u.alloc=function(se,J,Z){return g(se,J,Z)};function x(se){return m(se),c(se<0?0:O(se)|0)}u.allocUnsafe=function(se){return x(se)},u.allocUnsafeSlow=function(se){return x(se)};function v(se,J){if((typeof J!="string"||J==="")&&(J="utf8"),!u.isEncoding(J))throw new TypeError("Unknown encoding: "+J);const Z=R(se,J)|0;let fe=c(Z);const be=fe.write(se,J);return be!==Z&&(fe=fe.slice(0,be)),fe}function w(se){const J=se.length<0?0:O(se.length)|0,Z=c(J);for(let fe=0;fe<J;fe+=1)Z[fe]=se[fe]&255;return Z}function E(se){if(un(se,s)){const J=new s(se);return C(J.buffer,J.byteOffset,J.byteLength)}return w(se)}function C(se,J,Z){if(J<0||se.byteLength<J)throw new RangeError('"offset" is outside of buffer bounds');if(se.byteLength<J+(Z||0))throw new RangeError('"length" is outside of buffer bounds');let fe;return J===void 0&&Z===void 0?fe=new s(se):Z===void 0?fe=new s(se,J):fe=new s(se,J,Z),Object.setPrototypeOf(fe,u.prototype),fe}function k(se){if(u.isBuffer(se)){const J=O(se.length)|0,Z=c(J);return Z.length===0||se.copy(Z,0,0,J),Z}if(se.length!==void 0)return typeof se.length!="number"||Pe(se.length)?c(0):w(se);if(se.type==="Buffer"&&Array.isArray(se.data))return w(se.data)}function O(se){if(se>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return se|0}function j(se){return+se!=se&&(se=0),u.alloc(+se)}u.isBuffer=function(J){return J!=null&&J._isBuffer===!0&&J!==u.prototype},u.compare=function(J,Z){if(un(J,s)&&(J=u.from(J,J.offset,J.byteLength)),un(Z,s)&&(Z=u.from(Z,Z.offset,Z.byteLength)),!u.isBuffer(J)||!u.isBuffer(Z))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(J===Z)return 0;let fe=J.length,be=Z.length;for(let he=0,ye=Math.min(fe,be);he<ye;++he)if(J[he]!==Z[he]){fe=J[he],be=Z[he];break}return fe<be?-1:be<fe?1:0},u.isEncoding=function(J){switch(String(J).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(J,Z){if(!Array.isArray(J))throw new TypeError('"list" argument must be an Array of Buffers');if(J.length===0)return u.alloc(0);let fe;if(Z===void 0)for(Z=0,fe=0;fe<J.length;++fe)Z+=J[fe].length;const be=u.allocUnsafe(Z);let he=0;for(fe=0;fe<J.length;++fe){let ye=J[fe];if(un(ye,s))he+ye.length>be.length?(u.isBuffer(ye)||(ye=u.from(ye)),ye.copy(be,he)):s.prototype.set.call(be,ye,he);else if(u.isBuffer(ye))ye.copy(be,he);else throw new TypeError('"list" argument must be an Array of Buffers');he+=ye.length}return be};function R(se,J){if(u.isBuffer(se))return se.length;if(o.isView(se)||un(se,o))return se.byteLength;if(typeof se!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof se);const Z=se.length,fe=arguments.length>2&&arguments[2]===!0;if(!fe&&Z===0)return 0;let be=!1;for(;;)switch(J){case"ascii":case"latin1":case"binary":return Z;case"utf8":case"utf-8":return st(se).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Z*2;case"hex":return Z>>>1;case"base64":return Ge(se).length;default:if(be)return fe?-1:st(se).length;J=(""+J).toLowerCase(),be=!0}}u.byteLength=R;function U(se,J,Z){let fe=!1;if((J===void 0||J<0)&&(J=0),J>this.length||((Z===void 0||Z>this.length)&&(Z=this.length),Z<=0)||(Z>>>=0,J>>>=0,Z<=J))return"";for(se||(se="utf8");;)switch(se){case"hex":return D(this,J,Z);case"utf8":case"utf-8":return z(this,J,Z);case"ascii":return Y(this,J,Z);case"latin1":case"binary":return q(this,J,Z);case"base64":return M(this,J,Z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,J,Z);default:if(fe)throw new TypeError("Unknown encoding: "+se);se=(se+"").toLowerCase(),fe=!0}}u.prototype._isBuffer=!0;function V(se,J,Z){const fe=se[J];se[J]=se[Z],se[Z]=fe}u.prototype.swap16=function(){const J=this.length;if(J%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let Z=0;Z<J;Z+=2)V(this,Z,Z+1);return this},u.prototype.swap32=function(){const J=this.length;if(J%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let Z=0;Z<J;Z+=4)V(this,Z,Z+3),V(this,Z+1,Z+2);return this},u.prototype.swap64=function(){const J=this.length;if(J%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let Z=0;Z<J;Z+=8)V(this,Z,Z+7),V(this,Z+1,Z+6),V(this,Z+2,Z+5),V(this,Z+3,Z+4);return this},u.prototype.toString=function(){const J=this.length;return J===0?"":arguments.length===0?z(this,0,J):U.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(J){if(!u.isBuffer(J))throw new TypeError("Argument must be a Buffer");return this===J?!0:u.compare(this,J)===0},u.prototype.inspect=function(){let J="";const Z=t.INSPECT_MAX_BYTES;return J=this.toString("hex",0,Z).replace(/(.{2})/g,"$1 ").trim(),this.length>Z&&(J+=" ... "),"<Buffer "+J+">"},r&&(u.prototype[r]=u.prototype.inspect),u.prototype.compare=function(J,Z,fe,be,he){if(un(J,s)&&(J=u.from(J,J.offset,J.byteLength)),!u.isBuffer(J))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof J);if(Z===void 0&&(Z=0),fe===void 0&&(fe=J?J.length:0),be===void 0&&(be=0),he===void 0&&(he=this.length),Z<0||fe>J.length||be<0||he>this.length)throw new RangeError("out of range index");if(be>=he&&Z>=fe)return 0;if(be>=he)return-1;if(Z>=fe)return 1;if(Z>>>=0,fe>>>=0,be>>>=0,he>>>=0,this===J)return 0;let ye=he-be,Xe=fe-Z;const et=Math.min(ye,Xe),it=this.slice(be,he),Ft=J.slice(Z,fe);for(let xt=0;xt<et;++xt)if(it[xt]!==Ft[xt]){ye=it[xt],Xe=Ft[xt];break}return ye<Xe?-1:Xe<ye?1:0};function F(se,J,Z,fe,be){if(se.length===0)return-1;if(typeof Z=="string"?(fe=Z,Z=0):Z>2147483647?Z=2147483647:Z<-2147483648&&(Z=-2147483648),Z=+Z,Pe(Z)&&(Z=be?0:se.length-1),Z<0&&(Z=se.length+Z),Z>=se.length){if(be)return-1;Z=se.length-1}else if(Z<0)if(be)Z=0;else return-1;if(typeof J=="string"&&(J=u.from(J,fe)),u.isBuffer(J))return J.length===0?-1:$(se,J,Z,fe,be);if(typeof J=="number")return J=J&255,typeof s.prototype.indexOf=="function"?be?s.prototype.indexOf.call(se,J,Z):s.prototype.lastIndexOf.call(se,J,Z):$(se,[J],Z,fe,be);throw new TypeError("val must be string, number or Buffer")}function $(se,J,Z,fe,be){let he=1,ye=se.length,Xe=J.length;if(fe!==void 0&&(fe=String(fe).toLowerCase(),fe==="ucs2"||fe==="ucs-2"||fe==="utf16le"||fe==="utf-16le")){if(se.length<2||J.length<2)return-1;he=2,ye/=2,Xe/=2,Z/=2}function et(Ft,xt){return he===1?Ft[xt]:Ft.readUInt16BE(xt*he)}let it;if(be){let Ft=-1;for(it=Z;it<ye;it++)if(et(se,it)===et(J,Ft===-1?0:it-Ft)){if(Ft===-1&&(Ft=it),it-Ft+1===Xe)return Ft*he}else Ft!==-1&&(it-=it-Ft),Ft=-1}else for(Z+Xe>ye&&(Z=ye-Xe),it=Z;it>=0;it--){let Ft=!0;for(let xt=0;xt<Xe;xt++)if(et(se,it+xt)!==et(J,xt)){Ft=!1;break}if(Ft)return it}return-1}u.prototype.includes=function(J,Z,fe){return this.indexOf(J,Z,fe)!==-1},u.prototype.indexOf=function(J,Z,fe){return F(this,J,Z,fe,!0)},u.prototype.lastIndexOf=function(J,Z,fe){return F(this,J,Z,fe,!1)};function K(se,J,Z,fe){Z=Number(Z)||0;const be=se.length-Z;fe?(fe=Number(fe),fe>be&&(fe=be)):fe=be;const he=J.length;fe>he/2&&(fe=he/2);let ye;for(ye=0;ye<fe;++ye){const Xe=parseInt(J.substr(ye*2,2),16);if(Pe(Xe))return ye;se[Z+ye]=Xe}return ye}function H(se,J,Z,fe){return At(st(J,se.length-Z),se,Z,fe)}function B(se,J,Z,fe){return At(Bt(J),se,Z,fe)}function A(se,J,Z,fe){return At(Ge(J),se,Z,fe)}function I(se,J,Z,fe){return At(Zt(J,se.length-Z),se,Z,fe)}u.prototype.write=function(J,Z,fe,be){if(Z===void 0)be="utf8",fe=this.length,Z=0;else if(fe===void 0&&typeof Z=="string")be=Z,fe=this.length,Z=0;else if(isFinite(Z))Z=Z>>>0,isFinite(fe)?(fe=fe>>>0,be===void 0&&(be="utf8")):(be=fe,fe=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const he=this.length-Z;if((fe===void 0||fe>he)&&(fe=he),J.length>0&&(fe<0||Z<0)||Z>this.length)throw new RangeError("Attempt to write outside buffer bounds");be||(be="utf8");let ye=!1;for(;;)switch(be){case"hex":return K(this,J,Z,fe);case"utf8":case"utf-8":return H(this,J,Z,fe);case"ascii":case"latin1":case"binary":return B(this,J,Z,fe);case"base64":return A(this,J,Z,fe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,J,Z,fe);default:if(ye)throw new TypeError("Unknown encoding: "+be);be=(""+be).toLowerCase(),ye=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function M(se,J,Z){return J===0&&Z===se.length?e.fromByteArray(se):e.fromByteArray(se.slice(J,Z))}function z(se,J,Z){Z=Math.min(se.length,Z);const fe=[];let be=J;for(;be<Z;){const he=se[be];let ye=null,Xe=he>239?4:he>223?3:he>191?2:1;if(be+Xe<=Z){let et,it,Ft,xt;switch(Xe){case 1:he<128&&(ye=he);break;case 2:et=se[be+1],(et&192)===128&&(xt=(he&31)<<6|et&63,xt>127&&(ye=xt));break;case 3:et=se[be+1],it=se[be+2],(et&192)===128&&(it&192)===128&&(xt=(he&15)<<12|(et&63)<<6|it&63,xt>2047&&(xt<55296||xt>57343)&&(ye=xt));break;case 4:et=se[be+1],it=se[be+2],Ft=se[be+3],(et&192)===128&&(it&192)===128&&(Ft&192)===128&&(xt=(he&15)<<18|(et&63)<<12|(it&63)<<6|Ft&63,xt>65535&&xt<1114112&&(ye=xt))}}ye===null?(ye=65533,Xe=1):ye>65535&&(ye-=65536,fe.push(ye>>>10&1023|55296),ye=56320|ye&1023),fe.push(ye),be+=Xe}return te(fe)}const G=4096;function te(se){const J=se.length;if(J<=G)return String.fromCharCode.apply(String,se);let Z="",fe=0;for(;fe<J;)Z+=String.fromCharCode.apply(String,se.slice(fe,fe+=G));return Z}function Y(se,J,Z){let fe="";Z=Math.min(se.length,Z);for(let be=J;be<Z;++be)fe+=String.fromCharCode(se[be]&127);return fe}function q(se,J,Z){let fe="";Z=Math.min(se.length,Z);for(let be=J;be<Z;++be)fe+=String.fromCharCode(se[be]);return fe}function D(se,J,Z){const fe=se.length;(!J||J<0)&&(J=0),(!Z||Z<0||Z>fe)&&(Z=fe);let be="";for(let he=J;he<Z;++he)be+=Ve[se[he]];return be}function _(se,J,Z){const fe=se.slice(J,Z);let be="";for(let he=0;he<fe.length-1;he+=2)be+=String.fromCharCode(fe[he]+fe[he+1]*256);return be}u.prototype.slice=function(J,Z){const fe=this.length;J=~~J,Z=Z===void 0?fe:~~Z,J<0?(J+=fe,J<0&&(J=0)):J>fe&&(J=fe),Z<0?(Z+=fe,Z<0&&(Z=0)):Z>fe&&(Z=fe),Z<J&&(Z=J);const be=this.subarray(J,Z);return Object.setPrototypeOf(be,u.prototype),be};function W(se,J,Z){if(se%1!==0||se<0)throw new RangeError("offset is not uint");if(se+J>Z)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(J,Z,fe){J=J>>>0,Z=Z>>>0,fe||W(J,Z,this.length);let be=this[J],he=1,ye=0;for(;++ye<Z&&(he*=256);)be+=this[J+ye]*he;return be},u.prototype.readUintBE=u.prototype.readUIntBE=function(J,Z,fe){J=J>>>0,Z=Z>>>0,fe||W(J,Z,this.length);let be=this[J+--Z],he=1;for(;Z>0&&(he*=256);)be+=this[J+--Z]*he;return be},u.prototype.readUint8=u.prototype.readUInt8=function(J,Z){return J=J>>>0,Z||W(J,1,this.length),this[J]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(J,Z){return J=J>>>0,Z||W(J,2,this.length),this[J]|this[J+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(J,Z){return J=J>>>0,Z||W(J,2,this.length),this[J]<<8|this[J+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(J,Z){return J=J>>>0,Z||W(J,4,this.length),(this[J]|this[J+1]<<8|this[J+2]<<16)+this[J+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(J,Z){return J=J>>>0,Z||W(J,4,this.length),this[J]*16777216+(this[J+1]<<16|this[J+2]<<8|this[J+3])},u.prototype.readBigUInt64LE=ft(function(J){J=J>>>0,Ze(J,"offset");const Z=this[J],fe=this[J+7];(Z===void 0||fe===void 0)&&Ye(J,this.length-8);const be=Z+this[++J]*2**8+this[++J]*2**16+this[++J]*2**24,he=this[++J]+this[++J]*2**8+this[++J]*2**16+fe*2**24;return BigInt(be)+(BigInt(he)<<BigInt(32))}),u.prototype.readBigUInt64BE=ft(function(J){J=J>>>0,Ze(J,"offset");const Z=this[J],fe=this[J+7];(Z===void 0||fe===void 0)&&Ye(J,this.length-8);const be=Z*2**24+this[++J]*2**16+this[++J]*2**8+this[++J],he=this[++J]*2**24+this[++J]*2**16+this[++J]*2**8+fe;return(BigInt(be)<<BigInt(32))+BigInt(he)}),u.prototype.readIntLE=function(J,Z,fe){J=J>>>0,Z=Z>>>0,fe||W(J,Z,this.length);let be=this[J],he=1,ye=0;for(;++ye<Z&&(he*=256);)be+=this[J+ye]*he;return he*=128,be>=he&&(be-=Math.pow(2,8*Z)),be},u.prototype.readIntBE=function(J,Z,fe){J=J>>>0,Z=Z>>>0,fe||W(J,Z,this.length);let be=Z,he=1,ye=this[J+--be];for(;be>0&&(he*=256);)ye+=this[J+--be]*he;return he*=128,ye>=he&&(ye-=Math.pow(2,8*Z)),ye},u.prototype.readInt8=function(J,Z){return J=J>>>0,Z||W(J,1,this.length),this[J]&128?(255-this[J]+1)*-1:this[J]},u.prototype.readInt16LE=function(J,Z){J=J>>>0,Z||W(J,2,this.length);const fe=this[J]|this[J+1]<<8;return fe&32768?fe|4294901760:fe},u.prototype.readInt16BE=function(J,Z){J=J>>>0,Z||W(J,2,this.length);const fe=this[J+1]|this[J]<<8;return fe&32768?fe|4294901760:fe},u.prototype.readInt32LE=function(J,Z){return J=J>>>0,Z||W(J,4,this.length),this[J]|this[J+1]<<8|this[J+2]<<16|this[J+3]<<24},u.prototype.readInt32BE=function(J,Z){return J=J>>>0,Z||W(J,4,this.length),this[J]<<24|this[J+1]<<16|this[J+2]<<8|this[J+3]},u.prototype.readBigInt64LE=ft(function(J){J=J>>>0,Ze(J,"offset");const Z=this[J],fe=this[J+7];(Z===void 0||fe===void 0)&&Ye(J,this.length-8);const be=this[J+4]+this[J+5]*2**8+this[J+6]*2**16+(fe<<24);return(BigInt(be)<<BigInt(32))+BigInt(Z+this[++J]*2**8+this[++J]*2**16+this[++J]*2**24)}),u.prototype.readBigInt64BE=ft(function(J){J=J>>>0,Ze(J,"offset");const Z=this[J],fe=this[J+7];(Z===void 0||fe===void 0)&&Ye(J,this.length-8);const be=(Z<<24)+this[++J]*2**16+this[++J]*2**8+this[++J];return(BigInt(be)<<BigInt(32))+BigInt(this[++J]*2**24+this[++J]*2**16+this[++J]*2**8+fe)}),u.prototype.readFloatLE=function(J,Z){return J=J>>>0,Z||W(J,4,this.length),n.read(this,J,!0,23,4)},u.prototype.readFloatBE=function(J,Z){return J=J>>>0,Z||W(J,4,this.length),n.read(this,J,!1,23,4)},u.prototype.readDoubleLE=function(J,Z){return J=J>>>0,Z||W(J,8,this.length),n.read(this,J,!0,52,8)},u.prototype.readDoubleBE=function(J,Z){return J=J>>>0,Z||W(J,8,this.length),n.read(this,J,!1,52,8)};function X(se,J,Z,fe,be,he){if(!u.isBuffer(se))throw new TypeError('"buffer" argument must be a Buffer instance');if(J>be||J<he)throw new RangeError('"value" argument is out of bounds');if(Z+fe>se.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(J,Z,fe,be){if(J=+J,Z=Z>>>0,fe=fe>>>0,!be){const Xe=Math.pow(2,8*fe)-1;X(this,J,Z,fe,Xe,0)}let he=1,ye=0;for(this[Z]=J&255;++ye<fe&&(he*=256);)this[Z+ye]=J/he&255;return Z+fe},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(J,Z,fe,be){if(J=+J,Z=Z>>>0,fe=fe>>>0,!be){const Xe=Math.pow(2,8*fe)-1;X(this,J,Z,fe,Xe,0)}let he=fe-1,ye=1;for(this[Z+he]=J&255;--he>=0&&(ye*=256);)this[Z+he]=J/ye&255;return Z+fe},u.prototype.writeUint8=u.prototype.writeUInt8=function(J,Z,fe){return J=+J,Z=Z>>>0,fe||X(this,J,Z,1,255,0),this[Z]=J&255,Z+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(J,Z,fe){return J=+J,Z=Z>>>0,fe||X(this,J,Z,2,65535,0),this[Z]=J&255,this[Z+1]=J>>>8,Z+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(J,Z,fe){return J=+J,Z=Z>>>0,fe||X(this,J,Z,2,65535,0),this[Z]=J>>>8,this[Z+1]=J&255,Z+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(J,Z,fe){return J=+J,Z=Z>>>0,fe||X(this,J,Z,4,4294967295,0),this[Z+3]=J>>>24,this[Z+2]=J>>>16,this[Z+1]=J>>>8,this[Z]=J&255,Z+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(J,Z,fe){return J=+J,Z=Z>>>0,fe||X(this,J,Z,4,4294967295,0),this[Z]=J>>>24,this[Z+1]=J>>>16,this[Z+2]=J>>>8,this[Z+3]=J&255,Z+4};function re(se,J,Z,fe,be){ze(J,fe,be,se,Z,7);let he=Number(J&BigInt(4294967295));se[Z++]=he,he=he>>8,se[Z++]=he,he=he>>8,se[Z++]=he,he=he>>8,se[Z++]=he;let ye=Number(J>>BigInt(32)&BigInt(4294967295));return se[Z++]=ye,ye=ye>>8,se[Z++]=ye,ye=ye>>8,se[Z++]=ye,ye=ye>>8,se[Z++]=ye,Z}function ae(se,J,Z,fe,be){ze(J,fe,be,se,Z,7);let he=Number(J&BigInt(4294967295));se[Z+7]=he,he=he>>8,se[Z+6]=he,he=he>>8,se[Z+5]=he,he=he>>8,se[Z+4]=he;let ye=Number(J>>BigInt(32)&BigInt(4294967295));return se[Z+3]=ye,ye=ye>>8,se[Z+2]=ye,ye=ye>>8,se[Z+1]=ye,ye=ye>>8,se[Z]=ye,Z+8}u.prototype.writeBigUInt64LE=ft(function(J,Z=0){return re(this,J,Z,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=ft(function(J,Z=0){return ae(this,J,Z,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(J,Z,fe,be){if(J=+J,Z=Z>>>0,!be){const et=Math.pow(2,8*fe-1);X(this,J,Z,fe,et-1,-et)}let he=0,ye=1,Xe=0;for(this[Z]=J&255;++he<fe&&(ye*=256);)J<0&&Xe===0&&this[Z+he-1]!==0&&(Xe=1),this[Z+he]=(J/ye>>0)-Xe&255;return Z+fe},u.prototype.writeIntBE=function(J,Z,fe,be){if(J=+J,Z=Z>>>0,!be){const et=Math.pow(2,8*fe-1);X(this,J,Z,fe,et-1,-et)}let he=fe-1,ye=1,Xe=0;for(this[Z+he]=J&255;--he>=0&&(ye*=256);)J<0&&Xe===0&&this[Z+he+1]!==0&&(Xe=1),this[Z+he]=(J/ye>>0)-Xe&255;return Z+fe},u.prototype.writeInt8=function(J,Z,fe){return J=+J,Z=Z>>>0,fe||X(this,J,Z,1,127,-128),J<0&&(J=255+J+1),this[Z]=J&255,Z+1},u.prototype.writeInt16LE=function(J,Z,fe){return J=+J,Z=Z>>>0,fe||X(this,J,Z,2,32767,-32768),this[Z]=J&255,this[Z+1]=J>>>8,Z+2},u.prototype.writeInt16BE=function(J,Z,fe){return J=+J,Z=Z>>>0,fe||X(this,J,Z,2,32767,-32768),this[Z]=J>>>8,this[Z+1]=J&255,Z+2},u.prototype.writeInt32LE=function(J,Z,fe){return J=+J,Z=Z>>>0,fe||X(this,J,Z,4,2147483647,-2147483648),this[Z]=J&255,this[Z+1]=J>>>8,this[Z+2]=J>>>16,this[Z+3]=J>>>24,Z+4},u.prototype.writeInt32BE=function(J,Z,fe){return J=+J,Z=Z>>>0,fe||X(this,J,Z,4,2147483647,-2147483648),J<0&&(J=4294967295+J+1),this[Z]=J>>>24,this[Z+1]=J>>>16,this[Z+2]=J>>>8,this[Z+3]=J&255,Z+4},u.prototype.writeBigInt64LE=ft(function(J,Z=0){return re(this,J,Z,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=ft(function(J,Z=0){return ae(this,J,Z,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ee(se,J,Z,fe,be,he){if(Z+fe>se.length)throw new RangeError("Index out of range");if(Z<0)throw new RangeError("Index out of range")}function ue(se,J,Z,fe,be){return J=+J,Z=Z>>>0,be||Ee(se,J,Z,4),n.write(se,J,Z,fe,23,4),Z+4}u.prototype.writeFloatLE=function(J,Z,fe){return ue(this,J,Z,!0,fe)},u.prototype.writeFloatBE=function(J,Z,fe){return ue(this,J,Z,!1,fe)};function me(se,J,Z,fe,be){return J=+J,Z=Z>>>0,be||Ee(se,J,Z,8),n.write(se,J,Z,fe,52,8),Z+8}u.prototype.writeDoubleLE=function(J,Z,fe){return me(this,J,Z,!0,fe)},u.prototype.writeDoubleBE=function(J,Z,fe){return me(this,J,Z,!1,fe)},u.prototype.copy=function(J,Z,fe,be){if(!u.isBuffer(J))throw new TypeError("argument should be a Buffer");if(fe||(fe=0),!be&&be!==0&&(be=this.length),Z>=J.length&&(Z=J.length),Z||(Z=0),be>0&&be<fe&&(be=fe),be===fe||J.length===0||this.length===0)return 0;if(Z<0)throw new RangeError("targetStart out of bounds");if(fe<0||fe>=this.length)throw new RangeError("Index out of range");if(be<0)throw new RangeError("sourceEnd out of bounds");be>this.length&&(be=this.length),J.length-Z<be-fe&&(be=J.length-Z+fe);const he=be-fe;return this===J&&typeof s.prototype.copyWithin=="function"?this.copyWithin(Z,fe,be):s.prototype.set.call(J,this.subarray(fe,be),Z),he},u.prototype.fill=function(J,Z,fe,be){if(typeof J=="string"){if(typeof Z=="string"?(be=Z,Z=0,fe=this.length):typeof fe=="string"&&(be=fe,fe=this.length),be!==void 0&&typeof be!="string")throw new TypeError("encoding must be a string");if(typeof be=="string"&&!u.isEncoding(be))throw new TypeError("Unknown encoding: "+be);if(J.length===1){const ye=J.charCodeAt(0);(be==="utf8"&&ye<128||be==="latin1")&&(J=ye)}}else typeof J=="number"?J=J&255:typeof J=="boolean"&&(J=Number(J));if(Z<0||this.length<Z||this.length<fe)throw new RangeError("Out of range index");if(fe<=Z)return this;Z=Z>>>0,fe=fe===void 0?this.length:fe>>>0,J||(J=0);let he;if(typeof J=="number")for(he=Z;he<fe;++he)this[he]=J;else{const ye=u.isBuffer(J)?J:u.from(J,be),Xe=ye.length;if(Xe===0)throw new TypeError('The value "'+J+'" is invalid for argument "value"');for(he=0;he<fe-Z;++he)this[he+Z]=ye[he%Xe]}return this};const ce={};function oe(se,J,Z){ce[se]=class extends Z{constructor(){super(),Object.defineProperty(this,"message",{value:J.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${se}]`,this.stack,delete this.name}get code(){return se}set code(be){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:be,writable:!0})}toString(){return`${this.name} [${se}]: ${this.message}`}}}oe("ERR_BUFFER_OUT_OF_BOUNDS",function(se){return se?`${se} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),oe("ERR_INVALID_ARG_TYPE",function(se,J){return`The "${se}" argument must be of type number. Received type ${typeof J}`},TypeError),oe("ERR_OUT_OF_RANGE",function(se,J,Z){let fe=`The value of "${se}" is out of range.`,be=Z;return Number.isInteger(Z)&&Math.abs(Z)>2**32?be=ke(String(Z)):typeof Z=="bigint"&&(be=String(Z),(Z>BigInt(2)**BigInt(32)||Z<-(BigInt(2)**BigInt(32)))&&(be=ke(be)),be+="n"),fe+=` It must be ${J}. Received ${be}`,fe},RangeError);function ke(se){let J="",Z=se.length;const fe=se[0]==="-"?1:0;for(;Z>=fe+4;Z-=3)J=`_${se.slice(Z-3,Z)}${J}`;return`${se.slice(0,Z)}${J}`}function Ne(se,J,Z){Ze(J,"offset"),(se[J]===void 0||se[J+Z]===void 0)&&Ye(J,se.length-(Z+1))}function ze(se,J,Z,fe,be,he){if(se>Z||se<J){const ye=typeof J=="bigint"?"n":"";let Xe;throw J===0||J===BigInt(0)?Xe=`>= 0${ye} and < 2${ye} ** ${(he+1)*8}${ye}`:Xe=`>= -(2${ye} ** ${(he+1)*8-1}${ye}) and < 2 ** ${(he+1)*8-1}${ye}`,new ce.ERR_OUT_OF_RANGE("value",Xe,se)}Ne(fe,be,he)}function Ze(se,J){if(typeof se!="number")throw new ce.ERR_INVALID_ARG_TYPE(J,"number",se)}function Ye(se,J,Z){throw Math.floor(se)!==se?(Ze(se,Z),new ce.ERR_OUT_OF_RANGE("offset","an integer",se)):J<0?new ce.ERR_BUFFER_OUT_OF_BOUNDS:new ce.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${J}`,se)}const We=/[^+/0-9A-Za-z-_]/g;function St(se){if(se=se.split("=")[0],se=se.trim().replace(We,""),se.length<2)return"";for(;se.length%4!==0;)se=se+"=";return se}function st(se,J){J=J||1/0;let Z;const fe=se.length;let be=null;const he=[];for(let ye=0;ye<fe;++ye){if(Z=se.charCodeAt(ye),Z>55295&&Z<57344){if(!be){if(Z>56319){(J-=3)>-1&&he.push(239,191,189);continue}else if(ye+1===fe){(J-=3)>-1&&he.push(239,191,189);continue}be=Z;continue}if(Z<56320){(J-=3)>-1&&he.push(239,191,189),be=Z;continue}Z=(be-55296<<10|Z-56320)+65536}else be&&(J-=3)>-1&&he.push(239,191,189);if(be=null,Z<128){if((J-=1)<0)break;he.push(Z)}else if(Z<2048){if((J-=2)<0)break;he.push(Z>>6|192,Z&63|128)}else if(Z<65536){if((J-=3)<0)break;he.push(Z>>12|224,Z>>6&63|128,Z&63|128)}else if(Z<1114112){if((J-=4)<0)break;he.push(Z>>18|240,Z>>12&63|128,Z>>6&63|128,Z&63|128)}else throw new Error("Invalid code point")}return he}function Bt(se){const J=[];for(let Z=0;Z<se.length;++Z)J.push(se.charCodeAt(Z)&255);return J}function Zt(se,J){let Z,fe,be;const he=[];for(let ye=0;ye<se.length&&!((J-=2)<0);++ye)Z=se.charCodeAt(ye),fe=Z>>8,be=Z%256,he.push(be),he.push(fe);return he}function Ge(se){return e.toByteArray(St(se))}function At(se,J,Z,fe){let be;for(be=0;be<fe&&!(be+Z>=J.length||be>=se.length);++be)J[be+Z]=se[be];return be}function un(se,J){return se instanceof J||se!=null&&se.constructor!=null&&se.constructor.name!=null&&se.constructor.name===J.name}function Pe(se){return se!==se}const Ve=(function(){const se="0123456789abcdef",J=new Array(256);for(let Z=0;Z<16;++Z){const fe=Z*16;for(let be=0;be<16;++be)J[fe+be]=se[Z]+se[be]}return J})();function ft(se){return typeof BigInt>"u"?lt:se}function lt(){throw new Error("BigInt not supported")}})(oL);const ln=oL.Buffer,cn=oL.Buffer;window.Buffer=cn;function cs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function KZ(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var iP={exports:{}},Kv={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j9;function jye(){if(j9)return Kv;j9=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,s){var o=null;if(s!==void 0&&(o=""+s),i.key!==void 0&&(o=""+i.key),"key"in i){s={};for(var a in i)a!=="key"&&(s[a]=i[a])}else s=i;return i=s.ref,{$$typeof:t,type:r,key:o,ref:i!==void 0?i:null,props:s}}return Kv.Fragment=e,Kv.jsx=n,Kv.jsxs=n,Kv}var U9;function Uye(){return U9||(U9=1,iP.exports=jye()),iP.exports}var h=Uye();function Fye(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var WZ={exports:{}},ii=WZ.exports={},Yl,Jl;function P3(){throw new Error("setTimeout has not been defined")}function R3(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Yl=setTimeout:Yl=P3}catch{Yl=P3}try{typeof clearTimeout=="function"?Jl=clearTimeout:Jl=R3}catch{Jl=R3}})();function YZ(t){if(Yl===setTimeout)return setTimeout(t,0);if((Yl===P3||!Yl)&&setTimeout)return Yl=setTimeout,setTimeout(t,0);try{return Yl(t,0)}catch{try{return Yl.call(null,t,0)}catch{return Yl.call(this,t,0)}}}function $ye(t){if(Jl===clearTimeout)return clearTimeout(t);if((Jl===R3||!Jl)&&clearTimeout)return Jl=clearTimeout,clearTimeout(t);try{return Jl(t)}catch{try{return Jl.call(null,t)}catch{return Jl.call(this,t)}}}var Uu=[],_g=!1,up,FA=-1;function zye(){!_g||!up||(_g=!1,up.length?Uu=up.concat(Uu):FA=-1,Uu.length&&JZ())}function JZ(){if(!_g){var t=YZ(zye);_g=!0;for(var e=Uu.length;e;){for(up=Uu,Uu=[];++FA<e;)up&&up[FA].run();FA=-1,e=Uu.length}up=null,_g=!1,$ye(t)}}ii.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];Uu.push(new XZ(t,e)),Uu.length===1&&!_g&&YZ(JZ)};function XZ(t,e){this.fun=t,this.array=e}XZ.prototype.run=function(){this.fun.apply(null,this.array)};ii.title="browser";ii.browser=!0;ii.env={};ii.argv=[];ii.version="";ii.versions={};function vd(){}ii.on=vd;ii.addListener=vd;ii.once=vd;ii.off=vd;ii.removeListener=vd;ii.removeAllListeners=vd;ii.emit=vd;ii.prependListener=vd;ii.prependOnceListener=vd;ii.listeners=function(t){return[]};ii.binding=function(t){throw new Error("process.binding is not supported")};ii.cwd=function(){return"/"};ii.chdir=function(t){throw new Error("process.chdir is not supported")};ii.umask=function(){return 0};var Hye=WZ.exports;const vl=Fye(Hye);window.global=window;window.process=vl;window.Buffer=cn;console.log("Polyfills loaded");var sP={exports:{}},nn={},F9;function Vye(){if(F9)return nn;F9=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),f=Symbol.for("react.activity"),m=Symbol.iterator;function g(q){return q===null||typeof q!="object"?null:(q=m&&q[m]||q["@@iterator"],typeof q=="function"?q:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,w={};function E(q,D,_){this.props=q,this.context=D,this.refs=w,this.updater=_||x}E.prototype.isReactComponent={},E.prototype.setState=function(q,D){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,D,"setState")},E.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function C(){}C.prototype=E.prototype;function k(q,D,_){this.props=q,this.context=D,this.refs=w,this.updater=_||x}var O=k.prototype=new C;O.constructor=k,v(O,E.prototype),O.isPureReactComponent=!0;var j=Array.isArray;function R(){}var U={H:null,A:null,T:null,S:null},V=Object.prototype.hasOwnProperty;function F(q,D,_){var W=_.ref;return{$$typeof:t,type:q,key:D,ref:W!==void 0?W:null,props:_}}function $(q,D){return F(q.type,D,q.props)}function K(q){return typeof q=="object"&&q!==null&&q.$$typeof===t}function H(q){var D={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(_){return D[_]})}var B=/\/+/g;function A(q,D){return typeof q=="object"&&q!==null&&q.key!=null?H(""+q.key):D.toString(36)}function I(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(R,R):(q.status="pending",q.then(function(D){q.status==="pending"&&(q.status="fulfilled",q.value=D)},function(D){q.status==="pending"&&(q.status="rejected",q.reason=D)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function M(q,D,_,W,X){var re=typeof q;(re==="undefined"||re==="boolean")&&(q=null);var ae=!1;if(q===null)ae=!0;else switch(re){case"bigint":case"string":case"number":ae=!0;break;case"object":switch(q.$$typeof){case t:case e:ae=!0;break;case u:return ae=q._init,M(ae(q._payload),D,_,W,X)}}if(ae)return X=X(q),ae=W===""?"."+A(q,0):W,j(X)?(_="",ae!=null&&(_=ae.replace(B,"$&/")+"/"),M(X,D,_,"",function(me){return me})):X!=null&&(K(X)&&(X=$(X,_+(X.key==null||q&&q.key===X.key?"":(""+X.key).replace(B,"$&/")+"/")+ae)),D.push(X)),1;ae=0;var Ee=W===""?".":W+":";if(j(q))for(var ue=0;ue<q.length;ue++)W=q[ue],re=Ee+A(W,ue),ae+=M(W,D,_,re,X);else if(ue=g(q),typeof ue=="function")for(q=ue.call(q),ue=0;!(W=q.next()).done;)W=W.value,re=Ee+A(W,ue++),ae+=M(W,D,_,re,X);else if(re==="object"){if(typeof q.then=="function")return M(I(q),D,_,W,X);throw D=String(q),Error("Objects are not valid as a React child (found: "+(D==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":D)+"). If you meant to render a collection of children, use an array instead.")}return ae}function z(q,D,_){if(q==null)return q;var W=[],X=0;return M(q,W,"","",function(re){return D.call(_,re,X++)}),W}function G(q){if(q._status===-1){var D=q._result;D=D(),D.then(function(_){(q._status===0||q._status===-1)&&(q._status=1,q._result=_)},function(_){(q._status===0||q._status===-1)&&(q._status=2,q._result=_)}),q._status===-1&&(q._status=0,q._result=D)}if(q._status===1)return q._result.default;throw q._result}var te=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var D=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(D))return}else if(typeof vl=="object"&&typeof vl.emit=="function"){vl.emit("uncaughtException",q);return}console.error(q)},Y={map:z,forEach:function(q,D,_){z(q,function(){D.apply(this,arguments)},_)},count:function(q){var D=0;return z(q,function(){D++}),D},toArray:function(q){return z(q,function(D){return D})||[]},only:function(q){if(!K(q))throw Error("React.Children.only expected to receive a single React element child.");return q}};return nn.Activity=f,nn.Children=Y,nn.Component=E,nn.Fragment=n,nn.Profiler=i,nn.PureComponent=k,nn.StrictMode=r,nn.Suspense=l,nn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=U,nn.__COMPILER_RUNTIME={__proto__:null,c:function(q){return U.H.useMemoCache(q)}},nn.cache=function(q){return function(){return q.apply(null,arguments)}},nn.cacheSignal=function(){return null},nn.cloneElement=function(q,D,_){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var W=v({},q.props),X=q.key;if(D!=null)for(re in D.key!==void 0&&(X=""+D.key),D)!V.call(D,re)||re==="key"||re==="__self"||re==="__source"||re==="ref"&&D.ref===void 0||(W[re]=D[re]);var re=arguments.length-2;if(re===1)W.children=_;else if(1<re){for(var ae=Array(re),Ee=0;Ee<re;Ee++)ae[Ee]=arguments[Ee+2];W.children=ae}return F(q.type,X,W)},nn.createContext=function(q){return q={$$typeof:o,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:s,_context:q},q},nn.createElement=function(q,D,_){var W,X={},re=null;if(D!=null)for(W in D.key!==void 0&&(re=""+D.key),D)V.call(D,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(X[W]=D[W]);var ae=arguments.length-2;if(ae===1)X.children=_;else if(1<ae){for(var Ee=Array(ae),ue=0;ue<ae;ue++)Ee[ue]=arguments[ue+2];X.children=Ee}if(q&&q.defaultProps)for(W in ae=q.defaultProps,ae)X[W]===void 0&&(X[W]=ae[W]);return F(q,re,X)},nn.createRef=function(){return{current:null}},nn.forwardRef=function(q){return{$$typeof:a,render:q}},nn.isValidElement=K,nn.lazy=function(q){return{$$typeof:u,_payload:{_status:-1,_result:q},_init:G}},nn.memo=function(q,D){return{$$typeof:c,type:q,compare:D===void 0?null:D}},nn.startTransition=function(q){var D=U.T,_={};U.T=_;try{var W=q(),X=U.S;X!==null&&X(_,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then(R,te)}catch(re){te(re)}finally{D!==null&&_.types!==null&&(D.types=_.types),U.T=D}},nn.unstable_useCacheRefresh=function(){return U.H.useCacheRefresh()},nn.use=function(q){return U.H.use(q)},nn.useActionState=function(q,D,_){return U.H.useActionState(q,D,_)},nn.useCallback=function(q,D){return U.H.useCallback(q,D)},nn.useContext=function(q){return U.H.useContext(q)},nn.useDebugValue=function(){},nn.useDeferredValue=function(q,D){return U.H.useDeferredValue(q,D)},nn.useEffect=function(q,D){return U.H.useEffect(q,D)},nn.useEffectEvent=function(q){return U.H.useEffectEvent(q)},nn.useId=function(){return U.H.useId()},nn.useImperativeHandle=function(q,D,_){return U.H.useImperativeHandle(q,D,_)},nn.useInsertionEffect=function(q,D){return U.H.useInsertionEffect(q,D)},nn.useLayoutEffect=function(q,D){return U.H.useLayoutEffect(q,D)},nn.useMemo=function(q,D){return U.H.useMemo(q,D)},nn.useOptimistic=function(q,D){return U.H.useOptimistic(q,D)},nn.useReducer=function(q,D,_){return U.H.useReducer(q,D,_)},nn.useRef=function(q){return U.H.useRef(q)},nn.useState=function(q){return U.H.useState(q)},nn.useSyncExternalStore=function(q,D,_){return U.H.useSyncExternalStore(q,D,_)},nn.useTransition=function(){return U.H.useTransition()},nn.version="19.2.3",nn}var $9;function bx(){return $9||($9=1,sP.exports=Vye()),sP.exports}var T=bx();const pu=cs(T),LC=_ye({__proto__:null,default:pu},[T]);var oP={exports:{}},Wv={},aP={exports:{}},lP={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z9;function qye(){return z9||(z9=1,(function(t){function e(M,z){var G=M.length;M.push(z);e:for(;0<G;){var te=G-1>>>1,Y=M[te];if(0<i(Y,z))M[te]=z,M[G]=Y,G=te;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var z=M[0],G=M.pop();if(G!==z){M[0]=G;e:for(var te=0,Y=M.length,q=Y>>>1;te<q;){var D=2*(te+1)-1,_=M[D],W=D+1,X=M[W];if(0>i(_,G))W<Y&&0>i(X,_)?(M[te]=X,M[W]=G,te=W):(M[te]=_,M[D]=G,te=D);else if(W<Y&&0>i(X,G))M[te]=X,M[W]=G,te=W;else break e}}return z}function i(M,z){var G=M.sortIndex-z.sortIndex;return G!==0?G:M.id-z.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,m=3,g=!1,x=!1,v=!1,w=!1,E=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function O(M){for(var z=n(c);z!==null;){if(z.callback===null)r(c);else if(z.startTime<=M)r(c),z.sortIndex=z.expirationTime,e(l,z);else break;z=n(c)}}function j(M){if(v=!1,O(M),!x)if(n(l)!==null)x=!0,R||(R=!0,H());else{var z=n(c);z!==null&&I(j,z.startTime-M)}}var R=!1,U=-1,V=5,F=-1;function $(){return w?!0:!(t.unstable_now()-F<V)}function K(){if(w=!1,R){var M=t.unstable_now();F=M;var z=!0;try{e:{x=!1,v&&(v=!1,C(U),U=-1),g=!0;var G=m;try{t:{for(O(M),f=n(l);f!==null&&!(f.expirationTime>M&&$());){var te=f.callback;if(typeof te=="function"){f.callback=null,m=f.priorityLevel;var Y=te(f.expirationTime<=M);if(M=t.unstable_now(),typeof Y=="function"){f.callback=Y,O(M),z=!0;break t}f===n(l)&&r(l),O(M)}else r(l);f=n(l)}if(f!==null)z=!0;else{var q=n(c);q!==null&&I(j,q.startTime-M),z=!1}}break e}finally{f=null,m=G,g=!1}z=void 0}}finally{z?H():R=!1}}}var H;if(typeof k=="function")H=function(){k(K)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,A=B.port2;B.port1.onmessage=K,H=function(){A.postMessage(null)}}else H=function(){E(K,0)};function I(M,z){U=E(function(){M(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(M){switch(m){case 1:case 2:case 3:var z=3;break;default:z=m}var G=m;m=z;try{return M()}finally{m=G}},t.unstable_requestPaint=function(){w=!0},t.unstable_runWithPriority=function(M,z){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var G=m;m=M;try{return z()}finally{m=G}},t.unstable_scheduleCallback=function(M,z,G){var te=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?te+G:te):G=te,M){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=G+Y,M={id:u++,callback:z,priorityLevel:M,startTime:G,expirationTime:Y,sortIndex:-1},G>te?(M.sortIndex=G,e(c,M),n(l)===null&&M===n(c)&&(v?(C(U),U=-1):v=!0,I(j,G-te))):(M.sortIndex=Y,e(l,M),x||g||(x=!0,R||(R=!0,H()))),M},t.unstable_shouldYield=$,t.unstable_wrapCallback=function(M){var z=m;return function(){var G=m;m=z;try{return M.apply(this,arguments)}finally{m=G}}}})(lP)),lP}var H9;function Gye(){return H9||(H9=1,aP.exports=qye()),aP.exports}var cP={exports:{}},ds={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V9;function Kye(){if(V9)return ds;V9=1;var t=bx();function e(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)c+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(l,c,u){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:f==null?null:""+f,children:l,containerInfo:c,implementation:u}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(l,c){if(l==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return ds.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,ds.createPortal=function(l,c){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(e(299));return s(l,c,null,u)},ds.flushSync=function(l){var c=o.T,u=r.p;try{if(o.T=null,r.p=2,l)return l()}finally{o.T=c,r.p=u,r.d.f()}},ds.preconnect=function(l,c){typeof l=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,r.d.C(l,c))},ds.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},ds.preinit=function(l,c){if(typeof l=="string"&&c&&typeof c.as=="string"){var u=c.as,f=a(u,c.crossOrigin),m=typeof c.integrity=="string"?c.integrity:void 0,g=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;u==="style"?r.d.S(l,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:f,integrity:m,fetchPriority:g}):u==="script"&&r.d.X(l,{crossOrigin:f,integrity:m,fetchPriority:g,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},ds.preinitModule=function(l,c){if(typeof l=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var u=a(c.as,c.crossOrigin);r.d.M(l,{crossOrigin:u,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&r.d.M(l)},ds.preload=function(l,c){if(typeof l=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var u=c.as,f=a(u,c.crossOrigin);r.d.L(l,u,{crossOrigin:f,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},ds.preloadModule=function(l,c){if(typeof l=="string")if(c){var u=a(c.as,c.crossOrigin);r.d.m(l,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:u,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else r.d.m(l)},ds.requestFormReset=function(l){r.d.r(l)},ds.unstable_batchedUpdates=function(l,c){return l(c)},ds.useFormState=function(l,c,u){return o.H.useFormState(l,c,u)},ds.useFormStatus=function(){return o.H.useHostTransitionStatus()},ds.version="19.2.3",ds}var q9;function QZ(){if(q9)return cP.exports;q9=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),cP.exports=Kye(),cP.exports}var G9;function Wye(){if(G9)return Wv;G9=1;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t=Gye(),e=bx(),n=QZ();function r(d){var p="https://react.dev/errors/"+d;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)}function s(d){var p=d,y=d;if(d.alternate)for(;p.return;)p=p.return;else{d=p;do p=d,(p.flags&4098)!==0&&(y=p.return),d=p.return;while(d)}return p.tag===3?y:null}function o(d){if(d.tag===13){var p=d.memoizedState;if(p===null&&(d=d.alternate,d!==null&&(p=d.memoizedState)),p!==null)return p.dehydrated}return null}function a(d){if(d.tag===31){var p=d.memoizedState;if(p===null&&(d=d.alternate,d!==null&&(p=d.memoizedState)),p!==null)return p.dehydrated}return null}function l(d){if(s(d)!==d)throw Error(r(188))}function c(d){var p=d.alternate;if(!p){if(p=s(d),p===null)throw Error(r(188));return p!==d?null:d}for(var y=d,b=p;;){var P=y.return;if(P===null)break;var L=P.alternate;if(L===null){if(b=P.return,b!==null){y=b;continue}break}if(P.child===L.child){for(L=P.child;L;){if(L===y)return l(P),d;if(L===b)return l(P),p;L=L.sibling}throw Error(r(188))}if(y.return!==b.return)y=P,b=L;else{for(var ne=!1,de=P.child;de;){if(de===y){ne=!0,y=P,b=L;break}if(de===b){ne=!0,b=P,y=L;break}de=de.sibling}if(!ne){for(de=L.child;de;){if(de===y){ne=!0,y=L,b=P;break}if(de===b){ne=!0,b=L,y=P;break}de=de.sibling}if(!ne)throw Error(r(189))}}if(y.alternate!==b)throw Error(r(190))}if(y.tag!==3)throw Error(r(188));return y.stateNode.current===y?d:p}function u(d){var p=d.tag;if(p===5||p===26||p===27||p===6)return d;for(d=d.child;d!==null;){if(p=u(d),p!==null)return p;d=d.sibling}return null}var f=Object.assign,m=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),C=Symbol.for("react.consumer"),k=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),F=Symbol.for("react.activity"),$=Symbol.for("react.memo_cache_sentinel"),K=Symbol.iterator;function H(d){return d===null||typeof d!="object"?null:(d=K&&d[K]||d["@@iterator"],typeof d=="function"?d:null)}var B=Symbol.for("react.client.reference");function A(d){if(d==null)return null;if(typeof d=="function")return d.$$typeof===B?null:d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case v:return"Fragment";case E:return"Profiler";case w:return"StrictMode";case j:return"Suspense";case R:return"SuspenseList";case F:return"Activity"}if(typeof d=="object")switch(d.$$typeof){case x:return"Portal";case k:return d.displayName||"Context";case C:return(d._context.displayName||"Context")+".Consumer";case O:var p=d.render;return d=d.displayName,d||(d=p.displayName||p.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case U:return p=d.displayName||null,p!==null?p:A(d.type)||"Memo";case V:p=d._payload,d=d._init;try{return A(d(p))}catch{}}return null}var I=Array.isArray,M=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G={pending:!1,data:null,method:null,action:null},te=[],Y=-1;function q(d){return{current:d}}function D(d){0>Y||(d.current=te[Y],te[Y]=null,Y--)}function _(d,p){Y++,te[Y]=d.current,d.current=p}var W=q(null),X=q(null),re=q(null),ae=q(null);function Ee(d,p){switch(_(re,p),_(X,d),_(W,null),p.nodeType){case 9:case 11:d=(d=p.documentElement)&&(d=d.namespaceURI)?o9(d):0;break;default:if(d=p.tagName,p=p.namespaceURI)p=o9(p),d=a9(p,d);else switch(d){case"svg":d=1;break;case"math":d=2;break;default:d=0}}D(W),_(W,d)}function ue(){D(W),D(X),D(re)}function me(d){d.memoizedState!==null&&_(ae,d);var p=W.current,y=a9(p,d.type);p!==y&&(_(X,d),_(W,y))}function ce(d){X.current===d&&(D(W),D(X)),ae.current===d&&(D(ae),zv._currentValue=G)}var oe,ke;function Ne(d){if(oe===void 0)try{throw Error()}catch(y){var p=y.stack.trim().match(/\n( *(at )?)/);oe=p&&p[1]||"",ke=-1<y.stack.indexOf(`
    at`)?" (<anonymous>)":-1<y.stack.indexOf("@")?"@unknown:0:0":""}return`
`+oe+d+ke}var ze=!1;function Ze(d,p){if(!d||ze)return"";ze=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var b={DetermineComponentFrameRoot:function(){try{if(p){var Qe=function(){throw Error()};if(Object.defineProperty(Qe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Qe,[])}catch(He){var Ue=He}Reflect.construct(d,[],Qe)}else{try{Qe.call()}catch(He){Ue=He}d.call(Qe.prototype)}}else{try{throw Error()}catch(He){Ue=He}(Qe=d())&&typeof Qe.catch=="function"&&Qe.catch(function(){})}}catch(He){if(He&&Ue&&typeof He.stack=="string")return[He.stack,Ue.stack]}return[null,null]}};b.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var P=Object.getOwnPropertyDescriptor(b.DetermineComponentFrameRoot,"name");P&&P.configurable&&Object.defineProperty(b.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var L=b.DetermineComponentFrameRoot(),ne=L[0],de=L[1];if(ne&&de){var we=ne.split(`
`),Le=de.split(`
`);for(P=b=0;b<we.length&&!we[b].includes("DetermineComponentFrameRoot");)b++;for(;P<Le.length&&!Le[P].includes("DetermineComponentFrameRoot");)P++;if(b===we.length||P===Le.length)for(b=we.length-1,P=Le.length-1;1<=b&&0<=P&&we[b]!==Le[P];)P--;for(;1<=b&&0<=P;b--,P--)if(we[b]!==Le[P]){if(b!==1||P!==1)do if(b--,P--,0>P||we[b]!==Le[P]){var qe=`
`+we[b].replace(" at new "," at ");return d.displayName&&qe.includes("<anonymous>")&&(qe=qe.replace("<anonymous>",d.displayName)),qe}while(1<=b&&0<=P);break}}}finally{ze=!1,Error.prepareStackTrace=y}return(y=d?d.displayName||d.name:"")?Ne(y):""}function Ye(d,p){switch(d.tag){case 26:case 27:case 5:return Ne(d.type);case 16:return Ne("Lazy");case 13:return d.child!==p&&p!==null?Ne("Suspense Fallback"):Ne("Suspense");case 19:return Ne("SuspenseList");case 0:case 15:return Ze(d.type,!1);case 11:return Ze(d.type.render,!1);case 1:return Ze(d.type,!0);case 31:return Ne("Activity");default:return""}}function We(d){try{var p="",y=null;do p+=Ye(d,y),y=d,d=d.return;while(d);return p}catch(b){return`
Error generating stack: `+b.message+`
`+b.stack}}var St=Object.prototype.hasOwnProperty,st=t.unstable_scheduleCallback,Bt=t.unstable_cancelCallback,Zt=t.unstable_shouldYield,Ge=t.unstable_requestPaint,At=t.unstable_now,un=t.unstable_getCurrentPriorityLevel,Pe=t.unstable_ImmediatePriority,Ve=t.unstable_UserBlockingPriority,ft=t.unstable_NormalPriority,lt=t.unstable_LowPriority,se=t.unstable_IdlePriority,J=t.log,Z=t.unstable_setDisableYieldValue,fe=null,be=null;function he(d){if(typeof J=="function"&&Z(d),be&&typeof be.setStrictMode=="function")try{be.setStrictMode(fe,d)}catch{}}var ye=Math.clz32?Math.clz32:it,Xe=Math.log,et=Math.LN2;function it(d){return d>>>=0,d===0?32:31-(Xe(d)/et|0)|0}var Ft=256,xt=262144,Rt=4194304;function sn(d){var p=d&42;if(p!==0)return p;switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return d&261888;case 262144:case 524288:case 1048576:case 2097152:return d&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return d&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return d}}function en(d,p,y){var b=d.pendingLanes;if(b===0)return 0;var P=0,L=d.suspendedLanes,ne=d.pingedLanes;d=d.warmLanes;var de=b&134217727;return de!==0?(b=de&~L,b!==0?P=sn(b):(ne&=de,ne!==0?P=sn(ne):y||(y=de&~d,y!==0&&(P=sn(y))))):(de=b&~L,de!==0?P=sn(de):ne!==0?P=sn(ne):y||(y=b&~d,y!==0&&(P=sn(y)))),P===0?0:p!==0&&p!==P&&(p&L)===0&&(L=P&-P,y=p&-p,L>=y||L===32&&(y&4194048)!==0)?p:P}function on(d,p){return(d.pendingLanes&~(d.suspendedLanes&~d.pingedLanes)&p)===0}function Hi(d,p){switch(d){case 1:case 2:case 4:case 8:case 64:return p+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vn(){var d=Rt;return Rt<<=1,(Rt&62914560)===0&&(Rt=4194304),d}function le(d){for(var p=[],y=0;31>y;y++)p.push(d);return p}function Q(d,p){d.pendingLanes|=p,p!==268435456&&(d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0)}function ee(d,p,y,b,P,L){var ne=d.pendingLanes;d.pendingLanes=y,d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0,d.expiredLanes&=y,d.entangledLanes&=y,d.errorRecoveryDisabledLanes&=y,d.shellSuspendCounter=0;var de=d.entanglements,we=d.expirationTimes,Le=d.hiddenUpdates;for(y=ne&~y;0<y;){var qe=31-ye(y),Qe=1<<qe;de[qe]=0,we[qe]=-1;var Ue=Le[qe];if(Ue!==null)for(Le[qe]=null,qe=0;qe<Ue.length;qe++){var He=Ue[qe];He!==null&&(He.lane&=-536870913)}y&=~Qe}b!==0&&pe(d,b,0),L!==0&&P===0&&d.tag!==0&&(d.suspendedLanes|=L&~(ne&~p))}function pe(d,p,y){d.pendingLanes|=p,d.suspendedLanes&=~p;var b=31-ye(p);d.entangledLanes|=p,d.entanglements[b]=d.entanglements[b]|1073741824|y&261930}function Te(d,p){var y=d.entangledLanes|=p;for(d=d.entanglements;y;){var b=31-ye(y),P=1<<b;P&p|d[b]&p&&(d[b]|=p),y&=~P}}function Re(d,p){var y=p&-p;return y=(y&42)!==0?1:$e(y),(y&(d.suspendedLanes|p))!==0?0:y}function $e(d){switch(d){case 2:d=1;break;case 8:d=4;break;case 32:d=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:d=128;break;case 268435456:d=134217728;break;default:d=0}return d}function Jt(d){return d&=-d,2<d?8<d?(d&134217727)!==0?32:268435456:8:2}function Kt(){var d=z.p;return d!==0?d:(d=window.event,d===void 0?32:I9(d.type))}function Vt(d,p){var y=z.p;try{return z.p=d,p()}finally{z.p=y}}var gn=Math.random().toString(36).slice(2),mt="__reactFiber$"+gn,ct="__reactProps$"+gn,Xs="__reactContainer$"+gn,$n="__reactEvents$"+gn,yr="__reactListeners$"+gn,$c="__reactHandles$"+gn,Ll="__reactResources$"+gn,Qo="__reactMarker$"+gn;function Bl(d){delete d[mt],delete d[ct],delete d[$n],delete d[yr],delete d[$c]}function vo(d){var p=d[mt];if(p)return p;for(var y=d.parentNode;y;){if(p=y[Xs]||y[mt]){if(y=p.alternate,p.child!==null||y!==null&&y.child!==null)for(d=p9(d);d!==null;){if(y=d[mt])return y;d=p9(d)}return p}d=y,y=d.parentNode}return null}function bo(d){if(d=d[mt]||d[Xs]){var p=d.tag;if(p===5||p===6||p===13||p===31||p===26||p===27||p===3)return d}return null}function Zo(d){var p=d.tag;if(p===5||p===26||p===27||p===6)return d.stateNode;throw Error(r(33))}function wo(d){var p=d[Ll];return p||(p=d[Ll]={hoistableStyles:new Map,hoistableScripts:new Map}),p}function xr(d){d[Qo]=!0}var zc=new Set,Sr={};function Yr(d,p){us(d,p),us(d+"Capture",p)}function us(d,p){for(Sr[d]=p,d=0;d<p.length;d++)zc.add(p[d])}var wh=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),zm={},Hm={};function iv(d){return St.call(Hm,d)?!0:St.call(zm,d)?!1:wh.test(d)?Hm[d]=!0:(zm[d]=!0,!1)}function Rd(d,p,y){if(iv(p))if(y===null)d.removeAttribute(p);else{switch(typeof y){case"undefined":case"function":case"symbol":d.removeAttribute(p);return;case"boolean":var b=p.toLowerCase().slice(0,5);if(b!=="data-"&&b!=="aria-"){d.removeAttribute(p);return}}d.setAttribute(p,""+y)}}function Od(d,p,y){if(y===null)d.removeAttribute(p);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":d.removeAttribute(p);return}d.setAttribute(p,""+y)}}function Hc(d,p,y,b){if(b===null)d.removeAttribute(y);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":d.removeAttribute(y);return}d.setAttributeNS(p,y,""+b)}}function ea(d){switch(typeof d){case"bigint":case"boolean":case"number":case"string":case"undefined":return d;case"object":return d;default:return""}}function Qj(d){var p=d.type;return(d=d.nodeName)&&d.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function b0e(d,p,y){var b=Object.getOwnPropertyDescriptor(d.constructor.prototype,p);if(!d.hasOwnProperty(p)&&typeof b<"u"&&typeof b.get=="function"&&typeof b.set=="function"){var P=b.get,L=b.set;return Object.defineProperty(d,p,{configurable:!0,get:function(){return P.call(this)},set:function(ne){y=""+ne,L.call(this,ne)}}),Object.defineProperty(d,p,{enumerable:b.enumerable}),{getValue:function(){return y},setValue:function(ne){y=""+ne},stopTracking:function(){d._valueTracker=null,delete d[p]}}}}function YN(d){if(!d._valueTracker){var p=Qj(d)?"checked":"value";d._valueTracker=b0e(d,p,""+d[p])}}function Zj(d){if(!d)return!1;var p=d._valueTracker;if(!p)return!0;var y=p.getValue(),b="";return d&&(b=Qj(d)?d.checked?"true":"false":d.value),d=b,d!==y?(p.setValue(d),!0):!1}function dE(d){if(d=d||(typeof document<"u"?document:void 0),typeof d>"u")return null;try{return d.activeElement||d.body}catch{return d.body}}var w0e=/[\n"\\]/g;function ta(d){return d.replace(w0e,function(p){return"\\"+p.charCodeAt(0).toString(16)+" "})}function JN(d,p,y,b,P,L,ne,de){d.name="",ne!=null&&typeof ne!="function"&&typeof ne!="symbol"&&typeof ne!="boolean"?d.type=ne:d.removeAttribute("type"),p!=null?ne==="number"?(p===0&&d.value===""||d.value!=p)&&(d.value=""+ea(p)):d.value!==""+ea(p)&&(d.value=""+ea(p)):ne!=="submit"&&ne!=="reset"||d.removeAttribute("value"),p!=null?XN(d,ne,ea(p)):y!=null?XN(d,ne,ea(y)):b!=null&&d.removeAttribute("value"),P==null&&L!=null&&(d.defaultChecked=!!L),P!=null&&(d.checked=P&&typeof P!="function"&&typeof P!="symbol"),de!=null&&typeof de!="function"&&typeof de!="symbol"&&typeof de!="boolean"?d.name=""+ea(de):d.removeAttribute("name")}function e7(d,p,y,b,P,L,ne,de){if(L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"&&(d.type=L),p!=null||y!=null){if(!(L!=="submit"&&L!=="reset"||p!=null)){YN(d);return}y=y!=null?""+ea(y):"",p=p!=null?""+ea(p):y,de||p===d.value||(d.value=p),d.defaultValue=p}b=b??P,b=typeof b!="function"&&typeof b!="symbol"&&!!b,d.checked=de?d.checked:!!b,d.defaultChecked=!!b,ne!=null&&typeof ne!="function"&&typeof ne!="symbol"&&typeof ne!="boolean"&&(d.name=ne),YN(d)}function XN(d,p,y){p==="number"&&dE(d.ownerDocument)===d||d.defaultValue===""+y||(d.defaultValue=""+y)}function Vm(d,p,y,b){if(d=d.options,p){p={};for(var P=0;P<y.length;P++)p["$"+y[P]]=!0;for(y=0;y<d.length;y++)P=p.hasOwnProperty("$"+d[y].value),d[y].selected!==P&&(d[y].selected=P),P&&b&&(d[y].defaultSelected=!0)}else{for(y=""+ea(y),p=null,P=0;P<d.length;P++){if(d[P].value===y){d[P].selected=!0,b&&(d[P].defaultSelected=!0);return}p!==null||d[P].disabled||(p=d[P])}p!==null&&(p.selected=!0)}}function t7(d,p,y){if(p!=null&&(p=""+ea(p),p!==d.value&&(d.value=p),y==null)){d.defaultValue!==p&&(d.defaultValue=p);return}d.defaultValue=y!=null?""+ea(y):""}function n7(d,p,y,b){if(p==null){if(b!=null){if(y!=null)throw Error(r(92));if(I(b)){if(1<b.length)throw Error(r(93));b=b[0]}y=b}y==null&&(y=""),p=y}y=ea(p),d.defaultValue=y,b=d.textContent,b===y&&b!==""&&b!==null&&(d.value=b),YN(d)}function qm(d,p){if(p){var y=d.firstChild;if(y&&y===d.lastChild&&y.nodeType===3){y.nodeValue=p;return}}d.textContent=p}var E0e=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function r7(d,p,y){var b=p.indexOf("--")===0;y==null||typeof y=="boolean"||y===""?b?d.setProperty(p,""):p==="float"?d.cssFloat="":d[p]="":b?d.setProperty(p,y):typeof y!="number"||y===0||E0e.has(p)?p==="float"?d.cssFloat=y:d[p]=(""+y).trim():d[p]=y+"px"}function i7(d,p,y){if(p!=null&&typeof p!="object")throw Error(r(62));if(d=d.style,y!=null){for(var b in y)!y.hasOwnProperty(b)||p!=null&&p.hasOwnProperty(b)||(b.indexOf("--")===0?d.setProperty(b,""):b==="float"?d.cssFloat="":d[b]="");for(var P in p)b=p[P],p.hasOwnProperty(P)&&y[P]!==b&&r7(d,P,b)}else for(var L in p)p.hasOwnProperty(L)&&r7(d,L,p[L])}function QN(d){if(d.indexOf("-")===-1)return!1;switch(d){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var S0e=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),A0e=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function fE(d){return A0e.test(""+d)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":d}function Vc(){}var ZN=null;function e_(d){return d=d.target||d.srcElement||window,d.correspondingUseElement&&(d=d.correspondingUseElement),d.nodeType===3?d.parentNode:d}var Gm=null,Km=null;function s7(d){var p=bo(d);if(p&&(d=p.stateNode)){var y=d[ct]||null;e:switch(d=p.stateNode,p.type){case"input":if(JN(d,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name),p=y.name,y.type==="radio"&&p!=null){for(y=d;y.parentNode;)y=y.parentNode;for(y=y.querySelectorAll('input[name="'+ta(""+p)+'"][type="radio"]'),p=0;p<y.length;p++){var b=y[p];if(b!==d&&b.form===d.form){var P=b[ct]||null;if(!P)throw Error(r(90));JN(b,P.value,P.defaultValue,P.defaultValue,P.checked,P.defaultChecked,P.type,P.name)}}for(p=0;p<y.length;p++)b=y[p],b.form===d.form&&Zj(b)}break e;case"textarea":t7(d,y.value,y.defaultValue);break e;case"select":p=y.value,p!=null&&Vm(d,!!y.multiple,p,!1)}}}var t_=!1;function o7(d,p,y){if(t_)return d(p,y);t_=!0;try{var b=d(p);return b}finally{if(t_=!1,(Gm!==null||Km!==null)&&(ZE(),Gm&&(p=Gm,d=Km,Km=Gm=null,s7(p),d)))for(p=0;p<d.length;p++)s7(d[p])}}function sv(d,p){var y=d.stateNode;if(y===null)return null;var b=y[ct]||null;if(b===null)return null;y=b[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(b=!b.disabled)||(d=d.type,b=!(d==="button"||d==="input"||d==="select"||d==="textarea")),d=!b;break e;default:d=!1}if(d)return null;if(y&&typeof y!="function")throw Error(r(231,p,typeof y));return y}var qc=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),n_=!1;if(qc)try{var ov={};Object.defineProperty(ov,"passive",{get:function(){n_=!0}}),window.addEventListener("test",ov,ov),window.removeEventListener("test",ov,ov)}catch{n_=!1}var Md=null,r_=null,hE=null;function a7(){if(hE)return hE;var d,p=r_,y=p.length,b,P="value"in Md?Md.value:Md.textContent,L=P.length;for(d=0;d<y&&p[d]===P[d];d++);var ne=y-d;for(b=1;b<=ne&&p[y-b]===P[L-b];b++);return hE=P.slice(d,1<b?1-b:void 0)}function pE(d){var p=d.keyCode;return"charCode"in d?(d=d.charCode,d===0&&p===13&&(d=13)):d=p,d===10&&(d=13),32<=d||d===13?d:0}function mE(){return!0}function l7(){return!1}function Qs(d){function p(y,b,P,L,ne){this._reactName=y,this._targetInst=P,this.type=b,this.nativeEvent=L,this.target=ne,this.currentTarget=null;for(var de in d)d.hasOwnProperty(de)&&(y=d[de],this[de]=y?y(L):L[de]);return this.isDefaultPrevented=(L.defaultPrevented!=null?L.defaultPrevented:L.returnValue===!1)?mE:l7,this.isPropagationStopped=l7,this}return f(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var y=this.nativeEvent;y&&(y.preventDefault?y.preventDefault():typeof y.returnValue!="unknown"&&(y.returnValue=!1),this.isDefaultPrevented=mE)},stopPropagation:function(){var y=this.nativeEvent;y&&(y.stopPropagation?y.stopPropagation():typeof y.cancelBubble!="unknown"&&(y.cancelBubble=!0),this.isPropagationStopped=mE)},persist:function(){},isPersistent:mE}),p}var Eh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(d){return d.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gE=Qs(Eh),av=f({},Eh,{view:0,detail:0}),T0e=Qs(av),i_,s_,lv,yE=f({},av,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:a_,button:0,buttons:0,relatedTarget:function(d){return d.relatedTarget===void 0?d.fromElement===d.srcElement?d.toElement:d.fromElement:d.relatedTarget},movementX:function(d){return"movementX"in d?d.movementX:(d!==lv&&(lv&&d.type==="mousemove"?(i_=d.screenX-lv.screenX,s_=d.screenY-lv.screenY):s_=i_=0,lv=d),i_)},movementY:function(d){return"movementY"in d?d.movementY:s_}}),c7=Qs(yE),k0e=f({},yE,{dataTransfer:0}),C0e=Qs(k0e),N0e=f({},av,{relatedTarget:0}),o_=Qs(N0e),_0e=f({},Eh,{animationName:0,elapsedTime:0,pseudoElement:0}),I0e=Qs(_0e),P0e=f({},Eh,{clipboardData:function(d){return"clipboardData"in d?d.clipboardData:window.clipboardData}}),R0e=Qs(P0e),O0e=f({},Eh,{data:0}),u7=Qs(O0e),M0e={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},D0e={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},L0e={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function B0e(d){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(d):(d=L0e[d])?!!p[d]:!1}function a_(){return B0e}var j0e=f({},av,{key:function(d){if(d.key){var p=M0e[d.key]||d.key;if(p!=="Unidentified")return p}return d.type==="keypress"?(d=pE(d),d===13?"Enter":String.fromCharCode(d)):d.type==="keydown"||d.type==="keyup"?D0e[d.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:a_,charCode:function(d){return d.type==="keypress"?pE(d):0},keyCode:function(d){return d.type==="keydown"||d.type==="keyup"?d.keyCode:0},which:function(d){return d.type==="keypress"?pE(d):d.type==="keydown"||d.type==="keyup"?d.keyCode:0}}),U0e=Qs(j0e),F0e=f({},yE,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),d7=Qs(F0e),$0e=f({},av,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:a_}),z0e=Qs($0e),H0e=f({},Eh,{propertyName:0,elapsedTime:0,pseudoElement:0}),V0e=Qs(H0e),q0e=f({},yE,{deltaX:function(d){return"deltaX"in d?d.deltaX:"wheelDeltaX"in d?-d.wheelDeltaX:0},deltaY:function(d){return"deltaY"in d?d.deltaY:"wheelDeltaY"in d?-d.wheelDeltaY:"wheelDelta"in d?-d.wheelDelta:0},deltaZ:0,deltaMode:0}),G0e=Qs(q0e),K0e=f({},Eh,{newState:0,oldState:0}),W0e=Qs(K0e),Y0e=[9,13,27,32],l_=qc&&"CompositionEvent"in window,cv=null;qc&&"documentMode"in document&&(cv=document.documentMode);var J0e=qc&&"TextEvent"in window&&!cv,f7=qc&&(!l_||cv&&8<cv&&11>=cv),h7=" ",p7=!1;function m7(d,p){switch(d){case"keyup":return Y0e.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function g7(d){return d=d.detail,typeof d=="object"&&"data"in d?d.data:null}var Wm=!1;function X0e(d,p){switch(d){case"compositionend":return g7(p);case"keypress":return p.which!==32?null:(p7=!0,h7);case"textInput":return d=p.data,d===h7&&p7?null:d;default:return null}}function Q0e(d,p){if(Wm)return d==="compositionend"||!l_&&m7(d,p)?(d=a7(),hE=r_=Md=null,Wm=!1,d):null;switch(d){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return f7&&p.locale!=="ko"?null:p.data;default:return null}}var Z0e={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function y7(d){var p=d&&d.nodeName&&d.nodeName.toLowerCase();return p==="input"?!!Z0e[d.type]:p==="textarea"}function x7(d,p,y,b){Gm?Km?Km.push(b):Km=[b]:Gm=b,p=oS(p,"onChange"),0<p.length&&(y=new gE("onChange","change",null,y,b),d.push({event:y,listeners:p}))}var uv=null,dv=null;function ege(d){e9(d,0)}function xE(d){var p=Zo(d);if(Zj(p))return d}function v7(d,p){if(d==="change")return p}var b7=!1;if(qc){var c_;if(qc){var u_="oninput"in document;if(!u_){var w7=document.createElement("div");w7.setAttribute("oninput","return;"),u_=typeof w7.oninput=="function"}c_=u_}else c_=!1;b7=c_&&(!document.documentMode||9<document.documentMode)}function E7(){uv&&(uv.detachEvent("onpropertychange",S7),dv=uv=null)}function S7(d){if(d.propertyName==="value"&&xE(dv)){var p=[];x7(p,dv,d,e_(d)),o7(ege,p)}}function tge(d,p,y){d==="focusin"?(E7(),uv=p,dv=y,uv.attachEvent("onpropertychange",S7)):d==="focusout"&&E7()}function nge(d){if(d==="selectionchange"||d==="keyup"||d==="keydown")return xE(dv)}function rge(d,p){if(d==="click")return xE(p)}function ige(d,p){if(d==="input"||d==="change")return xE(p)}function sge(d,p){return d===p&&(d!==0||1/d===1/p)||d!==d&&p!==p}var Eo=typeof Object.is=="function"?Object.is:sge;function fv(d,p){if(Eo(d,p))return!0;if(typeof d!="object"||d===null||typeof p!="object"||p===null)return!1;var y=Object.keys(d),b=Object.keys(p);if(y.length!==b.length)return!1;for(b=0;b<y.length;b++){var P=y[b];if(!St.call(p,P)||!Eo(d[P],p[P]))return!1}return!0}function A7(d){for(;d&&d.firstChild;)d=d.firstChild;return d}function T7(d,p){var y=A7(d);d=0;for(var b;y;){if(y.nodeType===3){if(b=d+y.textContent.length,d<=p&&b>=p)return{node:y,offset:p-d};d=b}e:{for(;y;){if(y.nextSibling){y=y.nextSibling;break e}y=y.parentNode}y=void 0}y=A7(y)}}function k7(d,p){return d&&p?d===p?!0:d&&d.nodeType===3?!1:p&&p.nodeType===3?k7(d,p.parentNode):"contains"in d?d.contains(p):d.compareDocumentPosition?!!(d.compareDocumentPosition(p)&16):!1:!1}function C7(d){d=d!=null&&d.ownerDocument!=null&&d.ownerDocument.defaultView!=null?d.ownerDocument.defaultView:window;for(var p=dE(d.document);p instanceof d.HTMLIFrameElement;){try{var y=typeof p.contentWindow.location.href=="string"}catch{y=!1}if(y)d=p.contentWindow;else break;p=dE(d.document)}return p}function d_(d){var p=d&&d.nodeName&&d.nodeName.toLowerCase();return p&&(p==="input"&&(d.type==="text"||d.type==="search"||d.type==="tel"||d.type==="url"||d.type==="password")||p==="textarea"||d.contentEditable==="true")}var oge=qc&&"documentMode"in document&&11>=document.documentMode,Ym=null,f_=null,hv=null,h_=!1;function N7(d,p,y){var b=y.window===y?y.document:y.nodeType===9?y:y.ownerDocument;h_||Ym==null||Ym!==dE(b)||(b=Ym,"selectionStart"in b&&d_(b)?b={start:b.selectionStart,end:b.selectionEnd}:(b=(b.ownerDocument&&b.ownerDocument.defaultView||window).getSelection(),b={anchorNode:b.anchorNode,anchorOffset:b.anchorOffset,focusNode:b.focusNode,focusOffset:b.focusOffset}),hv&&fv(hv,b)||(hv=b,b=oS(f_,"onSelect"),0<b.length&&(p=new gE("onSelect","select",null,p,y),d.push({event:p,listeners:b}),p.target=Ym)))}function Sh(d,p){var y={};return y[d.toLowerCase()]=p.toLowerCase(),y["Webkit"+d]="webkit"+p,y["Moz"+d]="moz"+p,y}var Jm={animationend:Sh("Animation","AnimationEnd"),animationiteration:Sh("Animation","AnimationIteration"),animationstart:Sh("Animation","AnimationStart"),transitionrun:Sh("Transition","TransitionRun"),transitionstart:Sh("Transition","TransitionStart"),transitioncancel:Sh("Transition","TransitionCancel"),transitionend:Sh("Transition","TransitionEnd")},p_={},_7={};qc&&(_7=document.createElement("div").style,"AnimationEvent"in window||(delete Jm.animationend.animation,delete Jm.animationiteration.animation,delete Jm.animationstart.animation),"TransitionEvent"in window||delete Jm.transitionend.transition);function Ah(d){if(p_[d])return p_[d];if(!Jm[d])return d;var p=Jm[d],y;for(y in p)if(p.hasOwnProperty(y)&&y in _7)return p_[d]=p[y];return d}var I7=Ah("animationend"),P7=Ah("animationiteration"),R7=Ah("animationstart"),age=Ah("transitionrun"),lge=Ah("transitionstart"),cge=Ah("transitioncancel"),O7=Ah("transitionend"),M7=new Map,m_="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");m_.push("scrollEnd");function Ka(d,p){M7.set(d,p),Yr(p,[d])}var vE=typeof reportError=="function"?reportError:function(d){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var p=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof d=="object"&&d!==null&&typeof d.message=="string"?String(d.message):String(d),error:d});if(!window.dispatchEvent(p))return}else if(typeof vl=="object"&&typeof vl.emit=="function"){vl.emit("uncaughtException",d);return}console.error(d)},na=[],Xm=0,g_=0;function bE(){for(var d=Xm,p=g_=Xm=0;p<d;){var y=na[p];na[p++]=null;var b=na[p];na[p++]=null;var P=na[p];na[p++]=null;var L=na[p];if(na[p++]=null,b!==null&&P!==null){var ne=b.pending;ne===null?P.next=P:(P.next=ne.next,ne.next=P),b.pending=P}L!==0&&D7(y,P,L)}}function wE(d,p,y,b){na[Xm++]=d,na[Xm++]=p,na[Xm++]=y,na[Xm++]=b,g_|=b,d.lanes|=b,d=d.alternate,d!==null&&(d.lanes|=b)}function y_(d,p,y,b){return wE(d,p,y,b),EE(d)}function Th(d,p){return wE(d,null,null,p),EE(d)}function D7(d,p,y){d.lanes|=y;var b=d.alternate;b!==null&&(b.lanes|=y);for(var P=!1,L=d.return;L!==null;)L.childLanes|=y,b=L.alternate,b!==null&&(b.childLanes|=y),L.tag===22&&(d=L.stateNode,d===null||d._visibility&1||(P=!0)),d=L,L=L.return;return d.tag===3?(L=d.stateNode,P&&p!==null&&(P=31-ye(y),d=L.hiddenUpdates,b=d[P],b===null?d[P]=[p]:b.push(p),p.lane=y|536870912),L):null}function EE(d){if(50<Dv)throw Dv=0,kI=null,Error(r(185));for(var p=d.return;p!==null;)d=p,p=d.return;return d.tag===3?d.stateNode:null}var Qm={};function uge(d,p,y,b){this.tag=d,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function So(d,p,y,b){return new uge(d,p,y,b)}function x_(d){return d=d.prototype,!(!d||!d.isReactComponent)}function Gc(d,p){var y=d.alternate;return y===null?(y=So(d.tag,p,d.key,d.mode),y.elementType=d.elementType,y.type=d.type,y.stateNode=d.stateNode,y.alternate=d,d.alternate=y):(y.pendingProps=p,y.type=d.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=d.flags&65011712,y.childLanes=d.childLanes,y.lanes=d.lanes,y.child=d.child,y.memoizedProps=d.memoizedProps,y.memoizedState=d.memoizedState,y.updateQueue=d.updateQueue,p=d.dependencies,y.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},y.sibling=d.sibling,y.index=d.index,y.ref=d.ref,y.refCleanup=d.refCleanup,y}function L7(d,p){d.flags&=65011714;var y=d.alternate;return y===null?(d.childLanes=0,d.lanes=p,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=y.childLanes,d.lanes=y.lanes,d.child=y.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=y.memoizedProps,d.memoizedState=y.memoizedState,d.updateQueue=y.updateQueue,d.type=y.type,p=y.dependencies,d.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext}),d}function SE(d,p,y,b,P,L){var ne=0;if(b=d,typeof d=="function")x_(d)&&(ne=1);else if(typeof d=="string")ne=mye(d,y,W.current)?26:d==="html"||d==="head"||d==="body"?27:5;else e:switch(d){case F:return d=So(31,y,p,P),d.elementType=F,d.lanes=L,d;case v:return kh(y.children,P,L,p);case w:ne=8,P|=24;break;case E:return d=So(12,y,p,P|2),d.elementType=E,d.lanes=L,d;case j:return d=So(13,y,p,P),d.elementType=j,d.lanes=L,d;case R:return d=So(19,y,p,P),d.elementType=R,d.lanes=L,d;default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case k:ne=10;break e;case C:ne=9;break e;case O:ne=11;break e;case U:ne=14;break e;case V:ne=16,b=null;break e}ne=29,y=Error(r(130,d===null?"null":typeof d,"")),b=null}return p=So(ne,y,p,P),p.elementType=d,p.type=b,p.lanes=L,p}function kh(d,p,y,b){return d=So(7,d,b,p),d.lanes=y,d}function v_(d,p,y){return d=So(6,d,null,p),d.lanes=y,d}function B7(d){var p=So(18,null,null,0);return p.stateNode=d,p}function b_(d,p,y){return p=So(4,d.children!==null?d.children:[],d.key,p),p.lanes=y,p.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},p}var j7=new WeakMap;function ra(d,p){if(typeof d=="object"&&d!==null){var y=j7.get(d);return y!==void 0?y:(p={value:d,source:p,stack:We(p)},j7.set(d,p),p)}return{value:d,source:p,stack:We(p)}}var Zm=[],e0=0,AE=null,pv=0,ia=[],sa=0,Dd=null,jl=1,Ul="";function Kc(d,p){Zm[e0++]=pv,Zm[e0++]=AE,AE=d,pv=p}function U7(d,p,y){ia[sa++]=jl,ia[sa++]=Ul,ia[sa++]=Dd,Dd=d;var b=jl;d=Ul;var P=32-ye(b)-1;b&=~(1<<P),y+=1;var L=32-ye(p)+P;if(30<L){var ne=P-P%5;L=(b&(1<<ne)-1).toString(32),b>>=ne,P-=ne,jl=1<<32-ye(p)+P|y<<P|b,Ul=L+d}else jl=1<<L|y<<P|b,Ul=d}function w_(d){d.return!==null&&(Kc(d,1),U7(d,1,0))}function E_(d){for(;d===AE;)AE=Zm[--e0],Zm[e0]=null,pv=Zm[--e0],Zm[e0]=null;for(;d===Dd;)Dd=ia[--sa],ia[sa]=null,Ul=ia[--sa],ia[sa]=null,jl=ia[--sa],ia[sa]=null}function F7(d,p){ia[sa++]=jl,ia[sa++]=Ul,ia[sa++]=Dd,jl=p.id,Ul=p.overflow,Dd=d}var Vi=null,vr=null,Cn=!1,Ld=null,oa=!1,S_=Error(r(519));function Bd(d){var p=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw mv(ra(p,d)),S_}function $7(d){var p=d.stateNode,y=d.type,b=d.memoizedProps;switch(p[mt]=d,p[ct]=b,y){case"dialog":wn("cancel",p),wn("close",p);break;case"iframe":case"object":case"embed":wn("load",p);break;case"video":case"audio":for(y=0;y<Bv.length;y++)wn(Bv[y],p);break;case"source":wn("error",p);break;case"img":case"image":case"link":wn("error",p),wn("load",p);break;case"details":wn("toggle",p);break;case"input":wn("invalid",p),e7(p,b.value,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name,!0);break;case"select":wn("invalid",p);break;case"textarea":wn("invalid",p),n7(p,b.value,b.defaultValue,b.children)}y=b.children,typeof y!="string"&&typeof y!="number"&&typeof y!="bigint"||p.textContent===""+y||b.suppressHydrationWarning===!0||i9(p.textContent,y)?(b.popover!=null&&(wn("beforetoggle",p),wn("toggle",p)),b.onScroll!=null&&wn("scroll",p),b.onScrollEnd!=null&&wn("scrollend",p),b.onClick!=null&&(p.onclick=Vc),p=!0):p=!1,p||Bd(d,!0)}function z7(d){for(Vi=d.return;Vi;)switch(Vi.tag){case 5:case 31:case 13:oa=!1;return;case 27:case 3:oa=!0;return;default:Vi=Vi.return}}function t0(d){if(d!==Vi)return!1;if(!Cn)return z7(d),Cn=!0,!1;var p=d.tag,y;if((y=p!==3&&p!==27)&&((y=p===5)&&(y=d.type,y=!(y!=="form"&&y!=="button")||$I(d.type,d.memoizedProps)),y=!y),y&&vr&&Bd(d),z7(d),p===13){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));vr=h9(d)}else if(p===31){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));vr=h9(d)}else p===27?(p=vr,Xd(d.type)?(d=GI,GI=null,vr=d):vr=p):vr=Vi?la(d.stateNode.nextSibling):null;return!0}function Ch(){vr=Vi=null,Cn=!1}function A_(){var d=Ld;return d!==null&&(no===null?no=d:no.push.apply(no,d),Ld=null),d}function mv(d){Ld===null?Ld=[d]:Ld.push(d)}var T_=q(null),Nh=null,Wc=null;function jd(d,p,y){_(T_,p._currentValue),p._currentValue=y}function Yc(d){d._currentValue=T_.current,D(T_)}function k_(d,p,y){for(;d!==null;){var b=d.alternate;if((d.childLanes&p)!==p?(d.childLanes|=p,b!==null&&(b.childLanes|=p)):b!==null&&(b.childLanes&p)!==p&&(b.childLanes|=p),d===y)break;d=d.return}}function C_(d,p,y,b){var P=d.child;for(P!==null&&(P.return=d);P!==null;){var L=P.dependencies;if(L!==null){var ne=P.child;L=L.firstContext;e:for(;L!==null;){var de=L;L=P;for(var we=0;we<p.length;we++)if(de.context===p[we]){L.lanes|=y,de=L.alternate,de!==null&&(de.lanes|=y),k_(L.return,y,d),b||(ne=null);break e}L=de.next}}else if(P.tag===18){if(ne=P.return,ne===null)throw Error(r(341));ne.lanes|=y,L=ne.alternate,L!==null&&(L.lanes|=y),k_(ne,y,d),ne=null}else ne=P.child;if(ne!==null)ne.return=P;else for(ne=P;ne!==null;){if(ne===d){ne=null;break}if(P=ne.sibling,P!==null){P.return=ne.return,ne=P;break}ne=ne.return}P=ne}}function n0(d,p,y,b){d=null;for(var P=p,L=!1;P!==null;){if(!L){if((P.flags&524288)!==0)L=!0;else if((P.flags&262144)!==0)break}if(P.tag===10){var ne=P.alternate;if(ne===null)throw Error(r(387));if(ne=ne.memoizedProps,ne!==null){var de=P.type;Eo(P.pendingProps.value,ne.value)||(d!==null?d.push(de):d=[de])}}else if(P===ae.current){if(ne=P.alternate,ne===null)throw Error(r(387));ne.memoizedState.memoizedState!==P.memoizedState.memoizedState&&(d!==null?d.push(zv):d=[zv])}P=P.return}d!==null&&C_(p,d,y,b),p.flags|=262144}function TE(d){for(d=d.firstContext;d!==null;){if(!Eo(d.context._currentValue,d.memoizedValue))return!0;d=d.next}return!1}function _h(d){Nh=d,Wc=null,d=d.dependencies,d!==null&&(d.firstContext=null)}function qi(d){return H7(Nh,d)}function kE(d,p){return Nh===null&&_h(d),H7(d,p)}function H7(d,p){var y=p._currentValue;if(p={context:p,memoizedValue:y,next:null},Wc===null){if(d===null)throw Error(r(308));Wc=p,d.dependencies={lanes:0,firstContext:p},d.flags|=524288}else Wc=Wc.next=p;return y}var dge=typeof AbortController<"u"?AbortController:function(){var d=[],p=this.signal={aborted:!1,addEventListener:function(y,b){d.push(b)}};this.abort=function(){p.aborted=!0,d.forEach(function(y){return y()})}},fge=t.unstable_scheduleCallback,hge=t.unstable_NormalPriority,si={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function N_(){return{controller:new dge,data:new Map,refCount:0}}function gv(d){d.refCount--,d.refCount===0&&fge(hge,function(){d.controller.abort()})}var yv=null,__=0,r0=0,i0=null;function pge(d,p){if(yv===null){var y=yv=[];__=0,r0=RI(),i0={status:"pending",value:void 0,then:function(b){y.push(b)}}}return __++,p.then(V7,V7),p}function V7(){if(--__===0&&yv!==null){i0!==null&&(i0.status="fulfilled");var d=yv;yv=null,r0=0,i0=null;for(var p=0;p<d.length;p++)(0,d[p])()}}function mge(d,p){var y=[],b={status:"pending",value:null,reason:null,then:function(P){y.push(P)}};return d.then(function(){b.status="fulfilled",b.value=p;for(var P=0;P<y.length;P++)(0,y[P])(p)},function(P){for(b.status="rejected",b.reason=P,P=0;P<y.length;P++)(0,y[P])(void 0)}),b}var q7=M.S;M.S=function(d,p){NF=At(),typeof p=="object"&&p!==null&&typeof p.then=="function"&&pge(d,p),q7!==null&&q7(d,p)};var Ih=q(null);function I_(){var d=Ih.current;return d!==null?d:or.pooledCache}function CE(d,p){p===null?_(Ih,Ih.current):_(Ih,p.pool)}function G7(){var d=I_();return d===null?null:{parent:si._currentValue,pool:d}}var s0=Error(r(460)),P_=Error(r(474)),NE=Error(r(542)),_E={then:function(){}};function K7(d){return d=d.status,d==="fulfilled"||d==="rejected"}function W7(d,p,y){switch(y=d[y],y===void 0?d.push(p):y!==p&&(p.then(Vc,Vc),p=y),p.status){case"fulfilled":return p.value;case"rejected":throw d=p.reason,J7(d),d;default:if(typeof p.status=="string")p.then(Vc,Vc);else{if(d=or,d!==null&&100<d.shellSuspendCounter)throw Error(r(482));d=p,d.status="pending",d.then(function(b){if(p.status==="pending"){var P=p;P.status="fulfilled",P.value=b}},function(b){if(p.status==="pending"){var P=p;P.status="rejected",P.reason=b}})}switch(p.status){case"fulfilled":return p.value;case"rejected":throw d=p.reason,J7(d),d}throw Rh=p,s0}}function Ph(d){try{var p=d._init;return p(d._payload)}catch(y){throw y!==null&&typeof y=="object"&&typeof y.then=="function"?(Rh=y,s0):y}}var Rh=null;function Y7(){if(Rh===null)throw Error(r(459));var d=Rh;return Rh=null,d}function J7(d){if(d===s0||d===NE)throw Error(r(483))}var o0=null,xv=0;function IE(d){var p=xv;return xv+=1,o0===null&&(o0=[]),W7(o0,d,p)}function vv(d,p){p=p.props.ref,d.ref=p!==void 0?p:null}function PE(d,p){throw p.$$typeof===m?Error(r(525)):(d=Object.prototype.toString.call(p),Error(r(31,d==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":d)))}function X7(d){function p(_e,Ae){if(d){var De=_e.deletions;De===null?(_e.deletions=[Ae],_e.flags|=16):De.push(Ae)}}function y(_e,Ae){if(!d)return null;for(;Ae!==null;)p(_e,Ae),Ae=Ae.sibling;return null}function b(_e){for(var Ae=new Map;_e!==null;)_e.key!==null?Ae.set(_e.key,_e):Ae.set(_e.index,_e),_e=_e.sibling;return Ae}function P(_e,Ae){return _e=Gc(_e,Ae),_e.index=0,_e.sibling=null,_e}function L(_e,Ae,De){return _e.index=De,d?(De=_e.alternate,De!==null?(De=De.index,De<Ae?(_e.flags|=67108866,Ae):De):(_e.flags|=67108866,Ae)):(_e.flags|=1048576,Ae)}function ne(_e){return d&&_e.alternate===null&&(_e.flags|=67108866),_e}function de(_e,Ae,De,Je){return Ae===null||Ae.tag!==6?(Ae=v_(De,_e.mode,Je),Ae.return=_e,Ae):(Ae=P(Ae,De),Ae.return=_e,Ae)}function we(_e,Ae,De,Je){var jt=De.type;return jt===v?qe(_e,Ae,De.props.children,Je,De.key):Ae!==null&&(Ae.elementType===jt||typeof jt=="object"&&jt!==null&&jt.$$typeof===V&&Ph(jt)===Ae.type)?(Ae=P(Ae,De.props),vv(Ae,De),Ae.return=_e,Ae):(Ae=SE(De.type,De.key,De.props,null,_e.mode,Je),vv(Ae,De),Ae.return=_e,Ae)}function Le(_e,Ae,De,Je){return Ae===null||Ae.tag!==4||Ae.stateNode.containerInfo!==De.containerInfo||Ae.stateNode.implementation!==De.implementation?(Ae=b_(De,_e.mode,Je),Ae.return=_e,Ae):(Ae=P(Ae,De.children||[]),Ae.return=_e,Ae)}function qe(_e,Ae,De,Je,jt){return Ae===null||Ae.tag!==7?(Ae=kh(De,_e.mode,Je,jt),Ae.return=_e,Ae):(Ae=P(Ae,De),Ae.return=_e,Ae)}function Qe(_e,Ae,De){if(typeof Ae=="string"&&Ae!==""||typeof Ae=="number"||typeof Ae=="bigint")return Ae=v_(""+Ae,_e.mode,De),Ae.return=_e,Ae;if(typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case g:return De=SE(Ae.type,Ae.key,Ae.props,null,_e.mode,De),vv(De,Ae),De.return=_e,De;case x:return Ae=b_(Ae,_e.mode,De),Ae.return=_e,Ae;case V:return Ae=Ph(Ae),Qe(_e,Ae,De)}if(I(Ae)||H(Ae))return Ae=kh(Ae,_e.mode,De,null),Ae.return=_e,Ae;if(typeof Ae.then=="function")return Qe(_e,IE(Ae),De);if(Ae.$$typeof===k)return Qe(_e,kE(_e,Ae),De);PE(_e,Ae)}return null}function Ue(_e,Ae,De,Je){var jt=Ae!==null?Ae.key:null;if(typeof De=="string"&&De!==""||typeof De=="number"||typeof De=="bigint")return jt!==null?null:de(_e,Ae,""+De,Je);if(typeof De=="object"&&De!==null){switch(De.$$typeof){case g:return De.key===jt?we(_e,Ae,De,Je):null;case x:return De.key===jt?Le(_e,Ae,De,Je):null;case V:return De=Ph(De),Ue(_e,Ae,De,Je)}if(I(De)||H(De))return jt!==null?null:qe(_e,Ae,De,Je,null);if(typeof De.then=="function")return Ue(_e,Ae,IE(De),Je);if(De.$$typeof===k)return Ue(_e,Ae,kE(_e,De),Je);PE(_e,De)}return null}function He(_e,Ae,De,Je,jt){if(typeof Je=="string"&&Je!==""||typeof Je=="number"||typeof Je=="bigint")return _e=_e.get(De)||null,de(Ae,_e,""+Je,jt);if(typeof Je=="object"&&Je!==null){switch(Je.$$typeof){case g:return _e=_e.get(Je.key===null?De:Je.key)||null,we(Ae,_e,Je,jt);case x:return _e=_e.get(Je.key===null?De:Je.key)||null,Le(Ae,_e,Je,jt);case V:return Je=Ph(Je),He(_e,Ae,De,Je,jt)}if(I(Je)||H(Je))return _e=_e.get(De)||null,qe(Ae,_e,Je,jt,null);if(typeof Je.then=="function")return He(_e,Ae,De,IE(Je),jt);if(Je.$$typeof===k)return He(_e,Ae,De,kE(Ae,Je),jt);PE(Ae,Je)}return null}function Nt(_e,Ae,De,Je){for(var jt=null,Dn=null,Ot=Ae,dn=Ae=0,kn=null;Ot!==null&&dn<De.length;dn++){Ot.index>dn?(kn=Ot,Ot=null):kn=Ot.sibling;var Ln=Ue(_e,Ot,De[dn],Je);if(Ln===null){Ot===null&&(Ot=kn);break}d&&Ot&&Ln.alternate===null&&p(_e,Ot),Ae=L(Ln,Ae,dn),Dn===null?jt=Ln:Dn.sibling=Ln,Dn=Ln,Ot=kn}if(dn===De.length)return y(_e,Ot),Cn&&Kc(_e,dn),jt;if(Ot===null){for(;dn<De.length;dn++)Ot=Qe(_e,De[dn],Je),Ot!==null&&(Ae=L(Ot,Ae,dn),Dn===null?jt=Ot:Dn.sibling=Ot,Dn=Ot);return Cn&&Kc(_e,dn),jt}for(Ot=b(Ot);dn<De.length;dn++)kn=He(Ot,_e,dn,De[dn],Je),kn!==null&&(d&&kn.alternate!==null&&Ot.delete(kn.key===null?dn:kn.key),Ae=L(kn,Ae,dn),Dn===null?jt=kn:Dn.sibling=kn,Dn=kn);return d&&Ot.forEach(function(nf){return p(_e,nf)}),Cn&&Kc(_e,dn),jt}function Gt(_e,Ae,De,Je){if(De==null)throw Error(r(151));for(var jt=null,Dn=null,Ot=Ae,dn=Ae=0,kn=null,Ln=De.next();Ot!==null&&!Ln.done;dn++,Ln=De.next()){Ot.index>dn?(kn=Ot,Ot=null):kn=Ot.sibling;var nf=Ue(_e,Ot,Ln.value,Je);if(nf===null){Ot===null&&(Ot=kn);break}d&&Ot&&nf.alternate===null&&p(_e,Ot),Ae=L(nf,Ae,dn),Dn===null?jt=nf:Dn.sibling=nf,Dn=nf,Ot=kn}if(Ln.done)return y(_e,Ot),Cn&&Kc(_e,dn),jt;if(Ot===null){for(;!Ln.done;dn++,Ln=De.next())Ln=Qe(_e,Ln.value,Je),Ln!==null&&(Ae=L(Ln,Ae,dn),Dn===null?jt=Ln:Dn.sibling=Ln,Dn=Ln);return Cn&&Kc(_e,dn),jt}for(Ot=b(Ot);!Ln.done;dn++,Ln=De.next())Ln=He(Ot,_e,dn,Ln.value,Je),Ln!==null&&(d&&Ln.alternate!==null&&Ot.delete(Ln.key===null?dn:Ln.key),Ae=L(Ln,Ae,dn),Dn===null?jt=Ln:Dn.sibling=Ln,Dn=Ln);return d&&Ot.forEach(function(kye){return p(_e,kye)}),Cn&&Kc(_e,dn),jt}function tr(_e,Ae,De,Je){if(typeof De=="object"&&De!==null&&De.type===v&&De.key===null&&(De=De.props.children),typeof De=="object"&&De!==null){switch(De.$$typeof){case g:e:{for(var jt=De.key;Ae!==null;){if(Ae.key===jt){if(jt=De.type,jt===v){if(Ae.tag===7){y(_e,Ae.sibling),Je=P(Ae,De.props.children),Je.return=_e,_e=Je;break e}}else if(Ae.elementType===jt||typeof jt=="object"&&jt!==null&&jt.$$typeof===V&&Ph(jt)===Ae.type){y(_e,Ae.sibling),Je=P(Ae,De.props),vv(Je,De),Je.return=_e,_e=Je;break e}y(_e,Ae);break}else p(_e,Ae);Ae=Ae.sibling}De.type===v?(Je=kh(De.props.children,_e.mode,Je,De.key),Je.return=_e,_e=Je):(Je=SE(De.type,De.key,De.props,null,_e.mode,Je),vv(Je,De),Je.return=_e,_e=Je)}return ne(_e);case x:e:{for(jt=De.key;Ae!==null;){if(Ae.key===jt)if(Ae.tag===4&&Ae.stateNode.containerInfo===De.containerInfo&&Ae.stateNode.implementation===De.implementation){y(_e,Ae.sibling),Je=P(Ae,De.children||[]),Je.return=_e,_e=Je;break e}else{y(_e,Ae);break}else p(_e,Ae);Ae=Ae.sibling}Je=b_(De,_e.mode,Je),Je.return=_e,_e=Je}return ne(_e);case V:return De=Ph(De),tr(_e,Ae,De,Je)}if(I(De))return Nt(_e,Ae,De,Je);if(H(De)){if(jt=H(De),typeof jt!="function")throw Error(r(150));return De=jt.call(De),Gt(_e,Ae,De,Je)}if(typeof De.then=="function")return tr(_e,Ae,IE(De),Je);if(De.$$typeof===k)return tr(_e,Ae,kE(_e,De),Je);PE(_e,De)}return typeof De=="string"&&De!==""||typeof De=="number"||typeof De=="bigint"?(De=""+De,Ae!==null&&Ae.tag===6?(y(_e,Ae.sibling),Je=P(Ae,De),Je.return=_e,_e=Je):(y(_e,Ae),Je=v_(De,_e.mode,Je),Je.return=_e,_e=Je),ne(_e)):y(_e,Ae)}return function(_e,Ae,De,Je){try{xv=0;var jt=tr(_e,Ae,De,Je);return o0=null,jt}catch(Ot){if(Ot===s0||Ot===NE)throw Ot;var Dn=So(29,Ot,null,_e.mode);return Dn.lanes=Je,Dn.return=_e,Dn}finally{}}}var Oh=X7(!0),Q7=X7(!1),Ud=!1;function R_(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function O_(d,p){d=d.updateQueue,p.updateQueue===d&&(p.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,callbacks:null})}function Fd(d){return{lane:d,tag:0,payload:null,callback:null,next:null}}function $d(d,p,y){var b=d.updateQueue;if(b===null)return null;if(b=b.shared,(zn&2)!==0){var P=b.pending;return P===null?p.next=p:(p.next=P.next,P.next=p),b.pending=p,p=EE(d),D7(d,null,y),p}return wE(d,b,p,y),EE(d)}function bv(d,p,y){if(p=p.updateQueue,p!==null&&(p=p.shared,(y&4194048)!==0)){var b=p.lanes;b&=d.pendingLanes,y|=b,p.lanes=y,Te(d,y)}}function M_(d,p){var y=d.updateQueue,b=d.alternate;if(b!==null&&(b=b.updateQueue,y===b)){var P=null,L=null;if(y=y.firstBaseUpdate,y!==null){do{var ne={lane:y.lane,tag:y.tag,payload:y.payload,callback:null,next:null};L===null?P=L=ne:L=L.next=ne,y=y.next}while(y!==null);L===null?P=L=p:L=L.next=p}else P=L=p;y={baseState:b.baseState,firstBaseUpdate:P,lastBaseUpdate:L,shared:b.shared,callbacks:b.callbacks},d.updateQueue=y;return}d=y.lastBaseUpdate,d===null?y.firstBaseUpdate=p:d.next=p,y.lastBaseUpdate=p}var D_=!1;function wv(){if(D_){var d=i0;if(d!==null)throw d}}function Ev(d,p,y,b){D_=!1;var P=d.updateQueue;Ud=!1;var L=P.firstBaseUpdate,ne=P.lastBaseUpdate,de=P.shared.pending;if(de!==null){P.shared.pending=null;var we=de,Le=we.next;we.next=null,ne===null?L=Le:ne.next=Le,ne=we;var qe=d.alternate;qe!==null&&(qe=qe.updateQueue,de=qe.lastBaseUpdate,de!==ne&&(de===null?qe.firstBaseUpdate=Le:de.next=Le,qe.lastBaseUpdate=we))}if(L!==null){var Qe=P.baseState;ne=0,qe=Le=we=null,de=L;do{var Ue=de.lane&-536870913,He=Ue!==de.lane;if(He?(Tn&Ue)===Ue:(b&Ue)===Ue){Ue!==0&&Ue===r0&&(D_=!0),qe!==null&&(qe=qe.next={lane:0,tag:de.tag,payload:de.payload,callback:null,next:null});e:{var Nt=d,Gt=de;Ue=p;var tr=y;switch(Gt.tag){case 1:if(Nt=Gt.payload,typeof Nt=="function"){Qe=Nt.call(tr,Qe,Ue);break e}Qe=Nt;break e;case 3:Nt.flags=Nt.flags&-65537|128;case 0:if(Nt=Gt.payload,Ue=typeof Nt=="function"?Nt.call(tr,Qe,Ue):Nt,Ue==null)break e;Qe=f({},Qe,Ue);break e;case 2:Ud=!0}}Ue=de.callback,Ue!==null&&(d.flags|=64,He&&(d.flags|=8192),He=P.callbacks,He===null?P.callbacks=[Ue]:He.push(Ue))}else He={lane:Ue,tag:de.tag,payload:de.payload,callback:de.callback,next:null},qe===null?(Le=qe=He,we=Qe):qe=qe.next=He,ne|=Ue;if(de=de.next,de===null){if(de=P.shared.pending,de===null)break;He=de,de=He.next,He.next=null,P.lastBaseUpdate=He,P.shared.pending=null}}while(!0);qe===null&&(we=Qe),P.baseState=we,P.firstBaseUpdate=Le,P.lastBaseUpdate=qe,L===null&&(P.shared.lanes=0),Gd|=ne,d.lanes=ne,d.memoizedState=Qe}}function Z7(d,p){if(typeof d!="function")throw Error(r(191,d));d.call(p)}function eU(d,p){var y=d.callbacks;if(y!==null)for(d.callbacks=null,d=0;d<y.length;d++)Z7(y[d],p)}var a0=q(null),RE=q(0);function tU(d,p){d=iu,_(RE,d),_(a0,p),iu=d|p.baseLanes}function L_(){_(RE,iu),_(a0,a0.current)}function B_(){iu=RE.current,D(a0),D(RE)}var Ao=q(null),aa=null;function zd(d){var p=d.alternate;_(Jr,Jr.current&1),_(Ao,d),aa===null&&(p===null||a0.current!==null||p.memoizedState!==null)&&(aa=d)}function j_(d){_(Jr,Jr.current),_(Ao,d),aa===null&&(aa=d)}function nU(d){d.tag===22?(_(Jr,Jr.current),_(Ao,d),aa===null&&(aa=d)):Hd()}function Hd(){_(Jr,Jr.current),_(Ao,Ao.current)}function To(d){D(Ao),aa===d&&(aa=null),D(Jr)}var Jr=q(0);function OE(d){for(var p=d;p!==null;){if(p.tag===13){var y=p.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||VI(y)||qI(y)))return p}else if(p.tag===19&&(p.memoizedProps.revealOrder==="forwards"||p.memoizedProps.revealOrder==="backwards"||p.memoizedProps.revealOrder==="unstable_legacy-backwards"||p.memoizedProps.revealOrder==="together")){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===d)break;for(;p.sibling===null;){if(p.return===null||p.return===d)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var Jc=0,an=null,Zn=null,oi=null,ME=!1,l0=!1,Mh=!1,DE=0,Sv=0,c0=null,gge=0;function Ur(){throw Error(r(321))}function U_(d,p){if(p===null)return!1;for(var y=0;y<p.length&&y<d.length;y++)if(!Eo(d[y],p[y]))return!1;return!0}function F_(d,p,y,b,P,L){return Jc=L,an=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,M.H=d===null||d.memoizedState===null?UU:tI,Mh=!1,L=y(b,P),Mh=!1,l0&&(L=iU(p,y,b,P)),rU(d),L}function rU(d){M.H=kv;var p=Zn!==null&&Zn.next!==null;if(Jc=0,oi=Zn=an=null,ME=!1,Sv=0,c0=null,p)throw Error(r(300));d===null||ai||(d=d.dependencies,d!==null&&TE(d)&&(ai=!0))}function iU(d,p,y,b){an=d;var P=0;do{if(l0&&(c0=null),Sv=0,l0=!1,25<=P)throw Error(r(301));if(P+=1,oi=Zn=null,d.updateQueue!=null){var L=d.updateQueue;L.lastEffect=null,L.events=null,L.stores=null,L.memoCache!=null&&(L.memoCache.index=0)}M.H=FU,L=p(y,b)}while(l0);return L}function yge(){var d=M.H,p=d.useState()[0];return p=typeof p.then=="function"?Av(p):p,d=d.useState()[0],(Zn!==null?Zn.memoizedState:null)!==d&&(an.flags|=1024),p}function $_(){var d=DE!==0;return DE=0,d}function z_(d,p,y){p.updateQueue=d.updateQueue,p.flags&=-2053,d.lanes&=~y}function H_(d){if(ME){for(d=d.memoizedState;d!==null;){var p=d.queue;p!==null&&(p.pending=null),d=d.next}ME=!1}Jc=0,oi=Zn=an=null,l0=!1,Sv=DE=0,c0=null}function Os(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return oi===null?an.memoizedState=oi=d:oi=oi.next=d,oi}function Xr(){if(Zn===null){var d=an.alternate;d=d!==null?d.memoizedState:null}else d=Zn.next;var p=oi===null?an.memoizedState:oi.next;if(p!==null)oi=p,Zn=d;else{if(d===null)throw an.alternate===null?Error(r(467)):Error(r(310));Zn=d,d={memoizedState:Zn.memoizedState,baseState:Zn.baseState,baseQueue:Zn.baseQueue,queue:Zn.queue,next:null},oi===null?an.memoizedState=oi=d:oi=oi.next=d}return oi}function LE(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Av(d){var p=Sv;return Sv+=1,c0===null&&(c0=[]),d=W7(c0,d,p),p=an,(oi===null?p.memoizedState:oi.next)===null&&(p=p.alternate,M.H=p===null||p.memoizedState===null?UU:tI),d}function BE(d){if(d!==null&&typeof d=="object"){if(typeof d.then=="function")return Av(d);if(d.$$typeof===k)return qi(d)}throw Error(r(438,String(d)))}function V_(d){var p=null,y=an.updateQueue;if(y!==null&&(p=y.memoCache),p==null){var b=an.alternate;b!==null&&(b=b.updateQueue,b!==null&&(b=b.memoCache,b!=null&&(p={data:b.data.map(function(P){return P.slice()}),index:0})))}if(p==null&&(p={data:[],index:0}),y===null&&(y=LE(),an.updateQueue=y),y.memoCache=p,y=p.data[p.index],y===void 0)for(y=p.data[p.index]=Array(d),b=0;b<d;b++)y[b]=$;return p.index++,y}function Xc(d,p){return typeof p=="function"?p(d):p}function jE(d){var p=Xr();return q_(p,Zn,d)}function q_(d,p,y){var b=d.queue;if(b===null)throw Error(r(311));b.lastRenderedReducer=y;var P=d.baseQueue,L=b.pending;if(L!==null){if(P!==null){var ne=P.next;P.next=L.next,L.next=ne}p.baseQueue=P=L,b.pending=null}if(L=d.baseState,P===null)d.memoizedState=L;else{p=P.next;var de=ne=null,we=null,Le=p,qe=!1;do{var Qe=Le.lane&-536870913;if(Qe!==Le.lane?(Tn&Qe)===Qe:(Jc&Qe)===Qe){var Ue=Le.revertLane;if(Ue===0)we!==null&&(we=we.next={lane:0,revertLane:0,gesture:null,action:Le.action,hasEagerState:Le.hasEagerState,eagerState:Le.eagerState,next:null}),Qe===r0&&(qe=!0);else if((Jc&Ue)===Ue){Le=Le.next,Ue===r0&&(qe=!0);continue}else Qe={lane:0,revertLane:Le.revertLane,gesture:null,action:Le.action,hasEagerState:Le.hasEagerState,eagerState:Le.eagerState,next:null},we===null?(de=we=Qe,ne=L):we=we.next=Qe,an.lanes|=Ue,Gd|=Ue;Qe=Le.action,Mh&&y(L,Qe),L=Le.hasEagerState?Le.eagerState:y(L,Qe)}else Ue={lane:Qe,revertLane:Le.revertLane,gesture:Le.gesture,action:Le.action,hasEagerState:Le.hasEagerState,eagerState:Le.eagerState,next:null},we===null?(de=we=Ue,ne=L):we=we.next=Ue,an.lanes|=Qe,Gd|=Qe;Le=Le.next}while(Le!==null&&Le!==p);if(we===null?ne=L:we.next=de,!Eo(L,d.memoizedState)&&(ai=!0,qe&&(y=i0,y!==null)))throw y;d.memoizedState=L,d.baseState=ne,d.baseQueue=we,b.lastRenderedState=L}return P===null&&(b.lanes=0),[d.memoizedState,b.dispatch]}function G_(d){var p=Xr(),y=p.queue;if(y===null)throw Error(r(311));y.lastRenderedReducer=d;var b=y.dispatch,P=y.pending,L=p.memoizedState;if(P!==null){y.pending=null;var ne=P=P.next;do L=d(L,ne.action),ne=ne.next;while(ne!==P);Eo(L,p.memoizedState)||(ai=!0),p.memoizedState=L,p.baseQueue===null&&(p.baseState=L),y.lastRenderedState=L}return[L,b]}function sU(d,p,y){var b=an,P=Xr(),L=Cn;if(L){if(y===void 0)throw Error(r(407));y=y()}else y=p();var ne=!Eo((Zn||P).memoizedState,y);if(ne&&(P.memoizedState=y,ai=!0),P=P.queue,Y_(lU.bind(null,b,P,d),[d]),P.getSnapshot!==p||ne||oi!==null&&oi.memoizedState.tag&1){if(b.flags|=2048,u0(9,{destroy:void 0},aU.bind(null,b,P,y,p),null),or===null)throw Error(r(349));L||(Jc&127)!==0||oU(b,p,y)}return y}function oU(d,p,y){d.flags|=16384,d={getSnapshot:p,value:y},p=an.updateQueue,p===null?(p=LE(),an.updateQueue=p,p.stores=[d]):(y=p.stores,y===null?p.stores=[d]:y.push(d))}function aU(d,p,y,b){p.value=y,p.getSnapshot=b,cU(p)&&uU(d)}function lU(d,p,y){return y(function(){cU(p)&&uU(d)})}function cU(d){var p=d.getSnapshot;d=d.value;try{var y=p();return!Eo(d,y)}catch{return!0}}function uU(d){var p=Th(d,2);p!==null&&ro(p,d,2)}function K_(d){var p=Os();if(typeof d=="function"){var y=d;if(d=y(),Mh){he(!0);try{y()}finally{he(!1)}}}return p.memoizedState=p.baseState=d,p.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xc,lastRenderedState:d},p}function dU(d,p,y,b){return d.baseState=y,q_(d,Zn,typeof b=="function"?b:Xc)}function xge(d,p,y,b,P){if($E(d))throw Error(r(485));if(d=p.action,d!==null){var L={payload:P,action:d,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ne){L.listeners.push(ne)}};M.T!==null?y(!0):L.isTransition=!1,b(L),y=p.pending,y===null?(L.next=p.pending=L,fU(p,L)):(L.next=y.next,p.pending=y.next=L)}}function fU(d,p){var y=p.action,b=p.payload,P=d.state;if(p.isTransition){var L=M.T,ne={};M.T=ne;try{var de=y(P,b),we=M.S;we!==null&&we(ne,de),hU(d,p,de)}catch(Le){W_(d,p,Le)}finally{L!==null&&ne.types!==null&&(L.types=ne.types),M.T=L}}else try{L=y(P,b),hU(d,p,L)}catch(Le){W_(d,p,Le)}}function hU(d,p,y){y!==null&&typeof y=="object"&&typeof y.then=="function"?y.then(function(b){pU(d,p,b)},function(b){return W_(d,p,b)}):pU(d,p,y)}function pU(d,p,y){p.status="fulfilled",p.value=y,mU(p),d.state=y,p=d.pending,p!==null&&(y=p.next,y===p?d.pending=null:(y=y.next,p.next=y,fU(d,y)))}function W_(d,p,y){var b=d.pending;if(d.pending=null,b!==null){b=b.next;do p.status="rejected",p.reason=y,mU(p),p=p.next;while(p!==b)}d.action=null}function mU(d){d=d.listeners;for(var p=0;p<d.length;p++)(0,d[p])()}function gU(d,p){return p}function yU(d,p){if(Cn){var y=or.formState;if(y!==null){e:{var b=an;if(Cn){if(vr){t:{for(var P=vr,L=oa;P.nodeType!==8;){if(!L){P=null;break t}if(P=la(P.nextSibling),P===null){P=null;break t}}L=P.data,P=L==="F!"||L==="F"?P:null}if(P){vr=la(P.nextSibling),b=P.data==="F!";break e}}Bd(b)}b=!1}b&&(p=y[0])}}return y=Os(),y.memoizedState=y.baseState=p,b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gU,lastRenderedState:p},y.queue=b,y=LU.bind(null,an,b),b.dispatch=y,b=K_(!1),L=eI.bind(null,an,!1,b.queue),b=Os(),P={state:p,dispatch:null,action:d,pending:null},b.queue=P,y=xge.bind(null,an,P,L,y),P.dispatch=y,b.memoizedState=d,[p,y,!1]}function xU(d){var p=Xr();return vU(p,Zn,d)}function vU(d,p,y){if(p=q_(d,p,gU)[0],d=jE(Xc)[0],typeof p=="object"&&p!==null&&typeof p.then=="function")try{var b=Av(p)}catch(ne){throw ne===s0?NE:ne}else b=p;p=Xr();var P=p.queue,L=P.dispatch;return y!==p.memoizedState&&(an.flags|=2048,u0(9,{destroy:void 0},vge.bind(null,P,y),null)),[b,L,d]}function vge(d,p){d.action=p}function bU(d){var p=Xr(),y=Zn;if(y!==null)return vU(p,y,d);Xr(),p=p.memoizedState,y=Xr();var b=y.queue.dispatch;return y.memoizedState=d,[p,b,!1]}function u0(d,p,y,b){return d={tag:d,create:y,deps:b,inst:p,next:null},p=an.updateQueue,p===null&&(p=LE(),an.updateQueue=p),y=p.lastEffect,y===null?p.lastEffect=d.next=d:(b=y.next,y.next=d,d.next=b,p.lastEffect=d),d}function wU(){return Xr().memoizedState}function UE(d,p,y,b){var P=Os();an.flags|=d,P.memoizedState=u0(1|p,{destroy:void 0},y,b===void 0?null:b)}function FE(d,p,y,b){var P=Xr();b=b===void 0?null:b;var L=P.memoizedState.inst;Zn!==null&&b!==null&&U_(b,Zn.memoizedState.deps)?P.memoizedState=u0(p,L,y,b):(an.flags|=d,P.memoizedState=u0(1|p,L,y,b))}function EU(d,p){UE(8390656,8,d,p)}function Y_(d,p){FE(2048,8,d,p)}function bge(d){an.flags|=4;var p=an.updateQueue;if(p===null)p=LE(),an.updateQueue=p,p.events=[d];else{var y=p.events;y===null?p.events=[d]:y.push(d)}}function SU(d){var p=Xr().memoizedState;return bge({ref:p,nextImpl:d}),function(){if((zn&2)!==0)throw Error(r(440));return p.impl.apply(void 0,arguments)}}function AU(d,p){return FE(4,2,d,p)}function TU(d,p){return FE(4,4,d,p)}function kU(d,p){if(typeof p=="function"){d=d();var y=p(d);return function(){typeof y=="function"?y():p(null)}}if(p!=null)return d=d(),p.current=d,function(){p.current=null}}function CU(d,p,y){y=y!=null?y.concat([d]):null,FE(4,4,kU.bind(null,p,d),y)}function J_(){}function NU(d,p){var y=Xr();p=p===void 0?null:p;var b=y.memoizedState;return p!==null&&U_(p,b[1])?b[0]:(y.memoizedState=[d,p],d)}function _U(d,p){var y=Xr();p=p===void 0?null:p;var b=y.memoizedState;if(p!==null&&U_(p,b[1]))return b[0];if(b=d(),Mh){he(!0);try{d()}finally{he(!1)}}return y.memoizedState=[b,p],b}function X_(d,p,y){return y===void 0||(Jc&1073741824)!==0&&(Tn&261930)===0?d.memoizedState=p:(d.memoizedState=y,d=IF(),an.lanes|=d,Gd|=d,y)}function IU(d,p,y,b){return Eo(y,p)?y:a0.current!==null?(d=X_(d,y,b),Eo(d,p)||(ai=!0),d):(Jc&42)===0||(Jc&1073741824)!==0&&(Tn&261930)===0?(ai=!0,d.memoizedState=y):(d=IF(),an.lanes|=d,Gd|=d,p)}function PU(d,p,y,b,P){var L=z.p;z.p=L!==0&&8>L?L:8;var ne=M.T,de={};M.T=de,eI(d,!1,p,y);try{var we=P(),Le=M.S;if(Le!==null&&Le(de,we),we!==null&&typeof we=="object"&&typeof we.then=="function"){var qe=mge(we,b);Tv(d,p,qe,No(d))}else Tv(d,p,b,No(d))}catch(Qe){Tv(d,p,{then:function(){},status:"rejected",reason:Qe},No())}finally{z.p=L,ne!==null&&de.types!==null&&(ne.types=de.types),M.T=ne}}function wge(){}function Q_(d,p,y,b){if(d.tag!==5)throw Error(r(476));var P=RU(d).queue;PU(d,P,p,G,y===null?wge:function(){return OU(d),y(b)})}function RU(d){var p=d.memoizedState;if(p!==null)return p;p={memoizedState:G,baseState:G,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xc,lastRenderedState:G},next:null};var y={};return p.next={memoizedState:y,baseState:y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xc,lastRenderedState:y},next:null},d.memoizedState=p,d=d.alternate,d!==null&&(d.memoizedState=p),p}function OU(d){var p=RU(d);p.next===null&&(p=d.alternate.memoizedState),Tv(d,p.next.queue,{},No())}function Z_(){return qi(zv)}function MU(){return Xr().memoizedState}function DU(){return Xr().memoizedState}function Ege(d){for(var p=d.return;p!==null;){switch(p.tag){case 24:case 3:var y=No();d=Fd(y);var b=$d(p,d,y);b!==null&&(ro(b,p,y),bv(b,p,y)),p={cache:N_()},d.payload=p;return}p=p.return}}function Sge(d,p,y){var b=No();y={lane:b,revertLane:0,gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null},$E(d)?BU(p,y):(y=y_(d,p,y,b),y!==null&&(ro(y,d,b),jU(y,p,b)))}function LU(d,p,y){var b=No();Tv(d,p,y,b)}function Tv(d,p,y,b){var P={lane:b,revertLane:0,gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null};if($E(d))BU(p,P);else{var L=d.alternate;if(d.lanes===0&&(L===null||L.lanes===0)&&(L=p.lastRenderedReducer,L!==null))try{var ne=p.lastRenderedState,de=L(ne,y);if(P.hasEagerState=!0,P.eagerState=de,Eo(de,ne))return wE(d,p,P,0),or===null&&bE(),!1}catch{}finally{}if(y=y_(d,p,P,b),y!==null)return ro(y,d,b),jU(y,p,b),!0}return!1}function eI(d,p,y,b){if(b={lane:2,revertLane:RI(),gesture:null,action:b,hasEagerState:!1,eagerState:null,next:null},$E(d)){if(p)throw Error(r(479))}else p=y_(d,y,b,2),p!==null&&ro(p,d,2)}function $E(d){var p=d.alternate;return d===an||p!==null&&p===an}function BU(d,p){l0=ME=!0;var y=d.pending;y===null?p.next=p:(p.next=y.next,y.next=p),d.pending=p}function jU(d,p,y){if((y&4194048)!==0){var b=p.lanes;b&=d.pendingLanes,y|=b,p.lanes=y,Te(d,y)}}var kv={readContext:qi,use:BE,useCallback:Ur,useContext:Ur,useEffect:Ur,useImperativeHandle:Ur,useLayoutEffect:Ur,useInsertionEffect:Ur,useMemo:Ur,useReducer:Ur,useRef:Ur,useState:Ur,useDebugValue:Ur,useDeferredValue:Ur,useTransition:Ur,useSyncExternalStore:Ur,useId:Ur,useHostTransitionStatus:Ur,useFormState:Ur,useActionState:Ur,useOptimistic:Ur,useMemoCache:Ur,useCacheRefresh:Ur};kv.useEffectEvent=Ur;var UU={readContext:qi,use:BE,useCallback:function(d,p){return Os().memoizedState=[d,p===void 0?null:p],d},useContext:qi,useEffect:EU,useImperativeHandle:function(d,p,y){y=y!=null?y.concat([d]):null,UE(4194308,4,kU.bind(null,p,d),y)},useLayoutEffect:function(d,p){return UE(4194308,4,d,p)},useInsertionEffect:function(d,p){UE(4,2,d,p)},useMemo:function(d,p){var y=Os();p=p===void 0?null:p;var b=d();if(Mh){he(!0);try{d()}finally{he(!1)}}return y.memoizedState=[b,p],b},useReducer:function(d,p,y){var b=Os();if(y!==void 0){var P=y(p);if(Mh){he(!0);try{y(p)}finally{he(!1)}}}else P=p;return b.memoizedState=b.baseState=P,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:P},b.queue=d,d=d.dispatch=Sge.bind(null,an,d),[b.memoizedState,d]},useRef:function(d){var p=Os();return d={current:d},p.memoizedState=d},useState:function(d){d=K_(d);var p=d.queue,y=LU.bind(null,an,p);return p.dispatch=y,[d.memoizedState,y]},useDebugValue:J_,useDeferredValue:function(d,p){var y=Os();return X_(y,d,p)},useTransition:function(){var d=K_(!1);return d=PU.bind(null,an,d.queue,!0,!1),Os().memoizedState=d,[!1,d]},useSyncExternalStore:function(d,p,y){var b=an,P=Os();if(Cn){if(y===void 0)throw Error(r(407));y=y()}else{if(y=p(),or===null)throw Error(r(349));(Tn&127)!==0||oU(b,p,y)}P.memoizedState=y;var L={value:y,getSnapshot:p};return P.queue=L,EU(lU.bind(null,b,L,d),[d]),b.flags|=2048,u0(9,{destroy:void 0},aU.bind(null,b,L,y,p),null),y},useId:function(){var d=Os(),p=or.identifierPrefix;if(Cn){var y=Ul,b=jl;y=(b&~(1<<32-ye(b)-1)).toString(32)+y,p="_"+p+"R_"+y,y=DE++,0<y&&(p+="H"+y.toString(32)),p+="_"}else y=gge++,p="_"+p+"r_"+y.toString(32)+"_";return d.memoizedState=p},useHostTransitionStatus:Z_,useFormState:yU,useActionState:yU,useOptimistic:function(d){var p=Os();p.memoizedState=p.baseState=d;var y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return p.queue=y,p=eI.bind(null,an,!0,y),y.dispatch=p,[d,p]},useMemoCache:V_,useCacheRefresh:function(){return Os().memoizedState=Ege.bind(null,an)},useEffectEvent:function(d){var p=Os(),y={impl:d};return p.memoizedState=y,function(){if((zn&2)!==0)throw Error(r(440));return y.impl.apply(void 0,arguments)}}},tI={readContext:qi,use:BE,useCallback:NU,useContext:qi,useEffect:Y_,useImperativeHandle:CU,useInsertionEffect:AU,useLayoutEffect:TU,useMemo:_U,useReducer:jE,useRef:wU,useState:function(){return jE(Xc)},useDebugValue:J_,useDeferredValue:function(d,p){var y=Xr();return IU(y,Zn.memoizedState,d,p)},useTransition:function(){var d=jE(Xc)[0],p=Xr().memoizedState;return[typeof d=="boolean"?d:Av(d),p]},useSyncExternalStore:sU,useId:MU,useHostTransitionStatus:Z_,useFormState:xU,useActionState:xU,useOptimistic:function(d,p){var y=Xr();return dU(y,Zn,d,p)},useMemoCache:V_,useCacheRefresh:DU};tI.useEffectEvent=SU;var FU={readContext:qi,use:BE,useCallback:NU,useContext:qi,useEffect:Y_,useImperativeHandle:CU,useInsertionEffect:AU,useLayoutEffect:TU,useMemo:_U,useReducer:G_,useRef:wU,useState:function(){return G_(Xc)},useDebugValue:J_,useDeferredValue:function(d,p){var y=Xr();return Zn===null?X_(y,d,p):IU(y,Zn.memoizedState,d,p)},useTransition:function(){var d=G_(Xc)[0],p=Xr().memoizedState;return[typeof d=="boolean"?d:Av(d),p]},useSyncExternalStore:sU,useId:MU,useHostTransitionStatus:Z_,useFormState:bU,useActionState:bU,useOptimistic:function(d,p){var y=Xr();return Zn!==null?dU(y,Zn,d,p):(y.baseState=d,[d,y.queue.dispatch])},useMemoCache:V_,useCacheRefresh:DU};FU.useEffectEvent=SU;function nI(d,p,y,b){p=d.memoizedState,y=y(b,p),y=y==null?p:f({},p,y),d.memoizedState=y,d.lanes===0&&(d.updateQueue.baseState=y)}var rI={enqueueSetState:function(d,p,y){d=d._reactInternals;var b=No(),P=Fd(b);P.payload=p,y!=null&&(P.callback=y),p=$d(d,P,b),p!==null&&(ro(p,d,b),bv(p,d,b))},enqueueReplaceState:function(d,p,y){d=d._reactInternals;var b=No(),P=Fd(b);P.tag=1,P.payload=p,y!=null&&(P.callback=y),p=$d(d,P,b),p!==null&&(ro(p,d,b),bv(p,d,b))},enqueueForceUpdate:function(d,p){d=d._reactInternals;var y=No(),b=Fd(y);b.tag=2,p!=null&&(b.callback=p),p=$d(d,b,y),p!==null&&(ro(p,d,y),bv(p,d,y))}};function $U(d,p,y,b,P,L,ne){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(b,L,ne):p.prototype&&p.prototype.isPureReactComponent?!fv(y,b)||!fv(P,L):!0}function zU(d,p,y,b){d=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(y,b),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(y,b),p.state!==d&&rI.enqueueReplaceState(p,p.state,null)}function Dh(d,p){var y=p;if("ref"in p){y={};for(var b in p)b!=="ref"&&(y[b]=p[b])}if(d=d.defaultProps){y===p&&(y=f({},y));for(var P in d)y[P]===void 0&&(y[P]=d[P])}return y}function HU(d){vE(d)}function VU(d){console.error(d)}function qU(d){vE(d)}function zE(d,p){try{var y=d.onUncaughtError;y(p.value,{componentStack:p.stack})}catch(b){setTimeout(function(){throw b})}}function GU(d,p,y){try{var b=d.onCaughtError;b(y.value,{componentStack:y.stack,errorBoundary:p.tag===1?p.stateNode:null})}catch(P){setTimeout(function(){throw P})}}function iI(d,p,y){return y=Fd(y),y.tag=3,y.payload={element:null},y.callback=function(){zE(d,p)},y}function KU(d){return d=Fd(d),d.tag=3,d}function WU(d,p,y,b){var P=y.type.getDerivedStateFromError;if(typeof P=="function"){var L=b.value;d.payload=function(){return P(L)},d.callback=function(){GU(p,y,b)}}var ne=y.stateNode;ne!==null&&typeof ne.componentDidCatch=="function"&&(d.callback=function(){GU(p,y,b),typeof P!="function"&&(Kd===null?Kd=new Set([this]):Kd.add(this));var de=b.stack;this.componentDidCatch(b.value,{componentStack:de!==null?de:""})})}function Age(d,p,y,b,P){if(y.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){if(p=y.alternate,p!==null&&n0(p,y,P,!0),y=Ao.current,y!==null){switch(y.tag){case 31:case 13:return aa===null?eS():y.alternate===null&&Fr===0&&(Fr=3),y.flags&=-257,y.flags|=65536,y.lanes=P,b===_E?y.flags|=16384:(p=y.updateQueue,p===null?y.updateQueue=new Set([b]):p.add(b),_I(d,b,P)),!1;case 22:return y.flags|=65536,b===_E?y.flags|=16384:(p=y.updateQueue,p===null?(p={transitions:null,markerInstances:null,retryQueue:new Set([b])},y.updateQueue=p):(y=p.retryQueue,y===null?p.retryQueue=new Set([b]):y.add(b)),_I(d,b,P)),!1}throw Error(r(435,y.tag))}return _I(d,b,P),eS(),!1}if(Cn)return p=Ao.current,p!==null?((p.flags&65536)===0&&(p.flags|=256),p.flags|=65536,p.lanes=P,b!==S_&&(d=Error(r(422),{cause:b}),mv(ra(d,y)))):(b!==S_&&(p=Error(r(423),{cause:b}),mv(ra(p,y))),d=d.current.alternate,d.flags|=65536,P&=-P,d.lanes|=P,b=ra(b,y),P=iI(d.stateNode,b,P),M_(d,P),Fr!==4&&(Fr=2)),!1;var L=Error(r(520),{cause:b});if(L=ra(L,y),Mv===null?Mv=[L]:Mv.push(L),Fr!==4&&(Fr=2),p===null)return!0;b=ra(b,y),y=p;do{switch(y.tag){case 3:return y.flags|=65536,d=P&-P,y.lanes|=d,d=iI(y.stateNode,b,d),M_(y,d),!1;case 1:if(p=y.type,L=y.stateNode,(y.flags&128)===0&&(typeof p.getDerivedStateFromError=="function"||L!==null&&typeof L.componentDidCatch=="function"&&(Kd===null||!Kd.has(L))))return y.flags|=65536,P&=-P,y.lanes|=P,P=KU(P),WU(P,d,y,b),M_(y,P),!1}y=y.return}while(y!==null);return!1}var sI=Error(r(461)),ai=!1;function Gi(d,p,y,b){p.child=d===null?Q7(p,null,y,b):Oh(p,d.child,y,b)}function YU(d,p,y,b,P){y=y.render;var L=p.ref;if("ref"in b){var ne={};for(var de in b)de!=="ref"&&(ne[de]=b[de])}else ne=b;return _h(p),b=F_(d,p,y,ne,L,P),de=$_(),d!==null&&!ai?(z_(d,p,P),Qc(d,p,P)):(Cn&&de&&w_(p),p.flags|=1,Gi(d,p,b,P),p.child)}function JU(d,p,y,b,P){if(d===null){var L=y.type;return typeof L=="function"&&!x_(L)&&L.defaultProps===void 0&&y.compare===null?(p.tag=15,p.type=L,XU(d,p,L,b,P)):(d=SE(y.type,null,b,p,p.mode,P),d.ref=p.ref,d.return=p,p.child=d)}if(L=d.child,!hI(d,P)){var ne=L.memoizedProps;if(y=y.compare,y=y!==null?y:fv,y(ne,b)&&d.ref===p.ref)return Qc(d,p,P)}return p.flags|=1,d=Gc(L,b),d.ref=p.ref,d.return=p,p.child=d}function XU(d,p,y,b,P){if(d!==null){var L=d.memoizedProps;if(fv(L,b)&&d.ref===p.ref)if(ai=!1,p.pendingProps=b=L,hI(d,P))(d.flags&131072)!==0&&(ai=!0);else return p.lanes=d.lanes,Qc(d,p,P)}return oI(d,p,y,b,P)}function QU(d,p,y,b){var P=b.children,L=d!==null?d.memoizedState:null;if(d===null&&p.stateNode===null&&(p.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),b.mode==="hidden"){if((p.flags&128)!==0){if(L=L!==null?L.baseLanes|y:y,d!==null){for(b=p.child=d.child,P=0;b!==null;)P=P|b.lanes|b.childLanes,b=b.sibling;b=P&~L}else b=0,p.child=null;return ZU(d,p,L,y,b)}if((y&536870912)!==0)p.memoizedState={baseLanes:0,cachePool:null},d!==null&&CE(p,L!==null?L.cachePool:null),L!==null?tU(p,L):L_(),nU(p);else return b=p.lanes=536870912,ZU(d,p,L!==null?L.baseLanes|y:y,y,b)}else L!==null?(CE(p,L.cachePool),tU(p,L),Hd(),p.memoizedState=null):(d!==null&&CE(p,null),L_(),Hd());return Gi(d,p,P,y),p.child}function Cv(d,p){return d!==null&&d.tag===22||p.stateNode!==null||(p.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),p.sibling}function ZU(d,p,y,b,P){var L=I_();return L=L===null?null:{parent:si._currentValue,pool:L},p.memoizedState={baseLanes:y,cachePool:L},d!==null&&CE(p,null),L_(),nU(p),d!==null&&n0(d,p,b,!0),p.childLanes=P,null}function HE(d,p){return p=qE({mode:p.mode,children:p.children},d.mode),p.ref=d.ref,d.child=p,p.return=d,p}function eF(d,p,y){return Oh(p,d.child,null,y),d=HE(p,p.pendingProps),d.flags|=2,To(p),p.memoizedState=null,d}function Tge(d,p,y){var b=p.pendingProps,P=(p.flags&128)!==0;if(p.flags&=-129,d===null){if(Cn){if(b.mode==="hidden")return d=HE(p,b),p.lanes=536870912,Cv(null,d);if(j_(p),(d=vr)?(d=f9(d,oa),d=d!==null&&d.data==="&"?d:null,d!==null&&(p.memoizedState={dehydrated:d,treeContext:Dd!==null?{id:jl,overflow:Ul}:null,retryLane:536870912,hydrationErrors:null},y=B7(d),y.return=p,p.child=y,Vi=p,vr=null)):d=null,d===null)throw Bd(p);return p.lanes=536870912,null}return HE(p,b)}var L=d.memoizedState;if(L!==null){var ne=L.dehydrated;if(j_(p),P)if(p.flags&256)p.flags&=-257,p=eF(d,p,y);else if(p.memoizedState!==null)p.child=d.child,p.flags|=128,p=null;else throw Error(r(558));else if(ai||n0(d,p,y,!1),P=(y&d.childLanes)!==0,ai||P){if(b=or,b!==null&&(ne=Re(b,y),ne!==0&&ne!==L.retryLane))throw L.retryLane=ne,Th(d,ne),ro(b,d,ne),sI;eS(),p=eF(d,p,y)}else d=L.treeContext,vr=la(ne.nextSibling),Vi=p,Cn=!0,Ld=null,oa=!1,d!==null&&F7(p,d),p=HE(p,b),p.flags|=4096;return p}return d=Gc(d.child,{mode:b.mode,children:b.children}),d.ref=p.ref,p.child=d,d.return=p,d}function VE(d,p){var y=p.ref;if(y===null)d!==null&&d.ref!==null&&(p.flags|=4194816);else{if(typeof y!="function"&&typeof y!="object")throw Error(r(284));(d===null||d.ref!==y)&&(p.flags|=4194816)}}function oI(d,p,y,b,P){return _h(p),y=F_(d,p,y,b,void 0,P),b=$_(),d!==null&&!ai?(z_(d,p,P),Qc(d,p,P)):(Cn&&b&&w_(p),p.flags|=1,Gi(d,p,y,P),p.child)}function tF(d,p,y,b,P,L){return _h(p),p.updateQueue=null,y=iU(p,b,y,P),rU(d),b=$_(),d!==null&&!ai?(z_(d,p,L),Qc(d,p,L)):(Cn&&b&&w_(p),p.flags|=1,Gi(d,p,y,L),p.child)}function nF(d,p,y,b,P){if(_h(p),p.stateNode===null){var L=Qm,ne=y.contextType;typeof ne=="object"&&ne!==null&&(L=qi(ne)),L=new y(b,L),p.memoizedState=L.state!==null&&L.state!==void 0?L.state:null,L.updater=rI,p.stateNode=L,L._reactInternals=p,L=p.stateNode,L.props=b,L.state=p.memoizedState,L.refs={},R_(p),ne=y.contextType,L.context=typeof ne=="object"&&ne!==null?qi(ne):Qm,L.state=p.memoizedState,ne=y.getDerivedStateFromProps,typeof ne=="function"&&(nI(p,y,ne,b),L.state=p.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof L.getSnapshotBeforeUpdate=="function"||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(ne=L.state,typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount(),ne!==L.state&&rI.enqueueReplaceState(L,L.state,null),Ev(p,b,L,P),wv(),L.state=p.memoizedState),typeof L.componentDidMount=="function"&&(p.flags|=4194308),b=!0}else if(d===null){L=p.stateNode;var de=p.memoizedProps,we=Dh(y,de);L.props=we;var Le=L.context,qe=y.contextType;ne=Qm,typeof qe=="object"&&qe!==null&&(ne=qi(qe));var Qe=y.getDerivedStateFromProps;qe=typeof Qe=="function"||typeof L.getSnapshotBeforeUpdate=="function",de=p.pendingProps!==de,qe||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(de||Le!==ne)&&zU(p,L,b,ne),Ud=!1;var Ue=p.memoizedState;L.state=Ue,Ev(p,b,L,P),wv(),Le=p.memoizedState,de||Ue!==Le||Ud?(typeof Qe=="function"&&(nI(p,y,Qe,b),Le=p.memoizedState),(we=Ud||$U(p,y,we,b,Ue,Le,ne))?(qe||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount()),typeof L.componentDidMount=="function"&&(p.flags|=4194308)):(typeof L.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=b,p.memoizedState=Le),L.props=b,L.state=Le,L.context=ne,b=we):(typeof L.componentDidMount=="function"&&(p.flags|=4194308),b=!1)}else{L=p.stateNode,O_(d,p),ne=p.memoizedProps,qe=Dh(y,ne),L.props=qe,Qe=p.pendingProps,Ue=L.context,Le=y.contextType,we=Qm,typeof Le=="object"&&Le!==null&&(we=qi(Le)),de=y.getDerivedStateFromProps,(Le=typeof de=="function"||typeof L.getSnapshotBeforeUpdate=="function")||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(ne!==Qe||Ue!==we)&&zU(p,L,b,we),Ud=!1,Ue=p.memoizedState,L.state=Ue,Ev(p,b,L,P),wv();var He=p.memoizedState;ne!==Qe||Ue!==He||Ud||d!==null&&d.dependencies!==null&&TE(d.dependencies)?(typeof de=="function"&&(nI(p,y,de,b),He=p.memoizedState),(qe=Ud||$U(p,y,qe,b,Ue,He,we)||d!==null&&d.dependencies!==null&&TE(d.dependencies))?(Le||typeof L.UNSAFE_componentWillUpdate!="function"&&typeof L.componentWillUpdate!="function"||(typeof L.componentWillUpdate=="function"&&L.componentWillUpdate(b,He,we),typeof L.UNSAFE_componentWillUpdate=="function"&&L.UNSAFE_componentWillUpdate(b,He,we)),typeof L.componentDidUpdate=="function"&&(p.flags|=4),typeof L.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof L.componentDidUpdate!="function"||ne===d.memoizedProps&&Ue===d.memoizedState||(p.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||ne===d.memoizedProps&&Ue===d.memoizedState||(p.flags|=1024),p.memoizedProps=b,p.memoizedState=He),L.props=b,L.state=He,L.context=we,b=qe):(typeof L.componentDidUpdate!="function"||ne===d.memoizedProps&&Ue===d.memoizedState||(p.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||ne===d.memoizedProps&&Ue===d.memoizedState||(p.flags|=1024),b=!1)}return L=b,VE(d,p),b=(p.flags&128)!==0,L||b?(L=p.stateNode,y=b&&typeof y.getDerivedStateFromError!="function"?null:L.render(),p.flags|=1,d!==null&&b?(p.child=Oh(p,d.child,null,P),p.child=Oh(p,null,y,P)):Gi(d,p,y,P),p.memoizedState=L.state,d=p.child):d=Qc(d,p,P),d}function rF(d,p,y,b){return Ch(),p.flags|=256,Gi(d,p,y,b),p.child}var aI={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function lI(d){return{baseLanes:d,cachePool:G7()}}function cI(d,p,y){return d=d!==null?d.childLanes&~y:0,p&&(d|=Co),d}function iF(d,p,y){var b=p.pendingProps,P=!1,L=(p.flags&128)!==0,ne;if((ne=L)||(ne=d!==null&&d.memoizedState===null?!1:(Jr.current&2)!==0),ne&&(P=!0,p.flags&=-129),ne=(p.flags&32)!==0,p.flags&=-33,d===null){if(Cn){if(P?zd(p):Hd(),(d=vr)?(d=f9(d,oa),d=d!==null&&d.data!=="&"?d:null,d!==null&&(p.memoizedState={dehydrated:d,treeContext:Dd!==null?{id:jl,overflow:Ul}:null,retryLane:536870912,hydrationErrors:null},y=B7(d),y.return=p,p.child=y,Vi=p,vr=null)):d=null,d===null)throw Bd(p);return qI(d)?p.lanes=32:p.lanes=536870912,null}var de=b.children;return b=b.fallback,P?(Hd(),P=p.mode,de=qE({mode:"hidden",children:de},P),b=kh(b,P,y,null),de.return=p,b.return=p,de.sibling=b,p.child=de,b=p.child,b.memoizedState=lI(y),b.childLanes=cI(d,ne,y),p.memoizedState=aI,Cv(null,b)):(zd(p),uI(p,de))}var we=d.memoizedState;if(we!==null&&(de=we.dehydrated,de!==null)){if(L)p.flags&256?(zd(p),p.flags&=-257,p=dI(d,p,y)):p.memoizedState!==null?(Hd(),p.child=d.child,p.flags|=128,p=null):(Hd(),de=b.fallback,P=p.mode,b=qE({mode:"visible",children:b.children},P),de=kh(de,P,y,null),de.flags|=2,b.return=p,de.return=p,b.sibling=de,p.child=b,Oh(p,d.child,null,y),b=p.child,b.memoizedState=lI(y),b.childLanes=cI(d,ne,y),p.memoizedState=aI,p=Cv(null,b));else if(zd(p),qI(de)){if(ne=de.nextSibling&&de.nextSibling.dataset,ne)var Le=ne.dgst;ne=Le,b=Error(r(419)),b.stack="",b.digest=ne,mv({value:b,source:null,stack:null}),p=dI(d,p,y)}else if(ai||n0(d,p,y,!1),ne=(y&d.childLanes)!==0,ai||ne){if(ne=or,ne!==null&&(b=Re(ne,y),b!==0&&b!==we.retryLane))throw we.retryLane=b,Th(d,b),ro(ne,d,b),sI;VI(de)||eS(),p=dI(d,p,y)}else VI(de)?(p.flags|=192,p.child=d.child,p=null):(d=we.treeContext,vr=la(de.nextSibling),Vi=p,Cn=!0,Ld=null,oa=!1,d!==null&&F7(p,d),p=uI(p,b.children),p.flags|=4096);return p}return P?(Hd(),de=b.fallback,P=p.mode,we=d.child,Le=we.sibling,b=Gc(we,{mode:"hidden",children:b.children}),b.subtreeFlags=we.subtreeFlags&65011712,Le!==null?de=Gc(Le,de):(de=kh(de,P,y,null),de.flags|=2),de.return=p,b.return=p,b.sibling=de,p.child=b,Cv(null,b),b=p.child,de=d.child.memoizedState,de===null?de=lI(y):(P=de.cachePool,P!==null?(we=si._currentValue,P=P.parent!==we?{parent:we,pool:we}:P):P=G7(),de={baseLanes:de.baseLanes|y,cachePool:P}),b.memoizedState=de,b.childLanes=cI(d,ne,y),p.memoizedState=aI,Cv(d.child,b)):(zd(p),y=d.child,d=y.sibling,y=Gc(y,{mode:"visible",children:b.children}),y.return=p,y.sibling=null,d!==null&&(ne=p.deletions,ne===null?(p.deletions=[d],p.flags|=16):ne.push(d)),p.child=y,p.memoizedState=null,y)}function uI(d,p){return p=qE({mode:"visible",children:p},d.mode),p.return=d,d.child=p}function qE(d,p){return d=So(22,d,null,p),d.lanes=0,d}function dI(d,p,y){return Oh(p,d.child,null,y),d=uI(p,p.pendingProps.children),d.flags|=2,p.memoizedState=null,d}function sF(d,p,y){d.lanes|=p;var b=d.alternate;b!==null&&(b.lanes|=p),k_(d.return,p,y)}function fI(d,p,y,b,P,L){var ne=d.memoizedState;ne===null?d.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:b,tail:y,tailMode:P,treeForkCount:L}:(ne.isBackwards=p,ne.rendering=null,ne.renderingStartTime=0,ne.last=b,ne.tail=y,ne.tailMode=P,ne.treeForkCount=L)}function oF(d,p,y){var b=p.pendingProps,P=b.revealOrder,L=b.tail;b=b.children;var ne=Jr.current,de=(ne&2)!==0;if(de?(ne=ne&1|2,p.flags|=128):ne&=1,_(Jr,ne),Gi(d,p,b,y),b=Cn?pv:0,!de&&d!==null&&(d.flags&128)!==0)e:for(d=p.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&sF(d,y,p);else if(d.tag===19)sF(d,y,p);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===p)break e;for(;d.sibling===null;){if(d.return===null||d.return===p)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}switch(P){case"forwards":for(y=p.child,P=null;y!==null;)d=y.alternate,d!==null&&OE(d)===null&&(P=y),y=y.sibling;y=P,y===null?(P=p.child,p.child=null):(P=y.sibling,y.sibling=null),fI(p,!1,P,y,L,b);break;case"backwards":case"unstable_legacy-backwards":for(y=null,P=p.child,p.child=null;P!==null;){if(d=P.alternate,d!==null&&OE(d)===null){p.child=P;break}d=P.sibling,P.sibling=y,y=P,P=d}fI(p,!0,y,null,L,b);break;case"together":fI(p,!1,null,null,void 0,b);break;default:p.memoizedState=null}return p.child}function Qc(d,p,y){if(d!==null&&(p.dependencies=d.dependencies),Gd|=p.lanes,(y&p.childLanes)===0)if(d!==null){if(n0(d,p,y,!1),(y&p.childLanes)===0)return null}else return null;if(d!==null&&p.child!==d.child)throw Error(r(153));if(p.child!==null){for(d=p.child,y=Gc(d,d.pendingProps),p.child=y,y.return=p;d.sibling!==null;)d=d.sibling,y=y.sibling=Gc(d,d.pendingProps),y.return=p;y.sibling=null}return p.child}function hI(d,p){return(d.lanes&p)!==0?!0:(d=d.dependencies,!!(d!==null&&TE(d)))}function kge(d,p,y){switch(p.tag){case 3:Ee(p,p.stateNode.containerInfo),jd(p,si,d.memoizedState.cache),Ch();break;case 27:case 5:me(p);break;case 4:Ee(p,p.stateNode.containerInfo);break;case 10:jd(p,p.type,p.memoizedProps.value);break;case 31:if(p.memoizedState!==null)return p.flags|=128,j_(p),null;break;case 13:var b=p.memoizedState;if(b!==null)return b.dehydrated!==null?(zd(p),p.flags|=128,null):(y&p.child.childLanes)!==0?iF(d,p,y):(zd(p),d=Qc(d,p,y),d!==null?d.sibling:null);zd(p);break;case 19:var P=(d.flags&128)!==0;if(b=(y&p.childLanes)!==0,b||(n0(d,p,y,!1),b=(y&p.childLanes)!==0),P){if(b)return oF(d,p,y);p.flags|=128}if(P=p.memoizedState,P!==null&&(P.rendering=null,P.tail=null,P.lastEffect=null),_(Jr,Jr.current),b)break;return null;case 22:return p.lanes=0,QU(d,p,y,p.pendingProps);case 24:jd(p,si,d.memoizedState.cache)}return Qc(d,p,y)}function aF(d,p,y){if(d!==null)if(d.memoizedProps!==p.pendingProps)ai=!0;else{if(!hI(d,y)&&(p.flags&128)===0)return ai=!1,kge(d,p,y);ai=(d.flags&131072)!==0}else ai=!1,Cn&&(p.flags&1048576)!==0&&U7(p,pv,p.index);switch(p.lanes=0,p.tag){case 16:e:{var b=p.pendingProps;if(d=Ph(p.elementType),p.type=d,typeof d=="function")x_(d)?(b=Dh(d,b),p.tag=1,p=nF(null,p,d,b,y)):(p.tag=0,p=oI(null,p,d,b,y));else{if(d!=null){var P=d.$$typeof;if(P===O){p.tag=11,p=YU(null,p,d,b,y);break e}else if(P===U){p.tag=14,p=JU(null,p,d,b,y);break e}}throw p=A(d)||d,Error(r(306,p,""))}}return p;case 0:return oI(d,p,p.type,p.pendingProps,y);case 1:return b=p.type,P=Dh(b,p.pendingProps),nF(d,p,b,P,y);case 3:e:{if(Ee(p,p.stateNode.containerInfo),d===null)throw Error(r(387));b=p.pendingProps;var L=p.memoizedState;P=L.element,O_(d,p),Ev(p,b,null,y);var ne=p.memoizedState;if(b=ne.cache,jd(p,si,b),b!==L.cache&&C_(p,[si],y,!0),wv(),b=ne.element,L.isDehydrated)if(L={element:b,isDehydrated:!1,cache:ne.cache},p.updateQueue.baseState=L,p.memoizedState=L,p.flags&256){p=rF(d,p,b,y);break e}else if(b!==P){P=ra(Error(r(424)),p),mv(P),p=rF(d,p,b,y);break e}else{switch(d=p.stateNode.containerInfo,d.nodeType){case 9:d=d.body;break;default:d=d.nodeName==="HTML"?d.ownerDocument.body:d}for(vr=la(d.firstChild),Vi=p,Cn=!0,Ld=null,oa=!0,y=Q7(p,null,b,y),p.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling}else{if(Ch(),b===P){p=Qc(d,p,y);break e}Gi(d,p,b,y)}p=p.child}return p;case 26:return VE(d,p),d===null?(y=x9(p.type,null,p.pendingProps,null))?p.memoizedState=y:Cn||(y=p.type,d=p.pendingProps,b=aS(re.current).createElement(y),b[mt]=p,b[ct]=d,Ki(b,y,d),xr(b),p.stateNode=b):p.memoizedState=x9(p.type,d.memoizedProps,p.pendingProps,d.memoizedState),null;case 27:return me(p),d===null&&Cn&&(b=p.stateNode=m9(p.type,p.pendingProps,re.current),Vi=p,oa=!0,P=vr,Xd(p.type)?(GI=P,vr=la(b.firstChild)):vr=P),Gi(d,p,p.pendingProps.children,y),VE(d,p),d===null&&(p.flags|=4194304),p.child;case 5:return d===null&&Cn&&((P=b=vr)&&(b=nye(b,p.type,p.pendingProps,oa),b!==null?(p.stateNode=b,Vi=p,vr=la(b.firstChild),oa=!1,P=!0):P=!1),P||Bd(p)),me(p),P=p.type,L=p.pendingProps,ne=d!==null?d.memoizedProps:null,b=L.children,$I(P,L)?b=null:ne!==null&&$I(P,ne)&&(p.flags|=32),p.memoizedState!==null&&(P=F_(d,p,yge,null,null,y),zv._currentValue=P),VE(d,p),Gi(d,p,b,y),p.child;case 6:return d===null&&Cn&&((d=y=vr)&&(y=rye(y,p.pendingProps,oa),y!==null?(p.stateNode=y,Vi=p,vr=null,d=!0):d=!1),d||Bd(p)),null;case 13:return iF(d,p,y);case 4:return Ee(p,p.stateNode.containerInfo),b=p.pendingProps,d===null?p.child=Oh(p,null,b,y):Gi(d,p,b,y),p.child;case 11:return YU(d,p,p.type,p.pendingProps,y);case 7:return Gi(d,p,p.pendingProps,y),p.child;case 8:return Gi(d,p,p.pendingProps.children,y),p.child;case 12:return Gi(d,p,p.pendingProps.children,y),p.child;case 10:return b=p.pendingProps,jd(p,p.type,b.value),Gi(d,p,b.children,y),p.child;case 9:return P=p.type._context,b=p.pendingProps.children,_h(p),P=qi(P),b=b(P),p.flags|=1,Gi(d,p,b,y),p.child;case 14:return JU(d,p,p.type,p.pendingProps,y);case 15:return XU(d,p,p.type,p.pendingProps,y);case 19:return oF(d,p,y);case 31:return Tge(d,p,y);case 22:return QU(d,p,y,p.pendingProps);case 24:return _h(p),b=qi(si),d===null?(P=I_(),P===null&&(P=or,L=N_(),P.pooledCache=L,L.refCount++,L!==null&&(P.pooledCacheLanes|=y),P=L),p.memoizedState={parent:b,cache:P},R_(p),jd(p,si,P)):((d.lanes&y)!==0&&(O_(d,p),Ev(p,null,null,y),wv()),P=d.memoizedState,L=p.memoizedState,P.parent!==b?(P={parent:b,cache:b},p.memoizedState=P,p.lanes===0&&(p.memoizedState=p.updateQueue.baseState=P),jd(p,si,b)):(b=L.cache,jd(p,si,b),b!==P.cache&&C_(p,[si],y,!0))),Gi(d,p,p.pendingProps.children,y),p.child;case 29:throw p.pendingProps}throw Error(r(156,p.tag))}function Zc(d){d.flags|=4}function pI(d,p,y,b,P){if((p=(d.mode&32)!==0)&&(p=!1),p){if(d.flags|=16777216,(P&335544128)===P)if(d.stateNode.complete)d.flags|=8192;else if(MF())d.flags|=8192;else throw Rh=_E,P_}else d.flags&=-16777217}function lF(d,p){if(p.type!=="stylesheet"||(p.state.loading&4)!==0)d.flags&=-16777217;else if(d.flags|=16777216,!S9(p))if(MF())d.flags|=8192;else throw Rh=_E,P_}function GE(d,p){p!==null&&(d.flags|=4),d.flags&16384&&(p=d.tag!==22?Vn():536870912,d.lanes|=p,p0|=p)}function Nv(d,p){if(!Cn)switch(d.tailMode){case"hidden":p=d.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?d.tail=null:y.sibling=null;break;case"collapsed":y=d.tail;for(var b=null;y!==null;)y.alternate!==null&&(b=y),y=y.sibling;b===null?p||d.tail===null?d.tail=null:d.tail.sibling=null:b.sibling=null}}function br(d){var p=d.alternate!==null&&d.alternate.child===d.child,y=0,b=0;if(p)for(var P=d.child;P!==null;)y|=P.lanes|P.childLanes,b|=P.subtreeFlags&65011712,b|=P.flags&65011712,P.return=d,P=P.sibling;else for(P=d.child;P!==null;)y|=P.lanes|P.childLanes,b|=P.subtreeFlags,b|=P.flags,P.return=d,P=P.sibling;return d.subtreeFlags|=b,d.childLanes=y,p}function Cge(d,p,y){var b=p.pendingProps;switch(E_(p),p.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return br(p),null;case 1:return br(p),null;case 3:return y=p.stateNode,b=null,d!==null&&(b=d.memoizedState.cache),p.memoizedState.cache!==b&&(p.flags|=2048),Yc(si),ue(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(d===null||d.child===null)&&(t0(p)?Zc(p):d===null||d.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,A_())),br(p),null;case 26:var P=p.type,L=p.memoizedState;return d===null?(Zc(p),L!==null?(br(p),lF(p,L)):(br(p),pI(p,P,null,b,y))):L?L!==d.memoizedState?(Zc(p),br(p),lF(p,L)):(br(p),p.flags&=-16777217):(d=d.memoizedProps,d!==b&&Zc(p),br(p),pI(p,P,d,b,y)),null;case 27:if(ce(p),y=re.current,P=p.type,d!==null&&p.stateNode!=null)d.memoizedProps!==b&&Zc(p);else{if(!b){if(p.stateNode===null)throw Error(r(166));return br(p),null}d=W.current,t0(p)?$7(p):(d=m9(P,b,y),p.stateNode=d,Zc(p))}return br(p),null;case 5:if(ce(p),P=p.type,d!==null&&p.stateNode!=null)d.memoizedProps!==b&&Zc(p);else{if(!b){if(p.stateNode===null)throw Error(r(166));return br(p),null}if(L=W.current,t0(p))$7(p);else{var ne=aS(re.current);switch(L){case 1:L=ne.createElementNS("http://www.w3.org/2000/svg",P);break;case 2:L=ne.createElementNS("http://www.w3.org/1998/Math/MathML",P);break;default:switch(P){case"svg":L=ne.createElementNS("http://www.w3.org/2000/svg",P);break;case"math":L=ne.createElementNS("http://www.w3.org/1998/Math/MathML",P);break;case"script":L=ne.createElement("div"),L.innerHTML="<script><\/script>",L=L.removeChild(L.firstChild);break;case"select":L=typeof b.is=="string"?ne.createElement("select",{is:b.is}):ne.createElement("select"),b.multiple?L.multiple=!0:b.size&&(L.size=b.size);break;default:L=typeof b.is=="string"?ne.createElement(P,{is:b.is}):ne.createElement(P)}}L[mt]=p,L[ct]=b;e:for(ne=p.child;ne!==null;){if(ne.tag===5||ne.tag===6)L.appendChild(ne.stateNode);else if(ne.tag!==4&&ne.tag!==27&&ne.child!==null){ne.child.return=ne,ne=ne.child;continue}if(ne===p)break e;for(;ne.sibling===null;){if(ne.return===null||ne.return===p)break e;ne=ne.return}ne.sibling.return=ne.return,ne=ne.sibling}p.stateNode=L;e:switch(Ki(L,P,b),P){case"button":case"input":case"select":case"textarea":b=!!b.autoFocus;break e;case"img":b=!0;break e;default:b=!1}b&&Zc(p)}}return br(p),pI(p,p.type,d===null?null:d.memoizedProps,p.pendingProps,y),null;case 6:if(d&&p.stateNode!=null)d.memoizedProps!==b&&Zc(p);else{if(typeof b!="string"&&p.stateNode===null)throw Error(r(166));if(d=re.current,t0(p)){if(d=p.stateNode,y=p.memoizedProps,b=null,P=Vi,P!==null)switch(P.tag){case 27:case 5:b=P.memoizedProps}d[mt]=p,d=!!(d.nodeValue===y||b!==null&&b.suppressHydrationWarning===!0||i9(d.nodeValue,y)),d||Bd(p,!0)}else d=aS(d).createTextNode(b),d[mt]=p,p.stateNode=d}return br(p),null;case 31:if(y=p.memoizedState,d===null||d.memoizedState!==null){if(b=t0(p),y!==null){if(d===null){if(!b)throw Error(r(318));if(d=p.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(557));d[mt]=p}else Ch(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;br(p),d=!1}else y=A_(),d!==null&&d.memoizedState!==null&&(d.memoizedState.hydrationErrors=y),d=!0;if(!d)return p.flags&256?(To(p),p):(To(p),null);if((p.flags&128)!==0)throw Error(r(558))}return br(p),null;case 13:if(b=p.memoizedState,d===null||d.memoizedState!==null&&d.memoizedState.dehydrated!==null){if(P=t0(p),b!==null&&b.dehydrated!==null){if(d===null){if(!P)throw Error(r(318));if(P=p.memoizedState,P=P!==null?P.dehydrated:null,!P)throw Error(r(317));P[mt]=p}else Ch(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;br(p),P=!1}else P=A_(),d!==null&&d.memoizedState!==null&&(d.memoizedState.hydrationErrors=P),P=!0;if(!P)return p.flags&256?(To(p),p):(To(p),null)}return To(p),(p.flags&128)!==0?(p.lanes=y,p):(y=b!==null,d=d!==null&&d.memoizedState!==null,y&&(b=p.child,P=null,b.alternate!==null&&b.alternate.memoizedState!==null&&b.alternate.memoizedState.cachePool!==null&&(P=b.alternate.memoizedState.cachePool.pool),L=null,b.memoizedState!==null&&b.memoizedState.cachePool!==null&&(L=b.memoizedState.cachePool.pool),L!==P&&(b.flags|=2048)),y!==d&&y&&(p.child.flags|=8192),GE(p,p.updateQueue),br(p),null);case 4:return ue(),d===null&&LI(p.stateNode.containerInfo),br(p),null;case 10:return Yc(p.type),br(p),null;case 19:if(D(Jr),b=p.memoizedState,b===null)return br(p),null;if(P=(p.flags&128)!==0,L=b.rendering,L===null)if(P)Nv(b,!1);else{if(Fr!==0||d!==null&&(d.flags&128)!==0)for(d=p.child;d!==null;){if(L=OE(d),L!==null){for(p.flags|=128,Nv(b,!1),d=L.updateQueue,p.updateQueue=d,GE(p,d),p.subtreeFlags=0,d=y,y=p.child;y!==null;)L7(y,d),y=y.sibling;return _(Jr,Jr.current&1|2),Cn&&Kc(p,b.treeForkCount),p.child}d=d.sibling}b.tail!==null&&At()>XE&&(p.flags|=128,P=!0,Nv(b,!1),p.lanes=4194304)}else{if(!P)if(d=OE(L),d!==null){if(p.flags|=128,P=!0,d=d.updateQueue,p.updateQueue=d,GE(p,d),Nv(b,!0),b.tail===null&&b.tailMode==="hidden"&&!L.alternate&&!Cn)return br(p),null}else 2*At()-b.renderingStartTime>XE&&y!==536870912&&(p.flags|=128,P=!0,Nv(b,!1),p.lanes=4194304);b.isBackwards?(L.sibling=p.child,p.child=L):(d=b.last,d!==null?d.sibling=L:p.child=L,b.last=L)}return b.tail!==null?(d=b.tail,b.rendering=d,b.tail=d.sibling,b.renderingStartTime=At(),d.sibling=null,y=Jr.current,_(Jr,P?y&1|2:y&1),Cn&&Kc(p,b.treeForkCount),d):(br(p),null);case 22:case 23:return To(p),B_(),b=p.memoizedState!==null,d!==null?d.memoizedState!==null!==b&&(p.flags|=8192):b&&(p.flags|=8192),b?(y&536870912)!==0&&(p.flags&128)===0&&(br(p),p.subtreeFlags&6&&(p.flags|=8192)):br(p),y=p.updateQueue,y!==null&&GE(p,y.retryQueue),y=null,d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(y=d.memoizedState.cachePool.pool),b=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(b=p.memoizedState.cachePool.pool),b!==y&&(p.flags|=2048),d!==null&&D(Ih),null;case 24:return y=null,d!==null&&(y=d.memoizedState.cache),p.memoizedState.cache!==y&&(p.flags|=2048),Yc(si),br(p),null;case 25:return null;case 30:return null}throw Error(r(156,p.tag))}function Nge(d,p){switch(E_(p),p.tag){case 1:return d=p.flags,d&65536?(p.flags=d&-65537|128,p):null;case 3:return Yc(si),ue(),d=p.flags,(d&65536)!==0&&(d&128)===0?(p.flags=d&-65537|128,p):null;case 26:case 27:case 5:return ce(p),null;case 31:if(p.memoizedState!==null){if(To(p),p.alternate===null)throw Error(r(340));Ch()}return d=p.flags,d&65536?(p.flags=d&-65537|128,p):null;case 13:if(To(p),d=p.memoizedState,d!==null&&d.dehydrated!==null){if(p.alternate===null)throw Error(r(340));Ch()}return d=p.flags,d&65536?(p.flags=d&-65537|128,p):null;case 19:return D(Jr),null;case 4:return ue(),null;case 10:return Yc(p.type),null;case 22:case 23:return To(p),B_(),d!==null&&D(Ih),d=p.flags,d&65536?(p.flags=d&-65537|128,p):null;case 24:return Yc(si),null;case 25:return null;default:return null}}function cF(d,p){switch(E_(p),p.tag){case 3:Yc(si),ue();break;case 26:case 27:case 5:ce(p);break;case 4:ue();break;case 31:p.memoizedState!==null&&To(p);break;case 13:To(p);break;case 19:D(Jr);break;case 10:Yc(p.type);break;case 22:case 23:To(p),B_(),d!==null&&D(Ih);break;case 24:Yc(si)}}function _v(d,p){try{var y=p.updateQueue,b=y!==null?y.lastEffect:null;if(b!==null){var P=b.next;y=P;do{if((y.tag&d)===d){b=void 0;var L=y.create,ne=y.inst;b=L(),ne.destroy=b}y=y.next}while(y!==P)}}catch(de){Jn(p,p.return,de)}}function Vd(d,p,y){try{var b=p.updateQueue,P=b!==null?b.lastEffect:null;if(P!==null){var L=P.next;b=L;do{if((b.tag&d)===d){var ne=b.inst,de=ne.destroy;if(de!==void 0){ne.destroy=void 0,P=p;var we=y,Le=de;try{Le()}catch(qe){Jn(P,we,qe)}}}b=b.next}while(b!==L)}}catch(qe){Jn(p,p.return,qe)}}function uF(d){var p=d.updateQueue;if(p!==null){var y=d.stateNode;try{eU(p,y)}catch(b){Jn(d,d.return,b)}}}function dF(d,p,y){y.props=Dh(d.type,d.memoizedProps),y.state=d.memoizedState;try{y.componentWillUnmount()}catch(b){Jn(d,p,b)}}function Iv(d,p){try{var y=d.ref;if(y!==null){switch(d.tag){case 26:case 27:case 5:var b=d.stateNode;break;case 30:b=d.stateNode;break;default:b=d.stateNode}typeof y=="function"?d.refCleanup=y(b):y.current=b}}catch(P){Jn(d,p,P)}}function Fl(d,p){var y=d.ref,b=d.refCleanup;if(y!==null)if(typeof b=="function")try{b()}catch(P){Jn(d,p,P)}finally{d.refCleanup=null,d=d.alternate,d!=null&&(d.refCleanup=null)}else if(typeof y=="function")try{y(null)}catch(P){Jn(d,p,P)}else y.current=null}function fF(d){var p=d.type,y=d.memoizedProps,b=d.stateNode;try{e:switch(p){case"button":case"input":case"select":case"textarea":y.autoFocus&&b.focus();break e;case"img":y.src?b.src=y.src:y.srcSet&&(b.srcset=y.srcSet)}}catch(P){Jn(d,d.return,P)}}function mI(d,p,y){try{var b=d.stateNode;Jge(b,d.type,y,p),b[ct]=p}catch(P){Jn(d,d.return,P)}}function hF(d){return d.tag===5||d.tag===3||d.tag===26||d.tag===27&&Xd(d.type)||d.tag===4}function gI(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||hF(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.tag===27&&Xd(d.type)||d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function yI(d,p,y){var b=d.tag;if(b===5||b===6)d=d.stateNode,p?(y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y).insertBefore(d,p):(p=y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y,p.appendChild(d),y=y._reactRootContainer,y!=null||p.onclick!==null||(p.onclick=Vc));else if(b!==4&&(b===27&&Xd(d.type)&&(y=d.stateNode,p=null),d=d.child,d!==null))for(yI(d,p,y),d=d.sibling;d!==null;)yI(d,p,y),d=d.sibling}function KE(d,p,y){var b=d.tag;if(b===5||b===6)d=d.stateNode,p?y.insertBefore(d,p):y.appendChild(d);else if(b!==4&&(b===27&&Xd(d.type)&&(y=d.stateNode),d=d.child,d!==null))for(KE(d,p,y),d=d.sibling;d!==null;)KE(d,p,y),d=d.sibling}function pF(d){var p=d.stateNode,y=d.memoizedProps;try{for(var b=d.type,P=p.attributes;P.length;)p.removeAttributeNode(P[0]);Ki(p,b,y),p[mt]=d,p[ct]=y}catch(L){Jn(d,d.return,L)}}var eu=!1,li=!1,xI=!1,mF=typeof WeakSet=="function"?WeakSet:Set,Ci=null;function _ge(d,p){if(d=d.containerInfo,UI=pS,d=C7(d),d_(d)){if("selectionStart"in d)var y={start:d.selectionStart,end:d.selectionEnd};else e:{y=(y=d.ownerDocument)&&y.defaultView||window;var b=y.getSelection&&y.getSelection();if(b&&b.rangeCount!==0){y=b.anchorNode;var P=b.anchorOffset,L=b.focusNode;b=b.focusOffset;try{y.nodeType,L.nodeType}catch{y=null;break e}var ne=0,de=-1,we=-1,Le=0,qe=0,Qe=d,Ue=null;t:for(;;){for(var He;Qe!==y||P!==0&&Qe.nodeType!==3||(de=ne+P),Qe!==L||b!==0&&Qe.nodeType!==3||(we=ne+b),Qe.nodeType===3&&(ne+=Qe.nodeValue.length),(He=Qe.firstChild)!==null;)Ue=Qe,Qe=He;for(;;){if(Qe===d)break t;if(Ue===y&&++Le===P&&(de=ne),Ue===L&&++qe===b&&(we=ne),(He=Qe.nextSibling)!==null)break;Qe=Ue,Ue=Qe.parentNode}Qe=He}y=de===-1||we===-1?null:{start:de,end:we}}else y=null}y=y||{start:0,end:0}}else y=null;for(FI={focusedElem:d,selectionRange:y},pS=!1,Ci=p;Ci!==null;)if(p=Ci,d=p.child,(p.subtreeFlags&1028)!==0&&d!==null)d.return=p,Ci=d;else for(;Ci!==null;){switch(p=Ci,L=p.alternate,d=p.flags,p.tag){case 0:if((d&4)!==0&&(d=p.updateQueue,d=d!==null?d.events:null,d!==null))for(y=0;y<d.length;y++)P=d[y],P.ref.impl=P.nextImpl;break;case 11:case 15:break;case 1:if((d&1024)!==0&&L!==null){d=void 0,y=p,P=L.memoizedProps,L=L.memoizedState,b=y.stateNode;try{var Nt=Dh(y.type,P);d=b.getSnapshotBeforeUpdate(Nt,L),b.__reactInternalSnapshotBeforeUpdate=d}catch(Gt){Jn(y,y.return,Gt)}}break;case 3:if((d&1024)!==0){if(d=p.stateNode.containerInfo,y=d.nodeType,y===9)HI(d);else if(y===1)switch(d.nodeName){case"HEAD":case"HTML":case"BODY":HI(d);break;default:d.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((d&1024)!==0)throw Error(r(163))}if(d=p.sibling,d!==null){d.return=p.return,Ci=d;break}Ci=p.return}}function gF(d,p,y){var b=y.flags;switch(y.tag){case 0:case 11:case 15:nu(d,y),b&4&&_v(5,y);break;case 1:if(nu(d,y),b&4)if(d=y.stateNode,p===null)try{d.componentDidMount()}catch(ne){Jn(y,y.return,ne)}else{var P=Dh(y.type,p.memoizedProps);p=p.memoizedState;try{d.componentDidUpdate(P,p,d.__reactInternalSnapshotBeforeUpdate)}catch(ne){Jn(y,y.return,ne)}}b&64&&uF(y),b&512&&Iv(y,y.return);break;case 3:if(nu(d,y),b&64&&(d=y.updateQueue,d!==null)){if(p=null,y.child!==null)switch(y.child.tag){case 27:case 5:p=y.child.stateNode;break;case 1:p=y.child.stateNode}try{eU(d,p)}catch(ne){Jn(y,y.return,ne)}}break;case 27:p===null&&b&4&&pF(y);case 26:case 5:nu(d,y),p===null&&b&4&&fF(y),b&512&&Iv(y,y.return);break;case 12:nu(d,y);break;case 31:nu(d,y),b&4&&vF(d,y);break;case 13:nu(d,y),b&4&&bF(d,y),b&64&&(d=y.memoizedState,d!==null&&(d=d.dehydrated,d!==null&&(y=jge.bind(null,y),iye(d,y))));break;case 22:if(b=y.memoizedState!==null||eu,!b){p=p!==null&&p.memoizedState!==null||li,P=eu;var L=li;eu=b,(li=p)&&!L?ru(d,y,(y.subtreeFlags&8772)!==0):nu(d,y),eu=P,li=L}break;case 30:break;default:nu(d,y)}}function yF(d){var p=d.alternate;p!==null&&(d.alternate=null,yF(p)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(p=d.stateNode,p!==null&&Bl(p)),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}var Ar=null,Zs=!1;function tu(d,p,y){for(y=y.child;y!==null;)xF(d,p,y),y=y.sibling}function xF(d,p,y){if(be&&typeof be.onCommitFiberUnmount=="function")try{be.onCommitFiberUnmount(fe,y)}catch{}switch(y.tag){case 26:li||Fl(y,p),tu(d,p,y),y.memoizedState?y.memoizedState.count--:y.stateNode&&(y=y.stateNode,y.parentNode.removeChild(y));break;case 27:li||Fl(y,p);var b=Ar,P=Zs;Xd(y.type)&&(Ar=y.stateNode,Zs=!1),tu(d,p,y),Uv(y.stateNode),Ar=b,Zs=P;break;case 5:li||Fl(y,p);case 6:if(b=Ar,P=Zs,Ar=null,tu(d,p,y),Ar=b,Zs=P,Ar!==null)if(Zs)try{(Ar.nodeType===9?Ar.body:Ar.nodeName==="HTML"?Ar.ownerDocument.body:Ar).removeChild(y.stateNode)}catch(L){Jn(y,p,L)}else try{Ar.removeChild(y.stateNode)}catch(L){Jn(y,p,L)}break;case 18:Ar!==null&&(Zs?(d=Ar,u9(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,y.stateNode),E0(d)):u9(Ar,y.stateNode));break;case 4:b=Ar,P=Zs,Ar=y.stateNode.containerInfo,Zs=!0,tu(d,p,y),Ar=b,Zs=P;break;case 0:case 11:case 14:case 15:Vd(2,y,p),li||Vd(4,y,p),tu(d,p,y);break;case 1:li||(Fl(y,p),b=y.stateNode,typeof b.componentWillUnmount=="function"&&dF(y,p,b)),tu(d,p,y);break;case 21:tu(d,p,y);break;case 22:li=(b=li)||y.memoizedState!==null,tu(d,p,y),li=b;break;default:tu(d,p,y)}}function vF(d,p){if(p.memoizedState===null&&(d=p.alternate,d!==null&&(d=d.memoizedState,d!==null))){d=d.dehydrated;try{E0(d)}catch(y){Jn(p,p.return,y)}}}function bF(d,p){if(p.memoizedState===null&&(d=p.alternate,d!==null&&(d=d.memoizedState,d!==null&&(d=d.dehydrated,d!==null))))try{E0(d)}catch(y){Jn(p,p.return,y)}}function Ige(d){switch(d.tag){case 31:case 13:case 19:var p=d.stateNode;return p===null&&(p=d.stateNode=new mF),p;case 22:return d=d.stateNode,p=d._retryCache,p===null&&(p=d._retryCache=new mF),p;default:throw Error(r(435,d.tag))}}function WE(d,p){var y=Ige(d);p.forEach(function(b){if(!y.has(b)){y.add(b);var P=Uge.bind(null,d,b);b.then(P,P)}})}function eo(d,p){var y=p.deletions;if(y!==null)for(var b=0;b<y.length;b++){var P=y[b],L=d,ne=p,de=ne;e:for(;de!==null;){switch(de.tag){case 27:if(Xd(de.type)){Ar=de.stateNode,Zs=!1;break e}break;case 5:Ar=de.stateNode,Zs=!1;break e;case 3:case 4:Ar=de.stateNode.containerInfo,Zs=!0;break e}de=de.return}if(Ar===null)throw Error(r(160));xF(L,ne,P),Ar=null,Zs=!1,L=P.alternate,L!==null&&(L.return=null),P.return=null}if(p.subtreeFlags&13886)for(p=p.child;p!==null;)wF(p,d),p=p.sibling}var Wa=null;function wF(d,p){var y=d.alternate,b=d.flags;switch(d.tag){case 0:case 11:case 14:case 15:eo(p,d),to(d),b&4&&(Vd(3,d,d.return),_v(3,d),Vd(5,d,d.return));break;case 1:eo(p,d),to(d),b&512&&(li||y===null||Fl(y,y.return)),b&64&&eu&&(d=d.updateQueue,d!==null&&(b=d.callbacks,b!==null&&(y=d.shared.hiddenCallbacks,d.shared.hiddenCallbacks=y===null?b:y.concat(b))));break;case 26:var P=Wa;if(eo(p,d),to(d),b&512&&(li||y===null||Fl(y,y.return)),b&4){var L=y!==null?y.memoizedState:null;if(b=d.memoizedState,y===null)if(b===null)if(d.stateNode===null){e:{b=d.type,y=d.memoizedProps,P=P.ownerDocument||P;t:switch(b){case"title":L=P.getElementsByTagName("title")[0],(!L||L[Qo]||L[mt]||L.namespaceURI==="http://www.w3.org/2000/svg"||L.hasAttribute("itemprop"))&&(L=P.createElement(b),P.head.insertBefore(L,P.querySelector("head > title"))),Ki(L,b,y),L[mt]=d,xr(L),b=L;break e;case"link":var ne=w9("link","href",P).get(b+(y.href||""));if(ne){for(var de=0;de<ne.length;de++)if(L=ne[de],L.getAttribute("href")===(y.href==null||y.href===""?null:y.href)&&L.getAttribute("rel")===(y.rel==null?null:y.rel)&&L.getAttribute("title")===(y.title==null?null:y.title)&&L.getAttribute("crossorigin")===(y.crossOrigin==null?null:y.crossOrigin)){ne.splice(de,1);break t}}L=P.createElement(b),Ki(L,b,y),P.head.appendChild(L);break;case"meta":if(ne=w9("meta","content",P).get(b+(y.content||""))){for(de=0;de<ne.length;de++)if(L=ne[de],L.getAttribute("content")===(y.content==null?null:""+y.content)&&L.getAttribute("name")===(y.name==null?null:y.name)&&L.getAttribute("property")===(y.property==null?null:y.property)&&L.getAttribute("http-equiv")===(y.httpEquiv==null?null:y.httpEquiv)&&L.getAttribute("charset")===(y.charSet==null?null:y.charSet)){ne.splice(de,1);break t}}L=P.createElement(b),Ki(L,b,y),P.head.appendChild(L);break;default:throw Error(r(468,b))}L[mt]=d,xr(L),b=L}d.stateNode=b}else E9(P,d.type,d.stateNode);else d.stateNode=b9(P,b,d.memoizedProps);else L!==b?(L===null?y.stateNode!==null&&(y=y.stateNode,y.parentNode.removeChild(y)):L.count--,b===null?E9(P,d.type,d.stateNode):b9(P,b,d.memoizedProps)):b===null&&d.stateNode!==null&&mI(d,d.memoizedProps,y.memoizedProps)}break;case 27:eo(p,d),to(d),b&512&&(li||y===null||Fl(y,y.return)),y!==null&&b&4&&mI(d,d.memoizedProps,y.memoizedProps);break;case 5:if(eo(p,d),to(d),b&512&&(li||y===null||Fl(y,y.return)),d.flags&32){P=d.stateNode;try{qm(P,"")}catch(Nt){Jn(d,d.return,Nt)}}b&4&&d.stateNode!=null&&(P=d.memoizedProps,mI(d,P,y!==null?y.memoizedProps:P)),b&1024&&(xI=!0);break;case 6:if(eo(p,d),to(d),b&4){if(d.stateNode===null)throw Error(r(162));b=d.memoizedProps,y=d.stateNode;try{y.nodeValue=b}catch(Nt){Jn(d,d.return,Nt)}}break;case 3:if(uS=null,P=Wa,Wa=lS(p.containerInfo),eo(p,d),Wa=P,to(d),b&4&&y!==null&&y.memoizedState.isDehydrated)try{E0(p.containerInfo)}catch(Nt){Jn(d,d.return,Nt)}xI&&(xI=!1,EF(d));break;case 4:b=Wa,Wa=lS(d.stateNode.containerInfo),eo(p,d),to(d),Wa=b;break;case 12:eo(p,d),to(d);break;case 31:eo(p,d),to(d),b&4&&(b=d.updateQueue,b!==null&&(d.updateQueue=null,WE(d,b)));break;case 13:eo(p,d),to(d),d.child.flags&8192&&d.memoizedState!==null!=(y!==null&&y.memoizedState!==null)&&(JE=At()),b&4&&(b=d.updateQueue,b!==null&&(d.updateQueue=null,WE(d,b)));break;case 22:P=d.memoizedState!==null;var we=y!==null&&y.memoizedState!==null,Le=eu,qe=li;if(eu=Le||P,li=qe||we,eo(p,d),li=qe,eu=Le,to(d),b&8192)e:for(p=d.stateNode,p._visibility=P?p._visibility&-2:p._visibility|1,P&&(y===null||we||eu||li||Lh(d)),y=null,p=d;;){if(p.tag===5||p.tag===26){if(y===null){we=y=p;try{if(L=we.stateNode,P)ne=L.style,typeof ne.setProperty=="function"?ne.setProperty("display","none","important"):ne.display="none";else{de=we.stateNode;var Qe=we.memoizedProps.style,Ue=Qe!=null&&Qe.hasOwnProperty("display")?Qe.display:null;de.style.display=Ue==null||typeof Ue=="boolean"?"":(""+Ue).trim()}}catch(Nt){Jn(we,we.return,Nt)}}}else if(p.tag===6){if(y===null){we=p;try{we.stateNode.nodeValue=P?"":we.memoizedProps}catch(Nt){Jn(we,we.return,Nt)}}}else if(p.tag===18){if(y===null){we=p;try{var He=we.stateNode;P?d9(He,!0):d9(we.stateNode,!1)}catch(Nt){Jn(we,we.return,Nt)}}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===d)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===d)break e;for(;p.sibling===null;){if(p.return===null||p.return===d)break e;y===p&&(y=null),p=p.return}y===p&&(y=null),p.sibling.return=p.return,p=p.sibling}b&4&&(b=d.updateQueue,b!==null&&(y=b.retryQueue,y!==null&&(b.retryQueue=null,WE(d,y))));break;case 19:eo(p,d),to(d),b&4&&(b=d.updateQueue,b!==null&&(d.updateQueue=null,WE(d,b)));break;case 30:break;case 21:break;default:eo(p,d),to(d)}}function to(d){var p=d.flags;if(p&2){try{for(var y,b=d.return;b!==null;){if(hF(b)){y=b;break}b=b.return}if(y==null)throw Error(r(160));switch(y.tag){case 27:var P=y.stateNode,L=gI(d);KE(d,L,P);break;case 5:var ne=y.stateNode;y.flags&32&&(qm(ne,""),y.flags&=-33);var de=gI(d);KE(d,de,ne);break;case 3:case 4:var we=y.stateNode.containerInfo,Le=gI(d);yI(d,Le,we);break;default:throw Error(r(161))}}catch(qe){Jn(d,d.return,qe)}d.flags&=-3}p&4096&&(d.flags&=-4097)}function EF(d){if(d.subtreeFlags&1024)for(d=d.child;d!==null;){var p=d;EF(p),p.tag===5&&p.flags&1024&&p.stateNode.reset(),d=d.sibling}}function nu(d,p){if(p.subtreeFlags&8772)for(p=p.child;p!==null;)gF(d,p.alternate,p),p=p.sibling}function Lh(d){for(d=d.child;d!==null;){var p=d;switch(p.tag){case 0:case 11:case 14:case 15:Vd(4,p,p.return),Lh(p);break;case 1:Fl(p,p.return);var y=p.stateNode;typeof y.componentWillUnmount=="function"&&dF(p,p.return,y),Lh(p);break;case 27:Uv(p.stateNode);case 26:case 5:Fl(p,p.return),Lh(p);break;case 22:p.memoizedState===null&&Lh(p);break;case 30:Lh(p);break;default:Lh(p)}d=d.sibling}}function ru(d,p,y){for(y=y&&(p.subtreeFlags&8772)!==0,p=p.child;p!==null;){var b=p.alternate,P=d,L=p,ne=L.flags;switch(L.tag){case 0:case 11:case 15:ru(P,L,y),_v(4,L);break;case 1:if(ru(P,L,y),b=L,P=b.stateNode,typeof P.componentDidMount=="function")try{P.componentDidMount()}catch(Le){Jn(b,b.return,Le)}if(b=L,P=b.updateQueue,P!==null){var de=b.stateNode;try{var we=P.shared.hiddenCallbacks;if(we!==null)for(P.shared.hiddenCallbacks=null,P=0;P<we.length;P++)Z7(we[P],de)}catch(Le){Jn(b,b.return,Le)}}y&&ne&64&&uF(L),Iv(L,L.return);break;case 27:pF(L);case 26:case 5:ru(P,L,y),y&&b===null&&ne&4&&fF(L),Iv(L,L.return);break;case 12:ru(P,L,y);break;case 31:ru(P,L,y),y&&ne&4&&vF(P,L);break;case 13:ru(P,L,y),y&&ne&4&&bF(P,L);break;case 22:L.memoizedState===null&&ru(P,L,y),Iv(L,L.return);break;case 30:break;default:ru(P,L,y)}p=p.sibling}}function vI(d,p){var y=null;d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(y=d.memoizedState.cachePool.pool),d=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(d=p.memoizedState.cachePool.pool),d!==y&&(d!=null&&d.refCount++,y!=null&&gv(y))}function bI(d,p){d=null,p.alternate!==null&&(d=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==d&&(p.refCount++,d!=null&&gv(d))}function Ya(d,p,y,b){if(p.subtreeFlags&10256)for(p=p.child;p!==null;)SF(d,p,y,b),p=p.sibling}function SF(d,p,y,b){var P=p.flags;switch(p.tag){case 0:case 11:case 15:Ya(d,p,y,b),P&2048&&_v(9,p);break;case 1:Ya(d,p,y,b);break;case 3:Ya(d,p,y,b),P&2048&&(d=null,p.alternate!==null&&(d=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==d&&(p.refCount++,d!=null&&gv(d)));break;case 12:if(P&2048){Ya(d,p,y,b),d=p.stateNode;try{var L=p.memoizedProps,ne=L.id,de=L.onPostCommit;typeof de=="function"&&de(ne,p.alternate===null?"mount":"update",d.passiveEffectDuration,-0)}catch(we){Jn(p,p.return,we)}}else Ya(d,p,y,b);break;case 31:Ya(d,p,y,b);break;case 13:Ya(d,p,y,b);break;case 23:break;case 22:L=p.stateNode,ne=p.alternate,p.memoizedState!==null?L._visibility&2?Ya(d,p,y,b):Pv(d,p):L._visibility&2?Ya(d,p,y,b):(L._visibility|=2,d0(d,p,y,b,(p.subtreeFlags&10256)!==0||!1)),P&2048&&vI(ne,p);break;case 24:Ya(d,p,y,b),P&2048&&bI(p.alternate,p);break;default:Ya(d,p,y,b)}}function d0(d,p,y,b,P){for(P=P&&((p.subtreeFlags&10256)!==0||!1),p=p.child;p!==null;){var L=d,ne=p,de=y,we=b,Le=ne.flags;switch(ne.tag){case 0:case 11:case 15:d0(L,ne,de,we,P),_v(8,ne);break;case 23:break;case 22:var qe=ne.stateNode;ne.memoizedState!==null?qe._visibility&2?d0(L,ne,de,we,P):Pv(L,ne):(qe._visibility|=2,d0(L,ne,de,we,P)),P&&Le&2048&&vI(ne.alternate,ne);break;case 24:d0(L,ne,de,we,P),P&&Le&2048&&bI(ne.alternate,ne);break;default:d0(L,ne,de,we,P)}p=p.sibling}}function Pv(d,p){if(p.subtreeFlags&10256)for(p=p.child;p!==null;){var y=d,b=p,P=b.flags;switch(b.tag){case 22:Pv(y,b),P&2048&&vI(b.alternate,b);break;case 24:Pv(y,b),P&2048&&bI(b.alternate,b);break;default:Pv(y,b)}p=p.sibling}}var Rv=8192;function f0(d,p,y){if(d.subtreeFlags&Rv)for(d=d.child;d!==null;)AF(d,p,y),d=d.sibling}function AF(d,p,y){switch(d.tag){case 26:f0(d,p,y),d.flags&Rv&&d.memoizedState!==null&&gye(y,Wa,d.memoizedState,d.memoizedProps);break;case 5:f0(d,p,y);break;case 3:case 4:var b=Wa;Wa=lS(d.stateNode.containerInfo),f0(d,p,y),Wa=b;break;case 22:d.memoizedState===null&&(b=d.alternate,b!==null&&b.memoizedState!==null?(b=Rv,Rv=16777216,f0(d,p,y),Rv=b):f0(d,p,y));break;default:f0(d,p,y)}}function TF(d){var p=d.alternate;if(p!==null&&(d=p.child,d!==null)){p.child=null;do p=d.sibling,d.sibling=null,d=p;while(d!==null)}}function Ov(d){var p=d.deletions;if((d.flags&16)!==0){if(p!==null)for(var y=0;y<p.length;y++){var b=p[y];Ci=b,CF(b,d)}TF(d)}if(d.subtreeFlags&10256)for(d=d.child;d!==null;)kF(d),d=d.sibling}function kF(d){switch(d.tag){case 0:case 11:case 15:Ov(d),d.flags&2048&&Vd(9,d,d.return);break;case 3:Ov(d);break;case 12:Ov(d);break;case 22:var p=d.stateNode;d.memoizedState!==null&&p._visibility&2&&(d.return===null||d.return.tag!==13)?(p._visibility&=-3,YE(d)):Ov(d);break;default:Ov(d)}}function YE(d){var p=d.deletions;if((d.flags&16)!==0){if(p!==null)for(var y=0;y<p.length;y++){var b=p[y];Ci=b,CF(b,d)}TF(d)}for(d=d.child;d!==null;){switch(p=d,p.tag){case 0:case 11:case 15:Vd(8,p,p.return),YE(p);break;case 22:y=p.stateNode,y._visibility&2&&(y._visibility&=-3,YE(p));break;default:YE(p)}d=d.sibling}}function CF(d,p){for(;Ci!==null;){var y=Ci;switch(y.tag){case 0:case 11:case 15:Vd(8,y,p);break;case 23:case 22:if(y.memoizedState!==null&&y.memoizedState.cachePool!==null){var b=y.memoizedState.cachePool.pool;b!=null&&b.refCount++}break;case 24:gv(y.memoizedState.cache)}if(b=y.child,b!==null)b.return=y,Ci=b;else e:for(y=d;Ci!==null;){b=Ci;var P=b.sibling,L=b.return;if(yF(b),b===y){Ci=null;break e}if(P!==null){P.return=L,Ci=P;break e}Ci=L}}}var Pge={getCacheForType:function(d){var p=qi(si),y=p.data.get(d);return y===void 0&&(y=d(),p.data.set(d,y)),y},cacheSignal:function(){return qi(si).controller.signal}},Rge=typeof WeakMap=="function"?WeakMap:Map,zn=0,or=null,bn=null,Tn=0,Yn=0,ko=null,qd=!1,h0=!1,wI=!1,iu=0,Fr=0,Gd=0,Bh=0,EI=0,Co=0,p0=0,Mv=null,no=null,SI=!1,JE=0,NF=0,XE=1/0,QE=null,Kd=null,xi=0,Wd=null,m0=null,su=0,AI=0,TI=null,_F=null,Dv=0,kI=null;function No(){return(zn&2)!==0&&Tn!==0?Tn&-Tn:M.T!==null?RI():Kt()}function IF(){if(Co===0)if((Tn&536870912)===0||Cn){var d=xt;xt<<=1,(xt&3932160)===0&&(xt=262144),Co=d}else Co=536870912;return d=Ao.current,d!==null&&(d.flags|=32),Co}function ro(d,p,y){(d===or&&(Yn===2||Yn===9)||d.cancelPendingCommit!==null)&&(g0(d,0),Yd(d,Tn,Co,!1)),Q(d,y),((zn&2)===0||d!==or)&&(d===or&&((zn&2)===0&&(Bh|=y),Fr===4&&Yd(d,Tn,Co,!1)),$l(d))}function PF(d,p,y){if((zn&6)!==0)throw Error(r(327));var b=!y&&(p&127)===0&&(p&d.expiredLanes)===0||on(d,p),P=b?Dge(d,p):NI(d,p,!0),L=b;do{if(P===0){h0&&!b&&Yd(d,p,0,!1);break}else{if(y=d.current.alternate,L&&!Oge(y)){P=NI(d,p,!1),L=!1;continue}if(P===2){if(L=p,d.errorRecoveryDisabledLanes&L)var ne=0;else ne=d.pendingLanes&-536870913,ne=ne!==0?ne:ne&536870912?536870912:0;if(ne!==0){p=ne;e:{var de=d;P=Mv;var we=de.current.memoizedState.isDehydrated;if(we&&(g0(de,ne).flags|=256),ne=NI(de,ne,!1),ne!==2){if(wI&&!we){de.errorRecoveryDisabledLanes|=L,Bh|=L,P=4;break e}L=no,no=P,L!==null&&(no===null?no=L:no.push.apply(no,L))}P=ne}if(L=!1,P!==2)continue}}if(P===1){g0(d,0),Yd(d,p,0,!0);break}e:{switch(b=d,L=P,L){case 0:case 1:throw Error(r(345));case 4:if((p&4194048)!==p)break;case 6:Yd(b,p,Co,!qd);break e;case 2:no=null;break;case 3:case 5:break;default:throw Error(r(329))}if((p&62914560)===p&&(P=JE+300-At(),10<P)){if(Yd(b,p,Co,!qd),en(b,0,!0)!==0)break e;su=p,b.timeoutHandle=l9(RF.bind(null,b,y,no,QE,SI,p,Co,Bh,p0,qd,L,"Throttled",-0,0),P);break e}RF(b,y,no,QE,SI,p,Co,Bh,p0,qd,L,null,-0,0)}}break}while(!0);$l(d)}function RF(d,p,y,b,P,L,ne,de,we,Le,qe,Qe,Ue,He){if(d.timeoutHandle=-1,Qe=p.subtreeFlags,Qe&8192||(Qe&16785408)===16785408){Qe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Vc},AF(p,L,Qe);var Nt=(L&62914560)===L?JE-At():(L&4194048)===L?NF-At():0;if(Nt=yye(Qe,Nt),Nt!==null){su=L,d.cancelPendingCommit=Nt(FF.bind(null,d,p,L,y,b,P,ne,de,we,qe,Qe,null,Ue,He)),Yd(d,L,ne,!Le);return}}FF(d,p,L,y,b,P,ne,de,we)}function Oge(d){for(var p=d;;){var y=p.tag;if((y===0||y===11||y===15)&&p.flags&16384&&(y=p.updateQueue,y!==null&&(y=y.stores,y!==null)))for(var b=0;b<y.length;b++){var P=y[b],L=P.getSnapshot;P=P.value;try{if(!Eo(L(),P))return!1}catch{return!1}}if(y=p.child,p.subtreeFlags&16384&&y!==null)y.return=p,p=y;else{if(p===d)break;for(;p.sibling===null;){if(p.return===null||p.return===d)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function Yd(d,p,y,b){p&=~EI,p&=~Bh,d.suspendedLanes|=p,d.pingedLanes&=~p,b&&(d.warmLanes|=p),b=d.expirationTimes;for(var P=p;0<P;){var L=31-ye(P),ne=1<<L;b[L]=-1,P&=~ne}y!==0&&pe(d,y,p)}function ZE(){return(zn&6)===0?(Lv(0),!1):!0}function CI(){if(bn!==null){if(Yn===0)var d=bn.return;else d=bn,Wc=Nh=null,H_(d),o0=null,xv=0,d=bn;for(;d!==null;)cF(d.alternate,d),d=d.return;bn=null}}function g0(d,p){var y=d.timeoutHandle;y!==-1&&(d.timeoutHandle=-1,Zge(y)),y=d.cancelPendingCommit,y!==null&&(d.cancelPendingCommit=null,y()),su=0,CI(),or=d,bn=y=Gc(d.current,null),Tn=p,Yn=0,ko=null,qd=!1,h0=on(d,p),wI=!1,p0=Co=EI=Bh=Gd=Fr=0,no=Mv=null,SI=!1,(p&8)!==0&&(p|=p&32);var b=d.entangledLanes;if(b!==0)for(d=d.entanglements,b&=p;0<b;){var P=31-ye(b),L=1<<P;p|=d[P],b&=~L}return iu=p,bE(),y}function OF(d,p){an=null,M.H=kv,p===s0||p===NE?(p=Y7(),Yn=3):p===P_?(p=Y7(),Yn=4):Yn=p===sI?8:p!==null&&typeof p=="object"&&typeof p.then=="function"?6:1,ko=p,bn===null&&(Fr=1,zE(d,ra(p,d.current)))}function MF(){var d=Ao.current;return d===null?!0:(Tn&4194048)===Tn?aa===null:(Tn&62914560)===Tn||(Tn&536870912)!==0?d===aa:!1}function DF(){var d=M.H;return M.H=kv,d===null?kv:d}function LF(){var d=M.A;return M.A=Pge,d}function eS(){Fr=4,qd||(Tn&4194048)!==Tn&&Ao.current!==null||(h0=!0),(Gd&134217727)===0&&(Bh&134217727)===0||or===null||Yd(or,Tn,Co,!1)}function NI(d,p,y){var b=zn;zn|=2;var P=DF(),L=LF();(or!==d||Tn!==p)&&(QE=null,g0(d,p)),p=!1;var ne=Fr;e:do try{if(Yn!==0&&bn!==null){var de=bn,we=ko;switch(Yn){case 8:CI(),ne=6;break e;case 3:case 2:case 9:case 6:Ao.current===null&&(p=!0);var Le=Yn;if(Yn=0,ko=null,y0(d,de,we,Le),y&&h0){ne=0;break e}break;default:Le=Yn,Yn=0,ko=null,y0(d,de,we,Le)}}Mge(),ne=Fr;break}catch(qe){OF(d,qe)}while(!0);return p&&d.shellSuspendCounter++,Wc=Nh=null,zn=b,M.H=P,M.A=L,bn===null&&(or=null,Tn=0,bE()),ne}function Mge(){for(;bn!==null;)BF(bn)}function Dge(d,p){var y=zn;zn|=2;var b=DF(),P=LF();or!==d||Tn!==p?(QE=null,XE=At()+500,g0(d,p)):h0=on(d,p);e:do try{if(Yn!==0&&bn!==null){p=bn;var L=ko;t:switch(Yn){case 1:Yn=0,ko=null,y0(d,p,L,1);break;case 2:case 9:if(K7(L)){Yn=0,ko=null,jF(p);break}p=function(){Yn!==2&&Yn!==9||or!==d||(Yn=7),$l(d)},L.then(p,p);break e;case 3:Yn=7;break e;case 4:Yn=5;break e;case 7:K7(L)?(Yn=0,ko=null,jF(p)):(Yn=0,ko=null,y0(d,p,L,7));break;case 5:var ne=null;switch(bn.tag){case 26:ne=bn.memoizedState;case 5:case 27:var de=bn;if(ne?S9(ne):de.stateNode.complete){Yn=0,ko=null;var we=de.sibling;if(we!==null)bn=we;else{var Le=de.return;Le!==null?(bn=Le,tS(Le)):bn=null}break t}}Yn=0,ko=null,y0(d,p,L,5);break;case 6:Yn=0,ko=null,y0(d,p,L,6);break;case 8:CI(),Fr=6;break e;default:throw Error(r(462))}}Lge();break}catch(qe){OF(d,qe)}while(!0);return Wc=Nh=null,M.H=b,M.A=P,zn=y,bn!==null?0:(or=null,Tn=0,bE(),Fr)}function Lge(){for(;bn!==null&&!Zt();)BF(bn)}function BF(d){var p=aF(d.alternate,d,iu);d.memoizedProps=d.pendingProps,p===null?tS(d):bn=p}function jF(d){var p=d,y=p.alternate;switch(p.tag){case 15:case 0:p=tF(y,p,p.pendingProps,p.type,void 0,Tn);break;case 11:p=tF(y,p,p.pendingProps,p.type.render,p.ref,Tn);break;case 5:H_(p);default:cF(y,p),p=bn=L7(p,iu),p=aF(y,p,iu)}d.memoizedProps=d.pendingProps,p===null?tS(d):bn=p}function y0(d,p,y,b){Wc=Nh=null,H_(p),o0=null,xv=0;var P=p.return;try{if(Age(d,P,p,y,Tn)){Fr=1,zE(d,ra(y,d.current)),bn=null;return}}catch(L){if(P!==null)throw bn=P,L;Fr=1,zE(d,ra(y,d.current)),bn=null;return}p.flags&32768?(Cn||b===1?d=!0:h0||(Tn&536870912)!==0?d=!1:(qd=d=!0,(b===2||b===9||b===3||b===6)&&(b=Ao.current,b!==null&&b.tag===13&&(b.flags|=16384))),UF(p,d)):tS(p)}function tS(d){var p=d;do{if((p.flags&32768)!==0){UF(p,qd);return}d=p.return;var y=Cge(p.alternate,p,iu);if(y!==null){bn=y;return}if(p=p.sibling,p!==null){bn=p;return}bn=p=d}while(p!==null);Fr===0&&(Fr=5)}function UF(d,p){do{var y=Nge(d.alternate,d);if(y!==null){y.flags&=32767,bn=y;return}if(y=d.return,y!==null&&(y.flags|=32768,y.subtreeFlags=0,y.deletions=null),!p&&(d=d.sibling,d!==null)){bn=d;return}bn=d=y}while(d!==null);Fr=6,bn=null}function FF(d,p,y,b,P,L,ne,de,we){d.cancelPendingCommit=null;do nS();while(xi!==0);if((zn&6)!==0)throw Error(r(327));if(p!==null){if(p===d.current)throw Error(r(177));if(L=p.lanes|p.childLanes,L|=g_,ee(d,y,L,ne,de,we),d===or&&(bn=or=null,Tn=0),m0=p,Wd=d,su=y,AI=L,TI=P,_F=b,(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?(d.callbackNode=null,d.callbackPriority=0,Fge(ft,function(){return qF(),null})):(d.callbackNode=null,d.callbackPriority=0),b=(p.flags&13878)!==0,(p.subtreeFlags&13878)!==0||b){b=M.T,M.T=null,P=z.p,z.p=2,ne=zn,zn|=4;try{_ge(d,p,y)}finally{zn=ne,z.p=P,M.T=b}}xi=1,$F(),zF(),HF()}}function $F(){if(xi===1){xi=0;var d=Wd,p=m0,y=(p.flags&13878)!==0;if((p.subtreeFlags&13878)!==0||y){y=M.T,M.T=null;var b=z.p;z.p=2;var P=zn;zn|=4;try{wF(p,d);var L=FI,ne=C7(d.containerInfo),de=L.focusedElem,we=L.selectionRange;if(ne!==de&&de&&de.ownerDocument&&k7(de.ownerDocument.documentElement,de)){if(we!==null&&d_(de)){var Le=we.start,qe=we.end;if(qe===void 0&&(qe=Le),"selectionStart"in de)de.selectionStart=Le,de.selectionEnd=Math.min(qe,de.value.length);else{var Qe=de.ownerDocument||document,Ue=Qe&&Qe.defaultView||window;if(Ue.getSelection){var He=Ue.getSelection(),Nt=de.textContent.length,Gt=Math.min(we.start,Nt),tr=we.end===void 0?Gt:Math.min(we.end,Nt);!He.extend&&Gt>tr&&(ne=tr,tr=Gt,Gt=ne);var _e=T7(de,Gt),Ae=T7(de,tr);if(_e&&Ae&&(He.rangeCount!==1||He.anchorNode!==_e.node||He.anchorOffset!==_e.offset||He.focusNode!==Ae.node||He.focusOffset!==Ae.offset)){var De=Qe.createRange();De.setStart(_e.node,_e.offset),He.removeAllRanges(),Gt>tr?(He.addRange(De),He.extend(Ae.node,Ae.offset)):(De.setEnd(Ae.node,Ae.offset),He.addRange(De))}}}}for(Qe=[],He=de;He=He.parentNode;)He.nodeType===1&&Qe.push({element:He,left:He.scrollLeft,top:He.scrollTop});for(typeof de.focus=="function"&&de.focus(),de=0;de<Qe.length;de++){var Je=Qe[de];Je.element.scrollLeft=Je.left,Je.element.scrollTop=Je.top}}pS=!!UI,FI=UI=null}finally{zn=P,z.p=b,M.T=y}}d.current=p,xi=2}}function zF(){if(xi===2){xi=0;var d=Wd,p=m0,y=(p.flags&8772)!==0;if((p.subtreeFlags&8772)!==0||y){y=M.T,M.T=null;var b=z.p;z.p=2;var P=zn;zn|=4;try{gF(d,p.alternate,p)}finally{zn=P,z.p=b,M.T=y}}xi=3}}function HF(){if(xi===4||xi===3){xi=0,Ge();var d=Wd,p=m0,y=su,b=_F;(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?xi=5:(xi=0,m0=Wd=null,VF(d,d.pendingLanes));var P=d.pendingLanes;if(P===0&&(Kd=null),Jt(y),p=p.stateNode,be&&typeof be.onCommitFiberRoot=="function")try{be.onCommitFiberRoot(fe,p,void 0,(p.current.flags&128)===128)}catch{}if(b!==null){p=M.T,P=z.p,z.p=2,M.T=null;try{for(var L=d.onRecoverableError,ne=0;ne<b.length;ne++){var de=b[ne];L(de.value,{componentStack:de.stack})}}finally{M.T=p,z.p=P}}(su&3)!==0&&nS(),$l(d),P=d.pendingLanes,(y&261930)!==0&&(P&42)!==0?d===kI?Dv++:(Dv=0,kI=d):Dv=0,Lv(0)}}function VF(d,p){(d.pooledCacheLanes&=p)===0&&(p=d.pooledCache,p!=null&&(d.pooledCache=null,gv(p)))}function nS(){return $F(),zF(),HF(),qF()}function qF(){if(xi!==5)return!1;var d=Wd,p=AI;AI=0;var y=Jt(su),b=M.T,P=z.p;try{z.p=32>y?32:y,M.T=null,y=TI,TI=null;var L=Wd,ne=su;if(xi=0,m0=Wd=null,su=0,(zn&6)!==0)throw Error(r(331));var de=zn;if(zn|=4,kF(L.current),SF(L,L.current,ne,y),zn=de,Lv(0,!1),be&&typeof be.onPostCommitFiberRoot=="function")try{be.onPostCommitFiberRoot(fe,L)}catch{}return!0}finally{z.p=P,M.T=b,VF(d,p)}}function GF(d,p,y){p=ra(y,p),p=iI(d.stateNode,p,2),d=$d(d,p,2),d!==null&&(Q(d,2),$l(d))}function Jn(d,p,y){if(d.tag===3)GF(d,d,y);else for(;p!==null;){if(p.tag===3){GF(p,d,y);break}else if(p.tag===1){var b=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(Kd===null||!Kd.has(b))){d=ra(y,d),y=KU(2),b=$d(p,y,2),b!==null&&(WU(y,b,p,d),Q(b,2),$l(b));break}}p=p.return}}function _I(d,p,y){var b=d.pingCache;if(b===null){b=d.pingCache=new Rge;var P=new Set;b.set(p,P)}else P=b.get(p),P===void 0&&(P=new Set,b.set(p,P));P.has(y)||(wI=!0,P.add(y),d=Bge.bind(null,d,p,y),p.then(d,d))}function Bge(d,p,y){var b=d.pingCache;b!==null&&b.delete(p),d.pingedLanes|=d.suspendedLanes&y,d.warmLanes&=~y,or===d&&(Tn&y)===y&&(Fr===4||Fr===3&&(Tn&62914560)===Tn&&300>At()-JE?(zn&2)===0&&g0(d,0):EI|=y,p0===Tn&&(p0=0)),$l(d)}function KF(d,p){p===0&&(p=Vn()),d=Th(d,p),d!==null&&(Q(d,p),$l(d))}function jge(d){var p=d.memoizedState,y=0;p!==null&&(y=p.retryLane),KF(d,y)}function Uge(d,p){var y=0;switch(d.tag){case 31:case 13:var b=d.stateNode,P=d.memoizedState;P!==null&&(y=P.retryLane);break;case 19:b=d.stateNode;break;case 22:b=d.stateNode._retryCache;break;default:throw Error(r(314))}b!==null&&b.delete(p),KF(d,y)}function Fge(d,p){return st(d,p)}var rS=null,x0=null,II=!1,iS=!1,PI=!1,Jd=0;function $l(d){d!==x0&&d.next===null&&(x0===null?rS=x0=d:x0=x0.next=d),iS=!0,II||(II=!0,zge())}function Lv(d,p){if(!PI&&iS){PI=!0;do for(var y=!1,b=rS;b!==null;){if(d!==0){var P=b.pendingLanes;if(P===0)var L=0;else{var ne=b.suspendedLanes,de=b.pingedLanes;L=(1<<31-ye(42|d)+1)-1,L&=P&~(ne&~de),L=L&201326741?L&201326741|1:L?L|2:0}L!==0&&(y=!0,XF(b,L))}else L=Tn,L=en(b,b===or?L:0,b.cancelPendingCommit!==null||b.timeoutHandle!==-1),(L&3)===0||on(b,L)||(y=!0,XF(b,L));b=b.next}while(y);PI=!1}}function $ge(){WF()}function WF(){iS=II=!1;var d=0;Jd!==0&&Qge()&&(d=Jd);for(var p=At(),y=null,b=rS;b!==null;){var P=b.next,L=YF(b,p);L===0?(b.next=null,y===null?rS=P:y.next=P,P===null&&(x0=y)):(y=b,(d!==0||(L&3)!==0)&&(iS=!0)),b=P}xi!==0&&xi!==5||Lv(d),Jd!==0&&(Jd=0)}function YF(d,p){for(var y=d.suspendedLanes,b=d.pingedLanes,P=d.expirationTimes,L=d.pendingLanes&-62914561;0<L;){var ne=31-ye(L),de=1<<ne,we=P[ne];we===-1?((de&y)===0||(de&b)!==0)&&(P[ne]=Hi(de,p)):we<=p&&(d.expiredLanes|=de),L&=~de}if(p=or,y=Tn,y=en(d,d===p?y:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),b=d.callbackNode,y===0||d===p&&(Yn===2||Yn===9)||d.cancelPendingCommit!==null)return b!==null&&b!==null&&Bt(b),d.callbackNode=null,d.callbackPriority=0;if((y&3)===0||on(d,y)){if(p=y&-y,p===d.callbackPriority)return p;switch(b!==null&&Bt(b),Jt(y)){case 2:case 8:y=Ve;break;case 32:y=ft;break;case 268435456:y=se;break;default:y=ft}return b=JF.bind(null,d),y=st(y,b),d.callbackPriority=p,d.callbackNode=y,p}return b!==null&&b!==null&&Bt(b),d.callbackPriority=2,d.callbackNode=null,2}function JF(d,p){if(xi!==0&&xi!==5)return d.callbackNode=null,d.callbackPriority=0,null;var y=d.callbackNode;if(nS()&&d.callbackNode!==y)return null;var b=Tn;return b=en(d,d===or?b:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),b===0?null:(PF(d,b,p),YF(d,At()),d.callbackNode!=null&&d.callbackNode===y?JF.bind(null,d):null)}function XF(d,p){if(nS())return null;PF(d,p,!0)}function zge(){eye(function(){(zn&6)!==0?st(Pe,$ge):WF()})}function RI(){if(Jd===0){var d=r0;d===0&&(d=Ft,Ft<<=1,(Ft&261888)===0&&(Ft=256)),Jd=d}return Jd}function QF(d){return d==null||typeof d=="symbol"||typeof d=="boolean"?null:typeof d=="function"?d:fE(""+d)}function ZF(d,p){var y=p.ownerDocument.createElement("input");return y.name=p.name,y.value=p.value,d.id&&y.setAttribute("form",d.id),p.parentNode.insertBefore(y,p),d=new FormData(d),y.parentNode.removeChild(y),d}function Hge(d,p,y,b,P){if(p==="submit"&&y&&y.stateNode===P){var L=QF((P[ct]||null).action),ne=b.submitter;ne&&(p=(p=ne[ct]||null)?QF(p.formAction):ne.getAttribute("formAction"),p!==null&&(L=p,ne=null));var de=new gE("action","action",null,b,P);d.push({event:de,listeners:[{instance:null,listener:function(){if(b.defaultPrevented){if(Jd!==0){var we=ne?ZF(P,ne):new FormData(P);Q_(y,{pending:!0,data:we,method:P.method,action:L},null,we)}}else typeof L=="function"&&(de.preventDefault(),we=ne?ZF(P,ne):new FormData(P),Q_(y,{pending:!0,data:we,method:P.method,action:L},L,we))},currentTarget:P}]})}}for(var OI=0;OI<m_.length;OI++){var MI=m_[OI],Vge=MI.toLowerCase(),qge=MI[0].toUpperCase()+MI.slice(1);Ka(Vge,"on"+qge)}Ka(I7,"onAnimationEnd"),Ka(P7,"onAnimationIteration"),Ka(R7,"onAnimationStart"),Ka("dblclick","onDoubleClick"),Ka("focusin","onFocus"),Ka("focusout","onBlur"),Ka(age,"onTransitionRun"),Ka(lge,"onTransitionStart"),Ka(cge,"onTransitionCancel"),Ka(O7,"onTransitionEnd"),us("onMouseEnter",["mouseout","mouseover"]),us("onMouseLeave",["mouseout","mouseover"]),us("onPointerEnter",["pointerout","pointerover"]),us("onPointerLeave",["pointerout","pointerover"]),Yr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Yr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Yr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Yr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Yr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Yr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bv="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Gge=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Bv));function e9(d,p){p=(p&4)!==0;for(var y=0;y<d.length;y++){var b=d[y],P=b.event;b=b.listeners;e:{var L=void 0;if(p)for(var ne=b.length-1;0<=ne;ne--){var de=b[ne],we=de.instance,Le=de.currentTarget;if(de=de.listener,we!==L&&P.isPropagationStopped())break e;L=de,P.currentTarget=Le;try{L(P)}catch(qe){vE(qe)}P.currentTarget=null,L=we}else for(ne=0;ne<b.length;ne++){if(de=b[ne],we=de.instance,Le=de.currentTarget,de=de.listener,we!==L&&P.isPropagationStopped())break e;L=de,P.currentTarget=Le;try{L(P)}catch(qe){vE(qe)}P.currentTarget=null,L=we}}}}function wn(d,p){var y=p[$n];y===void 0&&(y=p[$n]=new Set);var b=d+"__bubble";y.has(b)||(t9(p,d,2,!1),y.add(b))}function DI(d,p,y){var b=0;p&&(b|=4),t9(y,d,b,p)}var sS="_reactListening"+Math.random().toString(36).slice(2);function LI(d){if(!d[sS]){d[sS]=!0,zc.forEach(function(y){y!=="selectionchange"&&(Gge.has(y)||DI(y,!1,d),DI(y,!0,d))});var p=d.nodeType===9?d:d.ownerDocument;p===null||p[sS]||(p[sS]=!0,DI("selectionchange",!1,p))}}function t9(d,p,y,b){switch(I9(p)){case 2:var P=bye;break;case 8:P=wye;break;default:P=XI}y=P.bind(null,p,y,d),P=void 0,!n_||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||(P=!0),b?P!==void 0?d.addEventListener(p,y,{capture:!0,passive:P}):d.addEventListener(p,y,!0):P!==void 0?d.addEventListener(p,y,{passive:P}):d.addEventListener(p,y,!1)}function BI(d,p,y,b,P){var L=b;if((p&1)===0&&(p&2)===0&&b!==null)e:for(;;){if(b===null)return;var ne=b.tag;if(ne===3||ne===4){var de=b.stateNode.containerInfo;if(de===P)break;if(ne===4)for(ne=b.return;ne!==null;){var we=ne.tag;if((we===3||we===4)&&ne.stateNode.containerInfo===P)return;ne=ne.return}for(;de!==null;){if(ne=vo(de),ne===null)return;if(we=ne.tag,we===5||we===6||we===26||we===27){b=L=ne;continue e}de=de.parentNode}}b=b.return}o7(function(){var Le=L,qe=e_(y),Qe=[];e:{var Ue=M7.get(d);if(Ue!==void 0){var He=gE,Nt=d;switch(d){case"keypress":if(pE(y)===0)break e;case"keydown":case"keyup":He=U0e;break;case"focusin":Nt="focus",He=o_;break;case"focusout":Nt="blur",He=o_;break;case"beforeblur":case"afterblur":He=o_;break;case"click":if(y.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":He=c7;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":He=C0e;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":He=z0e;break;case I7:case P7:case R7:He=I0e;break;case O7:He=V0e;break;case"scroll":case"scrollend":He=T0e;break;case"wheel":He=G0e;break;case"copy":case"cut":case"paste":He=R0e;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":He=d7;break;case"toggle":case"beforetoggle":He=W0e}var Gt=(p&4)!==0,tr=!Gt&&(d==="scroll"||d==="scrollend"),_e=Gt?Ue!==null?Ue+"Capture":null:Ue;Gt=[];for(var Ae=Le,De;Ae!==null;){var Je=Ae;if(De=Je.stateNode,Je=Je.tag,Je!==5&&Je!==26&&Je!==27||De===null||_e===null||(Je=sv(Ae,_e),Je!=null&&Gt.push(jv(Ae,Je,De))),tr)break;Ae=Ae.return}0<Gt.length&&(Ue=new He(Ue,Nt,null,y,qe),Qe.push({event:Ue,listeners:Gt}))}}if((p&7)===0){e:{if(Ue=d==="mouseover"||d==="pointerover",He=d==="mouseout"||d==="pointerout",Ue&&y!==ZN&&(Nt=y.relatedTarget||y.fromElement)&&(vo(Nt)||Nt[Xs]))break e;if((He||Ue)&&(Ue=qe.window===qe?qe:(Ue=qe.ownerDocument)?Ue.defaultView||Ue.parentWindow:window,He?(Nt=y.relatedTarget||y.toElement,He=Le,Nt=Nt?vo(Nt):null,Nt!==null&&(tr=s(Nt),Gt=Nt.tag,Nt!==tr||Gt!==5&&Gt!==27&&Gt!==6)&&(Nt=null)):(He=null,Nt=Le),He!==Nt)){if(Gt=c7,Je="onMouseLeave",_e="onMouseEnter",Ae="mouse",(d==="pointerout"||d==="pointerover")&&(Gt=d7,Je="onPointerLeave",_e="onPointerEnter",Ae="pointer"),tr=He==null?Ue:Zo(He),De=Nt==null?Ue:Zo(Nt),Ue=new Gt(Je,Ae+"leave",He,y,qe),Ue.target=tr,Ue.relatedTarget=De,Je=null,vo(qe)===Le&&(Gt=new Gt(_e,Ae+"enter",Nt,y,qe),Gt.target=De,Gt.relatedTarget=tr,Je=Gt),tr=Je,He&&Nt)t:{for(Gt=Kge,_e=He,Ae=Nt,De=0,Je=_e;Je;Je=Gt(Je))De++;Je=0;for(var jt=Ae;jt;jt=Gt(jt))Je++;for(;0<De-Je;)_e=Gt(_e),De--;for(;0<Je-De;)Ae=Gt(Ae),Je--;for(;De--;){if(_e===Ae||Ae!==null&&_e===Ae.alternate){Gt=_e;break t}_e=Gt(_e),Ae=Gt(Ae)}Gt=null}else Gt=null;He!==null&&n9(Qe,Ue,He,Gt,!1),Nt!==null&&tr!==null&&n9(Qe,tr,Nt,Gt,!0)}}e:{if(Ue=Le?Zo(Le):window,He=Ue.nodeName&&Ue.nodeName.toLowerCase(),He==="select"||He==="input"&&Ue.type==="file")var Dn=v7;else if(y7(Ue))if(b7)Dn=ige;else{Dn=nge;var Ot=tge}else He=Ue.nodeName,!He||He.toLowerCase()!=="input"||Ue.type!=="checkbox"&&Ue.type!=="radio"?Le&&QN(Le.elementType)&&(Dn=v7):Dn=rge;if(Dn&&(Dn=Dn(d,Le))){x7(Qe,Dn,y,qe);break e}Ot&&Ot(d,Ue,Le),d==="focusout"&&Le&&Ue.type==="number"&&Le.memoizedProps.value!=null&&XN(Ue,"number",Ue.value)}switch(Ot=Le?Zo(Le):window,d){case"focusin":(y7(Ot)||Ot.contentEditable==="true")&&(Ym=Ot,f_=Le,hv=null);break;case"focusout":hv=f_=Ym=null;break;case"mousedown":h_=!0;break;case"contextmenu":case"mouseup":case"dragend":h_=!1,N7(Qe,y,qe);break;case"selectionchange":if(oge)break;case"keydown":case"keyup":N7(Qe,y,qe)}var dn;if(l_)e:{switch(d){case"compositionstart":var kn="onCompositionStart";break e;case"compositionend":kn="onCompositionEnd";break e;case"compositionupdate":kn="onCompositionUpdate";break e}kn=void 0}else Wm?m7(d,y)&&(kn="onCompositionEnd"):d==="keydown"&&y.keyCode===229&&(kn="onCompositionStart");kn&&(f7&&y.locale!=="ko"&&(Wm||kn!=="onCompositionStart"?kn==="onCompositionEnd"&&Wm&&(dn=a7()):(Md=qe,r_="value"in Md?Md.value:Md.textContent,Wm=!0)),Ot=oS(Le,kn),0<Ot.length&&(kn=new u7(kn,d,null,y,qe),Qe.push({event:kn,listeners:Ot}),dn?kn.data=dn:(dn=g7(y),dn!==null&&(kn.data=dn)))),(dn=J0e?X0e(d,y):Q0e(d,y))&&(kn=oS(Le,"onBeforeInput"),0<kn.length&&(Ot=new u7("onBeforeInput","beforeinput",null,y,qe),Qe.push({event:Ot,listeners:kn}),Ot.data=dn)),Hge(Qe,d,Le,y,qe)}e9(Qe,p)})}function jv(d,p,y){return{instance:d,listener:p,currentTarget:y}}function oS(d,p){for(var y=p+"Capture",b=[];d!==null;){var P=d,L=P.stateNode;if(P=P.tag,P!==5&&P!==26&&P!==27||L===null||(P=sv(d,y),P!=null&&b.unshift(jv(d,P,L)),P=sv(d,p),P!=null&&b.push(jv(d,P,L))),d.tag===3)return b;d=d.return}return[]}function Kge(d){if(d===null)return null;do d=d.return;while(d&&d.tag!==5&&d.tag!==27);return d||null}function n9(d,p,y,b,P){for(var L=p._reactName,ne=[];y!==null&&y!==b;){var de=y,we=de.alternate,Le=de.stateNode;if(de=de.tag,we!==null&&we===b)break;de!==5&&de!==26&&de!==27||Le===null||(we=Le,P?(Le=sv(y,L),Le!=null&&ne.unshift(jv(y,Le,we))):P||(Le=sv(y,L),Le!=null&&ne.push(jv(y,Le,we)))),y=y.return}ne.length!==0&&d.push({event:p,listeners:ne})}var Wge=/\r\n?/g,Yge=/\u0000|\uFFFD/g;function r9(d){return(typeof d=="string"?d:""+d).replace(Wge,`
`).replace(Yge,"")}function i9(d,p){return p=r9(p),r9(d)===p}function er(d,p,y,b,P,L){switch(y){case"children":typeof b=="string"?p==="body"||p==="textarea"&&b===""||qm(d,b):(typeof b=="number"||typeof b=="bigint")&&p!=="body"&&qm(d,""+b);break;case"className":Od(d,"class",b);break;case"tabIndex":Od(d,"tabindex",b);break;case"dir":case"role":case"viewBox":case"width":case"height":Od(d,y,b);break;case"style":i7(d,b,L);break;case"data":if(p!=="object"){Od(d,"data",b);break}case"src":case"href":if(b===""&&(p!=="a"||y!=="href")){d.removeAttribute(y);break}if(b==null||typeof b=="function"||typeof b=="symbol"||typeof b=="boolean"){d.removeAttribute(y);break}b=fE(""+b),d.setAttribute(y,b);break;case"action":case"formAction":if(typeof b=="function"){d.setAttribute(y,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof L=="function"&&(y==="formAction"?(p!=="input"&&er(d,p,"name",P.name,P,null),er(d,p,"formEncType",P.formEncType,P,null),er(d,p,"formMethod",P.formMethod,P,null),er(d,p,"formTarget",P.formTarget,P,null)):(er(d,p,"encType",P.encType,P,null),er(d,p,"method",P.method,P,null),er(d,p,"target",P.target,P,null)));if(b==null||typeof b=="symbol"||typeof b=="boolean"){d.removeAttribute(y);break}b=fE(""+b),d.setAttribute(y,b);break;case"onClick":b!=null&&(d.onclick=Vc);break;case"onScroll":b!=null&&wn("scroll",d);break;case"onScrollEnd":b!=null&&wn("scrollend",d);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(r(61));if(y=b.__html,y!=null){if(P.children!=null)throw Error(r(60));d.innerHTML=y}}break;case"multiple":d.multiple=b&&typeof b!="function"&&typeof b!="symbol";break;case"muted":d.muted=b&&typeof b!="function"&&typeof b!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(b==null||typeof b=="function"||typeof b=="boolean"||typeof b=="symbol"){d.removeAttribute("xlink:href");break}y=fE(""+b),d.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",y);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":b!=null&&typeof b!="function"&&typeof b!="symbol"?d.setAttribute(y,""+b):d.removeAttribute(y);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":b&&typeof b!="function"&&typeof b!="symbol"?d.setAttribute(y,""):d.removeAttribute(y);break;case"capture":case"download":b===!0?d.setAttribute(y,""):b!==!1&&b!=null&&typeof b!="function"&&typeof b!="symbol"?d.setAttribute(y,b):d.removeAttribute(y);break;case"cols":case"rows":case"size":case"span":b!=null&&typeof b!="function"&&typeof b!="symbol"&&!isNaN(b)&&1<=b?d.setAttribute(y,b):d.removeAttribute(y);break;case"rowSpan":case"start":b==null||typeof b=="function"||typeof b=="symbol"||isNaN(b)?d.removeAttribute(y):d.setAttribute(y,b);break;case"popover":wn("beforetoggle",d),wn("toggle",d),Rd(d,"popover",b);break;case"xlinkActuate":Hc(d,"http://www.w3.org/1999/xlink","xlink:actuate",b);break;case"xlinkArcrole":Hc(d,"http://www.w3.org/1999/xlink","xlink:arcrole",b);break;case"xlinkRole":Hc(d,"http://www.w3.org/1999/xlink","xlink:role",b);break;case"xlinkShow":Hc(d,"http://www.w3.org/1999/xlink","xlink:show",b);break;case"xlinkTitle":Hc(d,"http://www.w3.org/1999/xlink","xlink:title",b);break;case"xlinkType":Hc(d,"http://www.w3.org/1999/xlink","xlink:type",b);break;case"xmlBase":Hc(d,"http://www.w3.org/XML/1998/namespace","xml:base",b);break;case"xmlLang":Hc(d,"http://www.w3.org/XML/1998/namespace","xml:lang",b);break;case"xmlSpace":Hc(d,"http://www.w3.org/XML/1998/namespace","xml:space",b);break;case"is":Rd(d,"is",b);break;case"innerText":case"textContent":break;default:(!(2<y.length)||y[0]!=="o"&&y[0]!=="O"||y[1]!=="n"&&y[1]!=="N")&&(y=S0e.get(y)||y,Rd(d,y,b))}}function jI(d,p,y,b,P,L){switch(y){case"style":i7(d,b,L);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(r(61));if(y=b.__html,y!=null){if(P.children!=null)throw Error(r(60));d.innerHTML=y}}break;case"children":typeof b=="string"?qm(d,b):(typeof b=="number"||typeof b=="bigint")&&qm(d,""+b);break;case"onScroll":b!=null&&wn("scroll",d);break;case"onScrollEnd":b!=null&&wn("scrollend",d);break;case"onClick":b!=null&&(d.onclick=Vc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Sr.hasOwnProperty(y))e:{if(y[0]==="o"&&y[1]==="n"&&(P=y.endsWith("Capture"),p=y.slice(2,P?y.length-7:void 0),L=d[ct]||null,L=L!=null?L[y]:null,typeof L=="function"&&d.removeEventListener(p,L,P),typeof b=="function")){typeof L!="function"&&L!==null&&(y in d?d[y]=null:d.hasAttribute(y)&&d.removeAttribute(y)),d.addEventListener(p,b,P);break e}y in d?d[y]=b:b===!0?d.setAttribute(y,""):Rd(d,y,b)}}}function Ki(d,p,y){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":wn("error",d),wn("load",d);var b=!1,P=!1,L;for(L in y)if(y.hasOwnProperty(L)){var ne=y[L];if(ne!=null)switch(L){case"src":b=!0;break;case"srcSet":P=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,p));default:er(d,p,L,ne,y,null)}}P&&er(d,p,"srcSet",y.srcSet,y,null),b&&er(d,p,"src",y.src,y,null);return;case"input":wn("invalid",d);var de=L=ne=P=null,we=null,Le=null;for(b in y)if(y.hasOwnProperty(b)){var qe=y[b];if(qe!=null)switch(b){case"name":P=qe;break;case"type":ne=qe;break;case"checked":we=qe;break;case"defaultChecked":Le=qe;break;case"value":L=qe;break;case"defaultValue":de=qe;break;case"children":case"dangerouslySetInnerHTML":if(qe!=null)throw Error(r(137,p));break;default:er(d,p,b,qe,y,null)}}e7(d,L,de,we,Le,ne,P,!1);return;case"select":wn("invalid",d),b=ne=L=null;for(P in y)if(y.hasOwnProperty(P)&&(de=y[P],de!=null))switch(P){case"value":L=de;break;case"defaultValue":ne=de;break;case"multiple":b=de;default:er(d,p,P,de,y,null)}p=L,y=ne,d.multiple=!!b,p!=null?Vm(d,!!b,p,!1):y!=null&&Vm(d,!!b,y,!0);return;case"textarea":wn("invalid",d),L=P=b=null;for(ne in y)if(y.hasOwnProperty(ne)&&(de=y[ne],de!=null))switch(ne){case"value":b=de;break;case"defaultValue":P=de;break;case"children":L=de;break;case"dangerouslySetInnerHTML":if(de!=null)throw Error(r(91));break;default:er(d,p,ne,de,y,null)}n7(d,b,P,L);return;case"option":for(we in y)if(y.hasOwnProperty(we)&&(b=y[we],b!=null))switch(we){case"selected":d.selected=b&&typeof b!="function"&&typeof b!="symbol";break;default:er(d,p,we,b,y,null)}return;case"dialog":wn("beforetoggle",d),wn("toggle",d),wn("cancel",d),wn("close",d);break;case"iframe":case"object":wn("load",d);break;case"video":case"audio":for(b=0;b<Bv.length;b++)wn(Bv[b],d);break;case"image":wn("error",d),wn("load",d);break;case"details":wn("toggle",d);break;case"embed":case"source":case"link":wn("error",d),wn("load",d);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Le in y)if(y.hasOwnProperty(Le)&&(b=y[Le],b!=null))switch(Le){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,p));default:er(d,p,Le,b,y,null)}return;default:if(QN(p)){for(qe in y)y.hasOwnProperty(qe)&&(b=y[qe],b!==void 0&&jI(d,p,qe,b,y,void 0));return}}for(de in y)y.hasOwnProperty(de)&&(b=y[de],b!=null&&er(d,p,de,b,y,null))}function Jge(d,p,y,b){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var P=null,L=null,ne=null,de=null,we=null,Le=null,qe=null;for(He in y){var Qe=y[He];if(y.hasOwnProperty(He)&&Qe!=null)switch(He){case"checked":break;case"value":break;case"defaultValue":we=Qe;default:b.hasOwnProperty(He)||er(d,p,He,null,b,Qe)}}for(var Ue in b){var He=b[Ue];if(Qe=y[Ue],b.hasOwnProperty(Ue)&&(He!=null||Qe!=null))switch(Ue){case"type":L=He;break;case"name":P=He;break;case"checked":Le=He;break;case"defaultChecked":qe=He;break;case"value":ne=He;break;case"defaultValue":de=He;break;case"children":case"dangerouslySetInnerHTML":if(He!=null)throw Error(r(137,p));break;default:He!==Qe&&er(d,p,Ue,He,b,Qe)}}JN(d,ne,de,we,Le,qe,L,P);return;case"select":He=ne=de=Ue=null;for(L in y)if(we=y[L],y.hasOwnProperty(L)&&we!=null)switch(L){case"value":break;case"multiple":He=we;default:b.hasOwnProperty(L)||er(d,p,L,null,b,we)}for(P in b)if(L=b[P],we=y[P],b.hasOwnProperty(P)&&(L!=null||we!=null))switch(P){case"value":Ue=L;break;case"defaultValue":de=L;break;case"multiple":ne=L;default:L!==we&&er(d,p,P,L,b,we)}p=de,y=ne,b=He,Ue!=null?Vm(d,!!y,Ue,!1):!!b!=!!y&&(p!=null?Vm(d,!!y,p,!0):Vm(d,!!y,y?[]:"",!1));return;case"textarea":He=Ue=null;for(de in y)if(P=y[de],y.hasOwnProperty(de)&&P!=null&&!b.hasOwnProperty(de))switch(de){case"value":break;case"children":break;default:er(d,p,de,null,b,P)}for(ne in b)if(P=b[ne],L=y[ne],b.hasOwnProperty(ne)&&(P!=null||L!=null))switch(ne){case"value":Ue=P;break;case"defaultValue":He=P;break;case"children":break;case"dangerouslySetInnerHTML":if(P!=null)throw Error(r(91));break;default:P!==L&&er(d,p,ne,P,b,L)}t7(d,Ue,He);return;case"option":for(var Nt in y)if(Ue=y[Nt],y.hasOwnProperty(Nt)&&Ue!=null&&!b.hasOwnProperty(Nt))switch(Nt){case"selected":d.selected=!1;break;default:er(d,p,Nt,null,b,Ue)}for(we in b)if(Ue=b[we],He=y[we],b.hasOwnProperty(we)&&Ue!==He&&(Ue!=null||He!=null))switch(we){case"selected":d.selected=Ue&&typeof Ue!="function"&&typeof Ue!="symbol";break;default:er(d,p,we,Ue,b,He)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Gt in y)Ue=y[Gt],y.hasOwnProperty(Gt)&&Ue!=null&&!b.hasOwnProperty(Gt)&&er(d,p,Gt,null,b,Ue);for(Le in b)if(Ue=b[Le],He=y[Le],b.hasOwnProperty(Le)&&Ue!==He&&(Ue!=null||He!=null))switch(Le){case"children":case"dangerouslySetInnerHTML":if(Ue!=null)throw Error(r(137,p));break;default:er(d,p,Le,Ue,b,He)}return;default:if(QN(p)){for(var tr in y)Ue=y[tr],y.hasOwnProperty(tr)&&Ue!==void 0&&!b.hasOwnProperty(tr)&&jI(d,p,tr,void 0,b,Ue);for(qe in b)Ue=b[qe],He=y[qe],!b.hasOwnProperty(qe)||Ue===He||Ue===void 0&&He===void 0||jI(d,p,qe,Ue,b,He);return}}for(var _e in y)Ue=y[_e],y.hasOwnProperty(_e)&&Ue!=null&&!b.hasOwnProperty(_e)&&er(d,p,_e,null,b,Ue);for(Qe in b)Ue=b[Qe],He=y[Qe],!b.hasOwnProperty(Qe)||Ue===He||Ue==null&&He==null||er(d,p,Qe,Ue,b,He)}function s9(d){switch(d){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Xge(){if(typeof performance.getEntriesByType=="function"){for(var d=0,p=0,y=performance.getEntriesByType("resource"),b=0;b<y.length;b++){var P=y[b],L=P.transferSize,ne=P.initiatorType,de=P.duration;if(L&&de&&s9(ne)){for(ne=0,de=P.responseEnd,b+=1;b<y.length;b++){var we=y[b],Le=we.startTime;if(Le>de)break;var qe=we.transferSize,Qe=we.initiatorType;qe&&s9(Qe)&&(we=we.responseEnd,ne+=qe*(we<de?1:(de-Le)/(we-Le)))}if(--b,p+=8*(L+ne)/(P.duration/1e3),d++,10<d)break}}if(0<d)return p/d/1e6}return navigator.connection&&(d=navigator.connection.downlink,typeof d=="number")?d:5}var UI=null,FI=null;function aS(d){return d.nodeType===9?d:d.ownerDocument}function o9(d){switch(d){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function a9(d,p){if(d===0)switch(p){case"svg":return 1;case"math":return 2;default:return 0}return d===1&&p==="foreignObject"?0:d}function $I(d,p){return d==="textarea"||d==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.children=="bigint"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var zI=null;function Qge(){var d=window.event;return d&&d.type==="popstate"?d===zI?!1:(zI=d,!0):(zI=null,!1)}var l9=typeof setTimeout=="function"?setTimeout:void 0,Zge=typeof clearTimeout=="function"?clearTimeout:void 0,c9=typeof Promise=="function"?Promise:void 0,eye=typeof queueMicrotask=="function"?queueMicrotask:typeof c9<"u"?function(d){return c9.resolve(null).then(d).catch(tye)}:l9;function tye(d){setTimeout(function(){throw d})}function Xd(d){return d==="head"}function u9(d,p){var y=p,b=0;do{var P=y.nextSibling;if(d.removeChild(y),P&&P.nodeType===8)if(y=P.data,y==="/$"||y==="/&"){if(b===0){d.removeChild(P),E0(p);return}b--}else if(y==="$"||y==="$?"||y==="$~"||y==="$!"||y==="&")b++;else if(y==="html")Uv(d.ownerDocument.documentElement);else if(y==="head"){y=d.ownerDocument.head,Uv(y);for(var L=y.firstChild;L;){var ne=L.nextSibling,de=L.nodeName;L[Qo]||de==="SCRIPT"||de==="STYLE"||de==="LINK"&&L.rel.toLowerCase()==="stylesheet"||y.removeChild(L),L=ne}}else y==="body"&&Uv(d.ownerDocument.body);y=P}while(y);E0(p)}function d9(d,p){var y=d;d=0;do{var b=y.nextSibling;if(y.nodeType===1?p?(y._stashedDisplay=y.style.display,y.style.display="none"):(y.style.display=y._stashedDisplay||"",y.getAttribute("style")===""&&y.removeAttribute("style")):y.nodeType===3&&(p?(y._stashedText=y.nodeValue,y.nodeValue=""):y.nodeValue=y._stashedText||""),b&&b.nodeType===8)if(y=b.data,y==="/$"){if(d===0)break;d--}else y!=="$"&&y!=="$?"&&y!=="$~"&&y!=="$!"||d++;y=b}while(y)}function HI(d){var p=d.firstChild;for(p&&p.nodeType===10&&(p=p.nextSibling);p;){var y=p;switch(p=p.nextSibling,y.nodeName){case"HTML":case"HEAD":case"BODY":HI(y),Bl(y);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(y.rel.toLowerCase()==="stylesheet")continue}d.removeChild(y)}}function nye(d,p,y,b){for(;d.nodeType===1;){var P=y;if(d.nodeName.toLowerCase()!==p.toLowerCase()){if(!b&&(d.nodeName!=="INPUT"||d.type!=="hidden"))break}else if(b){if(!d[Qo])switch(p){case"meta":if(!d.hasAttribute("itemprop"))break;return d;case"link":if(L=d.getAttribute("rel"),L==="stylesheet"&&d.hasAttribute("data-precedence"))break;if(L!==P.rel||d.getAttribute("href")!==(P.href==null||P.href===""?null:P.href)||d.getAttribute("crossorigin")!==(P.crossOrigin==null?null:P.crossOrigin)||d.getAttribute("title")!==(P.title==null?null:P.title))break;return d;case"style":if(d.hasAttribute("data-precedence"))break;return d;case"script":if(L=d.getAttribute("src"),(L!==(P.src==null?null:P.src)||d.getAttribute("type")!==(P.type==null?null:P.type)||d.getAttribute("crossorigin")!==(P.crossOrigin==null?null:P.crossOrigin))&&L&&d.hasAttribute("async")&&!d.hasAttribute("itemprop"))break;return d;default:return d}}else if(p==="input"&&d.type==="hidden"){var L=P.name==null?null:""+P.name;if(P.type==="hidden"&&d.getAttribute("name")===L)return d}else return d;if(d=la(d.nextSibling),d===null)break}return null}function rye(d,p,y){if(p==="")return null;for(;d.nodeType!==3;)if((d.nodeType!==1||d.nodeName!=="INPUT"||d.type!=="hidden")&&!y||(d=la(d.nextSibling),d===null))return null;return d}function f9(d,p){for(;d.nodeType!==8;)if((d.nodeType!==1||d.nodeName!=="INPUT"||d.type!=="hidden")&&!p||(d=la(d.nextSibling),d===null))return null;return d}function VI(d){return d.data==="$?"||d.data==="$~"}function qI(d){return d.data==="$!"||d.data==="$?"&&d.ownerDocument.readyState!=="loading"}function iye(d,p){var y=d.ownerDocument;if(d.data==="$~")d._reactRetry=p;else if(d.data!=="$?"||y.readyState!=="loading")p();else{var b=function(){p(),y.removeEventListener("DOMContentLoaded",b)};y.addEventListener("DOMContentLoaded",b),d._reactRetry=b}}function la(d){for(;d!=null;d=d.nextSibling){var p=d.nodeType;if(p===1||p===3)break;if(p===8){if(p=d.data,p==="$"||p==="$!"||p==="$?"||p==="$~"||p==="&"||p==="F!"||p==="F")break;if(p==="/$"||p==="/&")return null}}return d}var GI=null;function h9(d){d=d.nextSibling;for(var p=0;d;){if(d.nodeType===8){var y=d.data;if(y==="/$"||y==="/&"){if(p===0)return la(d.nextSibling);p--}else y!=="$"&&y!=="$!"&&y!=="$?"&&y!=="$~"&&y!=="&"||p++}d=d.nextSibling}return null}function p9(d){d=d.previousSibling;for(var p=0;d;){if(d.nodeType===8){var y=d.data;if(y==="$"||y==="$!"||y==="$?"||y==="$~"||y==="&"){if(p===0)return d;p--}else y!=="/$"&&y!=="/&"||p++}d=d.previousSibling}return null}function m9(d,p,y){switch(p=aS(y),d){case"html":if(d=p.documentElement,!d)throw Error(r(452));return d;case"head":if(d=p.head,!d)throw Error(r(453));return d;case"body":if(d=p.body,!d)throw Error(r(454));return d;default:throw Error(r(451))}}function Uv(d){for(var p=d.attributes;p.length;)d.removeAttributeNode(p[0]);Bl(d)}var ca=new Map,g9=new Set;function lS(d){return typeof d.getRootNode=="function"?d.getRootNode():d.nodeType===9?d:d.ownerDocument}var ou=z.d;z.d={f:sye,r:oye,D:aye,C:lye,L:cye,m:uye,X:fye,S:dye,M:hye};function sye(){var d=ou.f(),p=ZE();return d||p}function oye(d){var p=bo(d);p!==null&&p.tag===5&&p.type==="form"?OU(p):ou.r(d)}var v0=typeof document>"u"?null:document;function y9(d,p,y){var b=v0;if(b&&typeof p=="string"&&p){var P=ta(p);P='link[rel="'+d+'"][href="'+P+'"]',typeof y=="string"&&(P+='[crossorigin="'+y+'"]'),g9.has(P)||(g9.add(P),d={rel:d,crossOrigin:y,href:p},b.querySelector(P)===null&&(p=b.createElement("link"),Ki(p,"link",d),xr(p),b.head.appendChild(p)))}}function aye(d){ou.D(d),y9("dns-prefetch",d,null)}function lye(d,p){ou.C(d,p),y9("preconnect",d,p)}function cye(d,p,y){ou.L(d,p,y);var b=v0;if(b&&d&&p){var P='link[rel="preload"][as="'+ta(p)+'"]';p==="image"&&y&&y.imageSrcSet?(P+='[imagesrcset="'+ta(y.imageSrcSet)+'"]',typeof y.imageSizes=="string"&&(P+='[imagesizes="'+ta(y.imageSizes)+'"]')):P+='[href="'+ta(d)+'"]';var L=P;switch(p){case"style":L=b0(d);break;case"script":L=w0(d)}ca.has(L)||(d=f({rel:"preload",href:p==="image"&&y&&y.imageSrcSet?void 0:d,as:p},y),ca.set(L,d),b.querySelector(P)!==null||p==="style"&&b.querySelector(Fv(L))||p==="script"&&b.querySelector($v(L))||(p=b.createElement("link"),Ki(p,"link",d),xr(p),b.head.appendChild(p)))}}function uye(d,p){ou.m(d,p);var y=v0;if(y&&d){var b=p&&typeof p.as=="string"?p.as:"script",P='link[rel="modulepreload"][as="'+ta(b)+'"][href="'+ta(d)+'"]',L=P;switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":L=w0(d)}if(!ca.has(L)&&(d=f({rel:"modulepreload",href:d},p),ca.set(L,d),y.querySelector(P)===null)){switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(y.querySelector($v(L)))return}b=y.createElement("link"),Ki(b,"link",d),xr(b),y.head.appendChild(b)}}}function dye(d,p,y){ou.S(d,p,y);var b=v0;if(b&&d){var P=wo(b).hoistableStyles,L=b0(d);p=p||"default";var ne=P.get(L);if(!ne){var de={loading:0,preload:null};if(ne=b.querySelector(Fv(L)))de.loading=5;else{d=f({rel:"stylesheet",href:d,"data-precedence":p},y),(y=ca.get(L))&&KI(d,y);var we=ne=b.createElement("link");xr(we),Ki(we,"link",d),we._p=new Promise(function(Le,qe){we.onload=Le,we.onerror=qe}),we.addEventListener("load",function(){de.loading|=1}),we.addEventListener("error",function(){de.loading|=2}),de.loading|=4,cS(ne,p,b)}ne={type:"stylesheet",instance:ne,count:1,state:de},P.set(L,ne)}}}function fye(d,p){ou.X(d,p);var y=v0;if(y&&d){var b=wo(y).hoistableScripts,P=w0(d),L=b.get(P);L||(L=y.querySelector($v(P)),L||(d=f({src:d,async:!0},p),(p=ca.get(P))&&WI(d,p),L=y.createElement("script"),xr(L),Ki(L,"link",d),y.head.appendChild(L)),L={type:"script",instance:L,count:1,state:null},b.set(P,L))}}function hye(d,p){ou.M(d,p);var y=v0;if(y&&d){var b=wo(y).hoistableScripts,P=w0(d),L=b.get(P);L||(L=y.querySelector($v(P)),L||(d=f({src:d,async:!0,type:"module"},p),(p=ca.get(P))&&WI(d,p),L=y.createElement("script"),xr(L),Ki(L,"link",d),y.head.appendChild(L)),L={type:"script",instance:L,count:1,state:null},b.set(P,L))}}function x9(d,p,y,b){var P=(P=re.current)?lS(P):null;if(!P)throw Error(r(446));switch(d){case"meta":case"title":return null;case"style":return typeof y.precedence=="string"&&typeof y.href=="string"?(p=b0(y.href),y=wo(P).hoistableStyles,b=y.get(p),b||(b={type:"style",instance:null,count:0,state:null},y.set(p,b)),b):{type:"void",instance:null,count:0,state:null};case"link":if(y.rel==="stylesheet"&&typeof y.href=="string"&&typeof y.precedence=="string"){d=b0(y.href);var L=wo(P).hoistableStyles,ne=L.get(d);if(ne||(P=P.ownerDocument||P,ne={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},L.set(d,ne),(L=P.querySelector(Fv(d)))&&!L._p&&(ne.instance=L,ne.state.loading=5),ca.has(d)||(y={rel:"preload",as:"style",href:y.href,crossOrigin:y.crossOrigin,integrity:y.integrity,media:y.media,hrefLang:y.hrefLang,referrerPolicy:y.referrerPolicy},ca.set(d,y),L||pye(P,d,y,ne.state))),p&&b===null)throw Error(r(528,""));return ne}if(p&&b!==null)throw Error(r(529,""));return null;case"script":return p=y.async,y=y.src,typeof y=="string"&&p&&typeof p!="function"&&typeof p!="symbol"?(p=w0(y),y=wo(P).hoistableScripts,b=y.get(p),b||(b={type:"script",instance:null,count:0,state:null},y.set(p,b)),b):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,d))}}function b0(d){return'href="'+ta(d)+'"'}function Fv(d){return'link[rel="stylesheet"]['+d+"]"}function v9(d){return f({},d,{"data-precedence":d.precedence,precedence:null})}function pye(d,p,y,b){d.querySelector('link[rel="preload"][as="style"]['+p+"]")?b.loading=1:(p=d.createElement("link"),b.preload=p,p.addEventListener("load",function(){return b.loading|=1}),p.addEventListener("error",function(){return b.loading|=2}),Ki(p,"link",y),xr(p),d.head.appendChild(p))}function w0(d){return'[src="'+ta(d)+'"]'}function $v(d){return"script[async]"+d}function b9(d,p,y){if(p.count++,p.instance===null)switch(p.type){case"style":var b=d.querySelector('style[data-href~="'+ta(y.href)+'"]');if(b)return p.instance=b,xr(b),b;var P=f({},y,{"data-href":y.href,"data-precedence":y.precedence,href:null,precedence:null});return b=(d.ownerDocument||d).createElement("style"),xr(b),Ki(b,"style",P),cS(b,y.precedence,d),p.instance=b;case"stylesheet":P=b0(y.href);var L=d.querySelector(Fv(P));if(L)return p.state.loading|=4,p.instance=L,xr(L),L;b=v9(y),(P=ca.get(P))&&KI(b,P),L=(d.ownerDocument||d).createElement("link"),xr(L);var ne=L;return ne._p=new Promise(function(de,we){ne.onload=de,ne.onerror=we}),Ki(L,"link",b),p.state.loading|=4,cS(L,y.precedence,d),p.instance=L;case"script":return L=w0(y.src),(P=d.querySelector($v(L)))?(p.instance=P,xr(P),P):(b=y,(P=ca.get(L))&&(b=f({},y),WI(b,P)),d=d.ownerDocument||d,P=d.createElement("script"),xr(P),Ki(P,"link",b),d.head.appendChild(P),p.instance=P);case"void":return null;default:throw Error(r(443,p.type))}else p.type==="stylesheet"&&(p.state.loading&4)===0&&(b=p.instance,p.state.loading|=4,cS(b,y.precedence,d));return p.instance}function cS(d,p,y){for(var b=y.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),P=b.length?b[b.length-1]:null,L=P,ne=0;ne<b.length;ne++){var de=b[ne];if(de.dataset.precedence===p)L=de;else if(L!==P)break}L?L.parentNode.insertBefore(d,L.nextSibling):(p=y.nodeType===9?y.head:y,p.insertBefore(d,p.firstChild))}function KI(d,p){d.crossOrigin==null&&(d.crossOrigin=p.crossOrigin),d.referrerPolicy==null&&(d.referrerPolicy=p.referrerPolicy),d.title==null&&(d.title=p.title)}function WI(d,p){d.crossOrigin==null&&(d.crossOrigin=p.crossOrigin),d.referrerPolicy==null&&(d.referrerPolicy=p.referrerPolicy),d.integrity==null&&(d.integrity=p.integrity)}var uS=null;function w9(d,p,y){if(uS===null){var b=new Map,P=uS=new Map;P.set(y,b)}else P=uS,b=P.get(y),b||(b=new Map,P.set(y,b));if(b.has(d))return b;for(b.set(d,null),y=y.getElementsByTagName(d),P=0;P<y.length;P++){var L=y[P];if(!(L[Qo]||L[mt]||d==="link"&&L.getAttribute("rel")==="stylesheet")&&L.namespaceURI!=="http://www.w3.org/2000/svg"){var ne=L.getAttribute(p)||"";ne=d+ne;var de=b.get(ne);de?de.push(L):b.set(ne,[L])}}return b}function E9(d,p,y){d=d.ownerDocument||d,d.head.insertBefore(y,p==="title"?d.querySelector("head > title"):null)}function mye(d,p,y){if(y===1||p.itemProp!=null)return!1;switch(d){case"meta":case"title":return!0;case"style":if(typeof p.precedence!="string"||typeof p.href!="string"||p.href==="")break;return!0;case"link":if(typeof p.rel!="string"||typeof p.href!="string"||p.href===""||p.onLoad||p.onError)break;switch(p.rel){case"stylesheet":return d=p.disabled,typeof p.precedence=="string"&&d==null;default:return!0}case"script":if(p.async&&typeof p.async!="function"&&typeof p.async!="symbol"&&!p.onLoad&&!p.onError&&p.src&&typeof p.src=="string")return!0}return!1}function S9(d){return!(d.type==="stylesheet"&&(d.state.loading&3)===0)}function gye(d,p,y,b){if(y.type==="stylesheet"&&(typeof b.media!="string"||matchMedia(b.media).matches!==!1)&&(y.state.loading&4)===0){if(y.instance===null){var P=b0(b.href),L=p.querySelector(Fv(P));if(L){p=L._p,p!==null&&typeof p=="object"&&typeof p.then=="function"&&(d.count++,d=dS.bind(d),p.then(d,d)),y.state.loading|=4,y.instance=L,xr(L);return}L=p.ownerDocument||p,b=v9(b),(P=ca.get(P))&&KI(b,P),L=L.createElement("link"),xr(L);var ne=L;ne._p=new Promise(function(de,we){ne.onload=de,ne.onerror=we}),Ki(L,"link",b),y.instance=L}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(y,p),(p=y.state.preload)&&(y.state.loading&3)===0&&(d.count++,y=dS.bind(d),p.addEventListener("load",y),p.addEventListener("error",y))}}var YI=0;function yye(d,p){return d.stylesheets&&d.count===0&&hS(d,d.stylesheets),0<d.count||0<d.imgCount?function(y){var b=setTimeout(function(){if(d.stylesheets&&hS(d,d.stylesheets),d.unsuspend){var L=d.unsuspend;d.unsuspend=null,L()}},6e4+p);0<d.imgBytes&&YI===0&&(YI=62500*Xge());var P=setTimeout(function(){if(d.waitingForImages=!1,d.count===0&&(d.stylesheets&&hS(d,d.stylesheets),d.unsuspend)){var L=d.unsuspend;d.unsuspend=null,L()}},(d.imgBytes>YI?50:800)+p);return d.unsuspend=y,function(){d.unsuspend=null,clearTimeout(b),clearTimeout(P)}}:null}function dS(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)hS(this,this.stylesheets);else if(this.unsuspend){var d=this.unsuspend;this.unsuspend=null,d()}}}var fS=null;function hS(d,p){d.stylesheets=null,d.unsuspend!==null&&(d.count++,fS=new Map,p.forEach(xye,d),fS=null,dS.call(d))}function xye(d,p){if(!(p.state.loading&4)){var y=fS.get(d);if(y)var b=y.get(null);else{y=new Map,fS.set(d,y);for(var P=d.querySelectorAll("link[data-precedence],style[data-precedence]"),L=0;L<P.length;L++){var ne=P[L];(ne.nodeName==="LINK"||ne.getAttribute("media")!=="not all")&&(y.set(ne.dataset.precedence,ne),b=ne)}b&&y.set(null,b)}P=p.instance,ne=P.getAttribute("data-precedence"),L=y.get(ne)||b,L===b&&y.set(null,P),y.set(ne,P),this.count++,b=dS.bind(this),P.addEventListener("load",b),P.addEventListener("error",b),L?L.parentNode.insertBefore(P,L.nextSibling):(d=d.nodeType===9?d.head:d,d.insertBefore(P,d.firstChild)),p.state.loading|=4}}var zv={$$typeof:k,Provider:null,Consumer:null,_currentValue:G,_currentValue2:G,_threadCount:0};function vye(d,p,y,b,P,L,ne,de,we){this.tag=1,this.containerInfo=d,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=le(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=le(0),this.hiddenUpdates=le(null),this.identifierPrefix=b,this.onUncaughtError=P,this.onCaughtError=L,this.onRecoverableError=ne,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=we,this.incompleteTransitions=new Map}function A9(d,p,y,b,P,L,ne,de,we,Le,qe,Qe){return d=new vye(d,p,y,ne,we,Le,qe,Qe,de),p=1,L===!0&&(p|=24),L=So(3,null,null,p),d.current=L,L.stateNode=d,p=N_(),p.refCount++,d.pooledCache=p,p.refCount++,L.memoizedState={element:b,isDehydrated:y,cache:p},R_(L),d}function T9(d){return d?(d=Qm,d):Qm}function k9(d,p,y,b,P,L){P=T9(P),b.context===null?b.context=P:b.pendingContext=P,b=Fd(p),b.payload={element:y},L=L===void 0?null:L,L!==null&&(b.callback=L),y=$d(d,b,p),y!==null&&(ro(y,d,p),bv(y,d,p))}function C9(d,p){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var y=d.retryLane;d.retryLane=y!==0&&y<p?y:p}}function JI(d,p){C9(d,p),(d=d.alternate)&&C9(d,p)}function N9(d){if(d.tag===13||d.tag===31){var p=Th(d,67108864);p!==null&&ro(p,d,67108864),JI(d,67108864)}}function _9(d){if(d.tag===13||d.tag===31){var p=No();p=$e(p);var y=Th(d,p);y!==null&&ro(y,d,p),JI(d,p)}}var pS=!0;function bye(d,p,y,b){var P=M.T;M.T=null;var L=z.p;try{z.p=2,XI(d,p,y,b)}finally{z.p=L,M.T=P}}function wye(d,p,y,b){var P=M.T;M.T=null;var L=z.p;try{z.p=8,XI(d,p,y,b)}finally{z.p=L,M.T=P}}function XI(d,p,y,b){if(pS){var P=QI(b);if(P===null)BI(d,p,b,mS,y),P9(d,b);else if(Sye(P,d,p,y,b))b.stopPropagation();else if(P9(d,b),p&4&&-1<Eye.indexOf(d)){for(;P!==null;){var L=bo(P);if(L!==null)switch(L.tag){case 3:if(L=L.stateNode,L.current.memoizedState.isDehydrated){var ne=sn(L.pendingLanes);if(ne!==0){var de=L;for(de.pendingLanes|=2,de.entangledLanes|=2;ne;){var we=1<<31-ye(ne);de.entanglements[1]|=we,ne&=~we}$l(L),(zn&6)===0&&(XE=At()+500,Lv(0))}}break;case 31:case 13:de=Th(L,2),de!==null&&ro(de,L,2),ZE(),JI(L,2)}if(L=QI(b),L===null&&BI(d,p,b,mS,y),L===P)break;P=L}P!==null&&b.stopPropagation()}else BI(d,p,b,null,y)}}function QI(d){return d=e_(d),ZI(d)}var mS=null;function ZI(d){if(mS=null,d=vo(d),d!==null){var p=s(d);if(p===null)d=null;else{var y=p.tag;if(y===13){if(d=o(p),d!==null)return d;d=null}else if(y===31){if(d=a(p),d!==null)return d;d=null}else if(y===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;d=null}else p!==d&&(d=null)}}return mS=d,null}function I9(d){switch(d){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(un()){case Pe:return 2;case Ve:return 8;case ft:case lt:return 32;case se:return 268435456;default:return 32}default:return 32}}var eP=!1,Qd=null,Zd=null,ef=null,Hv=new Map,Vv=new Map,tf=[],Eye="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function P9(d,p){switch(d){case"focusin":case"focusout":Qd=null;break;case"dragenter":case"dragleave":Zd=null;break;case"mouseover":case"mouseout":ef=null;break;case"pointerover":case"pointerout":Hv.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vv.delete(p.pointerId)}}function qv(d,p,y,b,P,L){return d===null||d.nativeEvent!==L?(d={blockedOn:p,domEventName:y,eventSystemFlags:b,nativeEvent:L,targetContainers:[P]},p!==null&&(p=bo(p),p!==null&&N9(p)),d):(d.eventSystemFlags|=b,p=d.targetContainers,P!==null&&p.indexOf(P)===-1&&p.push(P),d)}function Sye(d,p,y,b,P){switch(p){case"focusin":return Qd=qv(Qd,d,p,y,b,P),!0;case"dragenter":return Zd=qv(Zd,d,p,y,b,P),!0;case"mouseover":return ef=qv(ef,d,p,y,b,P),!0;case"pointerover":var L=P.pointerId;return Hv.set(L,qv(Hv.get(L)||null,d,p,y,b,P)),!0;case"gotpointercapture":return L=P.pointerId,Vv.set(L,qv(Vv.get(L)||null,d,p,y,b,P)),!0}return!1}function R9(d){var p=vo(d.target);if(p!==null){var y=s(p);if(y!==null){if(p=y.tag,p===13){if(p=o(y),p!==null){d.blockedOn=p,Vt(d.priority,function(){_9(y)});return}}else if(p===31){if(p=a(y),p!==null){d.blockedOn=p,Vt(d.priority,function(){_9(y)});return}}else if(p===3&&y.stateNode.current.memoizedState.isDehydrated){d.blockedOn=y.tag===3?y.stateNode.containerInfo:null;return}}}d.blockedOn=null}function gS(d){if(d.blockedOn!==null)return!1;for(var p=d.targetContainers;0<p.length;){var y=QI(d.nativeEvent);if(y===null){y=d.nativeEvent;var b=new y.constructor(y.type,y);ZN=b,y.target.dispatchEvent(b),ZN=null}else return p=bo(y),p!==null&&N9(p),d.blockedOn=y,!1;p.shift()}return!0}function O9(d,p,y){gS(d)&&y.delete(p)}function Aye(){eP=!1,Qd!==null&&gS(Qd)&&(Qd=null),Zd!==null&&gS(Zd)&&(Zd=null),ef!==null&&gS(ef)&&(ef=null),Hv.forEach(O9),Vv.forEach(O9)}function yS(d,p){d.blockedOn===p&&(d.blockedOn=null,eP||(eP=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Aye)))}var xS=null;function M9(d){xS!==d&&(xS=d,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){xS===d&&(xS=null);for(var p=0;p<d.length;p+=3){var y=d[p],b=d[p+1],P=d[p+2];if(typeof b!="function"){if(ZI(b||y)===null)continue;break}var L=bo(y);L!==null&&(d.splice(p,3),p-=3,Q_(L,{pending:!0,data:P,method:y.method,action:b},b,P))}}))}function E0(d){function p(we){return yS(we,d)}Qd!==null&&yS(Qd,d),Zd!==null&&yS(Zd,d),ef!==null&&yS(ef,d),Hv.forEach(p),Vv.forEach(p);for(var y=0;y<tf.length;y++){var b=tf[y];b.blockedOn===d&&(b.blockedOn=null)}for(;0<tf.length&&(y=tf[0],y.blockedOn===null);)R9(y),y.blockedOn===null&&tf.shift();if(y=(d.ownerDocument||d).$$reactFormReplay,y!=null)for(b=0;b<y.length;b+=3){var P=y[b],L=y[b+1],ne=P[ct]||null;if(typeof L=="function")ne||M9(y);else if(ne){var de=null;if(L&&L.hasAttribute("formAction")){if(P=L,ne=L[ct]||null)de=ne.formAction;else if(ZI(P)!==null)continue}else de=ne.action;typeof de=="function"?y[b+1]=de:(y.splice(b,3),b-=3),M9(y)}}}function D9(){function d(L){L.canIntercept&&L.info==="react-transition"&&L.intercept({handler:function(){return new Promise(function(ne){return P=ne})},focusReset:"manual",scroll:"manual"})}function p(){P!==null&&(P(),P=null),b||setTimeout(y,20)}function y(){if(!b&&!navigation.transition){var L=navigation.currentEntry;L&&L.url!=null&&navigation.navigate(L.url,{state:L.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var b=!1,P=null;return navigation.addEventListener("navigate",d),navigation.addEventListener("navigatesuccess",p),navigation.addEventListener("navigateerror",p),setTimeout(y,100),function(){b=!0,navigation.removeEventListener("navigate",d),navigation.removeEventListener("navigatesuccess",p),navigation.removeEventListener("navigateerror",p),P!==null&&(P(),P=null)}}}function tP(d){this._internalRoot=d}vS.prototype.render=tP.prototype.render=function(d){var p=this._internalRoot;if(p===null)throw Error(r(409));var y=p.current,b=No();k9(y,b,d,p,null,null)},vS.prototype.unmount=tP.prototype.unmount=function(){var d=this._internalRoot;if(d!==null){this._internalRoot=null;var p=d.containerInfo;k9(d.current,2,null,d,null,null),ZE(),p[Xs]=null}};function vS(d){this._internalRoot=d}vS.prototype.unstable_scheduleHydration=function(d){if(d){var p=Kt();d={blockedOn:null,target:d,priority:p};for(var y=0;y<tf.length&&p!==0&&p<tf[y].priority;y++);tf.splice(y,0,d),y===0&&R9(d)}};var L9=e.version;if(L9!=="19.2.3")throw Error(r(527,L9,"19.2.3"));z.findDOMNode=function(d){var p=d._reactInternals;if(p===void 0)throw typeof d.render=="function"?Error(r(188)):(d=Object.keys(d).join(","),Error(r(268,d)));return d=c(p),d=d!==null?u(d):null,d=d===null?null:d.stateNode,d};var Tye={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:M,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bS=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bS.isDisabled&&bS.supportsFiber)try{fe=bS.inject(Tye),be=bS}catch{}}return Wv.createRoot=function(d,p){if(!i(d))throw Error(r(299));var y=!1,b="",P=HU,L=VU,ne=qU;return p!=null&&(p.unstable_strictMode===!0&&(y=!0),p.identifierPrefix!==void 0&&(b=p.identifierPrefix),p.onUncaughtError!==void 0&&(P=p.onUncaughtError),p.onCaughtError!==void 0&&(L=p.onCaughtError),p.onRecoverableError!==void 0&&(ne=p.onRecoverableError)),p=A9(d,1,!1,null,null,y,b,null,P,L,ne,D9),d[Xs]=p.current,LI(d),new tP(p)},Wv.hydrateRoot=function(d,p,y){if(!i(d))throw Error(r(299));var b=!1,P="",L=HU,ne=VU,de=qU,we=null;return y!=null&&(y.unstable_strictMode===!0&&(b=!0),y.identifierPrefix!==void 0&&(P=y.identifierPrefix),y.onUncaughtError!==void 0&&(L=y.onUncaughtError),y.onCaughtError!==void 0&&(ne=y.onCaughtError),y.onRecoverableError!==void 0&&(de=y.onRecoverableError),y.formState!==void 0&&(we=y.formState)),p=A9(d,1,!0,p,y??null,b,P,we,L,ne,de,D9),p.context=T9(null),y=p.current,b=No(),b=$e(b),P=Fd(b),P.callback=null,$d(y,P,b),y=b,p.current.lanes=y,Q(p,y),$l(p),d[Xs]=p.current,LI(d),new vS(p)},Wv.version="19.2.3",Wv}var K9;function Yye(){if(K9)return oP.exports;K9=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),oP.exports=Wye(),oP.exports}var Jye=Yye();const Xye=cs(Jye);var uc=function(){return uc=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},uc.apply(this,arguments)};function wx(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Qye(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function Zye(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}const exe=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class lL extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class txe extends lL{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class W9 extends lL{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Y9 extends lL{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var O3;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(O3||(O3={}));class nxe{constructor(e,{headers:n={},customFetch:r,region:i=O3.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=exe(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Qye(this,arguments,void 0,function*(n,r={}){var i;let s,o;try{const{headers:a,method:l,body:c,signal:u,timeout:f}=r;let m={},{region:g}=r;g||(g=this.region);const x=new URL(`${this.url}/${n}`);g&&g!=="any"&&(m["x-region"]=g,x.searchParams.set("forceFunctionRegion",g));let v;c&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",v=c):typeof c=="string"?(m["Content-Type"]="text/plain",v=c):typeof FormData<"u"&&c instanceof FormData?v=c:(m["Content-Type"]="application/json",v=JSON.stringify(c)):v=c;let w=u;f&&(o=new AbortController,s=setTimeout(()=>o.abort(),f),u?(w=o.signal,u.addEventListener("abort",()=>o.abort())):w=o.signal);const E=yield this.fetch(x.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),a),body:v,signal:w}).catch(j=>{throw new txe(j)}),C=E.headers.get("x-relay-error");if(C&&C==="true")throw new W9(E);if(!E.ok)throw new Y9(E);let k=((i=E.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),O;return k==="application/json"?O=yield E.json():k==="application/octet-stream"||k==="application/pdf"?O=yield E.blob():k==="text/event-stream"?O=E:k==="multipart/form-data"?O=yield E.formData():O=yield E.text(),{data:O,error:null,response:E}}catch(a){return{data:null,error:a,response:a instanceof Y9||a instanceof W9?a.context:void 0}}finally{s&&clearTimeout(s)}})}}var rxe=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},ixe=class{constructor(t){var e,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{let o=null,a=null,l=null,c=s.status,u=s.statusText;if(s.ok){var f,m;if(n.method!=="HEAD"){var g;const E=await s.text();E===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((g=n.headers.get("Accept"))===null||g===void 0)&&g.includes("application/vnd.pgrst.plan+text"))?a=E:a=JSON.parse(E))}const v=(f=n.headers.get("Prefer"))===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),w=(m=s.headers.get("content-range"))===null||m===void 0?void 0:m.split("/");v&&w&&w.length>1&&(l=parseInt(w[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(a)&&(a.length>1?(o={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,l=null,c=406,u="Not Acceptable"):a.length===1?a=a[0]:a=null)}else{var x;const v=await s.text();try{o=JSON.parse(v),Array.isArray(o)&&s.status===404&&(a=[],o=null,c=200,u="OK")}catch{s.status===404&&v===""?(c=204,u="No Content"):o={message:v}}if(o&&n.isMaybeSingle&&(!(o==null||(x=o.details)===null||x===void 0)&&x.includes("0 rows"))&&(o=null,c=200,u="OK"),o&&n.shouldThrowOnError)throw new rxe(o)}return{error:o,data:a,count:l,status:c,statusText:u}});return this.shouldThrowOnError||(i=i.catch(s=>{var o;let a="";const l=s==null?void 0:s.cause;if(l){var c,u,f,m;const x=(c=l==null?void 0:l.message)!==null&&c!==void 0?c:"",v=(u=l==null?void 0:l.code)!==null&&u!==void 0?u:"";a=`${(f=s==null?void 0:s.name)!==null&&f!==void 0?f:"FetchError"}: ${s==null?void 0:s.message}`,a+=`

Caused by: ${(m=l==null?void 0:l.name)!==null&&m!==void 0?m:"Error"}: ${x}`,v&&(a+=` (${v})`),l!=null&&l.stack&&(a+=`
${l.stack}`)}else{var g;a=(g=s==null?void 0:s.stack)!==null&&g!==void 0?g:""}return{error:{message:`${(o=s==null?void 0:s.name)!==null&&o!==void 0?o:"FetchError"}: ${s==null?void 0:s.message}`,details:a,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),i.then(t,e)}returns(){return this}overrideTypes(){return this}},sxe=class extends ixe{select(t){let e=!1;const n=(t??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){const s=i?`${i}.order`:"order",o=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${o?`${o},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"offset":`${r}.offset`,s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(s,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:s="text"}={}){var o;const a=[t?"analyze":null,e?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${s}; for="${l}"; options=${a};`),s==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const J9=new RegExp("[,()]");var Z0=class extends sxe{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&J9.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}notIn(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&J9.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`not.in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const s=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${s}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}},oxe=class{constructor(t,{headers:e={},schema:n,fetch:r}){this.url=t,this.headers=new Headers(e),this.schema=n,this.fetch=r}select(t,e){const{head:n=!1,count:r}=e??{},i=n?"HEAD":"GET";let s=!1;const o=(t??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),r&&this.headers.append("Prefer",`count=${r}`),new Z0({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:n=!0}={}){var r;const i="POST";if(e&&this.headers.append("Prefer",`count=${e}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const s=t.reduce((o,a)=>o.concat(Object.keys(a)),[]);if(s.length>0){const o=[...new Set(s)].map(a=>`"${a}"`);this.url.searchParams.set("columns",o.join(","))}}return new Z0({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}={}){var s;const o="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&this.url.searchParams.set("on_conflict",e),r&&this.headers.append("Prefer",`count=${r}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const a=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Z0({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}update(t,{count:e}={}){var n;const r="PATCH";return e&&this.headers.append("Prefer",`count=${e}`),new Z0({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var e;const n="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new Z0({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},axe=class ZZ{constructor(e,{headers:n={},schema:r,fetch:i}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=i}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new oxe(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new ZZ(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:i=!1,count:s}={}){var o;let a;const l=new URL(`${this.url}/rpc/${e}`);let c;r||i?(a=r?"HEAD":"GET",Object.entries(n).filter(([f,m])=>m!==void 0).map(([f,m])=>[f,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([f,m])=>{l.searchParams.append(f,m)})):(a="POST",c=n);const u=new Headers(this.headers);return s&&u.set("Prefer",`count=${s}`),new Z0({method:a,url:l,headers:u,schema:this.schemaName,body:c,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class lxe{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof vl<"u"){const n=vl.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const cxe="2.89.0",uxe=`realtime-js/${cxe}`,eee="1.0.0",dxe="2.0.0",X9=eee,M3=1e4,fxe=1e3,hxe=100;var bf;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(bf||(bf={}));var bi;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(bi||(bi={}));var dl;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(dl||(dl={}));var D3;(function(t){t.websocket="websocket"})(D3||(D3={}));var rp;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(rp||(rp={}));class pxe{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},o=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(e,n,r){var i,s;const o=e.topic,a=(i=e.ref)!==null&&i!==void 0?i:"",l=(s=e.join_ref)!==null&&s!==void 0?s:"",c=e.payload.event,u=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},f=Object.keys(u).length===0?"":JSON.stringify(u);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`userEvent length ${c.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`metadata length ${f.length} exceeds maximum of 255`);const m=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+a.length+o.length+c.length+f.length,g=new ArrayBuffer(this.HEADER_LENGTH+m);let x=new DataView(g),v=0;x.setUint8(v++,this.KINDS.userBroadcastPush),x.setUint8(v++,l.length),x.setUint8(v++,a.length),x.setUint8(v++,o.length),x.setUint8(v++,c.length),x.setUint8(v++,f.length),x.setUint8(v++,n),Array.from(l,E=>x.setUint8(v++,E.charCodeAt(0))),Array.from(a,E=>x.setUint8(v++,E.charCodeAt(0))),Array.from(o,E=>x.setUint8(v++,E.charCodeAt(0))),Array.from(c,E=>x.setUint8(v++,E.charCodeAt(0))),Array.from(f,E=>x.setUint8(v++,E.charCodeAt(0)));var w=new Uint8Array(g.byteLength+r.byteLength);return w.set(new Uint8Array(g),0),w.set(new Uint8Array(r),g.byteLength),w.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[i,s,o,a,l]=r;return n({join_ref:i,ref:s,topic:o,event:a,payload:l})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),i=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,i)}}_decodeUserBroadcast(e,n,r){const i=n.getUint8(1),s=n.getUint8(2),o=n.getUint8(3),a=n.getUint8(4);let l=this.HEADER_LENGTH+4;const c=r.decode(e.slice(l,l+i));l=l+i;const u=r.decode(e.slice(l,l+s));l=l+s;const f=r.decode(e.slice(l,l+o));l=l+o;const m=e.slice(l,e.byteLength),g=a===this.JSON_ENCODING?JSON.parse(r.decode(m)):m,x={type:this.BROADCAST_EVENT,event:u,payload:g};return o>0&&(x.meta=JSON.parse(f)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST_EVENT,payload:x}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>n.includes(r)))}}class tee{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var fr;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(fr||(fr={}));const Q9=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((s,o)=>(s[o]=mxe(o,t,e,i),s),{}):{}},mxe=(t,e,n,r)=>{const i=e.find(a=>a.name===t),s=i==null?void 0:i.type,o=n[t];return s&&!r.includes(s)?nee(s,o):L3(o)},nee=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return vxe(e,n)}switch(t){case fr.bool:return gxe(e);case fr.float4:case fr.float8:case fr.int2:case fr.int4:case fr.int8:case fr.numeric:case fr.oid:return yxe(e);case fr.json:case fr.jsonb:return xxe(e);case fr.timestamp:return bxe(e);case fr.abstime:case fr.date:case fr.daterange:case fr.int4range:case fr.int8range:case fr.money:case fr.reltime:case fr.text:case fr.time:case fr.timestamptz:case fr.timetz:case fr.tsrange:case fr.tstzrange:return L3(e);default:return L3(e)}},L3=t=>t,gxe=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},yxe=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},xxe=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},vxe=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let s;const o=t.slice(1,n);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>nee(e,a))}return t},bxe=t=>typeof t=="string"?t.replace(" ","T"):t,ree=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class uP{constructor(e,n,r={},i=M3){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Z9;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Z9||(Z9={}));class Db{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Db.syncState(this.state,i,s,o),this.pendingDiffs.forEach(l=>{this.state=Db.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Db.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const s=this.cloneDeep(e),o=this.transformState(n),a={},l={};return this.map(s,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const f=s[c];if(f){const m=u.map(w=>w.presence_ref),g=f.map(w=>w.presence_ref),x=u.filter(w=>g.indexOf(w.presence_ref)<0),v=f.filter(w=>m.indexOf(w.presence_ref)<0);x.length>0&&(a[c]=x),v.length>0&&(l[c]=v)}else a[c]=u}),this.syncDiff(s,{joins:a,leaves:l},r,i)}static syncDiff(e,n,r,i){const{joins:s,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(a,l)=>{var c;const u=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),u.length>0){const f=e[a].map(g=>g.presence_ref),m=u.filter(g=>f.indexOf(g.presence_ref)<0);e[a].unshift(...m)}r(a,u,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const u=l.map(f=>f.presence_ref);c=c.filter(f=>u.indexOf(f.presence_ref)<0),e[a]=c,i(a,c,l),c.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var e$;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(e$||(e$={}));var Lb;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Lb||(Lb={}));var mu;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(mu||(mu={}));class cg{constructor(e,n={config:{}},r){var i,s;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=bi.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new uP(this,dl.join,this.params,this.timeout),this.rejoinTimer=new tee(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=bi.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=bi.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=bi.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=bi.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=bi.errored,this.rejoinTimer.scheduleTimeout())}),this._on(dl.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new Db(this),this.broadcastEndpointURL=ree(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==bi.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,c=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(g=>g.filter))!==null&&i!==void 0?i:[],u=!!this.bindings[Lb.PRESENCE]&&this.bindings[Lb.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,f={},m={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(g=>e==null?void 0:e(mu.CHANNEL_ERROR,g)),this._onClose(()=>e==null?void 0:e(mu.CLOSED)),this.updateJoinPayload(Object.assign({config:m},f)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:g})=>{var x;if(this.socket._isManualToken()||this.socket.setAuth(),g===void 0){e==null||e(mu.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,w=(x=v==null?void 0:v.length)!==null&&x!==void 0?x:0,E=[];for(let C=0;C<w;C++){const k=v[C],{filter:{event:O,schema:j,table:R,filter:U}}=k,V=g&&g[C];if(V&&V.event===O&&cg.isFilterValueEqual(V.schema,j)&&cg.isFilterValueEqual(V.table,R)&&cg.isFilterValueEqual(V.filter,U))E.push(Object.assign(Object.assign({},k),{id:V.id}));else{this.unsubscribe(),this.state=bi.errored,e==null||e(mu.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=E,e&&e(mu.SUBSCRIBED);return}}).receive("error",g=>{this.state=bi.errored,e==null||e(mu.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(mu.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===bi.joined&&e===Lb.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var i;if(n==null)return Promise.reject("Payload is required for httpSend()");const s={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(s.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:s,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const c=await a.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:o}=e,a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,l;const c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),c.receive("ok",()=>s("ok")),c.receive("error",()=>s("error")),c.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=bi.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(dl.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new uP(this,dl.leave,{},e),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=bi.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new uP(this,e,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>hxe){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,s;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=dl;if(r&&[a,l,c,u].indexOf(o)>=0&&r!==this._joinRef())return;let m=this._onMessage(o,n,r);if(n&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(g=>{var x,v,w;return((x=g.filter)===null||x===void 0?void 0:x.event)==="*"||((w=(v=g.filter)===null||v===void 0?void 0:v.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===o}).map(g=>g.callback(m,r)):(s=this.bindings[o])===null||s===void 0||s.filter(g=>{var x,v,w,E,C,k;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in g){const O=g.id,j=(x=g.filter)===null||x===void 0?void 0:x.event;return O&&((v=n.ids)===null||v===void 0?void 0:v.includes(O))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((w=n.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const O=(C=(E=g==null?void 0:g.filter)===null||E===void 0?void 0:E.event)===null||C===void 0?void 0:C.toLocaleLowerCase();return O==="*"||O===((k=n==null?void 0:n.event)===null||k===void 0?void 0:k.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===o}).map(g=>{if(typeof m=="object"&&"ids"in m){const x=m.data,{schema:v,table:w,commit_timestamp:E,type:C,errors:k}=x;m=Object.assign(Object.assign({},{schema:v,table:w,commit_timestamp:E,eventType:C,new:{},old:{},errors:k}),this._getPayloadRecords(x))}g.callback(m,r)})}_isClosed(){return this.state===bi.closed}_isJoined(){return this.state===bi.joined}_isJoining(){return this.state===bi.joining}_isLeaving(){return this.state===bi.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&cg.isEqual(i.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(dl.close,{},e)}_onError(e){this._on(dl.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=bi.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Q9(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Q9(e.columns,e.old_record)),n}}const dP=()=>{},wS={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},wxe=[1e3,2e3,5e3,1e4],Exe=1e4,Sxe=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Axe{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=M3,this.transport=null,this.heartbeatIntervalMs=wS.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=dP,this.ref=0,this.reconnectTimer=null,this.vsn=X9,this.logger=dP,this.conn=null,this.sendBuffer=[],this.serializer=new pxe,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...s)=>i(...s):(...s)=>fetch(...s),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${D3.websocket}`,this.httpEndpoint=ree(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=lxe.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case bf.connecting:return rp.Connecting;case bf.open:return rp.Open;case bf.closing:return rp.Closing;default:return rp.Closed}}isConnected(){return this.connectionState()===rp.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new cg(`realtime:${e}`,n,this);return this.channels.push(s),s}}push(e){const{topic:n,event:r,payload:i,ref:s}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(fxe,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},wS.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:s,ref:o}=n,a=o?`(${o})`:"",l=s.status||"";this.log("receive",`${l} ${r} ${i} ${a}`.trim(),s),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(i,s,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===bf.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===bf.open||this.conn.readyState===bf.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(dl.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([Sxe],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,r=!1;if(e)n=e,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const s={access_token:n,version:uxe};n&&i.updateJoinPayload(s),i.joinedOnce&&i._isJoined()&&i._push(dl.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new tee(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},wS.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,i,s,o,a,l,c,u,f,m,g;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:M3,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:wS.HEARTBEAT_INTERVAL,this.worker=(s=e==null?void 0:e.worker)!==null&&s!==void 0?s:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:dP,this.vsn=(l=e==null?void 0:e.vsn)!==null&&l!==void 0?l:X9,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:(x=>wxe[x-1]||Exe),this.vsn){case eee:this.encode=(u=e==null?void 0:e.encode)!==null&&u!==void 0?u:((x,v)=>v(JSON.stringify(x))),this.decode=(f=e==null?void 0:e.decode)!==null&&f!==void 0?f:((x,v)=>v(JSON.parse(x)));break;case dxe:this.encode=(m=e==null?void 0:e.encode)!==null&&m!==void 0?m:this.serializer.encode.bind(this.serializer),this.decode=(g=e==null?void 0:e.decode)!==null&&g!==void 0?g:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var Jb=class extends Error{constructor(t,e){var n;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((n=e.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Txe(t,e,n){const r=new URL(e,t);if(n)for(const[i,s]of Object.entries(n))s!==void 0&&r.searchParams.set(i,s);return r.toString()}async function kxe(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function Cxe(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:i,body:s,headers:o}){const a=Txe(t.baseUrl,r,i),l=await kxe(t.auth),c=await e(a,{method:n,headers:{...s?{"Content-Type":"application/json"}:{},...l,...o},body:s?JSON.stringify(s):void 0}),u=await c.text(),f=(c.headers.get("content-type")||"").includes("application/json"),m=f&&u?JSON.parse(u):u;if(!c.ok){const g=f?m:void 0,x=g==null?void 0:g.error;throw new Jb((x==null?void 0:x.message)??`Request failed with status ${c.status}`,{status:c.status,icebergType:x==null?void 0:x.type,icebergCode:x==null?void 0:x.code,details:g})}return{status:c.status,headers:c.headers,data:m}}}}function ES(t){return t.join("")}var Nxe=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:ES(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ES(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ES(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ES(t.namespace)}`}),!0}catch(e){if(e instanceof Jb&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof Jb&&n.status===409)return;throw n}}};function A0(t){return t.join("")}var _xe=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${A0(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${A0(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${A0(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${A0(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${A0(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${A0(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof Jb&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof Jb&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},Ixe=class{constructor(t){var r;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=Cxe({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(r=t.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new Nxe(this.client,e),this.tableOps=new _xe(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},BC=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function Rr(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var Pxe=class extends BC{constructor(t,e,n){super(t),this.name="StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},B3=class extends BC{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};const cL=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Rxe=()=>Response,j3=t=>{if(Array.isArray(t))return t.map(n=>j3(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=j3(r)}),e},Oxe=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Mxe=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function Xb(t){"@babel/helpers - typeof";return Xb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xb(t)}function Dxe(t,e){if(Xb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Xb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Lxe(t){var e=Dxe(t,"string");return Xb(e)=="symbol"?e:e+""}function Bxe(t,e,n){return(e=Lxe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function t$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Yt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?t$(Object(n),!0).forEach(function(r){Bxe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):t$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const fP=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},jxe=async(t,e,n)=>{t instanceof await Rxe()&&!(n!=null&&n.noResolveJson)?t.json().then(r=>{const i=t.status||500,s=(r==null?void 0:r.statusCode)||i+"";e(new Pxe(fP(r),i,s))}).catch(r=>{e(new B3(fP(r),r))}):e(new B3(fP(t),t))},Uxe=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?i:(Oxe(r)?(i.headers=Yt({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,e!=null&&e.duplex&&(i.duplex=e.duplex),Yt(Yt({},i),n))};async function f1(t,e,n,r,i,s){return new Promise((o,a)=>{t(n,Uxe(e,r,i,s)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>jxe(l,a,r))})}async function Qb(t,e,n,r){return f1(t,"GET",e,n,r)}async function rl(t,e,n,r,i){return f1(t,"POST",e,r,i,n)}async function U3(t,e,n,r,i){return f1(t,"PUT",e,r,i,n)}async function Fxe(t,e,n,r){return f1(t,"HEAD",e,Yt(Yt({},n),{},{noResolveJson:!0}),r)}async function uL(t,e,n,r,i){return f1(t,"DELETE",e,r,i,n)}var $xe=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Rr(e))return{data:null,error:e};throw e}}};let iee;iee=Symbol.toStringTag;var zxe=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[iee]="BlobDownloadBuilder",this.promise=null}asStream(){return new $xe(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Rr(e))return{data:null,error:e};throw e}}};const Hxe={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},n$={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Vxe=class{constructor(t,e={},n,r){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=n,this.fetch=cL(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(t,e,n,r){var i=this;try{let s;const o=Yt(Yt({},n$),r);let a=Yt(Yt({},i.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",i.encodeMetadata(l)),s.append("",n)):typeof FormData<"u"&&n instanceof FormData?(s=n,s.has("cacheControl")||s.append("cacheControl",o.cacheControl),l&&!s.has("metadata")&&s.append("metadata",i.encodeMetadata(l))):(s=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=i.toBase64(i.encodeMetadata(l))),(typeof ReadableStream<"u"&&s instanceof ReadableStream||s&&typeof s=="object"&&"pipe"in s&&typeof s.pipe=="function")&&!o.duplex&&(o.duplex="half")),r!=null&&r.headers&&(a=Yt(Yt({},a),r.headers));const c=i._removeEmptyFolders(e),u=i._getFinalPath(c),f=await(t=="PUT"?U3:rl)(i.fetch,`${i.url}/object/${u}`,s,Yt({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:f.Id,fullPath:f.Key},error:null}}catch(s){if(i.shouldThrowOnError)throw s;if(Rr(s))return{data:null,error:s};throw s}}async upload(t,e,n){return this.uploadOrUpdate("POST",t,e,n)}async uploadToSignedUrl(t,e,n,r){var i=this;const s=i._removeEmptyFolders(t),o=i._getFinalPath(s),a=new URL(i.url+`/object/upload/sign/${o}`);a.searchParams.set("token",e);try{let l;const c=Yt({upsert:n$.upsert},r),u=Yt(Yt({},i.headers),{"x-upsert":String(c.upsert)});return typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType),{data:{path:s,fullPath:(await U3(i.fetch,a.toString(),l,{headers:u})).Key},error:null}}catch(l){if(i.shouldThrowOnError)throw l;if(Rr(l))return{data:null,error:l};throw l}}async createSignedUploadUrl(t,e){var n=this;try{let r=n._getFinalPath(t);const i=Yt({},n.headers);e!=null&&e.upsert&&(i["x-upsert"]="true");const s=await rl(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(n.url+s.url),a=o.searchParams.get("token");if(!a)throw new BC("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:a},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Rr(r))return{data:null,error:r};throw r}}async update(t,e,n){return this.uploadOrUpdate("PUT",t,e,n)}async move(t,e,n){var r=this;try{return{data:await rl(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers}),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Rr(i))return{data:null,error:i};throw i}}async copy(t,e,n){var r=this;try{return{data:{path:(await rl(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers})).Key},error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Rr(i))return{data:null,error:i};throw i}}async createSignedUrl(t,e,n){var r=this;try{let i=r._getFinalPath(t),s=await rl(r.fetch,`${r.url}/object/sign/${i}`,Yt({expiresIn:e},n!=null&&n.transform?{transform:n.transform}:{}),{headers:r.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return s={signedUrl:encodeURI(`${r.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Rr(i))return{data:null,error:i};throw i}}async createSignedUrls(t,e,n){var r=this;try{const i=await rl(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:e,paths:t},{headers:r.headers}),s=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(o=>Yt(Yt({},o),{},{signedUrl:o.signedURL?encodeURI(`${r.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Rr(i))return{data:null,error:i};throw i}}download(t,e){const n=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),i=r?`?${r}`:"",s=this._getFinalPath(t),o=()=>Qb(this.fetch,`${this.url}/${n}/${s}${i}`,{headers:this.headers,noResolveJson:!0});return new zxe(o,this.shouldThrowOnError)}async info(t){var e=this;const n=e._getFinalPath(t);try{return{data:j3(await Qb(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Rr(r))return{data:null,error:r};throw r}}async exists(t){var e=this;const n=e._getFinalPath(t);try{return await Fxe(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Rr(r)&&r instanceof B3){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}}getPublicUrl(t,e){const n=this._getFinalPath(t),r=[],i=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";i!==""&&r.push(i);const s=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});o!==""&&r.push(o);let a=r.join("&");return a!==""&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${n}${a}`)}}}async remove(t){var e=this;try{return{data:await uL(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Rr(n))return{data:null,error:n};throw n}}async list(t,e,n){var r=this;try{const i=Yt(Yt(Yt({},Hxe),e),{},{prefix:t||""});return{data:await rl(r.fetch,`${r.url}/object/list/${r.bucketId}`,i,{headers:r.headers},n),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Rr(i))return{data:null,error:i};throw i}}async listV2(t,e){var n=this;try{const r=Yt({},t);return{data:await rl(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},e),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Rr(r))return{data:null,error:r};throw r}}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof ln<"u"?ln.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const see="2.89.0",oee={"X-Client-Info":`storage-js/${see}`};var qxe=class{constructor(t,e={},n,r){this.shouldThrowOnError=!1;const i=new URL(t);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Yt(Yt({},oee),e),this.fetch=cL(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(t){var e=this;try{const n=e.listBucketOptionsToQueryString(t);return{data:await Qb(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Rr(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await Qb(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Rr(n))return{data:null,error:n};throw n}}async createBucket(t,e={public:!1}){var n=this;try{return{data:await rl(n.fetch,`${n.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Rr(r))return{data:null,error:r};throw r}}async updateBucket(t,e){var n=this;try{return{data:await U3(n.fetch,`${n.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Rr(r))return{data:null,error:r};throw r}}async emptyBucket(t){var e=this;try{return{data:await rl(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Rr(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await uL(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Rr(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},Gxe=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Yt(Yt({},oee),e),this.fetch=cL(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await rl(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Rr(n))return{data:null,error:n};throw n}}async listBuckets(t){var e=this;try{const n=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&n.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&n.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&n.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&n.set("sortOrder",t.sortOrder),t!=null&&t.search&&n.set("search",t.search);const r=n.toString(),i=r?`${e.url}/bucket?${r}`:`${e.url}/bucket`;return{data:await Qb(e.fetch,i,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Rr(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await uL(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Rr(n))return{data:null,error:n};throw n}}from(t){var e=this;if(!Mxe(t))throw new BC("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new Ixe({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(i,s){const o=i[s];return typeof o!="function"?o:async(...a)=>{try{return{data:await o.apply(i,a),error:null}}catch(l){if(r)throw l;return{data:null,error:l}}}}})}};const dL={"X-Client-Info":`storage-js/${see}`,"Content-Type":"application/json"};var aee=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function zo(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}var hP=class extends aee{constructor(t,e,n){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Kxe=class extends aee{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};const fL=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Wxe=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},r$=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Yxe=async(t,e,n)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const r=t.status||500,i=t;if(typeof i.json=="function")i.json().then(s=>{const o=(s==null?void 0:s.statusCode)||(s==null?void 0:s.code)||r+"";e(new hP(r$(s),r,o))}).catch(()=>{const s=r+"";e(new hP(i.statusText||`HTTP ${r} error`,r,s))});else{const s=r+"";e(new hP(i.statusText||`HTTP ${r} error`,r,s))}}else e(new Kxe(r$(t),t))},Jxe=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return r?(Wxe(r)?(i.headers=Yt({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,Yt(Yt({},i),n)):i};async function Xxe(t,e,n,r,i,s){return new Promise((o,a)=>{t(n,Jxe(e,r,i,s)).then(l=>{if(!l.ok)throw l;if(r!=null&&r.noResolveJson)return l;const c=l.headers.get("content-type");return!c||!c.includes("application/json")?{}:l.json()}).then(l=>o(l)).catch(l=>Yxe(l,a,r))})}async function Ho(t,e,n,r,i){return Xxe(t,"POST",e,r,i,n)}var Qxe=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Yt(Yt({},dL),e),this.fetch=fL(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(t){var e=this;try{return{data:await Ho(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(zo(n))return{data:null,error:n};throw n}}async getIndex(t,e){var n=this;try{return{data:await Ho(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(zo(r))return{data:null,error:r};throw r}}async listIndexes(t){var e=this;try{return{data:await Ho(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(zo(n))return{data:null,error:n};throw n}}async deleteIndex(t,e){var n=this;try{return{data:await Ho(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(zo(r))return{data:null,error:r};throw r}}},Zxe=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Yt(Yt({},dL),e),this.fetch=fL(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(t){var e=this;try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Ho(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(zo(n))return{data:null,error:n};throw n}}async getVectors(t){var e=this;try{return{data:await Ho(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(zo(n))return{data:null,error:n};throw n}}async listVectors(t){var e=this;try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:await Ho(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(zo(n))return{data:null,error:n};throw n}}async queryVectors(t){var e=this;try{return{data:await Ho(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(zo(n))return{data:null,error:n};throw n}}async deleteVectors(t){var e=this;try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Ho(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(zo(n))return{data:null,error:n};throw n}}},eve=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Yt(Yt({},dL),e),this.fetch=fL(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await Ho(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(zo(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await Ho(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(zo(n))return{data:null,error:n};throw n}}async listBuckets(t={}){var e=this;try{return{data:await Ho(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(zo(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await Ho(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(zo(n))return{data:null,error:n};throw n}}},tve=class extends eve{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new nve(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,n=this;return e().call(n,t)}async getBucket(t){var e=()=>super.getBucket,n=this;return e().call(n,t)}async listBuckets(t={}){var e=()=>super.listBuckets,n=this;return e().call(n,t)}async deleteBucket(t){var e=()=>super.deleteBucket,n=this;return e().call(n,t)}},nve=class extends Qxe{constructor(t,e,n,r){super(t,e,r),this.vectorBucketName=n}async createIndex(t){var e=()=>super.createIndex,n=this;return e().call(n,Yt(Yt({},t),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,n=this;return e().call(n,Yt(Yt({},t),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,t)}index(t){return new rve(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},rve=class extends Zxe{constructor(t,e,n,r,i){super(t,e,i),this.vectorBucketName=n,this.indexName=r}async putVectors(t){var e=()=>super.putVectors,n=this;return e().call(n,Yt(Yt({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(t){var e=()=>super.getVectors,n=this;return e().call(n,Yt(Yt({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,n=this;return e().call(n,Yt(Yt({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,n=this;return e().call(n,Yt(Yt({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,n=this;return e().call(n,Yt(Yt({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},ive=class extends qxe{constructor(t,e={},n,r){super(t,e,n,r)}from(t){return new Vxe(this.url,this.headers,t,this.fetch)}get vectors(){return new tve(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Gxe(this.url+"/iceberg",this.headers,this.fetch)}};const lee="2.89.0",eg=30*1e3,F3=3,pP=F3*eg,sve="http://localhost:9999",ove="supabase.auth.token",ave={"X-Client-Info":`gotrue-js/${lee}`},$3="X-Supabase-Api-Version",cee={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},lve=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,cve=600*1e3;class Zb extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Lt(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class uve extends Zb{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function dve(t){return Lt(t)&&t.name==="AuthApiError"}class ip extends Zb{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class bd extends Zb{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class _o extends bd{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function fve(t){return Lt(t)&&t.name==="AuthSessionMissingError"}class T0 extends bd{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class SS extends bd{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class AS extends bd{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function hve(t){return Lt(t)&&t.name==="AuthImplicitGrantRedirectError"}class i$ extends bd{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class pve extends bd{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class z3 extends bd{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function mP(t){return Lt(t)&&t.name==="AuthRetryableFetchError"}class s$ extends bd{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class H3 extends bd{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const wT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),o$=` 	
\r=`.split(""),mve=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<o$.length;e+=1)t[o$[e].charCodeAt(0)]=-2;for(let e=0;e<wT.length;e+=1)t[wT[e].charCodeAt(0)]=e;return t})();function a$(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(wT[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(wT[r]),e.queuedBits-=6}}function uee(t,e,n){const r=mve[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function l$(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=o=>{xve(o,r,n)};for(let o=0;o<t.length;o+=1)uee(t.charCodeAt(o),i,s);return e.join("")}function gve(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function yve(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}gve(r,e)}}function xve(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if((t>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Ig(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)uee(t.charCodeAt(i),n,r);return new Uint8Array(e)}function vve(t){const e=[];return yve(t,n=>e.push(n)),new Uint8Array(e)}function dp(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>a$(i,n,r)),a$(null,n,r),e.join("")}function bve(t){return Math.round(Date.now()/1e3)+t}function wve(){return Symbol("auth-callback")}const Xi=()=>typeof window<"u"&&typeof document<"u",jh={tested:!1,writable:!1},dee=()=>{if(!Xi())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(jh.tested)return jh.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),jh.tested=!0,jh.writable=!0}catch{jh.tested=!0,jh.writable=!1}return jh.writable};function Eve(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const fee=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Sve=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",tg=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Uh=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Wi=async(t,e)=>{await t.removeItem(e)};class jC{constructor(){this.promise=new jC.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}jC.promiseConstructor=Promise;function gP(t){const e=t.split(".");if(e.length!==3)throw new H3("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!lve.test(e[r]))throw new H3("JWT not in base64url format");return{header:JSON.parse(l$(e[0])),payload:JSON.parse(l$(e[1])),signature:Ig(e[2]),raw:{header:e[0],payload:e[1]}}}async function Ave(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Tve(t,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await t(s);if(!e(s,null,o)){r(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function kve(t){return("0"+t.toString(16)).substr(-2)}function Cve(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,kve).join("")}async function Nve(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function _ve(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await Nve(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function k0(t,e,n=!1){const r=Cve();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await tg(t,`${e}-code-verifier`,i);const s=await _ve(r);return[s,r===s?"plain":"s256"]}const Ive=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Pve(t){const e=t.headers.get($3);if(!e||!e.match(Ive))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Rve(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Ove(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Mve=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function C0(t){if(!Mve.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function yP(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Dve(t,e){return new Proxy(t,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)"||s==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,i)}})}function c$(t){return JSON.parse(JSON.stringify(t))}const Wh=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Lve=[502,503,504];async function u$(t){var e;if(!Sve(t))throw new z3(Wh(t),0);if(Lve.includes(t.status))throw new z3(Wh(t),t.status);let n;try{n=await t.json()}catch(s){throw new ip(Wh(s),s)}let r;const i=Pve(t);if(i&&i.getTime()>=cee["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new s$(Wh(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new _o}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new s$(Wh(n),t.status,n.weak_password.reasons);throw new uve(Wh(n),t.status||500,r)}const Bve=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function Wt(t,e,n,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[$3]||(s[$3]=cee["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const o=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await jve(t,e,n+a,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function jve(t,e,n,r,i,s){const o=Bve(e,r,i,s);let a;try{a=await t(n,Object.assign({},o))}catch(l){throw console.error(l),new z3(Wh(l),0)}if(a.ok||await u$(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await u$(l)}}function Xa(t){var e;let n=null;$ve(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=bve(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function d$(t){const e=Xa(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Tf(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Uve(t){return{data:t,error:null}}function Fve(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=t,o=wx(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function f$(t){return t}function $ve(t){return t.access_token&&t.refresh_token&&t.expires_in}const xP=["global","local","others"];class zve{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=fee(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=xP[0]){if(xP.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${xP.join(", ")}`);try{return await Wt(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Lt(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Wt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Tf})}catch(r){if(Lt(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=wx(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await Wt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:Fve,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Lt(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Wt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Tf})}catch(n){if(Lt(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,s,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await Wt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:f$});if(u.error)throw u.error;const f=await u.json(),m=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return g.length>0&&(g.forEach(x=>{const v=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(x.split(";")[1].split("=")[1]);c[`${w}Page`]=v}),c.total=parseInt(m)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if(Lt(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){C0(e);try{return await Wt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Tf})}catch(n){if(Lt(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){C0(e);try{return await Wt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Tf})}catch(r){if(Lt(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){C0(e);try{return await Wt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Tf})}catch(r){if(Lt(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){C0(e.userId);try{const{data:n,error:r}=await Wt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(Lt(n))return{data:null,error:n};throw n}}async _deleteFactor(e){C0(e.userId),C0(e.id);try{return{data:await Wt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Lt(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,i,s,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await Wt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:f$});if(u.error)throw u.error;const f=await u.json(),m=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return g.length>0&&(g.forEach(x=>{const v=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(x.split(";")[1].split("=")[1]);c[`${w}Page`]=v}),c.total=parseInt(m)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if(Lt(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(e){try{return await Wt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Lt(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await Wt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Lt(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await Wt(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Lt(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await Wt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Lt(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await Wt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Lt(n))return{data:null,error:n};throw n}}}function h$(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const N0={debug:!!(globalThis&&dee()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class hee extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Hve extends hee{}async function Vve(t,e,n){N0.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),N0.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){N0.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{N0.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw N0.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Hve(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(N0.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function qve(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function pee(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function Gve(t){return parseInt(t,16)}function Kve(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function Wve(t){var e;const{chainId:n,domain:r,expirationTime:i,issuedAt:s=new Date,nonce:o,notBefore:a,requestId:l,resources:c,scheme:u,uri:f,version:m}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(m!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${m}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const g=pee(t.address),x=u?`${u}://${r}`:r,v=t.statement?`${t.statement}
`:"",w=`${x} wants you to sign in with your Ethereum account:
${g}

${v}`;let E=`URI: ${f}
Version: ${m}
Chain ID: ${n}${o?`
Nonce: ${o}`:""}
Issued At: ${s.toISOString()}`;if(i&&(E+=`
Expiration Time: ${i.toISOString()}`),a&&(E+=`
Not Before: ${a.toISOString()}`),l&&(E+=`
Request ID: ${l}`),c){let C=`
Resources:`;for(const k of c){if(!k||typeof k!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${k}`);C+=`
- ${k}`}E+=C}return`${w}
${E}`}class ui extends Error{constructor({message:e,code:n,cause:r,name:i}){var s;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(s=i??(r instanceof Error?r.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=n}}class ET extends ui{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function Yve({error:t,options:e}){var n,r,i;const{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ui({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=s.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new ui({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=s.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new ui({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new ui({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new ui({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new ui({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return s.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new ui({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new ui({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(mee(o)){if(s.rp.id!==o)return new ui({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new ui({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new ui({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new ui({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new ui({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function Jve({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ui({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new ui({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(mee(r)){if(n.rpId!==r)return new ui({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new ui({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new ui({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new ui({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class Xve{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const Qve=new Xve;function Zve(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,i=wx(t,["challenge","user","excludeCredentials"]),s=Ig(e).buffer,o=Object.assign(Object.assign({},n),{id:Ig(n.id).buffer}),a=Object.assign(Object.assign({},i),{challenge:s,user:o});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const c=r[l];a.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:Ig(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function ebe(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=wx(t,["challenge","allowCredentials"]),i=Ig(e).buffer,s=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){s.allowCredentials=new Array(n.length);for(let o=0;o<n.length;o++){const a=n[o];s.allowCredentials[o]=Object.assign(Object.assign({},a),{id:Ig(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return s}function tbe(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:dp(new Uint8Array(t.response.attestationObject)),clientDataJSON:dp(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function nbe(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:dp(new Uint8Array(i.authenticatorData)),clientDataJSON:dp(new Uint8Array(i.clientDataJSON)),signature:dp(new Uint8Array(i.signature)),userHandle:i.userHandle?dp(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function mee(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function p$(){var t,e;return!!(Xi()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function rbe(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new ET("Browser returned unexpected credential type",e)}:{data:null,error:new ET("Empty credential response",e)}}catch(e){return{data:null,error:Yve({error:e,options:t})}}}async function ibe(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new ET("Browser returned unexpected credential type",e)}:{data:null,error:new ET("Empty credential response",e)}}catch(e){return{data:null,error:Jve({error:e,options:t})}}}const sbe={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},obe={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function ST(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of t)if(i)for(const s in i){const o=i[s];if(o!==void 0)if(Array.isArray(o))r[s]=o;else if(n(o))r[s]=o;else if(e(o)){const a=r[s];e(a)?r[s]=ST(a,o):r[s]=ST(o)}else r[s]=o}return r}function abe(t,e){return ST(sbe,t,e||{})}function lbe(t,e){return ST(obe,t,e||{})}class cbe{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:i},s){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!o)return{data:null,error:a};const l=i??Qve.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:c}=o.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${r}`),c.displayName||(c.displayName=c.name)}switch(o.webauthn.type){case"create":{const c=abe(o.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:u,error:f}=await rbe({publicKey:c,signal:l});return u?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:f}}case"request":{const c=lbe(o.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:u,error:f}=await ibe(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:c,signal:l}));return u?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:f}}}}catch(o){return Lt(o)?{data:null,error:o}:{data:null,error:new ip("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!n)return{data:null,error:new Zb("rpId is required for WebAuthn authentication")};try{if(!p$())return{data:null,error:new ip("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:s});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:l.type,rpId:n,rpOrigins:r,credential_response:l.credential_response}})}catch(o){return Lt(o)?{data:null,error:o}:{data:null,error:new ip("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!n)return{data:null,error:new Zb("rpId is required for WebAuthn registration")};try{if(!p$())return{data:null,error:new ip("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(u=>{var f;return(f=u.data)===null||f===void 0?void 0:f.all.find(m=>m.factor_type==="webauthn"&&m.friendly_name===e&&m.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u==null?void 0:u.id}):void 0),{data:null,error:a};const{data:l,error:c}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:s});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:n,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(o){return Lt(o)?{data:null,error:o}:{data:null,error:new ip("Unexpected error in register",o)}}}}qve();const ube={url:sve,storageKey:ove,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ave,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function m$(t,e,n){return await n()}const _0={};class ew{get jwks(){var e,n;return(n=(e=_0[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){_0[this.storageKey]=Object.assign(Object.assign({},_0[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=_0[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){_0[this.storageKey]=Object.assign(Object.assign({},_0[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const s=Object.assign(Object.assign({},ube),e);if(this.storageKey=s.storageKey,this.instanceID=(n=ew.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,ew.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.instanceID>0&&Xi()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new zve({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=fee(s.fetch),this.lock=s.lock||m$,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,s.lock?this.lock=s.lock:this.persistSession&&Xi()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Vve:this.lock=m$,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new cbe(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:dee()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=h$(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=h$(this.memoryStorage)),Xi()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${lee}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(Xi()&&(n=Eve(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),Xi()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),hve(s)){const l=(e=s.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Lt(n)?this._returnResult({error:n}):this._returnResult({error:new ip("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const s=await Wt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:Xa}),{data:o,error:a}=s;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(s){if(Lt(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(e){var n,r,i;try{let s;if("email"in e){const{email:u,password:f,options:m}=e;let g=null,x=null;this.flowType==="pkce"&&([g,x]=await k0(this.storage,this.storageKey)),s=await Wt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:u,password:f,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:g,code_challenge_method:x},xform:Xa})}else if("phone"in e){const{phone:u,password:f,options:m}=e;s=await Wt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:f,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},channel:(i=m==null?void 0:m.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Xa})}else throw new SS("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return await Wi(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(s){if(await Wi(this.storage,`${this.storageKey}-code-verifier`),Lt(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(e){try{let n;if("email"in e){const{email:s,password:o,options:a}=e;n=await Wt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:d$})}else if("phone"in e){const{phone:s,password:o,options:a}=e;n=await Wt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:d$})}else throw new SS("You must provide either an email or phone number and a password");const{data:r,error:i}=n;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const s=new T0;return this._returnResult({data:{user:null,session:null},error:s})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(Lt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,i,s,o,a,l,c,u,f,m;let g,x;if("message"in e)g=e.message,x=e.signature;else{const{chain:v,wallet:w,statement:E,options:C}=e;let k;if(Xi())if(typeof w=="object")k=w;else{const F=window;if("ethereum"in F&&typeof F.ethereum=="object"&&"request"in F.ethereum&&typeof F.ethereum.request=="function")k=F.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(C!=null&&C.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=w}const O=new URL((n=C==null?void 0:C.url)!==null&&n!==void 0?n:window.location.href),j=await k.request({method:"eth_requestAccounts"}).then(F=>F).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!j||j.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const R=pee(j[0]);let U=(r=C==null?void 0:C.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!U){const F=await k.request({method:"eth_chainId"});U=Gve(F)}const V={domain:O.host,address:R,statement:E,uri:O.href,version:"1",chainId:U,nonce:(i=C==null?void 0:C.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(o=(s=C==null?void 0:C.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=C==null?void 0:C.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=C==null?void 0:C.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=C==null?void 0:C.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(u=C==null?void 0:C.signInWithEthereum)===null||u===void 0?void 0:u.resources};g=Wve(V),x=await k.request({method:"personal_sign",params:[Kve(g),R]})}try{const{data:v,error:w}=await Wt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:g,signature:x},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Xa});if(w)throw w;if(!v||!v.session||!v.user){const E=new T0;return this._returnResult({data:{user:null,session:null},error:E})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:w})}catch(v){if(Lt(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async signInWithSolana(e){var n,r,i,s,o,a,l,c,u,f,m,g;let x,v;if("message"in e)x=e.message,v=e.signature;else{const{chain:w,wallet:E,statement:C,options:k}=e;let O;if(Xi())if(typeof E=="object")O=E;else{const R=window;if("solana"in R&&typeof R.solana=="object"&&("signIn"in R.solana&&typeof R.solana.signIn=="function"||"signMessage"in R.solana&&typeof R.solana.signMessage=="function"))O=R.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!(k!=null&&k.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");O=E}const j=new URL((n=k==null?void 0:k.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in O&&O.signIn){const R=await O.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},k==null?void 0:k.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),C?{statement:C}:null));let U;if(Array.isArray(R)&&R[0]&&typeof R[0]=="object")U=R[0];else if(R&&typeof R=="object"&&"signedMessage"in R&&"signature"in R)U=R;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in U&&"signature"in U&&(typeof U.signedMessage=="string"||U.signedMessage instanceof Uint8Array)&&U.signature instanceof Uint8Array)x=typeof U.signedMessage=="string"?U.signedMessage:new TextDecoder().decode(U.signedMessage),v=U.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in O)||typeof O.signMessage!="function"||!("publicKey"in O)||typeof O!="object"||!O.publicKey||!("toBase58"in O.publicKey)||typeof O.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${j.host} wants you to sign in with your Solana account:`,O.publicKey.toBase58(),...C?["",C,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(i=(r=k==null?void 0:k.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=k==null?void 0:k.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${k.signInWithSolana.notBefore}`]:[],...!((o=k==null?void 0:k.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${k.signInWithSolana.expirationTime}`]:[],...!((a=k==null?void 0:k.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${k.signInWithSolana.chainId}`]:[],...!((l=k==null?void 0:k.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${k.signInWithSolana.nonce}`]:[],...!((c=k==null?void 0:k.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${k.signInWithSolana.requestId}`]:[],...!((f=(u=k==null?void 0:k.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||f===void 0)&&f.length?["Resources",...k.signInWithSolana.resources.map(U=>`- ${U}`)]:[]].join(`
`);const R=await O.signMessage(new TextEncoder().encode(x),"utf8");if(!R||!(R instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=R}}try{const{data:w,error:E}=await Wt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:dp(v)},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:Xa});if(E)throw E;if(!w||!w.session||!w.user){const C=new T0;return this._returnResult({data:{user:null,session:null},error:C})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:E})}catch(w){if(Lt(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async _exchangeCodeForSession(e){const n=await Uh(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new pve;const{data:s,error:o}=await Wt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Xa});if(await Wi(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!s||!s.session||!s.user){const a=new T0;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}catch(s){if(await Wi(this.storage,`${this.storageKey}-code-verifier`),Lt(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:s,nonce:o}=e,a=await Wt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Xa}),{data:l,error:c}=a;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const u=new T0;return this._returnResult({data:{user:null,session:null},error:u})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:c})}catch(n){if(Lt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,i,s,o;try{if("email"in e){const{email:a,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await k0(this.storage,this.storageKey));const{error:f}=await Wt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:u}=await Wt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u})}throw new SS("You must provide either an email or phone number.")}catch(a){if(await Wi(this.storage,`${this.storageKey}-code-verifier`),Lt(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(e){var n,r;try{let i,s;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await Wt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:Xa});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(Lt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var n,r,i,s,o;try{let a=null,l=null;this.flowType==="pkce"&&([a,l]=await k0(this.storage,this.storageKey));const c=await Wt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:Uve});return!((s=c.data)===null||s===void 0)&&s.url&&Xi()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(c.data.url),this._returnResult(c)}catch(a){if(await Wi(this.storage,`${this.storageKey}-code-verifier`),Lt(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new _o;const{error:i}=await Wt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(Lt(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:o}=await Wt(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:o,error:a}=await Wt(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a})}throw new SS("You must provide either an email or phone number and a type")}catch(n){if(Lt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Uh(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<pP:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const o=await Uh(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=yP()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=Dve(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await Wt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Tf}):await this._useSession(async n=>{var r,i,s;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new _o}:await Wt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:Tf})})}catch(n){if(Lt(n))return fve(n)&&(await this._removeSession(),await Wi(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new _o;const o=i.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await k0(this.storage,this.storageKey));const{data:c,error:u}=await Wt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Tf});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(r){if(await Wi(this.storage,`${this.storageKey}-code-verifier`),Lt(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new _o;const n=Date.now()/1e3;let r=n,i=!0,s=null;const{payload:o}=gP(e.access_token);if(o.exp&&(r=o.exp,i=r<=n),i){const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(n){if(Lt(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new _o;const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(Lt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!Xi())throw new AS("No browser detected.");if(e.error||e.error_description||e.error_code)throw new AS(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new i$("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new AS("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new i$("No code detected.");const{data:C,error:k}=await this._exchangeCodeForSession(e.code);if(k)throw k;const O=new URL(window.location.href);return O.searchParams.delete("code"),window.history.replaceState(window.history.state,"",O.toString()),{data:{session:C.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!s||!a||!o||!c)throw new AS("No session defined in URL");const u=Math.round(Date.now()/1e3),f=parseInt(a);let m=u+f;l&&(m=parseInt(l));const g=m-u;g*1e3<=eg&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${f}s`);const x=m-f;u-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,m,u):u-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,m,u);const{data:v,error:w}=await this._getUser(s);if(w)throw w;const E={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:f,expires_at:m,refresh_token:o,token_type:c,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:E,redirectType:e.type},error:null})}catch(r){if(Lt(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Uh(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({error:s});const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(dve(a)&&(a.status===404||a.status===401||a.status===403)))return this._returnResult({error:a})}return e!=="others"&&(await this._removeSession(),await Wi(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=wve(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await k0(this.storage,this.storageKey,!0));try{return await Wt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(await Wi(this.storage,`${this.storageKey}-code-verifier`),Lt(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(Lt(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var o,a,l,c,u;const{data:f,error:m}=s;if(m)throw m;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await Wt(this.fetch,"GET",g,{headers:this.headers,jwt:(u=(c=f.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(i)throw i;return Xi()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(Lt(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:s}}=n;if(i)throw i;const{options:o,provider:a,token:l,access_token:c,nonce:u}=e,f=await Wt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=s==null?void 0:s.access_token)!==null&&r!==void 0?r:void 0,body:{provider:a,id_token:l,access_token:c,nonce:u,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Xa}),{data:m,error:g}=f;return g?this._returnResult({data:{user:null,session:null},error:g}):!m||!m.session||!m.user?this._returnResult({data:{user:null,session:null},error:new T0}):(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("USER_UPDATED",m.session)),this._returnResult({data:m,error:g}))}catch(i){if(await Wi(this.storage,`${this.storageKey}-code-verifier`),Lt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)throw o;return await Wt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(Lt(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await Tve(async i=>(i>0&&await Ave(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await Wt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Xa})),(i,s)=>{const o=200*Math.pow(2,i);return s&&mP(s)&&Date.now()+o-r<eg})}catch(r){if(this._debug(n,"error",r),Lt(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Xi()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await Uh(this.storage,this.storageKey);if(i&&this.userStorage){let o=await Uh(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await tg(this.userStorage,this.storageKey+"-user",o)),i.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:yP()}else if(i&&!i.user&&!i.user){const o=await Uh(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(i.user=o.user,await Wi(this.storage,this.storageKey+"-user"),await tg(this.storage,this.storageKey,i)):i.user=yP()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const s=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<pP;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${pP}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),mP(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(i.access_token);!a&&(o!=null&&o.user)?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new _o;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new jC;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new _o;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={data:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(i,"error",s),Lt(s)){const o={data:null,error:s};return mP(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(l){s.push(l)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Wi(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await tg(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const s=c$(i);await tg(this.storage,this.storageKey,s)}else{const i=c$(n);await tg(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Wi(this.storage,this.storageKey),await Wi(this.storage,this.storageKey+"-code-verifier"),await Wi(this.storage,this.storageKey+"-user"),this.userStorage&&await Wi(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Xi()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),eg);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/eg);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${eg}ms, refresh threshold is ${F3} ticks`),i<=F3&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof hee)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Xi()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,o]=await k0(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?this._returnResult({data:null,error:s}):await Wt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Lt(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:c}=await Wt(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?this._returnResult({data:null,error:c}):(e.factorType==="totp"&&l.type==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(n){if(Lt(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({data:null,error:s});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?tbe(e.webauthn.credential_response):nbe(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:l}=await Wt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:l}))})}catch(n){if(Lt(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({data:null,error:s});const o=await Wt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:Zve(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:ebe(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Lt(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const s of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])i.all.push(s),s.status==="verified"&&i[s.factor_type].push(s);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:r},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=gP(r.access_token);let o=null;s.aal&&(o=s.aal);let a=o;((n=(e=r.user.factors)===null||e===void 0?void 0:e.filter(u=>u.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(a="aal2");const c=s.amr||[];return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:c},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await Wt(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new _o})})}catch(n){if(Lt(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:s}=r;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new _o});const o=await Wt(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&Xi()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(Lt(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:s}=r;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new _o});const o=await Wt(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&Xi()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(Lt(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;return r?this._returnResult({data:null,error:r}):n?await Wt(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new _o})})}catch(e){if(Lt(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?(await Wt(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new _o})})}catch(n){if(Lt(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(a=>a.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(a=>a.kid===e),r&&this.jwks_cached_at+cve>i)return r;const{data:s,error:o}=await Wt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,r=s.keys.find(a=>a.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:g,error:x}=await this.getSession();if(x||!g.session)return this._returnResult({data:null,error:x});r=g.session.access_token}const{header:i,payload:s,signature:o,raw:{header:a,payload:l}}=gP(r);n!=null&&n.allowExpired||Rve(s.exp);const c=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!c){const{error:g}=await this.getUser(r);if(g)throw g;return{data:{claims:s,header:i,signature:o},error:null}}const u=Ove(i.alg),f=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,f,o,vve(`${a}.${l}`)))throw new H3("Invalid JWT signature");return{data:{claims:s,header:i,signature:o},error:null}}catch(r){if(Lt(r))return this._returnResult({data:null,error:r});throw r}}}ew.nextInstanceID={};const dbe=ew,fbe="2.89.0";let vb="";typeof Deno<"u"?vb="deno":typeof document<"u"?vb="web":typeof navigator<"u"&&navigator.product==="ReactNative"?vb="react-native":vb="node";const hbe={"X-Client-Info":`supabase-js-${vb}/${fbe}`},pbe={headers:hbe},mbe={schema:"public"},gbe={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},ybe={};function tw(t){"@babel/helpers - typeof";return tw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tw(t)}function xbe(t,e){if(tw(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(tw(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vbe(t){var e=xbe(t,"string");return tw(e)=="symbol"?e:e+""}function bbe(t,e,n){return(e=vbe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function g$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?g$(Object(n),!0).forEach(function(r){bbe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const wbe=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Ebe=()=>Headers,Sbe=(t,e,n)=>{const r=wbe(n),i=Ebe();return async(s,o)=>{var a;const l=(a=await e())!==null&&a!==void 0?a:t;let c=new i(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(s,zr(zr({},o),{},{headers:c}))}};function Abe(t){return t.endsWith("/")?t:t+"/"}function Tbe(t,e){var n,r;const{db:i,auth:s,realtime:o,global:a}=t,{db:l,auth:c,realtime:u,global:f}=e,m={db:zr(zr({},l),i),auth:zr(zr({},c),s),realtime:zr(zr({},u),o),storage:{},global:zr(zr(zr({},f),a),{},{headers:zr(zr({},(n=f==null?void 0:f.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?m.accessToken=t.accessToken:delete m.accessToken,m}function kbe(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Abe(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Cbe=class extends dbe{constructor(t){super(t)}},Nbe=class{constructor(t,e,n){var r,i;this.supabaseUrl=t,this.supabaseKey=e;const s=kbe(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",s),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",s),this.storageUrl=new URL("storage/v1",s),this.functionsUrl=new URL("functions/v1",s);const o=`sb-${s.hostname.split(".")[0]}-auth-token`,a={db:mbe,realtime:ybe,auth:zr(zr({},gbe),{},{storageKey:o}),global:pbe},l=Tbe(n??{},a);if(this.storageKey=(r=l.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=l.global.headers)!==null&&i!==void 0?i:{},l.accessToken)this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(u,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}});else{var c;this.auth=this._initSupabaseAuthClient((c=l.auth)!==null&&c!==void 0?c:{},this.headers,l.global.fetch)}this.fetch=Sbe(e,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(zr({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&this.accessToken().then(u=>this.realtime.setAuth(u)).catch(u=>console.warn("Failed to set initial Realtime auth token:",u)),this.rest=new axe(new URL("rest/v1",s).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new ive(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new nxe(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,n;if(t.accessToken)return await t.accessToken();const{data:r}=await t.auth.getSession();return(e=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:i,storageKey:s,flowType:o,lock:a,debug:l,throwOnError:c},u,f){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Cbe({url:this.authUrl.href,headers:zr(zr({},m),u),storageKey:s,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:i,flowType:o,lock:a,debug:l,throwOnError:c,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(g=>g.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new Axe(this.realtimeUrl.href,zr(zr({},t),{},{params:zr(zr({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const _be=(t,e,n)=>new Nbe(t,e,n);function Ibe(){if(typeof window<"u"||typeof vl>"u")return!1;const t=vl.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Ibe()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");function gee(){return{url:"https://rhkkqojnaiyrxmiiykay.supabase.co",anonKey:"sb_publishable_Kd3ZVGh8x-DOQs8gEuVxYQ_tX2sBfpA"}}let V3=null;async function Pbe(){const t=gee();if(!t.url||!t.anonKey)return console.error("[Supabase] Cannot initialize: missing configuration"),!1;try{return V3=_be(t.url,t.anonKey,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),console.log("[Supabase] Client initialized successfully"),!0}catch(e){return console.error("[Supabase] Initialization failed:",e),!1}}function I0(){return V3||console.warn("[Supabase] Client not initialized. Call initializeSupabase() first."),V3}function Rbe(){const t=gee();return!!(t.url&&t.anonKey)}function TS(t){var e,n,r;return t?{id:t.id,email:t.email||null,displayName:((e=t.user_metadata)==null?void 0:e.full_name)||((n=t.email)==null?void 0:n.split("@")[0])||null,photoURL:((r=t.user_metadata)==null?void 0:r.avatar_url)||null,emailVerified:t.email_confirmed_at!==null,createdAt:t.created_at}:null}class Obe{constructor(){this.currentUser=null,this.listeners=[]}getUser(){return this.currentUser}onAuthStateChange(e){return this.listeners.push(e),()=>{this.listeners=this.listeners.filter(n=>n!==e)}}async signInWithGoogle(){const e=I0();if(!e)throw new Error("Supabase not initialized");const{data:n,error:r}=await e.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.origin}});if(r)throw r;return this.currentUser}async signInWithEmail(e,n){const r=I0();if(!r)throw new Error("Supabase not initialized");const{data:i,error:s}=await r.auth.signInWithPassword({email:e,password:n});if(s)throw s;return this.currentUser=TS(i.user),this.notifyListeners(),this.currentUser}async signUp(e,n){const r=I0();if(!r)throw new Error("Supabase not initialized");const{data:i,error:s}=await r.auth.signUp({email:e,password:n});if(s)throw s;return this.currentUser=TS(i.user),this.notifyListeners(),this.currentUser}async logout(){const e=I0();if(!e)throw new Error("Supabase not initialized");const{error:n}=await e.auth.signOut();if(n)throw n;this.currentUser=null,this.notifyListeners()}async initialize(){const e=I0();if(!e){console.warn("[SupabaseAuth] Cannot initialize: client not available");return}e.auth.onAuthStateChange((r,i)=>{this.currentUser=i?TS(i.user):null,this.notifyListeners()});const{data:{session:n}}=await e.auth.getSession();this.currentUser=n?TS(n.user):null,this.notifyListeners()}notifyListeners(){this.listeners.forEach(e=>{try{e(this.currentUser)}catch(n){console.error("[SupabaseAuth] Listener error:",n)}})}getUserId(){var e;return((e=this.currentUser)==null?void 0:e.id)||null}isAuthenticated(){return this.currentUser!==null}async getAccessToken(){const e=I0();if(!e)return null;const{data:{session:n}}=await e.auth.getSession();return(n==null?void 0:n.access_token)||null}}const Fh=new Obe;function Cm(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function Mbe(t,e){let n;const r=()=>{if(n)return n;const i=indexedDB.open(t);return i.onupgradeneeded=()=>i.result.createObjectStore(e),n=Cm(i),n.then(s=>{s.onclose=()=>n=void 0},()=>{}),n};return(i,s)=>r().then(o=>s(o.transaction(e,i).objectStore(e)))}let vP;function h1(){return vP||(vP=Mbe("keyval-store","keyval")),vP}function bP(t,e=h1()){return e("readonly",n=>Cm(n.get(t)))}function wP(t,e,n=h1()){return n("readwrite",r=>(r.put(e,t),Cm(r.transaction)))}function EP(t,e=h1()){return e("readwrite",n=>(n.delete(t),Cm(n.transaction)))}function Dbe(t=h1()){return t("readwrite",e=>(e.clear(),Cm(e.transaction)))}function Lbe(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},Cm(t.transaction)}function y$(t=h1()){return t("readonly",e=>{if(e.getAllKeys)return Cm(e.getAllKeys());const n=[];return Lbe(e,r=>n.push(r.key)).then(()=>n)})}const qj=class qj{static setUserId(e){console.log(`[StorageService] User context set to: ${e?e.substring(0,8)+"...":"null"}`),this.currentUserId=e}static getUserId(){return this.currentUserId}static getUserKey(e){return this.currentUserId?`${e}_${this.currentUserId}`:(console.warn(`[StorageService] No user context set! Using global key for: ${e}`),e)}static async getItem(e){try{return await bP(e)}catch(n){return console.error(`[StorageService] Failed to get item ${e}:`,n),null}}static async setItem(e,n){try{await wP(e,n)}catch(r){console.error(`[StorageService] Failed to set item ${e}:`,r)}}static async removeItem(e){try{await EP(e)}catch(n){console.error(`[StorageService] Failed to remove item ${e}:`,n)}}static async clear(){try{await Dbe()}catch(e){console.error("[StorageService] Failed to clear storage:",e)}}static async clearUserData(e){try{const n=await y$(),r=`_${e}`,i=n.filter(s=>typeof s=="string"&&s.endsWith(r));console.log(`[StorageService] Clearing ${i.length} keys for user ${e.substring(0,8)}...`);for(const s of i)await EP(s);console.log("[StorageService] User data cleared.")}catch(n){console.error("[StorageService] Failed to clear user data:",n)}}static async migrateFromLocalStorage(){console.log("[StorageService] Checking for legacy localStorage data...");const e=["agent_vault_pubkey","agent_vault_enc","agent_owner_pubkey","agent_hl_vault_pubkey","agent_hl_vault_enc","agent_hl_owner_pubkey","agent_pm_vault_pubkey","agent_pm_vault_enc","agent_pm_owner_pubkey","agent_chat_history","agent_chat_sessions","vault_dealer_strategy","agent_activity_log","agent_scheduler_tasks","agent_dealer_settings"];let n=0;for(const r of e){const i=localStorage.getItem(r);if(i)try{await wP(r,i),console.log(`[StorageService] Migrated key: ${r}`),n++}catch(s){console.error(`[StorageService] Failed to migrate key ${r}:`,s)}}if(n>0){console.log(`[StorageService] Migration complete. Moved ${n} items.`);for(const r of e)localStorage.removeItem(r);console.log("[StorageService] Legacy localStorage keys cleared.")}else console.log("[StorageService] No legacy data found to migrate.")}static async migrateToUserScoped(){if(!this.currentUserId){console.warn("[StorageService] Cannot migrate to user-scoped: no userId set");return}console.log("[StorageService] Checking for unscoped IndexedDB data to migrate...");const e=["agent_vault_pubkey","agent_vault_enc","agent_owner_pubkey","agent_hl_vault_pubkey","agent_hl_vault_enc","agent_hl_owner_pubkey","agent_pm_vault_pubkey","agent_pm_vault_enc","agent_pm_owner_pubkey","vault_dealer_strategy","agent_activity_log","agent_scheduler_tasks","agent_conversations_metadata","vault_dealer_storage","vault_polymarket_storage","ai_config_store","vault_balance_history","token_usage_store"],r=(await y$()).filter(o=>typeof o=="string"&&o.startsWith("agent_conversation_")&&!o.includes("_"+this.currentUserId)),i=[...e,...r];let s=0;for(const o of i)try{const a=await bP(o);if(a){const l=`${o}_${this.currentUserId}`;await bP(l)||(await wP(l,a),console.log(`[StorageService] Migrated to user-scoped: ${o} -> ${l}`),s++),await EP(o)}}catch(a){console.error(`[StorageService] Failed to migrate key ${o}:`,a)}s>0?console.log(`[StorageService] User-scoped migration complete. Moved ${s} items.`):console.log("[StorageService] No unscoped data found to migrate.")}};qj.currentUserId=null;let Ie=qj;const Bbe={gemini:[{id:"gemini-3-flash-preview",name:"Gemini 3 Flash Preview",description:"Next generation (Preview)",inputPricePerMillion:.1,outputPricePerMillion:.4},{id:"gemini-2.5-flash",name:"Gemini 2.5 Flash",description:"Fast & balanced",inputPricePerMillion:.15,outputPricePerMillion:.6},{id:"gemini-2.5-pro",name:"Gemini 2.5 Pro",description:"Most capable",inputPricePerMillion:1.25,outputPricePerMillion:10},{id:"gemini-2.5-flash-lite",name:"Gemini 2.5 Flash-Lite",description:"Lightweight",inputPricePerMillion:.075,outputPricePerMillion:.3},{id:"gemini-2.0-flash",name:"Gemini 2.0 Flash",description:"Stable",inputPricePerMillion:.1,outputPricePerMillion:.4}],openai:[{id:"gpt-4o",name:"GPT-4o",description:"Most capable",inputPricePerMillion:2.5,outputPricePerMillion:10},{id:"gpt-4o-mini",name:"GPT-4o Mini",description:"Fast & affordable",inputPricePerMillion:.15,outputPricePerMillion:.6},{id:"gpt-4-turbo",name:"GPT-4 Turbo",description:"Stable",inputPricePerMillion:10,outputPricePerMillion:30},{id:"o1-mini",name:"o1-mini",description:"Reasoning model",inputPricePerMillion:3,outputPricePerMillion:12}],claude:[{id:"claude-sonnet-4-20250514",name:"Claude Sonnet 4",description:"Latest & fastest",inputPricePerMillion:3,outputPricePerMillion:15},{id:"claude-3-5-sonnet-20241022",name:"Claude 3.5 Sonnet",description:"Previous gen",inputPricePerMillion:3,outputPricePerMillion:15},{id:"claude-3-opus-20240229",name:"Claude 3 Opus",description:"Most capable",inputPricePerMillion:15,outputPricePerMillion:75},{id:"claude-3-haiku-20240307",name:"Claude 3 Haiku",description:"Economy",inputPricePerMillion:.25,outputPricePerMillion:1.25}]},yee={gemini:{providerType:"gemini",apiKey:"",isConfigured:!1},openai:{providerType:"openai",apiKey:"",isConfigured:!1},claude:{providerType:"claude",apiKey:"",isConfigured:!1}},xee={operator:{providerType:"gemini",modelId:"gemini-2.5-flash"},hyperliquidDealer:{providerType:"gemini",modelId:"gemini-2.5-flash"},polymarketDealer:{providerType:"gemini",modelId:"gemini-2.5-flash"}},SP={credentials:yee,componentConfigs:xee},x$="ai_config_store";class jbe{constructor(){this.isInitialized=!1,this.initPromise=null,this.state=SP,this.listeners=new Set,this.initPromise=this.initialize()}async initialize(){if(!this.isInitialized){if(!Ie.getUserId()){console.log("[AIConfigStore] No user context yet, skipping initial load"),this.isInitialized=!0;return}await this.loadFromStorage(),this.isInitialized=!0,this.notifyListeners()}}async reload(){console.log("[AIConfigStore] Reloading from storage..."),await this.loadFromStorage(),this.notifyListeners()}reset(){console.log("[AIConfigStore] Resetting to initial state..."),this.state={...SP},this.notifyListeners()}async loadFromStorage(){try{const e=await Ie.getItem(Ie.getUserKey(x$));if(e){const n=JSON.parse(e);this.state={...SP,...n,credentials:{...yee,...n.credentials},componentConfigs:{...xee,...n.componentConfigs}},console.log("[AIConfigStore] Loaded credentials from storage")}}catch(e){console.error("Failed to load AI config state:",e)}}async waitForInit(){this.initPromise&&await this.initPromise}async saveState(){try{await Ie.setItem(Ie.getUserKey(x$),JSON.stringify(this.state))}catch(e){console.error("Failed to save AI config state:",e)}}notifyListeners(){this.listeners.forEach(e=>e())}notify(){this.notifyListeners(),this.saveState()}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}getSnapshot(){return this.state}setApiKey(e,n){this.state={...this.state,credentials:{...this.state.credentials,[e]:{providerType:e,apiKey:n,isConfigured:n.trim().length>0}}},this.notify()}getApiKey(e){return this.state.credentials[e].apiKey}clearApiKey(e){this.setApiKey(e,"")}isProviderConfigured(e){return this.state.credentials[e].isConfigured}getConfiguredProviders(){return Object.entries(this.state.credentials).filter(([e,n])=>n.isConfigured).map(([e,n])=>e)}setComponentConfig(e,n){return this.state.credentials[n.providerType].isConfigured?Bbe[n.providerType].find(i=>i.id===n.modelId)?(this.state={...this.state,componentConfigs:{...this.state.componentConfigs,[e]:n}},this.notify(),!0):(console.warn(`Invalid model ${n.modelId} for provider ${n.providerType}`),!1):(console.warn(`Cannot set ${e} to use ${n.providerType}: API key not configured`),!1)}getComponentConfig(e){return this.state.componentConfigs[e]}getComponentProvider(e){return this.state.componentConfigs[e].providerType}getComponentModel(e){return this.state.componentConfigs[e].modelId}getComponentApiKey(e){const n=this.getComponentProvider(e);return this.getApiKey(n)}isComponentConfigValid(e){const n=this.state.componentConfigs[e];return this.state.credentials[n.providerType].isConfigured}getInvalidComponents(){return Object.keys(this.state.componentConfigs).filter(e=>!this.isComponentConfigValid(e))}}const ir=new jbe,UC={trend:{name:"Trend / Structure",color:"purple",icon:"TrendingUp",maxIndicators:2,indicators:["ema","sma","adx","ichimoku"],description:"Market direction and trend strength"},momentum:{name:"Momentum",color:"blue",icon:"Activity",maxIndicators:2,indicators:["rsi","macd","stoch"],description:"Entry/exit timing and divergences"},volume:{name:"Volume",color:"green",icon:"BarChart2",maxIndicators:1,indicators:["obv","vwap"],description:"Move confirmation with participation"},volatility:{name:"Volatility / Risk",color:"orange",icon:"Zap",maxIndicators:1,indicators:["atr","bollinger"],description:"Risk context and market regime"}},vee=5,qu={balanced:{name:"Balanced",description:"Trend + Momentum + Timing + Risk",emoji:"",indicators:["ema","rsi","macd","atr"],marketCondition:"uncertain or mixed signals"},scalp:{name:"Scalp Momentum",description:"Fast entries, frequent trades (5m-15m)",emoji:"",indicators:["ema","rsi","stoch","vwap"],marketCondition:"high volatility with quick reversals"},trendFollowing:{name:"Trend Following",description:"Sustained movements (15m-1h)",emoji:"",indicators:["ema","sma","adx","macd"],marketCondition:"strong directional trend"},meanReversion:{name:"Mean Reversion",description:"Range / Lateral markets",emoji:"",indicators:["bollinger","rsi","stoch","vwap"],marketCondition:"ranging or sideways market"},volumeConfirm:{name:"Volume Confirmation",description:"Avoid fake breakouts",emoji:"",indicators:["ema","rsi","obv","vwap"],marketCondition:"breakout scenarios or unusual volume"},custom:{name:"Custom",description:"Your custom configuration",emoji:"",indicators:[],marketCondition:"user-defined"}},q3={balanced:`You are Hyperliquid Dealer, an autonomous trading engine.
Your goal is to identify balanced trading opportunities using a combination of indicators.

RULES:
1. Use EMA for trend confirmation, RSI for timing, MACD for momentum, and ATR for risk management.
2. Enter LONG when: EMA points UP + RSI < 40 + MACD histogram positive.
3. Enter SHORT when: EMA points DOWN + RSI > 60 + MACD histogram negative.
4. Stop Loss: Position at 1.5x ATR from entry price.
5. Take Profit: Target 2x risk (1:2 ratio).
6. HOLD if indicators give conflicting signals.`,scalp:`You are Hyperliquid Dealer, a high-frequency scalping engine.
Your goal is to capture quick price movements (5m-15m) in volatile markets.

RULES:
1. Use EMA(9) for immediate direction, RSI for entry, Stoch for confirmation, VWAP as support/resistance.
2. LONG: Price above VWAP + RSI < 35 + Stoch crossing up.
3. SHORT: Price below VWAP + RSI > 65 + Stoch crossing down.
4. Quick trades: Target 0.3-0.5% profit per trade.
5. Tight stop: 0.5% maximum.
6. AVOID trades during low volatility.`,trendFollowing:`You are Hyperliquid Dealer, specialized in following strong trends.
Your goal is to ride sustained directional movements (15m-1h).

RULES:
1. Use EMA/SMA to confirm trend, ADX for strength, MACD for timing.
2. ONLY enter when ADX > 25 (strong trend).
3. LONG: EMA(20) > SMA(50) + ADX > 25 + MACD positive.
4. SHORT: EMA(20) < SMA(50) + ADX > 25 + MACD negative.
5. Let profits run: Trailing stop at 2x ATR.
6. HOLD in sideways markets (ADX < 20).`,meanReversion:`You are Hyperliquid Dealer, specialized in mean reversion.
Your goal is to trade ranging/sideways markets, buying dips and selling tops.

RULES:
1. Use Bollinger Bands for extremes, RSI for oversold/overbought, Stoch for confirmation, VWAP as anchor.
2. LONG: Price touches lower Bollinger + RSI < 30 + Stoch < 20.
3. SHORT: Price touches upper Bollinger + RSI > 70 + Stoch > 80.
4. Target: Return to mean (Bollinger middle or VWAP).
5. Stop: Outside the opposite band.
6. AVOID trading when Bollinger expands (breakout).`,volumeConfirm:`You are Hyperliquid Dealer with focus on volume confirmation.
Your goal is to avoid false breakouts by only trading with volume confirmation.

RULES:
1. Use EMA for trend, RSI for timing, OBV for volume flow, VWAP for institutional levels.
2. LONG: EMA up + RSI < 45 + OBV making higher highs + price above VWAP.
3. SHORT: EMA down + RSI > 55 + OBV making lower lows + price below VWAP.
4. Volume is KING: No OBV confirmation = no trade.
5. Breakouts: Only enter if volume > 1.5x average.
6. HOLD if OBV diverges from price (possible reversal signal).`,custom:`// Write your custom strategy instructions here...
// Example:
// You are a conservative trader focused on mean reversion.
// 1. Only trade when RSI is above 70 or below 30.
// 2. Prioritize high volume tokens.
// 3. Never risk more than 1% of equity per trade.`},Pg={rsi:{enabled:!0,params:{period:14},weight:1},macd:{enabled:!0,params:{fast:12,slow:26,signal:9},weight:1},bollinger:{enabled:!1,params:{period:20,stdDev:2},weight:1},atr:{enabled:!0,params:{period:14},weight:1},adx:{enabled:!1,params:{period:14},weight:1},obv:{enabled:!1,params:{},weight:1},vwap:{enabled:!1,params:{},weight:1},ichimoku:{enabled:!1,params:{conversion:9,base:26,spanB:52,displacement:26},weight:1},ema:{enabled:!0,params:{period:20},weight:1},sma:{enabled:!1,params:{period:20},weight:1},stoch:{enabled:!1,params:{period:14,signalPeriod:3},weight:1}},Ube=q3.balanced,bee={strategyPrompt:Ube,aggressiveMode:!1,maxLeverage:5,maxPositionSizeUSDC:50,maxOpenPositions:3,bankrollType:"MANUAL",manualBankroll:100,tradingPairs:["BTC","ETH","SOL"],checkIntervalSeconds:300,analysisTimeframe:"60",historyCandles:30,macroTimeframeEnabled:!1,macroTimeframe:"240",macroEnabledIndicators:["rsi","macd","ema"],indicatorSettings:Pg,autonomousIndicators:!1,selectedPreset:"balanced",promptMode:"preset",stopLossEnabled:!1,stopLossPercent:null,takeProfitEnabled:!1,takeProfitPercent:null},AP={isOn:!1,isAnalyzing:!1,statusMessage:"Ready",statusDetail:"Awaiting activation",currentTask:null,currentSignal:null,trendAssessment:"Waiting for data...",pendingExecution:!1,currentExposure:0,activePositions:[],portfolioValue:0,lastSyncTimestamp:0,settings:bee,logs:[],operationHistory:[]};class Fbe{constructor(){this.isInitialized=!1,this.initPromise=null,this.state=AP,this.listeners=new Set,this.initPromise=this.initialize()}async initialize(){this.isInitialized||(await this.loadState(),this.isInitialized=!0,this.notifyListeners())}async waitForInit(){this.initPromise&&await this.initPromise}async reloadFromStorage(){console.log("[DealerStore] Reloading from storage..."),await this.loadState(),this.notifyListeners()}reset(){console.log("[DealerStore] Resetting to initial state..."),this.state={...AP},this.notifyListeners()}async loadState(){var e,n;try{const r=await Ie.getItem(Ie.getUserKey("vault_dealer_storage"));if(r){const i=JSON.parse(r);let s=((e=i.settings)==null?void 0:e.indicatorSettings)||Pg;const o={};for(const a of Object.keys(Pg)){const l=s[a],c=Pg[a];o[a]={enabled:(l==null?void 0:l.enabled)??c.enabled,params:(l==null?void 0:l.params)??c.params,weight:(l==null?void 0:l.weight)??1}}this.state={...AP,...i,settings:{...bee,...i.settings||{},indicatorSettings:o,selectedPreset:((n=i.settings)==null?void 0:n.selectedPreset)||"balanced"},isAnalyzing:!1,pendingExecution:!1,logs:i.logs||[]}}}catch(r){console.error("Failed to load dealer state:",r)}}async saveState(){try{await Ie.setItem(Ie.getUserKey("vault_dealer_storage"),JSON.stringify(this.state))}catch(e){console.error("Failed to save dealer state:",e)}}notifyListeners(){this.listeners.forEach(e=>e())}notify(){this.notifyListeners(),this.saveState()}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}getSnapshot(){return this.state}toggleDealer(e){this.state={...this.state,isOn:e,statusMessage:e?"Dealer Activated":"Dealer Stopped"},this.addLog("INFO",`Dealer turned ${e?"ON":"OFF"}`),this.notify()}updateSettings(e){this.state={...this.state,settings:{...this.state.settings,...e}},this.addLog("INFO","Settings updated"),this.notify()}setStrategyPrompt(e){this.updateSettings({strategyPrompt:e})}setAnalyzing(e){this.state={...this.state,isAnalyzing:e},this.notify()}updateStatus(e,n,r,i,s){this.state={...this.state,currentTask:e!==void 0?e:this.state.currentTask,currentSignal:n!==void 0?n:this.state.currentSignal,trendAssessment:r!==void 0?r:this.state.trendAssessment,currentExposure:i!==void 0?i:this.state.currentExposure,statusDetail:s!==void 0?s:this.state.statusDetail},this.notify()}updatePortfolioState(e,n,r){this.state={...this.state,activePositions:e,portfolioValue:n,currentExposure:r,lastSyncTimestamp:Date.now()},this.notify()}addLog(e,n,r){const s=[{id:Date.now().toString()+Math.random().toString().slice(2,5),timestamp:Date.now(),type:e,message:n,details:r},...this.state.logs].slice(0,100);this.state={...this.state,logs:s},this.notify()}clearLogs(){this.state={...this.state,logs:[]},this.notify()}reload(){this.state={...this.state,isAnalyzing:!1,currentTask:null,currentSignal:null,pendingExecution:!1,trendAssessment:"Reset by user",statusMessage:"Settings Applied"},this.addLog("INFO","System reloaded manually"),this.notify()}addOperationRecord(e){const r=[{...e,id:Date.now().toString()+Math.random().toString().slice(2,5)},...this.state.operationHistory].slice(0,50);this.state={...this.state,operationHistory:r},this.notify()}updateOperationStatus(e,n){const r=this.state.operationHistory.map(i=>i.cloid===e?{...i,...n}:i);this.state={...this.state,operationHistory:r},this.notify()}getTradeHistory(e,n=10,r=!0){let i=this.state.operationHistory;e&&(i=i.filter(a=>a.coin.toUpperCase()===e.toUpperCase()));const s=r?this.state.logs.filter(a=>a.type==="REASONING"||a.type==="TRADE"||a.type==="SIGNAL"):[];return{operations:i.slice(0,n).map(a=>{var c,u;const l=s.find(f=>f.message.includes(a.coin)&&Math.abs(f.timestamp-a.timestamp)<6e4);return{...a,fullReasoning:((c=l==null?void 0:l.details)==null?void 0:c.fullReason)||a.reasoning,analysisContext:(u=l==null?void 0:l.details)==null?void 0:u.context}}),totalOperations:i.length,recentLogs:s.slice(0,5)}}}const kt=new Fbe,$be=[{value:"politics",label:"Politics",icon:""},{value:"crypto",label:"Crypto",icon:""},{value:"sports",label:"Sports",icon:""},{value:"pop-culture",label:"Pop Culture",icon:""},{value:"science",label:"Science",icon:""},{value:"business",label:"Business",icon:""},{value:"other",label:"Other",icon:""}],Bb={balanced:{name:"Balanced",description:"Trade across all categories with balanced risk",emoji:"",categories:["politics","crypto","business","science"],marketCondition:"diverse markets with good liquidity"},highVolume:{name:"High Volume",description:"Focus on most liquid markets",emoji:"",categories:["politics","crypto","sports"],marketCondition:"high volume markets with tight spreads"},crypto:{name:"Crypto Focus",description:"Only cryptocurrency-related markets",emoji:"",categories:["crypto"],marketCondition:"crypto market events and predictions"},conservative:{name:"Conservative",description:"Low risk, high confidence trades only",emoji:"",categories:["politics","business"],marketCondition:"stable markets with clear probable outcomes"},custom:{name:"Custom",description:"Your custom configuration",emoji:"",categories:[],marketCondition:"user-defined"}},AT={balanced:`You are Polymarket Dealer, an autonomous prediction market trading engine.
Your goal is to identify high-probability trading opportunities across diverse markets.

RULES:
1. Analyze market question, current probability, volume, and time to resolution.
2. BUY YES when probability is undervalued (market < 40% but your analysis suggests > 60%).
3. BUY NO when probability is overvalued (market > 60% but your analysis suggests < 40%).
4. SELL positions when probability has moved 15%+ in your favor OR if new information changes thesis.
5. AVOID markets with < $10k liquidity or < 7 days to resolution (unless very high confidence).
6. Max position: 5% of bankroll per market.
7. HOLD if confidence < 65%.`,highVolume:`You are Polymarket Dealer, focused on liquid markets with high volume.
Your goal is to trade actively in markets with the best liquidity and tightest spreads.

RULES:
1. Only trade markets with > $50k volume in 24h.
2. Target spreads < 5% for entries and exits.
3. Look for momentum: price moving in a direction with increasing volume.
4. Use smaller positions (2% max) but trade more frequently.
5. Take profits quickly: exit at 10%+ gain.
6. Cut losses at 8%.
7. AVOID low-liquidity markets even if edge seems large.`,crypto:`You are Polymarket Dealer, specialized in cryptocurrency prediction markets.
Your goal is to leverage crypto market knowledge for prediction market alpha.

RULES:
1. Trade only crypto-related markets (price predictions, ETF approvals, protocol events).
2. Use your understanding of crypto market dynamics and sentiment.
3. BUY YES on bullish crypto catalysts you believe are underpriced.
4. BUY NO when crypto hype seems overextended.
5. Watch for correlation with actual crypto prices.
6. Higher conviction trades allowed (up to 8% of bankroll).
7. AVOID markets about specific coins you lack knowledge of.`,conservative:`You are Polymarket Dealer, taking a conservative low-risk approach.
Your goal is to identify very high probability trades with minimal downside.

RULES:
1. Only trade when confidence > 80%.
2. Focus on markets where outcome seems nearly certain (price > 85% or < 15%).
3. Look for arbitrage opportunities and mispriced markets.
4. Small position sizes (max 3% of bankroll).
5. AVOID volatile markets or those with incoming news catalysts.
6. Prefer longer time horizons (> 30 days to resolution).
7. HOLD cash if no clear opportunities.`,custom:`// Write your custom strategy instructions here...
// Example:
// You are a specialized Polymarket trader.
// 1. Focus on political markets only.
// 2. Trade based on polling data and historical patterns.
// 3. Never risk more than 2% per trade.`},zbe=AT.balanced,wee={strategyPrompt:zbe,marketSelectionMode:"AI_DISCOVERY",selectedMarkets:[],allowedCategories:["politics","crypto","business","science"],maxPositionSizeUSDC:50,maxOpenPositions:5,minLiquidity:1e4,minVolume24h:5e3,minVolumeThreshold:5e3,minLiquidityThreshold:1e4,minSpreadThreshold:.02,confidenceThreshold:.6,bankrollType:"MANUAL",manualBankroll:100,checkIntervalSeconds:300,promptMode:"preset",selectedPreset:"balanced"},TP={isOn:!1,isAnalyzing:!1,statusMessage:"Ready",statusDetail:"Awaiting activation",currentTask:null,currentSignal:null,analysisNote:"Waiting for data...",pendingExecution:!1,currentExposure:0,activePositions:[],portfolioValue:0,lastSyncTimestamp:0,settings:wee,logs:[],operationHistory:[]};class Hbe{constructor(){this.isInitialized=!1,this.initPromise=null,this.state=TP,this.listeners=new Set,this.initPromise=this.initialize()}async initialize(){this.isInitialized||(await this.loadState(),this.isInitialized=!0,this.notifyListeners())}async waitForInit(){this.initPromise&&await this.initPromise}async reloadFromStorage(){console.log("[PolymarketStore] Reloading from storage..."),await this.loadState(),this.notifyListeners()}reset(){console.log("[PolymarketStore] Resetting to initial state..."),this.state={...TP},this.notifyListeners()}async loadState(){try{const e=Ie.getUserKey("vault_polymarket_storage");console.log("[PolymarketStore] Loading from key:",e);const n=await Ie.getItem(e);if(n){const r=JSON.parse(n);console.log("[PolymarketStore] Loaded settings:",r.settings),this.state={...TP,...r,settings:{...wee,...r.settings||{}},isAnalyzing:!1,pendingExecution:!1,logs:r.logs||[]}}else console.log("[PolymarketStore] No saved data found")}catch(e){console.error("Failed to load Polymarket state:",e)}}async saveState(){try{await Ie.setItem(Ie.getUserKey("vault_polymarket_storage"),JSON.stringify(this.state))}catch(e){console.error("Failed to save Polymarket state:",e)}}notifyListeners(){this.listeners.forEach(e=>e())}notify(){this.notifyListeners(),this.saveState()}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}getSnapshot(){return this.state}toggleDealer(e){this.state={...this.state,isOn:e,statusMessage:e?"Polymarket Dealer Activated":"Polymarket Dealer Stopped"},this.addLog("INFO",`Polymarket Dealer turned ${e?"ON":"OFF"}`),this.notify()}updateSettings(e){this.state={...this.state,settings:{...this.state.settings,...e}},this.addLog("INFO","Polymarket settings updated"),this.notify()}setStrategyPrompt(e){this.updateSettings({strategyPrompt:e})}setAnalyzing(e){this.state={...this.state,isAnalyzing:e},this.notify()}setCurrentTask(e){this.state={...this.state,currentTask:e},this.notify()}setStatusMessage(e){this.state={...this.state,statusMessage:e},this.notify()}setStatusDetail(e){this.state={...this.state,statusDetail:e},this.notify()}setAnalysisNote(e){this.state={...this.state,analysisNote:e},this.notify()}setCurrentSignal(e){this.state={...this.state,currentSignal:e},this.notify()}updateStatus(e,n,r,i,s){this.state={...this.state,currentTask:e!==void 0?e:this.state.currentTask,currentSignal:n!==void 0?n:this.state.currentSignal,analysisNote:r!==void 0?r:this.state.analysisNote,currentExposure:i!==void 0?i:this.state.currentExposure,statusDetail:s!==void 0?s:this.state.statusDetail},this.notify()}updatePortfolioState(e,n,r){this.state={...this.state,activePositions:e,portfolioValue:n,currentExposure:r,lastSyncTimestamp:Date.now()},this.notify()}addLog(e,n,r){const s=[{id:Date.now().toString()+Math.random().toString().slice(2,5),timestamp:Date.now(),type:e,message:n,details:r},...this.state.logs].slice(0,100);this.state={...this.state,logs:s},this.notify()}clearLogs(){this.state={...this.state,logs:[]},this.notify()}reload(){this.state={...this.state,isAnalyzing:!1,currentTask:null,currentSignal:null,pendingExecution:!1,analysisNote:"Reset by user",statusMessage:"Settings Applied"},this.addLog("INFO","Polymarket system reloaded manually"),this.notify()}addOperationRecord(e){const r=[{...e,id:Date.now().toString()+Math.random().toString().slice(2,5)},...this.state.operationHistory].slice(0,50);this.state={...this.state,operationHistory:r},this.notify()}updateOperationStatus(e,n){const r=this.state.operationHistory.map(i=>i.id===e?{...i,...n}:i);this.state={...this.state,operationHistory:r},this.notify()}getTradeHistory(e=10,n=!0){let r=this.state.operationHistory;const i=n?this.state.logs.filter(o=>o.type==="REASONING"||o.type==="TRADE"||o.type==="SIGNAL"):[];return{operations:r.slice(0,e).map(o=>{var l,c;const a=i.find(u=>u.message.includes(o.question.slice(0,30))&&Math.abs(u.timestamp-o.timestamp)<6e4);return{...o,fullReasoning:((l=a==null?void 0:a.details)==null?void 0:l.fullReason)||o.reasoning,analysisContext:(c=a==null?void 0:a.details)==null?void 0:c.context}}),totalOperations:r.length,recentLogs:i.slice(0,5)}}}const at=new Hbe,Eee=T.createContext(void 0);function p1(){const t=T.useContext(Eee);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}function v$(t){return t?{uid:t.id,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified}:null}function Vbe({children:t}){const[e,n]=T.useState(null),[r,i]=T.useState(!0);T.useEffect(()=>{(async()=>{if(!Rbe()){console.warn("[AuthContext] Supabase not configured. Auth will not work until configured."),i(!1);return}await Pbe(),await Fh.initialize();const m=v$(Fh.getUser());n(m),Ie.setUserId((m==null?void 0:m.uid)||null),m!=null&&m.uid&&(await Ie.migrateToUserScoped(),await ir.reload(),await kt.reloadFromStorage(),await at.reloadFromStorage()),i(!1)})();const f=Fh.onAuthStateChange(async m=>{const g=v$(m);n(g),Ie.setUserId((g==null?void 0:g.uid)||null),g!=null&&g.uid?(await Ie.migrateToUserScoped(),await ir.reload(),await kt.reloadFromStorage(),await at.reloadFromStorage()):(kt.reset(),at.reset())});return()=>f()},[]);const c={user:e,loading:r,signInWithGoogle:async()=>{try{await Fh.signInWithGoogle()}catch(u){throw console.error("Google sign-in error:",u),u}},signInWithEmail:async(u,f)=>{try{await Fh.signInWithEmail(u,f)}catch(m){throw console.error("Email sign-in error:",m),m}},signUp:async(u,f)=>{try{await Fh.signUp(u,f)}catch(m){throw console.error("Sign-up error:",m),m}},logout:async()=>{try{await Fh.logout()}catch(u){throw console.error("Logout error:",u),u}}};return h.jsx(Eee.Provider,{value:c,children:t})}var Ce=(t=>(t.DASHBOARD="dashboard",t.VAULT="vault",t.AGENT="agent",t.SCHEDULER="scheduler",t.HYPERLIQUID="hyperliquid",t.VAULT_DEALER="vault_dealer",t.DEALER_DASHBOARD="dealer_dashboard",t.DEALER_THINKING="dealer_thinking",t.DEALER_CONFIG="dealer_config",t.DEALER_PROMPT="dealer_prompt",t.CONFIGURATION="configuration",t.SETTINGS="settings",t.HISTORY="history",t.TOKEN_COSTS="token_costs",t.POLYMARKET_DEALER="polymarket_dealer",t.POLYMARKET_DASHBOARD="polymarket_dashboard",t.POLYMARKET_THINKING="polymarket_thinking",t.POLYMARKET_CONFIG="polymarket_config",t.POLYMARKET_PROMPT="polymarket_prompt",t.PRIVACY="privacy",t.TERMS="terms",t))(Ce||{});const hL=T.createContext({});function pL(t){const e=T.useRef(null);return e.current===null&&(e.current=t()),e.current}const mL=typeof window<"u",See=mL?T.useLayoutEffect:T.useEffect,FC=T.createContext(null);function gL(t,e){t.indexOf(e)===-1&&t.push(e)}function yL(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Qu=(t,e,n)=>n>e?e:n<t?t:n;let xL=()=>{};const Zu={},Aee=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function Tee(t){return typeof t=="object"&&t!==null}const kee=t=>/^0[^.\s]+$/u.test(t);function vL(t){let e;return()=>(e===void 0&&(e=t()),e)}const Ba=t=>t,qbe=(t,e)=>n=>e(t(n)),m1=(...t)=>t.reduce(qbe),nw=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class bL{constructor(){this.subscriptions=[]}add(e){return gL(this.subscriptions,e),()=>yL(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const xc=t=>t*1e3,Da=t=>t/1e3;function Cee(t,e){return e?t*(1e3/e):0}const Nee=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,Gbe=1e-7,Kbe=12;function Wbe(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=Nee(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>Gbe&&++a<Kbe);return o}function g1(t,e,n,r){if(t===e&&n===r)return Ba;const i=s=>Wbe(s,0,1,t,n);return s=>s===0||s===1?s:Nee(i(s),e,r)}const _ee=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Iee=t=>e=>1-t(1-e),Pee=g1(.33,1.53,.69,.99),wL=Iee(Pee),Ree=_ee(wL),Oee=t=>(t*=2)<1?.5*wL(t):.5*(2-Math.pow(2,-10*(t-1))),EL=t=>1-Math.sin(Math.acos(t)),Mee=Iee(EL),Dee=_ee(EL),Ybe=g1(.42,0,1,1),Jbe=g1(0,0,.58,1),Lee=g1(.42,0,.58,1),Xbe=t=>Array.isArray(t)&&typeof t[0]!="number",Bee=t=>Array.isArray(t)&&typeof t[0]=="number",Qbe={linear:Ba,easeIn:Ybe,easeInOut:Lee,easeOut:Jbe,circIn:EL,circInOut:Dee,circOut:Mee,backIn:wL,backInOut:Ree,backOut:Pee,anticipate:Oee},Zbe=t=>typeof t=="string",b$=t=>{if(Bee(t)){xL(t.length===4);const[e,n,r,i]=t;return g1(e,n,r,i)}else if(Zbe(t))return Qbe[t];return t},kS=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function ewe(t,e){let n=new Set,r=new Set,i=!1,s=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function l(u){o.has(u)&&(c.schedule(u),t()),u(a)}const c={schedule:(u,f=!1,m=!1)=>{const x=m&&i?n:r;return f&&o.add(u),x.has(u)||x.add(u),u},cancel:u=>{r.delete(u),o.delete(u)},process:u=>{if(a=u,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(l),n.clear(),i=!1,s&&(s=!1,c.process(u))}};return c}const twe=40;function jee(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=kS.reduce((k,O)=>(k[O]=ewe(s),k),{}),{setup:a,read:l,resolveKeyframes:c,preUpdate:u,update:f,preRender:m,render:g,postRender:x}=o,v=()=>{const k=Zu.useManualTiming?i.timestamp:performance.now();n=!1,Zu.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(k-i.timestamp,twe),1)),i.timestamp=k,i.isProcessing=!0,a.process(i),l.process(i),c.process(i),u.process(i),f.process(i),m.process(i),g.process(i),x.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(v))},w=()=>{n=!0,r=!0,i.isProcessing||t(v)};return{schedule:kS.reduce((k,O)=>{const j=o[O];return k[O]=(R,U=!1,V=!1)=>(n||w(),j.schedule(R,U,V)),k},{}),cancel:k=>{for(let O=0;O<kS.length;O++)o[kS[O]].cancel(k)},state:i,steps:o}}const{schedule:kr,cancel:Zf,state:es,steps:kP}=jee(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ba,!0);let $A;function nwe(){$A=void 0}const fo={now:()=>($A===void 0&&fo.set(es.isProcessing||Zu.useManualTiming?es.timestamp:performance.now()),$A),set:t=>{$A=t,queueMicrotask(nwe)}},Uee=t=>e=>typeof e=="string"&&e.startsWith(t),Fee=Uee("--"),rwe=Uee("var(--"),SL=t=>rwe(t)?iwe.test(t.split("/*")[0].trim()):!1,iwe=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Ex={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},rw={...Ex,transform:t=>Qu(0,1,t)},CS={...Ex,default:1},jb=t=>Math.round(t*1e5)/1e5,AL=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function swe(t){return t==null}const owe=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,TL=(t,e)=>n=>!!(typeof n=="string"&&owe.test(n)&&n.startsWith(t)||e&&!swe(n)&&Object.prototype.hasOwnProperty.call(n,e)),$ee=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(AL);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},awe=t=>Qu(0,255,t),CP={...Ex,transform:t=>Math.round(awe(t))},fp={test:TL("rgb","red"),parse:$ee("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+CP.transform(t)+", "+CP.transform(e)+", "+CP.transform(n)+", "+jb(rw.transform(r))+")"};function lwe(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const G3={test:TL("#"),parse:lwe,transform:fp.transform},y1=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),yf=y1("deg"),vc=y1("%"),Xt=y1("px"),cwe=y1("vh"),uwe=y1("vw"),w$={...vc,parse:t=>vc.parse(t)/100,transform:t=>vc.transform(t*100)},ug={test:TL("hsl","hue"),parse:$ee("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+vc.transform(jb(e))+", "+vc.transform(jb(n))+", "+jb(rw.transform(r))+")"},di={test:t=>fp.test(t)||G3.test(t)||ug.test(t),parse:t=>fp.test(t)?fp.parse(t):ug.test(t)?ug.parse(t):G3.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?fp.transform(t):ug.transform(t),getAnimatableNone:t=>{const e=di.parse(t);return e.alpha=0,di.transform(e)}},dwe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function fwe(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(AL))==null?void 0:e.length)||0)+(((n=t.match(dwe))==null?void 0:n.length)||0)>0}const zee="number",Hee="color",hwe="var",pwe="var(",E$="${}",mwe=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function iw(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(mwe,l=>(di.test(l)?(r.color.push(s),i.push(Hee),n.push(di.parse(l))):l.startsWith(pwe)?(r.var.push(s),i.push(hwe),n.push(l)):(r.number.push(s),i.push(zee),n.push(parseFloat(l))),++s,E$)).split(E$);return{values:n,split:a,indexes:r,types:i}}function Vee(t){return iw(t).values}function qee(t){const{split:e,types:n}=iw(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===zee?s+=jb(i[o]):a===Hee?s+=di.transform(i[o]):s+=i[o]}return s}}const gwe=t=>typeof t=="number"?0:di.test(t)?di.getAnimatableNone(t):t;function ywe(t){const e=Vee(t);return qee(t)(e.map(gwe))}const eh={test:fwe,parse:Vee,createTransformer:qee,getAnimatableNone:ywe};function NP(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function xwe({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=NP(l,a,t+1/3),s=NP(l,a,t),o=NP(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function TT(t,e){return n=>n>0?e:t}const Dr=(t,e,n)=>t+(e-t)*n,_P=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},vwe=[G3,fp,ug],bwe=t=>vwe.find(e=>e.test(t));function S$(t){const e=bwe(t);if(!e)return!1;let n=e.parse(t);return e===ug&&(n=xwe(n)),n}const A$=(t,e)=>{const n=S$(t),r=S$(e);if(!n||!r)return TT(t,e);const i={...n};return s=>(i.red=_P(n.red,r.red,s),i.green=_P(n.green,r.green,s),i.blue=_P(n.blue,r.blue,s),i.alpha=Dr(n.alpha,r.alpha,s),fp.transform(i))},K3=new Set(["none","hidden"]);function wwe(t,e){return K3.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function Ewe(t,e){return n=>Dr(t,e,n)}function kL(t){return typeof t=="number"?Ewe:typeof t=="string"?SL(t)?TT:di.test(t)?A$:Twe:Array.isArray(t)?Gee:typeof t=="object"?di.test(t)?A$:Swe:TT}function Gee(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>kL(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function Swe(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=kL(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function Awe(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],o=t.indexes[s][r[s]],a=t.values[o]??0;n[i]=a,r[s]++}return n}const Twe=(t,e)=>{const n=eh.createTransformer(e),r=iw(t),i=iw(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?K3.has(t)&&!i.values.length||K3.has(e)&&!r.values.length?wwe(t,e):m1(Gee(Awe(r,i),i.values),n):TT(t,e)};function Kee(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Dr(t,e,n):kL(t)(t,e)}const kwe=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>kr.update(e,n),stop:()=>Zf(e),now:()=>es.isProcessing?es.timestamp:fo.now()}},Wee=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=Math.round(t(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},kT=2e4;function CL(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<kT;)e+=n,r=t.next(e);return e>=kT?1/0:e}function Cwe(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(CL(r),kT);return{type:"keyframes",ease:s=>r.next(i*s).value/e,duration:Da(i)}}const Nwe=5;function Yee(t,e,n){const r=Math.max(e-Nwe,0);return Cee(n-t(r),e-r)}const Hr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},IP=.001;function _we({duration:t=Hr.duration,bounce:e=Hr.bounce,velocity:n=Hr.velocity,mass:r=Hr.mass}){let i,s,o=1-e;o=Qu(Hr.minDamping,Hr.maxDamping,o),t=Qu(Hr.minDuration,Hr.maxDuration,Da(t)),o<1?(i=c=>{const u=c*o,f=u*t,m=u-n,g=W3(c,o),x=Math.exp(-f);return IP-m/g*x},s=c=>{const f=c*o*t,m=f*n+n,g=Math.pow(o,2)*Math.pow(c,2)*t,x=Math.exp(-f),v=W3(Math.pow(c,2),o);return(-i(c)+IP>0?-1:1)*((m-g)*x)/v}):(i=c=>{const u=Math.exp(-c*t),f=(c-n)*t+1;return-IP+u*f},s=c=>{const u=Math.exp(-c*t),f=(n-c)*(t*t);return u*f});const a=5/t,l=Pwe(i,s,a);if(t=xc(t),isNaN(l))return{stiffness:Hr.stiffness,damping:Hr.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const Iwe=12;function Pwe(t,e,n){let r=n;for(let i=1;i<Iwe;i++)r=r-t(r)/e(r);return r}function W3(t,e){return t*Math.sqrt(1-e*e)}const Rwe=["duration","bounce"],Owe=["stiffness","damping","mass"];function T$(t,e){return e.some(n=>t[n]!==void 0)}function Mwe(t){let e={velocity:Hr.velocity,stiffness:Hr.stiffness,damping:Hr.damping,mass:Hr.mass,isResolvedFromDuration:!1,...t};if(!T$(t,Owe)&&T$(t,Rwe))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*Qu(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Hr.mass,stiffness:i,damping:s}}else{const n=_we(t);e={...e,...n,mass:Hr.mass},e.isResolvedFromDuration=!0}return e}function CT(t=Hr.visualDuration,e=Hr.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:f,velocity:m,isResolvedFromDuration:g}=Mwe({...n,velocity:-Da(n.velocity||0)}),x=m||0,v=c/(2*Math.sqrt(l*u)),w=o-s,E=Da(Math.sqrt(l/u)),C=Math.abs(w)<5;r||(r=C?Hr.restSpeed.granular:Hr.restSpeed.default),i||(i=C?Hr.restDelta.granular:Hr.restDelta.default);let k;if(v<1){const j=W3(E,v);k=R=>{const U=Math.exp(-v*E*R);return o-U*((x+v*E*w)/j*Math.sin(j*R)+w*Math.cos(j*R))}}else if(v===1)k=j=>o-Math.exp(-E*j)*(w+(x+E*w)*j);else{const j=E*Math.sqrt(v*v-1);k=R=>{const U=Math.exp(-v*E*R),V=Math.min(j*R,300);return o-U*((x+v*E*w)*Math.sinh(V)+j*w*Math.cosh(V))/j}}const O={calculatedDuration:g&&f||null,next:j=>{const R=k(j);if(g)a.done=j>=f;else{let U=j===0?x:0;v<1&&(U=j===0?xc(x):Yee(k,j,R));const V=Math.abs(U)<=r,F=Math.abs(o-R)<=i;a.done=V&&F}return a.value=a.done?o:R,a},toString:()=>{const j=Math.min(CL(O),kT),R=Wee(U=>O.next(j*U).value,j,30);return j+"ms "+R},toTransition:()=>{}};return O}CT.applyToOptions=t=>{const e=Cwe(t,100,CT);return t.ease=e.ease,t.duration=xc(e.duration),t.type="keyframes",t};function Y3({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const f=t[0],m={done:!1,value:f},g=V=>a!==void 0&&V<a||l!==void 0&&V>l,x=V=>a===void 0?l:l===void 0||Math.abs(a-V)<Math.abs(l-V)?a:l;let v=n*e;const w=f+v,E=o===void 0?w:o(w);E!==w&&(v=E-f);const C=V=>-v*Math.exp(-V/r),k=V=>E+C(V),O=V=>{const F=C(V),$=k(V);m.done=Math.abs(F)<=c,m.value=m.done?E:$};let j,R;const U=V=>{g(m.value)&&(j=V,R=CT({keyframes:[m.value,x(m.value)],velocity:Yee(k,V,m.value),damping:i,stiffness:s,restDelta:c,restSpeed:u}))};return U(0),{calculatedDuration:null,next:V=>{let F=!1;return!R&&j===void 0&&(F=!0,O(V),U(V)),j!==void 0&&V>=j?R.next(V-j):(!F&&O(V),m)}}}function Dwe(t,e,n){const r=[],i=n||Zu.mix||Kee,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||Ba:e;a=m1(l,a)}r.push(a)}return r}function Lwe(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(xL(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=Dwe(e,r,i),l=a.length,c=u=>{if(o&&u<t[0])return e[0];let f=0;if(l>1)for(;f<t.length-2&&!(u<t[f+1]);f++);const m=nw(t[f],t[f+1],u);return a[f](m)};return n?u=>c(Qu(t[0],t[s-1],u)):c}function Bwe(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=nw(0,e,r);t.push(Dr(n,1,i))}}function jwe(t){const e=[0];return Bwe(e,t.length-1),e}function Uwe(t,e){return t.map(n=>n*e)}function Fwe(t,e){return t.map(()=>e||Lee).splice(0,t.length-1)}function Ub({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=Xbe(r)?r.map(b$):b$(r),s={done:!1,value:e[0]},o=Uwe(n&&n.length===e.length?n:jwe(e),t),a=Lwe(o,e,{ease:Array.isArray(i)?i:Fwe(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const $we=t=>t!==null;function NL(t,{repeat:e,repeatType:n="loop"},r,i=1){const s=t.filter($we),a=i<0||e&&n!=="loop"&&e%2===1?0:s.length-1;return!a||r===void 0?s[a]:r}const zwe={decay:Y3,inertia:Y3,tween:Ub,keyframes:Ub,spring:CT};function Jee(t){typeof t.type=="string"&&(t.type=zwe[t.type])}class _L{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const Hwe=t=>t/100;class IL extends _L{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==fo.now()&&this.tick(fo.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;Jee(e);const{type:n=Ub,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=e;let{keyframes:a}=e;const l=n||Ub;l!==Ub&&typeof a[0]!="number"&&(this.mixKeyframes=m1(Hwe,Kee(a[0],a[1])),a=[0,100]);const c=l({...e,keyframes:a});s==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...a].reverse(),velocity:-o})),c.calculatedDuration===null&&(c.calculatedDuration=CL(c));const{calculatedDuration:u}=c;this.calculatedDuration=u,this.resolvedDuration=u+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=c}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:c=0,keyframes:u,repeat:f,repeatType:m,repeatDelay:g,type:x,onUpdate:v,finalKeyframe:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const E=this.currentTime-c*(this.playbackSpeed>=0?1:-1),C=this.playbackSpeed>=0?E<0:E>i;this.currentTime=Math.max(E,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let k=this.currentTime,O=r;if(f){const V=Math.min(this.currentTime,i)/a;let F=Math.floor(V),$=V%1;!$&&V>=1&&($=1),$===1&&F--,F=Math.min(F,f+1),!!(F%2)&&(m==="reverse"?($=1-$,g&&($-=g/a)):m==="mirror"&&(O=o)),k=Qu(0,1,$)*a}const j=C?{done:!1,value:u[0]}:O.next(k);s&&(j.value=s(j.value));let{done:R}=j;!C&&l!==null&&(R=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const U=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&R);return U&&x!==Y3&&(j.value=NL(u,this.options,w,this.speed)),v&&v(j.value),U&&this.finish(),j}then(e,n){return this.finished.then(e,n)}get duration(){return Da(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Da(e)}get time(){return Da(this.currentTime)}set time(e){var n;e=xc(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(fo.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Da(this.currentTime))}play(){var i,s;if(this.isStopped)return;const{driver:e=kwe,startTime:n}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(s=(i=this.options).onPlay)==null||s.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(fo.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function Vwe(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const hp=t=>t*180/Math.PI,J3=t=>{const e=hp(Math.atan2(t[1],t[0]));return X3(e)},qwe={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:J3,rotateZ:J3,skewX:t=>hp(Math.atan(t[1])),skewY:t=>hp(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},X3=t=>(t=t%360,t<0&&(t+=360),t),k$=J3,C$=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),N$=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),Gwe={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:C$,scaleY:N$,scale:t=>(C$(t)+N$(t))/2,rotateX:t=>X3(hp(Math.atan2(t[6],t[5]))),rotateY:t=>X3(hp(Math.atan2(-t[2],t[0]))),rotateZ:k$,rotate:k$,skewX:t=>hp(Math.atan(t[4])),skewY:t=>hp(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Q3(t){return t.includes("scale")?1:0}function Z3(t,e){if(!t||t==="none")return Q3(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=Gwe,i=n;else{const a=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=qwe,i=a}if(!i)return Q3(e);const s=r[e],o=i[1].split(",").map(Wwe);return typeof s=="function"?s(o):o[s]}const Kwe=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return Z3(n,e)};function Wwe(t){return parseFloat(t.trim())}const Sx=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ax=new Set(Sx),_$=t=>t===Ex||t===Xt,Ywe=new Set(["x","y","z"]),Jwe=Sx.filter(t=>!Ywe.has(t));function Xwe(t){const e=[];return Jwe.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Kp={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Z3(e,"x"),y:(t,{transform:e})=>Z3(e,"y")};Kp.translateX=Kp.x;Kp.translateY=Kp.y;const Wp=new Set;let e4=!1,t4=!1,n4=!1;function Xee(){if(t4){const t=Array.from(Wp).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=Xwe(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))==null||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}t4=!1,e4=!1,Wp.forEach(t=>t.complete(n4)),Wp.clear()}function Qee(){Wp.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(t4=!0)})}function Qwe(){n4=!0,Qee(),Xee(),n4=!1}class PL{constructor(e,n,r,i,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Wp.add(this),e4||(e4=!0,kr.read(Qee),kr.resolveKeyframes(Xee))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const s=i==null?void 0:i.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&n){const a=r.readValue(n,o);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=o),i&&s===void 0&&i.set(e[0])}Vwe(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Wp.delete(this)}cancel(){this.state==="scheduled"&&(Wp.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Zwe=t=>t.startsWith("--");function e1e(t,e,n){Zwe(e)?t.style.setProperty(e,n):t.style[e]=n}const t1e=vL(()=>window.ScrollTimeline!==void 0),n1e={};function r1e(t,e){const n=vL(t);return()=>n1e[e]??n()}const Zee=r1e(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),bb=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,I$={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:bb([0,.65,.55,1]),circOut:bb([.55,0,1,.45]),backIn:bb([.31,.01,.66,-.59]),backOut:bb([.33,1.53,.69,.99])};function ete(t,e){if(t)return typeof t=="function"?Zee()?Wee(t,e):"ease-out":Bee(t)?bb(t):Array.isArray(t)?t.map(n=>ete(n,e)||I$.easeOut):I$[t]}function i1e(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeOut",times:l}={},c=void 0){const u={[e]:n};l&&(u.offset=l);const f=ete(a,i);Array.isArray(f)&&(u.easing=f);const m={delay:r,duration:i,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return c&&(m.pseudoElement=c),t.animate(u,m)}function tte(t){return typeof t=="function"&&"applyToOptions"in t}function s1e({type:t,...e}){return tte(t)&&Zee()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class o1e extends _L{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=e;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=e,xL(typeof e.type!="string");const c=s1e(e);this.animation=i1e(n,r,i,c,s),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const u=NL(i,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(u):e1e(n,r,u),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return Da(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Da(e)}get time(){return Da(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=xc(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&t1e()?(this.animation.timeline=e,Ba):n(this)}}const nte={anticipate:Oee,backInOut:Ree,circInOut:Dee};function a1e(t){return t in nte}function l1e(t){typeof t.ease=="string"&&a1e(t.ease)&&(t.ease=nte[t.ease])}const P$=10;class c1e extends o1e{constructor(e){l1e(e),Jee(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const a=new IL({...o,autoplay:!1}),l=xc(this.finishedTime??this.time);n.setWithVelocity(a.sample(l-P$).value,a.sample(l).value,P$),a.stop()}}const R$=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(eh.test(t)||t==="0")&&!t.startsWith("url("));function u1e(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function d1e(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=R$(i,e),a=R$(s,e);return!o||!a?!1:u1e(t)||(n==="spring"||tte(n))&&r}function r4(t){t.duration=0,t.type="keyframes"}const f1e=new Set(["opacity","clipPath","filter","transform"]),h1e=vL(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function p1e(t){var u;const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:s,type:o}=t;if(!(((u=e==null?void 0:e.owner)==null?void 0:u.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=e.owner.getProps();return h1e()&&n&&f1e.has(n)&&(n!=="transform"||!c)&&!l&&!r&&i!=="mirror"&&s!==0&&o!=="inertia"}const m1e=40;class g1e extends _L{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",keyframes:a,name:l,motionValue:c,element:u,...f}){var x;super(),this.stop=()=>{var v,w;this._animation&&(this._animation.stop(),(v=this.stopTimeline)==null||v.call(this)),(w=this.keyframeResolver)==null||w.cancel()},this.createdAt=fo.now();const m={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,name:l,motionValue:c,element:u,...f},g=(u==null?void 0:u.KeyframeResolver)||PL;this.keyframeResolver=new g(a,(v,w,E)=>this.onKeyframesResolved(v,w,m,!E),l,c,u),(x=this.keyframeResolver)==null||x.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:s,type:o,velocity:a,delay:l,isHandoff:c,onUpdate:u}=r;this.resolvedAt=fo.now(),d1e(e,s,o,a)||((Zu.instantAnimations||!l)&&(u==null||u(NL(e,r,n))),e[0]=e[e.length-1],r4(r),r.repeat=0);const m={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>m1e?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},g=!c&&p1e(m)?new c1e({...m,element:m.motionValue.owner.current}):new IL(m);g.finished.then(()=>this.notifyFinished()).catch(Ba),this.pendingTimeline&&(this.stopTimeline=g.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=g}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),Qwe()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const y1e=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function x1e(t){const e=y1e.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function rte(t,e,n=1){const[r,i]=x1e(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return Aee(o)?parseFloat(o):o}return SL(i)?rte(i,e,n+1):i}function RL(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const ite=new Set(["width","height","top","left","right","bottom",...Sx]),v1e={test:t=>t==="auto",parse:t=>t},ste=t=>e=>e.test(t),ote=[Ex,Xt,vc,yf,uwe,cwe,v1e],O$=t=>ote.find(ste(t));function b1e(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||kee(t):!0}const w1e=new Set(["brightness","contrast","saturate","opacity"]);function E1e(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(AL)||[];if(!r)return t;const i=n.replace(r,"");let s=w1e.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const S1e=/\b([a-z-]*)\(.*?\)/gu,i4={...eh,getAnimatableNone:t=>{const e=t.match(S1e);return e?e.map(E1e).join(" "):t}},M$={...Ex,transform:Math.round},A1e={rotate:yf,rotateX:yf,rotateY:yf,rotateZ:yf,scale:CS,scaleX:CS,scaleY:CS,scaleZ:CS,skew:yf,skewX:yf,skewY:yf,distance:Xt,translateX:Xt,translateY:Xt,translateZ:Xt,x:Xt,y:Xt,z:Xt,perspective:Xt,transformPerspective:Xt,opacity:rw,originX:w$,originY:w$,originZ:Xt},OL={borderWidth:Xt,borderTopWidth:Xt,borderRightWidth:Xt,borderBottomWidth:Xt,borderLeftWidth:Xt,borderRadius:Xt,radius:Xt,borderTopLeftRadius:Xt,borderTopRightRadius:Xt,borderBottomRightRadius:Xt,borderBottomLeftRadius:Xt,width:Xt,maxWidth:Xt,height:Xt,maxHeight:Xt,top:Xt,right:Xt,bottom:Xt,left:Xt,padding:Xt,paddingTop:Xt,paddingRight:Xt,paddingBottom:Xt,paddingLeft:Xt,margin:Xt,marginTop:Xt,marginRight:Xt,marginBottom:Xt,marginLeft:Xt,backgroundPositionX:Xt,backgroundPositionY:Xt,...A1e,zIndex:M$,fillOpacity:rw,strokeOpacity:rw,numOctaves:M$},T1e={...OL,color:di,backgroundColor:di,outlineColor:di,fill:di,stroke:di,borderColor:di,borderTopColor:di,borderRightColor:di,borderBottomColor:di,borderLeftColor:di,filter:i4,WebkitFilter:i4},ate=t=>T1e[t];function lte(t,e){let n=ate(t);return n!==i4&&(n=eh),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const k1e=new Set(["auto","none","0"]);function C1e(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!k1e.has(s)&&iw(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=lte(n,i)}class N1e extends PL{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),SL(c))){const u=rte(c,n.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!ite.has(r)||e.length!==2)return;const[i,s]=e,o=O$(i),a=O$(s);if(o!==a)if(_$(o)&&_$(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else Kp[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||b1e(e[i]))&&r.push(i);r.length&&C1e(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Kp[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var a;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,o=r[s];r[s]=Kp[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([l,c])=>{e.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function _1e(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=(n==null?void 0:n[t])??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const cte=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function ute(t){return Tee(t)&&"offsetHeight"in t}const D$=30,I1e=t=>!isNaN(parseFloat(t));class P1e{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var s;const i=fo.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=fo.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=I1e(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new bL);const r=this.events[e].add(n);return e==="change"?()=>{r(),kr.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=fo.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>D$)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,D$);return Cee(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Vy(t,e){return new P1e(t,e)}const{schedule:ML}=jee(queueMicrotask,!1),Qa={x:!1,y:!1};function dte(){return Qa.x||Qa.y}function R1e(t){return t==="x"||t==="y"?Qa[t]?null:(Qa[t]=!0,()=>{Qa[t]=!1}):Qa.x||Qa.y?null:(Qa.x=Qa.y=!0,()=>{Qa.x=Qa.y=!1})}function fte(t,e){const n=_1e(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function L$(t){return!(t.pointerType==="touch"||dte())}function O1e(t,e,n={}){const[r,i,s]=fte(t,n),o=a=>{if(!L$(a))return;const{target:l}=a,c=e(l,a);if(typeof c!="function"||!l)return;const u=f=>{L$(f)&&(c(f),l.removeEventListener("pointerleave",u))};l.addEventListener("pointerleave",u,i)};return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const hte=(t,e)=>e?t===e?!0:hte(t,e.parentElement):!1,DL=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,M1e=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function D1e(t){return M1e.has(t.tagName)||t.tabIndex!==-1}const zA=new WeakSet;function B$(t){return e=>{e.key==="Enter"&&t(e)}}function PP(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const L1e=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=B$(()=>{if(zA.has(n))return;PP(n,"down");const i=B$(()=>{PP(n,"up")}),s=()=>PP(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function j$(t){return DL(t)&&!dte()}function B1e(t,e,n={}){const[r,i,s]=fte(t,n),o=a=>{const l=a.currentTarget;if(!j$(a))return;zA.add(l);const c=e(l,a),u=(g,x)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",m),zA.has(l)&&zA.delete(l),j$(g)&&typeof c=="function"&&c(g,{success:x})},f=g=>{u(g,l===window||l===document||n.useGlobalTarget||hte(l,g.target))},m=g=>{u(g,!1)};window.addEventListener("pointerup",f,i),window.addEventListener("pointercancel",m,i)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),ute(a)&&(a.addEventListener("focus",c=>L1e(c,i)),!D1e(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),s}function pte(t){return Tee(t)&&"ownerSVGElement"in t}function j1e(t){return pte(t)&&t.tagName==="svg"}const Ts=t=>!!(t&&t.getVelocity),U1e=[...ote,di,eh],F1e=t=>U1e.find(ste(t)),LL=T.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function U$(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function $1e(...t){return e=>{let n=!1;const r=t.map(i=>{const s=U$(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():U$(t[i],null)}}}}function z1e(...t){return T.useCallback($1e(...t),t)}class H1e extends T.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=ute(r)&&r.offsetWidth||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=i-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function V1e({children:t,isPresent:e,anchorX:n,root:r}){const i=T.useId(),s=T.useRef(null),o=T.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=T.useContext(LL),l=z1e(s,t==null?void 0:t.ref);return T.useInsertionEffect(()=>{const{width:c,height:u,top:f,left:m,right:g}=o.current;if(e||!s.current||!c||!u)return;const x=n==="left"?`left: ${m}`:`right: ${g}`;s.current.dataset.motionPopId=i;const v=document.createElement("style");a&&(v.nonce=a);const w=r??document.head;return w.appendChild(v),v.sheet&&v.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${u}px !important;
            ${x}px !important;
            top: ${f}px !important;
          }
        `),()=>{w.contains(v)&&w.removeChild(v)}},[e]),h.jsx(H1e,{isPresent:e,childRef:s,sizeRef:o,children:T.cloneElement(t,{ref:l})})}const q1e=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o,anchorX:a,root:l})=>{const c=pL(G1e),u=T.useId();let f=!0,m=T.useMemo(()=>(f=!1,{id:u,initial:e,isPresent:n,custom:i,onExitComplete:g=>{c.set(g,!0);for(const x of c.values())if(!x)return;r&&r()},register:g=>(c.set(g,!1),()=>c.delete(g))}),[n,c,r]);return s&&f&&(m={...m}),T.useMemo(()=>{c.forEach((g,x)=>c.set(x,!1))},[n]),T.useEffect(()=>{!n&&!c.size&&r&&r()},[n]),o==="popLayout"&&(t=h.jsx(V1e,{isPresent:n,anchorX:a,root:l,children:t})),h.jsx(FC.Provider,{value:m,children:t})};function G1e(){return new Map}function mte(t=!0){const e=T.useContext(FC);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=T.useId();T.useEffect(()=>{if(t)return i(s)},[t]);const o=T.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const NS=t=>t.key||"";function F$(t){const e=[];return T.Children.forEach(t,n=>{T.isValidElement(n)&&e.push(n)}),e}const Go=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1,anchorX:a="left",root:l})=>{const[c,u]=mte(o),f=T.useMemo(()=>F$(t),[t]),m=o&&!c?[]:f.map(NS),g=T.useRef(!0),x=T.useRef(f),v=pL(()=>new Map),[w,E]=T.useState(f),[C,k]=T.useState(f);See(()=>{g.current=!1,x.current=f;for(let R=0;R<C.length;R++){const U=NS(C[R]);m.includes(U)?v.delete(U):v.get(U)!==!0&&v.set(U,!1)}},[C,m.length,m.join("-")]);const O=[];if(f!==w){let R=[...f];for(let U=0;U<C.length;U++){const V=C[U],F=NS(V);m.includes(F)||(R.splice(U,0,V),O.push(V))}return s==="wait"&&O.length&&(R=O),k(F$(R)),E(f),null}const{forceRender:j}=T.useContext(hL);return h.jsx(h.Fragment,{children:C.map(R=>{const U=NS(R),V=o&&!c?!1:f===C||m.includes(U),F=()=>{if(v.has(U))v.set(U,!0);else return;let $=!0;v.forEach(K=>{K||($=!1)}),$&&(j==null||j(),k(x.current),o&&(u==null||u()),r&&r())};return h.jsx(q1e,{isPresent:V,initial:!g.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:s,root:l,onExitComplete:V?void 0:F,anchorX:a,children:R},U)})})},gte=T.createContext({strict:!1}),$$={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},qy={};for(const t in $$)qy[t]={isEnabled:e=>$$[t].some(n=>!!e[n])};function K1e(t){for(const e in t)qy[e]={...qy[e],...t[e]}}const W1e=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function NT(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||W1e.has(t)}let yte=t=>!NT(t);function Y1e(t){typeof t=="function"&&(yte=e=>e.startsWith("on")?!NT(e):t(e))}try{Y1e(require("@emotion/is-prop-valid").default)}catch{}function J1e(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(yte(i)||n===!0&&NT(i)||!e&&!NT(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const $C=T.createContext({});function zC(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function sw(t){return typeof t=="string"||Array.isArray(t)}const BL=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],jL=["initial",...BL];function HC(t){return zC(t.animate)||jL.some(e=>sw(t[e]))}function xte(t){return!!(HC(t)||t.variants)}function X1e(t,e){if(HC(t)){const{initial:n,animate:r}=t;return{initial:n===!1||sw(n)?n:void 0,animate:sw(r)?r:void 0}}return t.inherit!==!1?e:{}}function Q1e(t){const{initial:e,animate:n}=X1e(t,T.useContext($C));return T.useMemo(()=>({initial:e,animate:n}),[z$(e),z$(n)])}function z$(t){return Array.isArray(t)?t.join(" "):t}function H$(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Yv={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Xt.test(t))t=parseFloat(t);else return t;const n=H$(t,e.target.x),r=H$(t,e.target.y);return`${n}% ${r}%`}},Z1e={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=eh.parse(t);if(i.length>5)return r;const s=eh.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const c=Dr(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}},s4={borderRadius:{...Yv,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Yv,borderTopRightRadius:Yv,borderBottomLeftRadius:Yv,borderBottomRightRadius:Yv,boxShadow:Z1e};function vte(t,{layout:e,layoutId:n}){return Ax.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!s4[t]||t==="opacity")}const eEe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},tEe=Sx.length;function nEe(t,e,n){let r="",i=!0;for(let s=0;s<tEe;s++){const o=Sx[s],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=cte(a,OL[o]);if(!l){i=!1;const u=eEe[o]||o;r+=`${u}(${c}) `}n&&(e[o]=c)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function UL(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if(Ax.has(l)){o=!0;continue}else if(Fee(l)){i[l]=c;continue}else{const u=cte(c,OL[l]);l.startsWith("origin")?(a=!0,s[l]=u):r[l]=u}}if(e.transform||(o||n?r.transform=nEe(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:u=0}=s;r.transformOrigin=`${l} ${c} ${u}`}}const FL=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function bte(t,e,n){for(const r in e)!Ts(e[r])&&!vte(r,n)&&(t[r]=e[r])}function rEe({transformTemplate:t},e){return T.useMemo(()=>{const n=FL();return UL(n,e,t),Object.assign({},n.vars,n.style)},[e])}function iEe(t,e){const n=t.style||{},r={};return bte(r,n,t),Object.assign(r,rEe(t,e)),r}function sEe(t,e){const n={},r=iEe(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const oEe={offset:"stroke-dashoffset",array:"stroke-dasharray"},aEe={offset:"strokeDashoffset",array:"strokeDasharray"};function lEe(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?oEe:aEe;t[s.offset]=Xt.transform(-r);const o=Xt.transform(e),a=Xt.transform(n);t[s.array]=`${o} ${a}`}function wte(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:o=0,...a},l,c,u){if(UL(t,a,c),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:m}=t;f.transform&&(m.transform=f.transform,delete f.transform),(m.transform||f.transformOrigin)&&(m.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),m.transform&&(m.transformBox=(u==null?void 0:u.transformBox)??"fill-box",delete f.transformBox),e!==void 0&&(f.x=e),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),i!==void 0&&lEe(f,i,s,o,!1)}const Ete=()=>({...FL(),attrs:{}}),Ste=t=>typeof t=="string"&&t.toLowerCase()==="svg";function cEe(t,e,n,r){const i=T.useMemo(()=>{const s=Ete();return wte(s,e,Ste(r),t.transformTemplate,t.style),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};bte(s,t.style,t),i.style={...s,...i.style}}return i}const uEe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function $L(t){return typeof t!="string"||t.includes("-")?!1:!!(uEe.indexOf(t)>-1||/[A-Z]/u.test(t))}function dEe(t,e,n,{latestValues:r},i,s=!1){const a=($L(t)?cEe:sEe)(e,r,i,t),l=J1e(e,typeof t=="string",s),c=t!==T.Fragment?{...l,...a,ref:n}:{},{children:u}=e,f=T.useMemo(()=>Ts(u)?u.get():u,[u]);return T.createElement(t,{...c,children:f})}function V$(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function zL(t,e,n,r){if(typeof e=="function"){const[i,s]=V$(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=V$(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function HA(t){return Ts(t)?t.get():t}function fEe({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:hEe(n,r,i,t),renderState:e()}}function hEe(t,e,n,r){const i={},s=r(t,{});for(const m in s)i[m]=HA(s[m]);let{initial:o,animate:a}=t;const l=HC(t),c=xte(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=n?n.initial===!1:!1;u=u||o===!1;const f=u?a:o;if(f&&typeof f!="boolean"&&!zC(f)){const m=Array.isArray(f)?f:[f];for(let g=0;g<m.length;g++){const x=zL(t,m[g]);if(x){const{transitionEnd:v,transition:w,...E}=x;for(const C in E){let k=E[C];if(Array.isArray(k)){const O=u?k.length-1:0;k=k[O]}k!==null&&(i[C]=k)}for(const C in v)i[C]=v[C]}}}return i}const Ate=t=>(e,n)=>{const r=T.useContext($C),i=T.useContext(FC),s=()=>fEe(t,e,r,i);return n?s():pL(s)};function HL(t,e,n){var s;const{style:r}=t,i={};for(const o in r)(Ts(r[o])||e.style&&Ts(e.style[o])||vte(o,t)||((s=n==null?void 0:n.getValue(o))==null?void 0:s.liveStyle)!==void 0)&&(i[o]=r[o]);return i}const pEe=Ate({scrapeMotionValuesFromProps:HL,createRenderState:FL});function Tte(t,e,n){const r=HL(t,e,n);for(const i in t)if(Ts(t[i])||Ts(e[i])){const s=Sx.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}const mEe=Ate({scrapeMotionValuesFromProps:Tte,createRenderState:Ete}),gEe=Symbol.for("motionComponentSymbol");function dg(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function yEe(t,e,n){return T.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):dg(n)&&(n.current=r))},[e])}const VL=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),xEe="framerAppearId",kte="data-"+VL(xEe),Cte=T.createContext({});function vEe(t,e,n,r,i){var v,w;const{visualElement:s}=T.useContext($C),o=T.useContext(gte),a=T.useContext(FC),l=T.useContext(LL).reducedMotion,c=T.useRef(null);r=r||o.renderer,!c.current&&r&&(c.current=r(t,{visualState:e,parent:s,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const u=c.current,f=T.useContext(Cte);u&&!u.projection&&i&&(u.type==="html"||u.type==="svg")&&bEe(c.current,n,i,f);const m=T.useRef(!1);T.useInsertionEffect(()=>{u&&m.current&&u.update(n,a)});const g=n[kte],x=T.useRef(!!g&&!((v=window.MotionHandoffIsComplete)!=null&&v.call(window,g))&&((w=window.MotionHasOptimisedAnimation)==null?void 0:w.call(window,g)));return See(()=>{u&&(m.current=!0,window.MotionIsMounted=!0,u.updateFeatures(),u.scheduleRenderMicrotask(),x.current&&u.animationState&&u.animationState.animateChanges())}),T.useEffect(()=>{u&&(!x.current&&u.animationState&&u.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var E;(E=window.MotionHandoffMarkAsComplete)==null||E.call(window,g)}),x.current=!1),u.enteringChildren=void 0)}),u}function bEe(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c,layoutCrossfade:u}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:Nte(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&dg(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:u,layoutScroll:l,layoutRoot:c})}function Nte(t){if(t)return t.options.allowProjection!==!1?t.projection:Nte(t.parent)}function RP(t,{forwardMotionProps:e=!1}={},n,r){n&&K1e(n);const i=$L(t)?mEe:pEe;function s(a,l){let c;const u={...T.useContext(LL),...a,layoutId:wEe(a)},{isStatic:f}=u,m=Q1e(a),g=i(a,f);if(!f&&mL){EEe();const x=SEe(u);c=x.MeasureLayout,m.visualElement=vEe(t,g,u,r,x.ProjectionNode)}return h.jsxs($C.Provider,{value:m,children:[c&&m.visualElement?h.jsx(c,{visualElement:m.visualElement,...u}):null,dEe(t,a,yEe(g,m.visualElement,l),g,f,e)]})}s.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=T.forwardRef(s);return o[gEe]=t,o}function wEe({layoutId:t}){const e=T.useContext(hL).id;return e&&t!==void 0?e+"-"+t:t}function EEe(t,e){T.useContext(gte).strict}function SEe(t){const{drag:e,layout:n}=qy;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function AEe(t,e){if(typeof Proxy>"u")return RP;const n=new Map,r=(s,o)=>RP(s,o,t,e),i=(s,o)=>r(s,o);return new Proxy(i,{get:(s,o)=>o==="create"?r:(n.has(o)||n.set(o,RP(o,void 0,t,e)),n.get(o))})}function _te({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function TEe({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function kEe(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function OP(t){return t===void 0||t===1}function o4({scale:t,scaleX:e,scaleY:n}){return!OP(t)||!OP(e)||!OP(n)}function Yh(t){return o4(t)||Ite(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Ite(t){return q$(t.x)||q$(t.y)}function q$(t){return t&&t!=="0%"}function _T(t,e,n){const r=t-n,i=e*r;return n+i}function G$(t,e,n,r,i){return i!==void 0&&(t=_T(t,i,r)),_T(t,n,r)+e}function a4(t,e=0,n=1,r,i){t.min=G$(t.min,e,n,r,i),t.max=G$(t.max,e,n,r,i)}function Pte(t,{x:e,y:n}){a4(t.x,e.translate,e.scale,e.originPoint),a4(t.y,n.translate,n.scale,n.originPoint)}const K$=.999999999999,W$=1.0000000000001;function CEe(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&hg(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,Pte(t,o)),r&&Yh(s.latestValues)&&hg(t,s.latestValues))}e.x<W$&&e.x>K$&&(e.x=1),e.y<W$&&e.y>K$&&(e.y=1)}function fg(t,e){t.min=t.min+e,t.max=t.max+e}function Y$(t,e,n,r,i=.5){const s=Dr(t.min,t.max,i);a4(t,e,n,s,r)}function hg(t,e){Y$(t.x,e.x,e.scaleX,e.scale,e.originX),Y$(t.y,e.y,e.scaleY,e.scale,e.originY)}function Rte(t,e){return _te(kEe(t.getBoundingClientRect(),e))}function NEe(t,e,n){const r=Rte(t,n),{scroll:i}=e;return i&&(fg(r.x,i.offset.x),fg(r.y,i.offset.y)),r}const J$=()=>({translate:0,scale:1,origin:0,originPoint:0}),pg=()=>({x:J$(),y:J$()}),X$=()=>({min:0,max:0}),wi=()=>({x:X$(),y:X$()}),l4={current:null},Ote={current:!1};function _Ee(){if(Ote.current=!0,!!mL)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>l4.current=t.matches;t.addEventListener("change",e),e()}else l4.current=!1}const IEe=new WeakMap;function PEe(t,e,n){for(const r in e){const i=e[r],s=n[r];if(Ts(i))t.addValue(r,i);else if(Ts(s))t.addValue(r,Vy(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,Vy(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const Q$=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class REe{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=PL,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=fo.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,kr.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=HC(n),this.isVariantNode=xte(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in f){const g=f[m];l[m]!==void 0&&Ts(g)&&g.set(l[m])}}mount(e){var n;this.current=e,IEe.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),Ote.current||_Ee(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:l4.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),Zf(this.notifyUpdate),Zf(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Ax.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&kr.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in qy){const n=qy[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):wi()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Q$.length;r++){const i=Q$[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=PEe(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Vy(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(Aee(r)||kee(r))?r=parseFloat(r):!F1e(r)&&eh.test(n)&&(r=lte(e,n)),this.setBaseTarget(e,Ts(r)?r.get():r)),Ts(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var s;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=zL(this.props,n,(s=this.presenceContext)==null?void 0:s.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Ts(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new bL),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){ML.render(this.render)}}class Mte extends REe{constructor(){super(...arguments),this.KeyframeResolver=N1e}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ts(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Dte(t,{style:e,vars:n},r,i){const s=t.style;let o;for(o in e)s[o]=e[o];i==null||i.applyProjectionStyles(s,r);for(o in n)s.setProperty(o,n[o])}function OEe(t){return window.getComputedStyle(t)}class MEe extends Mte{constructor(){super(...arguments),this.type="html",this.renderInstance=Dte}readValueFromInstance(e,n){var r;if(Ax.has(n))return(r=this.projection)!=null&&r.isProjecting?Q3(n):Kwe(e,n);{const i=OEe(e),s=(Fee(n)?i.getPropertyValue(n):i[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return Rte(e,n)}build(e,n,r){UL(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return HL(e,n,r)}}const Lte=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function DEe(t,e,n,r){Dte(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(Lte.has(i)?i:VL(i),e.attrs[i])}class LEe extends Mte{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=wi}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Ax.has(n)){const r=ate(n);return r&&r.default||0}return n=Lte.has(n)?n:VL(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return Tte(e,n,r)}build(e,n,r){wte(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){DEe(e,n,r,i)}mount(e){this.isSVGTag=Ste(e.tagName),super.mount(e)}}const BEe=(t,e)=>$L(t)?new LEe(e):new MEe(e,{allowProjection:t!==T.Fragment});function Rg(t,e,n){const r=t.getProps();return zL(r,e,n!==void 0?n:r.custom,t)}const c4=t=>Array.isArray(t);function jEe(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Vy(n))}function UEe(t){return c4(t)?t[t.length-1]||0:t}function FEe(t,e){const n=Rg(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=UEe(s[o]);jEe(t,o,a)}}function $Ee(t){return!!(Ts(t)&&t.add)}function u4(t,e){const n=t.getValue("willChange");if($Ee(n))return n.add(e);if(!n&&Zu.WillChange){const r=new Zu.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function Bte(t){return t.props[kte]}const zEe=t=>t!==null;function HEe(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(zEe),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[s]}const VEe={type:"spring",stiffness:500,damping:25,restSpeed:10},qEe=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),GEe={type:"keyframes",duration:.8},KEe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},WEe=(t,{keyframes:e})=>e.length>2?GEe:Ax.has(t)?t.startsWith("scale")?qEe(e[1]):VEe:KEe;function YEe({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const qL=(t,e,n,r={},i,s)=>o=>{const a=RL(r,t)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-xc(l);const u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:m=>{e.set(m),a.onUpdate&&a.onUpdate(m)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};YEe(a)||Object.assign(u,WEe(t,u)),u.duration&&(u.duration=xc(u.duration)),u.repeatDelay&&(u.repeatDelay=xc(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let f=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(r4(u),u.delay===0&&(f=!0)),(Zu.instantAnimations||Zu.skipAnimations)&&(f=!0,r4(u),u.delay=0),u.allowFlatten=!a.type&&!a.ease,f&&!s&&e.get()!==void 0){const m=HEe(u.keyframes,a);if(m!==void 0){kr.update(()=>{u.onUpdate(m),u.onComplete()});return}}return a.isSync?new IL(u):new g1e(u)};function JEe({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function jte(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...a}=e;r&&(s=r);const l=[],c=i&&t.animationState&&t.animationState.getState()[i];for(const u in a){const f=t.getValue(u,t.latestValues[u]??null),m=a[u];if(m===void 0||c&&JEe(c,u))continue;const g={delay:n,...RL(s||{},u)},x=f.get();if(x!==void 0&&!f.isAnimating&&!Array.isArray(m)&&m===x&&!g.velocity)continue;let v=!1;if(window.MotionHandoffAnimation){const E=Bte(t);if(E){const C=window.MotionHandoffAnimation(E,u,kr);C!==null&&(g.startTime=C,v=!0)}}u4(t,u),f.start(qL(u,f,m,t.shouldReduceMotion&&ite.has(u)?{type:!1}:g,t,v));const w=f.animation;w&&l.push(w)}return o&&Promise.all(l).then(()=>{kr.update(()=>{o&&FEe(t,o)})}),l}function Ute(t,e,n,r=0,i=1){const s=Array.from(t).sort((c,u)=>c.sortNodePosition(u)).indexOf(e),o=t.size,a=(o-1)*r;return typeof n=="function"?n(s,o):i===1?s*r:a-s*r}function d4(t,e,n={}){var l;const r=Rg(t,e,n.type==="exit"?(l=t.presenceContext)==null?void 0:l.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(jte(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:f,staggerDirection:m}=i;return XEe(t,e,c,u,f,m,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[c,u]=a==="beforeChildren"?[s,o]:[o,s];return c().then(()=>u())}else return Promise.all([s(),o(n.delay)])}function XEe(t,e,n=0,r=0,i=0,s=1,o){const a=[];for(const l of t.variantChildren)l.notify("AnimationStart",e),a.push(d4(l,e,{...o,delay:n+(typeof r=="function"?0:r)+Ute(t.variantChildren,l,r,i,s)}).then(()=>l.notify("AnimationComplete",e)));return Promise.all(a)}function QEe(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>d4(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=d4(t,e,n);else{const i=typeof e=="function"?Rg(t,e,n.custom):e;r=Promise.all(jte(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function Fte(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const ZEe=jL.length;function $te(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?$te(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<ZEe;n++){const r=jL[n],i=t.props[r];(sw(i)||i===!1)&&(e[r]=i)}return e}const eSe=[...BL].reverse(),tSe=BL.length;function nSe(t){return e=>Promise.all(e.map(({animation:n,options:r})=>QEe(t,n,r)))}function rSe(t){let e=nSe(t),n=Z$(),r=!0;const i=l=>(c,u)=>{var m;const f=Rg(t,u,l==="exit"?(m=t.presenceContext)==null?void 0:m.custom:void 0);if(f){const{transition:g,transitionEnd:x,...v}=f;c={...c,...v,...x}}return c};function s(l){e=l(t)}function o(l){const{props:c}=t,u=$te(t.parent)||{},f=[],m=new Set;let g={},x=1/0;for(let w=0;w<tSe;w++){const E=eSe[w],C=n[E],k=c[E]!==void 0?c[E]:u[E],O=sw(k),j=E===l?C.isActive:null;j===!1&&(x=w);let R=k===u[E]&&k!==c[E]&&O;if(R&&r&&t.manuallyAnimateOnMount&&(R=!1),C.protectedKeys={...g},!C.isActive&&j===null||!k&&!C.prevProp||zC(k)||typeof k=="boolean")continue;const U=iSe(C.prevProp,k);let V=U||E===l&&C.isActive&&!R&&O||w>x&&O,F=!1;const $=Array.isArray(k)?k:[k];let K=$.reduce(i(E),{});j===!1&&(K={});const{prevResolvedValues:H={}}=C,B={...H,...K},A=z=>{V=!0,m.has(z)&&(F=!0,m.delete(z)),C.needsAnimating[z]=!0;const G=t.getValue(z);G&&(G.liveStyle=!1)};for(const z in B){const G=K[z],te=H[z];if(g.hasOwnProperty(z))continue;let Y=!1;c4(G)&&c4(te)?Y=!Fte(G,te):Y=G!==te,Y?G!=null?A(z):m.add(z):G!==void 0&&m.has(z)?A(z):C.protectedKeys[z]=!0}C.prevProp=k,C.prevResolvedValues=K,C.isActive&&(g={...g,...K}),r&&t.blockInitialAnimation&&(V=!1);const I=R&&U;V&&(!I||F)&&f.push(...$.map(z=>{const G={type:E};if(typeof z=="string"&&r&&!I&&t.manuallyAnimateOnMount&&t.parent){const{parent:te}=t,Y=Rg(te,z);if(te.enteringChildren&&Y){const{delayChildren:q}=Y.transition||{};G.delay=Ute(te.enteringChildren,t,q)}}return{animation:z,options:G}}))}if(m.size){const w={};if(typeof c.initial!="boolean"){const E=Rg(t,Array.isArray(c.initial)?c.initial[0]:c.initial);E&&E.transition&&(w.transition=E.transition)}m.forEach(E=>{const C=t.getBaseTarget(E),k=t.getValue(E);k&&(k.liveStyle=!0),w[E]=C??null}),f.push({animation:w})}let v=!!f.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(v=!1),r=!1,v?e(f):Promise.resolve()}function a(l,c){var f;if(n[l].isActive===c)return Promise.resolve();(f=t.variantChildren)==null||f.forEach(m=>{var g;return(g=m.animationState)==null?void 0:g.setActive(l,c)}),n[l].isActive=c;const u=o(l);for(const m in n)n[m].protectedKeys={};return u}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=Z$()}}}function iSe(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Fte(e,t):!1}function $h(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Z$(){return{animate:$h(!0),whileInView:$h(),whileHover:$h(),whileTap:$h(),whileDrag:$h(),whileFocus:$h(),exit:$h()}}class ch{constructor(e){this.isMounted=!1,this.node=e}update(){}}class sSe extends ch{constructor(e){super(e),e.animationState||(e.animationState=rSe(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();zC(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let oSe=0;class aSe extends ch{constructor(){super(...arguments),this.id=oSe++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const lSe={animation:{Feature:sSe},exit:{Feature:aSe}};function ow(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function x1(t){return{point:{x:t.pageX,y:t.pageY}}}const cSe=t=>e=>DL(e)&&t(e,x1(e));function Fb(t,e,n,r){return ow(t,e,cSe(n),r)}const zte=1e-4,uSe=1-zte,dSe=1+zte,Hte=.01,fSe=0-Hte,hSe=0+Hte;function $s(t){return t.max-t.min}function pSe(t,e,n){return Math.abs(t-e)<=n}function ez(t,e,n,r=.5){t.origin=r,t.originPoint=Dr(e.min,e.max,t.origin),t.scale=$s(n)/$s(e),t.translate=Dr(n.min,n.max,t.origin)-t.originPoint,(t.scale>=uSe&&t.scale<=dSe||isNaN(t.scale))&&(t.scale=1),(t.translate>=fSe&&t.translate<=hSe||isNaN(t.translate))&&(t.translate=0)}function $b(t,e,n,r){ez(t.x,e.x,n.x,r?r.originX:void 0),ez(t.y,e.y,n.y,r?r.originY:void 0)}function tz(t,e,n){t.min=n.min+e.min,t.max=t.min+$s(e)}function mSe(t,e,n){tz(t.x,e.x,n.x),tz(t.y,e.y,n.y)}function nz(t,e,n){t.min=e.min-n.min,t.max=t.min+$s(e)}function IT(t,e,n){nz(t.x,e.x,n.x),nz(t.y,e.y,n.y)}function va(t){return[t("x"),t("y")]}const Vte=({current:t})=>t?t.ownerDocument.defaultView:null,rz=(t,e)=>Math.abs(t-e);function gSe(t,e){const n=rz(t.x,e.x),r=rz(t.y,e.y);return Math.sqrt(n**2+r**2)}class qte{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=DP(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,x=gSe(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!g&&!x)return;const{point:v}=m,{timestamp:w}=es;this.history.push({...v,timestamp:w});const{onStart:E,onMove:C}=this.handlers;g||(E&&E(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),C&&C(this.lastMoveEvent,m)},this.handlePointerMove=(m,g)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=MP(g,this.transformPagePoint),kr.update(this.updatePoint,!0)},this.handlePointerUp=(m,g)=>{this.end();const{onEnd:x,onSessionEnd:v,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const E=DP(m.type==="pointercancel"?this.lastMoveEventInfo:MP(g,this.transformPagePoint),this.history);this.startEvent&&x&&x(m,E),v&&v(m,E)},!DL(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const a=x1(e),l=MP(a,this.transformPagePoint),{point:c}=l,{timestamp:u}=es;this.history=[{...c,timestamp:u}];const{onSessionStart:f}=n;f&&f(e,DP(l,this.history)),this.removeListeners=m1(Fb(this.contextWindow,"pointermove",this.handlePointerMove),Fb(this.contextWindow,"pointerup",this.handlePointerUp),Fb(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Zf(this.updatePoint)}}function MP(t,e){return e?{point:e(t.point)}:t}function iz(t,e){return{x:t.x-e.x,y:t.y-e.y}}function DP({point:t},e){return{point:t,delta:iz(t,Gte(e)),offset:iz(t,ySe(e)),velocity:xSe(e,.1)}}function ySe(t){return t[0]}function Gte(t){return t[t.length-1]}function xSe(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=Gte(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>xc(e)));)n--;if(!r)return{x:0,y:0};const s=Da(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function vSe(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Dr(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Dr(n,t,r.max):Math.min(t,n)),t}function sz(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function bSe(t,{top:e,left:n,bottom:r,right:i}){return{x:sz(t.x,n,i),y:sz(t.y,e,r)}}function oz(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function wSe(t,e){return{x:oz(t.x,e.x),y:oz(t.y,e.y)}}function ESe(t,e){let n=.5;const r=$s(t),i=$s(e);return i>r?n=nw(e.min,e.max-r,t.min):r>i&&(n=nw(t.min,t.max-i,e.min)),Qu(0,1,n)}function SSe(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const f4=.35;function ASe(t=f4){return t===!1?t=0:t===!0&&(t=f4),{x:az(t,"left","right"),y:az(t,"top","bottom")}}function az(t,e,n){return{min:lz(t,e),max:lz(t,n)}}function lz(t,e){return typeof t=="number"?t:t[e]||0}const TSe=new WeakMap;class kSe{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=wi(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=f=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(x1(f).point)},o=(f,m)=>{const{drag:g,dragPropagation:x,onDragStart:v}=this.getProps();if(g&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=R1e(g),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),va(E=>{let C=this.getAxisMotionValue(E).get()||0;if(vc.test(C)){const{projection:k}=this.visualElement;if(k&&k.layout){const O=k.layout.layoutBox[E];O&&(C=$s(O)*(parseFloat(C)/100))}}this.originPoint[E]=C}),v&&kr.postRender(()=>v(f,m)),u4(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},a=(f,m)=>{this.latestPointerEvent=f,this.latestPanInfo=m;const{dragPropagation:g,dragDirectionLock:x,onDirectionLock:v,onDrag:w}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:E}=m;if(x&&this.currentDirection===null){this.currentDirection=CSe(E),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",m.point,E),this.updateAxis("y",m.point,E),this.visualElement.render(),w&&w(f,m)},l=(f,m)=>{this.latestPointerEvent=f,this.latestPanInfo=m,this.stop(f,m),this.latestPointerEvent=null,this.latestPanInfo=null},c=()=>va(f=>{var m;return this.getAnimationState(f)==="paused"&&((m=this.getAxisMotionValue(f).animation)==null?void 0:m.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new qte(e,{onSessionStart:s,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,distanceThreshold:r,contextWindow:Vte(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&kr.postRender(()=>a(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!_S(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=vSe(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var s;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,i=this.constraints;e&&dg(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=bSe(r.layoutBox,e):this.constraints=!1,this.elastic=ASe(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&va(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=SSe(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!dg(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=NEe(r,i.root,this.visualElement.getTransformPagePoint());let o=wSe(i.layout.layoutBox,s);if(n){const a=n(TEe(o));this.hasMutatedConstraints=!!a,a&&(o=_te(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=va(u=>{if(!_S(u,n,this.currentDirection))return;let f=l&&l[u]||{};o&&(f={min:0,max:0});const m=i?200:1e6,g=i?40:1e7,x={type:"inertia",velocity:r?e[u]:0,bounceStiffness:m,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...s,...f};return this.startAxisValueAnimation(u,x)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return u4(this.visualElement,e),r.start(qL(e,r,0,n,this.visualElement,!1))}stopAnimation(){va(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){va(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){va(n=>{const{drag:r}=this.getProps();if(!_S(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-Dr(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!dg(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};va(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=ESe({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),va(o=>{if(!_S(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(Dr(l,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;TSe.set(this.visualElement,this);const e=this.visualElement.current,n=Fb(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();dg(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),kr.read(r);const o=ow(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",(({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(va(u=>{const f=this.getAxisMotionValue(u);f&&(this.originPoint[u]+=l[u].translate,f.set(f.get()+l[u].translate))}),this.visualElement.render())}));return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=f4,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function _S(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function CSe(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class NSe extends ch{constructor(e){super(e),this.removeGroupControls=Ba,this.removeListeners=Ba,this.controls=new kSe(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ba}unmount(){this.removeGroupControls(),this.removeListeners()}}const cz=t=>(e,n)=>{t&&kr.postRender(()=>t(e,n))};class _Se extends ch{constructor(){super(...arguments),this.removePointerDownListener=Ba}onPointerDown(e){this.session=new qte(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Vte(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:cz(e),onStart:cz(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&kr.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=Fb(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const VA={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let LP=!1;class ISe extends T.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),LP&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),VA.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:o}=r;return o&&(o.isPresent=s,LP=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==s?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||kr.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),ML.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;LP=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Kte(t){const[e,n]=mte(),r=T.useContext(hL);return h.jsx(ISe,{...t,layoutGroup:r,switchLayoutGroup:T.useContext(Cte),isPresent:e,safeToRemove:n})}function PSe(t,e,n){const r=Ts(t)?t:Vy(t);return r.start(qL("",r,e,n)),r.animation}const RSe=(t,e)=>t.depth-e.depth;class OSe{constructor(){this.children=[],this.isDirty=!1}add(e){gL(this.children,e),this.isDirty=!0}remove(e){yL(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(RSe),this.isDirty=!1,this.children.forEach(e)}}function MSe(t,e){const n=fo.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(Zf(r),t(s-e))};return kr.setup(r,!0),()=>Zf(r)}const Wte=["TopLeft","TopRight","BottomLeft","BottomRight"],DSe=Wte.length,uz=t=>typeof t=="string"?parseFloat(t):t,dz=t=>typeof t=="number"||Xt.test(t);function LSe(t,e,n,r,i,s){i?(t.opacity=Dr(0,n.opacity??1,BSe(r)),t.opacityExit=Dr(e.opacity??1,0,jSe(r))):s&&(t.opacity=Dr(e.opacity??1,n.opacity??1,r));for(let o=0;o<DSe;o++){const a=`border${Wte[o]}Radius`;let l=fz(e,a),c=fz(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||dz(l)===dz(c)?(t[a]=Math.max(Dr(uz(l),uz(c),r),0),(vc.test(c)||vc.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=Dr(e.rotate||0,n.rotate||0,r))}function fz(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const BSe=Yte(0,.5,Mee),jSe=Yte(.5,.95,Ba);function Yte(t,e,n){return r=>r<t?0:r>e?1:n(nw(t,e,r))}function hz(t,e){t.min=e.min,t.max=e.max}function Ja(t,e){hz(t.x,e.x),hz(t.y,e.y)}function pz(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function mz(t,e,n,r,i){return t-=e,t=_T(t,1/n,r),i!==void 0&&(t=_T(t,1/i,r)),t}function USe(t,e=0,n=1,r=.5,i,s=t,o=t){if(vc.test(e)&&(e=parseFloat(e),e=Dr(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Dr(s.min,s.max,r);t===s&&(a-=e),t.min=mz(t.min,e,n,a,i),t.max=mz(t.max,e,n,a,i)}function gz(t,e,[n,r,i],s,o){USe(t,e[n],e[r],e[i],e.scale,s,o)}const FSe=["x","scaleX","originX"],$Se=["y","scaleY","originY"];function yz(t,e,n,r){gz(t.x,e,FSe,n?n.x:void 0,r?r.x:void 0),gz(t.y,e,$Se,n?n.y:void 0,r?r.y:void 0)}function xz(t){return t.translate===0&&t.scale===1}function Jte(t){return xz(t.x)&&xz(t.y)}function vz(t,e){return t.min===e.min&&t.max===e.max}function zSe(t,e){return vz(t.x,e.x)&&vz(t.y,e.y)}function bz(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Xte(t,e){return bz(t.x,e.x)&&bz(t.y,e.y)}function wz(t){return $s(t.x)/$s(t.y)}function Ez(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class HSe{constructor(){this.members=[]}add(e){gL(this.members,e),e.scheduleRender()}remove(e){if(yL(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function VSe(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:u,rotateX:f,rotateY:m,skewX:g,skewY:x}=n;c&&(r=`perspective(${c}px) ${r}`),u&&(r+=`rotate(${u}deg) `),f&&(r+=`rotateX(${f}deg) `),m&&(r+=`rotateY(${m}deg) `),g&&(r+=`skewX(${g}deg) `),x&&(r+=`skewY(${x}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const BP=["","X","Y","Z"],qSe=1e3;let GSe=0;function jP(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function Qte(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=Bte(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",kr,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&Qte(r)}function Zte({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=GSe++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(YSe),this.nodes.forEach(ZSe),this.nodes.forEach(eAe),this.nodes.forEach(JSe)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new OSe)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new bL),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=pte(o)&&!j1e(o),this.instance=o;const{layoutId:a,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),t){let u,f=0;const m=()=>this.root.updateBlockedByResize=!1;kr.read(()=>{f=window.innerWidth}),t(o,()=>{const g=window.innerWidth;g!==f&&(f=g,this.root.updateBlockedByResize=!0,u&&u(),u=MSe(m,250),VA.hasAnimatedSinceResize&&(VA.hasAnimatedSinceResize=!1,this.nodes.forEach(Tz)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&c&&(a||l)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:f,hasRelativeLayoutChanged:m,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||c.getDefaultTransition()||sAe,{onLayoutAnimationStart:v,onLayoutAnimationComplete:w}=c.getProps(),E=!this.targetLayout||!Xte(this.targetLayout,g),C=!f&&m;if(this.options.layoutRoot||this.resumeFrom||C||f&&(E||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const k={...RL(x,"layout"),onPlay:v,onComplete:w};(c.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k),this.setAnimationOrigin(u,C)}else f||Tz(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Zf(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(tAe),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Qte(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const f=this.path[u];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Sz);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Az);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(QSe),this.nodes.forEach(KSe),this.nodes.forEach(WSe)):this.nodes.forEach(Az),this.clearAllSnapshots();const a=fo.now();es.delta=Qu(0,1e3/60,a-es.timestamp),es.timestamp=a,es.isProcessing=!0,kP.update.process(es),kP.preRender.process(es),kP.render.process(es),es.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,ML.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(XSe),this.sharedNodes.forEach(nAe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,kr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){kr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!$s(this.snapshot.measuredBox.x)&&!$s(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=wi(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!Jte(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&this.instance&&(a||Yh(this.latestValues)||u)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),oAe(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:o}=this.options;if(!o)return wi();const a=o.measureViewportBox();if(!(((c=this.scroll)==null?void 0:c.wasRoot)||this.path.some(aAe))){const{scroll:u}=this.root;u&&(fg(a.x,u.offset.x),fg(a.y,u.offset.y))}return a}removeElementScroll(o){var l;const a=wi();if(Ja(a,o),(l=this.scroll)!=null&&l.wasRoot)return a;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:f,options:m}=u;u!==this.root&&f&&m.layoutScroll&&(f.wasRoot&&Ja(a,o),fg(a.x,f.offset.x),fg(a.y,f.offset.y))}return a}applyTransform(o,a=!1){const l=wi();Ja(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&hg(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Yh(u.latestValues)&&hg(l,u.latestValues)}return Yh(this.latestValues)&&hg(l,this.latestValues),l}removeTransform(o){const a=wi();Ja(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Yh(c.latestValues))continue;o4(c.latestValues)&&c.updateSnapshot();const u=wi(),f=c.measurePageBox();Ja(u,f),yz(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return Yh(this.latestValues)&&yz(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==es.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var g;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(g=this.parent)!=null&&g.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:u,layoutId:f}=this.options;if(!this.layout||!(u||f))return;this.resolvedRelativeTargetAt=es.timestamp;const m=this.getClosestProjectingParent();m&&this.linkedParentVersion!==m.layoutVersion&&!m.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(m&&m.layout?this.createRelativeTarget(m,this.layout.layoutBox,m.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=wi(),this.targetWithTransforms=wi()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),mSe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ja(this.target,this.layout.layoutBox),Pte(this.target,this.targetDelta)):Ja(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?this.createRelativeTarget(m,this.target,m.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||o4(this.parent.latestValues)||Ite(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(o,a,l){this.relativeParent=o,this.linkedParentVersion=o.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=wi(),this.relativeTargetOrigin=wi(),IT(this.relativeTargetOrigin,a,l),Ja(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var x;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||(x=this.parent)!=null&&x.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===es.timestamp&&(l=!1),l)return;const{layout:c,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||u))return;Ja(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,m=this.treeScale.y;CEe(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=wi());const{target:g}=o;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(pz(this.prevProjectionDelta.x,this.projectionDelta.x),pz(this.prevProjectionDelta.y,this.projectionDelta.y)),$b(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==m||!Ez(this.projectionDelta.x,this.prevProjectionDelta.x)||!Ez(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=pg(),this.projectionDelta=pg(),this.projectionDeltaWithTransform=pg()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},f=pg();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const m=wi(),g=l?l.source:void 0,x=this.layout?this.layout.source:void 0,v=g!==x,w=this.getStack(),E=!w||w.members.length<=1,C=!!(v&&!E&&this.options.crossfade===!0&&!this.path.some(iAe));this.animationProgress=0;let k;this.mixTargetDelta=O=>{const j=O/1e3;kz(f.x,o.x,j),kz(f.y,o.y,j),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(IT(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),rAe(this.relativeTarget,this.relativeTargetOrigin,m,j),k&&zSe(this.relativeTarget,k)&&(this.isProjectionDirty=!1),k||(k=wi()),Ja(k,this.relativeTarget)),v&&(this.animationValues=u,LSe(u,c,this.latestValues,j,C,E)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=j},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var a,l,c;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(c=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||c.stop(),this.pendingAnimation&&(Zf(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=kr.update(()=>{VA.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Vy(0)),this.currentAnimation=PSe(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),o.onUpdate&&o.onUpdate(u)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(qSe),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&ene(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||wi();const f=$s(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+f;const m=$s(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+m}Ja(a,l),hg(a,u),$b(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new HSe),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&jP("z",o,c,this.animationValues);for(let u=0;u<BP.length;u++)jP(`rotate${BP[u]}`,o,c,this.animationValues),jP(`skew${BP[u]}`,o,c,this.animationValues);o.render();for(const u in c)o.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=HA(a==null?void 0:a.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none";return}const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=HA(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Yh(this.latestValues)&&(o.transform=l?l({},""):"none",this.hasProjected=!1);return}o.visibility="";const u=c.animationValues||c.latestValues;this.applyTransformsToTarget();let f=VSe(this.projectionDeltaWithTransform,this.treeScale,u);l&&(f=l(u,f)),o.transform=f;const{x:m,y:g}=this.projectionDelta;o.transformOrigin=`${m.origin*100}% ${g.origin*100}% 0`,c.animationValues?o.opacity=c===this?u.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:u.opacityExit:o.opacity=c===this?u.opacity!==void 0?u.opacity:"":u.opacityExit!==void 0?u.opacityExit:0;for(const x in s4){if(u[x]===void 0)continue;const{correct:v,applyTo:w,isCSSVariable:E}=s4[x],C=f==="none"?u[x]:v(u[x],c);if(w){const k=w.length;for(let O=0;O<k;O++)o[w[O]]=C}else E?this.options.visualElement.renderState.vars[x]=C:o[x]=C}this.options.layoutId&&(o.pointerEvents=c===this?HA(a==null?void 0:a.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(Sz),this.root.sharedNodes.clear()}}}function KSe(t){t.updateLayout()}function WSe(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=e.source!==t.layout.source;s==="size"?va(f=>{const m=o?e.measuredBox[f]:e.layoutBox[f],g=$s(m);m.min=r[f].min,m.max=m.min+g}):ene(s,e.layoutBox,r)&&va(f=>{const m=o?e.measuredBox[f]:e.layoutBox[f],g=$s(r[f]);m.max=m.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+g)});const a=pg();$b(a,r,e.layoutBox);const l=pg();o?$b(l,t.applyTransform(i,!0),e.measuredBox):$b(l,r,e.layoutBox);const c=!Jte(a);let u=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:m,layout:g}=f;if(m&&g){const x=wi();IT(x,e.layoutBox,m.layoutBox);const v=wi();IT(v,r,g.layoutBox),Xte(x,v)||(u=!0),f.options.layoutRoot&&(t.relativeTarget=v,t.relativeTargetOrigin=x,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeLayoutChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function YSe(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function JSe(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function XSe(t){t.clearSnapshot()}function Sz(t){t.clearMeasurements()}function Az(t){t.isLayoutDirty=!1}function QSe(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Tz(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function ZSe(t){t.resolveTargetDelta()}function eAe(t){t.calcProjection()}function tAe(t){t.resetSkewAndRotation()}function nAe(t){t.removeLeadSnapshot()}function kz(t,e,n){t.translate=Dr(e.translate,0,n),t.scale=Dr(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Cz(t,e,n,r){t.min=Dr(e.min,n.min,r),t.max=Dr(e.max,n.max,r)}function rAe(t,e,n,r){Cz(t.x,e.x,n.x,r),Cz(t.y,e.y,n.y,r)}function iAe(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const sAe={duration:.45,ease:[.4,0,.1,1]},Nz=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),_z=Nz("applewebkit/")&&!Nz("chrome/")?Math.round:Ba;function Iz(t){t.min=_z(t.min),t.max=_z(t.max)}function oAe(t){Iz(t.x),Iz(t.y)}function ene(t,e,n){return t==="position"||t==="preserve-aspect"&&!pSe(wz(e),wz(n),.2)}function aAe(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const lAe=Zte({attachResizeListener:(t,e)=>ow(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),UP={current:void 0},tne=Zte({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!UP.current){const t=new lAe({});t.mount(window),t.setOptions({layoutScroll:!0}),UP.current=t}return UP.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),cAe={pan:{Feature:_Se},drag:{Feature:NSe,ProjectionNode:tne,MeasureLayout:Kte}};function Pz(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&kr.postRender(()=>s(e,x1(e)))}class uAe extends ch{mount(){const{current:e}=this.node;e&&(this.unmount=O1e(e,(n,r)=>(Pz(this.node,r,"Start"),i=>Pz(this.node,i,"End"))))}unmount(){}}class dAe extends ch{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=m1(ow(this.node.current,"focus",()=>this.onFocus()),ow(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Rz(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&kr.postRender(()=>s(e,x1(e)))}class fAe extends ch{mount(){const{current:e}=this.node;e&&(this.unmount=B1e(e,(n,r)=>(Rz(this.node,r,"Start"),(i,{success:s})=>Rz(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const h4=new WeakMap,FP=new WeakMap,hAe=t=>{const e=h4.get(t.target);e&&e(t)},pAe=t=>{t.forEach(hAe)};function mAe({root:t,...e}){const n=t||document;FP.has(n)||FP.set(n,{});const r=FP.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(pAe,{root:t,...e})),r[i]}function gAe(t,e,n){const r=mAe(e);return h4.set(t,n),r.observe(t),()=>{h4.delete(t),r.unobserve(t)}}const yAe={some:0,all:1};class xAe extends ch{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:yAe[i]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:f}=this.node.getProps(),m=c?u:f;m&&m(l)};return gAe(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(vAe(e,n))&&this.startObserver()}unmount(){}}function vAe({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const bAe={inView:{Feature:xAe},tap:{Feature:fAe},focus:{Feature:dAe},hover:{Feature:uAe}},wAe={layout:{ProjectionNode:tne,MeasureLayout:Kte}},EAe={...lSe,...bAe,...cAe,...wAe},rn=AEe(EAe,BEe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SAe=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),AAe=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),Oz=t=>{const e=AAe(t);return e.charAt(0).toUpperCase()+e.slice(1)},nne=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),TAe=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var kAe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CAe=T.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>T.createElement("svg",{ref:l,...kAe,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:nne("lucide",i),...!s&&!TAe(a)&&{"aria-hidden":"true"},...a},[...o.map(([c,u])=>T.createElement(c,u)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=(t,e)=>{const n=T.forwardRef(({className:r,...i},s)=>T.createElement(CAe,{ref:s,iconNode:e,className:nne(`lucide-${SAe(Oz(t))}`,`lucide-${t}`,r),...i}));return n.displayName=Oz(t),n};/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NAe=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],mo=Et("activity",NAe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _Ae=[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]],IAe=Et("arrow-down-left",_Ae);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PAe=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],rne=Et("arrow-left",PAe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RAe=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],ine=Et("arrow-right",RAe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OAe=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],sne=Et("arrow-up-right",OAe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MAe=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],mg=Et("bot",MAe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DAe=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],bc=Et("brain",DAe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LAe=[["path",{d:"M16 14v2.2l1.6 1",key:"fo4ql5"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]],GL=Et("calendar-clock",LAe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BAe=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M7 16h8",key:"srdodz"}],["path",{d:"M7 11h12",key:"127s9w"}],["path",{d:"M7 6h3",key:"w9rmul"}]],jAe=Et("chart-bar",BAe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UAe=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],yl=Et("chart-no-axes-column",UAe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FAe=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],aw=Et("chart-pie",FAe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Ae=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],gu=Et("check",$Ae);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zAe=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Al=Et("chevron-down",zAe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HAe=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],PT=Et("chevron-left",HAe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VAe=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],rm=Et("chevron-right",VAe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qAe=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],im=Et("chevron-up",qAe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GAe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],VC=Et("circle-alert",GAe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KAe=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],p4=Et("circle-check-big",KAe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WAe=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Ua=Et("clock",WAe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YAe=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],one=Et("coins",YAe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JAe=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Og=Et("copy",JAe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XAe=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],ane=Et("cpu",XAe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QAe=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],ZAe=Et("database",QAe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eTe=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],v1=Et("dollar-sign",eTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tTe=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Bo=Et("download",tTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nTe=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Gy=Et("external-link",nTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rTe=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],KL=Et("eye-off",rTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iTe=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],lne=Et("eye",iTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sTe=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],oTe=Et("file-braces",sTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aTe=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],lTe=Et("file-text",aTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cTe=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],uTe=Et("funnel",cTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dTe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],qA=Et("globe",dTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fTe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],hTe=Et("info",fTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pTe=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],cne=Et("key",pTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mTe=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Mz=Et("layers",mTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gTe=[["circle",{cx:"12",cy:"16",r:"1",key:"1au0dj"}],["rect",{x:"3",y:"10",width:"18",height:"12",rx:"2",key:"6s8ecr"}],["path",{d:"M7 10V7a5 5 0 0 1 10 0v3",key:"1pqi11"}]],yTe=Et("lock-keyhole",gTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xTe=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],une=Et("lock-open",xTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vTe=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],lw=Et("lock",vTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bTe=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Dz=Et("log-out",bTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wTe=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],ETe=Et("mail",wTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const STe=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],Lz=Et("menu",STe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ATe=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],TTe=Et("message-square",ATe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kTe=[["path",{d:"M5 12h14",key:"1ays0h"}]],m4=Et("minus",kTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CTe=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],vu=Et("plus",CTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NTe=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Cc=Et("refresh-cw",NTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _Te=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],ITe=Et("rotate-ccw",_Te);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PTe=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],dne=Et("save",PTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RTe=[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"m19 8 3 8a5 5 0 0 1-6 0zV7",key:"zcdpyk"}],["path",{d:"M3 7h1a17 17 0 0 0 8-2 17 17 0 0 0 8 2h1",key:"1yorad"}],["path",{d:"m5 8 3 8a5 5 0 0 1-6 0zV7",key:"eua70x"}],["path",{d:"M7 21h10",key:"1b0cd5"}]],OTe=Et("scale",RTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MTe=[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],fne=Et("scroll-text",MTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DTe=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],hne=Et("search",DTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LTe=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],BTe=Et("send",LTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jTe=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],RT=Et("settings",jTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UTe=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],ed=Et("shield-check",UTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FTe=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],pne=Et("shield",FTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Te=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],cw=Et("sparkles",$Te);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zTe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Mg=Et("target",zTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HTe=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],WL=Et("terminal",HTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VTe=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],sm=Et("trash-2",VTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qTe=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],qC=Et("trending-down",qTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GTe=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Rn=Et("trending-up",GTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KTe=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],td=Et("triangle-alert",KTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WTe=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],OT=Et("upload",WTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YTe=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],JTe=Et("user",YTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XTe=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],Ky=Et("wallet",XTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QTe=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],mne=Et("wand-sparkles",QTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZTe=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],GC=Et("x",ZTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eke=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],nd=Et("zap",eke),gne="6.16.0";function tke(t,e,n){const r=e.split("|").map(s=>s.trim());for(let s=0;s<r.length;s++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof t===e)return}const i=new Error(`invalid value for type ${e}`);throw i.code="INVALID_ARGUMENT",i.argument=`value.${n}`,i.value=t,i}async function Es(t){const e=Object.keys(t);return(await Promise.all(e.map(r=>Promise.resolve(t[r])))).reduce((r,i,s)=>(r[e[s]]=i,r),{})}function Mt(t,e,n){for(let r in e){let i=e[r];const s=n?n[r]:null;s&&tke(i,s,r),Object.defineProperty(t,r,{enumerable:!0,value:i,writable:!1})}}function gg(t,e){if(t==null)return"null";if(e==null&&(e=new Set),typeof t=="object"){if(e.has(t))return"[Circular]";e.add(t)}if(Array.isArray(t))return"[ "+t.map(n=>gg(n,e)).join(", ")+" ]";if(t instanceof Uint8Array){const n="0123456789abcdef";let r="0x";for(let i=0;i<t.length;i++)r+=n[t[i]>>4],r+=n[t[i]&15];return r}if(typeof t=="object"&&typeof t.toJSON=="function")return gg(t.toJSON(),e);switch(typeof t){case"boolean":case"number":case"symbol":return t.toString();case"bigint":return BigInt(t).toString();case"string":return JSON.stringify(t);case"object":{const n=Object.keys(t);return n.sort(),"{ "+n.map(r=>`${gg(r,e)}: ${gg(t[r],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function ss(t,e){return t&&t.code===e}function YL(t){return ss(t,"CALL_EXCEPTION")}function Pr(t,e,n){let r=t;{const s=[];if(n){if("message"in n||"code"in n||"name"in n)throw new Error(`value will overwrite populated values: ${gg(n)}`);for(const o in n){if(o==="shortMessage")continue;const a=n[o];s.push(o+"="+gg(a))}}s.push(`code=${e}`),s.push(`version=${gne}`),s.length&&(t+=" ("+s.join(", ")+")")}let i;switch(e){case"INVALID_ARGUMENT":i=new TypeError(t);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":i=new RangeError(t);break;default:i=new Error(t)}return Mt(i,{code:e}),n&&Object.assign(i,n),i.shortMessage==null&&Mt(i,{shortMessage:r}),i}function Ke(t,e,n,r){if(!t)throw Pr(e,n,r)}function xe(t,e,n,r){Ke(t,e,"INVALID_ARGUMENT",{argument:n,value:r})}function yne(t,e,n){n==null&&(n=""),n&&(n=": "+n),Ke(t>=e,"missing argument"+n,"MISSING_ARGUMENT",{count:t,expectedCount:e}),Ke(t<=e,"too many arguments"+n,"UNEXPECTED_ARGUMENT",{count:t,expectedCount:e})}const nke=["NFD","NFC","NFKD","NFKC"].reduce((t,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"".normalize("NFD")!=="e")throw new Error("broken");t.push(e)}catch{}return t},[]);function xne(t){Ke(nke.indexOf(t)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:t}})}function uh(t,e,n){if(n==null&&(n=""),t!==e){let r=n,i="new";n&&(r+=".",i+=" "+n),Ke(!1,`private constructor; use ${r}from* methods`,"UNSUPPORTED_OPERATION",{operation:i})}}function vne(t,e,n){if(t instanceof Uint8Array)return n?new Uint8Array(t):t;if(typeof t=="string"&&t.length%2===0&&t.match(/^0x[0-9a-f]*$/i)){const r=new Uint8Array((t.length-2)/2);let i=2;for(let s=0;s<r.length;s++)r[s]=parseInt(t.substring(i,i+2),16),i+=2;return r}xe(!1,"invalid BytesLike value",e||"value",t)}function ht(t,e){return vne(t,e,!1)}function os(t,e){return vne(t,e,!0)}function gr(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&t.length!==2+2*e||e===!0&&t.length%2!==0)}function KC(t){return gr(t,!0)||t instanceof Uint8Array}const Bz="0123456789abcdef";function rt(t){const e=ht(t);let n="0x";for(let r=0;r<e.length;r++){const i=e[r];n+=Bz[(i&240)>>4]+Bz[i&15]}return n}function On(t){return"0x"+t.map(e=>rt(e).substring(2)).join("")}function Dg(t){return gr(t,!0)?(t.length-2)/2:ht(t).length}function mr(t,e,n){const r=ht(t);return n!=null&&n>r.length&&Ke(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:n}),rt(r.slice(e??0,n??r.length))}function Jpt(t){let e=rt(t).substring(2);for(;e.startsWith("00");)e=e.substring(2);return"0x"+e}function bne(t,e,n){const r=ht(t);Ke(e>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:e,offset:e+1});const i=new Uint8Array(e);return i.fill(0),n?i.set(r,e-r.length):i.set(r,0),rt(i)}function rd(t,e){return bne(t,e,!0)}function rke(t,e){return bne(t,e,!1)}const b1=BigInt(0),hl=BigInt(1),yg=9007199254740991;function MT(t,e){const n=WC(t,"value"),r=BigInt(Qt(e,"width"));if(Ke(n>>r===b1,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:t}),n>>r-hl){const i=(hl<<r)-hl;return-((~n&i)+hl)}return n}function wne(t,e){let n=wt(t,"value");const r=BigInt(Qt(e,"width")),i=hl<<r-hl;if(n<b1){n=-n,Ke(n<=i,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});const s=(hl<<r)-hl;return(~n&s)+hl}else Ke(n<i,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});return n}function pp(t,e){const n=WC(t,"value"),r=BigInt(Qt(e,"bits"));return n&(hl<<r)-hl}function wt(t,e){switch(typeof t){case"bigint":return t;case"number":return xe(Number.isInteger(t),"underflow",e||"value",t),xe(t>=-yg&&t<=yg,"overflow",e||"value",t),BigInt(t);case"string":try{if(t==="")throw new Error("empty string");return t[0]==="-"&&t[1]!=="-"?-BigInt(t.substring(1)):BigInt(t)}catch(n){xe(!1,`invalid BigNumberish string: ${n.message}`,e||"value",t)}}xe(!1,"invalid BigNumberish value",e||"value",t)}function WC(t,e){const n=wt(t,e);return Ke(n>=b1,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t}),n}const jz="0123456789abcdef";function w1(t){if(t instanceof Uint8Array){let e="0x0";for(const n of t)e+=jz[n>>4],e+=jz[n&15];return BigInt(e)}return wt(t)}function Qt(t,e){switch(typeof t){case"bigint":return xe(t>=-yg&&t<=yg,"overflow",e||"value",t),Number(t);case"number":return xe(Number.isInteger(t),"underflow",e||"value",t),xe(t>=-yg&&t<=yg,"overflow",e||"value",t),t;case"string":try{if(t==="")throw new Error("empty string");return Qt(BigInt(t),e)}catch(n){xe(!1,`invalid numeric string: ${n.message}`,e||"value",t)}}xe(!1,"invalid numeric value",e||"value",t)}function ike(t){return Qt(w1(t))}function id(t,e){const n=WC(t,"value");let r=n.toString(16);if(e==null)r.length%2&&(r="0"+r);else{const i=Qt(e,"width");if(i===0&&n===b1)return"0x";for(Ke(i*2>=r.length,`value exceeds width (${i} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:t});r.length<i*2;)r="0"+r}return"0x"+r}function Lr(t,e){const n=WC(t,"value");if(n===b1){const s=e!=null?Qt(e,"width"):0;return new Uint8Array(s)}let r=n.toString(16);if(r.length%2&&(r="0"+r),e!=null){const s=Qt(e,"width");for(;r.length<s*2;)r="00"+r;Ke(s*2===r.length,`value exceeds width (${s} bytes)`,"NUMERIC_FAULT",{operation:"toBeArray",fault:"overflow",value:t})}const i=new Uint8Array(r.length/2);for(let s=0;s<i.length;s++){const o=s*2;i[s]=parseInt(r.substring(o,o+2),16)}return i}function fl(t){let e=rt(KC(t)?t:Lr(t)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const DT="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";let IS=null;function ske(t){if(IS==null){IS={};for(let n=0;n<DT.length;n++)IS[DT[n]]=BigInt(n)}const e=IS[t];return xe(e!=null,"invalid base58 value","letter",t),e}const oke=BigInt(0),g4=BigInt(58);function Ene(t){const e=ht(t);let n=w1(e),r="";for(;n;)r=DT[Number(n%g4)]+r,n/=g4;for(let i=0;i<e.length&&!e[i];i++)r=DT[0]+r;return r}function ake(t){let e=oke;for(let n=0;n<t.length;n++)e*=g4,e+=ske(t[n]);return e}function lke(t){t=atob(t);const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return ht(e)}function cke(t){const e=ht(t);let n="";for(let r=0;r<e.length;r++)n+=String.fromCharCode(e[r]);return btoa(n)}var ty;class Sne{constructor(e,n,r){Se(this,"filter");Se(this,"emitter");je(this,ty);ge(this,ty,n),Mt(this,{emitter:e,filter:r})}async removeListener(){ie(this,ty)!=null&&await this.emitter.off(this.filter,ie(this,ty))}}ty=new WeakMap;function uke(t,e,n,r,i){xe(!1,`invalid codepoint at offset ${e}; ${t}`,"bytes",n)}function Ane(t,e,n,r,i){if(t==="BAD_PREFIX"||t==="UNEXPECTED_CONTINUE"){let s=0;for(let o=e+1;o<n.length&&n[o]>>6===2;o++)s++;return s}return t==="OVERRUN"?n.length-e-1:0}function dke(t,e,n,r,i){return t==="OVERLONG"?(xe(typeof i=="number","invalid bad code point for replacement","badCodepoint",i),r.push(i),0):(r.push(65533),Ane(t,e,n))}const fke=Object.freeze({error:uke,ignore:Ane,replace:dke});function Tne(t,e){e==null&&(e=fke.error);const n=ht(t,"bytes"),r=[];let i=0;for(;i<n.length;){const s=n[i++];if(s>>7===0){r.push(s);continue}let o=null,a=null;if((s&224)===192)o=1,a=127;else if((s&240)===224)o=2,a=2047;else if((s&248)===240)o=3,a=65535;else{(s&192)===128?i+=e("UNEXPECTED_CONTINUE",i-1,n,r):i+=e("BAD_PREFIX",i-1,n,r);continue}if(i-1+o>=n.length){i+=e("OVERRUN",i-1,n,r);continue}let l=s&(1<<8-o-1)-1;for(let c=0;c<o;c++){let u=n[i];if((u&192)!=128){i+=e("MISSING_CONTINUE",i,n,r),l=null;break}l=l<<6|u&63,i++}if(l!==null){if(l>1114111){i+=e("OUT_OF_RANGE",i-1-o,n,r,l);continue}if(l>=55296&&l<=57343){i+=e("UTF16_SURROGATE",i-1-o,n,r,l);continue}if(l<=a){i+=e("OVERLONG",i-1-o,n,r,l);continue}r.push(l)}}return r}function pi(t,e){xe(typeof t=="string","invalid string value","str",t),e!=null&&(xne(e),t=t.normalize(e));let n=[];for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);if(i<128)n.push(i);else if(i<2048)n.push(i>>6|192),n.push(i&63|128);else if((i&64512)==55296){r++;const s=t.charCodeAt(r);xe(r<t.length&&(s&64512)===56320,"invalid surrogate pair","str",t);const o=65536+((i&1023)<<10)+(s&1023);n.push(o>>18|240),n.push(o>>12&63|128),n.push(o>>6&63|128),n.push(o&63|128)}else n.push(i>>12|224),n.push(i>>6&63|128),n.push(i&63|128)}return new Uint8Array(n)}function hke(t){return t.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function LT(t,e){return hke(Tne(t,e))}function Xpt(t,e){return Tne(pi(t,e))}function kne(t){async function e(n,r){Ke(r==null||!r.cancelled,"request cancelled before sending","CANCELLED");const i=n.url.split(":")[0].toLowerCase();Ke(i==="http"||i==="https",`unsupported protocol ${i}`,"UNSUPPORTED_OPERATION",{info:{protocol:i},operation:"request"}),Ke(i==="https"||!n.credentials||n.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let s=null;const o=new AbortController,a=setTimeout(()=>{s=Pr("request timeout","TIMEOUT"),o.abort()},n.timeout);r&&r.addListener(()=>{s=Pr("request cancelled","CANCELLED"),o.abort()});const l=Object.assign({},t,{method:n.method,headers:new Headers(Array.from(n)),body:n.body||void 0,signal:o.signal});let c;try{c=await fetch(n.url,l)}catch(g){throw clearTimeout(a),s||g}clearTimeout(a);const u={};c.headers.forEach((g,x)=>{u[x.toLowerCase()]=g});const f=await c.arrayBuffer(),m=f==null?null:new Uint8Array(f);return{statusCode:c.status,statusMessage:c.statusText,headers:u,body:m}}return e}const pke=12,mke=250;let Uz=kne();const gke=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),yke=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let $P=!1;async function Cne(t,e){try{const n=t.match(gke);if(!n)throw new Error("invalid data");return new Kf(200,"OK",{"content-type":n[1]||"text/plain"},n[2]?lke(n[3]):vke(n[3]))}catch{return new Kf(599,"BAD REQUEST (invalid data: URI)",{},null,new sd(t))}}function Nne(t){async function e(n,r){try{const i=n.match(yke);if(!i)throw new Error("invalid link");return new sd(`${t}${i[2]}`)}catch{return new Kf(599,"BAD REQUEST (invalid IPFS URI)",{},null,new sd(n))}}return e}const PS={data:Cne,ipfs:Nne("https://gateway.ipfs.io/ipfs/")},_ne=new WeakMap;var Tp,Cf;class xke{constructor(e){je(this,Tp);je(this,Cf);ge(this,Tp,[]),ge(this,Cf,!1),_ne.set(e,()=>{if(!ie(this,Cf)){ge(this,Cf,!0);for(const n of ie(this,Tp))setTimeout(()=>{n()},0);ge(this,Tp,[])}})}addListener(e){Ke(!ie(this,Cf),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),ie(this,Tp).push(e)}get cancelled(){return ie(this,Cf)}checkSignal(){Ke(!this.cancelled,"cancelled","CANCELLED",{})}}Tp=new WeakMap,Cf=new WeakMap;function RS(t){if(t==null)throw new Error("missing signal; should not happen");return t.checkSignal(),t}var ny,ry,sl,Su,iy,sy,Ii,Oo,Au,kp,Cp,Np,Ql,ol,Nf,_p,wb;const NC=class NC{constructor(e){je(this,_p);je(this,ny);je(this,ry);je(this,sl);je(this,Su);je(this,iy);je(this,sy);je(this,Ii);je(this,Oo);je(this,Au);je(this,kp);je(this,Cp);je(this,Np);je(this,Ql);je(this,ol);je(this,Nf);ge(this,sy,String(e)),ge(this,ny,!1),ge(this,ry,!0),ge(this,sl,{}),ge(this,Su,""),ge(this,iy,3e5),ge(this,ol,{slotInterval:mke,maxAttempts:pke}),ge(this,Nf,null)}get url(){return ie(this,sy)}set url(e){ge(this,sy,String(e))}get body(){return ie(this,Ii)==null?null:new Uint8Array(ie(this,Ii))}set body(e){if(e==null)ge(this,Ii,void 0),ge(this,Oo,void 0);else if(typeof e=="string")ge(this,Ii,pi(e)),ge(this,Oo,"text/plain");else if(e instanceof Uint8Array)ge(this,Ii,e),ge(this,Oo,"application/octet-stream");else if(typeof e=="object")ge(this,Ii,pi(JSON.stringify(e))),ge(this,Oo,"application/json");else throw new Error("invalid body")}hasBody(){return ie(this,Ii)!=null}get method(){return ie(this,Su)?ie(this,Su):this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),ge(this,Su,String(e).toUpperCase())}get headers(){const e=Object.assign({},ie(this,sl));return ie(this,Au)&&(e.authorization=`Basic ${cke(pi(ie(this,Au)))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&ie(this,Oo)&&(e["content-type"]=ie(this,Oo)),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,n){ie(this,sl)[String(e).toLowerCase()]=String(n)}clearHeaders(){ge(this,sl,{})}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const i=n[r++];return{value:[i,e[i]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return ie(this,Au)||null}setCredentials(e,n){xe(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),ge(this,Au,`${e}:${n}`)}get allowGzip(){return ie(this,ry)}set allowGzip(e){ge(this,ry,!!e)}get allowInsecureAuthentication(){return!!ie(this,ny)}set allowInsecureAuthentication(e){ge(this,ny,!!e)}get timeout(){return ie(this,iy)}set timeout(e){xe(e>=0,"timeout must be non-zero","timeout",e),ge(this,iy,e)}get preflightFunc(){return ie(this,kp)||null}set preflightFunc(e){ge(this,kp,e)}get processFunc(){return ie(this,Cp)||null}set processFunc(e){ge(this,Cp,e)}get retryFunc(){return ie(this,Np)||null}set retryFunc(e){ge(this,Np,e)}get getUrlFunc(){return ie(this,Nf)||Uz}set getUrlFunc(e){ge(this,Nf,e)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${ie(this,Ii)?rt(ie(this,Ii)):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(ie(this,ol).slotInterval=e.slotInterval),e.maxAttempts!=null&&(ie(this,ol).maxAttempts=e.maxAttempts)}send(){return Ke(ie(this,Ql)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),ge(this,Ql,new xke(this)),tt(this,_p,wb).call(this,0,Fz()+this.timeout,0,this,new Kf(0,"",{},null,this))}cancel(){Ke(ie(this,Ql)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=_ne.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const n=this.url.split(":")[0].toLowerCase(),r=e.split(":")[0].toLowerCase();Ke(this.method==="GET"&&(n!=="https"||r!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const i=new NC(e);return i.method="GET",i.allowGzip=this.allowGzip,i.timeout=this.timeout,ge(i,sl,Object.assign({},ie(this,sl))),ie(this,Ii)&&ge(i,Ii,new Uint8Array(ie(this,Ii))),ge(i,Oo,ie(this,Oo)),i}clone(){const e=new NC(this.url);return ge(e,Su,ie(this,Su)),ie(this,Ii)&&ge(e,Ii,ie(this,Ii)),ge(e,Oo,ie(this,Oo)),ge(e,sl,Object.assign({},ie(this,sl))),ge(e,Au,ie(this,Au)),this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),ge(e,kp,ie(this,kp)),ge(e,Cp,ie(this,Cp)),ge(e,Np,ie(this,Np)),ge(e,ol,Object.assign({},ie(this,ol))),ge(e,Nf,ie(this,Nf)),e}static lockConfig(){$P=!0}static getGateway(e){return PS[e.toLowerCase()]||null}static registerGateway(e,n){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if($P)throw new Error("gateways locked");PS[e]=n}static registerGetUrl(e){if($P)throw new Error("gateways locked");Uz=e}static createGetUrlFunc(e){return kne(e)}static createDataGateway(){return Cne}static createIpfsGatewayFunc(e){return Nne(e)}};ny=new WeakMap,ry=new WeakMap,sl=new WeakMap,Su=new WeakMap,iy=new WeakMap,sy=new WeakMap,Ii=new WeakMap,Oo=new WeakMap,Au=new WeakMap,kp=new WeakMap,Cp=new WeakMap,Np=new WeakMap,Ql=new WeakMap,ol=new WeakMap,Nf=new WeakMap,_p=new WeakSet,wb=async function(e,n,r,i,s){var u,f,m;if(e>=ie(this,ol).maxAttempts)return s.makeServerError("exceeded maximum retry limit");Ke(Fz()<=n,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:i}),r>0&&await bke(r);let o=this.clone();const a=(o.url.split(":")[0]||"").toLowerCase();if(a in PS){const g=await PS[a](o.url,RS(ie(i,Ql)));if(g instanceof Kf){let x=g;if(this.processFunc){RS(ie(i,Ql));try{x=await this.processFunc(o,x)}catch(v){(v.throttle==null||typeof v.stall!="number")&&x.makeServerError("error in post-processing function",v).assertOk()}}return x}o=g}this.preflightFunc&&(o=await this.preflightFunc(o));const l=await this.getUrlFunc(o,RS(ie(i,Ql)));let c=new Kf(l.statusCode,l.statusMessage,l.headers,l.body,i);if(c.statusCode===301||c.statusCode===302){try{const g=c.headers.location||"";return tt(u=o.redirect(g),_p,wb).call(u,e+1,n,0,i,c)}catch{}return c}else if(c.statusCode===429&&(this.retryFunc==null||await this.retryFunc(o,c,e))){const g=c.headers["retry-after"];let x=ie(this,ol).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof g=="string"&&g.match(/^[1-9][0-9]*$/)&&(x=parseInt(g)),tt(f=o.clone(),_p,wb).call(f,e+1,n,x,i,c)}if(this.processFunc){RS(ie(i,Ql));try{c=await this.processFunc(o,c)}catch(g){(g.throttle==null||typeof g.stall!="number")&&c.makeServerError("error in post-processing function",g).assertOk();let x=ie(this,ol).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return g.stall>=0&&(x=g.stall),tt(m=o.clone(),_p,wb).call(m,e+1,n,x,i,c)}}return c};let sd=NC;var Jw,Xw,Qw,Mo,oy,Ip;const Gj=class Gj{constructor(e,n,r,i,s){je(this,Jw);je(this,Xw);je(this,Qw);je(this,Mo);je(this,oy);je(this,Ip);ge(this,Jw,e),ge(this,Xw,n),ge(this,Qw,Object.keys(r).reduce((o,a)=>(o[a.toLowerCase()]=String(r[a]),o),{})),ge(this,Mo,i==null?null:new Uint8Array(i)),ge(this,oy,s||null),ge(this,Ip,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${ie(this,Mo)?rt(ie(this,Mo)):"null"}>`}get statusCode(){return ie(this,Jw)}get statusMessage(){return ie(this,Xw)}get headers(){return Object.assign({},ie(this,Qw))}get body(){return ie(this,Mo)==null?null:new Uint8Array(ie(this,Mo))}get bodyText(){try{return ie(this,Mo)==null?"":LT(ie(this,Mo))}catch{Ke(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{Ke(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const i=n[r++];return{value:[i,e[i]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(e,n){let r;e?r=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,r=`CLIENT ESCALATED SERVER ERROR (${e})`);const i=new Gj(599,r,this.headers,this.body,ie(this,oy)||void 0);return ge(i,Ip,{message:e,error:n}),i}throwThrottleError(e,n){n==null?n=-1:xe(Number.isInteger(n)&&n>=0,"invalid stall timeout","stall",n);const r=new Error(e||"throttling requests");throw Mt(r,{stall:n,throttle:!0}),r}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return ie(this,Mo)!=null}get request(){return ie(this,oy)}ok(){return ie(this,Ip).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:n}=ie(this,Ip);e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let r=null;this.request&&(r=this.request.url);let i=null;try{ie(this,Mo)&&(i=LT(ie(this,Mo)))}catch{}Ke(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:n,info:{requestUrl:r,responseBody:i,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};Jw=new WeakMap,Xw=new WeakMap,Qw=new WeakMap,Mo=new WeakMap,oy=new WeakMap,Ip=new WeakMap;let Kf=Gj;function Fz(){return new Date().getTime()}function vke(t){return pi(t.replace(/%([0-9a-f][0-9a-f])/gi,(e,n)=>String.fromCharCode(parseInt(n,16))))}function bke(t){return new Promise(e=>setTimeout(e,t))}const wke=BigInt(-1),Za=BigInt(0),xg=BigInt(1),Eke=BigInt(5),P0={};let Lg="0000";for(;Lg.length<80;)Lg+=Lg;function zh(t){let e=Lg;for(;e.length<t;)e+=e;return BigInt("1"+e.substring(0,t))}function Jv(t,e,n){const r=BigInt(e.width);if(e.signed){const i=xg<<r-xg;Ke(n==null||t>=-i&&t<i,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:t}),t>Za?t=MT(pp(t,r),r):t=-MT(pp(-t,r),r)}else{const i=xg<<r;Ke(n==null||t>=0&&t<i,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:t}),t=(t%i+i)%i&i-xg}return t}function zP(t){typeof t=="number"&&(t=`fixed128x${t}`);let e=!0,n=128,r=18;if(typeof t=="string"){if(t!=="fixed")if(t==="ufixed")e=!1;else{const s=t.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);xe(s,"invalid fixed format","format",t),e=s[1]!=="u",n=parseInt(s[2]),r=parseInt(s[3])}}else if(t){const s=t,o=(a,l,c)=>s[a]==null?c:(xe(typeof s[a]===l,"invalid fixed format ("+a+" not "+l+")","format."+a,s[a]),s[a]);e=o("signed","boolean",e),n=o("width","number",n),r=o("decimals","number",r)}xe(n%8===0,"invalid FixedNumber width (not byte aligned)","format.width",n),xe(r<=80,"invalid FixedNumber decimals (too large)","format.decimals",r);const i=(e?"":"u")+"fixed"+String(n)+"x"+String(r);return{signed:e,width:n,decimals:r,name:i}}function Ske(t,e){let n="";t<Za&&(n="-",t*=wke);let r=t.toString();if(e===0)return n+r;for(;r.length<=e;)r=Lg+r;const i=r.length-e;for(r=r.substring(0,i)+"."+r.substring(i);r[0]==="0"&&r[1]!==".";)r=r.substring(1);for(;r[r.length-1]==="0"&&r[r.length-2]!==".";)r=r.substring(0,r.length-1);return n+r}var al,rr,Ms,Gn,Jh,du,y4,x4,v4,b4;const Sf=class Sf{constructor(e,n,r){je(this,Gn);Se(this,"format");je(this,al);je(this,rr);je(this,Ms);Se(this,"_value");uh(e,P0,"FixedNumber"),ge(this,rr,n),ge(this,al,r);const i=Ske(n,r.decimals);Mt(this,{format:r.name,_value:i}),ge(this,Ms,zh(r.decimals))}get signed(){return ie(this,al).signed}get width(){return ie(this,al).width}get decimals(){return ie(this,al).decimals}get value(){return ie(this,rr)}addUnsafe(e){return tt(this,Gn,y4).call(this,e)}add(e){return tt(this,Gn,y4).call(this,e,"add")}subUnsafe(e){return tt(this,Gn,x4).call(this,e)}sub(e){return tt(this,Gn,x4).call(this,e,"sub")}mulUnsafe(e){return tt(this,Gn,v4).call(this,e)}mul(e){return tt(this,Gn,v4).call(this,e,"mul")}mulSignal(e){tt(this,Gn,Jh).call(this,e);const n=ie(this,rr)*ie(e,rr);return Ke(n%ie(this,Ms)===Za,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),tt(this,Gn,du).call(this,n/ie(this,Ms),"mulSignal")}divUnsafe(e){return tt(this,Gn,b4).call(this,e)}div(e){return tt(this,Gn,b4).call(this,e,"div")}divSignal(e){Ke(ie(e,rr)!==Za,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),tt(this,Gn,Jh).call(this,e);const n=ie(this,rr)*ie(this,Ms);return Ke(n%ie(e,rr)===Za,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),tt(this,Gn,du).call(this,n/ie(e,rr),"divSignal")}cmp(e){let n=this.value,r=e.value;const i=this.decimals-e.decimals;return i>0?r*=zh(i):i<0&&(n*=zh(-i)),n<r?-1:n>r?1:0}eq(e){return this.cmp(e)===0}lt(e){return this.cmp(e)<0}lte(e){return this.cmp(e)<=0}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=ie(this,rr);return ie(this,rr)<Za&&(e-=ie(this,Ms)-xg),e=ie(this,rr)/ie(this,Ms)*ie(this,Ms),tt(this,Gn,du).call(this,e,"floor")}ceiling(){let e=ie(this,rr);return ie(this,rr)>Za&&(e+=ie(this,Ms)-xg),e=ie(this,rr)/ie(this,Ms)*ie(this,Ms),tt(this,Gn,du).call(this,e,"ceiling")}round(e){if(e==null&&(e=0),e>=this.decimals)return this;const n=this.decimals-e,r=Eke*zh(n-1);let i=this.value+r;const s=zh(n);return i=i/s*s,Jv(i,ie(this,al),"round"),new Sf(P0,i,ie(this,al))}isZero(){return ie(this,rr)===Za}isNegative(){return ie(this,rr)<Za}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return Sf.fromString(this.toString(),e)}static fromValue(e,n,r){const i=n==null?0:Qt(n),s=zP(r);let o=wt(e,"value");const a=i-s.decimals;if(a>0){const l=zh(a);Ke(o%l===Za,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e}),o/=l}else a<0&&(o*=zh(-a));return Jv(o,s,"fromValue"),new Sf(P0,o,s)}static fromString(e,n){const r=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);xe(r&&r[2].length+r[3].length>0,"invalid FixedNumber string value","value",e);const i=zP(n);let s=r[2]||"0",o=r[3]||"";for(;o.length<i.decimals;)o+=Lg;Ke(o.substring(i.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e}),o=o.substring(0,i.decimals);const a=BigInt(r[1]+s+o);return Jv(a,i,"fromString"),new Sf(P0,a,i)}static fromBytes(e,n){let r=w1(ht(e,"value"));const i=zP(n);return i.signed&&(r=MT(r,i.width)),Jv(r,i,"fromBytes"),new Sf(P0,r,i)}};al=new WeakMap,rr=new WeakMap,Ms=new WeakMap,Gn=new WeakSet,Jh=function(e){xe(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)},du=function(e,n){return e=Jv(e,ie(this,al),n),new Sf(P0,e,ie(this,al))},y4=function(e,n){return tt(this,Gn,Jh).call(this,e),tt(this,Gn,du).call(this,ie(this,rr)+ie(e,rr),n)},x4=function(e,n){return tt(this,Gn,Jh).call(this,e),tt(this,Gn,du).call(this,ie(this,rr)-ie(e,rr),n)},v4=function(e,n){return tt(this,Gn,Jh).call(this,e),tt(this,Gn,du).call(this,ie(this,rr)*ie(e,rr)/ie(this,Ms),n)},b4=function(e,n){return Ke(ie(e,rr)!==Za,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),tt(this,Gn,Jh).call(this,e),tt(this,Gn,du).call(this,ie(this,rr)*ie(this,Ms)/ie(e,rr),n)};let BT=Sf;function Ake(t){let e=t.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function $z(t,e,n){let r=0;for(let i=0;i<n;i++)r=r*256+t[e+i];return r}function zz(t,e,n,r){const i=[];for(;n<e+1+r;){const s=Ine(t,n);i.push(s.result),n+=s.consumed,Ke(n<=e+1+r,"child data too short","BUFFER_OVERRUN",{buffer:t,length:r,offset:e})}return{consumed:1+r,result:i}}function Ine(t,e){Ke(t.length!==0,"data too short","BUFFER_OVERRUN",{buffer:t,length:0,offset:1});const n=r=>{Ke(r<=t.length,"data short segment too short","BUFFER_OVERRUN",{buffer:t,length:t.length,offset:r})};if(t[e]>=248){const r=t[e]-247;n(e+1+r);const i=$z(t,e+1,r);return n(e+1+r+i),zz(t,e,e+1+r,r+i)}else if(t[e]>=192){const r=t[e]-192;return n(e+1+r),zz(t,e,e+1,r)}else if(t[e]>=184){const r=t[e]-183;n(e+1+r);const i=$z(t,e+1,r);n(e+1+r+i);const s=rt(t.slice(e+1+r,e+1+r+i));return{consumed:1+r+i,result:s}}else if(t[e]>=128){const r=t[e]-128;n(e+1+r);const i=rt(t.slice(e+1,e+1+r));return{consumed:1+r,result:i}}return{consumed:1,result:Ake(t[e])}}function E1(t){const e=ht(t,"data"),n=Ine(e,0);return xe(n.consumed===e.length,"unexpected junk after rlp payload","data",t),n.result}function Hz(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function Pne(t){if(Array.isArray(t)){let r=[];if(t.forEach(function(s){r=r.concat(Pne(s))}),r.length<=55)return r.unshift(192+r.length),r;const i=Hz(r.length);return i.unshift(247+i.length),i.concat(r)}const e=Array.prototype.slice.call(ht(t,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const n=Hz(e.length);return n.unshift(183+n.length),n.concat(e)}const Vz="0123456789abcdef";function wc(t){let e="0x";for(const n of Pne(t))e+=Vz[n>>4],e+=Vz[n&15];return e}const Rne=["wei","kwei","mwei","gwei","szabo","finney","ether"];function One(t,e){let n=18;if(typeof e=="string"){const r=Rne.indexOf(e);xe(r>=0,"invalid unit","unit",e),n=3*r}else e!=null&&(n=Qt(e,"unit"));return BT.fromValue(t,n,{decimals:n,width:512}).toString()}function Tke(t,e){xe(typeof t=="string","value must be a string","value",t);let n=18;if(typeof e=="string"){const r=Rne.indexOf(e);xe(r>=0,"invalid unit","unit",e),n=3*r}else e!=null&&(n=Qt(e,"unit"));return BT.fromString(t,{decimals:n,width:512}).value}function Qpt(t){return One(t,18)}function Zpt(t){return Tke(t,18)}function kke(t){const e=ht(t,"randomBytes");e[6]=e[6]&15|64,e[8]=e[8]&63|128;const n=rt(e);return[n.substring(2,10),n.substring(10,14),n.substring(14,18),n.substring(18,22),n.substring(22,34)].join("-")}const zs=32,w4=new Uint8Array(zs),Cke=["then"],OS={},Mne=new WeakMap;function sp(t){return Mne.get(t)}function qz(t,e){Mne.set(t,e)}function Xv(t,e){const n=new Error(`deferred error during ABI decoding triggered accessing ${t}`);throw n.error=e,n}function E4(t,e,n){return t.indexOf(null)>=0?e.map((r,i)=>r instanceof Wy?E4(sp(r),r,n):r):t.reduce((r,i,s)=>{let o=e.getValue(i);return i in r||(n&&o instanceof Wy&&(o=E4(sp(o),o,n)),r[i]=o),r},{})}var ay;const kg=class kg extends Array{constructor(...n){const r=n[0];let i=n[1],s=(n[2]||[]).slice(),o=!0;r!==OS&&(i=n,s=[],o=!1);super(i.length);je(this,ay);i.forEach((c,u)=>{this[u]=c});const a=s.reduce((c,u)=>(typeof u=="string"&&c.set(u,(c.get(u)||0)+1),c),new Map);if(qz(this,Object.freeze(i.map((c,u)=>{const f=s[u];return f!=null&&a.get(f)===1?f:null}))),ge(this,ay,[]),ie(this,ay)==null&&ie(this,ay),!o)return;Object.freeze(this);const l=new Proxy(this,{get:(c,u,f)=>{if(typeof u=="string"){if(u.match(/^[0-9]+$/)){const g=Qt(u,"%index");if(g<0||g>=this.length)throw new RangeError("out of result range");const x=c[g];return x instanceof Error&&Xv(`index ${g}`,x),x}if(Cke.indexOf(u)>=0)return Reflect.get(c,u,f);const m=c[u];if(m instanceof Function)return function(...g){return m.apply(this===f?c:this,g)};if(!(u in c))return c.getValue.apply(this===f?c:this,[u])}return Reflect.get(c,u,f)}});return qz(l,sp(this)),l}toArray(n){const r=[];return this.forEach((i,s)=>{i instanceof Error&&Xv(`index ${s}`,i),n&&i instanceof kg&&(i=i.toArray(n)),r.push(i)}),r}toObject(n){const r=sp(this);return r.reduce((i,s,o)=>(Ke(s!=null,`value at index ${o} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),E4(r,this,n)),{})}slice(n,r){n==null&&(n=0),n<0&&(n+=this.length,n<0&&(n=0)),r==null&&(r=this.length),r<0&&(r+=this.length,r<0&&(r=0)),r>this.length&&(r=this.length);const i=sp(this),s=[],o=[];for(let a=n;a<r;a++)s.push(this[a]),o.push(i[a]);return new kg(OS,s,o)}filter(n,r){const i=sp(this),s=[],o=[];for(let a=0;a<this.length;a++){const l=this[a];l instanceof Error&&Xv(`index ${a}`,l),n.call(r,l,a,this)&&(s.push(l),o.push(i[a]))}return new kg(OS,s,o)}map(n,r){const i=[];for(let s=0;s<this.length;s++){const o=this[s];o instanceof Error&&Xv(`index ${s}`,o),i.push(n.call(r,o,s,this))}return i}getValue(n){const r=sp(this).indexOf(n);if(r===-1)return;const i=this[r];return i instanceof Error&&Xv(`property ${JSON.stringify(n)}`,i.error),i}static fromItems(n,r){return new kg(OS,n,r)}};ay=new WeakMap;let Wy=kg;function emt(t){const e=[],n=function(r,i){if(Array.isArray(i))for(let s in i){const o=r.slice();o.push(s);try{n(o,i[s])}catch(a){e.push({path:o,error:a})}}};return n([],t),e}function Gz(t){let e=Lr(t);return Ke(e.length<=zs,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:zs,offset:e.length}),e.length!==zs&&(e=os(On([w4.slice(e.length%zs),e]))),e}class wd{constructor(e,n,r,i){Se(this,"name");Se(this,"type");Se(this,"localName");Se(this,"dynamic");Mt(this,{name:e,type:n,localName:r,dynamic:i},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,n){xe(!1,e,this.localName,n)}}var Tu,Pp,ly,GA;class S4{constructor(){je(this,ly);je(this,Tu);je(this,Pp);ge(this,Tu,[]),ge(this,Pp,0)}get data(){return On(ie(this,Tu))}get length(){return ie(this,Pp)}appendWriter(e){return tt(this,ly,GA).call(this,os(e.data))}writeBytes(e){let n=os(e);const r=n.length%zs;return r&&(n=os(On([n,w4.slice(r)]))),tt(this,ly,GA).call(this,n)}writeValue(e){return tt(this,ly,GA).call(this,Gz(e))}writeUpdatableValue(){const e=ie(this,Tu).length;return ie(this,Tu).push(w4),ge(this,Pp,ie(this,Pp)+zs),n=>{ie(this,Tu)[e]=Gz(n)}}}Tu=new WeakMap,Pp=new WeakMap,ly=new WeakSet,GA=function(e){return ie(this,Tu).push(e),ge(this,Pp,ie(this,Pp)+e.length),e.length};var so,Do,Rp,Op,_f,km,T4,Dne;const Kj=class Kj{constructor(e,n,r){je(this,km);Se(this,"allowLoose");je(this,so);je(this,Do);je(this,Rp);je(this,Op);je(this,_f);Mt(this,{allowLoose:!!n}),ge(this,so,os(e)),ge(this,Rp,0),ge(this,Op,null),ge(this,_f,r??1024),ge(this,Do,0)}get data(){return rt(ie(this,so))}get dataLength(){return ie(this,so).length}get consumed(){return ie(this,Do)}get bytes(){return new Uint8Array(ie(this,so))}subReader(e){const n=new Kj(ie(this,so).slice(ie(this,Do)+e),this.allowLoose,ie(this,_f));return ge(n,Op,this),n}readBytes(e,n){let r=tt(this,km,Dne).call(this,0,e,!!n);return tt(this,km,T4).call(this,e),ge(this,Do,ie(this,Do)+r.length),r.slice(0,e)}readValue(){return w1(this.readBytes(zs))}readIndex(){return ike(this.readBytes(zs))}};so=new WeakMap,Do=new WeakMap,Rp=new WeakMap,Op=new WeakMap,_f=new WeakMap,km=new WeakSet,T4=function(e){var n;if(ie(this,Op))return tt(n=ie(this,Op),km,T4).call(n,e);ge(this,Rp,ie(this,Rp)+e),Ke(ie(this,_f)<1||ie(this,Rp)<=ie(this,_f)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${ie(this,_f)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:os(ie(this,so)),offset:ie(this,Do),length:e,info:{bytesRead:ie(this,Rp),dataLength:this.dataLength}})},Dne=function(e,n,r){let i=Math.ceil(n/zs)*zs;return ie(this,Do)+i>ie(this,so).length&&(this.allowLoose&&r&&ie(this,Do)+n<=ie(this,so).length?i=n:Ke(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:os(ie(this,so)),length:ie(this,so).length,offset:ie(this,Do)+i})),ie(this,so).slice(ie(this,Do),ie(this,Do)+i)};let A4=Kj;function Fo(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function JL(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function Lne(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Fo(t.outputLen),Fo(t.blockLen)}function Yy(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Bne(t,e){JL(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const HP=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const jne=t=>t instanceof Uint8Array,KA=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),WA=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),zl=(t,e)=>t<<32-e|t>>>e,Nke=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Nke)throw new Error("Non little-endian hardware is not supported");const _ke=async()=>{};async function Kz(t,e,n){let r=Date.now();for(let i=0;i<t;i++){n(i);const s=Date.now()-r;s>=0&&s<e||(await _ke(),r+=s)}}function Ike(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function Jy(t){if(typeof t=="string"&&(t=Ike(t)),!jne(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function Pke(...t){const e=new Uint8Array(t.reduce((r,i)=>r+i.length,0));let n=0;return t.forEach(r=>{if(!jne(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}let XL=class{clone(){return this._cloneInto()}};const Rke={}.toString;function Une(t,e){if(e!==void 0&&Rke.call(e)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(t,e)}function YC(t){const e=r=>t().update(Jy(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Oke(t=32){if(HP&&typeof HP.getRandomValues=="function")return HP.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}let Fne=class extends XL{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,Lne(e);const r=Jy(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return Yy(this),this.iHash.update(e),this}digestInto(e){Yy(this),JL(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const JC=(t,e,n)=>new Fne(t,e).update(n).digest();JC.create=(t,e)=>new Fne(t,e);function Mke(t,e,n,r){Lne(t);const i=Une({dkLen:32,asyncTick:10},r),{c:s,dkLen:o,asyncTick:a}=i;if(Fo(s),Fo(o),Fo(a),s<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const l=Jy(e),c=Jy(n),u=new Uint8Array(o),f=JC.create(t,l),m=f._cloneInto().update(c);return{c:s,dkLen:o,asyncTick:a,DK:u,PRF:f,PRFSalt:m}}function Dke(t,e,n,r,i){return t.destroy(),e.destroy(),r&&r.destroy(),i.fill(0),n}function QL(t,e,n,r){const{c:i,dkLen:s,DK:o,PRF:a,PRFSalt:l}=Mke(t,e,n,r);let c;const u=new Uint8Array(4),f=WA(u),m=new Uint8Array(a.outputLen);for(let g=1,x=0;x<s;g++,x+=a.outputLen){const v=o.subarray(x,x+a.outputLen);f.setInt32(0,g,!1),(c=l._cloneInto(c)).update(u).digestInto(m),v.set(m.subarray(0,v.length));for(let w=1;w<i;w++){a._cloneInto(c).update(m).digestInto(m);for(let E=0;E<v.length;E++)v[E]^=m[E]}}return Dke(a,l,o,c,m)}function Lke(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),l=r?4:0,c=r?0:4;t.setUint32(e+l,o,r),t.setUint32(e+c,a,r)}class ZL extends XL{constructor(e,n,r,i){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=WA(this.buffer)}update(e){Yy(this);const{view:n,buffer:r,blockLen:i}=this;e=Jy(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=WA(e);for(;i<=s-o;o+=i)this.process(l,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Yy(this),Bne(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let f=o;f<i;f++)n[f]=0;Lke(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=WA(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=l/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<c;f++)a.setUint32(4*f,u[f],s)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%n&&e.buffer.set(r),e}}const Bke=(t,e,n)=>t&e^~t&n,jke=(t,e,n)=>t&e^t&n^e&n,Uke=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),rf=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),sf=new Uint32Array(64);let Fke=class extends ZL{constructor(){super(64,32,8,!1),this.A=rf[0]|0,this.B=rf[1]|0,this.C=rf[2]|0,this.D=rf[3]|0,this.E=rf[4]|0,this.F=rf[5]|0,this.G=rf[6]|0,this.H=rf[7]|0}get(){const{A:e,B:n,C:r,D:i,E:s,F:o,G:a,H:l}=this;return[e,n,r,i,s,o,a,l]}set(e,n,r,i,s,o,a,l){this.A=e|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(e,n){for(let f=0;f<16;f++,n+=4)sf[f]=e.getUint32(n,!1);for(let f=16;f<64;f++){const m=sf[f-15],g=sf[f-2],x=zl(m,7)^zl(m,18)^m>>>3,v=zl(g,17)^zl(g,19)^g>>>10;sf[f]=v+sf[f-7]+x+sf[f-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:l,G:c,H:u}=this;for(let f=0;f<64;f++){const m=zl(a,6)^zl(a,11)^zl(a,25),g=u+m+Bke(a,l,c)+Uke[f]+sf[f]|0,v=(zl(r,2)^zl(r,13)^zl(r,22))+jke(r,i,s)|0;u=c,c=l,l=a,a=o+g|0,o=s,s=i,i=r,r=g+v|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(r,i,s,o,a,l,c,u)}roundClean(){sf.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const Tx=YC(()=>new Fke),MS=BigInt(2**32-1),k4=BigInt(32);function $ne(t,e=!1){return e?{h:Number(t&MS),l:Number(t>>k4&MS)}:{h:Number(t>>k4&MS)|0,l:Number(t&MS)|0}}function zne(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=$ne(t[i],e);[n[i],r[i]]=[s,o]}return[n,r]}const $ke=(t,e)=>BigInt(t>>>0)<<k4|BigInt(e>>>0),zke=(t,e,n)=>t>>>n,Hke=(t,e,n)=>t<<32-n|e>>>n,Vke=(t,e,n)=>t>>>n|e<<32-n,qke=(t,e,n)=>t<<32-n|e>>>n,Gke=(t,e,n)=>t<<64-n|e>>>n-32,Kke=(t,e,n)=>t>>>n-32|e<<64-n,Wke=(t,e)=>e,Yke=(t,e)=>t,Hne=(t,e,n)=>t<<n|e>>>32-n,Vne=(t,e,n)=>e<<n|t>>>32-n,qne=(t,e,n)=>e<<n-32|t>>>64-n,Gne=(t,e,n)=>t<<n-32|e>>>64-n;function Jke(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:i|0}}const Xke=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),Qke=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,Zke=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),eCe=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0,tCe=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0),nCe=(t,e,n,r,i,s)=>e+n+r+i+s+(t/2**32|0)|0,hn={fromBig:$ne,split:zne,toBig:$ke,shrSH:zke,shrSL:Hke,rotrSH:Vke,rotrSL:qke,rotrBH:Gke,rotrBL:Kke,rotr32H:Wke,rotr32L:Yke,rotlSH:Hne,rotlSL:Vne,rotlBH:qne,rotlBL:Gne,add:Jke,add3L:Xke,add3H:Qke,add4L:Zke,add4H:eCe,add5H:nCe,add5L:tCe},[rCe,iCe]=hn.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),of=new Uint32Array(80),af=new Uint32Array(80);let sCe=class extends ZL{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:l,Eh:c,El:u,Fh:f,Fl:m,Gh:g,Gl:x,Hh:v,Hl:w}=this;return[e,n,r,i,s,o,a,l,c,u,f,m,g,x,v,w]}set(e,n,r,i,s,o,a,l,c,u,f,m,g,x,v,w){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=c|0,this.El=u|0,this.Fh=f|0,this.Fl=m|0,this.Gh=g|0,this.Gl=x|0,this.Hh=v|0,this.Hl=w|0}process(e,n){for(let k=0;k<16;k++,n+=4)of[k]=e.getUint32(n),af[k]=e.getUint32(n+=4);for(let k=16;k<80;k++){const O=of[k-15]|0,j=af[k-15]|0,R=hn.rotrSH(O,j,1)^hn.rotrSH(O,j,8)^hn.shrSH(O,j,7),U=hn.rotrSL(O,j,1)^hn.rotrSL(O,j,8)^hn.shrSL(O,j,7),V=of[k-2]|0,F=af[k-2]|0,$=hn.rotrSH(V,F,19)^hn.rotrBH(V,F,61)^hn.shrSH(V,F,6),K=hn.rotrSL(V,F,19)^hn.rotrBL(V,F,61)^hn.shrSL(V,F,6),H=hn.add4L(U,K,af[k-7],af[k-16]),B=hn.add4H(H,R,$,of[k-7],of[k-16]);of[k]=B|0,af[k]=H|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:l,Dh:c,Dl:u,Eh:f,El:m,Fh:g,Fl:x,Gh:v,Gl:w,Hh:E,Hl:C}=this;for(let k=0;k<80;k++){const O=hn.rotrSH(f,m,14)^hn.rotrSH(f,m,18)^hn.rotrBH(f,m,41),j=hn.rotrSL(f,m,14)^hn.rotrSL(f,m,18)^hn.rotrBL(f,m,41),R=f&g^~f&v,U=m&x^~m&w,V=hn.add5L(C,j,U,iCe[k],af[k]),F=hn.add5H(V,E,O,R,rCe[k],of[k]),$=V|0,K=hn.rotrSH(r,i,28)^hn.rotrBH(r,i,34)^hn.rotrBH(r,i,39),H=hn.rotrSL(r,i,28)^hn.rotrBL(r,i,34)^hn.rotrBL(r,i,39),B=r&s^r&a^s&a,A=i&o^i&l^o&l;E=v|0,C=w|0,v=g|0,w=x|0,g=f|0,x=m|0,{h:f,l:m}=hn.add(c|0,u|0,F|0,$|0),c=a|0,u=l|0,a=s|0,l=o|0,s=r|0,o=i|0;const I=hn.add3L($,H,A);r=hn.add3H(I,F,K,B),i=I|0}({h:r,l:i}=hn.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=hn.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l}=hn.add(this.Ch|0,this.Cl|0,a|0,l|0),{h:c,l:u}=hn.add(this.Dh|0,this.Dl|0,c|0,u|0),{h:f,l:m}=hn.add(this.Eh|0,this.El|0,f|0,m|0),{h:g,l:x}=hn.add(this.Fh|0,this.Fl|0,g|0,x|0),{h:v,l:w}=hn.add(this.Gh|0,this.Gl|0,v|0,w|0),{h:E,l:C}=hn.add(this.Hh|0,this.Hl|0,E|0,C|0),this.set(r,i,s,o,a,l,c,u,f,m,g,x,v,w,E,C)}roundClean(){of.fill(0),af.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const e8=YC(()=>new sCe);function oCe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("unable to locate global object")}const Wz=oCe(),Yz=Wz.crypto||Wz.msCrypto;function Kne(t){switch(t){case"sha256":return Tx.create();case"sha512":return e8.create()}xe(!1,"invalid hashing algorithm name","algorithm",t)}function aCe(t,e){const n={sha256:Tx,sha512:e8}[t];return xe(n!=null,"invalid hmac algorithm","algorithm",t),JC.create(n,e)}function lCe(t,e,n,r,i){const s={sha256:Tx,sha512:e8}[i];return xe(s!=null,"invalid pbkdf2 algorithm","algorithm",i),QL(s,t,e,{c:n,dkLen:r})}function cCe(t){Ke(Yz!=null,"platform does not support secure random numbers","UNSUPPORTED_OPERATION",{operation:"randomBytes"}),xe(Number.isInteger(t)&&t>0&&t<=1024,"invalid length","length",t);const e=new Uint8Array(t);return Yz.getRandomValues(e),e}let Wne=!1;const Yne=function(t,e,n){return aCe(t,e).update(n).digest()};let Jne=Yne;function kx(t,e,n){const r=ht(e,"key"),i=ht(n,"data");return rt(Jne(t,r,i))}kx._=Yne;kx.lock=function(){Wne=!0};kx.register=function(t){if(Wne)throw new Error("computeHmac is locked");Jne=t};Object.freeze(kx);const[Xne,Qne,Zne]=[[],[],[]],uCe=BigInt(0),Qv=BigInt(1),dCe=BigInt(2),fCe=BigInt(7),hCe=BigInt(256),pCe=BigInt(113);for(let t=0,e=Qv,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],Xne.push(2*(5*r+n)),Qne.push((t+1)*(t+2)/2%64);let i=uCe;for(let s=0;s<7;s++)e=(e<<Qv^(e>>fCe)*pCe)%hCe,e&dCe&&(i^=Qv<<(Qv<<BigInt(s))-Qv);Zne.push(i)}const[mCe,gCe]=zne(Zne,!0),Jz=(t,e,n)=>n>32?qne(t,e,n):Hne(t,e,n),Xz=(t,e,n)=>n>32?Gne(t,e,n):Vne(t,e,n);function yCe(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,l=(o+2)%10,c=n[l],u=n[l+1],f=Jz(c,u,1)^n[a],m=Xz(c,u,1)^n[a+1];for(let g=0;g<50;g+=10)t[o+g]^=f,t[o+g+1]^=m}let i=t[2],s=t[3];for(let o=0;o<24;o++){const a=Qne[o],l=Jz(i,s,a),c=Xz(i,s,a),u=Xne[o];i=t[u],s=t[u+1],t[u]=l,t[u+1]=c}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=mCe[r],t[1]^=gCe[r]}n.fill(0)}class t8 extends XL{constructor(e,n,r,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Fo(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=KA(this.state)}keccak(){yCe(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){Yy(this);const{blockLen:n,state:r}=this;e=Jy(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);for(let a=0;a<o;a++)r[this.pos++]^=e[s++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:i}=this;e[r]^=n,(n&128)!==0&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){Yy(this,!1),JL(e),this.finish();const n=this.state,{blockLen:r}=this;for(let i=0,s=e.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);e.set(n.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Fo(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Bne(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new t8(n,r,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}}const xCe=(t,e,n)=>YC(()=>new t8(e,t,n)),vCe=xCe(1,136,256/8);let ere=!1;const tre=function(t){return vCe(t)};let nre=tre;function Kn(t){const e=ht(t,"data");return rt(nre(e))}Kn._=tre;Kn.lock=function(){ere=!0};Kn.register=function(t){if(ere)throw new TypeError("keccak256 is locked");nre=t};Object.freeze(Kn);const bCe=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),rre=Uint8Array.from({length:16},(t,e)=>e),wCe=rre.map(t=>(9*t+5)%16);let n8=[rre],r8=[wCe];for(let t=0;t<4;t++)for(let e of[n8,r8])e.push(e[t].map(n=>bCe[n]));const ire=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(t=>new Uint8Array(t)),ECe=n8.map((t,e)=>t.map(n=>ire[e][n])),SCe=r8.map((t,e)=>t.map(n=>ire[e][n])),ACe=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),TCe=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),DS=(t,e)=>t<<e|t>>>32-e;function Qz(t,e,n,r){return t===0?e^n^r:t===1?e&n|~e&r:t===2?(e|~n)^r:t===3?e&r|n&~r:e^(n|~r)}const LS=new Uint32Array(16);class kCe extends ZL{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:n,h2:r,h3:i,h4:s}=this;return[e,n,r,i,s]}set(e,n,r,i,s){this.h0=e|0,this.h1=n|0,this.h2=r|0,this.h3=i|0,this.h4=s|0}process(e,n){for(let g=0;g<16;g++,n+=4)LS[g]=e.getUint32(n,!0);let r=this.h0|0,i=r,s=this.h1|0,o=s,a=this.h2|0,l=a,c=this.h3|0,u=c,f=this.h4|0,m=f;for(let g=0;g<5;g++){const x=4-g,v=ACe[g],w=TCe[g],E=n8[g],C=r8[g],k=ECe[g],O=SCe[g];for(let j=0;j<16;j++){const R=DS(r+Qz(g,s,a,c)+LS[E[j]]+v,k[j])+f|0;r=f,f=c,c=DS(a,10)|0,a=s,s=R}for(let j=0;j<16;j++){const R=DS(i+Qz(x,o,l,u)+LS[C[j]]+w,O[j])+m|0;i=m,m=u,u=DS(l,10)|0,l=o,o=R}}this.set(this.h1+a+u|0,this.h2+c+m|0,this.h3+f+i|0,this.h4+r+o|0,this.h0+s+l|0)}roundClean(){LS.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const CCe=YC(()=>new kCe);let sre=!1;const ore=function(t){return CCe(t)};let are=ore;function Cx(t){const e=ht(t,"data");return rt(are(e))}Cx._=ore;Cx.lock=function(){sre=!0};Cx.register=function(t){if(sre)throw new TypeError("ripemd160 is locked");are=t};Object.freeze(Cx);let lre=!1;const cre=function(t,e,n,r,i){return lCe(t,e,n,r,i)};let ure=cre;function dh(t,e,n,r,i){const s=ht(t,"password"),o=ht(e,"salt");return rt(ure(s,o,n,r,i))}dh._=cre;dh.lock=function(){lre=!0};dh.register=function(t){if(lre)throw new Error("pbkdf2 is locked");ure=t};Object.freeze(dh);let dre=!1;const fre=function(t){return new Uint8Array(cCe(t))};let hre=fre;function Gu(t){return hre(t)}Gu._=fre;Gu.lock=function(){dre=!0};Gu.register=function(t){if(dre)throw new Error("randomBytes is locked");hre=t};Object.freeze(Gu);const Bn=(t,e)=>t<<e|t>>>32-e;function Zz(t,e,n,r,i,s){let o=t[e++]^n[r++],a=t[e++]^n[r++],l=t[e++]^n[r++],c=t[e++]^n[r++],u=t[e++]^n[r++],f=t[e++]^n[r++],m=t[e++]^n[r++],g=t[e++]^n[r++],x=t[e++]^n[r++],v=t[e++]^n[r++],w=t[e++]^n[r++],E=t[e++]^n[r++],C=t[e++]^n[r++],k=t[e++]^n[r++],O=t[e++]^n[r++],j=t[e++]^n[r++],R=o,U=a,V=l,F=c,$=u,K=f,H=m,B=g,A=x,I=v,M=w,z=E,G=C,te=k,Y=O,q=j;for(let D=0;D<8;D+=2)$^=Bn(R+G|0,7),A^=Bn($+R|0,9),G^=Bn(A+$|0,13),R^=Bn(G+A|0,18),I^=Bn(K+U|0,7),te^=Bn(I+K|0,9),U^=Bn(te+I|0,13),K^=Bn(U+te|0,18),Y^=Bn(M+H|0,7),V^=Bn(Y+M|0,9),H^=Bn(V+Y|0,13),M^=Bn(H+V|0,18),F^=Bn(q+z|0,7),B^=Bn(F+q|0,9),z^=Bn(B+F|0,13),q^=Bn(z+B|0,18),U^=Bn(R+F|0,7),V^=Bn(U+R|0,9),F^=Bn(V+U|0,13),R^=Bn(F+V|0,18),H^=Bn(K+$|0,7),B^=Bn(H+K|0,9),$^=Bn(B+H|0,13),K^=Bn($+B|0,18),z^=Bn(M+I|0,7),A^=Bn(z+M|0,9),I^=Bn(A+z|0,13),M^=Bn(I+A|0,18),G^=Bn(q+Y|0,7),te^=Bn(G+q|0,9),Y^=Bn(te+G|0,13),q^=Bn(Y+te|0,18);i[s++]=o+R|0,i[s++]=a+U|0,i[s++]=l+V|0,i[s++]=c+F|0,i[s++]=u+$|0,i[s++]=f+K|0,i[s++]=m+H|0,i[s++]=g+B|0,i[s++]=x+A|0,i[s++]=v+I|0,i[s++]=w+M|0,i[s++]=E+z|0,i[s++]=C+G|0,i[s++]=k+te|0,i[s++]=O+Y|0,i[s++]=j+q|0}function Bg(t,e,n,r,i){let s=r+0,o=r+16*i;for(let a=0;a<16;a++)n[o+a]=t[e+(2*i-1)*16+a];for(let a=0;a<i;a++,s+=16,e+=16)Zz(n,o,t,e,n,s),a>0&&(o+=16),Zz(n,s,t,e+=16,n,o)}function pre(t,e,n){const r=Une({dkLen:32,asyncTick:10,maxmem:1073742848},n),{N:i,r:s,p:o,dkLen:a,asyncTick:l,maxmem:c,onProgress:u}=r;if(Fo(i),Fo(s),Fo(o),Fo(a),Fo(l),Fo(c),u!==void 0&&typeof u!="function")throw new Error("progressCb should be function");const f=128*s,m=f/4;if(i<=1||(i&i-1)!==0||i>=2**(f/8)||i>2**32)throw new Error("Scrypt: N must be larger than 1, a power of 2, less than 2^(128 * r / 8) and less than 2^32");if(o<0||o>(2**32-1)*32/f)throw new Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(a<0||a>(2**32-1)*32)throw new Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");const g=f*(i+o);if(g>c)throw new Error(`Scrypt: parameters too large, ${g} (128 * r * (N + p)) > ${c} (maxmem)`);const x=QL(Tx,t,e,{c:1,dkLen:f*o}),v=KA(x),w=KA(new Uint8Array(f*i)),E=KA(new Uint8Array(f));let C=()=>{};if(u){const k=2*i*o,O=Math.max(Math.floor(k/1e4),1);let j=0;C=()=>{j++,u&&(!(j%O)||j===k)&&u(j/k)}}return{N:i,r:s,p:o,dkLen:a,blockSize32:m,V:w,B32:v,B:x,tmp:E,blockMixCb:C,asyncTick:l}}function mre(t,e,n,r,i){const s=QL(Tx,t,n,{c:1,dkLen:e});return n.fill(0),r.fill(0),i.fill(0),s}function NCe(t,e,n){const{N:r,r:i,p:s,dkLen:o,blockSize32:a,V:l,B32:c,B:u,tmp:f,blockMixCb:m}=pre(t,e,n);for(let g=0;g<s;g++){const x=a*g;for(let v=0;v<a;v++)l[v]=c[x+v];for(let v=0,w=0;v<r-1;v++)Bg(l,w,l,w+=a,i),m();Bg(l,(r-1)*a,c,x,i),m();for(let v=0;v<r;v++){const w=c[x+a-16]%r;for(let E=0;E<a;E++)f[E]=c[x+E]^l[w*a+E];Bg(f,0,c,x,i),m()}}return mre(t,o,u,l,f)}async function _Ce(t,e,n){const{N:r,r:i,p:s,dkLen:o,blockSize32:a,V:l,B32:c,B:u,tmp:f,blockMixCb:m,asyncTick:g}=pre(t,e,n);for(let x=0;x<s;x++){const v=a*x;for(let E=0;E<a;E++)l[E]=c[v+E];let w=0;await Kz(r-1,g,()=>{Bg(l,w,l,w+=a,i),m()}),Bg(l,(r-1)*a,c,v,i),m(),await Kz(r,g,()=>{const E=c[v+a-16]%r;for(let C=0;C<a;C++)f[C]=c[v+C]^l[E*a+C];Bg(f,0,c,v,i),m()})}return mre(t,o,u,l,f)}let gre=!1,yre=!1;const xre=async function(t,e,n,r,i,s,o){return await _Ce(t,e,{N:n,r,p:i,dkLen:s,onProgress:o})},vre=function(t,e,n,r,i,s){return NCe(t,e,{N:n,r,p:i,dkLen:s})};let bre=xre,wre=vre;async function Nx(t,e,n,r,i,s,o){const a=ht(t,"passwd"),l=ht(e,"salt");return rt(await bre(a,l,n,r,i,s,o))}Nx._=xre;Nx.lock=function(){yre=!0};Nx.register=function(t){if(yre)throw new Error("scrypt is locked");bre=t};Object.freeze(Nx);function _x(t,e,n,r,i,s){const o=ht(t,"passwd"),a=ht(e,"salt");return rt(wre(o,a,n,r,i,s))}_x._=vre;_x.lock=function(){gre=!0};_x.register=function(t){if(gre)throw new Error("scryptSync is locked");wre=t};Object.freeze(_x);const Ere=function(t){return Kne("sha256").update(t).digest()},Sre=function(t){return Kne("sha512").update(t).digest()};let Are=Ere,Tre=Sre,kre=!1,Cre=!1;function Fa(t){const e=ht(t,"data");return rt(Are(e))}Fa._=Ere;Fa.lock=function(){kre=!0};Fa.register=function(t){if(kre)throw new Error("sha256 is locked");Are=t};Object.freeze(Fa);function i8(t){const e=ht(t,"data");return rt(Tre(e))}i8._=Sre;i8.lock=function(){Cre=!0};i8.register=function(t){if(Cre)throw new Error("sha512 is locked");Tre=t};Object.freeze(Fa);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Nre=BigInt(0),XC=BigInt(1),ICe=BigInt(2),QC=t=>t instanceof Uint8Array,PCe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Xy(t){if(!QC(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=PCe[t[n]];return e}function _re(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function s8(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}function Qy(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let r=0;r<n.length;r++){const i=r*2,s=t.slice(i,i+2),o=Number.parseInt(s,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[r]=o}return n}function Yp(t){return s8(Xy(t))}function o8(t){if(!QC(t))throw new Error("Uint8Array expected");return s8(Xy(Uint8Array.from(t).reverse()))}function Zy(t,e){return Qy(t.toString(16).padStart(e*2,"0"))}function a8(t,e){return Zy(t,e).reverse()}function RCe(t){return Qy(_re(t))}function il(t,e,n){let r;if(typeof e=="string")try{r=Qy(e)}catch(s){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${s}`)}else if(QC(e))r=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(`${t} expected ${n} bytes, got ${i}`);return r}function uw(...t){const e=new Uint8Array(t.reduce((r,i)=>r+i.length,0));let n=0;return t.forEach(r=>{if(!QC(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}function OCe(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function MCe(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function DCe(t){let e;for(e=0;t>Nre;t>>=XC,e+=1);return e}function LCe(t,e){return t>>BigInt(e)&XC}const BCe=(t,e,n)=>t|(n?XC:Nre)<<BigInt(e),l8=t=>(ICe<<BigInt(t-1))-XC,VP=t=>new Uint8Array(t),eH=t=>Uint8Array.from(t);function Ire(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=VP(t),i=VP(t),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...f)=>n(i,r,...f),l=(f=VP())=>{i=a(eH([0]),f),r=a(),f.length!==0&&(i=a(eH([1]),f),r=a())},c=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const m=[];for(;f<e;){r=a();const g=r.slice();m.push(g),f+=r.length}return uw(...m)};return(f,m)=>{o(),l(f);let g;for(;!(g=m(c()));)l();return o(),g}}const jCe={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function S1(t,e,n={}){const r=(i,s,o)=>{const a=jCe[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);const l=t[i];if(!(o&&l===void 0)&&!a(l,t))throw new Error(`Invalid param ${String(i)}=${l} (${typeof l}), expected ${s}`)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return t}const UCe=Object.freeze(Object.defineProperty({__proto__:null,bitGet:LCe,bitLen:DCe,bitMask:l8,bitSet:BCe,bytesToHex:Xy,bytesToNumberBE:Yp,bytesToNumberLE:o8,concatBytes:uw,createHmacDrbg:Ire,ensureBytes:il,equalBytes:OCe,hexToBytes:Qy,hexToNumber:s8,numberToBytesBE:Zy,numberToBytesLE:a8,numberToHexUnpadded:_re,numberToVarBytesBE:RCe,utf8ToBytes:MCe,validateObject:S1},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Li=BigInt(0),ni=BigInt(1),op=BigInt(2),FCe=BigInt(3),C4=BigInt(4),tH=BigInt(5),nH=BigInt(8);BigInt(9);BigInt(16);function ao(t,e){const n=t%e;return n>=Li?n:e+n}function $Ce(t,e,n){if(n<=Li||e<Li)throw new Error("Expected power/modulo > 0");if(n===ni)return Li;let r=ni;for(;e>Li;)e&ni&&(r=r*t%n),t=t*t%n,e>>=ni;return r}function ua(t,e,n){let r=t;for(;e-- >Li;)r*=r,r%=n;return r}function N4(t,e){if(t===Li||e<=Li)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=ao(t,e),r=e,i=Li,s=ni;for(;n!==Li;){const a=r/n,l=r%n,c=i-s*a;r=n,n=l,i=s,s=c}if(r!==ni)throw new Error("invert: does not exist");return ao(i,e)}function zCe(t){const e=(t-ni)/op;let n,r,i;for(n=t-ni,r=0;n%op===Li;n/=op,r++);for(i=op;i<t&&$Ce(i,e,t)!==t-ni;i++);if(r===1){const o=(t+ni)/C4;return function(l,c){const u=l.pow(c,o);if(!l.eql(l.sqr(u),c))throw new Error("Cannot find square root");return u}}const s=(n+ni)/op;return function(a,l){if(a.pow(l,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let c=r,u=a.pow(a.mul(a.ONE,i),n),f=a.pow(l,s),m=a.pow(l,n);for(;!a.eql(m,a.ONE);){if(a.eql(m,a.ZERO))return a.ZERO;let g=1;for(let v=a.sqr(m);g<c&&!a.eql(v,a.ONE);g++)v=a.sqr(v);const x=a.pow(u,ni<<BigInt(c-g-1));u=a.sqr(x),f=a.mul(f,x),m=a.mul(m,u),c=g}return f}}function HCe(t){if(t%C4===FCe){const e=(t+ni)/C4;return function(r,i){const s=r.pow(i,e);if(!r.eql(r.sqr(s),i))throw new Error("Cannot find square root");return s}}if(t%nH===tH){const e=(t-tH)/nH;return function(r,i){const s=r.mul(i,op),o=r.pow(s,e),a=r.mul(i,o),l=r.mul(r.mul(a,op),o),c=r.mul(a,r.sub(l,r.ONE));if(!r.eql(r.sqr(c),i))throw new Error("Cannot find square root");return c}}return zCe(t)}const VCe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function qCe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=VCe.reduce((r,i)=>(r[i]="function",r),e);return S1(t,n)}function GCe(t,e,n){if(n<Li)throw new Error("Expected power > 0");if(n===Li)return t.ONE;if(n===ni)return e;let r=t.ONE,i=e;for(;n>Li;)n&ni&&(r=t.mul(r,i)),i=t.sqr(i),n>>=ni;return r}function KCe(t,e){const n=new Array(e.length),r=e.reduce((s,o,a)=>t.is0(o)?s:(n[a]=s,t.mul(s,o)),t.ONE),i=t.inv(r);return e.reduceRight((s,o,a)=>t.is0(o)?s:(n[a]=t.mul(s,n[a]),t.mul(s,o)),i),n}function Pre(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function WCe(t,e,n=!1,r={}){if(t<=Li)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:i,nByteLength:s}=Pre(t,e);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=HCe(t),a=Object.freeze({ORDER:t,BITS:i,BYTES:s,MASK:l8(i),ZERO:Li,ONE:ni,create:l=>ao(l,t),isValid:l=>{if(typeof l!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof l}`);return Li<=l&&l<t},is0:l=>l===Li,isOdd:l=>(l&ni)===ni,neg:l=>ao(-l,t),eql:(l,c)=>l===c,sqr:l=>ao(l*l,t),add:(l,c)=>ao(l+c,t),sub:(l,c)=>ao(l-c,t),mul:(l,c)=>ao(l*c,t),pow:(l,c)=>GCe(a,l,c),div:(l,c)=>ao(l*N4(c,t),t),sqrN:l=>l*l,addN:(l,c)=>l+c,subN:(l,c)=>l-c,mulN:(l,c)=>l*c,inv:l=>N4(l,t),sqrt:r.sqrt||(l=>o(a,l)),invertBatch:l=>KCe(a,l),cmov:(l,c,u)=>u?c:l,toBytes:l=>n?a8(l,s):Zy(l,s),fromBytes:l=>{if(l.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${l.length}`);return n?o8(l):Yp(l)}});return Object.freeze(a)}function Rre(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function Ore(t){const e=Rre(t);return e+Math.ceil(e/2)}function YCe(t,e,n=!1){const r=t.length,i=Rre(e),s=Ore(e);if(r<16||r<s||r>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${r}`);const o=n?Yp(t):o8(t),a=ao(o,e-ni)+ni;return n?a8(a,i):Zy(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const JCe=BigInt(0),qP=BigInt(1);function XCe(t,e){const n=(i,s)=>{const o=s.negate();return i?o:s},r=i=>{const s=Math.ceil(e/i)+1,o=2**(i-1);return{windows:s,windowSize:o}};return{constTimeNegate:n,unsafeLadder(i,s){let o=t.ZERO,a=i;for(;s>JCe;)s&qP&&(o=o.add(a)),a=a.double(),s>>=qP;return o},precomputeWindow(i,s){const{windows:o,windowSize:a}=r(s),l=[];let c=i,u=c;for(let f=0;f<o;f++){u=c,l.push(u);for(let m=1;m<a;m++)u=u.add(c),l.push(u);c=u.double()}return l},wNAF(i,s,o){const{windows:a,windowSize:l}=r(i);let c=t.ZERO,u=t.BASE;const f=BigInt(2**i-1),m=2**i,g=BigInt(i);for(let x=0;x<a;x++){const v=x*l;let w=Number(o&f);o>>=g,w>l&&(w-=m,o+=qP);const E=v,C=v+Math.abs(w)-1,k=x%2!==0,O=w<0;w===0?u=u.add(n(k,s[E])):c=c.add(n(O,s[C]))}return{p:c,f:u}},wNAFCached(i,s,o,a){const l=i._WINDOW_SIZE||1;let c=s.get(i);return c||(c=this.precomputeWindow(i,l),l!==1&&s.set(i,a(c))),this.wNAF(l,c,o)}}}function Mre(t){return qCe(t.Fp),S1(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Pre(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function QCe(t){const e=Mre(t);S1(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=e;if(n){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:ZCe,hexToBytes:e2e}=UCe,mp={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=mp;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const n=t[1],r=t.subarray(2,n+2);if(!n||r.length!==n)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:ZCe(r),l:t.subarray(n+2)}},toSig(t){const{Err:e}=mp,n=typeof t=="string"?e2e(t):t;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new e("Invalid signature tag");if(n[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:i,l:s}=mp._parseInt(n.subarray(2)),{d:o,l:a}=mp._parseInt(s);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(t){const e=c=>Number.parseInt(c[0],16)&8?"00"+c:c,n=c=>{const u=c.toString(16);return u.length&1?`0${u}`:u},r=e(n(t.s)),i=e(n(t.r)),s=r.length/2,o=i.length/2,a=n(s),l=n(o);return`30${n(o+s+4)}02${l}${i}02${a}${r}`}},Mu=BigInt(0),Na=BigInt(1);BigInt(2);const rH=BigInt(3);BigInt(4);function t2e(t){const e=QCe(t),{Fp:n}=e,r=e.toBytes||((x,v,w)=>{const E=v.toAffine();return uw(Uint8Array.from([4]),n.toBytes(E.x),n.toBytes(E.y))}),i=e.fromBytes||(x=>{const v=x.subarray(1),w=n.fromBytes(v.subarray(0,n.BYTES)),E=n.fromBytes(v.subarray(n.BYTES,2*n.BYTES));return{x:w,y:E}});function s(x){const{a:v,b:w}=e,E=n.sqr(x),C=n.mul(E,x);return n.add(n.add(C,n.mul(x,v)),w)}if(!n.eql(n.sqr(e.Gy),s(e.Gx)))throw new Error("bad generator point: equation left != right");function o(x){return typeof x=="bigint"&&Mu<x&&x<e.n}function a(x){if(!o(x))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(x){const{allowedPrivateKeyLengths:v,nByteLength:w,wrapPrivateKey:E,n:C}=e;if(v&&typeof x!="bigint"){if(x instanceof Uint8Array&&(x=Xy(x)),typeof x!="string"||!v.includes(x.length))throw new Error("Invalid key");x=x.padStart(w*2,"0")}let k;try{k=typeof x=="bigint"?x:Yp(il("private key",x,w))}catch{throw new Error(`private key must be ${w} bytes, hex or bigint, not ${typeof x}`)}return E&&(k=ao(k,C)),a(k),k}const c=new Map;function u(x){if(!(x instanceof f))throw new Error("ProjectivePoint expected")}class f{constructor(v,w,E){if(this.px=v,this.py=w,this.pz=E,v==null||!n.isValid(v))throw new Error("x required");if(w==null||!n.isValid(w))throw new Error("y required");if(E==null||!n.isValid(E))throw new Error("z required")}static fromAffine(v){const{x:w,y:E}=v||{};if(!v||!n.isValid(w)||!n.isValid(E))throw new Error("invalid affine point");if(v instanceof f)throw new Error("projective point not allowed");const C=k=>n.eql(k,n.ZERO);return C(w)&&C(E)?f.ZERO:new f(w,E,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(v){const w=n.invertBatch(v.map(E=>E.pz));return v.map((E,C)=>E.toAffine(w[C])).map(f.fromAffine)}static fromHex(v){const w=f.fromAffine(i(il("pointHex",v)));return w.assertValidity(),w}static fromPrivateKey(v){return f.BASE.multiply(l(v))}_setWindowSize(v){this._WINDOW_SIZE=v,c.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:v,y:w}=this.toAffine();if(!n.isValid(v)||!n.isValid(w))throw new Error("bad point: x or y not FE");const E=n.sqr(w),C=s(v);if(!n.eql(E,C))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:v}=this.toAffine();if(n.isOdd)return!n.isOdd(v);throw new Error("Field doesn't support isOdd")}equals(v){u(v);const{px:w,py:E,pz:C}=this,{px:k,py:O,pz:j}=v,R=n.eql(n.mul(w,j),n.mul(k,C)),U=n.eql(n.mul(E,j),n.mul(O,C));return R&&U}negate(){return new f(this.px,n.neg(this.py),this.pz)}double(){const{a:v,b:w}=e,E=n.mul(w,rH),{px:C,py:k,pz:O}=this;let j=n.ZERO,R=n.ZERO,U=n.ZERO,V=n.mul(C,C),F=n.mul(k,k),$=n.mul(O,O),K=n.mul(C,k);return K=n.add(K,K),U=n.mul(C,O),U=n.add(U,U),j=n.mul(v,U),R=n.mul(E,$),R=n.add(j,R),j=n.sub(F,R),R=n.add(F,R),R=n.mul(j,R),j=n.mul(K,j),U=n.mul(E,U),$=n.mul(v,$),K=n.sub(V,$),K=n.mul(v,K),K=n.add(K,U),U=n.add(V,V),V=n.add(U,V),V=n.add(V,$),V=n.mul(V,K),R=n.add(R,V),$=n.mul(k,O),$=n.add($,$),V=n.mul($,K),j=n.sub(j,V),U=n.mul($,F),U=n.add(U,U),U=n.add(U,U),new f(j,R,U)}add(v){u(v);const{px:w,py:E,pz:C}=this,{px:k,py:O,pz:j}=v;let R=n.ZERO,U=n.ZERO,V=n.ZERO;const F=e.a,$=n.mul(e.b,rH);let K=n.mul(w,k),H=n.mul(E,O),B=n.mul(C,j),A=n.add(w,E),I=n.add(k,O);A=n.mul(A,I),I=n.add(K,H),A=n.sub(A,I),I=n.add(w,C);let M=n.add(k,j);return I=n.mul(I,M),M=n.add(K,B),I=n.sub(I,M),M=n.add(E,C),R=n.add(O,j),M=n.mul(M,R),R=n.add(H,B),M=n.sub(M,R),V=n.mul(F,I),R=n.mul($,B),V=n.add(R,V),R=n.sub(H,V),V=n.add(H,V),U=n.mul(R,V),H=n.add(K,K),H=n.add(H,K),B=n.mul(F,B),I=n.mul($,I),H=n.add(H,B),B=n.sub(K,B),B=n.mul(F,B),I=n.add(I,B),K=n.mul(H,I),U=n.add(U,K),K=n.mul(M,I),R=n.mul(A,R),R=n.sub(R,K),K=n.mul(A,H),V=n.mul(M,V),V=n.add(V,K),new f(R,U,V)}subtract(v){return this.add(v.negate())}is0(){return this.equals(f.ZERO)}wNAF(v){return g.wNAFCached(this,c,v,w=>{const E=n.invertBatch(w.map(C=>C.pz));return w.map((C,k)=>C.toAffine(E[k])).map(f.fromAffine)})}multiplyUnsafe(v){const w=f.ZERO;if(v===Mu)return w;if(a(v),v===Na)return this;const{endo:E}=e;if(!E)return g.unsafeLadder(this,v);let{k1neg:C,k1:k,k2neg:O,k2:j}=E.splitScalar(v),R=w,U=w,V=this;for(;k>Mu||j>Mu;)k&Na&&(R=R.add(V)),j&Na&&(U=U.add(V)),V=V.double(),k>>=Na,j>>=Na;return C&&(R=R.negate()),O&&(U=U.negate()),U=new f(n.mul(U.px,E.beta),U.py,U.pz),R.add(U)}multiply(v){a(v);let w=v,E,C;const{endo:k}=e;if(k){const{k1neg:O,k1:j,k2neg:R,k2:U}=k.splitScalar(w);let{p:V,f:F}=this.wNAF(j),{p:$,f:K}=this.wNAF(U);V=g.constTimeNegate(O,V),$=g.constTimeNegate(R,$),$=new f(n.mul($.px,k.beta),$.py,$.pz),E=V.add($),C=F.add(K)}else{const{p:O,f:j}=this.wNAF(w);E=O,C=j}return f.normalizeZ([E,C])[0]}multiplyAndAddUnsafe(v,w,E){const C=f.BASE,k=(j,R)=>R===Mu||R===Na||!j.equals(C)?j.multiplyUnsafe(R):j.multiply(R),O=k(this,w).add(k(v,E));return O.is0()?void 0:O}toAffine(v){const{px:w,py:E,pz:C}=this,k=this.is0();v==null&&(v=k?n.ONE:n.inv(C));const O=n.mul(w,v),j=n.mul(E,v),R=n.mul(C,v);if(k)return{x:n.ZERO,y:n.ZERO};if(!n.eql(R,n.ONE))throw new Error("invZ was invalid");return{x:O,y:j}}isTorsionFree(){const{h:v,isTorsionFree:w}=e;if(v===Na)return!0;if(w)return w(f,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:v,clearCofactor:w}=e;return v===Na?this:w?w(f,this):this.multiplyUnsafe(e.h)}toRawBytes(v=!0){return this.assertValidity(),r(f,this,v)}toHex(v=!0){return Xy(this.toRawBytes(v))}}f.BASE=new f(e.Gx,e.Gy,n.ONE),f.ZERO=new f(n.ZERO,n.ONE,n.ZERO);const m=e.nBitLength,g=XCe(f,e.endo?Math.ceil(m/2):m);return{CURVE:e,ProjectivePoint:f,normPrivateKeyToScalar:l,weierstrassEquation:s,isWithinCurveOrder:o}}function n2e(t){const e=Mre(t);return S1(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function r2e(t){const e=n2e(t),{Fp:n,n:r}=e,i=n.BYTES+1,s=2*n.BYTES+1;function o(I){return Mu<I&&I<n.ORDER}function a(I){return ao(I,r)}function l(I){return N4(I,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:u,weierstrassEquation:f,isWithinCurveOrder:m}=t2e({...e,toBytes(I,M,z){const G=M.toAffine(),te=n.toBytes(G.x),Y=uw;return z?Y(Uint8Array.from([M.hasEvenY()?2:3]),te):Y(Uint8Array.from([4]),te,n.toBytes(G.y))},fromBytes(I){const M=I.length,z=I[0],G=I.subarray(1);if(M===i&&(z===2||z===3)){const te=Yp(G);if(!o(te))throw new Error("Point is not on curve");const Y=f(te);let q=n.sqrt(Y);const D=(q&Na)===Na;return(z&1)===1!==D&&(q=n.neg(q)),{x:te,y:q}}else if(M===s&&z===4){const te=n.fromBytes(G.subarray(0,n.BYTES)),Y=n.fromBytes(G.subarray(n.BYTES,2*n.BYTES));return{x:te,y:Y}}else throw new Error(`Point of length ${M} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),g=I=>Xy(Zy(I,e.nByteLength));function x(I){const M=r>>Na;return I>M}function v(I){return x(I)?a(-I):I}const w=(I,M,z)=>Yp(I.slice(M,z));class E{constructor(M,z,G){this.r=M,this.s=z,this.recovery=G,this.assertValidity()}static fromCompact(M){const z=e.nByteLength;return M=il("compactSignature",M,z*2),new E(w(M,0,z),w(M,z,2*z))}static fromDER(M){const{r:z,s:G}=mp.toSig(il("DER",M));return new E(z,G)}assertValidity(){if(!m(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!m(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(M){return new E(this.r,this.s,M)}recoverPublicKey(M){const{r:z,s:G,recovery:te}=this,Y=U(il("msgHash",M));if(te==null||![0,1,2,3].includes(te))throw new Error("recovery id invalid");const q=te===2||te===3?z+e.n:z;if(q>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const D=(te&1)===0?"02":"03",_=c.fromHex(D+g(q)),W=l(q),X=a(-Y*W),re=a(G*W),ae=c.BASE.multiplyAndAddUnsafe(_,X,re);if(!ae)throw new Error("point at infinify");return ae.assertValidity(),ae}hasHighS(){return x(this.s)}normalizeS(){return this.hasHighS()?new E(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Qy(this.toDERHex())}toDERHex(){return mp.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Qy(this.toCompactHex())}toCompactHex(){return g(this.r)+g(this.s)}}const C={isValidPrivateKey(I){try{return u(I),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const I=Ore(e.n);return YCe(e.randomBytes(I),e.n)},precompute(I=8,M=c.BASE){return M._setWindowSize(I),M.multiply(BigInt(3)),M}};function k(I,M=!0){return c.fromPrivateKey(I).toRawBytes(M)}function O(I){const M=I instanceof Uint8Array,z=typeof I=="string",G=(M||z)&&I.length;return M?G===i||G===s:z?G===2*i||G===2*s:I instanceof c}function j(I,M,z=!0){if(O(I))throw new Error("first arg must be private key");if(!O(M))throw new Error("second arg must be public key");return c.fromHex(M).multiply(u(I)).toRawBytes(z)}const R=e.bits2int||function(I){const M=Yp(I),z=I.length*8-e.nBitLength;return z>0?M>>BigInt(z):M},U=e.bits2int_modN||function(I){return a(R(I))},V=l8(e.nBitLength);function F(I){if(typeof I!="bigint")throw new Error("bigint expected");if(!(Mu<=I&&I<V))throw new Error(`bigint expected < 2^${e.nBitLength}`);return Zy(I,e.nByteLength)}function $(I,M,z=K){if(["recovered","canonical"].some(ue=>ue in z))throw new Error("sign() legacy options not supported");const{hash:G,randomBytes:te}=e;let{lowS:Y,prehash:q,extraEntropy:D}=z;Y==null&&(Y=!0),I=il("msgHash",I),q&&(I=il("prehashed msgHash",G(I)));const _=U(I),W=u(M),X=[F(W),F(_)];if(D!=null){const ue=D===!0?te(n.BYTES):D;X.push(il("extraEntropy",ue))}const re=uw(...X),ae=_;function Ee(ue){const me=R(ue);if(!m(me))return;const ce=l(me),oe=c.BASE.multiply(me).toAffine(),ke=a(oe.x);if(ke===Mu)return;const Ne=a(ce*a(ae+ke*W));if(Ne===Mu)return;let ze=(oe.x===ke?0:2)|Number(oe.y&Na),Ze=Ne;return Y&&x(Ne)&&(Ze=v(Ne),ze^=1),new E(ke,Ze,ze)}return{seed:re,k2sig:Ee}}const K={lowS:e.lowS,prehash:!1},H={lowS:e.lowS,prehash:!1};function B(I,M,z=K){const{seed:G,k2sig:te}=$(I,M,z),Y=e;return Ire(Y.hash.outputLen,Y.nByteLength,Y.hmac)(G,te)}c.BASE._setWindowSize(8);function A(I,M,z,G=H){var oe;const te=I;if(M=il("msgHash",M),z=il("publicKey",z),"strict"in G)throw new Error("options.strict was renamed to lowS");const{lowS:Y,prehash:q}=G;let D,_;try{if(typeof te=="string"||te instanceof Uint8Array)try{D=E.fromDER(te)}catch(ke){if(!(ke instanceof mp.Err))throw ke;D=E.fromCompact(te)}else if(typeof te=="object"&&typeof te.r=="bigint"&&typeof te.s=="bigint"){const{r:ke,s:Ne}=te;D=new E(ke,Ne)}else throw new Error("PARSE");_=c.fromHex(z)}catch(ke){if(ke.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(Y&&D.hasHighS())return!1;q&&(M=e.hash(M));const{r:W,s:X}=D,re=U(M),ae=l(X),Ee=a(re*ae),ue=a(W*ae),me=(oe=c.BASE.multiplyAndAddUnsafe(_,Ee,ue))==null?void 0:oe.toAffine();return me?a(me.x)===W:!1}return{CURVE:e,getPublicKey:k,getSharedSecret:j,sign:B,verify:A,ProjectivePoint:c,Signature:E,utils:C}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function i2e(t){return{hash:t,hmac:(e,...n)=>JC(t,e,Pke(...n)),randomBytes:Oke}}function s2e(t,e){const n=r=>r2e({...t,...i2e(r)});return Object.freeze({...n(e),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Dre=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),iH=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),o2e=BigInt(1),_4=BigInt(2),sH=(t,e)=>(t+e/_4)/e;function a2e(t){const e=Dre,n=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),c=t*t*t%e,u=c*c*t%e,f=ua(u,n,e)*u%e,m=ua(f,n,e)*u%e,g=ua(m,_4,e)*c%e,x=ua(g,i,e)*g%e,v=ua(x,s,e)*x%e,w=ua(v,a,e)*v%e,E=ua(w,l,e)*w%e,C=ua(E,a,e)*v%e,k=ua(C,n,e)*u%e,O=ua(k,o,e)*x%e,j=ua(O,r,e)*c%e,R=ua(j,_4,e);if(!I4.eql(I4.sqr(R),t))throw new Error("Cannot find square root");return R}const I4=WCe(Dre,void 0,void 0,{sqrt:a2e}),xf=s2e({a:BigInt(0),b:BigInt(7),Fp:I4,n:iH,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=iH,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-o2e*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,o=BigInt("0x100000000000000000000000000000000"),a=sH(s*t,e),l=sH(-r*t,e);let c=ao(t-a*n-l*i,e),u=ao(-a*r-l*s,e);const f=c>o,m=u>o;if(f&&(c=e-c),m&&(u=e-u),c>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:f,k1:c,k2neg:m,k2:u}}}},Tx);BigInt(0);xf.ProjectivePoint;const dw="0x0000000000000000000000000000000000000000",oH="0x0000000000000000000000000000000000000000000000000000000000000000",omt="",l2e=`Ethereum Signed Message:
`,aH=BigInt(0),lH=BigInt(1),P4=BigInt(2),cH=BigInt(27),uH=BigInt(28),BS=BigInt(35),Lre=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),c2e=Lre/P4,u2e=Symbol.for("nodejs.util.inspect.custom"),Hh={};function GP(t){return rd(Lr(t),32)}var cy,Zl,uy,If;const ba=class ba{constructor(e,n,r,i){je(this,cy);je(this,Zl);je(this,uy);je(this,If);uh(e,Hh,"Signature"),ge(this,cy,n),ge(this,Zl,r),ge(this,uy,i),ge(this,If,null)}get r(){return ie(this,cy)}set r(e){xe(Dg(e)===32,"invalid r","value",e),ge(this,cy,rt(e))}get s(){return xe(parseInt(ie(this,Zl).substring(0,3))<8,"non-canonical s; use ._s","s",ie(this,Zl)),ie(this,Zl)}set s(e){xe(Dg(e)===32,"invalid s","value",e),ge(this,Zl,rt(e))}get _s(){return ie(this,Zl)}isValid(){return BigInt(ie(this,Zl))<=c2e}get v(){return ie(this,uy)}set v(e){const n=Qt(e,"value");xe(n===27||n===28,"invalid v","v",e),ge(this,uy,n)}get networkV(){return ie(this,If)}get legacyChainId(){const e=this.networkV;return e==null?null:ba.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=ht(this.s);return this.yParity&&(e[0]|=128),rt(e)}get compactSerialized(){return On([this.r,this.yParityAndS])}get serialized(){return On([this.r,this.s,this.yParity?"0x1c":"0x1b"])}getCanonical(){if(this.isValid())return this;const e=Lre-BigInt(this._s),n=55-this.v,r=new ba(Hh,this.r,GP(e),n);return this.networkV&&ge(r,If,this.networkV),r}clone(){const e=new ba(Hh,this.r,this._s,this.v);return this.networkV&&ge(e,If,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}[u2e](){return this.toString()}toString(){return this.isValid()?`Signature { r: ${this.r}, s: ${this._s}, v: ${this.v} }`:`Signature { r: ${this.r}, s: ${this._s}, v: ${this.v}, valid: false }`}static getChainId(e){const n=wt(e,"v");return n==cH||n==uH?aH:(xe(n>=BS,"invalid EIP-155 v","v",e),(n-BS)/P4)}static getChainIdV(e,n){return wt(e)*P4+BigInt(35+n-27)}static getNormalizedV(e){const n=wt(e);return n===aH||n===cH?27:n===lH||n===uH?28:(xe(n>=BS,"invalid v","v",e),n&lH?27:28)}static from(e){function n(c,u){xe(c,u,"signature",e)}if(e==null)return new ba(Hh,oH,oH,27);if(typeof e=="string"){const c=ht(e,"signature");if(c.length===64){const u=rt(c.slice(0,32)),f=c.slice(32,64),m=f[0]&128?28:27;return f[0]&=127,new ba(Hh,u,rt(f),m)}if(c.length===65){const u=rt(c.slice(0,32)),f=rt(c.slice(32,64)),m=ba.getNormalizedV(c[64]);return new ba(Hh,u,f,m)}n(!1,"invalid raw signature length")}if(e instanceof ba)return e.clone();const r=e.r;n(r!=null,"missing r");const i=GP(r),s=(function(c,u){if(c!=null)return GP(c);if(u!=null){n(gr(u,32),"invalid yParityAndS");const f=ht(u);return f[0]&=127,rt(f)}n(!1,"missing s")})(e.s,e.yParityAndS),{networkV:o,v:a}=(function(c,u,f){if(c!=null){const m=wt(c);return{networkV:m>=BS?m:void 0,v:ba.getNormalizedV(m)}}if(u!=null)return n(gr(u,32),"invalid yParityAndS"),{v:ht(u)[0]&128?28:27};if(f!=null){switch(Qt(f,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}n(!1,"invalid yParity")}n(!1,"missing v")})(e.v,e.yParityAndS,e.yParity),l=new ba(Hh,i,s,a);return o&&ge(l,If,o),n(e.yParity==null||Qt(e.yParity,"sig.yParity")===l.yParity,"yParity mismatch"),n(e.yParityAndS==null||e.yParityAndS===l.yParityAndS,"yParityAndS mismatch"),l}};cy=new WeakMap,Zl=new WeakMap,uy=new WeakMap,If=new WeakMap;let qs=ba;var ku;const ap=class ap{constructor(e){je(this,ku);xe(Dg(e)===32,"invalid private key","privateKey","[REDACTED]"),ge(this,ku,rt(e))}get privateKey(){return ie(this,ku)}get publicKey(){return ap.computePublicKey(ie(this,ku))}get compressedPublicKey(){return ap.computePublicKey(ie(this,ku),!0)}sign(e){xe(Dg(e)===32,"invalid digest length","digest",e);const n=xf.sign(os(e),os(ie(this,ku)),{lowS:!0});return qs.from({r:id(n.r,32),s:id(n.s,32),v:n.recovery?28:27})}computeSharedSecret(e){const n=ap.computePublicKey(e);return rt(xf.getSharedSecret(os(ie(this,ku)),ht(n),!1))}static computePublicKey(e,n){let r=ht(e,"key");if(r.length===32){const s=xf.getPublicKey(r,!!n);return rt(s)}if(r.length===64){const s=new Uint8Array(65);s[0]=4,s.set(r,1),r=s}const i=xf.ProjectivePoint.fromHex(r);return rt(i.toRawBytes(n))}static recoverPublicKey(e,n){xe(Dg(e)===32,"invalid digest length","digest",e);const r=qs.from(n);let i=xf.Signature.fromCompact(os(On([r.r,r.s])));i=i.addRecoveryBit(r.yParity);const s=i.recoverPublicKey(os(e));return xe(s!=null,"invalid signature for digest","signature",n),"0x"+s.toHex(!1)}static addPoints(e,n,r){const i=xf.ProjectivePoint.fromHex(ap.computePublicKey(e).substring(2)),s=xf.ProjectivePoint.fromHex(ap.computePublicKey(n).substring(2));return"0x"+i.add(s).toHex(!!r)}};ku=new WeakMap;let Ec=ap;const d2e=BigInt(0),f2e=BigInt(36);function dH(t){t=t.toLowerCase();const e=t.substring(2).split(""),n=new Uint8Array(40);for(let i=0;i<40;i++)n[i]=e[i].charCodeAt(0);const r=ht(Kn(n));for(let i=0;i<40;i+=2)r[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(r[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const c8={};for(let t=0;t<10;t++)c8[String(t)]=String(t);for(let t=0;t<26;t++)c8[String.fromCharCode(65+t)]=String(10+t);const fH=15;function Bre(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(r=>c8[r]).join("");for(;e.length>=fH;){let r=e.substring(0,fH);e=parseInt(r,10)%97+e.substring(r.length)}let n=String(98-parseInt(e,10)%97);for(;n.length<2;)n="0"+n;return n}const h2e=(function(){const t={};for(let e=0;e<36;e++){const n="0123456789abcdefghijklmnopqrstuvwxyz"[e];t[n]=BigInt(e)}return t})();function p2e(t){t=t.toLowerCase();let e=d2e;for(let n=0;n<t.length;n++)e=e*f2e+h2e[t[n]];return e}function xn(t){if(xe(typeof t=="string","invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/)){t.startsWith("0x")||(t="0x"+t);const e=dH(t);return xe(!t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===t,"bad address checksum","address",t),e}if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){xe(t.substring(2,4)===Bre(t),"bad icap checksum","address",t);let e=p2e(t.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return dH("0x"+e)}xe(!1,"invalid address","address",t)}function amt(t){let e=BigInt(xn(t)).toString(36).toUpperCase();for(;e.length<30;)e="0"+e;return"XE"+Bre("XE00"+e)+e}function m2e(t){const e=xn(t.from);let r=wt(t.nonce,"tx.nonce").toString(16);return r==="0"?r="0x":r.length%2?r="0x0"+r:r="0x"+r,xn(mr(Kn(wc([e,r])),12))}function lmt(t,e,n){const r=xn(t),i=ht(e,"salt"),s=ht(n,"initCodeHash");return xe(i.length===32,"salt must be 32 bytes","salt",e),xe(s.length===32,"initCodeHash must be 32 bytes","initCodeHash",n),xn(mr(Kn(On(["0xff",r,i,s])),12))}function jre(t){return t&&typeof t.getAddress=="function"}function cmt(t){try{return xn(t),!0}catch{}return!1}async function KP(t,e){const n=await e;return(n==null||n==="0x0000000000000000000000000000000000000000")&&(Ke(typeof t!="string","unconfigured name","UNCONFIGURED_NAME",{value:t}),xe(!1,"invalid AddressLike value; did not resolve to a value address","target",t)),xn(n)}function Bi(t,e){if(typeof t=="string")return t.match(/^0x[0-9a-f]{40}$/i)?xn(t):(Ke(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),KP(t,e.resolveName(t)));if(jre(t))return KP(t,t.getAddress());if(t&&typeof t.then=="function")return KP(t,t);xe(!1,"unsupported addressable value","target",t)}const yu={};function Tt(t,e){let n=!1;return e<0&&(n=!0,e*=-1),new Ns(yu,`${n?"":"u"}int${e}`,t,{signed:n,width:e})}function jn(t,e){return new Ns(yu,`bytes${e||""}`,t,{size:e})}const hH=Symbol.for("_ethers_typed");var Mp;const xu=class xu{constructor(e,n,r,i){Se(this,"type");Se(this,"value");je(this,Mp);Se(this,"_typedSymbol");i==null&&(i=null),uh(yu,e,"Typed"),Mt(this,{_typedSymbol:hH,type:n,value:r}),ge(this,Mp,i),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return ie(this,Mp)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return ie(this,Mp)===!0?-1:ie(this,Mp)===!1?this.value.length:null}static from(e,n){return new xu(yu,e,n)}static uint8(e){return Tt(e,8)}static uint16(e){return Tt(e,16)}static uint24(e){return Tt(e,24)}static uint32(e){return Tt(e,32)}static uint40(e){return Tt(e,40)}static uint48(e){return Tt(e,48)}static uint56(e){return Tt(e,56)}static uint64(e){return Tt(e,64)}static uint72(e){return Tt(e,72)}static uint80(e){return Tt(e,80)}static uint88(e){return Tt(e,88)}static uint96(e){return Tt(e,96)}static uint104(e){return Tt(e,104)}static uint112(e){return Tt(e,112)}static uint120(e){return Tt(e,120)}static uint128(e){return Tt(e,128)}static uint136(e){return Tt(e,136)}static uint144(e){return Tt(e,144)}static uint152(e){return Tt(e,152)}static uint160(e){return Tt(e,160)}static uint168(e){return Tt(e,168)}static uint176(e){return Tt(e,176)}static uint184(e){return Tt(e,184)}static uint192(e){return Tt(e,192)}static uint200(e){return Tt(e,200)}static uint208(e){return Tt(e,208)}static uint216(e){return Tt(e,216)}static uint224(e){return Tt(e,224)}static uint232(e){return Tt(e,232)}static uint240(e){return Tt(e,240)}static uint248(e){return Tt(e,248)}static uint256(e){return Tt(e,256)}static uint(e){return Tt(e,256)}static int8(e){return Tt(e,-8)}static int16(e){return Tt(e,-16)}static int24(e){return Tt(e,-24)}static int32(e){return Tt(e,-32)}static int40(e){return Tt(e,-40)}static int48(e){return Tt(e,-48)}static int56(e){return Tt(e,-56)}static int64(e){return Tt(e,-64)}static int72(e){return Tt(e,-72)}static int80(e){return Tt(e,-80)}static int88(e){return Tt(e,-88)}static int96(e){return Tt(e,-96)}static int104(e){return Tt(e,-104)}static int112(e){return Tt(e,-112)}static int120(e){return Tt(e,-120)}static int128(e){return Tt(e,-128)}static int136(e){return Tt(e,-136)}static int144(e){return Tt(e,-144)}static int152(e){return Tt(e,-152)}static int160(e){return Tt(e,-160)}static int168(e){return Tt(e,-168)}static int176(e){return Tt(e,-176)}static int184(e){return Tt(e,-184)}static int192(e){return Tt(e,-192)}static int200(e){return Tt(e,-200)}static int208(e){return Tt(e,-208)}static int216(e){return Tt(e,-216)}static int224(e){return Tt(e,-224)}static int232(e){return Tt(e,-232)}static int240(e){return Tt(e,-240)}static int248(e){return Tt(e,-248)}static int256(e){return Tt(e,-256)}static int(e){return Tt(e,-256)}static bytes1(e){return jn(e,1)}static bytes2(e){return jn(e,2)}static bytes3(e){return jn(e,3)}static bytes4(e){return jn(e,4)}static bytes5(e){return jn(e,5)}static bytes6(e){return jn(e,6)}static bytes7(e){return jn(e,7)}static bytes8(e){return jn(e,8)}static bytes9(e){return jn(e,9)}static bytes10(e){return jn(e,10)}static bytes11(e){return jn(e,11)}static bytes12(e){return jn(e,12)}static bytes13(e){return jn(e,13)}static bytes14(e){return jn(e,14)}static bytes15(e){return jn(e,15)}static bytes16(e){return jn(e,16)}static bytes17(e){return jn(e,17)}static bytes18(e){return jn(e,18)}static bytes19(e){return jn(e,19)}static bytes20(e){return jn(e,20)}static bytes21(e){return jn(e,21)}static bytes22(e){return jn(e,22)}static bytes23(e){return jn(e,23)}static bytes24(e){return jn(e,24)}static bytes25(e){return jn(e,25)}static bytes26(e){return jn(e,26)}static bytes27(e){return jn(e,27)}static bytes28(e){return jn(e,28)}static bytes29(e){return jn(e,29)}static bytes30(e){return jn(e,30)}static bytes31(e){return jn(e,31)}static bytes32(e){return jn(e,32)}static address(e){return new xu(yu,"address",e)}static bool(e){return new xu(yu,"bool",!!e)}static bytes(e){return new xu(yu,"bytes",e)}static string(e){return new xu(yu,"string",e)}static array(e,n){throw new Error("not implemented yet")}static tuple(e,n){throw new Error("not implemented yet")}static overrides(e){return new xu(yu,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===hH}static dereference(e,n){if(xu.isTyped(e)){if(e.type!==n)throw new Error(`invalid type: expecetd ${n}, got ${e.type}`);return e.value}return e}};Mp=new WeakMap;let Ns=xu;class g2e extends wd{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,n){let r=Ns.dereference(n,"string");try{r=xn(r)}catch(i){return this._throwError(i.message,n)}return e.writeValue(r)}decode(e){return xn(id(e.readValue(),20))}}class y2e extends wd{constructor(n){super(n.name,n.type,"_",n.dynamic);Se(this,"coder");this.coder=n}defaultValue(){return this.coder.defaultValue()}encode(n,r){return this.coder.encode(n,r)}decode(n){return this.coder.decode(n)}}function Ure(t,e,n){let r=[];if(Array.isArray(n))r=n;else if(n&&typeof n=="object"){let l={};r=e.map(c=>{const u=c.localName;return Ke(u,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:c},value:n}),Ke(!l[u],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:c},value:n}),l[u]=!0,n[u]})}else xe(!1,"invalid tuple value","tuple",n);xe(e.length===r.length,"types/value length mismatch","tuple",n);let i=new S4,s=new S4,o=[];e.forEach((l,c)=>{let u=r[c];if(l.dynamic){let f=s.length;l.encode(s,u);let m=i.writeUpdatableValue();o.push(g=>{m(g+f)})}else l.encode(i,u)}),o.forEach(l=>{l(i.length)});let a=t.appendWriter(i);return a+=t.appendWriter(s),a}function Fre(t,e){let n=[],r=[],i=t.subReader(0);return e.forEach(s=>{let o=null;if(s.dynamic){let a=t.readIndex(),l=i.subReader(a);try{o=s.decode(l)}catch(c){if(ss(c,"BUFFER_OVERRUN"))throw c;o=c,o.baseType=s.name,o.name=s.localName,o.type=s.type}}else try{o=s.decode(t)}catch(a){if(ss(a,"BUFFER_OVERRUN"))throw a;o=a,o.baseType=s.name,o.name=s.localName,o.type=s.type}if(o==null)throw new Error("investigate");n.push(o),r.push(s.localName||null)}),Wy.fromItems(n,r)}class x2e extends wd{constructor(n,r,i){const s=n.type+"["+(r>=0?r:"")+"]",o=r===-1||n.dynamic;super("array",s,i,o);Se(this,"coder");Se(this,"length");Mt(this,{coder:n,length:r})}defaultValue(){const n=this.coder.defaultValue(),r=[];for(let i=0;i<this.length;i++)r.push(n);return r}encode(n,r){const i=Ns.dereference(r,"array");Array.isArray(i)||this._throwError("expected array value",i);let s=this.length;s===-1&&(s=i.length,n.writeValue(i.length)),yne(i.length,s,"coder array"+(this.localName?" "+this.localName:""));let o=[];for(let a=0;a<i.length;a++)o.push(this.coder);return Ure(n,o,i)}decode(n){let r=this.length;r===-1&&(r=n.readIndex(),Ke(r*zs<=n.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:n.bytes,offset:r*zs,length:n.dataLength}));let i=[];for(let s=0;s<r;s++)i.push(new y2e(this.coder));return Fre(n,i)}}class v2e extends wd{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,n){const r=Ns.dereference(n,"bool");return e.writeValue(r?1:0)}decode(e){return!!e.readValue()}}class $re extends wd{constructor(e,n){super(e,e,n,!0)}defaultValue(){return"0x"}encode(e,n){n=os(n);let r=e.writeValue(n.length);return r+=e.writeBytes(n),r}decode(e){return e.readBytes(e.readIndex(),!0)}}class b2e extends $re{constructor(e){super("bytes",e)}decode(e){return rt(super.decode(e))}}class w2e extends wd{constructor(n,r){let i="bytes"+String(n);super(i,i,r,!1);Se(this,"size");Mt(this,{size:n},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(n,r){let i=os(Ns.dereference(r,this.type));return i.length!==this.size&&this._throwError("incorrect data length",r),n.writeBytes(i)}decode(n){return rt(n.readBytes(this.size))}}const E2e=new Uint8Array([]);class S2e extends wd{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,n){return n!=null&&this._throwError("not null",n),e.writeBytes(E2e)}decode(e){return e.readBytes(0),null}}const A2e=BigInt(0),T2e=BigInt(1),k2e=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class C2e extends wd{constructor(n,r,i){const s=(r?"int":"uint")+n*8;super(s,s,i,!1);Se(this,"size");Se(this,"signed");Mt(this,{size:n,signed:r},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(n,r){let i=wt(Ns.dereference(r,this.type)),s=pp(k2e,zs*8);if(this.signed){let o=pp(s,this.size*8-1);(i>o||i<-(o+T2e))&&this._throwError("value out-of-bounds",r),i=wne(i,8*zs)}else(i<A2e||i>pp(s,this.size*8))&&this._throwError("value out-of-bounds",r);return n.writeValue(i)}decode(n){let r=pp(n.readValue(),this.size*8);return this.signed&&(r=MT(r,this.size*8)),r}}class N2e extends $re{constructor(e){super("string",e)}defaultValue(){return""}encode(e,n){return super.encode(e,pi(Ns.dereference(n,"string")))}decode(e){return LT(super.decode(e))}}class jS extends wd{constructor(n,r){let i=!1;const s=[];n.forEach(a=>{a.dynamic&&(i=!0),s.push(a.type)});const o="tuple("+s.join(",")+")";super("tuple",o,r,i);Se(this,"coders");Mt(this,{coders:Object.freeze(n.slice())})}defaultValue(){const n=[];this.coders.forEach(i=>{n.push(i.defaultValue())});const r=this.coders.reduce((i,s)=>{const o=s.localName;return o&&(i[o]||(i[o]=0),i[o]++),i},{});return this.coders.forEach((i,s)=>{let o=i.localName;!o||r[o]!==1||(o==="length"&&(o="_length"),n[o]==null&&(n[o]=n[s]))}),Object.freeze(n)}encode(n,r){const i=Ns.dereference(r,"tuple");return Ure(n,this.coders,i)}decode(n){return Fre(n,this.coders)}}function WP(t,e){return{address:xn(t),storageKeys:e.map((n,r)=>(xe(gr(n,32),"invalid slot",`storageKeys[${r}]`,n),n.toLowerCase()))}}function Nm(t){if(Array.isArray(t))return t.map((n,r)=>Array.isArray(n)?(xe(n.length===2,"invalid slot set",`value[${r}]`,n),WP(n[0],n[1])):(xe(n!=null&&typeof n=="object","invalid address-slot set","value",t),WP(n.address,n.storageKeys)));xe(t!=null&&typeof t=="object","invalid access list","value",t);const e=Object.keys(t).map(n=>{const r=t[n].reduce((i,s)=>(i[s]=!0,i),{});return WP(n,Object.keys(r).sort())});return e.sort((n,r)=>n.address.localeCompare(r.address)),e}function zre(t){return{address:xn(t.address),nonce:wt(t.nonce!=null?t.nonce:0),chainId:wt(t.chainId!=null?t.chainId:0),signature:qs.from(t.signature)}}function A1(t){let e;return typeof t=="string"?e=Ec.computePublicKey(t,!1):e=t.publicKey,xn(Kn("0x"+e.substring(4)).substring(26))}function ZC(t,e){return A1(Ec.recoverPublicKey(t,e))}const Di=BigInt(0),_2e=BigInt(2),I2e=BigInt(27),P2e=BigInt(28),R2e=BigInt(35),O2e=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),M2e=Symbol.for("nodejs.util.inspect.custom"),YP=4096*32,YA=128;function D2e(t){return{blobToKzgCommitment:r=>{if("computeBlobProof"in t){if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return ht(t.blobToKzgCommitment(rt(r)))}else if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return ht(t.blobToKzgCommitment(r));if("blobToKZGCommitment"in t&&typeof t.blobToKZGCommitment=="function")return ht(t.blobToKZGCommitment(rt(r)));xe(!1,"unsupported KZG library","kzg",t)},computeBlobKzgProof:(r,i)=>{if("computeBlobProof"in t&&typeof t.computeBlobProof=="function")return ht(t.computeBlobProof(rt(r),rt(i)));if("computeBlobKzgProof"in t&&typeof t.computeBlobKzgProof=="function")return t.computeBlobKzgProof(r,i);if("computeBlobKZGProof"in t&&typeof t.computeBlobKZGProof=="function")return ht(t.computeBlobKZGProof(rt(r),rt(i)));xe(!1,"unsupported KZG library","kzg",t)}}}function pH(t,e){let n=t.toString(16);for(;n.length<2;)n="0"+n;return n+=Fa(e).substring(4),"0x"+n}function Ix(t){return t==="0x"?null:xn(t)}function e2(t,e){try{return Nm(t)}catch(n){xe(!1,n.message,e,t)}}function L2e(t,e){try{if(!Array.isArray(t))throw new Error("authorizationList: invalid array");const n=[];for(let r=0;r<t.length;r++){const i=t[r];if(!Array.isArray(i))throw new Error(`authorization[${r}]: invalid array`);if(i.length!==6)throw new Error(`authorization[${r}]: wrong length`);if(!i[1])throw new Error(`authorization[${r}]: null address`);n.push({address:Ix(i[1]),nonce:sr(i[2],"nonce"),chainId:sr(i[0],"chainId"),signature:qs.from({yParity:_m(i[3],"yParity"),r:rd(i[4],32),s:rd(i[5],32)})})}return n}catch(n){xe(!1,n.message,e,t)}}function _m(t,e){return t==="0x"?0:Qt(t,e)}function sr(t,e){if(t==="0x")return Di;const n=wt(t,e);return xe(n<=O2e,"value exceeds uint size",e,n),n}function _n(t,e){const n=wt(t,"value"),r=Lr(n);return xe(r.length<=32,"value too large",`tx.${e}`,n),r}function t2(t){return Nm(t).map(e=>[e.address,e.storageKeys])}function B2e(t){return t.map(e=>[_n(e.chainId,"chainId"),e.address,_n(e.nonce,"nonce"),_n(e.signature.yParity,"yParity"),Lr(e.signature.r),Lr(e.signature._s)])}function j2e(t,e){xe(Array.isArray(t),`invalid ${e}`,"value",t);for(let n=0;n<t.length;n++)xe(gr(t[n],32),"invalid ${ param } hash",`value[${n}]`,t[n]);return t}function U2e(t){const e=E1(t);xe(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",t);const n={type:0,nonce:_m(e[0],"nonce"),gasPrice:sr(e[1],"gasPrice"),gasLimit:sr(e[2],"gasLimit"),to:Ix(e[3]),value:sr(e[4],"value"),data:rt(e[5]),chainId:Di};if(e.length===6)return n;const r=sr(e[6],"v"),i=sr(e[7],"r"),s=sr(e[8],"s");if(i===Di&&s===Di)n.chainId=r;else{let o=(r-R2e)/_2e;o<Di&&(o=Di),n.chainId=o,xe(o!==Di||r===I2e||r===P2e,"non-canonical legacy v","v",e[6]),n.signature=qs.from({r:rd(e[7],32),s:rd(e[8],32),v:r})}return n}function F2e(t,e){const n=[_n(t.nonce,"nonce"),_n(t.gasPrice||0,"gasPrice"),_n(t.gasLimit,"gasLimit"),t.to||"0x",_n(t.value,"value"),t.data];let r=Di;if(t.chainId!=Di)r=wt(t.chainId,"tx.chainId"),xe(!e||e.networkV==null||e.legacyChainId===r,"tx.chainId/sig.v mismatch","sig",e);else if(t.signature){const s=t.signature.legacyChainId;s!=null&&(r=s)}if(!e)return r!==Di&&(n.push(Lr(r)),n.push("0x"),n.push("0x")),wc(n);let i=BigInt(27+e.yParity);return r!==Di?i=qs.getChainIdV(r,e.v):BigInt(e.v)!==i&&xe(!1,"tx.chainId/sig.v mismatch","sig",e),n.push(Lr(i)),n.push(Lr(e.r)),n.push(Lr(e._s)),wc(n)}function n2(t,e){let n;try{if(n=_m(e[0],"yParity"),n!==0&&n!==1)throw new Error("bad yParity")}catch{xe(!1,"invalid yParity","yParity",e[0])}const r=rd(e[1],32),i=rd(e[2],32),s=qs.from({r,s:i,yParity:n});t.signature=s}function $2e(t){const e=E1(ht(t).slice(1));xe(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",rt(t));const n={type:2,chainId:sr(e[0],"chainId"),nonce:_m(e[1],"nonce"),maxPriorityFeePerGas:sr(e[2],"maxPriorityFeePerGas"),maxFeePerGas:sr(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:sr(e[4],"gasLimit"),to:Ix(e[5]),value:sr(e[6],"value"),data:rt(e[7]),accessList:e2(e[8],"accessList")};return e.length===9||n2(n,e.slice(9)),n}function z2e(t,e){const n=[_n(t.chainId,"chainId"),_n(t.nonce,"nonce"),_n(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),_n(t.maxFeePerGas||0,"maxFeePerGas"),_n(t.gasLimit,"gasLimit"),t.to||"0x",_n(t.value,"value"),t.data,t2(t.accessList||[])];return e&&(n.push(_n(e.yParity,"yParity")),n.push(Lr(e.r)),n.push(Lr(e.s))),On(["0x02",wc(n)])}function H2e(t){const e=E1(ht(t).slice(1));xe(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",rt(t));const n={type:1,chainId:sr(e[0],"chainId"),nonce:_m(e[1],"nonce"),gasPrice:sr(e[2],"gasPrice"),gasLimit:sr(e[3],"gasLimit"),to:Ix(e[4]),value:sr(e[5],"value"),data:rt(e[6]),accessList:e2(e[7],"accessList")};return e.length===8||n2(n,e.slice(8)),n}function V2e(t,e){const n=[_n(t.chainId,"chainId"),_n(t.nonce,"nonce"),_n(t.gasPrice||0,"gasPrice"),_n(t.gasLimit,"gasLimit"),t.to||"0x",_n(t.value,"value"),t.data,t2(t.accessList||[])];return e&&(n.push(_n(e.yParity,"recoveryParam")),n.push(Lr(e.r)),n.push(Lr(e.s))),On(["0x01",wc(n)])}function q2e(t){let e=E1(ht(t).slice(1)),n="3",r=null,i=null;if(e.length===4&&Array.isArray(e[0])){n="3 (network format)";const o=e[1],a=e[2],l=e[3];xe(Array.isArray(o),"invalid network format: blobs not an array","fields[1]",o),xe(Array.isArray(a),"invalid network format: commitments not an array","fields[2]",a),xe(Array.isArray(l),"invalid network format: proofs not an array","fields[3]",l),xe(o.length===a.length,"invalid network format: blobs/commitments length mismatch","fields",e),xe(o.length===l.length,"invalid network format: blobs/proofs length mismatch","fields",e),i=[];for(let c=0;c<e[1].length;c++)i.push({data:o[c],commitment:a[c],proof:l[c]});e=e[0]}else if(e.length===5&&Array.isArray(e[0])){n="3 (EIP-7594 network format)",r=Qt(e[1]);const o=e[2],a=e[3],l=e[4];xe(r===1,`unsupported EIP-7594 network format version: ${r}`,"fields[1]",r),xe(Array.isArray(o),"invalid EIP-7594 network format: blobs not an array","fields[2]",o),xe(Array.isArray(a),"invalid EIP-7594 network format: commitments not an array","fields[3]",a),xe(Array.isArray(l),"invalid EIP-7594 network format: proofs not an array","fields[4]",l),xe(o.length===a.length,"invalid network format: blobs/commitments length mismatch","fields",e),xe(o.length*YA===l.length,"invalid network format: blobs/proofs length mismatch","fields",e),i=[];for(let c=0;c<o.length;c++){const u=[];for(let f=0;f<YA;f++)u.push(l[c*YA+f]);i.push({data:o[c],commitment:a[c],proof:On(u)})}e=e[0]}xe(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${n}`,"data",rt(t));const s={type:3,chainId:sr(e[0],"chainId"),nonce:_m(e[1],"nonce"),maxPriorityFeePerGas:sr(e[2],"maxPriorityFeePerGas"),maxFeePerGas:sr(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:sr(e[4],"gasLimit"),to:Ix(e[5]),value:sr(e[6],"value"),data:rt(e[7]),accessList:e2(e[8],"accessList"),maxFeePerBlobGas:sr(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10],blobWrapperVersion:r};i&&(s.blobs=i),xe(s.to!=null,`invalid address for transaction type: ${n}`,"data",t),xe(Array.isArray(s.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",t);for(let o=0;o<s.blobVersionedHashes.length;o++)xe(gr(s.blobVersionedHashes[o],32),`invalid blobVersionedHash at index ${o}: must be length 32`,"data",t);return e.length===11||n2(s,e.slice(11)),s}function G2e(t,e,n){const r=[_n(t.chainId,"chainId"),_n(t.nonce,"nonce"),_n(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),_n(t.maxFeePerGas||0,"maxFeePerGas"),_n(t.gasLimit,"gasLimit"),t.to||dw,_n(t.value,"value"),t.data,t2(t.accessList||[]),_n(t.maxFeePerBlobGas||0,"maxFeePerBlobGas"),j2e(t.blobVersionedHashes||[],"blobVersionedHashes")];if(e&&(r.push(_n(e.yParity,"yParity")),r.push(Lr(e.r)),r.push(Lr(e.s)),n)){if(t.blobWrapperVersion!=null){const i=Lr(t.blobWrapperVersion),s=[];for(const{proof:o}of n){const a=ht(o),l=a.length/YA;for(let c=0;c<a.length;c+=l)s.push(a.subarray(c,c+l))}return On(["0x03",wc([r,i,n.map(o=>o.data),n.map(o=>o.commitment),s])])}return On(["0x03",wc([r,n.map(i=>i.data),n.map(i=>i.commitment),n.map(i=>i.proof)])])}return On(["0x03",wc(r)])}function K2e(t){const e=E1(ht(t).slice(1));xe(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",rt(t));const n={type:4,chainId:sr(e[0],"chainId"),nonce:_m(e[1],"nonce"),maxPriorityFeePerGas:sr(e[2],"maxPriorityFeePerGas"),maxFeePerGas:sr(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:sr(e[4],"gasLimit"),to:Ix(e[5]),value:sr(e[6],"value"),data:rt(e[7]),accessList:e2(e[8],"accessList"),authorizationList:L2e(e[9],"authorizationList")};return e.length===10||n2(n,e.slice(10)),n}function W2e(t,e){const n=[_n(t.chainId,"chainId"),_n(t.nonce,"nonce"),_n(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),_n(t.maxFeePerGas||0,"maxFeePerGas"),_n(t.gasLimit,"gasLimit"),t.to||"0x",_n(t.value,"value"),t.data,t2(t.accessList||[]),B2e(t.authorizationList||[])];return e&&(n.push(_n(e.yParity,"yParity")),n.push(Lr(e.r)),n.push(Lr(e.s))),On(["0x04",wc(n)])}var ll,dy,fy,hy,py,my,gy,yy,xy,vy,by,wy,Dp,Pf,ec,Rf,Ey,Sy,Ay,JA,jo;let u8=(jo=class{constructor(){je(this,Ay);je(this,ll);je(this,dy);je(this,fy);je(this,hy);je(this,py);je(this,my);je(this,gy);je(this,yy);je(this,xy);je(this,vy);je(this,by);je(this,wy);je(this,Dp);je(this,Pf);je(this,ec);je(this,Rf);je(this,Ey);je(this,Sy);ge(this,ll,null),ge(this,dy,null),ge(this,hy,0),ge(this,py,Di),ge(this,my,null),ge(this,gy,null),ge(this,yy,null),ge(this,fy,"0x"),ge(this,xy,Di),ge(this,vy,Di),ge(this,by,null),ge(this,wy,null),ge(this,Dp,null),ge(this,Pf,null),ge(this,ec,null),ge(this,Rf,null),ge(this,Ey,null),ge(this,Sy,null)}get type(){return ie(this,ll)}set type(e){switch(e){case null:ge(this,ll,null);break;case 0:case"legacy":ge(this,ll,0);break;case 1:case"berlin":case"eip-2930":ge(this,ll,1);break;case 2:case"london":case"eip-1559":ge(this,ll,2);break;case 3:case"cancun":case"eip-4844":ge(this,ll,3);break;case 4:case"pectra":case"eip-7702":ge(this,ll,4);break;default:xe(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=ie(this,dy);return e==null&&this.type===3?dw:e}set to(e){ge(this,dy,e==null?null:xn(e))}get nonce(){return ie(this,hy)}set nonce(e){ge(this,hy,Qt(e,"value"))}get gasLimit(){return ie(this,py)}set gasLimit(e){ge(this,py,wt(e))}get gasPrice(){const e=ie(this,my);return e==null&&(this.type===0||this.type===1)?Di:e}set gasPrice(e){ge(this,my,e==null?null:wt(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=ie(this,gy);return e??(this.type===2||this.type===3?Di:null)}set maxPriorityFeePerGas(e){ge(this,gy,e==null?null:wt(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=ie(this,yy);return e??(this.type===2||this.type===3?Di:null)}set maxFeePerGas(e){ge(this,yy,e==null?null:wt(e,"maxFeePerGas"))}get data(){return ie(this,fy)}set data(e){ge(this,fy,rt(e))}get value(){return ie(this,xy)}set value(e){ge(this,xy,wt(e,"value"))}get chainId(){return ie(this,vy)}set chainId(e){ge(this,vy,wt(e))}get signature(){return ie(this,by)||null}set signature(e){ge(this,by,e==null?null:qs.from(e))}isValid(){const e=this.signature;if(e&&!e.isValid())return!1;const n=this.authorizationList;if(n){for(const r of n)if(!r.signature.isValid())return!1}return!0}get accessList(){const e=ie(this,wy)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){ge(this,wy,e==null?null:Nm(e))}get authorizationList(){const e=ie(this,Ey)||null;return e==null&&this.type===4?[]:e}set authorizationList(e){ge(this,Ey,e==null?null:e.map(n=>zre(n)))}get maxFeePerBlobGas(){const e=ie(this,Dp);return e==null&&this.type===3?Di:e}set maxFeePerBlobGas(e){ge(this,Dp,e==null?null:wt(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=ie(this,Pf);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){xe(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let n=0;n<e.length;n++)xe(gr(e[n],32),"invalid blobVersionedHash",`value[${n}]`,e[n])}ge(this,Pf,e)}get blobs(){return ie(this,Rf)==null?null:ie(this,Rf).map(e=>Object.assign({},e))}set blobs(e){if(e==null){ge(this,Rf,null);return}const n=[],r=[];for(let i=0;i<e.length;i++){const s=e[i];if(KC(s)){Ke(ie(this,ec),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=ht(s);if(xe(o.length<=YP,"blob is too large",`blobs[${i}]`,s),o.length!==YP){const c=new Uint8Array(YP);c.set(o),o=c}const a=ie(this,ec).blobToKzgCommitment(o),l=rt(ie(this,ec).computeBlobKzgProof(o,a));n.push({data:rt(o),commitment:rt(a),proof:l}),r.push(pH(1,a))}else{const o=rt(s.data),a=rt(s.commitment),l=rt(s.proof);n.push({data:o,commitment:a,proof:l}),r.push(pH(1,a))}}ge(this,Rf,n),ge(this,Pf,r)}get kzg(){return ie(this,ec)}set kzg(e){e==null?ge(this,ec,null):ge(this,ec,D2e(e))}get blobWrapperVersion(){return ie(this,Sy)}set blobWrapperVersion(e){ge(this,Sy,e)}get hash(){return this.signature==null?null:Kn(tt(this,Ay,JA).call(this,!0,!1))}get unsignedHash(){return Kn(this.unsignedSerialized)}get from(){return this.signature==null?null:ZC(this.unsignedHash,this.signature.getCanonical())}get fromPublicKey(){return this.signature==null?null:Ec.recoverPublicKey(this.unsignedHash,this.signature.getCanonical())}isSigned(){return this.signature!=null}get serialized(){return tt(this,Ay,JA).call(this,!0,!0)}get unsignedSerialized(){return tt(this,Ay,JA).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,n=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,r=this.accessList!=null,i=ie(this,Dp)!=null||ie(this,Pf);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&Ke(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),Ke(!n||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),Ke(this.type!==0||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const s=[];return this.type!=null?s.push(this.type):this.authorizationList&&this.authorizationList.length?s.push(4):n?s.push(2):e?(s.push(1),r||s.push(0)):r?(s.push(1),s.push(2)):(i&&this.to||(s.push(0),s.push(1),s.push(2)),s.push(3)),s.sort(),s}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return jo.from(this)}toJSON(){const e=n=>n==null?null:n.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}[M2e](){return this.toString()}toString(){const e=[],n=i=>{let s=this[i];typeof s=="string"&&(s=JSON.stringify(s)),e.push(`${i}: ${s}`)};this.type&&n("type"),n("to"),n("data"),n("nonce"),n("gasLimit"),n("value"),this.chainId!=null&&n("chainId"),this.signature&&(n("from"),e.push(`signature: ${this.signature.toString()}`));const r=this.authorizationList;if(r){const i=[];for(const s of r){const o=[];o.push(`address: ${JSON.stringify(s.address)}`),s.nonce!=null&&o.push(`nonce: ${s.nonce}`),s.chainId!=null&&o.push(`chainId: ${s.chainId}`),s.signature&&o.push(`signature: ${s.signature.toString()}`),i.push(`Authorization { ${o.join(", ")} }`)}e.push(`authorizations: [ ${i.join(", ")} ]`)}return`Transaction { ${e.join(", ")} }`}static from(e){if(e==null)return new jo;if(typeof e=="string"){const r=ht(e);if(r[0]>=127)return jo.from(U2e(r));switch(r[0]){case 1:return jo.from(H2e(r));case 2:return jo.from($2e(r));case 3:return jo.from(q2e(r));case 4:return jo.from(K2e(r))}Ke(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const n=new jo;return e.type!=null&&(n.type=e.type),e.to!=null&&(n.to=e.to),e.nonce!=null&&(n.nonce=e.nonce),e.gasLimit!=null&&(n.gasLimit=e.gasLimit),e.gasPrice!=null&&(n.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(n.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(n.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(n.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(n.data=e.data),e.value!=null&&(n.value=e.value),e.chainId!=null&&(n.chainId=e.chainId),e.signature!=null&&(n.signature=qs.from(e.signature)),e.accessList!=null&&(n.accessList=e.accessList),e.authorizationList!=null&&(n.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(n.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(n.kzg=e.kzg),e.blobWrapperVersion!=null&&(n.blobWrapperVersion=e.blobWrapperVersion),e.blobs!=null&&(n.blobs=e.blobs),e.hash!=null&&(xe(n.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),xe(n.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(xe(n.isSigned(),"unsigned transaction cannot define '.from'","tx",e),xe(n.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),n}},ll=new WeakMap,dy=new WeakMap,fy=new WeakMap,hy=new WeakMap,py=new WeakMap,my=new WeakMap,gy=new WeakMap,yy=new WeakMap,xy=new WeakMap,vy=new WeakMap,by=new WeakMap,wy=new WeakMap,Dp=new WeakMap,Pf=new WeakMap,ec=new WeakMap,Rf=new WeakMap,Ey=new WeakMap,Sy=new WeakMap,Ay=new WeakSet,JA=function(e,n){Ke(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const r=e?this.signature:null;switch(this.inferType()){case 0:return F2e(this,r);case 1:return V2e(this,r);case 2:return z2e(this,r);case 3:return G2e(this,r,n?this.blobs:null);case 4:return W2e(this,r)}Ke(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})},jo);function Hre(t){return xe(typeof t.address=="string","invalid address for hashAuthorization","auth.address",t),Kn(On(["0x05",wc([t.chainId!=null?Lr(t.chainId):"0x",xn(t.address),t.nonce!=null?Lr(t.nonce):"0x"])]))}function umt(t,e){return ZC(Hre(t),e)}function od(t){return Kn(pi(t))}var Y2e="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const mH=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),gH=4;function J2e(t){let e=0;function n(){return t[e++]<<8|t[e++]}let r=n(),i=1,s=[0,1];for(let j=1;j<r;j++)s.push(i+=n());let o=n(),a=e;e+=o;let l=0,c=0;function u(){return l==0&&(c=c<<8|t[e++],l=8),c>>--l&1}const f=31,m=2**f,g=m>>>1,x=g>>1,v=m-1;let w=0;for(let j=0;j<f;j++)w=w<<1|u();let E=[],C=0,k=m;for(;;){let j=Math.floor(((w-C+1)*i-1)/k),R=0,U=r;for(;U-R>1;){let $=R+U>>>1;j<s[$]?U=$:R=$}if(R==0)break;E.push(R);let V=C+Math.floor(k*s[R]/i),F=C+Math.floor(k*s[R+1]/i)-1;for(;((V^F)&g)==0;)w=w<<1&v|u(),V=V<<1&v,F=F<<1&v|1;for(;V&~F&x;)w=w&g|w<<1&v>>>1|u(),V=V<<1^g,F=(F^g)<<1|g|1;C=V,k=1+F-V}let O=r-4;return E.map(j=>{switch(j-O){case 3:return O+65792+(t[a++]<<16|t[a++]<<8|t[a++]);case 2:return O+256+(t[a++]<<8|t[a++]);case 1:return O+t[a++];default:return j-1}})}function X2e(t){let e=0;return()=>t[e++]}function Vre(t){return X2e(J2e(Q2e(t)))}function Q2e(t){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((i,s)=>e[i.charCodeAt(0)]=s);let n=t.length,r=new Uint8Array(6*n>>3);for(let i=0,s=0,o=0,a=0;i<n;i++)a=a<<6|e[t.charCodeAt(i)],o+=6,o>=8&&(r[s++]=a>>(o-=8));return r}function Z2e(t){return t&1?~t>>1:t>>1}function eNe(t,e){let n=Array(t);for(let r=0,i=0;r<t;r++)n[r]=i+=Z2e(e());return n}function fw(t,e=0){let n=[];for(;;){let r=t(),i=t();if(!i)break;e+=r;for(let s=0;s<i;s++)n.push(e+s);e+=i+1}return n}function qre(t){return hw(()=>{let e=fw(t);if(e.length)return e})}function Gre(t){let e=[];for(;;){let n=t();if(n==0)break;e.push(tNe(n,t))}for(;;){let n=t()-1;if(n<0)break;e.push(nNe(n,t))}return e.flat()}function hw(t){let e=[];for(;;){let n=t(e.length);if(!n)break;e.push(n)}return e}function Kre(t,e,n){let r=Array(t).fill().map(()=>[]);for(let i=0;i<e;i++)eNe(t,n).forEach((s,o)=>r[o].push(s));return r}function tNe(t,e){let n=1+e(),r=e(),i=hw(e);return Kre(i.length,1+t,e).flatMap((o,a)=>{let[l,...c]=o;return Array(i[a]).fill().map((u,f)=>{let m=f*r;return[l+f*n,c.map(g=>g+m)]})})}function nNe(t,e){let n=1+e();return Kre(n,1+t,e).map(i=>[i[0],i.slice(1)])}function rNe(t){let e=[],n=fw(t);return i(r([]),[]),e;function r(s){let o=t(),a=hw(()=>{let l=fw(t).map(c=>n[c]);if(l.length)return r(l)});return{S:o,B:a,Q:s}}function i({S:s,B:o},a,l){if(!(s&4&&l===a[a.length-1])){s&2&&(l=a[a.length-1]),s&1&&e.push(a);for(let c of o)for(let u of c.Q)i(c,[...a,u],l)}}}function iNe(t){return t.toString(16).toUpperCase().padStart(2,"0")}function Wre(t){return`{${iNe(t)}}`}function sNe(t){let e=[];for(let n=0,r=t.length;n<r;){let i=t.codePointAt(n);n+=i<65536?1:2,e.push(i)}return e}function ex(t){let n=t.length;if(n<4096)return String.fromCodePoint(...t);let r=[];for(let i=0;i<n;)r.push(String.fromCodePoint(...t.slice(i,i+=4096)));return r.join("")}function oNe(t,e){let n=t.length,r=n-e.length;for(let i=0;r==0&&i<n;i++)r=t[i]-e[i];return r}var aNe="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const pw=44032,jT=4352,UT=4449,FT=4519,Yre=19,Jre=21,tx=28,$T=Jre*tx,lNe=Yre*$T,cNe=pw+lNe,uNe=jT+Yre,dNe=UT+Jre,fNe=FT+tx;function Eb(t){return t>>24&255}function Xre(t){return t&16777215}let R4,yH,O4,XA;function hNe(){let t=Vre(aNe);R4=new Map(qre(t).flatMap((e,n)=>e.map(r=>[r,n+1<<24]))),yH=new Set(fw(t)),O4=new Map,XA=new Map;for(let[e,n]of Gre(t)){if(!yH.has(e)&&n.length==2){let[r,i]=n,s=XA.get(r);s||(s=new Map,XA.set(r,s)),s.set(i,e)}O4.set(e,n.reverse())}}function Qre(t){return t>=pw&&t<cNe}function pNe(t,e){if(t>=jT&&t<uNe&&e>=UT&&e<dNe)return pw+(t-jT)*$T+(e-UT)*tx;if(Qre(t)&&e>FT&&e<fNe&&(t-pw)%tx==0)return t+(e-FT);{let n=XA.get(t);return n&&(n=n.get(e),n)?n:-1}}function Zre(t){R4||hNe();let e=[],n=[],r=!1;function i(s){let o=R4.get(s);o&&(r=!0,s|=o),e.push(s)}for(let s of t)for(;;){if(s<128)e.push(s);else if(Qre(s)){let o=s-pw,a=o/$T|0,l=o%$T/tx|0,c=o%tx;i(jT+a),i(UT+l),c>0&&i(FT+c)}else{let o=O4.get(s);o?n.push(...o):i(s)}if(!n.length)break;s=n.pop()}if(r&&e.length>1){let s=Eb(e[0]);for(let o=1;o<e.length;o++){let a=Eb(e[o]);if(a==0||s<=a){s=a;continue}let l=o-1;for(;;){let c=e[l+1];if(e[l+1]=e[l],e[l]=c,!l||(s=Eb(e[--l]),s<=a))break}s=Eb(e[o])}}return e}function mNe(t){let e=[],n=[],r=-1,i=0;for(let s of t){let o=Eb(s),a=Xre(s);if(r==-1)o==0?r=a:e.push(a);else if(i>0&&i>=o)o==0?(e.push(r,...n),n.length=0,r=a):n.push(a),i=o;else{let l=pNe(r,a);l>=0?r=l:i==0&&o==0?(e.push(r),r=a):(n.push(a),i=o)}}return r>=0&&e.push(r,...n),e}function eie(t){return Zre(t).map(Xre)}function gNe(t){return mNe(Zre(t))}const xH=45,tie=".",nie=65039,rie=1,zT=t=>Array.from(t);function mw(t,e){return t.P.has(e)||t.Q.has(e)}class yNe extends Array{get is_emoji(){return!0}}let M4,iie,gp,D4,sie,jg,JP,ng,Xh,vH,L4;function d8(){if(M4)return;let t=Vre(Y2e);const e=()=>fw(t),n=()=>new Set(e()),r=(u,f)=>f.forEach(m=>u.add(m));M4=new Map(Gre(t)),iie=n(),gp=e(),D4=new Set(e().map(u=>gp[u])),gp=new Set(gp),sie=n(),n();let i=qre(t),s=t();const o=()=>{let u=new Set;return e().forEach(f=>r(u,i[f])),r(u,e()),u};jg=hw(u=>{let f=hw(t).map(m=>m+96);if(f.length){let m=u>=s;f[0]-=32,f=ex(f),m&&(f=`Restricted[${f}]`);let g=o(),x=o(),v=!t();return{N:f,P:g,Q:x,M:v,R:m}}}),JP=n(),ng=new Map;let a=e().concat(zT(JP)).sort((u,f)=>u-f);a.forEach((u,f)=>{let m=t(),g=a[f]=m?a[f-m]:{V:[],M:new Map};g.V.push(u),JP.has(u)||ng.set(u,g)});for(let{V:u,M:f}of new Set(ng.values())){let m=[];for(let x of u){let v=jg.filter(E=>mw(E,x)),w=m.find(({G:E})=>v.some(C=>E.has(C)));w||(w={G:new Set,V:[]},m.push(w)),w.V.push(x),r(w.G,v)}let g=m.flatMap(x=>zT(x.G));for(let{G:x,V:v}of m){let w=new Set(g.filter(E=>!x.has(E)));for(let E of v)f.set(E,w)}}Xh=new Set;let l=new Set;const c=u=>Xh.has(u)?l.add(u):Xh.add(u);for(let u of jg){for(let f of u.P)c(f);for(let f of u.Q)c(f)}for(let u of Xh)!ng.has(u)&&!l.has(u)&&ng.set(u,rie);r(Xh,eie(Xh)),vH=rNe(t).map(u=>yNe.from(u)).sort(oNe),L4=new Map;for(let u of vH){let f=[L4];for(let m of u){let g=f.map(x=>{let v=x.get(m);return v||(v=new Map,x.set(m,v)),v});m===nie?f.push(...g):f=g}for(let m of f)m.V=u}}function f8(t){return(oie(t)?"":`${h8(r2([t]))} `)+Wre(t)}function h8(t){return`"${t}"`}function xNe(t){if(t.length>=4&&t[2]==xH&&t[3]==xH)throw new Error(`invalid label extension: "${ex(t.slice(0,4))}"`)}function vNe(t){for(let n=t.lastIndexOf(95);n>0;)if(t[--n]!==95)throw new Error("underscore allowed only at start")}function bNe(t){let e=t[0],n=mH.get(e);if(n)throw zb(`leading ${n}`);let r=t.length,i=-1;for(let s=1;s<r;s++){e=t[s];let o=mH.get(e);if(o){if(i==s)throw zb(`${n} + ${o}`);i=s+1,n=o}}if(i==r)throw zb(`trailing ${n}`)}function r2(t,e=1/0,n=Wre){let r=[];wNe(t[0])&&r.push(""),t.length>e&&(e>>=1,t=[...t.slice(0,e),8230,...t.slice(-e)]);let i=0,s=t.length;for(let o=0;o<s;o++){let a=t[o];oie(a)&&(r.push(ex(t.slice(i,o))),r.push(n(a)),i=o+1)}return r.push(ex(t.slice(i,s))),r.join("")}function wNe(t){return d8(),gp.has(t)}function oie(t){return d8(),sie.has(t)}function ENe(t){return kNe(SNe(t,gNe,_Ne))}function SNe(t,e,n){if(!t)return[];d8();let r=0;return t.split(tie).map(i=>{let s=sNe(i),o={input:s,offset:r};r+=s.length+1;try{let a=o.tokens=NNe(s,e,n),l=a.length,c;if(!l)throw new Error("empty label");let u=o.output=a.flat();if(vNe(u),!(o.emoji=l>1||a[0].is_emoji)&&u.every(m=>m<128))xNe(u),c="ASCII";else{let m=a.flatMap(g=>g.is_emoji?[]:g);if(!m.length)c="Emoji";else{if(gp.has(u[0]))throw zb("leading combining mark");for(let v=1;v<l;v++){let w=a[v];if(!w.is_emoji&&gp.has(w[0]))throw zb(`emoji + combining mark: "${ex(a[v-1])} + ${r2([w[0]])}"`)}bNe(u);let g=zT(new Set(m)),[x]=TNe(g);CNe(x,m),ANe(x,g),c=x.N}}o.type=c}catch(a){o.error=a}return o})}function ANe(t,e){let n,r=[];for(let i of e){let s=ng.get(i);if(s===rie)return;if(s){let o=s.M.get(i);if(n=n?n.filter(a=>o.has(a)):zT(o),!n.length)return}else r.push(i)}if(n){for(let i of n)if(r.every(s=>mw(i,s)))throw new Error(`whole-script confusable: ${t.N}/${i.N}`)}}function TNe(t){let e=jg;for(let n of t){let r=e.filter(i=>mw(i,n));if(!r.length)throw jg.some(i=>mw(i,n))?lie(e[0],n):aie(n);if(e=r,r.length==1)break}return e}function kNe(t){return t.map(({input:e,error:n,output:r})=>{if(n){let i=n.message;throw new Error(t.length==1?i:`Invalid label ${h8(r2(e,63))}: ${i}`)}return ex(r)}).join(tie)}function aie(t){return new Error(`disallowed character: ${f8(t)}`)}function lie(t,e){let n=f8(e),r=jg.find(i=>i.P.has(e));return r&&(n=`${r.N} ${n}`),new Error(`illegal mixture: ${t.N} + ${n}`)}function zb(t){return new Error(`illegal placement: ${t}`)}function CNe(t,e){for(let n of e)if(!mw(t,n))throw lie(t,n);if(t.M){let n=eie(e);for(let r=1,i=n.length;r<i;r++)if(D4.has(n[r])){let s=r+1;for(let o;s<i&&D4.has(o=n[s]);s++)for(let a=r;a<s;a++)if(n[a]==o)throw new Error(`duplicate non-spacing marks: ${f8(o)}`);if(s-r>gH)throw new Error(`excessive non-spacing marks: ${h8(r2(n.slice(r-1,s)))} (${s-r}/${gH})`);r=s}}}function NNe(t,e,n){let r=[],i=[];for(t=t.slice().reverse();t.length;){let s=INe(t);if(s)i.length&&(r.push(e(i)),i=[]),r.push(n(s));else{let o=t.pop();if(Xh.has(o))i.push(o);else{let a=M4.get(o);if(a)i.push(...a);else if(!iie.has(o))throw aie(o)}}}return i.length&&r.push(e(i)),r}function _Ne(t){return t.filter(e=>e!=nie)}function INe(t,e){let n=L4,r,i=t.length;for(;i&&(n=n.get(t[--i]),!!n);){let{V:s}=n;s&&(r=s,t.length=i)}return r}const cie=new Uint8Array(32);cie.fill(0);function bH(t){return xe(t.length!==0,"invalid ENS name; empty component","comp",t),t}function p8(t){const e=pi(PNe(t)),n=[];if(t.length===0)return n;let r=0;for(let i=0;i<e.length;i++)e[i]===46&&(n.push(bH(e.slice(r,i))),r=i+1);return xe(r<e.length,"invalid ENS name; empty component","name",t),n.push(bH(e.slice(r))),n}function PNe(t){try{if(t.length===0)throw new Error("empty label");return ENe(t)}catch(e){xe(!1,`invalid ENS name (${e.message})`,"name",t)}}function dmt(t){try{return p8(t).length!==0}catch{}return!1}function B4(t){xe(typeof t=="string","invalid ENS name; not a string","name",t),xe(t.length,"invalid ENS name (empty label)","name",t);let e=cie;const n=p8(t);for(;n.length;)e=Kn(On([e,Kn(n.pop())]));return rt(e)}function RNe(t,e){const n=e??63;return xe(n<=255,"DNS encoded label cannot exceed 255","length",n),rt(On(p8(t).map(r=>{xe(r.length<=n,`label ${JSON.stringify(t)} exceeds ${n} bytes`,"name",t);const i=new Uint8Array(r.length+1);return i.set(r,1),i[0]=i.length-1,i})))+"00"}function uie(t){return typeof t=="string"&&(t=pi(t)),Kn(On([pi(l2e),pi(String(t.length)),t]))}function fmt(t,e){const n=uie(t);return ZC(n,e)}const die=new Uint8Array(32);die.fill(0);const ONe=BigInt(-1),fie=BigInt(0),hie=BigInt(1),MNe=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function DNe(t){const e=ht(t),n=e.length%32;return n?On([e,die.slice(n)]):rt(e)}const LNe=id(hie,32),BNe=id(fie,32),wH={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},XP=["name","version","chainId","verifyingContract","salt"];function EH(t){return function(e){return xe(typeof e=="string",`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const jNe={name:EH("name"),version:EH("version"),chainId:function(t){const e=wt(t,"domain.chainId");return xe(e>=0,"invalid chain ID","domain.chainId",t),Number.isSafeInteger(e)?Number(e):fl(e)},verifyingContract:function(t){try{return xn(t).toLowerCase()}catch{}xe(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){const e=ht(t,"domain.salt");return xe(e.length===32,'invalid domain value "salt"',"domain.salt",t),rt(e)}};function QP(t){{const e=t.match(/^(u?)int(\d+)$/);if(e){const n=e[1]==="",r=parseInt(e[2]);xe(r%8===0&&r!==0&&r<=256&&e[2]===String(r),"invalid numeric width","type",t);const i=pp(MNe,n?r-1:r),s=n?(i+hie)*ONe:fie;return function(o){const a=wt(o,"value");return xe(a>=s&&a<=i,`value out-of-bounds for ${t}`,"value",a),id(n?wne(a,256):a,32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const n=parseInt(e[1]);return xe(n!==0&&n<=32&&e[1]===String(n),"invalid bytes width","type",t),function(r){const i=ht(r);return xe(i.length===n,`invalid length for ${t}`,"value",r),DNe(r)}}}switch(t){case"address":return function(e){return rd(xn(e),32)};case"bool":return function(e){return e?LNe:BNe};case"bytes":return function(e){return Kn(e)};case"string":return function(e){return od(e)}}return null}function SH(t,e){return`${t}(${e.map(({name:n,type:r})=>r+" "+n).join(",")})`}function US(t){const e=t.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:t}}var Zw,Cu,Ty,_C,pie;const wa=class wa{constructor(e){je(this,_C);Se(this,"primaryType");je(this,Zw);je(this,Cu);je(this,Ty);ge(this,Cu,new Map),ge(this,Ty,new Map);const n=new Map,r=new Map,i=new Map,s={};Object.keys(e).forEach(l=>{s[l]=e[l].map(({name:c,type:u})=>{let{base:f,index:m}=US(u);return f==="int"&&!e.int&&(f="int256"),f==="uint"&&!e.uint&&(f="uint256"),{name:c,type:f+(m||"")}}),n.set(l,new Set),r.set(l,[]),i.set(l,new Set)}),ge(this,Zw,JSON.stringify(s));for(const l in s){const c=new Set;for(const u of s[l]){xe(!c.has(u.name),`duplicate variable name ${JSON.stringify(u.name)} in ${JSON.stringify(l)}`,"types",e),c.add(u.name);const f=US(u.type).base;xe(f!==l,`circular type reference to ${JSON.stringify(f)}`,"types",e),!QP(f)&&(xe(r.has(f),`unknown type ${JSON.stringify(f)}`,"types",e),r.get(f).push(l),n.get(l).add(f))}}const o=Array.from(r.keys()).filter(l=>r.get(l).length===0);xe(o.length!==0,"missing primary type","types",e),xe(o.length===1,`ambiguous primary types or unused types: ${o.map(l=>JSON.stringify(l)).join(", ")}`,"types",e),Mt(this,{primaryType:o[0]});function a(l,c){xe(!c.has(l),`circular type reference to ${JSON.stringify(l)}`,"types",e),c.add(l);for(const u of n.get(l))if(r.has(u)){a(u,c);for(const f of c)i.get(f).add(u)}c.delete(l)}a(this.primaryType,new Set);for(const[l,c]of i){const u=Array.from(c);u.sort(),ie(this,Cu).set(l,SH(l,s[l])+u.map(f=>SH(f,s[f])).join(""))}}get types(){return JSON.parse(ie(this,Zw))}getEncoder(e){let n=ie(this,Ty).get(e);return n||(n=tt(this,_C,pie).call(this,e),ie(this,Ty).set(e,n)),n}encodeType(e){const n=ie(this,Cu).get(e);return xe(n,`unknown type: ${JSON.stringify(e)}`,"name",e),n}encodeData(e,n){return this.getEncoder(e)(n)}hashStruct(e,n){return Kn(this.encodeData(e,n))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,n,r){if(QP(e))return r(e,n);const i=US(e).array;if(i)return xe(i.count===-1||i.count===n.length,`array length mismatch; expected length ${i.count}`,"value",n),n.map(o=>this._visit(i.prefix,o,r));const s=this.types[e];if(s)return s.reduce((o,{name:a,type:l})=>(o[a]=this._visit(l,n[a],r),o),{});xe(!1,`unknown type: ${e}`,"type",e)}visit(e,n){return this._visit(this.primaryType,e,n)}static from(e){return new wa(e)}static getPrimaryType(e){return wa.from(e).primaryType}static hashStruct(e,n,r){return wa.from(n).hashStruct(e,r)}static hashDomain(e){const n=[];for(const r in e){if(e[r]==null)continue;const i=wH[r];xe(i,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),n.push({name:r,type:i})}return n.sort((r,i)=>XP.indexOf(r.name)-XP.indexOf(i.name)),wa.hashStruct("EIP712Domain",{EIP712Domain:n},e)}static encode(e,n,r){return On(["0x1901",wa.hashDomain(e),wa.from(n).hash(r)])}static hash(e,n,r){return Kn(wa.encode(e,n,r))}static async resolveNames(e,n,r,i){e=Object.assign({},e);for(const a in e)e[a]==null&&delete e[a];const s={};e.verifyingContract&&!gr(e.verifyingContract,20)&&(s[e.verifyingContract]="0x");const o=wa.from(n);o.visit(r,(a,l)=>(a==="address"&&!gr(l,20)&&(s[l]="0x"),l));for(const a in s)s[a]=await i(a);return e.verifyingContract&&s[e.verifyingContract]&&(e.verifyingContract=s[e.verifyingContract]),r=o.visit(r,(a,l)=>a==="address"&&s[l]?s[l]:l),{domain:e,value:r}}static getPayload(e,n,r){wa.hashDomain(e);const i={},s=[];XP.forEach(l=>{const c=e[l];c!=null&&(i[l]=jNe[l](c),s.push({name:l,type:wH[l]}))});const o=wa.from(n);n=o.types;const a=Object.assign({},n);return xe(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",n),a.EIP712Domain=s,o.encode(r),{types:a,domain:i,primaryType:o.primaryType,message:o.visit(r,(l,c)=>{if(l.match(/^bytes(\d*)/))return rt(ht(c));if(l.match(/^u?int/))return wt(c).toString();switch(l){case"address":return c.toLowerCase();case"bool":return!!c;case"string":return xe(typeof c=="string","invalid string","value",c),c}xe(!1,"unsupported type","type",l)})}}};Zw=new WeakMap,Cu=new WeakMap,Ty=new WeakMap,_C=new WeakSet,pie=function(e){{const i=QP(e);if(i)return i}const n=US(e).array;if(n){const i=n.prefix,s=this.getEncoder(i);return o=>{xe(n.count===-1||n.count===o.length,`array length mismatch; expected length ${n.count}`,"value",o);let a=o.map(s);return ie(this,Cu).has(i)&&(a=a.map(Kn)),Kn(On(a))}}const r=this.types[e];if(r){const i=od(ie(this,Cu).get(e));return s=>{const o=r.map(({name:a,type:l})=>{const c=this.getEncoder(l)(s[a]);return ie(this,Cu).has(l)?Kn(c):c});return o.unshift(i),On(o)}}xe(!1,`unknown type: ${e}`,"type",e)};let om=wa;function hmt(t,e,n,r){return ZC(om.hash(t,e,n),r)}function Hs(t){const e=new Set;return t.forEach(n=>e.add(n)),Object.freeze(e)}const UNe="external public payable override",FNe=Hs(UNe.split(" ")),mie="constant external internal payable private public pure view override",$Ne=Hs(mie.split(" ")),gie="constructor error event fallback function receive struct",yie=Hs(gie.split(" ")),xie="calldata memory storage payable indexed",zNe=Hs(xie.split(" ")),HNe="tuple returns",VNe=[gie,xie,HNe,mie].join(" "),qNe=Hs(VNe.split(" ")),GNe={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},KNe=new RegExp("^(\\s*)"),WNe=new RegExp("^([0-9]+)"),YNe=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),vie=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),bie=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var Qi,cl,e1,j4;const IC=class IC{constructor(e){je(this,e1);je(this,Qi);je(this,cl);ge(this,Qi,0),ge(this,cl,e.slice())}get offset(){return ie(this,Qi)}get length(){return ie(this,cl).length-ie(this,Qi)}clone(){return new IC(ie(this,cl))}reset(){ge(this,Qi,0)}popKeyword(e){const n=this.peek();if(n.type!=="KEYWORD"||!e.has(n.text))throw new Error(`expected keyword ${n.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const n=this.peek();throw new Error(`expected ${e}; got ${n.type} ${JSON.stringify(n.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=tt(this,e1,j4).call(this,ie(this,Qi)+1,e.match+1);return ge(this,Qi,e.match+1),n}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=[];for(;ie(this,Qi)<e.match-1;){const r=this.peek().linkNext;n.push(tt(this,e1,j4).call(this,ie(this,Qi)+1,r)),ge(this,Qi,r)}return ge(this,Qi,e.match+1),n}peek(){if(ie(this,Qi)>=ie(this,cl).length)throw new Error("out-of-bounds");return ie(this,cl)[ie(this,Qi)]}peekKeyword(e){const n=this.peekType("KEYWORD");return n!=null&&e.has(n)?n:null}peekType(e){if(this.length===0)return null;const n=this.peek();return n.type===e?n.text:null}pop(){const e=this.peek();return Gv(this,Qi)._++,e}toString(){const e=[];for(let n=ie(this,Qi);n<ie(this,cl).length;n++){const r=ie(this,cl)[n];e.push(`${r.type}:${r.text}`)}return`<TokenString ${e.join(" ")}>`}};Qi=new WeakMap,cl=new WeakMap,e1=new WeakSet,j4=function(e=0,n=0){return new IC(ie(this,cl).slice(e,n).map(r=>Object.freeze(Object.assign({},r,{match:r.match-e,linkBack:r.linkBack-e,linkNext:r.linkNext-e}))))};let Tl=IC;function fh(t){const e=[],n=o=>{const a=s<t.length?JSON.stringify(t[s]):"$EOI";throw new Error(`invalid token ${a} at ${s}: ${o}`)};let r=[],i=[],s=0;for(;s<t.length;){let o=t.substring(s),a=o.match(KNe);a&&(s+=a[1].length,o=t.substring(s));const l={depth:r.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:s,value:-1};e.push(l);let c=GNe[o[0]]||"";if(c){if(l.type=c,l.text=o[0],s++,c==="OPEN_PAREN")r.push(e.length-1),i.push(e.length-1);else if(c=="CLOSE_PAREN")r.length===0&&n("no matching open bracket"),l.match=r.pop(),e[l.match].match=e.length-1,l.depth--,l.linkBack=i.pop(),e[l.linkBack].linkNext=e.length-1;else if(c==="COMMA")l.linkBack=i.pop(),e[l.linkBack].linkNext=e.length-1,i.push(e.length-1);else if(c==="OPEN_BRACKET")l.type="BRACKET";else if(c==="CLOSE_BRACKET"){let u=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const f=e.pop().text;u=f+u,e[e.length-1].value=Qt(f)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=u}continue}if(a=o.match(YNe),a){if(l.text=a[1],s+=l.text.length,qNe.has(l.text)){l.type="KEYWORD";continue}if(l.text.match(bie)){l.type="TYPE";continue}l.type="ID";continue}if(a=o.match(WNe),a){l.text=a[1],l.type="NUMBER",s+=l.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${s}`)}return new Tl(e.map(o=>Object.freeze(o)))}function AH(t,e){let n=[];for(const r in e.keys())t.has(r)&&n.push(r);if(n.length>1)throw new Error(`conflicting types: ${n.join(", ")}`)}function i2(t,e){if(e.peekKeyword(yie)){const n=e.pop().text;if(n!==t)throw new Error(`expected ${t}, got ${n}`)}return e.popType("ID")}function ad(t,e){const n=new Set;for(;;){const r=t.peekType("KEYWORD");if(r==null||e&&!e.has(r))break;if(t.pop(),n.has(r))throw new Error(`duplicate keywords: ${JSON.stringify(r)}`);n.add(r)}return Object.freeze(n)}function wie(t){let e=ad(t,$Ne);return AH(e,Hs("constant payable nonpayable".split(" "))),AH(e,Hs("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function Ku(t,e){return t.popParams().map(n=>as.from(n,e))}function Eie(t){if(t.peekType("AT")){if(t.pop(),t.peekType("NUMBER"))return wt(t.pop().text);throw new Error("invalid gas")}return null}function am(t){if(t.length)throw new Error(`unexpected tokens at offset ${t.offset}: ${t.toString()}`)}const JNe=new RegExp(/^(.*)\[([0-9]*)\]$/);function TH(t){const e=t.match(bie);if(xe(e,"invalid type","type",t),t==="uint")return"uint256";if(t==="int")return"int256";if(e[2]){const n=parseInt(e[2]);xe(n!==0&&n<=32,"invalid bytes length","type",t)}else if(e[3]){const n=parseInt(e[3]);xe(n!==0&&n<=256&&n%8===0,"invalid numeric width","type",t)}return t}const Mr={},go=Symbol.for("_ethers_internal"),kH="_ParamTypeInternal",CH="_ErrorInternal",NH="_EventInternal",_H="_ConstructorInternal",IH="_FallbackInternal",PH="_FunctionInternal",RH="_StructInternal";var ky,QA;const Ea=class Ea{constructor(e,n,r,i,s,o,a,l){je(this,ky);Se(this,"name");Se(this,"type");Se(this,"baseType");Se(this,"indexed");Se(this,"components");Se(this,"arrayLength");Se(this,"arrayChildren");if(uh(e,Mr,"ParamType"),Object.defineProperty(this,go,{value:kH}),o&&(o=Object.freeze(o.slice())),i==="array"){if(a==null||l==null)throw new Error("")}else if(a!=null||l!=null)throw new Error("");if(i==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");Mt(this,{name:n,type:r,baseType:i,indexed:s,components:o,arrayLength:a,arrayChildren:l})}format(e){if(e==null&&(e="sighash"),e==="json"){const r=this.name||"";if(this.isArray()){const s=JSON.parse(this.arrayChildren.format("json"));return s.name=r,s.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(s)}const i={type:this.baseType==="tuple"?"tuple":this.type,name:r};return typeof this.indexed=="boolean"&&(i.indexed=this.indexed),this.isTuple()&&(i.components=this.components.map(s=>JSON.parse(s.format(e)))),JSON.stringify(i)}let n="";return this.isArray()?(n+=this.arrayChildren.format(e),n+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?n+="("+this.components.map(r=>r.format(e)).join(e==="full"?", ":",")+")":n+=this.type,e!=="sighash"&&(this.indexed===!0&&(n+=" indexed"),e==="full"&&this.name&&(n+=" "+this.name)),n}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,n){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const r=this;return e.map(i=>r.arrayChildren.walk(i,n))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const r=this;return e.map((i,s)=>r.components[s].walk(i,n))}return n(this.type,e)}async walkAsync(e,n){const r=[],i=[e];return tt(this,ky,QA).call(this,r,e,n,s=>{i[0]=s}),r.length&&await Promise.all(r),i[0]}static from(e,n){if(Ea.isParamType(e))return e;if(typeof e=="string")try{return Ea.from(fh(e),n)}catch{xe(!1,"invalid param type","obj",e)}else if(e instanceof Tl){let a="",l="",c=null;ad(e,Hs(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(l="tuple",c=e.popParams().map(v=>Ea.from(v)),a=`tuple(${c.map(v=>v.format()).join(",")})`):(a=TH(e.popType("TYPE")),l=a);let u=null,f=null;for(;e.length&&e.peekType("BRACKET");){const v=e.pop();u=new Ea(Mr,"",a,l,null,c,f,u),f=v.value,a+=v.text,l="array",c=null}let m=null;if(ad(e,zNe).has("indexed")){if(!n)throw new Error("");m=!0}const x=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new Ea(Mr,x,a,l,m,c,f,u)}const r=e.name;xe(!r||typeof r=="string"&&r.match(vie),"invalid name","obj.name",r);let i=e.indexed;i!=null&&(xe(n,"parameter cannot be indexed","obj.indexed",e.indexed),i=!!i);let s=e.type,o=s.match(JNe);if(o){const a=parseInt(o[2]||"-1"),l=Ea.from({type:o[1],components:e.components});return new Ea(Mr,r||"",s,"array",i,null,a,l)}if(s==="tuple"||s.startsWith("tuple(")||s.startsWith("(")){const a=e.components!=null?e.components.map(c=>Ea.from(c)):null;return new Ea(Mr,r||"",s,"tuple",i,a,null,null)}return s=TH(e.type),new Ea(Mr,r||"",s,s,i,null,null,null)}static isParamType(e){return e&&e[go]===kH}};ky=new WeakSet,QA=function(e,n,r,i){if(this.isArray()){if(!Array.isArray(n))throw new Error("invalid array value");if(this.arrayLength!==-1&&n.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,a=n.slice();a.forEach((l,c)=>{var u;tt(u=o,ky,QA).call(u,e,l,r,f=>{a[c]=f})}),i(a);return}if(this.isTuple()){const o=this.components;let a;if(Array.isArray(n))a=n.slice();else{if(n==null||typeof n!="object")throw new Error("invalid tuple value");a=o.map(l=>{if(!l.name)throw new Error("cannot use object value with unnamed components");if(!(l.name in n))throw new Error(`missing value for component ${l.name}`);return n[l.name]})}if(a.length!==this.components.length)throw new Error("array is wrong length");a.forEach((l,c)=>{var u;tt(u=o[c],ky,QA).call(u,e,l,r,f=>{a[c]=f})}),i(a);return}const s=r(this.type,n);s.then?e.push((async function(){i(await s)})()):i(s)};let as=Ea;class lm{constructor(e,n,r){Se(this,"type");Se(this,"inputs");uh(e,Mr,"Fragment"),r=Object.freeze(r.slice()),Mt(this,{type:n,inputs:r})}static from(e){if(typeof e=="string"){try{lm.from(JSON.parse(e))}catch{}return lm.from(fh(e))}if(e instanceof Tl)switch(e.peekKeyword(yie)){case"constructor":return Fu.from(e);case"error":return lo.from(e);case"event":return dc.from(e);case"fallback":case"receive":return bu.from(e);case"function":return fc.from(e);case"struct":return Jp.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return Fu.from(e);case"error":return lo.from(e);case"event":return dc.from(e);case"fallback":case"receive":return bu.from(e);case"function":return fc.from(e);case"struct":return Jp.from(e)}Ke(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}xe(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return Fu.isFragment(e)}static isError(e){return lo.isFragment(e)}static isEvent(e){return dc.isFragment(e)}static isFunction(e){return fc.isFragment(e)}static isStruct(e){return Jp.isFragment(e)}}class s2 extends lm{constructor(n,r,i,s){super(n,r,s);Se(this,"name");xe(typeof i=="string"&&i.match(vie),"invalid identifier","name",i),s=Object.freeze(s.slice()),Mt(this,{name:i})}}function gw(t,e){return"("+e.map(n=>n.format(t)).join(t==="full"?", ":",")+")"}class lo extends s2{constructor(e,n,r){super(e,"error",n,r),Object.defineProperty(this,go,{value:CH})}get selector(){return od(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const n=[];return e!=="sighash"&&n.push("error"),n.push(this.name+gw(e,this.inputs)),n.join(" ")}static from(e){if(lo.isFragment(e))return e;if(typeof e=="string")return lo.from(fh(e));if(e instanceof Tl){const n=i2("error",e),r=Ku(e);return am(e),new lo(Mr,n,r)}return new lo(Mr,e.name,e.inputs?e.inputs.map(as.from):[])}static isFragment(e){return e&&e[go]===CH}}class dc extends s2{constructor(n,r,i,s){super(n,"event",r,i);Se(this,"anonymous");Object.defineProperty(this,go,{value:NH}),Mt(this,{anonymous:s})}get topicHash(){return od(this.format("sighash"))}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(i=>JSON.parse(i.format(n)))});const r=[];return n!=="sighash"&&r.push("event"),r.push(this.name+gw(n,this.inputs)),n!=="sighash"&&this.anonymous&&r.push("anonymous"),r.join(" ")}static getTopicHash(n,r){return r=(r||[]).map(s=>as.from(s)),new dc(Mr,n,r,!1).topicHash}static from(n){if(dc.isFragment(n))return n;if(typeof n=="string")try{return dc.from(fh(n))}catch{xe(!1,"invalid event fragment","obj",n)}else if(n instanceof Tl){const r=i2("event",n),i=Ku(n,!0),s=!!ad(n,Hs(["anonymous"])).has("anonymous");return am(n),new dc(Mr,r,i,s)}return new dc(Mr,n.name,n.inputs?n.inputs.map(r=>as.from(r,!0)):[],!!n.anonymous)}static isFragment(n){return n&&n[go]===NH}}class Fu extends lm{constructor(n,r,i,s,o){super(n,r,i);Se(this,"payable");Se(this,"gas");Object.defineProperty(this,go,{value:_H}),Mt(this,{payable:s,gas:o})}format(n){if(Ke(n!=null&&n!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),n==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(i=>JSON.parse(i.format(n)))});const r=[`constructor${gw(n,this.inputs)}`];return this.payable&&r.push("payable"),this.gas!=null&&r.push(`@${this.gas.toString()}`),r.join(" ")}static from(n){if(Fu.isFragment(n))return n;if(typeof n=="string")try{return Fu.from(fh(n))}catch{xe(!1,"invalid constuctor fragment","obj",n)}else if(n instanceof Tl){ad(n,Hs(["constructor"]));const r=Ku(n),i=!!ad(n,FNe).has("payable"),s=Eie(n);return am(n),new Fu(Mr,"constructor",r,i,s)}return new Fu(Mr,"constructor",n.inputs?n.inputs.map(as.from):[],!!n.payable,n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[go]===_H}}class bu extends lm{constructor(n,r,i){super(n,"fallback",r);Se(this,"payable");Object.defineProperty(this,go,{value:IH}),Mt(this,{payable:i})}format(n){const r=this.inputs.length===0?"receive":"fallback";if(n==="json"){const i=this.payable?"payable":"nonpayable";return JSON.stringify({type:r,stateMutability:i})}return`${r}()${this.payable?" payable":""}`}static from(n){if(bu.isFragment(n))return n;if(typeof n=="string")try{return bu.from(fh(n))}catch{xe(!1,"invalid fallback fragment","obj",n)}else if(n instanceof Tl){const r=n.toString(),i=n.peekKeyword(Hs(["fallback","receive"]));if(xe(i,"type must be fallback or receive","obj",r),n.popKeyword(Hs(["fallback","receive"]))==="receive"){const l=Ku(n);return xe(l.length===0,"receive cannot have arguments","obj.inputs",l),ad(n,Hs(["payable"])),am(n),new bu(Mr,[],!0)}let o=Ku(n);o.length?xe(o.length===1&&o[0].type==="bytes","invalid fallback inputs","obj.inputs",o.map(l=>l.format("minimal")).join(", ")):o=[as.from("bytes")];const a=wie(n);if(xe(a==="nonpayable"||a==="payable","fallback cannot be constants","obj.stateMutability",a),ad(n,Hs(["returns"])).has("returns")){const l=Ku(n);xe(l.length===1&&l[0].type==="bytes","invalid fallback outputs","obj.outputs",l.map(c=>c.format("minimal")).join(", "))}return am(n),new bu(Mr,o,a==="payable")}if(n.type==="receive")return new bu(Mr,[],!0);if(n.type==="fallback"){const r=[as.from("bytes")],i=n.stateMutability==="payable";return new bu(Mr,r,i)}xe(!1,"invalid fallback description","obj",n)}static isFragment(n){return n&&n[go]===IH}}class fc extends s2{constructor(n,r,i,s,o,a){super(n,"function",r,s);Se(this,"constant");Se(this,"outputs");Se(this,"stateMutability");Se(this,"payable");Se(this,"gas");Object.defineProperty(this,go,{value:PH}),o=Object.freeze(o.slice()),Mt(this,{constant:i==="view"||i==="pure",gas:a,outputs:o,payable:i==="payable",stateMutability:i})}get selector(){return od(this.format("sighash")).substring(0,10)}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(i=>JSON.parse(i.format(n))),outputs:this.outputs.map(i=>JSON.parse(i.format(n)))});const r=[];return n!=="sighash"&&r.push("function"),r.push(this.name+gw(n,this.inputs)),n!=="sighash"&&(this.stateMutability!=="nonpayable"&&r.push(this.stateMutability),this.outputs&&this.outputs.length&&(r.push("returns"),r.push(gw(n,this.outputs))),this.gas!=null&&r.push(`@${this.gas.toString()}`)),r.join(" ")}static getSelector(n,r){return r=(r||[]).map(s=>as.from(s)),new fc(Mr,n,"view",r,[],null).selector}static from(n){if(fc.isFragment(n))return n;if(typeof n=="string")try{return fc.from(fh(n))}catch{xe(!1,"invalid function fragment","obj",n)}else if(n instanceof Tl){const i=i2("function",n),s=Ku(n),o=wie(n);let a=[];ad(n,Hs(["returns"])).has("returns")&&(a=Ku(n));const l=Eie(n);return am(n),new fc(Mr,i,o,s,a,l)}let r=n.stateMutability;return r==null&&(r="payable",typeof n.constant=="boolean"?(r="view",n.constant||(r="payable",typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable"))):typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable")),new fc(Mr,n.name,r,n.inputs?n.inputs.map(as.from):[],n.outputs?n.outputs.map(as.from):[],n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[go]===PH}}class Jp extends s2{constructor(e,n,r){super(e,"struct",n,r),Object.defineProperty(this,go,{value:RH})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return Jp.from(fh(e))}catch{xe(!1,"invalid struct fragment","obj",e)}else if(e instanceof Tl){const n=i2("struct",e),r=Ku(e);return am(e),new Jp(Mr,n,r)}return new Jp(Mr,e.name,e.inputs?e.inputs.map(as.from):[])}static isFragment(e){return e&&e[go]===RH}}const Rl=new Map;Rl.set(0,"GENERIC_PANIC");Rl.set(1,"ASSERT_FALSE");Rl.set(17,"OVERFLOW");Rl.set(18,"DIVIDE_BY_ZERO");Rl.set(33,"ENUM_RANGE_ERROR");Rl.set(34,"BAD_STORAGE_DATA");Rl.set(49,"STACK_UNDERFLOW");Rl.set(50,"ARRAY_RANGE_ERROR");Rl.set(65,"OUT_OF_MEMORY");Rl.set(81,"UNINITIALIZED_FUNCTION_CALL");const XNe=new RegExp(/^bytes([0-9]*)$/),QNe=new RegExp(/^(u?int)([0-9]*)$/);let ZP=null,OH=1024;function ZNe(t,e,n,r){let i="missing revert data",s=null;const o=null;let a=null;if(n){i="execution reverted";const c=ht(n);if(n=rt(n),c.length===0)i+=" (no data present; likely require(false) occurred",s="require(false)";else if(c.length%32!==4)i+=" (could not decode reason; invalid data length)";else if(rt(c.slice(0,4))==="0x08c379a0")try{s=r.decode(["string"],c.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[s]},i+=`: ${JSON.stringify(s)}`}catch{i+=" (could not decode reason; invalid string data)"}else if(rt(c.slice(0,4))==="0x4e487b71")try{const u=Number(r.decode(["uint256"],c.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[u]},s=`Panic due to ${Rl.get(u)||"UNKNOWN"}(${u})`,i+=`: ${s}`}catch{i+=" (could not decode panic code)"}else i+=" (unknown custom error)"}const l={to:e.to?xn(e.to):null,data:e.data||"0x"};return e.from&&(l.from=xn(e.from)),Pr(i,"CALL_EXCEPTION",{action:t,data:n,reason:s,transaction:l,invocation:o,revert:a})}var Of,rg;const PC=class PC{constructor(){je(this,Of)}getDefaultValue(e){const n=e.map(i=>tt(this,Of,rg).call(this,as.from(i)));return new jS(n,"_").defaultValue()}encode(e,n){yne(n.length,e.length,"types/values length mismatch");const r=e.map(o=>tt(this,Of,rg).call(this,as.from(o))),i=new jS(r,"_"),s=new S4;return i.encode(s,n),s.data}decode(e,n,r){const i=e.map(o=>tt(this,Of,rg).call(this,as.from(o)));return new jS(i,"_").decode(new A4(n,r,OH))}static _setDefaultMaxInflation(e){xe(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),OH=e}static defaultAbiCoder(){return ZP==null&&(ZP=new PC),ZP}static getBuiltinCallException(e,n,r){return ZNe(e,n,r,PC.defaultAbiCoder())}};Of=new WeakSet,rg=function(e){if(e.isArray())return new x2e(tt(this,Of,rg).call(this,e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new jS(e.components.map(r=>tt(this,Of,rg).call(this,r)),e.name);switch(e.baseType){case"address":return new g2e(e.name);case"bool":return new v2e(e.name);case"string":return new N2e(e.name);case"bytes":return new b2e(e.name);case"":return new S2e(e.name)}let n=e.type.match(QNe);if(n){let r=parseInt(n[2]||"256");return xe(r!==0&&r<=256&&r%8===0,"invalid "+n[1]+" bit length","param",e),new C2e(r/8,n[1]==="int",e.name)}if(n=e.type.match(XNe),n){let r=parseInt(n[1]);return xe(r!==0&&r<=32,"invalid bytes length","param",e),new w2e(r,e.name)}xe(!1,"invalid type","type",e.type)};let yw=PC;class e_e{constructor(e,n,r){Se(this,"fragment");Se(this,"name");Se(this,"signature");Se(this,"topic");Se(this,"args");const i=e.name,s=e.format();Mt(this,{fragment:e,name:i,signature:s,topic:n,args:r})}}class t_e{constructor(e,n,r,i){Se(this,"fragment");Se(this,"name");Se(this,"args");Se(this,"signature");Se(this,"selector");Se(this,"value");const s=e.name,o=e.format();Mt(this,{fragment:e,name:s,args:r,signature:o,selector:n,value:i})}}class n_e{constructor(e,n,r){Se(this,"fragment");Se(this,"name");Se(this,"args");Se(this,"signature");Se(this,"selector");const i=e.name,s=e.format();Mt(this,{fragment:e,name:i,args:r,signature:s,selector:n})}}class MH{constructor(e){Se(this,"hash");Se(this,"_isIndexed");Mt(this,{hash:e,_isIndexed:!0})}static isIndexed(e){return!!(e&&e._isIndexed)}}const DH={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},LH={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:t=>`reverted with reason string ${JSON.stringify(t)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:t=>{let e="unknown panic code";return t>=0&&t<=255&&DH[t.toString()]&&(e=DH[t.toString()]),`reverted with panic code 0x${t.toString(16)} (${e})`}}};var tc,nc,rc,ys,kc,ZA,eT;const lp=class lp{constructor(e){je(this,kc);Se(this,"fragments");Se(this,"deploy");Se(this,"fallback");Se(this,"receive");je(this,tc);je(this,nc);je(this,rc);je(this,ys);let n=[];typeof e=="string"?n=JSON.parse(e):n=e,ge(this,rc,new Map),ge(this,tc,new Map),ge(this,nc,new Map);const r=[];for(const o of n)try{r.push(lm.from(o))}catch(a){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,a.message)}Mt(this,{fragments:Object.freeze(r)});let i=null,s=!1;ge(this,ys,this.getAbiCoder()),this.fragments.forEach((o,a)=>{let l;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}Mt(this,{deploy:o});return;case"fallback":o.inputs.length===0?s=!0:(xe(!i||o.payable!==i.payable,"conflicting fallback fragments",`fragments[${a}]`,o),i=o,s=i.payable);return;case"function":l=ie(this,rc);break;case"event":l=ie(this,nc);break;case"error":l=ie(this,tc);break;default:return}const c=o.format();l.has(c)||l.set(c,o)}),this.deploy||Mt(this,{deploy:Fu.from("constructor()")}),Mt(this,{fallback:i,receive:s})}format(e){const n=e?"minimal":"full";return this.fragments.map(i=>i.format(n))}formatJson(){const e=this.fragments.map(n=>n.format("json"));return JSON.stringify(e.map(n=>JSON.parse(n)))}getAbiCoder(){return yw.defaultAbiCoder()}getFunctionName(e){const n=tt(this,kc,ZA).call(this,e,null,!1);return xe(n,"no matching function","key",e),n.name}hasFunction(e){return!!tt(this,kc,ZA).call(this,e,null,!1)}getFunction(e,n){return tt(this,kc,ZA).call(this,e,n||null,!0)}forEachFunction(e){const n=Array.from(ie(this,rc).keys());n.sort((r,i)=>r.localeCompare(i));for(let r=0;r<n.length;r++){const i=n[r];e(ie(this,rc).get(i),r)}}getEventName(e){const n=tt(this,kc,eT).call(this,e,null,!1);return xe(n,"no matching event","key",e),n.name}hasEvent(e){return!!tt(this,kc,eT).call(this,e,null,!1)}getEvent(e,n){return tt(this,kc,eT).call(this,e,n||null,!0)}forEachEvent(e){const n=Array.from(ie(this,nc).keys());n.sort((r,i)=>r.localeCompare(i));for(let r=0;r<n.length;r++){const i=n[r];e(ie(this,nc).get(i),r)}}getError(e,n){if(gr(e)){const i=e.toLowerCase();if(LH[i])return lo.from(LH[i].signature);for(const s of ie(this,tc).values())if(i===s.selector)return s;return null}if(e.indexOf("(")===-1){const i=[];for(const[s,o]of ie(this,tc))s.split("(")[0]===e&&i.push(o);if(i.length===0)return e==="Error"?lo.from("error Error(string)"):e==="Panic"?lo.from("error Panic(uint256)"):null;if(i.length>1){const s=i.map(o=>JSON.stringify(o.format())).join(", ");xe(!1,`ambiguous error description (i.e. ${s})`,"name",e)}return i[0]}if(e=lo.from(e).format(),e==="Error(string)")return lo.from("error Error(string)");if(e==="Panic(uint256)")return lo.from("error Panic(uint256)");const r=ie(this,tc).get(e);return r||null}forEachError(e){const n=Array.from(ie(this,tc).keys());n.sort((r,i)=>r.localeCompare(i));for(let r=0;r<n.length;r++){const i=n[r];e(ie(this,tc).get(i),r)}}_decodeParams(e,n){return ie(this,ys).decode(e,n)}_encodeParams(e,n){return ie(this,ys).encode(e,n)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);xe(r,"unknown error","fragment",e),e=r}return xe(mr(n,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",n),this._decodeParams(e.inputs,mr(n,4))}encodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);xe(r,"unknown error","fragment",e),e=r}return On([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);xe(r,"unknown function","fragment",e),e=r}return xe(mr(n,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",n),this._decodeParams(e.inputs,mr(n,4))}encodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);xe(r,"unknown function","fragment",e),e=r}return On([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionResult(e,n){if(typeof e=="string"){const s=this.getFunction(e);xe(s,"unknown function","fragment",e),e=s}let r="invalid length for result data";const i=os(n);if(i.length%32===0)try{return ie(this,ys).decode(e.outputs,i)}catch{r="could not decode result data"}Ke(!1,r,"BAD_DATA",{value:rt(i),info:{method:e.name,signature:e.format()}})}makeError(e,n){const r=ht(e,"data"),i=yw.getBuiltinCallException("call",n,r);if(i.message.startsWith("execution reverted (unknown custom error)")){const a=rt(r.slice(0,4)),l=this.getError(a);if(l)try{const c=ie(this,ys).decode(l.inputs,r.slice(4));i.revert={name:l.name,signature:l.format(),args:c},i.reason=i.revert.signature,i.message=`execution reverted: ${i.reason}`}catch{i.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(n);return o&&(i.invocation={method:o.name,signature:o.signature,args:o.args}),i}encodeFunctionResult(e,n){if(typeof e=="string"){const r=this.getFunction(e);xe(r,"unknown function","fragment",e),e=r}return rt(ie(this,ys).encode(e.outputs,n||[]))}encodeFilterTopics(e,n){if(typeof e=="string"){const s=this.getEvent(e);xe(s,"unknown event","eventFragment",e),e=s}Ke(n.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:n.length,expectedCount:e.inputs.length});const r=[];e.anonymous||r.push(e.topicHash);const i=(s,o)=>s.type==="string"?od(o):s.type==="bytes"?Kn(rt(o)):(s.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":s.type.match(/^u?int/)?o=id(o):s.type.match(/^bytes/)?o=rke(o,32):s.type==="address"&&ie(this,ys).encode(["address"],[o]),rd(rt(o),32));for(n.forEach((s,o)=>{const a=e.inputs[o];if(!a.indexed){xe(s==null,"cannot filter non-indexed parameters; must be null","contract."+a.name,s);return}s==null?r.push(null):a.baseType==="array"||a.baseType==="tuple"?xe(!1,"filtering with tuples or arrays not supported","contract."+a.name,s):Array.isArray(s)?r.push(s.map(l=>i(a,l))):r.push(i(a,s))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(e,n){if(typeof e=="string"){const o=this.getEvent(e);xe(o,"unknown event","eventFragment",e),e=o}const r=[],i=[],s=[];return e.anonymous||r.push(e.topicHash),xe(n.length===e.inputs.length,"event arguments/values mismatch","values",n),e.inputs.forEach((o,a)=>{const l=n[a];if(o.indexed)if(o.type==="string")r.push(od(l));else if(o.type==="bytes")r.push(Kn(l));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");r.push(ie(this,ys).encode([o.type],[l]))}else i.push(o),s.push(l)}),{data:ie(this,ys).encode(i,s),topics:r}}decodeEventLog(e,n,r){if(typeof e=="string"){const g=this.getEvent(e);xe(g,"unknown event","eventFragment",e),e=g}if(r!=null&&!e.anonymous){const g=e.topicHash;xe(gr(r[0],32)&&r[0].toLowerCase()===g,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}const i=[],s=[],o=[];e.inputs.forEach((g,x)=>{g.indexed?g.type==="string"||g.type==="bytes"||g.baseType==="tuple"||g.baseType==="array"?(i.push(as.from({type:"bytes32",name:g.name})),o.push(!0)):(i.push(g),o.push(!1)):(s.push(g),o.push(!1))});const a=r!=null?ie(this,ys).decode(i,On(r)):null,l=ie(this,ys).decode(s,n,!0),c=[],u=[];let f=0,m=0;return e.inputs.forEach((g,x)=>{let v=null;if(g.indexed)if(a==null)v=new MH(null);else if(o[x])v=new MH(a[m++]);else try{v=a[m++]}catch(w){v=w}else try{v=l[f++]}catch(w){v=w}c.push(v),u.push(g.name||null)}),Wy.fromItems(c,u)}parseTransaction(e){const n=ht(e.data,"tx.data"),r=wt(e.value!=null?e.value:0,"tx.value"),i=this.getFunction(rt(n.slice(0,4)));if(!i)return null;const s=ie(this,ys).decode(i.inputs,n.slice(4));return new t_e(i,i.selector,s,r)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const n=this.getEvent(e.topics[0]);return!n||n.anonymous?null:new e_e(n,n.topicHash,this.decodeEventLog(n,e.data,e.topics))}parseError(e){const n=rt(e),r=this.getError(mr(n,0,4));if(!r)return null;const i=ie(this,ys).decode(r.inputs,mr(n,4));return new n_e(r,r.selector,i)}static from(e){return e instanceof lp?e:typeof e=="string"?new lp(JSON.parse(e)):typeof e.formatJson=="function"?new lp(e.formatJson()):typeof e.format=="function"?new lp(e.format("json")):new lp(e)}};tc=new WeakMap,nc=new WeakMap,rc=new WeakMap,ys=new WeakMap,kc=new WeakSet,ZA=function(e,n,r){if(gr(e)){const s=e.toLowerCase();for(const o of ie(this,rc).values())if(s===o.selector)return o;return null}if(e.indexOf("(")===-1){const s=[];for(const[o,a]of ie(this,rc))o.split("(")[0]===e&&s.push(a);if(n){const o=n.length>0?n[n.length-1]:null;let a=n.length,l=!0;Ns.isTyped(o)&&o.type==="overrides"&&(l=!1,a--);for(let c=s.length-1;c>=0;c--){const u=s[c].inputs.length;u!==a&&(!l||u!==a-1)&&s.splice(c,1)}for(let c=s.length-1;c>=0;c--){const u=s[c].inputs;for(let f=0;f<n.length;f++)if(Ns.isTyped(n[f])){if(f>=u.length){if(n[f].type==="overrides")continue;s.splice(c,1);break}if(n[f].type!==u[f].baseType){s.splice(c,1);break}}}}if(s.length===1&&n&&n.length!==s[0].inputs.length){const o=n[n.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&s.splice(0,1)}if(s.length===0)return null;if(s.length>1&&r){const o=s.map(a=>JSON.stringify(a.format())).join(", ");xe(!1,`ambiguous function description (i.e. matches ${o})`,"key",e)}return s[0]}const i=ie(this,rc).get(fc.from(e).format());return i||null},eT=function(e,n,r){if(gr(e)){const s=e.toLowerCase();for(const o of ie(this,nc).values())if(s===o.topicHash)return o;return null}if(e.indexOf("(")===-1){const s=[];for(const[o,a]of ie(this,nc))o.split("(")[0]===e&&s.push(a);if(n){for(let o=s.length-1;o>=0;o--)s[o].inputs.length<n.length&&s.splice(o,1);for(let o=s.length-1;o>=0;o--){const a=s[o].inputs;for(let l=0;l<n.length;l++)if(Ns.isTyped(n[l])&&n[l].type!==a[l].baseType){s.splice(o,1);break}}}if(s.length===0)return null;if(s.length>1&&r){const o=s.map(a=>JSON.stringify(a.format())).join(", ");xe(!1,`ambiguous event description (i.e. matches ${o})`,"key",e)}return s[0]}const i=ie(this,nc).get(dc.from(e).format());return i||null};let U4=lp;const Sie=BigInt(0);function Ug(t){return t??null}function ti(t){return t==null?null:t.toString()}class BH{constructor(e,n,r){Se(this,"gasPrice");Se(this,"maxFeePerGas");Se(this,"maxPriorityFeePerGas");Mt(this,{gasPrice:Ug(e),maxFeePerGas:Ug(n),maxPriorityFeePerGas:Ug(r)})}toJSON(){const{gasPrice:e,maxFeePerGas:n,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:ti(e),maxFeePerGas:ti(n),maxPriorityFeePerGas:ti(r)}}}function xw(t){const e={};t.to&&(e.to=t.to),t.from&&(e.from=t.from),t.data&&(e.data=rt(t.data));const n="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const i of n)!(i in t)||t[i]==null||(e[i]=wt(t[i],`request.${i}`));const r="type,nonce".split(/,/);for(const i of r)!(i in t)||t[i]==null||(e[i]=Qt(t[i],`request.${i}`));return t.accessList&&(e.accessList=Nm(t.accessList)),t.authorizationList&&(e.authorizationList=t.authorizationList.slice()),"blockTag"in t&&(e.blockTag=t.blockTag),"enableCcipRead"in t&&(e.enableCcipRead=!!t.enableCcipRead),"customData"in t&&(e.customData=t.customData),"blobVersionedHashes"in t&&t.blobVersionedHashes&&(e.blobVersionedHashes=t.blobVersionedHashes.slice()),"kzg"in t&&(e.kzg=t.kzg),"blobWrapperVersion"in t&&(e.blobWrapperVersion=t.blobWrapperVersion),"blobs"in t&&t.blobs&&(e.blobs=t.blobs.map(i=>KC(i)?rt(i):Object.assign({},i))),e}var Nu;class r_e{constructor(e,n){Se(this,"provider");Se(this,"number");Se(this,"hash");Se(this,"timestamp");Se(this,"parentHash");Se(this,"parentBeaconBlockRoot");Se(this,"nonce");Se(this,"difficulty");Se(this,"gasLimit");Se(this,"gasUsed");Se(this,"stateRoot");Se(this,"receiptsRoot");Se(this,"blobGasUsed");Se(this,"excessBlobGas");Se(this,"miner");Se(this,"prevRandao");Se(this,"extraData");Se(this,"baseFeePerGas");je(this,Nu);ge(this,Nu,e.transactions.map(r=>typeof r!="string"?new vw(r,n):r)),Mt(this,{provider:n,hash:Ug(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:Ug(e.prevRandao),extraData:e.extraData,baseFeePerGas:Ug(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return ie(this,Nu).map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){const e=ie(this,Nu).slice();return e.length===0?[]:(Ke(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:n,extraData:r,gasLimit:i,gasUsed:s,hash:o,miner:a,prevRandao:l,nonce:c,number:u,parentHash:f,parentBeaconBlockRoot:m,stateRoot:g,receiptsRoot:x,timestamp:v,transactions:w}=this;return{_type:"Block",baseFeePerGas:ti(e),difficulty:ti(n),extraData:r,gasLimit:ti(i),gasUsed:ti(s),blobGasUsed:ti(this.blobGasUsed),excessBlobGas:ti(this.excessBlobGas),hash:o,miner:a,prevRandao:l,nonce:c,number:u,parentHash:f,timestamp:v,parentBeaconBlockRoot:m,stateRoot:g,receiptsRoot:x,transactions:w}}[Symbol.iterator](){let e=0;const n=this.transactions;return{next:()=>e<this.length?{value:n[e++],done:!1}:{value:void 0,done:!0}}}get length(){return ie(this,Nu).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let n;if(typeof e=="number")n=ie(this,Nu)[e];else{const r=e.toLowerCase();for(const i of ie(this,Nu))if(typeof i=="string"){if(i!==r)continue;n=i;break}else{if(i.hash!==r)continue;n=i;break}}if(n==null)throw new Error("no such tx");return typeof n=="string"?await this.provider.getTransaction(n):n}getPrefetchedTransaction(e){const n=this.prefetchedTransactions;if(typeof e=="number")return n[e];e=e.toLowerCase();for(const r of n)if(r.hash===e)return r;xe(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return i_e(this)}}Nu=new WeakMap;class T1{constructor(e,n){Se(this,"provider");Se(this,"transactionHash");Se(this,"blockHash");Se(this,"blockNumber");Se(this,"removed");Se(this,"address");Se(this,"data");Se(this,"topics");Se(this,"index");Se(this,"transactionIndex");this.provider=n;const r=Object.freeze(e.topics.slice());Mt(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:r,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:n,blockNumber:r,data:i,index:s,removed:o,topics:a,transactionHash:l,transactionIndex:c}=this;return{_type:"log",address:e,blockHash:n,blockNumber:r,data:i,index:s,removed:o,topics:a,transactionHash:l,transactionIndex:c}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return Ke(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return Ke(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return Ke(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return s_e(this)}}var t1;class Aie{constructor(e,n){Se(this,"provider");Se(this,"to");Se(this,"from");Se(this,"contractAddress");Se(this,"hash");Se(this,"index");Se(this,"blockHash");Se(this,"blockNumber");Se(this,"logsBloom");Se(this,"gasUsed");Se(this,"blobGasUsed");Se(this,"cumulativeGasUsed");Se(this,"gasPrice");Se(this,"blobGasPrice");Se(this,"type");Se(this,"status");Se(this,"root");je(this,t1);ge(this,t1,Object.freeze(e.logs.map(i=>new T1(i,n))));let r=Sie;e.effectiveGasPrice!=null?r=e.effectiveGasPrice:e.gasPrice!=null&&(r=e.gasPrice),Mt(this,{provider:n,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:r,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return ie(this,t1)}toJSON(){const{to:e,from:n,contractAddress:r,hash:i,index:s,blockHash:o,blockNumber:a,logsBloom:l,logs:c,status:u,root:f}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:a,contractAddress:r,cumulativeGasUsed:ti(this.cumulativeGasUsed),from:n,gasPrice:ti(this.gasPrice),blobGasUsed:ti(this.blobGasUsed),blobGasPrice:ti(this.blobGasPrice),gasUsed:ti(this.gasUsed),hash:i,index:s,logs:c,logsBloom:l,root:f,status:u,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return kie(this)}reorderedEvent(e){return Ke(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),Tie(this,e)}}t1=new WeakMap;var Mf;const Wj=class Wj{constructor(e,n){Se(this,"provider");Se(this,"blockNumber");Se(this,"blockHash");Se(this,"index");Se(this,"hash");Se(this,"type");Se(this,"to");Se(this,"from");Se(this,"nonce");Se(this,"gasLimit");Se(this,"gasPrice");Se(this,"maxPriorityFeePerGas");Se(this,"maxFeePerGas");Se(this,"maxFeePerBlobGas");Se(this,"data");Se(this,"value");Se(this,"chainId");Se(this,"signature");Se(this,"accessList");Se(this,"blobVersionedHashes");Se(this,"authorizationList");je(this,Mf);this.provider=n,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,this.authorizationList=e.authorizationList!=null?e.authorizationList:null,ge(this,Mf,-1)}toJSON(){const{blockNumber:e,blockHash:n,index:r,hash:i,type:s,to:o,from:a,nonce:l,data:c,signature:u,accessList:f,blobVersionedHashes:m}=this;return{_type:"TransactionResponse",accessList:f,blockNumber:e,blockHash:n,blobVersionedHashes:m,chainId:ti(this.chainId),data:c,from:a,gasLimit:ti(this.gasLimit),gasPrice:ti(this.gasPrice),hash:i,maxFeePerGas:ti(this.maxFeePerGas),maxPriorityFeePerGas:ti(this.maxPriorityFeePerGas),maxFeePerBlobGas:ti(this.maxFeePerBlobGas),nonce:l,signature:u,to:o,index:r,type:s,value:ti(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const r=await this.getTransaction();r&&(e=r.blockNumber)}if(e==null)return null;const n=this.provider.getBlock(e);if(n==null)throw new Error("TODO");return n}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:n,blockNumber:r}=await Es({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return n==null||n.blockNumber==null?0:r-n.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,n){const r=e??1,i=n??0;let s=ie(this,Mf),o=-1,a=s===-1;const l=async()=>{if(a)return null;const{blockNumber:m,nonce:g}=await Es({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(g<this.nonce){s=m;return}if(a)return null;const x=await this.getTransaction();if(!(x&&x.blockNumber!=null))for(o===-1&&(o=s-3,o<ie(this,Mf)&&(o=ie(this,Mf)));o<=m;){if(a)return null;const v=await this.provider.getBlock(o,!0);if(v==null)return;for(const w of v)if(w===this.hash)return;for(let w=0;w<v.length;w++){const E=await v.getTransaction(w);if(E.from===this.from&&E.nonce===this.nonce){if(a)return null;const C=await this.provider.getTransactionReceipt(E.hash);if(C==null||m-C.blockNumber+1<r)return;let k="replaced";E.data===this.data&&E.to===this.to&&E.value===this.value?k="repriced":E.data==="0x"&&E.from===E.to&&E.value===Sie&&(k="cancelled"),Ke(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:k==="replaced"||k==="cancelled",reason:k,replacement:E.replaceableTransaction(s),hash:E.hash,receipt:C})}}o++}},c=m=>{if(m==null||m.status!==0)return m;Ke(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:m.to,from:m.from,data:""},receipt:m})},u=await this.provider.getTransactionReceipt(this.hash);if(r===0)return c(u);if(u){if(r===1||await u.confirmations()>=r)return c(u)}else if(await l(),r===0)return null;return await new Promise((m,g)=>{const x=[],v=()=>{x.forEach(E=>E())};if(x.push(()=>{a=!0}),i>0){const E=setTimeout(()=>{v(),g(Pr("wait for transaction timeout","TIMEOUT"))},i);x.push(()=>{clearTimeout(E)})}const w=async E=>{if(await E.confirmations()>=r){v();try{m(c(E))}catch(C){g(C)}}};if(x.push(()=>{this.provider.off(this.hash,w)}),this.provider.on(this.hash,w),s>=0){const E=async()=>{try{await l()}catch(C){if(ss(C,"TRANSACTION_REPLACED")){v(),g(C);return}}a||this.provider.once("block",E)};x.push(()=>{this.provider.off("block",E)}),this.provider.once("block",E)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return Ke(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),kie(this)}reorderedEvent(e){return Ke(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Ke(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Tie(this,e)}replaceableTransaction(e){xe(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const n=new Wj(this,this.provider);return ge(n,Mf,e),n}};Mf=new WeakMap;let vw=Wj;function i_e(t){return{orphan:"drop-block",hash:t.hash,number:t.number}}function Tie(t,e){return{orphan:"reorder-transaction",tx:t,other:e}}function kie(t){return{orphan:"drop-transaction",tx:t}}function s_e(t){return{orphan:"drop-log",log:{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,address:t.address,data:t.data,topics:Object.freeze(t.topics.slice()),index:t.index}}}class m8 extends T1{constructor(n,r,i){super(n,n.provider);Se(this,"interface");Se(this,"fragment");Se(this,"args");const s=r.decodeEventLog(i,n.data,n.topics);Mt(this,{args:s,fragment:i,interface:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class Cie extends T1{constructor(n,r){super(n,n.provider);Se(this,"error");Mt(this,{error:r})}}var Cy;class o_e extends Aie{constructor(n,r,i){super(i,r);je(this,Cy);ge(this,Cy,n)}get logs(){return super.logs.map(n=>{const r=n.topics.length?ie(this,Cy).getEvent(n.topics[0]):null;if(r)try{return new m8(n,ie(this,Cy),r)}catch(i){return new Cie(n,i)}return n})}}Cy=new WeakMap;var n1;class g8 extends vw{constructor(n,r,i){super(i,r);je(this,n1);ge(this,n1,n)}async wait(n,r){const i=await super.wait(n,r);return i==null?null:new o_e(ie(this,n1),this.provider,i)}}n1=new WeakMap;class Nie extends Sne{constructor(n,r,i,s){super(n,r,i);Se(this,"log");Mt(this,{log:s})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class a_e extends Nie{constructor(e,n,r,i,s){super(e,n,r,new m8(s,e.interface,i));const o=e.interface.decodeEventLog(i,this.log.data,this.log.topics);Mt(this,{args:o,fragment:i})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const jH=BigInt(0);function _ie(t){return t&&typeof t.call=="function"}function Iie(t){return t&&typeof t.estimateGas=="function"}function o2(t){return t&&typeof t.resolveName=="function"}function Pie(t){return t&&typeof t.sendTransaction=="function"}function Rie(t){if(t!=null){if(o2(t))return t;if(t.provider)return t.provider}}var r1;class l_e{constructor(e,n,r){je(this,r1);Se(this,"fragment");if(Mt(this,{fragment:n}),n.inputs.length<r.length)throw new Error("too many arguments");const i=cm(e.runner,"resolveName"),s=o2(i)?i:null;ge(this,r1,(async function(){const o=await Promise.all(n.inputs.map((a,l)=>r[l]==null?null:a.walkAsync(r[l],(u,f)=>u==="address"?Array.isArray(f)?Promise.all(f.map(m=>Bi(m,s))):Bi(f,s):f)));return e.interface.encodeFilterTopics(n,o)})())}getTopicFilter(){return ie(this,r1)}}r1=new WeakMap;function cm(t,e){return t==null?null:typeof t[e]=="function"?t:t.provider&&typeof t.provider[e]=="function"?t.provider:null}function yp(t){return t==null?null:t.provider||null}async function Oie(t,e){const n=Ns.dereference(t,"overrides");xe(typeof n=="object","invalid overrides parameter","overrides",t);const r=xw(n);return xe(r.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",r.to),xe(r.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",r.data),r.from&&(r.from=r.from),r}async function c_e(t,e,n){const r=cm(t,"resolveName"),i=o2(r)?r:null;return await Promise.all(e.map((s,o)=>s.walkAsync(n[o],(a,l)=>(l=Ns.dereference(l,a),a==="address"?Bi(l,i):l))))}function u_e(t){const e=async function(o){const a=await Oie(o,["data"]);a.to=await t.getAddress(),a.from&&(a.from=await Bi(a.from,Rie(t.runner)));const l=t.interface,c=wt(a.value||jH,"overrides.value")===jH,u=(a.data||"0x")==="0x";l.fallback&&!l.fallback.payable&&l.receive&&!u&&!c&&xe(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),xe(l.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data);const f=l.receive||l.fallback&&l.fallback.payable;return xe(f||c,"cannot send value to non-payable fallback","overrides.value",a.value),xe(l.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data),a},n=async function(o){const a=cm(t.runner,"call");Ke(_ie(a),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const l=await e(o);try{return await a.call(l)}catch(c){throw YL(c)&&c.data?t.interface.makeError(c.data,l):c}},r=async function(o){const a=t.runner;Ke(Pie(a),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const l=await a.sendTransaction(await e(o)),c=yp(t.runner);return new g8(t.interface,c,l)},i=async function(o){const a=cm(t.runner,"estimateGas");return Ke(Iie(a),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await a.estimateGas(await e(o))},s=async o=>await r(o);return Mt(s,{_contract:t,estimateGas:i,populateTransaction:e,send:r,staticCall:n}),s}function d_e(t,e){const n=function(...c){const u=t.interface.getFunction(e,c);return Ke(u,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:c}}),u},r=async function(...c){const u=n(...c);let f={};if(u.inputs.length+1===c.length&&(f=await Oie(c.pop()),f.from&&(f.from=await Bi(f.from,Rie(t.runner)))),u.inputs.length!==c.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const m=await c_e(t.runner,u.inputs,c);return Object.assign({},f,await Es({to:t.getAddress(),data:t.interface.encodeFunctionData(u,m)}))},i=async function(...c){const u=await a(...c);return u.length===1?u[0]:u},s=async function(...c){const u=t.runner;Ke(Pie(u),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const f=await u.sendTransaction(await r(...c)),m=yp(t.runner);return new g8(t.interface,m,f)},o=async function(...c){const u=cm(t.runner,"estimateGas");return Ke(Iie(u),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await u.estimateGas(await r(...c))},a=async function(...c){const u=cm(t.runner,"call");Ke(_ie(u),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const f=await r(...c);let m="0x";try{m=await u.call(f)}catch(x){throw YL(x)&&x.data?t.interface.makeError(x.data,f):x}const g=n(...c);return t.interface.decodeFunctionResult(g,m)},l=async(...c)=>n(...c).constant?await i(...c):await s(...c);return Mt(l,{name:t.interface.getFunctionName(e),_contract:t,_key:e,getFragment:n,estimateGas:o,populateTransaction:r,send:s,staticCall:i,staticCallResult:a}),Object.defineProperty(l,"fragment",{configurable:!1,enumerable:!0,get:()=>{const c=t.interface.getFunction(e);return Ke(c,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),c}}),l}function f_e(t,e){const n=function(...i){const s=t.interface.getEvent(e,i);return Ke(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:i}}),s},r=function(...i){return new l_e(t,n(...i),i)};return Mt(r,{name:t.interface.getEventName(e),_contract:t,_key:e,getFragment:n}),Object.defineProperty(r,"fragment",{configurable:!1,enumerable:!0,get:()=>{const i=t.interface.getEvent(e);return Ke(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),i}}),r}const HT=Symbol.for("_ethersInternal_contract"),Mie=new WeakMap;function h_e(t,e){Mie.set(t[HT],e)}function Ro(t){return Mie.get(t[HT])}function p_e(t){return t&&typeof t=="object"&&"getTopicFilter"in t&&typeof t.getTopicFilter=="function"&&t.fragment}async function y8(t,e){let n,r=null;if(Array.isArray(e)){const s=function(o){if(gr(o,32))return o;const a=t.interface.getEvent(o);return xe(a,"unknown fragment","name",o),a.topicHash};n=e.map(o=>o==null?null:Array.isArray(o)?o.map(s):s(o))}else e==="*"?n=[null]:typeof e=="string"?gr(e,32)?n=[e]:(r=t.interface.getEvent(e),xe(r,"unknown fragment","event",e),n=[r.topicHash]):p_e(e)?n=await e.getTopicFilter():"fragment"in e?(r=e.fragment,n=[r.topicHash]):xe(!1,"unknown event name","event",e);n=n.map(s=>{if(s==null)return null;if(Array.isArray(s)){const o=Array.from(new Set(s.map(a=>a.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return s.toLowerCase()});const i=n.map(s=>s==null?"null":Array.isArray(s)?s.join("|"):s).join("&");return{fragment:r,tag:i,topics:n}}async function Sb(t,e){const{subs:n}=Ro(t);return n.get((await y8(t,e)).tag)||null}async function UH(t,e,n){const r=yp(t.runner);Ke(r,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:i,tag:s,topics:o}=await y8(t,n),{addr:a,subs:l}=Ro(t);let c=l.get(s);if(!c){const f={address:a||t,topics:o},m=w=>{let E=i;if(E==null)try{E=t.interface.getEvent(w.topics[0])}catch{}if(E){const C=E,k=i?t.interface.decodeEventLog(i,w.data,w.topics):[];$4(t,n,k,O=>new a_e(t,O,n,C,w))}else $4(t,n,[],C=>new Nie(t,C,n,w))};let g=[];c={tag:s,listeners:[],start:()=>{g.length||g.push(r.on(f,m))},stop:async()=>{if(g.length==0)return;let w=g;g=[],await Promise.all(w),r.off(f,m)}},l.set(s,c)}return c}let F4=Promise.resolve();async function m_e(t,e,n,r){await F4;const i=await Sb(t,e);if(!i)return!1;const s=i.listeners.length;return i.listeners=i.listeners.filter(({listener:o,once:a})=>{const l=Array.from(n);r&&l.push(r(a?null:o));try{o.call(t,...l)}catch{}return!a}),i.listeners.length===0&&(i.stop(),Ro(t).subs.delete(i.tag)),s>0}async function $4(t,e,n,r){try{await F4}catch{}const i=m_e(t,e,n,r);return F4=i,await i}const FS=["then"];var qZ;qZ=HT;const Yb=class Yb{constructor(e,n,r,i){Se(this,"target");Se(this,"interface");Se(this,"runner");Se(this,"filters");Se(this,qZ);Se(this,"fallback");xe(typeof e=="string"||jre(e),"invalid value for Contract target","target",e),r==null&&(r=null);const s=U4.from(n);Mt(this,{target:e,runner:r,interface:s}),Object.defineProperty(this,HT,{value:{}});let o,a=null,l=null;if(i){const f=yp(r);l=new g8(this.interface,f,i)}let c=new Map;if(typeof e=="string")if(gr(e))a=e,o=Promise.resolve(e);else{const f=cm(r,"resolveName");if(!o2(f))throw Pr("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=f.resolveName(e).then(m=>{if(m==null)throw Pr("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return Ro(this).addr=m,m})}else o=e.getAddress().then(f=>{if(f==null)throw new Error("TODO");return Ro(this).addr=f,f});h_e(this,{addrPromise:o,addr:a,deployTx:l,subs:c});const u=new Proxy({},{get:(f,m,g)=>{if(typeof m=="symbol"||FS.indexOf(m)>=0)return Reflect.get(f,m,g);try{return this.getEvent(m)}catch(x){if(!ss(x,"INVALID_ARGUMENT")||x.argument!=="key")throw x}},has:(f,m)=>FS.indexOf(m)>=0?Reflect.has(f,m):Reflect.has(f,m)||this.interface.hasEvent(String(m))});return Mt(this,{filters:u}),Mt(this,{fallback:s.receive||s.fallback?u_e(this):null}),new Proxy(this,{get:(f,m,g)=>{if(typeof m=="symbol"||m in f||FS.indexOf(m)>=0)return Reflect.get(f,m,g);try{return f.getFunction(m)}catch(x){if(!ss(x,"INVALID_ARGUMENT")||x.argument!=="key")throw x}},has:(f,m)=>typeof m=="symbol"||m in f||FS.indexOf(m)>=0?Reflect.has(f,m):f.interface.hasFunction(m)})}connect(e){return new Yb(this.target,this.interface,e)}attach(e){return new Yb(e,this.interface,this.runner)}async getAddress(){return await Ro(this).addrPromise}async getDeployedCode(){const e=yp(this.runner);Ke(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const n=await e.getCode(await this.getAddress());return n==="0x"?null:n}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const r=yp(this.runner);return Ke(r!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((i,s)=>{const o=async()=>{try{if(await this.getDeployedCode()!=null)return i(this);r.once("block",o)}catch(a){s(a)}};o()})}deploymentTransaction(){return Ro(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),d_e(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),f_e(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,n,r){n==null&&(n=0),r==null&&(r="latest");const{addr:i,addrPromise:s}=Ro(this),o=i||await s,{fragment:a,topics:l}=await y8(this,e),c={address:o,topics:l,fromBlock:n,toBlock:r},u=yp(this.runner);return Ke(u,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await u.getLogs(c)).map(f=>{let m=a;if(m==null)try{m=this.interface.getEvent(f.topics[0])}catch{}if(m)try{return new m8(f,this.interface,m)}catch(g){return new Cie(f,g)}return new T1(f,u)})}async on(e,n){const r=await UH(this,"on",e);return r.listeners.push({listener:n,once:!1}),r.start(),this}async once(e,n){const r=await UH(this,"once",e);return r.listeners.push({listener:n,once:!0}),r.start(),this}async emit(e,...n){return await $4(this,e,n,null)}async listenerCount(e){if(e){const i=await Sb(this,e);return i?i.listeners.length:0}const{subs:n}=Ro(this);let r=0;for(const{listeners:i}of n.values())r+=i.length;return r}async listeners(e){if(e){const i=await Sb(this,e);return i?i.listeners.map(({listener:s})=>s):[]}const{subs:n}=Ro(this);let r=[];for(const{listeners:i}of n.values())r=r.concat(i.map(({listener:s})=>s));return r}async off(e,n){const r=await Sb(this,e);if(!r)return this;if(n){const i=r.listeners.map(({listener:s})=>s).indexOf(n);i>=0&&r.listeners.splice(i,1)}return(n==null||r.listeners.length===0)&&(r.stop(),Ro(this).subs.delete(r.tag)),this}async removeAllListeners(e){if(e){const n=await Sb(this,e);if(!n)return this;n.stop(),Ro(this).subs.delete(n.tag)}else{const{subs:n}=Ro(this);for(const{tag:r,stop:i}of n.values())i(),n.delete(r)}return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return await this.off(e,n)}static buildClass(e){class n extends Yb{constructor(i,s=null){super(i,e,s)}}return n}static from(e,n,r){return r==null&&(r=null),new this(e,n,r)}};let z4=Yb;function g_e(){return z4}class Fg extends g_e(){}function eR(t){return t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):xe(!1,"unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}class y_e{constructor(e){Se(this,"name");Mt(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,n){throw new Error("unsupported coin")}async decodeAddress(e,n){throw new Error("unsupported coin")}}const Die=new RegExp("^(ipfs)://(.*)$","i"),FH=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),Die,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var Df,Lp,Lf,ig,RC,Lie;const Cg=class Cg{constructor(e,n,r){je(this,Lf);Se(this,"provider");Se(this,"address");Se(this,"name");je(this,Df);je(this,Lp);Mt(this,{provider:e,address:n,name:r}),ge(this,Df,null),ge(this,Lp,new Fg(n,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e))}async supportsWildcard(){return ie(this,Df)==null&&ge(this,Df,(async()=>{try{return await ie(this,Lp).supportsInterface("0x9061b923")}catch(e){if(ss(e,"CALL_EXCEPTION"))return!1;throw ge(this,Df,null),e}})()),await ie(this,Df)}async getAddress(e){if(e==null&&(e=60),e===60)try{const s=await tt(this,Lf,ig).call(this,"addr(bytes32)");return s==null||s===dw?null:s}catch(s){if(ss(s,"CALL_EXCEPTION"))return null;throw s}if(e>=0&&e<2147483648){let s=e+2147483648;const o=await tt(this,Lf,ig).call(this,"addr(bytes32,uint)",[s]);if(gr(o,20))return xn(o)}let n=null;for(const s of this.provider.plugins)if(s instanceof y_e&&s.supportsCoinType(e)){n=s;break}if(n==null)return null;const r=await tt(this,Lf,ig).call(this,"addr(bytes32,uint)",[e]);if(r==null||r==="0x")return null;const i=await n.decodeAddress(e,r);if(i!=null)return i;Ke(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:r}})}async getText(e){const n=await tt(this,Lf,ig).call(this,"text(bytes32,string)",[e]);return n==null||n==="0x"?null:n}async getContentHash(){const e=await tt(this,Lf,ig).call(this,"contenthash(bytes32)");if(e==null||e==="0x")return null;const n=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const i=n[1]==="e3010170"?"ipfs":"ipns",s=parseInt(n[4],16);if(n[5].length===s*2)return`${i}://${Ene("0x"+n[2])}`}const r=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&r[1].length===64)return`bzz://${r[1]}`;Ke(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const n=await this.getText("avatar");if(n==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:n});for(let r=0;r<FH.length;r++){const i=n.match(FH[r]);if(i==null)continue;const s=i[1].toLowerCase();switch(s){case"https":case"data":return e.push({type:"url",value:n}),{linkage:e,url:n};case"ipfs":{const o=eR(n);return e.push({type:"ipfs",value:n}),e.push({type:"url",value:o}),{linkage:e,url:o}}case"erc721":case"erc1155":{const o=s==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:s,value:n});const a=await this.getAddress();if(a==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const l=(i[2]||"").split("/");if(l.length!==2)return e.push({type:`!${s}caip`,value:i[2]||""}),{url:null,linkage:e};const c=l[1],u=new Fg(l[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(s==="erc721"){const v=await u.ownerOf(c);if(a!==v)return e.push({type:"!owner",value:v}),{url:null,linkage:e};e.push({type:"owner",value:v})}else if(s==="erc1155"){const v=await u.balanceOf(a,c);if(!v)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:v.toString()})}let f=await u[o](c);if(f==null||f==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:f}),s==="erc1155"&&(f=f.replace("{id}",id(c,32).substring(2)),e.push({type:"metadata-url-expanded",value:f})),f.match(/^ipfs:/i)&&(f=eR(f)),e.push({type:"metadata-url",value:f});let m={};const g=await new sd(f).send();g.assertOk();try{m=g.bodyJson}catch{try{e.push({type:"!metadata",value:g.bodyText})}catch{const E=g.body;return E&&e.push({type:"!metadata",value:rt(E)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!m)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(m)});let x=m.image;if(typeof x!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!x.match(/^(https:\/\/|data:)/i)){if(x.match(Die)==null)return e.push({type:"!imageUrl-ipfs",value:x}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:x}),x=eR(x)}return e.push({type:"url",value:x}),{linkage:e,url:x}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){const n=await e.getNetwork(),r=n.getPlugin("org.ethers.plugins.network.Ens");return Ke(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:n}}),r.address}static async fromName(e,n){var i;let r=n;for(;;){if(r===""||r==="."||n!=="eth"&&r==="eth")return null;const s=await tt(i=Cg,RC,Lie).call(i,e,r);if(s!=null){const o=new Cg(e,s,n);return r!==n&&!await o.supportsWildcard()?null:o}r=r.split(".").slice(1).join(".")}}};Df=new WeakMap,Lp=new WeakMap,Lf=new WeakSet,ig=async function(e,n){n=(n||[]).slice();const r=ie(this,Lp).interface;n.unshift(B4(this.name));let i=null;await this.supportsWildcard()&&(i=r.getFunction(e),Ke(i,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),n=[RNe(this.name,255),r.encodeFunctionData(i,n)],e="resolve(bytes,bytes)"),n.push({enableCcipRead:!0});try{const s=await ie(this,Lp)[e](...n);return i?r.decodeFunctionResult(i,s)[0]:s}catch(s){if(!ss(s,"CALL_EXCEPTION"))throw s}return null},RC=new WeakSet,Lie=async function(e,n){const r=await Cg.getEnsAddress(e);try{const s=await new Fg(r,["function resolver(bytes32) view returns (address)"],e).resolver(B4(n),{enableCcipRead:!0});return s===dw?null:s}catch(i){throw i}return null},je(Cg,RC);let VT=Cg;const $H=BigInt(0);function Nn(t,e){return(function(n){return n==null?e:t(n)})}function bw(t,e){return(n=>{if(e&&n==null)return null;if(!Array.isArray(n))throw new Error("not an array");return n.map(r=>t(r))})}function k1(t,e){return(n=>{const r={};for(const i in t){let s=i;if(e&&i in e&&!(s in n)){for(const o of e[i])if(o in n){s=o;break}}try{const o=t[i](n[s]);o!==void 0&&(r[i]=o)}catch(o){const a=o instanceof Error?o.message:"not-an-error";Ke(!1,`invalid value for value.${i} (${a})`,"BAD_DATA",{value:n})}}return r})}function x_e(t){switch(t){case!0:case"true":return!0;case!1:case"false":return!1}xe(!1,`invalid boolean; ${JSON.stringify(t)}`,"value",t)}function nx(t){return xe(gr(t,!0),"invalid data","value",t),t}function rs(t){return xe(gr(t,32),"invalid hash","value",t),t}const v_e=k1({address:xn,blockHash:rs,blockNumber:Qt,data:nx,index:Qt,removed:Nn(x_e,!1),topics:bw(rs),transactionHash:rs,transactionIndex:Qt},{index:["logIndex"]});function b_e(t){return v_e(t)}const w_e=k1({hash:Nn(rs),parentHash:rs,parentBeaconBlockRoot:Nn(rs,null),number:Qt,timestamp:Qt,nonce:Nn(nx),difficulty:wt,gasLimit:wt,gasUsed:wt,stateRoot:Nn(rs,null),receiptsRoot:Nn(rs,null),blobGasUsed:Nn(wt,null),excessBlobGas:Nn(wt,null),miner:Nn(xn),prevRandao:Nn(rs,null),extraData:nx,baseFeePerGas:Nn(wt)},{prevRandao:["mixHash"]});function E_e(t){const e=w_e(t);return e.transactions=t.transactions.map(n=>typeof n=="string"?n:Bie(n)),e}const S_e=k1({transactionIndex:Qt,blockNumber:Qt,transactionHash:rs,address:xn,topics:bw(rs),data:nx,index:Qt,blockHash:rs},{index:["logIndex"]});function A_e(t){return S_e(t)}const T_e=k1({to:Nn(xn,null),from:Nn(xn,null),contractAddress:Nn(xn,null),index:Qt,root:Nn(rt),gasUsed:wt,blobGasUsed:Nn(wt,null),logsBloom:Nn(nx),blockHash:rs,hash:rs,logs:bw(A_e),blockNumber:Qt,cumulativeGasUsed:wt,effectiveGasPrice:Nn(wt),blobGasPrice:Nn(wt,null),status:Nn(Qt),type:Nn(Qt,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function k_e(t){return T_e(t)}function Bie(t){t.to&&wt(t.to)===$H&&(t.to="0x0000000000000000000000000000000000000000");const e=k1({hash:rs,index:Nn(Qt,void 0),type:n=>n==="0x"||n==null?0:Qt(n),accessList:Nn(Nm,null),blobVersionedHashes:Nn(bw(rs,!0),null),authorizationList:Nn(bw(n=>{let r;if(n.signature)r=n.signature;else{let i=n.yParity;i==="0x1b"?i=0:i==="0x1c"&&(i=1),r=Object.assign({},n,{yParity:i})}return{address:xn(n.address),chainId:wt(n.chainId),nonce:wt(n.nonce),signature:qs.from(r)}},!1),null),blockHash:Nn(rs,null),blockNumber:Nn(Qt,null),transactionIndex:Nn(Qt,null),from:xn,gasPrice:Nn(wt),maxPriorityFeePerGas:Nn(wt),maxFeePerGas:Nn(wt),maxFeePerBlobGas:Nn(wt,null),gasLimit:wt,to:Nn(xn,null),value:wt,nonce:Qt,data:nx,creates:Nn(xn,null),chainId:Nn(wt,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(t);if(e.to==null&&e.creates==null&&(e.creates=m2e(e)),(t.type===1||t.type===2)&&t.accessList==null&&(e.accessList=[]),t.signature?e.signature=qs.from(t.signature):e.signature=qs.from(t),e.chainId==null){const n=e.signature.legacyChainId;n!=null&&(e.chainId=n)}return e.blockHash&&wt(e.blockHash)===$H&&(e.blockHash=null),e}const C_e="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class Px{constructor(e){Se(this,"name");Mt(this,{name:e})}clone(){return new Px(this.name)}}class a2 extends Px{constructor(n,r){n==null&&(n=0);super(`org.ethers.network.plugins.GasCost#${n||0}`);Se(this,"effectiveBlock");Se(this,"txBase");Se(this,"txCreate");Se(this,"txDataZero");Se(this,"txDataNonzero");Se(this,"txAccessListStorageKey");Se(this,"txAccessListAddress");const i={effectiveBlock:n};function s(o,a){let l=(r||{})[o];l==null&&(l=a),xe(typeof l=="number",`invalud value for ${o}`,"costs",r),i[o]=l}s("txBase",21e3),s("txCreate",32e3),s("txDataZero",4),s("txDataNonzero",16),s("txAccessListStorageKey",1900),s("txAccessListAddress",2400),Mt(this,i)}clone(){return new a2(this.effectiveBlock,this)}}class l2 extends Px{constructor(n,r){super("org.ethers.plugins.network.Ens");Se(this,"address");Se(this,"targetNetwork");Mt(this,{address:n||C_e,targetNetwork:r??1})}clone(){return new l2(this.address,this.targetNetwork)}}var Bp;const Yj=class Yj extends Px{constructor(n){super("org.ethers.plugins.network.FeeData");je(this,Bp);ge(this,Bp,n)}get feeDataFunc(){return ie(this,Bp)}async getFeeData(n){return await ie(this,Bp).call(this,n)}clone(){return new Yj(ie(this,Bp))}};Bp=new WeakMap;let zH=Yj;var i1,s1;class N_e extends Px{constructor(n,r){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");je(this,i1);je(this,s1);ge(this,i1,n),ge(this,s1,r)}get url(){return ie(this,i1)}get processFunc(){return ie(this,s1)}clone(){return this}}i1=new WeakMap,s1=new WeakMap;const tR=new Map;var Ny,_y,Bf;const Ng=class Ng{constructor(e,n){je(this,Ny);je(this,_y);je(this,Bf);ge(this,Ny,e),ge(this,_y,wt(n)),ge(this,Bf,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return ie(this,Ny)}set name(e){ge(this,Ny,e)}get chainId(){return ie(this,_y)}set chainId(e){ge(this,_y,wt(e,"chainId"))}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===wt(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===wt(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===wt(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(ie(this,Bf).values())}attachPlugin(e){if(ie(this,Bf).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return ie(this,Bf).set(e.name,e.clone()),this}getPlugin(e){return ie(this,Bf).get(e)||null}getPlugins(e){return this.plugins.filter(n=>n.name.split("#")[0]===e)}clone(){const e=new Ng(this.name,this.chainId);return this.plugins.forEach(n=>{e.attachPlugin(n.clone())}),e}computeIntrinsicGas(e){const n=this.getPlugin("org.ethers.plugins.network.GasCost")||new a2;let r=n.txBase;if(e.to==null&&(r+=n.txCreate),e.data)for(let i=2;i<e.data.length;i+=2)e.data.substring(i,i+2)==="00"?r+=n.txDataZero:r+=n.txDataNonzero;if(e.accessList){const i=Nm(e.accessList);for(const s in i)r+=n.txAccessListAddress+n.txAccessListStorageKey*i[s].storageKeys.length}return r}static from(e){if(__e(),e==null)return Ng.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){const n=tR.get(e);if(n)return n();if(typeof e=="bigint")return new Ng("unknown",e);xe(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){xe(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);const n=new Ng(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&n.attachPlugin(new l2(e.ensAddress,e.ensNetwork)),n}xe(!1,"invalid network","network",e)}static register(e,n){typeof e=="number"&&(e=BigInt(e));const r=tR.get(e);r&&xe(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",e),tR.set(e,n)}};Ny=new WeakMap,_y=new WeakMap,Bf=new WeakMap;let mc=Ng;function HH(t,e){const n=String(t);if(!n.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${t}`);const r=n.split(".");if(r.length===1&&r.push(""),r.length!==2)throw new Error(`invalid gwei value: ${t}`);for(;r[1].length<e;)r[1]+="0";if(r[1].length>9){let i=BigInt(r[1].substring(0,9));r[1].substring(9).match(/^0+$/)||i++,r[1]=i.toString()}return BigInt(r[0]+r[1])}function VH(t){return new N_e(t,async(e,n,r)=>{r.setHeader("User-Agent","ethers");let i;try{const[s,o]=await Promise.all([r.send(),e()]);i=s;const a=i.bodyJson.standard;return{gasPrice:o.gasPrice,maxFeePerGas:HH(a.maxFee,9),maxPriorityFeePerGas:HH(a.maxPriorityFee,9)}}catch(s){Ke(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:i,error:s})}})}let qH=!1;function __e(){if(qH)return;qH=!0;function t(e,n,r){const i=function(){const s=new mc(e,n);return r.ensNetwork!=null&&s.attachPlugin(new l2(null,r.ensNetwork)),s.attachPlugin(new a2),(r.plugins||[]).forEach(o=>{s.attachPlugin(o)}),s};mc.register(e,i),mc.register(n,i),r.altNames&&r.altNames.forEach(s=>{mc.register(s,i)})}t("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),t("ropsten",3,{ensNetwork:3}),t("rinkeby",4,{ensNetwork:4}),t("goerli",5,{ensNetwork:5}),t("kovan",42,{ensNetwork:42}),t("sepolia",11155111,{ensNetwork:11155111}),t("holesky",17e3,{ensNetwork:17e3}),t("classic",61,{}),t("classicKotti",6,{}),t("arbitrum",42161,{ensNetwork:1}),t("arbitrum-goerli",421613,{}),t("arbitrum-sepolia",421614,{}),t("base",8453,{ensNetwork:1}),t("base-goerli",84531,{}),t("base-sepolia",84532,{}),t("bnb",56,{ensNetwork:1}),t("bnbt",97,{}),t("filecoin",314,{}),t("filecoin-calibration",314159,{}),t("linea",59144,{ensNetwork:1}),t("linea-goerli",59140,{}),t("linea-sepolia",59141,{}),t("matic",137,{ensNetwork:1,plugins:[VH("https://gasstation.polygon.technology/v2")]}),t("matic-amoy",80002,{}),t("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[VH("https://gasstation-testnet.polygon.technology/v2")]}),t("optimism",10,{ensNetwork:1,plugins:[]}),t("optimism-goerli",420,{}),t("optimism-sepolia",11155420,{}),t("xdai",100,{ensNetwork:1})}function H4(t){return JSON.parse(JSON.stringify(t))}var _u,Aa,jf,ic,Iy,tT;class I_e{constructor(e){je(this,Iy);je(this,_u);je(this,Aa);je(this,jf);je(this,ic);ge(this,_u,e),ge(this,Aa,null),ge(this,jf,4e3),ge(this,ic,-2)}get pollingInterval(){return ie(this,jf)}set pollingInterval(e){ge(this,jf,e)}start(){ie(this,Aa)||(ge(this,Aa,ie(this,_u)._setTimeout(tt(this,Iy,tT).bind(this),ie(this,jf))),tt(this,Iy,tT).call(this))}stop(){ie(this,Aa)&&(ie(this,_u)._clearTimeout(ie(this,Aa)),ge(this,Aa,null))}pause(e){this.stop(),e&&ge(this,ic,-2)}resume(){this.start()}}_u=new WeakMap,Aa=new WeakMap,jf=new WeakMap,ic=new WeakMap,Iy=new WeakSet,tT=async function(){try{const e=await ie(this,_u).getBlockNumber();if(ie(this,ic)===-2){ge(this,ic,e);return}if(e!==ie(this,ic)){for(let n=ie(this,ic)+1;n<=e;n++){if(ie(this,Aa)==null)return;await ie(this,_u).emit("block",n)}ge(this,ic,e)}}catch{}ie(this,Aa)!=null&&ge(this,Aa,ie(this,_u)._setTimeout(tt(this,Iy,tT).bind(this),ie(this,jf)))};var jp,Up,Uf;class x8{constructor(e){je(this,jp);je(this,Up);je(this,Uf);ge(this,jp,e),ge(this,Uf,!1),ge(this,Up,n=>{this._poll(n,ie(this,jp))})}async _poll(e,n){throw new Error("sub-classes must override this")}start(){ie(this,Uf)||(ge(this,Uf,!0),ie(this,Up).call(this,-2),ie(this,jp).on("block",ie(this,Up)))}stop(){ie(this,Uf)&&(ge(this,Uf,!1),ie(this,jp).off("block",ie(this,Up)))}pause(e){this.stop()}resume(){this.start()}}jp=new WeakMap,Up=new WeakMap,Uf=new WeakMap;var Py,Iu;class P_e extends x8{constructor(n,r){super(n);je(this,Py);je(this,Iu);ge(this,Py,r),ge(this,Iu,-2)}pause(n){n&&ge(this,Iu,-2),super.pause(n)}async _poll(n,r){const i=await r.getBlock(ie(this,Py));i!=null&&(ie(this,Iu)===-2?ge(this,Iu,i.number):i.number>ie(this,Iu)&&(r.emit(ie(this,Py),i.number),ge(this,Iu,i.number)))}}Py=new WeakMap,Iu=new WeakMap;var OC;class R_e extends x8{constructor(n,r){super(n);je(this,OC);ge(this,OC,H4(r))}async _poll(n,r){throw new Error("@TODO")}}OC=new WeakMap;var Ry;class O_e extends x8{constructor(n,r){super(n);je(this,Ry);ge(this,Ry,r)}async _poll(n,r){const i=await r.getTransactionReceipt(ie(this,Ry));i&&r.emit(ie(this,Ry),i)}}Ry=new WeakMap;var Pu,Oy,My,Ff,Ta,MC,jie;class v8{constructor(e,n){je(this,MC);je(this,Pu);je(this,Oy);je(this,My);je(this,Ff);je(this,Ta);ge(this,Pu,e),ge(this,Oy,H4(n)),ge(this,My,tt(this,MC,jie).bind(this)),ge(this,Ff,!1),ge(this,Ta,-2)}start(){ie(this,Ff)||(ge(this,Ff,!0),ie(this,Ta)===-2&&ie(this,Pu).getBlockNumber().then(e=>{ge(this,Ta,e)}),ie(this,Pu).on("block",ie(this,My)))}stop(){ie(this,Ff)&&(ge(this,Ff,!1),ie(this,Pu).off("block",ie(this,My)))}pause(e){this.stop(),e&&ge(this,Ta,-2)}resume(){this.start()}}Pu=new WeakMap,Oy=new WeakMap,My=new WeakMap,Ff=new WeakMap,Ta=new WeakMap,MC=new WeakSet,jie=async function(e){if(ie(this,Ta)===-2)return;const n=H4(ie(this,Oy));n.fromBlock=ie(this,Ta)+1,n.toBlock=e;const r=await ie(this,Pu).getLogs(n);if(r.length===0){ie(this,Ta)<e-60&&ge(this,Ta,e-60);return}for(const i of r)ie(this,Pu).emit(ie(this,Oy),i),ge(this,Ta,i.blockNumber)};const M_e=BigInt(2),D_e=10;function $S(t){return t&&typeof t.then=="function"}function nT(t,e){return t+":"+JSON.stringify(e,(n,r)=>{if(r==null)return"null";if(typeof r=="bigint")return`bigint:${r.toString()}`;if(typeof r=="string")return r.toLowerCase();if(typeof r=="object"&&!Array.isArray(r)){const i=Object.keys(r);return i.sort(),i.reduce((s,o)=>(s[o]=r[o],s),{})}return r})}class Uie{constructor(e){Se(this,"name");Mt(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function L_e(t){return JSON.parse(JSON.stringify(t))}function V4(t){return t=Array.from(new Set(t).values()),t.sort(),t}async function nR(t,e){if(t==null)throw new Error("invalid event");if(Array.isArray(t)&&(t={topics:t}),typeof t=="string")switch(t){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:t,tag:t}}if(gr(t,32)){const n=t.toLowerCase();return{type:"transaction",tag:nT("tx",{hash:n}),hash:n}}if(t.orphan){const n=t;return{type:"orphan",tag:nT("orphan",n),filter:L_e(n)}}if(t.address||t.topics){const n=t,r={topics:(n.topics||[]).map(i=>i==null?null:Array.isArray(i)?V4(i.map(s=>s.toLowerCase())):i.toLowerCase())};if(n.address){const i=[],s=[],o=a=>{gr(a)?i.push(a):s.push((async()=>{i.push(await Bi(a,e))})())};Array.isArray(n.address)?n.address.forEach(o):o(n.address),s.length&&await Promise.all(s),r.address=V4(i.map(a=>a.toLowerCase()))}return{filter:r,tag:nT("event",r),type:"event"}}xe(!1,"unknown ProviderEvent","event",t)}function rR(){return new Date().getTime()}const B_e={cacheTimeout:250,pollingInterval:4e3};var xs,$f,vs,Dy,Lo,Fp,zf,Ru,o1,ka,Ly,By,vn,Io,q4,G4,Ab,K4,Tb,rT;class j_e{constructor(e,n){je(this,vn);je(this,xs);je(this,$f);je(this,vs);je(this,Dy);je(this,Lo);je(this,Fp);je(this,zf);je(this,Ru);je(this,o1);je(this,ka);je(this,Ly);je(this,By);if(ge(this,By,Object.assign({},B_e,n||{})),e==="any")ge(this,Fp,!0),ge(this,Lo,null);else if(e){const r=mc.from(e);ge(this,Fp,!1),ge(this,Lo,Promise.resolve(r)),setTimeout(()=>{this.emit("network",r,null)},0)}else ge(this,Fp,!1),ge(this,Lo,null);ge(this,Ru,-1),ge(this,zf,new Map),ge(this,xs,new Map),ge(this,$f,new Map),ge(this,vs,null),ge(this,Dy,!1),ge(this,o1,1),ge(this,ka,new Map),ge(this,Ly,!1)}get pollingInterval(){return ie(this,By).pollingInterval}get provider(){return this}get plugins(){return Array.from(ie(this,$f).values())}attachPlugin(e){if(ie(this,$f).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return ie(this,$f).set(e.name,e.connect(this)),this}getPlugin(e){return ie(this,$f).get(e)||null}get disableCcipRead(){return ie(this,Ly)}set disableCcipRead(e){ge(this,Ly,!!e)}async ccipReadFetch(e,n,r){if(this.disableCcipRead||r.length===0||e.to==null)return null;const i=e.to.toLowerCase(),s=n.toLowerCase(),o=[];for(let a=0;a<r.length;a++){const l=r[a],c=l.replace("{sender}",i).replace("{data}",s),u=new sd(c);l.indexOf("{data}")===-1&&(u.body={data:s,sender:i}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:u,index:a,urls:r});let f="unknown error",m;try{m=await u.send()}catch(g){o.push(g.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:{error:g}});continue}try{const g=m.bodyJson;if(g.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:u,result:g}),g.data;g.message&&(f=g.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:g})}catch{}Ke(m.statusCode<400||m.statusCode>=500,`response not found during CCIP fetch: ${f}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:l,errorMessage:f}}),o.push(f)}Ke(!1,`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:r,errorMessages:o}})}_wrapBlock(e,n){return new r_e(E_e(e),this)}_wrapLog(e,n){return new T1(b_e(e),this)}_wrapTransactionReceipt(e,n){return new Aie(k_e(e),this)}_wrapTransactionResponse(e,n){return new vw(Bie(e),this)}_detectNetwork(){Ke(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){Ke(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=Qt(await tt(this,vn,Io).call(this,{method:"getBlockNumber"}),"%response");return ie(this,Ru)>=0&&ge(this,Ru,e),e}_getAddress(e){return Bi(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(gr(e))return gr(e,32)?e:fl(e);if(typeof e=="bigint"&&(e=Qt(e,"blockTag")),typeof e=="number")return e>=0?fl(e):ie(this,Ru)>=0?fl(ie(this,Ru)+e):this.getBlockNumber().then(n=>fl(n+e));xe(!1,"invalid blockTag","blockTag",e)}_getFilter(e){const n=(e.topics||[]).map(l=>l==null?null:Array.isArray(l)?V4(l.map(c=>c.toLowerCase())):l.toLowerCase()),r="blockHash"in e?e.blockHash:void 0,i=(l,c,u)=>{let f;switch(l.length){case 0:break;case 1:f=l[0];break;default:l.sort(),f=l}if(r&&(c!=null||u!=null))throw new Error("invalid filter");const m={};return f&&(m.address=f),n.length&&(m.topics=n),c&&(m.fromBlock=c),u&&(m.toBlock=u),r&&(m.blockHash=r),m};let s=[];if(e.address)if(Array.isArray(e.address))for(const l of e.address)s.push(this._getAddress(l));else s.push(this._getAddress(e.address));let o;"fromBlock"in e&&(o=this._getBlockTag(e.fromBlock));let a;return"toBlock"in e&&(a=this._getBlockTag(e.toBlock)),s.filter(l=>typeof l!="string").length||o!=null&&typeof o!="string"||a!=null&&typeof a!="string"?Promise.all([Promise.all(s),o,a]).then(l=>i(l[0],l[1],l[2])):i(s,o,a)}_getTransactionRequest(e){const n=xw(e),r=[];if(["to","from"].forEach(i=>{if(n[i]==null)return;const s=Bi(n[i],this);$S(s)?r.push((async function(){n[i]=await s})()):n[i]=s}),n.blockTag!=null){const i=this._getBlockTag(n.blockTag);$S(i)?r.push((async function(){n.blockTag=await i})()):n.blockTag=i}return r.length?(async function(){return await Promise.all(r),n})():n}async getNetwork(){if(ie(this,Lo)==null){const i=(async()=>{try{const s=await this._detectNetwork();return this.emit("network",s,null),s}catch(s){throw ie(this,Lo)===i&&ge(this,Lo,null),s}})();return ge(this,Lo,i),(await i).clone()}const e=ie(this,Lo),[n,r]=await Promise.all([e,this._detectNetwork()]);return n.chainId!==r.chainId&&(ie(this,Fp)?(this.emit("network",r,n),ie(this,Lo)===e&&ge(this,Lo,Promise.resolve(r))):Ke(!1,`network changed: ${n.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),n.clone()}async getFeeData(){const e=await this.getNetwork(),n=async()=>{const{_block:i,gasPrice:s,priorityFee:o}=await Es({_block:tt(this,vn,K4).call(this,"latest",!1),gasPrice:(async()=>{try{const u=await tt(this,vn,Io).call(this,{method:"getGasPrice"});return wt(u,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const u=await tt(this,vn,Io).call(this,{method:"getPriorityFee"});return wt(u,"%response")}catch{}return null})()});let a=null,l=null;const c=this._wrapBlock(i,e);return c&&c.baseFeePerGas&&(l=o??BigInt("1000000000"),a=c.baseFeePerGas*M_e+l),new BH(s,a,l)},r=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){const i=new sd(r.url),s=await r.processFunc(n,this,i);return new BH(s.gasPrice,s.maxFeePerGas,s.maxPriorityFeePerGas)}return await n()}async estimateGas(e){let n=this._getTransactionRequest(e);return $S(n)&&(n=await n),wt(await tt(this,vn,Io).call(this,{method:"estimateGas",transaction:n}),"%response")}async call(e){const{tx:n,blockTag:r}=await Es({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await tt(this,vn,G4).call(this,tt(this,vn,q4).call(this,n,r,e.enableCcipRead?0:-1))}async getBalance(e,n){return wt(await tt(this,vn,Ab).call(this,{method:"getBalance"},e,n),"%response")}async getTransactionCount(e,n){return Qt(await tt(this,vn,Ab).call(this,{method:"getTransactionCount"},e,n),"%response")}async getCode(e,n){return rt(await tt(this,vn,Ab).call(this,{method:"getCode"},e,n))}async getStorage(e,n,r){const i=wt(n,"position");return rt(await tt(this,vn,Ab).call(this,{method:"getStorage",position:i},e,r))}async broadcastTransaction(e){const{blockNumber:n,hash:r,network:i}=await Es({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),s=u8.from(e);if(s.hash!==r)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(s,i).replaceableTransaction(n)}async getBlock(e,n){const{network:r,params:i}=await Es({network:this.getNetwork(),params:tt(this,vn,K4).call(this,e,!!n)});return i==null?null:this._wrapBlock(i,r)}async getTransaction(e){const{network:n,params:r}=await Es({network:this.getNetwork(),params:tt(this,vn,Io).call(this,{method:"getTransaction",hash:e})});return r==null?null:this._wrapTransactionResponse(r,n)}async getTransactionReceipt(e){const{network:n,params:r}=await Es({network:this.getNetwork(),params:tt(this,vn,Io).call(this,{method:"getTransactionReceipt",hash:e})});if(r==null)return null;if(r.gasPrice==null&&r.effectiveGasPrice==null){const i=await tt(this,vn,Io).call(this,{method:"getTransaction",hash:e});if(i==null)throw new Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=i.gasPrice}return this._wrapTransactionReceipt(r,n)}async getTransactionResult(e){const{result:n}=await Es({network:this.getNetwork(),result:tt(this,vn,Io).call(this,{method:"getTransactionResult",hash:e})});return n==null?null:rt(n)}async getLogs(e){let n=this._getFilter(e);$S(n)&&(n=await n);const{network:r,params:i}=await Es({network:this.getNetwork(),params:tt(this,vn,Io).call(this,{method:"getLogs",filter:n})});return i.map(s=>this._wrapLog(s,r))}_getProvider(e){Ke(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await VT.fromName(this,e)}async getAvatar(e){const n=await this.getResolver(e);return n?await n.getAvatar():null}async resolveName(e){const n=await this.getResolver(e);return n?await n.getAddress():null}async lookupAddress(e){e=xn(e);const n=B4(e.substring(2).toLowerCase()+".addr.reverse");try{const r=await VT.getEnsAddress(this),s=await new Fg(r,["function resolver(bytes32) view returns (address)"],this).resolver(n);if(s==null||s===dw)return null;const a=await new Fg(s,["function name(bytes32) view returns (string)"],this).name(n);return await this.resolveName(a)!==e?null:a}catch(r){if(ss(r,"BAD_DATA")&&r.value==="0x"||ss(r,"CALL_EXCEPTION"))return null;throw r}return null}async waitForTransaction(e,n,r){const i=n??1;return i===0?this.getTransactionReceipt(e):new Promise(async(s,o)=>{let a=null;const l=(async c=>{try{const u=await this.getTransactionReceipt(e);if(u!=null&&c-u.blockNumber+1>=i){s(u),a&&(clearTimeout(a),a=null);return}}catch(u){console.log("EEE",u)}this.once("block",l)});r!=null&&(a=setTimeout(()=>{a!=null&&(a=null,this.off("block",l),o(Pr("timeout","TIMEOUT",{reason:"timeout"})))},r)),l(await this.getBlockNumber())})}async waitForBlock(e){Ke(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const n=ie(this,ka).get(e);n&&(n.timer&&clearTimeout(n.timer),ie(this,ka).delete(e))}_setTimeout(e,n){n==null&&(n=0);const r=Gv(this,o1)._++,i=()=>{ie(this,ka).delete(r),e()};if(this.paused)ie(this,ka).set(r,{timer:null,func:i,time:n});else{const s=setTimeout(i,n);ie(this,ka).set(r,{timer:s,func:i,time:rR()})}return r}_forEachSubscriber(e){for(const n of ie(this,xs).values())e(n.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new Uie(e.type);case"block":{const n=new I_e(this);return n.pollingInterval=this.pollingInterval,n}case"safe":case"finalized":return new P_e(this,e.type);case"event":return new v8(this,e.filter);case"transaction":return new O_e(this,e.hash);case"orphan":return new R_e(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,n){for(const r of ie(this,xs).values())if(r.subscriber===e){r.started&&r.subscriber.stop(),r.subscriber=n,r.started&&n.start(),ie(this,vs)!=null&&n.pause(ie(this,vs));break}}async on(e,n){const r=await tt(this,vn,rT).call(this,e);return r.listeners.push({listener:n,once:!1}),r.started||(r.subscriber.start(),r.started=!0,ie(this,vs)!=null&&r.subscriber.pause(ie(this,vs))),this}async once(e,n){const r=await tt(this,vn,rT).call(this,e);return r.listeners.push({listener:n,once:!0}),r.started||(r.subscriber.start(),r.started=!0,ie(this,vs)!=null&&r.subscriber.pause(ie(this,vs))),this}async emit(e,...n){const r=await tt(this,vn,Tb).call(this,e,n);if(!r||r.listeners.length===0)return!1;const i=r.listeners.length;return r.listeners=r.listeners.filter(({listener:s,once:o})=>{const a=new Sne(this,o?null:s,e);try{s.call(this,...n,a)}catch{}return!o}),r.listeners.length===0&&(r.started&&r.subscriber.stop(),ie(this,xs).delete(r.tag)),i>0}async listenerCount(e){if(e){const r=await tt(this,vn,Tb).call(this,e);return r?r.listeners.length:0}let n=0;for(const{listeners:r}of ie(this,xs).values())n+=r.length;return n}async listeners(e){if(e){const r=await tt(this,vn,Tb).call(this,e);return r?r.listeners.map(({listener:i})=>i):[]}let n=[];for(const{listeners:r}of ie(this,xs).values())n=n.concat(r.map(({listener:i})=>i));return n}async off(e,n){const r=await tt(this,vn,Tb).call(this,e);if(!r)return this;if(n){const i=r.listeners.map(({listener:s})=>s).indexOf(n);i>=0&&r.listeners.splice(i,1)}return(!n||r.listeners.length===0)&&(r.started&&r.subscriber.stop(),ie(this,xs).delete(r.tag)),this}async removeAllListeners(e){if(e){const{tag:n,started:r,subscriber:i}=await tt(this,vn,rT).call(this,e);r&&i.stop(),ie(this,xs).delete(n)}else for(const[n,{started:r,subscriber:i}]of ie(this,xs))r&&i.stop(),ie(this,xs).delete(n);return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return this.off(e,n)}get destroyed(){return ie(this,Dy)}destroy(){this.removeAllListeners();for(const e of ie(this,ka).keys())this._clearTimeout(e);ge(this,Dy,!0)}get paused(){return ie(this,vs)!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(ge(this,Ru,-1),ie(this,vs)!=null){if(ie(this,vs)==!!e)return;Ke(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(n=>n.pause(e)),ge(this,vs,!!e);for(const n of ie(this,ka).values())n.timer&&clearTimeout(n.timer),n.time=rR()-n.time}resume(){if(ie(this,vs)!=null){this._forEachSubscriber(e=>e.resume()),ge(this,vs,null);for(const e of ie(this,ka).values()){let n=e.time;n<0&&(n=0),e.time=rR(),setTimeout(e.func,n)}}}}xs=new WeakMap,$f=new WeakMap,vs=new WeakMap,Dy=new WeakMap,Lo=new WeakMap,Fp=new WeakMap,zf=new WeakMap,Ru=new WeakMap,o1=new WeakMap,ka=new WeakMap,Ly=new WeakMap,By=new WeakMap,vn=new WeakSet,Io=async function(e){const n=ie(this,By).cacheTimeout;if(n<0)return await this._perform(e);const r=nT(e.method,e);let i=ie(this,zf).get(r);return i||(i=this._perform(e),ie(this,zf).set(r,i),setTimeout(()=>{ie(this,zf).get(r)===i&&ie(this,zf).delete(r)},n)),await i},q4=async function(e,n,r){Ke(r<D_e,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:n,enableCcipRead:!0})});const i=xw(e);try{return rt(await this._perform({method:"call",transaction:i,blockTag:n}))}catch(s){if(!this.disableCcipRead&&YL(s)&&s.data&&r>=0&&n==="latest"&&i.to!=null&&mr(s.data,0,4)==="0x556f1830"){const o=s.data,a=await Bi(i.to,this);let l;try{l=H_e(mr(s.data,4))}catch(f){Ke(!1,f.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:i,info:{data:o}})}Ke(l.sender.toLowerCase()===a.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:i,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:l.errorArgs}});const c=await this.ccipReadFetch(i,l.calldata,l.urls);Ke(c!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:i,info:{data:s.data,errorArgs:l.errorArgs}});const u={to:a,data:On([l.selector,z_e([c,l.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:u});try{const f=await tt(this,vn,q4).call(this,u,n,r+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},u),result:f}),f}catch(f){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},u),error:f}),f}}throw s}},G4=async function(e){const{value:n}=await Es({network:this.getNetwork(),value:e});return n},Ab=async function(e,n,r){let i=this._getAddress(n),s=this._getBlockTag(r);return(typeof i!="string"||typeof s!="string")&&([i,s]=await Promise.all([i,s])),await tt(this,vn,G4).call(this,tt(this,vn,Io).call(this,Object.assign(e,{address:i,blockTag:s})))},K4=async function(e,n){if(gr(e,32))return await tt(this,vn,Io).call(this,{method:"getBlock",blockHash:e,includeTransactions:n});let r=this._getBlockTag(e);return typeof r!="string"&&(r=await r),await tt(this,vn,Io).call(this,{method:"getBlock",blockTag:r,includeTransactions:n})},Tb=async function(e,n){let r=await nR(e,this);return r.type==="event"&&n&&n.length>0&&n[0].removed===!0&&(r=await nR({orphan:"drop-log",log:n[0]},this)),ie(this,xs).get(r.tag)||null},rT=async function(e){const n=await nR(e,this),r=n.tag;let i=ie(this,xs).get(r);return i||(i={subscriber:this._getSubscriber(n),tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},ie(this,xs).set(r,i)),i};function U_e(t,e){try{const n=W4(t,e);if(n)return LT(n)}catch{}return null}function W4(t,e){if(t==="0x")return null;try{const n=Qt(mr(t,e,e+32)),r=Qt(mr(t,n,n+32));return mr(t,n+32,n+32+r)}catch{}return null}function GH(t){const e=Lr(t);if(e.length>32)throw new Error("internal; should not happen");const n=new Uint8Array(32);return n.set(e,32-e.length),n}function F_e(t){if(t.length%32===0)return t;const e=new Uint8Array(Math.ceil(t.length/32)*32);return e.set(t),e}const $_e=new Uint8Array([]);function z_e(t){const e=[];let n=0;for(let r=0;r<t.length;r++)e.push($_e),n+=32;for(let r=0;r<t.length;r++){const i=ht(t[r]);e[r]=GH(n),e.push(GH(i.length)),e.push(F_e(i)),n+=32+Math.ceil(i.length/32)*32}return On(e)}const KH="0x0000000000000000000000000000000000000000000000000000000000000000";function H_e(t){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};Ke(Dg(t)>=160,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const n=mr(t,0,32);Ke(mr(n,0,12)===mr(KH,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=mr(n,12);try{const r=[],i=Qt(mr(t,32,64)),s=Qt(mr(t,i,i+32)),o=mr(t,i+32);for(let a=0;a<s;a++){const l=U_e(o,a*32);if(l==null)throw new Error("abort");r.push(l)}e.urls=r}catch{Ke(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const r=W4(t,64);if(r==null)throw new Error("abort");e.calldata=r}catch{Ke(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}Ke(mr(t,100,128)===mr(KH,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=mr(t,96,100);try{const r=W4(t,128);if(r==null)throw new Error("abort");e.extraData=r}catch{Ke(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(r=>e[r]),e}function Vh(t,e){if(t.provider)return t.provider;Ke(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function WH(t,e){let n=xw(e);if(n.to!=null&&(n.to=Bi(n.to,t)),n.from!=null){const r=n.from;n.from=Promise.all([t.getAddress(),Bi(r,t)]).then(([i,s])=>(xe(i.toLowerCase()===s.toLowerCase(),"transaction from mismatch","tx.from",s),i))}else n.from=t.getAddress();return await Es(n)}class b8{constructor(e){Se(this,"provider");Mt(this,{provider:e||null})}async getNonce(e){return Vh(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await WH(this,e)}async populateTransaction(e){const n=Vh(this,"populateTransaction"),r=await WH(this,e);r.nonce==null&&(r.nonce=await this.getNonce("pending")),r.gasLimit==null&&(r.gasLimit=await this.estimateGas(r));const i=await this.provider.getNetwork();if(r.chainId!=null){const o=wt(r.chainId);xe(o===i.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else r.chainId=i.chainId;const s=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||s)?xe(!1,"eip-1559 transaction do not support gasPrice","tx",e):(r.type===0||r.type===1)&&s&&xe(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1){const o=await n.getFeeData();Ke(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice)}else{const o=await n.getFeeData();if(r.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(r.authorizationList&&r.authorizationList.length?r.type=4:r.type=2,r.gasPrice!=null){const a=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=a,r.maxPriorityFeePerGas=a}else r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(Ke(!s,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice),r.type=0):Ke(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(r.type===2||r.type===3||r.type===4)&&(r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await Es(r)}async populateAuthorization(e){const n=Object.assign({},e);return n.chainId==null&&(n.chainId=(await Vh(this,"getNetwork").getNetwork()).chainId),n.nonce==null&&(n.nonce=await this.getNonce()),n}async estimateGas(e){return Vh(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return Vh(this,"call").call(await this.populateCall(e))}async resolveName(e){return await Vh(this,"resolveName").resolveName(e)}async sendTransaction(e){const n=Vh(this,"sendTransaction"),r=await this.populateTransaction(e);delete r.from;const i=u8.from(r);return await n.broadcastTransaction(await this.signTransaction(i))}authorize(e){Ke(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}var jy,iT;const Jj=class Jj extends b8{constructor(n,r){super(r);je(this,jy);Se(this,"address");Mt(this,{address:n})}async getAddress(){return this.address}connect(n){return new Jj(this.address,n)}async signTransaction(n){tt(this,jy,iT).call(this,"transactions","signTransaction")}async signMessage(n){tt(this,jy,iT).call(this,"messages","signMessage")}async signTypedData(n,r,i){tt(this,jy,iT).call(this,"typed-data","signTypedData")}};jy=new WeakSet,iT=function(n,r){Ke(!1,`VoidSigner cannot sign ${n}`,"UNSUPPORTED_OPERATION",{operation:r})};let Y4=Jj;function V_e(t){return JSON.parse(JSON.stringify(t))}var Ds,sc,$p,Hf,zp,Uy,lh,J4,X4;class Fie{constructor(e){je(this,lh);je(this,Ds);je(this,sc);je(this,$p);je(this,Hf);je(this,zp);je(this,Uy);ge(this,Ds,e),ge(this,sc,null),ge(this,$p,tt(this,lh,J4).bind(this)),ge(this,Hf,!1),ge(this,zp,null),ge(this,Uy,!1)}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,n){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}start(){ie(this,Hf)||(ge(this,Hf,!0),tt(this,lh,J4).call(this,-2))}stop(){ie(this,Hf)&&(ge(this,Hf,!1),ge(this,Uy,!0),tt(this,lh,X4).call(this),ie(this,Ds).off("block",ie(this,$p)))}pause(e){e&&tt(this,lh,X4).call(this),ie(this,Ds).off("block",ie(this,$p))}resume(){this.start()}}Ds=new WeakMap,sc=new WeakMap,$p=new WeakMap,Hf=new WeakMap,zp=new WeakMap,Uy=new WeakMap,lh=new WeakSet,J4=async function(e){try{ie(this,sc)==null&&ge(this,sc,this._subscribe(ie(this,Ds)));let n=null;try{n=await ie(this,sc)}catch(s){if(!ss(s,"UNSUPPORTED_OPERATION")||s.operation!=="eth_newFilter")throw s}if(n==null){ge(this,sc,null),ie(this,Ds)._recoverSubscriber(this,this._recover(ie(this,Ds)));return}const r=await ie(this,Ds).getNetwork();if(ie(this,zp)||ge(this,zp,r),ie(this,zp).chainId!==r.chainId)throw new Error("chaid changed");if(ie(this,Uy))return;const i=await ie(this,Ds).send("eth_getFilterChanges",[n]);await this._emitResults(ie(this,Ds),i)}catch(n){console.log("@TODO",n)}ie(this,Ds).once("block",ie(this,$p))},X4=function(){const e=ie(this,sc);e&&(ge(this,sc,null),e.then(n=>{ie(this,Ds).destroyed||ie(this,Ds).send("eth_uninstallFilter",[n])}))};var Hp;class q_e extends Fie{constructor(n,r){super(n);je(this,Hp);ge(this,Hp,V_e(r))}_recover(n){return new v8(n,ie(this,Hp))}async _subscribe(n){return await n.send("eth_newFilter",[ie(this,Hp)])}async _emitResults(n,r){for(const i of r)n.emit(ie(this,Hp),n._wrapLog(i,n._network))}}Hp=new WeakMap;class G_e extends Fie{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,n){for(const r of n)e.emit("pending",r)}}const K_e="bigint,boolean,function,number,string,symbol".split(/,/g);function sT(t){if(t==null||K_e.indexOf(typeof t)>=0||typeof t.getAddress=="function")return t;if(Array.isArray(t))return t.map(sT);if(typeof t=="object")return Object.keys(t).reduce((e,n)=>(e[n]=t[n],e),{});throw new Error(`should not happen: ${t} (${typeof t})`)}function W_e(t){return new Promise(e=>{setTimeout(e,t)})}function R0(t){return t&&t.toLowerCase()}function YH(t){return t&&typeof t.pollingInterval=="number"}const $ie={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class iR extends b8{constructor(n,r){super(n);Se(this,"address");r=xn(r),Mt(this,{address:r})}connect(n){Ke(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(n){return await this.populateCall(n)}async sendUncheckedTransaction(n){const r=sT(n),i=[];if(r.from){const o=r.from;i.push((async()=>{const a=await Bi(o,this.provider);xe(a!=null&&a.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=a})())}else r.from=this.address;if(r.gasLimit==null&&i.push((async()=>{r.gasLimit=await this.provider.estimateGas({...r,from:this.address})})()),r.to!=null){const o=r.to;i.push((async()=>{r.to=await Bi(o,this.provider)})())}i.length&&await Promise.all(i);const s=this.provider.getRpcTransaction(r);return this.provider.send("eth_sendTransaction",[s])}async sendTransaction(n){const r=await this.provider.getBlockNumber(),i=await this.sendUncheckedTransaction(n);return await new Promise((s,o)=>{const a=[1e3,100];let l=0;const c=async()=>{try{const u=await this.provider.getTransaction(i);if(u!=null){s(u.replaceableTransaction(r));return}}catch(u){if(ss(u,"CANCELLED")||ss(u,"BAD_DATA")||ss(u,"NETWORK_ERROR")||ss(u,"UNSUPPORTED_OPERATION")){u.info==null&&(u.info={}),u.info.sendTransactionHash=i,o(u);return}if(ss(u,"INVALID_ARGUMENT")&&(l++,u.info==null&&(u.info={}),u.info.sendTransactionHash=i,l>10)){o(u);return}this.provider.emit("error",Pr("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:u}))}this.provider._setTimeout(()=>{c()},a.pop()||4e3)};c()})}async signTransaction(n){const r=sT(n);if(r.from){const s=await Bi(r.from,this.provider);xe(s!=null&&s.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=s}else r.from=this.address;const i=this.provider.getRpcTransaction(r);return await this.provider.send("eth_signTransaction",[i])}async signMessage(n){const r=typeof n=="string"?pi(n):n;return await this.provider.send("personal_sign",[rt(r),this.address.toLowerCase()])}async signTypedData(n,r,i){const s=sT(i),o=await om.resolveNames(n,r,s,async a=>{const l=await Bi(a);return xe(l!=null,"TypedData does not support null address","value",a),l});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(om.getPayload(o.domain,r,o.value))])}async unlock(n){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),n,null])}async _legacySignMessage(n){const r=typeof n=="string"?pi(n):n;return await this.provider.send("eth_sign",[this.address.toLowerCase(),rt(r)])}}var Vp,Fy,Ou,oc,ul,Ca,oo,a1,Q4;class Y_e extends j_e{constructor(n,r){super(n,r);je(this,a1);je(this,Vp);je(this,Fy);je(this,Ou);je(this,oc);je(this,ul);je(this,Ca);je(this,oo);ge(this,Fy,1),ge(this,Vp,Object.assign({},$ie,r||{})),ge(this,Ou,[]),ge(this,oc,null),ge(this,Ca,null),ge(this,oo,null);{let s=null;const o=new Promise(a=>{s=a});ge(this,ul,{promise:o,resolve:s})}const i=this._getOption("staticNetwork");typeof i=="boolean"?(xe(!i||n!=="any","staticNetwork cannot be used on special network 'any'","options",r),i&&n!=null&&ge(this,Ca,mc.from(n))):i&&(xe(n==null||i.matches(n),"staticNetwork MUST match network object","options",r),ge(this,Ca,i))}_getOption(n){return ie(this,Vp)[n]}get _network(){return Ke(ie(this,Ca),"network is not available yet","NETWORK_ERROR"),ie(this,Ca)}async _perform(n){if(n.method==="call"||n.method==="estimateGas"){let i=n.transaction;if(i&&i.type!=null&&wt(i.type)&&i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null){const s=await this.getFeeData();s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null&&(n=Object.assign({},n,{transaction:Object.assign({},i,{type:void 0})}))}}const r=this.getRpcRequest(n);return r!=null?await this.send(r.method,r.args):super._perform(n)}async _detectNetwork(){const n=this._getOption("staticNetwork");if(n)if(n===!0){if(ie(this,Ca))return ie(this,Ca)}else return n;return ie(this,oo)?await ie(this,oo):this.ready?(ge(this,oo,(async()=>{try{const r=mc.from(wt(await this.send("eth_chainId",[])));return ge(this,oo,null),r}catch(r){throw ge(this,oo,null),r}})()),await ie(this,oo)):(ge(this,oo,(async()=>{const r={id:Gv(this,Fy)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:r});let i;try{i=(await this._send(r))[0],ge(this,oo,null)}catch(s){throw ge(this,oo,null),this.emit("debug",{action:"receiveRpcError",error:s}),s}if(this.emit("debug",{action:"receiveRpcResult",result:i}),"result"in i)return mc.from(wt(i.result));throw this.getRpcError(r,i)})()),await ie(this,oo))}_start(){ie(this,ul)==null||ie(this,ul).resolve==null||(ie(this,ul).resolve(),ge(this,ul,null),(async()=>{for(;ie(this,Ca)==null&&!this.destroyed;)try{ge(this,Ca,await this._detectNetwork())}catch(n){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",Pr("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:n}})),await W_e(1e3)}tt(this,a1,Q4).call(this)})())}async _waitUntilReady(){if(ie(this,ul)!=null)return await ie(this,ul).promise}_getSubscriber(n){return n.type==="pending"?new G_e(this):n.type==="event"?this._getOption("polling")?new v8(this,n.filter):new q_e(this,n.filter):n.type==="orphan"&&n.filter.orphan==="drop-log"?new Uie("orphan"):super._getSubscriber(n)}get ready(){return ie(this,ul)==null}getRpcTransaction(n){const r={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(i=>{if(n[i]==null)return;let s=i;i==="gasLimit"&&(s="gas"),r[s]=fl(wt(n[i],`tx.${i}`))}),["from","to","data"].forEach(i=>{n[i]!=null&&(r[i]=rt(n[i]))}),n.accessList&&(r.accessList=Nm(n.accessList)),n.blobVersionedHashes&&(r.blobVersionedHashes=n.blobVersionedHashes.map(i=>i.toLowerCase())),n.authorizationList&&(r.authorizationList=n.authorizationList.map(i=>{const s=zre(i);return{address:s.address,nonce:fl(s.nonce),chainId:fl(s.chainId),yParity:fl(s.signature.yParity),r:fl(s.signature.r),s:fl(s.signature.s)}})),r}getRpcRequest(n){switch(n.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[R0(n.address),n.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[R0(n.address),n.blockTag]};case"getCode":return{method:"eth_getCode",args:[R0(n.address),n.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[R0(n.address),"0x"+n.position.toString(16),n.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[n.signedTransaction]};case"getBlock":if("blockTag"in n)return{method:"eth_getBlockByNumber",args:[n.blockTag,!!n.includeTransactions]};if("blockHash"in n)return{method:"eth_getBlockByHash",args:[n.blockHash,!!n.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[n.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[n.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(n.transaction),n.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(n.transaction)]};case"getLogs":return n.filter&&n.filter.address!=null&&(Array.isArray(n.filter.address)?n.filter.address=n.filter.address.map(R0):n.filter.address=R0(n.filter.address)),{method:"eth_getLogs",args:[n.filter]}}return null}getRpcError(n,r){const{method:i}=n,{error:s}=r;if(i==="eth_estimateGas"&&s.message){const l=s.message;if(!l.match(/revert/i)&&l.match(/insufficient funds/i))return Pr("insufficient funds","INSUFFICIENT_FUNDS",{transaction:n.params[0],info:{payload:n,error:s}});if(l.match(/nonce/i)&&l.match(/too low/i))return Pr("nonce has already been used","NONCE_EXPIRED",{transaction:n.params[0],info:{payload:n,error:s}})}if(i==="eth_call"||i==="eth_estimateGas"){const l=Z4(s),c=yw.getBuiltinCallException(i==="eth_call"?"call":"estimateGas",n.params[0],l?l.data:null);return c.info={error:s,payload:n},c}const o=JSON.stringify(Q_e(s));if(typeof s.message=="string"&&s.message.match(/user denied|ethers-user-denied/i))return Pr("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[i]||"unknown",reason:"rejected",info:{payload:n,error:s}});if(i==="eth_sendRawTransaction"||i==="eth_sendTransaction"){const l=n.params[0];if(o.match(/insufficient funds|base fee exceeds gas limit/i))return Pr("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:l,info:{error:s}});if(o.match(/nonce/i)&&o.match(/too low/i))return Pr("nonce has already been used","NONCE_EXPIRED",{transaction:l,info:{error:s}});if(o.match(/replacement transaction/i)&&o.match(/underpriced/i))return Pr("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:l,info:{error:s}});if(o.match(/only replay-protected/i))return Pr("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:i,info:{transaction:l,info:{error:s}}})}let a=!!o.match(/the method .* does not exist/i);return a||s&&s.details&&s.details.startsWith("Unauthorized method:")&&(a=!0),a?Pr("unsupported operation","UNSUPPORTED_OPERATION",{operation:n.method,info:{error:s,payload:n}}):Pr("could not coalesce error","UNKNOWN_ERROR",{error:s,payload:n})}send(n,r){if(this.destroyed)return Promise.reject(Pr("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n}));const i=Gv(this,Fy)._++,s=new Promise((o,a)=>{ie(this,Ou).push({resolve:o,reject:a,payload:{method:n,params:r,id:i,jsonrpc:"2.0"}})});return tt(this,a1,Q4).call(this),s}async getSigner(n){n==null&&(n=0);const r=this.send("eth_accounts",[]);if(typeof n=="number"){const s=await r;if(n>=s.length)throw new Error("no such account");return new iR(this,s[n])}const{accounts:i}=await Es({network:this.getNetwork(),accounts:r});n=xn(n);for(const s of i)if(xn(s)===n)return new iR(this,n);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(r=>new iR(this,r))}destroy(){ie(this,oc)&&(clearTimeout(ie(this,oc)),ge(this,oc,null));for(const{payload:n,reject:r}of ie(this,Ou))r(Pr("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n.method}));ge(this,Ou,[]),super.destroy()}}Vp=new WeakMap,Fy=new WeakMap,Ou=new WeakMap,oc=new WeakMap,ul=new WeakMap,Ca=new WeakMap,oo=new WeakMap,a1=new WeakSet,Q4=function(){if(ie(this,oc))return;const n=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");ge(this,oc,setTimeout(()=>{ge(this,oc,null);const r=ie(this,Ou);for(ge(this,Ou,[]);r.length;){const i=[r.shift()];for(;r.length&&i.length!==ie(this,Vp).batchMaxCount;)if(i.push(r.shift()),JSON.stringify(i.map(o=>o.payload)).length>ie(this,Vp).batchMaxSize){r.unshift(i.pop());break}(async()=>{const s=i.length===1?i[0].payload:i.map(o=>o.payload);this.emit("debug",{action:"sendRpcPayload",payload:s});try{const o=await this._send(s);this.emit("debug",{action:"receiveRpcResult",result:o});for(const{resolve:a,reject:l,payload:c}of i){if(this.destroyed){l(Pr("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:c.method}));continue}const u=o.filter(f=>f.id===c.id)[0];if(u==null){const f=Pr("missing response for request","BAD_DATA",{value:o,info:{payload:c}});this.emit("error",f),l(f);continue}if("error"in u){l(this.getRpcError(c,u));continue}a(u.result)}}catch(o){this.emit("debug",{action:"receiveRpcError",error:o});for(const{reject:a}of i)a(o)}})()}},n))};var Vf;class J_e extends Y_e{constructor(n,r){super(n,r);je(this,Vf);let i=this._getOption("pollingInterval");i==null&&(i=$ie.pollingInterval),ge(this,Vf,i)}_getSubscriber(n){const r=super._getSubscriber(n);return YH(r)&&(r.pollingInterval=ie(this,Vf)),r}get pollingInterval(){return ie(this,Vf)}set pollingInterval(n){if(!Number.isInteger(n)||n<0)throw new Error("invalid interval");ge(this,Vf,n),this._forEachSubscriber(r=>{YH(r)&&(r.pollingInterval=ie(this,Vf))})}}Vf=new WeakMap;var $y;class X_e extends J_e{constructor(n,r,i){n==null&&(n="http://localhost:8545");super(r,i);je(this,$y);typeof n=="string"?ge(this,$y,new sd(n)):ge(this,$y,n.clone())}_getConnection(){return ie(this,$y).clone()}async send(n,r){return await this._start(),await super.send(n,r)}async _send(n){const r=this._getConnection();r.body=JSON.stringify(n),r.setHeader("content-type","application/json");const i=await r.send();i.assertOk();let s=i.bodyJson;return Array.isArray(s)||(s=[s]),s}}$y=new WeakMap;function Z4(t){if(t==null)return null;if(typeof t.message=="string"&&t.message.match(/revert/i)&&gr(t.data))return{message:t.message,data:t.data};if(typeof t=="object"){for(const e in t){const n=Z4(t[e]);if(n)return n}return null}if(typeof t=="string")try{return Z4(JSON.parse(t))}catch{}return null}function eM(t,e){if(t!=null){if(typeof t.message=="string"&&e.push(t.message),typeof t=="object")for(const n in t)eM(t[n],e);if(typeof t=="string")try{return eM(JSON.parse(t),e)}catch{}}}function Q_e(t){const e=[];return eM(t,e),e}var zy;const Xj=class Xj extends b8{constructor(n,r){super(r);Se(this,"address");je(this,zy);xe(n&&typeof n.sign=="function","invalid private key","privateKey","[ REDACTED ]"),ge(this,zy,n);const i=A1(this.signingKey.publicKey);Mt(this,{address:i})}get signingKey(){return ie(this,zy)}get privateKey(){return this.signingKey.privateKey}async getAddress(){return this.address}connect(n){return new Xj(ie(this,zy),n)}async signTransaction(n){n=xw(n);const{to:r,from:i}=await Es({to:n.to?Bi(n.to,this):void 0,from:n.from?Bi(n.from,this):void 0});r!=null&&(n.to=r),i!=null&&(n.from=i),n.from!=null&&(xe(xn(n.from)===this.address,"transaction from address mismatch","tx.from",n.from),delete n.from);const s=u8.from(n);return s.signature=this.signingKey.sign(s.unsignedHash),s.serialized}async signMessage(n){return this.signMessageSync(n)}signMessageSync(n){return this.signingKey.sign(uie(n)).serialized}authorizeSync(n){xe(typeof n.address=="string","invalid address for authorizeSync","auth.address",n);const r=this.signingKey.sign(Hre(n));return Object.assign({},{address:xn(n.address),nonce:wt(n.nonce||0),chainId:wt(n.chainId||0)},{signature:r})}async authorize(n){return n=Object.assign({},n,{address:await Bi(n.address,this)}),this.authorizeSync(await this.populateAuthorization(n))}async signTypedData(n,r,i){const s=await om.resolveNames(n,r,i,async o=>{Ke(this.provider!=null,"cannot resolve ENS names without a provider","UNSUPPORTED_OPERATION",{operation:"resolveName",info:{name:o}});const a=await this.provider.resolveName(o);return Ke(a!=null,"unconfigured ENS name","UNCONFIGURED_NAME",{value:o}),a});return this.signingKey.sign(om.hash(s.domain,r,s.value)).serialized}};zy=new WeakMap;let qT=Xj;const GT=" !#$%&'()*+,-./<=>?@[]^_`{|}~",Z_e=/^[a-z]*$/i;function JH(t,e){let n=97;return t.reduce((r,i)=>(i===e?n++:i.match(Z_e)?r.push(String.fromCharCode(n)+i):(n=97,r.push(i)),r),[])}function eIe(t,e){for(let i=GT.length-1;i>=0;i--)t=t.split(GT[i]).join(e.substring(2*i,2*i+2));const n=[],r=t.replace(/(:|([0-9])|([A-Z][a-z]*))/g,(i,s,o,a)=>{if(o)for(let l=parseInt(o);l>=0;l--)n.push(";");else n.push(s.toLowerCase());return""});if(r)throw new Error(`leftovers: ${JSON.stringify(r)}`);return JH(JH(n,";"),":")}function tIe(t){return xe(t[0]==="0","unsupported auwl data","data",t),eIe(t.substring(1+2*GT.length),t.substring(1,1+2*GT.length))}class nIe{constructor(e){Se(this,"locale");Mt(this,{locale:e})}split(e){return e.toLowerCase().split(/\s+/g)}join(e){return e.join(" ")}}var Hy,l1,qp,c1,tM;class rIe extends nIe{constructor(n,r,i){super(n);je(this,c1);je(this,Hy);je(this,l1);je(this,qp);ge(this,Hy,r),ge(this,l1,i),ge(this,qp,null)}get _data(){return ie(this,Hy)}_decodeWords(){return tIe(ie(this,Hy))}getWord(n){const r=tt(this,c1,tM).call(this);return xe(n>=0&&n<r.length,`invalid word index: ${n}`,"index",n),r[n]}getWordIndex(n){return tt(this,c1,tM).call(this).indexOf(n)}}Hy=new WeakMap,l1=new WeakMap,qp=new WeakMap,c1=new WeakSet,tM=function(){if(ie(this,qp)==null){const n=this._decodeWords();if(od(n.join(`
`)+`
`)!==ie(this,l1))throw new Error(`BIP39 Wordlist for ${this.locale} FAILED`);ge(this,qp,n)}return ie(this,qp)};const iIe="0erleonalorenseinceregesticitStanvetearctssi#ch2Athck&tneLl0And#Il.yLeOutO=S|S%b/ra@SurdU'0Ce[Cid|CountCu'Hie=IdOu,-Qui*Ro[TT]T%T*[Tu$0AptDD-tD*[Ju,M.UltV<)Vi)0Rob-0FairF%dRaid0A(EEntRee0Ead0MRRp%tS!_rmBumCoholErtI&LLeyLowMo,O}PhaReadySoT Ways0A>urAz(gOngOuntU'd0Aly,Ch%Ci|G G!GryIm$K!Noun)Nu$O` Sw T&naTiqueXietyY1ArtOlogyPe?P!Pro=Ril1ChCt-EaEnaGueMMedM%MyOundR<+Re,Ri=RowTTefa@Ti,Tw%k0KPe@SaultSetSi,SumeThma0H!>OmTa{T&dT.udeTra@0Ct]D.Gu,NtTh%ToTumn0Era+OcadoOid0AkeA*AyEsomeFulKw?d0Is:ByChel%C#D+GL<)Lc#y~MbooN<aNn RRelyRga(R*lSeS-SketTt!3A^AnAutyCau'ComeEfF%eG(Ha=H(dLie=LowLtN^Nef./TrayTt Twe&Y#d3Cyc!DKeNdOlogyRdR`Tt _{AdeAmeAnketA,EakE[IndOodO[omOu'UeUrUsh_rdAtDyIlMbNeNusOkO,Rd R(gRrowSsTtomUn)XY_{etA(AndA[A=EadEezeI{Id+IefIghtIngIskOccoliOk&OnzeOomO` OwnUsh2Bb!DdyD+tFf$oIldLbLkL!tNd!Nk Rd&Rg R,SS(e[SyTt Y Zz:Bba+B(B!CtusGeKe~LmM aMpNN$N)lNdyNn#NoeNvasNy#Pab!P.$Pta(RRb#RdRgoRpetRryRtSeShS(o/!Su$TT$ogT^Teg%yTt!UghtU'Ut]Ve3Il(gL yM|NsusNturyRe$Rta(_irAlkAmp]An+AosApt Ar+A'AtEapE{Ee'EfErryE,I{&IefIldIm}yOi)Oo'R#-U{!UnkUrn0G?Nnam#Rc!Tiz&TyVil_imApArifyAwAyE<ErkEv I{I|IffImbIn-IpO{OgO'O`OudOwnUbUmpU, Ut^_^A,C#utDeFfeeIlInL!@L%LumnMb(eMeMf%tM-Mm#Mp<yNc tNdu@NfirmNg*[N}@Nsid NtrolNv()OkOlPp PyR$ReRnR*@/Tt#U^UntryUp!Ur'Us(V Yo>_{Ad!AftAmA}AshAt AwlAzyEamEd.EekEwI{etImeIspIt-OpO[Ou^OwdUci$UelUi'Umb!Un^UshYY,$2BeLtu*PPbo?dRiousRr|Rta(R=Sh]/omTe3C!:DMa+MpN)Ng R(gShUght WnY3AlBa>BrisCadeCemb CideCl(eC%a>C*a'ErF&'F(eFyG*eLayLiv M<dMi'Ni$Nti,NyP?tP&dPos.P`PutyRi=ScribeS tSignSkSpair/royTailTe@VelopVi)Vo>3AgramAlAm#dAryCeE'lEtFf G.$Gn.yLemmaNn NosaurRe@RtSag*eScov Sea'ShSmi[S%d Splay/<)V tVideV%)Zzy5Ct%Cum|G~Lph(Ma(Na>NkeyN%OrSeUb!Ve_ftAg#AmaA,-AwEamE[IftIllInkIpI=OpUmY2CkMbNeR(g/T^Ty1Arf1Nam-:G G!RlyRnR`Sily/Sy1HoOlogyOnomy0GeItUca>1F%t0G1GhtTh 2BowD E@r-Eg<tEm|Eph<tEvat%I>Se0B?kBodyBra)Er+Ot]PloyPow Pty0Ab!A@DD![D%'EmyErgyF%)Ga+G(eH<)JoyLi,OughR-hRollSu*T Ti*TryVelope1Isode0U$Uip0AA'OdeOs]R%Upt0CapeSayS&)Ta>0Ern$H-s1Id&)IlOkeOl=1A@Amp!Ce[Ch<+C.eCludeCu'Ecu>Erci'Hau,Hib.I!I,ItOt-P<dPe@Pi*Pla(Po'P*[T&dTra0EEbrow:Br-CeCultyDeIntI`~L'MeMilyMousNNcyNtasyRmSh]TT$Th TigueUltV%.e3Atu*Bru?yD $EEdElMa!N)/iv$T^V W3B Ct]EldGu*LeLmLt N$NdNeNg NishReRmR,Sc$ShTT}[X_gAmeAshAtAv%EeIghtIpOatO{O%Ow UidUshY_mCusGIlLd~owOdOtR)Re,R+tRkRtu}RumRw?dSsil/ UndX_gi!AmeEqu|EshI&dIn+OgOntO,OwnOz&U.2ElNNnyRna)RyTu*:D+tInLaxy~ yMePRa+Rba+Rd&Rl-Rm|SSpTeTh U+Ze3N $NiusN*Nt!Nu(e/u*2O,0AntFtGg!Ng RaffeRlVe_dAn)A*A[IdeImp'ObeOomOryO=OwUe_tDde[LdOdO'RillaSpelSsipV nWn_bA)A(AntApeA[Av.yEatE&IdIefItOc yOupOwUnt_rdE[IdeIltIt?N3M:B.IrLfMm M, NdPpyRb%RdRshR=,TVeWkZ?d3AdAl`ArtAvyD+hogIght~oLmetLpNRo3Dd&Gh~NtPRe/%y5BbyCkeyLdLeLiday~owMeNeyOdPeRnRr%R'Sp.$/TelUrV 5BGeM<Mb!M%Nd*dNgryNtRd!RryRtSb<d3Brid:1EOn0EaEntifyLe2N%e4LLeg$L}[0A+Ita>M&'Mu}Pa@Po'Pro=Pul'0ChCludeComeC*a'DexD-a>Do%Du,ryF<tFl-tF%mHa!H .Iti$Je@JuryMa>N Noc|PutQuiryS<eSe@SideSpi*/$lTa@T e,ToVe,V.eVol=3On0L<dOla>Sue0Em1Ory:CketGu?RZz3AlousAns~yWel9BInKeUr}yY5D+I)MpNg!Ni%Nk/:Ng?oo3EnEpT^upY3CkDD}yNdNgdomSsTT^&TeTt&Wi4EeIfeO{Ow:BBelB%Dd DyKeMpNgua+PtopR+T T(UghUndryVaWWnWsu.Y Zy3Ad AfArnA=Ctu*FtGG$G&dIsu*M#NdNg`NsOp?dSs#Tt Vel3ArB tyBr?yC&'FeFtGhtKeMbM.NkOnQuid/Tt!VeZ?d5AdAnB, C$CkG-NelyNgOpTt yUdUn+VeY$5CkyGga+Mb N?N^Xury3R-s:Ch(eDG-G}tIdIlInJ%KeMm$NNa+Nda>NgoNs]Nu$P!Rb!R^Rg(R(eRketRria+SkSs/ T^T i$ThTrixTt XimumZe3AdowAnAsu*AtCh<-D$DiaLodyLtMb M%yNt]NuRcyR+R.RryShSsa+T$Thod3Dd!DnightLk~]M-NdNimumN%Nu>Rac!Rr%S ySs/akeXXedXtu*5Bi!DelDifyMM|N.%NkeyN, N`OnR$ReRn(gSqu.oTh T]T%Unta(U'VeVie5ChFf(LeLtiplySc!SeumShroomS-/Tu$3Self/ yTh:I=MePk(Rrow/yT]Tu*3ArCkEdGati=G!@I` PhewR=/TTw%kUtr$V WsXt3CeGht5B!I'M(eeOd!Rm$R`SeTab!TeTh(gTi)VelW5C!?Mb R'T:K0EyJe@Li+Scu*S =Ta(Vious0CurE<Tob 0Or1FF Fi)T&2L1Ay0DI=Ymp-0It0CeEI#L(eLy1EnEraIn]Po'T]1An+B.Ch?dD D(?yG<I|Ig($Ph<0Tr-h0H 0Tdo%T TputTside0AlEnEr0NN 0Yg&0/ 0O}:CtDd!GeIrLa)LmNdaNelN-N` P RadeR|RkRrotRtySsT^ThTi|TrolTt nU'VeYm|3A)AnutArAs<tL-<NN$tyNcilOp!Pp Rfe@Rm.Rs#T2O}OtoRa'Ys-$0AnoCn-Ctu*E)GGe#~LotNkO} Pe/olT^Zza_)A}tA,-A>AyEa'Ed+U{UgUn+2EmEtIntL?LeLi)NdNyOlPul?Rt]S.]Ssib!/TatoTt yV tyWd W _@i)Ai'Ed-tEf Epa*Es|EttyEv|I)IdeIm?yIntI%.yIs#Iva>IzeOb!mO)[Odu)Of.OgramOje@Omo>OofOp tyOsp O>@OudOvide2Bl-Dd(g~LpL'Mpk(N^PilPpyR^a'R.yRpo'R'ShTZz!3Ramid:99Al.yAntumArt E,]I{ItIzO>:Bb.Cco#CeCkD?DioIlInI'~yMpN^NdomN+PidReTeTh V&WZ%3AdyAlAs#BelBuildC$lCei=CipeC%dCyc!Du)F!@F%mFu'G]G*tGul?Je@LaxLea'LiefLyMa(Memb M(dMo=Nd NewNtOp&PairPeatPla)P%tQui*ScueSemb!Si,Sour)Sp#'SultTi*T*atTurnUn]Ve$ViewW?d2Y`m0BBb#CeChDeD+F!GhtGidNgOtPp!SkTu$V$V 5AdA,BotBu,CketM<)OfOkieOmSeTa>UghUndU>Y$5Bb DeGLeNNwayR$:DDd!D}[FeIlLadLm#L#LtLu>MeMp!NdTisfyToshiU)Usa+VeY1A!AnA*Att E}HemeHoolI&)I[%sOrp]OutRapRe&RiptRub1AAr^As#AtC#dC*tCt]Cur.yEdEkGm|Le@~M(?Ni%N'Nt&)RiesRvi)Ss]Tt!TupV&_dowAftAllowA*EdEllEriffIeldIftI}IpIv O{OeOotOpOrtOuld O=RimpRugUff!Y0Bl(gCkDeE+GhtGnL|Lk~yLv Mil?Mp!N)NgR&/ Tua>XZe1A>Et^IIllInIrtUll0AbAmEepEnd I)IdeIghtImOg<OtOwUsh0AllArtI!OkeOo`0A{AkeApIffOw0ApCc Ci$CkDaFtL?Ldi LidLut]L=Me#eNgOnRryRtUlUndUpUr)U`0A)A*Ati$AwnEakEci$EedEllEndH eI)Id IkeInIr.L.OilOns%O#OrtOtRayReadR(gY0Ua*UeezeUir*l_b!AdiumAffA+AirsAmpAndArtA>AyEakEelEmEpE*oI{IllIngO{Oma^O}OolOryO=Ra>gyReetRikeR#gRugg!Ud|UffUmb!Y!0Bje@Bm.BwayC)[ChDd&Ff G?G+,ItMm NNnyN'tP PplyP*meReRfa)R+Rpri'RroundR=ySpe@/a(1AllowAmpApArmE?EetIftImIngIt^Ord1MbolMptomRup/em:B!Ck!GIlL|LkNkPeR+tSk/eTtooXi3A^Am~NN<tNnisNtRm/Xt_nkAtEmeEnE%yE*EyIngIsOughtReeRi=RowUmbUnd 0CketDeG LtMb MeNyPRedSsueT!5A,BaccoDayDdl EGe` I!tK&MatoM%rowNeNgueNightOlO`PP-Pp!R^RnadoRtoi'SsT$Uri,W?dW WnY_{AdeAff-Ag-A(Ansf ApAshA=lAyEatEeEndI$IbeI{Igg ImIpOphyOub!U{UeUlyUmpetU,U`Y2BeIt]Mb!NaN}lRkeyRnRt!1El=EntyI)InI,O1PeP-$:5Ly5B*lla0Ab!Awa*C!Cov D DoFairFoldHappyIf%mIqueItIv 'KnownLo{TilUsu$Veil1Da>GradeHoldOnP Set1B<Ge0A+EEdEfulE![U$0Il.y:C<tCuumGueLidL!yL=NNishP%Rious/Ult3H-!L=tNd%Ntu*NueRbRifyRs]RyS'lT <3Ab!Br<tCiousCt%yDeoEw~a+Nta+Ol(Rtu$RusSaS.Su$T$Vid5C$I)IdLc<oLumeTeYa+:GeG#ItLk~LnutNtRfa*RmRri%ShSp/eT VeY3Al`Ap#ArA'lA` BDd(gEk&dIrdLcome/T_!AtEatEelEnE*IpIsp 0DeD`FeLd~NNdowNeNgNkNn Nt ReSdomSeShT}[5LfM<Nd OdOlRdRkRldRryR`_pE{E,!I,I>Ong::Rd3Ar~ow9UUngU`:3BraRo9NeO",sIe="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60";let sR=null;class um extends rIe{constructor(){super("en",iIe,sIe)}static wordlist(){return sR==null&&(sR=new um),sR}}function zie(t){return(1<<t)-1<<8-t&255}function oIe(t){return(1<<t)-1&255}function oR(t,e){xne("NFKD"),e==null&&(e=um.wordlist());const n=e.split(t);xe(n.length%3===0&&n.length>=12&&n.length<=24,"invalid mnemonic length","mnemonic","[ REDACTED ]");const r=new Uint8Array(Math.ceil(11*n.length/8));let i=0;for(let c=0;c<n.length;c++){let u=e.getWordIndex(n[c].normalize("NFKD"));xe(u>=0,`invalid mnemonic word at index ${c}`,"mnemonic","[ REDACTED ]");for(let f=0;f<11;f++)u&1<<10-f&&(r[i>>3]|=1<<7-i%8),i++}const s=32*n.length/3,o=n.length/3,a=zie(o),l=ht(Fa(r.slice(0,s/8)))[0]&a;return xe(l===(r[r.length-1]&a),"invalid mnemonic checksum","mnemonic","[ REDACTED ]"),rt(r.slice(0,s/8))}function aR(t,e){xe(t.length%4===0&&t.length>=16&&t.length<=32,"invalid entropy size","entropy","[ REDACTED ]"),e==null&&(e=um.wordlist());const n=[0];let r=11;for(let o=0;o<t.length;o++)r>8?(n[n.length-1]<<=8,n[n.length-1]|=t[o],r-=8):(n[n.length-1]<<=r,n[n.length-1]|=t[o]>>8-r,n.push(t[o]&oIe(8-r)),r+=3);const i=t.length/4,s=parseInt(Fa(t).substring(2,4),16)&zie(i);return n[n.length-1]<<=i,n[n.length-1]|=s>>8-i,e.join(n.map(o=>e.getWord(o)))}const lR={};class rx{constructor(e,n,r,i,s){Se(this,"phrase");Se(this,"password");Se(this,"wordlist");Se(this,"entropy");i==null&&(i=""),s==null&&(s=um.wordlist()),uh(e,lR,"Mnemonic"),Mt(this,{phrase:r,password:i,wordlist:s,entropy:n})}computeSeed(){const e=pi("mnemonic"+this.password,"NFKD");return dh(pi(this.phrase,"NFKD"),e,2048,64,"sha512")}static fromPhrase(e,n,r){const i=oR(e,r);return e=aR(ht(i),r),new rx(lR,i,e,n,r)}static fromEntropy(e,n,r){const i=ht(e,"entropy"),s=aR(i,r);return new rx(lR,rt(i),s,n,r)}static entropyToPhrase(e,n){const r=ht(e,"entropy");return aR(r,n)}static phraseToEntropy(e,n){return oR(e,n)}static isValidMnemonic(e,n){try{return oR(e,n),!0}catch{}return!1}}/*! MIT License. Copyright 2015-2022 Richard Moore <me@ricmoo.com>. See LICENSE.txt. */var Yi=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},cR=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},oT,ga,Kl;const aIe={16:10,24:12,32:14},lIe=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],da=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],zS=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],cIe=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],uIe=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],dIe=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],fIe=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],hIe=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],pIe=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],mIe=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],gIe=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],yIe=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],xIe=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],vIe=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],bIe=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function uR(t){const e=[];for(let n=0;n<t.length;n+=4)e.push(t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3]);return e}class w8{get key(){return Yi(this,oT,"f").slice()}constructor(e){if(oT.set(this,void 0),ga.set(this,void 0),Kl.set(this,void 0),!(this instanceof w8))throw Error("AES must be instanitated with `new`");cR(this,oT,new Uint8Array(e),"f");const n=aIe[this.key.length];if(n==null)throw new TypeError("invalid key size (must be 16, 24 or 32 bytes)");cR(this,Kl,[],"f"),cR(this,ga,[],"f");for(let u=0;u<=n;u++)Yi(this,Kl,"f").push([0,0,0,0]),Yi(this,ga,"f").push([0,0,0,0]);const r=(n+1)*4,i=this.key.length/4,s=uR(this.key);let o;for(let u=0;u<i;u++)o=u>>2,Yi(this,Kl,"f")[o][u%4]=s[u],Yi(this,ga,"f")[n-o][u%4]=s[u];let a=0,l=i,c;for(;l<r;){if(c=s[i-1],s[0]^=da[c>>16&255]<<24^da[c>>8&255]<<16^da[c&255]<<8^da[c>>24&255]^lIe[a]<<24,a+=1,i!=8)for(let g=1;g<i;g++)s[g]^=s[g-1];else{for(let g=1;g<i/2;g++)s[g]^=s[g-1];c=s[i/2-1],s[i/2]^=da[c&255]^da[c>>8&255]<<8^da[c>>16&255]<<16^da[c>>24&255]<<24;for(let g=i/2+1;g<i;g++)s[g]^=s[g-1]}let u=0,f,m;for(;u<i&&l<r;)f=l>>2,m=l%4,Yi(this,Kl,"f")[f][m]=s[u],Yi(this,ga,"f")[n-f][m]=s[u++],l++}for(let u=1;u<n;u++)for(let f=0;f<4;f++)c=Yi(this,ga,"f")[u][f],Yi(this,ga,"f")[u][f]=yIe[c>>24&255]^xIe[c>>16&255]^vIe[c>>8&255]^bIe[c&255]}encrypt(e){if(e.length!=16)throw new TypeError("invalid plaintext size (must be 16 bytes)");const n=Yi(this,Kl,"f").length-1,r=[0,0,0,0];let i=uR(e);for(let a=0;a<4;a++)i[a]^=Yi(this,Kl,"f")[0][a];for(let a=1;a<n;a++){for(let l=0;l<4;l++)r[l]=cIe[i[l]>>24&255]^uIe[i[(l+1)%4]>>16&255]^dIe[i[(l+2)%4]>>8&255]^fIe[i[(l+3)%4]&255]^Yi(this,Kl,"f")[a][l];i=r.slice()}const s=new Uint8Array(16);let o=0;for(let a=0;a<4;a++)o=Yi(this,Kl,"f")[n][a],s[4*a]=(da[i[a]>>24&255]^o>>24)&255,s[4*a+1]=(da[i[(a+1)%4]>>16&255]^o>>16)&255,s[4*a+2]=(da[i[(a+2)%4]>>8&255]^o>>8)&255,s[4*a+3]=(da[i[(a+3)%4]&255]^o)&255;return s}decrypt(e){if(e.length!=16)throw new TypeError("invalid ciphertext size (must be 16 bytes)");const n=Yi(this,ga,"f").length-1,r=[0,0,0,0];let i=uR(e);for(let a=0;a<4;a++)i[a]^=Yi(this,ga,"f")[0][a];for(let a=1;a<n;a++){for(let l=0;l<4;l++)r[l]=hIe[i[l]>>24&255]^pIe[i[(l+3)%4]>>16&255]^mIe[i[(l+2)%4]>>8&255]^gIe[i[(l+1)%4]&255]^Yi(this,ga,"f")[a][l];i=r.slice()}const s=new Uint8Array(16);let o=0;for(let a=0;a<4;a++)o=Yi(this,ga,"f")[n][a],s[4*a]=(zS[i[a]>>24&255]^o>>24)&255,s[4*a+1]=(zS[i[(a+3)%4]>>16&255]^o>>16)&255,s[4*a+2]=(zS[i[(a+2)%4]>>8&255]^o>>8)&255,s[4*a+3]=(zS[i[(a+1)%4]&255]^o)&255;return s}}oT=new WeakMap,ga=new WeakMap,Kl=new WeakMap;class Hie{constructor(e,n,r){if(r&&!(this instanceof r))throw new Error(`${e} must be instantiated with "new"`);Object.defineProperties(this,{aes:{enumerable:!0,value:new w8(n)},name:{enumerable:!0,value:e}})}}var HS=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},O0=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},kb,fu;class E8 extends Hie{constructor(e,n){if(super("ECC",e,E8),kb.set(this,void 0),fu.set(this,void 0),n){if(n.length%16)throw new TypeError("invalid iv size (must be 16 bytes)");HS(this,kb,new Uint8Array(n),"f")}else HS(this,kb,new Uint8Array(16),"f");HS(this,fu,this.iv,"f")}get iv(){return new Uint8Array(O0(this,kb,"f"))}encrypt(e){if(e.length%16)throw new TypeError("invalid plaintext size (must be multiple of 16 bytes)");const n=new Uint8Array(e.length);for(let r=0;r<e.length;r+=16){for(let i=0;i<16;i++)O0(this,fu,"f")[i]^=e[r+i];HS(this,fu,this.aes.encrypt(O0(this,fu,"f")),"f"),n.set(O0(this,fu,"f"),r)}return n}decrypt(e){if(e.length%16)throw new TypeError("invalid ciphertext size (must be multiple of 16 bytes)");const n=new Uint8Array(e.length);for(let r=0;r<e.length;r+=16){const i=this.aes.decrypt(e.subarray(r,r+16));for(let s=0;s<16;s++)n[r+s]=i[s]^O0(this,fu,"f")[s],O0(this,fu,"f")[s]=e[r+s]}return n}}kb=new WeakMap,fu=new WeakMap;var M0=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},fa=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Cb,Qh,ya;class ix extends Hie{constructor(e,n){super("CTR",e,ix),Cb.set(this,void 0),Qh.set(this,void 0),ya.set(this,void 0),M0(this,ya,new Uint8Array(16),"f"),fa(this,ya,"f").fill(0),M0(this,Cb,fa(this,ya,"f"),"f"),M0(this,Qh,16,"f"),n==null&&(n=1),typeof n=="number"?this.setCounterValue(n):this.setCounterBytes(n)}get counter(){return new Uint8Array(fa(this,ya,"f"))}setCounterValue(e){if(!Number.isInteger(e)||e<0||e>Number.MAX_SAFE_INTEGER)throw new TypeError("invalid counter initial integer value");for(let n=15;n>=0;--n)fa(this,ya,"f")[n]=e%256,e=Math.floor(e/256)}setCounterBytes(e){if(e.length!==16)throw new TypeError("invalid counter initial Uint8Array value length");fa(this,ya,"f").set(e)}increment(){for(let e=15;e>=0;e--)if(fa(this,ya,"f")[e]===255)fa(this,ya,"f")[e]=0;else{fa(this,ya,"f")[e]++;break}}encrypt(e){var n,r;const i=new Uint8Array(e);for(let s=0;s<i.length;s++)fa(this,Qh,"f")===16&&(M0(this,Cb,this.aes.encrypt(fa(this,ya,"f")),"f"),M0(this,Qh,0,"f"),this.increment()),i[s]^=fa(this,Cb,"f")[M0(this,Qh,(r=fa(this,Qh,"f"),n=r++,r),"f"),n];return i}decrypt(e){return this.encrypt(e)}}Cb=new WeakMap,Qh=new WeakMap,ya=new WeakMap;function wIe(t){if(t.length<16)throw new TypeError("PKCS#7 invalid length");const e=t[t.length-1];if(e>16)throw new TypeError("PKCS#7 padding byte out of range");const n=t.length-e;for(let r=0;r<e;r++)if(t[n+r]!==e)throw new TypeError("PKCS#7 invalid padding byte");return new Uint8Array(t.subarray(0,n))}function Vie(t){return typeof t=="string"&&!t.startsWith("0x")&&(t="0x"+t),os(t)}function Zv(t,e){for(t=String(t);t.length<e;)t="0"+t;return t}function C1(t){return typeof t=="string"?pi(t,"NFKC"):os(t)}function Zr(t,e){const n=e.match(/^([a-z0-9$_.-]*)(:([a-z]+))?(!)?$/i);xe(n!=null,"invalid path","path",e);const r=n[1],i=n[3],s=n[4]==="!";let o=t;for(const a of r.toLowerCase().split(".")){if(Array.isArray(o)){if(!a.match(/^[0-9]+$/))break;o=o[parseInt(a)]}else if(typeof o=="object"){let l=null;for(const c in o)if(c.toLowerCase()===a){l=o[c];break}o=l}else o=null;if(o==null)break}if(xe(!s||o!=null,"missing required value","path",r),i&&o!=null){if(i==="int"){if(typeof o=="string"&&o.match(/^-?[0-9]+$/))return parseInt(o);if(Number.isSafeInteger(o))return o}if(i==="number"&&typeof o=="string"&&o.match(/^-?[0-9.]*$/))return parseFloat(o);if(i==="data"&&typeof o=="string")return Vie(o);if(i==="array"&&Array.isArray(o)||i===typeof o)return o;xe(!1,`wrong type found for ${i} `,"path",r)}return o}const qie="m/44'/60'/0'/0/0";function XH(t){try{const e=JSON.parse(t);if((e.version!=null?parseInt(e.version):0)===3)return!0}catch{}return!1}function EIe(t,e,n){if(Zr(t,"crypto.cipher:string")==="aes-128-ctr"){const i=Zr(t,"crypto.cipherparams.iv:data!"),s=new ix(e,i);return rt(s.decrypt(n))}Ke(!1,"unsupported cipher","UNSUPPORTED_OPERATION",{operation:"decrypt"})}function KT(t,e){const n=ht(e),r=Zr(t,"crypto.ciphertext:data!"),i=rt(Kn(On([n.slice(16,32),r]))).substring(2);xe(i===Zr(t,"crypto.mac:string!").toLowerCase(),"incorrect password","password","[ REDACTED ]");const s=EIe(t,n.slice(0,16),r),o=A1(s);if(t.address){let c=t.address.toLowerCase();c.startsWith("0x")||(c="0x"+c),xe(xn(c)===o,"keystore address/privateKey mismatch","address",t.address)}const a={address:o,privateKey:s};if(Zr(t,"x-ethers.version:string")==="0.1"){const c=n.slice(32,64),u=Zr(t,"x-ethers.mnemonicCiphertext:data!"),f=Zr(t,"x-ethers.mnemonicCounter:data!"),m=new ix(c,f);a.mnemonic={path:Zr(t,"x-ethers.path:string")||qie,locale:Zr(t,"x-ethers.locale:string")||"en",entropy:rt(ht(m.decrypt(u)))}}return a}function Gie(t){const e=Zr(t,"crypto.kdf:string");if(e&&typeof e=="string"){if(e.toLowerCase()==="scrypt"){const n=Zr(t,"crypto.kdfparams.salt:data!"),r=Zr(t,"crypto.kdfparams.n:int!"),i=Zr(t,"crypto.kdfparams.r:int!"),s=Zr(t,"crypto.kdfparams.p:int!");xe(r>0&&(r&r-1)===0,"invalid kdf.N","kdf.N",r),xe(i>0&&s>0,"invalid kdf","kdf",e);const o=Zr(t,"crypto.kdfparams.dklen:int!");return xe(o===32,"invalid kdf.dklen","kdf.dflen",o),{name:"scrypt",salt:n,N:r,r:i,p:s,dkLen:64}}else if(e.toLowerCase()==="pbkdf2"){const n=Zr(t,"crypto.kdfparams.salt:data!"),r=Zr(t,"crypto.kdfparams.prf:string!"),i=r.split("-").pop();xe(i==="sha256"||i==="sha512","invalid kdf.pdf","kdf.pdf",r);const s=Zr(t,"crypto.kdfparams.c:int!"),o=Zr(t,"crypto.kdfparams.dklen:int!");return xe(o===32,"invalid kdf.dklen","kdf.dklen",o),{name:"pbkdf2",salt:n,count:s,dkLen:o,algorithm:i}}}xe(!1,"unsupported key-derivation function","kdf",e)}function SIe(t,e){const n=JSON.parse(t),r=C1(e),i=Gie(n);if(i.name==="pbkdf2"){const{salt:f,count:m,dkLen:g,algorithm:x}=i,v=dh(r,f,m,g,x);return KT(n,v)}Ke(i.name==="scrypt","cannot be reached","UNKNOWN_ERROR",{params:i});const{salt:s,N:o,r:a,p:l,dkLen:c}=i,u=_x(r,s,o,a,l,c);return KT(n,u)}function QH(t){return new Promise(e=>{setTimeout(()=>{e()},t)})}async function AIe(t,e,n){const r=JSON.parse(t),i=C1(e),s=Gie(r);if(s.name==="pbkdf2"){n&&(n(0),await QH(0));const{salt:m,count:g,dkLen:x,algorithm:v}=s,w=dh(i,m,g,x,v);return n&&(n(1),await QH(0)),KT(r,w)}Ke(s.name==="scrypt","cannot be reached","UNKNOWN_ERROR",{params:s});const{salt:o,N:a,r:l,p:c,dkLen:u}=s,f=await Nx(i,o,a,l,c,u,n);return KT(r,f)}function Kie(t){const e=t.salt!=null?ht(t.salt,"options.salt"):Gu(32);let n=1<<17,r=8,i=1;return t.scrypt&&(t.scrypt.N&&(n=t.scrypt.N),t.scrypt.r&&(r=t.scrypt.r),t.scrypt.p&&(i=t.scrypt.p)),xe(typeof n=="number"&&n>0&&Number.isSafeInteger(n)&&(BigInt(n)&BigInt(n-1))===BigInt(0),"invalid scrypt N parameter","options.N",n),xe(typeof r=="number"&&r>0&&Number.isSafeInteger(r),"invalid scrypt r parameter","options.r",r),xe(typeof i=="number"&&i>0&&Number.isSafeInteger(i),"invalid scrypt p parameter","options.p",i),{name:"scrypt",dkLen:32,salt:e,N:n,r,p:i}}function Wie(t,e,n,r){const i=ht(n.privateKey,"privateKey"),s=r.iv!=null?ht(r.iv,"options.iv"):Gu(16);xe(s.length===16,"invalid options.iv length","options.iv",r.iv);const o=r.uuid!=null?ht(r.uuid,"options.uuid"):Gu(16);xe(o.length===16,"invalid options.uuid length","options.uuid",r.iv);const a=t.slice(0,16),l=t.slice(16,32),c=new ix(a,s),u=ht(c.encrypt(i)),f=Kn(On([l,u])),m={address:n.address.substring(2).toLowerCase(),id:kke(o),version:3,Crypto:{cipher:"aes-128-ctr",cipherparams:{iv:rt(s).substring(2)},ciphertext:rt(u).substring(2),kdf:"scrypt",kdfparams:{salt:rt(e.salt).substring(2),n:e.N,dklen:32,p:e.p,r:e.r},mac:f.substring(2)}};if(n.mnemonic){const g=r.client!=null?r.client:`ethers/${gne}`,x=n.mnemonic.path||qie,v=n.mnemonic.locale||"en",w=t.slice(32,64),E=ht(n.mnemonic.entropy,"account.mnemonic.entropy"),C=Gu(16),k=new ix(w,C),O=ht(k.encrypt(E)),j=new Date,U="UTC--"+(j.getUTCFullYear()+"-"+Zv(j.getUTCMonth()+1,2)+"-"+Zv(j.getUTCDate(),2)+"T"+Zv(j.getUTCHours(),2)+"-"+Zv(j.getUTCMinutes(),2)+"-"+Zv(j.getUTCSeconds(),2)+".0Z")+"--"+m.address;m["x-ethers"]={client:g,gethFilename:U,path:x,locale:v,mnemonicCounter:rt(C).substring(2),mnemonicCiphertext:rt(O).substring(2),version:"0.1"}}return JSON.stringify(m)}function Yie(t,e,n){n==null&&(n={});const r=C1(e),i=Kie(n),s=_x(r,i.salt,i.N,i.r,i.p,64);return Wie(ht(s),i,t,n)}async function Jie(t,e,n){n==null&&(n={});const r=C1(e),i=Kie(n),s=await Nx(r,i.salt,i.N,i.r,i.p,64,n.progressCallback);return Wie(ht(s),i,t,n)}const dR="m/44'/60'/0'/0/0",TIe=new Uint8Array([66,105,116,99,111,105,110,32,115,101,101,100]),Sc=2147483648,kIe=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),CIe="0123456789abcdef";function WT(t,e){let n="";for(;t;)n=CIe[t%16]+n,t=Math.trunc(t/16);for(;n.length<e*2;)n="0"+n;return"0x"+n}function nM(t){const e=ht(t),n=mr(Fa(Fa(e)),0,4),r=On([e,n]);return Ene(r)}const Xl={};function Xie(t,e,n,r){const i=new Uint8Array(37);t&Sc?(Ke(r!=null,"cannot derive child of neutered node","UNSUPPORTED_OPERATION",{operation:"deriveChild"}),i.set(ht(r),1)):i.set(ht(n));for(let o=24;o>=0;o-=8)i[33+(o>>3)]=t>>24-o&255;const s=ht(kx("sha512",e,i));return{IL:s.slice(0,32),IR:s.slice(32)}}function Qie(t,e){const n=e.split("/");xe(n.length>0,"invalid path","path",e),n[0]==="m"&&(xe(t.depth===0,`cannot derive root path (i.e. path starting with "m/") for a node at non-zero depth ${t.depth}`,"path",e),n.shift());let r=t;for(let i=0;i<n.length;i++){const s=n[i];if(s.match(/^[0-9]+'$/)){const o=parseInt(s.substring(0,s.length-1));xe(o<Sc,"invalid path index",`path[${i}]`,s),r=r.deriveChild(Sc+o)}else if(s.match(/^[0-9]+$/)){const o=parseInt(s);xe(o<Sc,"invalid path index",`path[${i}]`,s),r=r.deriveChild(o)}else xe(!1,"invalid path component",`path[${i}]`,s)}return r}var u1,rM,Gp,Nb;const nl=class nl extends qT{constructor(n,r,i,s,o,a,l,c,u){super(r,u);je(this,u1);Se(this,"publicKey");Se(this,"fingerprint");Se(this,"parentFingerprint");Se(this,"mnemonic");Se(this,"chainCode");Se(this,"path");Se(this,"index");Se(this,"depth");uh(n,Xl,"HDNodeWallet"),Mt(this,{publicKey:r.compressedPublicKey});const f=mr(Cx(Fa(this.publicKey)),0,4);Mt(this,{parentFingerprint:i,fingerprint:f,chainCode:s,path:o,index:a,depth:l}),Mt(this,{mnemonic:c})}connect(n){return new nl(Xl,this.signingKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.mnemonic,n)}async encrypt(n,r){return await Jie(tt(this,u1,rM).call(this),n,{progressCallback:r})}encryptSync(n){return Yie(tt(this,u1,rM).call(this),n)}get extendedKey(){return Ke(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),nM(On(["0x0488ADE4",WT(this.depth,1),this.parentFingerprint,WT(this.index,4),this.chainCode,On(["0x00",this.privateKey])]))}hasPath(){return this.path!=null}neuter(){return new ww(Xl,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.provider)}deriveChild(n){const r=Qt(n,"index");xe(r<=4294967295,"invalid index","index",r);let i=this.path;i&&(i+="/"+(r&~Sc),r&Sc&&(i+="'"));const{IR:s,IL:o}=Xie(r,this.chainCode,this.publicKey,this.privateKey),a=new Ec(id((w1(o)+BigInt(this.privateKey))%kIe,32));return new nl(Xl,a,this.fingerprint,rt(s),i,r,this.depth+1,this.mnemonic,this.provider)}derivePath(n){return Qie(this,n)}static fromExtendedKey(n){const r=Lr(ake(n));xe(r.length===82||nM(r.slice(0,78))===n,"invalid extended key","extendedKey","[ REDACTED ]");const i=r[4],s=rt(r.slice(5,9)),o=parseInt(rt(r.slice(9,13)).substring(2),16),a=rt(r.slice(13,45)),l=r.slice(45,78);switch(rt(r.slice(0,4))){case"0x0488b21e":case"0x043587cf":{const c=rt(l);return new ww(Xl,A1(c),c,s,a,null,o,i,null)}case"0x0488ade4":case"0x04358394 ":if(l[0]!==0)break;return new nl(Xl,new Ec(l.slice(1)),s,a,null,o,i,null,null)}xe(!1,"invalid extended key prefix","extendedKey","[ REDACTED ]")}static createRandom(n,r,i){var o;n==null&&(n=""),r==null&&(r=dR),i==null&&(i=um.wordlist());const s=rx.fromEntropy(Gu(16),n,i);return tt(o=nl,Gp,Nb).call(o,s.computeSeed(),s).derivePath(r)}static fromMnemonic(n,r){var i;return r||(r=dR),tt(i=nl,Gp,Nb).call(i,n.computeSeed(),n).derivePath(r)}static fromPhrase(n,r,i,s){var a;r==null&&(r=""),i==null&&(i=dR),s==null&&(s=um.wordlist());const o=rx.fromPhrase(n,r,s);return tt(a=nl,Gp,Nb).call(a,o.computeSeed(),o).derivePath(i)}static fromSeed(n){var r;return tt(r=nl,Gp,Nb).call(r,n,null)}};u1=new WeakSet,rM=function(){const n={address:this.address,privateKey:this.privateKey},r=this.mnemonic;return this.path&&r&&r.wordlist.locale==="en"&&r.password===""&&(n.mnemonic={path:this.path,locale:"en",entropy:r.entropy}),n},Gp=new WeakSet,Nb=function(n,r){xe(KC(n),"invalid seed","seed","[REDACTED]");const i=ht(n,"seed");xe(i.length>=16&&i.length<=64,"invalid seed","seed","[REDACTED]");const s=ht(kx("sha512",TIe,i)),o=new Ec(rt(s.slice(0,32)));return new nl(Xl,o,"0x00000000",rt(s.slice(32)),"m",0,0,r,null)},je(nl,Gp);let Hb=nl;class ww extends Y4{constructor(n,r,i,s,o,a,l,c,u){super(r,u);Se(this,"publicKey");Se(this,"fingerprint");Se(this,"parentFingerprint");Se(this,"chainCode");Se(this,"path");Se(this,"index");Se(this,"depth");uh(n,Xl,"HDNodeVoidWallet"),Mt(this,{publicKey:i});const f=mr(Cx(Fa(i)),0,4);Mt(this,{publicKey:i,fingerprint:f,parentFingerprint:s,chainCode:o,path:a,index:l,depth:c})}connect(n){return new ww(Xl,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,n)}get extendedKey(){return Ke(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),nM(On(["0x0488B21E",WT(this.depth,1),this.parentFingerprint,WT(this.index,4),this.chainCode,this.publicKey]))}hasPath(){return this.path!=null}deriveChild(n){const r=Qt(n,"index");xe(r<=4294967295,"invalid index","index",r);let i=this.path;i&&(i+="/"+(r&~Sc),r&Sc&&(i+="'"));const{IR:s,IL:o}=Xie(r,this.chainCode,this.publicKey,null),a=Ec.addPoints(o,this.publicKey,!0),l=A1(a);return new ww(Xl,l,a,this.fingerprint,rt(s),i,r,this.depth+1,this.provider)}derivePath(n){return Qie(this,n)}}function pmt(t){const e=Qt(t,"index");return xe(e>=0&&e<Sc,"invalid account index","index",e),`m/44'/60'/${e}'/0/0`}function mmt(t){const e=Qt(t,"index");return xe(e>=0&&e<Sc,"invalid account index","index",e),`m/44'/60'/0'/0/${e}`}function ZH(t){try{if(JSON.parse(t).encseed)return!0}catch{}return!1}function eV(t,e){const n=JSON.parse(t),r=C1(e),i=xn(Zr(n,"ethaddr:string!")),s=Vie(Zr(n,"encseed:string!"));xe(s&&s.length%16===0,"invalid encseed","json",t);const o=ht(dh(r,r,2e3,32,"sha256")).slice(0,16),a=s.slice(0,16),l=s.slice(16),c=new E8(o,a),u=wIe(ht(c.decrypt(l)));let f="";for(let m=0;m<u.length;m++)f+=String.fromCharCode(u[m]);return{address:i,privateKey:od(f)}}function tV(t){return new Promise(e=>{setTimeout(()=>{e()},t)})}var d1,iM;const cp=class cp extends qT{constructor(e,n){typeof e=="string"&&!e.startsWith("0x")&&(e="0x"+e);let r=typeof e=="string"?new Ec(e):e;super(r,n)}connect(e){return new cp(this.signingKey,e)}async encrypt(e,n){const r={address:this.address,privateKey:this.privateKey};return await Jie(r,e,{progressCallback:n})}encryptSync(e){const n={address:this.address,privateKey:this.privateKey};return Yie(n,e)}static async fromEncryptedJson(e,n,r){var s;let i=null;return XH(e)?i=await AIe(e,n,r):ZH(e)&&(r&&(r(0),await tV(0)),i=eV(e,n),r&&(r(1),await tV(0))),tt(s=cp,d1,iM).call(s,i)}static fromEncryptedJsonSync(e,n){var i;let r=null;return XH(e)?r=SIe(e,n):ZH(e)?r=eV(e,n):xe(!1,"invalid JSON wallet","json","[ REDACTED ]"),tt(i=cp,d1,iM).call(i,r)}static createRandom(e){const n=Hb.createRandom();return e?n.connect(e):n}static fromPhrase(e,n){const r=Hb.fromPhrase(e);return n?r.connect(n):r}};d1=new WeakSet,iM=function(e){if(xe(e,"invalid JSON wallet","json","[ REDACTED ]"),"mnemonic"in e&&e.mnemonic&&e.mnemonic.locale==="en"){const r=rx.fromEntropy(e.mnemonic.entropy),i=Hb.fromMnemonic(r,e.mnemonic.path);if(i.address===e.address&&i.privateKey===e.privateKey)return i;console.log("WARNING: JSON mismatch address/privateKey != mnemonic; fallback onto private key")}const n=new cp(e.privateKey);return xe(n.address===e.address,"address/privateKey mismatch","json","[ REDACTED ]"),n},je(cp,d1);let Wf=cp;var lf={},fR={},hR={},pR={},mR={},gR={},eb,nV;function NIe(){if(nV)return eb;nV=1,eb=t(typeof ln<"u"&&ln)||t(eb.Buffer)||t(typeof window<"u"&&window.Buffer)||eb.Buffer;function t(e){return e&&e.isBuffer&&e}return eb}var yR,rV;function S8(){if(rV)return yR;rV=1;var t={}.toString;return yR=Array.isArray||function(e){return t.call(e)=="[object Array]"},yR}var xR={exports:{}},iV;function _Ie(){if(iV)return xR.exports;iV=1;var t=qa(),e=xR.exports=n(0);e.alloc=n,e.concat=t.concat,e.from=r;function n(i){return new Array(i)}function r(i){if(!t.isBuffer(i)&&t.isView(i))i=t.Uint8Array.from(i);else if(t.isArrayBuffer(i))i=new Uint8Array(i);else{if(typeof i=="string")return t.from.call(e,i);if(typeof i=="number")throw new TypeError('"value" argument must not be a number')}return Array.prototype.slice.call(i)}return xR.exports}var vR={exports:{}},sV;function IIe(){if(sV)return vR.exports;sV=1;var t=qa(),e=t.global,n=vR.exports=t.hasBuffer?r(0):[];n.alloc=t.hasBuffer&&e.alloc||r,n.concat=t.concat,n.from=i;function r(s){return new e(s)}function i(s){if(!t.isBuffer(s)&&t.isView(s))s=t.Uint8Array.from(s);else if(t.isArrayBuffer(s))s=new Uint8Array(s);else{if(typeof s=="string")return t.from.call(n,s);if(typeof s=="number")throw new TypeError('"value" argument must not be a number')}return e.from&&e.from.length!==1?e.from(s):new e(s)}return vR.exports}var bR={exports:{}},oV;function PIe(){if(oV)return bR.exports;oV=1;var t=qa(),e=bR.exports=t.hasArrayBuffer?n(0):[];e.alloc=n,e.concat=t.concat,e.from=r;function n(i){return new Uint8Array(i)}function r(i){if(t.isView(i)){var s=i.byteOffset,o=i.byteLength;i=i.buffer,i.byteLength!==o&&(i.slice?i=i.slice(s,s+o):(i=new Uint8Array(i),i.byteLength!==o&&(i=Array.prototype.slice.call(i,s,s+o))))}else{if(typeof i=="string")return t.from.call(e,i);if(typeof i=="number")throw new TypeError('"value" argument must not be a number')}return new Uint8Array(i)}return bR.exports}var D0={},tb={},aV;function RIe(){if(aV)return tb;aV=1,tb.copy=n,tb.toString=e,tb.write=t;function t(r,i){for(var s=this,o=i||(i|=0),a=r.length,l=0,c=0;c<a;)l=r.charCodeAt(c++),l<128?s[o++]=l:l<2048?(s[o++]=192|l>>>6,s[o++]=128|l&63):l<55296||l>57343?(s[o++]=224|l>>>12,s[o++]=128|l>>>6&63,s[o++]=128|l&63):(l=(l-55296<<10|r.charCodeAt(c++)-56320)+65536,s[o++]=240|l>>>18,s[o++]=128|l>>>12&63,s[o++]=128|l>>>6&63,s[o++]=128|l&63);return o-i}function e(r,i,s){var o=this,a=i|0;s||(s=o.length);for(var l="",c=0;a<s;){if(c=o[a++],c<128){l+=String.fromCharCode(c);continue}(c&224)===192?c=(c&31)<<6|o[a++]&63:(c&240)===224?c=(c&15)<<12|(o[a++]&63)<<6|o[a++]&63:(c&248)===240&&(c=(c&7)<<18|(o[a++]&63)<<12|(o[a++]&63)<<6|o[a++]&63),c>=65536?(c-=65536,l+=String.fromCharCode((c>>>10)+55296,(c&1023)+56320)):l+=String.fromCharCode(c)}return l}function n(r,i,s,o){var a;s||(s=0),!o&&o!==0&&(o=this.length),i||(i=0);var l=o-s;if(r===this&&s<i&&i<o)for(a=l-1;a>=0;a--)r[a+i]=this[a+s];else for(a=0;a<l;a++)r[a+i]=this[a+s];return l}return tb}var lV;function A8(){if(lV)return D0;lV=1;var t=RIe();D0.copy=s,D0.slice=o,D0.toString=a,D0.write=l("write");var e=qa(),n=e.global,r=e.hasBuffer&&"TYPED_ARRAY_SUPPORT"in n,i=r&&!n.TYPED_ARRAY_SUPPORT;function s(c,u,f,m){var g=e.isBuffer(this),x=e.isBuffer(c);if(g&&x)return this.copy(c,u,f,m);if(!i&&!g&&!x&&e.isView(this)&&e.isView(c)){var v=f||m!=null?o.call(this,f,m):this;return c.set(v,u),v.length}else return t.copy.call(this,c,u,f,m)}function o(c,u){var f=this.slice||!i&&this.subarray;if(f)return f.call(this,c,u);var m=e.alloc.call(this,u-c);return s.call(this,m,0,c,u),m}function a(c,u,f){var m=!r&&e.isBuffer(this)?this.toString:t.toString;return m.apply(this,arguments)}function l(c){return u;function u(){var f=this[c]||t[c];return f.apply(this,arguments)}}return D0}var cV;function qa(){return cV||(cV=1,(function(t){var e=t.global=NIe(),n=t.hasBuffer=e&&!!e.isBuffer,r=t.hasArrayBuffer=typeof ArrayBuffer<"u",i=t.isArray=S8();t.isArrayBuffer=r?v:C;var s=t.isBuffer=n?e.isBuffer:C,o=t.isView=r?ArrayBuffer.isView||k("ArrayBuffer","buffer"):C;t.alloc=m,t.concat=g,t.from=f;var a=t.Array=_Ie(),l=t.Buffer=IIe(),c=t.Uint8Array=PIe(),u=t.prototype=A8();function f(O){return typeof O=="string"?w.call(this,O):E(this).from(O)}function m(O){return E(this).alloc(O)}function g(O,j){j||(j=0,Array.prototype.forEach.call(O,F));var R=this!==t&&this||O[0],U=m.call(R,j),V=0;return Array.prototype.forEach.call(O,$),U;function F(K){j+=K.length}function $(K){V+=u.copy.call(K,U,V)}}var x=k("ArrayBuffer");function v(O){return O instanceof ArrayBuffer||x(O)}function w(O){var j=O.length*3,R=m.call(this,j),U=u.write.call(R,O);return j!==U&&(R=u.slice.call(R,0,U)),R}function E(O){return s(O)?l:o(O)?c:i(O)?a:n?l:r?c:a}function C(){return!1}function k(O,j){return O="[object "+O+"]",function(R){return R!=null&&{}.toString.call(j?R[j]:R)===O}}})(gR)),gR}var uV;function T8(){if(uV)return mR;uV=1,mR.ExtBuffer=e;var t=qa();function e(n,r){if(!(this instanceof e))return new e(n,r);this.buffer=t.from(n),this.type=r}return mR}var wR={},dV;function OIe(){if(dV)return wR;dV=1,wR.setExtPackers=s;var t=qa(),e=t.global,n=t.Uint8Array.from,r,i={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function s(u){u.addExtPacker(14,Error,[c,o]),u.addExtPacker(1,EvalError,[c,o]),u.addExtPacker(2,RangeError,[c,o]),u.addExtPacker(3,ReferenceError,[c,o]),u.addExtPacker(4,SyntaxError,[c,o]),u.addExtPacker(5,TypeError,[c,o]),u.addExtPacker(6,URIError,[c,o]),u.addExtPacker(10,RegExp,[l,o]),u.addExtPacker(11,Boolean,[a,o]),u.addExtPacker(12,String,[a,o]),u.addExtPacker(13,Date,[Number,o]),u.addExtPacker(15,Number,[a,o]),typeof Uint8Array<"u"&&(u.addExtPacker(17,Int8Array,n),u.addExtPacker(18,Uint8Array,n),u.addExtPacker(19,Int16Array,n),u.addExtPacker(20,Uint16Array,n),u.addExtPacker(21,Int32Array,n),u.addExtPacker(22,Uint32Array,n),u.addExtPacker(23,Float32Array,n),typeof Float64Array<"u"&&u.addExtPacker(24,Float64Array,n),typeof Uint8ClampedArray<"u"&&u.addExtPacker(25,Uint8ClampedArray,n),u.addExtPacker(26,ArrayBuffer,n),u.addExtPacker(29,DataView,n)),t.hasBuffer&&u.addExtPacker(27,e,t.from)}function o(u){return r||(r=rse().encode),r(u)}function a(u){return u.valueOf()}function l(u){u=RegExp.prototype.toString.call(u).split("/"),u.shift();var f=[u.pop()];return f.unshift(u.join("/")),f}function c(u){var f={};for(var m in i)f[m]=u[m];return f}return wR}var ER={},VS={},fV;function k8(){return fV||(fV=1,(function(t){(function(e){var n="undefined",r=n!==typeof ln&&ln,i=n!==typeof Uint8Array&&Uint8Array,s=n!==typeof ArrayBuffer&&ArrayBuffer,o=[0,0,0,0,0,0,0,0],a=Array.isArray||R,l=4294967296,c=16777216,u;f("Uint64BE",!0,!0),f("Int64BE",!0,!1),f("Uint64LE",!1,!0),f("Int64LE",!1,!1);function f(U,V,F){var $=V?0:4,K=V?4:0,H=V?0:3,B=V?1:2,A=V?2:1,I=V?3:0,M=V?C:O,z=V?k:j,G=q.prototype,te="is"+U,Y="_"+te;return G.buffer=void 0,G.offset=0,G[Y]=!0,G.toNumber=X,G.toString=re,G.toJSON=X,G.toArray=m,r&&(G.toBuffer=g),i&&(G.toArrayBuffer=x),q[te]=D,e[U]=q,q;function q(ue,me,ce,oe){return this instanceof q?_(this,ue,me,ce,oe):new q(ue,me,ce,oe)}function D(ue){return!!(ue&&ue[Y])}function _(ue,me,ce,oe,ke){if(i&&s&&(me instanceof s&&(me=new i(me)),oe instanceof s&&(oe=new i(oe))),!me&&!ce&&!oe&&!u){ue.buffer=E(o,0);return}if(!v(me,ce)){var Ne=u||Array;ke=ce,oe=me,ce=0,me=new Ne(8)}ue.buffer=me,ue.offset=ce|=0,n!==typeof oe&&(typeof oe=="string"?W(me,ce,oe,ke||10):v(oe,ke)?w(me,ce,oe,ke):typeof ke=="number"?(ae(me,ce+$,oe),ae(me,ce+K,ke)):oe>0?M(me,ce,oe):oe<0?z(me,ce,oe):w(me,ce,o,0))}function W(ue,me,ce,oe){var ke=0,Ne=ce.length,ze=0,Ze=0;ce[0]==="-"&&ke++;for(var Ye=ke;ke<Ne;){var We=parseInt(ce[ke++],oe);if(!(We>=0))break;Ze=Ze*oe+We,ze=ze*oe+Math.floor(Ze/l),Ze%=l}Ye&&(ze=~ze,Ze?Ze=l-Ze:ze++),ae(ue,me+$,ze),ae(ue,me+K,Ze)}function X(){var ue=this.buffer,me=this.offset,ce=Ee(ue,me+$),oe=Ee(ue,me+K);return F||(ce|=0),ce?ce*l+oe:oe}function re(ue){var me=this.buffer,ce=this.offset,oe=Ee(me,ce+$),ke=Ee(me,ce+K),Ne="",ze=!F&&oe&2147483648;for(ze&&(oe=~oe,ke=l-ke),ue=ue||10;;){var Ze=oe%ue*l+ke;if(oe=Math.floor(oe/ue),ke=Math.floor(Ze/ue),Ne=(Ze%ue).toString(ue)+Ne,!oe&&!ke)break}return ze&&(Ne="-"+Ne),Ne}function ae(ue,me,ce){ue[me+I]=ce&255,ce=ce>>8,ue[me+A]=ce&255,ce=ce>>8,ue[me+B]=ce&255,ce=ce>>8,ue[me+H]=ce&255}function Ee(ue,me){return ue[me+H]*c+(ue[me+B]<<16)+(ue[me+A]<<8)+ue[me+I]}}function m(U){var V=this.buffer,F=this.offset;return u=null,U!==!1&&F===0&&V.length===8&&a(V)?V:E(V,F)}function g(U){var V=this.buffer,F=this.offset;if(u=r,U!==!1&&F===0&&V.length===8&&ln.isBuffer(V))return V;var $=new r(8);return w($,0,V,F),$}function x(U){var V=this.buffer,F=this.offset,$=V.buffer;if(u=i,U!==!1&&F===0&&$ instanceof s&&$.byteLength===8)return $;var K=new i(8);return w(K,0,V,F),K.buffer}function v(U,V){var F=U&&U.length;return V|=0,F&&V+8<=F&&typeof U[V]!="string"}function w(U,V,F,$){V|=0,$|=0;for(var K=0;K<8;K++)U[V++]=F[$++]&255}function E(U,V){return Array.prototype.slice.call(U,V,V+8)}function C(U,V,F){for(var $=V+8;$>V;)U[--$]=F&255,F/=256}function k(U,V,F){var $=V+8;for(F++;$>V;)U[--$]=-F&255^255,F/=256}function O(U,V,F){for(var $=V+8;V<$;)U[V++]=F&255,F/=256}function j(U,V,F){var $=V+8;for(F++;V<$;)U[V++]=-F&255^255,F/=256}function R(U){return!!U&&Object.prototype.toString.call(U)=="[object Array]"}})(typeof t.nodeName!="string"?t:VS||{})})(VS)),VS}var SR={},qS={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var hV;function Zie(){return hV||(hV=1,qS.read=function(t,e,n,r,i){var s,o,a=i*8-r-1,l=(1<<a)-1,c=l>>1,u=-7,f=n?i-1:0,m=n?-1:1,g=t[e+f];for(f+=m,s=g&(1<<-u)-1,g>>=-u,u+=a;u>0;s=s*256+t[e+f],f+=m,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=r;u>0;o=o*256+t[e+f],f+=m,u-=8);if(s===0)s=1-c;else{if(s===l)return o?NaN:(g?-1:1)*(1/0);o=o+Math.pow(2,r),s=s-c}return(g?-1:1)*o*Math.pow(2,s-r)},qS.write=function(t,e,n,r,i,s){var o,a,l,c=s*8-i-1,u=(1<<c)-1,f=u>>1,m=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=r?0:s-1,x=r?1:-1,v=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+f>=1?e+=m/l:e+=m*Math.pow(2,1-f),e*l>=2&&(o++,l/=2),o+f>=u?(a=0,o=u):o+f>=1?(a=(e*l-1)*Math.pow(2,i),o=o+f):(a=e*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;t[n+g]=a&255,g+=x,a/=256,i-=8);for(o=o<<i|a,c+=i;c>0;t[n+g]=o&255,g+=x,o/=256,c-=8);t[n+g-x]|=v*128}),qS}var AR={},pV;function ese(){if(pV)return AR;pV=1;for(var t=AR.uint8=new Array(256),e=0;e<=255;e++)t[e]=n(e);function n(r){return function(i){var s=i.reserve(1);i.buffer[s]=r}}return AR}var mV;function MIe(){if(mV)return SR;mV=1;var t=Zie(),e=k8(),n=e.Uint64BE,r=e.Int64BE,i=ese().uint8,s=qa(),o=s.global,a=s.hasBuffer&&"TYPED_ARRAY_SUPPORT"in o,l=a&&!o.TYPED_ARRAY_SUPPORT,c=s.hasBuffer&&o.prototype||{};SR.getWriteToken=u;function u(R){return R&&R.uint8array?f():l||s.hasBuffer&&R&&R.safe?g():m()}function f(){var R=m();return R[202]=E(202,4,O),R[203]=E(203,8,j),R}function m(){var R=i.slice();return R[196]=x(196),R[197]=v(197),R[198]=w(198),R[199]=x(199),R[200]=v(200),R[201]=w(201),R[202]=E(202,4,c.writeFloatBE||O,!0),R[203]=E(203,8,c.writeDoubleBE||j,!0),R[204]=x(204),R[205]=v(205),R[206]=w(206),R[207]=E(207,8,C),R[208]=x(208),R[209]=v(209),R[210]=w(210),R[211]=E(211,8,k),R[217]=x(217),R[218]=v(218),R[219]=w(219),R[220]=v(220),R[221]=w(221),R[222]=v(222),R[223]=w(223),R}function g(){var R=i.slice();return R[196]=E(196,1,o.prototype.writeUInt8),R[197]=E(197,2,o.prototype.writeUInt16BE),R[198]=E(198,4,o.prototype.writeUInt32BE),R[199]=E(199,1,o.prototype.writeUInt8),R[200]=E(200,2,o.prototype.writeUInt16BE),R[201]=E(201,4,o.prototype.writeUInt32BE),R[202]=E(202,4,o.prototype.writeFloatBE),R[203]=E(203,8,o.prototype.writeDoubleBE),R[204]=E(204,1,o.prototype.writeUInt8),R[205]=E(205,2,o.prototype.writeUInt16BE),R[206]=E(206,4,o.prototype.writeUInt32BE),R[207]=E(207,8,C),R[208]=E(208,1,o.prototype.writeInt8),R[209]=E(209,2,o.prototype.writeInt16BE),R[210]=E(210,4,o.prototype.writeInt32BE),R[211]=E(211,8,k),R[217]=E(217,1,o.prototype.writeUInt8),R[218]=E(218,2,o.prototype.writeUInt16BE),R[219]=E(219,4,o.prototype.writeUInt32BE),R[220]=E(220,2,o.prototype.writeUInt16BE),R[221]=E(221,4,o.prototype.writeUInt32BE),R[222]=E(222,2,o.prototype.writeUInt16BE),R[223]=E(223,4,o.prototype.writeUInt32BE),R}function x(R){return function(U,V){var F=U.reserve(2),$=U.buffer;$[F++]=R,$[F]=V}}function v(R){return function(U,V){var F=U.reserve(3),$=U.buffer;$[F++]=R,$[F++]=V>>>8,$[F]=V}}function w(R){return function(U,V){var F=U.reserve(5),$=U.buffer;$[F++]=R,$[F++]=V>>>24,$[F++]=V>>>16,$[F++]=V>>>8,$[F]=V}}function E(R,U,V,F){return function($,K){var H=$.reserve(U+1);$.buffer[H++]=R,V.call($.buffer,K,H,F)}}function C(R,U){new n(this,U,R)}function k(R,U){new r(this,U,R)}function O(R,U){t.write(this,R,U,!1,23,4)}function j(R,U){t.write(this,R,U,!1,52,8)}return SR}var gV;function DIe(){if(gV)return ER;gV=1;var t=S8(),e=k8(),n=e.Uint64BE,r=e.Int64BE,i=qa(),s=A8(),o=MIe(),a=ese().uint8,l=T8().ExtBuffer,c=typeof Uint8Array<"u",u=typeof Map<"u",f=[];f[1]=212,f[2]=213,f[4]=214,f[8]=215,f[16]=216,ER.getWriteType=m;function m(g){var x=o.getWriteToken(g),v=g&&g.useraw,w=c&&g&&g.binarraybuffer,E=w?i.isArrayBuffer:i.isBuffer,C=w?G:z,k=u&&g&&g.usemap,O=k?q:Y,j={boolean:R,function:I,number:U,object:v?A:B,string:H(v?K:$),symbol:I,undefined:I};return j;function R(_,W){var X=W?195:194;x[X](_,W)}function U(_,W){var X=W|0,re;if(W!==X){re=203,x[re](_,W);return}else-32<=X&&X<=127?re=X&255:0<=X?re=X<=255?204:X<=65535?205:206:re=-128<=X?208:-32768<=X?209:210;x[re](_,X)}function V(_,W){var X=207;x[X](_,W.toArray())}function F(_,W){var X=211;x[X](_,W.toArray())}function $(_){return _<32?1:_<=255?2:_<=65535?3:5}function K(_){return _<32?1:_<=65535?3:5}function H(_){return W;function W(X,re){var ae=re.length,Ee=5+ae*3;X.offset=X.reserve(Ee);var ue=X.buffer,me=_(ae),ce=X.offset+me;ae=s.write.call(ue,re,ce);var oe=_(ae);if(me!==oe){var ke=ce+oe-me,Ne=ce+ae;s.copy.call(ue,ue,ke,ce,Ne)}var ze=oe===1?160+ae:oe<=3?215+oe:219;x[ze](X,ae),X.offset+=ae}}function B(_,W){if(W===null)return I(_,W);if(E(W))return C(_,W);if(t(W))return M(_,W);if(n.isUint64BE(W))return V(_,W);if(r.isInt64BE(W))return F(_,W);var X=_.codec.getExtPacker(W);if(X&&(W=X(W)),W instanceof l)return te(_,W);O(_,W)}function A(_,W){if(E(W))return D(_,W);B(_,W)}function I(_,W){var X=192;x[X](_,W)}function M(_,W){var X=W.length,re=X<16?144+X:X<=65535?220:221;x[re](_,X);for(var ae=_.codec.encode,Ee=0;Ee<X;Ee++)ae(_,W[Ee])}function z(_,W){var X=W.length,re=X<255?196:X<=65535?197:198;x[re](_,X),_.send(W)}function G(_,W){z(_,new Uint8Array(W))}function te(_,W){var X=W.buffer,re=X.length,ae=f[re]||(re<255?199:re<=65535?200:201);x[ae](_,re),a[W.type](_),_.send(X)}function Y(_,W){var X=Object.keys(W),re=X.length,ae=re<16?128+re:re<=65535?222:223;x[ae](_,re);var Ee=_.codec.encode;X.forEach(function(ue){Ee(_,ue),Ee(_,W[ue])})}function q(_,W){if(!(W instanceof Map))return Y(_,W);var X=W.size,re=X<16?128+X:X<=65535?222:223;x[re](_,X);var ae=_.codec.encode;W.forEach(function(Ee,ue,me){ae(_,ue),ae(_,Ee)})}function D(_,W){var X=W.length,re=X<32?160+X:X<=65535?218:219;x[re](_,X),_.send(W)}}return ER}var L0={},yV;function c2(){if(yV)return L0;yV=1;var t=S8();L0.createCodec=a,L0.install=r,L0.filter=o;var e=qa();function n(l){if(!(this instanceof n))return new n(l);this.options=l,this.init()}n.prototype.init=function(){var l=this.options;return l&&l.uint8array&&(this.bufferish=e.Uint8Array),this};function r(l){for(var c in l)n.prototype[c]=i(n.prototype[c],l[c])}function i(l,c){return l&&c?u:l||c;function u(){return l.apply(this,arguments),c.apply(this,arguments)}}function s(l){return l=l.slice(),function(u){return l.reduce(c,u)};function c(u,f){return f(u)}}function o(l){return t(l)?s(l):l}function a(l){return new n(l)}return L0.preset=a({preset:!0}),L0}var xV;function C8(){if(xV)return pR;xV=1;var t=T8().ExtBuffer,e=OIe(),n=DIe(),r=c2();r.install({addExtPacker:o,getExtPacker:a,init:s}),pR.preset=s.call(r.preset);function i(l){var c=n.getWriteType(l);return u;function u(f,m){var g=c[typeof m];if(!g)throw new Error('Unsupported type "'+typeof m+'": '+m);g(f,m)}}function s(){var l=this.options;return this.encode=i(l),l&&l.preset&&e.setExtPackers(this),this}function o(l,c,u){u=r.filter(u);var f=c.name;if(f&&f!=="Object"){var m=this.extPackers||(this.extPackers={});m[f]=x}else{var g=this.extEncoderList||(this.extEncoderList=[]);g.unshift([c,x])}function x(v){return u&&(v=u(v)),new t(v,l)}}function a(l){var c=this.extPackers||(this.extPackers={}),u=l.constructor,f=u&&u.name&&c[u.name];if(f)return f;for(var m=this.extEncoderList||(this.extEncoderList=[]),g=m.length,x=0;x<g;x++){var v=m[x];if(u===v[0])return v[1]}}return pR}var GS={},vV;function tse(){if(vV)return GS;vV=1,GS.FlexDecoder=i,GS.FlexEncoder=s;var t=qa(),e=2048,n=65536,r="BUFFER_SHORTAGE";function i(){if(!(this instanceof i))return new i}function s(){if(!(this instanceof s))return new s}i.mixin=g(o()),i.mixin(i.prototype),s.mixin=g(a()),s.mixin(s.prototype);function o(){return{bufferish:t,write:x,fetch:c,flush:v,push:f,pull:m,read:u,reserve:w,offset:0};function x(E){var C=this.offset?t.prototype.slice.call(this.buffer,this.offset):this.buffer;this.buffer=C?E?this.bufferish.concat([C,E]):C:E,this.offset=0}function v(){for(;this.offset<this.buffer.length;){var E=this.offset,C;try{C=this.fetch()}catch(k){if(k&&k.message!=r)throw k;this.offset=E;break}this.push(C)}}function w(E){var C=this.offset,k=C+E;if(k>this.buffer.length)throw new Error(r);return this.offset=k,C}}function a(){return{bufferish:t,write:l,fetch:x,flush:v,push:f,pull:w,read:u,reserve:E,send:C,maxBufferSize:n,minBufferSize:e,offset:0,start:0};function x(){var k=this.start;if(k<this.offset){var O=this.start=this.offset;return t.prototype.slice.call(this.buffer,k,O)}}function v(){for(;this.start<this.offset;){var k=this.fetch();k&&this.push(k)}}function w(){var k=this.buffers||(this.buffers=[]),O=k.length>1?this.bufferish.concat(k):k[0];return k.length=0,O}function E(k){var O=k|0;if(this.buffer){var j=this.buffer.length,R=this.offset|0,U=R+O;if(U<j)return this.offset=U,R;this.flush(),k=Math.max(k,Math.min(j*2,this.maxBufferSize))}return k=Math.max(k,this.minBufferSize),this.buffer=this.bufferish.alloc(k),this.start=0,this.offset=O,0}function C(k){var O=k.length;if(O>this.minBufferSize)this.flush(),this.push(k);else{var j=this.reserve(O);t.prototype.copy.call(k,this.buffer,j)}}}function l(){throw new Error("method not implemented: write()")}function c(){throw new Error("method not implemented: fetch()")}function u(){var x=this.buffers&&this.buffers.length;return x?(this.flush(),this.pull()):this.fetch()}function f(x){var v=this.buffers||(this.buffers=[]);v.push(x)}function m(){var x=this.buffers||(this.buffers=[]);return x.shift()}function g(x){return v;function v(w){for(var E in x)w[E]=x[E];return w}}return GS}var bV;function nse(){if(bV)return hR;bV=1,hR.EncodeBuffer=n;var t=C8().preset,e=tse().FlexEncoder;e.mixin(n.prototype);function n(r){if(!(this instanceof n))return new n(r);if(r&&(this.options=r,r.codec)){var i=this.codec=r.codec;i.bufferish&&(this.bufferish=i.bufferish)}}return n.prototype.codec=t,n.prototype.write=function(r){this.codec.encode(this,r)},hR}var wV;function rse(){if(wV)return fR;wV=1,fR.encode=e;var t=nse().EncodeBuffer;function e(n,r){var i=new t(r);return i.write(n),i.read()}return fR}var TR={},kR={},CR={},NR={},EV;function LIe(){if(EV)return NR;EV=1,NR.setExtUnpackers=i;var t=qa(),e=t.global,n,r={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function i(u){u.addExtUnpacker(14,[s,a(Error)]),u.addExtUnpacker(1,[s,a(EvalError)]),u.addExtUnpacker(2,[s,a(RangeError)]),u.addExtUnpacker(3,[s,a(ReferenceError)]),u.addExtUnpacker(4,[s,a(SyntaxError)]),u.addExtUnpacker(5,[s,a(TypeError)]),u.addExtUnpacker(6,[s,a(URIError)]),u.addExtUnpacker(10,[s,o]),u.addExtUnpacker(11,[s,l(Boolean)]),u.addExtUnpacker(12,[s,l(String)]),u.addExtUnpacker(13,[s,l(Date)]),u.addExtUnpacker(15,[s,l(Number)]),typeof Uint8Array<"u"&&(u.addExtUnpacker(17,l(Int8Array)),u.addExtUnpacker(18,l(Uint8Array)),u.addExtUnpacker(19,[c,l(Int16Array)]),u.addExtUnpacker(20,[c,l(Uint16Array)]),u.addExtUnpacker(21,[c,l(Int32Array)]),u.addExtUnpacker(22,[c,l(Uint32Array)]),u.addExtUnpacker(23,[c,l(Float32Array)]),typeof Float64Array<"u"&&u.addExtUnpacker(24,[c,l(Float64Array)]),typeof Uint8ClampedArray<"u"&&u.addExtUnpacker(25,l(Uint8ClampedArray)),u.addExtUnpacker(26,c),u.addExtUnpacker(29,[c,l(DataView)])),t.hasBuffer&&u.addExtUnpacker(27,l(e))}function s(u){return n||(n=ose().decode),n(u)}function o(u){return RegExp.apply(null,u)}function a(u){return function(f){var m=new u;for(var g in r)m[g]=f[g];return m}}function l(u){return function(f){return new u(f)}}function c(u){return new Uint8Array(u).buffer}return NR}var KS={},SV;function ise(){if(SV)return KS;SV=1;var t=Zie(),e=k8(),n=e.Uint64BE,r=e.Int64BE;KS.getReadFormat=l,KS.readUint8=w;var i=qa(),s=A8(),o=typeof Map<"u",a=!0;function l(B){var A=i.hasArrayBuffer&&B&&B.binarraybuffer,I=B&&B.int64,M=o&&B&&B.usemap,z={map:M?u:c,array:f,str:m,bin:A?x:g,ext:v,uint8:w,uint16:C,uint32:O,uint64:R(8,I?F:U),int8:E,int16:k,int32:j,int64:R(8,I?$:V),float32:R(4,K),float64:R(8,H)};return z}function c(B,A){var I={},M,z=new Array(A),G=new Array(A),te=B.codec.decode;for(M=0;M<A;M++)z[M]=te(B),G[M]=te(B);for(M=0;M<A;M++)I[z[M]]=G[M];return I}function u(B,A){var I=new Map,M,z=new Array(A),G=new Array(A),te=B.codec.decode;for(M=0;M<A;M++)z[M]=te(B),G[M]=te(B);for(M=0;M<A;M++)I.set(z[M],G[M]);return I}function f(B,A){for(var I=new Array(A),M=B.codec.decode,z=0;z<A;z++)I[z]=M(B);return I}function m(B,A){var I=B.reserve(A),M=I+A;return s.toString.call(B.buffer,"utf-8",I,M)}function g(B,A){var I=B.reserve(A),M=I+A,z=s.slice.call(B.buffer,I,M);return i.from(z)}function x(B,A){var I=B.reserve(A),M=I+A,z=s.slice.call(B.buffer,I,M);return i.Uint8Array.from(z).buffer}function v(B,A){var I=B.reserve(A+1),M=B.buffer[I++],z=I+A,G=B.codec.getExtUnpacker(M);if(!G)throw new Error("Invalid ext type: "+(M&&"0x"+M.toString(16)));var te=s.slice.call(B.buffer,I,z);return G(te)}function w(B){var A=B.reserve(1);return B.buffer[A]}function E(B){var A=B.reserve(1),I=B.buffer[A];return I&128?I-256:I}function C(B){var A=B.reserve(2),I=B.buffer;return I[A++]<<8|I[A]}function k(B){var A=B.reserve(2),I=B.buffer,M=I[A++]<<8|I[A];return M&32768?M-65536:M}function O(B){var A=B.reserve(4),I=B.buffer;return I[A++]*16777216+(I[A++]<<16)+(I[A++]<<8)+I[A]}function j(B){var A=B.reserve(4),I=B.buffer;return I[A++]<<24|I[A++]<<16|I[A++]<<8|I[A]}function R(B,A){return function(I){var M=I.reserve(B);return A.call(I.buffer,M,a)}}function U(B){return new n(this,B).toNumber()}function V(B){return new r(this,B).toNumber()}function F(B){return new n(this,B)}function $(B){return new r(this,B)}function K(B){return t.read(this,B,!1,23,4)}function H(B){return t.read(this,B,!1,52,8)}return KS}var _R={},AV;function BIe(){if(AV)return _R;AV=1;var t=ise();_R.getReadToken=e;function e(a){var l=t.getReadFormat(a);return a&&a.useraw?r(l):n(l)}function n(a){var l,c=new Array(256);for(l=0;l<=127;l++)c[l]=i(l);for(l=128;l<=143;l++)c[l]=o(l-128,a.map);for(l=144;l<=159;l++)c[l]=o(l-144,a.array);for(l=160;l<=191;l++)c[l]=o(l-160,a.str);for(c[192]=i(null),c[193]=null,c[194]=i(!1),c[195]=i(!0),c[196]=s(a.uint8,a.bin),c[197]=s(a.uint16,a.bin),c[198]=s(a.uint32,a.bin),c[199]=s(a.uint8,a.ext),c[200]=s(a.uint16,a.ext),c[201]=s(a.uint32,a.ext),c[202]=a.float32,c[203]=a.float64,c[204]=a.uint8,c[205]=a.uint16,c[206]=a.uint32,c[207]=a.uint64,c[208]=a.int8,c[209]=a.int16,c[210]=a.int32,c[211]=a.int64,c[212]=o(1,a.ext),c[213]=o(2,a.ext),c[214]=o(4,a.ext),c[215]=o(8,a.ext),c[216]=o(16,a.ext),c[217]=s(a.uint8,a.str),c[218]=s(a.uint16,a.str),c[219]=s(a.uint32,a.str),c[220]=s(a.uint16,a.array),c[221]=s(a.uint32,a.array),c[222]=s(a.uint16,a.map),c[223]=s(a.uint32,a.map),l=224;l<=255;l++)c[l]=i(l-256);return c}function r(a){var l,c=n(a).slice();for(c[217]=c[196],c[218]=c[197],c[219]=c[198],l=160;l<=191;l++)c[l]=o(l-160,a.bin);return c}function i(a){return function(){return a}}function s(a,l){return function(c){var u=a(c);return l(c,u)}}function o(a,l){return function(c){return l(c,a)}}return _R}var TV;function N8(){if(TV)return CR;TV=1;var t=T8().ExtBuffer,e=LIe(),n=ise().readUint8,r=BIe(),i=c2();i.install({addExtUnpacker:a,getExtUnpacker:l,init:o}),CR.preset=o.call(i.preset);function s(c){var u=r.getReadToken(c);return f;function f(m){var g=n(m),x=u[g];if(!x)throw new Error("Invalid type: "+(g&&"0x"+g.toString(16)));return x(m)}}function o(){var c=this.options;return this.decode=s(c),c&&c.preset&&e.setExtUnpackers(this),this}function a(c,u){var f=this.extUnpackers||(this.extUnpackers=[]);f[c]=i.filter(u)}function l(c){var u=this.extUnpackers||(this.extUnpackers=[]);return u[c]||f;function f(m){return new t(m,c)}}return CR}var kV;function sse(){if(kV)return kR;kV=1,kR.DecodeBuffer=n;var t=N8().preset,e=tse().FlexDecoder;e.mixin(n.prototype);function n(r){if(!(this instanceof n))return new n(r);if(r&&(this.options=r,r.codec)){var i=this.codec=r.codec;i.bufferish&&(this.bufferish=i.bufferish)}}return n.prototype.codec=t,n.prototype.fetch=function(){return this.codec.decode(this)},kR}var CV;function ose(){if(CV)return TR;CV=1,TR.decode=e;var t=sse().DecodeBuffer;function e(n,r){var i=new t(r);return i.write(n),i.read()}return TR}var IR={},PR={exports:{}};/**
 * event-lite.js - Light-weight EventEmitter (less than 1KB when gzipped)
 *
 * @copyright Yusuke Kawasaki
 * @license MIT
 * @constructor
 * @see https://github.com/kawanet/event-lite
 * @see http://kawanet.github.io/event-lite/EventLite.html
 * @example
 * var EventLite = require("event-lite");
 *
 * function MyClass() {...}             // your class
 *
 * EventLite.mixin(MyClass.prototype);  // import event methods
 *
 * var obj = new MyClass();
 * obj.on("foo", function() {...});     // add event listener
 * obj.once("bar", function() {...});   // add one-time event listener
 * obj.emit("foo");                     // dispatch event
 * obj.emit("bar");                     // dispatch another event
 * obj.off("foo");                      // remove event listener
 */var NV;function ase(){return NV||(NV=1,(function(t){function e(){if(!(this instanceof e))return new e}(function(n){t.exports=n;var r="listeners",i={on:o,once:a,off:l,emit:c};s(n.prototype),n.mixin=s;function s(f){for(var m in i)f[m]=i[m];return f}function o(f,m){return u(this,f).push(m),this}function a(f,m){var g=this;return x.originalListener=m,u(g,f).push(x),g;function x(){l.call(g,f,x),m.apply(this,arguments)}}function l(f,m){var g=this,x;if(!arguments.length)delete g[r];else if(m){if(x=u(g,f,!0),x){if(x=x.filter(v),!x.length)return l.call(g,f);g[r][f]=x}}else if(x=g[r],x&&(delete x[f],!Object.keys(x).length))return l.call(g);return g;function v(w){return w!==m&&w.originalListener!==m}}function c(f,m){var g=this,x=u(g,f,!0);if(!x)return!1;var v=arguments.length;if(v===1)x.forEach(E);else if(v===2)x.forEach(C);else{var w=Array.prototype.slice.call(arguments,1);x.forEach(k)}return!!x.length;function E(O){O.call(g)}function C(O){O.call(g,m)}function k(O){O.apply(g,w)}}function u(f,m,g){if(!(g&&!f[r])){var x=f[r]||(f[r]={});return x[m]||(x[m]=[])}}})(e)})(PR)),PR.exports}var _V;function jIe(){if(_V)return IR;_V=1,IR.Encoder=n;var t=ase(),e=nse().EncodeBuffer;function n(r){if(!(this instanceof n))return new n(r);e.call(this,r)}return n.prototype=new e,t.mixin(n.prototype),n.prototype.encode=function(r){this.write(r),this.emit("data",this.read())},n.prototype.end=function(r){arguments.length&&this.encode(r),this.flush(),this.emit("end")},IR}var RR={},IV;function UIe(){if(IV)return RR;IV=1,RR.Decoder=n;var t=ase(),e=sse().DecodeBuffer;function n(r){if(!(this instanceof n))return new n(r);e.call(this,r)}return n.prototype=new e,t.mixin(n.prototype),n.prototype.decode=function(r){arguments.length&&this.write(r),this.flush()},n.prototype.push=function(r){this.emit("data",r)},n.prototype.end=function(r){this.decode(r),this.emit("end")},RR}var OR={},PV;function FIe(){return PV||(PV=1,N8(),C8(),OR.createCodec=c2().createCodec),OR}var MR={},RV;function $Ie(){return RV||(RV=1,N8(),C8(),MR.codec={preset:c2().preset}),MR}var OV;function zIe(){return OV||(OV=1,lf.encode=rse().encode,lf.decode=ose().decode,lf.Encoder=jIe().Encoder,lf.Decoder=UIe().Decoder,lf.createCodec=FIe().createCodec,lf.codec=$Ie().codec),lf}var HIe=zIe();const VIe=cs(HIe),lse="https://api.hyperliquid-testnet.xyz",qIe=`${lse}/exchange`,Hl=`${lse}/info`,GIe=!1,MV=1200,DR=60*1e3,DV=100,LR=3,LV=2e3,BV={l2Book:2,allMids:2,clearinghouseState:2,orderStatus:2,spotClearinghouseState:2,exchangeStatus:2,meta:20,metaAndAssetCtxs:20,candleSnapshot:20,userFills:20,openOrders:20,userRole:60,default:20};class KIe{constructor(){this.weightHistory=[],this.requestQueue=Promise.resolve(),this.lastRequestTime=0,this.cache=new Map,this.CACHE_TTL_MS=5e3,this.PRICE_CACHE_TTL_MS=2e3,this.CANDLE_CACHE_TTL_MS=1e4,this.ASSET_CONTEXT_CACHE_TTL_MS=3e4,this.dealerLockActive=!1,this.dealerLockResolver=null,this.waitingForDealerUnlock=Promise.resolve(),this.sharedDataCache=new Map,this.SHARED_CACHE_TTL_MS=15e3,this.universeCache=[],this.lastCacheUpdate=0}acquireDealerLock(){this.dealerLockActive||(this.dealerLockActive=!0,this.waitingForDealerUnlock=new Promise(e=>{this.dealerLockResolver=e}),console.log("[Hyperliquid]  Dealer lock ACQUIRED - other requests will be skipped"))}releaseDealerLock(){this.dealerLockActive&&(this.dealerLockActive=!1,this.dealerLockResolver&&(this.dealerLockResolver(),this.dealerLockResolver=null),this.waitingForDealerUnlock=Promise.resolve(),console.log("[Hyperliquid]  Dealer lock RELEASED - other requests can proceed"))}isDealerActive(){return this.dealerLockActive}getCurrentWeight(){const n=Date.now()-DR;return this.weightHistory=this.weightHistory.filter(r=>r.timestamp>n),this.weightHistory.reduce((r,i)=>r+i.weight,0)}recordWeight(e){this.weightHistory.push({timestamp:Date.now(),weight:e})}calculateWeight(e,n){const r=BV[e]||BV.default;return e==="candleSnapshot"&&n?r+Math.ceil(n/60):r}async waitForBudget(e){const n=this.getCurrentWeight(),r=MV-n;if(e<=r)return;const i=Date.now(),s=i-DR,o=[...this.weightHistory].sort((u,f)=>u.timestamp-f.timestamp);let a=e-r,l=i;for(const u of o)if(!(u.timestamp<=s)&&(a-=u.weight,l=u.timestamp+DR,a<=0))break;const c=Math.max(0,l-i);c>0&&(console.log(`[Hyperliquid] Rate budget: ${n}/${MV} used, waiting ${(c/1e3).toFixed(1)}s for budget...`),await new Promise(u=>setTimeout(u,c+100)))}async throttledFetch(e,n,r,i,s="default",o){if(r){const c=this.cache.get(r);if(c&&Date.now()-c.timestamp<(i||this.CACHE_TTL_MS))return new Response(JSON.stringify(c.data),{status:200,headers:{"Content-Type":"application/json"}})}const a=this.calculateWeight(s,o);this.requestQueue=this.requestQueue.then(async()=>{await this.waitForBudget(a);const u=Date.now()-this.lastRequestTime;u<DV&&await new Promise(f=>setTimeout(f,DV-u)),this.lastRequestTime=Date.now()}),await this.requestQueue,this.recordWeight(a);let l=null;for(let c=0;c<LR;c++)try{const u=await fetch(e,n);if(u.status===429){const f=parseInt(u.headers.get("Retry-After")||"2",10),m=Math.max(f*1e3,LV*Math.pow(2,c));console.warn(`[Hyperliquid] Rate limited (429), waiting ${m}ms before retry ${c+1}/${LR}`),await new Promise(g=>setTimeout(g,m));continue}if(u.ok&&r){const f=u.clone();try{const m=await f.json();this.cache.set(r,{data:m,timestamp:Date.now()})}catch{}}return u}catch(u){if(l=u,c<LR-1){const f=LV*Math.pow(2,c);await new Promise(m=>setTimeout(m,f))}}throw l||new Error("Request failed after retries")}async checkHealth(){try{return await this.getMetadata(),!0}catch(e){return console.error("Hyperliquid Health Check Failed:",e),!1}}createVaultWallet(){const e=Wf.createRandom();return new Wf(e.privateKey)}getWalletFromPrivateKey(e){return new Wf(e)}async getMarketData(e){try{const n=await this.throttledFetch(Hl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"l2Book",coin:e})},`marketData:${e}`,this.PRICE_CACHE_TTL_MS,"l2Book");if(!n.ok)throw new Error(`Failed to fetch market data: ${n.statusText}`);return await n.json()}catch(n){throw console.error("Hyperliquid Market Data Error:",n),n}}async getOrderBookMetrics(e){var n,r,i,s,o,a,l,c;try{const u=await this.getMarketData(e),f=((n=u.levels)==null?void 0:n[0])||[],m=((r=u.levels)==null?void 0:r[1])||[];if(f.length===0||m.length===0)throw new Error(`No order book data for ${e}`);const g=parseFloat(((i=f[0])==null?void 0:i.px)||"0"),x=parseFloat(((s=m[0])==null?void 0:s.px)||"0"),v=(g+x)/2,w=x-g,E=v>0?w/v*100:0,C=5;let k=0,O=0,j=0,R=0;const U=[],V=[];for(let I=0;I<f.length;I++){const M=parseFloat(((o=f[I])==null?void 0:o.px)||"0"),z=parseFloat(((a=f[I])==null?void 0:a.sz)||"0"),G=M*z;I<C&&(k+=G),j+=G,U.push({price:M,volume:G})}for(let I=0;I<m.length;I++){const M=parseFloat(((l=m[I])==null?void 0:l.px)||"0"),z=parseFloat(((c=m[I])==null?void 0:c.sz)||"0"),G=M*z;I<C&&(O+=G),R+=G,V.push({price:M,volume:G})}const F=R>0?j/R:1,$=.2,K=.2;let H,B;for(const{price:I,volume:M}of U)if(j>0&&M/j>$){H=I;break}for(const{price:I,volume:M}of V)if(R>0&&M/R>K){B=I;break}const A={bidAskSpread:parseFloat(E.toFixed(4)),bidAskSpreadUSDC:parseFloat(w.toFixed(4)),imbalanceRatio:parseFloat(F.toFixed(3)),nearBidDepth:parseFloat(k.toFixed(2)),nearAskDepth:parseFloat(O.toFixed(2)),totalBidDepth:parseFloat(j.toFixed(2)),totalAskDepth:parseFloat(R.toFixed(2)),bidWallPrice:H,askWallPrice:B,midPrice:parseFloat(v.toFixed(6)),bestBid:parseFloat(g.toFixed(6)),bestAsk:parseFloat(x.toFixed(6))};return console.log(`[Hyperliquid] OrderBook ${e}: Spread=${A.bidAskSpread}%, Imbalance=${A.imbalanceRatio}, NearDepth(B/A)=${A.nearBidDepth}/${A.nearAskDepth}`),A}catch(u){return console.error(`Hyperliquid OrderBook Metrics Error for ${e}:`,u),{bidAskSpread:0,bidAskSpreadUSDC:0,imbalanceRatio:1,nearBidDepth:0,nearAskDepth:0,totalBidDepth:0,totalAskDepth:0,midPrice:0,bestBid:0,bestAsk:0}}}async getUserState(e){try{const n=await this.throttledFetch(Hl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"clearinghouseState",user:e})},`userState:${e}`,this.CACHE_TTL_MS,"clearinghouseState");if(!n.ok)throw new Error(`Failed to fetch user state: ${n.statusText}`);return await n.json()}catch(n){throw console.error("Hyperliquid User State Error:",n),n}}async getOpenOrders(e){try{const n=await this.throttledFetch(Hl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"openOrders",user:e})},`openOrders:${e}`,this.CACHE_TTL_MS,"openOrders");if(!n.ok)throw new Error(`Failed to fetch open orders: ${n.statusText}`);return await n.json()}catch(n){throw console.error("Hyperliquid Open Orders Error:",n),n}}async getUserFills(e,n=20){try{const r=await this.throttledFetch(Hl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"userFills",user:e})},`userFills:${e}`,this.CACHE_TTL_MS,"userFills");if(!r.ok)throw new Error(`Failed to fetch user fills: ${r.statusText}`);const i=await r.json();return Array.isArray(i)?i.slice(0,n):[]}catch(r){return console.error("Hyperliquid User Fills Error:",r),[]}}async getCandles(e,n="1h",r=100){try{const i=Date.now(),s=this.intervalToMs(n),o=i-s*r,a=await this.throttledFetch(Hl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"candleSnapshot",req:{coin:e,interval:n,startTime:o}})},`candles:${e}:${n}:${r}`,this.CANDLE_CACHE_TTL_MS,"candleSnapshot",r);if(!a.ok)throw new Error(`Failed to fetch candles: ${a.statusText}`);const l=await a.json();return Array.isArray(l)?l.map(c=>({time:c.t||c.time,open:parseFloat(c.o||c.open),high:parseFloat(c.h||c.high),low:parseFloat(c.l||c.low),close:parseFloat(c.c||c.close),volume:parseFloat(c.v||c.volume||"0")})):l.t&&Array.isArray(l.t)?l.t.map((c,u)=>{var f;return{time:c,open:parseFloat(l.o[u]),high:parseFloat(l.h[u]),low:parseFloat(l.l[u]),close:parseFloat(l.c[u]),volume:parseFloat(((f=l.v)==null?void 0:f[u])||"0")}}):[]}catch(i){return console.error("Hyperliquid Candles Error:",i),[]}}async getCurrentPrice(e){var n,r;try{const i=await this.getMarketData(e),s=parseFloat(((n=i.levels[0][0])==null?void 0:n.px)||"0"),o=parseFloat(((r=i.levels[1][0])==null?void 0:r.px)||"0");return(s+o)/2}catch(i){throw console.error(`Hyperliquid Price Error for ${e}:`,i),i}}intervalToMs(e){return{"1m":6e4,"5m":3e5,"15m":9e5,"1h":36e5,"4h":144e5,"1d":864e5,"1D":864e5}[e]||3600*1e3}async getMetadata(){try{const e=await this.throttledFetch(Hl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"meta"})},"metadata",6e4,"meta");if(!e.ok)throw new Error(`Failed to fetch metadata: ${e.statusText}`);return await e.json()}catch(e){throw console.error("Hyperliquid Metadata Error:",e),e}}async getAllAvailableAssets(){try{return(await this.getMetadata()).universe.filter(n=>!n.isDelisted).map(n=>n.name)}catch(e){throw console.error("Hyperliquid Get Available Assets Error:",e),e}}async isValidAsset(e){try{return(await this.getAllAvailableAssets()).some(r=>r.toLowerCase()===e.toLowerCase())}catch(n){return console.error("Hyperliquid Asset Validation Error:",n),!0}}async signL1Action(e,n,r,i,s){const o=this.actionHash(n,r,i,s),a=this.constructPhantomAgent(o,GIe),l={name:"Exchange",version:"1",chainId:1337,verifyingContract:"0x0000000000000000000000000000000000000000"},c={Agent:[{name:"source",type:"string"},{name:"connectionId",type:"bytes32"}]},u=await e.signTypedData(l,c,a),f=qs.from(u);return console.log("[Hyperliquid]  Signing Action:"),console.log("  - Domain:",JSON.stringify(l)),console.log("  - Types:",JSON.stringify(c)),console.log("  - Phantom Agent:",JSON.stringify(a)),console.log("  - Signature:",u),{r:f.r,s:f.s,v:f.v}}actionHash(e,n,r,i){let s=VIe.encode(e);const o=ln.alloc(8);if(o.writeBigUInt64BE(BigInt(r),0),s=ln.concat([s,o]),n===null)s=ln.concat([s,ln.from([0])]);else{s=ln.concat([s,ln.from([1])]);const a=ln.from(n.replace("0x",""),"hex");s=ln.concat([s,a])}if(i!==void 0){s=ln.concat([s,ln.from([0])]);const a=ln.alloc(8);a.writeBigUInt64BE(BigInt(i),0),s=ln.concat([s,a])}return Kn(s)}constructPhantomAgent(e,n){return{source:n?"a":"b",connectionId:e}}floatToWire(e){return e===0?"0":e.toFixed(8).replace(/\.?0+$/,"")}async postAction(e,n,r){var l,c;const i=await this.signL1Action(n,e,null,r),s={action:e,nonce:r,signature:i,vaultAddress:null};console.log("[Hyperliquid]  Sending action:",JSON.stringify({action:e,nonce:r},null,2)),console.log("[Hyperliquid]  Payload:",JSON.stringify(s,null,2));const o=await fetch(qIe,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!o.ok){let u=`HTTP ${o.status}: ${o.statusText}`;try{const f=await o.text();console.error("[Hyperliquid] Error response:",f);try{const m=JSON.parse(f);u=`Exchange API Error (${o.status}): ${JSON.stringify(m)}`}catch{u=`Exchange API Error (${o.status}): ${f}`}}catch(f){console.error("[Hyperliquid] Failed to read error response:",f)}throw new Error(u)}const a=await o.json();if(console.log("[Hyperliquid]  Raw Response:",JSON.stringify(a,null,2)),a.status!=="ok")throw new Error(`Exchange API Error: ${JSON.stringify(a.response||a)}`);if((c=(l=a.response)==null?void 0:l.data)!=null&&c.statuses){const f=a.response.data.statuses.find(m=>m.error);if(f)throw new Error(`Order Failed: ${f.error}`)}return a}async placeOrder(e,n,r,i,s,o){const a=Date.now(),l=await this.getAssetIndex(n),c=(o==null?void 0:o.orderType)||"limit",u=(o==null?void 0:o.reduceOnly)||!1;let f;c==="market"?f={market:{}}:f={limit:{tif:(o==null?void 0:o.tif)||(c==="ioc"?"Ioc":c==="alo"?"Alo":"Gtc")}};let m="0";if(s){const w=await this.getAssetDecimals(n),E=Math.max(0,6-w);let C=parseFloat(s.toFixed(E));C=parseFloat(C.toPrecision(5)),C=parseFloat(C.toFixed(E)),m=this.floatToWire(C),console.log(`[Hyperliquid] Price rounding: ${s} -> ${m} (maxDecimals=${E}, szDecimals=${w})`)}const g={a:l,b:r,p:m,s:this.floatToWire(i),r:u,t:f};o!=null&&o.cloid&&(g.c=o.cloid);const x={type:"order",orders:[g],grouping:"na"},v=await this.postAction(x,e,a);return(o!=null&&o.stopLoss||o!=null&&o.takeProfit)&&await this.placeTpSlOrders(e,n,r,i,o.stopLoss,o.takeProfit,o.cloid),v}async placeTpSlOrders(e,n,r,i,s,o,a){const l=await this.getAssetIndex(n),u=6-await this.getAssetDecimals(n),f=x=>{let v=parseFloat(x.toFixed(u));return v=parseFloat(v.toPrecision(5)),v=parseFloat(v.toFixed(u)),this.floatToWire(v)},m=()=>{const x=new Uint8Array(16);return crypto.getRandomValues(x),"0x"+Array.from(x,v=>v.toString(16).padStart(2,"0")).join("")},g=[];if(s){const x=f(s),v=m();console.log(`[HL TP/SL] SL Price: ${s} -> Rounded: ${x}, cloid: ${v}`),g.push({a:l,b:!r,p:x,s:this.floatToWire(i),r:!0,t:{trigger:{isMarket:!0,triggerPx:x,tpsl:"sl"}},c:v})}if(o){const x=f(o),v=m();console.log(`[HL TP/SL] TP Price: ${o} -> Rounded: ${x}, cloid: ${v}`),g.push({a:l,b:!r,p:x,s:this.floatToWire(i),r:!0,t:{trigger:{isMarket:!0,triggerPx:x,tpsl:"tp"}},c:v})}if(g.length>0){const x=Date.now(),v={type:"order",orders:g,grouping:"positionTpsl"};await this.postAction(v,e,x)}}async cancelOrder(e,n,r){const i=Date.now(),s={type:"cancel",cancels:[{a:await this.getAssetIndex(n),o:r}]};return await this.postAction(s,e,i)}async updateLeverage(e,n,r,i){const s=Date.now(),o={type:"updateLeverage",asset:await this.getAssetIndex(n),isCross:i,leverage:r};return await this.postAction(o,e,s)}async updateIsolatedMargin(e,n,r,i){const s=Date.now(),o=Math.floor(i*1e6),a={type:"updateIsolatedMargin",asset:await this.getAssetIndex(n),isBuy:r,ntli:o};return console.log(`[Hyperliquid] Updating Isolated Margin: ${i} USDC -> ntli: ${o} for ${n} (isBuy: ${r})`),await this.postAction(a,e,s)}async closePosition(e,n,r,i="market",s){const a=(await this.getUserState(e.address)).assetPositions.find(g=>g.position.coin===n);if(!a||parseFloat(a.position.szi)===0)throw new Error(`No open position for ${n}`);const l=parseFloat(a.position.szi),c=l<0,u=r||Math.abs(l);let f=i,m=s;if(i==="market"){const g=await this.getMarketData(n),x=parseFloat(g.levels[0][0].px),v=parseFloat(g.levels[1][0].px),w=c?v:x,E=.01;let C=c?w*(1+E):w*(1-E);const O=6-await this.getAssetDecimals(n);let j=parseFloat(C.toFixed(O));j=parseFloat(j.toPrecision(5)),m=parseFloat(j.toFixed(O)),f="ioc",console.log(`[HL Close] Market Close -> Base: ${w}, Price: ${m} `)}return await this.placeOrder(e,n,c,u,m,{orderType:f==="market"?"ioc":f,reduceOnly:!0})}async withdrawUSDC(e,n,r){if(r<=1)throw new Error("Withdrawal amount must be greater than $1 to cover the withdrawal fee");const i=Date.now(),s={type:"usdSend",hyperliquidChain:"Testnet",signatureChainId:"0xa4b1",destination:n,amount:this.floatToWire(r),time:i};return await this.postAction(s,e,i)}async getAssetIndex(e){await this.updateUniverseCache();const n=this.universeCache.find(r=>r.name===e);if(!n)throw new Error(`Asset ${e} not found`);return this.universeCache.indexOf(n)}async getAssetDecimals(e){await this.updateUniverseCache();const n=this.universeCache.find(r=>r.name===e);if(!n)throw new Error(`Asset ${e} not found`);return n.szDecimals}async updateUniverseCache(){const e=Date.now();if(this.universeCache.length>0&&e-this.lastCacheUpdate<300*1e3)return;const r=await(await this.throttledFetch(Hl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"meta"})},"universeCache",300*1e3)).json();this.universeCache=r.universe,this.lastCacheUpdate=e}async getAssetContexts(){try{const e=await this.throttledFetch(Hl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"metaAndAssetCtxs"})},"assetContexts",this.ASSET_CONTEXT_CACHE_TTL_MS,"metaAndAssetCtxs");if(!e.ok)throw new Error(`Failed to fetch asset contexts: ${e.statusText}`);const n=await e.json();return Array.isArray(n)&&n.length>1?n[1]:[]}catch(e){return console.error("Hyperliquid Asset Contexts Error:",e),[]}}async getFundingRate(e){try{const n=await this.getAssetContexts();await this.updateUniverseCache();const r=this.universeCache.findIndex(s=>s.name===e);if(r===-1)return null;const i=n[r];return i?{funding:parseFloat(i.funding||"0"),premium:parseFloat(i.premium||"0"),nextFunding:parseFloat(i.funding||"0")}:null}catch(n){return console.error(`Hyperliquid Funding Rate Error for ${e}:`,n),null}}async getUserFees(e){try{const n=await fetch(Hl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"userFees",user:e})});if(!n.ok)throw new Error(`Failed to fetch user fees: ${n.statusText}`);const r=await n.json();return{makerFee:parseFloat((r==null?void 0:r.userCrossRate)||(r==null?void 0:r.userAddRate)||"0.0002"),takerFee:parseFloat((r==null?void 0:r.userCrossRate)||(r==null?void 0:r.userRemoveRate)||"0.0005"),dailyVolume:parseFloat((r==null?void 0:r.dailyUserVlm)||"0"),feeSchedule:(r==null?void 0:r.feeSchedule)||null}}catch(n){return console.error("Hyperliquid User Fees Error:",n),{makerFee:2e-4,takerFee:5e-4,dailyVolume:0,feeSchedule:null}}}async getUserFundingHistory(e,n,r){try{const i=Date.now(),s={type:"userFunding",user:e,startTime:n||i-1440*60*1e3};r&&(s.endTime=r);const o=await fetch(Hl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!o.ok)throw new Error(`Failed to fetch funding history: ${o.statusText}`);return await o.json()}catch(i){return console.error("Hyperliquid Funding History Error:",i),[]}}calculateBreakevenPrice(e,n,r,i=2e-4,s=5e-4,o=0,a=8){const l=s,c=s,u=a/8,f=Math.abs(o)*u,m=l+c+f,g=e*m,x=r?e+g:e-g,v=.01,w=r?x*(1+v):x*(1-v);return{breakevenPrice:x,minProfitPrice:w,totalCostPercent:m,costBreakdown:{entryFeePercent:l,exitFeePercent:c,fundingCostPercent:f}}}async getUserStateShared(e){const n=`shared:userState:${e}`,r=this.sharedDataCache.get(n);if(r&&Date.now()-r.timestamp<this.SHARED_CACHE_TTL_MS)return console.log("[Hyperliquid]  Using shared cache for userState"),r.data;const i=await this.getUserState(e);return this.sharedDataCache.set(n,{data:i,timestamp:Date.now()}),i}async getUserFillsShared(e,n=20){const r=`shared:userFills:${e}`,i=this.sharedDataCache.get(r);if(i&&Date.now()-i.timestamp<this.SHARED_CACHE_TTL_MS)return console.log("[Hyperliquid]  Using shared cache for userFills"),i.data;const s=await this.getUserFills(e,n);return this.sharedDataCache.set(r,{data:s,timestamp:Date.now()}),s}clearSharedCache(){this.sharedDataCache.clear(),console.log("[Hyperliquid]  Shared cache cleared")}}const $t=new KIe;function mn(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function jV(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Rx(...t){return e=>{let n=!1;const r=t.map(i=>{const s=jV(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():jV(t[i],null)}}}}function Nr(...t){return T.useCallback(Rx(...t),t)}function WIe(t,e){const n=T.createContext(e),r=s=>{const{children:o,...a}=s,l=T.useMemo(()=>a,Object.values(a));return h.jsx(n.Provider,{value:l,children:o})};r.displayName=t+"Provider";function i(s){const o=T.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${t}\``)}return[r,i]}function Im(t,e=[]){let n=[];function r(s,o){const a=T.createContext(o),l=n.length;n=[...n,o];const c=f=>{var E;const{scope:m,children:g,...x}=f,v=((E=m==null?void 0:m[t])==null?void 0:E[l])||a,w=T.useMemo(()=>x,Object.values(x));return h.jsx(v.Provider,{value:w,children:g})};c.displayName=s+"Provider";function u(f,m){var v;const g=((v=m==null?void 0:m[t])==null?void 0:v[l])||a,x=T.useContext(g);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${s}\``)}return[c,u]}const i=()=>{const s=n.map(o=>T.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return T.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[r,YIe(i,...e)]}function YIe(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const f=l(s)[`__scope${c}`];return{...a,...f}},{});return T.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var Pm=QZ();const JIe=cs(Pm);function XIe(t){const e=QIe(t),n=T.forwardRef((r,i)=>{const{children:s,...o}=r,a=T.Children.toArray(s),l=a.find(ePe);if(l){const c=l.props.children,u=a.map(f=>f===l?T.Children.count(c)>1?T.Children.only(null):T.isValidElement(c)?c.props.children:null:f);return h.jsx(e,{...o,ref:i,children:T.isValidElement(c)?T.cloneElement(c,void 0,u):null})}return h.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}function QIe(t){const e=T.forwardRef((n,r)=>{const{children:i,...s}=n;if(T.isValidElement(i)){const o=nPe(i),a=tPe(s,i.props);return i.type!==T.Fragment&&(a.ref=r?Rx(r,o):o),T.cloneElement(i,a)}return T.Children.count(i)>1?T.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var ZIe=Symbol("radix.slottable");function ePe(t){return T.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===ZIe}function tPe(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const l=s(...a);return i(...a),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function nPe(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var rPe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Mn=rPe.reduce((t,e)=>{const n=XIe(`Primitive.${e}`),r=T.forwardRef((i,s)=>{const{asChild:o,...a}=i,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(l,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function iPe(t,e){t&&Pm.flushSync(()=>t.dispatchEvent(e))}function th(t){const e=T.useRef(t);return T.useEffect(()=>{e.current=t}),T.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function sPe(t,e=globalThis==null?void 0:globalThis.document){const n=th(t);T.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var oPe="DismissableLayer",sM="dismissableLayer.update",aPe="dismissableLayer.pointerDownOutside",lPe="dismissableLayer.focusOutside",UV,cse=T.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),u2=T.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=t,c=T.useContext(cse),[u,f]=T.useState(null),m=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=T.useState({}),x=Nr(e,U=>f(U)),v=Array.from(c.layers),[w]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),E=v.indexOf(w),C=u?v.indexOf(u):-1,k=c.layersWithOutsidePointerEventsDisabled.size>0,O=C>=E,j=dPe(U=>{const V=U.target,F=[...c.branches].some($=>$.contains(V));!O||F||(i==null||i(U),o==null||o(U),U.defaultPrevented||a==null||a())},m),R=fPe(U=>{const V=U.target;[...c.branches].some($=>$.contains(V))||(s==null||s(U),o==null||o(U),U.defaultPrevented||a==null||a())},m);return sPe(U=>{C===c.layers.size-1&&(r==null||r(U),!U.defaultPrevented&&a&&(U.preventDefault(),a()))},m),T.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(UV=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),FV(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=UV)}},[u,m,n,c]),T.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),FV())},[u,c]),T.useEffect(()=>{const U=()=>g({});return document.addEventListener(sM,U),()=>document.removeEventListener(sM,U)},[]),h.jsx(Mn.div,{...l,ref:x,style:{pointerEvents:k?O?"auto":"none":void 0,...t.style},onFocusCapture:mn(t.onFocusCapture,R.onFocusCapture),onBlurCapture:mn(t.onBlurCapture,R.onBlurCapture),onPointerDownCapture:mn(t.onPointerDownCapture,j.onPointerDownCapture)})});u2.displayName=oPe;var cPe="DismissableLayerBranch",uPe=T.forwardRef((t,e)=>{const n=T.useContext(cse),r=T.useRef(null),i=Nr(e,r);return T.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),h.jsx(Mn.div,{...t,ref:i})});uPe.displayName=cPe;function dPe(t,e=globalThis==null?void 0:globalThis.document){const n=th(t),r=T.useRef(!1),i=T.useRef(()=>{});return T.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){use(aPe,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function fPe(t,e=globalThis==null?void 0:globalThis.document){const n=th(t),r=T.useRef(!1);return T.useEffect(()=>{const i=s=>{s.target&&!r.current&&use(lPe,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function FV(){const t=new CustomEvent(sM);document.dispatchEvent(t)}function use(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?iPe(i,s):i.dispatchEvent(s)}var Is=globalThis!=null&&globalThis.document?T.useLayoutEffect:()=>{},hPe=LC[" useId ".trim().toString()]||(()=>{}),pPe=0;function Yf(t){const[e,n]=T.useState(hPe());return Is(()=>{n(r=>r??String(pPe++))},[t]),e?`radix-${e}`:""}const mPe=["top","right","bottom","left"],nh=Math.min,$o=Math.max,YT=Math.round,WS=Math.floor,Ac=t=>({x:t,y:t}),gPe={left:"right",right:"left",bottom:"top",top:"bottom"},yPe={start:"end",end:"start"};function oM(t,e,n){return $o(t,nh(e,n))}function ld(t,e){return typeof t=="function"?t(e):t}function cd(t){return t.split("-")[0]}function Ox(t){return t.split("-")[1]}function _8(t){return t==="x"?"y":"x"}function I8(t){return t==="y"?"height":"width"}const xPe=new Set(["top","bottom"]);function gc(t){return xPe.has(cd(t))?"y":"x"}function P8(t){return _8(gc(t))}function vPe(t,e,n){n===void 0&&(n=!1);const r=Ox(t),i=P8(t),s=I8(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=JT(o)),[o,JT(o)]}function bPe(t){const e=JT(t);return[aM(t),e,aM(e)]}function aM(t){return t.replace(/start|end/g,e=>yPe[e])}const $V=["left","right"],zV=["right","left"],wPe=["top","bottom"],EPe=["bottom","top"];function SPe(t,e,n){switch(t){case"top":case"bottom":return n?e?zV:$V:e?$V:zV;case"left":case"right":return e?wPe:EPe;default:return[]}}function APe(t,e,n,r){const i=Ox(t);let s=SPe(cd(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(aM)))),s}function JT(t){return t.replace(/left|right|bottom|top/g,e=>gPe[e])}function TPe(t){return{top:0,right:0,bottom:0,left:0,...t}}function dse(t){return typeof t!="number"?TPe(t):{top:t,right:t,bottom:t,left:t}}function XT(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function HV(t,e,n){let{reference:r,floating:i}=t;const s=gc(e),o=P8(e),a=I8(o),l=cd(e),c=s==="y",u=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,m=r[a]/2-i[a]/2;let g;switch(l){case"top":g={x:u,y:r.y-i.height};break;case"bottom":g={x:u,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:f};break;case"left":g={x:r.x-i.width,y:f};break;default:g={x:r.x,y:r.y}}switch(Ox(e)){case"start":g[o]-=m*(n&&c?-1:1);break;case"end":g[o]+=m*(n&&c?-1:1);break}return g}const kPe=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:f}=HV(c,r,l),m=r,g={},x=0;for(let v=0;v<a.length;v++){const{name:w,fn:E}=a[v],{x:C,y:k,data:O,reset:j}=await E({x:u,y:f,initialPlacement:r,placement:m,strategy:i,middlewareData:g,rects:c,platform:o,elements:{reference:t,floating:e}});u=C??u,f=k??f,g={...g,[w]:{...g[w],...O}},j&&x<=50&&(x++,typeof j=="object"&&(j.placement&&(m=j.placement),j.rects&&(c=j.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):j.rects),{x:u,y:f}=HV(c,m,l)),v=-1)}return{x:u,y:f,placement:m,strategy:i,middlewareData:g}};async function Ew(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:m=!1,padding:g=0}=ld(e,t),x=dse(g),w=a[m?f==="floating"?"reference":"floating":f],E=XT(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(w)))==null||n?w:w.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),C=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,k=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),O=await(s.isElement==null?void 0:s.isElement(k))?await(s.getScale==null?void 0:s.getScale(k))||{x:1,y:1}:{x:1,y:1},j=XT(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:C,offsetParent:k,strategy:l}):C);return{top:(E.top-j.top+x.top)/O.y,bottom:(j.bottom-E.bottom+x.bottom)/O.y,left:(E.left-j.left+x.left)/O.x,right:(j.right-E.right+x.right)/O.x}}const CPe=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=ld(t,e)||{};if(c==null)return{};const f=dse(u),m={x:n,y:r},g=P8(i),x=I8(g),v=await o.getDimensions(c),w=g==="y",E=w?"top":"left",C=w?"bottom":"right",k=w?"clientHeight":"clientWidth",O=s.reference[x]+s.reference[g]-m[g]-s.floating[x],j=m[g]-s.reference[g],R=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let U=R?R[k]:0;(!U||!await(o.isElement==null?void 0:o.isElement(R)))&&(U=a.floating[k]||s.floating[x]);const V=O/2-j/2,F=U/2-v[x]/2-1,$=nh(f[E],F),K=nh(f[C],F),H=$,B=U-v[x]-K,A=U/2-v[x]/2+V,I=oM(H,A,B),M=!l.arrow&&Ox(i)!=null&&A!==I&&s.reference[x]/2-(A<H?$:K)-v[x]/2<0,z=M?A<H?A-H:A-B:0;return{[g]:m[g]+z,data:{[g]:I,centerOffset:A-I-z,...M&&{alignmentOffset:z}},reset:M}}}),NPe=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:v=!0,...w}=ld(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const E=cd(i),C=gc(a),k=cd(a)===a,O=await(l.isRTL==null?void 0:l.isRTL(c.floating)),j=m||(k||!v?[JT(a)]:bPe(a)),R=x!=="none";!m&&R&&j.push(...APe(a,v,x,O));const U=[a,...j],V=await Ew(e,w),F=[];let $=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&F.push(V[E]),f){const A=vPe(i,o,O);F.push(V[A[0]],V[A[1]])}if($=[...$,{placement:i,overflows:F}],!F.every(A=>A<=0)){var K,H;const A=(((K=s.flip)==null?void 0:K.index)||0)+1,I=U[A];if(I&&(!(f==="alignment"?C!==gc(I):!1)||$.every(G=>gc(G.placement)===C?G.overflows[0]>0:!0)))return{data:{index:A,overflows:$},reset:{placement:I}};let M=(H=$.filter(z=>z.overflows[0]<=0).sort((z,G)=>z.overflows[1]-G.overflows[1])[0])==null?void 0:H.placement;if(!M)switch(g){case"bestFit":{var B;const z=(B=$.filter(G=>{if(R){const te=gc(G.placement);return te===C||te==="y"}return!0}).map(G=>[G.placement,G.overflows.filter(te=>te>0).reduce((te,Y)=>te+Y,0)]).sort((G,te)=>G[1]-te[1])[0])==null?void 0:B[0];z&&(M=z);break}case"initialPlacement":M=a;break}if(i!==M)return{reset:{placement:M}}}return{}}}};function VV(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function qV(t){return mPe.some(e=>t[e]>=0)}const _Pe=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=ld(t,e);switch(r){case"referenceHidden":{const s=await Ew(e,{...i,elementContext:"reference"}),o=VV(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:qV(o)}}}case"escaped":{const s=await Ew(e,{...i,altBoundary:!0}),o=VV(s,n.floating);return{data:{escapedOffsets:o,escaped:qV(o)}}}default:return{}}}}},fse=new Set(["left","top"]);async function IPe(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=cd(n),a=Ox(n),l=gc(n)==="y",c=fse.has(o)?-1:1,u=s&&l?-1:1,f=ld(e,t);let{mainAxis:m,crossAxis:g,alignmentAxis:x}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof x=="number"&&(g=a==="end"?x*-1:x),l?{x:g*u,y:m*c}:{x:m*c,y:g*u}}const PPe=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await IPe(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},RPe=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:w=>{let{x:E,y:C}=w;return{x:E,y:C}}},...l}=ld(t,e),c={x:n,y:r},u=await Ew(e,l),f=gc(cd(i)),m=_8(f);let g=c[m],x=c[f];if(s){const w=m==="y"?"top":"left",E=m==="y"?"bottom":"right",C=g+u[w],k=g-u[E];g=oM(C,g,k)}if(o){const w=f==="y"?"top":"left",E=f==="y"?"bottom":"right",C=x+u[w],k=x-u[E];x=oM(C,x,k)}const v=a.fn({...e,[m]:g,[f]:x});return{...v,data:{x:v.x-n,y:v.y-r,enabled:{[m]:s,[f]:o}}}}}},OPe=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=ld(t,e),u={x:n,y:r},f=gc(i),m=_8(f);let g=u[m],x=u[f];const v=ld(a,e),w=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(l){const k=m==="y"?"height":"width",O=s.reference[m]-s.floating[k]+w.mainAxis,j=s.reference[m]+s.reference[k]-w.mainAxis;g<O?g=O:g>j&&(g=j)}if(c){var E,C;const k=m==="y"?"width":"height",O=fse.has(cd(i)),j=s.reference[f]-s.floating[k]+(O&&((E=o.offset)==null?void 0:E[f])||0)+(O?0:w.crossAxis),R=s.reference[f]+s.reference[k]+(O?0:((C=o.offset)==null?void 0:C[f])||0)-(O?w.crossAxis:0);x<j?x=j:x>R&&(x=R)}return{[m]:g,[f]:x}}}},MPe=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...c}=ld(t,e),u=await Ew(e,c),f=cd(i),m=Ox(i),g=gc(i)==="y",{width:x,height:v}=s.floating;let w,E;f==="top"||f==="bottom"?(w=f,E=m===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(E=f,w=m==="end"?"top":"bottom");const C=v-u.top-u.bottom,k=x-u.left-u.right,O=nh(v-u[w],C),j=nh(x-u[E],k),R=!e.middlewareData.shift;let U=O,V=j;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(V=k),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(U=C),R&&!m){const $=$o(u.left,0),K=$o(u.right,0),H=$o(u.top,0),B=$o(u.bottom,0);g?V=x-2*($!==0||K!==0?$+K:$o(u.left,u.right)):U=v-2*(H!==0||B!==0?H+B:$o(u.top,u.bottom))}await l({...e,availableWidth:V,availableHeight:U});const F=await o.getDimensions(a.floating);return x!==F.width||v!==F.height?{reset:{rects:!0}}:{}}}};function d2(){return typeof window<"u"}function Mx(t){return hse(t)?(t.nodeName||"").toLowerCase():"#document"}function Ko(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Dc(t){var e;return(e=(hse(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function hse(t){return d2()?t instanceof Node||t instanceof Ko(t).Node:!1}function kl(t){return d2()?t instanceof Element||t instanceof Ko(t).Element:!1}function Nc(t){return d2()?t instanceof HTMLElement||t instanceof Ko(t).HTMLElement:!1}function GV(t){return!d2()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Ko(t).ShadowRoot}const DPe=new Set(["inline","contents"]);function N1(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=Cl(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!DPe.has(i)}const LPe=new Set(["table","td","th"]);function BPe(t){return LPe.has(Mx(t))}const jPe=[":popover-open",":modal"];function f2(t){return jPe.some(e=>{try{return t.matches(e)}catch{return!1}})}const UPe=["transform","translate","scale","rotate","perspective"],FPe=["transform","translate","scale","rotate","perspective","filter"],$Pe=["paint","layout","strict","content"];function R8(t){const e=O8(),n=kl(t)?Cl(t):t;return UPe.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||FPe.some(r=>(n.willChange||"").includes(r))||$Pe.some(r=>(n.contain||"").includes(r))}function zPe(t){let e=rh(t);for(;Nc(e)&&!sx(e);){if(R8(e))return e;if(f2(e))return null;e=rh(e)}return null}function O8(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const HPe=new Set(["html","body","#document"]);function sx(t){return HPe.has(Mx(t))}function Cl(t){return Ko(t).getComputedStyle(t)}function h2(t){return kl(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function rh(t){if(Mx(t)==="html")return t;const e=t.assignedSlot||t.parentNode||GV(t)&&t.host||Dc(t);return GV(e)?e.host:e}function pse(t){const e=rh(t);return sx(e)?t.ownerDocument?t.ownerDocument.body:t.body:Nc(e)&&N1(e)?e:pse(e)}function Sw(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=pse(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=Ko(i);if(s){const a=lM(o);return e.concat(o,o.visualViewport||[],N1(i)?i:[],a&&n?Sw(a):[])}return e.concat(i,Sw(i,[],n))}function lM(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function mse(t){const e=Cl(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Nc(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=YT(n)!==s||YT(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function M8(t){return kl(t)?t:t.contextElement}function $g(t){const e=M8(t);if(!Nc(e))return Ac(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=mse(e);let o=(s?YT(n.width):n.width)/r,a=(s?YT(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const VPe=Ac(0);function gse(t){const e=Ko(t);return!O8()||!e.visualViewport?VPe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function qPe(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Ko(t)?!1:e}function dm(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=M8(t);let o=Ac(1);e&&(r?kl(r)&&(o=$g(r)):o=$g(t));const a=qPe(s,n,r)?gse(s):Ac(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,u=i.width/o.x,f=i.height/o.y;if(s){const m=Ko(s),g=r&&kl(r)?Ko(r):r;let x=m,v=lM(x);for(;v&&r&&g!==x;){const w=$g(v),E=v.getBoundingClientRect(),C=Cl(v),k=E.left+(v.clientLeft+parseFloat(C.paddingLeft))*w.x,O=E.top+(v.clientTop+parseFloat(C.paddingTop))*w.y;l*=w.x,c*=w.y,u*=w.x,f*=w.y,l+=k,c+=O,x=Ko(v),v=lM(x)}}return XT({width:u,height:f,x:l,y:c})}function p2(t,e){const n=h2(t).scrollLeft;return e?e.left+n:dm(Dc(t)).left+n}function yse(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-p2(t,n),i=n.top+e.scrollTop;return{x:r,y:i}}function GPe(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",o=Dc(r),a=e?f2(e.floating):!1;if(r===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=Ac(1);const u=Ac(0),f=Nc(r);if((f||!f&&!s)&&((Mx(r)!=="body"||N1(o))&&(l=h2(r)),Nc(r))){const g=dm(r);c=$g(r),u.x=g.x+r.clientLeft,u.y=g.y+r.clientTop}const m=o&&!f&&!s?yse(o,l):Ac(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+m.x,y:n.y*c.y-l.scrollTop*c.y+u.y+m.y}}function KPe(t){return Array.from(t.getClientRects())}function WPe(t){const e=Dc(t),n=h2(t),r=t.ownerDocument.body,i=$o(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=$o(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+p2(t);const a=-n.scrollTop;return Cl(r).direction==="rtl"&&(o+=$o(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}const KV=25;function YPe(t,e){const n=Ko(t),r=Dc(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const u=O8();(!u||u&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}const c=p2(r);if(c<=0){const u=r.ownerDocument,f=u.body,m=getComputedStyle(f),g=u.compatMode==="CSS1Compat"&&parseFloat(m.marginLeft)+parseFloat(m.marginRight)||0,x=Math.abs(r.clientWidth-f.clientWidth-g);x<=KV&&(s-=x)}else c<=KV&&(s+=c);return{width:s,height:o,x:a,y:l}}const JPe=new Set(["absolute","fixed"]);function XPe(t,e){const n=dm(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=Nc(t)?$g(t):Ac(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=i*s.x,c=r*s.y;return{width:o,height:a,x:l,y:c}}function WV(t,e,n){let r;if(e==="viewport")r=YPe(t,n);else if(e==="document")r=WPe(Dc(t));else if(kl(e))r=XPe(e,n);else{const i=gse(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return XT(r)}function xse(t,e){const n=rh(t);return n===e||!kl(n)||sx(n)?!1:Cl(n).position==="fixed"||xse(n,e)}function QPe(t,e){const n=e.get(t);if(n)return n;let r=Sw(t,[],!1).filter(a=>kl(a)&&Mx(a)!=="body"),i=null;const s=Cl(t).position==="fixed";let o=s?rh(t):t;for(;kl(o)&&!sx(o);){const a=Cl(o),l=R8(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&JPe.has(i.position)||N1(o)&&!l&&xse(t,o))?r=r.filter(u=>u!==o):i=a,o=rh(o)}return e.set(t,r),r}function ZPe(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?f2(e)?[]:QPe(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,u)=>{const f=WV(e,u,i);return c.top=$o(f.top,c.top),c.right=nh(f.right,c.right),c.bottom=nh(f.bottom,c.bottom),c.left=$o(f.left,c.left),c},WV(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function eRe(t){const{width:e,height:n}=mse(t);return{width:e,height:n}}function tRe(t,e,n){const r=Nc(e),i=Dc(e),s=n==="fixed",o=dm(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=Ac(0);function c(){l.x=p2(i)}if(r||!r&&!s)if((Mx(e)!=="body"||N1(i))&&(a=h2(e)),r){const g=dm(e,!0,s,e);l.x=g.x+e.clientLeft,l.y=g.y+e.clientTop}else i&&c();s&&!r&&i&&c();const u=i&&!r&&!s?yse(i,a):Ac(0),f=o.left+a.scrollLeft-l.x-u.x,m=o.top+a.scrollTop-l.y-u.y;return{x:f,y:m,width:o.width,height:o.height}}function BR(t){return Cl(t).position==="static"}function YV(t,e){if(!Nc(t)||Cl(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Dc(t)===n&&(n=n.ownerDocument.body),n}function vse(t,e){const n=Ko(t);if(f2(t))return n;if(!Nc(t)){let i=rh(t);for(;i&&!sx(i);){if(kl(i)&&!BR(i))return i;i=rh(i)}return n}let r=YV(t,e);for(;r&&BPe(r)&&BR(r);)r=YV(r,e);return r&&sx(r)&&BR(r)&&!R8(r)?n:r||zPe(t)||n}const nRe=async function(t){const e=this.getOffsetParent||vse,n=this.getDimensions,r=await n(t.floating);return{reference:tRe(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function rRe(t){return Cl(t).direction==="rtl"}const iRe={convertOffsetParentRelativeRectToViewportRelativeRect:GPe,getDocumentElement:Dc,getClippingRect:ZPe,getOffsetParent:vse,getElementRects:nRe,getClientRects:KPe,getDimensions:eRe,getScale:$g,isElement:kl,isRTL:rRe};function bse(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function sRe(t,e){let n=null,r;const i=Dc(t);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=t.getBoundingClientRect(),{left:u,top:f,width:m,height:g}=c;if(a||e(),!m||!g)return;const x=WS(f),v=WS(i.clientWidth-(u+m)),w=WS(i.clientHeight-(f+g)),E=WS(u),k={rootMargin:-x+"px "+-v+"px "+-w+"px "+-E+"px",threshold:$o(0,nh(1,l))||1};let O=!0;function j(R){const U=R[0].intersectionRatio;if(U!==l){if(!O)return o();U?o(!1,U):r=setTimeout(()=>{o(!1,1e-7)},1e3)}U===1&&!bse(c,t.getBoundingClientRect())&&o(),O=!1}try{n=new IntersectionObserver(j,{...k,root:i.ownerDocument})}catch{n=new IntersectionObserver(j,k)}n.observe(t)}return o(!0),s}function oRe(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=M8(t),u=i||s?[...c?Sw(c):[],...Sw(e)]:[];u.forEach(E=>{i&&E.addEventListener("scroll",n,{passive:!0}),s&&E.addEventListener("resize",n)});const f=c&&a?sRe(c,n):null;let m=-1,g=null;o&&(g=new ResizeObserver(E=>{let[C]=E;C&&C.target===c&&g&&(g.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var k;(k=g)==null||k.observe(e)})),n()}),c&&!l&&g.observe(c),g.observe(e));let x,v=l?dm(t):null;l&&w();function w(){const E=dm(t);v&&!bse(v,E)&&n(),v=E,x=requestAnimationFrame(w)}return n(),()=>{var E;u.forEach(C=>{i&&C.removeEventListener("scroll",n),s&&C.removeEventListener("resize",n)}),f==null||f(),(E=g)==null||E.disconnect(),g=null,l&&cancelAnimationFrame(x)}}const aRe=PPe,lRe=RPe,cRe=NPe,uRe=MPe,dRe=_Pe,JV=CPe,fRe=OPe,hRe=(t,e,n)=>{const r=new Map,i={platform:iRe,...n},s={...i.platform,_c:r};return kPe(t,e,{...i,platform:s})};var pRe=typeof document<"u",mRe=function(){},aT=pRe?T.useLayoutEffect:mRe;function QT(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!QT(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!QT(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function wse(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function XV(t,e){const n=wse(t);return Math.round(e*n)/n}function jR(t){const e=T.useRef(t);return aT(()=>{e.current=t}),e}function gRe(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,f]=T.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[m,g]=T.useState(r);QT(m,r)||g(r);const[x,v]=T.useState(null),[w,E]=T.useState(null),C=T.useCallback(G=>{G!==R.current&&(R.current=G,v(G))},[]),k=T.useCallback(G=>{G!==U.current&&(U.current=G,E(G))},[]),O=s||x,j=o||w,R=T.useRef(null),U=T.useRef(null),V=T.useRef(u),F=l!=null,$=jR(l),K=jR(i),H=jR(c),B=T.useCallback(()=>{if(!R.current||!U.current)return;const G={placement:e,strategy:n,middleware:m};K.current&&(G.platform=K.current),hRe(R.current,U.current,G).then(te=>{const Y={...te,isPositioned:H.current!==!1};A.current&&!QT(V.current,Y)&&(V.current=Y,Pm.flushSync(()=>{f(Y)}))})},[m,e,n,K,H]);aT(()=>{c===!1&&V.current.isPositioned&&(V.current.isPositioned=!1,f(G=>({...G,isPositioned:!1})))},[c]);const A=T.useRef(!1);aT(()=>(A.current=!0,()=>{A.current=!1}),[]),aT(()=>{if(O&&(R.current=O),j&&(U.current=j),O&&j){if($.current)return $.current(O,j,B);B()}},[O,j,B,$,F]);const I=T.useMemo(()=>({reference:R,floating:U,setReference:C,setFloating:k}),[C,k]),M=T.useMemo(()=>({reference:O,floating:j}),[O,j]),z=T.useMemo(()=>{const G={position:n,left:0,top:0};if(!M.floating)return G;const te=XV(M.floating,u.x),Y=XV(M.floating,u.y);return a?{...G,transform:"translate("+te+"px, "+Y+"px)",...wse(M.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:te,top:Y}},[n,a,M.floating,u.x,u.y]);return T.useMemo(()=>({...u,update:B,refs:I,elements:M,floatingStyles:z}),[u,B,I,M,z])}const yRe=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?JV({element:r.current,padding:i}).fn(n):{}:r?JV({element:r,padding:i}).fn(n):{}}}},xRe=(t,e)=>({...aRe(t),options:[t,e]}),vRe=(t,e)=>({...lRe(t),options:[t,e]}),bRe=(t,e)=>({...fRe(t),options:[t,e]}),wRe=(t,e)=>({...cRe(t),options:[t,e]}),ERe=(t,e)=>({...uRe(t),options:[t,e]}),SRe=(t,e)=>({...dRe(t),options:[t,e]}),ARe=(t,e)=>({...yRe(t),options:[t,e]});var TRe="Arrow",Ese=T.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...s}=t;return h.jsx(Mn.svg,{...s,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:h.jsx("polygon",{points:"0,0 30,0 15,10"})})});Ese.displayName=TRe;var kRe=Ese;function CRe(t){const[e,n]=T.useState(void 0);return Is(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var D8="Popper",[Sse,m2]=Im(D8),[NRe,Ase]=Sse(D8),Tse=t=>{const{__scopePopper:e,children:n}=t,[r,i]=T.useState(null);return h.jsx(NRe,{scope:e,anchor:r,onAnchorChange:i,children:n})};Tse.displayName=D8;var kse="PopperAnchor",Cse=T.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,s=Ase(kse,n),o=T.useRef(null),a=Nr(e,o),l=T.useRef(null);return T.useEffect(()=>{const c=l.current;l.current=(r==null?void 0:r.current)||o.current,c!==l.current&&s.onAnchorChange(l.current)}),r?null:h.jsx(Mn.div,{...i,ref:a})});Cse.displayName=kse;var L8="PopperContent",[_Re,IRe]=Sse(L8),Nse=T.forwardRef((t,e)=>{var ae,Ee,ue,me,ce,oe;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:g="optimized",onPlaced:x,...v}=t,w=Ase(L8,n),[E,C]=T.useState(null),k=Nr(e,ke=>C(ke)),[O,j]=T.useState(null),R=CRe(O),U=(R==null?void 0:R.width)??0,V=(R==null?void 0:R.height)??0,F=r+(s!=="center"?"-"+s:""),$=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},K=Array.isArray(c)?c:[c],H=K.length>0,B={padding:$,boundary:K.filter(RRe),altBoundary:H},{refs:A,floatingStyles:I,placement:M,isPositioned:z,middlewareData:G}=gRe({strategy:"fixed",placement:F,whileElementsMounted:(...ke)=>oRe(...ke,{animationFrame:g==="always"}),elements:{reference:w.anchor},middleware:[xRe({mainAxis:i+V,alignmentAxis:o}),l&&vRe({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?bRe():void 0,...B}),l&&wRe({...B}),ERe({...B,apply:({elements:ke,rects:Ne,availableWidth:ze,availableHeight:Ze})=>{const{width:Ye,height:We}=Ne.reference,St=ke.floating.style;St.setProperty("--radix-popper-available-width",`${ze}px`),St.setProperty("--radix-popper-available-height",`${Ze}px`),St.setProperty("--radix-popper-anchor-width",`${Ye}px`),St.setProperty("--radix-popper-anchor-height",`${We}px`)}}),O&&ARe({element:O,padding:a}),ORe({arrowWidth:U,arrowHeight:V}),m&&SRe({strategy:"referenceHidden",...B})]}),[te,Y]=Pse(M),q=th(x);Is(()=>{z&&(q==null||q())},[z,q]);const D=(ae=G.arrow)==null?void 0:ae.x,_=(Ee=G.arrow)==null?void 0:Ee.y,W=((ue=G.arrow)==null?void 0:ue.centerOffset)!==0,[X,re]=T.useState();return Is(()=>{E&&re(window.getComputedStyle(E).zIndex)},[E]),h.jsx("div",{ref:A.setFloating,"data-radix-popper-content-wrapper":"",style:{...I,transform:z?I.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:X,"--radix-popper-transform-origin":[(me=G.transformOrigin)==null?void 0:me.x,(ce=G.transformOrigin)==null?void 0:ce.y].join(" "),...((oe=G.hide)==null?void 0:oe.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:h.jsx(_Re,{scope:n,placedSide:te,onArrowChange:j,arrowX:D,arrowY:_,shouldHideArrow:W,children:h.jsx(Mn.div,{"data-side":te,"data-align":Y,...v,ref:k,style:{...v.style,animation:z?void 0:"none"}})})})});Nse.displayName=L8;var _se="PopperArrow",PRe={top:"bottom",right:"left",bottom:"top",left:"right"},Ise=T.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,s=IRe(_se,r),o=PRe[s.placedSide];return h.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:h.jsx(kRe,{...i,ref:n,style:{...i.style,display:"block"}})})});Ise.displayName=_se;function RRe(t){return t!==null}var ORe=t=>({name:"transformOrigin",options:t,fn(e){var w,E,C;const{placement:n,rects:r,middlewareData:i}=e,o=((w=i.arrow)==null?void 0:w.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,u]=Pse(n),f={start:"0%",center:"50%",end:"100%"}[u],m=(((E=i.arrow)==null?void 0:E.x)??0)+a/2,g=(((C=i.arrow)==null?void 0:C.y)??0)+l/2;let x="",v="";return c==="bottom"?(x=o?f:`${m}px`,v=`${-l}px`):c==="top"?(x=o?f:`${m}px`,v=`${r.floating.height+l}px`):c==="right"?(x=`${-l}px`,v=o?f:`${g}px`):c==="left"&&(x=`${r.floating.width+l}px`,v=o?f:`${g}px`),{data:{x,y:v}}}});function Pse(t){const[e,n="center"]=t.split("-");return[e,n]}var MRe=Tse,Rse=Cse,Ose=Nse,Mse=Ise,DRe="Portal",g2=T.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[i,s]=T.useState(!1);Is(()=>s(!0),[]);const o=n||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?JIe.createPortal(h.jsx(Mn.div,{...r,ref:e}),o):null});g2.displayName=DRe;function LRe(t,e){return T.useReducer((n,r)=>e[n][r]??n,t)}var Rm=t=>{const{present:e,children:n}=t,r=BRe(e),i=typeof n=="function"?n({present:r.isPresent}):T.Children.only(n),s=Nr(r.ref,jRe(i));return typeof n=="function"||r.isPresent?T.cloneElement(i,{ref:s}):null};Rm.displayName="Presence";function BRe(t){const[e,n]=T.useState(),r=T.useRef(null),i=T.useRef(t),s=T.useRef("none"),o=t?"mounted":"unmounted",[a,l]=LRe(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return T.useEffect(()=>{const c=YS(r.current);s.current=a==="mounted"?c:"none"},[a]),Is(()=>{const c=r.current,u=i.current;if(u!==t){const m=s.current,g=YS(c);t?l("MOUNT"):g==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&m!==g?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,l]),Is(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,f=g=>{const v=YS(r.current).includes(CSS.escape(g.animationName));if(g.target===e&&v&&(l("ANIMATION_END"),!i.current)){const w=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=w)})}},m=g=>{g.target===e&&(s.current=YS(r.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:T.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function YS(t){return(t==null?void 0:t.animationName)||"none"}function jRe(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var URe=Symbol("radix.slottable");function FRe(t){const e=({children:n})=>h.jsx(h.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=URe,e}var $Re=LC[" useInsertionEffect ".trim().toString()]||Is;function Aw({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[i,s,o]=zRe({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:i;{const u=T.useRef(t!==void 0);T.useEffect(()=>{const f=u.current;f!==a&&console.warn(`${r} is changing from ${f?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,r])}const c=T.useCallback(u=>{var f;if(a){const m=HRe(u)?u(t):u;m!==t&&((f=o.current)==null||f.call(o,m))}else s(u)},[a,t,s,o]);return[l,c]}function zRe({defaultProp:t,onChange:e}){const[n,r]=T.useState(t),i=T.useRef(n),s=T.useRef(e);return $Re(()=>{s.current=e},[e]),T.useEffect(()=>{var o;i.current!==n&&((o=s.current)==null||o.call(s,n),i.current=n)},[n,i]),[n,r,s]}function HRe(t){return typeof t=="function"}var Dse=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),VRe="VisuallyHidden",Lse=T.forwardRef((t,e)=>h.jsx(Mn.span,{...t,ref:e,style:{...Dse,...t.style}}));Lse.displayName=VRe;var qRe=Lse,[y2]=Im("Tooltip",[m2]),B8=m2(),Bse="TooltipProvider",GRe=700,QV="tooltip.open",[KRe,jse]=y2(Bse),Use=t=>{const{__scopeTooltip:e,delayDuration:n=GRe,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:s}=t,o=T.useRef(!0),a=T.useRef(!1),l=T.useRef(0);return T.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),h.jsx(KRe,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:T.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:T.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:T.useCallback(c=>{a.current=c},[]),disableHoverableContent:i,children:s})};Use.displayName=Bse;var Fse="Tooltip",[gmt,_1]=y2(Fse),cM="TooltipTrigger",WRe=T.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=_1(cM,n),s=jse(cM,n),o=B8(n),a=T.useRef(null),l=Nr(e,a,i.onTriggerChange),c=T.useRef(!1),u=T.useRef(!1),f=T.useCallback(()=>c.current=!1,[]);return T.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),h.jsx(Rse,{asChild:!0,...o,children:h.jsx(Mn.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:l,onPointerMove:mn(t.onPointerMove,m=>{m.pointerType!=="touch"&&!u.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),u.current=!0)}),onPointerLeave:mn(t.onPointerLeave,()=>{i.onTriggerLeave(),u.current=!1}),onPointerDown:mn(t.onPointerDown,()=>{i.open&&i.onClose(),c.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:mn(t.onFocus,()=>{c.current||i.onOpen()}),onBlur:mn(t.onBlur,i.onClose),onClick:mn(t.onClick,i.onClose)})})});WRe.displayName=cM;var j8="TooltipPortal",[YRe,JRe]=y2(j8,{forceMount:void 0}),$se=t=>{const{__scopeTooltip:e,forceMount:n,children:r,container:i}=t,s=_1(j8,e);return h.jsx(YRe,{scope:e,forceMount:n,children:h.jsx(Rm,{present:n||s.open,children:h.jsx(g2,{asChild:!0,container:i,children:r})})})};$se.displayName=j8;var ox="TooltipContent",zse=T.forwardRef((t,e)=>{const n=JRe(ox,t.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...s}=t,o=_1(ox,t.__scopeTooltip);return h.jsx(Rm,{present:r||o.open,children:o.disableHoverableContent?h.jsx(Hse,{side:i,...s,ref:e}):h.jsx(XRe,{side:i,...s,ref:e})})}),XRe=T.forwardRef((t,e)=>{const n=_1(ox,t.__scopeTooltip),r=jse(ox,t.__scopeTooltip),i=T.useRef(null),s=Nr(e,i),[o,a]=T.useState(null),{trigger:l,onClose:c}=n,u=i.current,{onPointerInTransitChange:f}=r,m=T.useCallback(()=>{a(null),f(!1)},[f]),g=T.useCallback((x,v)=>{const w=x.currentTarget,E={x:x.clientX,y:x.clientY},C=nOe(E,w.getBoundingClientRect()),k=rOe(E,C),O=iOe(v.getBoundingClientRect()),j=oOe([...k,...O]);a(j),f(!0)},[f]);return T.useEffect(()=>()=>m(),[m]),T.useEffect(()=>{if(l&&u){const x=w=>g(w,u),v=w=>g(w,l);return l.addEventListener("pointerleave",x),u.addEventListener("pointerleave",v),()=>{l.removeEventListener("pointerleave",x),u.removeEventListener("pointerleave",v)}}},[l,u,g,m]),T.useEffect(()=>{if(o){const x=v=>{const w=v.target,E={x:v.clientX,y:v.clientY},C=(l==null?void 0:l.contains(w))||(u==null?void 0:u.contains(w)),k=!sOe(E,o);C?m():k&&(m(),c())};return document.addEventListener("pointermove",x),()=>document.removeEventListener("pointermove",x)}},[l,u,o,c,m]),h.jsx(Hse,{...t,ref:s})}),[QRe,ZRe]=y2(Fse,{isInside:!1}),eOe=FRe("TooltipContent"),Hse=T.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=t,l=_1(ox,n),c=B8(n),{onClose:u}=l;return T.useEffect(()=>(document.addEventListener(QV,u),()=>document.removeEventListener(QV,u)),[u]),T.useEffect(()=>{if(l.trigger){const f=m=>{const g=m.target;g!=null&&g.contains(l.trigger)&&u()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[l.trigger,u]),h.jsx(u2,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:u,children:h.jsxs(Ose,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[h.jsx(eOe,{children:r}),h.jsx(QRe,{scope:n,isInside:!0,children:h.jsx(qRe,{id:l.contentId,role:"tooltip",children:i||r})})]})})});zse.displayName=ox;var Vse="TooltipArrow",tOe=T.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=B8(n);return ZRe(Vse,n).isInside?null:h.jsx(Mse,{...i,...r,ref:e})});tOe.displayName=Vse;function nOe(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),i=Math.abs(e.right-t.x),s=Math.abs(e.left-t.x);switch(Math.min(n,r,i,s)){case s:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function rOe(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function iOe(t){const{top:e,right:n,bottom:r,left:i}=t;return[{x:i,y:e},{x:n,y:e},{x:n,y:r},{x:i,y:r}]}function sOe(t,e){const{x:n,y:r}=t;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s],l=e[o],c=a.x,u=a.y,f=l.x,m=l.y;u>r!=m>r&&n<(f-c)*(r-u)/(m-u)+c&&(i=!i)}return i}function oOe(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),aOe(e)}function aOe(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const i=t[r];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const i=t[r];for(;n.length>=2;){const s=n[n.length-1],o=n[n.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))n.pop();else break}n.push(i)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var lOe=Use,cOe=$se,qse=zse;function Gse(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=Gse(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Pn(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=Gse(t))&&(r&&(r+=" "),r+=e);return r}const uOe=(t,e)=>{const n=new Array(t.length+e.length);for(let r=0;r<t.length;r++)n[r]=t[r];for(let r=0;r<e.length;r++)n[t.length+r]=e[r];return n},dOe=(t,e)=>({classGroupId:t,validator:e}),Kse=(t=new Map,e=null,n)=>({nextPart:t,validators:e,classGroupId:n}),ZT="-",ZV=[],fOe="arbitrary..",hOe=t=>{const e=mOe(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{if(o.startsWith("[")&&o.endsWith("]"))return pOe(o);const a=o.split(ZT),l=a[0]===""&&a.length>1?1:0;return Wse(a,l,e)},getConflictingClassGroupIds:(o,a)=>{if(a){const l=r[o],c=n[o];return l?c?uOe(c,l):l:c||ZV}return n[o]||ZV}}},Wse=(t,e,n)=>{if(t.length-e===0)return n.classGroupId;const i=t[e],s=n.nextPart.get(i);if(s){const c=Wse(t,e+1,s);if(c)return c}const o=n.validators;if(o===null)return;const a=e===0?t.join(ZT):t.slice(e).join(ZT),l=o.length;for(let c=0;c<l;c++){const u=o[c];if(u.validator(a))return u.classGroupId}},pOe=t=>t.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=t.slice(1,-1),n=e.indexOf(":"),r=e.slice(0,n);return r?fOe+r:void 0})(),mOe=t=>{const{theme:e,classGroups:n}=t;return gOe(n,e)},gOe=(t,e)=>{const n=Kse();for(const r in t){const i=t[r];U8(i,n,r,e)}return n},U8=(t,e,n,r)=>{const i=t.length;for(let s=0;s<i;s++){const o=t[s];yOe(o,e,n,r)}},yOe=(t,e,n,r)=>{if(typeof t=="string"){xOe(t,e,n);return}if(typeof t=="function"){vOe(t,e,n,r);return}bOe(t,e,n,r)},xOe=(t,e,n)=>{const r=t===""?e:Yse(e,t);r.classGroupId=n},vOe=(t,e,n,r)=>{if(wOe(t)){U8(t(r),e,n,r);return}e.validators===null&&(e.validators=[]),e.validators.push(dOe(n,t))},bOe=(t,e,n,r)=>{const i=Object.entries(t),s=i.length;for(let o=0;o<s;o++){const[a,l]=i[o];U8(l,Yse(e,a),n,r)}},Yse=(t,e)=>{let n=t;const r=e.split(ZT),i=r.length;for(let s=0;s<i;s++){const o=r[s];let a=n.nextPart.get(o);a||(a=Kse(),n.nextPart.set(o,a)),n=a}return n},wOe=t=>"isThemeGetter"in t&&t.isThemeGetter===!0,EOe=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=Object.create(null),r=Object.create(null);const i=(s,o)=>{n[s]=o,e++,e>t&&(e=0,r=n,n=Object.create(null))};return{get(s){let o=n[s];if(o!==void 0)return o;if((o=r[s])!==void 0)return i(s,o),o},set(s,o){s in n?n[s]=o:i(s,o)}}},uM="!",eq=":",SOe=[],tq=(t,e,n,r,i)=>({modifiers:t,hasImportantModifier:e,baseClassName:n,maybePostfixModifierPosition:r,isExternal:i}),AOe=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=i=>{const s=[];let o=0,a=0,l=0,c;const u=i.length;for(let v=0;v<u;v++){const w=i[v];if(o===0&&a===0){if(w===eq){s.push(i.slice(l,v)),l=v+1;continue}if(w==="/"){c=v;continue}}w==="["?o++:w==="]"?o--:w==="("?a++:w===")"&&a--}const f=s.length===0?i:i.slice(l);let m=f,g=!1;f.endsWith(uM)?(m=f.slice(0,-1),g=!0):f.startsWith(uM)&&(m=f.slice(1),g=!0);const x=c&&c>l?c-l:void 0;return tq(s,g,m,x)};if(e){const i=e+eq,s=r;r=o=>o.startsWith(i)?s(o.slice(i.length)):tq(SOe,!1,o,void 0,!0)}if(n){const i=r;r=s=>n({className:s,parseClassName:i})}return r},TOe=t=>{const e=new Map;return t.orderSensitiveModifiers.forEach((n,r)=>{e.set(n,1e6+r)}),n=>{const r=[];let i=[];for(let s=0;s<n.length;s++){const o=n[s],a=o[0]==="[",l=e.has(o);a||l?(i.length>0&&(i.sort(),r.push(...i),i=[]),r.push(o)):i.push(o)}return i.length>0&&(i.sort(),r.push(...i)),r}},kOe=t=>({cache:EOe(t.cacheSize),parseClassName:AOe(t),sortModifiers:TOe(t),...hOe(t)}),COe=/\s+/,NOe=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:s}=e,o=[],a=t.trim().split(COe);let l="";for(let c=a.length-1;c>=0;c-=1){const u=a[c],{isExternal:f,modifiers:m,hasImportantModifier:g,baseClassName:x,maybePostfixModifierPosition:v}=n(u);if(f){l=u+(l.length>0?" "+l:l);continue}let w=!!v,E=r(w?x.substring(0,v):x);if(!E){if(!w){l=u+(l.length>0?" "+l:l);continue}if(E=r(x),!E){l=u+(l.length>0?" "+l:l);continue}w=!1}const C=m.length===0?"":m.length===1?m[0]:s(m).join(":"),k=g?C+uM:C,O=k+E;if(o.indexOf(O)>-1)continue;o.push(O);const j=i(E,w);for(let R=0;R<j.length;++R){const U=j[R];o.push(k+U)}l=u+(l.length>0?" "+l:l)}return l},_Oe=(...t)=>{let e=0,n,r,i="";for(;e<t.length;)(n=t[e++])&&(r=Jse(n))&&(i&&(i+=" "),i+=r);return i},Jse=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=Jse(t[r]))&&(n&&(n+=" "),n+=e);return n},IOe=(t,...e)=>{let n,r,i,s;const o=l=>{const c=e.reduce((u,f)=>f(u),t());return n=kOe(c),r=n.cache.get,i=n.cache.set,s=a,a(l)},a=l=>{const c=r(l);if(c)return c;const u=NOe(l,n);return i(l,u),u};return s=o,(...l)=>s(_Oe(...l))},POe=[],vi=t=>{const e=n=>n[t]||POe;return e.isThemeGetter=!0,e},Xse=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Qse=/^\((?:(\w[\w-]*):)?(.+)\)$/i,ROe=/^\d+\/\d+$/,OOe=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,MOe=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,DOe=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,LOe=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,BOe=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,B0=t=>ROe.test(t),yn=t=>!!t&&!Number.isNaN(Number(t)),cf=t=>!!t&&Number.isInteger(Number(t)),UR=t=>t.endsWith("%")&&yn(t.slice(0,-1)),au=t=>OOe.test(t),jOe=()=>!0,UOe=t=>MOe.test(t)&&!DOe.test(t),Zse=()=>!1,FOe=t=>LOe.test(t),$Oe=t=>BOe.test(t),zOe=t=>!_t(t)&&!It(t),HOe=t=>Dx(t,noe,Zse),_t=t=>Xse.test(t),qh=t=>Dx(t,roe,UOe),FR=t=>Dx(t,WOe,yn),nq=t=>Dx(t,eoe,Zse),VOe=t=>Dx(t,toe,$Oe),JS=t=>Dx(t,ioe,FOe),It=t=>Qse.test(t),nb=t=>Lx(t,roe),qOe=t=>Lx(t,YOe),rq=t=>Lx(t,eoe),GOe=t=>Lx(t,noe),KOe=t=>Lx(t,toe),XS=t=>Lx(t,ioe,!0),Dx=(t,e,n)=>{const r=Xse.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},Lx=(t,e,n=!1)=>{const r=Qse.exec(t);return r?r[1]?e(r[1]):n:!1},eoe=t=>t==="position"||t==="percentage",toe=t=>t==="image"||t==="url",noe=t=>t==="length"||t==="size"||t==="bg-size",roe=t=>t==="length",WOe=t=>t==="number",YOe=t=>t==="family-name",ioe=t=>t==="shadow",JOe=()=>{const t=vi("color"),e=vi("font"),n=vi("text"),r=vi("font-weight"),i=vi("tracking"),s=vi("leading"),o=vi("breakpoint"),a=vi("container"),l=vi("spacing"),c=vi("radius"),u=vi("shadow"),f=vi("inset-shadow"),m=vi("text-shadow"),g=vi("drop-shadow"),x=vi("blur"),v=vi("perspective"),w=vi("aspect"),E=vi("ease"),C=vi("animate"),k=()=>["auto","avoid","all","avoid-page","page","left","right","column"],O=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],j=()=>[...O(),It,_t],R=()=>["auto","hidden","clip","visible","scroll"],U=()=>["auto","contain","none"],V=()=>[It,_t,l],F=()=>[B0,"full","auto",...V()],$=()=>[cf,"none","subgrid",It,_t],K=()=>["auto",{span:["full",cf,It,_t]},cf,It,_t],H=()=>[cf,"auto",It,_t],B=()=>["auto","min","max","fr",It,_t],A=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],I=()=>["start","end","center","stretch","center-safe","end-safe"],M=()=>["auto",...V()],z=()=>[B0,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...V()],G=()=>[t,It,_t],te=()=>[...O(),rq,nq,{position:[It,_t]}],Y=()=>["no-repeat",{repeat:["","x","y","space","round"]}],q=()=>["auto","cover","contain",GOe,HOe,{size:[It,_t]}],D=()=>[UR,nb,qh],_=()=>["","none","full",c,It,_t],W=()=>["",yn,nb,qh],X=()=>["solid","dashed","dotted","double"],re=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ae=()=>[yn,UR,rq,nq],Ee=()=>["","none",x,It,_t],ue=()=>["none",yn,It,_t],me=()=>["none",yn,It,_t],ce=()=>[yn,It,_t],oe=()=>[B0,"full",...V()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[au],breakpoint:[au],color:[jOe],container:[au],"drop-shadow":[au],ease:["in","out","in-out"],font:[zOe],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[au],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[au],shadow:[au],spacing:["px",yn],text:[au],"text-shadow":[au],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",B0,_t,It,w]}],container:["container"],columns:[{columns:[yn,_t,It,a]}],"break-after":[{"break-after":k()}],"break-before":[{"break-before":k()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:j()}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:U()}],"overscroll-x":[{"overscroll-x":U()}],"overscroll-y":[{"overscroll-y":U()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:F()}],"inset-x":[{"inset-x":F()}],"inset-y":[{"inset-y":F()}],start:[{start:F()}],end:[{end:F()}],top:[{top:F()}],right:[{right:F()}],bottom:[{bottom:F()}],left:[{left:F()}],visibility:["visible","invisible","collapse"],z:[{z:[cf,"auto",It,_t]}],basis:[{basis:[B0,"full","auto",a,...V()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[yn,B0,"auto","initial","none",_t]}],grow:[{grow:["",yn,It,_t]}],shrink:[{shrink:["",yn,It,_t]}],order:[{order:[cf,"first","last","none",It,_t]}],"grid-cols":[{"grid-cols":$()}],"col-start-end":[{col:K()}],"col-start":[{"col-start":H()}],"col-end":[{"col-end":H()}],"grid-rows":[{"grid-rows":$()}],"row-start-end":[{row:K()}],"row-start":[{"row-start":H()}],"row-end":[{"row-end":H()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":B()}],"auto-rows":[{"auto-rows":B()}],gap:[{gap:V()}],"gap-x":[{"gap-x":V()}],"gap-y":[{"gap-y":V()}],"justify-content":[{justify:[...A(),"normal"]}],"justify-items":[{"justify-items":[...I(),"normal"]}],"justify-self":[{"justify-self":["auto",...I()]}],"align-content":[{content:["normal",...A()]}],"align-items":[{items:[...I(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...I(),{baseline:["","last"]}]}],"place-content":[{"place-content":A()}],"place-items":[{"place-items":[...I(),"baseline"]}],"place-self":[{"place-self":["auto",...I()]}],p:[{p:V()}],px:[{px:V()}],py:[{py:V()}],ps:[{ps:V()}],pe:[{pe:V()}],pt:[{pt:V()}],pr:[{pr:V()}],pb:[{pb:V()}],pl:[{pl:V()}],m:[{m:M()}],mx:[{mx:M()}],my:[{my:M()}],ms:[{ms:M()}],me:[{me:M()}],mt:[{mt:M()}],mr:[{mr:M()}],mb:[{mb:M()}],ml:[{ml:M()}],"space-x":[{"space-x":V()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":V()}],"space-y-reverse":["space-y-reverse"],size:[{size:z()}],w:[{w:[a,"screen",...z()]}],"min-w":[{"min-w":[a,"screen","none",...z()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[o]},...z()]}],h:[{h:["screen","lh",...z()]}],"min-h":[{"min-h":["screen","lh","none",...z()]}],"max-h":[{"max-h":["screen","lh",...z()]}],"font-size":[{text:["base",n,nb,qh]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,It,FR]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",UR,_t]}],"font-family":[{font:[qOe,_t,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,It,_t]}],"line-clamp":[{"line-clamp":[yn,"none",It,FR]}],leading:[{leading:[s,...V()]}],"list-image":[{"list-image":["none",It,_t]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",It,_t]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:G()}],"text-color":[{text:G()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...X(),"wavy"]}],"text-decoration-thickness":[{decoration:[yn,"from-font","auto",It,qh]}],"text-decoration-color":[{decoration:G()}],"underline-offset":[{"underline-offset":[yn,"auto",It,_t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:V()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",It,_t]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",It,_t]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:te()}],"bg-repeat":[{bg:Y()}],"bg-size":[{bg:q()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},cf,It,_t],radial:["",It,_t],conic:[cf,It,_t]},KOe,VOe]}],"bg-color":[{bg:G()}],"gradient-from-pos":[{from:D()}],"gradient-via-pos":[{via:D()}],"gradient-to-pos":[{to:D()}],"gradient-from":[{from:G()}],"gradient-via":[{via:G()}],"gradient-to":[{to:G()}],rounded:[{rounded:_()}],"rounded-s":[{"rounded-s":_()}],"rounded-e":[{"rounded-e":_()}],"rounded-t":[{"rounded-t":_()}],"rounded-r":[{"rounded-r":_()}],"rounded-b":[{"rounded-b":_()}],"rounded-l":[{"rounded-l":_()}],"rounded-ss":[{"rounded-ss":_()}],"rounded-se":[{"rounded-se":_()}],"rounded-ee":[{"rounded-ee":_()}],"rounded-es":[{"rounded-es":_()}],"rounded-tl":[{"rounded-tl":_()}],"rounded-tr":[{"rounded-tr":_()}],"rounded-br":[{"rounded-br":_()}],"rounded-bl":[{"rounded-bl":_()}],"border-w":[{border:W()}],"border-w-x":[{"border-x":W()}],"border-w-y":[{"border-y":W()}],"border-w-s":[{"border-s":W()}],"border-w-e":[{"border-e":W()}],"border-w-t":[{"border-t":W()}],"border-w-r":[{"border-r":W()}],"border-w-b":[{"border-b":W()}],"border-w-l":[{"border-l":W()}],"divide-x":[{"divide-x":W()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":W()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...X(),"hidden","none"]}],"divide-style":[{divide:[...X(),"hidden","none"]}],"border-color":[{border:G()}],"border-color-x":[{"border-x":G()}],"border-color-y":[{"border-y":G()}],"border-color-s":[{"border-s":G()}],"border-color-e":[{"border-e":G()}],"border-color-t":[{"border-t":G()}],"border-color-r":[{"border-r":G()}],"border-color-b":[{"border-b":G()}],"border-color-l":[{"border-l":G()}],"divide-color":[{divide:G()}],"outline-style":[{outline:[...X(),"none","hidden"]}],"outline-offset":[{"outline-offset":[yn,It,_t]}],"outline-w":[{outline:["",yn,nb,qh]}],"outline-color":[{outline:G()}],shadow:[{shadow:["","none",u,XS,JS]}],"shadow-color":[{shadow:G()}],"inset-shadow":[{"inset-shadow":["none",f,XS,JS]}],"inset-shadow-color":[{"inset-shadow":G()}],"ring-w":[{ring:W()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:G()}],"ring-offset-w":[{"ring-offset":[yn,qh]}],"ring-offset-color":[{"ring-offset":G()}],"inset-ring-w":[{"inset-ring":W()}],"inset-ring-color":[{"inset-ring":G()}],"text-shadow":[{"text-shadow":["none",m,XS,JS]}],"text-shadow-color":[{"text-shadow":G()}],opacity:[{opacity:[yn,It,_t]}],"mix-blend":[{"mix-blend":[...re(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":re()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[yn]}],"mask-image-linear-from-pos":[{"mask-linear-from":ae()}],"mask-image-linear-to-pos":[{"mask-linear-to":ae()}],"mask-image-linear-from-color":[{"mask-linear-from":G()}],"mask-image-linear-to-color":[{"mask-linear-to":G()}],"mask-image-t-from-pos":[{"mask-t-from":ae()}],"mask-image-t-to-pos":[{"mask-t-to":ae()}],"mask-image-t-from-color":[{"mask-t-from":G()}],"mask-image-t-to-color":[{"mask-t-to":G()}],"mask-image-r-from-pos":[{"mask-r-from":ae()}],"mask-image-r-to-pos":[{"mask-r-to":ae()}],"mask-image-r-from-color":[{"mask-r-from":G()}],"mask-image-r-to-color":[{"mask-r-to":G()}],"mask-image-b-from-pos":[{"mask-b-from":ae()}],"mask-image-b-to-pos":[{"mask-b-to":ae()}],"mask-image-b-from-color":[{"mask-b-from":G()}],"mask-image-b-to-color":[{"mask-b-to":G()}],"mask-image-l-from-pos":[{"mask-l-from":ae()}],"mask-image-l-to-pos":[{"mask-l-to":ae()}],"mask-image-l-from-color":[{"mask-l-from":G()}],"mask-image-l-to-color":[{"mask-l-to":G()}],"mask-image-x-from-pos":[{"mask-x-from":ae()}],"mask-image-x-to-pos":[{"mask-x-to":ae()}],"mask-image-x-from-color":[{"mask-x-from":G()}],"mask-image-x-to-color":[{"mask-x-to":G()}],"mask-image-y-from-pos":[{"mask-y-from":ae()}],"mask-image-y-to-pos":[{"mask-y-to":ae()}],"mask-image-y-from-color":[{"mask-y-from":G()}],"mask-image-y-to-color":[{"mask-y-to":G()}],"mask-image-radial":[{"mask-radial":[It,_t]}],"mask-image-radial-from-pos":[{"mask-radial-from":ae()}],"mask-image-radial-to-pos":[{"mask-radial-to":ae()}],"mask-image-radial-from-color":[{"mask-radial-from":G()}],"mask-image-radial-to-color":[{"mask-radial-to":G()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":O()}],"mask-image-conic-pos":[{"mask-conic":[yn]}],"mask-image-conic-from-pos":[{"mask-conic-from":ae()}],"mask-image-conic-to-pos":[{"mask-conic-to":ae()}],"mask-image-conic-from-color":[{"mask-conic-from":G()}],"mask-image-conic-to-color":[{"mask-conic-to":G()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:te()}],"mask-repeat":[{mask:Y()}],"mask-size":[{mask:q()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",It,_t]}],filter:[{filter:["","none",It,_t]}],blur:[{blur:Ee()}],brightness:[{brightness:[yn,It,_t]}],contrast:[{contrast:[yn,It,_t]}],"drop-shadow":[{"drop-shadow":["","none",g,XS,JS]}],"drop-shadow-color":[{"drop-shadow":G()}],grayscale:[{grayscale:["",yn,It,_t]}],"hue-rotate":[{"hue-rotate":[yn,It,_t]}],invert:[{invert:["",yn,It,_t]}],saturate:[{saturate:[yn,It,_t]}],sepia:[{sepia:["",yn,It,_t]}],"backdrop-filter":[{"backdrop-filter":["","none",It,_t]}],"backdrop-blur":[{"backdrop-blur":Ee()}],"backdrop-brightness":[{"backdrop-brightness":[yn,It,_t]}],"backdrop-contrast":[{"backdrop-contrast":[yn,It,_t]}],"backdrop-grayscale":[{"backdrop-grayscale":["",yn,It,_t]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[yn,It,_t]}],"backdrop-invert":[{"backdrop-invert":["",yn,It,_t]}],"backdrop-opacity":[{"backdrop-opacity":[yn,It,_t]}],"backdrop-saturate":[{"backdrop-saturate":[yn,It,_t]}],"backdrop-sepia":[{"backdrop-sepia":["",yn,It,_t]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":V()}],"border-spacing-x":[{"border-spacing-x":V()}],"border-spacing-y":[{"border-spacing-y":V()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",It,_t]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[yn,"initial",It,_t]}],ease:[{ease:["linear","initial",E,It,_t]}],delay:[{delay:[yn,It,_t]}],animate:[{animate:["none",C,It,_t]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[v,It,_t]}],"perspective-origin":[{"perspective-origin":j()}],rotate:[{rotate:ue()}],"rotate-x":[{"rotate-x":ue()}],"rotate-y":[{"rotate-y":ue()}],"rotate-z":[{"rotate-z":ue()}],scale:[{scale:me()}],"scale-x":[{"scale-x":me()}],"scale-y":[{"scale-y":me()}],"scale-z":[{"scale-z":me()}],"scale-3d":["scale-3d"],skew:[{skew:ce()}],"skew-x":[{"skew-x":ce()}],"skew-y":[{"skew-y":ce()}],transform:[{transform:[It,_t,"","none","gpu","cpu"]}],"transform-origin":[{origin:j()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:oe()}],"translate-x":[{"translate-x":oe()}],"translate-y":[{"translate-y":oe()}],"translate-z":[{"translate-z":oe()}],"translate-none":["translate-none"],accent:[{accent:G()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:G()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",It,_t]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":V()}],"scroll-mx":[{"scroll-mx":V()}],"scroll-my":[{"scroll-my":V()}],"scroll-ms":[{"scroll-ms":V()}],"scroll-me":[{"scroll-me":V()}],"scroll-mt":[{"scroll-mt":V()}],"scroll-mr":[{"scroll-mr":V()}],"scroll-mb":[{"scroll-mb":V()}],"scroll-ml":[{"scroll-ml":V()}],"scroll-p":[{"scroll-p":V()}],"scroll-px":[{"scroll-px":V()}],"scroll-py":[{"scroll-py":V()}],"scroll-ps":[{"scroll-ps":V()}],"scroll-pe":[{"scroll-pe":V()}],"scroll-pt":[{"scroll-pt":V()}],"scroll-pr":[{"scroll-pr":V()}],"scroll-pb":[{"scroll-pb":V()}],"scroll-pl":[{"scroll-pl":V()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",It,_t]}],fill:[{fill:["none",...G()]}],"stroke-w":[{stroke:[yn,nb,qh,FR]}],stroke:[{stroke:["none",...G()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},XOe=IOe(JOe);function Ut(...t){return XOe(Pn(t))}const QOe=lOe,ZOe=T.forwardRef(({className:t,sideOffset:e=4,...n},r)=>h.jsx(cOe,{children:h.jsx(qse,{ref:r,sideOffset:e,className:Ut("z-50 overflow-hidden rounded-md bg-slate-800 border border-slate-700 px-3 py-1.5 text-xs text-slate-200 animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));ZOe.displayName=qse.displayName;const $R=({icon:t,label:e,isActive:n,onClick:r})=>h.jsxs("button",{onClick:r,className:Ut("w-full flex items-center gap-3 px-3 py-2.5 text-[13px] font-medium transition-all duration-200 rounded-xl relative overflow-hidden",n?"text-white bg-[#1a1b21]/80 backdrop-blur-sm":"text-[#747580] hover:text-[#a0a1a8] hover:bg-[#1a1b21]/40"),title:e,children:[n&&h.jsx("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 w-1 h-6 bg-[#E7FE55] rounded-full"}),h.jsx("span",{className:Ut("flex items-center justify-center transition-colors ml-1",n&&"text-[#E7FE55]"),children:t}),h.jsx("span",{className:"tracking-wide",children:e})]}),iq=({status:t,label:e,latency:n,network:r})=>{const i=t==="Down",s=t==="Checking",o=i?"#ef4444":s?"#747580":"#E7FE55";return h.jsxs("div",{className:"flex items-center justify-between py-0.5",children:[h.jsx("span",{className:"text-[9px] uppercase tracking-[0.05em] text-[#5a5b63]",children:e}),h.jsxs("div",{className:"flex items-center gap-1.5",children:[h.jsx("span",{className:"text-[9px] font-mono text-[#5a5b63]",children:i?"DOWN":s?"...":n}),h.jsx("div",{className:"w-1 h-1 rounded-full",style:{backgroundColor:o}})]})]})},e5e=({activeTab:t,setActiveTab:e,isVaultUnlocked:n,onSelectConversation:r,onNewChat:i,currentConversationId:s,password:o,isOpen:a=!1,onClose:l})=>{const[c,u]=T.useState("Checking");T.useEffect(()=>{const v=async()=>{const E=await $t.checkHealth();u(E?"Online":"Down")};v();const w=setInterval(v,3e4);return()=>clearInterval(w)},[]);const f=v=>{e(v),l&&l()},m=[Ce.VAULT_DEALER,Ce.DEALER_DASHBOARD,Ce.DEALER_THINKING,Ce.DEALER_CONFIG,Ce.DEALER_PROMPT].includes(t),g=[Ce.POLYMARKET_DEALER,Ce.POLYMARKET_DASHBOARD,Ce.POLYMARKET_THINKING,Ce.POLYMARKET_CONFIG,Ce.POLYMARKET_PROMPT].includes(t),x=t===Ce.AGENT;return h.jsxs(QOe,{delayDuration:300,children:[h.jsx(Go,{children:a&&h.jsx(rn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 z-40 xl:hidden",onClick:l})}),h.jsxs("aside",{className:Ut("m-3 p-5 flex flex-col fixed h-[calc(100%-24px)] bg-[#0f1015]/95 backdrop-blur-xl z-50 w-60 transform transition-transform duration-300 ease-in-out","rounded-2xl border border-[#232328]/60 shadow-2xl shadow-black/20",a?"translate-x-0":"-translate-x-full","xl:translate-x-0"),children:[h.jsxs("div",{className:"mb-8 flex items-center gap-3 px-2",children:[h.jsx("div",{className:"w-8 h-8 flex-shrink-0 bg-[#E7FE55] rounded flex items-center justify-center",children:h.jsx(ed,{className:"text-black w-5 h-5"})}),h.jsx("h1",{className:"text-[15px] font-semibold text-white tracking-tight hidden xl:block",children:"AutonomousVault"})]}),h.jsxs("nav",{className:"space-y-1 flex-1",children:[h.jsx($R,{icon:h.jsx(mo,{size:18}),label:"Dashboard",isActive:t===Ce.DASHBOARD,onClick:()=>f(Ce.DASHBOARD)}),h.jsxs("div",{onClick:()=>f(Ce.AGENT),className:Ut("flex items-center justify-between px-3 py-2.5 rounded-xl transition-all duration-200 cursor-pointer relative overflow-hidden",x?"bg-[#1a1b21]/80 backdrop-blur-sm":"hover:bg-[#1a1b21]/40"),children:[x&&h.jsx("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 w-1 h-6 bg-[#E7FE55] rounded-full"}),h.jsxs("div",{className:Ut("ml-1","flex flex-1 items-center gap-3 text-[13px] font-medium",t===Ce.AGENT?"text-white":"text-[#747580] hover:text-[#a0a1a8]"),title:"Vault Operator",children:[h.jsx("span",{className:Ut("transition-colors",t===Ce.AGENT&&"text-[#E7FE55]"),children:h.jsx(mg,{size:18})}),h.jsx("span",{className:"tracking-wide",children:"Vault Operator"})]})]}),h.jsx("div",{className:"pt-2",children:h.jsxs("button",{onClick:()=>f(Ce.VAULT_DEALER),className:Ut("w-full flex items-center gap-3 px-3 py-2.5 text-[13px] font-medium transition-all duration-200 rounded-xl relative overflow-hidden",m?"text-white bg-[#1a1b21]/80 backdrop-blur-sm":"text-[#747580] hover:text-[#a0a1a8] hover:bg-[#1a1b21]/40"),title:"Hyperliquid Dealer",children:[m&&h.jsx("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 w-1 h-6 bg-[#E7FE55] rounded-full"}),h.jsx("span",{className:Ut("transition-colors ml-1",m&&"text-[#E7FE55]"),children:h.jsx(nd,{size:18})}),h.jsx("span",{className:"tracking-wide",children:"Hyperliquid Dealer"})]})}),h.jsx("div",{children:h.jsxs("button",{onClick:()=>f(Ce.POLYMARKET_DEALER),className:Ut("w-full flex items-center gap-3 px-3 py-2.5 text-[13px] font-medium transition-all duration-200 rounded-xl relative overflow-hidden",g?"text-white bg-[#1a1b21]/80 backdrop-blur-sm":"text-[#747580] hover:text-[#a0a1a8] hover:bg-[#1a1b21]/40"),title:"Polymarket Dealer",children:[g&&h.jsx("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 w-1 h-6 bg-[#E7FE55] rounded-full"}),h.jsx("span",{className:Ut("transition-colors ml-1",g&&"text-[#E7FE55]"),children:h.jsx(Rn,{size:18})}),h.jsx("span",{className:"tracking-wide",children:"Polymarket Dealer"})]})}),h.jsx($R,{icon:h.jsx(yTe,{size:18}),label:"Vault",isActive:t===Ce.VAULT,onClick:()=>f(Ce.VAULT)}),h.jsx($R,{icon:h.jsx(one,{size:18}),label:"Token Costs",isActive:t===Ce.TOKEN_COSTS,onClick:()=>f(Ce.TOKEN_COSTS)})]}),h.jsxs("div",{className:"pt-6 border-t border-[#232328]",children:[h.jsx("div",{className:"text-[10px] uppercase tracking-[0.1em] text-[#747580] font-semibold mb-3 px-2",children:"Network Status"}),h.jsxs("div",{className:"space-y-2 px-2",children:[h.jsx(iq,{status:"Online",label:"Solana Devnet",latency:"18m",network:"solana"}),h.jsx(iq,{status:c,label:"Hyperliquid Testnet",latency:"450ms",network:"hyperliquid"})]})]})]})]})};var t5e=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function F8(t){if(typeof t!="string")return!1;var e=t5e;return e.includes(t)}var n5e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],r5e=new Set(n5e);function soe(t){return typeof t!="string"?!1:r5e.has(t)}function ooe(t){return typeof t=="string"&&t.startsWith("data-")}function Gs(t){if(typeof t!="object"||t===null)return{};var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(soe(n)||ooe(n))&&(e[n]=t[n]);return e}function fm(t){if(t==null)return null;if(T.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return Gs(e)}return typeof t=="object"&&!Array.isArray(t)?Gs(t):null}function Ps(t){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(soe(n)||ooe(n)||F8(n))&&(e[n]=t[n]);return e}function i5e(t){return t==null?null:T.isValidElement(t)?Ps(t.props):typeof t=="object"&&!Array.isArray(t)?Ps(t):null}var s5e=["children","width","height","viewBox","className","style","title","desc"];function dM(){return dM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dM.apply(null,arguments)}function o5e(t,e){if(t==null)return{};var n,r,i=a5e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function a5e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var aoe=T.forwardRef((t,e)=>{var{children:n,width:r,height:i,viewBox:s,className:o,style:a,title:l,desc:c}=t,u=o5e(t,s5e),f=s||{width:r,height:i,x:0,y:0},m=Pn("recharts-surface",o);return T.createElement("svg",dM({},Ps(u),{className:m,width:r,height:i,style:a,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:e}),T.createElement("title",null,l),T.createElement("desc",null,c),n)}),l5e=["children","className"];function fM(){return fM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fM.apply(null,arguments)}function c5e(t,e){if(t==null)return{};var n,r,i=u5e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function u5e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Wr=T.forwardRef((t,e)=>{var{children:n,className:r}=t,i=c5e(t,l5e),s=Pn("recharts-layer",r);return T.createElement("g",fM({className:s},Ps(i),{ref:e}),n)}),d5e=T.createContext(null);function pr(t){return function(){return t}}const loe=Math.cos,ek=Math.sin,Ol=Math.sqrt,tk=Math.PI,x2=2*tk,hM=Math.PI,pM=2*hM,Zh=1e-6,f5e=pM-Zh;function coe(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function h5e(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return coe;const n=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class p5e{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?coe:h5e(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,s,o){this._append`C${+e},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(e,n,r,i,s){if(e=+e,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,l=r-e,c=i-n,u=o-e,f=a-n,m=u*u+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(m>Zh)if(!(Math.abs(f*l-c*u)>Zh)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let g=r-o,x=i-a,v=l*l+c*c,w=g*g+x*x,E=Math.sqrt(v),C=Math.sqrt(m),k=s*Math.tan((hM-Math.acos((v+m-w)/(2*E*C)))/2),O=k/C,j=k/E;Math.abs(O-1)>Zh&&this._append`L${e+O*u},${n+O*f}`,this._append`A${s},${s},0,0,${+(f*g>u*x)},${this._x1=e+j*l},${this._y1=n+j*c}`}}arc(e,n,r,i,s,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),l=r*Math.sin(i),c=e+a,u=n+l,f=1^o,m=o?i-s:s-i;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>Zh||Math.abs(this._y1-u)>Zh)&&this._append`L${c},${u}`,r&&(m<0&&(m=m%pM+pM),m>f5e?this._append`A${r},${r},0,1,${f},${e-a},${n-l}A${r},${r},0,1,${f},${this._x1=c},${this._y1=u}`:m>Zh&&this._append`A${r},${r},0,${+(m>=hM)},${f},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function $8(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new p5e(e)}function z8(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function uoe(t){this._context=t}uoe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function v2(t){return new uoe(t)}function doe(t){return t[0]}function foe(t){return t[1]}function hoe(t,e){var n=pr(!0),r=null,i=v2,s=null,o=$8(a);t=typeof t=="function"?t:t===void 0?doe:pr(t),e=typeof e=="function"?e:e===void 0?foe:pr(e);function a(l){var c,u=(l=z8(l)).length,f,m=!1,g;for(r==null&&(s=i(g=o())),c=0;c<=u;++c)!(c<u&&n(f=l[c],c,l))===m&&((m=!m)?s.lineStart():s.lineEnd()),m&&s.point(+t(f,c,l),+e(f,c,l));if(g)return s=null,g+""||null}return a.x=function(l){return arguments.length?(t=typeof l=="function"?l:pr(+l),a):t},a.y=function(l){return arguments.length?(e=typeof l=="function"?l:pr(+l),a):e},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:pr(!!l),a):n},a.curve=function(l){return arguments.length?(i=l,r!=null&&(s=i(r)),a):i},a.context=function(l){return arguments.length?(l==null?r=s=null:s=i(r=l),a):r},a}function QS(t,e,n){var r=null,i=pr(!0),s=null,o=v2,a=null,l=$8(c);t=typeof t=="function"?t:t===void 0?doe:pr(+t),e=typeof e=="function"?e:pr(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?foe:pr(+n);function c(f){var m,g,x,v=(f=z8(f)).length,w,E=!1,C,k=new Array(v),O=new Array(v);for(s==null&&(a=o(C=l())),m=0;m<=v;++m){if(!(m<v&&i(w=f[m],m,f))===E)if(E=!E)g=m,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),x=m-1;x>=g;--x)a.point(k[x],O[x]);a.lineEnd(),a.areaEnd()}E&&(k[m]=+t(w,m,f),O[m]=+e(w,m,f),a.point(r?+r(w,m,f):k[m],n?+n(w,m,f):O[m]))}if(C)return a=null,C+""||null}function u(){return hoe().defined(i).curve(o).context(s)}return c.x=function(f){return arguments.length?(t=typeof f=="function"?f:pr(+f),r=null,c):t},c.x0=function(f){return arguments.length?(t=typeof f=="function"?f:pr(+f),c):t},c.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:pr(+f),c):r},c.y=function(f){return arguments.length?(e=typeof f=="function"?f:pr(+f),n=null,c):e},c.y0=function(f){return arguments.length?(e=typeof f=="function"?f:pr(+f),c):e},c.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:pr(+f),c):n},c.lineX0=c.lineY0=function(){return u().x(t).y(e)},c.lineY1=function(){return u().x(t).y(n)},c.lineX1=function(){return u().x(r).y(e)},c.defined=function(f){return arguments.length?(i=typeof f=="function"?f:pr(!!f),c):i},c.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),c):o},c.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),c):s},c}class poe{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function m5e(t){return new poe(t,!0)}function g5e(t){return new poe(t,!1)}const H8={draw(t,e){const n=Ol(e/tk);t.moveTo(n,0),t.arc(0,0,n,0,x2)}},y5e={draw(t,e){const n=Ol(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},moe=Ol(1/3),x5e=moe*2,v5e={draw(t,e){const n=Ol(e/x5e),r=n*moe;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},b5e={draw(t,e){const n=Ol(e),r=-n/2;t.rect(r,r,n,n)}},w5e=.8908130915292852,goe=ek(tk/10)/ek(7*tk/10),E5e=ek(x2/10)*goe,S5e=-loe(x2/10)*goe,A5e={draw(t,e){const n=Ol(e*w5e),r=E5e*n,i=S5e*n;t.moveTo(0,-n),t.lineTo(r,i);for(let s=1;s<5;++s){const o=x2*s/5,a=loe(o),l=ek(o);t.lineTo(l*n,-a*n),t.lineTo(a*r-l*i,l*r+a*i)}t.closePath()}},zR=Ol(3),T5e={draw(t,e){const n=-Ol(e/(zR*3));t.moveTo(0,n*2),t.lineTo(-zR*n,-n),t.lineTo(zR*n,-n),t.closePath()}},ha=-.5,pa=Ol(3)/2,mM=1/Ol(12),k5e=(mM/2+1)*3,C5e={draw(t,e){const n=Ol(e/k5e),r=n/2,i=n*mM,s=r,o=n*mM+n,a=-s,l=o;t.moveTo(r,i),t.lineTo(s,o),t.lineTo(a,l),t.lineTo(ha*r-pa*i,pa*r+ha*i),t.lineTo(ha*s-pa*o,pa*s+ha*o),t.lineTo(ha*a-pa*l,pa*a+ha*l),t.lineTo(ha*r+pa*i,ha*i-pa*r),t.lineTo(ha*s+pa*o,ha*o-pa*s),t.lineTo(ha*a+pa*l,ha*l-pa*a),t.closePath()}};function N5e(t,e){let n=null,r=$8(i);t=typeof t=="function"?t:pr(t||H8),e=typeof e=="function"?e:pr(e===void 0?64:+e);function i(){let s;if(n||(n=s=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(t=typeof s=="function"?s:pr(s),i):t},i.size=function(s){return arguments.length?(e=typeof s=="function"?s:pr(+s),i):e},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function nk(){}function rk(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function yoe(t){this._context=t}yoe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:rk(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:rk(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function _5e(t){return new yoe(t)}function xoe(t){this._context=t}xoe.prototype={areaStart:nk,areaEnd:nk,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:rk(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function I5e(t){return new xoe(t)}function voe(t){this._context=t}voe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:rk(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function P5e(t){return new voe(t)}function boe(t){this._context=t}boe.prototype={areaStart:nk,areaEnd:nk,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function R5e(t){return new boe(t)}function sq(t){return t<0?-1:1}function oq(t,e,n){var r=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(sq(s)+sq(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function aq(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function HR(t,e,n){var r=t._x0,i=t._y0,s=t._x1,o=t._y1,a=(s-r)/3;t._context.bezierCurveTo(r+a,i+a*e,s-a,o-a*n,s,o)}function ik(t){this._context=t}ik.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:HR(this,this._t0,aq(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,HR(this,aq(this,n=oq(this,t,e)),n);break;default:HR(this,this._t0,n=oq(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function woe(t){this._context=new Eoe(t)}(woe.prototype=Object.create(ik.prototype)).point=function(t,e){ik.prototype.point.call(this,e,t)};function Eoe(t){this._context=t}Eoe.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,s){this._context.bezierCurveTo(e,t,r,n,s,i)}};function O5e(t){return new ik(t)}function M5e(t){return new woe(t)}function Soe(t){this._context=t}Soe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=lq(t),i=lq(e),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function lq(t){var e,n=t.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,s[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/s[e-1],s[e]-=r,o[e]-=r*o[e-1];for(i[n-1]=o[n-1]/s[n-1],e=n-2;e>=0;--e)i[e]=(o[e]-i[e+1])/s[e];for(s[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function D5e(t){return new Soe(t)}function b2(t,e){this._context=t,this._t=e}b2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function L5e(t){return new b2(t,.5)}function B5e(t){return new b2(t,0)}function j5e(t){return new b2(t,1)}function hm(t,e){if((o=t.length)>1)for(var n=1,r,i,s=t[e[0]],o,a=s.length;n<o;++n)for(i=s,s=t[e[n]],r=0;r<a;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function gM(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function U5e(t,e){return t[e]}function F5e(t){const e=[];return e.key=t,e}function $5e(){var t=pr([]),e=gM,n=hm,r=U5e;function i(s){var o=Array.from(t.apply(this,arguments),F5e),a,l=o.length,c=-1,u;for(const f of s)for(a=0,++c;a<l;++a)(o[a][c]=[0,+r(f,o[a].key,c,s)]).data=f;for(a=0,u=z8(e(o));a<l;++a)o[u[a]].index=a;return n(o,u),o}return i.keys=function(s){return arguments.length?(t=typeof s=="function"?s:pr(Array.from(s)),i):t},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:pr(+s),i):r},i.order=function(s){return arguments.length?(e=s==null?gM:typeof s=="function"?s:pr(Array.from(s)),i):e},i.offset=function(s){return arguments.length?(n=s??hm,i):n},i}function z5e(t,e){if((r=t.length)>0){for(var n,r,i=0,s=t[0].length,o;i<s;++i){for(o=n=0;n<r;++n)o+=t[n][i][1]||0;if(o)for(n=0;n<r;++n)t[n][i][1]/=o}hm(t,e)}}function H5e(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,s=r.length;n<s;++n){for(var o=0,a=0;o<i;++o)a+=t[o][n][1]||0;r[n][1]+=r[n][0]=-a/2}hm(t,e)}}function V5e(t,e){if(!(!((o=t.length)>0)||!((s=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,s,o;r<s;++r){for(var a=0,l=0,c=0;a<o;++a){for(var u=t[e[a]],f=u[r][1]||0,m=u[r-1][1]||0,g=(f-m)/2,x=0;x<a;++x){var v=t[e[x]],w=v[r][1]||0,E=v[r-1][1]||0;g+=w-E}l+=f,c+=g*f}i[r-1][1]+=i[r-1][0]=n,l&&(n-=c/l)}i[r-1][1]+=i[r-1][0]=n,hm(t,e)}}var VR={},qR={},cq;function q5e(){return cq||(cq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(qR)),qR}var GR={},uq;function Aoe(){return uq||(uq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(GR)),GR}var KR={},dq;function V8(){return dq||(dq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){var r;return typeof n=="string"||typeof n=="symbol"?n:Object.is((r=n==null?void 0:n.valueOf)==null?void 0:r.call(n),-0)?"-0":String(n)}t.toKey=e})(KR)),KR}var WR={},YR={},fq;function G5e(){return fq||(fq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(e).join(",");const r=String(n);return r==="0"&&Object.is(Number(n),-0)?"-0":r}t.toString=e})(YR)),YR}var hq;function q8(){return hq||(hq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=G5e(),n=V8();function r(i){if(Array.isArray(i))return i.map(n.toKey);if(typeof i=="symbol")return[i];i=e.toString(i);const s=[],o=i.length;if(o===0)return s;let a=0,l="",c="",u=!1;for(i.charCodeAt(0)===46&&(s.push(""),a++);a<o;){const f=i[a];c?f==="\\"&&a+1<o?(a++,l+=i[a]):f===c?c="":l+=f:u?f==='"'||f==="'"?c=f:f==="]"?(u=!1,s.push(l),l=""):l+=f:f==="["?(u=!0,l&&(s.push(l),l="")):f==="."?l&&(s.push(l),l=""):l+=f,a++}return l&&s.push(l),s}t.toPath=r})(WR)),WR}var pq;function G8(){return pq||(pq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=q5e(),n=Aoe(),r=V8(),i=q8();function s(a,l,c){if(a==null)return c;switch(typeof l){case"string":{if(e.isUnsafeProperty(l))return c;const u=a[l];return u===void 0?n.isDeepKey(l)?s(a,i.toPath(l),c):c:u}case"number":case"symbol":{typeof l=="number"&&(l=r.toKey(l));const u=a[l];return u===void 0?c:u}default:{if(Array.isArray(l))return o(a,l,c);if(Object.is(l==null?void 0:l.valueOf(),-0)?l="-0":l=String(l),e.isUnsafeProperty(l))return c;const u=a[l];return u===void 0?c:u}}}function o(a,l,c){if(l.length===0)return c;let u=a;for(let f=0;f<l.length;f++){if(u==null||e.isUnsafeProperty(l[f]))return c;u=u[l[f]]}return u===void 0?c:u}t.get=s})(VR)),VR}var JR,mq;function K5e(){return mq||(mq=1,JR=G8().get),JR}var W5e=K5e();const pm=cs(W5e);var Y5e=4;function qf(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Y5e,n=10**e,r=Math.round(t*n)/n;return Object.is(r,-0)?0:r}function Vr(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.reduce((i,s,o)=>{var a=n[o-1];return typeof a=="string"?i+a+s:a!==void 0?i+qf(a)+s:i+s},"")}var ji=t=>t===0?0:t>0?1:-1,$a=t=>typeof t=="number"&&t!=+t,ud=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,bt=t=>(typeof t=="number"||t instanceof Number)&&!$a(t),_c=t=>bt(t)||typeof t=="string",J5e=0,Tw=t=>{var e=++J5e;return"".concat(t||"").concat(e)},_s=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!bt(e)&&typeof e!="string")return r;var s;if(ud(e)){if(n==null)return r;var o=e.indexOf("%");s=n*parseFloat(e.slice(0,o))/100}else s=+e;return $a(s)&&(s=r),i&&n!=null&&s>n&&(s=n),s},Toe=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},r=0;r<e;r++)if(!n[String(t[r])])n[String(t[r])]=!0;else return!0;return!1};function qn(t,e,n){return bt(t)&&bt(e)?qf(t+n*(e-t)):e}function koe(t,e,n){if(!(!t||!t.length))return t.find(r=>r&&(typeof e=="function"?e(r):pm(r,e))===n)}var Er=t=>t===null||typeof t>"u",I1=t=>Er(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function X5e(t){return t!=null}function P1(){}var Q5e=["type","size","sizeType"];function yM(){return yM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yM.apply(null,arguments)}function gq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yq(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gq(Object(n),!0).forEach(function(r){Z5e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Z5e(t,e,n){return(e=e3e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function e3e(t){var e=t3e(t,"string");return typeof e=="symbol"?e:e+""}function t3e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function n3e(t,e){if(t==null)return{};var n,r,i=r3e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function r3e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Coe={symbolCircle:H8,symbolCross:y5e,symbolDiamond:v5e,symbolSquare:b5e,symbolStar:A5e,symbolTriangle:T5e,symbolWye:C5e},i3e=Math.PI/180,s3e=t=>{var e="symbol".concat(I1(t));return Coe[e]||H8},o3e=(t,e,n)=>{if(e==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var r=18*i3e;return 1.25*t*t*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},a3e=(t,e)=>{Coe["symbol".concat(I1(t))]=e},Noe=t=>{var{type:e="circle",size:n=64,sizeType:r="area"}=t,i=n3e(t,Q5e),s=yq(yq({},i),{},{type:e,size:n,sizeType:r}),o="circle";typeof e=="string"&&(o=e);var a=()=>{var m=s3e(o),g=N5e().type(m).size(o3e(n,r,o)),x=g();if(x!==null)return x},{className:l,cx:c,cy:u}=s,f=Ps(s);return bt(c)&&bt(u)&&bt(n)?T.createElement("path",yM({},f,{className:Pn("recharts-symbols",l),transform:"translate(".concat(c,", ").concat(u,")"),d:a()})):null};Noe.registerSymbol=a3e;var _oe=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,K8=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(T.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{F8(i)&&(r[i]=(s=>n[i](n,s)))}),r},l3e=(t,e,n)=>r=>(t(e,n,r),null),w2=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var r=null;return Object.keys(t).forEach(i=>{var s=t[i];F8(i)&&typeof s=="function"&&(r||(r={}),r[i]=l3e(s,e,n))}),r};function xq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function c3e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xq(Object(n),!0).forEach(function(r){u3e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function u3e(t,e,n){return(e=d3e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d3e(t){var e=f3e(t,"string");return typeof e=="symbol"?e:e+""}function f3e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yi(t,e){var n=c3e({},t),r=e,i=Object.keys(e),s=i.reduce((o,a)=>(o[a]===void 0&&r[a]!==void 0&&(o[a]=r[a]),o),n);return s}var XR={},QR={},vq;function h3e(){return vq||(vq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){const i=new Map;for(let s=0;s<n.length;s++){const o=n[s],a=r(o);i.has(a)||i.set(a,o)}return Array.from(i.values())}t.uniqBy=e})(QR)),QR}var ZR={},bq;function Ioe(){return bq||(bq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(ZR)),ZR}var eO={},tO={},nO={},wq;function p3e(){return wq||(wq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})(nO)),nO}var Eq;function W8(){return Eq||(Eq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=p3e();function n(r){return r!=null&&typeof r!="function"&&e.isLength(r.length)}t.isArrayLike=n})(tO)),tO}var rO={},Sq;function m3e(){return Sq||(Sq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})(rO)),rO}var Aq;function g3e(){return Aq||(Aq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=W8(),n=m3e();function r(i){return n.isObjectLike(i)&&e.isArrayLike(i)}t.isArrayLikeObject=r})(eO)),eO}var iO={},sO={},Tq;function y3e(){return Tq||(Tq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=G8();function n(r){return function(i){return e.get(i,r)}}t.property=n})(sO)),sO}var oO={},aO={},lO={},cO={},kq;function Poe(){return kq||(kq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(cO)),cO}var uO={},Cq;function Roe(){return Cq||(Cq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})(uO)),uO}var dO={},Nq;function Ooe(){return Nq||(Nq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}t.eq=e})(dO)),dO}var _q;function x3e(){return _q||(_q=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Poe(),n=Roe(),r=Ooe();function i(u,f,m){return typeof m!="function"?i(u,f,()=>{}):s(u,f,function g(x,v,w,E,C,k){const O=m(x,v,w,E,C,k);return O!==void 0?!!O:s(x,v,g,k)},new Map)}function s(u,f,m,g){if(f===u)return!0;switch(typeof f){case"object":return o(u,f,m,g);case"function":return Object.keys(f).length>0?s(u,{...f},m,g):r.eq(u,f);default:return e.isObject(u)?typeof f=="string"?f==="":!0:r.eq(u,f)}}function o(u,f,m,g){if(f==null)return!0;if(Array.isArray(f))return l(u,f,m,g);if(f instanceof Map)return a(u,f,m,g);if(f instanceof Set)return c(u,f,m,g);const x=Object.keys(f);if(u==null||n.isPrimitive(u))return x.length===0;if(x.length===0)return!0;if(g!=null&&g.has(f))return g.get(f)===u;g==null||g.set(f,u);try{for(let v=0;v<x.length;v++){const w=x[v];if(!n.isPrimitive(u)&&!(w in u)||f[w]===void 0&&u[w]!==void 0||f[w]===null&&u[w]!==null||!m(u[w],f[w],w,u,f,g))return!1}return!0}finally{g==null||g.delete(f)}}function a(u,f,m,g){if(f.size===0)return!0;if(!(u instanceof Map))return!1;for(const[x,v]of f.entries()){const w=u.get(x);if(m(w,v,x,u,f,g)===!1)return!1}return!0}function l(u,f,m,g){if(f.length===0)return!0;if(!Array.isArray(u))return!1;const x=new Set;for(let v=0;v<f.length;v++){const w=f[v];let E=!1;for(let C=0;C<u.length;C++){if(x.has(C))continue;const k=u[C];let O=!1;if(m(k,w,v,u,f,g)&&(O=!0),O){x.add(C),E=!0;break}}if(!E)return!1}return!0}function c(u,f,m,g){return f.size===0?!0:u instanceof Set?l([...u],[...f],m,g):!1}t.isMatchWith=i,t.isSetMatch=c})(lO)),lO}var Iq;function Moe(){return Iq||(Iq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=x3e();function n(r,i){return e.isMatchWith(r,i,()=>{})}t.isMatch=n})(aO)),aO}var fO={},hO={},pO={},Pq;function v3e(){return Pq||(Pq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}t.getSymbols=e})(pO)),pO}var mO={},Rq;function Doe(){return Rq||(Rq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})(mO)),mO}var gO={},Oq;function Loe(){return Oq||(Oq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",s="[object Arguments]",o="[object Symbol]",a="[object Date]",l="[object Map]",c="[object Set]",u="[object Array]",f="[object Function]",m="[object ArrayBuffer]",g="[object Object]",x="[object Error]",v="[object DataView]",w="[object Uint8Array]",E="[object Uint8ClampedArray]",C="[object Uint16Array]",k="[object Uint32Array]",O="[object BigUint64Array]",j="[object Int8Array]",R="[object Int16Array]",U="[object Int32Array]",V="[object BigInt64Array]",F="[object Float32Array]",$="[object Float64Array]";t.argumentsTag=s,t.arrayBufferTag=m,t.arrayTag=u,t.bigInt64ArrayTag=V,t.bigUint64ArrayTag=O,t.booleanTag=i,t.dataViewTag=v,t.dateTag=a,t.errorTag=x,t.float32ArrayTag=F,t.float64ArrayTag=$,t.functionTag=f,t.int16ArrayTag=R,t.int32ArrayTag=U,t.int8ArrayTag=j,t.mapTag=l,t.numberTag=r,t.objectTag=g,t.regexpTag=e,t.setTag=c,t.stringTag=n,t.symbolTag=o,t.uint16ArrayTag=C,t.uint32ArrayTag=k,t.uint8ArrayTag=w,t.uint8ClampedArrayTag=E})(gO)),gO}var yO={},Mq;function b3e(){return Mq||(Mq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(yO)),yO}var Dq;function Boe(){return Dq||(Dq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=v3e(),n=Doe(),r=Loe(),i=Roe(),s=b3e();function o(u,f){return a(u,void 0,u,new Map,f)}function a(u,f,m,g=new Map,x=void 0){const v=x==null?void 0:x(u,f,m,g);if(v!==void 0)return v;if(i.isPrimitive(u))return u;if(g.has(u))return g.get(u);if(Array.isArray(u)){const w=new Array(u.length);g.set(u,w);for(let E=0;E<u.length;E++)w[E]=a(u[E],E,m,g,x);return Object.hasOwn(u,"index")&&(w.index=u.index),Object.hasOwn(u,"input")&&(w.input=u.input),w}if(u instanceof Date)return new Date(u.getTime());if(u instanceof RegExp){const w=new RegExp(u.source,u.flags);return w.lastIndex=u.lastIndex,w}if(u instanceof Map){const w=new Map;g.set(u,w);for(const[E,C]of u)w.set(E,a(C,E,m,g,x));return w}if(u instanceof Set){const w=new Set;g.set(u,w);for(const E of u)w.add(a(E,void 0,m,g,x));return w}if(typeof ln<"u"&&ln.isBuffer(u))return u.subarray();if(s.isTypedArray(u)){const w=new(Object.getPrototypeOf(u)).constructor(u.length);g.set(u,w);for(let E=0;E<u.length;E++)w[E]=a(u[E],E,m,g,x);return w}if(u instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&u instanceof SharedArrayBuffer)return u.slice(0);if(u instanceof DataView){const w=new DataView(u.buffer.slice(0),u.byteOffset,u.byteLength);return g.set(u,w),l(w,u,m,g,x),w}if(typeof File<"u"&&u instanceof File){const w=new File([u],u.name,{type:u.type});return g.set(u,w),l(w,u,m,g,x),w}if(typeof Blob<"u"&&u instanceof Blob){const w=new Blob([u],{type:u.type});return g.set(u,w),l(w,u,m,g,x),w}if(u instanceof Error){const w=new u.constructor;return g.set(u,w),w.message=u.message,w.name=u.name,w.stack=u.stack,w.cause=u.cause,l(w,u,m,g,x),w}if(u instanceof Boolean){const w=new Boolean(u.valueOf());return g.set(u,w),l(w,u,m,g,x),w}if(u instanceof Number){const w=new Number(u.valueOf());return g.set(u,w),l(w,u,m,g,x),w}if(u instanceof String){const w=new String(u.valueOf());return g.set(u,w),l(w,u,m,g,x),w}if(typeof u=="object"&&c(u)){const w=Object.create(Object.getPrototypeOf(u));return g.set(u,w),l(w,u,m,g,x),w}return u}function l(u,f,m=u,g,x){const v=[...Object.keys(f),...e.getSymbols(f)];for(let w=0;w<v.length;w++){const E=v[w],C=Object.getOwnPropertyDescriptor(u,E);(C==null||C.writable)&&(u[E]=a(f[E],E,m,g,x))}}function c(u){switch(n.getTag(u)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=o,t.cloneDeepWithImpl=a,t.copyProperties=l})(hO)),hO}var Lq;function w3e(){return Lq||(Lq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Boe();function n(r){return e.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}t.cloneDeep=n})(fO)),fO}var Bq;function E3e(){return Bq||(Bq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Moe(),n=w3e();function r(i){return i=n.cloneDeep(i),s=>e.isMatch(s,i)}t.matches=r})(oO)),oO}var xO={},vO={},bO={},jq;function S3e(){return jq||(jq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Boe(),n=Loe();function r(i,s){return e.cloneDeepWith(i,(o,a,l,c)=>{const u=s==null?void 0:s(o,a,l,c);if(u!==void 0)return u;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const f=new i.constructor(i==null?void 0:i.valueOf());return e.copyProperties(f,i),f}case n.argumentsTag:{const f={};return e.copyProperties(f,i),f.length=i.length,f[Symbol.iterator]=i[Symbol.iterator],f}default:return}})}t.cloneDeepWith=r})(bO)),bO}var Uq;function A3e(){return Uq||(Uq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=S3e();function n(r){return e.cloneDeepWith(r)}t.cloneDeep=n})(vO)),vO}var wO={},EO={},Fq;function joe(){return Fq||(Fq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return e.test(r)}}t.isIndex=n})(EO)),EO}var SO={},$q;function T3e(){return $q||($q=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Doe();function n(r){return r!==null&&typeof r=="object"&&e.getTag(r)==="[object Arguments]"}t.isArguments=n})(SO)),SO}var zq;function k3e(){return zq||(zq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Aoe(),n=joe(),r=T3e(),i=q8();function s(o,a){let l;if(Array.isArray(a)?l=a:typeof a=="string"&&e.isDeepKey(a)&&(o==null?void 0:o[a])==null?l=i.toPath(a):l=[a],l.length===0)return!1;let c=o;for(let u=0;u<l.length;u++){const f=l[u];if((c==null||!Object.hasOwn(c,f))&&!((Array.isArray(c)||r.isArguments(c))&&n.isIndex(f)&&f<c.length))return!1;c=c[f]}return!0}t.has=s})(wO)),wO}var Hq;function C3e(){return Hq||(Hq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Moe(),n=V8(),r=A3e(),i=G8(),s=k3e();function o(a,l){switch(typeof a){case"object":{Object.is(a==null?void 0:a.valueOf(),-0)&&(a="-0");break}case"number":{a=n.toKey(a);break}}return l=r.cloneDeep(l),function(c){const u=i.get(c,a);return u===void 0?s.has(c,a):l===void 0?u===void 0:e.isMatch(u,l)}}t.matchesProperty=o})(xO)),xO}var Vq;function N3e(){return Vq||(Vq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Ioe(),n=y3e(),r=E3e(),i=C3e();function s(o){if(o==null)return e.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?i.matchesProperty(o[0],o[1]):r.matches(o);case"string":case"symbol":case"number":return n.property(o)}}t.iteratee=s})(iO)),iO}var qq;function _3e(){return qq||(qq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=h3e(),n=Ioe(),r=g3e(),i=N3e();function s(o,a=n.identity){return r.isArrayLikeObject(o)?e.uniqBy(Array.from(o),i.iteratee(a)):[]}t.uniqBy=s})(XR)),XR}var AO,Gq;function I3e(){return Gq||(Gq=1,AO=_3e().uniqBy),AO}var P3e=I3e();const Kq=cs(P3e);function R3e(t,e,n){return e===!0?Kq(t,n):typeof e=="function"?Kq(t,e):t}var TO={exports:{}},kO={},CO={exports:{}},NO={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wq;function O3e(){if(Wq)return NO;Wq=1;var t=bx();function e(f,m){return f===m&&(f!==0||1/f===1/m)||f!==f&&m!==m}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function a(f,m){var g=m(),x=r({inst:{value:g,getSnapshot:m}}),v=x[0].inst,w=x[1];return s(function(){v.value=g,v.getSnapshot=m,l(v)&&w({inst:v})},[f,g,m]),i(function(){return l(v)&&w({inst:v}),f(function(){l(v)&&w({inst:v})})},[f]),o(g),g}function l(f){var m=f.getSnapshot;f=f.value;try{var g=m();return!n(f,g)}catch{return!0}}function c(f,m){return m()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return NO.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:u,NO}var Yq;function M3e(){return Yq||(Yq=1,CO.exports=O3e()),CO.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jq;function D3e(){if(Jq)return kO;Jq=1;var t=bx(),e=M3e();function n(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,a=t.useMemo,l=t.useDebugValue;return kO.useSyncExternalStoreWithSelector=function(c,u,f,m,g){var x=s(null);if(x.current===null){var v={hasValue:!1,value:null};x.current=v}else v=x.current;x=a(function(){function E(R){if(!C){if(C=!0,k=R,R=m(R),g!==void 0&&v.hasValue){var U=v.value;if(g(U,R))return O=U}return O=R}if(U=O,r(k,R))return U;var V=m(R);return g!==void 0&&g(U,V)?(k=R,U):(k=R,O=V)}var C=!1,k,O,j=f===void 0?null:f;return[function(){return E(u())},j===null?void 0:function(){return E(j())}]},[u,f,m,g]);var w=i(c,x[0],x[1]);return o(function(){v.hasValue=!0,v.value=w},[w]),l(w),w},kO}var Xq;function L3e(){return Xq||(Xq=1,TO.exports=D3e()),TO.exports}var B3e=L3e(),Y8=T.createContext(null),j3e=t=>t,_r=()=>{var t=T.useContext(Y8);return t?t.store.dispatch:j3e},lT=()=>{},U3e=()=>lT,F3e=(t,e)=>t===e;function Pt(t){var e=T.useContext(Y8);return B3e.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:U3e,e?e.store.getState:lT,e?e.store.getState:lT,e?t:lT,F3e)}function $3e(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function z3e(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function H3e(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var Qq=t=>Array.isArray(t)?t:[t];function V3e(t){const e=Array.isArray(t[0])?t[0]:t;return H3e(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function q3e(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}var G3e=class{constructor(t){this.value=t}deref(){return this.value}},K3e=typeof WeakRef<"u"?WeakRef:G3e,W3e=0,Zq=1;function ZS(){return{s:W3e,v:void 0,o:null,p:null}}function Uoe(t,e={}){let n=ZS();const{resultEqualityCheck:r}=e;let i,s=0;function o(){var f;let a=n;const{length:l}=arguments;for(let m=0,g=l;m<g;m++){const x=arguments[m];if(typeof x=="function"||typeof x=="object"&&x!==null){let v=a.o;v===null&&(a.o=v=new WeakMap);const w=v.get(x);w===void 0?(a=ZS(),v.set(x,a)):a=w}else{let v=a.p;v===null&&(a.p=v=new Map);const w=v.get(x);w===void 0?(a=ZS(),v.set(x,a)):a=w}}const c=a;let u;if(a.s===Zq)u=a.v;else if(u=t.apply(null,arguments),s++,r){const m=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;m!=null&&r(m,u)&&(u=m,s!==0&&s--),i=typeof u=="object"&&u!==null||typeof u=="function"?new K3e(u):u}return c.s=Zq,c.v=u,u}return o.clearCache=()=>{n=ZS(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function Y3e(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let s=0,o=0,a,l={},c=i.pop();typeof c=="object"&&(l=c,c=i.pop()),$3e(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);const u={...n,...l},{memoize:f,memoizeOptions:m=[],argsMemoize:g=Uoe,argsMemoizeOptions:x=[]}=u,v=Qq(m),w=Qq(x),E=V3e(i),C=f(function(){return s++,c.apply(null,arguments)},...v),k=g(function(){o++;const j=q3e(E,arguments);return a=C.apply(null,j),a},...w);return Object.assign(k,{resultFunc:c,memoizedResultFunc:C,dependencies:E,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:g})};return Object.assign(r,{withTypes:()=>r}),r}var Me=Y3e(Uoe),J3e=Object.assign((t,e=Me)=>{z3e(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(s=>t[s]);return e(r,(...s)=>s.reduce((o,a,l)=>(o[n[l]]=a,o),{}))},{withTypes:()=>J3e}),_O={},IO={},PO={},eG;function X3e(){return eG||(eG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,s)=>{if(r!==i){const o=e(r),a=e(i);if(o===a&&o===0){if(r<i)return s==="desc"?1:-1;if(r>i)return s==="desc"?-1:1}return s==="desc"?a-o:o-a}return 0};t.compareValues=n})(PO)),PO}var RO={},OO={},tG;function Foe(){return tG||(tG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(OO)),OO}var nG;function Q3e(){return nG||(nG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Foe(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,o){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||e.isSymbol(s)?!0:typeof s=="string"&&(r.test(s)||!n.test(s))||o!=null&&Object.hasOwn(o,s)}t.isKey=i})(RO)),RO}var rG;function Z3e(){return rG||(rG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=X3e(),n=Q3e(),r=q8();function i(s,o,a,l){if(s==null)return[];a=l?void 0:a,Array.isArray(s)||(s=Object.values(s)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(a)||(a=a==null?[]:[a]),a=a.map(g=>String(g));const c=(g,x)=>{let v=g;for(let w=0;w<x.length&&v!=null;++w)v=v[x[w]];return v},u=(g,x)=>x==null||g==null?x:typeof g=="object"&&"key"in g?Object.hasOwn(x,g.key)?x[g.key]:c(x,g.path):typeof g=="function"?g(x):Array.isArray(g)?c(x,g):typeof x=="object"?x[g]:x,f=o.map(g=>(Array.isArray(g)&&g.length===1&&(g=g[0]),g==null||typeof g=="function"||Array.isArray(g)||n.isKey(g)?g:{key:g,path:r.toPath(g)}));return s.map(g=>({original:g,criteria:f.map(x=>u(x,g))})).slice().sort((g,x)=>{for(let v=0;v<f.length;v++){const w=e.compareValues(g.criteria[v],x.criteria[v],a[v]);if(w!==0)return w}return 0}).map(g=>g.original)}t.orderBy=i})(IO)),IO}var MO={},iG;function e4e(){return iG||(iG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r=1){const i=[],s=Math.floor(r),o=(a,l)=>{for(let c=0;c<a.length;c++){const u=a[c];Array.isArray(u)&&l<s?o(u,l+1):i.push(u)}};return o(n,0),i}t.flatten=e})(MO)),MO}var DO={},sG;function $oe(){return sG||(sG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=joe(),n=W8(),r=Poe(),i=Ooe();function s(o,a,l){return r.isObject(l)&&(typeof a=="number"&&n.isArrayLike(l)&&e.isIndex(a)&&a<l.length||typeof a=="string"&&a in l)?i.eq(l[a],o):!1}t.isIterateeCall=s})(DO)),DO}var oG;function t4e(){return oG||(oG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Z3e(),n=e4e(),r=$oe();function i(s,...o){const a=o.length;return a>1&&r.isIterateeCall(s,o[0],o[1])?o=[]:a>2&&r.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),e.orderBy(s,n.flatten(o),["asc"])}t.sortBy=i})(_O)),_O}var LO,aG;function n4e(){return aG||(aG=1,LO=t4e().sortBy),LO}var r4e=n4e();const E2=cs(r4e);var zoe=t=>t.legend.settings,i4e=t=>t.legend.size,s4e=t=>t.legend.payload;Me([s4e,zoe],(t,e)=>{var{itemSorter:n}=e,r=t.flat(1);return n?E2(r,n):r});var eA=1;function o4e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=T.useState({height:0,left:0,top:0,width:0}),r=T.useCallback(i=>{if(i!=null){var s=i.getBoundingClientRect(),o={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(o.height-e.height)>eA||Math.abs(o.left-e.left)>eA||Math.abs(o.top-e.top)>eA||Math.abs(o.width-e.width)>eA)&&n({height:o.height,left:o.left,top:o.top,width:o.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,r]}function Zi(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var a4e=typeof Symbol=="function"&&Symbol.observable||"@@observable",lG=a4e,BO=()=>Math.random().toString(36).substring(7).split("").join("."),l4e={INIT:`@@redux/INIT${BO()}`,REPLACE:`@@redux/REPLACE${BO()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${BO()}`},sk=l4e;function J8(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function Hoe(t,e,n){if(typeof t!="function")throw new Error(Zi(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Zi(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Zi(1));return n(Hoe)(t,e)}let r=t,i=e,s=new Map,o=s,a=0,l=!1;function c(){o===s&&(o=new Map,s.forEach((w,E)=>{o.set(E,w)}))}function u(){if(l)throw new Error(Zi(3));return i}function f(w){if(typeof w!="function")throw new Error(Zi(4));if(l)throw new Error(Zi(5));let E=!0;c();const C=a++;return o.set(C,w),function(){if(E){if(l)throw new Error(Zi(6));E=!1,c(),o.delete(C),s=null}}}function m(w){if(!J8(w))throw new Error(Zi(7));if(typeof w.type>"u")throw new Error(Zi(8));if(typeof w.type!="string")throw new Error(Zi(17));if(l)throw new Error(Zi(9));try{l=!0,i=r(i,w)}finally{l=!1}return(s=o).forEach(C=>{C()}),w}function g(w){if(typeof w!="function")throw new Error(Zi(10));r=w,m({type:sk.REPLACE})}function x(){const w=f;return{subscribe(E){if(typeof E!="object"||E===null)throw new Error(Zi(11));function C(){const O=E;O.next&&O.next(u())}return C(),{unsubscribe:w(C)}},[lG](){return this}}}return m({type:sk.INIT}),{dispatch:m,subscribe:f,getState:u,replaceReducer:g,[lG]:x}}function c4e(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:sk.INIT})>"u")throw new Error(Zi(12));if(typeof n(void 0,{type:sk.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Zi(13))})}function Voe(t){const e=Object.keys(t),n={};for(let s=0;s<e.length;s++){const o=e[s];typeof t[o]=="function"&&(n[o]=t[o])}const r=Object.keys(n);let i;try{c4e(n)}catch(s){i=s}return function(o={},a){if(i)throw i;let l=!1;const c={};for(let u=0;u<r.length;u++){const f=r[u],m=n[f],g=o[f],x=m(g,a);if(typeof x>"u")throw a&&a.type,new Error(Zi(14));c[f]=x,l=l||x!==g}return l=l||r.length!==Object.keys(o).length,l?c:o}}function ok(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function u4e(...t){return e=>(n,r)=>{const i=e(n,r);let s=()=>{throw new Error(Zi(15))};const o={getState:i.getState,dispatch:(l,...c)=>s(l,...c)},a=t.map(l=>l(o));return s=ok(...a)(i.dispatch),{...i,dispatch:s}}}function qoe(t){return J8(t)&&"type"in t&&typeof t.type=="string"}var Goe=Symbol.for("immer-nothing"),cG=Symbol.for("immer-draftable"),Ks=Symbol.for("immer-state");function pl(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var qo=Object,ax=qo.getPrototypeOf,ak="constructor",S2="prototype",xM="configurable",lk="enumerable",cT="writable",kw="value",dd=t=>!!t&&!!t[Ks];function Nl(t){var e;return t?Koe(t)||A2(t)||!!t[cG]||!!((e=t[ak])!=null&&e[cG])||T2(t)||k2(t):!1}var d4e=qo[S2][ak].toString(),uG=new WeakMap;function Koe(t){if(!t||!X8(t))return!1;const e=ax(t);if(e===null||e===qo[S2])return!0;const n=qo.hasOwnProperty.call(e,ak)&&e[ak];if(n===Object)return!0;if(!sg(n))return!1;let r=uG.get(n);return r===void 0&&(r=Function.toString.call(n),uG.set(n,r)),r===d4e}function R1(t,e,n=!0){O1(t)===0?(n?Reflect.ownKeys(t):qo.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function O1(t){const e=t[Ks];return e?e.type_:A2(t)?1:T2(t)?2:k2(t)?3:0}var dG=(t,e,n=O1(t))=>n===2?t.has(e):qo[S2].hasOwnProperty.call(t,e),vM=(t,e,n=O1(t))=>n===2?t.get(e):t[e],ck=(t,e,n,r=O1(t))=>{r===2?t.set(e,n):r===3?t.add(n):t[e]=n};function f4e(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var A2=Array.isArray,T2=t=>t instanceof Map,k2=t=>t instanceof Set,X8=t=>typeof t=="object",sg=t=>typeof t=="function",jO=t=>typeof t=="boolean";function h4e(t){const e=+t;return Number.isInteger(e)&&String(e)===t}var wu=t=>t.copy_||t.base_,Q8=t=>t.modified_?t.copy_:t.base_;function bM(t,e){if(T2(t))return new Map(t);if(k2(t))return new Set(t);if(A2(t))return Array[S2].slice.call(t);const n=Koe(t);if(e===!0||e==="class_only"&&!n){const r=qo.getOwnPropertyDescriptors(t);delete r[Ks];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a[cT]===!1&&(a[cT]=!0,a[xM]=!0),(a.get||a.set)&&(r[o]={[xM]:!0,[cT]:!0,[lk]:a[lk],[kw]:t[o]})}return qo.create(ax(t),r)}else{const r=ax(t);if(r!==null&&n)return{...t};const i=qo.create(r);return qo.assign(i,t)}}function Z8(t,e=!1){return C2(t)||dd(t)||!Nl(t)||(O1(t)>1&&qo.defineProperties(t,{set:tA,add:tA,clear:tA,delete:tA}),qo.freeze(t),e&&R1(t,(n,r)=>{Z8(r,!0)},!1)),t}function p4e(){pl(2)}var tA={[kw]:p4e};function C2(t){return t===null||!X8(t)?!0:qo.isFrozen(t)}var uk="MapSet",wM="Patches",fG="ArrayMethods",Woe={};function mm(t){const e=Woe[t];return e||pl(0,t),e}var hG=t=>!!Woe[t],Cw,Yoe=()=>Cw,m4e=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:hG(uk)?mm(uk):void 0,arrayMethodsPlugin_:hG(fG)?mm(fG):void 0});function pG(t,e){e&&(t.patchPlugin_=mm(wM),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function EM(t){SM(t),t.drafts_.forEach(g4e),t.drafts_=null}function SM(t){t===Cw&&(Cw=t.parent_)}var mG=t=>Cw=m4e(Cw,t);function g4e(t){const e=t[Ks];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function gG(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];if(t!==void 0&&t!==n){n[Ks].modified_&&(EM(e),pl(4)),Nl(t)&&(t=yG(e,t));const{patchPlugin_:i}=e;i&&i.generateReplacementPatches_(n[Ks].base_,t,e)}else t=yG(e,n);return y4e(e,t,!0),EM(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==Goe?t:void 0}function yG(t,e){if(C2(e))return e;const n=e[Ks];if(!n)return e6(e,t.handledSet_,t);if(!N2(n,t))return e;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(t);Qoe(n,t)}return n.copy_}function y4e(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&Z8(e,n)}function Joe(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var N2=(t,e)=>t.scope_===e,x4e=[];function Xoe(t,e,n,r){const i=wu(t),s=t.type_;if(r!==void 0&&vM(i,r,s)===e){ck(i,r,n,s);return}if(!t.draftLocations_){const a=t.draftLocations_=new Map;R1(i,(l,c)=>{if(dd(c)){const u=a.get(c)||[];u.push(l),a.set(c,u)}})}const o=t.draftLocations_.get(e)??x4e;for(const a of o)ck(i,a,n,s)}function v4e(t,e,n){t.callbacks_.push(function(i){var a;const s=e;if(!s||!N2(s,i))return;(a=i.mapSetPlugin_)==null||a.fixSetContents(s);const o=Q8(s);Xoe(t,s.draft_??s,o,n),Qoe(s,i)})}function Qoe(t,e){var r;if(t.modified_&&!t.finalized_&&(t.type_===3||t.type_===1&&t.allIndicesReassigned_||(((r=t.assigned_)==null?void 0:r.size)??0)>0)){const{patchPlugin_:i}=e;if(i){const s=i.getPath(t);s&&i.generatePatches_(t,s,e)}Joe(t)}}function b4e(t,e,n){const{scope_:r}=t;if(dd(n)){const i=n[Ks];N2(i,r)&&i.callbacks_.push(function(){uT(t);const o=Q8(i);Xoe(t,n,o,e)})}else Nl(n)&&t.callbacks_.push(function(){const s=wu(t);vM(s,e,t.type_)===n&&r.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&e6(vM(t.copy_,e,t.type_),r.handledSet_,r)})}function e6(t,e,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||dd(t)||e.has(t)||!Nl(t)||C2(t)||(e.add(t),R1(t,(r,i)=>{if(dd(i)){const s=i[Ks];if(N2(s,n)){const o=Q8(s);ck(t,r,o,t.type_),Joe(s)}}else Nl(i)&&e6(i,e,n)})),t}function w4e(t,e){const n=A2(t),r={type_:n?1:0,scope_:e?e.scope_:Yoe(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=r,s=t6;n&&(i=[r],s=Nw);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,[a,r]}var t6={get(t,e){if(e===Ks)return t;let n=t.scope_.arrayMethodsPlugin_;const r=t.type_===1&&typeof e=="string";if(r&&n!=null&&n.isArrayOperationMethod(e))return n.createMethodInterceptor(t,e);const i=wu(t);if(!dG(i,e,t.type_))return E4e(t,i,e);const s=i[e];if(t.finalized_||!Nl(s)||r&&t.operationMethod&&(n!=null&&n.isMutatingArrayMethod(t.operationMethod))&&h4e(e))return s;if(s===UO(t.base_,e)){uT(t);const o=t.type_===1?+e:e,a=TM(t.scope_,s,t,o);return t.copy_[o]=a}return s},has(t,e){return e in wu(t)},ownKeys(t){return Reflect.ownKeys(wu(t))},set(t,e,n){const r=Zoe(wu(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=UO(wu(t),e),s=i==null?void 0:i[Ks];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_.set(e,!1),!0;if(f4e(n,i)&&(n!==void 0||dG(t.base_,e,t.type_)))return!0;uT(t),AM(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_.set(e,!0),b4e(t,e,n)),!0},deleteProperty(t,e){return uT(t),UO(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),AM(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=wu(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{[cT]:!0,[xM]:t.type_!==1||e!=="length",[lk]:r[lk],[kw]:n[e]}},defineProperty(){pl(11)},getPrototypeOf(t){return ax(t.base_)},setPrototypeOf(){pl(12)}},Nw={};R1(t6,(t,e)=>{Nw[t]=function(){const n=arguments;return n[0]=n[0][0],e.apply(this,n)}});Nw.deleteProperty=function(t,e){return Nw.set.call(this,t,e,void 0)};Nw.set=function(t,e,n){return t6.set.call(this,t[0],e,n,t[0])};function UO(t,e){const n=t[Ks];return(n?wu(n):t)[e]}function E4e(t,e,n){var i;const r=Zoe(e,n);return r?kw in r?r[kw]:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function Zoe(t,e){if(!(e in t))return;let n=ax(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=ax(n)}}function AM(t){t.modified_||(t.modified_=!0,t.parent_&&AM(t.parent_))}function uT(t){t.copy_||(t.assigned_=new Map,t.copy_=bM(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var S4e=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,r,i)=>{if(sg(n)&&!sg(r)){const o=r;r=n;const a=this;return function(c=o,...u){return a.produce(c,f=>r.call(this,f,...u))}}sg(r)||pl(6),i!==void 0&&!sg(i)&&pl(7);let s;if(Nl(n)){const o=mG(this),a=TM(o,n,void 0);let l=!0;try{s=r(a),l=!1}finally{l?EM(o):SM(o)}return pG(o,i),gG(s,o)}else if(!n||!X8(n)){if(s=r(n),s===void 0&&(s=n),s===Goe&&(s=void 0),this.autoFreeze_&&Z8(s,!0),i){const o=[],a=[];mm(wM).generateReplacementPatches_(n,s,{patches_:o,inversePatches_:a}),i(o,a)}return s}else pl(1,n)},this.produceWithPatches=(n,r)=>{if(sg(n))return(a,...l)=>this.produceWithPatches(a,c=>n(c,...l));let i,s;return[this.produce(n,r,(a,l)=>{i=a,s=l}),i,s]},jO(e==null?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),jO(e==null?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),jO(e==null?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Nl(e)||pl(8),dd(e)&&(e=bl(e));const n=mG(this),r=TM(n,e,void 0);return r[Ks].isManual_=!0,SM(n),r}finishDraft(e,n){const r=e&&e[Ks];(!r||!r.isManual_)&&pl(9);const{scope_:i}=r;return pG(i,n),gG(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,n){let r;for(r=n.length-1;r>=0;r--){const s=n[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(n=n.slice(r+1));const i=mm(wM).applyPatches_;return dd(e)?i(e,n):this.produce(e,s=>i(s,n))}};function TM(t,e,n,r){const[i,s]=T2(e)?mm(uk).proxyMap_(e,n):k2(e)?mm(uk).proxySet_(e,n):w4e(e,n);return((n==null?void 0:n.scope_)??Yoe()).drafts_.push(i),s.callbacks_=(n==null?void 0:n.callbacks_)??[],s.key_=r,n&&r!==void 0?v4e(n,s,r):s.callbacks_.push(function(l){var u;(u=l.mapSetPlugin_)==null||u.fixSetContents(s);const{patchPlugin_:c}=l;s.modified_&&c&&c.generatePatches_(s,[],l)}),i}function bl(t){return dd(t)||pl(10,t),eae(t)}function eae(t){if(!Nl(t)||C2(t))return t;const e=t[Ks];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=bM(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=bM(t,!0);return R1(n,(i,s)=>{ck(n,i,eae(s))},r),e&&(e.finalized_=!1),n}var A4e=new S4e,tae=A4e.produce;function nae(t){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,t):i(s)}var T4e=nae(),k4e=nae,C4e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?ok:ok.apply(null,arguments)};function za(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(Wo(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>qoe(r)&&r.type===t,n}var rae=class _b extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,_b.prototype)}static get[Symbol.species](){return _b}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new _b(...e[0].concat(this)):new _b(...e.concat(this))}};function xG(t){return Nl(t)?tae(t,()=>{}):t}function nA(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function N4e(t){return typeof t=="boolean"}var _4e=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=e??{};let o=new rae;return n&&(N4e(n)?o.push(T4e):o.push(k4e(n.extraArgument))),o},iae="RTK_autoBatch",Tr=()=>t=>({payload:t,meta:{[iae]:!0}}),vG=t=>e=>{setTimeout(e,t)},sae=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,s=!1,o=!1;const a=new Set,l=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:vG(10):t.type==="callback"?t.queueNotification:vG(t.timeout),c=()=>{o=!1,s&&(s=!1,a.forEach(u=>u()))};return Object.assign({},r,{subscribe(u){const f=()=>i&&u(),m=r.subscribe(f);return a.add(u),()=>{m(),a.delete(u)}},dispatch(u){var f;try{return i=!((f=u==null?void 0:u.meta)!=null&&f[iae]),s=!i,s&&(o||(o=!0,l(c))),r.dispatch(u)}finally{i=!0}}})},I4e=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new rae(t);return r&&i.push(sae(typeof r=="object"?r:void 0)),i};function P4e(t){const e=_4e(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=t||{};let a;if(typeof n=="function")a=n;else if(J8(n))a=Voe(n);else throw new Error(Wo(1));let l;typeof r=="function"?l=r(e):l=e();let c=ok;i&&(c=C4e({trace:!1,...typeof i=="object"&&i}));const u=u4e(...l),f=I4e(u);let m=typeof o=="function"?o(f):f();const g=c(...m);return Hoe(a,s,g)}function oae(t){const e={},n=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(Wo(28));if(a in e)throw new Error(Wo(29));return e[a]=o,i},addAsyncThunk(s,o){return o.pending&&(e[s.pending.type]=o.pending),o.rejected&&(e[s.rejected.type]=o.rejected),o.fulfilled&&(e[s.fulfilled.type]=o.fulfilled),o.settled&&n.push({matcher:s.settled,reducer:o.settled}),i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return t(i),[e,n,r]}function R4e(t){return typeof t=="function"}function O4e(t,e){let[n,r,i]=oae(e),s;if(R4e(t))s=()=>xG(t());else{const a=xG(t);s=()=>a}function o(a=s(),l){let c=[n[l.type],...r.filter(({matcher:u})=>u(l)).map(({reducer:u})=>u)];return c.filter(u=>!!u).length===0&&(c=[i]),c.reduce((u,f)=>{if(f)if(dd(u)){const g=f(u,l);return g===void 0?u:g}else{if(Nl(u))return tae(u,m=>f(m,l));{const m=f(u,l);if(m===void 0){if(u===null)return u;throw Error("A case reducer on a non-draftable value must not return undefined")}return m}}return u},a)}return o.getInitialState=s,o}var M4e="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",D4e=(t=21)=>{let e="",n=t;for(;n--;)e+=M4e[Math.random()*64|0];return e},L4e=Symbol.for("rtk-slice-createasyncthunk");function B4e(t,e){return`${t}/${e}`}function j4e({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[L4e];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(Wo(11));const a=(typeof i.reducers=="function"?i.reducers(F4e()):i.reducers)||{},l=Object.keys(a),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(O,j){const R=typeof O=="string"?O:O.type;if(!R)throw new Error(Wo(12));if(R in c.sliceCaseReducersByType)throw new Error(Wo(13));return c.sliceCaseReducersByType[R]=j,u},addMatcher(O,j){return c.sliceMatchers.push({matcher:O,reducer:j}),u},exposeAction(O,j){return c.actionCreators[O]=j,u},exposeCaseReducer(O,j){return c.sliceCaseReducersByName[O]=j,u}};l.forEach(O=>{const j=a[O],R={reducerName:O,type:B4e(s,O),createNotation:typeof i.reducers=="function"};z4e(j)?V4e(R,j,u,e):$4e(R,j,u)});function f(){const[O={},j=[],R=void 0]=typeof i.extraReducers=="function"?oae(i.extraReducers):[i.extraReducers],U={...O,...c.sliceCaseReducersByType};return O4e(i.initialState,V=>{for(let F in U)V.addCase(F,U[F]);for(let F of c.sliceMatchers)V.addMatcher(F.matcher,F.reducer);for(let F of j)V.addMatcher(F.matcher,F.reducer);R&&V.addDefaultCase(R)})}const m=O=>O,g=new Map,x=new WeakMap;let v;function w(O,j){return v||(v=f()),v(O,j)}function E(){return v||(v=f()),v.getInitialState()}function C(O,j=!1){function R(V){let F=V[O];return typeof F>"u"&&j&&(F=nA(x,R,E)),F}function U(V=m){const F=nA(g,j,()=>new WeakMap);return nA(F,V,()=>{const $={};for(const[K,H]of Object.entries(i.selectors??{}))$[K]=U4e(H,V,()=>nA(x,V,E),j);return $})}return{reducerPath:O,getSelectors:U,get selectors(){return U(R)},selectSlice:R}}const k={name:s,reducer:w,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:E,...C(o),injectInto(O,{reducerPath:j,...R}={}){const U=j??o;return O.inject({reducerPath:U,reducer:w},R),{...k,...C(U,!0)}}};return k}}function U4e(t,e,n,r){function i(s,...o){let a=e(s);return typeof a>"u"&&r&&(a=n()),t(a,...o)}return i.unwrapped=t,i}var yo=j4e();function F4e(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function $4e({type:t,reducerName:e,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!H4e(r))throw new Error(Wo(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(t,s).exposeCaseReducer(e,s).exposeAction(e,o?za(t,o):za(t))}function z4e(t){return t._reducerDefinitionType==="asyncThunk"}function H4e(t){return t._reducerDefinitionType==="reducerWithPrepare"}function V4e({type:t,reducerName:e},n,r,i){if(!i)throw new Error(Wo(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:l,settled:c,options:u}=n,f=i(t,s,u);r.exposeAction(e,f),o&&r.addCase(f.fulfilled,o),a&&r.addCase(f.pending,a),l&&r.addCase(f.rejected,l),c&&r.addMatcher(f.settled,c),r.exposeCaseReducer(e,{fulfilled:o||rA,pending:a||rA,rejected:l||rA,settled:c||rA})}function rA(){}var q4e="task",aae="listener",lae="completed",n6="cancelled",G4e=`task-${n6}`,K4e=`task-${lae}`,kM=`${aae}-${n6}`,W4e=`${aae}-${lae}`,_2=class{constructor(t){Se(this,"name","TaskAbortError");Se(this,"message");this.code=t,this.message=`${q4e} ${n6} (reason: ${t})`}},r6=(t,e)=>{if(typeof t!="function")throw new TypeError(Wo(32))},dk=()=>{},cae=(t,e=dk)=>(t.catch(e),t),uae=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),Xp=t=>{if(t.aborted)throw new _2(t.reason)};function dae(t,e){let n=dk;return new Promise((r,i)=>{const s=()=>i(new _2(t.reason));if(t.aborted){s();return}n=uae(t,s),e.finally(()=>n()).then(r,i)}).finally(()=>{n=dk})}var Y4e=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof _2?"cancelled":"rejected",error:n}}finally{e==null||e()}},fk=t=>e=>cae(dae(t,e).then(n=>(Xp(t),n))),fae=t=>{const e=fk(t);return n=>e(new Promise(r=>setTimeout(r,n)))},{assign:zg}=Object,bG={},I2="listenerMiddleware",J4e=(t,e)=>{const n=r=>uae(t,()=>r.abort(t.reason));return(r,i)=>{r6(r);const s=new AbortController;n(s);const o=Y4e(async()=>{Xp(t),Xp(s.signal);const a=await r({pause:fk(s.signal),delay:fae(s.signal),signal:s.signal});return Xp(s.signal),a},()=>s.abort(K4e));return i!=null&&i.autoJoin&&e.push(o.catch(dk)),{result:fk(t)(o),cancel(){s.abort(G4e)}}}},X4e=(t,e)=>{const n=async(r,i)=>{Xp(e);let s=()=>{};const a=[new Promise((l,c)=>{let u=t({predicate:r,effect:(f,m)=>{m.unsubscribe(),l([f,m.getState(),m.getOriginalState()])}});s=()=>{u(),c()}})];i!=null&&a.push(new Promise(l=>setTimeout(l,i,null)));try{const l=await dae(e,Promise.race(a));return Xp(e),l}finally{s()}};return(r,i)=>cae(n(r,i))},hae=t=>{let{type:e,actionCreator:n,matcher:r,predicate:i,effect:s}=t;if(e)i=za(e).match;else if(n)e=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(Wo(21));return r6(s),{predicate:i,type:e,effect:s}},pae=zg(t=>{const{type:e,predicate:n,effect:r}=hae(t);return{id:D4e(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Wo(22))}}},{withTypes:()=>pae}),wG=(t,e)=>{const{type:n,effect:r,predicate:i}=hae(e);return Array.from(t.values()).find(s=>(typeof n=="string"?s.type===n:s.predicate===i)&&s.effect===r)},CM=t=>{t.pending.forEach(e=>{e.abort(kM)})},Q4e=(t,e)=>()=>{for(const n of e.keys())CM(n);t.clear()},EG=(t,e,n)=>{try{t(e,n)}catch(r){setTimeout(()=>{throw r},0)}},mae=zg(za(`${I2}/add`),{withTypes:()=>mae}),Z4e=za(`${I2}/removeAll`),gae=zg(za(`${I2}/remove`),{withTypes:()=>gae}),eMe=(...t)=>{console.error(`${I2}/error`,...t)},M1=(t={})=>{const e=new Map,n=new Map,r=g=>{const x=n.get(g)??0;n.set(g,x+1)},i=g=>{const x=n.get(g)??1;x===1?n.delete(g):n.set(g,x-1)},{extra:s,onError:o=eMe}=t;r6(o);const a=g=>(g.unsubscribe=()=>e.delete(g.id),e.set(g.id,g),x=>{g.unsubscribe(),x!=null&&x.cancelActive&&CM(g)}),l=g=>{const x=wG(e,g)??pae(g);return a(x)};zg(l,{withTypes:()=>l});const c=g=>{const x=wG(e,g);return x&&(x.unsubscribe(),g.cancelActive&&CM(x)),!!x};zg(c,{withTypes:()=>c});const u=async(g,x,v,w)=>{const E=new AbortController,C=X4e(l,E.signal),k=[];try{g.pending.add(E),r(g),await Promise.resolve(g.effect(x,zg({},v,{getOriginalState:w,condition:(O,j)=>C(O,j).then(Boolean),take:C,delay:fae(E.signal),pause:fk(E.signal),extra:s,signal:E.signal,fork:J4e(E.signal,k),unsubscribe:g.unsubscribe,subscribe:()=>{e.set(g.id,g)},cancelActiveListeners:()=>{g.pending.forEach((O,j,R)=>{O!==E&&(O.abort(kM),R.delete(O))})},cancel:()=>{E.abort(kM),g.pending.delete(E)},throwIfCancelled:()=>{Xp(E.signal)}})))}catch(O){O instanceof _2||EG(o,O,{raisedBy:"effect"})}finally{await Promise.all(k),E.abort(W4e),i(g),g.pending.delete(E)}},f=Q4e(e,n);return{middleware:g=>x=>v=>{if(!qoe(v))return x(v);if(mae.match(v))return l(v.payload);if(Z4e.match(v)){f();return}if(gae.match(v))return c(v.payload);let w=g.getState();const E=()=>{if(w===bG)throw new Error(Wo(23));return w};let C;try{if(C=x(v),e.size>0){const k=g.getState(),O=Array.from(e.values());for(const j of O){let R=!1;try{R=j.predicate(v,k,w)}catch(U){R=!1,EG(o,U,{raisedBy:"predicate"})}R&&u(j,v,g,E)}}}finally{w=bG}return C},startListening:l,stopListening:c,clearListeners:f}};function Wo(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var tMe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},yae=yo({name:"chartLayout",initialState:tMe,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var n,r,i,s;t.margin.top=(n=e.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(r=e.payload.right)!==null&&r!==void 0?r:0,t.margin.bottom=(i=e.payload.bottom)!==null&&i!==void 0?i:0,t.margin.left=(s=e.payload.left)!==null&&s!==void 0?s:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:nMe,setLayout:rMe,setChartSize:iMe,setScale:sMe}=yae.actions,oMe=yae.reducer;function xae(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function ur(t){return Number.isFinite(t)}function Ic(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function SG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SG(Object(n),!0).forEach(function(r){aMe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function aMe(t,e,n){return(e=lMe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lMe(t){var e=cMe(t,"string");return typeof e=="symbol"?e:e+""}function cMe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Wn(t,e,n){return Er(t)||Er(e)?n:_c(e)?pm(t,e,n):typeof e=="function"?e(t):n}var uMe=(t,e,n)=>{if(e&&n){var{width:r,height:i}=n,{align:s,verticalAlign:o,layout:a}=e;if((a==="vertical"||a==="horizontal"&&o==="middle")&&s!=="center"&&bt(t[s]))return vg(vg({},t),{},{[s]:t[s]+(r||0)});if((a==="horizontal"||a==="vertical"&&s==="center")&&o!=="middle"&&bt(t[o]))return vg(vg({},t),{},{[o]:t[o]+(i||0)})}return t},Lc=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",vae=(t,e,n,r)=>{if(r)return t.map(a=>a.coordinate);var i,s,o=t.map(a=>(a.coordinate===e&&(i=!0),a.coordinate===n&&(s=!0),a.coordinate));return i||o.push(e),s||o.push(n),o},bae=(t,e,n)=>{if(!t)return null;var{duplicateDomain:r,type:i,range:s,scale:o,realScaleType:a,isCategorical:l,categoricalDomain:c,tickCount:u,ticks:f,niceTicks:m,axisType:g}=t;if(!o)return null;var x=a==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,v=i==="category"&&o.bandwidth?o.bandwidth()/x:0;if(v=g==="angleAxis"&&s&&s.length>=2?ji(s[0]-s[1])*2*v:v,f||m){var w=(f||m||[]).map((E,C)=>{var k=r?r.indexOf(E):E;return{coordinate:o(k)+v,value:E,offset:v,index:C}});return w.filter(E=>!$a(E.coordinate))}return l&&c?c.map((E,C)=>({coordinate:o(E)+v,value:E,index:C,offset:v})):o.ticks&&u!=null?o.ticks(u).map((E,C)=>({coordinate:o(E)+v,value:E,offset:v,index:C})):o.domain().map((E,C)=>({coordinate:o(E)+v,value:r?r[E]:E,index:C,offset:v}))},AG=1e-4,dMe=t=>{var e=t.domain();if(!(!e||e.length<=2)){var n=e.length,r=t.range(),i=Math.min(r[0],r[1])-AG,s=Math.max(r[0],r[1])+AG,o=t(e[0]),a=t(e[n-1]);(o<i||o>s||a<i||a>s)&&t.domain([e[0],e[n-1]])}},fMe=(t,e)=>{if(!e||e.length!==2||!bt(e[0])||!bt(e[1]))return t;var n=Math.min(e[0],e[1]),r=Math.max(e[0],e[1]),i=[t[0],t[1]];return(!bt(t[0])||t[0]<n)&&(i[0]=n),(!bt(t[1])||t[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},hMe=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var s=0,o=0,a=0;a<n;++a){var l=t[a],c=l==null?void 0:l[i];if(c!=null){var u=c[1],f=c[0],m=$a(u)?f:u;m>=0?(c[0]=s,c[1]=s+m,s=u):(c[0]=o,c[1]=o+m,o=u)}}}},pMe=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var s=0,o=0;o<n;++o){var a=t[o],l=a==null?void 0:a[i];if(l!=null){var c=$a(l[1])?l[0]:l[1];c>=0?(l[0]=s,l[1]=s+c,s=l[1]):(l[0]=0,l[1]=0)}}}},mMe={sign:hMe,expand:z5e,none:hm,silhouette:H5e,wiggle:V5e,positive:pMe},gMe=(t,e,n)=>{var r,i=(r=mMe[n])!==null&&r!==void 0?r:hm,s=$5e().keys(e).value((a,l)=>Number(Wn(a,l,0))).order(gM).offset(i),o=s(t);return o.forEach((a,l)=>{a.forEach((c,u)=>{var f=Wn(t[u],e[l],0);Array.isArray(f)&&f.length===2&&bt(f[0])&&bt(f[1])&&(c[0]=f[0],c[1]=f[1])})}),o};function wae(t){return t==null?void 0:String(t)}function hk(t){var{axis:e,ticks:n,bandSize:r,entry:i,index:s,dataKey:o}=t;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Er(i[e.dataKey])){var a=koe(n,"value",i[e.dataKey]);if(a)return a.coordinate+r/2}return n[s]?n[s].coordinate+r/2:null}var l=Wn(i,Er(o)?e.dataKey:o);return Er(l)?null:e.scale(l)}var TG=t=>{var{axis:e,ticks:n,offset:r,bandSize:i,entry:s,index:o}=t;if(e.type==="category")return n[o]?n[o].coordinate+r:null;var a=Wn(s,e.dataKey,e.scale.domain()[o]);return Er(a)?null:e.scale(a)-i/2+r},yMe=t=>{var{numericAxis:e}=t,n=e.scale.domain();if(e.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},xMe=t=>{var e=t.flat(2).filter(bt);return[Math.min(...e),Math.max(...e)]},vMe=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],bMe=(t,e,n)=>{if(t!=null)return vMe(Object.keys(t).reduce((r,i)=>{var s=t[i];if(!s)return r;var{stackedData:o}=s,a=o.reduce((l,c)=>{var u=xae(c,e,n),f=xMe(u);return!ur(f[0])||!ur(f[1])?l:[Math.min(l[0],f[0]),Math.max(l[1],f[1])]},[1/0,-1/0]);return[Math.min(a[0],r[0]),Math.max(a[1],r[1])]},[1/0,-1/0]))},kG=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,CG=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,ih=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();if(!n||r>0)return r}if(t&&e&&e.length>=2){for(var i=E2(e,u=>u.coordinate),s=1/0,o=1,a=i.length;o<a;o++){var l=i[o],c=i[o-1];s=Math.min(((l==null?void 0:l.coordinate)||0)-((c==null?void 0:c.coordinate)||0),s)}return s===1/0?0:s}return n?void 0:0};function NG(t){var{tooltipEntrySettings:e,dataKey:n,payload:r,value:i,name:s}=t;return vg(vg({},e),{},{dataKey:n,payload:r,value:i,name:s})}function hh(t,e){if(t)return String(t);if(typeof e=="string")return e}var wMe=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},EMe=(t,e)=>e==="centric"?t.angle:t.radius,Ed=t=>t.layout.width,Sd=t=>t.layout.height,SMe=t=>t.layout.scale,Eae=t=>t.layout.margin,P2=Me(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),R2=Me(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),Sae="data-recharts-item-index",Aae="data-recharts-item-id",D1=60;function _G(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function iA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_G(Object(n),!0).forEach(function(r){AMe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_G(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function AMe(t,e,n){return(e=TMe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function TMe(t){var e=kMe(t,"string");return typeof e=="symbol"?e:e+""}function kMe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var CMe=t=>t.brush.height;function NMe(t){var e=R2(t);return e.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:D1;return n+i}return n},0)}function _Me(t){var e=R2(t);return e.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:D1;return n+i}return n},0)}function IMe(t){var e=P2(t);return e.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function PMe(t){var e=P2(t);return e.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var Si=Me([Ed,Sd,Eae,CMe,NMe,_Me,IMe,PMe,zoe,i4e],(t,e,n,r,i,s,o,a,l,c)=>{var u={left:(n.left||0)+i,right:(n.right||0)+s},f={top:(n.top||0)+o,bottom:(n.bottom||0)+a},m=iA(iA({},f),u),g=m.bottom;m.bottom+=r,m=uMe(m,l,c);var x=t-m.left-m.right,v=e-m.top-m.bottom;return iA(iA({brushBottom:g},m),{},{width:Math.max(x,0),height:Math.max(v,0)})}),RMe=Me(Si,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),i6=Me(Ed,Sd,(t,e)=>({x:0,y:0,width:t,height:e})),OMe=T.createContext(null),Fi=()=>T.useContext(OMe)!=null,O2=t=>t.brush,M2=Me([O2,Si,Eae],(t,e,n)=>({height:t.height,x:bt(t.x)?t.x:e.left,y:bt(t.y)?t.y:e.top+e.height+e.brushBottom-((n==null?void 0:n.bottom)||0),width:bt(t.width)?t.width:e.width})),FO={},$O={},zO={},IG;function MMe(){return IG||(IG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r,{signal:i,edges:s}={}){let o,a=null;const l=s!=null&&s.includes("leading"),c=s==null||s.includes("trailing"),u=()=>{a!==null&&(n.apply(o,a),o=void 0,a=null)},f=()=>{c&&u(),v()};let m=null;const g=()=>{m!=null&&clearTimeout(m),m=setTimeout(()=>{m=null,f()},r)},x=()=>{m!==null&&(clearTimeout(m),m=null)},v=()=>{x(),o=void 0,a=null},w=()=>{u()},E=function(...C){if(i!=null&&i.aborted)return;o=this,a=C;const k=m==null;g(),l&&k&&u()};return E.schedule=g,E.cancel=v,E.flush=w,i==null||i.addEventListener("abort",v,{once:!0}),E}t.debounce=e})(zO)),zO}var PG;function DMe(){return PG||(PG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=MMe();function n(r,i=0,s={}){typeof s!="object"&&(s={});const{leading:o=!1,trailing:a=!0,maxWait:l}=s,c=Array(2);o&&(c[0]="leading"),a&&(c[1]="trailing");let u,f=null;const m=e.debounce(function(...v){u=r.apply(this,v),f=null},i,{edges:c}),g=function(...v){return l!=null&&(f===null&&(f=Date.now()),Date.now()-f>=l)?(u=r.apply(this,v),f=Date.now(),m.cancel(),m.schedule(),u):(m.apply(this,v),u)},x=()=>(m.flush(),u);return g.cancel=m.cancel,g.flush=x,g}t.debounce=n})($O)),$O}var RG;function LMe(){return RG||(RG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=DMe();function n(r,i=0,s={}){const{leading:o=!0,trailing:a=!0}=s;return e.debounce(r,i,{leading:o,maxWait:i,trailing:a})}t.throttle=n})(FO)),FO}var HO,OG;function BMe(){return OG||(OG=1,HO=LMe().throttle),HO}var jMe=BMe();const UMe=cs(jMe);var pk=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var o=0;console.warn(n.replace(/%s/g,()=>i[o++]))}},Tae=(t,e,n)=>{var{width:r="100%",height:i="100%",aspect:s,maxHeight:o}=n,a=ud(r)?t:Number(r),l=ud(i)?e:Number(i);return s&&s>0&&(a?l=a/s:l&&(a=l*s),o&&l!=null&&l>o&&(l=o)),{calculatedWidth:a,calculatedHeight:l}},FMe={width:0,height:0,overflow:"visible"},$Me={width:0,overflowX:"visible"},zMe={height:0,overflowY:"visible"},HMe={},VMe=t=>{var{width:e,height:n}=t,r=ud(e),i=ud(n);return r&&i?FMe:r?$Me:i?zMe:HMe};function qMe(t){var{width:e,height:n,aspect:r}=t,i=e,s=n;return i===void 0&&s===void 0?(i="100%",s="100%"):i===void 0?i=r&&r>0?void 0:"100%":s===void 0&&(s=r&&r>0?void 0:"100%"),{width:i,height:s}}function NM(){return NM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},NM.apply(null,arguments)}function MG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function DG(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MG(Object(n),!0).forEach(function(r){GMe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function GMe(t,e,n){return(e=KMe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function KMe(t){var e=WMe(t,"string");return typeof e=="symbol"?e:e+""}function WMe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var kae=T.createContext({width:-1,height:-1});function YMe(t){return Ic(t.width)&&Ic(t.height)}function Cae(t){var{children:e,width:n,height:r}=t,i=T.useMemo(()=>({width:n,height:r}),[n,r]);return YMe(i)?T.createElement(kae.Provider,{value:i},e):null}var s6=()=>T.useContext(kae),JMe=T.forwardRef((t,e)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i,height:s,minWidth:o=0,minHeight:a,maxHeight:l,children:c,debounce:u=0,id:f,className:m,onResize:g,style:x={}}=t,v=T.useRef(null),w=T.useRef();w.current=g,T.useImperativeHandle(e,()=>v.current);var[E,C]=T.useState({containerWidth:r.width,containerHeight:r.height}),k=T.useCallback((V,F)=>{C($=>{var K=Math.round(V),H=Math.round(F);return $.containerWidth===K&&$.containerHeight===H?$:{containerWidth:K,containerHeight:H}})},[]);T.useEffect(()=>{if(v.current==null||typeof ResizeObserver>"u")return P1;var V=H=>{var B,{width:A,height:I}=H[0].contentRect;k(A,I),(B=w.current)===null||B===void 0||B.call(w,A,I)};u>0&&(V=UMe(V,u,{trailing:!0,leading:!1}));var F=new ResizeObserver(V),{width:$,height:K}=v.current.getBoundingClientRect();return k($,K),F.observe(v.current),()=>{F.disconnect()}},[k,u]);var{containerWidth:O,containerHeight:j}=E;pk(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:R,calculatedHeight:U}=Tae(O,j,{width:i,height:s,aspect:n,maxHeight:l});return pk(R!=null&&R>0||U!=null&&U>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,R,U,i,s,o,a,n),T.createElement("div",{id:f?"".concat(f):void 0,className:Pn("recharts-responsive-container",m),style:DG(DG({},x),{},{width:i,height:s,minWidth:o,minHeight:a,maxHeight:l}),ref:v},T.createElement("div",{style:VMe({width:i,height:s})},T.createElement(Cae,{width:R,height:U},c)))}),_w=T.forwardRef((t,e)=>{var n=s6();if(Ic(n.width)&&Ic(n.height))return t.children;var{width:r,height:i}=qMe({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:s,calculatedHeight:o}=Tae(void 0,void 0,{width:r,height:i,aspect:t.aspect,maxHeight:t.maxHeight});return bt(s)&&bt(o)?T.createElement(Cae,{width:s,height:o},t.children):T.createElement(JMe,NM({},t,{width:r,height:i,ref:e}))});function Nae(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var D2=()=>{var t,e=Fi(),n=Pt(RMe),r=Pt(M2),i=(t=Pt(O2))===null||t===void 0?void 0:t.padding;return!e||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},XMe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},_ae=()=>{var t;return(t=Pt(Si))!==null&&t!==void 0?t:XMe},Iae=()=>Pt(Ed),Pae=()=>Pt(Sd),An=t=>t.layout.layoutType,ph=()=>Pt(An),QMe=()=>{var t=ph();if(t==="horizontal"||t==="vertical")return t},ZMe=()=>{var t=ph();return t!==void 0},L2=t=>{var e=_r(),n=Fi(),{width:r,height:i}=t,s=s6(),o=r,a=i;return s&&(o=s.width>0?s.width:r,a=s.height>0?s.height:i),T.useEffect(()=>{!n&&Ic(o)&&Ic(a)&&e(iMe({width:o,height:a}))},[e,n,o,a]),null},Rae=Symbol.for("immer-nothing"),LG=Symbol.for("immer-draftable"),Xo=Symbol.for("immer-state");function ml(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Iw=Object.getPrototypeOf;function lx(t){return!!t&&!!t[Xo]}function gm(t){var e;return t?Oae(t)||Array.isArray(t)||!!t[LG]||!!((e=t.constructor)!=null&&e[LG])||L1(t)||j2(t):!1}var eDe=Object.prototype.constructor.toString(),BG=new WeakMap;function Oae(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let r=BG.get(n);return r===void 0&&(r=Function.toString.call(n),BG.set(n,r)),r===eDe}function mk(t,e,n=!0){B2(t)===0?(n?Reflect.ownKeys(t):Object.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function B2(t){const e=t[Xo];return e?e.type_:Array.isArray(t)?1:L1(t)?2:j2(t)?3:0}function _M(t,e){return B2(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function Mae(t,e,n){const r=B2(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function tDe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function L1(t){return t instanceof Map}function j2(t){return t instanceof Set}function ep(t){return t.copy_||t.base_}function IM(t,e){if(L1(t))return new Map(t);if(j2(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=Oae(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[Xo];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:t[o]})}return Object.create(Iw(t),r)}else{const r=Iw(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function o6(t,e=!1){return U2(t)||lx(t)||!gm(t)||(B2(t)>1&&Object.defineProperties(t,{set:sA,add:sA,clear:sA,delete:sA}),Object.freeze(t),e&&Object.values(t).forEach(n=>o6(n,!0))),t}function nDe(){ml(2)}var sA={value:nDe};function U2(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var rDe={};function ym(t){const e=rDe[t];return e||ml(0,t),e}var Pw;function Dae(){return Pw}function iDe(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function jG(t,e){e&&(ym("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function PM(t){RM(t),t.drafts_.forEach(sDe),t.drafts_=null}function RM(t){t===Pw&&(Pw=t.parent_)}function UG(t){return Pw=iDe(Pw,t)}function sDe(t){const e=t[Xo];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function FG(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[Xo].modified_&&(PM(e),ml(4)),gm(t)&&(t=gk(e,t),e.parent_||yk(e,t)),e.patches_&&ym("Patches").generateReplacementPatches_(n[Xo].base_,t,e.patches_,e.inversePatches_)):t=gk(e,n,[]),PM(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==Rae?t:void 0}function gk(t,e,n){if(U2(e))return e;const r=t.immer_.shouldUseStrictIteration(),i=e[Xo];if(!i)return mk(e,(s,o)=>$G(t,i,e,s,o,n),r),e;if(i.scope_!==t)return e;if(!i.modified_)return yk(t,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const s=i.copy_;let o=s,a=!1;i.type_===3&&(o=new Set(s),s.clear(),a=!0),mk(o,(l,c)=>$G(t,i,s,l,c,n,a),r),yk(t,s,!1),n&&t.patches_&&ym("Patches").generatePatches_(i,n,t.patches_,t.inversePatches_)}return i.copy_}function $G(t,e,n,r,i,s,o){if(i==null||typeof i!="object"&&!o)return;const a=U2(i);if(!(a&&!o)){if(lx(i)){const l=s&&e&&e.type_!==3&&!_M(e.assigned_,r)?s.concat(r):void 0,c=gk(t,i,l);if(Mae(n,r,c),lx(c))t.canAutoFreeze_=!1;else return}else o&&n.add(i);if(gm(i)&&!a){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[r]===i&&a)return;gk(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(L1(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&yk(t,i)}}}function yk(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&o6(e,n)}function oDe(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:Dae(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=a6;n&&(i=[r],s=Rw);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var a6={get(t,e){if(e===Xo)return t;const n=ep(t);if(!_M(n,e))return aDe(t,n,e);const r=n[e];return t.finalized_||!gm(r)?r:r===VO(t.base_,e)?(qO(t),t.copy_[e]=MM(r,t)):r},has(t,e){return e in ep(t)},ownKeys(t){return Reflect.ownKeys(ep(t))},set(t,e,n){const r=Lae(ep(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=VO(ep(t),e),s=i==null?void 0:i[Xo];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(tDe(n,i)&&(n!==void 0||_M(t.base_,e)))return!0;qO(t),OM(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return VO(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,qO(t),OM(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=ep(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){ml(11)},getPrototypeOf(t){return Iw(t.base_)},setPrototypeOf(){ml(12)}},Rw={};mk(a6,(t,e)=>{Rw[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Rw.deleteProperty=function(t,e){return Rw.set.call(this,t,e,void 0)};Rw.set=function(t,e,n){return a6.set.call(this,t[0],e,n,t[0])};function VO(t,e){const n=t[Xo];return(n?ep(n):t)[e]}function aDe(t,e,n){var i;const r=Lae(e,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function Lae(t,e){if(!(e in t))return;let n=Iw(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Iw(n)}}function OM(t){t.modified_||(t.modified_=!0,t.parent_&&OM(t.parent_))}function qO(t){t.copy_||(t.copy_=IM(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var lDe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const s=n;n=e;const o=this;return function(l=s,...c){return o.produce(l,u=>n.call(this,u,...c))}}typeof n!="function"&&ml(6),r!==void 0&&typeof r!="function"&&ml(7);let i;if(gm(e)){const s=UG(this),o=MM(e,void 0);let a=!0;try{i=n(o),a=!1}finally{a?PM(s):RM(s)}return jG(s,r),FG(i,s)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===Rae&&(i=void 0),this.autoFreeze_&&o6(i,!0),r){const s=[],o=[];ym("Patches").generateReplacementPatches_(e,i,s,o),r(s,o)}return i}else ml(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(o,...a)=>this.produceWithPatches(o,l=>e(l,...a));let r,i;return[this.produce(e,n,(o,a)=>{r=o,i=a}),r,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof(t==null?void 0:t.useStrictIteration)=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){gm(t)||ml(8),lx(t)&&(t=cDe(t));const e=UG(this),n=MM(t,void 0);return n[Xo].isManual_=!0,RM(e),n}finishDraft(t,e){const n=t&&t[Xo];(!n||!n.isManual_)&&ml(9);const{scope_:r}=n;return jG(r,e),FG(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=ym("Patches").applyPatches_;return lx(t)?r(t,e):this.produce(t,i=>r(i,e))}};function MM(t,e){const n=L1(t)?ym("MapSet").proxyMap_(t,e):j2(t)?ym("MapSet").proxySet_(t,e):oDe(t,e);return(e?e.scope_:Dae()).drafts_.push(n),n}function cDe(t){return lx(t)||ml(10,t),Bae(t)}function Bae(t){if(!gm(t)||U2(t))return t;const e=t[Xo];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=IM(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=IM(t,!0);return mk(n,(i,s)=>{Mae(n,i,Bae(s))},r),e&&(e.finalized_=!1),n}var uDe=new lDe;uDe.produce;var dDe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},jae=yo({name:"legend",initialState:dDe,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:Tr()},replaceLegendPayload:{reducer(t,e){var{prev:n,next:r}=e.payload,i=bl(t).payload.indexOf(n);i>-1&&(t.payload[i]=r)},prepare:Tr()},removeLegendPayload:{reducer(t,e){var n=bl(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)},prepare:Tr()}}}),{setLegendSize:xmt,setLegendSettings:vmt,addLegendPayload:Uae,replaceLegendPayload:Fae,removeLegendPayload:$ae}=jae.actions,fDe=jae.reducer;function DM(){return DM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},DM.apply(null,arguments)}function zG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function GO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zG(Object(n),!0).forEach(function(r){hDe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hDe(t,e,n){return(e=pDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pDe(t){var e=mDe(t,"string");return typeof e=="symbol"?e:e+""}function mDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gDe(t){return Array.isArray(t)&&_c(t[0])&&_c(t[1])?t.join(" ~ "):t}var yDe=t=>{var{separator:e=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:s,formatter:o,itemSorter:a,wrapperClassName:l,labelClassName:c,label:u,labelFormatter:f,accessibilityLayer:m=!1}=t,g=()=>{if(s&&s.length){var j={padding:0,margin:0},R=(a?E2(s,a):s).map((U,V)=>{if(U.type==="none")return null;var F=U.formatter||o||gDe,{value:$,name:K}=U,H=$,B=K;if(F){var A=F($,K,U,V,s);if(Array.isArray(A))[H,B]=A;else if(A!=null)H=A;else return null}var I=GO({display:"block",paddingTop:4,paddingBottom:4,color:U.color||"#000"},r);return T.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(V),style:I},_c(B)?T.createElement("span",{className:"recharts-tooltip-item-name"},B):null,_c(B)?T.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,T.createElement("span",{className:"recharts-tooltip-item-value"},H),T.createElement("span",{className:"recharts-tooltip-item-unit"},U.unit||""))});return T.createElement("ul",{className:"recharts-tooltip-item-list",style:j},R)}return null},x=GO({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),v=GO({margin:0},i),w=!Er(u),E=w?u:"",C=Pn("recharts-default-tooltip",l),k=Pn("recharts-tooltip-label",c);w&&f&&s!==void 0&&s!==null&&(E=f(u,s));var O=m?{role:"status","aria-live":"assertive"}:{};return T.createElement("div",DM({className:C,style:x},O),T.createElement("p",{className:k,style:v},T.isValidElement(E)?E:"".concat(E)),g())},rb="recharts-tooltip-wrapper",xDe={visibility:"hidden"};function vDe(t){var{coordinate:e,translateX:n,translateY:r}=t;return Pn(rb,{["".concat(rb,"-right")]:bt(n)&&e&&bt(e.x)&&n>=e.x,["".concat(rb,"-left")]:bt(n)&&e&&bt(e.x)&&n<e.x,["".concat(rb,"-bottom")]:bt(r)&&e&&bt(e.y)&&r>=e.y,["".concat(rb,"-top")]:bt(r)&&e&&bt(e.y)&&r<e.y})}function HG(t){var{allowEscapeViewBox:e,coordinate:n,key:r,offsetTopLeft:i,position:s,reverseDirection:o,tooltipDimension:a,viewBox:l,viewBoxDimension:c}=t;if(s&&bt(s[r]))return s[r];var u=n[r]-a-(i>0?i:0),f=n[r]+i;if(e[r])return o[r]?u:f;var m=l[r];if(m==null)return 0;if(o[r]){var g=u,x=m;return g<x?Math.max(f,m):Math.max(u,m)}if(c==null)return 0;var v=f+a,w=m+c;return v>w?Math.max(u,m):Math.max(f,m)}function bDe(t){var{translateX:e,translateY:n,useTranslate3d:r}=t;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function wDe(t){var{allowEscapeViewBox:e,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:s,tooltipBox:o,useTranslate3d:a,viewBox:l}=t,c,u,f;return o.height>0&&o.width>0&&n?(u=HG({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:o.width,viewBox:l,viewBoxDimension:l.width}),f=HG({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:o.height,viewBox:l,viewBoxDimension:l.height}),c=bDe({translateX:u,translateY:f,useTranslate3d:a})):c=xDe,{cssProperties:c,cssClasses:vDe({translateX:u,translateY:f,coordinate:n})}}function VG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function oA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VG(Object(n),!0).forEach(function(r){LM(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function LM(t,e,n){return(e=EDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function EDe(t){var e=SDe(t,"string");return typeof e=="symbol"?e:e+""}function SDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class ADe extends T.PureComponent{constructor(){super(...arguments),LM(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),LM(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,r,i,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:s,coordinate:o,hasPayload:a,isAnimationActive:l,offset:c,position:u,reverseDirection:f,useTranslate3d:m,viewBox:g,wrapperStyle:x,lastBoundingBox:v,innerRef:w,hasPortalFromProps:E}=this.props,{cssClasses:C,cssProperties:k}=wDe({allowEscapeViewBox:n,coordinate:o,offsetTopLeft:c,position:u,reverseDirection:f,tooltipBox:{height:v.height,width:v.width},useTranslate3d:m,viewBox:g}),O=E?{}:oA(oA({transition:l&&e?"transform ".concat(r,"ms ").concat(i):void 0},k),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&a?"visible":"hidden",position:"absolute",top:0,left:0}),j=oA(oA({},O),{},{visibility:!this.state.dismissed&&e&&a?"visible":"hidden"},x);return T.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:C,style:j,ref:w},s)}}var zae=()=>{var t;return(t=Pt(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function BM(){return BM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},BM.apply(null,arguments)}function qG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function GG(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qG(Object(n),!0).forEach(function(r){TDe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function TDe(t,e,n){return(e=kDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kDe(t){var e=CDe(t,"string");return typeof e=="symbol"?e:e+""}function CDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var KG={curveBasisClosed:I5e,curveBasisOpen:P5e,curveBasis:_5e,curveBumpX:m5e,curveBumpY:g5e,curveLinearClosed:R5e,curveLinear:v2,curveMonotoneX:O5e,curveMonotoneY:M5e,curveNatural:D5e,curveStep:L5e,curveStepAfter:j5e,curveStepBefore:B5e},xk=t=>ur(t.x)&&ur(t.y),WG=t=>t.base!=null&&xk(t.base)&&xk(t),ib=t=>t.x,sb=t=>t.y,NDe=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(I1(t));return(n==="curveMonotone"||n==="curveBump")&&e?KG["".concat(n).concat(e==="vertical"?"Y":"X")]:KG[n]||v2},_De=t=>{var{type:e="linear",points:n=[],baseLine:r,layout:i,connectNulls:s=!1}=t,o=NDe(e,i),a=s?n.filter(xk):n,l;if(Array.isArray(r)){var c=n.map((g,x)=>GG(GG({},g),{},{base:r[x]}));i==="vertical"?l=QS().y(sb).x1(ib).x0(g=>g.base.x):l=QS().x(ib).y1(sb).y0(g=>g.base.y);var u=l.defined(WG).curve(o),f=s?c.filter(WG):c;return u(f)}i==="vertical"&&bt(r)?l=QS().y(sb).x1(ib).x0(r):bt(r)?l=QS().x(ib).y1(sb).y0(r):l=hoe().x(ib).y(sb);var m=l.defined(xk).curve(o);return m(a)},Hg=t=>{var{className:e,points:n,path:r,pathRef:i}=t,s=ph();if((!n||!n.length)&&!r)return null;var o={type:t.type,points:t.points,baseLine:t.baseLine,layout:t.layout||s,connectNulls:t.connectNulls},a=n&&n.length?_De(o):r;return T.createElement("path",BM({},Gs(t),K8(t),{className:Pn("recharts-curve",e),d:a===null?void 0:a,ref:i}))},IDe=["x","y","top","left","width","height","className"];function jM(){return jM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jM.apply(null,arguments)}function YG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function PDe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YG(Object(n),!0).forEach(function(r){RDe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function RDe(t,e,n){return(e=ODe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ODe(t){var e=MDe(t,"string");return typeof e=="symbol"?e:e+""}function MDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function DDe(t,e){if(t==null)return{};var n,r,i=LDe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function LDe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var BDe=(t,e,n,r,i,s)=>"M".concat(t,",").concat(i,"v").concat(r,"M").concat(s,",").concat(e,"h").concat(n),jDe=t=>{var{x:e=0,y:n=0,top:r=0,left:i=0,width:s=0,height:o=0,className:a}=t,l=DDe(t,IDe),c=PDe({x:e,y:n,top:r,left:i,width:s,height:o},l);return!bt(e)||!bt(n)||!bt(s)||!bt(o)||!bt(r)||!bt(i)?null:T.createElement("path",jM({},Ps(c),{className:Pn("recharts-cross",a),d:BDe(e,n,s,o,r,i)}))};function UDe(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function JG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function XG(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JG(Object(n),!0).forEach(function(r){FDe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function FDe(t,e,n){return(e=$De(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $De(t){var e=zDe(t,"string");return typeof e=="symbol"?e:e+""}function zDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var HDe=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),Hae=(t,e,n)=>t.map(r=>"".concat(HDe(r)," ").concat(e,"ms ").concat(n)).join(","),VDe=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,r)=>n.filter(i=>r.includes(i))),Ow=(t,e)=>Object.keys(e).reduce((n,r)=>XG(XG({},n),{},{[r]:t(r,e[r])}),{});function QG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ei(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QG(Object(n),!0).forEach(function(r){qDe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qDe(t,e,n){return(e=GDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function GDe(t){var e=KDe(t,"string");return typeof e=="symbol"?e:e+""}function KDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vk=(t,e,n)=>t+(e-t)*n,UM=t=>{var{from:e,to:n}=t;return e!==n},Vae=(t,e,n)=>{var r=Ow((i,s)=>{if(UM(s)){var[o,a]=t(s.from,s.to,s.velocity);return Ei(Ei({},s),{},{from:o,velocity:a})}return s},e);return n<1?Ow((i,s)=>UM(s)&&r[i]!=null?Ei(Ei({},s),{},{velocity:vk(s.velocity,r[i].velocity,n),from:vk(s.from,r[i].from,n)}):s,e):Vae(t,r,n-1)};function WDe(t,e,n,r,i,s){var o,a=r.reduce((m,g)=>Ei(Ei({},m),{},{[g]:{from:t[g],velocity:0,to:e[g]}}),{}),l=()=>Ow((m,g)=>g.from,a),c=()=>!Object.values(a).filter(UM).length,u=null,f=m=>{o||(o=m);var g=m-o,x=g/n.dt;a=Vae(n,a,x),i(Ei(Ei(Ei({},t),e),l())),o=m,c()||(u=s.setTimeout(f))};return()=>(u=s.setTimeout(f),()=>{var m;(m=u)===null||m===void 0||m()})}function YDe(t,e,n,r,i,s,o){var a=null,l=i.reduce((f,m)=>{var g=t[m],x=e[m];return g==null||x==null?f:Ei(Ei({},f),{},{[m]:[g,x]})},{}),c,u=f=>{c||(c=f);var m=(f-c)/r,g=Ow((v,w)=>vk(...w,n(m)),l);if(s(Ei(Ei(Ei({},t),e),g)),m<1)a=o.setTimeout(u);else{var x=Ow((v,w)=>vk(...w,n(1)),l);s(Ei(Ei(Ei({},t),e),x))}};return()=>(a=o.setTimeout(u),()=>{var f;(f=a)===null||f===void 0||f()})}const JDe=(t,e,n,r,i,s)=>{var o=VDe(t,e);return n==null?()=>(i(Ei(Ei({},t),e)),()=>{}):n.isStepper===!0?WDe(t,e,n,o,i,s):YDe(t,e,n,r,o,i,s)};var bk=1e-4,qae=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],Gae=(t,e)=>t.map((n,r)=>n*e**r).reduce((n,r)=>n+r),ZG=(t,e)=>n=>{var r=qae(t,e);return Gae(r,n)},XDe=(t,e)=>n=>{var r=qae(t,e),i=[...r.map((s,o)=>s*o).slice(1),0];return Gae(i,n)},QDe=t=>{var e,n=t.split("(");if(n.length!==2||n[0]!=="cubic-bezier")return null;var r=(e=n[1])===null||e===void 0||(e=e.split(")")[0])===null||e===void 0?void 0:e.split(",");if(r==null||r.length!==4)return null;var i=r.map(s=>parseFloat(s));return[i[0],i[1],i[2],i[3]]},ZDe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i=QDe(n[0]);if(i)return i}}return n.length===4?n:[0,0,1,1]},eLe=(t,e,n,r)=>{var i=ZG(t,n),s=ZG(e,r),o=XDe(t,n),a=c=>c>1?1:c<0?0:c,l=c=>{for(var u=c>1?1:c,f=u,m=0;m<8;++m){var g=i(f)-u,x=o(f);if(Math.abs(g-u)<bk||x<bk)return s(f);f=a(f-g/x)}return s(f)};return l.isStepper=!1,l},eK=function(){return eLe(...ZDe(...arguments))},tLe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=e,s=(o,a,l)=>{var c=-(o-a)*n,u=l*r,f=l+(c-u)*i/1e3,m=l*i/1e3+o;return Math.abs(m-a)<bk&&Math.abs(f)<bk?[a,0]:[m,f]};return s.isStepper=!0,s.dt=i,s},nLe=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return eK(t);case"spring":return tLe();default:if(t.split("(")[0]==="cubic-bezier")return eK(t)}return typeof t=="function"?t:null};function rLe(t){var e,n=()=>null,r=!1,i=null,s=o=>{if(!r){if(Array.isArray(o)){if(!o.length)return;var a=o,[l,...c]=a;if(typeof l=="number"){i=t.setTimeout(s.bind(null,c),l);return}s(l),i=t.setTimeout(s.bind(null,c));return}typeof o=="string"&&(e=o,n(e)),typeof o=="object"&&(e=o,n(e)),typeof o=="function"&&o()}};return{stop:()=>{r=!0},start:o=>{r=!1,i&&(i(),i=null),s(o)},subscribe:o=>(n=o,()=>{n=()=>null}),getTimeoutController:()=>t}}class iLe{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,s=o=>{o-r>=n?e(o):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(s))};return i=requestAnimationFrame(s),()=>{i!=null&&cancelAnimationFrame(i)}}}function sLe(){return rLe(new iLe)}var oLe=T.createContext(sLe);function aLe(t,e){var n=T.useContext(oLe);return T.useMemo(()=>e??n(t),[t,e,n])}var lLe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),B1={isSsr:lLe()},cLe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},tK={t:0},KO={t:1};function Bx(t){var e=yi(t,cLe),{isActive:n,canBegin:r,duration:i,easing:s,begin:o,onAnimationEnd:a,onAnimationStart:l,children:c}=e,u=n==="auto"?!B1.isSsr:n,f=aLe(e.animationId,e.animationManager),[m,g]=T.useState(u?tK:KO),x=T.useRef(null);return T.useEffect(()=>{u||g(KO)},[u]),T.useEffect(()=>{if(!u||!r)return P1;var v=JDe(tK,KO,nLe(s),i,g,f.getTimeoutController()),w=()=>{x.current=v()};return f.start([l,o,w,i,a]),()=>{f.stop(),x.current&&x.current(),a()}},[u,r,i,s,o,l,a,f]),c(m.t)}function jx(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=T.useRef(Tw(e)),r=T.useRef(t);return r.current!==t&&(n.current=Tw(e),r.current=t),n.current}var uLe=["radius"],dLe=["radius"],nK,rK,iK,sK,oK,aK,lK,cK,uK,dK;function fK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hK(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fK(Object(n),!0).forEach(function(r){fLe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fLe(t,e,n){return(e=hLe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hLe(t){var e=pLe(t,"string");return typeof e=="symbol"?e:e+""}function pLe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wk(){return wk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wk.apply(null,arguments)}function pK(t,e){if(t==null)return{};var n,r,i=mLe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function mLe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Vl(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var mK=(t,e,n,r,i)=>{var s=qf(n),o=qf(r),a=Math.min(Math.abs(s)/2,Math.abs(o)/2),l=o>=0?1:-1,c=s>=0?1:-1,u=o>=0&&s>=0||o<0&&s<0?1:0,f;if(a>0&&i instanceof Array){for(var m=[0,0,0,0],g=0,x=4;g<x;g++)m[g]=i[g]>a?a:i[g];f=Vr(nK||(nK=Vl(["M",",",""])),t,e+l*m[0]),m[0]>0&&(f+=Vr(rK||(rK=Vl(["A ",",",",0,0,",",",",",""])),m[0],m[0],u,t+c*m[0],e)),f+=Vr(iK||(iK=Vl(["L ",",",""])),t+n-c*m[1],e),m[1]>0&&(f+=Vr(sK||(sK=Vl(["A ",",",",0,0,",`,
        `,",",""])),m[1],m[1],u,t+n,e+l*m[1])),f+=Vr(oK||(oK=Vl(["L ",",",""])),t+n,e+r-l*m[2]),m[2]>0&&(f+=Vr(aK||(aK=Vl(["A ",",",",0,0,",`,
        `,",",""])),m[2],m[2],u,t+n-c*m[2],e+r)),f+=Vr(lK||(lK=Vl(["L ",",",""])),t+c*m[3],e+r),m[3]>0&&(f+=Vr(cK||(cK=Vl(["A ",",",",0,0,",`,
        `,",",""])),m[3],m[3],u,t,e+r-l*m[3])),f+="Z"}else if(a>0&&i===+i&&i>0){var v=Math.min(a,i);f=Vr(uK||(uK=Vl(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),t,e+l*v,v,v,u,t+c*v,e,t+n-c*v,e,v,v,u,t+n,e+l*v,t+n,e+r-l*v,v,v,u,t+n-c*v,e+r,t+c*v,e+r,v,v,u,t,e+r-l*v)}else f=Vr(dK||(dK=Vl(["M ",","," h "," v "," h "," Z"])),t,e,n,r,-n);return f},gK={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Kae=t=>{var e=yi(t,gK),n=T.useRef(null),[r,i]=T.useState(-1);T.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var z=n.current.getTotalLength();z&&i(z)}catch{}},[]);var{x:s,y:o,width:a,height:l,radius:c,className:u}=e,{animationEasing:f,animationDuration:m,animationBegin:g,isAnimationActive:x,isUpdateAnimationActive:v}=e,w=T.useRef(a),E=T.useRef(l),C=T.useRef(s),k=T.useRef(o),O=T.useMemo(()=>({x:s,y:o,width:a,height:l,radius:c}),[s,o,a,l,c]),j=jx(O,"rectangle-");if(s!==+s||o!==+o||a!==+a||l!==+l||a===0||l===0)return null;var R=Pn("recharts-rectangle",u);if(!v){var U=Ps(e),{radius:V}=U,F=pK(U,uLe);return T.createElement("path",wk({},F,{x:qf(s),y:qf(o),width:qf(a),height:qf(l),radius:typeof c=="number"?c:void 0,className:R,d:mK(s,o,a,l,c)}))}var $=w.current,K=E.current,H=C.current,B=k.current,A="0px ".concat(r===-1?1:r,"px"),I="".concat(r,"px 0px"),M=Hae(["strokeDasharray"],m,typeof f=="string"?f:gK.animationEasing);return T.createElement(Bx,{animationId:j,key:j,canBegin:r>0,duration:m,easing:f,isActive:v,begin:g},z=>{var G=qn($,a,z),te=qn(K,l,z),Y=qn(H,s,z),q=qn(B,o,z);n.current&&(w.current=G,E.current=te,C.current=Y,k.current=q);var D;x?z>0?D={transition:M,strokeDasharray:I}:D={strokeDasharray:A}:D={strokeDasharray:I};var _=Ps(e),{radius:W}=_,X=pK(_,dLe);return T.createElement("path",wk({},X,{radius:typeof c=="number"?c:void 0,className:R,d:mK(Y,q,G,te,c),ref:n,style:hK(hK({},D),e.style)}))})};function yK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xK(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yK(Object(n),!0).forEach(function(r){gLe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gLe(t,e,n){return(e=yLe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yLe(t){var e=xLe(t,"string");return typeof e=="symbol"?e:e+""}function xLe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ek=Math.PI/180,vLe=t=>t*180/Math.PI,mi=(t,e,n,r)=>({x:t+Math.cos(-Ek*r)*n,y:e+Math.sin(-Ek*r)*n}),Wae=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},bLe=(t,e)=>{var{x:n,y:r}=t,{x:i,y:s}=e;return Math.sqrt((n-i)**2+(r-s)**2)},wLe=(t,e)=>{var{x:n,y:r}=t,{cx:i,cy:s}=e,o=bLe({x:n,y:r},{x:i,y:s});if(o<=0)return{radius:o,angle:0};var a=(n-i)/o,l=Math.acos(a);return r>s&&(l=2*Math.PI-l),{radius:o,angle:vLe(l),angleInRadian:l}},ELe=t=>{var{startAngle:e,endAngle:n}=t,r=Math.floor(e/360),i=Math.floor(n/360),s=Math.min(r,i);return{startAngle:e-s*360,endAngle:n-s*360}},SLe=(t,e)=>{var{startAngle:n,endAngle:r}=e,i=Math.floor(n/360),s=Math.floor(r/360),o=Math.min(i,s);return t+o*360},ALe=(t,e)=>{var{chartX:n,chartY:r}=t,{radius:i,angle:s}=wLe({x:n,y:r},e),{innerRadius:o,outerRadius:a}=e;if(i<o||i>a||i===0)return null;var{startAngle:l,endAngle:c}=ELe(e),u=s,f;if(l<=c){for(;u>c;)u-=360;for(;u<l;)u+=360;f=u>=l&&u<=c}else{for(;u>l;)u-=360;for(;u<c;)u+=360;f=u>=c&&u<=l}return f?xK(xK({},e),{},{radius:i,angle:SLe(u,e)}):null};function Yae(t){var{cx:e,cy:n,radius:r,startAngle:i,endAngle:s}=t,o=mi(e,n,r,i),a=mi(e,n,r,s);return{points:[o,a],cx:e,cy:n,radius:r,startAngle:i,endAngle:s}}var vK,bK,wK,EK,SK,AK,TK;function FM(){return FM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},FM.apply(null,arguments)}function xp(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var TLe=(t,e)=>{var n=ji(e-t),r=Math.min(Math.abs(e-t),359.999);return n*r},aA=t=>{var{cx:e,cy:n,radius:r,angle:i,sign:s,isExternal:o,cornerRadius:a,cornerIsExternal:l}=t,c=a*(o?1:-1)+r,u=Math.asin(a/c)/Ek,f=l?i:i+s*u,m=mi(e,n,c,f),g=mi(e,n,r,f),x=l?i-s*u:i,v=mi(e,n,c*Math.cos(u*Ek),x);return{center:m,circleTangency:g,lineTangency:v,theta:u}},Jae=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:s,endAngle:o}=t,a=TLe(s,o),l=s+a,c=mi(e,n,i,s),u=mi(e,n,i,l),f=Vr(vK||(vK=xp(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),c.x,c.y,i,i,+(Math.abs(a)>180),+(s>l),u.x,u.y);if(r>0){var m=mi(e,n,r,s),g=mi(e,n,r,l);f+=Vr(bK||(bK=xp(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),g.x,g.y,r,r,+(Math.abs(a)>180),+(s<=l),m.x,m.y)}else f+=Vr(wK||(wK=xp(["L ",","," Z"])),e,n);return f},kLe=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,cornerRadius:s,forceCornerRadius:o,cornerIsExternal:a,startAngle:l,endAngle:c}=t,u=ji(c-l),{circleTangency:f,lineTangency:m,theta:g}=aA({cx:e,cy:n,radius:i,angle:l,sign:u,cornerRadius:s,cornerIsExternal:a}),{circleTangency:x,lineTangency:v,theta:w}=aA({cx:e,cy:n,radius:i,angle:c,sign:-u,cornerRadius:s,cornerIsExternal:a}),E=a?Math.abs(l-c):Math.abs(l-c)-g-w;if(E<0)return o?Vr(EK||(EK=xp(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),m.x,m.y,s,s,s*2,s,s,-s*2):Jae({cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:l,endAngle:c});var C=Vr(SK||(SK=xp(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),m.x,m.y,s,s,+(u<0),f.x,f.y,i,i,+(E>180),+(u<0),x.x,x.y,s,s,+(u<0),v.x,v.y);if(r>0){var{circleTangency:k,lineTangency:O,theta:j}=aA({cx:e,cy:n,radius:r,angle:l,sign:u,isExternal:!0,cornerRadius:s,cornerIsExternal:a}),{circleTangency:R,lineTangency:U,theta:V}=aA({cx:e,cy:n,radius:r,angle:c,sign:-u,isExternal:!0,cornerRadius:s,cornerIsExternal:a}),F=a?Math.abs(l-c):Math.abs(l-c)-j-V;if(F<0&&s===0)return"".concat(C,"L").concat(e,",").concat(n,"Z");C+=Vr(AK||(AK=xp(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),U.x,U.y,s,s,+(u<0),R.x,R.y,r,r,+(F>180),+(u>0),k.x,k.y,s,s,+(u<0),O.x,O.y)}else C+=Vr(TK||(TK=xp(["L",",","Z"])),e,n);return C},CLe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Xae=t=>{var e=yi(t,CLe),{cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:o,forceCornerRadius:a,cornerIsExternal:l,startAngle:c,endAngle:u,className:f}=e;if(s<i||c===u)return null;var m=Pn("recharts-sector",f),g=s-i,x=_s(o,g,0,!0),v;return x>0&&Math.abs(c-u)<360?v=kLe({cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:Math.min(x,g/2),forceCornerRadius:a,cornerIsExternal:l,startAngle:c,endAngle:u}):v=Jae({cx:n,cy:r,innerRadius:i,outerRadius:s,startAngle:c,endAngle:u}),T.createElement("path",FM({},Ps(e),{className:m,d:v}))};function NLe(t,e,n){if(t==="horizontal")return[{x:e.x,y:n.top},{x:e.x,y:n.top+n.height}];if(t==="vertical")return[{x:n.left,y:e.y},{x:n.left+n.width,y:e.y}];if(_oe(e)){if(t==="centric"){var{cx:r,cy:i,innerRadius:s,outerRadius:o,angle:a}=e,l=mi(r,i,s,a),c=mi(r,i,o,a);return[{x:l.x,y:l.y},{x:c.x,y:c.y}]}return Yae(e)}}var WO={},YO={},JO={},kK;function _Le(){return kK||(kK=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Foe();function n(r){return e.isSymbol(r)?NaN:Number(r)}t.toNumber=n})(JO)),JO}var CK;function ILe(){return CK||(CK=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=_Le();function n(r){return r?(r=e.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}t.toFinite=n})(YO)),YO}var NK;function PLe(){return NK||(NK=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=$oe(),n=ILe();function r(i,s,o){o&&typeof o!="number"&&e.isIterateeCall(i,s,o)&&(s=o=void 0),i=n.toFinite(i),s===void 0?(s=i,i=0):s=n.toFinite(s),o=o===void 0?i<s?1:-1:n.toFinite(o);const a=Math.max(Math.ceil((s-i)/(o||1)),0),l=new Array(a);for(let c=0;c<a;c++)l[c]=i,i+=o;return l}t.range=r})(WO)),WO}var XO,_K;function RLe(){return _K||(_K=1,XO=PLe().range),XO}var OLe=RLe();const Qae=cs(OLe);function Jf(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function MLe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function l6(t){let e,n,r;t.length!==2?(e=Jf,n=(a,l)=>Jf(t(a),l),r=(a,l)=>t(a)-l):(e=t===Jf||t===MLe?t:DLe,n=t,r=t);function i(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const f=c+u>>>1;n(a[f],l)<0?c=f+1:u=f}while(c<u)}return c}function s(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const f=c+u>>>1;n(a[f],l)<=0?c=f+1:u=f}while(c<u)}return c}function o(a,l,c=0,u=a.length){const f=i(a,l,c,u-1);return f>c&&r(a[f-1],l)>-r(a[f],l)?f-1:f}return{left:i,center:o,right:s}}function DLe(){return 0}function Zae(t){return t===null?NaN:+t}function*LLe(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const BLe=l6(Jf),j1=BLe.right;l6(Zae).center;class IK extends Map{constructor(e,n=FLe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(PK(this,e))}has(e){return super.has(PK(this,e))}set(e,n){return super.set(jLe(this,e),n)}delete(e){return super.delete(ULe(this,e))}}function PK({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function jLe({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function ULe({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function FLe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function $Le(t=Jf){if(t===Jf)return ele;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function ele(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const zLe=Math.sqrt(50),HLe=Math.sqrt(10),VLe=Math.sqrt(2);function Sk(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=zLe?10:s>=HLe?5:s>=VLe?2:1;let a,l,c;return i<0?(c=Math.pow(10,-i)/o,a=Math.round(t*c),l=Math.round(e*c),a/c<t&&++a,l/c>e&&--l,c=-c):(c=Math.pow(10,i)*o,a=Math.round(t/c),l=Math.round(e/c),a*c<t&&++a,l*c>e&&--l),l<a&&.5<=n&&n<2?Sk(t,e,n*2):[a,l,c]}function $M(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,s,o]=r?Sk(e,t,n):Sk(t,e,n);if(!(s>=i))return[];const a=s-i+1,l=new Array(a);if(r)if(o<0)for(let c=0;c<a;++c)l[c]=(s-c)/-o;else for(let c=0;c<a;++c)l[c]=(s-c)*o;else if(o<0)for(let c=0;c<a;++c)l[c]=(i+c)/-o;else for(let c=0;c<a;++c)l[c]=(i+c)*o;return l}function zM(t,e,n){return e=+e,t=+t,n=+n,Sk(t,e,n)[2]}function HM(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?zM(e,t,n):zM(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function RK(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function OK(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function tle(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?ele:$Le(i);r>n;){if(r-n>600){const l=r-n+1,c=e-n+1,u=Math.log(l),f=.5*Math.exp(2*u/3),m=.5*Math.sqrt(u*f*(l-f)/l)*(c-l/2<0?-1:1),g=Math.max(n,Math.floor(e-c*f/l+m)),x=Math.min(r,Math.floor(e+(l-c)*f/l+m));tle(t,e,g,x,i)}const s=t[e];let o=n,a=r;for(ob(t,n,e),i(t[r],s)>0&&ob(t,n,r);o<a;){for(ob(t,o,a),++o,--a;i(t[o],s)<0;)++o;for(;i(t[a],s)>0;)--a}i(t[n],s)===0?ob(t,n,a):(++a,ob(t,a,r)),a<=e&&(n=a+1),e<=a&&(r=a-1)}return t}function ob(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function qLe(t,e,n){if(t=Float64Array.from(LLe(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return OK(t);if(e>=1)return RK(t);var r,i=(r-1)*e,s=Math.floor(i),o=RK(tle(t,s).subarray(0,s+1)),a=OK(t.subarray(s+1));return o+(a-o)*(i-s)}}function GLe(t,e,n=Zae){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,s=Math.floor(i),o=+n(t[s],s,t),a=+n(t[s+1],s+1,t);return o+(a-o)*(i-s)}}function KLe(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++r<i;)s[r]=t+r*n;return s}function Ga(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Ad(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const VM=Symbol("implicit");function c6(){var t=new IK,e=[],n=[],r=VM;function i(s){let o=t.get(s);if(o===void 0){if(r!==VM)return r;t.set(s,o=e.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new IK;for(const o of s)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return c6(e,n).unknown(r)},Ga.apply(i,arguments),i}function u6(){var t=c6().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,s,o,a=!1,l=0,c=0,u=.5;delete t.unknown;function f(){var m=e().length,g=i<r,x=g?i:r,v=g?r:i;s=(v-x)/Math.max(1,m-l+c*2),a&&(s=Math.floor(s)),x+=(v-x-s*(m-l))*u,o=s*(1-l),a&&(x=Math.round(x),o=Math.round(o));var w=KLe(m).map(function(E){return x+s*E});return n(g?w.reverse():w)}return t.domain=function(m){return arguments.length?(e(m),f()):e()},t.range=function(m){return arguments.length?([r,i]=m,r=+r,i=+i,f()):[r,i]},t.rangeRound=function(m){return[r,i]=m,r=+r,i=+i,a=!0,f()},t.bandwidth=function(){return o},t.step=function(){return s},t.round=function(m){return arguments.length?(a=!!m,f()):a},t.padding=function(m){return arguments.length?(l=Math.min(1,c=+m),f()):l},t.paddingInner=function(m){return arguments.length?(l=Math.min(1,m),f()):l},t.paddingOuter=function(m){return arguments.length?(c=+m,f()):c},t.align=function(m){return arguments.length?(u=Math.max(0,Math.min(1,m)),f()):u},t.copy=function(){return u6(e(),[r,i]).round(a).paddingInner(l).paddingOuter(c).align(u)},Ga.apply(f(),arguments)}function nle(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return nle(e())},t}function WLe(){return nle(u6.apply(null,arguments).paddingInner(1))}function d6(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function rle(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function U1(){}var Mw=.7,Ak=1/Mw,Vg="\\s*([+-]?\\d+)\\s*",Dw="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Tc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",YLe=/^#([0-9a-f]{3,8})$/,JLe=new RegExp(`^rgb\\(${Vg},${Vg},${Vg}\\)$`),XLe=new RegExp(`^rgb\\(${Tc},${Tc},${Tc}\\)$`),QLe=new RegExp(`^rgba\\(${Vg},${Vg},${Vg},${Dw}\\)$`),ZLe=new RegExp(`^rgba\\(${Tc},${Tc},${Tc},${Dw}\\)$`),e8e=new RegExp(`^hsl\\(${Dw},${Tc},${Tc}\\)$`),t8e=new RegExp(`^hsla\\(${Dw},${Tc},${Tc},${Dw}\\)$`),MK={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};d6(U1,Lw,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:DK,formatHex:DK,formatHex8:n8e,formatHsl:r8e,formatRgb:LK,toString:LK});function DK(){return this.rgb().formatHex()}function n8e(){return this.rgb().formatHex8()}function r8e(){return ile(this).formatHsl()}function LK(){return this.rgb().formatRgb()}function Lw(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=YLe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?BK(e):n===3?new ho(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?lA(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?lA(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=JLe.exec(t))?new ho(e[1],e[2],e[3],1):(e=XLe.exec(t))?new ho(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=QLe.exec(t))?lA(e[1],e[2],e[3],e[4]):(e=ZLe.exec(t))?lA(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=e8e.exec(t))?FK(e[1],e[2]/100,e[3]/100,1):(e=t8e.exec(t))?FK(e[1],e[2]/100,e[3]/100,e[4]):MK.hasOwnProperty(t)?BK(MK[t]):t==="transparent"?new ho(NaN,NaN,NaN,0):null}function BK(t){return new ho(t>>16&255,t>>8&255,t&255,1)}function lA(t,e,n,r){return r<=0&&(t=e=n=NaN),new ho(t,e,n,r)}function i8e(t){return t instanceof U1||(t=Lw(t)),t?(t=t.rgb(),new ho(t.r,t.g,t.b,t.opacity)):new ho}function qM(t,e,n,r){return arguments.length===1?i8e(t):new ho(t,e,n,r??1)}function ho(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}d6(ho,qM,rle(U1,{brighter(t){return t=t==null?Ak:Math.pow(Ak,t),new ho(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Mw:Math.pow(Mw,t),new ho(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ho(Qp(this.r),Qp(this.g),Qp(this.b),Tk(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:jK,formatHex:jK,formatHex8:s8e,formatRgb:UK,toString:UK}));function jK(){return`#${vp(this.r)}${vp(this.g)}${vp(this.b)}`}function s8e(){return`#${vp(this.r)}${vp(this.g)}${vp(this.b)}${vp((isNaN(this.opacity)?1:this.opacity)*255)}`}function UK(){const t=Tk(this.opacity);return`${t===1?"rgb(":"rgba("}${Qp(this.r)}, ${Qp(this.g)}, ${Qp(this.b)}${t===1?")":`, ${t})`}`}function Tk(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Qp(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function vp(t){return t=Qp(t),(t<16?"0":"")+t.toString(16)}function FK(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new gl(t,e,n,r)}function ile(t){if(t instanceof gl)return new gl(t.h,t.s,t.l,t.opacity);if(t instanceof U1||(t=Lw(t)),!t)return new gl;if(t instanceof gl)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(e===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-e)/a+2:o=(e-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new gl(o,a,l,t.opacity)}function o8e(t,e,n,r){return arguments.length===1?ile(t):new gl(t,e,n,r??1)}function gl(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}d6(gl,o8e,rle(U1,{brighter(t){return t=t==null?Ak:Math.pow(Ak,t),new gl(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Mw:Math.pow(Mw,t),new gl(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new ho(QO(t>=240?t-240:t+120,i,r),QO(t,i,r),QO(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new gl($K(this.h),cA(this.s),cA(this.l),Tk(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Tk(this.opacity);return`${t===1?"hsl(":"hsla("}${$K(this.h)}, ${cA(this.s)*100}%, ${cA(this.l)*100}%${t===1?")":`, ${t})`}`}}));function $K(t){return t=(t||0)%360,t<0?t+360:t}function cA(t){return Math.max(0,Math.min(1,t||0))}function QO(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const f6=t=>()=>t;function a8e(t,e){return function(n){return t+n*e}}function l8e(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function c8e(t){return(t=+t)==1?sle:function(e,n){return n-e?l8e(e,n,t):f6(isNaN(e)?n:e)}}function sle(t,e){var n=e-t;return n?a8e(t,n):f6(isNaN(t)?e:t)}const zK=(function t(e){var n=c8e(e);function r(i,s){var o=n((i=qM(i)).r,(s=qM(s)).r),a=n(i.g,s.g),l=n(i.b,s.b),c=sle(i.opacity,s.opacity);return function(u){return i.r=o(u),i.g=a(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=t,r})(1);function u8e(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function d8e(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function f8e(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=Ux(t[o],e[o]);for(;o<n;++o)s[o]=e[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function h8e(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function kk(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function p8e(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Ux(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var GM=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ZO=new RegExp(GM.source,"g");function m8e(t){return function(){return t}}function g8e(t){return function(e){return t(e)+""}}function y8e(t,e){var n=GM.lastIndex=ZO.lastIndex=0,r,i,s,o=-1,a=[],l=[];for(t=t+"",e=e+"";(r=GM.exec(t))&&(i=ZO.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:kk(r,i)})),n=ZO.lastIndex;return n<e.length&&(s=e.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?g8e(l[0].x):m8e(e):(e=l.length,function(c){for(var u=0,f;u<e;++u)a[(f=l[u]).i]=f.x(c);return a.join("")})}function Ux(t,e){var n=typeof e,r;return e==null||n==="boolean"?f6(e):(n==="number"?kk:n==="string"?(r=Lw(e))?(e=r,zK):y8e:e instanceof Lw?zK:e instanceof Date?h8e:d8e(e)?u8e:Array.isArray(e)?f8e:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?p8e:kk)(t,e)}function h6(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function x8e(t,e){e===void 0&&(e=t,t=Ux);for(var n=0,r=e.length-1,i=e[0],s=new Array(r<0?0:r);n<r;)s[n]=t(i,i=e[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function v8e(t){return function(){return t}}function Ck(t){return+t}var HK=[0,1];function Vs(t){return t}function KM(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:v8e(isNaN(e)?NaN:.5)}function b8e(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function w8e(t,e,n){var r=t[0],i=t[1],s=e[0],o=e[1];return i<r?(r=KM(i,r),s=n(o,s)):(r=KM(r,i),s=n(s,o)),function(a){return s(r(a))}}function E8e(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=KM(t[o],t[o+1]),s[o]=n(e[o],e[o+1]);return function(a){var l=j1(t,a,1,r)-1;return s[l](i[l](a))}}function F1(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function F2(){var t=HK,e=HK,n=Ux,r,i,s,o=Vs,a,l,c;function u(){var m=Math.min(t.length,e.length);return o!==Vs&&(o=b8e(t[0],t[m-1])),a=m>2?E8e:w8e,l=c=null,f}function f(m){return m==null||isNaN(m=+m)?s:(l||(l=a(t.map(r),e,n)))(r(o(m)))}return f.invert=function(m){return o(i((c||(c=a(e,t.map(r),kk)))(m)))},f.domain=function(m){return arguments.length?(t=Array.from(m,Ck),u()):t.slice()},f.range=function(m){return arguments.length?(e=Array.from(m),u()):e.slice()},f.rangeRound=function(m){return e=Array.from(m),n=h6,u()},f.clamp=function(m){return arguments.length?(o=m?!0:Vs,u()):o!==Vs},f.interpolate=function(m){return arguments.length?(n=m,u()):n},f.unknown=function(m){return arguments.length?(s=m,f):s},function(m,g){return r=m,i=g,u()}}function p6(){return F2()(Vs,Vs)}function S8e(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Nk(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function cx(t){return t=Nk(Math.abs(t)),t?t[1]:NaN}function A8e(t,e){return function(n,r){for(var i=n.length,s=[],o=0,a=t[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),s.push(n.substring(i-=a,i+a)),!((l+=a+1)>r));)a=t[o=(o+1)%t.length];return s.reverse().join(e)}}function T8e(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var k8e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Bw(t){if(!(e=k8e.exec(t)))throw new Error("invalid format: "+t);var e;return new m6({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Bw.prototype=m6.prototype;function m6(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}m6.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function C8e(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var ole;function N8e(t,e){var n=Nk(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(ole=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Nk(t,Math.max(0,e+s-1))[0]}function VK(t,e){var n=Nk(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const qK={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:S8e,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>VK(t*100,e),r:VK,s:N8e,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function GK(t){return t}var KK=Array.prototype.map,WK=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function _8e(t){var e=t.grouping===void 0||t.thousands===void 0?GK:A8e(KK.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?GK:T8e(KK.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(f){f=Bw(f);var m=f.fill,g=f.align,x=f.sign,v=f.symbol,w=f.zero,E=f.width,C=f.comma,k=f.precision,O=f.trim,j=f.type;j==="n"?(C=!0,j="g"):qK[j]||(k===void 0&&(k=12),O=!0,j="g"),(w||m==="0"&&g==="=")&&(w=!0,m="0",g="=");var R=v==="$"?n:v==="#"&&/[boxX]/.test(j)?"0"+j.toLowerCase():"",U=v==="$"?r:/[%p]/.test(j)?o:"",V=qK[j],F=/[defgprs%]/.test(j);k=k===void 0?6:/[gprs]/.test(j)?Math.max(1,Math.min(21,k)):Math.max(0,Math.min(20,k));function $(K){var H=R,B=U,A,I,M;if(j==="c")B=V(K)+B,K="";else{K=+K;var z=K<0||1/K<0;if(K=isNaN(K)?l:V(Math.abs(K),k),O&&(K=C8e(K)),z&&+K==0&&x!=="+"&&(z=!1),H=(z?x==="("?x:a:x==="-"||x==="("?"":x)+H,B=(j==="s"?WK[8+ole/3]:"")+B+(z&&x==="("?")":""),F){for(A=-1,I=K.length;++A<I;)if(M=K.charCodeAt(A),48>M||M>57){B=(M===46?i+K.slice(A+1):K.slice(A))+B,K=K.slice(0,A);break}}}C&&!w&&(K=e(K,1/0));var G=H.length+K.length+B.length,te=G<E?new Array(E-G+1).join(m):"";switch(C&&w&&(K=e(te+K,te.length?E-B.length:1/0),te=""),g){case"<":K=H+K+B+te;break;case"=":K=H+te+K+B;break;case"^":K=te.slice(0,G=te.length>>1)+H+K+B+te.slice(G);break;default:K=te+H+K+B;break}return s(K)}return $.toString=function(){return f+""},$}function u(f,m){var g=c((f=Bw(f),f.type="f",f)),x=Math.max(-8,Math.min(8,Math.floor(cx(m)/3)))*3,v=Math.pow(10,-x),w=WK[8+x/3];return function(E){return g(v*E)+w}}return{format:c,formatPrefix:u}}var uA,g6,ale;I8e({thousands:",",grouping:[3],currency:["$",""]});function I8e(t){return uA=_8e(t),g6=uA.format,ale=uA.formatPrefix,uA}function P8e(t){return Math.max(0,-cx(Math.abs(t)))}function R8e(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(cx(e)/3)))*3-cx(Math.abs(t)))}function O8e(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,cx(e)-cx(t))+1}function lle(t,e,n,r){var i=HM(t,e,n),s;switch(r=Bw(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=R8e(i,o))&&(r.precision=s),ale(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=O8e(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=P8e(i))&&(r.precision=s-(r.type==="%")*2);break}}return g6(r)}function mh(t){var e=t.domain;return t.ticks=function(n){var r=e();return $M(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return lle(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,o=r[i],a=r[s],l,c,u=10;for(a<o&&(c=o,o=a,a=c,c=i,i=s,s=c);u-- >0;){if(c=zM(o,a,n),c===l)return r[i]=o,r[s]=a,e(r);if(c>0)o=Math.floor(o/c)*c,a=Math.ceil(a/c)*c;else if(c<0)o=Math.ceil(o*c)/c,a=Math.floor(a*c)/c;else break;l=c}return t},t}function cle(){var t=p6();return t.copy=function(){return F1(t,cle())},Ga.apply(t,arguments),mh(t)}function ule(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,Ck),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return ule(t).unknown(e)},t=arguments.length?Array.from(t,Ck):[0,1],mh(n)}function dle(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],s=t[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),t[n]=e.floor(i),t[r]=e.ceil(s),t}function YK(t){return Math.log(t)}function JK(t){return Math.exp(t)}function M8e(t){return-Math.log(-t)}function D8e(t){return-Math.exp(-t)}function L8e(t){return isFinite(t)?+("1e"+t):t<0?0:t}function B8e(t){return t===10?L8e:t===Math.E?Math.exp:e=>Math.pow(t,e)}function j8e(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function XK(t){return(e,n)=>-t(-e,n)}function y6(t){const e=t(YK,JK),n=e.domain;let r=10,i,s;function o(){return i=j8e(r),s=B8e(r),n()[0]<0?(i=XK(i),s=XK(s),t(M8e,D8e)):t(YK,JK),e}return e.base=function(a){return arguments.length?(r=+a,o()):r},e.domain=function(a){return arguments.length?(n(a),o()):n()},e.ticks=a=>{const l=n();let c=l[0],u=l[l.length-1];const f=u<c;f&&([c,u]=[u,c]);let m=i(c),g=i(u),x,v;const w=a==null?10:+a;let E=[];if(!(r%1)&&g-m<w){if(m=Math.floor(m),g=Math.ceil(g),c>0){for(;m<=g;++m)for(x=1;x<r;++x)if(v=m<0?x/s(-m):x*s(m),!(v<c)){if(v>u)break;E.push(v)}}else for(;m<=g;++m)for(x=r-1;x>=1;--x)if(v=m>0?x/s(-m):x*s(m),!(v<c)){if(v>u)break;E.push(v)}E.length*2<w&&(E=$M(c,u,w))}else E=$M(m,g,Math.min(g-m,w)).map(s);return f?E.reverse():E},e.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=Bw(l)).precision==null&&(l.trim=!0),l=g6(l)),a===1/0)return l;const c=Math.max(1,r*a/e.ticks().length);return u=>{let f=u/s(Math.round(i(u)));return f*r<r-.5&&(f*=r),f<=c?l(u):""}},e.nice=()=>n(dle(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),e}function fle(){const t=y6(F2()).domain([1,10]);return t.copy=()=>F1(t,fle()).base(t.base()),Ga.apply(t,arguments),t}function QK(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function ZK(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function x6(t){var e=1,n=t(QK(e),ZK(e));return n.constant=function(r){return arguments.length?t(QK(e=+r),ZK(e)):e},mh(n)}function hle(){var t=x6(F2());return t.copy=function(){return F1(t,hle()).constant(t.constant())},Ga.apply(t,arguments)}function eW(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function U8e(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function F8e(t){return t<0?-t*t:t*t}function v6(t){var e=t(Vs,Vs),n=1;function r(){return n===1?t(Vs,Vs):n===.5?t(U8e,F8e):t(eW(n),eW(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},mh(e)}function b6(){var t=v6(F2());return t.copy=function(){return F1(t,b6()).exponent(t.exponent())},Ga.apply(t,arguments),t}function $8e(){return b6.apply(null,arguments).exponent(.5)}function tW(t){return Math.sign(t)*t*t}function z8e(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function ple(){var t=p6(),e=[0,1],n=!1,r;function i(s){var o=z8e(t(s));return isNaN(o)?r:n?Math.round(o):o}return i.invert=function(s){return t.invert(tW(s))},i.domain=function(s){return arguments.length?(t.domain(s),i):t.domain()},i.range=function(s){return arguments.length?(t.range((e=Array.from(s,Ck)).map(tW)),i):e.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(n=!!s,i):n},i.clamp=function(s){return arguments.length?(t.clamp(s),i):t.clamp()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return ple(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Ga.apply(i,arguments),mh(i)}function mle(){var t=[],e=[],n=[],r;function i(){var o=0,a=Math.max(1,e.length);for(n=new Array(a-1);++o<a;)n[o-1]=GLe(t,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:e[j1(n,o)]}return s.invertExtent=function(o){var a=e.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:t[0],a<n.length?n[a]:t[t.length-1]]},s.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let a of o)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(Jf),i()},s.range=function(o){return arguments.length?(e=Array.from(o),i()):e.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return mle().domain(t).range(e).unknown(r)},Ga.apply(s,arguments)}function gle(){var t=0,e=1,n=1,r=[.5],i=[0,1],s;function o(l){return l!=null&&l<=l?i[j1(r,l,0,n)]:s}function a(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return o}return o.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,a()):[t,e]},o.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,a()):i.slice()},o.invertExtent=function(l){var c=i.indexOf(l);return c<0?[NaN,NaN]:c<1?[t,r[0]]:c>=n?[r[n-1],e]:[r[c-1],r[c]]},o.unknown=function(l){return arguments.length&&(s=l),o},o.thresholds=function(){return r.slice()},o.copy=function(){return gle().domain([t,e]).range(i).unknown(s)},Ga.apply(mh(o),arguments)}function yle(){var t=[.5],e=[0,1],n,r=1;function i(s){return s!=null&&s<=s?e[j1(t,s,0,r)]:n}return i.domain=function(s){return arguments.length?(t=Array.from(s),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(s){return arguments.length?(e=Array.from(s),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(s){var o=e.indexOf(s);return[t[o-1],t[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return yle().domain(t).range(e).unknown(n)},Ga.apply(i,arguments)}const e5=new Date,t5=new Date;function Ai(t,e,n,r){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(e(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const l=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return l;let c;do l.push(c=new Date(+s)),e(s,a),t(s);while(c<s&&s<o);return l},i.filter=s=>Ai(o=>{if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;e(o,-1),!s(o););else for(;--a>=0;)for(;e(o,1),!s(o););}),n&&(i.count=(s,o)=>(e5.setTime(+s),t5.setTime(+o),t(e5),t(t5),Math.floor(n(e5,t5))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const _k=Ai(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);_k.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Ai(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):_k);_k.range;const $u=1e3,La=$u*60,zu=La*60,fd=zu*24,w6=fd*7,nW=fd*30,n5=fd*365,bp=Ai(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*$u)},(t,e)=>(e-t)/$u,t=>t.getUTCSeconds());bp.range;const E6=Ai(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*$u)},(t,e)=>{t.setTime(+t+e*La)},(t,e)=>(e-t)/La,t=>t.getMinutes());E6.range;const S6=Ai(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*La)},(t,e)=>(e-t)/La,t=>t.getUTCMinutes());S6.range;const A6=Ai(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*$u-t.getMinutes()*La)},(t,e)=>{t.setTime(+t+e*zu)},(t,e)=>(e-t)/zu,t=>t.getHours());A6.range;const T6=Ai(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*zu)},(t,e)=>(e-t)/zu,t=>t.getUTCHours());T6.range;const $1=Ai(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*La)/fd,t=>t.getDate()-1);$1.range;const $2=Ai(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/fd,t=>t.getUTCDate()-1);$2.range;const xle=Ai(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/fd,t=>Math.floor(t/fd));xle.range;function Om(t){return Ai(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*La)/w6)}const z2=Om(0),Ik=Om(1),H8e=Om(2),V8e=Om(3),ux=Om(4),q8e=Om(5),G8e=Om(6);z2.range;Ik.range;H8e.range;V8e.range;ux.range;q8e.range;G8e.range;function Mm(t){return Ai(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/w6)}const H2=Mm(0),Pk=Mm(1),K8e=Mm(2),W8e=Mm(3),dx=Mm(4),Y8e=Mm(5),J8e=Mm(6);H2.range;Pk.range;K8e.range;W8e.range;dx.range;Y8e.range;J8e.range;const k6=Ai(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());k6.range;const C6=Ai(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());C6.range;const hd=Ai(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());hd.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ai(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});hd.range;const pd=Ai(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());pd.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ai(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});pd.range;function vle(t,e,n,r,i,s){const o=[[bp,1,$u],[bp,5,5*$u],[bp,15,15*$u],[bp,30,30*$u],[s,1,La],[s,5,5*La],[s,15,15*La],[s,30,30*La],[i,1,zu],[i,3,3*zu],[i,6,6*zu],[i,12,12*zu],[r,1,fd],[r,2,2*fd],[n,1,w6],[e,1,nW],[e,3,3*nW],[t,1,n5]];function a(c,u,f){const m=u<c;m&&([c,u]=[u,c]);const g=f&&typeof f.range=="function"?f:l(c,u,f),x=g?g.range(c,+u+1):[];return m?x.reverse():x}function l(c,u,f){const m=Math.abs(u-c)/f,g=l6(([,,w])=>w).right(o,m);if(g===o.length)return t.every(HM(c/n5,u/n5,f));if(g===0)return _k.every(Math.max(HM(c,u,f),1));const[x,v]=o[m/o[g-1][2]<o[g][2]/m?g-1:g];return x.every(v)}return[a,l]}const[X8e,Q8e]=vle(pd,C6,H2,xle,T6,S6),[Z8e,e6e]=vle(hd,k6,z2,$1,A6,E6);function r5(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function i5(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function ab(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function t6e(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,s=t.days,o=t.shortDays,a=t.months,l=t.shortMonths,c=lb(i),u=cb(i),f=lb(s),m=cb(s),g=lb(o),x=cb(o),v=lb(a),w=cb(a),E=lb(l),C=cb(l),k={a:z,A:G,b:te,B:Y,c:null,d:lW,e:lW,f:A6e,g:M6e,G:L6e,H:w6e,I:E6e,j:S6e,L:ble,m:T6e,M:k6e,p:q,q:D,Q:dW,s:fW,S:C6e,u:N6e,U:_6e,V:I6e,w:P6e,W:R6e,x:null,X:null,y:O6e,Y:D6e,Z:B6e,"%":uW},O={a:_,A:W,b:X,B:re,c:null,d:cW,e:cW,f:$6e,g:X6e,G:Z6e,H:j6e,I:U6e,j:F6e,L:Ele,m:z6e,M:H6e,p:ae,q:Ee,Q:dW,s:fW,S:V6e,u:q6e,U:G6e,V:K6e,w:W6e,W:Y6e,x:null,X:null,y:J6e,Y:Q6e,Z:eBe,"%":uW},j={a:$,A:K,b:H,B,c:A,d:oW,e:oW,f:y6e,g:sW,G:iW,H:aW,I:aW,j:h6e,L:g6e,m:f6e,M:p6e,p:F,q:d6e,Q:v6e,s:b6e,S:m6e,u:o6e,U:a6e,V:l6e,w:s6e,W:c6e,x:I,X:M,y:sW,Y:iW,Z:u6e,"%":x6e};k.x=R(n,k),k.X=R(r,k),k.c=R(e,k),O.x=R(n,O),O.X=R(r,O),O.c=R(e,O);function R(ue,me){return function(ce){var oe=[],ke=-1,Ne=0,ze=ue.length,Ze,Ye,We;for(ce instanceof Date||(ce=new Date(+ce));++ke<ze;)ue.charCodeAt(ke)===37&&(oe.push(ue.slice(Ne,ke)),(Ye=rW[Ze=ue.charAt(++ke)])!=null?Ze=ue.charAt(++ke):Ye=Ze==="e"?" ":"0",(We=me[Ze])&&(Ze=We(ce,Ye)),oe.push(Ze),Ne=ke+1);return oe.push(ue.slice(Ne,ke)),oe.join("")}}function U(ue,me){return function(ce){var oe=ab(1900,void 0,1),ke=V(oe,ue,ce+="",0),Ne,ze;if(ke!=ce.length)return null;if("Q"in oe)return new Date(oe.Q);if("s"in oe)return new Date(oe.s*1e3+("L"in oe?oe.L:0));if(me&&!("Z"in oe)&&(oe.Z=0),"p"in oe&&(oe.H=oe.H%12+oe.p*12),oe.m===void 0&&(oe.m="q"in oe?oe.q:0),"V"in oe){if(oe.V<1||oe.V>53)return null;"w"in oe||(oe.w=1),"Z"in oe?(Ne=i5(ab(oe.y,0,1)),ze=Ne.getUTCDay(),Ne=ze>4||ze===0?Pk.ceil(Ne):Pk(Ne),Ne=$2.offset(Ne,(oe.V-1)*7),oe.y=Ne.getUTCFullYear(),oe.m=Ne.getUTCMonth(),oe.d=Ne.getUTCDate()+(oe.w+6)%7):(Ne=r5(ab(oe.y,0,1)),ze=Ne.getDay(),Ne=ze>4||ze===0?Ik.ceil(Ne):Ik(Ne),Ne=$1.offset(Ne,(oe.V-1)*7),oe.y=Ne.getFullYear(),oe.m=Ne.getMonth(),oe.d=Ne.getDate()+(oe.w+6)%7)}else("W"in oe||"U"in oe)&&("w"in oe||(oe.w="u"in oe?oe.u%7:"W"in oe?1:0),ze="Z"in oe?i5(ab(oe.y,0,1)).getUTCDay():r5(ab(oe.y,0,1)).getDay(),oe.m=0,oe.d="W"in oe?(oe.w+6)%7+oe.W*7-(ze+5)%7:oe.w+oe.U*7-(ze+6)%7);return"Z"in oe?(oe.H+=oe.Z/100|0,oe.M+=oe.Z%100,i5(oe)):r5(oe)}}function V(ue,me,ce,oe){for(var ke=0,Ne=me.length,ze=ce.length,Ze,Ye;ke<Ne;){if(oe>=ze)return-1;if(Ze=me.charCodeAt(ke++),Ze===37){if(Ze=me.charAt(ke++),Ye=j[Ze in rW?me.charAt(ke++):Ze],!Ye||(oe=Ye(ue,ce,oe))<0)return-1}else if(Ze!=ce.charCodeAt(oe++))return-1}return oe}function F(ue,me,ce){var oe=c.exec(me.slice(ce));return oe?(ue.p=u.get(oe[0].toLowerCase()),ce+oe[0].length):-1}function $(ue,me,ce){var oe=g.exec(me.slice(ce));return oe?(ue.w=x.get(oe[0].toLowerCase()),ce+oe[0].length):-1}function K(ue,me,ce){var oe=f.exec(me.slice(ce));return oe?(ue.w=m.get(oe[0].toLowerCase()),ce+oe[0].length):-1}function H(ue,me,ce){var oe=E.exec(me.slice(ce));return oe?(ue.m=C.get(oe[0].toLowerCase()),ce+oe[0].length):-1}function B(ue,me,ce){var oe=v.exec(me.slice(ce));return oe?(ue.m=w.get(oe[0].toLowerCase()),ce+oe[0].length):-1}function A(ue,me,ce){return V(ue,e,me,ce)}function I(ue,me,ce){return V(ue,n,me,ce)}function M(ue,me,ce){return V(ue,r,me,ce)}function z(ue){return o[ue.getDay()]}function G(ue){return s[ue.getDay()]}function te(ue){return l[ue.getMonth()]}function Y(ue){return a[ue.getMonth()]}function q(ue){return i[+(ue.getHours()>=12)]}function D(ue){return 1+~~(ue.getMonth()/3)}function _(ue){return o[ue.getUTCDay()]}function W(ue){return s[ue.getUTCDay()]}function X(ue){return l[ue.getUTCMonth()]}function re(ue){return a[ue.getUTCMonth()]}function ae(ue){return i[+(ue.getUTCHours()>=12)]}function Ee(ue){return 1+~~(ue.getUTCMonth()/3)}return{format:function(ue){var me=R(ue+="",k);return me.toString=function(){return ue},me},parse:function(ue){var me=U(ue+="",!1);return me.toString=function(){return ue},me},utcFormat:function(ue){var me=R(ue+="",O);return me.toString=function(){return ue},me},utcParse:function(ue){var me=U(ue+="",!0);return me.toString=function(){return ue},me}}}var rW={"-":"",_:" ",0:"0"},$i=/^\s*\d+/,n6e=/^%/,r6e=/[\\^$*+?|[\]().{}]/g;function Un(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(e)+i:i)}function i6e(t){return t.replace(r6e,"\\$&")}function lb(t){return new RegExp("^(?:"+t.map(i6e).join("|")+")","i")}function cb(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function s6e(t,e,n){var r=$i.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function o6e(t,e,n){var r=$i.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function a6e(t,e,n){var r=$i.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function l6e(t,e,n){var r=$i.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function c6e(t,e,n){var r=$i.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function iW(t,e,n){var r=$i.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function sW(t,e,n){var r=$i.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function u6e(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function d6e(t,e,n){var r=$i.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function f6e(t,e,n){var r=$i.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function oW(t,e,n){var r=$i.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function h6e(t,e,n){var r=$i.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function aW(t,e,n){var r=$i.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function p6e(t,e,n){var r=$i.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function m6e(t,e,n){var r=$i.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function g6e(t,e,n){var r=$i.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function y6e(t,e,n){var r=$i.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function x6e(t,e,n){var r=n6e.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function v6e(t,e,n){var r=$i.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function b6e(t,e,n){var r=$i.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function lW(t,e){return Un(t.getDate(),e,2)}function w6e(t,e){return Un(t.getHours(),e,2)}function E6e(t,e){return Un(t.getHours()%12||12,e,2)}function S6e(t,e){return Un(1+$1.count(hd(t),t),e,3)}function ble(t,e){return Un(t.getMilliseconds(),e,3)}function A6e(t,e){return ble(t,e)+"000"}function T6e(t,e){return Un(t.getMonth()+1,e,2)}function k6e(t,e){return Un(t.getMinutes(),e,2)}function C6e(t,e){return Un(t.getSeconds(),e,2)}function N6e(t){var e=t.getDay();return e===0?7:e}function _6e(t,e){return Un(z2.count(hd(t)-1,t),e,2)}function wle(t){var e=t.getDay();return e>=4||e===0?ux(t):ux.ceil(t)}function I6e(t,e){return t=wle(t),Un(ux.count(hd(t),t)+(hd(t).getDay()===4),e,2)}function P6e(t){return t.getDay()}function R6e(t,e){return Un(Ik.count(hd(t)-1,t),e,2)}function O6e(t,e){return Un(t.getFullYear()%100,e,2)}function M6e(t,e){return t=wle(t),Un(t.getFullYear()%100,e,2)}function D6e(t,e){return Un(t.getFullYear()%1e4,e,4)}function L6e(t,e){var n=t.getDay();return t=n>=4||n===0?ux(t):ux.ceil(t),Un(t.getFullYear()%1e4,e,4)}function B6e(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Un(e/60|0,"0",2)+Un(e%60,"0",2)}function cW(t,e){return Un(t.getUTCDate(),e,2)}function j6e(t,e){return Un(t.getUTCHours(),e,2)}function U6e(t,e){return Un(t.getUTCHours()%12||12,e,2)}function F6e(t,e){return Un(1+$2.count(pd(t),t),e,3)}function Ele(t,e){return Un(t.getUTCMilliseconds(),e,3)}function $6e(t,e){return Ele(t,e)+"000"}function z6e(t,e){return Un(t.getUTCMonth()+1,e,2)}function H6e(t,e){return Un(t.getUTCMinutes(),e,2)}function V6e(t,e){return Un(t.getUTCSeconds(),e,2)}function q6e(t){var e=t.getUTCDay();return e===0?7:e}function G6e(t,e){return Un(H2.count(pd(t)-1,t),e,2)}function Sle(t){var e=t.getUTCDay();return e>=4||e===0?dx(t):dx.ceil(t)}function K6e(t,e){return t=Sle(t),Un(dx.count(pd(t),t)+(pd(t).getUTCDay()===4),e,2)}function W6e(t){return t.getUTCDay()}function Y6e(t,e){return Un(Pk.count(pd(t)-1,t),e,2)}function J6e(t,e){return Un(t.getUTCFullYear()%100,e,2)}function X6e(t,e){return t=Sle(t),Un(t.getUTCFullYear()%100,e,2)}function Q6e(t,e){return Un(t.getUTCFullYear()%1e4,e,4)}function Z6e(t,e){var n=t.getUTCDay();return t=n>=4||n===0?dx(t):dx.ceil(t),Un(t.getUTCFullYear()%1e4,e,4)}function eBe(){return"+0000"}function uW(){return"%"}function dW(t){return+t}function fW(t){return Math.floor(+t/1e3)}var j0,Ale,Tle;tBe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function tBe(t){return j0=t6e(t),Ale=j0.format,j0.parse,Tle=j0.utcFormat,j0.utcParse,j0}function nBe(t){return new Date(t)}function rBe(t){return t instanceof Date?+t:+new Date(+t)}function N6(t,e,n,r,i,s,o,a,l,c){var u=p6(),f=u.invert,m=u.domain,g=c(".%L"),x=c(":%S"),v=c("%I:%M"),w=c("%I %p"),E=c("%a %d"),C=c("%b %d"),k=c("%B"),O=c("%Y");function j(R){return(l(R)<R?g:a(R)<R?x:o(R)<R?v:s(R)<R?w:r(R)<R?i(R)<R?E:C:n(R)<R?k:O)(R)}return u.invert=function(R){return new Date(f(R))},u.domain=function(R){return arguments.length?m(Array.from(R,rBe)):m().map(nBe)},u.ticks=function(R){var U=m();return t(U[0],U[U.length-1],R??10)},u.tickFormat=function(R,U){return U==null?j:c(U)},u.nice=function(R){var U=m();return(!R||typeof R.range!="function")&&(R=e(U[0],U[U.length-1],R??10)),R?m(dle(U,R)):u},u.copy=function(){return F1(u,N6(t,e,n,r,i,s,o,a,l,c))},u}function iBe(){return Ga.apply(N6(Z8e,e6e,hd,k6,z2,$1,A6,E6,bp,Ale).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function sBe(){return Ga.apply(N6(X8e,Q8e,pd,C6,H2,$2,T6,S6,bp,Tle).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function V2(){var t=0,e=1,n,r,i,s,o=Vs,a=!1,l;function c(f){return f==null||isNaN(f=+f)?l:o(i===0?.5:(f=(s(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}c.domain=function(f){return arguments.length?([t,e]=f,n=s(t=+t),r=s(e=+e),i=n===r?0:1/(r-n),c):[t,e]},c.clamp=function(f){return arguments.length?(a=!!f,c):a},c.interpolator=function(f){return arguments.length?(o=f,c):o};function u(f){return function(m){var g,x;return arguments.length?([g,x]=m,o=f(g,x),c):[o(0),o(1)]}}return c.range=u(Ux),c.rangeRound=u(h6),c.unknown=function(f){return arguments.length?(l=f,c):l},function(f){return s=f,n=f(t),r=f(e),i=n===r?0:1/(r-n),c}}function gh(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function kle(){var t=mh(V2()(Vs));return t.copy=function(){return gh(t,kle())},Ad.apply(t,arguments)}function Cle(){var t=y6(V2()).domain([1,10]);return t.copy=function(){return gh(t,Cle()).base(t.base())},Ad.apply(t,arguments)}function Nle(){var t=x6(V2());return t.copy=function(){return gh(t,Nle()).constant(t.constant())},Ad.apply(t,arguments)}function _6(){var t=v6(V2());return t.copy=function(){return gh(t,_6()).exponent(t.exponent())},Ad.apply(t,arguments)}function oBe(){return _6.apply(null,arguments).exponent(.5)}function _le(){var t=[],e=Vs;function n(r){if(r!=null&&!isNaN(r=+r))return e((j1(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(Jf),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,s)=>qLe(t,s/r))},n.copy=function(){return _le(e).domain(t)},Ad.apply(n,arguments)}function q2(){var t=0,e=.5,n=1,r=1,i,s,o,a,l,c=Vs,u,f=!1,m;function g(v){return isNaN(v=+v)?m:(v=.5+((v=+u(v))-s)*(r*v<r*s?a:l),c(f?Math.max(0,Math.min(1,v)):v))}g.domain=function(v){return arguments.length?([t,e,n]=v,i=u(t=+t),s=u(e=+e),o=u(n=+n),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),r=s<i?-1:1,g):[t,e,n]},g.clamp=function(v){return arguments.length?(f=!!v,g):f},g.interpolator=function(v){return arguments.length?(c=v,g):c};function x(v){return function(w){var E,C,k;return arguments.length?([E,C,k]=w,c=x8e(v,[E,C,k]),g):[c(0),c(.5),c(1)]}}return g.range=x(Ux),g.rangeRound=x(h6),g.unknown=function(v){return arguments.length?(m=v,g):m},function(v){return u=v,i=v(t),s=v(e),o=v(n),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),r=s<i?-1:1,g}}function Ile(){var t=mh(q2()(Vs));return t.copy=function(){return gh(t,Ile())},Ad.apply(t,arguments)}function Ple(){var t=y6(q2()).domain([.1,1,10]);return t.copy=function(){return gh(t,Ple()).base(t.base())},Ad.apply(t,arguments)}function Rle(){var t=x6(q2());return t.copy=function(){return gh(t,Rle()).constant(t.constant())},Ad.apply(t,arguments)}function I6(){var t=v6(q2());return t.copy=function(){return gh(t,I6()).exponent(t.exponent())},Ad.apply(t,arguments)}function aBe(){return I6.apply(null,arguments).exponent(.5)}const Ib=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:u6,scaleDiverging:Ile,scaleDivergingLog:Ple,scaleDivergingPow:I6,scaleDivergingSqrt:aBe,scaleDivergingSymlog:Rle,scaleIdentity:ule,scaleImplicit:VM,scaleLinear:cle,scaleLog:fle,scaleOrdinal:c6,scalePoint:WLe,scalePow:b6,scaleQuantile:mle,scaleQuantize:gle,scaleRadial:ple,scaleSequential:kle,scaleSequentialLog:Cle,scaleSequentialPow:_6,scaleSequentialQuantile:_le,scaleSequentialSqrt:oBe,scaleSequentialSymlog:Nle,scaleSqrt:$8e,scaleSymlog:hle,scaleThreshold:yle,scaleTime:iBe,scaleUtc:sBe,tickFormat:lle},Symbol.toStringTag,{value:"Module"}));var Td=t=>t.chartData,G2=Me([Td],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),P6=(t,e,n,r)=>r?G2(t):Td(t),Ole=(t,e,n)=>n?G2(t):Td(t);function sh(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(ur(e)&&ur(n))return!0}return!1}function hW(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function Mle(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,r]=t,i,s;if(ur(n))i=n;else if(typeof n=="function")return;if(ur(r))s=r;else if(typeof r=="function")return;var o=[i,s];if(sh(o))return o}}function lBe(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var r=t(e,n);if(sh(r))return hW(r,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[i,s]=t,o,a;if(i==="auto")e!=null&&(o=Math.min(...e));else if(bt(i))o=i;else if(typeof i=="function")try{e!=null&&(o=i(e==null?void 0:e[0]))}catch{}else if(typeof i=="string"&&kG.test(i)){var l=kG.exec(i);if(l==null||l[1]==null||e==null)o=void 0;else{var c=+l[1];o=e[0]-c}}else o=e==null?void 0:e[0];if(s==="auto")e!=null&&(a=Math.max(...e));else if(bt(s))a=s;else if(typeof s=="function")try{e!=null&&(a=s(e==null?void 0:e[1]))}catch{}else if(typeof s=="string"&&CG.test(s)){var u=CG.exec(s);if(u==null||u[1]==null||e==null)a=void 0;else{var f=+u[1];a=e[1]+f}}else a=e==null?void 0:e[1];var m=[o,a];if(sh(m))return e==null?m:hW(m,e,n)}}}var Fx=1e9,cBe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},O6,Cr=!0,Ha="[DecimalError] ",Zp=Ha+"Invalid argument: ",R6=Ha+"Exponent out of range: ",$x=Math.floor,tp=Math.pow,uBe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Vo,Oi=1e7,wr=7,Dle=9007199254740991,Rk=$x(Dle/wr),Ct={};Ct.absoluteValue=Ct.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Ct.comparedTo=Ct.cmp=function(t){var e,n,r,i,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(r=s.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return r===i?0:r>i^s.s<0?1:-1};Ct.decimalPlaces=Ct.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*wr;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Ct.dividedBy=Ct.div=function(t){return Wu(this,new this.constructor(t))};Ct.dividedToIntegerBy=Ct.idiv=function(t){var e=this,n=e.constructor;return lr(Wu(e,new n(t),0,1),n.precision)};Ct.equals=Ct.eq=function(t){return!this.cmp(t)};Ct.exponent=function(){return gi(this)};Ct.greaterThan=Ct.gt=function(t){return this.cmp(t)>0};Ct.greaterThanOrEqualTo=Ct.gte=function(t){return this.cmp(t)>=0};Ct.isInteger=Ct.isint=function(){return this.e>this.d.length-2};Ct.isNegative=Ct.isneg=function(){return this.s<0};Ct.isPositive=Ct.ispos=function(){return this.s>0};Ct.isZero=function(){return this.s===0};Ct.lessThan=Ct.lt=function(t){return this.cmp(t)<0};Ct.lessThanOrEqualTo=Ct.lte=function(t){return this.cmp(t)<1};Ct.logarithm=Ct.log=function(t){var e,n=this,r=n.constructor,i=r.precision,s=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(Vo))throw Error(Ha+"NaN");if(n.s<1)throw Error(Ha+(n.s?"NaN":"-Infinity"));return n.eq(Vo)?new r(0):(Cr=!1,e=Wu(jw(n,s),jw(t,s),s),Cr=!0,lr(e,i))};Ct.minus=Ct.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?jle(e,t):Lle(e,(t.s=-t.s,t))};Ct.modulo=Ct.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(Ha+"NaN");return n.s?(Cr=!1,e=Wu(n,t,0,1).times(t),Cr=!0,n.minus(e)):lr(new r(n),i)};Ct.naturalExponential=Ct.exp=function(){return Ble(this)};Ct.naturalLogarithm=Ct.ln=function(){return jw(this)};Ct.negated=Ct.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Ct.plus=Ct.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?Lle(e,t):jle(e,(t.s=-t.s,t))};Ct.precision=Ct.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Zp+t);if(e=gi(i)+1,r=i.d.length-1,n=r*wr+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Ct.squareRoot=Ct.sqrt=function(){var t,e,n,r,i,s,o,a=this,l=a.constructor;if(a.s<1){if(!a.s)return new l(0);throw Error(Ha+"NaN")}for(t=gi(a),Cr=!1,i=Math.sqrt(+a),i==0||i==1/0?(e=yc(a.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=$x((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new l(e)):r=new l(i.toString()),n=l.precision,i=o=n+3;;)if(s=r,r=s.plus(Wu(a,s,o+2)).times(.5),yc(s.d).slice(0,o)===(e=yc(r.d)).slice(0,o)){if(e=e.slice(o-3,o+1),i==o&&e=="4999"){if(lr(s,n+1,0),s.times(s).eq(a)){r=s;break}}else if(e!="9999")break;o+=4}return Cr=!0,lr(r,n)};Ct.times=Ct.mul=function(t){var e,n,r,i,s,o,a,l,c,u=this,f=u.constructor,m=u.d,g=(t=new f(t)).d;if(!u.s||!t.s)return new f(0);for(t.s*=u.s,n=u.e+t.e,l=m.length,c=g.length,l<c&&(s=m,m=g,g=s,o=l,l=c,c=o),s=[],o=l+c,r=o;r--;)s.push(0);for(r=c;--r>=0;){for(e=0,i=l+r;i>r;)a=s[i]+g[r]*m[i-r-1]+e,s[i--]=a%Oi|0,e=a/Oi|0;s[i]=(s[i]+e)%Oi|0}for(;!s[--o];)s.pop();return e?++n:s.shift(),t.d=s,t.e=n,Cr?lr(t,f.precision):t};Ct.toDecimalPlaces=Ct.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Pc(t,0,Fx),e===void 0?e=r.rounding:Pc(e,0,8),lr(n,t+gi(n)+1,e))};Ct.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=xm(r,!0):(Pc(t,0,Fx),e===void 0?e=i.rounding:Pc(e,0,8),r=lr(new i(r),t+1,e),n=xm(r,!0,t+1)),n};Ct.toFixed=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?xm(i):(Pc(t,0,Fx),e===void 0?e=s.rounding:Pc(e,0,8),r=lr(new s(i),t+gi(i)+1,e),n=xm(r.abs(),!1,t+gi(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Ct.toInteger=Ct.toint=function(){var t=this,e=t.constructor;return lr(new e(t),gi(t)+1,e.rounding)};Ct.toNumber=function(){return+this};Ct.toPower=Ct.pow=function(t){var e,n,r,i,s,o,a=this,l=a.constructor,c=12,u=+(t=new l(t));if(!t.s)return new l(Vo);if(a=new l(a),!a.s){if(t.s<1)throw Error(Ha+"Infinity");return a}if(a.eq(Vo))return a;if(r=l.precision,t.eq(Vo))return lr(a,r);if(e=t.e,n=t.d.length-1,o=e>=n,s=a.s,o){if((n=u<0?-u:u)<=Dle){for(i=new l(Vo),e=Math.ceil(r/wr+4),Cr=!1;n%2&&(i=i.times(a),mW(i.d,e)),n=$x(n/2),n!==0;)a=a.times(a),mW(a.d,e);return Cr=!0,t.s<0?new l(Vo).div(i):lr(i,r)}}else if(s<0)throw Error(Ha+"NaN");return s=s<0&&t.d[Math.max(e,n)]&1?-1:1,a.s=1,Cr=!1,i=t.times(jw(a,r+c)),Cr=!0,i=Ble(i),i.s=s,i};Ct.toPrecision=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?(n=gi(i),r=xm(i,n<=s.toExpNeg||n>=s.toExpPos)):(Pc(t,1,Fx),e===void 0?e=s.rounding:Pc(e,0,8),i=lr(new s(i),t,e),n=gi(i),r=xm(i,t<=n||n<=s.toExpNeg,t)),r};Ct.toSignificantDigits=Ct.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Pc(t,1,Fx),e===void 0?e=r.rounding:Pc(e,0,8)),lr(new r(n),t,e)};Ct.toString=Ct.valueOf=Ct.val=Ct.toJSON=Ct[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=gi(t),n=t.constructor;return xm(t,e<=n.toExpNeg||e>=n.toExpPos)};function Lle(t,e){var n,r,i,s,o,a,l,c,u=t.constructor,f=u.precision;if(!t.s||!e.s)return e.s||(e=new u(t)),Cr?lr(e,f):e;if(l=t.d,c=e.d,o=t.e,i=e.e,l=l.slice(),s=o-i,s){for(s<0?(r=l,s=-s,a=c.length):(r=c,i=o,a=l.length),o=Math.ceil(f/wr),a=o>a?o+1:a+1,s>a&&(s=a,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(a=l.length,s=c.length,a-s<0&&(s=a,r=c,c=l,l=r),n=0;s;)n=(l[--s]=l[s]+c[s]+n)/Oi|0,l[s]%=Oi;for(n&&(l.unshift(n),++i),a=l.length;l[--a]==0;)l.pop();return e.d=l,e.e=i,Cr?lr(e,f):e}function Pc(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Zp+t)}function yc(t){var e,n,r,i=t.length-1,s="",o=t[0];if(i>0){for(s+=o,e=1;e<i;e++)r=t[e]+"",n=wr-r.length,n&&(s+=wf(n)),s+=r;o=t[e],r=o+"",n=wr-r.length,n&&(s+=wf(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var Wu=(function(){function t(r,i){var s,o=0,a=r.length;for(r=r.slice();a--;)s=r[a]*i+o,r[a]=s%Oi|0,o=s/Oi|0;return o&&r.unshift(o),r}function e(r,i,s,o){var a,l;if(s!=o)l=s>o?1:-1;else for(a=l=0;a<s;a++)if(r[a]!=i[a]){l=r[a]>i[a]?1:-1;break}return l}function n(r,i,s){for(var o=0;s--;)r[s]-=o,o=r[s]<i[s]?1:0,r[s]=o*Oi+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,o){var a,l,c,u,f,m,g,x,v,w,E,C,k,O,j,R,U,V,F=r.constructor,$=r.s==i.s?1:-1,K=r.d,H=i.d;if(!r.s)return new F(r);if(!i.s)throw Error(Ha+"Division by zero");for(l=r.e-i.e,U=H.length,j=K.length,g=new F($),x=g.d=[],c=0;H[c]==(K[c]||0);)++c;if(H[c]>(K[c]||0)&&--l,s==null?C=s=F.precision:o?C=s+(gi(r)-gi(i))+1:C=s,C<0)return new F(0);if(C=C/wr+2|0,c=0,U==1)for(u=0,H=H[0],C++;(c<j||u)&&C--;c++)k=u*Oi+(K[c]||0),x[c]=k/H|0,u=k%H|0;else{for(u=Oi/(H[0]+1)|0,u>1&&(H=t(H,u),K=t(K,u),U=H.length,j=K.length),O=U,v=K.slice(0,U),w=v.length;w<U;)v[w++]=0;V=H.slice(),V.unshift(0),R=H[0],H[1]>=Oi/2&&++R;do u=0,a=e(H,v,U,w),a<0?(E=v[0],U!=w&&(E=E*Oi+(v[1]||0)),u=E/R|0,u>1?(u>=Oi&&(u=Oi-1),f=t(H,u),m=f.length,w=v.length,a=e(f,v,m,w),a==1&&(u--,n(f,U<m?V:H,m))):(u==0&&(a=u=1),f=H.slice()),m=f.length,m<w&&f.unshift(0),n(v,f,w),a==-1&&(w=v.length,a=e(H,v,U,w),a<1&&(u++,n(v,U<w?V:H,w))),w=v.length):a===0&&(u++,v=[0]),x[c++]=u,a&&v[0]?v[w++]=K[O]||0:(v=[K[O]],w=1);while((O++<j||v[0]!==void 0)&&C--)}return x[0]||x.shift(),g.e=l,lr(g,o?s+gi(g)+1:s)}})();function Ble(t,e){var n,r,i,s,o,a,l=0,c=0,u=t.constructor,f=u.precision;if(gi(t)>16)throw Error(R6+gi(t));if(!t.s)return new u(Vo);for(Cr=!1,a=f,o=new u(.03125);t.abs().gte(.1);)t=t.times(o),c+=5;for(r=Math.log(tp(2,c))/Math.LN10*2+5|0,a+=r,n=i=s=new u(Vo),u.precision=a;;){if(i=lr(i.times(t),a),n=n.times(++l),o=s.plus(Wu(i,n,a)),yc(o.d).slice(0,a)===yc(s.d).slice(0,a)){for(;c--;)s=lr(s.times(s),a);return u.precision=f,e==null?(Cr=!0,lr(s,f)):s}s=o}}function gi(t){for(var e=t.e*wr,n=t.d[0];n>=10;n/=10)e++;return e}function s5(t,e,n){if(e>t.LN10.sd())throw Cr=!0,n&&(t.precision=n),Error(Ha+"LN10 precision limit exceeded");return lr(new t(t.LN10),e)}function wf(t){for(var e="";t--;)e+="0";return e}function jw(t,e){var n,r,i,s,o,a,l,c,u,f=1,m=10,g=t,x=g.d,v=g.constructor,w=v.precision;if(g.s<1)throw Error(Ha+(g.s?"NaN":"-Infinity"));if(g.eq(Vo))return new v(0);if(e==null?(Cr=!1,c=w):c=e,g.eq(10))return e==null&&(Cr=!0),s5(v,c);if(c+=m,v.precision=c,n=yc(x),r=n.charAt(0),s=gi(g),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)g=g.times(t),n=yc(g.d),r=n.charAt(0),f++;s=gi(g),r>1?(g=new v("0."+n),s++):g=new v(r+"."+n.slice(1))}else return l=s5(v,c+2,w).times(s+""),g=jw(new v(r+"."+n.slice(1)),c-m).plus(l),v.precision=w,e==null?(Cr=!0,lr(g,w)):g;for(a=o=g=Wu(g.minus(Vo),g.plus(Vo),c),u=lr(g.times(g),c),i=3;;){if(o=lr(o.times(u),c),l=a.plus(Wu(o,new v(i),c)),yc(l.d).slice(0,c)===yc(a.d).slice(0,c))return a=a.times(2),s!==0&&(a=a.plus(s5(v,c+2,w).times(s+""))),a=Wu(a,new v(f),c),v.precision=w,e==null?(Cr=!0,lr(a,w)):a;a=l,i+=2}}function pW(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=$x(n/wr),t.d=[],r=(n+1)%wr,n<0&&(r+=wr),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=wr;r<i;)t.d.push(+e.slice(r,r+=wr));e=e.slice(r),r=wr-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),Cr&&(t.e>Rk||t.e<-Rk))throw Error(R6+n)}else t.s=0,t.e=0,t.d=[0];return t}function lr(t,e,n){var r,i,s,o,a,l,c,u,f=t.d;for(o=1,s=f[0];s>=10;s/=10)o++;if(r=e-o,r<0)r+=wr,i=e,c=f[u=0];else{if(u=Math.ceil((r+1)/wr),s=f.length,u>=s)return t;for(c=s=f[u],o=1;s>=10;s/=10)o++;r%=wr,i=r-wr+o}if(n!==void 0&&(s=tp(10,o-i-1),a=c/s%10|0,l=e<0||f[u+1]!==void 0||c%s,l=n<4?(a||l)&&(n==0||n==(t.s<0?3:2)):a>5||a==5&&(n==4||l||n==6&&(r>0?i>0?c/tp(10,o-i):0:f[u-1])%10&1||n==(t.s<0?8:7))),e<1||!f[0])return l?(s=gi(t),f.length=1,e=e-s-1,f[0]=tp(10,(wr-e%wr)%wr),t.e=$x(-e/wr)||0):(f.length=1,f[0]=t.e=t.s=0),t;if(r==0?(f.length=u,s=1,u--):(f.length=u+1,s=tp(10,wr-r),f[u]=i>0?(c/tp(10,o-i)%tp(10,i)|0)*s:0),l)for(;;)if(u==0){(f[0]+=s)==Oi&&(f[0]=1,++t.e);break}else{if(f[u]+=s,f[u]!=Oi)break;f[u--]=0,s=1}for(r=f.length;f[--r]===0;)f.pop();if(Cr&&(t.e>Rk||t.e<-Rk))throw Error(R6+gi(t));return t}function jle(t,e){var n,r,i,s,o,a,l,c,u,f,m=t.constructor,g=m.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new m(t),Cr?lr(e,g):e;if(l=t.d,f=e.d,r=e.e,c=t.e,l=l.slice(),o=c-r,o){for(u=o<0,u?(n=l,o=-o,a=f.length):(n=f,r=c,a=l.length),i=Math.max(Math.ceil(g/wr),a)+2,o>i&&(o=i,n.length=1),n.reverse(),i=o;i--;)n.push(0);n.reverse()}else{for(i=l.length,a=f.length,u=i<a,u&&(a=i),i=0;i<a;i++)if(l[i]!=f[i]){u=l[i]<f[i];break}o=0}for(u&&(n=l,l=f,f=n,e.s=-e.s),a=l.length,i=f.length-a;i>0;--i)l[a++]=0;for(i=f.length;i>o;){if(l[--i]<f[i]){for(s=i;s&&l[--s]===0;)l[s]=Oi-1;--l[s],l[i]+=Oi}l[i]-=f[i]}for(;l[--a]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,Cr?lr(e,g):e):new m(0)}function xm(t,e,n){var r,i=gi(t),s=yc(t.d),o=s.length;return e?(n&&(r=n-o)>0?s=s.charAt(0)+"."+s.slice(1)+wf(r):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+wf(-i-1)+s,n&&(r=n-o)>0&&(s+=wf(r))):i>=o?(s+=wf(i+1-o),n&&(r=n-i-1)>0&&(s=s+"."+wf(r))):((r=i+1)<o&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(s+="."),s+=wf(r))),t.s<0?"-"+s:s}function mW(t,e){if(t.length>e)return t.length=e,!0}function Ule(t){var e,n,r;function i(s){var o=this;if(!(o instanceof i))return new i(s);if(o.constructor=i,s instanceof i){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(Zp+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return pW(o,s.toString())}else if(typeof s!="string")throw Error(Zp+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,uBe.test(s))pW(o,s);else throw Error(Zp+s)}if(i.prototype=Ct,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=Ule,i.config=i.set=dBe,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function dBe(t){if(!t||typeof t!="object")throw Error(Ha+"Object expected");var e,n,r,i=["precision",1,Fx,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if($x(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(Zp+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Zp+n+": "+r);return this}var O6=Ule(cBe);Vo=new O6(1);const Qn=O6;var fBe=t=>t,Fle={},$le=t=>t===Fle,gW=t=>function e(){return arguments.length===0||arguments.length===1&&$le(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},zle=(t,e)=>t===1?e:gW(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=r.filter(o=>o!==Fle).length;return s>=t?e(...r):zle(t-s,gW(function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];var c=r.map(u=>$le(u)?a.shift():u);return e(...c,...a)}))}),hBe=t=>zle(t.length,t),WM=(t,e)=>{for(var n=[],r=t;r<e;++r)n[r-t]=r;return n},pBe=hBe((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(n=>e[n]).map(t)),mBe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return fBe;var i=n.reverse(),s=i[0],o=i.slice(1);return function(){return o.reduce((a,l)=>l(a),s(...arguments))}};function Hle(t){var e;return t===0?e=1:e=Math.floor(new Qn(t).abs().log(10).toNumber())+1,e}function Vle(t,e,n){for(var r=new Qn(t),i=0,s=[];r.lt(e)&&i<1e5;)s.push(r.toNumber()),r=r.add(n),i++;return s}var qle=t=>{var[e,n]=t,[r,i]=[e,n];return e>n&&([r,i]=[n,e]),[r,i]},Gle=(t,e,n)=>{if(t.lte(0))return new Qn(0);var r=Hle(t.toNumber()),i=new Qn(10).pow(r),s=t.div(i),o=r!==1?.05:.1,a=new Qn(Math.ceil(s.div(o).toNumber())).add(n).mul(o),l=a.mul(i);return e?new Qn(l.toNumber()):new Qn(Math.ceil(l.toNumber()))},gBe=(t,e,n)=>{var r=new Qn(1),i=new Qn(t);if(!i.isint()&&n){var s=Math.abs(t);s<1?(r=new Qn(10).pow(Hle(t)-1),i=new Qn(Math.floor(i.div(r).toNumber())).mul(r)):s>1&&(i=new Qn(Math.floor(t)))}else t===0?i=new Qn(Math.floor((e-1)/2)):n||(i=new Qn(Math.floor(t)));var o=Math.floor((e-1)/2),a=mBe(pBe(l=>i.add(new Qn(l-o).mul(r)).toNumber()),WM);return a(0,e)},Kle=function(e,n,r,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(r-1)))return{step:new Qn(0),tickMin:new Qn(0),tickMax:new Qn(0)};var o=Gle(new Qn(n).sub(e).div(r-1),i,s),a;e<=0&&n>=0?a=new Qn(0):(a=new Qn(e).add(n).div(2),a=a.sub(new Qn(a).mod(o)));var l=Math.ceil(a.sub(e).div(o).toNumber()),c=Math.ceil(new Qn(n).sub(a).div(o).toNumber()),u=l+c+1;return u>r?Kle(e,n,r,i,s+1):(u<r&&(c=n>0?c+(r-u):c,l=n>0?l:l+(r-u)),{step:o,tickMin:a.sub(new Qn(l).mul(o)),tickMax:a.add(new Qn(c).mul(o))})},yBe=function(e){var[n,r]=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(i,2),[a,l]=qle([n,r]);if(a===-1/0||l===1/0){var c=l===1/0?[a,...WM(0,i-1).map(()=>1/0)]:[...WM(0,i-1).map(()=>-1/0),l];return n>r?c.reverse():c}if(a===l)return gBe(a,i,s);var{step:u,tickMin:f,tickMax:m}=Kle(a,l,o,s,0),g=Vle(f,m.add(new Qn(.1).mul(u)),u);return n>r?g.reverse():g},xBe=function(e,n){var[r,i]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[o,a]=qle([r,i]);if(o===-1/0||a===1/0)return[r,i];if(o===a)return[o];var l=Math.max(n,2),c=Gle(new Qn(a).sub(o).div(l-1),s,0),u=[...Vle(new Qn(o),new Qn(a),c),a];return s===!1&&(u=u.map(f=>Math.round(f))),r>i?u.reverse():u},Wle=t=>t.rootProps.maxBarSize,vBe=t=>t.rootProps.barGap,Yle=t=>t.rootProps.barCategoryGap,bBe=t=>t.rootProps.barSize,z1=t=>t.rootProps.stackOffset,Jle=t=>t.rootProps.reverseStackOrder,M6=t=>t.options.chartName,D6=t=>t.rootProps.syncId,Xle=t=>t.rootProps.syncMethod,L6=t=>t.options.eventEmitter,wBe=t=>t.rootProps.baseValue,ri={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Du={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Uo={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},K2=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},EBe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Du.angleAxisId,includeHidden:!1,name:void 0,reversed:Du.reversed,scale:Du.scale,tick:Du.tick,tickCount:void 0,ticks:void 0,type:Du.type,unit:void 0},SBe={allowDataOverflow:Uo.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Uo.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Uo.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Uo.scale,tick:Uo.tick,tickCount:Uo.tickCount,ticks:void 0,type:Uo.type,unit:void 0},ABe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Du.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Du.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Du.scale,tick:Du.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},TBe={allowDataOverflow:Uo.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Uo.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Uo.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Uo.scale,tick:Uo.tick,tickCount:Uo.tickCount,ticks:void 0,type:"category",unit:void 0},B6=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?ABe:EBe,j6=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?TBe:SBe,W2=t=>t.polarOptions,U6=Me([Ed,Sd,Si],Wae),Qle=Me([W2,U6],(t,e)=>{if(t!=null)return _s(t.innerRadius,e,0)}),Zle=Me([W2,U6],(t,e)=>{if(t!=null)return _s(t.outerRadius,e,e*.8)}),kBe=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},ece=Me([W2],kBe);Me([B6,ece],K2);var tce=Me([U6,Qle,Zle],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});Me([j6,tce],K2);var nce=Me([An,W2,Qle,Zle,Ed,Sd],(t,e,n,r,i,s)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||r==null)){var{cx:o,cy:a,startAngle:l,endAngle:c}=e;return{cx:_s(o,i,i/2),cy:_s(a,s,s/2),innerRadius:n,outerRadius:r,startAngle:l,endAngle:c,clockWise:!1}}}),Ir=(t,e)=>e,H1=(t,e,n)=>n;function Y2(t){return t==null?void 0:t.id}function rce(t,e,n){var{chartData:r=[]}=e,{allowDuplicatedCategory:i,dataKey:s}=n,o=new Map;return t.forEach(a=>{var l,c=(l=a.data)!==null&&l!==void 0?l:r;if(!(c==null||c.length===0)){var u=Y2(a);c.forEach((f,m)=>{var g=s==null||i?m:String(Wn(f,s,null)),x=Wn(f,a.dataKey,0),v;o.has(g)?v=o.get(g):v={},Object.assign(v,{[u]:x}),o.set(g,v)})}}),Array.from(o.values())}function J2(t){return"stackId"in t&&t.stackId!=null&&t.dataKey!=null}var X2=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function Q2(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function CBe(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return!1}var Ti=t=>{var e=An(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},zx=t=>t.tooltip.settings.axisId;function yW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ok(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yW(Object(n),!0).forEach(function(r){NBe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function NBe(t,e,n){return(e=_Be(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _Be(t){var e=IBe(t,"string");return typeof e=="symbol"?e:e+""}function IBe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var YM=[0,"auto"],Ni={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},ice=(t,e)=>t.cartesianAxis.xAxis[e],kd=(t,e)=>{var n=ice(t,e);return n??Ni},_i={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:YM,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:D1},sce=(t,e)=>t.cartesianAxis.yAxis[e],Cd=(t,e)=>{var n=sce(t,e);return n??_i},PBe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},F6=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??PBe},jr=(t,e,n)=>{switch(e){case"xAxis":return kd(t,n);case"yAxis":return Cd(t,n);case"zAxis":return F6(t,n);case"angleAxis":return B6(t,n);case"radiusAxis":return j6(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},RBe=(t,e,n)=>{switch(e){case"xAxis":return kd(t,n);case"yAxis":return Cd(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},V1=(t,e,n)=>{switch(e){case"xAxis":return kd(t,n);case"yAxis":return Cd(t,n);case"angleAxis":return B6(t,n);case"radiusAxis":return j6(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},oce=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function $6(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var q1=t=>t.graphicalItems.cartesianItems,OBe=Me([Ir,H1],$6),z6=(t,e,n)=>t.filter(n).filter(r=>(e==null?void 0:e.includeHidden)===!0?!0:!r.hide),G1=Me([q1,jr,OBe],z6,{memoizeOptions:{resultEqualityCheck:Q2}}),ace=Me([G1],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(J2)),lce=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),MBe=Me([G1],lce),H6=t=>t.map(e=>e.data).filter(Boolean).flat(1),DBe=Me([G1],H6,{memoizeOptions:{resultEqualityCheck:Q2}}),V6=(t,e)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=e;return t.length>0?t:n.slice(r,i+1)},q6=Me([DBe,P6],V6),G6=(t,e,n)=>(e==null?void 0:e.dataKey)!=null?t.map(r=>({value:Wn(r,e.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>t.map(i=>({value:Wn(i,r)}))):t.map(r=>({value:r})),Z2=Me([q6,jr,G1],G6);function cce(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function dT(t){if(_c(t)||t instanceof Date){var e=Number(t);if(ur(e))return e}}function xW(t){if(Array.isArray(t)){var e=[dT(t[0]),dT(t[1])];return sh(e)?e:void 0}var n=dT(t);if(n!=null)return[n,n]}function md(t){return t.map(dT).filter(X5e)}function LBe(t,e,n){return!n||typeof e!="number"||$a(e)?[]:n.length?md(n.flatMap(r=>{var i=Wn(t,r.dataKey),s,o;if(Array.isArray(i)?[s,o]=i:s=o=i,!(!ur(s)||!ur(o)))return[e-s,e+o]})):[]}var ki=t=>{var e=Ti(t),n=zx(t);return V1(t,e,n)},K1=Me([ki],t=>t==null?void 0:t.dataKey),BBe=Me([ace,P6,ki],rce),uce=(t,e,n,r)=>{var i={},s=e.reduce((o,a)=>{if(a.stackId==null)return o;var l=o[a.stackId];return l==null&&(l=[]),l.push(a),o[a.stackId]=l,o},i);return Object.fromEntries(Object.entries(s).map(o=>{var[a,l]=o,c=r?[...l].reverse():l,u=c.map(Y2);return[a,{stackedData:gMe(t,u,n),graphicalItems:c}]}))},Mk=Me([BBe,ace,z1,Jle],uce),dce=(t,e,n,r)=>{var{dataStartIndex:i,dataEndIndex:s}=e;if(r==null&&n!=="zAxis"){var o=bMe(t,i,s);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},jBe=Me([jr],t=>t.allowDataOverflow),K6=t=>{var e;if(t==null||!("domain"in t))return YM;if(t.domain!=null)return t.domain;if("ticks"in t&&t.ticks!=null){if(t.type==="number"){var n=md(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t==null?void 0:t.domain)!==null&&e!==void 0?e:YM},W6=Me([jr],K6),Y6=Me([W6,jBe],Mle),UBe=Me([Mk,Td,Ir,Y6],dce,{memoizeOptions:{resultEqualityCheck:X2}}),eN=t=>t.errorBars,FBe=(t,e,n)=>t.flatMap(r=>e[r.id]).filter(Boolean).filter(r=>cce(n,r)),Dk=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var s=i.flat(),o=Math.min(...s),a=Math.max(...s);return[o,a]}},J6=(t,e,n,r,i)=>{var s,o;if(n.length>0&&t.forEach(a=>{n.forEach(l=>{var c,u,f=(c=r[l.id])===null||c===void 0?void 0:c.filter(E=>cce(i,E)),m=Wn(a,(u=e.dataKey)!==null&&u!==void 0?u:l.dataKey),g=LBe(a,m,f);if(g.length>=2){var x=Math.min(...g),v=Math.max(...g);(s==null||x<s)&&(s=x),(o==null||v>o)&&(o=v)}var w=xW(m);w!=null&&(s=s==null?w[0]:Math.min(s,w[0]),o=o==null?w[1]:Math.max(o,w[1]))})}),(e==null?void 0:e.dataKey)!=null&&t.forEach(a=>{var l=xW(Wn(a,e.dataKey));l!=null&&(s=s==null?l[0]:Math.min(s,l[0]),o=o==null?l[1]:Math.max(o,l[1]))}),ur(s)&&ur(o))return[s,o]},$Be=Me([q6,jr,MBe,eN,Ir],J6,{memoizeOptions:{resultEqualityCheck:X2}});function zBe(t){var{value:e}=t;if(_c(e)||e instanceof Date)return e}var HBe=(t,e,n)=>{var r=t.map(zBe).filter(i=>i!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&Toe(r))?Qae(0,t.length):e.allowDuplicatedCategory?r:Array.from(new Set(r))},fce=t=>t.referenceElements.dots,Hx=(t,e,n)=>t.filter(r=>r.ifOverflow==="extendDomain").filter(r=>e==="xAxis"?r.xAxisId===n:r.yAxisId===n),VBe=Me([fce,Ir,H1],Hx),hce=t=>t.referenceElements.areas,qBe=Me([hce,Ir,H1],Hx),pce=t=>t.referenceElements.lines,GBe=Me([pce,Ir,H1],Hx),mce=(t,e)=>{if(t!=null){var n=md(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},KBe=Me(VBe,Ir,mce),gce=(t,e)=>{if(t!=null){var n=md(t.flatMap(r=>[e==="xAxis"?r.x1:r.y1,e==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},WBe=Me([qBe,Ir],gce);function YBe(t){var e;if(t.x!=null)return md([t.x]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.x);return n==null||n.length===0?[]:md(n)}function JBe(t){var e;if(t.y!=null)return md([t.y]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.y);return n==null||n.length===0?[]:md(n)}var yce=(t,e)=>{if(t!=null){var n=t.flatMap(r=>e==="xAxis"?YBe(r):JBe(r));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},XBe=Me([GBe,Ir],yce),QBe=Me(KBe,XBe,WBe,(t,e,n)=>Dk(t,n,e)),X6=(t,e,n,r,i,s,o,a)=>{if(n!=null)return n;var l=o==="vertical"&&a==="xAxis"||o==="horizontal"&&a==="yAxis",c=l?Dk(r,s,i):Dk(s,i);return lBe(e,c,t.allowDataOverflow)},ZBe=Me([jr,W6,Y6,UBe,$Be,QBe,An,Ir],X6,{memoizeOptions:{resultEqualityCheck:X2}}),eje=[0,1],Q6=(t,e,n,r,i,s,o)=>{if(!((t==null||n==null||n.length===0)&&o===void 0)){var{dataKey:a,type:l}=t,c=Lc(e,s);if(c&&a==null){var u;return Qae(0,(u=n==null?void 0:n.length)!==null&&u!==void 0?u:0)}return l==="category"?HBe(r,t,c):i==="expand"?eje:o}},Z6=Me([jr,An,q6,Z2,z1,Ir,ZBe],Q6),xce=(t,e,n,r,i)=>{if(t!=null){var{scale:s,type:o}=t;if(s==="auto")return e==="radial"&&i==="radiusAxis"?"band":e==="radial"&&i==="angleAxis"?"linear":o==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":o==="category"?"band":"linear";if(typeof s=="string"){var a="scale".concat(I1(s));return a in Ib?a:"point"}}},Vx=Me([jr,An,oce,M6,Ir],xce);function tje(t){if(t!=null){if(t in Ib)return Ib[t]();var e="scale".concat(I1(t));if(e in Ib)return Ib[e]()}}function eB(t,e,n,r){if(!(n==null||r==null)){if(typeof t.scale=="function")return t.scale.copy().domain(n).range(r);var i=tje(e);if(i!=null){var s=i.domain(n).range(r);return dMe(s),s}}}var tB=(t,e,n)=>{var r=K6(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&sh(t))return yBe(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&sh(t))return xBe(t,e.tickCount,e.allowDecimals)}},nB=Me([Z6,V1,Vx],tB),rB=(t,e,n,r)=>{if(r!=="angleAxis"&&(t==null?void 0:t.type)==="number"&&sh(e)&&Array.isArray(n)&&n.length>0){var i=e[0],s=n[0],o=e[1],a=n[n.length-1];return[Math.min(i,s),Math.max(o,a)]}return e},nje=Me([jr,Z6,nB,Ir],rB),rje=Me(Z2,jr,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,r=Array.from(md(t.map(f=>f.value))).sort((f,m)=>f-m),i=r[0],s=r[r.length-1];if(i==null||s==null)return 1/0;var o=s-i;if(o===0)return 1/0;for(var a=0;a<r.length-1;a++){var l=r[a],c=r[a+1];if(!(l==null||c==null)){var u=c-l;n=Math.min(n,u)}}return n/o}}),vce=Me(rje,An,Yle,Si,(t,e,n,r,i)=>i,(t,e,n,r,i)=>{if(!ur(t))return 0;var s=e==="vertical"?r.height:r.width;if(i==="gap")return t*s/2;if(i==="no-gap"){var o=_s(n,t*s),a=t*s/2;return a-o-(a-o)/s*o}return 0}),ije=(t,e,n)=>{var r=kd(t,e);return r==null||typeof r.padding!="string"?0:vce(t,"xAxis",e,n,r.padding)},sje=(t,e,n)=>{var r=Cd(t,e);return r==null||typeof r.padding!="string"?0:vce(t,"yAxis",e,n,r.padding)},oje=Me(kd,ije,(t,e)=>{var n,r;if(t==null)return{left:0,right:0};var{padding:i}=t;return typeof i=="string"?{left:e,right:e}:{left:((n=i.left)!==null&&n!==void 0?n:0)+e,right:((r=i.right)!==null&&r!==void 0?r:0)+e}}),aje=Me(Cd,sje,(t,e)=>{var n,r;if(t==null)return{top:0,bottom:0};var{padding:i}=t;return typeof i=="string"?{top:e,bottom:e}:{top:((n=i.top)!==null&&n!==void 0?n:0)+e,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+e}}),lje=Me([Si,oje,M2,O2,(t,e,n)=>n],(t,e,n,r,i)=>{var{padding:s}=r;return i?[s.left,n.width-s.right]:[t.left+e.left,t.left+t.width-e.right]}),cje=Me([Si,An,aje,M2,O2,(t,e,n)=>n],(t,e,n,r,i,s)=>{var{padding:o}=i;return s?[r.height-o.bottom,o.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),W1=(t,e,n,r)=>{var i;switch(e){case"xAxis":return lje(t,n,r);case"yAxis":return cje(t,n,r);case"zAxis":return(i=F6(t,n))===null||i===void 0?void 0:i.range;case"angleAxis":return ece(t);case"radiusAxis":return tce(t,n);default:return}},bce=Me([jr,W1],K2),tN=Me([jr,Vx,nje,bce],eB);Me([G1,eN,Ir],FBe);function wce(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var nN=(t,e)=>e,rN=(t,e,n)=>n,uje=Me(P2,nN,rN,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(wce)),dje=Me(R2,nN,rN,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(wce)),Ece=(t,e)=>({width:t.width,height:e.height}),fje=(t,e)=>{var n=typeof e.width=="number"?e.width:D1;return{width:n,height:t.height}},Sce=Me(Si,kd,Ece),hje=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},pje=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},mje=Me(Sd,Si,uje,nN,rN,(t,e,n,r,i)=>{var s={},o;return n.forEach(a=>{var l=Ece(e,a);o==null&&(o=hje(e,r,t));var c=r==="top"&&!i||r==="bottom"&&i;s[a.id]=o-Number(c)*l.height,o+=(c?-1:1)*l.height}),s}),gje=Me(Ed,Si,dje,nN,rN,(t,e,n,r,i)=>{var s={},o;return n.forEach(a=>{var l=fje(e,a);o==null&&(o=pje(e,r,t));var c=r==="left"&&!i||r==="right"&&i;s[a.id]=o-Number(c)*l.width,o+=(c?-1:1)*l.width}),s}),yje=(t,e)=>{var n=kd(t,e);if(n!=null)return mje(t,n.orientation,n.mirror)},xje=Me([Si,kd,yje,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n==null?void 0:n[r];return i==null?{x:t.left,y:0}:{x:t.left,y:i}}}),vje=(t,e)=>{var n=Cd(t,e);if(n!=null)return gje(t,n.orientation,n.mirror)},bje=Me([Si,Cd,vje,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n==null?void 0:n[r];return i==null?{x:0,y:t.top}:{x:i,y:t.top}}}),Ace=Me(Si,Cd,(t,e)=>{var n=typeof e.width=="number"?e.width:D1;return{width:n,height:t.height}}),vW=(t,e,n)=>{switch(e){case"xAxis":return Sce(t,n).width;case"yAxis":return Ace(t,n).height;default:return}},Tce=(t,e,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:s,dataKey:o}=n,a=Lc(t,r),l=e.map(c=>c.value);if(o&&a&&s==="category"&&i&&Toe(l))return l}},iB=Me([An,Z2,jr,Ir],Tce),kce=(t,e,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:s}=n,o=Lc(t,r);if(o&&(i==="number"||s!=="auto"))return e.map(a=>a.value)}},sB=Me([An,Z2,V1,Ir],kce),bW=Me([An,RBe,Vx,tN,iB,sB,W1,nB,Ir],(t,e,n,r,i,s,o,a,l)=>{if(e!=null){var c=Lc(t,l);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:l,categoricalDomain:s,duplicateDomain:i,isCategorical:c,niceTicks:a,range:o,realScaleType:n,scale:r}}}),wje=(t,e,n,r,i,s,o,a,l)=>{if(!(e==null||r==null)){var c=Lc(t,l),{type:u,ticks:f,tickCount:m}=e,g=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,x=u==="category"&&r.bandwidth?r.bandwidth()/g:0;x=l==="angleAxis"&&s!=null&&s.length>=2?ji(s[0]-s[1])*2*x:x;var v=f||i;if(v){var w=v.map((E,C)=>{var k=o?o.indexOf(E):E;return{index:C,coordinate:r(k)+x,value:E,offset:x}});return w.filter(E=>ur(E.coordinate))}return c&&a?a.map((E,C)=>({coordinate:r(E)+x,value:E,index:C,offset:x})).filter(E=>ur(E.coordinate)):r.ticks?r.ticks(m).map(E=>({coordinate:r(E)+x,value:E,offset:x})):r.domain().map((E,C)=>({coordinate:r(E)+x,value:o?o[E]:E,index:C,offset:x}))}},Cce=Me([An,V1,Vx,tN,nB,W1,iB,sB,Ir],wje),Eje=(t,e,n,r,i,s,o)=>{if(!(e==null||n==null||r==null||r[0]===r[1])){var a=Lc(t,o),{tickCount:l}=e,c=0;return c=o==="angleAxis"&&(r==null?void 0:r.length)>=2?ji(r[0]-r[1])*2*c:c,a&&s?s.map((u,f)=>({coordinate:n(u)+c,value:u,index:f,offset:c})):n.ticks?n.ticks(l).map(u=>({coordinate:n(u)+c,value:u,offset:c})):n.domain().map((u,f)=>({coordinate:n(u)+c,value:i?i[u]:u,index:f,offset:c}))}},Rc=Me([An,V1,tN,W1,iB,sB,Ir],Eje),Oc=Me(jr,tN,(t,e)=>{if(!(t==null||e==null))return Ok(Ok({},t),{},{scale:e})}),Sje=Me([jr,Vx,Z6,bce],eB);Me((t,e,n)=>F6(t,n),Sje,(t,e)=>{if(!(t==null||e==null))return Ok(Ok({},t),{},{scale:e})});var Aje=Me([An,P2,R2],(t,e,n)=>{switch(t){case"horizontal":return e.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),Nce=t=>t.options.defaultTooltipEventType,_ce=t=>t.options.validateTooltipEventTypes;function Ice(t,e,n){if(t==null)return e;var r=t?"axis":"item";return n==null?e:n.includes(r)?r:e}function oB(t,e){var n=Nce(t),r=_ce(t);return Ice(e,n,r)}function Tje(t){return Pt(e=>oB(e,t))}var Pce=(t,e)=>{var n,r=Number(e);if(!($a(r)||e==null))return r>=0?t==null||(n=t[r])===null||n===void 0?void 0:n.value:void 0},kje=t=>t.tooltip.settings,kf={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},Cje={itemInteraction:{click:kf,hover:kf},axisInteraction:{click:kf,hover:kf},keyboardInteraction:kf,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Rce=yo({name:"tooltip",initialState:Cje,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:Tr()},replaceTooltipEntrySettings:{reducer(t,e){var{prev:n,next:r}=e.payload,i=bl(t).tooltipItemPayloads.indexOf(n);i>-1&&(t.tooltipItemPayloads[i]=r)},prepare:Tr()},removeTooltipEntrySettings:{reducer(t,e){var n=bl(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},prepare:Tr()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate}}}),{addTooltipEntrySettings:Nje,replaceTooltipEntrySettings:_je,removeTooltipEntrySettings:Ije,setTooltipSettingsState:Pje,setActiveMouseOverItemIndex:Oce,mouseLeaveItem:Rje,mouseLeaveChart:Mce,setActiveClickItemIndex:Oje,setMouseOverAxisIndex:Dce,setMouseClickAxisIndex:Mje,setSyncInteraction:JM,setKeyboardInteraction:XM}=Rce.actions,Dje=Rce.reducer;function wW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function dA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wW(Object(n),!0).forEach(function(r){Lje(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Lje(t,e,n){return(e=Bje(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bje(t){var e=jje(t,"string");return typeof e=="symbol"?e:e+""}function jje(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Uje(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function Fje(t){return t.index!=null}var Lce=(t,e,n,r)=>{if(e==null)return kf;var i=Uje(t,e,n);if(i==null)return kf;if(i.active)return i;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var s=t.settings.active===!0;if(Fje(i)){if(s)return dA(dA({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r,graphicalItemId:void 0};return dA(dA({},kf),{},{coordinate:i.coordinate})};function $je(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var e=t.valueOf();return Number.isFinite(e)?e:void 0}var n=Number(t);return Number.isFinite(n)?n:void 0}function zje(t,e){var n=$je(t),r=e[0],i=e[1];if(n===void 0)return!1;var s=Math.min(r,i),o=Math.max(r,i);return n>=s&&n<=o}function Hje(t,e,n){if(n==null||e==null)return!0;var r=Wn(t,e);return r==null||!sh(n)?!0:zje(r,n)}var aB=(t,e,n,r)=>{var i=t==null?void 0:t.index;if(i==null)return null;var s=Number(i);if(!ur(s))return i;var o=0,a=1/0;e.length>0&&(a=e.length-1);var l=Math.max(o,Math.min(s,a)),c=e[l];return c==null||Hje(c,n,r)?String(l):null},Bce=(t,e,n,r,i,s,o,a)=>{if(!(s==null||a==null)){var l=o[0],c=l==null?void 0:a(l.positions,s);if(c!=null)return c;var u=i==null?void 0:i[Number(s)];if(u)switch(n){case"horizontal":return{x:u.coordinate,y:(r.top+e)/2};default:return{x:(r.left+t)/2,y:u.coordinate}}}},jce=(t,e,n,r)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var i;if(n==="hover"?i=t.itemInteraction.hover.graphicalItemId:i=t.itemInteraction.click.graphicalItemId,i==null&&r!=null){var s=t.tooltipItemPayloads[0];return s!=null?[s]:[]}return t.tooltipItemPayloads.filter(o=>{var a;return((a=o.settings)===null||a===void 0?void 0:a.graphicalItemId)===i})},Y1=t=>t.options.tooltipPayloadSearcher,qx=t=>t.tooltip;function EW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function SW(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?EW(Object(n),!0).forEach(function(r){Vje(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):EW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Vje(t,e,n){return(e=qje(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qje(t){var e=Gje(t,"string");return typeof e=="symbol"?e:e+""}function Gje(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Kje(t,e){return t??e}var Uce=(t,e,n,r,i,s,o)=>{if(!(e==null||s==null)){var{chartData:a,computedData:l,dataStartIndex:c,dataEndIndex:u}=n,f=[];return t.reduce((m,g)=>{var x,{dataDefinedOnItem:v,settings:w}=g,E=Kje(v,a),C=Array.isArray(E)?xae(E,c,u):E,k=(x=w==null?void 0:w.dataKey)!==null&&x!==void 0?x:r,O=w==null?void 0:w.nameKey,j;if(r&&Array.isArray(C)&&!Array.isArray(C[0])&&o==="axis"?j=koe(C,r,i):j=s(C,e,l,O),Array.isArray(j))j.forEach(U=>{var V=SW(SW({},w),{},{name:U.name,unit:U.unit,color:void 0,fill:void 0});m.push(NG({tooltipEntrySettings:V,dataKey:U.dataKey,payload:U.payload,value:Wn(U.payload,U.dataKey),name:U.name}))});else{var R;m.push(NG({tooltipEntrySettings:w,dataKey:k,payload:j,value:Wn(j,k),name:(R=Wn(j,O))!==null&&R!==void 0?R:w==null?void 0:w.name}))}return m},f)}},lB=Me([ki,An,oce,M6,Ti],xce),Wje=Me([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),Yje=Me([Ti,zx],$6),Gx=Me([Wje,ki,Yje],z6,{memoizeOptions:{resultEqualityCheck:Q2}}),Jje=Me([Gx],t=>t.filter(J2)),Xje=Me([Gx],H6,{memoizeOptions:{resultEqualityCheck:Q2}}),Kx=Me([Xje,Td],V6),Qje=Me([Jje,Td,ki],rce),cB=Me([Kx,ki,Gx],G6),Fce=Me([ki],K6),Zje=Me([ki],t=>t.allowDataOverflow),$ce=Me([Fce,Zje],Mle),e7e=Me([Gx],t=>t.filter(J2)),t7e=Me([Qje,e7e,z1,Jle],uce),n7e=Me([t7e,Td,Ti,$ce],dce),r7e=Me([Gx],lce),i7e=Me([Kx,ki,r7e,eN,Ti],J6,{memoizeOptions:{resultEqualityCheck:X2}}),s7e=Me([fce,Ti,zx],Hx),o7e=Me([s7e,Ti],mce),a7e=Me([hce,Ti,zx],Hx),l7e=Me([a7e,Ti],gce),c7e=Me([pce,Ti,zx],Hx),u7e=Me([c7e,Ti],yce),d7e=Me([o7e,u7e,l7e],Dk),f7e=Me([ki,Fce,$ce,n7e,i7e,d7e,An,Ti],X6),J1=Me([ki,An,Kx,cB,z1,Ti,f7e],Q6),h7e=Me([J1,ki,lB],tB),p7e=Me([ki,J1,h7e,Ti],rB),zce=t=>{var e=Ti(t),n=zx(t),r=!1;return W1(t,e,n,r)},Hce=Me([ki,zce],K2),Vce=Me([ki,lB,p7e,Hce],eB),m7e=Me([An,cB,ki,Ti],Tce),g7e=Me([An,cB,ki,Ti],kce),y7e=(t,e,n,r,i,s,o,a)=>{if(e){var{type:l}=e,c=Lc(t,a);if(r){var u=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,f=l==="category"&&r.bandwidth?r.bandwidth()/u:0;return f=a==="angleAxis"&&i!=null&&(i==null?void 0:i.length)>=2?ji(i[0]-i[1])*2*f:f,c&&o?o.map((m,g)=>({coordinate:r(m)+f,value:m,index:g,offset:f})):r.domain().map((m,g)=>({coordinate:r(m)+f,value:s?s[m]:m,index:g,offset:f}))}}},Nd=Me([An,ki,lB,Vce,zce,m7e,g7e,Ti],y7e),uB=Me([Nce,_ce,kje],(t,e,n)=>Ice(n.shared,t,e)),qce=t=>t.tooltip.settings.trigger,dB=t=>t.tooltip.settings.defaultIndex,X1=Me([qx,uB,qce,dB],Lce),oh=Me([X1,Kx,K1,J1],aB),Gce=Me([Nd,oh],Pce),fB=Me([X1],t=>{if(t)return t.dataKey}),x7e=Me([X1],t=>{if(t)return t.graphicalItemId}),Kce=Me([qx,uB,qce,dB],jce),v7e=Me([Ed,Sd,An,Si,Nd,dB,Kce,Y1],Bce),b7e=Me([X1,v7e],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),w7e=Me([X1],t=>{var e;return(e=t==null?void 0:t.active)!==null&&e!==void 0?e:!1}),E7e=Me([Kce,oh,Td,K1,Gce,Y1,uB],Uce),S7e=Me([E7e],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function AW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function TW(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AW(Object(n),!0).forEach(function(r){A7e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function A7e(t,e,n){return(e=T7e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function T7e(t){var e=k7e(t,"string");return typeof e=="symbol"?e:e+""}function k7e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var C7e=()=>Pt(ki),N7e=()=>{var t=C7e(),e=Pt(Nd),n=Pt(Vce);return ih(!t||!n?void 0:TW(TW({},t),{},{scale:n}),e)};function kW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function U0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kW(Object(n),!0).forEach(function(r){_7e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _7e(t,e,n){return(e=I7e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function I7e(t){var e=P7e(t,"string");return typeof e=="symbol"?e:e+""}function P7e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var R7e=(t,e,n,r)=>{var i=e.find(s=>s&&s.index===n);if(i){if(t==="horizontal")return{x:i.coordinate,y:r.chartY};if(t==="vertical")return{x:r.chartX,y:i.coordinate}}return{x:0,y:0}},O7e=(t,e,n,r)=>{var i=e.find(c=>c&&c.index===n);if(i){if(t==="centric"){var s=i.coordinate,{radius:o}=r;return U0(U0(U0({},r),mi(r.cx,r.cy,o,s)),{},{angle:s,radius:o})}var a=i.coordinate,{angle:l}=r;return U0(U0(U0({},r),mi(r.cx,r.cy,a,l)),{},{angle:l,radius:a})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function M7e(t,e){var{chartX:n,chartY:r}=t;return n>=e.left&&n<=e.left+e.width&&r>=e.top&&r<=e.top+e.height}var Wce=(t,e,n,r,i)=>{var s,o=(s=e==null?void 0:e.length)!==null&&s!==void 0?s:0;if(o<=1||t==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var a=0;a<o;a++){var l,c,u,f,m,g=a>0?(l=n[a-1])===null||l===void 0?void 0:l.coordinate:(c=n[o-1])===null||c===void 0?void 0:c.coordinate,x=(u=n[a])===null||u===void 0?void 0:u.coordinate,v=a>=o-1?(f=n[0])===null||f===void 0?void 0:f.coordinate:(m=n[a+1])===null||m===void 0?void 0:m.coordinate,w=void 0;if(!(g==null||x==null||v==null))if(ji(x-g)!==ji(v-x)){var E=[];if(ji(v-x)===ji(i[1]-i[0])){w=v;var C=x+i[1]-i[0];E[0]=Math.min(C,(C+g)/2),E[1]=Math.max(C,(C+g)/2)}else{w=g;var k=v+i[1]-i[0];E[0]=Math.min(x,(k+x)/2),E[1]=Math.max(x,(k+x)/2)}var O=[Math.min(x,(w+x)/2),Math.max(x,(w+x)/2)];if(t>O[0]&&t<=O[1]||t>=E[0]&&t<=E[1]){var j;return(j=n[a])===null||j===void 0?void 0:j.index}}else{var R=Math.min(g,v),U=Math.max(g,v);if(t>(R+x)/2&&t<=(U+x)/2){var V;return(V=n[a])===null||V===void 0?void 0:V.index}}}else if(e)for(var F=0;F<o;F++){var $=e[F];if($!=null){var K=e[F+1],H=e[F-1];if(F===0&&K!=null&&t<=($.coordinate+K.coordinate)/2||F===o-1&&H!=null&&t>($.coordinate+H.coordinate)/2||F>0&&F<o-1&&H!=null&&K!=null&&t>($.coordinate+H.coordinate)/2&&t<=($.coordinate+K.coordinate)/2)return $.index}}return-1},Yce=()=>Pt(M6),hB=(t,e)=>e,Jce=(t,e,n)=>n,pB=(t,e,n,r)=>r,D7e=Me(Nd,t=>E2(t,e=>e.coordinate)),mB=Me([qx,hB,Jce,pB],Lce),gB=Me([mB,Kx,K1,J1],aB),L7e=(t,e,n)=>{if(e!=null){var r=qx(t);return e==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},Xce=Me([qx,hB,Jce,pB],jce),Lk=Me([Ed,Sd,An,Si,Nd,pB,Xce,Y1],Bce),B7e=Me([mB,Lk],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),Qce=Me([Nd,gB],Pce),j7e=Me([Xce,gB,Td,K1,Qce,Y1,hB],Uce),U7e=Me([mB,gB],(t,e)=>({isActive:t.active&&e!=null,activeIndex:e})),F7e=(t,e,n,r,i,s,o)=>{if(!(!t||!n||!r||!i)&&M7e(t,o)){var a=wMe(t,e),l=Wce(a,s,i,n,r),c=R7e(e,i,l,t);return{activeIndex:String(l),activeCoordinate:c}}},$7e=(t,e,n,r,i,s,o)=>{if(!(!t||!r||!i||!s||!n)){var a=ALe(t,n);if(a){var l=EMe(a,e),c=Wce(l,o,s,r,i),u=O7e(e,s,c,a);return{activeIndex:String(c),activeCoordinate:u}}}},z7e=(t,e,n,r,i,s,o,a)=>{if(!(!t||!e||!r||!i||!s))return e==="horizontal"||e==="vertical"?F7e(t,e,r,i,s,o,a):$7e(t,e,n,r,i,s,o)},H7e=Me(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,n)=>n,(t,e,n)=>{if(e!=null){var r=t[e];if(r!=null)return n?r.panoramaElement:r.element}}),V7e=Me(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(r=>parseInt(r,10)).concat(Object.values(ri)),n=Array.from(new Set(e));return n.sort((r,i)=>r-i)},{memoizeOptions:{resultEqualityCheck:CBe}});function CW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function NW(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CW(Object(n),!0).forEach(function(r){q7e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function q7e(t,e,n){return(e=G7e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function G7e(t){var e=K7e(t,"string");return typeof e=="symbol"?e:e+""}function K7e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var W7e={},Y7e={zIndexMap:Object.values(ri).reduce((t,e)=>NW(NW({},t),{},{[e]:{element:void 0,panoramaElement:void 0,consumers:0}}),W7e)},J7e=new Set(Object.values(ri));function X7e(t){return J7e.has(t)}var Zce=yo({name:"zIndex",initialState:Y7e,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]?t.zIndexMap[n].consumers+=1:t.zIndexMap[n]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:Tr()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(t.zIndexMap[n].consumers-=1,t.zIndexMap[n].consumers<=0&&!X7e(n)&&delete t.zIndexMap[n])},prepare:Tr()},registerZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n,element:r,isPanorama:i}=e.payload;t.zIndexMap[n]?i?t.zIndexMap[n].panoramaElement=r:t.zIndexMap[n].element=r:t.zIndexMap[n]={consumers:0,element:i?void 0:r,panoramaElement:i?r:void 0}},prepare:Tr()},unregisterZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(e.payload.isPanorama?t.zIndexMap[n].panoramaElement=void 0:t.zIndexMap[n].element=void 0)},prepare:Tr()}}}),{registerZIndexPortal:Q7e,unregisterZIndexPortal:Z7e,registerZIndexPortalElement:eUe,unregisterZIndexPortalElement:tUe}=Zce.actions,nUe=Zce.reducer;function Js(t){var{zIndex:e,children:n}=t,r=ZMe(),i=r&&e!==void 0&&e!==0,s=Fi(),o=_r();T.useLayoutEffect(()=>i?(o(Q7e({zIndex:e})),()=>{o(Z7e({zIndex:e}))}):P1,[o,e,i]);var a=Pt(l=>H7e(l,e,s));return i?a?Pm.createPortal(n,a):null:n}function QM(){return QM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},QM.apply(null,arguments)}function _W(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_W(Object(n),!0).forEach(function(r){rUe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_W(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rUe(t,e,n){return(e=iUe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function iUe(t){var e=sUe(t,"string");return typeof e=="symbol"?e:e+""}function sUe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function oUe(t){var{cursor:e,cursorComp:n,cursorProps:r}=t;return T.isValidElement(e)?T.cloneElement(e,r):T.createElement(n,r)}function aUe(t){var e,{coordinate:n,payload:r,index:i,offset:s,tooltipAxisBandSize:o,layout:a,cursor:l,tooltipEventType:c,chartName:u}=t,f=n,m=r,g=i;if(!l||!f||u!=="ScatterChart"&&c!=="axis")return null;var x,v,w;if(u==="ScatterChart")x=f,v=jDe,w=ri.cursorLine;else if(u==="BarChart")x=UDe(a,f,s,o),v=Kae,w=ri.cursorRectangle;else if(a==="radial"&&_oe(f)){var{cx:E,cy:C,radius:k,startAngle:O,endAngle:j}=Yae(f);x={cx:E,cy:C,startAngle:O,endAngle:j,innerRadius:k,outerRadius:k},v=Xae,w=ri.cursorLine}else x={points:NLe(a,f,s)},v=Hg,w=ri.cursorLine;var R=typeof l=="object"&&"className"in l?l.className:void 0,U=fA(fA(fA(fA({stroke:"#ccc",pointerEvents:"none"},s),x),fm(l)),{},{payload:m,payloadIndex:g,className:Pn("recharts-tooltip-cursor",R)});return T.createElement(Js,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:w},T.createElement(oUe,{cursor:l,cursorComp:v,cursorProps:U}))}function lUe(t){var e=N7e(),n=_ae(),r=ph(),i=Yce();return e==null||n==null||r==null||i==null?null:T.createElement(aUe,QM({},t,{offset:n,layout:r,tooltipAxisBandSize:e,chartName:i}))}var eue=T.createContext(null),cUe=()=>T.useContext(eue),o5={exports:{}},IW;function uUe(){return IW||(IW=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function s(l,c,u,f,m){if(typeof u!="function")throw new TypeError("The listener must be a function");var g=new i(u,f||l,m),x=n?n+c:c;return l._events[x]?l._events[x].fn?l._events[x]=[l._events[x],g]:l._events[x].push(g):(l._events[x]=g,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],u,f;if(this._eventsCount===0)return c;for(f in u=this._events)e.call(u,f)&&c.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},a.prototype.listeners=function(c){var u=n?n+c:c,f=this._events[u];if(!f)return[];if(f.fn)return[f.fn];for(var m=0,g=f.length,x=new Array(g);m<g;m++)x[m]=f[m].fn;return x},a.prototype.listenerCount=function(c){var u=n?n+c:c,f=this._events[u];return f?f.fn?1:f.length:0},a.prototype.emit=function(c,u,f,m,g,x){var v=n?n+c:c;if(!this._events[v])return!1;var w=this._events[v],E=arguments.length,C,k;if(w.fn){switch(w.once&&this.removeListener(c,w.fn,void 0,!0),E){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,u),!0;case 3:return w.fn.call(w.context,u,f),!0;case 4:return w.fn.call(w.context,u,f,m),!0;case 5:return w.fn.call(w.context,u,f,m,g),!0;case 6:return w.fn.call(w.context,u,f,m,g,x),!0}for(k=1,C=new Array(E-1);k<E;k++)C[k-1]=arguments[k];w.fn.apply(w.context,C)}else{var O=w.length,j;for(k=0;k<O;k++)switch(w[k].once&&this.removeListener(c,w[k].fn,void 0,!0),E){case 1:w[k].fn.call(w[k].context);break;case 2:w[k].fn.call(w[k].context,u);break;case 3:w[k].fn.call(w[k].context,u,f);break;case 4:w[k].fn.call(w[k].context,u,f,m);break;default:if(!C)for(j=1,C=new Array(E-1);j<E;j++)C[j-1]=arguments[j];w[k].fn.apply(w[k].context,C)}}return!0},a.prototype.on=function(c,u,f){return s(this,c,u,f,!1)},a.prototype.once=function(c,u,f){return s(this,c,u,f,!0)},a.prototype.removeListener=function(c,u,f,m){var g=n?n+c:c;if(!this._events[g])return this;if(!u)return o(this,g),this;var x=this._events[g];if(x.fn)x.fn===u&&(!m||x.once)&&(!f||x.context===f)&&o(this,g);else{for(var v=0,w=[],E=x.length;v<E;v++)(x[v].fn!==u||m&&!x[v].once||f&&x[v].context!==f)&&w.push(x[v]);w.length?this._events[g]=w.length===1?w[0]:w:o(this,g)}return this},a.prototype.removeAllListeners=function(c){var u;return c?(u=n?n+c:c,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(o5)),o5.exports}var dUe=uUe();const yB=cs(dUe);var Uw=new yB,ZM="recharts.syncEvent.tooltip",PW="recharts.syncEvent.brush";function iN(t,e){if(e){var n=Number.parseInt(e,10);if(!$a(n))return t==null?void 0:t[n]}}var fUe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},tue=yo({name:"options",initialState:fUe,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),hUe=tue.reducer,{createEventEmitter:pUe}=tue.actions;function mUe(t){return t.tooltip.syncInteraction}var gUe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},nue=yo({name:"chartData",initialState:gUe,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:r}=e.payload;n!=null&&(t.dataStartIndex=n),r!=null&&(t.dataEndIndex=r)}}}),{setChartData:RW,setDataStartEndIndexes:yUe,setComputedData:bmt}=nue.actions,xUe=nue.reducer,vUe=["x","y"];function OW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function F0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OW(Object(n),!0).forEach(function(r){bUe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bUe(t,e,n){return(e=wUe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wUe(t){var e=EUe(t,"string");return typeof e=="symbol"?e:e+""}function EUe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function SUe(t,e){if(t==null)return{};var n,r,i=AUe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function AUe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function TUe(){var t=Pt(D6),e=Pt(L6),n=_r(),r=Pt(Xle),i=Pt(Nd),s=ph(),o=D2(),a=Pt(l=>l.rootProps.className);T.useEffect(()=>{if(t==null)return P1;var l=(c,u,f)=>{if(e!==f&&t===c){if(r==="index"){var m;if(o&&u!==null&&u!==void 0&&(m=u.payload)!==null&&m!==void 0&&m.coordinate&&u.payload.sourceViewBox){var g=u.payload.coordinate,{x,y:v}=g,w=SUe(g,vUe),{x:E,y:C,width:k,height:O}=u.payload.sourceViewBox,j=F0(F0({},w),{},{x:o.x+(k?(x-E)/k:0)*o.width,y:o.y+(O?(v-C)/O:0)*o.height});n(F0(F0({},u),{},{payload:F0(F0({},u.payload),{},{coordinate:j})}))}else n(u);return}if(i!=null){var R;if(typeof r=="function"){var U={activeTooltipIndex:u.payload.index==null?void 0:Number(u.payload.index),isTooltipActive:u.payload.active,activeIndex:u.payload.index==null?void 0:Number(u.payload.index),activeLabel:u.payload.label,activeDataKey:u.payload.dataKey,activeCoordinate:u.payload.coordinate},V=r(i,U);R=i[V]}else r==="value"&&(R=i.find(M=>String(M.value)===u.payload.label));var{coordinate:F}=u.payload;if(R==null||u.payload.active===!1||F==null||o==null){n(JM({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:$,y:K}=F,H=Math.min($,o.x+o.width),B=Math.min(K,o.y+o.height),A={x:s==="horizontal"?R.coordinate:H,y:s==="horizontal"?B:R.coordinate},I=JM({active:u.payload.active,coordinate:A,dataKey:u.payload.dataKey,index:String(R.index),label:u.payload.label,sourceViewBox:u.payload.sourceViewBox,graphicalItemId:u.payload.graphicalItemId});n(I)}}};return Uw.on(ZM,l),()=>{Uw.off(ZM,l)}},[a,n,e,t,r,i,s,o])}function kUe(){var t=Pt(D6),e=Pt(L6),n=_r();T.useEffect(()=>{if(t==null)return P1;var r=(i,s,o)=>{e!==o&&t===i&&n(yUe(s))};return Uw.on(PW,r),()=>{Uw.off(PW,r)}},[n,e,t])}function CUe(){var t=_r();T.useEffect(()=>{t(pUe())},[t]),TUe(),kUe()}function NUe(t,e,n,r,i,s){var o=Pt(g=>L7e(g,t,e)),a=Pt(L6),l=Pt(D6),c=Pt(Xle),u=Pt(mUe),f=u==null?void 0:u.active,m=D2();T.useEffect(()=>{if(!f&&l!=null&&a!=null){var g=JM({active:s,coordinate:n,dataKey:o,index:i,label:typeof r=="number"?String(r):r,sourceViewBox:m,graphicalItemId:void 0});Uw.emit(ZM,l,g,a)}},[f,n,o,i,r,a,l,c,s,m])}function MW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function DW(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MW(Object(n),!0).forEach(function(r){_Ue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _Ue(t,e,n){return(e=IUe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function IUe(t){var e=PUe(t,"string");return typeof e=="symbol"?e:e+""}function PUe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function RUe(t){return t.dataKey}function OUe(t,e){return T.isValidElement(t)?T.cloneElement(t,e):typeof t=="function"?T.createElement(t,e):T.createElement(yDe,e)}var LW=[],MUe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Bk(t){var e,n,r=yi(t,MUe),{active:i,allowEscapeViewBox:s,animationDuration:o,animationEasing:a,content:l,filterNull:c,isAnimationActive:u,offset:f,payloadUniqBy:m,position:g,reverseDirection:x,useTranslate3d:v,wrapperStyle:w,cursor:E,shared:C,trigger:k,defaultIndex:O,portal:j,axisId:R}=r,U=_r(),V=typeof O=="number"?String(O):O;T.useEffect(()=>{U(Pje({shared:C,trigger:k,axisId:R,active:i,defaultIndex:V}))},[U,C,k,R,i,V]);var F=D2(),$=zae(),K=Tje(C),{activeIndex:H,isActive:B}=(e=Pt(ae=>U7e(ae,K,k,V)))!==null&&e!==void 0?e:{},A=Pt(ae=>j7e(ae,K,k,V)),I=Pt(ae=>Qce(ae,K,k,V)),M=Pt(ae=>B7e(ae,K,k,V)),z=A,G=cUe(),te=(n=i??B)!==null&&n!==void 0?n:!1,[Y,q]=o4e([z,te]),D=K==="axis"?I:void 0;NUe(K,k,M,D,H,te);var _=j??G;if(_==null||F==null||K==null)return null;var W=z??LW;te||(W=LW),c&&W.length&&(W=R3e(W.filter(ae=>ae.value!=null&&(ae.hide!==!0||r.includeHidden)),m,RUe));var X=W.length>0,re=T.createElement(ADe,{allowEscapeViewBox:s,animationDuration:o,animationEasing:a,isAnimationActive:u,active:te,coordinate:M,hasPayload:X,offset:f,position:g,reverseDirection:x,useTranslate3d:v,viewBox:F,wrapperStyle:w,lastBoundingBox:Y,innerRef:q,hasPortalFromProps:!!j},OUe(l,DW(DW({},r),{},{payload:W,label:D,active:te,activeIndex:H,coordinate:M,accessibilityLayer:$})));return T.createElement(T.Fragment,null,Pm.createPortal(re,_),te&&T.createElement(lUe,{cursor:E,tooltipEventType:K,coordinate:M,payload:W,index:H}))}var Wx=t=>null;Wx.displayName="Cell";function DUe(t,e,n){return(e=LUe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function LUe(t){var e=BUe(t,"string");return typeof e=="symbol"?e:e+""}function BUe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class jUe{constructor(e){DUe(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;r!=null&&this.cache.delete(r)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function BW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function UUe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BW(Object(n),!0).forEach(function(r){FUe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function FUe(t,e,n){return(e=$Ue(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $Ue(t){var e=zUe(t,"string");return typeof e=="symbol"?e:e+""}function zUe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var HUe={cacheSize:2e3,enableCache:!0},rue=UUe({},HUe),jW=new jUe(rue.cacheSize),VUe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},UW="recharts_measurement_span";function qUe(t,e){var n=e.fontSize||"",r=e.fontFamily||"",i=e.fontWeight||"",s=e.fontStyle||"",o=e.letterSpacing||"",a=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(s,"|").concat(o,"|").concat(a)}var FW=(t,e)=>{try{var n=document.getElementById(UW);n||(n=document.createElement("span"),n.setAttribute("id",UW),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,VUe,e),n.textContent="".concat(t);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},Vb=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||B1.isSsr)return{width:0,height:0};if(!rue.enableCache)return FW(e,n);var r=qUe(e,n),i=jW.get(r);if(i)return i;var s=FW(e,n);return jW.set(r,s),s},iue;function GUe(t,e,n){return(e=KUe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function KUe(t){var e=WUe(t,"string");return typeof e=="symbol"?e:e+""}function WUe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $W=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,zW=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,YUe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,JUe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,XUe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},QUe=["cm","mm","pt","pc","in","Q","px"];function ZUe(t){return QUe.includes(t)}var bg="NaN";function eFe(t,e){return t*XUe[e]}class ts{static parse(e){var n,[,r,i]=(n=JUe.exec(e))!==null&&n!==void 0?n:[];return r==null?ts.NaN:new ts(parseFloat(r),i??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,$a(e)&&(this.unit=""),n!==""&&!YUe.test(n)&&(this.num=NaN,this.unit=""),ZUe(n)&&(this.num=eFe(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new ts(NaN,""):new ts(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new ts(NaN,""):new ts(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new ts(NaN,""):new ts(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new ts(NaN,""):new ts(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return $a(this.num)}}iue=ts;GUe(ts,"NaN",new iue(NaN,""));function sue(t){if(t==null||t.includes(bg))return bg;for(var e=t;e.includes("*")||e.includes("/");){var n,[,r,i,s]=(n=$W.exec(e))!==null&&n!==void 0?n:[],o=ts.parse(r??""),a=ts.parse(s??""),l=i==="*"?o.multiply(a):o.divide(a);if(l.isNaN())return bg;e=e.replace($W,l.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var c,[,u,f,m]=(c=zW.exec(e))!==null&&c!==void 0?c:[],g=ts.parse(u??""),x=ts.parse(m??""),v=f==="+"?g.add(x):g.subtract(x);if(v.isNaN())return bg;e=e.replace(zW,v.toString())}return e}var HW=/\(([^()]*)\)/;function tFe(t){for(var e=t,n;(n=HW.exec(e))!=null;){var[,r]=n;e=e.replace(HW,sue(r))}return e}function nFe(t){var e=t.replace(/\s+/g,"");return e=tFe(e),e=sue(e),e}function rFe(t){try{return nFe(t)}catch{return bg}}function a5(t){var e=rFe(t.slice(5,-1));return e===bg?"":e}var iFe=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],sFe=["dx","dy","angle","className","breakAll"];function eD(){return eD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},eD.apply(null,arguments)}function VW(t,e){if(t==null)return{};var n,r,i=oFe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function oFe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var oue=/[ \f\n\r\t\v\u2028\u2029]+/,aue=t=>{var{children:e,breakAll:n,style:r}=t;try{var i=[];Er(e)||(n?i=e.toString().split(""):i=e.toString().split(oue));var s=i.map(a=>({word:a,width:Vb(a,r).width})),o=n?0:Vb("",r).width;return{wordsWithComputedWidth:s,spaceWidth:o}}catch{return null}};function aFe(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var lue=(t,e,n,r)=>t.reduce((i,s)=>{var{word:o,width:a}=s,l=i[i.length-1];if(l&&a!=null&&(e==null||r||l.width+a+n<Number(e)))l.words.push(o),l.width+=a+n;else{var c={words:[o],width:a};i.push(c)}return i},[]),cue=t=>t.reduce((e,n)=>e.width>n.width?e:n),lFe="",qW=(t,e,n,r,i,s,o,a)=>{var l=t.slice(0,e),c=aue({breakAll:n,style:r,children:l+lFe});if(!c)return[!1,[]];var u=lue(c.wordsWithComputedWidth,s,o,a),f=u.length>i||cue(u).width>Number(s);return[f,u]},cFe=(t,e,n,r,i)=>{var{maxLines:s,children:o,style:a,breakAll:l}=t,c=bt(s),u=String(o),f=lue(e,r,n,i);if(!c||i)return f;var m=f.length>s||cue(f).width>Number(r);if(!m)return f;for(var g=0,x=u.length-1,v=0,w;g<=x&&v<=u.length-1;){var E=Math.floor((g+x)/2),C=E-1,[k,O]=qW(u,C,l,a,s,r,n,i),[j]=qW(u,E,l,a,s,r,n,i);if(!k&&!j&&(g=E+1),k&&j&&(x=E-1),!k&&j){w=O;break}v++}return w||f},GW=t=>{var e=Er(t)?[]:t.toString().split(oue);return[{words:e,width:void 0}]},uFe=t=>{var{width:e,scaleToFit:n,children:r,style:i,breakAll:s,maxLines:o}=t;if((e||n)&&!B1.isSsr){var a,l,c=aue({breakAll:s,children:r,style:i});if(c){var{wordsWithComputedWidth:u,spaceWidth:f}=c;a=u,l=f}else return GW(r);return cFe({breakAll:s,children:r,maxLines:o,style:i},a,l,e,!!n)}return GW(r)},uue="#808080",dFe={angle:0,breakAll:!1,capHeight:"0.71em",fill:uue,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},sN=T.forwardRef((t,e)=>{var n=yi(t,dFe),{x:r,y:i,lineHeight:s,capHeight:o,fill:a,scaleToFit:l,textAnchor:c,verticalAnchor:u}=n,f=VW(n,iFe),m=T.useMemo(()=>uFe({breakAll:f.breakAll,children:f.children,maxLines:f.maxLines,scaleToFit:l,style:f.style,width:f.width}),[f.breakAll,f.children,f.maxLines,l,f.style,f.width]),{dx:g,dy:x,angle:v,className:w,breakAll:E}=f,C=VW(f,sFe);if(!_c(r)||!_c(i)||m.length===0)return null;var k=Number(r)+(bt(g)?g:0),O=Number(i)+(bt(x)?x:0);if(!ur(k)||!ur(O))return null;var j;switch(u){case"start":j=a5("calc(".concat(o,")"));break;case"middle":j=a5("calc(".concat((m.length-1)/2," * -").concat(s," + (").concat(o," / 2))"));break;default:j=a5("calc(".concat(m.length-1," * -").concat(s,")"));break}var R=[];if(l){var U=m[0].width,{width:V}=f;R.push("scale(".concat(bt(V)&&bt(U)?V/U:1,")"))}return v&&R.push("rotate(".concat(v,", ").concat(k,", ").concat(O,")")),R.length&&(C.transform=R.join(" ")),T.createElement("text",eD({},Ps(C),{ref:e,x:k,y:O,className:Pn("recharts-text",w),textAnchor:c,fill:a.includes("url")?uue:a}),m.map((F,$)=>{var K=F.words.join(E?"":" ");return T.createElement("tspan",{x:k,dy:$===0?j:s,key:"".concat(K,"-").concat($)},K)}))});sN.displayName="Text";var fFe=["labelRef"],hFe=["content"];function KW(t,e){if(t==null)return{};var n,r,i=pFe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function pFe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function WW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Qr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WW(Object(n),!0).forEach(function(r){mFe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mFe(t,e,n){return(e=gFe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gFe(t){var e=yFe(t,"string");return typeof e=="symbol"?e:e+""}function yFe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Lu(){return Lu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Lu.apply(null,arguments)}var due=T.createContext(null),xFe=t=>{var{x:e,y:n,upperWidth:r,lowerWidth:i,width:s,height:o,children:a}=t,l=T.useMemo(()=>({x:e,y:n,upperWidth:r,lowerWidth:i,width:s,height:o}),[e,n,r,i,s,o]);return T.createElement(due.Provider,{value:l},a)},fue=()=>{var t=T.useContext(due),e=D2();return t||Nae(e)},vFe=T.createContext(null),bFe=()=>{var t=T.useContext(vFe),e=Pt(nce);return t||e},wFe=t=>{var{value:e,formatter:n}=t,r=Er(t.children)?e:t.children;return typeof n=="function"?n(r):r},xB=t=>t!=null&&typeof t=="function",EFe=(t,e)=>{var n=ji(e-t),r=Math.min(Math.abs(e-t),360);return n*r},SFe=(t,e,n,r,i)=>{var{offset:s,className:o}=t,{cx:a,cy:l,innerRadius:c,outerRadius:u,startAngle:f,endAngle:m,clockWise:g}=i,x=(c+u)/2,v=EFe(f,m),w=v>=0?1:-1,E,C;switch(e){case"insideStart":E=f+w*s,C=g;break;case"insideEnd":E=m-w*s,C=!g;break;case"end":E=m+w*s,C=g;break;default:throw new Error("Unsupported position ".concat(e))}C=v<=0?C:!C;var k=mi(a,l,x,E),O=mi(a,l,x,E+(C?1:-1)*359),j="M".concat(k.x,",").concat(k.y,`
    A`).concat(x,",").concat(x,",0,1,").concat(C?0:1,`,
    `).concat(O.x,",").concat(O.y),R=Er(t.id)?Tw("recharts-radial-line-"):t.id;return T.createElement("text",Lu({},r,{dominantBaseline:"central",className:Pn("recharts-radial-bar-label",o)}),T.createElement("defs",null,T.createElement("path",{id:R,d:j})),T.createElement("textPath",{xlinkHref:"#".concat(R)},n))},AFe=(t,e,n)=>{var{cx:r,cy:i,innerRadius:s,outerRadius:o,startAngle:a,endAngle:l}=t,c=(a+l)/2;if(n==="outside"){var{x:u,y:f}=mi(r,i,o+e,c);return{x:u,y:f,textAnchor:u>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var m=(s+o)/2,{x:g,y:x}=mi(r,i,m,c);return{x:g,y:x,textAnchor:"middle",verticalAnchor:"middle"}},tD=t=>"cx"in t&&bt(t.cx),TFe=(t,e)=>{var{parentViewBox:n,offset:r,position:i}=t,s;n!=null&&!tD(n)&&(s=n);var{x:o,y:a,upperWidth:l,lowerWidth:c,height:u}=e,f=o,m=o+(l-c)/2,g=(f+m)/2,x=(l+c)/2,v=f+l/2,w=u>=0?1:-1,E=w*r,C=w>0?"end":"start",k=w>0?"start":"end",O=l>=0?1:-1,j=O*r,R=O>0?"end":"start",U=O>0?"start":"end";if(i==="top"){var V={x:f+l/2,y:a-E,textAnchor:"middle",verticalAnchor:C};return Qr(Qr({},V),s?{height:Math.max(a-s.y,0),width:l}:{})}if(i==="bottom"){var F={x:m+c/2,y:a+u+E,textAnchor:"middle",verticalAnchor:k};return Qr(Qr({},F),s?{height:Math.max(s.y+s.height-(a+u),0),width:c}:{})}if(i==="left"){var $={x:g-j,y:a+u/2,textAnchor:R,verticalAnchor:"middle"};return Qr(Qr({},$),s?{width:Math.max($.x-s.x,0),height:u}:{})}if(i==="right"){var K={x:g+x+j,y:a+u/2,textAnchor:U,verticalAnchor:"middle"};return Qr(Qr({},K),s?{width:Math.max(s.x+s.width-K.x,0),height:u}:{})}var H=s?{width:x,height:u}:{};return i==="insideLeft"?Qr({x:g+j,y:a+u/2,textAnchor:U,verticalAnchor:"middle"},H):i==="insideRight"?Qr({x:g+x-j,y:a+u/2,textAnchor:R,verticalAnchor:"middle"},H):i==="insideTop"?Qr({x:f+l/2,y:a+E,textAnchor:"middle",verticalAnchor:k},H):i==="insideBottom"?Qr({x:m+c/2,y:a+u-E,textAnchor:"middle",verticalAnchor:C},H):i==="insideTopLeft"?Qr({x:f+j,y:a+E,textAnchor:U,verticalAnchor:k},H):i==="insideTopRight"?Qr({x:f+l-j,y:a+E,textAnchor:R,verticalAnchor:k},H):i==="insideBottomLeft"?Qr({x:m+j,y:a+u-E,textAnchor:U,verticalAnchor:C},H):i==="insideBottomRight"?Qr({x:m+c-j,y:a+u-E,textAnchor:R,verticalAnchor:C},H):i&&typeof i=="object"&&(bt(i.x)||ud(i.x))&&(bt(i.y)||ud(i.y))?Qr({x:o+_s(i.x,x),y:a+_s(i.y,u),textAnchor:"end",verticalAnchor:"end"},H):Qr({x:v,y:a+u/2,textAnchor:"middle",verticalAnchor:"middle"},H)},kFe={angle:0,offset:5,zIndex:ri.label,position:"middle",textBreakAll:!1};function Ef(t){var e=yi(t,kFe),{viewBox:n,position:r,value:i,children:s,content:o,className:a="",textBreakAll:l,labelRef:c}=e,u=bFe(),f=fue(),m=r==="center"?f:u??f,g,x,v;if(n==null?g=m:tD(n)?g=n:g=Nae(n),!g||Er(i)&&Er(s)&&!T.isValidElement(o)&&typeof o!="function")return null;var w=Qr(Qr({},e),{},{viewBox:g});if(T.isValidElement(o)){var{labelRef:E}=w,C=KW(w,fFe);return T.cloneElement(o,C)}if(typeof o=="function"){var{content:k}=w,O=KW(w,hFe);if(x=T.createElement(o,O),T.isValidElement(x))return x}else x=wFe(e);var j=Ps(e);if(tD(g)){if(r==="insideStart"||r==="insideEnd"||r==="end")return SFe(e,r,x,j,g);v=AFe(g,e.offset,e.position)}else v=TFe(e,g);return T.createElement(Js,{zIndex:e.zIndex},T.createElement(sN,Lu({ref:c,className:Pn("recharts-label",a)},j,v,{textAnchor:aFe(j.textAnchor)?j.textAnchor:v.textAnchor,breakAll:l}),x))}Ef.displayName="Label";var CFe=(t,e,n)=>{if(!t)return null;var r={viewBox:e,labelRef:n};return t===!0?T.createElement(Ef,Lu({key:"label-implicit"},r)):_c(t)?T.createElement(Ef,Lu({key:"label-implicit",value:t},r)):T.isValidElement(t)?t.type===Ef?T.cloneElement(t,Qr({key:"label-implicit"},r)):T.createElement(Ef,Lu({key:"label-implicit",content:t},r)):xB(t)?T.createElement(Ef,Lu({key:"label-implicit",content:t},r)):t&&typeof t=="object"?T.createElement(Ef,Lu({},t,{key:"label-implicit"},r)):null};function NFe(t){var{label:e,labelRef:n}=t,r=fue();return CFe(e,r,n)||null}var l5={},c5={},YW;function _Fe(){return YW||(YW=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(c5)),c5}var u5={},JW;function IFe(){return JW||(JW=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})(u5)),u5}var XW;function PFe(){return XW||(XW=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=_Fe(),n=IFe(),r=W8();function i(s){if(r.isArrayLike(s))return e.last(n.toArray(s))}t.last=i})(l5)),l5}var d5,QW;function RFe(){return QW||(QW=1,d5=PFe().last),d5}var OFe=RFe();const MFe=cs(OFe);var DFe=["valueAccessor"],LFe=["dataKey","clockWise","id","textBreakAll","zIndex"];function jk(){return jk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jk.apply(null,arguments)}function ZW(t,e){if(t==null)return{};var n,r,i=BFe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function BFe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var jFe=t=>Array.isArray(t.value)?MFe(t.value):t.value,hue=T.createContext(void 0),vB=hue.Provider,pue=T.createContext(void 0),UFe=pue.Provider;function FFe(){return T.useContext(hue)}function $Fe(){return T.useContext(pue)}function fT(t){var{valueAccessor:e=jFe}=t,n=ZW(t,DFe),{dataKey:r,clockWise:i,id:s,textBreakAll:o,zIndex:a}=n,l=ZW(n,LFe),c=FFe(),u=$Fe(),f=c||u;return!f||!f.length?null:T.createElement(Js,{zIndex:a??ri.label},T.createElement(Wr,{className:"recharts-label-list"},f.map((m,g)=>{var x,v=Er(r)?e(m,g):Wn(m&&m.payload,r),w=Er(s)?{}:{id:"".concat(s,"-").concat(g)};return T.createElement(Ef,jk({key:"label-".concat(g)},Ps(m),l,w,{fill:(x=n.fill)!==null&&x!==void 0?x:m.fill,parentViewBox:m.parentViewBox,value:v,textBreakAll:o,viewBox:m.viewBox,index:g,zIndex:0}))})))}fT.displayName="LabelList";function oN(t){var{label:e}=t;return e?e===!0?T.createElement(fT,{key:"labelList-implicit"}):T.isValidElement(e)||xB(e)?T.createElement(fT,{key:"labelList-implicit",content:e}):typeof e=="object"?T.createElement(fT,jk({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}function nD(){return nD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nD.apply(null,arguments)}var mue=t=>{var{cx:e,cy:n,r,className:i}=t,s=Pn("recharts-dot",i);return bt(e)&&bt(n)&&bt(r)?T.createElement("circle",nD({},Gs(t),K8(t),{className:s,cx:e,cy:n,r})):null},gue=t=>t.graphicalItems.polarItems,zFe=Me([Ir,H1],$6),aN=Me([gue,jr,zFe],z6),HFe=Me([aN],H6),lN=Me([HFe,G2],V6),VFe=Me([lN,jr,aN],G6);Me([lN,jr,aN],(t,e,n)=>n.length>0?t.flatMap(r=>n.flatMap(i=>{var s,o=Wn(r,(s=e.dataKey)!==null&&s!==void 0?s:i.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):(e==null?void 0:e.dataKey)!=null?t.map(r=>({value:Wn(r,e.dataKey),errorDomain:[]})):t.map(r=>({value:r,errorDomain:[]})));var eY=()=>{},qFe=Me([lN,jr,aN,eN,Ir],J6),GFe=Me([jr,W6,Y6,eY,qFe,eY,An,Ir],X6),yue=Me([jr,An,lN,VFe,z1,Ir,GFe],Q6),KFe=Me([yue,jr,Vx],tB);Me([jr,yue,KFe,Ir],rB);var WFe={radiusAxis:{},angleAxis:{}},xue=yo({name:"polarAxis",initialState:WFe,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:wmt,removeRadiusAxis:Emt,addAngleAxis:Smt,removeAngleAxis:Amt}=xue.actions,YFe=xue.reducer;function tY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function nY(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tY(Object(n),!0).forEach(function(r){JFe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function JFe(t,e,n){return(e=XFe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function XFe(t){var e=QFe(t,"string");return typeof e=="symbol"?e:e+""}function QFe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ZFe=(t,e)=>e,bB=Me([gue,ZFe],(t,e)=>t.filter(n=>n.type==="pie").find(n=>n.id===e)),e9e=[],wB=(t,e,n)=>(n==null?void 0:n.length)===0?e9e:n,vue=Me([G2,bB,wB],(t,e,n)=>{var{chartData:r}=t;if(e!=null){var i;if((e==null?void 0:e.data)!=null&&e.data.length>0?i=e.data:i=r,(!i||!i.length)&&n!=null&&(i=n.map(s=>nY(nY({},e.presentationProps),s.props))),i!=null)return i}}),t9e=Me([vue,bB,wB],(t,e,n)=>{if(!(t==null||e==null))return t.map((r,i)=>{var s,o=Wn(r,e.nameKey,e.name),a;return n!=null&&(s=n[i])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?a=n[i].props.fill:typeof r=="object"&&r!=null&&"fill"in r?a=r.fill:a=e.fill,{value:hh(o,e.dataKey),color:a,payload:r,type:e.legendType}})}),n9e=Me([vue,bB,wB,Si],(t,e,n,r)=>{if(!(e==null||t==null))return i$e({offset:r,pieSettings:e,displayedData:t,cells:n})}),f5={exports:{}},nr={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rY;function r9e(){if(rY)return nr;rY=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.suspense_list"),u=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),m=Symbol.for("react.view_transition"),g=Symbol.for("react.client.reference");function x(v){if(typeof v=="object"&&v!==null){var w=v.$$typeof;switch(w){case t:switch(v=v.type,v){case n:case i:case r:case l:case c:case m:return v;default:switch(v=v&&v.$$typeof,v){case o:case a:case f:case u:return v;case s:return v;default:return w}}case e:return w}}}return nr.ContextConsumer=s,nr.ContextProvider=o,nr.Element=t,nr.ForwardRef=a,nr.Fragment=n,nr.Lazy=f,nr.Memo=u,nr.Portal=e,nr.Profiler=i,nr.StrictMode=r,nr.Suspense=l,nr.SuspenseList=c,nr.isContextConsumer=function(v){return x(v)===s},nr.isContextProvider=function(v){return x(v)===o},nr.isElement=function(v){return typeof v=="object"&&v!==null&&v.$$typeof===t},nr.isForwardRef=function(v){return x(v)===a},nr.isFragment=function(v){return x(v)===n},nr.isLazy=function(v){return x(v)===f},nr.isMemo=function(v){return x(v)===u},nr.isPortal=function(v){return x(v)===e},nr.isProfiler=function(v){return x(v)===i},nr.isStrictMode=function(v){return x(v)===r},nr.isSuspense=function(v){return x(v)===l},nr.isSuspenseList=function(v){return x(v)===c},nr.isValidElementType=function(v){return typeof v=="string"||typeof v=="function"||v===n||v===i||v===r||v===l||v===c||typeof v=="object"&&v!==null&&(v.$$typeof===f||v.$$typeof===u||v.$$typeof===o||v.$$typeof===s||v.$$typeof===a||v.$$typeof===g||v.getModuleId!==void 0)},nr.typeOf=x,nr}var iY;function i9e(){return iY||(iY=1,f5.exports=r9e()),f5.exports}var s9e=i9e(),sY=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",oY=null,h5=null,bue=t=>{if(t===oY&&Array.isArray(h5))return h5;var e=[];return T.Children.forEach(t,n=>{Er(n)||(s9e.isFragment(n)?e=e.concat(bue(n.props.children)):e.push(n))}),h5=e,oY=t,e};function EB(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(i=>sY(i)):r=[sY(e)],bue(t).forEach(i=>{var s=pm(i,"type.displayName")||pm(i,"type.name");s&&r.indexOf(s)!==-1&&n.push(i)}),n}var SB=t=>t&&typeof t=="object"&&"clipDot"in t?!!t.clipDot:!0,p5={},aY;function o9e(){return aY||(aY=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){var i;if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const s=n[Symbol.toStringTag];return s==null||!((i=Object.getOwnPropertyDescriptor(n,Symbol.toStringTag))!=null&&i.writable)?!1:n.toString()===`[object ${s}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}t.isPlainObject=e})(p5)),p5}var m5,lY;function a9e(){return lY||(lY=1,m5=o9e().isPlainObject),m5}var l9e=a9e();const c9e=cs(l9e);var cY,uY,dY,fY,hY;function pY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function mY(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pY(Object(n),!0).forEach(function(r){u9e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function u9e(t,e,n){return(e=d9e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d9e(t){var e=f9e(t,"string");return typeof e=="symbol"?e:e+""}function f9e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Uk(){return Uk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Uk.apply(null,arguments)}function ub(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var gY=(t,e,n,r,i)=>{var s=n-r,o;return o=Vr(cY||(cY=ub(["M ",",",""])),t,e),o+=Vr(uY||(uY=ub(["L ",",",""])),t+n,e),o+=Vr(dY||(dY=ub(["L ",",",""])),t+n-s/2,e+i),o+=Vr(fY||(fY=ub(["L ",",",""])),t+n-s/2-r,e+i),o+=Vr(hY||(hY=ub(["L ",","," Z"])),t,e),o},h9e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},p9e=t=>{var e=yi(t,h9e),{x:n,y:r,upperWidth:i,lowerWidth:s,height:o,className:a}=e,{animationEasing:l,animationDuration:c,animationBegin:u,isUpdateAnimationActive:f}=e,m=T.useRef(null),[g,x]=T.useState(-1),v=T.useRef(i),w=T.useRef(s),E=T.useRef(o),C=T.useRef(n),k=T.useRef(r),O=jx(t,"trapezoid-");if(T.useEffect(()=>{if(m.current&&m.current.getTotalLength)try{var A=m.current.getTotalLength();A&&x(A)}catch{}},[]),n!==+n||r!==+r||i!==+i||s!==+s||o!==+o||i===0&&s===0||o===0)return null;var j=Pn("recharts-trapezoid",a);if(!f)return T.createElement("g",null,T.createElement("path",Uk({},Ps(e),{className:j,d:gY(n,r,i,s,o)})));var R=v.current,U=w.current,V=E.current,F=C.current,$=k.current,K="0px ".concat(g===-1?1:g,"px"),H="".concat(g,"px 0px"),B=Hae(["strokeDasharray"],c,l);return T.createElement(Bx,{animationId:O,key:O,canBegin:g>0,duration:c,easing:l,isActive:f,begin:u},A=>{var I=qn(R,i,A),M=qn(U,s,A),z=qn(V,o,A),G=qn(F,n,A),te=qn($,r,A);m.current&&(v.current=I,w.current=M,E.current=z,C.current=G,k.current=te);var Y=A>0?{transition:B,strokeDasharray:H}:{strokeDasharray:K};return T.createElement("path",Uk({},Ps(e),{className:j,d:gY(G,te,I,M,z),ref:m,style:mY(mY({},Y),e.style)}))})},m9e=["option","shapeType","activeClassName"];function g9e(t,e){if(t==null)return{};var n,r,i=y9e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function y9e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function yY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Fk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yY(Object(n),!0).forEach(function(r){x9e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function x9e(t,e,n){return(e=v9e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v9e(t){var e=b9e(t,"string");return typeof e=="symbol"?e:e+""}function b9e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function w9e(t,e){return Fk(Fk({},e),t)}function E9e(t,e){return t==="symbols"}function xY(t){var{shapeType:e,elementProps:n}=t;switch(e){case"rectangle":return T.createElement(Kae,n);case"trapezoid":return T.createElement(p9e,n);case"sector":return T.createElement(Xae,n);case"symbols":if(E9e(e))return T.createElement(Noe,n);break;case"curve":return T.createElement(Hg,n);default:return null}}function S9e(t){return T.isValidElement(t)?t.props:t}function AB(t){var{option:e,shapeType:n,activeClassName:r="recharts-active-shape"}=t,i=g9e(t,m9e),s;if(T.isValidElement(e))s=T.cloneElement(e,Fk(Fk({},i),S9e(e)));else if(typeof e=="function")s=e(i,i.index);else if(c9e(e)&&typeof e!="boolean"){var o=w9e(e,i);s=T.createElement(xY,{shapeType:n,elementProps:o})}else{var a=i;s=T.createElement(xY,{shapeType:n,elementProps:a})}return i.isActive?T.createElement(Wr,{className:r},s):s}var TB=(t,e,n)=>{var r=_r();return(i,s)=>o=>{t==null||t(i,s,o),r(Oce({activeIndex:String(s),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}},kB=t=>{var e=_r();return(n,r)=>i=>{t==null||t(n,r,i),e(Rje())}},CB=(t,e,n)=>{var r=_r();return(i,s)=>o=>{t==null||t(i,s,o),r(Oje({activeIndex:String(s),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}};function cN(t){var{tooltipEntrySettings:e}=t,n=_r(),r=Fi(),i=T.useRef(null);return T.useLayoutEffect(()=>{r||(i.current===null?n(Nje(e)):i.current!==e&&n(_je({prev:i.current,next:e})),i.current=e)},[e,n,r]),T.useLayoutEffect(()=>()=>{i.current&&(n(Ije(i.current)),i.current=null)},[n]),null}function NB(t){var{legendPayload:e}=t,n=_r(),r=Fi(),i=T.useRef(null);return T.useLayoutEffect(()=>{r||(i.current===null?n(Uae(e)):i.current!==e&&n(Fae({prev:i.current,next:e})),i.current=e)},[n,r,e]),T.useLayoutEffect(()=>()=>{i.current&&(n($ae(i.current)),i.current=null)},[n]),null}function A9e(t){var{legendPayload:e}=t,n=_r(),r=Pt(An),i=T.useRef(null);return T.useLayoutEffect(()=>{r!=="centric"&&r!=="radial"||(i.current===null?n(Uae(e)):i.current!==e&&n(Fae({prev:i.current,next:e})),i.current=e)},[n,r,e]),T.useLayoutEffect(()=>()=>{i.current&&(n($ae(i.current)),i.current=null)},[n]),null}var g5,T9e=()=>{var[t]=T.useState(()=>Tw("uid-"));return t},k9e=(g5=LC.useId)!==null&&g5!==void 0?g5:T9e;function C9e(t,e){var n=k9e();return e||(t?"".concat(t,"-").concat(n):n)}var N9e=T.createContext(void 0),uN=t=>{var{id:e,type:n,children:r}=t,i=C9e("recharts-".concat(n),e);return T.createElement(N9e.Provider,{value:i},r(i))},_9e={cartesianItems:[],polarItems:[]},wue=yo({name:"graphicalItems",initialState:_9e,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:Tr()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:n,next:r}=e.payload,i=bl(t).cartesianItems.indexOf(n);i>-1&&(t.cartesianItems[i]=r)},prepare:Tr()},removeCartesianGraphicalItem:{reducer(t,e){var n=bl(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},prepare:Tr()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:Tr()},removePolarGraphicalItem:{reducer(t,e){var n=bl(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)},prepare:Tr()}}}),{addCartesianGraphicalItem:I9e,replaceCartesianGraphicalItem:P9e,removeCartesianGraphicalItem:R9e,addPolarGraphicalItem:O9e,removePolarGraphicalItem:M9e}=wue.actions,D9e=wue.reducer,L9e=t=>{var e=_r(),n=T.useRef(null);return T.useLayoutEffect(()=>{n.current===null?e(I9e(t)):n.current!==t&&e(P9e({prev:n.current,next:t})),n.current=t},[e,t]),T.useLayoutEffect(()=>()=>{n.current&&(e(R9e(n.current)),n.current=null)},[e]),null},_B=T.memo(L9e);function B9e(t){var e=_r();return T.useLayoutEffect(()=>(e(O9e(t)),()=>{e(M9e(t))}),[e,t]),null}var j9e=["key"],U9e=["onMouseEnter","onClick","onMouseLeave"],F9e=["id"],$9e=["id"];function vY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Kr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vY(Object(n),!0).forEach(function(r){z9e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function z9e(t,e,n){return(e=H9e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function H9e(t){var e=V9e(t,"string");return typeof e=="symbol"?e:e+""}function V9e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ah(){return ah=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ah.apply(null,arguments)}function dN(t,e){if(t==null)return{};var n,r,i=q9e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function q9e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function G9e(t){var e=T.useMemo(()=>EB(t.children,Wx),[t.children]),n=Pt(r=>t9e(r,t.id,e));return n==null?null:T.createElement(A9e,{legendPayload:n})}var K9e=T.memo(t=>{var{dataKey:e,nameKey:n,sectors:r,stroke:i,strokeWidth:s,fill:o,name:a,hide:l,tooltipType:c,id:u}=t,f={dataDefinedOnItem:r.map(m=>m.tooltipPayload),positions:r.map(m=>m.tooltipPosition),settings:{stroke:i,strokeWidth:s,fill:o,dataKey:e,nameKey:n,name:hh(a,e),hide:l,type:c,color:o,unit:"",graphicalItemId:u}};return T.createElement(cN,{tooltipEntrySettings:f})}),W9e=(t,e)=>t>e?"start":t<e?"end":"middle",Y9e=(t,e,n)=>_s(typeof e=="function"?e(t):e,n,n*.8),J9e=(t,e,n)=>{var{top:r,left:i,width:s,height:o}=e,a=Wae(s,o),l=i+_s(t.cx,s,s/2),c=r+_s(t.cy,o,o/2),u=_s(t.innerRadius,a,0),f=Y9e(n,t.outerRadius,a),m=t.maxRadius||Math.sqrt(s*s+o*o)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:f,maxRadius:m}},X9e=(t,e)=>{var n=ji(e-t),r=Math.min(Math.abs(e-t),360);return n*r};function Q9e(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}var Z9e=(t,e)=>{if(T.isValidElement(t))return T.cloneElement(t,e);if(typeof t=="function")return t(e);var n=Pn("recharts-pie-label-line",typeof t!="boolean"?t.className:""),{key:r}=e,i=dN(e,j9e);return T.createElement(Hg,ah({},i,{type:"linear",className:n}))},e$e=(t,e,n)=>{if(T.isValidElement(t))return T.cloneElement(t,e);var r=n;if(typeof t=="function"&&(r=t(e),T.isValidElement(r)))return r;var i=Pn("recharts-pie-label-text",Q9e(t));return T.createElement(sN,ah({},e,{alignmentBaseline:"middle",className:i}),r)};function t$e(t){var{sectors:e,props:n,showLabels:r}=t,{label:i,labelLine:s,dataKey:o}=n;if(!r||!i||!e)return null;var a=Gs(n),l=fm(i),c=fm(s),u=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,f=e.map((m,g)=>{var x=(m.startAngle+m.endAngle)/2,v=mi(m.cx,m.cy,m.outerRadius+u,x),w=Kr(Kr(Kr(Kr({},a),m),{},{stroke:"none"},l),{},{index:g,textAnchor:W9e(v.x,m.cx)},v),E=Kr(Kr(Kr(Kr({},a),m),{},{fill:"none",stroke:m.fill},c),{},{index:g,points:[mi(m.cx,m.cy,m.outerRadius,x),v],key:"line"});return T.createElement(Js,{zIndex:ri.label,key:"label-".concat(m.startAngle,"-").concat(m.endAngle,"-").concat(m.midAngle,"-").concat(g)},T.createElement(Wr,null,s&&Z9e(s,E),e$e(i,w,Wn(m,o))))});return T.createElement(Wr,{className:"recharts-pie-labels"},f)}function n$e(t){var{sectors:e,props:n,showLabels:r}=t,{label:i}=n;return typeof i=="object"&&i!=null&&"position"in i?T.createElement(oN,{label:i}):T.createElement(t$e,{sectors:e,props:n,showLabels:r})}function r$e(t){var{sectors:e,activeShape:n,inactiveShape:r,allOtherPieProps:i,shape:s,id:o}=t,a=Pt(oh),l=Pt(fB),c=Pt(x7e),{onMouseEnter:u,onClick:f,onMouseLeave:m}=i,g=dN(i,U9e),x=TB(u,i.dataKey,o),v=kB(m),w=CB(f,i.dataKey,o);return e==null||e.length===0?null:T.createElement(T.Fragment,null,e.map((E,C)=>{if((E==null?void 0:E.startAngle)===0&&(E==null?void 0:E.endAngle)===0&&e.length!==1)return null;var k=c==null||c===o,O=String(C)===a&&(l==null||i.dataKey===l)&&k,j=a?r:null,R=n&&O?n:j,U=Kr(Kr({},E),{},{stroke:E.stroke,tabIndex:-1,[Sae]:C,[Aae]:o});return T.createElement(Wr,ah({key:"sector-".concat(E==null?void 0:E.startAngle,"-").concat(E==null?void 0:E.endAngle,"-").concat(E.midAngle,"-").concat(C),tabIndex:-1,className:"recharts-pie-sector"},w2(g,E,C),{onMouseEnter:x(E,C),onMouseLeave:v(E,C),onClick:w(E,C)}),T.createElement(AB,ah({option:s??R,index:C,shapeType:"sector",isActive:O},U)))}))}function i$e(t){var e,{pieSettings:n,displayedData:r,cells:i,offset:s}=t,{cornerRadius:o,startAngle:a,endAngle:l,dataKey:c,nameKey:u,tooltipType:f}=n,m=Math.abs(n.minAngle),g=X9e(a,l),x=Math.abs(g),v=r.length<=1?0:(e=n.paddingAngle)!==null&&e!==void 0?e:0,w=r.filter(R=>Wn(R,c,0)!==0).length,E=(x>=360?w:w-1)*v,C=x-w*m-E,k=r.reduce((R,U)=>{var V=Wn(U,c,0);return R+(bt(V)?V:0)},0),O;if(k>0){var j;O=r.map((R,U)=>{var V=Wn(R,c,0),F=Wn(R,u,U),$=J9e(n,s,R),K=(bt(V)?V:0)/k,H,B=Kr(Kr({},R),i&&i[U]&&i[U].props);U?H=j.endAngle+ji(g)*v*(V!==0?1:0):H=a;var A=H+ji(g)*((V!==0?m:0)+K*C),I=(H+A)/2,M=($.innerRadius+$.outerRadius)/2,z=[{name:F,value:V,payload:B,dataKey:c,type:f,graphicalItemId:n.id}],G=mi($.cx,$.cy,M,I);return j=Kr(Kr(Kr(Kr({},n.presentationProps),{},{percent:K,cornerRadius:typeof o=="string"?parseFloat(o):o,name:F,tooltipPayload:z,midAngle:I,middleRadius:M,tooltipPosition:G},B),$),{},{value:V,dataKey:c,startAngle:H,endAngle:A,payload:B,paddingAngle:ji(g)*v}),j})}return O}function s$e(t){var{showLabels:e,sectors:n,children:r}=t,i=T.useMemo(()=>!e||!n?[]:n.map(s=>({value:s.value,payload:s.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:s.cx,cy:s.cy,innerRadius:s.innerRadius,outerRadius:s.outerRadius,startAngle:s.startAngle,endAngle:s.endAngle,clockWise:!1},fill:s.fill})),[n,e]);return T.createElement(UFe,{value:e?i:void 0},r)}function o$e(t){var{props:e,previousSectorsRef:n,id:r}=t,{sectors:i,isAnimationActive:s,animationBegin:o,animationDuration:a,animationEasing:l,activeShape:c,inactiveShape:u,onAnimationStart:f,onAnimationEnd:m}=e,g=jx(e,"recharts-pie-"),x=n.current,[v,w]=T.useState(!1),E=T.useCallback(()=>{typeof m=="function"&&m(),w(!1)},[m]),C=T.useCallback(()=>{typeof f=="function"&&f(),w(!0)},[f]);return T.createElement(s$e,{showLabels:!v,sectors:i},T.createElement(Bx,{animationId:g,begin:o,duration:a,isActive:s,easing:l,onAnimationStart:C,onAnimationEnd:E,key:g},k=>{var O=[],j=i&&i[0],R=j==null?void 0:j.startAngle;return i==null||i.forEach((U,V)=>{var F=x&&x[V],$=V>0?pm(U,"paddingAngle",0):0;if(F){var K=qn(F.endAngle-F.startAngle,U.endAngle-U.startAngle,k),H=Kr(Kr({},U),{},{startAngle:R+$,endAngle:R+K+$});O.push(H),R=H.endAngle}else{var{endAngle:B,startAngle:A}=U,I=qn(0,B-A,k),M=Kr(Kr({},U),{},{startAngle:R+$,endAngle:R+I+$});O.push(M),R=M.endAngle}}),n.current=O,T.createElement(Wr,null,T.createElement(r$e,{sectors:O,activeShape:c,inactiveShape:u,allOtherPieProps:e,shape:e.shape,id:r}))}),T.createElement(n$e,{showLabels:!v,sectors:i,props:e}),e.children)}var a$e={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:ri.area};function l$e(t){var{id:e}=t,n=dN(t,F9e),{hide:r,className:i,rootTabIndex:s}=t,o=T.useMemo(()=>EB(t.children,Wx),[t.children]),a=Pt(u=>n9e(u,e,o)),l=T.useRef(null),c=Pn("recharts-pie",i);return r||a==null?(l.current=null,T.createElement(Wr,{tabIndex:s,className:c})):T.createElement(Js,{zIndex:t.zIndex},T.createElement(K9e,{dataKey:t.dataKey,nameKey:t.nameKey,sectors:a,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,tooltipType:t.tooltipType,id:e}),T.createElement(Wr,{tabIndex:s,className:c},T.createElement(o$e,{props:Kr(Kr({},n),{},{sectors:a}),previousSectorsRef:l,id:e})))}function IB(t){var e=yi(t,a$e),{id:n}=e,r=dN(e,$9e),i=Gs(r);return T.createElement(uN,{id:n,type:"pie"},s=>T.createElement(T.Fragment,null,T.createElement(B9e,{type:"pie",id:s,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:i,maxRadius:e.maxRadius}),T.createElement(G9e,ah({},r,{id:s})),T.createElement(l$e,ah({},r,{id:s}))))}IB.displayName="Pie";var c$e=["points"];function bY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function y5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bY(Object(n),!0).forEach(function(r){u$e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function u$e(t,e,n){return(e=d$e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d$e(t){var e=f$e(t,"string");return typeof e=="symbol"?e:e+""}function f$e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $k(){return $k=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$k.apply(null,arguments)}function h$e(t,e){if(t==null)return{};var n,r,i=p$e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function p$e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function m$e(t){var{option:e,dotProps:n,className:r}=t;if(T.isValidElement(e))return T.cloneElement(e,n);if(typeof e=="function")return e(n);var i=Pn(r,typeof e!="boolean"?e.className:""),s=n??{},{points:o}=s,a=h$e(s,c$e);return T.createElement(mue,$k({},a,{className:i}))}function g$e(t,e){return t==null?!1:e?!0:t.length===1}function Eue(t){var{points:e,dot:n,className:r,dotClassName:i,dataKey:s,baseProps:o,needClip:a,clipPathId:l,zIndex:c=ri.scatter}=t;if(!g$e(e,n))return null;var u=SB(n),f=i5e(n),m=e.map((x,v)=>{var w,E,C=y5(y5(y5({r:3},o),f),{},{index:v,cx:(w=x.x)!==null&&w!==void 0?w:void 0,cy:(E=x.y)!==null&&E!==void 0?E:void 0,dataKey:s,value:x.value,payload:x.payload,points:e});return T.createElement(m$e,{key:"dot-".concat(v),option:n,dotProps:C,className:i})}),g={};return a&&l!=null&&(g.clipPath="url(#clipPath-".concat(u?"":"dots-").concat(l,")")),T.createElement(Js,{zIndex:c},T.createElement(Wr,$k({className:r},g),m))}function wY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function EY(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wY(Object(n),!0).forEach(function(r){y$e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function y$e(t,e,n){return(e=x$e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function x$e(t){var e=v$e(t,"string");return typeof e=="symbol"?e:e+""}function v$e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Sue=0,b$e={xAxis:{},yAxis:{},zAxis:{}},Aue=yo({name:"cartesianAxis",initialState:b$e,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:Tr()},replaceXAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.xAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.xAxis[n.id],t.xAxis[r.id]=r)},prepare:Tr()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:Tr()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:Tr()},replaceYAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.yAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.yAxis[n.id],t.yAxis[r.id]=r)},prepare:Tr()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:Tr()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:Tr()},replaceZAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.zAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.zAxis[n.id],t.zAxis[r.id]=r)},prepare:Tr()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:Tr()},updateYAxisWidth(t,e){var{id:n,width:r}=e.payload,i=t.yAxis[n];if(i){var s=i.widthHistory||[];if(s.length===3&&s[0]===s[2]&&r===s[1]&&r!==i.width&&Math.abs(r-s[0])<=1)return;var o=[...s,r].slice(-3);t.yAxis[n]=EY(EY({},t.yAxis[n]),{},{width:r,widthHistory:o})}}}}),{addXAxis:w$e,replaceXAxis:E$e,removeXAxis:S$e,addYAxis:A$e,replaceYAxis:T$e,removeYAxis:k$e,addZAxis:Tmt,replaceZAxis:kmt,removeZAxis:Cmt,updateYAxisWidth:C$e}=Aue.actions,N$e=Aue.reducer,_$e=Me([Si],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),I$e=Me([_$e,Ed,Sd],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),fN=()=>Pt(I$e),P$e=()=>Pt(S7e);function SY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function x5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SY(Object(n),!0).forEach(function(r){R$e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function R$e(t,e,n){return(e=O$e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function O$e(t){var e=M$e(t,"string");return typeof e=="symbol"?e:e+""}function M$e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var D$e=t=>{var{point:e,childIndex:n,mainColor:r,activeDot:i,dataKey:s,clipPath:o}=t;if(i===!1||e.x==null||e.y==null)return null;var a={index:n,dataKey:s,cx:e.x,cy:e.y,r:4,fill:r??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},l=x5(x5(x5({},a),fm(i)),K8(i)),c;return T.isValidElement(i)?c=T.cloneElement(i,l):typeof i=="function"?c=i(l):c=T.createElement(mue,l),T.createElement(Wr,{className:"recharts-active-dot",clipPath:o},c)};function rD(t){var{points:e,mainColor:n,activeDot:r,itemDataKey:i,clipPath:s,zIndex:o=ri.activeDot}=t,a=Pt(oh),l=P$e();if(e==null||l==null)return null;var c=e.find(u=>l.includes(u.payload));return Er(c)?null:T.createElement(Js,{zIndex:o},T.createElement(D$e,{point:c,childIndex:Number(a),mainColor:n,dataKey:i,activeDot:r,clipPath:s}))}var AY=(t,e,n)=>{var r=n??t;if(!Er(r))return _s(r,e,0)},L$e=(t,e,n)=>{var r={},i=t.filter(J2),s=t.filter(c=>c.stackId==null),o=i.reduce((c,u)=>(c[u.stackId]||(c[u.stackId]=[]),c[u.stackId].push(u),c),r),a=Object.entries(o).map(c=>{var[u,f]=c,m=f.map(x=>x.dataKey),g=AY(e,n,f[0].barSize);return{stackId:u,dataKeys:m,barSize:g}}),l=s.map(c=>{var u=[c.dataKey].filter(m=>m!=null),f=AY(e,n,c.barSize);return{stackId:void 0,dataKeys:u,barSize:f}});return[...a,...l]};function TY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TY(Object(n),!0).forEach(function(r){B$e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function B$e(t,e,n){return(e=j$e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function j$e(t){var e=U$e(t,"string");return typeof e=="symbol"?e:e+""}function U$e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function F$e(t,e,n,r,i){var s=r.length;if(!(s<1)){var o=_s(t,n,0,!0),a,l=[];if(ur(r[0].barSize)){var c=!1,u=n/s,f=r.reduce((E,C)=>E+(C.barSize||0),0);f+=(s-1)*o,f>=n&&(f-=(s-1)*o,o=0),f>=n&&u>0&&(c=!0,u*=.9,f=s*u);var m=(n-f)/2>>0,g={offset:m-o,size:0};a=r.reduce((E,C)=>{var k,O={stackId:C.stackId,dataKeys:C.dataKeys,position:{offset:g.offset+g.size+o,size:c?u:(k=C.barSize)!==null&&k!==void 0?k:0}},j=[...E,O];return g=j[j.length-1].position,j},l)}else{var x=_s(e,n,0,!0);n-2*x-(s-1)*o<=0&&(o=0);var v=(n-2*x-(s-1)*o)/s;v>1&&(v>>=0);var w=ur(i)?Math.min(v,i):v;a=r.reduce((E,C,k)=>[...E,{stackId:C.stackId,dataKeys:C.dataKeys,position:{offset:x+(v+o)*k+(v-w)/2,size:w}}],l)}return a}}var $$e=(t,e,n,r,i,s,o)=>{var a=Er(o)?e:o,l=F$e(n,r,i!==s?i:s,t,a);return i!==s&&l!=null&&(l=l.map(c=>hA(hA({},c),{},{position:hA(hA({},c.position),{},{offset:c.position.offset-i/2})}))),l},z$e=(t,e)=>{var n=Y2(e);if(!(!t||n==null||e==null)){var{stackId:r}=e;if(r!=null){var i=t[r];if(i){var{stackedData:s}=i;if(s)return s.find(o=>o.key===n)}}}};function H$e(t,e){return t&&typeof t=="object"&&"zIndex"in t&&typeof t.zIndex=="number"&&ur(t.zIndex)?t.zIndex:e}var Tue=t=>{var{chartData:e}=t,n=_r(),r=Fi();return T.useEffect(()=>r?()=>{}:(n(RW(e)),()=>{n(RW(void 0))}),[e,n,r]),null},kY={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},kue=yo({name:"brush",initialState:kY,reducers:{setBrushSettings(t,e){return e.payload==null?kY:e.payload}}}),{setBrushSettings:Nmt}=kue.actions,V$e=kue.reducer;function q$e(t,e,n){return(e=G$e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function G$e(t){var e=K$e(t,"string");return typeof e=="symbol"?e:e+""}function K$e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class PB{static create(e){return new PB(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(r)switch(r){case"start":return this.scale(e);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(e)+s}default:return this.scale(e)}if(n){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+o}return this.scale(e)}}isInRange(e){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?e>=r&&e<=i:e>=i&&e<=r}}q$e(PB,"EPS",1e-4);function W$e(t){return(t%180+180)%180}var Y$e=function(e){var{width:n,height:r}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=W$e(i),o=s*Math.PI/180,a=Math.atan(r/n),l=o>a&&o<Math.PI-a?r/Math.sin(o):n/Math.cos(o);return Math.abs(l)},J$e={dots:[],areas:[],lines:[]},Cue=yo({name:"referenceElements",initialState:J$e,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=bl(t).dots.findIndex(r=>r===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=bl(t).areas.findIndex(r=>r===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=bl(t).lines.findIndex(r=>r===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:_mt,removeDot:Imt,addArea:Pmt,removeArea:Rmt,addLine:Omt,removeLine:Mmt}=Cue.actions,X$e=Cue.reducer,Q$e=T.createContext(void 0),Z$e=t=>{var{children:e}=t,[n]=T.useState("".concat(Tw("recharts"),"-clip")),r=fN();if(r==null)return null;var{x:i,y:s,width:o,height:a}=r;return T.createElement(Q$e.Provider,{value:n},T.createElement("defs",null,T.createElement("clipPath",{id:n},T.createElement("rect",{x:i,y:s,height:a,width:o}))),e)};function Nue(t,e){if(e<1)return[];if(e===1)return t;for(var n=[],r=0;r<t.length;r+=e){var i=t[r];i!==void 0&&n.push(i)}return n}function eze(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return Y$e(r,n)}function tze(t,e,n){var r=n==="width",{x:i,y:s,width:o,height:a}=t;return e===1?{start:r?i:s,end:r?i+o:s+a}:{start:r?i+o:s+a,end:r?i:s}}function Fw(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var s=n();return t*(e-t*s/2-r)>=0&&t*(e+t*s/2-i)<=0}function nze(t,e){return Nue(t,e+1)}function rze(t,e,n,r,i){for(var s=(r||[]).slice(),{start:o,end:a}=e,l=0,c=1,u=o,f=function(){var x=r==null?void 0:r[l];if(x===void 0)return{v:Nue(r,c)};var v=l,w,E=()=>(w===void 0&&(w=n(x,v)),w),C=x.coordinate,k=l===0||Fw(t,C,E,u,a);k||(l=0,u=o,c+=1),k&&(u=C+t*(E()/2+i),l+=c)},m;c<=s.length;)if(m=f(),m)return m.v;return[]}function ize(t,e,n,r,i){var s=(r||[]).slice(),o=s.length;if(o===0)return[];for(var{start:a,end:l}=e,c=1;c<=o;c++){for(var u=(o-1)%c,f=a,m=!0,g=function(){var C=r[x],k=x,O,j=()=>(O===void 0&&(O=n(C,k)),O),R=C.coordinate,U=x===u||Fw(t,R,j,f,l);if(!U)return m=!1,1;U&&(f=R+t*(j()/2+i))},x=u;x<o&&!g();x+=c);if(m){for(var v=[],w=u;w<o;w+=c)v.push(r[w]);return v}}return[]}function CY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ws(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CY(Object(n),!0).forEach(function(r){sze(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sze(t,e,n){return(e=oze(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oze(t){var e=aze(t,"string");return typeof e=="symbol"?e:e+""}function aze(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lze(t,e,n,r,i){for(var s=(r||[]).slice(),o=s.length,{start:a}=e,{end:l}=e,c=function(m){var g=s[m],x,v=()=>(x===void 0&&(x=n(g,m)),x);if(m===o-1){var w=t*(g.coordinate+t*v()/2-l);s[m]=g=ws(ws({},g),{},{tickCoord:w>0?g.coordinate-w*t:g.coordinate})}else s[m]=g=ws(ws({},g),{},{tickCoord:g.coordinate});if(g.tickCoord!=null){var E=Fw(t,g.tickCoord,v,a,l);E&&(l=g.tickCoord-t*(v()/2+i),s[m]=ws(ws({},g),{},{isShow:!0}))}},u=o-1;u>=0;u--)c(u);return s}function cze(t,e,n,r,i,s){var o=(r||[]).slice(),a=o.length,{start:l,end:c}=e;if(s){var u=r[a-1],f=n(u,a-1),m=t*(u.coordinate+t*f/2-c);if(o[a-1]=u=ws(ws({},u),{},{tickCoord:m>0?u.coordinate-m*t:u.coordinate}),u.tickCoord!=null){var g=Fw(t,u.tickCoord,()=>f,l,c);g&&(c=u.tickCoord-t*(f/2+i),o[a-1]=ws(ws({},u),{},{isShow:!0}))}}for(var x=s?a-1:a,v=function(C){var k=o[C],O,j=()=>(O===void 0&&(O=n(k,C)),O);if(C===0){var R=t*(k.coordinate-t*j()/2-l);o[C]=k=ws(ws({},k),{},{tickCoord:R<0?k.coordinate-R*t:k.coordinate})}else o[C]=k=ws(ws({},k),{},{tickCoord:k.coordinate});if(k.tickCoord!=null){var U=Fw(t,k.tickCoord,j,l,c);U&&(l=k.tickCoord+t*(j()/2+i),o[C]=ws(ws({},k),{},{isShow:!0}))}},w=0;w<x;w++)v(w);return o}function RB(t,e,n){var{tick:r,ticks:i,viewBox:s,minTickGap:o,orientation:a,interval:l,tickFormatter:c,unit:u,angle:f}=t;if(!i||!i.length||!r)return[];if(bt(l)||B1.isSsr){var m;return(m=nze(i,bt(l)?l:0))!==null&&m!==void 0?m:[]}var g=[],x=a==="top"||a==="bottom"?"width":"height",v=u&&x==="width"?Vb(u,{fontSize:e,letterSpacing:n}):{width:0,height:0},w=(k,O)=>{var j=typeof c=="function"?c(k.value,O):k.value;return x==="width"?eze(Vb(j,{fontSize:e,letterSpacing:n}),v,f):Vb(j,{fontSize:e,letterSpacing:n})[x]},E=i.length>=2?ji(i[1].coordinate-i[0].coordinate):1,C=tze(s,E,x);return l==="equidistantPreserveStart"?rze(E,C,w,i,o):l==="equidistantPreserveEnd"?ize(E,C,w,i,o):(l==="preserveStart"||l==="preserveStartEnd"?g=cze(E,C,w,i,o,l==="preserveStartEnd"):g=lze(E,C,w,i,o),g.filter(k=>k.isShow))}var uze=t=>{var{ticks:e,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:s=0}=t,o=0;if(e){Array.from(e).forEach(u=>{if(u){var f=u.getBoundingClientRect();f.width>o&&(o=f.width)}});var a=n?n.getBoundingClientRect().width:0,l=i+s,c=o+l+a+(n?r:0);return Math.round(c)}return 0},dze=["axisLine","width","height","className","hide","ticks","axisType"];function fze(t,e){if(t==null)return{};var n,r,i=hze(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function hze(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function vm(){return vm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vm.apply(null,arguments)}function NY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NY(Object(n),!0).forEach(function(r){pze(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pze(t,e,n){return(e=mze(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mze(t){var e=gze(t,"string");return typeof e=="symbol"?e:e+""}function gze(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Yu={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:ri.axis};function yze(t){var{x:e,y:n,width:r,height:i,orientation:s,mirror:o,axisLine:a,otherSvgProps:l}=t;if(!a)return null;var c=fi(fi(fi({},l),Gs(a)),{},{fill:"none"});if(s==="top"||s==="bottom"){var u=+(s==="top"&&!o||s==="bottom"&&o);c=fi(fi({},c),{},{x1:e,y1:n+u*i,x2:e+r,y2:n+u*i})}else{var f=+(s==="left"&&!o||s==="right"&&o);c=fi(fi({},c),{},{x1:e+f*r,y1:n,x2:e+f*r,y2:n+i})}return T.createElement("line",vm({},c,{className:Pn("recharts-cartesian-axis-line",pm(a,"className"))}))}function xze(t,e,n,r,i,s,o,a,l){var c,u,f,m,g,x,v=a?-1:1,w=t.tickSize||o,E=bt(t.tickCoord)?t.tickCoord:t.coordinate;switch(s){case"top":c=u=t.coordinate,m=n+ +!a*i,f=m-v*w,x=f-v*l,g=E;break;case"left":f=m=t.coordinate,u=e+ +!a*r,c=u-v*w,g=c-v*l,x=E;break;case"right":f=m=t.coordinate,u=e+ +a*r,c=u+v*w,g=c+v*l,x=E;break;default:c=u=t.coordinate,m=n+ +a*i,f=m+v*w,x=f+v*l,g=E;break}return{line:{x1:c,y1:f,x2:u,y2:m},tick:{x:g,y:x}}}function vze(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function bze(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function wze(t){var{option:e,tickProps:n,value:r}=t,i,s=Pn(n.className,"recharts-cartesian-axis-tick-value");if(T.isValidElement(e))i=T.cloneElement(e,fi(fi({},n),{},{className:s}));else if(typeof e=="function")i=e(fi(fi({},n),{},{className:s}));else{var o="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(o=Pn(o,e==null?void 0:e.className)),i=T.createElement(sN,vm({},n,{className:o}),r)}return i}var Eze=T.forwardRef((t,e)=>{var{ticks:n=[],tick:r,tickLine:i,stroke:s,tickFormatter:o,unit:a,padding:l,tickTextProps:c,orientation:u,mirror:f,x:m,y:g,width:x,height:v,tickSize:w,tickMargin:E,fontSize:C,letterSpacing:k,getTicksConfig:O,events:j,axisType:R}=t,U=RB(fi(fi({},O),{},{ticks:n}),C,k),V=vze(u,f),F=bze(u,f),$=Gs(O),K=fm(r),H={};typeof i=="object"&&(H=i);var B=fi(fi({},$),{},{fill:"none"},H),A=U.map(z=>fi({entry:z},xze(z,m,g,x,v,u,w,f,E))),I=A.map(z=>{var{entry:G,line:te}=z;return T.createElement(Wr,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(G.value,"-").concat(G.coordinate,"-").concat(G.tickCoord)},i&&T.createElement("line",vm({},B,te,{className:Pn("recharts-cartesian-axis-tick-line",pm(i,"className"))})))}),M=A.map((z,G)=>{var{entry:te,tick:Y}=z,q=fi(fi(fi(fi({textAnchor:V,verticalAnchor:F},$),{},{stroke:"none",fill:s},K),Y),{},{index:G,payload:te,visibleTicksCount:U.length,tickFormatter:o,padding:l},c);return T.createElement(Wr,vm({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(te.value,"-").concat(te.coordinate,"-").concat(te.tickCoord)},w2(j,te,G)),r&&T.createElement(wze,{option:r,tickProps:q,value:"".concat(typeof o=="function"?o(te.value,G):te.value).concat(a||"")}))});return T.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(R,"-ticks")},M.length>0&&T.createElement(Js,{zIndex:ri.label},T.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(R,"-tick-labels"),ref:e},M)),I.length>0&&T.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(R,"-tick-lines")},I))}),Sze=T.forwardRef((t,e)=>{var{axisLine:n,width:r,height:i,className:s,hide:o,ticks:a,axisType:l}=t,c=fze(t,dze),[u,f]=T.useState(""),[m,g]=T.useState(""),x=T.useRef(null);T.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var w;return uze({ticks:x.current,label:(w=t.labelRef)===null||w===void 0?void 0:w.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var v=T.useCallback(w=>{if(w){var E=w.getElementsByClassName("recharts-cartesian-axis-tick-value");x.current=E;var C=E[0];if(C){var k=window.getComputedStyle(C),O=k.fontSize,j=k.letterSpacing;(O!==u||j!==m)&&(f(O),g(j))}}},[u,m]);return o||r!=null&&r<=0||i!=null&&i<=0?null:T.createElement(Js,{zIndex:t.zIndex},T.createElement(Wr,{className:Pn("recharts-cartesian-axis",s)},T.createElement(yze,{x:t.x,y:t.y,width:r,height:i,orientation:t.orientation,mirror:t.mirror,axisLine:n,otherSvgProps:Gs(t)}),T.createElement(Eze,{ref:v,axisType:l,events:c,fontSize:u,getTicksConfig:t,height:t.height,letterSpacing:m,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:a,unit:t.unit,width:t.width,x:t.x,y:t.y}),T.createElement(xFe,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},T.createElement(NFe,{label:t.label,labelRef:t.labelRef}),t.children)))}),OB=T.forwardRef((t,e)=>{var n=yi(t,Yu);return T.createElement(Sze,vm({},n,{ref:e}))});OB.displayName="CartesianAxis";var Aze=["x1","y1","x2","y2","key"],Tze=["offset"],kze=["xAxisId","yAxisId"],Cze=["xAxisId","yAxisId"];function _Y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function As(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_Y(Object(n),!0).forEach(function(r){Nze(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_Y(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Nze(t,e,n){return(e=_ze(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _ze(t){var e=Ize(t,"string");return typeof e=="symbol"?e:e+""}function Ize(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wp(){return wp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wp.apply(null,arguments)}function zk(t,e){if(t==null)return{};var n,r,i=Pze(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Pze(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Rze=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:n,x:r,y:i,width:s,height:o,ry:a}=t;return T.createElement("rect",{x:r,y:i,ry:a,width:s,height:o,stroke:"none",fill:e,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function _ue(t){var{option:e,lineItemProps:n}=t,r;if(T.isValidElement(e))r=T.cloneElement(e,n);else if(typeof e=="function")r=e(n);else{var i,{x1:s,y1:o,x2:a,y2:l,key:c}=n,u=zk(n,Aze),f=(i=Gs(u))!==null&&i!==void 0?i:{},{offset:m}=f,g=zk(f,Tze);r=T.createElement("line",wp({},g,{x1:s,y1:o,x2:a,y2:l,fill:"none",key:c}))}return r}function Oze(t){var{x:e,width:n,horizontal:r=!0,horizontalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:o}=t,a=zk(t,kze),l=i.map((c,u)=>{var f=As(As({},a),{},{x1:e,y1:c,x2:e+n,y2:c,key:"line-".concat(u),index:u});return T.createElement(_ue,{key:"line-".concat(u),option:r,lineItemProps:f})});return T.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function Mze(t){var{y:e,height:n,vertical:r=!0,verticalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:o}=t,a=zk(t,Cze),l=i.map((c,u)=>{var f=As(As({},a),{},{x1:c,y1:e,x2:c,y2:e+n,key:"line-".concat(u),index:u});return T.createElement(_ue,{option:r,lineItemProps:f,key:"line-".concat(u)})});return T.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function Dze(t){var{horizontalFill:e,fillOpacity:n,x:r,y:i,width:s,height:o,horizontalPoints:a,horizontal:l=!0}=t;if(!l||!e||!e.length||a==null)return null;var c=a.map(f=>Math.round(f+i-i)).sort((f,m)=>f-m);i!==c[0]&&c.unshift(0);var u=c.map((f,m)=>{var g=!c[m+1],x=g?i+o-f:c[m+1]-f;if(x<=0)return null;var v=m%e.length;return T.createElement("rect",{key:"react-".concat(m),y:f,x:r,height:x,width:s,stroke:"none",fill:e[v],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return T.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},u)}function Lze(t){var{vertical:e=!0,verticalFill:n,fillOpacity:r,x:i,y:s,width:o,height:a,verticalPoints:l}=t;if(!e||!n||!n.length)return null;var c=l.map(f=>Math.round(f+i-i)).sort((f,m)=>f-m);i!==c[0]&&c.unshift(0);var u=c.map((f,m)=>{var g=!c[m+1],x=g?i+o-f:c[m+1]-f;if(x<=0)return null;var v=m%n.length;return T.createElement("rect",{key:"react-".concat(m),x:f,y:s,width:x,height:a,stroke:"none",fill:n[v],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return T.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var Bze=(t,e)=>{var{xAxis:n,width:r,height:i,offset:s}=t;return vae(RB(As(As(As({},Yu),n),{},{ticks:bae(n),viewBox:{x:0,y:0,width:r,height:i}})),s.left,s.left+s.width,e)},jze=(t,e)=>{var{yAxis:n,width:r,height:i,offset:s}=t;return vae(RB(As(As(As({},Yu),n),{},{ticks:bae(n),viewBox:{x:0,y:0,width:r,height:i}})),s.top,s.top+s.height,e)},Uze={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:ri.grid};function $w(t){var e=Iae(),n=Pae(),r=_ae(),i=As(As({},yi(t,Uze)),{},{x:bt(t.x)?t.x:r.left,y:bt(t.y)?t.y:r.top,width:bt(t.width)?t.width:r.width,height:bt(t.height)?t.height:r.height}),{xAxisId:s,yAxisId:o,x:a,y:l,width:c,height:u,syncWithTicks:f,horizontalValues:m,verticalValues:g}=i,x=Fi(),v=Pt(F=>bW(F,"xAxis",s,x)),w=Pt(F=>bW(F,"yAxis",o,x));if(!Ic(c)||!Ic(u)||!bt(a)||!bt(l))return null;var E=i.verticalCoordinatesGenerator||Bze,C=i.horizontalCoordinatesGenerator||jze,{horizontalPoints:k,verticalPoints:O}=i;if((!k||!k.length)&&typeof C=="function"){var j=m&&m.length,R=C({yAxis:w?As(As({},w),{},{ticks:j?m:w.ticks}):void 0,width:e??c,height:n??u,offset:r},j?!0:f);pk(Array.isArray(R),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof R,"]")),Array.isArray(R)&&(k=R)}if((!O||!O.length)&&typeof E=="function"){var U=g&&g.length,V=E({xAxis:v?As(As({},v),{},{ticks:U?g:v.ticks}):void 0,width:e??c,height:n??u,offset:r},U?!0:f);pk(Array.isArray(V),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof V,"]")),Array.isArray(V)&&(O=V)}return T.createElement(Js,{zIndex:i.zIndex},T.createElement("g",{className:"recharts-cartesian-grid"},T.createElement(Rze,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),T.createElement(Dze,wp({},i,{horizontalPoints:k})),T.createElement(Lze,wp({},i,{verticalPoints:O})),T.createElement(Oze,wp({},i,{offset:r,horizontalPoints:k,xAxis:v,yAxis:w})),T.createElement(Mze,wp({},i,{offset:r,verticalPoints:O,xAxis:v,yAxis:w}))))}$w.displayName="CartesianGrid";var Fze={},Iue=yo({name:"errorBars",initialState:Fze,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]||(t[n]=[]),t[n].push(r)},replaceErrorBar:(t,e)=>{var{itemId:n,prev:r,next:i}=e.payload;t[n]&&(t[n]=t[n].map(s=>s.dataKey===r.dataKey&&s.direction===r.direction?i:s))},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]&&(t[n]=t[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:Dmt,replaceErrorBar:Lmt,removeErrorBar:Bmt}=Iue.actions,$ze=Iue.reducer,zze=["children"];function Hze(t,e){if(t==null)return{};var n,r,i=Vze(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Vze(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var qze={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},Gze=T.createContext(qze);function Pue(t){var{children:e}=t,n=Hze(t,zze);return T.createElement(Gze.Provider,{value:n},e)}function hN(t,e){var n,r,i=Pt(c=>kd(c,t)),s=Pt(c=>Cd(c,e)),o=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:Ni.allowDataOverflow,a=(r=s==null?void 0:s.allowDataOverflow)!==null&&r!==void 0?r:_i.allowDataOverflow,l=o||a;return{needClip:l,needClipX:o,needClipY:a}}function MB(t){var{xAxisId:e,yAxisId:n,clipPathId:r}=t,i=fN(),{needClipX:s,needClipY:o,needClip:a}=hN(e,n);if(!a||!i)return null;var{x:l,y:c,width:u,height:f}=i;return T.createElement("clipPath",{id:"clipPath-".concat(r)},T.createElement("rect",{x:s?l:l-u/2,y:o?c:c-f/2,width:s?u:u*2,height:o?f:f*2}))}var Rue=(t,e,n,r)=>Oc(t,"xAxis",e,r),Oue=(t,e,n,r)=>Rc(t,"xAxis",e,r),Mue=(t,e,n,r)=>Oc(t,"yAxis",n,r),Due=(t,e,n,r)=>Rc(t,"yAxis",n,r),Kze=Me([An,Rue,Mue,Oue,Due],(t,e,n,r,i)=>Lc(t,"xAxis")?ih(e,r,!1):ih(n,i,!1)),Wze=(t,e,n,r,i)=>i;function Yze(t){return t.type==="line"}var Jze=Me([q1,Wze],(t,e)=>t.filter(Yze).find(n=>n.id===e)),Xze=Me([An,Rue,Mue,Oue,Due,Jze,Kze,P6],(t,e,n,r,i,s,o,a)=>{var{chartData:l,dataStartIndex:c,dataEndIndex:u}=a;if(!(s==null||e==null||n==null||r==null||i==null||r.length===0||i.length===0||o==null||t!=="horizontal"&&t!=="vertical")){var{dataKey:f,data:m}=s,g;if(m!=null&&m.length>0?g=m:g=l==null?void 0:l.slice(c,u+1),g!=null)return DHe({layout:t,xAxis:e,yAxis:n,xAxisTicks:r,yAxisTicks:i,dataKey:f,bandSize:o,displayedData:g})}});function Lue(t){var e=fm(t),n=3,r=2;if(e!=null){var{r:i,strokeWidth:s}=e,o=Number(i),a=Number(s);return(Number.isNaN(o)||o<0)&&(o=n),(Number.isNaN(a)||a<0)&&(a=r),{r:o,strokeWidth:a}}return{r:n,strokeWidth:r}}var v5={exports:{}},b5={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IY;function Qze(){if(IY)return b5;IY=1;var t=bx();function e(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,i=t.useRef,s=t.useEffect,o=t.useMemo,a=t.useDebugValue;return b5.useSyncExternalStoreWithSelector=function(l,c,u,f,m){var g=i(null);if(g.current===null){var x={hasValue:!1,value:null};g.current=x}else x=g.current;g=o(function(){function w(j){if(!E){if(E=!0,C=j,j=f(j),m!==void 0&&x.hasValue){var R=x.value;if(m(R,j))return k=R}return k=j}if(R=k,n(C,j))return R;var U=f(j);return m!==void 0&&m(R,U)?(C=j,R):(C=j,k=U)}var E=!1,C,k,O=u===void 0?null:u;return[function(){return w(c())},O===null?void 0:function(){return w(O())}]},[c,u,f,m]);var v=r(l,g[0],g[1]);return s(function(){x.hasValue=!0,x.value=v},[v]),a(v),v},b5}var PY;function Zze(){return PY||(PY=1,v5.exports=Qze()),v5.exports}Zze();function eHe(t){t()}function tHe(){let t=null,e=null;return{clear(){t=null,e=null},notify(){eHe(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var RY={notify(){},get:()=>[]};function nHe(t,e){let n,r=RY,i=0,s=!1;function o(v){u();const w=r.subscribe(v);let E=!1;return()=>{E||(E=!0,w(),f())}}function a(){r.notify()}function l(){x.onStateChange&&x.onStateChange()}function c(){return s}function u(){i++,n||(n=t.subscribe(l),r=tHe())}function f(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=RY)}function m(){s||(s=!0,u())}function g(){s&&(s=!1,f())}const x={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:l,isSubscribed:c,trySubscribe:m,tryUnsubscribe:g,getListeners:()=>r};return x}var rHe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",iHe=rHe(),sHe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",oHe=sHe(),aHe=()=>iHe||oHe?T.useLayoutEffect:T.useEffect,lHe=aHe();function OY(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function cHe(t,e){if(OY(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(e,n[i])||!OY(t[n[i]],e[n[i]]))return!1;return!0}var w5=Symbol.for("react-redux-context"),E5=typeof globalThis<"u"?globalThis:{};function uHe(){if(!T.createContext)return{};const t=E5[w5]??(E5[w5]=new Map);let e=t.get(T.createContext);return e||(e=T.createContext(null),t.set(T.createContext,e)),e}var dHe=uHe();function fHe(t){const{children:e,context:n,serverState:r,store:i}=t,s=T.useMemo(()=>{const l=nHe(i);return{store:i,subscription:l,getServerState:r?()=>r:void 0}},[i,r]),o=T.useMemo(()=>i.getState(),[i]);lHe(()=>{const{subscription:l}=s;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),o!==i.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[s,o]);const a=n||dHe;return T.createElement(a.Provider,{value:s},e)}var hHe=fHe,pHe=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function mHe(t,e){return t==null&&e==null?!0:typeof t=="number"&&typeof e=="number"?t===e||t!==t&&e!==e:t===e}function Q1(t,e){var n=new Set([...Object.keys(t),...Object.keys(e)]);for(var r of n)if(pHe.has(r)){if(t[r]==null&&e[r]==null)continue;if(!cHe(t[r],e[r]))return!1}else if(!mHe(t[r],e[r]))return!1;return!0}var gHe=["id"],yHe=["type","layout","connectNulls","needClip","shape"],xHe=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function zw(){return zw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zw.apply(null,arguments)}function MY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ac(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MY(Object(n),!0).forEach(function(r){vHe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vHe(t,e,n){return(e=bHe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bHe(t){var e=wHe(t,"string");return typeof e=="symbol"?e:e+""}function wHe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function DB(t,e){if(t==null)return{};var n,r,i=EHe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function EHe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var SHe=t=>{var{dataKey:e,name:n,stroke:r,legendType:i,hide:s}=t;return[{inactive:s,dataKey:e,type:i,color:r,value:hh(n,e),payload:t}]},AHe=T.memo(t=>{var{dataKey:e,data:n,stroke:r,strokeWidth:i,fill:s,name:o,hide:a,unit:l,tooltipType:c,id:u}=t,f={dataDefinedOnItem:n,positions:void 0,settings:{stroke:r,strokeWidth:i,fill:s,dataKey:e,nameKey:void 0,name:hh(o,e),hide:a,type:c,color:r,unit:l,graphicalItemId:u}};return T.createElement(cN,{tooltipEntrySettings:f})}),Bue=(t,e)=>"".concat(e,"px ").concat(t-e,"px");function THe(t,e){for(var n=t.length%2!==0?[...t,0]:t,r=[],i=0;i<e;++i)r=[...r,...n];return r}var kHe=(t,e,n)=>{var r=n.reduce((f,m)=>f+m);if(!r)return Bue(e,t);for(var i=Math.floor(t/r),s=t%r,o=e-t,a=[],l=0,c=0;l<n.length;c+=n[l],++l)if(c+n[l]>s){a=[...n.slice(0,l),s-c];break}var u=a.length%2===0?[0,o]:[o];return[...THe(n,i),...a,...u].map(f=>"".concat(f,"px")).join(", ")};function CHe(t){var{clipPathId:e,points:n,props:r}=t,{dot:i,dataKey:s,needClip:o}=r,{id:a}=r,l=DB(r,gHe),c=Gs(l);return T.createElement(Eue,{points:n,dot:i,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:s,baseProps:c,needClip:o,clipPathId:e})}function NHe(t){var{showLabels:e,children:n,points:r}=t,i=T.useMemo(()=>r==null?void 0:r.map(s=>{var o,a,l={x:(o=s.x)!==null&&o!==void 0?o:0,y:(a=s.y)!==null&&a!==void 0?a:0,width:0,lowerWidth:0,upperWidth:0,height:0};return ac(ac({},l),{},{value:s.value,payload:s.payload,viewBox:l,parentViewBox:void 0,fill:void 0})}),[r]);return T.createElement(vB,{value:e?i:void 0},n)}function DY(t){var{clipPathId:e,pathRef:n,points:r,strokeDasharray:i,props:s}=t,{type:o,layout:a,connectNulls:l,needClip:c,shape:u}=s,f=DB(s,yHe),m=ac(ac({},Ps(f)),{},{fill:"none",className:"recharts-line-curve",clipPath:c?"url(#clipPath-".concat(e,")"):void 0,points:r,type:o,layout:a,connectNulls:l,strokeDasharray:i??s.strokeDasharray});return T.createElement(T.Fragment,null,(r==null?void 0:r.length)>1&&T.createElement(AB,zw({shapeType:"curve",option:u},m,{pathRef:n})),T.createElement(CHe,{points:r,clipPathId:e,props:s}))}function _He(t){try{return t&&t.getTotalLength&&t.getTotalLength()||0}catch{return 0}}function IHe(t){var{clipPathId:e,props:n,pathRef:r,previousPointsRef:i,longestAnimatedLengthRef:s}=t,{points:o,strokeDasharray:a,isAnimationActive:l,animationBegin:c,animationDuration:u,animationEasing:f,animateNewValues:m,width:g,height:x,onAnimationEnd:v,onAnimationStart:w}=n,E=i.current,C=jx(o,"recharts-line-"),k=T.useRef(C),[O,j]=T.useState(!1),R=!O,U=T.useCallback(()=>{typeof v=="function"&&v(),j(!1)},[v]),V=T.useCallback(()=>{typeof w=="function"&&w(),j(!0)},[w]),F=_He(r.current),$=T.useRef(0);k.current!==C&&($.current=s.current,k.current=C);var K=$.current;return T.createElement(NHe,{points:o,showLabels:R},n.children,T.createElement(Bx,{animationId:C,begin:c,duration:u,isActive:l,easing:f,onAnimationEnd:U,onAnimationStart:V,key:C},H=>{var B=qn(K,F+K,H),A=Math.min(B,F),I;if(l)if(a){var M="".concat(a).split(/[,\s]+/gim).map(te=>parseFloat(te));I=kHe(A,F,M)}else I=Bue(F,A);else I=a==null?void 0:String(a);if(H>0&&F>0&&(i.current=o,s.current=Math.max(s.current,A)),E){var z=E.length/o.length,G=H===1?o:o.map((te,Y)=>{var q=Math.floor(Y*z);if(E[q]){var D=E[q];return ac(ac({},te),{},{x:qn(D.x,te.x,H),y:qn(D.y,te.y,H)})}return m?ac(ac({},te),{},{x:qn(g*2,te.x,H),y:qn(x/2,te.y,H)}):ac(ac({},te),{},{x:te.x,y:te.y})});return i.current=G,T.createElement(DY,{props:n,points:G,clipPathId:e,pathRef:r,strokeDasharray:I})}return T.createElement(DY,{props:n,points:o,clipPathId:e,pathRef:r,strokeDasharray:I})}),T.createElement(oN,{label:n.label}))}function PHe(t){var{clipPathId:e,props:n}=t,r=T.useRef(null),i=T.useRef(0),s=T.useRef(null);return T.createElement(IHe,{props:n,clipPathId:e,previousPointsRef:r,longestAnimatedLengthRef:i,pathRef:s})}var RHe=(t,e)=>{var n,r;return{x:(n=t.x)!==null&&n!==void 0?n:void 0,y:(r=t.y)!==null&&r!==void 0?r:void 0,value:t.value,errorVal:Wn(t.payload,e)}};class OHe extends T.Component{render(){var{hide:e,dot:n,points:r,className:i,xAxisId:s,yAxisId:o,top:a,left:l,width:c,height:u,id:f,needClip:m,zIndex:g}=this.props;if(e)return null;var x=Pn("recharts-line",i),v=f,{r:w,strokeWidth:E}=Lue(n),C=SB(n),k=w*2+E,O=m?"url(#clipPath-".concat(C?"":"dots-").concat(v,")"):void 0;return T.createElement(Js,{zIndex:g},T.createElement(Wr,{className:x},m&&T.createElement("defs",null,T.createElement(MB,{clipPathId:v,xAxisId:s,yAxisId:o}),!C&&T.createElement("clipPath",{id:"clipPath-dots-".concat(v)},T.createElement("rect",{x:l-k/2,y:a-k/2,width:c+k,height:u+k}))),T.createElement(Pue,{xAxisId:s,yAxisId:o,data:r,dataPointFormatter:RHe,errorBarOffset:0},T.createElement(PHe,{props:this.props,clipPathId:v}))),T.createElement(rD,{activeDot:this.props.activeDot,points:r,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:O}))}}var jue={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:ri.line,type:"linear"};function MHe(t){var e=yi(t,jue),{activeDot:n,animateNewValues:r,animationBegin:i,animationDuration:s,animationEasing:o,connectNulls:a,dot:l,hide:c,isAnimationActive:u,label:f,legendType:m,xAxisId:g,yAxisId:x,id:v}=e,w=DB(e,xHe),{needClip:E}=hN(g,x),C=fN(),k=ph(),O=Fi(),j=Pt($=>Xze($,g,x,O,v));if(k!=="horizontal"&&k!=="vertical"||j==null||C==null)return null;var{height:R,width:U,x:V,y:F}=C;return T.createElement(OHe,zw({},w,{id:v,connectNulls:a,dot:l,activeDot:n,animateNewValues:r,animationBegin:i,animationDuration:s,animationEasing:o,isAnimationActive:u,hide:c,label:f,legendType:m,xAxisId:g,yAxisId:x,points:j,layout:k,height:R,width:U,left:V,top:F,needClip:E}))}function DHe(t){var{layout:e,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:s,dataKey:o,bandSize:a,displayedData:l}=t;return l.map((c,u)=>{var f=Wn(c,o);if(e==="horizontal"){var m=hk({axis:n,ticks:i,bandSize:a,entry:c,index:u}),g=Er(f)?null:r.scale(f);return{x:m,y:g,value:f,payload:c}}var x=Er(f)?null:n.scale(f),v=hk({axis:r,ticks:s,bandSize:a,entry:c,index:u});return x==null||v==null?null:{x,y:v,value:f,payload:c}}).filter(Boolean)}function LHe(t){var e=yi(t,jue),n=Fi();return T.createElement(uN,{id:e.id,type:"line"},r=>T.createElement(T.Fragment,null,T.createElement(NB,{legendPayload:SHe(e)}),T.createElement(AHe,{dataKey:e.dataKey,data:e.data,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:r}),T.createElement(_B,{type:"line",id:r,data:e.data,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,hide:e.hide,isPanorama:n}),T.createElement(MHe,zw({},e,{id:r}))))}var hT=T.memo(LHe,Q1);hT.displayName="Line";function Bc(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(i=>i.id===e))===null||r===void 0?void 0:r.xAxisId)!==null&&n!==void 0?n:Sue}function jc(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(i=>i.id===e))===null||r===void 0?void 0:r.yAxisId)!==null&&n!==void 0?n:Sue}var Uue=(t,e,n)=>Oc(t,"xAxis",Bc(t,e),n),Fue=(t,e,n)=>Rc(t,"xAxis",Bc(t,e),n),$ue=(t,e,n)=>Oc(t,"yAxis",jc(t,e),n),zue=(t,e,n)=>Rc(t,"yAxis",jc(t,e),n),BHe=Me([An,Uue,$ue,Fue,zue],(t,e,n,r,i)=>Lc(t,"xAxis")?ih(e,r,!1):ih(n,i,!1)),jHe=(t,e)=>e,Hue=Me([q1,jHe],(t,e)=>t.filter(n=>n.type==="area").find(n=>n.id===e)),Vue=t=>{var e=An(t),n=Lc(e,"xAxis");return n?"yAxis":"xAxis"},UHe=(t,e)=>{var n=Vue(t);return n==="yAxis"?jc(t,e):Bc(t,e)},FHe=(t,e,n)=>Mk(t,Vue(t),UHe(t,e),n),$He=Me([Hue,FHe],(t,e)=>{var n;if(!(t==null||e==null)){var{stackId:r}=t,i=Y2(t);if(!(r==null||i==null)){var s=(n=e[r])===null||n===void 0?void 0:n.stackedData,o=s==null?void 0:s.find(a=>a.key===i);if(o!=null)return o.map(a=>[a[0],a[1]])}}}),zHe=Me([An,Uue,$ue,Fue,zue,$He,Ole,BHe,Hue,wBe],(t,e,n,r,i,s,o,a,l,c)=>{var{chartData:u,dataStartIndex:f,dataEndIndex:m}=o;if(!(l==null||t!=="horizontal"&&t!=="vertical"||e==null||n==null||r==null||i==null||r.length===0||i.length===0||a==null)){var{data:g}=l,x;if(g&&g.length>0?x=g:x=u==null?void 0:u.slice(f,m+1),x!=null)return aVe({layout:t,xAxis:e,yAxis:n,xAxisTicks:r,yAxisTicks:i,dataStartIndex:f,areaSettings:l,stackedData:s,displayedData:x,chartBaseValue:c,bandSize:a})}}),HHe=["id"],VHe=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function em(){return em=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},em.apply(null,arguments)}function que(t,e){if(t==null)return{};var n,r,i=qHe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function qHe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function LY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LY(Object(n),!0).forEach(function(r){GHe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function GHe(t,e,n){return(e=KHe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function KHe(t){var e=WHe(t,"string");return typeof e=="symbol"?e:e+""}function WHe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Hk(t,e){return t&&t!=="none"?t:e}var YHe=t=>{var{dataKey:e,name:n,stroke:r,fill:i,legendType:s,hide:o}=t;return[{inactive:o,dataKey:e,type:s,color:Hk(r,i),value:hh(n,e),payload:t}]},JHe=T.memo(t=>{var{dataKey:e,data:n,stroke:r,strokeWidth:i,fill:s,name:o,hide:a,unit:l,tooltipType:c,id:u}=t,f={dataDefinedOnItem:n,positions:void 0,settings:{stroke:r,strokeWidth:i,fill:s,dataKey:e,nameKey:void 0,name:hh(o,e),hide:a,type:c,color:Hk(r,s),unit:l,graphicalItemId:u}};return T.createElement(cN,{tooltipEntrySettings:f})});function XHe(t){var{clipPathId:e,points:n,props:r}=t,{needClip:i,dot:s,dataKey:o}=r,a=Gs(r);return T.createElement(Eue,{points:n,dot:s,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:o,baseProps:a,needClip:i,clipPathId:e})}function QHe(t){var{showLabels:e,children:n,points:r}=t,i=r.map(s=>{var o,a,l={x:(o=s.x)!==null&&o!==void 0?o:0,y:(a=s.y)!==null&&a!==void 0?a:0,width:0,lowerWidth:0,upperWidth:0,height:0};return wg(wg({},l),{},{value:s.value,payload:s.payload,parentViewBox:void 0,viewBox:l,fill:void 0})});return T.createElement(vB,{value:e?i:void 0},n)}function BY(t){var{points:e,baseLine:n,needClip:r,clipPathId:i,props:s}=t,{layout:o,type:a,stroke:l,connectNulls:c,isRange:u}=s,{id:f}=s,m=que(s,HHe),g=Gs(m),x=Ps(m);return T.createElement(T.Fragment,null,(e==null?void 0:e.length)>1&&T.createElement(Wr,{clipPath:r?"url(#clipPath-".concat(i,")"):void 0},T.createElement(Hg,em({},x,{id:f,points:e,connectNulls:c,type:a,baseLine:n,layout:o,stroke:"none",className:"recharts-area-area"})),l!=="none"&&T.createElement(Hg,em({},g,{className:"recharts-area-curve",layout:o,type:a,connectNulls:c,fill:"none",points:e})),l!=="none"&&u&&T.createElement(Hg,em({},g,{className:"recharts-area-curve",layout:o,type:a,connectNulls:c,fill:"none",points:n}))),T.createElement(XHe,{points:e,props:m,clipPathId:i}))}function ZHe(t){var e,n,{alpha:r,baseLine:i,points:s,strokeWidth:o}=t,a=(e=s[0])===null||e===void 0?void 0:e.y,l=(n=s[s.length-1])===null||n===void 0?void 0:n.y;if(!ur(a)||!ur(l))return null;var c=r*Math.abs(a-l),u=Math.max(...s.map(f=>f.x||0));return bt(i)?u=Math.max(i,u):i&&Array.isArray(i)&&i.length&&(u=Math.max(...i.map(f=>f.x||0),u)),bt(u)?T.createElement("rect",{x:0,y:a<l?a:a-c,width:u+(o?parseInt("".concat(o),10):1),height:Math.floor(c)}):null}function eVe(t){var e,n,{alpha:r,baseLine:i,points:s,strokeWidth:o}=t,a=(e=s[0])===null||e===void 0?void 0:e.x,l=(n=s[s.length-1])===null||n===void 0?void 0:n.x;if(!ur(a)||!ur(l))return null;var c=r*Math.abs(a-l),u=Math.max(...s.map(f=>f.y||0));return bt(i)?u=Math.max(i,u):i&&Array.isArray(i)&&i.length&&(u=Math.max(...i.map(f=>f.y||0),u)),bt(u)?T.createElement("rect",{x:a<l?a:a-c,y:0,width:c,height:Math.floor(u+(o?parseInt("".concat(o),10):1))}):null}function tVe(t){var{alpha:e,layout:n,points:r,baseLine:i,strokeWidth:s}=t;return n==="vertical"?T.createElement(ZHe,{alpha:e,points:r,baseLine:i,strokeWidth:s}):T.createElement(eVe,{alpha:e,points:r,baseLine:i,strokeWidth:s})}function nVe(t){var{needClip:e,clipPathId:n,props:r,previousPointsRef:i,previousBaselineRef:s}=t,{points:o,baseLine:a,isAnimationActive:l,animationBegin:c,animationDuration:u,animationEasing:f,onAnimationStart:m,onAnimationEnd:g}=r,x=T.useMemo(()=>({points:o,baseLine:a}),[o,a]),v=jx(x,"recharts-area-"),w=QMe(),[E,C]=T.useState(!1),k=!E,O=T.useCallback(()=>{typeof g=="function"&&g(),C(!1)},[g]),j=T.useCallback(()=>{typeof m=="function"&&m(),C(!0)},[m]);if(w==null)return null;var R=i.current,U=s.current;return T.createElement(QHe,{showLabels:k,points:o},r.children,T.createElement(Bx,{animationId:v,begin:c,duration:u,isActive:l,easing:f,onAnimationEnd:O,onAnimationStart:j,key:v},V=>{if(R){var F=R.length/o.length,$=V===1?o:o.map((H,B)=>{var A=Math.floor(B*F);if(R[A]){var I=R[A];return wg(wg({},H),{},{x:qn(I.x,H.x,V),y:qn(I.y,H.y,V)})}return H}),K;return bt(a)?K=qn(U,a,V):Er(a)||$a(a)?K=qn(U,0,V):K=a.map((H,B)=>{var A=Math.floor(B*F);if(Array.isArray(U)&&U[A]){var I=U[A];return wg(wg({},H),{},{x:qn(I.x,H.x,V),y:qn(I.y,H.y,V)})}return H}),V>0&&(i.current=$,s.current=K),T.createElement(BY,{points:$,baseLine:K,needClip:e,clipPathId:n,props:r})}return V>0&&(i.current=o,s.current=a),T.createElement(Wr,null,l&&T.createElement("defs",null,T.createElement("clipPath",{id:"animationClipPath-".concat(n)},T.createElement(tVe,{alpha:V,points:o,baseLine:a,layout:w,strokeWidth:r.strokeWidth}))),T.createElement(Wr,{clipPath:"url(#animationClipPath-".concat(n,")")},T.createElement(BY,{points:o,baseLine:a,needClip:e,clipPathId:n,props:r})))}),T.createElement(oN,{label:r.label}))}function rVe(t){var{needClip:e,clipPathId:n,props:r}=t,i=T.useRef(null),s=T.useRef();return T.createElement(nVe,{needClip:e,clipPathId:n,props:r,previousPointsRef:i,previousBaselineRef:s})}class iVe extends T.PureComponent{render(){var{hide:e,dot:n,points:r,className:i,top:s,left:o,needClip:a,xAxisId:l,yAxisId:c,width:u,height:f,id:m,baseLine:g,zIndex:x}=this.props;if(e)return null;var v=Pn("recharts-area",i),w=m,{r:E,strokeWidth:C}=Lue(n),k=SB(n),O=E*2+C,j=a?"url(#clipPath-".concat(k?"":"dots-").concat(w,")"):void 0;return T.createElement(Js,{zIndex:x},T.createElement(Wr,{className:v},a&&T.createElement("defs",null,T.createElement(MB,{clipPathId:w,xAxisId:l,yAxisId:c}),!k&&T.createElement("clipPath",{id:"clipPath-dots-".concat(w)},T.createElement("rect",{x:o-O/2,y:s-O/2,width:u+O,height:f+O}))),T.createElement(rVe,{needClip:a,clipPathId:w,props:this.props})),T.createElement(rD,{points:r,mainColor:Hk(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:j}),this.props.isRange&&Array.isArray(g)&&T.createElement(rD,{points:g,mainColor:Hk(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:j}))}}var Gue={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:"auto",legendType:"line",stroke:"#3182bd",strokeWidth:1,type:"linear",label:!1,xAxisId:0,yAxisId:0,zIndex:ri.area};function sVe(t){var e,n=yi(t,Gue),{activeDot:r,animationBegin:i,animationDuration:s,animationEasing:o,connectNulls:a,dot:l,fill:c,fillOpacity:u,hide:f,isAnimationActive:m,legendType:g,stroke:x,xAxisId:v,yAxisId:w}=n,E=que(n,VHe),C=ph(),k=Yce(),{needClip:O}=hN(v,w),j=Fi(),{points:R,isRange:U,baseLine:V}=(e=Pt(A=>zHe(A,t.id,j)))!==null&&e!==void 0?e:{},F=fN();if(C!=="horizontal"&&C!=="vertical"||F==null||k!=="AreaChart"&&k!=="ComposedChart")return null;var{height:$,width:K,x:H,y:B}=F;return!R||!R.length?null:T.createElement(iVe,em({},E,{activeDot:r,animationBegin:i,animationDuration:s,animationEasing:o,baseLine:V,connectNulls:a,dot:l,fill:c,fillOpacity:u,height:$,hide:f,layout:C,isAnimationActive:m==="auto"?!B1.isSsr:m,isRange:U,legendType:g,needClip:O,points:R,stroke:x,width:K,left:H,top:B,xAxisId:v,yAxisId:w}))}var oVe=(t,e,n,r,i)=>{var s=n??e;if(bt(s))return s;var o=t==="horizontal"?i:r,a=o.scale.domain();if(o.type==="number"){var l=Math.max(a[0],a[1]),c=Math.min(a[0],a[1]);return s==="dataMin"?c:s==="dataMax"||l<0?l:Math.max(Math.min(a[0],a[1]),0)}return s==="dataMin"?a[0]:s==="dataMax"?a[1]:a[0]};function aVe(t){var{areaSettings:{connectNulls:e,baseValue:n,dataKey:r},stackedData:i,layout:s,chartBaseValue:o,xAxis:a,yAxis:l,displayedData:c,dataStartIndex:u,xAxisTicks:f,yAxisTicks:m,bandSize:g}=t,x=i&&i.length,v=oVe(s,o,n,a,l),w=s==="horizontal",E=!1,C=c.map((O,j)=>{var R,U,V;if(x)V=i[u+j];else{var F=Wn(O,r);Array.isArray(F)?(V=F,E=!0):V=[v,F]}var $=(R=(U=V)===null||U===void 0?void 0:U[1])!==null&&R!==void 0?R:null,K=$==null||x&&!e&&Wn(O,r)==null;return w?{x:hk({axis:a,ticks:f,bandSize:g,entry:O,index:j}),y:K?null:l.scale($),value:V,payload:O}:{x:K?null:a.scale($),y:hk({axis:l,ticks:m,bandSize:g,entry:O,index:j}),value:V,payload:O}}),k;return x||E?k=C.map(O=>{var j=Array.isArray(O.value)?O.value[0]:null;return w?{x:O.x,y:j!=null&&O.y!=null?l.scale(j):null,payload:O.payload}:{x:j!=null?a.scale(j):null,y:O.y,payload:O.payload}}):k=w?l.scale(v):a.scale(v),{points:C,baseLine:k,isRange:E}}function lVe(t){var e=yi(t,Gue),n=Fi();return T.createElement(uN,{id:e.id,type:"area"},r=>T.createElement(T.Fragment,null,T.createElement(NB,{legendPayload:YHe(e)}),T.createElement(JHe,{dataKey:e.dataKey,data:e.data,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:r}),T.createElement(_B,{type:"area",id:r,data:e.data,dataKey:e.dataKey,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,stackId:wae(e.stackId),hide:e.hide,barSize:void 0,baseValue:e.baseValue,isPanorama:n,connectNulls:e.connectNulls}),T.createElement(sVe,em({},e,{id:r}))))}var pN=T.memo(lVe,Q1);pN.displayName="Area";var cVe="Invariant failed";function uVe(t,e){throw new Error(cVe)}function iD(){return iD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},iD.apply(null,arguments)}function Vk(t){return T.createElement(AB,iD({shapeType:"rectangle",activeClassName:"recharts-active-bar"},t))}var dVe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(bt(e))return e;var s=bt(r)||Er(r);return s?e(r,i):(s||uVe(),n)}},fVe=(t,e,n)=>n,hVe=(t,e)=>e,Z1=Me([q1,hVe],(t,e)=>t.filter(n=>n.type==="bar").find(n=>n.id===e)),pVe=Me([Z1],t=>t==null?void 0:t.maxBarSize),mVe=(t,e,n,r)=>r,gVe=Me([An,q1,Bc,jc,fVe],(t,e,n,r,i)=>e.filter(s=>t==="horizontal"?s.xAxisId===n:s.yAxisId===r).filter(s=>s.isPanorama===i).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),yVe=(t,e,n)=>{var r=An(t),i=Bc(t,e),s=jc(t,e);if(!(i==null||s==null))return r==="horizontal"?Mk(t,"yAxis",s,n):Mk(t,"xAxis",i,n)},xVe=(t,e)=>{var n=An(t),r=Bc(t,e),i=jc(t,e);if(!(r==null||i==null))return n==="horizontal"?vW(t,"xAxis",r):vW(t,"yAxis",i)},vVe=Me([gVe,bBe,xVe],L$e),bVe=(t,e,n)=>{var r,i,s=Z1(t,e);if(s!=null){var o=Bc(t,e),a=jc(t,e);if(!(o==null||a==null)){var l=An(t),c=Wle(t),{maxBarSize:u}=s,f=Er(u)?c:u,m,g;return l==="horizontal"?(m=Oc(t,"xAxis",o,n),g=Rc(t,"xAxis",o,n)):(m=Oc(t,"yAxis",a,n),g=Rc(t,"yAxis",a,n)),(r=(i=ih(m,g,!0))!==null&&i!==void 0?i:f)!==null&&r!==void 0?r:0}}},Kue=(t,e,n)=>{var r=An(t),i=Bc(t,e),s=jc(t,e);if(!(i==null||s==null)){var o,a;return r==="horizontal"?(o=Oc(t,"xAxis",i,n),a=Rc(t,"xAxis",i,n)):(o=Oc(t,"yAxis",s,n),a=Rc(t,"yAxis",s,n)),ih(o,a)}},wVe=Me([vVe,Wle,vBe,Yle,bVe,Kue,pVe],$$e),EVe=(t,e,n)=>{var r=Bc(t,e);if(r!=null)return Oc(t,"xAxis",r,n)},SVe=(t,e,n)=>{var r=jc(t,e);if(r!=null)return Oc(t,"yAxis",r,n)},AVe=(t,e,n)=>{var r=Bc(t,e);if(r!=null)return Rc(t,"xAxis",r,n)},TVe=(t,e,n)=>{var r=jc(t,e);if(r!=null)return Rc(t,"yAxis",r,n)},kVe=Me([wVe,Z1],(t,e)=>{if(!(t==null||e==null)){var n=t.find(r=>r.stackId===e.stackId&&e.dataKey!=null&&r.dataKeys.includes(e.dataKey));if(n!=null)return n.position}}),CVe=Me([yVe,Z1],z$e),NVe=Me([Si,i6,EVe,SVe,AVe,TVe,kVe,An,Ole,Kue,CVe,Z1,mVe],(t,e,n,r,i,s,o,a,l,c,u,f,m)=>{var{chartData:g,dataStartIndex:x,dataEndIndex:v}=l;if(!(f==null||o==null||e==null||a!=="horizontal"&&a!=="vertical"||n==null||r==null||i==null||s==null||c==null)){var{data:w}=f,E;if(w!=null&&w.length>0?E=w:E=g==null?void 0:g.slice(x,v+1),E!=null)return rqe({layout:a,barSettings:f,pos:o,parentViewBox:e,bandSize:c,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:s,stackedData:u,displayedData:E,offset:t,cells:m,dataStartIndex:x})}}),_Ve=["index"];function sD(){return sD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sD.apply(null,arguments)}function IVe(t,e){if(t==null)return{};var n,r,i=PVe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function PVe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Wue=T.createContext(void 0),RVe=t=>{var e=T.useContext(Wue);if(e!=null)return e.stackId;if(t!=null)return wae(t)},OVe=(t,e)=>"recharts-bar-stack-clip-path-".concat(t,"-").concat(e),MVe=t=>{var e=T.useContext(Wue);if(e!=null){var{stackId:n}=e;return"url(#".concat(OVe(n,t),")")}},DVe=t=>{var{index:e}=t,n=IVe(t,_Ve),r=MVe(e);return T.createElement(Wr,sD({className:"recharts-bar-stack-layer",clipPath:r},n))},LVe=["onMouseEnter","onMouseLeave","onClick"],BVe=["value","background","tooltipPosition"],jVe=["id"],UVe=["onMouseEnter","onClick","onMouseLeave"];function gd(){return gd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gd.apply(null,arguments)}function jY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Us(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jY(Object(n),!0).forEach(function(r){FVe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function FVe(t,e,n){return(e=$Ve(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $Ve(t){var e=zVe(t,"string");return typeof e=="symbol"?e:e+""}function zVe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qk(t,e){if(t==null)return{};var n,r,i=HVe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function HVe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var VVe=t=>{var{dataKey:e,name:n,fill:r,legendType:i,hide:s}=t;return[{inactive:s,dataKey:e,type:i,color:r,value:hh(n,e),payload:t}]},qVe=T.memo(t=>{var{dataKey:e,stroke:n,strokeWidth:r,fill:i,name:s,hide:o,unit:a,tooltipType:l,id:c}=t,u={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:e,nameKey:void 0,name:hh(s,e),hide:o,type:l,color:i,unit:a,graphicalItemId:c}};return T.createElement(cN,{tooltipEntrySettings:u})});function GVe(t){var e=Pt(oh),{data:n,dataKey:r,background:i,allOtherBarProps:s}=t,{onMouseEnter:o,onMouseLeave:a,onClick:l}=s,c=qk(s,LVe),u=TB(o,r,s.id),f=kB(a),m=CB(l,r,s.id);if(!i||n==null)return null;var g=fm(i);return T.createElement(Js,{zIndex:H$e(i,ri.barBackground)},n.map((x,v)=>{var{value:w,background:E,tooltipPosition:C}=x,k=qk(x,BVe);if(!E)return null;var O=u(x,v),j=f(x,v),R=m(x,v),U=Us(Us(Us(Us(Us({option:i,isActive:String(v)===e},k),{},{fill:"#eee"},E),g),w2(c,x,v)),{},{onMouseEnter:O,onMouseLeave:j,onClick:R,dataKey:r,index:v,className:"recharts-bar-background-rectangle"});return T.createElement(Vk,gd({key:"background-bar-".concat(v)},U))}))}function KVe(t){var{showLabels:e,children:n,rects:r}=t,i=r==null?void 0:r.map(s=>{var o={x:s.x,y:s.y,width:s.width,lowerWidth:s.width,upperWidth:s.width,height:s.height};return Us(Us({},o),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:o,fill:s.fill})});return T.createElement(vB,{value:e?i:void 0},n)}function WVe(t){var{shape:e,activeBar:n,baseProps:r,entry:i,index:s,dataKey:o}=t,a=Pt(oh),l=Pt(fB),c=n&&String(s)===a&&(l==null||o===l),u=c?n:e;return c?T.createElement(Js,{zIndex:ri.activeBar},T.createElement(Vk,gd({},r,{name:String(r.name)},i,{isActive:c,option:u,index:s,dataKey:o}))):T.createElement(Vk,gd({},r,{name:String(r.name)},i,{isActive:c,option:u,index:s,dataKey:o}))}function YVe(t){var{shape:e,baseProps:n,entry:r,index:i,dataKey:s}=t;return T.createElement(Vk,gd({},n,{name:String(n.name)},r,{isActive:!1,option:e,index:i,dataKey:s}))}function JVe(t){var e,{data:n,props:r}=t,i=(e=Gs(r))!==null&&e!==void 0?e:{},{id:s}=i,o=qk(i,jVe),{shape:a,dataKey:l,activeBar:c}=r,{onMouseEnter:u,onClick:f,onMouseLeave:m}=r,g=qk(r,UVe),x=TB(u,l,s),v=kB(m),w=CB(f,l,s);return n?T.createElement(T.Fragment,null,n.map((E,C)=>T.createElement(DVe,gd({index:C,key:"rectangle-".concat(E==null?void 0:E.x,"-").concat(E==null?void 0:E.y,"-").concat(E==null?void 0:E.value,"-").concat(C),className:"recharts-bar-rectangle"},w2(g,E,C),{onMouseEnter:x(E,C),onMouseLeave:v(E,C),onClick:w(E,C)}),c?T.createElement(WVe,{shape:a,activeBar:c,baseProps:o,entry:E,index:C,dataKey:l}):T.createElement(YVe,{shape:a,baseProps:o,entry:E,index:C,dataKey:l})))):null}function XVe(t){var{props:e,previousRectanglesRef:n}=t,{data:r,layout:i,isAnimationActive:s,animationBegin:o,animationDuration:a,animationEasing:l,onAnimationEnd:c,onAnimationStart:u}=e,f=n.current,m=jx(e,"recharts-bar-"),[g,x]=T.useState(!1),v=!g,w=T.useCallback(()=>{typeof c=="function"&&c(),x(!1)},[c]),E=T.useCallback(()=>{typeof u=="function"&&u(),x(!0)},[u]);return T.createElement(KVe,{showLabels:v,rects:r},T.createElement(Bx,{animationId:m,begin:o,duration:a,isActive:s,easing:l,onAnimationEnd:w,onAnimationStart:E,key:m},C=>{var k=C===1?r:r==null?void 0:r.map((O,j)=>{var R=f&&f[j];if(R)return Us(Us({},O),{},{x:qn(R.x,O.x,C),y:qn(R.y,O.y,C),width:qn(R.width,O.width,C),height:qn(R.height,O.height,C)});if(i==="horizontal"){var U=qn(0,O.height,C),V=qn(O.stackedBarStart,O.y,C);return Us(Us({},O),{},{y:V,height:U})}var F=qn(0,O.width,C),$=qn(O.stackedBarStart,O.x,C);return Us(Us({},O),{},{width:F,x:$})});return C>0&&(n.current=k??null),k==null?null:T.createElement(Wr,null,T.createElement(JVe,{props:e,data:k}))}),T.createElement(oN,{label:e.label}),e.children)}function QVe(t){var e=T.useRef(null);return T.createElement(XVe,{previousRectanglesRef:e,props:t})}var Yue=0,ZVe=(t,e)=>{var n=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:n,errorVal:Wn(t,e)}};class eqe extends T.PureComponent{render(){var{hide:e,data:n,dataKey:r,className:i,xAxisId:s,yAxisId:o,needClip:a,background:l,id:c}=this.props;if(e||n==null)return null;var u=Pn("recharts-bar",i),f=c;return T.createElement(Wr,{className:u,id:c},a&&T.createElement("defs",null,T.createElement(MB,{clipPathId:f,xAxisId:s,yAxisId:o})),T.createElement(Wr,{className:"recharts-bar-rectangles",clipPath:a?"url(#clipPath-".concat(f,")"):void 0},T.createElement(GVe,{data:n,dataKey:r,background:l,allOtherBarProps:this.props}),T.createElement(QVe,this.props)))}}var tqe={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:Yue,xAxisId:0,yAxisId:0,zIndex:ri.bar};function nqe(t){var{xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:s,activeBar:o,animationBegin:a,animationDuration:l,animationEasing:c,isAnimationActive:u}=t,{needClip:f}=hN(e,n),m=ph(),g=Fi(),x=EB(t.children,Wx),v=Pt(C=>NVe(C,t.id,g,x));if(m!=="vertical"&&m!=="horizontal")return null;var w,E=v==null?void 0:v[0];return E==null||E.height==null||E.width==null?w=0:w=m==="vertical"?E.height/2:E.width/2,T.createElement(Pue,{xAxisId:e,yAxisId:n,data:v,dataPointFormatter:ZVe,errorBarOffset:w},T.createElement(eqe,gd({},t,{layout:m,needClip:f,data:v,xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:s,activeBar:o,animationBegin:a,animationDuration:l,animationEasing:c,isAnimationActive:u})))}function rqe(t){var{layout:e,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:s,xAxis:o,yAxis:a,xAxisTicks:l,yAxisTicks:c,stackedData:u,displayedData:f,offset:m,cells:g,parentViewBox:x,dataStartIndex:v}=t,w=e==="horizontal"?a:o,E=u?w.scale.domain():null,C=yMe({numericAxis:w}),k=w.scale(C);return f.map((O,j)=>{var R,U,V,F,$,K;if(u){var H=u[j+v];if(H==null)return null;R=fMe(H,E)}else R=Wn(O,n),Array.isArray(R)||(R=[C,R]);var B=dVe(r,Yue)(R[1],j);if(e==="horizontal"){var A,[I,M]=[a.scale(R[0]),a.scale(R[1])];U=TG({axis:o,ticks:l,bandSize:s,offset:i.offset,entry:O,index:j}),V=(A=M??I)!==null&&A!==void 0?A:void 0,F=i.size;var z=I-M;if($=$a(z)?0:z,K={x:U,y:m.top,width:F,height:m.height},Math.abs(B)>0&&Math.abs($)<Math.abs(B)){var G=ji($||B)*(Math.abs(B)-Math.abs($));V-=G,$+=G}}else{var[te,Y]=[o.scale(R[0]),o.scale(R[1])];if(U=te,V=TG({axis:a,ticks:c,bandSize:s,offset:i.offset,entry:O,index:j}),F=Y-te,$=i.size,K={x:m.left,y:V,width:m.width,height:$},Math.abs(B)>0&&Math.abs(F)<Math.abs(B)){var q=ji(F||B)*(Math.abs(B)-Math.abs(F));F+=q}}if(U==null||V==null||F==null||$==null)return null;var D=Us(Us({},O),{},{stackedBarStart:k,x:U,y:V,width:F,height:$,value:u?R:R[1],payload:O,background:K,tooltipPosition:{x:U+F/2,y:V+$/2},parentViewBox:x},g&&g[j]&&g[j].props);return D}).filter(Boolean)}function iqe(t){var e=yi(t,tqe),n=RVe(e.stackId),r=Fi();return T.createElement(uN,{id:e.id,type:"bar"},i=>T.createElement(T.Fragment,null,T.createElement(NB,{legendPayload:VVe(e)}),T.createElement(qVe,{dataKey:e.dataKey,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:i}),T.createElement(_B,{type:"bar",id:i,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:n,hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:r}),T.createElement(Js,{zIndex:e.zIndex},T.createElement(nqe,gd({},e,{id:i})))))}var Jue=T.memo(iqe,Q1);Jue.displayName="Bar";var sqe=["domain","range"],oqe=["domain","range"];function UY(t,e){if(t==null)return{};var n,r,i=aqe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function aqe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function FY(t,e){return t===e?!0:Array.isArray(t)&&t.length===2&&Array.isArray(e)&&e.length===2?t[0]===e[0]&&t[1]===e[1]:!1}function Xue(t,e){if(t===e)return!0;var{domain:n,range:r}=t,i=UY(t,sqe),{domain:s,range:o}=e,a=UY(e,oqe);return!FY(n,s)||!FY(r,o)?!1:Q1(i,a)}var lqe=["dangerouslySetInnerHTML","ticks","scale"],cqe=["id","scale"];function oD(){return oD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},oD.apply(null,arguments)}function $Y(t,e){if(t==null)return{};var n,r,i=uqe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function uqe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function dqe(t){var e=_r(),n=T.useRef(null);return T.useLayoutEffect(()=>{n.current===null?e(w$e(t)):n.current!==t&&e(E$e({prev:n.current,next:t})),n.current=t},[t,e]),T.useLayoutEffect(()=>()=>{n.current&&(e(S$e(n.current)),n.current=null)},[e]),null}var fqe=t=>{var{xAxisId:e,className:n}=t,r=Pt(i6),i=Fi(),s="xAxis",o=Pt(E=>Cce(E,s,e,i)),a=Pt(E=>Sce(E,e)),l=Pt(E=>xje(E,e)),c=Pt(E=>ice(E,e));if(a==null||l==null||c==null)return null;var{dangerouslySetInnerHTML:u,ticks:f,scale:m}=t,g=$Y(t,lqe),{id:x,scale:v}=c,w=$Y(c,cqe);return T.createElement(OB,oD({},g,w,{x:l.x,y:l.y,width:a.width,height:a.height,className:Pn("recharts-".concat(s," ").concat(s),n),viewBox:r,ticks:o,axisType:s}))},hqe={allowDataOverflow:Ni.allowDataOverflow,allowDecimals:Ni.allowDecimals,allowDuplicatedCategory:Ni.allowDuplicatedCategory,angle:Ni.angle,axisLine:Yu.axisLine,height:Ni.height,hide:!1,includeHidden:Ni.includeHidden,interval:Ni.interval,minTickGap:Ni.minTickGap,mirror:Ni.mirror,orientation:Ni.orientation,padding:Ni.padding,reversed:Ni.reversed,scale:Ni.scale,tick:Ni.tick,tickCount:Ni.tickCount,tickLine:Yu.tickLine,tickSize:Yu.tickSize,type:Ni.type,xAxisId:0},pqe=t=>{var e=yi(t,hqe);return T.createElement(T.Fragment,null,T.createElement(dqe,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),T.createElement(fqe,e))},Hw=T.memo(pqe,Xue);Hw.displayName="XAxis";var mqe=["dangerouslySetInnerHTML","ticks","scale"],gqe=["id","scale"];function aD(){return aD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},aD.apply(null,arguments)}function zY(t,e){if(t==null)return{};var n,r,i=yqe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function yqe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function xqe(t){var e=_r(),n=T.useRef(null);return T.useLayoutEffect(()=>{n.current===null?e(A$e(t)):n.current!==t&&e(T$e({prev:n.current,next:t})),n.current=t},[t,e]),T.useLayoutEffect(()=>()=>{n.current&&(e(k$e(n.current)),n.current=null)},[e]),null}var vqe=t=>{var{yAxisId:e,className:n,width:r,label:i}=t,s=T.useRef(null),o=T.useRef(null),a=Pt(i6),l=Fi(),c=_r(),u="yAxis",f=Pt(R=>Ace(R,e)),m=Pt(R=>bje(R,e)),g=Pt(R=>Cce(R,u,e,l)),x=Pt(R=>sce(R,e));if(T.useLayoutEffect(()=>{if(!(r!=="auto"||!f||xB(i)||T.isValidElement(i)||x==null)){var R=s.current;if(R){var U=R.getCalculatedWidth();Math.round(f.width)!==Math.round(U)&&c(C$e({id:e,width:U}))}}},[g,f,c,i,e,r,x]),f==null||m==null||x==null)return null;var{dangerouslySetInnerHTML:v,ticks:w,scale:E}=t,C=zY(t,mqe),{id:k,scale:O}=x,j=zY(x,gqe);return T.createElement(OB,aD({},C,j,{ref:s,labelRef:o,x:m.x,y:m.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:f.width,height:f.height,className:Pn("recharts-".concat(u," ").concat(u),n),viewBox:a,ticks:g,axisType:u}))},bqe={allowDataOverflow:_i.allowDataOverflow,allowDecimals:_i.allowDecimals,allowDuplicatedCategory:_i.allowDuplicatedCategory,angle:_i.angle,axisLine:Yu.axisLine,hide:!1,includeHidden:_i.includeHidden,interval:_i.interval,minTickGap:_i.minTickGap,mirror:_i.mirror,orientation:_i.orientation,padding:_i.padding,reversed:_i.reversed,scale:_i.scale,tick:_i.tick,tickCount:_i.tickCount,tickLine:Yu.tickLine,tickSize:Yu.tickSize,type:_i.type,width:_i.width,yAxisId:0},wqe=t=>{var e=yi(t,bqe);return T.createElement(T.Fragment,null,T.createElement(xqe,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),T.createElement(vqe,e))},Vw=T.memo(wqe,Xue);Vw.displayName="YAxis";var Eqe=(t,e)=>e,LB=Me([Eqe,An,nce,Ti,Hce,Nd,D7e,Si],z7e),BB=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,r=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/r)}},Que=za("mouseClick"),Zue=M1();Zue.startListening({actionCreator:Que,effect:(t,e)=>{var n=t.payload,r=LB(e.getState(),BB(n));(r==null?void 0:r.activeIndex)!=null&&e.dispatch(Mje({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var lD=za("mouseMove"),ede=M1(),pA=null;ede.startListening({actionCreator:lD,effect:(t,e)=>{var n=t.payload;pA!==null&&cancelAnimationFrame(pA);var r=BB(n);pA=requestAnimationFrame(()=>{var i=e.getState(),s=oB(i,i.tooltip.settings.shared);if(s==="axis"){var o=LB(i,r);(o==null?void 0:o.activeIndex)!=null?e.dispatch(Dce({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate})):e.dispatch(Mce())}pA=null})}});function Sqe(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":t==="children"&&typeof e=="object"&&e!==null?"<<CHILDREN>>":e}var HY={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},tde=yo({name:"rootProps",initialState:HY,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:HY.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue,t.reverseStackOrder=e.payload.reverseStackOrder}}}),Aqe=tde.reducer,{updateOptions:Tqe}=tde.actions,nde=yo({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:kqe}=nde.actions,Cqe=nde.reducer,rde=za("keyDown"),ide=za("focus"),jB=M1();jB.startListening({actionCreator:rde,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,s=t.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var o=aB(i,Kx(n),K1(n),J1(n)),a=o==null?-1:Number(o);if(!(!Number.isFinite(a)||a<0)){var l=Nd(n);if(s==="Enter"){var c=Lk(n,"axis","hover",String(i.index));e.dispatch(XM({active:!i.active,activeIndex:i.index,activeCoordinate:c}));return}var u=Aje(n),f=u==="left-to-right"?1:-1,m=s==="ArrowRight"?1:-1,g=a+m*f;if(!(l==null||g>=l.length||g<0)){var x=Lk(n,"axis","hover",String(g));e.dispatch(XM({active:!0,activeIndex:g.toString(),activeCoordinate:x}))}}}}}});jB.startListening({actionCreator:ide,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var s="0",o=Lk(n,"axis","hover",String(s));e.dispatch(XM({active:!0,activeIndex:s,activeCoordinate:o}))}}}});var xa=za("externalEvent"),sde=M1(),S5=new Map;sde.startListening({actionCreator:xa,effect:(t,e)=>{var{handler:n,reactEvent:r}=t.payload;if(n!=null){r.persist();var i=r.type,s=S5.get(i);s!==void 0&&cancelAnimationFrame(s);var o=requestAnimationFrame(()=>{try{var a=e.getState(),l={activeCoordinate:b7e(a),activeDataKey:fB(a),activeIndex:oh(a),activeLabel:Gce(a),activeTooltipIndex:oh(a),isTooltipActive:w7e(a)};n(l,r)}finally{S5.delete(i)}});S5.set(i,o)}}});var Nqe=Me([qx],t=>t.tooltipItemPayloads),_qe=Me([Nqe,Y1,(t,e)=>e,(t,e,n)=>n],(t,e,n,r)=>{var i=t.find(a=>a.settings.graphicalItemId===r);if(i!=null){var{positions:s}=i;if(s!=null){var o=e(s,n);return o}}}),ode=za("touchMove"),ade=M1();ade.startListening({actionCreator:ode,effect:(t,e)=>{var n=t.payload;if(!(n.touches==null||n.touches.length===0)){var r=e.getState(),i=oB(r,r.tooltip.settings.shared);if(i==="axis"){var s=n.touches[0];if(s==null)return;var o=LB(r,BB({clientX:s.clientX,clientY:s.clientY,currentTarget:n.currentTarget}));(o==null?void 0:o.activeIndex)!=null&&e.dispatch(Dce({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate}))}else if(i==="item"){var a,l=n.touches[0];if(document.elementFromPoint==null||l==null)return;var c=document.elementFromPoint(l.clientX,l.clientY);if(!c||!c.getAttribute)return;var u=c.getAttribute(Sae),f=(a=c.getAttribute(Aae))!==null&&a!==void 0?a:void 0,m=Gx(r).find(v=>v.id===f);if(u==null||m==null||f==null)return;var{dataKey:g}=m,x=_qe(r,u,f);e.dispatch(Oce({activeDataKey:g,activeIndex:u,activeCoordinate:x,activeGraphicalItemId:f}))}}}});var Iqe=Voe({brush:V$e,cartesianAxis:N$e,chartData:xUe,errorBars:$ze,graphicalItems:D9e,layout:oMe,legend:fDe,options:hUe,polarAxis:YFe,polarOptions:Cqe,referenceElements:X$e,rootProps:Aqe,tooltip:Dje,zIndex:nUe}),Pqe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return P4e({reducer:Iqe,preloadedState:e,middleware:r=>{var i;return r({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((i="es6")!==null&&i!==void 0?i:"")}).concat([Zue.middleware,ede.middleware,jB.middleware,sde.middleware,ade.middleware])},enhancers:r=>{var i=r;return typeof r=="function"&&(i=r()),i.concat(sae({type:"raf"}))},devTools:{serialize:{replacer:Sqe},name:"recharts-".concat(n)}})};function lde(t){var{preloadedState:e,children:n,reduxStoreName:r}=t,i=Fi(),s=T.useRef(null);if(i)return n;s.current==null&&(s.current=Pqe(e,r));var o=Y8;return T.createElement(hHe,{context:o,store:s.current},n)}function Rqe(t){var{layout:e,margin:n}=t,r=_r(),i=Fi();return T.useEffect(()=>{i||(r(rMe(e)),r(nMe(n)))},[r,i,e,n]),null}var cde=T.memo(Rqe,Q1);function ude(t){var e=_r();return T.useEffect(()=>{e(Tqe(t))},[e,t]),null}function VY(t){var{zIndex:e,isPanorama:n}=t,r=T.useRef(null),i=_r();return T.useLayoutEffect(()=>(r.current&&i(eUe({zIndex:e,element:r.current,isPanorama:n})),()=>{i(tUe({zIndex:e,isPanorama:n}))}),[i,e,n]),T.createElement("g",{tabIndex:-1,ref:r})}function qY(t){var{children:e,isPanorama:n}=t,r=Pt(V7e);if(!r||r.length===0)return e;var i=r.filter(o=>o<0),s=r.filter(o=>o>0);return T.createElement(T.Fragment,null,i.map(o=>T.createElement(VY,{key:o,zIndex:o,isPanorama:n})),e,s.map(o=>T.createElement(VY,{key:o,zIndex:o,isPanorama:n})))}var Oqe=["children"];function Mqe(t,e){if(t==null)return{};var n,r,i=Dqe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Dqe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Gk(){return Gk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Gk.apply(null,arguments)}var Lqe={width:"100%",height:"100%",display:"block"},Bqe=T.forwardRef((t,e)=>{var n=Iae(),r=Pae(),i=zae();if(!Ic(n)||!Ic(r))return null;var{children:s,otherAttributes:o,title:a,desc:l}=t,c,u;return o!=null&&(typeof o.tabIndex=="number"?c=o.tabIndex:c=i?0:void 0,typeof o.role=="string"?u=o.role:u=i?"application":void 0),T.createElement(aoe,Gk({},o,{title:a,desc:l,role:u,tabIndex:c,width:n,height:r,style:Lqe,ref:e}),s)}),jqe=t=>{var{children:e}=t,n=Pt(M2);if(!n)return null;var{width:r,height:i,y:s,x:o}=n;return T.createElement(aoe,{width:r,height:i,x:o,y:s},e)},GY=T.forwardRef((t,e)=>{var{children:n}=t,r=Mqe(t,Oqe),i=Fi();return i?T.createElement(jqe,null,T.createElement(qY,{isPanorama:!0},n)):T.createElement(Bqe,Gk({ref:e},r),T.createElement(qY,{isPanorama:!1},n))});function Uqe(){var t=_r(),[e,n]=T.useState(null),r=Pt(SMe);return T.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),s=i.width/e.offsetWidth;ur(s)&&s!==r&&t(sMe(s))}},[e,t,r]),n}function KY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Fqe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KY(Object(n),!0).forEach(function(r){$qe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $qe(t,e,n){return(e=zqe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zqe(t){var e=Hqe(t,"string");return typeof e=="symbol"?e:e+""}function Hqe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bm(){return bm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bm.apply(null,arguments)}var Vqe=()=>(CUe(),null);function Kk(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var qqe=T.forwardRef((t,e)=>{var n,r,i=T.useRef(null),[s,o]=T.useState({containerWidth:Kk((n=t.style)===null||n===void 0?void 0:n.width),containerHeight:Kk((r=t.style)===null||r===void 0?void 0:r.height)}),a=T.useCallback((c,u)=>{o(f=>{var m=Math.round(c),g=Math.round(u);return f.containerWidth===m&&f.containerHeight===g?f:{containerWidth:m,containerHeight:g}})},[]),l=T.useCallback(c=>{if(typeof e=="function"&&e(c),c!=null&&typeof ResizeObserver<"u"){var{width:u,height:f}=c.getBoundingClientRect();a(u,f);var m=x=>{var{width:v,height:w}=x[0].contentRect;a(v,w)},g=new ResizeObserver(m);g.observe(c),i.current=g}},[e,a]);return T.useEffect(()=>()=>{var c=i.current;c!=null&&c.disconnect()},[a]),T.createElement(T.Fragment,null,T.createElement(L2,{width:s.containerWidth,height:s.containerHeight}),T.createElement("div",bm({ref:l},t)))}),Gqe=T.forwardRef((t,e)=>{var{width:n,height:r}=t,[i,s]=T.useState({containerWidth:Kk(n),containerHeight:Kk(r)}),o=T.useCallback((l,c)=>{s(u=>{var f=Math.round(l),m=Math.round(c);return u.containerWidth===f&&u.containerHeight===m?u:{containerWidth:f,containerHeight:m}})},[]),a=T.useCallback(l=>{if(typeof e=="function"&&e(l),l!=null){var{width:c,height:u}=l.getBoundingClientRect();o(c,u)}},[e,o]);return T.createElement(T.Fragment,null,T.createElement(L2,{width:i.containerWidth,height:i.containerHeight}),T.createElement("div",bm({ref:a},t)))}),Kqe=T.forwardRef((t,e)=>{var{width:n,height:r}=t;return T.createElement(T.Fragment,null,T.createElement(L2,{width:n,height:r}),T.createElement("div",bm({ref:e},t)))}),Wqe=T.forwardRef((t,e)=>{var{width:n,height:r}=t;return ud(n)||ud(r)?T.createElement(Gqe,bm({},t,{ref:e})):T.createElement(Kqe,bm({},t,{ref:e}))});function Yqe(t){return t===!0?qqe:Wqe}var Jqe=T.forwardRef((t,e)=>{var{children:n,className:r,height:i,onClick:s,onContextMenu:o,onDoubleClick:a,onMouseDown:l,onMouseEnter:c,onMouseLeave:u,onMouseMove:f,onMouseUp:m,onTouchEnd:g,onTouchMove:x,onTouchStart:v,style:w,width:E,responsive:C,dispatchTouchEvents:k=!0}=t,O=T.useRef(null),j=_r(),[R,U]=T.useState(null),[V,F]=T.useState(null),$=Uqe(),K=s6(),H=(K==null?void 0:K.width)>0?K.width:E,B=(K==null?void 0:K.height)>0?K.height:i,A=T.useCallback(ue=>{$(ue),typeof e=="function"&&e(ue),U(ue),F(ue),ue!=null&&(O.current=ue)},[$,e,U,F]),I=T.useCallback(ue=>{j(Que(ue)),j(xa({handler:s,reactEvent:ue}))},[j,s]),M=T.useCallback(ue=>{j(lD(ue)),j(xa({handler:c,reactEvent:ue}))},[j,c]),z=T.useCallback(ue=>{j(Mce()),j(xa({handler:u,reactEvent:ue}))},[j,u]),G=T.useCallback(ue=>{j(lD(ue)),j(xa({handler:f,reactEvent:ue}))},[j,f]),te=T.useCallback(()=>{j(ide())},[j]),Y=T.useCallback(ue=>{j(rde(ue.key))},[j]),q=T.useCallback(ue=>{j(xa({handler:o,reactEvent:ue}))},[j,o]),D=T.useCallback(ue=>{j(xa({handler:a,reactEvent:ue}))},[j,a]),_=T.useCallback(ue=>{j(xa({handler:l,reactEvent:ue}))},[j,l]),W=T.useCallback(ue=>{j(xa({handler:m,reactEvent:ue}))},[j,m]),X=T.useCallback(ue=>{j(xa({handler:v,reactEvent:ue}))},[j,v]),re=T.useCallback(ue=>{k&&j(ode(ue)),j(xa({handler:x,reactEvent:ue}))},[j,k,x]),ae=T.useCallback(ue=>{j(xa({handler:g,reactEvent:ue}))},[j,g]),Ee=Yqe(C);return T.createElement(eue.Provider,{value:R},T.createElement(d5e.Provider,{value:V},T.createElement(Ee,{width:H??(w==null?void 0:w.width),height:B??(w==null?void 0:w.height),className:Pn("recharts-wrapper",r),style:Fqe({position:"relative",cursor:"default",width:H,height:B},w),onClick:I,onContextMenu:q,onDoubleClick:D,onFocus:te,onKeyDown:Y,onMouseDown:_,onMouseEnter:M,onMouseLeave:z,onMouseMove:G,onMouseUp:W,onTouchEnd:ae,onTouchMove:re,onTouchStart:X,ref:A},T.createElement(Vqe,null),n)))}),Xqe=["width","height","responsive","children","className","style","compact","title","desc"];function Qqe(t,e){if(t==null)return{};var n,r,i=Zqe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Zqe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var dde=T.forwardRef((t,e)=>{var{width:n,height:r,responsive:i,children:s,className:o,style:a,compact:l,title:c,desc:u}=t,f=Qqe(t,Xqe),m=Gs(f);return l?T.createElement(T.Fragment,null,T.createElement(L2,{width:n,height:r}),T.createElement(GY,{otherAttributes:m,title:c,desc:u},s)):T.createElement(Jqe,{className:o,style:a,width:n,height:r,responsive:i??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},T.createElement(GY,{otherAttributes:m,title:c,desc:u,ref:e},T.createElement(Z$e,null,s)))});function cD(){return cD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cD.apply(null,arguments)}var eGe={top:5,right:5,bottom:5,left:5},tGe={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:eGe,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},UB=T.forwardRef(function(e,n){var r,i=yi(e.categoricalChartProps,tGe),{chartName:s,defaultTooltipEventType:o,validateTooltipEventTypes:a,tooltipPayloadSearcher:l,categoricalChartProps:c}=e,u={chartName:s,defaultTooltipEventType:o,validateTooltipEventTypes:a,tooltipPayloadSearcher:l,eventEmitter:void 0};return T.createElement(lde,{preloadedState:{options:u},reduxStoreName:(r=c.id)!==null&&r!==void 0?r:s},T.createElement(Tue,{chartData:c.data}),T.createElement(cde,{layout:i.layout,margin:i.margin}),T.createElement(ude,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),T.createElement(dde,cD({},i,{ref:n})))}),nGe=["axis","item"],rGe=T.forwardRef((t,e)=>T.createElement(UB,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:nGe,tooltipPayloadSearcher:iN,categoricalChartProps:t,ref:e}));function iGe(t){var e=_r();return T.useEffect(()=>{e(kqe(t))},[e,t]),null}var sGe=["layout"];function uD(){return uD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uD.apply(null,arguments)}function oGe(t,e){if(t==null)return{};var n,r,i=aGe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function aGe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var lGe={top:5,right:5,bottom:5,left:5},fde={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:lGe,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},cGe=T.forwardRef(function(e,n){var r,i=yi(e.categoricalChartProps,fde),{layout:s}=i,o=oGe(i,sGe),{chartName:a,defaultTooltipEventType:l,validateTooltipEventTypes:c,tooltipPayloadSearcher:u}=e,f={chartName:a,defaultTooltipEventType:l,validateTooltipEventTypes:c,tooltipPayloadSearcher:u,eventEmitter:void 0};return T.createElement(lde,{preloadedState:{options:f},reduxStoreName:(r=i.id)!==null&&r!==void 0?r:a},T.createElement(Tue,{chartData:i.data}),T.createElement(cde,{layout:s,margin:i.margin}),T.createElement(ude,{baseValue:void 0,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),T.createElement(iGe,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),T.createElement(dde,uD({},o,{ref:n})))});function WY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function YY(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WY(Object(n),!0).forEach(function(r){uGe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uGe(t,e,n){return(e=dGe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dGe(t){var e=fGe(t,"string");return typeof e=="symbol"?e:e+""}function fGe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var hGe=["item"],pGe=YY(YY({},fde),{},{layout:"centric",startAngle:0,endAngle:360}),hde=T.forwardRef((t,e)=>{var n=yi(t,pGe);return T.createElement(cGe,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:hGe,tooltipPayloadSearcher:iN,categoricalChartProps:n,ref:e})}),mGe=["axis"],pde=T.forwardRef((t,e)=>T.createElement(UB,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:mGe,tooltipPayloadSearcher:iN,categoricalChartProps:t,ref:e})),gGe=["axis"],yGe=T.forwardRef((t,e)=>T.createElement(UB,{chartName:"ComposedChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:gGe,tooltipPayloadSearcher:iN,categoricalChartProps:t,ref:e}));const xGe="https://api.devnet.solana.com",vGe="HWy1jotHpo6UqeQxx49dpYYdQB8wj9Qk9MdxwjLvDHB8",Xf=[{symbol:"SOL",name:"Solana",mint:"So11111111111111111111111111111111111111112",decimals:9,logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png"},{symbol:"USDC",name:"USD Coin (Devnet)",mint:"4zMMC9srt5Ri5X14GAgXhaHii3GnPAEERYPJgZJDncDU",decimals:6,logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v/logo.png"},{symbol:"RAY",name:"Raydium",mint:"4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R",decimals:6,logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R/logo.png"}],hc={SOL:145.5,USDC:1,RAY:1.85},JY=({network:t})=>{const e={solana:"bg-[#9b87f5]/15 text-[#9b87f5] border-[#9b87f5]/30",hyperliquid:"bg-[#34d399]/15 text-[#34d399] border-[#34d399]/30",polymarket:"bg-[#60a5fa]/15 text-[#60a5fa] border-[#60a5fa]/30"},n={solana:"SOL",hyperliquid:"HL",polymarket:"PM"};return h.jsx("span",{className:`px-1.5 py-0.5 text-[10px] font-semibold rounded uppercase tracking-[0.05em] border ${e[t]}`,children:n[t]})},bGe=({vault:t,connectOwnerWallet:e,disconnectOwnerWallet:n,connectHLOwnerWallet:r,disconnectHLOwnerWallet:i,connectPMOwnerWallet:s,disconnectPMOwnerWallet:o,assetPrices:a,portfolioHistoryDaily:l,portfolioHistoryLongTerm:c,scheduledTasks:u,assetAllocationData:f,activityFeed:m,activityDisplayCount:g,setActivityDisplayCount:x,setActiveTab:v,refreshData:w,onNewChat:E})=>{const[C,k]=T.useState("all"),[O,j]=T.useState(0),R=2,[U,V]=T.useState("1D"),F=c.length,$=T.useMemo(()=>({"1D":l.length>0||F>=1,"1W":F>=7,"1M":F>=30,"1Y":F>=365}),[F,l.length]),K=T.useMemo(()=>{if(U==="1D")return l;if(c.length===0)return[];const re={"1D":1,"1W":7,"1M":30,"1Y":365}[U]||30;return c.slice(-re)},[l,c,U]),[H,B]=T.useState(0),A=2,[I,M]=T.useState(null),[z,G]=T.useState("pie"),[te,Y]=T.useState(null),[q,D]=T.useState(void 0),_=async X=>{try{await navigator.clipboard.writeText(X),M(X),setTimeout(()=>M(null),2e3)}catch(re){console.error("Failed to copy:",re)}},W=X=>X.network==="solana"&&X.signature?`https://solscan.io/tx/${X.signature}?cluster=devnet`:X.network==="hyperliquid"&&X.signature?`https://app.hyperliquid-testnet.xyz/explorer/tx/${X.signature.replace("hl-","")}`:null;return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 2xl:grid-cols-4 gap-4 lg:gap-6",children:[h.jsxs("div",{className:"flex flex-col gap-4 lg:gap-6",children:[h.jsxs("div",{className:"glass-panel p-5 rounded relative overflow-hidden flex-1 flex flex-col justify-center group",children:[h.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 group-hover:opacity-10 transition-opacity",children:h.jsx(Ky,{size:48,className:"text-white"})}),h.jsx("h3",{className:"text-[10px] uppercase tracking-[0.1em] text-[#747580] font-semibold mb-2",children:"Total Net Worth"}),h.jsxs("div",{className:"text-2xl lg:text-3xl font-semibold text-white tracking-tight",children:["$",f.totalValue.toFixed(2)]}),h.jsx("div",{className:"text-[11px] text-[#747580] mt-1",children:"Cross-Chain Unified Portfolio"})]}),h.jsxs("button",{onClick:E,className:"glass-panel p-5 rounded relative overflow-hidden flex-1 flex flex-col justify-center items-start text-left hover:bg-[#1a1b21] transition-colors group border border-dashed border-[#232328] hover:border-[#E7FE55]/50",children:[h.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 group-hover:opacity-10 transition-opacity text-[#E7FE55]",children:h.jsx(vu,{size:48})}),h.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[h.jsx("div",{className:"p-1.5 rounded bg-[#E7FE55]/15 text-[#E7FE55] group-hover:bg-[#E7FE55] group-hover:text-black transition-colors",children:h.jsx(vu,{size:16})}),h.jsx("h3",{className:"text-[#E7FE55] font-medium text-sm",children:"New Conversation"})]}),h.jsx("div",{className:"text-[11px] text-[#747580]",children:"Start a new task or query"})]})]}),h.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col",children:[h.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5",children:h.jsx(mo,{size:48,className:"text-white"})}),h.jsx("div",{className:"flex items-center gap-2 mb-2",children:h.jsx("h3",{className:"text-[10px] uppercase tracking-[0.1em] text-[#747580] font-semibold",children:"Solana Vault"})}),h.jsxs("div",{className:"text-xl lg:text-2xl font-semibold text-white tracking-tight",children:[t.solBalance.toFixed(4)," SOL"]}),h.jsxs("div",{className:"text-[11px] text-[#E7FE55] mt-1",children:[" $",(t.solBalance*(a.SOL||hc.SOL)).toFixed(2)]}),h.jsxs("div",{className:"mt-4 pt-3 border-t border-[#232328]",children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsx("span",{className:"text-[10px] font-semibold uppercase tracking-[0.05em] text-[#747580]",children:"Vault Address"}),t.publicKey&&h.jsxs("a",{href:`https://solscan.io/address/${t.publicKey}?cluster=devnet`,target:"_blank",rel:"noopener noreferrer",className:"text-[10px] text-[#E7FE55] hover:text-[#f0ff85] flex items-center gap-1",title:"View on Solscan Explorer",children:[h.jsx(qA,{size:10})," Solscan"]})]}),t.publicKey?h.jsxs("div",{onClick:()=>_(t.publicKey),className:"flex items-center gap-2 cursor-pointer group",children:[h.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#E7FE55]"}),h.jsxs("span",{className:"text-xs text-white font-mono truncate group-hover:text-[#E7FE55] transition-colors",children:[t.publicKey.slice(0,4),"...",t.publicKey.slice(-4)]}),I===t.publicKey?h.jsx("span",{className:"text-[10px] text-[#E7FE55] ml-auto",children:"Copied!"}):h.jsx("span",{className:"text-[10px] text-[#747580] ml-auto opacity-0 group-hover:opacity-100 transition-opacity",children:"Click to copy"})]}):h.jsx("div",{className:"text-[10px] text-[#747580] italic",children:"Not created"})]}),h.jsxs("div",{className:"mt-3 pt-3 border-t border-[#232328]",children:[h.jsx("div",{className:"flex items-center justify-between mb-2",children:h.jsx("span",{className:"text-[10px] uppercase tracking-[0.05em] font-semibold text-[#747580]",children:"Solana Owner"})}),t.ownerPublicKey?h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{onClick:()=>_(t.ownerPublicKey),className:"flex items-center gap-2 cursor-pointer group flex-1",children:[h.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#E7FE55]"}),h.jsxs("span",{className:"text-xs text-white font-mono truncate group-hover:text-[#E7FE55] transition-colors",children:[t.ownerPublicKey.slice(0,4),"...",t.ownerPublicKey.slice(-4)]}),I===t.ownerPublicKey?h.jsx("span",{className:"text-[10px] text-[#E7FE55] ml-2",children:"Copied!"}):h.jsx("span",{className:"text-[10px] text-[#747580] ml-2 opacity-0 group-hover:opacity-100 transition-opacity",children:"Click to copy"})]}),h.jsx("button",{onClick:n,className:"ml-2 px-2 py-1 text-[10px] font-medium text-[#747580] hover:text-[#E7FE55] bg-transparent hover:bg-[#E7FE55]/10 rounded border border-[#232328] hover:border-[#E7FE55]/30 transition-colors flex-shrink-0",children:"Disconnect"})]}):h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("div",{className:"text-[10px] text-[#747580] italic",children:"Not connected"}),h.jsx("button",{onClick:e,className:"px-2 py-1 text-[10px] font-medium text-[#E7FE55] hover:text-[#f0ff85] bg-[#E7FE55]/10 hover:bg-[#E7FE55]/20 rounded border border-[#E7FE55]/20 transition-colors flex-shrink-0",children:"Connect"})]})]})]}),h.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col",children:[h.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5",children:h.jsx(Rn,{size:48,className:"text-white"})}),h.jsx("div",{className:"flex items-center gap-2 mb-2",children:h.jsx("h3",{className:"text-[10px] uppercase tracking-[0.1em] text-[#747580] font-semibold",children:"Hyperliquid Vault"})}),h.jsxs("div",{className:"text-xl lg:text-2xl font-semibold text-white tracking-tight",children:[(t.hlBalance||0).toFixed(2)," USDC"]}),h.jsx("div",{className:"text-[11px] text-[#747580] mt-1",children:t.hlPositions&&t.hlPositions.length>0?`${t.hlPositions.length} open position${t.hlPositions.length>1?"s":""}`:"No open positions"}),h.jsxs("div",{className:"mt-4 pt-3 border-t border-[#232328]",children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsx("span",{className:"text-[10px] font-semibold uppercase tracking-[0.05em] text-[#747580]",children:"Vault Address"}),h.jsxs("a",{href:"https://app.hyperliquid-testnet.xyz",target:"_blank",rel:"noopener noreferrer",className:"text-[10px] text-[#E7FE55] hover:text-[#f0ff85] flex items-center gap-1",title:"Hyperliquid Platform Official Website",children:[h.jsx(Rn,{size:10})," Hyperliquid"]})]}),t.hlPublicKey?h.jsxs("div",{onClick:()=>_(t.hlPublicKey),className:"flex items-center gap-2 cursor-pointer group",children:[h.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#E7FE55]"}),h.jsxs("span",{className:"text-xs text-white font-mono truncate group-hover:text-[#E7FE55] transition-colors",children:[t.hlPublicKey.slice(0,6),"...",t.hlPublicKey.slice(-4)]}),I===t.hlPublicKey?h.jsx("span",{className:"text-[10px] text-[#E7FE55] ml-auto",children:"Copied!"}):h.jsx("span",{className:"text-[10px] text-[#747580] ml-auto opacity-0 group-hover:opacity-100 transition-opacity",children:"Click to copy"})]}):h.jsx("div",{className:"text-[10px] text-[#747580] italic",children:"Not created"})]}),h.jsxs("div",{className:"mt-3 pt-3 border-t border-[#232328]",children:[h.jsx("div",{className:"flex items-center justify-between mb-2",children:h.jsx("span",{className:"text-[10px] uppercase tracking-[0.05em] font-semibold text-[#747580]",children:"Hyperliquid Owner"})}),t.hlOwnerPublicKey?h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{onClick:()=>_(t.hlOwnerPublicKey),className:"flex items-center gap-2 cursor-pointer group flex-1",children:[h.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#E7FE55]"}),h.jsxs("span",{className:"text-xs text-white font-mono truncate group-hover:text-[#E7FE55] transition-colors",children:[t.hlOwnerPublicKey.slice(0,4),"...",t.hlOwnerPublicKey.slice(-4)]}),I===t.hlOwnerPublicKey?h.jsx("span",{className:"text-[10px] text-[#E7FE55] ml-2",children:"Copied!"}):h.jsx("span",{className:"text-[10px] text-[#747580] ml-2 opacity-0 group-hover:opacity-100 transition-opacity",children:"Click to copy"})]}),h.jsx("button",{onClick:i,className:"ml-2 px-2 py-1 text-[10px] font-medium text-[#747580] hover:text-[#E7FE55] bg-transparent hover:bg-[#E7FE55]/10 rounded border border-[#232328] hover:border-[#E7FE55]/30 transition-colors flex-shrink-0",children:"Disconnect"})]}):h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("div",{className:"text-[10px] text-[#747580] italic",children:"Not connected"}),h.jsx("button",{onClick:r,className:"px-2 py-1 text-[10px] font-medium text-[#E7FE55] hover:text-[#f0ff85] bg-[#E7FE55]/10 hover:bg-[#E7FE55]/20 rounded border border-[#E7FE55]/20 transition-colors flex-shrink-0",children:"Connect"})]})]})]}),h.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col",children:[h.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5",children:h.jsx(qA,{size:48,className:"text-white"})}),h.jsx("div",{className:"flex items-center gap-2 mb-2",children:h.jsx("h3",{className:"text-[10px] uppercase tracking-[0.1em] text-[#747580] font-semibold",children:"Polymarket Vault"})}),h.jsxs("div",{className:"text-xl lg:text-2xl font-semibold text-white tracking-tight",children:[(t.pmBalance||0).toFixed(2)," USDC"]}),h.jsxs("div",{className:"text-[11px] text-[#E7FE55] mt-1",children:[" $",(t.pmBalance||0).toFixed(2)]}),h.jsxs("div",{className:"mt-4 pt-3 border-t border-[#232328]",children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsx("span",{className:"text-[10px] font-semibold uppercase tracking-[0.05em] text-[#747580]",children:"Vault Address"}),h.jsxs("a",{href:"https://polymarket.com",target:"_blank",rel:"noopener noreferrer",className:"text-[10px] text-[#E7FE55] hover:text-[#f0ff85] flex items-center gap-1",title:"Polymarket Platform",children:[h.jsx(qA,{size:10})," Polymarket"]})]}),t.pmPublicKey?h.jsxs("div",{onClick:()=>_(t.pmPublicKey),className:"flex items-center gap-2 cursor-pointer group",children:[h.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#E7FE55]"}),h.jsxs("span",{className:"text-xs text-white font-mono truncate group-hover:text-[#E7FE55] transition-colors",children:[t.pmPublicKey.slice(0,6),"...",t.pmPublicKey.slice(-4)]}),I===t.pmPublicKey?h.jsx("span",{className:"text-[10px] text-[#E7FE55] ml-auto",children:"Copied!"}):h.jsx("span",{className:"text-[10px] text-[#747580] ml-auto opacity-0 group-hover:opacity-100 transition-opacity",children:"Click to copy"})]}):h.jsx("div",{className:"text-[10px] text-[#747580] italic",children:"Not created"})]}),h.jsxs("div",{className:"mt-3 pt-3 border-t border-[#232328]",children:[h.jsx("div",{className:"flex items-center justify-between mb-2",children:h.jsx("span",{className:"text-[10px] uppercase tracking-[0.05em] font-semibold text-[#747580]",children:"Polymarket Owner"})}),t.pmOwnerPublicKey?h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{onClick:()=>_(t.pmOwnerPublicKey),className:"flex items-center gap-2 cursor-pointer group flex-1",children:[h.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#E7FE55]"}),h.jsxs("span",{className:"text-xs text-white font-mono truncate group-hover:text-[#E7FE55] transition-colors",children:[t.pmOwnerPublicKey.slice(0,4),"...",t.pmOwnerPublicKey.slice(-4)]}),I===t.pmOwnerPublicKey?h.jsx("span",{className:"text-[10px] text-[#E7FE55] ml-2",children:"Copied!"}):h.jsx("span",{className:"text-[10px] text-[#747580] ml-2 opacity-0 group-hover:opacity-100 transition-opacity",children:"Click to copy"})]}),h.jsx("button",{onClick:o,className:"ml-2 px-2 py-1 text-[10px] font-medium text-[#747580] hover:text-[#E7FE55] bg-transparent hover:bg-[#E7FE55]/10 rounded border border-[#232328] hover:border-[#E7FE55]/30 transition-colors flex-shrink-0",children:"Disconnect"})]}):h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("div",{className:"text-[10px] text-[#747580] italic",children:"Not connected"}),h.jsx("button",{onClick:s,className:"px-2 py-1 text-[10px] font-medium text-[#E7FE55] hover:text-[#f0ff85] bg-[#E7FE55]/10 hover:bg-[#E7FE55]/20 rounded border border-[#E7FE55]/20 transition-colors flex-shrink-0",children:"Connect"})]})]})]})]}),h.jsxs("div",{className:"grid grid-cols-1 2xl:grid-cols-3 gap-6",children:[h.jsxs("div",{className:"2xl:col-span-2 space-y-6",children:[h.jsxs("div",{className:"glass-panel p-6 rounded",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 mb-6",children:[h.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[h.jsx(mo,{className:"text-[#E7FE55]",size:18}),"Portfolio Evolution"]}),h.jsx("div",{className:"flex gap-2",children:["1D","1W","1M","1Y"].map(X=>{const re=$[X],ae=X===U;return h.jsx("button",{disabled:!re,onClick:()=>re&&V(X),className:`px-3 py-1 rounded text-xs font-medium transition-colors ${re?ae?"bg-[#E7FE55]/15 text-[#E7FE55] border border-[#E7FE55]/30":"text-[#747580] hover:text-[#a0a1a8] hover:bg-[#1a1b21]":"text-[#3a3a40] cursor-not-allowed"}`,children:X},X)})})]}),h.jsx("div",{className:"h-[250px] lg:h-[300px] w-full",children:h.jsx(_w,{width:"100%",height:"100%",children:h.jsxs(yGe,{data:K.length>0?K:[],children:[h.jsx("defs",{children:h.jsxs("linearGradient",{id:"colorValue",x1:"0",y1:"0",x2:"0",y2:"1",children:[h.jsx("stop",{offset:"5%",stopColor:"#E7FE55",stopOpacity:.25}),h.jsx("stop",{offset:"50%",stopColor:"#E7FE55",stopOpacity:.08}),h.jsx("stop",{offset:"95%",stopColor:"#E7FE55",stopOpacity:0})]})}),h.jsx($w,{strokeDasharray:"3 3",stroke:"#232328",vertical:!1}),h.jsx(Hw,{dataKey:"date",stroke:"#747580",tick:{fill:"#747580",fontSize:10},tickLine:!1,axisLine:!1}),h.jsx(Vw,{stroke:"#747580",tick:{fill:"#747580",fontSize:10},tickLine:!1,axisLine:!1,tickFormatter:X=>`$${X}`,width:50}),h.jsx(Bk,{contentStyle:{backgroundColor:"#14151a",borderColor:"#232328",borderRadius:"4px"},itemStyle:{color:"#e4e5e9"},labelStyle:{color:"#747580"},itemSorter:X=>({value:0,solValue:1,hlValue:2,pmValue:3})[X.dataKey]??10,formatter:(X,re)=>[`$${X.toFixed(2)}`,re==="value"?"Total Value":re==="solValue"?"SOL Value":re==="hlValue"?"HL Value":re==="pmValue"?"PM Value":re]}),h.jsx(pN,{type:"monotone",dataKey:"value",stroke:"#E7FE55",strokeWidth:1.5,fillOpacity:1,fill:"url(#colorValue)"}),h.jsx(hT,{type:"monotone",dataKey:"solValue",stroke:"#9b87f5",strokeWidth:1.5,dot:!1}),h.jsx(hT,{type:"monotone",dataKey:"hlValue",stroke:"#34d399",strokeWidth:1.5,dot:!1}),h.jsx(hT,{type:"monotone",dataKey:"pmValue",stroke:"#60a5fa",strokeWidth:1.5,dot:!1})]})})}),h.jsxs("div",{className:"flex items-center justify-center gap-6 mt-4 text-[11px] text-[#747580]",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-2 h-2 rounded-full bg-[#E7FE55]"}),h.jsx("span",{children:"Total Value"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-2 h-2 rounded-full bg-[#9b87f5]"}),h.jsx("span",{children:"SOL Value"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-2 h-2 rounded-full bg-[#34d399]"}),h.jsx("span",{children:"HL Value"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-2 h-2 rounded-full bg-[#60a5fa]"}),h.jsx("span",{children:"PM Value"})]})]})]}),h.jsxs("div",{className:"glass-panel p-6 rounded",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[h.jsx(Rn,{className:"text-[#E7FE55]",size:18}),"Open Trading"]}),h.jsxs("button",{onClick:()=>v(Ce.HYPERLIQUID),className:"text-[10px] px-3 py-1.5 rounded uppercase tracking-wider font-medium transition-colors flex items-center gap-2 text-[#747580] hover:text-[#E7FE55] bg-transparent hover:bg-[#E7FE55]/10 border border-[#232328] hover:border-[#E7FE55]/30",children:[h.jsx(Rn,{size:12}),"Details"]})]}),!t.hlPositions||t.hlPositions.length===0?h.jsx("div",{className:"text-center py-8 text-[#747580] text-sm bg-[#14151a] rounded border border-[#232328]",children:"No open positions. Start trading to see your portfolio grow!"}):h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full text-left border-collapse",children:[h.jsx("thead",{children:h.jsxs("tr",{className:"text-[10px] uppercase tracking-[0.05em] text-[#747580] border-b border-[#232328]",children:[h.jsx("th",{className:"py-3 pl-4 font-medium",children:"Symbol"}),h.jsx("th",{className:"py-3 font-medium",children:"Size"}),h.jsx("th",{className:"py-3 font-medium",children:"Entry Price"}),h.jsx("th",{className:"py-3 font-medium",children:"Mark Price"}),h.jsx("th",{className:"py-3 font-medium",children:"Liq. Price"}),h.jsx("th",{className:"py-3 font-medium",children:"Leverage"}),h.jsx("th",{className:"py-3 pr-4 font-medium text-right",children:"Unrealized PnL"})]})}),h.jsx("tbody",{className:"text-sm",children:t.hlPositions.map((X,re)=>{const ae=parseFloat(X.position.szi),Ee=parseFloat(X.position.entryPx),ue=a[X.position.coin]||Ee,me=parseFloat(X.position.unrealizedPnl),ce=X.position.leverage.value,oe=ae>0,ke=oe?Ee*(1-.9/ce):Ee*(1+.9/ce);return h.jsxs("tr",{className:"border-b border-[#232328]/50 last:border-0 hover:bg-[#1a1b21] transition-colors",children:[h.jsx("td",{className:"py-3 pl-4",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:`w-1 h-6 rounded-full ${oe?"bg-[#34d399]":"bg-red-500"}`}),h.jsx("span",{className:"font-semibold text-white",children:X.position.coin}),h.jsx("span",{className:`text-[9px] px-1.5 py-0.5 rounded uppercase tracking-wider ${oe?"bg-[#34d399]/15 text-[#34d399]":"bg-red-500/15 text-red-400"}`,children:oe?"LONG":"SHORT"})]})}),h.jsx("td",{className:"py-3 text-[#a0a1a8]",children:Math.abs(ae).toFixed(4)}),h.jsxs("td",{className:"py-3 text-[#a0a1a8]",children:["$",Ee.toFixed(4)]}),h.jsxs("td",{className:"py-3 text-[#a0a1a8]",children:["$",ue.toFixed(4)]}),h.jsxs("td",{className:"py-3 text-orange-400/80",children:["$",ke.toFixed(4)]}),h.jsxs("td",{className:"py-3 text-[#747580]",children:[ce,"x"]}),h.jsxs("td",{className:`py-3 pr-4 text-right font-medium ${me>=0?"text-[#34d399]":"text-red-400"}`,children:[me>=0?"+":"",me.toFixed(2)," USDC"]})]},re)})})]})})]}),h.jsxs("div",{className:"glass-panel p-6 rounded flex flex-col",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[h.jsx(Ua,{className:"text-[#E7FE55]",size:18}),"Open Tasks"]}),h.jsxs("span",{className:"text-[10px] bg-[#1a1b21] text-[#747580] px-2 py-1 rounded uppercase tracking-wider",children:[u.filter(X=>X.status==="active").length," Active"]}),h.jsxs("button",{onClick:()=>v(Ce.SCHEDULER),className:"text-[10px] px-3 py-1.5 rounded uppercase tracking-wider font-medium transition-colors flex items-center gap-2 text-[#747580] hover:text-[#E7FE55] bg-transparent hover:bg-[#E7FE55]/10 border border-[#232328] hover:border-[#E7FE55]/30",children:[h.jsx(Ua,{size:12}),"Details"]})]}),h.jsx("div",{className:"flex-1 flex flex-col",children:u.filter(X=>X.status==="active").length===0?h.jsx("div",{className:"text-center py-8 text-[#747580] text-sm my-auto bg-[#14151a] rounded border border-[#232328]",children:"No active tasks scheduled. Ask the AI to schedule a swap or transfer."}):h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"space-y-3",children:u.filter(X=>X.status==="active").slice(H*A,(H+1)*A).map(X=>h.jsxs("div",{className:"bg-[#14151a] p-4 rounded border border-[#232328] flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#E7FE55]"}),h.jsxs("div",{children:[h.jsxs("div",{className:"text-sm font-medium text-white flex items-center gap-2",children:[X.type,X.type==="HL_ORDER"&&h.jsx(JY,{network:"hyperliquid"}),X.condition&&h.jsx("span",{className:"text-[10px] text-yellow-500",children:"(Condition)"})]}),h.jsx("div",{className:"text-[11px] text-[#747580]",children:X.condition?`${X.condition.indicator.toUpperCase()} ${X.condition.operator} ${X.condition.value} (${X.condition.symbol})`:`Executes in ${Math.max(0,Math.round(((X.executeAt||0)-Date.now())/6e4))} mins`})]})]}),h.jsxs("div",{className:"text-[10px] font-mono text-[#747580]",children:["ID: ",X.id.slice(-4)]})]},X.id))}),h.jsx("div",{className:"mt-auto",children:u.filter(X=>X.status==="active").length>A&&h.jsxs("div",{className:"flex items-center justify-between mt-4 pt-2 border-t border-[#232328]",children:[h.jsx("button",{onClick:()=>B(Math.max(0,H-1)),disabled:H===0,className:`p-1 rounded hover:bg-[#1a1b21] transition-colors ${H===0?"text-[#3a3b42] cursor-not-allowed":"text-[#747580]"}`,children:h.jsx(PT,{size:16})}),h.jsxs("span",{className:"text-[10px] text-[#747580]",children:["Page ",H+1," of ",Math.ceil(u.filter(X=>X.status==="active").length/A)]}),h.jsx("button",{onClick:()=>B(Math.min(Math.ceil(u.filter(X=>X.status==="active").length/A)-1,H+1)),disabled:H>=Math.ceil(u.filter(X=>X.status==="active").length/A)-1,className:`p-1 rounded hover:bg-[#1a1b21] transition-colors ${H>=Math.ceil(u.filter(X=>X.status==="active").length/A)-1?"text-[#3a3b42] cursor-not-allowed":"text-[#747580]"}`,children:h.jsx(rm,{size:16})})]})})]})})]})]}),h.jsxs("div",{className:"space-y-6 flex flex-col",children:[h.jsxs("div",{className:"glass-panel p-6 rounded flex flex-col",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx("h3",{className:"text-sm font-semibold text-white",children:"Asset Allocation"}),h.jsxs("div",{className:"flex gap-1 bg-[#1a1b21] p-1 rounded border border-[#232328]",children:[h.jsx("button",{onClick:()=>G("bar"),className:`p-1.5 rounded transition-colors ${z==="bar"?"bg-[#232328] text-[#E7FE55]":"text-[#747580] hover:text-[#a0a1a8]"}`,title:"Bar View",children:h.jsx(jAe,{size:14})}),h.jsx("button",{onClick:()=>G("pie"),className:`p-1.5 rounded transition-colors ${z==="pie"?"bg-[#232328] text-[#E7FE55]":"text-[#747580] hover:text-[#a0a1a8]"}`,title:"Pie View",children:h.jsx(aw,{size:14})})]})]}),h.jsx("div",{className:"h-[180px] w-full relative flex-shrink-0",children:h.jsx(_w,{width:"100%",height:"100%",children:z==="pie"?h.jsxs(hde,{children:[h.jsx(IB,{data:f.data,cx:"50%",cy:"50%",innerRadius:45,outerRadius:q!==void 0?65:70,paddingAngle:3,dataKey:"value",onMouseEnter:(X,re)=>D(re),onMouseLeave:()=>D(void 0),animationBegin:0,animationDuration:800,animationEasing:"ease-out",children:f.data.map((X,re)=>h.jsx(Wx,{fill:X.color,stroke:q===re?X.color:"transparent",strokeWidth:q===re?3:0,style:{cursor:"pointer",transition:"all 0.2s ease-out",filter:q===re?`brightness(1.2) drop-shadow(0 0 8px ${X.color})`:"brightness(1)",transform:q===re?"scale(1.05)":"scale(1)",transformOrigin:"center"}},`cell-${re}`))}),q!==void 0&&f.data[q]&&h.jsxs("g",{children:[h.jsx("text",{x:"50%",y:"42%",textAnchor:"middle",fill:"#fff",fontSize:12,fontWeight:"bold",children:f.data[q].symbol}),h.jsxs("text",{x:"50%",y:"54%",textAnchor:"middle",fill:f.data[q].color,fontSize:15,fontWeight:"bold",fontFamily:"monospace",children:["$",f.data[q].value.toFixed(2)]}),h.jsxs("text",{x:"50%",y:"65%",textAnchor:"middle",fill:"#747580",fontSize:10,children:[(f.data[q].value/(f.totalValue||1)*100).toFixed(1),"%"]})]}),q===void 0&&h.jsxs("g",{children:[h.jsx("text",{x:"50%",y:"46%",textAnchor:"middle",fill:"#747580",fontSize:10,style:{textTransform:"uppercase",letterSpacing:"0.1em"},children:"Total"}),h.jsxs("text",{x:"50%",y:"58%",textAnchor:"middle",fill:"#fff",fontSize:18,fontWeight:"600",children:["$",f.totalValue.toFixed(0)]})]})]}):h.jsxs(rGe,{data:[f.data.reduce((X,re)=>({...X,[re.symbol]:re.value}),{name:"Total"})],layout:"vertical",margin:{top:20,right:30,left:20,bottom:5},children:[h.jsx($w,{strokeDasharray:"3 3",horizontal:!0,vertical:!0,stroke:"#232328"}),h.jsx(Hw,{type:"number",tickFormatter:X=>`$${X}`,tick:{fill:"#747580",fontSize:10},tickLine:!1,axisLine:!1}),h.jsx(Vw,{type:"category",dataKey:"name",hide:!0}),h.jsx(Bk,{cursor:{fill:"transparent"},content:({active:X,payload:re})=>{if(!X||!re||!re.length||!te)return null;const ae=re.find(Ee=>Ee.dataKey===te);return ae?h.jsxs("div",{className:"bg-[#14151a] border border-[#232328] p-2 rounded shadow-lg",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[h.jsx("div",{className:"w-1.5 h-1.5 rounded-full",style:{backgroundColor:ae.color}}),h.jsx("span",{className:"text-[#a0a1a8] font-semibold text-[11px]",children:ae.name})]}),h.jsxs("p",{className:"text-white font-mono text-sm",children:["$",Number(ae.value).toFixed(2)]})]}):null}}),f.data.map((X,re)=>h.jsx(Jue,{dataKey:X.symbol,stackId:"a",fill:X.color,onMouseEnter:()=>Y(X.symbol),onMouseLeave:()=>Y(null),radius:re===0&&f.data.length===1?[4,4,4,4]:re===0?[4,0,0,4]:re===f.data.length-1?[0,4,4,0]:[0,0,0,0],barSize:40},X.symbol))]})})}),h.jsx("div",{className:"mt-4 space-y-1 flex-1 overflow-y-auto pr-2 custom-scrollbar",children:f.data.map((X,re)=>h.jsxs("div",{className:`flex items-center justify-between text-sm p-2 rounded-lg transition-all cursor-pointer ${q===re?"bg-[#232328]":"hover:bg-[#1a1b21]"}`,onMouseEnter:()=>D(re),onMouseLeave:()=>D(void 0),children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0 transition-transform",style:{backgroundColor:X.color,transform:q===re?"scale(1.3)":"scale(1)",boxShadow:q===re?`0 0 8px ${X.color}`:"none"}}),h.jsx("span",{className:`truncate max-w-[80px] sm:max-w-[100px] text-xs transition-colors ${q===re?"text-white":"text-[#a0a1a8]"}`,children:X.symbol}),X.network&&h.jsx("span",{className:`text-[9px] px-1 rounded uppercase tracking-wider ${X.network==="solana"?"bg-[#9b87f5]/15 text-[#9b87f5]":X.network==="hyperliquid"?"bg-[#34d399]/15 text-[#34d399]":"bg-[#60a5fa]/15 text-[#60a5fa]"}`,children:X.network==="solana"?"SOL":X.network==="hyperliquid"?"HL":"PM"})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs("span",{className:`text-xs font-mono transition-colors ${q===re?"text-white":"text-[#747580]"}`,children:["$",X.value.toFixed(2)]}),h.jsxs("span",{className:"text-xs font-mono font-semibold",style:{color:X.color},children:[(X.value/(f.totalValue||1)*100).toFixed(1),"%"]})]})]},re))})]}),h.jsxs("div",{className:"glass-panel p-6 rounded flex flex-col",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx("h3",{className:"text-sm font-semibold text-white",children:"Recent Activity"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>{k(C==="solana"?"all":"solana"),j(0)},className:`text-[9px] px-2 py-1 rounded uppercase tracking-wider font-medium transition-colors ${C==="solana"?"bg-[#9b87f5] text-white":"bg-[#9b87f5]/15 text-[#9b87f5] hover:bg-[#9b87f5]/25"}`,children:"SOL"}),h.jsx("button",{onClick:()=>{k(C==="hyperliquid"?"all":"hyperliquid"),j(0)},className:`text-[9px] px-2 py-1 rounded uppercase tracking-wider font-medium transition-colors ${C==="hyperliquid"?"bg-[#34d399] text-[#0f1015]":"bg-[#34d399]/15 text-[#34d399] hover:bg-[#34d399]/25"}`,children:"HL"})]})]}),h.jsx("div",{className:"flex-1 flex flex-col",children:m.filter(X=>C==="all"||X.network===C).length===0?h.jsx("div",{className:"text-center text-[#747580] text-sm py-4 my-auto bg-[#14151a] rounded border border-[#232328]",children:"No recent activity"}):h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"space-y-3",children:m.filter(X=>C==="all"||X.network===C).slice(O*R,(O+1)*R).map((X,re)=>h.jsxs("div",{className:"flex items-start gap-3 pb-3 border-b border-[#232328] last:border-0",children:[h.jsx("div",{className:`mt-1 p-1.5 rounded-full ${X.status==="failed"?"bg-red-500/15 text-red-400":X.network==="solana"?"bg-[#9b87f5]/15 text-[#9b87f5]":"bg-[#34d399]/15 text-[#34d399]"}`,children:X.status==="failed"?h.jsx(IAe,{size:14}):h.jsx(sne,{size:14})}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("div",{className:"flex justify-between items-start gap-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:`text-sm font-medium ${X.status==="failed"?"text-red-400":X.network==="solana"?"text-[#9b87f5]":"text-[#34d399]"}`,children:X.type}),h.jsx(JY,{network:X.network})]}),h.jsx("span",{className:"text-[10px] text-[#747580] flex-shrink-0",children:X.time})]}),h.jsx("div",{className:"text-[11px] text-[#747580] truncate mt-0.5",children:X.desc}),X.signature&&W(X)&&h.jsxs("a",{href:W(X),target:"_blank",rel:"noopener noreferrer",className:`text-[10px] ${X.network==="solana"?"text-[#9b87f5] hover:text-[#a78bfa]":"text-[#34d399] hover:text-[#4ade80]"} flex items-center gap-1 mt-1`,children:[X.network==="solana"?"View on Solscan Explorer":"View on HL Explorer"," ",h.jsx(Gy,{size:10})]})]})]},re))}),h.jsx("div",{className:"mt-auto",children:m.filter(X=>C==="all"||X.network===C).length>R&&h.jsxs("div",{className:"flex items-center justify-between mt-4 pt-2 border-t border-[#232328]",children:[h.jsx("button",{onClick:()=>j(Math.max(0,O-1)),disabled:O===0,className:`p-1 rounded hover:bg-[#1a1b21] transition-colors ${O===0?"text-[#3a3b42] cursor-not-allowed":"text-[#747580]"}`,children:h.jsx(PT,{size:16})}),h.jsxs("span",{className:"text-[10px] text-[#747580]",children:["Page ",O+1," of ",Math.ceil(m.filter(X=>C==="all"||X.network===C).length/R)]}),h.jsx("button",{onClick:()=>j(Math.min(Math.ceil(m.filter(X=>C==="all"||X.network===C).length/R)-1,O+1)),disabled:O>=Math.ceil(m.filter(X=>C==="all"||X.network===C).length/R)-1,className:`p-1 rounded hover:bg-[#1a1b21] transition-colors ${O>=Math.ceil(m.filter(X=>C==="all"||X.network===C).length/R)-1?"text-[#3a3b42] cursor-not-allowed":"text-[#747580]"}`,children:h.jsx(rm,{size:16})})]})})]})})]})]})]})]})},wGe=({vault:t,password:e,setPassword:n,withdrawAmount:r,setWithdrawAmount:i,withdrawNetwork:s,setWithdrawNetwork:o,isImporting:a,setIsImporting:l,importKey:c,setImportKey:u,createVault:f,unlockVault:m,requestAirdrop:g,handleWithdraw:x,handleWithdrawHL:v,handleWithdrawPM:w,importVault:E,addNotification:C,isImportingSolana:k,setIsImportingSolana:O,isImportingHyperliquid:j,setIsImportingHyperliquid:R,isImportingPolymarket:U,setIsImportingPolymarket:V,solanaPassword:F,setSolanaPassword:$,hyperliquidPassword:K,setHyperliquidPassword:H,polymarketPassword:B,setPolymarketPassword:A,solanaImportKey:I,setSolanaImportKey:M,hlImportKey:z,setHLImportKey:G,pmImportKey:te,setPMImportKey:Y,createSolanaVault:q,createHyperliquidVault:D,createPolymarketVault:_,importSolanaVault:W,importHyperliquidVault:X,importPolymarketVault:re,setActiveTab:ae,activeVaultTab:Ee,setActiveVaultTab:ue})=>{var St,st,Bt,Zt;const me=T.useMemo(()=>{const Ge=(t.solBalance||0)*hc.SOL,At=t.hlBalance||0,un=t.pmBalance||0;return Ge+At+un},[t.solBalance,t.hlBalance,t.pmBalance]),ce=T.useMemo(()=>{const Ge=(t.solBalance||0)*hc.SOL,At=t.hlBalance||0,un=t.pmBalance||0,Pe=Ge+At+un;return{solana:{value:Ge,percent:Pe>0?Ge/Pe*100:0},hyperliquid:{value:At,percent:Pe>0?At/Pe*100:0},polymarket:{value:un,percent:Pe>0?un/Pe*100:0},total:Pe}},[t.solBalance,t.hlBalance,t.pmBalance]);!t.publicKey&&!t.hlPublicKey||t.isUnlocked;const oe={solana:"#E7FE55",hyperliquid:"#E7FE55",polymarket:"#60a5fa"},ke=()=>{const{solana:Ge,hyperliquid:At,polymarket:un,total:Pe}=ce,[Ve,ft]=T.useState(void 0),lt=T.useMemo(()=>Pe===0?[]:[{name:"Solana",value:Ge.value,percent:Ge.percent,color:oe.solana},{name:"Hyperliquid",value:At.value,percent:At.percent,color:oe.hyperliquid},{name:"Polymarket",value:un.value,percent:un.percent,color:oe.polymarket}].filter(Z=>Z.value>0),[Ge,At,un,Pe]);if(Pe===0)return h.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[h.jsx("div",{className:"w-32 h-32 rounded-full bg-[#1a1b21] border-2 border-dashed border-[#232328] flex items-center justify-center",children:h.jsx(aw,{size:32,className:"text-[#747580]"})}),h.jsx("p",{className:"text-[#747580] text-xs mt-4",children:"No assets"})]});const se=(Z,fe)=>{ft(fe)},J=()=>{ft(void 0)};return h.jsxs("div",{className:"flex flex-col items-center justify-center h-full w-full gap-4",children:[h.jsx("div",{className:"w-full h-[180px] relative",children:h.jsx(_w,{width:"100%",height:"100%",children:h.jsxs(hde,{children:[h.jsxs("defs",{children:[h.jsxs("linearGradient",{id:"solanaGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[h.jsx("stop",{offset:"0%",stopColor:"#E7FE55",stopOpacity:.8}),h.jsx("stop",{offset:"100%",stopColor:"#E7FE55",stopOpacity:.4})]}),h.jsxs("linearGradient",{id:"hyperliquidGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[h.jsx("stop",{offset:"0%",stopColor:"#f3ffad"}),h.jsx("stop",{offset:"100%",stopColor:"#E7FE55"})]}),h.jsxs("linearGradient",{id:"polymarketGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[h.jsx("stop",{offset:"0%",stopColor:"#7db4fb"}),h.jsx("stop",{offset:"100%",stopColor:"#60a5fa"})]})]}),h.jsx(IB,{data:lt,cx:"50%",cy:"50%",innerRadius:45,outerRadius:Ve!==void 0?65:70,paddingAngle:3,dataKey:"value",onMouseEnter:se,onMouseLeave:J,animationBegin:0,animationDuration:800,animationEasing:"ease-out",children:lt.map((Z,fe)=>h.jsx(Wx,{fill:Z.color,stroke:Ve===fe?Z.color:"transparent",strokeWidth:Ve===fe?3:0,style:{cursor:"pointer",transition:"all 0.2s ease-out",filter:Ve===fe?`brightness(1.2) drop-shadow(0 0 8px ${Z.color})`:"brightness(1)",transform:Ve===fe?"scale(1.05)":"scale(1)",transformOrigin:"center"}},`cell-${fe}`))}),Ve!==void 0&&lt[Ve]&&h.jsxs("g",{children:[h.jsx("text",{x:"50%",y:"45%",textAnchor:"middle",fill:"#fff",fontSize:13,fontWeight:"bold",children:lt[Ve].name}),h.jsxs("text",{x:"50%",y:"55%",textAnchor:"middle",fill:lt[Ve].color,fontSize:16,fontWeight:"bold",fontFamily:"monospace",children:["$",lt[Ve].value.toFixed(2)]}),h.jsxs("text",{x:"50%",y:"65%",textAnchor:"middle",fill:"#747580",fontSize:10,children:[lt[Ve].percent.toFixed(1),"%"]})]})]})})}),h.jsx("div",{className:"flex flex-col gap-2 w-full",children:lt.map((Z,fe)=>h.jsxs("div",{className:`flex items-center justify-between p-2 rounded-lg transition-all cursor-pointer ${Ve===fe?"bg-[#232328]":"hover:bg-[#1a1b21]"}`,onMouseEnter:()=>ft(fe),onMouseLeave:()=>ft(void 0),children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-3 h-3 rounded-full transition-transform",style:{backgroundColor:Z.color,transform:Ve===fe?"scale(1.3)":"scale(1)",boxShadow:Ve===fe?`0 0 8px ${Z.color}`:"none"}}),h.jsx("span",{className:`text-xs transition-colors ${Ve===fe?"text-white":"text-[#747580]"}`,children:Z.name})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs("span",{className:`text-xs font-mono transition-colors ${Ve===fe?"text-white":"text-[#747580]"}`,children:["$",Z.value.toFixed(2)]}),h.jsxs("span",{className:"text-xs font-mono font-semibold",style:{color:Z.color},children:[Z.percent.toFixed(1),"%"]})]})]},Z.name))})]})},Ne=h.jsxs("div",{className:"glass-panel p-4 flex flex-col h-full",children:[h.jsxs("div",{className:"flex items-center gap-2 swiss-label text-[#E7FE55] mb-3",children:[h.jsx(OT,{size:14}),"Fast Withdraw"]}),h.jsxs("div",{className:"flex gap-1 mb-3 bg-[#0f1015] p-1 rounded",children:[h.jsx("button",{onClick:()=>o("SOL"),className:`flex-1 py-1.5 text-[10px] font-semibold uppercase tracking-wider rounded transition-all ${s==="SOL"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-white"}`,children:"SOL"}),h.jsx("button",{onClick:()=>o("HYPE"),className:`flex-1 py-1.5 text-[10px] font-semibold uppercase tracking-wider rounded transition-all ${s==="HYPE"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-white"}`,children:"HYPE"}),h.jsx("button",{onClick:()=>o("POLY"),className:`flex-1 py-1.5 text-[10px] font-semibold uppercase tracking-wider rounded transition-all ${s==="POLY"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-white"}`,children:"POLY"})]}),h.jsxs("div",{className:"flex-1 flex flex-col justify-end space-y-3",children:[h.jsxs("div",{children:[h.jsx("label",{className:"swiss-label block mb-1.5",children:"Amount"}),h.jsxs("div",{className:"flex items-center relative",children:[h.jsx("input",{type:"number",value:r,onChange:Ge=>i(Ge.target.value),className:"w-full bg-[#0f1015] border border-[#232328] rounded pl-3 pr-12 py-2.5 text-sm text-white focus:ring-1 outline-none transition-all focus:ring-[#E7FE55]",placeholder:"0.00"}),h.jsx("button",{onClick:()=>{i(s==="SOL"?Math.max(0,t.solBalance-.005).toFixed(4):s==="HYPE"?Math.max(0,(t.hlBalance||0)-1).toFixed(2):Math.max(0,t.pmBalance||0).toFixed(2))},className:"absolute right-2 text-[9px] font-semibold px-1.5 py-0.5 rounded bg-[#E7FE55]/20 text-[#E7FE55]",children:"MAX"})]})]}),h.jsxs("button",{onClick:s==="SOL"?x:s==="HYPE"?v:w,disabled:s==="SOL"&&!t.publicKey||s==="HYPE"&&!t.hlPublicKey||s==="POLY"&&!t.pmPublicKey,className:`w-full font-semibold py-2.5 rounded transition-all flex items-center justify-center gap-2 text-xs ${s==="SOL"&&t.publicKey||s==="HYPE"&&t.hlPublicKey||s==="POLY"&&t.pmPublicKey?"bg-[#E7FE55] hover:brightness-110 text-black":"bg-[#1a1b21] text-[#747580] cursor-not-allowed"}`,children:[h.jsx(OT,{size:14}),s==="SOL"?"Withdraw SOL":"Withdraw USDC"]})]})]}),ze=h.jsxs("div",{className:"flex flex-col gap-6 flex-1",children:[h.jsxs("div",{className:"glass-panel glass-panel-solana p-4",children:[h.jsxs("div",{className:"flex items-center gap-2 swiss-label text-[#9b87f5] mb-3",children:[h.jsx("img",{src:Xf[0].logoURI,alt:"SOL",className:"w-4 h-4 rounded-full"}),"Solana Vault"]}),t.publicKey?h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"bg-[#0f1015] p-2 rounded border border-[#232328] flex items-center justify-between",children:[h.jsx("code",{className:"text-[10px] text-[#747580] font-mono truncate max-w-[200px]",children:t.publicKey}),h.jsx("button",{onClick:()=>{navigator.clipboard.writeText(t.publicKey),C("Copied!")},className:"text-[#747580] hover:text-white",children:h.jsx(Og,{size:12})})]}),h.jsxs("div",{className:"flex justify-between items-end",children:[h.jsxs("div",{children:[h.jsx("div",{className:"swiss-label",children:"Balance"}),h.jsxs("div",{className:"text-xl font-bold text-white leading-none mt-1",children:[t.solBalance.toFixed(4)," ",h.jsx("span",{className:"text-xs text-[#747580]",children:"SOL"})]})]}),h.jsxs("div",{className:"text-xs text-[#9b87f5] font-mono",children:[" $",(t.solBalance*hc.SOL).toFixed(2)]})]})]}):h.jsxs("div",{className:"space-y-3 p-3 bg-[#0f1015] rounded border border-[#232328]",children:[h.jsx("p",{className:"text-xs text-[#747580]",children:"No Solana wallet found."}),h.jsx("input",{type:"password",value:F,onChange:Ge=>$(Ge.target.value),className:"w-full bg-[#14151a] border border-[#232328] rounded px-2 py-1.5 text-xs text-white focus:ring-1 focus:ring-[#9b87f5] outline-none",placeholder:"Password..."}),k&&h.jsx("input",{type:"password",value:I,onChange:Ge=>M(Ge.target.value),className:"w-full bg-[#14151a] border border-[#232328] rounded px-2 py-1.5 text-xs text-white focus:ring-1 focus:ring-[#9b87f5] outline-none font-mono",placeholder:"Private Key..."}),h.jsx("div",{className:"flex gap-2",children:k?h.jsxs(h.Fragment,{children:[h.jsx("button",{onClick:W,className:"flex-1 bg-[#9b87f5] hover:bg-[#a896f7] text-white text-xs font-semibold py-1.5 rounded",children:"Confirm"}),h.jsx("button",{onClick:()=>O(!1),className:"px-2 py-1.5 text-[#747580] text-xs hover:text-white",children:"Cancel"})]}):h.jsxs(h.Fragment,{children:[h.jsxs("button",{onClick:q,className:"flex-1 bg-[#9b87f5] hover:bg-[#a896f7] text-white text-xs font-semibold py-1.5 rounded flex items-center justify-center gap-1",children:[h.jsx(vu,{size:12})," New"]}),h.jsxs("button",{onClick:()=>O(!0),className:"flex-1 bg-[#1a1b21] hover:bg-[#232328] text-white text-xs font-semibold py-1.5 rounded flex items-center justify-center gap-1 border border-[#232328]",children:[h.jsx(Bo,{size:12})," Import"]})]})})]})]}),t.publicKey&&h.jsxs("div",{className:"glass-panel glass-panel-solana flex flex-col overflow-hidden flex-1",children:[h.jsxs("div",{className:"px-4 py-3 border-b border-[#232328] flex items-center justify-between bg-[#0f1015]/50",children:[h.jsxs("div",{className:"flex items-center gap-2 swiss-label text-[#9b87f5]",children:[h.jsx(Cc,{size:12})," Solana Assets"]}),h.jsxs("span",{className:"text-[10px] text-[#747580] font-mono",children:[((St=t.assets)==null?void 0:St.filter(Ge=>!Ge.isNft&&Ge.symbol!=="SOL").length)||0," Assets"]})]}),h.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:h.jsxs("table",{className:"swiss-table w-full",children:[h.jsx("thead",{className:"sticky top-0 bg-[#0f1015]/90 backdrop-blur-sm",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-4",children:"Asset"}),h.jsx("th",{className:"px-4 text-right",children:"Balance"}),h.jsx("th",{className:"px-4 text-right",children:"Value"})]})}),h.jsxs("tbody",{children:[h.jsxs("tr",{children:[h.jsx("td",{className:"px-4",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-6 h-6 rounded bg-[#1a1b21] flex items-center justify-center",children:h.jsx("img",{src:Xf[0].logoURI,alt:"SOL",className:"w-4 h-4 rounded-full"})}),h.jsxs("div",{className:"flex flex-col",children:[h.jsx("span",{className:"text-xs font-semibold text-white leading-none",children:"SOL"}),h.jsx("span",{className:"text-[9px] text-[#747580]",children:"Native"})]})]})}),h.jsx("td",{className:"px-4 text-right font-mono text-xs text-slate-300",children:t.solBalance.toFixed(4)}),h.jsxs("td",{className:"px-4 text-right font-mono text-xs text-[#9b87f5]",children:["$",(t.solBalance*hc.SOL).toFixed(2)]})]}),t.assets&&t.assets.filter(Ge=>!Ge.isNft&&Ge.symbol!=="SOL").length>0?t.assets.filter(Ge=>!Ge.isNft&&Ge.symbol!=="SOL").map((Ge,At)=>h.jsxs("tr",{children:[h.jsx("td",{className:"px-4",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-6 h-6 rounded bg-[#1a1b21] flex items-center justify-center text-[10px] font-bold text-[#747580] border border-[#232328]",children:Ge.symbol[0]}),h.jsxs("div",{className:"flex flex-col",children:[h.jsx("span",{className:"text-xs font-semibold text-white leading-none",children:Ge.symbol}),h.jsx("span",{className:"text-[9px] text-[#747580] truncate max-w-[60px]",children:Ge.name})]})]})}),h.jsx("td",{className:"px-4 text-right font-mono text-xs text-slate-300",children:(parseFloat(Ge.amount)/Math.pow(10,Ge.decimals)).toFixed(4)}),h.jsx("td",{className:"px-4 text-right font-mono text-xs text-[#34d399]",children:Ge.symbol!=="UNKNOWN"?`$${(parseFloat(Ge.amount)/Math.pow(10,Ge.decimals)*(hc[Ge.symbol]||0)).toFixed(2)}`:"-"})]},At)):null]})]})})]})]}),Ze=h.jsxs("div",{className:"flex flex-col gap-6 flex-1",children:[h.jsxs("div",{className:"glass-panel glass-panel-hyperliquid p-4",children:[h.jsxs("div",{className:"flex items-center gap-2 swiss-label text-[#34d399] mb-3",children:[h.jsx(Rn,{size:14}),"Hyperliquid Vault"]}),t.hlPublicKey?h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"bg-[#0f1015] p-2 rounded border border-[#232328] flex items-center justify-between",children:[h.jsx("code",{className:"text-[10px] text-[#747580] font-mono truncate max-w-[200px]",children:t.hlPublicKey}),h.jsx("button",{onClick:()=>{t.hlPublicKey&&(navigator.clipboard.writeText(t.hlPublicKey),C("Copied!"))},className:"text-[#747580] hover:text-white",children:h.jsx(Og,{size:12})})]}),h.jsxs("div",{className:"flex justify-between items-end",children:[h.jsxs("div",{children:[h.jsx("div",{className:"swiss-label",children:"Balance"}),h.jsxs("div",{className:"text-xl font-bold text-white leading-none mt-1",children:[((st=t.hlBalance)==null?void 0:st.toFixed(2))||"0.00"," ",h.jsx("span",{className:"text-xs text-[#747580]",children:"USDC"})]})]}),h.jsx("div",{className:"text-xs text-[#E7FE55] font-mono",children:"Testnet"})]})]}):h.jsxs("div",{className:"space-y-3 p-3 bg-[#0f1015] rounded border border-[#232328]",children:[h.jsx("p",{className:"text-xs text-[#747580]",children:"No Hyperliquid wallet found."}),h.jsx("input",{type:"password",value:K,onChange:Ge=>H(Ge.target.value),className:"w-full bg-[#14151a] border border-[#232328] rounded px-2 py-1.5 text-xs text-white focus:ring-1 focus:ring-[#E7FE55] outline-none",placeholder:"Password..."}),j&&h.jsx("input",{type:"password",value:z,onChange:Ge=>G(Ge.target.value),className:"w-full bg-[#14151a] border border-[#232328] rounded px-2 py-1.5 text-xs text-white focus:ring-1 focus:ring-[#E7FE55] outline-none font-mono",placeholder:"PrivKey (0x...)..."}),h.jsx("div",{className:"flex gap-2",children:j?h.jsxs(h.Fragment,{children:[h.jsx("button",{onClick:X,className:"flex-1 bg-[#E7FE55] hover:brightness-110 text-black text-xs font-semibold py-1.5 rounded",children:"Confirm"}),h.jsx("button",{onClick:()=>R(!1),className:"px-2 py-1.5 text-[#747580] text-xs hover:text-white",children:"Cancel"})]}):h.jsxs(h.Fragment,{children:[h.jsxs("button",{onClick:D,className:"flex-1 bg-[#E7FE55] hover:brightness-110 text-black text-xs font-semibold py-1.5 rounded flex items-center justify-center gap-1",children:[h.jsx(vu,{size:12})," New"]}),h.jsxs("button",{onClick:()=>R(!0),className:"flex-1 bg-[#1a1b21] hover:bg-[#232328] text-white text-xs font-semibold py-1.5 rounded flex items-center justify-center gap-1 border border-[#232328]",children:[h.jsx(Bo,{size:12})," Import"]})]})})]})]}),t.hlPublicKey&&h.jsxs("div",{className:"glass-panel glass-panel-hyperliquid flex flex-col overflow-hidden flex-1",children:[h.jsxs("div",{className:"px-4 py-3 border-b border-[#232328] flex items-center justify-between bg-[#0f1015]/50",children:[h.jsxs("div",{className:"flex items-center gap-2 swiss-label text-[#34d399]",children:[h.jsx(Rn,{size:12})," Active Positions"]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs("span",{className:"text-[10px] text-[#747580] font-mono",children:[((Bt=t.hlPositions)==null?void 0:Bt.filter(Ge=>parseFloat(Ge.position.szi)!==0).length)||0," Open"]}),h.jsxs("button",{onClick:()=>ae(Ce.HYPERLIQUID),className:"text-[10px] bg-[#E7FE55]/15 hover:bg-[#E7FE55]/25 text-[#E7FE55] border border-[#E7FE55]/30 px-2 py-1 rounded transition-colors flex items-center gap-1",children:[h.jsx(Rn,{size:10}),"Details"]})]})]}),h.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:h.jsxs("table",{className:"swiss-table w-full",children:[h.jsx("thead",{className:"sticky top-0 bg-[#0f1015]/90 backdrop-blur-sm",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-3",children:"Ticker"}),h.jsx("th",{className:"px-3",children:"Side"}),h.jsx("th",{className:"px-3 text-right",children:"Size"}),h.jsx("th",{className:"px-3 text-right",children:"PnL"})]})}),h.jsx("tbody",{children:t.hlPositions&&t.hlPositions.filter(Ge=>parseFloat(Ge.position.szi)!==0).length>0?t.hlPositions.filter(Ge=>parseFloat(Ge.position.szi)!==0).map((Ge,At)=>{const un=parseFloat(Ge.position.szi),Pe=un>0,Ve=parseFloat(Ge.position.unrealizedPnl||"0");return h.jsxs("tr",{children:[h.jsx("td",{className:"px-3",children:h.jsx("span",{className:"text-xs font-semibold text-white",children:Ge.position.coin})}),h.jsx("td",{className:"px-3",children:h.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded font-semibold ${Pe?"bg-[#34d399]/15 text-[#34d399]":"bg-red-500/15 text-red-400"}`,children:Pe?"LONG":"SHORT"})}),h.jsx("td",{className:"px-3 text-right font-mono text-xs text-slate-300",children:Math.abs(un).toFixed(4)}),h.jsxs("td",{className:`px-3 text-right font-mono text-xs font-semibold ${Ve>=0?"text-[#34d399]":"text-red-400"}`,children:[Ve>=0?"+":"",Ve.toFixed(2)]})]},`hl-${At}`)}):h.jsx("tr",{children:h.jsx("td",{colSpan:4,className:"px-4 py-8 text-center text-[#747580] text-xs italic",children:"No active positions."})})})]})})]})]}),Ye=h.jsxs("div",{className:"flex flex-col gap-6 flex-1",children:[h.jsxs("div",{className:"glass-panel glass-panel-polymarket p-4",children:[h.jsxs("div",{className:"flex items-center gap-2 swiss-label text-[#60a5fa] mb-3",children:[h.jsx(yl,{size:14}),"Polymarket Vault"]}),t.pmPublicKey?h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"bg-[#0f1015] p-2 rounded border border-[#232328] flex items-center justify-between",children:[h.jsx("code",{className:"text-[10px] text-[#747580] font-mono truncate max-w-[200px]",children:t.pmPublicKey}),h.jsx("button",{onClick:()=>{t.pmPublicKey&&(navigator.clipboard.writeText(t.pmPublicKey),C("Copied!"))},className:"text-[#747580] hover:text-white",children:h.jsx(Og,{size:12})})]}),h.jsxs("div",{className:"flex justify-between items-end",children:[h.jsxs("div",{children:[h.jsx("div",{className:"swiss-label",children:"Balance"}),h.jsxs("div",{className:"text-xl font-bold text-white leading-none mt-1",children:[((Zt=t.pmBalance)==null?void 0:Zt.toFixed(2))||"0.00"," ",h.jsx("span",{className:"text-xs text-[#747580]",children:"USDC"})]})]}),h.jsx("div",{className:"text-xs text-[#60a5fa] font-mono",children:"Polygon"})]})]}):h.jsxs("div",{className:"space-y-3 p-3 bg-[#0f1015] rounded border border-[#232328]",children:[h.jsx("p",{className:"text-xs text-[#747580]",children:"No Polymarket wallet found."}),h.jsx("input",{type:"password",value:B,onChange:Ge=>A(Ge.target.value),className:"w-full bg-[#14151a] border border-[#232328] rounded px-2 py-1.5 text-xs text-white focus:ring-1 focus:ring-[#60a5fa] outline-none",placeholder:"Password..."}),U&&h.jsx("input",{type:"password",value:te,onChange:Ge=>Y(Ge.target.value),className:"w-full bg-[#14151a] border border-[#232328] rounded px-2 py-1.5 text-xs text-white focus:ring-1 focus:ring-[#60a5fa] outline-none font-mono",placeholder:"PrivKey (0x...)..."}),h.jsx("div",{className:"flex gap-2",children:U?h.jsxs(h.Fragment,{children:[h.jsx("button",{onClick:re,className:"flex-1 bg-[#60a5fa] hover:bg-[#7db4fb] text-white text-xs font-semibold py-1.5 rounded",children:"Confirm"}),h.jsx("button",{onClick:()=>V(!1),className:"px-2 py-1.5 text-[#747580] text-xs hover:text-white",children:"Cancel"})]}):h.jsxs(h.Fragment,{children:[h.jsxs("button",{onClick:_,className:"flex-1 bg-[#60a5fa] hover:bg-[#7db4fb] text-white text-xs font-semibold py-1.5 rounded flex items-center justify-center gap-1",children:[h.jsx(vu,{size:12})," New"]}),h.jsxs("button",{onClick:()=>V(!0),className:"flex-1 bg-[#1a1b21] hover:bg-[#232328] text-white text-xs font-semibold py-1.5 rounded flex items-center justify-center gap-1 border border-[#232328]",children:[h.jsx(Bo,{size:12})," Import"]})]})})]})]}),t.pmPublicKey&&h.jsxs("div",{className:"glass-panel glass-panel-polymarket flex flex-col overflow-hidden flex-1",children:[h.jsxs("div",{className:"px-4 py-3 border-b border-[#232328] flex items-center justify-between bg-[#0f1015]/50",children:[h.jsxs("div",{className:"flex items-center gap-2 swiss-label text-[#60a5fa]",children:[h.jsx(yl,{size:12})," Market Positions"]}),h.jsxs("button",{onClick:()=>ae(Ce.POLYMARKET_DASHBOARD),className:"text-[10px] bg-[#60a5fa]/15 hover:bg-[#60a5fa]/25 text-[#60a5fa] border border-[#60a5fa]/30 px-2 py-1 rounded transition-colors flex items-center gap-1",children:[h.jsx(yl,{size:10}),"Details"]})]}),h.jsx("div",{className:"flex-1 flex items-center justify-center p-8",children:h.jsx("p",{className:"text-xs text-[#747580] text-center",children:"View your Polymarket positions in the Polymarket Dealer dashboard."})})]})]}),We=h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 flex-1",children:[h.jsxs("div",{className:"glass-panel p-4 flex flex-col",children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsxs("div",{className:"flex items-center gap-2 swiss-label text-white",children:[h.jsx(aw,{size:14}),"Asset Allocation"]}),h.jsxs("div",{className:"text-right",children:[h.jsx("div",{className:"text-[10px] text-[#747580] uppercase tracking-wider",children:"Net Worth"}),h.jsxs("div",{className:"text-lg font-bold font-mono text-white",children:["$",me.toFixed(2)]})]})]}),h.jsx("div",{className:"flex-1 flex items-center justify-center min-h-[200px]",children:h.jsx(ke,{})})]}),Ne]});return h.jsx("div",{className:"h-full flex flex-col gap-6 overflow-y-auto custom-scrollbar p-1",children:!t.publicKey&&!t.hlPublicKey?h.jsxs(rn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-2xl mx-auto relative z-10 flex flex-col items-center justify-center flex-1",children:[h.jsxs(rn.div,{initial:{scale:.8},animate:{scale:1},transition:{type:"spring",stiffness:200,damping:20},className:"w-20 h-20 glass-panel rounded-full flex items-center justify-center mb-6 border-[#E7FE55]/30 relative group",children:[h.jsx("div",{className:"absolute inset-0 bg-[#E7FE55]/5 rounded-full blur-xl group-hover:bg-[#E7FE55]/10 transition-colors"}),h.jsx(lw,{size:32,className:"text-[#E7FE55] relative z-10"})]}),h.jsx("h2",{className:"text-3xl font-bold text-white mb-2 text-center tracking-tight",children:"Configure Your Vault"}),h.jsx("p",{className:"text-[#747580] text-center mb-8 text-sm",children:"Securely manage your assets across multiple networks."}),h.jsxs("div",{className:"w-full grid grid-cols-1 md:grid-cols-3 gap-6",children:[h.jsxs("div",{className:"glass-panel glass-panel-solana p-6 space-y-4 border-[#9b87f5]/20 transition-transform duration-200 hover:-translate-y-1",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsx("div",{className:"w-10 h-10 bg-[#9b87f5]/10 rounded-lg flex items-center justify-center border border-[#9b87f5]/20",children:h.jsx("img",{src:Xf[0].logoURI,alt:"SOL",className:"w-5 h-5 rounded-full"})}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-white font-semibold",children:"Solana"}),h.jsx("span",{className:"text-[10px] text-[#9b87f5] uppercase tracking-widest font-bold",children:"Devnet"})]})]}),h.jsx("input",{type:"password",value:F,onChange:Ge=>$(Ge.target.value),className:"w-full bg-[#0f1015]/50 border border-[#232328] rounded-md px-3 py-3 text-white text-sm focus:ring-1 focus:ring-[#9b87f5]/50 outline-none transition-all placeholder:text-[#747580]",placeholder:"Wallet Password"}),k&&h.jsx("input",{type:"password",value:I,onChange:Ge=>M(Ge.target.value),className:"w-full bg-[#0f1015]/50 border border-[#232328] rounded-md px-3 py-3 text-white text-sm focus:ring-1 focus:ring-[#9b87f5]/50 outline-none transition-all font-mono placeholder:text-[#747580]",placeholder:"Private Key (Base58)"}),h.jsx("div",{className:"flex gap-2",children:k?h.jsxs(h.Fragment,{children:[h.jsxs("button",{onClick:W,className:"flex-1 bg-[#9b87f5] hover:bg-[#a896f7] text-white font-bold py-3 rounded-md transition-all flex items-center justify-center gap-2 text-xs uppercase tracking-wider",children:[h.jsx(Bo,{size:14})," Import"]}),h.jsx("button",{onClick:()=>O(!1),className:"px-3 py-3 text-[#747580] hover:text-white text-xs font-semibold",children:"Cancel"})]}):h.jsxs(h.Fragment,{children:[h.jsxs("button",{onClick:q,className:"flex-1 bg-[#9b87f5] hover:bg-[#a896f7] text-white font-bold py-3 rounded-md transition-all flex items-center justify-center gap-2 text-xs uppercase tracking-wider",children:[h.jsx(vu,{size:14})," Create"]}),h.jsxs("button",{onClick:()=>O(!0),className:"flex-1 bg-[#1a1b21] hover:bg-[#232328] text-white font-bold py-3 rounded-md transition-all flex items-center justify-center gap-2 text-xs uppercase tracking-wider border border-[#232328]",children:[h.jsx(Bo,{size:14})," Import"]})]})})]}),h.jsxs("div",{className:"glass-panel p-6 space-y-4 border-[#34d399]/20 transition-transform duration-200 hover:-translate-y-1",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsx("div",{className:"w-10 h-10 bg-[#34d399]/10 rounded-lg flex items-center justify-center border border-[#34d399]/20",children:h.jsx(Rn,{size:20,className:"text-[#34d399]"})}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-white font-semibold",children:"Hyperliquid"}),h.jsx("span",{className:"text-[10px] text-[#34d399] uppercase tracking-widest font-bold",children:"Testnet"})]})]}),h.jsx("input",{type:"password",value:K,onChange:Ge=>H(Ge.target.value),className:"w-full bg-[#0f1015]/50 border border-[#232328] rounded-md px-3 py-3 text-white text-sm focus:ring-1 focus:ring-[#34d399]/50 outline-none transition-all placeholder:text-[#747580]",placeholder:"Wallet Password"}),j&&h.jsx("input",{type:"password",value:z,onChange:Ge=>G(Ge.target.value),className:"w-full bg-[#0f1015]/50 border border-[#232328] rounded-md px-3 py-3 text-white text-sm focus:ring-1 focus:ring-[#34d399]/50 outline-none transition-all font-mono placeholder:text-[#747580]",placeholder:"Private Key (0x...)"}),h.jsx("div",{className:"flex gap-2",children:j?h.jsxs(h.Fragment,{children:[h.jsxs("button",{onClick:X,className:"flex-1 bg-[#34d399] hover:bg-[#4ade80] text-white font-bold py-3 rounded-md transition-all flex items-center justify-center gap-2 text-xs uppercase tracking-wider",children:[h.jsx(Bo,{size:14})," Import"]}),h.jsx("button",{onClick:()=>R(!1),className:"px-3 py-3 text-[#747580] hover:text-white text-xs font-semibold",children:"Cancel"})]}):h.jsxs(h.Fragment,{children:[h.jsxs("button",{onClick:D,className:"flex-1 bg-[#34d399] hover:bg-[#4ade80] text-white font-bold py-3 rounded-md transition-all flex items-center justify-center gap-2 text-xs uppercase tracking-wider",children:[h.jsx(vu,{size:14})," Create"]}),h.jsxs("button",{onClick:()=>R(!0),className:"flex-1 bg-[#1a1b21] hover:bg-[#232328] text-white font-bold py-3 rounded-md transition-all flex items-center justify-center gap-2 text-xs uppercase tracking-wider border border-[#232328]",children:[h.jsx(Bo,{size:14})," Import"]})]})})]}),h.jsxs("div",{className:"glass-panel glass-panel-polymarket p-6 space-y-4 border-[#60a5fa]/20 transition-transform duration-200 hover:-translate-y-1",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsx("div",{className:"w-10 h-10 bg-[#60a5fa]/10 rounded-lg flex items-center justify-center border border-[#60a5fa]/20",children:h.jsx(yl,{size:20,className:"text-[#60a5fa]"})}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-white font-semibold",children:"Polymarket"}),h.jsx("span",{className:"text-[10px] text-[#60a5fa] uppercase tracking-widest font-bold",children:"Polygon"})]})]}),h.jsx("input",{type:"password",value:B,onChange:Ge=>A(Ge.target.value),className:"w-full bg-[#0f1015]/50 border border-[#232328] rounded-md px-3 py-3 text-white text-sm focus:ring-1 focus:ring-[#60a5fa]/50 outline-none transition-all placeholder:text-[#747580]",placeholder:"Wallet Password"}),U&&h.jsx("input",{type:"password",value:te,onChange:Ge=>Y(Ge.target.value),className:"w-full bg-[#0f1015]/50 border border-[#232328] rounded-md px-3 py-3 text-white text-sm focus:ring-1 focus:ring-[#60a5fa]/50 outline-none transition-all font-mono placeholder:text-[#747580]",placeholder:"Private Key (0x...)"}),h.jsx("div",{className:"flex gap-2",children:U?h.jsxs(h.Fragment,{children:[h.jsxs("button",{onClick:re,className:"flex-1 bg-[#60a5fa] hover:bg-[#7db4fb] text-white font-bold py-3 rounded-md transition-all flex items-center justify-center gap-2 text-xs uppercase tracking-wider",children:[h.jsx(Bo,{size:14})," Import"]}),h.jsx("button",{onClick:()=>V(!1),className:"px-3 py-3 text-[#747580] hover:text-white text-xs font-semibold",children:"Cancel"})]}):h.jsxs(h.Fragment,{children:[h.jsxs("button",{onClick:_,className:"flex-1 bg-[#60a5fa] hover:bg-[#7db4fb] text-white font-bold py-3 rounded-md transition-all flex items-center justify-center gap-2 text-xs uppercase tracking-wider",children:[h.jsx(vu,{size:14})," Create"]}),h.jsxs("button",{onClick:()=>V(!0),className:"flex-1 bg-[#1a1b21] hover:bg-[#232328] text-white font-bold py-3 rounded-md transition-all flex items-center justify-center gap-2 text-xs uppercase tracking-wider border border-[#232328]",children:[h.jsx(Bo,{size:14})," Import"]})]})})]})]}),h.jsx("p",{className:"text-xs text-[#747580] mt-8 text-center max-w-sm",children:"Wallets are stored locally and encrypted. Never share your private keys or password."})]}):t.isUnlocked?h.jsxs("div",{className:"flex flex-col gap-6 flex-1",children:[Ee==="main"&&We,Ee==="solana"&&ze,Ee==="hyperliquid"&&Ze,Ee==="polymarket"&&Ye]}):h.jsxs(rn.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.4},className:"max-w-md mx-auto relative z-10 flex flex-col items-center justify-center flex-1 w-full",children:[h.jsxs(rn.div,{animate:{rotate:[0,-10,10,-10,10,0]},transition:{delay:.5,duration:.5,ease:"easeInOut"},className:"w-24 h-24 glass-panel rounded-full flex items-center justify-center mb-8 border-[#E7FE55]/30 relative",children:[h.jsx("div",{className:"absolute inset-0 bg-[#E7FE55]/10 rounded-full blur-2xl animate-pulse"}),h.jsx(lw,{size:40,className:"text-[#E7FE55] relative z-10"})]}),h.jsx("h2",{className:"text-3xl font-bold text-white mb-2 text-center tracking-tight",children:"Vault Locked"}),h.jsx("p",{className:"text-[#747580] text-center mb-10 text-sm",children:"Authentication required to access your assets."}),h.jsxs("div",{className:"w-full glass-panel p-8 space-y-6 border-[#E7FE55]/10 shadow-2xl",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"swiss-label px-1",children:"Security Password"}),h.jsx("input",{type:"password",value:e,onChange:Ge=>n(Ge.target.value),className:"w-full bg-[#0f1015]/80 border border-[#232328] rounded-md px-4 py-4 text-white focus:ring-1 focus:ring-[#E7FE55]/50 outline-none transition-all placeholder:text-[#333540] text-lg font-mono",placeholder:"",onKeyDown:Ge=>Ge.key==="Enter"&&m()})]}),h.jsxs("button",{onClick:m,className:"w-full bg-[#E7FE55] hover:brightness-110 active:scale-[0.98] text-black font-bold py-4 rounded-md transition-all flex items-center justify-center gap-2 text-sm uppercase tracking-widest",children:[h.jsx(une,{size:18})," Unlock Vault"]})]})]})})};function EGe(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const SGe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,AGe=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,TGe={};function XY(t,e){return(TGe.jsx?AGe:SGe).test(t)}const kGe=/[ \t\n\f\r]/g;function CGe(t){return typeof t=="object"?t.type==="text"?QY(t.value):!1:QY(t)}function QY(t){return t.replace(kGe,"")===""}class eE{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}}eE.prototype.normal={};eE.prototype.property={};eE.prototype.space=void 0;function mde(t,e){const n={},r={};for(const i of t)Object.assign(n,i.property),Object.assign(r,i.normal);return new eE(n,r,e)}function dD(t){return t.toLowerCase()}class xo{constructor(e,n){this.attribute=n,this.property=e}}xo.prototype.attribute="";xo.prototype.booleanish=!1;xo.prototype.boolean=!1;xo.prototype.commaOrSpaceSeparated=!1;xo.prototype.commaSeparated=!1;xo.prototype.defined=!1;xo.prototype.mustUseProperty=!1;xo.prototype.number=!1;xo.prototype.overloadedBoolean=!1;xo.prototype.property="";xo.prototype.spaceSeparated=!1;xo.prototype.space=void 0;let NGe=0;const fn=Dm(),ci=Dm(),fD=Dm(),ot=Dm(),hr=Dm(),qg=Dm(),Po=Dm();function Dm(){return 2**++NGe}const hD=Object.freeze(Object.defineProperty({__proto__:null,boolean:fn,booleanish:ci,commaOrSpaceSeparated:Po,commaSeparated:qg,number:ot,overloadedBoolean:fD,spaceSeparated:hr},Symbol.toStringTag,{value:"Module"})),A5=Object.keys(hD);class FB extends xo{constructor(e,n,r,i){let s=-1;if(super(e,n),ZY(this,"space",i),typeof r=="number")for(;++s<A5.length;){const o=A5[s];ZY(this,A5[s],(r&hD[o])===hD[o])}}}FB.prototype.defined=!0;function ZY(t,e,n){n&&(t[e]=n)}function Yx(t){const e={},n={};for(const[r,i]of Object.entries(t.properties)){const s=new FB(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),e[r]=s,n[dD(r)]=r,n[dD(s.attribute)]=r}return new eE(e,n,t.space)}const gde=Yx({properties:{ariaActiveDescendant:null,ariaAtomic:ci,ariaAutoComplete:null,ariaBusy:ci,ariaChecked:ci,ariaColCount:ot,ariaColIndex:ot,ariaColSpan:ot,ariaControls:hr,ariaCurrent:null,ariaDescribedBy:hr,ariaDetails:null,ariaDisabled:ci,ariaDropEffect:hr,ariaErrorMessage:null,ariaExpanded:ci,ariaFlowTo:hr,ariaGrabbed:ci,ariaHasPopup:null,ariaHidden:ci,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:hr,ariaLevel:ot,ariaLive:null,ariaModal:ci,ariaMultiLine:ci,ariaMultiSelectable:ci,ariaOrientation:null,ariaOwns:hr,ariaPlaceholder:null,ariaPosInSet:ot,ariaPressed:ci,ariaReadOnly:ci,ariaRelevant:null,ariaRequired:ci,ariaRoleDescription:hr,ariaRowCount:ot,ariaRowIndex:ot,ariaRowSpan:ot,ariaSelected:ci,ariaSetSize:ot,ariaSort:null,ariaValueMax:ot,ariaValueMin:ot,ariaValueNow:ot,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function yde(t,e){return e in t?t[e]:e}function xde(t,e){return yde(t,e.toLowerCase())}const _Ge=Yx({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:qg,acceptCharset:hr,accessKey:hr,action:null,allow:null,allowFullScreen:fn,allowPaymentRequest:fn,allowUserMedia:fn,alt:null,as:null,async:fn,autoCapitalize:null,autoComplete:hr,autoFocus:fn,autoPlay:fn,blocking:hr,capture:null,charSet:null,checked:fn,cite:null,className:hr,cols:ot,colSpan:null,content:null,contentEditable:ci,controls:fn,controlsList:hr,coords:ot|qg,crossOrigin:null,data:null,dateTime:null,decoding:null,default:fn,defer:fn,dir:null,dirName:null,disabled:fn,download:fD,draggable:ci,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:fn,formTarget:null,headers:hr,height:ot,hidden:fD,high:ot,href:null,hrefLang:null,htmlFor:hr,httpEquiv:hr,id:null,imageSizes:null,imageSrcSet:null,inert:fn,inputMode:null,integrity:null,is:null,isMap:fn,itemId:null,itemProp:hr,itemRef:hr,itemScope:fn,itemType:hr,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:fn,low:ot,manifest:null,max:null,maxLength:ot,media:null,method:null,min:null,minLength:ot,multiple:fn,muted:fn,name:null,nonce:null,noModule:fn,noValidate:fn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:fn,optimum:ot,pattern:null,ping:hr,placeholder:null,playsInline:fn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:fn,referrerPolicy:null,rel:hr,required:fn,reversed:fn,rows:ot,rowSpan:ot,sandbox:hr,scope:null,scoped:fn,seamless:fn,selected:fn,shadowRootClonable:fn,shadowRootDelegatesFocus:fn,shadowRootMode:null,shape:null,size:ot,sizes:null,slot:null,span:ot,spellCheck:ci,src:null,srcDoc:null,srcLang:null,srcSet:null,start:ot,step:null,style:null,tabIndex:ot,target:null,title:null,translate:null,type:null,typeMustMatch:fn,useMap:null,value:ci,width:ot,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:hr,axis:null,background:null,bgColor:null,border:ot,borderColor:null,bottomMargin:ot,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:fn,declare:fn,event:null,face:null,frame:null,frameBorder:null,hSpace:ot,leftMargin:ot,link:null,longDesc:null,lowSrc:null,marginHeight:ot,marginWidth:ot,noResize:fn,noHref:fn,noShade:fn,noWrap:fn,object:null,profile:null,prompt:null,rev:null,rightMargin:ot,rules:null,scheme:null,scrolling:ci,standby:null,summary:null,text:null,topMargin:ot,valueType:null,version:null,vAlign:null,vLink:null,vSpace:ot,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:fn,disableRemotePlayback:fn,prefix:null,property:null,results:ot,security:null,unselectable:null},space:"html",transform:xde}),IGe=Yx({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Po,accentHeight:ot,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:ot,amplitude:ot,arabicForm:null,ascent:ot,attributeName:null,attributeType:null,azimuth:ot,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:ot,by:null,calcMode:null,capHeight:ot,className:hr,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:ot,diffuseConstant:ot,direction:null,display:null,dur:null,divisor:ot,dominantBaseline:null,download:fn,dx:null,dy:null,edgeMode:null,editable:null,elevation:ot,enableBackground:null,end:null,event:null,exponent:ot,externalResourcesRequired:null,fill:null,fillOpacity:ot,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:qg,g2:qg,glyphName:qg,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:ot,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:ot,horizOriginX:ot,horizOriginY:ot,id:null,ideographic:ot,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:ot,k:ot,k1:ot,k2:ot,k3:ot,k4:ot,kernelMatrix:Po,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:ot,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:ot,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:ot,overlineThickness:ot,paintOrder:null,panose1:null,path:null,pathLength:ot,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:hr,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:ot,pointsAtY:ot,pointsAtZ:ot,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Po,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Po,rev:Po,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Po,requiredFeatures:Po,requiredFonts:Po,requiredFormats:Po,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:ot,specularExponent:ot,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:ot,strikethroughThickness:ot,string:null,stroke:null,strokeDashArray:Po,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:ot,strokeOpacity:ot,strokeWidth:null,style:null,surfaceScale:ot,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Po,tabIndex:ot,tableValues:null,target:null,targetX:ot,targetY:ot,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Po,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:ot,underlineThickness:ot,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:ot,values:null,vAlphabetic:ot,vMathematical:ot,vectorEffect:null,vHanging:ot,vIdeographic:ot,version:null,vertAdvY:ot,vertOriginX:ot,vertOriginY:ot,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:ot,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:yde}),vde=Yx({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),bde=Yx({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:xde}),wde=Yx({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),PGe={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},RGe=/[A-Z]/g,eJ=/-[a-z]/g,OGe=/^data[-\w.:]+$/i;function MGe(t,e){const n=dD(e);let r=e,i=xo;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&OGe.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(eJ,LGe);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!eJ.test(s)){let o=s.replace(RGe,DGe);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=FB}return new i(r,e)}function DGe(t){return"-"+t.toLowerCase()}function LGe(t){return t.charAt(1).toUpperCase()}const BGe=mde([gde,_Ge,vde,bde,wde],"html"),$B=mde([gde,IGe,vde,bde,wde],"svg");function jGe(t){return t.join(" ").trim()}var $0={},T5,tJ;function UGe(){if(tJ)return T5;tJ=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,a=/^\s+|\s+$/g,l=`
`,c="/",u="*",f="",m="comment",g="declaration";function x(w,E){if(typeof w!="string")throw new TypeError("First argument must be a string");if(!w)return[];E=E||{};var C=1,k=1;function O(A){var I=A.match(e);I&&(C+=I.length);var M=A.lastIndexOf(l);k=~M?A.length-M:k+A.length}function j(){var A={line:C,column:k};return function(I){return I.position=new R(A),F(),I}}function R(A){this.start=A,this.end={line:C,column:k},this.source=E.source}R.prototype.content=w;function U(A){var I=new Error(E.source+":"+C+":"+k+": "+A);if(I.reason=A,I.filename=E.source,I.line=C,I.column=k,I.source=w,!E.silent)throw I}function V(A){var I=A.exec(w);if(I){var M=I[0];return O(M),w=w.slice(M.length),I}}function F(){V(n)}function $(A){var I;for(A=A||[];I=K();)I!==!1&&A.push(I);return A}function K(){var A=j();if(!(c!=w.charAt(0)||u!=w.charAt(1))){for(var I=2;f!=w.charAt(I)&&(u!=w.charAt(I)||c!=w.charAt(I+1));)++I;if(I+=2,f===w.charAt(I-1))return U("End of comment missing");var M=w.slice(2,I-2);return k+=2,O(M),w=w.slice(I),k+=2,A({type:m,comment:M})}}function H(){var A=j(),I=V(r);if(I){if(K(),!V(i))return U("property missing ':'");var M=V(s),z=A({type:g,property:v(I[0].replace(t,f)),value:M?v(M[0].replace(t,f)):f});return V(o),z}}function B(){var A=[];$(A);for(var I;I=H();)I!==!1&&(A.push(I),$(A));return A}return F(),B()}function v(w){return w?w.replace(a,f):f}return T5=x,T5}var nJ;function FGe(){if(nJ)return $0;nJ=1;var t=$0&&$0.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty($0,"__esModule",{value:!0}),$0.default=n;const e=t(UGe());function n(r,i){let s=null;if(!r||typeof r!="string")return s;const o=(0,e.default)(r),a=typeof i=="function";return o.forEach(l=>{if(l.type!=="declaration")return;const{property:c,value:u}=l;a?i(c,u,l):u&&(s=s||{},s[c]=u)}),s}return $0}var db={},rJ;function $Ge(){if(rJ)return db;rJ=1,Object.defineProperty(db,"__esModule",{value:!0}),db.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,s=function(c){return!c||n.test(c)||t.test(c)},o=function(c,u){return u.toUpperCase()},a=function(c,u){return"".concat(u,"-")},l=function(c,u){return u===void 0&&(u={}),s(c)?c:(c=c.toLowerCase(),u.reactCompat?c=c.replace(i,a):c=c.replace(r,a),c.replace(e,o))};return db.camelCase=l,db}var fb,iJ;function zGe(){if(iJ)return fb;iJ=1;var t=fb&&fb.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},e=t(FGe()),n=$Ge();function r(i,s){var o={};return!i||typeof i!="string"||(0,e.default)(i,function(a,l){a&&l&&(o[(0,n.camelCase)(a,s)]=l)}),o}return r.default=r,fb=r,fb}var HGe=zGe();const VGe=cs(HGe),Ede=Sde("end"),zB=Sde("start");function Sde(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function qGe(t){const e=zB(t),n=Ede(t);if(e&&n)return{start:e,end:n}}function qb(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?sJ(t.position):"start"in t||"end"in t?sJ(t):"line"in t||"column"in t?pD(t):""}function pD(t){return oJ(t&&t.line)+":"+oJ(t&&t.column)}function sJ(t){return pD(t&&t.start)+"-"+pD(t&&t.end)}function oJ(t){return t&&typeof t=="number"?t:1}class Rs extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof e=="string"?i=e:!s.cause&&e&&(o=!0,i=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof r=="string"){const l=r.indexOf(":");l===-1?s.ruleId=r:(s.source=r.slice(0,l),s.ruleId=r.slice(l+1))}if(!s.place&&s.ancestors&&s.ancestors){const l=s.ancestors[s.ancestors.length-1];l&&(s.place=l.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=a?a.line:void 0,this.name=qb(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Rs.prototype.file="";Rs.prototype.name="";Rs.prototype.reason="";Rs.prototype.message="";Rs.prototype.stack="";Rs.prototype.column=void 0;Rs.prototype.line=void 0;Rs.prototype.ancestors=void 0;Rs.prototype.cause=void 0;Rs.prototype.fatal=void 0;Rs.prototype.place=void 0;Rs.prototype.ruleId=void 0;Rs.prototype.source=void 0;const HB={}.hasOwnProperty,GGe=new Map,KGe=/[A-Z]/g,WGe=new Set(["table","tbody","thead","tfoot","tr"]),YGe=new Set(["td","th"]),Ade="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function JGe(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=iKe(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=rKe(n,e.jsx,e.jsxs)}const i={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?$B:BGe,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=Tde(i,t,void 0);return s&&typeof s!="string"?s:i.create(t,i.Fragment,{children:s||void 0},void 0)}function Tde(t,e,n){if(e.type==="element")return XGe(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return QGe(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return eKe(t,e,n);if(e.type==="mdxjsEsm")return ZGe(t,e);if(e.type==="root")return tKe(t,e,n);if(e.type==="text")return nKe(t,e)}function XGe(t,e,n){const r=t.schema;let i=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=$B,t.schema=i),t.ancestors.push(e);const s=Cde(t,e.tagName,!1),o=sKe(t,e);let a=qB(t,e);return WGe.has(e.tagName)&&(a=a.filter(function(l){return typeof l=="string"?!CGe(l):!0})),kde(t,o,s,e),VB(o,a),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function QGe(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}qw(t,e.position)}function ZGe(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);qw(t,e.position)}function eKe(t,e,n){const r=t.schema;let i=r;e.name==="svg"&&r.space==="html"&&(i=$B,t.schema=i),t.ancestors.push(e);const s=e.name===null?t.Fragment:Cde(t,e.name,!0),o=oKe(t,e),a=qB(t,e);return kde(t,o,s,e),VB(o,a),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function tKe(t,e,n){const r={};return VB(r,qB(t,e)),t.create(e,t.Fragment,r,n)}function nKe(t,e){return e.value}function kde(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function VB(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function rKe(t,e,n){return r;function r(i,s,o,a){const c=Array.isArray(o.children)?n:e;return a?c(s,o,a):c(s,o)}}function iKe(t,e){return n;function n(r,i,s,o){const a=Array.isArray(s.children),l=zB(r);return e(i,s,o,a,{columnNumber:l?l.column-1:void 0,fileName:t,lineNumber:l?l.line:void 0},void 0)}}function sKe(t,e){const n={};let r,i;for(i in e.properties)if(i!=="children"&&HB.call(e.properties,i)){const s=aKe(t,i,e.properties[i]);if(s){const[o,a]=s;t.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&YGe.has(e.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function oKe(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,t.evaluater.evaluateExpression(a.argument))}else qw(t,e.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const a=r.value.data.estree.body[0];a.type,s=t.evaluater.evaluateExpression(a.expression)}else qw(t,e.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function qB(t,e){const n=[];let r=-1;const i=t.passKeys?new Map:GGe;for(;++r<e.children.length;){const s=e.children[r];let o;if(t.passKeys){const l=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(l){const c=i.get(l)||0;o=l+"-"+c,i.set(l,c+1)}}const a=Tde(t,s,o);a!==void 0&&n.push(a)}return n}function aKe(t,e,n){const r=MGe(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?EGe(n):jGe(n)),r.property==="style"){let i=typeof n=="object"?n:lKe(t,String(n));return t.stylePropertyNameCase==="css"&&(i=cKe(i)),["style",i]}return[t.elementAttributeNameCase==="react"&&r.space?PGe[r.property]||r.property:r.attribute,n]}}function lKe(t,e){try{return VGe(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,i=new Rs("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=t.filePath||void 0,i.url=Ade+"#cannot-parse-style-attribute",i}}function Cde(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const i=e.split(".");let s=-1,o;for(;++s<i.length;){const a=XY(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=XY(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const i=r.value;return HB.call(t.components,i)?t.components[i]:i}if(t.evaluater)return t.evaluater.evaluateExpression(r);qw(t)}function qw(t,e){const n=new Rs("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=Ade+"#cannot-handle-mdx-estrees-without-createevaluater",n}function cKe(t){const e={};let n;for(n in t)HB.call(t,n)&&(e[uKe(n)]=t[n]);return e}function uKe(t){let e=t.replace(KGe,dKe);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function dKe(t){return"-"+t.toLowerCase()}const k5={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},fKe={};function GB(t,e){const n=fKe,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Nde(t,r,i)}function Nde(t,e,n){if(hKe(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return aJ(t.children,e,n)}return Array.isArray(t)?aJ(t,e,n):""}function aJ(t,e,n){const r=[];let i=-1;for(;++i<t.length;)r[i]=Nde(t[i],e,n);return r.join("")}function hKe(t){return!!(t&&typeof t=="object")}const lJ=document.createElement("i");function KB(t){const e="&"+t+";";lJ.innerHTML=e;const n=lJ.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function Yo(t,e,n,r){const i=t.length;let s=0,o;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(e,0),t.splice(...o),s+=1e4,e+=1e4}function Ra(t,e){return t.length>0?(Yo(t,t.length,0,e),t):e}const cJ={}.hasOwnProperty;function _de(t){const e={};let n=-1;for(;++n<t.length;)pKe(e,t[n]);return e}function pKe(t,e){let n;for(n in e){const i=(cJ.call(t,n)?t[n]:void 0)||(t[n]={}),s=e[n];let o;if(s)for(o in s){cJ.call(i,o)||(i[o]=[]);const a=s[o];mKe(i[o],Array.isArray(a)?a:a?[a]:[])}}}function mKe(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);Yo(t,0,0,r)}function Ide(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function wl(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Fs=yh(/[A-Za-z]/),ks=yh(/[\dA-Za-z]/),gKe=yh(/[#-'*+\--9=?A-Z^-~]/);function Wk(t){return t!==null&&(t<32||t===127)}const mD=yh(/\d/),yKe=yh(/[\dA-Fa-f]/),xKe=yh(/[!-/:-@[-`{-~]/);function qt(t){return t!==null&&t<-2}function cr(t){return t!==null&&(t<0||t===32)}function Sn(t){return t===-2||t===-1||t===32}const mN=yh(new RegExp("\\p{P}|\\p{S}","u")),wm=yh(/\s/);function yh(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function Jx(t){const e=[];let n=-1,r=0,i=0;for(;++n<t.length;){const s=t.charCodeAt(n);let o="";if(s===37&&ks(t.charCodeAt(n+1))&&ks(t.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=t.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(e.push(t.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return e.join("")+t.slice(r)}function In(t,e,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(l){return Sn(l)?(t.enter(n),a(l)):e(l)}function a(l){return Sn(l)&&s++<i?(t.consume(l),a):(t.exit(n),e(l))}}const vKe={tokenize:bKe};function bKe(t){const e=t.attempt(this.parser.constructs.contentInitial,r,i);let n;return e;function r(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),In(t,e,"linePrefix")}function i(a){return t.enter("paragraph"),s(a)}function s(a){const l=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,o(a)}function o(a){if(a===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(a);return}return qt(a)?(t.consume(a),t.exit("chunkText"),s):(t.consume(a),o)}}const wKe={tokenize:EKe},uJ={tokenize:SKe};function EKe(t){const e=this,n=[];let r=0,i,s,o;return a;function a(k){if(r<n.length){const O=n[r];return e.containerState=O[1],t.attempt(O[0].continuation,l,c)(k)}return c(k)}function l(k){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&C();const O=e.events.length;let j=O,R;for(;j--;)if(e.events[j][0]==="exit"&&e.events[j][1].type==="chunkFlow"){R=e.events[j][1].end;break}E(r);let U=O;for(;U<e.events.length;)e.events[U][1].end={...R},U++;return Yo(e.events,j+1,0,e.events.slice(O)),e.events.length=U,c(k)}return a(k)}function c(k){if(r===n.length){if(!i)return m(k);if(i.currentConstruct&&i.currentConstruct.concrete)return x(k);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(uJ,u,f)(k)}function u(k){return i&&C(),E(r),m(k)}function f(k){return e.parser.lazy[e.now().line]=r!==n.length,o=e.now().offset,x(k)}function m(k){return e.containerState={},t.attempt(uJ,g,x)(k)}function g(k){return r++,n.push([e.currentConstruct,e.containerState]),m(k)}function x(k){if(k===null){i&&C(),E(0),t.consume(k);return}return i=i||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),v(k)}function v(k){if(k===null){w(t.exit("chunkFlow"),!0),E(0),t.consume(k);return}return qt(k)?(t.consume(k),w(t.exit("chunkFlow")),r=0,e.interrupt=void 0,a):(t.consume(k),v)}function w(k,O){const j=e.sliceStream(k);if(O&&j.push(null),k.previous=s,s&&(s.next=k),s=k,i.defineSkip(k.start),i.write(j),e.parser.lazy[k.start.line]){let R=i.events.length;for(;R--;)if(i.events[R][1].start.offset<o&&(!i.events[R][1].end||i.events[R][1].end.offset>o))return;const U=e.events.length;let V=U,F,$;for(;V--;)if(e.events[V][0]==="exit"&&e.events[V][1].type==="chunkFlow"){if(F){$=e.events[V][1].end;break}F=!0}for(E(r),R=U;R<e.events.length;)e.events[R][1].end={...$},R++;Yo(e.events,V+1,0,e.events.slice(U)),e.events.length=R}}function E(k){let O=n.length;for(;O-- >k;){const j=n[O];e.containerState=j[1],j[0].exit.call(e,t)}n.length=k}function C(){i.write([null]),s=void 0,i=void 0,e.containerState._closeFlow=void 0}}function SKe(t,e,n){return In(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function fx(t){if(t===null||cr(t)||wm(t))return 1;if(mN(t))return 2}function gN(t,e,n){const r=[];let i=-1;for(;++i<t.length;){const s=t[i].resolveAll;s&&!r.includes(s)&&(e=s(e,n),r.push(s))}return e}const gD={name:"attention",resolveAll:AKe,tokenize:TKe};function AKe(t,e){let n=-1,r,i,s,o,a,l,c,u;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;l=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const f={...t[r][1].end},m={...t[n][1].start};dJ(f,-l),dJ(m,l),o={type:l>1?"strongSequence":"emphasisSequence",start:f,end:{...t[r][1].end}},a={type:l>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:m},s={type:l>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},i={type:l>1?"strong":"emphasis",start:{...o.start},end:{...a.end}},t[r][1].end={...o.start},t[n][1].start={...a.end},c=[],t[r][1].end.offset-t[r][1].start.offset&&(c=Ra(c,[["enter",t[r][1],e],["exit",t[r][1],e]])),c=Ra(c,[["enter",i,e],["enter",o,e],["exit",o,e],["enter",s,e]]),c=Ra(c,gN(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),c=Ra(c,[["exit",s,e],["enter",a,e],["exit",a,e],["exit",i,e]]),t[n][1].end.offset-t[n][1].start.offset?(u=2,c=Ra(c,[["enter",t[n][1],e],["exit",t[n][1],e]])):u=0,Yo(t,r-1,n-r+3,c),n=r+c.length-u-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function TKe(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=fx(r);let s;return o;function o(l){return s=l,t.enter("attentionSequence"),a(l)}function a(l){if(l===s)return t.consume(l),a;const c=t.exit("attentionSequence"),u=fx(l),f=!u||u===2&&i||n.includes(l),m=!i||i===2&&u||n.includes(r);return c._open=!!(s===42?f:f&&(i||!m)),c._close=!!(s===42?m:m&&(u||!f)),e(l)}}function dJ(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const kKe={name:"autolink",tokenize:CKe};function CKe(t,e,n){let r=0;return i;function i(g){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(g){return Fs(g)?(t.consume(g),o):g===64?n(g):c(g)}function o(g){return g===43||g===45||g===46||ks(g)?(r=1,a(g)):c(g)}function a(g){return g===58?(t.consume(g),r=0,l):(g===43||g===45||g===46||ks(g))&&r++<32?(t.consume(g),a):(r=0,c(g))}function l(g){return g===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.exit("autolink"),e):g===null||g===32||g===60||Wk(g)?n(g):(t.consume(g),l)}function c(g){return g===64?(t.consume(g),u):gKe(g)?(t.consume(g),c):n(g)}function u(g){return ks(g)?f(g):n(g)}function f(g){return g===46?(t.consume(g),r=0,u):g===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.exit("autolink"),e):m(g)}function m(g){if((g===45||ks(g))&&r++<63){const x=g===45?m:f;return t.consume(g),x}return n(g)}}const tE={partial:!0,tokenize:NKe};function NKe(t,e,n){return r;function r(s){return Sn(s)?In(t,i,"linePrefix")(s):i(s)}function i(s){return s===null||qt(s)?e(s):n(s)}}const Pde={continuation:{tokenize:IKe},exit:PKe,name:"blockQuote",tokenize:_Ke};function _Ke(t,e,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(t.enter("blockQuote",{_container:!0}),a.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),s}return n(o)}function s(o){return Sn(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function IKe(t,e,n){const r=this;return i;function i(o){return Sn(o)?In(t,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return t.attempt(Pde,e,n)(o)}}function PKe(t){t.exit("blockQuote")}const Rde={name:"characterEscape",tokenize:RKe};function RKe(t,e,n){return r;function r(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),i}function i(s){return xKe(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(s)}}const Ode={name:"characterReference",tokenize:OKe};function OKe(t,e,n){const r=this;let i=0,s,o;return a;function a(f){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(f),t.exit("characterReferenceMarker"),l}function l(f){return f===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(f),t.exit("characterReferenceMarkerNumeric"),c):(t.enter("characterReferenceValue"),s=31,o=ks,u(f))}function c(f){return f===88||f===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(f),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,o=yKe,u):(t.enter("characterReferenceValue"),s=7,o=mD,u(f))}function u(f){if(f===59&&i){const m=t.exit("characterReferenceValue");return o===ks&&!KB(r.sliceSerialize(m))?n(f):(t.enter("characterReferenceMarker"),t.consume(f),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return o(f)&&i++<s?(t.consume(f),u):n(f)}}const fJ={partial:!0,tokenize:DKe},hJ={concrete:!0,name:"codeFenced",tokenize:MKe};function MKe(t,e,n){const r=this,i={partial:!0,tokenize:j};let s=0,o=0,a;return l;function l(R){return c(R)}function c(R){const U=r.events[r.events.length-1];return s=U&&U[1].type==="linePrefix"?U[2].sliceSerialize(U[1],!0).length:0,a=R,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),u(R)}function u(R){return R===a?(o++,t.consume(R),u):o<3?n(R):(t.exit("codeFencedFenceSequence"),Sn(R)?In(t,f,"whitespace")(R):f(R))}function f(R){return R===null||qt(R)?(t.exit("codeFencedFence"),r.interrupt?e(R):t.check(fJ,v,O)(R)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),m(R))}function m(R){return R===null||qt(R)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),f(R)):Sn(R)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),In(t,g,"whitespace")(R)):R===96&&R===a?n(R):(t.consume(R),m)}function g(R){return R===null||qt(R)?f(R):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),x(R))}function x(R){return R===null||qt(R)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),f(R)):R===96&&R===a?n(R):(t.consume(R),x)}function v(R){return t.attempt(i,O,w)(R)}function w(R){return t.enter("lineEnding"),t.consume(R),t.exit("lineEnding"),E}function E(R){return s>0&&Sn(R)?In(t,C,"linePrefix",s+1)(R):C(R)}function C(R){return R===null||qt(R)?t.check(fJ,v,O)(R):(t.enter("codeFlowValue"),k(R))}function k(R){return R===null||qt(R)?(t.exit("codeFlowValue"),C(R)):(t.consume(R),k)}function O(R){return t.exit("codeFenced"),e(R)}function j(R,U,V){let F=0;return $;function $(I){return R.enter("lineEnding"),R.consume(I),R.exit("lineEnding"),K}function K(I){return R.enter("codeFencedFence"),Sn(I)?In(R,H,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(I):H(I)}function H(I){return I===a?(R.enter("codeFencedFenceSequence"),B(I)):V(I)}function B(I){return I===a?(F++,R.consume(I),B):F>=o?(R.exit("codeFencedFenceSequence"),Sn(I)?In(R,A,"whitespace")(I):A(I)):V(I)}function A(I){return I===null||qt(I)?(R.exit("codeFencedFence"),U(I)):V(I)}}}function DKe(t,e,n){const r=this;return i;function i(o){return o===null?n(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}const C5={name:"codeIndented",tokenize:BKe},LKe={partial:!0,tokenize:jKe};function BKe(t,e,n){const r=this;return i;function i(c){return t.enter("codeIndented"),In(t,s,"linePrefix",5)(c)}function s(c){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?o(c):n(c)}function o(c){return c===null?l(c):qt(c)?t.attempt(LKe,o,l)(c):(t.enter("codeFlowValue"),a(c))}function a(c){return c===null||qt(c)?(t.exit("codeFlowValue"),o(c)):(t.consume(c),a)}function l(c){return t.exit("codeIndented"),e(c)}}function jKe(t,e,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):qt(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),i):In(t,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):qt(o)?i(o):n(o)}}const UKe={name:"codeText",previous:$Ke,resolve:FKe,tokenize:zKe};function FKe(t){let e=t.length-4,n=3,r,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)i===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(i=r):(r===e||t[r][1].type==="lineEnding")&&(t[i][1].type="codeTextData",r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return t}function $Ke(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function zKe(t,e,n){let r=0,i,s;return o;function o(f){return t.enter("codeText"),t.enter("codeTextSequence"),a(f)}function a(f){return f===96?(t.consume(f),r++,a):(t.exit("codeTextSequence"),l(f))}function l(f){return f===null?n(f):f===32?(t.enter("space"),t.consume(f),t.exit("space"),l):f===96?(s=t.enter("codeTextSequence"),i=0,u(f)):qt(f)?(t.enter("lineEnding"),t.consume(f),t.exit("lineEnding"),l):(t.enter("codeTextData"),c(f))}function c(f){return f===null||f===32||f===96||qt(f)?(t.exit("codeTextData"),l(f)):(t.consume(f),c)}function u(f){return f===96?(t.consume(f),i++,u):i===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(f)):(s.type="codeTextData",c(f))}}class HKe{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const i=n||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&hb(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),hb(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),hb(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);hb(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);hb(this.left,n.reverse())}}}function hb(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function Mde(t){const e={};let n=-1,r,i,s,o,a,l,c;const u=new HKe(t);for(;++n<u.length;){for(;n in e;)n=e[n];if(r=u.get(n),n&&r[1].type==="chunkFlow"&&u.get(n-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,s=0,s<l.length&&l[s][1].type==="lineEndingBlank"&&(s+=2),s<l.length&&l[s][1].type==="content"))for(;++s<l.length&&l[s][1].type!=="content";)l[s][1].type==="chunkText"&&(l[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,VKe(u,n)),n=e[n],c=!0);else if(r[1]._container){for(s=n,i=void 0;s--;)if(o=u.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(u.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(r[1].end={...u.get(i)[1].start},a=u.slice(i,n),a.unshift(r),u.splice(i,n-i+1,a))}}return Yo(t,0,Number.POSITIVE_INFINITY,u.slice(0)),!c}function VKe(t,e){const n=t.get(e)[1],r=t.get(e)[2];let i=e-1;const s=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const a=o.events,l=[],c={};let u,f,m=-1,g=n,x=0,v=0;const w=[v];for(;g;){for(;t.get(++i)[1]!==g;);s.push(i),g._tokenizer||(u=r.sliceStream(g),g.next||u.push(null),f&&o.defineSkip(g.start),g._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(u),g._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=g,g=g.next}for(g=n;++m<a.length;)a[m][0]==="exit"&&a[m-1][0]==="enter"&&a[m][1].type===a[m-1][1].type&&a[m][1].start.line!==a[m][1].end.line&&(v=m+1,w.push(v),g._tokenizer=void 0,g.previous=void 0,g=g.next);for(o.events=[],g?(g._tokenizer=void 0,g.previous=void 0):w.pop(),m=w.length;m--;){const E=a.slice(w[m],w[m+1]),C=s.pop();l.push([C,C+E.length-1]),t.splice(C,2,E)}for(l.reverse(),m=-1;++m<l.length;)c[x+l[m][0]]=x+l[m][1],x+=l[m][1]-l[m][0]-1;return c}const qKe={resolve:KKe,tokenize:WKe},GKe={partial:!0,tokenize:YKe};function KKe(t){return Mde(t),t}function WKe(t,e){let n;return r;function r(a){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):qt(a)?t.check(GKe,o,s)(a):(t.consume(a),i)}function s(a){return t.exit("chunkContent"),t.exit("content"),e(a)}function o(a){return t.consume(a),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function YKe(t,e,n){const r=this;return i;function i(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),In(t,s,"linePrefix")}function s(o){if(o===null||qt(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):t.interrupt(r.parser.constructs.flow,n,e)(o)}}function Dde(t,e,n,r,i,s,o,a,l){const c=l||Number.POSITIVE_INFINITY;let u=0;return f;function f(E){return E===60?(t.enter(r),t.enter(i),t.enter(s),t.consume(E),t.exit(s),m):E===null||E===32||E===41||Wk(E)?n(E):(t.enter(r),t.enter(o),t.enter(a),t.enter("chunkString",{contentType:"string"}),v(E))}function m(E){return E===62?(t.enter(s),t.consume(E),t.exit(s),t.exit(i),t.exit(r),e):(t.enter(a),t.enter("chunkString",{contentType:"string"}),g(E))}function g(E){return E===62?(t.exit("chunkString"),t.exit(a),m(E)):E===null||E===60||qt(E)?n(E):(t.consume(E),E===92?x:g)}function x(E){return E===60||E===62||E===92?(t.consume(E),g):g(E)}function v(E){return!u&&(E===null||E===41||cr(E))?(t.exit("chunkString"),t.exit(a),t.exit(o),t.exit(r),e(E)):u<c&&E===40?(t.consume(E),u++,v):E===41?(t.consume(E),u--,v):E===null||E===32||E===40||Wk(E)?n(E):(t.consume(E),E===92?w:v)}function w(E){return E===40||E===41||E===92?(t.consume(E),v):v(E)}}function Lde(t,e,n,r,i,s){const o=this;let a=0,l;return c;function c(g){return t.enter(r),t.enter(i),t.consume(g),t.exit(i),t.enter(s),u}function u(g){return a>999||g===null||g===91||g===93&&!l||g===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(g):g===93?(t.exit(s),t.enter(i),t.consume(g),t.exit(i),t.exit(r),e):qt(g)?(t.enter("lineEnding"),t.consume(g),t.exit("lineEnding"),u):(t.enter("chunkString",{contentType:"string"}),f(g))}function f(g){return g===null||g===91||g===93||qt(g)||a++>999?(t.exit("chunkString"),u(g)):(t.consume(g),l||(l=!Sn(g)),g===92?m:f)}function m(g){return g===91||g===92||g===93?(t.consume(g),a++,f):f(g)}}function Bde(t,e,n,r,i,s){let o;return a;function a(m){return m===34||m===39||m===40?(t.enter(r),t.enter(i),t.consume(m),t.exit(i),o=m===40?41:m,l):n(m)}function l(m){return m===o?(t.enter(i),t.consume(m),t.exit(i),t.exit(r),e):(t.enter(s),c(m))}function c(m){return m===o?(t.exit(s),l(o)):m===null?n(m):qt(m)?(t.enter("lineEnding"),t.consume(m),t.exit("lineEnding"),In(t,c,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),u(m))}function u(m){return m===o||m===null||qt(m)?(t.exit("chunkString"),c(m)):(t.consume(m),m===92?f:u)}function f(m){return m===o||m===92?(t.consume(m),u):u(m)}}function Gb(t,e){let n;return r;function r(i){return qt(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),n=!0,r):Sn(i)?In(t,r,n?"linePrefix":"lineSuffix")(i):e(i)}}const JKe={name:"definition",tokenize:QKe},XKe={partial:!0,tokenize:ZKe};function QKe(t,e,n){const r=this;let i;return s;function s(g){return t.enter("definition"),o(g)}function o(g){return Lde.call(r,t,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(g)}function a(g){return i=wl(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),g===58?(t.enter("definitionMarker"),t.consume(g),t.exit("definitionMarker"),l):n(g)}function l(g){return cr(g)?Gb(t,c)(g):c(g)}function c(g){return Dde(t,u,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(g)}function u(g){return t.attempt(XKe,f,f)(g)}function f(g){return Sn(g)?In(t,m,"whitespace")(g):m(g)}function m(g){return g===null||qt(g)?(t.exit("definition"),r.parser.defined.push(i),e(g)):n(g)}}function ZKe(t,e,n){return r;function r(a){return cr(a)?Gb(t,i)(a):n(a)}function i(a){return Bde(t,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return Sn(a)?In(t,o,"whitespace")(a):o(a)}function o(a){return a===null||qt(a)?e(a):n(a)}}const eWe={name:"hardBreakEscape",tokenize:tWe};function tWe(t,e,n){return r;function r(s){return t.enter("hardBreakEscape"),t.consume(s),i}function i(s){return qt(s)?(t.exit("hardBreakEscape"),e(s)):n(s)}}const nWe={name:"headingAtx",resolve:rWe,tokenize:iWe};function rWe(t,e){let n=t.length-2,r=3,i,s;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},s={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},Yo(t,r,n-r+1,[["enter",i,e],["enter",s,e],["exit",s,e],["exit",i,e]])),t}function iWe(t,e,n){let r=0;return i;function i(u){return t.enter("atxHeading"),s(u)}function s(u){return t.enter("atxHeadingSequence"),o(u)}function o(u){return u===35&&r++<6?(t.consume(u),o):u===null||cr(u)?(t.exit("atxHeadingSequence"),a(u)):n(u)}function a(u){return u===35?(t.enter("atxHeadingSequence"),l(u)):u===null||qt(u)?(t.exit("atxHeading"),e(u)):Sn(u)?In(t,a,"whitespace")(u):(t.enter("atxHeadingText"),c(u))}function l(u){return u===35?(t.consume(u),l):(t.exit("atxHeadingSequence"),a(u))}function c(u){return u===null||u===35||cr(u)?(t.exit("atxHeadingText"),a(u)):(t.consume(u),c)}}const sWe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],pJ=["pre","script","style","textarea"],oWe={concrete:!0,name:"htmlFlow",resolveTo:cWe,tokenize:uWe},aWe={partial:!0,tokenize:fWe},lWe={partial:!0,tokenize:dWe};function cWe(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function uWe(t,e,n){const r=this;let i,s,o,a,l;return c;function c(_){return u(_)}function u(_){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(_),f}function f(_){return _===33?(t.consume(_),m):_===47?(t.consume(_),s=!0,v):_===63?(t.consume(_),i=3,r.interrupt?e:Y):Fs(_)?(t.consume(_),o=String.fromCharCode(_),w):n(_)}function m(_){return _===45?(t.consume(_),i=2,g):_===91?(t.consume(_),i=5,a=0,x):Fs(_)?(t.consume(_),i=4,r.interrupt?e:Y):n(_)}function g(_){return _===45?(t.consume(_),r.interrupt?e:Y):n(_)}function x(_){const W="CDATA[";return _===W.charCodeAt(a++)?(t.consume(_),a===W.length?r.interrupt?e:H:x):n(_)}function v(_){return Fs(_)?(t.consume(_),o=String.fromCharCode(_),w):n(_)}function w(_){if(_===null||_===47||_===62||cr(_)){const W=_===47,X=o.toLowerCase();return!W&&!s&&pJ.includes(X)?(i=1,r.interrupt?e(_):H(_)):sWe.includes(o.toLowerCase())?(i=6,W?(t.consume(_),E):r.interrupt?e(_):H(_)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(_):s?C(_):k(_))}return _===45||ks(_)?(t.consume(_),o+=String.fromCharCode(_),w):n(_)}function E(_){return _===62?(t.consume(_),r.interrupt?e:H):n(_)}function C(_){return Sn(_)?(t.consume(_),C):$(_)}function k(_){return _===47?(t.consume(_),$):_===58||_===95||Fs(_)?(t.consume(_),O):Sn(_)?(t.consume(_),k):$(_)}function O(_){return _===45||_===46||_===58||_===95||ks(_)?(t.consume(_),O):j(_)}function j(_){return _===61?(t.consume(_),R):Sn(_)?(t.consume(_),j):k(_)}function R(_){return _===null||_===60||_===61||_===62||_===96?n(_):_===34||_===39?(t.consume(_),l=_,U):Sn(_)?(t.consume(_),R):V(_)}function U(_){return _===l?(t.consume(_),l=null,F):_===null||qt(_)?n(_):(t.consume(_),U)}function V(_){return _===null||_===34||_===39||_===47||_===60||_===61||_===62||_===96||cr(_)?j(_):(t.consume(_),V)}function F(_){return _===47||_===62||Sn(_)?k(_):n(_)}function $(_){return _===62?(t.consume(_),K):n(_)}function K(_){return _===null||qt(_)?H(_):Sn(_)?(t.consume(_),K):n(_)}function H(_){return _===45&&i===2?(t.consume(_),M):_===60&&i===1?(t.consume(_),z):_===62&&i===4?(t.consume(_),q):_===63&&i===3?(t.consume(_),Y):_===93&&i===5?(t.consume(_),te):qt(_)&&(i===6||i===7)?(t.exit("htmlFlowData"),t.check(aWe,D,B)(_)):_===null||qt(_)?(t.exit("htmlFlowData"),B(_)):(t.consume(_),H)}function B(_){return t.check(lWe,A,D)(_)}function A(_){return t.enter("lineEnding"),t.consume(_),t.exit("lineEnding"),I}function I(_){return _===null||qt(_)?B(_):(t.enter("htmlFlowData"),H(_))}function M(_){return _===45?(t.consume(_),Y):H(_)}function z(_){return _===47?(t.consume(_),o="",G):H(_)}function G(_){if(_===62){const W=o.toLowerCase();return pJ.includes(W)?(t.consume(_),q):H(_)}return Fs(_)&&o.length<8?(t.consume(_),o+=String.fromCharCode(_),G):H(_)}function te(_){return _===93?(t.consume(_),Y):H(_)}function Y(_){return _===62?(t.consume(_),q):_===45&&i===2?(t.consume(_),Y):H(_)}function q(_){return _===null||qt(_)?(t.exit("htmlFlowData"),D(_)):(t.consume(_),q)}function D(_){return t.exit("htmlFlow"),e(_)}}function dWe(t,e,n){const r=this;return i;function i(o){return qt(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}function fWe(t,e,n){return r;function r(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),t.attempt(tE,e,n)}}const hWe={name:"htmlText",tokenize:pWe};function pWe(t,e,n){const r=this;let i,s,o;return a;function a(Y){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(Y),l}function l(Y){return Y===33?(t.consume(Y),c):Y===47?(t.consume(Y),j):Y===63?(t.consume(Y),k):Fs(Y)?(t.consume(Y),V):n(Y)}function c(Y){return Y===45?(t.consume(Y),u):Y===91?(t.consume(Y),s=0,x):Fs(Y)?(t.consume(Y),C):n(Y)}function u(Y){return Y===45?(t.consume(Y),g):n(Y)}function f(Y){return Y===null?n(Y):Y===45?(t.consume(Y),m):qt(Y)?(o=f,z(Y)):(t.consume(Y),f)}function m(Y){return Y===45?(t.consume(Y),g):f(Y)}function g(Y){return Y===62?M(Y):Y===45?m(Y):f(Y)}function x(Y){const q="CDATA[";return Y===q.charCodeAt(s++)?(t.consume(Y),s===q.length?v:x):n(Y)}function v(Y){return Y===null?n(Y):Y===93?(t.consume(Y),w):qt(Y)?(o=v,z(Y)):(t.consume(Y),v)}function w(Y){return Y===93?(t.consume(Y),E):v(Y)}function E(Y){return Y===62?M(Y):Y===93?(t.consume(Y),E):v(Y)}function C(Y){return Y===null||Y===62?M(Y):qt(Y)?(o=C,z(Y)):(t.consume(Y),C)}function k(Y){return Y===null?n(Y):Y===63?(t.consume(Y),O):qt(Y)?(o=k,z(Y)):(t.consume(Y),k)}function O(Y){return Y===62?M(Y):k(Y)}function j(Y){return Fs(Y)?(t.consume(Y),R):n(Y)}function R(Y){return Y===45||ks(Y)?(t.consume(Y),R):U(Y)}function U(Y){return qt(Y)?(o=U,z(Y)):Sn(Y)?(t.consume(Y),U):M(Y)}function V(Y){return Y===45||ks(Y)?(t.consume(Y),V):Y===47||Y===62||cr(Y)?F(Y):n(Y)}function F(Y){return Y===47?(t.consume(Y),M):Y===58||Y===95||Fs(Y)?(t.consume(Y),$):qt(Y)?(o=F,z(Y)):Sn(Y)?(t.consume(Y),F):M(Y)}function $(Y){return Y===45||Y===46||Y===58||Y===95||ks(Y)?(t.consume(Y),$):K(Y)}function K(Y){return Y===61?(t.consume(Y),H):qt(Y)?(o=K,z(Y)):Sn(Y)?(t.consume(Y),K):F(Y)}function H(Y){return Y===null||Y===60||Y===61||Y===62||Y===96?n(Y):Y===34||Y===39?(t.consume(Y),i=Y,B):qt(Y)?(o=H,z(Y)):Sn(Y)?(t.consume(Y),H):(t.consume(Y),A)}function B(Y){return Y===i?(t.consume(Y),i=void 0,I):Y===null?n(Y):qt(Y)?(o=B,z(Y)):(t.consume(Y),B)}function A(Y){return Y===null||Y===34||Y===39||Y===60||Y===61||Y===96?n(Y):Y===47||Y===62||cr(Y)?F(Y):(t.consume(Y),A)}function I(Y){return Y===47||Y===62||cr(Y)?F(Y):n(Y)}function M(Y){return Y===62?(t.consume(Y),t.exit("htmlTextData"),t.exit("htmlText"),e):n(Y)}function z(Y){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(Y),t.exit("lineEnding"),G}function G(Y){return Sn(Y)?In(t,te,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Y):te(Y)}function te(Y){return t.enter("htmlTextData"),o(Y)}}const WB={name:"labelEnd",resolveAll:xWe,resolveTo:vWe,tokenize:bWe},mWe={tokenize:wWe},gWe={tokenize:EWe},yWe={tokenize:SWe};function xWe(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",e+=i}}return t.length!==n.length&&Yo(t,0,t.length,n),t}function vWe(t,e){let n=t.length,r=0,i,s,o,a;for(;n--;)if(i=t[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;t[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(t[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const l={type:t[s][1].type==="labelLink"?"link":"image",start:{...t[s][1].start},end:{...t[t.length-1][1].end}},c={type:"label",start:{...t[s][1].start},end:{...t[o][1].end}},u={type:"labelText",start:{...t[s+r+2][1].end},end:{...t[o-2][1].start}};return a=[["enter",l,e],["enter",c,e]],a=Ra(a,t.slice(s+1,s+r+3)),a=Ra(a,[["enter",u,e]]),a=Ra(a,gN(e.parser.constructs.insideSpan.null,t.slice(s+r+4,o-3),e)),a=Ra(a,[["exit",u,e],t[o-2],t[o-1],["exit",c,e]]),a=Ra(a,t.slice(o+1)),a=Ra(a,[["exit",l,e]]),Yo(t,s,t.length,a),t}function bWe(t,e,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(m){return s?s._inactive?f(m):(o=r.parser.defined.includes(wl(r.sliceSerialize({start:s.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(m),t.exit("labelMarker"),t.exit("labelEnd"),l):n(m)}function l(m){return m===40?t.attempt(mWe,u,o?u:f)(m):m===91?t.attempt(gWe,u,o?c:f)(m):o?u(m):f(m)}function c(m){return t.attempt(yWe,u,f)(m)}function u(m){return e(m)}function f(m){return s._balanced=!0,n(m)}}function wWe(t,e,n){return r;function r(f){return t.enter("resource"),t.enter("resourceMarker"),t.consume(f),t.exit("resourceMarker"),i}function i(f){return cr(f)?Gb(t,s)(f):s(f)}function s(f){return f===41?u(f):Dde(t,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function o(f){return cr(f)?Gb(t,l)(f):u(f)}function a(f){return n(f)}function l(f){return f===34||f===39||f===40?Bde(t,c,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):u(f)}function c(f){return cr(f)?Gb(t,u)(f):u(f)}function u(f){return f===41?(t.enter("resourceMarker"),t.consume(f),t.exit("resourceMarker"),t.exit("resource"),e):n(f)}}function EWe(t,e,n){const r=this;return i;function i(a){return Lde.call(r,t,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(wl(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(a):n(a)}function o(a){return n(a)}}function SWe(t,e,n){return r;function r(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),i}function i(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):n(s)}}const AWe={name:"labelStartImage",resolveAll:WB.resolveAll,tokenize:TWe};function TWe(t,e,n){const r=this;return i;function i(a){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(a),t.exit("labelImageMarker"),s}function s(a){return a===91?(t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):e(a)}}const kWe={name:"labelStartLink",resolveAll:WB.resolveAll,tokenize:CWe};function CWe(t,e,n){const r=this;return i;function i(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):e(o)}}const N5={name:"lineEnding",tokenize:NWe};function NWe(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),In(t,e,"linePrefix")}}const pT={name:"thematicBreak",tokenize:_We};function _We(t,e,n){let r=0,i;return s;function s(c){return t.enter("thematicBreak"),o(c)}function o(c){return i=c,a(c)}function a(c){return c===i?(t.enter("thematicBreakSequence"),l(c)):r>=3&&(c===null||qt(c))?(t.exit("thematicBreak"),e(c)):n(c)}function l(c){return c===i?(t.consume(c),r++,l):(t.exit("thematicBreakSequence"),Sn(c)?In(t,a,"whitespace")(c):a(c))}}const io={continuation:{tokenize:OWe},exit:DWe,name:"list",tokenize:RWe},IWe={partial:!0,tokenize:LWe},PWe={partial:!0,tokenize:MWe};function RWe(t,e,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(g){const x=r.containerState.type||(g===42||g===43||g===45?"listUnordered":"listOrdered");if(x==="listUnordered"?!r.containerState.marker||g===r.containerState.marker:mD(g)){if(r.containerState.type||(r.containerState.type=x,t.enter(x,{_container:!0})),x==="listUnordered")return t.enter("listItemPrefix"),g===42||g===45?t.check(pT,n,c)(g):c(g);if(!r.interrupt||g===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),l(g)}return n(g)}function l(g){return mD(g)&&++o<10?(t.consume(g),l):(!r.interrupt||o<2)&&(r.containerState.marker?g===r.containerState.marker:g===41||g===46)?(t.exit("listItemValue"),c(g)):n(g)}function c(g){return t.enter("listItemMarker"),t.consume(g),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||g,t.check(tE,r.interrupt?n:u,t.attempt(IWe,m,f))}function u(g){return r.containerState.initialBlankLine=!0,s++,m(g)}function f(g){return Sn(g)?(t.enter("listItemPrefixWhitespace"),t.consume(g),t.exit("listItemPrefixWhitespace"),m):n(g)}function m(g){return r.containerState.size=s+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(g)}}function OWe(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(tE,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,In(t,e,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!Sn(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(PWe,e,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,In(t,t.attempt(io,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function MWe(t,e,n){const r=this;return In(t,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?e(s):n(s)}}function DWe(t){t.exit(this.containerState.type)}function LWe(t,e,n){const r=this;return In(t,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!Sn(s)&&o&&o[1].type==="listItemPrefixWhitespace"?e(s):n(s)}}const mJ={name:"setextUnderline",resolveTo:BWe,tokenize:jWe};function BWe(t,e){let n=t.length,r,i,s;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(i=n)}else t[n][1].type==="content"&&t.splice(n,1),!s&&t[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[i][1].type="setextHeadingText",s?(t.splice(i,0,["enter",o,e]),t.splice(s+1,0,["exit",t[r][1],e]),t[r][1].end={...t[s][1].end}):t[r][1]=o,t.push(["exit",o,e]),t}function jWe(t,e,n){const r=this;let i;return s;function s(c){let u=r.events.length,f;for(;u--;)if(r.events[u][1].type!=="lineEnding"&&r.events[u][1].type!=="linePrefix"&&r.events[u][1].type!=="content"){f=r.events[u][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(t.enter("setextHeadingLine"),i=c,o(c)):n(c)}function o(c){return t.enter("setextHeadingLineSequence"),a(c)}function a(c){return c===i?(t.consume(c),a):(t.exit("setextHeadingLineSequence"),Sn(c)?In(t,l,"lineSuffix")(c):l(c))}function l(c){return c===null||qt(c)?(t.exit("setextHeadingLine"),e(c)):n(c)}}const UWe={tokenize:FWe};function FWe(t){const e=this,n=t.attempt(tE,r,t.attempt(this.parser.constructs.flowInitial,i,In(t,t.attempt(this.parser.constructs.flow,i,t.attempt(qKe,i)),"linePrefix")));return n;function r(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function i(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const $We={resolveAll:Ude()},zWe=jde("string"),HWe=jde("text");function jde(t){return{resolveAll:Ude(t==="text"?VWe:void 0),tokenize:e};function e(n){const r=this,i=this.parser.constructs[t],s=n.attempt(i,o,a);return o;function o(u){return c(u)?s(u):a(u)}function a(u){if(u===null){n.consume(u);return}return n.enter("data"),n.consume(u),l}function l(u){return c(u)?(n.exit("data"),s(u)):(n.consume(u),l)}function c(u){if(u===null)return!0;const f=i[u];let m=-1;if(f)for(;++m<f.length;){const g=f[m];if(!g.previous||g.previous.call(r,r.previous))return!0}return!1}}}function Ude(t){return e;function e(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return t?t(n,r):n}}function VWe(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],i=e.sliceStream(r);let s=i.length,o=-1,a=0,l;for(;s--;){const c=i[s];if(typeof c=="string"){for(o=c.length;c.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(c===-2)l=!0,a++;else if(c!==-1){s++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(a=0),a){const c={type:n===t.length||l||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:r.start._bufferIndex+o,_index:r.start._index+s,line:r.end.line,column:r.end.column-a,offset:r.end.offset-a},end:{...r.end}};r.end={...c.start},r.start.offset===r.end.offset?Object.assign(r,c):(t.splice(n,0,["enter",c,e],["exit",c,e]),n+=2)}n++}return t}const qWe={42:io,43:io,45:io,48:io,49:io,50:io,51:io,52:io,53:io,54:io,55:io,56:io,57:io,62:Pde},GWe={91:JKe},KWe={[-2]:C5,[-1]:C5,32:C5},WWe={35:nWe,42:pT,45:[mJ,pT],60:oWe,61:mJ,95:pT,96:hJ,126:hJ},YWe={38:Ode,92:Rde},JWe={[-5]:N5,[-4]:N5,[-3]:N5,33:AWe,38:Ode,42:gD,60:[kKe,hWe],91:kWe,92:[eWe,Rde],93:WB,95:gD,96:UKe},XWe={null:[gD,$We]},QWe={null:[42,95]},ZWe={null:[]},eYe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:QWe,contentInitial:GWe,disable:ZWe,document:qWe,flow:WWe,flowInitial:KWe,insideSpan:XWe,string:YWe,text:JWe},Symbol.toStringTag,{value:"Module"}));function tYe(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},s=[];let o=[],a=[];const l={attempt:U(j),check:U(R),consume:C,enter:k,exit:O,interrupt:U(R,{interrupt:!0})},c={code:null,containerState:{},defineSkip:v,events:[],now:x,parser:t,previous:null,sliceSerialize:m,sliceStream:g,write:f};let u=e.tokenize.call(c,l);return e.resolveAll&&s.push(e),c;function f(K){return o=Ra(o,K),w(),o[o.length-1]!==null?[]:(V(e,0),c.events=gN(s,c.events,c),c.events)}function m(K,H){return rYe(g(K),H)}function g(K){return nYe(o,K)}function x(){const{_bufferIndex:K,_index:H,line:B,column:A,offset:I}=r;return{_bufferIndex:K,_index:H,line:B,column:A,offset:I}}function v(K){i[K.line]=K.column,$()}function w(){let K;for(;r._index<o.length;){const H=o[r._index];if(typeof H=="string")for(K=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===K&&r._bufferIndex<H.length;)E(H.charCodeAt(r._bufferIndex));else E(H)}}function E(K){u=u(K)}function C(K){qt(K)?(r.line++,r.column=1,r.offset+=K===-3?2:1,$()):K!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),c.previous=K}function k(K,H){const B=H||{};return B.type=K,B.start=x(),c.events.push(["enter",B,c]),a.push(B),B}function O(K){const H=a.pop();return H.end=x(),c.events.push(["exit",H,c]),H}function j(K,H){V(K,H.from)}function R(K,H){H.restore()}function U(K,H){return B;function B(A,I,M){let z,G,te,Y;return Array.isArray(A)?D(A):"tokenize"in A?D([A]):q(A);function q(re){return ae;function ae(Ee){const ue=Ee!==null&&re[Ee],me=Ee!==null&&re.null,ce=[...Array.isArray(ue)?ue:ue?[ue]:[],...Array.isArray(me)?me:me?[me]:[]];return D(ce)(Ee)}}function D(re){return z=re,G=0,re.length===0?M:_(re[G])}function _(re){return ae;function ae(Ee){return Y=F(),te=re,re.partial||(c.currentConstruct=re),re.name&&c.parser.constructs.disable.null.includes(re.name)?X():re.tokenize.call(H?Object.assign(Object.create(c),H):c,l,W,X)(Ee)}}function W(re){return K(te,Y),I}function X(re){return Y.restore(),++G<z.length?_(z[G]):M}}}function V(K,H){K.resolveAll&&!s.includes(K)&&s.push(K),K.resolve&&Yo(c.events,H,c.events.length-H,K.resolve(c.events.slice(H),c)),K.resolveTo&&(c.events=K.resolveTo(c.events,c))}function F(){const K=x(),H=c.previous,B=c.currentConstruct,A=c.events.length,I=Array.from(a);return{from:A,restore:M};function M(){r=K,c.previous=H,c.currentConstruct=B,c.events.length=A,a=I,$()}}function $(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function nYe(t,e){const n=e.start._index,r=e.start._bufferIndex,i=e.end._index,s=e.end._bufferIndex;let o;if(n===i)o=[t[n].slice(r,s)];else{if(o=t.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(t[i].slice(0,s))}return o}function rYe(t,e){let n=-1;const r=[];let i;for(;++n<t.length;){const s=t[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}function iYe(t){const r={constructs:_de([eYe,...(t||{}).extensions||[]]),content:i(vKe),defined:[],document:i(wKe),flow:i(UWe),lazy:{},string:i(zWe),text:i(HWe)};return r;function i(s){return o;function o(a){return tYe(r,s,a)}}}function sYe(t){for(;!Mde(t););return t}const gJ=/[\0\t\n\r]/g;function oYe(){let t=1,e="",n=!0,r;return i;function i(s,o,a){const l=[];let c,u,f,m,g;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),f=0,e="",n&&(s.charCodeAt(0)===65279&&f++,n=void 0);f<s.length;){if(gJ.lastIndex=f,c=gJ.exec(s),m=c&&c.index!==void 0?c.index:s.length,g=s.charCodeAt(m),!c){e=s.slice(f);break}if(g===10&&f===m&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),f<m&&(l.push(s.slice(f,m)),t+=m-f),g){case 0:{l.push(65533),t++;break}case 9:{for(u=Math.ceil(t/4)*4,l.push(-2);t++<u;)l.push(-1);break}case 10:{l.push(-4),t=1;break}default:r=!0,t=1}f=m+1}return a&&(r&&l.push(-5),e&&l.push(e),l.push(null)),l}}const aYe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function lYe(t){return t.replace(aYe,cYe)}function cYe(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return Ide(n.slice(s?2:1),s?16:10)}return KB(n)||t}const Fde={}.hasOwnProperty;function uYe(t,e,n){return typeof e!="string"&&(n=e,e=void 0),dYe(n)(sYe(iYe(n).document().write(oYe()(t,e,!0))))}function dYe(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(St),autolinkProtocol:F,autolinkEmail:F,atxHeading:s(ze),blockQuote:s(me),characterEscape:F,characterReference:F,codeFenced:s(ce),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(ce,o),codeText:s(oe,o),codeTextData:F,data:F,codeFlowValue:F,definition:s(ke),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(Ne),hardBreakEscape:s(Ze),hardBreakTrailing:s(Ze),htmlFlow:s(Ye,o),htmlFlowData:F,htmlText:s(Ye,o),htmlTextData:F,image:s(We),label:o,link:s(St),listItem:s(Bt),listItemValue:m,listOrdered:s(st,f),listUnordered:s(st),paragraph:s(Zt),reference:_,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(ze),strong:s(Ge),thematicBreak:s(un)},exit:{atxHeading:l(),atxHeadingSequence:j,autolink:l(),autolinkEmail:ue,autolinkProtocol:Ee,blockQuote:l(),characterEscapeValue:$,characterReferenceMarkerHexadecimal:X,characterReferenceMarkerNumeric:X,characterReferenceValue:re,characterReference:ae,codeFenced:l(w),codeFencedFence:v,codeFencedFenceInfo:g,codeFencedFenceMeta:x,codeFlowValue:$,codeIndented:l(E),codeText:l(I),codeTextData:$,data:$,definition:l(),definitionDestinationString:O,definitionLabelString:C,definitionTitleString:k,emphasis:l(),hardBreakEscape:l(H),hardBreakTrailing:l(H),htmlFlow:l(B),htmlFlowData:$,htmlText:l(A),htmlTextData:$,image:l(z),label:te,labelText:G,lineEnding:K,link:l(M),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:W,resourceDestinationString:Y,resourceTitleString:q,resource:D,setextHeading:l(V),setextHeadingLineSequence:U,setextHeadingText:R,strong:l(),thematicBreak:l()}};$de(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(Pe){let Ve={type:"root",children:[]};const ft={stack:[Ve],tokenStack:[],config:e,enter:a,exit:c,buffer:o,resume:u,data:n},lt=[];let se=-1;for(;++se<Pe.length;)if(Pe[se][1].type==="listOrdered"||Pe[se][1].type==="listUnordered")if(Pe[se][0]==="enter")lt.push(se);else{const J=lt.pop();se=i(Pe,J,se)}for(se=-1;++se<Pe.length;){const J=e[Pe[se][0]];Fde.call(J,Pe[se][1].type)&&J[Pe[se][1].type].call(Object.assign({sliceSerialize:Pe[se][2].sliceSerialize},ft),Pe[se][1])}if(ft.tokenStack.length>0){const J=ft.tokenStack[ft.tokenStack.length-1];(J[1]||yJ).call(ft,void 0,J[0])}for(Ve.position={start:uf(Pe.length>0?Pe[0][1].start:{line:1,column:1,offset:0}),end:uf(Pe.length>0?Pe[Pe.length-2][1].end:{line:1,column:1,offset:0})},se=-1;++se<e.transforms.length;)Ve=e.transforms[se](Ve)||Ve;return Ve}function i(Pe,Ve,ft){let lt=Ve-1,se=-1,J=!1,Z,fe,be,he;for(;++lt<=ft;){const ye=Pe[lt];switch(ye[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{ye[0]==="enter"?se++:se--,he=void 0;break}case"lineEndingBlank":{ye[0]==="enter"&&(Z&&!he&&!se&&!be&&(be=lt),he=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:he=void 0}if(!se&&ye[0]==="enter"&&ye[1].type==="listItemPrefix"||se===-1&&ye[0]==="exit"&&(ye[1].type==="listUnordered"||ye[1].type==="listOrdered")){if(Z){let Xe=lt;for(fe=void 0;Xe--;){const et=Pe[Xe];if(et[1].type==="lineEnding"||et[1].type==="lineEndingBlank"){if(et[0]==="exit")continue;fe&&(Pe[fe][1].type="lineEndingBlank",J=!0),et[1].type="lineEnding",fe=Xe}else if(!(et[1].type==="linePrefix"||et[1].type==="blockQuotePrefix"||et[1].type==="blockQuotePrefixWhitespace"||et[1].type==="blockQuoteMarker"||et[1].type==="listItemIndent"))break}be&&(!fe||be<fe)&&(Z._spread=!0),Z.end=Object.assign({},fe?Pe[fe][1].start:ye[1].end),Pe.splice(fe||lt,0,["exit",Z,ye[2]]),lt++,ft++}if(ye[1].type==="listItemPrefix"){const Xe={type:"listItem",_spread:!1,start:Object.assign({},ye[1].start),end:void 0};Z=Xe,Pe.splice(lt,0,["enter",Xe,ye[2]]),lt++,ft++,be=void 0,he=!0}}}return Pe[Ve][1]._spread=J,ft}function s(Pe,Ve){return ft;function ft(lt){a.call(this,Pe(lt),lt),Ve&&Ve.call(this,lt)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(Pe,Ve,ft){this.stack[this.stack.length-1].children.push(Pe),this.stack.push(Pe),this.tokenStack.push([Ve,ft||void 0]),Pe.position={start:uf(Ve.start),end:void 0}}function l(Pe){return Ve;function Ve(ft){Pe&&Pe.call(this,ft),c.call(this,ft)}}function c(Pe,Ve){const ft=this.stack.pop(),lt=this.tokenStack.pop();if(lt)lt[0].type!==Pe.type&&(Ve?Ve.call(this,Pe,lt[0]):(lt[1]||yJ).call(this,Pe,lt[0]));else throw new Error("Cannot close `"+Pe.type+"` ("+qb({start:Pe.start,end:Pe.end})+"): its not open");ft.position.end=uf(Pe.end)}function u(){return GB(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function m(Pe){if(this.data.expectingFirstListItemValue){const Ve=this.stack[this.stack.length-2];Ve.start=Number.parseInt(this.sliceSerialize(Pe),10),this.data.expectingFirstListItemValue=void 0}}function g(){const Pe=this.resume(),Ve=this.stack[this.stack.length-1];Ve.lang=Pe}function x(){const Pe=this.resume(),Ve=this.stack[this.stack.length-1];Ve.meta=Pe}function v(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function w(){const Pe=this.resume(),Ve=this.stack[this.stack.length-1];Ve.value=Pe.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function E(){const Pe=this.resume(),Ve=this.stack[this.stack.length-1];Ve.value=Pe.replace(/(\r?\n|\r)$/g,"")}function C(Pe){const Ve=this.resume(),ft=this.stack[this.stack.length-1];ft.label=Ve,ft.identifier=wl(this.sliceSerialize(Pe)).toLowerCase()}function k(){const Pe=this.resume(),Ve=this.stack[this.stack.length-1];Ve.title=Pe}function O(){const Pe=this.resume(),Ve=this.stack[this.stack.length-1];Ve.url=Pe}function j(Pe){const Ve=this.stack[this.stack.length-1];if(!Ve.depth){const ft=this.sliceSerialize(Pe).length;Ve.depth=ft}}function R(){this.data.setextHeadingSlurpLineEnding=!0}function U(Pe){const Ve=this.stack[this.stack.length-1];Ve.depth=this.sliceSerialize(Pe).codePointAt(0)===61?1:2}function V(){this.data.setextHeadingSlurpLineEnding=void 0}function F(Pe){const ft=this.stack[this.stack.length-1].children;let lt=ft[ft.length-1];(!lt||lt.type!=="text")&&(lt=At(),lt.position={start:uf(Pe.start),end:void 0},ft.push(lt)),this.stack.push(lt)}function $(Pe){const Ve=this.stack.pop();Ve.value+=this.sliceSerialize(Pe),Ve.position.end=uf(Pe.end)}function K(Pe){const Ve=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ft=Ve.children[Ve.children.length-1];ft.position.end=uf(Pe.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(Ve.type)&&(F.call(this,Pe),$.call(this,Pe))}function H(){this.data.atHardBreak=!0}function B(){const Pe=this.resume(),Ve=this.stack[this.stack.length-1];Ve.value=Pe}function A(){const Pe=this.resume(),Ve=this.stack[this.stack.length-1];Ve.value=Pe}function I(){const Pe=this.resume(),Ve=this.stack[this.stack.length-1];Ve.value=Pe}function M(){const Pe=this.stack[this.stack.length-1];if(this.data.inReference){const Ve=this.data.referenceType||"shortcut";Pe.type+="Reference",Pe.referenceType=Ve,delete Pe.url,delete Pe.title}else delete Pe.identifier,delete Pe.label;this.data.referenceType=void 0}function z(){const Pe=this.stack[this.stack.length-1];if(this.data.inReference){const Ve=this.data.referenceType||"shortcut";Pe.type+="Reference",Pe.referenceType=Ve,delete Pe.url,delete Pe.title}else delete Pe.identifier,delete Pe.label;this.data.referenceType=void 0}function G(Pe){const Ve=this.sliceSerialize(Pe),ft=this.stack[this.stack.length-2];ft.label=lYe(Ve),ft.identifier=wl(Ve).toLowerCase()}function te(){const Pe=this.stack[this.stack.length-1],Ve=this.resume(),ft=this.stack[this.stack.length-1];if(this.data.inReference=!0,ft.type==="link"){const lt=Pe.children;ft.children=lt}else ft.alt=Ve}function Y(){const Pe=this.resume(),Ve=this.stack[this.stack.length-1];Ve.url=Pe}function q(){const Pe=this.resume(),Ve=this.stack[this.stack.length-1];Ve.title=Pe}function D(){this.data.inReference=void 0}function _(){this.data.referenceType="collapsed"}function W(Pe){const Ve=this.resume(),ft=this.stack[this.stack.length-1];ft.label=Ve,ft.identifier=wl(this.sliceSerialize(Pe)).toLowerCase(),this.data.referenceType="full"}function X(Pe){this.data.characterReferenceType=Pe.type}function re(Pe){const Ve=this.sliceSerialize(Pe),ft=this.data.characterReferenceType;let lt;ft?(lt=Ide(Ve,ft==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):lt=KB(Ve);const se=this.stack[this.stack.length-1];se.value+=lt}function ae(Pe){const Ve=this.stack.pop();Ve.position.end=uf(Pe.end)}function Ee(Pe){$.call(this,Pe);const Ve=this.stack[this.stack.length-1];Ve.url=this.sliceSerialize(Pe)}function ue(Pe){$.call(this,Pe);const Ve=this.stack[this.stack.length-1];Ve.url="mailto:"+this.sliceSerialize(Pe)}function me(){return{type:"blockquote",children:[]}}function ce(){return{type:"code",lang:null,meta:null,value:""}}function oe(){return{type:"inlineCode",value:""}}function ke(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ne(){return{type:"emphasis",children:[]}}function ze(){return{type:"heading",depth:0,children:[]}}function Ze(){return{type:"break"}}function Ye(){return{type:"html",value:""}}function We(){return{type:"image",title:null,url:"",alt:null}}function St(){return{type:"link",title:null,url:"",children:[]}}function st(Pe){return{type:"list",ordered:Pe.type==="listOrdered",start:null,spread:Pe._spread,children:[]}}function Bt(Pe){return{type:"listItem",spread:Pe._spread,checked:null,children:[]}}function Zt(){return{type:"paragraph",children:[]}}function Ge(){return{type:"strong",children:[]}}function At(){return{type:"text",value:""}}function un(){return{type:"thematicBreak"}}}function uf(t){return{line:t.line,column:t.column,offset:t.offset}}function $de(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?$de(t,r):fYe(t,r)}}function fYe(t,e){let n;for(n in e)if(Fde.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function yJ(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+qb({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+qb({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+qb({start:e.start,end:e.end})+") is still open")}function hYe(t){const e=this;e.parser=n;function n(r){return uYe(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function pYe(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function mYe(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function gYe(t,e){const n=e.value?e.value+`
`:"",r={},i=e.lang?e.lang.split(/\s+/):[];i.length>0&&(r.className=["language-"+i[0]]);let s={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(s.data={meta:e.meta}),t.patch(e,s),s=t.applyData(e,s),s={type:"element",tagName:"pre",properties:{},children:[s]},t.patch(e,s),s}function yYe(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function xYe(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function vYe(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),i=Jx(r.toLowerCase()),s=t.footnoteOrder.indexOf(r);let o,a=t.footnoteCounts.get(r);a===void 0?(a=0,t.footnoteOrder.push(r),o=t.footnoteOrder.length):o=s+1,a+=1,t.footnoteCounts.set(r,a);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};t.patch(e,l);const c={type:"element",tagName:"sup",properties:{},children:[l]};return t.patch(e,c),t.applyData(e,c)}function bYe(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function wYe(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function zde(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const i=t.all(e),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function EYe(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return zde(t,e);const i={src:Jx(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return t.patch(e,s),t.applyData(e,s)}function SYe(t,e){const n={src:Jx(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function AYe(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function TYe(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return zde(t,e);const i={href:Jx(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function kYe(t,e){const n={href:Jx(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function CYe(t,e,n){const r=t.all(e),i=n?NYe(n):Hde(e),s={},o=[];if(typeof e.checked=="boolean"){const u=r[0];let f;u&&u.type==="element"&&u.tagName==="p"?f=u:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const u=r[a];(i||a!==0||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`}),u.type==="element"&&u.tagName==="p"&&!i?o.push(...u.children):o.push(u)}const l=r[r.length-1];l&&(i||l.type!=="element"||l.tagName!=="p")&&o.push({type:"text",value:`
`});const c={type:"element",tagName:"li",properties:s,children:o};return t.patch(e,c),t.applyData(e,c)}function NYe(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=Hde(n[r])}return e}function Hde(t){const e=t.spread;return e??t.children.length>1}function _Ye(t,e){const n={},r=t.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,s),t.applyData(e,s)}function IYe(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function PYe(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function RYe(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function OYe(t,e){const n=t.all(e),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},a=zB(e.children[1]),l=Ede(e.children[e.children.length-1]);a&&l&&(o.position={start:a,end:l}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:t.wrap(i,!0)};return t.patch(e,s),t.applyData(e,s)}function MYe(t,e,n){const r=n?n.children:void 0,s=(r?r.indexOf(e):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:e.children.length;let l=-1;const c=[];for(;++l<a;){const f=e.children[l],m={},g=o?o[l]:void 0;g&&(m.align=g);let x={type:"element",tagName:s,properties:m,children:[]};f&&(x.children=t.all(f),t.patch(f,x),x=t.applyData(f,x)),c.push(x)}const u={type:"element",tagName:"tr",properties:{},children:t.wrap(c,!0)};return t.patch(e,u),t.applyData(e,u)}function DYe(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const xJ=9,vJ=32;function LYe(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),i=0;const s=[];for(;r;)s.push(bJ(e.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(e);return s.push(bJ(e.slice(i),i>0,!1)),s.join("")}function bJ(t,e,n){let r=0,i=t.length;if(e){let s=t.codePointAt(r);for(;s===xJ||s===vJ;)r++,s=t.codePointAt(r)}if(n){let s=t.codePointAt(i-1);for(;s===xJ||s===vJ;)i--,s=t.codePointAt(i-1)}return i>r?t.slice(r,i):""}function BYe(t,e){const n={type:"text",value:LYe(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function jYe(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const UYe={blockquote:pYe,break:mYe,code:gYe,delete:yYe,emphasis:xYe,footnoteReference:vYe,heading:bYe,html:wYe,imageReference:EYe,image:SYe,inlineCode:AYe,linkReference:TYe,link:kYe,listItem:CYe,list:_Ye,paragraph:IYe,root:PYe,strong:RYe,table:OYe,tableCell:DYe,tableRow:MYe,text:BYe,thematicBreak:jYe,toml:mA,yaml:mA,definition:mA,footnoteDefinition:mA};function mA(){}const Vde=-1,yN=0,Kb=1,Yk=2,YB=3,JB=4,XB=5,QB=6,qde=7,Gde=8,wJ=typeof self=="object"?self:globalThis,FYe=(t,e)=>{const n=(i,s)=>(t.set(s,i),i),r=i=>{if(t.has(i))return t.get(i);const[s,o]=e[i];switch(s){case yN:case Vde:return n(o,i);case Kb:{const a=n([],i);for(const l of o)a.push(r(l));return a}case Yk:{const a=n({},i);for(const[l,c]of o)a[r(l)]=r(c);return a}case YB:return n(new Date(o),i);case JB:{const{source:a,flags:l}=o;return n(new RegExp(a,l),i)}case XB:{const a=n(new Map,i);for(const[l,c]of o)a.set(r(l),r(c));return a}case QB:{const a=n(new Set,i);for(const l of o)a.add(r(l));return a}case qde:{const{name:a,message:l}=o;return n(new wJ[a](l),i)}case Gde:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:a}=new Uint8Array(o);return n(new DataView(a),o)}}return n(new wJ[s](o),i)};return r},EJ=t=>FYe(new Map,t)(0),z0="",{toString:$Ye}={},{keys:zYe}=Object,pb=t=>{const e=typeof t;if(e!=="object"||!t)return[yN,e];const n=$Ye.call(t).slice(8,-1);switch(n){case"Array":return[Kb,z0];case"Object":return[Yk,z0];case"Date":return[YB,z0];case"RegExp":return[JB,z0];case"Map":return[XB,z0];case"Set":return[QB,z0];case"DataView":return[Kb,n]}return n.includes("Array")?[Kb,n]:n.includes("Error")?[qde,n]:[Yk,n]},gA=([t,e])=>t===yN&&(e==="function"||e==="symbol"),HYe=(t,e,n,r)=>{const i=(o,a)=>{const l=r.push(o)-1;return n.set(a,l),l},s=o=>{if(n.has(o))return n.get(o);let[a,l]=pb(o);switch(a){case yN:{let u=o;switch(l){case"bigint":a=Gde,u=o.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+l);u=null;break;case"undefined":return i([Vde],o)}return i([a,u],o)}case Kb:{if(l){let m=o;return l==="DataView"?m=new Uint8Array(o.buffer):l==="ArrayBuffer"&&(m=new Uint8Array(o)),i([l,[...m]],o)}const u=[],f=i([a,u],o);for(const m of o)u.push(s(m));return f}case Yk:{if(l)switch(l){case"BigInt":return i([l,o.toString()],o);case"Boolean":case"Number":case"String":return i([l,o.valueOf()],o)}if(e&&"toJSON"in o)return s(o.toJSON());const u=[],f=i([a,u],o);for(const m of zYe(o))(t||!gA(pb(o[m])))&&u.push([s(m),s(o[m])]);return f}case YB:return i([a,o.toISOString()],o);case JB:{const{source:u,flags:f}=o;return i([a,{source:u,flags:f}],o)}case XB:{const u=[],f=i([a,u],o);for(const[m,g]of o)(t||!(gA(pb(m))||gA(pb(g))))&&u.push([s(m),s(g)]);return f}case QB:{const u=[],f=i([a,u],o);for(const m of o)(t||!gA(pb(m)))&&u.push(s(m));return f}}const{message:c}=o;return i([a,{name:l,message:c}],o)};return s},SJ=(t,{json:e,lossy:n}={})=>{const r=[];return HYe(!(e||n),!!e,new Map,r)(t),r},Jk=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?EJ(SJ(t,e)):structuredClone(t):(t,e)=>EJ(SJ(t,e));function VYe(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function qYe(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function GYe(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||VYe,r=t.options.footnoteBackLabel||qYe,i=t.options.footnoteLabel||"Footnotes",s=t.options.footnoteLabelTagName||"h2",o=t.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let l=-1;for(;++l<t.footnoteOrder.length;){const c=t.footnoteById.get(t.footnoteOrder[l]);if(!c)continue;const u=t.all(c),f=String(c.identifier).toUpperCase(),m=Jx(f.toLowerCase());let g=0;const x=[],v=t.footnoteCounts.get(f);for(;v!==void 0&&++g<=v;){x.length>0&&x.push({type:"text",value:" "});let C=typeof n=="string"?n:n(l,g);typeof C=="string"&&(C={type:"text",value:C}),x.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+m+(g>1?"-"+g:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(l,g),className:["data-footnote-backref"]},children:Array.isArray(C)?C:[C]})}const w=u[u.length-1];if(w&&w.type==="element"&&w.tagName==="p"){const C=w.children[w.children.length-1];C&&C.type==="text"?C.value+=" ":w.children.push({type:"text",value:" "}),w.children.push(...x)}else u.push(...x);const E={type:"element",tagName:"li",properties:{id:e+"fn-"+m},children:t.wrap(u,!0)};t.patch(c,E),a.push(E)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...Jk(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(a,!0)},{type:"text",value:`
`}]}}const xN=(function(t){if(t==null)return JYe;if(typeof t=="function")return vN(t);if(typeof t=="object")return Array.isArray(t)?KYe(t):WYe(t);if(typeof t=="string")return YYe(t);throw new Error("Expected function, string, or object as test")});function KYe(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=xN(t[n]);return vN(r);function r(...i){let s=-1;for(;++s<e.length;)if(e[s].apply(this,i))return!0;return!1}}function WYe(t){const e=t;return vN(n);function n(r){const i=r;let s;for(s in t)if(i[s]!==e[s])return!1;return!0}}function YYe(t){return vN(e);function e(n){return n&&n.type===t}}function vN(t){return e;function e(n,r,i){return!!(XYe(n)&&t.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function JYe(){return!0}function XYe(t){return t!==null&&typeof t=="object"&&"type"in t}const Kde=[],QYe=!0,yD=!1,ZYe="skip";function Wde(t,e,n,r){let i;typeof e=="function"&&typeof n!="function"?(r=n,n=e):i=e;const s=xN(i),o=r?-1:1;a(t,void 0,[])();function a(l,c,u){const f=l&&typeof l=="object"?l:{};if(typeof f.type=="string"){const g=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(m,"name",{value:"node ("+(l.type+(g?"<"+g+">":""))+")"})}return m;function m(){let g=Kde,x,v,w;if((!e||s(l,c,u[u.length-1]||void 0))&&(g=eJe(n(l,u)),g[0]===yD))return g;if("children"in l&&l.children){const E=l;if(E.children&&g[0]!==ZYe)for(v=(r?E.children.length:-1)+o,w=u.concat(E);v>-1&&v<E.children.length;){const C=E.children[v];if(x=a(C,v,w)(),x[0]===yD)return x;v=typeof x[1]=="number"?x[1]:v+o}}return g}}}function eJe(t){return Array.isArray(t)?t:typeof t=="number"?[QYe,t]:t==null?Kde:[t]}function ZB(t,e,n,r){let i,s,o;typeof e=="function"&&typeof n!="function"?(s=void 0,o=e,i=n):(s=e,o=n,i=r),Wde(t,s,a,i);function a(l,c){const u=c[c.length-1],f=u?u.children.indexOf(l):void 0;return o(l,f,u)}}const xD={}.hasOwnProperty,tJe={};function nJe(t,e){const n=e||tJe,r=new Map,i=new Map,s=new Map,o={...UYe,...n.handlers},a={all:c,applyData:iJe,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:l,options:n,patch:rJe,wrap:oJe};return ZB(t,function(u){if(u.type==="definition"||u.type==="footnoteDefinition"){const f=u.type==="definition"?r:i,m=String(u.identifier).toUpperCase();f.has(m)||f.set(m,u)}}),a;function l(u,f){const m=u.type,g=a.handlers[m];if(xD.call(a.handlers,m)&&g)return g(a,u,f);if(a.options.passThrough&&a.options.passThrough.includes(m)){if("children"in u){const{children:v,...w}=u,E=Jk(w);return E.children=a.all(u),E}return Jk(u)}return(a.options.unknownHandler||sJe)(a,u,f)}function c(u){const f=[];if("children"in u){const m=u.children;let g=-1;for(;++g<m.length;){const x=a.one(m[g],u);if(x){if(g&&m[g-1].type==="break"&&(!Array.isArray(x)&&x.type==="text"&&(x.value=AJ(x.value)),!Array.isArray(x)&&x.type==="element")){const v=x.children[0];v&&v.type==="text"&&(v.value=AJ(v.value))}Array.isArray(x)?f.push(...x):f.push(x)}}}return f}}function rJe(t,e){t.position&&(e.position=qGe(t))}function iJe(t,e){let n=e;if(t&&t.data){const r=t.data.hName,i=t.data.hChildren,s=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,Jk(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function sJe(t,e){const n=e.data||{},r="value"in e&&!(xD.call(n,"hProperties")||xD.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function oJe(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function AJ(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function TJ(t,e){const n=nJe(t,e),r=n.one(t,void 0),i=GYe(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function aJe(t,e){return t&&"run"in t?async function(n,r){const i=TJ(n,{file:r,...e});await t.run(i,r)}:function(n,r){return TJ(n,{file:r,...t||e})}}function kJ(t){if(t)throw t}var _5,CJ;function lJe(){if(CJ)return _5;CJ=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(c){return typeof Array.isArray=="function"?Array.isArray(c):e.call(c)==="[object Array]"},s=function(c){if(!c||e.call(c)!=="[object Object]")return!1;var u=t.call(c,"constructor"),f=c.constructor&&c.constructor.prototype&&t.call(c.constructor.prototype,"isPrototypeOf");if(c.constructor&&!u&&!f)return!1;var m;for(m in c);return typeof m>"u"||t.call(c,m)},o=function(c,u){n&&u.name==="__proto__"?n(c,u.name,{enumerable:!0,configurable:!0,value:u.newValue,writable:!0}):c[u.name]=u.newValue},a=function(c,u){if(u==="__proto__")if(t.call(c,u)){if(r)return r(c,u).value}else return;return c[u]};return _5=function l(){var c,u,f,m,g,x,v=arguments[0],w=1,E=arguments.length,C=!1;for(typeof v=="boolean"&&(C=v,v=arguments[1]||{},w=2),(v==null||typeof v!="object"&&typeof v!="function")&&(v={});w<E;++w)if(c=arguments[w],c!=null)for(u in c)f=a(v,u),m=a(c,u),v!==m&&(C&&m&&(s(m)||(g=i(m)))?(g?(g=!1,x=f&&i(f)?f:[]):x=f&&s(f)?f:{},o(v,{name:u,newValue:l(C,x,m)})):typeof m<"u"&&o(v,{name:u,newValue:m}));return v},_5}var cJe=lJe();const I5=cs(cJe);function vD(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function uJe(){const t=[],e={run:n,use:r};return e;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(l,...c){const u=t[++s];let f=-1;if(l){o(l);return}for(;++f<i.length;)(c[f]===null||c[f]===void 0)&&(c[f]=i[f]);i=c,u?dJe(u,a)(...c):o(null,...c)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return t.push(i),e}}function dJe(t,e){let n;return r;function r(...o){const a=t.length>o.length;let l;a&&o.push(i);try{l=t.apply(this,o)}catch(c){const u=c;if(a&&n)throw u;return i(u)}a||(l&&l.then&&typeof l.then=="function"?l.then(s,i):l instanceof Error?i(l):s(l))}function i(o,...a){n||(n=!0,e(o,...a))}function s(o){i(null,o)}}const Wl={basename:fJe,dirname:hJe,extname:pJe,join:mJe,sep:"/"};function fJe(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');nE(t);let n=0,r=-1,i=t.length,s;if(e===void 0||e.length===0||e.length>t.length){for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let o=-1,a=e.length-1;for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(t.codePointAt(i)===e.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=t.length),t.slice(n,r)}function hJe(t){if(nE(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function pJe(t){nE(t);let e=t.length,n=-1,r=0,i=-1,s=0,o;for(;e--;){const a=t.codePointAt(e);if(a===47){if(o){r=e+1;break}continue}n<0&&(o=!0,n=e+1),a===46?i<0?i=e:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":t.slice(i,n)}function mJe(...t){let e=-1,n;for(;++e<t.length;)nE(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":gJe(n)}function gJe(t){nE(t);const e=t.codePointAt(0)===47;let n=yJe(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function yJe(t,e){let n="",r=0,i=-1,s=0,o=-1,a,l;for(;++o<=t.length;){if(o<t.length)a=t.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(i+1,o):n=t.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function nE(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const xJe={cwd:vJe};function vJe(){return"/"}function bD(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function bJe(t){if(typeof t=="string")t=new URL(t);else if(!bD(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return wJe(t)}function wJe(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const P5=["history","path","basename","stem","extname","dirname"];class Yde{constructor(e){let n;e?bD(e)?n={path:e}:typeof e=="string"||EJe(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":xJe.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<P5.length;){const s=P5[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)P5.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Wl.basename(this.path):void 0}set basename(e){O5(e,"basename"),R5(e,"basename"),this.path=Wl.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?Wl.dirname(this.path):void 0}set dirname(e){NJ(this.basename,"dirname"),this.path=Wl.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?Wl.extname(this.path):void 0}set extname(e){if(R5(e,"extname"),NJ(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Wl.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){bD(e)&&(e=bJe(e)),O5(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?Wl.basename(this.path,this.extname):void 0}set stem(e){O5(e,"stem"),R5(e,"stem"),this.path=Wl.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const i=this.message(e,n,r);throw i.fatal=!0,i}info(e,n,r){const i=this.message(e,n,r);return i.fatal=void 0,i}message(e,n,r){const i=new Rs(e,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function R5(t,e){if(t&&t.includes(Wl.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Wl.sep+"`")}function O5(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function NJ(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function EJe(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const SJe=(function(t){const r=this.constructor.prototype,i=r[t],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s}),AJe={}.hasOwnProperty;class ej extends SJe{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=uJe()}copy(){const e=new ej;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(I5(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(L5("data",this.frozen),this.namespace[e]=n,this):AJe.call(this.namespace,e)&&this.namespace[e]||void 0:e?(L5("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(e,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=yA(e),r=this.parser||this.Parser;return M5("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),M5("process",this.parser||this.Parser),D5("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=yA(e),l=r.parse(a);r.run(l,a,function(u,f,m){if(u||!f||!m)return c(u);const g=f,x=r.stringify(g,m);CJe(x)?m.value=x:m.result=x,c(u,m)});function c(u,f){u||!f?o(u):s?s(f):n(void 0,f)}}}processSync(e){let n=!1,r;return this.freeze(),M5("processSync",this.parser||this.Parser),D5("processSync",this.compiler||this.Compiler),this.process(e,i),IJ("processSync","process",n),r;function i(s,o){n=!0,kJ(s),r=o}}run(e,n,r){_J(e),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const l=yA(n);i.run(e,l,c);function c(u,f,m){const g=f||e;u?a(u):o?o(g):r(void 0,g,m)}}}runSync(e,n){let r=!1,i;return this.run(e,n,s),IJ("runSync","run",r),i;function s(o,a){kJ(o),i=a,r=!0}}stringify(e,n){this.freeze();const r=yA(n),i=this.compiler||this.Compiler;return D5("stringify",i),_J(e),i(e,r)}use(e,...n){const r=this.attachers,i=this.namespace;if(L5("use",this.frozen),e!=null)if(typeof e=="function")l(e,n);else if(typeof e=="object")Array.isArray(e)?a(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(c){if(typeof c=="function")l(c,[]);else if(typeof c=="object")if(Array.isArray(c)){const[u,...f]=c;l(u,f)}else o(c);else throw new TypeError("Expected usable value, not `"+c+"`")}function o(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(c.plugins),c.settings&&(i.settings=I5(!0,i.settings,c.settings))}function a(c){let u=-1;if(c!=null)if(Array.isArray(c))for(;++u<c.length;){const f=c[u];s(f)}else throw new TypeError("Expected a list of plugins, not `"+c+"`")}function l(c,u){let f=-1,m=-1;for(;++f<r.length;)if(r[f][0]===c){m=f;break}if(m===-1)r.push([c,...u]);else if(u.length>0){let[g,...x]=u;const v=r[m][1];vD(v)&&vD(g)&&(g=I5(!0,v,g)),r[m]=[c,g,...x]}}}}const TJe=new ej().freeze();function M5(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function D5(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function L5(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function _J(t){if(!vD(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function IJ(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function yA(t){return kJe(t)?t:new Yde(t)}function kJe(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function CJe(t){return typeof t=="string"||NJe(t)}function NJe(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const _Je="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",PJ=[],RJ={allowDangerousHtml:!0},IJe=/^(https?|ircs?|mailto|xmpp)$/i,PJe=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function RJe(t){const e=OJe(t),n=MJe(t);return DJe(e.runSync(e.parse(n),n),t)}function OJe(t){const e=t.rehypePlugins||PJ,n=t.remarkPlugins||PJ,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...RJ}:RJ;return TJe().use(hYe).use(n).use(aJe,r).use(e)}function MJe(t){const e=t.children||"",n=new Yde;return typeof e=="string"&&(n.value=e),n}function DJe(t,e){const n=e.allowedElements,r=e.allowElement,i=e.components,s=e.disallowedElements,o=e.skipHtml,a=e.unwrapDisallowed,l=e.urlTransform||LJe;for(const u of PJe)Object.hasOwn(e,u.from)&&(""+u.from+(u.to?"use `"+u.to+"` instead":"remove it")+_Je+u.id,void 0);return ZB(t,c),JGe(t,{Fragment:h.Fragment,components:i,ignoreInvalidStyle:!0,jsx:h.jsx,jsxs:h.jsxs,passKeys:!0,passNode:!0});function c(u,f,m){if(u.type==="raw"&&m&&typeof f=="number")return o?m.children.splice(f,1):m.children[f]={type:"text",value:u.value},f;if(u.type==="element"){let g;for(g in k5)if(Object.hasOwn(k5,g)&&Object.hasOwn(u.properties,g)){const x=u.properties[g],v=k5[g];(v===null||v.includes(u.tagName))&&(u.properties[g]=l(String(x||""),g,u))}}if(u.type==="element"){let g=n?!n.includes(u.tagName):s?s.includes(u.tagName):!1;if(!g&&r&&typeof f=="number"&&(g=!r(u,f,m)),g&&m&&typeof f=="number")return a&&u.children?m.children.splice(f,1,...u.children):m.children.splice(f,1),f}}}function LJe(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),i=t.indexOf("/");return e===-1||i!==-1&&e>i||n!==-1&&e>n||r!==-1&&e>r||IJe.test(t.slice(0,e))?t:""}function OJ(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(e);for(;i!==-1;)r++,i=n.indexOf(e,i+e.length);return r}function BJe(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function jJe(t,e,n){const i=xN((n||{}).ignore||[]),s=UJe(e);let o=-1;for(;++o<s.length;)Wde(t,"text",a);function a(c,u){let f=-1,m;for(;++f<u.length;){const g=u[f],x=m?m.children:void 0;if(i(g,x?x.indexOf(g):void 0,m))return;m=g}if(m)return l(c,u)}function l(c,u){const f=u[u.length-1],m=s[o][0],g=s[o][1];let x=0;const w=f.children.indexOf(c);let E=!1,C=[];m.lastIndex=0;let k=m.exec(c.value);for(;k;){const O=k.index,j={index:k.index,input:k.input,stack:[...u,c]};let R=g(...k,j);if(typeof R=="string"&&(R=R.length>0?{type:"text",value:R}:void 0),R===!1?m.lastIndex=O+1:(x!==O&&C.push({type:"text",value:c.value.slice(x,O)}),Array.isArray(R)?C.push(...R):R&&C.push(R),x=O+k[0].length,E=!0),!m.global)break;k=m.exec(c.value)}return E?(x<c.value.length&&C.push({type:"text",value:c.value.slice(x)}),f.children.splice(w,1,...C)):C=[c],w+C.length}}function UJe(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let r=-1;for(;++r<n.length;){const i=n[r];e.push([FJe(i[0]),$Je(i[1])])}return e}function FJe(t){return typeof t=="string"?new RegExp(BJe(t),"g"):t}function $Je(t){return typeof t=="function"?t:function(){return t}}const B5="phrasing",j5=["autolink","link","image","label"];function zJe(){return{transforms:[YJe],enter:{literalAutolink:VJe,literalAutolinkEmail:U5,literalAutolinkHttp:U5,literalAutolinkWww:U5},exit:{literalAutolink:WJe,literalAutolinkEmail:KJe,literalAutolinkHttp:qJe,literalAutolinkWww:GJe}}}function HJe(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:B5,notInConstruct:j5},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:B5,notInConstruct:j5},{character:":",before:"[ps]",after:"\\/",inConstruct:B5,notInConstruct:j5}]}}function VJe(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function U5(t){this.config.enter.autolinkProtocol.call(this,t)}function qJe(t){this.config.exit.autolinkProtocol.call(this,t)}function GJe(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function KJe(t){this.config.exit.autolinkEmail.call(this,t)}function WJe(t){this.exit(t)}function YJe(t){jJe(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,JJe],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),XJe]],{ignore:["link","linkReference"]})}function JJe(t,e,n,r,i){let s="";if(!Jde(i)||(/^w/i.test(e)&&(n=e+n,e="",s="http://"),!QJe(n)))return!1;const o=ZJe(n+r);if(!o[0])return!1;const a={type:"link",title:null,url:s+e+o[0],children:[{type:"text",value:e+o[0]}]};return o[1]?[a,{type:"text",value:o[1]}]:a}function XJe(t,e,n,r){return!Jde(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function QJe(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function ZJe(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],r=n.indexOf(")");const i=OJ(t,"(");let s=OJ(t,")");for(;r!==-1&&i>s;)t+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),s++;return[t,n]}function Jde(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||wm(n)||mN(n))&&(!e||n!==47)}Xde.peek=lXe;function eXe(){this.buffer()}function tXe(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function nXe(){this.buffer()}function rXe(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function iXe(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=wl(this.sliceSerialize(t)).toLowerCase(),n.label=e}function sXe(t){this.exit(t)}function oXe(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=wl(this.sliceSerialize(t)).toLowerCase(),n.label=e}function aXe(t){this.exit(t)}function lXe(){return"["}function Xde(t,e,n,r){const i=n.createTracker(r);let s=i.move("[^");const o=n.enter("footnoteReference"),a=n.enter("reference");return s+=i.move(n.safe(n.associationId(t),{after:"]",before:s})),a(),o(),s+=i.move("]"),s}function cXe(){return{enter:{gfmFootnoteCallString:eXe,gfmFootnoteCall:tXe,gfmFootnoteDefinitionLabelString:nXe,gfmFootnoteDefinition:rXe},exit:{gfmFootnoteCallString:iXe,gfmFootnoteCall:sXe,gfmFootnoteDefinitionLabelString:oXe,gfmFootnoteDefinition:aXe}}}function uXe(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:Xde},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,i,s,o){const a=s.createTracker(o);let l=a.move("[^");const c=s.enter("footnoteDefinition"),u=s.enter("label");return l+=a.move(s.safe(s.associationId(r),{before:l,after:"]"})),u(),l+=a.move("]:"),r.children&&r.children.length>0&&(a.shift(4),l+=a.move((e?`
`:" ")+s.indentLines(s.containerFlow(r,a.current()),e?Qde:dXe))),c(),l}}function dXe(t,e,n){return e===0?t:Qde(t,e,n)}function Qde(t,e,n){return(n?"":"    ")+t}const fXe=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];Zde.peek=yXe;function hXe(){return{canContainEols:["delete"],enter:{strikethrough:mXe},exit:{strikethrough:gXe}}}function pXe(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:fXe}],handlers:{delete:Zde}}}function mXe(t){this.enter({type:"delete",children:[]},t)}function gXe(t){this.exit(t)}function Zde(t,e,n,r){const i=n.createTracker(r),s=n.enter("strikethrough");let o=i.move("~~");return o+=n.containerPhrasing(t,{...i.current(),before:o,after:"~"}),o+=i.move("~~"),s(),o}function yXe(){return"~"}function xXe(t){return t.length}function vXe(t,e){const n=e||{},r=(n.align||[]).concat(),i=n.stringLength||xXe,s=[],o=[],a=[],l=[];let c=0,u=-1;for(;++u<t.length;){const v=[],w=[];let E=-1;for(t[u].length>c&&(c=t[u].length);++E<t[u].length;){const C=bXe(t[u][E]);if(n.alignDelimiters!==!1){const k=i(C);w[E]=k,(l[E]===void 0||k>l[E])&&(l[E]=k)}v.push(C)}o[u]=v,a[u]=w}let f=-1;if(typeof r=="object"&&"length"in r)for(;++f<c;)s[f]=MJ(r[f]);else{const v=MJ(r);for(;++f<c;)s[f]=v}f=-1;const m=[],g=[];for(;++f<c;){const v=s[f];let w="",E="";v===99?(w=":",E=":"):v===108?w=":":v===114&&(E=":");let C=n.alignDelimiters===!1?1:Math.max(1,l[f]-w.length-E.length);const k=w+"-".repeat(C)+E;n.alignDelimiters!==!1&&(C=w.length+C+E.length,C>l[f]&&(l[f]=C),g[f]=C),m[f]=k}o.splice(1,0,m),a.splice(1,0,g),u=-1;const x=[];for(;++u<o.length;){const v=o[u],w=a[u];f=-1;const E=[];for(;++f<c;){const C=v[f]||"";let k="",O="";if(n.alignDelimiters!==!1){const j=l[f]-(w[f]||0),R=s[f];R===114?k=" ".repeat(j):R===99?j%2?(k=" ".repeat(j/2+.5),O=" ".repeat(j/2-.5)):(k=" ".repeat(j/2),O=k):O=" ".repeat(j)}n.delimiterStart!==!1&&!f&&E.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&C==="")&&(n.delimiterStart!==!1||f)&&E.push(" "),n.alignDelimiters!==!1&&E.push(k),E.push(C),n.alignDelimiters!==!1&&E.push(O),n.padding!==!1&&E.push(" "),(n.delimiterEnd!==!1||f!==c-1)&&E.push("|")}x.push(n.delimiterEnd===!1?E.join("").replace(/ +$/,""):E.join(""))}return x.join(`
`)}function bXe(t){return t==null?"":String(t)}function MJ(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function wXe(t,e,n,r){const i=n.enter("blockquote"),s=n.createTracker(r);s.move("> "),s.shift(2);const o=n.indentLines(n.containerFlow(t,s.current()),EXe);return i(),o}function EXe(t,e,n){return">"+(n?"":" ")+t}function SXe(t,e){return DJ(t,e.inConstruct,!0)&&!DJ(t,e.notInConstruct,!1)}function DJ(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let r=-1;for(;++r<e.length;)if(t.includes(e[r]))return!0;return!1}function LJ(t,e,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&SXe(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function AXe(t,e){const n=String(t);let r=n.indexOf(e),i=r,s=0,o=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++s>o&&(o=s):s=1,i=r+e.length,r=n.indexOf(e,i);return o}function TXe(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function kXe(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function CXe(t,e,n,r){const i=kXe(n),s=t.value||"",o=i==="`"?"GraveAccent":"Tilde";if(TXe(t,n)){const f=n.enter("codeIndented"),m=n.indentLines(s,NXe);return f(),m}const a=n.createTracker(r),l=i.repeat(Math.max(AXe(s,i)+1,3)),c=n.enter("codeFenced");let u=a.move(l);if(t.lang){const f=n.enter(`codeFencedLang${o}`);u+=a.move(n.safe(t.lang,{before:u,after:" ",encode:["`"],...a.current()})),f()}if(t.lang&&t.meta){const f=n.enter(`codeFencedMeta${o}`);u+=a.move(" "),u+=a.move(n.safe(t.meta,{before:u,after:`
`,encode:["`"],...a.current()})),f()}return u+=a.move(`
`),s&&(u+=a.move(s+`
`)),u+=a.move(l),c(),u}function NXe(t,e,n){return(n?"":"    ")+t}function tj(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function _Xe(t,e,n,r){const i=tj(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("definition");let a=n.enter("label");const l=n.createTracker(r);let c=l.move("[");return c+=l.move(n.safe(n.associationId(t),{before:c,after:"]",...l.current()})),c+=l.move("]: "),a(),!t.url||/[\0- \u007F]/.test(t.url)?(a=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(t.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=n.enter("destinationRaw"),c+=l.move(n.safe(t.url,{before:c,after:t.title?" ":`
`,...l.current()}))),a(),t.title&&(a=n.enter(`title${s}`),c+=l.move(" "+i),c+=l.move(n.safe(t.title,{before:c,after:i,...l.current()})),c+=l.move(i),a()),o(),c}function IXe(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function Gw(t){return"&#x"+t.toString(16).toUpperCase()+";"}function Xk(t,e,n){const r=fx(t),i=fx(e);return r===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}efe.peek=PXe;function efe(t,e,n,r){const i=IXe(n),s=n.enter("emphasis"),o=n.createTracker(r),a=o.move(i);let l=o.move(n.containerPhrasing(t,{after:i,before:a,...o.current()}));const c=l.charCodeAt(0),u=Xk(r.before.charCodeAt(r.before.length-1),c,i);u.inside&&(l=Gw(c)+l.slice(1));const f=l.charCodeAt(l.length-1),m=Xk(r.after.charCodeAt(0),f,i);m.inside&&(l=l.slice(0,-1)+Gw(f));const g=o.move(i);return s(),n.attentionEncodeSurroundingInfo={after:m.outside,before:u.outside},a+l+g}function PXe(t,e,n){return n.options.emphasis||"*"}function RXe(t,e){let n=!1;return ZB(t,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,yD}),!!((!t.depth||t.depth<3)&&GB(t)&&(e.options.setext||n))}function OXe(t,e,n,r){const i=Math.max(Math.min(6,t.depth||1),1),s=n.createTracker(r);if(RXe(t,n)){const u=n.enter("headingSetext"),f=n.enter("phrasing"),m=n.containerPhrasing(t,{...s.current(),before:`
`,after:`
`});return f(),u(),m+`
`+(i===1?"=":"-").repeat(m.length-(Math.max(m.lastIndexOf("\r"),m.lastIndexOf(`
`))+1))}const o="#".repeat(i),a=n.enter("headingAtx"),l=n.enter("phrasing");s.move(o+" ");let c=n.containerPhrasing(t,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(c)&&(c=Gw(c.charCodeAt(0))+c.slice(1)),c=c?o+" "+c:o,n.options.closeAtx&&(c+=" "+o),l(),a(),c}tfe.peek=MXe;function tfe(t){return t.value||""}function MXe(){return"<"}nfe.peek=DXe;function nfe(t,e,n,r){const i=tj(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("image");let a=n.enter("label");const l=n.createTracker(r);let c=l.move("![");return c+=l.move(n.safe(t.alt,{before:c,after:"]",...l.current()})),c+=l.move("]("),a(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(a=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(t.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=n.enter("destinationRaw"),c+=l.move(n.safe(t.url,{before:c,after:t.title?" ":")",...l.current()}))),a(),t.title&&(a=n.enter(`title${s}`),c+=l.move(" "+i),c+=l.move(n.safe(t.title,{before:c,after:i,...l.current()})),c+=l.move(i),a()),c+=l.move(")"),o(),c}function DXe(){return"!"}rfe.peek=LXe;function rfe(t,e,n,r){const i=t.referenceType,s=n.enter("imageReference");let o=n.enter("label");const a=n.createTracker(r);let l=a.move("![");const c=n.safe(t.alt,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),o();const u=n.stack;n.stack=[],o=n.enter("reference");const f=n.safe(n.associationId(t),{before:l,after:"]",...a.current()});return o(),n.stack=u,s(),i==="full"||!c||c!==f?l+=a.move(f+"]"):i==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function LXe(){return"!"}ife.peek=BXe;function ife(t,e,n){let r=t.value||"",i="`",s=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++s<n.unsafe.length;){const o=n.unsafe[s],a=n.compilePattern(o);let l;if(o.atBreak)for(;l=a.exec(r);){let c=l.index;r.charCodeAt(c)===10&&r.charCodeAt(c-1)===13&&c--,r=r.slice(0,c)+" "+r.slice(l.index+1)}}return i+r+i}function BXe(){return"`"}function sfe(t,e){const n=GB(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}ofe.peek=jXe;function ofe(t,e,n,r){const i=tj(n),s=i==='"'?"Quote":"Apostrophe",o=n.createTracker(r);let a,l;if(sfe(t,n)){const u=n.stack;n.stack=[],a=n.enter("autolink");let f=o.move("<");return f+=o.move(n.containerPhrasing(t,{before:f,after:">",...o.current()})),f+=o.move(">"),a(),n.stack=u,f}a=n.enter("link"),l=n.enter("label");let c=o.move("[");return c+=o.move(n.containerPhrasing(t,{before:c,after:"](",...o.current()})),c+=o.move("]("),l(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),c+=o.move("<"),c+=o.move(n.safe(t.url,{before:c,after:">",...o.current()})),c+=o.move(">")):(l=n.enter("destinationRaw"),c+=o.move(n.safe(t.url,{before:c,after:t.title?" ":")",...o.current()}))),l(),t.title&&(l=n.enter(`title${s}`),c+=o.move(" "+i),c+=o.move(n.safe(t.title,{before:c,after:i,...o.current()})),c+=o.move(i),l()),c+=o.move(")"),a(),c}function jXe(t,e,n){return sfe(t,n)?"<":"["}afe.peek=UXe;function afe(t,e,n,r){const i=t.referenceType,s=n.enter("linkReference");let o=n.enter("label");const a=n.createTracker(r);let l=a.move("[");const c=n.containerPhrasing(t,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),o();const u=n.stack;n.stack=[],o=n.enter("reference");const f=n.safe(n.associationId(t),{before:l,after:"]",...a.current()});return o(),n.stack=u,s(),i==="full"||!c||c!==f?l+=a.move(f+"]"):i==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function UXe(){return"["}function nj(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function FXe(t){const e=nj(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function $Xe(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function lfe(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function zXe(t,e,n,r){const i=n.enter("list"),s=n.bulletCurrent;let o=t.ordered?$Xe(n):nj(n);const a=t.ordered?o==="."?")":".":FXe(n);let l=e&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!t.ordered){const u=t.children?t.children[0]:void 0;if((o==="*"||o==="-")&&u&&(!u.children||!u.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(l=!0),lfe(n)===o&&u){let f=-1;for(;++f<t.children.length;){const m=t.children[f];if(m&&m.type==="listItem"&&m.children&&m.children[0]&&m.children[0].type==="thematicBreak"){l=!0;break}}}}l&&(o=a),n.bulletCurrent=o;const c=n.containerFlow(t,r);return n.bulletLastUsed=o,n.bulletCurrent=s,i(),c}function HXe(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function VXe(t,e,n,r){const i=HXe(n);let s=n.bulletCurrent||nj(n);e&&e.type==="list"&&e.ordered&&(s=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+s);let o=s.length+1;(i==="tab"||i==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(o=Math.ceil(o/4)*4);const a=n.createTracker(r);a.move(s+" ".repeat(o-s.length)),a.shift(o);const l=n.enter("listItem"),c=n.indentLines(n.containerFlow(t,a.current()),u);return l(),c;function u(f,m,g){return m?(g?"":" ".repeat(o))+f:(g?s:s+" ".repeat(o-s.length))+f}}function qXe(t,e,n,r){const i=n.enter("paragraph"),s=n.enter("phrasing"),o=n.containerPhrasing(t,r);return s(),i(),o}const GXe=xN(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function KXe(t,e,n,r){return(t.children.some(function(o){return GXe(o)})?n.containerPhrasing:n.containerFlow).call(n,t,r)}function WXe(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}cfe.peek=YXe;function cfe(t,e,n,r){const i=WXe(n),s=n.enter("strong"),o=n.createTracker(r),a=o.move(i+i);let l=o.move(n.containerPhrasing(t,{after:i,before:a,...o.current()}));const c=l.charCodeAt(0),u=Xk(r.before.charCodeAt(r.before.length-1),c,i);u.inside&&(l=Gw(c)+l.slice(1));const f=l.charCodeAt(l.length-1),m=Xk(r.after.charCodeAt(0),f,i);m.inside&&(l=l.slice(0,-1)+Gw(f));const g=o.move(i+i);return s(),n.attentionEncodeSurroundingInfo={after:m.outside,before:u.outside},a+l+g}function YXe(t,e,n){return n.options.strong||"*"}function JXe(t,e,n,r){return n.safe(t.value,r)}function XXe(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function QXe(t,e,n){const r=(lfe(n)+(n.options.ruleSpaces?" ":"")).repeat(XXe(n));return n.options.ruleSpaces?r.slice(0,-1):r}const ufe={blockquote:wXe,break:LJ,code:CXe,definition:_Xe,emphasis:efe,hardBreak:LJ,heading:OXe,html:tfe,image:nfe,imageReference:rfe,inlineCode:ife,link:ofe,linkReference:afe,list:zXe,listItem:VXe,paragraph:qXe,root:KXe,strong:cfe,text:JXe,thematicBreak:QXe};function ZXe(){return{enter:{table:eQe,tableData:BJ,tableHeader:BJ,tableRow:nQe},exit:{codeText:rQe,table:tQe,tableData:F5,tableHeader:F5,tableRow:F5}}}function eQe(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function tQe(t){this.exit(t),this.data.inTable=void 0}function nQe(t){this.enter({type:"tableRow",children:[]},t)}function F5(t){this.exit(t)}function BJ(t){this.enter({type:"tableCell",children:[]},t)}function rQe(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,iQe));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function iQe(t,e){return e==="|"?e:t}function sQe(t){const e=t||{},n=e.tableCellPadding,r=e.tablePipeAlign,i=e.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:m,table:o,tableCell:l,tableRow:a}};function o(g,x,v,w){return c(u(g,v,w),g.align)}function a(g,x,v,w){const E=f(g,v,w),C=c([E]);return C.slice(0,C.indexOf(`
`))}function l(g,x,v,w){const E=v.enter("tableCell"),C=v.enter("phrasing"),k=v.containerPhrasing(g,{...w,before:s,after:s});return C(),E(),k}function c(g,x){return vXe(g,{align:x,alignDelimiters:r,padding:n,stringLength:i})}function u(g,x,v){const w=g.children;let E=-1;const C=[],k=x.enter("table");for(;++E<w.length;)C[E]=f(w[E],x,v);return k(),C}function f(g,x,v){const w=g.children;let E=-1;const C=[],k=x.enter("tableRow");for(;++E<w.length;)C[E]=l(w[E],g,x,v);return k(),C}function m(g,x,v){let w=ufe.inlineCode(g,x,v);return v.stack.includes("tableCell")&&(w=w.replace(/\|/g,"\\$&")),w}}function oQe(){return{exit:{taskListCheckValueChecked:jJ,taskListCheckValueUnchecked:jJ,paragraph:lQe}}}function aQe(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:cQe}}}function jJ(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function lQe(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const i=e.children;let s=-1,o;for(;++s<i.length;){const a=i[s];if(a.type==="paragraph"){o=a;break}}o===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(t)}function cQe(t,e,n,r){const i=t.children[0],s=typeof t.checked=="boolean"&&i&&i.type==="paragraph",o="["+(t.checked?"x":" ")+"] ",a=n.createTracker(r);s&&a.move(o);let l=ufe.listItem(t,e,n,{...r,...a.current()});return s&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,c)),l;function c(u){return u+o}}function uQe(){return[zJe(),cXe(),hXe(),ZXe(),oQe()]}function dQe(t){return{extensions:[HJe(),uXe(t),pXe(),sQe(t),aQe()]}}const fQe={tokenize:xQe,partial:!0},dfe={tokenize:vQe,partial:!0},ffe={tokenize:bQe,partial:!0},hfe={tokenize:wQe,partial:!0},hQe={tokenize:EQe,partial:!0},pfe={name:"wwwAutolink",tokenize:gQe,previous:gfe},mfe={name:"protocolAutolink",tokenize:yQe,previous:yfe},_d={name:"emailAutolink",tokenize:mQe,previous:xfe},Uc={};function pQe(){return{text:Uc}}let Gh=48;for(;Gh<123;)Uc[Gh]=_d,Gh++,Gh===58?Gh=65:Gh===91&&(Gh=97);Uc[43]=_d;Uc[45]=_d;Uc[46]=_d;Uc[95]=_d;Uc[72]=[_d,mfe];Uc[104]=[_d,mfe];Uc[87]=[_d,pfe];Uc[119]=[_d,pfe];function mQe(t,e,n){const r=this;let i,s;return o;function o(f){return!wD(f)||!xfe.call(r,r.previous)||rj(r.events)?n(f):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),a(f))}function a(f){return wD(f)?(t.consume(f),a):f===64?(t.consume(f),l):n(f)}function l(f){return f===46?t.check(hQe,u,c)(f):f===45||f===95||ks(f)?(s=!0,t.consume(f),l):u(f)}function c(f){return t.consume(f),i=!0,l}function u(f){return s&&i&&Fs(r.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(f)):n(f)}}function gQe(t,e,n){const r=this;return i;function i(o){return o!==87&&o!==119||!gfe.call(r,r.previous)||rj(r.events)?n(o):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(fQe,t.attempt(dfe,t.attempt(ffe,s),n),n)(o))}function s(o){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(o)}}function yQe(t,e,n){const r=this;let i="",s=!1;return o;function o(f){return(f===72||f===104)&&yfe.call(r,r.previous)&&!rj(r.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),i+=String.fromCodePoint(f),t.consume(f),a):n(f)}function a(f){if(Fs(f)&&i.length<5)return i+=String.fromCodePoint(f),t.consume(f),a;if(f===58){const m=i.toLowerCase();if(m==="http"||m==="https")return t.consume(f),l}return n(f)}function l(f){return f===47?(t.consume(f),s?c:(s=!0,l)):n(f)}function c(f){return f===null||Wk(f)||cr(f)||wm(f)||mN(f)?n(f):t.attempt(dfe,t.attempt(ffe,u),n)(f)}function u(f){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(f)}}function xQe(t,e,n){let r=0;return i;function i(o){return(o===87||o===119)&&r<3?(r++,t.consume(o),i):o===46&&r===3?(t.consume(o),s):n(o)}function s(o){return o===null?n(o):e(o)}}function vQe(t,e,n){let r,i,s;return o;function o(c){return c===46||c===95?t.check(hfe,l,a)(c):c===null||cr(c)||wm(c)||c!==45&&mN(c)?l(c):(s=!0,t.consume(c),o)}function a(c){return c===95?r=!0:(i=r,r=void 0),t.consume(c),o}function l(c){return i||r||!s?n(c):e(c)}}function bQe(t,e){let n=0,r=0;return i;function i(o){return o===40?(n++,t.consume(o),i):o===41&&r<n?s(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?t.check(hfe,e,s)(o):o===null||cr(o)||wm(o)?e(o):(t.consume(o),i)}function s(o){return o===41&&r++,t.consume(o),i}}function wQe(t,e,n){return r;function r(a){return a===33||a===34||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===63||a===95||a===126?(t.consume(a),r):a===38?(t.consume(a),s):a===93?(t.consume(a),i):a===60||a===null||cr(a)||wm(a)?e(a):n(a)}function i(a){return a===null||a===40||a===91||cr(a)||wm(a)?e(a):r(a)}function s(a){return Fs(a)?o(a):n(a)}function o(a){return a===59?(t.consume(a),r):Fs(a)?(t.consume(a),o):n(a)}}function EQe(t,e,n){return r;function r(s){return t.consume(s),i}function i(s){return ks(s)?n(s):e(s)}}function gfe(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||cr(t)}function yfe(t){return!Fs(t)}function xfe(t){return!(t===47||wD(t))}function wD(t){return t===43||t===45||t===46||t===95||ks(t)}function rj(t){let e=t.length,n=!1;for(;e--;){const r=t[e][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const SQe={tokenize:PQe,partial:!0};function AQe(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:NQe,continuation:{tokenize:_Qe},exit:IQe}},text:{91:{name:"gfmFootnoteCall",tokenize:CQe},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:TQe,resolveTo:kQe}}}}function TQe(t,e,n){const r=this;let i=r.events.length;const s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o;for(;i--;){const l=r.events[i][1];if(l.type==="labelImage"){o=l;break}if(l.type==="gfmFootnoteCall"||l.type==="labelLink"||l.type==="label"||l.type==="image"||l.type==="link")break}return a;function a(l){if(!o||!o._balanced)return n(l);const c=wl(r.sliceSerialize({start:o.end,end:r.now()}));return c.codePointAt(0)!==94||!s.includes(c.slice(1))?n(l):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(l),t.exit("gfmFootnoteCallLabelMarker"),e(l))}}function kQe(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},t[t.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},a=[t[n+1],t[n+2],["enter",r,e],t[n+3],t[n+4],["enter",i,e],["exit",i,e],["enter",s,e],["enter",o,e],["exit",o,e],["exit",s,e],t[t.length-2],t[t.length-1],["exit",r,e]];return t.splice(n,t.length-n+1,...a),t}function CQe(t,e,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s=0,o;return a;function a(f){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(f),t.exit("gfmFootnoteCallLabelMarker"),l}function l(f){return f!==94?n(f):(t.enter("gfmFootnoteCallMarker"),t.consume(f),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",c)}function c(f){if(s>999||f===93&&!o||f===null||f===91||cr(f))return n(f);if(f===93){t.exit("chunkString");const m=t.exit("gfmFootnoteCallString");return i.includes(wl(r.sliceSerialize(m)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(f),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(f)}return cr(f)||(o=!0),s++,t.consume(f),f===92?u:c}function u(f){return f===91||f===92||f===93?(t.consume(f),s++,c):c(f)}}function NQe(t,e,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s,o=0,a;return l;function l(x){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(x),t.exit("gfmFootnoteDefinitionLabelMarker"),c}function c(x){return x===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(x),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",u):n(x)}function u(x){if(o>999||x===93&&!a||x===null||x===91||cr(x))return n(x);if(x===93){t.exit("chunkString");const v=t.exit("gfmFootnoteDefinitionLabelString");return s=wl(r.sliceSerialize(v)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(x),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),m}return cr(x)||(a=!0),o++,t.consume(x),x===92?f:u}function f(x){return x===91||x===92||x===93?(t.consume(x),o++,u):u(x)}function m(x){return x===58?(t.enter("definitionMarker"),t.consume(x),t.exit("definitionMarker"),i.includes(s)||i.push(s),In(t,g,"gfmFootnoteDefinitionWhitespace")):n(x)}function g(x){return e(x)}}function _Qe(t,e,n){return t.check(tE,e,t.attempt(SQe,e,n))}function IQe(t){t.exit("gfmFootnoteDefinition")}function PQe(t,e,n){const r=this;return In(t,i,"gfmFootnoteDefinitionIndent",5);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?e(s):n(s)}}function RQe(t){let n=(t||{}).singleTilde;const r={name:"strikethrough",tokenize:s,resolveAll:i};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(o,a){let l=-1;for(;++l<o.length;)if(o[l][0]==="enter"&&o[l][1].type==="strikethroughSequenceTemporary"&&o[l][1]._close){let c=l;for(;c--;)if(o[c][0]==="exit"&&o[c][1].type==="strikethroughSequenceTemporary"&&o[c][1]._open&&o[l][1].end.offset-o[l][1].start.offset===o[c][1].end.offset-o[c][1].start.offset){o[l][1].type="strikethroughSequence",o[c][1].type="strikethroughSequence";const u={type:"strikethrough",start:Object.assign({},o[c][1].start),end:Object.assign({},o[l][1].end)},f={type:"strikethroughText",start:Object.assign({},o[c][1].end),end:Object.assign({},o[l][1].start)},m=[["enter",u,a],["enter",o[c][1],a],["exit",o[c][1],a],["enter",f,a]],g=a.parser.constructs.insideSpan.null;g&&Yo(m,m.length,0,gN(g,o.slice(c+1,l),a)),Yo(m,m.length,0,[["exit",f,a],["enter",o[l][1],a],["exit",o[l][1],a],["exit",u,a]]),Yo(o,c-1,l-c+3,m),l=c+m.length-2;break}}for(l=-1;++l<o.length;)o[l][1].type==="strikethroughSequenceTemporary"&&(o[l][1].type="data");return o}function s(o,a,l){const c=this.previous,u=this.events;let f=0;return m;function m(x){return c===126&&u[u.length-1][1].type!=="characterEscape"?l(x):(o.enter("strikethroughSequenceTemporary"),g(x))}function g(x){const v=fx(c);if(x===126)return f>1?l(x):(o.consume(x),f++,g);if(f<2&&!n)return l(x);const w=o.exit("strikethroughSequenceTemporary"),E=fx(x);return w._open=!E||E===2&&!!v,w._close=!v||v===2&&!!E,a(x)}}}class OQe{constructor(){this.map=[]}add(e,n,r){MQe(this,e,n,r)}consume(e){if(this.map.sort(function(s,o){return s[0]-o[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];r.push(e.slice()),e.length=0;let i=r.pop();for(;i;){for(const s of i)e.push(s);i=r.pop()}this.map.length=0}}function MQe(t,e,n,r){let i=0;if(!(n===0&&r.length===0)){for(;i<t.map.length;){if(t.map[i][0]===e){t.map[i][1]+=n,t.map[i][2].push(...r);return}i+=1}t.map.push([e,n,r])}}function DQe(t,e){let n=!1;const r=[];for(;e<t.length;){const i=t[e];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const s=r.length-1;r[s]=r[s]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return r}function LQe(){return{flow:{null:{name:"table",tokenize:BQe,resolveAll:jQe}}}}function BQe(t,e,n){const r=this;let i=0,s=0,o;return a;function a($){let K=r.events.length-1;for(;K>-1;){const A=r.events[K][1].type;if(A==="lineEnding"||A==="linePrefix")K--;else break}const H=K>-1?r.events[K][1].type:null,B=H==="tableHead"||H==="tableRow"?R:l;return B===R&&r.parser.lazy[r.now().line]?n($):B($)}function l($){return t.enter("tableHead"),t.enter("tableRow"),c($)}function c($){return $===124||(o=!0,s+=1),u($)}function u($){return $===null?n($):qt($)?s>1?(s=0,r.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume($),t.exit("lineEnding"),g):n($):Sn($)?In(t,u,"whitespace")($):(s+=1,o&&(o=!1,i+=1),$===124?(t.enter("tableCellDivider"),t.consume($),t.exit("tableCellDivider"),o=!0,u):(t.enter("data"),f($)))}function f($){return $===null||$===124||cr($)?(t.exit("data"),u($)):(t.consume($),$===92?m:f)}function m($){return $===92||$===124?(t.consume($),f):f($)}function g($){return r.interrupt=!1,r.parser.lazy[r.now().line]?n($):(t.enter("tableDelimiterRow"),o=!1,Sn($)?In(t,x,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)($):x($))}function x($){return $===45||$===58?w($):$===124?(o=!0,t.enter("tableCellDivider"),t.consume($),t.exit("tableCellDivider"),v):j($)}function v($){return Sn($)?In(t,w,"whitespace")($):w($)}function w($){return $===58?(s+=1,o=!0,t.enter("tableDelimiterMarker"),t.consume($),t.exit("tableDelimiterMarker"),E):$===45?(s+=1,E($)):$===null||qt($)?O($):j($)}function E($){return $===45?(t.enter("tableDelimiterFiller"),C($)):j($)}function C($){return $===45?(t.consume($),C):$===58?(o=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume($),t.exit("tableDelimiterMarker"),k):(t.exit("tableDelimiterFiller"),k($))}function k($){return Sn($)?In(t,O,"whitespace")($):O($)}function O($){return $===124?x($):$===null||qt($)?!o||i!==s?j($):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e($)):j($)}function j($){return n($)}function R($){return t.enter("tableRow"),U($)}function U($){return $===124?(t.enter("tableCellDivider"),t.consume($),t.exit("tableCellDivider"),U):$===null||qt($)?(t.exit("tableRow"),e($)):Sn($)?In(t,U,"whitespace")($):(t.enter("data"),V($))}function V($){return $===null||$===124||cr($)?(t.exit("data"),U($)):(t.consume($),$===92?F:V)}function F($){return $===92||$===124?(t.consume($),V):V($)}}function jQe(t,e){let n=-1,r=!0,i=0,s=[0,0,0,0],o=[0,0,0,0],a=!1,l=0,c,u,f;const m=new OQe;for(;++n<t.length;){const g=t[n],x=g[1];g[0]==="enter"?x.type==="tableHead"?(a=!1,l!==0&&(UJ(m,e,l,c,u),u=void 0,l=0),c={type:"table",start:Object.assign({},x.start),end:Object.assign({},x.end)},m.add(n,0,[["enter",c,e]])):x.type==="tableRow"||x.type==="tableDelimiterRow"?(r=!0,f=void 0,s=[0,0,0,0],o=[0,n+1,0,0],a&&(a=!1,u={type:"tableBody",start:Object.assign({},x.start),end:Object.assign({},x.end)},m.add(n,0,[["enter",u,e]])),i=x.type==="tableDelimiterRow"?2:u?3:1):i&&(x.type==="data"||x.type==="tableDelimiterMarker"||x.type==="tableDelimiterFiller")?(r=!1,o[2]===0&&(s[1]!==0&&(o[0]=o[1],f=xA(m,e,s,i,void 0,f),s=[0,0,0,0]),o[2]=n)):x.type==="tableCellDivider"&&(r?r=!1:(s[1]!==0&&(o[0]=o[1],f=xA(m,e,s,i,void 0,f)),s=o,o=[s[1],n,0,0])):x.type==="tableHead"?(a=!0,l=n):x.type==="tableRow"||x.type==="tableDelimiterRow"?(l=n,s[1]!==0?(o[0]=o[1],f=xA(m,e,s,i,n,f)):o[1]!==0&&(f=xA(m,e,o,i,n,f)),i=0):i&&(x.type==="data"||x.type==="tableDelimiterMarker"||x.type==="tableDelimiterFiller")&&(o[3]=n)}for(l!==0&&UJ(m,e,l,c,u),m.consume(e.events),n=-1;++n<e.events.length;){const g=e.events[n];g[0]==="enter"&&g[1].type==="table"&&(g[1]._align=DQe(e.events,n))}return t}function xA(t,e,n,r,i,s){const o=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",a="tableContent";n[0]!==0&&(s.end=Object.assign({},og(e.events,n[0])),t.add(n[0],0,[["exit",s,e]]));const l=og(e.events,n[1]);if(s={type:o,start:Object.assign({},l),end:Object.assign({},l)},t.add(n[1],0,[["enter",s,e]]),n[2]!==0){const c=og(e.events,n[2]),u=og(e.events,n[3]),f={type:a,start:Object.assign({},c),end:Object.assign({},u)};if(t.add(n[2],0,[["enter",f,e]]),r!==2){const m=e.events[n[2]],g=e.events[n[3]];if(m[1].end=Object.assign({},g[1].end),m[1].type="chunkText",m[1].contentType="text",n[3]>n[2]+1){const x=n[2]+1,v=n[3]-n[2]-1;t.add(x,v,[])}}t.add(n[3]+1,0,[["exit",f,e]])}return i!==void 0&&(s.end=Object.assign({},og(e.events,i)),t.add(i,0,[["exit",s,e]]),s=void 0),s}function UJ(t,e,n,r,i){const s=[],o=og(e.events,n);i&&(i.end=Object.assign({},o),s.push(["exit",i,e])),r.end=Object.assign({},o),s.push(["exit",r,e]),t.add(n+1,0,s)}function og(t,e){const n=t[e],r=n[0]==="enter"?"start":"end";return n[1][r]}const UQe={name:"tasklistCheck",tokenize:$Qe};function FQe(){return{text:{91:UQe}}}function $Qe(t,e,n){const r=this;return i;function i(l){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(l):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),s)}function s(l){return cr(l)?(t.enter("taskListCheckValueUnchecked"),t.consume(l),t.exit("taskListCheckValueUnchecked"),o):l===88||l===120?(t.enter("taskListCheckValueChecked"),t.consume(l),t.exit("taskListCheckValueChecked"),o):n(l)}function o(l){return l===93?(t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),a):n(l)}function a(l){return qt(l)?e(l):Sn(l)?t.check({tokenize:zQe},e,n)(l):n(l)}}function zQe(t,e,n){return In(t,r,"whitespace");function r(i){return i===null?n(i):e(i)}}function HQe(t){return _de([pQe(),AQe(),RQe(t),LQe(),FQe()])}const VQe={};function qQe(t){const e=this,n=t||VQe,r=e.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),s=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),o=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(HQe(n)),s.push(uQe()),o.push(dQe(n))}const Bs=T.forwardRef(({className:t,...e},n)=>h.jsx("div",{ref:n,className:Ut("rounded border border-[#232328] bg-[#14151a] text-card-foreground shadow-sm",t),...e}));Bs.displayName="Card";const ED=T.forwardRef(({className:t,...e},n)=>h.jsx("div",{ref:n,className:Ut("flex flex-col space-y-1.5 p-6",t),...e}));ED.displayName="CardHeader";const SD=T.forwardRef(({className:t,...e},n)=>h.jsx("div",{ref:n,className:Ut("font-semibold leading-none tracking-tight text-white",t),...e}));SD.displayName="CardTitle";const AD=T.forwardRef(({className:t,...e},n)=>h.jsx("div",{ref:n,className:Ut("text-sm text-muted-foreground",t),...e}));AD.displayName="CardDescription";const hu=T.forwardRef(({className:t,...e},n)=>h.jsx("div",{ref:n,className:Ut("p-6 pt-0",t),...e}));hu.displayName="CardContent";const GQe=T.forwardRef(({className:t,...e},n)=>h.jsx("div",{ref:n,className:Ut("flex items-center p-6 pt-0",t),...e}));GQe.displayName="CardFooter";const KQe=({messages:t})=>{const e=T.useRef(null),n=T.useMemo(()=>{const r=[];return t.forEach(i=>{i.role==="model"&&i.toolResults&&i.toolResults.length>0&&i.toolResults.forEach(s=>{if(s.type==="error")return;const o=s.title||"",a=s.details||"";if(o.includes("Swap")||o.includes("Order")||o.includes("Transfer")||o.includes("Withdraw")||o.includes("Position")||o.includes("Leverage")){let l="info";o.includes("Swap")?l="swap":o.includes("Order")||o.includes("Position")||o.includes("Leverage")?l="order":(o.includes("Transfer")||o.includes("Withdraw"))&&(l="transfer"),r.push({type:l,title:o,details:a.split(`
`)[0]||a,subDetails:s.tx?"Transaction Executed":void 0,timestamp:i.timestamp,tx:s.tx})}else o.includes("Task")||o.includes("Scheduled")?r.push({type:"info",title:o,details:a,timestamp:i.timestamp}):o.includes("Price")||o.includes("OHLCV")||o.includes("Indicator")||o.includes("TradingView")||o.includes("Summary")||o.includes("Market Data")?r.push({type:"price",title:o,details:a,timestamp:i.timestamp}):o.includes("Balance")?r.push({type:"balance",title:"Balance Checked",details:a.split(`
`)[0],subDetails:"View specific assets in chat",timestamp:i.timestamp}):r.push({type:"info",title:o,details:a.substring(0,100)+(a.length>100?"...":""),timestamp:i.timestamp})})}),r},[t]);return T.useEffect(()=>{e.current&&e.current.scrollTo({top:e.current.scrollHeight,behavior:"smooth"})},[n.length]),n.length===0?null:h.jsxs("div",{ref:e,className:"w-full h-full overflow-y-auto pr-1 custom-scrollbar space-y-3 pb-4",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-2 px-1 sticky top-0 bg-slate-900/90 backdrop-blur-sm py-2 z-10",children:[h.jsx(mo,{size:12,className:"text-indigo-400"}),h.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider text-slate-500",children:"Activity Feed"})]}),h.jsx(Go,{children:n.map((r,i)=>{var l;const s=r.tx,o=r.title.includes("Hyperliquid")||r.title.includes("Order"),a=s?o?`https://app.hyperliquid.xyz/explorer/tx/${s}`:`https://solscan.io/tx/${s}`:null;return h.jsx(rn.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:i*.05},children:h.jsxs(Bs,{className:"p-3 relative overflow-hidden group hover:border-indigo-500/30 transition-all duration-300",children:[h.jsx("div",{className:"absolute top-0 right-0 w-12 h-12 bg-indigo-500/5 rounded-full blur-xl -z-10 transition-all duration-700 group-hover:bg-indigo-500/10"}),h.jsx("div",{className:"flex items-center justify-between mb-1.5",children:h.jsxs("div",{className:"flex items-center gap-1.5",children:[h.jsx("div",{className:Ut("w-1 h-1 rounded-full",r.type==="error"?"bg-red-500":"bg-indigo-500")}),h.jsx("span",{className:"text-[9px] text-slate-600 font-mono",children:new Date(r.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})}),h.jsxs("div",{className:"space-y-1",children:[h.jsx("h3",{className:"text-xs font-bold text-white leading-tight",children:r.title}),h.jsx("div",{className:"py-1",children:r.type==="swap"?h.jsx("div",{className:"bg-slate-800/50 rounded-lg p-2 border border-slate-700/50",children:h.jsx("p",{className:"text-[10px] text-slate-300 font-medium",children:r.details})}):r.type==="price"&&r.details.includes(":")&&!r.details.includes(`
`)?h.jsxs("div",{className:"flex flex-col gap-0.5",children:[h.jsx("div",{className:"text-lg font-bold text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-teal-300",children:(l=r.details.split(":")[1])==null?void 0:l.trim()}),h.jsx("div",{className:"text-[10px] text-slate-400 font-medium",children:r.details.split(":")[0]})]}):h.jsx("p",{className:"text-[10px] text-slate-300 font-medium",children:r.details})}),h.jsxs("div",{className:"flex items-center justify-between mt-1 pt-1 border-t border-slate-800/50",children:[r.subDetails&&!s&&h.jsx("div",{className:"flex items-center gap-1.5 text-[10px] text-emerald-400 font-medium",children:r.subDetails}),s&&h.jsxs("a",{href:a||"#",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1.5 text-[10px] text-indigo-400 hover:text-indigo-300 transition-colors group/link ml-auto",children:["View Transaction",h.jsx(sne,{size:10,className:"group-hover/link:translate-x-0.5 group-hover/link:-translate-y-0.5 transition-transform"})]})]})]})]})},`${r.timestamp}-${i}`)})})]})};var WQe=Symbol.for("react.lazy"),Qk=LC[" use ".trim().toString()];function YQe(t){return typeof t=="object"&&t!==null&&"then"in t}function vfe(t){return t!=null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===WQe&&"_payload"in t&&YQe(t._payload)}function JQe(t){const e=QQe(t),n=T.forwardRef((r,i)=>{let{children:s,...o}=r;vfe(s)&&typeof Qk=="function"&&(s=Qk(s._payload));const a=T.Children.toArray(s),l=a.find(eZe);if(l){const c=l.props.children,u=a.map(f=>f===l?T.Children.count(c)>1?T.Children.only(null):T.isValidElement(c)?c.props.children:null:f);return h.jsx(e,{...o,ref:i,children:T.isValidElement(c)?T.cloneElement(c,void 0,u):null})}return h.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}var XQe=JQe("Slot");function QQe(t){const e=T.forwardRef((n,r)=>{let{children:i,...s}=n;if(vfe(i)&&typeof Qk=="function"&&(i=Qk(i._payload)),T.isValidElement(i)){const o=nZe(i),a=tZe(s,i.props);return i.type!==T.Fragment&&(a.ref=r?Rx(r,o):o),T.cloneElement(i,a)}return T.Children.count(i)>1?T.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var ZQe=Symbol("radix.slottable");function eZe(t){return T.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===ZQe}function tZe(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const l=s(...a);return i(...a),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function nZe(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}const FJ=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,$J=Pn,bfe=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return $J(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(c=>{const u=n==null?void 0:n[c],f=s==null?void 0:s[c];if(u===null)return null;const m=FJ(u)||FJ(f);return i[c][m]}),a=n&&Object.entries(n).reduce((c,u)=>{let[f,m]=u;return m===void 0||(c[f]=m),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:f,className:m,...g}=u;return Object.entries(g).every(x=>{let[v,w]=x;return Array.isArray(w)?w.includes({...s,...a}[v]):{...s,...a}[v]===w})?[...c,f,m]:c},[]);return $J(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)},rZe=bfe("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-medium transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-slate-700 bg-transparent hover:bg-slate-800 hover:text-slate-100",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-slate-800 hover:text-slate-100",link:"text-primary underline-offset-4 hover:underline",success:"bg-emerald-600 text-white shadow hover:bg-emerald-700"},size:{default:"h-10 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-12 rounded-lg px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Ui=T.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},s)=>{const o=r?XQe:"button";return h.jsx(o,{className:Ut(rZe({variant:e,size:n,className:t})),ref:s,...i})});Ui.displayName="Button";const hx=T.forwardRef(({className:t,type:e,...n},r)=>h.jsx("input",{type:e,className:Ut("flex h-10 w-full rounded-lg border border-slate-700 bg-slate-800/50 px-3 py-2 text-sm text-white placeholder:text-slate-500 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-slate-500/50 focus-visible:border-slate-500/50 disabled:cursor-not-allowed disabled:opacity-50 transition-colors",t),ref:r,...n}));hx.displayName="Input";const iZe=({messages:t,inputMessage:e,setInputMessage:n,handleSendMessage:r,isAiProcessing:i,aiStatus:s,scrollRef:o,isVaultUnlocked:a,password:l,setPassword:c,unlockVault:u,hasVault:f,onNavigate:m})=>{const g=T.useRef(null),x=T.useMemo(()=>t.some(v=>v.role==="model"&&v.toolResults&&v.toolResults.length>0&&v.toolResults.some(w=>w.type!=="error")),[t]);return T.useEffect(()=>{!i&&a&&g.current&&g.current.focus()},[i,a]),T.useEffect(()=>{o.current&&(o.current.scrollTop=o.current.scrollHeight)},[t,o]),!a&&f?h.jsx(rn.div,{className:"flex flex-col h-[calc(100vh-8rem)] items-center justify-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:h.jsxs("div",{className:"max-w-md w-full mx-auto space-y-6 p-8",children:[h.jsxs("div",{className:"text-center",children:[h.jsx(rn.div,{className:"w-16 h-16 bg-[#1a1b21] rounded-full flex items-center justify-center mx-auto mb-4 border border-[#232328]",animate:{scale:[1,1.05,1]},transition:{duration:2,repeat:1/0},children:h.jsx(lw,{size:32,className:"text-[#E7FE55]"})}),h.jsx("h2",{className:"text-xl font-semibold text-white tracking-tight",children:"Unlock Vault Operator"}),h.jsx("p",{className:"text-[#747580] mt-2 text-sm",children:"Enter your password to start using Vault Operator."})]}),h.jsxs(Bs,{className:"p-6 space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-[10px] font-semibold text-[#747580] uppercase tracking-[0.1em] mb-2",children:"Password"}),h.jsx(hx,{type:"password",value:l,onChange:v=>c(v.target.value),placeholder:"Enter password...",onKeyDown:v=>v.key==="Enter"&&u(),className:"focus-visible:ring-[#E7FE55]/20 focus-visible:border-[#E7FE55]/30",autoFocus:!0})]}),h.jsxs(Ui,{onClick:u,className:"w-full",size:"lg",children:[h.jsx(une,{size:18})," Unlock Vault Operator"]})]}),h.jsx("p",{className:"text-center text-[11px] text-[#747580]",children:"This is the same password used to unlock your Vault."})]})}):f?h.jsxs("div",{className:"flex h-[calc(100vh-9rem)] gap-6",children:[h.jsxs("div",{className:Ut("flex-1 flex flex-col bg-transparent rounded overflow-hidden relative min-w-0",x&&"lg:pr-2"),children:[h.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 space-y-6",ref:o,children:[h.jsxs(Go,{children:[t.length===0&&h.jsxs(rn.div,{className:"flex flex-col items-center justify-center h-full text-[#747580] opacity-60",initial:{opacity:0},animate:{opacity:.6},children:[h.jsx(mg,{size:48,className:"mb-4 text-[#E7FE55]"}),h.jsx("p",{className:"text-sm font-semibold text-white",children:"Vault Operator Ready"}),h.jsx("p",{className:"text-[11px] text-[#747580]",children:"Ask me to check balances, swap tokens, or schedule automations."})]}),t.map((v,w)=>h.jsx(rn.div,{className:Ut("flex",v.role==="user"?"justify-end":"justify-start"),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:w*.05},children:h.jsxs("div",{className:Ut("flex gap-4",x?"max-w-[85%]":"max-w-[90%]",v.role==="user"?"flex-row-reverse":"flex-row"),children:[h.jsx("div",{className:Ut("w-9 h-9 rounded-full flex items-center justify-center flex-shrink-0 border",v.role==="user"?"bg-[#9b87f5]/10 border-[#9b87f5]/20":"bg-[#E7FE55]/10 border-[#E7FE55]/20"),children:v.role==="user"?h.jsx(JTe,{size:18,className:"text-[#9b87f5]"}):h.jsx(mg,{size:18,className:"text-[#E7FE55]"})}),h.jsxs("div",{className:Ut("flex flex-col",v.role==="user"?"items-end":"items-start"),children:[h.jsxs("div",{className:Ut("px-4 py-3 rounded-lg bg-[#1a1b21] text-[#e4e5e9] border border-[#232328]",v.role==="user"?"rounded-tr-sm":"rounded-tl-sm"),children:[v.toolResults&&v.toolResults.length>0&&h.jsx("div",{className:"mb-4 space-y-3 w-full",children:v.toolResults.map((E,C)=>h.jsxs("div",{className:Ut("text-[11px] p-3 rounded border",E.type==="success"?"bg-[#34d399]/10 border-[#34d399]/30 text-[#34d399]":E.type==="error"?"bg-red-500/10 border-red-500/30 text-red-400":"bg-[#60a5fa]/10 border-[#60a5fa]/30 text-[#60a5fa]"),children:[h.jsxs("div",{className:"flex items-center gap-2 font-bold mb-1",children:[E.type==="success"?h.jsx(p4,{size:14}):E.type==="error"?h.jsx(td,{size:14}):h.jsx(hTe,{size:14}),E.title]}),h.jsx("div",{className:"whitespace-pre-wrap font-mono opacity-90",children:E.details}),E.tx&&h.jsxs("div",{className:"mt-2 pt-2 border-t border-white/10 text-[10px] font-mono opacity-70 truncate",children:["TX: ",E.tx]})]},C))}),h.jsx("div",{className:"prose prose-invert prose-sm max-w-none",children:h.jsx(RJe,{remarkPlugins:[qQe],components:{a:({href:E,children:C})=>{if(E!=null&&E.startsWith("nav://")){const k=E.replace("nav://",""),j={DEALER_CONFIG:Ce.DEALER_CONFIG,DEALER_DASHBOARD:Ce.DEALER_DASHBOARD,DEALER_THINKING:Ce.DEALER_THINKING,VAULT_DEALER:Ce.VAULT_DEALER,DASHBOARD:Ce.DASHBOARD,VAULT:Ce.VAULT,SCHEDULER:Ce.SCHEDULER}[k];return j&&m?h.jsxs(Ui,{onClick:R=>{R.preventDefault(),R.stopPropagation(),m(j)},className:"mt-3 inline-flex",children:[h.jsx(RT,{size:16}),h.jsx("span",{children:C}),h.jsx(ine,{size:14})]}):h.jsx("span",{className:"text-indigo-400",children:C})}return h.jsx("a",{href:E,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-400 hover:text-indigo-300 underline",children:C})},pre:({children:E})=>h.jsx("pre",{className:"overflow-x-auto overflow-y-auto max-h-[400px] custom-scrollbar bg-[#0f1015] rounded border border-[#232328] p-4 my-4",children:E}),code:({node:E,inline:C,className:k,children:O,...j})=>C?h.jsx("code",{className:"bg-[#1a1b21] px-1.5 py-0.5 rounded text-sm text-[#E7FE55] font-mono border border-[#232328]",...j,children:O}):h.jsx("code",{className:`${k} text-sm`,...j,children:O})},children:v.content})})]}),h.jsx("span",{className:"text-[10px] text-[#747580] mt-1.5 px-1",children:new Date(v.timestamp).toLocaleTimeString()})]})]})},v.id))]}),h.jsx(Go,{children:i&&h.jsx(rn.div,{className:"flex justify-start",initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0},children:h.jsxs("div",{className:"flex gap-4 max-w-[80%]",children:[h.jsx(rn.div,{className:"w-9 h-9 rounded-full bg-[#E7FE55]/10 border border-[#E7FE55]/20 flex items-center justify-center flex-shrink-0",animate:{scale:[1,1.1,1]},transition:{duration:1,repeat:1/0},children:h.jsx(mg,{size:18,className:"text-[#E7FE55]"})}),h.jsxs("div",{className:"bg-[#1a1b21] px-4 py-3 rounded-lg rounded-tl-sm border border-[#232328] flex items-center gap-3",children:[h.jsxs("div",{className:"flex space-x-1",children:[h.jsx(rn.div,{className:"w-1.5 h-1.5 bg-[#E7FE55] rounded-full",animate:{y:[0,-6,0]},transition:{duration:.5,repeat:1/0,delay:0}}),h.jsx(rn.div,{className:"w-1.5 h-1.5 bg-[#E7FE55] rounded-full",animate:{y:[0,-6,0]},transition:{duration:.5,repeat:1/0,delay:.15}}),h.jsx(rn.div,{className:"w-1.5 h-1.5 bg-[#E7FE55] rounded-full",animate:{y:[0,-6,0]},transition:{duration:.5,repeat:1/0,delay:.3}})]}),h.jsx("span",{className:"text-[11px] text-[#E7FE55] font-medium",children:s})]})]})})})]}),h.jsxs("div",{className:"p-4 bg-transparent z-10 box-border",children:[h.jsxs("div",{className:"relative",children:[h.jsx(hx,{ref:g,type:"text",value:e,onChange:v=>n(v.target.value),onKeyDown:v=>v.key==="Enter"&&!i&&a&&r(),placeholder:"Ask Vault Operator to swap tokens, check prices, or schedule a task...",className:"pl-5 pr-14 py-5 text-sm bg-[#1a1b21] border-[#232328] focus-visible:ring-1 focus-visible:ring-[#E7FE55]/20 focus-visible:border-[#E7FE55]/30 placeholder:text-[#747580]",disabled:i}),h.jsx(Ui,{onClick:r,disabled:!e.trim()||i,size:"icon",className:"absolute right-2 top-2 bottom-2 h-auto bg-[#E7FE55] hover:bg-[#f0ff7a] text-black",children:i?h.jsx(Ua,{size:18,className:"animate-spin"}):h.jsx(BTe,{size:18})})]}),h.jsx("p",{className:"text-center mt-3 text-[10px] text-[#747580] tracking-wide",children:"Vault Operator can make mistakes. Always verify transactions."})]})]}),h.jsx(Go,{children:x&&h.jsx(rn.div,{className:"hidden lg:block w-64 xl:w-72 h-full flex-shrink-0",initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:50},children:h.jsx(KQe,{messages:t})})})]}):h.jsx(rn.div,{className:"flex flex-col h-[calc(100vh-8rem)] items-center justify-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:h.jsxs("div",{className:"max-w-md w-full mx-auto space-y-6 p-8 text-center",children:[h.jsx("div",{className:"w-16 h-16 bg-[#1a1b21] rounded-full flex items-center justify-center mx-auto mb-4 border border-[#232328]",children:h.jsx(mg,{size:32,className:"text-[#747580]"})}),h.jsx("h2",{className:"text-xl font-semibold text-white tracking-tight",children:"Create a Vault First"}),h.jsxs("p",{className:"text-[#747580] text-sm",children:["You need to create a vault before using Vault Operator. Go to the ",h.jsx("span",{className:"text-[#E7FE55]",children:"Vault"})," page to set up your wallets."]})]})})},sZe=bfe("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-red-500/20 text-red-400 border-red-500/30",outline:"text-foreground border-slate-600",success:"border-transparent bg-emerald-500/20 text-emerald-400 border-emerald-500/30",warning:"border-transparent bg-yellow-500/20 text-yellow-400 border-yellow-500/30",info:"border-transparent bg-blue-500/20 text-blue-400 border-blue-500/30",purple:"border-transparent bg-purple-500/20 text-purple-400 border-purple-500/30"}},defaultVariants:{variant:"default"}});function _l({className:t,variant:e,...n}){return h.jsx("div",{className:Ut(sZe({variant:e}),t),...n})}const oZe=({scheduledTasks:t,setScheduledTasks:e,addNotification:n})=>{const r=t.filter(a=>a.status==="active"||a.status==="executing"),i=t.filter(a=>a.status==="completed"||a.status==="failed").sort((a,l)=>(l.lastExecuted||0)-(a.lastExecuted||0)),s=()=>{window.confirm("Clear all task history?")&&(e(a=>{const l=a.filter(c=>c.status==="active"||c.status==="executing");return Ie.setItem(Ie.getUserKey("agent_scheduled_tasks"),JSON.stringify(l)),l}),n("Task history cleared"))},o=a=>{window.confirm("Cancel this task?")&&(e(l=>{const c=l.map(u=>u.id===a?{...u,status:"failed",result:"Cancelled by user"}:u);return Ie.setItem(Ie.getUserKey("agent_scheduled_tasks"),JSON.stringify(c)),c}),n(`Task #${a.slice(-4)} cancelled`))};return h.jsx(rn.div,{className:"space-y-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[h.jsxs("div",{className:"space-y-4",children:[h.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[h.jsx(Ua,{size:20,className:"text-emerald-400"})," Active Tasks"]}),h.jsx(Go,{children:r.length===0?h.jsx(rn.div,{initial:{opacity:0},animate:{opacity:1},children:h.jsxs(Bs,{className:"p-8 text-center border-dashed border-2 border-slate-800",children:[h.jsx(GL,{size:48,className:"mx-auto text-slate-700 mb-4"}),h.jsx("p",{className:"text-slate-500",children:"No active tasks."}),h.jsx("p",{className:"text-xs text-slate-600 mt-2",children:'Ask the AI to "schedule a swap in 10 mins" or "alert me when BTC > 100k"'})]})}):r.map((a,l)=>{const c=JSON.parse(a.params||"{}");let u=0,f=0,m=0;if(a.type==="HL_ORDER"&&c.price&&c.size){const{price:g,size:x,leverage:v=1,side:w,takeProfit:E,stopLoss:C}=c,k=w==="B";E&&(u=(k?E-g:g-E)*x),C&&(f=(k?g-C:C-g)*x);const O=1/v-.005;m=k?g*(1-O):g*(1+O)}return h.jsx(rn.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{delay:l*.1},children:h.jsxs(Bs,{className:"p-5 border-l-4 border-l-emerald-500 relative overflow-hidden",children:[a.status==="executing"&&h.jsx("div",{className:"absolute top-2 right-2",children:h.jsxs("span",{className:"relative flex h-3 w-3",children:[h.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"}),h.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-emerald-500"})]})}),h.jsxs("div",{className:"flex justify-between items-start mb-3",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(_l,{variant:a.type==="SWAP"||a.type==="TRANSFER"?"info":a.type==="HL_ORDER"?"purple":a.type==="ALERT"?"warning":"secondary",children:a.type}),h.jsxs("span",{className:"text-xs font-mono text-slate-500",children:["#",a.id.slice(-4)]})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs("span",{className:"text-xs text-slate-400",children:["Created: ",new Date(a.createdAt).toLocaleTimeString()]}),a.status!=="executing"&&h.jsxs(Ui,{variant:"ghost",size:"sm",onClick:()=>o(a.id),className:"text-red-400 hover:text-red-300 hover:bg-red-900/20",children:[h.jsx(sm,{size:12})," Cancel"]})]})]}),h.jsxs("div",{className:"mb-3 space-y-2",children:[a.type==="SWAP"&&h.jsxs("div",{className:"bg-slate-950/50 p-3 rounded-lg border border-slate-800",children:[h.jsx("div",{className:"text-xs text-slate-500 mb-1 font-bold uppercase",children:"Swap Details"}),h.jsxs("div",{className:"text-sm text-white font-medium",children:[c.amount," ",c.inputToken,"  ",c.outputToken]})]}),a.type==="HL_ORDER"&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"bg-slate-950/50 p-3 rounded-lg border border-purple-900/30 space-y-2",children:[h.jsx("div",{className:"text-xs text-slate-500 mb-2 font-bold uppercase",children:"Hyperliquid Order"}),h.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[h.jsxs("div",{children:[h.jsx("span",{className:"text-slate-500",children:"Asset:"}),h.jsx("span",{className:"ml-2 text-white font-bold",children:c.coin})]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-slate-500",children:"Direction:"}),h.jsx("span",{className:Ut("ml-2 font-bold",c.side==="B"?"text-emerald-400":"text-red-400"),children:c.side==="B"?"LONG":"SHORT"})]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-slate-500",children:"Size:"}),h.jsx("span",{className:"ml-2 text-white font-medium",children:c.size})]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-slate-500",children:"Type:"}),h.jsx("span",{className:"ml-2 text-white font-medium uppercase",children:c.orderType})]}),c.price&&h.jsxs("div",{children:[h.jsx("span",{className:"text-slate-500",children:"Price:"}),h.jsxs("span",{className:"ml-2 text-white font-medium",children:["$",c.price.toLocaleString()]})]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-slate-500",children:"Leverage:"}),h.jsxs("span",{className:"ml-2 text-yellow-400 font-bold",children:[c.leverage,"x"]})]})]}),(c.stopLoss||c.takeProfit)&&h.jsxs("div",{className:"pt-2 border-t border-slate-800 grid grid-cols-2 gap-2 text-xs",children:[c.stopLoss&&h.jsxs("div",{children:[h.jsx("span",{className:"text-slate-500",children:"Stop Loss:"}),h.jsxs("span",{className:"ml-2 text-red-400 font-medium",children:["$",c.stopLoss.toLocaleString()]})]}),c.takeProfit&&h.jsxs("div",{children:[h.jsx("span",{className:"text-slate-500",children:"Take Profit:"}),h.jsxs("span",{className:"ml-2 text-emerald-400 font-medium",children:["$",c.takeProfit.toLocaleString()]})]})]})]}),c.price&&h.jsxs("div",{className:"bg-gradient-to-br from-slate-950/80 to-purple-950/20 p-3 rounded-lg border border-purple-900/40 space-y-2",children:[h.jsxs("div",{className:"text-xs text-purple-300 mb-2 font-bold uppercase flex items-center gap-2",children:[h.jsx(Rn,{size:12})," Risk Analysis"]}),h.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[c.takeProfit&&h.jsxs("div",{className:"bg-emerald-900/20 p-2 rounded border border-emerald-800/30",children:[h.jsx("div",{className:"text-emerald-500 text-[10px] mb-1",children:"MAX PROFIT"}),h.jsxs("div",{className:"text-emerald-400 font-bold",children:["$",u.toFixed(2)]})]}),c.stopLoss&&h.jsxs("div",{className:"bg-red-900/20 p-2 rounded border border-red-800/30",children:[h.jsx("div",{className:"text-red-500 text-[10px] mb-1",children:"MAX LOSS"}),h.jsxs("div",{className:"text-red-400 font-bold",children:["-$",f.toFixed(2)]})]}),h.jsxs("div",{className:"bg-orange-900/20 p-2 rounded border border-orange-800/30",children:[h.jsx("div",{className:"text-orange-500 text-[10px] mb-1",children:"LIQUIDATION"}),h.jsxs("div",{className:"text-orange-400 font-bold",children:["$",m.toFixed(2)]})]})]})]})]})]}),h.jsxs("div",{className:"bg-slate-950/50 p-3 rounded-lg border border-slate-800 text-xs",children:[h.jsx("div",{className:"flex items-center gap-2 mb-2 text-slate-500 font-bold uppercase tracking-wider",children:"Trigger Condition"}),a.condition?h.jsx("div",{className:"space-y-1",children:h.jsxs("div",{className:"flex items-center gap-2 text-yellow-400 font-medium",children:[h.jsx(Rn,{size:14}),a.condition.indicator.toUpperCase()," (",a.condition.symbol,") ",a.condition.operator," ",a.condition.value]})}):h.jsxs("div",{className:"flex items-center gap-2 text-emerald-400",children:[h.jsx(Ua,{size:14}),"Time: ",new Date(a.executeAt).toLocaleString()]})]})]})},a.id)})})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[h.jsx(p4,{size:20,className:"text-slate-400"})," History"]}),h.jsxs(Ui,{variant:"ghost",size:"sm",onClick:s,className:"text-slate-500 hover:text-white",children:[h.jsx(sm,{size:14})," Clear History"]})]}),h.jsx("div",{className:"space-y-3 max-h-[500px] overflow-y-auto custom-scrollbar pr-2",children:i.length===0?h.jsx("div",{className:"text-center py-8 text-slate-600 text-sm",children:"No history available."}):i.map((a,l)=>h.jsx(rn.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:l*.05},children:h.jsxs(Bs,{className:Ut("p-4",a.status==="completed"?"opacity-70 hover:opacity-100 transition-opacity":"border-red-900/30 bg-red-900/10"),children:[h.jsxs("div",{className:"flex justify-between items-center mb-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[a.status==="completed"?h.jsx(p4,{size:16,className:"text-emerald-500"}):h.jsx(td,{size:16,className:"text-red-500"}),h.jsx(_l,{variant:a.status==="completed"?"success":"destructive",children:a.status.toUpperCase()})]}),h.jsx("span",{className:"text-xs text-slate-500",children:a.lastExecuted?new Date(a.lastExecuted).toLocaleString():"Unknown"})]}),h.jsxs("div",{className:"text-xs text-slate-300 mb-2",children:[a.type," - ",a.condition?"Condition":"Time"," Trigger"]}),h.jsx("div",{className:"bg-black/30 p-2 rounded text-[10px] font-mono text-slate-400 break-all",children:a.result})]})},a.id))})]})]})})},aZe=5,lZe="dealer_cycle_summary",mb={recentCycles:[],aiSummary:null,lastSummaryTime:0,isGenerating:!1};class cZe{constructor(){this.state=new Map,this.listeners=new Map,this.initialized=new Map,this.state.set("hyperliquid",{...mb}),this.state.set("polymarket",{...mb}),this.listeners.set("hyperliquid",new Set),this.listeners.set("polymarket",new Set),this.initialized.set("hyperliquid",!1),this.initialized.set("polymarket",!1)}getStorageKey(e){return Ie.getUserKey(`${lZe}_${e}`)}async loadState(e){var n;if(!this.initialized.get(e)){try{const r=this.getStorageKey(e),i=await Ie.getItem(r);if(i){const s=JSON.parse(i);this.state.set(e,{...mb,...s,isGenerating:!1}),console.log(`[CycleSummaryStore] Loaded ${e} state: ${((n=s.recentCycles)==null?void 0:n.length)||0} cycles`)}}catch(r){console.warn(`[CycleSummaryStore] Failed to load ${e} state:`,r)}this.initialized.set(e,!0)}}async saveState(e){try{const n=this.getStorageKey(e),r=this.state.get(e);if(r){const{isGenerating:i,...s}=r;await Ie.setItem(n,JSON.stringify(s))}}catch(n){console.warn(`[CycleSummaryStore] Failed to save ${e} state:`,n)}}getSnapshot(e){return this.state.get(e)||{...mb}}subscribe(e,n){const r=this.listeners.get(e);return r&&r.add(n),()=>{r==null||r.delete(n)}}notify(e){const n=this.listeners.get(e);n==null||n.forEach(r=>r())}recordCycle(e,n){const r=this.state.get(e);if(!r)return;const i=r.recentCycles.length+1,o=[{...n,cycleNumber:i},...r.recentCycles].slice(0,aZe);this.state.set(e,{...r,recentCycles:o}),this.notify(e),this.saveState(e),console.log(`[CycleSummaryStore] Recorded ${e} cycle #${i}: ${n.decisions.length} decisions`)}setGenerating(e,n){const r=this.state.get(e);r&&(this.state.set(e,{...r,isGenerating:n}),this.notify(e))}setSummary(e,n){const r=this.state.get(e);r&&(this.state.set(e,{...r,aiSummary:n,lastSummaryTime:Date.now(),isGenerating:!1}),this.notify(e),this.saveState(e),console.log(`[CycleSummaryStore] Updated ${e} AI summary (${n.length} chars)`))}clear(e){this.state.set(e,{...mb}),this.notify(e),this.saveState(e)}getContextForAI(e){const n=this.state.get(e);return!n||!n.aiSummary?null:n.aiSummary}getCyclesForSummary(e){const n=this.state.get(e);return(n==null?void 0:n.recentCycles)||[]}}const Ju=new cZe;let zJ=class{constructor(e,n,r){this.next=r,r&&(r.prev=this),this.prev=n,n&&(n.next=this),this.data=e}};class wfe{constructor(){this._length=0}get head(){return this._head&&this._head.data}get tail(){return this._tail&&this._tail.data}get current(){return this._current&&this._current.data}get length(){return this._length}push(e){this._tail=new zJ(e,this._tail),this._length===0&&(this._head=this._tail,this._current=this._head,this._next=this._head),this._length++}pop(){var e=this._tail;if(this._length!==0)return this._length--,this._length===0?(this._head=this._tail=this._current=this._next=void 0,e.data):(this._tail=e.prev,this._tail.next=void 0,this._current===e&&(this._current=this._tail,this._next=void 0),e.data)}shift(){var e=this._head;if(this._length!==0)return this._length--,this._length===0?(this._head=this._tail=this._current=this._next=void 0,e.data):(this._head=this._head.next,this._current===e&&(this._current=this._head,this._next=this._current.next),e.data)}unshift(e){this._head=new zJ(e,void 0,this._head),this._length===0&&(this._tail=this._head,this._next=this._head),this._length++}unshiftCurrent(){var e=this._current;return e===this._head||this._length<2?e&&e.data:(e===this._tail?(this._tail=e.prev,this._tail.next=void 0,this._current=this._tail):(e.next.prev=e.prev,e.prev.next=e.next,this._current=e.prev),this._next=this._current.next,e.next=this._head,e.prev=void 0,this._head.prev=e,this._head=e,e.data)}removeCurrent(){var e=this._current;if(this._length!==0)return this._length--,this._length===0?(this._head=this._tail=this._current=this._next=void 0,e.data):(e===this._tail?(this._tail=e.prev,this._tail.next=void 0,this._current=this._tail):e===this._head?(this._head=e.next,this._head.prev=void 0,this._current=this._head):(e.next.prev=e.prev,e.prev.next=e.next,this._current=e.prev),this._next=this._current.next,e.data)}resetCursor(){return this._current=this._next=this._head,this}next(){var e=this._next;if(e!==void 0)return this._next=e.next,this._current=e,e.data}}class Gg extends wfe{constructor(e,n,r,i){if(super(),this.size=e,this.maintainHigh=n,this.maintainLow=r,this.maintainSum=i,this.totalPushed=0,this.periodHigh=0,this.periodLow=1/0,this.periodSum=0,!e||typeof e!="number")throw"Size required and should be a number.";this._push=this.push,this.push=function(s){this.add(s),this.totalPushed++}}add(e){this.length===this.size?(this.lastShift=this.shift(),this._push(e),this.maintainHigh&&this.lastShift==this.periodHigh&&this.calculatePeriodHigh(),this.maintainLow&&this.lastShift==this.periodLow&&this.calculatePeriodLow(),this.maintainSum&&(this.periodSum=this.periodSum-this.lastShift)):this._push(e),this.maintainHigh&&this.periodHigh<=e&&(this.periodHigh=e),this.maintainLow&&this.periodLow>=e&&(this.periodLow=e),this.maintainSum&&(this.periodSum=this.periodSum+e)}*iterator(){for(this.resetCursor();this.next();)yield this.current}calculatePeriodHigh(){for(this.resetCursor(),this.next()&&(this.periodHigh=this.current);this.next();)this.periodHigh<=this.current&&(this.periodHigh=this.current)}calculatePeriodLow(){for(this.resetCursor(),this.next()&&(this.periodLow=this.current);this.next();)this.periodLow>=this.current&&(this.periodLow=this.current)}}let uZe={};function dZe(t){return uZe[t]}function fZe(t){let e=dZe("precision");return e?parseFloat(t.toPrecision(e)):t}class Ht{constructor(e){this.format=e.format||fZe}static reverseInputs(e){e.reversedInput&&(e.values&&e.values.reverse(),e.open&&e.open.reverse(),e.high&&e.high.reverse(),e.low&&e.low.reverse(),e.close&&e.close.reverse(),e.volume&&e.volume.reverse(),e.timestamp&&e.timestamp.reverse())}getResult(){return this.result}}class Il extends Ht{constructor(e){super(e),this.period=e.period,this.price=e.values;var n=(function*(r){var i=new wfe,s=0,o=1,a=yield,l;for(i.push(0);;)o<r?(o++,i.push(a),s=s+a):(s=s-i.shift()+a,l=s/r,i.push(a)),a=yield l});this.generator=n(this.period),this.generator.next(),this.result=[],this.price.forEach(r=>{var i=this.generator.next(r);i.value!==void 0&&this.result.push(this.format(i.value))})}nextValue(e){var n=this.generator.next(e).value;if(n!=null)return this.format(n)}}Il.calculate=hZe;function hZe(t){Ht.reverseInputs(t);var e=new Il(t).result;return t.reversedInput&&e.reverse(),Ht.reverseInputs(t),e}class px extends Ht{constructor(e){super(e);var n=e.period,r=e.values,i=2/(n+1),s;this.result=[],s=new Il({period:n,values:[]});var o=(function*(){for(var a=yield,l;;)l!==void 0&&a!==void 0?(l=(a-l)*i+l,a=yield l):(a=yield,l=s.nextValue(a),l&&(a=yield l))});this.generator=o(),this.generator.next(),this.generator.next(),r.forEach(a=>{var l=this.generator.next(a);l.value!=null&&this.result.push(this.format(l.value))})}nextValue(e){var n=this.generator.next(e).value;if(n!=null)return this.format(n)}}px.calculate=pZe;function pZe(t){Ht.reverseInputs(t);var e=new px(t).result;return t.reversedInput&&e.reverse(),Ht.reverseInputs(t),e}class bN extends Ht{constructor(e){super(e);var n=e.period,r=e.values,i=1/n,s;this.result=[],s=new Il({period:n,values:[]});var o=(function*(){for(var a=yield,l;;)l!==void 0&&a!==void 0?(l=(a-l)*i+l,a=yield l):(a=yield,l=s.nextValue(a),l!==void 0&&(a=yield l))});this.generator=o(),this.generator.next(),this.generator.next(),r.forEach(a=>{var l=this.generator.next(a);l.value!=null&&this.result.push(this.format(l.value))})}nextValue(e){var n=this.generator.next(e).value;if(n!=null)return this.format(n)}}bN.calculate=mZe;function mZe(t){Ht.reverseInputs(t);var e=new bN(t).result;return t.reversedInput&&e.reverse(),Ht.reverseInputs(t),e}class Zk extends Ht{constructor(e){super(e);var n=e.SimpleMAOscillator?Il:px,r=e.SimpleMASignal?Il:px,i=new n({period:e.fastPeriod,values:[],format:l=>l}),s=new n({period:e.slowPeriod,values:[],format:l=>l}),o=new r({period:e.signalPeriod,values:[],format:l=>l}),a=this.format;this.result=[],this.generator=(function*(){for(var l=0,c,u,f,m,g,x;;){if(l<e.slowPeriod){c=yield,g=i.nextValue(c),x=s.nextValue(c),l++;continue}g&&x&&(u=g-x,f=o.nextValue(u)),m=u-f,c=yield{MACD:a(u),signal:f?a(f):void 0,histogram:isNaN(m)?void 0:a(m)},g=i.nextValue(c),x=s.nextValue(c)}})(),this.generator.next(),e.values.forEach(l=>{var c=this.generator.next(l);c.value!=null&&this.result.push(c.value)})}nextValue(e){var n=this.generator.next(e).value;return n}}Zk.calculate=gZe;function gZe(t){Ht.reverseInputs(t);var e=new Zk(t).result;return t.reversedInput&&e.reverse(),Ht.reverseInputs(t),e}class ij extends Ht{constructor(e){super(e);let n=e.values,r=e.period,i=this.format;this.generator=(function*(s){var o=yield,a=1,l=0,c,u,f=o;for(o=yield;;)u=o-f,u=u>0?u:0,u>0&&(l=l+u),a<s?a++:c===void 0?c=l/s:c=(c*(s-1)+u)/s,f=o,c=c!==void 0?i(c):void 0,o=yield c})(r),this.generator.next(),this.result=[],n.forEach(s=>{var o=this.generator.next(s);o.value!==void 0&&this.result.push(o.value)})}nextValue(e){return this.generator.next(e).value}}ij.calculate=yZe;function yZe(t){Ht.reverseInputs(t);var e=new ij(t).result;return t.reversedInput&&e.reverse(),Ht.reverseInputs(t),e}class sj extends Ht{constructor(e){super(e);let n=e.values,r=e.period,i=this.format;this.generator=(function*(s){var o=yield,a=1,l=0,c,u,f=o;for(o=yield;;)u=f-o,u=u>0?u:0,u>0&&(l=l+u),a<s?a++:c===void 0?c=l/s:c=(c*(s-1)+u)/s,f=o,c=c!==void 0?i(c):void 0,o=yield c})(r),this.generator.next(),this.result=[],n.forEach(s=>{var o=this.generator.next(s);o.value!==void 0&&this.result.push(o.value)})}nextValue(e){return this.generator.next(e).value}}sj.calculate=xZe;function xZe(t){Ht.reverseInputs(t);var e=new sj(t).result;return t.reversedInput&&e.reverse(),Ht.reverseInputs(t),e}class eC extends Ht{constructor(e){super(e);var n=e.period,r=e.values,i=new ij({period:n,values:[]}),s=new sj({period:n,values:[]});this.generator=(function*(o){for(var a=yield,l,c,u,f;;)l=i.nextValue(a),c=s.nextValue(a),l!==void 0&&c!==void 0&&(c===0?f=100:l===0?f=0:(u=l/c,u=isNaN(u)?0:u,f=parseFloat((100-100/(1+u)).toFixed(2)))),a=yield f})(),this.generator.next(),this.result=[],r.forEach(o=>{var a=this.generator.next(o);a.value!==void 0&&this.result.push(a.value)})}nextValue(e){return this.generator.next(e).value}}eC.calculate=vZe;function vZe(t){Ht.reverseInputs(t);var e=new eC(t).result;return t.reversedInput&&e.reverse(),Ht.reverseInputs(t),e}class oj extends Ht{constructor(e){super(e);var n=e.period,r=e.values,i=new Il({period:n,values:[],format:s=>s});this.result=[],this.generator=(function*(){var s,o,a=new Gg(n);s=yield;for(var l;;){if(a.push(s),o=i.nextValue(s),o){let c=0;for(let u of a.iterator())c=c+Math.pow(u-o,2);l=Math.sqrt(c/n)}s=yield l}})(),this.generator.next(),r.forEach(s=>{var o=this.generator.next(s);o.value!=null&&this.result.push(this.format(o.value))})}nextValue(e){var n=this.generator.next(e);if(n.value!=null)return this.format(n.value)}}oj.calculate=bZe;function bZe(t){Ht.reverseInputs(t);var e=new oj(t).result;return t.reversedInput&&e.reverse(),Ht.reverseInputs(t),e}class tC extends Ht{constructor(e){super(e);var n=e.period,r=e.values,i=e.stdDev,s=this.format,o,a;this.result=[],o=new Il({period:n,values:[],format:l=>l}),a=new oj({period:n,values:[],format:l=>l}),this.generator=(function*(){var l,c,u,f;for(c=yield;;){if(u=o.nextValue(c),f=a.nextValue(c),u){let m=s(u),g=s(u+f*i),x=s(u-f*i),v=s((c-x)/(g-x));l={middle:m,upper:g,lower:x,pb:v}}c=yield l}})(),this.generator.next(),r.forEach(l=>{var c=this.generator.next(l);c.value!=null&&this.result.push(c.value)})}nextValue(e){return this.generator.next(e).value}}tC.calculate=wZe;function wZe(t){Ht.reverseInputs(t);var e=new tC(t).result;return t.reversedInput&&e.reverse(),Ht.reverseInputs(t),e}class Wb extends Ht{constructor(e){super(e),this.period=e.period,this.price=e.values;var n=(function*(r){for(var i=0,s=1,o=yield,a=0;;)s<r?(s++,i=i+o,a=void 0):s==r?(s++,i=i+o,a=i):a=a-a/r+o,o=yield a});this.generator=n(this.period),this.generator.next(),this.result=[],this.price.forEach(r=>{var i=this.generator.next(r);i.value!=null&&this.result.push(this.format(i.value))})}nextValue(e){var n=this.generator.next(e).value;if(n!=null)return this.format(n)}}Wb.calculate=EZe;function EZe(t){Ht.reverseInputs(t);var e=new Wb(t).result;return t.reversedInput&&e.reverse(),Ht.reverseInputs(t),e}class aj extends Ht{constructor(e){super(e);var n=e.low,r=e.high,i=this.format;if(n.length!=r.length)throw"Inputs(low,high) not of equal size";this.result=[],this.generator=(function*(){for(var s,o=yield,a;;){if(a){let l=o.high-a.high,c=a.low-o.low;s=i(c>l&&c>0?c:0)}a=o,o=yield s}})(),this.generator.next(),n.forEach((s,o)=>{var a=this.generator.next({high:r[o],low:n[o]});a.value!==void 0&&this.result.push(a.value)})}static calculate(e){Ht.reverseInputs(e);var n=new aj(e).result;return e.reversedInput&&n.reverse(),Ht.reverseInputs(e),n}nextValue(e){return this.generator.next(e).value}}class lj extends Ht{constructor(e){super(e);var n=e.low,r=e.high,i=this.format;if(n.length!=r.length)throw"Inputs(low,high) not of equal size";this.result=[],this.generator=(function*(){for(var s,o=yield,a;;){if(a){let l=o.high-a.high,c=a.low-o.low;s=i(l>c&&l>0?l:0)}a=o,o=yield s}})(),this.generator.next(),n.forEach((s,o)=>{var a=this.generator.next({high:r[o],low:n[o]});a.value!==void 0&&this.result.push(a.value)})}static calculate(e){Ht.reverseInputs(e);var n=new lj(e).result;return e.reversedInput&&n.reverse(),Ht.reverseInputs(e),n}nextValue(e){return this.generator.next(e).value}}class wN extends Ht{constructor(e){super(e);var n=e.low,r=e.high,i=e.close,s=this.format;if(n.length!=r.length)throw"Inputs(low,high) not of equal size";this.result=[],this.generator=(function*(){for(var o=yield,a,l;;)a===void 0&&(a=o.close,o=yield l),l=Math.max(o.high-o.low,isNaN(Math.abs(o.high-a))?0:Math.abs(o.high-a),isNaN(Math.abs(o.low-a))?0:Math.abs(o.low-a)),a=o.close,l!=null&&(l=s(l)),o=yield l})(),this.generator.next(),n.forEach((o,a)=>{var l=this.generator.next({high:r[a],low:n[a],close:i[a]});l.value!=null&&this.result.push(l.value)})}nextValue(e){return this.generator.next(e).value}}wN.calculate=SZe;function SZe(t){Ht.reverseInputs(t);var e=new wN(t).result;return t.reversedInput&&e.reverse(),Ht.reverseInputs(t),e}class nC extends Ht{constructor(e){super(e);var n=e.low,r=e.high,i=e.close,s=e.period,o=this.format,a=new lj({high:[],low:[]}),l=new aj({high:[],low:[]}),c=new Wb({period:s,values:[],format:x=>x}),u=new Wb({period:s,values:[],format:x=>x}),f=new Wb({period:s,values:[],format:x=>x}),m=new bN({period:s,values:[],format:x=>x}),g=new wN({low:[],high:[],close:[]});if(!(n.length===r.length&&r.length===i.length))throw"Inputs(low,high, close) not of equal size";this.result=[],this.generator=(function*(){for(var x=yield,v,w,E,C;;){let k=g.nextValue(x),O=a.nextValue(x),j=l.nextValue(x);if(k===void 0){x=yield;continue}let R=f.nextValue(k),U=c.nextValue(O),V=u.nextValue(j);if(R!=null&&U!=null&&V!=null){v=U*100/R,w=V*100/R;let F=Math.abs(v-w),$=v+w;E=F/$*100,C=m.nextValue(E)}x=yield{adx:C,pdi:v,mdi:w}}})(),this.generator.next(),n.forEach((x,v)=>{var w=this.generator.next({high:r[v],low:n[v],close:i[v]});w.value!=null&&w.value.adx!=null&&this.result.push({adx:o(w.value.adx),pdi:o(w.value.pdi),mdi:o(w.value.mdi)})})}nextValue(e){let n=this.generator.next(e).value;if(n!=null&&n.adx!=null)return{adx:this.format(n.adx),pdi:this.format(n.pdi),mdi:this.format(n.mdi)}}}nC.calculate=AZe;function AZe(t){Ht.reverseInputs(t);var e=new nC(t).result;return t.reversedInput&&e.reverse(),Ht.reverseInputs(t),e}class rC extends Ht{constructor(e){super(e);var n=e.low,r=e.high,i=e.close,s=e.period,o=this.format;if(!(n.length===r.length&&r.length===i.length))throw"Inputs(low,high, close) not of equal size";var a=new wN({low:[],high:[],close:[]}),l=new bN({period:s,values:[],format:c=>c});this.result=[],this.generator=(function*(){for(var c=yield,u,f;;)f=a.nextValue({low:c.low,high:c.high,close:c.close}),f===void 0?u=void 0:u=l.nextValue(f),c=yield u})(),this.generator.next(),n.forEach((c,u)=>{var f=this.generator.next({high:r[u],low:n[u],close:i[u]});f.value!==void 0&&this.result.push(o(f.value))})}nextValue(e){return this.generator.next(e).value}}rC.calculate=TZe;function TZe(t){Ht.reverseInputs(t);var e=new rC(t).result;return t.reversedInput&&e.reverse(),Ht.reverseInputs(t),e}class iC extends Ht{constructor(e){super(e);let n=e.low,r=e.high,i=e.close,s=e.period,o=e.signalPeriod,a=this.format;if(!(n.length===r.length&&r.length===i.length))throw"Inputs(low,high, close) not of equal size";this.result=[],this.generator=(function*(){let l=1,c=new Gg(s,!0,!1),u=new Gg(s,!1,!0),f=new Il({period:o,values:[],format:v=>v}),m,g;for(var x=yield;;){if(c.push(x.high),u.push(x.low),l<s){l++,x=yield;continue}let v=u.periodLow;m=(x.close-v)/(c.periodHigh-v)*100,m=isNaN(m)?0:m,g=f.nextValue(m),x=yield{k:a(m),d:g!==void 0?a(g):void 0}}})(),this.generator.next(),n.forEach((l,c)=>{var u=this.generator.next({high:r[c],low:n[c],close:i[c]});u.value!==void 0&&this.result.push(u.value)})}nextValue(e){let n=this.generator.next(e);if(n.value!==void 0)return n.value}}iC.calculate=kZe;function kZe(t){Ht.reverseInputs(t);var e=new iC(t).result;return t.reversedInput&&e.reverse(),Ht.reverseInputs(t),e}class sC extends Ht{constructor(e){super(e);var n=e.close,r=e.volume;this.result=[],this.generator=(function*(){var i=0,s,o;for(s=yield,s.close&&typeof s.close=="number"&&(o=s.close,s=yield);;)o<s.close?i=i+s.volume:s.close<o&&(i=i-s.volume),o=s.close,s=yield i})(),this.generator.next(),n.forEach((i,s)=>{let o={close:n[s],volume:r[s]},a=this.generator.next(o);a.value!=null&&this.result.push(a.value)})}nextValue(e){return this.generator.next(e).value}}sC.calculate=CZe;function CZe(t){Ht.reverseInputs(t);var e=new sC(t).result;return t.reversedInput&&e.reverse(),Ht.reverseInputs(t),e}class oC extends Ht{constructor(e){super(e),this.result=[];var n={conversionPeriod:9,basePeriod:26,spanPeriod:52,displacement:26},r=Object.assign({},n,e),i=new Gg(r.conversionPeriod*2,!0,!0,!1),s=new Gg(r.basePeriod*2,!0,!0,!1),o=new Gg(r.spanPeriod*2,!0,!0,!1);this.generator=(function*(){let a,l,c=Math.max(r.conversionPeriod,r.basePeriod,r.spanPeriod,r.displacement),u=1;for(l=yield;;){if(i.push(l.high),i.push(l.low),s.push(l.high),s.push(l.low),o.push(l.high),o.push(l.low),u<c)u++;else{let f=(i.periodHigh+i.periodLow)/2,m=(s.periodHigh+s.periodLow)/2,g=(f+m)/2,x=(o.periodHigh+o.periodLow)/2;a={conversion:f,base:m,spanA:g,spanB:x}}l=yield a}})(),this.generator.next(),e.low.forEach((a,l)=>{var c=this.generator.next({high:e.high[l],low:e.low[l]});c.value&&this.result.push(c.value)})}nextValue(e){return this.generator.next(e).value}}oC.calculate=NZe;function NZe(t){Ht.reverseInputs(t);var e=new oC(t).result;return t.reversedInput&&e.reverse(),Ht.reverseInputs(t),e}class _Ze{normalizeInterval(e){const n=e.toLowerCase();return{1:"1m",5:"5m",15:"15m",60:"1h",240:"4h",d:"1d","1d":"1d",w:"1d","1w":"1d","7d":"1d"}[n]||"1h"}async getMarketPrice(e){try{const n=e.replace(/USDT$/i,"").replace(/USD$/i,"");return{price:await $t.getCurrentPrice(n),exchange:"Hyperliquid",lastUpdate:new Date().toISOString()}}catch(n){throw console.error(`Error fetching market price for ${e}:`,n),new Error(`Failed to get market price: ${n.message}`)}}async getOHLCV(e,n="60"){try{const r=e.replace(/USDT$/i,"").replace(/USD$/i,""),i=this.normalizeInterval(n),s=await $t.getCandles(r,i,1);if(!s||s.length===0)throw new Error("No candle data available");const o=s[s.length-1];return{open:o.open,high:o.high,low:o.low,close:o.close,volume:o.volume||0,timestamp:new Date(o.time).toISOString()}}catch(r){throw console.error(`Error fetching OHLCV for ${e}:`,r),new Error(`Failed to get OHLCV data: ${r.message}`)}}async getHistory(e,n="1D",r=100){try{const i=e.replace(/USDT$/i,"").replace(/USD$/i,""),s=this.normalizeInterval(n);return(await $t.getCandles(i,s,r)).map(a=>({time:Math.floor(a.time/1e3),open:a.open,high:a.high,low:a.low,close:a.close,volume:a.volume}))}catch(i){return console.error(`Error fetching history for ${e}:`,i),[]}}async getIndicator(e,n,r="60",i){try{const s=e.replace(/USDT$/i,"").replace(/USD$/i,""),o=this.normalizeInterval(r),a=await $t.getCandles(s,o,200);if(!a||a.length===0)throw new Error("No data available for indicator calculation");const l=a.map(v=>v.close),c=a.map(v=>v.high),u=a.map(v=>v.low),f=a.map(v=>v.volume||0);let m=0,g=[];switch(n.toLowerCase()){case"rsi":const v=(i==null?void 0:i.period)||14,w={values:l,period:v},E=eC.calculate(w);m=E[E.length-1],g=E.slice(-100);break;case"macd":const C={values:l,fastPeriod:(i==null?void 0:i.fast)||12,slowPeriod:(i==null?void 0:i.slow)||26,signalPeriod:(i==null?void 0:i.signal)||9,SimpleMAOscillator:!1,SimpleMASignal:!1},k=Zk.calculate(C),O=k[k.length-1];m={macd:(O==null?void 0:O.MACD)||0,signal:(O==null?void 0:O.signal)||0,histogram:(O==null?void 0:O.histogram)||0},g=k.slice(-100);break;case"ema":const R={period:(i==null?void 0:i.period)||20,values:l},U=px.calculate(R);m=U[U.length-1],g=U.slice(-100);break;case"sma":const F={period:(i==null?void 0:i.period)||20,values:l},$=Il.calculate(F);m=$[$.length-1],g=$.slice(-100);break;case"stoch":const K={high:c,low:u,close:l,period:(i==null?void 0:i.period)||14,signalPeriod:(i==null?void 0:i.signalPeriod)||3},H=iC.calculate(K),B=H[H.length-1];m={k:(B==null?void 0:B.k)||0,d:(B==null?void 0:B.d)||0},g=H.slice(-100);break;case"bollinger":const A=(i==null?void 0:i.period)||20,I=(i==null?void 0:i.stdDev)||2,M={period:A,values:l,stdDev:I},z=tC.calculate(M),G=z[z.length-1],te=l[l.length-1],Y=G?(te-G.lower)/(G.upper-G.lower):.5;m={upper:(G==null?void 0:G.upper)||0,middle:(G==null?void 0:G.middle)||0,lower:(G==null?void 0:G.lower)||0,pb:Y},g=z.slice(-100);break;case"atr":const q=(i==null?void 0:i.period)||14,D={high:c,low:u,close:l,period:q},_=rC.calculate(D);m=_[_.length-1]||0,g=_.slice(-100);break;case"adx":const W=(i==null?void 0:i.period)||14,X={high:c,low:u,close:l,period:W},re=nC.calculate(X),ae=re[re.length-1];m={adx:(ae==null?void 0:ae.adx)||0,pdi:(ae==null?void 0:ae.pdi)||0,mdi:(ae==null?void 0:ae.mdi)||0},g=re.slice(-100);break;case"obv":const Ee={close:l,volume:f},ue=sC.calculate(Ee);m=ue[ue.length-1]||0,g=ue.slice(-100);break;case"vwap":let me=0,ce=0;const oe=[];for(let st=0;st<a.length;st++){const Bt=(c[st]+u[st]+l[st])/3;me+=Bt*f[st],ce+=f[st],oe.push(ce>0?me/ce:Bt)}m=oe[oe.length-1]||l[l.length-1],g=oe.slice(-100);break;case"ichimoku":const ke=(i==null?void 0:i.conversion)||9,Ne=(i==null?void 0:i.base)||26,ze=(i==null?void 0:i.spanB)||52,Ze=(i==null?void 0:i.displacement)||26,Ye={high:c,low:u,conversionPeriod:ke,basePeriod:Ne,spanPeriod:ze,displacement:Ze},We=oC.calculate(Ye),St=We[We.length-1];m={tenkanSen:(St==null?void 0:St.conversion)||0,kijunSen:(St==null?void 0:St.base)||0,senkouSpanA:(St==null?void 0:St.spanA)||0,senkouSpanB:(St==null?void 0:St.spanB)||0,chikouSpan:l[l.length-Ze]||l[l.length-1]},g=We.slice(-100);break;case"price":m=l[l.length-1],g=l.slice(-100);break;default:throw new Error(`Unsupported indicator: ${n}`)}return{symbol:e,indicator:n.toUpperCase(),value:m,history:g,timestamp:Date.now()}}catch(s){throw console.error(`Error calculating indicator ${n} for ${e}:`,s),new Error(`Failed to calculate indicator: ${s.message}`)}}async getTradingViewSummary(e){try{const n=e.replace(/USDT$/i,"").replace(/USD$/i,""),r=await $t.getCandles(n,"1h",12);if(!r||r.length<2)return{buy:0,sell:0,neutral:1,recommendation:"NEUTRAL"};let i=0,s=0;for(let l=1;l<r.length;l++)r[l].close>r[l-1].close?i++:s++;const o=Math.max(0,r.length-1-i-s);let a;return i>8?a="STRONG_BUY":i>6?a="BUY":s>8?a="STRONG_SELL":s>6?a="SELL":a="NEUTRAL",{buy:i,sell:s,neutral:o,recommendation:a}}catch(n){return console.error(`Error fetching summary for ${e}:`,n),{buy:0,sell:0,neutral:1,recommendation:"NEUTRAL"}}}detectDivergences(e,n,r){const i=[];if(e.length<20||n.length<20)return i;const o=(m,g=5)=>{const x=[],v=[];for(let w=g;w<m.length-g;w++){let E=!0,C=!0;for(let k=w-g;k<=w+g;k++)k!==w&&(m[k]<=m[w]&&(E=!1),m[k]>=m[w]&&(C=!1));E&&x.push(w),C&&v.push(w)}return{minima:x,maxima:v}},a=e.slice(-20),l=n.slice(-20),c=r.slice(-20),u=o(a),f=o(l);if(u.minima.length>=2&&f.minima.length>=2){const m=u.minima[u.minima.length-1],g=u.minima[u.minima.length-2],x=f.minima[f.minima.length-1],v=f.minima[f.minima.length-2],w=a[m]<a[g],E=l[x]>l[v];if(w&&E){const O=l[x]<30?"STRONG":l[x]<40?"MODERATE":"WEAK";i.push({type:"BULLISH",indicator:"RSI",description:`Price made lower low (${a[g].toFixed(2)}  ${a[m].toFixed(2)}) but RSI made higher low (${l[v].toFixed(1)}  ${l[x].toFixed(1)}). Potential reversal UP.`,strength:O,priceRange:{start:a[g],end:a[m]},indicatorRange:{start:l[v],end:l[x]}})}const C=a[m]>a[g],k=l[x]<l[v];C&&k&&i.push({type:"HIDDEN_BULLISH",indicator:"RSI",description:"Price made higher low but RSI made lower low. Bullish trend continuation signal.",strength:"MODERATE",priceRange:{start:a[g],end:a[m]},indicatorRange:{start:l[v],end:l[x]}})}if(u.maxima.length>=2&&f.maxima.length>=2){const m=u.maxima[u.maxima.length-1],g=u.maxima[u.maxima.length-2],x=f.maxima[f.maxima.length-1],v=f.maxima[f.maxima.length-2],w=a[m]>a[g],E=l[x]<l[v];if(w&&E){const O=l[x]>70?"STRONG":l[x]>60?"MODERATE":"WEAK";i.push({type:"BEARISH",indicator:"RSI",description:`Price made higher high (${a[g].toFixed(2)}  ${a[m].toFixed(2)}) but RSI made lower high (${l[v].toFixed(1)}  ${l[x].toFixed(1)}). Potential reversal DOWN.`,strength:O,priceRange:{start:a[g],end:a[m]},indicatorRange:{start:l[v],end:l[x]}})}const C=a[m]<a[g],k=l[x]>l[v];C&&k&&i.push({type:"HIDDEN_BEARISH",indicator:"RSI",description:"Price made lower high but RSI made higher high. Bearish trend continuation signal.",strength:"MODERATE",priceRange:{start:a[g],end:a[m]},indicatorRange:{start:l[v],end:l[x]}})}if(c.length>=10){const m=c[c.length-1]-c[c.length-5],g=a[a.length-1]-a[a.length-5];m<-.5&&g>0&&i.push({type:"BEARISH",indicator:"MACD",description:"MACD histogram declining while price rising. Momentum weakening.",strength:"WEAK",priceRange:{start:a[a.length-5],end:a[a.length-1]},indicatorRange:{start:c[c.length-5],end:c[c.length-1]}}),m>.5&&g<0&&i.push({type:"BULLISH",indicator:"MACD",description:"MACD histogram rising while price falling. Momentum building.",strength:"WEAK",priceRange:{start:a[a.length-5],end:a[a.length-1]},indicatorRange:{start:c[c.length-5],end:c[c.length-1]}})}return i}calculateIndicatorFromCandles(e,n,r){if(!e||e.length===0)return{value:0,history:[]};const i=e.map(f=>f.close),s=e.map(f=>f.high),o=e.map(f=>f.low),a=e.map(f=>f.volume||0);let l=0,c=[];switch(n.toLowerCase()){case"rsi":const f=(r==null?void 0:r.period)||14,m=eC.calculate({values:i,period:f});l=m[m.length-1]||0,c=m.slice(-100);break;case"macd":const g=Zk.calculate({values:i,fastPeriod:(r==null?void 0:r.fast)||12,slowPeriod:(r==null?void 0:r.slow)||26,signalPeriod:(r==null?void 0:r.signal)||9,SimpleMAOscillator:!1,SimpleMASignal:!1}),x=g[g.length-1];l={macd:(x==null?void 0:x.MACD)||0,signal:(x==null?void 0:x.signal)||0,histogram:(x==null?void 0:x.histogram)||0},c=g.slice(-100).map(z=>({macd:(z==null?void 0:z.MACD)||0,signal:(z==null?void 0:z.signal)||0,histogram:(z==null?void 0:z.histogram)||0}));break;case"ema":const v=px.calculate({period:(r==null?void 0:r.period)||20,values:i});l=v[v.length-1]||0,c=v.slice(-100);break;case"sma":const w=Il.calculate({period:(r==null?void 0:r.period)||20,values:i});l=w[w.length-1]||0,c=w.slice(-100);break;case"stoch":const E=iC.calculate({high:s,low:o,close:i,period:(r==null?void 0:r.period)||14,signalPeriod:(r==null?void 0:r.signalPeriod)||3}),C=E[E.length-1];l={k:(C==null?void 0:C.k)||0,d:(C==null?void 0:C.d)||0},c=E.slice(-100);break;case"bollinger":const k=tC.calculate({period:(r==null?void 0:r.period)||20,values:i,stdDev:(r==null?void 0:r.stdDev)||2}),O=k[k.length-1],j=i[i.length-1],R=O?(j-O.lower)/(O.upper-O.lower):.5;l={upper:(O==null?void 0:O.upper)||0,middle:(O==null?void 0:O.middle)||0,lower:(O==null?void 0:O.lower)||0,pb:R},c=k.slice(-100);break;case"atr":const U=rC.calculate({high:s,low:o,close:i,period:(r==null?void 0:r.period)||14});l=U[U.length-1]||0,c=U.slice(-100);break;case"adx":const V=nC.calculate({high:s,low:o,close:i,period:(r==null?void 0:r.period)||14}),F=V[V.length-1];l={adx:(F==null?void 0:F.adx)||0,pdi:(F==null?void 0:F.pdi)||0,mdi:(F==null?void 0:F.mdi)||0},c=V.slice(-100);break;case"obv":const $=sC.calculate({close:i,volume:a});l=$[$.length-1]||0,c=$.slice(-100);break;case"vwap":let K=0,H=0;const B=[];for(let z=0;z<e.length;z++){const G=(s[z]+o[z]+i[z])/3;K+=G*a[z],H+=a[z],B.push(H>0?K/H:G)}l=B[B.length-1]||i[i.length-1],c=B.slice(-100);break;case"ichimoku":const A=oC.calculate({high:s,low:o,conversionPeriod:(r==null?void 0:r.conversion)||9,basePeriod:(r==null?void 0:r.base)||26,spanPeriod:(r==null?void 0:r.spanB)||52,displacement:(r==null?void 0:r.displacement)||26}),I=A[A.length-1],M=(r==null?void 0:r.displacement)||26;l={tenkanSen:(I==null?void 0:I.conversion)||0,kijunSen:(I==null?void 0:I.base)||0,senkouSpanA:(I==null?void 0:I.spanA)||0,senkouSpanB:(I==null?void 0:I.spanB)||0,chikouSpan:i[i.length-M]||i[i.length-1]},c=A.slice(-100);break;default:console.warn(`[MarketDataMCP] Unknown indicator: ${n}`)}return{value:l,history:c}}}const co=new _Ze,Hn={async getMarketData(t){return await $t.getMarketData(t)},async getPositions(t){return(await $t.getUserState(t)).assetPositions},async getOpenOrders(t){return await $t.getOpenOrders(t)},async getUserFills(t){return await $t.getUserFills(t)},async createOrder(t,e,n,r,i,s){return await $t.placeOrder(t,e,n,r,i,s)},async cancelOrder(t,e,n){return await $t.cancelOrder(t,e,n)},async getUserState(t){return await $t.getUserState(t)},async updateLeverage(t,e,n,r){return await $t.updateLeverage(t,e,n,r)},async updateIsolatedMargin(t,e,n,r){return await $t.updateIsolatedMargin(t,e,n,r)},async closePosition(t,e,n,r="market",i){return await $t.closePosition(t,e,n,r,i)},async withdrawUSDC(t,e,n){return await $t.withdrawUSDC(t,e,n)},async getAvailableAssets(){return await $t.getAllAvailableAssets()},async getAssetDecimals(t){return await $t.getAssetDecimals(t)},async validateAsset(t){return await $t.isValidAsset(t)},async getAssetContexts(){return await $t.getAssetContexts()},async getFundingRate(t){return await $t.getFundingRate(t)},async getUserFees(t){return await $t.getUserFees(t)},async getUserFundingHistory(t,e,n){return await $t.getUserFundingHistory(t,e,n)},calculateBreakevenPrice(t,e,n,r,i,s,o){return $t.calculateBreakevenPrice(t,e,n,r,i,s,o)}};function Efe(t){for(const[e,n]of Object.entries(UC))if(n.indicators.includes(t))return e;return null}function Sfe(t,e){return UC[e].indicators.filter(r=>{var i;return(i=t[r])==null?void 0:i.enabled}).length}function Afe(t,e){return Sfe(t,e)>=UC[e].maxIndicators}function Tfe(t){return Object.values(t).filter(e=>e.enabled).length}function kfe(t){return Tfe(t)>=vee}function HJ(t,e){var r;if((r=t[e])!=null&&r.enabled)return!0;if(kfe(t))return!1;const n=Efe(e);return!(n&&Afe(t,n))}function IZe(t,e){const r={...e||Pg};for(const i of Object.keys(r))r[i]={...r[i],enabled:!1};if(t!=="custom"){const i=qu[t];for(const s of i.indicators)r[s]&&(r[s]={...r[s],enabled:!0})}return r}function PZe(t){const e=Object.keys(t).filter(n=>t[n].enabled).sort();for(const[n,r]of Object.entries(qu)){if(n==="custom")continue;const i=[...r.indicators].sort();if(JSON.stringify(e)===JSON.stringify(i))return n}return"custom"}class RZe{constructor(){this.userFeesCache=null,this.userFeesCacheTime=0,this.FEES_CACHE_TTL=300*1e3}async getUserFeesFromCache(e){const n=Date.now();if(this.userFeesCache&&n-this.userFeesCacheTime<this.FEES_CACHE_TTL)return this.userFeesCache;if(e)try{const r=await Hn.getUserFees(e);return this.userFeesCache={makerFee:r.makerFee,takerFee:r.takerFee},this.userFeesCacheTime=n,this.userFeesCache}catch{console.warn("[DealerMCP] Failed to fetch user fees, using defaults")}return{makerFee:2e-4,takerFee:5e-4}}async getMarketContext(e,n,r="60",i,s=100){var a,l;const o=`${e}USDT`;try{const c=await co.getMarketPrice(o),f=await co.getHistory(o,r,200),m=f.slice(-s);console.log(`[DealerMCP] Fetched ${f.length} candles, using last ${m.length} for history (config: ${s})`);const g={},x=[],v=f.map(H=>({open:H.open,high:H.high,low:H.low,close:H.close,volume:H.volume||0})),w=i?Object.entries(i).filter(([H,B])=>B.enabled).map(([H,B])=>({name:H,params:B.params})):[{name:"rsi",params:{period:14}},{name:"macd",params:{fast:12,slow:26,signal:9}}];for(const{name:H,params:B}of w)try{const A=co.calculateIndicatorFromCandles(v,H,B),I=i==null?void 0:i[H],M=(I==null?void 0:I.weight)??1,z=Efe(H);g[H]={value:A.value,history:A.history,weight:M,category:z},x.push(H)}catch(A){console.warn(`[DealerMCP] Failed to calculate ${H} for ${e}:`,A)}const[E,C,k]=await Promise.all([Hn.getFundingRate(e).catch(()=>null),this.getUserFeesFromCache(n),$t.getOrderBookMetrics(e).catch(()=>null)]),O=(E==null?void 0:E.funding)||0,j=Math.abs(O)*3,R={fundingRate:O,dailyHoldingCost:j},U=((a=g.rsi)==null?void 0:a.history)||[],F=(((l=g.macd)==null?void 0:l.history)||[]).map(H=>(H==null?void 0:H.histogram)||0),$=m.map(H=>H.close),K=co.detectDivergences($,U,F);return K.length>0&&console.log(`[DealerMCP] Divergences detected for ${e}:`,K.map(H=>`${H.type}(${H.indicator})`).join(", ")),console.log(`[DealerMCP] Context for ${e} (${r}m): Price=${c.price}, Indicators=[${x.join(",")}], Divergences=${K.length}, OrderBook=${k?"OK":"N/A"}`),{symbol:e,currentPrice:c.price,history:m,indicators:g,divergences:K,tradingCosts:R,orderBook:k||void 0,ts:Math.floor(Date.now()/1e3)}}catch(c){return console.error(`[DealerMCP] Failed to gather context for ${e}:`,c),{symbol:e,currentPrice:0,history:[],indicators:{},divergences:[],tradingCosts:{fundingRate:0,dailyHoldingCost:0},error:c.message||"Data unavailable",ts:Math.floor(Date.now()/1e3)}}}calculatePositionBreakevens(e,n,r){return e.map(i=>{var v,w,E,C,k,O,j;const s=((v=i.position)==null?void 0:v.coin)||i.coin,o=parseFloat(((w=i.position)==null?void 0:w.entryPx)||i.entryPx||"0"),a=((C=(E=i.position)==null?void 0:E.leverage)==null?void 0:C.value)||1,c=parseFloat(((k=i.position)==null?void 0:k.szi)||i.szi||"0")>0,u=r.get(s)||0,f=Hn.calculateBreakevenPrice(o,a,c,n.makerFee,n.takerFee,u,8),m=parseFloat(((O=i.position)==null?void 0:O.unrealizedPnl)||"0"),g=parseFloat(((j=i.position)==null?void 0:j.positionValue)||"0"),x=g>0?m/g*100:0;return{coin:s,entryPrice:o,breakevenPrice:f.breakevenPrice,minProfitPrice:f.minProfitPrice,currentPnlPercent:x,isAboveBreakeven:m>0}})}async getMacroSnapshot(e,n,r){const i=`${e}USDT`;try{const o=await co.getHistory(i,n,50);if(o.length<20)return console.warn(`[DealerMCP] Insufficient candles for macro ${e}@${n}`),{timeframe:n,indicators:{},ts:Math.floor(Date.now()/1e3)};const a=o.map(u=>({open:u.open,high:u.high,low:u.low,close:u.close,volume:u.volume||0})),l={},c=r?Object.entries(r).filter(([u,f])=>f.enabled).map(([u,f])=>({name:u,params:f.params})):[{name:"rsi",params:{period:14}},{name:"macd",params:{fast:12,slow:26,signal:9}}];for(const{name:u,params:f}of c)try{const m=co.calculateIndicatorFromCandles(a,u,f);l[u]={value:m.value}}catch(m){console.warn(`[DealerMCP] Failed to calc macro ${u} for ${e}:`,m)}return console.log(`[DealerMCP] Macro snapshot for ${e}@${n}: ${Object.keys(l).join(",")}`),{timeframe:n,indicators:l,ts:Math.floor(Date.now()/1e3)}}catch(s){return console.error(`[DealerMCP] Macro snapshot failed for ${e}:`,s),{timeframe:n,indicators:{},ts:Math.floor(Date.now()/1e3)}}}}const $5=new RZe;var OZe={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let MZe,DZe;function LZe(){return{geminiUrl:MZe,vertexUrl:DZe}}function BZe(t,e,n,r){var i,s;if(!(t!=null&&t.baseUrl)){const o=LZe();return e?(i=o.vertexUrl)!==null&&i!==void 0?i:n:(s=o.geminiUrl)!==null&&s!==void 0?s:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Id{}function yt(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const s=e[i];return s!=null?String(s):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function N(t,e,n){for(let s=0;s<e.length-1;s++){const o=e[s];if(o.endsWith("[]")){const a=o.slice(0,-2);if(!(a in t))if(Array.isArray(n))t[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(t[a])){const l=t[a];if(Array.isArray(n))for(let c=0;c<l.length;c++){const u=l[c];N(u,e.slice(s+1),n[c])}else for(const c of l)N(c,e.slice(s+1),n)}return}else if(o.endsWith("[0]")){const a=o.slice(0,-3);a in t||(t[a]=[{}]);const l=t[a];N(l[0],e.slice(s+1),n);return}(!t[o]||typeof t[o]!="object")&&(t[o]={}),t=t[o]}const r=e[e.length-1],i=t[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function S(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const i=e[r];if(i.endsWith("[]")){const s=i.slice(0,-2);if(s in t){const o=t[s];return Array.isArray(o)?o.map(a=>S(a,e.slice(r+1),n)):n}else return n}else t=t[i]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function jZe(t,e){for(const[n,r]of Object.entries(e)){const i=n.split("."),s=r.split("."),o=new Set;let a=-1;for(let l=0;l<i.length;l++)if(i[l]==="*"){a=l;break}if(a!==-1&&s.length>a)for(let l=a;l<s.length;l++){const c=s[l];c!=="*"&&!c.endsWith("[]")&&!c.endsWith("[0]")&&o.add(c)}TD(t,i,s,0,o)}}function TD(t,e,n,r,i){if(r>=e.length||typeof t!="object"||t===null)return;const s=e[r];if(s.endsWith("[]")){const o=s.slice(0,-2),a=t;if(o in a&&Array.isArray(a[o]))for(const l of a[o])TD(l,e,n,r+1,i)}else if(s==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const o=t,a=Object.keys(o).filter(c=>!c.startsWith("_")&&!i.has(c)),l={};for(const c of a)l[c]=o[c];for(const[c,u]of Object.entries(l)){const f=[];for(const m of n.slice(r))m==="*"?f.push(c):f.push(m);N(o,f,u)}for(const c of a)delete o[c]}}else{const o=t;s in o&&TD(o[s],e,n,r+1,i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cj(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function UZe(t){const e={},n=S(t,["operationName"]);n!=null&&N(e,["operationName"],n);const r=S(t,["resourceName"]);return r!=null&&N(e,["_url","resourceName"],r),e}function FZe(t){const e={},n=S(t,["name"]);n!=null&&N(e,["name"],n);const r=S(t,["metadata"]);r!=null&&N(e,["metadata"],r);const i=S(t,["done"]);i!=null&&N(e,["done"],i);const s=S(t,["error"]);s!=null&&N(e,["error"],s);const o=S(t,["response","generateVideoResponse"]);return o!=null&&N(e,["response"],zZe(o)),e}function $Ze(t){const e={},n=S(t,["name"]);n!=null&&N(e,["name"],n);const r=S(t,["metadata"]);r!=null&&N(e,["metadata"],r);const i=S(t,["done"]);i!=null&&N(e,["done"],i);const s=S(t,["error"]);s!=null&&N(e,["error"],s);const o=S(t,["response"]);return o!=null&&N(e,["response"],HZe(o)),e}function zZe(t){const e={},n=S(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>VZe(o))),N(e,["generatedVideos"],s)}const r=S(t,["raiMediaFilteredCount"]);r!=null&&N(e,["raiMediaFilteredCount"],r);const i=S(t,["raiMediaFilteredReasons"]);return i!=null&&N(e,["raiMediaFilteredReasons"],i),e}function HZe(t){const e={},n=S(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>qZe(o))),N(e,["generatedVideos"],s)}const r=S(t,["raiMediaFilteredCount"]);r!=null&&N(e,["raiMediaFilteredCount"],r);const i=S(t,["raiMediaFilteredReasons"]);return i!=null&&N(e,["raiMediaFilteredReasons"],i),e}function VZe(t){const e={},n=S(t,["video"]);return n!=null&&N(e,["video"],XZe(n)),e}function qZe(t){const e={},n=S(t,["_self"]);return n!=null&&N(e,["video"],QZe(n)),e}function GZe(t){const e={},n=S(t,["operationName"]);return n!=null&&N(e,["_url","operationName"],n),e}function KZe(t){const e={},n=S(t,["operationName"]);return n!=null&&N(e,["_url","operationName"],n),e}function WZe(t){const e={},n=S(t,["name"]);n!=null&&N(e,["name"],n);const r=S(t,["metadata"]);r!=null&&N(e,["metadata"],r);const i=S(t,["done"]);i!=null&&N(e,["done"],i);const s=S(t,["error"]);s!=null&&N(e,["error"],s);const o=S(t,["response"]);return o!=null&&N(e,["response"],YZe(o)),e}function YZe(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["parent"]);r!=null&&N(e,["parent"],r);const i=S(t,["documentName"]);return i!=null&&N(e,["documentName"],i),e}function Cfe(t){const e={},n=S(t,["name"]);n!=null&&N(e,["name"],n);const r=S(t,["metadata"]);r!=null&&N(e,["metadata"],r);const i=S(t,["done"]);i!=null&&N(e,["done"],i);const s=S(t,["error"]);s!=null&&N(e,["error"],s);const o=S(t,["response"]);return o!=null&&N(e,["response"],JZe(o)),e}function JZe(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["parent"]);r!=null&&N(e,["parent"],r);const i=S(t,["documentName"]);return i!=null&&N(e,["documentName"],i),e}function XZe(t){const e={},n=S(t,["uri"]);n!=null&&N(e,["uri"],n);const r=S(t,["encodedVideo"]);r!=null&&N(e,["videoBytes"],cj(r));const i=S(t,["encoding"]);return i!=null&&N(e,["mimeType"],i),e}function QZe(t){const e={},n=S(t,["gcsUri"]);n!=null&&N(e,["uri"],n);const r=S(t,["bytesBase64Encoded"]);r!=null&&N(e,["videoBytes"],cj(r));const i=S(t,["mimeType"]);return i!=null&&N(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var VJ;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(VJ||(VJ={}));var qJ;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(qJ||(qJ={}));var GJ;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(GJ||(GJ={}));var Be;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Be||(Be={}));var KJ;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(KJ||(KJ={}));var WJ;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(WJ||(WJ={}));var YJ;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(YJ||(YJ={}));var JJ;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(JJ||(JJ={}));var XJ;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(XJ||(XJ={}));var QJ;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(QJ||(QJ={}));var ZJ;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(ZJ||(ZJ={}));var eX;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(eX||(eX={}));var tX;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(tX||(tX={}));var nX;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(nX||(nX={}));var rX;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(rX||(rX={}));var iX;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(iX||(iX={}));var sX;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(sX||(sX={}));var oX;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(oX||(oX={}));var aX;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(aX||(aX={}));var aC;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(aC||(aC={}));var lX;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(lX||(lX={}));var cX;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(cX||(cX={}));var uX;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(uX||(uX={}));var kD;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(kD||(kD={}));var dX;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(dX||(dX={}));var fX;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(fX||(fX={}));var hX;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(hX||(hX={}));var pX;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(pX||(pX={}));var mX;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(mX||(mX={}));var gX;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(gX||(gX={}));var yX;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(yX||(yX={}));var xX;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(xX||(xX={}));var vX;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(vX||(vX={}));var bX;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(bX||(bX={}));var wX;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(wX||(wX={}));var EX;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(EX||(EX={}));var SX;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(SX||(SX={}));var AX;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(AX||(AX={}));var TX;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(TX||(TX={}));var kX;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(kX||(kX={}));var CX;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(CX||(CX={}));var NX;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(NX||(NX={}));var _X;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(_X||(_X={}));var IX;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(IX||(IX={}));var PX;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(PX||(PX={}));var RX;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(RX||(RX={}));var OX;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(OX||(OX={}));var MX;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(MX||(MX={}));var DX;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(DX||(DX={}));var LX;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(LX||(LX={}));var BX;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(BX||(BX={}));var jX;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(jX||(jX={}));var UX;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(UX||(UX={}));var FX;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(FX||(FX={}));var $X;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})($X||($X={}));var Eg;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Eg||(Eg={}));class CD{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class gb{get text(){var e,n,r,i,s,o,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",u=!1;const f=[];for(const m of(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[g,x]of Object.entries(m))g!=="text"&&g!=="thought"&&g!=="thoughtSignature"&&(x!==null||x!==void 0)&&f.push(g);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;u=!0,c+=m.text}}return f.length>0&&console.warn(`there are non-text parts ${f} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),u?c:void 0}get data(){var e,n,r,i,s,o,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const u=[];for(const f of(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[m,g]of Object.entries(f))m!=="inlineData"&&(g!==null||g!==void 0)&&u.push(m);f.inlineData&&typeof f.inlineData.data=="string"&&(c+=atob(f.inlineData.data))}return u.length>0&&console.warn(`there are non-data parts ${u} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,n,r,i,s,o,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(u=>u.functionCall).map(u=>u.functionCall).filter(u=>u!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var e,n,r,i,s,o,a,l,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const u=(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(f=>f.executableCode).map(f=>f.executableCode).filter(f=>f!==void 0);if((u==null?void 0:u.length)!==0)return(c=u==null?void 0:u[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,n,r,i,s,o,a,l,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const u=(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(f=>f.codeExecutionResult).map(f=>f.codeExecutionResult).filter(f=>f!==void 0);if((u==null?void 0:u.length)!==0)return(c=u==null?void 0:u[0])===null||c===void 0?void 0:c.output}}class zX{}class HX{}class ZZe{}class eet{}class tet{}class net{}class VX{}class qX{}class GX{}class ret{}class lC{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new lC;let i;const s=e;return n?i=$Ze(s):i=FZe(s),Object.assign(r,i),r}}class KX{}class WX{}class YX{}class JX{}class iet{}class set{}class oet{}class uj{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new uj,s=WZe(e);return Object.assign(r,s),r}}class aet{}class cet{}class uet{}class XX{}class det{get text(){var e,n,r;let i="",s=!1;const o=[];for(const a of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[l,c]of Object.entries(a))l!=="text"&&l!=="thought"&&c!==null&&o.push(l);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;s=!0,i+=a.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?i:void 0}get data(){var e,n,r;let i="";const s=[];for(const o of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[a,l]of Object.entries(o))a!=="inlineData"&&l!==null&&s.push(a);o.inlineData&&typeof o.inlineData.data=="string"&&(i+=atob(o.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class fet{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class dj{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new dj,s=Cfe(e);return Object.assign(r,s),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Fn(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Nfe(t,e){const n=Fn(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function _fe(t){return Array.isArray(t)?t.map(e=>cC(e)):[cC(t)]}function cC(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Ife(t){const e=cC(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Pfe(t){const e=cC(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function QX(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function Rfe(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>QX(e)):[QX(t)]}function ND(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function ZX(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function eQ(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Cs(t){if(t==null)throw new Error("ContentUnion is required");return ND(t)?t:{role:"user",parts:Rfe(t)}}function fj(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=Cs(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=Cs(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Cs(n)):[Cs(e)]}function ja(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(ZX(t)||eQ(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Cs(t)]}const e=[],n=[],r=ND(t[0]);for(const i of t){const s=ND(i);if(s!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)e.push(i);else{if(ZX(i)||eQ(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||e.push({role:"user",parts:Rfe(n)}),e}function het(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(Be).includes(n[0].toUpperCase())?n[0].toUpperCase():Be.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(Be).includes(r.toUpperCase())?r.toUpperCase():Be.TYPE_UNSPECIFIED})}}function Kg(t){const e={},n=["items"],r=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const s=t.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(e.nullable=!0,t=s[1]):s[1].type==="null"&&(e.nullable=!0,t=s[0])),t.type instanceof Array&&het(t.type,e);for(const[o,a]of Object.entries(t))if(a!=null)if(o=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(Be).includes(a.toUpperCase())?a.toUpperCase():Be.TYPE_UNSPECIFIED}else if(n.includes(o))e[o]=Kg(a);else if(r.includes(o)){const l=[];for(const c of a){if(c.type=="null"){e.nullable=!0;continue}l.push(Kg(c))}e[o]=l}else if(i.includes(o)){const l={};for(const[c,u]of Object.entries(a))l[c]=Kg(u);e[o]=l}else{if(o==="additionalProperties")continue;e[o]=a}return e}function hj(t){return Kg(t)}function pj(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function mj(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Xx(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Kg(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Kg(e.response));return t}function Qx(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function pet(t,e,n,r=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function Pd(t,e){if(typeof e!="string")throw new Error("name must be a string");return pet(t,e,"cachedContents")}function Ofe(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function xh(t){return cj(t)}function met(t){return t!=null&&typeof t=="object"&&"name"in t}function get(t){return t!=null&&typeof t=="object"&&"video"in t}function yet(t){return t!=null&&typeof t=="object"&&"uri"in t}function Mfe(t){var e;let n;if(met(t)&&(n=t.name),!(yet(t)&&(n=t.uri,n===void 0))&&!(get(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function Dfe(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function Lfe(t){for(const e of["models","tunedModels","publisherModels"])if(xet(t,e))return t[e];return[]}function xet(t,e){return t!==null&&typeof t=="object"&&e in t}function vet(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function bet(t,e={}){const n=[],r=new Set;for(const i of t){const s=i.name;if(r.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);r.add(s);const o=vet(i,e);o.functionDeclarations&&n.push(...o.functionDeclarations)}return{functionDeclarations:n}}function Bfe(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,i=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(i>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function wet(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function jfe(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const i=n.inlinedResponses;if(!Array.isArray(i)||i.length===0)return t;let s=!1;for(const o of i){if(typeof o!="object"||o===null)continue;const l=o.response;if(typeof l!="object"||l===null)continue;if(l.embedding!==void 0){s=!0;break}}return s&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Zx(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function Ufe(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Eet(t){const e={},n=S(t,["responsesFile"]);n!=null&&N(e,["fileName"],n);const r=S(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>rtt(o))),N(e,["inlinedResponses"],s)}const i=S(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),N(e,["inlinedEmbedContentResponses"],s)}return e}function Aet(t){const e={},n=S(t,["predictionsFormat"]);n!=null&&N(e,["format"],n);const r=S(t,["gcsDestination","outputUriPrefix"]);r!=null&&N(e,["gcsUri"],r);const i=S(t,["bigqueryDestination","outputUri"]);return i!=null&&N(e,["bigqueryUri"],i),e}function Tet(t){const e={},n=S(t,["format"]);n!=null&&N(e,["predictionsFormat"],n);const r=S(t,["gcsUri"]);r!=null&&N(e,["gcsDestination","outputUriPrefix"],r);const i=S(t,["bigqueryUri"]);if(i!=null&&N(e,["bigqueryDestination","outputUri"],i),S(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(S(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(S(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function mT(t){const e={},n=S(t,["name"]);n!=null&&N(e,["name"],n);const r=S(t,["metadata","displayName"]);r!=null&&N(e,["displayName"],r);const i=S(t,["metadata","state"]);i!=null&&N(e,["state"],Ufe(i));const s=S(t,["metadata","createTime"]);s!=null&&N(e,["createTime"],s);const o=S(t,["metadata","endTime"]);o!=null&&N(e,["endTime"],o);const a=S(t,["metadata","updateTime"]);a!=null&&N(e,["updateTime"],a);const l=S(t,["metadata","model"]);l!=null&&N(e,["model"],l);const c=S(t,["metadata","output"]);return c!=null&&N(e,["dest"],Eet(jfe(c))),e}function _D(t){const e={},n=S(t,["name"]);n!=null&&N(e,["name"],n);const r=S(t,["displayName"]);r!=null&&N(e,["displayName"],r);const i=S(t,["state"]);i!=null&&N(e,["state"],Ufe(i));const s=S(t,["error"]);s!=null&&N(e,["error"],s);const o=S(t,["createTime"]);o!=null&&N(e,["createTime"],o);const a=S(t,["startTime"]);a!=null&&N(e,["startTime"],a);const l=S(t,["endTime"]);l!=null&&N(e,["endTime"],l);const c=S(t,["updateTime"]);c!=null&&N(e,["updateTime"],c);const u=S(t,["model"]);u!=null&&N(e,["model"],u);const f=S(t,["inputConfig"]);f!=null&&N(e,["src"],ket(f));const m=S(t,["outputConfig"]);m!=null&&N(e,["dest"],Aet(jfe(m)));const g=S(t,["completionStats"]);return g!=null&&N(e,["completionStats"],g),e}function ket(t){const e={},n=S(t,["instancesFormat"]);n!=null&&N(e,["format"],n);const r=S(t,["gcsSource","uris"]);r!=null&&N(e,["gcsUri"],r);const i=S(t,["bigquerySource","inputUri"]);return i!=null&&N(e,["bigqueryUri"],i),e}function Cet(t,e){const n={};if(S(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(S(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(S(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=S(e,["fileName"]);r!=null&&N(n,["fileName"],r);const i=S(e,["inlinedRequests"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>ntt(t,o))),N(n,["requests","requests"],s)}return n}function Net(t){const e={},n=S(t,["format"]);n!=null&&N(e,["instancesFormat"],n);const r=S(t,["gcsUri"]);r!=null&&N(e,["gcsSource","uris"],r);const i=S(t,["bigqueryUri"]);if(i!=null&&N(e,["bigquerySource","inputUri"],i),S(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(S(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function _et(t){const e={},n=S(t,["data"]);if(n!=null&&N(e,["data"],n),S(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=S(t,["mimeType"]);return r!=null&&N(e,["mimeType"],r),e}function Iet(t,e){const n={},r=S(e,["name"]);return r!=null&&N(n,["_url","name"],Zx(t,r)),n}function Pet(t,e){const n={},r=S(e,["name"]);return r!=null&&N(n,["_url","name"],Zx(t,r)),n}function Ret(t){const e={},n=S(t,["content"]);n!=null&&N(e,["content"],n);const r=S(t,["citationMetadata"]);r!=null&&N(e,["citationMetadata"],Oet(r));const i=S(t,["tokenCount"]);i!=null&&N(e,["tokenCount"],i);const s=S(t,["finishReason"]);s!=null&&N(e,["finishReason"],s);const o=S(t,["avgLogprobs"]);o!=null&&N(e,["avgLogprobs"],o);const a=S(t,["groundingMetadata"]);a!=null&&N(e,["groundingMetadata"],a);const l=S(t,["index"]);l!=null&&N(e,["index"],l);const c=S(t,["logprobsResult"]);c!=null&&N(e,["logprobsResult"],c);const u=S(t,["safetyRatings"]);if(u!=null){let m=u;Array.isArray(m)&&(m=m.map(g=>g)),N(e,["safetyRatings"],m)}const f=S(t,["urlContextMetadata"]);return f!=null&&N(e,["urlContextMetadata"],f),e}function Oet(t){const e={},n=S(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),N(e,["citations"],r)}return e}function Ffe(t){const e={},n=S(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>utt(s))),N(e,["parts"],i)}const r=S(t,["role"]);return r!=null&&N(e,["role"],r),e}function Met(t,e){const n={},r=S(t,["displayName"]);if(e!==void 0&&r!=null&&N(e,["batch","displayName"],r),S(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function Det(t,e){const n={},r=S(t,["displayName"]);e!==void 0&&r!=null&&N(e,["displayName"],r);const i=S(t,["dest"]);return e!==void 0&&i!=null&&N(e,["outputConfig"],Tet(wet(i))),n}function tQ(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["_url","model"],Fn(t,r));const i=S(e,["src"]);i!=null&&N(n,["batch","inputConfig"],Cet(t,Bfe(t,i)));const s=S(e,["config"]);return s!=null&&Met(s,n),n}function Let(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["model"],Fn(t,r));const i=S(e,["src"]);i!=null&&N(n,["inputConfig"],Net(Bfe(t,i)));const s=S(e,["config"]);return s!=null&&Det(s,n),n}function Bet(t,e){const n={},r=S(t,["displayName"]);return e!==void 0&&r!=null&&N(e,["batch","displayName"],r),n}function jet(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["_url","model"],Fn(t,r));const i=S(e,["src"]);i!=null&&N(n,["batch","inputConfig"],qet(t,i));const s=S(e,["config"]);return s!=null&&Bet(s,n),n}function Uet(t,e){const n={},r=S(e,["name"]);return r!=null&&N(n,["_url","name"],Zx(t,r)),n}function Fet(t,e){const n={},r=S(e,["name"]);return r!=null&&N(n,["_url","name"],Zx(t,r)),n}function $et(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["name"]);r!=null&&N(e,["name"],r);const i=S(t,["done"]);i!=null&&N(e,["done"],i);const s=S(t,["error"]);return s!=null&&N(e,["error"],s),e}function zet(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["name"]);r!=null&&N(e,["name"],r);const i=S(t,["done"]);i!=null&&N(e,["done"],i);const s=S(t,["error"]);return s!=null&&N(e,["error"],s),e}function Het(t,e){const n={},r=S(e,["contents"]);if(r!=null){let s=fj(t,r);Array.isArray(s)&&(s=s.map(o=>o)),N(n,["requests[]","request","content"],s)}const i=S(e,["config"]);return i!=null&&(N(n,["_self"],Vet(i,n)),jZe(n,{"requests[].*":"requests[].request.*"})),n}function Vet(t,e){const n={},r=S(t,["taskType"]);e!==void 0&&r!=null&&N(e,["requests[]","taskType"],r);const i=S(t,["title"]);e!==void 0&&i!=null&&N(e,["requests[]","title"],i);const s=S(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&N(e,["requests[]","outputDimensionality"],s),S(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(S(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function qet(t,e){const n={},r=S(e,["fileName"]);r!=null&&N(n,["file_name"],r);const i=S(e,["inlinedRequests"]);return i!=null&&N(n,["requests"],Het(t,i)),n}function Get(t){const e={};if(S(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=S(t,["fileUri"]);n!=null&&N(e,["fileUri"],n);const r=S(t,["mimeType"]);return r!=null&&N(e,["mimeType"],r),e}function Ket(t){const e={},n=S(t,["id"]);n!=null&&N(e,["id"],n);const r=S(t,["args"]);r!=null&&N(e,["args"],r);const i=S(t,["name"]);if(i!=null&&N(e,["name"],i),S(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(S(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Wet(t){const e={},n=S(t,["mode"]);n!=null&&N(e,["mode"],n);const r=S(t,["allowedFunctionNames"]);if(r!=null&&N(e,["allowedFunctionNames"],r),S(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Yet(t,e,n){const r={},i=S(e,["systemInstruction"]);n!==void 0&&i!=null&&N(n,["systemInstruction"],Ffe(Cs(i)));const s=S(e,["temperature"]);s!=null&&N(r,["temperature"],s);const o=S(e,["topP"]);o!=null&&N(r,["topP"],o);const a=S(e,["topK"]);a!=null&&N(r,["topK"],a);const l=S(e,["candidateCount"]);l!=null&&N(r,["candidateCount"],l);const c=S(e,["maxOutputTokens"]);c!=null&&N(r,["maxOutputTokens"],c);const u=S(e,["stopSequences"]);u!=null&&N(r,["stopSequences"],u);const f=S(e,["responseLogprobs"]);f!=null&&N(r,["responseLogprobs"],f);const m=S(e,["logprobs"]);m!=null&&N(r,["logprobs"],m);const g=S(e,["presencePenalty"]);g!=null&&N(r,["presencePenalty"],g);const x=S(e,["frequencyPenalty"]);x!=null&&N(r,["frequencyPenalty"],x);const v=S(e,["seed"]);v!=null&&N(r,["seed"],v);const w=S(e,["responseMimeType"]);w!=null&&N(r,["responseMimeType"],w);const E=S(e,["responseSchema"]);E!=null&&N(r,["responseSchema"],hj(E));const C=S(e,["responseJsonSchema"]);if(C!=null&&N(r,["responseJsonSchema"],C),S(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(S(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const k=S(e,["safetySettings"]);if(n!==void 0&&k!=null){let B=k;Array.isArray(B)&&(B=B.map(A=>dtt(A))),N(n,["safetySettings"],B)}const O=S(e,["tools"]);if(n!==void 0&&O!=null){let B=Qx(O);Array.isArray(B)&&(B=B.map(A=>htt(Xx(A)))),N(n,["tools"],B)}const j=S(e,["toolConfig"]);if(n!==void 0&&j!=null&&N(n,["toolConfig"],ftt(j)),S(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const R=S(e,["cachedContent"]);n!==void 0&&R!=null&&N(n,["cachedContent"],Pd(t,R));const U=S(e,["responseModalities"]);U!=null&&N(r,["responseModalities"],U);const V=S(e,["mediaResolution"]);V!=null&&N(r,["mediaResolution"],V);const F=S(e,["speechConfig"]);if(F!=null&&N(r,["speechConfig"],pj(F)),S(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const $=S(e,["thinkingConfig"]);$!=null&&N(r,["thinkingConfig"],$);const K=S(e,["imageConfig"]);K!=null&&N(r,["imageConfig"],ttt(K));const H=S(e,["enableEnhancedCivicAnswers"]);return H!=null&&N(r,["enableEnhancedCivicAnswers"],H),r}function Jet(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>Ret(c))),N(e,["candidates"],l)}const i=S(t,["modelVersion"]);i!=null&&N(e,["modelVersion"],i);const s=S(t,["promptFeedback"]);s!=null&&N(e,["promptFeedback"],s);const o=S(t,["responseId"]);o!=null&&N(e,["responseId"],o);const a=S(t,["usageMetadata"]);return a!=null&&N(e,["usageMetadata"],a),e}function Xet(t,e){const n={},r=S(e,["name"]);return r!=null&&N(n,["_url","name"],Zx(t,r)),n}function Qet(t,e){const n={},r=S(e,["name"]);return r!=null&&N(n,["_url","name"],Zx(t,r)),n}function Zet(t){const e={};if(S(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=S(t,["enableWidget"]);return n!=null&&N(e,["enableWidget"],n),e}function ett(t){const e={};if(S(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(S(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=S(t,["timeRangeFilter"]);return n!=null&&N(e,["timeRangeFilter"],n),e}function ttt(t){const e={},n=S(t,["aspectRatio"]);n!=null&&N(e,["aspectRatio"],n);const r=S(t,["imageSize"]);if(r!=null&&N(e,["imageSize"],r),S(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(S(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function ntt(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["request","model"],Fn(t,r));const i=S(e,["contents"]);if(i!=null){let a=ja(i);Array.isArray(a)&&(a=a.map(l=>Ffe(l))),N(n,["request","contents"],a)}const s=S(e,["metadata"]);s!=null&&N(n,["metadata"],s);const o=S(e,["config"]);return o!=null&&N(n,["request","generationConfig"],Yet(t,o,S(n,["request"],{}))),n}function rtt(t){const e={},n=S(t,["response"]);n!=null&&N(e,["response"],Jet(n));const r=S(t,["error"]);return r!=null&&N(e,["error"],r),e}function itt(t,e){const n={},r=S(t,["pageSize"]);e!==void 0&&r!=null&&N(e,["_query","pageSize"],r);const i=S(t,["pageToken"]);if(e!==void 0&&i!=null&&N(e,["_query","pageToken"],i),S(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function stt(t,e){const n={},r=S(t,["pageSize"]);e!==void 0&&r!=null&&N(e,["_query","pageSize"],r);const i=S(t,["pageToken"]);e!==void 0&&i!=null&&N(e,["_query","pageToken"],i);const s=S(t,["filter"]);return e!==void 0&&s!=null&&N(e,["_query","filter"],s),n}function ott(t){const e={},n=S(t,["config"]);return n!=null&&itt(n,e),e}function att(t){const e={},n=S(t,["config"]);return n!=null&&stt(n,e),e}function ltt(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["nextPageToken"]);r!=null&&N(e,["nextPageToken"],r);const i=S(t,["operations"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>mT(o))),N(e,["batchJobs"],s)}return e}function ctt(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["nextPageToken"]);r!=null&&N(e,["nextPageToken"],r);const i=S(t,["batchPredictionJobs"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>_D(o))),N(e,["batchJobs"],s)}return e}function utt(t){const e={},n=S(t,["mediaResolution"]);n!=null&&N(e,["mediaResolution"],n);const r=S(t,["codeExecutionResult"]);r!=null&&N(e,["codeExecutionResult"],r);const i=S(t,["executableCode"]);i!=null&&N(e,["executableCode"],i);const s=S(t,["fileData"]);s!=null&&N(e,["fileData"],Get(s));const o=S(t,["functionCall"]);o!=null&&N(e,["functionCall"],Ket(o));const a=S(t,["functionResponse"]);a!=null&&N(e,["functionResponse"],a);const l=S(t,["inlineData"]);l!=null&&N(e,["inlineData"],_et(l));const c=S(t,["text"]);c!=null&&N(e,["text"],c);const u=S(t,["thought"]);u!=null&&N(e,["thought"],u);const f=S(t,["thoughtSignature"]);f!=null&&N(e,["thoughtSignature"],f);const m=S(t,["videoMetadata"]);return m!=null&&N(e,["videoMetadata"],m),e}function dtt(t){const e={},n=S(t,["category"]);if(n!=null&&N(e,["category"],n),S(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=S(t,["threshold"]);return r!=null&&N(e,["threshold"],r),e}function ftt(t){const e={},n=S(t,["functionCallingConfig"]);n!=null&&N(e,["functionCallingConfig"],Wet(n));const r=S(t,["retrievalConfig"]);return r!=null&&N(e,["retrievalConfig"],r),e}function htt(t){const e={},n=S(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(f=>f)),N(e,["functionDeclarations"],u)}if(S(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=S(t,["googleSearchRetrieval"]);r!=null&&N(e,["googleSearchRetrieval"],r);const i=S(t,["computerUse"]);i!=null&&N(e,["computerUse"],i);const s=S(t,["fileSearch"]);s!=null&&N(e,["fileSearch"],s);const o=S(t,["codeExecution"]);if(o!=null&&N(e,["codeExecution"],o),S(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=S(t,["googleMaps"]);a!=null&&N(e,["googleMaps"],Zet(a));const l=S(t,["googleSearch"]);l!=null&&N(e,["googleSearch"],ett(l));const c=S(t,["urlContext"]);return c!=null&&N(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var yd;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(yd||(yd={}));class Lm{constructor(e,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,i)}init(e,n,r){var i,s;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let o={config:{}};!r||Object.keys(r).length===0?o={config:{}}:typeof r=="object"?o=Object.assign({},r):o=r,o.config&&(o.config.pageToken=n.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(s=(i=o.config)===null||i===void 0?void 0:i.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ptt extends Id{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Lm(yd.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=tQ(this.apiClient,e),r=n._url,i=yt("{model}:batchGenerateContent",r),a=n.batch.inputConfig.requests,l=a.requests,c=[];for(const u of l){const f=Object.assign({},u);if(f.systemInstruction){const m=f.systemInstruction;delete f.systemInstruction;const g=f.request;g.systemInstruction=m,f.request=g}c.push(f)}return a.requests=c,delete n.config,delete n._url,delete n._query,{path:i,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},i=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${i}`),r.dest===void 0){const s=this.getGcsUri(e),o=this.getBigqueryUri(e);if(s)s.endsWith(".jsonl")?r.dest=`${s.slice(0,-6)}/dest`:r.dest=`${s}_dest_${i}`;else if(o)r.dest=`${o}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Let(this.apiClient,e);return a=yt("batchPredictionJobs",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>_D(u))}else{const c=tQ(this.apiClient,e);return a=yt("{model}:batchGenerateContent",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>mT(u))}}async createEmbeddingsInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=jet(this.apiClient,e);return s=yt("{model}:asyncBatchEmbedContent",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>mT(l))}}async get(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Qet(this.apiClient,e);return a=yt("batchPredictionJobs/{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>_D(u))}else{const c=Xet(this.apiClient,e);return a=yt("batches/{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>mT(u))}}async cancel(e){var n,r,i,s;let o="",a={};if(this.apiClient.isVertexAI()){const l=Pet(this.apiClient,e);o=yt("batchPredictionJobs/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const l=Iet(this.apiClient,e);o=yt("batches/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=att(e);return a=yt("batchPredictionJobs",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const f=ctt(u),m=new XX;return Object.assign(m,f),m})}else{const c=ott(e);return a=yt("batches",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const f=ltt(u),m=new XX;return Object.assign(m,f),m})}}async delete(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Fet(this.apiClient,e);return a=yt("batchPredictionJobs/{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>zet(u))}else{const c=Uet(this.apiClient,e);return a=yt("batches/{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>$et(u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mtt(t){const e={},n=S(t,["data"]);if(n!=null&&N(e,["data"],n),S(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=S(t,["mimeType"]);return r!=null&&N(e,["mimeType"],r),e}function nQ(t){const e={},n=S(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>jtt(s))),N(e,["parts"],i)}const r=S(t,["role"]);return r!=null&&N(e,["role"],r),e}function gtt(t,e){const n={},r=S(t,["ttl"]);e!==void 0&&r!=null&&N(e,["ttl"],r);const i=S(t,["expireTime"]);e!==void 0&&i!=null&&N(e,["expireTime"],i);const s=S(t,["displayName"]);e!==void 0&&s!=null&&N(e,["displayName"],s);const o=S(t,["contents"]);if(e!==void 0&&o!=null){let u=ja(o);Array.isArray(u)&&(u=u.map(f=>nQ(f))),N(e,["contents"],u)}const a=S(t,["systemInstruction"]);e!==void 0&&a!=null&&N(e,["systemInstruction"],nQ(Cs(a)));const l=S(t,["tools"]);if(e!==void 0&&l!=null){let u=l;Array.isArray(u)&&(u=u.map(f=>Ftt(f))),N(e,["tools"],u)}const c=S(t,["toolConfig"]);if(e!==void 0&&c!=null&&N(e,["toolConfig"],Utt(c)),S(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function ytt(t,e){const n={},r=S(t,["ttl"]);e!==void 0&&r!=null&&N(e,["ttl"],r);const i=S(t,["expireTime"]);e!==void 0&&i!=null&&N(e,["expireTime"],i);const s=S(t,["displayName"]);e!==void 0&&s!=null&&N(e,["displayName"],s);const o=S(t,["contents"]);if(e!==void 0&&o!=null){let f=ja(o);Array.isArray(f)&&(f=f.map(m=>m)),N(e,["contents"],f)}const a=S(t,["systemInstruction"]);e!==void 0&&a!=null&&N(e,["systemInstruction"],Cs(a));const l=S(t,["tools"]);if(e!==void 0&&l!=null){let f=l;Array.isArray(f)&&(f=f.map(m=>$tt(m))),N(e,["tools"],f)}const c=S(t,["toolConfig"]);e!==void 0&&c!=null&&N(e,["toolConfig"],c);const u=S(t,["kmsKeyName"]);return e!==void 0&&u!=null&&N(e,["encryption_spec","kmsKeyName"],u),n}function xtt(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["model"],Nfe(t,r));const i=S(e,["config"]);return i!=null&&gtt(i,n),n}function vtt(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["model"],Nfe(t,r));const i=S(e,["config"]);return i!=null&&ytt(i,n),n}function btt(t,e){const n={},r=S(e,["name"]);return r!=null&&N(n,["_url","name"],Pd(t,r)),n}function wtt(t,e){const n={},r=S(e,["name"]);return r!=null&&N(n,["_url","name"],Pd(t,r)),n}function Ett(t){const e={},n=S(t,["sdkHttpResponse"]);return n!=null&&N(e,["sdkHttpResponse"],n),e}function Stt(t){const e={},n=S(t,["sdkHttpResponse"]);return n!=null&&N(e,["sdkHttpResponse"],n),e}function Att(t){const e={};if(S(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=S(t,["fileUri"]);n!=null&&N(e,["fileUri"],n);const r=S(t,["mimeType"]);return r!=null&&N(e,["mimeType"],r),e}function Ttt(t){const e={},n=S(t,["id"]);n!=null&&N(e,["id"],n);const r=S(t,["args"]);r!=null&&N(e,["args"],r);const i=S(t,["name"]);if(i!=null&&N(e,["name"],i),S(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(S(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function ktt(t){const e={},n=S(t,["mode"]);n!=null&&N(e,["mode"],n);const r=S(t,["allowedFunctionNames"]);if(r!=null&&N(e,["allowedFunctionNames"],r),S(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Ctt(t){const e={};if(S(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=S(t,["description"]);n!=null&&N(e,["description"],n);const r=S(t,["name"]);r!=null&&N(e,["name"],r);const i=S(t,["parameters"]);i!=null&&N(e,["parameters"],i);const s=S(t,["parametersJsonSchema"]);s!=null&&N(e,["parametersJsonSchema"],s);const o=S(t,["response"]);o!=null&&N(e,["response"],o);const a=S(t,["responseJsonSchema"]);return a!=null&&N(e,["responseJsonSchema"],a),e}function Ntt(t,e){const n={},r=S(e,["name"]);return r!=null&&N(n,["_url","name"],Pd(t,r)),n}function _tt(t,e){const n={},r=S(e,["name"]);return r!=null&&N(n,["_url","name"],Pd(t,r)),n}function Itt(t){const e={};if(S(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=S(t,["enableWidget"]);return n!=null&&N(e,["enableWidget"],n),e}function Ptt(t){const e={};if(S(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(S(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=S(t,["timeRangeFilter"]);return n!=null&&N(e,["timeRangeFilter"],n),e}function Rtt(t,e){const n={},r=S(t,["pageSize"]);e!==void 0&&r!=null&&N(e,["_query","pageSize"],r);const i=S(t,["pageToken"]);return e!==void 0&&i!=null&&N(e,["_query","pageToken"],i),n}function Ott(t,e){const n={},r=S(t,["pageSize"]);e!==void 0&&r!=null&&N(e,["_query","pageSize"],r);const i=S(t,["pageToken"]);return e!==void 0&&i!=null&&N(e,["_query","pageToken"],i),n}function Mtt(t){const e={},n=S(t,["config"]);return n!=null&&Rtt(n,e),e}function Dtt(t){const e={},n=S(t,["config"]);return n!=null&&Ott(n,e),e}function Ltt(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["nextPageToken"]);r!=null&&N(e,["nextPageToken"],r);const i=S(t,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),N(e,["cachedContents"],s)}return e}function Btt(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["nextPageToken"]);r!=null&&N(e,["nextPageToken"],r);const i=S(t,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),N(e,["cachedContents"],s)}return e}function jtt(t){const e={},n=S(t,["mediaResolution"]);n!=null&&N(e,["mediaResolution"],n);const r=S(t,["codeExecutionResult"]);r!=null&&N(e,["codeExecutionResult"],r);const i=S(t,["executableCode"]);i!=null&&N(e,["executableCode"],i);const s=S(t,["fileData"]);s!=null&&N(e,["fileData"],Att(s));const o=S(t,["functionCall"]);o!=null&&N(e,["functionCall"],Ttt(o));const a=S(t,["functionResponse"]);a!=null&&N(e,["functionResponse"],a);const l=S(t,["inlineData"]);l!=null&&N(e,["inlineData"],mtt(l));const c=S(t,["text"]);c!=null&&N(e,["text"],c);const u=S(t,["thought"]);u!=null&&N(e,["thought"],u);const f=S(t,["thoughtSignature"]);f!=null&&N(e,["thoughtSignature"],f);const m=S(t,["videoMetadata"]);return m!=null&&N(e,["videoMetadata"],m),e}function Utt(t){const e={},n=S(t,["functionCallingConfig"]);n!=null&&N(e,["functionCallingConfig"],ktt(n));const r=S(t,["retrievalConfig"]);return r!=null&&N(e,["retrievalConfig"],r),e}function Ftt(t){const e={},n=S(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(f=>f)),N(e,["functionDeclarations"],u)}if(S(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=S(t,["googleSearchRetrieval"]);r!=null&&N(e,["googleSearchRetrieval"],r);const i=S(t,["computerUse"]);i!=null&&N(e,["computerUse"],i);const s=S(t,["fileSearch"]);s!=null&&N(e,["fileSearch"],s);const o=S(t,["codeExecution"]);if(o!=null&&N(e,["codeExecution"],o),S(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=S(t,["googleMaps"]);a!=null&&N(e,["googleMaps"],Itt(a));const l=S(t,["googleSearch"]);l!=null&&N(e,["googleSearch"],Ptt(l));const c=S(t,["urlContext"]);return c!=null&&N(e,["urlContext"],c),e}function $tt(t){const e={},n=S(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(m=>Ctt(m))),N(e,["functionDeclarations"],f)}const r=S(t,["retrieval"]);r!=null&&N(e,["retrieval"],r);const i=S(t,["googleSearchRetrieval"]);i!=null&&N(e,["googleSearchRetrieval"],i);const s=S(t,["computerUse"]);if(s!=null&&N(e,["computerUse"],s),S(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=S(t,["codeExecution"]);o!=null&&N(e,["codeExecution"],o);const a=S(t,["enterpriseWebSearch"]);a!=null&&N(e,["enterpriseWebSearch"],a);const l=S(t,["googleMaps"]);l!=null&&N(e,["googleMaps"],l);const c=S(t,["googleSearch"]);c!=null&&N(e,["googleSearch"],c);const u=S(t,["urlContext"]);return u!=null&&N(e,["urlContext"],u),e}function ztt(t,e){const n={},r=S(t,["ttl"]);e!==void 0&&r!=null&&N(e,["ttl"],r);const i=S(t,["expireTime"]);return e!==void 0&&i!=null&&N(e,["expireTime"],i),n}function Htt(t,e){const n={},r=S(t,["ttl"]);e!==void 0&&r!=null&&N(e,["ttl"],r);const i=S(t,["expireTime"]);return e!==void 0&&i!=null&&N(e,["expireTime"],i),n}function Vtt(t,e){const n={},r=S(e,["name"]);r!=null&&N(n,["_url","name"],Pd(t,r));const i=S(e,["config"]);return i!=null&&ztt(i,n),n}function qtt(t,e){const n={},r=S(e,["name"]);r!=null&&N(n,["_url","name"],Pd(t,r));const i=S(e,["config"]);return i!=null&&Htt(i,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Gtt extends Id{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Lm(yd.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=vtt(this.apiClient,e);return a=yt("cachedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>u)}else{const c=xtt(this.apiClient,e);return a=yt("cachedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>u)}}async get(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=_tt(this.apiClient,e);return a=yt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>u)}else{const c=Ntt(this.apiClient,e);return a=yt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>u)}}async delete(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=wtt(this.apiClient,e);return a=yt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const f=Stt(u),m=new YX;return Object.assign(m,f),m})}else{const c=btt(this.apiClient,e);return a=yt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const f=Ett(u),m=new YX;return Object.assign(m,f),m})}}async update(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=qtt(this.apiClient,e);return a=yt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>u)}else{const c=Vtt(this.apiClient,e);return a=yt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>u)}}async listInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Dtt(e);return a=yt("cachedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const f=Btt(u),m=new JX;return Object.assign(m,f),m})}else{const c=Mtt(e);return a=yt("cachedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const f=Ltt(u),m=new JX;return Object.assign(m,f),m})}}}function uC(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function rQ(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function tn(t){return this instanceof tn?(this.v=t,this):new tn(t)}function El(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(g){return function(x){return Promise.resolve(x).then(g,f)}}function a(g,x){r[g]&&(i[g]=function(v){return new Promise(function(w,E){s.push([g,v,w,E])>1||l(g,v)})},x&&(i[g]=x(i[g])))}function l(g,x){try{c(r[g](x))}catch(v){m(s[0][3],v)}}function c(g){g.value instanceof tn?Promise.resolve(g.value.v).then(u,f):m(s[0][2],g)}function u(g){l("next",g)}function f(g){l("throw",g)}function m(g,x){g(x),s.shift(),s.length&&l(s[0][0],s[0][1])}}function Sl(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof rQ=="function"?rQ(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,l){o=t[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ktt(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:$fe(n)}function $fe(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Wtt(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function iQ(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const i=[];let s=!0;for(;r<n&&t[r].role==="model";)i.push(t[r]),s&&!$fe(t[r])&&(s=!1),r++;s?e.push(...i):e.pop()}return e}class Ytt{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new Jtt(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Jtt{constructor(e,n,r,i={},s=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=i,this.history=s,this.sendPromise=Promise.resolve(),Wtt(s)}async sendMessage(e){var n;await this.sendPromise;const r=Cs(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var s,o,a;const l=await i,c=(o=(s=l.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content,u=l.automaticFunctionCallingHistory,f=this.getHistory(!0).length;let m=[];u!=null&&(m=(a=u.slice(f))!==null&&a!==void 0?a:[]);const g=c?[c]:[];this.recordHistory(r,g,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;const r=Cs(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const s=await i;return this.processStreamResponse(s,r)}getHistory(e=!1){const n=e?iQ(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return El(this,arguments,function*(){var i,s,o,a,l,c;const u=[];try{for(var f=!0,m=Sl(e),g;g=yield tn(m.next()),i=g.done,!i;f=!0){a=g.value,f=!1;const x=a;if(Ktt(x)){const v=(c=(l=x.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content;v!==void 0&&u.push(v)}yield yield tn(x)}}catch(x){s={error:x}}finally{try{!f&&!i&&(o=m.return)&&(yield tn(o.call(m)))}finally{if(s)throw s.error}}this.recordHistory(n,u)})}recordHistory(e,n,r){let i=[];n.length>0&&n.every(s=>s.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...iQ(r)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class EN extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,EN.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xtt(t){const e={},n=S(t,["file"]);return n!=null&&N(e,["file"],n),e}function Qtt(t){const e={},n=S(t,["sdkHttpResponse"]);return n!=null&&N(e,["sdkHttpResponse"],n),e}function Ztt(t){const e={},n=S(t,["name"]);return n!=null&&N(e,["_url","file"],Mfe(n)),e}function ent(t){const e={},n=S(t,["sdkHttpResponse"]);return n!=null&&N(e,["sdkHttpResponse"],n),e}function tnt(t){const e={},n=S(t,["name"]);return n!=null&&N(e,["_url","file"],Mfe(n)),e}function nnt(t,e){const n={},r=S(t,["pageSize"]);e!==void 0&&r!=null&&N(e,["_query","pageSize"],r);const i=S(t,["pageToken"]);return e!==void 0&&i!=null&&N(e,["_query","pageToken"],i),n}function rnt(t){const e={},n=S(t,["config"]);return n!=null&&nnt(n,e),e}function int(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["nextPageToken"]);r!=null&&N(e,["nextPageToken"],r);const i=S(t,["files"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),N(e,["files"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class snt extends Id{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Lm(yd.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=rnt(e);return s=yt("files",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),i.then(l=>{const c=int(l),u=new aet;return Object.assign(u,c),u})}}async createInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Xtt(e);return s=yt("upload/v1beta/files",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=Qtt(l),u=new cet;return Object.assign(u,c),u})}}async get(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=tnt(e);return s=yt("files/{file}",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Ztt(e);return s=yt("files/{file}",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),i.then(l=>{const c=ent(l),u=new uet;return Object.assign(u,c),u})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gT(t){const e={},n=S(t,["data"]);if(n!=null&&N(e,["data"],n),S(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=S(t,["mimeType"]);return r!=null&&N(e,["mimeType"],r),e}function ont(t){const e={},n=S(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>Ent(s))),N(e,["parts"],i)}const r=S(t,["role"]);return r!=null&&N(e,["role"],r),e}function ant(t){const e={};if(S(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=S(t,["fileUri"]);n!=null&&N(e,["fileUri"],n);const r=S(t,["mimeType"]);return r!=null&&N(e,["mimeType"],r),e}function lnt(t){const e={},n=S(t,["id"]);n!=null&&N(e,["id"],n);const r=S(t,["args"]);r!=null&&N(e,["args"],r);const i=S(t,["name"]);if(i!=null&&N(e,["name"],i),S(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(S(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function cnt(t){const e={};if(S(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=S(t,["description"]);n!=null&&N(e,["description"],n);const r=S(t,["name"]);r!=null&&N(e,["name"],r);const i=S(t,["parameters"]);i!=null&&N(e,["parameters"],i);const s=S(t,["parametersJsonSchema"]);s!=null&&N(e,["parametersJsonSchema"],s);const o=S(t,["response"]);o!=null&&N(e,["response"],o);const a=S(t,["responseJsonSchema"]);return a!=null&&N(e,["responseJsonSchema"],a),e}function unt(t){const e={},n=S(t,["modelSelectionConfig"]);n!=null&&N(e,["modelConfig"],n);const r=S(t,["responseJsonSchema"]);r!=null&&N(e,["responseJsonSchema"],r);const i=S(t,["audioTimestamp"]);i!=null&&N(e,["audioTimestamp"],i);const s=S(t,["candidateCount"]);s!=null&&N(e,["candidateCount"],s);const o=S(t,["enableAffectiveDialog"]);o!=null&&N(e,["enableAffectiveDialog"],o);const a=S(t,["frequencyPenalty"]);a!=null&&N(e,["frequencyPenalty"],a);const l=S(t,["logprobs"]);l!=null&&N(e,["logprobs"],l);const c=S(t,["maxOutputTokens"]);c!=null&&N(e,["maxOutputTokens"],c);const u=S(t,["mediaResolution"]);u!=null&&N(e,["mediaResolution"],u);const f=S(t,["presencePenalty"]);f!=null&&N(e,["presencePenalty"],f);const m=S(t,["responseLogprobs"]);m!=null&&N(e,["responseLogprobs"],m);const g=S(t,["responseMimeType"]);g!=null&&N(e,["responseMimeType"],g);const x=S(t,["responseModalities"]);x!=null&&N(e,["responseModalities"],x);const v=S(t,["responseSchema"]);v!=null&&N(e,["responseSchema"],v);const w=S(t,["routingConfig"]);w!=null&&N(e,["routingConfig"],w);const E=S(t,["seed"]);E!=null&&N(e,["seed"],E);const C=S(t,["speechConfig"]);C!=null&&N(e,["speechConfig"],C);const k=S(t,["stopSequences"]);k!=null&&N(e,["stopSequences"],k);const O=S(t,["temperature"]);O!=null&&N(e,["temperature"],O);const j=S(t,["thinkingConfig"]);j!=null&&N(e,["thinkingConfig"],j);const R=S(t,["topK"]);R!=null&&N(e,["topK"],R);const U=S(t,["topP"]);if(U!=null&&N(e,["topP"],U),S(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function dnt(t){const e={};if(S(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=S(t,["enableWidget"]);return n!=null&&N(e,["enableWidget"],n),e}function fnt(t){const e={};if(S(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(S(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=S(t,["timeRangeFilter"]);return n!=null&&N(e,["timeRangeFilter"],n),e}function hnt(t,e){const n={},r=S(t,["generationConfig"]);e!==void 0&&r!=null&&N(e,["setup","generationConfig"],r);const i=S(t,["responseModalities"]);e!==void 0&&i!=null&&N(e,["setup","generationConfig","responseModalities"],i);const s=S(t,["temperature"]);e!==void 0&&s!=null&&N(e,["setup","generationConfig","temperature"],s);const o=S(t,["topP"]);e!==void 0&&o!=null&&N(e,["setup","generationConfig","topP"],o);const a=S(t,["topK"]);e!==void 0&&a!=null&&N(e,["setup","generationConfig","topK"],a);const l=S(t,["maxOutputTokens"]);e!==void 0&&l!=null&&N(e,["setup","generationConfig","maxOutputTokens"],l);const c=S(t,["mediaResolution"]);e!==void 0&&c!=null&&N(e,["setup","generationConfig","mediaResolution"],c);const u=S(t,["seed"]);e!==void 0&&u!=null&&N(e,["setup","generationConfig","seed"],u);const f=S(t,["speechConfig"]);e!==void 0&&f!=null&&N(e,["setup","generationConfig","speechConfig"],mj(f));const m=S(t,["thinkingConfig"]);e!==void 0&&m!=null&&N(e,["setup","generationConfig","thinkingConfig"],m);const g=S(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&N(e,["setup","generationConfig","enableAffectiveDialog"],g);const x=S(t,["systemInstruction"]);e!==void 0&&x!=null&&N(e,["setup","systemInstruction"],ont(Cs(x)));const v=S(t,["tools"]);if(e!==void 0&&v!=null){let R=Qx(v);Array.isArray(R)&&(R=R.map(U=>Ant(Xx(U)))),N(e,["setup","tools"],R)}const w=S(t,["sessionResumption"]);e!==void 0&&w!=null&&N(e,["setup","sessionResumption"],Snt(w));const E=S(t,["inputAudioTranscription"]);e!==void 0&&E!=null&&N(e,["setup","inputAudioTranscription"],E);const C=S(t,["outputAudioTranscription"]);e!==void 0&&C!=null&&N(e,["setup","outputAudioTranscription"],C);const k=S(t,["realtimeInputConfig"]);e!==void 0&&k!=null&&N(e,["setup","realtimeInputConfig"],k);const O=S(t,["contextWindowCompression"]);e!==void 0&&O!=null&&N(e,["setup","contextWindowCompression"],O);const j=S(t,["proactivity"]);if(e!==void 0&&j!=null&&N(e,["setup","proactivity"],j),S(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function pnt(t,e){const n={},r=S(t,["generationConfig"]);e!==void 0&&r!=null&&N(e,["setup","generationConfig"],unt(r));const i=S(t,["responseModalities"]);e!==void 0&&i!=null&&N(e,["setup","generationConfig","responseModalities"],i);const s=S(t,["temperature"]);e!==void 0&&s!=null&&N(e,["setup","generationConfig","temperature"],s);const o=S(t,["topP"]);e!==void 0&&o!=null&&N(e,["setup","generationConfig","topP"],o);const a=S(t,["topK"]);e!==void 0&&a!=null&&N(e,["setup","generationConfig","topK"],a);const l=S(t,["maxOutputTokens"]);e!==void 0&&l!=null&&N(e,["setup","generationConfig","maxOutputTokens"],l);const c=S(t,["mediaResolution"]);e!==void 0&&c!=null&&N(e,["setup","generationConfig","mediaResolution"],c);const u=S(t,["seed"]);e!==void 0&&u!=null&&N(e,["setup","generationConfig","seed"],u);const f=S(t,["speechConfig"]);e!==void 0&&f!=null&&N(e,["setup","generationConfig","speechConfig"],mj(f));const m=S(t,["thinkingConfig"]);e!==void 0&&m!=null&&N(e,["setup","generationConfig","thinkingConfig"],m);const g=S(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&N(e,["setup","generationConfig","enableAffectiveDialog"],g);const x=S(t,["systemInstruction"]);e!==void 0&&x!=null&&N(e,["setup","systemInstruction"],Cs(x));const v=S(t,["tools"]);if(e!==void 0&&v!=null){let U=Qx(v);Array.isArray(U)&&(U=U.map(V=>Tnt(Xx(V)))),N(e,["setup","tools"],U)}const w=S(t,["sessionResumption"]);e!==void 0&&w!=null&&N(e,["setup","sessionResumption"],w);const E=S(t,["inputAudioTranscription"]);e!==void 0&&E!=null&&N(e,["setup","inputAudioTranscription"],E);const C=S(t,["outputAudioTranscription"]);e!==void 0&&C!=null&&N(e,["setup","outputAudioTranscription"],C);const k=S(t,["realtimeInputConfig"]);e!==void 0&&k!=null&&N(e,["setup","realtimeInputConfig"],k);const O=S(t,["contextWindowCompression"]);e!==void 0&&O!=null&&N(e,["setup","contextWindowCompression"],O);const j=S(t,["proactivity"]);e!==void 0&&j!=null&&N(e,["setup","proactivity"],j);const R=S(t,["explicitVadSignal"]);return e!==void 0&&R!=null&&N(e,["setup","explicitVadSignal"],R),n}function mnt(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["setup","model"],Fn(t,r));const i=S(e,["config"]);return i!=null&&N(n,["config"],hnt(i,n)),n}function gnt(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["setup","model"],Fn(t,r));const i=S(e,["config"]);return i!=null&&N(n,["config"],pnt(i,n)),n}function ynt(t){const e={},n=S(t,["musicGenerationConfig"]);return n!=null&&N(e,["musicGenerationConfig"],n),e}function xnt(t){const e={},n=S(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),N(e,["weightedPrompts"],r)}return e}function vnt(t){const e={},n=S(t,["media"]);if(n!=null){let c=_fe(n);Array.isArray(c)&&(c=c.map(u=>gT(u))),N(e,["mediaChunks"],c)}const r=S(t,["audio"]);r!=null&&N(e,["audio"],gT(Pfe(r)));const i=S(t,["audioStreamEnd"]);i!=null&&N(e,["audioStreamEnd"],i);const s=S(t,["video"]);s!=null&&N(e,["video"],gT(Ife(s)));const o=S(t,["text"]);o!=null&&N(e,["text"],o);const a=S(t,["activityStart"]);a!=null&&N(e,["activityStart"],a);const l=S(t,["activityEnd"]);return l!=null&&N(e,["activityEnd"],l),e}function bnt(t){const e={},n=S(t,["media"]);if(n!=null){let c=_fe(n);Array.isArray(c)&&(c=c.map(u=>u)),N(e,["mediaChunks"],c)}const r=S(t,["audio"]);r!=null&&N(e,["audio"],Pfe(r));const i=S(t,["audioStreamEnd"]);i!=null&&N(e,["audioStreamEnd"],i);const s=S(t,["video"]);s!=null&&N(e,["video"],Ife(s));const o=S(t,["text"]);o!=null&&N(e,["text"],o);const a=S(t,["activityStart"]);a!=null&&N(e,["activityStart"],a);const l=S(t,["activityEnd"]);return l!=null&&N(e,["activityEnd"],l),e}function wnt(t){const e={},n=S(t,["setupComplete"]);n!=null&&N(e,["setupComplete"],n);const r=S(t,["serverContent"]);r!=null&&N(e,["serverContent"],r);const i=S(t,["toolCall"]);i!=null&&N(e,["toolCall"],i);const s=S(t,["toolCallCancellation"]);s!=null&&N(e,["toolCallCancellation"],s);const o=S(t,["usageMetadata"]);o!=null&&N(e,["usageMetadata"],knt(o));const a=S(t,["goAway"]);a!=null&&N(e,["goAway"],a);const l=S(t,["sessionResumptionUpdate"]);l!=null&&N(e,["sessionResumptionUpdate"],l);const c=S(t,["voiceActivityDetectionSignal"]);return c!=null&&N(e,["voiceActivityDetectionSignal"],c),e}function Ent(t){const e={},n=S(t,["mediaResolution"]);n!=null&&N(e,["mediaResolution"],n);const r=S(t,["codeExecutionResult"]);r!=null&&N(e,["codeExecutionResult"],r);const i=S(t,["executableCode"]);i!=null&&N(e,["executableCode"],i);const s=S(t,["fileData"]);s!=null&&N(e,["fileData"],ant(s));const o=S(t,["functionCall"]);o!=null&&N(e,["functionCall"],lnt(o));const a=S(t,["functionResponse"]);a!=null&&N(e,["functionResponse"],a);const l=S(t,["inlineData"]);l!=null&&N(e,["inlineData"],gT(l));const c=S(t,["text"]);c!=null&&N(e,["text"],c);const u=S(t,["thought"]);u!=null&&N(e,["thought"],u);const f=S(t,["thoughtSignature"]);f!=null&&N(e,["thoughtSignature"],f);const m=S(t,["videoMetadata"]);return m!=null&&N(e,["videoMetadata"],m),e}function Snt(t){const e={},n=S(t,["handle"]);if(n!=null&&N(e,["handle"],n),S(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Ant(t){const e={},n=S(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(f=>f)),N(e,["functionDeclarations"],u)}if(S(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=S(t,["googleSearchRetrieval"]);r!=null&&N(e,["googleSearchRetrieval"],r);const i=S(t,["computerUse"]);i!=null&&N(e,["computerUse"],i);const s=S(t,["fileSearch"]);s!=null&&N(e,["fileSearch"],s);const o=S(t,["codeExecution"]);if(o!=null&&N(e,["codeExecution"],o),S(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=S(t,["googleMaps"]);a!=null&&N(e,["googleMaps"],dnt(a));const l=S(t,["googleSearch"]);l!=null&&N(e,["googleSearch"],fnt(l));const c=S(t,["urlContext"]);return c!=null&&N(e,["urlContext"],c),e}function Tnt(t){const e={},n=S(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(m=>cnt(m))),N(e,["functionDeclarations"],f)}const r=S(t,["retrieval"]);r!=null&&N(e,["retrieval"],r);const i=S(t,["googleSearchRetrieval"]);i!=null&&N(e,["googleSearchRetrieval"],i);const s=S(t,["computerUse"]);if(s!=null&&N(e,["computerUse"],s),S(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=S(t,["codeExecution"]);o!=null&&N(e,["codeExecution"],o);const a=S(t,["enterpriseWebSearch"]);a!=null&&N(e,["enterpriseWebSearch"],a);const l=S(t,["googleMaps"]);l!=null&&N(e,["googleMaps"],l);const c=S(t,["googleSearch"]);c!=null&&N(e,["googleSearch"],c);const u=S(t,["urlContext"]);return u!=null&&N(e,["urlContext"],u),e}function knt(t){const e={},n=S(t,["promptTokenCount"]);n!=null&&N(e,["promptTokenCount"],n);const r=S(t,["cachedContentTokenCount"]);r!=null&&N(e,["cachedContentTokenCount"],r);const i=S(t,["candidatesTokenCount"]);i!=null&&N(e,["responseTokenCount"],i);const s=S(t,["toolUsePromptTokenCount"]);s!=null&&N(e,["toolUsePromptTokenCount"],s);const o=S(t,["thoughtsTokenCount"]);o!=null&&N(e,["thoughtsTokenCount"],o);const a=S(t,["totalTokenCount"]);a!=null&&N(e,["totalTokenCount"],a);const l=S(t,["promptTokensDetails"]);if(l!=null){let g=l;Array.isArray(g)&&(g=g.map(x=>x)),N(e,["promptTokensDetails"],g)}const c=S(t,["cacheTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(x=>x)),N(e,["cacheTokensDetails"],g)}const u=S(t,["candidatesTokensDetails"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(x=>x)),N(e,["responseTokensDetails"],g)}const f=S(t,["toolUsePromptTokensDetails"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(x=>x)),N(e,["toolUsePromptTokensDetails"],g)}const m=S(t,["trafficType"]);return m!=null&&N(e,["trafficType"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Cnt(t){const e={},n=S(t,["data"]);if(n!=null&&N(e,["data"],n),S(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=S(t,["mimeType"]);return r!=null&&N(e,["mimeType"],r),e}function Nnt(t){const e={},n=S(t,["content"]);n!=null&&N(e,["content"],n);const r=S(t,["citationMetadata"]);r!=null&&N(e,["citationMetadata"],_nt(r));const i=S(t,["tokenCount"]);i!=null&&N(e,["tokenCount"],i);const s=S(t,["finishReason"]);s!=null&&N(e,["finishReason"],s);const o=S(t,["avgLogprobs"]);o!=null&&N(e,["avgLogprobs"],o);const a=S(t,["groundingMetadata"]);a!=null&&N(e,["groundingMetadata"],a);const l=S(t,["index"]);l!=null&&N(e,["index"],l);const c=S(t,["logprobsResult"]);c!=null&&N(e,["logprobsResult"],c);const u=S(t,["safetyRatings"]);if(u!=null){let m=u;Array.isArray(m)&&(m=m.map(g=>g)),N(e,["safetyRatings"],m)}const f=S(t,["urlContextMetadata"]);return f!=null&&N(e,["urlContextMetadata"],f),e}function _nt(t){const e={},n=S(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),N(e,["citations"],r)}return e}function Int(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["_url","model"],Fn(t,r));const i=S(e,["contents"]);if(i!=null){let s=ja(i);Array.isArray(s)&&(s=s.map(o=>o)),N(n,["contents"],s)}return n}function Pnt(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["tokensInfo"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),N(e,["tokensInfo"],i)}return e}function Rnt(t){const e={},n=S(t,["values"]);n!=null&&N(e,["values"],n);const r=S(t,["statistics"]);return r!=null&&N(e,["statistics"],Ont(r)),e}function Ont(t){const e={},n=S(t,["truncated"]);n!=null&&N(e,["truncated"],n);const r=S(t,["token_count"]);return r!=null&&N(e,["tokenCount"],r),e}function SN(t){const e={},n=S(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>zrt(s))),N(e,["parts"],i)}const r=S(t,["role"]);return r!=null&&N(e,["role"],r),e}function Mnt(t){const e={},n=S(t,["controlType"]);n!=null&&N(e,["controlType"],n);const r=S(t,["enableControlImageComputation"]);return r!=null&&N(e,["computeControl"],r),e}function Dnt(t){const e={};if(S(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(S(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(S(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Lnt(t,e){const n={},r=S(t,["systemInstruction"]);e!==void 0&&r!=null&&N(e,["systemInstruction"],Cs(r));const i=S(t,["tools"]);if(e!==void 0&&i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>qfe(a))),N(e,["tools"],o)}const s=S(t,["generationConfig"]);return e!==void 0&&s!=null&&N(e,["generationConfig"],Crt(s)),n}function Bnt(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["_url","model"],Fn(t,r));const i=S(e,["contents"]);if(i!=null){let o=ja(i);Array.isArray(o)&&(o=o.map(a=>SN(a))),N(n,["contents"],o)}const s=S(e,["config"]);return s!=null&&Dnt(s),n}function jnt(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["_url","model"],Fn(t,r));const i=S(e,["contents"]);if(i!=null){let o=ja(i);Array.isArray(o)&&(o=o.map(a=>a)),N(n,["contents"],o)}const s=S(e,["config"]);return s!=null&&Lnt(s,n),n}function Unt(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["totalTokens"]);r!=null&&N(e,["totalTokens"],r);const i=S(t,["cachedContentTokenCount"]);return i!=null&&N(e,["cachedContentTokenCount"],i),e}function Fnt(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["totalTokens"]);return r!=null&&N(e,["totalTokens"],r),e}function $nt(t,e){const n={},r=S(e,["model"]);return r!=null&&N(n,["_url","name"],Fn(t,r)),n}function znt(t,e){const n={},r=S(e,["model"]);return r!=null&&N(n,["_url","name"],Fn(t,r)),n}function Hnt(t){const e={},n=S(t,["sdkHttpResponse"]);return n!=null&&N(e,["sdkHttpResponse"],n),e}function Vnt(t){const e={},n=S(t,["sdkHttpResponse"]);return n!=null&&N(e,["sdkHttpResponse"],n),e}function qnt(t,e){const n={},r=S(t,["outputGcsUri"]);e!==void 0&&r!=null&&N(e,["parameters","storageUri"],r);const i=S(t,["negativePrompt"]);e!==void 0&&i!=null&&N(e,["parameters","negativePrompt"],i);const s=S(t,["numberOfImages"]);e!==void 0&&s!=null&&N(e,["parameters","sampleCount"],s);const o=S(t,["aspectRatio"]);e!==void 0&&o!=null&&N(e,["parameters","aspectRatio"],o);const a=S(t,["guidanceScale"]);e!==void 0&&a!=null&&N(e,["parameters","guidanceScale"],a);const l=S(t,["seed"]);e!==void 0&&l!=null&&N(e,["parameters","seed"],l);const c=S(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&N(e,["parameters","safetySetting"],c);const u=S(t,["personGeneration"]);e!==void 0&&u!=null&&N(e,["parameters","personGeneration"],u);const f=S(t,["includeSafetyAttributes"]);e!==void 0&&f!=null&&N(e,["parameters","includeSafetyAttributes"],f);const m=S(t,["includeRaiReason"]);e!==void 0&&m!=null&&N(e,["parameters","includeRaiReason"],m);const g=S(t,["language"]);e!==void 0&&g!=null&&N(e,["parameters","language"],g);const x=S(t,["outputMimeType"]);e!==void 0&&x!=null&&N(e,["parameters","outputOptions","mimeType"],x);const v=S(t,["outputCompressionQuality"]);e!==void 0&&v!=null&&N(e,["parameters","outputOptions","compressionQuality"],v);const w=S(t,["addWatermark"]);e!==void 0&&w!=null&&N(e,["parameters","addWatermark"],w);const E=S(t,["labels"]);e!==void 0&&E!=null&&N(e,["labels"],E);const C=S(t,["editMode"]);e!==void 0&&C!=null&&N(e,["parameters","editMode"],C);const k=S(t,["baseSteps"]);return e!==void 0&&k!=null&&N(e,["parameters","editConfig","baseSteps"],k),n}function Gnt(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["_url","model"],Fn(t,r));const i=S(e,["prompt"]);i!=null&&N(n,["instances[0]","prompt"],i);const s=S(e,["referenceImages"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>Wrt(l))),N(n,["instances[0]","referenceImages"],a)}const o=S(e,["config"]);return o!=null&&qnt(o,n),n}function Knt(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>AN(s))),N(e,["generatedImages"],i)}return e}function Wnt(t,e){const n={},r=S(t,["taskType"]);e!==void 0&&r!=null&&N(e,["requests[]","taskType"],r);const i=S(t,["title"]);e!==void 0&&i!=null&&N(e,["requests[]","title"],i);const s=S(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&N(e,["requests[]","outputDimensionality"],s),S(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(S(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Ynt(t,e){const n={},r=S(t,["taskType"]);e!==void 0&&r!=null&&N(e,["instances[]","task_type"],r);const i=S(t,["title"]);e!==void 0&&i!=null&&N(e,["instances[]","title"],i);const s=S(t,["outputDimensionality"]);e!==void 0&&s!=null&&N(e,["parameters","outputDimensionality"],s);const o=S(t,["mimeType"]);e!==void 0&&o!=null&&N(e,["instances[]","mimeType"],o);const a=S(t,["autoTruncate"]);return e!==void 0&&a!=null&&N(e,["parameters","autoTruncate"],a),n}function Jnt(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["_url","model"],Fn(t,r));const i=S(e,["contents"]);if(i!=null){let a=fj(t,i);Array.isArray(a)&&(a=a.map(l=>l)),N(n,["requests[]","content"],a)}const s=S(e,["config"]);s!=null&&Wnt(s,n);const o=S(e,["model"]);return o!==void 0&&N(n,["requests[]","model"],Fn(t,o)),n}function Xnt(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["_url","model"],Fn(t,r));const i=S(e,["contents"]);if(i!=null){let o=fj(t,i);Array.isArray(o)&&(o=o.map(a=>a)),N(n,["instances[]","content"],o)}const s=S(e,["config"]);return s!=null&&Ynt(s,n),n}function Qnt(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["embeddings"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>o)),N(e,["embeddings"],s)}const i=S(t,["metadata"]);return i!=null&&N(e,["metadata"],i),e}function Znt(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["predictions[]","embeddings"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>Rnt(o))),N(e,["embeddings"],s)}const i=S(t,["metadata"]);return i!=null&&N(e,["metadata"],i),e}function ert(t){const e={},n=S(t,["endpoint"]);n!=null&&N(e,["name"],n);const r=S(t,["deployedModelId"]);return r!=null&&N(e,["deployedModelId"],r),e}function trt(t){const e={};if(S(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=S(t,["fileUri"]);n!=null&&N(e,["fileUri"],n);const r=S(t,["mimeType"]);return r!=null&&N(e,["mimeType"],r),e}function nrt(t){const e={},n=S(t,["id"]);n!=null&&N(e,["id"],n);const r=S(t,["args"]);r!=null&&N(e,["args"],r);const i=S(t,["name"]);if(i!=null&&N(e,["name"],i),S(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(S(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function rrt(t){const e={},n=S(t,["mode"]);n!=null&&N(e,["mode"],n);const r=S(t,["allowedFunctionNames"]);if(r!=null&&N(e,["allowedFunctionNames"],r),S(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function irt(t){const e={};if(S(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=S(t,["description"]);n!=null&&N(e,["description"],n);const r=S(t,["name"]);r!=null&&N(e,["name"],r);const i=S(t,["parameters"]);i!=null&&N(e,["parameters"],i);const s=S(t,["parametersJsonSchema"]);s!=null&&N(e,["parametersJsonSchema"],s);const o=S(t,["response"]);o!=null&&N(e,["response"],o);const a=S(t,["responseJsonSchema"]);return a!=null&&N(e,["responseJsonSchema"],a),e}function srt(t,e,n){const r={},i=S(e,["systemInstruction"]);n!==void 0&&i!=null&&N(n,["systemInstruction"],SN(Cs(i)));const s=S(e,["temperature"]);s!=null&&N(r,["temperature"],s);const o=S(e,["topP"]);o!=null&&N(r,["topP"],o);const a=S(e,["topK"]);a!=null&&N(r,["topK"],a);const l=S(e,["candidateCount"]);l!=null&&N(r,["candidateCount"],l);const c=S(e,["maxOutputTokens"]);c!=null&&N(r,["maxOutputTokens"],c);const u=S(e,["stopSequences"]);u!=null&&N(r,["stopSequences"],u);const f=S(e,["responseLogprobs"]);f!=null&&N(r,["responseLogprobs"],f);const m=S(e,["logprobs"]);m!=null&&N(r,["logprobs"],m);const g=S(e,["presencePenalty"]);g!=null&&N(r,["presencePenalty"],g);const x=S(e,["frequencyPenalty"]);x!=null&&N(r,["frequencyPenalty"],x);const v=S(e,["seed"]);v!=null&&N(r,["seed"],v);const w=S(e,["responseMimeType"]);w!=null&&N(r,["responseMimeType"],w);const E=S(e,["responseSchema"]);E!=null&&N(r,["responseSchema"],hj(E));const C=S(e,["responseJsonSchema"]);if(C!=null&&N(r,["responseJsonSchema"],C),S(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(S(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const k=S(e,["safetySettings"]);if(n!==void 0&&k!=null){let B=k;Array.isArray(B)&&(B=B.map(A=>Yrt(A))),N(n,["safetySettings"],B)}const O=S(e,["tools"]);if(n!==void 0&&O!=null){let B=Qx(O);Array.isArray(B)&&(B=B.map(A=>nit(Xx(A)))),N(n,["tools"],B)}const j=S(e,["toolConfig"]);if(n!==void 0&&j!=null&&N(n,["toolConfig"],tit(j)),S(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const R=S(e,["cachedContent"]);n!==void 0&&R!=null&&N(n,["cachedContent"],Pd(t,R));const U=S(e,["responseModalities"]);U!=null&&N(r,["responseModalities"],U);const V=S(e,["mediaResolution"]);V!=null&&N(r,["mediaResolution"],V);const F=S(e,["speechConfig"]);if(F!=null&&N(r,["speechConfig"],pj(F)),S(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const $=S(e,["thinkingConfig"]);$!=null&&N(r,["thinkingConfig"],$);const K=S(e,["imageConfig"]);K!=null&&N(r,["imageConfig"],Rrt(K));const H=S(e,["enableEnhancedCivicAnswers"]);return H!=null&&N(r,["enableEnhancedCivicAnswers"],H),r}function ort(t,e,n){const r={},i=S(e,["systemInstruction"]);n!==void 0&&i!=null&&N(n,["systemInstruction"],Cs(i));const s=S(e,["temperature"]);s!=null&&N(r,["temperature"],s);const o=S(e,["topP"]);o!=null&&N(r,["topP"],o);const a=S(e,["topK"]);a!=null&&N(r,["topK"],a);const l=S(e,["candidateCount"]);l!=null&&N(r,["candidateCount"],l);const c=S(e,["maxOutputTokens"]);c!=null&&N(r,["maxOutputTokens"],c);const u=S(e,["stopSequences"]);u!=null&&N(r,["stopSequences"],u);const f=S(e,["responseLogprobs"]);f!=null&&N(r,["responseLogprobs"],f);const m=S(e,["logprobs"]);m!=null&&N(r,["logprobs"],m);const g=S(e,["presencePenalty"]);g!=null&&N(r,["presencePenalty"],g);const x=S(e,["frequencyPenalty"]);x!=null&&N(r,["frequencyPenalty"],x);const v=S(e,["seed"]);v!=null&&N(r,["seed"],v);const w=S(e,["responseMimeType"]);w!=null&&N(r,["responseMimeType"],w);const E=S(e,["responseSchema"]);E!=null&&N(r,["responseSchema"],hj(E));const C=S(e,["responseJsonSchema"]);C!=null&&N(r,["responseJsonSchema"],C);const k=S(e,["routingConfig"]);k!=null&&N(r,["routingConfig"],k);const O=S(e,["modelSelectionConfig"]);O!=null&&N(r,["modelConfig"],O);const j=S(e,["safetySettings"]);if(n!==void 0&&j!=null){let M=j;Array.isArray(M)&&(M=M.map(z=>z)),N(n,["safetySettings"],M)}const R=S(e,["tools"]);if(n!==void 0&&R!=null){let M=Qx(R);Array.isArray(M)&&(M=M.map(z=>qfe(Xx(z)))),N(n,["tools"],M)}const U=S(e,["toolConfig"]);n!==void 0&&U!=null&&N(n,["toolConfig"],U);const V=S(e,["labels"]);n!==void 0&&V!=null&&N(n,["labels"],V);const F=S(e,["cachedContent"]);n!==void 0&&F!=null&&N(n,["cachedContent"],Pd(t,F));const $=S(e,["responseModalities"]);$!=null&&N(r,["responseModalities"],$);const K=S(e,["mediaResolution"]);K!=null&&N(r,["mediaResolution"],K);const H=S(e,["speechConfig"]);H!=null&&N(r,["speechConfig"],pj(H));const B=S(e,["audioTimestamp"]);B!=null&&N(r,["audioTimestamp"],B);const A=S(e,["thinkingConfig"]);A!=null&&N(r,["thinkingConfig"],A);const I=S(e,["imageConfig"]);if(I!=null&&N(r,["imageConfig"],Ort(I)),S(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return r}function sQ(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["_url","model"],Fn(t,r));const i=S(e,["contents"]);if(i!=null){let o=ja(i);Array.isArray(o)&&(o=o.map(a=>SN(a))),N(n,["contents"],o)}const s=S(e,["config"]);return s!=null&&N(n,["generationConfig"],srt(t,s,n)),n}function oQ(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["_url","model"],Fn(t,r));const i=S(e,["contents"]);if(i!=null){let o=ja(i);Array.isArray(o)&&(o=o.map(a=>a)),N(n,["contents"],o)}const s=S(e,["config"]);return s!=null&&N(n,["generationConfig"],ort(t,s,n)),n}function aQ(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>Nnt(c))),N(e,["candidates"],l)}const i=S(t,["modelVersion"]);i!=null&&N(e,["modelVersion"],i);const s=S(t,["promptFeedback"]);s!=null&&N(e,["promptFeedback"],s);const o=S(t,["responseId"]);o!=null&&N(e,["responseId"],o);const a=S(t,["usageMetadata"]);return a!=null&&N(e,["usageMetadata"],a),e}function lQ(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(u=>u)),N(e,["candidates"],c)}const i=S(t,["createTime"]);i!=null&&N(e,["createTime"],i);const s=S(t,["modelVersion"]);s!=null&&N(e,["modelVersion"],s);const o=S(t,["promptFeedback"]);o!=null&&N(e,["promptFeedback"],o);const a=S(t,["responseId"]);a!=null&&N(e,["responseId"],a);const l=S(t,["usageMetadata"]);return l!=null&&N(e,["usageMetadata"],l),e}function art(t,e){const n={};if(S(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(S(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=S(t,["numberOfImages"]);e!==void 0&&r!=null&&N(e,["parameters","sampleCount"],r);const i=S(t,["aspectRatio"]);e!==void 0&&i!=null&&N(e,["parameters","aspectRatio"],i);const s=S(t,["guidanceScale"]);if(e!==void 0&&s!=null&&N(e,["parameters","guidanceScale"],s),S(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=S(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&N(e,["parameters","safetySetting"],o);const a=S(t,["personGeneration"]);e!==void 0&&a!=null&&N(e,["parameters","personGeneration"],a);const l=S(t,["includeSafetyAttributes"]);e!==void 0&&l!=null&&N(e,["parameters","includeSafetyAttributes"],l);const c=S(t,["includeRaiReason"]);e!==void 0&&c!=null&&N(e,["parameters","includeRaiReason"],c);const u=S(t,["language"]);e!==void 0&&u!=null&&N(e,["parameters","language"],u);const f=S(t,["outputMimeType"]);e!==void 0&&f!=null&&N(e,["parameters","outputOptions","mimeType"],f);const m=S(t,["outputCompressionQuality"]);if(e!==void 0&&m!=null&&N(e,["parameters","outputOptions","compressionQuality"],m),S(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(S(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const g=S(t,["imageSize"]);if(e!==void 0&&g!=null&&N(e,["parameters","sampleImageSize"],g),S(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function lrt(t,e){const n={},r=S(t,["outputGcsUri"]);e!==void 0&&r!=null&&N(e,["parameters","storageUri"],r);const i=S(t,["negativePrompt"]);e!==void 0&&i!=null&&N(e,["parameters","negativePrompt"],i);const s=S(t,["numberOfImages"]);e!==void 0&&s!=null&&N(e,["parameters","sampleCount"],s);const o=S(t,["aspectRatio"]);e!==void 0&&o!=null&&N(e,["parameters","aspectRatio"],o);const a=S(t,["guidanceScale"]);e!==void 0&&a!=null&&N(e,["parameters","guidanceScale"],a);const l=S(t,["seed"]);e!==void 0&&l!=null&&N(e,["parameters","seed"],l);const c=S(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&N(e,["parameters","safetySetting"],c);const u=S(t,["personGeneration"]);e!==void 0&&u!=null&&N(e,["parameters","personGeneration"],u);const f=S(t,["includeSafetyAttributes"]);e!==void 0&&f!=null&&N(e,["parameters","includeSafetyAttributes"],f);const m=S(t,["includeRaiReason"]);e!==void 0&&m!=null&&N(e,["parameters","includeRaiReason"],m);const g=S(t,["language"]);e!==void 0&&g!=null&&N(e,["parameters","language"],g);const x=S(t,["outputMimeType"]);e!==void 0&&x!=null&&N(e,["parameters","outputOptions","mimeType"],x);const v=S(t,["outputCompressionQuality"]);e!==void 0&&v!=null&&N(e,["parameters","outputOptions","compressionQuality"],v);const w=S(t,["addWatermark"]);e!==void 0&&w!=null&&N(e,["parameters","addWatermark"],w);const E=S(t,["labels"]);e!==void 0&&E!=null&&N(e,["labels"],E);const C=S(t,["imageSize"]);e!==void 0&&C!=null&&N(e,["parameters","sampleImageSize"],C);const k=S(t,["enhancePrompt"]);return e!==void 0&&k!=null&&N(e,["parameters","enhancePrompt"],k),n}function crt(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["_url","model"],Fn(t,r));const i=S(e,["prompt"]);i!=null&&N(n,["instances[0]","prompt"],i);const s=S(e,["config"]);return s!=null&&art(s,n),n}function urt(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["_url","model"],Fn(t,r));const i=S(e,["prompt"]);i!=null&&N(n,["instances[0]","prompt"],i);const s=S(e,["config"]);return s!=null&&lrt(s,n),n}function drt(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>Srt(o))),N(e,["generatedImages"],s)}const i=S(t,["positivePromptSafetyAttributes"]);return i!=null&&N(e,["positivePromptSafetyAttributes"],Hfe(i)),e}function frt(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>AN(o))),N(e,["generatedImages"],s)}const i=S(t,["positivePromptSafetyAttributes"]);return i!=null&&N(e,["positivePromptSafetyAttributes"],Vfe(i)),e}function hrt(t,e){const n={},r=S(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&N(e,["parameters","sampleCount"],r),S(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(S(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=S(t,["durationSeconds"]);if(e!==void 0&&i!=null&&N(e,["parameters","durationSeconds"],i),S(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=S(t,["aspectRatio"]);e!==void 0&&s!=null&&N(e,["parameters","aspectRatio"],s);const o=S(t,["resolution"]);e!==void 0&&o!=null&&N(e,["parameters","resolution"],o);const a=S(t,["personGeneration"]);if(e!==void 0&&a!=null&&N(e,["parameters","personGeneration"],a),S(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const l=S(t,["negativePrompt"]);e!==void 0&&l!=null&&N(e,["parameters","negativePrompt"],l);const c=S(t,["enhancePrompt"]);if(e!==void 0&&c!=null&&N(e,["parameters","enhancePrompt"],c),S(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const u=S(t,["lastFrame"]);e!==void 0&&u!=null&&N(e,["instances[0]","lastFrame"],TN(u));const f=S(t,["referenceImages"]);if(e!==void 0&&f!=null){let m=f;Array.isArray(m)&&(m=m.map(g=>mit(g))),N(e,["instances[0]","referenceImages"],m)}if(S(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(S(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function prt(t,e){const n={},r=S(t,["numberOfVideos"]);e!==void 0&&r!=null&&N(e,["parameters","sampleCount"],r);const i=S(t,["outputGcsUri"]);e!==void 0&&i!=null&&N(e,["parameters","storageUri"],i);const s=S(t,["fps"]);e!==void 0&&s!=null&&N(e,["parameters","fps"],s);const o=S(t,["durationSeconds"]);e!==void 0&&o!=null&&N(e,["parameters","durationSeconds"],o);const a=S(t,["seed"]);e!==void 0&&a!=null&&N(e,["parameters","seed"],a);const l=S(t,["aspectRatio"]);e!==void 0&&l!=null&&N(e,["parameters","aspectRatio"],l);const c=S(t,["resolution"]);e!==void 0&&c!=null&&N(e,["parameters","resolution"],c);const u=S(t,["personGeneration"]);e!==void 0&&u!=null&&N(e,["parameters","personGeneration"],u);const f=S(t,["pubsubTopic"]);e!==void 0&&f!=null&&N(e,["parameters","pubsubTopic"],f);const m=S(t,["negativePrompt"]);e!==void 0&&m!=null&&N(e,["parameters","negativePrompt"],m);const g=S(t,["enhancePrompt"]);e!==void 0&&g!=null&&N(e,["parameters","enhancePrompt"],g);const x=S(t,["generateAudio"]);e!==void 0&&x!=null&&N(e,["parameters","generateAudio"],x);const v=S(t,["lastFrame"]);e!==void 0&&v!=null&&N(e,["instances[0]","lastFrame"],Ml(v));const w=S(t,["referenceImages"]);if(e!==void 0&&w!=null){let k=w;Array.isArray(k)&&(k=k.map(O=>git(O))),N(e,["instances[0]","referenceImages"],k)}const E=S(t,["mask"]);e!==void 0&&E!=null&&N(e,["instances[0]","mask"],pit(E));const C=S(t,["compressionQuality"]);return e!==void 0&&C!=null&&N(e,["parameters","compressionQuality"],C),n}function mrt(t){const e={},n=S(t,["name"]);n!=null&&N(e,["name"],n);const r=S(t,["metadata"]);r!=null&&N(e,["metadata"],r);const i=S(t,["done"]);i!=null&&N(e,["done"],i);const s=S(t,["error"]);s!=null&&N(e,["error"],s);const o=S(t,["response","generateVideoResponse"]);return o!=null&&N(e,["response"],vrt(o)),e}function grt(t){const e={},n=S(t,["name"]);n!=null&&N(e,["name"],n);const r=S(t,["metadata"]);r!=null&&N(e,["metadata"],r);const i=S(t,["done"]);i!=null&&N(e,["done"],i);const s=S(t,["error"]);s!=null&&N(e,["error"],s);const o=S(t,["response"]);return o!=null&&N(e,["response"],brt(o)),e}function yrt(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["_url","model"],Fn(t,r));const i=S(e,["prompt"]);i!=null&&N(n,["instances[0]","prompt"],i);const s=S(e,["image"]);s!=null&&N(n,["instances[0]","image"],TN(s));const o=S(e,["video"]);o!=null&&N(n,["instances[0]","video"],Gfe(o));const a=S(e,["source"]);a!=null&&wrt(a,n);const l=S(e,["config"]);return l!=null&&hrt(l,n),n}function xrt(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["_url","model"],Fn(t,r));const i=S(e,["prompt"]);i!=null&&N(n,["instances[0]","prompt"],i);const s=S(e,["image"]);s!=null&&N(n,["instances[0]","image"],Ml(s));const o=S(e,["video"]);o!=null&&N(n,["instances[0]","video"],Kfe(o));const a=S(e,["source"]);a!=null&&Ert(a,n);const l=S(e,["config"]);return l!=null&&prt(l,n),n}function vrt(t){const e={},n=S(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>Trt(o))),N(e,["generatedVideos"],s)}const r=S(t,["raiMediaFilteredCount"]);r!=null&&N(e,["raiMediaFilteredCount"],r);const i=S(t,["raiMediaFilteredReasons"]);return i!=null&&N(e,["raiMediaFilteredReasons"],i),e}function brt(t){const e={},n=S(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>krt(o))),N(e,["generatedVideos"],s)}const r=S(t,["raiMediaFilteredCount"]);r!=null&&N(e,["raiMediaFilteredCount"],r);const i=S(t,["raiMediaFilteredReasons"]);return i!=null&&N(e,["raiMediaFilteredReasons"],i),e}function wrt(t,e){const n={},r=S(t,["prompt"]);e!==void 0&&r!=null&&N(e,["instances[0]","prompt"],r);const i=S(t,["image"]);e!==void 0&&i!=null&&N(e,["instances[0]","image"],TN(i));const s=S(t,["video"]);return e!==void 0&&s!=null&&N(e,["instances[0]","video"],Gfe(s)),n}function Ert(t,e){const n={},r=S(t,["prompt"]);e!==void 0&&r!=null&&N(e,["instances[0]","prompt"],r);const i=S(t,["image"]);e!==void 0&&i!=null&&N(e,["instances[0]","image"],Ml(i));const s=S(t,["video"]);return e!==void 0&&s!=null&&N(e,["instances[0]","video"],Kfe(s)),n}function Srt(t){const e={},n=S(t,["_self"]);n!=null&&N(e,["image"],Mrt(n));const r=S(t,["raiFilteredReason"]);r!=null&&N(e,["raiFilteredReason"],r);const i=S(t,["_self"]);return i!=null&&N(e,["safetyAttributes"],Hfe(i)),e}function AN(t){const e={},n=S(t,["_self"]);n!=null&&N(e,["image"],zfe(n));const r=S(t,["raiFilteredReason"]);r!=null&&N(e,["raiFilteredReason"],r);const i=S(t,["_self"]);i!=null&&N(e,["safetyAttributes"],Vfe(i));const s=S(t,["prompt"]);return s!=null&&N(e,["enhancedPrompt"],s),e}function Art(t){const e={},n=S(t,["_self"]);n!=null&&N(e,["mask"],zfe(n));const r=S(t,["labels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),N(e,["labels"],i)}return e}function Trt(t){const e={},n=S(t,["video"]);return n!=null&&N(e,["video"],fit(n)),e}function krt(t){const e={},n=S(t,["_self"]);return n!=null&&N(e,["video"],hit(n)),e}function Crt(t){const e={},n=S(t,["modelSelectionConfig"]);n!=null&&N(e,["modelConfig"],n);const r=S(t,["responseJsonSchema"]);r!=null&&N(e,["responseJsonSchema"],r);const i=S(t,["audioTimestamp"]);i!=null&&N(e,["audioTimestamp"],i);const s=S(t,["candidateCount"]);s!=null&&N(e,["candidateCount"],s);const o=S(t,["enableAffectiveDialog"]);o!=null&&N(e,["enableAffectiveDialog"],o);const a=S(t,["frequencyPenalty"]);a!=null&&N(e,["frequencyPenalty"],a);const l=S(t,["logprobs"]);l!=null&&N(e,["logprobs"],l);const c=S(t,["maxOutputTokens"]);c!=null&&N(e,["maxOutputTokens"],c);const u=S(t,["mediaResolution"]);u!=null&&N(e,["mediaResolution"],u);const f=S(t,["presencePenalty"]);f!=null&&N(e,["presencePenalty"],f);const m=S(t,["responseLogprobs"]);m!=null&&N(e,["responseLogprobs"],m);const g=S(t,["responseMimeType"]);g!=null&&N(e,["responseMimeType"],g);const x=S(t,["responseModalities"]);x!=null&&N(e,["responseModalities"],x);const v=S(t,["responseSchema"]);v!=null&&N(e,["responseSchema"],v);const w=S(t,["routingConfig"]);w!=null&&N(e,["routingConfig"],w);const E=S(t,["seed"]);E!=null&&N(e,["seed"],E);const C=S(t,["speechConfig"]);C!=null&&N(e,["speechConfig"],C);const k=S(t,["stopSequences"]);k!=null&&N(e,["stopSequences"],k);const O=S(t,["temperature"]);O!=null&&N(e,["temperature"],O);const j=S(t,["thinkingConfig"]);j!=null&&N(e,["thinkingConfig"],j);const R=S(t,["topK"]);R!=null&&N(e,["topK"],R);const U=S(t,["topP"]);if(U!=null&&N(e,["topP"],U),S(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Nrt(t,e){const n={},r=S(e,["model"]);return r!=null&&N(n,["_url","name"],Fn(t,r)),n}function _rt(t,e){const n={},r=S(e,["model"]);return r!=null&&N(n,["_url","name"],Fn(t,r)),n}function Irt(t){const e={};if(S(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=S(t,["enableWidget"]);return n!=null&&N(e,["enableWidget"],n),e}function Prt(t){const e={};if(S(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(S(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=S(t,["timeRangeFilter"]);return n!=null&&N(e,["timeRangeFilter"],n),e}function Rrt(t){const e={},n=S(t,["aspectRatio"]);n!=null&&N(e,["aspectRatio"],n);const r=S(t,["imageSize"]);if(r!=null&&N(e,["imageSize"],r),S(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(S(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function Ort(t){const e={},n=S(t,["aspectRatio"]);n!=null&&N(e,["aspectRatio"],n);const r=S(t,["imageSize"]);r!=null&&N(e,["imageSize"],r);const i=S(t,["outputMimeType"]);i!=null&&N(e,["imageOutputOptions","mimeType"],i);const s=S(t,["outputCompressionQuality"]);return s!=null&&N(e,["imageOutputOptions","compressionQuality"],s),e}function Mrt(t){const e={},n=S(t,["bytesBase64Encoded"]);n!=null&&N(e,["imageBytes"],xh(n));const r=S(t,["mimeType"]);return r!=null&&N(e,["mimeType"],r),e}function zfe(t){const e={},n=S(t,["gcsUri"]);n!=null&&N(e,["gcsUri"],n);const r=S(t,["bytesBase64Encoded"]);r!=null&&N(e,["imageBytes"],xh(r));const i=S(t,["mimeType"]);return i!=null&&N(e,["mimeType"],i),e}function TN(t){const e={};if(S(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=S(t,["imageBytes"]);n!=null&&N(e,["bytesBase64Encoded"],xh(n));const r=S(t,["mimeType"]);return r!=null&&N(e,["mimeType"],r),e}function Ml(t){const e={},n=S(t,["gcsUri"]);n!=null&&N(e,["gcsUri"],n);const r=S(t,["imageBytes"]);r!=null&&N(e,["bytesBase64Encoded"],xh(r));const i=S(t,["mimeType"]);return i!=null&&N(e,["mimeType"],i),e}function Drt(t,e,n){const r={},i=S(e,["pageSize"]);n!==void 0&&i!=null&&N(n,["_query","pageSize"],i);const s=S(e,["pageToken"]);n!==void 0&&s!=null&&N(n,["_query","pageToken"],s);const o=S(e,["filter"]);n!==void 0&&o!=null&&N(n,["_query","filter"],o);const a=S(e,["queryBase"]);return n!==void 0&&a!=null&&N(n,["_url","models_url"],Dfe(t,a)),r}function Lrt(t,e,n){const r={},i=S(e,["pageSize"]);n!==void 0&&i!=null&&N(n,["_query","pageSize"],i);const s=S(e,["pageToken"]);n!==void 0&&s!=null&&N(n,["_query","pageToken"],s);const o=S(e,["filter"]);n!==void 0&&o!=null&&N(n,["_query","filter"],o);const a=S(e,["queryBase"]);return n!==void 0&&a!=null&&N(n,["_url","models_url"],Dfe(t,a)),r}function Brt(t,e){const n={},r=S(e,["config"]);return r!=null&&Drt(t,r,n),n}function jrt(t,e){const n={},r=S(e,["config"]);return r!=null&&Lrt(t,r,n),n}function Urt(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["nextPageToken"]);r!=null&&N(e,["nextPageToken"],r);const i=S(t,["_self"]);if(i!=null){let s=Lfe(i);Array.isArray(s)&&(s=s.map(o=>ID(o))),N(e,["models"],s)}return e}function Frt(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["nextPageToken"]);r!=null&&N(e,["nextPageToken"],r);const i=S(t,["_self"]);if(i!=null){let s=Lfe(i);Array.isArray(s)&&(s=s.map(o=>PD(o))),N(e,["models"],s)}return e}function $rt(t){const e={},n=S(t,["maskMode"]);n!=null&&N(e,["maskMode"],n);const r=S(t,["segmentationClasses"]);r!=null&&N(e,["maskClasses"],r);const i=S(t,["maskDilation"]);return i!=null&&N(e,["dilation"],i),e}function ID(t){const e={},n=S(t,["name"]);n!=null&&N(e,["name"],n);const r=S(t,["displayName"]);r!=null&&N(e,["displayName"],r);const i=S(t,["description"]);i!=null&&N(e,["description"],i);const s=S(t,["version"]);s!=null&&N(e,["version"],s);const o=S(t,["_self"]);o!=null&&N(e,["tunedModelInfo"],rit(o));const a=S(t,["inputTokenLimit"]);a!=null&&N(e,["inputTokenLimit"],a);const l=S(t,["outputTokenLimit"]);l!=null&&N(e,["outputTokenLimit"],l);const c=S(t,["supportedGenerationMethods"]);c!=null&&N(e,["supportedActions"],c);const u=S(t,["temperature"]);u!=null&&N(e,["temperature"],u);const f=S(t,["maxTemperature"]);f!=null&&N(e,["maxTemperature"],f);const m=S(t,["topP"]);m!=null&&N(e,["topP"],m);const g=S(t,["topK"]);g!=null&&N(e,["topK"],g);const x=S(t,["thinking"]);return x!=null&&N(e,["thinking"],x),e}function PD(t){const e={},n=S(t,["name"]);n!=null&&N(e,["name"],n);const r=S(t,["displayName"]);r!=null&&N(e,["displayName"],r);const i=S(t,["description"]);i!=null&&N(e,["description"],i);const s=S(t,["versionId"]);s!=null&&N(e,["version"],s);const o=S(t,["deployedModels"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(m=>ert(m))),N(e,["endpoints"],f)}const a=S(t,["labels"]);a!=null&&N(e,["labels"],a);const l=S(t,["_self"]);l!=null&&N(e,["tunedModelInfo"],iit(l));const c=S(t,["defaultCheckpointId"]);c!=null&&N(e,["defaultCheckpointId"],c);const u=S(t,["checkpoints"]);if(u!=null){let f=u;Array.isArray(f)&&(f=f.map(m=>m)),N(e,["checkpoints"],f)}return e}function zrt(t){const e={},n=S(t,["mediaResolution"]);n!=null&&N(e,["mediaResolution"],n);const r=S(t,["codeExecutionResult"]);r!=null&&N(e,["codeExecutionResult"],r);const i=S(t,["executableCode"]);i!=null&&N(e,["executableCode"],i);const s=S(t,["fileData"]);s!=null&&N(e,["fileData"],trt(s));const o=S(t,["functionCall"]);o!=null&&N(e,["functionCall"],nrt(o));const a=S(t,["functionResponse"]);a!=null&&N(e,["functionResponse"],a);const l=S(t,["inlineData"]);l!=null&&N(e,["inlineData"],Cnt(l));const c=S(t,["text"]);c!=null&&N(e,["text"],c);const u=S(t,["thought"]);u!=null&&N(e,["thought"],u);const f=S(t,["thoughtSignature"]);f!=null&&N(e,["thoughtSignature"],f);const m=S(t,["videoMetadata"]);return m!=null&&N(e,["videoMetadata"],m),e}function Hrt(t){const e={},n=S(t,["productImage"]);return n!=null&&N(e,["image"],Ml(n)),e}function Vrt(t,e){const n={},r=S(t,["numberOfImages"]);e!==void 0&&r!=null&&N(e,["parameters","sampleCount"],r);const i=S(t,["baseSteps"]);e!==void 0&&i!=null&&N(e,["parameters","baseSteps"],i);const s=S(t,["outputGcsUri"]);e!==void 0&&s!=null&&N(e,["parameters","storageUri"],s);const o=S(t,["seed"]);e!==void 0&&o!=null&&N(e,["parameters","seed"],o);const a=S(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&N(e,["parameters","safetySetting"],a);const l=S(t,["personGeneration"]);e!==void 0&&l!=null&&N(e,["parameters","personGeneration"],l);const c=S(t,["addWatermark"]);e!==void 0&&c!=null&&N(e,["parameters","addWatermark"],c);const u=S(t,["outputMimeType"]);e!==void 0&&u!=null&&N(e,["parameters","outputOptions","mimeType"],u);const f=S(t,["outputCompressionQuality"]);e!==void 0&&f!=null&&N(e,["parameters","outputOptions","compressionQuality"],f);const m=S(t,["enhancePrompt"]);e!==void 0&&m!=null&&N(e,["parameters","enhancePrompt"],m);const g=S(t,["labels"]);return e!==void 0&&g!=null&&N(e,["labels"],g),n}function qrt(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["_url","model"],Fn(t,r));const i=S(e,["source"]);i!=null&&Krt(i,n);const s=S(e,["config"]);return s!=null&&Vrt(s,n),n}function Grt(t){const e={},n=S(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>AN(i))),N(e,["generatedImages"],r)}return e}function Krt(t,e){const n={},r=S(t,["prompt"]);e!==void 0&&r!=null&&N(e,["instances[0]","prompt"],r);const i=S(t,["personImage"]);e!==void 0&&i!=null&&N(e,["instances[0]","personImage","image"],Ml(i));const s=S(t,["productImages"]);if(e!==void 0&&s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>Hrt(a))),N(e,["instances[0]","productImages"],o)}return n}function Wrt(t){const e={},n=S(t,["referenceImage"]);n!=null&&N(e,["referenceImage"],Ml(n));const r=S(t,["referenceId"]);r!=null&&N(e,["referenceId"],r);const i=S(t,["referenceType"]);i!=null&&N(e,["referenceType"],i);const s=S(t,["maskImageConfig"]);s!=null&&N(e,["maskImageConfig"],$rt(s));const o=S(t,["controlImageConfig"]);o!=null&&N(e,["controlImageConfig"],Mnt(o));const a=S(t,["styleImageConfig"]);a!=null&&N(e,["styleImageConfig"],a);const l=S(t,["subjectImageConfig"]);return l!=null&&N(e,["subjectImageConfig"],l),e}function Hfe(t){const e={},n=S(t,["safetyAttributes","categories"]);n!=null&&N(e,["categories"],n);const r=S(t,["safetyAttributes","scores"]);r!=null&&N(e,["scores"],r);const i=S(t,["contentType"]);return i!=null&&N(e,["contentType"],i),e}function Vfe(t){const e={},n=S(t,["safetyAttributes","categories"]);n!=null&&N(e,["categories"],n);const r=S(t,["safetyAttributes","scores"]);r!=null&&N(e,["scores"],r);const i=S(t,["contentType"]);return i!=null&&N(e,["contentType"],i),e}function Yrt(t){const e={},n=S(t,["category"]);if(n!=null&&N(e,["category"],n),S(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=S(t,["threshold"]);return r!=null&&N(e,["threshold"],r),e}function Jrt(t){const e={},n=S(t,["image"]);return n!=null&&N(e,["image"],Ml(n)),e}function Xrt(t,e){const n={},r=S(t,["mode"]);e!==void 0&&r!=null&&N(e,["parameters","mode"],r);const i=S(t,["maxPredictions"]);e!==void 0&&i!=null&&N(e,["parameters","maxPredictions"],i);const s=S(t,["confidenceThreshold"]);e!==void 0&&s!=null&&N(e,["parameters","confidenceThreshold"],s);const o=S(t,["maskDilation"]);e!==void 0&&o!=null&&N(e,["parameters","maskDilation"],o);const a=S(t,["binaryColorThreshold"]);e!==void 0&&a!=null&&N(e,["parameters","binaryColorThreshold"],a);const l=S(t,["labels"]);return e!==void 0&&l!=null&&N(e,["labels"],l),n}function Qrt(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["_url","model"],Fn(t,r));const i=S(e,["source"]);i!=null&&eit(i,n);const s=S(e,["config"]);return s!=null&&Xrt(s,n),n}function Zrt(t){const e={},n=S(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Art(i))),N(e,["generatedMasks"],r)}return e}function eit(t,e){const n={},r=S(t,["prompt"]);e!==void 0&&r!=null&&N(e,["instances[0]","prompt"],r);const i=S(t,["image"]);e!==void 0&&i!=null&&N(e,["instances[0]","image"],Ml(i));const s=S(t,["scribbleImage"]);return e!==void 0&&s!=null&&N(e,["instances[0]","scribble"],Jrt(s)),n}function tit(t){const e={},n=S(t,["functionCallingConfig"]);n!=null&&N(e,["functionCallingConfig"],rrt(n));const r=S(t,["retrievalConfig"]);return r!=null&&N(e,["retrievalConfig"],r),e}function nit(t){const e={},n=S(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(f=>f)),N(e,["functionDeclarations"],u)}if(S(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=S(t,["googleSearchRetrieval"]);r!=null&&N(e,["googleSearchRetrieval"],r);const i=S(t,["computerUse"]);i!=null&&N(e,["computerUse"],i);const s=S(t,["fileSearch"]);s!=null&&N(e,["fileSearch"],s);const o=S(t,["codeExecution"]);if(o!=null&&N(e,["codeExecution"],o),S(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=S(t,["googleMaps"]);a!=null&&N(e,["googleMaps"],Irt(a));const l=S(t,["googleSearch"]);l!=null&&N(e,["googleSearch"],Prt(l));const c=S(t,["urlContext"]);return c!=null&&N(e,["urlContext"],c),e}function qfe(t){const e={},n=S(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(m=>irt(m))),N(e,["functionDeclarations"],f)}const r=S(t,["retrieval"]);r!=null&&N(e,["retrieval"],r);const i=S(t,["googleSearchRetrieval"]);i!=null&&N(e,["googleSearchRetrieval"],i);const s=S(t,["computerUse"]);if(s!=null&&N(e,["computerUse"],s),S(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=S(t,["codeExecution"]);o!=null&&N(e,["codeExecution"],o);const a=S(t,["enterpriseWebSearch"]);a!=null&&N(e,["enterpriseWebSearch"],a);const l=S(t,["googleMaps"]);l!=null&&N(e,["googleMaps"],l);const c=S(t,["googleSearch"]);c!=null&&N(e,["googleSearch"],c);const u=S(t,["urlContext"]);return u!=null&&N(e,["urlContext"],u),e}function rit(t){const e={},n=S(t,["baseModel"]);n!=null&&N(e,["baseModel"],n);const r=S(t,["createTime"]);r!=null&&N(e,["createTime"],r);const i=S(t,["updateTime"]);return i!=null&&N(e,["updateTime"],i),e}function iit(t){const e={},n=S(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&N(e,["baseModel"],n);const r=S(t,["createTime"]);r!=null&&N(e,["createTime"],r);const i=S(t,["updateTime"]);return i!=null&&N(e,["updateTime"],i),e}function sit(t,e){const n={},r=S(t,["displayName"]);e!==void 0&&r!=null&&N(e,["displayName"],r);const i=S(t,["description"]);e!==void 0&&i!=null&&N(e,["description"],i);const s=S(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&N(e,["defaultCheckpointId"],s),n}function oit(t,e){const n={},r=S(t,["displayName"]);e!==void 0&&r!=null&&N(e,["displayName"],r);const i=S(t,["description"]);e!==void 0&&i!=null&&N(e,["description"],i);const s=S(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&N(e,["defaultCheckpointId"],s),n}function ait(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["_url","name"],Fn(t,r));const i=S(e,["config"]);return i!=null&&sit(i,n),n}function lit(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["_url","model"],Fn(t,r));const i=S(e,["config"]);return i!=null&&oit(i,n),n}function cit(t,e){const n={},r=S(t,["outputGcsUri"]);e!==void 0&&r!=null&&N(e,["parameters","storageUri"],r);const i=S(t,["safetyFilterLevel"]);e!==void 0&&i!=null&&N(e,["parameters","safetySetting"],i);const s=S(t,["personGeneration"]);e!==void 0&&s!=null&&N(e,["parameters","personGeneration"],s);const o=S(t,["includeRaiReason"]);e!==void 0&&o!=null&&N(e,["parameters","includeRaiReason"],o);const a=S(t,["outputMimeType"]);e!==void 0&&a!=null&&N(e,["parameters","outputOptions","mimeType"],a);const l=S(t,["outputCompressionQuality"]);e!==void 0&&l!=null&&N(e,["parameters","outputOptions","compressionQuality"],l);const c=S(t,["enhanceInputImage"]);e!==void 0&&c!=null&&N(e,["parameters","upscaleConfig","enhanceInputImage"],c);const u=S(t,["imagePreservationFactor"]);e!==void 0&&u!=null&&N(e,["parameters","upscaleConfig","imagePreservationFactor"],u);const f=S(t,["labels"]);e!==void 0&&f!=null&&N(e,["labels"],f);const m=S(t,["numberOfImages"]);e!==void 0&&m!=null&&N(e,["parameters","sampleCount"],m);const g=S(t,["mode"]);return e!==void 0&&g!=null&&N(e,["parameters","mode"],g),n}function uit(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["_url","model"],Fn(t,r));const i=S(e,["image"]);i!=null&&N(n,["instances[0]","image"],Ml(i));const s=S(e,["upscaleFactor"]);s!=null&&N(n,["parameters","upscaleConfig","upscaleFactor"],s);const o=S(e,["config"]);return o!=null&&cit(o,n),n}function dit(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>AN(s))),N(e,["generatedImages"],i)}return e}function fit(t){const e={},n=S(t,["uri"]);n!=null&&N(e,["uri"],n);const r=S(t,["encodedVideo"]);r!=null&&N(e,["videoBytes"],xh(r));const i=S(t,["encoding"]);return i!=null&&N(e,["mimeType"],i),e}function hit(t){const e={},n=S(t,["gcsUri"]);n!=null&&N(e,["uri"],n);const r=S(t,["bytesBase64Encoded"]);r!=null&&N(e,["videoBytes"],xh(r));const i=S(t,["mimeType"]);return i!=null&&N(e,["mimeType"],i),e}function pit(t){const e={},n=S(t,["image"]);n!=null&&N(e,["_self"],Ml(n));const r=S(t,["maskMode"]);return r!=null&&N(e,["maskMode"],r),e}function mit(t){const e={},n=S(t,["image"]);n!=null&&N(e,["image"],TN(n));const r=S(t,["referenceType"]);return r!=null&&N(e,["referenceType"],r),e}function git(t){const e={},n=S(t,["image"]);n!=null&&N(e,["image"],Ml(n));const r=S(t,["referenceType"]);return r!=null&&N(e,["referenceType"],r),e}function Gfe(t){const e={},n=S(t,["uri"]);n!=null&&N(e,["uri"],n);const r=S(t,["videoBytes"]);r!=null&&N(e,["encodedVideo"],xh(r));const i=S(t,["mimeType"]);return i!=null&&N(e,["encoding"],i),e}function Kfe(t){const e={},n=S(t,["uri"]);n!=null&&N(e,["gcsUri"],n);const r=S(t,["videoBytes"]);r!=null&&N(e,["bytesBase64Encoded"],xh(r));const i=S(t,["mimeType"]);return i!=null&&N(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yit(t,e){const n={},r=S(t,["displayName"]);return e!==void 0&&r!=null&&N(e,["displayName"],r),n}function xit(t){const e={},n=S(t,["config"]);return n!=null&&yit(n,e),e}function vit(t,e){const n={},r=S(t,["force"]);return e!==void 0&&r!=null&&N(e,["_query","force"],r),n}function bit(t){const e={},n=S(t,["name"]);n!=null&&N(e,["_url","name"],n);const r=S(t,["config"]);return r!=null&&vit(r,e),e}function wit(t){const e={},n=S(t,["name"]);return n!=null&&N(e,["_url","name"],n),e}function Eit(t,e){const n={},r=S(t,["customMetadata"]);if(e!==void 0&&r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>o)),N(e,["customMetadata"],s)}const i=S(t,["chunkingConfig"]);return e!==void 0&&i!=null&&N(e,["chunkingConfig"],i),n}function Sit(t){const e={},n=S(t,["name"]);n!=null&&N(e,["name"],n);const r=S(t,["metadata"]);r!=null&&N(e,["metadata"],r);const i=S(t,["done"]);i!=null&&N(e,["done"],i);const s=S(t,["error"]);s!=null&&N(e,["error"],s);const o=S(t,["response"]);return o!=null&&N(e,["response"],Tit(o)),e}function Ait(t){const e={},n=S(t,["fileSearchStoreName"]);n!=null&&N(e,["_url","file_search_store_name"],n);const r=S(t,["fileName"]);r!=null&&N(e,["fileName"],r);const i=S(t,["config"]);return i!=null&&Eit(i,e),e}function Tit(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["parent"]);r!=null&&N(e,["parent"],r);const i=S(t,["documentName"]);return i!=null&&N(e,["documentName"],i),e}function kit(t,e){const n={},r=S(t,["pageSize"]);e!==void 0&&r!=null&&N(e,["_query","pageSize"],r);const i=S(t,["pageToken"]);return e!==void 0&&i!=null&&N(e,["_query","pageToken"],i),n}function Cit(t){const e={},n=S(t,["config"]);return n!=null&&kit(n,e),e}function Nit(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["nextPageToken"]);r!=null&&N(e,["nextPageToken"],r);const i=S(t,["fileSearchStores"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),N(e,["fileSearchStores"],s)}return e}function Wfe(t,e){const n={},r=S(t,["mimeType"]);e!==void 0&&r!=null&&N(e,["mimeType"],r);const i=S(t,["displayName"]);e!==void 0&&i!=null&&N(e,["displayName"],i);const s=S(t,["customMetadata"]);if(e!==void 0&&s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),N(e,["customMetadata"],a)}const o=S(t,["chunkingConfig"]);return e!==void 0&&o!=null&&N(e,["chunkingConfig"],o),n}function _it(t){const e={},n=S(t,["fileSearchStoreName"]);n!=null&&N(e,["_url","file_search_store_name"],n);const r=S(t,["config"]);return r!=null&&Wfe(r,e),e}function Iit(t){const e={},n=S(t,["sdkHttpResponse"]);return n!=null&&N(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Pit="Content-Type",Rit="X-Server-Timeout",Oit="User-Agent",RD="x-goog-api-client",Mit="1.34.0",Dit=`google-genai-sdk/${Mit}`,Lit="v1beta1",Bit="v1beta";class jit{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:Lit,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:Bit,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[o,a]of Object.entries(e.queryParams))i.searchParams.append(o,String(a));let s={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=e.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,n,i.toString(),e.abortSignal),this.unaryApiCall(i,s,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[i,s]of Object.entries(n))typeof s=="object"?r[i]=Object.assign(Object.assign({},r[i]),s):s!==void 0&&(r[i]=s);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let s={};return s.body=e.body,s=await this.includeExtraHttpOptionsToRequestInit(s,n,i.toString(),e.abortSignal),this.streamApiCall(i,s,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,i){if(n&&n.timeout||i){const s=new AbortController,o=s.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const a=setTimeout(()=>s.abort(),n.timeout);a&&typeof a.unref=="function"&&a.unref()}i&&i.addEventListener("abort",()=>{s.abort()}),e.signal=o}return n&&n.extraBody!==null&&Uit(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await cQ(i),new CD(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await cQ(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){return El(this,arguments,function*(){var r;const i=(r=e==null?void 0:e.body)===null||r===void 0?void 0:r.getReader(),s=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let o="";const a="data:",l=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:c,value:u}=yield tn(i.read());if(c){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const f=s.decode(u,{stream:!0});try{const x=JSON.parse(f);if("error"in x){const v=JSON.parse(JSON.stringify(x.error)),w=v.status,E=v.code,C=`got status: ${w}. ${JSON.stringify(x)}`;if(E>=400&&E<600)throw new EN({message:C,status:E})}}catch(x){if(x.name==="ApiError")throw x}o+=f;let m=-1,g=0;for(;;){m=-1,g=0;for(const w of l){const E=o.indexOf(w);E!==-1&&(m===-1||E<m)&&(m=E,g=w.length)}if(m===-1)break;const x=o.substring(0,m);o=o.substring(m+g);const v=x.trim();if(v.startsWith(a)){const w=v.substring(a.length).trim();try{const E=new Response(w,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield tn(new CD(E))}catch(E){throw new Error(`exception parsing stream chunk ${w}. ${E}`)}}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=Dit+" "+this.clientOptions.userAgentExtra;return e[Oit]=n,e[RD]=n,e[Pit]="application/json",e}async getHeadersInternal(e,n){const r=new Headers;if(e&&e.headers){for(const[i,s]of Object.entries(e.headers))r.append(i,s);e.timeout&&e.timeout>0&&r.append(Rit,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(e){var n;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(e,n){var r;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const s=this.clientOptions.uploader,o=await s.stat(e);i.sizeBytes=String(o.size);const a=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:o.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=a;const l={file:i},c=this.getFileName(e),u=yt("upload/v1beta/files",l._url),f=await this.fetchUploadUrl(u,i.sizeBytes,i.mimeType,c,l,n==null?void 0:n.httpOptions);return s.upload(e,f,this)}async uploadFileToFileSearchStore(e,n,r){var i;const s=this.clientOptions.uploader,o=await s.stat(n),a=String(o.size),l=(i=r==null?void 0:r.mimeType)!==null&&i!==void 0?i:o.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const c=`upload/v1beta/${e}:uploadToFileSearchStore`,u=this.getFileName(n),f={};r!=null&&Wfe(r,f);const m=await this.fetchUploadUrl(c,a,l,u,f,r==null?void 0:r.httpOptions);return s.uploadToFileSearchStore(n,m,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r,i,s,o){var a;let l={};o?l=o:l={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},i?{"X-Goog-Upload-File-Name":i}:{})};const c=await this.request({path:e,body:JSON.stringify(s),httpMethod:"POST",httpOptions:l});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const u=(a=c==null?void 0:c.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(u===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return u}}async function cQ(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const i=JSON.stringify(r);throw n>=400&&n<600?new EN({message:i,status:n}):new Error(i)}}function Uit(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const s=JSON.parse(t.body);if(typeof s=="object"&&s!==null&&!Array.isArray(s))n=s;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(s,o){const a=Object.assign({},s);for(const l in o)if(Object.prototype.hasOwnProperty.call(o,l)){const c=o[l],u=a[l];c&&typeof c=="object"&&!Array.isArray(c)&&u&&typeof u=="object"&&!Array.isArray(u)?a[l]=r(u,c):(u&&c&&typeof u!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof u}, New type: ${typeof c}. Overwriting.`),a[l]=c)}return a}const i=r(n,e);t.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Fit="mcp_used/unknown";let $it=!1;function Yfe(t){for(const e of t)if(zit(e)||typeof e=="object"&&"inputSchema"in e)return!0;return $it}function Jfe(t){var e;const n=(e=t[RD])!==null&&e!==void 0?e:"";t[RD]=(n+` ${Fit}`).trimStart()}function zit(t){return t!==null&&typeof t=="object"&&t instanceof gj}function Hit(t){return El(this,arguments,function*(n,r=100){let i,s=0;for(;s<r;){const o=yield tn(n.listTools({cursor:i}));for(const a of o.tools)yield yield tn(a),s++;if(!o.nextCursor)break;i=o.nextCursor}})}class gj{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new gj(e,n)}async initialize(){var e,n,r,i;if(this.mcpTools.length>0)return;const s={},o=[];for(const u of this.mcpClients)try{for(var a=!0,l=(n=void 0,Sl(Hit(u))),c;c=await l.next(),e=c.done,!e;a=!0){i=c.value,a=!1;const f=i;o.push(f);const m=f.name;if(s[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);s[m]=u}}catch(f){n={error:f}}finally{try{!a&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}this.mcpTools=o,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),bet(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let s;this.config.timeout&&(s={timeout:this.config.timeout});const o=await i.callTool({name:r.name,arguments:r.args},void 0,s);n.push({functionResponse:{name:r.name,response:o.isError?{error:o}:o}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Vit(t,e,n){const r=new fet;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data),Object.assign(r,i),e(r)}class qit{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),o=Wit(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),l=`${i}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${a}`;let c=()=>{};const u=new Promise(k=>{c=k}),f=e.callbacks,m=function(){c({})},g=this.apiClient,x={onopen:m,onmessage:k=>{Vit(g,f.onmessage,k)},onerror:(n=f==null?void 0:f.onerror)!==null&&n!==void 0?n:function(k){},onclose:(r=f==null?void 0:f.onclose)!==null&&r!==void 0?r:function(k){}},v=this.webSocketFactory.create(l,Kit(o),x);v.connect(),await u;const C={setup:{model:Fn(this.apiClient,e.model)}};return v.send(JSON.stringify(C)),new Git(v,this.apiClient)}}class Git{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=xnt(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=ynt(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Eg.PLAY)}pause(){this.sendPlaybackControl(Eg.PAUSE)}stop(){this.sendPlaybackControl(Eg.STOP)}resetContext(){this.sendPlaybackControl(Eg.RESET_CONTEXT)}close(){this.conn.close()}}function Kit(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function Wit(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Yit="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Jit(t,e,n){const r=new det;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const s=JSON.parse(i);if(t.isVertexAI()){const o=wnt(s);Object.assign(r,o)}else Object.assign(r,s);e(r)}class Xit{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new qit(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,i,s,o,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const l=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let u;const f=this.apiClient.getHeaders();e.config&&e.config.tools&&Yfe(e.config.tools)&&Jfe(f);const m=tst(f);if(this.apiClient.isVertexAI())u=`${l}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m,u);else{const F=this.apiClient.getApiKey();let $="BidiGenerateContent",K="key";F!=null&&F.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),$="BidiGenerateContentConstrained",K="access_token"),u=`${l}/ws/google.ai.generativelanguage.${c}.GenerativeService.${$}?${K}=${F}`}let g=()=>{};const x=new Promise(F=>{g=F}),v=e.callbacks,w=function(){var F;(F=v==null?void 0:v.onopen)===null||F===void 0||F.call(v),g({})},E=this.apiClient,C={onopen:w,onmessage:F=>{Jit(E,v.onmessage,F)},onerror:(n=v==null?void 0:v.onerror)!==null&&n!==void 0?n:function(F){},onclose:(r=v==null?void 0:v.onclose)!==null&&r!==void 0?r:function(F){}},k=this.webSocketFactory.create(u,est(m),C);k.connect(),await x;let O=Fn(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&O.startsWith("publishers/")){const F=this.apiClient.getProject(),$=this.apiClient.getLocation();O=`projects/${F}/locations/${$}/`+O}let j={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[aC.AUDIO]}:e.config.responseModalities=[aC.AUDIO]),!((s=e.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const R=(a=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[],U=[];for(const F of R)if(this.isCallableTool(F)){const $=F;U.push(await $.tool())}else U.push(F);U.length>0&&(e.config.tools=U);const V={model:O,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?j=gnt(this.apiClient,V):j=mnt(this.apiClient,V),delete j.config,k.send(JSON.stringify(j)),new Zit(k,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const Qit={turnComplete:!0};class Zit{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=ja(n.turns),e.isVertexAI()||(r=r.map(i=>SN(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const s of r){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error(Yit)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},Qit),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:bnt(e)}:n={realtimeInput:vnt(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function est(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function tst(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uQ=10;function dQ(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const o of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Wg(o)){i=!0;break}if(!i)return!0;const s=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function Wg(t){return"callTool"in t&&typeof t.callTool=="function"}function nst(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>Wg(i)))!==null&&r!==void 0?r:!1}function fQ(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,i)=>{if(Wg(r))return;const s=r;s.functionDeclarations&&s.functionDeclarations.length>0&&n.push(i)}),n}function hQ(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rst extends Id{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,i,s,o,a;const l=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!nst(n)||dQ(n.config))return await this.generateContentInternal(l);const c=fQ(n);if(c.length>0){const v=c.map(w=>`tools[${w}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${v}.`)}let u,f;const m=ja(l.contents),g=(s=(i=(r=l.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&s!==void 0?s:uQ;let x=0;for(;x<g&&(u=await this.generateContentInternal(l),!(!u.functionCalls||u.functionCalls.length===0));){const v=u.candidates[0].content,w=[];for(const E of(a=(o=n.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[])if(Wg(E)){const k=await E.callTool(u.functionCalls);w.push(...k)}x++,f={role:"user",parts:w},l.contents=ja(l.contents),l.contents.push(v),l.contents.push(f),hQ(l.config)&&(m.push(v),m.push(f))}return hQ(l.config)&&(u.automaticFunctionCallingHistory=m),u},this.generateContentStream=async n=>{var r,i,s,o,a;if(this.maybeMoveToResponseJsonSchem(n),dQ(n.config)){const f=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(f)}const l=fQ(n);if(l.length>0){const f=l.map(m=>`tools[${m}]`).join(", ");throw new Error(`Incompatible tools found at ${f}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const c=(s=(i=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||i===void 0?void 0:i.functionCallingConfig)===null||s===void 0?void 0:s.streamFunctionCallArguments,u=(a=(o=n==null?void 0:n.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||a===void 0?void 0:a.disable;if(c&&!u)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let s;const o=[];if(r!=null&&r.generatedImages)for(const l of r.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((i=l==null?void 0:l.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?s=l==null?void 0:l.safetyAttributes:o.push(l);let a;return s?a={generatedImages:o,positivePromptSafetyAttributes:s,sdkHttpResponse:r.sdkHttpResponse}:a={generatedImages:o,sdkHttpResponse:r.sdkHttpResponse},a}),this.list=async n=>{var r;const o={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((r=o.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new Lm(yd.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(o),o)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>{var r,i,s,o,a,l;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((i=n.video)===null||i===void 0)&&i.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((o=(s=n.source)===null||s===void 0?void 0:s.video)===null||o===void 0)&&o.uri&&(!((l=(a=n.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,i;const s=(n=e.config)===null||n===void 0?void 0:n.tools;if(!s)return e;const o=await Promise.all(s.map(async l=>Wg(l)?await l.tool():l)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:o})};if(a.config.tools=o,e.config&&e.config.tools&&Yfe(e.config.tools)){const l=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let c=Object.assign({},l);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),Jfe(c),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return a}async initAfcToolsMap(e){var n,r,i;const s=new Map;for(const o of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(Wg(o)){const a=o,l=await a.tool();for(const c of(i=l.functionDeclarations)!==null&&i!==void 0?i:[]){if(!c.name)throw new Error("Function declaration name is required.");if(s.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);s.set(c.name,a)}}return s}async processAfcStream(e){var n,r,i;const s=(i=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:uQ;let o=!1,a=0;const l=await this.initAfcToolsMap(e);return(function(c,u,f){return El(this,arguments,function*(){for(var m,g,x,v,w,E;a<s;){o&&(a++,o=!1);const j=yield tn(c.processParamsMaybeAddMcpUsage(f)),R=yield tn(c.generateContentStreamInternal(j)),U=[],V=[];try{for(var C=!0,k=(g=void 0,Sl(R)),O;O=yield tn(k.next()),m=O.done,!m;C=!0){v=O.value,C=!1;const F=v;if(yield yield tn(F),F.candidates&&(!((w=F.candidates[0])===null||w===void 0)&&w.content)){V.push(F.candidates[0].content);for(const $ of(E=F.candidates[0].content.parts)!==null&&E!==void 0?E:[])if(a<s&&$.functionCall){if(!$.functionCall.name)throw new Error("Function call name was not returned by the model.");if(u.has($.functionCall.name)){const K=yield tn(u.get($.functionCall.name).callTool([$.functionCall]));U.push(...K)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${u.keys()}, mising tool: ${$.functionCall.name}`)}}}}catch(F){g={error:F}}finally{try{!C&&!m&&(x=k.return)&&(yield tn(x.call(k)))}finally{if(g)throw g.error}}if(U.length>0){o=!0;const F=new gb;F.candidates=[{content:{role:"user",parts:U}}],yield yield tn(F);const $=[];$.push(...V),$.push({role:"user",parts:U});const K=ja(f.contents).concat($);f.contents=K}else break}})})(this,l,e)}async generateContentInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=oQ(this.apiClient,e);return a=yt("{model}:generateContent",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const f=lQ(u),m=new gb;return Object.assign(m,f),m})}else{const c=sQ(this.apiClient,e);return a=yt("{model}:generateContent",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const f=aQ(u),m=new gb;return Object.assign(m,f),m})}}async generateContentStreamInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=oQ(this.apiClient,e);return a=yt("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),o.then(function(f){return El(this,arguments,function*(){var m,g,x,v;try{for(var w=!0,E=Sl(f),C;C=yield tn(E.next()),m=C.done,!m;w=!0){v=C.value,w=!1;const k=v,O=lQ(yield tn(k.json()));O.sdkHttpResponse={headers:k.headers};const j=new gb;Object.assign(j,O),yield yield tn(j)}}catch(k){g={error:k}}finally{try{!w&&!m&&(x=E.return)&&(yield tn(x.call(E)))}finally{if(g)throw g.error}}})})}else{const c=sQ(this.apiClient,e);return a=yt("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),o.then(function(f){return El(this,arguments,function*(){var m,g,x,v;try{for(var w=!0,E=Sl(f),C;C=yield tn(E.next()),m=C.done,!m;w=!0){v=C.value,w=!1;const k=v,O=aQ(yield tn(k.json()));O.sdkHttpResponse={headers:k.headers};const j=new gb;Object.assign(j,O),yield yield tn(j)}}catch(k){g={error:k}}finally{try{!w&&!m&&(x=E.return)&&(yield tn(x.call(E)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Xnt(this.apiClient,e);return a=yt("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const f=Znt(u),m=new zX;return Object.assign(m,f),m})}else{const c=Jnt(this.apiClient,e);return a=yt("{model}:batchEmbedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const f=Qnt(u),m=new zX;return Object.assign(m,f),m})}}async generateImagesInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=urt(this.apiClient,e);return a=yt("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const f=frt(u),m=new HX;return Object.assign(m,f),m})}else{const c=crt(this.apiClient,e);return a=yt("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const f=drt(u),m=new HX;return Object.assign(m,f),m})}}async editImageInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=Gnt(this.apiClient,e);return s=yt("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),i.then(l=>{const c=Knt(l),u=new ZZe;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=uit(this.apiClient,e);return s=yt("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),i.then(l=>{const c=dit(l),u=new eet;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=qrt(this.apiClient,e);return s=yt("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=Grt(l),u=new tet;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=Qrt(this.apiClient,e);return s=yt("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=Zrt(l),u=new net;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=_rt(this.apiClient,e);return a=yt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>PD(u))}else{const c=Nrt(this.apiClient,e);return a=yt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>ID(u))}}async listInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=jrt(this.apiClient,e);return a=yt("{models_url}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const f=Frt(u),m=new VX;return Object.assign(m,f),m})}else{const c=Brt(this.apiClient,e);return a=yt("{models_url}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const f=Urt(u),m=new VX;return Object.assign(m,f),m})}}async update(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=lit(this.apiClient,e);return a=yt("{model}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>PD(u))}else{const c=ait(this.apiClient,e);return a=yt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>ID(u))}}async delete(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=znt(this.apiClient,e);return a=yt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const f=Vnt(u),m=new qX;return Object.assign(m,f),m})}else{const c=$nt(this.apiClient,e);return a=yt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const f=Hnt(u),m=new qX;return Object.assign(m,f),m})}}async countTokens(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=jnt(this.apiClient,e);return a=yt("{model}:countTokens",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const f=Fnt(u),m=new GX;return Object.assign(m,f),m})}else{const c=Bnt(this.apiClient,e);return a=yt("{model}:countTokens",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const f=Unt(u),m=new GX;return Object.assign(m,f),m})}}async computeTokens(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=Int(this.apiClient,e);return s=yt("{model}:computeTokens",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),i.then(l=>{const c=Pnt(l),u=new ret;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=xrt(this.apiClient,e);return a=yt("{model}:predictLongRunning",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>{const f=grt(u),m=new lC;return Object.assign(m,f),m})}else{const c=yrt(this.apiClient,e);return a=yt("{model}:predictLongRunning",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>{const f=mrt(u),m=new lC;return Object.assign(m,f),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ist extends Id{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let s;r&&"httpOptions"in r&&(s=r.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let s;r&&"httpOptions"in r&&(s=r.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=KZe(e);return a=yt("{operationName}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o}else{const c=GZe(e);return a=yt("{operationName}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o}}async fetchPredictVideosOperationInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=UZe(e);return s=yt("{resourceName}:fetchPredictOperation",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sst(t){const e={},n=S(t,["data"]);if(n!=null&&N(e,["data"],n),S(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=S(t,["mimeType"]);return r!=null&&N(e,["mimeType"],r),e}function ost(t){const e={},n=S(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>mst(s))),N(e,["parts"],i)}const r=S(t,["role"]);return r!=null&&N(e,["role"],r),e}function ast(t,e,n){const r={},i=S(e,["expireTime"]);n!==void 0&&i!=null&&N(n,["expireTime"],i);const s=S(e,["newSessionExpireTime"]);n!==void 0&&s!=null&&N(n,["newSessionExpireTime"],s);const o=S(e,["uses"]);n!==void 0&&o!=null&&N(n,["uses"],o);const a=S(e,["liveConnectConstraints"]);n!==void 0&&a!=null&&N(n,["bidiGenerateContentSetup"],pst(t,a));const l=S(e,["lockAdditionalFields"]);return n!==void 0&&l!=null&&N(n,["fieldMask"],l),r}function lst(t,e){const n={},r=S(e,["config"]);return r!=null&&N(n,["config"],ast(t,r,n)),n}function cst(t){const e={};if(S(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=S(t,["fileUri"]);n!=null&&N(e,["fileUri"],n);const r=S(t,["mimeType"]);return r!=null&&N(e,["mimeType"],r),e}function ust(t){const e={},n=S(t,["id"]);n!=null&&N(e,["id"],n);const r=S(t,["args"]);r!=null&&N(e,["args"],r);const i=S(t,["name"]);if(i!=null&&N(e,["name"],i),S(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(S(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function dst(t){const e={};if(S(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=S(t,["enableWidget"]);return n!=null&&N(e,["enableWidget"],n),e}function fst(t){const e={};if(S(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(S(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=S(t,["timeRangeFilter"]);return n!=null&&N(e,["timeRangeFilter"],n),e}function hst(t,e){const n={},r=S(t,["generationConfig"]);e!==void 0&&r!=null&&N(e,["setup","generationConfig"],r);const i=S(t,["responseModalities"]);e!==void 0&&i!=null&&N(e,["setup","generationConfig","responseModalities"],i);const s=S(t,["temperature"]);e!==void 0&&s!=null&&N(e,["setup","generationConfig","temperature"],s);const o=S(t,["topP"]);e!==void 0&&o!=null&&N(e,["setup","generationConfig","topP"],o);const a=S(t,["topK"]);e!==void 0&&a!=null&&N(e,["setup","generationConfig","topK"],a);const l=S(t,["maxOutputTokens"]);e!==void 0&&l!=null&&N(e,["setup","generationConfig","maxOutputTokens"],l);const c=S(t,["mediaResolution"]);e!==void 0&&c!=null&&N(e,["setup","generationConfig","mediaResolution"],c);const u=S(t,["seed"]);e!==void 0&&u!=null&&N(e,["setup","generationConfig","seed"],u);const f=S(t,["speechConfig"]);e!==void 0&&f!=null&&N(e,["setup","generationConfig","speechConfig"],mj(f));const m=S(t,["thinkingConfig"]);e!==void 0&&m!=null&&N(e,["setup","generationConfig","thinkingConfig"],m);const g=S(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&N(e,["setup","generationConfig","enableAffectiveDialog"],g);const x=S(t,["systemInstruction"]);e!==void 0&&x!=null&&N(e,["setup","systemInstruction"],ost(Cs(x)));const v=S(t,["tools"]);if(e!==void 0&&v!=null){let R=Qx(v);Array.isArray(R)&&(R=R.map(U=>yst(Xx(U)))),N(e,["setup","tools"],R)}const w=S(t,["sessionResumption"]);e!==void 0&&w!=null&&N(e,["setup","sessionResumption"],gst(w));const E=S(t,["inputAudioTranscription"]);e!==void 0&&E!=null&&N(e,["setup","inputAudioTranscription"],E);const C=S(t,["outputAudioTranscription"]);e!==void 0&&C!=null&&N(e,["setup","outputAudioTranscription"],C);const k=S(t,["realtimeInputConfig"]);e!==void 0&&k!=null&&N(e,["setup","realtimeInputConfig"],k);const O=S(t,["contextWindowCompression"]);e!==void 0&&O!=null&&N(e,["setup","contextWindowCompression"],O);const j=S(t,["proactivity"]);if(e!==void 0&&j!=null&&N(e,["setup","proactivity"],j),S(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function pst(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["setup","model"],Fn(t,r));const i=S(e,["config"]);return i!=null&&N(n,["config"],hst(i,n)),n}function mst(t){const e={},n=S(t,["mediaResolution"]);n!=null&&N(e,["mediaResolution"],n);const r=S(t,["codeExecutionResult"]);r!=null&&N(e,["codeExecutionResult"],r);const i=S(t,["executableCode"]);i!=null&&N(e,["executableCode"],i);const s=S(t,["fileData"]);s!=null&&N(e,["fileData"],cst(s));const o=S(t,["functionCall"]);o!=null&&N(e,["functionCall"],ust(o));const a=S(t,["functionResponse"]);a!=null&&N(e,["functionResponse"],a);const l=S(t,["inlineData"]);l!=null&&N(e,["inlineData"],sst(l));const c=S(t,["text"]);c!=null&&N(e,["text"],c);const u=S(t,["thought"]);u!=null&&N(e,["thought"],u);const f=S(t,["thoughtSignature"]);f!=null&&N(e,["thoughtSignature"],f);const m=S(t,["videoMetadata"]);return m!=null&&N(e,["videoMetadata"],m),e}function gst(t){const e={},n=S(t,["handle"]);if(n!=null&&N(e,["handle"],n),S(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function yst(t){const e={},n=S(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(f=>f)),N(e,["functionDeclarations"],u)}if(S(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=S(t,["googleSearchRetrieval"]);r!=null&&N(e,["googleSearchRetrieval"],r);const i=S(t,["computerUse"]);i!=null&&N(e,["computerUse"],i);const s=S(t,["fileSearch"]);s!=null&&N(e,["fileSearch"],s);const o=S(t,["codeExecution"]);if(o!=null&&N(e,["codeExecution"],o),S(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=S(t,["googleMaps"]);a!=null&&N(e,["googleMaps"],dst(a));const l=S(t,["googleSearch"]);l!=null&&N(e,["googleSearch"],fst(l));const c=S(t,["urlContext"]);return c!=null&&N(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xst(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(s=>`${n}.${s}`);e.push(...i)}else e.push(n)}return e.join(",")}function vst(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const s=r.setup;typeof s=="object"&&s!==null?(t.bidiGenerateContentSetup=s,n=s):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const i=t.fieldMask;if(n){const s=xst(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)s?t.fieldMask=s:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const o=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];i.length>0&&(a=i.map(c=>o.includes(c)?`generationConfig.${c}`:c));const l=[];s&&l.push(s),a.length>0&&l.push(...a),l.length>0?t.fieldMask=l.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}class bst extends Id{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=lst(this.apiClient,e);s=yt("auth_tokens",a._url),o=a._query,delete a.config,delete a._url,delete a._query;const l=vst(a,e.config);return i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>c)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wst(t,e){const n={},r=S(t,["force"]);return e!==void 0&&r!=null&&N(e,["_query","force"],r),n}function Est(t){const e={},n=S(t,["name"]);n!=null&&N(e,["_url","name"],n);const r=S(t,["config"]);return r!=null&&wst(r,e),e}function Sst(t){const e={},n=S(t,["name"]);return n!=null&&N(e,["_url","name"],n),e}function Ast(t,e){const n={},r=S(t,["pageSize"]);e!==void 0&&r!=null&&N(e,["_query","pageSize"],r);const i=S(t,["pageToken"]);return e!==void 0&&i!=null&&N(e,["_query","pageToken"],i),n}function Tst(t){const e={},n=S(t,["parent"]);n!=null&&N(e,["_url","parent"],n);const r=S(t,["config"]);return r!=null&&Ast(r,e),e}function kst(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["nextPageToken"]);r!=null&&N(e,["nextPageToken"],r);const i=S(t,["documents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),N(e,["documents"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Cst extends Id{constructor(e){super(),this.apiClient=e,this.list=async n=>new Lm(yd.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Sst(e);return s=yt("{name}",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=Est(e);i=yt("{name}",o._url),s=o._query,delete o._url,delete o._query,await this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Tst(e);return s=yt("{parent}/documents",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=kst(l),u=new iet;return Object.assign(u,c),u})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Nst extends Id{constructor(e,n=new Cst(e)){super(),this.apiClient=e,this.documents=n,this.list=async(r={})=>new Lm(yd.PAGED_ITEM_FILE_SEARCH_STORES,i=>this.listInternal(i),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=xit(e);return s=yt("fileSearchStores",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async get(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=wit(e);return s=yt("{name}",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=bit(e);i=yt("{name}",o._url),s=o._query,delete o._url,delete o._query,await this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Cit(e);return s=yt("fileSearchStores",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=Nit(l),u=new set;return Object.assign(u,c),u})}}async uploadToFileSearchStoreInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=_it(e);return s=yt("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=Iit(l),u=new oet;return Object.assign(u,c),u})}}async importFile(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Ait(e);return s=yt("{file_search_store_name}:importFile",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=Sit(l),u=new uj;return Object.assign(u,c),u})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Xfe=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return Xfe=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};const _st=()=>Xfe();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function OD(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const MD=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Va extends Error{}class Ws extends Va{constructor(e,n,r,i){super(`${Ws.makeMessage(e,n,r)}`),this.status=e,this.headers=i,this.error=n}static makeMessage(e,n,r){const i=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,r,i){if(!e||!i)return new kN({message:r,cause:MD(n)});const s=n;return e===400?new Zfe(e,s,r,i):e===401?new ehe(e,s,r,i):e===403?new the(e,s,r,i):e===404?new nhe(e,s,r,i):e===409?new rhe(e,s,r,i):e===422?new ihe(e,s,r,i):e===429?new she(e,s,r,i):e>=500?new ohe(e,s,r,i):new Ws(e,s,r,i)}}class DD extends Ws{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class kN extends Ws{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class Qfe extends kN{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Zfe extends Ws{}class ehe extends Ws{}class the extends Ws{}class nhe extends Ws{}class rhe extends Ws{}class ihe extends Ws{}class she extends Ws{}class ohe extends Ws{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ist=/^[a-z][a-z0-9+.-]*:/i,Pst=t=>Ist.test(t);let LD=t=>(LD=Array.isArray,LD(t));const Rst=LD;let Ost=Rst;const pQ=Ost;function Mst(t){if(!t)return!0;for(const e in t)return!1;return!0}function Dst(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const Lst=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Va(`${t} must be an integer`);if(e<0)throw new Va(`${t} must be a positive integer`);return e},Bst=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jst=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ag="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ust(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const Fst=()=>{var t,e,n,r,i;const s=Ust();if(s==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ag,"X-Stainless-OS":gQ(Deno.build.os),"X-Stainless-Arch":mQ(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ag,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(s==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ag,"X-Stainless-OS":gQ((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":mQ((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(i=globalThis.process.version)!==null&&i!==void 0?i:"unknown"};const o=$st();return o?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ag,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${o.browser}`,"X-Stainless-Runtime-Version":o.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ag,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function $st(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,s=r[2]||0,o=r[3]||0;return{browser:e,version:`${i}.${s}.${o}`}}}return null}const mQ=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",gQ=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let vA;const zst=()=>vA??(vA=Fst());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Hst(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function ahe(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function Vst(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return ahe({start(){},async pull(n){const{done:r,value:i}=await e.next();r?n.close():n.enqueue(i)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function lhe(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function qst(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const r=t.getReader(),i=r.cancel();r.releaseLock(),await i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Gst=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const che=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function z5(t,e,n){return che(),new File(t,e??"unknown_file",n)}function Kst(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const Wst=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uhe=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",Yst=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&uhe(t),Jst=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function Xst(t,e,n){if(che(),t=await t,Yst(t))return t instanceof File?t:z5([await t.arrayBuffer()],t.name);if(Jst(t)){const i=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),z5(await BD(i),e,n)}const r=await BD(t);if(e||(e=Kst(t)),!(n!=null&&n.type)){const i=r.find(s=>typeof s=="object"&&"type"in s&&s.type);typeof i=="string"&&(n=Object.assign(Object.assign({},n),{type:i}))}return z5(r,e,n)}async function BD(t){var e,n,r,i,s;let o=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)o.push(t);else if(uhe(t))o.push(t instanceof Blob?t:await t.arrayBuffer());else if(Wst(t))try{for(var a=!0,l=Sl(t),c;c=await l.next(),e=c.done,!e;a=!0){i=c.value,a=!1;const u=i;o.push(...await BD(u))}}catch(u){n={error:u}}finally{try{!a&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}else{const u=(s=t==null?void 0:t.constructor)===null||s===void 0?void 0:s.name;throw new Error(`Unexpected data type: ${typeof t}${u?`; constructor: ${u}`:""}${Qst(t)}`)}return o}function Qst(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dhe{constructor(e){this._client=e}}dhe._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fhe(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const yQ=Object.freeze(Object.create(null)),Zst=(t=fhe)=>(function(n,...r){if(n.length===1)return n[0];let i=!1;const s=[],o=n.reduce((u,f,m)=>{var g,x,v;/[?#]/.test(f)&&(i=!0);const w=r[m];let E=(i?encodeURIComponent:t)(""+w);return m!==r.length&&(w==null||typeof w=="object"&&w.toString===((v=Object.getPrototypeOf((x=Object.getPrototypeOf((g=w.hasOwnProperty)!==null&&g!==void 0?g:yQ))!==null&&x!==void 0?x:yQ))===null||v===void 0?void 0:v.toString))&&(E=w+"",s.push({start:u.length+f.length,length:E.length,error:`Value of type ${Object.prototype.toString.call(w).slice(8,-1)} is not a valid path parameter`})),u+f+(m===r.length?"":E)},""),a=o.split(/[?#]/,1)[0],l=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let c;for(;(c=l.exec(a))!==null;)s.push({start:c.index,length:c[0].length,error:`Value "${c[0]}" can't be safely passed as a path parameter`});if(s.sort((u,f)=>u.start-f.start),s.length>0){let u=0;const f=s.reduce((m,g)=>{const x=" ".repeat(g.start-u),v="^".repeat(g.length);return u=g.start+g.length,m+x+v},"");throw new Va(`Path parameters result in path with invalid segments:
${s.map(m=>m.error).join(`
`)}
${o}
${f}`)}return o}),bA=Zst(fhe);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hhe extends dhe{create(e,n){var r;const{api_version:i=this._client.apiVersion}=e,s=uC(e,["api_version"]);if("model"in s&&"agent_config"in s)throw new Va("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in s&&"generation_config"in s)throw new Va("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(bA`/${i}/interactions`,Object.assign(Object.assign({body:s},n),{stream:(r=e.stream)!==null&&r!==void 0?r:!1}))}delete(e,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.delete(bA`/${i}/interactions/${e}`,r)}cancel(e,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.post(bA`/${i}/interactions/${e}/cancel`,r)}get(e,n={},r){var i;const s=n??{},{api_version:o=this._client.apiVersion}=s,a=uC(s,["api_version"]);return this._client.get(bA`/${o}/interactions/${e}`,Object.assign(Object.assign({query:a},r),{stream:(i=n==null?void 0:n.stream)!==null&&i!==void 0?i:!1}))}}hhe._key=Object.freeze(["interactions"]);class phe extends hhe{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function eot(t){let e=0;for(const i of t)e+=i.length;const n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}let wA;function yj(t){let e;return(wA??(e=new globalThis.TextEncoder,wA=e.encode.bind(e)))(t)}let EA;function xQ(t){let e;return(EA??(e=new globalThis.TextDecoder,EA=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class CN{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?yj(e):e;this.buffer=eot([this.buffer,n]);const r=[];let i;for(;(i=tot(this.buffer,this.carriageReturnIndex))!=null;){if(i.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=i.index;continue}if(this.carriageReturnIndex!=null&&(i.index!==this.carriageReturnIndex+1||i.carriage)){r.push(xQ(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const s=this.carriageReturnIndex!==null?i.preceding-1:i.preceding,o=xQ(this.buffer.subarray(0,s));r.push(o),this.buffer=this.buffer.subarray(i.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}}CN.NEWLINE_CHARS=new Set([`
`,"\r"]);CN.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function tot(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function not(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dC={off:0,error:200,warn:300,info:400,debug:500},vQ=(t,e,n)=>{if(t){if(Dst(dC,t))return t;Ls(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(dC))}`)}};function Pb(){}function SA(t,e,n){return!e||dC[t]>dC[n]?Pb:e[t].bind(e)}const rot={error:Pb,warn:Pb,info:Pb,debug:Pb};let bQ=new WeakMap;function Ls(t){var e;const n=t.logger,r=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return rot;const i=bQ.get(n);if(i&&i[0]===r)return i[1];const s={error:SA("error",n,r),warn:SA("warn",n,r),info:SA("info",n,r),debug:SA("debug",n,r)};return bQ.set(n,[r,s]),s}const np=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let iot=class Rb{constructor(e,n,r){this.iterator=e,this.controller=n,this.client=r}static fromSSEResponse(e,n,r){let i=!1;const s=r?Ls(r):console;function o(){return El(this,arguments,function*(){var l,c,u,f;if(i)throw new Va("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let m=!1;try{try{for(var g=!0,x=Sl(sot(e,n)),v;v=yield tn(x.next()),l=v.done,!l;g=!0){f=v.value,g=!1;const w=f;if(!m)if(w.data.startsWith("[DONE]")){m=!0;continue}else try{yield yield tn(JSON.parse(w.data))}catch(E){throw s.error("Could not parse message into JSON:",w.data),s.error("From chunk:",w.raw),E}}}catch(w){c={error:w}}finally{try{!g&&!l&&(u=x.return)&&(yield tn(u.call(x)))}finally{if(c)throw c.error}}m=!0}catch(w){if(OD(w))return yield tn(void 0);throw w}finally{m||n.abort()}})}return new Rb(o,n,r)}static fromReadableStream(e,n,r){let i=!1;function s(){return El(this,arguments,function*(){var l,c,u,f;const m=new CN,g=lhe(e);try{for(var x=!0,v=Sl(g),w;w=yield tn(v.next()),l=w.done,!l;x=!0){f=w.value,x=!1;const E=f;for(const C of m.decode(E))yield yield tn(C)}}catch(E){c={error:E}}finally{try{!x&&!l&&(u=v.return)&&(yield tn(u.call(v)))}finally{if(c)throw c.error}}for(const E of m.flush())yield yield tn(E)})}function o(){return El(this,arguments,function*(){var l,c,u,f;if(i)throw new Va("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let m=!1;try{try{for(var g=!0,x=Sl(s()),v;v=yield tn(x.next()),l=v.done,!l;g=!0){f=v.value,g=!1;const w=f;m||w&&(yield yield tn(JSON.parse(w)))}}catch(w){c={error:w}}finally{try{!g&&!l&&(u=x.return)&&(yield tn(u.call(x)))}finally{if(c)throw c.error}}m=!0}catch(w){if(OD(w))return yield tn(void 0);throw w}finally{m||n.abort()}})}return new Rb(o,n,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),i=s=>({next:()=>{if(s.length===0){const o=r.next();e.push(o),n.push(o)}return s.shift()}});return[new Rb(()=>i(e),this.controller,this.client),new Rb(()=>i(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return ahe({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:i,done:s}=await n.next();if(s)return r.close();const o=yj(JSON.stringify(i)+`
`);r.enqueue(o)}catch(i){r.error(i)}},async cancel(){var r;await((r=n.return)===null||r===void 0?void 0:r.call(n))}})}};function sot(t,e){return El(this,arguments,function*(){var r,i,s,o;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Va("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Va("Attempted to iterate over a response with no body");const a=new aot,l=new CN,c=lhe(t.body);try{for(var u=!0,f=Sl(oot(c)),m;m=yield tn(f.next()),r=m.done,!r;u=!0){o=m.value,u=!1;const g=o;for(const x of l.decode(g)){const v=a.decode(x);v&&(yield yield tn(v))}}}catch(g){i={error:g}}finally{try{!u&&!r&&(s=f.return)&&(yield tn(s.call(f)))}finally{if(i)throw i.error}}for(const g of l.flush()){const x=a.decode(g);x&&(yield yield tn(x))}})}function oot(t){return El(this,arguments,function*(){var n,r,i,s;let o=new Uint8Array;try{for(var a=!0,l=Sl(t),c;c=yield tn(l.next()),n=c.done,!n;a=!0){s=c.value,a=!1;const u=s;if(u==null)continue;const f=u instanceof ArrayBuffer?new Uint8Array(u):typeof u=="string"?yj(u):u;let m=new Uint8Array(o.length+f.length);m.set(o),m.set(f,o.length),o=m;let g;for(;(g=not(o))!==-1;)yield yield tn(o.slice(0,g)),o=o.slice(g)}}catch(u){r={error:u}}finally{try{!a&&!n&&(i=l.return)&&(yield tn(i.call(l)))}finally{if(r)throw r.error}}o.length>0&&(yield yield tn(o))})}class aot{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,i]=lot(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}function lot(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function cot(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:i,startTime:s}=e,o=await(async()=>{var a;if(e.options.stream)return Ls(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):iot.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const l=n.headers.get("content-type"),c=(a=l==null?void 0:l.split(";")[0])===null||a===void 0?void 0:a.trim();return(c==null?void 0:c.includes("application/json"))||(c==null?void 0:c.endsWith("+json"))?await n.json():await n.text()})();return Ls(t).debug(`[${r}] response parsed`,np({retryOfRequestLogID:i,url:n.url,status:n.status,body:o,durationMs:Date.now()-s})),o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xj extends Promise{constructor(e,n,r=cot){super(i=>{i(null)}),this.responsePromise=n,this.parseResponse=r,this.client=e}_thenUnwrap(e){return new xj(this.client,this.responsePromise,async(n,r)=>e(await this.parseResponse(n,r),r))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mhe=Symbol("brand.privateNullableHeaders");function*uot(t){if(!t)return;if(mhe in t){const{values:r,nulls:i}=t;yield*r.entries();for(const s of i)yield[s,null];return}let e=!1,n;t instanceof Headers?n=t.entries():pQ(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const s=pQ(r[1])?r[1]:[r[1]];let o=!1;for(const a of s)a!==void 0&&(e&&!o&&(o=!0,yield[i,null]),yield[i,a])}}const yb=t=>{const e=new Headers,n=new Set;for(const r of t){const i=new Set;for(const[s,o]of uot(r)){const a=s.toLowerCase();i.has(a)||(e.delete(s),i.add(a)),o===null?(e.delete(s),n.add(a)):(e.append(s,o),n.delete(a))}}return{[mhe]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const H5=t=>{var e,n,r,i,s,o;if(typeof globalThis.process<"u")return(r=(n=(e=OZe)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(o=(s=(i=globalThis.Deno.env)===null||i===void 0?void 0:i.get)===null||s===void 0?void 0:s.call(i,t))===null||o===void 0?void 0:o.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ghe;class NN{constructor(e){var n,r,i,s,o,a,l,{baseURL:c=H5("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:u=(n=H5("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:f="v1beta"}=e,m=uC(e,["baseURL","apiKey","apiVersion"]);const g=Object.assign(Object.assign({apiKey:u,apiVersion:f},m),{baseURL:c||"https://generativelanguage.googleapis.com"});this.baseURL=g.baseURL,this.timeout=(r=g.timeout)!==null&&r!==void 0?r:NN.DEFAULT_TIMEOUT,this.logger=(i=g.logger)!==null&&i!==void 0?i:console;const x="warn";this.logLevel=x,this.logLevel=(o=(s=vQ(g.logLevel,"ClientOptions.logLevel",this))!==null&&s!==void 0?s:vQ(H5("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&o!==void 0?o:x,this.fetchOptions=g.fetchOptions,this.maxRetries=(a=g.maxRetries)!==null&&a!==void 0?a:2,this.fetch=(l=g.fetch)!==null&&l!==void 0?l:Hst(),this.encoder=Gst,this._options=g,this.apiKey=u,this.apiVersion=f,this.clientAdapter=g.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=yb([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return yb([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return yb([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new Va(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${ag}`}defaultIdempotencyKey(){return`stainless-node-retry-${_st()}`}makeStatusError(e,n,r,i){return Ws.generate(e,n,r,i)}buildURL(e,n,r){const i=!this.baseURLOverridden()&&r||this.baseURL,s=Pst(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return Mst(o)||(n=Object.assign(Object.assign({},o),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(s.search=this.stringifyQuery(n)),s.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(i=>Object.assign({method:e,path:n},i)))}request(e,n=null){return new xj(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){var i,s,o;const a=await e,l=(i=a.maxRetries)!==null&&i!==void 0?i:this.maxRetries;n==null&&(n=l),await this.prepareOptions(a);const{req:c,url:u,timeout:f}=await this.buildRequest(a,{retryCount:l-n});await this.prepareRequest(c,{url:u,options:a});const m="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),g=r===void 0?"":`, retryOf: ${r}`,x=Date.now();if(Ls(this).debug(`[${m}] sending request`,np({retryOfRequestLogID:r,method:a.method,url:u,options:a,headers:c.headers})),!((s=a.signal)===null||s===void 0)&&s.aborted)throw new DD;const v=new AbortController,w=await this.fetchWithTimeout(u,c,f,v).catch(MD),E=Date.now();if(w instanceof globalThis.Error){const k=`retrying, ${n} attempts remaining`;if(!((o=a.signal)===null||o===void 0)&&o.aborted)throw new DD;const O=OD(w)||/timed? ?out/i.test(String(w)+("cause"in w?String(w.cause):""));if(n)return Ls(this).info(`[${m}] connection ${O?"timed out":"failed"} - ${k}`),Ls(this).debug(`[${m}] connection ${O?"timed out":"failed"} (${k})`,np({retryOfRequestLogID:r,url:u,durationMs:E-x,message:w.message})),this.retryRequest(a,n,r??m);throw Ls(this).info(`[${m}] connection ${O?"timed out":"failed"} - error; no more retries left`),Ls(this).debug(`[${m}] connection ${O?"timed out":"failed"} (error; no more retries left)`,np({retryOfRequestLogID:r,url:u,durationMs:E-x,message:w.message})),O?new Qfe:new kN({cause:w})}const C=`[${m}${g}] ${c.method} ${u} ${w.ok?"succeeded":"failed"} with status ${w.status} in ${E-x}ms`;if(!w.ok){const k=await this.shouldRetry(w);if(n&&k){const F=`retrying, ${n} attempts remaining`;return await qst(w.body),Ls(this).info(`${C} - ${F}`),Ls(this).debug(`[${m}] response error (${F})`,np({retryOfRequestLogID:r,url:w.url,status:w.status,headers:w.headers,durationMs:E-x})),this.retryRequest(a,n,r??m,w.headers)}const O=k?"error; no more retries left":"error; not retryable";Ls(this).info(`${C} - ${O}`);const j=await w.text().catch(F=>MD(F).message),R=Bst(j),U=R?void 0:j;throw Ls(this).debug(`[${m}] response error (${O})`,np({retryOfRequestLogID:r,url:w.url,status:w.status,headers:w.headers,message:U,durationMs:Date.now()-x})),this.makeStatusError(w.status,R,U,w.headers)}return Ls(this).info(C),Ls(this).debug(`[${m}] response start`,np({retryOfRequestLogID:r,url:w.url,status:w.status,headers:w.headers,durationMs:E-x})),{response:w,options:a,controller:v,requestLogID:m,retryOfRequestLogID:r,startTime:x}}async fetchWithTimeout(e,n,r,i){const s=n||{},{signal:o,method:a}=s,l=uC(s,["signal","method"]);o&&o.addEventListener("abort",()=>i.abort());const c=setTimeout(()=>i.abort(),r),u=globalThis.ReadableStream&&l.body instanceof globalThis.ReadableStream||typeof l.body=="object"&&l.body!==null&&Symbol.asyncIterator in l.body,f=Object.assign(Object.assign(Object.assign({signal:i.signal},u?{duplex:"half"}:{}),{method:"GET"}),l);a&&(f.method=a.toUpperCase());try{return await this.fetch.call(void 0,e,f)}finally{clearTimeout(c)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,i){var s;let o;const a=i==null?void 0:i.get("retry-after-ms");if(a){const c=parseFloat(a);Number.isNaN(c)||(o=c)}const l=i==null?void 0:i.get("retry-after");if(l&&!o){const c=parseFloat(l);Number.isNaN(c)?o=Date.parse(l)-Date.now():o=c*1e3}if(!(o&&0<=o&&o<60*1e3)){const c=(s=e.maxRetries)!==null&&s!==void 0?s:this.maxRetries;o=this.calculateDefaultRetryTimeoutMillis(n,c)}return await jst(o),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const s=n-e,o=Math.min(.5*Math.pow(2,s),8),a=1-Math.random()*.25;return o*a*1e3}async buildRequest(e,{retryCount:n=0}={}){var r,i,s;const o=Object.assign({},e),{method:a,path:l,query:c,defaultBaseURL:u}=o,f=this.buildURL(l,c,u);"timeout"in o&&Lst("timeout",o.timeout),o.timeout=(r=o.timeout)!==null&&r!==void 0?r:this.timeout;const{bodyHeaders:m,body:g}=this.buildBody({options:o}),x=await this.buildHeaders({options:e,method:a,bodyHeaders:m,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:a,headers:x},o.signal&&{signal:o.signal}),globalThis.ReadableStream&&g instanceof globalThis.ReadableStream&&{duplex:"half"}),g&&{body:g}),(i=this.fetchOptions)!==null&&i!==void 0?i:{}),(s=o.fetchOptions)!==null&&s!==void 0?s:{}),url:f,timeout:o.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:i}){let s={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=e.idempotencyKey);const o=await this.authHeaders(e);let a=yb([s,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),zst()),this._options.defaultHeaders,r,e.headers,o]);return this.validateHeaders(a),a.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=yb([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:Vst(e)}:this.encoder({body:e,headers:r})}}NN.DEFAULT_TIMEOUT=6e4;class zi extends NN{constructor(){super(...arguments),this.interactions=new phe(this)}}ghe=zi;zi.GeminiNextGenAPIClient=ghe;zi.GeminiNextGenAPIClientError=Va;zi.APIError=Ws;zi.APIConnectionError=kN;zi.APIConnectionTimeoutError=Qfe;zi.APIUserAbortError=DD;zi.NotFoundError=nhe;zi.ConflictError=rhe;zi.RateLimitError=she;zi.BadRequestError=Zfe;zi.AuthenticationError=ehe;zi.InternalServerError=ohe;zi.PermissionDeniedError=the;zi.UnprocessableEntityError=ihe;zi.toFile=Xst;zi.Interactions=phe;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dot(t,e){const n={},r=S(t,["name"]);return r!=null&&N(n,["_url","name"],r),n}function fot(t,e){const n={},r=S(t,["name"]);return r!=null&&N(n,["_url","name"],r),n}function hot(t,e){const n={},r=S(t,["sdkHttpResponse"]);return r!=null&&N(n,["sdkHttpResponse"],r),n}function pot(t,e){const n={},r=S(t,["sdkHttpResponse"]);return r!=null&&N(n,["sdkHttpResponse"],r),n}function mot(t,e,n){const r={};if(S(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=S(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&N(e,["displayName"],i),S(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=S(t,["epochCount"]);e!==void 0&&s!=null&&N(e,["tuningTask","hyperparameters","epochCount"],s);const o=S(t,["learningRateMultiplier"]);if(o!=null&&N(r,["tuningTask","hyperparameters","learningRateMultiplier"],o),S(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(S(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(S(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=S(t,["batchSize"]);e!==void 0&&a!=null&&N(e,["tuningTask","hyperparameters","batchSize"],a);const l=S(t,["learningRate"]);if(e!==void 0&&l!=null&&N(e,["tuningTask","hyperparameters","learningRate"],l),S(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(S(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function got(t,e,n){const r={};let i=S(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const g=S(t,["validationDataset"]);e!==void 0&&g!=null&&N(e,["supervisedTuningSpec"],wQ(g))}else if(i==="PREFERENCE_TUNING"){const g=S(t,["validationDataset"]);e!==void 0&&g!=null&&N(e,["preferenceOptimizationSpec"],wQ(g))}const s=S(t,["tunedModelDisplayName"]);e!==void 0&&s!=null&&N(e,["tunedModelDisplayName"],s);const o=S(t,["description"]);e!==void 0&&o!=null&&N(e,["description"],o);let a=S(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const g=S(t,["epochCount"]);e!==void 0&&g!=null&&N(e,["supervisedTuningSpec","hyperParameters","epochCount"],g)}else if(a==="PREFERENCE_TUNING"){const g=S(t,["epochCount"]);e!==void 0&&g!=null&&N(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],g)}let l=S(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const g=S(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&N(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],g)}else if(l==="PREFERENCE_TUNING"){const g=S(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&N(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],g)}let c=S(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const g=S(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&N(e,["supervisedTuningSpec","exportLastCheckpointOnly"],g)}else if(c==="PREFERENCE_TUNING"){const g=S(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&N(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],g)}let u=S(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const g=S(t,["adapterSize"]);e!==void 0&&g!=null&&N(e,["supervisedTuningSpec","hyperParameters","adapterSize"],g)}else if(u==="PREFERENCE_TUNING"){const g=S(t,["adapterSize"]);e!==void 0&&g!=null&&N(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],g)}if(S(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(S(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const f=S(t,["labels"]);e!==void 0&&f!=null&&N(e,["labels"],f);const m=S(t,["beta"]);return e!==void 0&&m!=null&&N(e,["preferenceOptimizationSpec","hyperParameters","beta"],m),r}function yot(t,e){const n={},r=S(t,["baseModel"]);r!=null&&N(n,["baseModel"],r);const i=S(t,["preTunedModel"]);i!=null&&N(n,["preTunedModel"],i);const s=S(t,["trainingDataset"]);s!=null&&Not(s);const o=S(t,["config"]);return o!=null&&mot(o,n),n}function xot(t,e){const n={},r=S(t,["baseModel"]);r!=null&&N(n,["baseModel"],r);const i=S(t,["preTunedModel"]);i!=null&&N(n,["preTunedModel"],i);const s=S(t,["trainingDataset"]);s!=null&&_ot(s,n,e);const o=S(t,["config"]);return o!=null&&got(o,n,e),n}function vot(t,e){const n={},r=S(t,["name"]);return r!=null&&N(n,["_url","name"],r),n}function bot(t,e){const n={},r=S(t,["name"]);return r!=null&&N(n,["_url","name"],r),n}function wot(t,e,n){const r={},i=S(t,["pageSize"]);e!==void 0&&i!=null&&N(e,["_query","pageSize"],i);const s=S(t,["pageToken"]);e!==void 0&&s!=null&&N(e,["_query","pageToken"],s);const o=S(t,["filter"]);return e!==void 0&&o!=null&&N(e,["_query","filter"],o),r}function Eot(t,e,n){const r={},i=S(t,["pageSize"]);e!==void 0&&i!=null&&N(e,["_query","pageSize"],i);const s=S(t,["pageToken"]);e!==void 0&&s!=null&&N(e,["_query","pageToken"],s);const o=S(t,["filter"]);return e!==void 0&&o!=null&&N(e,["_query","filter"],o),r}function Sot(t,e){const n={},r=S(t,["config"]);return r!=null&&wot(r,n),n}function Aot(t,e){const n={},r=S(t,["config"]);return r!=null&&Eot(r,n),n}function Tot(t,e){const n={},r=S(t,["sdkHttpResponse"]);r!=null&&N(n,["sdkHttpResponse"],r);const i=S(t,["nextPageToken"]);i!=null&&N(n,["nextPageToken"],i);const s=S(t,["tunedModels"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>yhe(a))),N(n,["tuningJobs"],o)}return n}function kot(t,e){const n={},r=S(t,["sdkHttpResponse"]);r!=null&&N(n,["sdkHttpResponse"],r);const i=S(t,["nextPageToken"]);i!=null&&N(n,["nextPageToken"],i);const s=S(t,["tuningJobs"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>jD(a))),N(n,["tuningJobs"],o)}return n}function Cot(t,e){const n={},r=S(t,["name"]);r!=null&&N(n,["model"],r);const i=S(t,["name"]);return i!=null&&N(n,["endpoint"],i),n}function Not(t,e){const n={};if(S(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(S(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=S(t,["examples"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),N(n,["examples","examples"],i)}return n}function _ot(t,e,n){const r={};let i=S(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const o=S(t,["gcsUri"]);e!==void 0&&o!=null&&N(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(i==="PREFERENCE_TUNING"){const o=S(t,["gcsUri"]);e!==void 0&&o!=null&&N(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}let s=S(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const o=S(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&N(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(s==="PREFERENCE_TUNING"){const o=S(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&N(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}if(S(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function yhe(t,e){const n={},r=S(t,["sdkHttpResponse"]);r!=null&&N(n,["sdkHttpResponse"],r);const i=S(t,["name"]);i!=null&&N(n,["name"],i);const s=S(t,["state"]);s!=null&&N(n,["state"],Ofe(s));const o=S(t,["createTime"]);o!=null&&N(n,["createTime"],o);const a=S(t,["tuningTask","startTime"]);a!=null&&N(n,["startTime"],a);const l=S(t,["tuningTask","completeTime"]);l!=null&&N(n,["endTime"],l);const c=S(t,["updateTime"]);c!=null&&N(n,["updateTime"],c);const u=S(t,["description"]);u!=null&&N(n,["description"],u);const f=S(t,["baseModel"]);f!=null&&N(n,["baseModel"],f);const m=S(t,["_self"]);return m!=null&&N(n,["tunedModel"],Cot(m)),n}function jD(t,e){const n={},r=S(t,["sdkHttpResponse"]);r!=null&&N(n,["sdkHttpResponse"],r);const i=S(t,["name"]);i!=null&&N(n,["name"],i);const s=S(t,["state"]);s!=null&&N(n,["state"],Ofe(s));const o=S(t,["createTime"]);o!=null&&N(n,["createTime"],o);const a=S(t,["startTime"]);a!=null&&N(n,["startTime"],a);const l=S(t,["endTime"]);l!=null&&N(n,["endTime"],l);const c=S(t,["updateTime"]);c!=null&&N(n,["updateTime"],c);const u=S(t,["error"]);u!=null&&N(n,["error"],u);const f=S(t,["description"]);f!=null&&N(n,["description"],f);const m=S(t,["baseModel"]);m!=null&&N(n,["baseModel"],m);const g=S(t,["tunedModel"]);g!=null&&N(n,["tunedModel"],g);const x=S(t,["preTunedModel"]);x!=null&&N(n,["preTunedModel"],x);const v=S(t,["supervisedTuningSpec"]);v!=null&&N(n,["supervisedTuningSpec"],v);const w=S(t,["preferenceOptimizationSpec"]);w!=null&&N(n,["preferenceOptimizationSpec"],w);const E=S(t,["tuningDataStats"]);E!=null&&N(n,["tuningDataStats"],E);const C=S(t,["encryptionSpec"]);C!=null&&N(n,["encryptionSpec"],C);const k=S(t,["partnerModelTuningSpec"]);k!=null&&N(n,["partnerModelTuningSpec"],k);const O=S(t,["customBaseModel"]);O!=null&&N(n,["customBaseModel"],O);const j=S(t,["experiment"]);j!=null&&N(n,["experiment"],j);const R=S(t,["labels"]);R!=null&&N(n,["labels"],R);const U=S(t,["outputUri"]);U!=null&&N(n,["outputUri"],U);const V=S(t,["pipelineJob"]);V!=null&&N(n,["pipelineJob"],V);const F=S(t,["serviceAccount"]);F!=null&&N(n,["serviceAccount"],F);const $=S(t,["tunedModelDisplayName"]);$!=null&&N(n,["tunedModelDisplayName"],$);const K=S(t,["veoTuningSpec"]);return K!=null&&N(n,["veoTuningSpec"],K),n}function Iot(t,e){const n={},r=S(t,["sdkHttpResponse"]);r!=null&&N(n,["sdkHttpResponse"],r);const i=S(t,["name"]);i!=null&&N(n,["name"],i);const s=S(t,["metadata"]);s!=null&&N(n,["metadata"],s);const o=S(t,["done"]);o!=null&&N(n,["done"],o);const a=S(t,["error"]);return a!=null&&N(n,["error"],a),n}function wQ(t,e){const n={},r=S(t,["gcsUri"]);r!=null&&N(n,["validationDatasetUri"],r);const i=S(t,["vertexDatasetResource"]);return i!=null&&N(n,["validationDatasetUri"],i),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Pot extends Id{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Lm(yd.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const i={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(i.checkpointId=n.config.preTunedModelCheckpointId);const s=Object.assign(Object.assign({},n),{preTunedModel:i});return s.baseModel=void 0,await this.tuneInternal(s)}else{const i=Object.assign({},n);return await this.tuneInternal(i)}else{const i=Object.assign({},n),s=await this.tuneMldevInternal(i);let o="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?o=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(o=s.name.split("/operations/")[0]),{name:o,state:kD.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=bot(e);return a=yt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>jD(u))}else{const c=vot(e);return a=yt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>yhe(u))}}async listInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Aot(e);return a=yt("tuningJobs",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const f=kot(u),m=new KX;return Object.assign(m,f),m})}else{const c=Sot(e);return a=yt("tunedModels",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const f=Tot(u),m=new KX;return Object.assign(m,f),m})}}async cancel(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=fot(e);return a=yt("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const f=pot(u),m=new WX;return Object.assign(m,f),m})}else{const c=dot(e);return a=yt("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const f=hot(u),m=new WX;return Object.assign(m,f),m})}}async tuneInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=xot(e,e);return s=yt("tuningJobs",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),i.then(l=>jD(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=yot(e);return s=yt("tunedModels",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),i.then(l=>Iot(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Rot{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Oot=1024*1024*8,Mot=3,Dot=1e3,Lot=2,fC="x-goog-upload-status";async function Bot(t,e,n){var r;const i=await xhe(t,e,n),s=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[fC])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return s.file}async function jot(t,e,n){var r;const i=await xhe(t,e,n),s=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[fC])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const o=Cfe(s),a=new dj;return Object.assign(a,o),a}async function xhe(t,e,n){var r,i;let s=0,o=0,a=new CD(new Response),l="upload";for(s=t.size;o<s;){const c=Math.min(Oot,s-o),u=t.slice(o,o+c);o+c>=s&&(l+=", finalize");let f=0,m=Dot;for(;f<Mot&&(a=await n.request({path:"",body:u,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(o),"Content-Length":String(c)}}}),!(!((r=a==null?void 0:a.headers)===null||r===void 0)&&r[fC]));)f++,await Fot(m),m=m*Lot;if(o+=c,((i=a==null?void 0:a.headers)===null||i===void 0?void 0:i[fC])!=="active")break;if(s<=o)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}async function Uot(t){return{size:t.size,type:t.type}}function Fot(t){return new Promise(e=>setTimeout(e,t))}class $ot{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Bot(e,n,r)}async uploadToFileSearchStore(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await jot(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Uot(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zot{create(e,n,r){return new Hot(e,n,r)}}class Hot{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const EQ="x-goog-api-key";class Vot{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(EQ)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(EQ,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qot="gl-node/";class vhe{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new zi({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=BZe(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const i=new Vot(this.apiKey);this.apiClient=new jit({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:qot+"web",uploader:new $ot,downloader:new Rot}),this.models=new rst(this.apiClient),this.live=new Xit(this.apiClient,i,new zot),this.batches=new ptt(this.apiClient),this.chats=new Ytt(this.models,this.apiClient),this.caches=new Gtt(this.apiClient),this.files=new snt(this.apiClient),this.operations=new ist(this.apiClient),this.authTokens=new bst(this.apiClient),this.tunings=new Pot(this.apiClient),this.fileSearchStores=new Nst(this.apiClient)}}const bhe={inputPricePerMillion:.15,outputPricePerMillion:.6,customModelPricing:{"gemini-3-flash-preview":{input:.15,output:.6},"gemini-2.5-pro":{input:1.25,output:10},"gemini-2.5-flash":{input:.15,output:.6},"gemini-2.5-flash-lite":{input:.075,output:.3},"gemini-2.0-flash":{input:.1,output:.4},"gemini-2.0-flash-lite":{input:.075,output:.3}}},SQ={records:[],pricing:bhe},AQ="token_usage_store";class Got{constructor(){this.isInitialized=!1,this.initPromise=null,this.state=SQ,this.listeners=new Set,this.initPromise=this.initialize()}async initialize(){this.isInitialized||(await this.loadState(),this.isInitialized=!0,this.notifyListeners())}async waitForInit(){this.initPromise&&await this.initPromise}async loadState(){try{const e=await Ie.getItem(Ie.getUserKey(AQ));if(e){const n=JSON.parse(e);this.state={...SQ,...n,pricing:{...bhe,...n.pricing||{}}}}}catch(e){console.error("[TokenUsageStore] Failed to load state:",e)}}async saveState(){try{await Ie.setItem(Ie.getUserKey(AQ),JSON.stringify(this.state))}catch(e){console.error("[TokenUsageStore] Failed to save state:",e)}}notifyListeners(){this.listeners.forEach(e=>e())}notify(){this.notifyListeners(),this.saveState()}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}getSnapshot(){return this.state}addRecord(e){const r=[{...e,id:Date.now().toString()+Math.random().toString().slice(2,6),timestamp:Date.now()},...this.state.records].slice(0,1e3);this.state={...this.state,records:r},this.notify(),console.log(`[TokenUsageStore] Recorded: ${e.source} ${e.operation} - In: ${e.inputTokens}, Out: ${e.outputTokens}`)}updatePricing(e){this.state={...this.state,pricing:{...this.state.pricing,...e}},this.notify()}clearHistory(){this.state={...this.state,records:[]},this.notify()}calculateCost(e,n,r){var s;const i=this.state.pricing;if(r&&((s=i.customModelPricing)!=null&&s[r])){const o=i.customModelPricing[r];return e*o.input/1e6+n*o.output/1e6}return e*i.inputPricePerMillion/1e6+n*i.outputPricePerMillion/1e6}getStats(){var l;const e=this.state.records,n=new Date,r=new Date(n.getFullYear(),n.getMonth(),n.getDate()).getTime(),i=new Date(n.getFullYear(),n.getMonth(),1).getTime(),s={totalInputTokens:0,totalOutputTokens:0,totalCost:0,bySource:{MANAGER:{input:0,output:0,cost:0,count:0},DEALER:{input:0,output:0,cost:0,count:0},POLYMARKET_DEALER:{input:0,output:0,cost:0,count:0}},byOperation:{},today:{input:0,output:0,cost:0},thisMonth:{input:0,output:0,cost:0},dealerMetrics:{avgTokensPerCoin:0,avgTokensPerCycle:0,totalCoinsAnalyzed:0},managerMetrics:{avgTokensPerQuery:0,totalQueries:0}};let o=0,a=0;for(const c of e){const u=this.calculateCost(c.inputTokens,c.outputTokens,c.model);s.totalInputTokens+=c.inputTokens,s.totalOutputTokens+=c.outputTokens,s.totalCost+=u,s.bySource[c.source].input+=c.inputTokens,s.bySource[c.source].output+=c.outputTokens,s.bySource[c.source].cost+=u,s.bySource[c.source].count++,s.byOperation[c.operation]||(s.byOperation[c.operation]={input:0,output:0,cost:0,count:0}),s.byOperation[c.operation].input+=c.inputTokens,s.byOperation[c.operation].output+=c.outputTokens,s.byOperation[c.operation].cost+=u,s.byOperation[c.operation].count++,c.timestamp>=r&&(s.today.input+=c.inputTokens,s.today.output+=c.outputTokens,s.today.cost+=u),c.timestamp>=i&&(s.thisMonth.input+=c.inputTokens,s.thisMonth.output+=c.outputTokens,s.thisMonth.cost+=u),c.source==="DEALER"&&(o+=c.inputTokens+c.outputTokens,a++,(l=c.metadata)!=null&&l.coinsAnalyzed&&(s.dealerMetrics.totalCoinsAnalyzed+=c.metadata.coinsAnalyzed)),c.source==="MANAGER"&&s.managerMetrics.totalQueries++}if(s.dealerMetrics.totalCoinsAnalyzed>0&&(s.dealerMetrics.avgTokensPerCoin=o/s.dealerMetrics.totalCoinsAnalyzed),a>0&&(s.dealerMetrics.avgTokensPerCycle=o/a),s.managerMetrics.totalQueries>0){const c=s.bySource.MANAGER.input+s.bySource.MANAGER.output;s.managerMetrics.avgTokensPerQuery=c/s.managerMetrics.totalQueries}return s}getRecords(e=50,n){let r=this.state.records;return n&&(r=r.filter(i=>i.source===n)),r.slice(0,e)}}const js=new Got,Yg={gemini:[{id:"gemini-3-flash-preview",name:"Gemini 3 Flash Preview",description:"Next generation (Preview)",inputPricePerMillion:.1,outputPricePerMillion:.4},{id:"gemini-2.5-flash",name:"Gemini 2.5 Flash",description:"Fast & balanced",inputPricePerMillion:.15,outputPricePerMillion:.6},{id:"gemini-2.5-pro",name:"Gemini 2.5 Pro",description:"Most capable",inputPricePerMillion:1.25,outputPricePerMillion:10},{id:"gemini-2.5-flash-lite",name:"Gemini 2.5 Flash-Lite",description:"Lightweight",inputPricePerMillion:.075,outputPricePerMillion:.3},{id:"gemini-2.0-flash",name:"Gemini 2.0 Flash",description:"Stable",inputPricePerMillion:.1,outputPricePerMillion:.4},{id:"gemini-2.0-flash-lite",name:"Gemini 2.0 Flash-Lite",description:"Economy",inputPricePerMillion:.075,outputPricePerMillion:.3}],openai:[{id:"gpt-4o",name:"GPT-4o",description:"Most capable",inputPricePerMillion:2.5,outputPricePerMillion:10},{id:"gpt-4o-mini",name:"GPT-4o Mini",description:"Fast & affordable",inputPricePerMillion:.15,outputPricePerMillion:.6},{id:"gpt-4-turbo",name:"GPT-4 Turbo",description:"Stable",inputPricePerMillion:10,outputPricePerMillion:30},{id:"o1-mini",name:"o1-mini",description:"Reasoning model",inputPricePerMillion:3,outputPricePerMillion:12}],claude:[{id:"claude-sonnet-4-20250514",name:"Claude Sonnet 4",description:"Latest & fastest",inputPricePerMillion:3,outputPricePerMillion:15},{id:"claude-3-5-sonnet-20241022",name:"Claude 3.5 Sonnet",description:"Previous gen",inputPricePerMillion:3,outputPricePerMillion:15},{id:"claude-3-opus-20240229",name:"Claude 3 Opus",description:"Most capable",inputPricePerMillion:15,outputPricePerMillion:75},{id:"claude-3-haiku-20240307",name:"Claude 3 Haiku",description:"Economy",inputPricePerMillion:.25,outputPricePerMillion:1.25}]},ql={gemini:{name:"Google Gemini",icon:"",color:"#4285F4",keyUrl:"https://aistudio.google.com/apikey"},openai:{name:"OpenAI",icon:"",color:"#10A37F",keyUrl:"https://platform.openai.com/api-keys"},claude:{name:"Anthropic Claude",icon:"",color:"#D97757",keyUrl:"https://console.anthropic.com/settings/keys"}},Kot={gemini:{minIntervalMs:5e3,maxRetries:5,baseBackoffMs:5e3,maxBackoffMs:12e4,jitterMs:1e3},openai:{minIntervalMs:500,maxRetries:3,baseBackoffMs:1e3,maxBackoffMs:3e4,jitterMs:500},claude:{minIntervalMs:500,maxRetries:3,baseBackoffMs:1e3,maxBackoffMs:3e4,jitterMs:500}},TQ={CRITICAL:100,HIGH:75,NORMAL:50,LOW:25};class Sg{constructor(){this.queue=[],this.isProcessing=!1,this.lastRequestTime=0,this.consecutiveRateLimits=0,this.blockedUntil=0,this.successCount=0,this.failureCount=0,this.totalWaitTimeMs=0,this.requestCount=0,this.config={minIntervalMs:5e3,maxRetries:5,baseBackoffMs:5e3,maxBackoffMs:12e4,jitterMs:1e3},console.log("[AIRequestQueue]  Initialized global request queue")}static getInstance(){return Sg.instance||(Sg.instance=new Sg),Sg.instance}setConfig(e){const n=Kot[e];n&&(this.config={...n},console.log(`[AIRequestQueue]  Config updated for provider: ${e}`))}enqueue(e){return new Promise((n,r)=>{const i=this.generateId(),s={id:i,priority:e.priority,source:e.source,execute:e.execute,resolve:n,reject:r,timestamp:Date.now(),retries:0,provider:e.provider||"gemini"};this.insertByPriority(s);const o=this.queue.findIndex(a=>a.id===i)+1;console.log(`[AIRequestQueue]  Queued request #${i.slice(-6)} (position: ${o}, priority: ${e.priority}, source: ${e.source})`),this.isProcessing||this.processQueue()})}insertByPriority(e){const n=TQ[e.priority];let r=this.queue.length;for(let i=0;i<this.queue.length;i++){const s=TQ[this.queue[i].priority];if(n>s){r=i;break}}this.queue.splice(r,0,e)}async processQueue(){if(!this.isProcessing){for(this.isProcessing=!0,console.log("[AIRequestQueue]  Starting queue processing");this.queue.length>0;){const e=this.queue.shift();try{await this.waitForSlot();const n=Date.now(),r=await this.executeWithRetry(e),i=Date.now()-e.timestamp;this.successCount++,this.totalWaitTimeMs+=i,this.requestCount++,this.consecutiveRateLimits=0,console.log(`[AIRequestQueue]  Request #${e.id.slice(-6)} completed (wait: ${(i/1e3).toFixed(1)}s)`),e.resolve(r)}catch(n){this.failureCount++,console.error(`[AIRequestQueue]  Request #${e.id.slice(-6)} failed:`,n.message),e.reject(n)}}this.isProcessing=!1,console.log("[AIRequestQueue]  Queue empty, processing stopped")}}async executeWithRetry(e){let n;for(let r=0;r<=this.config.maxRetries;r++)try{return r>0&&console.log(`[AIRequestQueue]  Retry attempt ${r}/${this.config.maxRetries} for #${e.id.slice(-6)}`),await e.execute()}catch(i){if(n=i,this.isRateLimitError(i)){const o=this.parseRetryDelay(i);if(this.handleRateLimit(o),r<this.config.maxRetries){await this.waitForSlot();continue}}if(r===this.config.maxRetries)break;const s=this.calculateBackoff(r);console.log(`[AIRequestQueue]  Waiting ${(s/1e3).toFixed(1)}s before retry...`),await this.sleep(s)}throw n}async waitForSlot(){const e=Date.now();if(this.blockedUntil>e){const l=this.blockedUntil-e;console.log(`[AIRequestQueue]  Rate limited, waiting ${(l/1e3).toFixed(1)}s...`),await this.sleep(l)}const n=Math.pow(2,Math.min(this.consecutiveRateLimits,6)),r=this.config.minIntervalMs*n,i=Math.min(r,this.config.maxBackoffMs),s=Math.random()*this.config.jitterMs,o=i+s,a=e-this.lastRequestTime;if(a<o){const l=o-a;this.consecutiveRateLimits>0&&console.log(`[AIRequestQueue]  Throttling: waiting ${(l/1e3).toFixed(1)}s (backoff level: ${this.consecutiveRateLimits})...`),await this.sleep(l)}this.lastRequestTime=Date.now()}handleRateLimit(e){this.consecutiveRateLimits++;const n=Math.min(this.config.baseBackoffMs+Math.pow(2,this.consecutiveRateLimits)*5e3,this.config.maxBackoffMs);this.blockedUntil=Date.now()+e*1e3+n;const r=e+Math.ceil(n/1e3);console.log(`[AIRequestQueue]  Rate limited (hit #${this.consecutiveRateLimits}). Blocked for ${r}s`)}calculateBackoff(e){const n=this.config.baseBackoffMs*Math.pow(2,e),r=Math.random()*this.config.jitterMs;return Math.min(n+r,this.config.maxBackoffMs)}isRateLimitError(e){const n=typeof e=="string"?e:JSON.stringify(e);return n.includes("429")||n.includes("RESOURCE_EXHAUSTED")||n.includes("Too Many Requests")||n.includes("quota")||n.includes("rate_limit")||n.includes("rate limit")}parseRetryDelay(e){try{const n=typeof e=="string"?e:JSON.stringify(e),r=n.match(/retry in (\d+\.?\d*)s/i);if(r)return Math.ceil(parseFloat(r[1]));const i=n.match(/"retryDelay"\s*:\s*"(\d+)s?"/i);if(i)return parseInt(i[1]);const s=n.match(/retry-after[:\s]+(\d+)/i);if(s)return parseInt(s[1])}catch{}return 30}generateId(){return`req_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}sleep(e){return new Promise(n=>setTimeout(n,e))}getMetrics(){return{queueLength:this.queue.length,avgWaitTimeMs:this.requestCount>0?this.totalWaitTimeMs/this.requestCount:0,successCount:this.successCount,failureCount:this.failureCount,lastRequestTime:this.lastRequestTime,consecutiveRateLimits:this.consecutiveRateLimits,isProcessing:this.isProcessing}}clear(){const e=this.queue.length;this.queue.forEach(n=>{n.reject(new Error("Queue cleared"))}),this.queue=[],console.log(`[AIRequestQueue]  Cleared ${e} pending requests`)}resetMetrics(){this.successCount=0,this.failureCount=0,this.totalWaitTimeMs=0,this.requestCount=0,console.log("[AIRequestQueue]  Metrics reset")}}const uo=Sg.getInstance();class Wot{constructor(){this.providerType="gemini",this.client=null,this.modelName="gemini-2.5-flash"}isInitialized(){return this.client!==null}initialize(e){this.client=new vhe({apiKey:e})}setModel(e){this.modelName=e}getModel(){return this.modelName}getTools(){const e={name:"getVaultBalance",description:"Get the balance of the internal Vault Wallet. Can show all balances or a specific token balance.",parameters:{type:Be.OBJECT,properties:{token:{type:Be.STRING,description:"Optional: Symbol or Mint Address of specific token to check."}}}},n={name:"executeSwap",description:"Execute a token swap on Raydium Devnet.",parameters:{type:Be.OBJECT,properties:{inputToken:{type:Be.STRING,description:"Symbol or Mint Address of token to sell"},outputToken:{type:Be.STRING,description:"Symbol or Mint Address of token to buy"},amount:{type:Be.NUMBER,description:"Amount of input token to swap"}},required:["inputToken","outputToken","amount"]}},r={name:"withdrawSol",description:"Transfer SOL from the internal Vault to the connected Owner Wallet.",parameters:{type:Be.OBJECT,properties:{amount:{type:Be.NUMBER,description:"Amount of SOL to transfer"}},required:["amount"]}},i={name:"transferToken",description:"Transfer SPL tokens or NFTs from the Vault to the Owner Wallet.",parameters:{type:Be.OBJECT,properties:{tokenMint:{type:Be.STRING,description:"Mint address of the token to transfer"},amount:{type:Be.NUMBER,description:"Amount of tokens to transfer"}},required:["tokenMint","amount"]}},s={name:"getMarketPrice",description:"Get the current market price for a given symbol.",parameters:{type:Be.OBJECT,properties:{symbol:{type:Be.STRING,description:'Trading symbol (e.g., "BTCUSDT")'}},required:["symbol"]}},o={name:"getOHLCV",description:"Get OHLCV candlestick data for a symbol.",parameters:{type:Be.OBJECT,properties:{symbol:{type:Be.STRING,description:"Trading symbol"},timeframe:{type:Be.STRING,description:'Timeframe (e.g., "1", "5", "15", "60", "240", "D")'}},required:["symbol"]}},a={name:"getIndicator",description:"Get a specific technical indicator value for a symbol.",parameters:{type:Be.OBJECT,properties:{symbol:{type:Be.STRING,description:"Trading symbol"},indicator:{type:Be.STRING,description:'Indicator name: "rsi", "macd", "ema", "sma", "stoch"'},timeframe:{type:Be.STRING,description:"Timeframe"}},required:["symbol","indicator"]}},l={name:"getTradingViewSummary",description:"Get TradingView buy/sell/neutral recommendation summary.",parameters:{type:Be.OBJECT,properties:{symbol:{type:Be.STRING,description:"Trading symbol"}},required:["symbol"]}},c={name:"getHLBalance",description:"Get the balance of the Hyperliquid Vault and positions.",parameters:{type:Be.OBJECT,properties:{}}},u={name:"getHLPositions",description:"Get open positions in the Hyperliquid Vault.",parameters:{type:Be.OBJECT,properties:{}}},f={name:"getHLMarketData",description:"Get market data for a Hyperliquid asset.",parameters:{type:Be.OBJECT,properties:{coin:{type:Be.STRING,description:'Asset symbol (e.g., "BTC", "ETH")'}},required:["coin"]}},m={name:"createHLOrder",description:"Place an order on Hyperliquid Testnet.",parameters:{type:Be.OBJECT,properties:{coin:{type:Be.STRING,description:"Asset symbol"},isBuy:{type:Be.BOOLEAN,description:"True for LONG, False for SHORT"},size:{type:Be.NUMBER,description:"Size of the order"},usdcAmount:{type:Be.NUMBER,description:"Amount in USDC to spend"},orderType:{type:Be.STRING,description:'Order type: "limit", "market"'},price:{type:Be.NUMBER,description:"Limit price"},leverage:{type:Be.NUMBER,description:"Leverage multiplier (1-50)"},stopLoss:{type:Be.NUMBER,description:"Stop loss price"},takeProfit:{type:Be.NUMBER,description:"Take profit price"},reduceOnly:{type:Be.BOOLEAN,description:"True to only reduce existing position"}},required:["coin","isBuy","orderType"]}},g={name:"cancelHLOrder",description:"Cancel a specific order on Hyperliquid.",parameters:{type:Be.OBJECT,properties:{coin:{type:Be.STRING,description:"Asset symbol"},orderId:{type:Be.NUMBER,description:"Order ID to cancel"}},required:["coin","orderId"]}},x={name:"updateHLLeverage",description:"Update leverage for a specific asset on Hyperliquid.",parameters:{type:Be.OBJECT,properties:{coin:{type:Be.STRING,description:"Asset symbol"},leverage:{type:Be.NUMBER,description:"New leverage (1-50)"},isCross:{type:Be.BOOLEAN,description:"True for cross margin"}},required:["coin","leverage","isCross"]}},v={name:"closeHLPosition",description:"Close an open position on Hyperliquid.",parameters:{type:Be.OBJECT,properties:{coin:{type:Be.STRING,description:"Asset symbol"},size:{type:Be.NUMBER,description:"Optional: partial close size"},orderType:{type:Be.STRING,description:'Order type: "market" or "limit"'},price:{type:Be.NUMBER,description:"Price for limit orders"}},required:["coin","orderType"]}},w={name:"withdrawFromHL",description:"Execute a USDC withdrawal from Hyperliquid Testnet.",parameters:{type:Be.OBJECT,properties:{amount:{type:Be.NUMBER,description:"Amount of USDC to withdraw"}},required:["amount"]}},E={name:"getDealerTradeHistory",description:"Query the Hyperliquid Dealer's trade history and AI reasoning.",parameters:{type:Be.OBJECT,properties:{coin:{type:Be.STRING,description:"Optional: Filter by coin"},limit:{type:Be.NUMBER,description:"Max records to return (default 10)"},includeReasoning:{type:Be.BOOLEAN,description:"Include full AI reasoning"}}}},C={name:"scheduleTask",description:"Schedule a task to execute at a specific time or when a market condition is met.",parameters:{type:Be.OBJECT,properties:{taskType:{type:Be.STRING,description:"Type: SWAP, TRANSFER, ALERT, or HL_ORDER"},inputToken:{type:Be.STRING,description:"For SWAP/TRANSFER: Input token"},outputToken:{type:Be.STRING,description:"For SWAP: Output token"},amount:{type:Be.NUMBER,description:"Amount to swap or transfer"},coin:{type:Be.STRING,description:"For HL_ORDER: Asset symbol"},isBuy:{type:Be.BOOLEAN,description:"For HL_ORDER: True for LONG"},size:{type:Be.NUMBER,description:"For HL_ORDER: Order size"},orderType:{type:Be.STRING,description:"For HL_ORDER: Order type"},price:{type:Be.NUMBER,description:"For HL_ORDER: Limit price"},leverage:{type:Be.NUMBER,description:"For HL_ORDER: Leverage"},stopLoss:{type:Be.NUMBER,description:"For HL_ORDER: Stop loss"},takeProfit:{type:Be.NUMBER,description:"For HL_ORDER: Take profit"},reduceOnly:{type:Be.BOOLEAN,description:"For HL_ORDER: Reduce only"},delayMinutes:{type:Be.NUMBER,description:"For time-based: Delay in minutes"},conditionIndicator:{type:Be.STRING,description:"For condition-based: Indicator name"},conditionSymbol:{type:Be.STRING,description:"For condition-based: Trading symbol"},conditionOperator:{type:Be.STRING,description:"For condition-based: Comparison operator"},conditionValue:{type:Be.NUMBER,description:"For condition-based: Threshold value"},conditionTimeframe:{type:Be.STRING,description:"For condition-based: Timeframe"}},required:["taskType"]}};return[{functionDeclarations:[e,n,r,i,C,s,o,a,l,c,u,f,m,g,x,v,w,E]}]}async sendMessage(e,n,r,i){if(!this.client)throw new Error("Gemini not initialized. Please set API Key.");const s=this.client,o=this.modelName,a=()=>this.getTools();return uo.enqueue({priority:"HIGH",source:"operator",provider:"gemini",execute:async()=>{var m,g,x;const l=e.map(v=>({role:v.role==="model"?"model":"user",parts:[{text:v.content}]})),u=await s.chats.create({model:o,config:{systemInstruction:r,tools:i||a()},history:l}).sendMessage({message:n});let f="";if(u.candidates&&((g=(m=u.candidates[0])==null?void 0:m.content)!=null&&g.parts))for(const v of u.candidates[0].content.parts)v.text&&(f+=v.text);return{text:f,usageMetadata:u.usageMetadata?{promptTokenCount:u.usageMetadata.promptTokenCount||0,candidatesTokenCount:u.usageMetadata.candidatesTokenCount||0}:void 0,functionCalls:((x=u.functionCalls)==null?void 0:x.map(v=>({name:v.name,args:v.args})))||void 0}}})}async sendJsonAnalysis(e,n){if(!this.client)return console.warn("[GeminiProvider] Client not initialized"),null;const r=this.client,i=this.modelName;return uo.enqueue({priority:"NORMAL",source:"polymarketDealer",provider:"gemini",execute:async()=>{var l,c;const o=await r.chats.create({model:i,config:{systemInstruction:n,responseMimeType:"application/json"}}).sendMessage({message:e});let a="";if(o.candidates&&((c=(l=o.candidates[0])==null?void 0:l.content)!=null&&c.parts))for(const u of o.candidates[0].content.parts)u.text&&(a+=u.text);return a||null}})}async sendBatchAnalysis(e,n,r){if(!this.client)throw new Error("Gemini not initialized. Please set API Key.");if(r!=null&&r.aborted)throw new DOMException("Dealer cycle aborted","AbortError");const i=this.client,s=this.modelName,o=this.getBatchDealerSystemInstruction(),a=(u,f,m)=>this.normalizeDecisions(u,f,m),l=e.cycleSummary?`
[RECENT ACTIVITY CONTEXT]
${e.cycleSummary}
`:"",c=`
            [USER STRATEGY]
            ${n}
            ${l}
            [BATCH MARKET DATA]
            ${JSON.stringify(e)}

            Analyze all assets in the batch. Return a JSON Array of decisions.
        `;return uo.enqueue({priority:"NORMAL",source:"hyperliquidDealer",provider:"gemini",execute:async()=>{var v,w;if(r!=null&&r.aborted)throw new DOMException("Dealer cycle aborted","AbortError");const f=await i.chats.create({model:s,config:{systemInstruction:o,responseMimeType:"application/json"}}).sendMessage({message:c});if(r!=null&&r.aborted)throw new DOMException("Dealer cycle aborted","AbortError");let m="";if(f.candidates&&((w=(v=f.candidates[0])==null?void 0:v.content)!=null&&w.parts))for(const E of f.candidates[0].content.parts)E.text&&(m+=E.text);if(!m)return console.warn("[GeminiProvider] Empty response from batch analysis"),{decisions:[]};const g=m.replace(/```json/g,"").replace(/```/g,"").trim();let x;try{x=JSON.parse(g)}catch(E){return console.error("[GeminiProvider] Failed to parse batch response:",E),{decisions:[]}}return a(x,f.usageMetadata,e)}})}normalizeDecisions(e,n,r){let i=[],s;Array.isArray(e)?i=e:typeof e=="object"&&(e.decisions?i=e.decisions:i=[e],e.cycleSummary&&typeof e.cycleSummary=="string"&&(s=e.cycleSummary.slice(0,350)));const a=i.map(u=>u.action==="LONG"?{...u,action:"BUY"}:u.action==="SHORT"?{...u,action:"SELL"}:u.action==="WAIT"?{...u,action:"HOLD"}:u).filter(u=>{const f=typeof u.coin=="string"&&u.coin.length>0,m=["BUY","SELL","HOLD","CLOSE"].includes(u.action);return f&&m}),l=new Map,c={CLOSE:3,BUY:2,SELL:2,HOLD:1};for(const u of a){const f=u.coin.toUpperCase(),m=l.get(f);if(!m)l.set(f,u);else{const g=c[m.action]||0,x=c[u.action]||0;(x>g||x===g&&(u.confidence||0)>(m.confidence||0))&&l.set(f,u)}}return{decisions:Array.from(l.values()),cycleSummary:s}}getBatchDealerSystemInstruction(){return`
            You are Hyperliquid Dealer, an autonomous crypto trading engine.
            Your goal is to analyze specific assets and output a TRADING DECISION for EACH one.

            You will receive:
            1. A JSON Object containing an array of 'coins' with their Market Data (Price, Indicators) AND HISTORICAL SERIES.
            2. Portfolio Context (Balance, Open Positions, Risk Limits, userFees with makerFee/takerFee).
            3. PRE-CALCULATED DIVERGENCE SIGNALS: Each coin includes a 'divergences' array with detected divergence patterns.
            4. [RECENT ACTIVITY CONTEXT]: Summary of your previous analysis cycles (if available).

            You must return valid JSON with this EXACT structure:
            {
                "decisions": [
                    {
                        "coin": "Symbol analyzed",
                        "action": "BUY" | "SELL" | "HOLD" | "CLOSE",
                        "confidence": number (0.0 to 1.0),
                        "reason": "Format: [ACTION] Position Status + Explanation. Max 600 chars.",
                        "suggestedLeverage": number (1-50, optional),
                        "sizeUSDC": number (optional),
                        "orderType": "limit" | "market",
                        "price": number (for limit orders, optional),
                        "stopLoss": number (optional, ONLY for BUY/SELL actions),
                        "takeProfit": number (optional, ONLY for BUY/SELL actions)
                    }
                ],
                "cycleSummary": "Brief 1-2 sentence summary of this analysis cycle for context in the next cycle. Include: key market observations, actions taken, and any notable patterns. Max 300 chars."
            }

            CRITICAL RULES:
            1. ONLY output valid JSON with the structure above.
            2. Must return one decision object per coin provided in the decisions array.
            3. CHECK PORTFOLIO LIMITS: Do not suggest BUY if maxPositions is reached.
            4. CLOSE POSITIONS: Prioritize checking existing positions for exit signals.
            5. LEVERAGE CONSTRAINT: suggestedLeverage MUST NOT exceed portfolio.settings.maxLeverage.
            6. CYCLE SUMMARY: ALWAYS include a cycleSummary field with a brief context for the next cycle.
            
            REASONING FORMAT (CRITICAL - MUST FOLLOW):
            - Start with action: "LONG:", "SHORT:", "CLOSE:", or "WAIT:".
            - POSITION STATUS (MANDATORY - ALWAYS INCLUDE):
              - Check each coin's 'openPosition.hasPosition' field.
              - If hasPosition === false: MUST say "No position." at the START of your reason.
              - If hasPosition === true: MUST say "In [side] at $[entryPx], PnL: $[unrealizedPnl]" at the START.
            - ENTRY/SL/TP VALUES:
              - ONLY include Entry, SL, TP values for BUY or SELL actions (new trades).
              - For HOLD or CLOSE actions, do NOT include Entry/SL/TP values.
            - CRITICAL: If hasPosition is false, DO NOT report SL/TP values - there is no position to have SL/TP.
            - Examples:
              - HOLD with no position: "WAIT: No position. RSI neutral, waiting for signal."
              - BUY with no position: "LONG: No position. RSI divergence detected. Entry: $95000, SL: $93100, TP: $98800"
              - CLOSE with position: "CLOSE: In LONG at $95000, PnL: +$150. Take profit target reached."
        `}}class Yot{constructor(){this.providerType="openai",this.apiKey="",this.modelName="gpt-4o-mini",this.baseUrl="https://api.openai.com/v1"}isInitialized(){return this.apiKey.length>0}initialize(e){this.apiKey=e}setModel(e){this.modelName=e}getModel(){return this.modelName}convertToolsToOpenAI(e){if(!e||e.length===0)return[];const n=[];for(const r of e)if(r.functionDeclarations)for(const i of r.functionDeclarations)n.push({type:"function",function:{name:i.name,description:i.description,parameters:this.convertGeminiParamsToOpenAI(i.parameters)}});return n}convertGeminiParamsToOpenAI(e){if(!e)return{type:"object",properties:{}};const n={},r=e.required||[];if(e.properties)for(const[i,s]of Object.entries(e.properties))n[i]={type:this.convertGeminiTypeToOpenAI(s.type),description:s.description||""};return{type:"object",properties:n,required:r}}convertGeminiTypeToOpenAI(e){return{STRING:"string",NUMBER:"number",BOOLEAN:"boolean",OBJECT:"object",ARRAY:"array"}[e]||"string"}async sendMessage(e,n,r,i){if(!this.isInitialized())throw new Error("OpenAI not initialized. Please set API Key.");return uo.enqueue({priority:"HIGH",source:"operator",provider:"openai",execute:async()=>{var g;const s=[{role:"system",content:r}];for(const x of e)s.push({role:x.role==="model"?"assistant":"user",content:x.content});s.push({role:"user",content:n});const o=this.convertToolsToOpenAI(i),a={model:this.modelName,messages:s};o.length>0&&(a.tools=o,a.tool_choice="auto");const l=await fetch(`${this.baseUrl}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify(a)});if(!l.ok){const x=await l.text();throw new Error(`OpenAI API error: ${l.status} ${x}`)}const c=await l.json(),u=(g=c.choices)==null?void 0:g[0],f=u==null?void 0:u.message,m=[];if(f!=null&&f.tool_calls)for(const x of f.tool_calls)x.type==="function"&&m.push({name:x.function.name,args:JSON.parse(x.function.arguments||"{}")});return{text:(f==null?void 0:f.content)||"",usageMetadata:c.usage?{promptTokenCount:c.usage.prompt_tokens||0,candidatesTokenCount:c.usage.completion_tokens||0}:void 0,functionCalls:m.length>0?m:void 0}}})}async sendJsonAnalysis(e,n){return this.isInitialized()?uo.enqueue({priority:"NORMAL",source:"polymarketDealer",provider:"openai",execute:async()=>{var s,o,a;const r=await fetch(`${this.baseUrl}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify({model:this.modelName,messages:[{role:"system",content:n},{role:"user",content:e}],response_format:{type:"json_object"}})});if(!r.ok){const l=await r.text();throw new Error(`OpenAI API error: ${r.status} ${l}`)}return((a=(o=(s=(await r.json()).choices)==null?void 0:s[0])==null?void 0:o.message)==null?void 0:a.content)||null}}):(console.warn("[OpenAIProvider] Client not initialized"),null)}async sendBatchAnalysis(e,n,r){if(!this.isInitialized())throw new Error("OpenAI not initialized. Please set API Key.");if(r!=null&&r.aborted)throw new DOMException("Dealer cycle aborted","AbortError");const i=this.getBatchDealerSystemInstruction(),s=`
            [USER STRATEGY]
            ${n}

            [BATCH MARKET DATA]
            ${JSON.stringify(e)}

            Analyze all assets in the batch. Return a JSON object with decisions array and cycleSummary.
        `;return uo.enqueue({priority:"NORMAL",source:"hyperliquidDealer",provider:"openai",execute:async()=>{var u,f,m,g,x;const o=await fetch(`${this.baseUrl}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify({model:this.modelName,messages:[{role:"system",content:i},{role:"user",content:s}],response_format:{type:"json_object"}}),signal:r});if(!o.ok){const v=await o.text();throw new Error(`OpenAI API error: ${o.status} ${v}`)}const a=await o.json(),l=(m=(f=(u=a.choices)==null?void 0:u[0])==null?void 0:f.message)==null?void 0:m.content;if(!l)throw new Error("Empty response from OpenAI");if(((x=(g=a.choices)==null?void 0:g[0])==null?void 0:x.finish_reason)==="length")throw new Error("Response truncated by length limit");let c;try{c=JSON.parse(l)}catch(v){throw new Error(`Failed to parse JSON response: ${v.message}`)}return this.normalizeDecisions(c)}})}normalizeDecisions(e){let n=[],r;typeof e=="object"&&e.decisions?(n=e.decisions,e.cycleSummary&&typeof e.cycleSummary=="string"&&(r=e.cycleSummary.slice(0,350))):Array.isArray(e)?n=e:typeof e=="object"&&(n=[e]);const s=n.map(l=>l.action==="LONG"?{...l,action:"BUY"}:l.action==="SHORT"?{...l,action:"SELL"}:l.action==="WAIT"?{...l,action:"HOLD"}:l).filter(l=>{const c=typeof l.coin=="string"&&l.coin.length>0,u=["BUY","SELL","HOLD","CLOSE"].includes(l.action);return c&&u}),o=new Map,a={CLOSE:3,BUY:2,SELL:2,HOLD:1};for(const l of s){const c=l.coin.toUpperCase(),u=o.get(c);if(!u)o.set(c,l);else{const f=a[u.action]||0,m=a[l.action]||0;(m>f||m===f&&(l.confidence||0)>(u.confidence||0))&&o.set(c,l)}}return{decisions:Array.from(o.values()),cycleSummary:r}}getBatchDealerSystemInstruction(){return`
            You are Hyperliquid Dealer, an autonomous crypto trading engine.
            Your goal is to analyze specific assets and output a TRADING DECISION for EACH one.

            RESPONSE FORMAT:
            You MUST return a JSON object with a "decisions" array:
            {
                "decisions": [
                    {
                        "coin": "BTC",
                        "action": "BUY" | "SELL" | "HOLD" | "CLOSE",
                        "confidence": 0.0 to 1.0,
                        "reason": "Format: [ACTION] Position Status + Explanation. See REASONING FORMAT below.",
                        "suggestedLeverage": 1-50,
                        "sizeUSDC": number,
                        "orderType": "limit" | "market",
                        "price": number (optional),
                        "stopLoss": number (optional, ONLY for BUY/SELL actions),
                        "takeProfit": number (optional, ONLY for BUY/SELL actions)
                    }
                ]
            }

            CRITICAL RULES:
            1. Return valid JSON with "decisions" array.
            2. One decision per coin provided.
            3. CHECK PORTFOLIO LIMITS: Do not suggest BUY if maxPositions is reached.
            4. LEVERAGE CONSTRAINT: suggestedLeverage MUST NOT exceed portfolio.settings.maxLeverage.
            5. Consider trading costs before recommending trades.
            
            REASONING FORMAT (CRITICAL - MUST FOLLOW):
            - Start with action: "LONG:", "SHORT:", "CLOSE:", or "WAIT:".
            - POSITION STATUS (MANDATORY - ALWAYS INCLUDE):
              - Check each coin's 'openPosition.hasPosition' field.
              - If hasPosition === false: MUST say "No position." at the START of your reason.
              - If hasPosition === true: MUST say "In [side] at $[entryPx], PnL: $[unrealizedPnl]" at the START.
            - ENTRY/SL/TP VALUES:
              - ONLY include Entry, SL, TP values for BUY or SELL actions (new trades).
              - For HOLD or CLOSE actions, do NOT include Entry/SL/TP values.
            - CRITICAL: If hasPosition is false, DO NOT report SL/TP values - there is no position to have SL/TP.
            - Examples:
              - HOLD: "WAIT: No position. RSI neutral, waiting for signal."
              - BUY: "LONG: No position. RSI divergence. Entry: $95000, SL: $93100, TP: $98800"
              - CLOSE: "CLOSE: In LONG at $95000, PnL: +$150. Take profit reached."
        `}}class Jot{constructor(){this.providerType="claude",this.apiKey="",this.modelName="claude-sonnet-4-20250514",this.baseUrl="https://api.anthropic.com/v1"}isInitialized(){return this.apiKey.length>0}initialize(e){this.apiKey=e}setModel(e){this.modelName=e}getModel(){return this.modelName}convertToolsToClaudeFormat(e){if(!e||e.length===0)return[];const n=[];for(const r of e)if(r.functionDeclarations)for(const i of r.functionDeclarations)n.push({name:i.name,description:i.description,input_schema:this.convertParamsToJsonSchema(i.parameters)});return n}convertParamsToJsonSchema(e){if(!e)return{type:"object",properties:{}};const n={},r=e.required||[];if(e.properties)for(const[i,s]of Object.entries(e.properties))n[i]={type:this.convertTypeToJsonSchema(s.type),description:s.description||""};return{type:"object",properties:n,required:r}}convertTypeToJsonSchema(e){return{STRING:"string",NUMBER:"number",BOOLEAN:"boolean",OBJECT:"object",ARRAY:"array"}[e]||"string"}async sendMessage(e,n,r,i){if(!this.isInitialized())throw new Error("Claude not initialized. Please set API Key.");return uo.enqueue({priority:"HIGH",source:"operator",provider:"claude",execute:async()=>{const s=[];for(const m of e)s.push({role:m.role==="model"?"assistant":"user",content:m.content});s.push({role:"user",content:n});const o=this.convertToolsToClaudeFormat(i),a={model:this.modelName,max_tokens:4096,system:r,messages:s};o.length>0&&(a.tools=o);const l=await fetch(`${this.baseUrl}/messages`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":this.apiKey,"anthropic-version":"2023-06-01","anthropic-dangerous-direct-browser-access":"true"},body:JSON.stringify(a)});if(!l.ok){const m=await l.text();throw new Error(`Claude API error: ${l.status} ${m}`)}const c=await l.json();let u="";const f=[];for(const m of c.content||[])m.type==="text"?u+=m.text:m.type==="tool_use"&&f.push({name:m.name,args:m.input||{}});return{text:u,usageMetadata:c.usage?{promptTokenCount:c.usage.input_tokens||0,candidatesTokenCount:c.usage.output_tokens||0}:void 0,functionCalls:f.length>0?f:void 0}}})}async sendJsonAnalysis(e,n){return this.isInitialized()?uo.enqueue({priority:"NORMAL",source:"polymarketDealer",provider:"claude",execute:async()=>{const r=`${n}

IMPORTANT: You MUST respond with ONLY valid JSON. No explanations, no markdown code blocks, just the raw JSON object.`,i=await fetch(`${this.baseUrl}/messages`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":this.apiKey,"anthropic-version":"2023-06-01","anthropic-dangerous-direct-browser-access":"true"},body:JSON.stringify({model:this.modelName,max_tokens:4096,system:r,messages:[{role:"user",content:e},{role:"assistant",content:"{"}]})});if(!i.ok){const a=await i.text();throw new Error(`Claude API error: ${i.status} ${a}`)}const s=await i.json();let o="";for(const a of s.content||[])a.type==="text"&&(o+=a.text);return"{"+o}}):(console.warn("[ClaudeProvider] Client not initialized"),null)}async sendBatchAnalysis(e,n,r){if(!this.isInitialized())throw new Error("Claude not initialized. Please set API Key.");if(r!=null&&r.aborted)throw new DOMException("Dealer cycle aborted","AbortError");const i=this.getBatchDealerSystemInstruction(),s=`
            [USER STRATEGY]
            ${n}

            [BATCH MARKET DATA]
            ${JSON.stringify(e)}

            Analyze all assets in the batch. Return a JSON object with a "decisions" array.
        `;return uo.enqueue({priority:"NORMAL",source:"hyperliquidDealer",provider:"claude",execute:async()=>{const o=await fetch(`${this.baseUrl}/messages`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":this.apiKey,"anthropic-version":"2023-06-01","anthropic-dangerous-direct-browser-access":"true"},body:JSON.stringify({model:this.modelName,max_tokens:4096,system:i,messages:[{role:"user",content:s},{role:"assistant",content:'{"decisions":'}]}),signal:r});if(!o.ok){const f=await o.text();throw new Error(`Claude API error: ${o.status} ${f}`)}const a=await o.json();let l="";for(const f of a.content||[])f.type==="text"&&(l+=f.text);if(!l)throw new Error("Empty response from Claude");const c='{"decisions":'+l;let u;try{u=JSON.parse(c)}catch{try{const f=l.replace(/```json/g,"").replace(/```/g,"").trim();u={decisions:JSON.parse("["+f)}}catch(f){throw new Error(`Failed to parse JSON response: ${f.message}`)}}return this.normalizeDecisions(u)}})}normalizeDecisions(e){let n=[],r;typeof e=="object"&&e.decisions?(n=e.decisions,e.cycleSummary&&typeof e.cycleSummary=="string"&&(r=e.cycleSummary.slice(0,350))):Array.isArray(e)?n=e:typeof e=="object"&&(n=[e]);const s=n.map(l=>l.action==="LONG"?{...l,action:"BUY"}:l.action==="SHORT"?{...l,action:"SELL"}:l.action==="WAIT"?{...l,action:"HOLD"}:l).filter(l=>{const c=typeof l.coin=="string"&&l.coin.length>0,u=["BUY","SELL","HOLD","CLOSE"].includes(l.action);return c&&u}),o=new Map,a={CLOSE:3,BUY:2,SELL:2,HOLD:1};for(const l of s){const c=l.coin.toUpperCase(),u=o.get(c);if(!u)o.set(c,l);else{const f=a[u.action]||0,m=a[l.action]||0;(m>f||m===f&&(l.confidence||0)>(u.confidence||0))&&o.set(c,l)}}return{decisions:Array.from(o.values()),cycleSummary:r}}getBatchDealerSystemInstruction(){return`You are Hyperliquid Dealer, an autonomous crypto trading engine.
Your goal is to analyze specific assets and output a TRADING DECISION for EACH one.

RESPONSE FORMAT:
You MUST respond with ONLY valid JSON. The response will be prefilled with '{"decisions":' so you should continue with the array.

Each decision in the array should have:
{
    "coin": "BTC",
    "action": "BUY" | "SELL" | "HOLD" | "CLOSE",
    "confidence": 0.0 to 1.0,
    "reason": "Format: [ACTION] Position Status + Explanation. See REASONING FORMAT below.",
    "suggestedLeverage": 1-50,
    "sizeUSDC": number,
    "orderType": "limit" | "market",
    "price": number (optional),
    "stopLoss": number (optional, ONLY for BUY/SELL actions),
    "takeProfit": number (optional, ONLY for BUY/SELL actions)
}

CRITICAL RULES:
1. Continue the JSON array after the prefill.
2. One decision per coin provided.
3. CHECK PORTFOLIO LIMITS: Do not suggest BUY if maxPositions is reached.
4. LEVERAGE CONSTRAINT: suggestedLeverage MUST NOT exceed portfolio.settings.maxLeverage.
5. Consider trading costs before recommending trades.

REASONING FORMAT (CRITICAL - MUST FOLLOW):
- Start with action: "LONG:", "SHORT:", "CLOSE:", or "WAIT:".
- POSITION STATUS (MANDATORY - ALWAYS INCLUDE):
  - Check each coin's 'openPosition.hasPosition' field.
  - If hasPosition === false: MUST say "No position." at the START of your reason.
  - If hasPosition === true: MUST say "In [side] at $[entryPx], PnL: $[unrealizedPnl]" at the START.
- ENTRY/SL/TP VALUES:
  - ONLY include Entry, SL, TP values for BUY or SELL actions (new trades).
  - For HOLD or CLOSE actions, do NOT include Entry/SL/TP values.
- CRITICAL: If hasPosition is false, DO NOT report SL/TP values - there is no position to have SL/TP.
- Examples:
  - HOLD: "WAIT: No position. RSI neutral, waiting for signal."
  - BUY: "LONG: No position. RSI divergence. Entry: $95000, SL: $93100, TP: $98800"
  - CLOSE: "CLOSE: In LONG at $95000, PnL: +$150. Take profit reached."`}}class Xot{constructor(){this.providers=new Map,this.providers.set("gemini",new Wot),this.providers.set("openai",new Yot),this.providers.set("claude",new Jot),this.initializeFromConfig(),ir.subscribe(()=>{this.initializeFromConfig()})}initializeFromConfig(){const e=ir.getSnapshot();for(const[n,r]of Object.entries(e.credentials))r.isConfigured&&r.apiKey&&this.initializeProvider(n,r.apiKey);for(const[n,r]of Object.entries(e.componentConfigs)){const i=this.getProvider(r.providerType);i&&"setModel"in i&&i.setModel(r.modelId)}}getProvider(e){return this.providers.get(e)||null}initializeProvider(e,n){const r=this.providers.get(e);r&&(r.initialize(n),console.log(`[ProviderFactory] Initialized ${e} provider`))}getProviderForComponent(e){const r=ir.getSnapshot().componentConfigs[e];if(!r)return console.warn(`[ProviderFactory] No config found for component: ${e}`),null;const i=this.providers.get(r.providerType);if(!i)return console.warn(`[ProviderFactory] Provider ${r.providerType} not found`),null;if(!i.isInitialized()){const s=ir.getApiKey(r.providerType);if(s)i.initialize(s);else return console.warn(`[ProviderFactory] Provider ${r.providerType} not initialized (no API key)`),null}return"setModel"in i&&i.setModel(r.modelId),i}getModelForComponent(e){var r;return((r=ir.getSnapshot().componentConfigs[e])==null?void 0:r.modelId)||""}isComponentReady(e){const n=this.getProviderForComponent(e);return n!==null&&n.isInitialized()}getAvailableProviders(){return Array.from(this.providers.keys())}getModelsForProvider(e){return Yg[e]||[]}validateConfiguration(){const e=[],n=["operator","hyperliquidDealer","polymarketDealer"];for(const r of n)this.isComponentReady(r)||e.push(r);return{valid:e.length===0,missing:e}}}const H0=new Xot;class Qot{constructor(){this.client=null,this.modelName="gemini-2.5-flash",this.initFromConfig()}initFromConfig(){var i,s;const e=ir.getApiKey("gemini"),n=(s=(i=window.process)==null?void 0:i.env)==null?void 0:s.GEMINI_API_KEY,r=e||n;r&&this.initialize(r)}initialize(e){this.client=new vhe({apiKey:e})}setModel(e){this.modelName=e}getModel(){return this.modelName}setApiKey(e){ir.setApiKey("gemini",e),this.initialize(e)}getApiKey(){return ir.getApiKey("gemini")}clearApiKey(){ir.clearApiKey("gemini"),this.client=null}isInitialized(){return this.client!==null}getTools(){const e={name:"getVaultBalance",description:"Get the balance of the internal Vault Wallet. Can show all balances or a specific token balance. If no token is specified, ask the user if they want to see all balances or a specific token.",parameters:{type:Be.OBJECT,properties:{token:{type:Be.STRING,description:"Optional: Symbol (e.g., SOL, USDC) or Mint Address of specific token to check. If not provided, show all balances."}}}},n={name:"executeSwap",description:"Execute a token swap on Raydium Devnet. If the token symbol is not known (not SOL/USDC/RAY), you MUST ask the user for the Mint Address.",parameters:{type:Be.OBJECT,properties:{inputToken:{type:Be.STRING,description:"Symbol (e.g., SOL) or Mint Address of token to sell"},outputToken:{type:Be.STRING,description:"Symbol (e.g., RAY) or Mint Address of token to buy"},amount:{type:Be.NUMBER,description:"Amount of input token to swap"}},required:["inputToken","outputToken","amount"]}},r={name:"withdrawSol",description:"Transfer SOL from the internal Vault to the connected Owner Wallet.",parameters:{type:Be.OBJECT,properties:{amount:{type:Be.NUMBER,description:"Amount of SOL to transfer"}},required:["amount"]}},i={name:"scheduleTask",description:`Schedule a task (swap, transfer, alert, or Hyperliquid order) to execute either at a specific time OR when a market condition is met.
      
      CRITICAL: You MUST provide ALL required parameters. If ANY information is missing, ask the user for it instead of calling this tool.
      
      For TIME-BASED tasks: provide 'delayMinutes'
      For CONDITION-BASED tasks: provide 'conditionIndicator', 'conditionSymbol', 'conditionOperator', 'conditionValue', and 'conditionTimeframe'.
      
      IMPORTANT: 'conditionTimeframe' is REQUIRED for condition-based tasks. If the user does not specify it (e.g., "1h", "4h", "1d"), you MUST ASK them for it. DO NOT DEFAULT TO 'D'.

      Examples:
      - Time-based: delayMinutes=5
      - Condition (SWAP): taskType="SWAP", inputToken="SOL", outputToken="USDC", amount=0.1, conditionIndicator="rsi", conditionSymbol="BTCUSDT", conditionOperator="<", conditionValue=30, conditionTimeframe="D"
      - Condition (HL_ORDER): taskType="HL_ORDER", coin="BTC", isBuy=true, size=0.001, orderType="limit", price=90000, leverage=10, stopLoss=88000, takeProfit=99000, conditionIndicator="rsi", conditionSymbol="BTCUSDT", conditionOperator="<", conditionValue=30, conditionTimeframe="D"`,parameters:{type:Be.OBJECT,properties:{taskType:{type:Be.STRING,description:"Type of task: SWAP, TRANSFER, ALERT, or HL_ORDER (Hyperliquid order)"},inputToken:{type:Be.STRING,description:"For SWAP: Input token symbol or mint address. For TRANSFER: Token to transfer. Not used for ALERT or HL_ORDER."},outputToken:{type:Be.STRING,description:"For SWAP: Output token symbol or mint address. Not used for other task types."},amount:{type:Be.NUMBER,description:"Amount to swap or transfer. Not used for ALERT or HL_ORDER."},coin:{type:Be.STRING,description:'For HL_ORDER: Asset symbol (e.g., "BTC", "ETH", "SOL"). Required for HL_ORDER.'},isBuy:{type:Be.BOOLEAN,description:"For HL_ORDER: True for LONG/BUY, False for SHORT/SELL. Required for HL_ORDER."},size:{type:Be.NUMBER,description:"For HL_ORDER: Size of the order. Required for HL_ORDER."},orderType:{type:Be.STRING,description:'For HL_ORDER: Order type ("limit", "market", "ioc", "alo"). Ask user if not specified.'},price:{type:Be.NUMBER,description:"For HL_ORDER: Limit price. Required for LIMIT orders, ignored for MARKET."},leverage:{type:Be.NUMBER,description:"For HL_ORDER: Leverage multiplier (1-50). Ask user, default 1x if not specified."},stopLoss:{type:Be.NUMBER,description:"For HL_ORDER: Optional stop loss price. Ask user if they want to set one."},takeProfit:{type:Be.NUMBER,description:"For HL_ORDER: Optional take profit price. Ask user if they want to set one."},reduceOnly:{type:Be.BOOLEAN,description:"For HL_ORDER: True to only reduce existing position. Default false."},delayMinutes:{type:Be.NUMBER,description:"For time-based: Number of minutes to wait before executing. Leave empty for condition-based."},conditionIndicator:{type:Be.STRING,description:"For condition-based: Indicator name (rsi, macd, ema, sma, stoch, price). Required for condition-based tasks."},conditionSymbol:{type:Be.STRING,description:"For condition-based: Trading symbol (e.g., BTCUSDT, SOLUSDT). Required for condition-based tasks."},conditionOperator:{type:Be.STRING,description:"For condition-based: Comparison operator (<, >, <=, >=, ==). Required for condition-based tasks."},conditionValue:{type:Be.NUMBER,description:"For condition-based: Threshold value to compare against. Required for condition-based tasks."},conditionTimeframe:{type:Be.STRING,description:"For condition-based: Timeframe (1, 5, 15, 60, 240, D, W). REQUIRED. If missing, ask user."}},required:["taskType"]}},s={name:"transferToken",description:"Transfer SPL tokens or NFTs from the Vault to the Owner Wallet. You can ONLY send to the Owner, not to any other address.",parameters:{type:Be.OBJECT,properties:{tokenMint:{type:Be.STRING,description:"Mint address of the token to transfer"},amount:{type:Be.NUMBER,description:"Amount of tokens to transfer (in human-readable units, not raw)"}},required:["tokenMint","amount"]}},o={name:"getMarketPrice",description:"Get the current market price, exchange, and last update time for a given symbol.",parameters:{type:Be.OBJECT,properties:{symbol:{type:Be.STRING,description:'Trading symbol (e.g., "BTCUSDT", "SOLUSDT")'}},required:["symbol"]}},a={name:"getOHLCV",description:"Get OHLCV (Open, High, Low, Close, Volume) candlestick data for a symbol.",parameters:{type:Be.OBJECT,properties:{symbol:{type:Be.STRING,description:'Trading symbol (e.g., "BTCUSDT", "SOLUSDT")'},timeframe:{type:Be.STRING,description:'Timeframe (e.g., "1", "5", "15", "60", "240", "D"). Default is "60".'}},required:["symbol"]}},l={name:"getIndicator",description:"Get a specific technical indicator value for a symbol.",parameters:{type:Be.OBJECT,properties:{symbol:{type:Be.STRING,description:'Trading symbol (e.g., "BTCUSDT", "SOLUSDT")'},indicator:{type:Be.STRING,description:'Indicator name: "rsi", "macd", "ema", "sma", "stoch"'},timeframe:{type:Be.STRING,description:'Timeframe (e.g., "1", "5", "15", "60", "240", "D"). Default is "60".'}},required:["symbol","indicator"]}},c={name:"getTradingViewSummary",description:"Get the TradingView buy/sell/neutral recommendation summary for a symbol.",parameters:{type:Be.OBJECT,properties:{symbol:{type:Be.STRING,description:'Trading symbol (e.g., "BTCUSDT", "SOLUSDT")'}},required:["symbol"]}},u={name:"getHLBalance",description:"Get the balance of the Hyperliquid Vault (USDC) and positions.",parameters:{type:Be.OBJECT,properties:{}}},f={name:"getHLPositions",description:"Get open positions in the Hyperliquid Vault.",parameters:{type:Be.OBJECT,properties:{}}},m={name:"getHLMarketData",description:"Get market data (price, orderbook) for a Hyperliquid asset.",parameters:{type:Be.OBJECT,properties:{coin:{type:Be.STRING,description:'Asset symbol (e.g., "BTC", "ETH", "SOL")'}},required:["coin"]}},g={name:"createHLOrder",description:`Place an order on Hyperliquid Testnet. 
      
      **USDC-BASED ORDERS:**
      If user says "comprar X USDC de COIN", provide usdcAmount=X and the system will automatically calculate the size.
      
      CRITICAL: You MUST ask the user for ALL required information before calling this tool:
      1. Coin (asset symbol)
      2. Direction (LONG/BUY or SHORT/SELL)
      3. Size (amount) OR usdcAmount (USDC to spend)
      4. Order Type (LIMIT or MARKET)
      5. Price (required for LIMIT orders)
      6. Leverage (1-50x, default 1x if not specified)
      7. Stop Loss (optional)
      8. Take Profit (optional)
      
      Minimum order value: $10 USD`,parameters:{type:Be.OBJECT,properties:{coin:{type:Be.STRING,description:'Asset symbol (e.g., "BTC", "ETH", "SOL", "HYPE")'},isBuy:{type:Be.BOOLEAN,description:"True for LONG/BUY, False for SHORT/SELL"},size:{type:Be.NUMBER,description:"Size of the order in token units. Leave empty if usdcAmount is provided."},usdcAmount:{type:Be.NUMBER,description:"Amount in USDC to spend (for buys) or receive (for sells). If provided, size will be auto-calculated."},orderType:{type:Be.STRING,description:'Order type: "limit", "market", "ioc", "alo". Ask user if not specified.'},price:{type:Be.NUMBER,description:"Limit price. Required for LIMIT orders, ignored for MARKET."},leverage:{type:Be.NUMBER,description:"Leverage multiplier (1-50). Ask user, default 1x if not specified."},stopLoss:{type:Be.NUMBER,description:"Optional stop loss price. Ask user if they want to set one."},takeProfit:{type:Be.NUMBER,description:"Optional take profit price. Ask user if they want to set one."},reduceOnly:{type:Be.BOOLEAN,description:"True to only reduce existing position. Default false."}},required:["coin","isBuy","orderType"]}},x={name:"cancelHLOrder",description:"Cancel a specific order on Hyperliquid.",parameters:{type:Be.OBJECT,properties:{coin:{type:Be.STRING,description:"Asset symbol"},orderId:{type:Be.NUMBER,description:"Order ID to cancel"}},required:["coin","orderId"]}},v={name:"updateHLLeverage",description:"Update leverage for a specific asset on Hyperliquid.",parameters:{type:Be.OBJECT,properties:{coin:{type:Be.STRING,description:"Asset symbol"},leverage:{type:Be.NUMBER,description:"New leverage (1-50)"},isCross:{type:Be.BOOLEAN,description:"True for cross margin, false for isolated"}},required:["coin","leverage","isCross"]}},w={name:"closeHLPosition",description:"Close an open position on Hyperliquid.",parameters:{type:Be.OBJECT,properties:{coin:{type:Be.STRING,description:"Asset symbol"},size:{type:Be.NUMBER,description:"Optional: partial close size. If not provided, closes entire position."},orderType:{type:Be.STRING,description:'Order type: "market" (immediate) or "limit"'},price:{type:Be.NUMBER,description:"Price for limit orders"}},required:["coin","orderType"]}},E={name:"withdrawFromHL",description:`Execute a USDC withdrawal from Hyperliquid Testnet Vault to the Owner's wallet.
      
      This tool EXECUTES the withdrawal immediately. Only call this when the user explicitly wants to withdraw/send/transfer USDC from Hyperliquid.
      
      Requirements:
      - Amount must be > $1 (to cover the $1 USDC withdrawal fee)
      - Vault must be unlocked
      - Owner wallet must be connected
      
      Network: Hyperliquid Testnet
      Fee: $1 USDC (deducted from withdrawal amount)
      Processing time: ~5 minutes`,parameters:{type:Be.OBJECT,properties:{amount:{type:Be.NUMBER,description:"Amount of USDC to withdraw (must be > $1 to cover fee)"}},required:["amount"]}},C={name:"getDealerTradeHistory",description:`Query the Hyperliquid Dealer's trade operation history and AI reasoning.
      
      Use this tool when users ask about:
      - Why a specific position was opened/closed
      - The reasoning behind Dealer trades
      - Details about past or current operations
      - What the Dealer did or is doing
      
      Returns:
      - Operation records with coin, action, price, size, PnL
      - Full AI reasoning and confidence for each trade
      - Recent activity logs`,parameters:{type:Be.OBJECT,properties:{coin:{type:Be.STRING,description:'Optional: Filter by specific coin (e.g., "BTC", "ETH"). If not provided, returns all operations.'},limit:{type:Be.NUMBER,description:"Optional: Maximum number of records to return (default 10, max 50)"},includeReasoning:{type:Be.BOOLEAN,description:"Optional: Whether to include full AI reasoning (default true). Set to false for basic info only."}}}};return[{functionDeclarations:[e,n,r,s,i,o,a,l,c,u,f,m,g,x,v,w,E,C]}]}async sendMessage(e,n,r){if(!this.client)throw new Error("AI Agent not initialized. Please set API Key.");const i=this.client,s=this.modelName,o=()=>this.getTools(),a=l=>{l.usageMetadata&&js.addRecord({source:"MANAGER",operation:"QUERY",inputTokens:l.usageMetadata.promptTokenCount||0,outputTokens:l.usageMetadata.candidatesTokenCount||0,model:s})};return uo.enqueue({priority:"HIGH",source:"operator",provider:"gemini",execute:async()=>{const l=e.map(f=>({role:f.role==="model"?"model":"user",parts:[{text:f.content}]})),u=await i.chats.create({model:s,config:{systemInstruction:r,tools:o()},history:l}).sendMessage({message:n});return a(u),u}})}async getDealerAnalysis(e,n){if(!this.client)throw new Error("AI Agent not initialized.");const r=this.client,i=this.modelName,s=`
      You are Hyperliquid Dealer, an autonomous crypto trading engine.
      Your goal is to analyze provided market data and output a TRADING DECISION based strictly on the user's Strategy and Portfolio Constraints.

      You will receive:
      1. Market Data (Prices, Indicators, Orderbook)
      2. Portfolio Context (Current Balance, Open Positions, PnL, Risk Limits)
      3. TRADING COSTS (Maker/Taker Fees, Funding Rate, Breakeven Prices)

      You must return valid JSON with this schema:
      {
        "action": "BUY" | "SELL" | "HOLD" | "CLOSE",
        "confidence": number (0.0 to 1.0),
        "reason": "Detailed explanation citing technicals, fees, and costs. Include Entry Price, Stop Loss, and Take Profit values if applicable. (Max 600 characters)",
        "coin": "Symbol analyzed",
        "suggestedLeverage": number (1-50, optional, MUST NOT exceed portfolio.settings.maxLeverage),
        "sizeUSDC": number (optional, calculate based on bankroll settings),
        "orderType": "limit" | "market",
        "price": number (for limit orders, optional),
        "stopLoss": number (optional),
        "takeProfit": number (optional)
      }

      CRITICAL RULES:
      1. ONLY output the JSON decision. No markdown blocks, no fluff.
      2. If data is insufficient or unclear, action="HOLD".
      3. CHECK PORTFOLIO LIMITS: Do not buy if 'maxPositions' is reached.
      4. CLOSE POSITIONS: If an open position hits target or stop loss criteria in your analysis, output "CLOSE".
      5. BANKROLL: Using 'manualBankroll' or 'availableBalance' from context, suggest a safe 'sizeUSDC' for new trades.
      6. REASONING FORMAT: Start 'reason' with action: "LONG:", "SHORT:", "CLOSE:", or "WAIT:".
      7. LEVERAGE CONSTRAINT: If suggesting leverage, 'suggestedLeverage' MUST NOT exceed 'portfolio.settings.maxLeverage'. This is a hard limit set by the user.
      
      TRADING COSTS AWARENESS (CRITICAL FOR PROFIT CALCULATION):
      8. FEE CONSIDERATION: Context includes 'tradingCosts.makerFee' and 'tradingCosts.takerFee' (as decimals, e.g., 0.0005 = 0.05%).
         - Total round-trip cost = (takerFee * 2) for market orders or (makerFee * 2) for limit orders.
         - Only enter trades where expected price movement > total round-trip cost.
      9. FUNDING RATE: Context includes 'tradingCosts.fundingRate' (8h rate) and 'estimatedDailyHoldingCost'.
         - Positive funding: Longs pay shorts.
         - Negative funding: Shorts pay longs.
         - Factor funding into holding decisions for swing trades.
      10. BREAKEVEN PRICES: If 'portfolio.positionBreakevens' exists, it contains:
         - breakevenPrice: Price needed to cover entry/exit fees
         - minProfitPrice: Price needed for 1% profit after costs
         - Use these to decide when to CLOSE positions profitably.
      11. PROFIT THRESHOLD: Only suggest trades where expected move > 2x trading costs (to be safe).
    `;return uo.enqueue({priority:"HIGH",source:"hyperliquidDealer",provider:"gemini",execute:async()=>{var u,f;const o=r.chats.create({model:i,config:{systemInstruction:s,responseMimeType:"application/json"}}),a=`
            [USER STRATEGY]
            ${n}

            [MARKET CONTEXT]
            ${JSON.stringify(e)}
        `,l=await o.sendMessage({message:a});let c="";if(l.candidates&&((f=(u=l.candidates[0])==null?void 0:u.content)!=null&&f.parts))for(const m of l.candidates[0].content.parts)m.text&&(c+=m.text);try{const m=c.replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(m)}catch{return console.error("Failed to parse Dealer JSON response:",c),{action:"HOLD",reason:"Failed to parse AI response"}}}})}async getBatchDealerAnalysis(e,n){var o,a;if(!this.client){console.warn("[AIService] Client not initialized. Attempting lazy init...");const l=ir.getApiKey("gemini"),c=(a=(o=window.process)==null?void 0:o.env)==null?void 0:a.GEMINI_API_KEY,u=l||c;if(u)this.initialize(u),console.log("[AIService] Lazy init successful.");else throw new Error("AI Agent not initialized and no API Key found. Please configure your API key in Settings.")}const r=this.client,i=this.modelName,s=`
      You are Hyperliquid Dealer, an autonomous crypto trading engine.
      Your goal is to analyze specific assets and output a TRADING DECISION for EACH one.

      You will receive:
      1. A JSON Object containing an array of 'coins' with their Market Data (Price, Indicators) AND HISTORICAL SERIES.
      2. Portfolio Context (Balance, Open Positions, Risk Limits, userFees with makerFee/takerFee).
      3. PRE-CALCULATED DIVERGENCE SIGNALS: Each coin includes a 'divergences' array with detected divergence patterns.

      DATA STRUCTURE NOTES:
      - 'portfolio.userFees' contains global makerFee and takerFee (applies to all coins).
      - Each coin's 'tradingCosts' contains only fundingRate and dailyHoldingCost (unique per coin).
      - The keys in each coin's 'indicators' object tell you which indicators are active (e.g., {rsi: ..., macd: ...}).
      - 'ts' is a Unix timestamp (seconds since epoch).

      INDICATOR WEIGHTING SYSTEM:
      - Each indicator includes a 'weight' field (0.5 to 2.0, default 1.0).
      - Each indicator includes a 'category' field (trend, momentum, volume, volatility).
      - weight > 1.0: User considers this indicator MORE important (prioritize its signals)
      - weight < 1.0: User considers this indicator LESS important (lower priority)
      - weight = 1.0: Standard importance
      - When indicators conflict, prefer higher-weighted signals.
      - Give each category's signals equal base weight, then apply individual indicator weights.

      INDICATOR CATEGORIES (do NOT stack similar signals from same category):
      - TREND (EMA, SMA, ADX, Ichimoku): Direction of market
      - MOMENTUM (RSI, MACD, Stochastic): Timing of entry/exit
      - VOLUME (OBV, VWAP): Confirmation of moves
      - VOLATILITY (ATR, Bollinger): Risk context

      AUTONOMOUS MODE (when 'autonomousMode' is true in context):
      - The context includes 'availablePresets' with preset configurations.
      - You MUST analyze market conditions first and choose the best preset.
      - Add a 'chosenPreset' field to your JSON response (outside the decisions array) with one of:
        - 'balanced': For uncertain/mixed signals (default fallback)
        - 'scalp': For high volatility with quick reversals
        - 'trendFollowing': For strong directional trends (ADX > 25)
        - 'meanReversion': For ranging/sideways markets
        - 'volumeConfirm': For breakout scenarios or unusual volume
      - Add a 'presetReason' field explaining why you chose that preset.
      - Focus your analysis on the indicators most relevant to your chosen preset.

      RESPONSE FORMAT:
      - For NORMAL mode: Return JSON array of decisions directly.
      - For AUTONOMOUS mode: Return { "chosenPreset": "...", "presetReason": "...", "decisions": [...] }

      You must return valid JSON with this EXACT schema for each decision:
      {
        "coin": "Symbol analyzed",
        "action": "BUY" | "SELL" | "HOLD" | "CLOSE",
        "confidence": number (0.0 to 1.0),
        "reason": "Format: [ACTION] Position Status + Explanation. POSITION STATUS RULES: If NO open position, say 'No position.' If HAVE open position, say 'In LONG/SHORT at $X, PnL: $Y'. ENTRY/SL/TP RULES: Only include Entry/SL/TP values for BUY or SELL actions. For HOLD/CLOSE, do NOT include Entry/SL/TP. Examples: HOLD='WAIT: No position. RSI neutral.' BUY='LONG: No position. RSI divergence. Entry: $95000, SL: $93100, TP: $98800' CLOSE='CLOSE: In LONG at $95000, PnL: +$150. TP reached.'. Max 600 chars.",
        "suggestedLeverage": number (1-50, optional, MUST NOT exceed portfolio.settings.maxLeverage),
        "sizeUSDC": number (optional, calculate based on bankroll settings),
        "orderType": "limit" | "market",
        "price": number (for limit orders, optional),
        "stopLoss": number (optional),
        "takeProfit": number (optional)
      }

      CRITICAL RULES:
      1. ONLY output valid JSON.
      2. Must return one decision object per coin provided in the input.
      3. CHECK PORTFOLIO LIMITS: Do not suggest BUY if 'portfolio.maxPositions' is reached.
      4. CLOSE POSITIONS: Prioritize checking existing positions for exit signals.
      5. PROFITABILITY: Consider 'portfolio.userFees' and coin's 'tradingCosts'. Only trade if potential > costs.
      6. LEVERAGE CONSTRAINT: If suggesting leverage, 'suggestedLeverage' MUST NOT exceed 'portfolio.settings.maxLeverage'. This is a hard limit set by the user.
      
      7. RISK PROTECTION (CRITICAL - MANDATORY JSON FIELDS):
         - Check 'portfolio.settings.stopLossEnabled' and 'portfolio.settings.takeProfitEnabled'.
         - If 'stopLossEnabled' is true AND 'stopLossPercent' is null: You MUST include the numeric field "stopLoss" in your JSON response (not just in reason text). Example: "stopLoss": 93100.50
         - If 'takeProfitEnabled' is true AND 'takeProfitPercent' is null: You MUST include the numeric field "takeProfit" in your JSON response (not just in reason text). Example: "takeProfit": 98800.00
         - These are SEPARATE JSON FIELDS, not just mentions in the "reason" string.
         - For BUY/LONG: stopLoss should be BELOW entry price, takeProfit should be ABOVE entry price.
         - For SELL/SHORT: stopLoss should be ABOVE entry price, takeProfit should be BELOW entry price.
      
      8. DIVERGENCE SIGNALS (HIGH PRIORITY): Each coin includes a 'divergences' array with pre-calculated signals:
         - BULLISH: Price lower low + RSI/MACD higher low  potential reversal UP
         - BEARISH: Price higher high + RSI/MACD lower high  potential reversal DOWN
         - HIDDEN_BULLISH: Trend continuation signal UP
         - HIDDEN_BEARISH: Trend continuation signal DOWN
         - Strength: WEAK, MODERATE, STRONG (prioritize MODERATE and STRONG signals)
         - Use these divergences with HIGH PRIORITY - they are algorithmically detected and reliable.
       8. REASONING FORMAT (CRITICAL - MUST FOLLOW):
          - Start with action: "LONG:", "SHORT:", "CLOSE:", or "WAIT:".
          - POSITION STATUS (MANDATORY - ALWAYS INCLUDE):
            - Check each coin's 'openPosition.hasPosition' field.
            - If hasPosition === false: MUST say "No position." at the START of your reason.
            - If hasPosition === true: MUST say "In [side] at $[entryPx], PnL: $[unrealizedPnl]" at the START.
          - ENTRY/SL/TP VALUES:
            - ONLY include Entry, SL, TP values for BUY or SELL actions (new trades).
            - For HOLD or CLOSE actions, do NOT include Entry/SL/TP values.
          - CRITICAL: Use ONLY the openPosition data from each coin's context. NEVER invent or guess PnL values.
          - CRITICAL: If hasPosition is false, DO NOT report SL/TP values - there is no position to have SL/TP.
          - MANDATORY: If divergences are present, mention them in your reasoning.
          - RECOMMENDED: Mention indicator weights if they influenced your decision.
         - RECOMMENDED: If 'macro' data is present, mention macro alignment in your reasoning.

      MACRO TIMEFRAME CONFIRMATION (CRITICAL FOR ACCURACY):
      - Each coin MAY include a 'macro' object with indicator values from a HIGHER timeframe.
      - 'macro.timeframe' tells you the macro timeframe (e.g., '240' = 4H, 'D' = Daily, 'W' = Weekly).
      - 'macro.indicators' contains current values only (no history).
      
      MACRO ALIGNMENT RULES:
      - If main timeframe shows OVERBOUGHT but macro shows OVERSOLD: Consider HOLD or reduce confidence by 20-30%.
      - If main timeframe shows OVERSOLD but macro shows OVERBOUGHT: Consider HOLD or reduce confidence by 20-30%.
      - If main and macro ALIGN (both overbought or both oversold): Full confidence trade.
      - If conflicting signals: MENTION THE CONFLICT in your reasoning (e.g., "Main RSI=75 but Macro RSI=30 - conflicting").
      
      EXAMPLES:
      - Main RSI=25 (oversold) + Macro RSI=35 (neutral-oversold) = ALIGNED = Full confidence BUY.
      - Main RSI=75 (overbought) + Macro RSI=30 (oversold) = CONFLICTING = HOLD or reduce size.
      - Use macro as a FILTER to avoid trading against the higher timeframe trend.
    `;return uo.enqueue({priority:"NORMAL",source:"hyperliquidDealer",provider:"gemini",execute:async()=>{var k,O,j;const l=r.chats.create({model:i,config:{systemInstruction:s,responseMimeType:"application/json"}}),c=`
          [USER STRATEGY]
          ${n}

          [BATCH MARKET DATA]
          ${JSON.stringify(e)}

          Analyze all assets in the batch. Return a JSON Array of decisions.
        `,u=await l.sendMessage({message:c});u.usageMetadata&&js.addRecord({source:"DEALER",operation:"BATCH_ANALYSIS",inputTokens:u.usageMetadata.promptTokenCount||0,outputTokens:u.usageMetadata.candidatesTokenCount||0,model:i,metadata:{coinsAnalyzed:((k=e==null?void 0:e.coins)==null?void 0:k.length)||0}});let f="";if(u.candidates&&((j=(O=u.candidates[0])==null?void 0:O.content)!=null&&j.parts))for(const R of u.candidates[0].content.parts)R.text&&(f+=R.text);if(!f)return console.warn("[AIService] Empty response from Batch Dealer Analysis"),[];const m=f.replace(/```json/g,"").replace(/```/g,"").trim();let g;try{g=JSON.parse(m)}catch(R){return console.warn("[AIService] JSON Parse Error:",R),[]}let x=[];if(Array.isArray(g))x=g;else if(typeof g=="object")x=[g];else return[];const w=x.map(R=>R.action==="LONG"?{...R,action:"BUY"}:R.action==="SHORT"?{...R,action:"SELL"}:R.action==="WAIT"?{...R,action:"HOLD"}:R).filter(R=>{const U=typeof R.coin=="string"&&R.coin.length>0,V=["BUY","SELL","HOLD","CLOSE"].includes(R.action);return!(!U||!V)}),E={CLOSE:3,BUY:2,SELL:2,HOLD:1},C=new Map;for(const R of w){const U=R.coin.toUpperCase(),V=C.get(U);if(!V)C.set(U,R);else{const F=E[V.action]||0,$=E[R.action]||0;if($>F)C.set(U,R);else if($===F){const K=V.confidence||0;(R.confidence||0)>K&&C.set(U,R)}}}return Array.from(C.values())}})}async analyzePolymarket(e){if(!this.client)return console.warn("[AIService] Client not initialized for Polymarket analysis"),null;const n=this.client,r=this.modelName,i=`
      You are a Polymarket prediction market analyst.
      Your goal is to analyze prediction markets and identify trading opportunities.

      You will receive market data including:
      - Market questions and current YES/NO prices
      - Time to resolution
      - Volume and liquidity data
      - Current portfolio positions

      Respond with a JSON object containing your analysis:
      {
        "decisions": [
          {
            "action": "BUY_YES" | "BUY_NO" | "SELL_YES" | "SELL_NO" | "HOLD",
            "marketId": "string",
            "question": "string",
            "confidence": 0-100,
            "reason": "explanation",
            "suggestedSize": number (USDC),
            "suggestedPrice": number (0-1)
          }
        ],
        "marketOverview": "Brief overall assessment",
        "riskAssessment": "Brief risk commentary"
      }

      RULES:
      1. Only suggest trades with confidence >= 60
      2. Consider time to resolution (avoid markets expiring soon without clear edge)
      3. Factor in liquidity - avoid illiquid markets
      4. Look for mispriced probabilities based on news/fundamentals
      5. Diversify across different categories when possible
    `;return uo.enqueue({priority:"NORMAL",source:"polymarketDealer",provider:"gemini",execute:async()=>{var l,c;const o=await n.chats.create({model:r,config:{systemInstruction:i,responseMimeType:"application/json"}}).sendMessage({message:e});o.usageMetadata&&js.addRecord({source:"POLYMARKET_DEALER",operation:"ANALYSIS",inputTokens:o.usageMetadata.promptTokenCount||0,outputTokens:o.usageMetadata.candidatesTokenCount||0,model:r});let a="";if(o.candidates&&((c=(l=o.candidates[0])==null?void 0:l.content)!=null&&c.parts))for(const u of o.candidates[0].content.parts)u.text&&(a+=u.text);return a||null}})}getProviderFactory(){return H0}getConfigStore(){return ir}getAvailableProviders(){return["gemini","openai","claude"]}getModelsForProvider(e){return Yg[e]||[]}async sendOperatorMessage(e,n,r){var s;const i=H0.getProviderForComponent("operator");if(!i)return console.log("[AIService] Falling back to legacy Gemini for operator"),this.sendMessage(e,n,r);try{const o=await i.sendMessage(e,n,r,((s=i.getTools)==null?void 0:s.call(i))||this.getTools());if(o.usageMetadata){const a=ir.getComponentConfig("operator");js.addRecord({source:"MANAGER",operation:"QUERY",inputTokens:o.usageMetadata.promptTokenCount||0,outputTokens:o.usageMetadata.candidatesTokenCount||0,model:a.modelId})}return{text:o.text,functionCalls:o.functionCalls,usageMetadata:o.usageMetadata,candidates:[{content:{parts:[{text:o.text}]}}]}}catch(o){return console.error("[AIService] Operator provider error:",o),this.sendMessage(e,n,r)}}async getDealerBatchAnalysis(e,n,r){var s;const i=H0.getProviderForComponent("hyperliquidDealer");if(!i)return console.log("[AIService] Falling back to legacy batch analysis"),{decisions:await this.getBatchDealerAnalysis(e,n)};try{const o=await i.sendBatchAnalysis(e,n,r),a=ir.getComponentConfig("hyperliquidDealer");return js.addRecord({source:"DEALER",operation:"BATCH_ANALYSIS",inputTokens:Math.round(JSON.stringify(e).length/4),outputTokens:Math.round(JSON.stringify(o).length/4),model:a.modelId,metadata:{coinsAnalyzed:((s=e==null?void 0:e.coins)==null?void 0:s.length)||0}}),o}catch(o){if((o==null?void 0:o.name)==="AbortError")throw console.log("[AIService] Dealer analysis aborted"),o;return console.error("[AIService] Dealer provider error:",o),{decisions:await this.getBatchDealerAnalysis(e,n)}}}async getPolymarketAnalysis(e){const n=H0.getProviderForComponent("polymarketDealer");if(!n)return console.log("[AIService] Falling back to legacy Polymarket analysis"),this.analyzePolymarket(e);const r=`
      You are a Polymarket prediction market analyst.
      Your goal is to analyze prediction markets and identify trading opportunities.

      Respond with a JSON object containing your analysis:
      {
        "decisions": [
          {
            "action": "BUY_YES" | "BUY_NO" | "SELL_YES" | "SELL_NO" | "HOLD",
            "marketId": "string",
            "question": "string",
            "confidence": 0-100,
            "reason": "explanation",
            "suggestedSize": number (USDC),
            "suggestedPrice": number (0-1)
          }
        ],
        "marketOverview": "Brief overall assessment",
        "riskAssessment": "Brief risk commentary"
      }

      RULES:
      1. Only suggest trades with confidence >= 60
      2. Consider time to resolution
      3. Factor in liquidity
      4. Look for mispriced probabilities
      5. Diversify when possible
    `;try{const i=await n.sendJsonAnalysis(e,r);if(i){const s=ir.getComponentConfig("polymarketDealer");js.addRecord({source:"POLYMARKET_DEALER",operation:"ANALYSIS",inputTokens:Math.round(e.length/4),outputTokens:Math.round(i.length/4),model:s.modelId})}return i}catch(i){return console.error("[AIService] Polymarket provider error:",i),this.analyzePolymarket(e)}}isComponentReady(e){return H0.isComponentReady(e)}getComponentProviderInfo(e){const n=ir.getComponentConfig(e),i=Yg[n.providerType].find(s=>s.id===n.modelId);return{provider:n.providerType,model:n.modelId,modelName:(i==null?void 0:i.name)||n.modelId,isReady:H0.isComponentReady(e)}}async generateCycleSummary(e,n){if(!this.client)return console.warn("[AIService] Client not initialized for cycle summary"),"";if(e.length===0)return"";const r=this.client,i=this.modelName,o=`You are a trading analyst summarizing recent trading activity.
Generate a CONCISE contextual summary for an AI trader about to analyze ${n==="hyperliquid"?"crypto perpetual futures trading on Hyperliquid":"prediction market trading on Polymarket"}.

The summary should help the AI understand:
1. Recent market sentiment and patterns observed
2. Actions taken in previous cycles (buys, sells, holds)
3. Key assets/markets being monitored
4. Any notable patterns or trends

CRITICAL RULES:
- Output ONLY plain text, max 300 characters
- Be extremely concise - every word must add value
- Focus on actionable context for the next analysis
- No JSON, no markdown, no formatting`,a=e.map(c=>({time:new Date(c.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),actions:c.decisions.map(u=>`${u.asset}:${u.action}(${Math.round(u.confidence*100)}%)`).join(", "),assets:c.assetsAnalyzed.length})),l=`Recent ${n} trading cycles (newest first):
${a.map((c,u)=>`Cycle ${e.length-u}: ${c.time} - Analyzed ${c.assets} assets. Actions: ${c.actions||"None"}`).join(`
`)}

Generate a brief contextual summary for the next analysis cycle.`;return uo.enqueue({priority:"LOW",source:n==="hyperliquid"?"hyperliquidDealer":"polymarketDealer",provider:"gemini",execute:async()=>{var c,u;try{const m=await r.chats.create({model:i,config:{systemInstruction:o}}).sendMessage({message:l});m.usageMetadata&&js.addRecord({source:n==="hyperliquid"?"DEALER":"POLYMARKET_DEALER",operation:"CYCLE_SUMMARY",inputTokens:m.usageMetadata.promptTokenCount||0,outputTokens:m.usageMetadata.candidatesTokenCount||0,model:i});let g="";if(m.candidates&&((u=(c=m.candidates[0])==null?void 0:c.content)!=null&&u.parts))for(const x of m.candidates[0].content.parts)x.text&&(g+=x.text);return g.trim().slice(0,350)}catch(f){return console.error("[AIService] Cycle summary generation failed:",f),""}}})}}const tm=new Qot;class Zot{constructor(){this.worker=null,this.callbacks=new Map,this.fallbackTimers=new Map,this.isSupported=typeof Worker<"u",this.isSupported?this.initWorker():console.warn("[BackgroundTimer]  Web Workers not supported, falling back to setInterval (will be throttled in background)")}initWorker(){try{const e=`
                const timers = new Map();
                
                self.onmessage = (event) => {
                    const { type, timerId, intervalMs } = event.data;
                    
                    if (type === 'START' && timerId && intervalMs) {
                        // Clear existing timer if any
                        if (timers.has(timerId)) {
                            clearInterval(timers.get(timerId));
                        }
                        
                        // Start new timer
                        const id = setInterval(() => {
                            self.postMessage({ type: 'TICK', timerId, timestamp: Date.now() });
                        }, intervalMs);
                        timers.set(timerId, id);
                        
                        // Log start (visible in browser console under Worker context)
                        console.log('[TimerWorker] Started timer "' + timerId + '" with ' + intervalMs + 'ms interval');
                    }
                    
                    if (type === 'STOP' && timerId) {
                        if (timers.has(timerId)) {
                            clearInterval(timers.get(timerId));
                            timers.delete(timerId);
                            console.log('[TimerWorker] Stopped timer "' + timerId + '"');
                        }
                    }
                    
                    if (type === 'UPDATE_INTERVAL' && timerId && intervalMs) {
                        if (timers.has(timerId)) {
                            clearInterval(timers.get(timerId));
                        }
                        const id = setInterval(() => {
                            self.postMessage({ type: 'TICK', timerId, timestamp: Date.now() });
                        }, intervalMs);
                        timers.set(timerId, id);
                        console.log('[TimerWorker] Updated timer "' + timerId + '" to ' + intervalMs + 'ms');
                    }
                };
            `,n=new Blob([e],{type:"application/javascript"});this.worker=new Worker(URL.createObjectURL(n)),this.worker.onmessage=r=>{const{type:i,timerId:s,timestamp:o}=r.data;if(i==="TICK"&&this.callbacks.has(s))try{this.callbacks.get(s)(o)}catch(a){console.error(`[BackgroundTimer] Error in callback for "${s}":`,a)}},this.worker.onerror=r=>{console.error("[BackgroundTimer] Worker error:",r)},console.log("[BackgroundTimer]  Web Worker initialized - timers will run in background")}catch(e){console.error("[BackgroundTimer] Failed to initialize Worker:",e),this.isSupported=!1}}start(e,n,r){if(this.callbacks.set(e,r),this.worker)this.worker.postMessage({type:"START",timerId:e,intervalMs:n});else{console.warn(`[BackgroundTimer] Using fallback for "${e}" - may be throttled in background`);const i=setInterval(()=>r(Date.now()),n);this.fallbackTimers.set(e,i)}}stop(e){this.callbacks.delete(e),this.worker&&this.worker.postMessage({type:"STOP",timerId:e}),this.fallbackTimers.has(e)&&(clearInterval(this.fallbackTimers.get(e)),this.fallbackTimers.delete(e))}updateInterval(e,n){if(this.worker&&this.callbacks.has(e))this.worker.postMessage({type:"UPDATE_INTERVAL",timerId:e,intervalMs:n});else if(this.fallbackTimers.has(e)){const r=this.callbacks.get(e);if(r){clearInterval(this.fallbackTimers.get(e));const i=setInterval(()=>r(Date.now()),n);this.fallbackTimers.set(e,i)}}}isRunning(e){return this.callbacks.has(e)}getActiveTimers(){return Array.from(this.callbacks.keys())}destroy(){for(const e of this.callbacks.keys())this.stop(e);this.worker&&(this.worker.terminate(),this.worker=null),this.callbacks.clear(),this.fallbackTimers.clear()}}const Oa=new Zot;class eat{constructor(){this.audioContext=null,this.oscillator=null,this.gainNode=null,this.isActive=!1,this.checkInterval=null,this.visibilityHandler=null,this.userInteractionHandler=null}start(){var e;if(this.isActive&&((e=this.audioContext)==null?void 0:e.state)==="running")return console.log("[KeepAlive] Already active and running"),!0;try{return this.audioContext&&this.audioContext.state!=="closed"&&this.cleanupAudio(),this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.oscillator=this.audioContext.createOscillator(),this.oscillator.type="sine",this.oscillator.frequency.setValueAtTime(1,this.audioContext.currentTime),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.setValueAtTime(.001,this.audioContext.currentTime),this.oscillator.connect(this.gainNode),this.gainNode.connect(this.audioContext.destination),this.oscillator.start(),this.isActive=!0,console.log("[KeepAlive]  Silent audio started - tab will stay active in background"),this.setupMaintenance(),!0}catch(n){return console.error("[KeepAlive]  Failed to start silent audio:",n),!1}}setupMaintenance(){this.cleanupMaintenance(),this.visibilityHandler=()=>{document.visibilityState==="visible"&&this.isActive&&(console.log("[KeepAlive]  Tab became visible, checking audio..."),this.ensureRunning())},document.addEventListener("visibilitychange",this.visibilityHandler),this.userInteractionHandler=()=>{var e;this.isActive&&((e=this.audioContext)==null?void 0:e.state)==="suspended"&&(console.log("[KeepAlive]  User interaction detected, resuming audio..."),this.resume())},["click","keydown","touchstart","mousedown"].forEach(e=>{document.addEventListener(e,this.userInteractionHandler,{passive:!0})}),this.checkInterval=setInterval(()=>{this.isActive&&this.ensureRunning()},5e3)}async ensureRunning(){var n;if(!this.isActive)return;const e=(n=this.audioContext)==null?void 0:n.state;e==="suspended"?(console.log("[KeepAlive]  AudioContext suspended, attempting resume..."),await this.resume()):(e==="closed"||!this.audioContext)&&(console.log("[KeepAlive]  AudioContext closed, restarting..."),this.isActive=!1,this.start())}cleanupMaintenance(){this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null),this.visibilityHandler&&(document.removeEventListener("visibilitychange",this.visibilityHandler),this.visibilityHandler=null),this.userInteractionHandler&&(["click","keydown","touchstart","mousedown"].forEach(e=>{document.removeEventListener(e,this.userInteractionHandler)}),this.userInteractionHandler=null)}cleanupAudio(){try{this.oscillator&&(this.oscillator.stop(),this.oscillator.disconnect(),this.oscillator=null),this.gainNode&&(this.gainNode.disconnect(),this.gainNode=null),this.audioContext&&this.audioContext.state!=="closed"&&this.audioContext.close(),this.audioContext=null}catch{}}stop(){if(this.isActive)try{this.cleanupMaintenance(),this.cleanupAudio(),this.isActive=!1,console.log("[KeepAlive]  Silent audio stopped")}catch(e){console.error("[KeepAlive] Error stopping:",e)}}async resume(){if(!this.audioContext)return this.start();if(this.audioContext.state==="suspended")try{return await this.audioContext.resume(),console.log("[KeepAlive]  AudioContext resumed"),!0}catch(e){return console.error("[KeepAlive] Failed to resume:",e),this.isActive=!1,this.start()}return!0}getIsActive(){var e;return this.isActive&&((e=this.audioContext)==null?void 0:e.state)==="running"}getState(){var e;return((e=this.audioContext)==null?void 0:e.state)||"not-initialized"}}const hC=new eat,kQ="hyperliquid-dealer-cycle",V5="hyperliquid-dealer-sync";class tat{constructor(){this.isLoopRunning=!1,this.currentCycleAbortController=null,this.vaultContext={balance:0,positions:[]},this.lastError=null,this.consecutiveFailures=0,this.executor=null,kt.subscribe(()=>{const e=kt.getSnapshot();e.isOn&&!this.isLoopRunning?this.startLoop():!e.isOn&&this.isLoopRunning&&this.stopLoop()})}startLoop(){if(this.isLoopRunning)return;this.isLoopRunning=!0,console.log("[DealerService]  Starting loop with Web Worker timer (background-safe)..."),hC.start();const n=kt.getSnapshot().settings.checkIntervalSeconds*1e3||6e4;Oa.start(kQ,n,()=>this.runCycle()),this.startSyncLoop(),this.runCycle()}startSyncLoop(){Oa.stop(V5),console.log("[DealerService] Starting sync loop with Web Worker timer..."),Oa.start(V5,15e3,()=>this.syncPortfolio()),this.syncPortfolio()}async syncPortfolio(){if(this.vaultContext.walletAddress){if($t.isDealerActive()){console.log("[DealerService]   Skipping sync - dealer is active");return}try{const e=await $t.getUserStateShared(this.vaultContext.walletAddress);let n=[],r=0;e&&(e.assetPositions&&(n=e.assetPositions.filter(o=>parseFloat(o.position.szi)!==0),this.vaultContext.positions=n),e.marginSummary&&(r=parseFloat(e.marginSummary.accountValue||"0")));let i=0;const s=n.map(o=>{var u;const a=parseFloat(o.position.szi),l=parseFloat(o.position.entryPx),c=Math.abs(a*l);return i+=c,{coin:o.position.coin,size:a,entryPrice:l,unrealizedPnl:parseFloat(o.position.unrealizedPnl||"0"),side:a>0?"LONG":"SHORT",leverage:parseFloat(((u=o.position.leverage)==null?void 0:u.value)||"1"),liquidationPrice:o.position.liquidationPx?parseFloat(o.position.liquidationPx):void 0}});this.vaultContext.balance=r,kt.updatePortfolioState(s,r,i)}catch(e){console.warn("[DealerService] syncPortfolio failed:",e)}}}stopLoop(){this.isLoopRunning&&(console.log("[DealerService]  Stopping loop..."),this.currentCycleAbortController&&(console.log("[DealerService]  Aborting current cycle requests..."),this.currentCycleAbortController.abort(),this.currentCycleAbortController=null),Oa.stop(kQ),Oa.stop(V5),hC.stop(),this.isLoopRunning=!1,kt.updateStatus(null,null,"System paused",void 0,"Dealer offline"))}setVaultContext(e){this.vaultContext={...this.vaultContext,...e}}async runCycle(){var v,w,E,C;const e=kt.getSnapshot();if(!e.isOn){this.stopLoop();return}this.currentCycleAbortController=new AbortController;const n=this.currentCycleAbortController.signal;$t.acquireDealerLock();const r=e.settings.indicatorSettings,s=Object.entries(r).filter(([k,O])=>O.enabled).map(([k,O])=>k.toUpperCase()).join(", ")||"Default",o=e.settings.tradingPairs.length,a=e.settings.analysisTimeframe,l=a==="1"?"1m":a==="5"?"5m":a==="15"?"15m":a==="60"?"1h":a==="240"?"4h":a==="D"?"1D":`${a}m`,c=e.settings.macroTimeframe,u=e.settings.macroTimeframeEnabled?`  ${c==="15"?"15m":c==="60"?"1H":c==="240"?"4H":c==="D"?"1D":c==="W"?"1W":c}`:"";kt.setAnalyzing(!0),kt.updateStatus(" Scanning Markets",null,"Initializing market analysis cycle...",void 0,` ${o} pairs  ${l}${u}  ${s}`);const f=Date.now();let m=0,g=0,x=0;try{let k=this.vaultContext.positions||[];this.vaultContext.walletAddress&&(!k||k.length===0)&&(await this.syncPortfolio(),k=this.vaultContext.positions||[]);const O=e.settings.tradingPairs;if(O.length===0){kt.addLog("WARNING","No trading pairs configured.");return}const j=5,R=[];for(let A=0;A<O.length;A+=j)R.push(O.slice(A,A+j));const U=e.settings.maxOpenPositions||3,V=[],F=new Map;for(let A=0;A<R.length;A++){if(n.aborted)throw new DOMException("Dealer cycle aborted","AbortError");const I=R[A],M=A+1,z=I.join(", ");kt.updateStatus(" Fetching Data",null,`Collecting market data for ${z}...`,void 0,`Batch ${M}/${R.length}  ${I.length} coins`);const G=Date.now(),te=[];for(const me of I){if(n.aborted)throw new DOMException("Dealer cycle aborted","AbortError");const ce=e.settings.autonomousIndicators?void 0:e.settings.indicatorSettings,oe=await $5.getMarketContext(me,this.vaultContext.walletAddress,e.settings.analysisTimeframe||"60",ce,e.settings.historyCandles||100);if(e.settings.macroTimeframeEnabled&&e.settings.macroTimeframe&&!oe.error){let ke=ce;if(ke&&e.settings.macroEnabledIndicators){ke={...ke};const ze={},Ze=e.settings.macroEnabledIndicators;for(const[Ye,We]of Object.entries(ke))ze[Ye]={...We,enabled:We.enabled&&Ze.includes(Ye)};ke=ze}const Ne=await $5.getMacroSnapshot(me,e.settings.macroTimeframe,ke);Object.keys(Ne.indicators).length>0&&(oe.macro=Ne)}oe.error||(te.push(oe),F.set(me,oe)),await new Promise(ke=>setTimeout(ke,200))}if(m+=Date.now()-G,te.length===0)continue;for(const me of te){const ce=me.symbol,oe=k.find(ke=>{var Ne;return((Ne=ke.position)==null?void 0:Ne.coin)===ce||ke.coin===ce});if(oe&&parseFloat(((v=oe.position)==null?void 0:v.szi)||oe.szi||"0")!==0){const ke=oe.position||oe;me.openPosition={hasPosition:!0,side:parseFloat(ke.szi)>0?"LONG":"SHORT",size:Math.abs(parseFloat(ke.szi)),entryPrice:parseFloat(ke.entryPx||"0"),unrealizedPnl:parseFloat(ke.unrealizedPnl||"0"),leverage:parseFloat(((w=ke.leverage)==null?void 0:w.value)||"1")}}else me.openPosition={hasPosition:!1}}const Y=k.length>0?$5.calculatePositionBreakevens(k,{makerFee:2e-4,takerFee:5e-4},new Map(te.map(me=>{var ce;return[me.symbol,((ce=me.tradingCosts)==null?void 0:ce.fundingRate)||0]}))):[],q={coins:te,portfolio:{balance:this.vaultContext.balance,positions:k,positionBreakevens:Y,settings:{maxPositions:e.settings.maxOpenPositions,maxLeverage:e.settings.maxLeverage,bankrollType:e.settings.bankrollType,manualBankroll:e.settings.manualBankroll,stopLossEnabled:e.settings.stopLossEnabled,stopLossPercent:e.settings.stopLossPercent,takeProfitEnabled:e.settings.takeProfitEnabled,takeProfitPercent:e.settings.takeProfitPercent},userFees:{makerFee:2e-4,takerFee:5e-4},lastExecutionError:this.lastError&&Date.now()-this.lastError.timestamp<6e4?{message:this.lastError.message,timestamp:this.lastError.timestamp}:null},autonomousMode:e.settings.autonomousIndicators,availablePresets:e.settings.autonomousIndicators?qu:void 0,cycleSummary:Ju.getContextForAI("hyperliquid")},D=te.map(me=>me.symbol).join(", ");kt.updateStatus(" Analyzing",null,`AI processing ${D}...`,void 0,`Using ${s} indicators`);const _=e.settings.strategyPrompt||"Scalp trading. Buy low RSI, Sell high RSI.",W=q.cycleSummary;W&&kt.addLog("INFO",` Cycle Summary: Including ${W.length} char context from previous cycles`);const X=Date.now();if(n.aborted)throw new DOMException("Dealer cycle aborted","AbortError");const re=await tm.getDealerBatchAnalysis(q,_,n);g+=Date.now()-X;let ae=[],Ee;const ue=re;ue&&typeof ue=="object"&&!Array.isArray(ue)?(ae=ue.decisions||[],Ee=ue.cycleSummary,e.settings.autonomousIndicators&&ue.chosenPreset&&(kt.addLog("INFO",` AI chose preset: ${((E=qu[ue.chosenPreset])==null?void 0:E.emoji)||""} ${ue.chosenPreset}`),ue.presetReason&&kt.addLog("INFO",` Preset reason: ${ue.presetReason}`))):Array.isArray(ue)&&(ae=ue),Ee&&(Ju.setSummary("hyperliquid",Ee),kt.addLog("INFO",` AI Summary: ${Ee.slice(0,80)}...`));for(const me of ae){const ce=me.coin,oe=me.action,ke=me.reason,Ne=me.confidence||0,ze=F.get(ce);if(kt.addLog("REASONING",`${ce}: ${oe} (Conf: ${(Ne*100).toFixed(0)}%)`,{fullReason:ke,context:{...me,currentPrice:ze==null?void 0:ze.currentPrice,indicators:ze==null?void 0:ze.indicators,enabledIndicators:ze==null?void 0:ze.enabledIndicators,tradingCosts:ze==null?void 0:ze.tradingCosts,orderBook:ze==null?void 0:ze.orderBook,macro:ze==null?void 0:ze.macro}}),oe==="HOLD")continue;const Ze=e.settings.aggressiveMode?.5:.6;if(Ne<Ze){kt.addLog("INFO",`Skipped ${oe} on ${ce}: Confidence ${(Ne*100).toFixed(0)}% < ${(Ze*100).toFixed(0)}%`);continue}V.push({decision:me,marketContext:F.get(ce)})}A<R.length-1&&await new Promise(me=>setTimeout(me,500))}const $=V.length;kt.updateStatus(" Prioritizing",null,$>0?`Found ${$} trading signal${$>1?"s":""}`:"No actionable signals found",void 0,$>0?"Ranking by confidence...":"Monitoring for opportunities"),V.sort((A,I)=>{const M=(A.decision.confidence||0)+(A.decision.action==="CLOSE"?.5:0);return(I.decision.confidence||0)+(I.decision.action==="CLOSE"?.5:0)-M}),V.length>U&&kt.addLog("INFO",` Prioritizing top ${U} trades from ${V.length} signals (sorted by confidence)`);let K=0;const H=Date.now();for(const{decision:A,marketContext:I}of V){if(n.aborted)throw new DOMException("Dealer cycle aborted","AbortError");const M=A.coin,z=A.action,G=A.reason,te=A.confidence||0;if(K>=U&&z!=="CLOSE"){kt.addLog("INFO",` Skipping ${z} on ${M} (${(te*100).toFixed(0)}%): Cycle limit reached, lower priority`);continue}const Y=k.length;if(z==="BUY"&&Y>=e.settings.maxOpenPositions&&!k.some(D=>{var _;return D.coin===M||((_=D.position)==null?void 0:_.coin)===M})){kt.addLog("WARNING",`Ignored BUY on ${M}: Max positions reached.`);continue}if(kt.addLog("SIGNAL",` Executing ${z} on ${M} (${(te*100).toFixed(0)}% confidence)`),this.executor){let q=A.sizeUSDC||e.settings.maxPositionSizeUSDC||20;e.settings.maxPositionSizeUSDC&&(q=Math.min(q,e.settings.maxPositionSizeUSDC));const D=A.suggestedLeverage||e.settings.maxLeverage||1,_=Math.min(D,e.settings.maxLeverage||1);D>_&&kt.addLog("INFO",` Leverage capped for ${M}: ${D}x  ${_}x (max: ${e.settings.maxLeverage}x)`);const X=(this.vaultContext.balance||0)*_*.95;if(q>X&&(q=X),q<10&&z!=="CLOSE"){kt.addLog("WARNING",`Trade skipped on ${M}: Size < $10`);continue}try{const re=z==="BUY"?"":z==="SELL"?"":"";kt.updateStatus(`${re} Executing`,null,`${z} ${M} @ $${((C=I==null?void 0:I.currentPrice)==null?void 0:C.toFixed(2))||"market"}`,void 0,`Confidence: ${(te*100).toFixed(0)}%  Size: $${q.toFixed(0)}`),await this.executor({coin:M,action:z,type:A.orderType||"limit",price:A.price||(I==null?void 0:I.currentPrice),sizeUSDC:q,leverage:_,reason:G,cloid:this.generateCloid(),stopLoss:A.stopLoss,takeProfit:A.takeProfit}),K+=z!=="CLOSE"?1:0,await new Promise(ae=>setTimeout(ae,2e3))}catch(re){console.error(`[DealerService] Execution failed for ${M}:`,re),kt.addLog("ERROR",`Execution failed for ${M}: ${re.message}`)}}}x+=Date.now()-H;const B=(Date.now()-f)/1e3;console.log(`[DealerService] Cycle Telemetry: Total=${B.toFixed(1)}s, Fetch=${(m/1e3).toFixed(1)}s, AI=${(g/1e3).toFixed(1)}s, Exec=${(x/1e3).toFixed(1)}s`),Ju.recordCycle("hyperliquid",{timestamp:Date.now(),decisions:V.map(A=>({asset:A.decision.coin,action:A.decision.action,confidence:A.decision.confidence||0})),assetsAnalyzed:O}),this.consecutiveFailures=0}catch(k){if((k==null?void 0:k.name)==="AbortError"){console.log("[DealerService]  Cycle aborted by user"),kt.addLog("INFO"," Analysis cycle cancelled");return}console.error("[DealerService] Cycle Error:",k),kt.addLog("ERROR",`Cycle failed: ${k.message}`),this.lastError={message:k.message,timestamp:Date.now()}}finally{$t.releaseDealerLock(),$t.clearSharedCache(),kt.setAnalyzing(!1);const k=e.settings.checkIntervalSeconds,O=Math.floor(k/60),j=O>=1?`${O}min`:`${k}s`;kt.updateStatus(" Waiting",null,"Analysis complete, waiting for next cycle",void 0,`Next scan in ${j}`)}}setExecutor(e){this.executor=e}generateCloid(){const e=new Uint8Array(16);return crypto.getRandomValues(e),"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}}const V0=new tat;class ar{static async encrypt(e,n){const i=new TextEncoder().encode(e),s=crypto.getRandomValues(new Uint8Array(16)),o=await this.deriveKey(n,s),a=crypto.getRandomValues(new Uint8Array(12)),l=await crypto.subtle.encrypt({name:"AES-GCM",iv:a},o,i),c=new Uint8Array(s.byteLength+a.byteLength+l.byteLength);return c.set(s,0),c.set(a,s.byteLength),c.set(new Uint8Array(l),s.byteLength+a.byteLength),btoa(String.fromCharCode(...c))}static async decrypt(e,n){try{const r=atob(e),i=new Uint8Array(r.length);for(let f=0;f<r.length;f++)i[f]=r.charCodeAt(f);const s=i.slice(0,16),o=i.slice(16,28),a=i.slice(28),l=await this.deriveKey(n,s),c=await crypto.subtle.decrypt({name:"AES-GCM",iv:o},l,a);return new TextDecoder().decode(c)}catch{throw new Error("Failed to decrypt. Wrong password or corrupted data.")}}static async deriveKey(e,n){const r=new TextEncoder,i=await crypto.subtle.importKey("raw",r.encode(e),"PBKDF2",!1,["deriveKey"]);return crypto.subtle.deriveKey({name:"PBKDF2",salt:n,iterations:1e5,hash:"SHA-256"},i,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}}const nat=(t,e)=>{const n=T.useSyncExternalStore(c=>kt.subscribe(c),()=>kt.getSnapshot()),r=T.useRef(!1);return T.useEffect(()=>{var f,m;const u=tm.getApiKey()||void 0||((m=(f=window.process)==null?void 0:f.env)==null?void 0:m.GEMINI_API_KEY);u&&tm.initialize(u)},[]),T.useEffect(()=>{V0.setVaultContext({walletAddress:t.hlPublicKey,balance:t.hlBalance||0})},[t.hlBalance,t.hlPublicKey]),T.useEffect(()=>{V0.setExecutor(async c=>{var u;if(console.log("[useDealer] GENUINE EXECUTION TRIGGERED:",c),!t.isUnlocked||!t.hlPublicKey||!t.hlEncryptedPrivateKey){kt.addLog("ERROR","Cannot execute: Vault locked or HL not initialized");return}try{if(!e)throw new Error("Password required for execution");const f=await ar.decrypt(t.hlEncryptedPrivateKey,e),m=$t.getWalletFromPrivateKey(f);kt.addLog("TRADE",` EXECUTING ${c.action} ${c.coin}...`,{reason:c.reason,confidence:c.confidence});let g=c.action==="BUY",x=!1;if(c.action==="CLOSE"){console.log("[useDealer] Seeking position for CLOSE:",c.coin),console.log("[useDealer] Cached Positions (may be stale):",(u=t.hlPositions)==null?void 0:u.map(te=>{var Y;return((Y=te==null?void 0:te.position)==null?void 0:Y.coin)||(te==null?void 0:te.coin)})),kt.addLog("INFO",`Fetching current positions for ${c.coin}...`);let z=[];try{const te=await $t.getUserState(t.hlPublicKey);z=(te==null?void 0:te.assetPositions)||[],console.log("[useDealer] Fresh Positions from API:",z.map(Y=>{var q;return((q=Y==null?void 0:Y.position)==null?void 0:q.coin)||(Y==null?void 0:Y.coin)}))}catch(te){console.error("[useDealer] Failed to fetch fresh positions:",te),kt.addLog("ERROR",`Failed to fetch positions: ${te.message}`);return}const G=z.find(te=>{var Y;return((Y=te.position)==null?void 0:Y.coin)===c.coin});if(G&&parseFloat(G.position.szi)!==0){const te=G.position.szi,Y=parseFloat(te);g=Y<0,x=!0,kt.addLog("INFO",`Closing ${Y} ${c.coin} (Side: ${g?"BUY":"SELL"}, ReduceOnly: Yes)`)}else{kt.addLog("WARNING",`CLOSE signal ignored: No open position found for ${c.coin}`),console.log("[useDealer] Position not found or size is 0. Available positions:",z.map(te=>{var Y,q;return`${(Y=te==null?void 0:te.position)==null?void 0:Y.coin}: ${(q=te==null?void 0:te.position)==null?void 0:q.szi}`}));return}}const v=c.type==="market";kt.addLog("INFO","Fetching market data...");const w=await Hn.getMarketData(c.coin),E=parseFloat(w.levels[0][0].px),C=parseFloat(w.levels[1][0].px),k=g?C:E,O=await Hn.getAssetDecimals(c.coin),j=c.sizeUSDC||n.settings.maxPositionSizeUSDC||20,R=j/k,U=parseFloat(R.toFixed(O));let V,F=v?"ioc":"limit";const $=Math.max(0,6-O);if(v){let G=g?k*1.05:k*.95,te=parseFloat(G.toFixed($));te=parseFloat(te.toPrecision(5)),V=parseFloat(te.toFixed($))}else{const z=c.price||k;let G=parseFloat(z.toFixed($));G=parseFloat(G.toPrecision(5)),V=parseFloat(G.toFixed($)),console.log(`[useDealer] Limit price rounded: ${z} -> ${V} (maxDecimals=${$})`)}const K=c.leverage||n.settings.maxLeverage||1,H=Math.min(K,n.settings.maxLeverage||1);if(K>H&&kt.addLog("INFO",` Leverage capped for ${c.coin}: ${K}x  ${H}x (max: ${n.settings.maxLeverage}x)`),H>1)try{await Hn.updateLeverage(m,c.coin,H,!1)}catch(z){console.warn(`[useDealer] Leverage update failed, using current: ${z.message}`),kt.addLog("WARNING",`Leverage update failed (using current): ${z.message.slice(0,50)}...`)}console.log("[useDealer SL/TP DEBUG] Settings:",{stopLossEnabled:n.settings.stopLossEnabled,stopLossPercent:n.settings.stopLossPercent,takeProfitEnabled:n.settings.takeProfitEnabled,takeProfitPercent:n.settings.takeProfitPercent}),console.log("[useDealer SL/TP DEBUG] AI Intent:",{stopLoss:c.stopLoss,takeProfit:c.takeProfit});let B;if(n.settings.stopLossEnabled&&!x)if(n.settings.stopLossPercent!==null){const z=n.settings.stopLossPercent/100;B=g?V*(1-z):V*(1+z),kt.addLog("INFO",` Stop Loss: ${n.settings.stopLossPercent}%  $${B.toFixed(2)}`)}else c.stopLoss&&(B=c.stopLoss,kt.addLog("INFO",` Stop Loss (AI): $${B.toFixed(2)}`));let A;if(n.settings.takeProfitEnabled&&!x)if(n.settings.takeProfitPercent!==null){const z=n.settings.takeProfitPercent/100;A=g?V*(1+z):V*(1-z),kt.addLog("INFO",` Take Profit: ${n.settings.takeProfitPercent}%  $${A.toFixed(2)}`)}else c.takeProfit&&(A=c.takeProfit,kt.addLog("INFO",` Take Profit (AI): $${A.toFixed(2)}`));const I=B||A;kt.addLog("INFO",`Placing ${F.toUpperCase()} order: ${U} ${c.coin} @ ${V.toFixed(2)}${I?" (with SL/TP)":""}`);const M=await Hn.createOrder(m,c.coin,g,U,V,{orderType:F,reduceOnly:x,cloid:c.cloid,stopLoss:B,takeProfit:A});kt.addLog("INFO",`Order Placed: ${M.status||"Submitted"}`),kt.addOperationRecord({coin:c.coin,action:c.action,timestamp:Date.now(),entryPrice:V,size:U,sizeUSDC:j,reasoning:c.reason||"AI analysis decision",confidence:c.confidence||.7,status:c.action==="CLOSE"?"CLOSED":"OPEN",cloid:c.cloid})}catch(f){console.error("Execution Error:",f),kt.addLog("ERROR",`Execution Failed: ${f.message}`)}}),r.current=!0},[t.isUnlocked,t.hlPublicKey,e,n.settings.maxPositionSizeUSDC,n.settings.maxLeverage,n.settings.stopLossEnabled,n.settings.stopLossPercent,n.settings.takeProfitEnabled,n.settings.takeProfitPercent]),{...n,toggleDealer:c=>{kt.toggleDealer(c),c?V0.startLoop():V0.stopLoop()},updateSettings:c=>{kt.updateSettings(c)},applyChanges:()=>{kt.reload(),n.isOn&&(V0.stopLoop(),setTimeout(()=>V0.startLoop(),500))},saveStrategy:c=>{kt.setStrategyPrompt(c)},clearLogs:()=>{kt.clearLogs()}}},rat=({vaultAddress:t,setActiveTab:e})=>{const[n,r]=T.useState([]),[i,s]=T.useState([]),[o,a]=T.useState(!1),[l,c]=T.useState(null),u=T.useSyncExternalStore(m=>kt.subscribe(m),()=>kt.getSnapshot()),f=async()=>{if(t){a(!0);try{const m=await Hn.getUserState(t);if(m&&m.assetPositions){const x=m.assetPositions.filter(v=>parseFloat(v.position.szi)!==0).map(v=>({coin:v.position.coin,szi:v.position.szi,entryPx:v.position.entryPx,positionValue:v.position.positionValue,unrealizedPnl:v.position.unrealizedPnl,returnOnEquity:v.position.returnOnEquity,liquidationPx:v.position.liquidationPx,leverage:v.position.leverage}));r(x)}const g=await Hn.getOpenOrders(t);g&&Array.isArray(g)&&s(g.map(x=>({oid:x.oid,coin:x.coin,side:x.side,limitPx:x.limitPx,sz:x.sz,orderType:x.orderType,timestamp:x.timestamp}))),c(new Date)}catch(m){console.error("[DealerOpenOrders] Failed to fetch data:",m)}finally{a(!1)}}};return T.useEffect(()=>{u.isAnalyzing||f();const m=setInterval(()=>{!u.isAnalyzing&&!u.pendingExecution&&f()},3e4);return()=>clearInterval(m)},[t,u.isAnalyzing,u.pendingExecution]),h.jsxs("div",{className:"flex flex-col min-h-[150px]",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[h.jsx(Mz,{className:"h-4 w-4 text-[#E7FE55]"}),"Open Trading"]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs("button",{onClick:()=>e(Ce.HYPERLIQUID),className:"text-[10px] bg-[#E7FE55]/10 hover:bg-[#E7FE55]/20 text-[#E7FE55] border border-[#E7FE55]/30 px-3 py-1.5 rounded transition-colors flex items-center gap-2 uppercase tracking-wider font-medium",title:"View Trading Page",children:[h.jsx(Rn,{size:12})," Details"]}),h.jsx("button",{onClick:f,className:`p-1.5 rounded hover:bg-[#1a1b21] transition-colors ${o?"animate-spin text-[#60a5fa]":"text-[#747580]"}`,title:"Refresh",children:h.jsx(Cc,{className:"h-3.5 w-3.5"})}),h.jsxs("span",{className:"text-[10px] text-[#747580] bg-[#1a1b21] px-2 py-1 rounded uppercase tracking-wider",children:[n.length," Pos  ",i.length," Ord"]})]})]}),h.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:n.length===0&&i.length===0?h.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-[#747580] gap-2 py-8 bg-[#0f1015] rounded border border-[#232328]",children:[h.jsx(Mz,{className:"h-8 w-8 opacity-30"}),h.jsx("span",{className:"text-[11px]",children:"No open positions or active orders"})]}):h.jsxs("div",{className:"flex flex-col gap-4",children:[n.length>0&&h.jsxs("div",{className:"bg-[#0f1015] rounded border border-[#232328] overflow-hidden",children:[h.jsxs("div",{className:"px-4 py-2 border-b border-[#232328] flex items-center gap-2",children:[h.jsx(Mg,{className:"h-3.5 w-3.5 text-[#E7FE55]"}),h.jsx("span",{className:"text-[10px] font-semibold text-[#E7FE55] uppercase tracking-[0.1em]",children:"Active Positions"})]}),h.jsxs("table",{className:"w-full text-left text-[10px]",children:[h.jsx("thead",{children:h.jsxs("tr",{className:"text-[#747580] border-b border-[#232328]",children:[h.jsx("th",{className:"px-4 py-2 font-medium text-[9px] uppercase tracking-[0.05em]",children:"Pair"}),h.jsx("th",{className:"px-4 py-2 font-medium text-[9px] uppercase tracking-[0.05em]",children:"Side"}),h.jsx("th",{className:"px-4 py-2 font-medium text-right text-[9px] uppercase tracking-[0.05em]",children:"Size"}),h.jsx("th",{className:"px-4 py-2 font-medium text-right text-[9px] uppercase tracking-[0.05em]",children:"Entry"}),h.jsx("th",{className:"px-4 py-2 font-medium text-right text-[9px] uppercase tracking-[0.05em]",children:"Liq. Price"}),h.jsx("th",{className:"px-4 py-2 font-medium text-right text-[9px] uppercase tracking-[0.05em]",children:"PnL (ROE%)"})]})}),h.jsx("tbody",{children:n.map(m=>{var C;const g=parseFloat(m.unrealizedPnl),x=(parseFloat(m.returnOnEquity)*100).toFixed(2),v=g>=0,w=parseFloat(m.szi)>0,E=((C=m.leverage)==null?void 0:C.value)||0;return h.jsxs("tr",{className:"border-b border-[#232328]/50 last:border-0 hover:bg-[#1a1b21] transition-colors",children:[h.jsx("td",{className:"px-4 py-3 font-semibold text-white",children:m.coin}),h.jsx("td",{className:"px-4 py-3",children:h.jsxs("span",{className:`px-1.5 py-0.5 rounded text-[9px] font-semibold uppercase tracking-wider ${w?"bg-[#34d399]/15 text-[#34d399]":"bg-red-500/15 text-red-400"}`,children:[w?"LONG":"SHORT"," ",E,"x"]})}),h.jsxs("td",{className:`px-4 py-3 text-right font-mono ${parseFloat(m.szi)>0?"text-[#34d399]":"text-red-400"}`,children:[parseFloat(m.szi)>0?"+":"",m.szi]}),h.jsxs("td",{className:"px-4 py-3 text-right text-[#a0a1a8] font-mono",children:["$",parseFloat(m.entryPx).toFixed(4)]}),h.jsx("td",{className:"px-4 py-3 text-right text-[#747580] font-mono",children:m.liquidationPx?`$${parseFloat(m.liquidationPx).toFixed(4)}`:"-"}),h.jsxs("td",{className:`px-4 py-3 text-right font-mono font-semibold ${v?"text-[#34d399]":"text-red-400"}`,children:[v?"+":"",g.toFixed(2)," (",v?"+":"",x,"%)"]})]},m.coin)})})]})]}),i.length>0&&h.jsxs("div",{className:"bg-[#0f1015] rounded border border-[#232328] overflow-hidden",children:[h.jsxs("div",{className:"px-4 py-2 border-b border-[#232328] flex items-center gap-2",children:[h.jsx(VC,{className:"h-3.5 w-3.5 text-[#E7FE55]"}),h.jsx("span",{className:"text-[10px] font-semibold text-[#E7FE55] uppercase tracking-[0.1em]",children:"Active Orders"})]}),h.jsxs("table",{className:"w-full text-left text-[10px]",children:[h.jsx("thead",{children:h.jsxs("tr",{className:"text-[#747580] border-b border-[#232328]",children:[h.jsx("th",{className:"px-4 py-2 font-medium text-[9px] uppercase tracking-[0.05em]",children:"Pair"}),h.jsx("th",{className:"px-4 py-2 font-medium text-[9px] uppercase tracking-[0.05em]",children:"Side"}),h.jsx("th",{className:"px-4 py-2 font-medium text-[9px] uppercase tracking-[0.05em]",children:"Type"}),h.jsx("th",{className:"px-4 py-2 font-medium text-right text-[9px] uppercase tracking-[0.05em]",children:"Size"}),h.jsx("th",{className:"px-4 py-2 font-medium text-right text-[9px] uppercase tracking-[0.05em]",children:"Price"}),h.jsx("th",{className:"px-4 py-2 font-medium text-right text-[9px] uppercase tracking-[0.05em]",children:"Action"})]})}),h.jsx("tbody",{children:i.map(m=>{var g;return h.jsxs("tr",{className:"border-b border-[#232328]/50 last:border-0 hover:bg-[#1a1b21] transition-colors",children:[h.jsx("td",{className:"px-4 py-3 font-semibold text-white",children:m.coin}),h.jsx("td",{className:"px-4 py-3",children:h.jsx("span",{className:`px-1.5 py-0.5 rounded text-[9px] font-semibold uppercase tracking-wider ${m.side==="B"?"bg-[#34d399]/15 text-[#34d399]":"bg-red-500/15 text-red-400"}`,children:m.side==="B"?"BUY":"SELL"})}),h.jsx("td",{className:"px-4 py-3 text-[#a0a1a8] uppercase",children:((g=m.orderType)==null?void 0:g.split(" ")[0])||"Limit"}),h.jsx("td",{className:"px-4 py-3 text-right text-[#a0a1a8] font-mono",children:m.sz}),h.jsxs("td",{className:"px-4 py-3 text-right text-[#a0a1a8] font-mono",children:["$",parseFloat(m.limitPx).toFixed(4)]}),h.jsx("td",{className:"px-4 py-3 text-right",children:h.jsx("span",{className:"text-[#747580] text-[9px] italic",children:"Pending"})})]},m.oid)})})]})]})]})}),h.jsx("div",{className:"pt-4 flex justify-end",children:h.jsxs("a",{href:"https://app.hyperliquid-testnet.xyz/trade",target:"_blank",rel:"noopener noreferrer",className:"text-[10px] text-[#E7FE55] hover:text-[#E7FE55]/80 flex items-center gap-1 transition-colors",title:"Hyperliquid Platform Official Website",children:[h.jsx(Rn,{size:10})," Hyperliquid Platform Testnet"]})})]})},whe=t=>{const e=T.useSyncExternalStore(n=>Ju.subscribe(t,n),()=>Ju.getSnapshot(t));return T.useEffect(()=>{Ju.loadState(t)},[t]),{summary:e.aiSummary,isGenerating:e.isGenerating,cycleCount:e.recentCycles.length,lastUpdate:e.lastSummaryTime,hasSummary:!!e.aiSummary&&e.aiSummary.length>0}},iat=t=>{const e=t.match(/(\w+):/);return e?e[1]:null},q5=8,sat=({status:t,onToggle:e,vaultAddress:n,setActiveTab:r})=>{var q,D;const[i,s]=T.useState([]),[o,a]=T.useState([]),[l,c]=T.useState(0),[u,f]=T.useState({totalPnl:0,winRate:0,totalVolume:0,tradesWithPnl:0}),[m,g]=T.useState(0),x="hl_dealer_metrics_baseline",[v,w]=T.useState(null),[E,C]=T.useState(!1);T.useEffect(()=>{(async()=>{try{const W=await Ie.getItem(Ie.getUserKey(x));W&&w(parseInt(W,10))}catch(W){console.warn("[DealerDashboard] Failed to load baseline:",W)}C(!0)})()},[]);const k=T.useCallback(async()=>{const _=Date.now();w(_);try{await Ie.setItem(Ie.getUserKey(x),_.toString()),console.log("[DealerDashboard] Metrics baseline reset to:",new Date(_).toISOString())}catch(W){console.error("[DealerDashboard] Failed to save baseline:",W)}},[]),[O,j]=T.useState(!1),{summary:R,isGenerating:U,cycleCount:V,lastUpdate:F,hasSummary:$}=whe("hyperliquid"),[K,H]=T.useState(0),B=T.useMemo(()=>t.logs.filter(_=>_.type==="REASONING"||_.type==="SIGNAL").slice(0,20),[t.logs]),A=T.useMemo(()=>{var W,X;const _=new Map;for(const re of B){const ae=iat(re.message)||((X=(W=re.details)==null?void 0:W.context)==null?void 0:X.coin);ae&&!_.has(ae)&&_.set(ae,re)}return Array.from(_.entries()).sort((re,ae)=>ae[1].timestamp-re[1].timestamp).map(([re,ae])=>({coin:re,log:ae}))},[B]);T.useEffect(()=>{A.length>0&&!t.isAnalyzing&&H(0)},[A.length,t.isAnalyzing]);const I=A[K],M=T.useMemo(()=>[...i].reverse(),[i]);Math.ceil(M.length/q5),T.useMemo(()=>{const _=l*q5;return M.slice(_,_+q5)},[M,l]);const z=T.useCallback((_,W)=>{const X=W?_.filter(ke=>ke.time>=W):_;let re=0,ae=0,Ee=0,ue=0,me=0;const ce=X.map(ke=>{const Ne=parseFloat(ke.closedPnl||"0"),ze=parseFloat(ke.fee||"0"),Ze=Ne-ze;return Ne!==0&&(me++,Ze>0?ae++:Ze<0&&Ee++),re+=Ze,ue+=parseFloat(ke.px)*parseFloat(ke.sz),{time:ke.time,date:new Date(ke.time).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),pnl:re,rawPnl:Ne}}),oe=ae+Ee;f({totalPnl:re,winRate:oe>0?ae/oe*100:0,totalVolume:ue,tradesWithPnl:me}),a(ce)},[]);T.useEffect(()=>{if(!n)return;const _=async()=>{try{if($t.isDealerActive()){console.log("[Dashboard]   Skipping fetch - dealer is active");return}const X=await $t.getUserFillsShared(n);if(X&&Array.isArray(X)){const Ee=[...X.filter(ue=>ue.cloid||ue.c)].sort((ue,me)=>ue.time-me.time);s(Ee),z(Ee,v)}const re=await $t.getUserStateShared(n);if(re&&re.assetPositions){const ae=re.assetPositions.reduce((Ee,ue)=>Ee+parseFloat(ue.position.unrealizedPnl||"0"),0);g(ae)}}catch(X){console.error("Failed to load dealer history",X)}};_();const W=setInterval(_,3e4);return()=>clearInterval(W)},[n,v,z]),T.useEffect(()=>{i.length>0&&z(i,v)},[v,i,z]);const G=()=>{e(!t.isOn)},te=()=>{H(_=>Math.min(A.length-1,_+1))},Y=()=>{H(_=>Math.max(0,_-1))};return h.jsxs("div",{className:"flex flex-col h-full gap-4 overflow-y-auto custom-scrollbar pb-4",children:[h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 shrink-0",children:[h.jsxs("div",{className:"lg:col-span-2 flex flex-col gap-4",children:[h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[h.jsxs("div",{className:"glass-panel p-4 rounded flex flex-wrap items-center justify-between gap-2",children:[h.jsxs("div",{className:`px-3 py-1.5 rounded border flex items-center gap-2 transition-all ${t.isOn?"bg-[#E7FE55]/10 border-[#E7FE55]/30":"bg-[#1a1b21] border-[#232328]"}`,children:[h.jsxs("span",{className:"relative flex h-2 w-2",children:[t.isOn&&h.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-[#E7FE55] opacity-75"}),h.jsx("span",{className:`relative inline-flex rounded-full h-2 w-2 ${t.isOn?"bg-[#E7FE55]":"bg-red-500"}`})]}),h.jsx("span",{className:`font-semibold tracking-wider text-[10px] uppercase ${t.isOn?"text-[#E7FE55]":"text-[#747580]"}`,children:t.isOn?"ACTIVE":"OFFLINE"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-[9px] font-medium text-[#747580] uppercase tracking-[0.1em]",children:"Master"}),h.jsx("button",{onClick:G,className:`relative inline-flex h-5 w-9 items-center rounded-full transition-all focus:outline-none ${t.isOn?"bg-[#E7FE55]":"bg-[#232328] hover:bg-[#2a2b30]"}`,children:h.jsx("span",{className:`${t.isOn?"translate-x-5":"translate-x-1"} inline-block h-3 w-3 transform rounded-full bg-black transition-transform`})})]})]}),h.jsxs("div",{className:"glass-panel p-4 rounded relative group",children:[h.jsxs("div",{className:"flex items-center justify-between mb-1",children:[h.jsx("div",{className:"text-[10px] text-[#747580] uppercase tracking-[0.1em]",children:"Total Profit"}),h.jsx("button",{onClick:k,className:"p-1 rounded opacity-0 group-hover:opacity-100 transition-opacity text-[#747580] hover:text-[#E7FE55] hover:bg-[#1a1b21]",title:"Reset metrics from now",children:h.jsx(ITe,{size:12})})]}),h.jsxs("div",{className:`text-xl font-semibold font-mono tracking-tight ${u.totalPnl>=0?"text-[#34d399]":"text-red-400"}`,children:[u.totalPnl>=0?"+":"",u.totalPnl.toFixed(2)," USD"]}),v&&h.jsxs("div",{className:"text-[8px] text-[#3a3b42] mt-1",title:`Measuring since ${new Date(v).toLocaleString()}`,children:["Since ",new Date(v).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),h.jsxs("div",{className:"glass-panel p-4 rounded",children:[h.jsx("div",{className:"text-[10px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Unrealized PnL"}),h.jsxs("div",{className:`text-xl font-semibold font-mono tracking-tight ${m>=0?"text-[#34d399]":"text-red-400"}`,children:[m>=0?"+":"",m.toFixed(2)," USD"]})]}),h.jsxs("div",{className:"glass-panel p-4 rounded",children:[h.jsx("div",{className:"text-[10px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Win Rate"}),h.jsxs("div",{className:"text-xl font-semibold text-white font-mono tracking-tight",children:[u.winRate.toFixed(1),"%"]})]})]}),h.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[h.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[h.jsxs("div",{className:"flex flex-col",children:[h.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Exposure"}),h.jsxs("span",{className:"text-white font-mono text-sm font-semibold",children:["$",t.currentExposure.toLocaleString()]})]}),h.jsx(ed,{className:"h-4 w-4 text-[#747580]"})]}),h.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[h.jsxs("div",{className:"flex flex-col",children:[h.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Active Pairs"}),h.jsx("span",{className:"text-white font-mono text-sm font-semibold",children:t.settings.tradingPairs.length})]}),h.jsx(aw,{className:"h-4 w-4 text-[#747580]"})]}),h.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[h.jsxs("div",{className:"flex flex-col",children:[h.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Interval"}),h.jsxs("span",{className:"text-white font-mono text-sm font-semibold",children:[t.settings.checkIntervalSeconds,"s"]})]}),h.jsx(Ua,{className:"h-4 w-4 text-[#747580]"})]}),h.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[h.jsxs("div",{className:"flex flex-col",children:[h.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Max Leverage"}),h.jsxs("span",{className:"text-white font-mono text-sm font-semibold",children:[t.settings.maxLeverage,"x"]})]}),h.jsx(yl,{className:"h-4 w-4 text-[#747580]"})]})]}),h.jsxs("div",{className:"glass-panel p-5 rounded min-h-[220px] flex flex-col flex-1",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[h.jsx(Rn,{className:"h-4 w-4 text-[#E7FE55]"}),h.jsx("span",{className:"text-sm font-semibold text-white",children:"Performance Curve"})]}),h.jsx("div",{className:"flex-1 w-full",children:o.length>0?h.jsx(_w,{width:"100%",height:"100%",minWidth:100,minHeight:100,children:h.jsxs(pde,{data:o,children:[h.jsx("defs",{children:h.jsxs("linearGradient",{id:"colorPnl",x1:"0",y1:"0",x2:"0",y2:"1",children:[h.jsx("stop",{offset:"5%",stopColor:"#E7FE55",stopOpacity:.2}),h.jsx("stop",{offset:"95%",stopColor:"#E7FE55",stopOpacity:0})]})}),h.jsx($w,{strokeDasharray:"3 3",stroke:"#232328",vertical:!1}),h.jsx(Hw,{dataKey:"date",stroke:"#747580",fontSize:10,tickLine:!1,axisLine:!1}),h.jsx(Vw,{stroke:"#747580",fontSize:10,tickLine:!1,axisLine:!1,tickFormatter:_=>`$${_}`}),h.jsx(Bk,{contentStyle:{backgroundColor:"#14151a",borderColor:"#232328",borderRadius:"4px"},itemStyle:{color:"#E7FE55"},formatter:_=>[`$${_.toFixed(2)}`,"Net PnL"]}),h.jsx(pN,{type:"monotone",dataKey:"pnl",stroke:"#E7FE55",strokeWidth:1.5,fillOpacity:1,fill:"url(#colorPnl)"})]})}):h.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-[#747580]",children:[h.jsx(yl,{className:"h-8 w-8 mb-2 opacity-40"}),h.jsx("span",{className:"text-[11px]",children:"No performance data yet"})]})})]})]}),h.jsxs("div",{className:"glass-panel p-5 rounded flex flex-col",children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(bc,{className:`h-4 w-4 shrink-0 ${t.isAnalyzing?"text-[#E7FE55] animate-pulse":"text-[#E7FE55]/60"}`}),h.jsxs("div",{className:"flex items-center bg-[#0f1015] rounded-full p-0.5 border border-[#232328]",children:[h.jsx("button",{onClick:()=>j(!1),className:`px-2 py-0.5 rounded-full text-[9px] font-semibold uppercase tracking-wider transition-all ${O?"text-[#747580] hover:text-white":"bg-[#E7FE55] text-black"}`,children:"Live"}),h.jsx("button",{onClick:()=>$&&j(!0),disabled:!$,className:`px-2 py-0.5 rounded-full text-[9px] font-semibold uppercase tracking-wider transition-all ${O?"bg-[#E7FE55] text-black":$?"text-[#747580] hover:text-white":"text-[#3a3b42] cursor-not-allowed"}`,title:$?"View AI Summary":`Available after ${2-V} more cycles`,children:"Summary"})]}),t.isAnalyzing&&!O&&h.jsx("span",{className:"px-2 py-0.5 rounded bg-[#E7FE55]/15 text-[#E7FE55] text-[9px] font-semibold uppercase tracking-wider animate-pulse",children:"LIVE"})]}),!t.isAnalyzing&&A.length>0&&!O&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("button",{onClick:te,disabled:K>=A.length-1,className:`p-1 rounded transition-colors ${K>=A.length-1?"text-[#3a3b42] cursor-not-allowed":"text-[#747580] hover:text-white hover:bg-[#1a1b21]"}`,title:"Previous coin",children:h.jsx(PT,{size:16})}),h.jsxs("span",{className:"text-[10px] text-[#747580] font-mono min-w-[32px] text-center",children:[K+1,"/",A.length]}),h.jsx("button",{onClick:Y,disabled:K<=0,className:`p-1 rounded transition-colors ${K<=0?"text-[#3a3b42] cursor-not-allowed":"text-[#747580] hover:text-white hover:bg-[#1a1b21]"}`,title:"Next coin",children:h.jsx(rm,{size:16})})]})]}),O?h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("span",{className:"px-2 py-0.5 rounded bg-[#E7FE55]/15 text-[#E7FE55] text-[9px] font-semibold uppercase tracking-wider",children:[V," cycles"]}),U&&h.jsx("span",{className:"text-[10px] text-[#747580] animate-pulse",children:"generating..."})]}),F>0&&h.jsx("span",{className:"text-[10px] text-[#747580] font-mono",children:new Date(F).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),h.jsx("div",{className:"flex-1 bg-[#0f1015] rounded p-3 border border-[#232328] overflow-y-auto custom-scrollbar min-h-0 mb-3",children:R?h.jsx("p",{className:"text-[13px] text-[#a0a1a8] leading-relaxed whitespace-pre-wrap",children:R}):h.jsx("p",{className:"text-[13px] text-[#747580] italic",children:"Summary will be generated after 2+ analysis cycles..."})})]}):t.isAnalyzing?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"flex items-center justify-between mb-3",children:h.jsx("span",{className:`px-2 py-0.5 rounded text-[9px] font-semibold uppercase tracking-wider ${t.currentSignal==="BULLISH"?"bg-[#34d399]/15 text-[#34d399]":t.currentSignal==="BEARISH"?"bg-red-500/15 text-red-400":"bg-[#1a1b21] text-[#747580]"}`,children:t.currentSignal||"ANALYZING"})}),h.jsx("div",{className:"flex-1 bg-[#0f1015] rounded p-3 border border-[#232328] overflow-y-auto custom-scrollbar min-h-0 mb-3",children:h.jsxs("p",{className:"text-[13px] text-[#a0a1a8] italic leading-relaxed",children:['"',t.trendAssessment,'"']})})]}):I?h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"px-2 py-1 rounded bg-[#E7FE55]/15 text-[#E7FE55] text-xs font-semibold uppercase tracking-wider",children:I.coin}),h.jsx("span",{className:"text-[10px] text-[#747580] font-mono",children:new Date(I.log.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),((q=I.log.details)==null?void 0:q.signal)&&h.jsx("span",{className:`px-2 py-0.5 rounded text-[9px] font-semibold uppercase tracking-wider ${I.log.details.signal==="BUY"||I.log.details.signal==="LONG"?"bg-[#34d399]/15 text-[#34d399]":I.log.details.signal==="SELL"||I.log.details.signal==="SHORT"?"bg-red-500/15 text-red-400":"bg-[#1a1b21] text-[#747580]"}`,children:I.log.details.signal})]}),h.jsx("div",{className:"flex-1 bg-[#0f1015] rounded p-3 border border-[#232328] overflow-y-auto custom-scrollbar min-h-0 mb-3",children:h.jsxs("p",{className:"text-[13px] text-[#a0a1a8] italic leading-relaxed whitespace-pre-wrap",children:['"',((D=I.log.details)==null?void 0:D.fullReason)||I.log.message,'"']})})]}):h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"flex items-center justify-between mb-3",children:h.jsx("span",{className:`px-2 py-0.5 rounded text-[9px] font-semibold uppercase tracking-wider ${t.currentSignal==="BULLISH"?"bg-[#34d399]/15 text-[#34d399]":t.currentSignal==="BEARISH"?"bg-red-500/15 text-red-400":"bg-[#1a1b21] text-[#747580]"}`,children:t.currentSignal||"NEUTRAL"})}),h.jsx("div",{className:"flex-1 bg-[#0f1015] rounded p-3 border border-[#232328] overflow-y-auto custom-scrollbar min-h-0 mb-3",children:h.jsxs("p",{className:"text-[13px] text-[#a0a1a8] italic leading-relaxed",children:['"',t.trendAssessment,'"']})})]}),h.jsxs("div",{className:"pt-3 border-t border-[#232328] flex flex-col gap-2 shrink-0",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.05em] w-12 shrink-0",children:"Task"}),h.jsx("div",{className:"text-[10px] text-white truncate font-mono flex-1",children:t.currentTask||" Idle"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.05em] w-12 shrink-0",children:"Status"}),h.jsx("div",{className:"text-[10px] text-[#a0a1a8] font-mono truncate flex-1",children:t.statusMessage})]}),t.statusDetail&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.05em] w-12 shrink-0",children:"Info"}),h.jsx("div",{className:"text-[10px] text-[#E7FE55] truncate flex-1",children:t.statusDetail})]})]})]})]}),h.jsx("div",{className:"glass-panel p-5 rounded shrink-0",children:h.jsx(rat,{vaultAddress:n,setActiveTab:r})})]})},oat=({logs:t,onClearLogs:e})=>{const[n,r]=T.useState(null),i=t.filter(l=>{if(["REASONING","SIGNAL","TRADE","ERROR"].includes(l.type))return!0;if(["INFO","WARNING"].includes(l.type)){const c=l.message.toLowerCase();return c.includes("executing")||c.includes("skipping")||c.includes("ignored")}return!1}),s=(l,c)=>l==="ERROR"?h.jsx("div",{className:"text-red-400",children:h.jsx(m4,{size:16})}):l==="TRADE"?h.jsx("div",{className:"text-[#34d399]",children:h.jsx(Gy,{size:16})}):c.includes("BUY")||c.includes("BULLISH")?h.jsx("div",{className:"text-[#34d399]",children:h.jsx(Rn,{size:16})}):c.includes("SELL")||c.includes("BEARISH")||c.includes("SHORT")?h.jsx("div",{className:"text-red-400",children:h.jsx(qC,{size:16})}):c.includes("CLOSE")?h.jsx("div",{className:"text-orange-400",children:h.jsx(m4,{size:16})}):h.jsx("div",{className:"text-[#E7FE55]",children:h.jsx(bc,{size:16})}),o=l=>new Date(l).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}),a=l=>typeof l=="number"?l.toFixed(2):typeof l=="object"&&l!==null?Object.entries(l).map(([c,u])=>`${c}: ${typeof u=="number"?u.toFixed(2):u}`).join(", "):String(l);return h.jsxs("div",{className:"flex flex-col h-full overflow-hidden",children:[h.jsxs("div",{className:"p-4 border-b border-[#232328] flex justify-between items-center shrink-0",children:[h.jsxs("h3",{className:"text-sm font-semibold flex items-center gap-2 text-white",children:[h.jsx(bc,{className:"h-4 w-4 text-[#E7FE55]"}),"AI Reasoning Log"]}),h.jsx("button",{onClick:e,className:"text-[10px] text-[#747580] hover:text-white transition-colors uppercase tracking-wider",children:"Clear History"})]}),h.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar",children:i.length===0?h.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-[#747580] opacity-50 py-12",children:[h.jsx(bc,{size:48,className:"mb-4 opacity-30"}),h.jsx("p",{className:"text-sm",children:"No analysis recorded yet."}),h.jsx("p",{className:"text-[10px] text-[#747580]",children:"Start the dealer to see its thought process."})]}):i.map(l=>{var m,g;const c=n===l.id,u=(m=l.details)==null?void 0:m.context,f=(g=l.details)==null?void 0:g.context;return h.jsxs("div",{className:"relative pl-6 pb-2 border-l border-[#232328] last:border-0 transition-colors group",children:[h.jsx("div",{className:"absolute -left-[5px] top-1 w-2.5 h-2.5 rounded-full bg-[#14151a] border border-[#232328] group-hover:border-[#747580] transition-colors"}),h.jsxs("div",{className:"bg-[#14151a] p-3 rounded border border-[#232328] hover:border-[#3a3b42] transition-all",children:[h.jsxs("div",{className:"flex items-center justify-between mb-1",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[s(l.type,l.message),h.jsx("span",{className:`text-[10px] font-semibold uppercase tracking-wider ${l.type==="ERROR"?"text-red-400":l.type==="TRADE"?"text-[#34d399]":l.type==="SIGNAL"?"text-[#E7FE55]":"text-[#a0a1a8]"}`,children:l.type})]}),h.jsxs("span",{className:"text-[10px] text-[#747580] flex items-center gap-1 font-mono",children:[h.jsx(Ua,{size:10}),o(l.timestamp)]})]}),h.jsx("p",{className:"text-sm text-[#a0a1a8] leading-relaxed",children:l.message}),l.details&&l.details.fullReason&&h.jsxs("div",{className:"mt-2 p-2 bg-[#0f1015] rounded text-[11px] text-[#747580] font-mono italic border-l-2 border-[#60a5fa]/30",children:['"',l.details.fullReason,'"']}),u&&h.jsxs("button",{onClick:()=>r(c?null:l.id),className:"mt-2 flex items-center gap-1 text-[10px] text-[#60a5fa] hover:text-[#93c5fd] transition-colors uppercase tracking-wider",children:[c?h.jsx(im,{size:12}):h.jsx(Al,{size:12}),c?"Hide":"Show"," Analysis Context"]}),c&&u&&h.jsxs("div",{className:"mt-3 p-3 bg-[#0f1015] rounded border border-[#232328] space-y-3",children:[f.indicators&&Object.keys(f.indicators).length>0&&h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-[#34d399] mb-2 uppercase tracking-wider font-semibold",children:[h.jsx(mo,{size:10}),h.jsx("span",{children:"Indicators Used"})]}),h.jsx("div",{className:"grid grid-cols-2 gap-1",children:Object.entries(f.indicators).map(([x,v])=>h.jsxs("div",{className:"flex justify-between bg-[#34d399]/10 border border-[#34d399]/20 px-2 py-1 rounded text-[10px]",children:[h.jsx("span",{className:"text-[#34d399] uppercase font-medium",children:x}),h.jsx("span",{className:"text-[#4ade80] font-mono",children:a((v==null?void 0:v.value)||v)})]},x))})]}),f.macro&&Object.keys(f.macro.indicators||{}).length>0&&h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-amber-400 mb-2 uppercase tracking-wider font-semibold",children:[h.jsx(Rn,{size:10}),h.jsxs("span",{children:["Macro Confirmation (",f.macro.timeframe==="15"?"15m":f.macro.timeframe==="60"?"1H":f.macro.timeframe==="240"?"4H":f.macro.timeframe==="D"?"Daily":f.macro.timeframe==="W"?"Weekly":f.macro.timeframe,")"]})]}),h.jsx("div",{className:"grid grid-cols-2 gap-1",children:Object.entries(f.macro.indicators).map(([x,v])=>{var j,R;const w=(R=(j=f.indicators)==null?void 0:j[x])==null?void 0:R.value,E=(v==null?void 0:v.value)||v;let C="";const k=typeof w=="number"?w:typeof w=="object"&&w!==null?Object.values(w)[0]:null,O=typeof E=="number"?E:typeof E=="object"&&E!==null?Object.values(E)[0]:null;if(x==="rsi"&&typeof k=="number"&&typeof O=="number"){const U=k>70,V=k<30,F=O>70,$=O<30;U&&$||V&&F?C=" ":(U&&F||V&&$)&&(C=" ")}return h.jsxs("div",{className:"flex justify-between bg-amber-500/10 border border-amber-500/20 px-2 py-1 rounded text-[10px]",children:[h.jsx("span",{className:"text-amber-400 uppercase font-medium",children:x}),h.jsxs("span",{className:"text-amber-300 font-mono",children:[C,a(E)]})]},x)})})]}),f.tradingCosts&&h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-[#747580] mb-2 uppercase tracking-wider font-semibold",children:[h.jsx(v1,{size:10}),h.jsx("span",{children:"Trading Costs"})]}),h.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[h.jsxs("div",{className:"bg-[#1a1b21] px-2 py-1 rounded text-[10px] border border-[#232328]",children:[h.jsx("span",{className:"text-[#747580]",children:"Maker: "}),h.jsxs("span",{className:"text-white font-mono",children:[((f.tradingCosts.makerFee??2e-4)*100).toFixed(3),"%"]})]}),h.jsxs("div",{className:"bg-[#1a1b21] px-2 py-1 rounded text-[10px] border border-[#232328]",children:[h.jsx("span",{className:"text-[#747580]",children:"Taker: "}),h.jsxs("span",{className:"text-white font-mono",children:[((f.tradingCosts.takerFee??5e-4)*100).toFixed(3),"%"]})]}),h.jsxs("div",{className:"bg-[#1a1b21] px-2 py-1 rounded text-[10px] border border-[#232328]",children:[h.jsx("span",{className:"text-[#747580]",children:"Funding: "}),h.jsxs("span",{className:(f.tradingCosts.fundingRate??0)>0?"text-red-400 font-mono":"text-[#34d399] font-mono",children:[((f.tradingCosts.fundingRate??0)*100).toFixed(4),"%"]})]})]})]}),f.currentPrice&&h.jsxs("div",{className:"text-[10px] text-[#747580]",children:["Price at analysis: ",h.jsxs("span",{className:"text-white font-mono",children:["$",f.currentPrice.toLocaleString()]})]}),f.enabledIndicators&&f.enabledIndicators.length>0&&h.jsxs("div",{className:"text-[10px] text-[#747580]",children:["Enabled: ",h.jsx("span",{className:"font-mono",children:f.enabledIndicators.join(", ").toUpperCase()})]})]})]})]},l.id)})})]})},aat=({log:t,index:e,getLogBadgeVariant:n})=>{const[r,i]=T.useState(!1),s=t.details&&Object.keys(t.details).length>0;return h.jsxs(rn.div,{className:"flex gap-3 p-3 hover:bg-[#1a1b21] rounded border-b border-[#232328] last:border-0 transition-colors",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:e*.02},children:[h.jsx("span",{className:"text-[#747580] shrink-0 text-[10px] mt-0.5 font-mono",children:new Date(t.timestamp).toLocaleTimeString()}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(_l,{variant:n(t.type),className:"text-[9px] uppercase tracking-wider",children:t.type}),h.jsx("span",{className:"text-[#a0a1a8] flex-1 text-sm",children:t.message}),s&&h.jsx("button",{onClick:()=>i(!r),className:"text-[#747580] hover:text-white transition-colors p-1 rounded hover:bg-[#232328]",title:r?"Collapse details":"Expand details",children:r?h.jsx(Al,{className:"h-4 w-4"}):h.jsx(rm,{className:"h-4 w-4"})})]}),h.jsx(Go,{children:s&&r&&h.jsx(rn.pre,{className:"mt-2 text-[10px] text-[#747580] bg-[#0f1015] p-3 rounded overflow-x-auto max-h-[300px] overflow-y-auto custom-scrollbar border border-[#232328] font-mono",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:JSON.stringify(t.details,null,2)})})]})]},t.id)},lat=({status:t,onClearLogs:e})=>{const[n,r]=T.useState("thinking"),i=T.useRef(null),s=()=>{const a=JSON.stringify(t.logs,null,2),l="data:application/json;charset=utf-8,"+encodeURIComponent(a),c=`dealer_logs_${new Date().toISOString()}.json`,u=document.createElement("a");u.setAttribute("href",l),u.setAttribute("download",c),u.click()},o=a=>{switch(a){case"INFO":return"info";case"WARNING":return"warning";case"ERROR":return"destructive";case"TRADE":return"success";case"SIGNAL":return"purple";default:return"secondary"}};return h.jsxs("div",{className:"flex flex-col h-full gap-4 overflow-hidden",children:[h.jsx("div",{className:"glass-panel p-4 shrink-0",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2 bg-[#1a1b21] p-1 rounded border border-[#232328]",children:[h.jsxs("button",{onClick:()=>r("thinking"),className:`flex items-center gap-2 px-4 py-2 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${n==="thinking"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:[h.jsx(bc,{className:"h-4 w-4"}),"Thinking"]}),h.jsxs("button",{onClick:()=>r("logs"),className:`flex items-center gap-2 px-4 py-2 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${n==="logs"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:[h.jsx(fne,{className:"h-4 w-4"}),"Activity Log",t.logs.length>0&&h.jsx("span",{className:"bg-white/20 px-1.5 py-0.5 rounded text-[9px]",children:t.logs.length})]})]}),h.jsx(Go,{children:n==="logs"&&h.jsxs(rn.div,{className:"flex items-center gap-2",initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},children:[h.jsx("button",{onClick:e,className:"p-2 rounded hover:bg-red-500/10 text-[#747580] hover:text-red-400 transition-colors border border-[#232328]",title:"Clear Logs",children:h.jsx(sm,{className:"h-4 w-4"})}),h.jsx("button",{onClick:s,className:"p-2 rounded hover:bg-[#1a1b21] text-[#747580] hover:text-white transition-colors border border-[#232328]",title:"Export JSON",children:h.jsx(Bo,{className:"h-4 w-4"})})]})})]})}),h.jsxs("div",{className:"glass-panel flex-1 min-h-0 overflow-hidden flex flex-col",children:[n==="thinking"&&h.jsx(oat,{logs:t.logs,onClearLogs:e}),n==="logs"&&h.jsx("div",{className:"flex-1 min-h-0 relative",children:h.jsx("div",{ref:i,className:"absolute inset-0 overflow-y-auto custom-scrollbar",children:t.logs.length===0?h.jsxs(rn.div,{className:"h-full flex flex-col items-center justify-center text-[#747580] gap-3 py-12",initial:{opacity:0},animate:{opacity:1},children:[h.jsx(WL,{className:"h-10 w-10 opacity-30"}),h.jsx("p",{className:"text-sm",children:"No operations recorded yet."})]}):h.jsx(Go,{children:t.logs.map((a,l)=>h.jsx(aat,{log:a,index:l,getLogBadgeVariant:o},a.id))})})})]})]})},CQ={rsi:{name:"RSI",key:"rsi",description:"Relative Strength Index",icon:h.jsx(mo,{size:14}),params:[{key:"period",label:"Period",default:14}]},macd:{name:"MACD",key:"macd",description:"Moving Average Convergence Divergence",icon:h.jsx(Rn,{size:14}),params:[{key:"fast",label:"Fast",default:12},{key:"slow",label:"Slow",default:26},{key:"signal",label:"Signal",default:9}]},bollinger:{name:"Bollinger",key:"bollinger",description:"Bollinger Bands",icon:h.jsx(yl,{size:14}),params:[{key:"period",label:"Period",default:20},{key:"stdDev",label:"StdDev",default:2}]},atr:{name:"ATR",key:"atr",description:"Average True Range",icon:h.jsx(nd,{size:14}),params:[{key:"period",label:"Period",default:14}]},adx:{name:"ADX",key:"adx",description:"Average Directional Index",icon:h.jsx(Rn,{size:14}),params:[{key:"period",label:"Period",default:14}]},obv:{name:"OBV",key:"obv",description:"On-Balance Volume",icon:h.jsx(yl,{size:14}),params:[]},vwap:{name:"VWAP",key:"vwap",description:"Volume Weighted Avg Price",icon:h.jsx(mo,{size:14}),params:[]},ichimoku:{name:"Ichimoku",key:"ichimoku",description:"Ichimoku Cloud",icon:h.jsx(Rn,{size:14}),params:[{key:"conversion",label:"Conv",default:9},{key:"base",label:"Base",default:26},{key:"spanB",label:"SpanB",default:52},{key:"displacement",label:"Disp",default:26}]},ema:{name:"EMA",key:"ema",description:"Exponential Moving Average",icon:h.jsx(Rn,{size:14}),params:[{key:"period",label:"Period",default:20}]},sma:{name:"SMA",key:"sma",description:"Simple Moving Average",icon:h.jsx(Rn,{size:14}),params:[{key:"period",label:"Period",default:20}]},stoch:{name:"Stochastic",key:"stoch",description:"Stochastic Oscillator",icon:h.jsx(mo,{size:14}),params:[{key:"period",label:"Period",default:14},{key:"signalPeriod",label:"Signal",default:3}]}},cat={trend:{bg:"bg-purple-500/10",text:"text-purple-400",border:"border-purple-500/30"},momentum:{bg:"bg-blue-500/10",text:"text-blue-400",border:"border-blue-500/30"},volume:{bg:"bg-green-500/10",text:"text-green-400",border:"border-green-500/30"},volatility:{bg:"bg-orange-500/10",text:"text-orange-400",border:"border-orange-500/30"}},uat={trend:h.jsx(Rn,{size:14}),momentum:h.jsx(mo,{size:14}),volume:h.jsx(yl,{size:14}),volatility:h.jsx(nd,{size:14})},dat=({indicatorSettings:t,autonomousMode:e,selectedPreset:n,onUpdateIndicatorSettings:r,onToggleAutonomousMode:i,onSelectPreset:s})=>{const[o,a]=T.useState("trend"),[l,c]=T.useState(null),[u,f]=T.useState([]),[m,g]=T.useState(!1),[x,v]=T.useState(!1),w=T.useMemo(()=>Tfe(t),[t]),E=T.useMemo(()=>PZe(t),[t]),C=T.useMemo(()=>kfe(t),[t]),k=F=>{const $=t[F];!HJ(t,F)&&!$.enabled||(r({[F]:{...$,enabled:!$.enabled}}),E!=="custom"&&s("custom"))},O=(F,$)=>{const K=t[F];r({[F]:{...K,weight:Math.max(.5,Math.min(2,$))}})},j=(F,$,K)=>{const H=t[F];r({[F]:{...H,params:{...H.params,[$]:K}}})},R=F=>{if(F==="custom")return;const $=IZe(F,t);r($),s(F)},U=()=>{r(Pg),s("balanced")},V=async()=>{g(!0),v(!0);const F=[],$=Object.keys(t).filter(K=>t[K].enabled);for(const K of $){const H=CQ[K];F.push({indicator:H.name,value:null,loading:!0}),f([...F]);try{const B=t[K],A=await co.getIndicator("BTCUSDT",K,"60",B.params);F[F.length-1]={indicator:H.name,value:A.value,loading:!1}}catch(B){F[F.length-1]={indicator:H.name,value:null,loading:!1,error:B.message}}f([...F])}g(!1)};return e?h.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-4",children:[h.jsx("div",{className:"h-14 w-14 rounded-full bg-gradient-to-br from-emerald-500/30 to-cyan-500/30 flex items-center justify-center mb-4 border border-emerald-500/20",children:h.jsx(ane,{className:"h-7 w-7 text-emerald-400"})}),h.jsx("h3",{className:"text-white font-semibold mb-2",children:"Autonomous Mode Active"}),h.jsx("p",{className:"text-xs text-gray-400 max-w-[280px] mb-4",children:"AI will analyze market conditions and choose the optimal preset each cycle:"}),h.jsx("div",{className:"grid grid-cols-2 gap-2 w-full max-w-[320px] text-[10px]",children:Object.entries(qu).filter(([F])=>F!=="custom").map(([F,$])=>h.jsxs("div",{className:"bg-gray-800/50 border border-gray-700/30 rounded-lg p-2 text-left",children:[h.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5",children:[h.jsx("span",{children:$.emoji}),h.jsx("span",{className:"text-gray-300 font-medium",children:$.name})]}),h.jsx("div",{className:"text-gray-500",children:$.marketCondition})]},F))})]}):h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{className:"text-[10px] text-gray-400 uppercase tracking-wider font-semibold",children:"Presets"}),h.jsxs("span",{className:`text-[10px] font-mono ${C?"text-orange-400":"text-gray-400"}`,children:[w," / ",vee," selected"]})]}),h.jsx("div",{className:"grid grid-cols-3 gap-1.5",children:Object.entries(qu).filter(([F])=>F!=="custom").map(([F,$])=>h.jsxs("button",{onClick:()=>R(F),className:`px-2 py-1.5 rounded-lg text-[10px] font-medium transition-all border ${E===F?"bg-purple-500/20 border-purple-500/50 text-purple-300":"bg-gray-800/30 border-gray-700/30 text-gray-400 hover:border-gray-600"}`,title:$.description,children:[h.jsx("span",{className:"mr-1",children:$.emoji}),$.name]},F))}),E==="custom"&&h.jsx("div",{className:"text-[10px] text-gray-500 text-center",children:" Custom configuration"})]}),h.jsx("div",{className:"space-y-2",children:Object.entries(UC).map(([F,$])=>{const K=o===F,H=Sfe(t,F),B=Afe(t,F),A=cat[F];return h.jsxs("div",{className:`rounded-lg border ${A.border} overflow-hidden`,children:[h.jsxs("button",{onClick:()=>a(K?null:F),className:`w-full px-3 py-2 flex items-center justify-between ${A.bg}`,children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:A.text,children:uat[F]}),h.jsx("span",{className:`text-xs font-medium ${A.text}`,children:$.name})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("span",{className:`text-[10px] px-1.5 py-0.5 rounded font-mono ${B?"bg-orange-500/20 text-orange-400":"bg-gray-700/50 text-gray-400"}`,children:[H,"/",$.maxIndicators]}),K?h.jsx(im,{size:14,className:"text-gray-500"}):h.jsx(Al,{size:14,className:"text-gray-500"})]})]}),K&&h.jsx("div",{className:"p-2 space-y-1.5 bg-gray-900/30",children:$.indicators.map(I=>{const M=t[I],z=CQ[I],G=HJ(t,I),te=l===I;return h.jsxs("div",{className:`rounded-lg border transition-all ${M.enabled?`${A.border} ${A.bg}`:"border-gray-700/30 bg-gray-800/20"}`,children:[h.jsxs("div",{className:"px-2.5 py-1.5 flex items-center gap-2",children:[h.jsx("button",{onClick:()=>k(I),disabled:!G&&!M.enabled,className:`shrink-0 w-7 h-3.5 rounded-full relative transition-all ${M.enabled?"bg-purple-500":G?"bg-gray-600":"bg-gray-700 opacity-40 cursor-not-allowed"}`,title:!G&&!M.enabled?"Limit reached":void 0,children:h.jsx("div",{className:"absolute top-0.5 w-2.5 h-2.5 rounded-full bg-white transition-all",style:{left:M.enabled?"14px":"2px"}})}),h.jsxs("button",{onClick:()=>c(te?null:I),className:"flex items-center gap-1.5 flex-1 text-left",children:[h.jsx("span",{className:`text-xs font-medium ${M.enabled?"text-white":"text-gray-400"}`,children:z.name}),h.jsx("span",{className:"text-[9px] text-gray-500 truncate",children:z.description})]}),M.enabled&&h.jsxs("span",{className:`text-[9px] font-mono px-1 py-0.5 rounded ${M.weight>1?"bg-green-500/20 text-green-400":M.weight<1?"bg-yellow-500/20 text-yellow-400":"bg-gray-700/50 text-gray-400"}`,children:[M.weight.toFixed(1),""]}),(z.params.length>0||M.enabled)&&h.jsx("button",{onClick:()=>c(te?null:I),children:te?h.jsx(im,{size:12,className:"text-gray-500"}):h.jsx(Al,{size:12,className:"text-gray-500"})})]}),te&&h.jsxs("div",{className:"px-2.5 pb-2 pt-1 border-t border-gray-700/30 space-y-2",children:[M.enabled&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-[9px] text-gray-500 w-10",children:"Weight"}),h.jsx("input",{type:"range",min:"0.5",max:"2.0",step:"0.1",value:M.weight,onChange:Y=>O(I,parseFloat(Y.target.value)),className:"flex-1 h-1 bg-gray-700 rounded-full appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-purple-500"}),h.jsxs("span",{className:`text-[10px] font-mono w-8 text-right ${M.weight>1?"text-green-400":M.weight<1?"text-yellow-400":"text-gray-400"}`,children:[M.weight.toFixed(1),""]})]}),z.params.length>0&&h.jsx("div",{className:"flex flex-wrap gap-1.5",children:z.params.map(Y=>h.jsxs("div",{className:"flex items-center gap-1 bg-gray-900/50 px-1.5 py-0.5 rounded",children:[h.jsx("label",{className:"text-[9px] text-gray-400",children:Y.label}),h.jsx("input",{type:"number",value:M.params[Y.key]||Y.default,onChange:q=>j(I,Y.key,parseInt(q.target.value)),className:"w-10 bg-transparent border border-gray-700/50 rounded px-1 py-0.5 text-[9px] text-white focus:outline-none focus:border-purple-500"})]},Y.key))})]})]},I)})})]},F)})}),h.jsxs("div",{className:"flex items-center justify-center gap-2 pt-2 border-t border-gray-700/30",children:[h.jsxs("button",{onClick:V,disabled:m||w===0,className:"flex items-center justify-center gap-1.5 bg-[#E7FE55] hover:bg-[#d4e94d] disabled:bg-gray-700 disabled:text-gray-500 text-black px-3 py-1.5 rounded text-[10px] font-bold uppercase tracking-wide transition-all",children:[m?h.jsx(Cc,{size:10,className:"animate-spin"}):h.jsx(nd,{size:10}),"Test (",w,")"]}),h.jsx("button",{onClick:U,className:"px-2 py-1.5 bg-gray-700 hover:bg-gray-600 text-white rounded text-[10px] transition-all",title:"Reset to Balanced Preset",children:h.jsx(Cc,{size:10})})]}),x&&u.length>0&&h.jsxs("div",{className:"bg-gray-900/50 rounded-lg border border-gray-700/30 p-2",children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsx("span",{className:"text-[10px] font-bold text-gray-400",children:"Results (BTC 1H)"}),h.jsx("button",{onClick:()=>{f([]),v(!1)},className:"text-[9px] text-gray-500 hover:text-gray-300",children:"Clear"})]}),h.jsx("div",{className:"space-y-1",children:u.map((F,$)=>h.jsxs("div",{className:"flex items-center justify-between text-[10px] bg-gray-800/30 px-2 py-1 rounded",children:[h.jsx("span",{className:"text-gray-300",children:F.indicator}),F.loading?h.jsx("span",{className:"text-gray-500",children:"..."}):F.error?h.jsx("span",{className:"text-red-400",title:F.error,children:"ERR"}):h.jsx("span",{className:"text-emerald-400 font-mono",children:typeof F.value=="object"?"":typeof F.value=="number"?F.value.toFixed(2):String(F.value)})]},$))})]})]})},fat=({status:t,onToggle:e,onUpdateSettings:n,onApplyChanges:r})=>{const i=t.settings,[s,o]=T.useState(i),[a,l]=T.useState(!1);T.useEffect(()=>{o(i)},[JSON.stringify(i)]),T.useEffect(()=>{l(JSON.stringify(s)!==JSON.stringify(i))},[s,i]);const c=E=>{o(C=>({...C,...E}))},u=()=>{n(s),r()},[f,m]=T.useState([]),[g,x]=T.useState(!1);T.useEffect(()=>{(async()=>{x(!0);try{const C=await $t.getAllAvailableAssets();m(C.sort())}catch(C){console.error("Failed to fetch assets",C)}finally{x(!1)}})()},[]);const v=E=>{s.tradingPairs.includes(E)||c({tradingPairs:[...s.tradingPairs,E]})},w=E=>{c({tradingPairs:s.tradingPairs.filter(C=>C!==E)})};return h.jsx("div",{className:"h-full flex flex-col gap-4 overflow-y-auto custom-scrollbar",children:h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[h.jsxs("div",{className:"flex flex-col gap-4",children:[h.jsx("div",{className:"glass-panel p-4",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:`h-10 w-10 rounded flex items-center justify-center ${t.isOn?"bg-[#E7FE55]/15 text-[#E7FE55]":"bg-[#1a1b21] text-[#747580]"}`,children:h.jsx(nd,{className:"h-5 w-5"})}),h.jsxs("div",{children:[h.jsx("span",{className:"block text-sm font-semibold text-white",children:"Engine Status"}),h.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5",children:[h.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${t.isOn?"bg-[#E7FE55] animate-pulse":"bg-[#747580]"}`}),h.jsx("span",{className:"text-[10px] text-[#747580] font-medium uppercase tracking-wider",children:t.isOn?"Active & Running":"Stopped"})]})]})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("button",{onClick:()=>e(!t.isOn),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none ${t.isOn?"bg-[#E7FE55]":"bg-[#3a3b42]"}`,children:h.jsx("span",{className:`${t.isOn?"translate-x-6":"translate-x-1"} inline-block h-4 w-4 transform rounded-full bg-black transition-transform shadow`})}),h.jsxs("button",{onClick:u,disabled:!a,className:`flex items-center gap-2 px-3 py-1.5 rounded text-[10px] font-semibold uppercase tracking-wider transition-all active:scale-95
                                        ${a?"bg-[#E7FE55] hover:bg-[#d4e94d] text-black":"bg-[#1a1b21] text-[#747580] cursor-not-allowed opacity-50"}`,children:[h.jsx(Cc,{className:"h-3 w-3"})," Apply"]})]})]})}),h.jsxs("div",{className:"glass-panel p-3",children:[h.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[#E7FE55] font-semibold uppercase tracking-[0.1em] mb-2",children:[h.jsx(v1,{className:"h-3 w-3"})," Capital & Risk"]}),h.jsxs("div",{className:"grid grid-cols-5 gap-2 mb-2",children:[h.jsxs("div",{className:"bg-[#0f1015] p-2 rounded border border-[#232328]",children:[h.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1",children:"Type"}),h.jsxs("div",{className:"flex gap-0.5",children:[h.jsx("button",{onClick:()=>c({bankrollType:"MANUAL"}),className:`flex-1 py-1 text-[9px] font-semibold rounded transition-all ${s.bankrollType==="MANUAL"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-white"}`,children:"Fix"}),h.jsx("button",{onClick:()=>c({bankrollType:"ALL_AVAILABLE"}),className:`flex-1 py-1 text-[9px] font-semibold rounded transition-all ${s.bankrollType==="ALL_AVAILABLE"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-white"}`,children:"Max"})]})]}),h.jsxs("div",{className:"bg-[#0f1015] p-2 rounded border border-[#232328]",children:[h.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1",children:"Amount ($)"}),s.bankrollType==="MANUAL"?h.jsx("div",{className:"flex items-center",children:h.jsx("input",{type:"number",value:s.manualBankroll,onChange:E=>c({manualBankroll:parseFloat(E.target.value)}),className:"w-full bg-transparent text-sm font-mono text-white focus:outline-none"})}):h.jsx("span",{className:"text-sm font-mono text-[#E7FE55]",children:"Auto"})]}),h.jsxs("div",{className:"bg-[#0f1015] p-2 rounded border border-[#232328]",children:[h.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1",children:"Leverage"}),h.jsxs("div",{className:"flex items-center",children:[h.jsx("input",{type:"number",value:s.maxLeverage,onChange:E=>c({maxLeverage:parseInt(E.target.value)}),className:"w-full bg-transparent text-sm font-bold font-mono text-white focus:outline-none"}),h.jsx("span",{className:"text-[14px] text-[#747580]",children:"x"})]})]}),h.jsxs("div",{className:"bg-[#0f1015] p-2 rounded border border-[#232328]",children:[h.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1",children:"Pos/Cycle"}),h.jsx("input",{type:"number",value:s.maxOpenPositions,onChange:E=>c({maxOpenPositions:parseInt(E.target.value)}),className:"w-full bg-transparent text-sm font-bold font-mono text-white focus:outline-none"})]}),h.jsxs("div",{className:"bg-[#0f1015] p-2 rounded border border-[#232328]",children:[h.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1",children:"Max Size ($)"}),h.jsx("div",{className:"flex items-center",children:h.jsx("input",{type:"number",value:s.maxPositionSizeUSDC,onChange:E=>c({maxPositionSizeUSDC:parseInt(E.target.value)}),className:"w-full bg-transparent text-sm font-bold font-mono text-white focus:outline-none"})})]})]}),h.jsxs("div",{className:"flex items-center gap-4 pt-2 border-t border-[#232328]",children:[h.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer group",children:[h.jsx(nd,{className:"h-3 w-3 text-red-400"}),h.jsx("span",{className:"text-[10px] text-[#747580] group-hover:text-white",children:"Aggressive"}),h.jsx("button",{onClick:()=>c({aggressiveMode:!s.aggressiveMode}),className:`relative inline-flex h-4 w-7 items-center rounded-full transition-colors ${s.aggressiveMode?"bg-red-500":"bg-[#3a3b42]"}`,children:h.jsx("span",{className:`${s.aggressiveMode?"translate-x-4":"translate-x-0.5"} inline-block h-2.5 w-2.5 transform rounded-full bg-white transition-transform`})})]}),h.jsx("div",{className:"w-px h-4 bg-[#232328]"}),h.jsxs("div",{className:"flex items-center gap-1.5",children:[h.jsx(ed,{className:"h-3 w-3 text-red-400"}),h.jsx("span",{className:"text-[10px] text-[#747580]",children:"STOP LOSS"}),s.stopLossEnabled&&h.jsxs(h.Fragment,{children:[h.jsx("input",{type:"number",step:"0.5",value:s.stopLossPercent??"",placeholder:"AI",onChange:E=>c({stopLossPercent:E.target.value?parseFloat(E.target.value):null}),className:"w-10 bg-[#0f1015] border border-[#232328] rounded px-1 py-0.5 text-[10px] text-white font-mono focus:outline-none placeholder:text-[#747580]"}),h.jsx("span",{className:"text-[9px] text-[#747580]",children:"%"})]}),h.jsx("button",{onClick:()=>c({stopLossEnabled:!s.stopLossEnabled}),className:`relative inline-flex h-4 w-7 items-center rounded-full transition-colors ${s.stopLossEnabled?"bg-red-500":"bg-[#3a3b42]"}`,children:h.jsx("span",{className:`${s.stopLossEnabled?"translate-x-4":"translate-x-0.5"} inline-block h-2.5 w-2.5 transform rounded-full bg-white transition-transform`})})]}),h.jsx("div",{className:"w-px h-4 bg-[#232328]"}),h.jsxs("div",{className:"flex items-center gap-1.5",children:[h.jsx(Mg,{className:"h-3 w-3 text-[#34d399]"}),h.jsx("span",{className:"text-[10px] text-[#747580]",children:"TAKE PROFIT"}),s.takeProfitEnabled&&h.jsxs(h.Fragment,{children:[h.jsx("input",{type:"number",step:"0.5",value:s.takeProfitPercent??"",placeholder:"AI",onChange:E=>c({takeProfitPercent:E.target.value?parseFloat(E.target.value):null}),className:"w-10 bg-[#0f1015] border border-[#232328] rounded px-1 py-0.5 text-[10px] text-white font-mono focus:outline-none placeholder:text-[#747580]"}),h.jsx("span",{className:"text-[9px] text-[#747580]",children:"%"})]}),h.jsx("button",{onClick:()=>c({takeProfitEnabled:!s.takeProfitEnabled}),className:`relative inline-flex h-4 w-7 items-center rounded-full transition-colors ${s.takeProfitEnabled?"bg-[#34d399]":"bg-[#3a3b42]"}`,children:h.jsx("span",{className:`${s.takeProfitEnabled?"translate-x-4":"translate-x-0.5"} inline-block h-2.5 w-2.5 transform rounded-full bg-white transition-transform`})})]})]})]}),h.jsxs("div",{className:"glass-panel p-4",children:[h.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[#E7FE55] font-semibold uppercase tracking-[0.1em] mb-3",children:[h.jsx(yl,{className:"h-3.5 w-3.5"})," Analysis Settings"]}),h.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[h.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[h.jsx("label",{className:"block text-[10px] text-[#747580] font-medium mb-1.5 uppercase tracking-wider",children:"Timeframe"}),h.jsxs("select",{className:"w-full bg-transparent text-sm font-mono text-white focus:outline-none cursor-pointer [&>option]:bg-[#0f1015]",value:s.analysisTimeframe||"60",onChange:E=>c({analysisTimeframe:E.target.value}),children:[h.jsx("option",{value:"1",children:"1m"}),h.jsx("option",{value:"5",children:"5m"}),h.jsx("option",{value:"15",children:"15m"}),h.jsx("option",{value:"60",children:"1H"}),h.jsx("option",{value:"240",children:"4H"}),h.jsx("option",{value:"D",children:"1D"})]})]}),h.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[h.jsx("label",{className:"block text-[10px] text-[#747580] font-medium mb-1.5 uppercase tracking-wider",children:"Indicators History"}),h.jsx("input",{type:"number",min:10,max:100,value:s.historyCandles||100,onChange:E=>c({historyCandles:Math.min(100,Math.max(10,parseInt(E.target.value)||100))}),className:"w-full bg-transparent text-sm font-mono text-white focus:outline-none",title:"10-100"})]}),h.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[h.jsxs("label",{className:"block text-[10px] text-[#747580] font-medium mb-1.5 uppercase tracking-wider",children:[h.jsx(Ua,{className:"inline h-3 w-3 mr-1 opacity-50"}),"Interval"]}),h.jsxs("div",{className:"flex items-baseline gap-1",children:[h.jsx("input",{type:"number",value:s.checkIntervalSeconds,onChange:E=>c({checkIntervalSeconds:Math.max(60,parseInt(E.target.value)||60)}),className:"w-full bg-transparent text-sm font-mono text-white focus:outline-none"}),h.jsx("span",{className:"text-[10px] text-[#747580]",children:"s"})]})]})]})]}),h.jsxs("div",{className:"glass-panel p-4",children:[h.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[#E7FE55] font-semibold uppercase tracking-[0.1em] mb-3",children:[h.jsx(Rn,{className:"h-3.5 w-3.5"})," Macro Timeframe"]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("div",{className:"flex items-center gap-2",children:h.jsx("span",{className:"text-[11px] text-[#747580]",children:"Multi-timeframe confirmation"})}),h.jsxs("div",{className:"flex items-center gap-3",children:[s.macroTimeframeEnabled&&h.jsxs("select",{className:"bg-[#0f1015] border border-[#232328] rounded py-1.5 px-2 text-[11px] text-white focus:outline-none focus:border-amber-500 [&>option]:bg-[#0f1015]",value:s.macroTimeframe||"240",onChange:E=>c({macroTimeframe:E.target.value}),children:[h.jsx("option",{value:"15",children:"15m"}),h.jsx("option",{value:"60",children:"1H"}),h.jsx("option",{value:"240",children:"4H"}),h.jsx("option",{value:"D",children:"1D"}),h.jsx("option",{value:"W",children:"1W"})]}),h.jsx("button",{onClick:()=>c({macroTimeframeEnabled:!s.macroTimeframeEnabled}),className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors ${s.macroTimeframeEnabled?"bg-amber-500":"bg-[#3a3b42]"}`,children:h.jsx("span",{className:`${s.macroTimeframeEnabled?"translate-x-5":"translate-x-1"} inline-block h-3 w-3 transform rounded-full bg-white transition-transform`})})]})]}),s.macroTimeframeEnabled&&h.jsxs("div",{className:"mt-3",children:[h.jsx("div",{className:"text-[10px] text-[#747580] mb-2 uppercase tracking-wider",children:"Active Indicators:"}),h.jsx("div",{className:"grid grid-cols-4 gap-1.5",children:Object.entries(s.indicatorSettings).filter(([E,C])=>C.enabled).map(([E,C])=>{var O;const k=(O=s.macroEnabledIndicators)==null?void 0:O.includes(E);return h.jsx("button",{onClick:()=>{const j=s.macroEnabledIndicators||[],R=j.includes(E)?j.filter(U=>U!==E):[...j,E];c({macroEnabledIndicators:R})},className:`
                                                        px-1.5 py-0.5 rounded text-[10px] font-mono border transition-all truncate
                                                        ${k?"bg-amber-500/20 border-amber-500/50 text-amber-300 hover:bg-amber-500/30":"bg-[#0f1015] border-[#232328] text-[#747580] hover:border-[#747580]"}
                                                    `,title:E.toUpperCase(),children:E.toUpperCase()},E)})}),(!s.macroEnabledIndicators||s.macroEnabledIndicators.length===0)&&h.jsxs("div",{className:"text-[10px] text-red-400 mt-2 flex items-center gap-1",children:[h.jsx(ed,{size:10})," No macro indicators selected"]})]})]}),h.jsxs("div",{className:"glass-panel p-4",children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[#E7FE55] font-semibold uppercase tracking-[0.1em]",children:[h.jsx(Mg,{className:"h-3.5 w-3.5"})," Trading Pairs"]}),h.jsx("span",{className:"text-[10px] bg-[#E7FE55]/15 text-[#E7FE55] px-2 py-0.5 rounded border border-[#E7FE55]/30 font-mono",children:s.tradingPairs.length})]}),h.jsxs("select",{disabled:g,onChange:E=>{E.target.value&&v(E.target.value),E.target.value=""},className:"w-full bg-[#0f1015] border border-[#232328] rounded py-2 px-3 text-[11px] text-[#747580] focus:outline-none focus:text-white focus:border-[#E7FE55] transition-colors [&>option]:bg-[#0f1015] cursor-pointer hover:border-[#E7FE55]/30 mb-3",children:[h.jsx("option",{value:"",children:g?"Loading...":"+ Add Pair..."}),!g&&f.filter(E=>!s.tradingPairs.includes(E)).map(E=>h.jsx("option",{value:E,children:E},E))]}),h.jsxs("div",{className:"flex flex-wrap gap-1.5 max-h-[120px] overflow-y-auto custom-scrollbar",children:[s.tradingPairs.map(E=>h.jsxs("span",{className:"inline-flex items-center gap-1 bg-[#1a1b21] hover:bg-[#232328] border border-[#232328] hover:border-[#E7FE55]/50 text-[#a0a1a8] hover:text-white px-2 py-1 rounded text-[10px] font-mono transition-all",children:[E,h.jsx("button",{onClick:()=>w(E),className:"text-[#747580] hover:text-red-400 transition-colors",children:h.jsx(GC,{size:10})})]},E)),s.tradingPairs.length===0&&h.jsxs("div",{className:"w-full py-4 flex flex-col items-center justify-center text-[#747580] opacity-60 border border-dashed border-[#232328] rounded",children:[h.jsx(Mg,{className:"h-5 w-5 mb-1"}),h.jsx("span",{className:"text-[10px]",children:"No pairs"})]})]})]})]}),h.jsxs("div",{className:"glass-panel flex flex-col overflow-hidden",children:[h.jsxs("div",{className:"p-3 border-b border-[#232328] flex items-center justify-between shrink-0",children:[h.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[#E7FE55] font-semibold uppercase tracking-[0.1em]",children:[h.jsx(mo,{className:"h-3.5 w-3.5"})," Indicators"]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-[10px] text-[#747580]",children:s.autonomousIndicators?"Auto":"Manual"}),h.jsx("button",{onClick:()=>c({autonomousIndicators:!s.autonomousIndicators}),className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors ${s.autonomousIndicators?"bg-[#34d399]":"bg-[#E7FE55]"}`,title:s.autonomousIndicators?"AI selects indicators":"Manual selection",children:h.jsx("span",{className:`${s.autonomousIndicators?"translate-x-5":"translate-x-1"} inline-block h-3 w-3 transform rounded-full bg-white transition-transform`})})]})]}),h.jsx("div",{className:"p-4",children:h.jsx(dat,{indicatorSettings:s.indicatorSettings,autonomousMode:s.autonomousIndicators,selectedPreset:s.selectedPreset||"balanced",onUpdateIndicatorSettings:E=>{c({indicatorSettings:{...s.indicatorSettings,...E}})},onToggleAutonomousMode:E=>{c({autonomousIndicators:E})},onSelectPreset:E=>{c({selectedPreset:E})}})})]})]})})},hat=({status:t,onSaveStrategy:e,onUpdateSettings:n})=>{var w,E;T.useEffect(()=>{console.log("DealerPromptPage Mounted. Status:",t)},[t]);const r=t==null?void 0:t.settings;if(!r)return h.jsx("div",{className:"p-8 text-red-500",children:"Error: Dealer settings not loaded."});const[i,s]=T.useState(r.strategyPrompt||""),[o,a]=T.useState(r.promptMode||"preset"),[l,c]=T.useState(r.selectedPreset||"balanced"),[u,f]=T.useState(!1);T.useEffect(()=>{s(r.strategyPrompt),a(r.promptMode||"preset"),c(r.selectedPreset||"balanced")},[r.strategyPrompt,r.promptMode,r.selectedPreset]);const m=C=>{if(C==="custom")a("custom"),c("custom"),f(!0);else{const k=q3[C];s(k),a("preset"),c(C),f(k!==r.strategyPrompt)}},g=C=>{const k=C.target.value;s(k);const O=Object.entries(q3).find(([j,R])=>R===k);O?(a("preset"),c(O[0])):(a("custom"),c("custom")),f(k!==r.strategyPrompt)},x=()=>{e(i),n&&n({promptMode:o,selectedPreset:l,strategyPrompt:i}),f(!1)},v=C=>`
            flex items-center gap-1.5 px-3 py-1.5 rounded text-[10px] font-semibold uppercase tracking-[0.08em] transition-all
            ${l===C&&o==="preset"||o==="custom"&&C==="custom"?"bg-[#E7FE55] text-black":"bg-transparent text-[#747580] hover:text-[#a0a1a8] hover:bg-[#1a1b21]"}
        `;return h.jsxs("div",{className:"h-full flex flex-col gap-4 overflow-hidden",children:[h.jsx("div",{className:"glass-panel p-4 shrink-0",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(cw,{className:"h-4 w-4 text-[#E7FE55]"}),h.jsx("span",{className:"text-sm font-semibold text-white",children:"Strategy Prompt"})]}),h.jsxs("div",{className:`
                            inline-flex items-center gap-1.5 px-2 py-0.5 rounded text-[9px] font-semibold uppercase tracking-wider
                            ${o==="preset"?"bg-[#E7FE55]/10 text-[#E7FE55]":"bg-[#1a1b21] text-[#747580]"}
                        `,children:[h.jsx("span",{className:`h-1 w-1 rounded-full ${o==="preset"?"bg-[#E7FE55]":"bg-[#747580]"}`}),o==="preset"?`${(w=qu[l])==null?void 0:w.emoji} ${(E=qu[l])==null?void 0:E.name}`:"Custom"]}),u&&h.jsx("span",{className:"text-[9px] text-amber-500 uppercase tracking-wider font-medium",children:" Unsaved"})]}),h.jsxs("button",{onClick:x,disabled:!u,className:`
                            flex items-center gap-2 px-4 py-1.5 rounded text-[10px] font-semibold uppercase tracking-wider transition-all
                            ${u?"bg-[#E7FE55] hover:bg-[#f0ff7a] text-black":"bg-[#1a1b21] text-[#3a3b42] cursor-not-allowed"}
                        `,children:[h.jsx(dne,{className:"h-3.5 w-3.5"}),"Save"]})]})}),h.jsxs("div",{className:"flex-1 flex gap-4 min-h-0 overflow-hidden",children:[h.jsxs("div",{className:"w-40 shrink-0 flex flex-col gap-2",children:[h.jsxs("div",{className:"flex items-center gap-1.5 px-1 py-2",children:[h.jsx(mne,{size:12,className:"text-[#E7FE55]"}),h.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] font-semibold",children:"Presets"})]}),h.jsxs("div",{className:"flex flex-col gap-1",children:[Object.entries(qu).filter(([C])=>C!=="custom").map(([C,k])=>h.jsxs("button",{onClick:()=>m(C),className:v(C),children:[h.jsx("span",{children:k.emoji}),h.jsx("span",{children:k.name})]},C)),h.jsx("div",{className:"h-px bg-[#232328] my-2"}),h.jsxs("button",{onClick:()=>m("custom"),className:v("custom"),children:[h.jsx("span",{children:""}),h.jsx("span",{children:"Custom"})]})]}),h.jsx("div",{className:"mt-auto pt-4 px-1",children:h.jsx("p",{className:"text-[10px] text-[#3a3b42] leading-relaxed",children:"Edit the prompt to switch to custom mode automatically."})})]}),h.jsxs("div",{className:"flex-1 glass-panel relative overflow-hidden flex flex-col",children:[h.jsx("div",{className:"absolute inset-x-0 top-0 h-6 bg-gradient-to-b from-[#1e2028] to-transparent pointer-events-none z-10"}),h.jsx("textarea",{value:i,onChange:g,className:"w-full h-full bg-transparent text-[#a0a1a8] font-mono text-[13px] p-5 resize-none focus:outline-none leading-relaxed custom-scrollbar selection:bg-[#E7FE55]/30",spellCheck:!1,placeholder:`// Define your trading strategy here...
// 
// Example:
// You are a conservative trader focusing on mean reversion.
// 1. Only trade when RSI is above 70 or below 30.
// 2. Prioritize high volume tokens.
// 3. Never risk more than 1% of equity per trade.`}),h.jsx("div",{className:"absolute inset-x-0 bottom-0 h-6 bg-gradient-to-t from-[#1e2028] to-transparent pointer-events-none z-10"}),h.jsxs("div",{className:"absolute bottom-3 right-3 flex items-center gap-2 opacity-50 hover:opacity-100 transition-opacity",children:[h.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-[#E7FE55]"}),h.jsx("span",{className:"text-[9px] text-[#747580] font-mono uppercase tracking-wider",children:"Live Context"})]})]})]})]})};function NQ(t){const e=pat(t),n=T.forwardRef((r,i)=>{const{children:s,...o}=r,a=T.Children.toArray(s),l=a.find(gat);if(l){const c=l.props.children,u=a.map(f=>f===l?T.Children.count(c)>1?T.Children.only(null):T.isValidElement(c)?c.props.children:null:f);return h.jsx(e,{...o,ref:i,children:T.isValidElement(c)?T.cloneElement(c,void 0,u):null})}return h.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}function pat(t){const e=T.forwardRef((n,r)=>{const{children:i,...s}=n;if(T.isValidElement(i)){const o=xat(i),a=yat(s,i.props);return i.type!==T.Fragment&&(a.ref=r?Rx(r,o):o),T.cloneElement(i,a)}return T.Children.count(i)>1?T.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var mat=Symbol("radix.slottable");function gat(t){return T.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===mat}function yat(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const l=s(...a);return i(...a),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function xat(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Ehe(t){const e=t+"CollectionProvider",[n,r]=Im(e),[i,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=v=>{const{scope:w,children:E}=v,C=pu.useRef(null),k=pu.useRef(new Map).current;return h.jsx(i,{scope:w,itemMap:k,collectionRef:C,children:E})};o.displayName=e;const a=t+"CollectionSlot",l=NQ(a),c=pu.forwardRef((v,w)=>{const{scope:E,children:C}=v,k=s(a,E),O=Nr(w,k.collectionRef);return h.jsx(l,{ref:O,children:C})});c.displayName=a;const u=t+"CollectionItemSlot",f="data-radix-collection-item",m=NQ(u),g=pu.forwardRef((v,w)=>{const{scope:E,children:C,...k}=v,O=pu.useRef(null),j=Nr(w,O),R=s(u,E);return pu.useEffect(()=>(R.itemMap.set(O,{ref:O,...k}),()=>void R.itemMap.delete(O))),h.jsx(m,{[f]:"",ref:j,children:C})});g.displayName=u;function x(v){const w=s(t+"CollectionConsumer",v);return pu.useCallback(()=>{const C=w.collectionRef.current;if(!C)return[];const k=Array.from(C.querySelectorAll(`[${f}]`));return Array.from(w.itemMap.values()).sort((R,U)=>k.indexOf(R.ref.current)-k.indexOf(U.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:o,Slot:c,ItemSlot:g},x,r]}var vat=T.createContext(void 0);function vj(t){const e=T.useContext(vat);return t||e||"ltr"}var G5="rovingFocusGroup.onEntryFocus",bat={bubbles:!1,cancelable:!0},rE="RovingFocusGroup",[UD,She,wat]=Ehe(rE),[Eat,Ahe]=Im(rE,[wat]),[Sat,Aat]=Eat(rE),The=T.forwardRef((t,e)=>h.jsx(UD.Provider,{scope:t.__scopeRovingFocusGroup,children:h.jsx(UD.Slot,{scope:t.__scopeRovingFocusGroup,children:h.jsx(Tat,{...t,ref:e})})}));The.displayName=rE;var Tat=T.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...f}=t,m=T.useRef(null),g=Nr(e,m),x=vj(s),[v,w]=Aw({prop:o,defaultProp:a??null,onChange:l,caller:rE}),[E,C]=T.useState(!1),k=th(c),O=She(n),j=T.useRef(!1),[R,U]=T.useState(0);return T.useEffect(()=>{const V=m.current;if(V)return V.addEventListener(G5,k),()=>V.removeEventListener(G5,k)},[k]),h.jsx(Sat,{scope:n,orientation:r,dir:x,loop:i,currentTabStopId:v,onItemFocus:T.useCallback(V=>w(V),[w]),onItemShiftTab:T.useCallback(()=>C(!0),[]),onFocusableItemAdd:T.useCallback(()=>U(V=>V+1),[]),onFocusableItemRemove:T.useCallback(()=>U(V=>V-1),[]),children:h.jsx(Mn.div,{tabIndex:E||R===0?-1:0,"data-orientation":r,...f,ref:g,style:{outline:"none",...t.style},onMouseDown:mn(t.onMouseDown,()=>{j.current=!0}),onFocus:mn(t.onFocus,V=>{const F=!j.current;if(V.target===V.currentTarget&&F&&!E){const $=new CustomEvent(G5,bat);if(V.currentTarget.dispatchEvent($),!$.defaultPrevented){const K=O().filter(M=>M.focusable),H=K.find(M=>M.active),B=K.find(M=>M.id===v),I=[H,B,...K].filter(Boolean).map(M=>M.ref.current);Nhe(I,u)}}j.current=!1}),onBlur:mn(t.onBlur,()=>C(!1))})})}),khe="RovingFocusGroupItem",Che=T.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:s,children:o,...a}=t,l=Yf(),c=s||l,u=Aat(khe,n),f=u.currentTabStopId===c,m=She(n),{onFocusableItemAdd:g,onFocusableItemRemove:x,currentTabStopId:v}=u;return T.useEffect(()=>{if(r)return g(),()=>x()},[r,g,x]),h.jsx(UD.ItemSlot,{scope:n,id:c,focusable:r,active:i,children:h.jsx(Mn.span,{tabIndex:f?0:-1,"data-orientation":u.orientation,...a,ref:e,onMouseDown:mn(t.onMouseDown,w=>{r?u.onItemFocus(c):w.preventDefault()}),onFocus:mn(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:mn(t.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){u.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const E=Nat(w,u.orientation,u.dir);if(E!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let k=m().filter(O=>O.focusable).map(O=>O.ref.current);if(E==="last")k.reverse();else if(E==="prev"||E==="next"){E==="prev"&&k.reverse();const O=k.indexOf(w.currentTarget);k=u.loop?_at(k,O+1):k.slice(O+1)}setTimeout(()=>Nhe(k))}}),children:typeof o=="function"?o({isCurrentTabStop:f,hasTabStop:v!=null}):o})})});Che.displayName=khe;var kat={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Cat(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Nat(t,e,n){const r=Cat(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return kat[r]}function Nhe(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function _at(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var Iat=The,Pat=Che,_N="Tabs",[Rat]=Im(_N,[Ahe]),_he=Ahe(),[Oat,bj]=Rat(_N),Ihe=T.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=t,u=vj(a),[f,m]=Aw({prop:r,onChange:i,defaultProp:s??"",caller:_N});return h.jsx(Oat,{scope:n,baseId:Yf(),value:f,onValueChange:m,orientation:o,dir:u,activationMode:l,children:h.jsx(Mn.div,{dir:u,"data-orientation":o,...c,ref:e})})});Ihe.displayName=_N;var Phe="TabsList",Rhe=T.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...i}=t,s=bj(Phe,n),o=_he(n);return h.jsx(Iat,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:r,children:h.jsx(Mn.div,{role:"tablist","aria-orientation":s.orientation,...i,ref:e})})});Rhe.displayName=Phe;var Ohe="TabsTrigger",Mhe=T.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...s}=t,o=bj(Ohe,n),a=_he(n),l=Bhe(o.baseId,r),c=jhe(o.baseId,r),u=r===o.value;return h.jsx(Pat,{asChild:!0,...a,focusable:!i,active:u,children:h.jsx(Mn.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l,...s,ref:e,onMouseDown:mn(t.onMouseDown,f=>{!i&&f.button===0&&f.ctrlKey===!1?o.onValueChange(r):f.preventDefault()}),onKeyDown:mn(t.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(r)}),onFocus:mn(t.onFocus,()=>{const f=o.activationMode!=="manual";!u&&!i&&f&&o.onValueChange(r)})})})});Mhe.displayName=Ohe;var Dhe="TabsContent",Lhe=T.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:i,children:s,...o}=t,a=bj(Dhe,n),l=Bhe(a.baseId,r),c=jhe(a.baseId,r),u=r===a.value,f=T.useRef(u);return T.useEffect(()=>{const m=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(m)},[]),h.jsx(Rm,{present:i||u,children:({present:m})=>h.jsx(Mn.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!m,id:c,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:f.current?"0s":void 0},children:m&&s})})});Lhe.displayName=Dhe;function Bhe(t,e){return`${t}-trigger-${e}`}function jhe(t,e){return`${t}-content-${e}`}var Mat=Ihe,Uhe=Rhe,Fhe=Mhe,$he=Lhe;const zhe=Mat,Dat=T.forwardRef(({className:t,...e},n)=>h.jsx(Uhe,{ref:n,className:Ut("inline-flex h-9 items-center justify-center rounded bg-[#1a1b21] p-1 text-[#747580] border border-[#232328]",t),...e}));Dat.displayName=Uhe.displayName;const Lat=T.forwardRef(({className:t,...e},n)=>h.jsx(Fhe,{ref:n,className:Ut("inline-flex items-center justify-center whitespace-nowrap rounded px-4 py-1.5 text-[11px] font-medium uppercase tracking-[0.05em] ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-[#E7FE55] data-[state=active]:text-black data-[state=active]:shadow-sm hover:text-[#a0a1a8]",t),...e}));Lat.displayName=Fhe.displayName;const Hu=T.forwardRef(({className:t,...e},n)=>h.jsx($he,{ref:n,className:Ut("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Hu.displayName=$he.displayName;const Bat=({vault:t,password:e,activeTab:n,setActiveTab:r})=>{const i=!!t.hlPublicKey,s=n===Ce.VAULT_DEALER?Ce.DEALER_DASHBOARD:n,{isOn:o,isAnalyzing:a,statusMessage:l,statusDetail:c,currentTask:u,currentSignal:f,trendAssessment:m,pendingExecution:g,currentExposure:x,activePositions:v,portfolioValue:w,lastSyncTimestamp:E,settings:C,logs:k,operationHistory:O,toggleDealer:j,updateSettings:R,applyChanges:U,saveStrategy:V,clearLogs:F}=nat(t,e),$={isOn:o,isAnalyzing:a,statusMessage:l,statusDetail:c,currentTask:u,currentSignal:f,trendAssessment:m,pendingExecution:g,currentExposure:x,activePositions:v,portfolioValue:w,lastSyncTimestamp:E,settings:C,logs:k,operationHistory:O},K=()=>{switch(s){case Ce.DEALER_DASHBOARD:return"dashboard";case Ce.DEALER_THINKING:return"thinking";case Ce.DEALER_CONFIG:return"config";case Ce.DEALER_PROMPT:return"prompt";default:return"dashboard"}},H=B=>{switch(B){case"dashboard":r(Ce.DEALER_DASHBOARD);break;case"thinking":r(Ce.DEALER_THINKING);break;case"config":r(Ce.DEALER_CONFIG);break;case"prompt":r(Ce.DEALER_PROMPT);break}};return i?h.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[!t.isUnlocked&&h.jsx(rn.div,{className:"mb-3 flex justify-end shrink-0 px-4",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},children:h.jsx(_l,{variant:"destructive",className:"animate-pulse",children:"VAULT LOCKED"})}),h.jsx(zhe,{value:K(),onValueChange:H,className:"flex-1 flex flex-col min-h-0",children:h.jsxs("div",{className:"flex-1 min-h-0 relative",children:[h.jsx(Hu,{value:"dashboard",className:"h-full mt-0 absolute inset-0",children:h.jsx(sat,{status:$,onToggle:j,vaultAddress:t.hlPublicKey,setActiveTab:r})}),h.jsx(Hu,{value:"thinking",className:"h-full mt-0 absolute inset-0",children:h.jsx(lat,{status:$,onClearLogs:F})}),h.jsx(Hu,{value:"config",className:"h-full mt-0 absolute inset-0 overflow-y-auto",children:h.jsx(fat,{status:$,onToggle:j,onUpdateSettings:R,onApplyChanges:U,onSaveStrategy:V})}),h.jsx(Hu,{value:"prompt",className:"h-full mt-0 absolute inset-0",children:h.jsx(hat,{status:$,onSaveStrategy:V,onUpdateSettings:R})})]})})]}):h.jsx(rn.div,{className:"flex flex-col h-[calc(100vh-8rem)] items-center justify-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:h.jsxs("div",{className:"max-w-md w-full mx-auto space-y-6 p-8 text-center",children:[h.jsx("div",{className:"w-16 h-16 bg-[#1a1b21] rounded-full flex items-center justify-center mx-auto mb-4 border border-[#232328]",children:h.jsx(Rn,{size:32,className:"text-[#34d399]"})}),h.jsx("h2",{className:"text-xl font-semibold text-white tracking-tight",children:"Create a Vault First"}),h.jsxs("p",{className:"text-[#747580] text-sm",children:["You need to create a Hyperliquid wallet before using Hyperliquid Dealer. Go to the ",h.jsx("span",{className:"text-[#34d399]",children:"Vault"})," page to set up your wallet."]}),h.jsx(Ui,{onClick:()=>r(Ce.VAULT),variant:"success",size:"lg",className:"mt-4",children:"Go to Vault"})]})})},jat=({vault:t,connectHLOwnerWallet:e,refreshHLBalance:n,activityLog:r=[]})=>{var B;const[i,s]=T.useState([]),[o,a]=T.useState([]),[l,c]=T.useState(new Map),[u,f]=T.useState([]),[m,g]=T.useState(""),[x,v]=T.useState(!1),[w,E]=T.useState(Date.now()),[C,k]=T.useState(!0),[O,j]=T.useState(null),R=async A=>{try{await navigator.clipboard.writeText(A),j(A),setTimeout(()=>j(null),2e3)}catch(I){console.error("Failed to copy:",I)}},U=T.useCallback(async()=>{if(t.hlPublicKey){v(!0);try{await n(t.hlPublicKey);const I=(await Hn.getUserState(t.hlPublicKey)).assetPositions.filter(_=>parseFloat(_.position.szi)!==0);s(I);const M=await Hn.getOpenOrders(t.hlPublicKey);a(M);const z=await Hn.getAvailableAssets();f(z);const G=new Set([...I.map(_=>_.position.coin)]);["BTC","ETH","SOL","BNB","DOGE","AVAX","MATIC","ARB","OP","APT"].forEach(_=>G.add(_));const Y=[...G].slice(0,15).map(async _=>{var W,X,re,ae;try{const Ee=await Hn.getMarketData(_),ue=parseFloat(((X=(W=Ee.levels[0])==null?void 0:W[0])==null?void 0:X.px)||0),me=parseFloat(((ae=(re=Ee.levels[1])==null?void 0:re[0])==null?void 0:ae.px)||0),ce=me-ue,oe=ue>0?ce/ue*100:0;return{coin:_,bid:ue,ask:me,spread:ce,spreadPercent:oe,lastUpdate:Date.now()}}catch(Ee){return console.error(`Failed to fetch market data for ${_}`,Ee),null}}),q=await Promise.all(Y),D=new Map;q.forEach(_=>{_&&D.set(_.coin,_)}),c(D),E(Date.now())}catch(A){console.error("Failed to fetch HL data",A)}finally{v(!1)}}},[t.hlPublicKey,n]);T.useEffect(()=>{t.hlPublicKey&&U()},[t.hlPublicKey]),T.useEffect(()=>{if(!C||!t.hlPublicKey)return;const A=setInterval(()=>{U()},6e4);return()=>clearInterval(A)},[C,t.hlPublicKey,U]);const V=i.reduce((A,I)=>A+parseFloat(I.position.unrealizedPnl||0),0),F=i.reduce((A,I)=>{const M=Math.abs(parseFloat(I.position.szi)),z=parseFloat(I.position.entryPx);return A+M*z},0),$=u.filter(A=>A.toLowerCase().includes(m.toLowerCase())),K=new Set(i.map(A=>A.position.coin)),H=r.filter(A=>A.network==="hyperliquid"||A.type==="HL Order"||A.type.startsWith("HL"));return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 2xl:grid-cols-4 gap-4 lg:gap-6",children:[h.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col justify-center group",children:[h.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 group-hover:opacity-10 transition-opacity",children:h.jsx(Ky,{size:48,className:"text-white"})}),h.jsx("div",{className:"flex items-center justify-between mb-2",children:h.jsx("h3",{className:"text-[10px] uppercase tracking-[0.1em] text-[#747580] font-semibold",children:"Vault Balance"})}),h.jsxs("div",{className:"text-2xl lg:text-3xl font-semibold text-white tracking-tight mb-1",children:["$",((B=t.hlBalance)==null?void 0:B.toFixed(2))||"0.00"]}),h.jsx("div",{className:"text-[11px] text-[#747580] mb-3",children:"USDC"}),h.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-[#232328]",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("input",{type:"checkbox",id:"autoRefresh",checked:C,onChange:A=>k(A.target.checked),className:"w-3.5 h-3.5 rounded border-[#232328] bg-[#1a1b21] key-emerald-600 focus:ring-emerald-500"}),h.jsx("label",{htmlFor:"autoRefresh",className:"text-[10px] text-[#747580] cursor-pointer",children:"Auto-refresh"})]}),h.jsx("button",{onClick:U,disabled:x,className:"p-1.5 hover:bg-[#1a1b21] rounded transition-colors text-[#E7FE55] hover:text-[#f0ff85] disabled:opacity-50",title:"Refresh now",children:h.jsx(Cc,{size:14,className:x?"animate-spin":""})})]})]}),h.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col justify-center",children:[h.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5",children:h.jsx(Rn,{size:48,className:"text-white"})}),h.jsx("div",{className:"flex items-center justify-between mb-2",children:h.jsx("h3",{className:"text-[10px] uppercase tracking-[0.1em] text-[#747580] font-semibold",children:"Position Value"})}),h.jsxs("div",{className:"text-2xl lg:text-3xl font-semibold text-white tracking-tight mb-1",children:["$",F.toFixed(2)]}),h.jsxs("div",{className:"flex items-center justify-between mt-1",children:[h.jsxs("div",{className:"text-[11px] text-[#747580]",children:[i.length," open position",i.length!==1?"s":""]}),h.jsxs("a",{href:"https://app.hyperliquid-testnet.xyz",target:"_blank",rel:"noopener noreferrer",className:"text-[10px] text-[#E7FE55] hover:text-[#f0ff85] flex items-center gap-1",title:"Hyperliquid Platform Official Website",children:[h.jsx(Rn,{size:10})," Hyperliquid"]})]})]}),h.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col justify-center",children:[h.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5",children:V>=0?h.jsx(Rn,{size:48,className:"text-white"}):h.jsx(qC,{size:48,className:"text-white"})}),h.jsx("div",{className:"flex items-center justify-between mb-2",children:h.jsx("h3",{className:"text-[10px] uppercase tracking-[0.1em] text-[#747580] font-semibold",children:"Unrealized PnL"})}),h.jsxs("div",{className:`text-2xl lg:text-3xl font-semibold tracking-tight mb-1 ${V>=0?"text-[#34d399]":"text-red-400"}`,children:[V>=0?"+":"",V.toFixed(2)]}),h.jsx("div",{className:"text-[11px] text-[#747580] mt-1",children:"USDC"})]}),h.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col justify-center",children:[h.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5",children:h.jsx(Ky,{size:48,className:"text-white"})}),h.jsx("div",{className:"flex items-center justify-between mb-2",children:h.jsx("h3",{className:"text-[10px] uppercase tracking-[0.1em] text-[#747580] font-semibold",children:"Vault Address"})}),t.hlPublicKey?h.jsxs("div",{onClick:()=>R(t.hlPublicKey),className:"flex items-center gap-2 cursor-pointer group",children:[h.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#E7FE55]"}),h.jsxs("span",{className:"text-sm font-mono text-white truncate group-hover:text-[#E7FE55] transition-colors",children:[t.hlPublicKey.slice(0,6),"...",t.hlPublicKey.slice(-4)]}),O===t.hlPublicKey?h.jsx("span",{className:"text-[10px] text-[#E7FE55] ml-auto",children:"Copied!"}):h.jsx("span",{className:"text-[10px] text-[#747580] ml-auto opacity-0 group-hover:opacity-100 transition-opacity",children:"Click to copy"})]}):h.jsx("div",{className:"text-sm font-mono text-white mb-1 truncate",children:"Not Available"}),h.jsx("div",{className:"text-[11px] text-[#747580] mt-1",children:w&&`Updated ${new Date(w).toLocaleTimeString()}`})]})]}),h.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[h.jsx(mo,{size:18,className:"text-[#E7FE55]"}),"Open Positions"]}),h.jsxs("span",{className:"text-[10px] bg-[#1a1b21] text-[#747580] px-2 py-1 rounded uppercase tracking-wider",children:[i.length," active"]})]}),h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full text-left text-sm border-collapse",children:[h.jsx("thead",{children:h.jsxs("tr",{className:"text-[10px] uppercase tracking-[0.05em] text-[#747580] border-b border-[#232328]",children:[h.jsx("th",{className:"py-3 pl-4 font-medium",children:"Symbol"}),h.jsx("th",{className:"py-3 font-medium",children:"Side"}),h.jsx("th",{className:"py-3 font-medium",children:"Size"}),h.jsx("th",{className:"py-3 font-medium",children:"Entry Price"}),h.jsx("th",{className:"py-3 font-medium",children:"Current Price"}),h.jsx("th",{className:"py-3 font-medium",children:"Leverage"}),h.jsx("th",{className:"py-3 font-medium",children:"Margin Type"}),h.jsx("th",{className:"py-3 font-medium",children:"Liq. Price"}),h.jsx("th",{className:"py-3 font-medium",children:"Unrealized PnL"}),h.jsx("th",{className:"py-3 pr-4 font-medium",children:"ROE"})]})}),h.jsx("tbody",{className:"text-sm",children:i.length===0?h.jsx("tr",{children:h.jsx("td",{colSpan:10,className:"p-8 text-center text-slate-500",children:"No open positions"})}):i.map((A,I)=>{var re,ae;const M=parseFloat(A.position.szi)>0,z=Math.abs(parseFloat(A.position.szi)),G=parseFloat(A.position.entryPx),te=parseFloat(A.position.unrealizedPnl),Y=parseFloat(A.position.returnOnEquity),q=((re=A.position.leverage)==null?void 0:re.value)||1,D=((ae=A.position.leverage)==null?void 0:ae.type)||"cross",_=A.position.liquidationPx,W=l.get(A.position.coin),X=M?W==null?void 0:W.bid:W==null?void 0:W.ask;return h.jsxs("tr",{className:"border-b border-[#232328]/50 last:border-0 hover:bg-[#1a1b21] transition-colors",children:[h.jsx("td",{className:"py-3 pl-4 font-medium text-white",children:A.position.coin}),h.jsx("td",{className:`py-3 font-semibold ${M?"text-[#34d399]":"text-red-400"}`,children:M?"LONG":"SHORT"}),h.jsx("td",{className:"py-3 text-[#a0a1a8]",children:z.toFixed(4)}),h.jsxs("td",{className:"py-3 text-[#a0a1a8]",children:["$",G]}),h.jsx("td",{className:"py-3 text-[#a0a1a8]",children:X?`$${X.toFixed(2)}`:"-"}),h.jsxs("td",{className:"py-3 text-[#E7FE55] font-medium",children:[q,"x"]}),h.jsx("td",{className:"py-3",children:h.jsx("span",{className:`px-2 py-1 rounded text-[10px] font-medium uppercase tracking-wider ${D==="isolated"?"bg-purple-500/15 text-purple-400":"bg-blue-500/15 text-blue-400"}`,children:D})}),h.jsx("td",{className:"py-3 text-red-400/80",children:_?`$${parseFloat(_).toFixed(2)}`:"-"}),h.jsxs("td",{className:`py-3 font-semibold ${te>=0?"text-[#34d399]":"text-red-400"}`,children:[te>=0?"+":"",te.toFixed(2)]}),h.jsxs("td",{className:`py-3 pr-4 font-medium ${Y>=0?"text-[#34d399]":"text-red-400"}`,children:[Y>=0?"+":"",(Y*100).toFixed(2),"%"]})]},I)})})]})})]}),h.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[h.jsx(td,{size:18,className:"text-yellow-500"}),"Open Orders"]}),h.jsxs("span",{className:"text-[10px] bg-[#1a1b21] text-[#747580] px-2 py-1 rounded uppercase tracking-wider",children:[o.length," pending"]})]}),h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full text-left text-sm border-collapse",children:[h.jsx("thead",{children:h.jsxs("tr",{className:"text-[10px] uppercase tracking-[0.05em] text-[#747580] border-b border-[#232328]",children:[h.jsx("th",{className:"py-3 pl-4 font-medium",children:"Symbol"}),h.jsx("th",{className:"py-3 font-medium",children:"Side"}),h.jsx("th",{className:"py-3 font-medium",children:"Size"}),h.jsx("th",{className:"py-3 font-medium",children:"Price"}),h.jsx("th",{className:"py-3 font-medium",children:"Type"})]})}),h.jsx("tbody",{className:"text-sm",children:o.length===0?h.jsx("tr",{children:h.jsx("td",{colSpan:5,className:"p-8 text-center text-slate-500",children:"No open orders"})}):o.map((A,I)=>h.jsxs("tr",{className:"border-b border-[#232328]/50 last:border-0 hover:bg-[#1a1b21]",children:[h.jsx("td",{className:"py-3 pl-4 font-medium text-white",children:A.coin}),h.jsx("td",{className:`py-3 font-medium ${A.side==="B"?"text-[#34d399]":"text-red-400"}`,children:A.side==="B"?"BUY":"SELL"}),h.jsx("td",{className:"py-3 text-[#a0a1a8]",children:A.sz}),h.jsxs("td",{className:"py-3 text-[#a0a1a8]",children:["$",A.limitPx]}),h.jsx("td",{className:"py-3 text-[#a0a1a8]",children:A.orderType})]},I))})]})})]}),h.jsxs("div",{className:"grid grid-cols-1 2xl:grid-cols-2 gap-6",children:[h.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col",children:[h.jsx("div",{className:"flex items-center justify-between mb-4 border-b border-[#232328] pb-2",children:h.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[h.jsx(mo,{size:18,className:"text-[#E7FE55]"}),"Recent Activity"]})}),h.jsx("div",{className:"flex-1",children:H.length===0?h.jsx("div",{className:"text-center py-8 text-[#747580] text-sm",children:"No recent transactions"}):h.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto pr-2 custom-scrollbar",children:H.slice(0,15).map((A,I)=>h.jsxs("div",{className:"flex items-start gap-3 pb-3 border-b border-[#232328]/50 last:border-0 border-dashed",children:[h.jsx("div",{className:"mt-1 p-1.5 rounded-full bg-[#E7FE55]/15 text-[#E7FE55]",children:h.jsx(mo,{size:12})}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("div",{className:"flex justify-between items-start gap-2",children:[h.jsx("span",{className:"text-xs font-medium text-[#E7FE55]",children:A.type}),h.jsx("span",{className:"text-[10px] text-[#747580] flex-shrink-0",children:new Date(A.timestamp).toLocaleTimeString()})]}),h.jsx("div",{className:"text-[11px] text-[#a0a1a8] truncate mt-0.5",children:A.desc}),A.signature&&A.signature!=="pending"&&h.jsxs("div",{className:"text-[9px] text-[#747580] font-mono mt-1 hover:text-[#E7FE55] cursor-pointer transition-colors",children:[A.signature.slice(0,6),"..."]})]})]},I))})})]}),h.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col",children:[h.jsxs("div",{className:"flex justify-between items-start mb-4 border-b border-[#232328] pb-2",children:[h.jsxs("div",{className:"flex flex-col",children:[h.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[h.jsx(Rn,{size:18,className:"text-[#E7FE55]"}),"Market Data"]}),h.jsxs("span",{className:"text-[10px] text-[#747580] mt-1",children:[$.length," assets"]})]}),h.jsxs("div",{className:"relative",children:[h.jsx(hne,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-[#747580]",size:14}),h.jsx("input",{type:"text",placeholder:"Search assets...",value:m,onChange:A=>g(A.target.value),className:"w-48 pl-9 pr-3 py-1.5 bg-[#14151a] border border-[#232328] text-white rounded text-xs focus:outline-none focus:border-[#E7FE55]"})]})]}),h.jsx("div",{className:"overflow-x-auto max-h-96 custom-scrollbar",children:h.jsxs("table",{className:"w-full text-left text-sm border-collapse",children:[h.jsx("thead",{className:"sticky top-0 bg-[#0c0d10] z-10",children:h.jsxs("tr",{className:"text-[10px] uppercase tracking-[0.05em] text-[#747580] border-b border-[#232328]",children:[h.jsx("th",{className:"py-2 pl-2 font-medium",children:"Asset"}),h.jsx("th",{className:"py-2 font-medium",children:"Bid"}),h.jsx("th",{className:"py-2 font-medium",children:"Ask"}),h.jsx("th",{className:"py-2 font-medium",children:"Spread %"})]})}),h.jsx("tbody",{className:"text-sm",children:$.length===0?h.jsx("tr",{children:h.jsx("td",{colSpan:4,className:"py-8 text-center text-[#747580]",children:"No assets found"})}):$.slice(0,20).map(A=>{const I=l.get(A),M=K.has(A);return h.jsxs("tr",{className:`border-b border-[#232328]/50 last:border-0 hover:bg-[#1a1b21] transition-colors ${M?"bg-[#E7FE55]/5":""}`,children:[h.jsxs("td",{className:"py-2 pl-2 font-medium text-white flex items-center gap-2",children:[A,M&&h.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-[#E7FE55]",title:"Open Position"})]}),h.jsx("td",{className:"py-2 text-[#34d399] font-medium",children:I?`$${I.bid.toFixed(2)}`:"-"}),h.jsx("td",{className:"py-2 text-red-400 font-medium",children:I?`$${I.ask.toFixed(2)}`:"-"}),h.jsx("td",{className:"py-2 text-[#a0a1a8]",children:I?`${I.spreadPercent.toFixed(3)}%`:"-"})]},A)})})]})})]})]})]})};var K5="focusScope.autoFocusOnMount",W5="focusScope.autoFocusOnUnmount",_Q={bubbles:!1,cancelable:!0},Uat="FocusScope",wj=T.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=t,[a,l]=T.useState(null),c=th(i),u=th(s),f=T.useRef(null),m=Nr(e,v=>l(v)),g=T.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;T.useEffect(()=>{if(r){let v=function(k){if(g.paused||!a)return;const O=k.target;a.contains(O)?f.current=O:vf(f.current,{select:!0})},w=function(k){if(g.paused||!a)return;const O=k.relatedTarget;O!==null&&(a.contains(O)||vf(f.current,{select:!0}))},E=function(k){if(document.activeElement===document.body)for(const j of k)j.removedNodes.length>0&&vf(a)};document.addEventListener("focusin",v),document.addEventListener("focusout",w);const C=new MutationObserver(E);return a&&C.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",w),C.disconnect()}}},[r,a,g.paused]),T.useEffect(()=>{if(a){PQ.add(g);const v=document.activeElement;if(!a.contains(v)){const E=new CustomEvent(K5,_Q);a.addEventListener(K5,c),a.dispatchEvent(E),E.defaultPrevented||(Fat(qat(Hhe(a)),{select:!0}),document.activeElement===v&&vf(a))}return()=>{a.removeEventListener(K5,c),setTimeout(()=>{const E=new CustomEvent(W5,_Q);a.addEventListener(W5,u),a.dispatchEvent(E),E.defaultPrevented||vf(v??document.body,{select:!0}),a.removeEventListener(W5,u),PQ.remove(g)},0)}}},[a,c,u,g]);const x=T.useCallback(v=>{if(!n&&!r||g.paused)return;const w=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,E=document.activeElement;if(w&&E){const C=v.currentTarget,[k,O]=$at(C);k&&O?!v.shiftKey&&E===O?(v.preventDefault(),n&&vf(k,{select:!0})):v.shiftKey&&E===k&&(v.preventDefault(),n&&vf(O,{select:!0})):E===C&&v.preventDefault()}},[n,r,g.paused]);return h.jsx(Mn.div,{tabIndex:-1,...o,ref:m,onKeyDown:x})});wj.displayName=Uat;function Fat(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(vf(r,{select:e}),document.activeElement!==n)return}function $at(t){const e=Hhe(t),n=IQ(e,t),r=IQ(e.reverse(),t);return[n,r]}function Hhe(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function IQ(t,e){for(const n of t)if(!zat(n,{upTo:e}))return n}function zat(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function Hat(t){return t instanceof HTMLInputElement&&"select"in t}function vf(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&Hat(t)&&e&&t.select()}}var PQ=Vat();function Vat(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=RQ(t,e),t.unshift(e)},remove(e){var n;t=RQ(t,e),(n=t[0])==null||n.resume()}}}function RQ(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function qat(t){return t.filter(e=>e.tagName!=="A")}var Y5=0;function Vhe(){T.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??OQ()),document.body.insertAdjacentElement("beforeend",t[1]??OQ()),Y5++,()=>{Y5===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Y5--}},[])}function OQ(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var yT="right-scroll-bar-position",xT="width-before-scroll-bar",Gat="with-scroll-bars-hidden",Kat="--removed-body-scroll-bar-size";function J5(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function Wat(t,e){var n=T.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var Yat=typeof window<"u"?T.useLayoutEffect:T.useEffect,MQ=new WeakMap;function Jat(t,e){var n=Wat(null,function(r){return t.forEach(function(i){return J5(i,r)})});return Yat(function(){var r=MQ.get(n);if(r){var i=new Set(r),s=new Set(t),o=n.current;i.forEach(function(a){s.has(a)||J5(a,null)}),s.forEach(function(a){i.has(a)||J5(a,o)})}MQ.set(n,t)},[t]),n}function Xat(t){return t}function Qat(t,e){e===void 0&&(e=Xat);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var u=o;o=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),n}}}};return i}function Zat(t){t===void 0&&(t={});var e=Qat(null);return e.options=uc({async:!0,ssr:!1},t),e}var qhe=function(t){var e=t.sideCar,n=wx(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return T.createElement(r,uc({},n))};qhe.isSideCarExport=!0;function elt(t,e){return t.useMedium(e),qhe}var Ghe=Zat(),X5=function(){},IN=T.forwardRef(function(t,e){var n=T.useRef(null),r=T.useState({onScrollCapture:X5,onWheelCapture:X5,onTouchMoveCapture:X5}),i=r[0],s=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,f=t.shards,m=t.sideCar,g=t.noRelative,x=t.noIsolation,v=t.inert,w=t.allowPinchZoom,E=t.as,C=E===void 0?"div":E,k=t.gapMode,O=wx(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),j=m,R=Jat([n,e]),U=uc(uc({},O),i);return T.createElement(T.Fragment,null,u&&T.createElement(j,{sideCar:Ghe,removeScrollBar:c,shards:f,noRelative:g,noIsolation:x,inert:v,setCallbacks:s,allowPinchZoom:!!w,lockRef:n,gapMode:k}),o?T.cloneElement(T.Children.only(a),uc(uc({},U),{ref:R})):T.createElement(C,uc({},U,{className:l,ref:R}),a))});IN.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};IN.classNames={fullWidth:xT,zeroRight:yT};var tlt=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function nlt(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=tlt();return e&&t.setAttribute("nonce",e),t}function rlt(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function ilt(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var slt=function(){var t=0,e=null;return{add:function(n){t==0&&(e=nlt())&&(rlt(e,n),ilt(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},olt=function(){var t=slt();return function(e,n){T.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},Khe=function(){var t=olt(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},alt={left:0,top:0,right:0,gap:0},Q5=function(t){return parseInt(t||"",10)||0},llt=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[Q5(n),Q5(r),Q5(i)]},clt=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return alt;var e=llt(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},ult=Khe(),Jg="data-scroll-locked",dlt=function(t,e,n,r){var i=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(Gat,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Jg,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(yT,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(xT,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(yT," .").concat(yT,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(xT," .").concat(xT,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Jg,`] {
    `).concat(Kat,": ").concat(a,`px;
  }
`)},DQ=function(){var t=parseInt(document.body.getAttribute(Jg)||"0",10);return isFinite(t)?t:0},flt=function(){T.useEffect(function(){return document.body.setAttribute(Jg,(DQ()+1).toString()),function(){var t=DQ()-1;t<=0?document.body.removeAttribute(Jg):document.body.setAttribute(Jg,t.toString())}},[])},hlt=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;flt();var s=T.useMemo(function(){return clt(i)},[i]);return T.createElement(ult,{styles:dlt(s,!e,i,n?"":"!important")})},FD=!1;if(typeof window<"u")try{var AA=Object.defineProperty({},"passive",{get:function(){return FD=!0,!0}});window.addEventListener("test",AA,AA),window.removeEventListener("test",AA,AA)}catch{FD=!1}var q0=FD?{passive:!1}:!1,plt=function(t){return t.tagName==="TEXTAREA"},Whe=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!plt(t)&&n[e]==="visible")},mlt=function(t){return Whe(t,"overflowY")},glt=function(t){return Whe(t,"overflowX")},LQ=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=Yhe(t,r);if(i){var s=Jhe(t,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},ylt=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},xlt=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},Yhe=function(t,e){return t==="v"?mlt(e):glt(e)},Jhe=function(t,e){return t==="v"?ylt(e):xlt(e)},vlt=function(t,e){return t==="h"&&e==="rtl"?-1:1},blt=function(t,e,n,r,i){var s=vlt(t,window.getComputedStyle(e).direction),o=s*r,a=n.target,l=e.contains(a),c=!1,u=o>0,f=0,m=0;do{if(!a)break;var g=Jhe(t,a),x=g[0],v=g[1],w=g[2],E=v-w-s*x;(x||E)&&Yhe(t,a)&&(f+=E,m+=x);var C=a.parentNode;a=C&&C.nodeType===Node.DOCUMENT_FRAGMENT_NODE?C.host:C}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&Math.abs(f)<1||!u&&Math.abs(m)<1)&&(c=!0),c},TA=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},BQ=function(t){return[t.deltaX,t.deltaY]},jQ=function(t){return t&&"current"in t?t.current:t},wlt=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Elt=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Slt=0,G0=[];function Alt(t){var e=T.useRef([]),n=T.useRef([0,0]),r=T.useRef(),i=T.useState(Slt++)[0],s=T.useState(Khe)[0],o=T.useRef(t);T.useEffect(function(){o.current=t},[t]),T.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var v=Zye([t.lockRef.current],(t.shards||[]).map(jQ),!0).filter(Boolean);return v.forEach(function(w){return w.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),v.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var a=T.useCallback(function(v,w){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!o.current.allowPinchZoom;var E=TA(v),C=n.current,k="deltaX"in v?v.deltaX:C[0]-E[0],O="deltaY"in v?v.deltaY:C[1]-E[1],j,R=v.target,U=Math.abs(k)>Math.abs(O)?"h":"v";if("touches"in v&&U==="h"&&R.type==="range")return!1;var V=window.getSelection(),F=V&&V.anchorNode,$=F?F===R||F.contains(R):!1;if($)return!1;var K=LQ(U,R);if(!K)return!0;if(K?j=U:(j=U==="v"?"h":"v",K=LQ(U,R)),!K)return!1;if(!r.current&&"changedTouches"in v&&(k||O)&&(r.current=j),!j)return!0;var H=r.current||j;return blt(H,w,v,H==="h"?k:O)},[]),l=T.useCallback(function(v){var w=v;if(!(!G0.length||G0[G0.length-1]!==s)){var E="deltaY"in w?BQ(w):TA(w),C=e.current.filter(function(j){return j.name===w.type&&(j.target===w.target||w.target===j.shadowParent)&&wlt(j.delta,E)})[0];if(C&&C.should){w.cancelable&&w.preventDefault();return}if(!C){var k=(o.current.shards||[]).map(jQ).filter(Boolean).filter(function(j){return j.contains(w.target)}),O=k.length>0?a(w,k[0]):!o.current.noIsolation;O&&w.cancelable&&w.preventDefault()}}},[]),c=T.useCallback(function(v,w,E,C){var k={name:v,delta:w,target:E,should:C,shadowParent:Tlt(E)};e.current.push(k),setTimeout(function(){e.current=e.current.filter(function(O){return O!==k})},1)},[]),u=T.useCallback(function(v){n.current=TA(v),r.current=void 0},[]),f=T.useCallback(function(v){c(v.type,BQ(v),v.target,a(v,t.lockRef.current))},[]),m=T.useCallback(function(v){c(v.type,TA(v),v.target,a(v,t.lockRef.current))},[]);T.useEffect(function(){return G0.push(s),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:m}),document.addEventListener("wheel",l,q0),document.addEventListener("touchmove",l,q0),document.addEventListener("touchstart",u,q0),function(){G0=G0.filter(function(v){return v!==s}),document.removeEventListener("wheel",l,q0),document.removeEventListener("touchmove",l,q0),document.removeEventListener("touchstart",u,q0)}},[]);var g=t.removeScrollBar,x=t.inert;return T.createElement(T.Fragment,null,x?T.createElement(s,{styles:Elt(i)}):null,g?T.createElement(hlt,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function Tlt(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const klt=elt(Ghe,Alt);var Ej=T.forwardRef(function(t,e){return T.createElement(IN,uc({},t,{ref:e,sideCar:klt}))});Ej.classNames=IN.classNames;var Clt=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},K0=new WeakMap,kA=new WeakMap,CA={},Z5=0,Xhe=function(t){return t&&(t.host||Xhe(t.parentNode))},Nlt=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=Xhe(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},_lt=function(t,e,n,r){var i=Nlt(e,Array.isArray(t)?t:[t]);CA[n]||(CA[n]=new WeakMap);var s=CA[n],o=[],a=new Set,l=new Set(i),c=function(f){!f||a.has(f)||(a.add(f),c(f.parentNode))};i.forEach(c);var u=function(f){!f||l.has(f)||Array.prototype.forEach.call(f.children,function(m){if(a.has(m))u(m);else try{var g=m.getAttribute(r),x=g!==null&&g!=="false",v=(K0.get(m)||0)+1,w=(s.get(m)||0)+1;K0.set(m,v),s.set(m,w),o.push(m),v===1&&x&&kA.set(m,!0),w===1&&m.setAttribute(n,"true"),x||m.setAttribute(r,"true")}catch(E){console.error("aria-hidden: cannot operate on ",m,E)}})};return u(e),a.clear(),Z5++,function(){o.forEach(function(f){var m=K0.get(f)-1,g=s.get(f)-1;K0.set(f,m),s.set(f,g),m||(kA.has(f)||f.removeAttribute(r),kA.delete(f)),g||f.removeAttribute(n)}),Z5--,Z5||(K0=new WeakMap,K0=new WeakMap,kA=new WeakMap,CA={})}},Qhe=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=Clt(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),_lt(r,i,n,"aria-hidden")):function(){return null}};function Ilt(t){const e=Plt(t),n=T.forwardRef((r,i)=>{const{children:s,...o}=r,a=T.Children.toArray(s),l=a.find(Olt);if(l){const c=l.props.children,u=a.map(f=>f===l?T.Children.count(c)>1?T.Children.only(null):T.isValidElement(c)?c.props.children:null:f);return h.jsx(e,{...o,ref:i,children:T.isValidElement(c)?T.cloneElement(c,void 0,u):null})}return h.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}function Plt(t){const e=T.forwardRef((n,r)=>{const{children:i,...s}=n;if(T.isValidElement(i)){const o=Dlt(i),a=Mlt(s,i.props);return i.type!==T.Fragment&&(a.ref=r?Rx(r,o):o),T.cloneElement(i,a)}return T.Children.count(i)>1?T.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var Rlt=Symbol("radix.slottable");function Olt(t){return T.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Rlt}function Mlt(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const l=s(...a);return i(...a),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function Dlt(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var PN="Dialog",[Zhe]=Im(PN),[Llt,Dl]=Zhe(PN),epe=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!0}=t,a=T.useRef(null),l=T.useRef(null),[c,u]=Aw({prop:r,defaultProp:i??!1,onChange:s,caller:PN});return h.jsx(Llt,{scope:e,triggerRef:a,contentRef:l,contentId:Yf(),titleId:Yf(),descriptionId:Yf(),open:c,onOpenChange:u,onOpenToggle:T.useCallback(()=>u(f=>!f),[u]),modal:o,children:n})};epe.displayName=PN;var tpe="DialogTrigger",Blt=T.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Dl(tpe,n),s=Nr(e,i.triggerRef);return h.jsx(Mn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":Tj(i.open),...r,ref:s,onClick:mn(t.onClick,i.onOpenToggle)})});Blt.displayName=tpe;var Sj="DialogPortal",[jlt,npe]=Zhe(Sj,{forceMount:void 0}),rpe=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,s=Dl(Sj,e);return h.jsx(jlt,{scope:e,forceMount:n,children:T.Children.map(r,o=>h.jsx(Rm,{present:n||s.open,children:h.jsx(g2,{asChild:!0,container:i,children:o})}))})};rpe.displayName=Sj;var pC="DialogOverlay",ipe=T.forwardRef((t,e)=>{const n=npe(pC,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=Dl(pC,t.__scopeDialog);return s.modal?h.jsx(Rm,{present:r||s.open,children:h.jsx(Flt,{...i,ref:e})}):null});ipe.displayName=pC;var Ult=Ilt("DialogOverlay.RemoveScroll"),Flt=T.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Dl(pC,n);return h.jsx(Ej,{as:Ult,allowPinchZoom:!0,shards:[i.contentRef],children:h.jsx(Mn.div,{"data-state":Tj(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Em="DialogContent",spe=T.forwardRef((t,e)=>{const n=npe(Em,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=Dl(Em,t.__scopeDialog);return h.jsx(Rm,{present:r||s.open,children:s.modal?h.jsx($lt,{...i,ref:e}):h.jsx(zlt,{...i,ref:e})})});spe.displayName=Em;var $lt=T.forwardRef((t,e)=>{const n=Dl(Em,t.__scopeDialog),r=T.useRef(null),i=Nr(e,n.contentRef,r);return T.useEffect(()=>{const s=r.current;if(s)return Qhe(s)},[]),h.jsx(ope,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:mn(t.onCloseAutoFocus,s=>{var o;s.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:mn(t.onPointerDownOutside,s=>{const o=s.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&s.preventDefault()}),onFocusOutside:mn(t.onFocusOutside,s=>s.preventDefault())})}),zlt=T.forwardRef((t,e)=>{const n=Dl(Em,t.__scopeDialog),r=T.useRef(!1),i=T.useRef(!1);return h.jsx(ope,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,s),s.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),ope=T.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...o}=t,a=Dl(Em,n),l=T.useRef(null),c=Nr(e,l);return Vhe(),h.jsxs(h.Fragment,{children:[h.jsx(wj,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:h.jsx(u2,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":Tj(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),h.jsxs(h.Fragment,{children:[h.jsx(Hlt,{titleId:a.titleId}),h.jsx(qlt,{contentRef:l,descriptionId:a.descriptionId})]})]})}),Aj="DialogTitle",ape=T.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Dl(Aj,n);return h.jsx(Mn.h2,{id:i.titleId,...r,ref:e})});ape.displayName=Aj;var lpe="DialogDescription",cpe=T.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Dl(lpe,n);return h.jsx(Mn.p,{id:i.descriptionId,...r,ref:e})});cpe.displayName=lpe;var upe="DialogClose",dpe=T.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Dl(upe,n);return h.jsx(Mn.button,{type:"button",...r,ref:e,onClick:mn(t.onClick,()=>i.onOpenChange(!1))})});dpe.displayName=upe;function Tj(t){return t?"open":"closed"}var fpe="DialogTitleWarning",[Umt,hpe]=WIe(fpe,{contentName:Em,titleName:Aj,docsSlug:"dialog"}),Hlt=({titleId:t})=>{const e=hpe(fpe),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return T.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},Vlt="DialogDescriptionWarning",qlt=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${hpe(Vlt).contentName}}.`;return T.useEffect(()=>{var s;const i=(s=t.current)==null?void 0:s.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},Glt=epe,Klt=rpe,ppe=ipe,mpe=spe,gpe=ape,ype=cpe,Wlt=dpe;const kj=Glt,Ylt=Klt,xpe=T.forwardRef(({className:t,...e},n)=>h.jsx(ppe,{ref:n,className:Ut("fixed inset-0 z-50 bg-black/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));xpe.displayName=ppe.displayName;const RN=T.forwardRef(({className:t,children:e,...n},r)=>h.jsxs(Ylt,{children:[h.jsx(xpe,{}),h.jsxs(mpe,{ref:r,className:Ut("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-slate-700 bg-slate-900 p-6 shadow-2xl duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-xl",t),...n,children:[e,h.jsxs(Wlt,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[h.jsx(GC,{className:"h-4 w-4"}),h.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));RN.displayName=mpe.displayName;const ON=({className:t,...e})=>h.jsx("div",{className:Ut("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});ON.displayName="DialogHeader";const MN=({className:t,...e})=>h.jsx("div",{className:Ut("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});MN.displayName="DialogFooter";const DN=T.forwardRef(({className:t,...e},n)=>h.jsx(gpe,{ref:n,className:Ut("text-lg font-semibold leading-none tracking-tight text-white",t),...e}));DN.displayName=gpe.displayName;const LN=T.forwardRef(({className:t,...e},n)=>h.jsx(ype,{ref:n,className:Ut("text-sm text-muted-foreground",t),...e}));LN.displayName=ype.displayName;const Jlt=({backupKey:t,setBackupKey:e,setShowBackupModal:n,addNotification:r,onClose:i})=>{const s=async()=>{try{await navigator.clipboard.writeText(t),r("Private key copied to clipboard")}catch{r("Failed to copy to clipboard")}},o=()=>{e(""),n(!1),r("Solana backup confirmed!"),i&&i()};return h.jsx(kj,{open:!0,onOpenChange:()=>{},children:h.jsxs(RN,{className:"max-w-md",onPointerDownOutside:a=>a.preventDefault(),children:[h.jsxs(ON,{children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsx("div",{className:"w-10 h-10 bg-purple-500/20 rounded-full flex items-center justify-center",children:h.jsx(ed,{className:"text-purple-400 w-5 h-5"})}),h.jsx("div",{children:h.jsxs(DN,{className:"flex items-center gap-2",children:["Backup Your Solana Key",h.jsx(_l,{variant:"purple",children:"CRITICAL"})]})})]}),h.jsx(LN,{children:"This is your Solana wallet private key. Save it securely - you will NOT see it again."})]}),h.jsxs(rn.div,{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-3 flex items-start gap-2",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:[h.jsx(td,{className:"text-red-400 w-5 h-5 shrink-0 mt-0.5"}),h.jsxs("p",{className:"text-red-400 text-sm",children:[h.jsx("strong",{children:"Warning:"})," Anyone with this key can access your funds. Never share it with anyone."]})]}),h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-slate-700",children:[h.jsx("p",{className:"text-[10px] uppercase text-slate-500 font-bold mb-2",children:"Private Key"}),h.jsx("div",{className:"font-mono text-xs text-slate-300 break-all bg-black/30 p-3 rounded border border-slate-700/50",children:t})]}),h.jsxs(Ui,{onClick:s,variant:"outline",className:"w-full",children:[h.jsx(Og,{className:"w-4 h-4 mr-2"}),"Copy to Clipboard"]})]}),h.jsx(MN,{children:h.jsx(Ui,{onClick:o,variant:"success",className:"w-full",children:"I've Saved My Key Securely"})})]})})},Xlt=({backupKey:t,setBackupKey:e,setShowBackupModal:n,addNotification:r})=>{const i=async()=>{try{await navigator.clipboard.writeText(t),r("Hyperliquid private key copied to clipboard")}catch{r("Failed to copy to clipboard")}},s=()=>{e(""),n(!1),r("Hyperliquid backup confirmed!")};return h.jsx(kj,{open:!0,onOpenChange:()=>{},children:h.jsxs(RN,{className:"max-w-md",onPointerDownOutside:o=>o.preventDefault(),children:[h.jsxs(ON,{children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsx("div",{className:"w-10 h-10 bg-emerald-500/20 rounded-full flex items-center justify-center",children:h.jsx(ed,{className:"text-emerald-400 w-5 h-5"})}),h.jsx("div",{children:h.jsxs(DN,{className:"flex items-center gap-2",children:["Backup Your Hyperliquid Key",h.jsx(_l,{variant:"success",children:"CRITICAL"})]})})]}),h.jsx(LN,{children:"This is your Hyperliquid (EVM) wallet private key. Save it securely - you will NOT see it again."})]}),h.jsxs(rn.div,{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-3 flex items-start gap-2",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:[h.jsx(td,{className:"text-red-400 w-5 h-5 shrink-0 mt-0.5"}),h.jsxs("p",{className:"text-red-400 text-sm",children:[h.jsx("strong",{children:"Warning:"})," Anyone with this key can access your funds. Never share it with anyone."]})]}),h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-slate-700",children:[h.jsx("p",{className:"text-[10px] uppercase text-slate-500 font-bold mb-2",children:"Private Key (EVM)"}),h.jsx("div",{className:"font-mono text-xs text-slate-300 break-all bg-black/30 p-3 rounded border border-slate-700/50",children:t})]}),h.jsxs(Ui,{onClick:i,variant:"outline",className:"w-full",children:[h.jsx(Og,{className:"w-4 h-4 mr-2"}),"Copy to Clipboard"]})]}),h.jsx(MN,{children:h.jsx(Ui,{onClick:s,variant:"success",className:"w-full",children:"I've Saved My Key Securely"})})]})})},Qlt=({backupKey:t,setBackupKey:e,setShowBackupModal:n,addNotification:r})=>{const i=async()=>{try{await navigator.clipboard.writeText(t),r("Polymarket private key copied to clipboard")}catch{r("Failed to copy to clipboard")}},s=()=>{e(""),n(!1),r("Polymarket backup confirmed!")};return h.jsx(kj,{open:!0,onOpenChange:()=>{},children:h.jsxs(RN,{className:"max-w-md",onPointerDownOutside:o=>o.preventDefault(),children:[h.jsxs(ON,{children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsx("div",{className:"w-10 h-10 bg-purple-500/20 rounded-full flex items-center justify-center",children:h.jsx(ed,{className:"text-purple-400 w-5 h-5"})}),h.jsx("div",{children:h.jsxs(DN,{className:"flex items-center gap-2",children:["Backup Your Polymarket Key",h.jsx(_l,{variant:"destructive",children:"CRITICAL"})]})})]}),h.jsx(LN,{children:"This is your Polymarket (Polygon) wallet private key. Save it securely - you will NOT see it again."})]}),h.jsxs(rn.div,{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-3 flex items-start gap-2",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:[h.jsx(td,{className:"text-red-400 w-5 h-5 shrink-0 mt-0.5"}),h.jsxs("p",{className:"text-red-400 text-sm",children:[h.jsx("strong",{children:"Warning:"})," Anyone with this key can access your Polygon funds. Never share it with anyone."]})]}),h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-slate-700",children:[h.jsx("p",{className:"text-[10px] uppercase text-slate-500 font-bold mb-2",children:"Private Key (Polygon EVM)"}),h.jsx("div",{className:"font-mono text-xs text-slate-300 break-all bg-black/30 p-3 rounded border border-slate-700/50",children:t})]}),h.jsxs(Ui,{onClick:i,variant:"outline",className:"w-full",children:[h.jsx(Og,{className:"w-4 h-4 mr-2"}),"Copy to Clipboard"]})]}),h.jsx(MN,{children:h.jsx(Ui,{onClick:s,variant:"success",className:"w-full",children:"I've Saved My Key Securely"})})]})})},Zlt="modulepreload",ect=function(t){return"/"+t},UQ={},lc=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let o=function(c){return Promise.all(c.map(u=>Promise.resolve(u).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=o(n.map(c=>{if(c=ect(c),c in UQ)return;UQ[c]=!0;const u=c.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const m=document.createElement("link");if(m.rel=u?"stylesheet":Zlt,u||(m.as="script"),m.crossOrigin="",m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),u)return new Promise((g,x)=>{m.addEventListener("load",g),m.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},W0=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function iE(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function $D(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Bm(t,...e){if(!iE(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function vpe(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");$D(t.outputLen),$D(t.blockLen)}function mC(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function tct(t,e){Bm(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function mx(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function e3(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Gl(t,e){return t<<32-e|t>>>e}const bpe=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",nct=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function nm(t){if(Bm(t),bpe)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=nct[t[n]];return e}const lu={_0:48,_9:57,A:65,F:70,a:97,f:102};function FQ(t){if(t>=lu._0&&t<=lu._9)return t-lu._0;if(t>=lu.A&&t<=lu.F)return t-(lu.A-10);if(t>=lu.a&&t<=lu.f)return t-(lu.a-10)}function gC(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(bpe)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let i=0,s=0;i<n;i++,s+=2){const o=FQ(t.charCodeAt(s)),a=FQ(t.charCodeAt(s+1));if(o===void 0||a===void 0){const l=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+l+'" at index '+s)}r[i]=o*16+a}return r}function rct(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Cj(t){return typeof t=="string"&&(t=rct(t)),Bm(t),t}function pc(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];Bm(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}class wpe{}function Epe(t){const e=r=>t().update(Cj(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Nj(t=32){if(W0&&typeof W0.getRandomValues=="function")return W0.getRandomValues(new Uint8Array(t));if(W0&&typeof W0.randomBytes=="function")return Uint8Array.from(W0.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}function ict(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),l=r?4:0,c=r?0:4;t.setUint32(e+l,o,r),t.setUint32(e+c,a,r)}function sct(t,e,n){return t&e^~t&n}function oct(t,e,n){return t&e^t&n^e&n}class Spe extends wpe{constructor(e,n,r,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.buffer=new Uint8Array(e),this.view=e3(this.buffer)}update(e){mC(this),e=Cj(e),Bm(e);const{view:n,buffer:r,blockLen:i}=this,s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=e3(e);for(;i<=s-o;o+=i)this.process(l,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){mC(this),tct(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,mx(this.buffer.subarray(o)),this.padOffset>i-o&&(this.process(r,0),o=0);for(let f=o;f<i;f++)n[f]=0;ict(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=e3(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=l/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<c;f++)a.setUint32(4*f,u[f],s)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=s,e.length=i,e.pos=a,i%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const df=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),fs=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),NA=BigInt(2**32-1),$Q=BigInt(32);function act(t,e=!1){return e?{h:Number(t&NA),l:Number(t>>$Q&NA)}:{h:Number(t>>$Q&NA)|0,l:Number(t&NA)|0}}function lct(t,e=!1){const n=t.length;let r=new Uint32Array(n),i=new Uint32Array(n);for(let s=0;s<n;s++){const{h:o,l:a}=act(t[s],e);[r[s],i[s]]=[o,a]}return[r,i]}const zQ=(t,e,n)=>t>>>n,HQ=(t,e,n)=>t<<32-n|e>>>n,Y0=(t,e,n)=>t>>>n|e<<32-n,J0=(t,e,n)=>t<<32-n|e>>>n,_A=(t,e,n)=>t<<64-n|e>>>n-32,IA=(t,e,n)=>t>>>n-32|e<<64-n;function cu(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:i|0}}const cct=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),uct=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,dct=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),fct=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0,hct=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0),pct=(t,e,n,r,i,s)=>e+n+r+i+s+(t/2**32|0)|0,mct=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ff=new Uint32Array(64);class gct extends Spe{constructor(e=32){super(64,e,8,!1),this.A=df[0]|0,this.B=df[1]|0,this.C=df[2]|0,this.D=df[3]|0,this.E=df[4]|0,this.F=df[5]|0,this.G=df[6]|0,this.H=df[7]|0}get(){const{A:e,B:n,C:r,D:i,E:s,F:o,G:a,H:l}=this;return[e,n,r,i,s,o,a,l]}set(e,n,r,i,s,o,a,l){this.A=e|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(e,n){for(let f=0;f<16;f++,n+=4)ff[f]=e.getUint32(n,!1);for(let f=16;f<64;f++){const m=ff[f-15],g=ff[f-2],x=Gl(m,7)^Gl(m,18)^m>>>3,v=Gl(g,17)^Gl(g,19)^g>>>10;ff[f]=v+ff[f-7]+x+ff[f-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:l,G:c,H:u}=this;for(let f=0;f<64;f++){const m=Gl(a,6)^Gl(a,11)^Gl(a,25),g=u+m+sct(a,l,c)+mct[f]+ff[f]|0,v=(Gl(r,2)^Gl(r,13)^Gl(r,22))+oct(r,i,s)|0;u=c,c=l,l=a,a=o+g|0,o=s,s=i,i=r,r=g+v|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(r,i,s,o,a,l,c,u)}roundClean(){mx(ff)}destroy(){this.set(0,0,0,0,0,0,0,0),mx(this.buffer)}}const Ape=lct(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),yct=Ape[0],xct=Ape[1],hf=new Uint32Array(80),pf=new Uint32Array(80);class vct extends Spe{constructor(e=64){super(128,e,16,!1),this.Ah=fs[0]|0,this.Al=fs[1]|0,this.Bh=fs[2]|0,this.Bl=fs[3]|0,this.Ch=fs[4]|0,this.Cl=fs[5]|0,this.Dh=fs[6]|0,this.Dl=fs[7]|0,this.Eh=fs[8]|0,this.El=fs[9]|0,this.Fh=fs[10]|0,this.Fl=fs[11]|0,this.Gh=fs[12]|0,this.Gl=fs[13]|0,this.Hh=fs[14]|0,this.Hl=fs[15]|0}get(){const{Ah:e,Al:n,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:l,Eh:c,El:u,Fh:f,Fl:m,Gh:g,Gl:x,Hh:v,Hl:w}=this;return[e,n,r,i,s,o,a,l,c,u,f,m,g,x,v,w]}set(e,n,r,i,s,o,a,l,c,u,f,m,g,x,v,w){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=c|0,this.El=u|0,this.Fh=f|0,this.Fl=m|0,this.Gh=g|0,this.Gl=x|0,this.Hh=v|0,this.Hl=w|0}process(e,n){for(let k=0;k<16;k++,n+=4)hf[k]=e.getUint32(n),pf[k]=e.getUint32(n+=4);for(let k=16;k<80;k++){const O=hf[k-15]|0,j=pf[k-15]|0,R=Y0(O,j,1)^Y0(O,j,8)^zQ(O,j,7),U=J0(O,j,1)^J0(O,j,8)^HQ(O,j,7),V=hf[k-2]|0,F=pf[k-2]|0,$=Y0(V,F,19)^_A(V,F,61)^zQ(V,F,6),K=J0(V,F,19)^IA(V,F,61)^HQ(V,F,6),H=dct(U,K,pf[k-7],pf[k-16]),B=fct(H,R,$,hf[k-7],hf[k-16]);hf[k]=B|0,pf[k]=H|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:l,Dh:c,Dl:u,Eh:f,El:m,Fh:g,Fl:x,Gh:v,Gl:w,Hh:E,Hl:C}=this;for(let k=0;k<80;k++){const O=Y0(f,m,14)^Y0(f,m,18)^_A(f,m,41),j=J0(f,m,14)^J0(f,m,18)^IA(f,m,41),R=f&g^~f&v,U=m&x^~m&w,V=hct(C,j,U,xct[k],pf[k]),F=pct(V,E,O,R,yct[k],hf[k]),$=V|0,K=Y0(r,i,28)^_A(r,i,34)^_A(r,i,39),H=J0(r,i,28)^IA(r,i,34)^IA(r,i,39),B=r&s^r&a^s&a,A=i&o^i&l^o&l;E=v|0,C=w|0,v=g|0,w=x|0,g=f|0,x=m|0,{h:f,l:m}=cu(c|0,u|0,F|0,$|0),c=a|0,u=l|0,a=s|0,l=o|0,s=r|0,o=i|0;const I=cct($,H,A);r=uct(I,F,K,B),i=I|0}({h:r,l:i}=cu(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=cu(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l}=cu(this.Ch|0,this.Cl|0,a|0,l|0),{h:c,l:u}=cu(this.Dh|0,this.Dl|0,c|0,u|0),{h:f,l:m}=cu(this.Eh|0,this.El|0,f|0,m|0),{h:g,l:x}=cu(this.Fh|0,this.Fl|0,g|0,x|0),{h:v,l:w}=cu(this.Gh|0,this.Gl|0,v|0,w|0),{h:E,l:C}=cu(this.Hh|0,this.Hl|0,E|0,C|0),this.set(r,i,s,o,a,l,c,u,f,m,g,x,v,w,E,C)}roundClean(){mx(hf,pf)}destroy(){mx(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Tpe=Epe(()=>new gct),bct=Epe(()=>new vct);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _j=BigInt(0),zD=BigInt(1);function Sm(t,e=""){if(typeof t!="boolean"){const n=e&&`"${e}"`;throw new Error(n+"expected boolean, got type="+typeof t)}return t}function xl(t,e,n=""){const r=iE(t),i=t==null?void 0:t.length,s=e!==void 0;if(!r||s&&i!==e){const o=n&&`"${n}" `,a=s?` of length ${e}`:"",l=r?`length=${i}`:`type=${typeof t}`;throw new Error(o+"expected Uint8Array"+a+", got "+l)}return t}function PA(t){const e=t.toString(16);return e.length&1?"0"+e:e}function kpe(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?_j:BigInt("0x"+t)}function BN(t){return kpe(nm(t))}function Kw(t){return Bm(t),kpe(nm(Uint8Array.from(t).reverse()))}function Ij(t,e){return gC(t.toString(16).padStart(e*2,"0"))}function Cpe(t,e){return Ij(t,e).reverse()}function qr(t,e,n){let r;if(typeof e=="string")try{r=gC(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(iE(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(t+" of length "+n+" expected, got "+i);return r}function VQ(t){return Uint8Array.from(t)}const t3=t=>typeof t=="bigint"&&_j<=t;function wct(t,e,n){return t3(t)&&t3(e)&&t3(n)&&e<=t&&t<n}function HD(t,e,n,r){if(!wct(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function Npe(t){let e;for(e=0;t>_j;t>>=zD,e+=1);return e}const sE=t=>(zD<<BigInt(t))-zD;function Ect(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=g=>new Uint8Array(g),i=g=>Uint8Array.of(g);let s=r(t),o=r(t),a=0;const l=()=>{s.fill(1),o.fill(0),a=0},c=(...g)=>n(o,s,...g),u=(g=r(0))=>{o=c(i(0),g),s=c(),g.length!==0&&(o=c(i(1),g),s=c())},f=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let g=0;const x=[];for(;g<e;){s=c();const v=s.slice();x.push(v),g+=s.length}return pc(...x)};return(g,x)=>{l(),u(g);let v;for(;!(v=x(f()));)u();return l(),v}}function oE(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(i,s,o){const a=t[i];if(o&&a===void 0)return;const l=typeof a;if(l!==s||a===null)throw new Error(`param "${i}" is invalid: expected ${s}, got ${l}`)}Object.entries(e).forEach(([i,s])=>r(i,s,!1)),Object.entries(n).forEach(([i,s])=>r(i,s,!0))}function yC(t){const e=new WeakMap;return(n,...r)=>{const i=e.get(n);if(i!==void 0)return i;const s=t(n,...r);return e.set(n,s),s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const po=BigInt(0),ls=BigInt(1),Ep=BigInt(2),_pe=BigInt(3),Ipe=BigInt(4),Ppe=BigInt(5),Sct=BigInt(7),Rpe=BigInt(8),Act=BigInt(9),Ope=BigInt(16);function hi(t,e){const n=t%e;return n>=po?n:e+n}function $r(t,e,n){let r=t;for(;e-- >po;)r*=r,r%=n;return r}function qQ(t,e){if(t===po)throw new Error("invert: expected non-zero number");if(e<=po)throw new Error("invert: expected positive modulus, got "+e);let n=hi(t,e),r=e,i=po,s=ls;for(;n!==po;){const a=r/n,l=r%n,c=i-s*a;r=n,n=l,i=s,s=c}if(r!==ls)throw new Error("invert: does not exist");return hi(i,e)}function Pj(t,e,n){if(!t.eql(t.sqr(e),n))throw new Error("Cannot find square root")}function Mpe(t,e){const n=(t.ORDER+ls)/Ipe,r=t.pow(e,n);return Pj(t,r,e),r}function Tct(t,e){const n=(t.ORDER-Ppe)/Rpe,r=t.mul(e,Ep),i=t.pow(r,n),s=t.mul(e,i),o=t.mul(t.mul(s,Ep),i),a=t.mul(s,t.sub(o,t.ONE));return Pj(t,a,e),a}function kct(t){const e=jm(t),n=Dpe(t),r=n(e,e.neg(e.ONE)),i=n(e,r),s=n(e,e.neg(r)),o=(t+Sct)/Ope;return(a,l)=>{let c=a.pow(l,o),u=a.mul(c,r);const f=a.mul(c,i),m=a.mul(c,s),g=a.eql(a.sqr(u),l),x=a.eql(a.sqr(f),l);c=a.cmov(c,u,g),u=a.cmov(m,f,x);const v=a.eql(a.sqr(u),l),w=a.cmov(c,u,v);return Pj(a,w,l),w}}function Dpe(t){if(t<_pe)throw new Error("sqrt is not defined for small field");let e=t-ls,n=0;for(;e%Ep===po;)e/=Ep,n++;let r=Ep;const i=jm(t);for(;GQ(i,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return Mpe;let s=i.pow(r,e);const o=(e+ls)/Ep;return function(l,c){if(l.is0(c))return c;if(GQ(l,c)!==1)throw new Error("Cannot find square root");let u=n,f=l.mul(l.ONE,s),m=l.pow(c,e),g=l.pow(c,o);for(;!l.eql(m,l.ONE);){if(l.is0(m))return l.ZERO;let x=1,v=l.sqr(m);for(;!l.eql(v,l.ONE);)if(x++,v=l.sqr(v),x===u)throw new Error("Cannot find square root");const w=ls<<BigInt(u-x-1),E=l.pow(f,w);u=x,f=l.sqr(E),m=l.mul(m,f),g=l.mul(g,E)}return g}}function Cct(t){return t%Ipe===_pe?Mpe:t%Rpe===Ppe?Tct:t%Ope===Act?kct(t):Dpe(t)}const Nct=(t,e)=>(hi(t,e)&ls)===ls,_ct=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Ict(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=_ct.reduce((r,i)=>(r[i]="function",r),e);return oE(t,n),t}function Pct(t,e,n){if(n<po)throw new Error("invalid exponent, negatives unsupported");if(n===po)return t.ONE;if(n===ls)return e;let r=t.ONE,i=e;for(;n>po;)n&ls&&(r=t.mul(r,i)),i=t.sqr(i),n>>=ls;return r}function Lpe(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),i=e.reduce((o,a,l)=>t.is0(a)?o:(r[l]=o,t.mul(o,a)),t.ONE),s=t.inv(i);return e.reduceRight((o,a,l)=>t.is0(a)?o:(r[l]=t.mul(o,r[l]),t.mul(o,a)),s),r}function GQ(t,e){const n=(t.ORDER-ls)/Ep,r=t.pow(e,n),i=t.eql(r,t.ONE),s=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!i&&!s&&!o)throw new Error("invalid Legendre symbol result");return i?1:s?0:-1}function Bpe(t,e){e!==void 0&&$D(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function jm(t,e,n=!1,r={}){if(t<=po)throw new Error("invalid field: expected ORDER > 0, got "+t);let i,s,o=!1,a;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const m=e;m.BITS&&(i=m.BITS),m.sqrt&&(s=m.sqrt),typeof m.isLE=="boolean"&&(n=m.isLE),typeof m.modFromBytes=="boolean"&&(o=m.modFromBytes),a=m.allowedLengths}else typeof e=="number"&&(i=e),r.sqrt&&(s=r.sqrt);const{nBitLength:l,nByteLength:c}=Bpe(t,i);if(c>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let u;const f=Object.freeze({ORDER:t,isLE:n,BITS:l,BYTES:c,MASK:sE(l),ZERO:po,ONE:ls,allowedLengths:a,create:m=>hi(m,t),isValid:m=>{if(typeof m!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof m);return po<=m&&m<t},is0:m=>m===po,isValidNot0:m=>!f.is0(m)&&f.isValid(m),isOdd:m=>(m&ls)===ls,neg:m=>hi(-m,t),eql:(m,g)=>m===g,sqr:m=>hi(m*m,t),add:(m,g)=>hi(m+g,t),sub:(m,g)=>hi(m-g,t),mul:(m,g)=>hi(m*g,t),pow:(m,g)=>Pct(f,m,g),div:(m,g)=>hi(m*qQ(g,t),t),sqrN:m=>m*m,addN:(m,g)=>m+g,subN:(m,g)=>m-g,mulN:(m,g)=>m*g,inv:m=>qQ(m,t),sqrt:s||(m=>(u||(u=Cct(t)),u(f,m))),toBytes:m=>n?Cpe(m,c):Ij(m,c),fromBytes:(m,g=!0)=>{if(a){if(!a.includes(m.length)||m.length>c)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+m.length);const v=new Uint8Array(c);v.set(m,n?0:v.length-m.length),m=v}if(m.length!==c)throw new Error("Field.fromBytes: expected "+c+" bytes, got "+m.length);let x=n?Kw(m):BN(m);if(o&&(x=hi(x,t)),!g&&!f.isValid(x))throw new Error("invalid field element: outside of range 0..ORDER");return x},invertBatch:m=>Lpe(f,m),cmov:(m,g,x)=>x?g:m});return Object.freeze(f)}function jpe(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function Upe(t){const e=jpe(t);return e+Math.ceil(e/2)}function Rct(t,e,n=!1){const r=t.length,i=jpe(e),s=Upe(e);if(r<16||r<s||r>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+r);const o=n?Kw(t):BN(t),a=hi(o,e-ls)+ls;return n?Cpe(a,i):Ij(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const gx=BigInt(0),Sp=BigInt(1);function xC(t,e){const n=e.negate();return t?n:e}function Ap(t,e){const n=Lpe(t.Fp,e.map(r=>r.Z));return e.map((r,i)=>t.fromAffine(r.toAffine(n[i])))}function Fpe(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function n3(t,e){Fpe(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),i=2**t,s=sE(t),o=BigInt(t);return{windows:n,windowSize:r,mask:s,maxNumber:i,shiftBy:o}}function KQ(t,e,n){const{windowSize:r,mask:i,maxNumber:s,shiftBy:o}=n;let a=Number(t&i),l=t>>o;a>r&&(a-=s,l+=Sp);const c=e*r,u=c+Math.abs(a)-1,f=a===0,m=a<0,g=e%2!==0;return{nextN:l,offset:u,isZero:f,isNeg:m,isNegF:g,offsetF:c}}function Oct(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function Mct(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const r3=new WeakMap,$pe=new WeakMap;function i3(t){return $pe.get(t)||1}function WQ(t){if(t!==gx)throw new Error("invalid wNAF")}class zpe{constructor(e,n){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=n}_unsafeLadder(e,n,r=this.ZERO){let i=e;for(;n>gx;)n&Sp&&(r=r.add(i)),i=i.double(),n>>=Sp;return r}precomputeWindow(e,n){const{windows:r,windowSize:i}=n3(n,this.bits),s=[];let o=e,a=o;for(let l=0;l<r;l++){a=o,s.push(a);for(let c=1;c<i;c++)a=a.add(o),s.push(a);o=a.double()}return s}wNAF(e,n,r){if(!this.Fn.isValid(r))throw new Error("invalid scalar");let i=this.ZERO,s=this.BASE;const o=n3(e,this.bits);for(let a=0;a<o.windows;a++){const{nextN:l,offset:c,isZero:u,isNeg:f,isNegF:m,offsetF:g}=KQ(r,a,o);r=l,u?s=s.add(xC(m,n[g])):i=i.add(xC(f,n[c]))}return WQ(r),{p:i,f:s}}wNAFUnsafe(e,n,r,i=this.ZERO){const s=n3(e,this.bits);for(let o=0;o<s.windows&&r!==gx;o++){const{nextN:a,offset:l,isZero:c,isNeg:u}=KQ(r,o,s);if(r=a,!c){const f=n[l];i=i.add(u?f.negate():f)}}return WQ(r),i}getPrecomputes(e,n,r){let i=r3.get(n);return i||(i=this.precomputeWindow(n,e),e!==1&&(typeof r=="function"&&(i=r(i)),r3.set(n,i))),i}cached(e,n,r){const i=i3(e);return this.wNAF(i,this.getPrecomputes(i,e,r),n)}unsafe(e,n,r,i){const s=i3(e);return s===1?this._unsafeLadder(e,n,i):this.wNAFUnsafe(s,this.getPrecomputes(s,e,r),n,i)}createCache(e,n){Fpe(n,this.bits),$pe.set(e,n),r3.delete(e)}hasCache(e){return i3(e)!==1}}function Dct(t,e,n,r){let i=e,s=t.ZERO,o=t.ZERO;for(;n>gx||r>gx;)n&Sp&&(s=s.add(i)),r&Sp&&(o=o.add(i)),i=i.double(),n>>=Sp,r>>=Sp;return{p1:s,p2:o}}function Hpe(t,e,n,r){Oct(n,t),Mct(r,e);const i=n.length,s=r.length;if(i!==s)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=Npe(BigInt(i));let l=1;a>12?l=a-3:a>4?l=a-2:a>0&&(l=2);const c=sE(l),u=new Array(Number(c)+1).fill(o),f=Math.floor((e.BITS-1)/l)*l;let m=o;for(let g=f;g>=0;g-=l){u.fill(o);for(let v=0;v<s;v++){const w=r[v],E=Number(w>>BigInt(g)&c);u[E]=u[E].add(n[v])}let x=o;for(let v=u.length-1,w=o;v>0;v--)w=w.add(u[v]),x=x.add(w);if(m=m.add(x),g!==0)for(let v=0;v<l;v++)m=m.double()}return m}function YQ(t,e,n){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Ict(e),e}else return jm(t,{isLE:n})}function Vpe(t,e,n={},r){if(r===void 0&&(r=t==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const l of["p","n","h"]){const c=e[l];if(!(typeof c=="bigint"&&c>gx))throw new Error(`CURVE.${l} must be positive bigint`)}const i=YQ(e.p,n.Fp,r),s=YQ(e.n,n.Fn,r),a=["Gx","Gy","a",t==="weierstrass"?"b":"d"];for(const l of a)if(!i.isValid(e[l]))throw new Error(`CURVE.${l} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:i,Fn:s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const mf=BigInt(0),Pi=BigInt(1),s3=BigInt(2),Lct=BigInt(8);function Bct(t,e,n,r){const i=t.sqr(n),s=t.sqr(r),o=t.add(t.mul(e.a,i),s),a=t.add(t.ONE,t.mul(e.d,t.mul(i,s)));return t.eql(o,a)}function jct(t,e={}){const n=Vpe("edwards",t,e,e.FpFnLE),{Fp:r,Fn:i}=n;let s=n.CURVE;const{h:o}=s;oE(e,{},{uvRatio:"function"});const a=s3<<BigInt(i.BYTES*8)-Pi,l=w=>r.create(w),c=e.uvRatio||((w,E)=>{try{return{isValid:!0,value:r.sqrt(r.div(w,E))}}catch{return{isValid:!1,value:mf}}});if(!Bct(r,s,s.Gx,s.Gy))throw new Error("bad curve params: generator point");function u(w,E,C=!1){const k=C?Pi:mf;return HD("coordinate "+w,E,k,a),E}function f(w){if(!(w instanceof x))throw new Error("ExtendedPoint expected")}const m=yC((w,E)=>{const{X:C,Y:k,Z:O}=w,j=w.is0();E==null&&(E=j?Lct:r.inv(O));const R=l(C*E),U=l(k*E),V=r.mul(O,E);if(j)return{x:mf,y:Pi};if(V!==Pi)throw new Error("invZ was invalid");return{x:R,y:U}}),g=yC(w=>{const{a:E,d:C}=s;if(w.is0())throw new Error("bad point: ZERO");const{X:k,Y:O,Z:j,T:R}=w,U=l(k*k),V=l(O*O),F=l(j*j),$=l(F*F),K=l(U*E),H=l(F*l(K+V)),B=l($+l(C*l(U*V)));if(H!==B)throw new Error("bad point: equation left != right (1)");const A=l(k*O),I=l(j*R);if(A!==I)throw new Error("bad point: equation left != right (2)");return!0});class x{constructor(E,C,k,O){this.X=u("x",E),this.Y=u("y",C),this.Z=u("z",k,!0),this.T=u("t",O),Object.freeze(this)}static CURVE(){return s}static fromAffine(E){if(E instanceof x)throw new Error("extended point not allowed");const{x:C,y:k}=E||{};return u("x",C),u("y",k),new x(C,k,Pi,l(C*k))}static fromBytes(E,C=!1){const k=r.BYTES,{a:O,d:j}=s;E=VQ(xl(E,k,"point")),Sm(C,"zip215");const R=VQ(E),U=E[k-1];R[k-1]=U&-129;const V=Kw(R),F=C?a:r.ORDER;HD("point.y",V,mf,F);const $=l(V*V),K=l($-Pi),H=l(j*$-O);let{isValid:B,value:A}=c(K,H);if(!B)throw new Error("bad point: invalid y coordinate");const I=(A&Pi)===Pi,M=(U&128)!==0;if(!C&&A===mf&&M)throw new Error("bad point: x=0 and x_0=1");return M!==I&&(A=l(-A)),x.fromAffine({x:A,y:V})}static fromHex(E,C=!1){return x.fromBytes(qr("point",E),C)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(E=8,C=!0){return v.createCache(this,E),C||this.multiply(s3),this}assertValidity(){g(this)}equals(E){f(E);const{X:C,Y:k,Z:O}=this,{X:j,Y:R,Z:U}=E,V=l(C*U),F=l(j*O),$=l(k*U),K=l(R*O);return V===F&&$===K}is0(){return this.equals(x.ZERO)}negate(){return new x(l(-this.X),this.Y,this.Z,l(-this.T))}double(){const{a:E}=s,{X:C,Y:k,Z:O}=this,j=l(C*C),R=l(k*k),U=l(s3*l(O*O)),V=l(E*j),F=C+k,$=l(l(F*F)-j-R),K=V+R,H=K-U,B=V-R,A=l($*H),I=l(K*B),M=l($*B),z=l(H*K);return new x(A,I,z,M)}add(E){f(E);const{a:C,d:k}=s,{X:O,Y:j,Z:R,T:U}=this,{X:V,Y:F,Z:$,T:K}=E,H=l(O*V),B=l(j*F),A=l(U*k*K),I=l(R*$),M=l((O+j)*(V+F)-H-B),z=I-A,G=I+A,te=l(B-C*H),Y=l(M*z),q=l(G*te),D=l(M*te),_=l(z*G);return new x(Y,q,_,D)}subtract(E){return this.add(E.negate())}multiply(E){if(!i.isValidNot0(E))throw new Error("invalid scalar: expected 1 <= sc < curve.n");const{p:C,f:k}=v.cached(this,E,O=>Ap(x,O));return Ap(x,[C,k])[0]}multiplyUnsafe(E,C=x.ZERO){if(!i.isValid(E))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return E===mf?x.ZERO:this.is0()||E===Pi?this:v.unsafe(this,E,k=>Ap(x,k),C)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}isTorsionFree(){return v.unsafe(this,s.n).is0()}toAffine(E){return m(this,E)}clearCofactor(){return o===Pi?this:this.multiplyUnsafe(o)}toBytes(){const{x:E,y:C}=this.toAffine(),k=r.toBytes(C);return k[k.length-1]|=E&Pi?128:0,k}toHex(){return nm(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(E){return Ap(x,E)}static msm(E,C){return Hpe(x,i,E,C)}_setWindowSize(E){this.precompute(E)}toRawBytes(){return this.toBytes()}}x.BASE=new x(s.Gx,s.Gy,Pi,l(s.Gx*s.Gy)),x.ZERO=new x(mf,Pi,Pi,mf),x.Fp=r,x.Fn=i;const v=new zpe(x,i.BITS);return x.BASE.precompute(8),x}function Uct(t,e,n={}){if(typeof e!="function")throw new Error('"hash" function param is required');oE(n,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:r}=n,{BASE:i,Fp:s,Fn:o}=t,a=n.randomBytes||Nj,l=n.adjustScalarBytes||(F=>F),c=n.domain||((F,$,K)=>{if(Sm(K,"phflag"),$.length||K)throw new Error("Contexts/pre-hash are not supported");return F});function u(F){return o.create(Kw(F))}function f(F){const $=k.secretKey;F=qr("private key",F,$);const K=qr("hashed private key",e(F),2*$),H=l(K.slice(0,$)),B=K.slice($,2*$),A=u(H);return{head:H,prefix:B,scalar:A}}function m(F){const{head:$,prefix:K,scalar:H}=f(F),B=i.multiply(H),A=B.toBytes();return{head:$,prefix:K,scalar:H,point:B,pointBytes:A}}function g(F){return m(F).pointBytes}function x(F=Uint8Array.of(),...$){const K=pc(...$);return u(e(c(K,qr("context",F),!!r)))}function v(F,$,K={}){F=qr("message",F),r&&(F=r(F));const{prefix:H,scalar:B,pointBytes:A}=m($),I=x(K.context,H,F),M=i.multiply(I).toBytes(),z=x(K.context,M,A,F),G=o.create(I+z*B);if(!o.isValid(G))throw new Error("sign failed: invalid s");const te=pc(M,o.toBytes(G));return xl(te,k.signature,"result")}const w={zip215:!0};function E(F,$,K,H=w){const{context:B,zip215:A}=H,I=k.signature;F=qr("signature",F,I),$=qr("message",$),K=qr("publicKey",K,k.publicKey),A!==void 0&&Sm(A,"zip215"),r&&($=r($));const M=I/2,z=F.subarray(0,M),G=Kw(F.subarray(M,I));let te,Y,q;try{te=t.fromBytes(K,A),Y=t.fromBytes(z,A),q=i.multiplyUnsafe(G)}catch{return!1}if(!A&&te.isSmallOrder())return!1;const D=x(B,Y.toBytes(),te.toBytes(),$);return Y.add(te.multiplyUnsafe(D)).subtract(q).clearCofactor().is0()}const C=s.BYTES,k={secretKey:C,publicKey:C,signature:2*C,seed:C};function O(F=a(k.seed)){return xl(F,k.seed,"seed")}function j(F){const $=V.randomSecretKey(F);return{secretKey:$,publicKey:g($)}}function R(F){return iE(F)&&F.length===o.BYTES}function U(F,$){try{return!!t.fromBytes(F,$)}catch{return!1}}const V={getExtendedPublicKey:m,randomSecretKey:O,isValidSecretKey:R,isValidPublicKey:U,toMontgomery(F){const{y:$}=t.fromBytes(F),K=k.publicKey,H=K===32;if(!H&&K!==57)throw new Error("only defined for 25519 and 448");const B=H?s.div(Pi+$,Pi-$):s.div($-Pi,$+Pi);return s.toBytes(B)},toMontgomerySecret(F){const $=k.secretKey;xl(F,$);const K=e(F.subarray(0,$));return l(K).subarray(0,$)},randomPrivateKey:O,precompute(F=8,$=t.BASE){return $.precompute(F,!1)}};return Object.freeze({keygen:j,getPublicKey:g,sign:v,verify:E,utils:V,Point:t,lengths:k})}function Fct(t){const e={a:t.a,d:t.d,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,r=jm(e.n,t.nBitLength,!0),i={Fp:n,Fn:r,uvRatio:t.uvRatio},s={randomBytes:t.randomBytes,adjustScalarBytes:t.adjustScalarBytes,domain:t.domain,prehash:t.prehash,mapToCurve:t.mapToCurve};return{CURVE:e,curveOpts:i,hash:t.hash,eddsaOpts:s}}function $ct(t,e){const n=e.Point;return Object.assign({},e,{ExtendedPoint:n,CURVE:t,nBitLength:n.Fn.BITS,nByteLength:n.Fn.BYTES})}function zct(t){const{CURVE:e,curveOpts:n,hash:r,eddsaOpts:i}=Fct(t),s=jct(e,n),o=Uct(s,r,i);return $ct(t,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Hct=BigInt(1),JQ=BigInt(2);BigInt(3);const Vct=BigInt(5),qct=BigInt(8),Rj=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),qpe={p:Rj,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:qct,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function Gct(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),i=BigInt(80),s=Rj,a=t*t%s*t%s,l=$r(a,JQ,s)*a%s,c=$r(l,Hct,s)*t%s,u=$r(c,Vct,s)*c%s,f=$r(u,e,s)*u%s,m=$r(f,n,s)*f%s,g=$r(m,r,s)*m%s,x=$r(g,i,s)*g%s,v=$r(x,i,s)*g%s,w=$r(v,e,s)*u%s;return{pow_p_5_8:$r(w,JQ,s)*t%s,b2:a}}function Kct(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const XQ=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function Wct(t,e){const n=Rj,r=hi(e*e*e,n),i=hi(r*r*e,n),s=Gct(t*i).pow_p_5_8;let o=hi(t*r*s,n);const a=hi(e*o*o,n),l=o,c=hi(o*XQ,n),u=a===t,f=a===hi(-t,n),m=a===hi(-t*XQ,n);return u&&(o=l),(f||m)&&(o=c),Nct(o,n)&&(o=hi(-o,n)),{isValid:u||f,value:o}}const Yct=jm(qpe.p,{isLE:!0}),Jct={...qpe,Fp:Yct,hash:bct,adjustScalarBytes:Kct,uvRatio:Wct},ev=zct(Jct);var vT={exports:{}},o3={},QQ;function Oj(){return QQ||(QQ=1,(function(t){Object.defineProperties(t,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var e={},n={};n.byteLength=u,n.toByteArray=m,n.fromByteArray=v;for(var r=[],i=[],s=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,l=o.length;a<l;++a)r[a]=o[a],i[o.charCodeAt(a)]=a;i[45]=62,i[95]=63;function c(C){var k=C.length;if(k%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var O=C.indexOf("=");O===-1&&(O=k);var j=O===k?0:4-O%4;return[O,j]}function u(C){var k=c(C),O=k[0],j=k[1];return(O+j)*3/4-j}function f(C,k,O){return(k+O)*3/4-O}function m(C){var k,O=c(C),j=O[0],R=O[1],U=new s(f(C,j,R)),V=0,F=R>0?j-4:j,$;for($=0;$<F;$+=4)k=i[C.charCodeAt($)]<<18|i[C.charCodeAt($+1)]<<12|i[C.charCodeAt($+2)]<<6|i[C.charCodeAt($+3)],U[V++]=k>>16&255,U[V++]=k>>8&255,U[V++]=k&255;return R===2&&(k=i[C.charCodeAt($)]<<2|i[C.charCodeAt($+1)]>>4,U[V++]=k&255),R===1&&(k=i[C.charCodeAt($)]<<10|i[C.charCodeAt($+1)]<<4|i[C.charCodeAt($+2)]>>2,U[V++]=k>>8&255,U[V++]=k&255),U}function g(C){return r[C>>18&63]+r[C>>12&63]+r[C>>6&63]+r[C&63]}function x(C,k,O){for(var j,R=[],U=k;U<O;U+=3)j=(C[U]<<16&16711680)+(C[U+1]<<8&65280)+(C[U+2]&255),R.push(g(j));return R.join("")}function v(C){for(var k,O=C.length,j=O%3,R=[],U=16383,V=0,F=O-j;V<F;V+=U)R.push(x(C,V,V+U>F?F:V+U));return j===1?(k=C[O-1],R.push(r[k>>2]+r[k<<4&63]+"==")):j===2&&(k=(C[O-2]<<8)+C[O-1],R.push(r[k>>10]+r[k>>4&63]+r[k<<2&63]+"=")),R.join("")}var w={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */w.read=function(C,k,O,j,R){var U,V,F=R*8-j-1,$=(1<<F)-1,K=$>>1,H=-7,B=O?R-1:0,A=O?-1:1,I=C[k+B];for(B+=A,U=I&(1<<-H)-1,I>>=-H,H+=F;H>0;U=U*256+C[k+B],B+=A,H-=8);for(V=U&(1<<-H)-1,U>>=-H,H+=j;H>0;V=V*256+C[k+B],B+=A,H-=8);if(U===0)U=1-K;else{if(U===$)return V?NaN:(I?-1:1)*(1/0);V=V+Math.pow(2,j),U=U-K}return(I?-1:1)*V*Math.pow(2,U-j)},w.write=function(C,k,O,j,R,U){var V,F,$,K=U*8-R-1,H=(1<<K)-1,B=H>>1,A=R===23?Math.pow(2,-24)-Math.pow(2,-77):0,I=j?0:U-1,M=j?1:-1,z=k<0||k===0&&1/k<0?1:0;for(k=Math.abs(k),isNaN(k)||k===1/0?(F=isNaN(k)?1:0,V=H):(V=Math.floor(Math.log(k)/Math.LN2),k*($=Math.pow(2,-V))<1&&(V--,$*=2),V+B>=1?k+=A/$:k+=A*Math.pow(2,1-B),k*$>=2&&(V++,$/=2),V+B>=H?(F=0,V=H):V+B>=1?(F=(k*$-1)*Math.pow(2,R),V=V+B):(F=k*Math.pow(2,B-1)*Math.pow(2,R),V=0));R>=8;C[O+I]=F&255,I+=M,F/=256,R-=8);for(V=V<<R|F,K+=R;K>0;C[O+I]=V&255,I+=M,V/=256,K-=8);C[O+I-M]|=z*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(C){const k=n,O=w,j=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;C.Buffer=H,C.SlowBuffer=_,C.INSPECT_MAX_BYTES=50;const R=2147483647;C.kMaxLength=R;const{Uint8Array:U,ArrayBuffer:V,SharedArrayBuffer:F}=globalThis;H.TYPED_ARRAY_SUPPORT=$(),!H.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function $(){try{const le=new U(1),Q={foo:function(){return 42}};return Object.setPrototypeOf(Q,U.prototype),Object.setPrototypeOf(le,Q),le.foo()===42}catch{return!1}}Object.defineProperty(H.prototype,"parent",{enumerable:!0,get:function(){if(H.isBuffer(this))return this.buffer}}),Object.defineProperty(H.prototype,"offset",{enumerable:!0,get:function(){if(H.isBuffer(this))return this.byteOffset}});function K(le){if(le>R)throw new RangeError('The value "'+le+'" is invalid for option "size"');const Q=new U(le);return Object.setPrototypeOf(Q,H.prototype),Q}function H(le,Q,ee){if(typeof le=="number"){if(typeof Q=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return M(le)}return B(le,Q,ee)}H.poolSize=8192;function B(le,Q,ee){if(typeof le=="string")return z(le,Q);if(V.isView(le))return te(le);if(le==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof le);if(sn(le,V)||le&&sn(le.buffer,V)||typeof F<"u"&&(sn(le,F)||le&&sn(le.buffer,F)))return Y(le,Q,ee);if(typeof le=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const pe=le.valueOf&&le.valueOf();if(pe!=null&&pe!==le)return H.from(pe,Q,ee);const Te=q(le);if(Te)return Te;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof le[Symbol.toPrimitive]=="function")return H.from(le[Symbol.toPrimitive]("string"),Q,ee);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof le)}H.from=function(le,Q,ee){return B(le,Q,ee)},Object.setPrototypeOf(H.prototype,U.prototype),Object.setPrototypeOf(H,U);function A(le){if(typeof le!="number")throw new TypeError('"size" argument must be of type number');if(le<0)throw new RangeError('The value "'+le+'" is invalid for option "size"')}function I(le,Q,ee){return A(le),le<=0?K(le):Q!==void 0?typeof ee=="string"?K(le).fill(Q,ee):K(le).fill(Q):K(le)}H.alloc=function(le,Q,ee){return I(le,Q,ee)};function M(le){return A(le),K(le<0?0:D(le)|0)}H.allocUnsafe=function(le){return M(le)},H.allocUnsafeSlow=function(le){return M(le)};function z(le,Q){if((typeof Q!="string"||Q==="")&&(Q="utf8"),!H.isEncoding(Q))throw new TypeError("Unknown encoding: "+Q);const ee=W(le,Q)|0;let pe=K(ee);const Te=pe.write(le,Q);return Te!==ee&&(pe=pe.slice(0,Te)),pe}function G(le){const Q=le.length<0?0:D(le.length)|0,ee=K(Q);for(let pe=0;pe<Q;pe+=1)ee[pe]=le[pe]&255;return ee}function te(le){if(sn(le,U)){const Q=new U(le);return Y(Q.buffer,Q.byteOffset,Q.byteLength)}return G(le)}function Y(le,Q,ee){if(Q<0||le.byteLength<Q)throw new RangeError('"offset" is outside of buffer bounds');if(le.byteLength<Q+(ee||0))throw new RangeError('"length" is outside of buffer bounds');let pe;return Q===void 0&&ee===void 0?pe=new U(le):ee===void 0?pe=new U(le,Q):pe=new U(le,Q,ee),Object.setPrototypeOf(pe,H.prototype),pe}function q(le){if(H.isBuffer(le)){const Q=D(le.length)|0,ee=K(Q);return ee.length===0||le.copy(ee,0,0,Q),ee}if(le.length!==void 0)return typeof le.length!="number"||en(le.length)?K(0):G(le);if(le.type==="Buffer"&&Array.isArray(le.data))return G(le.data)}function D(le){if(le>=R)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+R.toString(16)+" bytes");return le|0}function _(le){return+le!=le&&(le=0),H.alloc(+le)}H.isBuffer=function(Q){return Q!=null&&Q._isBuffer===!0&&Q!==H.prototype},H.compare=function(Q,ee){if(sn(Q,U)&&(Q=H.from(Q,Q.offset,Q.byteLength)),sn(ee,U)&&(ee=H.from(ee,ee.offset,ee.byteLength)),!H.isBuffer(Q)||!H.isBuffer(ee))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(Q===ee)return 0;let pe=Q.length,Te=ee.length;for(let Re=0,$e=Math.min(pe,Te);Re<$e;++Re)if(Q[Re]!==ee[Re]){pe=Q[Re],Te=ee[Re];break}return pe<Te?-1:Te<pe?1:0},H.isEncoding=function(Q){switch(String(Q).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},H.concat=function(Q,ee){if(!Array.isArray(Q))throw new TypeError('"list" argument must be an Array of Buffers');if(Q.length===0)return H.alloc(0);let pe;if(ee===void 0)for(ee=0,pe=0;pe<Q.length;++pe)ee+=Q[pe].length;const Te=H.allocUnsafe(ee);let Re=0;for(pe=0;pe<Q.length;++pe){let $e=Q[pe];if(sn($e,U))Re+$e.length>Te.length?(H.isBuffer($e)||($e=H.from($e)),$e.copy(Te,Re)):U.prototype.set.call(Te,$e,Re);else if(H.isBuffer($e))$e.copy(Te,Re);else throw new TypeError('"list" argument must be an Array of Buffers');Re+=$e.length}return Te};function W(le,Q){if(H.isBuffer(le))return le.length;if(V.isView(le)||sn(le,V))return le.byteLength;if(typeof le!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof le);const ee=le.length,pe=arguments.length>2&&arguments[2]===!0;if(!pe&&ee===0)return 0;let Te=!1;for(;;)switch(Q){case"ascii":case"latin1":case"binary":return ee;case"utf8":case"utf-8":return et(le).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ee*2;case"hex":return ee>>>1;case"base64":return xt(le).length;default:if(Te)return pe?-1:et(le).length;Q=(""+Q).toLowerCase(),Te=!0}}H.byteLength=W;function X(le,Q,ee){let pe=!1;if((Q===void 0||Q<0)&&(Q=0),Q>this.length||((ee===void 0||ee>this.length)&&(ee=this.length),ee<=0)||(ee>>>=0,Q>>>=0,ee<=Q))return"";for(le||(le="utf8");;)switch(le){case"hex":return st(this,Q,ee);case"utf8":case"utf-8":return ze(this,Q,ee);case"ascii":return We(this,Q,ee);case"latin1":case"binary":return St(this,Q,ee);case"base64":return Ne(this,Q,ee);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Bt(this,Q,ee);default:if(pe)throw new TypeError("Unknown encoding: "+le);le=(le+"").toLowerCase(),pe=!0}}H.prototype._isBuffer=!0;function re(le,Q,ee){const pe=le[Q];le[Q]=le[ee],le[ee]=pe}H.prototype.swap16=function(){const Q=this.length;if(Q%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let ee=0;ee<Q;ee+=2)re(this,ee,ee+1);return this},H.prototype.swap32=function(){const Q=this.length;if(Q%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let ee=0;ee<Q;ee+=4)re(this,ee,ee+3),re(this,ee+1,ee+2);return this},H.prototype.swap64=function(){const Q=this.length;if(Q%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let ee=0;ee<Q;ee+=8)re(this,ee,ee+7),re(this,ee+1,ee+6),re(this,ee+2,ee+5),re(this,ee+3,ee+4);return this},H.prototype.toString=function(){const Q=this.length;return Q===0?"":arguments.length===0?ze(this,0,Q):X.apply(this,arguments)},H.prototype.toLocaleString=H.prototype.toString,H.prototype.equals=function(Q){if(!H.isBuffer(Q))throw new TypeError("Argument must be a Buffer");return this===Q?!0:H.compare(this,Q)===0},H.prototype.inspect=function(){let Q="";const ee=C.INSPECT_MAX_BYTES;return Q=this.toString("hex",0,ee).replace(/(.{2})/g,"$1 ").trim(),this.length>ee&&(Q+=" ... "),"<Buffer "+Q+">"},j&&(H.prototype[j]=H.prototype.inspect),H.prototype.compare=function(Q,ee,pe,Te,Re){if(sn(Q,U)&&(Q=H.from(Q,Q.offset,Q.byteLength)),!H.isBuffer(Q))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof Q);if(ee===void 0&&(ee=0),pe===void 0&&(pe=Q?Q.length:0),Te===void 0&&(Te=0),Re===void 0&&(Re=this.length),ee<0||pe>Q.length||Te<0||Re>this.length)throw new RangeError("out of range index");if(Te>=Re&&ee>=pe)return 0;if(Te>=Re)return-1;if(ee>=pe)return 1;if(ee>>>=0,pe>>>=0,Te>>>=0,Re>>>=0,this===Q)return 0;let $e=Re-Te,Jt=pe-ee;const Kt=Math.min($e,Jt),Vt=this.slice(Te,Re),gn=Q.slice(ee,pe);for(let mt=0;mt<Kt;++mt)if(Vt[mt]!==gn[mt]){$e=Vt[mt],Jt=gn[mt];break}return $e<Jt?-1:Jt<$e?1:0};function ae(le,Q,ee,pe,Te){if(le.length===0)return-1;if(typeof ee=="string"?(pe=ee,ee=0):ee>2147483647?ee=2147483647:ee<-2147483648&&(ee=-2147483648),ee=+ee,en(ee)&&(ee=Te?0:le.length-1),ee<0&&(ee=le.length+ee),ee>=le.length){if(Te)return-1;ee=le.length-1}else if(ee<0)if(Te)ee=0;else return-1;if(typeof Q=="string"&&(Q=H.from(Q,pe)),H.isBuffer(Q))return Q.length===0?-1:Ee(le,Q,ee,pe,Te);if(typeof Q=="number")return Q=Q&255,typeof U.prototype.indexOf=="function"?Te?U.prototype.indexOf.call(le,Q,ee):U.prototype.lastIndexOf.call(le,Q,ee):Ee(le,[Q],ee,pe,Te);throw new TypeError("val must be string, number or Buffer")}function Ee(le,Q,ee,pe,Te){let Re=1,$e=le.length,Jt=Q.length;if(pe!==void 0&&(pe=String(pe).toLowerCase(),pe==="ucs2"||pe==="ucs-2"||pe==="utf16le"||pe==="utf-16le")){if(le.length<2||Q.length<2)return-1;Re=2,$e/=2,Jt/=2,ee/=2}function Kt(gn,mt){return Re===1?gn[mt]:gn.readUInt16BE(mt*Re)}let Vt;if(Te){let gn=-1;for(Vt=ee;Vt<$e;Vt++)if(Kt(le,Vt)===Kt(Q,gn===-1?0:Vt-gn)){if(gn===-1&&(gn=Vt),Vt-gn+1===Jt)return gn*Re}else gn!==-1&&(Vt-=Vt-gn),gn=-1}else for(ee+Jt>$e&&(ee=$e-Jt),Vt=ee;Vt>=0;Vt--){let gn=!0;for(let mt=0;mt<Jt;mt++)if(Kt(le,Vt+mt)!==Kt(Q,mt)){gn=!1;break}if(gn)return Vt}return-1}H.prototype.includes=function(Q,ee,pe){return this.indexOf(Q,ee,pe)!==-1},H.prototype.indexOf=function(Q,ee,pe){return ae(this,Q,ee,pe,!0)},H.prototype.lastIndexOf=function(Q,ee,pe){return ae(this,Q,ee,pe,!1)};function ue(le,Q,ee,pe){ee=Number(ee)||0;const Te=le.length-ee;pe?(pe=Number(pe),pe>Te&&(pe=Te)):pe=Te;const Re=Q.length;pe>Re/2&&(pe=Re/2);let $e;for($e=0;$e<pe;++$e){const Jt=parseInt(Q.substr($e*2,2),16);if(en(Jt))return $e;le[ee+$e]=Jt}return $e}function me(le,Q,ee,pe){return Rt(et(Q,le.length-ee),le,ee,pe)}function ce(le,Q,ee,pe){return Rt(it(Q),le,ee,pe)}function oe(le,Q,ee,pe){return Rt(xt(Q),le,ee,pe)}function ke(le,Q,ee,pe){return Rt(Ft(Q,le.length-ee),le,ee,pe)}H.prototype.write=function(Q,ee,pe,Te){if(ee===void 0)Te="utf8",pe=this.length,ee=0;else if(pe===void 0&&typeof ee=="string")Te=ee,pe=this.length,ee=0;else if(isFinite(ee))ee=ee>>>0,isFinite(pe)?(pe=pe>>>0,Te===void 0&&(Te="utf8")):(Te=pe,pe=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Re=this.length-ee;if((pe===void 0||pe>Re)&&(pe=Re),Q.length>0&&(pe<0||ee<0)||ee>this.length)throw new RangeError("Attempt to write outside buffer bounds");Te||(Te="utf8");let $e=!1;for(;;)switch(Te){case"hex":return ue(this,Q,ee,pe);case"utf8":case"utf-8":return me(this,Q,ee,pe);case"ascii":case"latin1":case"binary":return ce(this,Q,ee,pe);case"base64":return oe(this,Q,ee,pe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ke(this,Q,ee,pe);default:if($e)throw new TypeError("Unknown encoding: "+Te);Te=(""+Te).toLowerCase(),$e=!0}},H.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Ne(le,Q,ee){return Q===0&&ee===le.length?k.fromByteArray(le):k.fromByteArray(le.slice(Q,ee))}function ze(le,Q,ee){ee=Math.min(le.length,ee);const pe=[];let Te=Q;for(;Te<ee;){const Re=le[Te];let $e=null,Jt=Re>239?4:Re>223?3:Re>191?2:1;if(Te+Jt<=ee){let Kt,Vt,gn,mt;switch(Jt){case 1:Re<128&&($e=Re);break;case 2:Kt=le[Te+1],(Kt&192)===128&&(mt=(Re&31)<<6|Kt&63,mt>127&&($e=mt));break;case 3:Kt=le[Te+1],Vt=le[Te+2],(Kt&192)===128&&(Vt&192)===128&&(mt=(Re&15)<<12|(Kt&63)<<6|Vt&63,mt>2047&&(mt<55296||mt>57343)&&($e=mt));break;case 4:Kt=le[Te+1],Vt=le[Te+2],gn=le[Te+3],(Kt&192)===128&&(Vt&192)===128&&(gn&192)===128&&(mt=(Re&15)<<18|(Kt&63)<<12|(Vt&63)<<6|gn&63,mt>65535&&mt<1114112&&($e=mt))}}$e===null?($e=65533,Jt=1):$e>65535&&($e-=65536,pe.push($e>>>10&1023|55296),$e=56320|$e&1023),pe.push($e),Te+=Jt}return Ye(pe)}const Ze=4096;function Ye(le){const Q=le.length;if(Q<=Ze)return String.fromCharCode.apply(String,le);let ee="",pe=0;for(;pe<Q;)ee+=String.fromCharCode.apply(String,le.slice(pe,pe+=Ze));return ee}function We(le,Q,ee){let pe="";ee=Math.min(le.length,ee);for(let Te=Q;Te<ee;++Te)pe+=String.fromCharCode(le[Te]&127);return pe}function St(le,Q,ee){let pe="";ee=Math.min(le.length,ee);for(let Te=Q;Te<ee;++Te)pe+=String.fromCharCode(le[Te]);return pe}function st(le,Q,ee){const pe=le.length;(!Q||Q<0)&&(Q=0),(!ee||ee<0||ee>pe)&&(ee=pe);let Te="";for(let Re=Q;Re<ee;++Re)Te+=on[le[Re]];return Te}function Bt(le,Q,ee){const pe=le.slice(Q,ee);let Te="";for(let Re=0;Re<pe.length-1;Re+=2)Te+=String.fromCharCode(pe[Re]+pe[Re+1]*256);return Te}H.prototype.slice=function(Q,ee){const pe=this.length;Q=~~Q,ee=ee===void 0?pe:~~ee,Q<0?(Q+=pe,Q<0&&(Q=0)):Q>pe&&(Q=pe),ee<0?(ee+=pe,ee<0&&(ee=0)):ee>pe&&(ee=pe),ee<Q&&(ee=Q);const Te=this.subarray(Q,ee);return Object.setPrototypeOf(Te,H.prototype),Te};function Zt(le,Q,ee){if(le%1!==0||le<0)throw new RangeError("offset is not uint");if(le+Q>ee)throw new RangeError("Trying to access beyond buffer length")}H.prototype.readUintLE=H.prototype.readUIntLE=function(Q,ee,pe){Q=Q>>>0,ee=ee>>>0,pe||Zt(Q,ee,this.length);let Te=this[Q],Re=1,$e=0;for(;++$e<ee&&(Re*=256);)Te+=this[Q+$e]*Re;return Te},H.prototype.readUintBE=H.prototype.readUIntBE=function(Q,ee,pe){Q=Q>>>0,ee=ee>>>0,pe||Zt(Q,ee,this.length);let Te=this[Q+--ee],Re=1;for(;ee>0&&(Re*=256);)Te+=this[Q+--ee]*Re;return Te},H.prototype.readUint8=H.prototype.readUInt8=function(Q,ee){return Q=Q>>>0,ee||Zt(Q,1,this.length),this[Q]},H.prototype.readUint16LE=H.prototype.readUInt16LE=function(Q,ee){return Q=Q>>>0,ee||Zt(Q,2,this.length),this[Q]|this[Q+1]<<8},H.prototype.readUint16BE=H.prototype.readUInt16BE=function(Q,ee){return Q=Q>>>0,ee||Zt(Q,2,this.length),this[Q]<<8|this[Q+1]},H.prototype.readUint32LE=H.prototype.readUInt32LE=function(Q,ee){return Q=Q>>>0,ee||Zt(Q,4,this.length),(this[Q]|this[Q+1]<<8|this[Q+2]<<16)+this[Q+3]*16777216},H.prototype.readUint32BE=H.prototype.readUInt32BE=function(Q,ee){return Q=Q>>>0,ee||Zt(Q,4,this.length),this[Q]*16777216+(this[Q+1]<<16|this[Q+2]<<8|this[Q+3])},H.prototype.readBigUInt64LE=Hi(function(Q){Q=Q>>>0,be(Q,"offset");const ee=this[Q],pe=this[Q+7];(ee===void 0||pe===void 0)&&he(Q,this.length-8);const Te=ee+this[++Q]*2**8+this[++Q]*2**16+this[++Q]*2**24,Re=this[++Q]+this[++Q]*2**8+this[++Q]*2**16+pe*2**24;return BigInt(Te)+(BigInt(Re)<<BigInt(32))}),H.prototype.readBigUInt64BE=Hi(function(Q){Q=Q>>>0,be(Q,"offset");const ee=this[Q],pe=this[Q+7];(ee===void 0||pe===void 0)&&he(Q,this.length-8);const Te=ee*2**24+this[++Q]*2**16+this[++Q]*2**8+this[++Q],Re=this[++Q]*2**24+this[++Q]*2**16+this[++Q]*2**8+pe;return(BigInt(Te)<<BigInt(32))+BigInt(Re)}),H.prototype.readIntLE=function(Q,ee,pe){Q=Q>>>0,ee=ee>>>0,pe||Zt(Q,ee,this.length);let Te=this[Q],Re=1,$e=0;for(;++$e<ee&&(Re*=256);)Te+=this[Q+$e]*Re;return Re*=128,Te>=Re&&(Te-=Math.pow(2,8*ee)),Te},H.prototype.readIntBE=function(Q,ee,pe){Q=Q>>>0,ee=ee>>>0,pe||Zt(Q,ee,this.length);let Te=ee,Re=1,$e=this[Q+--Te];for(;Te>0&&(Re*=256);)$e+=this[Q+--Te]*Re;return Re*=128,$e>=Re&&($e-=Math.pow(2,8*ee)),$e},H.prototype.readInt8=function(Q,ee){return Q=Q>>>0,ee||Zt(Q,1,this.length),this[Q]&128?(255-this[Q]+1)*-1:this[Q]},H.prototype.readInt16LE=function(Q,ee){Q=Q>>>0,ee||Zt(Q,2,this.length);const pe=this[Q]|this[Q+1]<<8;return pe&32768?pe|4294901760:pe},H.prototype.readInt16BE=function(Q,ee){Q=Q>>>0,ee||Zt(Q,2,this.length);const pe=this[Q+1]|this[Q]<<8;return pe&32768?pe|4294901760:pe},H.prototype.readInt32LE=function(Q,ee){return Q=Q>>>0,ee||Zt(Q,4,this.length),this[Q]|this[Q+1]<<8|this[Q+2]<<16|this[Q+3]<<24},H.prototype.readInt32BE=function(Q,ee){return Q=Q>>>0,ee||Zt(Q,4,this.length),this[Q]<<24|this[Q+1]<<16|this[Q+2]<<8|this[Q+3]},H.prototype.readBigInt64LE=Hi(function(Q){Q=Q>>>0,be(Q,"offset");const ee=this[Q],pe=this[Q+7];(ee===void 0||pe===void 0)&&he(Q,this.length-8);const Te=this[Q+4]+this[Q+5]*2**8+this[Q+6]*2**16+(pe<<24);return(BigInt(Te)<<BigInt(32))+BigInt(ee+this[++Q]*2**8+this[++Q]*2**16+this[++Q]*2**24)}),H.prototype.readBigInt64BE=Hi(function(Q){Q=Q>>>0,be(Q,"offset");const ee=this[Q],pe=this[Q+7];(ee===void 0||pe===void 0)&&he(Q,this.length-8);const Te=(ee<<24)+this[++Q]*2**16+this[++Q]*2**8+this[++Q];return(BigInt(Te)<<BigInt(32))+BigInt(this[++Q]*2**24+this[++Q]*2**16+this[++Q]*2**8+pe)}),H.prototype.readFloatLE=function(Q,ee){return Q=Q>>>0,ee||Zt(Q,4,this.length),O.read(this,Q,!0,23,4)},H.prototype.readFloatBE=function(Q,ee){return Q=Q>>>0,ee||Zt(Q,4,this.length),O.read(this,Q,!1,23,4)},H.prototype.readDoubleLE=function(Q,ee){return Q=Q>>>0,ee||Zt(Q,8,this.length),O.read(this,Q,!0,52,8)},H.prototype.readDoubleBE=function(Q,ee){return Q=Q>>>0,ee||Zt(Q,8,this.length),O.read(this,Q,!1,52,8)};function Ge(le,Q,ee,pe,Te,Re){if(!H.isBuffer(le))throw new TypeError('"buffer" argument must be a Buffer instance');if(Q>Te||Q<Re)throw new RangeError('"value" argument is out of bounds');if(ee+pe>le.length)throw new RangeError("Index out of range")}H.prototype.writeUintLE=H.prototype.writeUIntLE=function(Q,ee,pe,Te){if(Q=+Q,ee=ee>>>0,pe=pe>>>0,!Te){const Jt=Math.pow(2,8*pe)-1;Ge(this,Q,ee,pe,Jt,0)}let Re=1,$e=0;for(this[ee]=Q&255;++$e<pe&&(Re*=256);)this[ee+$e]=Q/Re&255;return ee+pe},H.prototype.writeUintBE=H.prototype.writeUIntBE=function(Q,ee,pe,Te){if(Q=+Q,ee=ee>>>0,pe=pe>>>0,!Te){const Jt=Math.pow(2,8*pe)-1;Ge(this,Q,ee,pe,Jt,0)}let Re=pe-1,$e=1;for(this[ee+Re]=Q&255;--Re>=0&&($e*=256);)this[ee+Re]=Q/$e&255;return ee+pe},H.prototype.writeUint8=H.prototype.writeUInt8=function(Q,ee,pe){return Q=+Q,ee=ee>>>0,pe||Ge(this,Q,ee,1,255,0),this[ee]=Q&255,ee+1},H.prototype.writeUint16LE=H.prototype.writeUInt16LE=function(Q,ee,pe){return Q=+Q,ee=ee>>>0,pe||Ge(this,Q,ee,2,65535,0),this[ee]=Q&255,this[ee+1]=Q>>>8,ee+2},H.prototype.writeUint16BE=H.prototype.writeUInt16BE=function(Q,ee,pe){return Q=+Q,ee=ee>>>0,pe||Ge(this,Q,ee,2,65535,0),this[ee]=Q>>>8,this[ee+1]=Q&255,ee+2},H.prototype.writeUint32LE=H.prototype.writeUInt32LE=function(Q,ee,pe){return Q=+Q,ee=ee>>>0,pe||Ge(this,Q,ee,4,4294967295,0),this[ee+3]=Q>>>24,this[ee+2]=Q>>>16,this[ee+1]=Q>>>8,this[ee]=Q&255,ee+4},H.prototype.writeUint32BE=H.prototype.writeUInt32BE=function(Q,ee,pe){return Q=+Q,ee=ee>>>0,pe||Ge(this,Q,ee,4,4294967295,0),this[ee]=Q>>>24,this[ee+1]=Q>>>16,this[ee+2]=Q>>>8,this[ee+3]=Q&255,ee+4};function At(le,Q,ee,pe,Te){fe(Q,pe,Te,le,ee,7);let Re=Number(Q&BigInt(4294967295));le[ee++]=Re,Re=Re>>8,le[ee++]=Re,Re=Re>>8,le[ee++]=Re,Re=Re>>8,le[ee++]=Re;let $e=Number(Q>>BigInt(32)&BigInt(4294967295));return le[ee++]=$e,$e=$e>>8,le[ee++]=$e,$e=$e>>8,le[ee++]=$e,$e=$e>>8,le[ee++]=$e,ee}function un(le,Q,ee,pe,Te){fe(Q,pe,Te,le,ee,7);let Re=Number(Q&BigInt(4294967295));le[ee+7]=Re,Re=Re>>8,le[ee+6]=Re,Re=Re>>8,le[ee+5]=Re,Re=Re>>8,le[ee+4]=Re;let $e=Number(Q>>BigInt(32)&BigInt(4294967295));return le[ee+3]=$e,$e=$e>>8,le[ee+2]=$e,$e=$e>>8,le[ee+1]=$e,$e=$e>>8,le[ee]=$e,ee+8}H.prototype.writeBigUInt64LE=Hi(function(Q,ee=0){return At(this,Q,ee,BigInt(0),BigInt("0xffffffffffffffff"))}),H.prototype.writeBigUInt64BE=Hi(function(Q,ee=0){return un(this,Q,ee,BigInt(0),BigInt("0xffffffffffffffff"))}),H.prototype.writeIntLE=function(Q,ee,pe,Te){if(Q=+Q,ee=ee>>>0,!Te){const Kt=Math.pow(2,8*pe-1);Ge(this,Q,ee,pe,Kt-1,-Kt)}let Re=0,$e=1,Jt=0;for(this[ee]=Q&255;++Re<pe&&($e*=256);)Q<0&&Jt===0&&this[ee+Re-1]!==0&&(Jt=1),this[ee+Re]=(Q/$e>>0)-Jt&255;return ee+pe},H.prototype.writeIntBE=function(Q,ee,pe,Te){if(Q=+Q,ee=ee>>>0,!Te){const Kt=Math.pow(2,8*pe-1);Ge(this,Q,ee,pe,Kt-1,-Kt)}let Re=pe-1,$e=1,Jt=0;for(this[ee+Re]=Q&255;--Re>=0&&($e*=256);)Q<0&&Jt===0&&this[ee+Re+1]!==0&&(Jt=1),this[ee+Re]=(Q/$e>>0)-Jt&255;return ee+pe},H.prototype.writeInt8=function(Q,ee,pe){return Q=+Q,ee=ee>>>0,pe||Ge(this,Q,ee,1,127,-128),Q<0&&(Q=255+Q+1),this[ee]=Q&255,ee+1},H.prototype.writeInt16LE=function(Q,ee,pe){return Q=+Q,ee=ee>>>0,pe||Ge(this,Q,ee,2,32767,-32768),this[ee]=Q&255,this[ee+1]=Q>>>8,ee+2},H.prototype.writeInt16BE=function(Q,ee,pe){return Q=+Q,ee=ee>>>0,pe||Ge(this,Q,ee,2,32767,-32768),this[ee]=Q>>>8,this[ee+1]=Q&255,ee+2},H.prototype.writeInt32LE=function(Q,ee,pe){return Q=+Q,ee=ee>>>0,pe||Ge(this,Q,ee,4,2147483647,-2147483648),this[ee]=Q&255,this[ee+1]=Q>>>8,this[ee+2]=Q>>>16,this[ee+3]=Q>>>24,ee+4},H.prototype.writeInt32BE=function(Q,ee,pe){return Q=+Q,ee=ee>>>0,pe||Ge(this,Q,ee,4,2147483647,-2147483648),Q<0&&(Q=4294967295+Q+1),this[ee]=Q>>>24,this[ee+1]=Q>>>16,this[ee+2]=Q>>>8,this[ee+3]=Q&255,ee+4},H.prototype.writeBigInt64LE=Hi(function(Q,ee=0){return At(this,Q,ee,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),H.prototype.writeBigInt64BE=Hi(function(Q,ee=0){return un(this,Q,ee,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Pe(le,Q,ee,pe,Te,Re){if(ee+pe>le.length)throw new RangeError("Index out of range");if(ee<0)throw new RangeError("Index out of range")}function Ve(le,Q,ee,pe,Te){return Q=+Q,ee=ee>>>0,Te||Pe(le,Q,ee,4),O.write(le,Q,ee,pe,23,4),ee+4}H.prototype.writeFloatLE=function(Q,ee,pe){return Ve(this,Q,ee,!0,pe)},H.prototype.writeFloatBE=function(Q,ee,pe){return Ve(this,Q,ee,!1,pe)};function ft(le,Q,ee,pe,Te){return Q=+Q,ee=ee>>>0,Te||Pe(le,Q,ee,8),O.write(le,Q,ee,pe,52,8),ee+8}H.prototype.writeDoubleLE=function(Q,ee,pe){return ft(this,Q,ee,!0,pe)},H.prototype.writeDoubleBE=function(Q,ee,pe){return ft(this,Q,ee,!1,pe)},H.prototype.copy=function(Q,ee,pe,Te){if(!H.isBuffer(Q))throw new TypeError("argument should be a Buffer");if(pe||(pe=0),!Te&&Te!==0&&(Te=this.length),ee>=Q.length&&(ee=Q.length),ee||(ee=0),Te>0&&Te<pe&&(Te=pe),Te===pe||Q.length===0||this.length===0)return 0;if(ee<0)throw new RangeError("targetStart out of bounds");if(pe<0||pe>=this.length)throw new RangeError("Index out of range");if(Te<0)throw new RangeError("sourceEnd out of bounds");Te>this.length&&(Te=this.length),Q.length-ee<Te-pe&&(Te=Q.length-ee+pe);const Re=Te-pe;return this===Q&&typeof U.prototype.copyWithin=="function"?this.copyWithin(ee,pe,Te):U.prototype.set.call(Q,this.subarray(pe,Te),ee),Re},H.prototype.fill=function(Q,ee,pe,Te){if(typeof Q=="string"){if(typeof ee=="string"?(Te=ee,ee=0,pe=this.length):typeof pe=="string"&&(Te=pe,pe=this.length),Te!==void 0&&typeof Te!="string")throw new TypeError("encoding must be a string");if(typeof Te=="string"&&!H.isEncoding(Te))throw new TypeError("Unknown encoding: "+Te);if(Q.length===1){const $e=Q.charCodeAt(0);(Te==="utf8"&&$e<128||Te==="latin1")&&(Q=$e)}}else typeof Q=="number"?Q=Q&255:typeof Q=="boolean"&&(Q=Number(Q));if(ee<0||this.length<ee||this.length<pe)throw new RangeError("Out of range index");if(pe<=ee)return this;ee=ee>>>0,pe=pe===void 0?this.length:pe>>>0,Q||(Q=0);let Re;if(typeof Q=="number")for(Re=ee;Re<pe;++Re)this[Re]=Q;else{const $e=H.isBuffer(Q)?Q:H.from(Q,Te),Jt=$e.length;if(Jt===0)throw new TypeError('The value "'+Q+'" is invalid for argument "value"');for(Re=0;Re<pe-ee;++Re)this[Re+ee]=$e[Re%Jt]}return this};const lt={};function se(le,Q,ee){lt[le]=class extends ee{constructor(){super(),Object.defineProperty(this,"message",{value:Q.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${le}]`,this.stack,delete this.name}get code(){return le}set code(Te){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Te,writable:!0})}toString(){return`${this.name} [${le}]: ${this.message}`}}}se("ERR_BUFFER_OUT_OF_BOUNDS",function(le){return le?`${le} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),se("ERR_INVALID_ARG_TYPE",function(le,Q){return`The "${le}" argument must be of type number. Received type ${typeof Q}`},TypeError),se("ERR_OUT_OF_RANGE",function(le,Q,ee){let pe=`The value of "${le}" is out of range.`,Te=ee;return Number.isInteger(ee)&&Math.abs(ee)>2**32?Te=J(String(ee)):typeof ee=="bigint"&&(Te=String(ee),(ee>BigInt(2)**BigInt(32)||ee<-(BigInt(2)**BigInt(32)))&&(Te=J(Te)),Te+="n"),pe+=` It must be ${Q}. Received ${Te}`,pe},RangeError);function J(le){let Q="",ee=le.length;const pe=le[0]==="-"?1:0;for(;ee>=pe+4;ee-=3)Q=`_${le.slice(ee-3,ee)}${Q}`;return`${le.slice(0,ee)}${Q}`}function Z(le,Q,ee){be(Q,"offset"),(le[Q]===void 0||le[Q+ee]===void 0)&&he(Q,le.length-(ee+1))}function fe(le,Q,ee,pe,Te,Re){if(le>ee||le<Q){const $e=typeof Q=="bigint"?"n":"";let Jt;throw Q===0||Q===BigInt(0)?Jt=`>= 0${$e} and < 2${$e} ** ${(Re+1)*8}${$e}`:Jt=`>= -(2${$e} ** ${(Re+1)*8-1}${$e}) and < 2 ** ${(Re+1)*8-1}${$e}`,new lt.ERR_OUT_OF_RANGE("value",Jt,le)}Z(pe,Te,Re)}function be(le,Q){if(typeof le!="number")throw new lt.ERR_INVALID_ARG_TYPE(Q,"number",le)}function he(le,Q,ee){throw Math.floor(le)!==le?(be(le,ee),new lt.ERR_OUT_OF_RANGE("offset","an integer",le)):Q<0?new lt.ERR_BUFFER_OUT_OF_BOUNDS:new lt.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${Q}`,le)}const ye=/[^+/0-9A-Za-z-_]/g;function Xe(le){if(le=le.split("=")[0],le=le.trim().replace(ye,""),le.length<2)return"";for(;le.length%4!==0;)le=le+"=";return le}function et(le,Q){Q=Q||1/0;let ee;const pe=le.length;let Te=null;const Re=[];for(let $e=0;$e<pe;++$e){if(ee=le.charCodeAt($e),ee>55295&&ee<57344){if(!Te){if(ee>56319){(Q-=3)>-1&&Re.push(239,191,189);continue}else if($e+1===pe){(Q-=3)>-1&&Re.push(239,191,189);continue}Te=ee;continue}if(ee<56320){(Q-=3)>-1&&Re.push(239,191,189),Te=ee;continue}ee=(Te-55296<<10|ee-56320)+65536}else Te&&(Q-=3)>-1&&Re.push(239,191,189);if(Te=null,ee<128){if((Q-=1)<0)break;Re.push(ee)}else if(ee<2048){if((Q-=2)<0)break;Re.push(ee>>6|192,ee&63|128)}else if(ee<65536){if((Q-=3)<0)break;Re.push(ee>>12|224,ee>>6&63|128,ee&63|128)}else if(ee<1114112){if((Q-=4)<0)break;Re.push(ee>>18|240,ee>>12&63|128,ee>>6&63|128,ee&63|128)}else throw new Error("Invalid code point")}return Re}function it(le){const Q=[];for(let ee=0;ee<le.length;++ee)Q.push(le.charCodeAt(ee)&255);return Q}function Ft(le,Q){let ee,pe,Te;const Re=[];for(let $e=0;$e<le.length&&!((Q-=2)<0);++$e)ee=le.charCodeAt($e),pe=ee>>8,Te=ee%256,Re.push(Te),Re.push(pe);return Re}function xt(le){return k.toByteArray(Xe(le))}function Rt(le,Q,ee,pe){let Te;for(Te=0;Te<pe&&!(Te+ee>=Q.length||Te>=le.length);++Te)Q[Te+ee]=le[Te];return Te}function sn(le,Q){return le instanceof Q||le!=null&&le.constructor!=null&&le.constructor.name!=null&&le.constructor.name===Q.name}function en(le){return le!==le}const on=(function(){const le="0123456789abcdef",Q=new Array(256);for(let ee=0;ee<16;++ee){const pe=ee*16;for(let Te=0;Te<16;++Te)Q[pe+Te]=le[ee]+le[Te]}return Q})();function Hi(le){return typeof BigInt>"u"?Vn:le}function Vn(){throw new Error("BigInt not supported")}})(e);const E=e.Buffer;t.Blob=e.Blob,t.BlobOptions=e.BlobOptions,t.Buffer=e.Buffer,t.File=e.File,t.FileOptions=e.FileOptions,t.INSPECT_MAX_BYTES=e.INSPECT_MAX_BYTES,t.SlowBuffer=e.SlowBuffer,t.TranscodeEncoding=e.TranscodeEncoding,t.atob=e.atob,t.btoa=e.btoa,t.constants=e.constants,t.default=E,t.isAscii=e.isAscii,t.isUtf8=e.isUtf8,t.kMaxLength=e.kMaxLength,t.kStringMaxLength=e.kStringMaxLength,t.resolveObjectURL=e.resolveObjectURL,t.transcode=e.transcode})(o3)),o3}var Xct=vT.exports,ZQ;function Gpe(){return ZQ||(ZQ=1,(function(t){(function(e,n){function r(B,A){if(!B)throw new Error(A||"Assertion failed")}function i(B,A){B.super_=A;var I=function(){};I.prototype=A.prototype,B.prototype=new I,B.prototype.constructor=B}function s(B,A,I){if(s.isBN(B))return B;this.negative=0,this.words=null,this.length=0,this.red=null,B!==null&&((A==="le"||A==="be")&&(I=A,A=10),this._init(B||0,A||10,I||"be"))}typeof e=="object"?e.exports=s:n.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=Oj().Buffer}catch{}s.isBN=function(A){return A instanceof s?!0:A!==null&&typeof A=="object"&&A.constructor.wordSize===s.wordSize&&Array.isArray(A.words)},s.max=function(A,I){return A.cmp(I)>0?A:I},s.min=function(A,I){return A.cmp(I)<0?A:I},s.prototype._init=function(A,I,M){if(typeof A=="number")return this._initNumber(A,I,M);if(typeof A=="object")return this._initArray(A,I,M);I==="hex"&&(I=16),r(I===(I|0)&&I>=2&&I<=36),A=A.toString().replace(/\s+/g,"");var z=0;A[0]==="-"&&(z++,this.negative=1),z<A.length&&(I===16?this._parseHex(A,z,M):(this._parseBase(A,I,z),M==="le"&&this._initArray(this.toArray(),I,M)))},s.prototype._initNumber=function(A,I,M){A<0&&(this.negative=1,A=-A),A<67108864?(this.words=[A&67108863],this.length=1):A<4503599627370496?(this.words=[A&67108863,A/67108864&67108863],this.length=2):(r(A<9007199254740992),this.words=[A&67108863,A/67108864&67108863,1],this.length=3),M==="le"&&this._initArray(this.toArray(),I,M)},s.prototype._initArray=function(A,I,M){if(r(typeof A.length=="number"),A.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(A.length/3),this.words=new Array(this.length);for(var z=0;z<this.length;z++)this.words[z]=0;var G,te,Y=0;if(M==="be")for(z=A.length-1,G=0;z>=0;z-=3)te=A[z]|A[z-1]<<8|A[z-2]<<16,this.words[G]|=te<<Y&67108863,this.words[G+1]=te>>>26-Y&67108863,Y+=24,Y>=26&&(Y-=26,G++);else if(M==="le")for(z=0,G=0;z<A.length;z+=3)te=A[z]|A[z+1]<<8|A[z+2]<<16,this.words[G]|=te<<Y&67108863,this.words[G+1]=te>>>26-Y&67108863,Y+=24,Y>=26&&(Y-=26,G++);return this._strip()};function a(B,A){var I=B.charCodeAt(A);if(I>=48&&I<=57)return I-48;if(I>=65&&I<=70)return I-55;if(I>=97&&I<=102)return I-87;r(!1,"Invalid character in "+B)}function l(B,A,I){var M=a(B,I);return I-1>=A&&(M|=a(B,I-1)<<4),M}s.prototype._parseHex=function(A,I,M){this.length=Math.ceil((A.length-I)/6),this.words=new Array(this.length);for(var z=0;z<this.length;z++)this.words[z]=0;var G=0,te=0,Y;if(M==="be")for(z=A.length-1;z>=I;z-=2)Y=l(A,I,z)<<G,this.words[te]|=Y&67108863,G>=18?(G-=18,te+=1,this.words[te]|=Y>>>26):G+=8;else{var q=A.length-I;for(z=q%2===0?I+1:I;z<A.length;z+=2)Y=l(A,I,z)<<G,this.words[te]|=Y&67108863,G>=18?(G-=18,te+=1,this.words[te]|=Y>>>26):G+=8}this._strip()};function c(B,A,I,M){for(var z=0,G=0,te=Math.min(B.length,I),Y=A;Y<te;Y++){var q=B.charCodeAt(Y)-48;z*=M,q>=49?G=q-49+10:q>=17?G=q-17+10:G=q,r(q>=0&&G<M,"Invalid character"),z+=G}return z}s.prototype._parseBase=function(A,I,M){this.words=[0],this.length=1;for(var z=0,G=1;G<=67108863;G*=I)z++;z--,G=G/I|0;for(var te=A.length-M,Y=te%z,q=Math.min(te,te-Y)+M,D=0,_=M;_<q;_+=z)D=c(A,_,_+z,I),this.imuln(G),this.words[0]+D<67108864?this.words[0]+=D:this._iaddn(D);if(Y!==0){var W=1;for(D=c(A,_,A.length,I),_=0;_<Y;_++)W*=I;this.imuln(W),this.words[0]+D<67108864?this.words[0]+=D:this._iaddn(D)}this._strip()},s.prototype.copy=function(A){A.words=new Array(this.length);for(var I=0;I<this.length;I++)A.words[I]=this.words[I];A.length=this.length,A.negative=this.negative,A.red=this.red};function u(B,A){B.words=A.words,B.length=A.length,B.negative=A.negative,B.red=A.red}if(s.prototype._move=function(A){u(A,this)},s.prototype.clone=function(){var A=new s(null);return this.copy(A),A},s.prototype._expand=function(A){for(;this.length<A;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=f}catch{s.prototype.inspect=f}else s.prototype.inspect=f;function f(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var m=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],g=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],x=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(A,I){A=A||10,I=I|0||1;var M;if(A===16||A==="hex"){M="";for(var z=0,G=0,te=0;te<this.length;te++){var Y=this.words[te],q=((Y<<z|G)&16777215).toString(16);G=Y>>>24-z&16777215,z+=2,z>=26&&(z-=26,te--),G!==0||te!==this.length-1?M=m[6-q.length]+q+M:M=q+M}for(G!==0&&(M=G.toString(16)+M);M.length%I!==0;)M="0"+M;return this.negative!==0&&(M="-"+M),M}if(A===(A|0)&&A>=2&&A<=36){var D=g[A],_=x[A];M="";var W=this.clone();for(W.negative=0;!W.isZero();){var X=W.modrn(_).toString(A);W=W.idivn(_),W.isZero()?M=X+M:M=m[D-X.length]+X+M}for(this.isZero()&&(M="0"+M);M.length%I!==0;)M="0"+M;return this.negative!==0&&(M="-"+M),M}r(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var A=this.words[0];return this.length===2?A+=this.words[1]*67108864:this.length===3&&this.words[2]===1?A+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-A:A},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(A,I){return this.toArrayLike(o,A,I)}),s.prototype.toArray=function(A,I){return this.toArrayLike(Array,A,I)};var v=function(A,I){return A.allocUnsafe?A.allocUnsafe(I):new A(I)};s.prototype.toArrayLike=function(A,I,M){this._strip();var z=this.byteLength(),G=M||Math.max(1,z);r(z<=G,"byte array longer than desired length"),r(G>0,"Requested array length <= 0");var te=v(A,G),Y=I==="le"?"LE":"BE";return this["_toArrayLike"+Y](te,z),te},s.prototype._toArrayLikeLE=function(A,I){for(var M=0,z=0,G=0,te=0;G<this.length;G++){var Y=this.words[G]<<te|z;A[M++]=Y&255,M<A.length&&(A[M++]=Y>>8&255),M<A.length&&(A[M++]=Y>>16&255),te===6?(M<A.length&&(A[M++]=Y>>24&255),z=0,te=0):(z=Y>>>24,te+=2)}if(M<A.length)for(A[M++]=z;M<A.length;)A[M++]=0},s.prototype._toArrayLikeBE=function(A,I){for(var M=A.length-1,z=0,G=0,te=0;G<this.length;G++){var Y=this.words[G]<<te|z;A[M--]=Y&255,M>=0&&(A[M--]=Y>>8&255),M>=0&&(A[M--]=Y>>16&255),te===6?(M>=0&&(A[M--]=Y>>24&255),z=0,te=0):(z=Y>>>24,te+=2)}if(M>=0)for(A[M--]=z;M>=0;)A[M--]=0},Math.clz32?s.prototype._countBits=function(A){return 32-Math.clz32(A)}:s.prototype._countBits=function(A){var I=A,M=0;return I>=4096&&(M+=13,I>>>=13),I>=64&&(M+=7,I>>>=7),I>=8&&(M+=4,I>>>=4),I>=2&&(M+=2,I>>>=2),M+I},s.prototype._zeroBits=function(A){if(A===0)return 26;var I=A,M=0;return(I&8191)===0&&(M+=13,I>>>=13),(I&127)===0&&(M+=7,I>>>=7),(I&15)===0&&(M+=4,I>>>=4),(I&3)===0&&(M+=2,I>>>=2),(I&1)===0&&M++,M},s.prototype.bitLength=function(){var A=this.words[this.length-1],I=this._countBits(A);return(this.length-1)*26+I};function w(B){for(var A=new Array(B.bitLength()),I=0;I<A.length;I++){var M=I/26|0,z=I%26;A[I]=B.words[M]>>>z&1}return A}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var A=0,I=0;I<this.length;I++){var M=this._zeroBits(this.words[I]);if(A+=M,M!==26)break}return A},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(A){return this.negative!==0?this.abs().inotn(A).iaddn(1):this.clone()},s.prototype.fromTwos=function(A){return this.testn(A-1)?this.notn(A).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(A){for(;this.length<A.length;)this.words[this.length++]=0;for(var I=0;I<A.length;I++)this.words[I]=this.words[I]|A.words[I];return this._strip()},s.prototype.ior=function(A){return r((this.negative|A.negative)===0),this.iuor(A)},s.prototype.or=function(A){return this.length>A.length?this.clone().ior(A):A.clone().ior(this)},s.prototype.uor=function(A){return this.length>A.length?this.clone().iuor(A):A.clone().iuor(this)},s.prototype.iuand=function(A){var I;this.length>A.length?I=A:I=this;for(var M=0;M<I.length;M++)this.words[M]=this.words[M]&A.words[M];return this.length=I.length,this._strip()},s.prototype.iand=function(A){return r((this.negative|A.negative)===0),this.iuand(A)},s.prototype.and=function(A){return this.length>A.length?this.clone().iand(A):A.clone().iand(this)},s.prototype.uand=function(A){return this.length>A.length?this.clone().iuand(A):A.clone().iuand(this)},s.prototype.iuxor=function(A){var I,M;this.length>A.length?(I=this,M=A):(I=A,M=this);for(var z=0;z<M.length;z++)this.words[z]=I.words[z]^M.words[z];if(this!==I)for(;z<I.length;z++)this.words[z]=I.words[z];return this.length=I.length,this._strip()},s.prototype.ixor=function(A){return r((this.negative|A.negative)===0),this.iuxor(A)},s.prototype.xor=function(A){return this.length>A.length?this.clone().ixor(A):A.clone().ixor(this)},s.prototype.uxor=function(A){return this.length>A.length?this.clone().iuxor(A):A.clone().iuxor(this)},s.prototype.inotn=function(A){r(typeof A=="number"&&A>=0);var I=Math.ceil(A/26)|0,M=A%26;this._expand(I),M>0&&I--;for(var z=0;z<I;z++)this.words[z]=~this.words[z]&67108863;return M>0&&(this.words[z]=~this.words[z]&67108863>>26-M),this._strip()},s.prototype.notn=function(A){return this.clone().inotn(A)},s.prototype.setn=function(A,I){r(typeof A=="number"&&A>=0);var M=A/26|0,z=A%26;return this._expand(M+1),I?this.words[M]=this.words[M]|1<<z:this.words[M]=this.words[M]&~(1<<z),this._strip()},s.prototype.iadd=function(A){var I;if(this.negative!==0&&A.negative===0)return this.negative=0,I=this.isub(A),this.negative^=1,this._normSign();if(this.negative===0&&A.negative!==0)return A.negative=0,I=this.isub(A),A.negative=1,I._normSign();var M,z;this.length>A.length?(M=this,z=A):(M=A,z=this);for(var G=0,te=0;te<z.length;te++)I=(M.words[te]|0)+(z.words[te]|0)+G,this.words[te]=I&67108863,G=I>>>26;for(;G!==0&&te<M.length;te++)I=(M.words[te]|0)+G,this.words[te]=I&67108863,G=I>>>26;if(this.length=M.length,G!==0)this.words[this.length]=G,this.length++;else if(M!==this)for(;te<M.length;te++)this.words[te]=M.words[te];return this},s.prototype.add=function(A){var I;return A.negative!==0&&this.negative===0?(A.negative=0,I=this.sub(A),A.negative^=1,I):A.negative===0&&this.negative!==0?(this.negative=0,I=A.sub(this),this.negative=1,I):this.length>A.length?this.clone().iadd(A):A.clone().iadd(this)},s.prototype.isub=function(A){if(A.negative!==0){A.negative=0;var I=this.iadd(A);return A.negative=1,I._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(A),this.negative=1,this._normSign();var M=this.cmp(A);if(M===0)return this.negative=0,this.length=1,this.words[0]=0,this;var z,G;M>0?(z=this,G=A):(z=A,G=this);for(var te=0,Y=0;Y<G.length;Y++)I=(z.words[Y]|0)-(G.words[Y]|0)+te,te=I>>26,this.words[Y]=I&67108863;for(;te!==0&&Y<z.length;Y++)I=(z.words[Y]|0)+te,te=I>>26,this.words[Y]=I&67108863;if(te===0&&Y<z.length&&z!==this)for(;Y<z.length;Y++)this.words[Y]=z.words[Y];return this.length=Math.max(this.length,Y),z!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(A){return this.clone().isub(A)};function E(B,A,I){I.negative=A.negative^B.negative;var M=B.length+A.length|0;I.length=M,M=M-1|0;var z=B.words[0]|0,G=A.words[0]|0,te=z*G,Y=te&67108863,q=te/67108864|0;I.words[0]=Y;for(var D=1;D<M;D++){for(var _=q>>>26,W=q&67108863,X=Math.min(D,A.length-1),re=Math.max(0,D-B.length+1);re<=X;re++){var ae=D-re|0;z=B.words[ae]|0,G=A.words[re]|0,te=z*G+W,_+=te/67108864|0,W=te&67108863}I.words[D]=W|0,q=_|0}return q!==0?I.words[D]=q|0:I.length--,I._strip()}var C=function(A,I,M){var z=A.words,G=I.words,te=M.words,Y=0,q,D,_,W=z[0]|0,X=W&8191,re=W>>>13,ae=z[1]|0,Ee=ae&8191,ue=ae>>>13,me=z[2]|0,ce=me&8191,oe=me>>>13,ke=z[3]|0,Ne=ke&8191,ze=ke>>>13,Ze=z[4]|0,Ye=Ze&8191,We=Ze>>>13,St=z[5]|0,st=St&8191,Bt=St>>>13,Zt=z[6]|0,Ge=Zt&8191,At=Zt>>>13,un=z[7]|0,Pe=un&8191,Ve=un>>>13,ft=z[8]|0,lt=ft&8191,se=ft>>>13,J=z[9]|0,Z=J&8191,fe=J>>>13,be=G[0]|0,he=be&8191,ye=be>>>13,Xe=G[1]|0,et=Xe&8191,it=Xe>>>13,Ft=G[2]|0,xt=Ft&8191,Rt=Ft>>>13,sn=G[3]|0,en=sn&8191,on=sn>>>13,Hi=G[4]|0,Vn=Hi&8191,le=Hi>>>13,Q=G[5]|0,ee=Q&8191,pe=Q>>>13,Te=G[6]|0,Re=Te&8191,$e=Te>>>13,Jt=G[7]|0,Kt=Jt&8191,Vt=Jt>>>13,gn=G[8]|0,mt=gn&8191,ct=gn>>>13,Xs=G[9]|0,$n=Xs&8191,yr=Xs>>>13;M.negative=A.negative^I.negative,M.length=19,q=Math.imul(X,he),D=Math.imul(X,ye),D=D+Math.imul(re,he)|0,_=Math.imul(re,ye);var $c=(Y+q|0)+((D&8191)<<13)|0;Y=(_+(D>>>13)|0)+($c>>>26)|0,$c&=67108863,q=Math.imul(Ee,he),D=Math.imul(Ee,ye),D=D+Math.imul(ue,he)|0,_=Math.imul(ue,ye),q=q+Math.imul(X,et)|0,D=D+Math.imul(X,it)|0,D=D+Math.imul(re,et)|0,_=_+Math.imul(re,it)|0;var Ll=(Y+q|0)+((D&8191)<<13)|0;Y=(_+(D>>>13)|0)+(Ll>>>26)|0,Ll&=67108863,q=Math.imul(ce,he),D=Math.imul(ce,ye),D=D+Math.imul(oe,he)|0,_=Math.imul(oe,ye),q=q+Math.imul(Ee,et)|0,D=D+Math.imul(Ee,it)|0,D=D+Math.imul(ue,et)|0,_=_+Math.imul(ue,it)|0,q=q+Math.imul(X,xt)|0,D=D+Math.imul(X,Rt)|0,D=D+Math.imul(re,xt)|0,_=_+Math.imul(re,Rt)|0;var Qo=(Y+q|0)+((D&8191)<<13)|0;Y=(_+(D>>>13)|0)+(Qo>>>26)|0,Qo&=67108863,q=Math.imul(Ne,he),D=Math.imul(Ne,ye),D=D+Math.imul(ze,he)|0,_=Math.imul(ze,ye),q=q+Math.imul(ce,et)|0,D=D+Math.imul(ce,it)|0,D=D+Math.imul(oe,et)|0,_=_+Math.imul(oe,it)|0,q=q+Math.imul(Ee,xt)|0,D=D+Math.imul(Ee,Rt)|0,D=D+Math.imul(ue,xt)|0,_=_+Math.imul(ue,Rt)|0,q=q+Math.imul(X,en)|0,D=D+Math.imul(X,on)|0,D=D+Math.imul(re,en)|0,_=_+Math.imul(re,on)|0;var Bl=(Y+q|0)+((D&8191)<<13)|0;Y=(_+(D>>>13)|0)+(Bl>>>26)|0,Bl&=67108863,q=Math.imul(Ye,he),D=Math.imul(Ye,ye),D=D+Math.imul(We,he)|0,_=Math.imul(We,ye),q=q+Math.imul(Ne,et)|0,D=D+Math.imul(Ne,it)|0,D=D+Math.imul(ze,et)|0,_=_+Math.imul(ze,it)|0,q=q+Math.imul(ce,xt)|0,D=D+Math.imul(ce,Rt)|0,D=D+Math.imul(oe,xt)|0,_=_+Math.imul(oe,Rt)|0,q=q+Math.imul(Ee,en)|0,D=D+Math.imul(Ee,on)|0,D=D+Math.imul(ue,en)|0,_=_+Math.imul(ue,on)|0,q=q+Math.imul(X,Vn)|0,D=D+Math.imul(X,le)|0,D=D+Math.imul(re,Vn)|0,_=_+Math.imul(re,le)|0;var vo=(Y+q|0)+((D&8191)<<13)|0;Y=(_+(D>>>13)|0)+(vo>>>26)|0,vo&=67108863,q=Math.imul(st,he),D=Math.imul(st,ye),D=D+Math.imul(Bt,he)|0,_=Math.imul(Bt,ye),q=q+Math.imul(Ye,et)|0,D=D+Math.imul(Ye,it)|0,D=D+Math.imul(We,et)|0,_=_+Math.imul(We,it)|0,q=q+Math.imul(Ne,xt)|0,D=D+Math.imul(Ne,Rt)|0,D=D+Math.imul(ze,xt)|0,_=_+Math.imul(ze,Rt)|0,q=q+Math.imul(ce,en)|0,D=D+Math.imul(ce,on)|0,D=D+Math.imul(oe,en)|0,_=_+Math.imul(oe,on)|0,q=q+Math.imul(Ee,Vn)|0,D=D+Math.imul(Ee,le)|0,D=D+Math.imul(ue,Vn)|0,_=_+Math.imul(ue,le)|0,q=q+Math.imul(X,ee)|0,D=D+Math.imul(X,pe)|0,D=D+Math.imul(re,ee)|0,_=_+Math.imul(re,pe)|0;var bo=(Y+q|0)+((D&8191)<<13)|0;Y=(_+(D>>>13)|0)+(bo>>>26)|0,bo&=67108863,q=Math.imul(Ge,he),D=Math.imul(Ge,ye),D=D+Math.imul(At,he)|0,_=Math.imul(At,ye),q=q+Math.imul(st,et)|0,D=D+Math.imul(st,it)|0,D=D+Math.imul(Bt,et)|0,_=_+Math.imul(Bt,it)|0,q=q+Math.imul(Ye,xt)|0,D=D+Math.imul(Ye,Rt)|0,D=D+Math.imul(We,xt)|0,_=_+Math.imul(We,Rt)|0,q=q+Math.imul(Ne,en)|0,D=D+Math.imul(Ne,on)|0,D=D+Math.imul(ze,en)|0,_=_+Math.imul(ze,on)|0,q=q+Math.imul(ce,Vn)|0,D=D+Math.imul(ce,le)|0,D=D+Math.imul(oe,Vn)|0,_=_+Math.imul(oe,le)|0,q=q+Math.imul(Ee,ee)|0,D=D+Math.imul(Ee,pe)|0,D=D+Math.imul(ue,ee)|0,_=_+Math.imul(ue,pe)|0,q=q+Math.imul(X,Re)|0,D=D+Math.imul(X,$e)|0,D=D+Math.imul(re,Re)|0,_=_+Math.imul(re,$e)|0;var Zo=(Y+q|0)+((D&8191)<<13)|0;Y=(_+(D>>>13)|0)+(Zo>>>26)|0,Zo&=67108863,q=Math.imul(Pe,he),D=Math.imul(Pe,ye),D=D+Math.imul(Ve,he)|0,_=Math.imul(Ve,ye),q=q+Math.imul(Ge,et)|0,D=D+Math.imul(Ge,it)|0,D=D+Math.imul(At,et)|0,_=_+Math.imul(At,it)|0,q=q+Math.imul(st,xt)|0,D=D+Math.imul(st,Rt)|0,D=D+Math.imul(Bt,xt)|0,_=_+Math.imul(Bt,Rt)|0,q=q+Math.imul(Ye,en)|0,D=D+Math.imul(Ye,on)|0,D=D+Math.imul(We,en)|0,_=_+Math.imul(We,on)|0,q=q+Math.imul(Ne,Vn)|0,D=D+Math.imul(Ne,le)|0,D=D+Math.imul(ze,Vn)|0,_=_+Math.imul(ze,le)|0,q=q+Math.imul(ce,ee)|0,D=D+Math.imul(ce,pe)|0,D=D+Math.imul(oe,ee)|0,_=_+Math.imul(oe,pe)|0,q=q+Math.imul(Ee,Re)|0,D=D+Math.imul(Ee,$e)|0,D=D+Math.imul(ue,Re)|0,_=_+Math.imul(ue,$e)|0,q=q+Math.imul(X,Kt)|0,D=D+Math.imul(X,Vt)|0,D=D+Math.imul(re,Kt)|0,_=_+Math.imul(re,Vt)|0;var wo=(Y+q|0)+((D&8191)<<13)|0;Y=(_+(D>>>13)|0)+(wo>>>26)|0,wo&=67108863,q=Math.imul(lt,he),D=Math.imul(lt,ye),D=D+Math.imul(se,he)|0,_=Math.imul(se,ye),q=q+Math.imul(Pe,et)|0,D=D+Math.imul(Pe,it)|0,D=D+Math.imul(Ve,et)|0,_=_+Math.imul(Ve,it)|0,q=q+Math.imul(Ge,xt)|0,D=D+Math.imul(Ge,Rt)|0,D=D+Math.imul(At,xt)|0,_=_+Math.imul(At,Rt)|0,q=q+Math.imul(st,en)|0,D=D+Math.imul(st,on)|0,D=D+Math.imul(Bt,en)|0,_=_+Math.imul(Bt,on)|0,q=q+Math.imul(Ye,Vn)|0,D=D+Math.imul(Ye,le)|0,D=D+Math.imul(We,Vn)|0,_=_+Math.imul(We,le)|0,q=q+Math.imul(Ne,ee)|0,D=D+Math.imul(Ne,pe)|0,D=D+Math.imul(ze,ee)|0,_=_+Math.imul(ze,pe)|0,q=q+Math.imul(ce,Re)|0,D=D+Math.imul(ce,$e)|0,D=D+Math.imul(oe,Re)|0,_=_+Math.imul(oe,$e)|0,q=q+Math.imul(Ee,Kt)|0,D=D+Math.imul(Ee,Vt)|0,D=D+Math.imul(ue,Kt)|0,_=_+Math.imul(ue,Vt)|0,q=q+Math.imul(X,mt)|0,D=D+Math.imul(X,ct)|0,D=D+Math.imul(re,mt)|0,_=_+Math.imul(re,ct)|0;var xr=(Y+q|0)+((D&8191)<<13)|0;Y=(_+(D>>>13)|0)+(xr>>>26)|0,xr&=67108863,q=Math.imul(Z,he),D=Math.imul(Z,ye),D=D+Math.imul(fe,he)|0,_=Math.imul(fe,ye),q=q+Math.imul(lt,et)|0,D=D+Math.imul(lt,it)|0,D=D+Math.imul(se,et)|0,_=_+Math.imul(se,it)|0,q=q+Math.imul(Pe,xt)|0,D=D+Math.imul(Pe,Rt)|0,D=D+Math.imul(Ve,xt)|0,_=_+Math.imul(Ve,Rt)|0,q=q+Math.imul(Ge,en)|0,D=D+Math.imul(Ge,on)|0,D=D+Math.imul(At,en)|0,_=_+Math.imul(At,on)|0,q=q+Math.imul(st,Vn)|0,D=D+Math.imul(st,le)|0,D=D+Math.imul(Bt,Vn)|0,_=_+Math.imul(Bt,le)|0,q=q+Math.imul(Ye,ee)|0,D=D+Math.imul(Ye,pe)|0,D=D+Math.imul(We,ee)|0,_=_+Math.imul(We,pe)|0,q=q+Math.imul(Ne,Re)|0,D=D+Math.imul(Ne,$e)|0,D=D+Math.imul(ze,Re)|0,_=_+Math.imul(ze,$e)|0,q=q+Math.imul(ce,Kt)|0,D=D+Math.imul(ce,Vt)|0,D=D+Math.imul(oe,Kt)|0,_=_+Math.imul(oe,Vt)|0,q=q+Math.imul(Ee,mt)|0,D=D+Math.imul(Ee,ct)|0,D=D+Math.imul(ue,mt)|0,_=_+Math.imul(ue,ct)|0,q=q+Math.imul(X,$n)|0,D=D+Math.imul(X,yr)|0,D=D+Math.imul(re,$n)|0,_=_+Math.imul(re,yr)|0;var zc=(Y+q|0)+((D&8191)<<13)|0;Y=(_+(D>>>13)|0)+(zc>>>26)|0,zc&=67108863,q=Math.imul(Z,et),D=Math.imul(Z,it),D=D+Math.imul(fe,et)|0,_=Math.imul(fe,it),q=q+Math.imul(lt,xt)|0,D=D+Math.imul(lt,Rt)|0,D=D+Math.imul(se,xt)|0,_=_+Math.imul(se,Rt)|0,q=q+Math.imul(Pe,en)|0,D=D+Math.imul(Pe,on)|0,D=D+Math.imul(Ve,en)|0,_=_+Math.imul(Ve,on)|0,q=q+Math.imul(Ge,Vn)|0,D=D+Math.imul(Ge,le)|0,D=D+Math.imul(At,Vn)|0,_=_+Math.imul(At,le)|0,q=q+Math.imul(st,ee)|0,D=D+Math.imul(st,pe)|0,D=D+Math.imul(Bt,ee)|0,_=_+Math.imul(Bt,pe)|0,q=q+Math.imul(Ye,Re)|0,D=D+Math.imul(Ye,$e)|0,D=D+Math.imul(We,Re)|0,_=_+Math.imul(We,$e)|0,q=q+Math.imul(Ne,Kt)|0,D=D+Math.imul(Ne,Vt)|0,D=D+Math.imul(ze,Kt)|0,_=_+Math.imul(ze,Vt)|0,q=q+Math.imul(ce,mt)|0,D=D+Math.imul(ce,ct)|0,D=D+Math.imul(oe,mt)|0,_=_+Math.imul(oe,ct)|0,q=q+Math.imul(Ee,$n)|0,D=D+Math.imul(Ee,yr)|0,D=D+Math.imul(ue,$n)|0,_=_+Math.imul(ue,yr)|0;var Sr=(Y+q|0)+((D&8191)<<13)|0;Y=(_+(D>>>13)|0)+(Sr>>>26)|0,Sr&=67108863,q=Math.imul(Z,xt),D=Math.imul(Z,Rt),D=D+Math.imul(fe,xt)|0,_=Math.imul(fe,Rt),q=q+Math.imul(lt,en)|0,D=D+Math.imul(lt,on)|0,D=D+Math.imul(se,en)|0,_=_+Math.imul(se,on)|0,q=q+Math.imul(Pe,Vn)|0,D=D+Math.imul(Pe,le)|0,D=D+Math.imul(Ve,Vn)|0,_=_+Math.imul(Ve,le)|0,q=q+Math.imul(Ge,ee)|0,D=D+Math.imul(Ge,pe)|0,D=D+Math.imul(At,ee)|0,_=_+Math.imul(At,pe)|0,q=q+Math.imul(st,Re)|0,D=D+Math.imul(st,$e)|0,D=D+Math.imul(Bt,Re)|0,_=_+Math.imul(Bt,$e)|0,q=q+Math.imul(Ye,Kt)|0,D=D+Math.imul(Ye,Vt)|0,D=D+Math.imul(We,Kt)|0,_=_+Math.imul(We,Vt)|0,q=q+Math.imul(Ne,mt)|0,D=D+Math.imul(Ne,ct)|0,D=D+Math.imul(ze,mt)|0,_=_+Math.imul(ze,ct)|0,q=q+Math.imul(ce,$n)|0,D=D+Math.imul(ce,yr)|0,D=D+Math.imul(oe,$n)|0,_=_+Math.imul(oe,yr)|0;var Yr=(Y+q|0)+((D&8191)<<13)|0;Y=(_+(D>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,q=Math.imul(Z,en),D=Math.imul(Z,on),D=D+Math.imul(fe,en)|0,_=Math.imul(fe,on),q=q+Math.imul(lt,Vn)|0,D=D+Math.imul(lt,le)|0,D=D+Math.imul(se,Vn)|0,_=_+Math.imul(se,le)|0,q=q+Math.imul(Pe,ee)|0,D=D+Math.imul(Pe,pe)|0,D=D+Math.imul(Ve,ee)|0,_=_+Math.imul(Ve,pe)|0,q=q+Math.imul(Ge,Re)|0,D=D+Math.imul(Ge,$e)|0,D=D+Math.imul(At,Re)|0,_=_+Math.imul(At,$e)|0,q=q+Math.imul(st,Kt)|0,D=D+Math.imul(st,Vt)|0,D=D+Math.imul(Bt,Kt)|0,_=_+Math.imul(Bt,Vt)|0,q=q+Math.imul(Ye,mt)|0,D=D+Math.imul(Ye,ct)|0,D=D+Math.imul(We,mt)|0,_=_+Math.imul(We,ct)|0,q=q+Math.imul(Ne,$n)|0,D=D+Math.imul(Ne,yr)|0,D=D+Math.imul(ze,$n)|0,_=_+Math.imul(ze,yr)|0;var us=(Y+q|0)+((D&8191)<<13)|0;Y=(_+(D>>>13)|0)+(us>>>26)|0,us&=67108863,q=Math.imul(Z,Vn),D=Math.imul(Z,le),D=D+Math.imul(fe,Vn)|0,_=Math.imul(fe,le),q=q+Math.imul(lt,ee)|0,D=D+Math.imul(lt,pe)|0,D=D+Math.imul(se,ee)|0,_=_+Math.imul(se,pe)|0,q=q+Math.imul(Pe,Re)|0,D=D+Math.imul(Pe,$e)|0,D=D+Math.imul(Ve,Re)|0,_=_+Math.imul(Ve,$e)|0,q=q+Math.imul(Ge,Kt)|0,D=D+Math.imul(Ge,Vt)|0,D=D+Math.imul(At,Kt)|0,_=_+Math.imul(At,Vt)|0,q=q+Math.imul(st,mt)|0,D=D+Math.imul(st,ct)|0,D=D+Math.imul(Bt,mt)|0,_=_+Math.imul(Bt,ct)|0,q=q+Math.imul(Ye,$n)|0,D=D+Math.imul(Ye,yr)|0,D=D+Math.imul(We,$n)|0,_=_+Math.imul(We,yr)|0;var wh=(Y+q|0)+((D&8191)<<13)|0;Y=(_+(D>>>13)|0)+(wh>>>26)|0,wh&=67108863,q=Math.imul(Z,ee),D=Math.imul(Z,pe),D=D+Math.imul(fe,ee)|0,_=Math.imul(fe,pe),q=q+Math.imul(lt,Re)|0,D=D+Math.imul(lt,$e)|0,D=D+Math.imul(se,Re)|0,_=_+Math.imul(se,$e)|0,q=q+Math.imul(Pe,Kt)|0,D=D+Math.imul(Pe,Vt)|0,D=D+Math.imul(Ve,Kt)|0,_=_+Math.imul(Ve,Vt)|0,q=q+Math.imul(Ge,mt)|0,D=D+Math.imul(Ge,ct)|0,D=D+Math.imul(At,mt)|0,_=_+Math.imul(At,ct)|0,q=q+Math.imul(st,$n)|0,D=D+Math.imul(st,yr)|0,D=D+Math.imul(Bt,$n)|0,_=_+Math.imul(Bt,yr)|0;var zm=(Y+q|0)+((D&8191)<<13)|0;Y=(_+(D>>>13)|0)+(zm>>>26)|0,zm&=67108863,q=Math.imul(Z,Re),D=Math.imul(Z,$e),D=D+Math.imul(fe,Re)|0,_=Math.imul(fe,$e),q=q+Math.imul(lt,Kt)|0,D=D+Math.imul(lt,Vt)|0,D=D+Math.imul(se,Kt)|0,_=_+Math.imul(se,Vt)|0,q=q+Math.imul(Pe,mt)|0,D=D+Math.imul(Pe,ct)|0,D=D+Math.imul(Ve,mt)|0,_=_+Math.imul(Ve,ct)|0,q=q+Math.imul(Ge,$n)|0,D=D+Math.imul(Ge,yr)|0,D=D+Math.imul(At,$n)|0,_=_+Math.imul(At,yr)|0;var Hm=(Y+q|0)+((D&8191)<<13)|0;Y=(_+(D>>>13)|0)+(Hm>>>26)|0,Hm&=67108863,q=Math.imul(Z,Kt),D=Math.imul(Z,Vt),D=D+Math.imul(fe,Kt)|0,_=Math.imul(fe,Vt),q=q+Math.imul(lt,mt)|0,D=D+Math.imul(lt,ct)|0,D=D+Math.imul(se,mt)|0,_=_+Math.imul(se,ct)|0,q=q+Math.imul(Pe,$n)|0,D=D+Math.imul(Pe,yr)|0,D=D+Math.imul(Ve,$n)|0,_=_+Math.imul(Ve,yr)|0;var iv=(Y+q|0)+((D&8191)<<13)|0;Y=(_+(D>>>13)|0)+(iv>>>26)|0,iv&=67108863,q=Math.imul(Z,mt),D=Math.imul(Z,ct),D=D+Math.imul(fe,mt)|0,_=Math.imul(fe,ct),q=q+Math.imul(lt,$n)|0,D=D+Math.imul(lt,yr)|0,D=D+Math.imul(se,$n)|0,_=_+Math.imul(se,yr)|0;var Rd=(Y+q|0)+((D&8191)<<13)|0;Y=(_+(D>>>13)|0)+(Rd>>>26)|0,Rd&=67108863,q=Math.imul(Z,$n),D=Math.imul(Z,yr),D=D+Math.imul(fe,$n)|0,_=Math.imul(fe,yr);var Od=(Y+q|0)+((D&8191)<<13)|0;return Y=(_+(D>>>13)|0)+(Od>>>26)|0,Od&=67108863,te[0]=$c,te[1]=Ll,te[2]=Qo,te[3]=Bl,te[4]=vo,te[5]=bo,te[6]=Zo,te[7]=wo,te[8]=xr,te[9]=zc,te[10]=Sr,te[11]=Yr,te[12]=us,te[13]=wh,te[14]=zm,te[15]=Hm,te[16]=iv,te[17]=Rd,te[18]=Od,Y!==0&&(te[19]=Y,M.length++),M};Math.imul||(C=E);function k(B,A,I){I.negative=A.negative^B.negative,I.length=B.length+A.length;for(var M=0,z=0,G=0;G<I.length-1;G++){var te=z;z=0;for(var Y=M&67108863,q=Math.min(G,A.length-1),D=Math.max(0,G-B.length+1);D<=q;D++){var _=G-D,W=B.words[_]|0,X=A.words[D]|0,re=W*X,ae=re&67108863;te=te+(re/67108864|0)|0,ae=ae+Y|0,Y=ae&67108863,te=te+(ae>>>26)|0,z+=te>>>26,te&=67108863}I.words[G]=Y,M=te,te=z}return M!==0?I.words[G]=M:I.length--,I._strip()}function O(B,A,I){return k(B,A,I)}s.prototype.mulTo=function(A,I){var M,z=this.length+A.length;return this.length===10&&A.length===10?M=C(this,A,I):z<63?M=E(this,A,I):z<1024?M=k(this,A,I):M=O(this,A,I),M},s.prototype.mul=function(A){var I=new s(null);return I.words=new Array(this.length+A.length),this.mulTo(A,I)},s.prototype.mulf=function(A){var I=new s(null);return I.words=new Array(this.length+A.length),O(this,A,I)},s.prototype.imul=function(A){return this.clone().mulTo(A,this)},s.prototype.imuln=function(A){var I=A<0;I&&(A=-A),r(typeof A=="number"),r(A<67108864);for(var M=0,z=0;z<this.length;z++){var G=(this.words[z]|0)*A,te=(G&67108863)+(M&67108863);M>>=26,M+=G/67108864|0,M+=te>>>26,this.words[z]=te&67108863}return M!==0&&(this.words[z]=M,this.length++),this.length=A===0?1:this.length,I?this.ineg():this},s.prototype.muln=function(A){return this.clone().imuln(A)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(A){var I=w(A);if(I.length===0)return new s(1);for(var M=this,z=0;z<I.length&&I[z]===0;z++,M=M.sqr());if(++z<I.length)for(var G=M.sqr();z<I.length;z++,G=G.sqr())I[z]!==0&&(M=M.mul(G));return M},s.prototype.iushln=function(A){r(typeof A=="number"&&A>=0);var I=A%26,M=(A-I)/26,z=67108863>>>26-I<<26-I,G;if(I!==0){var te=0;for(G=0;G<this.length;G++){var Y=this.words[G]&z,q=(this.words[G]|0)-Y<<I;this.words[G]=q|te,te=Y>>>26-I}te&&(this.words[G]=te,this.length++)}if(M!==0){for(G=this.length-1;G>=0;G--)this.words[G+M]=this.words[G];for(G=0;G<M;G++)this.words[G]=0;this.length+=M}return this._strip()},s.prototype.ishln=function(A){return r(this.negative===0),this.iushln(A)},s.prototype.iushrn=function(A,I,M){r(typeof A=="number"&&A>=0);var z;I?z=(I-I%26)/26:z=0;var G=A%26,te=Math.min((A-G)/26,this.length),Y=67108863^67108863>>>G<<G,q=M;if(z-=te,z=Math.max(0,z),q){for(var D=0;D<te;D++)q.words[D]=this.words[D];q.length=te}if(te!==0)if(this.length>te)for(this.length-=te,D=0;D<this.length;D++)this.words[D]=this.words[D+te];else this.words[0]=0,this.length=1;var _=0;for(D=this.length-1;D>=0&&(_!==0||D>=z);D--){var W=this.words[D]|0;this.words[D]=_<<26-G|W>>>G,_=W&Y}return q&&_!==0&&(q.words[q.length++]=_),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(A,I,M){return r(this.negative===0),this.iushrn(A,I,M)},s.prototype.shln=function(A){return this.clone().ishln(A)},s.prototype.ushln=function(A){return this.clone().iushln(A)},s.prototype.shrn=function(A){return this.clone().ishrn(A)},s.prototype.ushrn=function(A){return this.clone().iushrn(A)},s.prototype.testn=function(A){r(typeof A=="number"&&A>=0);var I=A%26,M=(A-I)/26,z=1<<I;if(this.length<=M)return!1;var G=this.words[M];return!!(G&z)},s.prototype.imaskn=function(A){r(typeof A=="number"&&A>=0);var I=A%26,M=(A-I)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=M)return this;if(I!==0&&M++,this.length=Math.min(M,this.length),I!==0){var z=67108863^67108863>>>I<<I;this.words[this.length-1]&=z}return this._strip()},s.prototype.maskn=function(A){return this.clone().imaskn(A)},s.prototype.iaddn=function(A){return r(typeof A=="number"),r(A<67108864),A<0?this.isubn(-A):this.negative!==0?this.length===1&&(this.words[0]|0)<=A?(this.words[0]=A-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(A),this.negative=1,this):this._iaddn(A)},s.prototype._iaddn=function(A){this.words[0]+=A;for(var I=0;I<this.length&&this.words[I]>=67108864;I++)this.words[I]-=67108864,I===this.length-1?this.words[I+1]=1:this.words[I+1]++;return this.length=Math.max(this.length,I+1),this},s.prototype.isubn=function(A){if(r(typeof A=="number"),r(A<67108864),A<0)return this.iaddn(-A);if(this.negative!==0)return this.negative=0,this.iaddn(A),this.negative=1,this;if(this.words[0]-=A,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var I=0;I<this.length&&this.words[I]<0;I++)this.words[I]+=67108864,this.words[I+1]-=1;return this._strip()},s.prototype.addn=function(A){return this.clone().iaddn(A)},s.prototype.subn=function(A){return this.clone().isubn(A)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(A,I,M){var z=A.length+M,G;this._expand(z);var te,Y=0;for(G=0;G<A.length;G++){te=(this.words[G+M]|0)+Y;var q=(A.words[G]|0)*I;te-=q&67108863,Y=(te>>26)-(q/67108864|0),this.words[G+M]=te&67108863}for(;G<this.length-M;G++)te=(this.words[G+M]|0)+Y,Y=te>>26,this.words[G+M]=te&67108863;if(Y===0)return this._strip();for(r(Y===-1),Y=0,G=0;G<this.length;G++)te=-(this.words[G]|0)+Y,Y=te>>26,this.words[G]=te&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(A,I){var M=this.length-A.length,z=this.clone(),G=A,te=G.words[G.length-1]|0,Y=this._countBits(te);M=26-Y,M!==0&&(G=G.ushln(M),z.iushln(M),te=G.words[G.length-1]|0);var q=z.length-G.length,D;if(I!=="mod"){D=new s(null),D.length=q+1,D.words=new Array(D.length);for(var _=0;_<D.length;_++)D.words[_]=0}var W=z.clone()._ishlnsubmul(G,1,q);W.negative===0&&(z=W,D&&(D.words[q]=1));for(var X=q-1;X>=0;X--){var re=(z.words[G.length+X]|0)*67108864+(z.words[G.length+X-1]|0);for(re=Math.min(re/te|0,67108863),z._ishlnsubmul(G,re,X);z.negative!==0;)re--,z.negative=0,z._ishlnsubmul(G,1,X),z.isZero()||(z.negative^=1);D&&(D.words[X]=re)}return D&&D._strip(),z._strip(),I!=="div"&&M!==0&&z.iushrn(M),{div:D||null,mod:z}},s.prototype.divmod=function(A,I,M){if(r(!A.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var z,G,te;return this.negative!==0&&A.negative===0?(te=this.neg().divmod(A,I),I!=="mod"&&(z=te.div.neg()),I!=="div"&&(G=te.mod.neg(),M&&G.negative!==0&&G.iadd(A)),{div:z,mod:G}):this.negative===0&&A.negative!==0?(te=this.divmod(A.neg(),I),I!=="mod"&&(z=te.div.neg()),{div:z,mod:te.mod}):(this.negative&A.negative)!==0?(te=this.neg().divmod(A.neg(),I),I!=="div"&&(G=te.mod.neg(),M&&G.negative!==0&&G.isub(A)),{div:te.div,mod:G}):A.length>this.length||this.cmp(A)<0?{div:new s(0),mod:this}:A.length===1?I==="div"?{div:this.divn(A.words[0]),mod:null}:I==="mod"?{div:null,mod:new s(this.modrn(A.words[0]))}:{div:this.divn(A.words[0]),mod:new s(this.modrn(A.words[0]))}:this._wordDiv(A,I)},s.prototype.div=function(A){return this.divmod(A,"div",!1).div},s.prototype.mod=function(A){return this.divmod(A,"mod",!1).mod},s.prototype.umod=function(A){return this.divmod(A,"mod",!0).mod},s.prototype.divRound=function(A){var I=this.divmod(A);if(I.mod.isZero())return I.div;var M=I.div.negative!==0?I.mod.isub(A):I.mod,z=A.ushrn(1),G=A.andln(1),te=M.cmp(z);return te<0||G===1&&te===0?I.div:I.div.negative!==0?I.div.isubn(1):I.div.iaddn(1)},s.prototype.modrn=function(A){var I=A<0;I&&(A=-A),r(A<=67108863);for(var M=(1<<26)%A,z=0,G=this.length-1;G>=0;G--)z=(M*z+(this.words[G]|0))%A;return I?-z:z},s.prototype.modn=function(A){return this.modrn(A)},s.prototype.idivn=function(A){var I=A<0;I&&(A=-A),r(A<=67108863);for(var M=0,z=this.length-1;z>=0;z--){var G=(this.words[z]|0)+M*67108864;this.words[z]=G/A|0,M=G%A}return this._strip(),I?this.ineg():this},s.prototype.divn=function(A){return this.clone().idivn(A)},s.prototype.egcd=function(A){r(A.negative===0),r(!A.isZero());var I=this,M=A.clone();I.negative!==0?I=I.umod(A):I=I.clone();for(var z=new s(1),G=new s(0),te=new s(0),Y=new s(1),q=0;I.isEven()&&M.isEven();)I.iushrn(1),M.iushrn(1),++q;for(var D=M.clone(),_=I.clone();!I.isZero();){for(var W=0,X=1;(I.words[0]&X)===0&&W<26;++W,X<<=1);if(W>0)for(I.iushrn(W);W-- >0;)(z.isOdd()||G.isOdd())&&(z.iadd(D),G.isub(_)),z.iushrn(1),G.iushrn(1);for(var re=0,ae=1;(M.words[0]&ae)===0&&re<26;++re,ae<<=1);if(re>0)for(M.iushrn(re);re-- >0;)(te.isOdd()||Y.isOdd())&&(te.iadd(D),Y.isub(_)),te.iushrn(1),Y.iushrn(1);I.cmp(M)>=0?(I.isub(M),z.isub(te),G.isub(Y)):(M.isub(I),te.isub(z),Y.isub(G))}return{a:te,b:Y,gcd:M.iushln(q)}},s.prototype._invmp=function(A){r(A.negative===0),r(!A.isZero());var I=this,M=A.clone();I.negative!==0?I=I.umod(A):I=I.clone();for(var z=new s(1),G=new s(0),te=M.clone();I.cmpn(1)>0&&M.cmpn(1)>0;){for(var Y=0,q=1;(I.words[0]&q)===0&&Y<26;++Y,q<<=1);if(Y>0)for(I.iushrn(Y);Y-- >0;)z.isOdd()&&z.iadd(te),z.iushrn(1);for(var D=0,_=1;(M.words[0]&_)===0&&D<26;++D,_<<=1);if(D>0)for(M.iushrn(D);D-- >0;)G.isOdd()&&G.iadd(te),G.iushrn(1);I.cmp(M)>=0?(I.isub(M),z.isub(G)):(M.isub(I),G.isub(z))}var W;return I.cmpn(1)===0?W=z:W=G,W.cmpn(0)<0&&W.iadd(A),W},s.prototype.gcd=function(A){if(this.isZero())return A.abs();if(A.isZero())return this.abs();var I=this.clone(),M=A.clone();I.negative=0,M.negative=0;for(var z=0;I.isEven()&&M.isEven();z++)I.iushrn(1),M.iushrn(1);do{for(;I.isEven();)I.iushrn(1);for(;M.isEven();)M.iushrn(1);var G=I.cmp(M);if(G<0){var te=I;I=M,M=te}else if(G===0||M.cmpn(1)===0)break;I.isub(M)}while(!0);return M.iushln(z)},s.prototype.invm=function(A){return this.egcd(A).a.umod(A)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(A){return this.words[0]&A},s.prototype.bincn=function(A){r(typeof A=="number");var I=A%26,M=(A-I)/26,z=1<<I;if(this.length<=M)return this._expand(M+1),this.words[M]|=z,this;for(var G=z,te=M;G!==0&&te<this.length;te++){var Y=this.words[te]|0;Y+=G,G=Y>>>26,Y&=67108863,this.words[te]=Y}return G!==0&&(this.words[te]=G,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(A){var I=A<0;if(this.negative!==0&&!I)return-1;if(this.negative===0&&I)return 1;this._strip();var M;if(this.length>1)M=1;else{I&&(A=-A),r(A<=67108863,"Number is too big");var z=this.words[0]|0;M=z===A?0:z<A?-1:1}return this.negative!==0?-M|0:M},s.prototype.cmp=function(A){if(this.negative!==0&&A.negative===0)return-1;if(this.negative===0&&A.negative!==0)return 1;var I=this.ucmp(A);return this.negative!==0?-I|0:I},s.prototype.ucmp=function(A){if(this.length>A.length)return 1;if(this.length<A.length)return-1;for(var I=0,M=this.length-1;M>=0;M--){var z=this.words[M]|0,G=A.words[M]|0;if(z!==G){z<G?I=-1:z>G&&(I=1);break}}return I},s.prototype.gtn=function(A){return this.cmpn(A)===1},s.prototype.gt=function(A){return this.cmp(A)===1},s.prototype.gten=function(A){return this.cmpn(A)>=0},s.prototype.gte=function(A){return this.cmp(A)>=0},s.prototype.ltn=function(A){return this.cmpn(A)===-1},s.prototype.lt=function(A){return this.cmp(A)===-1},s.prototype.lten=function(A){return this.cmpn(A)<=0},s.prototype.lte=function(A){return this.cmp(A)<=0},s.prototype.eqn=function(A){return this.cmpn(A)===0},s.prototype.eq=function(A){return this.cmp(A)===0},s.red=function(A){return new K(A)},s.prototype.toRed=function(A){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),A.convertTo(this)._forceRed(A)},s.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(A){return this.red=A,this},s.prototype.forceRed=function(A){return r(!this.red,"Already a number in reduction context"),this._forceRed(A)},s.prototype.redAdd=function(A){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,A)},s.prototype.redIAdd=function(A){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,A)},s.prototype.redSub=function(A){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,A)},s.prototype.redISub=function(A){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,A)},s.prototype.redShl=function(A){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,A)},s.prototype.redMul=function(A){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,A),this.red.mul(this,A)},s.prototype.redIMul=function(A){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,A),this.red.imul(this,A)},s.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(A){return r(this.red&&!A.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,A)};var j={k256:null,p224:null,p192:null,p25519:null};function R(B,A){this.name=B,this.p=new s(A,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}R.prototype._tmp=function(){var A=new s(null);return A.words=new Array(Math.ceil(this.n/13)),A},R.prototype.ireduce=function(A){var I=A,M;do this.split(I,this.tmp),I=this.imulK(I),I=I.iadd(this.tmp),M=I.bitLength();while(M>this.n);var z=M<this.n?-1:I.ucmp(this.p);return z===0?(I.words[0]=0,I.length=1):z>0?I.isub(this.p):I.strip!==void 0?I.strip():I._strip(),I},R.prototype.split=function(A,I){A.iushrn(this.n,0,I)},R.prototype.imulK=function(A){return A.imul(this.k)};function U(){R.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(U,R),U.prototype.split=function(A,I){for(var M=4194303,z=Math.min(A.length,9),G=0;G<z;G++)I.words[G]=A.words[G];if(I.length=z,A.length<=9){A.words[0]=0,A.length=1;return}var te=A.words[9];for(I.words[I.length++]=te&M,G=10;G<A.length;G++){var Y=A.words[G]|0;A.words[G-10]=(Y&M)<<4|te>>>22,te=Y}te>>>=22,A.words[G-10]=te,te===0&&A.length>10?A.length-=10:A.length-=9},U.prototype.imulK=function(A){A.words[A.length]=0,A.words[A.length+1]=0,A.length+=2;for(var I=0,M=0;M<A.length;M++){var z=A.words[M]|0;I+=z*977,A.words[M]=I&67108863,I=z*64+(I/67108864|0)}return A.words[A.length-1]===0&&(A.length--,A.words[A.length-1]===0&&A.length--),A};function V(){R.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(V,R);function F(){R.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(F,R);function $(){R.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i($,R),$.prototype.imulK=function(A){for(var I=0,M=0;M<A.length;M++){var z=(A.words[M]|0)*19+I,G=z&67108863;z>>>=26,A.words[M]=G,I=z}return I!==0&&(A.words[A.length++]=I),A},s._prime=function(A){if(j[A])return j[A];var I;if(A==="k256")I=new U;else if(A==="p224")I=new V;else if(A==="p192")I=new F;else if(A==="p25519")I=new $;else throw new Error("Unknown prime "+A);return j[A]=I,I};function K(B){if(typeof B=="string"){var A=s._prime(B);this.m=A.p,this.prime=A}else r(B.gtn(1),"modulus must be greater than 1"),this.m=B,this.prime=null}K.prototype._verify1=function(A){r(A.negative===0,"red works only with positives"),r(A.red,"red works only with red numbers")},K.prototype._verify2=function(A,I){r((A.negative|I.negative)===0,"red works only with positives"),r(A.red&&A.red===I.red,"red works only with red numbers")},K.prototype.imod=function(A){return this.prime?this.prime.ireduce(A)._forceRed(this):(u(A,A.umod(this.m)._forceRed(this)),A)},K.prototype.neg=function(A){return A.isZero()?A.clone():this.m.sub(A)._forceRed(this)},K.prototype.add=function(A,I){this._verify2(A,I);var M=A.add(I);return M.cmp(this.m)>=0&&M.isub(this.m),M._forceRed(this)},K.prototype.iadd=function(A,I){this._verify2(A,I);var M=A.iadd(I);return M.cmp(this.m)>=0&&M.isub(this.m),M},K.prototype.sub=function(A,I){this._verify2(A,I);var M=A.sub(I);return M.cmpn(0)<0&&M.iadd(this.m),M._forceRed(this)},K.prototype.isub=function(A,I){this._verify2(A,I);var M=A.isub(I);return M.cmpn(0)<0&&M.iadd(this.m),M},K.prototype.shl=function(A,I){return this._verify1(A),this.imod(A.ushln(I))},K.prototype.imul=function(A,I){return this._verify2(A,I),this.imod(A.imul(I))},K.prototype.mul=function(A,I){return this._verify2(A,I),this.imod(A.mul(I))},K.prototype.isqr=function(A){return this.imul(A,A.clone())},K.prototype.sqr=function(A){return this.mul(A,A)},K.prototype.sqrt=function(A){if(A.isZero())return A.clone();var I=this.m.andln(3);if(r(I%2===1),I===3){var M=this.m.add(new s(1)).iushrn(2);return this.pow(A,M)}for(var z=this.m.subn(1),G=0;!z.isZero()&&z.andln(1)===0;)G++,z.iushrn(1);r(!z.isZero());var te=new s(1).toRed(this),Y=te.redNeg(),q=this.m.subn(1).iushrn(1),D=this.m.bitLength();for(D=new s(2*D*D).toRed(this);this.pow(D,q).cmp(Y)!==0;)D.redIAdd(Y);for(var _=this.pow(D,z),W=this.pow(A,z.addn(1).iushrn(1)),X=this.pow(A,z),re=G;X.cmp(te)!==0;){for(var ae=X,Ee=0;ae.cmp(te)!==0;Ee++)ae=ae.redSqr();r(Ee<re);var ue=this.pow(_,new s(1).iushln(re-Ee-1));W=W.redMul(ue),_=ue.redSqr(),X=X.redMul(_),re=Ee}return W},K.prototype.invm=function(A){var I=A._invmp(this.m);return I.negative!==0?(I.negative=0,this.imod(I).redNeg()):this.imod(I)},K.prototype.pow=function(A,I){if(I.isZero())return new s(1).toRed(this);if(I.cmpn(1)===0)return A.clone();var M=4,z=new Array(1<<M);z[0]=new s(1).toRed(this),z[1]=A;for(var G=2;G<z.length;G++)z[G]=this.mul(z[G-1],A);var te=z[0],Y=0,q=0,D=I.bitLength()%26;for(D===0&&(D=26),G=I.length-1;G>=0;G--){for(var _=I.words[G],W=D-1;W>=0;W--){var X=_>>W&1;if(te!==z[0]&&(te=this.sqr(te)),X===0&&Y===0){q=0;continue}Y<<=1,Y|=X,q++,!(q!==M&&(G!==0||W!==0))&&(te=this.mul(te,z[Y]),q=0,Y=0)}D=26}return te},K.prototype.convertTo=function(A){var I=A.umod(this.m);return I===A?I.clone():I},K.prototype.convertFrom=function(A){var I=A.clone();return I.red=null,I},s.mont=function(A){return new H(A)};function H(B){K.call(this,B),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(H,K),H.prototype.convertTo=function(A){return this.imod(A.ushln(this.shift))},H.prototype.convertFrom=function(A){var I=this.imod(A.mul(this.rinv));return I.red=null,I},H.prototype.imul=function(A,I){if(A.isZero()||I.isZero())return A.words[0]=0,A.length=1,A;var M=A.imul(I),z=M.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),G=M.isub(z).iushrn(this.shift),te=G;return G.cmp(this.m)>=0?te=G.isub(this.m):G.cmpn(0)<0&&(te=G.iadd(this.m)),te._forceRed(this)},H.prototype.mul=function(A,I){if(A.isZero()||I.isZero())return new s(0)._forceRed(this);var M=A.mul(I),z=M.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),G=M.isub(z).iushrn(this.shift),te=G;return G.cmp(this.m)>=0?te=G.isub(this.m):G.cmpn(0)<0&&(te=G.iadd(this.m)),te._forceRed(this)},H.prototype.invm=function(A){var I=this.imod(A._invmp(this.m).mul(this.r2));return I._forceRed(this)}})(t,Xct)})(vT)),vT.exports}var Qct=Gpe();const eZ=cs(Qct);var RA={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var tZ;function Kpe(){return tZ||(tZ=1,(function(t,e){var n=Oj(),r=n.Buffer;function i(o,a){for(var l in o)a[l]=o[l]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=n:(i(n,e),e.Buffer=s);function s(o,a,l){return r(o,a,l)}s.prototype=Object.create(r.prototype),i(r,s),s.from=function(o,a,l){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,a,l)},s.alloc=function(o,a,l){if(typeof o!="number")throw new TypeError("Argument must be a number");var c=r(o);return a!==void 0?typeof l=="string"?c.fill(a,l):c.fill(a):c.fill(0),c},s.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},s.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(o)}})(RA,RA.exports)),RA.exports}var a3,nZ;function Zct(){if(nZ)return a3;nZ=1;var t=Kpe().Buffer;function e(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var s=0;s<n.length;s++){var o=n.charAt(s),a=o.charCodeAt(0);if(r[a]!==255)throw new TypeError(o+" is ambiguous");r[a]=s}var l=n.length,c=n.charAt(0),u=Math.log(l)/Math.log(256),f=Math.log(256)/Math.log(l);function m(v){if((Array.isArray(v)||v instanceof Uint8Array)&&(v=t.from(v)),!t.isBuffer(v))throw new TypeError("Expected Buffer");if(v.length===0)return"";for(var w=0,E=0,C=0,k=v.length;C!==k&&v[C]===0;)C++,w++;for(var O=(k-C)*f+1>>>0,j=new Uint8Array(O);C!==k;){for(var R=v[C],U=0,V=O-1;(R!==0||U<E)&&V!==-1;V--,U++)R+=256*j[V]>>>0,j[V]=R%l>>>0,R=R/l>>>0;if(R!==0)throw new Error("Non-zero carry");E=U,C++}for(var F=O-E;F!==O&&j[F]===0;)F++;for(var $=c.repeat(w);F<O;++F)$+=n.charAt(j[F]);return $}function g(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return t.alloc(0);for(var w=0,E=0,C=0;v[w]===c;)E++,w++;for(var k=(v.length-w)*u+1>>>0,O=new Uint8Array(k);w<v.length;){var j=v.charCodeAt(w);if(j>255)return;var R=r[j];if(R===255)return;for(var U=0,V=k-1;(R!==0||U<C)&&V!==-1;V--,U++)R+=l*O[V]>>>0,O[V]=R%256>>>0,R=R/256>>>0;if(R!==0)throw new Error("Non-zero carry");C=U,w++}for(var F=k-C;F!==k&&O[F]===0;)F++;var $=t.allocUnsafe(E+(k-F));$.fill(0,0,E);for(var K=E;F!==k;)$[K++]=O[F++];return $}function x(v){var w=g(v);if(w)return w;throw new Error("Non-base"+l+" character")}return{encode:m,decodeUnsafe:g,decode:x}}return a3=e,a3}var l3,rZ;function eut(){if(rZ)return l3;rZ=1;var t=Zct(),e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return l3=t(e),l3}var tut=eut();const is=cs(tut),iZ=Tpe;var Xn={},c3,sZ;function nut(){if(sZ)return c3;sZ=1;var t=Kpe().Buffer;function e(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var s=0;s<n.length;s++){var o=n.charAt(s),a=o.charCodeAt(0);if(r[a]!==255)throw new TypeError(o+" is ambiguous");r[a]=s}var l=n.length,c=n.charAt(0),u=Math.log(l)/Math.log(256),f=Math.log(256)/Math.log(l);function m(v){if((Array.isArray(v)||v instanceof Uint8Array)&&(v=t.from(v)),!t.isBuffer(v))throw new TypeError("Expected Buffer");if(v.length===0)return"";for(var w=0,E=0,C=0,k=v.length;C!==k&&v[C]===0;)C++,w++;for(var O=(k-C)*f+1>>>0,j=new Uint8Array(O);C!==k;){for(var R=v[C],U=0,V=O-1;(R!==0||U<E)&&V!==-1;V--,U++)R+=256*j[V]>>>0,j[V]=R%l>>>0,R=R/l>>>0;if(R!==0)throw new Error("Non-zero carry");E=U,C++}for(var F=O-E;F!==O&&j[F]===0;)F++;for(var $=c.repeat(w);F<O;++F)$+=n.charAt(j[F]);return $}function g(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return t.alloc(0);for(var w=0,E=0,C=0;v[w]===c;)E++,w++;for(var k=(v.length-w)*u+1>>>0,O=new Uint8Array(k);w<v.length;){var j=v.charCodeAt(w);if(j>255)return;var R=r[j];if(R===255)return;for(var U=0,V=k-1;(R!==0||U<C)&&V!==-1;V--,U++)R+=l*O[V]>>>0,O[V]=R%256>>>0,R=R/256>>>0;if(R!==0)throw new Error("Non-zero carry");C=U,w++}for(var F=k-C;F!==k&&O[F]===0;)F++;var $=t.allocUnsafe(E+(k-F));$.fill(0,0,E);for(var K=E;F!==k;)$[K++]=O[F++];return $}function x(v){var w=g(v);if(w)return w;throw new Error("Non-base"+l+" character")}return{encode:m,decodeUnsafe:g,decode:x}}return c3=e,c3}var u3,oZ;function rut(){if(oZ)return u3;oZ=1;var t=nut(),e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return u3=t(e),u3}function Bu(t,e,n){return e<=t&&t<=n}function jN(t){if(t===void 0)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}function iut(t){for(var e=String(t),n=e.length,r=0,i=[];r<n;){var s=e.charCodeAt(r);if(s<55296||s>57343)i.push(s);else if(56320<=s&&s<=57343)i.push(65533);else if(55296<=s&&s<=56319)if(r===n-1)i.push(65533);else{var o=t.charCodeAt(r+1);if(56320<=o&&o<=57343){var a=s&1023,l=o&1023;i.push(65536+(a<<10)+l),r+=1}else i.push(65533)}r+=1}return i}function sut(t){for(var e="",n=0;n<t.length;++n){var r=t[n];r<=65535?e+=String.fromCharCode(r):(r-=65536,e+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return e}var vC=-1;function Mj(t){this.tokens=[].slice.call(t)}Mj.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():vC},prepend:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(t)},push:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.push(e.shift());else this.tokens.push(t)}};var yx=-1;function d3(t,e){if(t)throw TypeError("Decoder error");return e||65533}var bC="utf-8";function wC(t,e){if(!(this instanceof wC))return new wC(t,e);if(t=t!==void 0?String(t).toLowerCase():bC,t!==bC)throw new Error("Encoding not supported. Only utf-8 is supported");e=jN(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}wC.prototype={decode:function(e,n){var r;typeof e=="object"&&e instanceof ArrayBuffer?r=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):r=new Uint8Array(0),n=jN(n),this._streaming||(this._decoder=new out({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!n.stream;for(var i=new Mj(r),s=[],o;!i.endOfStream()&&(o=this._decoder.handler(i,i.read()),o!==yx);)o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o));if(!this._streaming){do{if(o=this._decoder.handler(i,i.read()),o===yx)break;o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o))}while(!i.endOfStream());this._decoder=null}return s.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(s[0]===65279?(this._BOMseen=!0,s.shift()):this._BOMseen=!0),sut(s)}};function EC(t,e){if(!(this instanceof EC))return new EC(t,e);if(t=t!==void 0?String(t).toLowerCase():bC,t!==bC)throw new Error("Encoding not supported. Only utf-8 is supported");e=jN(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}EC.prototype={encode:function(e,n){e=e?String(e):"",n=jN(n),this._streaming||(this._encoder=new aut(this._options)),this._streaming=!!n.stream;for(var r=[],i=new Mj(iut(e)),s;!i.endOfStream()&&(s=this._encoder.handler(i,i.read()),s!==yx);)Array.isArray(s)?r.push.apply(r,s):r.push(s);if(!this._streaming){for(;s=this._encoder.handler(i,i.read()),s!==yx;)Array.isArray(s)?r.push.apply(r,s):r.push(s);this._encoder=null}return new Uint8Array(r)}};function out(t){var e=t.fatal,n=0,r=0,i=0,s=128,o=191;this.handler=function(a,l){if(l===vC&&i!==0)return i=0,d3(e);if(l===vC)return yx;if(i===0){if(Bu(l,0,127))return l;if(Bu(l,194,223))i=1,n=l-192;else if(Bu(l,224,239))l===224&&(s=160),l===237&&(o=159),i=2,n=l-224;else if(Bu(l,240,244))l===240&&(s=144),l===244&&(o=143),i=3,n=l-240;else return d3(e);return n=n<<6*i,null}if(!Bu(l,s,o))return n=i=r=0,s=128,o=191,a.prepend(l),d3(e);if(s=128,o=191,r+=1,n+=l-128<<6*(i-r),r!==i)return null;var c=n;return n=i=r=0,c}}function aut(t){t.fatal,this.handler=function(e,n){if(n===vC)return yx;if(Bu(n,0,127))return n;var r,i;Bu(n,128,2047)?(r=1,i=192):Bu(n,2048,65535)?(r=2,i=224):Bu(n,65536,1114111)&&(r=3,i=240);for(var s=[(n>>6*r)+i];r>0;){var o=n>>6*(r-1);s.push(128|o&63),r-=1}return s}}const lut=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:wC,TextEncoder:EC},Symbol.toStringTag,{value:"Module"})),cut=KZ(lut);var aZ;function uut(){if(aZ)return Xn;aZ=1;var t=Xn&&Xn.__createBinding||(Object.create?(function(F,$,K,H){H===void 0&&(H=K),Object.defineProperty(F,H,{enumerable:!0,get:function(){return $[K]}})}):(function(F,$,K,H){H===void 0&&(H=K),F[H]=$[K]})),e=Xn&&Xn.__setModuleDefault||(Object.create?(function(F,$){Object.defineProperty(F,"default",{enumerable:!0,value:$})}):function(F,$){F.default=$}),n=Xn&&Xn.__decorate||function(F,$,K,H){var B=arguments.length,A=B<3?$:H===null?H=Object.getOwnPropertyDescriptor($,K):H,I;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(F,$,K,H);else for(var M=F.length-1;M>=0;M--)(I=F[M])&&(A=(B<3?I(A):B>3?I($,K,A):I($,K))||A);return B>3&&A&&Object.defineProperty($,K,A),A},r=Xn&&Xn.__importStar||function(F){if(F&&F.__esModule)return F;var $={};if(F!=null)for(var K in F)K!=="default"&&Object.hasOwnProperty.call(F,K)&&t($,F,K);return e($,F),$},i=Xn&&Xn.__importDefault||function(F){return F&&F.__esModule?F:{default:F}};Object.defineProperty(Xn,"__esModule",{value:!0}),Xn.deserializeUnchecked=Xn.deserialize=Xn.serialize=Xn.BinaryReader=Xn.BinaryWriter=Xn.BorshError=Xn.baseDecode=Xn.baseEncode=void 0;const s=i(Gpe()),o=i(rut()),a=r(cut),l=typeof TextDecoder!="function"?a.TextDecoder:TextDecoder,c=new l("utf-8",{fatal:!0});function u(F){return typeof F=="string"&&(F=ln.from(F,"utf8")),o.default.encode(ln.from(F))}Xn.baseEncode=u;function f(F){return ln.from(o.default.decode(F))}Xn.baseDecode=f;const m=1024;class g extends Error{constructor($){super($),this.fieldPath=[],this.originalMessage=$}addToFieldPath($){this.fieldPath.splice(0,0,$),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}Xn.BorshError=g;class x{constructor(){this.buf=ln.alloc(m),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=ln.concat([this.buf,ln.alloc(m)]))}writeU8($){this.maybeResize(),this.buf.writeUInt8($,this.length),this.length+=1}writeU16($){this.maybeResize(),this.buf.writeUInt16LE($,this.length),this.length+=2}writeU32($){this.maybeResize(),this.buf.writeUInt32LE($,this.length),this.length+=4}writeU64($){this.maybeResize(),this.writeBuffer(ln.from(new s.default($).toArray("le",8)))}writeU128($){this.maybeResize(),this.writeBuffer(ln.from(new s.default($).toArray("le",16)))}writeU256($){this.maybeResize(),this.writeBuffer(ln.from(new s.default($).toArray("le",32)))}writeU512($){this.maybeResize(),this.writeBuffer(ln.from(new s.default($).toArray("le",64)))}writeBuffer($){this.buf=ln.concat([ln.from(this.buf.subarray(0,this.length)),$,ln.alloc(m)]),this.length+=$.length}writeString($){this.maybeResize();const K=ln.from($,"utf8");this.writeU32(K.length),this.writeBuffer(K)}writeFixedArray($){this.writeBuffer(ln.from($))}writeArray($,K){this.maybeResize(),this.writeU32($.length);for(const H of $)this.maybeResize(),K(H)}toArray(){return this.buf.subarray(0,this.length)}}Xn.BinaryWriter=x;function v(F,$,K){const H=K.value;K.value=function(...B){try{return H.apply(this,B)}catch(A){if(A instanceof RangeError){const I=A.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(I)>=0)throw new g("Reached the end of buffer when deserializing")}throw A}}}class w{constructor($){this.buf=$,this.offset=0}readU8(){const $=this.buf.readUInt8(this.offset);return this.offset+=1,$}readU16(){const $=this.buf.readUInt16LE(this.offset);return this.offset+=2,$}readU32(){const $=this.buf.readUInt32LE(this.offset);return this.offset+=4,$}readU64(){const $=this.readBuffer(8);return new s.default($,"le")}readU128(){const $=this.readBuffer(16);return new s.default($,"le")}readU256(){const $=this.readBuffer(32);return new s.default($,"le")}readU512(){const $=this.readBuffer(64);return new s.default($,"le")}readBuffer($){if(this.offset+$>this.buf.length)throw new g(`Expected buffer length ${$} isn't within bounds`);const K=this.buf.slice(this.offset,this.offset+$);return this.offset+=$,K}readString(){const $=this.readU32(),K=this.readBuffer($);try{return c.decode(K)}catch(H){throw new g(`Error decoding UTF-8 string: ${H}`)}}readFixedArray($){return new Uint8Array(this.readBuffer($))}readArray($){const K=this.readU32(),H=Array();for(let B=0;B<K;++B)H.push($());return H}}n([v],w.prototype,"readU8",null),n([v],w.prototype,"readU16",null),n([v],w.prototype,"readU32",null),n([v],w.prototype,"readU64",null),n([v],w.prototype,"readU128",null),n([v],w.prototype,"readU256",null),n([v],w.prototype,"readU512",null),n([v],w.prototype,"readString",null),n([v],w.prototype,"readFixedArray",null),n([v],w.prototype,"readArray",null),Xn.BinaryReader=w;function E(F){return F.charAt(0).toUpperCase()+F.slice(1)}function C(F,$,K,H,B){try{if(typeof H=="string")B[`write${E(H)}`](K);else if(H instanceof Array)if(typeof H[0]=="number"){if(K.length!==H[0])throw new g(`Expecting byte array of length ${H[0]}, but got ${K.length} bytes`);B.writeFixedArray(K)}else if(H.length===2&&typeof H[1]=="number"){if(K.length!==H[1])throw new g(`Expecting byte array of length ${H[1]}, but got ${K.length} bytes`);for(let A=0;A<H[1];A++)C(F,null,K[A],H[0],B)}else B.writeArray(K,A=>{C(F,$,A,H[0],B)});else if(H.kind!==void 0)switch(H.kind){case"option":{K==null?B.writeU8(0):(B.writeU8(1),C(F,$,K,H.type,B));break}case"map":{B.writeU32(K.size),K.forEach((A,I)=>{C(F,$,I,H.key,B),C(F,$,A,H.value,B)});break}default:throw new g(`FieldType ${H} unrecognized`)}else k(F,K,B)}catch(A){throw A instanceof g&&A.addToFieldPath($),A}}function k(F,$,K){if(typeof $.borshSerialize=="function"){$.borshSerialize(K);return}const H=F.get($.constructor);if(!H)throw new g(`Class ${$.constructor.name} is missing in schema`);if(H.kind==="struct")H.fields.map(([B,A])=>{C(F,B,$[B],A,K)});else if(H.kind==="enum"){const B=$[H.field];for(let A=0;A<H.values.length;++A){const[I,M]=H.values[A];if(I===B){K.writeU8(A),C(F,I,$[I],M,K);break}}}else throw new g(`Unexpected schema kind: ${H.kind} for ${$.constructor.name}`)}function O(F,$,K=x){const H=new K;return k(F,$,H),H.toArray()}Xn.serialize=O;function j(F,$,K,H){try{if(typeof K=="string")return H[`read${E(K)}`]();if(K instanceof Array){if(typeof K[0]=="number")return H.readFixedArray(K[0]);if(typeof K[1]=="number"){const B=[];for(let A=0;A<K[1];A++)B.push(j(F,null,K[0],H));return B}else return H.readArray(()=>j(F,$,K[0],H))}if(K.kind==="option")return H.readU8()?j(F,$,K.type,H):void 0;if(K.kind==="map"){let B=new Map;const A=H.readU32();for(let I=0;I<A;I++){const M=j(F,$,K.key,H),z=j(F,$,K.value,H);B.set(M,z)}return B}return R(F,K,H)}catch(B){throw B instanceof g&&B.addToFieldPath($),B}}function R(F,$,K){if(typeof $.borshDeserialize=="function")return $.borshDeserialize(K);const H=F.get($);if(!H)throw new g(`Class ${$.name} is missing in schema`);if(H.kind==="struct"){const B={};for(const[A,I]of F.get($).fields)B[A]=j(F,A,I,K);return new $(B)}if(H.kind==="enum"){const B=K.readU8();if(B>=H.values.length)throw new g(`Enum index: ${B} is out of range`);const[A,I]=H.values[B],M=j(F,A,I,K);return new $({[A]:M})}throw new g(`Unexpected schema kind: ${H.kind} for ${$.constructor.name}`)}function U(F,$,K,H=w){const B=new H(K),A=R(F,$,B);if(B.offset<K.length)throw new g(`Unexpected ${K.length-B.offset} bytes after deserialized data`);return A}Xn.deserialize=U;function V(F,$,K,H=w){const B=new H(K);return R(F,$,B)}return Xn.deserializeUnchecked=V,Xn}var f3=uut(),Fe={},lZ;function dut(){if(lZ)return Fe;lZ=1,Object.defineProperty(Fe,"__esModule",{value:!0}),Fe.s16=Fe.s8=Fe.nu64be=Fe.u48be=Fe.u40be=Fe.u32be=Fe.u24be=Fe.u16be=Fe.nu64=Fe.u48=Fe.u40=Fe.u32=Fe.u24=Fe.u16=Fe.u8=Fe.offset=Fe.greedy=Fe.Constant=Fe.UTF8=Fe.CString=Fe.Blob=Fe.Boolean=Fe.BitField=Fe.BitStructure=Fe.VariantLayout=Fe.Union=Fe.UnionLayoutDiscriminator=Fe.UnionDiscriminator=Fe.Structure=Fe.Sequence=Fe.DoubleBE=Fe.Double=Fe.FloatBE=Fe.Float=Fe.NearInt64BE=Fe.NearInt64=Fe.NearUInt64BE=Fe.NearUInt64=Fe.IntBE=Fe.Int=Fe.UIntBE=Fe.UInt=Fe.OffsetLayout=Fe.GreedyCount=Fe.ExternalLayout=Fe.bindConstructorLayout=Fe.nameWithProperty=Fe.Layout=Fe.uint8ArrayToBuffer=Fe.checkUint8Array=void 0,Fe.constant=Fe.utf8=Fe.cstr=Fe.blob=Fe.unionLayoutDiscriminator=Fe.union=Fe.seq=Fe.bits=Fe.struct=Fe.f64be=Fe.f64=Fe.f32be=Fe.f32=Fe.ns64be=Fe.s48be=Fe.s40be=Fe.s32be=Fe.s24be=Fe.s16be=Fe.ns64=Fe.s48=Fe.s40=Fe.s32=Fe.s24=void 0;const t=Oj();function e(D){if(!(D instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}Fe.checkUint8Array=e;function n(D){return e(D),t.Buffer.from(D.buffer,D.byteOffset,D.length)}Fe.uint8ArrayToBuffer=n;let r=class{constructor(_,W){if(!Number.isInteger(_))throw new TypeError("span must be an integer");this.span=_,this.property=W}makeDestinationObject(){return{}}getSpan(_,W){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(_){const W=Object.create(this.constructor.prototype);return Object.assign(W,this),W.property=_,W}fromArray(_){}};Fe.Layout=r;function i(D,_){return _.property?D+"["+_.property+"]":D}Fe.nameWithProperty=i;function s(D,_){if(typeof D!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(D,"layout_"))throw new Error("Class is already bound to a layout");if(!(_&&_ instanceof r))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(_,"boundConstructor_"))throw new Error("layout is already bound to a constructor");D.layout_=_,_.boundConstructor_=D,_.makeDestinationObject=(()=>new D),Object.defineProperty(D.prototype,"encode",{value(W,X){return _.encode(this,W,X)},writable:!0}),Object.defineProperty(D,"decode",{value(W,X){return _.decode(W,X)},writable:!0})}Fe.bindConstructorLayout=s;class o extends r{isCount(){throw new Error("ExternalLayout is abstract")}}Fe.ExternalLayout=o;class a extends o{constructor(_=1,W){if(!Number.isInteger(_)||0>=_)throw new TypeError("elementSpan must be a (positive) integer");super(-1,W),this.elementSpan=_}isCount(){return!0}decode(_,W=0){e(_);const X=_.length-W;return Math.floor(X/this.elementSpan)}encode(_,W,X){return 0}}Fe.GreedyCount=a;class l extends o{constructor(_,W=0,X){if(!(_ instanceof r))throw new TypeError("layout must be a Layout");if(!Number.isInteger(W))throw new TypeError("offset must be integer or undefined");super(_.span,X||_.property),this.layout=_,this.offset=W}isCount(){return this.layout instanceof c||this.layout instanceof u}decode(_,W=0){return this.layout.decode(_,W+this.offset)}encode(_,W,X=0){return this.layout.encode(_,W,X+this.offset)}}Fe.OffsetLayout=l;class c extends r{constructor(_,W){if(super(_,W),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(_,W=0){return n(_).readUIntLE(W,this.span)}encode(_,W,X=0){return n(W).writeUIntLE(_,X,this.span),this.span}}Fe.UInt=c;class u extends r{constructor(_,W){if(super(_,W),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(_,W=0){return n(_).readUIntBE(W,this.span)}encode(_,W,X=0){return n(W).writeUIntBE(_,X,this.span),this.span}}Fe.UIntBE=u;class f extends r{constructor(_,W){if(super(_,W),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(_,W=0){return n(_).readIntLE(W,this.span)}encode(_,W,X=0){return n(W).writeIntLE(_,X,this.span),this.span}}Fe.Int=f;class m extends r{constructor(_,W){if(super(_,W),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(_,W=0){return n(_).readIntBE(W,this.span)}encode(_,W,X=0){return n(W).writeIntBE(_,X,this.span),this.span}}Fe.IntBE=m;const g=Math.pow(2,32);function x(D){const _=Math.floor(D/g),W=D-_*g;return{hi32:_,lo32:W}}function v(D,_){return D*g+_}class w extends r{constructor(_){super(8,_)}decode(_,W=0){const X=n(_),re=X.readUInt32LE(W),ae=X.readUInt32LE(W+4);return v(ae,re)}encode(_,W,X=0){const re=x(_),ae=n(W);return ae.writeUInt32LE(re.lo32,X),ae.writeUInt32LE(re.hi32,X+4),8}}Fe.NearUInt64=w;class E extends r{constructor(_){super(8,_)}decode(_,W=0){const X=n(_),re=X.readUInt32BE(W),ae=X.readUInt32BE(W+4);return v(re,ae)}encode(_,W,X=0){const re=x(_),ae=n(W);return ae.writeUInt32BE(re.hi32,X),ae.writeUInt32BE(re.lo32,X+4),8}}Fe.NearUInt64BE=E;class C extends r{constructor(_){super(8,_)}decode(_,W=0){const X=n(_),re=X.readUInt32LE(W),ae=X.readInt32LE(W+4);return v(ae,re)}encode(_,W,X=0){const re=x(_),ae=n(W);return ae.writeUInt32LE(re.lo32,X),ae.writeInt32LE(re.hi32,X+4),8}}Fe.NearInt64=C;class k extends r{constructor(_){super(8,_)}decode(_,W=0){const X=n(_),re=X.readInt32BE(W),ae=X.readUInt32BE(W+4);return v(re,ae)}encode(_,W,X=0){const re=x(_),ae=n(W);return ae.writeInt32BE(re.hi32,X),ae.writeUInt32BE(re.lo32,X+4),8}}Fe.NearInt64BE=k;class O extends r{constructor(_){super(4,_)}decode(_,W=0){return n(_).readFloatLE(W)}encode(_,W,X=0){return n(W).writeFloatLE(_,X),4}}Fe.Float=O;class j extends r{constructor(_){super(4,_)}decode(_,W=0){return n(_).readFloatBE(W)}encode(_,W,X=0){return n(W).writeFloatBE(_,X),4}}Fe.FloatBE=j;class R extends r{constructor(_){super(8,_)}decode(_,W=0){return n(_).readDoubleLE(W)}encode(_,W,X=0){return n(W).writeDoubleLE(_,X),8}}Fe.Double=R;class U extends r{constructor(_){super(8,_)}decode(_,W=0){return n(_).readDoubleBE(W)}encode(_,W,X=0){return n(W).writeDoubleBE(_,X),8}}Fe.DoubleBE=U;class V extends r{constructor(_,W,X){if(!(_ instanceof r))throw new TypeError("elementLayout must be a Layout");if(!(W instanceof o&&W.isCount()||Number.isInteger(W)&&0<=W))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let re=-1;!(W instanceof o)&&0<_.span&&(re=W*_.span),super(re,X),this.elementLayout=_,this.count=W}getSpan(_,W=0){if(0<=this.span)return this.span;let X=0,re=this.count;if(re instanceof o&&(re=re.decode(_,W)),0<this.elementLayout.span)X=re*this.elementLayout.span;else{let ae=0;for(;ae<re;)X+=this.elementLayout.getSpan(_,W+X),++ae}return X}decode(_,W=0){const X=[];let re=0,ae=this.count;for(ae instanceof o&&(ae=ae.decode(_,W));re<ae;)X.push(this.elementLayout.decode(_,W)),W+=this.elementLayout.getSpan(_,W),re+=1;return X}encode(_,W,X=0){const re=this.elementLayout,ae=_.reduce((Ee,ue)=>Ee+re.encode(ue,W,X+Ee),0);return this.count instanceof o&&this.count.encode(_.length,W,X),ae}}Fe.Sequence=V;class F extends r{constructor(_,W,X){if(!(Array.isArray(_)&&_.reduce((ae,Ee)=>ae&&Ee instanceof r,!0)))throw new TypeError("fields must be array of Layout instances");typeof W=="boolean"&&X===void 0&&(X=W,W=void 0);for(const ae of _)if(0>ae.span&&ae.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let re=-1;try{re=_.reduce((ae,Ee)=>ae+Ee.getSpan(),0)}catch{}super(re,W),this.fields=_,this.decodePrefixes=!!X}getSpan(_,W=0){if(0<=this.span)return this.span;let X=0;try{X=this.fields.reduce((re,ae)=>{const Ee=ae.getSpan(_,W);return W+=Ee,re+Ee},0)}catch{throw new RangeError("indeterminate span")}return X}decode(_,W=0){e(_);const X=this.makeDestinationObject();for(const re of this.fields)if(re.property!==void 0&&(X[re.property]=re.decode(_,W)),W+=re.getSpan(_,W),this.decodePrefixes&&_.length===W)break;return X}encode(_,W,X=0){const re=X;let ae=0,Ee=0;for(const ue of this.fields){let me=ue.span;if(Ee=0<me?me:0,ue.property!==void 0){const ce=_[ue.property];ce!==void 0&&(Ee=ue.encode(ce,W,X),0>me&&(me=ue.getSpan(W,X)))}ae=X,X+=me}return ae+Ee-re}fromArray(_){const W=this.makeDestinationObject();for(const X of this.fields)X.property!==void 0&&0<_.length&&(W[X.property]=_.shift());return W}layoutFor(_){if(typeof _!="string")throw new TypeError("property must be string");for(const W of this.fields)if(W.property===_)return W}offsetOf(_){if(typeof _!="string")throw new TypeError("property must be string");let W=0;for(const X of this.fields){if(X.property===_)return W;0>X.span?W=-1:0<=W&&(W+=X.span)}}}Fe.Structure=F;class ${constructor(_){this.property=_}decode(_,W){throw new Error("UnionDiscriminator is abstract")}encode(_,W,X){throw new Error("UnionDiscriminator is abstract")}}Fe.UnionDiscriminator=$;class K extends ${constructor(_,W){if(!(_ instanceof o&&_.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(W||_.property||"variant"),this.layout=_}decode(_,W){return this.layout.decode(_,W)}encode(_,W,X){return this.layout.encode(_,W,X)}}Fe.UnionLayoutDiscriminator=K;class H extends r{constructor(_,W,X){let re;if(_ instanceof c||_ instanceof u)re=new K(new l(_));else if(_ instanceof o&&_.isCount())re=new K(_);else if(_ instanceof $)re=_;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(W===void 0&&(W=null),!(W===null||W instanceof r))throw new TypeError("defaultLayout must be null or a Layout");if(W!==null){if(0>W.span)throw new Error("defaultLayout must have constant span");W.property===void 0&&(W=W.replicate("content"))}let ae=-1;W&&(ae=W.span,0<=ae&&(_ instanceof c||_ instanceof u)&&(ae+=re.layout.span)),super(ae,X),this.discriminator=re,this.usesPrefixDiscriminator=_ instanceof c||_ instanceof u,this.defaultLayout=W,this.registry={};let Ee=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(ue){return Ee(ue)},this.configGetSourceVariant=function(ue){Ee=ue.bind(this)}}getSpan(_,W=0){if(0<=this.span)return this.span;const X=this.getVariant(_,W);if(!X)throw new Error("unable to determine span for unrecognized variant");return X.getSpan(_,W)}defaultGetSourceVariant(_){if(Object.prototype.hasOwnProperty.call(_,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(_,this.defaultLayout.property))return;const W=this.registry[_[this.discriminator.property]];if(W&&(!W.layout||W.property&&Object.prototype.hasOwnProperty.call(_,W.property)))return W}else for(const W in this.registry){const X=this.registry[W];if(X.property&&Object.prototype.hasOwnProperty.call(_,X.property))return X}throw new Error("unable to infer src variant")}decode(_,W=0){let X;const re=this.discriminator,ae=re.decode(_,W),Ee=this.registry[ae];if(Ee===void 0){const ue=this.defaultLayout;let me=0;this.usesPrefixDiscriminator&&(me=re.layout.span),X=this.makeDestinationObject(),X[re.property]=ae,X[ue.property]=ue.decode(_,W+me)}else X=Ee.decode(_,W);return X}encode(_,W,X=0){const re=this.getSourceVariant(_);if(re===void 0){const ae=this.discriminator,Ee=this.defaultLayout;let ue=0;return this.usesPrefixDiscriminator&&(ue=ae.layout.span),ae.encode(_[ae.property],W,X),ue+Ee.encode(_[Ee.property],W,X+ue)}return re.encode(_,W,X)}addVariant(_,W,X){const re=new B(this,_,W,X);return this.registry[_]=re,re}getVariant(_,W=0){let X;return _ instanceof Uint8Array?X=this.discriminator.decode(_,W):X=_,this.registry[X]}}Fe.Union=H;class B extends r{constructor(_,W,X,re){if(!(_ instanceof H))throw new TypeError("union must be a Union");if(!Number.isInteger(W)||0>W)throw new TypeError("variant must be a (non-negative) integer");if(typeof X=="string"&&re===void 0&&(re=X,X=null),X){if(!(X instanceof r))throw new TypeError("layout must be a Layout");if(_.defaultLayout!==null&&0<=X.span&&X.span>_.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof re!="string")throw new TypeError("variant must have a String property")}let ae=_.span;0>_.span&&(ae=X?X.span:0,0<=ae&&_.usesPrefixDiscriminator&&(ae+=_.discriminator.layout.span)),super(ae,re),this.union=_,this.variant=W,this.layout=X||null}getSpan(_,W=0){if(0<=this.span)return this.span;let X=0;this.union.usesPrefixDiscriminator&&(X=this.union.discriminator.layout.span);let re=0;return this.layout&&(re=this.layout.getSpan(_,W+X)),X+re}decode(_,W=0){const X=this.makeDestinationObject();if(this!==this.union.getVariant(_,W))throw new Error("variant mismatch");let re=0;return this.union.usesPrefixDiscriminator&&(re=this.union.discriminator.layout.span),this.layout?X[this.property]=this.layout.decode(_,W+re):this.property?X[this.property]=!0:this.union.usesPrefixDiscriminator&&(X[this.union.discriminator.property]=this.variant),X}encode(_,W,X=0){let re=0;if(this.union.usesPrefixDiscriminator&&(re=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(_,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,W,X);let ae=re;if(this.layout&&(this.layout.encode(_[this.property],W,X+re),ae+=this.layout.getSpan(W,X+re),0<=this.union.span&&ae>this.union.span))throw new Error("encoded variant overruns containing union");return ae}fromArray(_){if(this.layout)return this.layout.fromArray(_)}}Fe.VariantLayout=B;function A(D){return 0>D&&(D+=4294967296),D}class I extends r{constructor(_,W,X){if(!(_ instanceof c||_ instanceof u))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof W=="string"&&X===void 0&&(X=W,W=!1),4<_.span)throw new RangeError("word cannot exceed 32 bits");super(_.span,X),this.word=_,this.msb=!!W,this.fields=[];let re=0;this._packedSetValue=function(ae){return re=A(ae),this},this._packedGetValue=function(){return re}}decode(_,W=0){const X=this.makeDestinationObject(),re=this.word.decode(_,W);this._packedSetValue(re);for(const ae of this.fields)ae.property!==void 0&&(X[ae.property]=ae.decode(_));return X}encode(_,W,X=0){const re=this.word.decode(W,X);this._packedSetValue(re);for(const ae of this.fields)if(ae.property!==void 0){const Ee=_[ae.property];Ee!==void 0&&ae.encode(Ee)}return this.word.encode(this._packedGetValue(),W,X)}addField(_,W){const X=new M(this,_,W);return this.fields.push(X),X}addBoolean(_){const W=new z(this,_);return this.fields.push(W),W}fieldFor(_){if(typeof _!="string")throw new TypeError("property must be string");for(const W of this.fields)if(W.property===_)return W}}Fe.BitStructure=I;class M{constructor(_,W,X){if(!(_ instanceof I))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(W)||0>=W)throw new TypeError("bits must be positive integer");const re=8*_.span,ae=_.fields.reduce((Ee,ue)=>Ee+ue.bits,0);if(W+ae>re)throw new Error("bits too long for span remainder ("+(re-ae)+" of "+re+" remain)");this.container=_,this.bits=W,this.valueMask=(1<<W)-1,W===32&&(this.valueMask=4294967295),this.start=ae,this.container.msb&&(this.start=re-ae-W),this.wordMask=A(this.valueMask<<this.start),this.property=X}decode(_,W){const X=this.container._packedGetValue();return A(X&this.wordMask)>>>this.start}encode(_){if(typeof _!="number"||!Number.isInteger(_)||_!==A(_&this.valueMask))throw new TypeError(i("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const W=this.container._packedGetValue(),X=A(_<<this.start);this.container._packedSetValue(A(W&~this.wordMask)|X)}}Fe.BitField=M;class z extends M{constructor(_,W){super(_,1,W)}decode(_,W){return!!super.decode(_,W)}encode(_){typeof _=="boolean"&&(_=+_),super.encode(_)}}Fe.Boolean=z;class G extends r{constructor(_,W){if(!(_ instanceof o&&_.isCount()||Number.isInteger(_)&&0<=_))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let X=-1;_ instanceof o||(X=_),super(X,W),this.length=_}getSpan(_,W){let X=this.span;return 0>X&&(X=this.length.decode(_,W)),X}decode(_,W=0){let X=this.span;return 0>X&&(X=this.length.decode(_,W)),n(_).slice(W,W+X)}encode(_,W,X){let re=this.length;if(this.length instanceof o&&(re=_.length),!(_ instanceof Uint8Array&&re===_.length))throw new TypeError(i("Blob.encode",this)+" requires (length "+re+") Uint8Array as src");if(X+re>W.length)throw new RangeError("encoding overruns Uint8Array");const ae=n(_);return n(W).write(ae.toString("hex"),X,re,"hex"),this.length instanceof o&&this.length.encode(re,W,X),re}}Fe.Blob=G;class te extends r{constructor(_){super(-1,_)}getSpan(_,W=0){e(_);let X=W;for(;X<_.length&&_[X]!==0;)X+=1;return 1+X-W}decode(_,W=0){const X=this.getSpan(_,W);return n(_).slice(W,W+X-1).toString("utf-8")}encode(_,W,X=0){typeof _!="string"&&(_=String(_));const re=t.Buffer.from(_,"utf8"),ae=re.length;if(X+ae>W.length)throw new RangeError("encoding overruns Buffer");const Ee=n(W);return re.copy(Ee,X),Ee[X+ae]=0,ae+1}}Fe.CString=te;class Y extends r{constructor(_,W){if(typeof _=="string"&&W===void 0&&(W=_,_=void 0),_===void 0)_=-1;else if(!Number.isInteger(_))throw new TypeError("maxSpan must be an integer");super(-1,W),this.maxSpan=_}getSpan(_,W=0){return e(_),_.length-W}decode(_,W=0){const X=this.getSpan(_,W);if(0<=this.maxSpan&&this.maxSpan<X)throw new RangeError("text length exceeds maxSpan");return n(_).slice(W,W+X).toString("utf-8")}encode(_,W,X=0){typeof _!="string"&&(_=String(_));const re=t.Buffer.from(_,"utf8"),ae=re.length;if(0<=this.maxSpan&&this.maxSpan<ae)throw new RangeError("text length exceeds maxSpan");if(X+ae>W.length)throw new RangeError("encoding overruns Buffer");return re.copy(n(W),X),ae}}Fe.UTF8=Y;class q extends r{constructor(_,W){super(0,W),this.value=_}decode(_,W){return this.value}encode(_,W,X){return 0}}return Fe.Constant=q,Fe.greedy=((D,_)=>new a(D,_)),Fe.offset=((D,_,W)=>new l(D,_,W)),Fe.u8=(D=>new c(1,D)),Fe.u16=(D=>new c(2,D)),Fe.u24=(D=>new c(3,D)),Fe.u32=(D=>new c(4,D)),Fe.u40=(D=>new c(5,D)),Fe.u48=(D=>new c(6,D)),Fe.nu64=(D=>new w(D)),Fe.u16be=(D=>new u(2,D)),Fe.u24be=(D=>new u(3,D)),Fe.u32be=(D=>new u(4,D)),Fe.u40be=(D=>new u(5,D)),Fe.u48be=(D=>new u(6,D)),Fe.nu64be=(D=>new E(D)),Fe.s8=(D=>new f(1,D)),Fe.s16=(D=>new f(2,D)),Fe.s24=(D=>new f(3,D)),Fe.s32=(D=>new f(4,D)),Fe.s40=(D=>new f(5,D)),Fe.s48=(D=>new f(6,D)),Fe.ns64=(D=>new C(D)),Fe.s16be=(D=>new m(2,D)),Fe.s24be=(D=>new m(3,D)),Fe.s32be=(D=>new m(4,D)),Fe.s40be=(D=>new m(5,D)),Fe.s48be=(D=>new m(6,D)),Fe.ns64be=(D=>new k(D)),Fe.f32=(D=>new O(D)),Fe.f32be=(D=>new j(D)),Fe.f64=(D=>new R(D)),Fe.f64be=(D=>new U(D)),Fe.struct=((D,_,W)=>new F(D,_,W)),Fe.bits=((D,_,W)=>new I(D,_,W)),Fe.seq=((D,_,W)=>new V(D,_,W)),Fe.union=((D,_,W)=>new H(D,_,W)),Fe.unionLayoutDiscriminator=((D,_)=>new K(D,_)),Fe.blob=((D,_)=>new G(D,_)),Fe.cstr=(D=>new te(D)),Fe.utf8=((D,_)=>new Y(D,_)),Fe.constant=((D,_)=>new q(D,_)),Fe}var ve=dut(),fut=8078e3,hut=8078001,put=8078004,mut=8078005,gut=8078006,yut=8078011;function Wpe(t){return Array.isArray(t)?"%5B"+t.map(Wpe).join("%2C%20")+"%5D":typeof t=="bigint"?`${t}n`:encodeURIComponent(String(t!=null&&Object.getPrototypeOf(t)===null?{...t}:t))}function xut([t,e]){return`${t}=${Wpe(e)}`}function vut(t){const e=Object.entries(t).map(xut).join("&");return btoa(e)}function but(t,e={}){{let n=`Solana error #${t}; Decode this error by running \`npx @solana/errors decode -- ${t}`;return Object.keys(e).length&&(n+=` '${vut(e)}'`),`${n}\``}}var Xg=class extends Error{constructor(...[e,n]){let r,i;if(n){const{cause:o,...a}=n;o&&(i={cause:o}),Object.keys(a).length>0&&(r=a)}const s=but(e,r);super(s,i);Se(this,"cause",this.cause);Se(this,"context");this.context={__code:e,...r},this.name="SolanaError"}};function wut(t,e){return"fixedSize"in e?e.fixedSize:e.getSizeFromValue(t)}function Eut(t){return Object.freeze({...t,encode:e=>{const n=new Uint8Array(wut(e,t));return t.write(e,n,0),n}})}function Sut(t){return Object.freeze({...t,decode:(e,n=0)=>t.read(e,n)[0]})}function X0(t){return"fixedSize"in t&&typeof t.fixedSize=="number"}function Aut(t,e){if(X0(t)!==X0(e))throw new Xg(put);if(X0(t)&&X0(e)&&t.fixedSize!==e.fixedSize)throw new Xg(mut,{decoderFixedSize:e.fixedSize,encoderFixedSize:t.fixedSize});if(!X0(t)&&!X0(e)&&t.maxSize!==e.maxSize)throw new Xg(gut,{decoderMaxSize:e.maxSize,encoderMaxSize:t.maxSize});return{...e,...t,decode:e.decode,encode:t.encode,read:e.read,write:t.write}}function Tut(t,e,n=0){if(e.length-n<=0)throw new Xg(fut,{codecDescription:t})}function kut(t,e,n,r=0){const i=n.length-r;if(i<e)throw new Xg(hut,{bytesLength:i,codecDescription:t,expected:e})}function Cut(t,e,n,r){if(r<e||r>n)throw new Xg(yut,{codecDescription:t,max:n,min:e,value:r})}function Ype(t){return(t==null?void 0:t.endian)!==1}function Nut(t){return Eut({fixedSize:t.size,write(e,n,r){t.range&&Cut(t.name,t.range[0],t.range[1],e);const i=new ArrayBuffer(t.size);return t.set(new DataView(i),e,Ype(t.config)),n.set(new Uint8Array(i),r),r+t.size}})}function _ut(t){return Sut({fixedSize:t.size,read(e,n=0){Tut(t.name,e,n),kut(t.name,t.size,e,n);const r=new DataView(Iut(e,n,t.size));return[t.get(r,Ype(t.config)),n+t.size]}})}function Iut(t,e,n){const r=t.byteOffset+(e??0),i=n??t.byteLength;return t.buffer.slice(r,r+i)}var Put=(t={})=>Nut({config:t,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(e,n,r)=>e.setBigUint64(0,BigInt(n),r),size:8}),Rut=(t={})=>_ut({config:t,get:(e,n)=>e.getBigUint64(0,n),name:"u64",size:8}),Out=(t={})=>Aut(Put(t),Rut(t));class Mut extends TypeError{constructor(e,n){let r;const{message:i,explanation:s,...o}=e,{path:a}=e,l=a.length===0?i:`At path: ${a.join(".")} -- ${i}`;super(s??l),s!=null&&(this.cause=l),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...n()])}}function Dut(t){return aE(t)&&typeof t[Symbol.iterator]=="function"}function aE(t){return typeof t=="object"&&t!=null}function SC(t){return aE(t)&&!Array.isArray(t)}function Pl(t){return typeof t=="symbol"?t.toString():typeof t=="string"?JSON.stringify(t):`${t}`}function Lut(t){const{done:e,value:n}=t.next();return e?void 0:n}function But(t,e,n,r){if(t===!0)return;t===!1?t={}:typeof t=="string"&&(t={message:t});const{path:i,branch:s}=e,{type:o}=n,{refinement:a,message:l=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${Pl(r)}\``}=t;return{value:r,type:o,refinement:a,key:i[i.length-1],path:i,branch:s,...t,message:l}}function*cZ(t,e,n,r){Dut(t)||(t=[t]);for(const i of t){const s=But(i,e,n,r);s&&(yield s)}}function*Dj(t,e,n={}){const{path:r=[],branch:i=[t],coerce:s=!1,mask:o=!1}=n,a={path:r,branch:i,mask:o};s&&(t=e.coercer(t,a));let l="valid";for(const c of e.validator(t,a))c.explanation=n.message,l="not_valid",yield[c,void 0];for(let[c,u,f]of e.entries(t,a)){const m=Dj(u,f,{path:c===void 0?r:[...r,c],branch:c===void 0?i:[...i,u],coerce:s,mask:o,message:n.message});for(const g of m)g[0]?(l=g[0].refinement!=null?"not_refined":"not_valid",yield[g[0],void 0]):s&&(u=g[1],c===void 0?t=u:t instanceof Map?t.set(c,u):t instanceof Set?t.add(u):aE(t)&&(u!==void 0||c in t)&&(t[c]=u))}if(l!=="not_valid")for(const c of e.refiner(t,a))c.explanation=n.message,l="not_refined",yield[c,void 0];l==="valid"&&(yield[void 0,t])}let Fc=class{constructor(e){const{type:n,schema:r,validator:i,refiner:s,coercer:o=l=>l,entries:a=function*(){}}=e;this.type=n,this.schema=r,this.entries=a,this.coercer=o,i?this.validator=(l,c)=>{const u=i(l,c);return cZ(u,c,this,l)}:this.validator=()=>[],s?this.refiner=(l,c)=>{const u=s(l,c);return cZ(u,c,this,l)}:this.refiner=()=>[]}assert(e,n){return jut(e,this,n)}create(e,n){return dt(e,this,n)}is(e){return Jpe(e,this)}mask(e,n){return Uut(e,this,n)}validate(e,n={}){return lE(e,this,n)}};function jut(t,e,n){const r=lE(t,e,{message:n});if(r[0])throw r[0]}function dt(t,e,n){const r=lE(t,e,{coerce:!0,message:n});if(r[0])throw r[0];return r[1]}function Uut(t,e,n){const r=lE(t,e,{coerce:!0,mask:!0,message:n});if(r[0])throw r[0];return r[1]}function Jpe(t,e){return!lE(t,e)[0]}function lE(t,e,n={}){const r=Dj(t,e,n),i=Lut(r);return i[0]?[new Mut(i[0],function*(){for(const o of r)o[0]&&(yield o[0])}),void 0]:[void 0,i[1]]}function Um(t,e){return new Fc({type:t,schema:null,validator:e})}function Fut(){return Um("any",()=>!0)}function pt(t){return new Fc({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(const[n,r]of e.entries())yield[n,r,t]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${Pl(e)}`}})}function Mc(){return Um("boolean",t=>typeof t=="boolean")}function Lj(t){return Um("instance",e=>e instanceof t||`Expected a \`${t.name}\` instance, but received: ${Pl(e)}`)}function Or(t){const e=Pl(t),n=typeof t;return new Fc({type:"literal",schema:n==="string"||n==="number"||n==="boolean"?t:null,validator(r){return r===t||`Expected the literal \`${e}\`, but received: ${Pl(r)}`}})}function $ut(){return Um("never",()=>!1)}function gt(t){return new Fc({...t,validator:(e,n)=>e===null||t.validator(e,n),refiner:(e,n)=>e===null||t.refiner(e,n)})}function Oe(){return Um("number",t=>typeof t=="number"&&!isNaN(t)||`Expected a number, but received: ${Pl(t)}`)}function zt(t){return new Fc({...t,validator:(e,n)=>e===void 0||t.validator(e,n),refiner:(e,n)=>e===void 0||t.refiner(e,n)})}function Xpe(t,e){return new Fc({type:"record",schema:null,*entries(n){if(aE(n))for(const r in n){const i=n[r];yield[r,r,t],yield[r,i,e]}},validator(n){return SC(n)||`Expected an object, but received: ${Pl(n)}`},coercer(n){return SC(n)?{...n}:n}})}function ut(){return Um("string",t=>typeof t=="string"||`Expected a string, but received: ${Pl(t)}`)}function Bj(t){const e=$ut();return new Fc({type:"tuple",schema:null,*entries(n){if(Array.isArray(n)){const r=Math.max(t.length,n.length);for(let i=0;i<r;i++)yield[i,n[i],t[i]||e]}},validator(n){return Array.isArray(n)||`Expected an array, but received: ${Pl(n)}`},coercer(n){return Array.isArray(n)?n.slice():n}})}function nt(t){const e=Object.keys(t);return new Fc({type:"type",schema:t,*entries(n){if(aE(n))for(const r of e)yield[r,n[r],t[r]]},validator(n){return SC(n)||`Expected an object, but received: ${Pl(n)}`},coercer(n){return SC(n)?{...n}:n}})}function Ys(t){const e=t.map(n=>n.type).join(" | ");return new Fc({type:"union",schema:null,coercer(n,r){for(const i of t){const[s,o]=i.validate(n,{coerce:!0,mask:r.mask});if(!s)return o}return n},validator(n,r){const i=[];for(const s of t){const[...o]=Dj(n,s,r),[a]=o;if(a[0])for(const[l]of o)l&&i.push(l);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${Pl(n)}`,...i]}})}function tv(){return Um("unknown",()=>!0)}function cE(t,e,n){return new Fc({...t,coercer:(r,i)=>Jpe(r,e)?t.coercer(n(r,i),i):t.coercer(r,i)})}var OA,zut=new Uint8Array(16);function Qpe(){if(!OA&&(OA=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!OA))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return OA(zut)}const Hut=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function UN(t){return typeof t=="string"&&Hut.test(t)}var Ji=[];for(var h3=0;h3<256;++h3)Ji.push((h3+256).toString(16).substr(1));function FN(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(Ji[t[e+0]]+Ji[t[e+1]]+Ji[t[e+2]]+Ji[t[e+3]]+"-"+Ji[t[e+4]]+Ji[t[e+5]]+"-"+Ji[t[e+6]]+Ji[t[e+7]]+"-"+Ji[t[e+8]]+Ji[t[e+9]]+"-"+Ji[t[e+10]]+Ji[t[e+11]]+Ji[t[e+12]]+Ji[t[e+13]]+Ji[t[e+14]]+Ji[t[e+15]]).toLowerCase();if(!UN(n))throw TypeError("Stringified UUID is invalid");return n}var uZ,p3,m3=0,g3=0;function Vut(t,e,n){var r=e&&n||0,i=e||new Array(16);t=t||{};var s=t.node||uZ,o=t.clockseq!==void 0?t.clockseq:p3;if(s==null||o==null){var a=t.random||(t.rng||Qpe)();s==null&&(s=uZ=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),o==null&&(o=p3=(a[6]<<8|a[7])&16383)}var l=t.msecs!==void 0?t.msecs:Date.now(),c=t.nsecs!==void 0?t.nsecs:g3+1,u=l-m3+(c-g3)/1e4;if(u<0&&t.clockseq===void 0&&(o=o+1&16383),(u<0||l>m3)&&t.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");m3=l,g3=c,p3=o,l+=122192928e5;var f=((l&268435455)*1e4+c)%4294967296;i[r++]=f>>>24&255,i[r++]=f>>>16&255,i[r++]=f>>>8&255,i[r++]=f&255;var m=l/4294967296*1e4&268435455;i[r++]=m>>>8&255,i[r++]=m&255,i[r++]=m>>>24&15|16,i[r++]=m>>>16&255,i[r++]=o>>>8|128,i[r++]=o&255;for(var g=0;g<6;++g)i[r+g]=s[g];return e||FN(i)}function Zpe(t){if(!UN(t))throw TypeError("Invalid UUID");var e,n=new Uint8Array(16);return n[0]=(e=parseInt(t.slice(0,8),16))>>>24,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=e&255,n[4]=(e=parseInt(t.slice(9,13),16))>>>8,n[5]=e&255,n[6]=(e=parseInt(t.slice(14,18),16))>>>8,n[7]=e&255,n[8]=(e=parseInt(t.slice(19,23),16))>>>8,n[9]=e&255,n[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,n[11]=e/4294967296&255,n[12]=e>>>24&255,n[13]=e>>>16&255,n[14]=e>>>8&255,n[15]=e&255,n}function qut(t){t=unescape(encodeURIComponent(t));for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e}var Gut="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Kut="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function eme(t,e,n){function r(i,s,o,a){if(typeof i=="string"&&(i=qut(i)),typeof s=="string"&&(s=Zpe(s)),s.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var l=new Uint8Array(16+i.length);if(l.set(s),l.set(i,s.length),l=n(l),l[6]=l[6]&15|e,l[8]=l[8]&63|128,o){a=a||0;for(var c=0;c<16;++c)o[a+c]=l[c];return o}return FN(l)}try{r.name=t}catch{}return r.DNS=Gut,r.URL=Kut,r}function Wut(t){if(typeof t=="string"){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var n=0;n<e.length;++n)t[n]=e.charCodeAt(n)}return Yut(Jut(Xut(t),t.length*8))}function Yut(t){for(var e=[],n=t.length*32,r="0123456789abcdef",i=0;i<n;i+=8){var s=t[i>>5]>>>i%32&255,o=parseInt(r.charAt(s>>>4&15)+r.charAt(s&15),16);e.push(o)}return e}function tme(t){return(t+64>>>9<<4)+14+1}function Jut(t,e){t[e>>5]|=128<<e%32,t[tme(e)-1]=e;for(var n=1732584193,r=-271733879,i=-1732584194,s=271733878,o=0;o<t.length;o+=16){var a=n,l=r,c=i,u=s;n=hs(n,r,i,s,t[o],7,-680876936),s=hs(s,n,r,i,t[o+1],12,-389564586),i=hs(i,s,n,r,t[o+2],17,606105819),r=hs(r,i,s,n,t[o+3],22,-1044525330),n=hs(n,r,i,s,t[o+4],7,-176418897),s=hs(s,n,r,i,t[o+5],12,1200080426),i=hs(i,s,n,r,t[o+6],17,-1473231341),r=hs(r,i,s,n,t[o+7],22,-45705983),n=hs(n,r,i,s,t[o+8],7,1770035416),s=hs(s,n,r,i,t[o+9],12,-1958414417),i=hs(i,s,n,r,t[o+10],17,-42063),r=hs(r,i,s,n,t[o+11],22,-1990404162),n=hs(n,r,i,s,t[o+12],7,1804603682),s=hs(s,n,r,i,t[o+13],12,-40341101),i=hs(i,s,n,r,t[o+14],17,-1502002290),r=hs(r,i,s,n,t[o+15],22,1236535329),n=ps(n,r,i,s,t[o+1],5,-165796510),s=ps(s,n,r,i,t[o+6],9,-1069501632),i=ps(i,s,n,r,t[o+11],14,643717713),r=ps(r,i,s,n,t[o],20,-373897302),n=ps(n,r,i,s,t[o+5],5,-701558691),s=ps(s,n,r,i,t[o+10],9,38016083),i=ps(i,s,n,r,t[o+15],14,-660478335),r=ps(r,i,s,n,t[o+4],20,-405537848),n=ps(n,r,i,s,t[o+9],5,568446438),s=ps(s,n,r,i,t[o+14],9,-1019803690),i=ps(i,s,n,r,t[o+3],14,-187363961),r=ps(r,i,s,n,t[o+8],20,1163531501),n=ps(n,r,i,s,t[o+13],5,-1444681467),s=ps(s,n,r,i,t[o+2],9,-51403784),i=ps(i,s,n,r,t[o+7],14,1735328473),r=ps(r,i,s,n,t[o+12],20,-1926607734),n=ms(n,r,i,s,t[o+5],4,-378558),s=ms(s,n,r,i,t[o+8],11,-2022574463),i=ms(i,s,n,r,t[o+11],16,1839030562),r=ms(r,i,s,n,t[o+14],23,-35309556),n=ms(n,r,i,s,t[o+1],4,-1530992060),s=ms(s,n,r,i,t[o+4],11,1272893353),i=ms(i,s,n,r,t[o+7],16,-155497632),r=ms(r,i,s,n,t[o+10],23,-1094730640),n=ms(n,r,i,s,t[o+13],4,681279174),s=ms(s,n,r,i,t[o],11,-358537222),i=ms(i,s,n,r,t[o+3],16,-722521979),r=ms(r,i,s,n,t[o+6],23,76029189),n=ms(n,r,i,s,t[o+9],4,-640364487),s=ms(s,n,r,i,t[o+12],11,-421815835),i=ms(i,s,n,r,t[o+15],16,530742520),r=ms(r,i,s,n,t[o+2],23,-995338651),n=gs(n,r,i,s,t[o],6,-198630844),s=gs(s,n,r,i,t[o+7],10,1126891415),i=gs(i,s,n,r,t[o+14],15,-1416354905),r=gs(r,i,s,n,t[o+5],21,-57434055),n=gs(n,r,i,s,t[o+12],6,1700485571),s=gs(s,n,r,i,t[o+3],10,-1894986606),i=gs(i,s,n,r,t[o+10],15,-1051523),r=gs(r,i,s,n,t[o+1],21,-2054922799),n=gs(n,r,i,s,t[o+8],6,1873313359),s=gs(s,n,r,i,t[o+15],10,-30611744),i=gs(i,s,n,r,t[o+6],15,-1560198380),r=gs(r,i,s,n,t[o+13],21,1309151649),n=gs(n,r,i,s,t[o+4],6,-145523070),s=gs(s,n,r,i,t[o+11],10,-1120210379),i=gs(i,s,n,r,t[o+2],15,718787259),r=gs(r,i,s,n,t[o+9],21,-343485551),n=Gf(n,a),r=Gf(r,l),i=Gf(i,c),s=Gf(s,u)}return[n,r,i,s]}function Xut(t){if(t.length===0)return[];for(var e=t.length*8,n=new Uint32Array(tme(e)),r=0;r<e;r+=8)n[r>>5]|=(t[r/8]&255)<<r%32;return n}function Gf(t,e){var n=(t&65535)+(e&65535),r=(t>>16)+(e>>16)+(n>>16);return r<<16|n&65535}function Qut(t,e){return t<<e|t>>>32-e}function $N(t,e,n,r,i,s){return Gf(Qut(Gf(Gf(e,t),Gf(r,s)),i),n)}function hs(t,e,n,r,i,s,o){return $N(e&n|~e&r,t,e,i,s,o)}function ps(t,e,n,r,i,s,o){return $N(e&r|n&~r,t,e,i,s,o)}function ms(t,e,n,r,i,s,o){return $N(e^n^r,t,e,i,s,o)}function gs(t,e,n,r,i,s,o){return $N(n^(e|~r),t,e,i,s,o)}var Zut=eme("v3",48,Wut);function edt(t,e,n){t=t||{};var r=t.random||(t.rng||Qpe)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return FN(r)}function tdt(t,e,n,r){switch(t){case 0:return e&n^~e&r;case 1:return e^n^r;case 2:return e&n^e&r^n&r;case 3:return e^n^r}}function y3(t,e){return t<<e|t>>>32-e}function ndt(t){var e=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){var r=unescape(encodeURIComponent(t));t=[];for(var i=0;i<r.length;++i)t.push(r.charCodeAt(i))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var s=t.length/4+2,o=Math.ceil(s/16),a=new Array(o),l=0;l<o;++l){for(var c=new Uint32Array(16),u=0;u<16;++u)c[u]=t[l*64+u*4]<<24|t[l*64+u*4+1]<<16|t[l*64+u*4+2]<<8|t[l*64+u*4+3];a[l]=c}a[o-1][14]=(t.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(t.length-1)*8&4294967295;for(var f=0;f<o;++f){for(var m=new Uint32Array(80),g=0;g<16;++g)m[g]=a[f][g];for(var x=16;x<80;++x)m[x]=y3(m[x-3]^m[x-8]^m[x-14]^m[x-16],1);for(var v=n[0],w=n[1],E=n[2],C=n[3],k=n[4],O=0;O<80;++O){var j=Math.floor(O/20),R=y3(v,5)+tdt(j,w,E,C)+k+e[j]+m[O]>>>0;k=C,C=E,E=y3(w,30)>>>0,w=v,v=R}n[0]=n[0]+v>>>0,n[1]=n[1]+w>>>0,n[2]=n[2]+E>>>0,n[3]=n[3]+C>>>0,n[4]=n[4]+k>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,n[0]&255,n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,n[1]&255,n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,n[2]&255,n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,n[3]&255,n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,n[4]&255]}var rdt=eme("v5",80,ndt);const idt="00000000-0000-0000-0000-000000000000";function sdt(t){if(!UN(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}const odt=Object.freeze(Object.defineProperty({__proto__:null,NIL:idt,parse:Zpe,stringify:FN,v1:Vut,v3:Zut,v4:edt,v5:rdt,validate:UN,version:sdt},Symbol.toStringTag,{value:"Module"})),nme=KZ(odt);var x3,dZ;function adt(){if(dZ)return x3;dZ=1;const t=nme.v4;return x3=function(n,r,i,s){if(typeof n!="string")throw new TypeError(n+" must be a string");s=s||{};const o=typeof s.version=="number"?s.version:2;if(o!==1&&o!==2)throw new TypeError(o+" must be 1 or 2");const a={method:n};if(o===2&&(a.jsonrpc="2.0"),r){if(typeof r!="object"&&!Array.isArray(r))throw new TypeError(r+" must be an object, array or omitted");a.params=r}if(typeof i>"u"){const l=typeof s.generator=="function"?s.generator:function(){return t()};a.id=l(a,s)}else o===2&&i===null?s.notificationIdNull&&(a.id=null):a.id=i;return a},x3}var v3,fZ;function ldt(){if(fZ)return v3;fZ=1;const t=nme.v4,e=adt(),n=function(r,i){if(!(this instanceof n))return new n(r,i);i||(i={}),this.options={reviver:typeof i.reviver<"u"?i.reviver:null,replacer:typeof i.replacer<"u"?i.replacer:null,generator:typeof i.generator<"u"?i.generator:function(){return t()},version:typeof i.version<"u"?i.version:2,notificationIdNull:typeof i.notificationIdNull=="boolean"?i.notificationIdNull:!1},this.callServer=r};return v3=n,n.prototype.request=function(r,i,s,o){const a=this;let l=null;const c=Array.isArray(r)&&typeof i=="function";if(this.options.version===1&&c)throw new TypeError("JSON-RPC 1.0 does not support batching");if(c||!c&&r&&typeof r=="object"&&typeof i=="function")o=i,l=r;else{typeof s=="function"&&(o=s,s=void 0);const m=typeof o=="function";try{l=e(r,i,s,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(g){if(m){o(g);return}throw g}if(!m)return l}let f;try{f=JSON.stringify(l,this.options.replacer)}catch(m){o(m);return}return this.callServer(f,function(m,g){a._parseResponse(m,g,o)}),l},n.prototype._parseResponse=function(r,i,s){if(r){s(r);return}if(!i){s();return}let o;try{o=JSON.parse(i,this.options.reviver)}catch(a){s(a);return}if(s.length===3)if(Array.isArray(o)){const a=function(c){return typeof c.error<"u"},l=function(c){return!a(c)};s(null,o.filter(a),o.filter(l));return}else{s(null,o.error,o.result);return}s(null,o)},v3}var cdt=ldt();const udt=cs(cdt);var ddt=class extends yB{constructor(e,n){super();Se(this,"socket");this.socket=new window.WebSocket(e,n.protocols),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=r=>this.emit("message",r.data),this.socket.onerror=r=>this.emit("error",r),this.socket.onclose=r=>{this.emit("close",r.code,r.reason)}}send(e,n,r){const i=r||n;try{this.socket.send(e),i()}catch(s){i(s)}}close(e,n){this.socket.close(e,n)}addEventListener(e,n,r){this.socket.addEventListener(e,n,r)}};function fdt(t,e){return new ddt(t,e)}var hdt=class{encode(t){return JSON.stringify(t)}decode(t){return JSON.parse(t)}},pdt=class extends yB{constructor(e,n="ws://localhost:8080",{autoconnect:r=!0,reconnect:i=!0,reconnect_interval:s=1e3,max_reconnects:o=5,...a}={},l,c){super();Se(this,"address");Se(this,"rpc_id");Se(this,"queue");Se(this,"options");Se(this,"autoconnect");Se(this,"ready");Se(this,"reconnect");Se(this,"reconnect_timer_id");Se(this,"reconnect_interval");Se(this,"max_reconnects");Se(this,"rest_options");Se(this,"current_reconnects");Se(this,"generate_request_id");Se(this,"socket");Se(this,"webSocketFactory");Se(this,"dataPack");this.webSocketFactory=e,this.queue={},this.rpc_id=0,this.address=n,this.autoconnect=r,this.ready=!1,this.reconnect=i,this.reconnect_timer_id=void 0,this.reconnect_interval=s,this.max_reconnects=o,this.rest_options=a,this.current_reconnects=0,this.generate_request_id=l||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),c?this.dataPack=c:this.dataPack=new hdt,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(e,n,r,i){return!i&&typeof r=="object"&&(i=r,r=null),new Promise((s,o)=>{if(!this.ready)return o(new Error("socket not ready"));const a=this.generate_request_id(e,n),l={jsonrpc:"2.0",method:e,params:n||void 0,id:a};this.socket.send(this.dataPack.encode(l),i,c=>{if(c)return o(c);this.queue[a]={promise:[s,o]},r&&(this.queue[a].timeout=setTimeout(()=>{delete this.queue[a],o(new Error("reply timeout"))},r))})})}async login(e){const n=await this.call("rpc.login",e);if(!n)throw new Error("authentication failed");return n}async listMethods(){return await this.call("__listMethods")}notify(e,n){return new Promise((r,i)=>{if(!this.ready)return i(new Error("socket not ready"));const s={jsonrpc:"2.0",method:e,params:n};this.socket.send(this.dataPack.encode(s),o=>{if(o)return i(o);r()})})}async subscribe(e){typeof e=="string"&&(e=[e]);const n=await this.call("rpc.on",e);if(typeof e=="string"&&n[e]!=="ok")throw new Error("Failed subscribing to an event '"+e+"' with: "+n[e]);return n}async unsubscribe(e){typeof e=="string"&&(e=[e]);const n=await this.call("rpc.off",e);if(typeof e=="string"&&n[e]!=="ok")throw new Error("Failed unsubscribing from an event with: "+n);return n}close(e,n){this.socket&&this.socket.close(e||1e3,n)}setAutoReconnect(e){this.reconnect=e}setReconnectInterval(e){this.reconnect_interval=e}setMaxReconnects(e){this.max_reconnects=e}getCurrentReconnects(){return this.current_reconnects}getMaxReconnects(){return this.max_reconnects}isReconnecting(){return this.reconnect_timer_id!==void 0}willReconnect(){return this.reconnect&&(this.max_reconnects===0||this.current_reconnects<this.max_reconnects)}_connect(e,n){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(e,n),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:r})=>{r instanceof ArrayBuffer&&(r=cn.from(r).toString());try{r=this.dataPack.decode(r)}catch{return}if(r.notification&&this.listeners(r.notification).length){if(!Object.keys(r.params).length)return this.emit(r.notification);const i=[r.notification];if(r.params.constructor===Object)i.push(r.params);else for(let s=0;s<r.params.length;s++)i.push(r.params[s]);return Promise.resolve().then(()=>{this.emit.apply(this,i)})}if(!this.queue[r.id])return r.method?Promise.resolve().then(()=>{this.emit(r.method,r==null?void 0:r.params)}):void 0;"error"in r=="result"in r&&this.queue[r.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[r.id].timeout&&clearTimeout(this.queue[r.id].timeout),r.error?this.queue[r.id].promise[1](r.error):this.queue[r.id].promise[0](r.result),delete this.queue[r.id]}),this.socket.addEventListener("error",r=>this.emit("error",r)),this.socket.addEventListener("close",({code:r,reason:i})=>{this.ready&&setTimeout(()=>this.emit("close",r,i),0),this.ready=!1,this.socket=void 0,r!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)?this.reconnect_timer_id=setTimeout(()=>this._connect(e,n),this.reconnect_interval):this.reconnect&&this.max_reconnects>0&&this.current_reconnects>=this.max_reconnects&&setTimeout(()=>this.emit("max_reconnects_reached",r,i),1))})}};class rme extends wpe{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,vpe(e);const r=Cj(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),mx(s)}update(e){return mC(this),this.iHash.update(e),this}digestInto(e){mC(this),Bm(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const ime=(t,e,n)=>new rme(t,e).update(n).digest();ime.create=(t,e)=>new rme(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const hZ=(t,e)=>(t+(t>=0?e:-e)/sme)/e;function mdt(t,e,n){const[[r,i],[s,o]]=e,a=hZ(o*t,n),l=hZ(-i*t,n);let c=t-a*r-l*s,u=-a*i-l*o;const f=c<Vu,m=u<Vu;f&&(c=-c),m&&(u=-u);const g=sE(Math.ceil(Npe(n)/2))+Qg;if(c<Vu||c>=g||u<Vu||u>=g)throw new Error("splitScalar (endomorphism): failed, k="+t);return{k1neg:f,k1:c,k2neg:m,k2:u}}function VD(t){if(!["compact","recovered","der"].includes(t))throw new Error('Signature format must be "compact", "recovered", or "der"');return t}function b3(t,e){const n={};for(let r of Object.keys(e))n[r]=t[r]===void 0?e[r]:t[r];return Sm(n.lowS,"lowS"),Sm(n.prehash,"prehash"),n.format!==void 0&&VD(n.format),n}class gdt extends Error{constructor(e=""){super(e)}}const Eu={Err:gdt,_tlv:{encode:(t,e)=>{const{Err:n}=Eu;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,i=PA(r);if(i.length/2&128)throw new n("tlv.encode: long form length too big");const s=r>127?PA(i.length/2|128):"";return PA(t)+s+i+e},decode(t,e){const{Err:n}=Eu;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const i=e[r++],s=!!(i&128);let o=0;if(!s)o=i;else{const l=i&127;if(!l)throw new n("tlv.decode(long): indefinite length not supported");if(l>4)throw new n("tlv.decode(long): byte length is too big");const c=e.subarray(r,r+l);if(c.length!==l)throw new n("tlv.decode: length bytes not complete");if(c[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of c)o=o<<8|u;if(r+=l,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=Eu;if(t<Vu)throw new e("integer: negative integers are not allowed");let n=PA(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=Eu;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return BN(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=Eu,i=qr("signature",t),{v:s,l:o}=r.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l}=r.decode(2,s),{v:c,l:u}=r.decode(2,l);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(c)}},hexFromSig(t){const{_tlv:e,_int:n}=Eu,r=e.encode(2,n.encode(t.r)),i=e.encode(2,n.encode(t.s)),s=r+i;return e.encode(48,s)}},Vu=BigInt(0),Qg=BigInt(1),sme=BigInt(2),MA=BigInt(3),ydt=BigInt(4);function Ag(t,e){const{BYTES:n}=t;let r;if(typeof e=="bigint")r=e;else{let i=qr("private key",e);try{r=t.fromBytes(i)}catch{throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof e}`)}}if(!t.isValidNot0(r))throw new Error("invalid private key: out of range [1..N-1]");return r}function xdt(t,e={}){const n=Vpe("weierstrass",t,e),{Fp:r,Fn:i}=n;let s=n.CURVE;const{h:o,n:a}=s;oE(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:l}=e;if(l&&(!r.is0(s.a)||typeof l.beta!="bigint"||!Array.isArray(l.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const c=ame(r,i);function u(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function f(H,B,A){const{x:I,y:M}=B.toAffine(),z=r.toBytes(I);if(Sm(A,"isCompressed"),A){u();const G=!r.isOdd(M);return pc(ome(G),z)}else return pc(Uint8Array.of(4),z,r.toBytes(M))}function m(H){xl(H,void 0,"Point");const{publicKey:B,publicKeyUncompressed:A}=c,I=H.length,M=H[0],z=H.subarray(1);if(I===B&&(M===2||M===3)){const G=r.fromBytes(z);if(!r.isValid(G))throw new Error("bad point: is not on curve, wrong x");const te=v(G);let Y;try{Y=r.sqrt(te)}catch(_){const W=_ instanceof Error?": "+_.message:"";throw new Error("bad point: is not on curve, sqrt error"+W)}u();const q=r.isOdd(Y);return(M&1)===1!==q&&(Y=r.neg(Y)),{x:G,y:Y}}else if(I===A&&M===4){const G=r.BYTES,te=r.fromBytes(z.subarray(0,G)),Y=r.fromBytes(z.subarray(G,G*2));if(!w(te,Y))throw new Error("bad point: is not on curve");return{x:te,y:Y}}else throw new Error(`bad point: got length ${I}, expected compressed=${B} or uncompressed=${A}`)}const g=e.toBytes||f,x=e.fromBytes||m;function v(H){const B=r.sqr(H),A=r.mul(B,H);return r.add(r.add(A,r.mul(H,s.a)),s.b)}function w(H,B){const A=r.sqr(B),I=v(H);return r.eql(A,I)}if(!w(s.Gx,s.Gy))throw new Error("bad curve params: generator point");const E=r.mul(r.pow(s.a,MA),ydt),C=r.mul(r.sqr(s.b),BigInt(27));if(r.is0(r.add(E,C)))throw new Error("bad curve params: a or b");function k(H,B,A=!1){if(!r.isValid(B)||A&&r.is0(B))throw new Error(`bad point coordinate ${H}`);return B}function O(H){if(!(H instanceof F))throw new Error("ProjectivePoint expected")}function j(H){if(!l||!l.basises)throw new Error("no endo");return mdt(H,l.basises,i.ORDER)}const R=yC((H,B)=>{const{X:A,Y:I,Z:M}=H;if(r.eql(M,r.ONE))return{x:A,y:I};const z=H.is0();B==null&&(B=z?r.ONE:r.inv(M));const G=r.mul(A,B),te=r.mul(I,B),Y=r.mul(M,B);if(z)return{x:r.ZERO,y:r.ZERO};if(!r.eql(Y,r.ONE))throw new Error("invZ was invalid");return{x:G,y:te}}),U=yC(H=>{if(H.is0()){if(e.allowInfinityPoint&&!r.is0(H.Y))return;throw new Error("bad point: ZERO")}const{x:B,y:A}=H.toAffine();if(!r.isValid(B)||!r.isValid(A))throw new Error("bad point: x or y not field elements");if(!w(B,A))throw new Error("bad point: equation left != right");if(!H.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function V(H,B,A,I,M){return A=new F(r.mul(A.X,H),A.Y,A.Z),B=xC(I,B),A=xC(M,A),B.add(A)}class F{constructor(B,A,I){this.X=k("x",B),this.Y=k("y",A,!0),this.Z=k("z",I),Object.freeze(this)}static CURVE(){return s}static fromAffine(B){const{x:A,y:I}=B||{};if(!B||!r.isValid(A)||!r.isValid(I))throw new Error("invalid affine point");if(B instanceof F)throw new Error("projective point not allowed");return r.is0(A)&&r.is0(I)?F.ZERO:new F(A,I,r.ONE)}static fromBytes(B){const A=F.fromAffine(x(xl(B,void 0,"point")));return A.assertValidity(),A}static fromHex(B){return F.fromBytes(qr("pointHex",B))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(B=8,A=!0){return K.createCache(this,B),A||this.multiply(MA),this}assertValidity(){U(this)}hasEvenY(){const{y:B}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(B)}equals(B){O(B);const{X:A,Y:I,Z:M}=this,{X:z,Y:G,Z:te}=B,Y=r.eql(r.mul(A,te),r.mul(z,M)),q=r.eql(r.mul(I,te),r.mul(G,M));return Y&&q}negate(){return new F(this.X,r.neg(this.Y),this.Z)}double(){const{a:B,b:A}=s,I=r.mul(A,MA),{X:M,Y:z,Z:G}=this;let te=r.ZERO,Y=r.ZERO,q=r.ZERO,D=r.mul(M,M),_=r.mul(z,z),W=r.mul(G,G),X=r.mul(M,z);return X=r.add(X,X),q=r.mul(M,G),q=r.add(q,q),te=r.mul(B,q),Y=r.mul(I,W),Y=r.add(te,Y),te=r.sub(_,Y),Y=r.add(_,Y),Y=r.mul(te,Y),te=r.mul(X,te),q=r.mul(I,q),W=r.mul(B,W),X=r.sub(D,W),X=r.mul(B,X),X=r.add(X,q),q=r.add(D,D),D=r.add(q,D),D=r.add(D,W),D=r.mul(D,X),Y=r.add(Y,D),W=r.mul(z,G),W=r.add(W,W),D=r.mul(W,X),te=r.sub(te,D),q=r.mul(W,_),q=r.add(q,q),q=r.add(q,q),new F(te,Y,q)}add(B){O(B);const{X:A,Y:I,Z:M}=this,{X:z,Y:G,Z:te}=B;let Y=r.ZERO,q=r.ZERO,D=r.ZERO;const _=s.a,W=r.mul(s.b,MA);let X=r.mul(A,z),re=r.mul(I,G),ae=r.mul(M,te),Ee=r.add(A,I),ue=r.add(z,G);Ee=r.mul(Ee,ue),ue=r.add(X,re),Ee=r.sub(Ee,ue),ue=r.add(A,M);let me=r.add(z,te);return ue=r.mul(ue,me),me=r.add(X,ae),ue=r.sub(ue,me),me=r.add(I,M),Y=r.add(G,te),me=r.mul(me,Y),Y=r.add(re,ae),me=r.sub(me,Y),D=r.mul(_,ue),Y=r.mul(W,ae),D=r.add(Y,D),Y=r.sub(re,D),D=r.add(re,D),q=r.mul(Y,D),re=r.add(X,X),re=r.add(re,X),ae=r.mul(_,ae),ue=r.mul(W,ue),re=r.add(re,ae),ae=r.sub(X,ae),ae=r.mul(_,ae),ue=r.add(ue,ae),X=r.mul(re,ue),q=r.add(q,X),X=r.mul(me,ue),Y=r.mul(Ee,Y),Y=r.sub(Y,X),X=r.mul(Ee,re),D=r.mul(me,D),D=r.add(D,X),new F(Y,q,D)}subtract(B){return this.add(B.negate())}is0(){return this.equals(F.ZERO)}multiply(B){const{endo:A}=e;if(!i.isValidNot0(B))throw new Error("invalid scalar: out of range");let I,M;const z=G=>K.cached(this,G,te=>Ap(F,te));if(A){const{k1neg:G,k1:te,k2neg:Y,k2:q}=j(B),{p:D,f:_}=z(te),{p:W,f:X}=z(q);M=_.add(X),I=V(A.beta,D,W,G,Y)}else{const{p:G,f:te}=z(B);I=G,M=te}return Ap(F,[I,M])[0]}multiplyUnsafe(B){const{endo:A}=e,I=this;if(!i.isValid(B))throw new Error("invalid scalar: out of range");if(B===Vu||I.is0())return F.ZERO;if(B===Qg)return I;if(K.hasCache(this))return this.multiply(B);if(A){const{k1neg:M,k1:z,k2neg:G,k2:te}=j(B),{p1:Y,p2:q}=Dct(F,I,z,te);return V(A.beta,Y,q,M,G)}else return K.unsafe(I,B)}multiplyAndAddUnsafe(B,A,I){const M=this.multiplyUnsafe(A).add(B.multiplyUnsafe(I));return M.is0()?void 0:M}toAffine(B){return R(this,B)}isTorsionFree(){const{isTorsionFree:B}=e;return o===Qg?!0:B?B(F,this):K.unsafe(this,a).is0()}clearCofactor(){const{clearCofactor:B}=e;return o===Qg?this:B?B(F,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(B=!0){return Sm(B,"isCompressed"),this.assertValidity(),g(F,this,B)}toHex(B=!0){return nm(this.toBytes(B))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(B=!0){return this.toBytes(B)}_setWindowSize(B){this.precompute(B)}static normalizeZ(B){return Ap(F,B)}static msm(B,A){return Hpe(F,i,B,A)}static fromPrivateKey(B){return F.BASE.multiply(Ag(i,B))}}F.BASE=new F(s.Gx,s.Gy,r.ONE),F.ZERO=new F(r.ZERO,r.ONE,r.ZERO),F.Fp=r,F.Fn=i;const $=i.BITS,K=new zpe(F,e.endo?Math.ceil($/2):$);return F.BASE.precompute(8),F}function ome(t){return Uint8Array.of(t?2:3)}function ame(t,e){return{secretKey:e.BYTES,publicKey:1+t.BYTES,publicKeyUncompressed:1+2*t.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function vdt(t,e={}){const{Fn:n}=t,r=e.randomBytes||Nj,i=Object.assign(ame(t.Fp,n),{seed:Upe(n.ORDER)});function s(g){try{return!!Ag(n,g)}catch{return!1}}function o(g,x){const{publicKey:v,publicKeyUncompressed:w}=i;try{const E=g.length;return x===!0&&E!==v||x===!1&&E!==w?!1:!!t.fromBytes(g)}catch{return!1}}function a(g=r(i.seed)){return Rct(xl(g,i.seed,"seed"),n.ORDER)}function l(g,x=!0){return t.BASE.multiply(Ag(n,g)).toBytes(x)}function c(g){const x=a(g);return{secretKey:x,publicKey:l(x)}}function u(g){if(typeof g=="bigint")return!1;if(g instanceof t)return!0;const{secretKey:x,publicKey:v,publicKeyUncompressed:w}=i;if(n.allowedLengths||x===v)return;const E=qr("key",g).length;return E===v||E===w}function f(g,x,v=!0){if(u(g)===!0)throw new Error("first arg must be private key");if(u(x)===!1)throw new Error("second arg must be public key");const w=Ag(n,g);return t.fromHex(x).multiply(w).toBytes(v)}return Object.freeze({getPublicKey:l,getSharedSecret:f,keygen:c,Point:t,utils:{isValidSecretKey:s,isValidPublicKey:o,randomSecretKey:a,isValidPrivateKey:s,randomPrivateKey:a,normPrivateKeyToScalar:g=>Ag(n,g),precompute(g=8,x=t.BASE){return x.precompute(g,!1)}},lengths:i})}function bdt(t,e,n={}){vpe(e),oE(n,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=n.randomBytes||Nj,i=n.hmac||((A,...I)=>ime(e,A,pc(...I))),{Fp:s,Fn:o}=t,{ORDER:a,BITS:l}=o,{keygen:c,getPublicKey:u,getSharedSecret:f,utils:m,lengths:g}=vdt(t,n),x={prehash:!1,lowS:typeof n.lowS=="boolean"?n.lowS:!1,format:void 0,extraEntropy:!1},v="compact";function w(A){const I=a>>Qg;return A>I}function E(A,I){if(!o.isValidNot0(I))throw new Error(`invalid signature ${A}: out of range 1..Point.Fn.ORDER`);return I}function C(A,I){VD(I);const M=g.signature,z=I==="compact"?M:I==="recovered"?M+1:void 0;return xl(A,z,`${I} signature`)}class k{constructor(I,M,z){this.r=E("r",I),this.s=E("s",M),z!=null&&(this.recovery=z),Object.freeze(this)}static fromBytes(I,M=v){C(I,M);let z;if(M==="der"){const{r:q,s:D}=Eu.toSig(xl(I));return new k(q,D)}M==="recovered"&&(z=I[0],M="compact",I=I.subarray(1));const G=o.BYTES,te=I.subarray(0,G),Y=I.subarray(G,G*2);return new k(o.fromBytes(te),o.fromBytes(Y),z)}static fromHex(I,M){return this.fromBytes(gC(I),M)}addRecoveryBit(I){return new k(this.r,this.s,I)}recoverPublicKey(I){const M=s.ORDER,{r:z,s:G,recovery:te}=this;if(te==null||![0,1,2,3].includes(te))throw new Error("recovery id invalid");if(a*sme<M&&te>1)throw new Error("recovery id is ambiguous for h>1 curve");const q=te===2||te===3?z+a:z;if(!s.isValid(q))throw new Error("recovery id 2 or 3 invalid");const D=s.toBytes(q),_=t.fromBytes(pc(ome((te&1)===0),D)),W=o.inv(q),X=j(qr("msgHash",I)),re=o.create(-X*W),ae=o.create(G*W),Ee=t.BASE.multiplyUnsafe(re).add(_.multiplyUnsafe(ae));if(Ee.is0())throw new Error("point at infinify");return Ee.assertValidity(),Ee}hasHighS(){return w(this.s)}toBytes(I=v){if(VD(I),I==="der")return gC(Eu.hexFromSig(this));const M=o.toBytes(this.r),z=o.toBytes(this.s);if(I==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return pc(Uint8Array.of(this.recovery),M,z)}return pc(M,z)}toHex(I){return nm(this.toBytes(I))}assertValidity(){}static fromCompact(I){return k.fromBytes(qr("sig",I),"compact")}static fromDER(I){return k.fromBytes(qr("sig",I),"der")}normalizeS(){return this.hasHighS()?new k(this.r,o.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return nm(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return nm(this.toBytes("compact"))}}const O=n.bits2int||function(I){if(I.length>8192)throw new Error("input is too large");const M=BN(I),z=I.length*8-l;return z>0?M>>BigInt(z):M},j=n.bits2int_modN||function(I){return o.create(O(I))},R=sE(l);function U(A){return HD("num < 2^"+l,A,Vu,R),o.toBytes(A)}function V(A,I){return xl(A,void 0,"message"),I?xl(e(A),void 0,"prehashed message"):A}function F(A,I,M){if(["recovered","canonical"].some(re=>re in M))throw new Error("sign() legacy options not supported");const{lowS:z,prehash:G,extraEntropy:te}=b3(M,x);A=V(A,G);const Y=j(A),q=Ag(o,I),D=[U(q),U(Y)];if(te!=null&&te!==!1){const re=te===!0?r(g.secretKey):te;D.push(qr("extraEntropy",re))}const _=pc(...D),W=Y;function X(re){const ae=O(re);if(!o.isValidNot0(ae))return;const Ee=o.inv(ae),ue=t.BASE.multiply(ae).toAffine(),me=o.create(ue.x);if(me===Vu)return;const ce=o.create(Ee*o.create(W+me*q));if(ce===Vu)return;let oe=(ue.x===me?0:2)|Number(ue.y&Qg),ke=ce;return z&&w(ce)&&(ke=o.neg(ce),oe^=1),new k(me,ke,oe)}return{seed:_,k2sig:X}}function $(A,I,M={}){A=qr("message",A);const{seed:z,k2sig:G}=F(A,I,M);return Ect(e.outputLen,o.BYTES,i)(z,G)}function K(A){let I;const M=typeof A=="string"||iE(A),z=!M&&A!==null&&typeof A=="object"&&typeof A.r=="bigint"&&typeof A.s=="bigint";if(!M&&!z)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(z)I=new k(A.r,A.s);else if(M){try{I=k.fromBytes(qr("sig",A),"der")}catch(G){if(!(G instanceof Eu.Err))throw G}if(!I)try{I=k.fromBytes(qr("sig",A),"compact")}catch{return!1}}return I||!1}function H(A,I,M,z={}){const{lowS:G,prehash:te,format:Y}=b3(z,x);if(M=qr("publicKey",M),I=V(qr("message",I),te),"strict"in z)throw new Error("options.strict was renamed to lowS");const q=Y===void 0?K(A):k.fromBytes(qr("sig",A),Y);if(q===!1)return!1;try{const D=t.fromBytes(M);if(G&&q.hasHighS())return!1;const{r:_,s:W}=q,X=j(I),re=o.inv(W),ae=o.create(X*re),Ee=o.create(_*re),ue=t.BASE.multiplyUnsafe(ae).add(D.multiplyUnsafe(Ee));return ue.is0()?!1:o.create(ue.x)===_}catch{return!1}}function B(A,I,M={}){const{prehash:z}=b3(M,x);return I=V(I,z),k.fromBytes(A,"recovered").recoverPublicKey(I).toBytes()}return Object.freeze({keygen:c,getPublicKey:u,getSharedSecret:f,utils:m,lengths:g,Point:t,sign:$,verify:H,recoverPublicKey:B,Signature:k,hash:e})}function wdt(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp;let r=t.allowedPrivateKeyLengths?Array.from(new Set(t.allowedPrivateKeyLengths.map(o=>Math.ceil(o/2)))):void 0;const i=jm(e.n,{BITS:t.nBitLength,allowedLengths:r,modFromBytes:t.wrapPrivateKey}),s={Fp:n,Fn:i,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:s}}function Edt(t){const{CURVE:e,curveOpts:n}=wdt(t),r={hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,hash:t.hash,ecdsaOpts:r}}function Sdt(t,e){const n=e.Point;return Object.assign({},e,{ProjectivePoint:n,CURVE:Object.assign({},t,Bpe(n.Fn.ORDER,n.Fn.BITS))})}function Adt(t){const{CURVE:e,curveOpts:n,hash:r,ecdsaOpts:i}=Edt(t),s=xdt(e,n),o=bdt(s,r,i);return Sdt(t,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Tdt(t,e){const n=r=>Adt({...t,hash:r});return{...n(e),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const jj={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},kdt={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},pZ=BigInt(2);function Cdt(t){const e=jj.p,n=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),c=t*t*t%e,u=c*c*t%e,f=$r(u,n,e)*u%e,m=$r(f,n,e)*u%e,g=$r(m,pZ,e)*c%e,x=$r(g,i,e)*g%e,v=$r(x,s,e)*x%e,w=$r(v,a,e)*v%e,E=$r(w,l,e)*w%e,C=$r(E,a,e)*v%e,k=$r(C,n,e)*u%e,O=$r(k,o,e)*x%e,j=$r(O,r,e)*c%e,R=$r(j,pZ,e);if(!qD.eql(qD.sqr(R),t))throw new Error("Cannot find square root");return R}const qD=jm(jj.p,{sqrt:Cdt}),Ndt=Tdt({...jj,Fp:qD,lowS:!0,endo:kdt},Tpe);ev.utils.randomPrivateKey;const mZ=()=>{const t=ev.utils.randomPrivateKey(),e=GD(t),n=new Uint8Array(64);return n.set(t),n.set(e,32),{publicKey:e,secretKey:n}},GD=ev.getPublicKey;function gZ(t){try{return ev.ExtendedPoint.fromHex(t),!0}catch{return!1}}const _dt=(t,e)=>ev.sign(t,e.slice(0,32)),Idt=ev.verify,Ri=t=>cn.isBuffer(t)?t:t instanceof Uint8Array?cn.from(t.buffer,t.byteOffset,t.byteLength):cn.from(t);class Pdt{constructor(e){Object.assign(this,e)}encode(){return cn.from(f3.serialize(bT,this))}static decode(e){return f3.deserialize(bT,this,e)}static decodeUnchecked(e){return f3.deserializeUnchecked(bT,this,e)}}const bT=new Map;var lme;const Rdt=32,Qf=32;function Odt(t){return t._bn!==void 0}let yZ=1;class vt extends Pdt{constructor(e){if(super({}),this._bn=void 0,Odt(e))this._bn=e._bn;else{if(typeof e=="string"){const n=is.decode(e);if(n.length!=Qf)throw new Error("Invalid public key input");this._bn=new eZ(n)}else this._bn=new eZ(e);if(this._bn.byteLength()>Qf)throw new Error("Invalid public key input")}}static unique(){const e=new vt(yZ);return yZ+=1,new vt(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return is.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(cn);if(e.length===Qf)return e;const n=cn.alloc(32);return e.copy(n,32-e.length),n}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,n,r){const i=cn.concat([e.toBuffer(),cn.from(n),r.toBuffer()]),s=iZ(i);return new vt(s)}static createProgramAddressSync(e,n){let r=cn.alloc(0);e.forEach(function(s){if(s.length>Rdt)throw new TypeError("Max seed length exceeded");r=cn.concat([r,Ri(s)])}),r=cn.concat([r,n.toBuffer(),cn.from("ProgramDerivedAddress")]);const i=iZ(r);if(gZ(i))throw new Error("Invalid seeds, address must fall off the curve");return new vt(i)}static async createProgramAddress(e,n){return this.createProgramAddressSync(e,n)}static findProgramAddressSync(e,n){let r=255,i;for(;r!=0;){try{const s=e.concat(cn.from([r]));i=this.createProgramAddressSync(s,n)}catch(s){if(s instanceof TypeError)throw s;r--;continue}return[i,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,n){return this.findProgramAddressSync(e,n)}static isOnCurve(e){const n=new vt(e);return gZ(n.toBytes())}}lme=vt;vt.default=new lme("11111111111111111111111111111111");bT.set(vt,{kind:"struct",fields:[["_bn","u256"]]});new vt("BPFLoader1111111111111111111111111111111111");const Zg=1232,cme=127,ume=64;class dme extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(dme.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class fme extends Error{constructor(e,n){super(`Transaction was not confirmed in ${n.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(fme.prototype,"name",{value:"TransactionExpiredTimeoutError"});class Ob extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Ob.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class AC{constructor(e,n){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=n}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const n of this.keySegments()){if(e<n.length)return n[e];e-=n.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((s,o)=>{r.set(s.toBase58(),o)});const i=s=>{const o=r.get(s.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return e.map(s=>({programIdIndex:i(s.programId),accountKeyIndexes:s.keys.map(o=>i(o.pubkey)),data:s.data}))}}const En=(t="publicKey")=>ve.blob(32,t),Tg=(t="string")=>{const e=ve.struct([ve.u32("length"),ve.u32("lengthPadding"),ve.blob(ve.offset(ve.u32(),-8),"chars")],t),n=e.decode.bind(e),r=e.encode.bind(e),i=e;return i.decode=(s,o)=>n(s,o).chars.toString(),i.encode=(s,o,a)=>{const l={chars:cn.from(s,"utf8")};return r(l,o,a)},i.alloc=s=>ve.u32().span+ve.u32().span+cn.from(s,"utf8").length,i},Mdt=(t="authorized")=>ve.struct([En("staker"),En("withdrawer")],t),Ddt=(t="lockup")=>ve.struct([ve.ns64("unixTimestamp"),ve.ns64("epoch"),En("custodian")],t),Ldt=(t="voteInit")=>ve.struct([En("nodePubkey"),En("authorizedVoter"),En("authorizedWithdrawer"),ve.u8("commission")],t),Bdt=(t="voteAuthorizeWithSeedArgs")=>ve.struct([ve.u32("voteAuthorizationType"),En("currentAuthorityDerivedKeyOwnerPubkey"),Tg("currentAuthorityDerivedKeySeed"),En("newAuthorized")],t);function hme(t,e){const n=i=>{if(i.span>=0)return i.span;if(typeof i.alloc=="function")return i.alloc(e[i.property]);if("count"in i&&"elementLayout"in i){const s=e[i.property];if(Array.isArray(s))return s.length*n(i.elementLayout)}else if("fields"in i)return hme({layout:i},e[i.property]);return 0};let r=0;return t.layout.fields.forEach(i=>{r+=n(i)}),r}function _a(t){let e=0,n=0;for(;;){let r=t.shift();if(e|=(r&127)<<n*7,n+=1,(r&128)===0)break}return e}function Ia(t,e){let n=e;for(;;){let r=n&127;if(n>>=7,n==0){t.push(r);break}else r|=128,t.push(r)}}function Gr(t,e){if(!t)throw new Error(e||"Assertion failed")}class zN{constructor(e,n){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=n}static compile(e,n){const r=new Map,i=o=>{const a=o.toBase58();let l=r.get(a);return l===void 0&&(l={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(a,l)),l},s=i(n);s.isSigner=!0,s.isWritable=!0;for(const o of e){i(o.programId).isInvoked=!0;for(const a of o.keys){const l=i(a.pubkey);l.isSigner||(l.isSigner=a.isSigner),l.isWritable||(l.isWritable=a.isWritable)}}return new zN(n,r)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];Gr(e.length<=256,"Max static account keys length exceeded");const n=e.filter(([,l])=>l.isSigner&&l.isWritable),r=e.filter(([,l])=>l.isSigner&&!l.isWritable),i=e.filter(([,l])=>!l.isSigner&&l.isWritable),s=e.filter(([,l])=>!l.isSigner&&!l.isWritable),o={numRequiredSignatures:n.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:s.length};{Gr(n.length>0,"Expected at least one writable signer key");const[l]=n[0];Gr(l===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const a=[...n.map(([l])=>new vt(l)),...r.map(([l])=>new vt(l)),...i.map(([l])=>new vt(l)),...s.map(([l])=>new vt(l))];return[o,a]}extractTableLookup(e){const[n,r]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[i,s]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(n.length===0&&i.length===0))return[{accountKey:e.key,writableIndexes:n,readonlyIndexes:i},{writable:r,readonly:s}]}drainKeysFoundInLookupTable(e,n){const r=new Array,i=new Array;for(const[s,o]of this.keyMetaMap.entries())if(n(o)){const a=new vt(s),l=e.findIndex(c=>c.equals(a));l>=0&&(Gr(l<256,"Max lookup table index exceeded"),r.push(l),i.push(a),this.keyMetaMap.delete(s))}return[r,i]}}const pme="Reached end of buffer unexpectedly";function ju(t){if(t.length===0)throw new Error(pme);return t.shift()}function Pa(t,...e){const[n]=e;if(e.length===2?n+(e[1]??0)>t.length:n>=t.length)throw new Error(pme);return t.splice(...e)}class xd{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(n=>new vt(n)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(n=>this.indexToProgramIds.set(n.programIdIndex,this.accountKeys[n.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:is.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new AC(this.staticAccountKeys)}static compile(e){const n=zN.compile(e.instructions,e.payerKey),[r,i]=n.getMessageComponents(),o=new AC(i).compileInstructions(e.instructions).map(a=>({programIdIndex:a.programIdIndex,accounts:a.accountKeyIndexes,data:is.encode(a.data)}));return new xd({header:r,accountKeys:i,recentBlockhash:e.recentBlockhash,instructions:o})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const n=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const r=e-n,s=this.accountKeys.length-n-this.header.numReadonlyUnsignedAccounts;return r<s}else{const r=n-this.header.numReadonlySignedAccounts;return e<r}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,n)=>!this.isProgramId(n))}serialize(){const e=this.accountKeys.length;let n=[];Ia(n,e);const r=this.instructions.map(f=>{const{accounts:m,programIdIndex:g}=f,x=Array.from(is.decode(f.data));let v=[];Ia(v,m.length);let w=[];return Ia(w,x.length),{programIdIndex:g,keyIndicesCount:cn.from(v),keyIndices:m,dataLength:cn.from(w),data:x}});let i=[];Ia(i,r.length);let s=cn.alloc(Zg);cn.from(i).copy(s);let o=i.length;r.forEach(f=>{const g=ve.struct([ve.u8("programIdIndex"),ve.blob(f.keyIndicesCount.length,"keyIndicesCount"),ve.seq(ve.u8("keyIndex"),f.keyIndices.length,"keyIndices"),ve.blob(f.dataLength.length,"dataLength"),ve.seq(ve.u8("userdatum"),f.data.length,"data")]).encode(f,s,o);o+=g}),s=s.slice(0,o);const a=ve.struct([ve.blob(1,"numRequiredSignatures"),ve.blob(1,"numReadonlySignedAccounts"),ve.blob(1,"numReadonlyUnsignedAccounts"),ve.blob(n.length,"keyCount"),ve.seq(En("key"),e,"keys"),En("recentBlockhash")]),l={numRequiredSignatures:cn.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:cn.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:cn.from([this.header.numReadonlyUnsignedAccounts]),keyCount:cn.from(n),keys:this.accountKeys.map(f=>Ri(f.toBytes())),recentBlockhash:is.decode(this.recentBlockhash)};let c=cn.alloc(2048);const u=a.encode(l,c);return s.copy(c,u),c.slice(0,u+s.length)}static from(e){let n=[...e];const r=ju(n);if(r!==(r&cme))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=ju(n),s=ju(n),o=_a(n);let a=[];for(let m=0;m<o;m++){const g=Pa(n,0,Qf);a.push(new vt(cn.from(g)))}const l=Pa(n,0,Qf),c=_a(n);let u=[];for(let m=0;m<c;m++){const g=ju(n),x=_a(n),v=Pa(n,0,x),w=_a(n),E=Pa(n,0,w),C=is.encode(cn.from(E));u.push({programIdIndex:g,accounts:v,data:C})}const f={header:{numRequiredSignatures:r,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:is.encode(cn.from(l)),accountKeys:a,instructions:u};return new xd(f)}}class Ww{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const n of this.addressTableLookups)e+=n.readonlyIndexes.length+n.writableIndexes.length;return e}getAccountKeys(e){let n;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");n=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)n=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new AC(this.staticAccountKeys,n)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const n=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(e>=r){const i=e-r,s=this.addressTableLookups.reduce((o,a)=>o+a.writableIndexes.length,0);return i<s}else if(e>=this.header.numRequiredSignatures){const i=e-n,o=r-n-this.header.numReadonlyUnsignedAccounts;return i<o}else{const i=n-this.header.numReadonlySignedAccounts;return e<i}}resolveAddressTableLookups(e){const n={writable:[],readonly:[]};for(const r of this.addressTableLookups){const i=e.find(s=>s.key.equals(r.accountKey));if(!i)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const s of r.writableIndexes)if(s<i.state.addresses.length)n.writable.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${r.accountKey.toBase58()}`);for(const s of r.readonlyIndexes)if(s<i.state.addresses.length)n.readonly.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${r.accountKey.toBase58()}`)}return n}static compile(e){const n=zN.compile(e.instructions,e.payerKey),r=new Array,i={writable:new Array,readonly:new Array},s=e.addressLookupTableAccounts||[];for(const u of s){const f=n.extractTableLookup(u);if(f!==void 0){const[m,{writable:g,readonly:x}]=f;r.push(m),i.writable.push(...g),i.readonly.push(...x)}}const[o,a]=n.getMessageComponents(),c=new AC(a,i).compileInstructions(e.instructions);return new Ww({header:o,staticAccountKeys:a,recentBlockhash:e.recentBlockhash,compiledInstructions:c,addressTableLookups:r})}serialize(){const e=Array();Ia(e,this.staticAccountKeys.length);const n=this.serializeInstructions(),r=Array();Ia(r,this.compiledInstructions.length);const i=this.serializeAddressTableLookups(),s=Array();Ia(s,this.addressTableLookups.length);const o=ve.struct([ve.u8("prefix"),ve.struct([ve.u8("numRequiredSignatures"),ve.u8("numReadonlySignedAccounts"),ve.u8("numReadonlyUnsignedAccounts")],"header"),ve.blob(e.length,"staticAccountKeysLength"),ve.seq(En(),this.staticAccountKeys.length,"staticAccountKeys"),En("recentBlockhash"),ve.blob(r.length,"instructionsLength"),ve.blob(n.length,"serializedInstructions"),ve.blob(s.length,"addressTableLookupsLength"),ve.blob(i.length,"serializedAddressTableLookups")]),a=new Uint8Array(Zg),c=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(u=>u.toBytes()),recentBlockhash:is.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:n,addressTableLookupsLength:new Uint8Array(s),serializedAddressTableLookups:i},a);return a.slice(0,c)}serializeInstructions(){let e=0;const n=new Uint8Array(Zg);for(const r of this.compiledInstructions){const i=Array();Ia(i,r.accountKeyIndexes.length);const s=Array();Ia(s,r.data.length);const o=ve.struct([ve.u8("programIdIndex"),ve.blob(i.length,"encodedAccountKeyIndexesLength"),ve.seq(ve.u8(),r.accountKeyIndexes.length,"accountKeyIndexes"),ve.blob(s.length,"encodedDataLength"),ve.blob(r.data.length,"data")]);e+=o.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(i),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(s),data:r.data},n,e)}return n.slice(0,e)}serializeAddressTableLookups(){let e=0;const n=new Uint8Array(Zg);for(const r of this.addressTableLookups){const i=Array();Ia(i,r.writableIndexes.length);const s=Array();Ia(s,r.readonlyIndexes.length);const o=ve.struct([En("accountKey"),ve.blob(i.length,"encodedWritableIndexesLength"),ve.seq(ve.u8(),r.writableIndexes.length,"writableIndexes"),ve.blob(s.length,"encodedReadonlyIndexesLength"),ve.seq(ve.u8(),r.readonlyIndexes.length,"readonlyIndexes")]);e+=o.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(i),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(s),readonlyIndexes:r.readonlyIndexes},n,e)}return n.slice(0,e)}static deserialize(e){let n=[...e];const r=ju(n),i=r&cme;Gr(r!==i,"Expected versioned message but received legacy message");const s=i;Gr(s===0,`Expected versioned message with version 0 but found version ${s}`);const o={numRequiredSignatures:ju(n),numReadonlySignedAccounts:ju(n),numReadonlyUnsignedAccounts:ju(n)},a=[],l=_a(n);for(let x=0;x<l;x++)a.push(new vt(Pa(n,0,Qf)));const c=is.encode(Pa(n,0,Qf)),u=_a(n),f=[];for(let x=0;x<u;x++){const v=ju(n),w=_a(n),E=Pa(n,0,w),C=_a(n),k=new Uint8Array(Pa(n,0,C));f.push({programIdIndex:v,accountKeyIndexes:E,data:k})}const m=_a(n),g=[];for(let x=0;x<m;x++){const v=new vt(Pa(n,0,Qf)),w=_a(n),E=Pa(n,0,w),C=_a(n),k=Pa(n,0,C);g.push({accountKey:v,writableIndexes:E,readonlyIndexes:k})}return new Ww({header:o,staticAccountKeys:a,recentBlockhash:c,compiledInstructions:f,addressTableLookups:g})}}let gf=(function(t){return t[t.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",t[t.PROCESSED=1]="PROCESSED",t[t.TIMED_OUT=2]="TIMED_OUT",t[t.NONCE_INVALID=3]="NONCE_INVALID",t})({});const jdt=cn.alloc(ume).fill(0);class Mi{constructor(e){this.keys=void 0,this.programId=void 0,this.data=cn.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:n,isWritable:r})=>({pubkey:e.toJSON(),isSigner:n,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class Ma{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:n,nonceInfo:r}=e;this.minNonceContextSlot=n,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:n,lastValidBlockHeight:r}=e;this.recentBlockhash=n,this.lastValidBlockHeight=r}else{const{recentBlockhash:n,nonceInfo:r}=e;r&&(this.nonceInfo=r),this.recentBlockhash=n}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(n=>{"instructions"in n?this.instructions=this.instructions.concat(n.instructions):"data"in n&&"programId"in n&&"keys"in n?this.instructions.push(n):this.instructions.push(new Mi(n))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,n;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?n=[this.nonceInfo.nonceInstruction,...this.instructions]:n=this.instructions):(e=this.recentBlockhash,n=this.instructions),!e)throw new Error("Transaction recentBlockhash required");n.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let v=0;v<n.length;v++)if(n[v].programId===void 0)throw new Error(`Transaction instruction index ${v} has undefined program id`);const i=[],s=[];n.forEach(v=>{v.keys.forEach(E=>{s.push({...E})});const w=v.programId.toString();i.includes(w)||i.push(w)}),i.forEach(v=>{s.push({pubkey:new vt(v),isSigner:!1,isWritable:!1})});const o=[];s.forEach(v=>{const w=v.pubkey.toString(),E=o.findIndex(C=>C.pubkey.toString()===w);E>-1?(o[E].isWritable=o[E].isWritable||v.isWritable,o[E].isSigner=o[E].isSigner||v.isSigner):o.push(v)}),o.sort(function(v,w){if(v.isSigner!==w.isSigner)return v.isSigner?-1:1;if(v.isWritable!==w.isWritable)return v.isWritable?-1:1;const E={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return v.pubkey.toBase58().localeCompare(w.pubkey.toBase58(),"en",E)});const a=o.findIndex(v=>v.pubkey.equals(r));if(a>-1){const[v]=o.splice(a,1);v.isSigner=!0,v.isWritable=!0,o.unshift(v)}else o.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const v of this.signatures){const w=o.findIndex(E=>E.pubkey.equals(v.publicKey));if(w>-1)o[w].isSigner||(o[w].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${v.publicKey.toString()}`)}let l=0,c=0,u=0;const f=[],m=[];o.forEach(({pubkey:v,isSigner:w,isWritable:E})=>{w?(f.push(v.toString()),l+=1,E||(c+=1)):(m.push(v.toString()),E||(u+=1))});const g=f.concat(m),x=n.map(v=>{const{data:w,programId:E}=v;return{programIdIndex:g.indexOf(E.toString()),accounts:v.keys.map(C=>g.indexOf(C.pubkey.toString())),data:is.encode(w)}});return x.forEach(v=>{Gr(v.programIdIndex>=0),v.accounts.forEach(w=>Gr(w>=0))}),new xd({header:{numRequiredSignatures:l,numReadonlySignedAccounts:c,numReadonlyUnsignedAccounts:u},accountKeys:g,recentBlockhash:e,instructions:x})}_compile(){const e=this.compileMessage(),n=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===n.length&&this.signatures.every((i,s)=>n[s].equals(i.publicKey))||(this.signatures=n.map(r=>({signature:null,publicKey:r}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const n=new Set;this.signatures=e.filter(r=>{const i=r.toString();return n.has(i)?!1:(n.add(i),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...e){if(e.length===0)throw new Error("No signers");const n=new Set,r=[];for(const s of e){const o=s.publicKey.toString();n.has(o)||(n.add(o),r.push(s))}this.signatures=r.map(s=>({signature:null,publicKey:s.publicKey}));const i=this._compile();this._partialSign(i,...r)}partialSign(...e){if(e.length===0)throw new Error("No signers");const n=new Set,r=[];for(const s of e){const o=s.publicKey.toString();n.has(o)||(n.add(o),r.push(s))}const i=this._compile();this._partialSign(i,...r)}_partialSign(e,...n){const r=e.serialize();n.forEach(i=>{const s=_dt(r,i.secretKey);this._addSignature(i.publicKey,Ri(s))})}addSignature(e,n){this._compile(),this._addSignature(e,n)}_addSignature(e,n){Gr(n.length===64);const r=this.signatures.findIndex(i=>e.equals(i.publicKey));if(r<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[r].signature=cn.from(n)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,n){const r={};for(const{signature:i,publicKey:s}of this.signatures)i===null?n&&(r.missing||(r.missing=[])).push(s):Idt(i,e,s.toBytes())||(r.invalid||(r.invalid=[])).push(s);return r.invalid||r.missing?r:void 0}serialize(e){const{requireAllSignatures:n,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),i=this.serializeMessage();if(r){const s=this._getMessageSignednessErrors(i,n);if(s){let o="Signature verification failed.";throw s.invalid&&(o+=`
Invalid signature for public key${s.invalid.length===1?"":"(s)"} [\`${s.invalid.map(a=>a.toBase58()).join("`, `")}\`].`),s.missing&&(o+=`
Missing signature for public key${s.missing.length===1?"":"(s)"} [\`${s.missing.map(a=>a.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(i)}_serialize(e){const{signatures:n}=this,r=[];Ia(r,n.length);const i=r.length+n.length*64+e.length,s=cn.alloc(i);return Gr(n.length<256),cn.from(r).copy(s,0),n.forEach(({signature:o},a)=>{o!==null&&(Gr(o.length===64,"signature has invalid length"),cn.from(o).copy(s,r.length+a*64))}),e.copy(s,r.length+n.length*64),Gr(s.length<=Zg,`Transaction too large: ${s.length} > ${Zg}`),s}get keys(){return Gr(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return Gr(this.instructions.length===1),this.instructions[0].programId}get data(){return Gr(this.instructions.length===1),this.instructions[0].data}static from(e){let n=[...e];const r=_a(n);let i=[];for(let s=0;s<r;s++){const o=Pa(n,0,ume);i.push(is.encode(cn.from(o)))}return Ma.populate(xd.from(n),i)}static populate(e,n=[]){const r=new Ma;return r.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(r.feePayer=e.accountKeys[0]),n.forEach((i,s)=>{const o={signature:i==is.encode(jdt)?null:is.decode(i),publicKey:e.accountKeys[s]};r.signatures.push(o)}),e.instructions.forEach(i=>{const s=i.accounts.map(o=>{const a=e.accountKeys[o];return{pubkey:a,isSigner:r.signatures.some(l=>l.publicKey.toString()===a.toString())||e.isAccountSigner(o),isWritable:e.isAccountWritable(o)}});r.instructions.push(new Mi({keys:s,programId:e.accountKeys[i.programIdIndex],data:is.decode(i.data)}))}),r._message=e,r._json=r.toJSON(),r}}class mme{constructor(e){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=e.payerKey,this.instructions=e.instructions,this.recentBlockhash=e.recentBlockhash}static decompile(e,n){const{header:r,compiledInstructions:i,recentBlockhash:s}=e,{numRequiredSignatures:o,numReadonlySignedAccounts:a,numReadonlyUnsignedAccounts:l}=r,c=o-a;Gr(c>0,"Message header is invalid");const u=e.staticAccountKeys.length-o-l;Gr(u>=0,"Message header is invalid");const f=e.getAccountKeys(n),m=f.get(0);if(m===void 0)throw new Error("Failed to decompile message because no account keys were found");const g=[];for(const x of i){const v=[];for(const E of x.accountKeyIndexes){const C=f.get(E);if(C===void 0)throw new Error(`Failed to find key for account key index ${E}`);const k=E<o;let O;k?O=E<c:E<f.staticAccountKeys.length?O=E-o<u:O=E-f.staticAccountKeys.length<f.accountKeysFromLookups.writable.length,v.push({pubkey:C,isSigner:E<r.numRequiredSignatures,isWritable:O})}const w=f.get(x.programIdIndex);if(w===void 0)throw new Error(`Failed to find program id for program id index ${x.programIdIndex}`);g.push(new Mi({programId:w,data:Ri(x.data),keys:v}))}return new mme({payerKey:m,instructions:g,recentBlockhash:s})}compileToLegacyMessage(){return xd.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(e){return Ww.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:e})}}const Udt=160,Fdt=64,$dt=Udt/Fdt,zdt=1e3/$dt,Hmt=new vt("SysvarC1ock11111111111111111111111111111111");new vt("SysvarEpochSchedu1e111111111111111111111111");new vt("Sysvar1nstructions1111111111111111111111111");const w3=new vt("SysvarRecentB1ockHashes11111111111111111111"),xZ=new vt("SysvarRent111111111111111111111111111111111");new vt("SysvarRewards111111111111111111111111111111");new vt("SysvarS1otHashes111111111111111111111111111");new vt("SysvarS1otHistory11111111111111111111111111");new vt("SysvarStakeHistory1111111111111111111111111");class vZ extends Error{constructor({action:e,signature:n,transactionMessage:r,logs:i}){const s=i?`Logs: 
${JSON.stringify(i.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let a;switch(e){case"send":a=`Transaction ${n} resulted in an error. 
${r}. `+s+o;break;case"simulate":a=`Simulation failed. 
Message: ${r}. 
`+s+o;break;default:a=`Unknown action '${(l=>l)(e)}'`}super(a),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=n,this.transactionMessage=r,this.transactionLogs=i||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const e=this.transactionLogs;if(!(e!=null&&typeof e=="object"&&"then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((n,r)=>{e.getTransaction(this.signature).then(i=>{if(i&&i.meta&&i.meta.logMessages){const s=i.meta.logMessages;this.transactionLogs=s,n(s)}else r(new Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}}class Dt extends Error{constructor({code:e,message:n,data:r},i){super(i!=null?`${i}: ${n}`:n),this.code=void 0,this.data=void 0,this.code=e,this.data=r,this.name="SolanaJSONRPCError"}}function lg(t){return new Promise(e=>setTimeout(e,t))}function bs(t,e){const n=t.layout.span>=0?t.layout.span:hme(t,e),r=cn.alloc(n),i=Object.assign({instruction:t.index},e);return t.layout.encode(i,r),r}const Hdt=ve.nu64("lamportsPerSignature"),gme=ve.struct([ve.u32("version"),ve.u32("state"),En("authorizedPubkey"),En("nonce"),ve.struct([Hdt],"feeCalculator")]),bZ=gme.span;class Uj{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const n=gme.decode(Ri(e),0);return new Uj({authorizedPubkey:new vt(n.authorizedPubkey),nonce:new vt(n.nonce).toString(),feeCalculator:n.feeCalculator})}}function xx(t){const e=ve.blob(8,t),n=e.decode.bind(e),r=e.encode.bind(e),i=e,s=Out();return i.decode=(o,a)=>{const l=n(o,a);return s.decode(l)},i.encode=(o,a,l)=>{const c=s.encode(o);return r(c,a,l)},i}const ma=Object.freeze({Create:{index:0,layout:ve.struct([ve.u32("instruction"),ve.ns64("lamports"),ve.ns64("space"),En("programId")])},Assign:{index:1,layout:ve.struct([ve.u32("instruction"),En("programId")])},Transfer:{index:2,layout:ve.struct([ve.u32("instruction"),xx("lamports")])},CreateWithSeed:{index:3,layout:ve.struct([ve.u32("instruction"),En("base"),Tg("seed"),ve.ns64("lamports"),ve.ns64("space"),En("programId")])},AdvanceNonceAccount:{index:4,layout:ve.struct([ve.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:ve.struct([ve.u32("instruction"),ve.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:ve.struct([ve.u32("instruction"),En("authorized")])},AuthorizeNonceAccount:{index:7,layout:ve.struct([ve.u32("instruction"),En("authorized")])},Allocate:{index:8,layout:ve.struct([ve.u32("instruction"),ve.ns64("space")])},AllocateWithSeed:{index:9,layout:ve.struct([ve.u32("instruction"),En("base"),Tg("seed"),ve.ns64("space"),En("programId")])},AssignWithSeed:{index:10,layout:ve.struct([ve.u32("instruction"),En("base"),Tg("seed"),En("programId")])},TransferWithSeed:{index:11,layout:ve.struct([ve.u32("instruction"),xx("lamports"),Tg("seed"),En("programId")])},UpgradeNonceAccount:{index:12,layout:ve.struct([ve.u32("instruction")])}});class vx{constructor(){}static createAccount(e){const n=ma.Create,r=bs(n,{lamports:e.lamports,space:e.space,programId:Ri(e.programId.toBuffer())});return new Mi({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}static transfer(e){let n,r;if("basePubkey"in e){const i=ma.TransferWithSeed;n=bs(i,{lamports:BigInt(e.lamports),seed:e.seed,programId:Ri(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{const i=ma.Transfer;n=bs(i,{lamports:BigInt(e.lamports)}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new Mi({keys:r,programId:this.programId,data:n})}static assign(e){let n,r;if("basePubkey"in e){const i=ma.AssignWithSeed;n=bs(i,{base:Ri(e.basePubkey.toBuffer()),seed:e.seed,programId:Ri(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=ma.Assign;n=bs(i,{programId:Ri(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new Mi({keys:r,programId:this.programId,data:n})}static createAccountWithSeed(e){const n=ma.CreateWithSeed,r=bs(n,{base:Ri(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:Ri(e.programId.toBuffer())});let i=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||i.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new Mi({keys:i,programId:this.programId,data:r})}static createNonceAccount(e){const n=new Ma;"basePubkey"in e&&"seed"in e?n.add(vx.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:bZ,programId:this.programId})):n.add(vx.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:bZ,programId:this.programId}));const r={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return n.add(this.nonceInitialize(r)),n}static nonceInitialize(e){const n=ma.InitializeNonceAccount,r=bs(n,{authorized:Ri(e.authorizedPubkey.toBuffer())}),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:w3,isSigner:!1,isWritable:!1},{pubkey:xZ,isSigner:!1,isWritable:!1}],programId:this.programId,data:r};return new Mi(i)}static nonceAdvance(e){const n=ma.AdvanceNonceAccount,r=bs(n),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:w3,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new Mi(i)}static nonceWithdraw(e){const n=ma.WithdrawNonceAccount,r=bs(n,{lamports:e.lamports});return new Mi({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:w3,isSigner:!1,isWritable:!1},{pubkey:xZ,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static nonceAuthorize(e){const n=ma.AuthorizeNonceAccount,r=bs(n,{authorized:Ri(e.newAuthorizedPubkey.toBuffer())});return new Mi({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static allocate(e){let n,r;if("basePubkey"in e){const i=ma.AllocateWithSeed;n=bs(i,{base:Ri(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:Ri(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=ma.Allocate;n=bs(i,{space:e.space}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new Mi({keys:r,programId:this.programId,data:n})}}vx.programId=new vt("11111111111111111111111111111111");new vt("BPFLoader2111111111111111111111111111111111");function Vdt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var E3,wZ;function qdt(){if(wZ)return E3;wZ=1;var t=Object.prototype.toString,e=Object.keys||function(r){var i=[];for(var s in r)i.push(s);return i};function n(r,i){var s,o,a,l,c,u,f;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return n(r.toJSON(),i);if(f=t.call(r),f==="[object Array]"){for(a="[",o=r.length-1,s=0;s<o;s++)a+=n(r[s],!0)+",";return o>-1&&(a+=n(r[s],!0)),a+"]"}else if(f==="[object Object]"){for(l=e(r).sort(),o=l.length,a="",s=0;s<o;)c=l[s],u=n(r[c],!1),u!==void 0&&(a&&(a+=","),a+=JSON.stringify(c)+":"+u),s++;return"{"+a+"}"}else return JSON.stringify(r);case"function":case"undefined":return i?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}return E3=function(r){var i=n(r,!1);if(i!==void 0)return""+i},E3}var Gdt=qdt(),EZ=Vdt(Gdt);const xb=32;function S3(t){let e=0;for(;t>1;)t/=2,e++;return e}function Kdt(t){return t===0?1:(t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t|=t>>32,t+1)}class Wdt{constructor(e,n,r,i,s){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=n,this.warmup=r,this.firstNormalEpoch=i,this.firstNormalSlot=s}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const n=S3(Kdt(e+xb+1))-S3(xb)-1,r=this.getSlotsInEpoch(n),i=e-(r-xb);return[n,i]}else{const n=e-this.firstNormalSlot,r=Math.floor(n/this.slotsPerEpoch),i=this.firstNormalEpoch+r,s=n%this.slotsPerEpoch;return[i,s]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*xb:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+S3(xb)):this.slotsPerEpoch}}var Ydt=globalThis.fetch;class Jdt extends pdt{constructor(e,n,r){const i=s=>{const o=fdt(s,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...n});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(i,e,n,r),this.underlyingSocket=void 0}call(...e){var r;const n=(r=this.underlyingSocket)==null?void 0:r.readyState;return n===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+n+")"))}notify(...e){var r;const n=(r=this.underlyingSocket)==null?void 0:r.readyState;return n===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+n+")"))}}function Xdt(t,e){let n;try{n=t.layout.decode(e)}catch(r){throw new Error("invalid instruction; "+r)}if(n.typeIndex!==t.index)throw new Error(`invalid account data; account type mismatch ${n.typeIndex} != ${t.index}`);return n}const SZ=56;class AZ{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const n=Xdt(Qdt,e),r=e.length-SZ;Gr(r>=0,"lookup table is invalid"),Gr(r%32===0,"lookup table is invalid");const i=r/32,{addresses:s}=ve.struct([ve.seq(En(),i,"addresses")]).decode(e.slice(SZ));return{deactivationSlot:n.deactivationSlot,lastExtendedSlot:n.lastExtendedSlot,lastExtendedSlotStartIndex:n.lastExtendedStartIndex,authority:n.authority.length!==0?new vt(n.authority[0]):void 0,addresses:s.map(o=>new vt(o))}}}const Qdt={index:1,layout:ve.struct([ve.u32("typeIndex"),xx("deactivationSlot"),ve.nu64("lastExtendedSlot"),ve.u8("lastExtendedStartIndex"),ve.u8(),ve.seq(En(),ve.offset(ve.u8(),-1),"authority")])},Zdt=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function eft(t){const e=t.match(Zdt);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${t}\``);const[n,r,i,s]=e,o=t.startsWith("https:")?"wss:":"ws:",a=i==null?null:parseInt(i.slice(1),10),l=a==null?"":`:${a+1}`;return`${o}//${r}${l}${s}`}const Br=cE(Lj(vt),ut(),t=>new vt(t)),yme=Bj([ut(),Or("base64")]),Fj=cE(Lj(cn),yme,t=>cn.from(t[0],"base64")),tft=30*1e3;function nft(t){if(/^https?:/.test(t)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return t}function dr(t){let e,n;if(typeof t=="string")e=t;else if(t){const{commitment:r,...i}=t;e=r,n=i}return{commitment:e,config:n}}function TZ(t){return t.map(e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e)}function xme(t){return Ys([nt({jsonrpc:Or("2.0"),id:ut(),result:t}),nt({jsonrpc:Or("2.0"),id:ut(),error:nt({code:tv(),message:ut(),data:zt(Fut())})})])}const rft=xme(tv());function pn(t){return cE(xme(t),rft,e=>"error"in e?e:{...e,result:dt(e.result,t)})}function ei(t){return pn(nt({context:nt({slot:Oe()}),value:t}))}function HN(t){return nt({context:nt({slot:Oe()}),value:t})}function A3(t,e){return t===0?new Ww({header:e.header,staticAccountKeys:e.accountKeys.map(n=>new vt(n)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(n=>({programIdIndex:n.programIdIndex,accountKeyIndexes:n.accounts,data:is.decode(n.data)})),addressTableLookups:e.addressTableLookups}):new xd(e)}const ift=nt({foundation:Oe(),foundationTerm:Oe(),initial:Oe(),taper:Oe(),terminal:Oe()}),sft=pn(pt(gt(nt({epoch:Oe(),effectiveSlot:Oe(),amount:Oe(),postBalance:Oe(),commission:zt(gt(Oe()))})))),oft=pt(nt({slot:Oe(),prioritizationFee:Oe()})),aft=nt({total:Oe(),validator:Oe(),foundation:Oe(),epoch:Oe()}),lft=nt({epoch:Oe(),slotIndex:Oe(),slotsInEpoch:Oe(),absoluteSlot:Oe(),blockHeight:zt(Oe()),transactionCount:zt(Oe())}),cft=nt({slotsPerEpoch:Oe(),leaderScheduleSlotOffset:Oe(),warmup:Mc(),firstNormalEpoch:Oe(),firstNormalSlot:Oe()}),uft=Xpe(ut(),pt(Oe())),Fm=gt(Ys([nt({}),ut()])),dft=nt({err:Fm}),fft=Or("receivedSignature"),hft=nt({"solana-core":ut(),"feature-set":zt(Oe())}),pft=nt({program:ut(),programId:Br,parsed:tv()}),mft=nt({programId:Br,accounts:pt(Br),data:ut()}),kZ=ei(nt({err:gt(Ys([nt({}),ut()])),logs:gt(pt(ut())),accounts:zt(gt(pt(gt(nt({executable:Mc(),owner:ut(),lamports:Oe(),data:pt(ut()),rentEpoch:zt(Oe())}))))),unitsConsumed:zt(Oe()),returnData:zt(gt(nt({programId:ut(),data:Bj([ut(),Or("base64")])}))),innerInstructions:zt(gt(pt(nt({index:Oe(),instructions:pt(Ys([pft,mft]))}))))})),gft=ei(nt({byIdentity:Xpe(ut(),pt(Oe())),range:nt({firstSlot:Oe(),lastSlot:Oe()})}));function yft(t,e,n,r,i,s){const o=n||Ydt;let a;s!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let l;return r&&(l=async(u,f)=>{const m=await new Promise((g,x)=>{try{r(u,f,(v,w)=>g([v,w]))}catch(v){x(v)}});return await o(...m)}),new udt(async(u,f)=>{const m={method:"POST",body:u,agent:a,headers:Object.assign({"Content-Type":"application/json"},e||{},yht)};try{let g=5,x,v=500;for(;l?x=await l(t,m):x=await o(t,m),!(x.status!==429||i===!0||(g-=1,g===0));)console.error(`Server responded with ${x.status} ${x.statusText}.  Retrying after ${v}ms delay...`),await lg(v),v*=2;const w=await x.text();x.ok?f(null,w):f(new Error(`${x.status} ${x.statusText}: ${w}`))}catch(g){g instanceof Error&&f(g)}},{})}function xft(t){return(e,n)=>new Promise((r,i)=>{t.request(e,n,(s,o)=>{if(s){i(s);return}r(o)})})}function vft(t){return e=>new Promise((n,r)=>{e.length===0&&n([]);const i=e.map(s=>t.request(s.methodName,s.args));t.request(i,(s,o)=>{if(s){r(s);return}n(o)})})}const bft=pn(ift),wft=pn(aft),Eft=pn(oft),Sft=pn(lft),Aft=pn(cft),Tft=pn(uft),kft=pn(Oe()),Cft=ei(nt({total:Oe(),circulating:Oe(),nonCirculating:Oe(),nonCirculatingAccounts:pt(Br)})),KD=nt({amount:ut(),uiAmount:gt(Oe()),decimals:Oe(),uiAmountString:zt(ut())}),Nft=ei(pt(nt({address:Br,amount:ut(),uiAmount:gt(Oe()),decimals:Oe(),uiAmountString:zt(ut())}))),_ft=ei(pt(nt({pubkey:Br,account:nt({executable:Mc(),owner:Br,lamports:Oe(),data:Fj,rentEpoch:Oe()})}))),WD=nt({program:ut(),parsed:tv(),space:Oe()}),Ift=ei(pt(nt({pubkey:Br,account:nt({executable:Mc(),owner:Br,lamports:Oe(),data:WD,rentEpoch:Oe()})}))),Pft=ei(pt(nt({lamports:Oe(),address:Br}))),Yw=nt({executable:Mc(),owner:Br,lamports:Oe(),data:Fj,rentEpoch:Oe()}),Rft=nt({pubkey:Br,account:Yw}),Oft=cE(Ys([Lj(cn),WD]),Ys([yme,WD]),t=>Array.isArray(t)?dt(t,Fj):t),YD=nt({executable:Mc(),owner:Br,lamports:Oe(),data:Oft,rentEpoch:Oe()}),Mft=nt({pubkey:Br,account:YD}),Dft=nt({state:Ys([Or("active"),Or("inactive"),Or("activating"),Or("deactivating")]),active:Oe(),inactive:Oe()}),Lft=pn(pt(nt({signature:ut(),slot:Oe(),err:Fm,memo:gt(ut()),blockTime:zt(gt(Oe()))}))),Bft=pn(pt(nt({signature:ut(),slot:Oe(),err:Fm,memo:gt(ut()),blockTime:zt(gt(Oe()))}))),jft=nt({subscription:Oe(),result:HN(Yw)}),Uft=nt({pubkey:Br,account:Yw}),Fft=nt({subscription:Oe(),result:HN(Uft)}),$ft=nt({parent:Oe(),slot:Oe(),root:Oe()}),zft=nt({subscription:Oe(),result:$ft}),Hft=Ys([nt({type:Ys([Or("firstShredReceived"),Or("completed"),Or("optimisticConfirmation"),Or("root")]),slot:Oe(),timestamp:Oe()}),nt({type:Or("createdBank"),parent:Oe(),slot:Oe(),timestamp:Oe()}),nt({type:Or("frozen"),slot:Oe(),timestamp:Oe(),stats:nt({numTransactionEntries:Oe(),numSuccessfulTransactions:Oe(),numFailedTransactions:Oe(),maxTransactionsPerEntry:Oe()})}),nt({type:Or("dead"),slot:Oe(),timestamp:Oe(),err:ut()})]),Vft=nt({subscription:Oe(),result:Hft}),qft=nt({subscription:Oe(),result:HN(Ys([dft,fft]))}),Gft=nt({subscription:Oe(),result:Oe()}),Kft=nt({pubkey:ut(),gossip:gt(ut()),tpu:gt(ut()),rpc:gt(ut()),version:gt(ut())}),CZ=nt({votePubkey:ut(),nodePubkey:ut(),activatedStake:Oe(),epochVoteAccount:Mc(),epochCredits:pt(Bj([Oe(),Oe(),Oe()])),commission:Oe(),lastVote:Oe(),rootSlot:gt(Oe())}),Wft=pn(nt({current:pt(CZ),delinquent:pt(CZ)})),Yft=Ys([Or("processed"),Or("confirmed"),Or("finalized")]),Jft=nt({slot:Oe(),confirmations:gt(Oe()),err:Fm,confirmationStatus:zt(Yft)}),Xft=ei(pt(gt(Jft))),Qft=pn(Oe()),vme=nt({accountKey:Br,writableIndexes:pt(Oe()),readonlyIndexes:pt(Oe())}),$j=nt({signatures:pt(ut()),message:nt({accountKeys:pt(ut()),header:nt({numRequiredSignatures:Oe(),numReadonlySignedAccounts:Oe(),numReadonlyUnsignedAccounts:Oe()}),instructions:pt(nt({accounts:pt(Oe()),data:ut(),programIdIndex:Oe()})),recentBlockhash:ut(),addressTableLookups:zt(pt(vme))})}),bme=nt({pubkey:Br,signer:Mc(),writable:Mc(),source:zt(Ys([Or("transaction"),Or("lookupTable")]))}),wme=nt({accountKeys:pt(bme),signatures:pt(ut())}),Eme=nt({parsed:tv(),program:ut(),programId:Br}),Sme=nt({accounts:pt(Br),data:ut(),programId:Br}),Zft=Ys([Sme,Eme]),eht=Ys([nt({parsed:tv(),program:ut(),programId:ut()}),nt({accounts:pt(ut()),data:ut(),programId:ut()})]),Ame=cE(Zft,eht,t=>"accounts"in t?dt(t,Sme):dt(t,Eme)),Tme=nt({signatures:pt(ut()),message:nt({accountKeys:pt(bme),instructions:pt(Ame),recentBlockhash:ut(),addressTableLookups:zt(gt(pt(vme)))})}),TC=nt({accountIndex:Oe(),mint:ut(),owner:zt(ut()),programId:zt(ut()),uiTokenAmount:KD}),kme=nt({writable:pt(Br),readonly:pt(Br)}),VN=nt({err:Fm,fee:Oe(),innerInstructions:zt(gt(pt(nt({index:Oe(),instructions:pt(nt({accounts:pt(Oe()),data:ut(),programIdIndex:Oe()}))})))),preBalances:pt(Oe()),postBalances:pt(Oe()),logMessages:zt(gt(pt(ut()))),preTokenBalances:zt(gt(pt(TC))),postTokenBalances:zt(gt(pt(TC))),loadedAddresses:zt(kme),computeUnitsConsumed:zt(Oe()),costUnits:zt(Oe())}),zj=nt({err:Fm,fee:Oe(),innerInstructions:zt(gt(pt(nt({index:Oe(),instructions:pt(Ame)})))),preBalances:pt(Oe()),postBalances:pt(Oe()),logMessages:zt(gt(pt(ut()))),preTokenBalances:zt(gt(pt(TC))),postTokenBalances:zt(gt(pt(TC))),loadedAddresses:zt(kme),computeUnitsConsumed:zt(Oe()),costUnits:zt(Oe())}),nv=Ys([Or(0),Or("legacy")]),$m=nt({pubkey:ut(),lamports:Oe(),postBalance:gt(Oe()),rewardType:gt(ut()),commission:zt(gt(Oe()))}),tht=pn(gt(nt({blockhash:ut(),previousBlockhash:ut(),parentSlot:Oe(),transactions:pt(nt({transaction:$j,meta:gt(VN),version:zt(nv)})),rewards:zt(pt($m)),blockTime:gt(Oe()),blockHeight:gt(Oe())}))),nht=pn(gt(nt({blockhash:ut(),previousBlockhash:ut(),parentSlot:Oe(),rewards:zt(pt($m)),blockTime:gt(Oe()),blockHeight:gt(Oe())}))),rht=pn(gt(nt({blockhash:ut(),previousBlockhash:ut(),parentSlot:Oe(),transactions:pt(nt({transaction:wme,meta:gt(VN),version:zt(nv)})),rewards:zt(pt($m)),blockTime:gt(Oe()),blockHeight:gt(Oe())}))),iht=pn(gt(nt({blockhash:ut(),previousBlockhash:ut(),parentSlot:Oe(),transactions:pt(nt({transaction:Tme,meta:gt(zj),version:zt(nv)})),rewards:zt(pt($m)),blockTime:gt(Oe()),blockHeight:gt(Oe())}))),sht=pn(gt(nt({blockhash:ut(),previousBlockhash:ut(),parentSlot:Oe(),transactions:pt(nt({transaction:wme,meta:gt(zj),version:zt(nv)})),rewards:zt(pt($m)),blockTime:gt(Oe()),blockHeight:gt(Oe())}))),oht=pn(gt(nt({blockhash:ut(),previousBlockhash:ut(),parentSlot:Oe(),rewards:zt(pt($m)),blockTime:gt(Oe()),blockHeight:gt(Oe())}))),aht=pn(gt(nt({blockhash:ut(),previousBlockhash:ut(),parentSlot:Oe(),transactions:pt(nt({transaction:$j,meta:gt(VN)})),rewards:zt(pt($m)),blockTime:gt(Oe())}))),NZ=pn(gt(nt({blockhash:ut(),previousBlockhash:ut(),parentSlot:Oe(),signatures:pt(ut()),blockTime:gt(Oe())}))),T3=pn(gt(nt({slot:Oe(),meta:gt(VN),blockTime:zt(gt(Oe())),transaction:$j,version:zt(nv)}))),DA=pn(gt(nt({slot:Oe(),transaction:Tme,meta:gt(zj),blockTime:zt(gt(Oe())),version:zt(nv)}))),lht=ei(nt({blockhash:ut(),lastValidBlockHeight:Oe()})),cht=ei(Mc()),uht=nt({slot:Oe(),numTransactions:Oe(),numSlots:Oe(),samplePeriodSecs:Oe()}),dht=pn(pt(uht)),fht=ei(gt(nt({feeCalculator:nt({lamportsPerSignature:Oe()})}))),hht=pn(ut()),pht=pn(ut()),mht=nt({err:Fm,logs:pt(ut()),signature:ut()}),ght=nt({result:HN(mht),subscription:Oe()}),yht={"solana-client":"js/1.0.0-maintenance"};class xht{constructor(e,n){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const c={};return async u=>{const{commitment:f,config:m}=dr(u),g=this._buildArgs([],f,void 0,m),x=EZ(g);return c[x]=c[x]??(async()=>{try{const v=await this._rpcRequest("getBlockHeight",g),w=dt(v,pn(Oe()));if("error"in w)throw new Dt(w.error,"failed to get block height information");return w.result}finally{delete c[x]}})(),await c[x]}})();let r,i,s,o,a,l;n&&typeof n=="string"?this._commitment=n:n&&(this._commitment=n.commitment,this._confirmTransactionInitialTimeout=n.confirmTransactionInitialTimeout,r=n.wsEndpoint,i=n.httpHeaders,s=n.fetch,o=n.fetchMiddleware,a=n.disableRetryOnRateLimit,l=n.httpAgent),this._rpcEndpoint=nft(e),this._rpcWsEndpoint=r||eft(e),this._rpcClient=yft(e,i,s,o,a,l),this._rpcRequest=xft(this._rpcClient),this._rpcBatchRequest=vft(this._rpcClient),this._rpcWebSocket=new Jdt(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,n){const{commitment:r,config:i}=dr(n),s=this._buildArgs([e.toBase58()],r,void 0,i),o=await this._rpcRequest("getBalance",s),a=dt(o,ei(Oe()));if("error"in a)throw new Dt(a.error,`failed to get balance for ${e.toBase58()}`);return a.result}async getBalance(e,n){return await this.getBalanceAndContext(e,n).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+r)})}async getBlockTime(e){const n=await this._rpcRequest("getBlockTime",[e]),r=dt(n,pn(gt(Oe())));if("error"in r)throw new Dt(r.error,`failed to get block time for slot ${e}`);return r.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),n=dt(e,pn(Oe()));if("error"in n)throw new Dt(n.error,"failed to get minimum ledger slot");return n.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),n=dt(e,kft);if("error"in n)throw new Dt(n.error,"failed to get first available block");return n.result}async getSupply(e){let n={};typeof e=="string"?n={commitment:e}:e?n={...e,commitment:e&&e.commitment||this.commitment}:n={commitment:this.commitment};const r=await this._rpcRequest("getSupply",[n]),i=dt(r,Cft);if("error"in i)throw new Dt(i.error,"failed to get supply");return i.result}async getTokenSupply(e,n){const r=this._buildArgs([e.toBase58()],n),i=await this._rpcRequest("getTokenSupply",r),s=dt(i,ei(KD));if("error"in s)throw new Dt(s.error,"failed to get token supply");return s.result}async getTokenAccountBalance(e,n){const r=this._buildArgs([e.toBase58()],n),i=await this._rpcRequest("getTokenAccountBalance",r),s=dt(i,ei(KD));if("error"in s)throw new Dt(s.error,"failed to get token account balance");return s.result}async getTokenAccountsByOwner(e,n,r){const{commitment:i,config:s}=dr(r);let o=[e.toBase58()];"mint"in n?o.push({mint:n.mint.toBase58()}):o.push({programId:n.programId.toBase58()});const a=this._buildArgs(o,i,"base64",s),l=await this._rpcRequest("getTokenAccountsByOwner",a),c=dt(l,_ft);if("error"in c)throw new Dt(c.error,`failed to get token accounts owned by account ${e.toBase58()}`);return c.result}async getParsedTokenAccountsByOwner(e,n,r){let i=[e.toBase58()];"mint"in n?i.push({mint:n.mint.toBase58()}):i.push({programId:n.programId.toBase58()});const s=this._buildArgs(i,r,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",s),a=dt(o,Ift);if("error"in a)throw new Dt(a.error,`failed to get token accounts owned by account ${e.toBase58()}`);return a.result}async getLargestAccounts(e){const n={...e,commitment:e&&e.commitment||this.commitment},r=n.filter||n.commitment?[n]:[],i=await this._rpcRequest("getLargestAccounts",r),s=dt(i,Pft);if("error"in s)throw new Dt(s.error,"failed to get largest accounts");return s.result}async getTokenLargestAccounts(e,n){const r=this._buildArgs([e.toBase58()],n),i=await this._rpcRequest("getTokenLargestAccounts",r),s=dt(i,Nft);if("error"in s)throw new Dt(s.error,"failed to get token largest accounts");return s.result}async getAccountInfoAndContext(e,n){const{commitment:r,config:i}=dr(n),s=this._buildArgs([e.toBase58()],r,"base64",i),o=await this._rpcRequest("getAccountInfo",s),a=dt(o,ei(gt(Yw)));if("error"in a)throw new Dt(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getParsedAccountInfo(e,n){const{commitment:r,config:i}=dr(n),s=this._buildArgs([e.toBase58()],r,"jsonParsed",i),o=await this._rpcRequest("getAccountInfo",s),a=dt(o,ei(gt(YD)));if("error"in a)throw new Dt(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getAccountInfo(e,n){try{return(await this.getAccountInfoAndContext(e,n)).value}catch(r){throw new Error("failed to get info about account "+e.toBase58()+": "+r)}}async getMultipleParsedAccounts(e,n){const{commitment:r,config:i}=dr(n),s=e.map(c=>c.toBase58()),o=this._buildArgs([s],r,"jsonParsed",i),a=await this._rpcRequest("getMultipleAccounts",o),l=dt(a,ei(pt(gt(YD))));if("error"in l)throw new Dt(l.error,`failed to get info for accounts ${s}`);return l.result}async getMultipleAccountsInfoAndContext(e,n){const{commitment:r,config:i}=dr(n),s=e.map(c=>c.toBase58()),o=this._buildArgs([s],r,"base64",i),a=await this._rpcRequest("getMultipleAccounts",o),l=dt(a,ei(pt(gt(Yw))));if("error"in l)throw new Dt(l.error,`failed to get info for accounts ${s}`);return l.result}async getMultipleAccountsInfo(e,n){return(await this.getMultipleAccountsInfoAndContext(e,n)).value}async getStakeActivation(e,n,r){const{commitment:i,config:s}=dr(n),o=this._buildArgs([e.toBase58()],i,void 0,{...s,epoch:r??(s==null?void 0:s.epoch)}),a=await this._rpcRequest("getStakeActivation",o),l=dt(a,pn(Dft));if("error"in l)throw new Dt(l.error,`failed to get Stake Activation ${e.toBase58()}`);return l.result}async getProgramAccounts(e,n){const{commitment:r,config:i}=dr(n),{encoding:s,...o}=i||{},a=this._buildArgs([e.toBase58()],r,s||"base64",{...o,...o.filters?{filters:TZ(o.filters)}:null}),l=await this._rpcRequest("getProgramAccounts",a),c=pt(Rft),u=o.withContext===!0?dt(l,ei(c)):dt(l,pn(c));if("error"in u)throw new Dt(u.error,`failed to get accounts owned by program ${e.toBase58()}`);return u.result}async getParsedProgramAccounts(e,n){const{commitment:r,config:i}=dr(n),s=this._buildArgs([e.toBase58()],r,"jsonParsed",i),o=await this._rpcRequest("getProgramAccounts",s),a=dt(o,pn(pt(Mft)));if("error"in a)throw new Dt(a.error,`failed to get accounts owned by program ${e.toBase58()}`);return a.result}async confirmTransaction(e,n){var s;let r;if(typeof e=="string")r=e;else{const o=e;if((s=o.abortSignal)!=null&&s.aborted)return Promise.reject(o.abortSignal.reason);r=o.signature}let i;try{i=is.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return Gr(i.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:n||this.commitment,signature:r}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:n||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:n||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((n,r)=>{e!=null&&(e.aborted?r(e.reason):e.addEventListener("abort",()=>{r(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:n}){let r,i,s=!1;const o=new Promise((l,c)=>{try{r=this.onSignature(n,(f,m)=>{r=void 0;const g={context:m,value:f};l({__type:gf.PROCESSED,response:g})},e);const u=new Promise(f=>{r==null?f():i=this._onSubscriptionStateChange(r,m=>{m==="subscribed"&&f()})});(async()=>{if(await u,s)return;const f=await this.getSignatureStatus(n);if(s||f==null)return;const{context:m,value:g}=f;if(g!=null)if(g!=null&&g.err)c(g.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(g.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(g.confirmationStatus==="processed"||g.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}s=!0,l({__type:gf.PROCESSED,response:{context:m,value:g}})}})()}catch(u){c(u)}});return{abortConfirmation:()=>{i&&(i(),i=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:n,lastValidBlockHeight:r,signature:i}}){let s=!1;const o=new Promise(f=>{const m=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let g=await m();if(!s){for(;g<=r;)if(await lg(1e3),s||(g=await m(),s))return;f({__type:gf.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:a,confirmationPromise:l}=this.getTransactionConfirmationPromise({commitment:e,signature:i}),c=this.getCancellationPromise(n);let u;try{const f=await Promise.race([c,l,o]);if(f.__type===gf.PROCESSED)u=f.response;else throw new dme(i)}finally{s=!0,a()}return u}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:n,minContextSlot:r,nonceAccountPubkey:i,nonceValue:s,signature:o}}){let a=!1;const l=new Promise(g=>{let x=s,v=null;const w=async()=>{try{const{context:E,value:C}=await this.getNonceAndContext(i,{commitment:e,minContextSlot:r});return v=E.slot,C==null?void 0:C.nonce}catch{return x}};(async()=>{if(x=await w(),!a)for(;;){if(s!==x){g({__type:gf.NONCE_INVALID,slotInWhichNonceDidAdvance:v});return}if(await lg(2e3),a||(x=await w(),a))return}})()}),{abortConfirmation:c,confirmationPromise:u}=this.getTransactionConfirmationPromise({commitment:e,signature:o}),f=this.getCancellationPromise(n);let m;try{const g=await Promise.race([f,u,l]);if(g.__type===gf.PROCESSED)m=g.response;else{let x;for(;;){const v=await this.getSignatureStatus(o);if(v==null)break;if(v.context.slot<(g.slotInWhichNonceDidAdvance??r)){await lg(400);continue}x=v;break}if(x!=null&&x.value){const v=e||"finalized",{confirmationStatus:w}=x.value;switch(v){case"processed":case"recent":if(w!=="processed"&&w!=="confirmed"&&w!=="finalized")throw new Ob(o);break;case"confirmed":case"single":case"singleGossip":if(w!=="confirmed"&&w!=="finalized")throw new Ob(o);break;case"finalized":case"max":case"root":if(w!=="finalized")throw new Ob(o);break;default:}m={context:x.context,value:{err:x.value.err}}}else throw new Ob(o)}}finally{a=!0,c()}return m}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:n}){let r;const i=new Promise(l=>{let c=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{c=this._confirmTransactionInitialTimeout||3e4;break}}r=setTimeout(()=>l({__type:gf.TIMED_OUT,timeoutMs:c}),c)}),{abortConfirmation:s,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:e,signature:n});let a;try{const l=await Promise.race([o,i]);if(l.__type===gf.PROCESSED)a=l.response;else throw new fme(n,l.timeoutMs/1e3)}finally{clearTimeout(r),s()}return a}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),n=dt(e,pn(pt(Kft)));if("error"in n)throw new Dt(n.error,"failed to get cluster nodes");return n.result}async getVoteAccounts(e){const n=this._buildArgs([],e),r=await this._rpcRequest("getVoteAccounts",n),i=dt(r,Wft);if("error"in i)throw new Dt(i.error,"failed to get vote accounts");return i.result}async getSlot(e){const{commitment:n,config:r}=dr(e),i=this._buildArgs([],n,void 0,r),s=await this._rpcRequest("getSlot",i),o=dt(s,pn(Oe()));if("error"in o)throw new Dt(o.error,"failed to get slot");return o.result}async getSlotLeader(e){const{commitment:n,config:r}=dr(e),i=this._buildArgs([],n,void 0,r),s=await this._rpcRequest("getSlotLeader",i),o=dt(s,pn(ut()));if("error"in o)throw new Dt(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(e,n){const r=[e,n],i=await this._rpcRequest("getSlotLeaders",r),s=dt(i,pn(pt(Br)));if("error"in s)throw new Dt(s.error,"failed to get slot leaders");return s.result}async getSignatureStatus(e,n){const{context:r,value:i}=await this.getSignatureStatuses([e],n);Gr(i.length===1);const s=i[0];return{context:r,value:s}}async getSignatureStatuses(e,n){const r=[e];n&&r.push(n);const i=await this._rpcRequest("getSignatureStatuses",r),s=dt(i,Xft);if("error"in s)throw new Dt(s.error,"failed to get signature status");return s.result}async getTransactionCount(e){const{commitment:n,config:r}=dr(e),i=this._buildArgs([],n,void 0,r),s=await this._rpcRequest("getTransactionCount",i),o=dt(s,pn(Oe()));if("error"in o)throw new Dt(o.error,"failed to get transaction count");return o.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const n=this._buildArgs([],e),r=await this._rpcRequest("getInflationGovernor",n),i=dt(r,bft);if("error"in i)throw new Dt(i.error,"failed to get inflation");return i.result}async getInflationReward(e,n,r){const{commitment:i,config:s}=dr(r),o=this._buildArgs([e.map(c=>c.toBase58())],i,void 0,{...s,epoch:n??(s==null?void 0:s.epoch)}),a=await this._rpcRequest("getInflationReward",o),l=dt(a,sft);if("error"in l)throw new Dt(l.error,"failed to get inflation reward");return l.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),n=dt(e,wft);if("error"in n)throw new Dt(n.error,"failed to get inflation rate");return n.result}async getEpochInfo(e){const{commitment:n,config:r}=dr(e),i=this._buildArgs([],n,void 0,r),s=await this._rpcRequest("getEpochInfo",i),o=dt(s,Sft);if("error"in o)throw new Dt(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),n=dt(e,Aft);if("error"in n)throw new Dt(n.error,"failed to get epoch schedule");const r=n.result;return new Wdt(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),n=dt(e,Tft);if("error"in n)throw new Dt(n.error,"failed to get leader schedule");return n.result}async getMinimumBalanceForRentExemption(e,n){const r=this._buildArgs([e],n),i=await this._rpcRequest("getMinimumBalanceForRentExemption",r),s=dt(i,Qft);return"error"in s?(console.warn("Unable to fetch minimum balance for rent exemption"),0):s.result}async getRecentBlockhashAndContext(e){const{context:n,value:{blockhash:r}}=await this.getLatestBlockhashAndContext(e);return{context:n,value:{blockhash:r,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(e){const n=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),r=dt(n,dht);if("error"in r)throw new Dt(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(e,n){const r=this._buildArgs([e],n),i=await this._rpcRequest("getFeeCalculatorForBlockhash",r),s=dt(i,fht);if("error"in s)throw new Dt(s.error,"failed to get fee calculator");const{context:o,value:a}=s.result;return{context:o,value:a!==null?a.feeCalculator:null}}async getFeeForMessage(e,n){const r=Ri(e.serialize()).toString("base64"),i=this._buildArgs([r],n),s=await this._rpcRequest("getFeeForMessage",i),o=dt(s,ei(gt(Oe())));if("error"in o)throw new Dt(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(e){var o;const n=(o=e==null?void 0:e.lockedWritableAccounts)==null?void 0:o.map(a=>a.toBase58()),r=n!=null&&n.length?[n]:[],i=await this._rpcRequest("getRecentPrioritizationFees",r),s=dt(i,Eft);if("error"in s)throw new Dt(s.error,"failed to get recent prioritization fees");return s.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(n){throw new Error("failed to get recent blockhash: "+n)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(n){throw new Error("failed to get recent blockhash: "+n)}}async getLatestBlockhashAndContext(e){const{commitment:n,config:r}=dr(e),i=this._buildArgs([],n,void 0,r),s=await this._rpcRequest("getLatestBlockhash",i),o=dt(s,lht);if("error"in o)throw new Dt(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(e,n){const{commitment:r,config:i}=dr(n),s=this._buildArgs([e],r,void 0,i),o=await this._rpcRequest("isBlockhashValid",s),a=dt(o,cht);if("error"in a)throw new Dt(a.error,"failed to determine if the blockhash `"+e+"`is valid");return a.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),n=dt(e,pn(hft));if("error"in n)throw new Dt(n.error,"failed to get version");return n.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),n=dt(e,pn(ut()));if("error"in n)throw new Dt(n.error,"failed to get genesis hash");return n.result}async getBlock(e,n){const{commitment:r,config:i}=dr(n),s=this._buildArgsAtLeastConfirmed([e],r,void 0,i),o=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const a=dt(o,rht);if("error"in a)throw a.error;return a.result}case"none":{const a=dt(o,nht);if("error"in a)throw a.error;return a.result}default:{const a=dt(o,tht);if("error"in a)throw a.error;const{result:l}=a;return l?{...l,transactions:l.transactions.map(({transaction:c,meta:u,version:f})=>({meta:u,transaction:{...c,message:A3(f,c.message)},version:f}))}:null}}}catch(a){throw new Dt(a,"failed to get confirmed block")}}async getParsedBlock(e,n){const{commitment:r,config:i}=dr(n),s=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",i),o=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const a=dt(o,sht);if("error"in a)throw a.error;return a.result}case"none":{const a=dt(o,oht);if("error"in a)throw a.error;return a.result}default:{const a=dt(o,iht);if("error"in a)throw a.error;return a.result}}}catch(a){throw new Dt(a,"failed to get block")}}async getBlockProduction(e){let n,r;if(typeof e=="string")r=e;else if(e){const{commitment:a,...l}=e;r=a,n=l}const i=this._buildArgs([],r,"base64",n),s=await this._rpcRequest("getBlockProduction",i),o=dt(s,gft);if("error"in o)throw new Dt(o.error,"failed to get block production information");return o.result}async getTransaction(e,n){const{commitment:r,config:i}=dr(n),s=this._buildArgsAtLeastConfirmed([e],r,void 0,i),o=await this._rpcRequest("getTransaction",s),a=dt(o,T3);if("error"in a)throw new Dt(a.error,"failed to get transaction");const l=a.result;return l&&{...l,transaction:{...l.transaction,message:A3(l.version,l.transaction.message)}}}async getParsedTransaction(e,n){const{commitment:r,config:i}=dr(n),s=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",i),o=await this._rpcRequest("getTransaction",s),a=dt(o,DA);if("error"in a)throw new Dt(a.error,"failed to get transaction");return a.result}async getParsedTransactions(e,n){const{commitment:r,config:i}=dr(n),s=e.map(l=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([l],r,"jsonParsed",i)}));return(await this._rpcBatchRequest(s)).map(l=>{const c=dt(l,DA);if("error"in c)throw new Dt(c.error,"failed to get transactions");return c.result})}async getTransactions(e,n){const{commitment:r,config:i}=dr(n),s=e.map(l=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([l],r,void 0,i)}));return(await this._rpcBatchRequest(s)).map(l=>{const c=dt(l,T3);if("error"in c)throw new Dt(c.error,"failed to get transactions");const u=c.result;return u&&{...u,transaction:{...u.transaction,message:A3(u.version,u.transaction.message)}}})}async getConfirmedBlock(e,n){const r=this._buildArgsAtLeastConfirmed([e],n),i=await this._rpcRequest("getBlock",r),s=dt(i,aht);if("error"in s)throw new Dt(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+e+" not found");const a={...o,transactions:o.transactions.map(({transaction:l,meta:c})=>{const u=new xd(l.message);return{meta:c,transaction:{...l,message:u}}})};return{...a,transactions:a.transactions.map(({transaction:l,meta:c})=>({meta:c,transaction:Ma.populate(l.message,l.signatures)}))}}async getBlocks(e,n,r){const i=this._buildArgsAtLeastConfirmed(n!==void 0?[e,n]:[e],r),s=await this._rpcRequest("getBlocks",i),o=dt(s,pn(pt(Oe())));if("error"in o)throw new Dt(o.error,"failed to get blocks");return o.result}async getBlockSignatures(e,n){const r=this._buildArgsAtLeastConfirmed([e],n,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",r),s=dt(i,NZ);if("error"in s)throw new Dt(s.error,"failed to get block");const o=s.result;if(!o)throw new Error("Block "+e+" not found");return o}async getConfirmedBlockSignatures(e,n){const r=this._buildArgsAtLeastConfirmed([e],n,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",r),s=dt(i,NZ);if("error"in s)throw new Dt(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+e+" not found");return o}async getConfirmedTransaction(e,n){const r=this._buildArgsAtLeastConfirmed([e],n),i=await this._rpcRequest("getTransaction",r),s=dt(i,T3);if("error"in s)throw new Dt(s.error,"failed to get transaction");const o=s.result;if(!o)return o;const a=new xd(o.transaction.message),l=o.transaction.signatures;return{...o,transaction:Ma.populate(a,l)}}async getParsedConfirmedTransaction(e,n){const r=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed"),i=await this._rpcRequest("getTransaction",r),s=dt(i,DA);if("error"in s)throw new Dt(s.error,"failed to get confirmed transaction");return s.result}async getParsedConfirmedTransactions(e,n){const r=e.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],n,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(o=>{const a=dt(o,DA);if("error"in a)throw new Dt(a.error,"failed to get confirmed transactions");return a.result})}async getConfirmedSignaturesForAddress(e,n,r){let i={},s=await this.getFirstAvailableBlock();for(;!("until"in i)&&(n--,!(n<=0||n<s));)try{const l=await this.getConfirmedBlockSignatures(n,"finalized");l.signatures.length>0&&(i.until=l.signatures[l.signatures.length-1].toString())}catch(l){if(l instanceof Error&&l.message.includes("skipped"))continue;throw l}let o=await this.getSlot("finalized");for(;!("before"in i)&&(r++,!(r>o));)try{const l=await this.getConfirmedBlockSignatures(r);l.signatures.length>0&&(i.before=l.signatures[l.signatures.length-1].toString())}catch(l){if(l instanceof Error&&l.message.includes("skipped"))continue;throw l}return(await this.getConfirmedSignaturesForAddress2(e,i)).map(l=>l.signature)}async getConfirmedSignaturesForAddress2(e,n,r){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,n),s=await this._rpcRequest("getConfirmedSignaturesForAddress2",i),o=dt(s,Lft);if("error"in o)throw new Dt(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(e,n,r){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,n),s=await this._rpcRequest("getSignaturesForAddress",i),o=dt(s,Bft);if("error"in o)throw new Dt(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(e,n){const{context:r,value:i}=await this.getAccountInfoAndContext(e,n);let s=null;return i!==null&&(s=new AZ({key:e,state:AZ.deserialize(i.data)})),{context:r,value:s}}async getNonceAndContext(e,n){const{context:r,value:i}=await this.getAccountInfoAndContext(e,n);let s=null;return i!==null&&(s=Uj.fromAccountData(i.data)),{context:r,value:s}}async getNonce(e,n){return await this.getNonceAndContext(e,n).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+r)})}async requestAirdrop(e,n){const r=await this._rpcRequest("requestAirdrop",[e.toBase58(),n]),i=dt(r,hht);if("error"in i)throw new Dt(i.error,`airdrop to ${e.toBase58()} failed`);return i.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await lg(100);const r=Date.now()-this._blockhashInfo.lastFetch>=tft;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),n=this._blockhashInfo.latestBlockhash,r=n?n.blockhash:null;for(let i=0;i<50;i++){const s=await this.getLatestBlockhash("finalized");if(r!==s.blockhash)return this._blockhashInfo={latestBlockhash:s,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},s;await lg(zdt/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:n,config:r}=dr(e),i=this._buildArgs([],n,"base64",r),s=await this._rpcRequest("getStakeMinimumDelegation",i),o=dt(s,ei(Oe()));if("error"in o)throw new Dt(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(e,n,r){if("message"in e){const v=e.serialize(),w=cn.from(v).toString("base64");if(Array.isArray(n)||r!==void 0)throw new Error("Invalid arguments");const E=n||{};E.encoding="base64","commitment"in E||(E.commitment=this.commitment),n&&typeof n=="object"&&"innerInstructions"in n&&(E.innerInstructions=n.innerInstructions);const C=[w,E],k=await this._rpcRequest("simulateTransaction",C),O=dt(k,kZ);if("error"in O)throw new Error("failed to simulate transaction: "+O.error.message);return O.result}let i;if(e instanceof Ma){let x=e;i=new Ma,i.feePayer=x.feePayer,i.instructions=e.instructions,i.nonceInfo=x.nonceInfo,i.signatures=x.signatures}else i=Ma.populate(e),i._message=i._json=void 0;if(n!==void 0&&!Array.isArray(n))throw new Error("Invalid arguments");const s=n;if(i.nonceInfo&&s)i.sign(...s);else{let x=this._disableBlockhashCaching;for(;;){const v=await this._blockhashWithExpiryBlockHeight(x);if(i.lastValidBlockHeight=v.lastValidBlockHeight,i.recentBlockhash=v.blockhash,!s)break;if(i.sign(...s),!i.signature)throw new Error("!signature");const w=i.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(w)&&!this._blockhashInfo.transactionSignatures.includes(w)){this._blockhashInfo.simulatedSignatures.push(w);break}else x=!0}}const o=i._compile(),a=o.serialize(),c=i._serialize(a).toString("base64"),u={encoding:"base64",commitment:this.commitment};if(r){const x=(Array.isArray(r)?r:o.nonProgramIds()).map(v=>v.toBase58());u.accounts={encoding:"base64",addresses:x}}s&&(u.sigVerify=!0),n&&typeof n=="object"&&"innerInstructions"in n&&(u.innerInstructions=n.innerInstructions);const f=[c,u],m=await this._rpcRequest("simulateTransaction",f),g=dt(m,kZ);if("error"in g){let x;if("data"in g.error&&(x=g.error.data.logs,x&&Array.isArray(x))){const v=`
    `,w=v+x.join(v);console.error(g.error.message,w)}throw new vZ({action:"simulate",signature:"",transactionMessage:g.error.message,logs:x})}return g.result}async sendTransaction(e,n,r){if("version"in e){if(n&&Array.isArray(n))throw new Error("Invalid arguments");const o=e.serialize();return await this.sendRawTransaction(o,n)}if(n===void 0||!Array.isArray(n))throw new Error("Invalid arguments");const i=n;if(e.nonceInfo)e.sign(...i);else{let o=this._disableBlockhashCaching;for(;;){const a=await this._blockhashWithExpiryBlockHeight(o);if(e.lastValidBlockHeight=a.lastValidBlockHeight,e.recentBlockhash=a.blockhash,e.sign(...i),!e.signature)throw new Error("!signature");const l=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(l))o=!0;else{this._blockhashInfo.transactionSignatures.push(l);break}}}const s=e.serialize();return await this.sendRawTransaction(s,r)}async sendRawTransaction(e,n){const r=Ri(e).toString("base64");return await this.sendEncodedTransaction(r,n)}async sendEncodedTransaction(e,n){const r={encoding:"base64"},i=n&&n.skipPreflight,s=i===!0?"processed":n&&n.preflightCommitment||this.commitment;n&&n.maxRetries!=null&&(r.maxRetries=n.maxRetries),n&&n.minContextSlot!=null&&(r.minContextSlot=n.minContextSlot),i&&(r.skipPreflight=i),s&&(r.preflightCommitment=s);const o=[e,r],a=await this._rpcRequest("sendTransaction",o),l=dt(a,pht);if("error"in l){let c;throw"data"in l.error&&(c=l.error.data.logs),new vZ({action:i?"send":"simulate",signature:"",transactionMessage:l.error.message,logs:c})}return l.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([n,r])=>{this._setSubscription(n,{...r,state:"pending"})})}_setSubscription(e,n){var i;const r=(i=this._subscriptionsByHash[e])==null?void 0:i.state;if(this._subscriptionsByHash[e]=n,r!==n.state){const s=this._subscriptionStateChangeCallbacksByHash[e];s&&s.forEach(o=>{try{o(n.state)}catch{}})}}_onSubscriptionStateChange(e,n){var s;const r=this._subscriptionHashByClientSubscriptionId[e];if(r==null)return()=>{};const i=(s=this._subscriptionStateChangeCallbacksByHash)[r]||(s[r]=new Set);return i.add(n),()=>{i.delete(n),i.size===0&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const e=this._rpcWebSocketGeneration,n=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{const i=this._subscriptionsByHash[r];if(i!==void 0)switch(i.state){case"pending":case"unsubscribed":if(i.callbacks.size===0){delete this._subscriptionsByHash[r],i.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[i.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:s,method:o}=i;try{this._setSubscription(r,{...i,state:"subscribing"});const a=await this._rpcWebSocket.call(o,s);this._setSubscription(r,{...i,serverSubscriptionId:a,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[a]=i.callbacks,await this._updateSubscriptions()}catch(a){if(console.error(`Received ${a instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:s,error:a}),!n())return;this._setSubscription(r,{...i,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":i.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:s,unsubscribeMethod:o}=i;if(this._subscriptionsAutoDisposedByRpc.has(s))this._subscriptionsAutoDisposedByRpc.delete(s);else{this._setSubscription(r,{...i,state:"unsubscribing"}),this._setSubscription(r,{...i,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[s])}catch(a){if(a instanceof Error&&console.error(`${o} error:`,a.message),!n())return;this._setSubscription(r,{...i,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(r,{...i,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,n){const r=this._subscriptionCallbacksByServerSubscriptionId[e];r!==void 0&&r.forEach(i=>{try{i(...n)}catch(s){console.error(s)}})}_wsOnAccountNotification(e){const{result:n,subscription:r}=dt(e,jft);this._handleServerNotification(r,[n.value,n.context])}_makeSubscription(e,n){const r=this._nextClientSubscriptionId++,i=EZ([e.method,n]),s=this._subscriptionsByHash[i];return s===void 0?this._subscriptionsByHash[i]={...e,args:n,callbacks:new Set([e.callback]),state:"pending"}:s.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[r]=i,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const o=this._subscriptionsByHash[i];Gr(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),o.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(e,n,r){const{commitment:i,config:s}=dr(r),o=this._buildArgs([e.toBase58()],i||this._commitment||"finalized","base64",s);return this._makeSubscription({callback:n,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:n,subscription:r}=dt(e,Fft);this._handleServerNotification(r,[{accountId:n.value.pubkey,accountInfo:n.value.account},n.context])}onProgramAccountChange(e,n,r,i){const{commitment:s,config:o}=dr(r),a=this._buildArgs([e.toBase58()],s||this._commitment||"finalized","base64",o||(i?{filters:TZ(i)}:void 0));return this._makeSubscription({callback:n,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},a)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,n,r){const i=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],r||this._commitment||"finalized");return this._makeSubscription({callback:n,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},i)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:n,subscription:r}=dt(e,ght);this._handleServerNotification(r,[n.value,n.context])}_wsOnSlotNotification(e){const{result:n,subscription:r}=dt(e,zft);this._handleServerNotification(r,[n])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:n,subscription:r}=dt(e,Vft);this._handleServerNotification(r,[n])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,n){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${n}' events could not be found.`)}_buildArgs(e,n,r,i){const s=n||this._commitment;if(s||r||i){let o={};r&&(o.encoding=r),s&&(o.commitment=s),i&&(o=Object.assign(o,i)),e.push(o)}return e}_buildArgsAtLeastConfirmed(e,n,r,i){const s=n||this._commitment;if(s&&!["confirmed","finalized"].includes(s))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,n,r,i)}_wsOnSignatureNotification(e){const{result:n,subscription:r}=dt(e,qft);n.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,n.value==="receivedSignature"?[{type:"received"},n.context]:[{type:"status",result:n.value},n.context])}onSignature(e,n,r){const i=this._buildArgs([e],r||this._commitment||"finalized"),s=this._makeSubscription({callback:(o,a)=>{if(o.type==="status"){n(o.result,a);try{this.removeSignatureListener(s)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return s}onSignatureWithOptions(e,n,r){const{commitment:i,...s}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},o=this._buildArgs([e],i,void 0,s),a=this._makeSubscription({callback:(l,c)=>{n(l,c);try{this.removeSignatureListener(a)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return a}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:n,subscription:r}=dt(e,Gft);this._handleServerNotification(r,[n])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}class Jo{constructor(e){this._keypair=void 0,this._keypair=e??mZ()}static generate(){return new Jo(mZ())}static fromSecretKey(e,n){if(e.byteLength!==64)throw new Error("bad secret key size");const r=e.slice(32,64);if(!n||!n.skipValidation){const i=e.slice(0,32),s=GD(i);for(let o=0;o<32;o++)if(r[o]!==s[o])throw new Error("provided secretKey is invalid")}return new Jo({publicKey:r,secretKey:e})}static fromSeed(e){const n=GD(e),r=new Uint8Array(64);return r.set(e),r.set(n,32),new Jo({publicKey:n,secretKey:r})}get publicKey(){return new vt(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}Object.freeze({CreateLookupTable:{index:0,layout:ve.struct([ve.u32("instruction"),xx("recentSlot"),ve.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:ve.struct([ve.u32("instruction")])},ExtendLookupTable:{index:2,layout:ve.struct([ve.u32("instruction"),xx(),ve.seq(En(),ve.offset(ve.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:ve.struct([ve.u32("instruction")])},CloseLookupTable:{index:4,layout:ve.struct([ve.u32("instruction")])}});new vt("AddressLookupTab1e1111111111111111111111111");const LA=Object.freeze({RequestUnits:{index:0,layout:ve.struct([ve.u8("instruction"),ve.u32("units"),ve.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:ve.struct([ve.u8("instruction"),ve.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:ve.struct([ve.u8("instruction"),ve.u32("units")])},SetComputeUnitPrice:{index:3,layout:ve.struct([ve.u8("instruction"),xx("microLamports")])}});class vht{constructor(){}static requestUnits(e){const n=LA.RequestUnits,r=bs(n,e);return new Mi({keys:[],programId:this.programId,data:r})}static requestHeapFrame(e){const n=LA.RequestHeapFrame,r=bs(n,e);return new Mi({keys:[],programId:this.programId,data:r})}static setComputeUnitLimit(e){const n=LA.SetComputeUnitLimit,r=bs(n,e);return new Mi({keys:[],programId:this.programId,data:r})}static setComputeUnitPrice(e){const n=LA.SetComputeUnitPrice,r=bs(n,{microLamports:BigInt(e.microLamports)});return new Mi({keys:[],programId:this.programId,data:r})}}vht.programId=new vt("ComputeBudget111111111111111111111111111111");ve.struct([ve.u8("numSignatures"),ve.u8("padding"),ve.u16("signatureOffset"),ve.u16("signatureInstructionIndex"),ve.u16("publicKeyOffset"),ve.u16("publicKeyInstructionIndex"),ve.u16("messageDataOffset"),ve.u16("messageDataSize"),ve.u16("messageInstructionIndex")]);new vt("Ed25519SigVerify111111111111111111111111111");Ndt.utils.isValidPrivateKey;ve.struct([ve.u8("numSignatures"),ve.u16("signatureOffset"),ve.u8("signatureInstructionIndex"),ve.u16("ethAddressOffset"),ve.u8("ethAddressInstructionIndex"),ve.u16("messageDataOffset"),ve.u16("messageDataSize"),ve.u8("messageInstructionIndex"),ve.blob(20,"ethAddress"),ve.blob(64,"signature"),ve.u8("recoveryId")]);new vt("KeccakSecp256k11111111111111111111111111111");var Cme;new vt("StakeConfig11111111111111111111111111111111");class Nme{constructor(e,n,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=n,this.custodian=r}}Cme=Nme;Nme.default=new Cme(0,0,vt.default);Object.freeze({Initialize:{index:0,layout:ve.struct([ve.u32("instruction"),Mdt(),Ddt()])},Authorize:{index:1,layout:ve.struct([ve.u32("instruction"),En("newAuthorized"),ve.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:ve.struct([ve.u32("instruction")])},Split:{index:3,layout:ve.struct([ve.u32("instruction"),ve.ns64("lamports")])},Withdraw:{index:4,layout:ve.struct([ve.u32("instruction"),ve.ns64("lamports")])},Deactivate:{index:5,layout:ve.struct([ve.u32("instruction")])},Merge:{index:7,layout:ve.struct([ve.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:ve.struct([ve.u32("instruction"),En("newAuthorized"),ve.u32("stakeAuthorizationType"),Tg("authoritySeed"),En("authorityOwner")])}});new vt("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:ve.struct([ve.u32("instruction"),Ldt()])},Authorize:{index:1,layout:ve.struct([ve.u32("instruction"),En("newAuthorized"),ve.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:ve.struct([ve.u32("instruction"),ve.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:ve.struct([ve.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:ve.struct([ve.u32("instruction"),Bdt()])}});new vt("Vote111111111111111111111111111111111111111");new vt("Va1idator1nfo111111111111111111111111111111");nt({name:ut(),website:zt(ut()),details:zt(ut()),iconUrl:zt(ut()),keybaseUsername:zt(ut())});new vt("Vote111111111111111111111111111111111111111");ve.struct([En("nodePubkey"),En("authorizedWithdrawer"),ve.u8("commission"),ve.nu64(),ve.seq(ve.struct([ve.nu64("slot"),ve.u32("confirmationCount")]),ve.offset(ve.u32(),-8),"votes"),ve.u8("rootSlotValid"),ve.nu64("rootSlot"),ve.nu64(),ve.seq(ve.struct([ve.nu64("epoch"),En("authorizedVoter")]),ve.offset(ve.u32(),-8),"authorizedVoters"),ve.struct([ve.seq(ve.struct([En("authorizedPubkey"),ve.nu64("epochOfLastAuthorizedSwitch"),ve.nu64("targetEpoch")]),32,"buf"),ve.nu64("idx"),ve.u8("isEmpty")],"priorVoters"),ve.nu64(),ve.seq(ve.struct([ve.nu64("epoch"),ve.nu64("credits"),ve.nu64("prevCredits")]),ve.offset(ve.u32(),-8),"epochCredits"),ve.struct([ve.nu64("slot"),ve.nu64("timestamp")],"lastTimestamp")]);const BA=1e9;var k3,_Z;function bht(){if(_Z)return k3;_Z=1;function t(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(n[o]!==255)throw new TypeError(s+" is ambiguous");n[o]=i}var a=e.length,l=e.charAt(0),c=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function f(x){if(x instanceof Uint8Array||(ArrayBuffer.isView(x)?x=new Uint8Array(x.buffer,x.byteOffset,x.byteLength):Array.isArray(x)&&(x=Uint8Array.from(x))),!(x instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(x.length===0)return"";for(var v=0,w=0,E=0,C=x.length;E!==C&&x[E]===0;)E++,v++;for(var k=(C-E)*u+1>>>0,O=new Uint8Array(k);E!==C;){for(var j=x[E],R=0,U=k-1;(j!==0||R<w)&&U!==-1;U--,R++)j+=256*O[U]>>>0,O[U]=j%a>>>0,j=j/a>>>0;if(j!==0)throw new Error("Non-zero carry");w=R,E++}for(var V=k-w;V!==k&&O[V]===0;)V++;for(var F=l.repeat(v);V<k;++V)F+=e.charAt(O[V]);return F}function m(x){if(typeof x!="string")throw new TypeError("Expected String");if(x.length===0)return new Uint8Array;for(var v=0,w=0,E=0;x[v]===l;)w++,v++;for(var C=(x.length-v)*c+1>>>0,k=new Uint8Array(C);x[v];){var O=x.charCodeAt(v);if(O>255)return;var j=n[O];if(j===255)return;for(var R=0,U=C-1;(j!==0||R<E)&&U!==-1;U--,R++)j+=a*k[U]>>>0,k[U]=j%256>>>0,j=j/256>>>0;if(j!==0)throw new Error("Non-zero carry");E=R,v++}for(var V=C-E;V!==C&&k[V]===0;)V++;for(var F=new Uint8Array(w+(C-V)),$=w;V!==C;)F[$++]=k[V++];return F}function g(x){var v=m(x);if(v)return v;throw new Error("Non-base"+a+" character")}return{encode:f,decodeUnsafe:m,decode:g}}return k3=t,k3}var C3,IZ;function wht(){return IZ||(IZ=1,C3=bht()("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")),C3}var jA=wht();const uE=new vt("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");new vt("TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb");const qN=new vt("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");new vt("So11111111111111111111111111111111111111112");new vt("9pan9bMn5HatX4EJdBwg9VgCa7Uz5HL8N1m5D3NdXejP");const Hj=t=>{const e=t.decode.bind(t),n=t.encode.bind(t);return{decode:e,encode:n}};var Kh={},PZ;function Eht(){if(PZ)return Kh;PZ=1,Object.defineProperty(Kh,"__esModule",{value:!0});function t(i){{const s=ln.from(i);s.reverse();const o=s.toString("hex");return o.length===0?BigInt(0):BigInt(`0x${o}`)}}Kh.toBigIntLE=t;function e(i){{const s=i.toString("hex");return s.length===0?BigInt(0):BigInt(`0x${s}`)}}Kh.toBigIntBE=e;function n(i,s){{const o=i.toString(16),a=ln.from(o.padStart(s*2,"0").slice(0,s*2),"hex");return a.reverse(),a}}Kh.toBufferLE=n;function r(i,s){{const o=i.toString(16);return ln.from(o.padStart(s*2,"0").slice(0,s*2),"hex")}}return Kh.toBufferBE=r,Kh}var RZ=Eht();const Sht=t=>e=>{const n=ve.blob(t,e),{encode:r,decode:i}=Hj(n),s=n;return s.decode=(o,a)=>{const l=i(o,a);return RZ.toBigIntLE(ln.from(l))},s.encode=(o,a,l)=>{const c=RZ.toBufferLE(o,t);return r(c,a,l)},s},_me=Sht(8),Aht=t=>{const e=ve.u8(t),{encode:n,decode:r}=Hj(e),i=e;return i.decode=(s,o)=>!!r(s,o),i.encode=(s,o,a)=>{const l=Number(s);return n(l,o,a)},i},OZ=t=>{const e=ve.blob(32,t),{encode:n,decode:r}=Hj(e),i=e;return i.decode=(s,o)=>{const a=r(s,o);return new vt(a)},i.encode=(s,o,a)=>{const l=s.toBuffer();return n(l,o,a)},i};class Ime extends Error{constructor(e){super(e)}}class Pme extends Ime{constructor(){super(...arguments),this.name="TokenOwnerOffCurveError"}}var kC;(function(t){t[t.InitializeMint=0]="InitializeMint",t[t.InitializeAccount=1]="InitializeAccount",t[t.InitializeMultisig=2]="InitializeMultisig",t[t.Transfer=3]="Transfer",t[t.Approve=4]="Approve",t[t.Revoke=5]="Revoke",t[t.SetAuthority=6]="SetAuthority",t[t.MintTo=7]="MintTo",t[t.Burn=8]="Burn",t[t.CloseAccount=9]="CloseAccount",t[t.FreezeAccount=10]="FreezeAccount",t[t.ThawAccount=11]="ThawAccount",t[t.TransferChecked=12]="TransferChecked",t[t.ApproveChecked=13]="ApproveChecked",t[t.MintToChecked=14]="MintToChecked",t[t.BurnChecked=15]="BurnChecked",t[t.InitializeAccount2=16]="InitializeAccount2",t[t.SyncNative=17]="SyncNative",t[t.InitializeAccount3=18]="InitializeAccount3",t[t.InitializeMultisig2=19]="InitializeMultisig2",t[t.InitializeMint2=20]="InitializeMint2",t[t.GetAccountDataSize=21]="GetAccountDataSize",t[t.InitializeImmutableOwner=22]="InitializeImmutableOwner",t[t.AmountToUiAmount=23]="AmountToUiAmount",t[t.UiAmountToAmount=24]="UiAmountToAmount",t[t.InitializeMintCloseAuthority=25]="InitializeMintCloseAuthority",t[t.TransferFeeExtension=26]="TransferFeeExtension",t[t.ConfidentialTransferExtension=27]="ConfidentialTransferExtension",t[t.DefaultAccountStateExtension=28]="DefaultAccountStateExtension",t[t.Reallocate=29]="Reallocate",t[t.MemoTransferExtension=30]="MemoTransferExtension",t[t.CreateNativeMint=31]="CreateNativeMint",t[t.InitializeNonTransferableMint=32]="InitializeNonTransferableMint",t[t.InterestBearingMintExtension=33]="InterestBearingMintExtension",t[t.CpiGuardExtension=34]="CpiGuardExtension",t[t.InitializePermanentDelegate=35]="InitializePermanentDelegate",t[t.TransferHookExtension=36]="TransferHookExtension",t[t.MetadataPointerExtension=39]="MetadataPointerExtension",t[t.GroupPointerExtension=40]="GroupPointerExtension",t[t.GroupMemberPointerExtension=41]="GroupMemberPointerExtension"})(kC||(kC={}));function Tht(t,e,n){if(n.length){t.push({pubkey:e,isSigner:!1,isWritable:!1});for(const r of n)t.push({pubkey:r instanceof vt?r:r.publicKey,isSigner:!0,isWritable:!1})}else t.push({pubkey:e,isSigner:!0,isWritable:!1});return t}const Rme=ve.struct([ve.u32("mintAuthorityOption"),OZ("mintAuthority"),_me("supply"),ve.u8("decimals"),Aht("isInitialized"),ve.u32("freezeAuthorityOption"),OZ("freezeAuthority")]);Rme.span;async function JD(t,e,n=!1,r=uE,i=qN){if(!n&&!vt.isOnCurve(e.toBuffer()))throw new Pme;const[s]=await vt.findProgramAddress([e.toBuffer(),r.toBuffer(),t.toBuffer()],i);return s}function Ome(t,e,n,r,i=uE,s=qN){return kht(t,e,n,r,ln.alloc(0),i,s)}function kht(t,e,n,r,i,s=uE,o=qN){const a=[{pubkey:t,isSigner:!0,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:vx.programId,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!1}];return new Mi({keys:a,programId:o,data:i})}const XD=ve.struct([ve.u8("instruction"),_me("amount")]);function Mme(t,e,n,r,i=[],s=uE){const o=Tht([{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0}],n,i),a=ln.alloc(XD.span);return XD.encode({instruction:kC.Transfer,amount:BigInt(r)},a),new Mi({keys:o,programId:s,data:a})}const MZ=Object.freeze(Object.defineProperty({__proto__:null,ASSOCIATED_TOKEN_PROGRAM_ID:qN,MintLayout:Rme,TOKEN_PROGRAM_ID:uE,TokenError:Ime,get TokenInstruction(){return kC},TokenOwnerOffCurveError:Pme,createAssociatedTokenAccountInstruction:Ome,createTransferInstruction:Mme,getAssociatedTokenAddress:JD,transferInstructionData:XD},Symbol.toStringTag,{value:"Module"}));class Cht{constructor(){this.connection=new xht(xGe,"confirmed")}createVaultKeypair(){return Jo.generate()}getKeypairFromSecretKey(e){const n=Uint8Array.from(JSON.parse(e));return Jo.fromSecretKey(n)}async getBalance(e){try{return await this.connection.getBalance(new vt(e))/BA}catch(n){return console.error("Error fetching balance:",n),0}}async wait(e){return new Promise(n=>setTimeout(n,e))}async getAccountInfoWithRetry(e,n=5){for(let r=0;r<n;r++)try{return await this.connection.getAccountInfo(e)}catch(i){if(console.warn(`Attempt ${r+1} failed to fetch account info: ${i.message}`),r===n-1)throw i;await this.wait(500*Math.pow(2,r))}return null}async getLatestBlockhashWithRetry(e=5){for(let n=0;n<e;n++)try{return await this.connection.getLatestBlockhash("confirmed")}catch(r){if(console.warn(`Attempt ${n+1} failed to get blockhash: ${r.message}`),n===e-1)throw new Error("Network error: Failed to fetch blockhash. Devnet may be down.");await this.wait(500*Math.pow(2,n))}throw new Error("Failed to get blockhash")}async getTokenBalances(e){const n=await this.getBalance(e);return Xf.map(r=>({...r,balance:r.symbol==="SOL"?n:0}))}async airdrop(e){var n,r;try{const i=await this.connection.requestAirdrop(new vt(e),1*BA),s=await this.getLatestBlockhashWithRetry();return await this.connection.confirmTransaction({blockhash:s.blockhash,lastValidBlockHeight:s.lastValidBlockHeight,signature:i}),i}catch(i){throw(n=i.message)!=null&&n.includes("429")?new Error("Devnet Rate Limit Reached. Please try again later."):(r=i.message)!=null&&r.includes("limit reached")?new Error("Daily Airdrop Limit Reached for this IP."):i}}async connectWallet(){try{const{solana:e}=window;if(e&&e.isPhantom)return(await e.connect()).publicKey.toString();throw alert("Solana object not found! Get a Phantom Wallet "),new Error("No wallet found")}catch(e){throw console.error(e),e}}async pollForConfirmation(e,n=15,r=2e3){var i,s,o;for(let a=0;a<n;a++)try{const l=await this.connection.getSignatureStatus(e);if((i=l==null?void 0:l.value)!=null&&i.confirmationStatus){const c=l.value.confirmationStatus;if(c==="confirmed"||c==="finalized")return console.log(`[Solana]  Transaction confirmed (${c}) after ${a+1} attempts`),!0;c==="processed"&&console.log("[Solana]  Transaction processed, waiting for confirmation...")}if((s=l==null?void 0:l.value)!=null&&s.err)throw new Error(`Transaction failed on-chain: ${JSON.stringify(l.value.err)}`);await this.wait(r)}catch(l){if((o=l.message)!=null&&o.includes("failed on-chain"))throw l;console.warn(`[Solana] Poll attempt ${a+1} failed:`,l.message),await this.wait(r)}return!1}async sendTransactionWithRetry(e,n){var i,s;let r="";try{const o=await this.getLatestBlockhashWithRetry();if(e.recentBlockhash=o.blockhash,e.lastValidBlockHeight=o.lastValidBlockHeight,e.sign(...n),r=await this.connection.sendRawTransaction(e.serialize(),{skipPreflight:!1,preflightCommitment:"confirmed"}),console.log(`[Solana]  Transaction sent: ${r.slice(0,16)}...`),!await this.pollForConfirmation(r,15,2e3)){console.warn(`[Solana]  Confirmation polling timed out, but transaction may have succeeded: ${r}`);const l=new Error("Transaction timed out. The network is congested. Please check your wallet history before trying again to avoid double spending.");throw l.signature=r,l.isTimeout=!0,l}return r}catch(o){if(console.warn("Transaction Error:",o.name,o.message),o.name==="TransactionExpiredBlockheightExceededError"||(i=o.message)!=null&&i.includes("block height exceeded")||(s=o.message)!=null&&s.includes("timeout")||o.isTimeout){const a=new Error("Transaction timed out. The network is congested. Please check your wallet history before trying again to avoid double spending.");throw a.signature=r,a.isTimeout=!0,a}throw o}}async transferSol(e,n,r){try{const i=new Ma().add(vx.transfer({fromPubkey:e.publicKey,toPubkey:new vt(n),lamports:Math.floor(r*BA)}));return i.feePayer=e.publicKey,await this.sendTransactionWithRetry(i,[e])}catch(i){throw console.error("Transfer Error",i),new Error(`Transfer failed: ${i.message}`)}}async findPoolKeys(e,n){const{Liquidity:r,MARKET_STATE_LAYOUT_V3:i,LIQUIDITY_STATE_LAYOUT_V4:s,SPL_MINT_LAYOUT:o}=await lc(async()=>{const{Liquidity:k,MARKET_STATE_LAYOUT_V3:O,LIQUIDITY_STATE_LAYOUT_V4:j,SPL_MINT_LAYOUT:R}=await import("./index-BHhAd2cM.js");return{Liquidity:k,MARKET_STATE_LAYOUT_V3:O,LIQUIDITY_STATE_LAYOUT_V4:j,SPL_MINT_LAYOUT:R}},[]),a=new vt(e),l=new vt(n),c=new vt(vGe),u=[{dataSize:s.span},{memcmp:{offset:s.offsetOf("baseMint"),bytes:a.toBase58()}},{memcmp:{offset:s.offsetOf("quoteMint"),bytes:l.toBase58()}}],f=[{dataSize:s.span},{memcmp:{offset:s.offsetOf("baseMint"),bytes:l.toBase58()}},{memcmp:{offset:s.offsetOf("quoteMint"),bytes:a.toBase58()}}];let m=await this.connection.getProgramAccounts(c,{filters:u});if(m.length===0&&(m=await this.connection.getProgramAccounts(c,{filters:f})),m.length===0)return null;const g=m[0],x=s.decode(g.account.data),v=x.marketId,w=await this.connection.getAccountInfo(v);if(!w)throw new Error("Failed to fetch market info");const E=i.decode(w.data),C=r.getAssociatedAuthority({programId:c}).publicKey;return{id:g.pubkey,baseMint:x.baseMint,quoteMint:x.quoteMint,lpMint:x.lpMint,baseDecimals:x.baseDecimal.toNumber(),quoteDecimals:x.quoteDecimal.toNumber(),lpDecimals:5,version:4,programId:c,authority:C,openOrders:x.openOrders,targetOrders:x.targetOrders,baseVault:x.baseVault,quoteVault:x.quoteVault,withdrawQueue:x.withdrawQueue,lpVault:x.lpVault,marketVersion:3,marketProgramId:x.marketProgramId,marketId:x.marketId,marketAuthority:r.getAssociatedAuthority({programId:x.marketProgramId}).publicKey,marketBaseVault:E.baseVault,marketQuoteVault:E.quoteVault,marketBids:E.bids,marketAsks:E.asks,marketEventQueue:E.eventQueue}}async executeSwap(e,n,r,i,s){const{Liquidity:o,Token:a,TokenAmount:l,Percent:c,TxVersion:u}=await lc(async()=>{const{Liquidity:f,Token:m,TokenAmount:g,Percent:x,TxVersion:v}=await import("./index-BHhAd2cM.js");return{Liquidity:f,Token:m,TokenAmount:g,Percent:x,TxVersion:v}},[]);try{const f=B=>{console.log(`[Swap Status] ${B}`),s&&s(B)};f("Initializing Swap Protocol...");const m="So11111111111111111111111111111111111111112",g=n.trim()==="SOL"?m:n.trim(),x=r.trim()==="SOL"?m:r.trim();f("Fetching Pool Keys...");const v=await this.findPoolKeys(g,x);if(!v)throw new Error(`No Liquidity Pool found for ${g} <-> ${x} on Devnet.`);f("Calculating Amount Out...");const w=g===v.baseMint.toBase58(),{TOKEN_PROGRAM_ID:E}=await lc(async()=>{const{TOKEN_PROGRAM_ID:B}=await Promise.resolve().then(()=>MZ);return{TOKEN_PROGRAM_ID:B}},void 0),C=new a(E,new vt(g),w?v.baseDecimals:v.quoteDecimals),k=new a(E,new vt(x),w?v.quoteDecimals:v.baseDecimals),O=new l(C,i,!1),j=new c(25,100);f("Fetching Pool Reserves...");const R=await o.fetchInfo({connection:this.connection,poolKeys:v}),{amountOut:U,minAmountOut:V}=o.computeAmountOut({poolKeys:v,poolInfo:R,amountIn:O,currencyOut:k,slippage:j});f(`Calculated Amount Out: ${U.toFixed()} (Min: ${V.toFixed()})`),f("Building Swap Transaction...");const F=await this.getTokenAccountsByOwner(e.publicKey),{innerTransactions:$}=await o.makeSwapInstructionSimple({connection:this.connection,poolKeys:v,userKeys:{tokenAccounts:F,owner:e.publicKey},amountIn:O,amountOut:V,fixedSide:"in",makeTxVersion:u.V0});f("Sending Transaction to Devnet...");const K=await Promise.all($.map(async B=>{const{instructions:A,signers:I}=B,M=new Ma;return M.add(...A),M.feePayer=e.publicKey,M.recentBlockhash=(await this.connection.getLatestBlockhash()).blockhash,M.sign(e,...I),M}));let H="";for(const B of K){const A=await this.connection.sendRawTransaction(B.serialize(),{skipPreflight:!1,preflightCommitment:"confirmed",maxRetries:5});if(console.log(`[Swap]  Transaction sent: ${A.slice(0,16)}...`),!await this.pollForConfirmation(A,15,2e3))throw new Error("Transaction confirmation timed out - please check explorer for status");H=A}return f("Transaction Confirmed!"),H}catch(f){throw console.error("Swap Error:",f),new Error(`Swap failed: ${f.message}`)}}async getWalletAssets(e){const n=new vt(e),r=await this.getBalance(e),s=(await this.getTokenAccountsByOwner(n)).map(o=>{var a,l;return{mint:o.accountInfo.mint.toBase58(),amount:o.accountInfo.amount,decimals:o.accountInfo.decimals,symbol:((a=Xf.find(c=>c.mint===o.accountInfo.mint.toBase58()))==null?void 0:a.symbol)||"UNKNOWN",name:((l=Xf.find(c=>c.mint===o.accountInfo.mint.toBase58()))==null?void 0:l.name)||"Unknown Token",isNft:o.accountInfo.decimals===0&&o.accountInfo.amount==="1"}});return s.unshift({mint:"So11111111111111111111111111111111111111112",amount:(r*BA).toString(),decimals:9,symbol:"SOL",name:"Solana",isNft:!1}),s}async getTokenAccountsByOwner(e){const{TOKEN_PROGRAM_ID:n}=await lc(async()=>{const{TOKEN_PROGRAM_ID:i}=await Promise.resolve().then(()=>MZ);return{TOKEN_PROGRAM_ID:i}},void 0);return(await this.connection.getParsedTokenAccountsByOwner(e,{programId:n})).value.map(i=>({pubkey:i.pubkey,programId:i.account.owner,accountInfo:{mint:new vt(i.account.data.parsed.info.mint),amount:i.account.data.parsed.info.tokenAmount.amount,decimals:i.account.data.parsed.info.tokenAmount.decimals}}))}async transferToken(e,n,r,i,s){if(n==="So11111111111111111111111111111111111111112"||n==="SOL")return this.transferSol(e,r,i);try{const o=new vt(n),a=new vt(r),l=await JD(o,e.publicKey),c=await JD(o,a),u=new Ma;await this.connection.getAccountInfo(c)||u.add(Ome(e.publicKey,c,a,o));let m;if(await this.connection.getAccountInfo(l)){const x=await this.connection.getTokenAccountBalance(l),v=BigInt(x.value.amount),w=BigInt(Math.round(i*Math.pow(10,s))),E=v>w?v-w:w-v,C=v/BigInt(100);E<=C?(m=v,console.log(`[Transfer] Using actual balance: ${v} (requested: ${w})`)):m=w}else m=BigInt(Math.round(i*Math.pow(10,s)));return u.add(Mme(l,c,e.publicKey,m)),u.feePayer=e.publicKey,await this.sendTransactionWithRetry(u,[e])}catch(o){throw console.error("Token Transfer Error",o),new Error(`Token Transfer failed: ${o.message}`)}}async getRecentTransactions(e,n=20){try{const r=new vt(e);return(await this.connection.getSignaturesForAddress(r,{limit:n})).map(s=>({signature:s.signature,slot:s.slot,err:s.err,memo:s.memo,blockTime:s.blockTime,status:s.err?"failed":"success",confirmationStatus:s.confirmationStatus}))}catch(r){return console.error("Error fetching transactions:",r),[]}}}const Ss=new Cht,Af=class Af{static async setSessionHash(e){try{const n=Date.now(),r=new TextEncoder,i=crypto.getRandomValues(new Uint8Array(16)),s=r.encode(e+n.toString()),o=new Uint8Array(i.length+s.length);o.set(i),o.set(s,i.length);const a=await crypto.subtle.digest("SHA-256",o),l=new Uint8Array(a);this.sessionHash=btoa(String.fromCharCode(...l)),this.sessionTimestamp=n}catch{console.error("[SecurityService] Failed to set session hash")}}static hasValidSession(){return this.sessionHash!==null&&this.sessionTimestamp>0}static getSessionTimestamp(){return this.sessionTimestamp}static clearSession(){this.sessionHash=null,this.sessionTimestamp=0}static initializeDevToolsDetection(){if(this.detectionInterval)return;const e=()=>{const i=window.outerWidth-window.innerWidth>160,s=window.outerHeight-window.innerHeight>160;(i||s)&&!this.devToolsDetected&&this.handleDevToolsDetected()},n=new Image;let r=!1;Object.defineProperty(n,"id",{get:function(){return r=!0,""}}),this.detectionInterval=setInterval(()=>{r=!1,console.log(n),console.clear(),r&&!this.devToolsDetected&&this.handleDevToolsDetected(),e()},2e3),window.addEventListener("resize",e)}static handleDevToolsDetected(){this.devToolsDetected||(this.devToolsDetected=!0,console.clear(),console.warn("%c SECURITY NOTICE ","color: #ff4444; font-size: 28px; font-weight: bold; text-shadow: 2px 2px 4px rgba(0,0,0,0.3);"),console.warn("%cDeveloper tools detected.","color: #ff8800; font-size: 16px;"),console.warn("%cFor your security, sensitive operations may be restricted.","color: #ffaa00; font-size: 14px;"),console.warn("%cIf you are not a developer, please close this panel immediately.","color: #ffffff; font-size: 12px;"),this.securityListeners.forEach(e=>{try{e()}catch{}}))}static isDevToolsDetected(){return this.devToolsDetected}static onSecurityBreach(e){return this.securityListeners.add(e),()=>this.securityListeners.delete(e)}static initializeConsoleSanitization(){const e=[/0x[a-fA-F0-9]{64}/g,/[1-9A-HJ-NP-Za-km-z]{87,88}/g,/0x[a-fA-F0-9]{40,}/g,/[A-Za-z0-9+/]{100,}={0,2}/g],n=r=>r.map(i=>{if(typeof i=="string"){let s=i;for(const o of e)s=s.replace(o,"[REDACTED]");return s}if(typeof i=="object"&&i!==null)try{const s=JSON.stringify(i);let o=!1;for(const a of e)if(a.test(s)){o=!0;break}if(o)return"[Object with sensitive data]"}catch{}return i});console.log=(...r)=>{this.originalConsole.log.apply(console,n(r))},console.warn=(...r)=>{this.originalConsole.warn.apply(console,n(r))},console.info=(...r)=>{this.originalConsole.info.apply(console,n(r))},console.debug=(...r)=>{this.originalConsole.debug.apply(console,n(r))}}static protectGlobalNamespace(){if(typeof window>"u")return;const e=window,n=["__dealerService","__polymarketDealerService","__backgroundTimer"];for(const r of n)try{e[r]&&delete e[r],Object.defineProperty(e,r,{value:void 0,writable:!1,configurable:!1})}catch{}}static initializeProductionSecurity(){console.log("[SecurityService] Initializing production security..."),this.initializeConsoleSanitization(),this.initializeDevToolsDetection(),this.protectGlobalNamespace(),console.log("[SecurityService] Production security initialized")}static cleanup(){this.detectionInterval&&(clearInterval(this.detectionInterval),this.detectionInterval=null),this.securityListeners.clear(),this.devToolsDetected=!1,this.clearSession()}};Af.sessionHash=null,Af.sessionTimestamp=0,Af.devToolsDetected=!1,Af.detectionInterval=null,Af.securityListeners=new Set,Af.originalConsole={log:console.log,warn:console.warn,error:console.error,info:console.info,debug:console.debug};let ey=Af;const DZ="vault_balance_history",LZ="vault_intraday_history",BZ=90,jZ=96;class Nht{constructor(){this.history=[],this.intradayHistory=[],this.listeners=new Set,this.isInitialized=!1,this.initPromise=null,this.initPromise=this.initialize()}async initialize(){this.isInitialized||(await this.loadFromStorage(),this.isInitialized=!0,this.notify())}async waitForInit(){this.initPromise&&await this.initPromise}async loadFromStorage(){try{const e=await Ie.getItem(Ie.getUserKey(DZ));e&&(this.history=JSON.parse(e));const n=await Ie.getItem(Ie.getUserKey(LZ));if(n){this.intradayHistory=JSON.parse(n);const r=Date.now()-1440*60*1e3;this.intradayHistory=this.intradayHistory.filter(i=>i.timestamp>r)}}catch(e){console.error("[BalanceHistory] Failed to load:",e),this.history=[],this.intradayHistory=[]}}async saveToStorage(){try{await Ie.setItem(Ie.getUserKey(DZ),JSON.stringify(this.history)),await Ie.setItem(Ie.getUserKey(LZ),JSON.stringify(this.intradayHistory))}catch(e){console.error("[BalanceHistory] Failed to save:",e)}}notify(){this.listeners.forEach(e=>e())}getTodayDate(){return new Date().toISOString().split("T")[0]}get15MinTimeKey(){const e=new Date,n=Math.floor(e.getMinutes()/15)*15;return`${e.getHours().toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`}async reloadFromStorage(){console.log("[BalanceHistory] Reloading from storage..."),await this.loadFromStorage(),this.notify()}reset(){console.log("[BalanceHistory] Resetting history..."),this.history=[],this.intradayHistory=[],this.notify()}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}getSnapshot(){return this.history}recordSnapshot(e,n,r){const i=this.getTodayDate(),s=e+n+r,o=Date.now(),a=this.history.findIndex(g=>g.date===i),l={date:i,timestamp:o,solValue:e,hlValue:n,pmValue:r,totalValue:s};a>=0?this.history[a]=l:this.history.push(l),this.history.sort((g,x)=>g.date.localeCompare(x.date)),this.history.length>BZ&&(this.history=this.history.slice(-BZ));const c=this.get15MinTimeKey(),u=o-1440*60*1e3;this.intradayHistory=this.intradayHistory.filter(g=>g.timestamp>u);const f=this.intradayHistory.findIndex(g=>g.timeKey===c&&o-g.timestamp<900*1e3),m={timestamp:o,timeKey:c,solValue:e,hlValue:n,pmValue:r,totalValue:s};f>=0?this.intradayHistory[f]=m:this.intradayHistory.push(m),this.intradayHistory.length>jZ&&(this.intradayHistory=this.intradayHistory.slice(-jZ)),this.saveToStorage(),this.notify(),console.log(`[BalanceHistory]  Snapshot saved: SOL=$${e.toFixed(2)}, HL=$${n.toFixed(2)}, PM=$${r.toFixed(2)} [${c}]`)}getHistoryForChart(e=30){return e===1?this.intradayHistory.map(r=>({date:r.timeKey,value:r.totalValue,solValue:r.solValue,hlValue:r.hlValue,pmValue:r.pmValue})):this.history.slice(-e).map(r=>({date:new Date(r.date).toLocaleDateString("en-US",{month:"short",day:"numeric"}),value:r.totalValue,solValue:r.solValue,hlValue:r.hlValue,pmValue:r.pmValue}))}hasHistory(){return this.history.length>0||this.intradayHistory.length>0}getHistoryDays(){return this.history.length}hasIntradayHistory(){return this.intradayHistory.length>0}clearHistory(){this.history=[],this.intradayHistory=[],this.saveToStorage(),this.notify()}}const el=new Nht,_ht=(t,e)=>{const[n,r]=T.useState(!0),[i,s]=T.useState({publicKey:null,encryptedPrivateKey:null,solBalance:0,tokens:Xf,assets:[],isUnlocked:!1,ownerPublicKey:null,hlPublicKey:null,hlEncryptedPrivateKey:null,hlBalance:0,hlOwnerPublicKey:null,hlPositions:[],pmPublicKey:null,pmEncryptedPrivateKey:null,pmBalance:0,pmOwnerPublicKey:null}),[o,a]=T.useState(""),[l,c]=T.useState(""),[u,f]=T.useState("SOL"),[m,g]=T.useState(null),[x,v]=T.useState(!1),[w,E]=T.useState(""),[C,k]=T.useState(!1),[O,j]=T.useState(""),[R,U]=T.useState(!1),[V,F]=T.useState(""),[$,K]=T.useState(!1),[H,B]=T.useState(""),[A,I]=T.useState(!1),[M,z]=T.useState(!1),[G,te]=T.useState(!1),[Y,q]=T.useState(""),[D,_]=T.useState(""),[W,X]=T.useState(""),[re,ae]=T.useState(""),[Ee,ue]=T.useState(""),[me,ce]=T.useState("");T.useEffect(()=>{const he=ey.onSecurityBreach(()=>{i.isUnlocked&&(console.warn("[useVault] Security breach detected - locking vault"),s(ye=>({...ye,isUnlocked:!1})),a(""),g(null),ey.clearSession(),t("Security alert: Vault locked for protection"))});return()=>he()},[i.isUnlocked,t]),T.useEffect(()=>{if(!e){console.log("[useVault] Waiting for userId before loading vault data..."),r(!0),el.reset(),kt.reset();return}(async()=>{r(!0);try{await el.reloadFromStorage(),await kt.reloadFromStorage(),await Ie.migrateFromLocalStorage(),console.log("[useVault] Loading vault data for user:",e.substring(0,8)+"...");const ye=await Ie.getItem(Ie.getUserKey("agent_vault_pubkey")),Xe=await Ie.getItem(Ie.getUserKey("agent_vault_enc")),et=await Ie.getItem(Ie.getUserKey("agent_owner_pubkey")),it=await Ie.getItem(Ie.getUserKey("agent_hl_vault_pubkey")),Ft=await Ie.getItem(Ie.getUserKey("agent_hl_vault_enc")),xt=await Ie.getItem(Ie.getUserKey("agent_hl_owner_pubkey")),Rt=await Ie.getItem(Ie.getUserKey("agent_pm_vault_pubkey")),sn=await Ie.getItem(Ie.getUserKey("agent_pm_vault_enc")),en=await Ie.getItem(Ie.getUserKey("agent_pm_owner_pubkey"));console.log("[useVault] Loaded keys:",{solana:ye?ye.substring(0,8)+"...":null,hyperliquid:it?it.substring(0,8)+"...":null,polymarket:Rt?Rt.substring(0,8)+"...":null}),ye&&Xe?(s(on=>({...on,publicKey:ye,encryptedPrivateKey:Xe,ownerPublicKey:et,hlPublicKey:it,hlEncryptedPrivateKey:Ft,hlOwnerPublicKey:xt,pmPublicKey:Rt,pmEncryptedPrivateKey:sn,pmOwnerPublicKey:en})),Ne(ye),it&&oe(it),Rt&&ke(Rt)):it&&Ft?(s(on=>({...on,hlPublicKey:it,hlEncryptedPrivateKey:Ft,hlOwnerPublicKey:xt,pmPublicKey:Rt,pmEncryptedPrivateKey:sn,pmOwnerPublicKey:en})),oe(it),Rt&&ke(Rt)):Rt&&sn&&(s(on=>({...on,pmPublicKey:Rt,pmEncryptedPrivateKey:sn,pmOwnerPublicKey:en})),ke(Rt))}catch(ye){console.error("[useVault] Failed to load vault from storage",ye)}finally{r(!1)}})()},[e]);const oe=async he=>{try{const ye=await $t.getUserState(he),Xe=ye.marginSummary,et=Xe?parseFloat(Xe.accountValue):0,it=ye.assetPositions||[];s(Ft=>({...Ft,hlBalance:et,hlPositions:it}))}catch(ye){console.error("Failed to refresh HL balance",ye)}},ke=async he=>{try{const{ethers:ye}=await lc(async()=>{const{ethers:sn}=await import("./index-Dz5fr4zO.js");return{ethers:sn}},[]),Xe=new ye.JsonRpcProvider("https://polygon-rpc.com"),et="0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174",it=["function balanceOf(address) view returns (uint256)"],xt=await new ye.Contract(et,it,Xe).balanceOf(he),Rt=parseFloat(ye.formatUnits(xt,6));s(sn=>({...sn,pmBalance:Rt}))}catch(ye){console.error("Failed to refresh Polymarket balance",ye)}},Ne=async he=>{try{const ye=await Ss.getBalance(he),Xe=await Ss.getWalletAssets(he);s(et=>({...et,solBalance:ye,assets:Xe}))}catch(ye){console.error("Failed to refresh balance",ye)}};return{vault:i,setVault:s,password:o,setPassword:a,withdrawAmount:l,setWithdrawAmount:c,withdrawNetwork:u,setWithdrawNetwork:f,showBackupModal:x,setShowBackupModal:v,backupKey:w,setBackupKey:E,showHLBackupModal:C,setShowHLBackupModal:k,hlBackupKey:O,setHLBackupKey:j,isImporting:$,setIsImporting:K,importKey:H,setImportKey:B,refreshBalance:Ne,connectOwnerWallet:async()=>{try{const he=await Ss.connectWallet();s(ye=>({...ye,ownerPublicKey:he})),await Ie.setItem(Ie.getUserKey("agent_owner_pubkey"),he),t("Solana Owner Wallet Connected: "+he.slice(0,6)+"...")}catch{t("Failed to connect Solana wallet.")}},disconnectOwnerWallet:async()=>{s(he=>({...he,ownerPublicKey:null})),await Ie.removeItem(Ie.getUserKey("agent_owner_pubkey")),t("Solana Owner Wallet Disconnected")},connectHLOwnerWallet:async()=>{try{const{ethereum:he}=window;if(he){const Xe=(await he.request({method:"eth_requestAccounts"}))[0];s(et=>({...et,hlOwnerPublicKey:Xe})),await Ie.setItem(Ie.getUserKey("agent_hl_owner_pubkey"),Xe),t("Hyperliquid Owner Wallet Connected: "+Xe.slice(0,6)+"...")}else t("No Ethereum wallet found! Install MetaMask.")}catch{t("Failed to connect EVM wallet.")}},disconnectHLOwnerWallet:async()=>{s(he=>({...he,hlOwnerPublicKey:null})),await Ie.removeItem(Ie.getUserKey("agent_hl_owner_pubkey")),t("Hyperliquid Owner Wallet Disconnected")},createVault:async()=>{if(!o){t("Password is required");return}try{const he=Ss.createVaultKeypair(),ye=Array.from(he.secretKey),Xe=await ar.encrypt(JSON.stringify(ye),o),et=$t.createVaultWallet(),it=await ar.encrypt(et.privateKey,o);await Ie.setItem(Ie.getUserKey("agent_vault_pubkey"),he.publicKey.toBase58()),await Ie.setItem(Ie.getUserKey("agent_vault_enc"),Xe),await Ie.setItem(Ie.getUserKey("agent_hl_vault_pubkey"),et.address),await Ie.setItem(Ie.getUserKey("agent_hl_vault_enc"),it),s(Ft=>({...Ft,isUnlocked:!0,publicKey:he.publicKey.toBase58(),encryptedPrivateKey:Xe,hlPublicKey:et.address,hlEncryptedPrivateKey:it})),j(et.privateKey),E(jA.encode(he.secretKey)),v(!0),t("Vaults created successfully")}catch(he){console.error("Vault creation failed",he),t("Failed to create vault")}},unlockVault:async()=>{if(!o){t("Password is required");return}try{const he=await Ie.getItem(Ie.getUserKey("agent_vault_enc")),ye=await Ie.getItem(Ie.getUserKey("agent_vault_pubkey")),Xe=await Ie.getItem(Ie.getUserKey("agent_hl_vault_enc")),et=await Ie.getItem(Ie.getUserKey("agent_hl_vault_pubkey"));if((!he||!ye)&&(!Xe||!et)){t("No vault found. Please create one.");return}let it=null,Ft=null,xt=null;if(he&&ye)try{const Rt=await ar.decrypt(he,o),sn=Uint8Array.from(JSON.parse(Rt));if(it=Jo.fromSecretKey(sn),it.publicKey.toBase58()!==ye)throw new Error("Keypair mismatch");g(it)}catch(Rt){throw console.error("Solana unlock failed",Rt),new Error("Incorrect password for Solana Vault")}if(Xe&&et)try{const Rt=await ar.decrypt(Xe,o),{ethers:sn}=await lc(async()=>{const{ethers:on}=await import("./index-Dz5fr4zO.js");return{ethers:on}},[]),en=new sn.Wallet(Rt);en.address.toLowerCase()!==et.toLowerCase()?(console.error(`[Vault]  HL Address Mismatch! Stored: ${et}, Derived: ${en.address}`),Ft=en.address,t("Warning: Stored HL address mismatch. Using derived address.")):Ft=et,xt=Xe}catch(Rt){throw console.error("Hyperliquid unlock failed",Rt),new Error("Incorrect password for Hyperliquid Vault")}s(Rt=>({...Rt,isUnlocked:!0,publicKey:it?it.publicKey.toBase58():null,encryptedPrivateKey:he||null,hlPublicKey:Ft||null,hlEncryptedPrivateKey:xt||null})),Ft&&oe(Ft),it&&Ne(it.publicKey.toBase58()),await ey.setSessionHash(o),t("Vault unlocked")}catch(he){console.error("Unlock failed",he),t(he.message||"Incorrect password or corrupted vault")}},requestAirdrop:async()=>{if(i.publicKey)try{t("Requesting 1 SOL Airdrop..."),await Ss.airdrop(i.publicKey),t("Airdrop Successful!"),setTimeout(()=>Ne(i.publicKey),2e3)}catch(he){console.error("Airdrop failed",he),t(`Airdrop Failed: ${he.message}`),alert(he.message)}},handleWithdraw:async()=>{if(!i.isUnlocked&&!m){alert("Vault is locked or keypair missing");return}if(!i.isUnlocked||!m){alert("Vault is locked");return}if(!i.ownerPublicKey){alert("Connect Owner Wallet first");return}const he=parseFloat(l);if(isNaN(he)||he<=0){alert("Invalid amount");return}if(he>i.solBalance){alert("Insufficient balance");return}try{t(`Sending ${he} SOL to Owner...`);const ye=await Ss.transferSol(m,i.ownerPublicKey,he);t(`Withdrawal Success! Sig: ${ye.slice(0,8)}...`),c(""),Ne(i.publicKey)}catch(ye){console.error(ye),t(`Withdrawal Failed: ${ye.message}`)}},handleWithdrawHL:async()=>{if(!i.isUnlocked){alert("Vault is locked");return}if(!i.hlOwnerPublicKey){alert("Connect Hyperliquid Owner Wallet first");return}if(!i.hlEncryptedPrivateKey){alert("Hyperliquid vault not found");return}const he=parseFloat(l);if(isNaN(he)||he<=1){alert("Amount must be greater than $1 (withdrawal fee)");return}if(he>(i.hlBalance||0)){alert("Insufficient USDC balance");return}try{const ye=await ar.decrypt(i.hlEncryptedPrivateKey,o),Xe=$t.getWalletFromPrivateKey(ye);t(`Withdrawing ${he} USDC to Hyperliquid Owner...`);const et=await $t.withdrawUSDC(Xe,i.hlOwnerPublicKey,he);t(`Withdrawal Success! Status: ${et.status}`),c(""),i.hlPublicKey&&setTimeout(()=>oe(i.hlPublicKey),2e3)}catch(ye){console.error(ye),t(`Withdrawal Failed: ${ye.message}`)}},handleWithdrawPM:async()=>{if(!i.isUnlocked){alert("Vault is locked");return}if(!i.pmOwnerPublicKey){alert("Connect Polymarket Owner Wallet first");return}if(!i.pmEncryptedPrivateKey){alert("Polymarket vault not found");return}const he=parseFloat(l);if(isNaN(he)||he<=0){alert("Amount must be greater than 0");return}if(he>(i.pmBalance||0)){alert("Insufficient USDC balance");return}try{const ye=await ar.decrypt(i.pmEncryptedPrivateKey,o),{ethers:Xe}=await lc(async()=>{const{ethers:on}=await import("./index-Dz5fr4zO.js");return{ethers:on}},[]),et=new Xe.JsonRpcProvider("https://polygon-rpc.com"),it=new Xe.Wallet(ye,et),Ft="0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174",xt=["function transfer(address to, uint256 amount) returns (bool)","function balanceOf(address) view returns (uint256)"],Rt=new Xe.Contract(Ft,xt,it),sn=Xe.parseUnits(he.toString(),6);t(`Withdrawing ${he} USDC to Polymarket Owner...`);const en=await Rt.transfer(i.pmOwnerPublicKey,sn);await en.wait(),t(`Withdrawal Success! Tx: ${en.hash.slice(0,10)}...`),c(""),i.pmPublicKey&&setTimeout(()=>ke(i.pmPublicKey),2e3)}catch(ye){console.error(ye),t(`Withdrawal Failed: ${ye.message}`)}},importVault:async()=>{if(!o||!H){t("Password and Private Key are required");return}try{const he=jA.decode(H),ye=Jo.fromSecretKey(he),Xe=Array.from(ye.secretKey),et=await ar.encrypt(JSON.stringify(Xe),o);await Ie.setItem(Ie.getUserKey("agent_vault_pubkey"),ye.publicKey.toBase58()),await Ie.setItem(Ie.getUserKey("agent_vault_enc"),et),s(it=>({...it,isUnlocked:!0,publicKey:ye.publicKey.toBase58(),encryptedPrivateKey:et})),t("Vault imported successfully"),K(!1),B("")}catch(he){console.error("Vault import failed",he),t("Invalid Private Key or Import Failed")}},resolveTokenMint:he=>{const ye=he.trim(),Xe=Xf.find(et=>et.symbol.toUpperCase()===ye.toUpperCase());return Xe?Xe.mint:ye},refreshHLBalance:oe,isImportingSolana:A,setIsImportingSolana:I,isImportingHyperliquid:M,setIsImportingHyperliquid:z,solanaPassword:Y,setSolanaPassword:q,hyperliquidPassword:D,setHyperliquidPassword:_,solanaImportKey:re,setSolanaImportKey:ae,hlImportKey:Ee,setHLImportKey:ue,createSolanaVault:async()=>{if(!Y){t("Password is required");return}try{const he=Ss.createVaultKeypair(),ye=Array.from(he.secretKey),Xe=await ar.encrypt(JSON.stringify(ye),Y);await Ie.setItem(Ie.getUserKey("agent_vault_pubkey"),he.publicKey.toBase58()),await Ie.setItem(Ie.getUserKey("agent_vault_enc"),Xe),s(et=>({...et,isUnlocked:!0,publicKey:he.publicKey.toBase58(),encryptedPrivateKey:Xe})),g(he),E(jA.encode(he.secretKey)),v(!0),t("Solana Vault created successfully"),q("")}catch(he){console.error("Solana vault creation failed",he),t("Failed to create Solana vault")}},createHyperliquidVault:async()=>{if(!D){t("Password is required");return}try{const he=$t.createVaultWallet(),ye=await ar.encrypt(he.privateKey,D);await Ie.setItem(Ie.getUserKey("agent_hl_vault_pubkey"),he.address),await Ie.setItem(Ie.getUserKey("agent_hl_vault_enc"),ye),s(Xe=>({...Xe,hlPublicKey:he.address,hlEncryptedPrivateKey:ye})),j(he.privateKey),k(!0),t("Hyperliquid Vault created successfully"),_(""),oe(he.address)}catch(he){console.error("Hyperliquid vault creation failed",he),t("Failed to create Hyperliquid vault")}},importSolanaVault:async()=>{if(!Y||!re){t("Password and Private Key are required");return}try{const he=jA.decode(re),ye=Jo.fromSecretKey(he),Xe=Array.from(ye.secretKey),et=await ar.encrypt(JSON.stringify(Xe),Y);await Ie.setItem(Ie.getUserKey("agent_vault_pubkey"),ye.publicKey.toBase58()),await Ie.setItem(Ie.getUserKey("agent_vault_enc"),et),s(it=>({...it,isUnlocked:!0,publicKey:ye.publicKey.toBase58(),encryptedPrivateKey:et})),g(ye),t("Solana Vault imported successfully"),I(!1),ae(""),q(""),Ne(ye.publicKey.toBase58())}catch(he){console.error("Solana vault import failed",he),t("Invalid Private Key or Import Failed")}},importHyperliquidVault:async()=>{if(!D||!Ee){t("Password and Private Key are required");return}try{let he=Ee.trim();he.startsWith("0x")||(he="0x"+he);const{ethers:ye}=await lc(async()=>{const{ethers:it}=await import("./index-Dz5fr4zO.js");return{ethers:it}},[]),Xe=new ye.Wallet(he),et=await ar.encrypt(he,D);await Ie.setItem(Ie.getUserKey("agent_hl_vault_pubkey"),Xe.address),await Ie.setItem(Ie.getUserKey("agent_hl_vault_enc"),et),s(it=>({...it,hlPublicKey:Xe.address,hlEncryptedPrivateKey:et})),t("Hyperliquid Vault imported successfully"),z(!1),ue(""),_(""),oe(Xe.address)}catch(he){console.error("Hyperliquid vault import failed",he),t("Invalid Private Key or Import Failed")}},isImportingPolymarket:G,setIsImportingPolymarket:te,polymarketPassword:W,setPolymarketPassword:X,pmImportKey:me,setPMImportKey:ce,createPolymarketVault:async()=>{if(!W){t("Password is required");return}try{const{ethers:he}=await lc(async()=>{const{ethers:et}=await import("./index-Dz5fr4zO.js");return{ethers:et}},[]),ye=he.Wallet.createRandom(),Xe=await ar.encrypt(ye.privateKey,W);await Ie.setItem(Ie.getUserKey("agent_pm_vault_pubkey"),ye.address),await Ie.setItem(Ie.getUserKey("agent_pm_vault_enc"),Xe),s(et=>({...et,pmPublicKey:ye.address,pmEncryptedPrivateKey:Xe})),F(ye.privateKey),U(!0),t("Polymarket Vault created successfully"),X(""),ke(ye.address)}catch(he){console.error("Polymarket vault creation failed",he),t("Failed to create Polymarket vault")}},importPolymarketVault:async()=>{if(!W||!me){t("Password and Private Key are required");return}try{let he=me.trim();he.startsWith("0x")||(he="0x"+he);const{ethers:ye}=await lc(async()=>{const{ethers:it}=await import("./index-Dz5fr4zO.js");return{ethers:it}},[]),Xe=new ye.Wallet(he),et=await ar.encrypt(he,W);await Ie.setItem(Ie.getUserKey("agent_pm_vault_pubkey"),Xe.address),await Ie.setItem(Ie.getUserKey("agent_pm_vault_enc"),et),s(it=>({...it,pmPublicKey:Xe.address,pmEncryptedPrivateKey:et})),t("Polymarket Vault imported successfully"),te(!1),ce(""),X(""),ke(Xe.address)}catch(he){console.error("Polymarket vault import failed",he),t("Invalid Private Key or Import Failed")}},connectPMOwnerWallet:async()=>{try{const{ethereum:he}=window;if(he){const Xe=(await he.request({method:"eth_requestAccounts"}))[0];s(et=>({...et,pmOwnerPublicKey:Xe})),await Ie.setItem(Ie.getUserKey("agent_pm_owner_pubkey"),Xe),t("Polymarket Owner Wallet Connected: "+Xe.slice(0,6)+"...")}else t("No Ethereum wallet found! Install MetaMask.")}catch{t("Failed to connect EVM wallet.")}},disconnectPMOwnerWallet:async()=>{s(he=>({...he,pmOwnerPublicKey:null})),await Ie.removeItem(Ie.getUserKey("agent_pm_owner_pubkey")),t("Polymarket Owner Wallet Disconnected")},refreshPMBalance:ke,showPMBackupModal:R,setShowPMBackupModal:U,pmBackupKey:V,setPMBackupKey:F,deleteAccount:async()=>{try{await Ie.clear(),window.location.reload()}catch(he){console.error(he)}}}},uu=["#E7FE55","#D4EB4C","#C1D843","#AEC53A","#9BB231","#889F28","#758C1F","#627916","#4F660D","#3C5304"];Array.from({length:30},(t,e)=>({date:new Date(Date.now()-(29-e)*24*60*60*1e3).toLocaleDateString("en-US",{month:"short",day:"numeric"}),value:100+Math.random()*50+e*2}));const Iht=t=>{const[e,n]=T.useState([]),[r,i]=T.useState([]),[s,o]=T.useState({}),a=T.useSyncExternalStore(at.subscribe.bind(at),at.getSnapshot.bind(at));T.useEffect(()=>{const u=async()=>{const f={};try{const m=await co.getMarketPrice("SOLUSDT");f.SOL=m.price}catch(m){console.error("Failed to fetch SOL price",m)}for(const m of t.assets||[])if(!(!m.symbol||m.symbol==="UNKNOWN"))try{const g=m.symbol.toUpperCase();if(f[g])continue;const x=await co.getMarketPrice(`${g}USDT`);f[g]=x.price}catch(g){console.warn(`Failed to fetch price for ${m.symbol}`,g)}f.USDC=1,o(m=>({...m,...f}))};if(t.isUnlocked){u();const f=setInterval(u,6e4);return()=>clearInterval(f)}},[t.isUnlocked,t.assets]);const l=T.useSyncExternalStore(el.subscribe.bind(el),el.getSnapshot.bind(el));T.useEffect(()=>{if(!t.isUnlocked)return;const u=s.SOL||0,f=t.solBalance*u,m=t.hlBalance||0,g=(a.portfolioValue||0)+(a.currentExposure||0);(f>0||m>0||g>0)&&el.recordSnapshot(f,m,g)},[t.isUnlocked,t.solBalance,s,t.hlBalance,a.portfolioValue,a.currentExposure]),T.useEffect(()=>{if(!t.isUnlocked)return;const u=()=>{const g=s.SOL||0,x=t.solBalance*g,v=t.hlBalance||0,w=(a.portfolioValue||0)+(a.currentExposure||0);(x>0||v>0||w>0)&&(el.recordSnapshot(x,v,w),console.log("[useMarketData]  Periodic 15-min snapshot recorded"))};u();const f=900*1e3,m=setInterval(u,f);return()=>clearInterval(m)},[t.isUnlocked]),T.useEffect(()=>{if(el.hasHistory()){const u=el.getHistoryForChart(1);n(u);const f=el.getHistoryForChart(365);i(f)}},[l]);const c=T.useMemo(()=>{const u=[];let f=0,m=0;const g=s.SOL||0,x=t.solBalance*g;t.solBalance>0&&(u.push({name:"Solana",symbol:"SOL",value:x,amount:t.solBalance,price:g,color:uu[0],hasPrice:g>0,network:"solana"}),g>0?f+=x:m++);const v=t.hlBalance||0;v>0&&(u.push({name:"USDC (Hyperliquid)",symbol:"USDC",value:v,amount:v,price:1,color:uu[1],hasPrice:!0,network:"hyperliquid"}),f+=v),t.hlPositions&&t.hlPositions.length>0&&t.hlPositions.forEach((E,C)=>{const k=E.position,O=parseFloat(k.szi),j=parseFloat(k.entryPx),R=parseFloat(k.unrealizedPnl),U=Math.abs(O*j)+R;U>0&&(u.push({name:`${k.coin} ${O>=0?"Long":"Short"}`,symbol:k.coin,value:U,amount:Math.abs(O),price:j,color:uu[(C+2)%uu.length],hasPrice:!0,network:"hyperliquid",pnl:R}),f+=U)});const w=a.portfolioValue||0;return w>0&&(u.push({name:"USDC (Polymarket)",symbol:"USDC",value:w,amount:w,price:1,color:uu[2],hasPrice:!0,network:"polymarket"}),f+=w),a.activePositions&&a.activePositions.length>0&&a.activePositions.forEach((E,C)=>{E.currentValue>0&&(u.push({name:`${E.question}`,symbol:E.outcome,value:E.currentValue,amount:E.shares,price:E.currentPrice,color:uu[(C+4)%uu.length],hasPrice:!0,network:"polymarket",pnl:E.unrealizedPnl}),f+=E.currentValue)}),(t.assets||[]).forEach((E,C)=>{var O;if(E.isNft||((O=E.symbol)==null?void 0:O.toUpperCase())==="SOL")return;const k=parseFloat(E.amount)/Math.pow(10,E.decimals);if(k>0){const j=s[E.symbol]||0,R=k*j;u.push({name:E.name||E.symbol,symbol:E.symbol,value:R,amount:k,price:j,color:uu[(C+3)%uu.length],hasPrice:j>0,network:"solana"}),j>0?f+=R:m++}}),m>0&&u.forEach(E=>{E.hasPrice||(E.value=E.amount*1,E.price=1,f+=E.value)}),{data:u.sort((E,C)=>C.value-E.value),totalValue:f}},[t.solBalance,t.hlBalance,t.hlPositions,t.assets,s,a.portfolioValue,a.currentExposure,a.activePositions]);return{portfolioHistoryDaily:e,portfolioHistoryLongTerm:r,assetPrices:s,assetAllocationData:c}},Pht=t=>{const[e,n]=T.useState([]),[r,i]=T.useState([]),[s,o]=T.useState(4);T.useEffect(()=>{(async()=>{const c=Ie.getUserKey("agent_activity_log"),u=await Ie.getItem(c);u&&i(JSON.parse(u))})()},[]);const a=(l,c,u)=>{const f={type:l,desc:c,signature:u,timestamp:Date.now(),status:"pending"};i(m=>{const g=[f,...m].slice(0,50);return Ie.setItem(Ie.getUserKey("agent_activity_log"),JSON.stringify(g)),g})};return T.useEffect(()=>{if(!t.isUnlocked)return;const l=async()=>{try{if($t.isDealerActive()){console.log("[ActivityFeed]   Skipping fetch - dealer is active");return}const u=[];if(t.publicKey){const m=(await Ss.getRecentTransactions(t.publicKey)).map(g=>({type:g.err?"Failed":"Transaction",desc:`Signature: ${g.signature.slice(0,8)}...`,time:g.blockTime?new Date(g.blockTime*1e3).toLocaleTimeString():"Unknown",status:g.err?"failed":"success",signature:g.signature,network:"solana",timestamp:g.blockTime?g.blockTime*1e3:0}));u.push(...m)}if(t.hlPublicKey){const m=(await $t.getUserFillsShared(t.hlPublicKey,20)).map(g=>{const x=g.side==="B"?"Buy":"Sell",v=g.dir||x,w=parseFloat(g.closedPnl||"0"),E=w!==0?` (PnL: ${w>=0?"+":""}$${w.toFixed(2)})`:"";return{type:v,desc:`${g.coin} ${parseFloat(g.sz).toFixed(4)} @ $${parseFloat(g.px).toFixed(2)}${E}`,time:new Date(g.time).toLocaleTimeString(),status:"success",signature:`hl-${g.tid}`,network:"hyperliquid",timestamp:g.time}});u.push(...m)}u.sort((f,m)=>m.timestamp-f.timestamp),n(u)}catch(u){console.error("Failed to fetch history",u)}};l();const c=setInterval(l,3e4);return()=>clearInterval(c)},[t.isUnlocked,t.publicKey,t.hlPublicKey]),{activityFeed:e,localActivityLog:r,activityDisplayCount:s,setActivityDisplayCount:o,addActivityLog:a}},N3="vault-scheduler",Rht=(t,e,n,r,i)=>{const[s,o]=T.useState([]),[a,l]=T.useState(!1);T.useEffect(()=>{(async()=>{const f=Ie.getUserKey("agent_scheduled_tasks"),m=await Ie.getItem(f);m&&o(JSON.parse(m)),l(!0)})()},[]);const c=T.useRef(null);return T.useEffect(()=>{if(!t.isUnlocked){Oa.stop(N3);return}console.log("[Scheduler]  Starting scheduler loop with Web Worker timer (background-safe, checks every 10s)");const u=async()=>{var g,x,v,w,E,C,k,O,j,R,U,V;const f=Date.now(),m=s.filter(F=>F.status==="active");if(m.length===0){console.log("[Scheduler]   No active tasks to check");return}console.log(`[Scheduler]  Checking ${m.length} active task(s)...`);for(const F of m){let $=!1;if(F.executeAt&&F.executeAt<=f)console.log(`[Scheduler]  Time-based task ${String(F.id).slice(0,6)} triggered`),$=!0;else if(F.condition)try{const{symbol:K,indicator:H,operator:B,value:A,timeframe:I}=F.condition;console.log(`[Scheduler]  Checking ${H.toUpperCase()} for ${K} (${I}): target ${B} ${A}`);const M=await co.getIndicator(K,H,I);let z=0;if(typeof M.value=="number")z=M.value;else if(typeof M.value=="object"&&M.value!==null){const G=H.toLowerCase();G==="macd"?z=M.value.macd||0:G==="stoch"||G==="stochastic"?z=M.value.k||0:"value"in M.value?z=M.value.value:"rsi"in M.value?z=M.value.rsi:console.warn(`[Scheduler] Unknown indicator object structure for ${H}:`,M.value)}console.log(`[Scheduler]  Current ${H.toUpperCase()}: ${z.toFixed(2)} | Condition: ${B} ${A}`),B===">"&&z>A&&($=!0),B==="<"&&z<A&&($=!0),B===">="&&z>=A&&($=!0),B==="<="&&z<=A&&($=!0),B==="=="&&z==A&&($=!0),console.log($?`[Scheduler]  Condition MET! ${z.toFixed(2)} ${B} ${A}`:`[Scheduler]  Condition NOT met: ${z.toFixed(2)} ${B} ${A}`)}catch(K){console.error(`[Scheduler]   Error checking condition for task ${F.id}:`,K)}if($){if(((g=s.find(B=>B.id===F.id))==null?void 0:g.status)==="executing"){console.log(`[Scheduler]   Task ${String(F.id).slice(0,6)} is already executing, skipping...`);continue}const H=(x=s.find(B=>B.id===F.id))==null?void 0:x.lastExecuted;if(H&&Date.now()-H<3e5){console.log(`[Scheduler]  Task ${String(F.id).slice(0,6)} was recently completed (${Math.round((Date.now()-H)/1e3)}s ago), skipping...`);continue}console.log(`[Scheduler]  Executing task ${String(F.id).slice(0,6)} (${F.type})...`),o(B=>B.map(A=>A.id===F.id?{...A,status:"executing"}:A));try{const B=JSON.parse(F.params||"{}");let A="";if(!t.encryptedPrivateKey)throw new Error("Vault encrypted key not available");const I=await ar.decrypt(t.encryptedPrivateKey,e),M=Uint8Array.from(JSON.parse(I)),z=Jo.fromSecretKey(M);if(F.type==="SWAP"){console.log(`[Scheduler]  Swapping ${B.amount} ${B.inputToken} -> ${B.outputToken}`);try{A=await Ss.executeSwap(z,B.inputToken,B.outputToken,B.amount,G=>console.log(`[Scheduler] ${G}`)),i("Swap",`Scheduled: Swapped ${B.amount} ${B.inputToken} -> ${B.outputToken}`,A)}catch(G){if((v=G.message)!=null&&v.includes("timeout")||G.isTimeout){console.warn("[Scheduler]   Swap confirmation timeout. Verifying transaction status...");const te=G.signature;if(te)try{const Y=await Ss.connection.getSignatureStatus(te),q=Y==null?void 0:Y.value;if((q==null?void 0:q.confirmationStatus)==="finalized"||(q==null?void 0:q.confirmationStatus)==="confirmed"){console.log(`[Scheduler]  Transaction verified as successful: ${te}`),A=te,i("Swap",`Scheduled: Swapped ${B.amount} ${B.inputToken} -> ${B.outputToken}`,te),o(D=>{const _=D.map(W=>W.id===F.id?{...W,status:"completed",lastExecuted:Date.now(),result:`Success: ${te}`}:W);return Ie.setItem(Ie.getUserKey("agent_scheduled_tasks"),JSON.stringify(_)),_}),n(`Task ${String(F.id).slice(0,4)} completed: ${te.slice(0,8)}...`),r(t.publicKey);continue}else{if(q!=null&&q.err)throw console.error("[Scheduler]  Transaction failed on-chain:",q.err),new Error(`Transaction failed: ${JSON.stringify(q.err)}`);console.warn(`[Scheduler]   Transaction status unknown. Signature: ${te}`),o(D=>{const _=D.map(W=>W.id===F.id?{...W,status:"completed",lastExecuted:Date.now(),result:`Warning: Status unknown - verify manually: ${te}`}:W);return Ie.setItem(Ie.getUserKey("agent_scheduled_tasks"),JSON.stringify(_)),_}),n(`Task ${String(F.id).slice(0,4)} - verify: ${te.slice(0,8)}...`),r(t.publicKey);continue}}catch(Y){console.error("[Scheduler]   Failed to verify transaction:",Y)}}throw G}}else if(F.type==="TRANSFER"){if(console.log(`[Scheduler]  Transferring ${B.amount} tokens to Owner`),!t.ownerPublicKey)throw new Error("Owner wallet not connected");try{B.tokenMint==="So11111111111111111111111111111111111111112"?A=await Ss.transferSol(z,t.ownerPublicKey,B.amount):A=await Ss.transferToken(z,B.tokenMint,t.ownerPublicKey,B.amount,B.decimals||9),i("Transfer",`Scheduled: Sent ${B.amount} to Owner`,A)}catch(G){if((w=G.message)!=null&&w.includes("timeout")||G.isTimeout){console.warn("[Scheduler]   Transfer confirmation timeout. Verifying transaction status...");const te=G.signature;if(te)try{const Y=await Ss.connection.getSignatureStatus(te),q=Y==null?void 0:Y.value;if((q==null?void 0:q.confirmationStatus)==="finalized"||(q==null?void 0:q.confirmationStatus)==="confirmed"){console.log(`[Scheduler]  Transaction verified as successful: ${te}`),A=te,i("Transfer",`Scheduled: Sent ${B.amount} to Owner`,te),o(D=>{const _=D.map(W=>W.id===F.id?{...W,status:"completed",lastExecuted:Date.now(),result:`Success: ${te}`}:W);return Ie.setItem(Ie.getUserKey("agent_scheduled_tasks"),JSON.stringify(_)),_}),n(`Task ${String(F.id).slice(0,4)} completed: ${te.slice(0,8)}...`),r(t.publicKey);continue}else{if(q!=null&&q.err)throw console.error("[Scheduler]  Transaction failed on-chain:",q.err),new Error(`Transaction failed: ${JSON.stringify(q.err)}`);console.warn(`[Scheduler]   Transaction status unknown. Signature: ${te}`),o(D=>{const _=D.map(W=>W.id===F.id?{...W,status:"completed",lastExecuted:Date.now(),result:`Warning: Status unknown - verify manually: ${te}`}:W);return Ie.setItem(Ie.getUserKey("agent_scheduled_tasks"),JSON.stringify(_)),_}),n(`Task ${String(F.id).slice(0,4)} - verify: ${te.slice(0,8)}...`),r(t.publicKey);continue}}catch(Y){console.error("[Scheduler]   Failed to verify transaction:",Y)}}throw G}}else if(F.type==="ALERT")console.log(`[Scheduler]  Alert triggered for task ${String(F.id).slice(0,6)}`),A="ALERT_TRIGGERED",n(` ALERT: ${(E=F.condition)==null?void 0:E.indicator.toUpperCase()} ${(C=F.condition)==null?void 0:C.operator} ${(k=F.condition)==null?void 0:k.value}`);else if(F.type==="HL_ORDER"){if(console.log(`[Scheduler]  Executing Hyperliquid Order: ${B.side} ${B.size} ${B.coin}`),!t.hlEncryptedPrivateKey)throw new Error("Hyperliquid Vault not available");const G=await ar.decrypt(t.hlEncryptedPrivateKey,e),te=$t.getWalletFromPrivateKey(G);B.leverage&&B.leverage!==1&&await Hn.updateLeverage(te,B.coin,B.leverage,!1);const Y=B.isBuy!==void 0?B.isBuy:B.side==="B";let q=B.size;if(q==null&&B.usdcAmount){console.log(`[Scheduler]  Calculating size for ${B.usdcAmount} USDC of ${B.coin}...`);try{let ae=B.price;if(!ae){const ce=await $t.getMarketData(B.coin),oe=parseFloat(ce.levels[1][0].px),ke=parseFloat(ce.levels[0][0].px);ae=Y?oe:ke,console.log(`[Scheduler]   Current Price for ${B.coin}: ${ae}`)}if(!ae||ae===0)throw new Error("Could not determine price for size calculation");const Ee=await $t.getAssetDecimals(B.coin),ue=B.usdcAmount/ae,me=Math.pow(10,Ee);q=Math.floor(ue*me)/me,console.log(`[Scheduler]  Calculated Size: ${q} ${B.coin} (Decimals: ${Ee})`)}catch(ae){throw console.error("[Scheduler]  Error calculating size:",ae),new Error(`Failed to calculate order size: ${ae.message}`)}}if(!q||q<=0)throw new Error(`Invalid order size: ${q}`);let D=B.orderType||"limit",_=B.price;const W=await $t.getAssetDecimals(B.coin),X=Math.max(0,6-W);if(D==="market"){console.log("[Scheduler]  Converting Market Order to Limit IOC with slippage...");const ae=await $t.getMarketData(B.coin),Ee=parseFloat(ae.levels[0][0].px),ue=parseFloat(ae.levels[1][0].px),me=Y?ue:Ee,ce=.05;let oe=Y?me*(1+ce):me*(1-ce),ke=parseFloat(oe.toFixed(X));ke=parseFloat(ke.toPrecision(5)),_=parseFloat(ke.toFixed(X)),D="ioc",console.log(`[Scheduler]   Market -> IOC: Base ${me} -> Slippage ${_}`)}else if(_){let ae=parseFloat(_.toFixed(X));ae=parseFloat(ae.toPrecision(5)),_=parseFloat(ae.toFixed(X)),console.log(`[Scheduler]   Limit price rounded: ${B.price} -> ${_} (maxDecimals=${X})`)}const re=await Hn.createOrder(te,B.coin,Y,q,_,{orderType:D,reduceOnly:B.reduceOnly||!1,stopLoss:B.stopLoss,takeProfit:B.takeProfit});if(re.status==="ok"){const ae=(R=(j=(O=re.response)==null?void 0:O.data)==null?void 0:j.statuses)==null?void 0:R[0];if(ae!=null&&ae.error)throw new Error(`HL Order Error: ${ae.error}`);A=`HL_ORDER:${((U=ae==null?void 0:ae.filled)==null?void 0:U.oid)||((V=ae==null?void 0:ae.resting)==null?void 0:V.oid)||"placed"}`,i("HL Order",`Placed ${B.side} ${B.size} ${B.coin} @ ${B.price}`,A)}else throw new Error(`HL Order Failed: ${JSON.stringify(re)}`)}o(G=>{const te=G.map(Y=>Y.id===F.id?{...Y,status:"completed",lastExecuted:Date.now(),result:`Success: ${A}`}:Y);return Ie.setItem(Ie.getUserKey("agent_scheduled_tasks"),JSON.stringify(te)),te}),console.log(`[Scheduler]  Task ${String(F.id).slice(0,6)} completed! TX: ${A.slice(0,12)}...`),n(`Task ${String(F.id).slice(0,4)} executed: ${A.slice(0,8)}...`),r(t.publicKey)}catch(B){console.error(`[Scheduler]  Task ${F.id} failed:`,B),o(A=>{const I=A.map(M=>M.id===F.id?{...M,status:"failed",lastExecuted:Date.now(),result:B.message}:M);return Ie.setItem(Ie.getUserKey("agent_scheduled_tasks"),JSON.stringify(I)),I}),n(`Task ${String(F.id).slice(0,4)} failed: ${B.message}`)}}}};return c.current=u,Oa.start(N3,1e4,()=>{c.current&&c.current()}),u(),()=>{console.log("[Scheduler]  Stopping scheduler loop"),Oa.stop(N3)}},[t.isUnlocked,s]),{scheduledTasks:s,setScheduledTasks:o}};var Oht={};const Mht="agent_conversation_",Dht="agent_conversations_metadata";class Xu{static getConversationKey(e){return Ie.getUserKey(`${Mht}${e}`)}static getMetadataKey(){return Ie.getUserKey(Dht)}static async saveConversation(e,n){if(!Oht.TEST&&!n)throw new Error("Password required for encryption");try{const r=await ar.encrypt(JSON.stringify(e),n);await Ie.setItem(this.getConversationKey(e.id),r);const i={id:e.id,title:e.title,lastMessage:e.lastMessage,timestamp:e.timestamp};await this.updateMetadata(i)}catch(r){throw console.error("Failed to save conversation:",r),r}}static async updateMetadata(e){const n=await Ie.getItem(this.getMetadataKey());let r=n?JSON.parse(n):[];if(r=r.filter(i=>i.id!==e.id),r.unshift(e),r.length>50){const i=r.pop();i&&await Ie.removeItem(this.getConversationKey(i.id))}await Ie.setItem(this.getMetadataKey(),JSON.stringify(r))}static async getHistory(){const e=this.getMetadataKey();console.log("[ConversationService] Loading history from key:",e);const n=await Ie.getItem(e);if(console.log("[ConversationService] Raw data:",n?`${n.length} characters`:"null"),!n)return[];try{const r=JSON.parse(n);return console.log("[ConversationService] Parsed conversations:",Array.isArray(r)?r.length:"not array"),Array.isArray(r)?r:[]}catch(r){return console.error("Failed to parse conversation history:",r),[]}}static async loadConversation(e,n){const r=await Ie.getItem(this.getConversationKey(e));if(!r)return null;try{const i=await ar.decrypt(r,n);return JSON.parse(i)}catch(i){throw console.error(`Failed to load conversation ${e}:`,i),new Error("Failed to decrypt conversation. Wrong password?")}}static async deleteConversation(e){await Ie.removeItem(this.getConversationKey(e));const n=await Ie.getItem(this.getMetadataKey());if(n){let r=JSON.parse(n);r=r.filter(i=>i.id!==e),await Ie.setItem(this.getMetadataKey(),JSON.stringify(r))}}static generateTitle(e){return e?e.length>30?e.substring(0,30)+"...":e:"New Conversation"}}const Lht=(t,e,n,r,i,s,o)=>{const[a,l]=T.useState([]),[c,u]=T.useState(null),[f,m]=T.useState(""),[g,x]=T.useState(!1),[v,w]=T.useState(""),E=T.useRef(null);T.useEffect(()=>{E.current&&(E.current.scrollTop=E.current.scrollHeight)},[]),T.useEffect(()=>{E.current&&(E.current.scrollTop=E.current.scrollHeight)},[a]);const C=()=>{var R,U;try{const V=tm.getApiKey();return V||((U=(R=window.process)==null?void 0:R.env)==null?void 0:U.GEMINI_API_KEY)}catch{return}};return{messages:a,setMessages:l,activeConversationId:c,loadConversation:R=>{l(R.messages),u(R.id)},startNewConversation:()=>{l([]),u(null),m(""),x(!1),w("")},inputMessage:f,setInputMessage:m,isAiProcessing:g,aiStatus:v,scrollRef:E,handleSendMessage:async()=>{var F,$,K,H,B,A,I,M,z;if(!f.trim())return;const R=C();if(!R){r("System: API Key not found in environment.");return}const U={id:Date.now().toString(),role:"user",content:f,timestamp:Date.now()};let V=c;V||(V=Date.now().toString(),u(V)),l(G=>{const te=[...G,U];if(t.isUnlocked&&e&&V){G.length===0&&Xu.generateTitle(U.content);const Y={id:V,title:G.length===0?Xu.generateTitle(U.content):"Conversation",lastMessage:U.content,timestamp:Date.now(),messages:te};Xu.saveConversation(Y,e).catch(q=>console.error("Auto-save failed",q))}return te}),m(""),x(!0),w("Thinking...");try{tm.initialize(R);const G=kt.getSnapshot(),te=G.logs.slice(0,5).map(ue=>`[${new Date(ue.timestamp).toLocaleTimeString()}] ${ue.type}: ${ue.message}`).join(`
`);let Y="",q="";if(t.hlPublicKey)try{const ue=await Hn.getUserFills(t.hlPublicKey);if(ue&&Array.isArray(ue)&&ue.length>0){let me=0,ce=0,oe=0,ke=0,Ne=0;ue.forEach(We=>{const St=parseFloat(We.closedPnl||"0"),st=parseFloat(We.fee||"0");me+=St-st,Ne+=st,ke+=parseFloat(We.px)*parseFloat(We.sz),St>0?ce++:St<0&&oe++});const ze=ce+oe,Ze=ze>0?ce/ze*100:0;Y=`
          **[PERFORMANCE METRICS - Trading Results]**
          - Total Profit/Loss: ${me>=0?"+":""}$${me.toFixed(2)} USD
          - Win Rate: ${Ze.toFixed(1)}% (${ce} wins / ${oe} losses)
          - Total Trades: ${ue.length}
          - Total Volume: $${ke.toFixed(2)} USD
          - Total Fees Paid: $${Ne.toFixed(2)} USD`,q=`
          **[RECENT TRADES - Last 5 Fills]**
${[...ue].sort((We,St)=>St.time-We.time).slice(0,5).map(We=>{const St=parseFloat(We.closedPnl||"0"),st=St!==0?` | PnL: ${St>=0?"+":""}$${St.toFixed(2)}`:"";return`          - ${We.coin} ${We.side==="B"?"BUY":"SELL"} ${We.sz} @ $${parseFloat(We.px).toFixed(2)}${st} (${new Date(We.time).toLocaleString()})`}).join(`
`)}`}else Y=`
          **[PERFORMANCE METRICS]**
          - No trading history yet. Dealer has not executed any trades.`}catch(ue){console.warn("[Agent] Could not fetch dealer performance:",ue),Y=`
          **[PERFORMANCE METRICS]**
          - Unable to fetch trading history at this moment.`}else Y=`
          **[PERFORMANCE METRICS]**
          - Hyperliquid wallet not connected. Cannot fetch trading data.`;const D=`
          **HYPERLIQUID DEALER CONTEXT (AUTONOMOUS TRADING ENGINE):**
          You have FULL access to the Hyperliquid Dealer's state, performance, and trading history.
          
          **[STATUS DATA - Current State]**
          - Dealer Status: ${G.isOn?" ACTIVE":" INACTIVE"}
          - Currently Analyzing: ${G.isAnalyzing?"Yes":"No"}
          - Current Task: ${G.currentTask||"Idle"}
          - Current Signal: ${G.currentSignal||"No signal"}
          - Trend Assessment: ${G.trendAssessment}
          - Current Exposure: $${G.currentExposure.toFixed(2)} USDC
          ${Y}
          ${q}
          
          **[CONFIGURATION DATA - Only mention when user asks to CHANGE settings]**
          - Max Leverage: ${G.settings.maxLeverage}x
          - Max Position Size: $${G.settings.maxPositionSizeUSDC} USDC
          - Max Open Positions: ${G.settings.maxOpenPositions}
          - Trading Pairs: ${G.settings.tradingPairs.join(", ")}
          - Check Interval: ${G.settings.checkIntervalSeconds}s
          - Bankroll: ${G.settings.bankrollType} (${G.settings.bankrollType==="MANUAL"?"$"+G.settings.manualBankroll:"All Available"})
          
          **[ACTIVITY LOGS - Only show if user asks about activity/history]**
          ${te||"No recent activity"}
          
          **RESPONSE GUIDELINES (CRITICAL):**
          
          1. **STATUS QUESTIONS** (e.g., "What is the dealer doing?", "O que o dealer est fazendo?"):
             - Show: Status (active/inactive), current task, current signal
             - Keep response SHORT and concise (2-3 sentences max)
             - DO NOT list all settings or metrics unless asked
          
          2. **PERFORMANCE/RESULTS QUESTIONS** (e.g., "How much profit?", "Quanto lucrou?", "What's my win rate?"):
             - Use the PERFORMANCE METRICS data above
             - Answer specifically what was asked
             - You CAN mention recent trades if relevant
          
          3. **CONFIGURATION CHANGE REQUESTS** (e.g., "I want to change leverage", "Quero mudar os pares"):
             - Show the relevant current setting
             - Include the configuration navigation button:
             
             [ Go to Dealer Configuration](nav://DEALER_CONFIG)
          
          4. **TRADE REASONING QUESTIONS** (e.g., "Why did you open BTC?", "Por que o Dealer entrou em ETH?", "Explique essa operao"):
             - Use the 'getDealerTradeHistory' tool to fetch detailed reasoning
             - The tool returns the AI's analysis and confidence for each trade
             - Explain the reasoning in a conversational way
             - Include entry price, size, and confidence level
          
          5. **OPEN POSITIONS QUESTIONS** (e.g., "Quais posies esto abertas?", "What positions are open?", "Show my positions"):
             - The Hyperliquid Dealer operates ONLY on Hyperliquid - so if user asks about Dealer positions, use 'getHLBalance'
             - If the conversation context is about Dealer (trading, positions, anlise), assume Hyperliquid - DO NOT ask which network
             - Use the 'getHLBalance' tool to fetch LIVE positions from Hyperliquid
             - This shows CURRENT open positions with entry price, size, and unrealized PnL
             - Only ask "Solana ou Hyperliquid?" if there's no context at all about Dealer
             
             **CRITICAL - DEALER POSITION QUERIES:**
             When user asks ANY of these, IMMEDIATELY call 'getHLBalance':
             - "posies do dealer", "dealer positions"
             - "quais posies", "what positions" (when dealer context exists)
             - "posies abertas", "open positions" (when dealer context exists)
             - "quais?" as follow-up to a position question
             DO NOT respond with just text - CALL THE TOOL!
          
          6. **SPECIFIC QUESTIONS**: Answer ONLY what was asked. Don't dump all data.
          `,_=`
          You are Vault Operator, an autonomous DeFi Agent managing TWO separate vaults: Solana and Hyperliquid.
          Your name is Vault Operator. You also respond to just "Operator". When users ask "who are you" or similar questions, introduce yourself as Vault Operator.
          
          **YOUR IDENTITY:**
          - Solana Vault Address: ${t.publicKey||"UNKNOWN"}
          - Hyperliquid Vault Address: ${t.hlPublicKey||"NOT CREATED"}
          - Your Owner's Wallet: ${t.ownerPublicKey||"NOT CONNECTED"}
          - Current Vault SOL Balance: ${t.solBalance.toFixed(4)} SOL
          
          ${D}
          
          **NETWORK CONTEXT AWARENESS (CRITICAL):**
          You manage TWO separate vaults on different networks:
          1. **Solana Vault** - for SOL and SPL tokens (USDC, RAY, etc.)
          2. **Hyperliquid Vault** - for perpetual trading with USDC on Hyperliquid Testnet
          
          **KEYWORD RECOGNITION:**
          - "hype", "hyperliquid", "hl" = Hyperliquid operations  call 'getHLBalance' for positions/balance
          - "sol", "solana" = Solana operations  call 'getVaultBalance' for balance
          - "dealer", "hyperliquid dealer", "trading bot", "autonomous trading" = Hyperliquid Dealer questions (implies Hyperliquid)
          
          **CRITICAL - NETWORK vs COIN DISAMBIGUATION:**
          "Solana" and "Hyperliquid" are BOTH network names AND coin names!
          
          CONTEXT CLUES FOR NETWORK:
          - "saldo", "balance", "posies", "positions", "carteira", "wallet"  asking about NETWORK
          - "enviar", "transferir", "withdraw", "sacar"  asking about NETWORK
          - Following a question about "which network?"  answering about NETWORK
          
          CONTEXT CLUES FOR COIN/TOKEN:
          - "preo", "price", "comprar", "buy", "vender", "sell"  asking about COIN
          - "anlise", "analyze", "RSI", "indicador"  asking about COIN
          - "abrir posio", "open position", "long", "short"  trading the COIN
          
          EXAMPLES:
          - "Qual meu saldo no Hyperliquid?"  NETWORK (getHLBalance)
          - "Qual o preo do HYPE?"  COIN (getMarketPrice with HYPEUSDT)
          - "Qual meu saldo de SOL?"  COIN balance on Solana network (getVaultBalance)
          - "Check Solana network"  NETWORK (getVaultBalance without token)
          - "Buy SOL on Hyperliquid"  Trading SOL COIN on HL network
          
          **CRITICAL - NETWORK RESPONSE HANDLING:**
          If the previous message was a question about which network and user responds with:
          - "hype", "hyperliquid", "hl"  IMMEDIATELY call 'getHLBalance' tool - DO NOT just acknowledge
          - "sol", "solana"  IMMEDIATELY call 'getVaultBalance' tool - DO NOT just acknowledge
          - The user is answering your question, so EXECUTE the action right away
          
          **TRANSFER DISAMBIGUATION (CRITICAL):**
          When a user requests a transfer (e.g., "send 1 USDC", "transfer USDC to me"):
          1. Check the conversation context:
             - If they just checked Hyperliquid balance  likely Hyperliquid
             - If they just checked Solana balance  likely Solana
          2. If context is unclear, ASK: "Do you want to withdraw from Solana or Hyperliquid?"
          3. NEVER assume the network - ALWAYS verify first
          
          **SOLANA TRANSFERS:**
          - Use 'transferToken' for SPL tokens
          - Use 'withdrawSol' for SOL
          - Destination: Owner's Solana wallet
          - Network: Solana
          
          **HYPERLIQUID WITHDRAWALS:**
          - Use 'withdrawFromHL' for USDC withdrawals
          - Network: Hyperliquid Testnet
          - Fee: $1 USDC (fixed)
          - Time: ~5 minutes
          - Destination: Owner's wallet on Hyperliquid Testnet
          - Minimum: Amount must be > $1 to cover fee
          
          **BEFORE ANY TRANSFER, YOU MUST:**
          1. Verify the correct network (Solana vs Hyperliquid)
          2. Check the balance on that specific network
          3. Confirm the user has sufficient funds (including fees)
          4. Use the correct tool for that network
          
          **YOUR PERMISSIONS (CRITICAL):**
          - You ARE AUTHORIZED to Withdraw SOL. Use 'withdrawSol'.
          - You ARE AUTHORIZED to Transfer Tokens (SPL/NFTs) to the Owner. Use 'transferToken'.
          - You ARE AUTHORIZED to Withdraw USDC from Hyperliquid. Use 'withdrawFromHL'.
          - You ARE AUTHORIZED to Swap tokens. Use 'executeSwap'.
          - You CANNOT transfer to any other address than the Owner's Wallet.
          
          **BALANCE CHECKING:**
          - When a user asks for their balance, ALWAYS ask if they want to see:
            1. All balances (SOL + all tokens)
            2. A specific token balance
            3. Hyperliquid balance
          - Do NOT assume they only want SOL balance.
          - The vault can hold SOL and many different SPL tokens.
          - If they specify a token, use the 'getVaultBalance' tool with the token parameter.
          - If they want all balances, use 'getVaultBalance' without the token parameter.
          - For Hyperliquid, use 'getHLBalance'.
          
          **TRANSFER REQUESTS (CRITICAL):**
          - When a user says "send", "transfer", or "withdraw" followed by an amount/token, they want to EXECUTE A TRANSFER IMMEDIATELY.
          - Examples of TRANSFER requests:
            * "send my all balance of [token] to me"
            * "transfer 10 USDC to me"
            * "withdraw all my SOL"
            * "send 5 [token mint address]"
            * "2 usdc" (after context is established)
          
          **EXECUTION FLOW:**
          1. Verify which network (Solana or Hyperliquid) from context or keywords
          2. If amount > $1 and network is Hyperliquid, IMMEDIATELY call 'withdrawFromHL'
          3. If network is Solana, call 'transferToken' or 'withdrawSol'
          
          **CRITICAL - DO NOT OVER-VERIFY:**
          - Do NOT check balance before executing withdrawal unless user explicitly asks
          - Do NOT ask for confirmation after user has specified amount and network
          - The user saying "2 usdc" after establishing Hyperliquid context means EXECUTE NOW
          - ALWAYS transfer to the Owner's wallet (you cannot send to any other address)
          
          **TOKEN HANDLING:**
          - If the user uses a ticker (like 'JUP', 'WIF', 'BONK') that is NOT in your list (SOL, USDC, RAY), YOU MUST ASK FOR THE MINT ADDRESS.
          - Say: "I don't recognize that ticker. Please provide the Token Mint Address."
          
          **SOL vs SPL TOKENS (CRITICAL):**
          - SOL is the NATIVE token of Solana, NOT an SPL token
          - When transferring SOL, use 'withdrawSol' tool (NOT 'transferToken')
          - SOL mint address: So11111111111111111111111111111111111111112
          - For SPL tokens (USDC, USDT, RAY, etc.), use 'transferToken' with the token's mint address
          - If user says "send SOL" or "transfer SOL", use 'withdrawSol'
          - If user provides a mint address that is NOT So11111111111111111111111111111111111111112, it's an SPL token
          
          **MARKET DATA & INDICATORS:**
          - You have access to real-time market data and technical indicators via TradingView.
          - Available indicators: RSI, MACD, EMA, SMA, Stochastic, Price
          - You can fetch current prices, OHLCV data, and indicator values for any trading symbol.
          - Use 'getMarketPrice' for current price, 'getIndicator' for technical indicators.
          - Use 'getTradingViewSummary' for overall market sentiment.
          
          **ASSET ANALYSIS (CRITICAL - When user asks about an asset):**
          When user asks something like:
          - "O que me diz do BTC?" / "What about BTC?"
          - "Como est o ETH?" / "How's ETH doing?"
          - "Analisa o SOL pra mim" / "Analyze SOL for me"
          - "What's your take on [asset]?"
          
          You MUST provide a COMPREHENSIVE ANALYSIS by:
          1. Call 'getMarketPrice' to get current price
          2. Call 'getIndicator' with indicator='rsi' and timeframe='60' (1h)
          3. Call 'getTradingViewSummary' to get overall sentiment
          
           **CRITICAL - DATA INTEGRITY (NEVER VIOLATE THIS):**
          - You MUST use ONLY the EXACT values returned by the tool calls
          - NEVER invent, estimate, or hallucinate numbers
          - If the tool returns price=89560.56, you say $89,560.56 - NOT any other number
          - If the tool returns RSI=47.67, you say 47.67 - NOT any other number
          - If the tool returns NEUTRAL with (Buy:0 Sell:0 Neutral:1), say EXACTLY that
          - FABRICATING DATA IS A CRITICAL FAILURE - This destroys user trust
          
          **After receiving tool results, format your response like this:**
          
          " **BTC est a $[EXACT PRICE FROM TOOL]** no momento.
          
          O RSI de 1h est em **[EXACT RSI FROM TOOL]** ([interpret based on value]).
          
          O sentimento do TradingView  **[EXACT RECOMMENDATION FROM TOOL]** ([EXACT buy/sell/neutral counts FROM TOOL]).
          
          **Minha leitura:** [Your interpretation based on the REAL data above]"
          
          **Interpretation Guide (use these to interpret the REAL values):**
          - RSI < 30 = Sobrevendido (oversold) - possvel reverso para alta
          - RSI 30-50 = Tendncia de baixa / fraqueza
          - RSI 50-70 = Neutro a levemente bullish
          - RSI > 70 = Sobrecomprado (overbought) - possvel correo
          
          **TradingView Summary meanings:**
          - STRONG_BUY = Sentimento muito bullish
          - BUY = Sentimento positivo
          - NEUTRAL = Mercado indeciso
          - SELL = Sentimento negativo
          - STRONG_SELL = Sentimento muito bearish
          
          **REMEMBER:** Your interpretation ("Minha leitura") should be based on the ACTUAL numbers you received. If RSI is 47.67, that's in the 30-50 range (slight weakness/neutral). If sentiment is NEUTRAL, say it's neutral - don't make up "COMPRA".
          
          **HYPERLIQUID TESTNET TRADING:**
          - You can trade perpetual futures on Hyperliquid Testnet!
          - You have a separate Hyperliquid Vault Wallet with USDC balance.
          
          **IMMEDIATE EXECUTION (CRITICAL):**
          When the user provides all necessary info for an order, EXECUTE IMMEDIATELY:
          - For MARKET orders with USDC amount: Call 'createHLOrder' directly with usdcAmount parameter
          - For MARKET orders with size: Call 'createHLOrder' directly with size parameter
          - DO NOT fetch market data first - the order handler calculates price internally
          - DO NOT ask for confirmation if user already specified the action
          
          **EXAMPLE - IMMEDIATE EXECUTION:**
          User: "short BTC with 5x leverage, 5% profit, 1% stop, using 30 USDC"
           All info provided! Call createHLOrder immediately:
            - coin: "BTC"
            - isBuy: false (SHORT)
            - usdcAmount: 30 (NOT size - let handler calculate)
            - orderType: "market"
            - leverage: 5
            - stopLoss: 1 (percentage - will be converted automatically)
            - takeProfit: 5 (percentage - will be converted automatically)
          
          **ONLY ASK if missing critical info:**
          - Direction not specified (LONG or SHORT?)
          - Amount not specified (how much USDC or size?)
          
          **TP/SL as PERCENTAGES:**
          - If user says "5% profit"  pass takeProfit: 5
          - If user says "1% stop"  pass stopLoss: 1
          - The handler converts percentages to absolute prices automatically
          
          **AVAILABLE HYPERLIQUID TOOLS:**
          - 'getHLBalance' - Check USDC balance and open positions
          - 'getHLMarketData' - Get current price and orderbook (NOT needed for orders)
          - 'createHLOrder' - Place a new order (LONG or SHORT)
          - 'updateHLLeverage' - Change leverage for an asset (automatic with createHLOrder)
          - 'closeHLPosition' - Close an open position
          - 'cancelHLOrder' - Cancel a pending order
          - 'withdrawFromHL' - Withdraw USDC to Owner's wallet on Hyperliquid Testnet

          
          **TASK SCHEDULING (IMPORTANT):**
          You can schedule tasks in TWO ways:
          
          1. **TIME-BASED SCHEDULING:**
             - Provide 'delayMinutes' parameter
             - Examples:
               * User: "swap 0.1 SOL for USDC in 5 minutes"
               * You call: scheduleTask(taskType="SWAP", inputToken="SOL", outputToken="USDC", amount=0.1, delayMinutes=5)
          
          2. **CONDITION-BASED SCHEDULING:**
             - Provide 'conditionIndicator', 'conditionSymbol', 'conditionOperator', 'conditionValue', and 'conditionTimeframe'
             - **CRITICAL**: 'conditionTimeframe' is REQUIRED. If the user does not provide it, you MUST ASK.
             
             - Examples:
               * User: "swap 0.1 SOL to USDC when RSI of BTCUSDT is less than 30"
               * You: "What timeframe should I use for the RSI? (e.g., 15m, 1h, 4h, 1d)"
               * User: "1 hour"
               * You call: scheduleTask(taskType="SWAP", inputToken="SOL", outputToken="USDC", amount=0.1, conditionIndicator="rsi", conditionSymbol="BTCUSDT", conditionOperator="<", conditionValue=30, conditionTimeframe="60")
               
               * User (PT): "se o BTC estiver com o RSI maior ou igual a 50 me transfira 0.1 SOL"
               * You: "Qual o perodo (timeframe) para o RSI? (ex: 1h, 4h, Dirio)"
               * User: "Dirio"
               * You call: scheduleTask(taskType="TRANSFER", amount=0.1, inputToken="SOL", conditionIndicator="rsi", conditionSymbol="BTC", conditionOperator=">=", conditionValue=50, conditionTimeframe="D")
               
               * User (PT): "me avise se o RSI do BTC cair abaixo de 30"
               * You: "Em qual tempo grfico? (15m, 1h, 4h...)"
          
          **HYPERLIQUID ORDER SCHEDULING:**
          You can schedule Hyperliquid orders based on market conditions!
          
          - Examples:
            * User: "Open LONG 0.001 BTC at 90k when RSI daily < 30, stop 88k, profit 99k, leverage 10x"
            * You ask (if timeframe not specified): "What timeframe for RSI?"
            * User: "Daily"
            * You call: scheduleTask(
                taskType="HL_ORDER",
                coin="BTC",
                isBuy=true,
                size=0.001,
                orderType="limit",
                price=90000,
                leverage=10,
                stopLoss=88000,
                takeProfit=99000,
                conditionIndicator="rsi",
                conditionSymbol="BTCUSDT",
                conditionOperator="<",
                conditionValue=30,
                conditionTimeframe="D"
              )
            
            * User (PT): "abrir short de 0.5 ETH quando o MACD cruzar abaixo de 0"
            * You: "Qual o timeframe para o MACD? E qual o preo limite ou prefere ordem a mercado?"
            * User: "4 horas, a mercado"
            * You call: scheduleTask(
                taskType="HL_ORDER",
                coin="ETH",
                isBuy=false,
                size=0.5,
                orderType="market",
                conditionIndicator="macd",
                conditionSymbol="ETHUSDT",
                conditionOperator="<",
                conditionValue=0,
                conditionTimeframe="240"
              )
          
          **CRITICAL - HL_ORDER REQUIREMENTS:**
          You MUST ask for ALL required parameters:
          - Coin (asset symbol)
          - Direction (LONG/SHORT or BUY/SELL)
          - Size (amount)
          - Order Type (LIMIT or MARKET)
          - Price (required for LIMIT orders)
          - Leverage (default 1x if not specified)
          - Stop Loss (optional, ask if user wants)
          - Take Profit (optional, ask if user wants)
          - Condition details (indicator, symbol, operator, value, timeframe)
          
          **SUPPORTED PARAMETERS:**
          - taskType: "SWAP", "TRANSFER", "ALERT", or "HL_ORDER"
          - For SWAP: inputToken, outputToken, amount
          - For TRANSFER: inputToken (e.g. "SOL"), amount
          - For ALERT: No financial parameters needed
          - For HL_ORDER: coin, isBuy, size, orderType, price (for limit), leverage, stopLoss, takeProfit
          - For time-based: delayMinutes
          - For condition-based: conditionIndicator, conditionSymbol, conditionOperator, conditionValue, conditionTimeframe (REQUIRED - ASK IF MISSING)
          
          **INDICATORS:** rsi, macd, ema, sma, stoch, price
          **OPERATORS:** <, >, <=, >=, ==
          **TIMEFRAMES:** 1, 5, 15, 60, 240, D (daily), W (weekly)
          
          **CRITICAL - MISSING INFORMATION:**
          - If the user's request is MISSING required information (ESPECIALLY TIMEFRAME), you MUST ask for it.
          - DO NOT call scheduleTask with incomplete parameters.
          - DO NOT assume a default timeframe like 'D'. ALWAYS ASK.
          - Examples of what to ask:
            * "Para qual smbolo voc quer monitorar o RSI?" (Which symbol?)
            * "Qual o valor limite do RSI?" (What threshold?)
            * "Em qual perodo grfico (1h, 4h, Dirio)?" (Which timeframe?)
            * "Quanto voc quer transferir?" (How much?)
            * "Qual token voc quer transferir?" (Which token?)
          
          **EXECUTION:**
          - When swapping, confirm the action.
          - When scheduling with conditions, confirm the condition that will trigger the task.
          - Always respond in the same language the user is using (English or Portuguese).
        `,W=await tm.sendOperatorMessage(a,U.content,_),X=W.functionCalls;let re=[];if(X&&X.length>0)for(const ue of X){const me=ue.name,ce=ue.args;if(me==="getVaultBalance"){const oe=ce.token;if(oe){const ke=o(oe);if(oe.toUpperCase()==="SOL"||ke==="So11111111111111111111111111111111111111112"){const Ne=t.solBalance.toFixed(4);re.push({type:"success",title:"Balance Check",details:`SOL Balance: ${Ne} SOL (~$${(t.solBalance*hc.SOL).toFixed(2)})`})}else{const Ne=(F=t.assets)==null?void 0:F.find(ze=>ze.mint===ke);if(Ne){const ze=(parseFloat(Ne.amount)/Math.pow(10,Ne.decimals)).toFixed(4),Ze=Ne.symbol!=="UNKNOWN"?` (~$${(parseFloat(Ne.amount)/Math.pow(10,Ne.decimals)*(hc[Ne.symbol]||0)).toFixed(2)})`:"";re.push({type:"success",title:"Balance Check",details:`${Ne.name} (${Ne.symbol}): ${ze}${Ze}`})}else re.push({type:"error",title:"Token Not Found",details:`No balance found for token: ${oe}`})}}else{const ke=t.solBalance.toFixed(4),Ne=(t.solBalance*hc.SOL).toFixed(2);let ze=`SOL: ${ke} SOL (~$${Ne})`;const Ze=(t.assets||[]).filter(Ye=>!Ye.isNft);Ze.length>0&&(ze+=`

Tokens:`,Ze.forEach(Ye=>{const We=(parseFloat(Ye.amount)/Math.pow(10,Ye.decimals)).toFixed(4),St=Ye.symbol!=="UNKNOWN"?` (~$${(parseFloat(Ye.amount)/Math.pow(10,Ye.decimals)*(hc[Ye.symbol]||0)).toFixed(2)})`:"";ze+=`
 ${Ye.name} (${Ye.symbol}): ${We}${St}`})),re.push({type:"success",title:"Balance Check",details:ze})}t.publicKey&&i(t.publicKey)}else if(me==="withdrawSol")if(w("Withdrawing Funds..."),!t.isUnlocked||!t.encryptedPrivateKey)re.push({type:"error",title:"Withdraw Failed",details:"Vault is locked."});else if(!t.ownerPublicKey)re.push({type:"error",title:"Withdraw Failed",details:"No Owner Wallet connected."});else try{const oe=await ar.decrypt(t.encryptedPrivateKey,e),ke=Uint8Array.from(JSON.parse(oe)),Ne=Jo.fromSecretKey(ke),ze=await Ss.transferSol(Ne,t.ownerPublicKey,ce.amount);s("Transfer",`Withdrew ${ce.amount} SOL to Owner`,ze),re.push({type:"success",title:"Withdraw Executed",details:`Sent ${ce.amount} SOL to Owner`,tx:ze}),i(t.publicKey)}catch(oe){re.push({type:"error",title:"Withdraw Error",details:oe.message})}else if(me==="transferToken")if(w("Transferring Token..."),!t.isUnlocked||!t.encryptedPrivateKey)re.push({type:"error",title:"Transfer Failed",details:"Vault is locked."});else if(!t.ownerPublicKey)re.push({type:"error",title:"Transfer Failed",details:"No Owner Wallet connected."});else try{const oe=await ar.decrypt(t.encryptedPrivateKey,e),ke=Uint8Array.from(JSON.parse(oe)),Ne=Jo.fromSecretKey(ke),ze=o(ce.tokenMint),Ze=($=t.assets)==null?void 0:$.find(St=>St.mint===ze),Ye=Ze?Ze.decimals:9,We=await Ss.transferToken(Ne,ze,t.ownerPublicKey,ce.amount,Ye);s("Transfer",`Sent ${ce.amount} ${ce.tokenMint} to Owner`,We),re.push({type:"success",title:"Transfer Executed",details:`Sent ${ce.amount} of ${ce.tokenMint} to Owner`,tx:We}),i(t.publicKey)}catch(oe){re.push({type:"error",title:"Transfer Error",details:oe.message})}else if(me==="executeSwap")if(!t.isUnlocked||!t.encryptedPrivateKey)re.push({type:"error",title:"Swap Failed",details:"Vault is locked."});else try{const oe=await ar.decrypt(t.encryptedPrivateKey,e),ke=Uint8Array.from(JSON.parse(oe)),Ne=Jo.fromSecretKey(ke),ze=o(ce.inputToken),Ze=o(ce.outputToken),Ye=await Ss.executeSwap(Ne,ze,Ze,ce.amount,We=>w(We));s("Swap",`Swapped ${ce.amount} ${ce.inputToken} -> ${ce.outputToken}`,Ye),re.push({type:"success",title:"Swap Executed",details:`Swapped ${ce.amount} ${ce.inputToken} for ${ce.outputToken}`,tx:Ye}),t.publicKey&&i(t.publicKey)}catch(oe){(K=oe.message)!=null&&K.includes("timeout")||(H=oe.message)!=null&&H.includes("expired")?(console.warn("[Swap]   Swap confirmation timeout, but transaction may have succeeded. Check manually."),re.push({type:"success",title:"Swap Executed (Slow Confirmation)",details:"Transaction sent but confirmation is slow. Please verify on explorer.",tx:"Check Explorer"}),i(t.publicKey)):re.push({type:"error",title:"Swap Failed",details:oe.message})}else if(me==="scheduleTask")try{console.log("[Scheduler]  Received scheduleTask call with args:",JSON.stringify(ce,null,2));let oe,ke;if(ce.conditionIndicator&&ce.conditionSymbol&&ce.conditionOperator&&ce.conditionValue!==void 0&&ce.conditionTimeframe){let Ye=ce.conditionIndicator.toLowerCase(),We=ce.conditionSymbol.toUpperCase(),St=ce.conditionTimeframe,st=ce.conditionOperator,Bt=parseFloat(ce.conditionValue);We==="BTC"?We="BTCUSDT":We==="SOL"?We="SOLUSDT":We==="ETH"?We="ETHUSDT":!We.includes("USDT")&&!We.includes("USD")&&(We=`${We}USDT`),st==="menor que"||st==="less than"?st="<":st==="maior que"||st==="greater than"?st=">":st==="menor ou igual a"||st==="less than or equal to"?st="<=":st==="maior ou igual a"||st==="greater than or equal to"?st=">=":(st==="igual a"||st==="equal to"||st==="equals")&&(st="=="),ke={symbol:We,indicator:Ye,operator:st,value:Bt,timeframe:St},console.log("[Scheduler]  Condition-based task created:",ke)}else if(ce.delayMinutes)oe=Date.now()+ce.delayMinutes*60*1e3,console.log("[Scheduler]  Time-based task created: executes in",ce.delayMinutes,"minutes");else{console.error("[Scheduler]  Missing required parameters for scheduling"),re.push({type:"error",title:"Scheduling Failed",details:"Missing required parameters. Please provide either time delay or condition details."});continue}let Ne={};if(ce.taskType==="SWAP")Ne={inputToken:ce.inputToken,outputToken:ce.outputToken,amount:ce.amount};else if(ce.taskType==="TRANSFER"){let Ye=ce.inputToken;Ye==="SOL"||Ye==="sol"?Ye="So11111111111111111111111111111111111111112":Ye=o(Ye),Ne={amount:ce.amount,tokenMint:Ye}}else ce.taskType==="ALERT"?Ne={}:ce.taskType==="HL_ORDER"&&(Ne={coin:ce.coin,side:ce.isBuy?"B":"A",isBuy:ce.isBuy,size:ce.size,usdcAmount:ce.usdcAmount,price:ce.price,orderType:ce.orderType||"limit",leverage:ce.leverage||1,stopLoss:ce.stopLoss,takeProfit:ce.takeProfit,reduceOnly:ce.reduceOnly||!1});const ze={id:Date.now().toString(),type:ce.taskType,params:JSON.stringify(Ne),executeAt:oe,condition:ke,status:"active",createdAt:Date.now()};n(Ye=>{const We=[...Ye,ze];return Ie.setItem(Ie.getUserKey("agent_scheduled_tasks"),JSON.stringify(We)),We});let Ze="";if(ke)Ze=`${ce.taskType} scheduled to execute when ${ke.indicator.toUpperCase()} of ${ke.symbol} (${ke.timeframe}) ${ke.operator} ${ke.value}`;else if(oe){const Ye=Math.round((oe-Date.now())/1e3);Ze=`${ce.taskType} scheduled to execute in ${Ye} seconds`}re.push({type:"info",title:"Task Scheduled",details:Ze})}catch(oe){console.error("[Scheduler] Error scheduling task:",oe),re.push({type:"error",title:"Scheduling Failed",details:oe.message})}else if(me==="getMarketPrice")try{w("Fetching Market Price...");const oe=await co.getMarketPrice(ce.symbol);re.push({type:"success",title:"Market Price",details:`${ce.symbol}: ${oe.price} (${oe.exchange})`})}catch(oe){re.push({type:"error",title:"Market Data Error",details:oe.message})}else if(me==="getOHLCV")try{w("Fetching OHLCV Data...");const oe=await co.getOHLCV(ce.symbol,ce.timeframe);re.push({type:"success",title:"OHLCV Data",details:`${ce.symbol} [${ce.timeframe||"60"}]: O:${oe.open} H:${oe.high} L:${oe.low} C:${oe.close} V:${oe.volume}`})}catch(oe){re.push({type:"error",title:"OHLCV Error",details:oe.message})}else if(me==="getIndicator")try{w(`Calculating ${ce.indicator}...`);const oe=await co.getIndicator(ce.symbol,ce.indicator,ce.timeframe);let ke=oe.value;typeof oe.value=="object"&&oe.value!==null&&(ke=JSON.stringify(oe.value,null,2)),re.push({type:"success",title:"Technical Indicator",details:`${ce.symbol} ${oe.indicator.toUpperCase()}: ${ke}`})}catch(oe){re.push({type:"error",title:"Indicator Error",details:oe.message})}else if(me==="getTradingViewSummary")try{w("Fetching TradingView Summary...");const oe=await co.getTradingViewSummary(ce.symbol);re.push({type:"success",title:"TradingView Summary",details:`${ce.symbol}: ${oe.recommendation} (Buy:${oe.buy} Sell:${oe.sell} Neutral:${oe.neutral})`})}catch(oe){re.push({type:"error",title:"Summary Error",details:oe.message})}else if(me==="getHLBalance")try{if(!t.hlPublicKey)re.push({type:"error",title:"HL Error",details:"Hyperliquid Vault not created/unlocked."});else{w("Fetching HL Balance...");const oe=await Hn.getUserState(t.hlPublicKey);console.log("[HL Debug] FULL USER STATE:",JSON.stringify(oe,null,2));const ke=parseFloat(oe.marginSummary.accountValue),Ne=parseFloat(oe.withdrawable).toFixed(2),ze=ke.toFixed(2),Ze=oe.assetPositions.filter(We=>parseFloat(We.position.szi)!==0);let Ye=`USDC Account Value: $${ze}`;Ye+=`
Withdrawable: $${Ne}`,Ze.length>0?(Ye+=`

Open Positions:`,Ze.forEach(We=>{Ye+=`
 ${We.position.coin} ${parseFloat(We.position.szi)>0?"LONG":"SHORT"} ${Math.abs(parseFloat(We.position.szi))} @ ${We.position.entryPx}`})):Ye+=`
No open positions.`,re.push({type:"success",title:"Hyperliquid Balance",details:Ye})}}catch(oe){re.push({type:"error",title:"HL Balance Error",details:oe.message})}else if(me==="getHLMarketData")try{w("Fetching HL Market Data...");const oe=await Hn.getMarketData(ce.coin),ke=oe.levels[0][0].px,Ne=oe.levels[1][0].px;re.push({type:"success",title:`Hyperliquid ${ce.coin}`,details:`Best Bid: ${ke}
Best Ask: ${Ne}`})}catch(oe){re.push({type:"error",title:"HL Market Data Error",details:oe.message})}else if(me==="createHLOrder")if(!t.isUnlocked||!t.hlEncryptedPrivateKey)re.push({type:"error",title:"Order Failed",details:"Vault is locked."});else try{w("Placing HL Order...");const oe=await ar.decrypt(t.hlEncryptedPrivateKey,e),ke=$t.getWalletFromPrivateKey(oe);ce.leverage&&await Hn.updateLeverage(ke,ce.coin,ce.leverage,!1);let Ne=ce.size,ze=ce.price,Ze=ce.orderType||"limit",Ye;const We=Ze==="market";if(ce.usdcAmount&&!ce.size||We&&!ce.price){console.log(`[HL Order]  Fetching price for ${We?"Market Order":"USDC Calc"}`),w("Fetching current price...");const lt=await Hn.getMarketData(ce.coin),se=parseFloat(lt.levels[0][0].px),J=parseFloat(lt.levels[1][0].px),Z=ce.isBuy?J:se;if(Ye=Z,ce.usdcAmount&&!Ne){console.log(`[HL Order]  Fetching decimals for ${ce.coin}`);const fe=await Hn.getAssetDecimals(ce.coin);console.log(`[HL Order]  ${ce.coin} decimals: ${fe}`);const be=ce.usdcAmount/Z;Ne=parseFloat(be.toFixed(fe)),console.log(`[HL Order]  USDC: ${ce.usdcAmount} / Price: ${Z} = Raw Size: ${be} -> Rounded: ${Ne}`)}if(We){let be=ce.isBuy?Z*1.05:Z*.95;console.log("[HL Order]  Fetching decimals for price rounding");const ye=6-await Hn.getAssetDecimals(ce.coin);let Xe=parseFloat(be.toFixed(ye));Xe=parseFloat(Xe.toPrecision(5)),ze=parseFloat(Xe.toFixed(ye)),Ze="ioc",console.log(`[HL Order]  Market Order: Base ${Z} -> Raw ${be.toFixed(6)} -> Rounded ${ze}`)}}if(!Ne)throw new Error("Either size or usdcAmount must be provided");if(Ze==="limit"&&ze){const lt=await Hn.getAssetDecimals(ce.coin),se=Math.max(0,6-lt);let J=parseFloat(ze.toFixed(se));J=parseFloat(J.toPrecision(5)),ze=parseFloat(J.toFixed(se)),console.log(`[HL Order]   Limit price rounded: ${ce.price} -> ${ze} (maxDecimals=${se})`)}if(Ze==="limit"&&!ze)throw new Error("Price is required for Limit orders");let st=ce.stopLoss,Bt=ce.takeProfit;const Zt=Ye||ze;Zt&&(ce.stopLoss&&ce.stopLoss<100&&(ce.isBuy?st=Zt*(1-ce.stopLoss/100):st=Zt*(1+ce.stopLoss/100),console.log(`[HL Order]  SL %: ${ce.stopLoss}% -> Absolute: ${st==null?void 0:st.toFixed(2)} (from base ${Zt})`)),ce.takeProfit&&ce.takeProfit<100&&(ce.isBuy?Bt=Zt*(1+ce.takeProfit/100):Bt=Zt*(1-ce.takeProfit/100),console.log(`[HL Order]  TP %: ${ce.takeProfit}% -> Absolute: ${Bt==null?void 0:Bt.toFixed(2)} (from base ${Zt})`))),w("Placing HL Order...");const Ge=await Hn.createOrder(ke,ce.coin,ce.isBuy,Ne,ze,{orderType:Ze,reduceOnly:ce.reduceOnly||!1,stopLoss:st,takeProfit:Bt}),At=(ce.orderType||"limit").toUpperCase(),un=ce.leverage?` (${ce.leverage}x leverage)`:"",Pe=ze?` @ ${ze}`:"",Ve=ce.usdcAmount?` (${ce.usdcAmount} USDC)`:"",ft=st||Bt?` [SL: ${st?st.toFixed(2):"none"}, TP: ${Bt?Bt.toFixed(2):"none"}]`:"";re.push({type:"success",title:"Order Placed",details:`Placed ${At} ${ce.isBuy?"LONG":"SHORT"} ${Ne.toFixed(4)} ${ce.coin}${Ve}${Pe}${un}${ft}`})}catch(oe){re.push({type:"error",title:"Order Failed",details:oe.message})}else if(me==="updateHLLeverage")if(!t.isUnlocked||!t.hlEncryptedPrivateKey)re.push({type:"error",title:"Leverage Update Failed",details:"Vault is locked."});else try{w("Updating Leverage...");const oe=await ar.decrypt(t.hlEncryptedPrivateKey,e),ke=$t.getWalletFromPrivateKey(oe),Ne=await Hn.updateLeverage(ke,ce.coin,ce.leverage,ce.isCross);re.push({type:"success",title:"Leverage Updated",details:`Set ${ce.coin} leverage to ${ce.leverage}x (${ce.isCross?"Cross":"Isolated"})`})}catch(oe){re.push({type:"error",title:"Leverage Update Failed",details:oe.message})}else if(me==="closeHLPosition")if(!t.isUnlocked||!t.hlEncryptedPrivateKey)re.push({type:"error",title:"Close Failed",details:"Vault is locked."});else try{w("Closing Position...");const oe=await ar.decrypt(t.hlEncryptedPrivateKey,e),ke=$t.getWalletFromPrivateKey(oe);try{w("Closing HL Position...");try{const Ne=await Hn.closePosition(ke,ce.coin,ce.size,ce.orderType||"market",ce.price);re.push({type:"success",title:"Position Closed",details:`Closed ${ce.size?ce.size:"entire"} ${ce.coin} position via ${ce.orderType||"market"} order`})}catch(Ne){if(Ne.message&&Ne.message.includes("Insufficient margin")){console.log("[HL Close] Insufficient margin detected. Attempting to Add Isolated Margin..."),w("Insufficient Margin. Adding Funds...");const ze=await Hn.getUserState(ke.address),Ze=ze.assetPositions.find(Ye=>Ye.position.coin===ce.coin);if(Ze){const We=parseFloat(Ze.position.szi)>0,St=parseFloat(ze.withdrawable);let st=20;if(St<25&&(st=Math.max(0,St-2)),st<1)throw new Error(`Insufficient margin to close and wallet balance is too low ($${St.toFixed(2)}) to add more margin.`);console.log(`[HL Close] Wallet Balance: ${St}, Adding Margin: ${st}`),await Hn.updateIsolatedMargin(ke,ce.coin,We,st),console.log("[HL Close] Retrying close after adding margin..."),w("Retrying Close Position..."),await Hn.closePosition(ke,ce.coin,ce.size,ce.orderType||"market",ce.price),re.push({type:"success",title:"Position Closed (Recovered)",details:`Added ${st.toFixed(2)} USDC margin to cover loss and closed ${ce.coin} position successfully.`})}else throw new Error("Position not found during margin recovery.")}else if(Ne.message&&Ne.message.includes("Cross margin is not allowed"))re.push({type:"error",title:"Close Failed",details:"Cross margin not supported and insufficient isolated margin."});else throw Ne}}catch(Ne){re.push({type:"error",title:"Close Failed",details:Ne.message})}}catch(oe){re.push({type:"error",title:"Close Failed",details:oe.message})}else if(me==="cancelHLOrder")if(!t.isUnlocked||!t.hlEncryptedPrivateKey)re.push({type:"error",title:"Cancel Failed",details:"Vault is locked."});else try{w("Cancelling HL Order...");const oe=await ar.decrypt(t.hlEncryptedPrivateKey,e),ke=$t.getWalletFromPrivateKey(oe),Ne=await Hn.cancelOrder(ke,ce.coin,ce.orderId);re.push({type:"success",title:"Order Cancelled",details:`Cancelled Order ${ce.orderId}. Status: ${Ne.status}`})}catch(oe){re.push({type:"error",title:"Cancel Failed",details:oe.message})}else if(me==="withdrawFromHL")if(!t.isUnlocked||!t.hlEncryptedPrivateKey)re.push({type:"error",title:"Withdrawal Failed",details:"Hyperliquid Vault is locked."});else if(!t.hlOwnerPublicKey)re.push({type:"error",title:"Withdrawal Failed",details:"No Hyperliquid Owner Wallet connected. Please connect your MetaMask wallet first."});else try{w("Withdrawing from Hyperliquid...");const oe=await ar.decrypt(t.hlEncryptedPrivateKey,e),ke=$t.getWalletFromPrivateKey(oe),Ne=await Hn.withdrawUSDC(ke,t.hlOwnerPublicKey,ce.amount);s("HL Withdrawal",`Withdrew ${ce.amount} USDC from Hyperliquid`,((M=(I=(A=(B=Ne.response)==null?void 0:B.data)==null?void 0:A.statuses)==null?void 0:I[0])==null?void 0:M.tx)||"pending"),re.push({type:"success",title:"Hyperliquid Withdrawal Initiated",details:`Withdrawing ${ce.amount} USDC to ${t.hlOwnerPublicKey.slice(0,6)}...${t.hlOwnerPublicKey.slice(-4)}. Fee: $1 USDC. ETA: ~5 minutes.`})}catch(oe){(z=oe.message)!=null&&z.includes("Must deposit before performing actions")?re.push({type:"error",title:"Deposit Required",details:"Your Hyperliquid account needs an initial deposit before you can perform any actions. Please deposit USDC to your Hyperliquid vault address first."}):re.push({type:"error",title:"Withdrawal Error",details:oe.message})}else if(me==="getDealerTradeHistory")try{w("Querying Dealer history...");const oe=ce.coin||void 0,ke=Math.min(ce.limit||10,50),Ne=ce.includeReasoning!==!1,ze=kt.getSnapshot(),Ze=kt.getTradeHistory(oe,ke,Ne);if(Ze.operations.length===0&&Ze.recentLogs.length===0){let Ye="";oe?Ye=`No h histrico de operaes em ${oe}. O Dealer no executou trades nessa moeda.`:ze.logs.length===0?Ye="Sem histrico disponvel. O Dealer ainda no executou nenhum trade ou o histrico foi limpo.":Ye="O Dealer analisou o mercado mas no executou nenhum trade ainda. Os sinais recebidos no atingiram o nvel de confiana necessrio.",re.push({type:"success",title:"Dealer History",details:Ye})}else{let Ye="";Ze.operations.length>0&&(Ye+=` **TRADE OPERATIONS** (${Ze.totalOperations} total)

`,Ze.operations.forEach((We,St)=>{var Zt,Ge;const st=We.pnl!==void 0?` | PnL: ${We.pnl>=0?"+":""}$${We.pnl.toFixed(2)}`:"",Bt=We.status==="OPEN"?"":"";Ye+=`${Bt} **${We.action} ${We.coin}** @ $${((Zt=We.entryPrice)==null?void 0:Zt.toFixed(2))||"N/A"}${st}
`,Ye+=`   Size: ${We.size} ($${(Ge=We.sizeUSDC)==null?void 0:Ge.toFixed(2)}) | Confidence: ${(We.confidence*100).toFixed(0)}%
`,Ne&&We.fullReasoning&&(Ye+=`   **Reasoning:** ${We.fullReasoning}
`),Ye+=`   Time: ${new Date(We.timestamp).toLocaleString()}

`})),Ze.operations.length===0&&Ze.recentLogs.length>0&&(Ye+=` **RECENT ANALYSIS LOGS**

`,Ze.recentLogs.forEach(We=>{var St;Ye+=` [${We.type}] ${We.message}
`,(St=We.details)!=null&&St.fullReason&&(Ye+=`  Reasoning: ${We.details.fullReason}
`)})),re.push({type:"success",title:oe?`Dealer History: ${oe}`:"Dealer Trade History",details:Ye.trim()})}}catch(oe){re.push({type:"error",title:"Dealer History Error",details:oe.message})}}let ae="";if(W.candidates&&W.candidates[0].content&&W.candidates[0].content.parts)for(const ue of W.candidates[0].content.parts)ue.text&&(ae+=ue.text);let Ee="I processed your request.";if(re.length>0){const ue=re.some(ce=>ce.type==="error"),me=re.some(ce=>ce.type==="success");ue&&!me?Ee="I encountered an issue executing that command.":me?Ee="Action completed successfully.":ue&&me&&(Ee="Some actions completed, but others failed.")}l(ue=>[...ue,{id:(Date.now()+1).toString(),role:"model",content:ae||Ee,timestamp:Date.now(),toolResults:re}])}catch(G){console.error("AI Error:",G),l(te=>[...te,{id:Date.now().toString(),role:"model",content:"Sorry, I encountered a system error while processing that request.",toolResults:[{type:"error",title:"System Error",details:G.message}],timestamp:Date.now()}])}finally{x(!1),w("")}}}},Q0="/poly-clob",UA="/poly-gamma",Bht="/poly-data",UZ=200,jht=3;class Uht{constructor(){this.privateKey=null,this.wallet=null,this.apiCredentials=null,this.lastRequestTime=0,this.isInitialized=!1}createWallet(){return Wf.createRandom()}getWalletFromPrivateKey(e){return new Wf(e)}async initialize(e){try{return this.privateKey=e,this.wallet=new Wf(e),this.apiCredentials=await this.createOrDeriveApiKeys(),this.isInitialized=!0,console.log("[PolymarketService] Initialized with address:",this.wallet.address),!0}catch(n){return console.error("[PolymarketService] Failed to initialize:",n),!1}}getIsInitialized(){return this.isInitialized}getAddress(){var e;return((e=this.wallet)==null?void 0:e.address)||null}async throttledFetch(e,n){const i=Date.now()-this.lastRequestTime;i<UZ&&await new Promise(o=>setTimeout(o,UZ-i)),this.lastRequestTime=Date.now();let s=null;for(let o=0;o<jht;o++)try{const a=await fetch(e,n);if(a.status===429){const l=parseInt(a.headers.get("Retry-After")||"1",10);console.warn(`[PolymarketService] Rate limited, waiting ${l}s...`),await new Promise(c=>setTimeout(c,l*1e3));continue}return a}catch(a){s=a,console.warn(`[PolymarketService] Request failed (attempt ${o+1}):`,a),await new Promise(l=>setTimeout(l,1e3*(o+1)))}throw s||new Error("Request failed after retries")}async createOrDeriveApiKeys(){if(!this.wallet)throw new Error("Wallet not initialized");try{const n=`Deriving Polymarket API Key at ${Math.floor(Date.now()/1e3)}`,r=await this.wallet.signMessage(n),i=Kn(pi(r+"apiKey")).slice(0,34),s=Kn(pi(r+"secret")).slice(0,66),o=Kn(pi(r+"passphrase")).slice(0,18);return{apiKey:i,secret:s,passphrase:o}}catch(e){throw console.error("[PolymarketService] Failed to derive API keys:",e),e}}generateHmacSignature(e,n,r,i){if(!this.apiCredentials)throw new Error("API credentials not initialized");const s=r+e+n+(i||"");return Kn(pi(this.apiCredentials.secret+s))}getAuthHeaders(e,n,r){if(!this.apiCredentials||!this.wallet)throw new Error("Service not initialized");const i=Math.floor(Date.now()/1e3).toString(),s=this.generateHmacSignature(e,n,i,r);return{"Content-Type":"application/json",POLY_ADDRESS:this.wallet.address,POLY_API_KEY:this.apiCredentials.apiKey,POLY_PASSPHRASE:this.apiCredentials.passphrase,POLY_SIGNATURE:s,POLY_TIMESTAMP:i}}async getActiveMarkets(e,n=50,r=0){try{let i=`${UA}/events?active=true&closed=false&limit=${n}&offset=${r}`;e&&(i+=`&tag=${e}`);const s=await this.throttledFetch(i);if(!s.ok)throw new Error(`Failed to fetch markets: ${s.status}`);const o=await s.json(),a=[];for(const l of o)if(l.markets&&Array.isArray(l.markets))for(const c of l.markets)a.push(this.transformMarket(c,l));return a}catch(i){return console.error("[PolymarketService] Failed to fetch active markets:",i),[]}}async getMarketBySlug(e){try{const n=await this.throttledFetch(`${UA}/markets/slug/${e}`);if(!n.ok){if(n.status===404)return null;throw new Error(`Failed to fetch market: ${n.status}`)}const r=await n.json();return this.transformMarket(r)}catch(n){return console.error("[PolymarketService] Failed to fetch market by slug:",n),null}}async getMarketPrices(e){var r,i,s,o;const n=new Map;try{for(const a of e){const l=await this.throttledFetch(`${Q0}/book?token_id=${a}`);if(l.ok){const c=await l.json(),u=((i=(r=c.bids)==null?void 0:r[0])==null?void 0:i.price)||0,f=((o=(s=c.asks)==null?void 0:s[0])==null?void 0:o.price)||1,m=(parseFloat(u)+parseFloat(f))/2;n.set(a,{yes:m,no:1-m})}}}catch(a){console.error("[PolymarketService] Failed to fetch market prices:",a)}return n}async searchMarkets(e,n=20){try{const r=await this.throttledFetch(`${UA}/search/events?search_string=${encodeURIComponent(e)}&limit=${n}`);if(!r.ok)throw new Error(`Search failed: ${r.status}`);const i=await r.json(),s=[];for(const o of i)if(o.markets&&Array.isArray(o.markets))for(const a of o.markets)s.push(this.transformMarket(a,o));return s}catch(r){return console.error("[PolymarketService] Failed to search markets:",r),[]}}transformMarket(e,n){var r,i,s,o,a,l,c,u;return{id:e.id||e.condition_id,conditionId:e.condition_id||e.conditionId||"",questionId:e.question_id||e.questionId||"",slug:e.slug||"",question:e.question||(n==null?void 0:n.title)||"",description:e.description||(n==null?void 0:n.description)||"",tokenIdYes:((i=(r=e.tokens)==null?void 0:r[0])==null?void 0:i.token_id)||((s=e.clobTokenIds)==null?void 0:s[0])||"",tokenIdNo:((a=(o=e.tokens)==null?void 0:o[1])==null?void 0:a.token_id)||((l=e.clobTokenIds)==null?void 0:l[1])||"",priceYes:parseFloat((c=e.outcomePrices)==null?void 0:c[0])||.5,priceNo:parseFloat((u=e.outcomePrices)==null?void 0:u[1])||.5,volume24h:parseFloat(e.volume24hr)||0,liquidity:parseFloat(e.liquidity)||0,endDate:e.endDate||e.end_date_iso||"",category:this.categorizeMarket((n==null?void 0:n.tags)||[]),active:e.active!==!1,resolved:e.resolved||!1,outcome:e.outcome||null}}categorizeMarket(e){const n=e.join(" ").toLowerCase();return n.includes("crypto")||n.includes("bitcoin")||n.includes("ethereum")?"crypto":n.includes("politic")||n.includes("election")||n.includes("government")?"politics":n.includes("sport")||n.includes("nfl")||n.includes("nba")||n.includes("soccer")?"sports":n.includes("business")||n.includes("economy")||n.includes("stock")?"business":n.includes("science")||n.includes("tech")||n.includes("ai")?"science":n.includes("culture")||n.includes("entertainment")||n.includes("celebrity")?"pop-culture":"other"}async getBalance(){if(!this.wallet)return 0;try{const e="https://polygon-rpc.com",n="0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174",r=new X_e(e),i=["function balanceOf(address) view returns (uint256)"],o=await new Fg(n,i,r).balanceOf(this.wallet.address);return parseFloat(One(o,6))}catch(e){return console.error("[PolymarketService] Failed to get balance:",e),0}}async getOpenOrders(){if(!this.isInitialized)return[];try{const e="/orders",n=this.getAuthHeaders("GET",e),r=await this.throttledFetch(`${Q0}${e}`,{method:"GET",headers:n});if(!r.ok)throw new Error(`Failed to fetch orders: ${r.status}`);return(await r.json()).map(s=>this.transformOrder(s))}catch(e){return console.error("[PolymarketService] Failed to fetch open orders:",e),[]}}async getPositions(){if(!this.wallet)return[];try{const e=this.wallet.address,n=await this.throttledFetch(`${Bht}/positions?user=${e}`);if(!n.ok){if(n.status===404)return[];throw new Error(`Failed to fetch positions: ${n.status}`)}const r=await n.json();return Array.isArray(r)?r.map(i=>this.transformPosition(i)):[]}catch(e){return console.error("[PolymarketService] Failed to fetch positions:",e),[]}}async getTrades(e=20){if(!this.isInitialized)return[];try{const n=`/trades?limit=${e}`,r=this.getAuthHeaders("GET",n),i=await this.throttledFetch(`${Q0}${n}`,{method:"GET",headers:r});if(!i.ok)throw new Error(`Failed to fetch trades: ${i.status}`);return(await i.json()).map(o=>this.transformTrade(o))}catch(n){return console.error("[PolymarketService] Failed to fetch trades:",n),[]}}async createOrder(e){if(!this.isInitialized)return{success:!1,error:"Service not initialized"};try{const n={tokenID:e.tokenId,price:e.price.toString(),size:e.size.toString(),side:e.side,orderType:"GTC",tickSize:e.tickSize||"0.01",negRisk:e.negRisk||!1},r="/order",i=JSON.stringify(n),s=this.getAuthHeaders("POST",r,i),o=await this.throttledFetch(`${Q0}${r}`,{method:"POST",headers:s,body:i});if(!o.ok)return{success:!1,error:(await o.json().catch(()=>({}))).message||`Order failed: ${o.status}`};const a=await o.json();return{success:!0,orderId:a.orderID||a.order_id}}catch(n){return console.error("[PolymarketService] Failed to create order:",n),{success:!1,error:n.message}}}async cancelOrder(e){if(!this.isInitialized)return!1;try{const n=`/order/${e}`,r=this.getAuthHeaders("DELETE",n);return(await this.throttledFetch(`${Q0}${n}`,{method:"DELETE",headers:r})).ok}catch(n){return console.error("[PolymarketService] Failed to cancel order:",n),!1}}async cancelAllOrders(){if(!this.isInitialized)return!1;try{const e="/orders",n=this.getAuthHeaders("DELETE",e);return(await this.throttledFetch(`${Q0}${e}`,{method:"DELETE",headers:n})).ok}catch(e){return console.error("[PolymarketService] Failed to cancel all orders:",e),!1}}transformOrder(e){var n;return{id:e.id||e.order_id,marketId:e.market||e.marketId||"",tokenId:e.asset_id||e.tokenId||"",side:((n=e.side)==null?void 0:n.toUpperCase())||"BUY",outcome:e.outcome||"YES",price:parseFloat(e.price)||0,size:parseFloat(e.original_size||e.size)||0,filledSize:parseFloat(e.size_matched||e.filledSize)||0,status:this.mapOrderStatus(e.status),createdAt:new Date(e.created_at||e.createdAt).getTime()}}mapOrderStatus(e){return{open:"OPEN",live:"OPEN",matched:"FILLED",filled:"FILLED",cancelled:"CANCELED",canceled:"CANCELED",partial:"PARTIALLY_FILLED"}[e==null?void 0:e.toLowerCase()]||"OPEN"}transformPosition(e){var c;const n=parseFloat(e.size||e.shares)||0,r=parseFloat(e.avgPrice||e.average_price)||0,i=parseFloat(e.currentPrice||e.price)||r,s=n*r,o=n*i,a=o-s,l=s>0?a/s*100:0;return{marketId:e.market||e.marketId||"",question:e.question||e.title||"",outcome:((c=e.outcome)==null?void 0:c.toUpperCase())||"YES",shares:n,avgPrice:r,currentPrice:i,unrealizedPnl:a,unrealizedPnlPercent:l,costBasis:s,currentValue:o}}transformTrade(e){var n,r;return{id:e.id||e.trade_id,marketId:e.market||e.marketId||"",question:e.question||e.title||"",outcome:((n=e.outcome)==null?void 0:n.toUpperCase())||"YES",side:((r=e.side)==null?void 0:r.toUpperCase())||"BUY",price:parseFloat(e.price)||0,size:parseFloat(e.size)||0,fee:parseFloat(e.fee||e.trading_fee)||0,timestamp:new Date(e.created_at||e.timestamp||e.createdAt).getTime(),realizedPnl:e.realized_pnl?parseFloat(e.realized_pnl):void 0}}async checkHealth(){try{return(await this.throttledFetch(`${UA}/health`)).ok}catch{return!1}}}const ns=new Uht;class Fht{async getMarketContext(e){try{const n=new Date(e.endDate),r=new Date,i=Math.max(0,Math.ceil((n.getTime()-r.getTime())/(1e3*60*60*24)));let s="neutral";return e.priceYes>.6?s="bullish":e.priceYes<.4&&(s="bearish"),{market:e,timeToResolution:i,sentiment:s,ts:Date.now()}}catch(n){return console.error("[PolymarketMCP] Failed to get market context:",n),{market:e,timeToResolution:0,ts:Date.now(),error:n.message}}}async getBatchContext(e,n,r,i,s=20){const o=[];try{for(const c of e){const f=(await ns.getActiveMarkets(c,Math.ceil(s/e.length))).filter(m=>m.liquidity>=i.minLiquidity&&m.volume24h>=i.minVolume24h&&m.active&&!m.resolved);for(const m of f){const g=await this.getMarketContext(m);o.push(g)}}const a=n.reduce((c,u)=>c+u.currentValue,0),l=n.reduce((c,u)=>c+u.unrealizedPnl,0);return{markets:o.slice(0,s),portfolio:{balance:r,positions:n,totalExposure:a,unrealizedPnl:l},settings:i,ts:Date.now()}}catch(a){return console.error("[PolymarketMCP] Failed to get batch context:",a),{markets:[],portfolio:{balance:r,positions:n,totalExposure:0,unrealizedPnl:0},settings:i,ts:Date.now()}}}calculatePositionsPnL(e){const n=e.reduce((a,l)=>a+l.costBasis,0),r=e.reduce((a,l)=>a+l.currentValue,0),i=r-n,s=n>0?i/n*100:0,o=e.map(a=>({marketId:a.marketId,question:a.question,outcome:a.outcome,pnl:a.unrealizedPnl,pnlPercent:a.unrealizedPnlPercent}));return{totalCostBasis:n,totalValue:r,totalPnl:i,totalPnlPercent:s,byMarket:o}}buildAnalysisPrompt(e,n,r){const{markets:i,portfolio:s,settings:o}=e,a=i.map(u=>{const f=u.market;return`- "${f.question}" [${f.category}]
  ID: ${f.id} | TokenYES: ${f.tokenIdYes} | TokenNO: ${f.tokenIdNo}
  YES: ${(f.priceYes*100).toFixed(1)}% | Volume24h: $${f.volume24h.toLocaleString()} | Liquidity: $${f.liquidity.toLocaleString()}
  Days to Resolution: ${u.timeToResolution} | Sentiment: ${u.sentiment||"neutral"}`}).join(`
`),l=s.positions.length>0?s.positions.map(u=>`- "${u.question.slice(0,50)}..." ${u.outcome}: ${u.shares.toFixed(2)} shares @ ${(u.avgPrice*100).toFixed(1)}% (PnL: $${u.unrealizedPnl.toFixed(2)})`).join(`
`):"No open positions";return`
POLYMARKET DEALER ANALYSIS
${r?`
=== RECENT ACTIVITY CONTEXT ===
${r}
`:""}
=== STRATEGY ===
${n}

=== PORTFOLIO STATUS ===
Balance: $${s.balance.toFixed(2)} USDC
Total Exposure: $${s.totalExposure.toFixed(2)}
Unrealized PnL: $${s.unrealizedPnl.toFixed(2)}
Open Positions: ${s.positions.length} / ${o.maxOpenPositions}

=== CURRENT POSITIONS ===
${l}

=== AVAILABLE MARKETS (${i.length}) ===
${a}

=== CONSTRAINTS ===
- Max Position Size: $${o.maxPositionSizeUSDC}
- Max Open Positions: ${o.maxOpenPositions}
- Min Market Liquidity: $${o.minLiquidity.toLocaleString()}
- Allowed Categories: ${o.allowedCategories.join(", ")}

=== INSTRUCTIONS ===
Analyze each market and provide trading decisions.
For each decision include:
1. Action: BUY_YES, BUY_NO, SELL_YES, SELL_NO, or HOLD
2. Market ID (use the ID provided)
3. Token ID (use TokenYES for BUY_YES/SELL_YES, TokenNO for BUY_NO/SELL_NO)
4. Confidence (0-100)
5. Reasoning
6. Suggested size in USDC (if applicable)
7. Suggested limit price (if applicable)

Respond in JSON format:
{
  "decisions": [
    {
      "action": "BUY_YES",
      "marketId": "...",
      "question": "...",
      "tokenId": "...",
      "confidence": 75,
      "reason": "...",
      "suggestedSize": 25,
      "suggestedPrice": 0.45
    }
  ],
  "marketOverview": "Brief overall market assessment",
  "riskAssessment": "Brief risk commentary",
  "cycleSummary": "Brief 1-2 sentence summary of this analysis for context in next cycle. Include key observations and actions. Max 300 chars."
}
`}parseAIResponse(e){try{const n=e.match(/\{[\s\S]*\}/);if(!n)return console.error("[PolymarketMCP] No JSON found in AI response"),[];const r=JSON.parse(n[0]);return!r.decisions||!Array.isArray(r.decisions)?[]:r.decisions.map(i=>({action:i.action||"HOLD",marketId:i.marketId||"",question:i.question||"",tokenId:i.tokenId||"",confidence:i.confidence||0,reason:i.reason||"",suggestedSize:i.suggestedSize,suggestedPrice:i.suggestedPrice})).filter(i=>i.action!=="HOLD"&&i.confidence>=60)}catch(n){return console.error("[PolymarketMCP] Failed to parse AI response:",n),[]}}}const _3=new Fht,FZ="polymarket-dealer-cycle",$Z="polymarket-dealer-sync";class $ht{constructor(){this.isLoopRunning=!1,this.executor=null,at.subscribe(()=>{const e=at.getSnapshot();e.isOn&&!this.isLoopRunning?this.startLoop():!e.isOn&&this.isLoopRunning&&this.stopLoop()})}startLoop(){if(this.isLoopRunning)return;const e=at.getSnapshot();if(!e.isOn)return;console.log("[PolymarketDealerService]  Starting main loop with Web Worker timer (background-safe)..."),this.isLoopRunning=!0,hC.start(),at.addLog("INFO","Polymarket Dealer loop started"),this.runCycle();const n=e.settings.checkIntervalSeconds*1e3;Oa.start(FZ,n,()=>this.runCycle()),this.startSyncLoop()}startSyncLoop(){Oa.start($Z,3e4,()=>this.syncPortfolio())}async syncPortfolio(){if(ns.getIsInitialized())try{const[e,n]=await Promise.all([ns.getBalance(),ns.getPositions()]),r=n.reduce((i,s)=>i+s.currentValue,0);at.updatePortfolioState(n,e,r)}catch(e){console.error("[PolymarketDealerService] Sync error:",e)}}stopLoop(){console.log("[PolymarketDealerService]  Stopping loop..."),Oa.stop(FZ),Oa.stop($Z),hC.stop(),this.isLoopRunning=!1,at.addLog("INFO","Polymarket Dealer loop stopped"),at.setAnalyzing(!1)}setExecutor(e){this.executor=e}async runCycle(){const e=at.getSnapshot();if(!e.isOn){this.stopLoop();return}if(!ns.getIsInitialized()){at.addLog("WARNING","Polymarket service not initialized, skipping cycle");return}try{console.log("[PolymarketDealerService] === Starting new cycle ==="),at.setAnalyzing(!0),at.setStatusMessage("Starting analysis cycle..."),at.setCurrentTask("Fetching Markets"),at.setStatusMessage("Fetching active markets from Polymarket...");const n=e.settings,[r,i]=await Promise.all([ns.getBalance(),ns.getPositions()]),s=i.reduce((E,C)=>E+C.currentValue,0);at.updatePortfolioState(i,r,s);const o=i.length<n.maxOpenPositions,a=n.bankrollType==="MANUAL"?Math.min(n.manualBankroll,r):r;a<n.maxPositionSizeUSDC&&at.addLog("WARNING","Insufficient balance for new positions"),at.setCurrentTask("Building Context"),at.setStatusMessage("Building market context for AI analysis...");const l=await _3.getBatchContext(n.allowedCategories.length>0?n.allowedCategories:["politics","crypto","business"],i,a,{maxPositionSizeUSDC:n.maxPositionSizeUSDC,maxOpenPositions:n.maxOpenPositions,minLiquidity:n.minLiquidity,minVolume24h:n.minVolume24h,allowedCategories:n.allowedCategories},20);if(l.markets.length===0){at.addLog("REASONING","No actionable markets found",{fullReason:`Scanned available markets but none met the filtering criteria.
                    Filters: Min Liquidity: $${n.minLiquidity.toLocaleString()}, Min Volume: $${n.minVolume24h.toLocaleString()}
                    Allowed categories: ${n.allowedCategories.join(", ")}
                    Waiting for better opportunities in the next cycle.`,context:{minLiquidity:n.minLiquidity,minVolume24h:n.minVolume24h,allowedCategories:n.allowedCategories,availableBankroll:a,openPositions:i.length}}),at.setAnalyzing(!1),at.setCurrentTask(""),at.setStatusMessage("Waiting for next cycle...");return}at.setStatusDetail("Found "+l.markets.length+" markets to analyze"),at.setCurrentTask("AI Analysis"),at.setStatusMessage("Consulting AI for trading decisions...");const c=n.promptMode==="preset"?AT[n.selectedPreset]:n.strategyPrompt,u=Ju.getContextForAI("polymarket");u&&at.addLog("INFO",` Cycle Summary: Including ${u.length} char context from previous cycles`);const f=_3.buildAnalysisPrompt(l,c,u),m=await tm.getPolymarketAnalysis(f);if(!m){at.addLog("ERROR","AI analysis failed - no response"),at.setAnalyzing(!1);return}const g=_3.parseAIResponse(m);let x="",v;try{const E=m.match(/\{[\s\S]*\}/);if(E){const C=JSON.parse(E[0]);C.marketOverview&&(x=C.marketOverview),C.riskAssessment&&x&&(x+=" | Risk: "+C.riskAssessment),C.cycleSummary&&typeof C.cycleSummary=="string"&&(v=C.cycleSummary.slice(0,350))}}catch{x=m.replace(/\{[\s\S]*\}/,"").trim().slice(0,200)||"Analysis complete"}if(v&&(Ju.setSummary("polymarket",v),at.addLog("INFO",` AI Summary: ${v.slice(0,80)}...`)),at.addLog("REASONING",x||"AI Analysis Complete",{fullReason:m,context:{marketsAnalyzed:l.markets.length,currentBalance:r,currentExposure:s,openPositions:i.length,maxPositions:n.maxOpenPositions,allowedCategories:n.allowedCategories,intentsFound:g.length}}),at.setAnalysisNote(x||"Analyzed "+l.markets.length+" markets"),g.length===0)at.addLog("REASONING","No trades recommended - HOLD strategy",{fullReason:"After analyzing the available markets, no opportunities met the confidence threshold or risk parameters. Current market conditions suggest holding existing positions.",context:{marketsAnalyzed:l.markets.length,currentBalance:r,recommendation:"HOLD"}}),at.setCurrentSignal("NEUTRAL"),at.setStatusDetail("No trades recommended - holding");else{const E=g.filter(O=>O.action.startsWith("BUY")).length,C=g.filter(O=>O.action.startsWith("SELL")).length,k=E>C?"BULLISH":C>E?"BEARISH":"NEUTRAL";at.addLog("SIGNAL",`${g.length} trading signals - ${k}`,{fullReason:`AI identified ${g.length} trading opportunities across the analyzed markets.
                    ${E} BUY signals and ${C} SELL signals indicate a ${k} overall stance.`,context:{totalIntents:g.length,buySignals:E,sellSignals:C,sentiment:k,intents:g.map(O=>{var j;return{market:O.question.slice(0,60),action:O.action,confidence:O.confidence,reason:(j=O.reason)==null?void 0:j.slice(0,100)}})}}),at.setCurrentSignal(k),at.setStatusDetail(`${E} buy signals, ${C} sell signals`)}if(g.length>0&&o&&this.executor){at.setCurrentTask("Executing Trades"),at.setStatusMessage("Executing trading decisions...");for(const E of g){if(E.confidence<60){at.addLog("INFO","Skipping low-confidence intent: "+E.question.slice(0,50));continue}if(i.length>=n.maxOpenPositions){at.addLog("WARNING","Max positions reached, skipping remaining intents");break}try{await this.executor(E),at.addLog("TRADE",`${E.action} on "${E.question.slice(0,40)}..."`,{fullReason:E.reason||"Trade executed based on AI analysis",context:{action:E.action,confidence:E.confidence,marketId:E.marketId,question:E.question,suggestedPrice:E.suggestedPrice,suggestedSize:E.suggestedSize}})}catch(C){at.addLog("ERROR","Failed to execute: "+C.message)}}}at.setAnalyzing(!1),at.setCurrentTask(""),at.setStatusMessage("Cycle complete. Waiting "+n.checkIntervalSeconds+"s..."),at.setStatusDetail(""),console.log("[PolymarketDealerService] === Cycle complete ===");const w=l.markets.map(E=>E.market.question.slice(0,30));Ju.recordCycle("polymarket",{timestamp:Date.now(),decisions:g.map(E=>({asset:E.question.slice(0,40),action:E.action,confidence:E.confidence/100})),assetsAnalyzed:w})}catch(n){console.error("[PolymarketDealerService] Cycle error:",n),at.addLog("ERROR","Cycle error: "+n.message),at.setAnalyzing(!1),at.setCurrentTask(""),at.setStatusMessage("Error occurred. Retrying next cycle...")}}}const zht=new $ht;function Dme(t,e){const n=T.useSyncExternalStore(at.subscribe.bind(at),at.getSnapshot.bind(at)),r=T.useRef(!1);T.useEffect(()=>{if(!t.isUnlocked||!t.pmEncryptedPrivateKey||!e||e.trim()==="")return;(async()=>{try{const g=await ar.decrypt(t.pmEncryptedPrivateKey,e);await ns.initialize(g)?at.addLog("INFO","Polymarket service initialized"):at.addLog("ERROR","Failed to initialize Polymarket service")}catch(g){console.error("[usePolymarket] Init error:",g),at.addLog("ERROR","Initialization error: "+g.message)}})()},[t.isUnlocked,t.pmEncryptedPrivateKey,e]),T.useEffect(()=>{r.current||(zht.setExecutor(async m=>{await i(m)}),r.current=!0)},[]);const i=async m=>{var C,k;if(!ns.getIsInitialized()){at.addLog("ERROR","Service not initialized");return}const g=m.suggestedPrice||.5,x=m.suggestedSize||n.settings.maxPositionSizeUSDC;let v=m.tokenId;if(!v){at.addLog("WARNING",`Skipping "${(C=m.question)==null?void 0:C.slice(0,40)}..." - tokenId not available`);return}const w=(g*100).toFixed(1);at.addLog("TRADE",`Executing ${m.action} on "${(k=m.question)==null?void 0:k.slice(0,40)}..." @ ${w}`);const E=await ns.createOrder({tokenId:v,side:m.action==="BUY_YES"||m.action==="BUY_NO"?"BUY":"SELL",price:g,size:Math.floor(x/g)});E.success?(at.addLog("TRADE",`Order placed: ${E.orderId}`),at.addOperationRecord({marketId:m.marketId,question:m.question,outcome:m.action.includes("YES")?"YES":"NO",action:m.action.startsWith("BUY")?"BUY":"SELL",timestamp:Date.now(),price:g,shares:x/g,sizeUSDC:x,reasoning:m.reason||m.reasoning||"",confidence:m.confidence,status:"OPEN"})):at.addLog("ERROR",`Order failed: ${E.error}`)};T.useEffect(()=>{if(!n.isOn||!ns.getIsInitialized())return;const m=async()=>{try{const[x,v]=await Promise.all([ns.getBalance(),ns.getPositions()]),w=v.reduce((E,C)=>E+C.currentValue,0);at.updatePortfolioState(v,x,w)}catch(x){console.error("[usePolymarket] Sync error:",x)}};m();const g=setInterval(m,3e4);return()=>clearInterval(g)},[n.isOn]);const s=m=>{at.toggleDealer(m),m?at.addLog("INFO","Polymarket Dealer activated"):at.addLog("INFO","Polymarket Dealer deactivated")},o=m=>{at.updateSettings(m)},a=()=>{at.reload(),at.addLog("INFO","Settings applied")},l=m=>{at.setStrategyPrompt(m),at.addLog("INFO","Strategy prompt updated")},c=()=>{at.clearLogs()},u=async m=>{if(!ns.getIsInitialized())return at.addLog("ERROR","Service not initialized"),{success:!1,error:"Service not initialized"};const g=(m.price*100).toFixed(1);at.addLog("TRADE","Executing "+m.side+" "+m.outcome+" @ "+g+"c");const x=await ns.createOrder({tokenId:m.tokenId,side:m.side,price:m.price,size:m.size});return x.success?(at.addLog("TRADE","Order placed: "+x.orderId),at.addOperationRecord({marketId:m.marketId,question:m.question,outcome:m.outcome,action:m.side,timestamp:Date.now(),price:m.price,shares:m.size,sizeUSDC:m.size*m.price,reasoning:m.reason,confidence:m.confidence,status:"OPEN"})):at.addLog("ERROR","Order failed: "+x.error),x},f=async m=>{const g=await ns.cancelOrder(m);return g?at.addLog("INFO","Order "+m+" canceled"):at.addLog("ERROR","Failed to cancel order "+m),g};return{state:n,isOn:n.isOn,isAnalyzing:n.isAnalyzing,settings:n.settings,logs:n.logs,positions:n.activePositions,operationHistory:n.operationHistory,toggleDealer:s,updateSettings:o,applyChanges:a,saveStrategy:l,clearLogs:c,executeOrder:u,cancelOrder:f}}const Hht=({onSelectConversation:t})=>{const[e,n]=T.useState([]),[r,i]=T.useState(""),{user:s}=p1();T.useEffect(()=>{s!=null&&s.uid&&o()},[s==null?void 0:s.uid]);const o=async()=>{const f=await Xu.getHistory();n(Array.isArray(f)?f:[])},a=async(f,m)=>{f.stopPropagation(),window.confirm("Delete this conversation?")&&(await Xu.deleteConversation(m),o())},l=e.filter(f=>f.title.toLowerCase().includes(r.toLowerCase())),c=l.reduce((f,m)=>{const g=new Date(m.timestamp),v=Math.floor((new Date().getTime()-g.getTime())/(1e3*60*60*24));let w="Older";return v===0?w="Today":v===1?w="Yesterday":v<7?w="Previous 7 Days":v<30&&(w="Previous 30 Days"),f[w]||(f[w]=[]),f[w].push(m),f},{}),u=["Today","Yesterday","Previous 7 Days","Previous 30 Days","Older"];return h.jsxs(rn.div,{className:"h-full flex flex-col p-8 max-w-7xl mx-auto w-full",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[h.jsxs("div",{className:"flex items-center justify-between mb-8",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-bold text-white tracking-tight mb-2",children:"Conversation History"}),h.jsx("p",{className:"text-slate-400",children:"Manage and revisit your past interactions with the Vault Operator."})]}),h.jsxs("div",{className:"relative",children:[h.jsx(hne,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-500",size:18}),h.jsx(hx,{type:"text",placeholder:"Search conversations...",value:r,onChange:f=>i(f.target.value),className:"pl-10 w-64 focus-visible:ring-[#E7FE55]/20 focus-visible:border-[#E7FE55]/30"})]})]}),h.jsx("div",{className:"flex-1 overflow-y-auto pr-2 custom-scrollbar",children:l.length===0?h.jsxs(rn.div,{className:"flex flex-col items-center justify-center h-64 text-slate-500",initial:{opacity:0},animate:{opacity:1},children:[h.jsx(cw,{size:48,className:"mb-4 opacity-20"}),h.jsx("p",{children:"No conversations found."})]}):h.jsx("div",{className:"space-y-8",children:u.map(f=>{const m=c[f];return!m||m.length===0?null:h.jsxs(rn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[h.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[h.jsx("div",{className:"h-px bg-slate-800 flex-1"}),h.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:f}),h.jsx("div",{className:"h-px bg-slate-800 flex-1"})]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:h.jsx(Go,{children:m.map((g,x)=>h.jsx(rn.div,{onClick:()=>t(g.id),className:"group",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:x*.05},whileHover:{scale:1.02},children:h.jsxs(Bs,{className:"p-4 cursor-pointer hover:border-[#E7FE55]/30 hover:shadow-xl hover:shadow-[#E7FE55]/5 relative overflow-hidden h-full",children:[h.jsx("div",{className:"absolute top-0 right-0 p-3 opacity-0 group-hover:opacity-100 transition-opacity z-10",children:h.jsx(Ui,{variant:"ghost",size:"icon",onClick:v=>a(v,g.id),className:"h-7 w-7 text-slate-400 hover:text-red-400 hover:bg-red-500/20",children:h.jsx(sm,{size:14})})}),h.jsxs("div",{className:"flex flex-col h-full justify-between",children:[h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center gap-2 mb-3 text-[#E7FE55]",children:[h.jsx(cw,{size:16}),h.jsxs("span",{className:"text-xs font-mono opacity-70",children:["ID: ",g.id.slice(0,8),"..."]})]}),h.jsx("h3",{className:"text-base font-semibold text-slate-200 group-hover:text-white line-clamp-2 mb-2 transition-colors",children:g.title})]}),h.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500 mt-4 pt-4 border-t border-slate-700/30",children:[h.jsxs("div",{className:"flex items-center gap-1.5",children:[h.jsx(GL,{size:12}),h.jsx("span",{children:new Date(g.timestamp).toLocaleDateString(void 0,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),h.jsx("div",{className:"group-hover:translate-x-1 transition-transform text-[#E7FE55]/50 group-hover:text-[#E7FE55]",children:h.jsx(rm,{size:14})})]})]})]})},g.id))})})]},f)})})})]})};function zZ(t,[e,n]){return Math.min(n,Math.max(e,t))}function Vht(t){const e=qht(t),n=T.forwardRef((r,i)=>{const{children:s,...o}=r,a=T.Children.toArray(s),l=a.find(Kht);if(l){const c=l.props.children,u=a.map(f=>f===l?T.Children.count(c)>1?T.Children.only(null):T.isValidElement(c)?c.props.children:null:f);return h.jsx(e,{...o,ref:i,children:T.isValidElement(c)?T.cloneElement(c,void 0,u):null})}return h.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}function qht(t){const e=T.forwardRef((n,r)=>{const{children:i,...s}=n;if(T.isValidElement(i)){const o=Yht(i),a=Wht(s,i.props);return i.type!==T.Fragment&&(a.ref=r?Rx(r,o):o),T.cloneElement(i,a)}return T.Children.count(i)>1?T.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var Ght=Symbol("radix.slottable");function Kht(t){return T.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Ght}function Wht(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const l=s(...a);return i(...a),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function Yht(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Jht(t){const e=T.useRef({value:t,previous:t});return T.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var Xht=[" ","Enter","ArrowUp","ArrowDown"],Qht=[" ","Enter"],Am="Select",[GN,KN,Zht]=Ehe(Am),[rv]=Im(Am,[Zht,m2]),WN=m2(),[ept,vh]=rv(Am),[tpt,npt]=rv(Am),Lme=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:i,onOpenChange:s,value:o,defaultValue:a,onValueChange:l,dir:c,name:u,autoComplete:f,disabled:m,required:g,form:x}=t,v=WN(e),[w,E]=T.useState(null),[C,k]=T.useState(null),[O,j]=T.useState(!1),R=vj(c),[U,V]=Aw({prop:r,defaultProp:i??!1,onChange:s,caller:Am}),[F,$]=Aw({prop:o,defaultProp:a,onChange:l,caller:Am}),K=T.useRef(null),H=w?x||!!w.closest("form"):!0,[B,A]=T.useState(new Set),I=Array.from(B).map(M=>M.props.value).join(";");return h.jsx(MRe,{...v,children:h.jsxs(ept,{required:g,scope:e,trigger:w,onTriggerChange:E,valueNode:C,onValueNodeChange:k,valueNodeHasChildren:O,onValueNodeHasChildrenChange:j,contentId:Yf(),value:F,onValueChange:$,open:U,onOpenChange:V,dir:R,triggerPointerDownPosRef:K,disabled:m,children:[h.jsx(GN.Provider,{scope:e,children:h.jsx(tpt,{scope:t.__scopeSelect,onNativeOptionAdd:T.useCallback(M=>{A(z=>new Set(z).add(M))},[]),onNativeOptionRemove:T.useCallback(M=>{A(z=>{const G=new Set(z);return G.delete(M),G})},[]),children:n})}),H?h.jsxs(o0e,{"aria-hidden":!0,required:g,tabIndex:-1,name:u,autoComplete:f,value:F,onChange:M=>$(M.target.value),disabled:m,form:x,children:[F===void 0?h.jsx("option",{value:""}):null,Array.from(B)]},I):null]})})};Lme.displayName=Am;var Bme="SelectTrigger",jme=T.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...i}=t,s=WN(n),o=vh(Bme,n),a=o.disabled||r,l=Nr(e,o.onTriggerChange),c=KN(n),u=T.useRef("touch"),[f,m,g]=l0e(v=>{const w=c().filter(k=>!k.disabled),E=w.find(k=>k.value===o.value),C=c0e(w,v,E);C!==void 0&&o.onValueChange(C.value)}),x=v=>{a||(o.onOpenChange(!0),g()),v&&(o.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return h.jsx(Rse,{asChild:!0,...s,children:h.jsx(Mn.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":a0e(o.value)?"":void 0,...i,ref:l,onClick:mn(i.onClick,v=>{v.currentTarget.focus(),u.current!=="mouse"&&x(v)}),onPointerDown:mn(i.onPointerDown,v=>{u.current=v.pointerType;const w=v.target;w.hasPointerCapture(v.pointerId)&&w.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(x(v),v.preventDefault())}),onKeyDown:mn(i.onKeyDown,v=>{const w=f.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&m(v.key),!(w&&v.key===" ")&&Xht.includes(v.key)&&(x(),v.preventDefault())})})})});jme.displayName=Bme;var Ume="SelectValue",Fme=T.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,children:s,placeholder:o="",...a}=t,l=vh(Ume,n),{onValueNodeHasChildrenChange:c}=l,u=s!==void 0,f=Nr(e,l.onValueNodeChange);return Is(()=>{c(u)},[c,u]),h.jsx(Mn.span,{...a,ref:f,style:{pointerEvents:"none"},children:a0e(l.value)?h.jsx(h.Fragment,{children:o}):s})});Fme.displayName=Ume;var rpt="SelectIcon",$me=T.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...i}=t;return h.jsx(Mn.span,{"aria-hidden":!0,...i,ref:e,children:r||""})});$me.displayName=rpt;var ipt="SelectPortal",zme=t=>h.jsx(g2,{asChild:!0,...t});zme.displayName=ipt;var Tm="SelectContent",Hme=T.forwardRef((t,e)=>{const n=vh(Tm,t.__scopeSelect),[r,i]=T.useState();if(Is(()=>{i(new DocumentFragment)},[]),!n.open){const s=r;return s?Pm.createPortal(h.jsx(Vme,{scope:t.__scopeSelect,children:h.jsx(GN.Slot,{scope:t.__scopeSelect,children:h.jsx("div",{children:t.children})})}),s):null}return h.jsx(qme,{...t,ref:e})});Hme.displayName=Tm;var tl=10,[Vme,bh]=rv(Tm),spt="SelectContentImpl",opt=Vht("SelectContent.RemoveScroll"),qme=T.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:o,side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:f,collisionBoundary:m,collisionPadding:g,sticky:x,hideWhenDetached:v,avoidCollisions:w,...E}=t,C=vh(Tm,n),[k,O]=T.useState(null),[j,R]=T.useState(null),U=Nr(e,ae=>O(ae)),[V,F]=T.useState(null),[$,K]=T.useState(null),H=KN(n),[B,A]=T.useState(!1),I=T.useRef(!1);T.useEffect(()=>{if(k)return Qhe(k)},[k]),Vhe();const M=T.useCallback(ae=>{const[Ee,...ue]=H().map(oe=>oe.ref.current),[me]=ue.slice(-1),ce=document.activeElement;for(const oe of ae)if(oe===ce||(oe==null||oe.scrollIntoView({block:"nearest"}),oe===Ee&&j&&(j.scrollTop=0),oe===me&&j&&(j.scrollTop=j.scrollHeight),oe==null||oe.focus(),document.activeElement!==ce))return},[H,j]),z=T.useCallback(()=>M([V,k]),[M,V,k]);T.useEffect(()=>{B&&z()},[B,z]);const{onOpenChange:G,triggerPointerDownPosRef:te}=C;T.useEffect(()=>{if(k){let ae={x:0,y:0};const Ee=me=>{var ce,oe;ae={x:Math.abs(Math.round(me.pageX)-(((ce=te.current)==null?void 0:ce.x)??0)),y:Math.abs(Math.round(me.pageY)-(((oe=te.current)==null?void 0:oe.y)??0))}},ue=me=>{ae.x<=10&&ae.y<=10?me.preventDefault():k.contains(me.target)||G(!1),document.removeEventListener("pointermove",Ee),te.current=null};return te.current!==null&&(document.addEventListener("pointermove",Ee),document.addEventListener("pointerup",ue,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ee),document.removeEventListener("pointerup",ue,{capture:!0})}}},[k,G,te]),T.useEffect(()=>{const ae=()=>G(!1);return window.addEventListener("blur",ae),window.addEventListener("resize",ae),()=>{window.removeEventListener("blur",ae),window.removeEventListener("resize",ae)}},[G]);const[Y,q]=l0e(ae=>{const Ee=H().filter(ce=>!ce.disabled),ue=Ee.find(ce=>ce.ref.current===document.activeElement),me=c0e(Ee,ae,ue);me&&setTimeout(()=>me.ref.current.focus())}),D=T.useCallback((ae,Ee,ue)=>{const me=!I.current&&!ue;(C.value!==void 0&&C.value===Ee||me)&&(F(ae),me&&(I.current=!0))},[C.value]),_=T.useCallback(()=>k==null?void 0:k.focus(),[k]),W=T.useCallback((ae,Ee,ue)=>{const me=!I.current&&!ue;(C.value!==void 0&&C.value===Ee||me)&&K(ae)},[C.value]),X=r==="popper"?QD:Gme,re=X===QD?{side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:f,collisionBoundary:m,collisionPadding:g,sticky:x,hideWhenDetached:v,avoidCollisions:w}:{};return h.jsx(Vme,{scope:n,content:k,viewport:j,onViewportChange:R,itemRefCallback:D,selectedItem:V,onItemLeave:_,itemTextRefCallback:W,focusSelectedItem:z,selectedItemText:$,position:r,isPositioned:B,searchRef:Y,children:h.jsx(Ej,{as:opt,allowPinchZoom:!0,children:h.jsx(wj,{asChild:!0,trapped:C.open,onMountAutoFocus:ae=>{ae.preventDefault()},onUnmountAutoFocus:mn(i,ae=>{var Ee;(Ee=C.trigger)==null||Ee.focus({preventScroll:!0}),ae.preventDefault()}),children:h.jsx(u2,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:ae=>ae.preventDefault(),onDismiss:()=>C.onOpenChange(!1),children:h.jsx(X,{role:"listbox",id:C.contentId,"data-state":C.open?"open":"closed",dir:C.dir,onContextMenu:ae=>ae.preventDefault(),...E,...re,onPlaced:()=>A(!0),ref:U,style:{display:"flex",flexDirection:"column",outline:"none",...E.style},onKeyDown:mn(E.onKeyDown,ae=>{const Ee=ae.ctrlKey||ae.altKey||ae.metaKey;if(ae.key==="Tab"&&ae.preventDefault(),!Ee&&ae.key.length===1&&q(ae.key),["ArrowUp","ArrowDown","Home","End"].includes(ae.key)){let me=H().filter(ce=>!ce.disabled).map(ce=>ce.ref.current);if(["ArrowUp","End"].includes(ae.key)&&(me=me.slice().reverse()),["ArrowUp","ArrowDown"].includes(ae.key)){const ce=ae.target,oe=me.indexOf(ce);me=me.slice(oe+1)}setTimeout(()=>M(me)),ae.preventDefault()}})})})})})})});qme.displayName=spt;var apt="SelectItemAlignedPosition",Gme=T.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...i}=t,s=vh(Tm,n),o=bh(Tm,n),[a,l]=T.useState(null),[c,u]=T.useState(null),f=Nr(e,U=>u(U)),m=KN(n),g=T.useRef(!1),x=T.useRef(!0),{viewport:v,selectedItem:w,selectedItemText:E,focusSelectedItem:C}=o,k=T.useCallback(()=>{if(s.trigger&&s.valueNode&&a&&c&&v&&w&&E){const U=s.trigger.getBoundingClientRect(),V=c.getBoundingClientRect(),F=s.valueNode.getBoundingClientRect(),$=E.getBoundingClientRect();if(s.dir!=="rtl"){const ce=$.left-V.left,oe=F.left-ce,ke=U.left-oe,Ne=U.width+ke,ze=Math.max(Ne,V.width),Ze=window.innerWidth-tl,Ye=zZ(oe,[tl,Math.max(tl,Ze-ze)]);a.style.minWidth=Ne+"px",a.style.left=Ye+"px"}else{const ce=V.right-$.right,oe=window.innerWidth-F.right-ce,ke=window.innerWidth-U.right-oe,Ne=U.width+ke,ze=Math.max(Ne,V.width),Ze=window.innerWidth-tl,Ye=zZ(oe,[tl,Math.max(tl,Ze-ze)]);a.style.minWidth=Ne+"px",a.style.right=Ye+"px"}const K=m(),H=window.innerHeight-tl*2,B=v.scrollHeight,A=window.getComputedStyle(c),I=parseInt(A.borderTopWidth,10),M=parseInt(A.paddingTop,10),z=parseInt(A.borderBottomWidth,10),G=parseInt(A.paddingBottom,10),te=I+M+B+G+z,Y=Math.min(w.offsetHeight*5,te),q=window.getComputedStyle(v),D=parseInt(q.paddingTop,10),_=parseInt(q.paddingBottom,10),W=U.top+U.height/2-tl,X=H-W,re=w.offsetHeight/2,ae=w.offsetTop+re,Ee=I+M+ae,ue=te-Ee;if(Ee<=W){const ce=K.length>0&&w===K[K.length-1].ref.current;a.style.bottom="0px";const oe=c.clientHeight-v.offsetTop-v.offsetHeight,ke=Math.max(X,re+(ce?_:0)+oe+z),Ne=Ee+ke;a.style.height=Ne+"px"}else{const ce=K.length>0&&w===K[0].ref.current;a.style.top="0px";const ke=Math.max(W,I+v.offsetTop+(ce?D:0)+re)+ue;a.style.height=ke+"px",v.scrollTop=Ee-W+v.offsetTop}a.style.margin=`${tl}px 0`,a.style.minHeight=Y+"px",a.style.maxHeight=H+"px",r==null||r(),requestAnimationFrame(()=>g.current=!0)}},[m,s.trigger,s.valueNode,a,c,v,w,E,s.dir,r]);Is(()=>k(),[k]);const[O,j]=T.useState();Is(()=>{c&&j(window.getComputedStyle(c).zIndex)},[c]);const R=T.useCallback(U=>{U&&x.current===!0&&(k(),C==null||C(),x.current=!1)},[k,C]);return h.jsx(cpt,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:g,onScrollButtonChange:R,children:h.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:O},children:h.jsx(Mn.div,{...i,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});Gme.displayName=apt;var lpt="SelectPopperPosition",QD=T.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=tl,...s}=t,o=WN(n);return h.jsx(Ose,{...o,...s,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});QD.displayName=lpt;var[cpt,Vj]=rv(Tm,{}),ZD="SelectViewport",Kme=T.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...i}=t,s=bh(ZD,n),o=Vj(ZD,n),a=Nr(e,s.onViewportChange),l=T.useRef(0);return h.jsxs(h.Fragment,{children:[h.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),h.jsx(GN.Slot,{scope:n,children:h.jsx(Mn.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:mn(i.onScroll,c=>{const u=c.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:m}=o;if(m!=null&&m.current&&f){const g=Math.abs(l.current-u.scrollTop);if(g>0){const x=window.innerHeight-tl*2,v=parseFloat(f.style.minHeight),w=parseFloat(f.style.height),E=Math.max(v,w);if(E<x){const C=E+g,k=Math.min(x,C),O=C-k;f.style.height=k+"px",f.style.bottom==="0px"&&(u.scrollTop=O>0?O:0,f.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});Kme.displayName=ZD;var Wme="SelectGroup",[upt,dpt]=rv(Wme),fpt=T.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=Yf();return h.jsx(upt,{scope:n,id:i,children:h.jsx(Mn.div,{role:"group","aria-labelledby":i,...r,ref:e})})});fpt.displayName=Wme;var Yme="SelectLabel",Jme=T.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=dpt(Yme,n);return h.jsx(Mn.div,{id:i.id,...r,ref:e})});Jme.displayName=Yme;var CC="SelectItem",[hpt,Xme]=rv(CC),Qme=T.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:s,...o}=t,a=vh(CC,n),l=bh(CC,n),c=a.value===r,[u,f]=T.useState(s??""),[m,g]=T.useState(!1),x=Nr(e,C=>{var k;return(k=l.itemRefCallback)==null?void 0:k.call(l,C,r,i)}),v=Yf(),w=T.useRef("touch"),E=()=>{i||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return h.jsx(hpt,{scope:n,value:r,disabled:i,textId:v,isSelected:c,onItemTextChange:T.useCallback(C=>{f(k=>k||((C==null?void 0:C.textContent)??"").trim())},[]),children:h.jsx(GN.ItemSlot,{scope:n,value:r,disabled:i,textValue:u,children:h.jsx(Mn.div,{role:"option","aria-labelledby":v,"data-highlighted":m?"":void 0,"aria-selected":c&&m,"data-state":c?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:x,onFocus:mn(o.onFocus,()=>g(!0)),onBlur:mn(o.onBlur,()=>g(!1)),onClick:mn(o.onClick,()=>{w.current!=="mouse"&&E()}),onPointerUp:mn(o.onPointerUp,()=>{w.current==="mouse"&&E()}),onPointerDown:mn(o.onPointerDown,C=>{w.current=C.pointerType}),onPointerMove:mn(o.onPointerMove,C=>{var k;w.current=C.pointerType,i?(k=l.onItemLeave)==null||k.call(l):w.current==="mouse"&&C.currentTarget.focus({preventScroll:!0})}),onPointerLeave:mn(o.onPointerLeave,C=>{var k;C.currentTarget===document.activeElement&&((k=l.onItemLeave)==null||k.call(l))}),onKeyDown:mn(o.onKeyDown,C=>{var O;((O=l.searchRef)==null?void 0:O.current)!==""&&C.key===" "||(Qht.includes(C.key)&&E(),C.key===" "&&C.preventDefault())})})})})});Qme.displayName=CC;var Mb="SelectItemText",Zme=T.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,...s}=t,o=vh(Mb,n),a=bh(Mb,n),l=Xme(Mb,n),c=npt(Mb,n),[u,f]=T.useState(null),m=Nr(e,E=>f(E),l.onItemTextChange,E=>{var C;return(C=a.itemTextRefCallback)==null?void 0:C.call(a,E,l.value,l.disabled)}),g=u==null?void 0:u.textContent,x=T.useMemo(()=>h.jsx("option",{value:l.value,disabled:l.disabled,children:g},l.value),[l.disabled,l.value,g]),{onNativeOptionAdd:v,onNativeOptionRemove:w}=c;return Is(()=>(v(x),()=>w(x)),[v,w,x]),h.jsxs(h.Fragment,{children:[h.jsx(Mn.span,{id:l.textId,...s,ref:m}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Pm.createPortal(s.children,o.valueNode):null]})});Zme.displayName=Mb;var e0e="SelectItemIndicator",t0e=T.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return Xme(e0e,n).isSelected?h.jsx(Mn.span,{"aria-hidden":!0,...r,ref:e}):null});t0e.displayName=e0e;var eL="SelectScrollUpButton",n0e=T.forwardRef((t,e)=>{const n=bh(eL,t.__scopeSelect),r=Vj(eL,t.__scopeSelect),[i,s]=T.useState(!1),o=Nr(e,r.onScrollButtonChange);return Is(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollTop>0;s(c)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),i?h.jsx(i0e,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});n0e.displayName=eL;var tL="SelectScrollDownButton",r0e=T.forwardRef((t,e)=>{const n=bh(tL,t.__scopeSelect),r=Vj(tL,t.__scopeSelect),[i,s]=T.useState(!1),o=Nr(e,r.onScrollButtonChange);return Is(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;s(u)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),i?h.jsx(i0e,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});r0e.displayName=tL;var i0e=T.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=t,s=bh("SelectScrollButton",n),o=T.useRef(null),a=KN(n),l=T.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return T.useEffect(()=>()=>l(),[l]),Is(()=>{var u;const c=a().find(f=>f.ref.current===document.activeElement);(u=c==null?void 0:c.ref.current)==null||u.scrollIntoView({block:"nearest"})},[a]),h.jsx(Mn.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:mn(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:mn(i.onPointerMove,()=>{var c;(c=s.onItemLeave)==null||c.call(s),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:mn(i.onPointerLeave,()=>{l()})})}),ppt="SelectSeparator",s0e=T.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return h.jsx(Mn.div,{"aria-hidden":!0,...r,ref:e})});s0e.displayName=ppt;var nL="SelectArrow",mpt=T.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=WN(n),s=vh(nL,n),o=bh(nL,n);return s.open&&o.position==="popper"?h.jsx(Mse,{...i,...r,ref:e}):null});mpt.displayName=nL;var gpt="SelectBubbleInput",o0e=T.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const i=T.useRef(null),s=Nr(r,i),o=Jht(e);return T.useEffect(()=>{const a=i.current;if(!a)return;const l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&u){const f=new Event("change",{bubbles:!0});u.call(a,e),a.dispatchEvent(f)}},[o,e]),h.jsx(Mn.select,{...n,style:{...Dse,...n.style},ref:s,defaultValue:e})});o0e.displayName=gpt;function a0e(t){return t===""||t===void 0}function l0e(t){const e=th(t),n=T.useRef(""),r=T.useRef(0),i=T.useCallback(o=>{const a=n.current+o;e(a),(function l(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))})(a)},[e]),s=T.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return T.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,s]}function c0e(t,e,n){const i=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=ypt(t,Math.max(s,0));i.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.textValue.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function ypt(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var xpt=Lme,u0e=jme,vpt=Fme,bpt=$me,wpt=zme,d0e=Hme,Ept=Kme,f0e=Jme,h0e=Qme,Spt=Zme,Apt=t0e,p0e=n0e,m0e=r0e,g0e=s0e;const HZ=xpt,VZ=vpt,rL=T.forwardRef(({className:t,children:e,...n},r)=>h.jsxs(u0e,{ref:r,className:Ut("flex h-10 w-full items-center justify-between whitespace-nowrap rounded-lg border border-slate-700 bg-slate-800/50 px-3 py-2 text-sm text-white ring-offset-background placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,h.jsx(bpt,{asChild:!0,children:h.jsx(Al,{className:"h-4 w-4 opacity-50"})})]}));rL.displayName=u0e.displayName;const y0e=T.forwardRef(({className:t,...e},n)=>h.jsx(p0e,{ref:n,className:Ut("flex cursor-default items-center justify-center py-1",t),...e,children:h.jsx(im,{className:"h-4 w-4"})}));y0e.displayName=p0e.displayName;const x0e=T.forwardRef(({className:t,...e},n)=>h.jsx(m0e,{ref:n,className:Ut("flex cursor-default items-center justify-center py-1",t),...e,children:h.jsx(Al,{className:"h-4 w-4"})}));x0e.displayName=m0e.displayName;const iL=T.forwardRef(({className:t,children:e,position:n="popper",...r},i)=>h.jsx(wpt,{children:h.jsxs(d0e,{ref:i,className:Ut("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border border-slate-700 bg-slate-800 text-slate-100 shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[h.jsx(y0e,{}),h.jsx(Ept,{className:Ut("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),h.jsx(x0e,{})]})}));iL.displayName=d0e.displayName;const Tpt=T.forwardRef(({className:t,...e},n)=>h.jsx(f0e,{ref:n,className:Ut("px-2 py-1.5 text-sm font-semibold text-slate-400",t),...e}));Tpt.displayName=f0e.displayName;const sL=T.forwardRef(({className:t,children:e,...n},r)=>h.jsxs(h0e,{ref:r,className:Ut("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-slate-700 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[h.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:h.jsx(Apt,{children:h.jsx(gu,{className:"h-4 w-4"})})}),h.jsx(Spt,{children:e})]}));sL.displayName=h0e.displayName;const kpt=T.forwardRef(({className:t,...e},n)=>h.jsx(g0e,{ref:n,className:Ut("-mx-1 my-1 h-px bg-slate-700",t),...e}));kpt.displayName=g0e.displayName;const Cpt=({addNotification:t,password:e})=>{var I,M,z,G,te,Y,q,D;const{user:n,logout:r}=p1(),[i,s]=T.useState(!1),[o,a]=T.useState(!1),[l,c]=T.useState(""),[u,f]=T.useState(!1),[m,g]=T.useState(null),[x,v]=T.useState(!1),[w,E]=T.useState(!1),[C,k]=T.useState(""),O=T.useRef(null),[j,R]=T.useState(!1),[U,V]=T.useState(""),F=async _=>{var W,X,re,ae,Ee,ue,me,ce,oe,ke,Ne,ze,Ze,Ye,We,St,st,Bt,Zt,Ge,At,un,Pe,Ve,ft,lt,se,J,Z,fe,be,he,ye,Xe,et,it,Ft,xt,Rt,sn;if(!(n!=null&&n.uid)){t("No user session found");return}v(!0);try{const en=Ie.getUserKey("agent_activity_log"),on=Ie.getUserKey("vault_dealer_strategy"),Hi=Ie.getUserKey("agent_scheduler_tasks"),[Vn,le,Q]=await Promise.all([Ie.getItem(en),Ie.getItem(on),Ie.getItem(Hi)]);let ee=[];if(_){const ct=await Xu.getHistory();for(const Xs of ct)try{const $n=await Xu.loadConversation(Xs.id,_);$n&&ee.push($n)}catch($n){console.warn(`Failed to decrypt conversation ${Xs.id}`,$n)}}const pe=await Ie.getItem(Ie.getUserKey("vault_dealer_storage"));let Te=null;if(pe)try{const ct=JSON.parse(pe);Te={strategyPrompt:(W=ct.settings)==null?void 0:W.strategyPrompt,aggressiveMode:(X=ct.settings)==null?void 0:X.aggressiveMode,maxLeverage:(re=ct.settings)==null?void 0:re.maxLeverage,maxPositionSizeUSDC:(ae=ct.settings)==null?void 0:ae.maxPositionSizeUSDC,maxOpenPositions:(Ee=ct.settings)==null?void 0:Ee.maxOpenPositions,bankrollType:(ue=ct.settings)==null?void 0:ue.bankrollType,manualBankroll:(me=ct.settings)==null?void 0:me.manualBankroll,tradingPairs:(ce=ct.settings)==null?void 0:ce.tradingPairs,checkIntervalSeconds:(oe=ct.settings)==null?void 0:oe.checkIntervalSeconds,analysisTimeframe:(ke=ct.settings)==null?void 0:ke.analysisTimeframe,historyCandles:(Ne=ct.settings)==null?void 0:Ne.historyCandles,macroTimeframeEnabled:(ze=ct.settings)==null?void 0:ze.macroTimeframeEnabled,macroTimeframe:(Ze=ct.settings)==null?void 0:Ze.macroTimeframe,macroEnabledIndicators:(Ye=ct.settings)==null?void 0:Ye.macroEnabledIndicators,indicatorSettings:(We=ct.settings)==null?void 0:We.indicatorSettings,autonomousIndicators:(St=ct.settings)==null?void 0:St.autonomousIndicators,selectedPreset:(st=ct.settings)==null?void 0:st.selectedPreset,promptMode:(Bt=ct.settings)==null?void 0:Bt.promptMode,stopLossEnabled:(Zt=ct.settings)==null?void 0:Zt.stopLossEnabled,stopLossPercent:(Ge=ct.settings)==null?void 0:Ge.stopLossPercent,takeProfitEnabled:(At=ct.settings)==null?void 0:At.takeProfitEnabled,takeProfitPercent:(un=ct.settings)==null?void 0:un.takeProfitPercent}}catch(ct){console.error("Failed to parse dealer settings",ct)}const Re=await Ie.getItem(Ie.getUserKey("vault_polymarket_storage"));let $e=null,Jt;if(Re)try{const ct=JSON.parse(Re);$e={strategyPrompt:(Pe=ct.settings)==null?void 0:Pe.strategyPrompt,promptMode:(Ve=ct.settings)==null?void 0:Ve.promptMode,selectedPreset:(ft=ct.settings)==null?void 0:ft.selectedPreset,marketSelectionMode:(lt=ct.settings)==null?void 0:lt.marketSelectionMode,selectedMarkets:(se=ct.settings)==null?void 0:se.selectedMarkets,allowedCategories:(J=ct.settings)==null?void 0:J.allowedCategories,maxPositionSizeUSDC:(Z=ct.settings)==null?void 0:Z.maxPositionSizeUSDC,maxOpenPositions:(fe=ct.settings)==null?void 0:fe.maxOpenPositions,minLiquidity:(be=ct.settings)==null?void 0:be.minLiquidity,minVolume24h:(he=ct.settings)==null?void 0:he.minVolume24h,minVolumeThreshold:(ye=ct.settings)==null?void 0:ye.minVolumeThreshold,minLiquidityThreshold:(Xe=ct.settings)==null?void 0:Xe.minLiquidityThreshold,minSpreadThreshold:(et=ct.settings)==null?void 0:et.minSpreadThreshold,confidenceThreshold:(it=ct.settings)==null?void 0:it.confidenceThreshold,bankrollType:(Ft=ct.settings)==null?void 0:Ft.bankrollType,manualBankroll:(xt=ct.settings)==null?void 0:xt.manualBankroll,checkIntervalSeconds:(Rt=ct.settings)==null?void 0:Rt.checkIntervalSeconds},Jt=(sn=ct.settings)==null?void 0:sn.strategyPrompt}catch(ct){console.error("Failed to parse polymarket settings",ct)}const Kt={version:"1.0",exportedAt:new Date().toISOString(),data:{activityLog:Vn?JSON.parse(Vn):[],conversations:ee.length>0?ee:void 0,hyperliquidDealer:{settings:Te,strategyPrompt:le||void 0},polymarketDealer:{settings:$e,strategyPrompt:Jt},schedulerTasks:Q?JSON.parse(Q):[]}},Vt=new Blob([JSON.stringify(Kt,null,2)],{type:"application/json"}),gn=URL.createObjectURL(Vt),mt=document.createElement("a");mt.href=gn,mt.download=`autonomousvault_backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(mt),mt.click(),document.body.removeChild(mt),URL.revokeObjectURL(gn),t("Backup exported successfully!"),R(!1),V("")}catch(en){console.error("Export failed:",en),t("Failed to export data")}finally{v(!1)}},$=()=>{V(""),R(!0)},K=()=>{if(!U){t("Please enter your password");return}if(U!==e){t("Incorrect password");return}F(U)},H=_=>{var re;const W=(re=_.target.files)==null?void 0:re[0];if(!W)return;const X=new FileReader;X.onload=ae=>{var Ee;try{const ue=(Ee=ae.target)==null?void 0:Ee.result,me=JSON.parse(ue);if(!me.version||!me.data){t("Invalid backup file format");return}g(me),f(!0)}catch(ue){console.error("Failed to parse backup file:",ue),t("Failed to read backup file")}},X.readAsText(W),O.current&&(O.current.value="")},B=async()=>{var _,W,X,re,ae,Ee,ue;if(!(!m||!(n!=null&&n.uid))){E(!0);try{const{data:me}=m;if((_=me.activityLog)!=null&&_.length){const oe=Ie.getUserKey("agent_activity_log");await Ie.setItem(oe,JSON.stringify(me.activityLog))}if((W=me.schedulerTasks)!=null&&W.length){const oe=Ie.getUserKey("agent_scheduler_tasks");await Ie.setItem(oe,JSON.stringify(me.schedulerTasks))}if((X=me.hyperliquidDealer)!=null&&X.strategyPrompt){const oe=Ie.getUserKey("vault_dealer_strategy");await Ie.setItem(oe,me.hyperliquidDealer.strategyPrompt)}const ce=e||C;if((re=me.conversations)!=null&&re.length){if(!ce){t("ERROR: Password required to import conversations"),E(!1);return}console.log(`[Import] Restoring ${me.conversations.length} conversations using provided password...`);for(const oe of me.conversations)try{await Xu.saveConversation(oe,ce)}catch(ke){console.warn(`Failed to restore conversation ${oe.id}`,ke)}}if((ae=me.hyperliquidDealer)!=null&&ae.settings){const oe=await Ie.getItem(Ie.getUserKey("vault_dealer_storage"));try{const ke=oe?JSON.parse(oe):{settings:{}};ke.settings={...ke.settings,...me.hyperliquidDealer.settings},await Ie.setItem(Ie.getUserKey("vault_dealer_storage"),JSON.stringify(ke))}catch(ke){console.error("Failed to merge dealer settings",ke)}}if((Ee=me.polymarketDealer)!=null&&Ee.settings||(ue=me.polymarketDealer)!=null&&ue.strategyPrompt){console.log("[Import] Restoring Polymarket settings:",me.polymarketDealer);const oe=await Ie.getItem(Ie.getUserKey("vault_polymarket_storage"));try{const ke=oe?JSON.parse(oe):{settings:{}};me.polymarketDealer.settings&&(ke.settings={...ke.settings,...me.polymarketDealer.settings}),me.polymarketDealer.strategyPrompt&&(ke.settings={...ke.settings,strategyPrompt:me.polymarketDealer.strategyPrompt}),console.log("[Import] Saving Polymarket settings:",ke.settings),await Ie.setItem(Ie.getUserKey("vault_polymarket_storage"),JSON.stringify(ke))}catch(ke){console.error("Failed to merge polymarket settings",ke)}}else console.log("[Import] No Polymarket settings to restore");console.log("[Import] Reloading stores from storage..."),await kt.reloadFromStorage(),await at.reloadFromStorage(),t("Data restored successfully!"),f(!1),g(null)}catch(me){console.error("Import failed:",me),t("Failed to import data")}finally{E(!1)}}},A=async()=>{if(!(!(n!=null&&n.uid)||l!=="DELETE")){a(!0);try{kt.reset(),at.reset(),await Ie.clearUserData(n.uid),await r(),t("Account deleted successfully")}catch(_){console.error("Delete account failed:",_),t("Failed to delete account"),a(!1)}}};return h.jsxs(rn.div,{className:"h-full flex flex-col gap-4 overflow-y-auto custom-scrollbar pb-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[h.jsxs("div",{className:"glass-panel p-5 rounded",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[h.jsx(OTe,{className:"h-4 w-4 text-[#E7FE55]"}),h.jsx("span",{className:"text-sm font-semibold text-white",children:"Legal"})]}),h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[h.jsxs("a",{href:"/terms.html",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-4 bg-[#14151a] border border-[#232328] rounded hover:border-[#E7FE55]/30 transition-all group",children:[h.jsx("div",{className:"p-2 rounded bg-[#E7FE55]/10",children:h.jsx(lTe,{size:18,className:"text-[#E7FE55]"})}),h.jsxs("div",{className:"flex-1",children:[h.jsx("span",{className:"text-sm font-medium text-white group-hover:text-[#E7FE55] transition-colors",children:"Terms of Use"}),h.jsx("p",{className:"text-[10px] text-[#747580]",children:"Read our terms and conditions"})]}),h.jsx(Gy,{size:14,className:"text-[#747580] group-hover:text-[#E7FE55]"})]}),h.jsxs("a",{href:"/privacy.html",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-4 bg-[#14151a] border border-[#232328] rounded hover:border-[#E7FE55]/30 transition-all group",children:[h.jsx("div",{className:"p-2 rounded bg-[#E7FE55]/10",children:h.jsx(pne,{size:18,className:"text-[#E7FE55]"})}),h.jsxs("div",{className:"flex-1",children:[h.jsx("span",{className:"text-sm font-medium text-white group-hover:text-[#E7FE55] transition-colors",children:"Privacy Policy"}),h.jsx("p",{className:"text-[10px] text-[#747580]",children:"How we handle your data"})]}),h.jsx(Gy,{size:14,className:"text-[#747580] group-hover:text-[#E7FE55]"})]})]})]}),h.jsxs("div",{className:"glass-panel p-5 rounded",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[h.jsx(oTe,{className:"h-4 w-4 text-[#E7FE55]"}),h.jsx("span",{className:"text-sm font-semibold text-white",children:"Data Backup"})]}),h.jsxs("p",{className:"text-xs text-[#747580] mb-4",children:["Export your settings, activity history, and prompts to restore on another device.",h.jsx("span",{className:"text-amber-400",children:" Private keys and sensitive data are never included."})]}),h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[h.jsxs("button",{onClick:$,disabled:x,className:"flex items-center gap-3 p-4 bg-[#14151a] border border-[#232328] rounded hover:border-[#E7FE55]/30 transition-all group disabled:opacity-50",children:[h.jsx("div",{className:"p-2 rounded bg-emerald-500/10",children:h.jsx(Bo,{size:18,className:"text-emerald-400"})}),h.jsxs("div",{className:"flex-1 text-left",children:[h.jsx("span",{className:"text-sm font-medium text-white group-hover:text-emerald-400 transition-colors",children:x?"Exporting...":"Export Data"}),h.jsx("p",{className:"text-[10px] text-[#747580]",children:"Download your settings as JSON"})]})]}),h.jsxs("button",{onClick:()=>{var _;return(_=O.current)==null?void 0:_.click()},className:"flex items-center gap-3 p-4 bg-[#14151a] border border-[#232328] rounded hover:border-[#E7FE55]/30 transition-all group",children:[h.jsx("div",{className:"p-2 rounded bg-blue-500/10",children:h.jsx(OT,{size:18,className:"text-blue-400"})}),h.jsxs("div",{className:"flex-1 text-left",children:[h.jsx("span",{className:"text-sm font-medium text-white group-hover:text-blue-400 transition-colors",children:"Import Data"}),h.jsx("p",{className:"text-[10px] text-[#747580]",children:"Restore from a backup file"})]})]}),h.jsx("input",{ref:O,type:"file",accept:".json",onChange:H,className:"hidden"})]})]}),h.jsxs("div",{className:"glass-panel p-5 rounded border border-red-500/20",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[h.jsx(sm,{className:"h-4 w-4 text-red-400"}),h.jsx("span",{className:"text-sm font-semibold text-white",children:"Danger Zone"})]}),h.jsx("div",{className:"bg-red-500/5 border border-red-500/20 rounded p-4 mb-4",children:h.jsxs("div",{className:"flex gap-3",children:[h.jsx(td,{size:20,className:"text-red-400 shrink-0 mt-0.5"}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm font-medium text-red-400 mb-1",children:"Delete Account"}),h.jsx("p",{className:"text-xs text-[#a0a1a8]",children:"This will permanently delete all your data including activity history, dealer configurations, prompts, and scheduled tasks. This action cannot be undone."})]})]})}),h.jsx("button",{onClick:()=>s(!0),className:"px-4 py-2 bg-red-500/10 border border-red-500/30 rounded text-red-400 text-sm font-medium hover:bg-red-500/20 transition-colors",children:"Delete My Account"})]}),i&&h.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/80 backdrop-blur-sm flex items-center justify-center p-4",children:h.jsx("div",{className:"bg-[#14151a] border border-[#232328] w-full max-w-md rounded-xl shadow-2xl overflow-hidden",children:h.jsxs("div",{className:"p-6",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[h.jsx("div",{className:"p-3 rounded-full bg-red-500/10",children:h.jsx(td,{size:24,className:"text-red-400"})}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-bold text-white",children:"Delete Account"}),h.jsx("p",{className:"text-xs text-[#747580]",children:"This action is irreversible"})]})]}),h.jsxs("p",{className:"text-sm text-[#a0a1a8] mb-4",children:["All your data will be permanently deleted. To confirm, type ",h.jsx("strong",{className:"text-white",children:"DELETE"})," below:"]}),h.jsx("input",{type:"text",value:l,onChange:_=>c(_.target.value),placeholder:"Type DELETE to confirm",className:"w-full px-3 py-2 bg-[#0f1015] border border-[#232328] rounded text-white placeholder:text-[#3a3b42] focus:outline-none focus:border-red-500/50 mb-4"}),h.jsxs("div",{className:"flex gap-3",children:[h.jsx("button",{onClick:()=>{s(!1),c("")},className:"flex-1 px-4 py-2 bg-[#232328] rounded text-white text-sm font-medium hover:bg-[#2a2b30] transition-colors",children:"Cancel"}),h.jsx("button",{onClick:A,disabled:l!=="DELETE"||o,className:Ut("flex-1 px-4 py-2 rounded text-sm font-medium transition-colors",l==="DELETE"?"bg-red-500 text-white hover:bg-red-600":"bg-red-500/30 text-red-400/50 cursor-not-allowed"),children:o?"Deleting...":"Delete Account"})]})]})})}),u&&m&&h.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/80 backdrop-blur-sm flex items-center justify-center p-4",children:h.jsx("div",{className:"bg-[#14151a] border border-[#232328] w-full max-w-md rounded-xl shadow-2xl overflow-hidden",children:h.jsxs("div",{className:"p-6",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[h.jsx("div",{className:"p-3 rounded-full bg-blue-500/10",children:h.jsx(OT,{size:24,className:"text-blue-400"})}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-bold text-white",children:"Import Backup"}),h.jsxs("p",{className:"text-xs text-[#747580]",children:["Created: ",new Date(m.exportedAt).toLocaleDateString()]})]})]}),h.jsxs("div",{className:"bg-[#0f1015] border border-[#232328] rounded p-4 mb-4 space-y-2",children:[h.jsx("p",{className:"text-xs text-[#747580] uppercase tracking-wider mb-2",children:"Data to restore:"}),(I=m.data.activityLog)!=null&&I.length?h.jsxs("div",{className:"flex items-center gap-2 text-sm text-[#a0a1a8]",children:[h.jsx(gu,{size:14,className:"text-emerald-400"}),h.jsxs("span",{children:["Activity Log (",m.data.activityLog.length," items)"]})]}):null,(M=m.data.conversations)!=null&&M.length?h.jsxs("div",{className:"flex items-center gap-2 text-sm text-[#a0a1a8]",children:[h.jsx(gu,{size:14,className:"text-emerald-400"}),h.jsxs("span",{children:["Conversations (",m.data.conversations.length," chats)"]})]}):null,(z=m.data.hyperliquidDealer)!=null&&z.settings?h.jsxs("div",{className:"flex items-center gap-2 text-sm text-[#a0a1a8]",children:[h.jsx(gu,{size:14,className:"text-emerald-400"}),h.jsx("span",{children:"Hyperliquid Dealer Settings"})]}):null,(G=m.data.hyperliquidDealer)!=null&&G.strategyPrompt?h.jsxs("div",{className:"flex items-center gap-2 text-sm text-[#a0a1a8]",children:[h.jsx(gu,{size:14,className:"text-emerald-400"}),h.jsx("span",{children:"Hyperliquid Strategy Prompt"})]}):null,(te=m.data.polymarketDealer)!=null&&te.settings?h.jsxs("div",{className:"flex items-center gap-2 text-sm text-[#a0a1a8]",children:[h.jsx(gu,{size:14,className:"text-emerald-400"}),h.jsx("span",{children:"Polymarket Dealer Settings"})]}):null,(Y=m.data.polymarketDealer)!=null&&Y.strategyPrompt?h.jsxs("div",{className:"flex items-center gap-2 text-sm text-[#a0a1a8]",children:[h.jsx(gu,{size:14,className:"text-emerald-400"}),h.jsx("span",{children:"Polymarket Strategy Prompt"})]}):null,(q=m.data.schedulerTasks)!=null&&q.length?h.jsxs("div",{className:"flex items-center gap-2 text-sm text-[#a0a1a8]",children:[h.jsx(gu,{size:14,className:"text-emerald-400"}),h.jsxs("span",{children:["Scheduled Tasks (",m.data.schedulerTasks.length," items)"]})]}):null]}),(D=m.data.conversations)!=null&&D.length?h.jsxs("div",{className:"mb-4",children:[h.jsx("p",{className:"text-xs text-[#747580] mb-2",children:"Encryption password required to secure imported conversations:"}),h.jsx("input",{type:"password",value:C,onChange:_=>k(_.target.value),placeholder:"Enter encryption password",className:"w-full px-3 py-2 bg-[#0f1015] border border-[#232328] rounded text-white placeholder:text-[#3a3b42] focus:outline-none focus:border-[#E7FE55]/50"}),!C&&!e&&h.jsx("p",{className:"text-[10px] text-amber-500 mt-1",children:"Warning: Without password, conversations will NOT be imported."})]}):null,h.jsx("p",{className:"text-xs text-amber-400 mb-4",children:" This will overwrite your current settings. Are you sure?"}),h.jsxs("div",{className:"flex gap-3",children:[h.jsx("button",{onClick:()=>{f(!1),g(null),k("")},className:"flex-1 px-4 py-2 bg-[#232328] rounded text-white text-sm font-medium hover:bg-[#2a2b30] transition-colors",children:"Cancel"}),h.jsx("button",{onClick:B,disabled:w,className:"flex-1 px-4 py-2 bg-[#E7FE55] rounded text-black text-sm font-semibold hover:bg-[#d9f044] transition-colors disabled:opacity-50",children:w?"Importing...":"Restore Data"})]})]})})}),j&&h.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/80 backdrop-blur-sm flex items-center justify-center p-4",children:h.jsx("div",{className:"bg-[#14151a] border border-[#232328] w-full max-w-md rounded-xl shadow-2xl overflow-hidden",children:h.jsxs("div",{className:"p-6",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[h.jsx("div",{className:"p-3 rounded-full bg-emerald-500/10",children:h.jsx(Bo,{size:24,className:"text-emerald-400"})}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-bold text-white",children:"Confirm Data Export"}),h.jsx("p",{className:"text-xs text-[#747580]",children:"Security check required"})]})]}),h.jsx("p",{className:"text-sm text-[#a0a1a8] mb-4",children:"Please enter your Vault password to authorize the export. This ensures only you can download your data."}),h.jsx("div",{className:"mb-4",children:h.jsx("input",{type:"password",value:U,onChange:_=>V(_.target.value),placeholder:"Enter Vault password",className:"w-full px-3 py-2 bg-[#0f1015] border border-[#232328] rounded text-white placeholder:text-[#3a3b42] focus:outline-none focus:border-[#E7FE55]/50",onKeyDown:_=>{_.key==="Enter"&&K()}})}),h.jsxs("div",{className:"flex gap-3",children:[h.jsx("button",{onClick:()=>{R(!1),V("")},className:"flex-1 px-4 py-2 bg-[#232328] rounded text-white text-sm font-medium hover:bg-[#2a2b30] transition-colors",children:"Cancel"}),h.jsx("button",{onClick:K,className:"flex-1 px-4 py-2 bg-[#E7FE55] rounded text-black text-sm font-semibold hover:bg-[#d9f044] transition-colors",children:"Export"})]})]})})})]})},I3={operator:{name:"Chat Operator",shortName:"Operator",icon:h.jsx(TTe,{size:14}),description:"Chat assistant",color:"#9b87f5"},hyperliquidDealer:{name:"Hyperliquid Dealer",shortName:"Hyperliquid Dealer",icon:h.jsx(Rn,{size:14}),description:"Perp trading",color:"#E7FE55"},polymarketDealer:{name:"Polymarket Dealer",shortName:"Polymarket Dealer",icon:h.jsx(Mg,{size:14}),description:"Predictions",color:"#22d3ee"}},Npt=({vault:t,password:e,addNotification:n,activeTab:r,setActiveTab:i})=>{const[s,o]=T.useState("gemini"),[a,l]=T.useState({gemini:"",openai:"",claude:""}),[c,u]=T.useState({gemini:!1,openai:!1,claude:!1}),[f,m]=T.useState({gemini:"empty",openai:"empty",claude:"empty"}),[g,x]=T.useState({operator:{providerType:"gemini",modelId:"gemini-2.5-flash"},hyperliquidDealer:{providerType:"gemini",modelId:"gemini-2.5-flash"},polymarketDealer:{providerType:"gemini",modelId:"gemini-2.5-flash"}}),[v,w]=T.useState("devnet"),[E,C]=T.useState("testnet"),[k,O]=T.useState(!1);T.useEffect(()=>{const K=ir.getSnapshot(),H={gemini:"",openai:"",claude:""},B={gemini:"empty",openai:"empty",claude:"empty"};for(const I of["gemini","openai","claude"]){const M=ir.getApiKey(I);H[I]=M,B[I]=M?"saved":"empty"}l(H),m(B),x(K.componentConfigs);const A=ir.subscribe(()=>{const I=ir.getSnapshot();x(I.componentConfigs)});return()=>{A()}},[]);const j=(K,H)=>{l(A=>({...A,[K]:H}));const B=ir.getApiKey(K);m(A=>({...A,[K]:H===""?"empty":H!==B?"modified":"saved"}))},R=K=>{const H=a[K].trim();H&&(ir.setApiKey(K,H),m(B=>({...B,[K]:"saved"})),n(`${ql[K].name} API Key saved!`))},U=K=>{ir.clearApiKey(K),l(H=>({...H,[K]:""})),m(H=>({...H,[K]:"empty"})),n(`${ql[K].name} API Key cleared`)},V=(K,H)=>{var M;const A=((M=Yg[H][0])==null?void 0:M.id)||"",I={providerType:H,modelId:A};ir.isProviderConfigured(H)?(ir.setComponentConfig(K,I),n(`${I3[K].name} now using ${ql[H].name}`)):n(`Please configure ${ql[H].name} API key first`)},F=(K,H)=>{const B=g[K],A={...B,modelId:H};ir.setComponentConfig(K,A);const I=Yg[B.providerType].find(M=>M.id===H);n(`${I3[K].name} model changed to ${(I==null?void 0:I.name)||H}`)},$=()=>ir.getConfiguredProviders();return h.jsx(rn.div,{className:"h-full flex flex-col gap-4 overflow-y-auto custom-scrollbar pb-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:r==="user"?h.jsx(Cpt,{addNotification:n,password:e}):h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"glass-panel p-5 rounded",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[h.jsx(ane,{className:"h-4 w-4 text-[#E7FE55]"}),h.jsx("span",{className:"text-sm font-semibold text-white",children:"AI Providers"}),h.jsx("div",{className:"flex items-center gap-1.5 ml-auto",children:["gemini","openai","claude"].map(K=>h.jsx("div",{className:Ut("w-2 h-2 rounded-full transition-all",f[K]==="saved"?"bg-[#34d399]":"bg-[#3a3b42]"),title:`${ql[K].name}: ${f[K]==="saved"?"Configured":"Not configured"}`},K))})]}),h.jsx("div",{className:"flex bg-[#14151a] rounded-lg p-1 border border-[#232328] mb-4",children:["gemini","openai","claude"].map(K=>{const H=ql[K],B=s===K,A=f[K]==="saved";return h.jsxs("button",{onClick:()=>o(K),className:Ut("flex-1 flex items-center justify-center gap-2 py-2 px-3 rounded-md text-xs font-medium transition-all",B?"bg-[#1a1b21] text-white":"text-[#747580] hover:text-[#a0a1a8]"),children:[h.jsx("span",{children:H.icon}),h.jsx("span",{children:H.name.split(" ")[0]}),A&&h.jsx("span",{className:"relative flex h-2 w-2",children:h.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-[#34d399]"})})]},K)})}),h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(cne,{size:14,className:"text-[#747580]"}),h.jsxs("span",{className:"text-[10px] text-[#747580] uppercase tracking-[0.1em]",children:[ql[s].name," API Key"]}),f[s]==="saved"&&h.jsxs("span",{className:"px-2 py-0.5 rounded bg-[#34d399]/15 text-[#34d399] text-[9px] font-semibold uppercase tracking-wider flex items-center gap-1",children:[h.jsx(gu,{size:10})," Saved"]}),f[s]==="modified"&&h.jsxs("span",{className:"px-2 py-0.5 rounded bg-amber-500/15 text-amber-400 text-[9px] font-semibold uppercase tracking-wider flex items-center gap-1",children:[h.jsx(VC,{size:10})," Unsaved"]})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs("div",{className:"relative flex-1",children:[h.jsx("input",{type:c[s]?"text":"password",value:a[s],onChange:K=>j(s,K.target.value),placeholder:`Enter ${ql[s].name} key...`,className:"w-full h-9 px-3 pr-9 text-xs font-mono bg-[#0f1015] border border-[#232328] rounded text-white placeholder:text-[#3a3b42] focus:outline-none focus:border-[#E7FE55]/30 transition-colors"}),h.jsx("button",{type:"button",onClick:()=>u(K=>({...K,[s]:!K[s]})),className:"absolute right-3 top-1/2 -translate-y-1/2 text-[#747580] hover:text-white transition-colors",children:c[s]?h.jsx(KL,{size:14}):h.jsx(lne,{size:14})})]}),h.jsx("button",{onClick:()=>R(s),disabled:f[s]!=="modified",className:Ut("h-9 px-4 rounded text-xs font-semibold transition-all",f[s]==="modified"?"bg-[#E7FE55] text-black hover:bg-[#E7FE55]/90":"bg-[#232328] text-[#3a3b42] cursor-not-allowed"),children:"Save"})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[a[s]&&h.jsx("button",{onClick:()=>U(s),className:"text-[10px] text-red-400/70 hover:text-red-400 transition-colors",children:"Clear key"}),h.jsxs("a",{href:ql[s].keyUrl,target:"_blank",rel:"noopener noreferrer",className:"text-[10px] text-[#E7FE55]/60 hover:text-[#E7FE55] transition-colors flex items-center gap-1 ml-auto",children:["Get API key ",h.jsx(Gy,{size:10})]})]})]})]}),h.jsxs("div",{className:"glass-panel p-5 rounded",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[h.jsx(mo,{className:"h-4 w-4 text-[#E7FE55]"}),h.jsx("span",{className:"text-sm font-semibold text-white",children:"Component Models"})]}),h.jsx("div",{className:"grid grid-cols-3 gap-3",children:["operator","hyperliquidDealer","polymarketDealer"].map(K=>{const H=I3[K],B=g[K],A=Yg[B.providerType],I=$(),M=I.includes(B.providerType);return h.jsxs("div",{className:"p-4 rounded border border-[#232328] bg-[#14151a] space-y-3",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"p-1.5 rounded",style:{backgroundColor:`${H.color}15`},children:h.jsx("span",{style:{color:H.color},children:H.icon})}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("div",{className:"flex items-center gap-1.5",children:[h.jsx("span",{className:"text-xs font-semibold text-white truncate",children:H.shortName}),h.jsxs("span",{className:"relative flex h-2 w-2",children:[M&&h.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-[#34d399] opacity-75"}),h.jsx("span",{className:Ut("relative inline-flex rounded-full h-2 w-2",M?"bg-[#34d399]":"bg-amber-400")})]})]}),h.jsx("p",{className:"text-[9px] text-[#747580] uppercase tracking-[0.05em]",children:H.description})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1.5 block",children:"Provider"}),h.jsxs(HZ,{value:B.providerType,onValueChange:z=>V(K,z),children:[h.jsx(rL,{className:"w-full h-8 text-xs bg-[#0f1015] border-[#232328] text-white",children:h.jsx(VZ,{})}),h.jsx(iL,{className:"bg-[#14151a] border-[#232328]",children:["gemini","openai","claude"].map(z=>{const G=ql[z],te=I.includes(z);return h.jsx(sL,{value:z,disabled:!te,className:"text-xs",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{children:G.icon}),h.jsx("span",{children:G.name.split(" ")[0]}),!te&&h.jsx("span",{className:"text-[#3a3b42] text-[10px]",children:"(no key)"})]})},z)})})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1.5 block",children:"Model"}),h.jsxs(HZ,{value:B.modelId,onValueChange:z=>F(K,z),children:[h.jsx(rL,{className:"w-full h-8 text-xs bg-[#0f1015] border-[#232328] text-white",children:h.jsx(VZ,{})}),h.jsx(iL,{className:"bg-[#14151a] border-[#232328]",children:A.map(z=>h.jsx(sL,{value:z.id,className:"text-xs",children:h.jsx("span",{children:z.name})},z.id))})]})]})]},K)})})]}),h.jsxs("div",{className:"glass-panel rounded overflow-hidden",children:[h.jsxs("button",{onClick:()=>O(!k),className:"w-full p-4 flex items-center justify-between hover:bg-[#1a1b21]/50 transition-all",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(qA,{className:"h-4 w-4 text-[#34d399]"}),h.jsx("span",{className:"text-sm font-semibold text-white",children:"Networks"})]}),h.jsx(Al,{size:16,className:Ut("text-[#747580] transition-transform duration-200",k&&"rotate-180")})]}),k&&h.jsxs("div",{className:"px-4 pb-4 border-t border-[#232328] space-y-3 pt-3",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{className:"text-[10px] text-[#747580] uppercase tracking-[0.1em]",children:"Solana"}),h.jsxs("div",{className:"flex bg-[#14151a] rounded-lg p-1 border border-[#232328]",children:[h.jsx("button",{onClick:()=>w("devnet"),className:Ut("px-3 py-1.5 rounded-md text-[11px] font-medium transition-all",v==="devnet"?"bg-[#1a1b21] text-white":"text-[#747580]"),children:"Devnet"}),h.jsxs("button",{disabled:!0,className:"px-3 py-1.5 rounded-md text-[11px] text-[#3a3b42] flex items-center gap-1",children:["Mainnet ",h.jsx("span",{className:"text-[8px] text-[#747580] bg-[#232328] px-1 rounded",children:"SOON"})]})]})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{className:"text-[10px] text-[#747580] uppercase tracking-[0.1em]",children:"Hyperliquid"}),h.jsxs("div",{className:"flex bg-[#14151a] rounded-lg p-1 border border-[#232328]",children:[h.jsx("button",{onClick:()=>C("testnet"),className:Ut("px-3 py-1.5 rounded-md text-[11px] font-medium transition-all",E==="testnet"?"bg-[#1a1b21] text-white":"text-[#747580]"),children:"Testnet"}),h.jsxs("button",{disabled:!0,className:"px-3 py-1.5 rounded-md text-[11px] text-[#3a3b42] flex items-center gap-1",children:["Mainnet ",h.jsx("span",{className:"text-[8px] text-[#747580] bg-[#232328] px-1 rounded",children:"SOON"})]})]})]})]})]})]})})},_pt=(t,e,n)=>t*n.inputPricePerMillion/1e6+e*n.outputPricePerMillion/1e6,Ipt=({addNotification:t})=>{const[e,n]=T.useState(null),[r,i]=T.useState([]),[s,o]=T.useState(!1),[a,l]=T.useState(!1),[c,u]=T.useState(20),[f,m]=T.useState("ALL"),[g,x]=T.useState(js.getSnapshot().pricing),[v,w]=T.useState(js.getSnapshot().pricing),E=U=>{const V=js.getRecords(1e3),F=js.getStats();if(!F)return null;const $=new Date,K=new Date($.getFullYear(),$.getMonth(),$.getDate()).getTime(),H=new Date($.getFullYear(),$.getMonth(),1).getTime();let B=0;const A={MANAGER:0,DEALER:0,POLYMARKET_DEALER:0},I={input:0,output:0,cost:0},M={input:0,output:0,cost:0};for(const z of V){const G=_pt(z.inputTokens,z.outputTokens,U);B+=G,A[z.source]+=G,z.timestamp>=K&&(I.input+=z.inputTokens,I.output+=z.outputTokens,I.cost+=G),z.timestamp>=H&&(M.input+=z.inputTokens,M.output+=z.outputTokens,M.cost+=G)}return{...F,totalCost:B,bySource:{MANAGER:{...F.bySource.MANAGER,cost:A.MANAGER},DEALER:{...F.bySource.DEALER,cost:A.DEALER},POLYMARKET_DEALER:{...F.bySource.POLYMARKET_DEALER,cost:A.POLYMARKET_DEALER}},today:I,thisMonth:M}};T.useEffect(()=>{const U=()=>{n(E(v)),i(js.getRecords(c,f==="ALL"?void 0:f))};U();const V=js.subscribe(U);return()=>{V()}},[c,f]),T.useEffect(()=>{const U=E(v);n(U)},[v]);const C=()=>{js.updatePricing(g),w({...g}),t("Pricing updated successfully")},k=()=>{confirm("Are you sure you want to clear all token usage history?")&&(js.clearHistory(),t("Token usage history cleared"))},O=U=>U>=1e6?(U/1e6).toFixed(2)+"M":U>=1e3?(U/1e3).toFixed(1)+"K":U.toFixed(0),j=U=>"$"+U.toFixed(4),R=U=>new Date(U).toLocaleString();return e?h.jsxs(rn.div,{className:"h-full flex flex-col space-y-6 overflow-y-auto px-1 pb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[h.jsx(Bs,{className:"border-slate-700/50 bg-gradient-to-br from-slate-900/80 to-slate-800/30",children:h.jsxs(hu,{className:"p-5",children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"p-2 rounded-lg bg-indigo-500/20",children:h.jsx(nd,{className:"text-indigo-400",size:20})}),h.jsx("span",{className:"text-sm text-slate-400",children:"Total Tokens"})]}),h.jsxs(Ui,{variant:"ghost",size:"sm",onClick:k,className:"h-7 px-2 text-xs text-slate-400 hover:text-red-400 hover:bg-red-500/10",children:[h.jsx(sm,{size:14,className:"mr-1"})," Clear"]})]}),h.jsx("div",{className:"text-2xl font-bold text-white",children:O(e.totalInputTokens+e.totalOutputTokens)}),h.jsxs("div",{className:"flex gap-4 mt-2 text-xs text-slate-500",children:[h.jsxs("span",{children:["In: ",O(e.totalInputTokens)]}),h.jsxs("span",{children:["Out: ",O(e.totalOutputTokens)]})]})]})}),h.jsx(Bs,{className:"border-amber-500/30 bg-gradient-to-br from-slate-900/80 to-amber-950/20",children:h.jsxs(hu,{className:"p-5",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[h.jsx("div",{className:"p-2 rounded-lg bg-amber-500/20",children:h.jsx(one,{className:"text-amber-400",size:20})}),h.jsx("span",{className:"text-sm text-slate-400",children:"Total Cost"})]}),h.jsx("div",{className:"text-2xl font-bold text-amber-400",children:j(e.totalCost)}),h.jsx("div",{className:"text-xs text-slate-500 mt-2",children:"Estimated based on current pricing"})]})}),h.jsx(Bs,{className:"border-emerald-500/30 bg-gradient-to-br from-slate-900/80 to-emerald-950/20",children:h.jsxs(hu,{className:"p-5",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[h.jsx("div",{className:"p-2 rounded-lg bg-emerald-500/20",children:h.jsx(Rn,{className:"text-emerald-400",size:20})}),h.jsx("span",{className:"text-sm text-slate-400",children:"Today"})]}),h.jsx("div",{className:"text-2xl font-bold text-white",children:O(e.today.input+e.today.output)}),h.jsx("div",{className:"text-xs text-emerald-400 mt-2",children:j(e.today.cost)})]})}),h.jsx(Bs,{className:"border-blue-500/30 bg-gradient-to-br from-slate-900/80 to-blue-950/20",children:h.jsxs(hu,{className:"p-5",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[h.jsx("div",{className:"p-2 rounded-lg bg-blue-500/20",children:h.jsx(qC,{className:"text-blue-400",size:20})}),h.jsx("span",{className:"text-sm text-slate-400",children:"This Month"})]}),h.jsx("div",{className:"text-2xl font-bold text-white",children:O(e.thisMonth.input+e.thisMonth.output)}),h.jsx("div",{className:"text-xs text-blue-400 mt-2",children:j(e.thisMonth.cost)})]})})]}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[h.jsxs(Bs,{className:"border-indigo-500/30 bg-gradient-to-br from-slate-900/80 to-indigo-950/20",children:[h.jsx(ED,{className:"pb-4",children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"p-2 rounded-lg bg-indigo-500/20",children:h.jsx(mg,{className:"text-indigo-400",size:24})}),h.jsxs("div",{children:[h.jsx(SD,{className:"text-base",children:"Vault Operator"}),h.jsx(AD,{children:"User queries and tool calls"})]})]})}),h.jsxs(hu,{className:"space-y-3",children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("span",{className:"text-sm text-slate-400",children:"Total Queries"}),h.jsx("span",{className:"text-white font-medium",children:e.managerMetrics.totalQueries})]}),h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("span",{className:"text-sm text-slate-400",children:"Avg Tokens/Query"}),h.jsx("span",{className:"text-white font-medium",children:O(e.managerMetrics.avgTokensPerQuery)})]}),h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("span",{className:"text-sm text-slate-400",children:"Avg Cost/Interaction"}),h.jsx("span",{className:"text-indigo-400 font-medium",children:e.managerMetrics.totalQueries>0?j(e.bySource.MANAGER.cost/e.managerMetrics.totalQueries):"$0.0000"})]}),h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("span",{className:"text-sm text-slate-400",children:"Total Cost"}),h.jsx("span",{className:"text-indigo-400 font-medium",children:j(e.bySource.MANAGER.cost)})]}),h.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-700/50",children:[h.jsxs("div",{className:"flex justify-between text-xs text-slate-500 mb-1",children:[h.jsxs("span",{children:["Input: ",O(e.bySource.MANAGER.input)]}),h.jsxs("span",{children:["Output: ",O(e.bySource.MANAGER.output)]})]}),h.jsxs("div",{className:"h-2 bg-slate-800 rounded-full overflow-hidden flex",children:[h.jsx("div",{className:"bg-indigo-500 h-full",style:{width:`${e.bySource.MANAGER.input/(e.bySource.MANAGER.input+e.bySource.MANAGER.output+1)*100}%`}}),h.jsx("div",{className:"bg-indigo-300 h-full",style:{width:`${e.bySource.MANAGER.output/(e.bySource.MANAGER.input+e.bySource.MANAGER.output+1)*100}%`}})]})]})]})]}),h.jsxs(Bs,{className:"border-amber-500/30 bg-gradient-to-br from-slate-900/80 to-amber-950/20",children:[h.jsx(ED,{className:"pb-4",children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"p-2 rounded-lg bg-amber-500/20",children:h.jsx(nd,{className:"text-amber-400",size:24})}),h.jsxs("div",{children:[h.jsx(SD,{className:"text-base",children:"Hyperliquid Dealer"}),h.jsx(AD,{children:"Automated analysis cycles"})]})]})}),h.jsxs(hu,{className:"space-y-3",children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("span",{className:"text-sm text-slate-400",children:"Analysis Cycles"}),h.jsx("span",{className:"text-white font-medium",children:e.bySource.DEALER.count})]}),h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("span",{className:"text-sm text-slate-400",children:"Coins Analyzed"}),h.jsx("span",{className:"text-white font-medium",children:e.dealerMetrics.totalCoinsAnalyzed})]}),h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("span",{className:"text-sm text-slate-400",children:"Avg Cost/Cycle"}),h.jsx("span",{className:"text-amber-400 font-medium",children:e.bySource.DEALER.count>0?j(e.bySource.DEALER.cost/e.bySource.DEALER.count):"$0.0000"})]}),h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("span",{className:"text-sm text-slate-400",children:"Avg Cost/Coin"}),h.jsx("span",{className:"text-amber-400 font-medium",children:e.dealerMetrics.totalCoinsAnalyzed>0?j(e.bySource.DEALER.cost/e.dealerMetrics.totalCoinsAnalyzed):"$0.0000"})]}),h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("span",{className:"text-sm text-slate-400",children:"Total Cost"}),h.jsx("span",{className:"text-amber-400 font-medium",children:j(e.bySource.DEALER.cost)})]}),h.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-700/50",children:[h.jsxs("div",{className:"flex justify-between text-xs text-slate-500 mb-1",children:[h.jsxs("span",{children:["Input: ",O(e.bySource.DEALER.input)]}),h.jsxs("span",{children:["Output: ",O(e.bySource.DEALER.output)]})]}),h.jsxs("div",{className:"h-2 bg-slate-800 rounded-full overflow-hidden flex",children:[h.jsx("div",{className:"bg-amber-500 h-full",style:{width:`${e.bySource.DEALER.input/(e.bySource.DEALER.input+e.bySource.DEALER.output+1)*100}%`}}),h.jsx("div",{className:"bg-amber-300 h-full",style:{width:`${e.bySource.DEALER.output/(e.bySource.DEALER.input+e.bySource.DEALER.output+1)*100}%`}})]})]})]})]})]}),h.jsxs(Bs,{children:[h.jsxs("button",{onClick:()=>o(!s),className:"w-full p-4 flex items-center justify-between hover:bg-slate-800/50 rounded-xl transition-all",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(RT,{size:20,className:"text-slate-400"}),h.jsx("span",{className:"text-white font-medium",children:"Pricing Configuration"})]}),s?h.jsx(im,{size:20,className:"text-slate-400"}):h.jsx(Al,{size:20,className:"text-slate-400"})]}),s&&h.jsxs(hu,{className:"pt-0 border-t border-slate-700/50",children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm text-slate-400 mb-2",children:"Input Price (per 1M tokens)"}),h.jsx(hx,{type:"number",step:"0.01",value:g.inputPricePerMillion,onChange:U=>x(V=>({...V,inputPricePerMillion:parseFloat(U.target.value)||0})),className:"focus-visible:ring-[#E7FE55]/20 focus-visible:border-[#E7FE55]/30"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm text-slate-400 mb-2",children:"Output Price (per 1M tokens)"}),h.jsx(hx,{type:"number",step:"0.01",value:g.outputPricePerMillion,onChange:U=>x(V=>({...V,outputPricePerMillion:parseFloat(U.target.value)||0})),className:"focus-visible:ring-[#E7FE55]/20 focus-visible:border-[#E7FE55]/30"})]})]}),h.jsx("div",{className:"mt-4 flex justify-end",children:h.jsx(Ui,{onClick:C,variant:"success",size:"sm",children:"Apply Pricing"})})]})]}),h.jsxs(Bs,{children:[h.jsxs("button",{onClick:()=>l(!a),className:"w-full p-4 flex items-center justify-between hover:bg-slate-800/50 rounded-xl transition-all",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(Cc,{size:20,className:"text-slate-400"}),h.jsx("span",{className:"text-white font-medium",children:"Usage History"}),h.jsxs(_l,{variant:"secondary",children:[r.length," records"]})]}),a?h.jsx(im,{size:20,className:"text-slate-400"}):h.jsx(Al,{size:20,className:"text-slate-400"})]}),a&&h.jsxs(hu,{className:"pt-0 border-t border-slate-700/50",children:[h.jsxs("div",{className:"flex items-center gap-4 mt-4 mb-4",children:[h.jsx("div",{className:"flex bg-slate-800 rounded-lg p-1",children:["ALL","MANAGER","DEALER"].map(U=>h.jsx(Ui,{variant:f===U?"default":"ghost",size:"sm",onClick:()=>m(U),className:"text-xs",children:U},U))}),h.jsxs("select",{value:c,onChange:U=>u(parseInt(U.target.value)),className:"bg-slate-800 border border-slate-700 text-white rounded-lg px-3 py-1.5 text-xs",children:[h.jsx("option",{value:10,children:"10 records"}),h.jsx("option",{value:20,children:"20 records"}),h.jsx("option",{value:50,children:"50 records"})]})]}),h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full text-sm",children:[h.jsx("thead",{children:h.jsxs("tr",{className:"text-slate-400 text-xs uppercase border-b border-slate-700",children:[h.jsx("th",{className:"text-left py-3 px-2",children:"Timestamp"}),h.jsx("th",{className:"text-left py-3 px-2",children:"Source"}),h.jsx("th",{className:"text-left py-3 px-2",children:"Operation"}),h.jsx("th",{className:"text-right py-3 px-2",children:"Input"}),h.jsx("th",{className:"text-right py-3 px-2",children:"Output"}),h.jsx("th",{className:"text-right py-3 px-2",children:"Cost"})]})}),h.jsxs("tbody",{children:[r.map(U=>h.jsxs("tr",{className:"border-b border-slate-800 hover:bg-slate-800/50",children:[h.jsx("td",{className:"py-2 px-2 text-slate-400 text-xs",children:R(U.timestamp)}),h.jsx("td",{className:"py-2 px-2",children:h.jsx(_l,{variant:U.source==="MANAGER"?"info":"warning",children:U.source})}),h.jsx("td",{className:"py-2 px-2 text-slate-300 text-xs",children:U.operation}),h.jsx("td",{className:"py-2 px-2 text-right text-slate-300",children:O(U.inputTokens)}),h.jsx("td",{className:"py-2 px-2 text-right text-slate-300",children:O(U.outputTokens)}),h.jsx("td",{className:"py-2 px-2 text-right text-amber-400 font-medium",children:j(U.inputTokens*v.inputPricePerMillion/1e6+U.outputTokens*v.outputPricePerMillion/1e6)})]},U.id)),r.length===0&&h.jsx("tr",{children:h.jsx("td",{colSpan:6,className:"py-8 text-center text-slate-500",children:"No usage records yet."})})]})]})})]})]})]}):h.jsx("div",{className:"flex items-center justify-center h-64",children:h.jsx(rn.div,{className:"h-8 w-8 border-b-2 border-indigo-500 rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}})})},Ppt=t=>{const e=t.match(/Market:\s*(.+?)(?:\s*\||$)/);return e?e[1].slice(0,30):null},Rpt=({status:t,onToggle:e,vaultAddress:n,setActiveTab:r})=>{var $;const[i,s]=T.useState(0),[o,a]=T.useState([]),[l,c]=T.useState({totalPnl:0,winRate:0,totalVolume:0,tradesWithPnl:0}),[u,f]=T.useState(!1),{summary:m,isGenerating:g,cycleCount:x,lastUpdate:v,hasSummary:w}=whe("polymarket"),[E,C]=T.useState(0),k=T.useMemo(()=>t.logs.filter(K=>K.type==="REASONING"||K.type==="SIGNAL").slice(0,20),[t.logs]),O=T.useMemo(()=>{var H,B,A;const K=new Map;for(const I of k){const M=Ppt(I.message)||((A=(B=(H=I.details)==null?void 0:H.context)==null?void 0:B.question)==null?void 0:A.slice(0,30));M&&!K.has(M)&&K.set(M,I)}return Array.from(K.entries()).sort((I,M)=>M[1].timestamp-I[1].timestamp).map(([I,M])=>({market:I,log:M}))},[k]);T.useEffect(()=>{O.length>0&&!t.isAnalyzing&&C(0)},[O.length,t.isAnalyzing]);const j=O[E];T.useEffect(()=>{if(t.operationHistory.length>0){let K=0,H=0,B=0,A=0;const I=[];let M=0;t.operationHistory.slice().reverse().forEach(G=>{const te=G.pnl||0;M+=te,K+=te,A+=G.sizeUSDC,te>0?H++:te<0&&B++,I.push({time:G.timestamp,date:new Date(G.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),pnl:M})});const z=H+B;c({totalPnl:K,winRate:z>0?H/z*100:0,totalVolume:A,tradesWithPnl:z}),a(I)}},[t.operationHistory]),T.useEffect(()=>{if(!n)return;const K=async()=>{try{const B=await ns.getBalance();s(B)}catch(B){console.error("Failed to fetch Polymarket balance",B)}};K();const H=setInterval(K,6e4);return()=>clearInterval(H)},[n]);const R=()=>{n&&e(!t.isOn)},U=T.useMemo(()=>t.activePositions.reduce((K,H)=>K+H.unrealizedPnl,0),[t.activePositions]),V=()=>{C(K=>Math.min(O.length-1,K+1))},F=()=>{C(K=>Math.max(0,K-1))};return n?h.jsxs("div",{className:"flex flex-col h-full gap-4 overflow-y-auto custom-scrollbar pb-4",children:[h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 shrink-0",children:[h.jsxs("div",{className:"lg:col-span-2 flex flex-col gap-4",children:[h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[h.jsx("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("div",{className:`px-3 py-1.5 rounded border flex items-center gap-2 transition-all ${t.isOn?"bg-[#E7FE55]/10 border-[#E7FE55]/30":"bg-[#1a1b21] border-[#232328]"}`,children:[h.jsxs("span",{className:"relative flex h-2 w-2",children:[t.isOn&&h.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-[#E7FE55] opacity-75"}),h.jsx("span",{className:`relative inline-flex rounded-full h-2 w-2 ${t.isOn?"bg-[#E7FE55]":"bg-red-500"}`})]}),h.jsx("span",{className:`font-semibold tracking-wider text-[10px] uppercase ${t.isOn?"text-[#E7FE55]":"text-[#747580]"}`,children:t.isOn?"ACTIVE":"OFFLINE"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-[9px] font-medium text-[#747580] uppercase tracking-[0.1em]",children:"Master"}),h.jsx("button",{onClick:R,className:`relative inline-flex h-5 w-9 items-center rounded-full transition-all focus:outline-none ${t.isOn?"bg-[#E7FE55]":"bg-[#232328] hover:bg-[#2a2b30]"}`,children:h.jsx("span",{className:`${t.isOn?"translate-x-5":"translate-x-1"} inline-block h-3 w-3 transform rounded-full bg-black transition-transform`})})]})]})}),h.jsxs("div",{className:"glass-panel p-4 rounded",children:[h.jsx("div",{className:"text-[10px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Total Profit"}),h.jsxs("div",{className:`text-xl font-semibold font-mono tracking-tight ${l.totalPnl>=0?"text-[#34d399]":"text-red-400"}`,children:[l.totalPnl>=0?"+":"",l.totalPnl.toFixed(2)," USD"]})]}),h.jsxs("div",{className:"glass-panel p-4 rounded",children:[h.jsx("div",{className:"text-[10px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Unrealized PnL"}),h.jsxs("div",{className:`text-xl font-semibold font-mono tracking-tight ${U>=0?"text-[#34d399]":"text-red-400"}`,children:[U>=0?"+":"",U.toFixed(2)," USD"]})]}),h.jsxs("div",{className:"glass-panel p-4 rounded",children:[h.jsx("div",{className:"text-[10px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Win Rate"}),h.jsxs("div",{className:"text-xl font-semibold text-white font-mono tracking-tight",children:[l.winRate.toFixed(1),"%"]})]})]}),h.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[h.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[h.jsxs("div",{className:"flex flex-col",children:[h.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Exposure"}),h.jsxs("span",{className:"text-white font-mono text-sm font-semibold",children:["$",t.currentExposure.toLocaleString()]})]}),h.jsx(ed,{className:"h-4 w-4 text-[#747580]"})]}),h.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[h.jsxs("div",{className:"flex flex-col",children:[h.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Categories"}),h.jsx("span",{className:"text-white font-mono text-sm font-semibold",children:t.settings.allowedCategories.length})]}),h.jsx(aw,{className:"h-4 w-4 text-[#747580]"})]}),h.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[h.jsxs("div",{className:"flex flex-col",children:[h.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Interval"}),h.jsxs("span",{className:"text-white font-mono text-sm font-semibold",children:[t.settings.checkIntervalSeconds,"s"]})]}),h.jsx(Ua,{className:"h-4 w-4 text-[#747580]"})]}),h.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[h.jsxs("div",{className:"flex flex-col",children:[h.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Max Position"}),h.jsxs("span",{className:"text-white font-mono text-sm font-semibold",children:["$",t.settings.maxPositionSizeUSDC]})]}),h.jsx(v1,{className:"h-4 w-4 text-[#747580]"})]})]}),h.jsxs("div",{className:"glass-panel p-5 rounded min-h-[220px] flex flex-col flex-1",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[h.jsx(Rn,{className:"h-4 w-4 text-[#E7FE55]"}),h.jsx("span",{className:"text-sm font-semibold text-white",children:"Performance Curve"})]}),h.jsx("div",{className:"flex-1 w-full",children:o.length>0?h.jsx(_w,{width:"100%",height:"100%",minWidth:100,minHeight:100,children:h.jsxs(pde,{data:o,children:[h.jsx("defs",{children:h.jsxs("linearGradient",{id:"colorPnlPoly",x1:"0",y1:"0",x2:"0",y2:"1",children:[h.jsx("stop",{offset:"5%",stopColor:"#E7FE55",stopOpacity:.2}),h.jsx("stop",{offset:"95%",stopColor:"#E7FE55",stopOpacity:0})]})}),h.jsx($w,{strokeDasharray:"3 3",stroke:"#232328",vertical:!1}),h.jsx(Hw,{dataKey:"date",stroke:"#747580",fontSize:10,tickLine:!1,axisLine:!1}),h.jsx(Vw,{stroke:"#747580",fontSize:10,tickLine:!1,axisLine:!1,tickFormatter:K=>`$${K}`}),h.jsx(Bk,{contentStyle:{backgroundColor:"#14151a",borderColor:"#232328",borderRadius:"4px"},itemStyle:{color:"#E7FE55"},formatter:K=>[`$${K.toFixed(2)}`,"Net PnL"]}),h.jsx(pN,{type:"monotone",dataKey:"pnl",stroke:"#E7FE55",strokeWidth:1.5,fillOpacity:1,fill:"url(#colorPnlPoly)"})]})}):h.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-[#747580]",children:[h.jsx(yl,{className:"h-8 w-8 mb-2 opacity-40"}),h.jsx("span",{className:"text-[11px]",children:"No performance data yet"})]})})]})]}),h.jsxs("div",{className:"glass-panel p-5 rounded flex flex-col",children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(bc,{className:`h-4 w-4 shrink-0 ${t.isAnalyzing?"text-[#E7FE55] animate-pulse":"text-[#E7FE55]/60"}`}),h.jsxs("div",{className:"flex items-center bg-[#0f1015] rounded-full p-0.5 border border-[#232328]",children:[h.jsx("button",{onClick:()=>f(!1),className:`px-2 py-0.5 rounded-full text-[9px] font-semibold uppercase tracking-wider transition-all ${u?"text-[#747580] hover:text-white":"bg-[#E7FE55] text-black"}`,children:"Live"}),h.jsx("button",{onClick:()=>w&&f(!0),disabled:!w,className:`px-2 py-0.5 rounded-full text-[9px] font-semibold uppercase tracking-wider transition-all ${u?"bg-[#E7FE55] text-black":w?"text-[#747580] hover:text-white":"text-[#3a3b42] cursor-not-allowed"}`,title:w?"View AI Summary":`Available after ${2-x} more cycles`,children:"Summary"})]}),t.isAnalyzing&&!u&&h.jsx("span",{className:"px-2 py-0.5 rounded bg-[#E7FE55]/15 text-[#E7FE55] text-[9px] font-semibold uppercase tracking-wider animate-pulse",children:"LIVE"})]}),!t.isAnalyzing&&O.length>0&&!u&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("button",{onClick:V,disabled:E>=O.length-1,className:`p-1 rounded transition-colors ${E>=O.length-1?"text-[#3a3b42] cursor-not-allowed":"text-[#747580] hover:text-white hover:bg-[#1a1b21]"}`,title:"Previous market",children:h.jsx(PT,{size:16})}),h.jsxs("span",{className:"text-[10px] text-[#747580] font-mono min-w-[32px] text-center",children:[E+1,"/",O.length]}),h.jsx("button",{onClick:F,disabled:E<=0,className:`p-1 rounded transition-colors ${E<=0?"text-[#3a3b42] cursor-not-allowed":"text-[#747580] hover:text-white hover:bg-[#1a1b21]"}`,title:"Next market",children:h.jsx(rm,{size:16})})]})]}),u?h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("span",{className:"px-2 py-0.5 rounded bg-[#E7FE55]/15 text-[#E7FE55] text-[9px] font-semibold uppercase tracking-wider",children:[x," cycles"]}),g&&h.jsx("span",{className:"text-[10px] text-[#747580] animate-pulse",children:"generating..."})]}),v>0&&h.jsx("span",{className:"text-[10px] text-[#747580] font-mono",children:new Date(v).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),h.jsx("div",{className:"flex-1 bg-[#0f1015] rounded p-3 border border-[#232328] overflow-y-auto custom-scrollbar min-h-0 mb-3",children:m?h.jsx("p",{className:"text-[13px] text-[#a0a1a8] leading-relaxed whitespace-pre-wrap",children:m}):h.jsx("p",{className:"text-[13px] text-[#747580] italic",children:"Summary will be generated after 2+ analysis cycles..."})})]}):t.isAnalyzing?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"flex items-center justify-between mb-3",children:h.jsx("span",{className:`px-2 py-0.5 rounded text-[9px] font-semibold uppercase tracking-wider ${t.currentSignal==="BULLISH"?"bg-[#34d399]/15 text-[#34d399]":t.currentSignal==="BEARISH"?"bg-red-500/15 text-red-400":"bg-[#1a1b21] text-[#747580]"}`,children:t.currentSignal||"ANALYZING"})}),h.jsx("div",{className:"flex-1 bg-[#0f1015] rounded p-3 border border-[#232328] overflow-y-auto custom-scrollbar min-h-0 mb-3",children:h.jsxs("p",{className:"text-[13px] text-[#a0a1a8] italic leading-relaxed",children:['"',t.statusDetail||t.statusMessage,'"']})})]}):j?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"flex items-center justify-between mb-3",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"px-2 py-1 rounded bg-[#E7FE55]/15 text-[#E7FE55] text-xs font-semibold uppercase tracking-wider truncate max-w-[150px]",children:j.market}),h.jsx("span",{className:"text-[10px] text-[#747580] font-mono",children:new Date(j.log.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})}),h.jsx("div",{className:"flex-1 bg-[#0f1015] rounded p-3 border border-[#232328] overflow-y-auto custom-scrollbar min-h-0 mb-3",children:h.jsxs("p",{className:"text-[13px] text-[#a0a1a8] italic leading-relaxed whitespace-pre-wrap",children:['"',(($=j.log.details)==null?void 0:$.fullReason)||j.log.message,'"']})})]}):h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"flex items-center justify-between mb-3",children:h.jsx("span",{className:`px-2 py-0.5 rounded text-[9px] font-semibold uppercase tracking-wider ${t.currentSignal==="BULLISH"?"bg-[#34d399]/15 text-[#34d399]":t.currentSignal==="BEARISH"?"bg-red-500/15 text-red-400":"bg-[#1a1b21] text-[#747580]"}`,children:t.currentSignal||"NEUTRAL"})}),h.jsx("div",{className:"flex-1 bg-[#0f1015] rounded p-3 border border-[#232328] overflow-y-auto custom-scrollbar min-h-0 mb-3",children:h.jsxs("p",{className:"text-[13px] text-[#a0a1a8] italic leading-relaxed",children:['"',t.statusMessage||"Waiting for analysis...",'"']})})]}),h.jsxs("div",{className:"pt-3 border-t border-[#232328] flex flex-col gap-2 shrink-0",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.05em] w-12 shrink-0",children:"Task"}),h.jsx("div",{className:"text-[10px] text-white truncate font-mono flex-1",children:t.currentTask||" Idle"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.05em] w-12 shrink-0",children:"Status"}),h.jsx("div",{className:"text-[10px] text-[#a0a1a8] font-mono truncate flex-1",children:t.statusMessage})]}),t.statusDetail&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.05em] w-12 shrink-0",children:"Info"}),h.jsx("div",{className:"text-[10px] text-[#E7FE55] truncate flex-1",children:t.statusDetail})]})]})]})]}),h.jsxs("div",{className:"glass-panel p-5 rounded shrink-0",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Mg,{className:"h-4 w-4 text-[#E7FE55]"}),h.jsx("span",{className:"text-sm font-semibold text-white",children:"Active Positions"})]}),h.jsxs("span",{className:"text-[10px] text-[#747580]",children:[t.activePositions.length," / ",t.settings.maxOpenPositions]})]}),t.activePositions.length>0?h.jsx("div",{className:"overflow-auto max-h-[200px] custom-scrollbar",children:h.jsxs("table",{className:"w-full text-xs",children:[h.jsx("thead",{className:"text-[#747580] text-left sticky top-0 bg-[#14151a]",children:h.jsxs("tr",{children:[h.jsx("th",{className:"pb-2 font-medium",children:"Market"}),h.jsx("th",{className:"pb-2 font-medium",children:"Side"}),h.jsx("th",{className:"pb-2 font-medium text-right",children:"Shares"}),h.jsx("th",{className:"pb-2 font-medium text-right",children:"Avg Price"}),h.jsx("th",{className:"pb-2 font-medium text-right",children:"Current"}),h.jsx("th",{className:"pb-2 font-medium text-right",children:"PnL"})]})}),h.jsx("tbody",{className:"text-[#a0a1a8]",children:t.activePositions.map((K,H)=>h.jsxs("tr",{className:"border-t border-[#232328] hover:bg-[#1a1b21]",children:[h.jsxs("td",{className:"py-2 max-w-[200px] truncate",title:K.question,children:[K.question.slice(0,40),"..."]}),h.jsx("td",{className:`py-2 font-medium ${K.outcome==="YES"?"text-[#34d399]":"text-red-400"}`,children:K.outcome}),h.jsx("td",{className:"py-2 text-right font-mono",children:K.shares.toFixed(2)}),h.jsxs("td",{className:"py-2 text-right font-mono",children:[(K.avgPrice*100).toFixed(1),""]}),h.jsxs("td",{className:"py-2 text-right font-mono",children:[(K.currentPrice*100).toFixed(1),""]}),h.jsxs("td",{className:`py-2 text-right font-mono ${K.unrealizedPnl>=0?"text-[#34d399]":"text-red-400"}`,children:[K.unrealizedPnl>=0?"+":"","$",K.unrealizedPnl.toFixed(2)]})]},H))})]})}):h.jsxs("div",{className:"h-24 flex flex-col items-center justify-center text-[#747580] gap-2 bg-[#0f1015] rounded border border-[#232328]",children:[h.jsx(Ky,{className:"h-6 w-6 opacity-40"}),h.jsx("span",{className:"text-[11px]",children:"No active positions"})]})]})]}):h.jsx("div",{className:"flex flex-col h-full items-center justify-center",children:h.jsxs("div",{className:"max-w-md w-full mx-auto space-y-6 p-8 text-center",children:[h.jsx("div",{className:"w-16 h-16 bg-[#1a1b21] rounded-full flex items-center justify-center mx-auto mb-4 border border-[#232328]",children:h.jsx(Ky,{size:32,className:"text-[#E7FE55]"})}),h.jsx("h2",{className:"text-xl font-semibold text-white tracking-tight",children:"Polymarket Vault Required"}),h.jsxs("p",{className:"text-[#747580] text-sm",children:["To use the Polymarket Dealer, you need to create a ",h.jsx("span",{className:"text-[#E7FE55]",children:"Polymarket Vault"})," first."]}),h.jsx("button",{onClick:()=>r(Ce.VAULT),className:"mt-4 px-6 py-3 bg-[#E7FE55] hover:bg-[#d4eb4d] text-black font-bold rounded-xl transition-all",children:"Go to Vault Operator"})]})})},Opt=({settings:t,onUpdateSettings:e,onApplyChanges:n,isOn:r=!1,onToggle:i})=>{const[s,o]=T.useState(t),[a,l]=T.useState(!1);T.useEffect(()=>{o(t)},[t]),T.useEffect(()=>{l(JSON.stringify(s)!==JSON.stringify(t))},[s,t]);const c=x=>{o(v=>({...v,...x}))},u=()=>{e(s),n()},f=()=>{o(t),l(!1)},m=x=>{if(x==="custom")return;const v=Bb[x];v&&c({selectedPreset:x,allowedCategories:v.categories})},g=x=>{const v=s.allowedCategories,w=v.includes(x)?v.filter(E=>E!==x):[...v,x];c({allowedCategories:w})};return h.jsx("div",{className:"h-full flex flex-col gap-4 overflow-y-auto custom-scrollbar",children:h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[h.jsxs("div",{className:"flex flex-col gap-4",children:[h.jsx("div",{className:"glass-panel p-4",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:`h-10 w-10 rounded flex items-center justify-center ${r?"bg-[#E7FE55]/15 text-[#E7FE55]":"bg-[#1a1b21] text-[#747580]"}`,children:h.jsx(nd,{className:"h-5 w-5"})}),h.jsxs("div",{children:[h.jsx("span",{className:"block text-sm font-semibold text-white",children:"Engine Status"}),h.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5",children:[h.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${r?"bg-[#E7FE55] animate-pulse":"bg-[#747580]"}`}),h.jsx("span",{className:"text-[10px] text-[#747580] font-medium uppercase tracking-wider",children:r?"Active & Running":"Stopped"})]})]})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[i&&h.jsx("button",{onClick:()=>i(!r),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none ${r?"bg-[#E7FE55]":"bg-[#3a3b42]"}`,children:h.jsx("span",{className:`${r?"translate-x-6":"translate-x-1"} inline-block h-4 w-4 transform rounded-full bg-black transition-transform shadow`})}),a&&h.jsxs("button",{onClick:f,className:"flex items-center gap-2 bg-[#1a1b21] hover:bg-[#232328] text-[#747580] px-3 py-1.5 rounded text-[10px] font-semibold uppercase tracking-wider transition-all",children:[h.jsx(GC,{className:"h-3 w-3"})," Reset"]}),h.jsxs("button",{onClick:u,disabled:!a,className:`flex items-center gap-2 px-3 py-1.5 rounded text-[10px] font-semibold uppercase tracking-wider transition-all active:scale-95
                                        ${a?"bg-[#E7FE55] hover:bg-[#d4e94d] text-black":"bg-[#1a1b21] text-[#747580] cursor-not-allowed opacity-50"}`,children:[h.jsx(Cc,{className:"h-3 w-3"})," Apply"]})]})]})}),h.jsxs("div",{className:"glass-panel p-4",children:[h.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[#E7FE55] font-semibold uppercase tracking-[0.1em] mb-3",children:[h.jsx(cw,{className:"h-3.5 w-3.5"})," Strategy Preset"]}),h.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(Bb).filter(([x])=>x!=="custom").map(([x,v])=>h.jsxs("button",{onClick:()=>m(x),className:`p-3 rounded border text-left transition-all ${s.selectedPreset===x?"border-[#E7FE55] bg-[#E7FE55]/10":"border-[#232328] hover:border-[#747580] bg-[#0f1015]"}`,children:[h.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[h.jsx("span",{className:"text-sm",children:v.emoji}),h.jsx("span",{className:"text-[11px] font-semibold text-white",children:v.name})]}),h.jsx("p",{className:"text-[10px] text-[#747580] leading-relaxed",children:v.description})]},x))})]}),h.jsxs("div",{className:"glass-panel p-4",children:[h.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[#E7FE55] font-semibold uppercase tracking-[0.1em] mb-3",children:[h.jsx(v1,{className:"h-3.5 w-3.5"})," Capital & Risk"]}),h.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[h.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[h.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1.5",children:"Type"}),h.jsxs("div",{className:"flex gap-0.5",children:[h.jsx("button",{onClick:()=>c({bankrollType:"MANUAL"}),className:`flex-1 py-1 text-[9px] font-semibold rounded transition-all ${s.bankrollType==="MANUAL"?"bg-[#60a5fa] text-white":"text-[#747580] hover:text-white"}`,children:"Fix"}),h.jsx("button",{onClick:()=>c({bankrollType:"ALL_AVAILABLE"}),className:`flex-1 py-1 text-[9px] font-semibold rounded transition-all ${s.bankrollType==="ALL_AVAILABLE"?"bg-[#34d399] text-white":"text-[#747580] hover:text-white"}`,children:"Max"})]})]}),h.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[h.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1.5",children:"Amount ($)"}),s.bankrollType==="MANUAL"?h.jsx("input",{type:"number",value:s.manualBankroll,onChange:x=>c({manualBankroll:parseFloat(x.target.value)||0}),className:"w-full bg-transparent text-sm font-mono text-white focus:outline-none"}):h.jsx("span",{className:"text-sm font-mono text-[#34d399]",children:"Auto"})]}),h.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[h.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1.5",children:"Max Pos ($)"}),h.jsx("input",{type:"number",value:s.maxPositionSizeUSDC,onChange:x=>c({maxPositionSizeUSDC:parseInt(x.target.value)||0}),className:"w-full bg-transparent text-sm font-mono text-white focus:outline-none"})]}),h.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[h.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1.5",children:"Max Open"}),h.jsx("input",{type:"number",value:s.maxOpenPositions,onChange:x=>c({maxOpenPositions:parseInt(x.target.value)||1}),className:"w-full bg-transparent text-sm font-mono text-white focus:outline-none"})]})]})]}),h.jsxs("div",{className:"glass-panel p-4",children:[h.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[#E7FE55] font-semibold uppercase tracking-[0.1em] mb-3",children:[h.jsx(Ua,{className:"h-3.5 w-3.5"})," Analysis Settings"]}),h.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[h.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[h.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1.5",children:"Interval"}),h.jsxs("div",{className:"flex items-baseline gap-1",children:[h.jsx("input",{type:"number",value:s.checkIntervalSeconds,onChange:x=>c({checkIntervalSeconds:Math.max(60,parseInt(x.target.value)||60)}),className:"w-full bg-transparent text-sm font-mono text-white focus:outline-none"}),h.jsx("span",{className:"text-[10px] text-[#747580]",children:"s"})]})]}),h.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[h.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1.5",children:"Min Volume"}),h.jsxs("div",{className:"flex items-center",children:[h.jsx("span",{className:"text-[10px] text-[#747580] mr-1",children:"$"}),h.jsx("input",{type:"number",value:s.minVolumeThreshold,onChange:x=>c({minVolumeThreshold:parseInt(x.target.value)||0}),className:"w-full bg-transparent text-sm font-mono text-white focus:outline-none"})]})]}),h.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[h.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1.5",children:"Min Liquidity"}),h.jsxs("div",{className:"flex items-center",children:[h.jsx("span",{className:"text-[10px] text-[#747580] mr-1",children:"$"}),h.jsx("input",{type:"number",value:s.minLiquidityThreshold,onChange:x=>c({minLiquidityThreshold:parseInt(x.target.value)||0}),className:"w-full bg-transparent text-sm font-mono text-white focus:outline-none"})]})]})]})]})]}),h.jsxs("div",{className:"flex flex-col gap-4",children:[h.jsxs("div",{className:"glass-panel p-4",children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[#E7FE55] font-semibold uppercase tracking-[0.1em]",children:[h.jsx(uTe,{className:"h-3.5 w-3.5"})," Market Categories"]}),h.jsx("span",{className:"text-[10px] bg-[#E7FE55]/15 text-[#E7FE55] px-2 py-0.5 rounded border border-[#E7FE55]/30 font-mono",children:s.allowedCategories.length})]}),h.jsx("div",{className:"flex flex-wrap gap-2",children:$be.map(x=>h.jsxs("button",{onClick:()=>g(x.value),className:`px-3 py-1.5 rounded-full text-xs flex items-center gap-1.5 transition-all ${s.allowedCategories.includes(x.value)?"bg-[#E7FE55]/20 text-[#E7FE55] border border-[#E7FE55]/50":"bg-[#0f1015] text-[#747580] border border-[#232328] hover:border-[#747580]"}`,children:[h.jsx("span",{children:x.icon}),x.label]},x.value))})]}),h.jsxs("div",{className:"glass-panel p-4",children:[h.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[#E7FE55] font-semibold uppercase tracking-[0.1em] mb-3",children:[h.jsx(Rn,{className:"h-3.5 w-3.5"})," Market Filters"]}),h.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[h.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[h.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1.5",children:"Spread Edge"}),h.jsx("div",{className:"flex items-baseline gap-1",children:h.jsx("input",{type:"number",step:"0.01",value:s.minSpreadThreshold||.02,onChange:x=>c({minSpreadThreshold:parseFloat(x.target.value)||.02}),className:"w-full bg-transparent text-sm font-mono text-white focus:outline-none"})})]}),h.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[h.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1.5",children:"Confidence"}),h.jsx("div",{className:"flex items-baseline gap-1",children:h.jsx("input",{type:"number",step:"0.05",min:"0",max:"1",value:s.confidenceThreshold||.6,onChange:x=>c({confidenceThreshold:parseFloat(x.target.value)||.6}),className:"w-full bg-transparent text-sm font-mono text-white focus:outline-none"})})]})]})]}),h.jsxs("div",{className:"glass-panel p-4 flex items-start gap-3",children:[h.jsx(VC,{className:"h-4 w-4 text-[#E7FE55] shrink-0 mt-0.5"}),h.jsx("div",{children:h.jsxs("p",{className:"text-[10px] text-[#747580] leading-relaxed",children:[h.jsx("strong",{className:"text-[#a0a1a8]",children:"Polymarket Data:"})," Market data is fetched via the CLOB API. Categories filter which markets are analyzed. Higher confidence = fewer but more certain trades."]})})]})]})]})})},Mpt=({settings:t,onUpdateSettings:e,onApplyChanges:n})=>{var v,w;const[r,i]=T.useState(t.strategyPrompt),[s,o]=T.useState(!1),[a,l]=T.useState(t.promptMode||"preset"),[c,u]=T.useState(t.selectedPreset||"balanced");T.useEffect(()=>{i(t.strategyPrompt),l(t.promptMode||"preset"),u(t.selectedPreset||"balanced")},[t.strategyPrompt,t.promptMode,t.selectedPreset]),T.useEffect(()=>{o(r!==t.strategyPrompt)},[r,t.strategyPrompt]);const f=E=>{if(E==="custom")l("custom"),u("custom"),o(!0);else{const C=AT[E];i(C),l("preset"),u(E),o(C!==t.strategyPrompt)}},m=E=>{i(E);const C=Object.entries(AT).find(([k,O])=>O===E);C?(l("preset"),u(C[0])):(l("custom"),u("custom")),o(E!==t.strategyPrompt)},g=()=>{e({strategyPrompt:r,promptMode:a,selectedPreset:c}),n(),o(!1)},x=E=>`
            flex items-center gap-1.5 px-3 py-1.5 rounded text-[10px] font-semibold uppercase tracking-[0.08em] transition-all
            ${c===E&&a==="preset"||a==="custom"&&E==="custom"?"bg-[#E7FE55] text-black":"bg-transparent text-[#747580] hover:text-[#a0a1a8] hover:bg-[#1a1b21]"}
        `;return h.jsxs("div",{className:"h-full flex flex-col gap-4 overflow-hidden",children:[h.jsx("div",{className:"glass-panel p-4 shrink-0",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(cw,{className:"h-4 w-4 text-[#E7FE55]"}),h.jsx("span",{className:"text-sm font-semibold text-white",children:"Strategy Prompt"})]}),h.jsxs("div",{className:`
                            inline-flex items-center gap-1.5 px-2 py-0.5 rounded text-[9px] font-semibold uppercase tracking-wider
                            ${a==="preset"?"bg-[#E7FE55]/10 text-[#E7FE55]":"bg-[#1a1b21] text-[#747580]"}
                        `,children:[h.jsx("span",{className:`h-1 w-1 rounded-full ${a==="preset"?"bg-[#E7FE55]":"bg-[#747580]"}`}),a==="preset"?`${(v=Bb[c])==null?void 0:v.emoji} ${(w=Bb[c])==null?void 0:w.name}`:"Custom"]}),s&&h.jsx("span",{className:"text-[9px] text-amber-500 uppercase tracking-wider font-medium",children:" Unsaved"})]}),h.jsxs("button",{onClick:g,disabled:!s,className:`
                            flex items-center gap-2 px-4 py-1.5 rounded text-[10px] font-semibold uppercase tracking-wider transition-all
                            ${s?"bg-[#E7FE55] hover:bg-[#f0ff7a] text-black":"bg-[#1a1b21] text-[#3a3b42] cursor-not-allowed"}
                        `,children:[h.jsx(dne,{className:"h-3.5 w-3.5"}),"Save"]})]})}),h.jsxs("div",{className:"flex-1 flex gap-4 min-h-0 overflow-hidden",children:[h.jsxs("div",{className:"w-40 shrink-0 flex flex-col gap-2",children:[h.jsxs("div",{className:"flex items-center gap-1.5 px-1 py-2",children:[h.jsx(mne,{size:12,className:"text-[#E7FE55]"}),h.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] font-semibold",children:"Presets"})]}),h.jsxs("div",{className:"flex flex-col gap-1",children:[Object.entries(Bb).filter(([E])=>E!=="custom").map(([E,C])=>h.jsxs("button",{onClick:()=>f(E),className:x(E),children:[h.jsx("span",{children:C.emoji}),h.jsx("span",{children:C.name})]},E)),h.jsx("div",{className:"h-px bg-[#232328] my-2"}),h.jsxs("button",{onClick:()=>f("custom"),className:x("custom"),children:[h.jsx("span",{children:""}),h.jsx("span",{children:"Custom"})]})]}),h.jsx("div",{className:"mt-auto pt-4 px-1",children:h.jsx("p",{className:"text-[10px] text-[#3a3b42] leading-relaxed",children:"Edit the prompt to switch to custom mode automatically."})})]}),h.jsxs("div",{className:"flex-1 glass-panel relative overflow-hidden flex flex-col",children:[h.jsx("div",{className:"absolute inset-x-0 top-0 h-6 bg-gradient-to-b from-[#1e2028] to-transparent pointer-events-none z-10"}),h.jsx("textarea",{value:r,onChange:E=>m(E.target.value),className:"w-full h-full bg-transparent text-[#a0a1a8] font-mono text-[13px] p-5 resize-none focus:outline-none leading-relaxed custom-scrollbar selection:bg-[#E7FE55]/30",spellCheck:!1,placeholder:`// Define your prediction market strategy here...
// 
// Example:
// You are a probability analyst focusing on mispriced markets.
// 1. Look for markets with high volume and clear catalysts.
// 2. Prioritize events with upcoming resolution dates.
// 3. Consider news sentiment and expert opinions.`}),h.jsx("div",{className:"absolute inset-x-0 bottom-0 h-6 bg-gradient-to-t from-[#1e2028] to-transparent pointer-events-none z-10"}),h.jsxs("div",{className:"absolute bottom-3 right-3 flex items-center gap-2 opacity-50 hover:opacity-100 transition-opacity",children:[h.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-[#E7FE55]"}),h.jsx("span",{className:"text-[9px] text-[#747580] font-mono uppercase tracking-wider",children:"Live Context"})]})]})]})]})},Dpt=({logs:t,onClearLogs:e})=>{const[n,r]=T.useState(null),i=t.filter(a=>{if(["REASONING","SIGNAL","TRADE","ERROR"].includes(a.type))return!0;if(["INFO","WARNING"].includes(a.type)){const l=a.message.toLowerCase();return l.includes("executing")||l.includes("skipping")||l.includes("ignored")||l.includes("position")}return!1}),s=(a,l)=>a==="ERROR"?h.jsx("div",{className:"text-red-400",children:h.jsx(m4,{size:16})}):a==="TRADE"?h.jsx("div",{className:"text-[#34d399]",children:h.jsx(Gy,{size:16})}):l.includes("YES")||l.includes("BULLISH")?h.jsx("div",{className:"text-[#34d399]",children:h.jsx(Rn,{size:16})}):l.includes("NO")||l.includes("BEARISH")?h.jsx("div",{className:"text-red-400",children:h.jsx(qC,{size:16})}):h.jsx("div",{className:"text-[#E7FE55]",children:h.jsx(bc,{size:16})}),o=a=>new Date(a).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"});return h.jsxs("div",{className:"flex flex-col h-full overflow-hidden",children:[h.jsxs("div",{className:"p-4 border-b border-[#232328] flex justify-between items-center shrink-0",children:[h.jsxs("h3",{className:"text-sm font-semibold flex items-center gap-2 text-white",children:[h.jsx(bc,{className:"h-4 w-4 text-[#E7FE55]"}),"AI Reasoning Log"]}),h.jsx("button",{onClick:e,className:"text-[10px] text-[#747580] hover:text-white transition-colors uppercase tracking-wider",children:"Clear History"})]}),h.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar",children:i.length===0?h.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-[#747580] opacity-50 py-12",children:[h.jsx(bc,{size:48,className:"mb-4 opacity-30"}),h.jsx("p",{className:"text-sm",children:"No analysis recorded yet."}),h.jsx("p",{className:"text-[10px] text-[#747580]",children:"Start the dealer to see its thought process."})]}):i.map(a=>{var f,m;const l=n===a.id,c=(f=a.details)==null?void 0:f.context,u=(m=a.details)==null?void 0:m.context;return h.jsxs("div",{className:"relative pl-6 pb-2 border-l border-[#232328] last:border-0 transition-colors group",children:[h.jsx("div",{className:"absolute -left-[5px] top-1 w-2.5 h-2.5 rounded-full bg-[#14151a] border border-[#232328] group-hover:border-[#747580] transition-colors"}),h.jsxs("div",{className:"bg-[#14151a] p-3 rounded border border-[#232328] hover:border-[#3a3b42] transition-all",children:[h.jsxs("div",{className:"flex items-center justify-between mb-1",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[s(a.type,a.message),h.jsx("span",{className:`text-[10px] font-semibold uppercase tracking-wider ${a.type==="ERROR"?"text-red-400":a.type==="TRADE"?"text-[#34d399]":a.type==="SIGNAL"?"text-[#E7FE55]":"text-[#a0a1a8]"}`,children:a.type})]}),h.jsxs("span",{className:"text-[10px] text-[#747580] flex items-center gap-1 font-mono",children:[h.jsx(Ua,{size:10}),o(a.timestamp)]})]}),h.jsx("p",{className:"text-sm text-[#a0a1a8] leading-relaxed",children:a.message}),a.details&&a.details.fullReason&&h.jsxs("div",{className:"mt-2 p-2 bg-[#0f1015] rounded text-[11px] text-[#747580] font-mono italic border-l-2 border-[#E7FE55]/30 whitespace-pre-wrap",children:['"',typeof a.details.fullReason=="string"?a.details.fullReason:JSON.stringify(a.details.fullReason),'"']}),c&&h.jsxs("button",{onClick:()=>r(l?null:a.id),className:"mt-2 flex items-center gap-1 text-[10px] text-[#E7FE55] hover:text-[#d4eb4d] transition-colors uppercase tracking-wider",children:[l?h.jsx(im,{size:12}):h.jsx(Al,{size:12}),l?"Hide":"Show"," Market Context"]}),l&&c&&h.jsxs("div",{className:"mt-3 p-3 bg-[#0f1015] rounded border border-[#232328] space-y-3",children:[u.question&&h.jsxs("div",{className:"text-[10px] text-[#747580]",children:["Market: ",h.jsxs("span",{className:"text-white",children:[u.question.slice(0,100),u.question.length>100?"...":""]})]}),(u.volume24h||u.liquidity)&&h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-[#34d399] mb-2 uppercase tracking-wider font-semibold",children:[h.jsx(v1,{size:10}),h.jsx("span",{children:"Market Metrics"})]}),h.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[u.volume24h&&h.jsxs("div",{className:"bg-[#34d399]/10 border border-[#34d399]/20 px-2 py-1 rounded text-[10px]",children:[h.jsx("span",{className:"text-[#34d399] uppercase font-medium",children:"Volume 24h"}),h.jsxs("span",{className:"text-[#4ade80] font-mono ml-2",children:["$",u.volume24h.toLocaleString()]})]}),u.liquidity&&h.jsxs("div",{className:"bg-[#34d399]/10 border border-[#34d399]/20 px-2 py-1 rounded text-[10px]",children:[h.jsx("span",{className:"text-[#34d399] uppercase font-medium",children:"Liquidity"}),h.jsxs("span",{className:"text-[#4ade80] font-mono ml-2",children:["$",u.liquidity.toLocaleString()]})]}),u.spread&&h.jsxs("div",{className:"bg-[#34d399]/10 border border-[#34d399]/20 px-2 py-1 rounded text-[10px]",children:[h.jsx("span",{className:"text-[#34d399] uppercase font-medium",children:"Spread"}),h.jsxs("span",{className:"text-[#4ade80] font-mono ml-2",children:[(u.spread*100).toFixed(2),"%"]})]})]})]}),(u.yesPrice||u.noPrice)&&h.jsxs("div",{className:"text-[10px] text-[#747580]",children:["Prices:",u.yesPrice&&h.jsxs("span",{className:"text-[#34d399] font-mono ml-2",children:["YES: ",(u.yesPrice*100).toFixed(1),""]}),u.noPrice&&h.jsxs("span",{className:"text-red-400 font-mono ml-2",children:["NO: ",(u.noPrice*100).toFixed(1),""]})]}),h.jsx("pre",{className:"text-[9px] text-[#747580] overflow-x-auto whitespace-pre-wrap custom-scrollbar max-h-[200px]",children:JSON.stringify(u,null,2)})]})]})]},a.id)})})]})},Lpt=({log:t,index:e,getLogBadgeVariant:n})=>{const[r,i]=T.useState(!1),s=t.details&&Object.keys(t.details).length>0;return h.jsxs(rn.div,{className:"flex gap-3 p-3 hover:bg-[#1a1b21] rounded border-b border-[#232328] last:border-0 transition-colors",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:e*.02},children:[h.jsx("span",{className:"text-[#747580] shrink-0 text-[10px] mt-0.5 font-mono",children:new Date(t.timestamp).toLocaleTimeString()}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(_l,{variant:n(t.type),className:"text-[9px] uppercase tracking-wider",children:t.type}),h.jsx("span",{className:"text-[#a0a1a8] flex-1 text-sm truncate",children:t.message}),s&&h.jsx("button",{onClick:()=>i(!r),className:"text-[#747580] hover:text-white transition-colors p-1 rounded hover:bg-[#232328]",title:r?"Collapse details":"Expand details",children:r?h.jsx(Al,{className:"h-4 w-4"}):h.jsx(rm,{className:"h-4 w-4"})})]}),h.jsx(Go,{children:s&&r&&h.jsx(rn.pre,{className:"mt-2 text-[10px] text-[#747580] bg-[#0f1015] p-3 rounded overflow-x-auto max-h-[300px] overflow-y-auto custom-scrollbar border border-[#232328] font-mono",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:JSON.stringify(t.details,null,2)})})]})]},t.id)},Bpt=({status:t,onClearLogs:e})=>{const[n,r]=T.useState("thinking"),i=T.useRef(null);if(!t)return h.jsx("div",{className:"p-4 text-red-500",children:"Error: Status not available"});const s=()=>{const a=JSON.stringify(t.logs,null,2),l="data:application/json;charset=utf-8,"+encodeURIComponent(a),c=`polymarket_logs_${new Date().toISOString()}.json`,u=document.createElement("a");u.setAttribute("href",l),u.setAttribute("download",c),u.click()},o=a=>{switch(a){case"INFO":return"info";case"WARNING":return"warning";case"ERROR":return"destructive";case"TRADE":return"success";case"SIGNAL":return"purple";case"REASONING":return"secondary";default:return"secondary"}};return h.jsxs("div",{className:"flex flex-col h-full gap-4 overflow-hidden p-4",children:[h.jsx("div",{className:"glass-panel p-4 shrink-0",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2 bg-[#1a1b21] p-1 rounded border border-[#232328]",children:[h.jsxs("button",{onClick:()=>r("thinking"),className:`flex items-center gap-2 px-4 py-2 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${n==="thinking"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:[h.jsx(bc,{className:"h-4 w-4"}),"Thinking"]}),h.jsxs("button",{onClick:()=>r("logs"),className:`flex items-center gap-2 px-4 py-2 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${n==="logs"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:[h.jsx(fne,{className:"h-4 w-4"}),"Activity Log",t.logs.length>0&&h.jsx("span",{className:"bg-white/20 px-1.5 py-0.5 rounded text-[9px]",children:t.logs.length})]})]}),h.jsx(Go,{children:n==="logs"&&h.jsxs(rn.div,{className:"flex items-center gap-2",initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},children:[h.jsx("button",{onClick:e,className:"p-2 rounded hover:bg-red-500/10 text-[#747580] hover:text-red-400 transition-colors border border-[#232328]",title:"Clear Logs",children:h.jsx(sm,{className:"h-4 w-4"})}),h.jsx("button",{onClick:s,className:"p-2 rounded hover:bg-[#1a1b21] text-[#747580] hover:text-white transition-colors border border-[#232328]",title:"Export JSON",children:h.jsx(Bo,{className:"h-4 w-4"})})]})})]})}),h.jsxs("div",{className:"glass-panel flex-1 min-h-0 overflow-hidden flex flex-col",children:[n==="thinking"&&h.jsx(Dpt,{logs:t.logs,onClearLogs:e}),n==="logs"&&h.jsx("div",{className:"flex-1 min-h-0 relative",children:h.jsx("div",{ref:i,className:"absolute inset-0 overflow-y-auto custom-scrollbar",children:t.logs.length===0?h.jsxs(rn.div,{className:"h-full flex flex-col items-center justify-center text-[#747580] gap-3 py-12",initial:{opacity:0},animate:{opacity:1},children:[h.jsx(WL,{className:"h-10 w-10 opacity-30"}),h.jsx("p",{className:"text-sm",children:"No operations recorded yet."})]}):h.jsx(Go,{children:t.logs.map((a,l)=>h.jsx(Lpt,{log:a,index:l,getLogBadgeVariant:o},a.id))})})})]})]})},jpt=({vault:t,password:e,activeTab:n,setActiveTab:r})=>{const i=!!t.pmPublicKey,s=n===Ce.POLYMARKET_DEALER?Ce.POLYMARKET_DASHBOARD:n,{state:o,toggleDealer:a,updateSettings:l,applyChanges:c,clearLogs:u}=Dme(t,e),f=()=>{switch(s){case Ce.POLYMARKET_DASHBOARD:return"dashboard";case Ce.POLYMARKET_THINKING:return"thinking";case Ce.POLYMARKET_CONFIG:return"config";case Ce.POLYMARKET_PROMPT:return"prompt";default:return"dashboard"}},m=g=>{switch(g){case"dashboard":r(Ce.POLYMARKET_DASHBOARD);break;case"thinking":r(Ce.POLYMARKET_THINKING);break;case"config":r(Ce.POLYMARKET_CONFIG);break;case"prompt":r(Ce.POLYMARKET_PROMPT);break}};return i?h.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[!t.isUnlocked&&h.jsx(rn.div,{className:"mb-3 flex justify-end shrink-0 px-4",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},children:h.jsx(_l,{variant:"destructive",className:"animate-pulse",children:"VAULT LOCKED"})}),h.jsx(zhe,{value:f(),onValueChange:m,className:"flex-1 flex flex-col min-h-0",children:h.jsxs("div",{className:"flex-1 min-h-0 relative",children:[h.jsx(Hu,{value:"dashboard",forceMount:!0,className:"h-full mt-0 absolute inset-0 data-[state=inactive]:hidden",children:h.jsx(Rpt,{status:o,onToggle:a,vaultAddress:t.pmPublicKey,setActiveTab:r})}),h.jsx(Hu,{value:"thinking",forceMount:!0,className:"h-full mt-0 absolute inset-0 data-[state=inactive]:hidden",children:h.jsx(Bpt,{status:o,onClearLogs:u})}),h.jsx(Hu,{value:"config",forceMount:!0,className:"h-full mt-0 absolute inset-0 overflow-y-auto data-[state=inactive]:hidden",children:h.jsx(Opt,{settings:o.settings,onUpdateSettings:l,onApplyChanges:c,isOn:o.isOn,onToggle:a})}),h.jsx(Hu,{value:"prompt",forceMount:!0,className:"h-full mt-0 absolute inset-0 data-[state=inactive]:hidden",children:h.jsx(Mpt,{settings:o.settings,onUpdateSettings:l,onApplyChanges:c})})]})})]}):h.jsx(rn.div,{className:"flex flex-col h-[calc(100vh-8rem)] items-center justify-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:h.jsxs("div",{className:"max-w-md w-full mx-auto space-y-6 p-8 text-center",children:[h.jsx("div",{className:"w-16 h-16 bg-[#1a1b21] rounded-full flex items-center justify-center mx-auto mb-4 border border-[#232328]",children:h.jsx(Ky,{size:32,className:"text-[#E7FE55]"})}),h.jsx("h2",{className:"text-xl font-semibold text-white tracking-tight",children:"Create a Vault First"}),h.jsxs("p",{className:"text-[#747580] text-sm",children:["You need to create a Polymarket wallet before using Polymarket Dealer. Go to the ",h.jsx("span",{className:"text-[#E7FE55]",children:"Vault"})," page to set up your wallet."]}),h.jsx(Ui,{onClick:()=>r(Ce.VAULT),variant:"success",size:"lg",className:"mt-4 bg-[#E7FE55] hover:bg-[#d4eb4d] text-black",children:"Go to Vault"})]})})},Upt=()=>{const t=()=>{window.location.reload()};return h.jsx("div",{className:"min-h-screen bg-[#0f172a] text-slate-200 p-8 font-sans",children:h.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[h.jsxs("div",{className:"border-b border-slate-700 pb-6 mb-10",children:[h.jsx("h1",{className:"text-4xl font-light text-white mb-2",children:"Privacy Policy"}),h.jsx("p",{className:"text-slate-400",children:"Last Updated: December 23, 2025"})]}),h.jsx("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-xl p-6 mb-8",children:h.jsx("p",{className:"text-blue-200 text-sm",children:"This Privacy Policy explains how AutonomousVault handles your data. In short: We don't want your data, and we can't see your keys."})}),h.jsxs("section",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center gap-2 text-[#E7FE55]",children:[h.jsx(ZAe,{size:20}),h.jsx("h2",{className:"text-2xl font-light text-white",children:"1. Data Collection & Storage"})]}),h.jsxs("p",{className:"leading-relaxed text-slate-300",children:["AutonomousVault operates on a ",h.jsx("strong",{children:'"Local-First"'})," architecture."]}),h.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-slate-400",children:[h.jsxs("li",{children:[h.jsx("strong",{children:"Private Keys:"})," Generated locally and stored ONLY in your browser's encrypted storage (IndexedDB). They never leave your device unencrypted."]}),h.jsxs("li",{children:[h.jsx("strong",{children:"Chat History:"})," Stored locally on your device."]}),h.jsxs("li",{children:[h.jsx("strong",{children:"Usage Data:"})," We do not collect analytics or tracking data."]})]})]}),h.jsxs("section",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center gap-2 text-[#E7FE55]",children:[h.jsx(KL,{size:20}),h.jsx("h2",{className:"text-2xl font-light text-white",children:"2. Third-Party Services"})]}),h.jsx("p",{className:"leading-relaxed text-slate-300",children:"While the app runs locally, it interacts with the following services to function:"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[h.jsxs("div",{className:"bg-slate-800 p-4 rounded-lg",children:[h.jsx("h3",{className:"text-white font-medium mb-1",children:"Google Gemini (AI)"}),h.jsx("p",{className:"text-xs text-slate-400",children:"Processes user prompts to generate responses. Your keys are NOT sent to the AI."})]}),h.jsxs("div",{className:"bg-slate-800 p-4 rounded-lg",children:[h.jsx("h3",{className:"text-white font-medium mb-1",children:"Firebase (Auth)"}),h.jsx("p",{className:"text-xs text-slate-400",children:"Handles email/password and Google login. We only see your User ID."})]}),h.jsxs("div",{className:"bg-slate-800 p-4 rounded-lg",children:[h.jsx("h3",{className:"text-white font-medium mb-1",children:"RPC Nodes"}),h.jsx("p",{className:"text-xs text-slate-400",children:"Public nodes (Solana, Hyperliquid) receive your signed transactions to execute them on-chain."})]})]})]}),h.jsxs("section",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center gap-2 text-[#E7FE55]",children:[h.jsx(lw,{size:20}),h.jsx("h2",{className:"text-2xl font-light text-white",children:"3. Your Rights (GDPR/LGPD)"})]}),h.jsx("p",{className:"leading-relaxed text-slate-300",children:"You have complete control over your data:"}),h.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-slate-400",children:[h.jsxs("li",{children:[h.jsx("strong",{children:"Access:"})," All your data is visible within the application."]}),h.jsxs("li",{children:[h.jsx("strong",{children:"Deletion:"}),' You can use the "Delete Account" button in Settings to wipe all local data and delete your Firebase authentication record.']}),h.jsxs("li",{children:[h.jsx("strong",{children:"Portability:"})," You can export your private keys at any time via the Backup feature."]})]})]}),h.jsxs("div",{className:"pt-10 border-t border-slate-700 flex justify-between items-center mt-12",children:[h.jsx("p",{className:"text-xs text-slate-500",children:"AutonomousVault v0.1"}),h.jsxs("button",{onClick:t,className:"text-[#E7FE55] hover:underline flex items-center gap-2",children:[h.jsx(rne,{size:14})," Return to App"]})]})]})})},Fpt=()=>h.jsx("div",{className:"min-h-screen bg-[#0f172a] text-slate-200 p-8 font-sans",children:h.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[h.jsxs("div",{className:"border-b border-slate-700 pb-6 mb-10",children:[h.jsx("h1",{className:"text-4xl font-light text-white mb-2",children:"Terms of Use"}),h.jsx("p",{className:"text-slate-400",children:"Effective Date: December 23, 2025"})]}),h.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-6 flex flex-col gap-4",children:[h.jsxs("div",{className:"flex items-center gap-3 text-red-400",children:[h.jsx(td,{size:24}),h.jsx("h2",{className:"text-xl font-semibold",children:"Critical Disclaimer"})]}),h.jsx("p",{className:"text-sm leading-relaxed text-red-100/80",children:'AutonomousVault is experimental, open-source software. It is provided "AS IS", without warranty of any kind. You use this software entirely at your own risk. The developers constitute a non-custodial entity and accept no liability for lost funds, private key mismanagement, or protocol failures.'})]}),h.jsxs("section",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center gap-2 text-[#E7FE55]",children:[h.jsx(cne,{size:20}),h.jsx("h2",{className:"text-2xl font-light text-white",children:"1. Self-Custody Model"})]}),h.jsx("p",{className:"leading-relaxed text-slate-300",children:"By using AutonomousVault, you acknowledge that:"}),h.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-slate-400",children:[h.jsx("li",{children:"You are the sole custodian of your cryptographic private keys."}),h.jsx("li",{children:"Private keys are encrypted and stored solely within your device's browser (IndexedDB)."}),h.jsx("li",{children:"We (the developers) never have access to your private keys or funds."}),h.jsx("li",{children:"If you lose your password or clear your browser data without a backup, your funds are permanently lost."})]})]}),h.jsxs("section",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center gap-2 text-[#E7FE55]",children:[h.jsx(WL,{size:20}),h.jsx("h2",{className:"text-2xl font-light text-white",children:"2. AI Agent Autonomy"})]}),h.jsx("p",{className:"leading-relaxed text-slate-300",children:"The application uses Artificial Intelligence (AI) to execute transactions on your behalf."}),h.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-slate-400",children:[h.jsx("li",{children:"You are responsible for reviewing and supervising the AI's configured strategies."}),h.jsx("li",{children:"The AI may make errors, hallucinate market data, or execute suboptimal trades."}),h.jsx("li",{children:"You agree to hold the developers harmless for any trading losses incurred by the AI agent."})]})]}),h.jsxs("section",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center gap-2 text-[#E7FE55]",children:[h.jsx(pne,{size:20}),h.jsx("h2",{className:"text-2xl font-light text-white",children:"3. Prohibited Activities"})]}),h.jsx("p",{className:"leading-relaxed text-slate-300",children:"You agree not to use AutonomousVault for:"}),h.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-slate-400",children:[h.jsx("li",{children:"Money laundering or financing terrorism."}),h.jsx("li",{children:"Interacting with sanctioned addresses or entities."}),h.jsx("li",{children:"Any illegal activity defined by the laws of your jurisdiction."})]})]}),h.jsxs("div",{className:"pt-10 border-t border-slate-700 flex justify-between items-center mt-12",children:[h.jsx("p",{className:"text-xs text-slate-500",children:"AutonomousVault v0.1"}),h.jsxs("button",{onClick:()=>window.location.reload(),className:"text-[#E7FE55] hover:underline flex items-center gap-2",children:[h.jsx(rne,{size:14})," Return to App"]})]})]})}),$pt=({userId:t})=>{const[e,n]=T.useState(!0),[r,i]=T.useState(!0),s=t?`legal_consent_v1_${t}`:null;T.useEffect(()=>{(async()=>{if(!s){i(!1);return}const l=await Ie.getItem(s);n(l==="true"),i(!1)})()},[s]);const o=async()=>{s&&await Ie.setItem(s,"true"),n(!0)};return r||e?null:h.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/90 backdrop-blur-sm flex items-center justify-center p-4",children:h.jsxs("div",{className:"bg-[#0f172a] border border-slate-700 w-full max-w-lg rounded-2xl shadow-2xl overflow-hidden",children:[h.jsxs("div",{className:"p-8 pb-4 text-center",children:[h.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-[#E7FE55]/10 mb-4",children:h.jsx(ed,{size:32,className:"text-[#E7FE55]"})}),h.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Welcome to AutonomousVault"}),h.jsx("p",{className:"text-slate-400 text-sm",children:"Use AI to manage your DeFi portfolio autonomously."})]}),h.jsxs("div",{className:"px-8 py-4 space-y-4",children:[h.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 text-sm text-slate-300 border border-slate-700",children:[h.jsx("p",{className:"mb-2 font-semibold text-white",children:"Before you continue:"}),h.jsxs("ul",{className:"space-y-2 list-disc pl-4 text-slate-400",children:[h.jsxs("li",{children:["This software is ",h.jsx("strong",{children:"experimental"}),"."]}),h.jsxs("li",{children:["You maintain ",h.jsx("strong",{children:"sole custody"})," of your keys."]}),h.jsxs("li",{children:["The developers are ",h.jsx("strong",{children:"not liable"})," for any funds lost."]})]})]}),h.jsxs("p",{className:"text-xs text-center text-slate-500 mt-4 leading-relaxed",children:['By clicking "I Agree", you acknowledge that you have read and agree to our',h.jsx("br",{}),h.jsx("a",{href:"/terms.html",target:"_blank",rel:"noopener noreferrer",className:"text-[#E7FE55] hover:underline",children:"Terms of Use"})," and ",h.jsx("a",{href:"/privacy.html",target:"_blank",rel:"noopener noreferrer",className:"text-[#E7FE55] hover:underline",children:"Privacy Policy"}),"."]})]}),h.jsx("div",{className:"p-8 pt-4",children:h.jsxs("button",{onClick:o,className:"w-full bg-[#E7FE55] hover:bg-[#d9f044] text-black font-bold py-3.5 rounded-xl transition-all flex items-center justify-center gap-2 shadow-lg shadow-[#E7FE55]/20",children:["I Agree & Continue ",h.jsx(ine,{size:18})]})})]})})},zpt=({onNavigate:t})=>h.jsx("footer",{className:"w-full py-4 text-center mt-auto border-t border-[#232328]/50",children:h.jsxs("div",{className:"flex flex-col items-center gap-2",children:[h.jsx("p",{className:"text-[10px] text-slate-600 font-medium tracking-wide",children:" 2025 AutonomousVault. All rights reserved."}),t&&h.jsxs("div",{className:"flex items-center gap-4 text-[10px] text-slate-500",children:[h.jsx("button",{onClick:()=>t(Ce.TERMS),className:"hover:text-[#E7FE55] transition-colors",children:"Terms of Use"}),h.jsx("span",{children:""}),h.jsx("button",{onClick:()=>t(Ce.PRIVACY),className:"hover:text-[#E7FE55] transition-colors",children:"Privacy Policy"})]})]})});function Hpt(){var Qo,Bl,vo,bo,Zo,wo,xr,zc;const[t,e]=T.useState(Ce.AGENT),[n,r]=T.useState([]),[i,s]=T.useState(!1),[o,a]=T.useState(!1),[l,c]=T.useState("providers"),[u,f]=T.useState("main"),{user:m,logout:g}=p1(),x=T.useRef(null);T.useEffect(()=>{x.current&&(x.current.scrollTop=0)},[t]);const v=Sr=>{const Yr=Date.now();r(us=>[...us,{id:Yr,message:Sr}]),setTimeout(()=>{r(us=>us.filter(wh=>wh.id!==Yr))},5e3)},{vault:w,password:E,setPassword:C,withdrawAmount:k,setWithdrawAmount:O,withdrawNetwork:j,setWithdrawNetwork:R,showBackupModal:U,setShowBackupModal:V,backupKey:F,setBackupKey:$,showHLBackupModal:K,setShowHLBackupModal:H,hlBackupKey:B,setHLBackupKey:A,isImporting:I,setIsImporting:M,importKey:z,setImportKey:G,refreshBalance:te,connectOwnerWallet:Y,disconnectOwnerWallet:q,createVault:D,unlockVault:_,requestAirdrop:W,handleWithdraw:X,handleWithdrawHL:re,handleWithdrawPM:ae,importVault:Ee,resolveTokenMint:ue,connectHLOwnerWallet:me,disconnectHLOwnerWallet:ce,refreshHLBalance:oe,isImportingSolana:ke,setIsImportingSolana:Ne,isImportingHyperliquid:ze,setIsImportingHyperliquid:Ze,isImportingPolymarket:Ye,setIsImportingPolymarket:We,solanaPassword:St,setSolanaPassword:st,hyperliquidPassword:Bt,setHyperliquidPassword:Zt,polymarketPassword:Ge,setPolymarketPassword:At,solanaImportKey:un,setSolanaImportKey:Pe,hlImportKey:Ve,setHLImportKey:ft,pmImportKey:lt,setPMImportKey:se,createSolanaVault:J,createHyperliquidVault:Z,createPolymarketVault:fe,importSolanaVault:be,importHyperliquidVault:he,importPolymarketVault:ye,connectPMOwnerWallet:Xe,disconnectPMOwnerWallet:et,showPMBackupModal:it,setShowPMBackupModal:Ft,pmBackupKey:xt,setPMBackupKey:Rt}=_ht(v,(m==null?void 0:m.uid)||null),sn=!!(w.publicKey||w.hlPublicKey);T.useEffect(()=>{[Ce.AGENT,Ce.VAULT_DEALER,Ce.DEALER_DASHBOARD,Ce.DEALER_THINKING,Ce.DEALER_CONFIG].includes(t)&&!w.isUnlocked&&sn&&e(Ce.VAULT)},[t,w.isUnlocked,sn]),T.useEffect(()=>{w.isUnlocked&&e(Ce.DASHBOARD)},[w.isUnlocked]);const{portfolioHistoryDaily:en,portfolioHistoryLongTerm:on,assetPrices:Hi,assetAllocationData:Vn}=Iht(w),{activityFeed:le,activityDisplayCount:Q,addActivityLog:ee}=Pht(w),{scheduledTasks:pe,setScheduledTasks:Te}=Rht(w,E,v,te,ee),{messages:Re,inputMessage:$e,setInputMessage:Jt,isAiProcessing:Kt,aiStatus:Vt,scrollRef:gn,handleSendMessage:mt,activeConversationId:ct,loadConversation:Xs,startNewConversation:$n}=Lht(w,E,Te,v,te,ee,ue);Dme(w,E);const yr=async Sr=>{try{const Yr=await Xu.loadConversation(Sr,E);Yr?Xs(Yr):v("Failed to load conversation.")}catch(Yr){console.error(Yr),v("Error loading conversation. Check password.")}},$c=()=>{$n(),e(Ce.AGENT)},Ll=async()=>{v("Refreshing data...");try{const Sr=[];w.publicKey&&Sr.push(te(w.publicKey)),w.hlPublicKey&&Sr.push(oe(w.hlPublicKey)),await Promise.all(Sr),v("Data refreshed successfully")}catch(Sr){console.error("Refresh failed",Sr),v("Failed to refresh data")}};return h.jsxs("div",{className:"flex h-screen bg-[#0f1015] text-[#e4e5e9] font-sans selection:bg-[#E7FE55]/30 overflow-hidden",children:[h.jsx(e5e,{activeTab:t,setActiveTab:e,isVaultUnlocked:w.isUnlocked,onSelectConversation:yr,onNewChat:$c,currentConversationId:ct,password:E,isOpen:i,onClose:()=>s(!1)}),h.jsxs("main",{ref:x,className:`flex-1 ml-0 xl:ml-[264px] h-full flex flex-col relative transition-all duration-300 ${[Ce.VAULT_DEALER,Ce.DEALER_DASHBOARD,Ce.DEALER_THINKING,Ce.DEALER_CONFIG,Ce.DEALER_PROMPT,Ce.POLYMARKET_DEALER,Ce.POLYMARKET_DASHBOARD,Ce.POLYMARKET_THINKING,Ce.POLYMARKET_CONFIG,Ce.POLYMARKET_PROMPT].includes(t)?"overflow-hidden":"overflow-y-auto"}`,children:[t===Ce.AGENT&&h.jsxs("header",{className:"flex justify-between items-center mb-0 sticky top-0 z-40 bg-[#0f1015] pt-8 pb-4 px-4 md:px-8 lg:px-12 xl:px-16 transition-all shrink-0 relative",children:[h.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[h.jsx("button",{onClick:()=>s(!0),className:"xl:hidden text-[#747580] hover:text-white transition-colors",children:h.jsx(Lz,{size:24})}),h.jsxs("div",{children:[h.jsx("h2",{className:"text-xl font-semibold text-white tracking-tight",children:"Vault Operator"}),h.jsx("p",{className:"text-[#747580] text-sm hidden sm:block",children:"Interact with Vault Operator using natural language."})]})]}),h.jsxs("div",{className:"hidden sm:flex items-center gap-2 absolute left-1/2 transform -translate-x-1/2",children:[h.jsxs("button",{onClick:$c,className:"flex items-center gap-2 px-3 py-1.5 rounded bg-[#E7FE55] hover:bg-[#f0ff7a] text-black text-sm font-medium transition-colors",title:"New Chat",children:[h.jsx("div",{className:"w-5 h-5 rounded bg-black/20 flex items-center justify-center",children:h.jsx(vu,{size:12,strokeWidth:2.5})}),h.jsx("span",{className:"hidden md:inline",children:"New"})]}),h.jsx("div",{className:"h-6 w-px bg-[#232328]"}),h.jsxs("button",{onClick:()=>e(Ce.HISTORY),className:"flex items-center gap-2 px-3 py-1.5 rounded bg-[#14151a] hover:bg-[#1a1b21] text-[#a0a1a8] hover:text-white text-sm font-medium transition-colors border border-[#232328]",title:"Chat History",children:[h.jsx(Ua,{size:14}),h.jsx("span",{className:"hidden md:inline",children:"History"})]}),h.jsxs("button",{onClick:()=>e(Ce.SCHEDULER),className:"flex items-center gap-2 px-3 py-1.5 rounded bg-[#14151a] hover:bg-[#1a1b21] text-[#a0a1a8] hover:text-white text-sm font-medium transition-colors border border-[#232328]",title:"Automations",children:[h.jsx(GL,{size:14}),h.jsx("span",{className:"hidden md:inline",children:"Automations"})]})]}),h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("div",{className:"text-right hidden md:block",children:[h.jsx("div",{className:"text-[9px] uppercase tracking-[0.05em] text-[#5a5b63]",children:"System Status"}),h.jsxs("div",{className:"flex items-center justify-end gap-1.5 text-[#E7FE55] text-[11px] font-medium",children:[h.jsx("div",{className:"w-1 h-1 bg-[#E7FE55] rounded-full"}),"Online"]})]}),h.jsxs("div",{className:"relative",children:[h.jsx("button",{onClick:()=>a(!o),className:"flex items-center gap-2 p-1 rounded-lg hover:bg-[#1a1b21] transition-colors border border-transparent hover:border-[#232328]",title:(m==null?void 0:m.email)||"User",children:m!=null&&m.photoURL?h.jsx("img",{src:m.photoURL,alt:"User",className:"w-8 h-8 rounded-full border border-[#232328]"}):h.jsx("div",{className:"w-8 h-8 rounded-full bg-[#E7FE55] flex items-center justify-center text-black font-semibold text-sm",children:((Bl=(Qo=m==null?void 0:m.email)==null?void 0:Qo[0])==null?void 0:Bl.toUpperCase())||"U"})}),o&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>a(!1)}),h.jsxs("div",{className:"absolute right-0 top-full mt-2 w-64 bg-[#14151a] border border-[#232328] rounded-lg shadow-xl z-50 overflow-hidden",children:[h.jsx("div",{className:"px-4 py-3 border-b border-[#232328]",children:h.jsxs("div",{className:"flex items-center gap-3",children:[m!=null&&m.photoURL?h.jsx("img",{src:m.photoURL,alt:"User",className:"w-10 h-10 rounded-full border border-[#232328]"}):h.jsx("div",{className:"w-10 h-10 rounded-full bg-[#E7FE55] flex items-center justify-center text-black font-semibold",children:((bo=(vo=m==null?void 0:m.email)==null?void 0:vo[0])==null?void 0:bo.toUpperCase())||"U"}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("p",{className:"text-white text-sm font-medium truncate",children:(m==null?void 0:m.displayName)||"User"}),h.jsx("p",{className:"text-[#747580] text-xs truncate",children:m==null?void 0:m.email})]})]})}),h.jsxs("div",{className:"p-2 space-y-1",children:[h.jsxs("button",{onClick:()=>{a(!1),Ll()},className:"w-full flex items-center gap-3 px-3 py-2 text-[#a0a1a8] hover:text-white hover:bg-[#1a1b21] rounded-lg transition-colors text-sm",children:[h.jsx(Cc,{size:16}),"Refresh Data"]}),h.jsxs("button",{onClick:()=>{a(!1),e(Ce.CONFIGURATION)},className:"w-full flex items-center gap-3 px-3 py-2 text-[#a0a1a8] hover:text-white hover:bg-[#1a1b21] rounded-lg transition-colors text-sm",children:[h.jsx(RT,{size:16}),"Configuration"]}),h.jsx("div",{className:"border-t border-[#232328] my-2"}),h.jsxs("button",{onClick:async()=>{a(!1),await g()},className:"w-full flex items-center gap-3 px-3 py-2 text-[#a0a1a8] hover:text-white hover:bg-[#1a1b21] rounded-lg transition-colors text-sm",children:[h.jsx(Dz,{size:16}),"Sign Out"]})]})]})]})]})]})]}),h.jsxs("div",{className:`flex-1 pb-8 max-w-[1920px] mx-auto w-full ${t===Ce.AGENT?"px-6 md:px-24 lg:px-40 xl:px-64":"px-4 md:px-8 lg:px-12 xl:px-16"} ${[Ce.VAULT_DEALER,Ce.DEALER_DASHBOARD,Ce.DEALER_THINKING,Ce.DEALER_CONFIG,Ce.DEALER_PROMPT,Ce.POLYMARKET_DEALER,Ce.POLYMARKET_DASHBOARD,Ce.POLYMARKET_THINKING,Ce.POLYMARKET_CONFIG,Ce.POLYMARKET_PROMPT].includes(t)?"flex flex-col h-full":""}`,children:[t!==Ce.AGENT&&h.jsxs("header",{className:"flex justify-between items-center mb-6 sticky top-0 z-40 bg-[#0f1015] pt-8 pb-4 -mx-4 px-4 md:px-0 md:-mx-0 transition-all shrink-0",children:[h.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[h.jsx("button",{onClick:()=>s(!0),className:"xl:hidden text-[#747580] hover:text-white transition-colors",children:h.jsx(Lz,{size:24})}),h.jsx("div",{className:"flex items-center gap-4",children:h.jsxs("div",{children:[h.jsxs("h2",{className:"text-xl font-semibold text-white tracking-tight",children:[t===Ce.DASHBOARD&&"Dashboard",t===Ce.VAULT&&"Vault",t===Ce.SCHEDULER&&"Automations",[Ce.VAULT_DEALER,Ce.DEALER_DASHBOARD,Ce.DEALER_THINKING,Ce.DEALER_CONFIG,Ce.DEALER_PROMPT].includes(t)&&"Hyperliquid Dealer",t===Ce.CONFIGURATION&&"Configuration",t===Ce.HYPERLIQUID&&"Hyperliquid Trading",t===Ce.HISTORY&&"History",t===Ce.TOKEN_COSTS&&"Token Costs",[Ce.POLYMARKET_DEALER,Ce.POLYMARKET_DASHBOARD].includes(t)&&"Polymarket Dealer",t===Ce.POLYMARKET_CONFIG&&"Polymarket Config",t===Ce.POLYMARKET_PROMPT&&"Polymarket Strategy"]}),h.jsxs("p",{className:"text-[#747580] text-sm hidden sm:block",children:[t===Ce.DASHBOARD&&"Overview of your autonomous DeFi agent.",t===Ce.VAULT&&"Manage your secure local vault and assets.",t===Ce.SCHEDULER&&"Automate swaps, transfers and trading strategies.",[Ce.VAULT_DEALER,Ce.DEALER_DASHBOARD,Ce.DEALER_THINKING,Ce.DEALER_CONFIG,Ce.DEALER_PROMPT].includes(t)&&"Autonomous trading engine (BETA).",t===Ce.CONFIGURATION&&"Configure trading parameters and risk management.",t===Ce.HYPERLIQUID&&"Trade on Hyperliquid Testnet.",t===Ce.HISTORY&&"Review past conversations.",t===Ce.TOKEN_COSTS&&"Monitor AI token consumption and costs.",[Ce.POLYMARKET_DEALER,Ce.POLYMARKET_DASHBOARD].includes(t)&&"Autonomous prediction market trading (BETA).",t===Ce.POLYMARKET_CONFIG&&"Configure Polymarket trading parameters.",t===Ce.POLYMARKET_PROMPT&&"Customize your Polymarket strategy."]})]})})]}),[Ce.VAULT_DEALER,Ce.DEALER_DASHBOARD,Ce.DEALER_THINKING,Ce.DEALER_CONFIG,Ce.DEALER_PROMPT].includes(t)&&h.jsxs("div",{className:"hidden sm:flex items-center gap-1 bg-[#1a1b21] p-1 rounded border border-[#232328] absolute left-1/2 transform -translate-x-1/2",children:[h.jsx("button",{onClick:()=>e(Ce.DEALER_DASHBOARD),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${[Ce.VAULT_DEALER,Ce.DEALER_DASHBOARD].includes(t)?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Dashboard"}),h.jsx("button",{onClick:()=>e(Ce.DEALER_THINKING),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${t===Ce.DEALER_THINKING?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Thinking"}),h.jsx("button",{onClick:()=>e(Ce.DEALER_CONFIG),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${t===Ce.DEALER_CONFIG?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Configuration"}),h.jsx("button",{onClick:()=>e(Ce.DEALER_PROMPT),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${t===Ce.DEALER_PROMPT?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Prompt"})]}),[Ce.POLYMARKET_DEALER,Ce.POLYMARKET_DASHBOARD,Ce.POLYMARKET_THINKING,Ce.POLYMARKET_CONFIG,Ce.POLYMARKET_PROMPT].includes(t)&&h.jsxs("div",{className:"hidden sm:flex items-center gap-1 bg-[#1a1b21] p-1 rounded border border-[#232328] absolute left-1/2 transform -translate-x-1/2",children:[h.jsx("button",{onClick:()=>e(Ce.POLYMARKET_DASHBOARD),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${[Ce.POLYMARKET_DEALER,Ce.POLYMARKET_DASHBOARD].includes(t)?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Dashboard"}),h.jsx("button",{onClick:()=>e(Ce.POLYMARKET_THINKING),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${t===Ce.POLYMARKET_THINKING?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Thinking"}),h.jsx("button",{onClick:()=>e(Ce.POLYMARKET_CONFIG),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${t===Ce.POLYMARKET_CONFIG?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Configuration"}),h.jsx("button",{onClick:()=>e(Ce.POLYMARKET_PROMPT),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${t===Ce.POLYMARKET_PROMPT?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Prompt"})]}),t===Ce.CONFIGURATION&&h.jsxs("div",{className:"hidden sm:flex items-center gap-1 bg-[#1a1b21] p-1 rounded border border-[#232328] absolute left-1/2 transform -translate-x-1/2",children:[h.jsx("button",{onClick:()=>c("providers"),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${l==="providers"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"AI Providers"}),h.jsx("button",{onClick:()=>c("user"),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${l==="user"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"User Settings"})]}),t===Ce.VAULT&&h.jsxs("div",{className:"hidden sm:flex items-center gap-1 bg-[#1a1b21] p-1 rounded border border-[#232328] absolute left-1/2 transform -translate-x-1/2",children:[h.jsx("button",{onClick:()=>f("main"),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${u==="main"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Overview"}),h.jsx("button",{onClick:()=>f("solana"),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${u==="solana"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Solana"}),h.jsx("button",{onClick:()=>f("hyperliquid"),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${u==="hyperliquid"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Hyperliquid"}),h.jsx("button",{onClick:()=>f("polymarket"),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${u==="polymarket"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Polymarket"})]}),h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("div",{className:"text-right hidden md:block",children:[h.jsx("div",{className:"text-[9px] uppercase tracking-[0.05em] text-[#5a5b63]",children:"System Status"}),h.jsxs("div",{className:"flex items-center justify-end gap-1.5 text-[#E7FE55] text-[11px] font-medium",children:[h.jsx("div",{className:"w-1 h-1 bg-[#E7FE55] rounded-full"}),"Online"]})]}),h.jsxs("div",{className:"relative",children:[h.jsx("button",{onClick:()=>a(!o),className:"flex items-center gap-2 p-1 rounded-lg hover:bg-[#1a1b21] transition-colors border border-transparent hover:border-[#232328]",title:(m==null?void 0:m.email)||"User",children:m!=null&&m.photoURL?h.jsx("img",{src:m.photoURL,alt:"User",className:"w-8 h-8 rounded-full border border-[#232328]"}):h.jsx("div",{className:"w-8 h-8 rounded-full bg-[#E7FE55] flex items-center justify-center text-black font-semibold text-sm",children:((wo=(Zo=m==null?void 0:m.email)==null?void 0:Zo[0])==null?void 0:wo.toUpperCase())||"U"})}),o&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>a(!1)}),h.jsxs("div",{className:"absolute right-0 top-full mt-2 w-64 bg-[#14151a] border border-[#232328] rounded-lg shadow-xl z-50 overflow-hidden",children:[h.jsx("div",{className:"px-4 py-3 border-b border-[#232328]",children:h.jsxs("div",{className:"flex items-center gap-3",children:[m!=null&&m.photoURL?h.jsx("img",{src:m.photoURL,alt:"User",className:"w-10 h-10 rounded-full border border-[#232328]"}):h.jsx("div",{className:"w-10 h-10 rounded-full bg-[#E7FE55] flex items-center justify-center text-black font-semibold",children:((zc=(xr=m==null?void 0:m.email)==null?void 0:xr[0])==null?void 0:zc.toUpperCase())||"U"}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("p",{className:"text-white text-sm font-medium truncate",children:(m==null?void 0:m.displayName)||"User"}),h.jsx("p",{className:"text-[#747580] text-xs truncate",children:m==null?void 0:m.email})]})]})}),h.jsxs("div",{className:"p-2 space-y-1",children:[h.jsxs("button",{onClick:()=>{a(!1),Ll()},className:"w-full flex items-center gap-3 px-3 py-2 text-[#a0a1a8] hover:text-white hover:bg-[#1a1b21] rounded-lg transition-colors text-sm",children:[h.jsx(Cc,{size:16}),"Refresh Data"]}),h.jsxs("button",{onClick:()=>{a(!1),e(Ce.CONFIGURATION)},className:"w-full flex items-center gap-3 px-3 py-2 text-[#a0a1a8] hover:text-white hover:bg-[#1a1b21] rounded-lg transition-colors text-sm",children:[h.jsx(RT,{size:16}),"Configuration"]}),h.jsx("div",{className:"border-t border-[#232328] my-2"}),h.jsxs("button",{onClick:async()=>{a(!1),await g()},className:"w-full flex items-center gap-3 px-3 py-2 text-[#a0a1a8] hover:text-white hover:bg-[#1a1b21] rounded-lg transition-colors text-sm",children:[h.jsx(Dz,{size:16}),"Sign Out"]})]})]})]})]})]})]}),h.jsxs("div",{className:`animate-fade-in ${[Ce.VAULT_DEALER,Ce.DEALER_DASHBOARD,Ce.DEALER_THINKING,Ce.DEALER_CONFIG,Ce.DEALER_PROMPT,Ce.POLYMARKET_DEALER,Ce.POLYMARKET_DASHBOARD,Ce.POLYMARKET_THINKING,Ce.POLYMARKET_CONFIG,Ce.POLYMARKET_PROMPT].includes(t)?"flex-1 min-h-0":""}`,children:[t===Ce.DASHBOARD&&h.jsx(bGe,{vault:w,connectOwnerWallet:Y,disconnectOwnerWallet:q,connectHLOwnerWallet:me,disconnectHLOwnerWallet:ce,connectPMOwnerWallet:Xe,disconnectPMOwnerWallet:et,assetPrices:Hi,portfolioHistoryDaily:en,portfolioHistoryLongTerm:on,scheduledTasks:pe,assetAllocationData:Vn,activityFeed:le,activityDisplayCount:Q,setActiveTab:e,refreshData:Ll,onNewChat:$c,setActivityDisplayCount:function(Sr){throw new Error("Function not implemented.")}}),t===Ce.VAULT&&h.jsx(wGe,{vault:w,password:E,setPassword:C,withdrawAmount:k,setWithdrawAmount:O,withdrawNetwork:j,setWithdrawNetwork:R,isImporting:I,setIsImporting:M,importKey:z,setImportKey:G,createVault:D,unlockVault:_,requestAirdrop:W,handleWithdraw:X,handleWithdrawHL:re,handleWithdrawPM:ae,importVault:Ee,addNotification:v,isImportingSolana:ke,setIsImportingSolana:Ne,isImportingHyperliquid:ze,setIsImportingHyperliquid:Ze,isImportingPolymarket:Ye,setIsImportingPolymarket:We,solanaPassword:St,setSolanaPassword:st,hyperliquidPassword:Bt,setHyperliquidPassword:Zt,polymarketPassword:Ge,setPolymarketPassword:At,solanaImportKey:un,setSolanaImportKey:Pe,hlImportKey:Ve,setHLImportKey:ft,pmImportKey:lt,setPMImportKey:se,createSolanaVault:J,createHyperliquidVault:Z,createPolymarketVault:fe,importSolanaVault:be,importHyperliquidVault:he,importPolymarketVault:ye,setActiveTab:e,activeVaultTab:u,setActiveVaultTab:f}),t===Ce.AGENT&&h.jsx(iZe,{messages:Re,inputMessage:$e,setInputMessage:Jt,handleSendMessage:mt,isAiProcessing:Kt,aiStatus:Vt,scrollRef:gn,isVaultUnlocked:w.isUnlocked,password:E,setPassword:C,unlockVault:_,hasVault:!!(w.publicKey||w.hlPublicKey),onNavigate:e}),t===Ce.HISTORY&&h.jsx(Hht,{onSelectConversation:Sr=>{yr(Sr),e(Ce.AGENT)}}),t===Ce.SCHEDULER&&h.jsx(oZe,{scheduledTasks:pe,setScheduledTasks:Te,addNotification:v}),[Ce.VAULT_DEALER,Ce.DEALER_DASHBOARD,Ce.DEALER_THINKING,Ce.DEALER_CONFIG,Ce.DEALER_PROMPT].includes(t)&&h.jsx(Bat,{vault:w,password:E,activeTab:t,setActiveTab:e}),t===Ce.CONFIGURATION&&h.jsx(Npt,{vault:w,password:E,addNotification:v,activeTab:l,setActiveTab:c}),t===Ce.HYPERLIQUID&&h.jsx(jat,{vault:w,connectHLOwnerWallet:me,refreshHLBalance:oe,activityLog:le}),t===Ce.TOKEN_COSTS&&h.jsx(Ipt,{addNotification:v}),[Ce.POLYMARKET_DEALER,Ce.POLYMARKET_DASHBOARD,Ce.POLYMARKET_THINKING,Ce.POLYMARKET_CONFIG,Ce.POLYMARKET_PROMPT].includes(t)&&h.jsx(jpt,{vault:w,password:E,activeTab:t,setActiveTab:e}),t===Ce.PRIVACY&&h.jsx(Upt,{}),t===Ce.TERMS&&h.jsx(Fpt,{})]})]}),t!==Ce.AGENT&&h.jsx(zpt,{onNavigate:e})]}),h.jsx("div",{className:"fixed bottom-6 right-6 z-[60] space-y-2 pointer-events-none",children:n.map(Sr=>h.jsxs("div",{className:"bg-[#14151a] border border-[#232328] text-white px-4 py-3 rounded shadow-xl flex items-center gap-3 animate-slide-up pointer-events-auto max-w-sm",children:[h.jsx("div",{className:"w-1.5 h-1.5 bg-[#E7FE55] rounded-full"}),h.jsx("span",{className:"text-sm font-medium",children:Sr.message}),h.jsx("button",{onClick:()=>r(Yr=>Yr.filter(us=>us.id!==Sr.id)),className:"text-[#747580] hover:text-white ml-2",children:h.jsx(GC,{size:14})})]},Sr.id))}),U&&h.jsx(Jlt,{backupKey:F,setBackupKey:$,setShowBackupModal:V,addNotification:v,onClose:()=>{H(!0)}}),K&&h.jsx(Xlt,{backupKey:B,setBackupKey:A,setShowBackupModal:H,addNotification:v}),it&&h.jsx(Qlt,{backupKey:xt,setBackupKey:Rt,setShowBackupModal:Ft,addNotification:v}),h.jsx($pt,{userId:(m==null?void 0:m.uid)||null})]})}function Vpt(){const{signInWithGoogle:t,signInWithEmail:e,signUp:n}=p1(),[r,i]=T.useState(""),[s,o]=T.useState(""),[a,l]=T.useState(!1),[c,u]=T.useState(!1),[f,m]=T.useState(null),[g,x]=T.useState(!1),v=async()=>{m(null),x(!0);try{await t()}catch(E){m(E.message||"Failed to sign in with Google")}finally{x(!1)}},w=async E=>{E.preventDefault(),m(null),x(!0);try{a?await n(r,s):await e(r,s)}catch(C){const k=C.code||"";k.includes("user-not-found")?m("No account found with this email"):k.includes("wrong-password")?m("Incorrect password"):k.includes("email-already-in-use")?m("An account already exists with this email"):k.includes("weak-password")?m("Password should be at least 6 characters"):k.includes("invalid-email")?m("Invalid email address"):m(C.message||"Authentication failed")}finally{x(!1)}};return h.jsx("div",{className:"min-h-screen bg-[#0f1015] flex items-center justify-center p-4",children:h.jsxs("div",{className:"w-full max-w-md",children:[h.jsxs("div",{className:"text-center mb-8",children:[h.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-[#E7FE55] to-[#c8e044] rounded-2xl mb-4 shadow-lg shadow-[#E7FE55]/20",children:h.jsxs("svg",{className:"w-8 h-8 text-black",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"}),h.jsx("path",{d:"M12 8v4"}),h.jsx("path",{d:"M12 16h.01"})]})}),h.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"AutonomousVault"}),h.jsx("p",{className:"text-[#747580] text-sm",children:"Multi-Chain DeFi Agent"})]}),h.jsxs("div",{className:"bg-[#14151a] border border-[#232328] rounded-xl p-6 shadow-xl",children:[h.jsx("h2",{className:"text-lg font-semibold text-white mb-6 text-center",children:a?"Create Account":"Welcome Back"}),f&&h.jsxs("div",{className:"flex items-center gap-2 bg-red-500/10 border border-red-500/30 text-red-400 px-4 py-3 rounded-lg mb-4",children:[h.jsx(VC,{size:16}),h.jsx("span",{className:"text-sm",children:f})]}),h.jsxs("button",{onClick:v,disabled:g,className:"w-full flex items-center justify-center gap-3 bg-white hover:bg-gray-100 text-gray-800 font-medium py-3 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[h.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[h.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),h.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),h.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),h.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),h.jsxs("div",{className:"flex items-center gap-4 my-6",children:[h.jsx("div",{className:"flex-1 h-px bg-[#232328]"}),h.jsx("span",{className:"text-[#5a5b63] text-xs uppercase tracking-wider",children:"or"}),h.jsx("div",{className:"flex-1 h-px bg-[#232328]"})]}),h.jsxs("form",{onSubmit:w,className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-[#a0a1a8] text-sm mb-2",children:"Email"}),h.jsxs("div",{className:"relative",children:[h.jsx(ETe,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-[#5a5b63]"}),h.jsx("input",{type:"email",value:r,onChange:E=>i(E.target.value),placeholder:"you@example.com",required:!0,className:"w-full bg-[#0f1015] border border-[#232328] rounded-lg py-3 pl-10 pr-4 text-white placeholder-[#5a5b63] focus:outline-none focus:border-[#E7FE55] focus:ring-1 focus:ring-[#E7FE55]/20 transition-colors"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-[#a0a1a8] text-sm mb-2",children:"Password"}),h.jsxs("div",{className:"relative",children:[h.jsx(lw,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-[#5a5b63]"}),h.jsx("input",{type:c?"text":"password",value:s,onChange:E=>o(E.target.value),placeholder:"",required:!0,minLength:6,className:"w-full bg-[#0f1015] border border-[#232328] rounded-lg py-3 pl-10 pr-12 text-white placeholder-[#5a5b63] focus:outline-none focus:border-[#E7FE55] focus:ring-1 focus:ring-[#E7FE55]/20 transition-colors"}),h.jsx("button",{type:"button",onClick:()=>u(!c),className:"absolute right-3 top-1/2 -translate-y-1/2 text-[#5a5b63] hover:text-[#a0a1a8] transition-colors",children:c?h.jsx(KL,{size:16}):h.jsx(lne,{size:16})})]})]}),h.jsx("button",{type:"submit",disabled:g,className:"w-full bg-[#E7FE55] hover:bg-[#f0ff7a] text-black font-semibold py-3 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:g?"Loading...":a?"Create Account":"Sign In"})]}),h.jsxs("p",{className:"text-center text-[#747580] text-sm mt-6",children:[a?"Already have an account?":"Don't have an account?"," ",h.jsx("button",{onClick:()=>{l(!a),m(null)},className:"text-[#E7FE55] hover:underline font-medium",children:a?"Sign In":"Sign Up"})]})]}),h.jsx("p",{className:"text-center text-[#5a5b63] text-xs mt-6",children:"By continuing, you agree to our Terms of Service"})]})})}function qpt({children:t}){const{user:e,loading:n}=p1();return n?h.jsx("div",{className:"h-screen w-screen bg-[#0f1015] flex items-center justify-center",children:h.jsxs("div",{className:"flex flex-col items-center gap-4",children:[h.jsxs("div",{className:"relative w-12 h-12",children:[h.jsx("div",{className:"absolute inset-0 border-2 border-[#232328] rounded-full"}),h.jsx("div",{className:"absolute inset-0 border-2 border-transparent border-t-[#E7FE55] rounded-full animate-spin"})]}),h.jsx("p",{className:"text-[#747580] text-sm",children:"Loading..."})]})}):e?h.jsx(h.Fragment,{children:t}):h.jsx(Vpt,{})}ey.initializeProductionSecurity();const v0e=document.getElementById("root");if(!v0e)throw new Error("Failed to find the root element");const Gpt=Xye.createRoot(v0e);Gpt.render(h.jsx(pu.StrictMode,{children:h.jsx(Vbe,{children:h.jsx(qpt,{children:h.jsx(Hpt,{})})})}));export{Nm as $,AZ as A,ln as B,vht as C,rd as D,Lr as E,Dg as F,rke as G,LT as H,U4 as I,Mt as J,Jo as K,ve as L,z4 as M,Oie as N,c_e as O,vt as P,Ke as Q,m2e as R,xZ as S,Mi as T,X_e as U,mc as V,sd as W,Es as X,j_e as Y,fl as Z,Qn as _,vx as a,Y4 as a$,ss as a0,yw as a1,u8 as a2,Fg as a3,Px as a4,Y_e as a5,Uie as a6,Pr as a7,wt as a8,Qt as a9,N_e as aA,BT as aB,lm as aC,fc as aD,a2 as aE,ww as aF,Hb as aG,MH as aH,iR as aI,T1 as aJ,e_e as aK,l2e as aL,rx as aM,y_e as aN,s2 as aO,as as aP,Wy as aQ,qs as aR,Ec as aS,Jp as aT,t_e as aU,Aie as aV,vw as aW,Ns as aX,om as aY,Cie as aZ,fke as a_,b8 as aa,J_e as ab,gr as ac,tIe as ad,rIe as ae,um as af,qT as ag,r_e as ah,Fu as ai,a_e as aj,o_e as ak,g8 as al,Nie as am,l2 as an,VT as ao,n_e as ap,lo as aq,omt as ar,dc as as,m8 as at,Sne as au,bu as av,BH as aw,zH as ax,xke as ay,Kf as az,Aht as b,Wf as b0,nIe as b1,dw as b2,oH as b3,yne as b4,xne as b5,uh as b6,zre as b7,emt as b8,A1 as b9,uie as bA,od as bB,cmt as bC,jre as bD,KC as bE,YL as bF,ZH as bG,XH as bH,dmt as bI,pp as bJ,B4 as bK,Zpt as bL,Tke as bM,ZC as bN,Bi as bO,Jpt as bP,id as bQ,w1 as bR,ike as bS,Xpt as bT,kke as bU,umt as bV,fmt as bW,hmt as bX,gne as bY,xw as ba,mr as bb,ake as bc,lke as bd,E1 as be,eV as bf,AIe as bg,SIe as bh,dR as bi,RNe as bj,Ene as bk,cke as bl,wc as bm,Jie as bn,Yie as bo,PNe as bp,Qpt as bq,One as br,MT as bs,pmt as bt,os as bu,lmt as bv,amt as bw,mmt as bx,WC as by,Hre as bz,eZ as c,Qct as d,Hmt as e,Ma as f,cs as g,mme as h,kx as i,dh as j,Kn as k,Cx as l,_x as m,Fa as n,i8 as o,OZ as p,xe as q,Gu as r,Nx as s,rt as t,_me as u,On as v,ht as w,pi as x,xn as y,wne as z};
